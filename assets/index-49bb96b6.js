var F$=Object.defineProperty;var G$=(ft,lt,dt)=>lt in ft?F$(ft,lt,{enumerable:!0,configurable:!0,writable:!0,value:dt}):ft[lt]=dt;var go=(ft,lt,dt)=>(G$(ft,typeof lt!="symbol"?lt+"":lt,dt),dt);function _mergeNamespaces(ft,lt){for(var dt=0;dt<lt.length;dt++){const vt=lt[dt];if(typeof vt!="string"&&!Array.isArray(vt)){for(const St in vt)if(St!=="default"&&!(St in ft)){const Et=Object.getOwnPropertyDescriptor(vt,St);Et&&Object.defineProperty(ft,St,Et.get?Et:{enumerable:!0,get:()=>vt[St]})}}}return Object.freeze(Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}))}(function(){const lt=document.createElement("link").relList;if(lt&&lt.supports&&lt.supports("modulepreload"))return;for(const St of document.querySelectorAll('link[rel="modulepreload"]'))vt(St);new MutationObserver(St=>{for(const Et of St)if(Et.type==="childList")for(const Ct of Et.addedNodes)Ct.tagName==="LINK"&&Ct.rel==="modulepreload"&&vt(Ct)}).observe(document,{childList:!0,subtree:!0});function dt(St){const Et={};return St.integrity&&(Et.integrity=St.integrity),St.referrerPolicy&&(Et.referrerPolicy=St.referrerPolicy),St.crossOrigin==="use-credentials"?Et.credentials="include":St.crossOrigin==="anonymous"?Et.credentials="omit":Et.credentials="same-origin",Et}function vt(St){if(St.ep)return;St.ep=!0;const Et=dt(St);fetch(St.href,Et)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ft){return ft&&ft.__esModule&&Object.prototype.hasOwnProperty.call(ft,"default")?ft.default:ft}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$9=Symbol.for("react.element"),n$9=Symbol.for("react.portal"),p$a=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$a=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$9=Symbol.for("react.context"),v$8=Symbol.for("react.forward_ref"),w$7=Symbol.for("react.suspense"),x$6=Symbol.for("react.memo"),y$7=Symbol.for("react.lazy"),z$6=Symbol.iterator;function A$5(ft){return ft===null||typeof ft!="object"?null:(ft=z$6&&ft[z$6]||ft["@@iterator"],typeof ft=="function"?ft:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$7={};function E$7(ft,lt,dt){this.props=ft,this.context=lt,this.refs=D$7,this.updater=dt||B$3}E$7.prototype.isReactComponent={};E$7.prototype.setState=function(ft,lt){if(typeof ft!="object"&&typeof ft!="function"&&ft!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ft,lt,"setState")};E$7.prototype.forceUpdate=function(ft){this.updater.enqueueForceUpdate(this,ft,"forceUpdate")};function F$2(){}F$2.prototype=E$7.prototype;function G$2(ft,lt,dt){this.props=ft,this.context=lt,this.refs=D$7,this.updater=dt||B$3}var H$6=G$2.prototype=new F$2;H$6.constructor=G$2;C$5(H$6,E$7.prototype);H$6.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ft,lt,dt){var vt,St={},Et=null,Ct=null;if(lt!=null)for(vt in lt.ref!==void 0&&(Ct=lt.ref),lt.key!==void 0&&(Et=""+lt.key),lt)J$2.call(lt,vt)&&!L$4.hasOwnProperty(vt)&&(St[vt]=lt[vt]);var At=arguments.length-2;if(At===1)St.children=dt;else if(1<At){for(var Rt=Array(At),Dt=0;Dt<At;Dt++)Rt[Dt]=arguments[Dt+2];St.children=Rt}if(ft&&ft.defaultProps)for(vt in At=ft.defaultProps,At)St[vt]===void 0&&(St[vt]=At[vt]);return{$$typeof:l$9,type:ft,key:Et,ref:Ct,props:St,_owner:K$2.current}}function N$4(ft,lt){return{$$typeof:l$9,type:ft.type,key:lt,ref:ft.ref,props:ft.props,_owner:ft._owner}}function O$5(ft){return typeof ft=="object"&&ft!==null&&ft.$$typeof===l$9}function escape$1(ft){var lt={"=":"=0",":":"=2"};return"$"+ft.replace(/[=:]/g,function(dt){return lt[dt]})}var P$5=/\/+/g;function Q$5(ft,lt){return typeof ft=="object"&&ft!==null&&ft.key!=null?escape$1(""+ft.key):lt.toString(36)}function R$4(ft,lt,dt,vt,St){var Et=typeof ft;(Et==="undefined"||Et==="boolean")&&(ft=null);var Ct=!1;if(ft===null)Ct=!0;else switch(Et){case"string":case"number":Ct=!0;break;case"object":switch(ft.$$typeof){case l$9:case n$9:Ct=!0}}if(Ct)return Ct=ft,St=St(Ct),ft=vt===""?"."+Q$5(Ct,0):vt,I$5(St)?(dt="",ft!=null&&(dt=ft.replace(P$5,"$&/")+"/"),R$4(St,lt,dt,"",function(Dt){return Dt})):St!=null&&(O$5(St)&&(St=N$4(St,dt+(!St.key||Ct&&Ct.key===St.key?"":(""+St.key).replace(P$5,"$&/")+"/")+ft)),lt.push(St)),1;if(Ct=0,vt=vt===""?".":vt+":",I$5(ft))for(var At=0;At<ft.length;At++){Et=ft[At];var Rt=vt+Q$5(Et,At);Ct+=R$4(Et,lt,dt,Rt,St)}else if(Rt=A$5(ft),typeof Rt=="function")for(ft=Rt.call(ft),At=0;!(Et=ft.next()).done;)Et=Et.value,Rt=vt+Q$5(Et,At++),Ct+=R$4(Et,lt,dt,Rt,St);else if(Et==="object")throw lt=String(ft),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.");return Ct}function S$4(ft,lt,dt){if(ft==null)return ft;var vt=[],St=0;return R$4(ft,vt,"","",function(Et){return lt.call(dt,Et,St++)}),vt}function T$4(ft){if(ft._status===-1){var lt=ft._result;lt=lt(),lt.then(function(dt){(ft._status===0||ft._status===-1)&&(ft._status=1,ft._result=dt)},function(dt){(ft._status===0||ft._status===-1)&&(ft._status=2,ft._result=dt)}),ft._status===-1&&(ft._status=0,ft._result=lt)}if(ft._status===1)return ft._result.default;throw ft._result}var U$3={current:null},V$4={transition:null},W$5={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$2};react_production_min.Children={map:S$4,forEach:function(ft,lt,dt){S$4(ft,function(){lt.apply(this,arguments)},dt)},count:function(ft){var lt=0;return S$4(ft,function(){lt++}),lt},toArray:function(ft){return S$4(ft,function(lt){return lt})||[]},only:function(ft){if(!O$5(ft))throw Error("React.Children.only expected to receive a single React element child.");return ft}};react_production_min.Component=E$7;react_production_min.Fragment=p$a;react_production_min.Profiler=r$a;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$7;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$5;react_production_min.cloneElement=function(ft,lt,dt){if(ft==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ft+".");var vt=C$5({},ft.props),St=ft.key,Et=ft.ref,Ct=ft._owner;if(lt!=null){if(lt.ref!==void 0&&(Et=lt.ref,Ct=K$2.current),lt.key!==void 0&&(St=""+lt.key),ft.type&&ft.type.defaultProps)var At=ft.type.defaultProps;for(Rt in lt)J$2.call(lt,Rt)&&!L$4.hasOwnProperty(Rt)&&(vt[Rt]=lt[Rt]===void 0&&At!==void 0?At[Rt]:lt[Rt])}var Rt=arguments.length-2;if(Rt===1)vt.children=dt;else if(1<Rt){At=Array(Rt);for(var Dt=0;Dt<Rt;Dt++)At[Dt]=arguments[Dt+2];vt.children=At}return{$$typeof:l$9,type:ft.type,key:St,ref:Et,props:vt,_owner:Ct}};react_production_min.createContext=function(ft){return ft={$$typeof:u$9,_currentValue:ft,_currentValue2:ft,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ft.Provider={$$typeof:t$6,_context:ft},ft.Consumer=ft};react_production_min.createElement=M$3;react_production_min.createFactory=function(ft){var lt=M$3.bind(null,ft);return lt.type=ft,lt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ft){return{$$typeof:v$8,render:ft}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(ft){return{$$typeof:y$7,_payload:{_status:-1,_result:ft},_init:T$4}};react_production_min.memo=function(ft,lt){return{$$typeof:x$6,type:ft,compare:lt===void 0?null:lt}};react_production_min.startTransition=function(ft){var lt=V$4.transition;V$4.transition={};try{ft()}finally{V$4.transition=lt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(ft,lt){return U$3.current.useCallback(ft,lt)};react_production_min.useContext=function(ft){return U$3.current.useContext(ft)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(ft){return U$3.current.useDeferredValue(ft)};react_production_min.useEffect=function(ft,lt){return U$3.current.useEffect(ft,lt)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(ft,lt,dt){return U$3.current.useImperativeHandle(ft,lt,dt)};react_production_min.useInsertionEffect=function(ft,lt){return U$3.current.useInsertionEffect(ft,lt)};react_production_min.useLayoutEffect=function(ft,lt){return U$3.current.useLayoutEffect(ft,lt)};react_production_min.useMemo=function(ft,lt){return U$3.current.useMemo(ft,lt)};react_production_min.useReducer=function(ft,lt,dt){return U$3.current.useReducer(ft,lt,dt)};react_production_min.useRef=function(ft){return U$3.current.useRef(ft)};react_production_min.useState=function(ft){return U$3.current.useState(ft)};react_production_min.useSyncExternalStore=function(ft,lt,dt){return U$3.current.useSyncExternalStore(ft,lt,dt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$5=Symbol.for("react.element"),l$8=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$8=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$9={key:!0,ref:!0,__self:!0,__source:!0};function q$4(ft,lt,dt){var vt,St={},Et=null,Ct=null;dt!==void 0&&(Et=""+dt),lt.key!==void 0&&(Et=""+lt.key),lt.ref!==void 0&&(Ct=lt.ref);for(vt in lt)m$7.call(lt,vt)&&!p$9.hasOwnProperty(vt)&&(St[vt]=lt[vt]);if(ft&&ft.defaultProps)for(vt in lt=ft.defaultProps,lt)St[vt]===void 0&&(St[vt]=lt[vt]);return{$$typeof:k$5,type:ft,key:Et,ref:Ct,props:St,_owner:n$8.current}}reactJsxRuntime_production_min.Fragment=l$8;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ft){function lt(Un,Nn){var jn=Un.length;Un.push(Nn);e:for(;0<jn;){var Ln=jn-1>>>1,Cn=Un[Ln];if(0<St(Cn,Nn))Un[Ln]=Nn,Un[jn]=Cn,jn=Ln;else break e}}function dt(Un){return Un.length===0?null:Un[0]}function vt(Un){if(Un.length===0)return null;var Nn=Un[0],jn=Un.pop();if(jn!==Nn){Un[0]=jn;e:for(var Ln=0,Cn=Un.length,tr=Cn>>>1;Ln<tr;){var ir=2*(Ln+1)-1,Zn=Un[ir],br=ir+1,fr=Un[br];if(0>St(Zn,jn))br<Cn&&0>St(fr,Zn)?(Un[Ln]=fr,Un[br]=jn,Ln=br):(Un[Ln]=Zn,Un[ir]=jn,Ln=ir);else if(br<Cn&&0>St(fr,jn))Un[Ln]=fr,Un[br]=jn,Ln=br;else break e}}return Nn}function St(Un,Nn){var jn=Un.sortIndex-Nn.sortIndex;return jn!==0?jn:Un.id-Nn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,At=Ct.now();ft.unstable_now=function(){return Ct.now()-At}}var Rt=[],Dt=[],Nt=1,Ft=null,Ut=3,Wt=!1,Zt=!1,Kt=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,dn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pn(Un){for(var Nn=dt(Dt);Nn!==null;){if(Nn.callback===null)vt(Dt);else if(Nn.startTime<=Un)vt(Dt),Nn.sortIndex=Nn.expirationTime,lt(Rt,Nn);else break;Nn=dt(Dt)}}function gn(Un){if(Kt=!1,pn(Un),!Zt)if(dt(Rt)!==null)Zt=!0,qn(vn);else{var Nn=dt(Dt);Nn!==null&&nr(gn,Nn.startTime-Un)}}function vn(Un,Nn){Zt=!1,Kt&&(Kt=!1,hn(Tn),Tn=-1),Wt=!0;var jn=Ut;try{for(pn(Nn),Ft=dt(Rt);Ft!==null&&(!(Ft.expirationTime>Nn)||Un&&!zn());){var Ln=Ft.callback;if(typeof Ln=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Cn=Ln(Ft.expirationTime<=Nn);Nn=ft.unstable_now(),typeof Cn=="function"?Ft.callback=Cn:Ft===dt(Rt)&&vt(Rt),pn(Nn)}else vt(Rt);Ft=dt(Rt)}if(Ft!==null)var tr=!0;else{var ir=dt(Dt);ir!==null&&nr(gn,ir.startTime-Nn),tr=!1}return tr}finally{Ft=null,Ut=jn,Wt=!1}}var bn=!1,$n=null,Tn=-1,In=5,Pn=-1;function zn(){return!(ft.unstable_now()-Pn<In)}function An(){if($n!==null){var Un=ft.unstable_now();Pn=Un;var Nn=!0;try{Nn=$n(!0,Un)}finally{Nn?Gn():(bn=!1,$n=null)}}else bn=!1}var Gn;if(typeof dn=="function")Gn=function(){dn(An)};else if(typeof MessageChannel<"u"){var xn=new MessageChannel,Qn=xn.port2;xn.port1.onmessage=An,Gn=function(){Qn.postMessage(null)}}else Gn=function(){cn(An,0)};function qn(Un){$n=Un,bn||(bn=!0,Gn())}function nr(Un,Nn){Tn=cn(function(){Un(ft.unstable_now())},Nn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Un){Un.callback=null},ft.unstable_continueExecution=function(){Zt||Wt||(Zt=!0,qn(vn))},ft.unstable_forceFrameRate=function(Un){0>Un||125<Un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Un?Math.floor(1e3/Un):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(Rt)},ft.unstable_next=function(Un){switch(Ut){case 1:case 2:case 3:var Nn=3;break;default:Nn=Ut}var jn=Ut;Ut=Nn;try{return Un()}finally{Ut=jn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Un,Nn){switch(Un){case 1:case 2:case 3:case 4:case 5:break;default:Un=3}var jn=Ut;Ut=Un;try{return Nn()}finally{Ut=jn}},ft.unstable_scheduleCallback=function(Un,Nn,jn){var Ln=ft.unstable_now();switch(typeof jn=="object"&&jn!==null?(jn=jn.delay,jn=typeof jn=="number"&&0<jn?Ln+jn:Ln):jn=Ln,Un){case 1:var Cn=-1;break;case 2:Cn=250;break;case 5:Cn=1073741823;break;case 4:Cn=1e4;break;default:Cn=5e3}return Cn=jn+Cn,Un={id:Nt++,callback:Nn,priorityLevel:Un,startTime:jn,expirationTime:Cn,sortIndex:-1},jn>Ln?(Un.sortIndex=jn,lt(Dt,Un),dt(Rt)===null&&Un===dt(Dt)&&(Kt?(hn(Tn),Tn=-1):Kt=!0,nr(gn,jn-Ln))):(Un.sortIndex=Cn,lt(Rt,Un),Zt||Wt||(Zt=!0,qn(vn))),Un},ft.unstable_shouldYield=zn,ft.unstable_wrapCallback=function(Un){var Nn=Ut;return function(){var jn=Ut;Ut=Nn;try{return Un.apply(this,arguments)}finally{Ut=jn}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$8(ft){for(var lt="https://reactjs.org/docs/error-decoder.html?invariant="+ft,dt=1;dt<arguments.length;dt++)lt+="&args[]="+encodeURIComponent(arguments[dt]);return"Minified React error #"+ft+"; visit "+lt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(ft,lt){ha(ft,lt),ha(ft+"Capture",lt)}function ha(ft,lt){for(ea[ft]=lt,ft=0;ft<lt.length;ft++)da.add(lt[ft])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(ft){return ja.call(ma,ft)?!0:ja.call(la,ft)?!1:ka.test(ft)?ma[ft]=!0:(la[ft]=!0,!1)}function pa(ft,lt,dt,vt){if(dt!==null&&dt.type===0)return!1;switch(typeof lt){case"function":case"symbol":return!0;case"boolean":return vt?!1:dt!==null?!dt.acceptsBooleans:(ft=ft.toLowerCase().slice(0,5),ft!=="data-"&&ft!=="aria-");default:return!1}}function qa(ft,lt,dt,vt){if(lt===null||typeof lt>"u"||pa(ft,lt,dt,vt))return!0;if(vt)return!1;if(dt!==null)switch(dt.type){case 3:return!lt;case 4:return lt===!1;case 5:return isNaN(lt);case 6:return isNaN(lt)||1>lt}return!1}function v$7(ft,lt,dt,vt,St,Et,Ct){this.acceptsBooleans=lt===2||lt===3||lt===4,this.attributeName=vt,this.attributeNamespace=St,this.mustUseProperty=dt,this.propertyName=ft,this.type=lt,this.sanitizeURL=Et,this.removeEmptyString=Ct}var z$5={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ft){z$5[ft]=new v$7(ft,0,!1,ft,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ft){var lt=ft[0];z$5[lt]=new v$7(lt,1,!1,ft[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ft){z$5[ft]=new v$7(ft,2,!1,ft.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ft){z$5[ft]=new v$7(ft,2,!1,ft,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ft){z$5[ft]=new v$7(ft,3,!1,ft.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(ft){z$5[ft]=new v$7(ft,3,!0,ft,null,!1,!1)});["capture","download"].forEach(function(ft){z$5[ft]=new v$7(ft,4,!1,ft,null,!1,!1)});["cols","rows","size","span"].forEach(function(ft){z$5[ft]=new v$7(ft,6,!1,ft,null,!1,!1)});["rowSpan","start"].forEach(function(ft){z$5[ft]=new v$7(ft,5,!1,ft.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(ft){return ft[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(ft){z$5[ft]=new v$7(ft,1,!1,ft.toLowerCase(),null,!1,!1)});z$5.xlinkHref=new v$7("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(ft){z$5[ft]=new v$7(ft,1,!1,ft.toLowerCase(),null,!0,!0)});function ta(ft,lt,dt,vt){var St=z$5.hasOwnProperty(lt)?z$5[lt]:null;(St!==null?St.type!==0:vt||!(2<lt.length)||lt[0]!=="o"&&lt[0]!=="O"||lt[1]!=="n"&&lt[1]!=="N")&&(qa(lt,dt,St,vt)&&(dt=null),vt||St===null?oa(lt)&&(dt===null?ft.removeAttribute(lt):ft.setAttribute(lt,""+dt)):St.mustUseProperty?ft[St.propertyName]=dt===null?St.type===3?!1:"":dt:(lt=St.attributeName,vt=St.attributeNamespace,dt===null?ft.removeAttribute(lt):(St=St.type,dt=St===3||St===4&&dt===!0?"":""+dt,vt?ft.setAttributeNS(vt,lt,dt):ft.setAttribute(lt,dt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(ft){return ft===null||typeof ft!="object"?null:(ft=Ja&&ft[Ja]||ft["@@iterator"],typeof ft=="function"?ft:null)}var A$4=Object.assign,La;function Ma(ft){if(La===void 0)try{throw Error()}catch(dt){var lt=dt.stack.trim().match(/\n( *(at )?)/);La=lt&&lt[1]||""}return`
`+La+ft}var Na=!1;function Oa(ft,lt){if(!ft||Na)return"";Na=!0;var dt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(lt)if(lt=function(){throw Error()},Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Dt){var vt=Dt}Reflect.construct(ft,[],lt)}else{try{lt.call()}catch(Dt){vt=Dt}ft.call(lt.prototype)}else{try{throw Error()}catch(Dt){vt=Dt}ft()}}catch(Dt){if(Dt&&vt&&typeof Dt.stack=="string"){for(var St=Dt.stack.split(`
`),Et=vt.stack.split(`
`),Ct=St.length-1,At=Et.length-1;1<=Ct&&0<=At&&St[Ct]!==Et[At];)At--;for(;1<=Ct&&0<=At;Ct--,At--)if(St[Ct]!==Et[At]){if(Ct!==1||At!==1)do if(Ct--,At--,0>At||St[Ct]!==Et[At]){var Rt=`
`+St[Ct].replace(" at new "," at ");return ft.displayName&&Rt.includes("<anonymous>")&&(Rt=Rt.replace("<anonymous>",ft.displayName)),Rt}while(1<=Ct&&0<=At);break}}}finally{Na=!1,Error.prepareStackTrace=dt}return(ft=ft?ft.displayName||ft.name:"")?Ma(ft):""}function Pa(ft){switch(ft.tag){case 5:return Ma(ft.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return ft=Oa(ft.type,!1),ft;case 11:return ft=Oa(ft.type.render,!1),ft;case 1:return ft=Oa(ft.type,!0),ft;default:return""}}function Qa(ft){if(ft==null)return null;if(typeof ft=="function")return ft.displayName||ft.name||null;if(typeof ft=="string")return ft;switch(ft){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof ft=="object")switch(ft.$$typeof){case Ca:return(ft.displayName||"Context")+".Consumer";case Ba:return(ft._context.displayName||"Context")+".Provider";case Da:var lt=ft.render;return ft=ft.displayName,ft||(ft=lt.displayName||lt.name||"",ft=ft!==""?"ForwardRef("+ft+")":"ForwardRef"),ft;case Ga:return lt=ft.displayName||null,lt!==null?lt:Qa(ft.type)||"Memo";case Ha:lt=ft._payload,ft=ft._init;try{return Qa(ft(lt))}catch{}}return null}function Ra(ft){var lt=ft.type;switch(ft.tag){case 24:return"Cache";case 9:return(lt.displayName||"Context")+".Consumer";case 10:return(lt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ft=lt.render,ft=ft.displayName||ft.name||"",lt.displayName||(ft!==""?"ForwardRef("+ft+")":"ForwardRef");case 7:return"Fragment";case 5:return lt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(lt);case 8:return lt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof lt=="function")return lt.displayName||lt.name||null;if(typeof lt=="string")return lt}return null}function Sa(ft){switch(typeof ft){case"boolean":case"number":case"string":case"undefined":return ft;case"object":return ft;default:return""}}function Ta(ft){var lt=ft.type;return(ft=ft.nodeName)&&ft.toLowerCase()==="input"&&(lt==="checkbox"||lt==="radio")}function Ua(ft){var lt=Ta(ft)?"checked":"value",dt=Object.getOwnPropertyDescriptor(ft.constructor.prototype,lt),vt=""+ft[lt];if(!ft.hasOwnProperty(lt)&&typeof dt<"u"&&typeof dt.get=="function"&&typeof dt.set=="function"){var St=dt.get,Et=dt.set;return Object.defineProperty(ft,lt,{configurable:!0,get:function(){return St.call(this)},set:function(Ct){vt=""+Ct,Et.call(this,Ct)}}),Object.defineProperty(ft,lt,{enumerable:dt.enumerable}),{getValue:function(){return vt},setValue:function(Ct){vt=""+Ct},stopTracking:function(){ft._valueTracker=null,delete ft[lt]}}}}function Va(ft){ft._valueTracker||(ft._valueTracker=Ua(ft))}function Wa(ft){if(!ft)return!1;var lt=ft._valueTracker;if(!lt)return!0;var dt=lt.getValue(),vt="";return ft&&(vt=Ta(ft)?ft.checked?"true":"false":ft.value),ft=vt,ft!==dt?(lt.setValue(ft),!0):!1}function Xa(ft){if(ft=ft||(typeof document<"u"?document:void 0),typeof ft>"u")return null;try{return ft.activeElement||ft.body}catch{return ft.body}}function Ya(ft,lt){var dt=lt.checked;return A$4({},lt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:dt??ft._wrapperState.initialChecked})}function Za(ft,lt){var dt=lt.defaultValue==null?"":lt.defaultValue,vt=lt.checked!=null?lt.checked:lt.defaultChecked;dt=Sa(lt.value!=null?lt.value:dt),ft._wrapperState={initialChecked:vt,initialValue:dt,controlled:lt.type==="checkbox"||lt.type==="radio"?lt.checked!=null:lt.value!=null}}function ab(ft,lt){lt=lt.checked,lt!=null&&ta(ft,"checked",lt,!1)}function bb(ft,lt){ab(ft,lt);var dt=Sa(lt.value),vt=lt.type;if(dt!=null)vt==="number"?(dt===0&&ft.value===""||ft.value!=dt)&&(ft.value=""+dt):ft.value!==""+dt&&(ft.value=""+dt);else if(vt==="submit"||vt==="reset"){ft.removeAttribute("value");return}lt.hasOwnProperty("value")?cb(ft,lt.type,dt):lt.hasOwnProperty("defaultValue")&&cb(ft,lt.type,Sa(lt.defaultValue)),lt.checked==null&&lt.defaultChecked!=null&&(ft.defaultChecked=!!lt.defaultChecked)}function db(ft,lt,dt){if(lt.hasOwnProperty("value")||lt.hasOwnProperty("defaultValue")){var vt=lt.type;if(!(vt!=="submit"&&vt!=="reset"||lt.value!==void 0&&lt.value!==null))return;lt=""+ft._wrapperState.initialValue,dt||lt===ft.value||(ft.value=lt),ft.defaultValue=lt}dt=ft.name,dt!==""&&(ft.name=""),ft.defaultChecked=!!ft._wrapperState.initialChecked,dt!==""&&(ft.name=dt)}function cb(ft,lt,dt){(lt!=="number"||Xa(ft.ownerDocument)!==ft)&&(dt==null?ft.defaultValue=""+ft._wrapperState.initialValue:ft.defaultValue!==""+dt&&(ft.defaultValue=""+dt))}var eb=Array.isArray;function fb(ft,lt,dt,vt){if(ft=ft.options,lt){lt={};for(var St=0;St<dt.length;St++)lt["$"+dt[St]]=!0;for(dt=0;dt<ft.length;dt++)St=lt.hasOwnProperty("$"+ft[dt].value),ft[dt].selected!==St&&(ft[dt].selected=St),St&&vt&&(ft[dt].defaultSelected=!0)}else{for(dt=""+Sa(dt),lt=null,St=0;St<ft.length;St++){if(ft[St].value===dt){ft[St].selected=!0,vt&&(ft[St].defaultSelected=!0);return}lt!==null||ft[St].disabled||(lt=ft[St])}lt!==null&&(lt.selected=!0)}}function gb(ft,lt){if(lt.dangerouslySetInnerHTML!=null)throw Error(p$8(91));return A$4({},lt,{value:void 0,defaultValue:void 0,children:""+ft._wrapperState.initialValue})}function hb(ft,lt){var dt=lt.value;if(dt==null){if(dt=lt.children,lt=lt.defaultValue,dt!=null){if(lt!=null)throw Error(p$8(92));if(eb(dt)){if(1<dt.length)throw Error(p$8(93));dt=dt[0]}lt=dt}lt==null&&(lt=""),dt=lt}ft._wrapperState={initialValue:Sa(dt)}}function ib(ft,lt){var dt=Sa(lt.value),vt=Sa(lt.defaultValue);dt!=null&&(dt=""+dt,dt!==ft.value&&(ft.value=dt),lt.defaultValue==null&&ft.defaultValue!==dt&&(ft.defaultValue=dt)),vt!=null&&(ft.defaultValue=""+vt)}function jb(ft){var lt=ft.textContent;lt===ft._wrapperState.initialValue&&lt!==""&&lt!==null&&(ft.value=lt)}function kb(ft){switch(ft){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(ft,lt){return ft==null||ft==="http://www.w3.org/1999/xhtml"?kb(lt):ft==="http://www.w3.org/2000/svg"&&lt==="foreignObject"?"http://www.w3.org/1999/xhtml":ft}var mb,nb=function(ft){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(lt,dt,vt,St){MSApp.execUnsafeLocalFunction(function(){return ft(lt,dt,vt,St)})}:ft}(function(ft,lt){if(ft.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ft)ft.innerHTML=lt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+lt.valueOf().toString()+"</svg>",lt=mb.firstChild;ft.firstChild;)ft.removeChild(ft.firstChild);for(;lt.firstChild;)ft.appendChild(lt.firstChild)}});function ob(ft,lt){if(lt){var dt=ft.firstChild;if(dt&&dt===ft.lastChild&&dt.nodeType===3){dt.nodeValue=lt;return}}ft.textContent=lt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(ft){qb.forEach(function(lt){lt=lt+ft.charAt(0).toUpperCase()+ft.substring(1),pb[lt]=pb[ft]})});function rb(ft,lt,dt){return lt==null||typeof lt=="boolean"||lt===""?"":dt||typeof lt!="number"||lt===0||pb.hasOwnProperty(ft)&&pb[ft]?(""+lt).trim():lt+"px"}function sb(ft,lt){ft=ft.style;for(var dt in lt)if(lt.hasOwnProperty(dt)){var vt=dt.indexOf("--")===0,St=rb(dt,lt[dt],vt);dt==="float"&&(dt="cssFloat"),vt?ft.setProperty(dt,St):ft[dt]=St}}var tb=A$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(ft,lt){if(lt){if(tb[ft]&&(lt.children!=null||lt.dangerouslySetInnerHTML!=null))throw Error(p$8(137,ft));if(lt.dangerouslySetInnerHTML!=null){if(lt.children!=null)throw Error(p$8(60));if(typeof lt.dangerouslySetInnerHTML!="object"||!("__html"in lt.dangerouslySetInnerHTML))throw Error(p$8(61))}if(lt.style!=null&&typeof lt.style!="object")throw Error(p$8(62))}}function vb(ft,lt){if(ft.indexOf("-")===-1)return typeof lt.is=="string";switch(ft){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(ft){return ft=ft.target||ft.srcElement||window,ft.correspondingUseElement&&(ft=ft.correspondingUseElement),ft.nodeType===3?ft.parentNode:ft}var yb=null,zb=null,Ab=null;function Bb(ft){if(ft=Cb(ft)){if(typeof yb!="function")throw Error(p$8(280));var lt=ft.stateNode;lt&&(lt=Db(lt),yb(ft.stateNode,ft.type,lt))}}function Eb(ft){zb?Ab?Ab.push(ft):Ab=[ft]:zb=ft}function Fb(){if(zb){var ft=zb,lt=Ab;if(Ab=zb=null,Bb(ft),lt)for(ft=0;ft<lt.length;ft++)Bb(lt[ft])}}function Gb(ft,lt){return ft(lt)}function Hb(){}var Ib=!1;function Jb(ft,lt,dt){if(Ib)return ft(lt,dt);Ib=!0;try{return Gb(ft,lt,dt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(ft,lt){var dt=ft.stateNode;if(dt===null)return null;var vt=Db(dt);if(vt===null)return null;dt=vt[lt];e:switch(lt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(vt=!vt.disabled)||(ft=ft.type,vt=!(ft==="button"||ft==="input"||ft==="select"||ft==="textarea")),ft=!vt;break e;default:ft=!1}if(ft)return null;if(dt&&typeof dt!="function")throw Error(p$8(231,lt,typeof dt));return dt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(ft,lt,dt,vt,St,Et,Ct,At,Rt){var Dt=Array.prototype.slice.call(arguments,3);try{lt.apply(dt,Dt)}catch(Nt){this.onError(Nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(ft){Ob=!0,Pb=ft}};function Tb(ft,lt,dt,vt,St,Et,Ct,At,Rt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(ft,lt,dt,vt,St,Et,Ct,At,Rt){if(Tb.apply(this,arguments),Ob){if(Ob){var Dt=Pb;Ob=!1,Pb=null}else throw Error(p$8(198));Qb||(Qb=!0,Rb=Dt)}}function Vb(ft){var lt=ft,dt=ft;if(ft.alternate)for(;lt.return;)lt=lt.return;else{ft=lt;do lt=ft,lt.flags&4098&&(dt=lt.return),ft=lt.return;while(ft)}return lt.tag===3?dt:null}function Wb(ft){if(ft.tag===13){var lt=ft.memoizedState;if(lt===null&&(ft=ft.alternate,ft!==null&&(lt=ft.memoizedState)),lt!==null)return lt.dehydrated}return null}function Xb(ft){if(Vb(ft)!==ft)throw Error(p$8(188))}function Yb(ft){var lt=ft.alternate;if(!lt){if(lt=Vb(ft),lt===null)throw Error(p$8(188));return lt!==ft?null:ft}for(var dt=ft,vt=lt;;){var St=dt.return;if(St===null)break;var Et=St.alternate;if(Et===null){if(vt=St.return,vt!==null){dt=vt;continue}break}if(St.child===Et.child){for(Et=St.child;Et;){if(Et===dt)return Xb(St),ft;if(Et===vt)return Xb(St),lt;Et=Et.sibling}throw Error(p$8(188))}if(dt.return!==vt.return)dt=St,vt=Et;else{for(var Ct=!1,At=St.child;At;){if(At===dt){Ct=!0,dt=St,vt=Et;break}if(At===vt){Ct=!0,vt=St,dt=Et;break}At=At.sibling}if(!Ct){for(At=Et.child;At;){if(At===dt){Ct=!0,dt=Et,vt=St;break}if(At===vt){Ct=!0,vt=Et,dt=St;break}At=At.sibling}if(!Ct)throw Error(p$8(189))}}if(dt.alternate!==vt)throw Error(p$8(190))}if(dt.tag!==3)throw Error(p$8(188));return dt.stateNode.current===dt?ft:lt}function Zb(ft){return ft=Yb(ft),ft!==null?$b(ft):null}function $b(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){var lt=$b(ft);if(lt!==null)return lt;ft=ft.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(ft){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,ft,void 0,(ft.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(ft){return ft>>>=0,ft===0?32:31-(pc(ft)/qc|0)|0}var rc=64,sc=4194304;function tc(ft){switch(ft&-ft){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ft&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ft&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ft}}function uc(ft,lt){var dt=ft.pendingLanes;if(dt===0)return 0;var vt=0,St=ft.suspendedLanes,Et=ft.pingedLanes,Ct=dt&268435455;if(Ct!==0){var At=Ct&~St;At!==0?vt=tc(At):(Et&=Ct,Et!==0&&(vt=tc(Et)))}else Ct=dt&~St,Ct!==0?vt=tc(Ct):Et!==0&&(vt=tc(Et));if(vt===0)return 0;if(lt!==0&&lt!==vt&&!(lt&St)&&(St=vt&-vt,Et=lt&-lt,St>=Et||St===16&&(Et&4194240)!==0))return lt;if(vt&4&&(vt|=dt&16),lt=ft.entangledLanes,lt!==0)for(ft=ft.entanglements,lt&=vt;0<lt;)dt=31-oc(lt),St=1<<dt,vt|=ft[dt],lt&=~St;return vt}function vc(ft,lt){switch(ft){case 1:case 2:case 4:return lt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return lt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(ft,lt){for(var dt=ft.suspendedLanes,vt=ft.pingedLanes,St=ft.expirationTimes,Et=ft.pendingLanes;0<Et;){var Ct=31-oc(Et),At=1<<Ct,Rt=St[Ct];Rt===-1?(!(At&dt)||At&vt)&&(St[Ct]=vc(At,lt)):Rt<=lt&&(ft.expiredLanes|=At),Et&=~At}}function xc(ft){return ft=ft.pendingLanes&-1073741825,ft!==0?ft:ft&1073741824?1073741824:0}function yc(){var ft=rc;return rc<<=1,!(rc&4194240)&&(rc=64),ft}function zc(ft){for(var lt=[],dt=0;31>dt;dt++)lt.push(ft);return lt}function Ac(ft,lt,dt){ft.pendingLanes|=lt,lt!==536870912&&(ft.suspendedLanes=0,ft.pingedLanes=0),ft=ft.eventTimes,lt=31-oc(lt),ft[lt]=dt}function Bc(ft,lt){var dt=ft.pendingLanes&~lt;ft.pendingLanes=lt,ft.suspendedLanes=0,ft.pingedLanes=0,ft.expiredLanes&=lt,ft.mutableReadLanes&=lt,ft.entangledLanes&=lt,lt=ft.entanglements;var vt=ft.eventTimes;for(ft=ft.expirationTimes;0<dt;){var St=31-oc(dt),Et=1<<St;lt[St]=0,vt[St]=-1,ft[St]=-1,dt&=~Et}}function Cc(ft,lt){var dt=ft.entangledLanes|=lt;for(ft=ft.entanglements;dt;){var vt=31-oc(dt),St=1<<vt;St&lt|ft[vt]&lt&&(ft[vt]|=lt),dt&=~St}}var C$4=0;function Dc(ft){return ft&=-ft,1<ft?4<ft?ft&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(ft,lt){switch(ft){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(lt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(lt.pointerId)}}function Tc(ft,lt,dt,vt,St,Et){return ft===null||ft.nativeEvent!==Et?(ft={blockedOn:lt,domEventName:dt,eventSystemFlags:vt,nativeEvent:Et,targetContainers:[St]},lt!==null&&(lt=Cb(lt),lt!==null&&Fc(lt)),ft):(ft.eventSystemFlags|=vt,lt=ft.targetContainers,St!==null&&lt.indexOf(St)===-1&&lt.push(St),ft)}function Uc(ft,lt,dt,vt,St){switch(lt){case"focusin":return Lc=Tc(Lc,ft,lt,dt,vt,St),!0;case"dragenter":return Mc=Tc(Mc,ft,lt,dt,vt,St),!0;case"mouseover":return Nc=Tc(Nc,ft,lt,dt,vt,St),!0;case"pointerover":var Et=St.pointerId;return Oc.set(Et,Tc(Oc.get(Et)||null,ft,lt,dt,vt,St)),!0;case"gotpointercapture":return Et=St.pointerId,Pc.set(Et,Tc(Pc.get(Et)||null,ft,lt,dt,vt,St)),!0}return!1}function Vc(ft){var lt=Wc(ft.target);if(lt!==null){var dt=Vb(lt);if(dt!==null){if(lt=dt.tag,lt===13){if(lt=Wb(dt),lt!==null){ft.blockedOn=lt,Ic(ft.priority,function(){Gc(dt)});return}}else if(lt===3&&dt.stateNode.current.memoizedState.isDehydrated){ft.blockedOn=dt.tag===3?dt.stateNode.containerInfo:null;return}}}ft.blockedOn=null}function Xc(ft){if(ft.blockedOn!==null)return!1;for(var lt=ft.targetContainers;0<lt.length;){var dt=Yc(ft.domEventName,ft.eventSystemFlags,lt[0],ft.nativeEvent);if(dt===null){dt=ft.nativeEvent;var vt=new dt.constructor(dt.type,dt);wb=vt,dt.target.dispatchEvent(vt),wb=null}else return lt=Cb(dt),lt!==null&&Fc(lt),ft.blockedOn=dt,!1;lt.shift()}return!0}function Zc(ft,lt,dt){Xc(ft)&&dt.delete(lt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(ft,lt){ft.blockedOn===lt&&(ft.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(ft){function lt(St){return ad(St,ft)}if(0<Kc.length){ad(Kc[0],ft);for(var dt=1;dt<Kc.length;dt++){var vt=Kc[dt];vt.blockedOn===ft&&(vt.blockedOn=null)}}for(Lc!==null&&ad(Lc,ft),Mc!==null&&ad(Mc,ft),Nc!==null&&ad(Nc,ft),Oc.forEach(lt),Pc.forEach(lt),dt=0;dt<Qc.length;dt++)vt=Qc[dt],vt.blockedOn===ft&&(vt.blockedOn=null);for(;0<Qc.length&&(dt=Qc[0],dt.blockedOn===null);)Vc(dt),dt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(ft,lt,dt,vt){var St=C$4,Et=cd.transition;cd.transition=null;try{C$4=1,fd(ft,lt,dt,vt)}finally{C$4=St,cd.transition=Et}}function gd(ft,lt,dt,vt){var St=C$4,Et=cd.transition;cd.transition=null;try{C$4=4,fd(ft,lt,dt,vt)}finally{C$4=St,cd.transition=Et}}function fd(ft,lt,dt,vt){if(dd){var St=Yc(ft,lt,dt,vt);if(St===null)hd(ft,lt,vt,id$2,dt),Sc(ft,vt);else if(Uc(St,ft,lt,dt,vt))vt.stopPropagation();else if(Sc(ft,vt),lt&4&&-1<Rc.indexOf(ft)){for(;St!==null;){var Et=Cb(St);if(Et!==null&&Ec(Et),Et=Yc(ft,lt,dt,vt),Et===null&&hd(ft,lt,vt,id$2,dt),Et===St)break;St=Et}St!==null&&vt.stopPropagation()}else hd(ft,lt,vt,null,dt)}}var id$2=null;function Yc(ft,lt,dt,vt){if(id$2=null,ft=xb(vt),ft=Wc(ft),ft!==null)if(lt=Vb(ft),lt===null)ft=null;else if(dt=lt.tag,dt===13){if(ft=Wb(lt),ft!==null)return ft;ft=null}else if(dt===3){if(lt.stateNode.current.memoizedState.isDehydrated)return lt.tag===3?lt.stateNode.containerInfo:null;ft=null}else lt!==ft&&(ft=null);return id$2=ft,null}function jd(ft){switch(ft){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var ft,lt=ld,dt=lt.length,vt,St="value"in kd?kd.value:kd.textContent,Et=St.length;for(ft=0;ft<dt&&lt[ft]===St[ft];ft++);var Ct=dt-ft;for(vt=1;vt<=Ct&&lt[dt-vt]===St[Et-vt];vt++);return md=St.slice(ft,1<vt?1-vt:void 0)}function od(ft){var lt=ft.keyCode;return"charCode"in ft?(ft=ft.charCode,ft===0&&lt===13&&(ft=13)):ft=lt,ft===10&&(ft=13),32<=ft||ft===13?ft:0}function pd(){return!0}function qd(){return!1}function rd(ft){function lt(dt,vt,St,Et,Ct){this._reactName=dt,this._targetInst=St,this.type=vt,this.nativeEvent=Et,this.target=Ct,this.currentTarget=null;for(var At in ft)ft.hasOwnProperty(At)&&(dt=ft[At],this[At]=dt?dt(Et):Et[At]);return this.isDefaultPrevented=(Et.defaultPrevented!=null?Et.defaultPrevented:Et.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$4(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var dt=this.nativeEvent;dt&&(dt.preventDefault?dt.preventDefault():typeof dt.returnValue!="unknown"&&(dt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var dt=this.nativeEvent;dt&&(dt.stopPropagation?dt.stopPropagation():typeof dt.cancelBubble!="unknown"&&(dt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),lt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ft){return ft.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$4({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$4({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(ft){return ft.relatedTarget===void 0?ft.fromElement===ft.srcElement?ft.toElement:ft.fromElement:ft.relatedTarget},movementX:function(ft){return"movementX"in ft?ft.movementX:(ft!==yd&&(yd&&ft.type==="mousemove"?(wd=ft.screenX-yd.screenX,xd=ft.screenY-yd.screenY):xd=wd=0,yd=ft),wd)},movementY:function(ft){return"movementY"in ft?ft.movementY:xd}}),Bd=rd(Ad),Cd=A$4({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$4({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$4({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$4({},sd,{clipboardData:function(ft){return"clipboardData"in ft?ft.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$4({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(ft){var lt=this.nativeEvent;return lt.getModifierState?lt.getModifierState(ft):(ft=Od[ft])?!!lt[ft]:!1}function zd(){return Pd}var Qd=A$4({},ud,{key:function(ft){if(ft.key){var lt=Md[ft.key]||ft.key;if(lt!=="Unidentified")return lt}return ft.type==="keypress"?(ft=od(ft),ft===13?"Enter":String.fromCharCode(ft)):ft.type==="keydown"||ft.type==="keyup"?Nd[ft.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(ft){return ft.type==="keypress"?od(ft):0},keyCode:function(ft){return ft.type==="keydown"||ft.type==="keyup"?ft.keyCode:0},which:function(ft){return ft.type==="keypress"?od(ft):ft.type==="keydown"||ft.type==="keyup"?ft.keyCode:0}}),Rd=rd(Qd),Sd=A$4({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$4({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$4({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$4({},Ad,{deltaX:function(ft){return"deltaX"in ft?ft.deltaX:"wheelDeltaX"in ft?-ft.wheelDeltaX:0},deltaY:function(ft){return"deltaY"in ft?ft.deltaY:"wheelDeltaY"in ft?-ft.wheelDeltaY:"wheelDelta"in ft?-ft.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$2=!1;function ge$1(ft,lt){switch(ft){case"keyup":return $d.indexOf(lt.keyCode)!==-1;case"keydown":return lt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(ft){return ft=ft.detail,typeof ft=="object"&&"data"in ft?ft.data:null}var ie$3=!1;function je$1(ft,lt){switch(ft){case"compositionend":return he$2(lt);case"keypress":return lt.which!==32?null:(fe$2=!0,ee$1);case"textInput":return ft=lt.data,ft===ee$1&&fe$2?null:ft;default:return null}}function ke$1(ft,lt){if(ie$3)return ft==="compositionend"||!ae$2&&ge$1(ft,lt)?(ft=nd(),md=ld=kd=null,ie$3=!1,ft):null;switch(ft){case"paste":return null;case"keypress":if(!(lt.ctrlKey||lt.altKey||lt.metaKey)||lt.ctrlKey&&lt.altKey){if(lt.char&&1<lt.char.length)return lt.char;if(lt.which)return String.fromCharCode(lt.which)}return null;case"compositionend":return de$2&&lt.locale!=="ko"?null:lt.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(ft){var lt=ft&&ft.nodeName&&ft.nodeName.toLowerCase();return lt==="input"?!!le$2[ft.type]:lt==="textarea"}function ne$3(ft,lt,dt,vt){Eb(vt),lt=oe$2(lt,"onChange"),0<lt.length&&(dt=new td("onChange","change",null,dt,vt),ft.push({event:dt,listeners:lt}))}var pe$1=null,qe$2=null;function re$1(ft){se$2(ft,0)}function te$2(ft){var lt=ue$2(ft);if(Wa(lt))return ft}function ve$1(ft,lt){if(ft==="change")return lt}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$2=pe$1=null)}function Be$1(ft){if(ft.propertyName==="value"&&te$2(qe$2)){var lt=[];ne$3(lt,qe$2,ft,xb(ft)),Jb(re$1,lt)}}function Ce$2(ft,lt,dt){ft==="focusin"?(Ae$1(),pe$1=lt,qe$2=dt,pe$1.attachEvent("onpropertychange",Be$1)):ft==="focusout"&&Ae$1()}function De$2(ft){if(ft==="selectionchange"||ft==="keyup"||ft==="keydown")return te$2(qe$2)}function Ee$2(ft,lt){if(ft==="click")return te$2(lt)}function Fe(ft,lt){if(ft==="input"||ft==="change")return te$2(lt)}function Ge$2(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var He$2=typeof Object.is=="function"?Object.is:Ge$2;function Ie$1(ft,lt){if(He$2(ft,lt))return!0;if(typeof ft!="object"||ft===null||typeof lt!="object"||lt===null)return!1;var dt=Object.keys(ft),vt=Object.keys(lt);if(dt.length!==vt.length)return!1;for(vt=0;vt<dt.length;vt++){var St=dt[vt];if(!ja.call(lt,St)||!He$2(ft[St],lt[St]))return!1}return!0}function Je(ft){for(;ft&&ft.firstChild;)ft=ft.firstChild;return ft}function Ke$2(ft,lt){var dt=Je(ft);ft=0;for(var vt;dt;){if(dt.nodeType===3){if(vt=ft+dt.textContent.length,ft<=lt&&vt>=lt)return{node:dt,offset:lt-ft};ft=vt}e:{for(;dt;){if(dt.nextSibling){dt=dt.nextSibling;break e}dt=dt.parentNode}dt=void 0}dt=Je(dt)}}function Le$3(ft,lt){return ft&&lt?ft===lt?!0:ft&&ft.nodeType===3?!1:lt&&lt.nodeType===3?Le$3(ft,lt.parentNode):"contains"in ft?ft.contains(lt):ft.compareDocumentPosition?!!(ft.compareDocumentPosition(lt)&16):!1:!1}function Me$1(){for(var ft=window,lt=Xa();lt instanceof ft.HTMLIFrameElement;){try{var dt=typeof lt.contentWindow.location.href=="string"}catch{dt=!1}if(dt)ft=lt.contentWindow;else break;lt=Xa(ft.document)}return lt}function Ne$2(ft){var lt=ft&&ft.nodeName&&ft.nodeName.toLowerCase();return lt&&(lt==="input"&&(ft.type==="text"||ft.type==="search"||ft.type==="tel"||ft.type==="url"||ft.type==="password")||lt==="textarea"||ft.contentEditable==="true")}function Oe$1(ft){var lt=Me$1(),dt=ft.focusedElem,vt=ft.selectionRange;if(lt!==dt&&dt&&dt.ownerDocument&&Le$3(dt.ownerDocument.documentElement,dt)){if(vt!==null&&Ne$2(dt)){if(lt=vt.start,ft=vt.end,ft===void 0&&(ft=lt),"selectionStart"in dt)dt.selectionStart=lt,dt.selectionEnd=Math.min(ft,dt.value.length);else if(ft=(lt=dt.ownerDocument||document)&&lt.defaultView||window,ft.getSelection){ft=ft.getSelection();var St=dt.textContent.length,Et=Math.min(vt.start,St);vt=vt.end===void 0?Et:Math.min(vt.end,St),!ft.extend&&Et>vt&&(St=vt,vt=Et,Et=St),St=Ke$2(dt,Et);var Ct=Ke$2(dt,vt);St&&Ct&&(ft.rangeCount!==1||ft.anchorNode!==St.node||ft.anchorOffset!==St.offset||ft.focusNode!==Ct.node||ft.focusOffset!==Ct.offset)&&(lt=lt.createRange(),lt.setStart(St.node,St.offset),ft.removeAllRanges(),Et>vt?(ft.addRange(lt),ft.extend(Ct.node,Ct.offset)):(lt.setEnd(Ct.node,Ct.offset),ft.addRange(lt)))}}for(lt=[],ft=dt;ft=ft.parentNode;)ft.nodeType===1&&lt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof dt.focus=="function"&&dt.focus(),dt=0;dt<lt.length;dt++)ft=lt[dt],ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te$1=!1;function Ue$2(ft,lt,dt){var vt=dt.window===dt?dt.document:dt.nodeType===9?dt:dt.ownerDocument;Te$1||Qe==null||Qe!==Xa(vt)||(vt=Qe,"selectionStart"in vt&&Ne$2(vt)?vt={start:vt.selectionStart,end:vt.selectionEnd}:(vt=(vt.ownerDocument&&vt.ownerDocument.defaultView||window).getSelection(),vt={anchorNode:vt.anchorNode,anchorOffset:vt.anchorOffset,focusNode:vt.focusNode,focusOffset:vt.focusOffset}),Se&&Ie$1(Se,vt)||(Se=vt,vt=oe$2(Re$1,"onSelect"),0<vt.length&&(lt=new td("onSelect","select",null,lt,dt),ft.push({event:lt,listeners:vt}),lt.target=Qe)))}function Ve$1(ft,lt){var dt={};return dt[ft.toLowerCase()]=lt.toLowerCase(),dt["Webkit"+ft]="webkit"+lt,dt["Moz"+ft]="moz"+lt,dt}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(ft){if(Xe[ft])return Xe[ft];if(!We$1[ft])return ft;var lt=We$1[ft],dt;for(dt in lt)if(lt.hasOwnProperty(dt)&&dt in Ye)return Xe[ft]=lt[dt];return ft}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(ft,lt){df.set(ft,lt),fa(lt,[ft])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(ft,lt,dt){var vt=ft.type||"unknown-event";ft.currentTarget=dt,Ub(vt,lt,void 0,ft),ft.currentTarget=null}function se$2(ft,lt){lt=(lt&4)!==0;for(var dt=0;dt<ft.length;dt++){var vt=ft[dt],St=vt.event;vt=vt.listeners;e:{var Et=void 0;if(lt)for(var Ct=vt.length-1;0<=Ct;Ct--){var At=vt[Ct],Rt=At.instance,Dt=At.currentTarget;if(At=At.listener,Rt!==Et&&St.isPropagationStopped())break e;nf(St,At,Dt),Et=Rt}else for(Ct=0;Ct<vt.length;Ct++){if(At=vt[Ct],Rt=At.instance,Dt=At.currentTarget,At=At.listener,Rt!==Et&&St.isPropagationStopped())break e;nf(St,At,Dt),Et=Rt}}}if(Qb)throw ft=Rb,Qb=!1,Rb=null,ft}function D$6(ft,lt){var dt=lt[of];dt===void 0&&(dt=lt[of]=new Set);var vt=ft+"__bubble";dt.has(vt)||(pf(lt,ft,2,!1),dt.add(vt))}function qf(ft,lt,dt){var vt=0;lt&&(vt|=4),pf(dt,ft,vt,lt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(ft){if(!ft[rf]){ft[rf]=!0,da.forEach(function(dt){dt!=="selectionchange"&&(mf.has(dt)||qf(dt,!1,ft),qf(dt,!0,ft))});var lt=ft.nodeType===9?ft:ft.ownerDocument;lt===null||lt[rf]||(lt[rf]=!0,qf("selectionchange",!1,lt))}}function pf(ft,lt,dt,vt){switch(jd(lt)){case 1:var St=ed;break;case 4:St=gd;break;default:St=fd}dt=St.bind(null,lt,dt,ft),St=void 0,!Lb||lt!=="touchstart"&&lt!=="touchmove"&&lt!=="wheel"||(St=!0),vt?St!==void 0?ft.addEventListener(lt,dt,{capture:!0,passive:St}):ft.addEventListener(lt,dt,!0):St!==void 0?ft.addEventListener(lt,dt,{passive:St}):ft.addEventListener(lt,dt,!1)}function hd(ft,lt,dt,vt,St){var Et=vt;if(!(lt&1)&&!(lt&2)&&vt!==null)e:for(;;){if(vt===null)return;var Ct=vt.tag;if(Ct===3||Ct===4){var At=vt.stateNode.containerInfo;if(At===St||At.nodeType===8&&At.parentNode===St)break;if(Ct===4)for(Ct=vt.return;Ct!==null;){var Rt=Ct.tag;if((Rt===3||Rt===4)&&(Rt=Ct.stateNode.containerInfo,Rt===St||Rt.nodeType===8&&Rt.parentNode===St))return;Ct=Ct.return}for(;At!==null;){if(Ct=Wc(At),Ct===null)return;if(Rt=Ct.tag,Rt===5||Rt===6){vt=Et=Ct;continue e}At=At.parentNode}}vt=vt.return}Jb(function(){var Dt=Et,Nt=xb(dt),Ft=[];e:{var Ut=df.get(ft);if(Ut!==void 0){var Wt=td,Zt=ft;switch(ft){case"keypress":if(od(dt)===0)break e;case"keydown":case"keyup":Wt=Rd;break;case"focusin":Zt="focus",Wt=Fd;break;case"focusout":Zt="blur",Wt=Fd;break;case"beforeblur":case"afterblur":Wt=Fd;break;case"click":if(dt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Wt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Wt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Wt=Vd;break;case $e$1:case af:case bf:Wt=Hd;break;case cf:Wt=Xd;break;case"scroll":Wt=vd;break;case"wheel":Wt=Zd;break;case"copy":case"cut":case"paste":Wt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Wt=Td}var Kt=(lt&4)!==0,cn=!Kt&&ft==="scroll",hn=Kt?Ut!==null?Ut+"Capture":null:Ut;Kt=[];for(var dn=Dt,pn;dn!==null;){pn=dn;var gn=pn.stateNode;if(pn.tag===5&&gn!==null&&(pn=gn,hn!==null&&(gn=Kb(dn,hn),gn!=null&&Kt.push(tf(dn,gn,pn)))),cn)break;dn=dn.return}0<Kt.length&&(Ut=new Wt(Ut,Zt,null,dt,Nt),Ft.push({event:Ut,listeners:Kt}))}}if(!(lt&7)){e:{if(Ut=ft==="mouseover"||ft==="pointerover",Wt=ft==="mouseout"||ft==="pointerout",Ut&&dt!==wb&&(Zt=dt.relatedTarget||dt.fromElement)&&(Wc(Zt)||Zt[uf]))break e;if((Wt||Ut)&&(Ut=Nt.window===Nt?Nt:(Ut=Nt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,Wt?(Zt=dt.relatedTarget||dt.toElement,Wt=Dt,Zt=Zt?Wc(Zt):null,Zt!==null&&(cn=Vb(Zt),Zt!==cn||Zt.tag!==5&&Zt.tag!==6)&&(Zt=null)):(Wt=null,Zt=Dt),Wt!==Zt)){if(Kt=Bd,gn="onMouseLeave",hn="onMouseEnter",dn="mouse",(ft==="pointerout"||ft==="pointerover")&&(Kt=Td,gn="onPointerLeave",hn="onPointerEnter",dn="pointer"),cn=Wt==null?Ut:ue$2(Wt),pn=Zt==null?Ut:ue$2(Zt),Ut=new Kt(gn,dn+"leave",Wt,dt,Nt),Ut.target=cn,Ut.relatedTarget=pn,gn=null,Wc(Nt)===Dt&&(Kt=new Kt(hn,dn+"enter",Zt,dt,Nt),Kt.target=pn,Kt.relatedTarget=cn,gn=Kt),cn=gn,Wt&&Zt)t:{for(Kt=Wt,hn=Zt,dn=0,pn=Kt;pn;pn=vf(pn))dn++;for(pn=0,gn=hn;gn;gn=vf(gn))pn++;for(;0<dn-pn;)Kt=vf(Kt),dn--;for(;0<pn-dn;)hn=vf(hn),pn--;for(;dn--;){if(Kt===hn||hn!==null&&Kt===hn.alternate)break t;Kt=vf(Kt),hn=vf(hn)}Kt=null}else Kt=null;Wt!==null&&wf(Ft,Ut,Wt,Kt,!1),Zt!==null&&cn!==null&&wf(Ft,cn,Zt,Kt,!0)}}e:{if(Ut=Dt?ue$2(Dt):window,Wt=Ut.nodeName&&Ut.nodeName.toLowerCase(),Wt==="select"||Wt==="input"&&Ut.type==="file")var vn=ve$1;else if(me$2(Ut))if(we$2)vn=Fe;else{vn=De$2;var bn=Ce$2}else(Wt=Ut.nodeName)&&Wt.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(vn=Ee$2);if(vn&&(vn=vn(ft,Dt))){ne$3(Ft,vn,dt,Nt);break e}bn&&bn(ft,Ut,Dt),ft==="focusout"&&(bn=Ut._wrapperState)&&bn.controlled&&Ut.type==="number"&&cb(Ut,"number",Ut.value)}switch(bn=Dt?ue$2(Dt):window,ft){case"focusin":(me$2(bn)||bn.contentEditable==="true")&&(Qe=bn,Re$1=Dt,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(Ft,dt,Nt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(Ft,dt,Nt)}var $n;if(ae$2)e:{switch(ft){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else ie$3?ge$1(ft,dt)&&(Tn="onCompositionEnd"):ft==="keydown"&&dt.keyCode===229&&(Tn="onCompositionStart");Tn&&(de$2&&dt.locale!=="ko"&&(ie$3||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&ie$3&&($n=nd()):(kd=Nt,ld="value"in kd?kd.value:kd.textContent,ie$3=!0)),bn=oe$2(Dt,Tn),0<bn.length&&(Tn=new Ld(Tn,ft,null,dt,Nt),Ft.push({event:Tn,listeners:bn}),$n?Tn.data=$n:($n=he$2(dt),$n!==null&&(Tn.data=$n)))),($n=ce$1?je$1(ft,dt):ke$1(ft,dt))&&(Dt=oe$2(Dt,"onBeforeInput"),0<Dt.length&&(Nt=new Ld("onBeforeInput","beforeinput",null,dt,Nt),Ft.push({event:Nt,listeners:Dt}),Nt.data=$n))}se$2(Ft,lt)})}function tf(ft,lt,dt){return{instance:ft,listener:lt,currentTarget:dt}}function oe$2(ft,lt){for(var dt=lt+"Capture",vt=[];ft!==null;){var St=ft,Et=St.stateNode;St.tag===5&&Et!==null&&(St=Et,Et=Kb(ft,dt),Et!=null&&vt.unshift(tf(ft,Et,St)),Et=Kb(ft,lt),Et!=null&&vt.push(tf(ft,Et,St))),ft=ft.return}return vt}function vf(ft){if(ft===null)return null;do ft=ft.return;while(ft&&ft.tag!==5);return ft||null}function wf(ft,lt,dt,vt,St){for(var Et=lt._reactName,Ct=[];dt!==null&&dt!==vt;){var At=dt,Rt=At.alternate,Dt=At.stateNode;if(Rt!==null&&Rt===vt)break;At.tag===5&&Dt!==null&&(At=Dt,St?(Rt=Kb(dt,Et),Rt!=null&&Ct.unshift(tf(dt,Rt,At))):St||(Rt=Kb(dt,Et),Rt!=null&&Ct.push(tf(dt,Rt,At)))),dt=dt.return}Ct.length!==0&&ft.push({event:lt,listeners:Ct})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(ft){return(typeof ft=="string"?ft:""+ft).replace(xf,`
`).replace(yf,"")}function Af(ft,lt,dt){if(lt=zf(lt),zf(ft)!==lt&&dt)throw Error(p$8(425))}function Bf(){}var Cf=null,Df=null;function Ef(ft,lt){return ft==="textarea"||ft==="noscript"||typeof lt.children=="string"||typeof lt.children=="number"||typeof lt.dangerouslySetInnerHTML=="object"&&lt.dangerouslySetInnerHTML!==null&&lt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(ft){return Hf.resolve(null).then(ft).catch(If)}:Ff;function If(ft){setTimeout(function(){throw ft})}function Kf(ft,lt){var dt=lt,vt=0;do{var St=dt.nextSibling;if(ft.removeChild(dt),St&&St.nodeType===8)if(dt=St.data,dt==="/$"){if(vt===0){ft.removeChild(St),bd(lt);return}vt--}else dt!=="$"&&dt!=="$?"&&dt!=="$!"||vt++;dt=St}while(dt);bd(lt)}function Lf(ft){for(;ft!=null;ft=ft.nextSibling){var lt=ft.nodeType;if(lt===1||lt===3)break;if(lt===8){if(lt=ft.data,lt==="$"||lt==="$!"||lt==="$?")break;if(lt==="/$")return null}}return ft}function Mf(ft){ft=ft.previousSibling;for(var lt=0;ft;){if(ft.nodeType===8){var dt=ft.data;if(dt==="$"||dt==="$!"||dt==="$?"){if(lt===0)return ft;lt--}else dt==="/$"&&lt++}ft=ft.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(ft){var lt=ft[Of];if(lt)return lt;for(var dt=ft.parentNode;dt;){if(lt=dt[uf]||dt[Of]){if(dt=lt.alternate,lt.child!==null||dt!==null&&dt.child!==null)for(ft=Mf(ft);ft!==null;){if(dt=ft[Of])return dt;ft=Mf(ft)}return lt}ft=dt,dt=ft.parentNode}return null}function Cb(ft){return ft=ft[Of]||ft[uf],!ft||ft.tag!==5&&ft.tag!==6&&ft.tag!==13&&ft.tag!==3?null:ft}function ue$2(ft){if(ft.tag===5||ft.tag===6)return ft.stateNode;throw Error(p$8(33))}function Db(ft){return ft[Pf]||null}var Sf=[],Tf=-1;function Uf(ft){return{current:ft}}function E$6(ft){0>Tf||(ft.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(ft,lt){Tf++,Sf[Tf]=ft.current,ft.current=lt}var Vf={},H$5=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(ft,lt){var dt=ft.type.contextTypes;if(!dt)return Vf;var vt=ft.stateNode;if(vt&&vt.__reactInternalMemoizedUnmaskedChildContext===lt)return vt.__reactInternalMemoizedMaskedChildContext;var St={},Et;for(Et in dt)St[Et]=lt[Et];return vt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=lt,ft.__reactInternalMemoizedMaskedChildContext=St),St}function Zf(ft){return ft=ft.childContextTypes,ft!=null}function $f(){E$6(Wf),E$6(H$5)}function ag(ft,lt,dt){if(H$5.current!==Vf)throw Error(p$8(168));G$1(H$5,lt),G$1(Wf,dt)}function bg(ft,lt,dt){var vt=ft.stateNode;if(lt=lt.childContextTypes,typeof vt.getChildContext!="function")return dt;vt=vt.getChildContext();for(var St in vt)if(!(St in lt))throw Error(p$8(108,Ra(ft)||"Unknown",St));return A$4({},dt,vt)}function cg(ft){return ft=(ft=ft.stateNode)&&ft.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$5.current,G$1(H$5,ft),G$1(Wf,Wf.current),!0}function dg(ft,lt,dt){var vt=ft.stateNode;if(!vt)throw Error(p$8(169));dt?(ft=bg(ft,lt,Xf),vt.__reactInternalMemoizedMergedChildContext=ft,E$6(Wf),E$6(H$5),G$1(H$5,ft)):E$6(Wf),G$1(Wf,dt)}var eg=null,fg=!1,gg=!1;function hg(ft){eg===null?eg=[ft]:eg.push(ft)}function ig(ft){fg=!0,hg(ft)}function jg(){if(!gg&&eg!==null){gg=!0;var ft=0,lt=C$4;try{var dt=eg;for(C$4=1;ft<dt.length;ft++){var vt=dt[ft];do vt=vt(!0);while(vt!==null)}eg=null,fg=!1}catch(St){throw eg!==null&&(eg=eg.slice(ft+1)),ac(fc,jg),St}finally{C$4=lt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(ft,lt){kg[lg++]=ng,kg[lg++]=mg,mg=ft,ng=lt}function ug(ft,lt,dt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=ft;var vt=rg;ft=sg;var St=32-oc(vt)-1;vt&=~(1<<St),dt+=1;var Et=32-oc(lt)+St;if(30<Et){var Ct=St-St%5;Et=(vt&(1<<Ct)-1).toString(32),vt>>=Ct,St-=Ct,rg=1<<32-oc(lt)+St|dt<<St|vt,sg=Et+ft}else rg=1<<Et|dt<<St|vt,sg=ft}function vg(ft){ft.return!==null&&(tg(ft,1),ug(ft,1,0))}function wg(ft){for(;ft===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;ft===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(ft,lt){var dt=Bg(5,null,null,0);dt.elementType="DELETED",dt.stateNode=lt,dt.return=ft,lt=ft.deletions,lt===null?(ft.deletions=[dt],ft.flags|=16):lt.push(dt)}function Cg(ft,lt){switch(ft.tag){case 5:var dt=ft.type;return lt=lt.nodeType!==1||dt.toLowerCase()!==lt.nodeName.toLowerCase()?null:lt,lt!==null?(ft.stateNode=lt,xg=ft,yg=Lf(lt.firstChild),!0):!1;case 6:return lt=ft.pendingProps===""||lt.nodeType!==3?null:lt,lt!==null?(ft.stateNode=lt,xg=ft,yg=null,!0):!1;case 13:return lt=lt.nodeType!==8?null:lt,lt!==null?(dt=qg!==null?{id:rg,overflow:sg}:null,ft.memoizedState={dehydrated:lt,treeContext:dt,retryLane:1073741824},dt=Bg(18,null,null,0),dt.stateNode=lt,dt.return=ft,ft.child=dt,xg=ft,yg=null,!0):!1;default:return!1}}function Dg(ft){return(ft.mode&1)!==0&&(ft.flags&128)===0}function Eg(ft){if(I$4){var lt=yg;if(lt){var dt=lt;if(!Cg(ft,lt)){if(Dg(ft))throw Error(p$8(418));lt=Lf(dt.nextSibling);var vt=xg;lt&&Cg(ft,lt)?Ag(vt,dt):(ft.flags=ft.flags&-4097|2,I$4=!1,xg=ft)}}else{if(Dg(ft))throw Error(p$8(418));ft.flags=ft.flags&-4097|2,I$4=!1,xg=ft}}}function Fg(ft){for(ft=ft.return;ft!==null&&ft.tag!==5&&ft.tag!==3&&ft.tag!==13;)ft=ft.return;xg=ft}function Gg(ft){if(ft!==xg)return!1;if(!I$4)return Fg(ft),I$4=!0,!1;var lt;if((lt=ft.tag!==3)&&!(lt=ft.tag!==5)&&(lt=ft.type,lt=lt!=="head"&&lt!=="body"&&!Ef(ft.type,ft.memoizedProps)),lt&&(lt=yg)){if(Dg(ft))throw Hg(),Error(p$8(418));for(;lt;)Ag(ft,lt),lt=Lf(lt.nextSibling)}if(Fg(ft),ft.tag===13){if(ft=ft.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(p$8(317));e:{for(ft=ft.nextSibling,lt=0;ft;){if(ft.nodeType===8){var dt=ft.data;if(dt==="/$"){if(lt===0){yg=Lf(ft.nextSibling);break e}lt--}else dt!=="$"&&dt!=="$!"&&dt!=="$?"||lt++}ft=ft.nextSibling}yg=null}}else yg=xg?Lf(ft.stateNode.nextSibling):null;return!0}function Hg(){for(var ft=yg;ft;)ft=Lf(ft.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(ft){zg===null?zg=[ft]:zg.push(ft)}var Kg=ua.ReactCurrentBatchConfig;function Lg(ft,lt){if(ft&&ft.defaultProps){lt=A$4({},lt),ft=ft.defaultProps;for(var dt in ft)lt[dt]===void 0&&(lt[dt]=ft[dt]);return lt}return lt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(ft){var lt=Mg.current;E$6(Mg),ft._currentValue=lt}function Sg(ft,lt,dt){for(;ft!==null;){var vt=ft.alternate;if((ft.childLanes&lt)!==lt?(ft.childLanes|=lt,vt!==null&&(vt.childLanes|=lt)):vt!==null&&(vt.childLanes&lt)!==lt&&(vt.childLanes|=lt),ft===dt)break;ft=ft.return}}function Tg(ft,lt){Ng=ft,Pg=Og=null,ft=ft.dependencies,ft!==null&&ft.firstContext!==null&&(ft.lanes&lt&&(Ug=!0),ft.firstContext=null)}function Vg(ft){var lt=ft._currentValue;if(Pg!==ft)if(ft={context:ft,memoizedValue:lt,next:null},Og===null){if(Ng===null)throw Error(p$8(308));Og=ft,Ng.dependencies={lanes:0,firstContext:ft}}else Og=Og.next=ft;return lt}var Wg=null;function Xg(ft){Wg===null?Wg=[ft]:Wg.push(ft)}function Yg(ft,lt,dt,vt){var St=lt.interleaved;return St===null?(dt.next=dt,Xg(lt)):(dt.next=St.next,St.next=dt),lt.interleaved=dt,Zg(ft,vt)}function Zg(ft,lt){ft.lanes|=lt;var dt=ft.alternate;for(dt!==null&&(dt.lanes|=lt),dt=ft,ft=ft.return;ft!==null;)ft.childLanes|=lt,dt=ft.alternate,dt!==null&&(dt.childLanes|=lt),dt=ft,ft=ft.return;return dt.tag===3?dt.stateNode:null}var $g=!1;function ah(ft){ft.updateQueue={baseState:ft.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(ft,lt){ft=ft.updateQueue,lt.updateQueue===ft&&(lt.updateQueue={baseState:ft.baseState,firstBaseUpdate:ft.firstBaseUpdate,lastBaseUpdate:ft.lastBaseUpdate,shared:ft.shared,effects:ft.effects})}function ch(ft,lt){return{eventTime:ft,lane:lt,tag:0,payload:null,callback:null,next:null}}function dh(ft,lt,dt){var vt=ft.updateQueue;if(vt===null)return null;if(vt=vt.shared,K$1&2){var St=vt.pending;return St===null?lt.next=lt:(lt.next=St.next,St.next=lt),vt.pending=lt,Zg(ft,dt)}return St=vt.interleaved,St===null?(lt.next=lt,Xg(vt)):(lt.next=St.next,St.next=lt),vt.interleaved=lt,Zg(ft,dt)}function eh(ft,lt,dt){if(lt=lt.updateQueue,lt!==null&&(lt=lt.shared,(dt&4194240)!==0)){var vt=lt.lanes;vt&=ft.pendingLanes,dt|=vt,lt.lanes=dt,Cc(ft,dt)}}function fh(ft,lt){var dt=ft.updateQueue,vt=ft.alternate;if(vt!==null&&(vt=vt.updateQueue,dt===vt)){var St=null,Et=null;if(dt=dt.firstBaseUpdate,dt!==null){do{var Ct={eventTime:dt.eventTime,lane:dt.lane,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null};Et===null?St=Et=Ct:Et=Et.next=Ct,dt=dt.next}while(dt!==null);Et===null?St=Et=lt:Et=Et.next=lt}else St=Et=lt;dt={baseState:vt.baseState,firstBaseUpdate:St,lastBaseUpdate:Et,shared:vt.shared,effects:vt.effects},ft.updateQueue=dt;return}ft=dt.lastBaseUpdate,ft===null?dt.firstBaseUpdate=lt:ft.next=lt,dt.lastBaseUpdate=lt}function gh(ft,lt,dt,vt){var St=ft.updateQueue;$g=!1;var Et=St.firstBaseUpdate,Ct=St.lastBaseUpdate,At=St.shared.pending;if(At!==null){St.shared.pending=null;var Rt=At,Dt=Rt.next;Rt.next=null,Ct===null?Et=Dt:Ct.next=Dt,Ct=Rt;var Nt=ft.alternate;Nt!==null&&(Nt=Nt.updateQueue,At=Nt.lastBaseUpdate,At!==Ct&&(At===null?Nt.firstBaseUpdate=Dt:At.next=Dt,Nt.lastBaseUpdate=Rt))}if(Et!==null){var Ft=St.baseState;Ct=0,Nt=Dt=Rt=null,At=Et;do{var Ut=At.lane,Wt=At.eventTime;if((vt&Ut)===Ut){Nt!==null&&(Nt=Nt.next={eventTime:Wt,lane:0,tag:At.tag,payload:At.payload,callback:At.callback,next:null});e:{var Zt=ft,Kt=At;switch(Ut=lt,Wt=dt,Kt.tag){case 1:if(Zt=Kt.payload,typeof Zt=="function"){Ft=Zt.call(Wt,Ft,Ut);break e}Ft=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=Kt.payload,Ut=typeof Zt=="function"?Zt.call(Wt,Ft,Ut):Zt,Ut==null)break e;Ft=A$4({},Ft,Ut);break e;case 2:$g=!0}}At.callback!==null&&At.lane!==0&&(ft.flags|=64,Ut=St.effects,Ut===null?St.effects=[At]:Ut.push(At))}else Wt={eventTime:Wt,lane:Ut,tag:At.tag,payload:At.payload,callback:At.callback,next:null},Nt===null?(Dt=Nt=Wt,Rt=Ft):Nt=Nt.next=Wt,Ct|=Ut;if(At=At.next,At===null){if(At=St.shared.pending,At===null)break;Ut=At,At=Ut.next,Ut.next=null,St.lastBaseUpdate=Ut,St.shared.pending=null}}while(1);if(Nt===null&&(Rt=Ft),St.baseState=Rt,St.firstBaseUpdate=Dt,St.lastBaseUpdate=Nt,lt=St.shared.interleaved,lt!==null){St=lt;do Ct|=St.lane,St=St.next;while(St!==lt)}else Et===null&&(St.shared.lanes=0);hh|=Ct,ft.lanes=Ct,ft.memoizedState=Ft}}function ih(ft,lt,dt){if(ft=lt.effects,lt.effects=null,ft!==null)for(lt=0;lt<ft.length;lt++){var vt=ft[lt],St=vt.callback;if(St!==null){if(vt.callback=null,vt=dt,typeof St!="function")throw Error(p$8(191,St));St.call(vt)}}}var jh=new aa.Component().refs;function kh(ft,lt,dt,vt){lt=ft.memoizedState,dt=dt(vt,lt),dt=dt==null?lt:A$4({},lt,dt),ft.memoizedState=dt,ft.lanes===0&&(ft.updateQueue.baseState=dt)}var nh={isMounted:function(ft){return(ft=ft._reactInternals)?Vb(ft)===ft:!1},enqueueSetState:function(ft,lt,dt){ft=ft._reactInternals;var vt=L$3(),St=lh(ft),Et=ch(vt,St);Et.payload=lt,dt!=null&&(Et.callback=dt),lt=dh(ft,Et,St),lt!==null&&(mh(lt,ft,St,vt),eh(lt,ft,St))},enqueueReplaceState:function(ft,lt,dt){ft=ft._reactInternals;var vt=L$3(),St=lh(ft),Et=ch(vt,St);Et.tag=1,Et.payload=lt,dt!=null&&(Et.callback=dt),lt=dh(ft,Et,St),lt!==null&&(mh(lt,ft,St,vt),eh(lt,ft,St))},enqueueForceUpdate:function(ft,lt){ft=ft._reactInternals;var dt=L$3(),vt=lh(ft),St=ch(dt,vt);St.tag=2,lt!=null&&(St.callback=lt),lt=dh(ft,St,vt),lt!==null&&(mh(lt,ft,vt,dt),eh(lt,ft,vt))}};function oh(ft,lt,dt,vt,St,Et,Ct){return ft=ft.stateNode,typeof ft.shouldComponentUpdate=="function"?ft.shouldComponentUpdate(vt,Et,Ct):lt.prototype&&lt.prototype.isPureReactComponent?!Ie$1(dt,vt)||!Ie$1(St,Et):!0}function ph(ft,lt,dt){var vt=!1,St=Vf,Et=lt.contextType;return typeof Et=="object"&&Et!==null?Et=Vg(Et):(St=Zf(lt)?Xf:H$5.current,vt=lt.contextTypes,Et=(vt=vt!=null)?Yf(ft,St):Vf),lt=new lt(dt,Et),ft.memoizedState=lt.state!==null&&lt.state!==void 0?lt.state:null,lt.updater=nh,ft.stateNode=lt,lt._reactInternals=ft,vt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=St,ft.__reactInternalMemoizedMaskedChildContext=Et),lt}function qh(ft,lt,dt,vt){ft=lt.state,typeof lt.componentWillReceiveProps=="function"&&lt.componentWillReceiveProps(dt,vt),typeof lt.UNSAFE_componentWillReceiveProps=="function"&&lt.UNSAFE_componentWillReceiveProps(dt,vt),lt.state!==ft&&nh.enqueueReplaceState(lt,lt.state,null)}function rh(ft,lt,dt,vt){var St=ft.stateNode;St.props=dt,St.state=ft.memoizedState,St.refs=jh,ah(ft);var Et=lt.contextType;typeof Et=="object"&&Et!==null?St.context=Vg(Et):(Et=Zf(lt)?Xf:H$5.current,St.context=Yf(ft,Et)),St.state=ft.memoizedState,Et=lt.getDerivedStateFromProps,typeof Et=="function"&&(kh(ft,lt,Et,dt),St.state=ft.memoizedState),typeof lt.getDerivedStateFromProps=="function"||typeof St.getSnapshotBeforeUpdate=="function"||typeof St.UNSAFE_componentWillMount!="function"&&typeof St.componentWillMount!="function"||(lt=St.state,typeof St.componentWillMount=="function"&&St.componentWillMount(),typeof St.UNSAFE_componentWillMount=="function"&&St.UNSAFE_componentWillMount(),lt!==St.state&&nh.enqueueReplaceState(St,St.state,null),gh(ft,dt,St,vt),St.state=ft.memoizedState),typeof St.componentDidMount=="function"&&(ft.flags|=4194308)}function sh(ft,lt,dt){if(ft=dt.ref,ft!==null&&typeof ft!="function"&&typeof ft!="object"){if(dt._owner){if(dt=dt._owner,dt){if(dt.tag!==1)throw Error(p$8(309));var vt=dt.stateNode}if(!vt)throw Error(p$8(147,ft));var St=vt,Et=""+ft;return lt!==null&&lt.ref!==null&&typeof lt.ref=="function"&&lt.ref._stringRef===Et?lt.ref:(lt=function(Ct){var At=St.refs;At===jh&&(At=St.refs={}),Ct===null?delete At[Et]:At[Et]=Ct},lt._stringRef=Et,lt)}if(typeof ft!="string")throw Error(p$8(284));if(!dt._owner)throw Error(p$8(290,ft))}return ft}function th(ft,lt){throw ft=Object.prototype.toString.call(lt),Error(p$8(31,ft==="[object Object]"?"object with keys {"+Object.keys(lt).join(", ")+"}":ft))}function uh(ft){var lt=ft._init;return lt(ft._payload)}function vh(ft){function lt(hn,dn){if(ft){var pn=hn.deletions;pn===null?(hn.deletions=[dn],hn.flags|=16):pn.push(dn)}}function dt(hn,dn){if(!ft)return null;for(;dn!==null;)lt(hn,dn),dn=dn.sibling;return null}function vt(hn,dn){for(hn=new Map;dn!==null;)dn.key!==null?hn.set(dn.key,dn):hn.set(dn.index,dn),dn=dn.sibling;return hn}function St(hn,dn){return hn=wh(hn,dn),hn.index=0,hn.sibling=null,hn}function Et(hn,dn,pn){return hn.index=pn,ft?(pn=hn.alternate,pn!==null?(pn=pn.index,pn<dn?(hn.flags|=2,dn):pn):(hn.flags|=2,dn)):(hn.flags|=1048576,dn)}function Ct(hn){return ft&&hn.alternate===null&&(hn.flags|=2),hn}function At(hn,dn,pn,gn){return dn===null||dn.tag!==6?(dn=xh(pn,hn.mode,gn),dn.return=hn,dn):(dn=St(dn,pn),dn.return=hn,dn)}function Rt(hn,dn,pn,gn){var vn=pn.type;return vn===ya?Nt(hn,dn,pn.props.children,gn,pn.key):dn!==null&&(dn.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Ha&&uh(vn)===dn.type)?(gn=St(dn,pn.props),gn.ref=sh(hn,dn,pn),gn.return=hn,gn):(gn=yh(pn.type,pn.key,pn.props,null,hn.mode,gn),gn.ref=sh(hn,dn,pn),gn.return=hn,gn)}function Dt(hn,dn,pn,gn){return dn===null||dn.tag!==4||dn.stateNode.containerInfo!==pn.containerInfo||dn.stateNode.implementation!==pn.implementation?(dn=zh(pn,hn.mode,gn),dn.return=hn,dn):(dn=St(dn,pn.children||[]),dn.return=hn,dn)}function Nt(hn,dn,pn,gn,vn){return dn===null||dn.tag!==7?(dn=Ah(pn,hn.mode,gn,vn),dn.return=hn,dn):(dn=St(dn,pn),dn.return=hn,dn)}function Ft(hn,dn,pn){if(typeof dn=="string"&&dn!==""||typeof dn=="number")return dn=xh(""+dn,hn.mode,pn),dn.return=hn,dn;if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case va:return pn=yh(dn.type,dn.key,dn.props,null,hn.mode,pn),pn.ref=sh(hn,null,dn),pn.return=hn,pn;case wa:return dn=zh(dn,hn.mode,pn),dn.return=hn,dn;case Ha:var gn=dn._init;return Ft(hn,gn(dn._payload),pn)}if(eb(dn)||Ka(dn))return dn=Ah(dn,hn.mode,pn,null),dn.return=hn,dn;th(hn,dn)}return null}function Ut(hn,dn,pn,gn){var vn=dn!==null?dn.key:null;if(typeof pn=="string"&&pn!==""||typeof pn=="number")return vn!==null?null:At(hn,dn,""+pn,gn);if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case va:return pn.key===vn?Rt(hn,dn,pn,gn):null;case wa:return pn.key===vn?Dt(hn,dn,pn,gn):null;case Ha:return vn=pn._init,Ut(hn,dn,vn(pn._payload),gn)}if(eb(pn)||Ka(pn))return vn!==null?null:Nt(hn,dn,pn,gn,null);th(hn,pn)}return null}function Wt(hn,dn,pn,gn,vn){if(typeof gn=="string"&&gn!==""||typeof gn=="number")return hn=hn.get(pn)||null,At(dn,hn,""+gn,vn);if(typeof gn=="object"&&gn!==null){switch(gn.$$typeof){case va:return hn=hn.get(gn.key===null?pn:gn.key)||null,Rt(dn,hn,gn,vn);case wa:return hn=hn.get(gn.key===null?pn:gn.key)||null,Dt(dn,hn,gn,vn);case Ha:var bn=gn._init;return Wt(hn,dn,pn,bn(gn._payload),vn)}if(eb(gn)||Ka(gn))return hn=hn.get(pn)||null,Nt(dn,hn,gn,vn,null);th(dn,gn)}return null}function Zt(hn,dn,pn,gn){for(var vn=null,bn=null,$n=dn,Tn=dn=0,In=null;$n!==null&&Tn<pn.length;Tn++){$n.index>Tn?(In=$n,$n=null):In=$n.sibling;var Pn=Ut(hn,$n,pn[Tn],gn);if(Pn===null){$n===null&&($n=In);break}ft&&$n&&Pn.alternate===null&&lt(hn,$n),dn=Et(Pn,dn,Tn),bn===null?vn=Pn:bn.sibling=Pn,bn=Pn,$n=In}if(Tn===pn.length)return dt(hn,$n),I$4&&tg(hn,Tn),vn;if($n===null){for(;Tn<pn.length;Tn++)$n=Ft(hn,pn[Tn],gn),$n!==null&&(dn=Et($n,dn,Tn),bn===null?vn=$n:bn.sibling=$n,bn=$n);return I$4&&tg(hn,Tn),vn}for($n=vt(hn,$n);Tn<pn.length;Tn++)In=Wt($n,hn,Tn,pn[Tn],gn),In!==null&&(ft&&In.alternate!==null&&$n.delete(In.key===null?Tn:In.key),dn=Et(In,dn,Tn),bn===null?vn=In:bn.sibling=In,bn=In);return ft&&$n.forEach(function(zn){return lt(hn,zn)}),I$4&&tg(hn,Tn),vn}function Kt(hn,dn,pn,gn){var vn=Ka(pn);if(typeof vn!="function")throw Error(p$8(150));if(pn=vn.call(pn),pn==null)throw Error(p$8(151));for(var bn=vn=null,$n=dn,Tn=dn=0,In=null,Pn=pn.next();$n!==null&&!Pn.done;Tn++,Pn=pn.next()){$n.index>Tn?(In=$n,$n=null):In=$n.sibling;var zn=Ut(hn,$n,Pn.value,gn);if(zn===null){$n===null&&($n=In);break}ft&&$n&&zn.alternate===null&&lt(hn,$n),dn=Et(zn,dn,Tn),bn===null?vn=zn:bn.sibling=zn,bn=zn,$n=In}if(Pn.done)return dt(hn,$n),I$4&&tg(hn,Tn),vn;if($n===null){for(;!Pn.done;Tn++,Pn=pn.next())Pn=Ft(hn,Pn.value,gn),Pn!==null&&(dn=Et(Pn,dn,Tn),bn===null?vn=Pn:bn.sibling=Pn,bn=Pn);return I$4&&tg(hn,Tn),vn}for($n=vt(hn,$n);!Pn.done;Tn++,Pn=pn.next())Pn=Wt($n,hn,Tn,Pn.value,gn),Pn!==null&&(ft&&Pn.alternate!==null&&$n.delete(Pn.key===null?Tn:Pn.key),dn=Et(Pn,dn,Tn),bn===null?vn=Pn:bn.sibling=Pn,bn=Pn);return ft&&$n.forEach(function(An){return lt(hn,An)}),I$4&&tg(hn,Tn),vn}function cn(hn,dn,pn,gn){if(typeof pn=="object"&&pn!==null&&pn.type===ya&&pn.key===null&&(pn=pn.props.children),typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case va:e:{for(var vn=pn.key,bn=dn;bn!==null;){if(bn.key===vn){if(vn=pn.type,vn===ya){if(bn.tag===7){dt(hn,bn.sibling),dn=St(bn,pn.props.children),dn.return=hn,hn=dn;break e}}else if(bn.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Ha&&uh(vn)===bn.type){dt(hn,bn.sibling),dn=St(bn,pn.props),dn.ref=sh(hn,bn,pn),dn.return=hn,hn=dn;break e}dt(hn,bn);break}else lt(hn,bn);bn=bn.sibling}pn.type===ya?(dn=Ah(pn.props.children,hn.mode,gn,pn.key),dn.return=hn,hn=dn):(gn=yh(pn.type,pn.key,pn.props,null,hn.mode,gn),gn.ref=sh(hn,dn,pn),gn.return=hn,hn=gn)}return Ct(hn);case wa:e:{for(bn=pn.key;dn!==null;){if(dn.key===bn)if(dn.tag===4&&dn.stateNode.containerInfo===pn.containerInfo&&dn.stateNode.implementation===pn.implementation){dt(hn,dn.sibling),dn=St(dn,pn.children||[]),dn.return=hn,hn=dn;break e}else{dt(hn,dn);break}else lt(hn,dn);dn=dn.sibling}dn=zh(pn,hn.mode,gn),dn.return=hn,hn=dn}return Ct(hn);case Ha:return bn=pn._init,cn(hn,dn,bn(pn._payload),gn)}if(eb(pn))return Zt(hn,dn,pn,gn);if(Ka(pn))return Kt(hn,dn,pn,gn);th(hn,pn)}return typeof pn=="string"&&pn!==""||typeof pn=="number"?(pn=""+pn,dn!==null&&dn.tag===6?(dt(hn,dn.sibling),dn=St(dn,pn),dn.return=hn,hn=dn):(dt(hn,dn),dn=xh(pn,hn.mode,gn),dn.return=hn,hn=dn),Ct(hn)):dt(hn,dn)}return cn}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(ft){if(ft===Dh)throw Error(p$8(174));return ft}function Ih(ft,lt){switch(G$1(Gh,lt),G$1(Fh,ft),G$1(Eh,Dh),ft=lt.nodeType,ft){case 9:case 11:lt=(lt=lt.documentElement)?lt.namespaceURI:lb(null,"");break;default:ft=ft===8?lt.parentNode:lt,lt=ft.namespaceURI||null,ft=ft.tagName,lt=lb(lt,ft)}E$6(Eh),G$1(Eh,lt)}function Jh(){E$6(Eh),E$6(Fh),E$6(Gh)}function Kh(ft){Hh(Gh.current);var lt=Hh(Eh.current),dt=lb(lt,ft.type);lt!==dt&&(G$1(Fh,ft),G$1(Eh,dt))}function Lh(ft){Fh.current===ft&&(E$6(Eh),E$6(Fh))}var M$2=Uf(0);function Mh(ft){for(var lt=ft;lt!==null;){if(lt.tag===13){var dt=lt.memoizedState;if(dt!==null&&(dt=dt.dehydrated,dt===null||dt.data==="$?"||dt.data==="$!"))return lt}else if(lt.tag===19&&lt.memoizedProps.revealOrder!==void 0){if(lt.flags&128)return lt}else if(lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===ft)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===ft)return null;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}return null}var Nh=[];function Oh(){for(var ft=0;ft<Nh.length;ft++)Nh[ft]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$3=null,O$4=null,P$4=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$8(321))}function Wh(ft,lt){if(lt===null)return!1;for(var dt=0;dt<lt.length&&dt<ft.length;dt++)if(!He$2(ft[dt],lt[dt]))return!1;return!0}function Xh(ft,lt,dt,vt,St,Et){if(Rh=Et,N$3=lt,lt.memoizedState=null,lt.updateQueue=null,lt.lanes=0,Ph.current=ft===null||ft.memoizedState===null?Yh:Zh,ft=dt(vt,St),Th){Et=0;do{if(Th=!1,Uh=0,25<=Et)throw Error(p$8(301));Et+=1,P$4=O$4=null,lt.updateQueue=null,Ph.current=$h,ft=dt(vt,St)}while(Th)}if(Ph.current=ai,lt=O$4!==null&&O$4.next!==null,Rh=0,P$4=O$4=N$3=null,Sh=!1,lt)throw Error(p$8(300));return ft}function bi(){var ft=Uh!==0;return Uh=0,ft}function ci(){var ft={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$3.memoizedState=P$4=ft:P$4=P$4.next=ft,P$4}function di(){if(O$4===null){var ft=N$3.alternate;ft=ft!==null?ft.memoizedState:null}else ft=O$4.next;var lt=P$4===null?N$3.memoizedState:P$4.next;if(lt!==null)P$4=lt,O$4=ft;else{if(ft===null)throw Error(p$8(310));O$4=ft,ft={memoizedState:O$4.memoizedState,baseState:O$4.baseState,baseQueue:O$4.baseQueue,queue:O$4.queue,next:null},P$4===null?N$3.memoizedState=P$4=ft:P$4=P$4.next=ft}return P$4}function ei(ft,lt){return typeof lt=="function"?lt(ft):lt}function fi(ft){var lt=di(),dt=lt.queue;if(dt===null)throw Error(p$8(311));dt.lastRenderedReducer=ft;var vt=O$4,St=vt.baseQueue,Et=dt.pending;if(Et!==null){if(St!==null){var Ct=St.next;St.next=Et.next,Et.next=Ct}vt.baseQueue=St=Et,dt.pending=null}if(St!==null){Et=St.next,vt=vt.baseState;var At=Ct=null,Rt=null,Dt=Et;do{var Nt=Dt.lane;if((Rh&Nt)===Nt)Rt!==null&&(Rt=Rt.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),vt=Dt.hasEagerState?Dt.eagerState:ft(vt,Dt.action);else{var Ft={lane:Nt,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};Rt===null?(At=Rt=Ft,Ct=vt):Rt=Rt.next=Ft,N$3.lanes|=Nt,hh|=Nt}Dt=Dt.next}while(Dt!==null&&Dt!==Et);Rt===null?Ct=vt:Rt.next=At,He$2(vt,lt.memoizedState)||(Ug=!0),lt.memoizedState=vt,lt.baseState=Ct,lt.baseQueue=Rt,dt.lastRenderedState=vt}if(ft=dt.interleaved,ft!==null){St=ft;do Et=St.lane,N$3.lanes|=Et,hh|=Et,St=St.next;while(St!==ft)}else St===null&&(dt.lanes=0);return[lt.memoizedState,dt.dispatch]}function gi(ft){var lt=di(),dt=lt.queue;if(dt===null)throw Error(p$8(311));dt.lastRenderedReducer=ft;var vt=dt.dispatch,St=dt.pending,Et=lt.memoizedState;if(St!==null){dt.pending=null;var Ct=St=St.next;do Et=ft(Et,Ct.action),Ct=Ct.next;while(Ct!==St);He$2(Et,lt.memoizedState)||(Ug=!0),lt.memoizedState=Et,lt.baseQueue===null&&(lt.baseState=Et),dt.lastRenderedState=Et}return[Et,vt]}function hi(){}function ii(ft,lt){var dt=N$3,vt=di(),St=lt(),Et=!He$2(vt.memoizedState,St);if(Et&&(vt.memoizedState=St,Ug=!0),vt=vt.queue,ji(ki.bind(null,dt,vt,ft),[ft]),vt.getSnapshot!==lt||Et||P$4!==null&&P$4.memoizedState.tag&1){if(dt.flags|=2048,li(9,mi.bind(null,dt,vt,St,lt),void 0,null),R$3===null)throw Error(p$8(349));Rh&30||ni(dt,lt,St)}return St}function ni(ft,lt,dt){ft.flags|=16384,ft={getSnapshot:lt,value:dt},lt=N$3.updateQueue,lt===null?(lt={lastEffect:null,stores:null},N$3.updateQueue=lt,lt.stores=[ft]):(dt=lt.stores,dt===null?lt.stores=[ft]:dt.push(ft))}function mi(ft,lt,dt,vt){lt.value=dt,lt.getSnapshot=vt,oi(lt)&&pi(ft)}function ki(ft,lt,dt){return dt(function(){oi(lt)&&pi(ft)})}function oi(ft){var lt=ft.getSnapshot;ft=ft.value;try{var dt=lt();return!He$2(ft,dt)}catch{return!0}}function pi(ft){var lt=Zg(ft,1);lt!==null&&mh(lt,ft,1,-1)}function qi(ft){var lt=ci();return typeof ft=="function"&&(ft=ft()),lt.memoizedState=lt.baseState=ft,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:ft},lt.queue=ft,ft=ft.dispatch=ri.bind(null,N$3,ft),[lt.memoizedState,ft]}function li(ft,lt,dt,vt){return ft={tag:ft,create:lt,destroy:dt,deps:vt,next:null},lt=N$3.updateQueue,lt===null?(lt={lastEffect:null,stores:null},N$3.updateQueue=lt,lt.lastEffect=ft.next=ft):(dt=lt.lastEffect,dt===null?lt.lastEffect=ft.next=ft:(vt=dt.next,dt.next=ft,ft.next=vt,lt.lastEffect=ft)),ft}function si(){return di().memoizedState}function ti(ft,lt,dt,vt){var St=ci();N$3.flags|=ft,St.memoizedState=li(1|lt,dt,void 0,vt===void 0?null:vt)}function ui(ft,lt,dt,vt){var St=di();vt=vt===void 0?null:vt;var Et=void 0;if(O$4!==null){var Ct=O$4.memoizedState;if(Et=Ct.destroy,vt!==null&&Wh(vt,Ct.deps)){St.memoizedState=li(lt,dt,Et,vt);return}}N$3.flags|=ft,St.memoizedState=li(1|lt,dt,Et,vt)}function vi(ft,lt){return ti(8390656,8,ft,lt)}function ji(ft,lt){return ui(2048,8,ft,lt)}function wi(ft,lt){return ui(4,2,ft,lt)}function xi(ft,lt){return ui(4,4,ft,lt)}function yi(ft,lt){if(typeof lt=="function")return ft=ft(),lt(ft),function(){lt(null)};if(lt!=null)return ft=ft(),lt.current=ft,function(){lt.current=null}}function zi(ft,lt,dt){return dt=dt!=null?dt.concat([ft]):null,ui(4,4,yi.bind(null,lt,ft),dt)}function Ai(){}function Bi(ft,lt){var dt=di();lt=lt===void 0?null:lt;var vt=dt.memoizedState;return vt!==null&&lt!==null&&Wh(lt,vt[1])?vt[0]:(dt.memoizedState=[ft,lt],ft)}function Ci(ft,lt){var dt=di();lt=lt===void 0?null:lt;var vt=dt.memoizedState;return vt!==null&&lt!==null&&Wh(lt,vt[1])?vt[0]:(ft=ft(),dt.memoizedState=[ft,lt],ft)}function Di(ft,lt,dt){return Rh&21?(He$2(dt,lt)||(dt=yc(),N$3.lanes|=dt,hh|=dt,ft.baseState=!0),lt):(ft.baseState&&(ft.baseState=!1,Ug=!0),ft.memoizedState=dt)}function Ei(ft,lt){var dt=C$4;C$4=dt!==0&&4>dt?dt:4,ft(!0);var vt=Qh.transition;Qh.transition={};try{ft(!1),lt()}finally{C$4=dt,Qh.transition=vt}}function Fi(){return di().memoizedState}function Gi(ft,lt,dt){var vt=lh(ft);if(dt={lane:vt,action:dt,hasEagerState:!1,eagerState:null,next:null},Hi(ft))Ii(lt,dt);else if(dt=Yg(ft,lt,dt,vt),dt!==null){var St=L$3();mh(dt,ft,vt,St),Ji(dt,lt,vt)}}function ri(ft,lt,dt){var vt=lh(ft),St={lane:vt,action:dt,hasEagerState:!1,eagerState:null,next:null};if(Hi(ft))Ii(lt,St);else{var Et=ft.alternate;if(ft.lanes===0&&(Et===null||Et.lanes===0)&&(Et=lt.lastRenderedReducer,Et!==null))try{var Ct=lt.lastRenderedState,At=Et(Ct,dt);if(St.hasEagerState=!0,St.eagerState=At,He$2(At,Ct)){var Rt=lt.interleaved;Rt===null?(St.next=St,Xg(lt)):(St.next=Rt.next,Rt.next=St),lt.interleaved=St;return}}catch{}finally{}dt=Yg(ft,lt,St,vt),dt!==null&&(St=L$3(),mh(dt,ft,vt,St),Ji(dt,lt,vt))}}function Hi(ft){var lt=ft.alternate;return ft===N$3||lt!==null&&lt===N$3}function Ii(ft,lt){Th=Sh=!0;var dt=ft.pending;dt===null?lt.next=lt:(lt.next=dt.next,dt.next=lt),ft.pending=lt}function Ji(ft,lt,dt){if(dt&4194240){var vt=lt.lanes;vt&=ft.pendingLanes,dt|=vt,lt.lanes=dt,Cc(ft,dt)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(ft,lt){return ci().memoizedState=[ft,lt===void 0?null:lt],ft},useContext:Vg,useEffect:vi,useImperativeHandle:function(ft,lt,dt){return dt=dt!=null?dt.concat([ft]):null,ti(4194308,4,yi.bind(null,lt,ft),dt)},useLayoutEffect:function(ft,lt){return ti(4194308,4,ft,lt)},useInsertionEffect:function(ft,lt){return ti(4,2,ft,lt)},useMemo:function(ft,lt){var dt=ci();return lt=lt===void 0?null:lt,ft=ft(),dt.memoizedState=[ft,lt],ft},useReducer:function(ft,lt,dt){var vt=ci();return lt=dt!==void 0?dt(lt):lt,vt.memoizedState=vt.baseState=lt,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:lt},vt.queue=ft,ft=ft.dispatch=Gi.bind(null,N$3,ft),[vt.memoizedState,ft]},useRef:function(ft){var lt=ci();return ft={current:ft},lt.memoizedState=ft},useState:qi,useDebugValue:Ai,useDeferredValue:function(ft){return ci().memoizedState=ft},useTransition:function(){var ft=qi(!1),lt=ft[0];return ft=Ei.bind(null,ft[1]),ci().memoizedState=ft,[lt,ft]},useMutableSource:function(){},useSyncExternalStore:function(ft,lt,dt){var vt=N$3,St=ci();if(I$4){if(dt===void 0)throw Error(p$8(407));dt=dt()}else{if(dt=lt(),R$3===null)throw Error(p$8(349));Rh&30||ni(vt,lt,dt)}St.memoizedState=dt;var Et={value:dt,getSnapshot:lt};return St.queue=Et,vi(ki.bind(null,vt,Et,ft),[ft]),vt.flags|=2048,li(9,mi.bind(null,vt,Et,dt,lt),void 0,null),dt},useId:function(){var ft=ci(),lt=R$3.identifierPrefix;if(I$4){var dt=sg,vt=rg;dt=(vt&~(1<<32-oc(vt)-1)).toString(32)+dt,lt=":"+lt+"R"+dt,dt=Uh++,0<dt&&(lt+="H"+dt.toString(32)),lt+=":"}else dt=Vh++,lt=":"+lt+"r"+dt.toString(32)+":";return ft.memoizedState=lt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(ft){var lt=di();return Di(lt,O$4.memoizedState,ft)},useTransition:function(){var ft=fi(ei)[0],lt=di().memoizedState;return[ft,lt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(ft){var lt=di();return O$4===null?lt.memoizedState=ft:Di(lt,O$4.memoizedState,ft)},useTransition:function(){var ft=gi(ei)[0],lt=di().memoizedState;return[ft,lt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(ft,lt){try{var dt="",vt=lt;do dt+=Pa(vt),vt=vt.return;while(vt);var St=dt}catch(Et){St=`
Error generating stack: `+Et.message+`
`+Et.stack}return{value:ft,source:lt,stack:St,digest:null}}function Li(ft,lt,dt){return{value:ft,source:null,stack:dt??null,digest:lt??null}}function Mi(ft,lt){try{console.error(lt.value)}catch(dt){setTimeout(function(){throw dt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(ft,lt,dt){dt=ch(-1,dt),dt.tag=3,dt.payload={element:null};var vt=lt.value;return dt.callback=function(){Pi||(Pi=!0,Qi=vt),Mi(ft,lt)},dt}function Ri(ft,lt,dt){dt=ch(-1,dt),dt.tag=3;var vt=ft.type.getDerivedStateFromError;if(typeof vt=="function"){var St=lt.value;dt.payload=function(){return vt(St)},dt.callback=function(){Mi(ft,lt)}}var Et=ft.stateNode;return Et!==null&&typeof Et.componentDidCatch=="function"&&(dt.callback=function(){Mi(ft,lt),typeof vt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Ct=lt.stack;this.componentDidCatch(lt.value,{componentStack:Ct!==null?Ct:""})}),dt}function Ti(ft,lt,dt){var vt=ft.pingCache;if(vt===null){vt=ft.pingCache=new Ni;var St=new Set;vt.set(lt,St)}else St=vt.get(lt),St===void 0&&(St=new Set,vt.set(lt,St));St.has(dt)||(St.add(dt),ft=Ui.bind(null,ft,lt,dt),lt.then(ft,ft))}function Vi(ft){do{var lt;if((lt=ft.tag===13)&&(lt=ft.memoizedState,lt=lt!==null?lt.dehydrated!==null:!0),lt)return ft;ft=ft.return}while(ft!==null);return null}function Wi(ft,lt,dt,vt,St){return ft.mode&1?(ft.flags|=65536,ft.lanes=St,ft):(ft===lt?ft.flags|=65536:(ft.flags|=128,dt.flags|=131072,dt.flags&=-52805,dt.tag===1&&(dt.alternate===null?dt.tag=17:(lt=ch(-1,1),lt.tag=2,dh(dt,lt,1))),dt.lanes|=1),ft)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(ft,lt,dt,vt){lt.child=ft===null?Ch(lt,null,dt,vt):Bh(lt,ft.child,dt,vt)}function Zi(ft,lt,dt,vt,St){dt=dt.render;var Et=lt.ref;return Tg(lt,St),vt=Xh(ft,lt,dt,vt,Et,St),dt=bi(),ft!==null&&!Ug?(lt.updateQueue=ft.updateQueue,lt.flags&=-2053,ft.lanes&=~St,$i(ft,lt,St)):(I$4&&dt&&vg(lt),lt.flags|=1,Yi(ft,lt,vt,St),lt.child)}function aj(ft,lt,dt,vt,St){if(ft===null){var Et=dt.type;return typeof Et=="function"&&!bj(Et)&&Et.defaultProps===void 0&&dt.compare===null&&dt.defaultProps===void 0?(lt.tag=15,lt.type=Et,cj(ft,lt,Et,vt,St)):(ft=yh(dt.type,null,vt,lt,lt.mode,St),ft.ref=lt.ref,ft.return=lt,lt.child=ft)}if(Et=ft.child,!(ft.lanes&St)){var Ct=Et.memoizedProps;if(dt=dt.compare,dt=dt!==null?dt:Ie$1,dt(Ct,vt)&&ft.ref===lt.ref)return $i(ft,lt,St)}return lt.flags|=1,ft=wh(Et,vt),ft.ref=lt.ref,ft.return=lt,lt.child=ft}function cj(ft,lt,dt,vt,St){if(ft!==null){var Et=ft.memoizedProps;if(Ie$1(Et,vt)&&ft.ref===lt.ref)if(Ug=!1,lt.pendingProps=vt=Et,(ft.lanes&St)!==0)ft.flags&131072&&(Ug=!0);else return lt.lanes=ft.lanes,$i(ft,lt,St)}return dj(ft,lt,dt,vt,St)}function ej(ft,lt,dt){var vt=lt.pendingProps,St=vt.children,Et=ft!==null?ft.memoizedState:null;if(vt.mode==="hidden")if(!(lt.mode&1))lt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=dt;else{if(!(dt&1073741824))return ft=Et!==null?Et.baseLanes|dt:dt,lt.lanes=lt.childLanes=1073741824,lt.memoizedState={baseLanes:ft,cachePool:null,transitions:null},lt.updateQueue=null,G$1(fj,gj),gj|=ft,null;lt.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt=Et!==null?Et.baseLanes:dt,G$1(fj,gj),gj|=vt}else Et!==null?(vt=Et.baseLanes|dt,lt.memoizedState=null):vt=dt,G$1(fj,gj),gj|=vt;return Yi(ft,lt,St,dt),lt.child}function hj(ft,lt){var dt=lt.ref;(ft===null&&dt!==null||ft!==null&&ft.ref!==dt)&&(lt.flags|=512,lt.flags|=2097152)}function dj(ft,lt,dt,vt,St){var Et=Zf(dt)?Xf:H$5.current;return Et=Yf(lt,Et),Tg(lt,St),dt=Xh(ft,lt,dt,vt,Et,St),vt=bi(),ft!==null&&!Ug?(lt.updateQueue=ft.updateQueue,lt.flags&=-2053,ft.lanes&=~St,$i(ft,lt,St)):(I$4&&vt&&vg(lt),lt.flags|=1,Yi(ft,lt,dt,St),lt.child)}function ij(ft,lt,dt,vt,St){if(Zf(dt)){var Et=!0;cg(lt)}else Et=!1;if(Tg(lt,St),lt.stateNode===null)jj(ft,lt),ph(lt,dt,vt),rh(lt,dt,vt,St),vt=!0;else if(ft===null){var Ct=lt.stateNode,At=lt.memoizedProps;Ct.props=At;var Rt=Ct.context,Dt=dt.contextType;typeof Dt=="object"&&Dt!==null?Dt=Vg(Dt):(Dt=Zf(dt)?Xf:H$5.current,Dt=Yf(lt,Dt));var Nt=dt.getDerivedStateFromProps,Ft=typeof Nt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function";Ft||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(At!==vt||Rt!==Dt)&&qh(lt,Ct,vt,Dt),$g=!1;var Ut=lt.memoizedState;Ct.state=Ut,gh(lt,vt,Ct,St),Rt=lt.memoizedState,At!==vt||Ut!==Rt||Wf.current||$g?(typeof Nt=="function"&&(kh(lt,dt,Nt,vt),Rt=lt.memoizedState),(At=$g||oh(lt,dt,At,vt,Ut,Rt,Dt))?(Ft||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount()),typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308)):(typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308),lt.memoizedProps=vt,lt.memoizedState=Rt),Ct.props=vt,Ct.state=Rt,Ct.context=Dt,vt=At):(typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308),vt=!1)}else{Ct=lt.stateNode,bh(ft,lt),At=lt.memoizedProps,Dt=lt.type===lt.elementType?At:Lg(lt.type,At),Ct.props=Dt,Ft=lt.pendingProps,Ut=Ct.context,Rt=dt.contextType,typeof Rt=="object"&&Rt!==null?Rt=Vg(Rt):(Rt=Zf(dt)?Xf:H$5.current,Rt=Yf(lt,Rt));var Wt=dt.getDerivedStateFromProps;(Nt=typeof Wt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function")||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(At!==Ft||Ut!==Rt)&&qh(lt,Ct,vt,Rt),$g=!1,Ut=lt.memoizedState,Ct.state=Ut,gh(lt,vt,Ct,St);var Zt=lt.memoizedState;At!==Ft||Ut!==Zt||Wf.current||$g?(typeof Wt=="function"&&(kh(lt,dt,Wt,vt),Zt=lt.memoizedState),(Dt=$g||oh(lt,dt,Dt,vt,Ut,Zt,Rt)||!1)?(Nt||typeof Ct.UNSAFE_componentWillUpdate!="function"&&typeof Ct.componentWillUpdate!="function"||(typeof Ct.componentWillUpdate=="function"&&Ct.componentWillUpdate(vt,Zt,Rt),typeof Ct.UNSAFE_componentWillUpdate=="function"&&Ct.UNSAFE_componentWillUpdate(vt,Zt,Rt)),typeof Ct.componentDidUpdate=="function"&&(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate=="function"&&(lt.flags|=1024)):(typeof Ct.componentDidUpdate!="function"||At===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||At===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=1024),lt.memoizedProps=vt,lt.memoizedState=Zt),Ct.props=vt,Ct.state=Zt,Ct.context=Rt,vt=Dt):(typeof Ct.componentDidUpdate!="function"||At===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||At===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=1024),vt=!1)}return kj(ft,lt,dt,vt,Et,St)}function kj(ft,lt,dt,vt,St,Et){hj(ft,lt);var Ct=(lt.flags&128)!==0;if(!vt&&!Ct)return St&&dg(lt,dt,!1),$i(ft,lt,Et);vt=lt.stateNode,Xi.current=lt;var At=Ct&&typeof dt.getDerivedStateFromError!="function"?null:vt.render();return lt.flags|=1,ft!==null&&Ct?(lt.child=Bh(lt,ft.child,null,Et),lt.child=Bh(lt,null,At,Et)):Yi(ft,lt,At,Et),lt.memoizedState=vt.state,St&&dg(lt,dt,!0),lt.child}function lj(ft){var lt=ft.stateNode;lt.pendingContext?ag(ft,lt.pendingContext,lt.pendingContext!==lt.context):lt.context&&ag(ft,lt.context,!1),Ih(ft,lt.containerInfo)}function mj(ft,lt,dt,vt,St){return Ig(),Jg(St),lt.flags|=256,Yi(ft,lt,dt,vt),lt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(ft){return{baseLanes:ft,cachePool:null,transitions:null}}function pj(ft,lt,dt){var vt=lt.pendingProps,St=M$2.current,Et=!1,Ct=(lt.flags&128)!==0,At;if((At=Ct)||(At=ft!==null&&ft.memoizedState===null?!1:(St&2)!==0),At?(Et=!0,lt.flags&=-129):(ft===null||ft.memoizedState!==null)&&(St|=1),G$1(M$2,St&1),ft===null)return Eg(lt),ft=lt.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null)?(lt.mode&1?ft.data==="$!"?lt.lanes=8:lt.lanes=1073741824:lt.lanes=1,null):(Ct=vt.children,ft=vt.fallback,Et?(vt=lt.mode,Et=lt.child,Ct={mode:"hidden",children:Ct},!(vt&1)&&Et!==null?(Et.childLanes=0,Et.pendingProps=Ct):Et=qj(Ct,vt,0,null),ft=Ah(ft,vt,dt,null),Et.return=lt,ft.return=lt,Et.sibling=ft,lt.child=Et,lt.child.memoizedState=oj(dt),lt.memoizedState=nj,ft):rj(lt,Ct));if(St=ft.memoizedState,St!==null&&(At=St.dehydrated,At!==null))return sj(ft,lt,Ct,vt,At,St,dt);if(Et){Et=vt.fallback,Ct=lt.mode,St=ft.child,At=St.sibling;var Rt={mode:"hidden",children:vt.children};return!(Ct&1)&&lt.child!==St?(vt=lt.child,vt.childLanes=0,vt.pendingProps=Rt,lt.deletions=null):(vt=wh(St,Rt),vt.subtreeFlags=St.subtreeFlags&14680064),At!==null?Et=wh(At,Et):(Et=Ah(Et,Ct,dt,null),Et.flags|=2),Et.return=lt,vt.return=lt,vt.sibling=Et,lt.child=vt,vt=Et,Et=lt.child,Ct=ft.child.memoizedState,Ct=Ct===null?oj(dt):{baseLanes:Ct.baseLanes|dt,cachePool:null,transitions:Ct.transitions},Et.memoizedState=Ct,Et.childLanes=ft.childLanes&~dt,lt.memoizedState=nj,vt}return Et=ft.child,ft=Et.sibling,vt=wh(Et,{mode:"visible",children:vt.children}),!(lt.mode&1)&&(vt.lanes=dt),vt.return=lt,vt.sibling=null,ft!==null&&(dt=lt.deletions,dt===null?(lt.deletions=[ft],lt.flags|=16):dt.push(ft)),lt.child=vt,lt.memoizedState=null,vt}function rj(ft,lt){return lt=qj({mode:"visible",children:lt},ft.mode,0,null),lt.return=ft,ft.child=lt}function tj(ft,lt,dt,vt){return vt!==null&&Jg(vt),Bh(lt,ft.child,null,dt),ft=rj(lt,lt.pendingProps.children),ft.flags|=2,lt.memoizedState=null,ft}function sj(ft,lt,dt,vt,St,Et,Ct){if(dt)return lt.flags&256?(lt.flags&=-257,vt=Li(Error(p$8(422))),tj(ft,lt,Ct,vt)):lt.memoizedState!==null?(lt.child=ft.child,lt.flags|=128,null):(Et=vt.fallback,St=lt.mode,vt=qj({mode:"visible",children:vt.children},St,0,null),Et=Ah(Et,St,Ct,null),Et.flags|=2,vt.return=lt,Et.return=lt,vt.sibling=Et,lt.child=vt,lt.mode&1&&Bh(lt,ft.child,null,Ct),lt.child.memoizedState=oj(Ct),lt.memoizedState=nj,Et);if(!(lt.mode&1))return tj(ft,lt,Ct,null);if(St.data==="$!"){if(vt=St.nextSibling&&St.nextSibling.dataset,vt)var At=vt.dgst;return vt=At,Et=Error(p$8(419)),vt=Li(Et,vt,void 0),tj(ft,lt,Ct,vt)}if(At=(Ct&ft.childLanes)!==0,Ug||At){if(vt=R$3,vt!==null){switch(Ct&-Ct){case 4:St=2;break;case 16:St=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:St=32;break;case 536870912:St=268435456;break;default:St=0}St=St&(vt.suspendedLanes|Ct)?0:St,St!==0&&St!==Et.retryLane&&(Et.retryLane=St,Zg(ft,St),mh(vt,ft,St,-1))}return uj(),vt=Li(Error(p$8(421))),tj(ft,lt,Ct,vt)}return St.data==="$?"?(lt.flags|=128,lt.child=ft.child,lt=vj.bind(null,ft),St._reactRetry=lt,null):(ft=Et.treeContext,yg=Lf(St.nextSibling),xg=lt,I$4=!0,zg=null,ft!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=ft.id,sg=ft.overflow,qg=lt),lt=rj(lt,vt.children),lt.flags|=4096,lt)}function wj(ft,lt,dt){ft.lanes|=lt;var vt=ft.alternate;vt!==null&&(vt.lanes|=lt),Sg(ft.return,lt,dt)}function xj(ft,lt,dt,vt,St){var Et=ft.memoizedState;Et===null?ft.memoizedState={isBackwards:lt,rendering:null,renderingStartTime:0,last:vt,tail:dt,tailMode:St}:(Et.isBackwards=lt,Et.rendering=null,Et.renderingStartTime=0,Et.last=vt,Et.tail=dt,Et.tailMode=St)}function yj(ft,lt,dt){var vt=lt.pendingProps,St=vt.revealOrder,Et=vt.tail;if(Yi(ft,lt,vt.children,dt),vt=M$2.current,vt&2)vt=vt&1|2,lt.flags|=128;else{if(ft!==null&&ft.flags&128)e:for(ft=lt.child;ft!==null;){if(ft.tag===13)ft.memoizedState!==null&&wj(ft,dt,lt);else if(ft.tag===19)wj(ft,dt,lt);else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===lt)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===lt)break e;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}vt&=1}if(G$1(M$2,vt),!(lt.mode&1))lt.memoizedState=null;else switch(St){case"forwards":for(dt=lt.child,St=null;dt!==null;)ft=dt.alternate,ft!==null&&Mh(ft)===null&&(St=dt),dt=dt.sibling;dt=St,dt===null?(St=lt.child,lt.child=null):(St=dt.sibling,dt.sibling=null),xj(lt,!1,St,dt,Et);break;case"backwards":for(dt=null,St=lt.child,lt.child=null;St!==null;){if(ft=St.alternate,ft!==null&&Mh(ft)===null){lt.child=St;break}ft=St.sibling,St.sibling=dt,dt=St,St=ft}xj(lt,!0,dt,null,Et);break;case"together":xj(lt,!1,null,null,void 0);break;default:lt.memoizedState=null}return lt.child}function jj(ft,lt){!(lt.mode&1)&&ft!==null&&(ft.alternate=null,lt.alternate=null,lt.flags|=2)}function $i(ft,lt,dt){if(ft!==null&&(lt.dependencies=ft.dependencies),hh|=lt.lanes,!(dt&lt.childLanes))return null;if(ft!==null&&lt.child!==ft.child)throw Error(p$8(153));if(lt.child!==null){for(ft=lt.child,dt=wh(ft,ft.pendingProps),lt.child=dt,dt.return=lt;ft.sibling!==null;)ft=ft.sibling,dt=dt.sibling=wh(ft,ft.pendingProps),dt.return=lt;dt.sibling=null}return lt.child}function zj(ft,lt,dt){switch(lt.tag){case 3:lj(lt),Ig();break;case 5:Kh(lt);break;case 1:Zf(lt.type)&&cg(lt);break;case 4:Ih(lt,lt.stateNode.containerInfo);break;case 10:var vt=lt.type._context,St=lt.memoizedProps.value;G$1(Mg,vt._currentValue),vt._currentValue=St;break;case 13:if(vt=lt.memoizedState,vt!==null)return vt.dehydrated!==null?(G$1(M$2,M$2.current&1),lt.flags|=128,null):dt&lt.child.childLanes?pj(ft,lt,dt):(G$1(M$2,M$2.current&1),ft=$i(ft,lt,dt),ft!==null?ft.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(vt=(dt&lt.childLanes)!==0,ft.flags&128){if(vt)return yj(ft,lt,dt);lt.flags|=128}if(St=lt.memoizedState,St!==null&&(St.rendering=null,St.tail=null,St.lastEffect=null),G$1(M$2,M$2.current),vt)break;return null;case 22:case 23:return lt.lanes=0,ej(ft,lt,dt)}return $i(ft,lt,dt)}var Aj,Bj,Cj,Dj;Aj=function(ft,lt){for(var dt=lt.child;dt!==null;){if(dt.tag===5||dt.tag===6)ft.appendChild(dt.stateNode);else if(dt.tag!==4&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===lt)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===lt)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}};Bj=function(){};Cj=function(ft,lt,dt,vt){var St=ft.memoizedProps;if(St!==vt){ft=lt.stateNode,Hh(Eh.current);var Et=null;switch(dt){case"input":St=Ya(ft,St),vt=Ya(ft,vt),Et=[];break;case"select":St=A$4({},St,{value:void 0}),vt=A$4({},vt,{value:void 0}),Et=[];break;case"textarea":St=gb(ft,St),vt=gb(ft,vt),Et=[];break;default:typeof St.onClick!="function"&&typeof vt.onClick=="function"&&(ft.onclick=Bf)}ub(dt,vt);var Ct;dt=null;for(Dt in St)if(!vt.hasOwnProperty(Dt)&&St.hasOwnProperty(Dt)&&St[Dt]!=null)if(Dt==="style"){var At=St[Dt];for(Ct in At)At.hasOwnProperty(Ct)&&(dt||(dt={}),dt[Ct]="")}else Dt!=="dangerouslySetInnerHTML"&&Dt!=="children"&&Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(ea.hasOwnProperty(Dt)?Et||(Et=[]):(Et=Et||[]).push(Dt,null));for(Dt in vt){var Rt=vt[Dt];if(At=St!=null?St[Dt]:void 0,vt.hasOwnProperty(Dt)&&Rt!==At&&(Rt!=null||At!=null))if(Dt==="style")if(At){for(Ct in At)!At.hasOwnProperty(Ct)||Rt&&Rt.hasOwnProperty(Ct)||(dt||(dt={}),dt[Ct]="");for(Ct in Rt)Rt.hasOwnProperty(Ct)&&At[Ct]!==Rt[Ct]&&(dt||(dt={}),dt[Ct]=Rt[Ct])}else dt||(Et||(Et=[]),Et.push(Dt,dt)),dt=Rt;else Dt==="dangerouslySetInnerHTML"?(Rt=Rt?Rt.__html:void 0,At=At?At.__html:void 0,Rt!=null&&At!==Rt&&(Et=Et||[]).push(Dt,Rt)):Dt==="children"?typeof Rt!="string"&&typeof Rt!="number"||(Et=Et||[]).push(Dt,""+Rt):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Dt)?(Rt!=null&&Dt==="onScroll"&&D$6("scroll",ft),Et||At===Rt||(Et=[])):(Et=Et||[]).push(Dt,Rt))}dt&&(Et=Et||[]).push("style",dt);var Dt=Et;(lt.updateQueue=Dt)&&(lt.flags|=4)}};Dj=function(ft,lt,dt,vt){dt!==vt&&(lt.flags|=4)};function Ej(ft,lt){if(!I$4)switch(ft.tailMode){case"hidden":lt=ft.tail;for(var dt=null;lt!==null;)lt.alternate!==null&&(dt=lt),lt=lt.sibling;dt===null?ft.tail=null:dt.sibling=null;break;case"collapsed":dt=ft.tail;for(var vt=null;dt!==null;)dt.alternate!==null&&(vt=dt),dt=dt.sibling;vt===null?lt||ft.tail===null?ft.tail=null:ft.tail.sibling=null:vt.sibling=null}}function S$3(ft){var lt=ft.alternate!==null&&ft.alternate.child===ft.child,dt=0,vt=0;if(lt)for(var St=ft.child;St!==null;)dt|=St.lanes|St.childLanes,vt|=St.subtreeFlags&14680064,vt|=St.flags&14680064,St.return=ft,St=St.sibling;else for(St=ft.child;St!==null;)dt|=St.lanes|St.childLanes,vt|=St.subtreeFlags,vt|=St.flags,St.return=ft,St=St.sibling;return ft.subtreeFlags|=vt,ft.childLanes=dt,lt}function Fj(ft,lt,dt){var vt=lt.pendingProps;switch(wg(lt),lt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(lt),null;case 1:return Zf(lt.type)&&$f(),S$3(lt),null;case 3:return vt=lt.stateNode,Jh(),E$6(Wf),E$6(H$5),Oh(),vt.pendingContext&&(vt.context=vt.pendingContext,vt.pendingContext=null),(ft===null||ft.child===null)&&(Gg(lt)?lt.flags|=4:ft===null||ft.memoizedState.isDehydrated&&!(lt.flags&256)||(lt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(ft,lt),S$3(lt),null;case 5:Lh(lt);var St=Hh(Gh.current);if(dt=lt.type,ft!==null&&lt.stateNode!=null)Cj(ft,lt,dt,vt,St),ft.ref!==lt.ref&&(lt.flags|=512,lt.flags|=2097152);else{if(!vt){if(lt.stateNode===null)throw Error(p$8(166));return S$3(lt),null}if(ft=Hh(Eh.current),Gg(lt)){vt=lt.stateNode,dt=lt.type;var Et=lt.memoizedProps;switch(vt[Of]=lt,vt[Pf]=Et,ft=(lt.mode&1)!==0,dt){case"dialog":D$6("cancel",vt),D$6("close",vt);break;case"iframe":case"object":case"embed":D$6("load",vt);break;case"video":case"audio":for(St=0;St<lf.length;St++)D$6(lf[St],vt);break;case"source":D$6("error",vt);break;case"img":case"image":case"link":D$6("error",vt),D$6("load",vt);break;case"details":D$6("toggle",vt);break;case"input":Za(vt,Et),D$6("invalid",vt);break;case"select":vt._wrapperState={wasMultiple:!!Et.multiple},D$6("invalid",vt);break;case"textarea":hb(vt,Et),D$6("invalid",vt)}ub(dt,Et),St=null;for(var Ct in Et)if(Et.hasOwnProperty(Ct)){var At=Et[Ct];Ct==="children"?typeof At=="string"?vt.textContent!==At&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,At,ft),St=["children",At]):typeof At=="number"&&vt.textContent!==""+At&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,At,ft),St=["children",""+At]):ea.hasOwnProperty(Ct)&&At!=null&&Ct==="onScroll"&&D$6("scroll",vt)}switch(dt){case"input":Va(vt),db(vt,Et,!0);break;case"textarea":Va(vt),jb(vt);break;case"select":case"option":break;default:typeof Et.onClick=="function"&&(vt.onclick=Bf)}vt=St,lt.updateQueue=vt,vt!==null&&(lt.flags|=4)}else{Ct=St.nodeType===9?St:St.ownerDocument,ft==="http://www.w3.org/1999/xhtml"&&(ft=kb(dt)),ft==="http://www.w3.org/1999/xhtml"?dt==="script"?(ft=Ct.createElement("div"),ft.innerHTML="<script><\/script>",ft=ft.removeChild(ft.firstChild)):typeof vt.is=="string"?ft=Ct.createElement(dt,{is:vt.is}):(ft=Ct.createElement(dt),dt==="select"&&(Ct=ft,vt.multiple?Ct.multiple=!0:vt.size&&(Ct.size=vt.size))):ft=Ct.createElementNS(ft,dt),ft[Of]=lt,ft[Pf]=vt,Aj(ft,lt,!1,!1),lt.stateNode=ft;e:{switch(Ct=vb(dt,vt),dt){case"dialog":D$6("cancel",ft),D$6("close",ft),St=vt;break;case"iframe":case"object":case"embed":D$6("load",ft),St=vt;break;case"video":case"audio":for(St=0;St<lf.length;St++)D$6(lf[St],ft);St=vt;break;case"source":D$6("error",ft),St=vt;break;case"img":case"image":case"link":D$6("error",ft),D$6("load",ft),St=vt;break;case"details":D$6("toggle",ft),St=vt;break;case"input":Za(ft,vt),St=Ya(ft,vt),D$6("invalid",ft);break;case"option":St=vt;break;case"select":ft._wrapperState={wasMultiple:!!vt.multiple},St=A$4({},vt,{value:void 0}),D$6("invalid",ft);break;case"textarea":hb(ft,vt),St=gb(ft,vt),D$6("invalid",ft);break;default:St=vt}ub(dt,St),At=St;for(Et in At)if(At.hasOwnProperty(Et)){var Rt=At[Et];Et==="style"?sb(ft,Rt):Et==="dangerouslySetInnerHTML"?(Rt=Rt?Rt.__html:void 0,Rt!=null&&nb(ft,Rt)):Et==="children"?typeof Rt=="string"?(dt!=="textarea"||Rt!=="")&&ob(ft,Rt):typeof Rt=="number"&&ob(ft,""+Rt):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(ea.hasOwnProperty(Et)?Rt!=null&&Et==="onScroll"&&D$6("scroll",ft):Rt!=null&&ta(ft,Et,Rt,Ct))}switch(dt){case"input":Va(ft),db(ft,vt,!1);break;case"textarea":Va(ft),jb(ft);break;case"option":vt.value!=null&&ft.setAttribute("value",""+Sa(vt.value));break;case"select":ft.multiple=!!vt.multiple,Et=vt.value,Et!=null?fb(ft,!!vt.multiple,Et,!1):vt.defaultValue!=null&&fb(ft,!!vt.multiple,vt.defaultValue,!0);break;default:typeof St.onClick=="function"&&(ft.onclick=Bf)}switch(dt){case"button":case"input":case"select":case"textarea":vt=!!vt.autoFocus;break e;case"img":vt=!0;break e;default:vt=!1}}vt&&(lt.flags|=4)}lt.ref!==null&&(lt.flags|=512,lt.flags|=2097152)}return S$3(lt),null;case 6:if(ft&&lt.stateNode!=null)Dj(ft,lt,ft.memoizedProps,vt);else{if(typeof vt!="string"&&lt.stateNode===null)throw Error(p$8(166));if(dt=Hh(Gh.current),Hh(Eh.current),Gg(lt)){if(vt=lt.stateNode,dt=lt.memoizedProps,vt[Of]=lt,(Et=vt.nodeValue!==dt)&&(ft=xg,ft!==null))switch(ft.tag){case 3:Af(vt.nodeValue,dt,(ft.mode&1)!==0);break;case 5:ft.memoizedProps.suppressHydrationWarning!==!0&&Af(vt.nodeValue,dt,(ft.mode&1)!==0)}Et&&(lt.flags|=4)}else vt=(dt.nodeType===9?dt:dt.ownerDocument).createTextNode(vt),vt[Of]=lt,lt.stateNode=vt}return S$3(lt),null;case 13:if(E$6(M$2),vt=lt.memoizedState,ft===null||ft.memoizedState!==null&&ft.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&lt.mode&1&&!(lt.flags&128))Hg(),Ig(),lt.flags|=98560,Et=!1;else if(Et=Gg(lt),vt!==null&&vt.dehydrated!==null){if(ft===null){if(!Et)throw Error(p$8(318));if(Et=lt.memoizedState,Et=Et!==null?Et.dehydrated:null,!Et)throw Error(p$8(317));Et[Of]=lt}else Ig(),!(lt.flags&128)&&(lt.memoizedState=null),lt.flags|=4;S$3(lt),Et=!1}else zg!==null&&(Gj(zg),zg=null),Et=!0;if(!Et)return lt.flags&65536?lt:null}return lt.flags&128?(lt.lanes=dt,lt):(vt=vt!==null,vt!==(ft!==null&&ft.memoizedState!==null)&&vt&&(lt.child.flags|=8192,lt.mode&1&&(ft===null||M$2.current&1?T$3===0&&(T$3=3):uj())),lt.updateQueue!==null&&(lt.flags|=4),S$3(lt),null);case 4:return Jh(),Bj(ft,lt),ft===null&&sf(lt.stateNode.containerInfo),S$3(lt),null;case 10:return Rg(lt.type._context),S$3(lt),null;case 17:return Zf(lt.type)&&$f(),S$3(lt),null;case 19:if(E$6(M$2),Et=lt.memoizedState,Et===null)return S$3(lt),null;if(vt=(lt.flags&128)!==0,Ct=Et.rendering,Ct===null)if(vt)Ej(Et,!1);else{if(T$3!==0||ft!==null&&ft.flags&128)for(ft=lt.child;ft!==null;){if(Ct=Mh(ft),Ct!==null){for(lt.flags|=128,Ej(Et,!1),vt=Ct.updateQueue,vt!==null&&(lt.updateQueue=vt,lt.flags|=4),lt.subtreeFlags=0,vt=dt,dt=lt.child;dt!==null;)Et=dt,ft=vt,Et.flags&=14680066,Ct=Et.alternate,Ct===null?(Et.childLanes=0,Et.lanes=ft,Et.child=null,Et.subtreeFlags=0,Et.memoizedProps=null,Et.memoizedState=null,Et.updateQueue=null,Et.dependencies=null,Et.stateNode=null):(Et.childLanes=Ct.childLanes,Et.lanes=Ct.lanes,Et.child=Ct.child,Et.subtreeFlags=0,Et.deletions=null,Et.memoizedProps=Ct.memoizedProps,Et.memoizedState=Ct.memoizedState,Et.updateQueue=Ct.updateQueue,Et.type=Ct.type,ft=Ct.dependencies,Et.dependencies=ft===null?null:{lanes:ft.lanes,firstContext:ft.firstContext}),dt=dt.sibling;return G$1(M$2,M$2.current&1|2),lt.child}ft=ft.sibling}Et.tail!==null&&B$2()>Hj&&(lt.flags|=128,vt=!0,Ej(Et,!1),lt.lanes=4194304)}else{if(!vt)if(ft=Mh(Ct),ft!==null){if(lt.flags|=128,vt=!0,dt=ft.updateQueue,dt!==null&&(lt.updateQueue=dt,lt.flags|=4),Ej(Et,!0),Et.tail===null&&Et.tailMode==="hidden"&&!Ct.alternate&&!I$4)return S$3(lt),null}else 2*B$2()-Et.renderingStartTime>Hj&&dt!==1073741824&&(lt.flags|=128,vt=!0,Ej(Et,!1),lt.lanes=4194304);Et.isBackwards?(Ct.sibling=lt.child,lt.child=Ct):(dt=Et.last,dt!==null?dt.sibling=Ct:lt.child=Ct,Et.last=Ct)}return Et.tail!==null?(lt=Et.tail,Et.rendering=lt,Et.tail=lt.sibling,Et.renderingStartTime=B$2(),lt.sibling=null,dt=M$2.current,G$1(M$2,vt?dt&1|2:dt&1),lt):(S$3(lt),null);case 22:case 23:return Ij(),vt=lt.memoizedState!==null,ft!==null&&ft.memoizedState!==null!==vt&&(lt.flags|=8192),vt&&lt.mode&1?gj&1073741824&&(S$3(lt),lt.subtreeFlags&6&&(lt.flags|=8192)):S$3(lt),null;case 24:return null;case 25:return null}throw Error(p$8(156,lt.tag))}function Jj(ft,lt){switch(wg(lt),lt.tag){case 1:return Zf(lt.type)&&$f(),ft=lt.flags,ft&65536?(lt.flags=ft&-65537|128,lt):null;case 3:return Jh(),E$6(Wf),E$6(H$5),Oh(),ft=lt.flags,ft&65536&&!(ft&128)?(lt.flags=ft&-65537|128,lt):null;case 5:return Lh(lt),null;case 13:if(E$6(M$2),ft=lt.memoizedState,ft!==null&&ft.dehydrated!==null){if(lt.alternate===null)throw Error(p$8(340));Ig()}return ft=lt.flags,ft&65536?(lt.flags=ft&-65537|128,lt):null;case 19:return E$6(M$2),null;case 4:return Jh(),null;case 10:return Rg(lt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(ft,lt){var dt=ft.ref;if(dt!==null)if(typeof dt=="function")try{dt(null)}catch(vt){W$4(ft,lt,vt)}else dt.current=null}function Nj(ft,lt,dt){try{dt()}catch(vt){W$4(ft,lt,vt)}}var Oj=!1;function Pj(ft,lt){if(Cf=dd,ft=Me$1(),Ne$2(ft)){if("selectionStart"in ft)var dt={start:ft.selectionStart,end:ft.selectionEnd};else e:{dt=(dt=ft.ownerDocument)&&dt.defaultView||window;var vt=dt.getSelection&&dt.getSelection();if(vt&&vt.rangeCount!==0){dt=vt.anchorNode;var St=vt.anchorOffset,Et=vt.focusNode;vt=vt.focusOffset;try{dt.nodeType,Et.nodeType}catch{dt=null;break e}var Ct=0,At=-1,Rt=-1,Dt=0,Nt=0,Ft=ft,Ut=null;t:for(;;){for(var Wt;Ft!==dt||St!==0&&Ft.nodeType!==3||(At=Ct+St),Ft!==Et||vt!==0&&Ft.nodeType!==3||(Rt=Ct+vt),Ft.nodeType===3&&(Ct+=Ft.nodeValue.length),(Wt=Ft.firstChild)!==null;)Ut=Ft,Ft=Wt;for(;;){if(Ft===ft)break t;if(Ut===dt&&++Dt===St&&(At=Ct),Ut===Et&&++Nt===vt&&(Rt=Ct),(Wt=Ft.nextSibling)!==null)break;Ft=Ut,Ut=Ft.parentNode}Ft=Wt}dt=At===-1||Rt===-1?null:{start:At,end:Rt}}else dt=null}dt=dt||{start:0,end:0}}else dt=null;for(Df={focusedElem:ft,selectionRange:dt},dd=!1,V$3=lt;V$3!==null;)if(lt=V$3,ft=lt.child,(lt.subtreeFlags&1028)!==0&&ft!==null)ft.return=lt,V$3=ft;else for(;V$3!==null;){lt=V$3;try{var Zt=lt.alternate;if(lt.flags&1024)switch(lt.tag){case 0:case 11:case 15:break;case 1:if(Zt!==null){var Kt=Zt.memoizedProps,cn=Zt.memoizedState,hn=lt.stateNode,dn=hn.getSnapshotBeforeUpdate(lt.elementType===lt.type?Kt:Lg(lt.type,Kt),cn);hn.__reactInternalSnapshotBeforeUpdate=dn}break;case 3:var pn=lt.stateNode.containerInfo;pn.nodeType===1?pn.textContent="":pn.nodeType===9&&pn.documentElement&&pn.removeChild(pn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$8(163))}}catch(gn){W$4(lt,lt.return,gn)}if(ft=lt.sibling,ft!==null){ft.return=lt.return,V$3=ft;break}V$3=lt.return}return Zt=Oj,Oj=!1,Zt}function Qj(ft,lt,dt){var vt=lt.updateQueue;if(vt=vt!==null?vt.lastEffect:null,vt!==null){var St=vt=vt.next;do{if((St.tag&ft)===ft){var Et=St.destroy;St.destroy=void 0,Et!==void 0&&Nj(lt,dt,Et)}St=St.next}while(St!==vt)}}function Rj(ft,lt){if(lt=lt.updateQueue,lt=lt!==null?lt.lastEffect:null,lt!==null){var dt=lt=lt.next;do{if((dt.tag&ft)===ft){var vt=dt.create;dt.destroy=vt()}dt=dt.next}while(dt!==lt)}}function Sj(ft){var lt=ft.ref;if(lt!==null){var dt=ft.stateNode;switch(ft.tag){case 5:ft=dt;break;default:ft=dt}typeof lt=="function"?lt(ft):lt.current=ft}}function Tj(ft){var lt=ft.alternate;lt!==null&&(ft.alternate=null,Tj(lt)),ft.child=null,ft.deletions=null,ft.sibling=null,ft.tag===5&&(lt=ft.stateNode,lt!==null&&(delete lt[Of],delete lt[Pf],delete lt[of],delete lt[Qf],delete lt[Rf])),ft.stateNode=null,ft.return=null,ft.dependencies=null,ft.memoizedProps=null,ft.memoizedState=null,ft.pendingProps=null,ft.stateNode=null,ft.updateQueue=null}function Uj(ft){return ft.tag===5||ft.tag===3||ft.tag===4}function Vj(ft){e:for(;;){for(;ft.sibling===null;){if(ft.return===null||Uj(ft.return))return null;ft=ft.return}for(ft.sibling.return=ft.return,ft=ft.sibling;ft.tag!==5&&ft.tag!==6&&ft.tag!==18;){if(ft.flags&2||ft.child===null||ft.tag===4)continue e;ft.child.return=ft,ft=ft.child}if(!(ft.flags&2))return ft.stateNode}}function Wj(ft,lt,dt){var vt=ft.tag;if(vt===5||vt===6)ft=ft.stateNode,lt?dt.nodeType===8?dt.parentNode.insertBefore(ft,lt):dt.insertBefore(ft,lt):(dt.nodeType===8?(lt=dt.parentNode,lt.insertBefore(ft,dt)):(lt=dt,lt.appendChild(ft)),dt=dt._reactRootContainer,dt!=null||lt.onclick!==null||(lt.onclick=Bf));else if(vt!==4&&(ft=ft.child,ft!==null))for(Wj(ft,lt,dt),ft=ft.sibling;ft!==null;)Wj(ft,lt,dt),ft=ft.sibling}function Xj(ft,lt,dt){var vt=ft.tag;if(vt===5||vt===6)ft=ft.stateNode,lt?dt.insertBefore(ft,lt):dt.appendChild(ft);else if(vt!==4&&(ft=ft.child,ft!==null))for(Xj(ft,lt,dt),ft=ft.sibling;ft!==null;)Xj(ft,lt,dt),ft=ft.sibling}var X$2=null,Yj=!1;function Zj(ft,lt,dt){for(dt=dt.child;dt!==null;)ak(ft,lt,dt),dt=dt.sibling}function ak(ft,lt,dt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,dt)}catch{}switch(dt.tag){case 5:U$2||Mj(dt,lt);case 6:var vt=X$2,St=Yj;X$2=null,Zj(ft,lt,dt),X$2=vt,Yj=St,X$2!==null&&(Yj?(ft=X$2,dt=dt.stateNode,ft.nodeType===8?ft.parentNode.removeChild(dt):ft.removeChild(dt)):X$2.removeChild(dt.stateNode));break;case 18:X$2!==null&&(Yj?(ft=X$2,dt=dt.stateNode,ft.nodeType===8?Kf(ft.parentNode,dt):ft.nodeType===1&&Kf(ft,dt),bd(ft)):Kf(X$2,dt.stateNode));break;case 4:vt=X$2,St=Yj,X$2=dt.stateNode.containerInfo,Yj=!0,Zj(ft,lt,dt),X$2=vt,Yj=St;break;case 0:case 11:case 14:case 15:if(!U$2&&(vt=dt.updateQueue,vt!==null&&(vt=vt.lastEffect,vt!==null))){St=vt=vt.next;do{var Et=St,Ct=Et.destroy;Et=Et.tag,Ct!==void 0&&(Et&2||Et&4)&&Nj(dt,lt,Ct),St=St.next}while(St!==vt)}Zj(ft,lt,dt);break;case 1:if(!U$2&&(Mj(dt,lt),vt=dt.stateNode,typeof vt.componentWillUnmount=="function"))try{vt.props=dt.memoizedProps,vt.state=dt.memoizedState,vt.componentWillUnmount()}catch(At){W$4(dt,lt,At)}Zj(ft,lt,dt);break;case 21:Zj(ft,lt,dt);break;case 22:dt.mode&1?(U$2=(vt=U$2)||dt.memoizedState!==null,Zj(ft,lt,dt),U$2=vt):Zj(ft,lt,dt);break;default:Zj(ft,lt,dt)}}function bk(ft){var lt=ft.updateQueue;if(lt!==null){ft.updateQueue=null;var dt=ft.stateNode;dt===null&&(dt=ft.stateNode=new Lj),lt.forEach(function(vt){var St=ck.bind(null,ft,vt);dt.has(vt)||(dt.add(vt),vt.then(St,St))})}}function dk(ft,lt){var dt=lt.deletions;if(dt!==null)for(var vt=0;vt<dt.length;vt++){var St=dt[vt];try{var Et=ft,Ct=lt,At=Ct;e:for(;At!==null;){switch(At.tag){case 5:X$2=At.stateNode,Yj=!1;break e;case 3:X$2=At.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=At.stateNode.containerInfo,Yj=!0;break e}At=At.return}if(X$2===null)throw Error(p$8(160));ak(Et,Ct,St),X$2=null,Yj=!1;var Rt=St.alternate;Rt!==null&&(Rt.return=null),St.return=null}catch(Dt){W$4(St,lt,Dt)}}if(lt.subtreeFlags&12854)for(lt=lt.child;lt!==null;)ek(lt,ft),lt=lt.sibling}function ek(ft,lt){var dt=ft.alternate,vt=ft.flags;switch(ft.tag){case 0:case 11:case 14:case 15:if(dk(lt,ft),fk(ft),vt&4){try{Qj(3,ft,ft.return),Rj(3,ft)}catch(Kt){W$4(ft,ft.return,Kt)}try{Qj(5,ft,ft.return)}catch(Kt){W$4(ft,ft.return,Kt)}}break;case 1:dk(lt,ft),fk(ft),vt&512&&dt!==null&&Mj(dt,dt.return);break;case 5:if(dk(lt,ft),fk(ft),vt&512&&dt!==null&&Mj(dt,dt.return),ft.flags&32){var St=ft.stateNode;try{ob(St,"")}catch(Kt){W$4(ft,ft.return,Kt)}}if(vt&4&&(St=ft.stateNode,St!=null)){var Et=ft.memoizedProps,Ct=dt!==null?dt.memoizedProps:Et,At=ft.type,Rt=ft.updateQueue;if(ft.updateQueue=null,Rt!==null)try{At==="input"&&Et.type==="radio"&&Et.name!=null&&ab(St,Et),vb(At,Ct);var Dt=vb(At,Et);for(Ct=0;Ct<Rt.length;Ct+=2){var Nt=Rt[Ct],Ft=Rt[Ct+1];Nt==="style"?sb(St,Ft):Nt==="dangerouslySetInnerHTML"?nb(St,Ft):Nt==="children"?ob(St,Ft):ta(St,Nt,Ft,Dt)}switch(At){case"input":bb(St,Et);break;case"textarea":ib(St,Et);break;case"select":var Ut=St._wrapperState.wasMultiple;St._wrapperState.wasMultiple=!!Et.multiple;var Wt=Et.value;Wt!=null?fb(St,!!Et.multiple,Wt,!1):Ut!==!!Et.multiple&&(Et.defaultValue!=null?fb(St,!!Et.multiple,Et.defaultValue,!0):fb(St,!!Et.multiple,Et.multiple?[]:"",!1))}St[Pf]=Et}catch(Kt){W$4(ft,ft.return,Kt)}}break;case 6:if(dk(lt,ft),fk(ft),vt&4){if(ft.stateNode===null)throw Error(p$8(162));St=ft.stateNode,Et=ft.memoizedProps;try{St.nodeValue=Et}catch(Kt){W$4(ft,ft.return,Kt)}}break;case 3:if(dk(lt,ft),fk(ft),vt&4&&dt!==null&&dt.memoizedState.isDehydrated)try{bd(lt.containerInfo)}catch(Kt){W$4(ft,ft.return,Kt)}break;case 4:dk(lt,ft),fk(ft);break;case 13:dk(lt,ft),fk(ft),St=ft.child,St.flags&8192&&(Et=St.memoizedState!==null,St.stateNode.isHidden=Et,!Et||St.alternate!==null&&St.alternate.memoizedState!==null||(gk=B$2())),vt&4&&bk(ft);break;case 22:if(Nt=dt!==null&&dt.memoizedState!==null,ft.mode&1?(U$2=(Dt=U$2)||Nt,dk(lt,ft),U$2=Dt):dk(lt,ft),fk(ft),vt&8192){if(Dt=ft.memoizedState!==null,(ft.stateNode.isHidden=Dt)&&!Nt&&ft.mode&1)for(V$3=ft,Nt=ft.child;Nt!==null;){for(Ft=V$3=Nt;V$3!==null;){switch(Ut=V$3,Wt=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:Qj(4,Ut,Ut.return);break;case 1:Mj(Ut,Ut.return);var Zt=Ut.stateNode;if(typeof Zt.componentWillUnmount=="function"){vt=Ut,dt=Ut.return;try{lt=vt,Zt.props=lt.memoizedProps,Zt.state=lt.memoizedState,Zt.componentWillUnmount()}catch(Kt){W$4(vt,dt,Kt)}}break;case 5:Mj(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){hk(Ft);continue}}Wt!==null?(Wt.return=Ut,V$3=Wt):hk(Ft)}Nt=Nt.sibling}e:for(Nt=null,Ft=ft;;){if(Ft.tag===5){if(Nt===null){Nt=Ft;try{St=Ft.stateNode,Dt?(Et=St.style,typeof Et.setProperty=="function"?Et.setProperty("display","none","important"):Et.display="none"):(At=Ft.stateNode,Rt=Ft.memoizedProps.style,Ct=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null,At.style.display=rb("display",Ct))}catch(Kt){W$4(ft,ft.return,Kt)}}}else if(Ft.tag===6){if(Nt===null)try{Ft.stateNode.nodeValue=Dt?"":Ft.memoizedProps}catch(Kt){W$4(ft,ft.return,Kt)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===ft)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===ft)break e;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===ft)break e;Nt===Ft&&(Nt=null),Ft=Ft.return}Nt===Ft&&(Nt=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}break;case 19:dk(lt,ft),fk(ft),vt&4&&bk(ft);break;case 21:break;default:dk(lt,ft),fk(ft)}}function fk(ft){var lt=ft.flags;if(lt&2){try{e:{for(var dt=ft.return;dt!==null;){if(Uj(dt)){var vt=dt;break e}dt=dt.return}throw Error(p$8(160))}switch(vt.tag){case 5:var St=vt.stateNode;vt.flags&32&&(ob(St,""),vt.flags&=-33);var Et=Vj(ft);Xj(ft,Et,St);break;case 3:case 4:var Ct=vt.stateNode.containerInfo,At=Vj(ft);Wj(ft,At,Ct);break;default:throw Error(p$8(161))}}catch(Rt){W$4(ft,ft.return,Rt)}ft.flags&=-3}lt&4096&&(ft.flags&=-4097)}function ik(ft,lt,dt){V$3=ft,jk(ft)}function jk(ft,lt,dt){for(var vt=(ft.mode&1)!==0;V$3!==null;){var St=V$3,Et=St.child;if(St.tag===22&&vt){var Ct=St.memoizedState!==null||Kj;if(!Ct){var At=St.alternate,Rt=At!==null&&At.memoizedState!==null||U$2;At=Kj;var Dt=U$2;if(Kj=Ct,(U$2=Rt)&&!Dt)for(V$3=St;V$3!==null;)Ct=V$3,Rt=Ct.child,Ct.tag===22&&Ct.memoizedState!==null?kk(St):Rt!==null?(Rt.return=Ct,V$3=Rt):kk(St);for(;Et!==null;)V$3=Et,jk(Et),Et=Et.sibling;V$3=St,Kj=At,U$2=Dt}lk(ft)}else St.subtreeFlags&8772&&Et!==null?(Et.return=St,V$3=Et):lk(ft)}}function lk(ft){for(;V$3!==null;){var lt=V$3;if(lt.flags&8772){var dt=lt.alternate;try{if(lt.flags&8772)switch(lt.tag){case 0:case 11:case 15:U$2||Rj(5,lt);break;case 1:var vt=lt.stateNode;if(lt.flags&4&&!U$2)if(dt===null)vt.componentDidMount();else{var St=lt.elementType===lt.type?dt.memoizedProps:Lg(lt.type,dt.memoizedProps);vt.componentDidUpdate(St,dt.memoizedState,vt.__reactInternalSnapshotBeforeUpdate)}var Et=lt.updateQueue;Et!==null&&ih(lt,Et,vt);break;case 3:var Ct=lt.updateQueue;if(Ct!==null){if(dt=null,lt.child!==null)switch(lt.child.tag){case 5:dt=lt.child.stateNode;break;case 1:dt=lt.child.stateNode}ih(lt,Ct,dt)}break;case 5:var At=lt.stateNode;if(dt===null&&lt.flags&4){dt=At;var Rt=lt.memoizedProps;switch(lt.type){case"button":case"input":case"select":case"textarea":Rt.autoFocus&&dt.focus();break;case"img":Rt.src&&(dt.src=Rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(lt.memoizedState===null){var Dt=lt.alternate;if(Dt!==null){var Nt=Dt.memoizedState;if(Nt!==null){var Ft=Nt.dehydrated;Ft!==null&&bd(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$8(163))}U$2||lt.flags&512&&Sj(lt)}catch(Ut){W$4(lt,lt.return,Ut)}}if(lt===ft){V$3=null;break}if(dt=lt.sibling,dt!==null){dt.return=lt.return,V$3=dt;break}V$3=lt.return}}function hk(ft){for(;V$3!==null;){var lt=V$3;if(lt===ft){V$3=null;break}var dt=lt.sibling;if(dt!==null){dt.return=lt.return,V$3=dt;break}V$3=lt.return}}function kk(ft){for(;V$3!==null;){var lt=V$3;try{switch(lt.tag){case 0:case 11:case 15:var dt=lt.return;try{Rj(4,lt)}catch(Rt){W$4(lt,dt,Rt)}break;case 1:var vt=lt.stateNode;if(typeof vt.componentDidMount=="function"){var St=lt.return;try{vt.componentDidMount()}catch(Rt){W$4(lt,St,Rt)}}var Et=lt.return;try{Sj(lt)}catch(Rt){W$4(lt,Et,Rt)}break;case 5:var Ct=lt.return;try{Sj(lt)}catch(Rt){W$4(lt,Ct,Rt)}}}catch(Rt){W$4(lt,lt.return,Rt)}if(lt===ft){V$3=null;break}var At=lt.sibling;if(At!==null){At.return=lt.return,V$3=At;break}V$3=lt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$1=null,Z$2=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$3(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(ft){return ft.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(ft=C$4,ft!==0||(ft=window.event,ft=ft===void 0?16:jd(ft.type)),ft):1}function mh(ft,lt,dt,vt){if(50<zk)throw zk=0,Ak=null,Error(p$8(185));Ac(ft,dt,vt),(!(K$1&2)||ft!==R$3)&&(ft===R$3&&(!(K$1&2)&&(rk|=dt),T$3===4&&Dk(ft,Z$2)),Ek(ft,vt),dt===1&&K$1===0&&!(lt.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(ft,lt){var dt=ft.callbackNode;wc(ft,lt);var vt=uc(ft,ft===R$3?Z$2:0);if(vt===0)dt!==null&&bc(dt),ft.callbackNode=null,ft.callbackPriority=0;else if(lt=vt&-vt,ft.callbackPriority!==lt){if(dt!=null&&bc(dt),lt===1)ft.tag===0?ig(Fk.bind(null,ft)):hg(Fk.bind(null,ft)),Jf(function(){!(K$1&6)&&jg()}),dt=null;else{switch(Dc(vt)){case 1:dt=fc;break;case 4:dt=gc;break;case 16:dt=hc;break;case 536870912:dt=jc;break;default:dt=hc}dt=Gk(dt,Hk.bind(null,ft))}ft.callbackPriority=lt,ft.callbackNode=dt}}function Hk(ft,lt){if(Bk=-1,Ck=0,K$1&6)throw Error(p$8(327));var dt=ft.callbackNode;if(Ik()&&ft.callbackNode!==dt)return null;var vt=uc(ft,ft===R$3?Z$2:0);if(vt===0)return null;if(vt&30||vt&ft.expiredLanes||lt)lt=Jk(ft,vt);else{lt=vt;var St=K$1;K$1|=2;var Et=Kk();(R$3!==ft||Z$2!==lt)&&(vk=null,Hj=B$2()+500,Lk(ft,lt));do try{Mk();break}catch(At){Nk(ft,At)}while(1);Qg(),nk.current=Et,K$1=St,Y$1!==null?lt=0:(R$3=null,Z$2=0,lt=T$3)}if(lt!==0){if(lt===2&&(St=xc(ft),St!==0&&(vt=St,lt=Ok(ft,St))),lt===1)throw dt=qk,Lk(ft,0),Dk(ft,vt),Ek(ft,B$2()),dt;if(lt===6)Dk(ft,vt);else{if(St=ft.current.alternate,!(vt&30)&&!Pk(St)&&(lt=Jk(ft,vt),lt===2&&(Et=xc(ft),Et!==0&&(vt=Et,lt=Ok(ft,Et))),lt===1))throw dt=qk,Lk(ft,0),Dk(ft,vt),Ek(ft,B$2()),dt;switch(ft.finishedWork=St,ft.finishedLanes=vt,lt){case 0:case 1:throw Error(p$8(345));case 2:Qk(ft,uk,vk);break;case 3:if(Dk(ft,vt),(vt&130023424)===vt&&(lt=gk+500-B$2(),10<lt)){if(uc(ft,0)!==0)break;if(St=ft.suspendedLanes,(St&vt)!==vt){L$3(),ft.pingedLanes|=ft.suspendedLanes&St;break}ft.timeoutHandle=Ff(Qk.bind(null,ft,uk,vk),lt);break}Qk(ft,uk,vk);break;case 4:if(Dk(ft,vt),(vt&4194240)===vt)break;for(lt=ft.eventTimes,St=-1;0<vt;){var Ct=31-oc(vt);Et=1<<Ct,Ct=lt[Ct],Ct>St&&(St=Ct),vt&=~Et}if(vt=St,vt=B$2()-vt,vt=(120>vt?120:480>vt?480:1080>vt?1080:1920>vt?1920:3e3>vt?3e3:4320>vt?4320:1960*mk(vt/1960))-vt,10<vt){ft.timeoutHandle=Ff(Qk.bind(null,ft,uk,vk),vt);break}Qk(ft,uk,vk);break;case 5:Qk(ft,uk,vk);break;default:throw Error(p$8(329))}}}return Ek(ft,B$2()),ft.callbackNode===dt?Hk.bind(null,ft):null}function Ok(ft,lt){var dt=tk;return ft.current.memoizedState.isDehydrated&&(Lk(ft,lt).flags|=256),ft=Jk(ft,lt),ft!==2&&(lt=uk,uk=dt,lt!==null&&Gj(lt)),ft}function Gj(ft){uk===null?uk=ft:uk.push.apply(uk,ft)}function Pk(ft){for(var lt=ft;;){if(lt.flags&16384){var dt=lt.updateQueue;if(dt!==null&&(dt=dt.stores,dt!==null))for(var vt=0;vt<dt.length;vt++){var St=dt[vt],Et=St.getSnapshot;St=St.value;try{if(!He$2(Et(),St))return!1}catch{return!1}}}if(dt=lt.child,lt.subtreeFlags&16384&&dt!==null)dt.return=lt,lt=dt;else{if(lt===ft)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===ft)return!0;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}}return!0}function Dk(ft,lt){for(lt&=~sk,lt&=~rk,ft.suspendedLanes|=lt,ft.pingedLanes&=~lt,ft=ft.expirationTimes;0<lt;){var dt=31-oc(lt),vt=1<<dt;ft[dt]=-1,lt&=~vt}}function Fk(ft){if(K$1&6)throw Error(p$8(327));Ik();var lt=uc(ft,0);if(!(lt&1))return Ek(ft,B$2()),null;var dt=Jk(ft,lt);if(ft.tag!==0&&dt===2){var vt=xc(ft);vt!==0&&(lt=vt,dt=Ok(ft,vt))}if(dt===1)throw dt=qk,Lk(ft,0),Dk(ft,lt),Ek(ft,B$2()),dt;if(dt===6)throw Error(p$8(345));return ft.finishedWork=ft.current.alternate,ft.finishedLanes=lt,Qk(ft,uk,vk),Ek(ft,B$2()),null}function Rk(ft,lt){var dt=K$1;K$1|=1;try{return ft(lt)}finally{K$1=dt,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(ft){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var lt=K$1;K$1|=1;var dt=pk.transition,vt=C$4;try{if(pk.transition=null,C$4=1,ft)return ft()}finally{C$4=vt,pk.transition=dt,K$1=lt,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$6(fj)}function Lk(ft,lt){ft.finishedWork=null,ft.finishedLanes=0;var dt=ft.timeoutHandle;if(dt!==-1&&(ft.timeoutHandle=-1,Gf(dt)),Y$1!==null)for(dt=Y$1.return;dt!==null;){var vt=dt;switch(wg(vt),vt.tag){case 1:vt=vt.type.childContextTypes,vt!=null&&$f();break;case 3:Jh(),E$6(Wf),E$6(H$5),Oh();break;case 5:Lh(vt);break;case 4:Jh();break;case 13:E$6(M$2);break;case 19:E$6(M$2);break;case 10:Rg(vt.type._context);break;case 22:case 23:Ij()}dt=dt.return}if(R$3=ft,Y$1=ft=wh(ft.current,null),Z$2=gj=lt,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(lt=0;lt<Wg.length;lt++)if(dt=Wg[lt],vt=dt.interleaved,vt!==null){dt.interleaved=null;var St=vt.next,Et=dt.pending;if(Et!==null){var Ct=Et.next;Et.next=St,vt.next=Ct}dt.pending=vt}Wg=null}return ft}function Nk(ft,lt){do{var dt=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var vt=N$3.memoizedState;vt!==null;){var St=vt.queue;St!==null&&(St.pending=null),vt=vt.next}Sh=!1}if(Rh=0,P$4=O$4=N$3=null,Th=!1,Uh=0,ok.current=null,dt===null||dt.return===null){T$3=1,qk=lt,Y$1=null;break}e:{var Et=ft,Ct=dt.return,At=dt,Rt=lt;if(lt=Z$2,At.flags|=32768,Rt!==null&&typeof Rt=="object"&&typeof Rt.then=="function"){var Dt=Rt,Nt=At,Ft=Nt.tag;if(!(Nt.mode&1)&&(Ft===0||Ft===11||Ft===15)){var Ut=Nt.alternate;Ut?(Nt.updateQueue=Ut.updateQueue,Nt.memoizedState=Ut.memoizedState,Nt.lanes=Ut.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var Wt=Vi(Ct);if(Wt!==null){Wt.flags&=-257,Wi(Wt,Ct,At,Et,lt),Wt.mode&1&&Ti(Et,Dt,lt),lt=Wt,Rt=Dt;var Zt=lt.updateQueue;if(Zt===null){var Kt=new Set;Kt.add(Rt),lt.updateQueue=Kt}else Zt.add(Rt);break e}else{if(!(lt&1)){Ti(Et,Dt,lt),uj();break e}Rt=Error(p$8(426))}}else if(I$4&&At.mode&1){var cn=Vi(Ct);if(cn!==null){!(cn.flags&65536)&&(cn.flags|=256),Wi(cn,Ct,At,Et,lt),Jg(Ki(Rt,At));break e}}Et=Rt=Ki(Rt,At),T$3!==4&&(T$3=2),tk===null?tk=[Et]:tk.push(Et),Et=Ct;do{switch(Et.tag){case 3:Et.flags|=65536,lt&=-lt,Et.lanes|=lt;var hn=Oi(Et,Rt,lt);fh(Et,hn);break e;case 1:At=Rt;var dn=Et.type,pn=Et.stateNode;if(!(Et.flags&128)&&(typeof dn.getDerivedStateFromError=="function"||pn!==null&&typeof pn.componentDidCatch=="function"&&(Si===null||!Si.has(pn)))){Et.flags|=65536,lt&=-lt,Et.lanes|=lt;var gn=Ri(Et,At,lt);fh(Et,gn);break e}}Et=Et.return}while(Et!==null)}Tk(dt)}catch(vn){lt=vn,Y$1===dt&&dt!==null&&(Y$1=dt=dt.return);continue}break}while(1)}function Kk(){var ft=nk.current;return nk.current=ai,ft===null?ai:ft}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$3===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(ft,lt){var dt=K$1;K$1|=2;var vt=Kk();(R$3!==ft||Z$2!==lt)&&(vk=null,Lk(ft,lt));do try{Uk();break}catch(St){Nk(ft,St)}while(1);if(Qg(),K$1=dt,nk.current=vt,Y$1!==null)throw Error(p$8(261));return R$3=null,Z$2=0,T$3}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(ft){var lt=Wk(ft.alternate,ft,gj);ft.memoizedProps=ft.pendingProps,lt===null?Tk(ft):Y$1=lt,ok.current=null}function Tk(ft){var lt=ft;do{var dt=lt.alternate;if(ft=lt.return,lt.flags&32768){if(dt=Jj(dt,lt),dt!==null){dt.flags&=32767,Y$1=dt;return}if(ft!==null)ft.flags|=32768,ft.subtreeFlags=0,ft.deletions=null;else{T$3=6,Y$1=null;return}}else if(dt=Fj(dt,lt,gj),dt!==null){Y$1=dt;return}if(lt=lt.sibling,lt!==null){Y$1=lt;return}Y$1=lt=ft}while(lt!==null);T$3===0&&(T$3=5)}function Qk(ft,lt,dt){var vt=C$4,St=pk.transition;try{pk.transition=null,C$4=1,Xk(ft,lt,dt,vt)}finally{pk.transition=St,C$4=vt}return null}function Xk(ft,lt,dt,vt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$8(327));dt=ft.finishedWork;var St=ft.finishedLanes;if(dt===null)return null;if(ft.finishedWork=null,ft.finishedLanes=0,dt===ft.current)throw Error(p$8(177));ft.callbackNode=null,ft.callbackPriority=0;var Et=dt.lanes|dt.childLanes;if(Bc(ft,Et),ft===R$3&&(Y$1=R$3=null,Z$2=0),!(dt.subtreeFlags&2064)&&!(dt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Et=(dt.flags&15990)!==0,dt.subtreeFlags&15990||Et){Et=pk.transition,pk.transition=null;var Ct=C$4;C$4=1;var At=K$1;K$1|=4,ok.current=null,Pj(ft,dt),ek(dt,ft),Oe$1(Df),dd=!!Cf,Df=Cf=null,ft.current=dt,ik(dt),dc(),K$1=At,C$4=Ct,pk.transition=Et}else ft.current=dt;if(wk&&(wk=!1,xk=ft,yk=St),Et=ft.pendingLanes,Et===0&&(Si=null),mc(dt.stateNode),Ek(ft,B$2()),lt!==null)for(vt=ft.onRecoverableError,dt=0;dt<lt.length;dt++)St=lt[dt],vt(St.value,{componentStack:St.stack,digest:St.digest});if(Pi)throw Pi=!1,ft=Qi,Qi=null,ft;return yk&1&&ft.tag!==0&&Ik(),Et=ft.pendingLanes,Et&1?ft===Ak?zk++:(zk=0,Ak=ft):zk=0,jg(),null}function Ik(){if(xk!==null){var ft=Dc(yk),lt=pk.transition,dt=C$4;try{if(pk.transition=null,C$4=16>ft?16:ft,xk===null)var vt=!1;else{if(ft=xk,xk=null,yk=0,K$1&6)throw Error(p$8(331));var St=K$1;for(K$1|=4,V$3=ft.current;V$3!==null;){var Et=V$3,Ct=Et.child;if(V$3.flags&16){var At=Et.deletions;if(At!==null){for(var Rt=0;Rt<At.length;Rt++){var Dt=At[Rt];for(V$3=Dt;V$3!==null;){var Nt=V$3;switch(Nt.tag){case 0:case 11:case 15:Qj(8,Nt,Et)}var Ft=Nt.child;if(Ft!==null)Ft.return=Nt,V$3=Ft;else for(;V$3!==null;){Nt=V$3;var Ut=Nt.sibling,Wt=Nt.return;if(Tj(Nt),Nt===Dt){V$3=null;break}if(Ut!==null){Ut.return=Wt,V$3=Ut;break}V$3=Wt}}}var Zt=Et.alternate;if(Zt!==null){var Kt=Zt.child;if(Kt!==null){Zt.child=null;do{var cn=Kt.sibling;Kt.sibling=null,Kt=cn}while(Kt!==null)}}V$3=Et}}if(Et.subtreeFlags&2064&&Ct!==null)Ct.return=Et,V$3=Ct;else e:for(;V$3!==null;){if(Et=V$3,Et.flags&2048)switch(Et.tag){case 0:case 11:case 15:Qj(9,Et,Et.return)}var hn=Et.sibling;if(hn!==null){hn.return=Et.return,V$3=hn;break e}V$3=Et.return}}var dn=ft.current;for(V$3=dn;V$3!==null;){Ct=V$3;var pn=Ct.child;if(Ct.subtreeFlags&2064&&pn!==null)pn.return=Ct,V$3=pn;else e:for(Ct=dn;V$3!==null;){if(At=V$3,At.flags&2048)try{switch(At.tag){case 0:case 11:case 15:Rj(9,At)}}catch(vn){W$4(At,At.return,vn)}if(At===Ct){V$3=null;break e}var gn=At.sibling;if(gn!==null){gn.return=At.return,V$3=gn;break e}V$3=At.return}}if(K$1=St,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,ft)}catch{}vt=!0}return vt}finally{C$4=dt,pk.transition=lt}}return!1}function Yk(ft,lt,dt){lt=Ki(dt,lt),lt=Oi(ft,lt,1),ft=dh(ft,lt,1),lt=L$3(),ft!==null&&(Ac(ft,1,lt),Ek(ft,lt))}function W$4(ft,lt,dt){if(ft.tag===3)Yk(ft,ft,dt);else for(;lt!==null;){if(lt.tag===3){Yk(lt,ft,dt);break}else if(lt.tag===1){var vt=lt.stateNode;if(typeof lt.type.getDerivedStateFromError=="function"||typeof vt.componentDidCatch=="function"&&(Si===null||!Si.has(vt))){ft=Ki(dt,ft),ft=Ri(lt,ft,1),lt=dh(lt,ft,1),ft=L$3(),lt!==null&&(Ac(lt,1,ft),Ek(lt,ft));break}}lt=lt.return}}function Ui(ft,lt,dt){var vt=ft.pingCache;vt!==null&&vt.delete(lt),lt=L$3(),ft.pingedLanes|=ft.suspendedLanes&dt,R$3===ft&&(Z$2&dt)===dt&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(ft,0):sk|=dt),Ek(ft,lt)}function Zk(ft,lt){lt===0&&(ft.mode&1?(lt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):lt=1);var dt=L$3();ft=Zg(ft,lt),ft!==null&&(Ac(ft,lt,dt),Ek(ft,dt))}function vj(ft){var lt=ft.memoizedState,dt=0;lt!==null&&(dt=lt.retryLane),Zk(ft,dt)}function ck(ft,lt){var dt=0;switch(ft.tag){case 13:var vt=ft.stateNode,St=ft.memoizedState;St!==null&&(dt=St.retryLane);break;case 19:vt=ft.stateNode;break;default:throw Error(p$8(314))}vt!==null&&vt.delete(lt),Zk(ft,dt)}var Wk;Wk=function(ft,lt,dt){if(ft!==null)if(ft.memoizedProps!==lt.pendingProps||Wf.current)Ug=!0;else{if(!(ft.lanes&dt)&&!(lt.flags&128))return Ug=!1,zj(ft,lt,dt);Ug=!!(ft.flags&131072)}else Ug=!1,I$4&&lt.flags&1048576&&ug(lt,ng,lt.index);switch(lt.lanes=0,lt.tag){case 2:var vt=lt.type;jj(ft,lt),ft=lt.pendingProps;var St=Yf(lt,H$5.current);Tg(lt,dt),St=Xh(null,lt,vt,ft,St,dt);var Et=bi();return lt.flags|=1,typeof St=="object"&&St!==null&&typeof St.render=="function"&&St.$$typeof===void 0?(lt.tag=1,lt.memoizedState=null,lt.updateQueue=null,Zf(vt)?(Et=!0,cg(lt)):Et=!1,lt.memoizedState=St.state!==null&&St.state!==void 0?St.state:null,ah(lt),St.updater=nh,lt.stateNode=St,St._reactInternals=lt,rh(lt,vt,ft,dt),lt=kj(null,lt,vt,!0,Et,dt)):(lt.tag=0,I$4&&Et&&vg(lt),Yi(null,lt,St,dt),lt=lt.child),lt;case 16:vt=lt.elementType;e:{switch(jj(ft,lt),ft=lt.pendingProps,St=vt._init,vt=St(vt._payload),lt.type=vt,St=lt.tag=$k(vt),ft=Lg(vt,ft),St){case 0:lt=dj(null,lt,vt,ft,dt);break e;case 1:lt=ij(null,lt,vt,ft,dt);break e;case 11:lt=Zi(null,lt,vt,ft,dt);break e;case 14:lt=aj(null,lt,vt,Lg(vt.type,ft),dt);break e}throw Error(p$8(306,vt,""))}return lt;case 0:return vt=lt.type,St=lt.pendingProps,St=lt.elementType===vt?St:Lg(vt,St),dj(ft,lt,vt,St,dt);case 1:return vt=lt.type,St=lt.pendingProps,St=lt.elementType===vt?St:Lg(vt,St),ij(ft,lt,vt,St,dt);case 3:e:{if(lj(lt),ft===null)throw Error(p$8(387));vt=lt.pendingProps,Et=lt.memoizedState,St=Et.element,bh(ft,lt),gh(lt,vt,null,dt);var Ct=lt.memoizedState;if(vt=Ct.element,Et.isDehydrated)if(Et={element:vt,isDehydrated:!1,cache:Ct.cache,pendingSuspenseBoundaries:Ct.pendingSuspenseBoundaries,transitions:Ct.transitions},lt.updateQueue.baseState=Et,lt.memoizedState=Et,lt.flags&256){St=Ki(Error(p$8(423)),lt),lt=mj(ft,lt,vt,dt,St);break e}else if(vt!==St){St=Ki(Error(p$8(424)),lt),lt=mj(ft,lt,vt,dt,St);break e}else for(yg=Lf(lt.stateNode.containerInfo.firstChild),xg=lt,I$4=!0,zg=null,dt=Ch(lt,null,vt,dt),lt.child=dt;dt;)dt.flags=dt.flags&-3|4096,dt=dt.sibling;else{if(Ig(),vt===St){lt=$i(ft,lt,dt);break e}Yi(ft,lt,vt,dt)}lt=lt.child}return lt;case 5:return Kh(lt),ft===null&&Eg(lt),vt=lt.type,St=lt.pendingProps,Et=ft!==null?ft.memoizedProps:null,Ct=St.children,Ef(vt,St)?Ct=null:Et!==null&&Ef(vt,Et)&&(lt.flags|=32),hj(ft,lt),Yi(ft,lt,Ct,dt),lt.child;case 6:return ft===null&&Eg(lt),null;case 13:return pj(ft,lt,dt);case 4:return Ih(lt,lt.stateNode.containerInfo),vt=lt.pendingProps,ft===null?lt.child=Bh(lt,null,vt,dt):Yi(ft,lt,vt,dt),lt.child;case 11:return vt=lt.type,St=lt.pendingProps,St=lt.elementType===vt?St:Lg(vt,St),Zi(ft,lt,vt,St,dt);case 7:return Yi(ft,lt,lt.pendingProps,dt),lt.child;case 8:return Yi(ft,lt,lt.pendingProps.children,dt),lt.child;case 12:return Yi(ft,lt,lt.pendingProps.children,dt),lt.child;case 10:e:{if(vt=lt.type._context,St=lt.pendingProps,Et=lt.memoizedProps,Ct=St.value,G$1(Mg,vt._currentValue),vt._currentValue=Ct,Et!==null)if(He$2(Et.value,Ct)){if(Et.children===St.children&&!Wf.current){lt=$i(ft,lt,dt);break e}}else for(Et=lt.child,Et!==null&&(Et.return=lt);Et!==null;){var At=Et.dependencies;if(At!==null){Ct=Et.child;for(var Rt=At.firstContext;Rt!==null;){if(Rt.context===vt){if(Et.tag===1){Rt=ch(-1,dt&-dt),Rt.tag=2;var Dt=Et.updateQueue;if(Dt!==null){Dt=Dt.shared;var Nt=Dt.pending;Nt===null?Rt.next=Rt:(Rt.next=Nt.next,Nt.next=Rt),Dt.pending=Rt}}Et.lanes|=dt,Rt=Et.alternate,Rt!==null&&(Rt.lanes|=dt),Sg(Et.return,dt,lt),At.lanes|=dt;break}Rt=Rt.next}}else if(Et.tag===10)Ct=Et.type===lt.type?null:Et.child;else if(Et.tag===18){if(Ct=Et.return,Ct===null)throw Error(p$8(341));Ct.lanes|=dt,At=Ct.alternate,At!==null&&(At.lanes|=dt),Sg(Ct,dt,lt),Ct=Et.sibling}else Ct=Et.child;if(Ct!==null)Ct.return=Et;else for(Ct=Et;Ct!==null;){if(Ct===lt){Ct=null;break}if(Et=Ct.sibling,Et!==null){Et.return=Ct.return,Ct=Et;break}Ct=Ct.return}Et=Ct}Yi(ft,lt,St.children,dt),lt=lt.child}return lt;case 9:return St=lt.type,vt=lt.pendingProps.children,Tg(lt,dt),St=Vg(St),vt=vt(St),lt.flags|=1,Yi(ft,lt,vt,dt),lt.child;case 14:return vt=lt.type,St=Lg(vt,lt.pendingProps),St=Lg(vt.type,St),aj(ft,lt,vt,St,dt);case 15:return cj(ft,lt,lt.type,lt.pendingProps,dt);case 17:return vt=lt.type,St=lt.pendingProps,St=lt.elementType===vt?St:Lg(vt,St),jj(ft,lt),lt.tag=1,Zf(vt)?(ft=!0,cg(lt)):ft=!1,Tg(lt,dt),ph(lt,vt,St),rh(lt,vt,St,dt),kj(null,lt,vt,!0,ft,dt);case 19:return yj(ft,lt,dt);case 22:return ej(ft,lt,dt)}throw Error(p$8(156,lt.tag))};function Gk(ft,lt){return ac(ft,lt)}function al(ft,lt,dt,vt){this.tag=ft,this.key=dt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=lt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=vt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(ft,lt,dt,vt){return new al(ft,lt,dt,vt)}function bj(ft){return ft=ft.prototype,!(!ft||!ft.isReactComponent)}function $k(ft){if(typeof ft=="function")return bj(ft)?1:0;if(ft!=null){if(ft=ft.$$typeof,ft===Da)return 11;if(ft===Ga)return 14}return 2}function wh(ft,lt){var dt=ft.alternate;return dt===null?(dt=Bg(ft.tag,lt,ft.key,ft.mode),dt.elementType=ft.elementType,dt.type=ft.type,dt.stateNode=ft.stateNode,dt.alternate=ft,ft.alternate=dt):(dt.pendingProps=lt,dt.type=ft.type,dt.flags=0,dt.subtreeFlags=0,dt.deletions=null),dt.flags=ft.flags&14680064,dt.childLanes=ft.childLanes,dt.lanes=ft.lanes,dt.child=ft.child,dt.memoizedProps=ft.memoizedProps,dt.memoizedState=ft.memoizedState,dt.updateQueue=ft.updateQueue,lt=ft.dependencies,dt.dependencies=lt===null?null:{lanes:lt.lanes,firstContext:lt.firstContext},dt.sibling=ft.sibling,dt.index=ft.index,dt.ref=ft.ref,dt}function yh(ft,lt,dt,vt,St,Et){var Ct=2;if(vt=ft,typeof ft=="function")bj(ft)&&(Ct=1);else if(typeof ft=="string")Ct=5;else e:switch(ft){case ya:return Ah(dt.children,St,Et,lt);case za:Ct=8,St|=8;break;case Aa:return ft=Bg(12,dt,lt,St|2),ft.elementType=Aa,ft.lanes=Et,ft;case Ea:return ft=Bg(13,dt,lt,St),ft.elementType=Ea,ft.lanes=Et,ft;case Fa:return ft=Bg(19,dt,lt,St),ft.elementType=Fa,ft.lanes=Et,ft;case Ia:return qj(dt,St,Et,lt);default:if(typeof ft=="object"&&ft!==null)switch(ft.$$typeof){case Ba:Ct=10;break e;case Ca:Ct=9;break e;case Da:Ct=11;break e;case Ga:Ct=14;break e;case Ha:Ct=16,vt=null;break e}throw Error(p$8(130,ft==null?ft:typeof ft,""))}return lt=Bg(Ct,dt,lt,St),lt.elementType=ft,lt.type=vt,lt.lanes=Et,lt}function Ah(ft,lt,dt,vt){return ft=Bg(7,ft,vt,lt),ft.lanes=dt,ft}function qj(ft,lt,dt,vt){return ft=Bg(22,ft,vt,lt),ft.elementType=Ia,ft.lanes=dt,ft.stateNode={isHidden:!1},ft}function xh(ft,lt,dt){return ft=Bg(6,ft,null,lt),ft.lanes=dt,ft}function zh(ft,lt,dt){return lt=Bg(4,ft.children!==null?ft.children:[],ft.key,lt),lt.lanes=dt,lt.stateNode={containerInfo:ft.containerInfo,pendingChildren:null,implementation:ft.implementation},lt}function bl(ft,lt,dt,vt,St){this.tag=lt,this.containerInfo=ft,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=vt,this.onRecoverableError=St,this.mutableSourceEagerHydrationData=null}function cl(ft,lt,dt,vt,St,Et,Ct,At,Rt){return ft=new bl(ft,lt,dt,At,Rt),lt===1?(lt=1,Et===!0&&(lt|=8)):lt=0,Et=Bg(3,null,null,lt),ft.current=Et,Et.stateNode=ft,Et.memoizedState={element:vt,isDehydrated:dt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Et),ft}function dl(ft,lt,dt){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:vt==null?null:""+vt,children:ft,containerInfo:lt,implementation:dt}}function el(ft){if(!ft)return Vf;ft=ft._reactInternals;e:{if(Vb(ft)!==ft||ft.tag!==1)throw Error(p$8(170));var lt=ft;do{switch(lt.tag){case 3:lt=lt.stateNode.context;break e;case 1:if(Zf(lt.type)){lt=lt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}lt=lt.return}while(lt!==null);throw Error(p$8(171))}if(ft.tag===1){var dt=ft.type;if(Zf(dt))return bg(ft,dt,lt)}return lt}function fl(ft,lt,dt,vt,St,Et,Ct,At,Rt){return ft=cl(dt,vt,!0,ft,St,Et,Ct,At,Rt),ft.context=el(null),dt=ft.current,vt=L$3(),St=lh(dt),Et=ch(vt,St),Et.callback=lt??null,dh(dt,Et,St),ft.current.lanes=St,Ac(ft,St,vt),Ek(ft,vt),ft}function gl(ft,lt,dt,vt){var St=lt.current,Et=L$3(),Ct=lh(St);return dt=el(dt),lt.context===null?lt.context=dt:lt.pendingContext=dt,lt=ch(Et,Ct),lt.payload={element:ft},vt=vt===void 0?null:vt,vt!==null&&(lt.callback=vt),ft=dh(St,lt,Ct),ft!==null&&(mh(ft,St,Ct,Et),eh(ft,St,Ct)),Ct}function hl(ft){if(ft=ft.current,!ft.child)return null;switch(ft.child.tag){case 5:return ft.child.stateNode;default:return ft.child.stateNode}}function il(ft,lt){if(ft=ft.memoizedState,ft!==null&&ft.dehydrated!==null){var dt=ft.retryLane;ft.retryLane=dt!==0&&dt<lt?dt:lt}}function jl(ft,lt){il(ft,lt),(ft=ft.alternate)&&il(ft,lt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(ft){console.error(ft)};function ml(ft){this._internalRoot=ft}nl.prototype.render=ml.prototype.render=function(ft){var lt=this._internalRoot;if(lt===null)throw Error(p$8(409));gl(ft,lt,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var ft=this._internalRoot;if(ft!==null){this._internalRoot=null;var lt=ft.containerInfo;Sk(function(){gl(null,ft,null,null)}),lt[uf]=null}};function nl(ft){this._internalRoot=ft}nl.prototype.unstable_scheduleHydration=function(ft){if(ft){var lt=Hc();ft={blockedOn:null,target:ft,priority:lt};for(var dt=0;dt<Qc.length&&lt!==0&&lt<Qc[dt].priority;dt++);Qc.splice(dt,0,ft),dt===0&&Vc(ft)}};function ol(ft){return!(!ft||ft.nodeType!==1&&ft.nodeType!==9&&ft.nodeType!==11)}function pl(ft){return!(!ft||ft.nodeType!==1&&ft.nodeType!==9&&ft.nodeType!==11&&(ft.nodeType!==8||ft.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(ft,lt,dt,vt,St){if(St){if(typeof vt=="function"){var Et=vt;vt=function(){var Dt=hl(Ct);Et.call(Dt)}}var Ct=fl(lt,vt,ft,0,null,!1,!1,"",ql);return ft._reactRootContainer=Ct,ft[uf]=Ct.current,sf(ft.nodeType===8?ft.parentNode:ft),Sk(),Ct}for(;St=ft.lastChild;)ft.removeChild(St);if(typeof vt=="function"){var At=vt;vt=function(){var Dt=hl(Rt);At.call(Dt)}}var Rt=cl(ft,0,!1,null,null,!1,!1,"",ql);return ft._reactRootContainer=Rt,ft[uf]=Rt.current,sf(ft.nodeType===8?ft.parentNode:ft),Sk(function(){gl(lt,Rt,dt,vt)}),Rt}function sl(ft,lt,dt,vt,St){var Et=dt._reactRootContainer;if(Et){var Ct=Et;if(typeof St=="function"){var At=St;St=function(){var Rt=hl(Ct);At.call(Rt)}}gl(lt,Ct,ft,St)}else Ct=rl(dt,lt,ft,St,vt);return hl(Ct)}Ec=function(ft){switch(ft.tag){case 3:var lt=ft.stateNode;if(lt.current.memoizedState.isDehydrated){var dt=tc(lt.pendingLanes);dt!==0&&(Cc(lt,dt|1),Ek(lt,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var vt=Zg(ft,1);if(vt!==null){var St=L$3();mh(vt,ft,1,St)}}),jl(ft,1)}};Fc=function(ft){if(ft.tag===13){var lt=Zg(ft,134217728);if(lt!==null){var dt=L$3();mh(lt,ft,134217728,dt)}jl(ft,134217728)}};Gc=function(ft){if(ft.tag===13){var lt=lh(ft),dt=Zg(ft,lt);if(dt!==null){var vt=L$3();mh(dt,ft,lt,vt)}jl(ft,lt)}};Hc=function(){return C$4};Ic=function(ft,lt){var dt=C$4;try{return C$4=ft,lt()}finally{C$4=dt}};yb=function(ft,lt,dt){switch(lt){case"input":if(bb(ft,dt),lt=dt.name,dt.type==="radio"&&lt!=null){for(dt=ft;dt.parentNode;)dt=dt.parentNode;for(dt=dt.querySelectorAll("input[name="+JSON.stringify(""+lt)+'][type="radio"]'),lt=0;lt<dt.length;lt++){var vt=dt[lt];if(vt!==ft&&vt.form===ft.form){var St=Db(vt);if(!St)throw Error(p$8(90));Wa(vt),bb(vt,St)}}}break;case"textarea":ib(ft,dt);break;case"select":lt=dt.value,lt!=null&&fb(ft,!!dt.multiple,lt,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(ft){return ft=Zb(ft),ft===null?null:ft.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(ft,lt){var dt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(lt))throw Error(p$8(200));return dl(ft,lt,null,dt)};reactDom_production_min.createRoot=function(ft,lt){if(!ol(ft))throw Error(p$8(299));var dt=!1,vt="",St=ll;return lt!=null&&(lt.unstable_strictMode===!0&&(dt=!0),lt.identifierPrefix!==void 0&&(vt=lt.identifierPrefix),lt.onRecoverableError!==void 0&&(St=lt.onRecoverableError)),lt=cl(ft,1,!1,null,null,dt,!1,vt,St),ft[uf]=lt.current,sf(ft.nodeType===8?ft.parentNode:ft),new ml(lt)};reactDom_production_min.findDOMNode=function(ft){if(ft==null)return null;if(ft.nodeType===1)return ft;var lt=ft._reactInternals;if(lt===void 0)throw typeof ft.render=="function"?Error(p$8(188)):(ft=Object.keys(ft).join(","),Error(p$8(268,ft)));return ft=Zb(lt),ft=ft===null?null:ft.stateNode,ft};reactDom_production_min.flushSync=function(ft){return Sk(ft)};reactDom_production_min.hydrate=function(ft,lt,dt){if(!pl(lt))throw Error(p$8(200));return sl(null,ft,lt,!0,dt)};reactDom_production_min.hydrateRoot=function(ft,lt,dt){if(!ol(ft))throw Error(p$8(405));var vt=dt!=null&&dt.hydratedSources||null,St=!1,Et="",Ct=ll;if(dt!=null&&(dt.unstable_strictMode===!0&&(St=!0),dt.identifierPrefix!==void 0&&(Et=dt.identifierPrefix),dt.onRecoverableError!==void 0&&(Ct=dt.onRecoverableError)),lt=fl(lt,null,ft,1,dt??null,St,!1,Et,Ct),ft[uf]=lt.current,sf(ft),vt)for(ft=0;ft<vt.length;ft++)dt=vt[ft],St=dt._getVersion,St=St(dt._source),lt.mutableSourceEagerHydrationData==null?lt.mutableSourceEagerHydrationData=[dt,St]:lt.mutableSourceEagerHydrationData.push(dt,St);return new nl(lt)};reactDom_production_min.render=function(ft,lt,dt){if(!pl(lt))throw Error(p$8(200));return sl(null,ft,lt,!1,dt)};reactDom_production_min.unmountComponentAtNode=function(ft){if(!pl(ft))throw Error(p$8(40));return ft._reactRootContainer?(Sk(function(){sl(null,null,ft,!1,function(){ft._reactRootContainer=null,ft[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ft,lt,dt,vt){if(!pl(dt))throw Error(p$8(200));if(ft==null||ft._reactInternals===void 0)throw Error(p$8(38));return sl(ft,lt,dt,!1,vt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ft){console.error(ft)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;const $3f95d3e171760903$var$canUseEffectHooks=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$3f95d3e171760903$var$useIsomorphicLayoutEffect=$3f95d3e171760903$var$canUseEffectHooks?reactExports.useLayoutEffect:()=>{};var $3f95d3e171760903$export$2e2bcd8739ae039=$3f95d3e171760903$var$useIsomorphicLayoutEffect;let $e504a2438473eda9$var$counter=0;function $e504a2438473eda9$export$2e2bcd8739ae039(ft=null){const lt=typeof reactExports.useId=="function"?reactExports.useId():null,dt=reactExports.useRef(ft||lt||null);return dt.current===null&&(dt.current=""+$e504a2438473eda9$var$counter++),dt.current}const $af466b485b9d515d$export$7d8c6d083caec74a=reactExports.createContext(null);$af466b485b9d515d$export$7d8c6d083caec74a.displayName="PanelGroupContext";function $c33df6d7c39fd3ee$var$PanelWithForwardedRef({children:ft=null,className:lt="",collapsible:dt=!1,defaultSize:vt=null,forwardedRef:St,id:Et=null,maxSize:Ct=100,minSize:At=10,onCollapse:Rt=null,onResize:Dt=null,order:Nt=null,style:Ft={},tagName:Ut="div"}){const Wt=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(Wt===null)throw Error("Panel components must be rendered within a PanelGroup container");const Zt=$e504a2438473eda9$export$2e2bcd8739ae039(Et),{collapsePanel:Kt,expandPanel:cn,getPanelStyle:hn,registerPanel:dn,resizePanel:pn,unregisterPanel:gn}=Wt,vn=reactExports.useRef({onCollapse:Rt,onResize:Dt});if(reactExports.useEffect(()=>{vn.current.onCollapse=Rt,vn.current.onResize=Dt}),At<0||At>100)throw Error(`Panel minSize must be between 0 and 100, but was ${At}`);if(Ct<0||Ct>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${Ct}`);if(vt!==null){if(vt<0||vt>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${vt}`);At>vt&&!dt&&(console.error(`Panel minSize ${At} cannot be greater than defaultSize ${vt}`),vt=At)}$3f95d3e171760903$export$2e2bcd8739ae039(()=>(dn(Zt,{callbacksRef:vn,collapsible:dt,defaultSize:vt,id:Zt,maxSize:Ct,minSize:At,order:Nt}),()=>{gn(Zt)}),[dt,vt,Zt,Ct,At,Nt,dn,gn]);const bn=hn(Zt),$n=reactExports.useRef({size:$c33df6d7c39fd3ee$var$parseSizeFromStyle(bn)});return $3f95d3e171760903$export$2e2bcd8739ae039(()=>{$n.current.size=$c33df6d7c39fd3ee$var$parseSizeFromStyle(bn)}),reactExports.useImperativeHandle(St,()=>({collapse:()=>Kt(Zt),expand:()=>cn(Zt),getCollapsed(){return $n.current.size===0},getSize(){return $n.current.size},resize:Tn=>pn(Zt,Tn)}),[Kt,cn,Zt,pn]),reactExports.createElement(Ut,{children:ft,className:lt,"data-panel":"","data-panel-collapsible":dt||void 0,"data-panel-id":Zt,"data-panel-size":parseFloat(""+bn.flexGrow).toFixed(1),id:`data-panel-id-${Zt}`,style:{...bn,...Ft}})}const $c33df6d7c39fd3ee$export$2ddb90ad54e5f587=reactExports.forwardRef((ft,lt)=>reactExports.createElement($c33df6d7c39fd3ee$var$PanelWithForwardedRef,{...ft,forwardedRef:lt}));$c33df6d7c39fd3ee$var$PanelWithForwardedRef.displayName="Panel";$c33df6d7c39fd3ee$export$2ddb90ad54e5f587.displayName="forwardRef(Panel)";function $c33df6d7c39fd3ee$var$parseSizeFromStyle(ft){const{flexGrow:lt}=ft;return typeof lt=="string"?parseFloat(lt):lt}function $6889c3a3ed41cfd1$var$getSerializationKey(ft){return ft.map(lt=>{const{minSize:dt,order:vt}=lt;return vt?`${vt}:${dt}`:`${dt}`}).sort((lt,dt)=>lt.localeCompare(dt)).join(",")}function $6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,lt){try{const dt=lt.getItem(`PanelGroup:sizes:${ft}`);if(dt){const vt=JSON.parse(dt);if(typeof vt=="object"&&vt!=null)return vt}}catch{}return null}function $6889c3a3ed41cfd1$export$9c80c6617f0386da(ft,lt,dt){const vt=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,dt);if(vt){const Et=$6889c3a3ed41cfd1$var$getSerializationKey(lt);var St;return(St=vt[Et])!==null&&St!==void 0?St:null}return null}function $6889c3a3ed41cfd1$export$af183b313c61be4f(ft,lt,dt,vt){const St=$6889c3a3ed41cfd1$var$getSerializationKey(lt),Et=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,vt)||{};Et[St]=dt;try{vt.setItem(`PanelGroup:sizes:${ft}`,JSON.stringify(Et))}catch(Ct){console.error(Ct)}}const $a8e83be196252871$export$d6d3992f3becc879=10;function $d6f7e4c3aa9e02d7$export$f50bae335f53943c(ft,lt,dt,vt,St,Et,Ct,At){const{sizes:Rt}=At||{},Dt=Rt||Et;if(St===0)return Dt;const Nt=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(lt),Ft=Dt.concat();let Ut=0;{const Kt=St<0?vt:dt,cn=Nt.findIndex(gn=>gn.id===Kt),hn=Nt[cn],dn=Dt[cn],pn=$d6f7e4c3aa9e02d7$var$safeResizePanel(hn,Math.abs(St),dn,ft);if(dn===pn)return Dt;pn===0&&dn>0&&Ct.set(Kt,dn),St=St<0?dn-pn:pn-dn}let Wt=St<0?dt:vt,Zt=Nt.findIndex(Kt=>Kt.id===Wt);for(;;){const Kt=Nt[Zt],cn=Dt[Zt],hn=Math.abs(St)-Math.abs(Ut),dn=$d6f7e4c3aa9e02d7$var$safeResizePanel(Kt,0-hn,cn,ft);if(cn!==dn&&(dn===0&&cn>0&&Ct.set(Kt.id,cn),Ut+=cn-dn,Ft[Zt]=dn,Ut.toPrecision($a8e83be196252871$export$d6d3992f3becc879).localeCompare(Math.abs(St).toPrecision($a8e83be196252871$export$d6d3992f3becc879),void 0,{numeric:!0})>=0))break;if(St<0){if(--Zt<0)break}else if(++Zt>=Nt.length)break}return Ut===0?Dt:(Wt=St<0?vt:dt,Zt=Nt.findIndex(Kt=>Kt.id===Wt),Ft[Zt]=Dt[Zt]+Ut,Ft)}function $d6f7e4c3aa9e02d7$export$b8e48269e4faa934(ft,lt,dt){dt.forEach((vt,St)=>{const Et=lt[St];if(Et!==vt){const{callbacksRef:Ct,collapsible:At}=ft[St],{onCollapse:Rt,onResize:Dt}=Ct.current;Dt&&Dt(vt),At&&Rt&&(!Et&&vt!==0?Rt(!1):Et!==0&&vt===0&&Rt(!0))}})}function $d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(ft,lt){if(lt.length<2)return[null,null];const dt=lt.findIndex(Ct=>Ct.id===ft);if(dt<0)return[null,null];const vt=dt===lt.length-1,St=vt?lt[dt-1].id:ft,Et=vt?ft:lt[dt+1].id;return[St,Et]}function $d6f7e4c3aa9e02d7$export$6f43503e166de6fb(ft,lt,dt){if(ft.size===1)return"100";const St=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(ft).findIndex(Ct=>Ct.id===lt),Et=dt[St];return Et==null?"0":Et.toPrecision($a8e83be196252871$export$d6d3992f3becc879)}function $d6f7e4c3aa9e02d7$export$7361ed18ff57179e(ft){const lt=document.querySelector(`[data-panel-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(ft){const lt=document.querySelector(`[data-panel-group-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$2e27d3a347680388(ft){const lt=document.querySelector(`[data-panel-resize-handle-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(ft){const dt=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e().findIndex(vt=>vt.getAttribute("data-panel-resize-handle-id")===ft);return dt??null}function $d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function $d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(ft){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${ft}"]`))}function $d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(ft,lt,dt){var vt,St;const Et=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt),At=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(ft).indexOf(Et);var Rt;const Dt=(Rt=(vt=dt[At])===null||vt===void 0?void 0:vt.id)!==null&&Rt!==void 0?Rt:null;var Nt;const Ft=(Nt=(St=dt[At+1])===null||St===void 0?void 0:St.id)!==null&&Nt!==void 0?Nt:null;return[Dt,Ft]}function $d6f7e4c3aa9e02d7$export$a861c0ad45885494(ft){return Array.from(ft.values()).sort((lt,dt)=>lt.order-dt.order)}function $d6f7e4c3aa9e02d7$var$safeResizePanel(ft,lt,dt,vt){const St=dt+lt;if(ft.collapsible)if(dt>0){if(St<=0)return 0}else{var Et;if(!(vt==null||(Et=vt.type)===null||Et===void 0?void 0:Et.startsWith("key"))&&St<ft.minSize)return 0}return Math.min(ft.maxSize,Math.max(ft.minSize,St))}function $8f51c2d77bf1da88$export$ec391ce65b083ed4(ft,lt,dt,vt=0,St=null){const Et=dt==="horizontal";let Ct=0;if($8f51c2d77bf1da88$export$764db16956f554f8(ft))Ct=Et?ft.clientX:ft.clientY;else if($8f51c2d77bf1da88$export$c4dfce035d43d1e0(ft)){const Nt=ft.touches[0];Ct=Et?Nt.screenX:Nt.screenY}else return 0;const At=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt),Rt=St||At.getBoundingClientRect(),Dt=Et?Rt.left:Rt.top;return Ct-Dt-vt}function $8f51c2d77bf1da88$export$354b17c0684607ed(ft,lt,dt,vt,St,Et,Ct){const{dragOffset:At=0,dragHandleRect:Rt,sizes:Dt}=Ct||{},Nt=Dt||Et;if($8f51c2d77bf1da88$export$e7bf60a870f429b0(ft)){const Ft=St==="horizontal",Wt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(lt).getBoundingClientRect(),Zt=Ft?Wt.width:Wt.height,Kt=ft.shiftKey?10:100,cn=Zt/Kt;let hn=0;switch(ft.key){case"ArrowDown":hn=Ft?0:cn;break;case"ArrowLeft":hn=Ft?-cn:0;break;case"ArrowRight":hn=Ft?cn:0;break;case"ArrowUp":hn=Ft?0:-cn;break;case"End":hn=Zt;break;case"Home":hn=-Zt;break}const[dn,pn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(lt,dt,vt),gn=hn<0?dn:pn,vn=vt.findIndex($n=>$n.id===gn),bn=vt[vn];if(bn.collapsible){const $n=Nt[vn];($n===0||$n.toPrecision($a8e83be196252871$export$d6d3992f3becc879)===bn.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879))&&(hn=hn<0?-bn.minSize*Zt:bn.minSize*Zt)}return hn}else return $8f51c2d77bf1da88$export$ec391ce65b083ed4(ft,dt,St,At,Rt)}function $8f51c2d77bf1da88$export$e7bf60a870f429b0(ft){return ft.type==="keydown"}function $8f51c2d77bf1da88$export$764db16956f554f8(ft){return ft.type.startsWith("mouse")}function $8f51c2d77bf1da88$export$c4dfce035d43d1e0(ft){return ft.type.startsWith("touch")}function $4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:ft,groupId:lt,panels:dt,setSizes:vt,sizes:St,panelSizeBeforeCollapse:Et}){reactExports.useEffect(()=>{const{direction:Ct,panels:At}=ft.current,Rt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(lt),{height:Dt,width:Nt}=Rt.getBoundingClientRect(),Ut=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(lt).map(Wt=>{const Zt=Wt.getAttribute("data-panel-resize-handle-id"),Kt=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(At),[cn,hn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(lt,Zt,Kt);if(cn==null||hn==null)return()=>{};let dn=0,pn=100,gn=0,vn=0;Kt.forEach(zn=>{zn.id===cn?(pn=zn.maxSize,dn=zn.minSize):(gn+=zn.minSize,vn+=zn.maxSize)});const bn=Math.min(pn,100-gn),$n=Math.max(dn,(Kt.length-1)*100-vn),Tn=$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(At,cn,St);Wt.setAttribute("aria-valuemax",""+Math.round(bn)),Wt.setAttribute("aria-valuemin",""+Math.round($n)),Wt.setAttribute("aria-valuenow",""+Math.round(parseInt(Tn)));const In=zn=>{switch(zn.key){case"Enter":{const An=Kt.findIndex(Gn=>Gn.id===cn);if(An>=0){const Gn=Kt[An],xn=St[An];if(xn!=null){let Qn=0;xn.toPrecision($a8e83be196252871$export$d6d3992f3becc879)<=Gn.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879)?Qn=Ct==="horizontal"?Nt:Dt:Qn=-(Ct==="horizontal"?Nt:Dt);const qn=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(zn,At,cn,hn,Qn,St,Et.current,null);St!==qn&&vt(qn)}}break}}};Wt.addEventListener("keydown",In);const Pn=$d6f7e4c3aa9e02d7$export$7361ed18ff57179e(cn);return Pn!=null&&Wt.setAttribute("aria-controls",Pn.id),()=>{Wt.removeAttribute("aria-valuemax"),Wt.removeAttribute("aria-valuemin"),Wt.removeAttribute("aria-valuenow"),Wt.removeEventListener("keydown",In),Pn!=null&&Wt.removeAttribute("aria-controls")}});return()=>{Ut.forEach(Wt=>Wt())}},[lt,dt,St])}function $4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:ft,handleId:lt,resizeHandler:dt}){reactExports.useEffect(()=>{if(ft||dt==null)return;const vt=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt);if(vt==null)return;const St=Et=>{switch(Et.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":dt(Et);break;case"F6":{const Ct=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(),At=$d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(lt),Rt=Et.shiftKey?At>0?At-1:Ct.length-1:At+1<Ct.length?At+1:0;Ct[Rt].focus();break}}};return vt.addEventListener("keydown",St),()=>{vt.removeEventListener("keydown",St)}},[ft,lt,dt])}let $8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null;function $8d9d88bebf1a8ace$export$fa35f3322c52262f(ft){switch(ft){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function $8d9d88bebf1a8ace$export$b61932ee18f96e08(){$8d9d88bebf1a8ace$var$element!==null&&(document.head.removeChild($8d9d88bebf1a8ace$var$element),$8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null)}function $8d9d88bebf1a8ace$export$d395b5dfd066a659(ft){if($8d9d88bebf1a8ace$var$currentState===ft)return;$8d9d88bebf1a8ace$var$currentState=ft;const lt=$8d9d88bebf1a8ace$export$fa35f3322c52262f(ft);$8d9d88bebf1a8ace$var$element===null&&($8d9d88bebf1a8ace$var$element=document.createElement("style"),document.head.appendChild($8d9d88bebf1a8ace$var$element)),$8d9d88bebf1a8ace$var$element.innerHTML=`*{cursor: ${lt}!important;}`}function $f7d932e9304c1581$export$2e2bcd8739ae039(ft,lt=10){let dt=null;return(...St)=>{clearTimeout(dt),dt=setTimeout(()=>{ft(...St)},lt)}}function $c892f0f705e6ded5$export$b141efd0b0fb9174(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}const $3daa5d4c086ea816$var$savePanelGroupLayoutDebounced=$f7d932e9304c1581$export$2e2bcd8739ae039($6889c3a3ed41cfd1$export$af183b313c61be4f,100);function $3daa5d4c086ea816$var$throwServerError(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const $3daa5d4c086ea816$var$defaultStorage={getItem:typeof localStorage<"u"?ft=>localStorage.getItem(ft):$3daa5d4c086ea816$var$throwServerError,setItem:typeof localStorage<"u"?(ft,lt)=>localStorage.setItem(ft,lt):$3daa5d4c086ea816$var$throwServerError};function $3daa5d4c086ea816$export$1d05749f6f573bb({autoSaveId:ft,children:lt=null,className:dt="",direction:vt,disablePointerEventsDuringResize:St=!1,id:Et=null,onLayout:Ct=null,storage:At=$3daa5d4c086ea816$var$defaultStorage,style:Rt={},tagName:Dt="div"}){const Nt=$e504a2438473eda9$export$2e2bcd8739ae039(Et),[Ft,Ut]=reactExports.useState(null),[Wt,Zt]=reactExports.useState(new Map),Kt=reactExports.useRef(null),cn=reactExports.useRef({onLayout:Ct});reactExports.useEffect(()=>{cn.current.onLayout=Ct});const[hn,dn]=reactExports.useState([]),pn=reactExports.useRef(new Map),gn=reactExports.useRef(0),vn=reactExports.useRef({direction:vt,panels:Wt,sizes:hn});$3f95d3e171760903$export$2e2bcd8739ae039(()=>{vn.current.direction=vt,vn.current.panels=Wt,vn.current.sizes=hn}),$4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:vn,groupId:Nt,panels:Wt,setSizes:dn,sizes:hn,panelSizeBeforeCollapse:pn}),reactExports.useEffect(()=>{const{onLayout:qn}=cn.current;if(qn){const{sizes:nr}=vn.current;nr.length>0&&qn(nr)}},[hn]);const bn=reactExports.useRef(!1);$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(bn.current)return;const{panels:qn,sizes:nr}=vn.current;if(nr.length>0){bn.current=!0;const Un=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(qn);$d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Un,[],nr)}},[hn]),$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(vn.current.sizes.length===Wt.size)return;let nr;if(ft){const Un=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Wt);nr=$6889c3a3ed41cfd1$export$9c80c6617f0386da(ft,Un,At)}if(nr!=null)dn(nr);else{const Un=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Wt);let Nn=0,jn=0,Ln=0;if(Un.forEach(Cn=>{Ln+=Cn.minSize,Cn.defaultSize===null?Nn++:jn+=Cn.defaultSize}),jn>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(Ln>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");dn(Un.map(Cn=>Cn.defaultSize===null?(100-jn)/Nn:Cn.defaultSize))}},[ft,Wt]),reactExports.useEffect(()=>{if(ft){if(hn.length===0||hn.length!==Wt.size)return;const qn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Wt);$3daa5d4c086ea816$var$savePanelGroupLayoutDebounced(ft,qn,hn,At)}},[ft,Wt,hn]);const $n=reactExports.useCallback(qn=>{const{panels:nr}=vn.current;return nr.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(nr,qn,hn),flexShrink:1,overflow:"hidden",pointerEvents:St&&Ft!==null?"none":void 0}},[Ft,vt,hn]),Tn=reactExports.useCallback((qn,nr)=>{Zt(Un=>{if(Un.has(qn))return Un;const Nn=new Map(Un);return Nn.set(qn,nr),Nn})},[]),In=reactExports.useCallback(qn=>Un=>{Un.preventDefault();const{direction:Nn,panels:jn,sizes:Ln}=vn.current,Cn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(jn),[tr,ir]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(Nt,qn,Cn);if(tr==null||ir==null)return;const Zn=$8f51c2d77bf1da88$export$354b17c0684607ed(Un,Nt,qn,Cn,Nn,Ln,Kt.current);if(Zn===0)return;const fr=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(Nt).getBoundingClientRect(),Or=Nn==="horizontal",Pr=Or?fr.width:fr.height,zr=Zn/Pr*100,Dr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(Un,jn,tr,ir,zr,Ln,pn.current,Kt.current),_r=!$c892f0f705e6ded5$export$b141efd0b0fb9174(Ln,Dr);($8f51c2d77bf1da88$export$764db16956f554f8(Un)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(Un))&&gn.current!=zr&&$8d9d88bebf1a8ace$export$d395b5dfd066a659(_r?Or?"horizontal":"vertical":Or?Zn<0?"horizontal-min":"horizontal-max":Zn<0?"vertical-min":"vertical-max"),_r&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Cn,Ln,Dr),dn(Dr)),gn.current=zr},[Nt]),Pn=reactExports.useCallback(qn=>{Zt(nr=>{if(!nr.has(qn))return nr;const Un=new Map(nr);return Un.delete(qn),Un})},[]),zn=reactExports.useCallback(qn=>{const{panels:nr,sizes:Un}=vn.current,Nn=nr.get(qn);if(Nn==null||!Nn.collapsible)return;const jn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(nr),Ln=jn.indexOf(Nn);if(Ln<0)return;const Cn=Un[Ln];if(Cn===0)return;pn.current.set(qn,Cn);const[tr,ir]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(qn,jn);if(tr==null||ir==null)return;const br=Ln===jn.length-1?Cn:0-Cn,fr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,nr,tr,ir,br,Un,pn.current,null);Un!==fr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(jn,Un,fr),dn(fr))},[]),An=reactExports.useCallback(qn=>{const{panels:nr,sizes:Un}=vn.current,Nn=nr.get(qn);if(Nn==null)return;const jn=pn.current.get(qn)||Nn.minSize;if(!jn)return;const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(nr),Cn=Ln.indexOf(Nn);if(Cn<0||Un[Cn]!==0)return;const[ir,Zn]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(qn,Ln);if(ir==null||Zn==null)return;const fr=Cn===Ln.length-1?0-jn:jn,Or=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,nr,ir,Zn,fr,Un,pn.current,null);Un!==Or&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Ln,Un,Or),dn(Or))},[]),Gn=reactExports.useCallback((qn,nr)=>{const{panels:Un,sizes:Nn}=vn.current,jn=Un.get(qn);if(jn==null)return;const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Un),Cn=Ln.indexOf(jn);if(Cn<0)return;const tr=Nn[Cn];if(tr===nr)return;jn.collapsible&&nr===0||(nr=Math.min(jn.maxSize,Math.max(jn.minSize,nr)));const[ir,Zn]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(qn,Ln);if(ir==null||Zn==null)return;const fr=Cn===Ln.length-1?tr-nr:nr-tr,Or=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,Un,ir,Zn,fr,Nn,pn.current,null);Nn!==Or&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Ln,Nn,Or),dn(Or))},[]),xn=reactExports.useMemo(()=>({activeHandleId:Ft,collapsePanel:zn,direction:vt,expandPanel:An,getPanelStyle:$n,groupId:Nt,registerPanel:Tn,registerResizeHandle:In,resizePanel:Gn,startDragging:(qn,nr)=>{if(Ut(qn),$8f51c2d77bf1da88$export$764db16956f554f8(nr)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(nr)){const Un=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(qn);Kt.current={dragHandleRect:Un.getBoundingClientRect(),dragOffset:$8f51c2d77bf1da88$export$ec391ce65b083ed4(nr,qn,vt),sizes:vn.current.sizes}}},stopDragging:()=>{$8d9d88bebf1a8ace$export$b61932ee18f96e08(),Ut(null),Kt.current=null},unregisterPanel:Pn}),[Ft,zn,vt,An,$n,Nt,Tn,In,Gn,Pn]),Qn={display:"flex",flexDirection:vt==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement($af466b485b9d515d$export$7d8c6d083caec74a.Provider,{children:reactExports.createElement(Dt,{children:lt,className:dt,"data-panel-group":"","data-panel-group-direction":vt,"data-panel-group-id":Nt,style:{...Qn,...Rt}}),value:xn})}$3daa5d4c086ea816$export$1d05749f6f573bb.displayName="PanelGroup";function $971f2c37f9d2b98e$export$8829ecf6b6b15484({children:ft=null,className:lt="",disabled:dt=!1,id:vt=null,style:St={},tagName:Et="div"}){const Ct=reactExports.useRef(null),At=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(At===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:Rt,direction:Dt,groupId:Nt,registerResizeHandle:Ft,startDragging:Ut,stopDragging:Wt}=At,Zt=$e504a2438473eda9$export$2e2bcd8739ae039(vt),Kt=Rt===Zt,[cn,hn]=reactExports.useState(!1),[dn,pn]=reactExports.useState(null),gn=reactExports.useCallback(()=>{Ct.current.blur(),Wt()},[Wt]);reactExports.useEffect(()=>{if(dt)pn(null);else{const bn=Ft(Zt);pn(()=>bn)}},[dt,Zt,Ft]),reactExports.useEffect(()=>{if(dt||dn==null||!Kt)return;const bn=$n=>{dn($n)};return document.body.addEventListener("contextmenu",gn),document.body.addEventListener("mousemove",bn),document.body.addEventListener("touchmove",bn),window.addEventListener("mouseup",gn),window.addEventListener("touchend",gn),()=>{document.body.removeEventListener("contextmenu",gn),document.body.removeEventListener("mousemove",bn),document.body.removeEventListener("touchmove",bn),window.removeEventListener("mouseup",gn),window.removeEventListener("touchend",gn)}},[Dt,dt,Kt,dn,gn]),$4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:dt,handleId:Zt,resizeHandler:dn});const vn={cursor:$8d9d88bebf1a8ace$export$fa35f3322c52262f(Dt),touchAction:"none",userSelect:"none"};return reactExports.createElement(Et,{children:ft,className:lt,"data-resize-handle-active":Kt?"pointer":cn?"keyboard":void 0,"data-panel-group-direction":Dt,"data-panel-group-id":Nt,"data-panel-resize-handle-enabled":!dt,"data-panel-resize-handle-id":Zt,onBlur:()=>hn(!1),onFocus:()=>hn(!0),onMouseDown:bn=>Ut(Zt,bn.nativeEvent),onMouseUp:gn,onTouchCancel:gn,onTouchEnd:gn,onTouchStart:bn=>Ut(Zt,bn.nativeEvent),ref:Ct,role:"separator",style:{...vn,...St},tabIndex:0})}$971f2c37f9d2b98e$export$8829ecf6b6b15484.displayName="PanelResizeHandle";var python$1={exports:{}},coreBrowser={exports:{}},blockly$1={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt()})(commonjsGlobal,function(){var dt={},vt=function(Tt,kt,Bt,zt){Tt=Tt+" was deprecated in "+kt+" and will be deleted in "+Bt+".",zt&&(Tt+=`
Use `+zt+" instead."),console.warn(Tt)},St=function(Tt,kt){Et(),R_=setTimeout(function(){kt&&kt.handleRightClick(Tt)},vS)},Et=function(){R_&&(clearTimeout(R_),R_=0)},Ct=function(){I_=null},At=function(Tt){return!Tt.type.startsWith("pointer")||Tt instanceof PointerEvent&&Dt(Tt)},Rt=function(Tt){return`${Tt.pointerId}`},Dt=function(Tt){const kt=Rt(Tt);return I_?I_===kt:Tt.type==="pointerdown"?(I_=kt,!0):!1},Nt=function(Tt){if(vt("setClientFromTouch()","version 9","version 10"),Tt.type.startsWith("touch")&&Tt.changedTouches){const kt=Tt.changedTouches[0];Tt.clientX=kt.clientX,Tt.clientY=kt.clientY}},Ft=function(Tt){return vt("isMouseOrTouchEvent()","version 9","version 10"),Tt.type.startsWith("touch")||Tt.type.startsWith("mouse")||Tt.type.startsWith("pointer")},Ut=function(Tt){return vt("isTouchEvent()","version 9","version 10"),Tt.type.startsWith("touch")||Tt.type.startsWith("pointer")},Wt=function(Tt){vt("splitEventByTouches()","version 9","version 10");const kt=[];if(Tt.changedTouches)for(let Bt=0;Bt<Tt.changedTouches.length;Bt++)kt[Bt]={type:Tt.type,changedTouches:[Tt.changedTouches[Bt]],target:Tt.target,stopPropagation(){Tt.stopPropagation()},preventDefault(){Tt.preventDefault()}};else kt.push(Tt);return kt},Zt=function(Tt,kt,Bt,zt,mn,En){function Hn(pr){(mn||At(pr))&&(Bt?zt.call(Bt,pr):zt(pr))}if(En!==void 0&&vt("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),En=[],kt in Np)for(let pr=0;pr<Np[kt].length;pr++){const Kr=Np[kt][pr];Tt.addEventListener(Kr,Hn,!1),En.push([Tt,Kr,Hn])}else Tt.addEventListener(kt,Hn,!1),En.push([Tt,kt,Hn]);return En},Kt=function(Tt,kt,Bt,zt){function mn(Hn){Bt?zt.call(Bt,Hn):zt(Hn)}const En=[];if(kt in Np)for(let Hn=0;Hn<Np[kt].length;Hn++){const pr=Np[kt][Hn];Tt.addEventListener(pr,mn,!1),En.push([Tt,pr,mn])}else Tt.addEventListener(kt,mn,!1),En.push([Tt,kt,mn]);return En},cn=function(Tt){const kt=Tt[Tt.length-1][2];for(;Tt.length;){const Bt=Tt.pop();Bt[0].removeEventListener(Bt[1],Bt[2],!1)}return kt},hn=function(Tt){if(Tt.target instanceof HTMLElement){if(Tt.target.isContentEditable||Tt.target.getAttribute("data-is-text-input")==="true")return!0;if(Tt.target instanceof HTMLInputElement)return Tt=Tt.target,Tt.type==="text"||Tt.type==="number"||Tt.type==="email"||Tt.type==="password"||Tt.type==="search"||Tt.type==="tel"||Tt.type==="url";if(Tt.target instanceof HTMLTextAreaElement)return!0}return!1},dn=function(Tt){return Tt.ctrlKey&&Eo?!0:Tt.button===2},pn=function(Tt,kt,Bt){const zt=kt.createSVGPoint();return zt.x=Tt.clientX,zt.y=Tt.clientY,Bt||(Bt=kt.getScreenCTM().inverse()),zt.matrixTransform(Bt)},gn=function(Tt){switch(Tt.deltaMode){default:return{x:Tt.deltaX,y:Tt.deltaY};case 1:return{x:Tt.deltaX*Hr,y:Tt.deltaY*Hr};case 2:return{x:Tt.deltaX*Rr,y:Tt.deltaY*Rr}}},vn=function(Tt){return bo[Tt]||null},bn=function(){const Tt=[];for(const kt in bo)Tt.push(bo[kt]);return Tt},$n=function(Tt){bo[Tt.id]=Tt},Tn=function(Tt){delete bo[Tt.id]},In=function(){return Wo},Pn=function(Tt){Wo=Tt},zn=function(){return Go},An=function(Tt){Go=Tt},Gn=function(){return ns},xn=function(Tt){ns=Tt},Qn=function(Tt){for(;Tt.options.parentWorkspace;)Tt=Tt.options.parentWorkspace;const kt=Tt.getParentSvg(),Bt=Tt.getCachedParentSvgSize();var zt=kt.parentElement;if(zt instanceof HTMLElement){var mn=zt.offsetWidth;zt=zt.offsetHeight,Bt.width!==mn&&(kt.setAttribute("width",mn+"px"),Tt.setCachedParentSvgSize(mn,null)),Bt.height!==zt&&(kt.setAttribute("height",zt+"px"),Tt.setCachedParentSvgSize(null,zt)),Tt.resize()}},qn=function(Tt,kt){const Bt=Object.create(null),zt=Tt.getDescendants(!0);kt&&(Tt=Tt.getNextBlock())&&(Tt=zt.indexOf(Tt),zt.splice(Tt,zt.length-Tt));for(let mn=0,En;En=zt[mn];mn++)Bt[En.type]?Bt[En.type]++:Bt[En.type]=1;return Bt},nr=function(Tt){return function(){this.jsonInit(Tt)}},Un=function(Tt){Jo.defineBlocksWithJsonArrayInternal(Tt)},Nn=function(Tt){Ln(jn(Tt))},jn=function(Tt){const kt={};for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt];if(!zt){console.warn(`Block definition #${Bt} in JSON array is ${zt}. Skipping`);continue}const mn=zt.type;mn?kt[mn]={init:nr(zt)}:console.warn(`Block definition #${Bt} in JSON array is missing a type attribute. Skipping.`)}return kt},Ln=function(Tt){for(const kt of Object.keys(Tt)){const Bt=Tt[kt];kt in so&&console.warn(`Block definiton "${kt}" overwrites previous definition.`),so[kt]=Bt}},Cn=function(Tt,kt,Bt){Tt=document.createElementNS(uu,String(Tt));for(const zt in kt)Tt.setAttribute(zt,`${kt[zt]}`);return Bt&&Bt.appendChild(Tt),Tt},tr=function(Tt,kt){return kt=kt.split(" "),kt.every(Bt=>Tt.classList.contains(Bt))?!1:(Tt.classList.add(...kt),!0)},ir=function(Tt,kt){Tt.classList.remove(...kt.split(" "))},Zn=function(Tt,kt){return kt=kt.split(" "),kt.every(Bt=>!Tt.classList.contains(Bt))?!1:(Tt.classList.remove(...kt),!0)},br=function(Tt,kt){return Tt.classList.contains(kt)},fr=function(Tt){return Tt&&Tt.parentNode?Tt.parentNode.removeChild(Tt):null},Or=function(Tt,kt){const Bt=kt.nextSibling;if(kt=kt.parentNode,!kt)throw Error("Reference node has no parent.");Bt?kt.insertBefore(Tt,Bt):kt.appendChild(Tt)},Pr=function(Tt,kt){return!!(Tt.compareDocumentPosition(kt)&Bp.DOCUMENT_POSITION_CONTAINED_BY)},zr=function(Tt,kt){Tt.style.transform=kt,Tt.style["-webkit-transform"]=kt},Dr=function(){OS++,dp||(dp=Object.create(null))},_r=function(){OS--,OS||(dp=null)},Nr=function(Tt){const kt=Tt.textContent+`
`+Tt.className.baseVal;let Bt;if(dp&&(Bt=dp[kt]))return Bt;try{Bt=Tt.getComputedTextLength()}catch{return 8*Tt.textContent.length}return dp&&(dp[kt]=Bt),Bt},Dn=function(Tt,kt,Bt,zt){return yr(Tt,kt+"pt",Bt,zt)},yr=function(Tt,kt,Bt,zt){const mn=Tt.textContent;Tt=mn+`
`+Tt.className.baseVal;var En;return dp&&(En=dp[Tt])||($O||(En=document.createElement("canvas"),En.className="blocklyComputeCanvas",document.body.appendChild(En),$O=En.getContext("2d")),$O.font=Bt+" "+kt+" "+zt,En=mn?$O.measureText(mn).width:0,dp&&(dp[Tt]=En)),En},hr=function(Tt,kt,Bt,zt){const mn=document.createElement("span");mn.style.font=Bt+" "+kt+" "+zt,mn.textContent=Tt,Tt=document.createElement("div"),Tt.style.width="1px",Tt.style.height="0",kt=document.createElement("div"),kt.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),kt.appendChild(mn),kt.appendChild(Tt),document.body.appendChild(kt),Bt={height:0,baseline:0};try{kt.style.alignItems="baseline",Bt.baseline=Tt.offsetTop-mn.offsetTop,kt.style.alignItems="flex-end",Bt.height=Tt.offsetTop-mn.offsetTop}finally{document.body.removeChild(kt)}return Bt},Jn=function(Tt){return Tt*Math.PI/180},Yn=function(Tt){return 180*Tt/Math.PI},ar=function(Tt,kt,Bt){if(Bt<Tt){const zt=Bt;Bt=Tt,Tt=zt}return Math.max(Tt,Math.min(kt,Bt))},Sr=function(Tt){return ex.getSizeInternal(Tt)},gr=function(Tt){if(Wn(Tt,"display")!=="none")return Vn(Tt);const kt=Tt.style,Bt=kt.display,zt=kt.visibility,mn=kt.position;kt.visibility="hidden",kt.position="absolute",kt.display="inline";const En=Tt.offsetWidth;return Tt=Tt.offsetHeight,kt.display=Bt,kt.position=mn,kt.visibility=zt,new Pl(En,Tt)},Vn=function(Tt){return new Pl(Tt.offsetWidth,Tt.offsetHeight)},Wn=function(Tt,kt){return Tt=window.getComputedStyle(Tt),Tt[kt]||Tt.getPropertyValue(kt)},rr=function(Tt,kt){return vt("Blockly.utils.style.getCascadedStyle","version 9","version 10"),Tt.currentStyle?Tt.currentStyle[kt]:""},lr=function(Tt){const kt=new ao(0,0);Tt=Tt.getBoundingClientRect();var Bt=document.documentElement;return Bt=new ao(window.pageXOffset||Bt.scrollLeft,window.pageYOffset||Bt.scrollTop),kt.x=Tt.left+Bt.x,kt.y=Tt.top+Bt.y,kt},xr=function(){const Tt=document.body,kt=document.documentElement;return new ao(Tt.scrollLeft||kt.scrollLeft,Tt.scrollTop||kt.scrollTop)},Fr=function(Tt){const kt=parseFloat(Wn(Tt,"borderLeftWidth")),Bt=parseFloat(Wn(Tt,"borderRightWidth")),zt=parseFloat(Wn(Tt,"borderTopWidth"));return Tt=parseFloat(Wn(Tt,"borderBottomWidth")),new Fs(zt,Tt,kt,Bt)},mr=function(Tt,kt,Bt){Tt=Yr(Tt,kt,Bt),kt.scrollLeft=Tt.x,kt.scrollTop=Tt.y},Yr=function(Tt,kt,Bt){var zt=lr(Tt),mn=lr(kt),En=Fr(kt);const Hn=zt.x-mn.x-En.left;return zt=zt.y-mn.y-En.top,mn=Vn(Tt),Tt=kt.clientWidth-mn.width,mn=kt.clientHeight-mn.height,En=kt.scrollLeft,kt=kt.scrollTop,Bt?(En+=Hn-Tt/2,kt+=zt-mn/2):(En+=Math.min(Hn,Math.max(Hn-Tt,0)),kt+=Math.min(zt,Math.max(zt-mn,0))),new ao(En,kt)},Vr=function(){as||(as=document.createElement("div"),as.className="blocklyDropDownDiv",(Gn()||document.body).appendChild(as),I0=document.createElement("div"),I0.className="blocklyDropDownContent",as.appendChild(I0),P_=document.createElement("div"),P_.className="blocklyDropDownArrow",as.appendChild(P_),as.style.opacity="0",as.style.transition="transform "+CO+"s, opacity "+CO+"s",as.addEventListener("focusin",function(){tr(as,"blocklyFocused")}),as.addEventListener("focusout",function(){Zn(as,"blocklyFocused")}))},eo=function(Tt){xS=Tt},ur=function(){return Ym},kr=function(){return I0},Br=function(){I0.textContent="",I0.style.width=""},Rn=function(Tt,kt){as.style.backgroundColor=Tt,as.style.borderColor=kt},Xn=function(Tt,kt,Bt,zt){return Cr(wr(kt),Tt,Bt,zt)},cr=function(Tt,kt,Bt){return nx=!0,Cr(Kn(Tt),Tt,kt,Bt)},wr=function(Tt){var kt=Tt.getSvgRoot();const Bt=Tt.workspace.scale,zt=Tt.height*Bt;return Tt=Tt.width*Bt,kt=lr(kt),new Fs(kt.y,kt.y+zt,kt.x,kt.x+Tt)},Kn=function(Tt){return Tt=Tt.getScaledBBox(),new Fs(Tt.top,Tt.bottom,Tt.left,Tt.right)},Cr=function(Tt,kt,Bt,zt){const mn=Tt.left+(Tt.right-Tt.left)/2,En=Tt.bottom;Tt=Tt.top,zt&&(Tt+=zt),zt=kt.getSourceBlock();let Hn=zt.workspace;for(;Hn.options.parentWorkspace;)Hn=Hn.options.parentWorkspace;return eo(Hn.getParentSvg().parentNode),qr(kt,zt.RTL,mn,En,mn,Tt,Bt)},qr=function(Tt,kt,Bt,zt,mn,En,Hn){return Ym=Tt,M_=Hn||null,as.style.direction=kt?"rtl":"ltr",Tt=In(),A0=Tt.getRenderer().getClassName(),k0=Tt.getTheme().getClassName(),A0&&tr(as,A0),k0&&tr(as,k0),Zo(Bt,zt,mn,En)},oo=function(Tt,kt,Bt,zt){return Tt=Xo(Tt,Bt.left,Bt.right,zt.width),{initialX:Tt.divX,initialY:kt,finalX:Tt.divX,finalY:kt+SS,arrowX:Tt.arrowX,arrowY:-(Xy/2+bS),arrowAtTop:!0,arrowVisible:!0}},co=function(Tt,kt,Bt,zt){return Tt=Xo(Tt,Bt.left,Bt.right,zt.width),{initialX:Tt.divX,initialY:kt-zt.height,finalX:Tt.divX,finalY:kt-zt.height-SS,arrowX:Tt.arrowX,arrowY:zt.height-2*bS-Xy/2,arrowAtTop:!1,arrowVisible:!0}},jo=function(Tt,kt,Bt){return Tt=Xo(Tt,kt.left,kt.right,Bt.width),{initialX:Tt.divX,initialY:0,finalX:Tt.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Xo=function(Tt,kt,Bt,zt){return kt=ar(kt,Tt-zt/2,Bt-zt),Tt=Tt-Xy/2-kt,Bt=tx,Tt=ar(Bt,Tt,zt-Bt-Xy),{arrowX:Tt,divX:kt}},rs=function(){return!!Ym},zo=function(Tt,kt){return Ym===Tt?(kt?Lo():os(),!0):!1},os=function(){as.style.transform="translate(0, 0)",as.style.opacity="0",TS=setTimeout(function(){Lo()},1e3*CO),M_&&(M_(),M_=null)},Lo=function(){rs()&&(TS&&clearTimeout(TS),as.style.transform="",as.style.left="",as.style.top="",as.style.opacity="0",as.style.display="none",as.style.backgroundColor="",as.style.borderColor="",M_&&(M_(),M_=null),Br(),Ym=null,A0&&(Zn(as,A0),A0=""),k0&&(Zn(as,k0),k0=""),In().markFocused())},Zo=function(Tt,kt,Bt,zt){Tt=ES.getPositionMetrics(Tt,kt,Bt,zt),Tt.arrowVisible?(P_.style.display="",P_.style.transform="translate("+Tt.arrowX+"px,"+Tt.arrowY+"px) rotate(45deg)",P_.setAttribute("class",Tt.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):P_.style.display="none",kt=Math.floor(Tt.initialX),Bt=Math.floor(Tt.initialY),zt=Math.floor(Tt.finalX);const mn=Math.floor(Tt.finalY);return as.style.left=kt+"px",as.style.top=Bt+"px",as.style.display="block",as.style.opacity="1",as.style.transform="translate("+(zt-kt)+"px,"+(mn-Bt)+"px)",!!Tt.arrowAtTop},Ll=function(){if(Ym){var Tt=Ym.getSourceBlock();Tt=nx?Kn(Ym):wr(Tt);const kt=Tt.left+(Tt.right-Tt.left)/2;Zo(kt,Tt.bottom,kt,Tt.top)}else os()},So=function(Tt,kt,Bt,zt){if(!(Tt instanceof ro)&&typeof Tt!="string"||String(Tt).trim()==="")throw Error('Invalid type "'+Tt+'". The type must be a non-empty string or a Blockly.registry.Type.');if(Tt=String(Tt).toLowerCase(),typeof kt!="string"||kt.trim()==="")throw Error('Invalid name "'+kt+'". The name must be a non-empty string.');const mn=kt.toLowerCase();if(!Bt)throw Error("Can not register a null value");let En=Zm[Tt],Hn=AO[Tt];if(En||(En=Zm[Tt]=Object.create(null),Hn=AO[Tt]=Object.create(null)),ss(Tt,Bt),!zt&&En[mn])throw Error('Name "'+mn+'" with type "'+Tt+'" already registered.');En[mn]=Bt,Hn[mn]=kt},ss=function(Tt,kt){switch(Tt){case String(ro.FIELD):if(typeof kt.fromJson!="function")throw Error('Type "'+Tt+'" must have a fromJson function')}},sr=function(Tt,kt){Tt=String(Tt).toLowerCase(),kt=kt.toLowerCase();const Bt=Zm[Tt];Bt&&Bt[kt]?(delete Zm[Tt][kt],delete AO[Tt][kt]):console.warn("Unable to unregister ["+kt+"]["+Tt+"] from the registry.")},Gr=function(Tt,kt,Bt){Tt=String(Tt).toLowerCase(),kt=kt.toLowerCase();const zt=Zm[Tt];if(!zt||!zt[kt]){if(kt="Unable to find ["+kt+"]["+Tt+"] in the registry.",Bt)throw Error(kt+" You must require or register a "+Tt+" plugin.");return console.warn(kt),null}return zt[kt]},Qr=function(Tt,kt){return Tt=String(Tt).toLowerCase(),kt=kt.toLowerCase(),(Tt=Zm[Tt])?!!Tt[kt]:!1},Ir=function(Tt,kt,Bt){return Gr(Tt,kt,Bt)},Xr=function(Tt,kt,Bt){return Gr(Tt,kt,Bt)},Oo=function(Tt,kt,Bt){Tt=String(Tt).toLowerCase();var zt=Zm[Tt];if(!zt){if(zt=`Unable to find [${Tt}] in the registry.`,Bt)throw Error(`${zt} You must require or register a ${Tt} plugin.`);return console.warn(zt),null}if(!kt)return zt;Tt=AO[Tt],Bt=Object.create(null),kt=Object.keys(zt);for(let mn=0;mn<kt.length;mn++){const En=kt[mn];Bt[Tt[En]]=zt[En]}return Bt},_o=function(Tt,kt,Bt){return kt=kt.plugins[Tt.toString()]||vm,typeof kt=="function"?kt:Ir(Tt,kt,Bt)},wo=function(){return"blockly-"+(XE++).toString(36)},Ao=function(){return ix.genUid()},Ro=function(Tt){Yy=Tt},Co=function(){return Yy},to=function(Tt){CS.fireInternal(Tt)},vs=function(Tt){ts()&&(L0.length||setTimeout(zs,0),L0.push(Tt))},zs=function(){const Tt=Hs(L0,!0);L0.length=0;for(let kt=0,Bt;Bt=Tt[kt];kt++){if(!Bt.workspaceId)continue;const zt=vn(Bt.workspaceId);zt&&zt.fireChangeListener(Bt)}},Hs=function(Tt,kt){Tt=Tt.slice(),kt||Tt.reverse();const Bt=[],zt=Object.create(null);for(let Hn=0,pr;pr=Tt[Hn];Hn++)if(!pr.isNull()){var mn=[pr.isUiEvent?qy:pr.type,pr.blockId,pr.workspaceId].join(" "),En=zt[mn];const Kr=En?En.event:null;En?pr.type===hu&&En.index===Hn-1?(mn=pr,Kr.newParentId=mn.newParentId,Kr.newInputName=mn.newInputName,Kr.newCoordinate=mn.newCoordinate,En.index=Hn):pr.type===yl&&pr.element===Kr.element&&pr.name===Kr.name?Kr.newValue=pr.newValue:pr.type===L_?(En=pr,Kr.viewTop=En.viewTop,Kr.viewLeft=En.viewLeft,Kr.scale=En.scale,Kr.oldScale=En.oldScale):(pr.type!==Km||Kr.type!==Om)&&(zt[mn]={event:pr,index:Hn},Bt.push(pr)):(zt[mn]={event:pr,index:Hn},Bt.push(pr))}Tt=Bt.filter(function(Hn){return!Hn.isNull()}),kt||Tt.reverse();for(let Hn=1,pr;pr=Tt[Hn];Hn++)pr.type===yl&&pr.element==="mutation"&&Tt.unshift(Tt.splice(Hn,1)[0]);return Tt},Nl=function(){for(let Tt=0,kt;kt=L0[Tt];Tt++)kt.recordUndo=!1},Fo=function(){$S++},_i=function(){$S--},ts=function(){return $S===0},Mo=function(){return ox},fo=function(Tt){CS.setGroupInternal(Tt)},jp=function(Tt){ox=typeof Tt=="boolean"?Tt?Ao():"":Tt},Ol=function(Tt){const kt=[];Tt=Tt.getDescendants(!1);for(let Bt=0,zt;zt=Tt[Bt];Bt++)kt[Bt]=zt.id;return kt},Sl=function(Tt,kt){var Bt=no(Tt.type);if(!Bt)throw Error("Unknown event type.");return ds(Bt)?Bt.fromJson(Tt,kt):(Bt=new Bt,Bt.fromJson(Tt),Bt.workspaceId=kt.id,Bt)},ds=function(Tt){return Object.getOwnPropertyDescriptors(Tt).fromJson&&typeof Tt.fromJson=="function"},no=function(Tt){const kt=Ir(ro.EVENT,Tt);if(!kt)throw Error(`Event type ${Tt} not found in registry.`);return kt},Yo=function(Tt){if((Tt.type===hu||Tt.type===Xl)&&Tt.workspaceId){var kt=vn(Tt.workspaceId);if(!Tt.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(Tt=kt.getBlockById(Tt.blockId)){const Bt=Yy;try{Yy=!1;const zt=Tt.getParent();if(zt&&zt.isEnabled()){const mn=Tt.getDescendants(!1);for(let En=0,Hn;Hn=mn[En];En++)Hn.setEnabled(!0)}else if((Tt.outputConnection||Tt.previousConnection)&&!kt.isDragging())do Tt.setEnabled(!1),Tt=Tt.getNextBlock();while(Tt)}finally{Yy=Bt}}}},_s=function(Tt){({document:B_=B_,DOMParser:BO=BO,XMLSerializer:FO=FO}=Tt)},Os=function(){return vt("Blockly.utils.xml.getDocument","version 9","version 10"),B_},Qs=function(Tt){vt("Blockly.utils.xml.setDocument","version 9","version 10"),B_=Tt},Po=function(Tt){return B_.createElementNS(AS,Tt)},ba=function(Tt){return B_.createTextNode(Tt)},Cs=function(Tt){return new BO().parseFromString(Tt,"text/xml")},np=function(Tt){return new FO().serializeToString(Tt)},rp=function(Tt,kt){sx(Tt,kt)},Cm=function(Tt){sx=Tt},mu=function(Tt,kt){cx.confirmInternal(Tt,kt)},X_=function(Tt,kt){ax(Tt,kt)},Tl=function(Tt){ax=Tt},Sp=function(Tt,kt,Bt){lx(Tt,kt,Bt)},Xp=function(Tt){lx=Tt},Am=function(Tt){Tt=Tt.getAllBlocks(!1);const kt=new Set;for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt].getVarModels();if(zt)for(let mn=0;mn<zt.length;mn++){const En=zt[mn];En.getId()&&kt.add(En)}}return Array.from(kt.values())},ip=function(Tt){Tt=Tt.getAllBlocks(!1);const kt=new Set;for(let zt=0,mn;mn=Tt[zt];zt++){var Bt=mn.getDeveloperVariables;if(Bt){Bt=Bt();for(let En=0;En<Bt.length;En++)kt.add(Bt[En])}}return Array.from(kt.values())},wu=function(Tt){let kt=[];const Bt=document.createElement("button");return Bt.setAttribute("text","%{BKY_NEW_VARIABLE}"),Bt.setAttribute("callbackKey","CREATE_VARIABLE"),Tt.registerButtonCallback("CREATE_VARIABLE",function(zt){ru(zt.getTargetWorkspace())}),kt.push(Bt),Tt=zu(Tt),kt=kt.concat(Tt)},zu=function(Tt){Tt=Tt.getVariablesOfType("");const kt=[];if(0<Tt.length){var Bt=Tt[Tt.length-1];if(so.variables_set){var zt=Po("block");zt.setAttribute("type","variables_set"),zt.setAttribute("gap",so.math_change?"8":"24"),zt.appendChild(Vo(Bt)),kt.push(zt)}if(so.math_change&&(zt=Po("block"),zt.setAttribute("type","math_change"),zt.setAttribute("gap",so.variables_get?"20":"8"),zt.appendChild(Vo(Bt)),Bt=Rs('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),zt.appendChild(Bt),kt.push(zt)),so.variables_get){Tt.sort(ov.compareByName);for(let mn=0,En;En=Tt[mn];mn++)Bt=Po("block"),Bt.setAttribute("type","variables_get"),Bt.setAttribute("gap","8"),Bt.appendChild(Vo(En)),kt.push(Bt)}}return kt},Tp=function(Tt){return RS.generateUniqueNameInternal(Tt)},Y_=function(Tt){return Yp(UO.charAt(0),Tt.getAllVariableNames())},Yp=function(Tt,kt){if(!kt.length)return Tt;const Bt=UO;let zt="",mn=Bt.indexOf(Tt);for(;;){let En=!1;for(let Hn=0;Hn<kt.length;Hn++)if(kt[Hn].toLowerCase()===Tt){En=!0;break}if(!En)break;mn++,mn===Bt.length&&(mn=0,zt=`${Number(zt)+1}`),Tt=Bt.charAt(mn)+zt}return Tt},ru=function(Tt,kt,Bt){function zt(En){gu(ko.NEW_VARIABLE_TITLE,En,function(Hn){if(Hn){const pr=Cu(Hn,Tt);if(pr){let Kr;pr.type===mn?Kr=ko.VARIABLE_ALREADY_EXISTS.replace("%1",pr.name):(Kr=ko.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Kr=Kr.replace("%1",pr.name).replace("%2",pr.type)),rp(Kr,function(){zt(Hn)})}else Tt.createVariable(Hn,mn),kt&&kt(Hn)}else kt&&kt(null)})}const mn=Bt||"";zt("")},Zp=function(Tt,kt,Bt){function zt(mn){const En=ko.RENAME_VARIABLE_TITLE.replace("%1",kt.name);gu(En,mn,function(Hn){if(Hn){var pr=xp(Hn,kt.type,Tt);pr?(pr=ko.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",pr.name).replace("%2",pr.type),rp(pr,function(){zt(Hn)})):(Tt.renameVariableById(kt.getId(),Hn),Bt&&Bt(Hn))}else Bt&&Bt(null)})}zt("")},gu=function(Tt,kt,Bt){Sp(Tt,kt,function(zt){zt&&(zt=zt.replace(/[\s\xa0]+/g," ").trim(),zt===ko.RENAME_VARIABLE||zt===ko.NEW_VARIABLE)&&(zt=null),Bt(zt)})},xp=function(Tt,kt,Bt){Bt=Bt.getVariableMap().getAllVariables(),Tt=Tt.toLowerCase();for(let zt=0,mn;mn=Bt[zt];zt++)if(mn.name.toLowerCase()===Tt&&mn.type!==kt)return mn;return null},Cu=function(Tt,kt){kt=kt.getVariableMap().getAllVariables(),Tt=Tt.toLowerCase();for(let Bt=0,zt;zt=kt[Bt];Bt++)if(zt.name.toLowerCase()===Tt)return zt;return null},Vo=function(Tt){const kt=Po("field");return kt.setAttribute("name","VAR"),kt.setAttribute("id",Tt.getId()),kt.setAttribute("variabletype",Tt.type),Tt=ba(Tt.name),kt.appendChild(Tt),kt},Ep=function(Tt,kt,Bt,zt){let mn=_u(Tt,kt,Bt,zt);return mn||(mn=km(Tt,kt,Bt,zt)),mn},_u=function(Tt,kt,Bt,zt){const mn=Tt.getPotentialVariableMap();let En=null;if(kt&&(En=Tt.getVariableById(kt),!En&&mn&&(En=mn.getVariableById(kt)),En))return En;if(Bt){if(zt===void 0)throw Error("Tried to look up a variable by name without a type");En=Tt.getVariable(Bt,zt),!En&&mn&&(En=mn.getVariable(Bt,zt))}return En},km=function(Tt,kt,Bt,zt){const mn=Tt.getPotentialVariableMap();return Bt||(Bt=Tp(Tt.isFlyout?Tt.targetWorkspace:Tt)),mn?mn.createVariable(Bt,zt,kt):Tt.createVariable(Bt,zt,kt)},qp=function(Tt,kt){Tt=Tt.getAllVariables();const Bt=[];if(kt.length!==Tt.length)for(let zt=0;zt<Tt.length;zt++){const mn=Tt[zt];kt.indexOf(mn)===-1&&Bt.push(mn)}return Bt},Zl=function(Tt){if(PS)throw Error("CSS already injected");DS+=`
`+Tt},ys=function(Tt,kt){PS||(PS=!0,Tt&&(Tt=kt.replace(/[\\/]$/,""),kt=DS.replace(/<<<PATH>>>/g,Tt),DS="",Tt=document.createElement("style"),Tt.id="blockly-common-style",kt=document.createTextNode(kt),Tt.appendChild(kt),document.head.insertBefore(Tt,document.head.firstChild)))},Zs=function(Tt){const kt=new ao(0,0);var Bt=Tt.x&&Tt.getAttribute("x");const zt=Tt.y&&Tt.getAttribute("y");return Bt&&(kt.x=parseInt(Bt)),zt&&(kt.y=parseInt(zt)),(Bt=(Bt=Tt.getAttribute("transform"))&&Bt.match(ux))&&(kt.x+=Number(Bt[1]),Bt[3]&&(kt.y+=Number(Bt[3]))),(Tt=Tt.getAttribute("style"))&&-1<Tt.indexOf("translate")&&(Tt=Tt.match(hx))&&(kt.x+=Number(Tt[1]),Tt[3]&&(kt.y+=Number(Tt[3]))),kt},Kp=function(Tt){let kt=0,Bt=0;for(;Tt;){const zt=Zs(Tt);if(kt+=zt.x,Bt+=zt.y,(" "+(Tt.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;Tt=Tt.parentNode}return new ao(kt,Bt)},xl=function(){return vt("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},Jp=function(){const Tt=xr();return new Fs(Tt.y,document.documentElement.clientHeight+Tt.y,Tt.x,document.documentElement.clientWidth+Tt.x)},Hu=function(){const Tt=document.documentElement,kt=window;return new ao(kt.pageXOffset||Tt.scrollLeft,kt.pageYOffset||Tt.scrollTop)},Kl=function(Tt,kt){var Bt=kt.x;kt=kt.y;const zt=Tt.getInjectionDiv().getBoundingClientRect();return Bt=new ao(Bt-zt.left,kt-zt.top),kt=Tt.getOriginOffsetInPixels(),ao.difference(Bt,kt).scale(1/Tt.scale)},r_=function(Tt,kt){const Bt=Po("xml");var zt=em(Am(Tt));zt.hasChildNodes()&&Bt.appendChild(zt),zt=Tt.getTopComments(!0);for(let mn=0;mn<zt.length;mn++)Bt.appendChild(zt[mn].toXmlWithXY(kt));for(Tt=Tt.getTopBlocks(!0),zt=0;zt<Tt.length;zt++)Bt.appendChild(El(Tt[zt],kt));return Bt},em=function(Tt){const kt=Po("variables");for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt],mn=Po("variable");mn.appendChild(ba(zt.name)),zt.type&&mn.setAttribute("type",zt.type),mn.id=zt.getId(),kt.appendChild(mn)}return kt},El=function(Tt,kt){if(Tt.isInsertionMarker()&&(Tt=Tt.getChildren(!1)[0],!Tt))return new DocumentFragment;let Bt=0;Tt.workspace.RTL&&(Bt=Tt.workspace.getWidth()),kt=qs(Tt,kt);const zt=Tt.getRelativeToSurfaceXY();return kt.setAttribute("x",Math.round(Tt.workspace.RTL?Bt-zt.x:zt.x)),kt.setAttribute("y",Math.round(zt.y)),kt},Bl=function(Tt){if(Tt.isSerializable()){const kt=Po("field");return kt.setAttribute("name",Tt.name||""),Tt.toXml(kt)}return null},Qu=function(Tt,kt){for(let Bt=0;Bt<Tt.inputList.length;Bt++){const zt=Tt.inputList[Bt];for(let mn=0;mn<zt.fieldRow.length;mn++){const En=Bl(zt.fieldRow[mn]);En&&kt.appendChild(En)}}},qs=function(Tt,kt){if(Tt.isInsertionMarker())return(kt=Tt.getChildren(!1)[0])?qs(kt):new DocumentFragment;const Bt=Po(Tt.isShadow()?"shadow":"block");if(Bt.setAttribute("type",Tt.type),kt||Bt.setAttribute("id",Tt.id),Tt.mutationToDom){var zt=Tt.mutationToDom();zt&&(zt.hasChildNodes()||zt.hasAttributes())&&Bt.appendChild(zt)}if(Qu(Tt,Bt),zt=Tt.getCommentText()){var mn=Tt.commentModel.size,En=Tt.commentModel.pinned,Hn=Po("comment");Hn.appendChild(ba(zt)),Hn.setAttribute("pinned",En),Hn.setAttribute("h",mn.height),Hn.setAttribute("w",mn.width),Bt.appendChild(Hn)}for(Tt.data&&(zt=Po("data"),zt.appendChild(ba(Tt.data)),Bt.appendChild(zt)),zt=0;zt<Tt.inputList.length;zt++){mn=Tt.inputList[zt];var pr=void 0;if(En=!0,mn.type!==Uo.DUMMY){Hn=mn.connection.targetBlock(),mn.type===Uo.VALUE?pr=Po("value"):mn.type===Uo.STATEMENT&&(pr=Po("statement"));const lo=mn.connection.getShadowDom();!lo||Hn&&Hn.isShadow()||pr.appendChild(Im(lo,kt)),Hn&&(Hn=qs(Hn,kt),Hn.nodeType===Bp.ELEMENT_NODE&&(pr.appendChild(Hn),En=!1)),pr.setAttribute("name",mn.name),En||Bt.appendChild(pr)}}Tt.inputsInline!==void 0&&Tt.inputsInline!==Tt.inputsInlineDefault&&Bt.setAttribute("inline",Tt.inputsInline.toString()),Tt.isCollapsed()&&Bt.setAttribute("collapsed","true"),Tt.isEnabled()||Bt.setAttribute("disabled","true"),Tt.isDeletable()||Tt.isShadow()||Bt.setAttribute("deletable","false"),Tt.isMovable()||Tt.isShadow()||Bt.setAttribute("movable","false"),Tt.isEditable()||Bt.setAttribute("editable","false"),pr=Tt.getNextBlock();let Kr;return pr&&(zt=qs(pr,kt),zt.nodeType===Bp.ELEMENT_NODE&&(Kr=Po("next"),Kr.appendChild(zt),Bt.appendChild(Kr))),Tt=Tt.nextConnection&&Tt.nextConnection.getShadowDom(),!Tt||pr&&pr.isShadow()||Kr.appendChild(Im(Tt,kt)),Bt},Im=function(Tt,kt){let Bt=Tt=Tt.cloneNode(!0),zt;for(;Bt;)if(kt&&Bt.nodeName==="shadow"&&Bt.removeAttribute("id"),Bt.firstChild)Bt=Bt.firstChild;else{for(;Bt&&!Bt.nextSibling;){zt=Bt,Bt=Bt.parentNode;let mn;zt.nodeType===Bp.TEXT_NODE&&zt.data.trim()===""&&((mn=Bt)==null?void 0:mn.firstChild)!==zt&&fr(zt)}Bt&&(zt=Bt,Bt=Bt.nextSibling,zt.nodeType===Bp.TEXT_NODE&&zt.data.trim()===""&&fr(zt))}return Tt},$l=function(Tt){return np(Tt).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Jl=function(Tt){Tt=$l(Tt).split("<");let kt="";for(let Bt=1;Bt<Tt.length;Bt++){const zt=Tt[Bt];zt[0]==="/"&&(kt=kt.substring(2)),Tt[Bt]=kt+"<"+zt,zt[0]!=="/"&&zt.slice(-2)!=="/>"&&(kt+="  ")}return Tt=Tt.join(`
`),Tt=Tt.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),Tt.replace(/^\n/,"")},Rs=function(Tt){const kt=Cs(Tt);if(!kt||!kt.documentElement||kt.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+Tt);return kt.documentElement},tm=function(Tt,kt){return kt.setResizesEnabled(!1),kt.clear(),Tt=Au(Tt,kt),kt.setResizesEnabled(!0),Tt},Au=function(Tt,kt){let Bt=0;kt.RTL&&(Bt=kt.getWidth());const zt=[];Dr();const mn=Mo();mn||fo(!0),kt.setResizesEnabled&&kt.setResizesEnabled(!1);let En=!0;try{for(let Hn=0,pr;pr=Tt.childNodes[Hn];Hn++){const Kr=pr.nodeName.toLowerCase(),lo=pr;if(Kr==="block"||Kr==="shadow"&&!Co()){const es=Es(lo,kt);zt.push(es.id);const ws=lo.hasAttribute("x")?parseInt(lo.getAttribute("x")):10,Wu=lo.hasAttribute("y")?parseInt(lo.getAttribute("y")):10;isNaN(ws)||isNaN(Wu)||es.moveBy(kt.RTL?Bt-ws:ws,Wu),En=!1}else{if(Kr==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Kr==="comment")kt.rendered?tu.fromXmlRendered(lo,kt,Bt):Up.fromXml(lo,kt);else if(Kr==="variables"){if(En)nm(lo,kt);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");En=!1}}}}finally{mn||fo(!1),_r()}return kt.setResizesEnabled&&kt.setResizesEnabled(!0),to(new(no(D0))(kt)),zt},Cl=function(Tt,kt){if(!kt.getBlocksBoundingBox)return Au(Tt,kt);var Bt=kt.getBlocksBoundingBox();if(Tt=Au(Tt,kt),Bt&&Bt.top!==Bt.bottom){var zt=Bt.bottom;Bt=kt.RTL?Bt.right:Bt.left;var mn=1/0;let En=-1/0,Hn=1/0;for(let pr=0;pr<Tt.length;pr++){const Kr=kt.getBlockById(Tt[pr]).getRelativeToSurfaceXY();Kr.y<Hn&&(Hn=Kr.y),Kr.x<mn&&(mn=Kr.x),Kr.x>En&&(En=Kr.x)}for(zt=zt-Hn+10,Bt=kt.RTL?Bt-En:Bt-mn,mn=0;mn<Tt.length;mn++)kt.getBlockById(Tt[mn]).moveBy(Bt,zt)}return Tt},Es=function(Tt,kt){Fo();var Bt=kt.getAllVariables();let zt;try{if(zt=Ps(Tt,kt),kt.rendered){const mn=zt,En=zt.getDescendants(!1);mn.setConnectionTracking(!1);for(let Hn=En.length-1;0<=Hn;Hn--)En[Hn].initSvg();for(let Hn=En.length-1;0<=Hn;Hn--)En[Hn].render(!1);setTimeout(function(){mn.disposed||mn.setConnectionTracking(!0)},1),mn.updateDisabled(),kt.resizeContents()}else{const mn=zt.getDescendants(!1);for(let En=mn.length-1;0<=En;En--)mn[En].initModel()}}finally{_i()}if(ts()){for(Tt=qp(kt,Bt),kt=0;kt<Tt.length;kt++)Bt=Tt[kt],to(new(no(D_))(Bt));to(new(no(Xl))(zt))}return zt},nm=function(Tt,kt){for(let Bt=0;Bt<Tt.children.length;Bt++){const zt=Tt.children[Bt],mn=zt.getAttribute("type"),En=zt.getAttribute("id");kt.createVariable(zt.textContent,mn,En)}},ku=function(Tt){const kt={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let Bt=0;Bt<Tt.children.length;Bt++){const zt=Tt.children[Bt];if(zt.nodeType!==Bp.TEXT_NODE)switch(zt.nodeName.toLowerCase()){case"mutation":kt.mutation.push(zt);break;case"comment":kt.comment.push(zt);break;case"data":kt.data.push(zt);break;case"title":case"field":kt.field.push(zt);break;case"value":case"statement":kt.input.push(zt);break;case"next":kt.next.push(zt);break;default:console.warn("Ignoring unknown tag: "+zt.nodeName)}}return kt},$p=function(Tt,kt){let Bt=!1;for(let zt=0;zt<Tt.length;zt++){const mn=Tt[zt];kt.domToMutation&&(kt.domToMutation(mn),kt.initSvg&&(Bt=!0))}return Bt},Rm=function(Tt,kt){for(let zt=0;zt<Tt.length;zt++){var Bt=Tt[zt];const mn=Bt.textContent,En=Bt.getAttribute("pinned")==="true",Hn=parseInt(Bt.getAttribute("w"));if(Bt=parseInt(Bt.getAttribute("h")),kt.setCommentText(mn),kt.commentModel.pinned=En,isNaN(Hn)||isNaN(Bt)||(kt.commentModel.size=new Pl(Hn,Bt)),En&&kt.getCommentIcon&&!kt.isInFlyout){const pr=kt;setTimeout(function(){pr.getCommentIcon().setVisible(!0)},1)}}},Z_=function(Tt,kt){for(let Bt=0;Bt<Tt.length;Bt++)kt.data=Tt[Bt].textContent},ju=function(Tt,kt){for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt],mn=zt.getAttribute("name");Iu(kt,mn,zt)}},Ms=function(Tt){const kt={childBlockElement:null,childShadowElement:null};for(let Bt=0;Bt<Tt.childNodes.length;Bt++){const zt=Tt.childNodes[Bt];zt.nodeType===Bp.ELEMENT_NODE&&(zt.nodeName.toLowerCase()==="block"?kt.childBlockElement=zt:zt.nodeName.toLowerCase()==="shadow"&&(kt.childShadowElement=zt))}return kt},Ks=function(Tt,kt,Bt,zt){for(let En=0;En<Tt.length;En++){var mn=Tt[En];const Hn=mn.getAttribute("name"),pr=Bt.getInput(Hn);if(!pr){console.warn("Ignoring non-existent input "+Hn+" in block "+zt);break}if(mn=Ms(mn),mn.childBlockElement){if(!pr.connection)throw TypeError("Input connection does not exist.");Ps(mn.childBlockElement,kt,pr.connection,!1)}if(mn.childShadowElement){let Kr;(Kr=pr.connection)==null||Kr.setShadowDom(mn.childShadowElement)}}},ms=function(Tt,kt,Bt){for(let zt=0;zt<Tt.length;zt++){const mn=Ms(Tt[zt]);if(mn.childBlockElement){if(!Bt.nextConnection)throw TypeError("Next statement does not exist.");if(Bt.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Ps(mn.childBlockElement,kt,Bt.nextConnection,!0)}mn.childShadowElement&&Bt.nextConnection&&Bt.nextConnection.setShadowDom(mn.childShadowElement)}},Ps=function(Tt,kt,Bt,zt){const mn=Tt.getAttribute("type");if(!mn)throw TypeError("Block type unspecified: "+Tt.outerHTML);var En=Tt.getAttribute("id");En=kt.newBlock(mn,En);const Hn=ku(Tt),pr=$p(Hn.mutation,En);if(Rm(Hn.comment,En),Z_(Hn.data,En),Bt)if(zt)if(En.previousConnection)Bt.connect(En.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(En.outputConnection)Bt.connect(En.outputConnection);else if(En.previousConnection)Bt.connect(En.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(ju(Hn.field,En),Ks(Hn.input,kt,En,mn),ms(Hn.next,kt,En),pr&&En.initSvg(),(kt=Tt.getAttribute("inline"))&&En.setInputsInline(kt==="true"),(kt=Tt.getAttribute("disabled"))&&En.setEnabled(kt!=="true"&&kt!=="disabled"),(kt=Tt.getAttribute("deletable"))&&En.setDeletable(kt==="true"),(kt=Tt.getAttribute("movable"))&&En.setMovable(kt==="true"),(kt=Tt.getAttribute("editable"))&&En.setEditable(kt==="true"),(kt=Tt.getAttribute("collapsed"))&&En.setCollapsed(kt==="true"),Tt.nodeName.toLowerCase()==="shadow"){for(Tt=En.getChildren(!1),kt=0;kt<Tt.length;kt++)if(!Tt[kt].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(En.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");En.setShadow(!0)}return En},Iu=function(Tt,kt,Bt){const zt=Tt.getField(kt);zt?zt.fromXml(Bt):console.warn("Ignoring non-existent field "+kt+" in block "+Tt.type)},ey=function(Tt){for(let kt=0;kt<Tt.childNodes.length;kt++){const Bt=Tt.childNodes[kt];if(Bt.nodeName.toLowerCase()==="next"){Tt.removeChild(Bt);break}}},Nv=function(Tt,kt){return vt("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),Tt.startsWith(kt)},yu=function(Tt){return Tt.length?Tt.reduce(function(kt,Bt){return kt.length<Bt.length?kt:Bt}).length:0},op=function(Tt,kt){if(!Tt.length)return 0;if(Tt.length===1)return Tt[0].length;let Bt=0;kt=kt||yu(Tt);let zt;for(zt=0;zt<kt;zt++){for(var mn=Tt[0][zt],En=1;En<Tt.length;En++)if(mn!==Tt[En][zt])return Bt;mn===" "&&(Bt=zt+1)}for(mn=1;mn<Tt.length;mn++)if((En=Tt[mn][zt])&&En!==" ")return Bt;return kt},i_=function(Tt,kt){if(!Tt.length)return 0;if(Tt.length===1)return Tt[0].length;let Bt=0;kt=kt||yu(Tt);let zt;for(zt=0;zt<kt;zt++){for(var mn=Tt[0].substr(-zt-1,1),En=1;En<Tt.length;En++)if(mn!==Tt[En].substr(-zt-1,1))return Bt;mn===" "&&(Bt=zt+1)}for(mn=1;mn<Tt.length;mn++)if((En=Tt[mn].charAt(Tt[mn].length-zt-1))&&En!==" ")return Bt;return kt},ty=function(Tt,kt){Tt=Tt.split(`
`);for(let Bt=0;Bt<Tt.length;Bt++)Tt[Bt]=q_(Tt[Bt],kt);return Tt.join(`
`)},q_=function(Tt,kt){if(Tt.length<=kt)return Tt;const Bt=Tt.trim().split(/\s+/);for(var zt=0;zt<Bt.length;zt++)Bt[zt].length>kt&&(kt=Bt[zt].length);var mn=-1/0;let En,Hn=1;do{zt=mn,En=Tt,Tt=[],mn=Bt.length/Hn;let pr=1;for(let Kr=0;Kr<Bt.length-1;Kr++)pr<(Kr+1.5)/mn?(pr++,Tt[Kr]=!0):Tt[Kr]=!1;Tt=ny(Bt,Tt,kt),mn=K_(Bt,Tt,kt),Tt=ry(Bt,Tt),Hn++}while(mn>zt);return En},K_=function(Tt,kt,Bt){const zt=[0],mn=[];for(var En=0;En<Tt.length;En++)zt[zt.length-1]+=Tt[En].length,kt[En]===!0?(zt.push(0),mn.push(Tt[En].charAt(Tt[En].length-1))):kt[En]===!1&&zt[zt.length-1]++;for(Tt=Math.max(...zt),kt=0,En=0;En<zt.length;En++)kt-=2*Math.pow(Math.abs(Bt-zt[En]),1.5),kt-=Math.pow(Tt-zt[En],1.5),".?!".indexOf(mn[En])!==-1?kt+=Bt/3:",;)]}".indexOf(mn[En])!==-1&&(kt+=Bt/4);return 1<zt.length&&zt[zt.length-1]<=zt[zt.length-2]&&(kt+=.5),kt},ny=function(Tt,kt,Bt){let zt=K_(Tt,kt,Bt),mn;for(let En=0;En<kt.length-1;En++){if(kt[En]===kt[En+1])continue;const Hn=[].concat(kt);Hn[En]=!Hn[En],Hn[En+1]=!Hn[En+1];const pr=K_(Tt,Hn,Bt);pr>zt&&(zt=pr,mn=Hn)}return mn?ny(Tt,mn,Bt):kt},ry=function(Tt,kt){const Bt=[];for(let zt=0;zt<Tt.length;zt++)Bt.push(Tt[zt]),kt[zt]!==void 0&&Bt.push(kt[zt]?`
`:" ");return Bt.join("")},o_=function(Tt){return/^\s*-?\d+(\.\d+)?\s*$/.test(Tt)},Bv=function(Tt){WO=Tt},Fv=function(){return WO},Gv=function(){return av},iy=function(){return Xs},Xu=function(Tt){if(Tt=im(Tt)){for(Tt=Tt.tooltip;typeof Tt=="function";)Tt=Tt();if(typeof Tt!="string")throw Error("Tooltip function must return a string.");return Tt}return""},im=function(Tt){for(;Tt&&Tt.tooltip;){if(typeof Tt.tooltip=="string"||typeof Tt.tooltip=="function")return Tt;Tt=Tt.tooltip}return null},s_=function(){Xs||(Xs=document.createElement("div"),Xs.className="blocklyTooltipDiv",(Gn()||document.body).appendChild(Xs))},om=function(Tt){Tt.mouseOverWrapper_=Kt(Tt,"pointerover",null,vu),Tt.mouseOutWrapper_=Kt(Tt,"pointerout",null,sm),Tt.addEventListener("pointermove",Yu,!1)},Fl=function(Tt){Tt&&(cn(Tt.mouseOverWrapper_),cn(Tt.mouseOutWrapper_),Tt.removeEventListener("pointermove",Yu))},vu=function(Tt){B0||(Tt=im(Tt.currentTarget),_f!==Tt&&(iu(),cv=null,_f=Tt),clearTimeout(fx))},sm=function(Tt){B0||(fx=setTimeout(function(){cv=_f=null,iu()},1),clearTimeout(lv))},Yu=function(Tt){if(_f&&_f.tooltip&&!B0)if(av){const kt=NS-Tt.pageX;Tt=BS-Tt.pageY,Math.sqrt(kt*kt+Tt*Tt)>mx&&iu()}else cv!==_f&&(clearTimeout(lv),NS=Tt.pageX,BS=Tt.pageY,lv=setTimeout(bs,gx))},Zu=function(){cv=_f=null,iu()},iu=function(){av&&(av=!1,Xs&&(Xs.style.display="none")),lv&&clearTimeout(lv)},oy=function(){iu(),B0=!0},J_=function(){B0=!1},sy=function(){Xs&&_f&&(typeof WO=="function"?WO(Xs,_f):ou())},ou=function(){var Tt=Xu(_f);Tt=ty(Tt,dx),Tt=Tt.split(`
`);for(let kt=0;kt<Tt.length;kt++){const Bt=document.createElement("div");Bt.appendChild(document.createTextNode(Tt[kt])),Xs.appendChild(Bt)}},su=function(Tt){const kt=document.documentElement.clientWidth,Bt=document.documentElement.clientHeight;let zt=NS;zt=Tt?zt-(FS+Xs.offsetWidth):zt+FS;let mn=BS+GS;return mn+Xs.offsetHeight>Bt+window.scrollY&&(mn-=Xs.offsetHeight+2*GS),Tt?zt=Math.max(zO-window.scrollX,zt):zt+Xs.offsetWidth>kt+window.scrollX-2*zO&&(zt=kt-Xs.offsetWidth-2*zO),{x:zt,y:mn}},bs=function(){if(!B0&&(cv=_f,Xs)){Xs.textContent="",sy();var Tt=_f.RTL;Xs.style.direction=Tt?"rtl":"ltr",Xs.style.display="block",av=!0;var{x:kt,y:Bt}=su(Tt);Xs.style.left=kt+"px",Xs.style.top=Bt+"px"}},Mm=function(){return US},Ru=function(Tt){US=Tt},ay=function(){return VS},Uv=function(Tt){VS=Tt},sp=function(Tt){Tt=String(Tt).toLowerCase().trim();var kt=yx[Tt];if(kt||(kt=Tt.substring(0,2)==="0x"?"#"+Tt.substring(2):Tt,kt=kt[0]==="#"?kt:"#"+kt,/^#[0-9a-f]{6}$/.test(kt)))return kt;if(/^#[0-9a-f]{3}$/.test(kt))return["#",kt[1],kt[1],kt[2],kt[2],kt[3],kt[3]].join("");var Bt=Tt.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return Bt&&(Tt=Number(Bt[1]),kt=Number(Bt[2]),Bt=Number(Bt[3]),0<=Tt&&256>Tt&&0<=kt&&256>kt&&0<=Bt&&256>Bt)?Pm(Tt,kt,Bt):null},Pm=function(Tt,kt,Bt){return kt=Tt<<16|kt<<8|Bt,16>Tt?"#"+(16777216|kt).toString(16).substr(1):"#"+kt.toString(16)},e0=function(Tt){return Tt=sp(Tt),Tt?(Tt=parseInt(Tt.substr(1),16),[Tt>>16,Tt>>8&255,Tt&255]):[0,0,0]},am=function(Tt,kt,Bt){let zt=0,mn=0,En=0;if(kt===0)En=mn=zt=Bt;else{const Hn=Math.floor(Tt/60),pr=Tt/60-Hn;Tt=Bt*(1-kt);const Kr=Bt*(1-kt*pr);switch(kt=Bt*(1-kt*(1-pr)),Hn){case 1:zt=Kr,mn=Bt,En=Tt;break;case 2:zt=Tt,mn=Bt,En=kt;break;case 3:zt=Tt,mn=Kr,En=Bt;break;case 4:zt=kt,mn=Tt,En=Bt;break;case 5:zt=Bt,mn=Tt,En=Kr;break;case 6:case 0:zt=Bt,mn=kt,En=Tt}}return Pm(Math.floor(zt),Math.floor(mn),Math.floor(En))},Mu=function(Tt,kt,Bt){return Tt=sp(Tt),!Tt||(kt=sp(kt),!kt)?null:(Tt=e0(Tt),kt=e0(kt),Pm(Math.round(kt[0]+Bt*(Tt[0]-kt[0])),Math.round(kt[1]+Bt*(Tt[1]-kt[1])),Math.round(kt[2]+Bt*(Tt[2]-kt[2]))))},a_=function(Tt){return am(Tt,US,255*VS)},lm=function(Tt,kt){const Bt=[];var zt=Tt.split("");zt.push("");var mn=0;Tt=[];let En=null;for(let Kr=0;Kr<zt.length;Kr++){var Hn=zt[Kr];if(mn===0)Hn==="%"?((mn=Tt.join(""))&&Bt.push(mn),Tt.length=0,mn=1):Tt.push(Hn);else if(mn===1)Hn==="%"?(Tt.push(Hn),mn=0):kt&&"0"<=Hn&&"9">=Hn?(mn=2,En=Hn,(Hn=Tt.join(""))&&Bt.push(Hn),Tt.length=0):Hn==="{"?mn=3:(Tt.push("%",Hn),mn=0);else if(mn===2)if("0"<=Hn&&"9">=Hn)En+=Hn;else{var pr=void 0;Bt.push(parseInt((pr=En)!=null?pr:"",10)),Kr--,mn=0}else mn===3&&(Hn===""?(Tt.splice(0,0,"%{"),Kr--,mn=0):Hn!=="}"?Tt.push(Hn):(mn=Tt.join(""),/[A-Z]\w*/i.test(mn)?(Hn=mn.toUpperCase(),(Hn=Hn.startsWith("BKY_")?Hn.substring(4):null)&&Hn in ko?(mn=ko[Hn],typeof mn=="string"?Array.prototype.push.apply(Bt,lm(mn,kt)):kt?Bt.push(String(mn)):Bt.push(mn)):Bt.push("%{"+mn+"}")):Bt.push("%{"+mn+"}"),mn=Tt.length=0))}for((kt=Tt.join(""))&&Bt.push(kt),pr=[],Tt.length=0,zt=0;zt<Bt.length;zt++)typeof Bt[zt]=="string"?Tt.push(Bt[zt]):((kt=Tt.join(""))&&pr.push(kt),Tt.length=0,pr.push(Bt[zt]));return(kt=Tt.join(""))&&pr.push(kt),Tt.length=0,pr},Dm=function(Tt){return lm(Tt,!0)},Ss=function(Tt){return typeof Tt!="string"?Tt:(Tt=lm(Tt,!1),Tt.length?String(Tt[0]):"")},l_=function(Tt){let kt=!0;const Bt=ko,zt=Tt.match(/%{BKY_[A-Z]\w*}/ig);if(zt)for(let mn=0;mn<zt.length;mn++){const En=zt[mn].toUpperCase();Bt[En.slice(6,-1)]===void 0&&(console.warn("No message string for "+zt[mn]+" in "+Tt),kt=!1)}return kt},Pu=function(Tt){const kt=typeof Tt=="string"?Ss(Tt):Tt;var Bt=Number(kt);if(!isNaN(Bt)&&0<=Bt&&360>=Bt)return{hue:Bt,hex:am(Bt,Mm(),255*ay())};if(Bt=sp(kt))return{hue:null,hex:Bt};throw Bt='Invalid colour: "'+kt+'"',Tt!==kt&&(Bt+=' (from "'+Tt+'")'),Error(Bt)},cm=function(){return mp},c_=function(Tt){mp=Tt},au=function(){mp||(mp=document.createElement("div"),mp.className="blocklyWidgetDiv",(Gn()||document.body).appendChild(mp))},um=function(Tt,kt,Bt){Gl(),HO=Tt,QO=Bt,(Tt=mp)&&(Tt.style.direction=kt?"rtl":"ltr",Tt.style.display="block",kt=In(),F0=kt.getRenderer().getClassName(),G0=kt.getTheme().getClassName(),F0&&tr(Tt,F0),G0&&tr(Tt,G0))},Gl=function(){if(Du()){HO=null;var Tt=mp;Tt&&(Tt.style.display="none",Tt.style.left="",Tt.style.top="",QO&&QO(),QO=null,Tt.textContent="",F0&&(Zn(Tt,F0),F0=""),G0&&(Zn(Tt,G0),G0=""),In().markFocused())}},Du=function(){return!!HO},u_=function(Tt){HO===Tt&&Gl()},hm=function(Tt,kt,Bt){mp.style.left=Tt+"px",mp.style.top=kt+"px",mp.style.height=Bt+"px"},ly=function(Tt,kt,Bt,zt){const mn=$s(Tt,kt,Bt);Tt=cy(Tt,kt,Bt,zt),0>mn?hm(Tt,0,Bt.height+mn):hm(Tt,mn,Bt.height)},cy=function(Tt,kt,Bt,zt){return zt?Math.min(Math.max(kt.right-Bt.width,Tt.left),Tt.right-Bt.width):Math.max(Math.min(kt.left,Tt.right-Bt.width),Tt.left)},$s=function(Tt,kt,Bt){return kt.bottom+Bt.height>=Tt.bottom?kt.top-Bt.height:kt.bottom},Ul=function(Tt,kt){So(ro.FIELD,Tt,kt)},uy=function(Tt){sr(ro.FIELD,Tt)},h_=function(Tt){return vx.fromJsonInternal(Tt)},t0=function(Tt){const kt=Xr(ro.FIELD,Tt.type);if(kt){if(typeof kt.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return kt.fromJson(Tt)}return console.warn("Blockly could not create a field of type "+Tt.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Ds=function(Tt,kt){Tt.setAttribute(JE,kt)},fs=function(Tt,kt,Bt){Array.isArray(Bt)&&(Bt=Bt.join(" ")),Tt.setAttribute(KE+kt,`${Bt}`)},As=function(Tt){return Tt!==qo.SKIP_SETUP},Al=function(Tt){let kt=!1;const Bt=Tt.map(([Hn,pr])=>typeof Hn=="string"?[Ss(Hn),pr]:(kt=!0,[Hn.alt!==null?Object.assign({},Hn,{alt:Ss(Hn.alt)}):Object.assign({},Hn),pr]));if(kt||2>Tt.length)return{options:Bt};var zt=Bt.map(([Hn])=>Hn),mn=yu(zt);Tt=op(zt,mn);const En=i_(zt,mn);return!Tt&&!En||mn<=Tt+En?{options:Bt}:(mn=Tt?zt[0].substring(0,Tt-1):void 0,zt=En?zt[0].substr(1-En):void 0,{options:Js(Bt,Tt,En),prefix:mn,suffix:zt})},Js=function(Tt,kt,Bt){return Tt.map(([zt,mn])=>[zt.substring(kt,zt.length-Bt),mn])},d_=function(Tt){if(!Array.isArray(Tt))throw TypeError("FieldDropdown options must be an array.");if(!Tt.length)throw TypeError("FieldDropdown options must not be an empty array.");let kt=!1;for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt];Array.isArray(zt)?typeof zt[1]!="string"?(kt=!0,console.error("Invalid option["+Bt+"]: Each FieldDropdown option id must be a string. Found "+zt[1]+" in: ",zt)):zt[0]&&typeof zt[0]!="string"&&typeof zt[0].src!="string"&&(kt=!0,console.error("Invalid option["+Bt+"]: Each FieldDropdown option must have a string label or image description. Found"+zt[0]+" in: ",zt)):(kt=!0,console.error("Invalid option["+Bt+"]: Each FieldDropdown option must be an array. Found: ",zt))}if(kt)throw TypeError("Found invalid FieldDropdown options.")},f_=function(Tt,kt){vt("Blockly.utils.object.inherits","version 9","version 10"),Tt.superClass_=kt.prototype,Object.setPrototypeOf(Tt,kt),Tt.prototype=Object.create(kt.prototype),Tt.prototype.constructor=Tt},p_=function(Tt,kt){vt("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const Bt in kt)Tt[Bt]=kt[Bt]},wp=function(Tt,kt){for(const Bt in kt)Tt[Bt]=kt[Bt]!==null&&typeof kt[Bt]=="object"?wp(Tt[Bt]||Object.create(null),kt[Bt]):kt[Bt];return Tt},Il=function(Tt){return vt("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(Tt)},Lm=function(Tt){return Tt?((Tt instanceof Element||typeof Tt=="string")&&(Tt=fy(Tt),Tt=n0(Tt)),hy(Tt),Tt):null},hy=function(Tt){const kt=Tt.kind;if(Tt=Tt.contents,kt&&kt!==bx&&kt!==XS)throw Error("Invalid toolbox kind "+kt+". Please supply either "+bx+" or "+XS);if(!Tt)throw Error("Toolbox must have a contents attribute.")},Nm=function(Tt){return Tt?Tt.contents?Tt.contents:Array.isArray(Tt)&&0<Tt.length&&!Tt[0].nodeType?Tt:Bm(Tt):[]},Lu=function(Tt){return Sx.hasCategoriesInternal(Tt)},qu=function(Tt){if(!Tt)return!1;const kt=Tt.kind;return kt?kt===XS:!!Tt.contents.filter(function(Bt){return Bt.kind.toUpperCase()==="CATEGORY"}).length},ap=function(Tt){return Tt&&Tt.contents?!!Tt.contents.filter(function(kt){return kt.kind.toUpperCase()==="CATEGORY"}).length:!1},n0=function(Tt){const kt={contents:Bm(Tt)};return Tt instanceof Node&&dy(Tt,kt),kt},Bm=function(Tt){const kt=[];let Bt=Tt.childNodes;Bt||(Bt=Tt);for(let zt=0,mn;mn=Bt[zt];zt++){if(!mn.tagName)continue;Tt={};const En=mn.tagName.toUpperCase();Tt.kind=En,En==="BLOCK"?Tt.blockxml=mn:mn.childNodes&&0<mn.childNodes.length&&(Tt.contents=Bm(mn)),dy(mn,Tt),kt.push(Tt)}return kt},dy=function(Tt,kt){for(let Bt=0;Bt<Tt.attributes.length;Bt++){const zt=Tt.attributes[Bt];-1<zt.nodeName.indexOf("css-")?(kt.cssconfig=kt.cssconfig||{},kt.cssconfig[zt.nodeName.replace("css-","")]=zt.value):kt[zt.nodeName]=zt.value}},fy=function(Tt){let kt=null;if(Tt)if(typeof Tt=="string"){if(kt=Rs(Tt),kt.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else Tt instanceof Element&&(kt=Tt);return kt},m_=function(Tt,kt){if(typeof Tt!="string"||Tt.trim()==="")throw Error('Error: Invalid extension name "'+Tt+'"');if(U0[Tt])throw Error('Error: Extension "'+Tt+'" is already registered.');if(typeof kt!="function")throw Error('Error: Extension "'+Tt+'" must be a function');U0[Tt]=kt},Vv=function(Tt,kt){if(!kt||typeof kt!="object")throw Error('Error: Mixin "'+Tt+'" must be a object');m_(Tt,function(){this.mixin(kt)})},Wv=function(Tt,kt,Bt,zt){const mn='Error when registering mutator "'+Tt+'": ';my(mn,kt);const En=s0(kt,mn);if(Bt&&typeof Bt!="function")throw Error(mn+'Extension "'+Tt+'" is not a function');m_(Tt,function(){En&&this.setMutator(new dt.Mutator$$module$build$src$core$mutator(zt||[],this)),this.mixin(kt),Bt&&Bt.apply(this)})},zv=function(Tt){r0(Tt)?delete U0[Tt]:console.warn('No extension mapping for name "'+Tt+'" found to unregister')},r0=function(Tt){return!!U0[Tt]},dm=function(Tt,kt,Bt){const zt=U0[Tt];if(typeof zt!="function")throw Error('Error: Extension "'+Tt+'" not found.');let mn;if(Bt?Hv(Tt,kt):mn=a0(kt),zt.apply(kt),Bt)my('Error after applying mutator "'+Tt+'": ',kt);else if(!Qv(mn,kt))throw Error('Error when applying extension "'+Tt+'": mutation properties changed when applying a non-mutator extension.')},Hv=function(Tt,kt){if(a0(kt).length)throw Error('Error: tried to apply mutation "'+Tt+'" to a block that already has mutator functions.  Block id: '+kt.id)},i0=function(Tt,kt){return fm(Tt.mutationToDom,Tt.domToMutation,kt+" mutationToDom/domToMutation")},o0=function(Tt,kt){return fm(Tt.saveExtraState,Tt.loadExtraState,kt+" saveExtraState/loadExtraState")},s0=function(Tt,kt){return fm(Tt.compose,Tt.decompose,kt+" compose/decompose")},fm=function(Tt,kt,Bt){if(Tt&&kt){if(typeof Tt!="function"||typeof kt!="function")throw Error(Bt+" must be a function");return!0}if(!Tt&&!kt)return!1;throw Error(Bt+"Must have both or neither functions")},my=function(Tt,kt){const Bt=i0(kt,Tt),zt=o0(kt,Tt);if(!Bt&&!zt)throw Error(Tt+"Mutations must contain either XML hooks, or JSON hooks, or both");s0(kt,Tt)},a0=function(Tt){const kt=[];return Tt.domToMutation!==void 0&&kt.push(Tt.domToMutation),Tt.mutationToDom!==void 0&&kt.push(Tt.mutationToDom),Tt.saveExtraState!==void 0&&kt.push(Tt.saveExtraState),Tt.loadExtraState!==void 0&&kt.push(Tt.loadExtraState),Tt.compose!==void 0&&kt.push(Tt.compose),Tt.decompose!==void 0&&kt.push(Tt.decompose),kt},Qv=function(Tt,kt){if(kt=a0(kt),kt.length!==Tt.length)return!1;for(let Bt=0;Bt<kt.length;Bt++)if(Tt[Bt]!==kt[Bt])return!1;return!0},g_=function(Tt){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")Tt();else{const kt=setInterval(function(){document.readyState==="complete"&&(clearInterval(kt),Tt())},10)}},gy=function(Tt,kt){const Bt=[];return typeof document=="object"&&g_(function(){for(const zt in kt)l_(kt[zt])}),function(){this.type&&Bt.indexOf(this.type)===-1&&(jv(this,Tt,kt),Bt.push(this.type)),this.setTooltip(function(){var zt=String(this.getFieldValue(Tt));let mn=kt[zt];return mn===null?Bt.indexOf(this.type)===-1&&(zt="No tooltip mapping for value "+zt+" of field "+Tt,this.type!==null&&(zt+=" of block type "+this.type),console.warn(zt+".")):mn=Ss(mn),mn}.bind(this))}},jv=function(Tt,kt,Bt){var zt=Tt.getField(kt);if(zt instanceof _p&&!zt.isOptionListDynamic()){zt=zt.getOptions();for(let mn=0;mn<zt.length;mn++){const En=zt[mn][1];Bt[En]===null&&console.warn("No tooltip mapping for value "+En+" of field "+kt+" of block type "+Tt.type)}}},Xv=function(Tt,kt){return typeof document=="object"&&g_(function(){l_(Tt)}),function(){this.setTooltip(function(){const Bt=this.getField(kt);return Ss(Tt).replace("%1",Bt?Bt.getText():"")}.bind(this))}},sS=function(){const Tt=this.tooltip;this.setTooltip(function(){const kt=this.getParent();return kt&&kt.getInputsInline()&&kt.tooltip||Tt}.bind(this))},Vl=function(Tt,kt){return kt=Tt.indexOf(kt),kt===-1?!1:(Tt.splice(kt,1),!0)},To=function(Tt,kt){return" "+Tt+","+kt+" "},lu=function(Tt,kt){return" "+Tt+kt.join("")},xa=function(Tt,kt){return" M "+Tt+","+kt+" "},gs=function(Tt,kt){return" m "+Tt+","+kt+" "},Ku=function(Tt,kt){return" l "+Tt+","+kt+" "},Fm=function(Tt){return" l"+Tt.join("")},uo=function(Tt,kt){return" "+Tt+" "+kt+" "},Ls=function(Tt,kt,Bt,zt){return Tt+" "+Bt+" "+Bt+" "+kt+zt},aS=function(Tt){return vt("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Zs(Tt)},lS=function(Tt){return vt("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),Kp(Tt)},yy=function(Tt){return vt("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),Dm(Tt)},vy=function(Tt){return vt("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),Ss(Tt)},cS=function(Tt){return vt("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),l_(Tt)},Yv=function(){return vt("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),xl()},Zv=function(){return vt("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),Jp()},qv=function(Tt,kt){return vt("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),Vl(Tt,kt)},Kv=function(){return vt("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),Hu()},Jv=function(Tt,kt){return vt("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),qn(Tt,kt)},Ju=function(Tt,kt){return vt("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),Kl(Tt,kt)},eO=function(Tt){return vt("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),Pu(Tt)},__=function(Tt){vt("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),g_(Tt)},pm=function(Tt,kt){So(ro.SERIALIZER,Tt,kt)},l0=function(Tt){sr(ro.SERIALIZER,Tt)},Ou=function(Tt,{addCoordinates:kt=!1,addInputBlocks:Bt=!0,addNextBlocks:zt=!0,doFullSerialization:mn=!0}={}){if(Tt.isInsertionMarker())return null;const En={type:Tt.type,id:Tt.id};return kt&&y_(Tt,En),tO(Tt,En),Rl(Tt,En),uS(Tt,En),hS(Tt,En,mn),Bt&&cu(Tt,En,mn),zt&&Wl(Tt,En,mn),En},tO=function(Tt,kt){Tt.isCollapsed()&&(kt.collapsed=!0),Tt.isEnabled()||(kt.enabled=!1),Tt.inputsInline!==void 0&&Tt.inputsInline!==Tt.inputsInlineDefault&&(kt.inline=Tt.inputsInline),Tt.data&&(kt.data=Tt.data)},y_=function(Tt,kt){const Bt=Tt.workspace;Tt=Tt.getRelativeToSurfaceXY(),kt.x=Math.round(Bt.RTL?Bt.getWidth()-Tt.x:Tt.x),kt.y=Math.round(Tt.y)},Rl=function(Tt,kt){Tt.saveExtraState?(Tt=Tt.saveExtraState(),Tt!==null&&(kt.extraState=Tt)):Tt.mutationToDom&&(Tt=Tt.mutationToDom(),Tt!==null&&(kt.extraState=$l(Tt).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},uS=function(Tt,kt){Tt.getCommentText()&&(kt.icons={comment:{text:Tt.getCommentText(),pinned:Tt.commentModel.pinned,height:Math.round(Tt.commentModel.size.height),width:Math.round(Tt.commentModel.size.width)}})},hS=function(Tt,kt,Bt){const zt=Object.create(null);for(let mn=0;mn<Tt.inputList.length;mn++){const En=Tt.inputList[mn];for(let Hn=0;Hn<En.fieldRow.length;Hn++){const pr=En.fieldRow[Hn];pr.isSerializable()&&(zt[pr.name]=pr.saveState(Bt))}}Object.keys(zt).length&&(kt.fields=zt)},cu=function(Tt,kt,Bt){const zt=Object.create(null);for(let mn=0;mn<Tt.inputList.length;mn++){const En=Tt.inputList[mn];if(En.type===Uo.DUMMY)continue;const Hn=Oy(En.connection,Bt);Hn&&(zt[En.name]=Hn)}Object.keys(zt).length&&(kt.inputs=zt)},Wl=function(Tt,kt,Bt){Tt.nextConnection&&(Tt=Oy(Tt.nextConnection,Bt))&&(kt.next=Tt)},Oy=function(Tt,kt){const Bt=Tt.getShadowState(!0);if(Tt=Tt.targetBlock(),!Bt&&!Tt)return null;const zt=Object.create(null);return Bt&&(zt.shadow=Bt),Tt&&!Tt.isShadow()&&(zt.block=Ou(Tt,{doFullSerialization:kt})),zt},Cp=function(Tt,kt,{recordUndo:Bt=!1}={}){return c0(Tt,kt,{recordUndo:Bt})},c0=function(Tt,kt,{parentConnection:Bt,isShadow:zt=!1,recordUndo:mn=!1}={}){const En=Co();Ro(mn),(mn=Mo())||fo(!0),Fo();const Hn=by(Tt,kt,{parentConnection:Bt,isShadow:zt});return _i(),to(new(no(Xl))(Hn)),fo(mn),Ro(En),kt.rendered&&setTimeout(()=>{Hn.disposed||Hn.setConnectionTracking(!0)},1),Hn},by=function(Tt,kt,{parentConnection:Bt,isShadow:zt=!1}={}){if(!Tt.type)throw new Ex(Tt);const mn=kt.newBlock(Tt.type,Tt.id);return mn.setShadow(zt),nO(mn,Tt),Sy(mn,Tt),rO(mn,Tt),Ty(Bt,mn,Tt),iO(mn,Tt),oO(mn,Tt),u0(mn,Tt),h0(mn,Tt),Ey(mn,kt.rendered),mn},nO=function(Tt,kt){let Bt=kt.x===void 0?0:kt.x;kt=kt.y===void 0?0:kt.y;const zt=Tt.workspace;Bt=zt.RTL?zt.getWidth()-Bt:Bt,Tt.moveBy(Bt,kt)},Sy=function(Tt,kt){kt.collapsed&&Tt.setCollapsed(!0),kt.enabled===!1&&Tt.setEnabled(!1),kt.inline!==void 0&&Tt.setInputsInline(kt.inline),kt.data!==void 0&&(Tt.data=kt.data)},rO=function(Tt,kt){kt.extraState&&(Tt.loadExtraState?Tt.loadExtraState(kt.extraState):Tt.domToMutation&&Tt.domToMutation(Rs(kt.extraState)))},Ty=function(Tt,kt,Bt){if(Tt){if(Tt.getSourceBlock().isShadow()&&!kt.isShadow())throw new wx(Bt);if(Tt.type===Uo.VALUE){var zt=kt.outputConnection;if(!zt)throw new mv("output",kt,Bt)}else if(zt=kt.previousConnection,!zt)throw new mv("previous",kt,Bt);if(!Tt.connect(zt)){const mn=kt.workspace.connectionChecker;throw new $x(mn.getErrorMessage(mn.canConnectWithReason(zt,Tt,!1),zt,Tt),Tt.type===Uo.VALUE?"output connection":"previous connection",kt,Bt)}}},iO=function(Tt,kt){kt.icons&&(kt=kt.icons.comment)&&(Tt.setCommentText(kt.text),"pinned"in kt&&(Tt.commentModel.pinned=kt.pinned),"width"in kt&&"height"in kt&&(Tt.commentModel.size=new Pl(kt.width,kt.height)),kt.pinned&&Tt.rendered&&!Tt.isInFlyout&&setTimeout(()=>Tt.getCommentIcon().setVisible(!0),1))},oO=function(Tt,kt){if(kt.fields){var Bt=Object.keys(kt.fields);for(let zt=0;zt<Bt.length;zt++){const mn=Bt[zt],En=kt.fields[mn],Hn=Tt.getField(mn);Hn?Hn.loadState(En):console.warn(`Ignoring non-existant field ${mn} in block ${Tt.type}`)}}},u0=function(Tt,kt){if(kt.inputs){var Bt=Object.keys(kt.inputs);for(let zt=0;zt<Bt.length;zt++){const mn=Bt[zt],En=Tt.getInput(mn);if(!En||!En.connection)throw new mv(mn,Tt,kt);xy(En.connection,kt.inputs[mn])}}},h0=function(Tt,kt){if(kt.next){if(!Tt.nextConnection)throw new mv("next",Tt,kt);xy(Tt.nextConnection,kt.next)}},xy=function(Tt,kt){kt.shadow&&Tt.setShadowState(kt.shadow),kt.block&&by(kt.block,Tt.getSourceBlock().workspace,{parentConnection:Tt})},Ey=function(Tt,kt){if(kt)for(Tt.setConnectionTracking(!1),Tt.initSvg(),Tt.render(!1),Tt=Tt.getIcons(),kt=0;kt<Tt.length;kt++)Tt[kt].computeIconLocation();else Tt.initModel()},sO=function(Tt,kt){if(!Tt||!kt)throw Error("Cannot connect null connections.");Tt.targetConnection=kt,kt.targetConnection=Tt},aO=function(Tt,kt){let Bt=null;kt=kt.outputConnection;const zt=kt.getConnectionChecker();for(let mn=0,En;En=Tt.inputList[mn];mn++){const Hn=En.connection;if(Hn&&zt.canConnect(kt,Hn,!1)){if(Bt)return null;Bt=Hn}}return Bt},d0=function(Tt,kt){let Bt;for(;Bt=aO(Tt,kt);)if(Tt=Bt.targetBlock(),!Tt||Tt.isShadow())return Bt;return null},v_=function(Tt){let kt=Tt.outputConnection;return(!kt||Tt.previousConnection&&Tt.previousConnection.isConnected())&&(kt=Tt.previousConnection),kt},f0=function(Tt){const kt=Tt.workspace;var Bt=Tt.getSvgRoot();kt.getAudioManager().play("delete");const zt=kt.getSvgXY(Bt);Bt=Bt.cloneNode(!0),Bt.setAttribute("transform","translate("+zt.x+","+zt.y+")"),kt.getParentSvg().appendChild(Bt),$y(Bt,{x:zt.x,y:zt.y,width:Tt.width,height:Tt.height},kt.RTL,new Date,kt.scale)},$y=function(Tt,kt,Bt,zt,mn){const En=(new Date().getTime()-zt.getTime())/150;1<En?fr(Tt):(Tt.setAttribute("transform","translate("+(kt.x+(Bt?-1:1)*kt.width*mn/2*En)+","+(kt.y+kt.height*mn*En)+") scale("+(1-En)*mn+")"),setTimeout($y,10,Tt,kt,Bt,zt,mn))},_h=function(Tt){const kt=Tt.workspace,Bt=kt.scale;if(kt.getAudioManager().play("click"),!(1>Bt)){var zt=kt.getSvgXY(Tt.getSvgRoot());Tt.outputConnection?(zt.x+=(Tt.RTL?3:-3)*Bt,zt.y+=13*Bt):Tt.previousConnection&&(zt.x+=(Tt.RTL?-23:23)*Bt,zt.y+=3*Bt),Tt=Cn(Er.CIRCLE,{cx:zt.x,cy:zt.y,r:0,fill:"none",stroke:"#888","stroke-width":10},kt.getParentSvg()),lO(Tt,new Date,Bt)}},lO=function(Tt,kt,Bt){const zt=(new Date().getTime()-kt.getTime())/150;1<zt?fr(Tt):(Tt.setAttribute("r",(25*zt*Bt).toString()),Tt.style.opacity=(1-zt).toString(),ZO=setTimeout(lO,10,Tt,kt,Bt))},cO=function(Tt){if(Nu(),Tt.workspace.getAudioManager().play("disconnect"),!(1>Tt.workspace.scale)){var kt=Tt.getHeightWidth().height;kt=Math.atan(10/kt)/Math.PI*180,Tt.RTL||(kt*=-1),vv=Tt.getSvgRoot(),O_(vv,kt,new Date)}},O_=function(Tt,kt,Bt){const zt=(new Date().getTime()-Bt.getTime())/200;let mn="";1>=zt&&(mn=`skewX(${Math.round(Math.sin(zt*Math.PI*3)*(1-zt)*kt)})`,ZO=setTimeout(O_,10,Tt,kt,Bt)),Tt.skew_=mn,Tt.setAttribute("transform",Tt.translate_+Tt.skew_)},Nu=function(){if(vv){ZO&&clearTimeout(ZO);const Tt=vv;Tt.skew_="",Tt.setAttribute("transform",Tt.translate_),vv=null}},b_=function(Tt){tT.copyInternal(Tt)},ho=function(Tt){xm=Tt.toCopyData()},Gm=function(){if(!xm)return null;let Tt=xm.source;return Tt.isFlyout&&(Tt=Tt.targetWorkspace),xm.typeCounts&&Tt.isCapacityAvailable(xm.typeCounts)?Tt.paste(xm.saveInfo):null},Um=function(Tt){return tT.duplicateInternal(Tt)},uO=function(Tt){const kt=xm;b_(Tt);let Bt,zt,mn;return Tt=(mn=(Bt=Tt.toCopyData())==null||(zt=Bt.source)==null?void 0:zt.paste(xm.saveInfo))!=null?mn:null,xm=kt,Tt},hO=function(){return Sv},Ap=function(Tt){Sv=Tt},kp=function(Tt,kt,Bt){if(um(nT,Bt,Cy),kt.length){var zt=wy(kt,Bt);Tv=zt,dO(zt,Tt,Bt),setTimeout(function(){zt.focus()},1),Sv=null}else S_()},wy=function(Tt,kt){const Bt=new WS;Bt.setRole($u.MENU);for(let zt=0;zt<Tt.length;zt++){const mn=Tt[zt],En=new zS(mn.text);En.setRightToLeft(kt),En.setRole($u.MENUITEM),Bt.addChild(En),En.setEnabled(mn.enabled),mn.enabled&&En.onAction(function(){S_(),mn.callback(mn.scope)},{})}return Bt},dO=function(Tt,kt,Bt){const zt=Jp();kt=new Fs(kt.clientY+zt.top,kt.clientY+zt.top,kt.clientX+zt.left,kt.clientX+zt.left),fO(Tt);const mn=Tt.getSize();Bt&&(kt.left+=mn.width,kt.right+=mn.width,zt.left+=mn.width,zt.right+=mn.width),ly(zt,kt,mn,Bt),Tt.focus()},fO=function(Tt){var kt=cm();if(!kt)throw Error("Attempting to create a context menu when widget div is null");kt=Tt.render(kt),tr(kt,"blocklyContextMenu"),Zt(kt,"contextmenu",null,pO),Tt.focus()},pO=function(Tt){Tt.preventDefault(),Tt.stopPropagation()},S_=function(){u_(nT),Sv=null},Cy=function(){Tv&&(Tv.dispose(),Tv=null)},mO=function(Tt,kt){return()=>{Fo();let Bt;try{Bt=Es(kt,Tt.workspace);const zt=Tt.getRelativeToSurfaceXY();zt.x=Tt.RTL?zt.x-dt.config$$module$build$src$core$config.snapRadius:zt.x+dt.config$$module$build$src$core$config.snapRadius,zt.y+=2*dt.config$$module$build$src$core$config.snapRadius,Bt.moveBy(zt.x,zt.y)}finally{_i()}ts()&&!Bt.isShadow()&&to(new(no(Xl))(Bt)),Bt.select()}},p0=function(Tt){return{text:ko.REMOVE_COMMENT,enabled:!0,callback:function(){fo(!0),Tt.dispose(),fo(!1)}}},m0=function(Tt){return{text:ko.DUPLICATE_COMMENT,enabled:!0,callback:function(){Um(Tt)}}},gO=function(Tt,kt){const Bt={enabled:!0};return Bt.text=ko.ADD_COMMENT,Bt.callback=function(){const zt=new tu(Tt,ko.WORKSPACE_COMMENT_DEFAULT_TEXT,tu.DEFAULT_SIZE,tu.DEFAULT_SIZE);var mn=Tt.getInjectionDiv().getBoundingClientRect();mn=new ao(kt.clientX-mn.left,kt.clientY-mn.top);const En=Tt.getOriginOffsetInPixels();mn=ao.difference(mn,En),mn.scale(1/Tt.scale),zt.moveBy(mn.x,mn.y),Tt.rendered&&(zt.initSvg(),zt.render(),zt.select())},Bt},T_=function(Tt,kt,Bt,zt,mn,En){const Hn=En.scrollbar&&En.scrollbar.canScrollVertically();return Tt.horizontal===H0.LEFT?(Bt=mn.absoluteMetrics.left+Bt,Hn&&En.RTL&&(Bt+=Is.scrollbarThickness)):(Bt=mn.absoluteMetrics.left+mn.viewMetrics.width-kt.width-Bt,Hn&&!En.RTL&&(Bt-=Is.scrollbarThickness)),Tt.vertical===Em.TOP?Tt=mn.absoluteMetrics.top+zt:(Tt=mn.absoluteMetrics.top+mn.viewMetrics.height-kt.height-zt,En.scrollbar&&En.scrollbar.canScrollHorizontally()&&(Tt-=Is.scrollbarThickness)),new Fs(Tt,Tt+kt.height,Bt,Bt+kt.width)},Vm=function(Tt,kt){return{horizontal:kt.toolboxMetrics.position===Do.LEFT||Tt.horizontalLayout&&!Tt.RTL?H0.RIGHT:H0.LEFT,vertical:kt.toolboxMetrics.position===Do.BOTTOM?Em.TOP:Em.BOTTOM}},Ay=function(Tt,kt,Bt,zt){const mn=Tt.left,En=Tt.right-Tt.left,Hn=Tt.bottom-Tt.top;for(let pr=0;pr<zt.length;pr++){const Kr=zt[pr];Tt.intersects(Kr)&&(Tt=Bt===e_.UP?Kr.top-Hn-kt:Kr.bottom+kt,Tt=new Fs(Tt,Tt+Hn,mn,mn+En),pr=-1)}return Tt},_O=function(){hs.registry.register({name:Wp.ESCAPE,preconditionFn(Tt){return!Tt.options.readOnly},callback(Tt){return Tt.hideChaff(),!0},keyCodes:[vo.ESC]})},ky=function(){hs.registry.register({name:Wp.DELETE,preconditionFn(Tt){const kt=zn();return!Tt.options.readOnly&&kt!=null&&kt.isDeletable()},callback(Tt,kt){return kt.preventDefault(),Vp.inProgress()?!1:(zn().checkAndDelete(),!0)},keyCodes:[vo.DELETE,vo.BACKSPACE]})},Iy=function(){const Tt=hs.registry.createSerializedKey(vo.C,[vo.CTRL]),kt=hs.registry.createSerializedKey(vo.C,[vo.ALT]),Bt=hs.registry.createSerializedKey(vo.C,[vo.META]);hs.registry.register({name:Wp.COPY,preconditionFn(zt){const mn=zn();return!zt.options.readOnly&&!Vp.inProgress()&&mn!=null&&mn.isDeletable()&&mn.isMovable()},callback(zt,mn){return mn.preventDefault(),zt.hideChaff(),b_(zn()),!0},keyCodes:[Tt,kt,Bt]})},Ry=function(){const Tt=hs.registry.createSerializedKey(vo.X,[vo.CTRL]),kt=hs.registry.createSerializedKey(vo.X,[vo.ALT]),Bt=hs.registry.createSerializedKey(vo.X,[vo.META]);hs.registry.register({name:Wp.CUT,preconditionFn(zt){const mn=zn();return!zt.options.readOnly&&!Vp.inProgress()&&mn!=null&&mn instanceof ep&&mn.isDeletable()&&mn.isMovable()&&!mn.workspace.isFlyout},callback(){const zt=zn();return zt?(b_(zt),zt.checkAndDelete(),!0):!1},keyCodes:[Tt,kt,Bt]})},My=function(){const Tt=hs.registry.createSerializedKey(vo.V,[vo.CTRL]),kt=hs.registry.createSerializedKey(vo.V,[vo.ALT]),Bt=hs.registry.createSerializedKey(vo.V,[vo.META]);hs.registry.register({name:Wp.PASTE,preconditionFn(zt){return!zt.options.readOnly&&!Vp.inProgress()},callback(){return!!Gm()},keyCodes:[Tt,kt,Bt]})},x_=function(){const Tt=hs.registry.createSerializedKey(vo.Z,[vo.CTRL]),kt=hs.registry.createSerializedKey(vo.Z,[vo.ALT]),Bt=hs.registry.createSerializedKey(vo.Z,[vo.META]);hs.registry.register({name:Wp.UNDO,preconditionFn(zt){return!zt.options.readOnly&&!Vp.inProgress()},callback(zt){return zt.hideChaff(),zt.undo(!1),!0},keyCodes:[Tt,kt,Bt]})},E_=function(){const Tt=hs.registry.createSerializedKey(vo.Z,[vo.SHIFT,vo.CTRL]),kt=hs.registry.createSerializedKey(vo.Z,[vo.SHIFT,vo.ALT]),Bt=hs.registry.createSerializedKey(vo.Z,[vo.SHIFT,vo.META]),zt=hs.registry.createSerializedKey(vo.Y,[vo.CTRL]);hs.registry.register({name:Wp.REDO,preconditionFn(mn){return!Vp.inProgress()&&!mn.options.readOnly},callback(mn){return mn.hideChaff(),mn.undo(!0),!0},keyCodes:[Tt,kt,Bt,zt]})},$_=function(){_O(),ky(),Iy(),Ry(),My(),x_(),E_()},lp=function(Tt){return Tt.startPublishing!==void 0&&Tt.stopPublishing!==void 0},g0=function(Tt){return Tt.doProcedureUpdate!==void 0},bu=function(Tt){for(const kt of Tt.getAllBlocks(!1))g0(kt)&&kt.doProcedureUpdate()},w_=function(Tt){const kt=Tt.getBlocksByType("procedures_defnoreturn",!1).map(function(Bt){return Bt.getProcedureDef()});return Tt=Tt.getBlocksByType("procedures_defreturn",!1).map(function(Bt){return Bt.getProcedureDef()}),kt.sort(_0),Tt.sort(_0),[kt,Tt]},_0=function(Tt,kt){return Tt[0].localeCompare(kt[0],void 0,{sensitivity:"base"})},y0=function(Tt,kt){if(kt.isInFlyout)return Tt;for(Tt=Tt||ko.UNNAMED_KEY||"unnamed";!yO(Tt,kt.workspace,kt);){const Bt=Tt.match(/^(.*?)(\d+)$/);Tt=Bt?Bt[1]+(parseInt(Bt[2])+1):Tt+"2"}return Tt},yO=function(Tt,kt,Bt){return!v0(Tt,kt,Bt)},v0=function(Tt,kt,Bt){kt=kt.getAllBlocks(!1);for(let mn=0;mn<kt.length;mn++)if(kt[mn]!==Bt){var zt=kt[mn];if(zt.getProcedureDef&&(zt=zt.getProcedureDef(),tp.equals(zt[0],Tt)))return!0}return!1},dS=function(Tt){var kt=this.getSourceBlock();if(!kt)throw new Ys;Tt=Tt.trim();const Bt=y0(Tt,kt),zt=this.getValue();if(zt!==Tt&&zt!==Bt)for(Tt=kt.workspace.getAllBlocks(!1),kt=0;kt<Tt.length;kt++){const mn=Tt[kt];mn.renameProcedure&&mn.renameProcedure(zt,Bt)}return Bt},Wm=function(Tt){function kt(En,Hn){for(let Kr=0;Kr<En.length;Kr++){var pr=En[Kr][0];const lo=En[Kr][1],es=Po("block");es.setAttribute("type",Hn),es.setAttribute("gap","16");const ws=Po("mutation");for(ws.setAttribute("name",pr),es.appendChild(ws),pr=0;pr<lo.length;pr++){const Wu=Po("arg");Wu.setAttribute("name",lo[pr]),ws.appendChild(Wu)}Bt.push(es)}}const Bt=[];if(so.procedures_defnoreturn){var zt=Po("block");zt.setAttribute("type","procedures_defnoreturn"),zt.setAttribute("gap","16");var mn=Po("field");mn.setAttribute("name","NAME"),mn.appendChild(ba(ko.PROCEDURES_DEFNORETURN_PROCEDURE)),zt.appendChild(mn),Bt.push(zt)}return so.procedures_defreturn&&(zt=Po("block"),zt.setAttribute("type","procedures_defreturn"),zt.setAttribute("gap","16"),mn=Po("field"),mn.setAttribute("name","NAME"),mn.appendChild(ba(ko.PROCEDURES_DEFRETURN_PROCEDURE)),zt.appendChild(mn),Bt.push(zt)),so.procedures_ifreturn&&(zt=Po("block"),zt.setAttribute("type","procedures_ifreturn"),zt.setAttribute("gap","16"),Bt.push(zt)),Bt.length&&Bt[Bt.length-1].setAttribute("gap","24"),Tt=w_(Tt),kt(Tt[0],"procedures_callnoreturn"),kt(Tt[1],"procedures_callreturn"),Bt},O0=function(Tt){var kt=[],Bt=Tt.getBlocksByType("procedures_mutatorarg",!1);for(let En=0,Hn;Hn=Bt[En];En++)kt.push(Hn.getFieldValue("NAME"));Bt=Po("xml");const zt=Po("block");zt.setAttribute("type","procedures_mutatorarg");const mn=Po("field");mn.setAttribute("name","NAME"),kt=Yp(_T,kt),kt=ba(kt),mn.appendChild(kt),zt.appendChild(mn),Bt.appendChild(zt),Tt.updateToolbox(Bt)},ks=function(Tt){if(Tt.type===Om&&Tt.bubbleType==="mutator"&&Tt.isOpen&&Tt.blockId){Tt=vn(Tt.workspaceId).getBlockById(Tt.blockId);var kt=Tt.type;(kt==="procedures_defnoreturn"||kt==="procedures_defreturn")&&(Tt=Tt.mutator.getWorkspace(),O0(Tt),Tt.addChangeListener(Ho))}},Ho=function(Tt){(Tt.type===Xl||Tt.type===Gp||Tt.type===yl)&&(Tt=vn(Tt.workspaceId),O0(Tt))},Ns=function(Tt,kt){const Bt=[];kt=kt.getAllBlocks(!1);for(let mn=0;mn<kt.length;mn++){var zt=kt[mn];zt.getProcedureCall&&(zt=zt.getProcedureCall())&&tp.equals(zt,Tt)&&Bt.push(kt[mn])}return Bt},Gs=function(Tt){const kt=Co();var Bt=Tt.getProcedureDef()[0];const zt=Tt.mutationToDom(!0);Tt=Ns(Bt,Tt.workspace);for(let En=0,Hn;Hn=Tt[En];En++){Bt=(Bt=Hn.mutationToDom())&&$l(Bt),Hn.domToMutation&&Hn.domToMutation(zt);var mn=Hn.mutationToDom();mn=mn&&$l(mn),Bt!==mn&&(Ro(!1),to(new(no(yl))(Hn,"mutation",null,Bt,mn)),Ro(kt))}},$a=function(Tt,kt){kt=kt.getAllBlocks(!1);for(let zt=0;zt<kt.length;zt++){var Bt=kt[zt];if(Bt.getProcedureDef&&(Bt=Bt.getProcedureDef())&&tp.equals(Bt[0],Tt))return kt[zt]}return null},_c=function(Tt){return Tt.isDynamic},cp=function(){return Kx},js=function(){vt("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Kx=!1},up=function(Tt,kt){So(ro.RENDERER,Tt,kt)},zm=function(Tt){sr(ro.RENDERER,Tt)},b0=function(){vt("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),js()},S0=function(Tt,kt,Bt){return Tt=new(Ir(ro.RENDERER,Tt))(Tt),Tt.init(kt,Bt),Tt},Hm=function(Tt){ru(Tt.getTargetWorkspace(),void 0,"String")},zl=function(Tt){ru(Tt.getTargetWorkspace(),void 0,"Number")},T0=function(Tt){ru(Tt.getTargetWorkspace(),void 0,"Colour")},C_=function(Tt){let kt=[],Bt=document.createElement("button");return Bt.setAttribute("text",ko.NEW_STRING_VARIABLE),Bt.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),kt.push(Bt),Bt=document.createElement("button"),Bt.setAttribute("text",ko.NEW_NUMBER_VARIABLE),Bt.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),kt.push(Bt),Bt=document.createElement("button"),Bt.setAttribute("text",ko.NEW_COLOUR_VARIABLE),Bt.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),kt.push(Bt),Tt.registerButtonCallback("CREATE_VARIABLE_STRING",Hm),Tt.registerButtonCallback("CREATE_VARIABLE_NUMBER",zl),Tt.registerButtonCallback("CREATE_VARIABLE_COLOUR",T0),Tt=mm(Tt),kt=kt.concat(Tt)},mm=function(Tt){Tt=Tt.getAllVariables();const kt=[];if(0<Tt.length){if(so.variables_set_dynamic){var Bt=Tt[Tt.length-1];const zt=Po("block");zt.setAttribute("type","variables_set_dynamic"),zt.setAttribute("gap","24"),zt.appendChild(Vo(Bt)),kt.push(zt)}if(so.variables_get_dynamic){Tt.sort(ov.compareByName);for(let zt=0,mn;mn=Tt[zt];zt++)Bt=Po("block"),Bt.setAttribute("type","variables_get_dynamic"),Bt.setAttribute("gap","8"),Bt.appendChild(Vo(mn)),kt.push(Bt)}}return kt},x0=function(Tt){Tt.resizeContents()},Py=function(Tt){const kt=Object.create(null),Bt=Oo(ro.SERIALIZER,!0);for(const zt in Bt){let mn;const En=(mn=Bt[zt])==null?void 0:mn.save(Tt);En&&(kt[zt]=En)}return kt},Ip=function(Tt,kt,{recordUndo:Bt=!1}={}){var zt=Oo(ro.SERIALIZER,!0);if(zt){zt=Object.entries(zt).sort((En,Hn)=>Hn[1].priority-En[1].priority);var mn=Co();Ro(Bt),(Bt=Mo())||fo(!0),Dr(),kt instanceof Op&&kt.setResizesEnabled(!1);for(const[,En]of zt.reverse()){let Hn;(Hn=En)==null||Hn.clear(kt)}for(let[En,Hn]of zt.reverse())if(Tt[En]){let pr;(pr=Hn)==null||pr.load(Tt[En],kt)}kt instanceof Op&&kt.setResizesEnabled(!0),_r(),to(new(no(D0))(kt)),fo(Bt),Ro(mn)}},Qm=function(Tt){const kt={id:Tt.getId(),name:Tt.getName(),returnTypes:Tt.getReturnTypes()};return Tt.getParameters().length&&(kt.parameters=Tt.getParameters().map(Bt=>_d(Bt))),kt},_d=function(Tt){const kt={id:Tt.getId(),name:Tt.getName()};return Tt.getTypes().length&&(kt.types=Tt.getTypes()),kt},jm=function(Tt,kt,Bt,zt){if(Tt=new Tt(zt,Bt.name,Bt.id).setReturnTypes(Bt.returnTypes),!Bt.parameters)return Tt;for(const[mn,En]of Bt.parameters.entries())Tt.insertParameter(gm(kt,En,zt),mn);return Tt},gm=function(Tt,kt,Bt){return Tt=new Tt(Bt,kt.name,kt.id),kt.types&&Tt.setTypes(kt.types),Tt},Xm=function(Tt,kt,Bt){const zt=Bt.getBoundingRectangle(),mn=zt.right-zt.left,En=ar(kt.top,zt.top,kt.top+kt.height-(zt.bottom-zt.top))-zt.top;let Hn=kt.left;return kt=kt.left+kt.width-mn,Tt.RTL?Hn=Math.min(kt,Hn):kt=Math.max(Hn,kt),(Tt=ar(Hn,zt.left,kt)-zt.left)||En?(Bt.moveBy(Tt,En),!0):!1},A_=function(Tt){return kt=>{var Bt=Tt.getMetricsManager();if(Bt.hasFixedEdges()&&!Tt.isDragging()){var zt;if(wS.indexOf((zt=kt.type)!=null?zt:"")!==-1){zt=Bt.getScrollMetrics(!0);const mn=E0(Tt,kt);mn&&(Bt=Mo(),fo(kt.group),Xm(Tt,zt,mn)&&!kt.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),Bt!==null&&fo(Bt))}else kt.type===L_&&kt.scale&&kt.oldScale&&kt.scale>kt.oldScale&&_l(Tt)}}},E0=function(Tt,kt){let Bt=null;switch(kt.type){case Xl:case hu:(Bt=Tt.getBlockById(kt.blockId))&&(Bt=Bt.getRootBlock());break;case N_:case bm:Bt=Tt.getCommentById(kt.commentId)}return Bt},_l=function(Tt){var kt=Tt.getMetricsManager();if(kt.hasFixedEdges()&&!Tt.isDragging()){kt=kt.getScrollMetrics(!0);var Bt=Tt.getTopBoundedElements();for(let zt=0,mn;mn=Bt[zt];zt++)Xm(Tt,kt,mn)}},Rp=function(Tt,kt){if(typeof Tt=="string"&&(Tt=document.getElementById(Tt)||document.querySelector(Tt)),!Tt||!Pr(document,Tt))throw Error("Error: container is not in current document.");kt=new yp(kt||{});const Bt=document.createElement("div");Bt.className="injectionDiv",Bt.tabIndex=0,fs(Bt,xs.LABEL,ko.WORKSPACE_ARIA_LABEL),Tt.appendChild(Bt),Tt=Su(Bt,kt);const zt=new ME(Bt),mn=new RE(Bt),En=$0(Tt,kt,zt,mn);return eu(En),Pn(En),Qn(En),Bt.addEventListener("focusin",function(){Pn(En)}),En},Su=function(Tt,kt){Tt.setAttribute("dir","LTR"),ys(kt.hasCss,kt.pathToMedia),Tt=Cn(Er.SVG,{xmlns:uu,"xmlns:html":Bu,"xmlns:xlink":xu,version:"1.1",class:"blocklySvg",tabindex:"0"},Tt);const Bt=Cn(Er.DEFS,{},Tt),zt=String(Math.random()).substring(2);return kt.gridPattern=gT.createDom(zt,kt.gridOptions,Bt),Tt},$0=function(Tt,kt,Bt,zt){kt.parentWorkspace=null,kt=new Op(kt,Bt,zt),Bt=kt.options,kt.scale=Bt.zoomOptions.startScale,Tt.appendChild(kt.createDom("blocklyMainBackground")),zt=kt.getInjectionDiv();var mn=kt.getRenderer().getClassName();return mn&&tr(zt,mn),(mn=kt.getTheme().getClassName())&&tr(zt,mn),!Bt.hasCategories&&Bt.languageTree&&(zt=kt.addFlyout(Er.SVG),Or(zt,Tt)),Bt.hasTrashcan&&kt.addTrashcan(),Bt.zoomOptions&&Bt.zoomOptions.controls&&kt.addZoomControls(),kt.getThemeManager().subscribe(Tt,"workspaceBackgroundColour","background-color"),kt.translate(0,0),kt.addChangeListener(A_(kt)),Qn(kt),au(),Vr(),s_(),kt},eu=function(Tt){const kt=Tt.options;var Bt=Tt.getParentSvg();if(Zt(Bt.parentNode,"contextmenu",null,function(zt){hn(zt)||zt.preventDefault()}),Bt=Zt(window,"resize",null,function(){Tt.hideChaff(!0),Qn(Tt),_l(Tt)}),Tt.setResizeHandlerWrapper(Bt),Dy(),kt.languageTree){Bt=Tt.getToolbox();const zt=Tt.getFlyout(!0);Bt?Bt.init():zt&&(zt.init(Tt),zt.show(kt.languageTree),typeof zt.scrollToStart=="function"&&zt.scrollToStart())}kt.hasTrashcan&&Tt.trashcan.init(),kt.zoomOptions&&kt.zoomOptions.controls&&Tt.zoomControls_.init(),kt.moveOptions&&kt.moveOptions.scrollbars?(Tt.scrollbar=new RT(Tt,kt.moveOptions.scrollbars===!0||!!kt.moveOptions.scrollbars.horizontal,kt.moveOptions.scrollbars===!0||!!kt.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),Tt.scrollbar.resize()):Tt.setMetrics({x:.5,y:.5}),kt.hasSounds&&Ly(kt.pathToMedia,Tt)},vO=function(Tt){const kt=In();kt&&!(hn(Tt)||kt.rendered&&!kt.isVisible())&&hs.registry.onKeyDown(kt,Tt)},Dy=function(){PE||(Zt(document,"scroll",null,function(){const Tt=bn();for(let kt=0,Bt;Bt=Tt[kt];kt++)Bt instanceof Op&&Bt.updateInverseScreenCTM()}),Zt(document,"keydown",null,vO),Kt(document,"touchend",null,Et),Kt(document,"touchcancel",null,Et),$o&&Zt(window,"orientationchange",document,function(){Qn(In())})),PE=!0},Ly=function(Tt,kt){function Bt(){for(;mn.length;)cn(mn.pop());zt.preload()}const zt=kt.getAudioManager();zt.load([Tt+"click.mp3",Tt+"click.wav",Tt+"click.ogg"],"click"),zt.load([Tt+"disconnect.wav",Tt+"disconnect.mp3",Tt+"disconnect.ogg"],"disconnect"),zt.load([Tt+"delete.mp3",Tt+"delete.ogg",Tt+"delete.wav"],"delete");const mn=[];mn.push(Zt(document,"pointermove",null,Bt,!0)),mn.push(Zt(document,"touchstart",null,Bt,!0))},OO=function(Tt,kt,Bt){if(Tt=Tt.getProcedureMap().get(kt),!Tt)throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return Tt.getParameters().find(zt=>zt.getId()===Bt)},hp=function(){cs.registry.register({displayText(){return ko.UNDO},preconditionFn(Tt){return 0<Tt.workspace.getUndoStack().length?"enabled":"disabled"},callback(Tt){Tt.workspace.undo(!1)},scopeType:cs.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Ny=function(){cs.registry.register({displayText(){return ko.REDO},preconditionFn(Tt){return 0<Tt.workspace.getRedoStack().length?"enabled":"disabled"},callback(Tt){Tt.workspace.undo(!0)},scopeType:cs.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},By=function(){cs.registry.register({displayText(){return ko.CLEAN_UP},preconditionFn(Tt){return Tt.workspace.isMovable()?1<Tt.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(Tt){Tt.workspace.cleanUp()},scopeType:cs.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},w0=function(Tt,kt){function Bt(En){mn--,En.setCollapsed(Tt),mn===0&&fo(!1)}let zt=0,mn=0;fo(!0);for(let En=0;En<kt.length;En++){let Hn=kt[En];for(;Hn;)mn++,setTimeout(Bt.bind(null,Hn),zt),Hn=Hn.getNextBlock(),zt+=10}},Mp=function(){cs.registry.register({displayText(){return ko.COLLAPSE_ALL},preconditionFn(Tt){if(Tt.workspace.options.collapse){Tt=Tt.workspace.getTopBlocks(!1);for(let kt=0;kt<Tt.length;kt++){let Bt=Tt[kt];for(;Bt;){if(!Bt.isCollapsed())return"enabled";Bt=Bt.getNextBlock()}}return"disabled"}return"hidden"},callback(Tt){w0(!0,Tt.workspace.getTopBlocks(!0))},scopeType:cs.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Fy=function(){cs.registry.register({displayText(){return ko.EXPAND_ALL},preconditionFn(Tt){if(Tt.workspace.options.collapse){Tt=Tt.workspace.getTopBlocks(!1);for(let kt=0;kt<Tt.length;kt++){let Bt=Tt[kt];for(;Bt;){if(Bt.isCollapsed())return"enabled";Bt=Bt.getNextBlock()}}return"disabled"}return"hidden"},callback(Tt){w0(!1,Tt.workspace.getTopBlocks(!0))},scopeType:cs.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Gy=function(Tt,kt){if(Tt.isDeletable())Array.prototype.push.apply(kt,Tt.getDescendants(!1));else{Tt=Tt.getChildren(!1);for(let Bt=0;Bt<Tt.length;Bt++)Gy(Tt[Bt],kt)}},k_=function(Tt){const kt=[];Tt=Tt.getTopBlocks(!0);for(let Bt=0;Bt<Tt.length;Bt++)Gy(Tt[Bt],kt);return kt},_m=function(Tt,kt){fo(kt);const Bt=Tt.shift();Bt&&(Bt.isDeadOrDying()?_m(Tt,kt):(Bt.dispose(!1,!0),setTimeout(_m,10,Tt,kt))),fo(!1)},bO=function(){cs.registry.register({displayText(Tt){return Tt.workspace?(Tt=k_(Tt.workspace).length,Tt===1?ko.DELETE_BLOCK:ko.DELETE_X_BLOCKS.replace("%1",String(Tt))):""},preconditionFn(Tt){return Tt.workspace&&0<k_(Tt.workspace).length?"enabled":"disabled"},callback(Tt){if(Tt.workspace){Tt.workspace.cancelCurrentGesture();var kt=k_(Tt.workspace),Bt=Ao();2>kt.length?_m(kt,Bt):mu(ko.DELETE_ALL_BLOCKS.replace("%1",String(kt.length)),function(zt){zt&&_m(kt,Bt)})}},scopeType:cs.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},fS=function(){hp(),Ny(),By(),Mp(),Fy(),bO()},Uy=function(){cs.registry.register({displayText(){return ko.DUPLICATE_BLOCK},preconditionFn(Tt){return Tt=Tt.block,!Tt.isInFlyout&&Tt.isDeletable()&&Tt.isMovable()?Tt.isDuplicatable()?"enabled":"disabled":"hidden"},callback(Tt){Tt.block&&Um(Tt.block)},scopeType:cs.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Vy=function(){cs.registry.register({displayText(Tt){return Tt.block.getCommentIcon()?ko.REMOVE_COMMENT:ko.ADD_COMMENT},preconditionFn(Tt){return Tt=Tt.block,!Tt.isInFlyout&&Tt.workspace.options.comments&&!Tt.isCollapsed()&&Tt.isEditable()?"enabled":"hidden"},callback(Tt){Tt=Tt.block,Tt.getCommentIcon()?Tt.setCommentText(null):Tt.setCommentText("")},scopeType:cs.ScopeType.BLOCK,id:"blockComment",weight:2})},Pp=function(){cs.registry.register({displayText(Tt){return Tt.block.getInputsInline()?ko.EXTERNAL_INPUTS:ko.INLINE_INPUTS},preconditionFn(Tt){if(Tt=Tt.block,!Tt.isInFlyout&&Tt.isMovable()&&!Tt.isCollapsed()){for(let kt=1;kt<Tt.inputList.length;kt++)if(Tt.inputList[kt-1].type!==Uo.STATEMENT&&Tt.inputList[kt].type!==Uo.STATEMENT)return"enabled"}return"hidden"},callback(Tt){Tt.block.setInputsInline(!Tt.block.getInputsInline())},scopeType:cs.ScopeType.BLOCK,id:"blockInline",weight:3})},SO=function(){cs.registry.register({displayText(Tt){return Tt.block.isCollapsed()?ko.EXPAND_BLOCK:ko.COLLAPSE_BLOCK},preconditionFn(Tt){return Tt=Tt.block,!Tt.isInFlyout&&Tt.isMovable()&&Tt.workspace.options.collapse?"enabled":"hidden"},callback(Tt){Tt.block.setCollapsed(!Tt.block.isCollapsed())},scopeType:cs.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Dp=function(){cs.registry.register({displayText(Tt){return Tt.block.isEnabled()?ko.DISABLE_BLOCK:ko.ENABLE_BLOCK},preconditionFn(Tt){return Tt=Tt.block,!Tt.isInFlyout&&Tt.workspace.options.disable&&Tt.isEditable()?Tt.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(Tt){Tt=Tt.block;const kt=Mo();kt||fo(!0),Tt.setEnabled(!Tt.isEnabled()),kt||fo(!1)},scopeType:cs.ScopeType.BLOCK,id:"blockDisable",weight:5})},Wy=function(){cs.registry.register({displayText(Tt){var kt=Tt.block;return Tt=kt.getDescendants(!1).length,(kt=kt.getNextBlock())&&(Tt-=kt.getDescendants(!1).length),Tt===1?ko.DELETE_BLOCK:ko.DELETE_X_BLOCKS.replace("%1",String(Tt))},preconditionFn(Tt){return!Tt.block.isInFlyout&&Tt.block.isDeletable()?"enabled":"hidden"},callback(Tt){Tt.block&&Tt.block.checkAndDelete()},scopeType:cs.ScopeType.BLOCK,id:"blockDelete",weight:6})},Hl=function(){cs.registry.register({displayText(){return ko.HELP},preconditionFn(Tt){return Tt=Tt.block,(typeof Tt.helpUrl=="function"?Tt.helpUrl():Tt.helpUrl)?"enabled":"hidden"},callback(Tt){Tt.block.showHelp()},scopeType:cs.ScopeType.BLOCK,id:"blockHelp",weight:7})},pS=function(){Uy(),Vy(),Pp(),SO(),Dp(),Wy(),Hl()},zy=function(){fS(),pS()},mS=function(Tt){const kt=[];Tt=Tt.getDescendants(!1);for(let Bt=0,zt;zt=Tt[Bt];Bt++){const mn=zt.getIcons();for(let En=0;En<mn.length;En++){const Hn={location:mn[En].getIconLocation(),icon:mn[En]};kt.push(Hn)}}return kt},gS=function(Tt){In().hideChaff(Tt)},TO=function(Tt){vt("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),x0(Tt)},xO=function(Tt){vt("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),b_(Tt)},_S=function(){return vt("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!Gm()},Tu=function(Tt){vt("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),Um(Tt)},Hy=function(Tt){return vt("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),o_(Tt)},yS=function(Tt){return vt("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),a_(Tt)},Lp=function(Tt,kt,Bt,zt){return vt("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),Kt(Tt,kt,Bt,zt)},C0=function(Tt){return vt("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),cn(Tt)},ym=function(Tt,kt,Bt,zt,mn,En){return vt("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),Zt(Tt,kt,Bt,zt,mn)},xo=xo||{};xo.scope={},xo.ASSUME_ES5=!1,xo.ASSUME_NO_NATIVE_MAP=!1,xo.ASSUME_NO_NATIVE_SET=!1,xo.SIMPLE_FROUND_POLYFILL=!1,xo.ISOLATE_POLYFILLS=!1,xo.FORCE_POLYFILL_PROMISE=!1,xo.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,xo.defineProperty=xo.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(Tt,kt,Bt){return Tt==Array.prototype||Tt==Object.prototype||(Tt[kt]=Bt.value),Tt},xo.getGlobal=function(Tt){Tt=[typeof globalThis=="object"&&globalThis,Tt,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var kt=0;kt<Tt.length;++kt){var Bt=Tt[kt];if(Bt&&Bt.Math==Math)return Bt}throw Error("Cannot find global object")},xo.global=xo.getGlobal(this),xo.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",xo.TRUST_ES6_POLYFILLS=!xo.ISOLATE_POLYFILLS||xo.IS_SYMBOL_NATIVE,xo.polyfills={},xo.propertyToPolyfillSymbol={},xo.POLYFILL_PREFIX="$jscp$",xo.polyfill=function(Tt,kt,Bt,zt){kt&&(xo.ISOLATE_POLYFILLS?xo.polyfillIsolated(Tt,kt,Bt,zt):xo.polyfillUnisolated(Tt,kt,Bt,zt))},xo.polyfillUnisolated=function(Tt,kt,Bt,zt){for(Bt=xo.global,Tt=Tt.split("."),zt=0;zt<Tt.length-1;zt++){var mn=Tt[zt];if(!(mn in Bt))return;Bt=Bt[mn]}Tt=Tt[Tt.length-1],zt=Bt[Tt],kt=kt(zt),kt!=zt&&kt!=null&&xo.defineProperty(Bt,Tt,{configurable:!0,writable:!0,value:kt})},xo.polyfillIsolated=function(Tt,kt,Bt,zt){var mn=Tt.split(".");Tt=mn.length===1,zt=mn[0],zt=!Tt&&zt in xo.polyfills?xo.polyfills:xo.global;for(var En=0;En<mn.length-1;En++){var Hn=mn[En];if(!(Hn in zt))return;zt=zt[Hn]}mn=mn[mn.length-1],Bt=xo.IS_SYMBOL_NATIVE&&Bt==="es6"?zt[mn]:null,kt=kt(Bt),kt!=null&&(Tt?xo.defineProperty(xo.polyfills,mn,{configurable:!0,writable:!0,value:kt}):kt!==Bt&&(xo.propertyToPolyfillSymbol[mn]===void 0&&(Bt=1e9*Math.random()>>>0,xo.propertyToPolyfillSymbol[mn]=xo.IS_SYMBOL_NATIVE?xo.global.Symbol(mn):xo.POLYFILL_PREFIX+Bt+"$"+mn),xo.defineProperty(zt,xo.propertyToPolyfillSymbol[mn],{configurable:!0,writable:!0,value:kt})))},xo.polyfill("globalThis",function(Tt){return Tt||xo.global},"es_2020","es3"),xo.polyfill("Object.getOwnPropertyDescriptors",function(Tt){return Tt||function(kt){for(var Bt={},zt=Reflect.ownKeys(kt),mn=0;mn<zt.length;mn++)Bt[zt[mn]]=Object.getOwnPropertyDescriptor(kt,zt[mn]);return Bt}},"es8","es5"),xo.arrayIteratorImpl=function(Tt){var kt=0;return function(){return kt<Tt.length?{done:!1,value:Tt[kt++]}:{done:!0}}},xo.arrayIterator=function(Tt){return{next:xo.arrayIteratorImpl(Tt)}},xo.initSymbol=function(){},xo.iteratorPrototype=function(Tt){return Tt={next:Tt},Tt[Symbol.iterator]=function(){return this},Tt},xo.iteratorFromArray=function(Tt,kt){Tt instanceof String&&(Tt+="");var Bt=0,zt=!1,mn={next:function(){if(!zt&&Bt<Tt.length){var En=Bt++;return{value:kt(En,Tt[En]),done:!1}}return zt=!0,{done:!0,value:void 0}}};return mn[Symbol.iterator]=function(){return mn},mn},xo.polyfill("Array.prototype.values",function(Tt){return Tt||function(){return xo.iteratorFromArray(this,function(kt,Bt){return Bt})}},"es8","es3"),xo.owns=function(Tt,kt){return Object.prototype.hasOwnProperty.call(Tt,kt)},xo.polyfill("Object.values",function(Tt){return Tt||function(kt){var Bt=[],zt;for(zt in kt)xo.owns(kt,zt)&&Bt.push(kt[zt]);return Bt}},"es8","es3"),xo.polyfill("Array.prototype.flat",function(Tt){return Tt||function(kt){kt=kt===void 0?1:kt;for(var Bt=[],zt=0;zt<this.length;zt++){var mn=this[zt];Array.isArray(mn)&&0<kt?(mn=Array.prototype.flat.call(mn,kt-1),Bt.push.apply(Bt,mn)):Bt.push(mn)}return Bt}},"es9","es5"),xo.polyfill("Object.entries",function(Tt){return Tt||function(kt){var Bt=[],zt;for(zt in kt)xo.owns(kt,zt)&&Bt.push([zt,kt[zt]]);return Bt}},"es8","es3");var Ml=Ml||{};Ml.global=globalThis||root,Ml.define=function(Tt,kt){return kt},Ml.DEBUG=!1,Ml.DISALLOW_TEST_ONLY_CODE=!Ml.DEBUG,Ml.provide=function(Tt){},Ml.module=function(Tt){},Ml.module.get=function(Tt){},Ml.module.declareLegacyNamespace=function(){},Ml.setTestOnly=function(Tt){if(Ml.DISALLOW_TEST_ONLY_CODE)throw Tt=Tt||"",Error("Importing test-only code into non-debug environment"+(Tt?": "+Tt:"."))},Ml.require=function(Tt){},Ml.requireType=function(Tt){};var Bs={};Bs.warn=vt;var vS=750,Qy="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),I_=null,Np={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},R_=0,Ql={};Ql.TOUCH_ENABLED=Qy,Ql.TOUCH_MAP=Np,Ql.checkTouchIdentifier=Dt,Ql.clearTouchIdentifier=Ct,Ql.getTouchIdentifierFromEvent=Rt,Ql.isMouseOrTouchEvent=Ft,Ql.isTouchEvent=Ut,Ql.longStart=St,Ql.longStop=Et,Ql.setClientFromTouch=Nt,Ql.shouldHandleEvent=At,Ql.splitEventByTouches=Wt;var jy,EO,Ht,ln,yn,On,Mn,Bn,dr,Ar;(function(Tt){function kt(zt){return Bt.indexOf(zt.toUpperCase())!==-1}jy=Tt;const Bt=jy.toUpperCase();EO=kt("JavaFX"),Ht=kt("WebKit"),ln=kt("Gecko")&&!Ht,yn=kt("Android"),Tt=globalThis.navigator&&globalThis.navigator.maxTouchPoints,On=kt("iPad")||kt("Macintosh")&&0<Tt,Mn=kt("iPhone")&&!On,Bn=kt("Macintosh"),dr=On||yn&&!kt("Mobile")||kt("Silk"),Ar=!dr&&(Mn||yn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Zr=jy,io=EO,yo=ln,No=yn,$o=On,ps=Mn,Eo=Bn,na=Ar,Us={};Us.ANDROID=No,Us.GECKO=yo,Us.IPAD=$o,Us.IPHONE=ps,Us.JavaFx=io,Us.MAC=Eo,Us.MOBILE=na,Us.raw=Zr;var Hr=40,Rr=125,jr={};jr.bind=Kt,jr.conditionalBind=Zt,jr.getScrollDeltaPixels=gn,jr.isRightButton=dn,jr.isTargetInput=hn,jr.mouseToSvg=pn,jr.unbind=cn;var so=Object.create(null),bo,Wo,Go,ns,Ts,Jo;bo=Object.create(null),Go=null,Ts=[],Jo={defineBlocksWithJsonArrayInternal:Nn},dt.module$build$src$core$common={},dt.module$build$src$core$common.TEST_ONLY=Jo,dt.module$build$src$core$common.createBlockDefinitionsFromJsonArray=jn,dt.module$build$src$core$common.defineBlocks=Ln,dt.module$build$src$core$common.defineBlocksWithJsonArray=Un,dt.module$build$src$core$common.draggingConnections=Ts,dt.module$build$src$core$common.getAllWorkspaces=bn,dt.module$build$src$core$common.getBlockTypeCounts=qn,dt.module$build$src$core$common.getMainWorkspace=In,dt.module$build$src$core$common.getParentContainer=Gn,dt.module$build$src$core$common.getSelected=zn,dt.module$build$src$core$common.getWorkspaceById=vn,dt.module$build$src$core$common.registerWorkspace=$n,dt.module$build$src$core$common.setMainWorkspace=Pn,dt.module$build$src$core$common.setParentContainer=xn,dt.module$build$src$core$common.setSelected=An,dt.module$build$src$core$common.svgResize=Qn,dt.module$build$src$core$common.unregisterWorkpace=Tn;var uu="http://www.w3.org/2000/svg",Bu="http://www.w3.org/1999/xhtml",xu="http://www.w3.org/1999/xlink",Bp;(function(Tt){Tt[Tt.ELEMENT_NODE=1]="ELEMENT_NODE",Tt[Tt.TEXT_NODE=3]="TEXT_NODE",Tt[Tt.COMMENT_NODE=8]="COMMENT_NODE",Tt[Tt.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(Bp||(Bp={}));var dp=null,OS=0,$O=null,ga={};ga.HTML_NS=Bu,ga.NodeType=Bp,ga.SVG_NS=uu,ga.XLINK_NS=xu,ga.addClass=tr,ga.containsNode=Pr,ga.createSvgElement=Cn,ga.getFastTextWidth=Dn,ga.getFastTextWidthWithSizeString=yr,ga.getTextWidth=Nr,ga.hasClass=br,ga.insertAfter=Or,ga.measureFontMetrics=hr,ga.removeClass=Zn,ga.removeClasses=ir,ga.removeNode=fr,ga.setCssTransform=zr,ga.startTextWidthCache=Dr,ga.stopTextWidthCache=_r;var wO={};wO.clamp=ar,wO.toDegrees=Yn,wO.toRadians=Jn;var Fs=class{constructor(Tt,kt,Bt,zt){this.top=Tt,this.bottom=kt,this.left=Bt,this.right=zt}contains(Tt,kt){return Tt>=this.left&&Tt<=this.right&&kt>=this.top&&kt<=this.bottom}intersects(Tt){return!(this.left>Tt.right||this.right<Tt.left||this.top>Tt.bottom||this.bottom<Tt.top)}},ao=class{constructor(Tt,kt){this.x=Tt,this.y=kt}clone(){return new ao(this.x,this.y)}scale(Tt){return this.x*=Tt,this.y*=Tt,this}translate(Tt,kt){return this.x+=Tt,this.y+=kt,this}static equals(Tt,kt){return Tt===kt?!0:Tt&&kt?Tt.x===kt.x&&Tt.y===kt.y:!1}static distance(Tt,kt){const Bt=Tt.x-kt.x;return Tt=Tt.y-kt.y,Math.sqrt(Bt*Bt+Tt*Tt)}static magnitude(Tt){return Math.sqrt(Tt.x*Tt.x+Tt.y*Tt.y)}static difference(Tt,kt){return new ao(Tt.x-kt.x,Tt.y-kt.y)}static sum(Tt,kt){return new ao(Tt.x+kt.x,Tt.y+kt.y)}},Pl=class{constructor(Tt,kt){this.width=Tt,this.height=kt}static equals(Tt,kt){return Tt===kt?!0:Tt&&kt?Tt.width===kt.width&&Tt.height===kt.height:!1}},ex={getSizeInternal:gr},Fp={};Fp.TEST_ONLY=ex,Fp.getBorderBox=Fr,Fp.getCascadedStyle=rr,Fp.getComputedStyle=Wn,Fp.getContainerOffsetToScrollInto=Yr,Fp.getPageOffset=lr,Fp.getSize=Sr,Fp.getViewportPageOffset=xr,Fp.scrollIntoContainerView=mr;var Xy=16,bS=1,tx=12,SS=16,CO=.25,TS=null,M_=null,A0="",k0="",as,I0,P_,xS=null,Ym=null,nx=null,ES={getBoundsInfo:function(){const Tt=lr(xS),kt=Sr(xS);return{left:Tt.x,right:Tt.x+kt.width,top:Tt.y,bottom:Tt.y+kt.height,width:kt.width,height:kt.height}},getPositionMetrics:function(Tt,kt,Bt,zt){const mn=ES.getBoundsInfo(),En=Sr(as);return kt+En.height<mn.bottom?oo(Tt,kt,mn,En):zt-En.height>mn.top?co(Bt,zt,mn,En):kt+En.height<document.documentElement.clientHeight?oo(Tt,kt,mn,En):zt-En.height>document.documentElement.clientTop?co(Bt,zt,mn,En):jo(Tt,mn,En)}},Vs={};Vs.ANIMATION_TIME=CO,Vs.ARROW_HORIZONTAL_PADDING=tx,Vs.ARROW_SIZE=Xy,Vs.BORDER_SIZE=bS,Vs.PADDING_Y=SS,Vs.TEST_ONLY=ES,Vs.clearContent=Br,Vs.createDom=Vr,Vs.getContentDiv=kr,Vs.getOwner=ur,Vs.getPositionX=Xo,Vs.hide=os,Vs.hideIfOwner=zo,Vs.hideWithoutAnimation=Lo,Vs.isVisible=rs,Vs.repositionForWindowResize=Ll,Vs.setBoundsElement=eo,Vs.setColour=Rn,Vs.show=qr,Vs.showPositionedByBlock=Xn,Vs.showPositionedByField=cr;var Zm=Object.create(null),jE={typeMap:Zm},AO=Object.create(null),vm="default",ro=class{constructor(Tt){this.name=Tt}toString(){return this.name}};ro.CONNECTION_CHECKER=new ro("connectionChecker"),ro.CURSOR=new ro("cursor"),ro.EVENT=new ro("event"),ro.FIELD=new ro("field"),ro.RENDERER=new ro("renderer"),ro.TOOLBOX=new ro("toolbox"),ro.THEME=new ro("theme"),ro.TOOLBOX_ITEM=new ro("toolboxItem"),ro.FLYOUTS_VERTICAL_TOOLBOX=new ro("flyoutsVerticalToolbox"),ro.FLYOUTS_HORIZONTAL_TOOLBOX=new ro("flyoutsHorizontalToolbox"),ro.METRICS_MANAGER=new ro("metricsManager"),ro.BLOCK_DRAGGER=new ro("blockDragger"),ro.SERIALIZER=new ro("serializer");var fp={};fp.DEFAULT=vm,fp.TEST_ONLY=jE,fp.Type=ro,fp.getAllItems=Oo,fp.getClass=Ir,fp.getClassFromOptions=_o,fp.getObject=Xr,fp.hasItem=Qr,fp.register=So,fp.unregister=sr;var rx="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ix={genUid:()=>{const Tt=rx.length,kt=[];for(let Bt=0;20>Bt;Bt++)kt[Bt]=rx.charAt(Math.random()*Tt);return kt.join("")}},XE=0,kO={};kO.TEST_ONLY=ix,kO.genUid=Ao,kO.getNextUniqueId=wo;var ox="",Yy=!0,$S=0,Xl="create",Gp="delete",yl="change",hu="move",D_="var_create",R0="var_delete",Zy="var_rename",qy="ui",M0="drag",qm="selected",Km="click",Ky="marker_move",Om="bubble_open",Jy="trashcan_open",ev="toolbox_item_select",tv="theme_change",L_="viewport_change",N_="comment_create",P0="comment_delete",nv="comment_change",bm="comment_move",D0="finished_loading",IO="procedure_create",rv="procedure_delete",RO="procedure_rename",MO="procedure_enable",PO="procedure_change_return",DO="procedure_parameter_create",LO="procedure_parameter_delete",NO="procedure_parameter_rename",wS=[Xl,hu,N_,bm],L0=[],CS={FIRE_QUEUE:L0,fireNow:zs,fireInternal:vs,setGroupInternal:jp},Io={};Io.BLOCK_CHANGE=yl,Io.BLOCK_CREATE=Xl,Io.BLOCK_DELETE=Gp,Io.BLOCK_DRAG=M0,Io.BLOCK_MOVE=hu,Io.BUBBLE_OPEN=Om,Io.BUMP_EVENTS=wS,Io.CHANGE=yl,Io.CLICK=Km,Io.COMMENT_CHANGE=nv,Io.COMMENT_CREATE=N_,Io.COMMENT_DELETE=P0,Io.COMMENT_MOVE=bm,Io.CREATE=Xl,Io.DELETE=Gp,Io.FINISHED_LOADING=D0,Io.MARKER_MOVE=Ky,Io.MOVE=hu,Io.PROCEDURE_CHANGE_RETURN=PO,Io.PROCEDURE_CREATE=IO,Io.PROCEDURE_DELETE=rv,Io.PROCEDURE_ENABLE=MO,Io.PROCEDURE_PARAMETER_CREATE=DO,Io.PROCEDURE_PARAMETER_DELETE=LO,Io.PROCEDURE_PARAMETER_RENAME=NO,Io.PROCEDURE_RENAME=RO,Io.SELECTED=qm,Io.TEST_ONLY=CS,Io.THEME_CHANGE=tv,Io.TOOLBOX_ITEM_SELECT=ev,Io.TRASHCAN_OPEN=Jy,Io.UI=qy,Io.VAR_CREATE=D_,Io.VAR_DELETE=R0,Io.VAR_RENAME=Zy,Io.VIEWPORT_CHANGE=L_,Io.clearPendingUndo=Nl,Io.disable=Fo,Io.disableOrphans=Yo,Io.enable=_i,Io.filter=Hs,Io.fire=to,Io.fromJson=Sl,Io.get=no,Io.getDescendantIds=Ol,Io.getGroup=Mo,Io.getRecordUndo=Co,Io.isEnabled=ts,Io.setGroup=fo,Io.setRecordUndo=Ro;var Uo;(function(Tt){Tt[Tt.VALUE=1]="VALUE",Tt[Tt.STATEMENT=3]="STATEMENT",Tt[Tt.DUMMY=5]="DUMMY"})(Uo||(Uo={})),dt.module$build$src$core$input_types={},dt.module$build$src$core$input_types.inputTypes=Uo;var B_,BO,FO,AS;({document:B_,DOMParser:BO,XMLSerializer:FO}=globalThis),AS="https://developers.google.com/blockly/xml",dt.module$build$src$core$utils$xml={},dt.module$build$src$core$utils$xml.NAME_SPACE=AS,dt.module$build$src$core$utils$xml.createElement=Po,dt.module$build$src$core$utils$xml.createTextNode=ba,dt.module$build$src$core$utils$xml.domToText=np,dt.module$build$src$core$utils$xml.getDocument=Os,dt.module$build$src$core$utils$xml.injectDependencies=_s,dt.module$build$src$core$utils$xml.setDocument=Qs,dt.module$build$src$core$utils$xml.textToDomDocument=Cs;var sx=function(Tt,kt){window.alert(Tt),kt&&kt()},ax=function(Tt,kt){kt(window.confirm(Tt))},lx=function(Tt,kt,Bt){Bt(window.prompt(Tt,kt))},cx={confirmInternal:X_},Eu={};Eu.TEST_ONLY=cx,Eu.alert=rp,Eu.confirm=mu,Eu.prompt=Sp,Eu.setAlert=Cm,Eu.setConfirm=Tl,Eu.setPrompt=Xp;var ko,kS;ko=Object.create(null),kS=function(Tt){Object.keys(Tt).forEach(function(kt){ko[kt]=Tt[kt]})},dt.module$build$src$core$msg={},dt.module$build$src$core$msg.Msg=ko,dt.module$build$src$core$msg.setLocale=kS;var F_=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Mo(),this.recordUndo=Co()}toJson(){return{type:this.type,group:this.group}}fromJson(Tt){this.isBlank=!1,this.group=Tt.group||""}static fromJson(Tt,kt,Bt){return vt("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),Bt.isBlank=!1,Bt.group=Tt.group||"",Bt.workspaceId=kt.id,Bt}isNull(){return!1}run(Tt){}getEventWorkspace_(){let Tt;if(this.workspaceId&&(Tt=vn(this.workspaceId)),!Tt)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return Tt}},iv=class extends F_{constructor(Tt){super(),this.isBlank=typeof Tt>"u",Tt&&(this.varId=Tt.getId(),this.workspaceId=Tt.workspace.id)}toJson(){const Tt=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return Tt.varId=this.varId,Tt}fromJson(Tt){vt("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.varId=Tt.varId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new iv),kt.varId=Tt.varId,kt}},IS=class extends iv{constructor(Tt){super(Tt),this.type=D_,Tt&&(this.varType=Tt.type,this.varName=Tt.name)}toJson(){const Tt=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return Tt.varType=this.varType,Tt.varName=this.varName,Tt}fromJson(Tt){vt("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.varType=Tt.varType,this.varName=Tt.varName}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new IS),kt.varType=Tt.varType,kt.varName=Tt.varName,kt}run(Tt){const kt=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");Tt?kt.createVariable(this.varName,this.varType,this.varId):kt.deleteVariableById(this.varId)}};So(ro.EVENT,D_,IS);var ov=class{constructor(Tt,kt,Bt,zt){this.workspace=Tt,this.name=kt,this.type=Bt||"",this.id_=zt||Ao()}getId(){return this.id_}static compareByName(Tt,kt){return Tt.name.localeCompare(kt.name,void 0,{sensitivity:"base"})}},GO,UO,RS;GO="VARIABLE",UO="ijkmnopqrstuvwxyzabcdefgh",RS={generateUniqueNameInternal:Y_},dt.module$build$src$core$variables={},dt.module$build$src$core$variables.CATEGORY_NAME=GO,dt.module$build$src$core$variables.TEST_ONLY=RS,dt.module$build$src$core$variables.VAR_LETTER_OPTIONS=UO,dt.module$build$src$core$variables.allDeveloperVariables=ip,dt.module$build$src$core$variables.allUsedVarModels=Am,dt.module$build$src$core$variables.createVariableButtonHandler=ru,dt.module$build$src$core$variables.flyoutCategory=wu,dt.module$build$src$core$variables.flyoutCategoryBlocks=zu,dt.module$build$src$core$variables.generateUniqueName=Tp,dt.module$build$src$core$variables.generateUniqueNameFromOptions=Yp,dt.module$build$src$core$variables.generateVariableFieldDom=Vo,dt.module$build$src$core$variables.getAddedVariables=qp,dt.module$build$src$core$variables.getOrCreateVariablePackage=Ep,dt.module$build$src$core$variables.getVariable=_u,dt.module$build$src$core$variables.nameUsedWithAnyType=Cu,dt.module$build$src$core$variables.promptName=gu,dt.module$build$src$core$variables.renameVariable=Zp;var Up=class{constructor(Tt,kt,Bt,zt,mn){this.workspace=Tt,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=mn&&!Tt.getCommentById(mn)?mn:Ao(),Tt.addTopComment(this),this.xy_=new ao(0,0),this.height_=Bt,this.width_=zt,this.RTL=Tt.RTL,this.content_=kt,Up.fireCreateEvent(this)}dispose(){this.disposed_||(ts()&&to(new(no(P0))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(Tt){this.height_=Tt}getWidth(){return this.width_}setWidth(Tt){this.width_=Tt}getXY(){return new ao(this.xy_.x,this.xy_.y)}moveBy(Tt,kt){const Bt=new(no(bm))(this);this.xy_.translate(Tt,kt),Bt.recordNew(),to(Bt)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(Tt){this.deletable_=Tt}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(Tt){this.movable_=Tt}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(Tt){this.editable_=Tt}getContent(){return this.content_}setContent(Tt){this.content_!==Tt&&(to(new(no(nv))(this,this.content_,Tt)),this.content_=Tt)}toXmlWithXY(Tt){return Tt=this.toXml(Tt),Tt.setAttribute("x",`${Math.round(this.xy_.x)}`),Tt.setAttribute("y",`${Math.round(this.xy_.y)}`),Tt.setAttribute("h",`${this.height_}`),Tt.setAttribute("w",`${this.width_}`),Tt}toXml(Tt){const kt=Po("comment");return Tt||(kt.id=this.id),kt.textContent=this.getContent(),kt}static fireCreateEvent(Tt){if(ts()){const kt=Mo();kt||fo(!0);try{to(new(no(N_))(Tt))}finally{kt||fo(!1)}}}static fromXml(Tt,kt){var Bt=Up.parseAttributes(Tt);return kt=new Up(kt,Bt.content,Bt.h,Bt.w,Bt.id),Bt=Tt.getAttribute("x"),Tt=Tt.getAttribute("y"),Bt=Bt?parseInt(Bt,10):NaN,Tt=Tt?parseInt(Tt,10):NaN,isNaN(Bt)||isNaN(Tt)||kt.moveBy(Bt,Tt),Up.fireCreateEvent(kt),kt}static parseAttributes(Tt){const kt=Tt.getAttribute("h"),Bt=Tt.getAttribute("w"),zt=Tt.getAttribute("x"),mn=Tt.getAttribute("y"),En=Tt.getAttribute("id");if(!En)throw Error("No ID present in XML comment definition.");let Hn;return{id:En,h:kt?parseInt(kt):100,w:Bt?parseInt(Bt):100,x:zt?parseInt(zt):NaN,y:mn?parseInt(mn):NaN,content:(Hn=Tt.textContent)!=null?Hn:""}}},pp=class extends F_{constructor(Tt){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof Tt>"u",this.workspaceId=Tt||""}},MS=class extends pp{constructor(Tt,kt,Bt){super(Bt),this.type=qm,this.oldElementId=Tt??void 0,this.newElementId=kt??void 0}toJson(){const Tt=super.toJson();return Tt.oldElementId=this.oldElementId,Tt.newElementId=this.newElementId,Tt}fromJson(Tt){vt("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldElementId=Tt.oldElementId,this.newElementId=Tt.newElementId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new MS),kt.oldElementId=Tt.oldElementId,kt.newElementId=Tt.newElementId,kt}};So(ro.EVENT,qm,MS);var PS=!1,DS=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,LS={};LS.inject=ys,LS.register=Zl;var Er=class{constructor(Tt){this.tagName=Tt}toString(){return this.tagName}};Er.ANIMATE=new Er("animate"),Er.CIRCLE=new Er("circle"),Er.CLIPPATH=new Er("clipPath"),Er.DEFS=new Er("defs"),Er.FECOMPOSITE=new Er("feComposite"),Er.FECOMPONENTTRANSFER=new Er("feComponentTransfer"),Er.FEFLOOD=new Er("feFlood"),Er.FEFUNCA=new Er("feFuncA"),Er.FEGAUSSIANBLUR=new Er("feGaussianBlur"),Er.FEPOINTLIGHT=new Er("fePointLight"),Er.FESPECULARLIGHTING=new Er("feSpecularLighting"),Er.FILTER=new Er("filter"),Er.FOREIGNOBJECT=new Er("foreignObject"),Er.G=new Er("g"),Er.IMAGE=new Er("image"),Er.LINE=new Er("line"),Er.PATH=new Er("path"),Er.PATTERN=new Er("pattern"),Er.POLYGON=new Er("polygon"),Er.RECT=new Er("rect"),Er.SVG=new Er("svg"),Er.TEXT=new Er("text"),Er.TSPAN=new Er("tspan");var ux=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,hx=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,YE={XY_REGEX:ux,XY_STYLE_REGEX:hx},Jm={};Jm.TEST_ONLY=YE,Jm.getDocumentScroll=Hu,Jm.getInjectionDivXY=Kp,Jm.getRelativeXY=Zs,Jm.getViewportBBox=Jp,Jm.is3dSupported=xl,Jm.screenToWsCoordinates=Kl;var Yl=8,VO=3,ZE=2,tu=class extends Up{constructor(Tt,kt,Bt,zt,mn){super(Tt,kt,Bt,zt,mn),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=Cn(Er.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=Tt,this.svgRect_=Cn(Er.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:VO,ry:VO}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!Tt.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(zn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ts()&&to(new(no(P0))(this)),fr(this.svgGroup_),this.disposeInternal_(),Fo(),super.dispose(),_i())}initSvg(Tt){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Zt(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),Zt(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!Tt&&this.textarea_&&this.textarea_.select()}pathMouseDown_(Tt){const kt=this.workspace.getGesture(Tt);kt&&kt.handleBubbleStart(Tt,this)}showContextMenu(Tt){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(zn()!==this){var Tt=null;if(zn()){Tt=zn().id,Fo();try{zn().unselect()}finally{_i()}}Tt=new(no(qm))(Tt,this.id,this.workspace.id),to(Tt),An(this),this.addSelect()}}unselect(){if(zn()===this){var Tt=new(no(qm))(this.id,null,this.workspace.id);to(Tt),An(null),this.removeSelect(),this.blurFocus()}}addSelect(){tr(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){tr(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){tr(this.svgGroup_,"blocklyFocused")}removeFocus(){Zn(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let Tt=0,kt=0;const Bt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let zt=this.getSvgRoot();if(zt)do{var mn=Zs(zt);Tt+=mn.x,kt+=mn.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===zt&&(mn=this.workspace.getBlockDragSurface().getSurfaceTranslation(),Tt+=mn.x,kt+=mn.y),zt=zt.parentNode}while(zt&&zt!==this.workspace.getBubbleCanvas()&&zt!==Bt);return this.xy_=new ao(Tt,kt)}moveBy(Tt,kt){const Bt=new(no(bm))(this),zt=this.getRelativeToSurfaceXY();this.translate(zt.x+Tt,zt.y+kt),this.xy_=new ao(zt.x+Tt,zt.y+kt),Bt.recordNew(),to(Bt),this.workspace.resizeContents()}translate(Tt,kt){this.xy_=new ao(Tt,kt),this.getSvgRoot().setAttribute("transform","translate("+Tt+","+kt+")")}moveToDragSurface(){if(this.useDragSurface_){var Tt=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(Tt.x,Tt.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(Tt,kt){Tt?Tt.translateSurface(kt.x,kt.y):(this.svgGroup_.translate_="translate("+kt.x+","+kt.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(Tt,kt){this.translate(Tt,kt)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var Tt=this.getRelativeToSurfaceXY();const kt=this.getHeightWidth(),Bt=Tt.y,zt=Tt.y+kt.height;let mn;return this.RTL?(mn=Tt.x-kt.width,Tt=Tt.x):(mn=Tt.x,Tt=Tt.x+kt.width),new Fs(Bt,zt,mn,Tt)}updateMovable(){this.isMovable()?tr(this.svgGroup_,"blocklyDraggable"):Zn(this.svgGroup_,"blocklyDraggable")}setMovable(Tt){super.setMovable(Tt),this.updateMovable()}setEditable(Tt){super.setEditable(Tt),this.textarea_&&(this.textarea_.readOnly=!Tt)}setDragging(Tt){Tt?(Tt=this.getSvgRoot(),Tt.translate_="",Tt.skew_="",tr(this.svgGroup_,"blocklyDragging")):Zn(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(Tt){super.setContent(Tt),this.textarea_&&(this.textarea_.value=Tt)}setDeleteStyle(Tt){Tt?tr(this.svgGroup_,"blocklyDraggingDelete"):Zn(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(Tt){}toXmlWithXY(Tt){let kt=0;this.workspace.RTL&&(kt=this.workspace.getWidth()),Tt=this.toXml(Tt);const Bt=this.getRelativeToSurfaceXY();return Tt.setAttribute("x",Math.round(this.workspace.RTL?kt-Bt.x:Bt.x)),Tt.setAttribute("y",Math.round(Bt.y)),Tt.setAttribute("h",this.getHeight()),Tt.setAttribute("w",this.getWidth()),Tt}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var Tt=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=Cn(Er.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=Cn(Er.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:VO,ry:VO}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(Tt.width,Tt.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&Zt(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(Zt(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),Zt(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),Zt(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=Cn(Er.FOREIGNOBJECT,{x:0,y:tu.TOP_OFFSET,class:"blocklyCommentForeignObject"});const Tt=document.createElementNS(Bu,"body");Tt.setAttribute("xmlns",Bu),Tt.className="blocklyMinimalBody";const kt=document.createElementNS(Bu,"textarea");return kt.className="blocklyCommentTextarea",kt.setAttribute("dir",this.RTL?"RTL":"LTR"),kt.readOnly=!this.isEditable(),Tt.appendChild(kt),this.textarea_=kt,this.foreignObject_.appendChild(Tt),Zt(kt,"wheel",this,function(Bt){Bt.stopPropagation()}),Zt(kt,"change",this,function(Bt){this.setContent(kt.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=Cn(Er.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),Cn(Er.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Yl.toString())},this.resizeGroup_),Cn(Er.LINE,{class:"blocklyResizeLine",x1:Yl/3,y1:Yl-1,x2:Yl-1,y2:Yl/3},this.resizeGroup_),Cn(Er.LINE,{class:"blocklyResizeLine",x1:2*Yl/3,y1:Yl-1,x2:Yl-1,y2:2*Yl/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=Cn(Er.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Cn(Er.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),Cn(Er.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),Cn(Er.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(Tt){this.unbindDragEvents_(),dn(Tt)||(this.workspace.startDrag(Tt,new ao(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Zt(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Zt(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),Tt.stopPropagation()}deleteMouseDown_(Tt){this.deleteIconBorder_&&tr(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),Tt.stopPropagation()}deleteMouseOut_(Tt){this.deleteIconBorder_&&Zn(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(Tt){this.dispose(),Tt.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(cn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(Tt){Ct(),this.unbindDragEvents_()}resizeMouseMove_(Tt){this.autoLayout_=!1,Tt=this.workspace.moveDrag(Tt),this.setSize_(this.RTL?-Tt.x:Tt.x,Tt.y)}resizeComment_(){const Tt=this.getHeightWidth(),kt=tu.TOP_OFFSET,Bt=2*ZE;this.foreignObject_.setAttribute("width",Tt.width),this.foreignObject_.setAttribute("height",(Tt.height-kt).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-Tt.width).toString()),this.textarea_.style.width=Tt.width-Bt+"px",this.textarea_.style.height=Tt.height-Bt-kt+"px"}setSize_(Tt,kt){Tt=Math.max(Tt,45),kt=Math.max(kt,20+tu.TOP_OFFSET),this.width_=Tt,this.height_=kt,this.svgRect_.setAttribute("width",Tt),this.svgRect_.setAttribute("height",kt),this.svgRectTarget_.setAttribute("width",Tt),this.svgRectTarget_.setAttribute("height",kt),this.svgHandleTarget_.setAttribute("width",Tt),this.svgHandleTarget_.setAttribute("height",tu.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-Tt+Yl)+","+(kt-Yl)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-Tt+Yl)+","+-Yl+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(Tt-Yl)+","+(kt-Yl)+")"),this.deleteGroup_.setAttribute("transform","translate("+(Tt-Yl)+","+-Yl+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&tr(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&tr(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&Zn(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&Zn(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(Tt,kt,Bt){Fo();let zt;try{const mn=Up.parseAttributes(Tt);if(zt=new tu(kt,mn.content,mn.h,mn.w,mn.id),kt.rendered&&(zt.initSvg(!0),zt.render()),!isNaN(mn.x)&&!isNaN(mn.y))if(kt.RTL){const En=Bt||kt.getWidth();zt.moveBy(En-mn.x,mn.y)}else zt.moveBy(mn.x,mn.y)}finally{_i()}return Up.fireCreateEvent(zt),zt}};tu.DEFAULT_SIZE=100,tu.TOP_OFFSET=10,Zl(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),dt.module$build$src$core$xml={},dt.module$build$src$core$xml.appendDomToWorkspace=Cl,dt.module$build$src$core$xml.blockToDom=qs,dt.module$build$src$core$xml.blockToDomWithXY=El,dt.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=tm,dt.module$build$src$core$xml.deleteNext=ey,dt.module$build$src$core$xml.domToBlock=Es,dt.module$build$src$core$xml.domToPrettyText=Jl,dt.module$build$src$core$xml.domToText=$l,dt.module$build$src$core$xml.domToVariables=nm,dt.module$build$src$core$xml.domToWorkspace=Au,dt.module$build$src$core$xml.textToDom=Rs,dt.module$build$src$core$xml.variablesToDom=em,dt.module$build$src$core$xml.workspaceToDom=r_;var N0=class extends F_{constructor(Tt){super(),this.isBlank=!Tt,Tt&&(this.blockId=Tt.id,this.workspaceId=Tt.workspace.id)}toJson(){const Tt=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return Tt.blockId=this.blockId,Tt}fromJson(Tt){vt("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.blockId=Tt.blockId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new N0),kt.blockId=Tt.blockId,kt}},G_=class extends N0{constructor(Tt,kt,Bt,zt,mn){super(Tt),this.type=yl,Tt&&(this.element=kt,this.name=Bt||void 0,this.oldValue=zt,this.newValue=mn)}toJson(){const Tt=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return Tt.element=this.element,Tt.name=this.name,Tt.oldValue=this.oldValue,Tt.newValue=this.newValue,Tt}fromJson(Tt){vt("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.element=Tt.element,this.name=Tt.name,this.oldValue=Tt.oldValue,this.newValue=Tt.newValue}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new G_),kt.element=Tt.element,kt.name=Tt.name,kt.oldValue=Tt.oldValue,kt.newValue=Tt.newValue,kt}isNull(){return this.oldValue===this.newValue}run(Tt){var kt=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(kt=kt.getBlockById(this.blockId),!kt)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(kt.mutator&&kt.mutator.setVisible(!1),Tt=Tt?this.newValue:this.oldValue,this.element){case"field":(kt=kt.getField(this.name))?kt.setValue(Tt):console.warn("Can't set non-existent field: "+this.name);break;case"comment":kt.setCommentText(Tt||null);break;case"collapsed":kt.setCollapsed(!!Tt);break;case"disabled":kt.setEnabled(!Tt);break;case"inline":kt.setInputsInline(!!Tt);break;case"mutation":const Bt=G_.getExtraBlockState_(kt);kt.loadExtraState?kt.loadExtraState(JSON.parse(Tt||"{}")):kt.domToMutation&&kt.domToMutation(Rs(Tt||"<mutation/>")),to(new G_(kt,"mutation",null,Bt,Tt));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(Tt){return Tt.saveExtraState?(Tt=Tt.saveExtraState())?JSON.stringify(Tt):"":Tt.mutationToDom&&(Tt=Tt.mutationToDom())?$l(Tt):""}};So(ro.EVENT,yl,G_);var sv=class{constructor(Tt){this.workspace=Tt,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(Tt,kt){this.markers.has(Tt)&&this.unregisterMarker(Tt),kt.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,kt)),this.setMarkerSvg(kt.getDrawer().createDom()),this.markers.set(Tt,kt)}unregisterMarker(Tt){const kt=this.markers.get(Tt);if(kt)kt.dispose(),this.markers.delete(Tt);else throw Error("Marker with ID "+Tt+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(Tt){return this.markers.get(Tt)||null}setCursor(Tt){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=Tt)&&(Tt=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(Tt),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(Tt){Tt?(this.workspace.getBlockCanvas().appendChild(Tt),this.cursorSvg_=Tt):this.cursorSvg_=null}setMarkerSvg(Tt){Tt?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(Tt,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(Tt)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const Tt=Object.keys(this.markers);for(let kt=0,Bt;Bt=Tt[kt];kt++)this.unregisterMarker(Bt);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};sv.LOCAL_MARKER="local_marker_1",dt.module$build$src$core$utils$string={},dt.module$build$src$core$utils$string.commonWordPrefix=op,dt.module$build$src$core$utils$string.commonWordSuffix=i_,dt.module$build$src$core$utils$string.isNumber=o_,dt.module$build$src$core$utils$string.shortestStringLength=yu,dt.module$build$src$core$utils$string.startsWith=Nv,dt.module$build$src$core$utils$string.wrap=ty;var WO=void 0,av=!1,B0=!1,dx=50,fx=0,lv=0,NS=0,BS=0,_f=null,cv=null,FS=0,GS=10,mx=10,gx=750,zO=5,Xs=null,Ws={};Ws.HOVER_MS=gx,Ws.LIMIT=dx,Ws.MARGINS=zO,Ws.OFFSET_X=FS,Ws.OFFSET_Y=GS,Ws.RADIUS_OK=mx,Ws.bindMouseEvents=om,Ws.block=oy,Ws.createDom=s_,Ws.dispose=Zu,Ws.getCustomTooltip=Fv,Ws.getDiv=iy,Ws.getTooltipOfObject=Xu,Ws.hide=iu,Ws.isVisible=Gv,Ws.setCustomTooltip=Bv,Ws.unbindMouseEvents=Fl,Ws.unblock=J_;var US=.45,VS=.65,yx={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},nu={};nu.blend=Mu,nu.getHsvSaturation=Mm,nu.getHsvValue=ay,nu.hexToRgb=e0,nu.hsvToHex=am,nu.hueToHex=a_,nu.names=yx,nu.parse=sp,nu.rgbToHex=Pm,nu.setHsvSaturation=Ru,nu.setHsvValue=Uv;var uv={};uv.checkMessageReferences=l_,uv.parseBlockColour=Pu,uv.replaceMessageReferences=Ss,uv.tokenizeInterpolation=Dm;var qE=class{},HO=null,QO=null,F0="",G0="",mp,gp={};gp.createDom=au,gp.getDiv=cm,gp.hide=Gl,gp.hideIfOwner=u_,gp.isVisible=Du,gp.positionWithAnchor=ly,gp.show=um,gp.testOnly_setDiv=c_;var qo=class{constructor(Tt,kt,Bt){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Pl(0,0),Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){Tt.tooltip&&this.setTooltip(Ss(Tt.tooltip))}setSourceBlock(Tt){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=Tt}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Cn(Er.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=Cn(Er.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Cn(Er.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const Tt=this.getClickTarget_();if(!Tt)throw Error("A click target has not been set.");om(Tt),this.mouseDownWrapper_=Zt(Tt,"pointerdown",this,this.onMouseDown_)}fromXml(Tt){this.setValue(Tt.textContent)}toXml(Tt){return Tt.textContent=this.getValue(),Tt}saveState(Tt){return Tt=this.saveLegacyState(qo),Tt!==null?Tt:this.getValue()}loadState(Tt){this.loadLegacyState(qo,Tt)||this.setValue(Tt)}saveLegacyState(Tt){return Tt.prototype.saveState===this.saveState&&Tt.prototype.toXml!==this.toXml?(Tt=Po("field"),Tt.setAttribute("name",this.name||""),$l(this.toXml(Tt)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(Tt,kt){return Tt.prototype.loadState===this.loadState&&Tt.prototype.fromXml!==this.fromXml?(this.fromXml(Rs(kt)),!0):!1}dispose(){zo(this),u_(this),Fl(this.getClickTarget_()),this.mouseDownWrapper_&&cn(this.mouseDownWrapper_),fr(this.fieldGroup_),this.disposed=!0}updateEditable(){const Tt=this.fieldGroup_,kt=this.getSourceBlock();this.EDITABLE&&Tt&&kt&&(this.enabled_&&kt.isEditable()?(tr(Tt,"blocklyEditableText"),Zn(Tt,"blocklyNonEditableText"),Tt.style.cursor=this.CURSOR):(tr(Tt,"blocklyNonEditableText"),Zn(Tt,"blocklyEditableText"),Tt.style.cursor=""))}setEnabled(Tt){this.enabled_=Tt,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==qo.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let Tt=!1;return this.name&&(this.SERIALIZABLE?Tt=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),Tt=!0)),Tt}isVisible(){return this.visible_}setVisible(Tt){if(this.visible_!==Tt){this.visible_=Tt;var kt=this.fieldGroup_;kt&&(kt.style.display=Tt?"block":"none")}}setValidator(Tt){this.validator_=Tt}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(Tt){this.isClickable()&&this.showEditor_(Tt)}showEditor_(Tt){}updateSize_(Tt){const kt=this.getConstants();Tt=Tt!==void 0?Tt:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let Bt=2*Tt,zt=kt.FIELD_TEXT_HEIGHT,mn=0;this.textElement_&&(mn=Dn(this.textElement_,kt.FIELD_TEXT_FONTSIZE,kt.FIELD_TEXT_FONTWEIGHT,kt.FIELD_TEXT_FONTFAMILY),Bt+=mn),this.borderRect_&&(zt=Math.max(zt,kt.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=zt,this.size_.width=Bt,this.positionTextElement_(Tt,mn),this.positionBorderRect_()}positionTextElement_(Tt,kt){if(this.textElement_){var Bt=this.getConstants(),zt=this.size_.height/2,mn;this.textElement_.setAttribute("x",`${(mn=this.getSourceBlock())!=null&&mn.RTL?this.size_.width-kt-Tt:Tt}`),this.textElement_.setAttribute("y",`${Bt.FIELD_TEXT_BASELINE_CENTER?zt:zt-Bt.FIELD_TEXT_HEIGHT/2+Bt.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Pl(0,0)}getScaledBBox(){let Tt;var kt=this.getSourceBlock();if(!kt)throw new Ys;if(this.borderRect_){var Bt=this.borderRect_.getBoundingClientRect();Tt=lr(this.borderRect_),kt=Bt.width,Bt=Bt.height}else{Bt=this.sourceBlock_.getHeightWidth();const zt=kt.workspace.scale;Tt=this.getAbsoluteXY_(),kt=(Bt.width+1)*zt,Bt=(Bt.height+1)*zt,yo?(Tt.x+=1.5*zt,Tt.y+=1.5*zt):(Tt.x-=.5*zt,Tt.y-=.5*zt)}return new Fs(Tt.y,Tt.y+Bt,Tt.x,Tt.x+kt)}getDisplayText_(){let Tt=this.getText();return Tt?(Tt.length>this.maxDisplayLength&&(Tt=Tt.substring(0,this.maxDisplayLength-2)+""),Tt=Tt.replace(/\s/g,qo.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(Tt+=""),Tt):qo.NBSP}getText(){const Tt=this.getText_();return String(Tt!==null?Tt:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(Tt){if(Tt!==null){var kt=this.doClassValidation_(Tt);if(Tt=this.processValidation_(Tt,kt),!(Tt instanceof Error)){if((kt=this.getValidator())&&(kt=kt.call(this,Tt),Tt=this.processValidation_(Tt,kt),Tt instanceof Error))return;if(kt=this.sourceBlock_,!kt||!kt.disposed){var Bt=this.getValue();Bt===Tt?this.doValueUpdate_(Tt):(this.doValueUpdate_(Tt),kt&&ts()&&to(new(no(yl))(kt,"field",this.name||null,Bt,Tt)),this.isDirty_&&this.forceRerender())}}}}processValidation_(Tt,kt){return kt===null?(this.doValueInvalid_(Tt),this.isDirty_&&this.forceRerender(),Error()):(kt!==void 0&&(Tt=kt),Tt)}getValue(){return this.value_}doClassValidation_(Tt){return Tt??null}doValueUpdate_(Tt){this.value_=Tt,this.isDirty_=!0}doValueInvalid_(Tt){}onMouseDown_(Tt){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(Tt=this.sourceBlock_.workspace.getGesture(Tt))&&Tt.setStartField(this)}setTooltip(Tt){Tt||Tt===""||(Tt=this.sourceBlock_);const kt=this.getClickTarget_();kt?kt.tooltip=Tt:this.tooltip_=Tt}getTooltip(){const Tt=this.getClickTarget_();return Xu(Tt||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return lr(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let Tt=null;const kt=this.getSourceBlock();if(!kt)throw new Ys;const Bt=kt.inputList;for(let zt=0;zt<kt.inputList.length;zt++){const mn=Bt[zt],En=mn.fieldRow;for(let Hn=0;Hn<En.length;Hn++)if(En[Hn]===this){Tt=mn;break}}return Tt}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(Tt){return!1}setCursorSvg(Tt){if(Tt){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(Tt),this.cursorSvg_=Tt}else this.cursorSvg_=null}setMarkerSvg(Tt){if(Tt){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(Tt),this.markerSvg_=Tt}else this.markerSvg_=null}updateMarkers_(){var Tt=this.getSourceBlock();if(!Tt)throw new Ys;Tt=Tt.workspace,Tt.keyboardAccessibilityMode&&this.cursorSvg_&&Tt.getCursor().draw(),Tt.keyboardAccessibilityMode&&this.markerSvg_&&Tt.getMarker(sv.LOCAL_MARKER).draw()}};qo.NBSP="",qo.SKIP_SETUP=new qE;var Ys=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},vx={fromJsonInternal:t0},hv={};hv.TEST_ONLY=vx,hv.fromJson=h_,hv.register=Ul,hv.unregister=uy;var KE="aria-",JE="role",$u;(function(Tt){Tt.GRID="grid",Tt.GRIDCELL="gridcell",Tt.GROUP="group",Tt.LISTBOX="listbox",Tt.MENU="menu",Tt.MENUITEM="menuitem",Tt.MENUITEMCHECKBOX="menuitemcheckbox",Tt.OPTION="option",Tt.PRESENTATION="presentation",Tt.ROW="row",Tt.TREE="tree",Tt.TREEITEM="treeitem"})($u||($u={}));var xs;(function(Tt){Tt.ACTIVEDESCENDANT="activedescendant",Tt.COLCOUNT="colcount",Tt.DISABLED="disabled",Tt.EXPANDED="expanded",Tt.INVALID="invalid",Tt.LABEL="label",Tt.LABELLEDBY="labelledby",Tt.LEVEL="level",Tt.ORIENTATION="orientation",Tt.POSINSET="posinset",Tt.ROWCOUNT="rowcount",Tt.SELECTED="selected",Tt.SETSIZE="setsize",Tt.VALUEMAX="valuemax",Tt.VALUEMIN="valuemin"})(xs||(xs={}));var dv={};dv.Role=$u,dv.State=xs,dv.setRole=Ds,dv.setState=fs;var vo;(function(Tt){Tt[Tt.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",Tt[Tt.MAC_ENTER=3]="MAC_ENTER",Tt[Tt.BACKSPACE=8]="BACKSPACE",Tt[Tt.TAB=9]="TAB",Tt[Tt.NUM_CENTER=12]="NUM_CENTER",Tt[Tt.ENTER=13]="ENTER",Tt[Tt.SHIFT=16]="SHIFT",Tt[Tt.CTRL=17]="CTRL",Tt[Tt.ALT=18]="ALT",Tt[Tt.PAUSE=19]="PAUSE",Tt[Tt.CAPS_LOCK=20]="CAPS_LOCK",Tt[Tt.ESC=27]="ESC",Tt[Tt.SPACE=32]="SPACE",Tt[Tt.PAGE_UP=33]="PAGE_UP",Tt[Tt.PAGE_DOWN=34]="PAGE_DOWN",Tt[Tt.END=35]="END",Tt[Tt.HOME=36]="HOME",Tt[Tt.LEFT=37]="LEFT",Tt[Tt.UP=38]="UP",Tt[Tt.RIGHT=39]="RIGHT",Tt[Tt.DOWN=40]="DOWN",Tt[Tt.PLUS_SIGN=43]="PLUS_SIGN",Tt[Tt.PRINT_SCREEN=44]="PRINT_SCREEN",Tt[Tt.INSERT=45]="INSERT",Tt[Tt.DELETE=46]="DELETE",Tt[Tt.ZERO=48]="ZERO",Tt[Tt.ONE=49]="ONE",Tt[Tt.TWO=50]="TWO",Tt[Tt.THREE=51]="THREE",Tt[Tt.FOUR=52]="FOUR",Tt[Tt.FIVE=53]="FIVE",Tt[Tt.SIX=54]="SIX",Tt[Tt.SEVEN=55]="SEVEN",Tt[Tt.EIGHT=56]="EIGHT",Tt[Tt.NINE=57]="NINE",Tt[Tt.FF_SEMICOLON=59]="FF_SEMICOLON",Tt[Tt.FF_EQUALS=61]="FF_EQUALS",Tt[Tt.FF_DASH=173]="FF_DASH",Tt[Tt.FF_HASH=163]="FF_HASH",Tt[Tt.QUESTION_MARK=63]="QUESTION_MARK",Tt[Tt.AT_SIGN=64]="AT_SIGN",Tt[Tt.A=65]="A",Tt[Tt.B=66]="B",Tt[Tt.C=67]="C",Tt[Tt.D=68]="D",Tt[Tt.E=69]="E",Tt[Tt.F=70]="F",Tt[Tt.G=71]="G",Tt[Tt.H=72]="H",Tt[Tt.I=73]="I",Tt[Tt.J=74]="J",Tt[Tt.K=75]="K",Tt[Tt.L=76]="L",Tt[Tt.M=77]="M",Tt[Tt.N=78]="N",Tt[Tt.O=79]="O",Tt[Tt.P=80]="P",Tt[Tt.Q=81]="Q",Tt[Tt.R=82]="R",Tt[Tt.S=83]="S",Tt[Tt.T=84]="T",Tt[Tt.U=85]="U",Tt[Tt.V=86]="V",Tt[Tt.W=87]="W",Tt[Tt.X=88]="X",Tt[Tt.Y=89]="Y",Tt[Tt.Z=90]="Z",Tt[Tt.META=91]="META",Tt[Tt.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",Tt[Tt.CONTEXT_MENU=93]="CONTEXT_MENU",Tt[Tt.NUM_ZERO=96]="NUM_ZERO",Tt[Tt.NUM_ONE=97]="NUM_ONE",Tt[Tt.NUM_TWO=98]="NUM_TWO",Tt[Tt.NUM_THREE=99]="NUM_THREE",Tt[Tt.NUM_FOUR=100]="NUM_FOUR",Tt[Tt.NUM_FIVE=101]="NUM_FIVE",Tt[Tt.NUM_SIX=102]="NUM_SIX",Tt[Tt.NUM_SEVEN=103]="NUM_SEVEN",Tt[Tt.NUM_EIGHT=104]="NUM_EIGHT",Tt[Tt.NUM_NINE=105]="NUM_NINE",Tt[Tt.NUM_MULTIPLY=106]="NUM_MULTIPLY",Tt[Tt.NUM_PLUS=107]="NUM_PLUS",Tt[Tt.NUM_MINUS=109]="NUM_MINUS",Tt[Tt.NUM_PERIOD=110]="NUM_PERIOD",Tt[Tt.NUM_DIVISION=111]="NUM_DIVISION",Tt[Tt.F1=112]="F1",Tt[Tt.F2=113]="F2",Tt[Tt.F3=114]="F3",Tt[Tt.F4=115]="F4",Tt[Tt.F5=116]="F5",Tt[Tt.F6=117]="F6",Tt[Tt.F7=118]="F7",Tt[Tt.F8=119]="F8",Tt[Tt.F9=120]="F9",Tt[Tt.F10=121]="F10",Tt[Tt.F11=122]="F11",Tt[Tt.F12=123]="F12",Tt[Tt.NUMLOCK=144]="NUMLOCK",Tt[Tt.SCROLL_LOCK=145]="SCROLL_LOCK",Tt[Tt.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",Tt[Tt.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",Tt[Tt.SEMICOLON=186]="SEMICOLON",Tt[Tt.DASH=189]="DASH",Tt[Tt.EQUALS=187]="EQUALS",Tt[Tt.COMMA=188]="COMMA",Tt[Tt.PERIOD=190]="PERIOD",Tt[Tt.SLASH=191]="SLASH",Tt[Tt.APOSTROPHE=192]="APOSTROPHE",Tt[Tt.TILDE=192]="TILDE",Tt[Tt.SINGLE_QUOTE=222]="SINGLE_QUOTE",Tt[Tt.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",Tt[Tt.BACKSLASH=220]="BACKSLASH",Tt[Tt.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",Tt[Tt.WIN_KEY=224]="WIN_KEY",Tt[Tt.MAC_FF_META=224]="MAC_FF_META",Tt[Tt.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",Tt[Tt.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",Tt[Tt.WIN_IME=229]="WIN_IME",Tt[Tt.VK_NONAME=252]="VK_NONAME",Tt[Tt.PHANTOM=255]="PHANTOM"})(vo||(vo={}));var WS=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(Tt){this.menuItems.push(Tt)}render(Tt){const kt=document.createElement("div");kt.className="blocklyMenu goog-menu blocklyNonSelectable",kt.tabIndex=0,this.roleName&&Ds(kt,this.roleName),this.element=kt;for(let Bt=0,zt;zt=this.menuItems[Bt];Bt++)kt.appendChild(zt.createDom());return this.mouseOverHandler=Zt(kt,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Zt(kt,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=Zt(kt,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Zt(kt,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Zt(kt,"keydown",this,this.handleKeyEvent),Tt.appendChild(kt),kt}getElement(){return this.element}focus(){const Tt=this.getElement();Tt&&(Tt.focus({preventScroll:!0}),tr(Tt,"blocklyFocused"))}blur(){const Tt=this.getElement();Tt&&(Tt.blur(),Zn(Tt,"blocklyFocused"))}setRole(Tt){this.roleName=Tt}dispose(){this.mouseOverHandler&&(cn(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(cn(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(cn(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(cn(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(cn(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let Tt=0,kt;kt=this.menuItems[Tt];Tt++)kt.dispose();this.element=null}getMenuItem(Tt){const kt=this.getElement();for(;Tt&&Tt!==kt;){if(Tt.classList.contains("blocklyMenuItem")){for(let Bt=0,zt;zt=this.menuItems[Bt];Bt++)if(zt.getElement()===Tt)return zt}Tt=Tt.parentElement}return null}setHighlighted(Tt){var kt=this.highlightedItem;kt&&(kt.setHighlighted(!1),this.highlightedItem=null),Tt&&(Tt.setHighlighted(!0),this.highlightedItem=Tt,kt=this.getElement(),mr(Tt.getElement(),kt),fs(kt,xs.ACTIVEDESCENDANT,Tt.getId()))}highlightNext(){const Tt=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(Tt,1)}highlightPrevious(){const Tt=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>Tt?this.menuItems.length:Tt,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(Tt,kt){Tt+=kt;let Bt;for(;Bt=this.menuItems[Tt];){if(Bt.isEnabled()){this.setHighlighted(Bt);break}Tt+=kt}}handleMouseOver(Tt){(Tt=this.getMenuItem(Tt.target))&&(Tt.isEnabled()?this.highlightedItem!==Tt&&this.setHighlighted(Tt):this.setHighlighted(null))}handleClick(Tt){const kt=this.openingCoords;if(this.openingCoords=null,kt&&typeof Tt.clientX=="number"){const Bt=new ao(Tt.clientX,Tt.clientY);if(1>ao.distance(kt,Bt))return}(Tt=this.getMenuItem(Tt.target))&&Tt.performAction()}handleMouseEnter(Tt){this.focus()}handleMouseLeave(Tt){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(Tt){if(this.menuItems.length&&!(Tt.shiftKey||Tt.ctrlKey||Tt.metaKey||Tt.altKey)){var kt=this.highlightedItem;switch(Tt.keyCode){case vo.ENTER:case vo.SPACE:kt&&kt.performAction();break;case vo.UP:this.highlightPrevious();break;case vo.DOWN:this.highlightNext();break;case vo.PAGE_UP:case vo.HOME:this.highlightFirst();break;case vo.PAGE_DOWN:case vo.END:this.highlightLast();break;default:return}Tt.preventDefault(),Tt.stopPropagation()}}getSize(){const Tt=this.getElement(),kt=Sr(Tt);return kt.height=Tt.scrollHeight,kt}},zS=class{constructor(Tt,kt){this.content=Tt,this.opt_value=kt,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const Tt=document.createElement("div");Tt.id=wo(),this.element=Tt,Tt.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const kt=document.createElement("div");if(kt.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var Bt=document.createElement("div");Bt.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",kt.appendChild(Bt)}return Bt=this.content,typeof this.content=="string"&&(Bt=document.createTextNode(this.content)),kt.appendChild(Bt),Tt.appendChild(kt),this.roleName&&Ds(Tt,this.roleName),fs(Tt,xs.SELECTED,this.checkable&&this.checked||!1),fs(Tt,xs.DISABLED,!this.enabled),Tt}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let Tt;return(Tt=this.opt_value)!=null?Tt:null}setRightToLeft(Tt){this.rightToLeft=Tt}setRole(Tt){this.roleName=Tt}setCheckable(Tt){this.checkable=Tt}setChecked(Tt){this.checked=Tt}setHighlighted(Tt){this.highlight=Tt;const kt=this.getElement();kt&&this.isEnabled()&&(Tt?(tr(kt,"blocklyMenuItemHighlight"),tr(kt,"goog-menuitem-highlight")):(Zn(kt,"blocklyMenuItemHighlight"),Zn(kt,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(Tt){this.enabled=Tt}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(Tt,kt){this.actionHandler=Tt.bind(kt)}},_p=class extends qo{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,As(Tt)&&(Array.isArray(Tt)?(d_(Tt),Tt=Al(Tt),this.menuGenerator_=Tt.options,this.prefixField=Tt.prefix||null,this.suffixField=Tt.suffix||null):this.menuGenerator_=Tt,this.selectedOption_=this.getOptions(!1)[0],Bt&&this.configure_(Bt),this.setValue(this.selectedOption_[1]),kt&&this.setValidator(kt))}fromXml(Tt){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(Tt.textContent)}loadState(Tt){this.loadLegacyState(_p,Tt)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(Tt))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=Cn(Er.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&tr(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let Tt;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((Tt=this.getSourceBlock())!=null&&Tt.isShadow())}createTextArrow_(){this.arrow_=Cn(Er.TSPAN,{},this.textElement_);let Tt;this.arrow_.appendChild(document.createTextNode((Tt=this.getSourceBlock())!=null&&Tt.RTL?_p.ARROW_CHAR+" ":" "+_p.ARROW_CHAR));let kt;(kt=this.getSourceBlock())!=null&&kt.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=Cn(Er.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(xu,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(Tt){var kt=this.getSourceBlock();if(!kt)throw new Ys;this.dropdownCreate_(),this.menu_.openingCoords=Tt&&typeof Tt.clientX=="number"?new ao(Tt.clientX,Tt.clientY):null,Br(),Tt=this.menu_.render(kr()),tr(Tt,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(Tt=kt.isShadow()?kt.getParent().getColour():kt.getColour(),kt=kt.isShadow()?kt.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Rn(Tt,kt)),cr(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const Tt=this.getSourceBlock();if(!Tt)throw new Ys;const kt=new WS;kt.setRole($u.LISTBOX),this.menu_=kt;const Bt=this.getOptions(!1);this.selectedMenuItem_=null;for(let mn=0;mn<Bt.length;mn++){const[En,Hn]=Bt[mn];if(typeof En=="object"){var zt=new Image(En.width,En.height);zt.src=En.src,zt.alt=En.alt||""}else zt=En;zt=new zS(zt,Hn),zt.setRole($u.OPTION),zt.setRightToLeft(Tt.RTL),zt.setCheckable(!0),kt.addChild(zt),zt.setChecked(Hn===this.value_),Hn===this.value_&&(this.selectedMenuItem_=zt),zt.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(Tt){zo(this,!0),this.onItemSelected_(this.menu_,Tt)}onItemSelected_(Tt,kt){this.setValue(kt.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(Tt){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:Tt&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),d_(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(Tt){return this.getOptions(!0).some(kt=>kt[1]===Tt)?Tt:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+Tt),null)}doValueUpdate_(Tt){super.doValueUpdate_(Tt),Tt=this.getOptions(!0);for(let kt=0,Bt;Bt=Tt[kt];kt++)Bt[1]===this.value_&&(this.selectedOption_=Bt)}applyColour(){const Tt=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",Tt.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",Tt.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=Tt.colourSecondary:this.arrow_.style.fill=Tt.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const Tt=this.selectedOption_&&this.selectedOption_[0];Tt&&typeof Tt=="object"?this.renderSelectedImage_(Tt):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(Tt){const kt=this.getSourceBlock();if(!kt)throw new Ys;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(xu,"xlink:href",Tt.src),this.imageElement_.setAttribute("height",`${Tt.height}`),this.imageElement_.setAttribute("width",`${Tt.width}`);const Bt=Number(Tt.height);Tt=Number(Tt.width);var zt=!!this.borderRect_;const mn=Math.max(zt?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,Bt+t$);zt=zt?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let En;En=this.svgArrow_?this.positionSVGArrow_(Tt+zt,mn/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Dn(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=Tt+En+2*zt,this.size_.height=mn;let Hn=0;kt.RTL?this.imageElement_.setAttribute("x",(zt+En).toString()):(Hn=Tt+En,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",zt.toString())),this.imageElement_.setAttribute("y",(mn/2-Bt/2).toString()),this.positionTextElement_(Hn+zt,Tt+En)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var Tt=this.getTextElement();tr(Tt,"blocklyDropdownText"),Tt.setAttribute("text-anchor","start");var kt=!!this.borderRect_;Tt=Math.max(kt?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const Bt=Dn(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);kt=kt?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let zt=0;this.svgArrow_&&(zt=this.positionSVGArrow_(Bt+kt,Tt/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=Bt+zt+2*kt,this.size_.height=Tt,this.positionTextElement_(kt,Bt)}positionSVGArrow_(Tt,kt){if(!this.svgArrow_)return 0;const Bt=this.getSourceBlock();if(!Bt)throw new Ys;const zt=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,mn=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,En=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(Bt.RTL?zt:Tt+mn)+","+kt+")"),En+mn}getText_(){if(!this.selectedOption_)return null;const Tt=this.selectedOption_[0];return typeof Tt=="object"?Tt.alt:Tt}static fromJson(Tt){if(!Tt.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(Tt.options,void 0,Tt)}};_p.CHECKMARK_OVERHANG=25,_p.MAX_MENU_HEIGHT_VH=.45,_p.ARROW_CHAR="";var e$=5,t$=2*e$;Ul("field_dropdown",_p),dt.module$build$src$core$field_dropdown={},dt.module$build$src$core$field_dropdown.FieldDropdown=_p;var HS=class extends pp{constructor(Tt,kt,Bt){super(Tt?Tt.workspace.id:void 0),this.type=Om,Tt&&(this.blockId=Tt.id,this.isOpen=kt,this.bubbleType=Bt)}toJson(){const Tt=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return Tt.isOpen=this.isOpen,Tt.bubbleType=this.bubbleType,Tt.blockId=this.blockId||"",Tt}fromJson(Tt){vt("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.isOpen=Tt.isOpen,this.bubbleType=Tt.bubbleType,this.blockId=Tt.blockId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new HS),kt.isOpen=Tt.isOpen,kt.bubbleType=Tt.bubbleType,kt.blockId=Tt.blockId,kt}},QS;(function(Tt){Tt.MUTATOR="mutator",Tt.COMMENT="comment",Tt.WARNING="warning"})(QS||(QS={})),So(ro.EVENT,Om,HS);var Is=class{constructor(Tt,kt,Bt,zt,mn){this.workspace=Tt,this.horizontal=kt,this.oldHostMetrics=null,this.ratio=1,this.origin=new ao(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new ao(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=Bt||!1,this.margin=mn!==void 0?mn:Is.DEFAULT_SCROLLBAR_MARGIN,Tt="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),zt&&(Tt+=" "+zt),this.outerSvg=Cn(Er.SVG,{class:Tt}),zt=Cn(Er.G,{},this.outerSvg),this.svgBackground=Cn(Er.RECT,{class:"blocklyScrollbarBackground"},zt),Tt=Math.floor((Is.scrollbarThickness-5)/2),this.svgHandle=Cn(Er.RECT,{class:"blocklyScrollbarHandle",rx:Tt,ry:Tt},zt),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Or(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),kt?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Zt(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Zt(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const Tt=Is.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(Tt)),this.outerSvg.setAttribute("height",String(Tt)),this.svgHandle.setAttribute("height",String(Tt-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(Tt)),this.outerSvg.setAttribute("width",String(Tt)),this.svgHandle.setAttribute("width",String(Tt-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),cn(this.onMouseDownBarWrapper_),cn(this.onMouseDownHandleWrapper_),fr(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(Tt){return Tt=0>=Tt||isNaN(Tt)?0:Math.min(Tt,this.scrollbarLength)}setHandleLength(Tt){this.handleLength=Tt,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(Tt){return Tt=0>=Tt||isNaN(Tt)?0:Math.min(Tt,this.scrollbarLength-this.handleLength)}setHandlePosition(Tt){this.handlePosition=Tt,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(Tt){this.scrollbarLength=Tt,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(Tt,kt){this.position.x=Tt,this.position.y=kt,zr(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(Tt){!Tt&&(Tt=this.workspace.getMetrics(),!Tt)||this.oldHostMetrics&&Is.metricsAreEquivalent(Tt,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(Tt):this.resizeVertical(Tt),this.oldHostMetrics=Tt,this.updateMetrics())}requiresViewResize(Tt){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==Tt.viewWidth||this.oldHostMetrics.viewHeight!==Tt.viewHeight||this.oldHostMetrics.absoluteLeft!==Tt.absoluteLeft||this.oldHostMetrics.absoluteTop!==Tt.absoluteTop:!0}resizeHorizontal(Tt){this.requiresViewResize(Tt)?this.resizeViewHorizontal(Tt):this.resizeContentHorizontal(Tt)}resizeViewHorizontal(Tt){var kt=Tt.viewWidth-2*this.margin;this.pair&&(kt-=Is.scrollbarThickness),this.setScrollbarLength(Math.max(0,kt)),kt=Tt.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(kt+=Is.scrollbarThickness),this.setPosition(kt,Tt.absoluteTop+Tt.viewHeight-Is.scrollbarThickness-this.margin),this.resizeContentHorizontal(Tt)}resizeContentHorizontal(Tt){if(Tt.viewWidth>=Tt.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var kt=this.scrollbarLength*Tt.viewWidth/Tt.scrollWidth;kt=this.constrainHandleLength(kt),this.setHandleLength(kt),kt=Tt.scrollWidth-Tt.viewWidth;var Bt=this.scrollbarLength-this.handleLength;Tt=(Tt.viewLeft-Tt.scrollLeft)/kt*Bt,Tt=this.constrainHandlePosition(Tt),this.setHandlePosition(Tt),this.ratio=Bt/kt}}resizeVertical(Tt){this.requiresViewResize(Tt)?this.resizeViewVertical(Tt):this.resizeContentVertical(Tt)}resizeViewVertical(Tt){let kt=Tt.viewHeight-2*this.margin;this.pair&&(kt-=Is.scrollbarThickness),this.setScrollbarLength(Math.max(0,kt)),this.setPosition(this.workspace.RTL?Tt.absoluteLeft+this.margin:Tt.absoluteLeft+Tt.viewWidth-Is.scrollbarThickness-this.margin,Tt.absoluteTop+this.margin),this.resizeContentVertical(Tt)}resizeContentVertical(Tt){if(Tt.viewHeight>=Tt.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var kt=this.scrollbarLength*Tt.viewHeight/Tt.scrollHeight;kt=this.constrainHandleLength(kt),this.setHandleLength(kt),kt=Tt.scrollHeight-Tt.viewHeight;var Bt=this.scrollbarLength-this.handleLength;Tt=(Tt.viewTop-Tt.scrollTop)/kt*Bt,Tt=this.constrainHandlePosition(Tt),this.setHandlePosition(Tt),this.ratio=Bt/kt}}isVisible(){return this.isHandleVisible}setContainerVisible(Tt){const kt=Tt!==this.containerVisible;this.containerVisible=Tt,kt&&this.updateDisplay_()}setVisible(Tt){const kt=Tt!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=Tt,kt&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(Tt){if(this.workspace.markFocused(),Ct(),this.cleanUp(),dn(Tt))Tt.stopPropagation();else{var kt=pn(Tt,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());kt=this.horizontal?kt.x:kt.y;var Bt=Kp(this.svgHandle);Bt=this.horizontal?Bt.x:Bt.y;var zt=this.handlePosition,mn=.95*this.handleLength;kt<=Bt?zt-=mn:kt>=Bt+this.handleLength&&(zt+=mn),this.setHandlePosition(this.constrainHandlePosition(zt)),this.updateMetrics(),Tt.stopPropagation(),Tt.preventDefault()}}onMouseDownHandle(Tt){this.workspace.markFocused(),this.cleanUp(),dn(Tt)?Tt.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?Tt.clientX:Tt.clientY,this.onMouseUpWrapper_=Zt(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Zt(document,"pointermove",this,this.onMouseMoveHandle),Tt.stopPropagation(),Tt.preventDefault())}onMouseMoveHandle(Tt){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?Tt.clientX:Tt.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),Ct(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(cn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let Tt=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(Tt)&&(Tt=0),Tt}updateMetrics(){const Tt=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:Tt}):this.workspace.setMetrics({y:Tt})}set(Tt,kt){this.setHandlePosition(this.constrainHandlePosition(Tt*this.ratio)),(kt||kt===void 0)&&this.updateMetrics()}setOrigin(Tt,kt){this.origin=new ao(Tt,kt)}static metricsAreEquivalent(Tt,kt){return Tt.viewWidth===kt.viewWidth&&Tt.viewHeight===kt.viewHeight&&Tt.viewLeft===kt.viewLeft&&Tt.viewTop===kt.viewTop&&Tt.absoluteTop===kt.absoluteTop&&Tt.absoluteLeft===kt.absoluteLeft&&Tt.scrollWidth===kt.scrollWidth&&Tt.scrollHeight===kt.scrollHeight&&Tt.scrollLeft===kt.scrollLeft&&Tt.scrollTop===kt.scrollTop}};Is.scrollbarThickness=Qy?25:15,Is.DEFAULT_SCROLLBAR_MARGIN=.5;var Bo=class{constructor(Tt,kt,Bt,zt,mn,En){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=Tt,this.content_=kt,this.shape_=Bt,Bt=Bo.ARROW_ANGLE,this.workspace_.RTL&&(Bt=-Bt),this.arrowRadians=Jn(Bt),Tt.getBubbleCanvas().appendChild(this.createDom(kt,!(!mn||!En))),this.setAnchorLocation(zt),mn&&En||(Tt=this.content_.getBBox(),mn=Tt.width+2*Bo.BORDER_WIDTH,En=Tt.height+2*Bo.BORDER_WIDTH),this.setBubbleSize(mn,En),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(Tt,kt){this.bubbleGroup=Cn(Er.G,{});var Bt={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return io&&(Bt={}),Bt=Cn(Er.G,Bt,this.bubbleGroup),this.bubbleArrow=Cn(Er.PATH,{},Bt),this.bubbleBack=Cn(Er.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Bo.BORDER_WIDTH,ry:Bo.BORDER_WIDTH},Bt),kt?(this.resizeGroup=Cn(Er.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),kt=2*Bo.BORDER_WIDTH,Cn(Er.POLYGON,{points:"0,x x,x x,0".replace(/x/g,kt.toString())},this.resizeGroup),Cn(Er.LINE,{class:"blocklyResizeLine",x1:kt/3,y1:kt-1,x2:kt-1,y2:kt/3},this.resizeGroup),Cn(Er.LINE,{class:"blocklyResizeLine",x1:2*kt/3,y1:kt-1,x2:kt-1,y2:2*kt/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=Zt(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=Zt(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(Tt),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(Tt){let kt;(kt=this.bubbleGroup)==null||kt.setAttribute("data-block-id",Tt)}bubbleMouseDown(Tt){const kt=this.workspace_.getGesture(Tt);kt&&kt.handleBubbleStart(Tt,this)}showContextMenu(Tt){}isDeletable(){return!1}setDeleteStyle(Tt){}resizeMouseDown(Tt){this.promote(),Bo.unbindDragEvents(),dn(Tt)||(this.workspace_.startDrag(Tt,new ao(this.workspace_.RTL?-this.width:this.width,this.height)),Bo.onMouseUpWrapper=Zt(document,"pointerup",this,Bo.bubbleMouseUp),Bo.onMouseMoveWrapper=Zt(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),Tt.stopPropagation()}resizeMouseMove(Tt){this.autoLayout=!1,Tt=this.workspace_.moveDrag(Tt),this.setBubbleSize(this.workspace_.RTL?-Tt.x:Tt.x,Tt.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(Tt){this.resizeCallback=Tt}registerMoveEvent(Tt){this.moveCallback=Tt}promote(){let Tt;const kt=(Tt=this.bubbleGroup)==null?void 0:Tt.parentNode;return(kt==null?void 0:kt.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(kt==null||kt.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(Tt){this.anchorXY=Tt,this.rendered&&this.positionBubble()}layoutBubble(){var Tt=this.workspace_.getMetricsManager().getViewMetrics(!0),kt=this.getOptimalRelativeLeft(Tt),Bt=this.getOptimalRelativeTop(Tt),zt=this.shape_.getBBox();const mn={x:kt,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},En={x:-this.width-30,y:Bt};Bt={x:zt.width,y:Bt};var Hn={x:kt,y:zt.height};kt=zt.width<zt.height?Bt:Hn,zt=zt.width<zt.height?Hn:Bt,Bt=this.getOverlap(mn,Tt),Hn=this.getOverlap(En,Tt);const pr=this.getOverlap(kt,Tt);Tt=this.getOverlap(zt,Tt),Tt=Math.max(Bt,Hn,pr,Tt),Bt===Tt?(this.relativeLeft=mn.x,this.relativeTop=mn.y):Hn===Tt?(this.relativeLeft=En.x,this.relativeTop=En.y):pr===Tt?(this.relativeLeft=kt.x,this.relativeTop=kt.y):(this.relativeLeft=zt.x,this.relativeTop=zt.y)}getOverlap(Tt,kt){var Bt=this.workspace_.RTL?this.anchorXY.x-Tt.x-this.width:Tt.x+this.anchorXY.x;return Tt=Tt.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(Bt+this.width,kt.left+kt.width)-Math.max(Bt,kt.left))*(Math.min(Tt+this.height,kt.top+kt.height)-Math.max(Tt,kt.top))/(this.width*this.height)))}getOptimalRelativeLeft(Tt){let kt=-this.width/4;if(this.width>Tt.width)return kt;if(this.workspace_.RTL){var Bt=this.anchorXY.x-kt,zt=Tt.left+Tt.width;Tt=Tt.left+Is.scrollbarThickness/this.workspace_.scale,Bt-this.width<Tt?kt=-(Tt-this.anchorXY.x+this.width):Bt>zt&&(kt=-(zt-this.anchorXY.x))}else{Bt=kt+this.anchorXY.x,zt=Bt+this.width;const mn=Tt.left;Tt=Tt.left+Tt.width-Is.scrollbarThickness/this.workspace_.scale,Bt<mn?kt=mn-this.anchorXY.x:zt>Tt&&(kt=Tt-this.anchorXY.x-this.width)}return kt}getOptimalRelativeTop(Tt){let kt=-this.height/4;if(this.height>Tt.height)return kt;const Bt=this.anchorXY.y+kt,zt=Bt+this.height,mn=Tt.top;Tt=Tt.top+Tt.height-Is.scrollbarThickness/this.workspace_.scale;const En=this.anchorXY.y;return Bt<mn?kt=mn-En:zt>Tt&&(kt=Tt-En-this.height),kt}positionBubble(){let Tt=this.anchorXY.x;Tt=this.workspace_.RTL?Tt-(this.relativeLeft+this.width):Tt+this.relativeLeft,this.moveTo(Tt,this.relativeTop+this.anchorXY.y)}moveTo(Tt,kt){let Bt;(Bt=this.bubbleGroup)==null||Bt.setAttribute("transform","translate("+Tt+","+kt+")")}setDragging(Tt){!Tt&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new Pl(this.width,this.height)}setBubbleSize(Tt,kt){const Bt=2*Bo.BORDER_WIDTH;Tt=Math.max(Tt,Bt+45),kt=Math.max(kt,Bt+20),this.width=Tt,this.height=kt;let zt;(zt=this.bubbleBack)==null||zt.setAttribute("width",Tt.toString());let mn;(mn=this.bubbleBack)==null||mn.setAttribute("height",kt.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*Bo.BORDER_WIDTH+","+(kt-Bt)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(Tt-Bt)+","+(kt-Bt)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const Tt=[];var kt=this.width/2,Bt=this.height/2,zt=-this.relativeLeft,mn=-this.relativeTop;if(kt===zt&&Bt===mn)Tt.push("M "+kt+","+Bt);else{mn-=Bt,zt-=kt,this.workspace_.RTL&&(zt*=-1);var En=Math.sqrt(mn*mn+zt*zt),Hn=Math.acos(zt/En);0>mn&&(Hn=2*Math.PI-Hn);var pr=Hn+Math.PI/2;pr>2*Math.PI&&(pr-=2*Math.PI);var Kr=Math.sin(pr);const ws=Math.cos(pr);var lo=this.getBubbleSize();pr=(lo.width+lo.height)/Bo.ARROW_THICKNESS,pr=Math.min(pr,lo.width,lo.height)/4,lo=1-Bo.ANCHOR_RADIUS/En,zt=kt+lo*zt,mn=Bt+lo*mn,lo=kt+pr*ws;const Wu=Bt+pr*Kr;kt-=pr*ws,Bt-=pr*Kr,Kr=Hn+this.arrowRadians,Kr>2*Math.PI&&(Kr-=2*Math.PI),Hn=Math.sin(Kr)*En/Bo.ARROW_BEND,En=Math.cos(Kr)*En/Bo.ARROW_BEND,Tt.push("M"+lo+","+Wu),Tt.push("C"+(lo+En)+","+(Wu+Hn)+" "+zt+","+mn+" "+zt+","+mn),Tt.push("C"+zt+","+mn+" "+(kt+En)+","+(Bt+Hn)+" "+kt+","+Bt)}Tt.push("z");let es;(es=this.bubbleArrow)==null||es.setAttribute("d",Tt.join(" "))}setColour(Tt){let kt;(kt=this.bubbleBack)==null||kt.setAttribute("fill",Tt);let Bt;(Bt=this.bubbleArrow)==null||Bt.setAttribute("fill",Tt)}dispose(){this.onMouseDownBubbleWrapper&&cn(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&cn(this.onMouseDownResizeWrapper),Bo.unbindDragEvents(),fr(this.bubbleGroup),this.disposed=!0}moveDuringDrag(Tt,kt){Tt?Tt.translateSurface(kt.x,kt.y):this.moveTo(kt.x,kt.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-kt.x-this.width:kt.x-this.anchorXY.x,this.relativeTop=kt.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new ao(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(Tt){this.autoLayout=Tt}static unbindDragEvents(){Bo.onMouseUpWrapper&&(cn(Bo.onMouseUpWrapper),Bo.onMouseUpWrapper=null),Bo.onMouseMoveWrapper&&(cn(Bo.onMouseMoveWrapper),Bo.onMouseMoveWrapper=null)}static bubbleMouseUp(Tt){Ct(),Bo.unbindDragEvents()}static textToDom(Tt){const kt=Cn(Er.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Bo.BORDER_WIDTH});Tt=Tt.split(`
`);for(let Bt=0;Bt<Tt.length;Bt++){const zt=Cn(Er.TSPAN,{dy:"1em",x:Bo.BORDER_WIDTH},kt),mn=document.createTextNode(Tt[Bt]);zt.appendChild(mn)}return kt}static createNonEditableBubble(Tt,kt,Bt){if(Bt=new Bo(kt.workspace,Tt,kt.pathObject.svgPath,Bt,null,null),Bt.setSvgId(kt.id),kt.RTL){kt=Tt.getBBox().width;for(let zt=0,mn;mn=Tt.childNodes[zt];zt++)mn.setAttribute("text-anchor","end"),mn.setAttribute("x",(kt+Bo.BORDER_WIDTH).toString())}return Bt}};Bo.BORDER_WIDTH=6,Bo.ARROW_THICKNESS=5,Bo.ARROW_ANGLE=20,Bo.ARROW_BEND=4,Bo.ANCHOR_RADIUS=8,Bo.onMouseUpWrapper=null,Bo.onMouseMoveWrapper=null;var jS,Ox;jS=28,dt.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:jS,connectingSnapRadius:jS,currentConnectionPreference:8,bumpDelay:250},Ox={},Ox.config=dt.config$$module$build$src$core$config;var jO=class{constructor(Tt){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,Tt||vt("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=Tt}createIcon(){this.iconGroup_||(this.iconGroup_=Cn(Er.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&tr(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),Zt(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){fr(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(Tt){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||dn(Tt)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(Tt){this.iconXY_=Tt,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(Tt)}computeIconLocation(){var Tt=this.getBlock().getRelativeToSurfaceXY();const kt=Zs(this.iconGroup_);Tt=new ao(Tt.x+kt.x+this.SIZE/2,Tt.y+kt.y+this.SIZE/2),ao.equals(this.getIconLocation(),Tt)||this.setIconLocation(Tt)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Pl(this.SIZE,this.SIZE-2)}drawIcon_(Tt){}setVisible(Tt){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},fv={};fv.deepMerge=wp,fv.inherits=f_,fv.mixin=p_,fv.values=Il;var U_=class{constructor(Tt,kt,Bt,zt){this.name=Tt,this.startHats=!1,this.blockStyles=kt||Object.create(null),this.categoryStyles=Bt||Object.create(null),this.componentStyles=zt||Object.create(null),this.fontStyle=Object.create(null),So(ro.THEME,Tt,this)}getClassName(){return this.name+"-theme"}setBlockStyle(Tt,kt){this.blockStyles[Tt]=kt}setCategoryStyle(Tt,kt){this.categoryStyles[Tt]=kt}getComponentStyle(Tt){return(Tt=this.componentStyles[Tt])&&typeof Tt=="string"&&this.getComponentStyle(Tt)?this.getComponentStyle(Tt):Tt?String(Tt):null}setComponentStyle(Tt,kt){this.componentStyles[Tt]=kt}setFontStyle(Tt){this.fontStyle=Tt}setStartHats(Tt){this.startHats=Tt}static defineTheme(Tt,kt){Tt=Tt.toLowerCase();const Bt=new U_(Tt);let zt=kt.base;if(zt){if(typeof zt=="string"){let mn;zt=(mn=Xr(ro.THEME,zt))!=null?mn:void 0}zt instanceof U_&&(wp(Bt,zt),Bt.name=Tt)}return wp(Bt.blockStyles,kt.blockStyles),wp(Bt.categoryStyles,kt.categoryStyles),wp(Bt.componentStyles,kt.componentStyles),wp(Bt.fontStyle,kt.fontStyle),kt.startHats!==null&&(Bt.startHats=kt.startHats),Bt}},n$={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},r$={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},XO=new U_("classic",n$,r$),XS="categoryToolbox",bx="flyoutToolbox",Do;(function(Tt){Tt[Tt.TOP=0]="TOP",Tt[Tt.BOTTOM=1]="BOTTOM",Tt[Tt.LEFT=2]="LEFT",Tt[Tt.RIGHT=3]="RIGHT"})(Do||(Do={}));var Sx={hasCategoriesInternal:qu},_g={};_g.Position=Do,_g.TEST_ONLY=Sx,_g.convertFlyoutDefToJsonArray=Nm,_g.convertToolboxDefToJson=Lm,_g.hasCategories=Lu,_g.isCategoryCollapsible=ap,_g.parseToolboxTree=fy;var yp=class{constructor(Tt){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let kt=null,Bt=!1;var zt=!1,mn=!1,En=!1,Hn=!1,pr=!1;const Kr=!!Tt.readOnly;if(!Kr){var lo;kt=Lm((lo=Tt.toolbox)!=null?lo:null),Bt=Lu(kt),zt=Tt.trashcan,zt=zt===void 0?Bt:zt,mn=Tt.collapse,mn=mn===void 0?Bt:mn,En=Tt.comments,En=En===void 0?Bt:En,Hn=Tt.disable,Hn=Hn===void 0?Bt:Hn,pr=Tt.sounds,pr=pr===void 0?!0:pr}lo=Tt.maxTrashcanContents,zt?lo===void 0&&(lo=32):lo=0;const es=!!Tt.rtl;let ws=Tt.horizontalLayout;ws===void 0&&(ws=!1);var Wu=Tt.toolboxPosition!=="end";Wu=ws?Wu?Do.TOP:Do.BOTTOM:Wu===es?Do.RIGHT:Do.LEFT;let qT=Tt.css;qT===void 0&&(qT=!0);let KT="https://blockly-demo.appspot.com/static/media/";Tt.media?KT=Tt.media.endsWith("/")?Tt.media:Tt.media+"/":"path"in Tt&&(vt("path","Nov 2014","Jul 2023","media"),KT=Tt.path+"media/");const UE=Tt.oneBasedIndex,N$=Tt.renderer||"geras",B$=Tt.plugins||{};let JT=Tt.modalInputs;JT===void 0&&(JT=!0),this.RTL=es,this.oneBasedIndex=UE===void 0?!0:UE,this.collapse=mn,this.comments=En,this.disable=Hn,this.readOnly=Kr,this.maxBlocks=Tt.maxBlocks||1/0;let VE;this.maxInstances=(VE=Tt.maxInstances)!=null?VE:null,this.modalInputs=JT,this.pathToMedia=KT,this.hasCategories=Bt,this.moveOptions=yp.parseMoveOptions_(Tt,Bt),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=zt,this.maxTrashcanContents=lo,this.hasSounds=pr,this.hasCss=qT,this.horizontalLayout=ws,this.languageTree=kt,this.gridOptions=yp.parseGridOptions_(Tt),this.zoomOptions=yp.parseZoomOptions_(Tt),this.toolboxPosition=Wu,this.theme=yp.parseThemeOptions_(Tt),this.renderer=N$;let WE;this.rendererOverrides=(WE=Tt.rendererOverrides)!=null?WE:null;let zE;this.parentWorkspace=(zE=Tt.parentWorkspace)!=null?zE:null,this.plugins=B$}static parseMoveOptions_(Tt,kt){const Bt=Tt.move||{},zt={};return Bt.scrollbars===void 0&&Tt.scrollbars===void 0?zt.scrollbars=kt:typeof Bt.scrollbars=="object"?(zt.scrollbars={horizontal:!!Bt.scrollbars.horizontal,vertical:!!Bt.scrollbars.vertical},zt.scrollbars.horizontal&&zt.scrollbars.vertical?zt.scrollbars=!0:zt.scrollbars.horizontal||zt.scrollbars.vertical||(zt.scrollbars=!1)):zt.scrollbars=!!Bt.scrollbars||!!Tt.scrollbars,zt.wheel=zt.scrollbars&&Bt.wheel!==void 0?!!Bt.wheel:typeof zt.scrollbars=="object",zt.drag=zt.scrollbars?Bt.drag===void 0?!0:!!Bt.drag:!1,zt}static parseZoomOptions_(Tt){Tt=Tt.zoom||{};const kt={};return kt.controls=Tt.controls===void 0?!1:!!Tt.controls,kt.wheel=Tt.wheel===void 0?!1:!!Tt.wheel,kt.startScale=Tt.startScale===void 0?1:Number(Tt.startScale),kt.maxScale=Tt.maxScale===void 0?3:Number(Tt.maxScale),kt.minScale=Tt.minScale===void 0?.3:Number(Tt.minScale),kt.scaleSpeed=Tt.scaleSpeed===void 0?1.2:Number(Tt.scaleSpeed),kt.pinch=Tt.pinch===void 0?kt.wheel||kt.controls:!!Tt.pinch,kt}static parseGridOptions_(Tt){Tt=Tt.grid||{};const kt={};return kt.spacing=Number(Tt.spacing)||0,kt.colour=Tt.colour||"#888",kt.length=Tt.length===void 0?1:Number(Tt.length),kt.snap=0<kt.spacing&&!!Tt.snap,kt}static parseThemeOptions_(Tt){return Tt=Tt.theme||XO,typeof Tt=="string"?Xr(ro.THEME,Tt):Tt instanceof U_?Tt:U_.defineTheme(Tt.name||"builtin"+wo(),Tt)}},Tx;dt.Mutator$$module$build$src$core$mutator=class extends jO{constructor(Tt,kt){kt||vt("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(kt??null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=Tt}setBlock(Tt){this.block_=Tt}getWorkspace(){return this.workspace_}drawIcon_(Tt){Cn(Er.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},Tt),Cn(Er.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},Tt),Cn(Er.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},Tt)}iconClick_(Tt){this.getBlock().isEditable()&&super.iconClick_(Tt)}createEditor(){if(this.svgDialog=Cn(Er.SVG,{x:Bo.BORDER_WIDTH,y:Bo.BORDER_WIDTH}),this.quarkNames.length){var Tt=Po("xml");for(let zt=0,mn;mn=this.quarkNames[zt];zt++){var kt=Po("block");kt.setAttribute("type",mn),Tt.appendChild(kt)}}else Tt=null;var Bt=this.getBlock();return kt=new yp({disable:!1,parentWorkspace:Bt.workspace,media:Bt.workspace.options.pathToMedia,rtl:Bt.RTL,horizontalLayout:!1,renderer:Bt.workspace.options.renderer,rendererOverrides:Bt.workspace.options.rendererOverrides}),kt.toolboxPosition=Bt.RTL?Do.RIGHT:Do.LEFT,(Bt=!!Tt)&&(kt.languageTree=Lm(Tt)),this.workspace_=this.newWorkspaceSvg(kt),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(Yo),Tt=Bt?this.workspace_.addFlyout(Er.G):null,kt=this.workspace_.createDom("blocklyMutatorBackground"),Tt&&kt.insertBefore(Tt,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(kt),this.svgDialog}newWorkspaceSvg(Tt){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&Zn(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&tr(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var Tt=2*Bo.BORDER_WIDTH,kt=this.workspace_.getCanvas(),Bt=kt.getBBox(),zt=Bt.width+Bt.x,mn=Bt.height+3*Tt,En=this.workspace_.getFlyout();if(En){const Hn=En.getWorkspace().getMetricsManager().getScrollMetrics();mn=Math.max(mn,Hn.height+20),zt+=En.getWidth()}(En=this.getBlock().RTL)&&(zt=-Bt.x),zt+=3*Tt,(Math.abs(this.workspaceWidth-zt)>Tt||Math.abs(this.workspaceHeight-mn)>Tt)&&(this.workspaceWidth=zt,this.workspaceHeight=mn,this.bubble_.setBubbleSize(zt+Tt,mn+Tt),this.svgDialog.setAttribute("width",`${zt}`),this.svgDialog.setAttribute("height",`${mn}`),this.workspace_.setCachedParentSvgSize(zt,mn)),En&&kt.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(Tt){if(Tt!==this.isVisible()){var kt=this.getBlock();if(to(new(no(Om))(kt,Tt,"mutator")),Tt){this.bubble_=new Bo(kt.workspace,this.createEditor(),kt.pathObject.svgPath,this.iconXY_,null,null),Tt=this.workspace_,this.bubble_.setSvgId(kt.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var Bt=Tt.options.languageTree,zt=Tt.getFlyout();Bt&&(zt.init(Tt),zt.show(Bt)),this.rootBlock=kt.decompose(Tt),Bt=this.rootBlock.getDescendants(!1);for(let mn=0,En;En=Bt[mn];mn++)En.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),zt?(Bt=2*zt.CORNER_RADIUS,zt=this.rootBlock.RTL?zt.getWidth()+Bt:Bt):zt=Bt=16,kt.RTL&&(zt=-zt),this.rootBlock.moveBy(zt,Bt),kt.saveConnections){const mn=this.rootBlock;kt.saveConnections(mn),this.sourceListener=()=>{const En=this.getBlock();En.saveConnections&&En.saveConnections(mn)},kt.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),Tt.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,(zt=this.bubble_)==null||zt.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(kt.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(Tt){this.shouldIgnoreMutatorEvent_(Tt)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(Tt){return Tt.isUiEvent||Tt.type===Xl||Tt.type===yl&&Tt.element==="disabled"}updateWorkspace(){if(!this.workspace_.isDragging()){var Tt=this.workspace_.getTopBlocks(!1);for(let zt=0,mn;mn=Tt[zt];zt++){var kt=mn.getRelativeToSurfaceXY();if(20>kt.y&&mn.moveBy(0,20-kt.y),mn.RTL){var Bt=-20;const En=this.workspace_.getFlyout();En&&(Bt-=En.getWidth()),kt.x>Bt&&mn.moveBy(Bt-kt.x,0)}else 20>kt.x&&mn.moveBy(20-kt.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(Tt=Mo())||fo(!0);const zt=this.getBlock();if(kt=G_.getExtraBlockState_(zt),Bt=zt.rendered,zt.rendered=!1,zt.compose(this.rootBlock),zt.rendered=Bt,zt.initSvg(),zt.rendered&&zt.render(),Bt=G_.getExtraBlockState_(zt),kt!==Bt){to(new(no(yl))(zt,"mutation",null,kt,Bt));const mn=Mo();setTimeout(function(){const En=Mo();fo(mn),zt.bumpNeighbours(),fo(En)},dt.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),fo(Tt)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var Tt=this.workspace_;if(Tt&&Tt.getAllBlocks(!1)){const kt=Tt.getAllBlocks(!1);for(let Bt=0,zt;zt=kt[Bt];Bt++)zt.setStyle(zt.getStyleName());if(Tt=Tt.getFlyout()){Tt=Tt.getWorkspace().getAllBlocks(!1);for(let Bt=0,zt;zt=Tt[Bt];Bt++)zt.setStyle(zt.getStyleName())}}}static reconnect(Tt,kt,Bt){if(!Tt||!Tt.getSourceBlock().workspace)return!1;Bt=kt.getInput(Bt).connection;const zt=Tt.targetBlock();return zt&&zt!==kt||!Bt||Bt.targetConnection===Tt?!1:(Bt.isConnected()&&Bt.disconnect(),Bt.connect(Tt),!0)}static findParentWs(Tt){let kt=null;if(Tt&&Tt.options){const Bt=Tt.options.parentWorkspace;Tt.isFlyout?Bt&&Bt.options&&(kt=Bt.options.parentWorkspace):Bt&&(kt=Bt)}return kt}},Tx={},Tx.Mutator=dt.Mutator$$module$build$src$core$mutator;var U0=Object.create(null),i$={allExtensions:U0};m_("parent_tooltip_when_inline",sS),dt.module$build$src$core$extensions={},dt.module$build$src$core$extensions.TEST_ONLY=i$,dt.module$build$src$core$extensions.apply=dm,dt.module$build$src$core$extensions.buildTooltipForDropdown=gy,dt.module$build$src$core$extensions.buildTooltipWithFieldText=Xv,dt.module$build$src$core$extensions.isRegistered=r0,dt.module$build$src$core$extensions.register=m_,dt.module$build$src$core$extensions.registerMixin=Vv,dt.module$build$src$core$extensions.registerMutator=Wv,dt.module$build$src$core$extensions.runAfterPageLoad=g_,dt.module$build$src$core$extensions.unregister=zv;var xx={};xx.removeElem=Vl;var Sm={};Sm.arc=Ls,Sm.curve=lu,Sm.line=Fm,Sm.lineOnAxis=uo,Sm.lineTo=Ku,Sm.moveBy=gs,Sm.moveTo=xa,Sm.point=To;var Ko={};Ko.Coordinate=ao,Ko.KeyCodes=vo,Ko.Rect=Fs,Ko.Size=Pl,Ko.Svg=Er,Ko.aria=dv,Ko.array=xx,Ko.arrayRemove=qv,Ko.browserEvents=jr,Ko.checkMessageReferences=cS,Ko.colour=nu,Ko.deprecation=Bs,Ko.dom=ga,Ko.extensions=dt.module$build$src$core$extensions,Ko.getBlockTypeCounts=Jv,Ko.getDocumentScroll=Kv,Ko.getInjectionDivXY_=lS,Ko.getRelativeXY=aS,Ko.getViewportBBox=Zv,Ko.idGenerator=kO,Ko.is3dSupported=Yv,Ko.math=wO,Ko.object=fv,Ko.parseBlockColour=eO,Ko.parsing=uv,Ko.replaceMessageReferences=vy,Ko.runAfterPageLoad=__,Ko.screenToWsCoordinates=Ju,Ko.string=dt.module$build$src$core$utils$string,Ko.style=Fp,Ko.svgMath=Jm,Ko.svgPaths=Sm,Ko.tokenizeInterpolation=yy,Ko.toolbox=_g,Ko.userAgent=Us,Ko.xml=dt.module$build$src$core$utils$xml;var YS=class extends pp{constructor(Tt,kt){super(kt),this.type=Jy,this.isOpen=Tt}toJson(){const Tt=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return Tt.isOpen=this.isOpen,Tt}fromJson(Tt){vt("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.isOpen=Tt.isOpen}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new YS),kt.isOpen=Tt.isOpen,kt}};So(ro.EVENT,Jy,YS);var Tm=class{constructor(Tt){this.name_=Tt}toString(){return this.name_}};Tm.POSITIONABLE=new Tm("positionable"),Tm.DRAG_TARGET=new Tm("drag_target"),Tm.DELETE_AREA=new Tm("delete_area"),Tm.AUTOHIDEABLE=new Tm("autohideable");var Dl=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(Tt,kt){const Bt=Tt.component.id;if(!kt&&this.componentData.has(Bt)){var zt;throw Error('Plugin "'+Bt+'" with capabilities "'+((zt=this.componentData.get(Bt))==null?void 0:zt.capabilities)+'" already added.')}for(this.componentData.set(Bt,Tt),kt=[],zt=0;zt<Tt.capabilities.length;zt++){const mn=String(Tt.capabilities[zt]).toLowerCase();if(kt.push(mn),this.capabilityToComponentIds.has(mn)){let En;(En=this.capabilityToComponentIds.get(mn))==null||En.push(Bt)}else this.capabilityToComponentIds.set(mn,[Bt])}this.componentData.get(Bt).capabilities=kt}removeComponent(Tt){const kt=this.componentData.get(Tt);if(kt){for(let Bt=0;Bt<kt.capabilities.length;Bt++){const zt=String(kt.capabilities[Bt]).toLowerCase();Vl(this.capabilityToComponentIds.get(zt),Tt)}this.componentData.delete(Tt)}}addCapability(Tt,kt){if(!this.getComponent(Tt))throw Error('Cannot add capability, "'+kt+'". Plugin "'+Tt+'" has not been added to the ComponentManager');if(this.hasCapability(Tt,kt))console.warn('Plugin "'+Tt+'already has capability "'+kt+'"');else{kt=String(kt).toLowerCase();var Bt;(Bt=this.componentData.get(Tt))==null||Bt.capabilities.push(kt);var zt;(zt=this.capabilityToComponentIds.get(kt))==null||zt.push(Tt)}}removeCapability(Tt,kt){if(!this.getComponent(Tt))throw Error('Cannot remove capability, "'+kt+'". Plugin "'+Tt+'" has not been added to the ComponentManager');this.hasCapability(Tt,kt)?(kt=String(kt).toLowerCase(),Vl(this.componentData.get(Tt).capabilities,kt),Vl(this.capabilityToComponentIds.get(kt),Tt)):console.warn('Plugin "'+Tt+`doesn't have capability "`+kt+'" to remove')}hasCapability(Tt,kt){return kt=String(kt).toLowerCase(),this.componentData.has(Tt)&&this.componentData.get(Tt).capabilities.indexOf(kt)!==-1}getComponent(Tt){let kt;return(kt=this.componentData.get(Tt))==null?void 0:kt.component}getComponents(Tt,kt){if(Tt=String(Tt).toLowerCase(),Tt=this.capabilityToComponentIds.get(Tt),!Tt)return[];const Bt=[];if(kt){const zt=[];Tt.forEach(mn=>{zt.push(this.componentData.get(mn))}),zt.sort(function(mn,En){return mn.weight-En.weight}),zt.forEach(function(mn){Bt.push(mn.component)})}else Tt.forEach(zt=>{Bt.push(this.componentData.get(zt).component)});return Bt}};Dl.Capability=Tm;var pv=class extends Error{},Ex=class extends pv{constructor(Tt){super("Expected to find a 'type' property, defining the block type"),this.state=Tt}},mv=class extends pv{constructor(Tt,kt,Bt){super(`The block ${kt.toDevString()} is missing a(n) ${Tt}
connection`),this.block=kt,this.state=Bt}},$x=class extends pv{constructor(Tt,kt,Bt,zt){super(`The block ${Bt.toDevString()} could not connect its
${kt} to its parent, because: ${Tt}`),this.childBlock=Bt,this.childState=zt}},wx=class extends pv{constructor(Tt){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=Tt}},V0={};V0.BadConnectionCheck=$x,V0.DeserializationError=pv,V0.MissingBlockType=Ex,V0.MissingConnection=mv,V0.RealChildOfShadow=wx;var Cx=100,Ax=75,kx=50,YO={};YO.BLOCKS=kx,YO.PROCEDURES=Ax,YO.VARIABLES=Cx;var ZS={};ZS.register=pm,ZS.unregister=l0;var Ix=class{constructor(){this.priority=kx}save(Tt){const kt=[];for(const Bt of Tt.getTopBlocks(!1))(Tt=Ou(Bt,{addCoordinates:!0,doFullSerialization:!1}))&&kt.push(Tt);return kt.length?{languageVersion:0,blocks:kt}:null}load(Tt,kt){Tt=Tt.blocks;for(const Bt of Tt)Cp(Bt,kt,{recordUndo:Co()})}clear(Tt){for(const kt of Tt.getTopBlocks(!1))kt.dispose(!1)}};pm("blocks",new Ix);var gv={};gv.BlockSerializer=Ix,gv.append=Cp,gv.appendInternal=c0,gv.save=Ou;var qS=class extends N0{constructor(Tt){super(Tt),this.type=Xl,Tt&&(Tt.isShadow()&&(this.recordUndo=!1),this.xml=El(Tt),this.ids=Ol(Tt),this.json=Ou(Tt,{addCoordinates:!0}))}toJson(){const Tt=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return Tt.xml=$l(this.xml),Tt.ids=this.ids,Tt.json=this.json,this.recordUndo||(Tt.recordUndo=this.recordUndo),Tt}fromJson(Tt){vt("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.xml=Rs(Tt.xml),this.ids=Tt.ids,this.json=Tt.json,Tt.recordUndo!==void 0&&(this.recordUndo=Tt.recordUndo)}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new qS),kt.xml=Rs(Tt.xml),kt.ids=Tt.ids,kt.json=Tt.json,Tt.recordUndo!==void 0&&(kt.recordUndo=Tt.recordUndo),kt}run(Tt){const kt=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(Tt)Cp(this.json,kt);else for(Tt=0;Tt<this.ids.length;Tt++){const Bt=this.ids[Tt],zt=kt.getBlockById(Bt);zt?zt.dispose(!1):Bt===this.blockId&&console.warn("Can't uncreate non-existent block: "+Bt)}}};So(ro.EVENT,Xl,qS);var KS=class extends N0{constructor(Tt){if(super(Tt),this.type=Gp,Tt){if(Tt.getParent())throw Error("Connected blocks cannot be deleted.");Tt.isShadow()&&(this.recordUndo=!1),this.oldXml=El(Tt),this.ids=Ol(Tt),this.wasShadow=Tt.isShadow(),this.oldJson=Ou(Tt,{addCoordinates:!0})}}toJson(){const Tt=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return Tt.oldXml=$l(this.oldXml),Tt.ids=this.ids,Tt.wasShadow=this.wasShadow,Tt.oldJson=this.oldJson,this.recordUndo||(Tt.recordUndo=this.recordUndo),Tt}fromJson(Tt){vt("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldXml=Rs(Tt.oldXml),this.ids=Tt.ids,this.wasShadow=Tt.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=Tt.oldJson,Tt.recordUndo!==void 0&&(this.recordUndo=Tt.recordUndo)}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new KS),kt.oldXml=Rs(Tt.oldXml),kt.ids=Tt.ids,kt.wasShadow=Tt.wasShadow||kt.oldXml.tagName.toLowerCase()==="shadow",kt.oldJson=Tt.oldJson,Tt.recordUndo!==void 0&&(kt.recordUndo=Tt.recordUndo),kt}run(Tt){const kt=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(Tt)for(Tt=0;Tt<this.ids.length;Tt++){const Bt=this.ids[Tt],zt=kt.getBlockById(Bt);zt?zt.dispose(!1):Bt===this.blockId&&console.warn("Can't delete non-existent block: "+Bt)}else Cp(this.oldJson,kt)}};So(ro.EVENT,Gp,KS);var po;(function(Tt){Tt[Tt.INPUT_VALUE=1]="INPUT_VALUE",Tt[Tt.OUTPUT_VALUE=2]="OUTPUT_VALUE",Tt[Tt.NEXT_STATEMENT=3]="NEXT_STATEMENT",Tt[Tt.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(po||(po={})),dt.module$build$src$core$connection_type={},dt.module$build$src$core$connection_type.ConnectionType=po;var ls=class{constructor(Tt,kt){this.type=kt,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=Tt}connect_(Tt){const kt=po.INPUT_VALUE,Bt=this.getSourceBlock();var zt=Tt.getSourceBlock();Tt.isConnected()&&Tt.disconnect();let mn;if(this.isConnected()){const Hn=this.stashShadowState_(),pr=this.targetBlock();pr.isShadow()?pr.dispose(!1):(this.disconnect(),mn=pr),this.applyShadowState_(Hn)}let En;ts()&&(En=new(no(hu))(zt)),sO(this,Tt),zt.setParent(Bt),En&&(En.recordNew(),to(En)),mn&&(Tt=this.type===kt?mn.outputConnection:mn.previousConnection,(zt=ls.getConnectionForOrphanedConnection(zt,Tt))?Tt.connect(zt):Tt.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const Tt=this.targetBlock();Tt&&Tt.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===po.INPUT_VALUE||this.type===po.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(Tt){}connect(Tt){if(this.targetConnection===Tt)return!0;if(this.getConnectionChecker().canConnect(this,Tt,!1)){const kt=Mo();kt||fo(!0),this.isSuperior()?this.connect_(Tt):Tt.connect_(this),kt||fo(!1)}return this.isConnected()}disconnect(){var Tt=this.targetConnection;if(!Tt)throw Error("Source connection not connected.");if(Tt.targetConnection!==this)throw Error("Target connection not connected to source connection.");let kt,Bt;this.isSuperior()?(kt=this.sourceBlock_,Bt=Tt.getSourceBlock(),Tt=this):(kt=Tt.getSourceBlock(),Bt=this.sourceBlock_);const zt=Mo();zt||fo(!0),this.disconnectInternal_(kt,Bt),Bt.isShadow()||Tt.respawnShadow_(),zt||fo(!1)}disconnectInternal_(Tt,kt){let Bt;ts()&&(Bt=new(no(hu))(kt)),(Tt=this.targetConnection)&&(Tt.targetConnection=null),this.targetConnection=null,kt.setParent(null),Bt&&(Bt.recordNew(),to(Bt))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let Tt,kt;return(kt=(Tt=this.targetConnection)==null?void 0:Tt.getSourceBlock())!=null?kt:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(Tt){return Tt?(Array.isArray(Tt)||(Tt=[Tt]),this.check_=Tt,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(Tt){this.setShadowStateInternal_({shadowDom:Tt})}getShadowDom(Tt){return Tt&&this.targetBlock().isShadow()?qs(this.targetBlock()):this.shadowDom_}setShadowState(Tt){this.setShadowStateInternal_({shadowState:Tt})}getShadowState(Tt){return Tt&&this.targetBlock()&&this.targetBlock().isShadow()?Ou(this.targetBlock()):this.shadowState_}neighbours(Tt){return[]}getParentInput(){let Tt=null;const kt=this.sourceBlock_.inputList;for(let Bt=0;Bt<kt.length;Bt++)if(kt[Bt].connection===this){Tt=kt[Bt];break}return Tt}toString(){const Tt=this.sourceBlock_;if(!Tt)return"Orphan Connection";if(Tt.outputConnection===this)var kt="Output Connection of ";else if(Tt.previousConnection===this)kt="Previous Connection of ";else if(Tt.nextConnection===this)kt="Next Connection of ";else{kt=null;for(let Bt=0,zt;zt=Tt.inputList[Bt];Bt++)if(zt.connection===this){kt=zt;break}if(kt)kt='Input "'+kt.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return kt+Tt.toDevString()}stashShadowState_(){const Tt=this.getShadowDom(!0),kt=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:Tt,shadowState:kt}}applyShadowState_({shadowDom:Tt,shadowState:kt}){this.shadowDom_=Tt,this.shadowState_=kt}setShadowStateInternal_({shadowDom:Tt=null,shadowState:kt=null}={}){this.shadowDom_=Tt,this.shadowState_=kt,(Tt=this.targetBlock())?Tt.isShadow()?(Tt.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(Tt=this.createShadowBlock_(!1),this.serializeShadow_(Tt),Tt&&Tt.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(Tt){var kt=this.getSourceBlock();const Bt=this.getShadowState(),zt=this.getShadowDom();if(kt.isDeadOrDying()||!Bt&&!zt)return null;if(Bt)return kt=c0(Bt,kt.workspace,{parentConnection:Tt?this:void 0,isShadow:!0,recordUndo:!1});if(zt){if(kt=Es(zt,kt.workspace),Tt)if(this.type===po.INPUT_VALUE){if(!kt.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(kt.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===po.NEXT_STATEMENT){if(!kt.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(kt.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return kt}return null}serializeShadow_(Tt){Tt&&(this.shadowDom_=qs(Tt),this.shadowState_=Ou(Tt))}static getConnectionForOrphanedConnection(Tt,kt){if(kt.type===po.OUTPUT_VALUE)return d0(Tt,kt.getSourceBlock());Tt=Tt.lastConnectionInStack(!0);const Bt=kt.getConnectionChecker();return Tt&&Bt.canConnect(kt,Tt,!1)?Tt:null}};ls.CAN_CONNECT=0,ls.REASON_SELF_CONNECTION=1,ls.REASON_WRONG_TYPE=2,ls.REASON_TARGET_NULL=3,ls.REASON_CHECKS_FAILED=4,ls.REASON_DIFFERENT_WORKSPACES=5,ls.REASON_SHADOW_PARENT=6,ls.REASON_DRAG_CHECKS_FAILED=7,ls.REASON_PREVIOUS_AND_OUTPUT=8;var _v="_TEMP_COLLAPSED_INPUT",yv="_TEMP_COLLAPSED_FIELD",JS={};JS.COLLAPSED_FIELD_NAME=yv,JS.COLLAPSED_INPUT_NAME=_v,dt.FieldLabel$$module$build$src$core$field_label=class extends qo{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,Tt!==qo.SKIP_SETUP&&(Bt?this.configure_(Bt):this.class_=kt||null,this.setValue(Tt))}configure_(Tt){super.configure_(Tt),Tt.class&&(this.class_=Tt.class)}initView(){this.createTextElement_(),this.class_&&tr(this.getTextElement(),this.class_)}doClassValidation_(Tt){return Tt==null?null:String(Tt)}setClass(Tt){this.textElement_&&(this.class_&&Zn(this.textElement_,this.class_),Tt&&tr(this.textElement_,Tt)),this.class_=Tt}static fromJson(Tt){return new this(Ss(Tt.text),void 0,Tt)}},Ul("field_label",dt.FieldLabel$$module$build$src$core$field_label),dt.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",dt.FieldLabel$$module$build$src$core$field_label;var W0=class{constructor(Tt,kt,Bt,zt){if(this.type=Tt,this.name=kt,this.connection=zt,this.fieldRow=[],this.align=dt.Align$$module$build$src$core$input.LEFT,this.visible=!0,Tt!==Uo.DUMMY&&!kt)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=Bt}getSourceBlock(){return this.sourceBlock}appendField(Tt,kt){return this.insertFieldAt(this.fieldRow.length,Tt,kt),this}insertFieldAt(Tt,kt,Bt){if(0>Tt||Tt>this.fieldRow.length)throw Error("index "+Tt+" out of bounds.");return(kt||kt===""&&Bt)&&(typeof kt=="string"&&(kt=h_({type:"field_label",text:kt})),kt.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(kt.init(),kt.applyColour()),kt.name=Bt,kt.setVisible(this.isVisible()),kt.prefixField&&(Tt=this.insertFieldAt(Tt,kt.prefixField)),this.fieldRow.splice(Tt,0,kt),Tt++,kt.suffixField&&(Tt=this.insertFieldAt(Tt,kt.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),Tt}removeField(Tt,kt){for(let Bt=0,zt;zt=this.fieldRow[Bt];Bt++)if(zt.name===Tt)return zt.dispose(),this.fieldRow.splice(Bt,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(kt)return!1;throw Error('Field "'+Tt+'" not found.')}isVisible(){return this.visible}setVisible(Tt){let kt=[];if(this.visible===Tt)return kt;this.visible=Tt;for(let zt=0,mn;mn=this.fieldRow[zt];zt++)mn.setVisible(Tt);if(this.connection){var Bt=this.connection;Tt?kt=Bt.startTrackingAll():Bt.stopTrackingAll(),(Bt=Bt.targetBlock())&&(Bt.getSvgRoot().style.display=Tt?"block":"none")}return kt}markDirty(){for(let Tt=0,kt;kt=this.fieldRow[Tt];Tt++)kt.markDirty()}setCheck(Tt){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(Tt),this}setAlign(Tt){return this.align=Tt,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(Tt){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(Tt),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let Tt=0;Tt<this.fieldRow.length;Tt++)this.fieldRow[Tt].init()}dispose(){for(let Tt=0,kt;kt=this.fieldRow[Tt];Tt++)kt.dispose();this.connection&&this.connection.dispose()}},eT;(function(Tt){Tt=Tt.Align||(Tt.Align={}),Tt[Tt.LEFT=-1]="LEFT",Tt[Tt.CENTRE=0]="CENTRE",Tt[Tt.RIGHT=1]="RIGHT"})(W0||(W0={})),dt.Align$$module$build$src$core$input=W0.Align,eT={},eT.Align=dt.Align$$module$build$src$core$input,eT.Input=W0;var Jr=class{constructor(Tt,kt,Bt){if(this.wsCoordinate_=null,!kt)throw Error("Cannot create a node without a location.");this.type_=Tt,this.isConnection_=Jr.isConnectionType_(Tt),this.location_=kt,this.processParams_(Bt||null)}processParams_(Tt){Tt&&Tt.wsCoordinate&&(this.wsCoordinate_=Tt.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var Tt=this.location_.getParentInput();const kt=Tt.getSourceBlock();for(Tt=kt.inputList.indexOf(Tt),Tt+=1;Tt<kt.inputList.length;Tt++){const Bt=kt.inputList[Tt],zt=Bt.fieldRow;for(let mn=0;mn<zt.length;mn++){const En=zt[mn];if(En.isClickable()||Jr.NAVIGATE_ALL_FIELDS)return Jr.createFieldNode(En)}if(Bt.connection)return Jr.createInputNode(Bt)}return null}findNextForField_(){var Tt=this.location_,kt=Tt.getParentInput();const Bt=Tt.getSourceBlock();if(!Bt)throw Error("The current AST location is not associated with a block");var zt=Bt.inputList.indexOf(kt);for(Tt=kt.fieldRow.indexOf(Tt)+1;zt<Bt.inputList.length;zt++){kt=Bt.inputList[zt];const mn=kt.fieldRow;for(;Tt<mn.length;){if(mn[Tt].isClickable()||Jr.NAVIGATE_ALL_FIELDS)return Jr.createFieldNode(mn[Tt]);Tt++}if(Tt=0,kt.connection)return Jr.createInputNode(kt)}return null}findPrevForInput_(){const Tt=this.location_.getParentInput(),kt=Tt.getSourceBlock();for(var Bt=kt.inputList.indexOf(Tt);0<=Bt;Bt--){var zt=kt.inputList[Bt];if(zt.connection&&zt!==Tt)return Jr.createInputNode(zt);zt=zt.fieldRow;for(let mn=zt.length-1;0<=mn;mn--){const En=zt[mn];if(En.isClickable()||Jr.NAVIGATE_ALL_FIELDS)return Jr.createFieldNode(En)}}return null}findPrevForField_(){var Tt=this.location_;const kt=Tt.getParentInput(),Bt=Tt.getSourceBlock();if(!Bt)throw Error("The current AST location is not associated with a block");var zt=Bt.inputList.indexOf(kt);for(Tt=kt.fieldRow.indexOf(Tt)-1;0<=zt;zt--){var mn=Bt.inputList[zt];if(mn.connection&&mn!==kt)return Jr.createInputNode(mn);for(mn=mn.fieldRow;-1<Tt;){if(mn[Tt].isClickable()||Jr.NAVIGATE_ALL_FIELDS)return Jr.createFieldNode(mn[Tt]);Tt--}0<=zt-1&&(Tt=Bt.inputList[zt-1].fieldRow.length-1)}return null}navigateBetweenStacks_(Tt){var kt=this.getLocation();if(kt.getSourceBlock){var Bt=kt.getSourceBlock();Bt&&(kt=Bt)}if(!kt||kt.isDeadOrDying())return null;Bt=kt.getRootBlock(),kt=Bt.workspace.getTopBlocks(!0);for(let zt=0;zt<kt.length;zt++)if(Bt.id===kt[zt].id)return Tt=zt+(Tt?1:-1),Tt===-1||Tt===kt.length?null:Jr.createStackNode(kt[Tt]);throw Error("Couldn't find "+(Tt?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(Tt){const kt=v_(Tt);return kt?Jr.createConnectionNode(kt):Jr.createBlockNode(Tt)}getOutAstNodeForBlock_(Tt){if(!Tt)return null;Tt=Tt.getTopStackBlock();const kt=v_(Tt);return kt&&kt.targetConnection&&kt.targetConnection.getParentInput()?Jr.createInputNode(kt.targetConnection.getParentInput()):Jr.createStackNode(Tt)}findFirstFieldOrInput_(Tt){Tt=Tt.inputList;for(let kt=0;kt<Tt.length;kt++){const Bt=Tt[kt],zt=Bt.fieldRow;for(let mn=0;mn<zt.length;mn++){const En=zt[mn];if(En.isClickable()||Jr.NAVIGATE_ALL_FIELDS)return Jr.createFieldNode(En)}if(Bt.connection)return Jr.createInputNode(Bt)}return null}getSourceBlock(){return this.getType()===Jr.types.BLOCK?this.getLocation():this.getType()===Jr.types.STACK?this.getLocation():this.getType()===Jr.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case Jr.types.STACK:return this.navigateBetweenStacks_(!0);case Jr.types.OUTPUT:return Jr.createBlockNode(this.location_.getSourceBlock());case Jr.types.FIELD:return this.findNextForField_();case Jr.types.INPUT:return this.findNextForInput_();case Jr.types.BLOCK:return Jr.createConnectionNode(this.location_.nextConnection);case Jr.types.PREVIOUS:return Jr.createBlockNode(this.location_.getSourceBlock());case Jr.types.NEXT:return Jr.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case Jr.types.WORKSPACE:const Tt=this.location_.getTopBlocks(!0);if(0<Tt.length)return Jr.createStackNode(Tt[0]);break;case Jr.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Jr.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Jr.types.INPUT:return Jr.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case Jr.types.STACK:return this.navigateBetweenStacks_(!1);case Jr.types.FIELD:return this.findPrevForField_();case Jr.types.INPUT:return this.findPrevForInput_();case Jr.types.BLOCK:var Tt=v_(this.location_);return Jr.createConnectionNode(Tt);case Jr.types.PREVIOUS:if((Tt=this.location_.targetConnection)&&!Tt.getParentInput())return Jr.createConnectionNode(Tt);break;case Jr.types.NEXT:return Jr.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case Jr.types.STACK:var Tt=this.location_,kt=Tt.getRelativeToSurfaceXY();return kt=new ao(kt.x,kt.y+Jr.DEFAULT_OFFSET_Y),Jr.createWorkspaceNode(Tt.workspace,kt);case Jr.types.OUTPUT:return Tt=this.location_,(kt=Tt.targetConnection)?Jr.createConnectionNode(kt):Jr.createStackNode(Tt.getSourceBlock());case Jr.types.FIELD:if(Tt=this.location_.getSourceBlock(),!Tt)throw Error("The current AST location is not associated with a block");return Jr.createBlockNode(Tt);case Jr.types.INPUT:return Jr.createBlockNode(this.location_.getSourceBlock());case Jr.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Jr.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case Jr.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(Tt){switch(Tt){case Jr.types.PREVIOUS:case Jr.types.NEXT:case Jr.types.INPUT:case Jr.types.OUTPUT:return!0}return!1}static createFieldNode(Tt){return Tt?new Jr(Jr.types.FIELD,Tt):null}static createConnectionNode(Tt){if(!Tt)return null;const kt=Tt.type;return kt===po.INPUT_VALUE||kt===po.NEXT_STATEMENT&&Tt.getParentInput()?Jr.createInputNode(Tt.getParentInput()):kt===po.NEXT_STATEMENT?new Jr(Jr.types.NEXT,Tt):kt===po.OUTPUT_VALUE?new Jr(Jr.types.OUTPUT,Tt):kt===po.PREVIOUS_STATEMENT?new Jr(Jr.types.PREVIOUS,Tt):null}static createInputNode(Tt){return Tt&&Tt.connection?new Jr(Jr.types.INPUT,Tt.connection):null}static createBlockNode(Tt){return Tt?new Jr(Jr.types.BLOCK,Tt):null}static createStackNode(Tt){return Tt?new Jr(Jr.types.STACK,Tt):null}static createWorkspaceNode(Tt,kt){return kt&&Tt?new Jr(Jr.types.WORKSPACE,Tt,{wsCoordinate:kt}):null}static createTopNode(Tt){const kt=v_(Tt);return kt?Jr.createConnectionNode(kt):Jr.createBlockNode(Tt)}};Jr.NAVIGATE_ALL_FIELDS=!1,Jr.DEFAULT_OFFSET_Y=-20,function(Tt){Tt=Tt.types||(Tt.types={}),Tt.FIELD="field",Tt.BLOCK="block",Tt.INPUT="input",Tt.OUTPUT="output",Tt.NEXT="next",Tt.PREVIOUS="previous",Tt.STACK="stack",Tt.WORKSPACE="workspace"}(Jr||(Jr={}));var z0=class{constructor(Tt,kt,Bt){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=Tt,this.id=Bt&&!Tt.getBlockById(Bt)?Bt:Ao(),Tt.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Pl(160,80)},this.xy_=new ao(0,0),this.isInFlyout=Tt.isFlyout,this.isInMutator=Tt.isMutator,this.RTL=Tt.RTL,kt){if(this.type=kt,Bt=so[kt],!Bt||typeof Bt!="object")throw TypeError("Invalid block definition for type: "+kt);Object.assign(this,Bt)}Tt.addTopBlock(this),Tt.addTypedBlock(this),new.target===z0&&this.doInit_()}doInit_(){const Tt=Mo();Tt||fo(!0);const kt=Co();try{typeof this.init=="function"&&(Ro(!1),this.init(),Ro(kt)),ts()&&to(new(no(Xl))(this))}finally{Tt||fo(!1),Ro(kt)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(Tt){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(Tt),ts()&&to(new(no(Gp))(this)),Fo();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let Bt=this.childBlocks_.length-1;0<=Bt;Bt--)this.childBlocks_[Bt].dispose(!1);for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)zt.dispose();this.inputList.length=0;const kt=this.getConnections_(!0);for(let Bt=0,zt;zt=kt[Bt];Bt++)zt.dispose()}finally{_i(),typeof this.destroy=="function"&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let Tt=0,kt;kt=this.inputList[Tt];Tt++)for(let Bt=0,zt;zt=kt.fieldRow[Bt];Bt++)zt.initModel&&zt.initModel()}unplug(Tt){this.outputConnection&&this.unplugFromRow_(Tt),this.previousConnection&&this.unplugFromStack_(Tt)}unplugFromRow_(Tt){let kt=null;this.outputConnection.isConnected()&&(kt=this.outputConnection.targetConnection,this.outputConnection.disconnect()),kt&&Tt&&(Tt=this.getOnlyValueConnection_())&&Tt.isConnected()&&!Tt.targetBlock().isShadow()&&(Tt=Tt.targetConnection,Tt==null||Tt.disconnect(),this.workspace.connectionChecker.canConnect(Tt,kt,!1)?kt.connect(Tt):Tt==null||Tt.onFailedConnect(kt))}getOnlyValueConnection_(){let Tt=null;for(let kt=0;kt<this.inputList.length;kt++){const Bt=this.inputList[kt].connection;if(Bt&&Bt.type===po.INPUT_VALUE&&Bt.targetConnection){if(Tt)return null;Tt=Bt}}return Tt}unplugFromStack_(Tt){let kt=null;this.previousConnection.isConnected()&&(kt=this.previousConnection.targetConnection,this.previousConnection.disconnect());const Bt=this.getNextBlock();Tt&&Bt&&!Bt.isShadow()&&(Tt=this.nextConnection.targetConnection,Tt==null||Tt.disconnect(),kt&&this.workspace.connectionChecker.canConnect(kt,Tt,!1)&&kt.connect(Tt))}getConnections_(Tt){Tt=[],this.outputConnection&&Tt.push(this.outputConnection),this.previousConnection&&Tt.push(this.previousConnection),this.nextConnection&&Tt.push(this.nextConnection);for(let kt=0,Bt;Bt=this.inputList[kt];kt++)Bt.connection&&Tt.push(Bt.connection);return Tt}lastConnectionInStack(Tt){let kt=this.nextConnection;for(;kt;){const Bt=kt.targetBlock();if(!Bt||Tt&&Bt.isShadow())return kt;kt=Bt.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(Tt){for(let kt=0,Bt;Bt=this.inputList[kt];kt++)if(Bt.connection&&Bt.connection.targetBlock()===Tt)return Bt;return null}getSurroundParent(){let Tt=this,kt;do if(kt=Tt,Tt=Tt.getParent(),!Tt)return null;while(Tt.getNextBlock()===kt);return Tt}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let Tt=0,kt;kt=this.inputList[Tt];Tt++)if(kt.connection&&kt.connection.type===po.NEXT_STATEMENT)return kt.connection;return null}getRootBlock(){let Tt,kt=this;do Tt=kt,kt=Tt.parentBlock_;while(kt);return Tt}getTopStackBlock(){let Tt=this,kt;do kt=Tt.getPreviousBlock();while(kt&&kt.getNextBlock()===Tt&&(Tt=kt));return Tt}getChildren(Tt){if(!Tt)return this.childBlocks_;Tt=[];for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)if(zt.connection){var kt=zt.connection.targetBlock();kt&&Tt.push(kt)}return(kt=this.getNextBlock())&&Tt.push(kt),Tt}setParent(Tt){if(Tt!==this.parentBlock_){var kt=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),Bt=!!kt;if(Bt&&Tt&&kt!==Tt)throw Error("Block connected to superior one that is not new parent.");if(!Bt&&Tt)throw Error("Block not connected to new parent.");if(Bt&&!Tt)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Vl(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=Tt)?Tt.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(Tt){const kt=[this],Bt=this.getChildren(Tt);for(let zt,mn=0;zt=Bt[mn];mn++)kt.push(...zt.getDescendants(Tt));return kt}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(Tt){this.deletable_=Tt}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(Tt){this.movable_=Tt}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(qn(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(Tt){this.isShadow_=Tt}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(Tt){this.isInsertionMarker_=Tt}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(Tt){this.editable_=Tt;for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)mn.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(Tt,kt){const Bt=this.getConnections_(!0);if(Tt=Tt.getConnections_(!0),Bt.length!==Tt.length)throw Error("Connection lists did not match in length.");for(let zt=0;zt<Tt.length;zt++)if(Tt[zt]===kt)return Bt[zt];return null}setHelpUrl(Tt){this.helpUrl=Tt}setTooltip(Tt){this.tooltip=Tt}getTooltip(){return Xu(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(Tt){Tt=Pu(Tt),this.hue_=Tt.hue,this.colour_=Tt.hex}setStyle(Tt){this.styleName_=Tt}setOnChange(Tt){if(Tt&&typeof Tt!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=Tt,this.onchangeWrapper_=Tt.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(Tt){if(typeof Tt!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(Tt===void 0?"nothing":Tt+" of type "+typeof Tt)+" instead");for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)if(mn.name===Tt)return mn;return null}getVars(){const Tt=[];for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)mn.referencesVariables()&&Tt.push(mn.getValue());return Tt}getVarModels(){const Tt=[];for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)if(mn.referencesVariables()){const En=this.workspace.getVariableById(mn.getValue());En&&Tt.push(En)}return Tt}updateVarName(Tt){for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)mn.referencesVariables()&&Tt.getId()===mn.getValue()&&mn.refreshVariableName()}renameVarById(Tt,kt){for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)for(let mn=0,En;En=zt.fieldRow[mn];mn++)En.referencesVariables()&&Tt===En.getValue()&&En.setValue(kt)}getFieldValue(Tt){return(Tt=this.getField(Tt))?Tt.getValue():null}setFieldValue(Tt,kt){const Bt=this.getField(kt);if(!Bt)throw Error('Field "'+kt+'" not found.');Bt.setValue(Tt)}setPreviousStatement(Tt,kt){if(Tt)kt===void 0&&(kt=null),this.previousConnection||(this.previousConnection=this.makeConnection_(po.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(kt);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(Tt,kt){if(Tt)kt===void 0&&(kt=null),this.nextConnection||(this.nextConnection=this.makeConnection_(po.NEXT_STATEMENT)),this.nextConnection.setCheck(kt);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(Tt,kt){if(Tt)kt===void 0&&(kt=null),this.outputConnection||(this.outputConnection=this.makeConnection_(po.OUTPUT_VALUE)),this.outputConnection.setCheck(kt);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(Tt){this.inputsInline!==Tt&&(to(new(no(yl))(this,"inline",null,this.inputsInline,Tt)),this.inputsInline=Tt)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var Tt=1;Tt<this.inputList.length;Tt++)if(this.inputList[Tt-1].type===Uo.DUMMY&&this.inputList[Tt].type===Uo.DUMMY)return!1;for(Tt=1;Tt<this.inputList.length;Tt++)if(this.inputList[Tt-1].type===Uo.VALUE&&this.inputList[Tt].type===Uo.DUMMY)return!0;return!1}setOutputShape(Tt){this.outputShape_=Tt}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(Tt){if(this.isEnabled()!==Tt){const kt=this.disabled;this.disabled=!Tt,to(new(no(yl))(this,"disabled",null,kt,!Tt))}}getInheritedDisabled(){let Tt=this.getSurroundParent();for(;Tt;){if(Tt.disabled)return!0;Tt=Tt.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(Tt){this.collapsed_!==Tt&&(to(new(no(yl))(this,"collapsed",null,this.collapsed_,Tt)),this.collapsed_=Tt)}toString(Tt,kt){function Bt(lo){let es=lo.getCheck();return!es&&lo.targetConnection&&(es=lo.targetConnection.getCheck()),!!es&&(es.indexOf("Boolean")!==-1||es.indexOf("Number")!==-1)}function zt(){let lo,es;Hn&&Hn.getType()===((lo=pr)==null?void 0:lo.getType())&&Hn.getLocation()===((es=pr)==null?void 0:es.getLocation())&&(Hn=null)}var mn=[];kt=kt||"?";const En=Jr.NAVIGATE_ALL_FIELDS;Jr.NAVIGATE_ALL_FIELDS=!0;let Hn=Jr.createBlockNode(this);const pr=Hn;for(;Hn;){switch(Hn.getType()){case Jr.types.INPUT:var Kr=Hn.getLocation();Hn.in()?Bt(Kr)&&mn.push("("):mn.push(kt);break;case Jr.types.FIELD:Kr=Hn.getLocation(),Kr.name!==yv&&mn.push(Kr.getText())}if(Kr=Hn,Hn=Kr.in()||Kr.next(),!Hn){for(Hn=Kr.out(),zt();Hn&&!Hn.next();)Hn=Hn.out(),zt(),Hn&&Hn.getType()===Jr.types.INPUT&&Bt(Hn.getLocation())&&mn.push(")");Hn&&(Hn=Hn.next())}}for(Jr.NAVIGATE_ALL_FIELDS=En,kt=2;kt<mn.length;kt++)mn[kt-2]==="("&&mn[kt]===")"&&(mn[kt-2]=mn[kt-1],mn.splice(kt-1,2));return mn=mn.reduce(function(lo,es){return lo+(lo.substr(-1)==="("||es===")"?"":" ")+es},""),mn=mn.trim()||"???",Tt&&mn.length>Tt&&(mn=mn.substring(0,Tt-3)+"..."),mn}appendValueInput(Tt){return this.appendInput_(Uo.VALUE,Tt)}appendStatementInput(Tt){return this.appendInput_(Uo.STATEMENT,Tt)}appendDummyInput(Tt){return this.appendInput_(Uo.DUMMY,Tt||"")}jsonInit(Tt){var kt=Tt.type?'Block "'+Tt.type+'": ':"";if(Tt.output&&Tt.previousStatement)throw Error(kt+"Must not have both an output and a previousStatement.");if(Tt.style&&Tt.style.hat&&(this.hat=Tt.style.hat,Tt.style=null),Tt.style&&Tt.colour)throw Error(kt+"Must not have both a colour and a style.");Tt.style?this.jsonInitStyle_(Tt,kt):this.jsonInitColour_(Tt,kt);for(var Bt=0;Tt["message"+Bt]!==void 0;)this.interpolate_(Tt["message"+Bt],Tt["args"+Bt]||[],Tt["lastDummyAlign"+Bt],kt),Bt++;if(Tt.inputsInline!==void 0&&this.setInputsInline(Tt.inputsInline),Tt.output!==void 0&&this.setOutput(!0,Tt.output),Tt.outputShape!==void 0&&this.setOutputShape(Tt.outputShape),Tt.previousStatement!==void 0&&this.setPreviousStatement(!0,Tt.previousStatement),Tt.nextStatement!==void 0&&this.setNextStatement(!0,Tt.nextStatement),Tt.tooltip!==void 0&&(Bt=Ss(Tt.tooltip),this.setTooltip(Bt)),Tt.enableContextMenu!==void 0&&(this.contextMenu=!!Tt.enableContextMenu),Tt.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!Tt.suppressPrefixSuffix),Tt.helpUrl!==void 0&&(Bt=Ss(Tt.helpUrl),this.setHelpUrl(Bt)),typeof Tt.extensions=="string"&&(console.warn(kt+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+Tt.type+"' block."),Tt.extensions=[Tt.extensions]),Tt.mutator!==void 0&&dm(Tt.mutator,this,!0),Tt=Tt.extensions,Array.isArray(Tt))for(kt=0;kt<Tt.length;kt++)dm(Tt[kt],this,!1)}jsonInitColour_(Tt,kt){if("colour"in Tt)if(Tt.colour===void 0)console.warn(kt+"Undefined colour value.");else{Tt=Tt.colour;try{this.setColour(Tt)}catch{console.warn(kt+"Illegal colour value: ",Tt)}}}jsonInitStyle_(Tt,kt){Tt=Tt.style;try{this.setStyle(Tt)}catch{console.warn(kt+"Style does not exist: ",Tt)}}mixin(Tt,kt){if(kt!==void 0&&typeof kt!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!kt){kt=[];for(const Bt in Tt)this[Bt]!==void 0&&kt.push(Bt);if(kt.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(kt))}Object.assign(this,Tt)}interpolate_(Tt,kt,Bt,zt){Tt=Dm(Tt),this.validateTokens_(Tt,kt.length),kt=this.interpolateArguments_(Tt,kt,Bt),Bt=[];for(let mn=0,En;En=kt[mn];mn++)if(this.isInputKeyword_(En.type)){if(Tt=this.inputFromJson_(En,zt)){for(let Hn=0,pr;pr=Bt[Hn];Hn++)Tt.appendField(pr[0],pr[1]);Bt.length=0}}else(Tt=this.fieldFromJson_(En))&&Bt.push([Tt,En.name])}validateTokens_(Tt,kt){const Bt=[];let zt=0;for(let mn=0;mn<Tt.length;mn++){const En=Tt[mn];if(typeof En=="number"){if(1>En||En>kt)throw Error('Block "'+this.type+'": Message index %'+En+" out of range.");if(Bt[En])throw Error('Block "'+this.type+'": Message index %'+En+" duplicated.");Bt[En]=!0,zt++}}if(zt!==kt)throw Error('Block "'+this.type+'": Message does not reference all '+kt+" arg(s).")}interpolateArguments_(Tt,kt,Bt){const zt=[];for(let mn=0;mn<Tt.length;mn++){let En=Tt[mn];typeof En=="number"&&(En=kt[En-1]),!(typeof En=="string"&&(En=this.stringToFieldJson_(En),!En))&&zt.push(En)}return(Tt=zt.length)&&!this.isInputKeyword_(zt[Tt-1].type)&&(Tt={type:"input_dummy"},Bt&&(Tt.align=Bt),zt.push(Tt)),zt}fieldFromJson_(Tt){const kt=h_(Tt);return!kt&&Tt.alt?typeof Tt.alt=="string"?(Tt=this.stringToFieldJson_(Tt.alt))?this.fieldFromJson_(Tt):null:this.fieldFromJson_(Tt.alt):kt}inputFromJson_(Tt,kt){var Bt={LEFT:dt.Align$$module$build$src$core$input.LEFT,RIGHT:dt.Align$$module$build$src$core$input.RIGHT,CENTRE:dt.Align$$module$build$src$core$input.CENTRE,CENTER:dt.Align$$module$build$src$core$input.CENTRE};let zt=null;switch(Tt.type){case"input_value":zt=this.appendValueInput(Tt.name);break;case"input_statement":zt=this.appendStatementInput(Tt.name);break;case"input_dummy":zt=this.appendDummyInput(Tt.name)}return zt?(Tt.check&&zt.setCheck(Tt.check),Tt.align&&(Bt=Bt[Tt.align.toUpperCase()],Bt===void 0?console.warn(kt+"Illegal align value: ",Tt.align):zt.setAlign(Bt)),zt):null}isInputKeyword_(Tt){return Tt==="input_value"||Tt==="input_statement"||Tt==="input_dummy"}stringToFieldJson_(Tt){return(Tt=Tt.trim())?{type:"field_label",text:Tt}:null}appendInput_(Tt,kt){let Bt=null;return(Tt===Uo.VALUE||Tt===Uo.STATEMENT)&&(Bt=this.makeConnection_(Tt)),Tt===Uo.STATEMENT&&this.statementInputCount++,Tt=new W0(Tt,kt,this,Bt),this.inputList.push(Tt),Tt}moveInputBefore(Tt,kt){if(Tt!==kt){var Bt=-1,zt=kt?-1:this.inputList.length;for(let mn=0,En;En=this.inputList[mn];mn++)if(En.name===Tt){if(Bt=mn,zt!==-1)break}else if(kt&&En.name===kt&&(zt=mn,Bt!==-1))break;if(Bt===-1)throw Error('Named input "'+Tt+'" not found.');if(zt===-1)throw Error('Reference input "'+kt+'" not found.');this.moveNumberedInputBefore(Bt,zt)}}moveNumberedInputBefore(Tt,kt){if(Tt===kt)throw Error("Can't move input to itself.");if(Tt>=this.inputList.length)throw RangeError("Input index "+Tt+" out of bounds.");if(kt>this.inputList.length)throw RangeError("Reference input "+kt+" out of bounds.");const Bt=this.inputList[Tt];this.inputList.splice(Tt,1),Tt<kt&&kt--,this.inputList.splice(kt,0,Bt)}removeInput(Tt,kt){for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)if(zt.name===Tt)return zt.type===Uo.STATEMENT&&this.statementInputCount--,zt.dispose(),this.inputList.splice(Bt,1),!0;if(kt)return!1;throw Error("Input not found: "+Tt)}getInput(Tt){for(let kt=0,Bt;Bt=this.inputList[kt];kt++)if(Bt.name===Tt)return Bt;return null}getInputTargetBlock(Tt){return(Tt=this.getInput(Tt))&&Tt.connection&&Tt.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(Tt){this.commentModel.text!==Tt&&(to(new(no(yl))(this,"comment",null,this.commentModel.text,Tt)),this.comment=this.commentModel.text=Tt)}setWarningText(Tt,kt){}setMutator(Tt){}getRelativeToSurfaceXY(){return this.xy_}moveBy(Tt,kt){if(this.parentBlock_)throw Error("Block has parent.");const Bt=new(no(hu))(this);this.xy_.translate(Tt,kt),Bt.recordNew(),to(Bt)}makeConnection_(Tt){return new ls(this,Tt)}allInputsFilled(Tt){if(Tt===void 0&&(Tt=!0),!Tt&&this.isShadow())return!1;for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)if(zt.connection){var kt=zt.connection.targetBlock();if(!kt||!kt.allInputsFilled(Tt))return!1}return(kt=this.getNextBlock())?kt.allInputsFilled(Tt):!0}toDevString(){let Tt=this.type?'"'+this.type+'" block':"Block";return this.id&&(Tt+=' (id="'+this.id+'")'),Tt}};z0.COLLAPSED_INPUT_NAME=_v,z0.COLLAPSED_FIELD_NAME=yv;var ZO=null,vv=null,Ov={};Ov.connectionUiEffect=_h,Ov.disconnectUiEffect=cO,Ov.disconnectUiStop=Nu,Ov.disposeUiEffect=f0;var Rx=class extends jO{constructor(Tt){super(Tt),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=Tt.commentModel;let kt;this.model.text=(kt=this.model.text)!=null?kt:"",this.createIcon()}drawIcon_(Tt){Cn(Er.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},Tt),Cn(Er.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},Tt),Cn(Er.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},Tt)}createEditor(){this.foreignObject=Cn(Er.FOREIGNOBJECT,{x:Bo.BORDER_WIDTH,y:Bo.BORDER_WIDTH});const Tt=document.createElementNS(Bu,"body");Tt.setAttribute("xmlns",Bu),Tt.className="blocklyMinimalBody";const kt=this.textarea_=document.createElementNS(Bu,"textarea");kt.className="blocklyCommentTextarea",kt.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let Bt;return kt.value=(Bt=this.model.text)!=null?Bt:"",this.resizeTextarea(),Tt.appendChild(kt),this.foreignObject.appendChild(Tt),this.onMouseUpWrapper=Zt(kt,"focus",this,this.startEdit,!0),this.onWheelWrapper=Zt(kt,"wheel",this,function(zt){zt.stopPropagation()}),this.onChangeWrapper=Zt(kt,"change",this,function(zt){this.cachedText!==this.model.text&&to(new(no(yl))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=Zt(kt,"input",this,function(zt){this.model.text=kt.value}),setTimeout(kt.focus.bind(kt),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var Tt=this.model.size,kt=2*Bo.BORDER_WIDTH,Bt=Tt.width-kt;Tt=Tt.height-kt,this.foreignObject.setAttribute("width",`${Bt}`),this.foreignObject.setAttribute("height",`${Tt}`),this.textarea_.style.width=Bt-4+"px",this.textarea_.style.height=Tt-4+"px"}}setVisible(Tt){Tt!==this.isVisible()&&(to(new(no(Om))(this.getBlock(),Tt,"comment")),(this.model.pinned=Tt)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const Tt=this.getBlock();this.bubble_=new Bo(Tt.workspace,this.createEditor(),Tt.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(Tt.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let Tt;this.paragraphElement_=Bo.textToDom((Tt=this.model.text)!=null?Tt:""),this.bubble_=Bo.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(cn(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(cn(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(cn(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(cn(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(Tt){let kt;(kt=this.bubble_)!=null&&kt.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(Tt,kt){this.bubble_?this.bubble_.setBubbleSize(Tt,kt):(this.model.size.width=Tt,this.model.size.height=kt)}updateText(){if(this.textarea_){let Tt;this.textarea_.value=(Tt=this.model.text)!=null?Tt:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};Zl(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var xm=null,tT={duplicateInternal:uO,copyInternal:ho},bv={};bv.TEST_ONLY=tT,bv.copy=b_,bv.duplicate=Um,bv.paste=Gm;var Sv,nT,Tv;Sv=null,nT={},Tv=null,dt.module$build$src$core$contextmenu={},dt.module$build$src$core$contextmenu.callbackFactory=mO,dt.module$build$src$core$contextmenu.commentDeleteOption=p0,dt.module$build$src$core$contextmenu.commentDuplicateOption=m0,dt.module$build$src$core$contextmenu.dispose=Cy,dt.module$build$src$core$contextmenu.getCurrentBlock=hO,dt.module$build$src$core$contextmenu.hide=S_,dt.module$build$src$core$contextmenu.setCurrentBlock=Ap,dt.module$build$src$core$contextmenu.show=kp,dt.module$build$src$core$contextmenu.workspaceCommentOption=gO;var cs=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(Tt){if(this.registry_.has(Tt.id))throw Error('Menu item with ID "'+Tt.id+'" is already registered.');this.registry_.set(Tt.id,Tt)}unregister(Tt){if(!this.registry_.has(Tt))throw Error('Menu item with ID "'+Tt+'" not found.');this.registry_.delete(Tt)}getItem(Tt){let kt;return(kt=this.registry_.get(Tt))!=null?kt:null}getContextMenuOptions(Tt,kt){const Bt=[];for(const mn of this.registry_.values())if(Tt===mn.scopeType){var zt=mn.preconditionFn(kt);zt!=="hidden"&&(zt={text:typeof mn.displayText=="function"?mn.displayText(kt):mn.displayText,enabled:zt==="enabled",callback:mn.callback,scope:kt,weight:mn.weight},Bt.push(zt))}return Bt.sort(function(mn,En){return mn.weight-En.weight}),Bt}};(function(Tt){var kt=Tt.ScopeType||(Tt.ScopeType={});kt.BLOCK="block",kt.WORKSPACE="workspace",Tt.registry=new Tt})(cs||(cs={})),cs.ScopeType;var Mx=30,Px=!0,V_=[];V_[po.INPUT_VALUE]=po.OUTPUT_VALUE,V_[po.OUTPUT_VALUE]=po.INPUT_VALUE,V_[po.NEXT_STATEMENT]=po.PREVIOUS_STATEMENT,V_[po.PREVIOUS_STATEMENT]=po.NEXT_STATEMENT;var rT="RENAME_VARIABLE_ID",iT="DELETE_VARIABLE_ID",Dx=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(Tt){this.drawer_=Tt}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(Tt){const kt=this.curNode_;this.curNode_=Tt,this.drawer_&&this.drawer_.draw(kt,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},oT=class extends Dx{constructor(){super(),this.type="cursor"}next(){var Tt=this.getCurNode();if(!Tt)return null;for(Tt=Tt.next();Tt&&Tt.next()&&(Tt.getType()===Jr.types.NEXT||Tt.getType()===Jr.types.BLOCK);)Tt=Tt.next();return Tt&&this.setCurNode(Tt),Tt}in(){var Tt=this.getCurNode();if(!Tt)return null;(Tt.getType()===Jr.types.PREVIOUS||Tt.getType()===Jr.types.OUTPUT)&&(Tt=Tt.next());let kt,Bt;return(Tt=(Bt=(kt=Tt)==null?void 0:kt.in())!=null?Bt:null)&&this.setCurNode(Tt),Tt}prev(){var Tt=this.getCurNode();if(!Tt)return null;for(Tt=Tt.prev();Tt&&Tt.prev()&&(Tt.getType()===Jr.types.NEXT||Tt.getType()===Jr.types.BLOCK);)Tt=Tt.prev();return Tt&&this.setCurNode(Tt),Tt}out(){var Tt=this.getCurNode();return Tt?((Tt=Tt.out())&&Tt.getType()===Jr.types.BLOCK&&(Tt=Tt.prev()||Tt),Tt&&this.setCurNode(Tt),Tt):null}};So(ro.CURSOR,vm,oT);var xv=class extends oT{constructor(){super()}next(){var Tt=this.getCurNode();return Tt?((Tt=this.getNextNode_(Tt,this.validNode_))&&this.setCurNode(Tt),Tt):null}in(){return this.next()}prev(){var Tt=this.getCurNode();return Tt?((Tt=this.getPreviousNode_(Tt,this.validNode_))&&this.setCurNode(Tt),Tt):null}out(){return this.prev()}getNextNode_(Tt,kt){if(!Tt)return null;const Bt=Tt.in()||Tt.next();return kt(Bt)?Bt:Bt?this.getNextNode_(Bt,kt):(Tt=this.findSiblingOrParent_(Tt.out()),kt(Tt)?Tt:Tt?this.getNextNode_(Tt,kt):null)}getPreviousNode_(Tt,kt){if(!Tt)return null;let Bt=Tt.prev();return Bt=Bt?this.getRightMostChild_(Bt):Tt.out(),kt(Bt)?Bt:Bt?this.getPreviousNode_(Bt,kt):null}validNode_(Tt){let kt=!1;return Tt=Tt&&Tt.getType(),(Tt===Jr.types.OUTPUT||Tt===Jr.types.INPUT||Tt===Jr.types.FIELD||Tt===Jr.types.NEXT||Tt===Jr.types.PREVIOUS||Tt===Jr.types.WORKSPACE)&&(kt=!0),kt}findSiblingOrParent_(Tt){if(!Tt)return null;const kt=Tt.next();return kt||this.findSiblingOrParent_(Tt.out())}getRightMostChild_(Tt){if(!Tt.in())return Tt;for(Tt=Tt.in();Tt&&Tt.next();)Tt=Tt.next();return this.getRightMostChild_(Tt)}};xv.registrationName="basicCursor",So(ro.CURSOR,xv.registrationName,xv);var Lx=class extends xv{validNode_(Tt){let kt=!1;const Bt=Tt&&Tt.getType();return Tt&&(Tt=Tt.getLocation(),Bt===Jr.types.FIELD&&Tt&&Tt.isTabNavigable()&&Tt.isClickable()&&(kt=!0)),kt}},sT=10,du=class extends ls{constructor(Tt,kt){super(Tt,kt),this.targetConnection=this.highlightPath=null,this.db_=Tt.workspace.connectionDBList[kt],this.dbOpposite_=Tt.workspace.connectionDBList[V_[kt]],this.offsetInBlock_=new ao(0,0),this.trackedState_=du.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===du.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(Tt){const kt=this.x-Tt.x;return Tt=this.y-Tt.y,Math.sqrt(kt*kt+Tt*Tt)}bumpAwayFrom(Tt){if(!this.sourceBlock_.workspace.isDragging()){var kt=this.sourceBlock_.getRootBlock();if(!kt.isInFlyout){var Bt=!1;if(!kt.isMovable()){if(kt=Tt.getSourceBlock().getRootBlock(),!kt.isMovable())return;Tt=this,Bt=!0}var zt=zn()==kt;zt||kt.addSelect();var mn=Tt.x+dt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*sT)-this.x,En=Tt.y+dt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*sT)-this.y;Bt&&(En=-En),kt.RTL&&(mn=Tt.x-dt.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*sT)-this.x),kt.moveBy(mn,En),zt||kt.removeSelect()}}}moveTo(Tt,kt){this.trackedState_===du.TrackedState.WILL_TRACK?(this.db_.addConnection(this,kt),this.trackedState_=du.TrackedState.TRACKED):this.trackedState_===du.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,kt)),this.x=Tt,this.y=kt}moveBy(Tt,kt){this.moveTo(this.x+Tt,this.y+kt)}moveToOffset(Tt){this.moveTo(Tt.x+this.offsetInBlock_.x,Tt.y+this.offsetInBlock_.y)}setOffsetInBlock(Tt,kt){this.offsetInBlock_.x=Tt,this.offsetInBlock_.y=kt}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const Tt=this.targetConnection.x-this.x,kt=this.targetConnection.y-this.y;if(Tt!==0||kt!==0){const zt=this.targetBlock();var Bt=zt.getSvgRoot();if(!Bt)throw Error("block is not rendered.");Bt=Zs(Bt),zt.getSvgRoot().setAttribute("transform","translate("+(Bt.x-Tt)+","+(Bt.y-kt)+")"),zt.moveConnections(-Tt,-kt)}}closest(Tt,kt){return this.dbOpposite_.searchForClosest(this,Tt,kt)}highlight(){if(!this.highlightPath){var Tt=this.sourceBlock_.workspace.getRenderer().getConstants(),kt=Tt.shapeFor(this);this.type===po.INPUT_VALUE||this.type===po.OUTPUT_VALUE?(Tt=Tt.TAB_OFFSET_FROM_TOP,kt=gs(0,-Tt)+uo("v",Tt)+kt.pathDown+uo("v",Tt)):(Tt=Tt.NOTCH_OFFSET_LEFT-Tt.CORNER_RADIUS,kt=gs(-Tt,0)+uo("h",Tt)+kt.pathLeft+uo("h",Tt)),Tt=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=Cn(Er.PATH,{class:"blocklyHighlightedConnectionPath",d:kt,transform:"translate("+(this.x-Tt.x)+","+(this.y-Tt.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(fr(this.highlightPath),this.highlightPath=null)}setTracking(Tt){Tt&&this.trackedState_===du.TrackedState.TRACKED||!Tt&&this.trackedState_===du.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(Tt?(this.db_.addConnection(this,this.y),this.trackedState_=du.TrackedState.TRACKED):(this.trackedState_===du.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=du.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const Bt=this.targetBlock().getDescendants(!1);for(let zt=0;zt<Bt.length;zt++){var Tt=Bt[zt],kt=Tt.getConnections_(!0);for(let mn=0;mn<kt.length;mn++)kt[mn].setTracking(!1);for(Tt=Tt.getIcons(),kt=0;kt<Tt.length;kt++)Tt[kt].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let Tt=[];if(this.type!==po.INPUT_VALUE&&this.type!==po.NEXT_STATEMENT)return Tt;const kt=this.targetBlock();if(kt){let Bt;kt.isCollapsed()?(Bt=[],kt.outputConnection&&Bt.push(kt.outputConnection),kt.nextConnection&&Bt.push(kt.nextConnection),kt.previousConnection&&Bt.push(kt.previousConnection)):Bt=kt.getConnections_(!0);for(let zt=0;zt<Bt.length;zt++)Tt.push(...Bt[zt].startTrackingAll());Tt.length||(Tt=[kt])}return Tt}onFailedConnect(Tt){const kt=this.getSourceBlock();if(Co()){const Bt=Mo();setTimeout(function(){kt.isDisposed()||kt.getParent()||(fo(Bt),this.bumpAwayFrom(Tt),fo(!1))}.bind(this),dt.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(Tt,kt){super.disconnectInternal_(Tt,kt),Tt.rendered&&Tt.render(),kt.rendered&&(kt.updateDisabled(),kt.render(),kt.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var Tt=this.targetBlock();Tt&&(Tt.initSvg(),Tt.render(!1),Tt=this.getSourceBlock(),Tt.rendered&&Tt.render())}neighbours(Tt){return this.dbOpposite_.getNeighbours(this,Tt)}connect_(Tt){super.connect_(Tt);var kt=this.getSourceBlock();Tt=Tt.getSourceBlock();const Bt=kt.rendered,zt=Tt.rendered;Bt&&kt.updateDisabled(),zt&&Tt.updateDisabled(),Bt&&zt&&(this.type===po.NEXT_STATEMENT||this.type===po.PREVIOUS_STATEMENT?Tt.render():kt.render()),(kt=kt.getInputWithBlock(Tt))&&(kt=kt.isVisible(),Tt.getSvgRoot().style.display=kt?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(Tt){Tt=Tt.TrackedState||(Tt.TrackedState={}),Tt[Tt.WILL_TRACK=-1]="WILL_TRACK",Tt[Tt.UNTRACKED=0]="UNTRACKED",Tt[Tt.TRACKED=1]="TRACKED"})(du||(du={})),du.TrackedState;var Nx=class extends jO{constructor(Tt){super(Tt),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(Tt){Cn(Er.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},Tt),Cn(Er.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},Tt),Cn(Er.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},Tt)}setVisible(Tt){Tt!==this.isVisible()&&(to(new(no(Om))(this.getBlock(),Tt,"warning")),Tt?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=Bo.textToDom(this.getText()),this.bubble_=Bo.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(Tt,kt){this.text[kt]!==Tt&&(Tt?this.text[kt]=Tt:delete this.text[kt],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const Tt=[];for(const kt in this.text)Tt.push(this.text[kt]);return Tt.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},ep=class extends z0{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=Tt,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=Cn(Er.G,{}),this.svgGroup_.translate_="",this.style=Tt.getRenderer().getConstants().getBlockStyle(null),this.pathObject=Tt.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!Tt.getBlockDragSurface(),Tt=this.pathObject.svgPath,Tt.tooltip=this,om(Tt),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let kt=0,Bt;Bt=this.inputList[kt];kt++)Bt.init();var Tt=this.getIcons();for(let kt=0;kt<Tt.length;kt++)Tt[kt].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),Tt=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!Tt||Zt(Tt,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,Tt.parentNode||this.workspace.getCanvas().appendChild(Tt)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(zn()!==this){var Tt=null;if(zn()){Tt=zn().id,Fo();try{zn().unselect()}finally{_i()}}Tt=new(no(qm))(Tt,this.id,this.workspace.id),to(Tt),An(this),this.addSelect()}}unselect(){if(zn()===this){var Tt=new(no(qm))(this.id,null,this.workspace.id);Tt.workspaceId=this.workspace.id,to(Tt),An(null),this.removeSelect()}}getIcons(){const Tt=[];return this.mutator&&Tt.push(this.mutator),this.commentIcon_&&Tt.push(this.commentIcon_),this.warning&&Tt.push(this.warning),Tt}setParent(Tt){const kt=this.parentBlock_;if(Tt!==kt){Dr(),super.setParent(Tt),_r();var Bt=this.getSvgRoot();if(!this.workspace.isClearing&&Bt){var zt=this.getRelativeToSurfaceXY();Tt?(Tt.getSvgRoot().appendChild(Bt),Tt=this.getRelativeToSurfaceXY(),this.moveConnections(Tt.x-zt.x,Tt.y-zt.y)):kt&&(this.workspace.getCanvas().appendChild(Bt),this.translate(zt.x,zt.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let Tt=0,kt=0;const Bt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let zt=this.getSvgRoot();if(zt)do{var mn=Zs(zt);Tt+=mn.x,kt+=mn.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===zt&&(mn=this.workspace.getBlockDragSurface().getSurfaceTranslation(),Tt+=mn.x,kt+=mn.y),zt=zt.parentNode}while(zt&&zt!==this.workspace.getCanvas()&&zt!==Bt);return new ao(Tt,kt)}moveBy(Tt,kt){if(this.parentBlock_)throw Error("Block has parent.");const Bt=ts();let zt=null;Bt&&(zt=new(no(hu))(this));const mn=this.getRelativeToSurfaceXY();this.translate(mn.x+Tt,mn.y+kt),this.moveConnections(Tt,kt),Bt&&zt&&(zt.recordNew(),to(zt)),this.workspace.resizeContents()}translate(Tt,kt){this.getSvgRoot().setAttribute("transform","translate("+Tt+","+kt+")")}moveToDragSurface(){if(this.useDragSurface_){var Tt=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(Tt.x,Tt.y),(Tt=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(Tt)}}moveTo(Tt){const kt=this.getRelativeToSurfaceXY();this.moveBy(Tt.x-kt.x,Tt.y-kt.y)}moveOffDragSurface(Tt){this.useDragSurface_&&(this.translate(Tt.x,Tt.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(Tt){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(Tt.x,Tt.y):(this.svgGroup_.translate_="translate("+Tt.x+","+Tt.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var Tt=this.workspace.getGrid();if(Tt&&Tt.shouldSnap()){var kt=Tt.getSpacing(),Bt=kt/2,zt=this.getRelativeToSurfaceXY();Tt=Math.round(Math.round((zt.x-Bt)/kt)*kt+Bt-zt.x),kt=Math.round(Math.round((zt.y-Bt)/kt)*kt+Bt-zt.y),(Tt||kt)&&this.moveBy(Tt,kt)}}}getBoundingRectangle(){const Tt=this.getRelativeToSurfaceXY(),kt=this.getHeightWidth();let Bt,zt;return this.RTL?(Bt=Tt.x-kt.width,zt=Tt.x):(Bt=Tt.x,zt=Tt.x+kt.width),new Fs(Tt.y,Tt.y+kt.height,Bt,zt)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let Tt=0,kt;kt=this.inputList[Tt];Tt++)kt.markDirty()}setCollapsed(Tt){this.collapsed_!==Tt&&(super.setCollapsed(Tt),Tt?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var Tt=this.isCollapsed();const kt=_v,Bt=yv;for(let mn=0,En;En=this.inputList[mn];mn++)En.name!==kt&&En.setVisible(!Tt);if(Tt){Tt=this.getIcons();for(let mn=0,En;En=Tt[mn];mn++)En.setVisible(!1);Tt=this.toString(Mx);var zt=this.getField(Bt);zt?zt.setValue(Tt):(this.getInput(kt)||this.appendDummyInput(kt)).appendField(new dt.FieldLabel$$module$build$src$core$field_label(Tt),Bt)}else this.updateDisabled(),this.removeInput(kt)}tab(Tt,kt){const Bt=new Lx;Bt.setCurNode(Jr.createFieldNode(Tt)),Tt=Bt.getCurNode(),kt?Bt.next():Bt.prev(),(kt=Bt.getCurNode())&&kt!==Tt&&(kt.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(kt))}onMouseDown_(Tt){const kt=this.workspace.getGesture(Tt);kt&&kt.handleBlockStart(Tt,this)}showHelp(){const Tt=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;Tt&&window.open(Tt)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const Tt=cs.registry.getContextMenuOptions(cs.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(Tt),Tt}showContextMenu(Tt){const kt=this.generateContextMenu();kt&&kt.length&&(kp(Tt,kt,this.RTL),Ap(this))}moveConnections(Tt,kt){if(this.rendered){for(var Bt=this.getConnections_(!1),zt=0;zt<Bt.length;zt++)Bt[zt].moveBy(Tt,kt);for(Bt=this.getIcons(),zt=0;zt<Bt.length;zt++)Bt[zt].computeIconLocation();for(Bt=0;Bt<this.childBlocks_.length;Bt++)this.childBlocks_[Bt].moveConnections(Tt,kt)}}setDragging(Tt){if(Tt){var kt=this.getSvgRoot();kt.translate_="",kt.skew_="",Ts.push(...this.getConnections_(!0)),tr(this.svgGroup_,"blocklyDragging")}else Ts.length=0,Zn(this.svgGroup_,"blocklyDragging");for(kt=0;kt<this.childBlocks_.length;kt++)this.childBlocks_[kt].setDragging(Tt)}setMovable(Tt){super.setMovable(Tt),this.pathObject.updateMovable(Tt)}setEditable(Tt){super.setEditable(Tt),Tt=this.getIcons();for(let kt=0;kt<Tt.length;kt++)Tt[kt].updateEditable()}setShadow(Tt){super.setShadow(Tt),this.applyColour()}setInsertionMarker(Tt){this.isInsertionMarker_!==Tt&&(this.isInsertionMarker_=Tt)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(Tt,kt){if(!this.isDeadOrDying()){Zu(),Fl(this.pathObject.svgPath),Dr();var Bt=this.workspace;zn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),hO()===this&&S_(),kt&&this.rendered&&(this.unplug(Tt),f0(this)),this.rendered=!1;for(var zt of this.warningTextDb.values())clearTimeout(zt);for(this.warningTextDb.clear(),kt=this.getIcons(),zt=0;zt<kt.length;zt++)kt[zt].dispose();zn()===this&&An(null),super.dispose(!!Tt),fr(this.svgGroup_),Bt.resizeContents(),this.svgGroup_=null,_r()}}checkAndDelete(){this.workspace.isFlyout||(fo(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),fo(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:Ou(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:qn(this,!0)}}applyColour(){this.pathObject.applyColour(this);const Tt=this.getIcons();for(let kt=0;kt<Tt.length;kt++)Tt[kt].applyColour();for(let kt=0,Bt;Bt=this.inputList[kt];kt++)for(let zt=0,mn;mn=Bt.fieldRow[zt];zt++)mn.applyColour()}updateDisabled(){const Tt=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let kt=0,Bt;Bt=Tt[kt];kt++)Bt.rendered&&Bt.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(Tt){this.commentModel.text!==Tt&&(super.setCommentText(Tt),Tt=Tt!==null,!!this.commentIcon_===Tt?this.commentIcon_.updateText():(Tt?this.comment=this.commentIcon_=new Rx(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(Tt,kt){const Bt=kt||"";if(Bt)this.warningTextDb.has(Bt)&&(clearTimeout(this.warningTextDb.get(Bt)),this.warningTextDb.delete(Bt));else{for(var zt of this.warningTextDb.values())clearTimeout(zt);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(Bt,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(Bt),this.setWarningText(Tt,Bt))},100));else{if(this.isInFlyout&&(Tt=null),kt=!1,typeof Tt=="string"){zt=this.getSurroundParent();let mn=null;for(;zt;)zt.isCollapsed()&&(mn=zt),zt=zt.getSurroundParent();mn&&mn.setWarningText(ko.COLLAPSED_WARNINGS_WARNING,ep.COLLAPSED_WARNING_ID),this.warning||(this.warning=new Nx(this),kt=!0),this.warning.setText(Tt,Bt)}else this.warning&&!Bt?(this.warning.dispose(),kt=!0):this.warning&&(kt=this.warning.getText(),this.warning.setText("",Bt),(zt=this.warning.getText())||this.warning.dispose(),kt=kt!==zt);kt&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(Tt){this.mutator&&this.mutator!==Tt&&this.mutator.dispose(),Tt&&(Tt.setBlock(this),this.mutator=Tt,Tt.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(Tt){this.isEnabled()!==Tt&&(super.setEnabled(Tt),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(Tt){this.rendered&&this.pathObject.updateHighlighted(Tt)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(Tt){this.pathObject.updateDraggingDelete(Tt)}getColour(){return this.style.colourPrimary}setColour(Tt){super.setColour(Tt),Tt=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(Tt.style),this.style=Tt.style,this.styleName_=Tt.name,this.applyColour()}setStyle(Tt){const kt=this.workspace.getRenderer().getConstants().getBlockStyle(Tt);if(this.styleName_=Tt,kt)this.hat=kt.hat,this.pathObject.setStyle(kt),this.colour_=kt.colourPrimary,this.style=kt,this.applyColour();else throw Error("Invalid style name: "+Tt)}bringToFront(){let Tt=this;do{const kt=Tt.getSvgRoot(),Bt=kt.parentNode,zt=Bt.childNodes;zt[zt.length-1]!==kt&&Bt.appendChild(kt),Tt=Tt.getParent()}while(Tt)}setPreviousStatement(Tt,kt){super.setPreviousStatement(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(Tt,kt){super.setNextStatement(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(Tt,kt){super.setOutput(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(Tt){super.setInputsInline(Tt),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(Tt,kt){return Tt=super.removeInput(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours()),Tt}moveNumberedInputBefore(Tt,kt){super.moveNumberedInputBefore(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(Tt,kt){return Tt=super.appendInput_(Tt,kt),this.rendered&&(this.render(),this.bumpNeighbours()),Tt}setConnectionTracking(Tt){if(this.previousConnection&&this.previousConnection.setTracking(Tt),this.outputConnection&&this.outputConnection.setTracking(Tt),this.nextConnection){this.nextConnection.setTracking(Tt);var kt=this.nextConnection.targetBlock();kt&&kt.setConnectionTracking(Tt)}if(!this.collapsed_)for(kt=0;kt<this.inputList.length;kt++){var Bt=this.inputList[kt].connection;Bt&&(Bt.setTracking(Tt),(Bt=Bt.targetBlock())&&Bt.setConnectionTracking(Tt))}}getConnections_(Tt){const kt=[];if((Tt||this.rendered)&&(this.outputConnection&&kt.push(this.outputConnection),this.previousConnection&&kt.push(this.previousConnection),this.nextConnection&&kt.push(this.nextConnection),Tt||!this.collapsed_))for(let Bt=0,zt;zt=this.inputList[Bt];Bt++)zt.connection&&kt.push(zt.connection);return kt}lastConnectionInStack(Tt){return super.lastConnectionInStack(Tt)}getMatchingConnection(Tt,kt){return super.getMatchingConnection(Tt,kt)}makeConnection_(Tt){return new du(this,Tt)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const Tt=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||Tt.isInFlyout))for(const kt of this.getConnections_(!1)){if(kt.isSuperior()){let Bt;(Bt=kt.targetBlock())==null||Bt.bumpNeighboursInternal()}for(const Bt of kt.neighbours(dt.config$$module$build$src$core$config.snapRadius))Bt.getSourceBlock().getRootBlock()!==Tt&&(kt.isConnected()&&Bt.isConnected()||(kt.isSuperior()?Bt.bumpAwayFrom(kt):kt.bumpAwayFrom(Bt)))}}scheduleSnapAndBump(){const Tt=Mo();setTimeout(()=>{fo(Tt),this.snapToGrid(),fo(!1)},dt.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{fo(Tt),this.bumpNeighbours(),fo(!1)},dt.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(Tt,kt){Tt.type!==po.NEXT_STATEMENT&&Tt.type!==po.INPUT_VALUE||this.moveBy(kt.x-Tt.x,kt.y-Tt.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(Tt){return super.getChildren(Tt)}render(Tt){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Dr(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),Tt!==!1){const kt=this.getParent();kt?kt.render(!0):this.workspace.resizeContents()}_r(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(sv.LOCAL_MARKER).draw()}updateConnectionLocations_(){const Tt=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(Tt),this.outputConnection&&this.outputConnection.moveToOffset(Tt);for(let kt=0;kt<this.inputList.length;kt++){const Bt=this.inputList[kt].connection;Bt&&(Bt.moveToOffset(Tt),Bt.isConnected()&&Bt.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(Tt),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(Tt){this.pathObject.setCursorSvg(Tt)}setMarkerSvg(Tt){this.pathObject.setMarkerSvg(Tt)}getHeightWidth(){let Tt=this.height,kt=this.width;var Bt=this.getNextBlock();if(Bt){Bt=Bt.getHeightWidth();const zt=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;Tt+=Bt.height-zt,kt=Math.max(kt,Bt.width)}return{height:Tt,width:kt}}fadeForReplacement(Tt){this.pathObject.updateReplacementFade(Tt)}highlightShapeForInput(Tt,kt){this.pathObject.updateShapeForInputHighlight(Tt,kt)}};ep.INLINE=-1,ep.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Bx=class{constructor(){}onDragEnter(Tt){}onDragOver(Tt){}onDragExit(Tt){}onDrop(Tt){}getClientRect(){return null}shouldPreventMove(Tt){return!1}},qO=class extends Bx{constructor(){super(),this.wouldDelete_=!1}wouldDelete(Tt,kt){return Tt instanceof ep?(Tt=!Tt.getParent()&&Tt.isDeletable(),this.updateWouldDelete_(Tt&&!kt)):this.updateWouldDelete_(Tt.isDeletable()),this.wouldDelete_}updateWouldDelete_(Tt){this.wouldDelete_=Tt}},Em;(function(Tt){Tt[Tt.TOP=0]="TOP",Tt[Tt.BOTTOM=1]="BOTTOM"})(Em||(Em={}));var H0;(function(Tt){Tt[Tt.LEFT=0]="LEFT",Tt[Tt.RIGHT=1]="RIGHT"})(H0||(H0={}));var e_;(function(Tt){Tt[Tt.UP=0]="UP",Tt[Tt.DOWN=1]="DOWN"})(e_||(e_={}));var W_={};W_.bumpDirection=e_,W_.bumpPositionRect=Ay,W_.getCornerOppositeToolbox=Vm,W_.getStartPositionRect=T_,W_.horizontalPosition=H0,W_.verticalPosition=Em;var fu={width:96,height:124,url:"sprites.png"},Fx=class extends qO{constructor(Tt){super(),this.workspace=Tt,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(Tt=new yp({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(Tt.toolboxPosition=this.workspace.toolboxPosition===Do.TOP?Do.BOTTOM:Do.TOP,this.flyout=new(_o(ro.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(Tt)):(Tt.toolboxPosition=this.workspace.toolboxPosition===Do.RIGHT?Do.LEFT:Do.RIGHT,this.flyout=new(_o(ro.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(Tt)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=Cn(Er.G,{class:"blocklyTrash"});let Tt;const kt=String(Math.random()).substring(2);Tt=Cn(Er.CLIPPATH,{id:"blocklyTrashBodyClipPath"+kt},this.svgGroup_),Cn(Er.RECT,{width:Q0,height:KO,y:j0},Tt);const Bt=Cn(Er.IMAGE,{width:fu.width,x:-aT,height:fu.height,y:-lT,"clip-path":"url(#blocklyTrashBodyClipPath"+kt+")"},this.svgGroup_);return Bt.setAttributeNS(xu,"xlink:href",this.workspace.options.pathToMedia+fu.url),Tt=Cn(Er.CLIPPATH,{id:"blocklyTrashLidClipPath"+kt},this.svgGroup_),Cn(Er.RECT,{width:Q0,height:j0},Tt),this.svgLid_=Cn(Er.IMAGE,{width:fu.width,x:-aT,height:fu.height,y:-lT,"clip-path":"url(#blocklyTrashLidClipPath"+kt+")"},this.svgGroup_),this.svgLid_.setAttributeNS(xu,"xlink:href",this.workspace.options.pathToMedia+fu.url),Kt(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),Kt(this.svgGroup_,"pointerup",this,this.click),Kt(Bt,"pointerover",this,this.mouseOver_),Kt(Bt,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(Or(this.flyout.createDom(Er.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Dl.Capability.AUTOHIDEABLE,Dl.Capability.DELETE_AREA,Dl.Capability.DRAG_TARGET,Dl.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(fr(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var Tt=this.contents_.map(function(Bt){return JSON.parse(Bt)}),kt=this.workspace.getParentSvg().style;kt.cursor="wait",setTimeout(()=>{let Bt;(Bt=this.flyout)==null||Bt.show(Tt),kt.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var Tt;(Tt=this.flyout)==null||Tt.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(Tt){!Tt&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(Tt,kt){if(this.initialized_){var Bt=Vm(this.workspace,Tt);Tt=T_(Bt,new Pl(Q0,KO+j0),o$,Gx,Tt,this.workspace),kt=Ay(Tt,Gx,Bt.vertical===Em.TOP?e_.DOWN:e_.UP,kt),this.top_=kt.top,this.left_=kt.left;var zt;(zt=this.svgGroup_)==null||zt.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new Fs(this.top_,this.top_+KO+j0,this.left_,this.left_+Q0)}getClientRect(){if(!this.svgGroup_)return null;var Tt=this.svgGroup_.getBoundingClientRect();const kt=Tt.top+lT-JO;return Tt=Tt.left+aT-JO,new Fs(kt,kt+j0+KO+2*JO,Tt,Tt+Q0+2*JO)}onDragOver(Tt){this.setLidOpen(this.wouldDelete_)}onDragExit(Tt){this.setLidOpen(!1)}onDrop(Tt){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(Tt){this.isLidOpen!==Tt&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=Tt,this.animateLid_())}animateLid_(){const Tt=l$;var kt=1/(Tt+1);this.lidOpen_+=this.isLidOpen?kt:-kt,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Vx),kt=Ux+this.lidOpen_*(c$-Ux),this.svgGroup_&&(this.svgGroup_.style.opacity=kt.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),a$/Tt))}setLidAngle_(Tt){const kt=this.workspace.toolboxPosition===Do.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let Bt;(Bt=this.svgLid_)==null||Bt.setAttribute("transform","rotate("+(kt?-Tt:Tt)+","+(kt?4:Q0-4)+","+(j0-2)+")")}setMinOpenness_(Tt){this.minOpenness_=Tt,this.isLidOpen||this.setLidAngle_(Tt*Vx)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(Tt){Tt=new(no(Jy))(Tt,this.workspace.id),to(Tt)}blockMouseDownWhenOpenable_(Tt){!this.contentsIsOpen()&&this.hasContents_()&&Tt.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(Tt){if(!(0>=this.workspace.options.maxTrashcanContents||Tt.type!==Gp||Tt.type!==Gp||Tt.wasShadow)){if(!Tt.oldJson)throw Error("Encountered a delete event without proper oldJson");if(Tt=JSON.stringify(this.cleanBlockJson_(Tt.oldJson)),this.contents_.indexOf(Tt)===-1){for(this.contents_.unshift(Tt);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(s$)}}}cleanBlockJson_(Tt){function kt(Bt){if(Bt){if(delete Bt.id,delete Bt.x,delete Bt.y,delete Bt.enabled,Bt.icons&&Bt.icons.comment){var zt=Bt.icons.comment;delete zt.height,delete zt.width,delete zt.pinned}zt=Bt.inputs;for(var mn in zt){var En=zt[mn];const Hn=En.block;En=En.shadow,Hn&&kt(Hn),En&&kt(En)}Bt.next&&(mn=Bt.next,Bt=mn.block,mn=mn.shadow,Bt&&kt(Bt),mn&&kt(mn))}}return Tt=JSON.parse(JSON.stringify(Tt)),kt(Tt),Object.assign({},{kind:"BLOCK"},Tt)}},Q0=47,KO=44,j0=16,Gx=20,o$=20,JO=10,aT=0,lT=32,s$=.1,a$=80,l$=4,Ux=.4,c$=.8,Vx=45,cT=class extends pp{constructor(Tt,kt,Bt){super(Bt),this.type=ev,this.oldItem=Tt??void 0,this.newItem=kt??void 0}toJson(){const Tt=super.toJson();return Tt.oldItem=this.oldItem,Tt.newItem=this.newItem,Tt}fromJson(Tt){vt("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldItem=Tt.oldItem,this.newItem=Tt.newItem}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new cT),kt.oldItem=Tt.oldItem,kt.newItem=Tt.newItem,kt}};So(ro.EVENT,ev,cT);var uT=class{constructor(Tt,kt,Bt){this.id_=Tt.toolboxitemid||wo(),this.level_=(this.parent_=Bt||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=Tt,this.parentToolbox_=kt,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(Tt){}},vp=class extends uT{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(Tt){if("custom"in Tt)this.flyoutItems_=Tt.custom;else if(Tt=Tt.contents)for(let kt=0;kt<Tt.length;kt++){const Bt=Tt[kt];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(Bt)}}parseCategoryDef_(Tt){this.name_="name"in Tt?Ss(Tt.name):"",this.colour_=this.getColour_(Tt),Object.assign(this.cssConfig_,Tt.cssconfig||Tt.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Ds(this.htmlDiv_,$u.TREEITEM),fs(this.htmlDiv_,xs.SELECTED,!1),fs(this.htmlDiv_,xs.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Ds(this.iconDom_,$u.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const Tt=this.labelDom_.getAttribute("id");return Tt&&fs(this.htmlDiv_,xs.LABELLEDBY,Tt),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const Tt=document.createElement("div"),kt=this.cssConfig_.container;return kt&&tr(Tt,kt),Tt}createRowContainer_(){const Tt=document.createElement("div");var kt=this.cssConfig_.row;return kt&&tr(Tt,kt),kt=`${vp.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?Tt.style.paddingRight=kt:Tt.style.paddingLeft=kt,Tt}createRowContentsContainer_(){const Tt=document.createElement("div"),kt=this.cssConfig_.rowcontentcontainer;return kt&&tr(Tt,kt),Tt}createIconDom_(){const Tt=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const kt=this.cssConfig_.icon;kt&&tr(Tt,kt)}return Tt.style.display="inline-block",Tt}createLabelDom_(Tt){const kt=document.createElement("span");return kt.setAttribute("id",this.getId()+".label"),kt.textContent=Tt,(Tt=this.cssConfig_.label)&&tr(kt,Tt),kt}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(Tt){Tt&&(Tt=vp.borderWidth+"px solid "+(Tt||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=Tt:this.rowDiv_.style.borderLeft=Tt)}getColour_(Tt){const kt=Tt.categorystyle||Tt.categoryStyle;if((Tt=Tt.colour)&&kt)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(kt)return this.getColourfromStyle_(kt);if(Tt)return this.parseColour_(Tt)}return""}getColourfromStyle_(Tt){var kt=this.workspace_.getTheme();if(Tt&&kt){if((kt=kt.categoryStyles[Tt])&&kt.colour)return this.parseColour_(kt.colour);console.warn('Style "'+Tt+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(Tt){if(Tt=Ss(Tt),Tt==null||Tt==="")return"";var kt=Number(Tt);return isNaN(kt)?(kt=sp(Tt))?kt:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+Tt),""):a_(kt)}openIcon_(Tt){if(Tt){var kt=this.cssConfig_.closedicon;kt&&ir(Tt,kt),(kt=this.cssConfig_.openicon)&&tr(Tt,kt)}}closeIcon_(Tt){if(Tt){var kt=this.cssConfig_.openicon;kt&&ir(Tt,kt),(kt=this.cssConfig_.closedicon)&&tr(Tt,kt)}}setVisible_(Tt){this.htmlDiv_.style.display=Tt?"block":"none",this.isHidden_=!Tt,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let Tt=this;for(;Tt.getParent();)if(Tt=Tt.getParent(),!Tt.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(Tt){}setSelected(Tt){if(this.rowDiv_){var kt=this.cssConfig_.selected;if(Tt){const Bt=this.parseColour_(vp.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||Bt,kt&&tr(this.rowDiv_,kt)}else this.rowDiv_.style.backgroundColor="",kt&&Zn(this.rowDiv_,kt);fs(this.htmlDiv_,xs.SELECTED,Tt)}}setDisabled(Tt){this.isDisabled_=Tt,this.getDiv().setAttribute("disabled",`${Tt}`),Tt?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(Tt){this.flyoutItems_=[],this.toolboxItemDef_=typeof Tt=="string"?{kind:this.toolboxItemDef_.kind,custom:Tt,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Nm(Tt),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){fr(this.htmlDiv_)}};vp.registrationName="category",vp.nestedPadding=19,vp.borderWidth=8,vp.defaultBackgroundColour="#57e",Zl(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),So(ro.TOOLBOX_ITEM,vp.registrationName,vp);var Ev=class extends uT{constructor(Tt,kt){super(Tt,kt),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,Tt.cssconfig||Tt.cssConfig)}init(){this.createDom_()}createDom_(){const Tt=document.createElement("div"),kt=this.cssConfig_.container;return kt&&tr(Tt,kt),this.htmlDiv_=Tt}getDiv(){return this.htmlDiv_}dispose(){fr(this.htmlDiv_)}};Ev.registrationName="sep",Zl(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),So(ro.TOOLBOX_ITEM,Ev.registrationName,Ev);var X0=class extends vp{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const Tt=super.makeDefaultCssConfig_();return Tt.contents="blocklyToolboxContents",Tt}parseContents_(Tt){const kt=Tt.contents;let Bt=!0;if(Tt.custom)this.flyoutItems_=Tt.custom;else if(kt)for(Tt=0;Tt<kt.length;Tt++){const zt=kt[Tt];!Qr(ro.TOOLBOX_ITEM,zt.kind)||zt.kind.toLowerCase()===Ev.registrationName&&Bt?(this.flyoutItems_.push(zt),Bt=!0):(this.createToolboxItem_(zt),Bt=!1)}}createToolboxItem_(Tt){let kt=Tt.kind;kt.toUpperCase()==="CATEGORY"&&ap(Tt)&&(kt=X0.registrationName),Tt=new(Ir(ro.TOOLBOX_ITEM,kt))(Tt,this.parentToolbox_,this),this.toolboxItems_.push(Tt)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const Tt=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(Tt),Ds(this.subcategoriesDiv_,$u.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const Tt=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const kt=this.cssConfig_.icon;kt&&tr(Tt,kt),Tt.style.visibility="visible"}return Tt.style.display="inline-block",Tt}createSubCategoriesDom_(Tt){const kt=document.createElement("div");var Bt=this.cssConfig_.contents;for(Bt&&tr(kt,Bt),Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt];zt.init();const mn=zt.getDiv();if(kt.appendChild(mn),zt.getClickTarget){let En;(En=zt.getClickTarget())==null||En.setAttribute("id",zt.getId())}}return kt}setExpanded(Tt){this.expanded_!==Tt&&((this.expanded_=Tt)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),fs(this.htmlDiv_,xs.EXPANDED,Tt),this.parentToolbox_.handleToolboxItemResize())}setVisible_(Tt){this.htmlDiv_.style.display=Tt?"block":"none";const kt=this.getChildToolboxItems();for(let Bt=0;Bt<kt.length;Bt++)kt[Bt].setVisible_(Tt);this.isHidden_=!Tt,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(Tt){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};X0.registrationName="collapsibleCategory",So(ro.TOOLBOX_ITEM,X0.registrationName,X0);var Wx=class extends qO{constructor(Tt){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=Tt,this.toolboxDef_=Tt.options.languageTree||{contents:[]},this.horizontalLayout_=Tt.options.horizontalLayout,this.RTL=Tt.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=Tt.options.toolboxPosition}onShortcut(Tt){return!1}init(){var Tt=this.workspace_;const kt=Tt.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Or(this.flyout_.createDom("svg"),kt),this.setVisible(!0),this.flyout_.init(Tt),this.render(this.toolboxDef_),Tt=Tt.getThemeManager(),Tt.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),Tt.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Dl.Capability.AUTOHIDEABLE,Dl.Capability.DELETE_AREA,Dl.Capability.DRAG_TARGET]})}createDom_(Tt){Tt=Tt.getParentSvg();const kt=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Ds(this.contentsDiv_,$u.TREE),kt.appendChild(this.contentsDiv_),Tt.parentNode.insertBefore(kt,Tt),this.attachEvents_(kt,this.contentsDiv_),kt}createContainer_(){const Tt=document.createElement("div");return Tt.setAttribute("layout",this.isHorizontal()?"h":"v"),tr(Tt,"blocklyToolboxDiv"),tr(Tt,"blocklyNonSelectable"),Tt.setAttribute("dir",this.RTL?"RTL":"LTR"),Tt}createContentsContainer_(){const Tt=document.createElement("div");return tr(Tt,"blocklyToolboxContents"),this.isHorizontal()&&(Tt.style.flexDirection="row"),Tt}attachEvents_(Tt,kt){Tt=Zt(Tt,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(Tt),kt=Zt(kt,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(kt)}onClick_(Tt){if(dn(Tt)||Tt.target===this.HtmlDiv)In().hideChaff(!1);else{var kt=Tt.target.getAttribute("id");kt&&(kt=this.getToolboxItemById(kt),kt.isSelectable()&&(this.setSelectedItem(kt),kt.onClick(Tt))),In().hideChaff(!0)}Ct()}onKeyDown_(Tt){let kt=!1;switch(Tt.keyCode){case vo.DOWN:kt=this.selectNext_();break;case vo.UP:kt=this.selectPrevious_();break;case vo.LEFT:kt=this.selectParent_();break;case vo.RIGHT:kt=this.selectChild_();break;case vo.ENTER:case vo.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),kt=!0);break;default:kt=!1}if(!kt&&this.selectedItem_){const Bt=this.selectedItem_;Bt.onKeyDown&&(kt=Bt.onKeyDown(Tt))}kt&&Tt.preventDefault()}createFlyout_(){const Tt=this.workspace_,kt=new yp({parentWorkspace:Tt,rtl:Tt.RTL,oneBasedIndex:Tt.options.oneBasedIndex,horizontalLayout:Tt.horizontalLayout,renderer:Tt.options.renderer,rendererOverrides:Tt.options.rendererOverrides,move:{scrollbars:!0}});return kt.toolboxPosition=Tt.options.toolboxPosition,new(Tt.horizontalLayout?_o(ro.FLYOUTS_HORIZONTAL_TOOLBOX,Tt.options,!0):_o(ro.FLYOUTS_VERTICAL_TOOLBOX,Tt.options,!0))(kt)}render(Tt){this.toolboxDef_=Tt;for(let kt=0;kt<this.contents_.length;kt++){const Bt=this.contents_[kt];Bt&&Bt.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(Tt.contents),this.position(),this.handleToolboxItemResize()}renderContents_(Tt){const kt=document.createDocumentFragment();for(let Bt=0;Bt<Tt.length;Bt++)this.createToolboxItem_(Tt[Bt],kt);this.contentsDiv_.appendChild(kt)}createToolboxItem_(Tt,kt){var Bt=Tt.kind;Bt.toUpperCase()==="CATEGORY"&&ap(Tt)&&(Bt=X0.registrationName),(Bt=Ir(ro.TOOLBOX_ITEM,Bt.toLowerCase()))&&(Tt=new Bt(Tt,this),Tt.init(),this.addToolboxItem_(Tt),(Bt=Tt.getDiv())&&kt.appendChild(Bt),Tt.getClickTarget()&&Tt.getClickTarget().setAttribute("id",Tt.getId()))}addToolboxItem_(Tt){if(this.contents_.push(Tt),this.contentMap_[Tt.getId()]=Tt,Tt.isCollapsible()){Tt=Tt.getChildToolboxItems();for(let kt=0;kt<Tt.length;kt++)this.addToolboxItem_(Tt[kt])}}getToolboxItems(){return this.contents_}addStyle(Tt){Tt&&this.HtmlDiv&&tr(this.HtmlDiv,Tt)}removeStyle(Tt){Tt&&this.HtmlDiv&&Zn(this.HtmlDiv,Tt)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var Tt=this.HtmlDiv.getBoundingClientRect();const kt=Tt.top,Bt=kt+Tt.height,zt=Tt.left;return Tt=zt+Tt.width,this.toolboxPosition===Do.TOP?new Fs(-1e7,Bt,-1e7,1e7):this.toolboxPosition===Do.BOTTOM?new Fs(kt,1e7,-1e7,1e7):this.toolboxPosition===Do.LEFT?new Fs(-1e7,1e7,-1e7,Tt):new Fs(-1e7,1e7,zt,1e7)}wouldDelete(Tt,kt){return Tt instanceof ep?this.updateWouldDelete_(!Tt.getParent()&&Tt.isDeletable()):this.updateWouldDelete_(Tt.isDeletable()),this.wouldDelete_}onDragEnter(Tt){this.updateCursorDeleteStyle_(!0)}onDragExit(Tt){this.updateCursorDeleteStyle_(!1)}onDrop(Tt){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(Tt){Tt!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=Tt,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(Tt){const kt=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";Tt?this.addStyle(kt):this.removeStyle(kt)}getToolboxItemById(Tt){return this.contentMap_[Tt]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const Tt=this.workspace_.getMetrics(),kt=this.HtmlDiv;kt&&(this.horizontalLayout_?(kt.style.left="0",kt.style.height="auto",kt.style.width="100%",this.height_=kt.offsetHeight,this.width_=Tt.viewWidth,this.toolboxPosition===Do.TOP?kt.style.top="0":kt.style.bottom="0"):(this.toolboxPosition===Do.RIGHT?kt.style.right="0":kt.style.left="0",kt.style.height="100%",this.width_=kt.offsetWidth,this.height_=Tt.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const Tt=this.workspace_,kt=this.HtmlDiv.getBoundingClientRect();Tt.translate(this.toolboxPosition===Do.LEFT?Tt.scrollX+kt.width:Tt.scrollX,this.toolboxPosition===Do.TOP?Tt.scrollY+kt.height:Tt.scrollY),Qn(Tt)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let Tt=0;Tt<this.contents_.length;Tt++){const kt=this.contents_[Tt];kt.refreshTheme&&kt.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(Tt){this.isVisible_!==Tt&&(this.HtmlDiv.style.display=Tt?"block":"none",this.isVisible_=Tt,this.workspace_.recordDragTargets())}autoHide(Tt){!Tt&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(Tt){const kt=this.selectedItem_;!Tt&&!kt||Tt&&!Tt.isSelectable()||(this.shouldDeselectItem_(kt,Tt)&&kt!==null&&this.deselectItem_(kt),this.shouldSelectItem_(kt,Tt)&&Tt!==null&&this.selectItem_(kt,Tt),this.updateFlyout_(kt,Tt),this.fireSelectEvent_(kt,Tt))}shouldDeselectItem_(Tt,kt){return Tt!==null&&(!Tt.isCollapsible()||Tt!==kt)}shouldSelectItem_(Tt,kt){return kt!==null&&kt!==Tt}deselectItem_(Tt){this.selectedItem_=null,this.previouslySelectedItem_=Tt,Tt.setSelected(!1),fs(this.contentsDiv_,xs.ACTIVEDESCENDANT,"")}selectItem_(Tt,kt){this.selectedItem_=kt,this.previouslySelectedItem_=Tt,kt.setSelected(!0),fs(this.contentsDiv_,xs.ACTIVEDESCENDANT,kt.getId())}selectItemByPosition(Tt){-1<Tt&&Tt<this.contents_.length&&(Tt=this.contents_[Tt],Tt.isSelectable()&&this.setSelectedItem(Tt))}updateFlyout_(Tt,kt){kt&&(Tt!==kt||kt.isCollapsible())&&kt.getContents().length?(this.flyout_.show(kt.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(Tt,kt){const Bt=Tt&&Tt.getName();let zt=kt&&kt.getName();Tt===kt&&(zt=null),Tt=new(no(ev))(Bt,zt,this.workspace_.id),to(Tt)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const Tt=this.selectedItem_;return Tt.isExpanded()?this.selectNext_():Tt.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let Tt=this.contents_.indexOf(this.selectedItem_)+1;if(-1<Tt&&Tt<this.contents_.length){let kt=this.contents_[Tt];for(;kt&&!kt.isSelectable();)kt=this.contents_[++Tt];if(kt&&kt.isSelectable())return this.setSelectedItem(kt),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let Tt=this.contents_.indexOf(this.selectedItem_)-1;if(-1<Tt&&Tt<this.contents_.length){let kt=this.contents_[Tt];for(;kt&&!kt.isSelectable();)kt=this.contents_[--Tt];if(kt&&kt.isSelectable())return this.setSelectedItem(kt),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var Tt=0;Tt<this.contents_.length;Tt++)this.contents_[Tt].dispose();for(Tt=0;Tt<this.boundEvents_.length;Tt++)cn(this.boundEvents_[Tt]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),fr(this.HtmlDiv)}};Zl(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),So(ro.TOOLBOX,vm,Wx);var u$={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},h$={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},d$=new U_("zelos",u$,h$),hT={};hT.Classic=XO,hT.Zelos=d$;var dT=class extends pp{constructor(Tt,kt,Bt){kt=Tt?Tt.workspace.id:kt,kt===null&&(kt=void 0),super(kt),this.type=Km,this.blockId=Tt?Tt.id:void 0,this.targetType=Bt}toJson(){const Tt=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return Tt.targetType=this.targetType,Tt.blockId=this.blockId,Tt}fromJson(Tt){vt("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.targetType=Tt.targetType,this.blockId=Tt.blockId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new dT),kt.targetType=Tt.targetType,kt.blockId=Tt.blockId,kt}},fT;(function(Tt){Tt.BLOCK="block",Tt.WORKSPACE="workspace",Tt.ZOOM_CONTROLS="zoom_controls"})(fT||(fT={})),So(ro.EVENT,Km,dT);var zx=class{constructor(Tt,kt){this.bubble=Tt,this.workspace=kt,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=kt.getBlockDragSurface()}startBubbleDrag(){Mo()||fo(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(Tt,kt){kt=this.pixelsToWorkspaceUnits_(kt),kt=ao.sum(this.startXY_,kt),this.bubble.moveDuringDrag(this.dragSurface_,kt),kt=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(Tt),Tt=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),Tt!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==kt&&(kt&&kt.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(Tt){return Tt&&this.workspace.getComponentManager().hasCapability(Tt.id,Dl.Capability.DELETE_AREA)?Tt.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(Tt,kt){this.dragBubble(Tt,kt),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?Tt=this.startXY_:(Tt=this.pixelsToWorkspaceUnits_(kt),Tt=ao.sum(this.startXY_,Tt)),this.bubble.moveTo(Tt.x,Tt.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),fo(!1)}fireMoveEvent_(){if(this.bubble instanceof tu){const Tt=new(no(bm))(this.bubble);Tt.setOldCoordinate(this.startXY_),Tt.recordNew(),to(Tt)}}pixelsToWorkspaceUnits_(Tt){return Tt=new ao(Tt.x/this.workspace.scale,Tt.y/this.workspace.scale),this.workspace.isMutator&&Tt.scale(1/this.workspace.options.parentWorkspace.scale),Tt}},Hx=class{constructor(Tt){this.workspace=Tt,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new ao(Tt.scrollX,Tt.scrollY)}dispose(){this.workspace=null}startDrag(){zn()&&zn().unselect(),this.workspace.setupDragSurface()}endDrag(Tt){this.drag(Tt),this.workspace.resetDragSurface()}drag(Tt){if(Tt=ao.sum(this.startScrollXY_,Tt),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(Tt.x,Tt.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(Tt.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,Tt.y);else throw new TypeError("Invalid state.")}},f$=5,p$=6,Vp=class{constructor(Tt,kt){this.creatorWorkspace=kt,this.mouseDownXY_=new ao(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=Tt,this.currentDragDeltaXY_=new ao(0,0),this.healStack_=!Px}dispose(){Ct(),J_(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&cn(this.onMoveWrapper_),this.onUpWrapper_&&cn(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&cn(this.onStartWrapper_)}updateFromEvent_(Tt){const kt=new ao(Tt.clientX,Tt.clientY);this.updateDragDelta_(kt)&&(this.updateIsDragging_(),Et()),this.mostRecentEvent_=Tt}updateDragDelta_(Tt){return this.currentDragDeltaXY_=ao.difference(Tt,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=ao.magnitude(this.currentDragDeltaXY_)>(this.flyout_?dt.config$$module$build$src$core$config.flyoutDragRadius:dt.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let Tt;if(!this.targetBlock_||(Tt=this.flyout_)==null||!Tt.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Mo()||fo(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new Hx(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(_o(ro.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new zx(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(Tt){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,hn(Tt)?this.cancel():(this.hasStarted_=!0,Nu(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=ur(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=Tt,oy(),this.targetBlock_&&this.targetBlock_.select(),dn(Tt)?this.handleRightClick(Tt):(Tt.type.toLowerCase()==="pointerdown"&&Tt.pointerType!=="mouse"&&St(Tt,this),this.mouseDownXY_=new ao(Tt.clientX,Tt.clientY),this.healStack_=Tt.altKey||Tt.ctrlKey||Tt.metaKey,this.bindMouseEvents(Tt),this.isEnding_||this.handleTouchStart(Tt)))}bindMouseEvents(Tt){this.onStartWrapper_=Zt(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Zt(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Zt(document,"pointerup",null,this.handleUp.bind(this),!0),Tt.preventDefault(),Tt.stopPropagation()}handleStart(Tt){this.isDragging()||(this.handleTouchStart(Tt),this.isMultiTouch()&&Et())}handleMove(Tt){this.isDragging()&&At(Tt)||!this.isMultiTouch()?(this.updateFromEvent_(Tt),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),Tt.preventDefault(),Tt.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(Tt),Et())}handleUp(Tt){if(this.isDragging()||this.handleTouchEnd(Tt),!this.isMultiTouch()||this.isDragging()){if(!At(Tt))return;if(this.updateFromEvent_(Tt),Et(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(Tt,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(Tt,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(Tt)}Tt.preventDefault(),Tt.stopPropagation(),this.dispose()}handleTouchStart(Tt){var kt=Rt(Tt);this.cachedPoints.set(kt,this.getTouchPoint(Tt));var Bt=Array.from(this.cachedPoints.keys());Bt.length===2&&(kt=this.cachedPoints.get(Bt[0]),Bt=this.cachedPoints.get(Bt[1]),this.startDistance_=ao.distance(kt,Bt),this.isMultiTouch_=!0,Tt.preventDefault())}handleTouchMove(Tt){const kt=Rt(Tt);this.cachedPoints.set(kt,this.getTouchPoint(Tt)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(Tt):this.handleMove(Tt)}handlePinch_(Tt){var kt=Array.from(this.cachedPoints.keys()),Bt=this.cachedPoints.get(kt[0]);if(kt=this.cachedPoints.get(kt[1]),Bt=ao.distance(Bt,kt)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(kt=Bt-this.previousScale_,kt=0<kt?kt*f$:kt*p$,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const zt=this.startWorkspace_,mn=pn(Tt,zt.getParentSvg(),zt.getInverseScreenCTM());zt.zoom(mn.x,mn.y,kt)}this.previousScale_=Bt,Tt.preventDefault()}handleTouchEnd(Tt){Tt=Rt(Tt),this.cachedPoints.has(Tt)&&this.cachedPoints.delete(Tt),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(Tt){return this.startWorkspace_?new ao(Tt.pageX,Tt.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Et(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(Tt){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(Tt)):this.startBubble_?this.startBubble_.showContextMenu(Tt):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(Tt)),Tt.preventDefault(),Tt.stopPropagation(),this.dispose()}handleWsStart(Tt,kt){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(kt),this.mostRecentEvent_=Tt,this.doStart(Tt)}fireWorkspaceClick_(Tt){to(new(no(Km))(null,Tt.id,"workspace"))}handleFlyoutStart(Tt,kt){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(kt),this.handleWsStart(Tt,kt.getWorkspace())}handleBlockStart(Tt,kt){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(kt),this.mostRecentEvent_=Tt}handleBubbleStart(Tt,kt){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(kt),this.mostRecentEvent_=Tt}doBubbleClick_(){this.startBubble_ instanceof tu&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(Mo()||fo(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const Tt=new(no(Km))(this.startBlock_,this.startWorkspace_.id,"block");to(Tt)}this.bringBlockToFront_(),fo(!1)}doWorkspaceClick_(Tt){Tt=this.creatorWorkspace,zn()&&zn().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||Tt)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(Tt){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=Tt)}setStartBubble(Tt){this.startBubble_||(this.startBubble_=Tt)}setStartBlock(Tt){this.startBlock_||this.startBubble_||(this.startBlock_=Tt,Tt.isInFlyout&&Tt!==Tt.getRootBlock()?this.setTargetBlock_(Tt.getRootBlock()):this.setTargetBlock_(Tt))}setTargetBlock_(Tt){Tt.isShadow()?this.setTargetBlock_(Tt.getParent()):this.targetBlock_=Tt}setStartWorkspace_(Tt){this.startWorkspace_||(this.startWorkspace_=Tt)}setStartFlyout_(Tt){this.flyout_||(this.flyout_=Tt)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let Tt,kt;return(kt=(Tt=this.blockDragger_)!=null?Tt:this.workspaceDragger_)!=null?kt:this.bubbleDragger_}static inProgress(){const Tt=bn();for(let kt=0,Bt;Bt=Tt[kt];kt++)if(Bt.currentGesture_)return!0;return!1}},hs=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(Tt,kt){if(this.shortcuts.get(Tt.name)&&!kt)throw Error(`Shortcut named "${Tt.name}" already exists.`);if(this.shortcuts.set(Tt.name,Tt),(kt=Tt.keyCodes)&&0<kt.length)for(let Bt=0;Bt<kt.length;Bt++)this.addKeyMapping(kt[Bt],Tt.name,!!Tt.allowCollision)}unregister(Tt){return this.shortcuts.get(Tt)?(this.removeAllKeyMappings(Tt),this.shortcuts.delete(Tt),!0):(console.warn(`Keyboard shortcut named "${Tt}" not found.`),!1)}addKeyMapping(Tt,kt,Bt){Tt=String(Tt);const zt=this.keyMap.get(Tt);if(zt&&!Bt)throw Error(`Shortcut named "${kt}" collides with shortcuts "${zt}"`);zt&&Bt?zt.unshift(kt):this.keyMap.set(Tt,[kt])}removeKeyMapping(Tt,kt,Bt){const zt=this.keyMap.get(Tt);if(!zt)return Bt||console.warn(`No keyboard shortcut named "${kt}" registered with key code "${Tt}"`),!1;const mn=zt.indexOf(kt);return-1<mn?(zt.splice(mn,1),zt.length===0&&this.keyMap.delete(Tt),!0):(Bt||console.warn(`No keyboard shortcut named "${kt}" registered with key code "${Tt}"`),!1)}removeAllKeyMappings(Tt){for(const kt of this.keyMap.keys())this.removeKeyMapping(kt,Tt,!0)}setKeyMap(Tt){this.keyMap.clear();for(const kt in Tt)this.keyMap.set(kt,Tt[kt])}getKeyMap(){const Tt=Object.create(null);for(const[kt,Bt]of this.keyMap)Tt[kt]=Bt;return Tt}getRegistry(){const Tt=Object.create(null);for(const[kt,Bt]of this.shortcuts)Tt[kt]=Bt;return wp(Object.create(null),Tt)}onKeyDown(Tt,kt){var Bt=this.serializeKeyEvent_(kt);if(Bt=this.getShortcutNamesByKeyCode(Bt),!Bt)return!1;for(let zt=0,mn;mn=Bt[zt];zt++){const En=this.shortcuts.get(mn);let Hn,pr;if((Hn=En)==null||!Hn.preconditionFn||(pr=En)!=null&&pr.preconditionFn(Tt)){let Kr,lo;if((Kr=En)!=null&&Kr.callback&&((lo=En)!=null&&lo.callback(Tt,kt,En)))return!0}}return!1}getShortcutNamesByKeyCode(Tt){return this.keyMap.get(Tt)||[]}getKeyCodesByShortcutName(Tt){const kt=[];for(const[Bt,zt]of this.keyMap)-1<zt.indexOf(Tt)&&kt.push(Bt);return kt}serializeKeyEvent_(Tt){let kt="";for(const Bt in hs.modifierKeys)Tt.getModifierState(Bt)&&(kt!==""&&(kt+="+"),kt+=Bt);return kt!==""&&Tt.keyCode?kt=kt+"+"+Tt.keyCode:Tt.keyCode&&(kt=Tt.keyCode.toString()),kt}checkModifiers_(Tt){for(let kt=0,Bt;Bt=Tt[kt];kt++)if(!(Bt in hs.modifierKeys))throw Error(Bt+" is not a valid modifier key.")}createSerializedKey(Tt,kt){let Bt="";if(kt){this.checkModifiers_(kt);for(const zt in hs.modifierKeys)-1<kt.indexOf(hs.modifierKeys[zt])&&(Bt!==""&&(Bt+="+"),Bt+=zt)}return Bt!==""&&Tt?Bt=Bt+"+"+Tt:Tt&&(Bt=Tt.toString()),Bt}};hs.registry=new hs,function(Tt){Tt=Tt.modifierKeys||(Tt.modifierKeys={}),Tt[Tt.Shift=16]="Shift",Tt[Tt.Control=17]="Control",Tt[Tt.Alt=18]="Alt",Tt[Tt.Meta=91]="Meta"}(hs||(hs={}));var Wp;(function(Tt){Tt.ESCAPE="escape",Tt.DELETE="delete",Tt.COPY="copy",Tt.CUT="cut",Tt.PASTE="paste",Tt.UNDO="undo",Tt.REDO="redo"})(Wp||(Wp={})),$_();var zp={};zp.names=Wp,zp.registerCopy=Iy,zp.registerCut=Ry,zp.registerDefaultShortcuts=$_,zp.registerDelete=ky,zp.registerEscape=_O,zp.registerPaste=My,zp.registerRedo=E_,zp.registerUndo=x_;var pT=class extends pp{constructor(Tt,kt){super(kt),this.type=tv,this.themeName=Tt}toJson(){const Tt=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return Tt.themeName=this.themeName,Tt}fromJson(Tt){vt("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.themeName=Tt.themeName}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new pT),kt.themeName=Tt.themeName,kt}};So(ro.EVENT,tv,pT);var mT=class extends pp{constructor(Tt,kt,Bt,zt,mn){super(zt),this.type=L_,this.viewTop=Tt,this.viewLeft=kt,this.scale=Bt,this.oldScale=mn}toJson(){const Tt=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return Tt.viewTop=this.viewTop,Tt.viewLeft=this.viewLeft,Tt.scale=this.scale,Tt.oldScale=this.oldScale,Tt}fromJson(Tt){vt("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.viewTop=Tt.viewTop,this.viewLeft=Tt.viewLeft,this.scale=Tt.scale,this.oldScale=Tt.oldScale}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new mT),kt.viewTop=Tt.viewTop,kt.viewLeft=Tt.viewLeft,kt.scale=Tt.scale,kt.oldScale=Tt.oldScale,kt}};So(ro.EVENT,L_,mT);var Y0=class{constructor(Tt){this.connectionChecker=Tt,this.connections_=[]}addConnection(Tt,kt){kt=this.calculateIndexForYPos_(kt),this.connections_.splice(kt,0,Tt)}findIndexOfConnection_(Tt,kt){if(!this.connections_.length)return-1;const Bt=this.calculateIndexForYPos_(kt);if(Bt>=this.connections_.length)return-1;kt=Tt.y;let zt=Bt;for(;0<=zt&&this.connections_[zt].y===kt;){if(this.connections_[zt]===Tt)return zt;zt--}for(zt=Bt;zt<this.connections_.length&&this.connections_[zt].y===kt;){if(this.connections_[zt]===Tt)return zt;zt++}return-1}calculateIndexForYPos_(Tt){if(!this.connections_.length)return 0;let kt=0,Bt=this.connections_.length;for(;kt<Bt;){const zt=Math.floor((kt+Bt)/2);if(this.connections_[zt].y<Tt)kt=zt+1;else if(this.connections_[zt].y>Tt)Bt=zt;else{kt=zt;break}}return kt}removeConnection(Tt,kt){if(Tt=this.findIndexOfConnection_(Tt,kt),Tt===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(Tt,1)}getNeighbours(Tt,kt){function Bt(lo){const es=mn-zt[lo].x,ws=En-zt[lo].y;return Math.sqrt(es*es+ws*ws)<=kt&&Kr.push(zt[lo]),ws<kt}const zt=this.connections_,mn=Tt.x,En=Tt.y;Tt=0;let Hn=zt.length-2,pr=Hn;for(;Tt<pr;)zt[pr].y<En?Tt=pr:Hn=pr,pr=Math.floor((Tt+Hn)/2);const Kr=[];if(Hn=Tt=pr,zt.length){for(;0<=Tt&&Bt(Tt);)Tt--;do Hn++;while(Hn<zt.length&&Bt(Hn))}return Kr}isInYRange_(Tt,kt,Bt){return Math.abs(this.connections_[Tt].y-kt)<=Bt}searchForClosest(Tt,kt,Bt){if(!this.connections_.length)return{connection:null,radius:kt};const zt=Tt.y,mn=Tt.x;Tt.x=mn+Bt.x,Tt.y=zt+Bt.y;var En=this.calculateIndexForYPos_(Tt.y);Bt=null;let Hn=kt,pr,Kr=En-1;for(;0<=Kr&&this.isInYRange_(Kr,Tt.y,kt);)pr=this.connections_[Kr],this.connectionChecker.canConnect(Tt,pr,!0,Hn)&&(Bt=pr,Hn=pr.distanceFrom(Tt)),Kr--;for(;En<this.connections_.length&&this.isInYRange_(En,Tt.y,kt);)pr=this.connections_[En],this.connectionChecker.canConnect(Tt,pr,!0,Hn)&&(Bt=pr,Hn=pr.distanceFrom(Tt)),En++;return Tt.x=mn,Tt.y=zt,{connection:Bt,radius:Hn}}static init(Tt){const kt=[];return kt[po.INPUT_VALUE]=new Y0(Tt),kt[po.OUTPUT_VALUE]=new Y0(Tt),kt[po.NEXT_STATEMENT]=new Y0(Tt),kt[po.PREVIOUS_STATEMENT]=new Y0(Tt),kt}},gT=class{constructor(Tt,kt){this.pattern=Tt;let Bt;this.spacing=(Bt=kt.spacing)!=null?Bt:0;let zt;this.length=(zt=kt.length)!=null?zt:1,this.line2=(this.line1=Tt.firstChild)&&this.line1.nextSibling;let mn;this.snapToGrid=(mn=kt.snap)!=null?mn:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(Tt){var kt=this.spacing*Tt||100;this.pattern.setAttribute("width",kt.toString()),this.pattern.setAttribute("height",kt.toString()),kt=Math.floor(this.spacing/2)+.5;let Bt=kt-this.length/2,zt=kt+this.length/2;kt*=Tt,Bt*=Tt,zt*=Tt,this.setLineAttributes(this.line1,Tt,Bt,zt,kt,kt),this.setLineAttributes(this.line2,Tt,kt,kt,Bt,zt)}setLineAttributes(Tt,kt,Bt,zt,mn,En){Tt&&(Tt.setAttribute("stroke-width",kt.toString()),Tt.setAttribute("x1",Bt.toString()),Tt.setAttribute("y1",mn.toString()),Tt.setAttribute("x2",zt.toString()),Tt.setAttribute("y2",En.toString()))}moveTo(Tt,kt){this.pattern.setAttribute("x",Tt.toString()),this.pattern.setAttribute("y",kt.toString())}static createDom(Tt,kt,Bt){Tt=Cn(Er.PATTERN,{id:"blocklyGridPattern"+Tt,patternUnits:"userSpaceOnUse"},Bt);let zt,mn;if(0<((zt=kt.length)!=null?zt:1)&&0<((mn=kt.spacing)!=null?mn:0)){Cn(Er.LINE,{stroke:kt.colour},Tt);let En;(En=kt.length)!=null&&En&&Cn(Er.LINE,{stroke:kt.colour},Tt)}else Cn(Er.LINE,{},Tt);return Tt}},tp=class{constructor(Tt,kt){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=kt||"",this.reservedWords=new Set(Tt?Tt.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(Tt){this.variableMap_=Tt}getNameForUserVariable_(Tt){return this.variableMap_?(Tt=this.variableMap_.getVariableById(Tt))?Tt.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(Tt){Tt=Am(Tt);for(let kt=0;kt<Tt.length;kt++)this.getName(Tt[kt].getId(),dt.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(Tt){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(Tt,kt){let Bt=Tt;kt===dt.NameType$$module$build$src$core$names.VARIABLE&&(Tt=this.getNameForUserVariable_(Tt))&&(Bt=Tt),Tt=Bt.toLowerCase();const zt=kt===dt.NameType$$module$build$src$core$names.VARIABLE||kt===dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(kt)||this.db.set(kt,new Map);const mn=this.db.get(kt);return mn.has(Tt)?zt+mn.get(Tt):(kt=this.getDistinctName(Bt,kt),mn.set(Tt,kt.substr(zt.length)),kt)}getUserNames(Tt){let kt;return(Tt=(kt=this.db.get(Tt))==null?void 0:kt.keys())?Array.from(Tt):[]}getDistinctName(Tt,kt){Tt=this.safeName_(Tt);let Bt="";for(;this.dbReverse.has(Tt+Bt)||this.reservedWords.has(Tt+Bt);)Bt=Bt?Bt+1:2;return Tt+=Bt,this.dbReverse.add(Tt),(kt===dt.NameType$$module$build$src$core$names.VARIABLE||kt===dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+Tt}safeName_(Tt){return Tt?(Tt=encodeURI(Tt.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(Tt[0])!==-1&&(Tt="my_"+Tt)):Tt=ko.UNNAMED_KEY||"unnamed",Tt}static equals(Tt,kt){return Tt.toLowerCase()===kt.toLowerCase()}};(function(Tt){Tt=Tt.NameType||(Tt.NameType={}),Tt.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",Tt.VARIABLE="VARIABLE",Tt.PROCEDURE="PROCEDURE"})(tp||(tp={})),dt.NameType$$module$build$src$core$names=tp.NameType,tp.DEVELOPER_VARIABLE_TYPE=dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,dt.module$build$src$core$names={},dt.module$build$src$core$names.NameType=dt.NameType$$module$build$src$core$names,dt.module$build$src$core$names.Names=tp;var Qx=class extends Map{constructor(Tt){super(),this.workspace=Tt}set(Tt,kt){return this.get(Tt)===kt?this:(super.set(Tt,kt),to(new(no(IO))(this.workspace,kt)),lp(kt)&&kt.startPublishing(),this)}delete(Tt){const kt=this.get(Tt);return Tt=super.delete(Tt),Tt&&(bu(this.workspace),to(new(no(rv))(this.workspace,kt)),lp(kt)&&kt.stopPublishing(),Tt)}clear(){if(this.size){for(const Tt of this.keys()){const kt=this.get(Tt);super.delete(Tt),to(new(no(rv))(this.workspace,kt))}bu(this.workspace)}}add(Tt){return this.set(Tt.getId(),Tt)}getProcedures(){return[...this.values()]}},$v=class{constructor(Tt,kt,Bt){this.workspace=Tt,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=Bt??Ao(),this.name=kt}setName(Tt){if(Tt===this.name)return this;const kt=this.name;return this.name=Tt,bu(this.workspace),this.shouldFireEvents&&to(new(no(RO))(this.workspace,this,kt)),this}insertParameter(Tt,kt){return this.parameters[kt]&&this.parameters[kt].getId()===Tt.getId()?this:(this.parameters.splice(kt,0,Tt),Tt.setProcedureModel(this),lp(Tt)&&(this.shouldFireEvents?Tt.startPublishing():Tt.stopPublishing()),bu(this.workspace),this.shouldFireEvents&&to(new(no(DO))(this.workspace,this,Tt,kt)),this)}deleteParameter(Tt){if(!this.parameters[Tt])return this;const kt=this.parameters[Tt];return this.parameters.splice(Tt,1),bu(this.workspace),lp(kt)&&kt.stopPublishing(),this.shouldFireEvents&&to(new(no(LO))(this.workspace,this,kt,Tt)),this}setReturnTypes(Tt){if(Tt&&Tt.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!Tt==!!this.returnTypes)return this;const kt=this.returnTypes;return this.returnTypes=Tt,bu(this.workspace),this.shouldFireEvents&&to(new(no(PO))(this.workspace,this,kt)),this}setEnabled(Tt){return Tt===this.enabled?this:(this.enabled=Tt,bu(this.workspace),this.shouldFireEvents&&to(new(no(MO))(this.workspace,this)),this)}getId(){return this.id}getName(){return this.name}getParameter(Tt){return this.parameters[Tt]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const Tt of this.parameters)lp(Tt)&&Tt.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const Tt of this.parameters)lp(Tt)&&Tt.stopPublishing()}},Z0=class{constructor(Tt,kt,Bt){this.workspace=Tt,this.shouldFireEvents=!1,this.procedureModel=null,this.id=Bt??Ao();let zt;this.variable=(zt=this.workspace.getVariable(kt))!=null?zt:Tt.createVariable(kt)}setName(Tt){if(Tt===this.variable.name)return this;const kt=this.variable.name;let Bt;return this.variable=(Bt=this.workspace.getVariable(Tt))!=null?Bt:this.workspace.createVariable(Tt),bu(this.workspace),this.shouldFireEvents&&to(new(no(NO))(this.workspace,this.procedureModel,this,kt)),this}setTypes(Tt){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(Tt){return this.procedureModel=Tt,this}},_b,_T;_b="PROCEDURE",_T="x",dt.module$build$src$core$procedures={},dt.module$build$src$core$procedures.CATEGORY_NAME=_b,dt.module$build$src$core$procedures.DEFAULT_ARG=_T,dt.module$build$src$core$procedures.ObservableParameterModel=Z0,dt.module$build$src$core$procedures.ObservableProcedureMap=Qx,dt.module$build$src$core$procedures.ObservableProcedureModel=$v,dt.module$build$src$core$procedures.allProcedures=w_,dt.module$build$src$core$procedures.findLegalName=y0,dt.module$build$src$core$procedures.flyoutCategory=Wm,dt.module$build$src$core$procedures.getCallers=Ns,dt.module$build$src$core$procedures.getDefinition=$a,dt.module$build$src$core$procedures.isNameUsed=v0,dt.module$build$src$core$procedures.mutateCallers=Gs,dt.module$build$src$core$procedures.mutatorOpenListener=ks,dt.module$build$src$core$procedures.rename=dS;var m$=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(Tt){return Object.prototype.hasOwnProperty.call(this,Tt)||(this[Tt]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[Tt]}isField(Tt){return Tt.type&this.FIELD}isHat(Tt){return Tt.type&this.HAT}isIcon(Tt){return Tt.type&this.ICON}isSpacer(Tt){return Tt.type&this.SPACER}isInRowSpacer(Tt){return Tt.type&this.IN_ROW_SPACER}isInput(Tt){return Tt.type&this.INPUT}isExternalInput(Tt){return Tt.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(Tt){return Tt.type&this.INLINE_INPUT}isStatementInput(Tt){return Tt.type&this.STATEMENT_INPUT}isPreviousConnection(Tt){return Tt.type&this.PREVIOUS_CONNECTION}isNextConnection(Tt){return Tt.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(Tt){return Tt.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(Tt){return Tt.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(Tt){return Tt.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(Tt){return Tt.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(Tt){return Tt.type&this.RIGHT_SQUARE_CORNER}isCorner(Tt){return Tt.type&this.CORNER}isJaggedEdge(Tt){return Tt.type&this.JAGGED_EDGE}isRow(Tt){return Tt.type&this.ROW}isBetweenRowSpacer(Tt){return Tt.type&this.BETWEEN_ROW_SPACER}isTopRow(Tt){return Tt.type&this.TOP_ROW}isBottomRow(Tt){return Tt.type&this.BOTTOM_ROW}isTopOrBottomRow(Tt){return Tt.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(Tt){return Tt.type&this.INPUT_ROW}},Tr=new m$,Hp=class{constructor(Tt){this.centerline=this.xPos=this.height=this.width=0,this.constants_=Tt,this.type=Tr.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},wv=class{constructor(Tt){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=Tt,this.type=Tr.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let Tt=this.elements.length-1;0<=Tt;Tt--){const kt=this.elements[Tt];if(Tr.isInput(kt))return kt}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let Tt=0;Tt<this.elements.length;Tt++){const kt=this.elements[Tt];if(Tr.isSpacer(kt))return kt}return null}getLastSpacer(){for(let Tt=this.elements.length-1;0<=Tt;Tt--){const kt=this.elements[Tt];if(Tr.isSpacer(kt))return kt}return null}},yT=class extends wv{constructor(Tt){super(Tt),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Tr.BOTTOM_ROW}hasLeftSquareCorner(Tt){return!!Tt.outputConnection||!!Tt.getNextBlock()}hasRightSquareCorner(Tt){return!0}measure(){let Tt=0,kt=0,Bt=0;for(let zt=0;zt<this.elements.length;zt++){const mn=this.elements[zt];kt+=mn.width,Tr.isSpacer(mn)||(Tr.isNextConnection(mn)?Bt=Math.max(Bt,mn.height):Tt=Math.max(Tt,mn.height))}this.width=Math.max(this.minWidth,kt),this.height=Math.max(this.minHeight,Tt)+Bt,this.descenderHeight=Bt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},z_=class extends Hp{constructor(Tt,kt){super(Tt),this.connectionModel=kt,this.shape=this.constants_.shapeFor(kt),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=Tr.CONNECTION}},$m=class extends z_{constructor(Tt,kt){super(Tt,kt.connection),this.input=kt,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Tr.INPUT,this.align=kt.align,(this.connectedBlock=kt.connection&&kt.connection.targetBlock()?kt.connection.targetBlock():null)?(Tt=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=Tt.width,this.connectedBlockHeight=Tt.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},eS=class extends $m{constructor(Tt,kt){super(Tt,kt),this.height=0,this.type|=Tr.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},H_=class extends Hp{constructor(Tt,kt,Bt){super(Tt),this.field=kt,this.parentInput=Bt,this.isEditable=kt.EDITABLE,this.flipRtl=kt.getFlipRtl(),this.type|=Tr.FIELD,Tt=this.field.getSize(),this.height=Tt.height,this.width=Tt.width}},vT=class extends Hp{constructor(Tt){super(Tt),this.type|=Tr.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},jx=class extends Hp{constructor(Tt,kt){super(Tt),this.icon=kt,this.flipRtl=!1,this.isVisible=kt.isVisible(),this.type|=Tr.ICON,Tt=kt.getCorrectedSize(),this.height=Tt.height,this.width=Tt.width}},Fu=class extends Hp{constructor(Tt,kt){super(Tt),this.type=this.type|Tr.SPACER|Tr.IN_ROW_SPACER,this.width=kt,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},OT=class extends $m{constructor(Tt,kt){super(Tt,kt),this.type|=Tr.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Cv=class extends $m{constructor(Tt,kt){super(Tt,kt),this.type|=Tr.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},bT=class extends wv{constructor(Tt){super(Tt),this.connectedBlockWidths=0,this.type|=Tr.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let Tt=0;for(let kt=0;kt<this.elements.length;kt++){const Bt=this.elements[kt];this.width+=Bt.width,Tr.isInput(Bt)&&Bt instanceof $m&&(Tr.isStatementInput(Bt)&&Bt instanceof Cv?Tt+=Bt.connectedBlockWidth:Tr.isExternalInput(Bt)&&Bt instanceof eS&&Bt.connectedBlockWidth!==0&&(Tt+=Bt.connectedBlockWidth-Bt.connectionWidth)),Tr.isSpacer(Bt)||(this.height=Math.max(this.height,Bt.height))}this.connectedBlockWidths=Tt,this.widthWithConnectedBlocks=this.width+Tt}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Xx=class extends Hp{constructor(Tt){super(Tt),this.type|=Tr.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Yx=class extends z_{constructor(Tt,kt){super(Tt,kt),this.type|=Tr.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Zx=class extends z_{constructor(Tt,kt){super(Tt,kt),this.connectionOffsetX=0,this.type|=Tr.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},qx=class extends z_{constructor(Tt,kt){super(Tt,kt),this.type|=Tr.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Av=class extends Hp{constructor(Tt,kt){super(Tt),this.type=(kt&&kt!=="left"?Tr.RIGHT_ROUND_CORNER:Tr.LEFT_ROUND_CORNER)|Tr.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},ST=class extends wv{constructor(Tt,kt,Bt){super(Tt),this.height=kt,this.width=Bt,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|Tr.SPACER|Tr.BETWEEN_ROW_SPACER,this.elements=[new Fu(this.constants_,Bt)]}measure(){}},kv=class extends Hp{constructor(Tt,kt){super(Tt),this.type=(kt&&kt!=="left"?Tr.RIGHT_SQUARE_CORNER:Tr.LEFT_SQUARE_CORNER)|Tr.CORNER,this.width=this.height=this.constants_.NO_PADDING}},TT=class extends wv{constructor(Tt){super(Tt),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Tr.TOP_ROW}hasLeftSquareCorner(Tt){const kt=(Tt.hat?Tt.hat==="cap":this.constants_.ADD_START_HATS)&&!Tt.outputConnection&&!Tt.previousConnection,Bt=Tt.getPreviousBlock();return!!Tt.outputConnection||kt||(Bt?Bt.getNextBlock()===Tt:!1)}hasRightSquareCorner(Tt){return!0}measure(){let Tt=0,kt=0,Bt=0;for(let zt=0;zt<this.elements.length;zt++){const mn=this.elements[zt];kt+=mn.width,Tr.isSpacer(mn)||(Tr.isHat(mn)&&mn instanceof vT?Bt=Math.max(Bt,mn.ascenderHeight):Tt=Math.max(Tt,mn.height))}this.width=Math.max(this.minWidth,kt),this.height=Math.max(this.minHeight,Tt)+Bt,this.capline=this.ascenderHeight=Bt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Iv=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=gs(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(Tt){this.blockStyles=Object.create(null);const kt=Tt.blockStyles;for(const Bt in kt)this.blockStyles[Bt]=this.validatedBlockStyle_(kt[Bt]);this.setDynamicProperties_(Tt)}setDynamicProperties_(Tt){this.setFontConstants_(Tt),this.setComponentConstants_(Tt),this.ADD_START_HATS=Tt.startHats!==void 0?Tt.startHats:this.ADD_START_HATS}setFontConstants_(Tt){Tt.fontStyle&&Tt.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=Tt.fontStyle.family),Tt.fontStyle&&Tt.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=Tt.fontStyle.weight),Tt.fontStyle&&Tt.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=Tt.fontStyle.size),Tt=hr("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=Tt.height,this.FIELD_TEXT_BASELINE=Tt.baseline}setComponentConstants_(Tt){this.CURSOR_COLOUR=Tt.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=Tt.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=Tt.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(Tt.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(Tt){const kt="auto_"+Tt;return this.blockStyles[kt]||(this.blockStyles[kt]=this.createBlockStyle_(Tt)),{style:this.blockStyles[kt],name:kt}}getBlockStyle(Tt){return this.blockStyles[Tt||""]||(Tt&&Tt.indexOf("auto_")===0?this.getBlockStyleForColour(Tt.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(Tt){return this.validatedBlockStyle_({colourPrimary:Tt})}validatedBlockStyle_(Tt){const kt={};return Tt&&Object.assign(kt,Tt),Tt=Pu(kt.colourPrimary||"#000"),kt.colourPrimary=Tt.hex,kt.colourSecondary=kt.colourSecondary?Pu(kt.colourSecondary).hex:this.generateSecondaryColour_(kt.colourPrimary),kt.colourTertiary=kt.colourTertiary?Pu(kt.colourTertiary).hex:this.generateTertiaryColour_(kt.colourPrimary),kt.hat=kt.hat||"",kt}generateSecondaryColour_(Tt){return Mu("#fff",Tt,.6)||Tt}generateTertiaryColour_(Tt){return Mu("#fff",Tt,.3)||Tt}dispose(){this.embossFilter_&&fr(this.embossFilter_),this.disabledPattern_&&fr(this.disabledPattern_),this.debugFilter_&&fr(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const Tt=this.JAGGED_TEETH_HEIGHT,kt=this.JAGGED_TEETH_WIDTH,Bt=Fm([To(kt,Tt/4),To(2*-kt,Tt/2),To(kt,Tt/4)]);return{height:Tt,width:kt,path:Bt}}makeStartHat(){const Tt=this.START_HAT_HEIGHT,kt=this.START_HAT_WIDTH,Bt=lu("c",[To(30,-Tt),To(70,-Tt),To(kt,0)]);return{height:Tt,width:kt,path:Bt}}makePuzzleTab(){function Tt(En){En=En?-1:1;const Hn=-En;var pr=Bt/2;const Kr=pr+2.5,lo=pr+.5,es=To(-kt,En*pr);return pr=To(kt,En*pr),lu("c",[To(0,En*Kr),To(-kt,Hn*lo),es])+lu("s",[To(kt,2.5*Hn),pr])}const kt=this.TAB_WIDTH,Bt=this.TAB_HEIGHT,zt=Tt(!0),mn=Tt(!1);return{type:this.SHAPES.PUZZLE,width:kt,height:Bt,pathDown:mn,pathUp:zt}}makeNotch(){function Tt(Hn){return Fm([To(Hn*zt,Bt),To(3*Hn,0),To(Hn*zt,-Bt)])}const kt=this.NOTCH_WIDTH,Bt=this.NOTCH_HEIGHT,zt=(kt-3)/2,mn=Tt(1),En=Tt(-1);return{type:this.SHAPES.NOTCH,width:kt,height:Bt,pathLeft:mn,pathRight:En}}makeInsideCorners(){const Tt=this.CORNER_RADIUS,kt=Ls("a","0 0,0",Tt,To(-Tt,Tt)),Bt=Ls("a","0 0,0",Tt,To(Tt,Tt));return{width:Tt,height:Tt,pathTop:kt,pathBottom:Bt}}makeOutsideCorners(){const Tt=this.CORNER_RADIUS,kt=gs(0,Tt)+Ls("a","0 0,1",Tt,To(Tt,-Tt)),Bt=Ls("a","0 0,1",Tt,To(Tt,Tt)),zt=Ls("a","0 0,1",Tt,To(-Tt,-Tt)),mn=Ls("a","0 0,1",Tt,To(-Tt,Tt));return{topLeft:kt,topRight:Bt,bottomRight:mn,bottomLeft:zt,rightHeight:Tt}}shapeFor(Tt){switch(Tt.type){case po.INPUT_VALUE:case po.OUTPUT_VALUE:return this.PUZZLE_TAB;case po.PREVIOUS_STATEMENT:case po.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(Tt,kt,Bt){this.injectCSS_(kt,Bt),this.defs_=Cn(Er.DEFS,{},Tt),Tt=Cn(Er.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),Cn(Er.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},Tt),kt=Cn(Er.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},Tt),Cn(Er.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},kt),Cn(Er.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},Tt),Cn(Er.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},Tt),this.embossFilterId=Tt.id,this.embossFilter_=Tt,Tt=Cn(Er.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),Cn(Er.RECT,{width:10,height:10,fill:"#aaa"},Tt),Cn(Er.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},Tt),this.disabledPatternId=Tt.id,this.disabledPattern_=Tt,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const Tt=Cn(Er.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),kt=Cn(Er.FECOMPONENTTRANSFER,{result:"outBlur"},Tt);Cn(Er.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},kt),Cn(Er.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},Tt),Cn(Er.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},Tt),this.debugFilterId=Tt.id,this.debugFilter_=Tt}}injectCSS_(Tt,kt){kt=this.getCSS_(kt),Tt="blockly-renderer-style-"+Tt,this.cssNode_=document.getElementById(Tt);const Bt=kt.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=Bt:(kt=document.createElement("style"),kt.id=Tt,Tt=document.createTextNode(Bt),kt.appendChild(Tt),document.head.insertBefore(kt,document.head.firstChild),this.cssNode_=kt)}getCSS_(Tt){return[`${Tt} .blocklyText, `,`${Tt} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${Tt} .blocklyText {`,"fill: #fff;","}",`${Tt} .blocklyNonEditableText>rect,`,`${Tt} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${Tt} .blocklyNonEditableText>text,`,`${Tt} .blocklyEditableText>text {`,"fill: #000;","}",`${Tt} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${Tt} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${Tt} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${Tt} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${Tt} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${Tt} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${Tt} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${Tt} .blocklyReplaceable .blocklyPathLight,`,`${Tt} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${Tt} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Kx=!1,Gu=class{constructor(Tt){this.constants=Tt,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let Tt=0;Tt<this.debugElements_.length;Tt++)fr(this.debugElements_[Tt]);this.debugElements_=[]}drawSpacerRow(Tt,kt,Bt){if(Gu.config.rowSpacers){var zt=Math.abs(Tt.height),mn=0>Tt.height;mn&&(kt-=zt),this.debugElements_.push(Cn(Er.RECT,{class:"rowSpacerRect blockRenderDebug",x:Bt?-(Tt.xPos+Tt.width):Tt.xPos,y:kt,width:Tt.width,height:zt,stroke:mn?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(Tt,kt,Bt){if(Gu.config.elemSpacers){kt=Math.abs(Tt.width);var zt=0>Tt.width,mn=zt?Tt.xPos-kt:Tt.xPos;Bt&&(mn=-(mn+kt)),this.debugElements_.push(Cn(Er.RECT,{class:"elemSpacerRect blockRenderDebug",x:mn,y:Tt.centerline-Tt.height/2,width:kt,height:Tt.height,stroke:"pink",fill:zt?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(Tt,kt){if(Gu.config.elems){let Bt=Tt.xPos;kt&&(Bt=-(Bt+Tt.width)),kt=Tt.centerline-Tt.height/2,this.debugElements_.push(Cn(Er.RECT,{class:"rowRenderingRect blockRenderDebug",x:Bt,y:kt,width:Tt.width,height:Tt.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),Tr.isField(Tt)&&Tt instanceof H_&&Tt.field instanceof dt.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(Cn(Er.RECT,{class:"rowRenderingRect blockRenderDebug",x:Bt,y:kt+this.constants.FIELD_TEXT_BASELINE,width:Tt.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}Tr.isInput(Tt)&&Tt instanceof $m&&Gu.config.connections&&this.drawConnection(Tt.connectionModel)}drawConnection(Tt){if(Gu.config.connections){var kt="",Bt=0,zt="";Tt.type===po.INPUT_VALUE?(Bt=4,kt="magenta",zt="none"):Tt.type===po.OUTPUT_VALUE?(Bt=2,zt=kt="magenta"):Tt.type===po.NEXT_STATEMENT?(Bt=4,kt="goldenrod",zt="none"):Tt.type===po.PREVIOUS_STATEMENT&&(Bt=2,zt=kt="goldenrod"),this.debugElements_.push(Cn(Er.CIRCLE,{class:"blockRenderDebug",cx:Tt.getOffsetInBlock().x,cy:Tt.getOffsetInBlock().y,r:Bt,fill:zt,stroke:kt},this.svgRoot_))}}drawRenderedRow(Tt,kt,Bt){Gu.config.rows&&(this.debugElements_.push(Cn(Er.RECT,{class:"elemRenderingRect blockRenderDebug",x:Bt?-(Tt.xPos+Tt.width):Tt.xPos,y:Tt.yPos,width:Tt.width,height:Tt.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),Tr.isTopOrBottomRow(Tt)||Gu.config.connectedBlockBounds&&this.debugElements_.push(Cn(Er.RECT,{class:"connectedBlockWidth blockRenderDebug",x:Bt?-(Tt.xPos+Tt.widthWithConnectedBlocks):Tt.xPos,y:Tt.yPos,width:Tt.widthWithConnectedBlocks,height:Tt.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(Tt,kt,Bt){for(let zt=0;zt<Tt.elements.length;zt++){const mn=Tt.elements[zt];mn?Tr.isSpacer(mn)?this.drawSpacerElem(mn,Tt.height,Bt):this.drawRenderedElem(mn,Bt):console.warn("A row has an undefined or null element.",Tt,mn)}this.drawRenderedRow(Tt,kt,Bt)}drawBoundingBox(Tt){if(Gu.config.blockBounds){var kt=Tt.RTL?-Tt.width:0;this.debugElements_.push(Cn(Er.RECT,{class:"blockBoundingBox blockRenderDebug",x:kt,y:0,width:Tt.width,height:Tt.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Gu.config.connectedBlockBounds&&(kt=Tt.RTL?-Tt.widthWithChildren:0,this.debugElements_.push(Cn(Er.RECT,{class:"blockRenderDebug",x:kt,y:0,width:Tt.widthWithChildren,height:Tt.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(Tt,kt){this.clearElems(),this.svgRoot_=Tt.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let Bt=0;for(let zt=0;zt<kt.rows.length;zt++){const mn=kt.rows[zt];Tr.isBetweenRowSpacer(mn)?this.drawSpacerRow(mn,Bt,kt.RTL):this.drawRowWithElements(mn,Bt,kt.RTL),Bt+=mn.height}Tt.previousConnection&&this.drawConnection(Tt.previousConnection),Tt.nextConnection&&this.drawConnection(Tt.nextConnection),Tt.outputConnection&&this.drawConnection(Tt.outputConnection),kt.rightSide&&this.drawRenderedElem(kt.rightSide,kt.RTL),this.drawBoundingBox(kt),this.drawRender(Tt.pathObject.svgPath)}drawRender(Tt){Gu.config.render&&(Tt.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){Tt.setAttribute("filter","")},100))}};Gu.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var Rv=class{constructor(Tt,kt){this.inlinePath_=this.outlinePath_="",this.block_=Tt,this.info_=kt,this.topLeft_=Tt.getRelativeToSurfaceXY(),this.constants_=kt.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),cp()){let Tt;(Tt=this.block_.renderingDebugger)==null||Tt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let Tt=0,kt;kt=this.info_.hiddenIcons[Tt];Tt++){let Bt;(Bt=kt.icon.iconGroup_)==null||Bt.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let Tt=1;Tt<this.info_.rows.length-1;Tt++){const kt=this.info_.rows[Tt];kt.hasJaggedEdge?this.drawJaggedEdge_(kt):kt.hasStatement?this.drawStatementInput_(kt):kt.hasExternalInput?this.drawValueInput_(kt):this.drawRightSideRow_(kt)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const Tt=this.info_.topRow,kt=Tt.elements;this.positionPreviousConnection_(),this.outlinePath_+=gs(Tt.xPos,this.info_.startY);for(let Bt=0,zt;zt=kt[Bt];Bt++)Tr.isLeftRoundedCorner(zt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Tr.isRightRoundedCorner(zt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Tr.isPreviousConnection(zt)&&zt instanceof z_?this.outlinePath_+=zt.shape.pathLeft:Tr.isHat(zt)?this.outlinePath_+=this.constants_.START_HAT.path:Tr.isSpacer(zt)&&(this.outlinePath_+=uo("h",zt.width));this.outlinePath_+=uo("v",Tt.height)}drawJaggedEdge_(Tt){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+uo("v",Tt.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(Tt){const kt=Tt.getLastInput();this.positionExternalValueConnection_(Tt);const Bt=_c(kt.shape)?kt.shape.pathDown(kt.height):kt.shape.pathDown;this.outlinePath_+=uo("H",kt.xPos+kt.width)+Bt+uo("v",Tt.height-kt.connectionHeight)}drawStatementInput_(Tt){var kt=Tt.getLastInput();if(kt){var Bt=kt.xPos+kt.notchOffset+kt.shape.width;kt=kt.shape.pathRight+uo("h",-(kt.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var zt=Tt.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=uo("H",Bt)+kt+uo("v",zt)+this.constants_.INSIDE_CORNERS.pathBottom+uo("H",Tt.xPos+Tt.width),this.positionStatementInputConnection_(Tt)}}drawRightSideRow_(Tt){this.outlinePath_+=uo("V",Tt.yPos+Tt.height)}drawBottom_(){const Tt=this.info_.bottomRow,kt=Tt.elements;this.positionNextConnection_();let Bt=0,zt="";for(let mn=kt.length-1,En;En=kt[mn];mn--)Tr.isNextConnection(En)&&En instanceof z_?zt+=En.shape.pathRight:Tr.isLeftSquareCorner(En)?zt+=uo("H",Tt.xPos):Tr.isLeftRoundedCorner(En)?zt+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Tr.isRightRoundedCorner(En)?(zt+=this.constants_.OUTSIDE_CORNERS.bottomRight,Bt=this.constants_.OUTSIDE_CORNERS.rightHeight):Tr.isSpacer(En)&&(zt+=uo("h",-1*En.width));this.outlinePath_+=uo("V",Tt.baseline-Bt),this.outlinePath_+=zt}drawLeft_(){var Tt=this.info_.outputConnection;if(this.positionOutputConnection_(),Tt){const kt=Tt.connectionOffsetY+Tt.height;Tt=_c(Tt.shape)?Tt.shape.pathUp(Tt.height):Tt.shape.pathUp,this.outlinePath_+=uo("V",kt)+Tt}this.outlinePath_+="z"}drawInternals_(){for(let Tt=0,kt;kt=this.info_.rows[Tt];Tt++)for(let Bt=0,zt;zt=kt.elements[Bt];Bt++)Tr.isInlineInput(zt)?this.drawInlineInput_(zt):(Tr.isIcon(zt)||Tr.isField(zt))&&this.layoutField_(zt)}layoutField_(Tt){const kt=Tr.isField(Tt)?Tt.field.getSvgRoot():Tt.icon.iconGroup_,Bt=Tt.centerline-Tt.height/2;let zt=Tt.xPos,mn="";this.info_.RTL&&(zt=-(zt+Tt.width),Tt.flipRtl&&(zt+=Tt.width,mn="scale(-1 1)")),Tr.isIcon(Tt)?(kt.setAttribute("display","block"),kt.setAttribute("transform","translate("+zt+","+Bt+")"),Tt.icon.computeIconLocation()):kt.setAttribute("transform","translate("+zt+","+Bt+")"+mn),this.info_.isInsertionMarker&&kt.setAttribute("display","none")}drawInlineInput_(Tt){const kt=Tt.width,Bt=Tt.height,zt=Tt.connectionOffsetY,mn=Tt.connectionHeight+zt;this.inlinePath_+=xa(Tt.xPos+Tt.connectionWidth,Tt.centerline-Bt/2)+uo("v",zt)+Tt.shape.pathDown+uo("v",Bt-mn)+uo("h",kt-Tt.connectionWidth)+uo("v",-Bt)+"z",this.positionInlineInputConnection_(Tt)}positionInlineInputConnection_(Tt){const kt=Tt.centerline-Tt.height/2;if(Tt.connectionModel){let Bt=Tt.xPos+Tt.connectionWidth+Tt.connectionOffsetX;this.info_.RTL&&(Bt*=-1),Tt.connectionModel.setOffsetInBlock(Bt,kt+Tt.connectionOffsetY)}}positionStatementInputConnection_(Tt){const kt=Tt.getLastInput();if(kt!=null&&kt.connectionModel){let Bt=Tt.xPos+Tt.statementEdge+kt.notchOffset;this.info_.RTL&&(Bt*=-1),kt.connectionModel.setOffsetInBlock(Bt,Tt.yPos)}}positionExternalValueConnection_(Tt){const kt=Tt.getLastInput();if(kt&&kt.connectionModel){let Bt=Tt.xPos+Tt.width;this.info_.RTL&&(Bt*=-1),kt.connectionModel.setOffsetInBlock(Bt,Tt.yPos)}}positionPreviousConnection_(){const Tt=this.info_.topRow;if(Tt.connection){const kt=Tt.xPos+Tt.notchOffset;Tt.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-kt:kt,0)}}positionNextConnection_(){const Tt=this.info_.bottomRow;if(Tt.connection){const kt=Tt.connection,Bt=kt.xPos;kt.connectionModel.setOffsetInBlock(this.info_.RTL?-Bt:Bt,Tt.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const Tt=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-Tt:Tt,this.info_.outputConnection.connectionOffsetY)}}},q0=class{constructor(Tt,kt){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=Tt,this.block_=kt,this.constants_=this.renderer_.getConstants(),this.outputConnection=kt.outputConnection?new Zx(this.constants_,kt.outputConnection):null,this.isInline=kt.getInputsInline()&&!kt.isCollapsed(),this.isCollapsed=kt.isCollapsed(),this.isInsertionMarker=kt.isInsertionMarker(),this.RTL=kt.RTL,this.topRow=new TT(this.constants_),this.bottomRow=new yT(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let Tt=new bT(this.constants_);this.inputRows.push(Tt);var kt=this.block_.getIcons();for(let Bt=0,zt;zt=kt[Bt];Bt++){const mn=new jx(this.constants_,zt);this.isCollapsed&&zt.collapseHidden?this.hiddenIcons.push(mn):Tt.elements.push(mn)}kt=void 0;for(let Bt=0,zt;zt=this.block_.inputList[Bt];Bt++)if(zt.isVisible()){this.shouldStartNewRow_(zt,kt)&&(this.rows.push(Tt),Tt=new bT(this.constants_),this.inputRows.push(Tt));for(let mn=0,En;En=zt.fieldRow[mn];mn++)Tt.elements.push(new H_(this.constants_,En,zt));this.addInput_(zt,Tt),kt=zt}this.isCollapsed&&(Tt.hasJaggedEdge=!0,Tt.elements.push(new Xx(this.constants_))),(Tt.elements.length||Tt.hasDummyInput)&&this.rows.push(Tt),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var Tt=!!this.block_.previousConnection;const kt=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!Tt;let Bt=this.topRow.hasLeftSquareCorner(this.block_)?kv:Av;this.topRow.elements.push(new Bt(this.constants_)),kt?(Tt=new vT(this.constants_),this.topRow.elements.push(Tt),this.topRow.capline=Tt.ascenderHeight):Tt&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new qx(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===Uo.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,Bt=this.topRow.hasRightSquareCorner(this.block_)?kv:Av,this.topRow.elements.push(new Bt(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Uo.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new kv(this.constants_)):this.bottomRow.elements.push(new Av(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Yx(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new kv(this.constants_,"right")):this.bottomRow.elements.push(new Av(this.constants_,"right"))}addInput_(Tt,kt){this.isInline&&Tt.type===Uo.VALUE?(kt.elements.push(new OT(this.constants_,Tt)),kt.hasInlineInput=!0):Tt.type===Uo.STATEMENT?(kt.elements.push(new Cv(this.constants_,Tt)),kt.hasStatement=!0):Tt.type===Uo.VALUE?(kt.elements.push(new eS(this.constants_,Tt)),kt.hasExternalInput=!0):Tt.type===Uo.DUMMY&&(kt.minHeight=Math.max(kt.minHeight,Tt.getSourceBlock()&&Tt.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),kt.hasDummyInput=!0),kt.align===null&&(kt.align=Tt.align)}shouldStartNewRow_(Tt,kt){return kt?Tt.type===Uo.STATEMENT||kt.type===Uo.STATEMENT?!0:Tt.type===Uo.VALUE||Tt.type===Uo.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let Tt=0,kt;kt=this.rows[Tt];Tt++){const Bt=kt.elements;if(kt.elements=[],kt.startsWithElemSpacer()&&kt.elements.push(new Fu(this.constants_,this.getInRowSpacing_(null,Bt[0]))),Bt.length){for(let zt=0;zt<Bt.length-1;zt++){kt.elements.push(Bt[zt]);const mn=this.getInRowSpacing_(Bt[zt],Bt[zt+1]);kt.elements.push(new Fu(this.constants_,mn))}kt.elements.push(Bt[Bt.length-1]),kt.endsWithElemSpacer()&&kt.elements.push(new Fu(this.constants_,this.getInRowSpacing_(Bt[Bt.length-1],null)))}}}getInRowSpacing_(Tt,kt){if(!Tt&&kt&&Tr.isStatementInput(kt))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(Tt&&Tr.isInput(Tt)&&!kt){if(Tr.isExternalInput(Tt))return this.constants_.NO_PADDING;if(Tr.isInlineInput(Tt))return this.constants_.LARGE_PADDING;if(Tr.isStatementInput(Tt))return this.constants_.NO_PADDING}return Tt&&Tr.isLeftSquareCorner(Tt)&&kt&&(Tr.isPreviousConnection(kt)||Tr.isNextConnection(kt))?kt.notchOffset:Tt&&Tr.isLeftRoundedCorner(Tt)&&kt&&(Tr.isPreviousConnection(kt)||Tr.isNextConnection(kt))?kt.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let Tt=0,kt=0,Bt=0;for(let mn=0,En;En=this.rows[mn];mn++){if(En.measure(),kt=Math.max(kt,En.width),En.hasStatement){var zt=En.getLastInput();let Hn,pr;zt=En.width-((pr=(Hn=zt)==null?void 0:Hn.width)!=null?pr:0),Tt=Math.max(Tt,zt)}Bt=Math.max(Bt,En.widthWithConnectedBlocks)}this.statementEdge=Tt,this.width=kt;for(let mn=0,En;En=this.rows[mn];mn++)En.hasStatement&&(En.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(kt,Bt),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let kt=0,Bt;Bt=this.rows[kt];kt++)if(Bt.hasStatement)this.alignStatementRow_(Bt);else{var Tt=Bt.width;Tt=this.getDesiredRowWidth_(Bt)-Tt,0<Tt&&this.addAlignmentPadding_(Bt,Tt),Tr.isTopOrBottomRow(Bt)&&(Bt.widthWithConnectedBlocks=Bt.width)}}getDesiredRowWidth_(Tt){return this.width-this.startX}addAlignmentPadding_(Tt,kt){const Bt=Tt.getFirstSpacer(),zt=Tt.getLastSpacer();if((Tt.hasExternalInput||Tt.hasStatement)&&(Tt.widthWithConnectedBlocks+=kt),Tt.align===dt.Align$$module$build$src$core$input.LEFT&&zt)zt.width+=kt;else if(Tt.align===dt.Align$$module$build$src$core$input.CENTRE&&Bt&&zt)Bt.width+=kt/2,zt.width+=kt/2;else if(Tt.align===dt.Align$$module$build$src$core$input.RIGHT&&Bt)Bt.width+=kt;else if(zt)zt.width+=kt;else return;Tt.width+=kt}alignStatementRow_(Tt){const kt=Tt.getLastInput();if(kt){var Bt=Tt.width-kt.width,zt=this.statementEdge;Bt=zt-Bt,0<Bt&&this.addAlignmentPadding_(Tt,Bt),Bt=Tt.width,zt=this.getDesiredRowWidth_(Tt),kt.width+=zt-Bt,kt.height=Math.max(kt.height,Tt.height),Tt.width+=zt-Bt,Tt.widthWithConnectedBlocks=Math.max(Tt.width,this.statementEdge+Tt.connectedBlockWidths)}}addRowSpacing_(){const Tt=this.rows;this.rows=[];for(let kt=0;kt<Tt.length;kt++)this.rows.push(Tt[kt]),kt!==Tt.length-1&&this.rows.push(this.makeSpacerRow_(Tt[kt],Tt[kt+1]))}makeSpacerRow_(Tt,kt){var Bt=this.getSpacerRowHeight_(Tt,kt);const zt=this.getSpacerRowWidth_(Tt,kt);return Bt=new ST(this.constants_,Bt,zt),Tt.hasStatement&&(Bt.followsStatement=!0),kt.hasStatement&&(Bt.precedesStatement=!0),Bt}getSpacerRowWidth_(Tt,kt){return this.width-this.startX}getSpacerRowHeight_(Tt,kt){return this.constants_.MEDIUM_PADDING}getElemCenterline_(Tt,kt){return Tr.isSpacer(kt)?Tt.yPos+kt.height/2:Tr.isBottomRow(Tt)?(Tt=Tt.yPos+Tt.height-Tt.descenderHeight,Tr.isNextConnection(kt)?Tt+kt.height/2:Tt-kt.height/2):Tr.isTopRow(Tt)?Tr.isHat(kt)?Tt.capline-kt.height/2:Tt.capline+kt.height/2:Tt.yPos+Tt.height/2}recordElemPositions_(Tt){let kt=Tt.xPos;for(let Bt=0,zt;zt=Tt.elements[Bt];Bt++)Tr.isSpacer(zt)&&(zt.height=Tt.height),zt.xPos=kt,zt.centerline=this.getElemCenterline_(Tt,zt),kt+=zt.width}finalize_(){let Tt=0,kt=0;for(let Bt=0,zt;zt=this.rows[Bt];Bt++)zt.yPos=kt,zt.xPos=this.startX,kt+=zt.height,Tt=Math.max(Tt,zt.widthWithConnectedBlocks),this.recordElemPositions_(zt);if(this.outputConnection&&this.block_.nextConnection){const Bt=this.block_.nextConnection.targetBlock();Bt&&(Tt=Math.max(Tt,Bt.getHeightWidth().width))}this.widthWithChildren=Tt+this.startX,this.height=kt,this.startY=this.topRow.capline,this.bottomRow.baseline=kt-this.bottomRow.descenderHeight}},xT=class extends pp{constructor(Tt,kt,Bt,zt){let mn=Tt?Tt.workspace.id:void 0;zt&&zt.getType()===Jr.types.WORKSPACE&&(mn=zt.getLocation().id),super(mn),this.type=Ky,this.blockId=Tt==null?void 0:Tt.id,this.oldNode=Bt||void 0,this.newNode=zt,this.isCursor=kt}toJson(){const Tt=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return Tt.isCursor=this.isCursor,Tt.blockId=this.blockId,Tt.oldNode=this.oldNode,Tt.newNode=this.newNode,Tt}fromJson(Tt){vt("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.isCursor=Tt.isCursor,this.blockId=Tt.blockId,this.oldNode=Tt.oldNode,this.newNode=Tt.newNode}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new xT),kt.isCursor=Tt.isCursor,kt.blockId=Tt.blockId,kt.oldNode=Tt.oldNode,kt.newNode=Tt.newNode,kt}};So(ro.EVENT,Ky,xT);var g$="blocklyCursor",_$="blocklyMarker",y$=.75,ET=class{constructor(Tt,kt,Bt){this.workspace=Tt,this.marker=Bt,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=kt,Tt=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=Bt.colour||Tt}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const Tt=this.isCursor()?g$:_$;return this.svgGroup_=Cn(Er.G,{class:Tt}),this.createDomInternal_(),this.svgGroup_}setParent_(Tt){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),Tt.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),Tt.setMarkerSvg(this.getSvgRoot())),this.parent_=Tt}draw(Tt,kt){if(kt){this.constants_=this.workspace.getRenderer().getConstants();var Bt=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||Bt,this.applyColour_(kt),this.showAtLocation_(kt),this.fireMarkerEvent_(Tt,kt),Tt=this.currentMarkerSvg.childNodes[0],Tt!==void 0&&Tt.beginElement&&Tt.beginElement()}else this.hide()}showAtLocation_(Tt){const kt=Tt.getLocation().type;Tt.getType()===Jr.types.BLOCK?this.showWithBlock_(Tt):Tt.getType()===Jr.types.OUTPUT?this.showWithOutput_(Tt):kt===po.INPUT_VALUE?this.showWithInput_(Tt):kt===po.NEXT_STATEMENT?this.showWithNext_(Tt):Tt.getType()===Jr.types.PREVIOUS?this.showWithPrevious_(Tt):Tt.getType()===Jr.types.FIELD?this.showWithField_(Tt):Tt.getType()===Jr.types.WORKSPACE?this.showWithCoordinates_(Tt):Tt.getType()===Jr.types.STACK&&this.showWithStack_(Tt)}showWithBlockPrevOutput_(Tt){Tt=Tt.getSourceBlock();const kt=Tt.width;var Bt=Tt.height,zt=Bt*y$;const mn=this.constants_.CURSOR_BLOCK_PADDING;Tt.previousConnection?(Bt=this.constants_.shapeFor(Tt.previousConnection),this.positionPrevious_(kt,mn,zt,Bt)):Tt.outputConnection?(zt=this.constants_.shapeFor(Tt.outputConnection),this.positionOutput_(kt,Bt,zt)):this.positionBlock_(kt,mn,zt),this.setParent_(Tt),this.showCurrent_()}showWithBlock_(Tt){this.showWithBlockPrevOutput_(Tt)}showWithPrevious_(Tt){this.showWithBlockPrevOutput_(Tt)}showWithOutput_(Tt){this.showWithBlockPrevOutput_(Tt)}showWithCoordinates_(Tt){var kt=Tt.getWsCoordinate();Tt=kt.x,kt=kt.y,this.workspace.RTL&&(Tt-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(Tt,kt,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(Tt){Tt=Tt.getLocation();const kt=Tt.getSize().width,Bt=Tt.getSize().height;this.positionRect_(0,0,kt,Bt),this.setParent_(Tt),this.showCurrent_()}showWithInput_(Tt){Tt=Tt.getLocation();const kt=Tt.getSourceBlock();this.positionInput_(Tt),this.setParent_(kt),this.showCurrent_()}showWithNext_(Tt){var kt=Tt.getLocation();Tt=kt.getSourceBlock();let Bt=0;kt=kt.getOffsetInBlock().y;const zt=Tt.getHeightWidth().width;this.workspace.RTL&&(Bt=-zt),this.positionLine_(Bt,kt,zt),this.setParent_(Tt),this.showCurrent_()}showWithStack_(Tt){Tt=Tt.getLocation();var kt=Tt.getHeightWidth();const Bt=kt.width+this.constants_.CURSOR_STACK_PADDING;kt=kt.height+this.constants_.CURSOR_STACK_PADDING;const zt=-this.constants_.CURSOR_STACK_PADDING/2,mn=-this.constants_.CURSOR_STACK_PADDING/2;let En=zt;this.workspace.RTL&&(En=-(Bt+zt)),this.positionRect_(En,mn,Bt,kt),this.setParent_(Tt),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(Tt,kt,Bt){if(Tt=gs(-kt,Bt)+uo("V",-kt)+uo("H",Tt+2*kt)+uo("V",Bt),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",Tt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(Tt){const kt=Tt.getOffsetInBlock().x,Bt=Tt.getOffsetInBlock().y;Tt=xa(0,0)+this.constants_.shapeFor(Tt).pathDown,this.markerInput_.setAttribute("d",Tt),this.markerInput_.setAttribute("transform","translate("+kt+","+Bt+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(Tt,kt,Bt){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${Tt}`),this.markerSvgLine_.setAttribute("y",`${kt}`),this.markerSvgLine_.setAttribute("width",`${Bt}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(Tt,kt,Bt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");Tt=gs(Tt,0)+uo("h",-(Tt-Bt.width))+uo("v",this.constants_.TAB_OFFSET_FROM_TOP)+Bt.pathDown+uo("V",kt)+uo("H",Tt),this.markerBlock_.setAttribute("d",Tt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(Tt,kt,Bt,zt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");Tt=gs(-kt,Bt)+uo("V",-kt)+uo("H",this.constants_.NOTCH_OFFSET_LEFT)+zt.pathLeft+uo("H",Tt+2*kt)+uo("V",Bt),this.markerBlock_.setAttribute("d",Tt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(Tt,kt,Bt,zt){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${Tt}`),this.markerSvgRect_.setAttribute("y",`${kt}`),this.markerSvgRect_.setAttribute("width",`${Bt}`),this.markerSvgRect_.setAttribute("height",`${zt}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(Tt){Tt.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(Tt,kt){const Bt=kt.getSourceBlock();Tt=new(no(Ky))(Bt,this.isCursor(),Tt,kt),to(Tt)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Cn(Er.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Cn(Er.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=Cn(Er.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=Cn(Er.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=Cn(Er.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const Tt=this.getBlinkProperties_();Cn(Er.ANIMATE,Tt,this.markerSvgLine_),Cn(Er.ANIMATE,Tt,this.markerInput_),Cn(Er.ANIMATE,Object.assign({},Tt,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(Tt){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(Tt=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",Tt),this.markerInput_.firstElementChild.setAttribute("values",Tt),this.markerBlock_.firstElementChild.setAttribute("values",Tt))}dispose(){this.svgGroup_&&fr(this.svgGroup_)}},tS=class{constructor(Tt,kt,Bt){this.markerSvg=this.cursorSvg=null,this.constants=Bt,this.style=kt,this.svgRoot=Tt,this.svgPath=Cn(Er.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(Tt){this.svgPath.setAttribute("d",Tt)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(Tt){Tt?(this.svgRoot.appendChild(Tt),this.cursorSvg=Tt):this.cursorSvg=null}setMarkerSvg(Tt){Tt?(this.cursorSvg?this.svgRoot.insertBefore(Tt,this.cursorSvg):this.svgRoot.appendChild(Tt),this.markerSvg=Tt):this.markerSvg=null}applyColour(Tt){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(Tt.isShadow()),this.updateDisabled_(!Tt.isEnabled()||Tt.getInheritedDisabled())}setStyle(Tt){this.style=Tt}setClass_(Tt,kt){Tt&&(kt?tr(this.svgRoot,Tt):Zn(this.svgRoot,Tt))}updateHighlighted(Tt){Tt?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(Tt){Tt&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(Tt){this.setClass_("blocklyDisabled",Tt),Tt&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(Tt){this.setClass_("blocklySelected",Tt)}updateDraggingDelete(Tt){this.setClass_("blocklyDraggingDelete",Tt)}updateInsertionMarker(Tt){this.setClass_("blocklyInsertionMarker",Tt)}updateMovable(Tt){this.setClass_("blocklyDraggable",Tt)}updateReplacementFade(Tt){this.setClass_("blocklyReplaceable",Tt)}updateShapeForInputHighlight(Tt,kt){}},Jx="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Uu=class{constructor(Tt){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,An(Tt),this.topBlock=Tt,this.workspace=Tt.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Fo();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{_i()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Fo(),this.hidePreview(),_i();var{local:Tt,closest:kt}=this.activeCandidate;if(Tt.connect(kt),this.topBlock.rendered){const Bt=Tt.isSuperior()?kt:Tt;_h(Bt.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(Tt,kt){const Bt=this.getCandidate(Tt);((this.wouldDeleteBlock=this.shouldDelete(!!Bt,kt))||this.shouldUpdatePreviews(Bt,Tt))&&(Fo(),this.maybeHidePreview(Bt),this.maybeShowPreview(Bt),_i())}createMarkerBlock(Tt){var kt=Tt.type;Fo();let Bt;try{if(Bt=this.workspace.newBlock(kt),Bt.setInsertionMarker(!0),Tt.saveExtraState){var zt=Tt.saveExtraState();zt&&Bt.loadExtraState&&Bt.loadExtraState(zt)}else if(Tt.mutationToDom){const mn=Tt.mutationToDom();mn&&Bt.domToMutation&&Bt.domToMutation(mn)}for(kt=0;kt<Tt.inputList.length;kt++){const mn=Tt.inputList[kt];if(mn.name===_v)continue;const En=Bt.inputList[kt];if(!En)throw Error(Jx.replace("%1","an input"));for(zt=0;zt<mn.fieldRow.length;zt++){const Hn=mn.fieldRow[zt],pr=En.fieldRow[zt];if(!pr)throw Error(Jx.replace("%1","a field"));pr.setValue(Hn.getValue())}}Bt.setCollapsed(Tt.isCollapsed()),Bt.setInputsInline(Tt.getInputsInline()),Bt.initSvg(),Bt.getSvgRoot().setAttribute("visibility","hidden")}finally{_i()}return Bt}initAvailableConnections(){const Tt=this.topBlock.getConnections_(!1),kt=this.topBlock.lastConnectionInStack(!0);if(kt&&kt!==this.topBlock.nextConnection){if(Tt.push(kt),this.lastOnStack=kt,this.lastMarker){Fo();try{this.lastMarker.dispose()}finally{_i()}}this.lastMarker=this.createMarkerBlock(kt.getSourceBlock())}return Tt}shouldUpdatePreviews(Tt,kt){if(!Tt)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:Bt,closest:zt}=this.activeCandidate;if(zt===Tt.closest&&Bt===Tt.local)return!1;const mn=Bt.x+kt.x-zt.x;return kt=Bt.y+kt.y-zt.y,Tt.radius<Math.sqrt(mn*mn+kt*kt)-dt.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(Tt){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let kt=this.getStartRadius(),Bt=null;for(let zt=0;zt<this.availableConnections.length;zt++){const mn=this.availableConnections[zt],En=mn.closest(kt,Tt);En.connection&&(Bt={closest:En.connection,local:mn,radius:En.radius},kt=En.radius)}return Bt}getStartRadius(){return this.activeCandidate?dt.config$$module$build$src$core$config.connectingSnapRadius:dt.config$$module$build$src$core$config.snapRadius}shouldDelete(Tt,kt){return kt&&this.workspace.getComponentManager().hasCapability(kt.id,Dl.Capability.DELETE_AREA)?kt.wouldDelete(this.topBlock,Tt):!1}maybeShowPreview(Tt){if(!this.wouldDeleteBlock&&Tt){var kt=Tt.closest,Bt;kt===((Bt=this.activeCandidate)==null?void 0:Bt.closest)||kt.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=Tt,this.showPreview(this.activeCandidate))}}showPreview(Tt){const kt=this.workspace.getRenderer();switch(kt.getConnectionPreviewMethod(Tt.closest,Tt.local,this.topBlock)){case Uu.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(Tt);break;case Uu.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(Tt);break;case Uu.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(Tt)}kt.shouldHighlightConnection(Tt.closest)&&Tt.closest.highlight()}maybeHidePreview(Tt){if(!Tt)this.hidePreview();else if(this.activeCandidate){const kt=this.activeCandidate.local!==Tt.local;(this.activeCandidate.closest!==Tt.closest||kt||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let Tt;const kt=(Tt=this.activeCandidate)==null?void 0:Tt.closest;kt&&kt.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(kt)&&kt.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(Tt){const{local:kt,closest:Bt}=Tt;let zt=(Tt=this.lastOnStack&&kt===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!zt)throw Error("Cannot show the insertion marker because there is no insertion marker block");let mn;try{mn=zt.getMatchingConnection(kt.getSourceBlock(),kt)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),zt=Tt?this.lastMarker:this.firstMarker,!zt)throw Error("Cannot show the insertion marker because there is no insertion marker block");mn=zt.getMatchingConnection(kt.getSourceBlock(),kt)}if(!mn)throw Error("Cannot show the insertion marker because there is no associated connection");if(mn===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");zt.render(),zt.rendered=!0,zt.getSvgRoot().setAttribute("visibility","visible"),mn&&Bt&&zt.positionNearConnection(mn,Bt),Bt&&mn.connect(Bt),this.markerConnection=mn}hideInsertionMarker(){if(this.markerConnection){var Tt=this.markerConnection,kt=Tt.getSourceBlock(),Bt=kt.previousConnection,zt=kt.outputConnection,mn=Tt===kt.nextConnection;if(zt=Tt.type===po.INPUT_VALUE&&!(zt&&zt.targetConnection),mn&&(!Bt||!Bt.targetConnection)||zt?Tt.targetBlock().unplug(!1):Tt.type!==po.NEXT_STATEMENT||mn?kt.unplug(!0):((mn=Tt.targetConnection)&&mn.getSourceBlock().unplug(!1),Bt=Bt?Bt.targetConnection:null,kt.unplug(!0),Bt&&mn&&Bt.connect(mn)),Tt.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(Tt=kt.getSvgRoot())&&Tt.setAttribute("visibility","hidden")}}showInsertionInputOutline(Tt){Tt=Tt.closest,this.highlightedBlock=Tt.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(Tt,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(Tt){if(this.fadedBlock=Tt.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const Tt=[];return this.firstMarker&&Tt.push(this.firstMarker),this.lastMarker&&Tt.push(this.lastMarker),Tt}};(function(Tt){Tt=Tt.PREVIEW_TYPE||(Tt.PREVIEW_TYPE={}),Tt[Tt.INSERTION_MARKER=0]="INSERTION_MARKER",Tt[Tt.INPUT_OUTLINE=1]="INPUT_OUTLINE",Tt[Tt.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Uu||(Uu={})),Uu.PREVIEW_TYPE;var Mv=class{constructor(Tt){this.overrides=null,this.name=Tt}getClassName(){return this.name+"-renderer"}init(Tt,kt){this.constants_=this.makeConstants_(),kt&&(this.overrides=kt,Object.assign(this.constants_,kt)),this.constants_.setTheme(Tt),this.constants_.init()}createDom(Tt,kt){this.constants_.createDom(Tt,this.name+"-"+kt.name,"."+this.getClassName()+"."+kt.getClassName())}refreshDom(Tt,kt){const Bt=this.getConstants();Bt.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=Bt.randomIdentifier,this.constants_.setTheme(kt),this.constants_.init(),this.createDom(Tt,kt)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Iv}makeRenderInfo_(Tt){return new q0(this,Tt)}makeDrawer_(Tt,kt){return new Rv(Tt,kt)}makeDebugger_(){return new Gu(this.getConstants())}makeMarkerDrawer(Tt,kt){return new ET(Tt,this.getConstants(),kt)}makePathObject(Tt,kt){return new tS(Tt,kt,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(Tt){return!0}orphanCanConnectAtEnd(Tt,kt,Bt){return!!ls.getConnectionForOrphanedConnection(Tt,Bt===po.OUTPUT_VALUE?kt.outputConnection:kt.previousConnection)}getConnectionPreviewMethod(Tt,kt,Bt){return kt.type===po.OUTPUT_VALUE||kt.type===po.PREVIOUS_STATEMENT?!Tt.isConnected()||this.orphanCanConnectAtEnd(Bt,Tt.targetBlock(),kt.type)?Uu.PREVIEW_TYPE.INSERTION_MARKER:Uu.PREVIEW_TYPE.REPLACEMENT_FADE:Uu.PREVIEW_TYPE.INSERTION_MARKER}render(Tt){cp()&&!Tt.renderingDebugger&&(Tt.renderingDebugger=this.makeDebugger_());const kt=this.makeRenderInfo_(Tt);kt.measure(),this.makeDrawer_(Tt,kt).draw()}},us={};us.BottomRow=yT,us.Connection=z_,us.ConstantProvider=Iv,us.Debug=Gu,us.Drawer=Rv,us.ExternalValueInput=eS,us.Field=H_,us.Hat=vT,us.Icon=jx,us.InRowSpacer=Fu,us.InlineInput=OT,us.InputConnection=$m,us.InputRow=bT,us.JaggedEdge=Xx,us.MarkerSvg=ET,us.Measurable=Hp,us.NextConnection=Yx,us.OutputConnection=Zx,us.PathObject=tS,us.PreviousConnection=qx,us.RenderInfo=q0,us.Renderer=Mv,us.RoundCorner=Av,us.Row=wv,us.SpacerRow=ST,us.SquareCorner=kv,us.StatementInput=Cv,us.TopRow=TT,us.Types=Tr,us.init=S0,us.register=up,us.stopDebugger=b0,us.unregister=zm;var eE=class{constructor(Tt,kt){this.workspace=Tt,this.theme=kt,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(Tt){var kt=this.theme;this.theme=Tt,(Tt=this.workspace.getInjectionDiv())&&(kt&&(kt=kt.getClassName())&&Zn(Tt,kt),(kt=this.theme.getClassName())&&tr(Tt,kt));for(let Bt=0,zt;zt=this.subscribedWorkspaces_[Bt];Bt++)zt.refreshTheme();for(const[Bt,zt]of this.componentDB)for(const mn of zt){Tt=mn.element,kt=mn.propertyName;const En=this.theme&&this.theme.getComponentStyle(Bt);Tt.style[kt]=En||""}for(const Bt of this.subscribedWorkspaces_)Bt.hideChaff()}subscribeWorkspace(Tt){this.subscribedWorkspaces_.push(Tt)}unsubscribeWorkspace(Tt){if(!Vl(this.subscribedWorkspaces_,Tt))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(Tt,kt,Bt){this.componentDB.has(kt)||this.componentDB.set(kt,[]),this.componentDB.get(kt).push({element:Tt,propertyName:Bt}),kt=this.theme&&this.theme.getComponentStyle(kt),Tt.style[Bt]=kt||""}unsubscribe(Tt){if(Tt)for(const[kt,Bt]of this.componentDB){for(let zt=Bt.length-1;0<=zt;zt--)Bt[zt].element===Tt&&Bt.splice(zt,1);Bt.length||this.componentDB.delete(kt)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},$T="VARIABLE_DYNAMIC",t_={};t_.CATEGORY_NAME=$T,t_.flyoutCategory=C_,t_.flyoutCategoryBlocks=mm,t_.onCreateVariableButtonClick_Colour=T0,t_.onCreateVariableButtonClick_Number=zl,t_.onCreateVariableButtonClick_String=Hm;var tE=class{canConnect(Tt,kt,Bt,zt){return this.canConnectWithReason(Tt,kt,Bt,zt)===ls.CAN_CONNECT}canConnectWithReason(Tt,kt,Bt,zt){const mn=this.doSafetyChecks(Tt,kt);return mn!==ls.CAN_CONNECT?mn:this.doTypeChecks(Tt,kt)?Bt&&!this.doDragChecks(Tt,kt,zt||0)?ls.REASON_DRAG_CHECKS_FAILED:ls.CAN_CONNECT:ls.REASON_CHECKS_FAILED}getErrorMessage(Tt,kt,Bt){switch(Tt){case ls.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case ls.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case ls.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case ls.REASON_TARGET_NULL:return"Target connection is null.";case ls.REASON_CHECKS_FAILED:return"Connection checks failed. "+(kt+" expected "+kt.getCheck()+", found "+Bt.getCheck());case ls.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case ls.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case ls.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(Tt,kt){if(!Tt||!kt)return ls.REASON_TARGET_NULL;let Bt,zt,mn;return Tt.isSuperior()?(Bt=Tt.getSourceBlock(),zt=kt.getSourceBlock(),mn=kt):(zt=Tt.getSourceBlock(),Bt=kt.getSourceBlock(),mn=Tt,Tt=kt),Bt===zt?ls.REASON_SELF_CONNECTION:mn.type!==V_[Tt.type]?ls.REASON_WRONG_TYPE:Bt.workspace!==zt.workspace?ls.REASON_DIFFERENT_WORKSPACES:Bt.isShadow()&&!zt.isShadow()?ls.REASON_SHADOW_PARENT:mn.type===po.OUTPUT_VALUE&&zt.previousConnection&&zt.previousConnection.isConnected()||mn.type===po.PREVIOUS_STATEMENT&&zt.outputConnection&&zt.outputConnection.isConnected()?ls.REASON_PREVIOUS_AND_OUTPUT:ls.CAN_CONNECT}doTypeChecks(Tt,kt){if(Tt=Tt.getCheck(),kt=kt.getCheck(),!Tt||!kt)return!0;for(let Bt=0;Bt<Tt.length;Bt++)if(kt.indexOf(Tt[Bt])!==-1)return!0;return!1}doDragChecks(Tt,kt,Bt){if(Tt.distanceFrom(kt)>Bt||kt.getSourceBlock().isInsertionMarker())return!1;switch(kt.type){case po.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(Tt,kt);case po.OUTPUT_VALUE:if(kt.isConnected()&&!kt.targetBlock().isInsertionMarker()||Tt.isConnected())return!1;break;case po.INPUT_VALUE:if(kt.isConnected()&&!kt.targetBlock().isMovable()&&!kt.targetBlock().isShadow())return!1;break;case po.NEXT_STATEMENT:if(kt.isConnected()&&!Tt.getSourceBlock().nextConnection&&!kt.targetBlock().isShadow()&&kt.targetBlock().nextConnection)return!1;break;default:return!1}return Ts.indexOf(kt)===-1}canConnectToPrevious_(Tt,kt){return Tt.targetConnection||Ts.indexOf(kt)!==-1?!1:kt.targetConnection?(Tt=kt.targetBlock(),Tt.isInsertionMarker()?!Tt.getPreviousBlock():!1):!0}};So(ro.CONNECTION_CHECKER,vm,tE);var wT=class extends iv{constructor(Tt){super(Tt),this.type=R0,Tt&&(this.varType=Tt.type,this.varName=Tt.name)}toJson(){const Tt=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return Tt.varType=this.varType,Tt.varName=this.varName,Tt}fromJson(Tt){vt("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.varType=Tt.varType,this.varName=Tt.varName}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new wT),kt.varType=Tt.varType,kt.varName=Tt.varName,kt}run(Tt){const kt=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");Tt?kt.deleteVariableById(this.varId):kt.createVariable(this.varName,this.varType,this.varId)}};So(ro.EVENT,R0,wT);var CT=class extends iv{constructor(Tt,kt){super(Tt),this.type=Zy,Tt&&(this.oldName=Tt.name,this.newName=typeof kt>"u"?"":kt)}toJson(){const Tt=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return Tt.oldName=this.oldName,Tt.newName=this.newName,Tt}fromJson(Tt){vt("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldName=Tt.oldName,this.newName=Tt.newName}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new CT),kt.oldName=Tt.oldName,kt.newName=Tt.newName,kt}run(Tt){const kt=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");Tt?kt.renameVariableById(this.varId,this.newName):kt.renameVariableById(this.varId,this.oldName)}};So(ro.EVENT,Zy,CT);var AT=class{constructor(Tt){this.workspace=Tt,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(Tt,kt){if(Tt.name!==kt){var Bt=this.getVariable(kt,Tt.type),zt=this.workspace.getAllBlocks(!1);fo(!0);try{Bt&&Bt.getId()!==Tt.getId()?this.renameVariableWithConflict_(Tt,kt,Bt,zt):this.renameVariableAndUses_(Tt,kt,zt)}finally{fo(!1)}}}renameVariableById(Tt,kt){const Bt=this.getVariableById(Tt);if(!Bt)throw Error("Tried to rename a variable that didn't exist. ID: "+Tt);this.renameVariable(Bt,kt)}renameVariableAndUses_(Tt,kt,Bt){for(to(new(no(Zy))(Tt,kt)),Tt.name=kt,kt=0;kt<Bt.length;kt++)Bt[kt].updateVarName(Tt)}renameVariableWithConflict_(Tt,kt,Bt,zt){const mn=Tt.type;for(kt!==Bt.name&&this.renameVariableAndUses_(Bt,kt,zt),kt=0;kt<zt.length;kt++)zt[kt].renameVarById(Tt.getId(),Bt.getId());to(new(no(R0))(Tt)),Vl(this.variableMap.get(mn),Tt)}createVariable(Tt,kt,Bt){var zt=this.getVariable(Tt,kt);if(zt){if(Bt&&zt.getId()!==Bt)throw Error('Variable "'+Tt+'" is already in use and its id is "'+zt.getId()+'" which conflicts with the passed in id, "'+Bt+'".');return zt}if(Bt&&this.getVariableById(Bt))throw Error('Variable id, "'+Bt+'", is already in use.');return zt=Bt||Ao(),kt=kt||"",zt=new ov(this.workspace,Tt,kt,zt),Tt=this.variableMap.get(kt)||[],Tt.push(zt),this.variableMap.delete(kt),this.variableMap.set(kt,Tt),to(new(no(D_))(zt)),zt}deleteVariable(Tt){const kt=Tt.getId(),Bt=this.variableMap.get(Tt.type);if(Bt){for(let zt=0;zt<Bt.length;zt++)if(Bt[zt].getId()===kt){Bt.splice(zt,1),to(new(no(R0))(Tt));break}}}deleteVariableById(Tt){const kt=this.getVariableById(Tt);if(kt){var Bt=kt.name;const zt=this.getVariableUsesById(Tt);for(let mn=0,En;En=zt[mn];mn++)if(En.type==="procedures_defnoreturn"||En.type==="procedures_defreturn"){Tt=String(En.getFieldValue("NAME")),Bt=ko.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",Bt).replace("%2",Tt),rp(Bt);return}1<zt.length?(Bt=ko.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(zt.length)).replace("%2",Bt),mu(Bt,mn=>{mn&&kt&&this.deleteVariableInternal(kt,zt)})):this.deleteVariableInternal(kt,zt)}else console.warn("Can't delete non-existent variable: "+Tt)}deleteVariableInternal(Tt,kt){const Bt=Mo();Bt||fo(!0);try{for(let zt=0;zt<kt.length;zt++)kt[zt].dispose(!0);this.deleteVariable(Tt)}finally{Bt||fo(!1)}}getVariable(Tt,kt){if(kt=this.variableMap.get(kt||"")){for(let Bt=0,zt;zt=kt[Bt];Bt++)if(tp.equals(zt.name,Tt))return zt}return null}getVariableById(Tt){for(const[,kt]of this.variableMap)for(const Bt of kt)if(Bt.getId()===Tt)return Bt;return null}getVariablesOfType(Tt){return(Tt=this.variableMap.get(Tt||""))?Tt.slice():[]}getVariableTypes(Tt){const kt=new Set(this.variableMap.keys());if(Tt&&Tt.getPotentialVariableMap())for(const Bt of Tt.getPotentialVariableMap().variableMap.keys())kt.add(Bt);return kt.has("")||kt.add(""),Array.from(kt.values())}getAllVariables(){let Tt=[];for(const kt of this.variableMap.values())Tt=Tt.concat(kt);return Tt}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(Tt=>Tt.name)}getVariableUsesById(Tt){const kt=[],Bt=this.workspace.getAllBlocks(!1);for(let zt=0;zt<Bt.length;zt++){const mn=Bt[zt].getVarModels();if(mn)for(let En=0;En<mn.length;En++)mn[En].getId()===Tt&&kt.push(Bt[zt])}return kt}},wm=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(Tt){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Qx(this),this.potentialVariableMap=null,this.id=Ao(),$n(this),this.options=Tt||new yp({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(_o(ro.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new AT(this)}dispose(){this.listeners.length=0,this.clear(),Tn(this)}sortObjects_(Tt,kt){return Tt=Tt.getRelativeToSurfaceXY(),kt=kt.getRelativeToSurfaceXY(),Tt.y+wm.prototype.sortObjects_.offset*Tt.x-(kt.y+wm.prototype.sortObjects_.offset*kt.x)}addTopBlock(Tt){this.topBlocks.push(Tt)}removeTopBlock(Tt){if(!Vl(this.topBlocks,Tt))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(Tt){const kt=[].concat(this.topBlocks);return Tt&&1<kt.length&&(this.sortObjects_.offset=Math.sin(Jn(wm.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),kt.sort(this.sortObjects_)),kt}addTypedBlock(Tt){this.typedBlocksDB.has(Tt.type)||this.typedBlocksDB.set(Tt.type,[]),this.typedBlocksDB.get(Tt.type).push(Tt)}removeTypedBlock(Tt){Vl(this.typedBlocksDB.get(Tt.type),Tt),this.typedBlocksDB.get(Tt.type).length||this.typedBlocksDB.delete(Tt.type)}getBlocksByType(Tt,kt){return this.typedBlocksDB.has(Tt)?(Tt=this.typedBlocksDB.get(Tt).slice(0),kt&&Tt&&1<Tt.length&&(this.sortObjects_.offset=Math.sin(Jn(wm.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),Tt.sort(this.sortObjects_)),Tt.filter(function(Bt){return!Bt.isInsertionMarker()})):[]}addTopComment(Tt){this.topComments.push(Tt),this.commentDB.has(Tt.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+Tt.id+'"'),this.commentDB.set(Tt.id,Tt)}removeTopComment(Tt){if(!Vl(this.topComments,Tt))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(Tt.id)}getTopComments(Tt){const kt=[].concat(this.topComments);return Tt&&1<kt.length&&(this.sortObjects_.offset=Math.sin(Jn(wm.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),kt.sort(this.sortObjects_)),kt}getAllBlocks(Tt){if(Tt){var kt=this.getTopBlocks(!0);Tt=[];for(let Bt=0;Bt<kt.length;Bt++)Tt.push(...kt[Bt].getDescendants(!0))}else for(Tt=this.getTopBlocks(!1),kt=0;kt<Tt.length;kt++)Tt.push(...Tt[kt].getChildren(!1));return Tt.filter(function(Bt){return!Bt.isInsertionMarker()})}clear(){this.isClearing=!0;try{const Tt=Mo();for(Tt||fo(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();Tt||fo(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(Tt,kt){this.variableMap.renameVariableById(Tt,kt)}createVariable(Tt,kt,Bt){return this.variableMap.createVariable(Tt,kt,Bt)}getVariableUsesById(Tt){return this.variableMap.getVariableUsesById(Tt)}deleteVariableById(Tt){this.variableMap.deleteVariableById(Tt)}getVariable(Tt,kt){return this.variableMap.getVariable(Tt,kt)}getVariableById(Tt){return this.variableMap.getVariableById(Tt)}getVariablesOfType(Tt){return this.variableMap.getVariablesOfType(Tt)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(Tt,kt){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(Tt){return this.options.maxInstances?(this.options.maxInstances[Tt]!==void 0?this.options.maxInstances[Tt]:1/0)-this.getBlocksByType(Tt,!1).length:1/0}isCapacityAvailable(Tt){if(!this.hasBlockLimits())return!0;let kt=0;for(const Bt in Tt){if(Tt[Bt]>this.remainingCapacityOfType(Bt))return!1;kt+=Tt[Bt]}return!(kt>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(Tt){var kt=Tt?this.redoStack_:this.undoStack_,Bt=Tt?this.undoStack_:this.redoStack_;const zt=kt.pop();if(zt){for(var mn=[zt];kt.length&&zt.group&&zt.group===kt[kt.length-1].group;)mn.push(kt.pop());for(kt=0;kt<mn.length;kt++)Bt.push(mn[kt]);mn=Hs(mn,Tt),Ro(!1);try{for(Bt=0;Bt<mn.length;Bt++)mn[Bt].run(Tt)}finally{Ro(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Nl()}addChangeListener(Tt){return this.listeners.push(Tt),Tt}removeChangeListener(Tt){Vl(this.listeners,Tt)}fireChangeListener(Tt){if(Tt.recordUndo)for(this.undoStack_.push(Tt),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let kt=0;kt<this.listeners.length;kt++)(0,this.listeners[kt])(Tt)}getBlockById(Tt){return this.blockDB.get(Tt)||null}setBlockById(Tt,kt){this.blockDB.set(Tt,kt)}removeBlockById(Tt){this.blockDB.delete(Tt)}getCommentById(Tt){let kt;return(kt=this.commentDB.get(Tt))!=null?kt:null}allInputsFilled(Tt){const kt=this.getTopBlocks(!1);for(let Bt=0;Bt<kt.length;Bt++)if(!kt[Bt].allInputsFilled(Tt))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new AT(this)}getVariableMap(){return this.variableMap}setVariableMap(Tt){this.variableMap=Tt}getProcedureMap(){return this.procedureMap}static getById(Tt){return vn(Tt)}static getAll(){return bn()}};wm.SCAN_ANGLE=3;var v$=100,nE=class{constructor(Tt){this.parentWorkspace=Tt,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(Tt,kt){if(Tt.length){try{var Bt=new globalThis.Audio}catch{return}for(let mn=0;mn<Tt.length;mn++){const En=Tt[mn],Hn=En.match(/\.(\w+)$/);if(Hn&&Bt.canPlayType("audio/"+Hn[1])){var zt=new globalThis.Audio(En);break}}zt&&this.sounds.set(kt,zt)}}preload(){for(const Tt of this.sounds.values()){Tt.volume=.01;const kt=Tt.play();if(kt!==void 0?kt.then(Tt.pause).catch(function(){}):Tt.pause(),$o||ps)break}}play(Tt,kt){var Bt=this.sounds.get(Tt);Bt?(Tt=new Date,this.lastSound_!==null&&Tt.getTime()-this.lastSound_.getTime()<v$||(this.lastSound_=Tt,Bt=$o||No?Bt:Bt.cloneNode(),Bt.volume=kt===void 0?1:kt,Bt.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(Tt,kt)}},rE=class{constructor(Tt){this.workspace=Tt,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Cn(Er.G,{});const Tt=String(Math.random()).substring(2);return this.createZoomOutSvg(Tt),this.createZoomInSvg(Tt),this.workspace.isMovable()&&this.createZoomResetSvg(Tt),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Dl.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&fr(this.svgGroup),this.onZoomResetWrapper&&cn(this.onZoomResetWrapper),this.onZoomInWrapper&&cn(this.onZoomInWrapper),this.onZoomOutWrapper&&cn(this.onZoomOutWrapper)}getBoundingRectangle(){let Tt=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(Tt+=this.LARGE_SPACING+this.HEIGHT),new Fs(this.top,this.top+Tt,this.left,this.left+this.WIDTH)}position(Tt,kt){if(this.initialized){var Bt=Vm(this.workspace,Tt),zt=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(zt+=this.LARGE_SPACING+this.HEIGHT),Tt=T_(Bt,new Pl(this.WIDTH,zt),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,Tt,this.workspace),Bt=Bt.vertical,kt=Ay(Tt,this.MARGIN_VERTICAL,Bt===Em.TOP?e_.DOWN:e_.UP,kt),Bt===Em.TOP){var mn=this.SMALL_SPACING+this.HEIGHT,En;(En=this.zoomInGroup)==null||En.setAttribute("transform","translate(0, "+mn+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(mn+this.LARGE_SPACING+this.HEIGHT)+")")}else{En=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let pr;(pr=this.zoomInGroup)==null||pr.setAttribute("transform","translate(0, "+En+")"),En=En+this.SMALL_SPACING+this.HEIGHT,(mn=this.zoomOutGroup)==null||mn.setAttribute("transform","translate(0, "+En+")")}this.top=kt.top,this.left=kt.left;var Hn;(Hn=this.svgGroup)==null||Hn.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(Tt){this.zoomOutGroup=Cn(Er.G,{class:"blocklyZoom"},this.svgGroup);const kt=Cn(Er.CLIPPATH,{id:"blocklyZoomoutClipPath"+Tt},this.zoomOutGroup);Cn(Er.RECT,{width:32,height:32},kt),Cn(Er.IMAGE,{width:fu.width,height:fu.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+Tt+")"},this.zoomOutGroup).setAttributeNS(xu,"xlink:href",this.workspace.options.pathToMedia+fu.url),this.onZoomOutWrapper=Zt(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(Tt){this.zoomInGroup=Cn(Er.G,{class:"blocklyZoom"},this.svgGroup);const kt=Cn(Er.CLIPPATH,{id:"blocklyZoominClipPath"+Tt},this.zoomInGroup);Cn(Er.RECT,{width:32,height:32},kt),Cn(Er.IMAGE,{width:fu.width,height:fu.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+Tt+")"},this.zoomInGroup).setAttributeNS(xu,"xlink:href",this.workspace.options.pathToMedia+fu.url),this.onZoomInWrapper=Zt(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(Tt,kt){this.workspace.markFocused(),this.workspace.zoomCenter(Tt),this.fireZoomEvent(),Ct(),kt.stopPropagation(),kt.preventDefault()}createZoomResetSvg(Tt){this.zoomResetGroup=Cn(Er.G,{class:"blocklyZoom"},this.svgGroup);const kt=Cn(Er.CLIPPATH,{id:"blocklyZoomresetClipPath"+Tt},this.zoomResetGroup);Cn(Er.RECT,{width:32,height:32},kt),Cn(Er.IMAGE,{width:fu.width,height:fu.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+Tt+")"},this.zoomResetGroup).setAttributeNS(xu,"xlink:href",this.workspace.options.pathToMedia+fu.url),this.onZoomResetWrapper=Zt(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(Tt){this.workspace.markFocused();const kt=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(kt),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Ct(),Tt.stopPropagation(),Tt.preventDefault()}fireZoomEvent(){const Tt=new(no(Km))(null,this.workspace.id,"zoom_controls");to(Tt)}};Zl(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var O$=20,Op=class extends wm{constructor(Tt,kt,Bt){super(Tt),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(_o(ro.METRICS_MANAGER,Tt,!0))(this),this.getMetrics=Tt.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=Tt.setMetrics||Op.setTopLevelWorkspaceMetrics_,this.componentManager=new Dl,this.connectionDBList=Y0.init(this.connectionChecker),kt&&(this.blockDragSurface=kt),Bt&&(this.workspaceDragSurface=Bt),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new nE(Tt.parentWorkspace),this.grid=this.options.gridPattern?new gT(this.options.gridPattern,Tt.gridOptions):null,this.markerManager=new sv(this),dt.module$build$src$core$variables&&wu&&this.registerToolboxCategoryCallback(GO,wu),t_&&C_&&this.registerToolboxCategoryCallback($T,C_),dt.module$build$src$core$procedures&&Wm&&(this.registerToolboxCategoryCallback(_b,Wm),this.addChangeListener(ks)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new eE(this,this.options.theme||XO),this.themeManager_.subscribeWorkspace(this);let zt;this.renderer=S0(this.options.renderer||"geras",this.getTheme(),(zt=this.options.rendererOverrides)!=null?zt:void 0),this.cachedParentSvgSize=new Pl(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(Tt){this.metricsManager=Tt,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(Tt){this.markerManager.setCursorSvg(Tt)}setMarkerSvg(Tt){this.markerManager.setMarkerSvg(Tt)}getMarker(Tt){return this.markerManager?this.markerManager.getMarker(Tt):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(Tt){Tt||(Tt=XO),this.themeManager_.setTheme(Tt)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(kt){return!!kt.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const Tt=new(no(tv))(this.getTheme().name,this.id);to(Tt)}updateBlockStyles_(Tt){for(let kt=0,Bt;Bt=Tt[kt];kt++){const zt=Bt.getStyleName();if(zt){const mn=Bt;mn.setStyle(zt),mn.mutator&&mn.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const Tt=this.getParentSvg().getScreenCTM();Tt&&(this.inverseScreenCTM=Tt.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(Tt){let kt=0,Bt=0,zt=1;(Pr(this.getCanvas(),Tt)||Pr(this.getBubbleCanvas(),Tt))&&(zt=this.scale);do{const mn=Zs(Tt);(Tt===this.getCanvas()||Tt===this.getBubbleCanvas())&&(zt=1),kt+=mn.x*zt,Bt+=mn.y*zt,Tt=Tt.parentNode}while(Tt&&Tt!==this.getParentSvg());return new ao(kt,Bt)}getCachedParentSvgSize(){const Tt=this.cachedParentSvgSize;return new Pl(Tt.width,Tt.height)}getOriginOffsetInPixels(){return Kp(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let Tt=this.svgGroup_;for(;Tt;){if((" "+(Tt.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=Tt;break}Tt=Tt.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(Tt){this.resizeHandlerWrapper=Tt}createDom(Tt){return this.svgGroup_=Cn(Er.G,{class:"blocklyWorkspace"}),Tt&&(this.svgBackground_=Cn(Er.RECT,{height:"100%",width:"100%",class:Tt},this.svgGroup_),Tt==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=Cn(Er.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Cn(Er.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Zt(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),Zt(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(_o(ro.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(Tt=_o(ro.CURSOR,this.options))&&this.markerManager.setCursor(new Tt),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&fr(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const Tt=this.getParentSvg();Tt&&Tt.parentNode&&fr(Tt.parentNode)}this.resizeHandlerWrapper&&(cn(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=Op.newTrashcan(this);const Tt=this.trashcan.createDom();this.svgGroup_.insertBefore(Tt,this.svgBlockCanvas_)}static newTrashcan(Tt){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new rE(this);const Tt=this.zoomControls_.createDom();this.svgGroup_.appendChild(Tt)}addFlyout(Tt){const kt=new yp({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return kt.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(_o(ro.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(kt):new(_o(ro.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(kt),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(Tt)}getFlyout(Tt){return this.flyout||Tt?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const Tt=this.componentManager.getComponents(Dl.Capability.POSITIONABLE,!0),kt=this.getMetricsManager().getUiMetrics(),Bt=[];for(let zt=0,mn;mn=Tt[zt];zt++){mn.position(kt,Bt);const En=mn.getBoundingRectangle();En&&Bt.push(En)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const Tt=Hu();ao.equals(this.lastRecordedPageScroll,Tt)||(this.lastRecordedPageScroll=Tt,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(Tt,kt){const Bt=this.getParentSvg();Tt!=null&&(this.cachedParentSvgSize.width=Tt,Bt.setAttribute("data-cached-width",Tt.toString())),kt!=null&&(this.cachedParentSvgSize.height=kt,Bt.setAttribute("data-cached-height",kt.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let Tt=this.svgGroup_;for(;Tt;){if(Tt.tagName==="svg"){this.cachedParentSvg=Tt;break}Tt=Tt.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ts()){var Tt=this.scale,kt=-this.scrollY,Bt=-this.scrollX;if(!(Tt===this.oldScale&&1>Math.abs(kt-this.oldTop)&&1>Math.abs(Bt-this.oldLeft))){var zt=new(no(L_))(kt,Bt,Tt,this.id,this.oldScale);this.oldScale=Tt,this.oldTop=kt,this.oldLeft=Bt,to(zt)}}}translate(Tt,kt){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var Bt;(Bt=this.workspaceDragSurface)==null||Bt.translateSurface(Tt,kt)}else Bt="translate("+Tt+","+kt+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",Bt),this.svgBubbleCanvas_.setAttribute("transform",Bt);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(Tt,kt,this.scale),this.grid&&this.grid.moveTo(Tt,kt),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var Tt=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),Tt="translate("+Tt.x+","+Tt.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",Tt),this.svgBubbleCanvas_.setAttribute("transform",Tt)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var Tt=this.svgBlockCanvas_.previousSibling,kt,Bt=parseInt((kt=this.getParentSvg().getAttribute("width"))!=null?kt:"0"),zt;kt=parseInt((zt=this.getParentSvg().getAttribute("height"))!=null?zt:"0"),zt=Zs(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),Tt,Bt,kt,this.scale),this.workspaceDragSurface.translateSurface(zt.x,zt.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const Tt=this.getMetrics();return Tt?Tt.viewWidth/this.scale:0}setVisible(Tt){if(this.isVisible_=Tt,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(Tt),this.getFlyout()&&this.getFlyout().setContainerVisible(Tt),this.getParentSvg().style.display=Tt?"block":"none",this.toolbox_&&this.toolbox_.setVisible(Tt),Tt){Tt=this.getAllBlocks(!1);for(let kt=Tt.length-1;0<=kt;kt--)Tt[kt].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var Tt=this.getAllBlocks(!1),kt=Tt.length-1;0<=kt;kt--)Tt[kt].render(!1);if(this.currentGesture_)for(Tt=this.currentGesture_.getInsertionMarkers(),kt=0;kt<Tt.length;kt++)Tt[kt].render(!1);this.markerManager.updateMarkers()}highlightBlock(Tt,kt){if(kt===void 0){for(let Bt=0,zt;zt=this.highlightedBlocks[Bt];Bt++)zt.setHighlighted(!1);this.highlightedBlocks.length=0}(Tt=Tt?this.getBlockById(Tt):null)&&((kt=kt===void 0||kt)?this.highlightedBlocks.indexOf(Tt)===-1&&this.highlightedBlocks.push(Tt):Vl(this.highlightedBlocks,Tt),Tt.setHighlighted(kt))}paste(Tt){if(!this.rendered||!Tt.type&&!Tt.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const kt=Mo();return kt||fo(!0),Tt=Tt.type?this.pasteBlock_(null,Tt):Tt.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(Tt):this.pasteBlock_(Tt,null),fo(kt),Tt}pasteBlock_(Tt,kt){Fo();let Bt;try{let zt=0,mn=0;if(Tt){Bt=Es(Tt,this);let En;zt=parseInt((En=Tt.getAttribute("x"))!=null?En:"0"),this.RTL&&(zt=-zt);let Hn;mn=parseInt((Hn=Tt.getAttribute("y"))!=null?Hn:"0")}else kt&&(Bt=Cp(kt,this),zt=kt.x||10,this.RTL&&(zt=this.getWidth()-zt),mn=kt.y||10);if(!isNaN(zt)&&!isNaN(mn)){let En;do{En=!1;const Hn=this.getAllBlocks(!1);for(let pr=0,Kr;Kr=Hn[pr];pr++){const lo=Kr.getRelativeToSurfaceXY();if(1>=Math.abs(zt-lo.x)&&1>=Math.abs(mn-lo.y)){En=!0;break}}if(!En){const pr=Bt.getConnections_(!1);for(let Kr=0,lo;lo=pr[Kr];Kr++)if(lo.closest(dt.config$$module$build$src$core$config.snapRadius,new ao(zt,mn)).connection){En=!0;break}}En&&(zt=this.RTL?zt-dt.config$$module$build$src$core$config.snapRadius:zt+dt.config$$module$build$src$core$config.snapRadius,mn+=2*dt.config$$module$build$src$core$config.snapRadius)}while(En);Bt.moveTo(new ao(zt,mn))}}finally{_i()}return ts()&&!Bt.isShadow()&&to(new(no(Xl))(Bt)),Bt.select(),Bt}pasteWorkspaceComment_(Tt){Fo();let kt;try{kt=tu.fromXmlRendered(Tt,this);let Bt,zt=parseInt((Bt=Tt.getAttribute("x"))!=null?Bt:"0"),mn,En=parseInt((mn=Tt.getAttribute("y"))!=null?mn:"0");isNaN(zt)||isNaN(En)||(this.RTL&&(zt=-zt),kt.moveBy(zt+50,En+50))}finally{_i()}return ts()&&Up.fireCreateEvent(kt),kt.select(),kt}refreshToolboxSelection(){const Tt=this.isFlyout?this.targetWorkspace:this;Tt&&!Tt.currentGesture_&&Tt.toolbox_&&Tt.toolbox_.getFlyout()&&Tt.toolbox_.refreshSelection()}renameVariableById(Tt,kt){super.renameVariableById(Tt,kt),this.refreshToolboxSelection()}deleteVariableById(Tt){super.deleteVariableById(Tt),this.refreshToolboxSelection()}createVariable(Tt,kt,Bt){return Tt=super.createVariable(Tt,kt,Bt),this.refreshToolboxSelection(),Tt}recordDragTargets(){const Tt=this.componentManager.getComponents(Dl.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let kt=0,Bt;Bt=Tt[kt];kt++){const zt=Bt.getClientRect();zt&&this.dragTargetAreas.push({component:Bt,clientRect:zt})}}newBlock(Tt,kt){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(Tt){for(let kt=0,Bt;Bt=this.dragTargetAreas[kt];kt++)if(Bt.clientRect.contains(Tt.clientX,Tt.clientY))return Bt.component;return null}onMouseDown_(Tt){const kt=this.getGesture(Tt);kt&&kt.handleWsStart(Tt,this)}startDrag(Tt,kt){Tt=pn(Tt,this.getParentSvg(),this.getInverseScreenCTM()),Tt.x/=this.scale,Tt.y/=this.scale,this.dragDeltaXY=ao.difference(kt,Tt)}moveDrag(Tt){return Tt=pn(Tt,this.getParentSvg(),this.getInverseScreenCTM()),Tt.x/=this.scale,Tt.y/=this.scale,ao.sum(this.dragDeltaXY,Tt)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const Tt=!!this.scrollbar;return this.isMovable()&&(!Tt||Tt&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const Tt=!!this.scrollbar;return this.isMovable()&&(!Tt||Tt&&this.scrollbar.canScrollVertically())}onMouseWheel_(Tt){if(Vp.inProgress())Tt.preventDefault(),Tt.stopPropagation();else{var kt=this.options.zoomOptions&&this.options.zoomOptions.wheel,Bt=this.options.moveOptions&&this.options.moveOptions.wheel;if(kt||Bt){var zt=gn(Tt);if(Eo)var mn=Tt.metaKey;kt&&(Tt.ctrlKey||mn||!Bt)?(zt=-zt.y/50,kt=pn(Tt,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(kt.x,kt.y,zt)):(kt=this.scrollX-zt.x,Bt=this.scrollY-zt.y,Tt.shiftKey&&!zt.x&&(kt=this.scrollX-zt.y,Bt=this.scrollY),this.scroll(kt,Bt)),Tt.preventDefault()}}}getBlocksBoundingBox(){const Tt=this.getTopBoundedElements();if(!Tt.length)return new Fs(0,0,0,0);const kt=Tt[0].getBoundingRectangle();for(let zt=1;zt<Tt.length;zt++){var Bt=Tt[zt];Bt.isInsertionMarker&&Bt.isInsertionMarker()||(Bt=Bt.getBoundingRectangle(),Bt.top<kt.top&&(kt.top=Bt.top),Bt.bottom>kt.bottom&&(kt.bottom=Bt.bottom),Bt.left<kt.left&&(kt.left=Bt.left),Bt.right>kt.right&&(kt.right=Bt.right))}return kt}cleanUp(){this.setResizesEnabled(!1),fo(!0);const Tt=this.getTopBlocks(!0);let kt=0;for(let Bt=0,zt;zt=Tt[Bt];Bt++){if(!zt.isMovable())continue;const mn=zt.getRelativeToSurfaceXY();zt.moveBy(-mn.x,kt-mn.y),zt.snapToGrid(),kt=zt.getRelativeToSurfaceXY().y+zt.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}fo(!1),this.setResizesEnabled(!0)}showContextMenu(Tt){if(!this.options.readOnly&&!this.isFlyout){var kt=cs.registry.getContextMenuOptions(cs.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(kt,Tt),kp(Tt,kt,this.RTL)}}updateToolbox(Tt){if(Tt=Lm(Tt)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Lu(Tt)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=Tt,this.toolbox_.render(Tt)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=Tt,this.flyout.show(Tt)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Pn(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(Tt,kt,Bt){Bt=Math.pow(this.options.zoomOptions.scaleSpeed,Bt);const zt=this.scale*Bt;if(this.scale!==zt){zt>this.options.zoomOptions.maxScale?Bt=this.options.zoomOptions.maxScale/this.scale:zt<this.options.zoomOptions.minScale&&(Bt=this.options.zoomOptions.minScale/this.scale);var mn=this.getCanvas().getCTM(),En=this.getParentSvg().createSVGPoint();En.x=Tt,En.y=kt,En=En.matrixTransform(mn.inverse()),Tt=En.x,kt=En.y,mn=mn.translate(Tt*(1-Bt),kt*(1-Bt)).scale(Bt),this.scrollX=mn.e,this.scrollY=mn.f,this.setScale(zt)}}zoomCenter(Tt){var kt=this.getMetrics();let Bt;this.flyout?(Bt=kt.svgWidth?kt.svgWidth/2:0,kt=kt.svgHeight?kt.svgHeight/2:0):(Bt=kt.viewWidth/2+kt.absoluteLeft,kt=kt.viewHeight/2+kt.absoluteTop),this.zoom(Bt,kt,Tt)}zoomToFit(){if(this.isMovable()){var Tt=this.getMetrics(),kt=Tt.viewWidth;Tt=Tt.viewHeight;var Bt=this.getBlocksBoundingBox(),zt=2*O$,mn=Bt.right-Bt.left+zt;if(Bt=Bt.bottom-Bt.top+zt,mn){this.flyout&&(this.horizontalLayout?(Tt+=this.flyout.getHeight(),Bt+=this.flyout.getHeight()/this.scale):(kt+=this.flyout.getWidth(),mn+=this.flyout.getWidth()/this.scale)),kt/=mn,Tt/=Bt,Fo();try{this.setScale(Math.min(kt,Tt)),this.scrollCenter()}finally{_i()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){tr(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),tr(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){Zn(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Zn(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var Tt=this.getMetrics(),kt=(Tt.scrollWidth-Tt.viewWidth)/2,Bt=(Tt.scrollHeight-Tt.viewHeight)/2;kt=-kt-Tt.scrollLeft,Bt=-Bt-Tt.scrollTop,this.scroll(kt,Bt)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(Tt){if(this.isMovable()){if(Tt=Tt?this.getBlockById(Tt):null){var kt=Tt.getRelativeToSurfaceXY(),Bt=Tt.getHeightWidth(),zt=this.scale;Tt=(kt.x+(this.RTL?-1:1)*Bt.width/2)*zt,kt=(kt.y+Bt.height/2)*zt,Bt=this.getMetrics(),this.scroll(-(Tt-Bt.viewWidth/2),-(kt-Bt.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(Tt){this.options.zoomOptions.maxScale&&Tt>this.options.zoomOptions.maxScale?Tt=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&Tt<this.options.zoomOptions.minScale&&(Tt=this.options.zoomOptions.minScale),this.scale=Tt,this.hideChaff(!1),(Tt=this.getFlyout(!1))&&Tt.isVisible()&&(Tt.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),Tt=this.getMetrics(),this.scrollX-=Tt.absoluteLeft,this.scrollY-=Tt.absoluteTop,Tt.viewLeft+=Tt.absoluteLeft,Tt.viewTop+=Tt.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(Tt):this.scrollbar.resizeContent(Tt))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(Tt,kt){this.hideChaff(!0);const Bt=this.getMetrics();Tt=Math.min(Tt,-Bt.scrollLeft),kt=Math.min(kt,-Bt.scrollTop);const zt=Bt.scrollTop+Math.max(0,Bt.scrollHeight-Bt.viewHeight);Tt=Math.max(Tt,-(Bt.scrollLeft+Math.max(0,Bt.scrollWidth-Bt.viewWidth))),kt=Math.max(kt,-zt),this.scrollX=Tt,this.scrollY=kt,this.scrollbar&&this.scrollbar.set(-(Tt+Bt.scrollLeft),-(kt+Bt.scrollTop),!1),Tt+=Bt.absoluteLeft,kt+=Bt.absoluteTop,this.translate(Tt,kt)}getBlockById(Tt){return super.getBlockById(Tt)}getAllBlocks(Tt){return super.getAllBlocks(Tt)}getTopBlocks(Tt){return super.getTopBlocks(Tt)}addTopBlock(Tt){this.addTopBoundedElement(Tt),super.addTopBlock(Tt)}removeTopBlock(Tt){this.removeTopBoundedElement(Tt),super.removeTopBlock(Tt)}addTopComment(Tt){this.addTopBoundedElement(Tt),super.addTopComment(Tt)}removeTopComment(Tt){this.removeTopBoundedElement(Tt),super.removeTopComment(Tt)}addTopBoundedElement(Tt){this.topBoundedElements.push(Tt)}removeTopBoundedElement(Tt){Vl(this.topBoundedElements,Tt)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(Tt){const kt=!this.resizesEnabled&&Tt;this.resizesEnabled=Tt,kt&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(Tt,kt){if(typeof kt!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(Tt,kt)}getButtonCallback(Tt){let kt;return(kt=this.flyoutButtonCallbacks.get(Tt))!=null?kt:null}removeButtonCallback(Tt){this.flyoutButtonCallbacks.delete(Tt)}registerToolboxCategoryCallback(Tt,kt){if(typeof kt!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(Tt,kt)}getToolboxCategoryCallback(Tt){return this.toolboxCategoryCallbacks.get(Tt)||null}removeToolboxCategoryCallback(Tt){this.toolboxCategoryCallbacks.delete(Tt)}getGesture(Tt){const kt=Tt.type==="pointerdown",Bt=this.currentGesture_;return Bt?kt&&Bt.hasStarted()?(console.warn("Tried to start the same gesture twice."),Bt.cancel(),null):Bt:kt?this.currentGesture_=new Vp(Tt,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(Tt){iu(),Gl(),Lo();const kt=!!Tt;this.getComponentManager().getComponents(Dl.Capability.AUTOHIDEABLE,!0).forEach(Bt=>Bt.autoHide(kt))}static setTopLevelWorkspaceMetrics_(Tt){const kt=this.getMetrics();typeof Tt.x=="number"&&(this.scrollX=-(kt.scrollLeft+(kt.scrollWidth-kt.viewWidth)*Tt.x)),typeof Tt.y=="number"&&(this.scrollY=-(kt.scrollTop+(kt.scrollHeight-kt.viewHeight)*Tt.y)),this.translate(this.scrollX+kt.absoluteLeft,this.scrollY+kt.absoluteTop)}},kT={};kT.load=Ip,kT.save=Py;var iE=class{constructor(){this.priority=Cx}save(Tt){const kt=[];for(const Bt of Tt.getAllVariables())Tt={name:Bt.name,id:Bt.getId()},Bt.type&&(Tt.type=Bt.type),kt.push(Tt);return kt.length?kt:null}load(Tt,kt){for(const Bt of Tt)kt.createVariable(Bt.name,Bt.type,Bt.id)}clear(Tt){Tt.getVariableMap().clear()}};pm("variables",new iE);var oE={};oE.VariableSerializer=iE;var sE=class{constructor(Tt,kt){this.procedureModelClass=Tt,this.parameterModelClass=kt,this.priority=Ax}save(Tt){return Tt.getProcedureMap().getProcedures().map(kt=>Qm(kt))}load(Tt,kt){const Bt=kt.getProcedureMap();for(const zt of Tt)Bt.add(jm(this.procedureModelClass,this.parameterModelClass,zt,kt))}clear(Tt){Tt.getProcedureMap().clear()}},b$=new sE($v,Z0),Q_={};Q_.ProcedureSerializer=sE,Q_.loadParameter=gm,Q_.loadProcedure=jm,Q_.observableProcedureSerializer=b$,Q_.saveParameter=_d,Q_.saveProcedure=Qm;var S$={blocks:gv,exceptions:V0,priorities:YO,procedures:Q_,registry:ZS,variables:oE,workspaces:kT},aE=class extends Iv{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(Tt){super.setFontConstants_(Tt),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(Tt){super.setDynamicProperties_(Tt),this.SELECTED_GLOW_COLOUR=Tt.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const kt=Number(Tt.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=kt&&!isNaN(kt)?kt:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=Tt.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(Tt=Number(Tt.getComponentStyle("replacementGlowSize")))&&!isNaN(Tt)?Tt:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&fr(this.selectedGlowFilter_),this.replacementGlowFilter_&&fr(this.replacementGlowFilter_)}makeStartHat(){const Tt=this.START_HAT_HEIGHT,kt=this.START_HAT_WIDTH,Bt=lu("c",[To(25,-Tt),To(71,-Tt),To(kt,0)]);return{height:Tt,width:kt,path:Bt}}makeHexagonal(){function Tt(Bt,zt,mn){var En=Bt/2;return En=En>kt?kt:En,mn=mn?-1:1,Bt=(zt?-1:1)*Bt/2,Ku(-mn*En,Bt)+Ku(mn*En,Bt)}const kt=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(Bt){return Bt/=2,Bt>kt?kt:Bt},height(Bt){return Bt},connectionOffsetY(Bt){return Bt/2},connectionOffsetX(Bt){return-Bt},pathDown(Bt){return Tt(Bt,!1,!1)},pathUp(Bt){return Tt(Bt,!0,!1)},pathRightDown(Bt){return Tt(Bt,!1,!0)},pathRightUp(Bt){return Tt(Bt,!1,!0)}}}makeRounded(){function Tt(zt,mn,En){const Hn=zt>Bt?zt-Bt:0;return zt=(zt>Bt?Bt:zt)/2,Ls("a","0 0,1",zt,To((mn?-1:1)*zt,(mn?-1:1)*zt))+uo("v",(En?1:-1)*Hn)+Ls("a","0 0,1",zt,To((mn?1:-1)*zt,(mn?-1:1)*zt))}const kt=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Bt=2*kt;return{type:this.SHAPES.ROUND,isDynamic:!0,width(zt){return zt/=2,zt>kt?kt:zt},height(zt){return zt},connectionOffsetY(zt){return zt/2},connectionOffsetX(zt){return-zt},pathDown(zt){return Tt(zt,!1,!1)},pathUp(zt){return Tt(zt,!0,!1)},pathRightDown(zt){return Tt(zt,!1,!0)},pathRightUp(zt){return Tt(zt,!1,!0)}}}makeSquared(){function Tt(Bt,zt,mn){return Bt-=2*kt,Ls("a","0 0,1",kt,To((zt?-1:1)*kt,(zt?-1:1)*kt))+uo("v",(mn?1:-1)*Bt)+Ls("a","0 0,1",kt,To((zt?1:-1)*kt,(zt?-1:1)*kt))}const kt=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(Bt){return kt},height(Bt){return Bt},connectionOffsetY(Bt){return Bt/2},connectionOffsetX(Bt){return-Bt},pathDown(Bt){return Tt(Bt,!1,!1)},pathUp(Bt){return Tt(Bt,!0,!1)},pathRightDown(Bt){return Tt(Bt,!1,!0)},pathRightUp(Bt){return Tt(Bt,!1,!0)}}}shapeFor(Tt){let kt=Tt.getCheck();switch(!kt&&Tt.targetConnection&&(kt=Tt.targetConnection.getCheck()),Tt.type){case po.INPUT_VALUE:case po.OUTPUT_VALUE:if(Tt=Tt.getSourceBlock().getOutputShape(),Tt!==null)switch(Tt){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return kt&&kt.indexOf("Boolean")!==-1?this.HEXAGONAL:kt&&kt.indexOf("Number")!==-1?this.ROUNDED:(kt&&kt.indexOf("String"),this.ROUNDED);case po.PREVIOUS_STATEMENT:case po.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function Tt(lo){return lu("c",[To(lo*mn/2,0),To(lo*mn*3/4,Hn/2),To(lo*mn,Hn)])+Fm([To(lo*mn,En)])+lu("c",[To(lo*mn/4,Hn/2),To(lo*mn/2,Hn),To(lo*mn,Hn)])+uo("h",lo*zt)+lu("c",[To(lo*mn/2,0),To(lo*mn*3/4,-(Hn/2)),To(lo*mn,-Hn)])+Fm([To(lo*mn,-En)])+lu("c",[To(lo*mn/4,-(Hn/2)),To(lo*mn/2,-Hn),To(lo*mn,-Hn)])}const kt=this.NOTCH_WIDTH,Bt=this.NOTCH_HEIGHT,zt=kt/3,mn=zt/3,En=Bt/2,Hn=En/2,pr=Tt(1),Kr=Tt(-1);return{type:this.SHAPES.NOTCH,width:kt,height:Bt,pathLeft:pr,pathRight:Kr}}makeInsideCorners(){const Tt=this.CORNER_RADIUS,kt=Ls("a","0 0,0",Tt,To(-Tt,Tt)),Bt=Ls("a","0 0,1",Tt,To(-Tt,Tt)),zt=Ls("a","0 0,0",Tt,To(Tt,Tt)),mn=Ls("a","0 0,1",Tt,To(Tt,Tt));return{width:Tt,height:Tt,pathTop:kt,pathBottom:zt,rightWidth:Tt,rightHeight:Tt,pathTopRight:Bt,pathBottomRight:mn}}generateSecondaryColour_(Tt){return Mu("#000",Tt,.15)||Tt}generateTertiaryColour_(Tt){return Mu("#000",Tt,.25)||Tt}createDom(Tt,kt,Bt){super.createDom(Tt,kt,Bt),Tt=Cn(Er.DEFS,{},Tt),kt=Cn(Er.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},Tt),Cn(Er.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},kt),Bt=Cn(Er.FECOMPONENTTRANSFER,{result:"outBlur"},kt),Cn(Er.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},Bt),Cn(Er.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},kt),Cn(Er.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},kt),this.selectedGlowFilterId=kt.id,this.selectedGlowFilter_=kt,Tt=Cn(Er.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},Tt),Cn(Er.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},Tt),kt=Cn(Er.FECOMPONENTTRANSFER,{result:"outBlur"},Tt),Cn(Er.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},kt),Cn(Er.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},Tt),Cn(Er.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},Tt),Cn(Er.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},Tt),this.replacementGlowFilterId=Tt.id,this.replacementGlowFilter_=Tt}getCSS_(Tt){return[`${Tt} .blocklyText,`,`${Tt} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${Tt} .blocklyText {`,"fill: #fff;","}",`${Tt} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${Tt} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${Tt} .blocklyNonEditableText>text,`,`${Tt} .blocklyEditableText>text,`,`${Tt} .blocklyNonEditableText>g>text,`,`${Tt} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${Tt} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${Tt} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${Tt} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${Tt} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${Tt} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${Tt} .blocklyDropdownText {`,"fill: #fff !important;","}",`${Tt}.blocklyWidgetDiv .goog-menuitem,`,`${Tt}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${Tt}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${Tt} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${Tt} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${Tt} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},lE=class extends Rv{constructor(Tt,kt){super(Tt,kt)}draw(){const Tt=this.block_.pathObject;if(Tt.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),Tt.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&Tt.flipRTL(),cp()){let kt,Bt;(kt=this.block_)==null||(Bt=kt.renderingDebugger)==null||Bt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(Tt.outputShapeType=this.info_.outputConnection.shape.type),Tt.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(Tt){if(!(0>=Tt.height))if(Tr.isSpacer(Tt)&&(Tt.precedesStatement||Tt.followsStatement)){var kt=this.constants_.INSIDE_CORNERS.rightHeight;kt=Tt.height-(Tt.precedesStatement?kt:0),this.outlinePath_+=(Tt.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<kt?uo("V",Tt.yPos+kt):"")+(Tt.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=uo("V",Tt.yPos+Tt.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const Tt=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=gs(Tt.xPos,this.info_.startY),this.outlinePath_+=uo("h",Tt.width)}drawFlatBottom_(){const Tt=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=uo("V",Tt.baseline),this.outlinePath_+=uo("h",-Tt.width)}drawInlineInput_(Tt){this.positionInlineInputConnection_(Tt);const kt=Tt.input.name;if(!Tt.connectedBlock&&!this.info_.isInsertionMarker){var Bt=Tt.width-2*Tt.connectionWidth;Tt=xa(Tt.xPos+Tt.connectionWidth,Tt.centerline-Tt.height/2)+uo("h",Bt)+Tt.shape.pathRightDown(Tt.height)+uo("h",-Bt)+Tt.shape.pathUp(Tt.height)+"z",this.block_.pathObject.setOutlinePath(kt,Tt)}}drawStatementInput_(Tt){var kt=Tt.getLastInput();const Bt=kt.xPos+kt.notchOffset+kt.shape.width,zt=kt.shape.pathRight+uo("h",-(kt.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,mn=Tt.height-2*this.constants_.INSIDE_CORNERS.height;kt=this.constants_.INSIDE_CORNERS.pathBottom+uo("h",kt.notchOffset-this.constants_.INSIDE_CORNERS.width)+(kt.connectedBottomNextConnection?"":kt.shape.pathLeft),this.outlinePath_+=uo("H",Bt)+zt+uo("v",mn)+kt+uo("H",Tt.xPos+Tt.width),this.positionStatementInputConnection_(Tt)}};dt.FieldImage$$module$build$src$core$field_image=class extends qo{constructor(Tt,kt,Bt,zt,mn,En,Hn){if(super(qo.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",Bt=Number(Ss(Bt)),kt=Number(Ss(kt)),isNaN(Bt)||isNaN(kt))throw Error("Height and width values of an image field must cast to numbers.");if(0>=Bt||0>=kt)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Pl(kt,Bt+dt.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=Bt,typeof mn=="function"&&(this.clickHandler_=mn),Tt!==qo.SKIP_SETUP&&(Hn?this.configure_(Hn):(this.flipRtl_=!!En,this.altText_=Ss(zt)||""),this.setValue(Ss(Tt)))}configure_(Tt){super.configure_(Tt),Tt.flipRtl&&(this.flipRtl_=Tt.flipRtl),Tt.alt&&(this.altText_=Ss(Tt.alt))}initView(){this.imageElement_=Cn(Er.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(xu,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(Tt){return typeof Tt!="string"?null:Tt}doValueUpdate_(Tt){this.value_=Tt,this.imageElement_&&this.imageElement_.setAttributeNS(xu,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(Tt){Tt!==this.altText_&&(this.altText_=Tt||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(Tt){this.clickHandler_=Tt}getText_(){return this.altText_}static fromJson(Tt){if(!Tt.src||!Tt.width||!Tt.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(Tt.src,Tt.width,Tt.height,void 0,void 0,void 0,Tt)}},dt.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,Ul("field_image",dt.FieldImage$$module$build$src$core$field_image),dt.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",dt.FieldImage$$module$build$src$core$field_image;var Pv=class extends qo{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){super.configure_(Tt),Tt.spellcheck!==void 0&&(this.spellcheck_=Tt.spellcheck)}initView(){const Tt=this.getSourceBlock();if(!Tt)throw new Ys;if(this.getConstants().FULL_BLOCK_FIELDS){let kt=0,Bt=0;for(let zt=0,mn;mn=Tt.inputList[zt];zt++){for(let En=0;mn.fieldRow[En];En++)kt++;mn.connection&&Bt++}this.fullBlockClickTarget_=1>=kt&&Tt.outputConnection&&!Bt}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(Tt){return Tt==null?null:String(Tt)}doValueInvalid_(Tt){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,Tt=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ts()&&to(new(no(yl))(this.sourceBlock_,"field",this.name||null,Tt,this.value_)))}doValueUpdate_(Tt){this.isTextValid_=this.isDirty_=!0,this.value_=Tt}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var Tt=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",Tt.style.colourTertiary):Tt.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const Tt=this.htmlInput_;this.isTextValid_?(Zn(Tt,"blocklyInvalidInput"),fs(Tt,xs.INVALID,!1)):(tr(Tt,"blocklyInvalidInput"),fs(Tt,xs.INVALID,!0))}}setSpellcheck(Tt){Tt!==this.spellcheck_&&(this.spellcheck_=Tt,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(Tt,kt){this.workspace_=this.sourceBlock_.workspace,Tt=kt||!1,!Tt&&this.workspace_.options.modalInputs&&(na||No||$o)?this.showPromptEditor_():this.showInlineEditor_(Tt)}showPromptEditor_(){Sp(ko.CHANGE_VALUE_TITLE,this.getText(),Tt=>{Tt!==null&&this.setValue(this.getValueFromEditorText_(Tt))})}showInlineEditor_(Tt){const kt=this.getSourceBlock();if(!kt)throw new Ys;um(this,kt.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,Tt||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var Tt=this.getSourceBlock();if(!Tt)throw new Ys;fo(!0);const kt=cm();var Bt=this.getClickTarget_();if(!Bt)throw Error("A click target has not been set.");tr(Bt,"editing"),Bt=document.createElement("input"),Bt.className="blocklyHtmlInput",Bt.setAttribute("spellcheck",this.spellcheck_);const zt=this.workspace_.getScale();var mn=this.getConstants().FIELD_TEXT_FONTSIZE*zt+"pt";return kt.style.fontSize=mn,Bt.style.fontSize=mn,mn=Pv.BORDERRADIUS*zt+"px",this.fullBlockClickTarget_&&(mn=this.getScaledBBox(),mn=(mn.bottom-mn.top)/2+"px",Tt=Tt.getParent()?Tt.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Bt.style.border=1*zt+"px solid "+Tt,kt.style.borderRadius=mn,kt.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(kt.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*zt+"px")),Bt.style.borderRadius=mn,kt.appendChild(Bt),Bt.value=Bt.defaultValue=this.getEditorText_(this.value_),Bt.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(Bt),Bt}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),fo(!1),this.unbindInputEvents_();var Tt=cm().style;if(Tt.width="auto",Tt.height="auto",Tt.fontSize="",Tt.transition="",Tt.boxShadow="",this.htmlInput_=null,Tt=this.getClickTarget_(),!Tt)throw Error("A click target has not been set.");Zn(Tt,"editing")}onFinishEditing_(Tt){}bindInputEvents_(Tt){this.onKeyDownWrapper_=Zt(Tt,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Zt(Tt,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(cn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(cn(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(Tt){Tt.keyCode===vo.ENTER?(Gl(),Lo()):Tt.keyCode===vo.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),Gl(),Lo()):Tt.keyCode===vo.TAB&&(Gl(),Lo(),this.sourceBlock_.tab(this,!Tt.shiftKey),Tt.preventDefault())}onHtmlInputChange_(Tt){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(Tt){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(Tt)),this.setValue(Tt)}resizeEditor_(){var Tt=this.getSourceBlock();if(!Tt)throw new Ys;const kt=cm(),Bt=this.getScaledBBox();kt.style.width=Bt.right-Bt.left+"px",kt.style.height=Bt.bottom-Bt.top+"px",Tt=new ao(Tt.RTL?Bt.right-kt.offsetWidth:Bt.left,Bt.top),kt.style.left=Tt.x+"px",kt.style.top=Tt.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(Tt){return String(Tt)}getValueFromEditorText_(Tt){return Tt}};Pv.BORDERRADIUS=4,dt.FieldTextInput$$module$build$src$core$field_textinput=class extends Pv{constructor(Tt,kt,Bt){super(Tt,kt,Bt)}static fromJson(Tt){return new this(Ss(Tt.text),void 0,Tt)}},Ul("field_input",dt.FieldTextInput$$module$build$src$core$field_textinput),dt.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",dt.FieldTextInput$$module$build$src$core$field_textinput;var cE=class extends yT{constructor(Tt){super(Tt)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(Tt){return!!Tt.outputConnection}hasRightSquareCorner(Tt){return!!Tt.outputConnection&&!Tt.statementInputCount&&!Tt.nextConnection}},uE=class extends Cv{constructor(Tt,kt){if(super(Tt,kt),this.connectedBottomNextConnection=!1,this.connectedBlock){for(Tt=this.connectedBlock;kt=Tt.getNextBlock();)Tt=kt;Tt.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},hE=class extends Hp{constructor(Tt){super(Tt),this.width=this.height=0,this.type|=Tr.getType("RIGHT_CONNECTION")}},dE=class extends TT{constructor(Tt){super(Tt)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(Tt){const kt=(Tt.hat?Tt.hat==="cap":this.constants_.ADD_START_HATS)&&!Tt.outputConnection&&!Tt.previousConnection;return!!Tt.outputConnection||kt}hasRightSquareCorner(Tt){return!!Tt.outputConnection&&!Tt.statementInputCount&&!Tt.nextConnection}},fE=class extends q0{constructor(Tt,kt){super(Tt,kt),this.isInline=!0,this.renderer_=Tt,this.constants_=this.renderer_.getConstants(),this.topRow=new dE(this.constants_),this.bottomRow=new cE(this.constants_),this.isMultiRow=!kt.getInputsInline()||kt.isCollapsed(),this.hasStatementInput=0<kt.statementInputCount,this.rightSide=this.outputConnection?new hE(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(Tt,kt){return kt?Tt.type===Uo.STATEMENT||kt.type===Uo.STATEMENT?!0:Tt.type===Uo.VALUE||Tt.type===Uo.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(Tt){return Tt.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(Tt)}getInRowSpacing_(Tt,kt){return Tt&&kt||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!Tt&&kt&&Tr.isStatementInput(kt)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:Tt&&Tr.isLeftRoundedCorner(Tt)&&kt&&(Tr.isPreviousConnection(kt)||Tr.isNextConnection(kt))?kt.notchOffset-this.constants_.CORNER_RADIUS:Tt&&Tr.isLeftSquareCorner(Tt)&&kt&&Tr.isHat(kt)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(Tt,kt){if(Tr.isTopRow(Tt)&&Tr.isBottomRow(kt))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const Bt=Tr.isInputRow(Tt)&&Tt.hasStatement,zt=Tr.isInputRow(kt)&&kt.hasStatement;return zt||Bt?(Tt=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),zt&&Bt?Math.max(Tt,this.constants_.DUMMY_INPUT_MIN_HEIGHT):Tt):Tr.isTopRow(Tt)?Tt.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Tr.isBottomRow(kt)?this.outputConnection?!kt.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(Tt,kt){const Bt=this.width-this.startX;return Tr.isInputRow(Tt)&&Tt.hasStatement||Tr.isInputRow(kt)&&kt.hasStatement?Math.max(Bt,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):Bt}getElemCenterline_(Tt,kt){if(Tt.hasStatement&&!Tr.isSpacer(kt)&&!Tr.isStatementInput(kt))return Tt.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Tr.isInlineInput(kt)&&kt instanceof $m){const Bt=kt.connectedBlock;if(Bt&&Bt.outputConnection&&Bt.nextConnection)return Tt.yPos+Bt.height/2}return super.getElemCenterline_(Tt,kt)}addInput_(Tt,kt){if(Tt.type===Uo.DUMMY&&kt.hasDummyInput&&kt.align===dt.Align$$module$build$src$core$input.LEFT&&Tt.align===dt.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(kt,Tt);else if(Tt.type===Uo.STATEMENT){kt.elements.push(new uE(this.constants_,Tt)),kt.hasStatement=!0,kt.align===null&&(kt.align=Tt.align);return}super.addInput_(Tt,kt)}addAlignmentPadding_(Tt,kt){if(this.rightAlignedDummyInputs_.get(Tt)){let Bt;for(let zt=0;zt<Tt.elements.length;zt++){const mn=Tt.elements[zt];if(Tr.isSpacer(mn)&&(Bt=mn),Tr.isField(mn)&&mn instanceof H_&&mn.parentInput===this.rightAlignedDummyInputs_.get(Tt))break}if(Bt){Bt.width+=kt,Tt.width+=kt;return}}super.addAlignmentPadding_(Tt,kt)}adjustXPosition_(){const Tt=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let kt=Tt;for(let mn=2;mn<this.rows.length-1;mn+=2){var Bt=this.rows[mn-1];const En=this.rows[mn];var zt=this.rows[mn+1];if(Bt=mn===2?!!this.topRow.hasPreviousConnection:!!Bt.followsStatement,zt=mn+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!zt.precedesStatement,Tr.isInputRow(En)&&En.hasStatement){En.measure();let Hn,pr;kt=En.width-((pr=(Hn=En.getLastInput())==null?void 0:Hn.width)!=null?pr:0)+Tt}else if(Bt&&(mn===2||zt)&&Tr.isInputRow(En)&&!En.hasStatement){zt=En.xPos,Bt=null;for(let Hn=0;Hn<En.elements.length;Hn++){const pr=En.elements[Hn];Tr.isSpacer(pr)&&(Bt=pr),Bt&&(Tr.isField(pr)||Tr.isInput(pr))&&zt<kt&&!(Tr.isField(pr)&&pr instanceof H_&&(pr.field instanceof dt.FieldLabel$$module$build$src$core$field_label||pr.field instanceof dt.FieldImage$$module$build$src$core$field_image))&&(Bt.width+=kt-zt),zt+=pr.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var Tt=this.outputConnection.shape;if("isDynamic"in Tt&&Tt.isDynamic){for(var kt=0,Bt=0;Bt<this.rows.length;Bt++){const zt=this.rows[Bt];zt.yPos=kt,kt+=zt.height}this.height=kt,Bt=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,kt=Tt.height(Bt),Bt=Tt.width(Bt),this.outputConnection.height=kt,this.outputConnection.width=Bt,this.outputConnection.startX=Bt,this.outputConnection.connectionOffsetY=Tt.connectionOffsetY(kt),this.outputConnection.connectionOffsetX=Tt.connectionOffsetX(Bt),Tt=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(Tt=Bt,this.rightSide.height=kt,this.rightSide.width=Tt,this.rightSide.centerline=kt/2,this.rightSide.xPos=this.width+Tt),this.startX=Bt,this.width+=Bt+Tt,this.widthWithChildren+=Bt+Tt}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var Tt=0,kt=0;kt<this.rows.length;kt++){var Bt=this.rows[kt];if(!Tr.isInputRow(Bt))continue;Tt=Bt.elements[Bt.elements.length-2];let zt=this.getNegativeSpacing_(Bt.elements[1]),mn=this.getNegativeSpacing_(Tt);Tt=zt+mn;const En=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-Tt<En&&(Tt=this.width-En,zt=Tt/2,mn=Tt/2),Bt.elements.unshift(new Fu(this.constants_,-zt)),Bt.elements.push(new Fu(this.constants_,-mn))}if(Tt)for(this.width-=Tt,this.widthWithChildren-=Tt,this.rightSide.xPos-=Tt,kt=0;kt<this.rows.length;kt++)Bt=this.rows[kt],Tr.isTopOrBottomRow(Bt)&&(Bt.elements[1].width-=Tt),Bt.width-=Tt,Bt.widthWithConnectedBlocks-=Tt}}getNegativeSpacing_(Tt){if(!Tt||!this.outputConnection)return 0;const kt=this.outputConnection.width;var Bt=this.outputConnection.shape.type;const zt=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(Bt){case zt.SHAPES.ROUND:return Bt=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Bt=this.height/2>Bt?Bt:this.height/2,kt-Bt*(1-Math.sin(Math.acos((Bt-this.constants_.SMALL_PADDING)/Bt)));default:return 0}if(Tr.isInlineInput(Tt)&&Tt instanceof $m){const mn=Tt.connectedBlock;return Tt=mn?mn.pathObject.outputShapeType:Tt.shape.type,Tt==null||mn&&mn.outputConnection&&(mn.statementInputCount||mn.nextConnection)||Bt===zt.SHAPES.HEXAGONAL&&Bt!==Tt?0:kt-this.constants_.SHAPE_IN_SHAPE_PADDING[Bt][Tt]}return Tr.isField(Tt)&&Tt instanceof H_?Bt===zt.SHAPES.ROUND&&Tt.field instanceof dt.FieldTextInput$$module$build$src$core$field_textinput?kt-2.75*zt.GRID_UNIT:kt-this.constants_.SHAPE_IN_SHAPE_PADDING[Bt][0]:Tr.isIcon(Tt)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let zt=2;zt<this.rows.length-1;zt+=2){const mn=this.rows[zt-1],En=this.rows[zt],Hn=this.rows[zt+1];var Tt=zt===2,kt=zt+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Hn.precedesStatement;if(Tt?this.topRow.hasPreviousConnection:mn.followsStatement){var Bt=En.elements[1];if(Bt=En.elements.length===3&&Bt instanceof H_&&(Bt.field instanceof dt.FieldLabel$$module$build$src$core$field_label||Bt.field instanceof dt.FieldImage$$module$build$src$core$field_image),!Tt&&Bt)mn.height-=this.constants_.SMALL_PADDING,Hn.height-=this.constants_.SMALL_PADDING,En.height-=this.constants_.MEDIUM_PADDING;else if(!Tt&&!kt)mn.height+=this.constants_.SMALL_PADDING;else if(kt){for(Tt=!1,kt=0;kt<En.elements.length;kt++)if(Bt=En.elements[kt],Bt instanceof $m&&Tr.isInlineInput(Bt)&&Bt.connectedBlock&&!Bt.connectedBlock.isShadow()&&40<=Bt.connectedBlock.getHeightWidth().height){Tt=!0;break}Tt&&(mn.height-=this.constants_.SMALL_PADDING,Hn.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},pE=class extends ET{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.markerCircle_=null}showWithInputOutput_(Tt){const kt=Tt.getSourceBlock();Tt=Tt.getLocation().getOffsetInBlock(),this.positionCircle_(Tt.x,Tt.y),this.setParent_(kt),this.showCurrent_()}showWithOutput_(Tt){this.showWithInputOutput_(Tt)}showWithInput_(Tt){this.showWithInputOutput_(Tt)}showWithBlock_(Tt){Tt=Tt.getLocation();const kt=Tt.getHeightWidth();this.positionRect_(0,0,kt.width,kt.height),this.setParent_(Tt),this.showCurrent_()}positionCircle_(Tt,kt){let Bt;(Bt=this.markerCircle_)==null||Bt.setAttribute("cx",Tt.toString());let zt;(zt=this.markerCircle_)==null||zt.setAttribute("cy",kt.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=Cn(Er.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const Tt=this.getBlinkProperties_();Cn(Er.ANIMATE,Tt,this.markerCircle_)}return this.markerSvg_}applyColour_(Tt){super.applyColour_(Tt);let kt;(kt=this.markerCircle_)==null||kt.setAttribute("fill",this.colour_);let Bt;if((Bt=this.markerCircle_)==null||Bt.setAttribute("stroke",this.colour_),this.isCursor()){Tt=this.colour_+";transparent;transparent;";let zt;(zt=this.markerCircle_)==null||zt.firstElementChild.setAttribute("values",Tt)}}},mE=class extends tS{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=Bt}setPath(Tt){super.setPath(Tt),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",Tt)}applyColour(Tt){super.applyColour(Tt);const kt=Tt.getParent();Tt.isShadow()&&kt&&this.svgPath.setAttribute("stroke",kt.style.colourTertiary);for(const Bt of this.outlines.values())Bt.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const Tt of this.outlines.values())Tt.setAttribute("transform","scale(-1 1)")}updateSelected(Tt){this.setClass_("blocklySelected",Tt),Tt?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(Tt){this.setClass_("blocklyReplaceable",Tt),Tt?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(Tt,kt){Tt=Tt.getParentInput().name,(Tt=this.getOutlinePath_(Tt))&&(kt?Tt.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):Tt.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const Tt of this.outlines.keys())this.remainingOutlines.add(Tt)}endDrawing(){if(this.remainingOutlines.size)for(const Tt of this.remainingOutlines)this.removeOutlinePath_(Tt);this.remainingOutlines.clear()}setOutlinePath(Tt,kt){Tt=this.getOutlinePath_(Tt),Tt.setAttribute("d",kt),Tt.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(Tt){return this.outlines.has(Tt)||this.outlines.set(Tt,Cn(Er.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(Tt),this.outlines.get(Tt)}removeOutlinePath_(Tt){let kt,Bt;(kt=this.outlines.get(Tt))==null||(Bt=kt.parentNode)==null||Bt.removeChild(this.outlines.get(Tt)),this.outlines.delete(Tt)}},gE=class extends Mv{constructor(Tt){super(Tt)}makeConstants_(){return new aE}makeRenderInfo_(Tt){return new fE(this,Tt)}makeDrawer_(Tt,kt){return new lE(Tt,kt)}makeMarkerDrawer(Tt,kt){return new pE(Tt,this.getConstants(),kt)}makePathObject(Tt,kt){return new mE(Tt,kt,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(Tt){return Tt.type!==po.INPUT_VALUE&&Tt.type!==po.OUTPUT_VALUE}getConnectionPreviewMethod(Tt,kt,Bt){return kt.type===po.OUTPUT_VALUE?Tt.isConnected()?Uu.PREVIEW_TYPE.REPLACEMENT_FADE:Uu.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(Tt,kt,Bt)}};up("zelos",gE);var bp={};bp.BottomRow=cE,bp.ConstantProvider=aE,bp.Drawer=lE,bp.MarkerSvg=pE,bp.PathObject=mE,bp.RenderInfo=fE,bp.Renderer=gE,bp.RightConnectionShape=hE,bp.StatementInput=uE,bp.TopRow=dE;var _E=class extends q0{constructor(Tt,kt){super(Tt,kt)}getRenderer(){return this.renderer_}addElemSpacing_(){let Tt=!1;for(var kt=0;kt<this.rows.length;kt++)if(this.rows[kt].hasExternalInput){Tt=!0;break}for(kt=0;kt<this.rows.length;kt++){const zt=this.rows[kt];var Bt=zt.elements;if(zt.elements=[],zt.startsWithElemSpacer()&&zt.elements.push(new Fu(this.constants_,this.getInRowSpacing_(null,Bt[0]))),Bt.length){for(let mn=0;mn<Bt.length-1;mn++){zt.elements.push(Bt[mn]);const En=this.getInRowSpacing_(Bt[mn],Bt[mn+1]);zt.elements.push(new Fu(this.constants_,En))}zt.elements.push(Bt[Bt.length-1]),zt.endsWithElemSpacer()&&(Bt=this.getInRowSpacing_(Bt[Bt.length-1],null),Tt&&zt.hasDummyInput&&(Bt+=this.constants_.TAB_WIDTH),zt.elements.push(new Fu(this.constants_,Bt)))}}}getInRowSpacing_(Tt,kt){if(!Tt)return kt&&Tr.isField(kt)&&kt.isEditable?this.constants_.MEDIUM_PADDING:kt&&Tr.isInlineInput(kt)?this.constants_.MEDIUM_LARGE_PADDING:kt&&Tr.isStatementInput(kt)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Tr.isInput(Tt)&&!kt)return Tr.isField(Tt)&&Tt.isEditable?this.constants_.MEDIUM_PADDING:Tr.isIcon(Tt)?2*this.constants_.LARGE_PADDING+1:Tr.isHat(Tt)?this.constants_.NO_PADDING:Tr.isPreviousOrNextConnection(Tt)?this.constants_.LARGE_PADDING:Tr.isLeftRoundedCorner(Tt)?this.constants_.MIN_BLOCK_WIDTH:Tr.isJaggedEdge(Tt)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Tr.isInput(Tt)&&!kt){if(Tr.isExternalInput(Tt))return this.constants_.NO_PADDING;if(Tr.isInlineInput(Tt))return this.constants_.LARGE_PADDING;if(Tr.isStatementInput(Tt))return this.constants_.NO_PADDING}if(!Tr.isInput(Tt)&&kt&&Tr.isInput(kt)){if(Tr.isField(Tt)&&Tt.isEditable){if(Tr.isInlineInput(kt)||Tr.isExternalInput(kt))return this.constants_.SMALL_PADDING}else{if(Tr.isInlineInput(kt)||Tr.isExternalInput(kt))return this.constants_.MEDIUM_LARGE_PADDING;if(Tr.isStatementInput(kt))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Tr.isIcon(Tt)&&kt&&!Tr.isInput(kt))return this.constants_.LARGE_PADDING;if(Tr.isInlineInput(Tt)&&kt&&Tr.isField(kt))return kt.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Tr.isLeftSquareCorner(Tt)&&kt){if(Tr.isHat(kt))return this.constants_.NO_PADDING;if(Tr.isPreviousConnection(kt)||Tr.isNextConnection(kt))return kt.notchOffset}return Tr.isLeftRoundedCorner(Tt)&&kt?kt.notchOffset-this.constants_.CORNER_RADIUS:Tr.isField(Tt)&&kt&&Tr.isField(kt)&&Tt.isEditable===kt.isEditable||kt&&Tr.isJaggedEdge(kt)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(Tt,kt){return Tr.isTopRow(Tt)&&Tr.isBottomRow(kt)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Tr.isTopRow(Tt)||Tr.isBottomRow(kt)?this.constants_.NO_PADDING:Tt.hasExternalInput&&kt.hasExternalInput?this.constants_.LARGE_PADDING:!Tt.hasStatement&&kt.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:Tt.hasStatement&&kt.hasStatement||Tt.hasDummyInput||kt.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(Tt,kt){if(Tr.isSpacer(kt))return Tt.yPos+kt.height/2;if(Tr.isBottomRow(Tt))return Tt=Tt.yPos+Tt.height-Tt.descenderHeight,Tr.isNextConnection(kt)?Tt+kt.height/2:Tt-kt.height/2;if(Tr.isTopRow(Tt))return Tr.isHat(kt)?Tt.capline-kt.height/2:Tt.capline+kt.height/2;let Bt=Tt.yPos;return Bt=Tr.isField(kt)&&Tt.hasStatement?Bt+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+kt.height/2):Bt+Tt.height/2}finalize_(){let Tt=0,kt=0;for(var Bt=0;Bt<this.rows.length;Bt++){const mn=this.rows[Bt];mn.yPos=kt,mn.xPos=this.startX,kt+=mn.height,Tt=Math.max(Tt,mn.widthWithConnectedBlocks);var zt=kt-this.topRow.ascenderHeight;mn===this.bottomRow&&zt<this.constants_.MIN_BLOCK_HEIGHT&&(zt=this.constants_.MIN_BLOCK_HEIGHT-zt,this.bottomRow.height+=zt,kt+=zt),this.recordElemPositions_(mn)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Bt=this.block_.nextConnection.targetBlock())&&(Tt=Math.max(Tt,Bt.getHeightWidth().width)),this.bottomRow.baseline=kt-this.bottomRow.descenderHeight,this.widthWithChildren=Tt+this.startX,this.height=kt,this.startY=this.topRow.capline}},yE=class extends Mv{constructor(Tt){super(Tt)}makeRenderInfo_(Tt){return new _E(this,Tt)}};up("thrasos",yE);var IT={};IT.RenderInfo=_E,IT.Renderer=yE;var vE=class extends Iv{constructor(){super()}},OE=class extends Rv{constructor(Tt,kt){super(Tt,kt)}},bE=class extends q0{constructor(Tt,kt){super(Tt,kt)}getRenderer(){return this.renderer_}},SE=class extends Mv{constructor(Tt){super(Tt)}makeConstants_(){return new vE}makeRenderInfo_(Tt){return new bE(this,Tt)}makeDrawer_(Tt,kt){return new OE(Tt,kt)}};up("minimalist",SE);var Dv={};Dv.ConstantProvider=vE,Dv.Drawer=OE,Dv.RenderInfo=bE,Dv.Renderer=SE;var TE=class extends Iv{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(Tt){return super.getCSS_(Tt).concat([`${Tt} .blocklyInsertionMarker>.blocklyPathLight,`,`${Tt} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},xE=class{constructor(Tt){this.inlineSteps_=this.steps_="",this.info_=Tt,this.RTL_=this.info_.RTL,Tt=Tt.getRenderer(),this.constants_=Tt.getConstants(),this.highlightConstants_=Tt.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(Tt){this.steps_+=gs(Tt.xPos,this.info_.startY);for(let kt=0,Bt;Bt=Tt.elements[kt];kt++)Tr.isLeftSquareCorner(Bt)?this.steps_+=this.highlightConstants_.START_POINT:Tr.isLeftRoundedCorner(Bt)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Tr.isPreviousConnection(Bt)?this.steps_+=this.notchPaths_.pathLeft:Tr.isHat(Bt)?this.steps_+=this.startPaths_.path(this.RTL_):Tr.isSpacer(Bt)&&Bt.width!==0&&(this.steps_+=uo("H",Bt.xPos+Bt.width-this.highlightOffset_));this.steps_+=uo("H",Tt.xPos+Tt.width-this.highlightOffset_)}drawJaggedEdge_(Tt){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+uo("v",Tt.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(Tt){const kt=Tt.getLastInput();if(this.RTL_){const Bt=Tt.height-kt.connectionHeight;this.steps_+=xa(kt.xPos+kt.width-this.highlightOffset_,Tt.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+uo("v",Bt)}else this.steps_+=xa(kt.xPos+kt.width,Tt.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(Tt){const kt=Tt.getLastInput();if(kt)if(this.RTL_){const Bt=Tt.height-2*this.insideCornerPaths_.height;this.steps_+=xa(kt.xPos,Tt.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+uo("v",Bt)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ku(Tt.width-kt.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=xa(kt.xPos,Tt.yPos+Tt.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ku(Tt.width-kt.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(Tt){const kt=Tt.xPos+Tt.width-this.highlightOffset_;Tt instanceof ST&&Tt.followsStatement&&(this.steps_+=uo("H",kt)),this.RTL_&&(this.steps_+=uo("H",kt),Tt.height>this.highlightOffset_&&(this.steps_+=uo("V",Tt.yPos+Tt.height-this.highlightOffset_)))}drawBottomRow(Tt){if(this.RTL_)this.steps_+=uo("V",Tt.baseline-this.highlightOffset_);else{const kt=this.info_.bottomRow.elements[0];Tr.isLeftSquareCorner(kt)?this.steps_+=xa(Tt.xPos+this.highlightOffset_,Tt.baseline-this.highlightOffset_):Tr.isLeftRoundedCorner(kt)&&(this.steps_+=xa(Tt.xPos,Tt.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var Tt=this.info_.outputConnection;Tt&&(Tt=Tt.connectionOffsetY+Tt.height,this.RTL_?this.steps_+=xa(this.info_.startX,Tt):(this.steps_+=xa(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=uo("V",Tt)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(Tt=this.info_.topRow,Tr.isLeftRoundedCorner(Tt.elements[0])?this.steps_+=uo("V",this.outsideCornerPaths_.height):this.steps_+=uo("V",Tt.capline+this.highlightOffset_))}drawInlineInput(Tt){const kt=this.highlightOffset_,Bt=Tt.xPos+Tt.connectionWidth;var zt=Tt.centerline-Tt.height/2;const mn=Tt.width-Tt.connectionWidth,En=zt+kt;this.RTL_?(zt=Tt.connectionOffsetY-kt,Tt=Tt.height-(Tt.connectionOffsetY+Tt.connectionHeight)+kt,this.inlineSteps_+=xa(Bt-kt,En)+uo("v",zt)+this.puzzleTabPaths_.pathDown(this.RTL_)+uo("v",Tt)+uo("h",mn)):this.inlineSteps_+=xa(Tt.xPos+Tt.width+kt,En)+uo("v",Tt.height)+uo("h",-mn)+xa(Bt,zt+Tt.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},EE=class extends Rv{constructor(Tt,kt){super(Tt,kt),this.highlighter_=new xE(kt)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const Tt=this.block_.pathObject;if(Tt.setPath(this.outlinePath_+`
`+this.inlinePath_),Tt.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&Tt.flipRTL(),cp()){let kt,Bt;(kt=this.block_)==null||(Bt=kt.renderingDebugger)==null||Bt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(Tt){this.highlighter_.drawJaggedEdge_(Tt),super.drawJaggedEdge_(Tt)}drawValueInput_(Tt){this.highlighter_.drawValueInput(Tt),super.drawValueInput_(Tt)}drawStatementInput_(Tt){this.highlighter_.drawStatementInput(Tt),super.drawStatementInput_(Tt)}drawRightSideRow_(Tt){this.highlighter_.drawRightSideRow(Tt),this.outlinePath_+=uo("H",Tt.xPos+Tt.width)+uo("V",Tt.yPos+Tt.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(Tt){this.highlighter_.drawInlineInput(Tt),super.drawInlineInput_(Tt)}positionInlineInputConnection_(Tt){const kt=Tt.centerline-Tt.height/2;if(Tt.connectionModel){let Bt=Tt.xPos+Tt.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Bt*=-1),Tt.connectionModel.setOffsetInBlock(Bt,kt+Tt.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(Tt){const kt=Tt.getLastInput();if(kt!=null&&kt.connectionModel){let Bt=Tt.xPos+Tt.statementEdge+kt.notchOffset;Bt=this.info_.RTL?-1*Bt:Bt+this.constants_.DARK_PATH_OFFSET,kt.connectionModel.setOffsetInBlock(Bt,Tt.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(Tt){const kt=Tt.getLastInput();if(kt&&kt.connectionModel){let Bt=Tt.xPos+Tt.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Bt*=-1),kt.connectionModel.setOffsetInBlock(Bt,Tt.yPos)}}positionNextConnection_(){const Tt=this.info_.bottomRow;if(Tt.connection){const kt=Tt.connection,Bt=kt.xPos;kt.connectionModel.setOffsetInBlock((this.info_.RTL?-Bt:Bt)+this.constants_.DARK_PATH_OFFSET/2,Tt.baseline+this.constants_.DARK_PATH_OFFSET)}}},$E=class{constructor(Tt){this.OFFSET=.5,this.constantProvider=Tt,this.START_POINT=gs(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const Tt=this.constantProvider.CORNER_RADIUS,kt=this.OFFSET,Bt=(1-Math.SQRT1_2)*(Tt+kt)-kt,zt=gs(Bt,Bt)+Ls("a","0 0,0",Tt,To(-Bt-kt,Tt-Bt)),mn=Ls("a","0 0,0",Tt+kt,To(Tt+kt,Tt+kt)),En=gs(Bt,-Bt)+Ls("a","0 0,0",Tt+kt,To(Tt-Bt,Bt+kt));return{width:Tt+kt,height:Tt,pathTop(Hn){return Hn?zt:""},pathBottom(Hn){return Hn?mn:En}}}makeOutsideCorner(){const Tt=this.constantProvider.CORNER_RADIUS,kt=this.OFFSET,Bt=(1-Math.SQRT1_2)*(Tt-kt)+kt,zt=gs(Bt,Bt)+Ls("a","0 0,1",Tt-kt,To(Tt-Bt,-Bt+kt)),mn=gs(kt,Tt)+Ls("a","0 0,1",Tt-kt,To(Tt,-Tt+kt)),En=-Bt,Hn=gs(Bt,En)+Ls("a","0 0,1",Tt-kt,To(-Bt+kt,-En-Tt));return{height:Tt,topLeft(pr){return pr?zt:mn},bottomLeft(){return Hn}}}makePuzzleTab(){const Tt=this.constantProvider.TAB_WIDTH,kt=this.constantProvider.TAB_HEIGHT,Bt=gs(-2,-kt+3.4)+Ku(-.45*Tt,-2.1),zt=uo("v",2.5)+gs(.97*-Tt,2.5)+lu("q",[To(.05*-Tt,10),To(.3*Tt,9.5)])+gs(.67*Tt,-1.9)+uo("v",2.5),mn=uo("v",-1.5)+gs(-.92*Tt,-.5)+lu("q",[To(-.19*Tt,-5.5),To(0,-11)])+gs(.92*Tt,1),En=gs(-5,kt-.7)+Ku(.46*Tt,-2.1);return{width:Tt,height:kt,pathUp(Hn){return Hn?Bt:mn},pathDown(Hn){return Hn?zt:En}}}makeNotch(){return{pathLeft:uo("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ku(5.1,2.6)+gs(-10.2,6.8)+Ku(5.1,2.6),height:12,width:10.2}}makeStartHat(){const Tt=this.constantProvider.START_HAT.height,kt=gs(25,-8.7)+lu("c",[To(29.7,-6.2),To(57.2,-.5),To(75,8.7)]),Bt=lu("c",[To(17.8,-9.2),To(45.3,-14.9),To(75,-8.7)])+xa(100.5,Tt+.5);return{path(zt){return zt?kt:Bt}}}},wE=class extends OT{constructor(Tt,kt){super(Tt,kt),this.constants_=Tt,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},CE=class extends Cv{constructor(Tt,kt){super(Tt,kt),this.constants_=Tt,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},AE=class extends q0{constructor(Tt,kt){super(Tt,kt),this.renderer_=Tt}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Uo.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(Tt,kt){this.isInline&&Tt.type===Uo.VALUE?(kt.elements.push(new wE(this.constants_,Tt)),kt.hasInlineInput=!0):Tt.type===Uo.STATEMENT?(kt.elements.push(new CE(this.constants_,Tt)),kt.hasStatement=!0):Tt.type===Uo.VALUE?(kt.elements.push(new eS(this.constants_,Tt)),kt.hasExternalInput=!0):Tt.type===Uo.DUMMY&&(kt.minHeight=Math.max(kt.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),kt.hasDummyInput=!0),this.isInline||kt.align!==null||(kt.align=Tt.align)}addElemSpacing_(){let Tt=!1;for(let Bt=0,zt;zt=this.rows[Bt];Bt++)zt.hasExternalInput&&(Tt=!0);for(let Bt=0,zt;zt=this.rows[Bt];Bt++){var kt=zt.elements;if(zt.elements=[],zt.startsWithElemSpacer()&&zt.elements.push(new Fu(this.constants_,this.getInRowSpacing_(null,kt[0]))),kt.length){for(let mn=0;mn<kt.length-1;mn++){zt.elements.push(kt[mn]);const En=this.getInRowSpacing_(kt[mn],kt[mn+1]);zt.elements.push(new Fu(this.constants_,En))}zt.elements.push(kt[kt.length-1]),zt.endsWithElemSpacer()&&(kt=this.getInRowSpacing_(kt[kt.length-1],null),Tt&&zt.hasDummyInput&&(kt+=this.constants_.TAB_WIDTH),zt.elements.push(new Fu(this.constants_,kt)))}}}getInRowSpacing_(Tt,kt){if(!Tt)return kt&&Tr.isField(kt)&&kt.isEditable?this.constants_.MEDIUM_PADDING:kt&&Tr.isInlineInput(kt)?this.constants_.MEDIUM_LARGE_PADDING:kt&&Tr.isStatementInput(kt)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Tr.isInput(Tt)&&(!kt||Tr.isStatementInput(kt)))return Tr.isField(Tt)&&Tt.isEditable?this.constants_.MEDIUM_PADDING:Tr.isIcon(Tt)?2*this.constants_.LARGE_PADDING+1:Tr.isHat(Tt)?this.constants_.NO_PADDING:Tr.isPreviousOrNextConnection(Tt)?this.constants_.LARGE_PADDING:Tr.isLeftRoundedCorner(Tt)?this.constants_.MIN_BLOCK_WIDTH:Tr.isJaggedEdge(Tt)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Tr.isInput(Tt)&&!kt){if(Tr.isExternalInput(Tt))return this.constants_.NO_PADDING;if(Tr.isInlineInput(Tt))return this.constants_.LARGE_PADDING;if(Tr.isStatementInput(Tt))return this.constants_.NO_PADDING}if(!Tr.isInput(Tt)&&kt&&Tr.isInput(kt)){if(Tr.isField(Tt)&&Tt.isEditable){if(Tr.isInlineInput(kt)||Tr.isExternalInput(kt))return this.constants_.SMALL_PADDING}else{if(Tr.isInlineInput(kt)||Tr.isExternalInput(kt))return this.constants_.MEDIUM_LARGE_PADDING;if(Tr.isStatementInput(kt))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Tr.isIcon(Tt)&&kt&&!Tr.isInput(kt))return this.constants_.LARGE_PADDING;if(Tr.isInlineInput(Tt)&&kt&&Tr.isField(kt))return kt.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Tr.isLeftSquareCorner(Tt)&&kt){if(Tr.isHat(kt))return this.constants_.NO_PADDING;if(Tr.isPreviousConnection(kt))return kt.notchOffset;if(Tr.isNextConnection(kt))return kt.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Tr.isLeftRoundedCorner(Tt)&&kt){if(Tr.isPreviousConnection(kt))return kt.notchOffset-this.constants_.CORNER_RADIUS;if(Tr.isNextConnection(kt))return kt.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Tr.isField(Tt)&&kt&&Tr.isField(kt)&&Tt.isEditable===kt.isEditable||kt&&Tr.isJaggedEdge(kt)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(Tt,kt){return Tr.isTopRow(Tt)&&Tr.isBottomRow(kt)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Tr.isTopRow(Tt)||Tr.isBottomRow(kt)?this.constants_.NO_PADDING:Tt.hasExternalInput&&kt.hasExternalInput?this.constants_.LARGE_PADDING:!Tt.hasStatement&&kt.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:Tt.hasStatement&&kt.hasStatement||!Tt.hasStatement&&kt.hasDummyInput||Tt.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(Tt,kt){if(Tr.isSpacer(kt))return Tt.yPos+kt.height/2;if(Tr.isBottomRow(Tt))return Tt=Tt.yPos+Tt.height-Tt.descenderHeight,Tr.isNextConnection(kt)?Tt+kt.height/2:Tt-kt.height/2;if(Tr.isTopRow(Tt))return Tr.isHat(kt)?Tt.capline-kt.height/2:Tt.capline+kt.height/2;let Bt=Tt.yPos;return Tr.isField(kt)||Tr.isIcon(kt)?(Bt+=kt.height/2,(Tt.hasInlineInput||Tt.hasStatement)&&kt.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=Tt.height&&(Bt+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):Bt=Tr.isInlineInput(kt)?Bt+kt.height/2:Bt+Tt.height/2,Bt}alignRowElements_(){if(this.isInline){var Tt=0,kt=new WeakMap,Bt=null;for(let zt=this.rows.length-1,mn;mn=this.rows[zt];zt--)kt.set(mn,Tt),Tr.isInputRow(mn)&&(mn.hasStatement&&this.alignStatementRow_(mn),Bt&&Bt.hasStatement&&mn.width<Bt.width?kt.set(mn,Bt.width):Tt=mn.width,Bt=mn);Tt=0;for(let zt=0,mn;mn=this.rows[zt];zt++)mn.hasStatement?Tt=this.getDesiredRowWidth_(mn):Tr.isSpacer(mn)?mn.width=Math.max(Tt,kt.get(mn)):(Bt=mn.width,Tt=Math.max(Tt,kt.get(mn))-Bt,0<Tt&&this.addAlignmentPadding_(mn,Tt),Tt=mn.width)}else super.alignRowElements_()}getDesiredRowWidth_(Tt){return this.isInline&&Tt.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(Tt)}finalize_(){let Tt=0,kt=0;for(let zt=0,mn;mn=this.rows[zt];zt++){mn.yPos=kt,mn.xPos=this.startX,kt+=mn.height,Tt=Math.max(Tt,mn.widthWithConnectedBlocks);var Bt=kt-this.topRow.ascenderHeight;mn===this.bottomRow&&Bt<this.constants_.MIN_BLOCK_HEIGHT&&(Bt=this.constants_.MIN_BLOCK_HEIGHT-Bt,this.bottomRow.height+=Bt,kt+=Bt),this.recordElemPositions_(mn)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Bt=this.block_.nextConnection.targetBlock())&&(Tt=Math.max(Tt,Bt.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=kt-this.bottomRow.descenderHeight,this.widthWithChildren=Tt+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=kt+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},kE=class extends tS{constructor(Tt,kt,Bt){super(Tt,kt,Bt),this.constants=Bt,this.colourDark="#000000",this.svgPathDark=Cn(Er.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Cn(Er.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(Tt){this.svgPath.setAttribute("d",Tt),this.svgPathDark.setAttribute("d",Tt)}setHighlightPath(Tt){this.svgPathLight.setAttribute("d",Tt)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(Tt){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(Tt),this.svgPath.setAttribute("stroke","none")}setStyle(Tt){this.style=Tt,this.colourDark=Mu("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(Tt){Tt?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(Tt){if(Tt){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(Tt){super.updateDisabled_(Tt),Tt&&this.svgPath.setAttribute("stroke","none")}},IE=class extends Mv{constructor(Tt){super(Tt),this.highlightConstants_=null}init(Tt,kt){super.init(Tt,kt),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(Tt,kt){super.refreshDom(Tt,kt),this.getHighlightConstants().init()}makeConstants_(){return new TE}makeRenderInfo_(Tt){return new AE(this,Tt)}makeDrawer_(Tt,kt){return new EE(Tt,kt)}makePathObject(Tt,kt){return new kE(Tt,kt,this.getConstants())}makeHighlightConstants_(){return new $E(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};up("geras",IE);var Qp={};Qp.ConstantProvider=TE,Qp.Drawer=EE,Qp.HighlightConstantProvider=$E,Qp.Highlighter=xE,Qp.InlineInput=wE,Qp.PathObject=kE,Qp.RenderInfo=AE,Qp.Renderer=IE,Qp.StatementInput=CE;var RE=class{constructor(Tt){this.container=Tt,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=Cn(Er.SVG,{xmlns:uu,"xmlns:html":Bu,"xmlns:xlink":xu,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(Tt,kt){Tt=Math.round(Tt),kt=Math.round(kt),this.SVG.style.display="block",zr(this.SVG,"translate3d("+Tt+"px, "+kt+"px, 0)")}getSurfaceTranslation(){return Zs(this.SVG)}clearAndHide(Tt){if(!Tt)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const kt=this.SVG.childNodes[0],Bt=this.SVG.childNodes[1];if(!kt||!Bt||!kt.classList.contains("blocklyBlockCanvas")&&Bt.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?Or(kt,this.previousSibling):Tt.insertBefore(kt,Tt.firstChild),Or(Bt,kt),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");zr(this.SVG,""),this.previousSibling=null}setContentsAndShow(Tt,kt,Bt,zt,mn,En){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=Bt,Tt.setAttribute("transform","translate(0, 0) scale("+En+")"),kt.setAttribute("transform","translate(0, 0) scale("+En+")"),this.SVG.setAttribute("width",String(zt)),this.SVG.setAttribute("height",String(mn)),this.SVG.appendChild(Tt),this.SVG.appendChild(kt),this.SVG.style.display="block"}},ME=class{constructor(Tt){this.container=Tt,this.scale=1,this.surfaceXY=new ao(0,0),this.childSurfaceXY=new ao(0,0),this.svg=Cn(Er.SVG,{xmlns:uu,"xmlns:html":Bu,"xmlns:xlink":xu,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=Cn(Er.G,{},this.svg)}createDom(){vt("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(Tt){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(Tt),this.svg.style.display="block",this.surfaceXY=new ao(0,0)}translateAndScaleGroup(Tt,kt,Bt){this.scale=Bt,Tt=Math.round(Tt),kt=Math.round(kt),this.childSurfaceXY.x=Tt,this.childSurfaceXY.y=kt,this.dragGroup.setAttribute("transform","translate("+Tt+","+kt+") scale("+Bt+")")}translateSurfaceInternal_(){const Tt=Math.round(this.surfaceXY.x),kt=Math.round(this.surfaceXY.y);this.svg.style.display="block",zr(this.svg,"translate3d("+Tt+"px, "+kt+"px, 0)")}translateBy(Tt,kt){this.surfaceXY=new ao(this.surfaceXY.x+Tt,this.surfaceXY.y+kt),this.translateSurfaceInternal_()}translateSurface(Tt,kt){this.surfaceXY=new ao(Tt*this.scale,kt*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const Tt=Zs(this.svg);return new ao(Tt.x/this.scale,Tt.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(Tt){const kt=this.getCurrentBlock();if(kt&&(Tt?Tt.appendChild(kt):this.dragGroup.removeChild(kt)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new ao(0,0)}},nS={};nS.bumpIntoBounds=Xm,nS.bumpIntoBoundsHandler=A_,nS.bumpTopObjectsIntoBounds=_l;var RT=class{constructor(Tt,kt,Bt,zt,mn){this.workspace=Tt,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,kt=kt===void 0?!0:kt,Bt=Bt===void 0?!0:Bt;const En=kt&&Bt;kt&&(this.hScroll=new Is(Tt,!0,En,zt,mn)),Bt&&(this.vScroll=new Is(Tt,!1,En,zt,mn)),En&&(this.corner_=Cn(Er.RECT,{height:Is.scrollbarThickness,width:Is.scrollbarThickness,class:"blocklyScrollbarBackground"}),Or(this.corner_,Tt.getBubbleCanvas()))}dispose(){fr(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const Tt=this.workspace.getMetrics();if(Tt){var kt=!1,Bt=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===Tt.viewWidth&&this.oldHostMetrics_.viewHeight===Tt.viewHeight&&this.oldHostMetrics_.absoluteTop===Tt.absoluteTop&&this.oldHostMetrics_.absoluteLeft===Tt.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===Tt.scrollWidth&&this.oldHostMetrics_.viewLeft===Tt.viewLeft&&this.oldHostMetrics_.scrollLeft===Tt.scrollLeft||(kt=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===Tt.scrollHeight&&this.oldHostMetrics_.viewTop===Tt.viewTop&&this.oldHostMetrics_.scrollTop===Tt.scrollTop||(Bt=!0)):Bt=kt=!0,kt||Bt){try{Fo(),this.hScroll&&kt&&this.hScroll.resize(Tt),this.vScroll&&Bt&&this.vScroll.resize(Tt)}finally{_i()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==Tt.viewWidth||this.oldHostMetrics_.absoluteLeft!==Tt.absoluteLeft){let zt;(zt=this.corner_)==null||zt.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==Tt.viewHeight||this.oldHostMetrics_.absoluteTop!==Tt.absoluteTop){let zt;(zt=this.corner_)==null||zt.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=Tt}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(Tt,kt){this.hScroll&&this.hScroll.setOrigin(Tt,kt),this.vScroll&&this.vScroll.setOrigin(Tt,kt)}set(Tt,kt,Bt){this.hScroll&&this.hScroll.set(Tt,!1),this.vScroll&&this.vScroll.set(kt,!1),(Bt||Bt===void 0)&&(Tt={},this.hScroll&&(Tt.x=this.hScroll.getRatio_()),this.vScroll&&(Tt.y=this.vScroll.getRatio_()),this.workspace.setMetrics(Tt))}setX(Tt){this.hScroll&&this.hScroll.set(Tt,!0)}setY(Tt){this.vScroll&&this.vScroll.set(Tt,!0)}setContainerVisible(Tt){this.hScroll&&this.hScroll.setContainerVisible(Tt),this.vScroll&&this.vScroll.setContainerVisible(Tt)}isVisible(){let Tt=!1;return this.hScroll&&(Tt=this.hScroll.isVisible()),this.vScroll&&(Tt=Tt||this.vScroll.isVisible()),Tt}resizeContent(Tt){this.hScroll&&this.hScroll.resizeContentHorizontal(Tt),this.vScroll&&this.vScroll.resizeContentVertical(Tt)}resizeView(Tt){this.hScroll&&this.hScroll.resizeViewHorizontal(Tt),this.vScroll&&this.vScroll.resizeViewVertical(Tt)}},PE=!1;dt.CodeGenerator$$module$build$src$core$generator=class{constructor(Tt){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=Tt,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(Tt){Tt||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),Tt=In());var kt=[];this.init(Tt),Tt=Tt.getTopBlocks(!0);for(let Bt=0,zt;zt=Tt[Bt];Bt++){let mn=this.blockToCode(zt);Array.isArray(mn)&&(mn=mn[0]),mn&&(zt.outputConnection&&(mn=this.scrubNakedValue(mn),this.STATEMENT_PREFIX&&!zt.suppressPrefixSuffix&&(mn=this.injectId(this.STATEMENT_PREFIX,zt)+mn),this.STATEMENT_SUFFIX&&!zt.suppressPrefixSuffix&&(mn+=this.injectId(this.STATEMENT_SUFFIX,zt))),kt.push(mn))}return kt=kt.join(`
`),kt=this.finish(kt),kt=kt.replace(/^\s+\n/,""),kt=kt.replace(/\n\s+$/,`
`),kt=kt.replace(/[ \t]+\n/g,`
`)}prefixLines(Tt,kt){return kt+Tt.replace(/(?!\n$)\n/g,`
`+kt)}allNestedComments(Tt){const kt=[];Tt=Tt.getDescendants(!0);for(let Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt].getCommentText();zt&&kt.push(zt)}return kt.length&&kt.push(""),kt.join(`
`)}blockToCode(Tt,kt){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!Tt)return"";if(!Tt.isEnabled())return kt?"":this.blockToCode(Tt.getNextBlock());if(Tt.isInsertionMarker())return kt?"":this.blockToCode(Tt.getChildren(!1)[0]);var Bt=this[Tt.type];if(typeof Bt!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+Tt.type+'".');if(Bt=Bt.call(Tt,Tt),Array.isArray(Bt)){if(!Tt.outputConnection)throw TypeError("Expecting string from statement block: "+Tt.type);return[this.scrub_(Tt,Bt[0],kt),Bt[1]]}if(typeof Bt=="string")return this.STATEMENT_PREFIX&&!Tt.suppressPrefixSuffix&&(Bt=this.injectId(this.STATEMENT_PREFIX,Tt)+Bt),this.STATEMENT_SUFFIX&&!Tt.suppressPrefixSuffix&&(Bt+=this.injectId(this.STATEMENT_SUFFIX,Tt)),this.scrub_(Tt,Bt,kt);if(Bt===null)return"";throw SyntaxError("Invalid code generated: "+Bt)}valueToCode(Tt,kt,Bt){if(isNaN(Bt))throw TypeError("Expecting valid order from block: "+Tt.type);var zt=Tt.getInputTargetBlock(kt);if(!zt||(kt=this.blockToCode(zt),kt===""))return"";if(!Array.isArray(kt))throw TypeError("Expecting tuple from value block: "+zt.type);if(Tt=kt[0],kt=kt[1],isNaN(kt))throw TypeError("Expecting valid order from value block: "+zt.type);if(!Tt)return"";zt=!1;var mn=Math.floor(Bt);const En=Math.floor(kt);if(mn<=En&&(mn!==En||mn!==0&&mn!==99)){for(zt=!0,mn=0;mn<this.ORDER_OVERRIDES.length;mn++)if(this.ORDER_OVERRIDES[mn][0]===Bt&&this.ORDER_OVERRIDES[mn][1]===kt){zt=!1;break}}return zt&&(Tt="("+Tt+")"),Tt}statementToCode(Tt,kt){if(Tt=Tt.getInputTargetBlock(kt),kt=this.blockToCode(Tt),typeof kt!="string")throw TypeError("Expecting code from statement block: "+(Tt&&Tt.type));return kt&&(kt=this.prefixLines(kt,this.INDENT)),kt}addLoopTrap(Tt,kt){return this.INFINITE_LOOP_TRAP&&(Tt=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,kt),this.INDENT)+Tt),this.STATEMENT_SUFFIX&&!kt.suppressPrefixSuffix&&(Tt=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,kt),this.INDENT)+Tt),this.STATEMENT_PREFIX&&!kt.suppressPrefixSuffix&&(Tt+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,kt),this.INDENT)),Tt}injectId(Tt,kt){return kt=kt.id.replace(/\$/g,"$$$$"),Tt.replace(/%1/g,"'"+kt+"'")}addReservedWords(Tt){this.RESERVED_WORDS_+=Tt+","}provideFunction_(Tt,kt){if(!this.definitions_[Tt]){const Bt=this.nameDB_.getDistinctName(Tt,dt.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[Tt]=Bt,Array.isArray(kt)&&(kt=kt.join(`
`)),kt=kt.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,Bt);let zt;for(;zt!==kt;)zt=kt,kt=kt.replace(/^(( {2})*) {2}/gm,"$1\0");kt=kt.replace(/\0/g,this.INDENT),this.definitions_[Tt]=kt}return this.functionNames_[Tt]}init(Tt){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(Tt,kt,Bt){return kt}finish(Tt){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),Tt}scrubNakedValue(Tt){return Tt}},Object.defineProperties(dt.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return vt("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(Tt){vt("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=Tt}}}),dt.CodeGenerator$$module$build$src$core$generator;var K0=class{constructor(Tt,kt,Bt,zt){this.workspace=Tt,this.targetWorkspace=kt,this.isLabel_=zt,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=Bt.text,this.position_=new ao(0,0),this.callbackKey_=Bt.callbackKey||Bt.callbackkey,this.cssClass_=Bt["web-class"]||null,this.info=Bt}createDom(){var Tt=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(Tt+=" "+this.cssClass_),this.svgGroup_=Cn(Er.G,{class:Tt},this.workspace.getCanvas());let kt;this.isLabel_||(kt=Cn(Er.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),Tt=Cn(Er.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const Bt=Cn(Er.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var zt=Ss(this.text_);this.workspace.RTL&&(zt+=""),Bt.textContent=zt,this.isLabel_&&(this.svgText_=Bt,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const mn=Wn(Bt,"fontSize"),En=Wn(Bt,"fontWeight"),Hn=Wn(Bt,"fontFamily");if(this.width=yr(Bt,mn,En,Hn),zt=hr(zt,mn,En,Hn),this.height=zt.height,!this.isLabel_){this.width+=2*K0.TEXT_MARGIN_X,this.height+=2*K0.TEXT_MARGIN_Y;let pr;(pr=kt)==null||pr.setAttribute("width",this.width.toString());let Kr;(Kr=kt)==null||Kr.setAttribute("height",this.height.toString())}return Tt.setAttribute("width",this.width.toString()),Tt.setAttribute("height",this.height.toString()),Bt.setAttribute("x",(this.width/2).toString()),Bt.setAttribute("y",(this.height/2-zt.height/2+zt.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=Zt(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(Tt,kt){this.position_.x=Tt,this.position_.y=kt,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&cn(this.onMouseUpWrapper_),this.svgGroup_&&fr(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(Tt){(Tt=this.targetWorkspace.getGesture(Tt))&&Tt.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(Tt=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&Tt(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};K0.TEXT_MARGIN_X=5,K0.TEXT_MARGIN_Y=2,Zl(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var MT=class{constructor(Tt){this.workspace_=Tt}getDimensionsPx_(Tt){let kt=0,Bt=0;return Tt&&(kt=Tt.getWidth(),Bt=Tt.getHeight()),new Pl(kt,Bt)}getFlyoutMetrics(Tt){return Tt=this.getDimensionsPx_(this.workspace_.getFlyout(Tt)),{width:Tt.width,height:Tt.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const Tt=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:Tt.width,height:Tt.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let Tt=0;const kt=this.getToolboxMetrics(),Bt=this.getFlyoutMetrics(!0),zt=!!this.workspace_.getToolbox(),mn=!!this.workspace_.getFlyout(!0);var En=zt?kt.position:Bt.position,Hn=En===Do.LEFT;return En=En===Do.TOP,zt&&Hn?Tt=kt.width:mn&&Hn&&(Tt=Bt.width),Hn=0,zt&&En?Hn=kt.height:mn&&En&&(Hn=Bt.height),{top:Hn,left:Tt}}getViewMetrics(Tt){Tt=Tt?this.workspace_.scale:1;const kt=this.getSvgMetrics(),Bt=this.getToolboxMetrics(),zt=this.getFlyoutMetrics(!0),mn=this.workspace_.getToolbox()?Bt.position:zt.position;return this.workspace_.getToolbox()?mn===Do.TOP||mn===Do.BOTTOM?kt.height-=Bt.height:(mn===Do.LEFT||mn===Do.RIGHT)&&(kt.width-=Bt.width):this.workspace_.getFlyout(!0)&&(mn===Do.TOP||mn===Do.BOTTOM?kt.height-=zt.height:(mn===Do.LEFT||mn===Do.RIGHT)&&(kt.width-=zt.width)),{height:kt.height/Tt,width:kt.width/Tt,top:-this.workspace_.scrollY/Tt,left:-this.workspace_.scrollX/Tt}}getContentMetrics(Tt){Tt=Tt?1:this.workspace_.scale;const kt=this.workspace_.getBlocksBoundingBox();return{height:(kt.bottom-kt.top)*Tt,width:(kt.right-kt.left)*Tt,top:kt.top*Tt,left:kt.left*Tt}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(Tt){if(!this.hasFixedEdges())return{};const kt=this.workspace_.isMovableHorizontally(),Bt=this.workspace_.isMovableVertically();Tt=Tt||this.getViewMetrics(!1);const zt={};return Bt||(zt.top=Tt.top,zt.bottom=Tt.top+Tt.height),kt||(zt.left=Tt.left,zt.right=Tt.left+Tt.width),zt}getPaddedContent_(Tt,kt){const Bt=kt.top+kt.height,zt=kt.left+kt.width,mn=Tt.width;Tt=Tt.height;const En=mn/2,Hn=Tt/2;return{top:Math.min(kt.top-Hn,Bt-Tt),bottom:Math.max(Bt+Hn,kt.top+Tt),left:Math.min(kt.left-En,zt-mn),right:Math.max(zt+En,kt.left+mn)}}getScrollMetrics(Tt,kt,Bt){Tt=Tt?this.workspace_.scale:1,kt=kt||this.getViewMetrics(!1);var zt=Bt||this.getContentMetrics();Bt=this.getComputedFixedEdges_(kt),kt=this.getPaddedContent_(kt,zt),zt=Bt.top!==void 0?Bt.top:kt.top;const mn=Bt.left!==void 0?Bt.left:kt.left;return{top:zt/Tt,left:mn/Tt,width:((Bt.right!==void 0?Bt.right:kt.right)-mn)/Tt,height:((Bt.bottom!==void 0?Bt.bottom:kt.bottom)-zt)/Tt}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const Tt=this.getToolboxMetrics(),kt=this.getFlyoutMetrics(!0),Bt=this.getSvgMetrics(),zt=this.getAbsoluteMetrics(),mn=this.getViewMetrics(),En=this.getContentMetrics(),Hn=this.getScrollMetrics(!1,mn,En);return{contentHeight:En.height,contentWidth:En.width,contentTop:En.top,contentLeft:En.left,scrollHeight:Hn.height,scrollWidth:Hn.width,scrollTop:Hn.top,scrollLeft:Hn.left,viewHeight:mn.height,viewWidth:mn.width,viewTop:mn.top,viewLeft:mn.left,absoluteTop:zt.top,absoluteLeft:zt.left,svgHeight:Bt.height,svgWidth:Bt.width,toolboxWidth:Tt.width,toolboxHeight:Tt.height,toolboxPosition:Tt.position,flyoutWidth:kt.width,flyoutHeight:kt.height}}};So(ro.METRICS_MANAGER,vm,MT);var DE=class extends MT{constructor(Tt,kt){super(Tt),this.flyout_=kt}getBoundingBox_(){let Tt;try{Tt=this.workspace_.getCanvas().getBBox()}catch{Tt={height:0,y:0,width:0,x:0}}return Tt}getContentMetrics(Tt){const kt=this.getBoundingBox_();return Tt=Tt?1:this.workspace_.scale,{height:kt.height*Tt,width:kt.width*Tt,top:kt.y*Tt,left:kt.x*Tt}}getScrollMetrics(Tt,kt,Bt){return kt=Bt||this.getContentMetrics(),Bt=this.flyout_.MARGIN*this.workspace_.scale,Tt=Tt?this.workspace_.scale:1,{height:(kt.height+2*Bt)/Tt,width:(kt.width+kt.left+Bt)/Tt,top:0,left:0}}},J0;(function(Tt){Tt.BLOCK="block",Tt.BUTTON="button"})(J0||(J0={}));var rS=class extends qO{constructor(Tt){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,Tt.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Op(Tt),this.workspace_.setMetricsManager(new DE(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Ao(),this.RTL=!!Tt.RTL,this.toolboxPosition_=Tt.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(Tt){return this.svgGroup_=Cn(Tt,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=Cn(Er.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(Tt){this.targetWorkspace=Tt,this.workspace_.targetWorkspace=Tt,this.workspace_.scrollbar=new RT(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Zt(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Zt(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),Tt.getComponentManager().addComponent({component:this,weight:1,capabilities:[Dl.Capability.DELETE_AREA,Dl.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),cn(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(fr(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(Tt){const kt=Tt!==this.isVisible();this.isVisible_=Tt,kt&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(Tt){const kt=Tt!==this.containerVisible_;this.containerVisible_=Tt,kt&&this.updateDisplay_()}updateDisplay_(){let Tt;Tt=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=Tt?"block":"none");let kt;(kt=this.workspace_.scrollbar)==null||kt.setContainerVisible(Tt)}positionAt_(Tt,kt,Bt,zt){let mn;(mn=this.svgGroup_)==null||mn.setAttribute("width",Tt.toString());let En;(En=this.svgGroup_)==null||En.setAttribute("height",kt.toString()),this.workspace_.setCachedParentSvgSize(Tt,kt);let Hn;if(((Hn=this.svgGroup_)==null?void 0:Hn.tagName)==="svg")zr(this.svgGroup_,"translate("+Bt+"px,"+zt+"px)");else{let pr;(pr=this.svgGroup_)==null||pr.setAttribute("transform","translate("+Bt+","+zt+")")}(Tt=this.workspace_.scrollbar)&&(Tt.setOrigin(Bt,zt),Tt.resize(),Tt.hScroll&&Tt.hScroll.setPosition(Tt.hScroll.position.x,Tt.hScroll.position.y),Tt.vScroll&&Tt.vScroll.setPosition(Tt.vScroll.position.x,Tt.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let Tt=0,kt;kt=this.listeners_[Tt];Tt++)cn(kt);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(Tt){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof Tt=="string"&&(Tt=this.getDynamicCategoryContents_(Tt)),this.setVisible(!0),Tt=Nm(Tt),Tt=this.createFlyoutInfo_(Tt),this.layout_(Tt.contents,Tt.gaps),this.listeners_.push(Zt(this.svgBackground_,"pointerover",this,function(){const kt=this.workspace_.getTopBlocks(!1);for(let Bt=0,zt;zt=kt[Bt];Bt++)zt.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(Tt){const kt=[],Bt=[];this.permanentlyDisabled_.length=0;const zt=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let En=0,Hn;Hn=Tt[En];En++){if("custom"in Hn){var mn=this.getDynamicCategoryContents_(Hn.custom);mn=Nm(mn),Tt.splice.apply(Tt,[En,1,...mn]),Hn=Tt[En]}switch(Hn.kind.toUpperCase()){case"BLOCK":mn=Hn;const pr=this.createFlyoutBlock_(mn);kt.push({type:J0.BLOCK,block:pr}),this.addBlockGap_(mn,Bt,zt);break;case"SEP":this.addSeparatorGap_(Hn,Bt,zt);break;case"LABEL":mn=this.createButton_(Hn,!0),kt.push({type:J0.BUTTON,button:mn}),Bt.push(zt);break;case"BUTTON":mn=this.createButton_(Hn,!1),kt.push({type:J0.BUTTON,button:mn}),Bt.push(zt)}}return{contents:kt,gaps:Bt}}getDynamicCategoryContents_(Tt){if(Tt=this.workspace_.targetWorkspace.getToolboxCategoryCallback(Tt),typeof Tt!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return Tt(this.workspace_.targetWorkspace)}createButton_(Tt,kt){return new K0(this.workspace_,this.targetWorkspace,Tt,kt)}createFlyoutBlock_(Tt){let kt;return Tt.blockxml?(Tt=typeof Tt.blockxml=="string"?Rs(Tt.blockxml):Tt.blockxml,(kt=this.getRecycledBlock_(Tt.getAttribute("type")))||(kt=Es(Tt,this.workspace_))):(kt=this.getRecycledBlock_(Tt.type),kt||(Tt.enabled===void 0&&(Tt.enabled=Tt.disabled!=="true"&&Tt.disabled!==!0),kt=Cp(Tt,this.workspace_))),kt.isEnabled()||this.permanentlyDisabled_.push(kt),kt}getRecycledBlock_(Tt){let kt=-1;for(let Bt=0;Bt<this.recycledBlocks_.length;Bt++)if(this.recycledBlocks_[Bt].type===Tt){kt=Bt;break}return kt===-1?void 0:this.recycledBlocks_.splice(kt,1)[0]}addBlockGap_(Tt,kt,Bt){let zt;Tt.gap?zt=parseInt(Tt.gap.toString()):Tt.blockxml&&(Tt=typeof Tt.blockxml=="string"?Rs(Tt.blockxml):Tt.blockxml,zt=parseInt(Tt.getAttribute("gap"))),kt.push(!zt||isNaN(zt)?Bt:zt)}addSeparatorGap_(Tt,kt,Bt){Tt=parseInt(Tt.gap.toString()),!isNaN(Tt)&&0<kt.length?kt[kt.length-1]=Tt:kt.push(Bt)}clearOldBlocks_(){var Tt=this.workspace_.getTopBlocks(!1);for(let Bt=0,zt;zt=Tt[Bt];Bt++)this.blockIsRecyclable_(zt)?this.recycleBlock_(zt):zt.dispose(!1,!1);for(Tt=0;Tt<this.mats_.length;Tt++){const Bt=this.mats_[Tt];Bt&&(Fl(Bt),fr(Bt))}this.mats_.length=0;for(let Bt=0,zt;zt=this.buttons_[Bt];Bt++)zt.dispose();this.buttons_.length=0;let kt;(kt=this.workspace_.getPotentialVariableMap())==null||kt.clear()}emptyRecycledBlocks_(){for(let Tt=0;Tt<this.recycledBlocks_.length;Tt++)this.recycledBlocks_[Tt].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(Tt){return!1}recycleBlock_(Tt){const kt=Tt.getRelativeToSurfaceXY();Tt.moveBy(-kt.x,-kt.y),this.recycledBlocks_.push(Tt)}addBlockListeners_(Tt,kt,Bt){this.listeners_.push(Zt(Tt,"pointerdown",null,this.blockMouseDown_(kt))),this.listeners_.push(Zt(Bt,"pointerdown",null,this.blockMouseDown_(kt))),this.listeners_.push(Kt(Tt,"pointerenter",kt,kt.addSelect)),this.listeners_.push(Kt(Tt,"pointerleave",kt,kt.removeSelect)),this.listeners_.push(Kt(Bt,"pointerenter",kt,kt.addSelect)),this.listeners_.push(Kt(Bt,"pointerleave",kt,kt.removeSelect))}blockMouseDown_(Tt){return kt=>{const Bt=this.targetWorkspace.getGesture(kt);Bt&&(Bt.setStartBlock(Tt),Bt.handleFlyoutStart(kt,this))}}onMouseDown_(Tt){const kt=this.targetWorkspace.getGesture(Tt);kt&&kt.handleFlyoutStart(Tt,this)}isBlockCreatable(Tt){return Tt.isEnabled()}createBlock(Tt){let kt=null;Fo();var Bt=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{kt=this.placeNewBlock_(Tt)}finally{_i()}if(this.targetWorkspace.hideChaff(),Tt=qp(this.targetWorkspace,Bt),ts()){for(fo(!0),Bt=0;Bt<Tt.length;Bt++){const zt=Tt[Bt];to(new(no(D_))(zt))}to(new(no(Xl))(kt))}return this.autoClose?this.hide():this.filterForCapacity_(),kt}initFlyoutButton_(Tt,kt,Bt){const zt=Tt.createDom();Tt.moveTo(kt,Bt),Tt.show(),this.listeners_.push(Zt(zt,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(Tt)}createRect_(Tt,kt,Bt,zt,mn){return kt=Cn(Er.RECT,{"fill-opacity":0,x:kt,y:Bt,height:zt.height,width:zt.width}),kt.tooltip=Tt,om(kt),this.workspace_.getCanvas().insertBefore(kt,Tt.getSvgRoot()),this.rectMap_.set(Tt,kt),this.mats_[mn]=kt}moveRectToBlock_(Tt,kt){const Bt=kt.getHeightWidth();Tt.setAttribute("width",Bt.width.toString()),Tt.setAttribute("height",Bt.height.toString()),kt=kt.getRelativeToSurfaceXY(),Tt.setAttribute("y",kt.y.toString()),Tt.setAttribute("x",(this.RTL?kt.x-Bt.width:kt.x).toString())}filterForCapacity_(){const Tt=this.workspace_.getTopBlocks(!1);for(let kt=0,Bt;Bt=Tt[kt];kt++)if(this.permanentlyDisabled_.indexOf(Bt)===-1){const zt=this.targetWorkspace.isCapacityAvailable(qn(Bt));for(;Bt;)Bt.setEnabled(zt),Bt=Bt.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(Tt){var kt=this.targetWorkspace;if(!Tt.getSvgRoot())throw Error("oldBlock is not rendered.");const Bt=Ou(Tt);return kt.setResizesEnabled(!1),kt=Cp(Bt,kt),this.positionNewBlock_(Tt,kt),kt}positionNewBlock_(Tt,kt){const Bt=this.targetWorkspace;var zt=Bt.getOriginOffsetInPixels(),mn=this.workspace_.getOriginOffsetInPixels();Tt=Tt.getRelativeToSurfaceXY(),Tt.scale(this.workspace_.scale),mn=ao.sum(mn,Tt),zt=ao.difference(mn,zt),zt.scale(1/Bt.scale),kt.moveTo(new ao(zt.x,zt.y))}};rS.FlyoutItemType=J0;var PT=class extends rS{constructor(Tt){super(Tt)}setMetrics_(Tt){if(this.isVisible()){var kt=this.workspace_.getMetricsManager(),Bt=kt.getScrollMetrics(),zt=kt.getViewMetrics();kt=kt.getAbsoluteMetrics(),typeof Tt.y=="number"&&(this.workspace_.scrollY=-(Bt.top+(Bt.height-zt.height)*Tt.y)),this.workspace_.translate(this.workspace_.scrollX+kt.left,this.workspace_.scrollY+kt.top)}}getX(){if(!this.isVisible())return 0;var Tt=this.targetWorkspace.getMetricsManager();const kt=Tt.getAbsoluteMetrics(),Bt=Tt.getViewMetrics();return Tt=Tt.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Do.LEFT?Tt.width:Bt.width-this.width_:this.toolboxPosition_===Do.LEFT?0:Bt.width:this.toolboxPosition_===Do.LEFT?0:Bt.width+kt.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var Tt=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=Tt.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,Tt.height-2*this.CORNER_RADIUS),Tt=this.getX();var kt=this.getY();this.positionAt_(this.width_,this.height_,Tt,kt)}}setBackgroundPath_(Tt,kt){const Bt=this.toolboxPosition_===Do.RIGHT;var zt=Tt+this.CORNER_RADIUS;zt=["M "+(Bt?zt:0)+",0"],zt.push("h",Bt?-Tt:Tt),zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Bt?0:1,Bt?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),zt.push("v",Math.max(0,kt)),zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Bt?0:1,Bt?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),zt.push("h",Bt?Tt:-Tt),zt.push("z"),this.svgBackground_.setAttribute("d",zt.join(" "))}scrollToStart(){let Tt;(Tt=this.workspace_.scrollbar)==null||Tt.setY(0)}wheel_(Tt){var kt=gn(Tt);if(kt.y){const Bt=this.workspace_.getMetricsManager(),zt=Bt.getScrollMetrics();kt=Bt.getViewMetrics().top-zt.top+kt.y;let mn;(mn=this.workspace_.scrollbar)==null||mn.setY(kt),Gl(),Lo()}Tt.preventDefault(),Tt.stopPropagation()}layout_(Tt,kt){this.workspace_.scale=this.targetWorkspace.scale;var Bt=this.MARGIN;const zt=this.RTL?Bt:Bt+this.tabWidth_;for(let pr=0,Kr;Kr=Tt[pr];pr++)if(Kr.type==="block"){var mn=Kr.block,En=mn.getDescendants(!1);for(let es=0,ws;ws=En[es];es++)ws.isInFlyout=!0;mn.render(),En=mn.getSvgRoot();const lo=mn.getHeightWidth();var Hn=mn.outputConnection?zt-this.tabWidth_:zt;mn.moveBy(Hn,Bt),Hn=this.createRect_(mn,this.RTL?Hn-lo.width:Hn,Bt,lo,pr),this.addBlockListeners_(En,mn,Hn),Bt+=lo.height+kt[pr]}else Kr.type==="button"&&(mn=Kr.button,this.initFlyoutButton_(mn,zt,Bt),Bt+=mn.height+kt[pr])}isDragTowardWorkspace(Tt){Tt=Math.atan2(Tt.y,Tt.x)/Math.PI*180;const kt=this.dragAngleRange_;return Tt<kt&&Tt>-kt||Tt<-180+kt||Tt>180-kt}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const Tt=this.svgGroup_.getBoundingClientRect(),kt=Tt.left;return this.toolboxPosition_===Do.LEFT?new Fs(-1e9,1e9,-1e9,kt+Tt.width):new Fs(-1e9,1e9,kt,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let Tt=0;var kt=this.workspace_.getTopBlocks(!1);for(let zt=0,mn;mn=kt[zt];zt++){var Bt=mn.getHeightWidth().width;mn.outputConnection&&(Bt-=this.tabWidth_),Tt=Math.max(Tt,Bt)}for(let zt=0,mn;mn=this.buttons_[zt];zt++)Tt=Math.max(Tt,mn.width);if(Tt+=1.5*this.MARGIN+this.tabWidth_,Tt*=this.workspace_.scale,Tt+=Is.scrollbarThickness,this.width_!==Tt){for(let zt=0,mn;mn=kt[zt];zt++){if(this.RTL){Bt=mn.getRelativeToSurfaceXY().x;let En=Tt/this.workspace_.scale-this.MARGIN;mn.outputConnection||(En-=this.tabWidth_),mn.moveBy(En-Bt,0)}this.rectMap_.has(mn)&&this.moveRectToBlock_(this.rectMap_.get(mn),mn)}if(this.RTL)for(let zt=0,mn;mn=this.buttons_[zt];zt++)kt=mn.getPosition().y,mn.moveTo(Tt/this.workspace_.scale-mn.width-this.MARGIN-this.tabWidth_,kt);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Do.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+Tt,this.targetWorkspace.scrollY),this.width_=Tt,this.position(),this.targetWorkspace.recordDragTargets()}}};PT.registryName="verticalFlyout",So(ro.FLYOUTS_VERTICAL_TOOLBOX,vm,PT);var LE=class extends rS{constructor(Tt){super(Tt),this.horizontalLayout=!0}setMetrics_(Tt){if(this.isVisible()){var kt=this.workspace_.getMetricsManager(),Bt=kt.getScrollMetrics(),zt=kt.getViewMetrics();kt=kt.getAbsoluteMetrics(),typeof Tt.x=="number"&&(this.workspace_.scrollX=-(Bt.left+(Bt.width-zt.width)*Tt.x)),this.workspace_.translate(this.workspace_.scrollX+kt.left,this.workspace_.scrollY+kt.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var Tt=this.targetWorkspace.getMetricsManager();const kt=Tt.getAbsoluteMetrics(),Bt=Tt.getViewMetrics();Tt=Tt.getToolboxMetrics();const zt=this.toolboxPosition_===Do.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?zt?Tt.height:Bt.height-this.height_:zt?0:Bt.height:zt?0:Bt.height+kt.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var Tt=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=Tt.width,this.setBackgroundPath_(Tt.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),Tt=this.getX();var kt=this.getY();this.positionAt_(this.width_,this.height_,Tt,kt)}}setBackgroundPath_(Tt,kt){const Bt=this.toolboxPosition_===Do.TOP,zt=["M 0,"+(Bt?0:this.CORNER_RADIUS)];Bt?(zt.push("h",Tt+2*this.CORNER_RADIUS),zt.push("v",kt),zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),zt.push("h",-Tt),zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),zt.push("h",Tt),zt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),zt.push("v",kt),zt.push("h",-Tt-2*this.CORNER_RADIUS)),zt.push("z"),this.svgBackground_.setAttribute("d",zt.join(" "))}scrollToStart(){let Tt;(Tt=this.workspace_.scrollbar)==null||Tt.setX(this.RTL?1/0:0)}wheel_(Tt){var kt=gn(Tt);if(kt=kt.x||kt.y){const Bt=this.workspace_.getMetricsManager(),zt=Bt.getScrollMetrics();kt=Bt.getViewMetrics().left-zt.left+kt;let mn;(mn=this.workspace_.scrollbar)==null||mn.setX(kt),Gl(),Lo()}Tt.preventDefault(),Tt.stopPropagation()}layout_(Tt,kt){this.workspace_.scale=this.targetWorkspace.scale;const Bt=this.MARGIN;let zt=Bt+this.tabWidth_;this.RTL&&(Tt=Tt.reverse());for(let pr=0,Kr;Kr=Tt[pr];pr++)if(Kr.type==="block"){var mn=Kr.block,En=mn.getDescendants(!1);for(let es=0,ws;ws=En[es];es++)ws.isInFlyout=!0;mn.render(),En=mn.getSvgRoot();const lo=mn.getHeightWidth();var Hn=mn.outputConnection?this.tabWidth_:0;Hn=this.RTL?zt+lo.width:zt-Hn,mn.moveBy(Hn,Bt),Hn=this.createRect_(mn,Hn,Bt,lo,pr),zt+=lo.width+kt[pr],this.addBlockListeners_(En,mn,Hn)}else Kr.type==="button"&&(mn=Kr.button,this.initFlyoutButton_(mn,zt,Bt),zt+=mn.width+kt[pr])}isDragTowardWorkspace(Tt){Tt=Math.atan2(Tt.y,Tt.x)/Math.PI*180;const kt=this.dragAngleRange_;return Tt<90+kt&&Tt>90-kt||Tt>-90-kt&&Tt<-90+kt}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const Tt=this.svgGroup_.getBoundingClientRect(),kt=Tt.top;return this.toolboxPosition_===Do.TOP?new Fs(-1e9,kt+Tt.height,-1e9,1e9):new Fs(kt,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let Tt=0;const kt=this.workspace_.getTopBlocks(!1);for(let zt=0,mn;mn=kt[zt];zt++)Tt=Math.max(Tt,mn.getHeightWidth().height);const Bt=this.buttons_;for(let zt=0,mn;mn=Bt[zt];zt++)Tt=Math.max(Tt,mn.height);if(Tt+=1.5*this.MARGIN,Tt*=this.workspace_.scale,Tt+=Is.scrollbarThickness,this.height_!==Tt){for(let zt=0,mn;mn=kt[zt];zt++)this.rectMap_.has(mn)&&this.moveRectToBlock_(this.rectMap_.get(mn),mn);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Do.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+Tt),this.height_=Tt,this.position(),this.targetWorkspace.recordDragTargets()}}};So(ro.FLYOUTS_HORIZONTAL_TOOLBOX,vm,LE);var Lv=class extends _p{constructor(Tt,kt,Bt,zt,mn){super(qo.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=Lv.dropdownCreate,this.defaultVariableName=typeof Tt=="string"?Tt:"",this.size_=new Pl(0,0),Tt!==qo.SKIP_SETUP&&(mn?this.configure_(mn):this.setTypes_(Bt,zt),kt&&this.setValidator(kt))}configure_(Tt){super.configure_(Tt),this.setTypes_(Tt.variableTypes,Tt.defaultType)}initModel(){var Tt=this.getSourceBlock();if(!Tt)throw new Ys;this.variable_||(Tt=Ep(Tt.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(Tt.getId()))}shouldAddBorderRect_(){const Tt=this.getSourceBlock();if(!Tt)throw new Ys;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||Tt.type!=="variables_get")}fromXml(Tt){var kt=this.getSourceBlock();if(!kt)throw new Ys;const Bt=Tt.getAttribute("id"),zt=Tt.textContent,mn=Tt.getAttribute("variabletype")||Tt.getAttribute("variableType")||"";if(kt=Ep(kt.workspace,Bt,zt,mn),mn!==null&&mn!==kt.type)throw Error("Serialized variable type with id '"+kt.getId()+"' had type "+kt.type+", and does not match variable field that references it: "+$l(Tt)+".");this.setValue(kt.getId())}toXml(Tt){return this.initModel(),Tt.id=this.variable_.getId(),Tt.textContent=this.variable_.name,this.variable_.type&&Tt.setAttribute("variabletype",this.variable_.type),Tt}saveState(Tt){var kt=this.saveLegacyState(Lv);return kt!==null||(this.initModel(),kt={id:this.variable_.getId()},Tt&&(kt.name=this.variable_.name,kt.type=this.variable_.type)),kt}loadState(Tt){const kt=this.getSourceBlock();if(!kt)throw new Ys;this.loadLegacyState(Lv,Tt)||(Tt=Ep(kt.workspace,Tt.id||null,Tt.name,Tt.type||""),this.setValue(Tt.getId()))}setSourceBlock(Tt){if(Tt.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(Tt)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(Tt){if(Tt===null)return null;var kt=this.getSourceBlock();if(!kt)throw new Ys;return kt=_u(kt.workspace,Tt),kt?(kt=kt.type,this.typeIsAllowed_(kt)?Tt:(console.warn("Variable type doesn't match this field!  Type was "+kt),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+Tt),null)}doValueUpdate_(Tt){const kt=this.getSourceBlock();if(!kt)throw new Ys;this.variable_=_u(kt.workspace,Tt),super.doValueUpdate_(Tt)}typeIsAllowed_(Tt){const kt=this.getVariableTypes_();if(!kt)return!0;for(let Bt=0;Bt<kt.length;Bt++)if(Tt===kt[Bt])return!0;return!1}getVariableTypes_(){var Tt=this.variableTypes;if(Tt===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(Tt=Tt||[""],Tt.length===0)throw Tt=this.getText(),Error("'variableTypes' of field variable "+Tt+" was an empty list");return Tt}setTypes_(Tt,kt){if(kt=kt||"",Tt==null)Tt=null;else if(Array.isArray(Tt)){let Bt=!1;for(let zt=0;zt<Tt.length;zt++)Tt[zt]===kt&&(Bt=!0);if(!Bt)throw Error("Invalid default type '"+kt+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=kt,this.variableTypes=Tt}refreshVariableName(){this.forceRerender()}onItemSelected_(Tt,kt){if(Tt=kt.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(Tt===rT){Zp(this.sourceBlock_.workspace,this.variable_);return}if(Tt===iT){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(Tt)}referencesVariables(){return!0}static fromJson(Tt){return new this(Ss(Tt.variable),void 0,void 0,void 0,Tt)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const Tt=this.getText();let kt=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var Bt=this.getVariableTypes_(),zt=0;zt<Bt.length;zt++){const mn=this.sourceBlock_.workspace.getVariablesOfType(Bt[zt]);kt=kt.concat(mn)}for(kt.sort(ov.compareByName),Bt=[],zt=0;zt<kt.length;zt++)Bt[zt]=[kt[zt].name,kt[zt].getId()];return Bt.push([ko.RENAME_VARIABLE,rT]),ko.DELETE_VARIABLE&&Bt.push([ko.DELETE_VARIABLE.replace("%1",Tt),iT]),Bt}};Ul("field_variable",Lv);var DT=class extends Pv{constructor(Tt,kt,Bt,zt,mn,En){super(qo.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,Tt!==qo.SKIP_SETUP&&(En?this.configure_(En):this.setConstraints(kt,Bt,zt),this.setValue(Tt),mn&&this.setValidator(mn))}configure_(Tt){super.configure_(Tt),this.setMinInternal_(Tt.min),this.setMaxInternal_(Tt.max),this.setPrecisionInternal_(Tt.precision)}setConstraints(Tt,kt,Bt){this.setMinInternal_(Tt),this.setMaxInternal_(kt),this.setPrecisionInternal_(Bt),this.setValue(this.getValue())}setMin(Tt){this.setMinInternal_(Tt),this.setValue(this.getValue())}setMinInternal_(Tt){Tt==null?this.min_=-1/0:(Tt=Number(Tt),isNaN(Tt)||(this.min_=Tt))}getMin(){return this.min_}setMax(Tt){this.setMaxInternal_(Tt),this.setValue(this.getValue())}setMaxInternal_(Tt){Tt==null?this.max_=1/0:(Tt=Number(Tt),isNaN(Tt)||(this.max_=Tt))}getMax(){return this.max_}setPrecision(Tt){this.setPrecisionInternal_(Tt),this.setValue(this.getValue())}setPrecisionInternal_(Tt){this.precision_=Number(Tt)||0;let kt=String(this.precision_);kt.indexOf("e")!==-1&&(kt=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const Bt=kt.indexOf(".");this.decimalPlaces_=Bt===-1?Tt?0:null:kt.length-Bt-1}getPrecision(){return this.precision_}doClassValidation_(Tt){return Tt===null||(Tt=String(Tt),Tt=Tt.replace(/O/ig,"0"),Tt=Tt.replace(/,/g,""),Tt=Tt.replace(/infinity/i,"Infinity"),Tt=Number(Tt||0),isNaN(Tt))?null:(Tt=Math.min(Math.max(Tt,this.min_),this.max_),this.precision_&&isFinite(Tt)&&(Tt=Math.round(Tt/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(Tt=Number(Tt.toFixed(this.decimalPlaces_))),Tt)}widgetCreate_(){const Tt=super.widgetCreate_();return-1/0<this.min_&&fs(Tt,xs.VALUEMIN,this.min_),1/0>this.max_&&fs(Tt,xs.VALUEMAX,this.max_),Tt}static fromJson(Tt){return new this(Tt.value,void 0,void 0,void 0,void 0,Tt)}};Ul("field_number",DT),DT.prototype.DEFAULT_VALUE=0;var LT=class extends dt.FieldTextInput$$module$build$src$core$field_textinput{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){super.configure_(Tt),Tt.maxLines&&this.setMaxLines(Tt.maxLines)}toXml(Tt){return Tt.textContent=this.getValue().replace(/\n/g,"&#10;"),Tt}fromXml(Tt){this.setValue(Tt.textContent.replace(/&#10;/g,`
`))}saveState(){const Tt=this.saveLegacyState(LT);return Tt!==null?Tt:this.getValue()}loadState(Tt){this.loadLegacyState(qo,Tt)||this.setValue(Tt)}initView(){this.createBorderRect_(),this.textGroup_=Cn(Er.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const Tt=this.getSourceBlock();if(!Tt)throw new Ys;let kt=this.getText();if(!kt)return qo.NBSP;const Bt=kt.split(`
`);kt="";const zt=this.isOverflowedY_?this.maxLines_:Bt.length;for(let mn=0;mn<zt;mn++){let En=Bt[mn];En.length>this.maxDisplayLength?En=En.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&mn===zt-1&&(En=En.substring(0,En.length-3)+"..."),En=En.replace(/\s/g,qo.NBSP),kt+=En,mn!==zt-1&&(kt+=`
`)}return Tt.RTL&&(kt+=""),kt}doValueUpdate_(Tt){super.doValueUpdate_(Tt),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var Tt=this.getSourceBlock();if(!Tt)throw new Ys;for(var kt;kt=this.textGroup_.firstChild;)this.textGroup_.removeChild(kt);kt=this.getDisplayText_().split(`
`);let Bt=0;for(let zt=0;zt<kt.length;zt++){const mn=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Cn(Er.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:Bt+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(kt[zt])),Bt+=mn}this.isBeingEdited_&&(kt=this.htmlInput_,this.isOverflowedY_?tr(kt,"blocklyHtmlTextAreaInputOverflowedY"):Zn(kt,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(Tt.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),Tt=this.htmlInput_,this.isTextValid_?(Zn(Tt,"blocklyInvalidInput"),fs(Tt,xs.INVALID,!1)):(tr(Tt,"blocklyInvalidInput"),fs(Tt,xs.INVALID,!0)))}updateSize_(){var Tt=this.textGroup_.childNodes;const kt=this.getConstants().FIELD_TEXT_FONTSIZE,Bt=this.getConstants().FIELD_TEXT_FONTWEIGHT,zt=this.getConstants().FIELD_TEXT_FONTFAMILY;let mn=0,En=0;for(var Hn=0;Hn<Tt.length;Hn++){var pr=Dn(Tt[Hn],kt,Bt,zt);pr>mn&&(mn=pr),En+=this.getConstants().FIELD_TEXT_HEIGHT+(0<Hn?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(Tt=this.value_.split(`
`),Hn=Cn(Er.TEXT,{class:"blocklyText blocklyMultilineText"}),pr=0;pr<Tt.length;pr++){Tt[pr].length>this.maxDisplayLength&&(Tt[pr]=Tt[pr].substring(0,this.maxDisplayLength)),Hn.textContent=Tt[pr];const Kr=Dn(Hn,kt,Bt,zt);Kr>mn&&(mn=Kr)}mn+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(En+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,mn+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",mn),this.borderRect_.setAttribute("height",En)),this.size_.width=mn,this.size_.height=En,this.positionBorderRect_()}showEditor_(Tt,kt){super.showEditor_(Tt,kt),this.forceRerender()}widgetCreate_(){const Tt=cm(),kt=this.workspace_.getScale(),Bt=document.createElement("textarea");Bt.className="blocklyHtmlInput blocklyHtmlTextAreaInput",Bt.setAttribute("spellcheck",this.spellcheck_);var zt=this.getConstants().FIELD_TEXT_FONTSIZE*kt+"pt";Tt.style.fontSize=zt,Bt.style.fontSize=zt,Bt.style.borderRadius=dt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*kt+"px",zt=this.getConstants().FIELD_BORDER_RECT_X_PADDING*kt;const mn=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*kt/2;return Bt.style.padding=mn+"px "+zt+"px "+mn+"px "+zt+"px",zt=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,Bt.style.lineHeight=zt*kt+"px",Tt.appendChild(Bt),Bt.value=Bt.defaultValue=this.getEditorText_(this.value_),Bt.setAttribute("data-untyped-default-value",this.value_),Bt.setAttribute("data-old-value",""),yo?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(Bt),Bt}setMaxLines(Tt){typeof Tt=="number"&&0<Tt&&Tt!==this.maxLines_&&(this.maxLines_=Tt,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(Tt){Tt.keyCode!==vo.ENTER&&super.onHtmlInputKeyDown_(Tt)}static fromJson(Tt){return new this(Ss(Tt.text),void 0,Tt)}};Zl(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),Ul("field_multilinetext",LT);var NE=class extends dt.FieldLabel$$module$build$src$core$field_label{constructor(Tt,kt,Bt){super(String(Tt??""),kt,Bt),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(Tt){return new this(Ss(Tt.text),void 0,Tt)}};Ul("field_label_serializable",NE);var Vu=class extends qo{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){super.configure_(Tt),Tt.colourOptions&&(this.colours_=Tt.colourOptions),Tt.colourTitles&&(this.titles_=Tt.colourTitles),Tt.columns&&(this.columns_=Tt.columns)}initView(){this.size_=new Pl(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof ep&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof ep&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(Tt){return typeof Tt!="string"?null:sp(Tt)}doValueUpdate_(Tt){this.value_=Tt,this.borderRect_?this.borderRect_.style.fill=Tt:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof ep&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",Tt),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let Tt=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(Tt)&&(Tt="#"+Tt[1]+Tt[3]+Tt[5]),Tt}setColours(Tt,kt){return this.colours_=Tt,kt&&(this.titles_=kt),this}setColumns(Tt){return this.columns_=Tt,this}showEditor_(){this.dropdownCreate_(),kr().appendChild(this.picker_),cr(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(Tt){Tt=(Tt=Tt.target)&&Tt.getAttribute("data-colour"),Tt!==null&&(this.setValue(Tt),zo(this))}onKeyDown_(Tt){var kt=!1;Tt.keyCode===vo.UP?(this.moveHighlightBy_(0,-1),kt=!0):Tt.keyCode===vo.DOWN?(this.moveHighlightBy_(0,1),kt=!0):Tt.keyCode===vo.LEFT?(this.moveHighlightBy_(-1,0),kt=!0):Tt.keyCode===vo.RIGHT?(this.moveHighlightBy_(1,0),kt=!0):Tt.keyCode===vo.ENTER&&((kt=this.getHighlighted_())&&(kt=kt&&kt.getAttribute("data-colour"),kt!==null&&this.setValue(kt)),Lo(),kt=!0),kt&&Tt.stopPropagation()}moveHighlightBy_(Tt,kt){if(this.highlightedIndex_){var Bt=this.colours_||Vu.COLOURS,zt=this.columns_||Vu.COLUMNS,mn=this.highlightedIndex_%zt,En=Math.floor(this.highlightedIndex_/zt);mn+=Tt,En+=kt,0>Tt?0>mn&&0<En?(mn=zt-1,En--):0>mn&&(mn=0):0<Tt?mn>zt-1&&En<Math.floor(Bt.length/zt)-1?(mn=0,En++):mn>zt-1&&mn--:0>kt?0>En&&(En=0):0<kt&&En>Math.floor(Bt.length/zt)-1&&(En=Math.floor(Bt.length/zt)-1),this.setHighlightedCell_(this.picker_.childNodes[En].childNodes[mn],En*zt+mn)}}onMouseMove_(Tt){const kt=(Tt=Tt.target)&&Number(Tt.getAttribute("data-index"));kt!==null&&kt!==this.highlightedIndex_&&this.setHighlightedCell_(Tt,kt)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const Tt=this.getHighlighted_();Tt&&Zn(Tt,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const Tt=this.columns_||Vu.COLUMNS,kt=this.picker_.childNodes[Math.floor(this.highlightedIndex_/Tt)];return kt?kt.childNodes[this.highlightedIndex_%Tt]:null}setHighlightedCell_(Tt,kt){const Bt=this.getHighlighted_();Bt&&Zn(Bt,"blocklyColourHighlighted"),tr(Tt,"blocklyColourHighlighted"),this.highlightedIndex_=kt,fs(this.picker_,xs.ACTIVEDESCENDANT,Tt.getAttribute("id"))}dropdownCreate_(){const Tt=this.columns_||Vu.COLUMNS,kt=this.colours_||Vu.COLOURS,Bt=this.titles_||Vu.TITLES,zt=this.getValue(),mn=document.createElement("table");mn.className="blocklyColourTable",mn.tabIndex=0,mn.dir="ltr",Ds(mn,$u.GRID),fs(mn,xs.EXPANDED,!0),fs(mn,xs.ROWCOUNT,Math.floor(kt.length/Tt)),fs(mn,xs.COLCOUNT,Tt);let En;for(let Hn=0;Hn<kt.length;Hn++){Hn%Tt===0&&(En=document.createElement("tr"),Ds(En,$u.ROW),mn.appendChild(En));const pr=document.createElement("td");En.appendChild(pr),pr.setAttribute("data-colour",kt[Hn]),pr.title=Bt[Hn]||kt[Hn],pr.id=wo(),pr.setAttribute("data-index",Hn),Ds(pr,$u.GRIDCELL),fs(pr,xs.LABEL,kt[Hn]),fs(pr,xs.SELECTED,kt[Hn]===zt),pr.style.backgroundColor=kt[Hn],kt[Hn]===zt&&(pr.className="blocklyColourSelected",this.highlightedIndex_=Hn)}this.onClickWrapper_=Zt(mn,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=Zt(mn,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Zt(mn,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Zt(mn,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Zt(mn,"keydown",this,this.onKeyDown_),this.picker_=mn}dropdownDispose_(){this.onClickWrapper_&&(cn(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(cn(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(cn(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(cn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(Tt){return new this(Tt.colour,void 0,Tt)}};Vu.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Vu.TITLES=[],Vu.COLUMNS=7,Vu.prototype.DEFAULT_VALUE=Vu.COLOURS[0],Zl(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),Ul("field_colour",Vu),dt.FieldCheckbox$$module$build$src$core$field_checkbox=class extends qo{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){super.configure_(Tt),Tt.checkCharacter&&(this.checkChar_=Tt.checkCharacter)}saveState(){const Tt=this.saveLegacyState(dt.FieldCheckbox$$module$build$src$core$field_checkbox);return Tt!==null?Tt:this.getValueBoolean()}initView(){super.initView();const Tt=this.getTextElement();tr(Tt,"blocklyCheckbox"),Tt.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(Tt){this.checkChar_=Tt||dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(Tt){return Tt===!0||Tt==="TRUE"?"TRUE":Tt===!1||Tt==="FALSE"?"FALSE":null}doValueUpdate_(Tt){this.value_=this.convertValueToBool_(Tt),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(Tt){return typeof Tt=="string"?Tt==="TRUE":!!Tt}static fromJson(Tt){return new this(Tt.checked,void 0,Tt)}},dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="",Ul("field_checkbox",dt.FieldCheckbox$$module$build$src$core$field_checkbox),dt.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,dt.FieldCheckbox$$module$build$src$core$field_checkbox;var Qo=class extends Pv{constructor(Tt,kt,Bt){super(qo.SKIP_SETUP),this.clockwise_=Qo.CLOCKWISE,this.offset_=Qo.OFFSET,this.wrap_=Qo.WRAP,this.round_=Qo.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,Tt!==qo.SKIP_SETUP&&(Bt&&this.configure_(Bt),this.setValue(Tt),kt&&this.setValidator(kt))}configure_(Tt){switch(super.configure_(Tt),Tt.mode){case iS.COMPASS:this.clockwise_=!0,this.offset_=90;break;case iS.PROTRACTOR:this.clockwise_=!1,this.offset_=0}Tt.clockwise&&(this.clockwise_=Tt.clockwise),Tt.offset&&(this.offset_=Tt.offset),Tt.wrap&&(this.wrap_=Tt.wrap),Tt.round&&(this.round_=Tt.round)}initView(){super.initView(),this.symbol_=Cn(Er.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(Tt){super.showEditor_(Tt,na||No||$o),this.dropdownCreate_(),kr().appendChild(this.editor_),this.sourceBlock_ instanceof ep&&Rn(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),cr(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const Tt=Cn(Er.SVG,{xmlns:uu,"xmlns:html":Bu,"xmlns:xlink":xu,version:"1.1",height:2*Qo.HALF+"px",width:2*Qo.HALF+"px",style:"touch-action: none"}),kt=Cn(Er.CIRCLE,{cx:Qo.HALF,cy:Qo.HALF,r:Qo.RADIUS,class:"blocklyAngleCircle"},Tt);this.gauge_=Cn(Er.PATH,{class:"blocklyAngleGauge"},Tt),this.line_=Cn(Er.LINE,{x1:Qo.HALF,y1:Qo.HALF,class:"blocklyAngleLine"},Tt);for(let Bt=0;360>Bt;Bt+=15)Cn(Er.LINE,{x1:Qo.HALF+Qo.RADIUS,y1:Qo.HALF,x2:Qo.HALF+Qo.RADIUS-(Bt%45===0?10:5),y2:Qo.HALF,class:"blocklyAngleMarks",transform:"rotate("+Bt+","+Qo.HALF+","+Qo.HALF+")"},Tt);this.clickWrapper_=Zt(Tt,"click",this,this.hide_),this.clickSurfaceWrapper_=Zt(kt,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=Zt(kt,"pointermove",this,this.onMouseMove_,!0),this.editor_=Tt}dropdownDispose_(){this.clickWrapper_&&(cn(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(cn(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(cn(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){zo(this),Gl()}onMouseMove_(Tt){var kt=this.gauge_.ownerSVGElement.getBoundingClientRect();const Bt=Tt.clientX-kt.left-Qo.HALF;Tt=Tt.clientY-kt.top-Qo.HALF,kt=Math.atan(-Tt/Bt),isNaN(kt)||(kt=Yn(kt),0>Bt?kt+=180:0<Tt&&(kt+=360),kt=this.clockwise_?this.offset_+360-kt:360-(this.offset_-kt),this.displayMouseOrKeyboardValue_(kt))}displayMouseOrKeyboardValue_(Tt){this.round_&&(Tt=Math.round(Tt/this.round_)*this.round_),Tt=this.wrapValue_(Tt),Tt!==this.value_&&this.setEditorValue_(Tt)}updateGraph_(){if(this.gauge_){var Tt=Number(this.getText())+this.offset_,kt=Jn(Tt%360);Tt=["M ",Qo.HALF,",",Qo.HALF];var Bt=Qo.HALF,zt=Qo.HALF;if(!isNaN(kt)){const mn=Number(this.clockwise_),En=Jn(this.offset_),Hn=Math.cos(En)*Qo.RADIUS,pr=Math.sin(En)*-Qo.RADIUS;mn&&(kt=2*En-kt),Bt+=Math.cos(kt)*Qo.RADIUS,zt-=Math.sin(kt)*Qo.RADIUS,kt=Math.abs(Math.floor((kt-En)/Math.PI)%2),mn&&(kt=1-kt),Tt.push(" l ",Hn,",",pr," A ",Qo.RADIUS,",",Qo.RADIUS," 0 ",kt," ",mn," ",Bt,",",zt," z")}this.gauge_.setAttribute("d",Tt.join("")),this.line_.setAttribute("x2",Bt),this.line_.setAttribute("y2",zt)}}onHtmlInputKeyDown_(Tt){super.onHtmlInputKeyDown_(Tt);var kt=this.getSourceBlock();if(!kt)throw new Ys;let Bt;Tt.keyCode===vo.LEFT?Bt=kt.RTL?1:-1:Tt.keyCode===vo.RIGHT?Bt=kt.RTL?-1:1:Tt.keyCode===vo.DOWN?Bt=-1:Tt.keyCode===vo.UP&&(Bt=1),Bt&&(kt=this.getValue(),this.displayMouseOrKeyboardValue_(kt+Bt*this.round_),Tt.preventDefault(),Tt.stopPropagation())}doClassValidation_(Tt){return Tt=Number(Tt),isNaN(Tt)||!isFinite(Tt)?null:this.wrapValue_(Tt)}wrapValue_(Tt){return Tt%=360,0>Tt&&(Tt+=360),Tt>this.wrap_&&(Tt-=360),Tt}static fromJson(Tt){return new this(Tt.angle,void 0,Tt)}};Qo.ROUND=15,Qo.HALF=50,Qo.CLOCKWISE=!1,Qo.OFFSET=0,Qo.WRAP=360,Qo.RADIUS=Qo.HALF-1,Zl(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),Ul("field_angle",Qo),Qo.prototype.DEFAULT_VALUE=0;var iS;(function(Tt){Tt.COMPASS="compass",Tt.PROTRACTOR="protractor"})(iS||(iS={}));var NT=class extends N0{constructor(Tt){super(Tt),this.type=hu,Tt&&(Tt.isShadow()&&(this.recordUndo=!1),Tt=this.currentLocation_(),this.oldParentId=Tt.parentId,this.oldInputName=Tt.inputName,this.oldCoordinate=Tt.coordinate)}toJson(){const Tt=super.toJson();return Tt.oldParentId=this.oldParentId,Tt.oldInputName=this.oldInputName,this.oldCoordinate&&(Tt.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),Tt.newParentId=this.newParentId,Tt.newInputName=this.newInputName,this.newCoordinate&&(Tt.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(Tt.recordUndo=this.recordUndo),Tt}fromJson(Tt){if(vt("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldParentId=Tt.oldParentId,this.oldInputName=Tt.oldInputName,Tt.oldCoordinate){var kt=Tt.oldCoordinate.split(",");this.oldCoordinate=new ao(Number(kt[0]),Number(kt[1]))}this.newParentId=Tt.newParentId,this.newInputName=Tt.newInputName,Tt.newCoordinate&&(kt=Tt.newCoordinate.split(","),this.newCoordinate=new ao(Number(kt[0]),Number(kt[1]))),Tt.recordUndo!==void 0&&(this.recordUndo=Tt.recordUndo)}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new NT),kt.oldParentId=Tt.oldParentId,kt.oldInputName=Tt.oldInputName,Tt.oldCoordinate&&(Bt=Tt.oldCoordinate.split(","),kt.oldCoordinate=new ao(Number(Bt[0]),Number(Bt[1]))),kt.newParentId=Tt.newParentId,kt.newInputName=Tt.newInputName,Tt.newCoordinate&&(Bt=Tt.newCoordinate.split(","),kt.newCoordinate=new ao(Number(Bt[0]),Number(Bt[1]))),Tt.recordUndo!==void 0&&(kt.recordUndo=Tt.recordUndo),kt}recordNew(){const Tt=this.currentLocation_();this.newParentId=Tt.parentId,this.newInputName=Tt.inputName,this.newCoordinate=Tt.coordinate}currentLocation_(){var Tt=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var kt=Tt.getBlockById(this.blockId);if(!kt)throw Error("The block associated with the block move event could not be found");Tt={};const Bt=kt.getParent();return Bt?(Tt.parentId=Bt.id,(kt=Bt.getInputWithBlock(kt))&&(Tt.inputName=kt.name)):Tt.coordinate=kt.getRelativeToSurfaceXY(),Tt}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&ao.equals(this.oldCoordinate,this.newCoordinate)}run(Tt){var kt=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var Bt=kt.getBlockById(this.blockId);if(Bt){var zt=Tt?this.newParentId:this.oldParentId,mn=Tt?this.newInputName:this.oldInputName;if(Tt=Tt?this.newCoordinate:this.oldCoordinate,zt){var En=kt.getBlockById(zt);if(!En){console.warn("Can't connect to non-existent block: "+zt);return}}if(Bt.getParent()&&Bt.unplug(),Tt)mn=Bt.getRelativeToSurfaceXY(),Bt.moveBy(Tt.x-mn.x,Tt.y-mn.y);else{kt=Bt.outputConnection,(!kt||Bt.previousConnection&&Bt.previousConnection.isConnected())&&(kt=Bt.previousConnection);let Hn;Bt=kt.type,mn?(Bt=En.getInput(mn))&&(Hn=Bt.connection):Bt===po.PREVIOUS_STATEMENT&&(Hn=En.nextConnection),Hn?kt.connect(Hn):console.warn("Can't connect to non-existent input: "+mn)}}else console.warn("Can't move non-existent block: "+this.blockId)}};So(ro.EVENT,hu,NT);var n_=class extends F_{constructor(Tt){super(),this.isBlank=!Tt,Tt&&(this.commentId=Tt.id,this.workspaceId=Tt.workspace.id,this.group=Mo(),this.recordUndo=Co())}toJson(){const Tt=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return Tt.commentId=this.commentId,Tt}fromJson(Tt){vt("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.commentId=Tt.commentId}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new n_),kt.commentId=Tt.commentId,kt}static CommentCreateDeleteHelper(Tt,kt){var Bt=Tt.getEventWorkspace_();if(kt){if(kt=Po("xml"),!Tt.xml)throw Error("Ecountered a comment event without proper xml");kt.appendChild(Tt.xml),Au(kt,Bt)}else{if(!Tt.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(Bt=Bt.getCommentById(Tt.commentId))?Bt.dispose():console.warn("Can't uncreate non-existent comment: "+Tt.commentId)}}},BT=class extends n_{constructor(Tt,kt,Bt){super(Tt),this.type=nv,Tt&&(this.oldContents_=typeof kt>"u"?"":kt,this.newContents_=typeof Bt>"u"?"":Bt)}toJson(){const Tt=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return Tt.oldContents=this.oldContents_,Tt.newContents=this.newContents_,Tt}fromJson(Tt){vt("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.oldContents_=Tt.oldContents,this.newContents_=Tt.newContents}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new BT),kt.oldContents_=Tt.oldContents,kt.newContents_=Tt.newContents,kt}isNull(){return this.oldContents_===this.newContents_}run(Tt){var kt=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(kt=kt.getCommentById(this.commentId)){var Bt=Tt?this.newContents_:this.oldContents_;if(!Bt)throw Error(Tt?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");kt.setContent(Bt)}else console.warn("Can't change non-existent comment: "+this.commentId)}};So(ro.EVENT,nv,BT);var FT=class extends n_{constructor(Tt){super(Tt),this.type=N_,Tt&&(this.xml=Tt.toXmlWithXY())}toJson(){const Tt=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return Tt.xml=$l(this.xml),Tt}fromJson(Tt){vt("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.xml=Rs(Tt.xml)}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new FT),kt.xml=Rs(Tt.xml),kt}run(Tt){n_.CommentCreateDeleteHelper(this,Tt)}};So(ro.EVENT,N_,FT);var GT=class extends n_{constructor(Tt){super(Tt),this.type=P0,Tt&&(this.xml=Tt.toXmlWithXY())}run(Tt){n_.CommentCreateDeleteHelper(this,!Tt)}toJson(){const Tt=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return Tt.xml=$l(this.xml),Tt}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new GT),kt.xml=Rs(Tt.xml),kt}};So(ro.EVENT,P0,GT);var UT=class extends n_{constructor(Tt){super(Tt),this.type=bm,Tt&&(this.comment_=Tt,this.oldCoordinate_=Tt.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(Tt){this.oldCoordinate_=Tt}toJson(){const Tt=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return Tt.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,Tt.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),Tt}fromJson(Tt){vt("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt);let kt=Tt.oldCoordinate.split(",");this.oldCoordinate_=new ao(Number(kt[0]),Number(kt[1])),kt=Tt.newCoordinate.split(","),this.newCoordinate_=new ao(Number(kt[0]),Number(kt[1]))}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new UT),Bt=Tt.oldCoordinate.split(","),kt.oldCoordinate_=new ao(Number(Bt[0]),Number(Bt[1])),Bt=Tt.newCoordinate.split(","),kt.newCoordinate_=new ao(Number(Bt[0]),Number(Bt[1])),kt}isNull(){return ao.equals(this.oldCoordinate_,this.newCoordinate_)}run(Tt){var kt=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(kt=kt.getCommentById(this.commentId)){if(Tt=Tt?this.newCoordinate_:this.oldCoordinate_,!Tt)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var Bt=kt.getXY();kt.moveBy(Tt.x-Bt.x,Tt.y-Bt.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};So(ro.EVENT,bm,UT);var j_=class extends F_{constructor(Tt,kt){super(),this.model=kt,this.isBlank=!1,this.workspaceId=Tt.id}toJson(){const Tt=super.toJson();return Tt.procedureId=this.model.getId(),Tt}},VT=class extends j_{constructor(Tt,kt,Bt){super(Tt,kt),this.oldTypes=Bt,this.type=PO,this.newTypes=kt.getReturnTypes()}run(Tt){const kt=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!kt)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");Tt?kt.setReturnTypes(this.newTypes):kt.setReturnTypes(this.oldTypes)}toJson(){const Tt=super.toJson();return Tt.oldTypes=this.oldTypes,Tt}static fromJson(Tt,kt){const Bt=kt.getProcedureMap().get(Tt.procedureId);if(!Bt)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new VT(kt,Bt,Tt.oldTypes)}};So(ro.EVENT,PO,VT);var WT=class extends j_{constructor(Tt,kt){super(Tt,kt),this.type=IO}run(Tt){const kt=this.getEventWorkspace_(),Bt=kt.getProcedureMap(),zt=Bt.get(this.model.getId());Tt?zt||Bt.add(new $v(kt,this.model.getName(),this.model.getId())):zt&&Bt.delete(this.model.getId())}toJson(){const Tt=super.toJson();return Tt.model=Qm(this.model),Tt}static fromJson(Tt,kt){return new WT(kt,jm($v,Z0,Tt.model,kt))}};So(ro.EVENT,IO,WT);var zT=class extends j_{constructor(Tt,kt){super(Tt,kt),this.type=rv}run(Tt){const kt=this.getEventWorkspace_(),Bt=kt.getProcedureMap(),zt=Bt.get(this.model.getId());Tt?zt&&Bt.delete(this.model.getId()):zt||Bt.add(new $v(kt,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(Tt,kt){if(Tt=kt.getProcedureMap().get(Tt.procedureId),!Tt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new zT(kt,Tt)}};So(ro.EVENT,rv,zT);var HT=class extends j_{constructor(Tt,kt){super(Tt,kt),this.type=MO,this.oldState=!kt.getEnabled(),this.newState=kt.getEnabled()}run(Tt){const kt=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!kt)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");Tt?kt.setEnabled(this.newState):kt.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(Tt,kt){if(Tt=kt.getProcedureMap().get(Tt.procedureId),!Tt)throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new HT(kt,Tt)}};So(ro.EVENT,MO,HT);var QT=class extends j_{constructor(Tt,kt,Bt){super(Tt,kt),this.oldName=Bt,this.type=RO,this.newName=kt.getName()}run(Tt){const kt=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!kt)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");Tt?kt.setName(this.newName):kt.setName(this.oldName)}toJson(){const Tt=super.toJson();return Tt.oldName=this.oldName,Tt}static fromJson(Tt,kt){const Bt=kt.getProcedureMap().get(Tt.procedureId);if(!Bt)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new QT(kt,Bt,Tt.oldName)}};So(ro.EVENT,RO,QT);var oS=class extends j_{constructor(Tt,kt,Bt){super(Tt,kt),this.parameter=Bt}toJson(){const Tt=super.toJson();return Tt.parameterId=this.model.getId(),Tt}},jT=class extends oS{constructor(Tt,kt,Bt,zt){super(Tt,kt,Bt),this.index=zt,this.type=DO}run(Tt){const kt=this.getEventWorkspace_(),Bt=kt.getProcedureMap().get(this.model.getId());if(!Bt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const zt=Bt.getParameter(this.index);Tt?this.parameterMatches(zt)||Bt.insertParameter(new Z0(kt,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(zt)&&Bt.deleteParameter(this.index)}parameterMatches(Tt){return Tt&&Tt.getId()===this.parameter.getId()}toJson(){const Tt=super.toJson();return Tt.parameter=_d(this.parameter),Tt.index=this.index,Tt}static fromJson(Tt,kt){const Bt=kt.getProcedureMap().get(Tt.procedureId);if(!Bt)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new jT(kt,Bt,gm(Z0,Tt.parameter,kt),Tt.index)}};So(ro.EVENT,DO,jT);var XT=class extends oS{constructor(Tt,kt,Bt,zt){super(Tt,kt,Bt),this.index=zt,this.type=LO}run(Tt){const kt=this.getEventWorkspace_(),Bt=kt.getProcedureMap().get(this.model.getId());if(!Bt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const zt=Bt.getParameter(this.index);Tt?this.parameterMatches(zt)&&Bt.deleteParameter(this.index):this.parameterMatches(zt)||Bt.insertParameter(new Z0(kt,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(Tt){return Tt&&Tt.getId()===this.parameter.getId()}toJson(){const Tt=super.toJson();return Tt.index=this.index,Tt}static fromJson(Tt,kt){const Bt=kt.getProcedureMap().get(Tt.procedureId);if(!Bt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const zt=Bt.getParameter(Tt.index);return new XT(kt,Bt,zt,Tt.index)}};So(ro.EVENT,LO,XT);var YT=class extends oS{constructor(Tt,kt,Bt,zt){super(Tt,kt,Bt),this.oldName=zt,this.type=NO,this.newName=Bt.getName()}run(Tt){const kt=OO(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!kt)throw Error("Cannot rename a parameter that does not exist in the procedure map");Tt?kt.setName(this.newName):kt.setName(this.oldName)}toJson(){const Tt=super.toJson();return Tt.oldName=this.oldName,Tt}static fromJson(Tt,kt){const Bt=kt.getProcedureMap().get(Tt.procedureId);if(!Bt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const zt=OO(kt,Tt.procedureId,Tt.parameterId);if(!zt)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new YT(kt,Bt,zt,Tt.oldName)}};So(ro.EVENT,NO,YT);var ZT=class extends pp{constructor(Tt,kt,Bt){super(Tt?Tt.workspace.id:void 0),this.type=M0,Tt&&(this.blockId=Tt.id,this.isStart=kt,this.blocks=Bt)}toJson(){const Tt=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return Tt.isStart=this.isStart,Tt.blockId=this.blockId,Tt.blocks=this.blocks,Tt}fromJson(Tt){vt("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(Tt),this.isStart=Tt.isStart,this.blockId=Tt.blockId,this.blocks=Tt.blocks}static fromJson(Tt,kt,Bt){return kt=super.fromJson(Tt,kt,Bt??new ZT),kt.isStart=Tt.isStart,kt.blockId=Tt.blockId,kt.blocks=Tt.blocks,kt}};So(ro.EVENT,M0,ZT);var BE=class extends pp{constructor(Tt,kt,Bt,zt){super(Tt?Tt.workspace.id:void 0),this.type=qy,this.blockId=Tt?Tt.id:null,this.element=typeof kt>"u"?"":kt,this.oldValue=typeof Bt>"u"?"":Bt,this.newValue=typeof zt>"u"?"":zt}toJson(){const Tt=super.toJson();return Tt.element=this.element,this.newValue!==void 0&&(Tt.newValue=this.newValue),this.blockId&&(Tt.blockId=this.blockId),Tt}fromJson(Tt){super.fromJson(Tt),this.element=Tt.element,this.newValue=Tt.newValue,this.blockId=Tt.blockId}};So(ro.EVENT,qy,BE);var FE=class extends F_{constructor(Tt){super(),this.isBlank=!0,this.recordUndo=!1,this.type=D0,this.isBlank=!!Tt,Tt&&(this.workspaceId=Tt.id)}toJson(){const Tt=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return Tt.workspaceId=this.workspaceId,Tt}fromJson(Tt){super.fromJson(Tt),this.workspaceId=Tt.workspaceId}};So(ro.EVENT,D0,FE),dt.module$build$src$core$events$events={},dt.module$build$src$core$events$events.Abstract=F_,dt.module$build$src$core$events$events.BLOCK_CHANGE=yl,dt.module$build$src$core$events$events.BLOCK_CREATE=Xl,dt.module$build$src$core$events$events.BLOCK_DELETE=Gp,dt.module$build$src$core$events$events.BLOCK_DRAG=M0,dt.module$build$src$core$events$events.BLOCK_MOVE=hu,dt.module$build$src$core$events$events.BUBBLE_OPEN=Om,dt.module$build$src$core$events$events.BUMP_EVENTS=wS,dt.module$build$src$core$events$events.BlockBase=N0,dt.module$build$src$core$events$events.BlockChange=G_,dt.module$build$src$core$events$events.BlockCreate=qS,dt.module$build$src$core$events$events.BlockDelete=KS,dt.module$build$src$core$events$events.BlockDrag=ZT,dt.module$build$src$core$events$events.BlockMove=NT,dt.module$build$src$core$events$events.BubbleOpen=HS,dt.module$build$src$core$events$events.BubbleType=QS,dt.module$build$src$core$events$events.CHANGE=yl,dt.module$build$src$core$events$events.CLICK=Km,dt.module$build$src$core$events$events.COMMENT_CHANGE=nv,dt.module$build$src$core$events$events.COMMENT_CREATE=N_,dt.module$build$src$core$events$events.COMMENT_DELETE=P0,dt.module$build$src$core$events$events.COMMENT_MOVE=bm,dt.module$build$src$core$events$events.CREATE=Xl,dt.module$build$src$core$events$events.Click=dT,dt.module$build$src$core$events$events.ClickTarget=fT,dt.module$build$src$core$events$events.CommentBase=n_,dt.module$build$src$core$events$events.CommentChange=BT,dt.module$build$src$core$events$events.CommentCreate=FT,dt.module$build$src$core$events$events.CommentDelete=GT,dt.module$build$src$core$events$events.CommentMove=UT,dt.module$build$src$core$events$events.DELETE=Gp,dt.module$build$src$core$events$events.FINISHED_LOADING=D0,dt.module$build$src$core$events$events.FinishedLoading=FE,dt.module$build$src$core$events$events.MARKER_MOVE=Ky,dt.module$build$src$core$events$events.MOVE=hu,dt.module$build$src$core$events$events.MarkerMove=xT,dt.module$build$src$core$events$events.ProcedureBase=j_,dt.module$build$src$core$events$events.ProcedureChangeReturn=VT,dt.module$build$src$core$events$events.ProcedureCreate=WT,dt.module$build$src$core$events$events.ProcedureDelete=zT,dt.module$build$src$core$events$events.ProcedureEnable=HT,dt.module$build$src$core$events$events.ProcedureParameterBase=oS,dt.module$build$src$core$events$events.ProcedureParameterCreate=jT,dt.module$build$src$core$events$events.ProcedureParameterDelete=XT,dt.module$build$src$core$events$events.ProcedureParameterRename=YT,dt.module$build$src$core$events$events.ProcedureRename=QT,dt.module$build$src$core$events$events.SELECTED=qm,dt.module$build$src$core$events$events.Selected=MS,dt.module$build$src$core$events$events.THEME_CHANGE=tv,dt.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=ev,dt.module$build$src$core$events$events.TRASHCAN_OPEN=Jy,dt.module$build$src$core$events$events.ThemeChange=pT,dt.module$build$src$core$events$events.ToolboxItemSelect=cT,dt.module$build$src$core$events$events.TrashcanOpen=YS,dt.module$build$src$core$events$events.UI=qy,dt.module$build$src$core$events$events.Ui=BE,dt.module$build$src$core$events$events.UiBase=pp,dt.module$build$src$core$events$events.VAR_CREATE=D_,dt.module$build$src$core$events$events.VAR_DELETE=R0,dt.module$build$src$core$events$events.VAR_RENAME=Zy,dt.module$build$src$core$events$events.VIEWPORT_CHANGE=L_,dt.module$build$src$core$events$events.VarBase=iv,dt.module$build$src$core$events$events.VarCreate=IS,dt.module$build$src$core$events$events.VarDelete=wT,dt.module$build$src$core$events$events.VarRename=CT,dt.module$build$src$core$events$events.ViewportChange=mT,dt.module$build$src$core$events$events.clearPendingUndo=Nl,dt.module$build$src$core$events$events.disable=Fo,dt.module$build$src$core$events$events.disableOrphans=Yo,dt.module$build$src$core$events$events.enable=_i,dt.module$build$src$core$events$events.filter=Hs,dt.module$build$src$core$events$events.fire=to,dt.module$build$src$core$events$events.fromJson=Sl,dt.module$build$src$core$events$events.get=no,dt.module$build$src$core$events$events.getDescendantIds=Ol,dt.module$build$src$core$events$events.getGroup=Mo,dt.module$build$src$core$events$events.getRecordUndo=Co,dt.module$build$src$core$events$events.isEnabled=ts,dt.module$build$src$core$events$events.setGroup=fo,dt.module$build$src$core$events$events.setRecordUndo=Ro,zy();var pu={};pu.registerCleanup=By,pu.registerCollapse=Mp,pu.registerCollapseExpandBlock=SO,pu.registerComment=Vy,pu.registerDefaultOptions=zy,pu.registerDelete=Wy,pu.registerDeleteAll=bO,pu.registerDisable=Dp,pu.registerDuplicate=Uy,pu.registerExpand=Fy,pu.registerHelp=Hl,pu.registerInline=Pp,pu.registerRedo=Ny,pu.registerUndo=hp;var GE=class{constructor(Tt,kt){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=Tt,this.draggedConnectionManager_=new Uu(this.draggingBlock_),this.workspace_=kt,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=mS(Tt)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(Tt,kt){Mo()||fo(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Dr(),this.workspace_.setResizesEnabled(!1),Nu(),this.shouldDisconnect_(kt)&&this.disconnectBlock_(kt,Tt),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(Tt){return!!(this.draggingBlock_.getParent()||Tt&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(Tt,kt){this.draggingBlock_.unplug(Tt),Tt=this.pixelsToWorkspaceUnits_(kt),Tt=ao.sum(this.startXY_,Tt),this.draggingBlock_.translate(Tt.x,Tt.y),cO(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const Tt=new(no(M0))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));to(Tt)}drag(Tt,kt){kt=this.pixelsToWorkspaceUnits_(kt);var Bt=ao.sum(this.startXY_,kt);this.draggingBlock_.moveDuringDrag(Bt),this.dragIcons_(kt),Bt=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(Tt),this.draggedConnectionManager_.update(kt,this.dragTarget_),Tt=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,Tt!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==Bt&&(Bt&&Bt.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(Tt,kt){this.drag(Tt,kt),this.dragIconData_=[],this.fireDragEndEvent_(),_r(),Nu(),Tt=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?kt=this.startXY_:(kt=this.getNewLocationAfterDrag_(kt),Tt=kt.delta,kt=kt.newLocation),this.draggingBlock_.moveOffDragSurface(kt),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),Tt?this.updateBlockAfterMove_(Tt):Xm(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),fo(!1)}getNewLocationAfterDrag_(Tt){Tt=this.pixelsToWorkspaceUnits_(Tt);const kt=ao.sum(this.startXY_,Tt);return{delta:Tt,newLocation:kt}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Ts.length=0,!0):!1}updateBlockAfterMove_(Tt){this.draggingBlock_.moveConnections(Tt.x,Tt.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const Tt=new(no(M0))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));to(Tt)}updateToolboxStyle_(Tt){const kt=this.workspace_.getToolbox();if(kt){const Bt=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";Tt&&typeof kt.removeStyle=="function"?kt.removeStyle(Bt):Tt||typeof kt.addStyle!="function"||kt.addStyle(Bt)}}fireMoveEvent_(){const Tt=new(no(hu))(this.draggingBlock_);Tt.oldCoordinate=this.startXY_,Tt.recordNew(),to(Tt)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(Tt){return Tt=new ao(Tt.x/this.workspace_.scale,Tt.y/this.workspace_.scale),this.workspace_.isMutator&&Tt.scale(1/this.workspace_.options.parentWorkspace.scale),Tt}dragIcons_(Tt){for(let kt=0;kt<this.dragIconData_.length;kt++){const Bt=this.dragIconData_[kt];Bt.icon.setIconLocation(ao.sum(Bt.location,Tt))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};So(ro.BLOCK_DRAGGER,vm,GE);var T$="9.2.1",x$=dt.Align$$module$build$src$core$input.LEFT,E$=dt.Align$$module$build$src$core$input.CENTRE,$$=dt.Align$$module$build$src$core$input.RIGHT,w$=po.INPUT_VALUE,C$=po.OUTPUT_VALUE,A$=po.NEXT_STATEMENT,k$=po.PREVIOUS_STATEMENT,I$=Uo.DUMMY,R$=Do.TOP,M$=Do.BOTTOM,P$=Do.LEFT,D$=Do.RIGHT;wm.prototype.newBlock=function(Tt,kt){return new z0(this,Tt,kt)},Op.prototype.newBlock=function(Tt,kt){return new ep(this,Tt,kt)},Op.newTrashcan=function(Tt){return new Fx(Tt)},tu.prototype.showContextMenu=function(Tt){if(!this.workspace.options.readOnly){var kt=[];this.isDeletable()&&this.isMovable()&&(kt.push(m0(this)),kt.push(p0(this))),kp(Tt,kt,this.RTL)}},dt.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(Tt){return new Op(Tt)},tp.prototype.populateProcedures=function(Tt){Tt=w_(Tt),Tt=Tt[0].concat(Tt[1]);for(let kt=0;kt<Tt.length;kt++)this.getName(Tt[kt][0],tp.NameType.PROCEDURE)};var L$=po,Wr={};return Wr.ALIGN_CENTRE=E$,Wr.ALIGN_LEFT=x$,Wr.ALIGN_RIGHT=$$,Wr.ASTNode=Jr,Wr.BasicCursor=xv,Wr.Block=z0,Wr.BlockDragSurfaceSvg=ME,Wr.BlockDragger=GE,Wr.BlockSvg=ep,Wr.Blocks=so,Wr.Bubble=Bo,Wr.BubbleDragger=zx,Wr.COLLAPSED_FIELD_NAME=yv,Wr.COLLAPSED_INPUT_NAME=_v,Wr.COLLAPSE_CHARS=Mx,Wr.CodeGenerator=dt.CodeGenerator$$module$build$src$core$generator,Wr.CollapsibleToolboxCategory=X0,Wr.Comment=Rx,Wr.ComponentManager=Dl,Wr.Connection=ls,Wr.ConnectionChecker=tE,Wr.ConnectionDB=Y0,Wr.ConnectionType=po,Wr.ContextMenu=dt.module$build$src$core$contextmenu,Wr.ContextMenuItems=pu,Wr.ContextMenuRegistry=cs,Wr.Css=LS,Wr.Cursor=oT,Wr.DELETE_VARIABLE_ID=iT,Wr.DRAG_STACK=Px,Wr.DUMMY_INPUT=I$,Wr.DeleteArea=qO,Wr.DragTarget=Bx,Wr.DropDownDiv=Vs,Wr.Events=dt.module$build$src$core$events$events,Wr.Extensions=dt.module$build$src$core$extensions,Wr.Field=qo,Wr.FieldAngle=Qo,Wr.FieldCheckbox=dt.FieldCheckbox$$module$build$src$core$field_checkbox,Wr.FieldColour=Vu,Wr.FieldDropdown=_p,Wr.FieldImage=dt.FieldImage$$module$build$src$core$field_image,Wr.FieldLabel=dt.FieldLabel$$module$build$src$core$field_label,Wr.FieldLabelSerializable=NE,Wr.FieldMultilineInput=LT,Wr.FieldNumber=DT,Wr.FieldTextInput=dt.FieldTextInput$$module$build$src$core$field_textinput,Wr.FieldVariable=Lv,Wr.Flyout=rS,Wr.FlyoutButton=K0,Wr.FlyoutMetricsManager=DE,Wr.Generator=dt.CodeGenerator$$module$build$src$core$generator,Wr.Gesture=Vp,Wr.Grid=gT,Wr.HorizontalFlyout=LE,Wr.INPUT_VALUE=w$,Wr.Icon=jO,Wr.Input=W0,Wr.InsertionMarkerManager=Uu,Wr.Marker=Dx,Wr.MarkerManager=sv,Wr.Menu=WS,Wr.MenuItem=zS,Wr.MetricsManager=MT,Wr.Msg=ko,Wr.Mutator=dt.Mutator$$module$build$src$core$mutator,Wr.NEXT_STATEMENT=A$,Wr.Names=tp,Wr.OPPOSITE_TYPE=V_,Wr.OUTPUT_VALUE=C$,Wr.Options=yp,Wr.PREVIOUS_STATEMENT=k$,Wr.PROCEDURE_CATEGORY_NAME=_b,Wr.Procedures=dt.module$build$src$core$procedures,Wr.RENAME_VARIABLE_ID=rT,Wr.RenderedConnection=du,Wr.Scrollbar=Is,Wr.ScrollbarPair=RT,Wr.ShortcutItems=zp,Wr.ShortcutRegistry=hs,Wr.TOOLBOX_AT_BOTTOM=M$,Wr.TOOLBOX_AT_LEFT=P$,Wr.TOOLBOX_AT_RIGHT=D$,Wr.TOOLBOX_AT_TOP=R$,Wr.TabNavigateCursor=Lx,Wr.Theme=U_,Wr.ThemeManager=eE,Wr.Themes=hT,Wr.Toolbox=Wx,Wr.ToolboxCategory=vp,Wr.ToolboxItem=uT,Wr.ToolboxSeparator=Ev,Wr.Tooltip=Ws,Wr.Touch=Ql,Wr.TouchGesture=Vp,Wr.Trashcan=Fx,Wr.VARIABLE_CATEGORY_NAME=GO,Wr.VARIABLE_DYNAMIC_CATEGORY_NAME=$T,Wr.VERSION=T$,Wr.VariableMap=AT,Wr.VariableModel=ov,Wr.Variables=dt.module$build$src$core$variables,Wr.VariablesDynamic=t_,Wr.VerticalFlyout=PT,Wr.Warning=Nx,Wr.WidgetDiv=gp,Wr.Workspace=wm,Wr.WorkspaceAudio=nE,Wr.WorkspaceComment=Up,Wr.WorkspaceCommentSvg=tu,Wr.WorkspaceDragSurfaceSvg=RE,Wr.WorkspaceDragger=Hx,Wr.WorkspaceSvg=Op,Wr.Xml=dt.module$build$src$core$xml,Wr.ZoomControls=rE,Wr.bindEventWithChecks_=ym,Wr.bindEvent_=Lp,Wr.blockAnimations=Ov,Wr.blockRendering=us,Wr.browserEvents=jr,Wr.bumpObjects=nS,Wr.clipboard=bv,Wr.common=dt.module$build$src$core$common,Wr.config=dt.config$$module$build$src$core$config,Wr.connectionTypes=L$,Wr.constants=JS,Wr.copy=xO,Wr.defineBlocksWithJsonArray=Un,Wr.dialog=Eu,Wr.duplicate=Tu,Wr.fieldRegistry=hv,Wr.geras=Qp,Wr.getMainWorkspace=In,Wr.getSelected=zn,Wr.hideChaff=gS,Wr.hueToHex=yS,Wr.inject=Rp,Wr.inputTypes=Uo,Wr.isNumber=Hy,Wr.minimalist=Dv,Wr.paste=_S,Wr.procedures=dt.module$build$src$core$procedures,Wr.registry=fp,Wr.resizeSvgContents=TO,Wr.serialization=S$,Wr.setLocale=kS,Wr.setParentContainer=xn,Wr.svgResize=Qn,Wr.thrasos=IT,Wr.uiPosition=W_,Wr.unbindEvent_=C0,Wr.utils=Ko,Wr.zelos=bp,dt.module$build$src$core$contextmenu,dt.module$build$src$core$events$events,dt.module$build$src$core$msg,dt.module$build$src$core$common,Object.defineProperties(Wr,{alert:{set:function(Tt){Bs.warn("Blockly.alert","December 2021","December 2022"),Eu.setAlert(Tt)},get:function(){return Bs.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),Eu.alert}},confirm:{set:function(Tt){Bs.warn("Blockly.confirm","December 2021","December 2022"),Eu.setConfirm(Tt)},get:function(){return Bs.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),Eu.confirm}},mainWorkspace:{set:function(Tt){Bs.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),dt.module$build$src$core$common.setMainWorkspace(Tt)},get:function(){return Bs.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),dt.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(Tt){Bs.warn("Blockly.prompt","December 2021","December 2022"),Eu.setPrompt(Tt)},get:function(){return Bs.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),Eu.prompt}},selected:{get:function(){return Bs.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),dt.module$build$src$core$common.getSelected()},set:function(Tt){Bs.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),dt.module$build$src$core$common.setSelected(Tt)}},HSV_SATURATION:{get:function(){return nu.getHsvSaturation()},set:function(Tt){nu.setHsvSaturation(Tt)}},HSV_VALUE:{get:function(){return nu.getHsvValue()},set:function(Tt){nu.setHsvValue(Tt)}}}),Object.defineProperties(dt.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Bs.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),dt.module$build$src$core$contextmenu.getCurrentBlock()},set:function(Tt){Bs.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),dt.module$build$src$core$contextmenu.setCurrentBlock(Tt)}}}),Object.defineProperties(dt.module$build$src$core$events$events,{recordUndo:{get:function(){return Bs.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),Io.getRecordUndo()},set:function(Tt){Bs.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),Io.setRecordUndo(Tt)}}}),Object.defineProperties(Ws,{visible:{get:function(){return Bs.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),Ws.isVisible()}},DIV:{get:function(){return Bs.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),Ws.getDiv()}}}),Object.defineProperties(gp,{DIV:{get:function(){return Bs.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),gp.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:dt.module$build$src$core$msg}),Wr.__namespace__=dt,Wr})}(blockly_compressed)),blockly_compressed.exports}var hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})}(blockly$1)),blockly$1.exports}var hasRequiredCoreBrowser;function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly())})(commonjsGlobal,function(dt){return dt})}(coreBrowser)),coreBrowser.exports}var python_compressed={exports:{}},hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,St={};vt.module$build$src$core$utils$string,vt.module$build$src$core$variables,vt.CodeGenerator$$module$build$src$core$generator,vt.module$build$src$core$input_types.inputTypes,vt.module$build$src$core$names.Names,vt.NameType$$module$build$src$core$names,St.pythonGenerator=new vt.CodeGenerator$$module$build$src$core$generator("Python"),St.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),St.pythonGenerator.ORDER_ATOMIC=0,St.pythonGenerator.ORDER_COLLECTION=1,St.pythonGenerator.ORDER_STRING_CONVERSION=1,St.pythonGenerator.ORDER_MEMBER=2.1,St.pythonGenerator.ORDER_FUNCTION_CALL=2.2,St.pythonGenerator.ORDER_EXPONENTIATION=3,St.pythonGenerator.ORDER_UNARY_SIGN=4,St.pythonGenerator.ORDER_BITWISE_NOT=4,St.pythonGenerator.ORDER_MULTIPLICATIVE=5,St.pythonGenerator.ORDER_ADDITIVE=6,St.pythonGenerator.ORDER_BITWISE_SHIFT=7,St.pythonGenerator.ORDER_BITWISE_AND=8,St.pythonGenerator.ORDER_BITWISE_XOR=9,St.pythonGenerator.ORDER_BITWISE_OR=10,St.pythonGenerator.ORDER_RELATIONAL=11,St.pythonGenerator.ORDER_LOGICAL_NOT=12,St.pythonGenerator.ORDER_LOGICAL_AND=13,St.pythonGenerator.ORDER_LOGICAL_OR=14,St.pythonGenerator.ORDER_CONDITIONAL=15,St.pythonGenerator.ORDER_LAMBDA=16,St.pythonGenerator.ORDER_NONE=99,St.pythonGenerator.ORDER_OVERRIDES=[[St.pythonGenerator.ORDER_FUNCTION_CALL,St.pythonGenerator.ORDER_MEMBER],[St.pythonGenerator.ORDER_FUNCTION_CALL,St.pythonGenerator.ORDER_FUNCTION_CALL],[St.pythonGenerator.ORDER_MEMBER,St.pythonGenerator.ORDER_MEMBER],[St.pythonGenerator.ORDER_MEMBER,St.pythonGenerator.ORDER_FUNCTION_CALL],[St.pythonGenerator.ORDER_LOGICAL_NOT,St.pythonGenerator.ORDER_LOGICAL_NOT],[St.pythonGenerator.ORDER_LOGICAL_AND,St.pythonGenerator.ORDER_LOGICAL_AND],[St.pythonGenerator.ORDER_LOGICAL_OR,St.pythonGenerator.ORDER_LOGICAL_OR]],St.pythonGenerator.isInitialized=!1,St.pythonGenerator.init=function(At){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new vt.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(At.getVariableMap()),this.nameDB_.populateVariables(At),this.nameDB_.populateProcedures(At);const Rt=[];var Dt=vt.module$build$src$core$variables.allDeveloperVariables(At);for(let Nt=0;Nt<Dt.length;Nt++)Rt.push(this.nameDB_.getName(Dt[Nt],vt.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(At=vt.module$build$src$core$variables.allUsedVarModels(At),Dt=0;Dt<At.length;Dt++)Rt.push(this.nameDB_.getName(At[Dt].getId(),vt.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=Rt.join(`
`),this.isInitialized=!0},St.pythonGenerator.finish=function(At){const Rt=[],Dt=[];for(let Nt in this.definitions_){const Ft=this.definitions_[Nt];Ft.match(/^(from\s+\S+\s+)?import\s+\S+/)?Rt.push(Ft):Dt.push(Ft)}return At=Object.getPrototypeOf(this).finish.call(this,At),this.isInitialized=!1,this.nameDB_.reset(),(Rt.join(`
`)+`

`+Dt.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+At},St.pythonGenerator.scrubNakedValue=function(At){return At+`
`},St.pythonGenerator.quote_=function(At){At=At.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let Rt="'";return At.indexOf("'")!==-1&&(At.indexOf('"')===-1?Rt='"':At=At.replace(/'/g,"\\'")),Rt+At+Rt},St.pythonGenerator.multiline_quote_=function(At){return At.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)},St.pythonGenerator.scrub_=function(At,Rt,Dt){let Nt="";if(!At.outputConnection||!At.outputConnection.targetConnection){var Ft=At.getCommentText();Ft&&(Ft=vt.module$build$src$core$utils$string.wrap(Ft,this.COMMENT_WRAP-3),Nt+=this.prefixLines(Ft+`
`,"# "));for(let Ut=0;Ut<At.inputList.length;Ut++)At.inputList[Ut].type===vt.module$build$src$core$input_types.inputTypes.VALUE&&(Ft=At.inputList[Ut].connection.targetBlock())&&(Ft=this.allNestedComments(Ft))&&(Nt+=this.prefixLines(Ft,"# "))}return At=At.nextConnection&&At.nextConnection.targetBlock(),Dt=Dt?"":this.blockToCode(At),Nt+Rt+Dt},St.pythonGenerator.getAdjustedInt=function(At,Rt,Dt,Nt){Dt=Dt||0,At.workspace.options.oneBasedIndex&&Dt--;const Ft=At.workspace.options.oneBasedIndex?"1":"0";return At=this.valueToCode(At,Rt,Dt?this.ORDER_ADDITIVE:this.ORDER_NONE)||Ft,vt.module$build$src$core$utils$string.isNumber(At)?(At=parseInt(At,10)+Dt,Nt&&(At=-At)):(At=0<Dt?"int("+At+" + "+Dt+")":0>Dt?"int("+At+" - "+-Dt+")":"int("+At+")",Nt&&(At="-"+At)),At},vt.NameType$$module$build$src$core$names,St.pythonGenerator.variables_get=function(At){return[St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.variables_set=function(At){const Rt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"0";return St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE)+" = "+Rt+`
`},St.pythonGenerator.variables_get_dynamic=St.pythonGenerator.variables_get,St.pythonGenerator.variables_set_dynamic=St.pythonGenerator.variables_set,vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,St.pythonGenerator.text=function(At){return[St.pythonGenerator.quote_(At.getFieldValue("TEXT")),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.text_multiline=function(At){At=St.pythonGenerator.multiline_quote_(At.getFieldValue("TEXT"));const Rt=At.indexOf("+")!==-1?St.pythonGenerator.ORDER_ADDITIVE:St.pythonGenerator.ORDER_ATOMIC;return[At,Rt]};var Et=/^\s*'([^']|\\')*'\s*$/,Ct=function(At){return Et.test(At)?[At,St.pythonGenerator.ORDER_ATOMIC]:["str("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]};return St.pythonGenerator.text_join=function(At){switch(At.itemCount_){case 0:return["''",St.pythonGenerator.ORDER_ATOMIC];case 1:return At=St.pythonGenerator.valueToCode(At,"ADD0",St.pythonGenerator.ORDER_NONE)||"''",Ct(At);case 2:var Rt=St.pythonGenerator.valueToCode(At,"ADD0",St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.valueToCode(At,"ADD1",St.pythonGenerator.ORDER_NONE)||"''",[Ct(Rt)[0]+" + "+Ct(At)[0],St.pythonGenerator.ORDER_ADDITIVE];default:Rt=[];for(let Dt=0;Dt<At.itemCount_;Dt++)Rt[Dt]=St.pythonGenerator.valueToCode(At,"ADD"+Dt,St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.nameDB_.getDistinctName("x",vt.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+At+") for "+At+" in ["+Rt.join(", ")+"]])",St.pythonGenerator.ORDER_FUNCTION_CALL]}},St.pythonGenerator.text_append=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);return At=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''",Rt+" = str("+Rt+") + "+Ct(At)[0]+`
`},St.pythonGenerator.text_length=function(At){return["len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_isEmpty=function(At){return["not len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''")+")",St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.text_indexOf=function(At){var Rt=At.getFieldValue("END")==="FIRST"?"find":"rfind";const Dt=St.pythonGenerator.valueToCode(At,"FIND",St.pythonGenerator.ORDER_NONE)||"''";return Rt=(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_MEMBER)||"''")+"."+Rt+"("+Dt+")",At.workspace.options.oneBasedIndex?[Rt+" + 1",St.pythonGenerator.ORDER_ADDITIVE]:[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_charAt=function(At){const Rt=At.getFieldValue("WHERE")||"FROM_START",Dt=St.pythonGenerator.valueToCode(At,"VALUE",Rt==="RANDOM"?St.pythonGenerator.ORDER_NONE:St.pythonGenerator.ORDER_MEMBER)||"''";switch(Rt){case"FIRST":return[Dt+"[0]",St.pythonGenerator.ORDER_MEMBER];case"LAST":return[Dt+"[-1]",St.pythonGenerator.ORDER_MEMBER];case"FROM_START":return At=St.pythonGenerator.getAdjustedInt(At,"AT"),[Dt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];case"FROM_END":return At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),[Dt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];case"RANDOM":return St.pythonGenerator.definitions_.import_random="import random",[St.pythonGenerator.provideFunction_("text_random_letter",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+Dt+")",St.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},St.pythonGenerator.text_getSubstring=function(At){var Rt=At.getFieldValue("WHERE1");const Dt=At.getFieldValue("WHERE2"),Nt=St.pythonGenerator.valueToCode(At,"STRING",St.pythonGenerator.ORDER_MEMBER)||"''";switch(Rt){case"FROM_START":Rt=St.pythonGenerator.getAdjustedInt(At,"AT1"),Rt===0&&(Rt="");break;case"FROM_END":Rt=St.pythonGenerator.getAdjustedInt(At,"AT1",1,!0);break;case"FIRST":Rt="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(Dt){case"FROM_START":At=St.pythonGenerator.getAdjustedInt(At,"AT2",1);break;case"FROM_END":At=St.pythonGenerator.getAdjustedInt(At,"AT2",0,!0),vt.module$build$src$core$utils$string.isNumber(String(At))?At===0&&(At=""):(St.pythonGenerator.definitions_.import_sys="import sys",At+=" or sys.maxsize");break;case"LAST":At="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[Nt+"["+Rt+" : "+At+"]",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.text_changeCase=function(At){const Rt={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[At.getFieldValue("CASE")];return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_trim=function(At){const Rt={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[At.getFieldValue("MODE")];return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_print=function(At){return"print("+(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''")+`)
`},St.pythonGenerator.text_prompt_ext=function(At){var Rt=St.pythonGenerator.provideFunction_("text_prompt",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);let Dt;return Dt=At.getField("TEXT")?St.pythonGenerator.quote_(At.getFieldValue("TEXT")):St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''",Rt=Rt+"("+Dt+")",At.getFieldValue("TYPE")==="NUMBER"&&(Rt="float("+Rt+")"),[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_prompt=St.pythonGenerator.text_prompt_ext,St.pythonGenerator.text_count=function(At){const Rt=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''";return At=St.pythonGenerator.valueToCode(At,"SUB",St.pythonGenerator.ORDER_NONE)||"''",[Rt+".count("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_replace=function(At){const Rt=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''",Dt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"''",[Rt+".replace("+Dt+", "+At+")",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.text_reverse=function(At){return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",St.pythonGenerator.ORDER_MEMBER]},vt.module$build$src$core$variables,vt.NameType$$module$build$src$core$names,St.pythonGenerator.procedures_defreturn=function(At){var Rt=[],Dt=At.workspace,Nt=vt.module$build$src$core$variables.allUsedVarModels(Dt)||[];for(let hn=0,dn;dn=Nt[hn];hn++){var Ft=dn.name;At.getVars().indexOf(Ft)===-1&&Rt.push(St.pythonGenerator.nameDB_.getName(Ft,vt.NameType$$module$build$src$core$names.VARIABLE))}for(Dt=vt.module$build$src$core$variables.allDeveloperVariables(Dt),Nt=0;Nt<Dt.length;Nt++)Rt.push(St.pythonGenerator.nameDB_.getName(Dt[Nt],vt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));Dt=Rt.length?St.pythonGenerator.INDENT+"global "+Rt.join(", ")+`
`:"",Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Nt="",St.pythonGenerator.STATEMENT_PREFIX&&(Nt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At)),St.pythonGenerator.STATEMENT_SUFFIX&&(Nt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At)),Nt&&(Nt=St.pythonGenerator.prefixLines(Nt,St.pythonGenerator.INDENT)),Ft="",St.pythonGenerator.INFINITE_LOOP_TRAP&&(Ft=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.INFINITE_LOOP_TRAP,At),St.pythonGenerator.INDENT));let Ut=St.pythonGenerator.statementToCode(At,"STACK"),Wt=St.pythonGenerator.valueToCode(At,"RETURN",St.pythonGenerator.ORDER_NONE)||"",Zt="";Ut&&Wt&&(Zt=Nt),Wt?Wt=St.pythonGenerator.INDENT+"return "+Wt+`
`:Ut||(Ut=St.pythonGenerator.PASS);const Kt=[],cn=At.getVars();for(let hn=0;hn<cn.length;hn++)Kt[hn]=St.pythonGenerator.nameDB_.getName(cn[hn],vt.NameType$$module$build$src$core$names.VARIABLE);return Dt="def "+Rt+"("+Kt.join(", ")+`):
`+Dt+Nt+Ft+Ut+Zt+Wt,Dt=St.pythonGenerator.scrub_(At,Dt),St.pythonGenerator.definitions_["%"+Rt]=Dt,null},St.pythonGenerator.procedures_defnoreturn=St.pythonGenerator.procedures_defreturn,St.pythonGenerator.procedures_callreturn=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Dt=[],Nt=At.getVars();for(let Ft=0;Ft<Nt.length;Ft++)Dt[Ft]=St.pythonGenerator.valueToCode(At,"ARG"+Ft,St.pythonGenerator.ORDER_NONE)||"None";return[Rt+"("+Dt.join(", ")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.procedures_callnoreturn=function(At){return St.pythonGenerator.procedures_callreturn(At)[0]+`
`},St.pythonGenerator.procedures_ifreturn=function(At){let Rt="if "+(St.pythonGenerator.valueToCode(At,"CONDITION",St.pythonGenerator.ORDER_NONE)||"False")+`:
`;return St.pythonGenerator.STATEMENT_SUFFIX&&(Rt+=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)),At.hasReturnValue_?(At=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"None",Rt+=St.pythonGenerator.INDENT+"return "+At+`
`):Rt+=St.pythonGenerator.INDENT+`return
`,Rt},vt.NameType$$module$build$src$core$names,St.pythonGenerator.addReservedWords("math,random,Number"),St.pythonGenerator.math_number=function(At){At=Number(At.getFieldValue("NUM"));let Rt;return At===1/0?(At='float("inf")',Rt=St.pythonGenerator.ORDER_FUNCTION_CALL):At===-1/0?(At='-float("inf")',Rt=St.pythonGenerator.ORDER_UNARY_SIGN):Rt=0>At?St.pythonGenerator.ORDER_UNARY_SIGN:St.pythonGenerator.ORDER_ATOMIC,[At,Rt]},St.pythonGenerator.math_arithmetic=function(At){var Rt={ADD:[" + ",St.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",St.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",St.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",St.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",St.pythonGenerator.ORDER_EXPONENTIATION]}[At.getFieldValue("OP")];const Dt=Rt[0];Rt=Rt[1];const Nt=St.pythonGenerator.valueToCode(At,"A",Rt)||"0";return At=St.pythonGenerator.valueToCode(At,"B",Rt)||"0",[Nt+Dt+At,Rt]},St.pythonGenerator.math_single=function(At){const Rt=At.getFieldValue("OP");let Dt;if(Rt==="NEG")return Dt=St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+Dt,St.pythonGenerator.ORDER_UNARY_SIGN];switch(St.pythonGenerator.definitions_.import_math="import math",At=Rt==="SIN"||Rt==="COS"||Rt==="TAN"?St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_NONE)||"0",Rt){case"ABS":Dt="math.fabs("+At+")";break;case"ROOT":Dt="math.sqrt("+At+")";break;case"LN":Dt="math.log("+At+")";break;case"LOG10":Dt="math.log10("+At+")";break;case"EXP":Dt="math.exp("+At+")";break;case"POW10":Dt="math.pow(10,"+At+")";break;case"ROUND":Dt="round("+At+")";break;case"ROUNDUP":Dt="math.ceil("+At+")";break;case"ROUNDDOWN":Dt="math.floor("+At+")";break;case"SIN":Dt="math.sin("+At+" / 180.0 * math.pi)";break;case"COS":Dt="math.cos("+At+" / 180.0 * math.pi)";break;case"TAN":Dt="math.tan("+At+" / 180.0 * math.pi)"}if(Dt)return[Dt,St.pythonGenerator.ORDER_FUNCTION_CALL];switch(Rt){case"ASIN":Dt="math.asin("+At+") / math.pi * 180";break;case"ACOS":Dt="math.acos("+At+") / math.pi * 180";break;case"ATAN":Dt="math.atan("+At+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+Rt)}return[Dt,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.math_constant=function(At){const Rt={PI:["math.pi",St.pythonGenerator.ORDER_MEMBER],E:["math.e",St.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",St.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",St.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",St.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",St.pythonGenerator.ORDER_ATOMIC]};return At=At.getFieldValue("CONSTANT"),At!=="INFINITY"&&(St.pythonGenerator.definitions_.import_math="import math"),Rt[At]},St.pythonGenerator.math_number_property=function(At){var Rt={EVEN:[" % 2 == 0",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",St.pythonGenerator.ORDER_RELATIONAL,St.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",St.pythonGenerator.ORDER_RELATIONAL,St.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,St.pythonGenerator.ORDER_NONE,St.pythonGenerator.ORDER_FUNCTION_CALL]};const Dt=At.getFieldValue("PROPERTY"),[Nt,Ft,Ut]=Rt[Dt];if(Rt=St.pythonGenerator.valueToCode(At,"NUMBER_TO_CHECK",Ft)||"0",Dt==="PRIME")St.pythonGenerator.definitions_.import_math="import math",St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",At=St.pythonGenerator.provideFunction_("math_isPrime",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+Rt+")";else if(Dt==="DIVISIBLE_BY"){if(At=St.pythonGenerator.valueToCode(At,"DIVISOR",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",At==="0")return["False",St.pythonGenerator.ORDER_ATOMIC];At=Rt+" % "+At+" == 0"}else At=Rt+Nt;return[At,Ut]},St.pythonGenerator.math_change=function(At){St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const Rt=St.pythonGenerator.valueToCode(At,"DELTA",St.pythonGenerator.ORDER_ADDITIVE)||"0";return At=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),At+" = ("+At+" if isinstance("+At+", Number) else 0) + "+Rt+`
`},St.pythonGenerator.math_round=St.pythonGenerator.math_single,St.pythonGenerator.math_trig=St.pythonGenerator.math_single,St.pythonGenerator.math_on_list=function(At){var Rt=At.getFieldValue("OP");switch(At=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]",Rt){case"SUM":Rt="sum("+At+")";break;case"MIN":Rt="min("+At+")";break;case"MAX":Rt="max("+At+")";break;case"AVERAGE":St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",Rt=St.pythonGenerator.provideFunction_("math_mean",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+At+")";break;case"MEDIAN":St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",Rt=St.pythonGenerator.provideFunction_("math_median",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+At+")";break;case"MODE":Rt=St.pythonGenerator.provideFunction_("math_modes",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+At+")";break;case"STD_DEV":St.pythonGenerator.definitions_.import_math="import math",Rt=St.pythonGenerator.provideFunction_("math_standard_deviation",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+At+")";break;case"RANDOM":St.pythonGenerator.definitions_.import_random="import random",Rt="random.choice("+At+")";break;default:throw Error("Unknown operator: "+Rt)}return[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_modulo=function(At){const Rt=St.pythonGenerator.valueToCode(At,"DIVIDEND",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0";return At=St.pythonGenerator.valueToCode(At,"DIVISOR",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",[Rt+" % "+At,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.math_constrain=function(At){const Rt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"0",Dt=St.pythonGenerator.valueToCode(At,"LOW",St.pythonGenerator.ORDER_NONE)||"0";return At=St.pythonGenerator.valueToCode(At,"HIGH",St.pythonGenerator.ORDER_NONE)||"float('inf')",["min(max("+Rt+", "+Dt+"), "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_random_int=function(At){St.pythonGenerator.definitions_.import_random="import random";const Rt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"0";return At=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"0",["random.randint("+Rt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_random_float=function(At){return St.pythonGenerator.definitions_.import_random="import random",["random.random()",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_atan2=function(At){St.pythonGenerator.definitions_.import_math="import math";const Rt=St.pythonGenerator.valueToCode(At,"X",St.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(St.pythonGenerator.valueToCode(At,"Y",St.pythonGenerator.ORDER_NONE)||"0")+", "+Rt+") / math.pi * 180",St.pythonGenerator.ORDER_MULTIPLICATIVE]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,St.pythonGenerator.controls_repeat_ext=function(At){let Rt;Rt=At.getField("TIMES")?String(parseInt(At.getFieldValue("TIMES"),10)):St.pythonGenerator.valueToCode(At,"TIMES",St.pythonGenerator.ORDER_NONE)||"0",Rt=vt.module$build$src$core$utils$string.isNumber(Rt)?parseInt(Rt,10):"int("+Rt+")";let Dt=St.pythonGenerator.statementToCode(At,"DO");return Dt=St.pythonGenerator.addLoopTrap(Dt,At)||St.pythonGenerator.PASS,"for "+St.pythonGenerator.nameDB_.getDistinctName("count",vt.NameType$$module$build$src$core$names.VARIABLE)+" in range("+Rt+`):
`+Dt},St.pythonGenerator.controls_repeat=St.pythonGenerator.controls_repeat_ext,St.pythonGenerator.controls_whileUntil=function(At){const Rt=At.getFieldValue("MODE")==="UNTIL";let Dt=St.pythonGenerator.valueToCode(At,"BOOL",Rt?St.pythonGenerator.ORDER_LOGICAL_NOT:St.pythonGenerator.ORDER_NONE)||"False",Nt=St.pythonGenerator.statementToCode(At,"DO");return Nt=St.pythonGenerator.addLoopTrap(Nt,At)||St.pythonGenerator.PASS,Rt&&(Dt="not "+Dt),"while "+Dt+`:
`+Nt},St.pythonGenerator.controls_for=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);var Dt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"0",Nt=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"0",Ft=St.pythonGenerator.valueToCode(At,"BY",St.pythonGenerator.ORDER_NONE)||"1";let Ut=St.pythonGenerator.statementToCode(At,"DO");Ut=St.pythonGenerator.addLoopTrap(Ut,At)||St.pythonGenerator.PASS;let Wt="";const Zt=function(){return St.pythonGenerator.provideFunction_("upRange",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)},Kt=function(){return St.pythonGenerator.provideFunction_("downRange",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(At=function(cn,hn,dn){return"("+cn+" <= "+hn+") and "+Zt()+"("+cn+", "+hn+", "+dn+") or "+Kt()+"("+cn+", "+hn+", "+dn+")"},vt.module$build$src$core$utils$string.isNumber(Dt)&&vt.module$build$src$core$utils$string.isNumber(Nt)&&vt.module$build$src$core$utils$string.isNumber(Ft))Dt=Number(Dt),Nt=Number(Nt),Ft=Math.abs(Number(Ft)),Dt%1===0&&Nt%1===0&&Ft%1===0?(Dt<=Nt?(Nt++,At=Dt===0&&Ft===1?Nt:Dt+", "+Nt,Ft!==1&&(At+=", "+Ft)):(Nt--,At=Dt+", "+Nt+", -"+Ft),At="range("+At+")"):(At=Dt<Nt?Zt():Kt(),At+="("+Dt+", "+Nt+", "+Ft+")");else{const cn=function(hn,dn){return vt.module$build$src$core$utils$string.isNumber(hn)?hn=Number(hn):hn.match(/^\w+$/)||(dn=St.pythonGenerator.nameDB_.getDistinctName(Rt+dn,vt.NameType$$module$build$src$core$names.VARIABLE),Wt+=dn+" = "+hn+`
`,hn=dn),hn};Dt=cn(Dt,"_start"),Nt=cn(Nt,"_end"),Ft=cn(Ft,"_inc"),typeof Dt=="number"&&typeof Nt=="number"?(At=Dt<Nt?Zt():Kt(),At+="("+Dt+", "+Nt+", "+Ft+")"):At=At(Dt,Nt,Ft)}return Wt+="for "+Rt+" in "+At+`:
`+Ut},St.pythonGenerator.controls_forEach=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Dt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_RELATIONAL)||"[]";let Nt=St.pythonGenerator.statementToCode(At,"DO");return Nt=St.pythonGenerator.addLoopTrap(Nt,At)||St.pythonGenerator.PASS,"for "+Rt+" in "+Dt+`:
`+Nt},St.pythonGenerator.controls_flow_statements=function(At){let Rt="";if(St.pythonGenerator.STATEMENT_PREFIX&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At)),St.pythonGenerator.STATEMENT_SUFFIX&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At)),St.pythonGenerator.STATEMENT_PREFIX){const Dt=At.getSurroundLoop();Dt&&!Dt.suppressPrefixSuffix&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,Dt))}switch(At.getFieldValue("FLOW")){case"BREAK":return Rt+`break
`;case"CONTINUE":return Rt+`continue
`}throw Error("Unknown flow statement.")},St.pythonGenerator.controls_if=function(At){let Rt=0,Dt="",Nt,Ft;St.pythonGenerator.STATEMENT_PREFIX&&(Dt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At));do Ft=St.pythonGenerator.valueToCode(At,"IF"+Rt,St.pythonGenerator.ORDER_NONE)||"False",Nt=St.pythonGenerator.statementToCode(At,"DO"+Rt)||St.pythonGenerator.PASS,St.pythonGenerator.STATEMENT_SUFFIX&&(Nt=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)+Nt),Dt+=(Rt===0?"if ":"elif ")+Ft+`:
`+Nt,Rt++;while(At.getInput("IF"+Rt));return(At.getInput("ELSE")||St.pythonGenerator.STATEMENT_SUFFIX)&&(Nt=St.pythonGenerator.statementToCode(At,"ELSE")||St.pythonGenerator.PASS,St.pythonGenerator.STATEMENT_SUFFIX&&(Nt=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)+Nt),Dt+=`else:
`+Nt),Dt},St.pythonGenerator.controls_ifelse=St.pythonGenerator.controls_if,St.pythonGenerator.logic_compare=function(At){const Rt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[At.getFieldValue("OP")],Dt=St.pythonGenerator.ORDER_RELATIONAL,Nt=St.pythonGenerator.valueToCode(At,"A",Dt)||"0";return At=St.pythonGenerator.valueToCode(At,"B",Dt)||"0",[Nt+" "+Rt+" "+At,Dt]},St.pythonGenerator.logic_operation=function(At){const Rt=At.getFieldValue("OP")==="AND"?"and":"or",Dt=Rt==="and"?St.pythonGenerator.ORDER_LOGICAL_AND:St.pythonGenerator.ORDER_LOGICAL_OR;let Nt=St.pythonGenerator.valueToCode(At,"A",Dt);if(At=St.pythonGenerator.valueToCode(At,"B",Dt),Nt||At){const Ft=Rt==="and"?"True":"False";Nt||(Nt=Ft),At||(At=Ft)}else At=Nt="False";return[Nt+" "+Rt+" "+At,Dt]},St.pythonGenerator.logic_negate=function(At){return["not "+(St.pythonGenerator.valueToCode(At,"BOOL",St.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.logic_boolean=function(At){return[At.getFieldValue("BOOL")==="TRUE"?"True":"False",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.logic_null=function(At){return["None",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.logic_ternary=function(At){const Rt=St.pythonGenerator.valueToCode(At,"IF",St.pythonGenerator.ORDER_CONDITIONAL)||"False",Dt=St.pythonGenerator.valueToCode(At,"THEN",St.pythonGenerator.ORDER_CONDITIONAL)||"None";return At=St.pythonGenerator.valueToCode(At,"ELSE",St.pythonGenerator.ORDER_CONDITIONAL)||"None",[Dt+" if "+Rt+" else "+At,St.pythonGenerator.ORDER_CONDITIONAL]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,St.pythonGenerator.lists_create_empty=function(At){return["[]",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.lists_create_with=function(At){const Rt=Array(At.itemCount_);for(let Dt=0;Dt<At.itemCount_;Dt++)Rt[Dt]=St.pythonGenerator.valueToCode(At,"ADD"+Dt,St.pythonGenerator.ORDER_NONE)||"None";return["["+Rt.join(", ")+"]",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.lists_repeat=function(At){const Rt=St.pythonGenerator.valueToCode(At,"ITEM",St.pythonGenerator.ORDER_NONE)||"None";return At=St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",["["+Rt+"] * "+At,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.lists_length=function(At){return["len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"[]")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_isEmpty=function(At){return["not len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"[]")+")",St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.lists_indexOf=function(At){const Rt=St.pythonGenerator.valueToCode(At,"FIND",St.pythonGenerator.ORDER_NONE)||"[]",Dt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''";let Nt=" -1",Ft="",Ut=" - 1";return At.workspace.options.oneBasedIndex&&(Nt=" 0",Ft=" + 1",Ut=""),[(At.getFieldValue("END")==="FIRST"?St.pythonGenerator.provideFunction_("first_index",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${Ft}
  except: index =${Nt}
  return index
`):St.pythonGenerator.provideFunction_("last_index",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${Ut}
  except: index =${Nt}
  return index
`))+"("+Dt+", "+Rt+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_getIndex=function(At){const Rt=At.getFieldValue("MODE")||"GET",Dt=At.getFieldValue("WHERE")||"FROM_START";var Nt=St.pythonGenerator.valueToCode(At,"VALUE",Dt==="RANDOM"?St.pythonGenerator.ORDER_NONE:St.pythonGenerator.ORDER_MEMBER)||"[]";switch(Dt){case"FIRST":if(Rt==="GET")return[Nt+"[0]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop(0)",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`.pop(0)
`;break;case"LAST":if(Rt==="GET")return[Nt+"[-1]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop()",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`.pop()
`;break;case"FROM_START":if(At=St.pythonGenerator.getAdjustedInt(At,"AT"),Rt==="GET")return[Nt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+".pop("+At+`)
`;break;case"FROM_END":if(At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),Rt==="GET")return[Nt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+".pop("+At+`)
`;break;case"RANDOM":if(St.pythonGenerator.definitions_.import_random="import random",Rt==="GET")return["random.choice("+Nt+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Nt=St.pythonGenerator.provideFunction_("lists_remove_random_item",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+Nt+")",Rt==="GET_REMOVE")return[Nt,St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`
`}throw Error("Unhandled combination (lists_getIndex).")},St.pythonGenerator.lists_setIndex=function(At){let Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_MEMBER)||"[]";const Dt=At.getFieldValue("MODE")||"GET";var Nt=At.getFieldValue("WHERE")||"FROM_START";const Ft=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"None";switch(Nt){case"FIRST":if(Dt==="SET")return Rt+"[0] = "+Ft+`
`;if(Dt==="INSERT")return Rt+".insert(0, "+Ft+`)
`;break;case"LAST":if(Dt==="SET")return Rt+"[-1] = "+Ft+`
`;if(Dt==="INSERT")return Rt+".append("+Ft+`)
`;break;case"FROM_START":if(At=St.pythonGenerator.getAdjustedInt(At,"AT"),Dt==="SET")return Rt+"["+At+"] = "+Ft+`
`;if(Dt==="INSERT")return Rt+".insert("+At+", "+Ft+`)
`;break;case"FROM_END":if(At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),Dt==="SET")return Rt+"["+At+"] = "+Ft+`
`;if(Dt==="INSERT")return Rt+".insert("+At+", "+Ft+`)
`;break;case"RANDOM":if(St.pythonGenerator.definitions_.import_random="import random",Rt.match(/^\w+$/)?At="":(At=St.pythonGenerator.nameDB_.getDistinctName("tmp_list",vt.NameType$$module$build$src$core$names.VARIABLE),Nt=At+" = "+Rt+`
`,Rt=At,At=Nt),Nt=St.pythonGenerator.nameDB_.getDistinctName("tmp_x",vt.NameType$$module$build$src$core$names.VARIABLE),At+=Nt+" = int(random.random() * len("+Rt+`))
`,Dt==="SET")return At+(Rt+"["+Nt+"] = "+Ft+`
`);if(Dt==="INSERT")return At+(Rt+".insert("+Nt+", "+Ft+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},St.pythonGenerator.lists_getSublist=function(At){const Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_MEMBER)||"[]";var Dt=At.getFieldValue("WHERE1");const Nt=At.getFieldValue("WHERE2");switch(Dt){case"FROM_START":Dt=St.pythonGenerator.getAdjustedInt(At,"AT1"),Dt===0&&(Dt="");break;case"FROM_END":Dt=St.pythonGenerator.getAdjustedInt(At,"AT1",1,!0);break;case"FIRST":Dt="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(Nt){case"FROM_START":At=St.pythonGenerator.getAdjustedInt(At,"AT2",1);break;case"FROM_END":At=St.pythonGenerator.getAdjustedInt(At,"AT2",0,!0),vt.module$build$src$core$utils$string.isNumber(String(At))?At===0&&(At=""):(St.pythonGenerator.definitions_.import_sys="import sys",At+=" or sys.maxsize");break;case"LAST":At="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[Rt+"["+Dt+" : "+At+"]",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.lists_sort=function(At){const Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]",Dt=At.getFieldValue("TYPE");return At=At.getFieldValue("DIRECTION")==="1"?"False":"True",[St.pythonGenerator.provideFunction_("lists_sort",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+Rt+', "'+Dt+'", '+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_split=function(At){var Rt=At.getFieldValue("MODE");if(Rt==="SPLIT")Rt=St.pythonGenerator.valueToCode(At,"INPUT",St.pythonGenerator.ORDER_MEMBER)||"''",At=St.pythonGenerator.valueToCode(At,"DELIM",St.pythonGenerator.ORDER_NONE),At=Rt+".split("+At+")";else if(Rt==="JOIN")Rt=St.pythonGenerator.valueToCode(At,"INPUT",St.pythonGenerator.ORDER_NONE)||"[]",At=(St.pythonGenerator.valueToCode(At,"DELIM",St.pythonGenerator.ORDER_MEMBER)||"''")+".join("+Rt+")";else throw Error("Unknown mode: "+Rt);return[At,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_reverse=function(At){return["list(reversed("+(St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]")+"))",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_picker=function(At){return[St.pythonGenerator.quote_(At.getFieldValue("COLOUR")),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.colour_random=function(At){return St.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_rgb=function(At){const Rt=St.pythonGenerator.provideFunction_("colour_rgb",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`),Dt=St.pythonGenerator.valueToCode(At,"RED",St.pythonGenerator.ORDER_NONE)||0,Nt=St.pythonGenerator.valueToCode(At,"GREEN",St.pythonGenerator.ORDER_NONE)||0;return At=St.pythonGenerator.valueToCode(At,"BLUE",St.pythonGenerator.ORDER_NONE)||0,[Rt+"("+Dt+", "+Nt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_blend=function(At){const Rt=St.pythonGenerator.provideFunction_("colour_blend",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`),Dt=St.pythonGenerator.valueToCode(At,"COLOUR1",St.pythonGenerator.ORDER_NONE)||"'#000000'",Nt=St.pythonGenerator.valueToCode(At,"COLOUR2",St.pythonGenerator.ORDER_NONE)||"'#000000'";return At=St.pythonGenerator.valueToCode(At,"RATIO",St.pythonGenerator.ORDER_NONE)||0,[Rt+"("+Dt+", "+Nt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.__namespace__=vt,St})}(python_compressed)),python_compressed.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requirePython_compressed())})(commonjsGlobal,function(dt,vt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return vt})})(python$1);var pythonExports=python$1.exports,javascript$1={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,St={};vt.module$build$src$core$variables,vt.module$build$src$core$utils$string,vt.CodeGenerator$$module$build$src$core$generator,vt.module$build$src$core$input_types.inputTypes,vt.module$build$src$core$names.Names,vt.NameType$$module$build$src$core$names,St.javascriptGenerator=new vt.CodeGenerator$$module$build$src$core$generator("JavaScript"),St.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),St.javascriptGenerator.ORDER_ATOMIC=0,St.javascriptGenerator.ORDER_NEW=1.1,St.javascriptGenerator.ORDER_MEMBER=1.2,St.javascriptGenerator.ORDER_FUNCTION_CALL=2,St.javascriptGenerator.ORDER_INCREMENT=3,St.javascriptGenerator.ORDER_DECREMENT=3,St.javascriptGenerator.ORDER_BITWISE_NOT=4.1,St.javascriptGenerator.ORDER_UNARY_PLUS=4.2,St.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,St.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,St.javascriptGenerator.ORDER_TYPEOF=4.5,St.javascriptGenerator.ORDER_VOID=4.6,St.javascriptGenerator.ORDER_DELETE=4.7,St.javascriptGenerator.ORDER_AWAIT=4.8,St.javascriptGenerator.ORDER_EXPONENTIATION=5,St.javascriptGenerator.ORDER_MULTIPLICATION=5.1,St.javascriptGenerator.ORDER_DIVISION=5.2,St.javascriptGenerator.ORDER_MODULUS=5.3,St.javascriptGenerator.ORDER_SUBTRACTION=6.1,St.javascriptGenerator.ORDER_ADDITION=6.2,St.javascriptGenerator.ORDER_BITWISE_SHIFT=7,St.javascriptGenerator.ORDER_RELATIONAL=8,St.javascriptGenerator.ORDER_IN=8,St.javascriptGenerator.ORDER_INSTANCEOF=8,St.javascriptGenerator.ORDER_EQUALITY=9,St.javascriptGenerator.ORDER_BITWISE_AND=10,St.javascriptGenerator.ORDER_BITWISE_XOR=11,St.javascriptGenerator.ORDER_BITWISE_OR=12,St.javascriptGenerator.ORDER_LOGICAL_AND=13,St.javascriptGenerator.ORDER_LOGICAL_OR=14,St.javascriptGenerator.ORDER_CONDITIONAL=15,St.javascriptGenerator.ORDER_ASSIGNMENT=16,St.javascriptGenerator.ORDER_YIELD=17,St.javascriptGenerator.ORDER_COMMA=18,St.javascriptGenerator.ORDER_NONE=99,St.javascriptGenerator.ORDER_OVERRIDES=[[St.javascriptGenerator.ORDER_FUNCTION_CALL,St.javascriptGenerator.ORDER_MEMBER],[St.javascriptGenerator.ORDER_FUNCTION_CALL,St.javascriptGenerator.ORDER_FUNCTION_CALL],[St.javascriptGenerator.ORDER_MEMBER,St.javascriptGenerator.ORDER_MEMBER],[St.javascriptGenerator.ORDER_MEMBER,St.javascriptGenerator.ORDER_FUNCTION_CALL],[St.javascriptGenerator.ORDER_LOGICAL_NOT,St.javascriptGenerator.ORDER_LOGICAL_NOT],[St.javascriptGenerator.ORDER_MULTIPLICATION,St.javascriptGenerator.ORDER_MULTIPLICATION],[St.javascriptGenerator.ORDER_ADDITION,St.javascriptGenerator.ORDER_ADDITION],[St.javascriptGenerator.ORDER_LOGICAL_AND,St.javascriptGenerator.ORDER_LOGICAL_AND],[St.javascriptGenerator.ORDER_LOGICAL_OR,St.javascriptGenerator.ORDER_LOGICAL_OR]],St.javascriptGenerator.isInitialized=!1,St.javascriptGenerator.init=function(Dt){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new vt.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(Dt.getVariableMap()),this.nameDB_.populateVariables(Dt),this.nameDB_.populateProcedures(Dt);const Nt=[];var Ft=vt.module$build$src$core$variables.allDeveloperVariables(Dt);for(let Ut=0;Ut<Ft.length;Ut++)Nt.push(this.nameDB_.getName(Ft[Ut],vt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(Dt=vt.module$build$src$core$variables.allUsedVarModels(Dt),Ft=0;Ft<Dt.length;Ft++)Nt.push(this.nameDB_.getName(Dt[Ft].getId(),vt.NameType$$module$build$src$core$names.VARIABLE));Nt.length&&(this.definitions_.variables="var "+Nt.join(", ")+";"),this.isInitialized=!0},St.javascriptGenerator.finish=function(Dt){const Nt=Object.values(this.definitions_);return Dt=Object.getPrototypeOf(this).finish.call(this,Dt),this.isInitialized=!1,this.nameDB_.reset(),Nt.join(`

`)+`


`+Dt},St.javascriptGenerator.scrubNakedValue=function(Dt){return Dt+`;
`},St.javascriptGenerator.quote_=function(Dt){return Dt=Dt.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+Dt+"'"},St.javascriptGenerator.multiline_quote_=function(Dt){return Dt.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},St.javascriptGenerator.scrub_=function(Dt,Nt,Ft){let Ut="";if(!Dt.outputConnection||!Dt.outputConnection.targetConnection){var Wt=Dt.getCommentText();Wt&&(Wt=vt.module$build$src$core$utils$string.wrap(Wt,this.COMMENT_WRAP-3),Ut+=this.prefixLines(Wt+`
`,"// "));for(let Zt=0;Zt<Dt.inputList.length;Zt++)Dt.inputList[Zt].type===vt.module$build$src$core$input_types.inputTypes.VALUE&&(Wt=Dt.inputList[Zt].connection.targetBlock())&&(Wt=this.allNestedComments(Wt))&&(Ut+=this.prefixLines(Wt,"// "))}return Dt=Dt.nextConnection&&Dt.nextConnection.targetBlock(),Ft=Ft?"":this.blockToCode(Dt),Ut+Nt+Ft},St.javascriptGenerator.getAdjusted=function(Dt,Nt,Ft,Ut,Wt){Ft=Ft||0,Wt=Wt||this.ORDER_NONE,Dt.workspace.options.oneBasedIndex&&Ft--;const Zt=Dt.workspace.options.oneBasedIndex?"1":"0";let Kt,cn=Wt;return 0<Ft?Kt=cn=this.ORDER_ADDITION:0>Ft?Kt=cn=this.ORDER_SUBTRACTION:Ut&&(Kt=cn=this.ORDER_UNARY_NEGATION),Dt=this.valueToCode(Dt,Nt,cn)||Zt,vt.module$build$src$core$utils$string.isNumber(Dt)?(Dt=Number(Dt)+Ft,Ut&&(Dt=-Dt)):(0<Ft?Dt=Dt+" + "+Ft:0>Ft&&(Dt=Dt+" - "+-Ft),Ut&&(Dt=Ft?"-("+Dt+")":"-"+Dt),Kt=Math.floor(Kt),Wt=Math.floor(Wt),Kt&&Wt>=Kt&&(Dt="("+Dt+")")),Dt},vt.NameType$$module$build$src$core$names,St.javascriptGenerator.variables_get=function(Dt){return[St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.variables_set=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE)+" = "+Nt+`;
`},St.javascriptGenerator.variables_get_dynamic=St.javascriptGenerator.variables_get,St.javascriptGenerator.variables_set_dynamic=St.javascriptGenerator.variables_set,vt.NameType$$module$build$src$core$names;var Et=/^\s*'([^']|\\')*'\s*$/,Ct=function(Dt){return Et.test(Dt)?[Dt,St.javascriptGenerator.ORDER_ATOMIC]:["String("+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},At=function(Dt,Nt,Ft){return Nt==="FIRST"?"0":Nt==="FROM_END"?Dt+".length - 1 - "+Ft:Nt==="LAST"?Dt+".length - 1":Ft};St.javascriptGenerator.text=function(Dt){return[St.javascriptGenerator.quote_(Dt.getFieldValue("TEXT")),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.text_multiline=function(Dt){Dt=St.javascriptGenerator.multiline_quote_(Dt.getFieldValue("TEXT"));const Nt=Dt.indexOf("+")!==-1?St.javascriptGenerator.ORDER_ADDITION:St.javascriptGenerator.ORDER_ATOMIC;return[Dt,Nt]},St.javascriptGenerator.text_join=function(Dt){switch(Dt.itemCount_){case 0:return["''",St.javascriptGenerator.ORDER_ATOMIC];case 1:return Dt=St.javascriptGenerator.valueToCode(Dt,"ADD0",St.javascriptGenerator.ORDER_NONE)||"''",Ct(Dt);case 2:var Nt=St.javascriptGenerator.valueToCode(Dt,"ADD0",St.javascriptGenerator.ORDER_NONE)||"''";return Dt=St.javascriptGenerator.valueToCode(Dt,"ADD1",St.javascriptGenerator.ORDER_NONE)||"''",[Ct(Nt)[0]+" + "+Ct(Dt)[0],St.javascriptGenerator.ORDER_ADDITION];default:Nt=Array(Dt.itemCount_);for(let Ft=0;Ft<Dt.itemCount_;Ft++)Nt[Ft]=St.javascriptGenerator.valueToCode(Dt,"ADD"+Ft,St.javascriptGenerator.ORDER_NONE)||"''";return["["+Nt.join(",")+"].join('')",St.javascriptGenerator.ORDER_FUNCTION_CALL]}},St.javascriptGenerator.text_append=function(Dt){const Nt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);return Dt=St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''",Nt+" += "+Ct(Dt)[0]+`;
`},St.javascriptGenerator.text_length=function(Dt){return[(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+".length",St.javascriptGenerator.ORDER_MEMBER]},St.javascriptGenerator.text_isEmpty=function(Dt){return["!"+(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+".length",St.javascriptGenerator.ORDER_LOGICAL_NOT]},St.javascriptGenerator.text_indexOf=function(Dt){var Nt=Dt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Ft=St.javascriptGenerator.valueToCode(Dt,"FIND",St.javascriptGenerator.ORDER_NONE)||"''";return Nt=(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+"."+Nt+"("+Ft+")",Dt.workspace.options.oneBasedIndex?[Nt+" + 1",St.javascriptGenerator.ORDER_ADDITION]:[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_charAt=function(Dt){const Nt=Dt.getFieldValue("WHERE")||"FROM_START",Ft=St.javascriptGenerator.valueToCode(Dt,"VALUE",Nt==="RANDOM"?St.javascriptGenerator.ORDER_NONE:St.javascriptGenerator.ORDER_MEMBER)||"''";switch(Nt){case"FIRST":return[Ft+".charAt(0)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[Ft+".slice(-1)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return Dt=St.javascriptGenerator.getAdjusted(Dt,"AT"),[Ft+".charAt("+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return Dt=St.javascriptGenerator.getAdjusted(Dt,"AT",1,!0),[Ft+".slice("+Dt+").charAt(0)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[St.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Ft+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},St.javascriptGenerator.text_getSubstring=function(Dt){var Nt=Dt.getFieldValue("WHERE1"),Ft=Dt.getFieldValue("WHERE2"),Ut=Nt!=="FROM_END"&&Nt!=="LAST"&&Ft!=="FROM_END"&&Ft!=="LAST",Wt=St.javascriptGenerator.valueToCode(Dt,"STRING",Ut?St.javascriptGenerator.ORDER_MEMBER:St.javascriptGenerator.ORDER_NONE)||"''";if(Nt==="FIRST"&&Ft==="LAST")return[Wt,St.javascriptGenerator.ORDER_NONE];if(Wt.match(/^'?\w+'?$/)||Ut){switch(Nt){case"FROM_START":Nt=St.javascriptGenerator.getAdjusted(Dt,"AT1");break;case"FROM_END":Nt=St.javascriptGenerator.getAdjusted(Dt,"AT1",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Nt=Wt+".length - "+Nt;break;case"FIRST":Nt="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ft){case"FROM_START":Ft=St.javascriptGenerator.getAdjusted(Dt,"AT2",1);break;case"FROM_END":Ft=St.javascriptGenerator.getAdjusted(Dt,"AT2",0,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Ft=Wt+".length - "+Ft;break;case"LAST":Ft=Wt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Wt=Wt+".slice("+Nt+", "+Ft+")"}else{Ut=St.javascriptGenerator.getAdjusted(Dt,"AT1"),Dt=St.javascriptGenerator.getAdjusted(Dt,"AT2");const Zt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Wt=St.javascriptGenerator.provideFunction_("subsequence"+Zt[Nt]+Zt[Ft],`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Nt==="FROM_END"||Nt==="FROM_START"?", at1":""}${Ft==="FROM_END"||Ft==="FROM_START"?", at2":""}) {
  var start = ${At("sequence",Nt,"at1")};
  var end = ${At("sequence",Ft,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Wt+(Nt==="FROM_END"||Nt==="FROM_START"?", "+Ut:"")+(Ft==="FROM_END"||Ft==="FROM_START"?", "+Dt:"")+")"}return[Wt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_changeCase=function(Dt){const Nt={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[Dt.getFieldValue("CASE")];return Dt=St.javascriptGenerator.valueToCode(Dt,"TEXT",Nt?St.javascriptGenerator.ORDER_MEMBER:St.javascriptGenerator.ORDER_NONE)||"''",[Nt?Dt+Nt:St.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_trim=function(Dt){const Nt={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[Dt.getFieldValue("MODE")];return[(St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_MEMBER)||"''")+Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_print=function(Dt){return"window.alert("+(St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''")+`);
`},St.javascriptGenerator.text_prompt_ext=function(Dt){let Nt="window.prompt("+(Dt.getField("TEXT")?St.javascriptGenerator.quote_(Dt.getFieldValue("TEXT")):St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''")+")";return Dt.getFieldValue("TYPE")==="NUMBER"&&(Nt="Number("+Nt+")"),[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_prompt=St.javascriptGenerator.text_prompt_ext,St.javascriptGenerator.text_count=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''";return Dt=St.javascriptGenerator.valueToCode(Dt,"SUB",St.javascriptGenerator.ORDER_NONE)||"''",[St.javascriptGenerator.provideFunction_("textCount",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Nt+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_replace=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''",Ft=St.javascriptGenerator.valueToCode(Dt,"FROM",St.javascriptGenerator.ORDER_NONE)||"''";return Dt=St.javascriptGenerator.valueToCode(Dt,"TO",St.javascriptGenerator.ORDER_NONE)||"''",[St.javascriptGenerator.provideFunction_("textReplace",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Nt+", "+Ft+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_reverse=function(Dt){return[(St.javascriptGenerator.valueToCode(Dt,"TEXT",St.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",St.javascriptGenerator.ORDER_FUNCTION_CALL]},vt.NameType$$module$build$src$core$names,St.javascriptGenerator.procedures_defreturn=function(Dt){const Nt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE);var Ft="";St.javascriptGenerator.STATEMENT_PREFIX&&(Ft+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,Dt)),St.javascriptGenerator.STATEMENT_SUFFIX&&(Ft+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,Dt)),Ft&&(Ft=St.javascriptGenerator.prefixLines(Ft,St.javascriptGenerator.INDENT));let Ut="";St.javascriptGenerator.INFINITE_LOOP_TRAP&&(Ut=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.INFINITE_LOOP_TRAP,Dt),St.javascriptGenerator.INDENT));const Wt=St.javascriptGenerator.statementToCode(Dt,"STACK");let Zt=St.javascriptGenerator.valueToCode(Dt,"RETURN",St.javascriptGenerator.ORDER_NONE)||"",Kt="";Wt&&Zt&&(Kt=Ft),Zt&&(Zt=St.javascriptGenerator.INDENT+"return "+Zt+`;
`);const cn=[],hn=Dt.getVars();for(let dn=0;dn<hn.length;dn++)cn[dn]=St.javascriptGenerator.nameDB_.getName(hn[dn],vt.NameType$$module$build$src$core$names.VARIABLE);return Ft="function "+Nt+"("+cn.join(", ")+`) {
`+Ft+Ut+Wt+Kt+Zt+"}",Ft=St.javascriptGenerator.scrub_(Dt,Ft),St.javascriptGenerator.definitions_["%"+Nt]=Ft,null},St.javascriptGenerator.procedures_defnoreturn=St.javascriptGenerator.procedures_defreturn,St.javascriptGenerator.procedures_callreturn=function(Dt){const Nt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Ft=[],Ut=Dt.getVars();for(let Wt=0;Wt<Ut.length;Wt++)Ft[Wt]=St.javascriptGenerator.valueToCode(Dt,"ARG"+Wt,St.javascriptGenerator.ORDER_NONE)||"null";return[Nt+"("+Ft.join(", ")+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.procedures_callnoreturn=function(Dt){return St.javascriptGenerator.procedures_callreturn(Dt)[0]+`;
`},St.javascriptGenerator.procedures_ifreturn=function(Dt){let Nt="if ("+(St.javascriptGenerator.valueToCode(Dt,"CONDITION",St.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt+=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,Dt),St.javascriptGenerator.INDENT)),Dt.hasReturnValue_?(Dt=St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_NONE)||"null",Nt+=St.javascriptGenerator.INDENT+"return "+Dt+`;
`):Nt+=St.javascriptGenerator.INDENT+`return;
`,Nt+`}
`},vt.NameType$$module$build$src$core$names,St.javascriptGenerator.math_number=function(Dt){return Dt=Number(Dt.getFieldValue("NUM")),[Dt,0<=Dt?St.javascriptGenerator.ORDER_ATOMIC:St.javascriptGenerator.ORDER_UNARY_NEGATION]},St.javascriptGenerator.math_arithmetic=function(Dt){var Nt={ADD:[" + ",St.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",St.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",St.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",St.javascriptGenerator.ORDER_DIVISION],POWER:[null,St.javascriptGenerator.ORDER_NONE]}[Dt.getFieldValue("OP")];const Ft=Nt[0];Nt=Nt[1];const Ut=St.javascriptGenerator.valueToCode(Dt,"A",Nt)||"0";return Dt=St.javascriptGenerator.valueToCode(Dt,"B",Nt)||"0",Ft?[Ut+Ft+Dt,Nt]:["Math.pow("+Ut+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_single=function(Dt){const Nt=Dt.getFieldValue("OP");let Ft;if(Nt==="NEG")return Dt=St.javascriptGenerator.valueToCode(Dt,"NUM",St.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",Dt[0]==="-"&&(Dt=" "+Dt),["-"+Dt,St.javascriptGenerator.ORDER_UNARY_NEGATION];switch(Dt=Nt==="SIN"||Nt==="COS"||Nt==="TAN"?St.javascriptGenerator.valueToCode(Dt,"NUM",St.javascriptGenerator.ORDER_DIVISION)||"0":St.javascriptGenerator.valueToCode(Dt,"NUM",St.javascriptGenerator.ORDER_NONE)||"0",Nt){case"ABS":Ft="Math.abs("+Dt+")";break;case"ROOT":Ft="Math.sqrt("+Dt+")";break;case"LN":Ft="Math.log("+Dt+")";break;case"EXP":Ft="Math.exp("+Dt+")";break;case"POW10":Ft="Math.pow(10,"+Dt+")";break;case"ROUND":Ft="Math.round("+Dt+")";break;case"ROUNDUP":Ft="Math.ceil("+Dt+")";break;case"ROUNDDOWN":Ft="Math.floor("+Dt+")";break;case"SIN":Ft="Math.sin("+Dt+" / 180 * Math.PI)";break;case"COS":Ft="Math.cos("+Dt+" / 180 * Math.PI)";break;case"TAN":Ft="Math.tan("+Dt+" / 180 * Math.PI)"}if(Ft)return[Ft,St.javascriptGenerator.ORDER_FUNCTION_CALL];switch(Nt){case"LOG10":Ft="Math.log("+Dt+") / Math.log(10)";break;case"ASIN":Ft="Math.asin("+Dt+") / Math.PI * 180";break;case"ACOS":Ft="Math.acos("+Dt+") / Math.PI * 180";break;case"ATAN":Ft="Math.atan("+Dt+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Nt)}return[Ft,St.javascriptGenerator.ORDER_DIVISION]},St.javascriptGenerator.math_constant=function(Dt){return{PI:["Math.PI",St.javascriptGenerator.ORDER_MEMBER],E:["Math.E",St.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",St.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",St.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",St.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",St.javascriptGenerator.ORDER_ATOMIC]}[Dt.getFieldValue("CONSTANT")]},St.javascriptGenerator.math_number_property=function(Dt){var Nt={EVEN:[" % 2 === 0",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",St.javascriptGenerator.ORDER_RELATIONAL,St.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",St.javascriptGenerator.ORDER_RELATIONAL,St.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,St.javascriptGenerator.ORDER_NONE,St.javascriptGenerator.ORDER_FUNCTION_CALL]};const Ft=Dt.getFieldValue("PROPERTY"),[Ut,Wt,Zt]=Nt[Ft];return Nt=St.javascriptGenerator.valueToCode(Dt,"NUMBER_TO_CHECK",Wt)||"0",Ft==="PRIME"?Dt=St.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Nt+")":Ft==="DIVISIBLE_BY"?(Dt=St.javascriptGenerator.valueToCode(Dt,"DIVISOR",St.javascriptGenerator.ORDER_MODULUS)||"0",Dt=Nt+" % "+Dt+" === 0"):Dt=Nt+Ut,[Dt,Zt]},St.javascriptGenerator.math_change=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"DELTA",St.javascriptGenerator.ORDER_ADDITION)||"0";return Dt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Dt+" = (typeof "+Dt+" === 'number' ? "+Dt+" : 0) + "+Nt+`;
`},St.javascriptGenerator.math_round=St.javascriptGenerator.math_single,St.javascriptGenerator.math_trig=St.javascriptGenerator.math_single,St.javascriptGenerator.math_on_list=function(Dt){var Nt=Dt.getFieldValue("OP");switch(Nt){case"SUM":Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]",Dt+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt="Math.min.apply(null, "+Dt+")";break;case"MAX":Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt="Math.max.apply(null, "+Dt+")";break;case"AVERAGE":Nt=St.javascriptGenerator.provideFunction_("mathMean",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt=Nt+"("+Dt+")";break;case"MEDIAN":Nt=St.javascriptGenerator.provideFunction_("mathMedian",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt=Nt+"("+Dt+")";break;case"MODE":Nt=St.javascriptGenerator.provideFunction_("mathModes",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt=Nt+"("+Dt+")";break;case"STD_DEV":Nt=St.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt=Nt+"("+Dt+")";break;case"RANDOM":Nt=St.javascriptGenerator.provideFunction_("mathRandomList",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),Dt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",Dt=Nt+"("+Dt+")";break;default:throw Error("Unknown operator: "+Nt)}return[Dt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_modulo=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"DIVIDEND",St.javascriptGenerator.ORDER_MODULUS)||"0";return Dt=St.javascriptGenerator.valueToCode(Dt,"DIVISOR",St.javascriptGenerator.ORDER_MODULUS)||"0",[Nt+" % "+Dt,St.javascriptGenerator.ORDER_MODULUS]},St.javascriptGenerator.math_constrain=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_NONE)||"0",Ft=St.javascriptGenerator.valueToCode(Dt,"LOW",St.javascriptGenerator.ORDER_NONE)||"0";return Dt=St.javascriptGenerator.valueToCode(Dt,"HIGH",St.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+Nt+", "+Ft+"), "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_random_int=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"FROM",St.javascriptGenerator.ORDER_NONE)||"0";return Dt=St.javascriptGenerator.valueToCode(Dt,"TO",St.javascriptGenerator.ORDER_NONE)||"0",[St.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Nt+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_random_float=function(Dt){return["Math.random()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_atan2=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"X",St.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(St.javascriptGenerator.valueToCode(Dt,"Y",St.javascriptGenerator.ORDER_NONE)||"0")+", "+Nt+") / Math.PI * 180",St.javascriptGenerator.ORDER_DIVISION]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,St.javascriptGenerator.controls_repeat_ext=function(Dt){let Nt;Nt=Dt.getField("TIMES")?String(Number(Dt.getFieldValue("TIMES"))):St.javascriptGenerator.valueToCode(Dt,"TIMES",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let Ft=St.javascriptGenerator.statementToCode(Dt,"DO");Ft=St.javascriptGenerator.addLoopTrap(Ft,Dt),Dt="";const Ut=St.javascriptGenerator.nameDB_.getDistinctName("count",vt.NameType$$module$build$src$core$names.VARIABLE);let Wt=Nt;return Nt.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Nt)||(Wt=St.javascriptGenerator.nameDB_.getDistinctName("repeat_end",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Wt+" = "+Nt+`;
`),Dt+("for (var "+Ut+" = 0; "+Ut+" < "+Wt+"; "+Ut+`++) {
`+Ft+`}
`)},St.javascriptGenerator.controls_repeat=St.javascriptGenerator.controls_repeat_ext,St.javascriptGenerator.controls_whileUntil=function(Dt){const Nt=Dt.getFieldValue("MODE")==="UNTIL";let Ft=St.javascriptGenerator.valueToCode(Dt,"BOOL",Nt?St.javascriptGenerator.ORDER_LOGICAL_NOT:St.javascriptGenerator.ORDER_NONE)||"false",Ut=St.javascriptGenerator.statementToCode(Dt,"DO");return Ut=St.javascriptGenerator.addLoopTrap(Ut,Dt),Nt&&(Ft="!"+Ft),"while ("+Ft+`) {
`+Ut+`}
`},St.javascriptGenerator.controls_for=function(Dt){var Nt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Ft=St.javascriptGenerator.valueToCode(Dt,"FROM",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0",Ut=St.javascriptGenerator.valueToCode(Dt,"TO",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const Wt=St.javascriptGenerator.valueToCode(Dt,"BY",St.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let Zt=St.javascriptGenerator.statementToCode(Dt,"DO");if(Zt=St.javascriptGenerator.addLoopTrap(Zt,Dt),vt.module$build$src$core$utils$string.isNumber(Ft)&&vt.module$build$src$core$utils$string.isNumber(Ut)&&vt.module$build$src$core$utils$string.isNumber(Wt)){var Kt=Number(Ft)<=Number(Ut);Dt="for ("+Nt+" = "+Ft+"; "+Nt+(Kt?" <= ":" >= ")+Ut+"; "+Nt,Nt=Math.abs(Number(Wt)),Dt=Nt===1?Dt+(Kt?"++":"--"):Dt+((Kt?" += ":" -= ")+Nt),Dt+=`) {
`+Zt+`}
`}else Dt="",Kt=Ft,Ft.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Ft)||(Kt=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_start",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Kt+" = "+Ft+`;
`),Ft=Ut,Ut.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Ut)||(Ft=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_end",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Ft+" = "+Ut+`;
`),Ut=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_inc",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Ut+" = ",Dt=vt.module$build$src$core$utils$string.isNumber(Wt)?Dt+(Math.abs(Wt)+`;
`):Dt+("Math.abs("+Wt+`);
`),Dt+="if ("+Kt+" > "+Ft+`) {
`,Dt+=St.javascriptGenerator.INDENT+Ut+" = -"+Ut+`;
`,Dt=Dt+`}
for (`+(Nt+" = "+Kt+"; "+Ut+" >= 0 ? "+Nt+" <= "+Ft+" : "+Nt+" >= "+Ft+"; "+Nt+" += "+Ut+`) {
`+Zt+`}
`);return Dt},St.javascriptGenerator.controls_forEach=function(Dt){const Nt=St.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);var Ft=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let Ut=St.javascriptGenerator.statementToCode(Dt,"DO");Ut=St.javascriptGenerator.addLoopTrap(Ut,Dt),Dt="";let Wt=Ft;return Ft.match(/^\w+$/)||(Wt=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_list",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Wt+" = "+Ft+`;
`),Ft=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_index",vt.NameType$$module$build$src$core$names.VARIABLE),Ut=St.javascriptGenerator.INDENT+Nt+" = "+Wt+"["+Ft+`];
`+Ut,Dt+("for (var "+Ft+" in "+Wt+`) {
`+Ut+`}
`)},St.javascriptGenerator.controls_flow_statements=function(Dt){let Nt="";if(St.javascriptGenerator.STATEMENT_PREFIX&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,Dt)),St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,Dt)),St.javascriptGenerator.STATEMENT_PREFIX){const Ft=Dt.getSurroundLoop();Ft&&!Ft.suppressPrefixSuffix&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,Ft))}switch(Dt.getFieldValue("FLOW")){case"BREAK":return Nt+`break;
`;case"CONTINUE":return Nt+`continue;
`}throw Error("Unknown flow statement.")},St.javascriptGenerator.controls_if=function(Dt){var Nt=0;let Ft="";St.javascriptGenerator.STATEMENT_PREFIX&&(Ft+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,Dt));do{const Ut=St.javascriptGenerator.valueToCode(Dt,"IF"+Nt,St.javascriptGenerator.ORDER_NONE)||"false";let Wt=St.javascriptGenerator.statementToCode(Dt,"DO"+Nt);St.javascriptGenerator.STATEMENT_SUFFIX&&(Wt=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,Dt),St.javascriptGenerator.INDENT)+Wt),Ft+=(0<Nt?" else ":"")+"if ("+Ut+`) {
`+Wt+"}",Nt++}while(Dt.getInput("IF"+Nt));return(Dt.getInput("ELSE")||St.javascriptGenerator.STATEMENT_SUFFIX)&&(Nt=St.javascriptGenerator.statementToCode(Dt,"ELSE"),St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,Dt),St.javascriptGenerator.INDENT)+Nt),Ft+=` else {
`+Nt+"}"),Ft+`
`},St.javascriptGenerator.controls_ifelse=St.javascriptGenerator.controls_if,St.javascriptGenerator.logic_compare=function(Dt){const Nt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[Dt.getFieldValue("OP")],Ft=Nt==="=="||Nt==="!="?St.javascriptGenerator.ORDER_EQUALITY:St.javascriptGenerator.ORDER_RELATIONAL,Ut=St.javascriptGenerator.valueToCode(Dt,"A",Ft)||"0";return Dt=St.javascriptGenerator.valueToCode(Dt,"B",Ft)||"0",[Ut+" "+Nt+" "+Dt,Ft]},St.javascriptGenerator.logic_operation=function(Dt){const Nt=Dt.getFieldValue("OP")==="AND"?"&&":"||",Ft=Nt==="&&"?St.javascriptGenerator.ORDER_LOGICAL_AND:St.javascriptGenerator.ORDER_LOGICAL_OR;let Ut=St.javascriptGenerator.valueToCode(Dt,"A",Ft);if(Dt=St.javascriptGenerator.valueToCode(Dt,"B",Ft),Ut||Dt){const Wt=Nt==="&&"?"true":"false";Ut||(Ut=Wt),Dt||(Dt=Wt)}else Dt=Ut="false";return[Ut+" "+Nt+" "+Dt,Ft]},St.javascriptGenerator.logic_negate=function(Dt){const Nt=St.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(St.javascriptGenerator.valueToCode(Dt,"BOOL",Nt)||"true"),Nt]},St.javascriptGenerator.logic_boolean=function(Dt){return[Dt.getFieldValue("BOOL")==="TRUE"?"true":"false",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.logic_null=function(Dt){return["null",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.logic_ternary=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"IF",St.javascriptGenerator.ORDER_CONDITIONAL)||"false",Ft=St.javascriptGenerator.valueToCode(Dt,"THEN",St.javascriptGenerator.ORDER_CONDITIONAL)||"null";return Dt=St.javascriptGenerator.valueToCode(Dt,"ELSE",St.javascriptGenerator.ORDER_CONDITIONAL)||"null",[Nt+" ? "+Ft+" : "+Dt,St.javascriptGenerator.ORDER_CONDITIONAL]},vt.NameType$$module$build$src$core$names,St.javascriptGenerator.lists_create_empty=function(Dt){return["[]",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.lists_create_with=function(Dt){const Nt=Array(Dt.itemCount_);for(let Ft=0;Ft<Dt.itemCount_;Ft++)Nt[Ft]=St.javascriptGenerator.valueToCode(Dt,"ADD"+Ft,St.javascriptGenerator.ORDER_NONE)||"null";return["["+Nt.join(", ")+"]",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.lists_repeat=function(Dt){const Nt=St.javascriptGenerator.provideFunction_("listsRepeat",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Ft=St.javascriptGenerator.valueToCode(Dt,"ITEM",St.javascriptGenerator.ORDER_NONE)||"null";return Dt=St.javascriptGenerator.valueToCode(Dt,"NUM",St.javascriptGenerator.ORDER_NONE)||"0",[Nt+"("+Ft+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_length=function(Dt){return[(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",St.javascriptGenerator.ORDER_MEMBER]},St.javascriptGenerator.lists_isEmpty=function(Dt){return["!"+(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",St.javascriptGenerator.ORDER_LOGICAL_NOT]},St.javascriptGenerator.lists_indexOf=function(Dt){var Nt=Dt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Ft=St.javascriptGenerator.valueToCode(Dt,"FIND",St.javascriptGenerator.ORDER_NONE)||"''";return Nt=(St.javascriptGenerator.valueToCode(Dt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+Nt+"("+Ft+")",Dt.workspace.options.oneBasedIndex?[Nt+" + 1",St.javascriptGenerator.ORDER_ADDITION]:[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_getIndex=function(Dt){const Nt=Dt.getFieldValue("MODE")||"GET",Ft=Dt.getFieldValue("WHERE")||"FROM_START";var Ut=St.javascriptGenerator.valueToCode(Dt,"VALUE",Ft==="RANDOM"?St.javascriptGenerator.ORDER_NONE:St.javascriptGenerator.ORDER_MEMBER)||"[]";switch(Ft){case"FIRST":if(Nt==="GET")return[Ut+"[0]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".shift()",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="REMOVE")return Ut+`.shift();
`;break;case"LAST":if(Nt==="GET")return[Ut+".slice(-1)[0]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".pop()",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="REMOVE")return Ut+`.pop();
`;break;case"FROM_START":if(Dt=St.javascriptGenerator.getAdjusted(Dt,"AT"),Nt==="GET")return[Ut+"["+Dt+"]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".splice("+Dt+", 1)[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+".splice("+Dt+`, 1);
`;break;case"FROM_END":if(Dt=St.javascriptGenerator.getAdjusted(Dt,"AT",1,!0),Nt==="GET")return[Ut+".slice("+Dt+")[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="GET_REMOVE")return[Ut+".splice("+Dt+", 1)[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+".splice("+Dt+", 1);";break;case"RANDOM":if(Ut=St.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ut+", "+(Nt!=="GET")+")",Nt==="GET"||Nt==="GET_REMOVE")return[Ut,St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+`;
`}throw Error("Unhandled combination (lists_getIndex).")},St.javascriptGenerator.lists_setIndex=function(Dt){function Nt(){if(Ft.match(/^\w+$/))return"";const Kt=St.javascriptGenerator.nameDB_.getDistinctName("tmpList",vt.NameType$$module$build$src$core$names.VARIABLE),cn="var "+Kt+" = "+Ft+`;
`;return Ft=Kt,cn}let Ft=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]";const Ut=Dt.getFieldValue("MODE")||"GET";var Wt=Dt.getFieldValue("WHERE")||"FROM_START";const Zt=St.javascriptGenerator.valueToCode(Dt,"TO",St.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(Wt){case"FIRST":if(Ut==="SET")return Ft+"[0] = "+Zt+`;
`;if(Ut==="INSERT")return Ft+".unshift("+Zt+`);
`;break;case"LAST":if(Ut==="SET")return Nt()+(Ft+"["+Ft+".length - 1] = "+Zt+`;
`);if(Ut==="INSERT")return Ft+".push("+Zt+`);
`;break;case"FROM_START":if(Dt=St.javascriptGenerator.getAdjusted(Dt,"AT"),Ut==="SET")return Ft+"["+Dt+"] = "+Zt+`;
`;if(Ut==="INSERT")return Ft+".splice("+Dt+", 0, "+Zt+`);
`;break;case"FROM_END":if(Dt=St.javascriptGenerator.getAdjusted(Dt,"AT",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Wt=Nt(),Ut==="SET")return Wt+(Ft+"["+Ft+".length - "+Dt+"] = "+Zt+`;
`);if(Ut==="INSERT")return Wt+(Ft+".splice("+Ft+".length - "+Dt+", 0, "+Zt+`);
`);break;case"RANDOM":if(Dt=Nt(),Wt=St.javascriptGenerator.nameDB_.getDistinctName("tmpX",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Wt+" = Math.floor(Math.random() * "+Ft+`.length);
`,Ut==="SET")return Dt+(Ft+"["+Wt+"] = "+Zt+`;
`);if(Ut==="INSERT")return Dt+(Ft+".splice("+Wt+", 0, "+Zt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var Rt=function(Dt,Nt,Ft){return Nt==="FIRST"?"0":Nt==="FROM_END"?Dt+".length - 1 - "+Ft:Nt==="LAST"?Dt+".length - 1":Ft};return St.javascriptGenerator.lists_getSublist=function(Dt){var Nt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]",Ft=Dt.getFieldValue("WHERE1"),Ut=Dt.getFieldValue("WHERE2");if(Ft==="FIRST"&&Ut==="LAST")Nt+=".slice(0)";else if(Nt.match(/^\w+$/)||Ft!=="FROM_END"&&Ut==="FROM_START"){switch(Ft){case"FROM_START":Ft=St.javascriptGenerator.getAdjusted(Dt,"AT1");break;case"FROM_END":Ft=St.javascriptGenerator.getAdjusted(Dt,"AT1",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Ft=Nt+".length - "+Ft;break;case"FIRST":Ft="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Ut){case"FROM_START":Ut=St.javascriptGenerator.getAdjusted(Dt,"AT2",1);break;case"FROM_END":Ut=St.javascriptGenerator.getAdjusted(Dt,"AT2",0,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Ut=Nt+".length - "+Ut;break;case"LAST":Ut=Nt+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}Nt=Nt+".slice("+Ft+", "+Ut+")"}else{const Wt=St.javascriptGenerator.getAdjusted(Dt,"AT1");Dt=St.javascriptGenerator.getAdjusted(Dt,"AT2");const Zt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Nt=St.javascriptGenerator.provideFunction_("subsequence"+Zt[Ft]+Zt[Ut],`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ft==="FROM_END"||Ft==="FROM_START"?", at1":""}${Ut==="FROM_END"||Ut==="FROM_START"?", at2":""}) {
  var start = ${Rt("sequence",Ft,"at1")};
  var end = ${Rt("sequence",Ut,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Nt+(Ft==="FROM_END"||Ft==="FROM_START"?", "+Wt:"")+(Ut==="FROM_END"||Ut==="FROM_START"?", "+Dt:"")+")"}return[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_sort=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",Ft=Dt.getFieldValue("DIRECTION")==="1"?1:-1;Dt=Dt.getFieldValue("TYPE");const Ut=St.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[Nt+".slice().sort("+Ut+'("'+Dt+'", '+Ft+"))",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_split=function(Dt){let Nt=St.javascriptGenerator.valueToCode(Dt,"INPUT",St.javascriptGenerator.ORDER_MEMBER);const Ft=St.javascriptGenerator.valueToCode(Dt,"DELIM",St.javascriptGenerator.ORDER_NONE)||"''";if(Dt=Dt.getFieldValue("MODE"),Dt==="SPLIT")Nt||(Nt="''"),Dt="split";else if(Dt==="JOIN")Nt||(Nt="[]"),Dt="join";else throw Error("Unknown mode: "+Dt);return[Nt+"."+Dt+"("+Ft+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_reverse=function(Dt){return[(St.javascriptGenerator.valueToCode(Dt,"LIST",St.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_picker=function(Dt){return[St.javascriptGenerator.quote_(Dt.getFieldValue("COLOUR")),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.colour_random=function(Dt){return[St.javascriptGenerator.provideFunction_("colourRandom",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_rgb=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"RED",St.javascriptGenerator.ORDER_NONE)||0,Ft=St.javascriptGenerator.valueToCode(Dt,"GREEN",St.javascriptGenerator.ORDER_NONE)||0;return Dt=St.javascriptGenerator.valueToCode(Dt,"BLUE",St.javascriptGenerator.ORDER_NONE)||0,[St.javascriptGenerator.provideFunction_("colourRgb",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Nt+", "+Ft+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_blend=function(Dt){const Nt=St.javascriptGenerator.valueToCode(Dt,"COLOUR1",St.javascriptGenerator.ORDER_NONE)||"'#000000'",Ft=St.javascriptGenerator.valueToCode(Dt,"COLOUR2",St.javascriptGenerator.ORDER_NONE)||"'#000000'";return Dt=St.javascriptGenerator.valueToCode(Dt,"RATIO",St.javascriptGenerator.ORDER_NONE)||.5,[St.javascriptGenerator.provideFunction_("colourBlend",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Nt+", "+Ft+", "+Dt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.__namespace__=vt,St})}(javascript_compressed)),javascript_compressed.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requireJavascript_compressed())})(commonjsGlobal,function(dt,vt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return vt})})(javascript$1);var javascriptExports=javascript$1.exports,blockly={exports:{}},browser$1={exports:{}},en$1={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(ft,lt){(function(dt,vt){ft.exports=vt()})(commonjsGlobal,function(){var dt=dt||{Msg:Object.create(null)};return dt.Msg.ADD_COMMENT="Add Comment",dt.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",dt.Msg.CHANGE_VALUE_TITLE="Change value:",dt.Msg.CLEAN_UP="Clean up Blocks",dt.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",dt.Msg.COLLAPSE_ALL="Collapse Blocks",dt.Msg.COLLAPSE_BLOCK="Collapse Block",dt.Msg.COLOUR_BLEND_COLOUR1="colour 1",dt.Msg.COLOUR_BLEND_COLOUR2="colour 2",dt.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",dt.Msg.COLOUR_BLEND_RATIO="ratio",dt.Msg.COLOUR_BLEND_TITLE="blend",dt.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",dt.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",dt.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",dt.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",dt.Msg.COLOUR_RANDOM_TITLE="random colour",dt.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",dt.Msg.COLOUR_RGB_BLUE="blue",dt.Msg.COLOUR_RGB_GREEN="green",dt.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",dt.Msg.COLOUR_RGB_RED="red",dt.Msg.COLOUR_RGB_TITLE="colour with",dt.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",dt.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",dt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",dt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",dt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",dt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",dt.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",dt.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",dt.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",dt.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",dt.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",dt.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",dt.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",dt.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",dt.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",dt.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",dt.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",dt.Msg.CONTROLS_IF_MSG_ELSE="else",dt.Msg.CONTROLS_IF_MSG_ELSEIF="else if",dt.Msg.CONTROLS_IF_MSG_IF="if",dt.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",dt.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",dt.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",dt.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",dt.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",dt.Msg.CONTROLS_REPEAT_INPUT_DO="do",dt.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",dt.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",dt.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",dt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",dt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",dt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",dt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",dt.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",dt.Msg.DELETE_BLOCK="Delete Block",dt.Msg.DELETE_VARIABLE="Delete the '%1' variable",dt.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",dt.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",dt.Msg.DIALOG_CANCEL="Cancel",dt.Msg.DIALOG_OK="OK",dt.Msg.DISABLE_BLOCK="Disable Block",dt.Msg.DUPLICATE_BLOCK="Duplicate",dt.Msg.DUPLICATE_COMMENT="Duplicate Comment",dt.Msg.ENABLE_BLOCK="Enable Block",dt.Msg.EXPAND_ALL="Expand Blocks",dt.Msg.EXPAND_BLOCK="Expand Block",dt.Msg.EXTERNAL_INPUTS="External Inputs",dt.Msg.HELP="Help",dt.Msg.INLINE_INPUTS="Inline Inputs",dt.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",dt.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",dt.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",dt.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",dt.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",dt.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",dt.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",dt.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",dt.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",dt.Msg.LISTS_GET_INDEX_FIRST="first",dt.Msg.LISTS_GET_INDEX_FROM_END="# from end",dt.Msg.LISTS_GET_INDEX_FROM_START="#",dt.Msg.LISTS_GET_INDEX_GET="get",dt.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",dt.Msg.LISTS_GET_INDEX_LAST="last",dt.Msg.LISTS_GET_INDEX_RANDOM="random",dt.Msg.LISTS_GET_INDEX_REMOVE="remove",dt.Msg.LISTS_GET_INDEX_TAIL="",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",dt.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",dt.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",dt.Msg.LISTS_GET_SUBLIST_END_LAST="to last",dt.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",dt.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",dt.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",dt.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",dt.Msg.LISTS_GET_SUBLIST_TAIL="",dt.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",dt.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",dt.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",dt.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",dt.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",dt.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",dt.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",dt.Msg.LISTS_INLIST="in list",dt.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",dt.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",dt.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",dt.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",dt.Msg.LISTS_LENGTH_TITLE="length of %1",dt.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",dt.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",dt.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",dt.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",dt.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",dt.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",dt.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",dt.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",dt.Msg.LISTS_SET_INDEX_INPUT_TO="as",dt.Msg.LISTS_SET_INDEX_INSERT="insert at",dt.Msg.LISTS_SET_INDEX_SET="set",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",dt.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",dt.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",dt.Msg.LISTS_SORT_ORDER_DESCENDING="descending",dt.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",dt.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",dt.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",dt.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",dt.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",dt.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",dt.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",dt.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",dt.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",dt.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",dt.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",dt.Msg.LOGIC_BOOLEAN_FALSE="false",dt.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",dt.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",dt.Msg.LOGIC_BOOLEAN_TRUE="true",dt.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",dt.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",dt.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",dt.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",dt.Msg.LOGIC_NEGATE_TITLE="not %1",dt.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",dt.Msg.LOGIC_NULL="null",dt.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",dt.Msg.LOGIC_NULL_TOOLTIP="Returns null.",dt.Msg.LOGIC_OPERATION_AND="and",dt.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",dt.Msg.LOGIC_OPERATION_OR="or",dt.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",dt.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",dt.Msg.LOGIC_TERNARY_CONDITION="test",dt.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",dt.Msg.LOGIC_TERNARY_IF_FALSE="if false",dt.Msg.LOGIC_TERNARY_IF_TRUE="if true",dt.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",dt.Msg.MATH_ADDITION_SYMBOL="+",dt.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",dt.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",dt.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",dt.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",dt.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",dt.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",dt.Msg.MATH_CHANGE_TITLE="change %1 by %2",dt.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",dt.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",dt.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",dt.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",dt.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",dt.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",dt.Msg.MATH_DIVISION_SYMBOL="",dt.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",dt.Msg.MATH_IS_EVEN="is even",dt.Msg.MATH_IS_NEGATIVE="is negative",dt.Msg.MATH_IS_ODD="is odd",dt.Msg.MATH_IS_POSITIVE="is positive",dt.Msg.MATH_IS_PRIME="is prime",dt.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",dt.Msg.MATH_IS_WHOLE="is whole",dt.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",dt.Msg.MATH_MODULO_TITLE="remainder of %1  %2",dt.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",dt.Msg.MATH_MULTIPLICATION_SYMBOL="",dt.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",dt.Msg.MATH_NUMBER_TOOLTIP="A number.",dt.Msg.MATH_ONLIST_HELPURL="",dt.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",dt.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",dt.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",dt.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",dt.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",dt.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",dt.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",dt.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",dt.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",dt.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",dt.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",dt.Msg.MATH_POWER_SYMBOL="^",dt.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",dt.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",dt.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",dt.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",dt.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",dt.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",dt.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",dt.Msg.MATH_ROUND_OPERATOR_ROUND="round",dt.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",dt.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",dt.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",dt.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",dt.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",dt.Msg.MATH_SINGLE_OP_ROOT="square root",dt.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",dt.Msg.MATH_SUBTRACTION_SYMBOL="-",dt.Msg.MATH_TRIG_ACOS="acos",dt.Msg.MATH_TRIG_ASIN="asin",dt.Msg.MATH_TRIG_ATAN="atan",dt.Msg.MATH_TRIG_COS="cos",dt.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",dt.Msg.MATH_TRIG_SIN="sin",dt.Msg.MATH_TRIG_TAN="tan",dt.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",dt.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",dt.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",dt.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",dt.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",dt.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",dt.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",dt.Msg.NEW_NUMBER_VARIABLE="Create number variable...",dt.Msg.NEW_STRING_VARIABLE="Create string variable...",dt.Msg.NEW_VARIABLE="Create variable...",dt.Msg.NEW_VARIABLE_TITLE="New variable name:",dt.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",dt.Msg.ORDINAL_NUMBER_SUFFIX="",dt.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",dt.Msg.PROCEDURES_BEFORE_PARAMS="with:",dt.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",dt.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",dt.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",dt.Msg.PROCEDURES_CREATE_DO="Create '%1'",dt.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",dt.Msg.PROCEDURES_DEFNORETURN_DO="",dt.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",dt.Msg.PROCEDURES_DEFNORETURN_TITLE="to",dt.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",dt.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_DEFRETURN_RETURN="return",dt.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",dt.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",dt.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",dt.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",dt.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",dt.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",dt.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",dt.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",dt.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",dt.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",dt.Msg.REDO="Redo",dt.Msg.REMOVE_COMMENT="Remove Comment",dt.Msg.RENAME_VARIABLE="Rename variable...",dt.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",dt.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",dt.Msg.TEXT_APPEND_TITLE="to %1 append text %2",dt.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",dt.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",dt.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",dt.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",dt.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",dt.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",dt.Msg.TEXT_CHARAT_FIRST="get first letter",dt.Msg.TEXT_CHARAT_FROM_END="get letter # from end",dt.Msg.TEXT_CHARAT_FROM_START="get letter #",dt.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",dt.Msg.TEXT_CHARAT_LAST="get last letter",dt.Msg.TEXT_CHARAT_RANDOM="get random letter",dt.Msg.TEXT_CHARAT_TAIL="",dt.Msg.TEXT_CHARAT_TITLE="in text %1 %2",dt.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",dt.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",dt.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",dt.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",dt.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",dt.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",dt.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",dt.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",dt.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",dt.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",dt.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",dt.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",dt.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",dt.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",dt.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",dt.Msg.TEXT_GET_SUBSTRING_TAIL="",dt.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",dt.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",dt.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",dt.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",dt.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",dt.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",dt.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",dt.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",dt.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",dt.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",dt.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",dt.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",dt.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",dt.Msg.TEXT_LENGTH_TITLE="length of %1",dt.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",dt.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",dt.Msg.TEXT_PRINT_TITLE="print %1",dt.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",dt.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",dt.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",dt.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",dt.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",dt.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",dt.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",dt.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",dt.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",dt.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",dt.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",dt.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",dt.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",dt.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",dt.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",dt.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",dt.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",dt.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",dt.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",dt.Msg.TODAY="Today",dt.Msg.UNDO="Undo",dt.Msg.UNNAMED_KEY="unnamed",dt.Msg.VARIABLES_DEFAULT_NAME="item",dt.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",dt.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",dt.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",dt.Msg.VARIABLES_SET="set %1 to %2",dt.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",dt.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",dt.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",dt.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",dt.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",dt.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",dt.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",dt.Msg.CONTROLS_FOREACH_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_FOR_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=dt.Msg.CONTROLS_IF_MSG_ELSEIF,dt.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=dt.Msg.CONTROLS_IF_MSG_ELSE,dt.Msg.CONTROLS_IF_IF_TITLE_IF=dt.Msg.CONTROLS_IF_MSG_IF,dt.Msg.CONTROLS_IF_MSG_THEN=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.LISTS_CREATE_WITH_ITEM_TITLE=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.LISTS_GET_INDEX_HELPURL=dt.Msg.LISTS_INDEX_OF_HELPURL,dt.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.MATH_CHANGE_TITLE_ITEM=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.PROCEDURES_DEFRETURN_COMMENT=dt.Msg.PROCEDURES_DEFNORETURN_COMMENT,dt.Msg.PROCEDURES_DEFRETURN_DO=dt.Msg.PROCEDURES_DEFNORETURN_DO,dt.Msg.PROCEDURES_DEFRETURN_PROCEDURE=dt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,dt.Msg.PROCEDURES_DEFRETURN_TITLE=dt.Msg.PROCEDURES_DEFNORETURN_TITLE,dt.Msg.TEXT_APPEND_VARIABLE=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.MATH_HUE="230",dt.Msg.LOOPS_HUE="120",dt.Msg.LISTS_HUE="260",dt.Msg.LOGIC_HUE="210",dt.Msg.VARIABLES_HUE="330",dt.Msg.TEXTS_HUE="160",dt.Msg.PROCEDURES_HUE="290",dt.Msg.COLOUR_HUE="20",dt.Msg.VARIABLES_DYNAMIC_HUE="310",dt.Msg})}(en$1)),en$1.exports}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,St={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Et=vt.module$build$src$core$msg.Msg,Ct=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,At=vt.module$build$src$core$common.defineBlocks;St.blocks=Ct([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var Rt={customContextMenu:function(Rn){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Xn={text:Et.RENAME_VARIABLE,enabled:!0,callback:Dt(this)},Kn=this.getField("VAR").getText(),Kn={text:Et.DELETE_VARIABLE.replace("%1",Kn),enabled:!0,callback:Nt(this)},Rn.unshift(Xn),Rn.unshift(Kn));else{var Xn=this.getFieldValue("VAR"),cr=this.workspace.getVariableById(Xn).type;if(this.type==="variables_get_dynamic"){Xn="variables_set_dynamic";var wr=Et.VARIABLES_GET_CREATE_SET}else Xn="variables_get_dynamic",wr=Et.VARIABLES_SET_CREATE_GET;var Kn={enabled:0<this.workspace.remainingCapacity()};const Cr=this.getField("VAR").getText();Kn.text=wr.replace("%1",Cr),wr=vt.module$build$src$core$utils$xml.createElement("field"),wr.setAttribute("name","VAR"),wr.setAttribute("variabletype",cr),wr.appendChild(vt.module$build$src$core$utils$xml.createTextNode(Cr)),cr=vt.module$build$src$core$utils$xml.createElement("block"),cr.setAttribute("type",Xn),cr.appendChild(wr),Kn.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,cr),Rn.push(Kn)}},onchange:function(Rn){Rn=this.getFieldValue("VAR"),Rn=vt.module$build$src$core$variables.getVariable(this.workspace,Rn),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(Rn.type):this.getInput("VALUE").connection.setCheck(Rn.type)}},Dt=function(Rn){return function(){const Xn=Rn.workspace,cr=Rn.getField("VAR").getVariable();vt.module$build$src$core$variables.renameVariable(Xn,cr)}},Nt=function(Rn){return function(){const Xn=Rn.workspace,cr=Rn.getField("VAR").getVariable();Xn.deleteVariableById(cr.getId()),Xn.refreshToolboxSelection()}};vt.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",Rt),At(St.blocks);var Ft={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Ut=vt.module$build$src$core$msg.Msg,Wt=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Zt=vt.module$build$src$core$common.defineBlocks;Ft.blocks=Wt([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var Kt={customContextMenu:function(Rn){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Xn={text:Ut.RENAME_VARIABLE,enabled:!0,callback:cn(this)},wr=this.getField("VAR").getText(),wr={text:Ut.DELETE_VARIABLE.replace("%1",wr),enabled:!0,callback:hn(this)},Rn.unshift(Xn),Rn.unshift(wr));else{if(this.type==="variables_get")var Xn="variables_set",cr=Ut.VARIABLES_GET_CREATE_SET;else Xn="variables_get",cr=Ut.VARIABLES_SET_CREATE_GET;var wr={enabled:0<this.workspace.remainingCapacity()},Kn=this.getField("VAR").getText();wr.text=cr.replace("%1",Kn),cr=vt.module$build$src$core$utils$xml.createElement("field"),cr.setAttribute("name","VAR"),cr.appendChild(vt.module$build$src$core$utils$xml.createTextNode(Kn)),Kn=vt.module$build$src$core$utils$xml.createElement("block"),Kn.setAttribute("type",Xn),Kn.appendChild(cr),wr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Kn),Rn.push(wr)}}},cn=function(Rn){return function(){const Xn=Rn.workspace,cr=Rn.getField("VAR").getVariable();vt.module$build$src$core$variables.renameVariable(Xn,cr)}},hn=function(Rn){return function(){const Xn=Rn.workspace,cr=Rn.getField("VAR").getVariable();Xn.deleteVariableById(cr.getId()),Xn.refreshToolboxSelection()}};vt.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",Kt),Zt(Ft.blocks);var dn={};vt.module$build$src$core$extensions;var pn=vt.module$build$src$core$msg.Msg;vt.module$build$src$core$utils$xml,vt.Align$$module$build$src$core$input,vt.module$build$src$core$connection_type.ConnectionType;var gn=vt.module$build$src$core$field_dropdown.FieldDropdown;vt.FieldImage$$module$build$src$core$field_image,vt.FieldTextInput$$module$build$src$core$field_textinput,vt.Mutator$$module$build$src$core$mutator;var vn=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,bn=vt.module$build$src$core$common.defineBlocks;dn.blocks=vn([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),dn.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[pn.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[pn.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[pn.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[pn.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[pn.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[pn.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(pn.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(pn.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),pn.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(pn.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(pn.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");var Xn=this.getInput("AT1").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return Rn.setAttribute("at1",Xn),Xn=this.getInput("AT2").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,Rn.setAttribute("at2",Xn),Rn},domToMutation:function(Rn){const Xn=Rn.getAttribute("at1")==="true";Rn=Rn.getAttribute("at2")==="true",this.updateAt_(1,Xn),this.updateAt_(2,Rn)},updateAt_:function(Rn,Xn){this.removeInput("AT"+Rn),this.removeInput("ORDINAL"+Rn,!0),Xn?(this.appendValueInput("AT"+Rn).setCheck("Number"),pn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Rn).appendField(pn.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Rn),Rn===2&&pn.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(pn.TEXT_GET_SUBSTRING_TAIL));const cr=new gn(this["WHERE_OPTIONS_"+Rn],function(wr){const Kn=wr==="FROM_START"||wr==="FROM_END";if(Kn!==Xn){const Cr=this.getSourceBlock();return Cr.updateAt_(Rn,Kn),Cr.setFieldValue(wr,"WHERE"+Rn),null}});this.getInput("AT"+Rn).appendField(cr,"WHERE"+Rn),Rn===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},dn.blocks.text_changeCase={init:function(){const Rn=[[pn.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[pn.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[pn.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(pn.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new gn(Rn),"CASE"),this.setOutput(!0,"String"),this.setTooltip(pn.TEXT_CHANGECASE_TOOLTIP)}},dn.blocks.text_trim={init:function(){const Rn=[[pn.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[pn.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[pn.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(pn.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new gn(Rn),"MODE"),this.setOutput(!0,"String"),this.setTooltip(pn.TEXT_TRIM_TOOLTIP)}},dn.blocks.text_print={init:function(){this.jsonInit({message0:pn.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:pn.TEXT_PRINT_TOOLTIP,helpUrl:pn.TEXT_PRINT_HELPURL})}};var $n={updateType_:function(Rn){this.outputConnection.setCheck(Rn==="NUMBER"?"Number":"String")},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("type",this.getFieldValue("TYPE")),Rn},domToMutation:function(Rn){this.updateType_(Rn.getAttribute("type"))}};dn.blocks.text_prompt_ext=Object.assign({},$n,{init:function(){var Rn=[[pn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[pn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(pn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const Xn=this;Rn=new gn(Rn,function(cr){Xn.updateType_(cr)}),this.appendValueInput("TEXT").appendField(Rn,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return Xn.getFieldValue("TYPE")==="TEXT"?pn.TEXT_PROMPT_TOOLTIP_TEXT:pn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),dn.blocks.text_prompt=Object.assign({},$n,{init:function(){this.mixin(Tn);var Rn=[[pn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[pn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const Xn=this;this.setHelpUrl(pn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Rn=new gn(Rn,function(cr){Xn.updateType_(cr)}),this.appendDummyInput().appendField(Rn,"TYPE").appendField(this.newQuote_(!0)).appendField(new vt.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return Xn.getFieldValue("TYPE")==="TEXT"?pn.TEXT_PROMPT_TOOLTIP_TEXT:pn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),dn.blocks.text_count={init:function(){this.jsonInit({message0:pn.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:pn.TEXT_COUNT_TOOLTIP,helpUrl:pn.TEXT_COUNT_HELPURL})}},dn.blocks.text_replace={init:function(){this.jsonInit({message0:pn.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:pn.TEXT_REPLACE_TOOLTIP,helpUrl:pn.TEXT_REPLACE_HELPURL})}},dn.blocks.text_reverse={init:function(){this.jsonInit({message0:pn.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:pn.TEXT_REVERSE_TOOLTIP,helpUrl:pn.TEXT_REVERSE_HELPURL})}};var Tn={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(Rn){for(let Xn=0,cr;cr=this.inputList[Xn];Xn++)for(let wr=0,Kn;Kn=cr.fieldRow[wr];wr++)if(Rn===Kn.name){cr.insertFieldAt(wr,this.newQuote_(!0)),cr.insertFieldAt(wr+2,this.newQuote_(!1));return}console.warn('field named "'+Rn+'" not found in '+this.toDevString())},newQuote_:function(Rn){return Rn=this.RTL?!Rn:Rn,new vt.FieldImage$$module$build$src$core$field_image(Rn?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,Rn?"":"")}},In=function(){this.mixin(Tn),this.quoteField_("TEXT")},Pn={mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("items",this.itemCount_),Rn},domToMutation:function(Rn){this.itemCount_=parseInt(Rn.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Rn){this.itemCount_=Rn.itemCount,this.updateShape_()},decompose:function(Rn){const Xn=Rn.newBlock("text_create_join_container");Xn.initSvg();let cr=Xn.getInput("STACK").connection;for(let wr=0;wr<this.itemCount_;wr++){const Kn=Rn.newBlock("text_create_join_item");Kn.initSvg(),cr.connect(Kn.previousConnection),cr=Kn.nextConnection}return Xn},compose:function(Rn){var Xn=Rn.getInputTargetBlock("STACK");for(Rn=[];Xn;)Xn.isInsertionMarker()||Rn.push(Xn.valueConnection_),Xn=Xn.getNextBlock();for(Xn=0;Xn<this.itemCount_;Xn++){const cr=this.getInput("ADD"+Xn).connection.targetConnection;cr&&Rn.indexOf(cr)===-1&&cr.disconnect()}for(this.itemCount_=Rn.length,this.updateShape_(),Xn=0;Xn<this.itemCount_;Xn++)vt.Mutator$$module$build$src$core$mutator.reconnect(Rn[Xn],this,"ADD"+Xn)},saveConnections:function(Rn){Rn=Rn.getInputTargetBlock("STACK");let Xn=0;for(;Rn;){if(Rn.isInsertionMarker()){Rn=Rn.getNextBlock();continue}const cr=this.getInput("ADD"+Xn);Rn.valueConnection_=cr&&cr.connection.targetConnection,Rn=Rn.getNextBlock(),Xn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var Rn=0;Rn<this.itemCount_;Rn++)if(!this.getInput("ADD"+Rn)){const Xn=this.appendValueInput("ADD"+Rn).setAlign(vt.Align$$module$build$src$core$input.RIGHT);Rn===0&&Xn.appendField(pn.TEXT_JOIN_TITLE_CREATEWITH)}for(Rn=this.itemCount_;this.getInput("ADD"+Rn);Rn++)this.removeInput("ADD"+Rn)}},zn=function(){this.mixin(Tn),this.itemCount_=2,this.updateShape_(),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};vt.module$build$src$core$extensions.register("text_append_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var An=function(){const Rn=this;this.setTooltip(function(){return pn.TEXT_INDEXOF_TOOLTIP.replace("%1",Rn.workspace.options.oneBasedIndex?"0":"-1")})},Gn={mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("at",!!this.isAt_),Rn},domToMutation:function(Rn){Rn=Rn.getAttribute("at")!=="false",this.updateAt_(Rn)},updateAt_:function(Rn){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),Rn&&(this.appendValueInput("AT").setCheck("Number"),pn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(pn.ORDINAL_NUMBER_SUFFIX)),pn.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(pn.TEXT_CHARAT_TAIL)),this.isAt_=Rn}},xn=function(){this.getField("WHERE").setValidator(function(Xn){Xn=Xn==="FROM_START"||Xn==="FROM_END",Xn!==this.isAt_&&this.getSourceBlock().updateAt_(Xn)}),this.updateAt_(!0);const Rn=this;this.setTooltip(function(){var Xn=Rn.getFieldValue("WHERE");let cr=pn.TEXT_CHARAT_TOOLTIP;return(Xn==="FROM_START"||Xn==="FROM_END")&&(Xn=Xn==="FROM_START"?pn.LISTS_INDEX_FROM_START_TOOLTIP:pn.LISTS_INDEX_FROM_END_TOOLTIP)&&(cr+="  "+Xn.replace("%1",Rn.workspace.options.oneBasedIndex?"#1":"#0")),cr})};vt.module$build$src$core$extensions.register("text_indexOf_tooltip",An),vt.module$build$src$core$extensions.register("text_quotes",In),vt.module$build$src$core$extensions.registerMutator("text_join_mutator",Pn,zn),vt.module$build$src$core$extensions.registerMutator("text_charAt_mutator",Gn,xn),bn(dn.blocks);var Qn={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$events$events,vt.module$build$src$core$procedures,vt.module$build$src$core$variables,vt.module$build$src$core$xml,vt.module$build$src$core$utils$xml,vt.Align$$module$build$src$core$input,vt.config$$module$build$src$core$config,vt.FieldCheckbox$$module$build$src$core$field_checkbox,vt.FieldLabel$$module$build$src$core$field_label,vt.FieldTextInput$$module$build$src$core$field_textinput;var qn=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator,vt.module$build$src$core$names.Names;var nr=vt.module$build$src$core$common.defineBlocks;Qn.blocks={};var Un={setStatements_:function(Rn){this.hasStatements_!==Rn&&(Rn?(this.appendStatementInput("STACK").appendField(qn.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=Rn)},updateParams_:function(){let Rn="";this.arguments_.length&&(Rn=qn.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),vt.module$build$src$core$events$events.disable();try{this.setFieldValue(Rn,"PARAMS")}finally{vt.module$build$src$core$events$events.enable()}},mutationToDom:function(Rn){const Xn=vt.module$build$src$core$utils$xml.createElement("mutation");Rn&&Xn.setAttribute("name",this.getFieldValue("NAME"));for(let cr=0;cr<this.argumentVarModels_.length;cr++){const wr=vt.module$build$src$core$utils$xml.createElement("arg"),Kn=this.argumentVarModels_[cr];wr.setAttribute("name",Kn.name),wr.setAttribute("varid",Kn.getId()),Rn&&this.paramIds_&&wr.setAttribute("paramId",this.paramIds_[cr]),Xn.appendChild(wr)}return this.hasStatements_||Xn.setAttribute("statements","false"),Xn},domToMutation:function(Rn){this.arguments_=[],this.argumentVarModels_=[];for(let cr=0,wr;wr=Rn.childNodes[cr];cr++)if(wr.nodeName.toLowerCase()==="arg"){const Kn=wr.getAttribute("name");var Xn=wr.getAttribute("varid")||wr.getAttribute("varId");this.arguments_.push(Kn),Xn=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Xn,Kn,""),Xn!==null?this.argumentVarModels_.push(Xn):console.log(`Failed to create a variable named "${Kn}", ignoring.`)}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(Rn.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const Rn=Object.create(null);if(this.argumentVarModels_.length){Rn.params=[];for(let Xn=0;Xn<this.argumentVarModels_.length;Xn++)Rn.params.push({name:this.argumentVarModels_[Xn].name,id:this.argumentVarModels_[Xn].getId()})}return this.hasStatements_||(Rn.hasStatements=!1),Rn},loadExtraState:function(Rn){if(this.arguments_=[],this.argumentVarModels_=[],Rn.params)for(let cr=0;cr<Rn.params.length;cr++){var Xn=Rn.params[cr];Xn=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Xn.id,Xn.name,""),this.arguments_.push(Xn.name),this.argumentVarModels_.push(Xn)}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(Rn.hasStatements!==!1)},decompose:function(Rn){const Xn=vt.module$build$src$core$utils$xml.createElement("block");Xn.setAttribute("type","procedures_mutatorcontainer");var cr=vt.module$build$src$core$utils$xml.createElement("statement");cr.setAttribute("name","STACK"),Xn.appendChild(cr);for(let Kn=0;Kn<this.arguments_.length;Kn++){const Cr=vt.module$build$src$core$utils$xml.createElement("block");Cr.setAttribute("type","procedures_mutatorarg");var wr=vt.module$build$src$core$utils$xml.createElement("field");wr.setAttribute("name","NAME");const qr=vt.module$build$src$core$utils$xml.createTextNode(this.arguments_[Kn]);wr.appendChild(qr),Cr.appendChild(wr),wr=vt.module$build$src$core$utils$xml.createElement("next"),Cr.appendChild(wr),cr.appendChild(Cr),cr=wr}return Rn=vt.module$build$src$core$xml.domToBlock(Xn,Rn),this.type==="procedures_defreturn"?Rn.setFieldValue(this.hasStatements_,"STATEMENTS"):Rn.removeInput("STATEMENT_INPUT"),vt.module$build$src$core$procedures.mutateCallers(this),Rn},compose:function(Rn){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Xn=Rn.getInputTargetBlock("STACK");for(;Xn&&!Xn.isInsertionMarker();){var cr=Xn.getFieldValue("NAME");this.arguments_.push(cr),cr=this.workspace.getVariable(cr,""),this.argumentVarModels_.push(cr),this.paramIds_.push(Xn.id),Xn=Xn.nextConnection&&Xn.nextConnection.targetBlock()}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),Rn=Rn.getFieldValue("STATEMENTS"),Rn!==null&&(Rn=Rn==="TRUE",this.hasStatements_!==Rn)&&(Rn?(this.setStatements_(!0),vt.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(Rn=this.getInput("STACK").connection,(this.statementConnection_=Rn.targetConnection)&&(Rn=Rn.targetBlock(),Rn.unplug(),Rn.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(Rn,Xn){var cr=this.workspace.getVariableById(Rn);if(cr.type===""){cr=cr.name,Xn=this.workspace.getVariableById(Xn);var wr=!1;for(let Kn=0;Kn<this.argumentVarModels_.length;Kn++)this.argumentVarModels_[Kn].getId()===Rn&&(this.arguments_[Kn]=Xn.name,this.argumentVarModels_[Kn]=Xn,wr=!0);wr&&(this.displayRenamedVar_(cr,Xn.name),vt.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(Rn){const Xn=Rn.name;let cr=!1,wr;for(let Kn=0;Kn<this.argumentVarModels_.length;Kn++)this.argumentVarModels_[Kn].getId()===Rn.getId()&&(wr=this.arguments_[Kn],this.arguments_[Kn]=Xn,cr=!0);cr&&(this.displayRenamedVar_(wr,Xn),vt.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(Rn,Xn){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const cr=this.mutator.workspace_.getAllBlocks(!1);for(let wr=0,Kn;Kn=cr[wr];wr++)Kn.type==="procedures_mutatorarg"&&vt.module$build$src$core$names.Names.equals(Rn,Kn.getFieldValue("NAME"))&&Kn.setFieldValue(Xn,"NAME")}},customContextMenu:function(Rn){if(!this.isInFlyout){var Xn={enabled:!0},cr=this.getFieldValue("NAME");Xn.text=qn.PROCEDURES_CREATE_DO.replace("%1",cr);var wr=vt.module$build$src$core$utils$xml.createElement("mutation");for(wr.setAttribute("name",cr),cr=0;cr<this.arguments_.length;cr++){var Kn=vt.module$build$src$core$utils$xml.createElement("arg");Kn.setAttribute("name",this.arguments_[cr]),wr.appendChild(Kn)}if(cr=vt.module$build$src$core$utils$xml.createElement("block"),cr.setAttribute("type",this.callType_),cr.appendChild(wr),Xn.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,cr),Rn.push(Xn),!this.isCollapsed())for(Xn=0;Xn<this.argumentVarModels_.length;Xn++)wr={enabled:!0},cr=this.argumentVarModels_[Xn],wr.text=qn.VARIABLES_SET_CREATE_GET.replace("%1",cr.name),cr=vt.module$build$src$core$variables.generateVariableFieldDom(cr),Kn=vt.module$build$src$core$utils$xml.createElement("block"),Kn.setAttribute("type","variables_get"),Kn.appendChild(cr),wr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Kn),Rn.push(wr)}}};Qn.blocks.procedures_defnoreturn=Object.assign({},Un,{init:function(){var Rn=vt.module$build$src$core$procedures.findLegalName("",this);Rn=new vt.FieldTextInput$$module$build$src$core$field_textinput(Rn,vt.module$build$src$core$procedures.rename),Rn.setSpellcheck(!1),this.appendDummyInput().appendField(qn.PROCEDURES_DEFNORETURN_TITLE).appendField(Rn,"NAME").appendField("","PARAMS"),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&qn.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(qn.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(qn.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(qn.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Qn.blocks.procedures_defreturn=Object.assign({},Un,{init:function(){var Rn=vt.module$build$src$core$procedures.findLegalName("",this);Rn=new vt.FieldTextInput$$module$build$src$core$field_textinput(Rn,vt.module$build$src$core$procedures.rename),Rn.setSpellcheck(!1),this.appendDummyInput().appendField(qn.PROCEDURES_DEFRETURN_TITLE).appendField(Rn,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(vt.Align$$module$build$src$core$input.RIGHT).appendField(qn.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&qn.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(qn.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(qn.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(qn.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Qn.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(qn.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(qn.PROCEDURES_ALLOW_STATEMENTS).appendField(new vt.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(qn.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Qn.blocks.procedures_mutatorarg={init:function(){const Rn=new vt.FieldTextInput$$module$build$src$core$field_textinput(vt.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);Rn.oldShowEditorFn_=Rn.showEditor_,Rn.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(qn.PROCEDURES_MUTATORARG_TITLE).appendField(Rn,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(qn.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,Rn.onFinishEditing_=this.deleteIntermediateVars_,Rn.createdVariables_=[],Rn.onFinishEditing_("x")},validator_:function(Rn){var Xn=this.getSourceBlock();const cr=vt.Mutator$$module$build$src$core$mutator.findParentWs(Xn.workspace);if(Rn=Rn.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!Rn)return null;const wr=(Xn.workspace.targetWorkspace||Xn.workspace).getAllBlocks(!1),Kn=Rn.toLowerCase();for(let Cr=0;Cr<wr.length;Cr++){if(wr[Cr].id===this.getSourceBlock().id)continue;const qr=wr[Cr].getFieldValue("NAME");if(qr&&qr.toLowerCase()===Kn)return null}return Xn.isInFlyout||((Xn=cr.getVariable(Rn,""))&&Xn.name!==Rn&&cr.renameVariableById(Xn.getId(),Rn),Xn||(Xn=cr.createVariable(Rn,""))&&this.createdVariables_&&this.createdVariables_.push(Xn)),Rn},deleteIntermediateVars_:function(Rn){const Xn=vt.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(Xn)for(let cr=0;cr<this.createdVariables_.length;cr++){const wr=this.createdVariables_[cr];wr.name!==Rn&&Xn.deleteVariableById(wr.getId())}}};var Nn={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(Rn,Xn){vt.module$build$src$core$names.Names.equals(Rn,this.getProcedureCall())&&(this.setFieldValue(Xn,"NAME"),this.setTooltip((this.outputConnection?qn.PROCEDURES_CALLRETURN_TOOLTIP:qn.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Xn)))},setProcedureParameters_:function(Rn,Xn){var cr=vt.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),wr=cr&&cr.mutator&&cr.mutator.isVisible();if(wr?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),Rn.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Xn;else{if(Xn.length!==Rn.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),cr=this.rendered,this.rendered=!1;for(let Cr=0;Cr<this.arguments_.length;Cr++){var Kn=this.getInput("ARG"+Cr);Kn&&(Kn=Kn.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Cr]]=Kn,wr&&Kn&&Xn.indexOf(this.quarkIds_[Cr])===-1&&(Kn.disconnect(),Kn.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(Rn),this.argumentVarModels_=[],Rn=0;Rn<this.arguments_.length;Rn++)wr=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[Rn],""),this.argumentVarModels_.push(wr);if(this.updateShape_(),this.quarkIds_=Xn)for(Xn=0;Xn<this.arguments_.length;Xn++)Rn=this.quarkIds_[Xn],Rn in this.quarkConnections_&&(vt.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[Rn],this,"ARG"+Xn)||delete this.quarkConnections_[Rn]);(this.rendered=cr)&&this.render()}},updateShape_:function(){for(var Rn=0;Rn<this.arguments_.length;Rn++){var Xn=this.getField("ARGNAME"+Rn);if(Xn){vt.module$build$src$core$events$events.disable();try{Xn.setValue(this.arguments_[Rn])}finally{vt.module$build$src$core$events$events.enable()}}else Xn=new vt.FieldLabel$$module$build$src$core$field_label(this.arguments_[Rn]),this.appendValueInput("ARG"+Rn).setAlign(vt.Align$$module$build$src$core$input.RIGHT).appendField(Xn,"ARGNAME"+Rn).init()}for(Rn=this.arguments_.length;this.getInput("ARG"+Rn);Rn++)this.removeInput("ARG"+Rn);(Rn=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(Rn.appendField(qn.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),Rn.init()):this.getField("WITH")&&Rn.removeField("WITH"))},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");Rn.setAttribute("name",this.getProcedureCall());for(let Xn=0;Xn<this.arguments_.length;Xn++){const cr=vt.module$build$src$core$utils$xml.createElement("arg");cr.setAttribute("name",this.arguments_[Xn]),Rn.appendChild(cr)}return Rn},domToMutation:function(Rn){var Xn=Rn.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Xn),Xn=[];const cr=[];for(let wr=0,Kn;Kn=Rn.childNodes[wr];wr++)Kn.nodeName.toLowerCase()==="arg"&&(Xn.push(Kn.getAttribute("name")),cr.push(Kn.getAttribute("paramId")));this.setProcedureParameters_(Xn,cr)},saveExtraState:function(){const Rn=Object.create(null);return Rn.name=this.getProcedureCall(),this.arguments_.length&&(Rn.params=this.arguments_),Rn},loadExtraState:function(Rn){if(this.renameProcedure(this.getProcedureCall(),Rn.name),Rn=Rn.params){const Xn=[];Xn.length=Rn.length,Xn.fill(null),this.setProcedureParameters_(Rn,Xn)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(Rn){if(this.workspace&&!this.workspace.isFlyout&&Rn.recordUndo)if(Rn.type===vt.module$build$src$core$events$events.BLOCK_CREATE&&Rn.ids.indexOf(this.id)!==-1){var Xn=this.getProcedureCall();if(Xn=vt.module$build$src$core$procedures.getDefinition(Xn,this.workspace),!Xn||Xn.type===this.defType_&&JSON.stringify(Xn.getVars())===JSON.stringify(this.arguments_)||(Xn=null),!Xn){vt.module$build$src$core$events$events.setGroup(Rn.group),Rn=vt.module$build$src$core$utils$xml.createElement("xml"),Xn=vt.module$build$src$core$utils$xml.createElement("block"),Xn.setAttribute("type",this.defType_);var cr=this.getRelativeToSurfaceXY(),wr=cr.y+2*vt.config$$module$build$src$core$config.snapRadius;Xn.setAttribute("x",cr.x+vt.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),Xn.setAttribute("y",wr),cr=this.mutationToDom(),Xn.appendChild(cr),cr=vt.module$build$src$core$utils$xml.createElement("field"),cr.setAttribute("name","NAME"),wr=this.getProcedureCall();const Kn=vt.module$build$src$core$procedures.findLegalName(wr,this);wr!==Kn&&this.renameProcedure(wr,Kn),cr.appendChild(vt.module$build$src$core$utils$xml.createTextNode(wr)),Xn.appendChild(cr),Rn.appendChild(Xn),vt.module$build$src$core$xml.domToWorkspace(Rn,this.workspace),vt.module$build$src$core$events$events.setGroup(!1)}}else Rn.type===vt.module$build$src$core$events$events.BLOCK_DELETE?(Xn=this.getProcedureCall(),vt.module$build$src$core$procedures.getDefinition(Xn,this.workspace)||(vt.module$build$src$core$events$events.setGroup(Rn.group),this.dispose(!0),vt.module$build$src$core$events$events.setGroup(!1))):Rn.type===vt.module$build$src$core$events$events.CHANGE&&Rn.element==="disabled"&&(Xn=this.getProcedureCall(),(Xn=vt.module$build$src$core$procedures.getDefinition(Xn,this.workspace))&&Xn.id===Rn.blockId&&((Xn=vt.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),vt.module$build$src$core$events$events.setGroup(Rn.group),Rn.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),vt.module$build$src$core$events$events.setGroup(Xn)))},customContextMenu:function(Rn){if(this.workspace.isMovable()){var Xn={enabled:!0};Xn.text=qn.PROCEDURES_HIGHLIGHT_DEF;var cr=this.getProcedureCall(),wr=this.workspace;Xn.callback=function(){const Kn=vt.module$build$src$core$procedures.getDefinition(cr,wr);Kn&&(wr.centerOnBlock(Kn.id),Kn.select())},Rn.push(Xn)}}};Qn.blocks.procedures_callnoreturn=Object.assign({},Nn,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(qn.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Qn.blocks.procedures_callreturn=Object.assign({},Nn,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(qn.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Qn.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(qn.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(qn.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(qn.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(qn.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("value",Number(this.hasReturnValue_)),Rn},domToMutation:function(Rn){this.hasReturnValue_=Rn.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(qn.PROCEDURES_DEFRETURN_RETURN))},onchange:function(Rn){if(!(this.workspace.isDragging&&this.workspace.isDragging()||Rn.type!==vt.module$build$src$core$events$events.BLOCK_MOVE)){var Xn=!1,cr=this;do{if(this.FUNCTION_TYPES.indexOf(cr.type)!==-1){Xn=!0;break}cr=cr.getSurroundParent()}while(cr);Xn?(cr.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(qn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):cr.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(qn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(qn.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(cr=vt.module$build$src$core$events$events.getGroup(),vt.module$build$src$core$events$events.setGroup(Rn.group),this.setEnabled(Xn),vt.module$build$src$core$events$events.setGroup(cr))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},nr(Qn.blocks);var jn={};vt.module$build$src$core$extensions,vt.module$build$src$core$field_dropdown,vt.module$build$src$core$utils$xml;var Ln=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Cn=vt.module$build$src$core$common.defineBlocks;jn.blocks=Ln([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var tr={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};vt.module$build$src$core$extensions.register("math_op_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("OP",tr));var ir={mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation"),Xn=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return Rn.setAttribute("divisor_input",Xn),Rn},domToMutation:function(Rn){Rn=Rn.getAttribute("divisor_input")==="true",this.updateShape_(Rn)},updateShape_:function(Rn){const Xn=this.getInput("DIVISOR");Rn?Xn||this.appendValueInput("DIVISOR").setCheck("Number"):Xn&&this.removeInput("DIVISOR")}},Zn=function(){this.getField("PROPERTY").setValidator(function(Rn){Rn=Rn==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(Rn)})};vt.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",ir,Zn),vt.module$build$src$core$extensions.register("math_change_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var br={updateType_:function(Rn){Rn==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("op",this.getFieldValue("OP")),Rn},domToMutation:function(Rn){this.updateType_(Rn.getAttribute("op"))}},fr=function(){this.getField("OP").setValidator(function(Rn){this.updateType_(Rn)}.bind(this))};vt.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",br,fr),Cn(jn.blocks);var Or={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$events$events,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Pr=vt.module$build$src$core$msg.Msg,zr=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Dr=vt.module$build$src$core$common.defineBlocks;Or.blocks=zr([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var _r={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};vt.module$build$src$core$extensions.register("controls_whileUntil_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("MODE",_r));var Nr={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};vt.module$build$src$core$extensions.register("controls_flow_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",Nr));var Dn={customContextMenu:function(Rn){if(!this.isInFlyout){var Xn=this.getField("VAR").getVariable(),cr=Xn.name;if(!this.isCollapsed()&&cr!==null){const wr={enabled:!0};wr.text=Pr.VARIABLES_SET_CREATE_GET.replace("%1",cr),Xn=vt.module$build$src$core$variables.generateVariableFieldDom(Xn),cr=vt.module$build$src$core$utils$xml.createElement("block"),cr.setAttribute("type","variables_get"),cr.appendChild(Xn),wr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,cr),Rn.push(wr)}}}};vt.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",Dn),vt.module$build$src$core$extensions.register("controls_for_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),vt.module$build$src$core$extensions.register("controls_forEach_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Or.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var yr={getSurroundLoop:function(){let Rn=this;do{if(Or.loopTypes.has(Rn.type))return Rn;Rn=Rn.getSurroundParent()}while(Rn);return null},onchange:function(Rn){if(this.workspace.isDragging&&!this.workspace.isDragging()&&Rn.type===vt.module$build$src$core$events$events.BLOCK_MOVE){var Xn=this.getSurroundLoop(this);if(this.setWarningText(Xn?null:Pr.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const cr=vt.module$build$src$core$events$events.getGroup();vt.module$build$src$core$events$events.setGroup(Rn.group),this.setEnabled(Xn),vt.module$build$src$core$events$events.setGroup(cr)}}}};vt.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",yr),Dr(Or.blocks);var hr={};vt.module$build$src$core$events$events,vt.module$build$src$core$extensions,vt.module$build$src$core$utils$xml;var Jn=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator;var Yn=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,ar=vt.module$build$src$core$common.defineBlocks;hr.blocks=Yn([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Sr={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};vt.module$build$src$core$extensions.register("logic_op_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("OP",Sr));var gr={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&Rn.setAttribute("elseif",this.elseifCount_),this.elseCount_&&Rn.setAttribute("else",1),Rn},domToMutation:function(Rn){this.elseifCount_=parseInt(Rn.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(Rn.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Rn=Object.create(null);return this.elseifCount_&&(Rn.elseIfCount=this.elseifCount_),this.elseCount_&&(Rn.hasElse=!0),Rn},loadExtraState:function(Rn){this.elseifCount_=Rn.elseIfCount||0,this.elseCount_=Rn.hasElse?1:0,this.updateShape_()},decompose:function(Rn){const Xn=Rn.newBlock("controls_if_if");Xn.initSvg();let cr=Xn.nextConnection;for(let wr=1;wr<=this.elseifCount_;wr++){const Kn=Rn.newBlock("controls_if_elseif");Kn.initSvg(),cr.connect(Kn.previousConnection),cr=Kn.nextConnection}return this.elseCount_&&(Rn=Rn.newBlock("controls_if_else"),Rn.initSvg(),cr.connect(Rn.previousConnection)),Xn},compose:function(Rn){Rn=Rn.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Xn=[null],cr=[null];let wr=null;for(;Rn;){if(!Rn.isInsertionMarker())switch(Rn.type){case"controls_if_elseif":this.elseifCount_++,Xn.push(Rn.valueConnection_),cr.push(Rn.statementConnection_);break;case"controls_if_else":this.elseCount_++,wr=Rn.statementConnection_;break;default:throw TypeError("Unknown block type: "+Rn.type)}Rn=Rn.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Xn,cr,wr)},saveConnections:function(Rn){Rn=Rn.nextConnection.targetBlock();let Xn=1;for(;Rn;){if(!Rn.isInsertionMarker())switch(Rn.type){case"controls_if_elseif":var cr=this.getInput("IF"+Xn);const wr=this.getInput("DO"+Xn);Rn.valueConnection_=cr&&cr.connection.targetConnection,Rn.statementConnection_=wr&&wr.connection.targetConnection,Xn++;break;case"controls_if_else":cr=this.getInput("ELSE"),Rn.statementConnection_=cr&&cr.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+Rn.type)}Rn=Rn.getNextBlock()}},rebuildShape_:function(){const Rn=[null],Xn=[null];let cr=null;this.getInput("ELSE")&&(cr=this.getInput("ELSE").connection.targetConnection);for(let wr=1;this.getInput("IF"+wr);wr++){const Kn=this.getInput("IF"+wr),Cr=this.getInput("DO"+wr);Rn.push(Kn.connection.targetConnection),Xn.push(Cr.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(Rn,Xn,cr)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var Rn=1;this.getInput("IF"+Rn);Rn++)this.removeInput("IF"+Rn),this.removeInput("DO"+Rn);for(Rn=1;Rn<=this.elseifCount_;Rn++)this.appendValueInput("IF"+Rn).setCheck("Boolean").appendField(Jn.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+Rn).appendField(Jn.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Jn.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(Rn,Xn,cr){for(let wr=1;wr<=this.elseifCount_;wr++)vt.Mutator$$module$build$src$core$mutator.reconnect(Rn[wr],this,"IF"+wr),vt.Mutator$$module$build$src$core$mutator.reconnect(Xn[wr],this,"DO"+wr);vt.Mutator$$module$build$src$core$mutator.reconnect(cr,this,"ELSE")}};vt.module$build$src$core$extensions.registerMutator("controls_if_mutator",gr,null,["controls_if_elseif","controls_if_else"]);var Vn=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return Jn.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return Jn.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return Jn.CONTROLS_IF_TOOLTIP_4}else return Jn.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};vt.module$build$src$core$extensions.register("controls_if_tooltip",Vn);var Wn={onchange:function(Rn){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Xn=this.getInputTargetBlock("A");const cr=this.getInputTargetBlock("B");Xn&&cr&&!this.workspace.connectionChecker.doTypeChecks(Xn.outputConnection,cr.outputConnection)&&(vt.module$build$src$core$events$events.setGroup(Rn.group),Rn=this.prevBlocks_[0],Rn!==Xn&&(Xn.unplug(),!Rn||Rn.isDisposed()||Rn.isShadow()||this.getInput("A").connection.connect(Rn.outputConnection)),Xn=this.prevBlocks_[1],Xn!==cr&&(cr.unplug(),!Xn||Xn.isDisposed()||Xn.isShadow()||this.getInput("B").connection.connect(Xn.outputConnection)),this.bumpNeighbours(),vt.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},rr=function(){this.mixin(Wn)};vt.module$build$src$core$extensions.register("logic_compare",rr);var lr={prevParentConnection_:null,onchange:function(Rn){const Xn=this.getInputTargetBlock("THEN"),cr=this.getInputTargetBlock("ELSE"),wr=this.outputConnection.targetConnection;if((Xn||cr)&&wr)for(let Kn=0;2>Kn;Kn++){const Cr=Kn===1?Xn:cr;Cr&&!Cr.workspace.connectionChecker.doTypeChecks(Cr.outputConnection,wr)&&(vt.module$build$src$core$events$events.setGroup(Rn.group),wr===this.prevParentConnection_?(this.unplug(),wr.getSourceBlock().bumpNeighbours()):(Cr.unplug(),Cr.bumpNeighbours()),vt.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=wr}};vt.module$build$src$core$extensions.registerMixin("logic_ternary",lr),ar(hr.blocks);var xr={};vt.module$build$src$core$utils$xml,vt.module$build$src$core$xml,vt.Align$$module$build$src$core$input,vt.module$build$src$core$connection_type.ConnectionType;var Fr=vt.module$build$src$core$field_dropdown.FieldDropdown,mr=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator;var Yr=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Vr=vt.module$build$src$core$common.defineBlocks;xr.blocks=Yr([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),xr.blocks.lists_create_with={init:function(){this.setHelpUrl(mr.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(mr.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("items",this.itemCount_),Rn},domToMutation:function(Rn){this.itemCount_=parseInt(Rn.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Rn){this.itemCount_=Rn.itemCount,this.updateShape_()},decompose:function(Rn){const Xn=Rn.newBlock("lists_create_with_container");Xn.initSvg();let cr=Xn.getInput("STACK").connection;for(let wr=0;wr<this.itemCount_;wr++){const Kn=Rn.newBlock("lists_create_with_item");Kn.initSvg(),cr.connect(Kn.previousConnection),cr=Kn.nextConnection}return Xn},compose:function(Rn){var Xn=Rn.getInputTargetBlock("STACK");for(Rn=[];Xn;)Xn.isInsertionMarker()||Rn.push(Xn.valueConnection_),Xn=Xn.getNextBlock();for(Xn=0;Xn<this.itemCount_;Xn++){const cr=this.getInput("ADD"+Xn).connection.targetConnection;cr&&Rn.indexOf(cr)===-1&&cr.disconnect()}for(this.itemCount_=Rn.length,this.updateShape_(),Xn=0;Xn<this.itemCount_;Xn++)vt.Mutator$$module$build$src$core$mutator.reconnect(Rn[Xn],this,"ADD"+Xn)},saveConnections:function(Rn){Rn=Rn.getInputTargetBlock("STACK");let Xn=0;for(;Rn;){if(Rn.isInsertionMarker()){Rn=Rn.getNextBlock();continue}const cr=this.getInput("ADD"+Xn);Rn.valueConnection_=cr&&cr.connection.targetConnection,Rn=Rn.getNextBlock(),Xn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(mr.LISTS_CREATE_EMPTY_TITLE);for(var Rn=0;Rn<this.itemCount_;Rn++)if(!this.getInput("ADD"+Rn)){const Xn=this.appendValueInput("ADD"+Rn).setAlign(vt.Align$$module$build$src$core$input.RIGHT);Rn===0&&Xn.appendField(mr.LISTS_CREATE_WITH_INPUT_WITH)}for(Rn=this.itemCount_;this.getInput("ADD"+Rn);Rn++)this.removeInput("ADD"+Rn)}},xr.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(mr.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(mr.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},xr.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(mr.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(mr.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},xr.blocks.lists_indexOf={init:function(){const Rn=[[mr.LISTS_INDEX_OF_FIRST,"FIRST"],[mr.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(mr.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(mr.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Fr(Rn),"END"),this.setInputsInline(!0);const Xn=this;this.setTooltip(function(){return mr.LISTS_INDEX_OF_TOOLTIP.replace("%1",Xn.workspace.options.oneBasedIndex?"0":"-1")})}},xr.blocks.lists_getIndex={init:function(){var Rn=[[mr.LISTS_GET_INDEX_GET,"GET"],[mr.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[mr.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[mr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[mr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[mr.LISTS_GET_INDEX_FIRST,"FIRST"],[mr.LISTS_GET_INDEX_LAST,"LAST"],[mr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(mr.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),Rn=new Fr(Rn,function(cr){cr=cr==="REMOVE",this.getSourceBlock().updateStatement_(cr)}),this.appendValueInput("VALUE").setCheck("Array").appendField(mr.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(Rn,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),mr.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(mr.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const Xn=this;this.setTooltip(function(){const cr=Xn.getFieldValue("MODE"),wr=Xn.getFieldValue("WHERE");let Kn="";switch(cr+" "+wr){case"GET FROM_START":case"GET FROM_END":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Kn=mr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Kn=mr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Kn=mr.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Kn=mr.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(wr==="FROM_START"||wr==="FROM_END")&&(Kn+="  "+(wr==="FROM_START"?mr.LISTS_INDEX_FROM_START_TOOLTIP:mr.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",Xn.workspace.options.oneBasedIndex?"#1":"#0")),Kn})},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");Rn.setAttribute("statement",!this.outputConnection);const Xn=this.getInput("AT").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return Rn.setAttribute("at",Xn),Rn},domToMutation:function(Rn){const Xn=Rn.getAttribute("statement")==="true";this.updateStatement_(Xn),Rn=Rn.getAttribute("at")!=="false",this.updateAt_(Rn)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(Rn){Rn.isStatement?this.updateStatement_(!0):typeof Rn=="string"&&this.domToMutation(vt.module$build$src$core$xml.textToDom(Rn))},updateStatement_:function(Rn){Rn!==!this.outputConnection&&(this.unplug(!0,!0),Rn?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(Rn){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Rn?(this.appendValueInput("AT").setCheck("Number"),mr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(mr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Xn=new Fr(this.WHERE_OPTIONS,function(cr){const wr=cr==="FROM_START"||cr==="FROM_END";if(wr!==Rn){const Kn=this.getSourceBlock();return Kn.updateAt_(wr),Kn.setFieldValue(cr,"WHERE"),null}});this.getInput("AT").appendField(Xn,"WHERE"),mr.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},xr.blocks.lists_setIndex={init:function(){const Rn=[[mr.LISTS_SET_INDEX_SET,"SET"],[mr.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[mr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[mr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[mr.LISTS_GET_INDEX_FIRST,"FIRST"],[mr.LISTS_GET_INDEX_LAST,"LAST"],[mr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(mr.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(mr.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Fr(Rn),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(mr.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(mr.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const Xn=this;this.setTooltip(function(){const cr=Xn.getFieldValue("MODE"),wr=Xn.getFieldValue("WHERE");let Kn="";switch(cr+" "+wr){case"SET FROM_START":case"SET FROM_END":Kn=mr.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Kn=mr.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Kn=mr.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Kn=mr.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Kn=mr.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Kn=mr.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Kn=mr.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Kn=mr.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(wr==="FROM_START"||wr==="FROM_END")&&(Kn+="  "+mr.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",Xn.workspace.options.oneBasedIndex?"#1":"#0")),Kn})},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation"),Xn=this.getInput("AT").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return Rn.setAttribute("at",Xn),Rn},domToMutation:function(Rn){Rn=Rn.getAttribute("at")!=="false",this.updateAt_(Rn)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Rn){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Rn?(this.appendValueInput("AT").setCheck("Number"),mr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(mr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Xn=new Fr(this.WHERE_OPTIONS,function(cr){const wr=cr==="FROM_START"||cr==="FROM_END";if(wr!==Rn){const Kn=this.getSourceBlock();return Kn.updateAt_(wr),Kn.setFieldValue(cr,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Xn,"WHERE")}},xr.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[mr.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[mr.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[mr.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[mr.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[mr.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[mr.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(mr.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(mr.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),mr.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(mr.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(mr.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");var Xn=this.getInput("AT1").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return Rn.setAttribute("at1",Xn),Xn=this.getInput("AT2").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,Rn.setAttribute("at2",Xn),Rn},domToMutation:function(Rn){const Xn=Rn.getAttribute("at1")==="true";Rn=Rn.getAttribute("at2")==="true",this.updateAt_(1,Xn),this.updateAt_(2,Rn)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Rn,Xn){this.removeInput("AT"+Rn),this.removeInput("ORDINAL"+Rn,!0),Xn?(this.appendValueInput("AT"+Rn).setCheck("Number"),mr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Rn).appendField(mr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Rn);const cr=new Fr(this["WHERE_OPTIONS_"+Rn],function(wr){const Kn=wr==="FROM_START"||wr==="FROM_END";if(Kn!==Xn){const Cr=this.getSourceBlock();return Cr.updateAt_(Rn,Kn),Cr.setFieldValue(wr,"WHERE"+Rn),null}});this.getInput("AT"+Rn).appendField(cr,"WHERE"+Rn),Rn===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),mr.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},xr.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},xr.blocks.lists_split={init:function(){const Rn=this,Xn=new Fr([[mr.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[mr.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(cr){Rn.updateType_(cr)});this.setHelpUrl(mr.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Xn,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(mr.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const cr=Rn.getFieldValue("MODE");if(cr==="SPLIT")return mr.LISTS_SPLIT_TOOLTIP_SPLIT;if(cr==="JOIN")return mr.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+cr)})},updateType_:function(Rn){if(this.getFieldValue("MODE")!==Rn){const Xn=this.getInput("INPUT").connection;Xn.setShadowDom(null);const cr=Xn.targetBlock();cr&&(Xn.disconnect(),cr.isShadow()?cr.dispose():this.bumpNeighbours())}Rn==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const Rn=vt.module$build$src$core$utils$xml.createElement("mutation");return Rn.setAttribute("mode",this.getFieldValue("MODE")),Rn},domToMutation:function(Rn){this.updateType_(Rn.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},Vr(xr.blocks);var eo={},ur=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,kr=vt.module$build$src$core$common.defineBlocks;eo.blocks=ur([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),kr(eo.blocks);var Br={};return Br.colour=eo,Br.lists=xr,Br.logic=hr,Br.loops=Or,Br.math=jn,Br.procedures=Qn,Br.texts=dn,Br.variables=Ft,Br.variablesDynamic=St,Br.blocks=Object.assign({},eo.blocks,xr.blocks,hr.blocks,Or.blocks,jn.blocks,Qn.blocks,Ft.blocks,St.blocks),Br.__namespace__=vt,Br})}(blocks_compressed)),blocks_compressed.exports}var hasRequiredBlocks;function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlocks_compressed())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})}(blocks)),blocks.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requireEn(),requireBlocks(),javascriptExports)})(commonjsGlobal,function(dt,vt,St,Et){return dt.setLocale(vt),dt})}(browser$1)),browser$1.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireBrowser())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})})(blockly);var blocklyExports=blockly.exports;const Blockly=getDefaultExportFromCjs(blocklyExports),block_circle={name:"circle",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldLabelSerializable("Go in circle of radius"),"Circular motion").appendField(new Blockly.FieldNumber(0,0),"radius_m").appendField("m"),this.appendDummyInput().appendField("at speed").appendField(new Blockly.FieldNumber(.2),"velocity").appendField("m/s"),this.appendDummyInput().appendField("for").appendField(new Blockly.FieldAngle(90),"angle_degrees").appendField("degrees,"),this.appendDummyInput().appendField(new Blockly.FieldDropdown([["counterclockwise","ccw"],["clockwise","cw"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("radius_m"),vt=ft.getFieldValue("velocity"),St=ft.getFieldValue("angle_degrees"),Et=ft.getFieldValue("direction"),Ct="circle("+dt+","+vt+","+St+",'"+Et+"')";return Ct},javascriptGenerator:(ft,lt)=>{const dt=ft.getFieldValue("radius_m"),vt=ft.getFieldValue("velocity"),St=ft.getFieldValue("angle_degrees"),Et=ft.getFieldValue("direction");var Ct=!0;return Et=="ccw"&&(Ct=!1),`duration += simulator.move_circle_vel(group_state, ${dt}, ${vt}, ${St}, ${Ct});`}},block_start_linear_motion={name:"start_linear_motion",block:{init:function(){this.appendDummyInput().appendField("Start linear motion with speeds in"),this.appendDummyInput().appendField("x direction:").appendField(new Blockly.FieldNumber(0),"velocity_x_m").appendField("m/s"),this.appendDummyInput().appendField("y direction:").appendField(new Blockly.FieldNumber(0),"velocity_y_m").appendField("m/s"),this.appendDummyInput().appendField("z direction:").appendField(new Blockly.FieldNumber(0),"velocity_z_m").appendField("m/s"),this.appendDummyInput().appendField("yaw:").appendField(new Blockly.FieldAngle(90),"rate_yaw").appendField("/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("velocity_x_m"),vt=ft.getFieldValue("velocity_y_m"),St=ft.getFieldValue("velocity_z_m"),Et=ft.getFieldValue("rate_yaw"),Ct="start_linear_motion("+dt+","+vt+","+St+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_set_default_height={name:"set_default_height",block:{init:function(){this.appendDummyInput().appendField("set default height to").appendField(new Blockly.FieldNumber(0,0),"default_height").appendField("meters"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("default_height"),vt="set_default_height("+dt+`)
`;return vt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_stop={name:"stop",block:{init:function(){this.appendDummyInput().appendField("stop and hover"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(0),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>`stop_and_hover(cf)
`,javascriptGenerator:(ft,lt)=>`duration += simulator.stop_and_hover(group_state);
`},block_go_to={name:"go_to",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),St=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("duration"),Ct="goto_duration(cf, "+dt+","+vt+","+St+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),St=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("duration");return`duration += simulator.go_to_xyz_duration(group_state, ${dt}, ${vt}, ${St}, ${Et});
`}},block_go_to_speed={name:"go_to_speed",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),St=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("speed"),Ct="go_to(cf, "+dt+","+vt+","+St+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),St=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("speed");return`duration += simulator.go_to_xyz_speed(group_state, ${dt}, ${vt}, ${St}, ${Et});
`}},block_land={name:"land",block:{init:function(){this.appendDummyInput().appendField("land at height").appendField(new Blockly.FieldNumber(0),"height").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration"),St="land(cf, "+dt+","+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration");return`duration += simulator.land(group_state, ${dt}, ${vt});
`}},block_move_angles={name:"move_angles",block:{init:function(){this.appendDummyInput().appendField("move towards"),this.appendDummyInput().appendField("horizontal angle").appendField(new Blockly.FieldAngle(90),"horizontal angle"),this.appendDummyInput().appendField("vertical angle").appendField(new Blockly.FieldAngle(90),"vertical angle"),this.appendDummyInput().appendField("distance").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("horizontal angle"),vt=ft.getFieldValue("vertical angle"),St=ft.getFieldValue("distance"),Et=ft.getFieldValue("speed"),Ct="move_by_angles("+dt+","+vt+","+St+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("horizontal angle"),vt=ft.getFieldValue("vertical angle"),St=ft.getFieldValue("distance"),Et=ft.getFieldValue("speed");return`duration += simulator.move_by_angles(group_state, ${dt}, ${vt}, ${St}, ${Et})`}},block_move_xyz={name:"move_xyz",block:{init:function(){this.appendDummyInput().appendField("move X").appendField(new Blockly.FieldNumber(0),"x").appendField("meters"),this.appendDummyInput().appendField("move Y").appendField(new Blockly.FieldNumber(0),"y").appendField("meters"),this.appendDummyInput().appendField("move Z").appendField(new Blockly.FieldNumber(0),"z").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x"),vt=ft.getFieldValue("y"),St=ft.getFieldValue("z"),Et=ft.getFieldValue("speed"),Ct="goto_rel_at_speed(cf, "+dt+","+vt+","+St+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x"),vt=ft.getFieldValue("y"),St=ft.getFieldValue("z"),Et=ft.getFieldValue("speed");return`duration += simulator.move_speed(group_state, ${dt}, ${vt}, ${St}, ${Et});
`}},block_move={name:"move",block:{init:function(){this.appendDummyInput().appendField("move").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters for").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("distance"),St=ft.getFieldValue("duration"),Et="move_direction(cf, "+dt+","+vt+","+St+`)
`;return Et},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("distance"),St=ft.getFieldValue("duration");return`duration += simulator.move_direction(group_state, ${dt}, ${vt}, ${St});
`}},block_takeoff={name:"takeoff",block:{init:function(){this.appendDummyInput().appendField("takeoff to").appendField(new Blockly.FieldNumber(0),"height").appendField("meters over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration"),St="takeoff(cf, "+dt+" ,"+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration");return`duration += simulator.takeoff(group_state, ${dt}, ${vt});
`}},block_turn={name:"turn",block:{init:function(){this.appendDummyInput().appendField("turn").appendField(new Blockly.FieldDropdown([["right",`
									right
								`],["left","left"]]),"direction").appendField(new Blockly.FieldAngle(0),"degrees").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("degrees"),St=ft.getFieldValue("rate"),Et="turn("+dt+","+vt+","+St+`)
`;return Et},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_circle={name:"start_circle",block:{init:function(){this.appendDummyInput().appendField("start cricling").appendField(new Blockly.FieldNumber(0),"radius").appendField("meter radius").appendField(new Blockly.FieldDropdown([["right","circle_right"],["left","circle_left"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("radius"),vt=ft.getFieldValue("direction"),St="start_circle("+dt+","+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_move={name:"start_move",block:{init:function(){this.appendDummyInput().appendField("start moving").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("speed"),St="start_move("+dt+","+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_turn={name:"start_turn",block:{init:function(){this.appendDummyInput().appendField("start turning").appendField(new Blockly.FieldDropdown([["right","right"],["left","left"]]),"direction").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("rate"),St="start_turn("+dt+","+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_get_a_position={name:"get_a_position",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["default","default"],["current","current"]]),"which").appendField(new Blockly.FieldDropdown([["x","x position"],["y","y position"],["z","z position"]]),"NAME").appendField("position"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("which"),vt=ft.getFieldValue("NAME"),St="get_a_position("+dt+","+vt+")";return St},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy()"},block_set_default_speed={name:"set_default_speed",block:{init:function(){this.appendDummyInput().appendField("set default speed to").appendField(new Blockly.FieldNumber(0),"speed"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("speed"),vt="set_default_speed("+dt+`)
`;return vt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_set_default_xy={name:"set_default_xy",block:{init:function(){this.appendDummyInput().appendField("set default").appendField(new Blockly.FieldDropdown([["x","x"],["y","y"]]),"xy").appendField("to").appendField(new Blockly.FieldNumber(0),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("xy"),vt=ft.getFieldValue("NAME"),St="set_default_xy("+dt+","+vt+`)
`;return St},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"};var coreBrowserExports=requireCoreBrowser();/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var n$7,u$8,t$5,i$7,r$9,f$6={},e$2=[],c$7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function s$4(ft,lt){for(var dt in lt)ft[dt]=lt[dt];return ft}function a$4(ft){var lt=ft.parentNode;lt&&lt.removeChild(ft)}function h$8(ft,lt,dt){var vt,St,Et,Ct,At=arguments;if(lt=s$4({},lt),arguments.length>3)for(dt=[dt],vt=3;vt<arguments.length;vt++)dt.push(At[vt]);if(dt!=null&&(lt.children=dt),ft!=null&&ft.defaultProps!=null)for(St in ft.defaultProps)lt[St]===void 0&&(lt[St]=ft.defaultProps[St]);return Ct=lt.key,(Et=lt.ref)!=null&&delete lt.ref,Ct!=null&&delete lt.key,v$6(ft,lt,Ct,Et)}function v$6(ft,lt,dt,vt){var St={type:ft,props:lt,key:dt,ref:vt,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return n$7.vnode&&n$7.vnode(St),St}function d$7(ft){return ft.children}function y$6(ft){if(ft==null||typeof ft=="boolean")return null;if(typeof ft=="string"||typeof ft=="number")return v$6(null,ft,null,null);if(ft.__e!=null||ft.__c!=null){var lt=v$6(ft.type,ft.props,ft.key,null);return lt.__e=ft.__e,lt}return ft}function m$5(ft,lt){this.props=ft,this.context=lt}function w$6(ft,lt){if(lt==null)return ft.__p?w$6(ft.__p,ft.__p.__k.indexOf(ft)+1):null;for(var dt;lt<ft.__k.length;lt++)if((dt=ft.__k[lt])!=null&&dt.__e!=null)return dt.__e;return typeof ft.type=="function"?w$6(ft):null}function g$4(ft){var lt,dt;if((ft=ft.__p)!=null&&ft.__c!=null){for(ft.__e=ft.__c.base=null,lt=0;lt<ft.__k.length;lt++)if((dt=ft.__k[lt])!=null&&dt.__e!=null){ft.__e=ft.__c.base=dt.__e;break}return g$4(ft)}}function k$4(ft){(!ft.__d&&(ft.__d=!0)&&u$8.push(ft)===1||i$7!==n$7.debounceRendering)&&(i$7=n$7.debounceRendering,(n$7.debounceRendering||t$5)(_$2))}function _$2(){var ft,lt,dt,vt,St,Et,Ct,At;for(u$8.sort(function(Rt,Dt){return Dt.__v.__b-Rt.__v.__b});ft=u$8.pop();)ft.__d&&(dt=void 0,vt=void 0,Et=(St=(lt=ft).__v).__e,Ct=lt.__P,At=lt.u,lt.u=!1,Ct&&(dt=[],vt=$(Ct,St,s$4({},St),lt.__n,Ct.ownerSVGElement!==void 0,null,dt,At,Et??w$6(St)),j$3(dt,St),vt!=Et&&g$4(St)))}function b$6(ft,lt,dt,vt,St,Et,Ct,At,Rt){var Dt,Nt,Ft,Ut,Wt,Zt,Kt,cn=dt&&dt.__k||e$2,hn=cn.length;if(At==f$6&&(At=Et!=null?Et[0]:hn?w$6(dt,0):null),Dt=0,lt.__k=x$5(lt.__k,function(dn){if(dn!=null){if(dn.__p=lt,dn.__b=lt.__b+1,(Ft=cn[Dt])===null||Ft&&dn.key==Ft.key&&dn.type===Ft.type)cn[Dt]=void 0;else for(Nt=0;Nt<hn;Nt++){if((Ft=cn[Nt])&&dn.key==Ft.key&&dn.type===Ft.type){cn[Nt]=void 0;break}Ft=null}if(Ut=$(ft,dn,Ft=Ft||f$6,vt,St,Et,Ct,null,At,Rt),(Nt=dn.ref)&&Ft.ref!=Nt&&(Kt||(Kt=[])).push(Nt,dn.__c||Ut,dn),Ut!=null){if(Zt==null&&(Zt=Ut),dn.l!=null)Ut=dn.l,dn.l=null;else if(Et==Ft||Ut!=At||Ut.parentNode==null){e:if(At==null||At.parentNode!==ft)ft.appendChild(Ut);else{for(Wt=At,Nt=0;(Wt=Wt.nextSibling)&&Nt<hn;Nt+=2)if(Wt==Ut)break e;ft.insertBefore(Ut,At)}lt.type=="option"&&(ft.value="")}At=Ut.nextSibling,typeof lt.type=="function"&&(lt.l=Ut)}}return Dt++,dn}),lt.__e=Zt,Et!=null&&typeof lt.type!="function")for(Dt=Et.length;Dt--;)Et[Dt]!=null&&a$4(Et[Dt]);for(Dt=hn;Dt--;)cn[Dt]!=null&&D$5(cn[Dt],cn[Dt]);if(Kt)for(Dt=0;Dt<Kt.length;Dt++)A$3(Kt[Dt],Kt[++Dt],Kt[++Dt])}function x$5(ft,lt,dt){if(dt==null&&(dt=[]),ft==null||typeof ft=="boolean")lt&&dt.push(lt(null));else if(Array.isArray(ft))for(var vt=0;vt<ft.length;vt++)x$5(ft[vt],lt,dt);else dt.push(lt?lt(y$6(ft)):ft);return dt}function C$3(ft,lt,dt,vt,St){var Et;for(Et in dt)Et in lt||N$2(ft,Et,null,dt[Et],vt);for(Et in lt)St&&typeof lt[Et]!="function"||Et==="value"||Et==="checked"||dt[Et]===lt[Et]||N$2(ft,Et,lt[Et],dt[Et],vt)}function P$3(ft,lt,dt){lt[0]==="-"?ft.setProperty(lt,dt):ft[lt]=typeof dt=="number"&&c$7.test(lt)===!1?dt+"px":dt??""}function N$2(ft,lt,dt,vt,St){var Et,Ct,At,Rt,Dt;if(!((lt=St?lt==="className"?"class":lt:lt==="class"?"className":lt)==="key"||lt==="children"))if(lt==="style")if(Et=ft.style,typeof dt=="string")Et.cssText=dt;else{if(typeof vt=="string"&&(Et.cssText="",vt=null),vt)for(Ct in vt)dt&&Ct in dt||P$3(Et,Ct,"");if(dt)for(At in dt)vt&&dt[At]===vt[At]||P$3(Et,At,dt[At])}else lt[0]==="o"&&lt[1]==="n"?(Rt=lt!==(lt=lt.replace(/Capture$/,"")),Dt=lt.toLowerCase(),lt=(Dt in ft?Dt:lt).slice(2),dt?(vt||ft.addEventListener(lt,T$2,Rt),(ft.t||(ft.t={}))[lt]=dt):ft.removeEventListener(lt,T$2,Rt)):lt!=="list"&&lt!=="tagName"&&lt!=="form"&&!St&&lt in ft?ft[lt]=dt??"":typeof dt!="function"&&lt!=="dangerouslySetInnerHTML"&&(lt!==(lt=lt.replace(/^xlink:?/,""))?dt==null||dt===!1?ft.removeAttributeNS("http://www.w3.org/1999/xlink",lt.toLowerCase()):ft.setAttributeNS("http://www.w3.org/1999/xlink",lt.toLowerCase(),dt):dt==null||dt===!1?ft.removeAttribute(lt):ft.setAttribute(lt,dt))}function T$2(ft){return this.t[ft.type](n$7.event?n$7.event(ft):ft)}function $(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt){var Nt,Ft,Ut,Wt,Zt,Kt,cn,hn,dn,pn,gn=lt.type;if(lt.constructor!==void 0)return null;(Nt=n$7.__b)&&Nt(lt);try{e:if(typeof gn=="function"){if(hn=lt.props,dn=(Nt=gn.contextType)&&vt[Nt.__c],pn=Nt?dn?dn.props.value:Nt.__p:vt,dt.__c?cn=(Ft=lt.__c=dt.__c).__p=Ft.__E:("prototype"in gn&&gn.prototype.render?lt.__c=Ft=new gn(hn,pn):(lt.__c=Ft=new m$5(hn,pn),Ft.constructor=gn,Ft.render=H$4),dn&&dn.sub(Ft),Ft.props=hn,Ft.state||(Ft.state={}),Ft.context=pn,Ft.__n=vt,Ut=Ft.__d=!0,Ft.__h=[]),Ft.__s==null&&(Ft.__s=Ft.state),gn.getDerivedStateFromProps!=null&&s$4(Ft.__s==Ft.state?Ft.__s=s$4({},Ft.__s):Ft.__s,gn.getDerivedStateFromProps(hn,Ft.__s)),Ut)gn.getDerivedStateFromProps==null&&Ft.componentWillMount!=null&&Ft.componentWillMount(),Ft.componentDidMount!=null&&Ct.push(Ft);else{if(gn.getDerivedStateFromProps==null&&At==null&&Ft.componentWillReceiveProps!=null&&Ft.componentWillReceiveProps(hn,pn),!At&&Ft.shouldComponentUpdate!=null&&Ft.shouldComponentUpdate(hn,Ft.__s,pn)===!1){for(Ft.props=hn,Ft.state=Ft.__s,Ft.__d=!1,Ft.__v=lt,lt.__e=Rt!=null?Rt!==dt.__e?Rt:dt.__e:null,lt.__k=dt.__k,Nt=0;Nt<lt.__k.length;Nt++)lt.__k[Nt]&&(lt.__k[Nt].__p=lt);break e}Ft.componentWillUpdate!=null&&Ft.componentWillUpdate(hn,Ft.__s,pn)}for(Wt=Ft.props,Zt=Ft.state,Ft.context=pn,Ft.props=hn,Ft.state=Ft.__s,(Nt=n$7.__r)&&Nt(lt),Ft.__d=!1,Ft.__v=lt,Ft.__P=ft,Nt=Ft.render(Ft.props,Ft.state,Ft.context),lt.__k=x$5(Nt!=null&&Nt.type==d$7&&Nt.key==null?Nt.props.children:Nt),Ft.getChildContext!=null&&(vt=s$4(s$4({},vt),Ft.getChildContext())),Ut||Ft.getSnapshotBeforeUpdate==null||(Kt=Ft.getSnapshotBeforeUpdate(Wt,Zt)),b$6(ft,lt,dt,vt,St,Et,Ct,Rt,Dt),Ft.base=lt.__e;Nt=Ft.__h.pop();)Ft.__s&&(Ft.state=Ft.__s),Nt.call(Ft);Ut||Wt==null||Ft.componentDidUpdate==null||Ft.componentDidUpdate(Wt,Zt,Kt),cn&&(Ft.__E=Ft.__p=null)}else lt.__e=z$4(dt.__e,lt,dt,vt,St,Et,Ct,Dt);(Nt=n$7.diffed)&&Nt(lt)}catch(vn){n$7.__e(vn,lt,dt)}return lt.__e}function j$3(ft,lt){for(var dt;dt=ft.pop();)try{dt.componentDidMount()}catch(vt){n$7.__e(vt,dt.__v)}n$7.__c&&n$7.__c(lt)}function z$4(ft,lt,dt,vt,St,Et,Ct,At){var Rt,Dt,Nt,Ft,Ut=dt.props,Wt=lt.props;if(St=lt.type==="svg"||St,ft==null&&Et!=null){for(Rt=0;Rt<Et.length;Rt++)if((Dt=Et[Rt])!=null&&(lt.type===null?Dt.nodeType===3:Dt.localName===lt.type)){ft=Dt,Et[Rt]=null;break}}if(ft==null){if(lt.type===null)return document.createTextNode(Wt);ft=St?document.createElementNS("http://www.w3.org/2000/svg",lt.type):document.createElement(lt.type),Et=null}return lt.type===null?Ut!==Wt&&(Et!=null&&(Et[Et.indexOf(ft)]=null),ft.data=Wt):lt!==dt&&(Et!=null&&(Et=e$2.slice.call(ft.childNodes)),Nt=(Ut=dt.props||f$6).dangerouslySetInnerHTML,Ft=Wt.dangerouslySetInnerHTML,At||(Ft||Nt)&&(Ft&&Nt&&Ft.__html==Nt.__html||(ft.innerHTML=Ft&&Ft.__html||"")),C$3(ft,Wt,Ut,St,At),lt.__k=lt.props.children,Ft||b$6(ft,lt,dt,vt,lt.type!=="foreignObject"&&St,Et,Ct,f$6,At),At||("value"in Wt&&Wt.value!==void 0&&Wt.value!==ft.value&&(ft.value=Wt.value==null?"":Wt.value),"checked"in Wt&&Wt.checked!==void 0&&Wt.checked!==ft.checked&&(ft.checked=Wt.checked))),ft}function A$3(ft,lt,dt){try{typeof ft=="function"?ft(lt):ft.current=lt}catch(vt){n$7.__e(vt,dt)}}function D$5(ft,lt,dt){var vt,St,Et;if(n$7.unmount&&n$7.unmount(ft),(vt=ft.ref)&&A$3(vt,null,lt),dt||typeof ft.type=="function"||(dt=(St=ft.__e)!=null),ft.__e=ft.l=null,(vt=ft.__c)!=null){if(vt.componentWillUnmount)try{vt.componentWillUnmount()}catch(Ct){n$7.__e(Ct,lt)}vt.base=vt.__P=null}if(vt=ft.__k)for(Et=0;Et<vt.length;Et++)vt[Et]&&D$5(vt[Et],lt,dt);St!=null&&a$4(St)}function H$4(ft,lt,dt){return this.constructor(ft,dt)}function I$3(ft,lt,dt){var vt,St,Et;n$7.__p&&n$7.__p(ft,lt),St=(vt=dt===r$9)?null:dt&&dt.__k||lt.__k,ft=h$8(d$7,null,[ft]),Et=[],$(lt,vt?lt.__k=ft:(dt||lt).__k=ft,St||f$6,f$6,lt.ownerSVGElement!==void 0,dt&&!vt?[dt]:St?null:e$2.slice.call(lt.childNodes),Et,!1,dt||f$6,vt),j$3(Et,ft)}n$7={},m$5.prototype.setState=function(ft,lt){var dt=this.__s!==this.state&&this.__s||(this.__s=s$4({},this.state));(typeof ft!="function"||(ft=ft(dt,this.props)))&&s$4(dt,ft),ft!=null&&this.__v&&(this.u=!1,lt&&this.__h.push(lt),k$4(this))},m$5.prototype.forceUpdate=function(ft){this.__v&&(ft&&this.__h.push(ft),this.u=!0,k$4(this))},m$5.prototype.render=d$7,u$8=[],t$5=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i$7=n$7.debounceRendering,n$7.__e=function(ft,lt,dt){for(var vt;lt=lt.__p;)if((vt=lt.__c)&&!vt.__p)try{if(vt.constructor&&vt.constructor.getDerivedStateFromError!=null)vt.setState(vt.constructor.getDerivedStateFromError(ft));else{if(vt.componentDidCatch==null)continue;vt.componentDidCatch(ft)}return k$4(vt.__E=vt)}catch(St){ft=St}throw ft},r$9=f$6;function _defineProperties$1(ft,lt){for(var dt=0;dt<lt.length;dt++){var vt=lt[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(ft,vt.key,vt)}}function _createClass$1(ft,lt,dt){return lt&&_defineProperties$1(ft.prototype,lt),dt&&_defineProperties$1(ft,dt),ft}function _extends$1(){return _extends$1=Object.assign||function(ft){for(var lt=arguments,dt=1;dt<arguments.length;dt++){var vt=lt[dt];for(var St in vt)Object.prototype.hasOwnProperty.call(vt,St)&&(ft[St]=vt[St])}return ft},_extends$1.apply(this,arguments)}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH_3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH_4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",REGEX_FUNCTIONAL_RGB=new RegExp("rgb"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_RGBA=new RegExp("rgba"+PERMISSIVE_MATCH_4),REGEX_FUNCTIONAL_HSL=new RegExp("hsl"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_HSLA=new RegExp("hsla"+PERMISSIVE_MATCH_4),HEX_START="^(?:#?|0x?)",HEX_INT_SINGLE="([0-9a-fA-F]{1})",HEX_INT_DOUBLE="([0-9a-fA-F]{2})",REGEX_HEX_3=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_4=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_6=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),REGEX_HEX_8=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),KELVIN_MIN=2e3,KELVIN_MAX=4e4,log$1=Math.log,round=Math.round,floor=Math.floor;function clamp$2(ft,lt,dt){return Math.min(Math.max(ft,lt),dt)}function parseUnit(ft,lt){var dt=ft.indexOf("%")>-1,vt=parseFloat(ft);return dt?lt/100*vt:vt}function parseHexInt(ft){return parseInt(ft,16)}function intToHex(ft){return ft.toString(16).padStart(2,"0")}var IroColor=function(){function ft(dt,vt){this.$={h:0,s:0,v:0,a:1},dt&&this.set(dt),this.onChange=vt,this.initialValue=_extends$1({},this.$)}var lt=ft.prototype;return lt.set=function(vt){if(typeof vt=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(vt)?this.hexString=vt:/^rgba?/.test(vt)?this.rgbString=vt:/^hsla?/.test(vt)&&(this.hslString=vt);else if(typeof vt=="object")vt instanceof ft?this.hsva=vt.hsva:"r"in vt&&"g"in vt&&"b"in vt?this.rgb=vt:"h"in vt&&"s"in vt&&"v"in vt?this.hsv=vt:"h"in vt&&"s"in vt&&"l"in vt?this.hsl=vt:"kelvin"in vt&&(this.kelvin=vt.kelvin);else throw new Error("Invalid color value")},lt.setChannel=function(vt,St,Et){var Ct;this[vt]=_extends$1({},this[vt],(Ct={},Ct[St]=Et,Ct))},lt.reset=function(){this.hsva=this.initialValue},lt.clone=function(){return new ft(this)},lt.unbind=function(){this.onChange=void 0},ft.hsvToRgb=function(vt){var St=vt.h/60,Et=vt.s/100,Ct=vt.v/100,At=floor(St),Rt=St-At,Dt=Ct*(1-Et),Nt=Ct*(1-Rt*Et),Ft=Ct*(1-(1-Rt)*Et),Ut=At%6,Wt=[Ct,Nt,Dt,Dt,Ft,Ct][Ut],Zt=[Ft,Ct,Ct,Nt,Dt,Dt][Ut],Kt=[Dt,Dt,Ft,Ct,Ct,Nt][Ut];return{r:clamp$2(Wt*255,0,255),g:clamp$2(Zt*255,0,255),b:clamp$2(Kt*255,0,255)}},ft.rgbToHsv=function(vt){var St=vt.r/255,Et=vt.g/255,Ct=vt.b/255,At=Math.max(St,Et,Ct),Rt=Math.min(St,Et,Ct),Dt=At-Rt,Nt=0,Ft=At,Ut=At===0?0:Dt/At;switch(At){case Rt:Nt=0;break;case St:Nt=(Et-Ct)/Dt+(Et<Ct?6:0);break;case Et:Nt=(Ct-St)/Dt+2;break;case Ct:Nt=(St-Et)/Dt+4;break}return{h:Nt*60%360,s:clamp$2(Ut*100,0,100),v:clamp$2(Ft*100,0,100)}},ft.hsvToHsl=function(vt){var St=vt.s/100,Et=vt.v/100,Ct=(2-St)*Et,At=Ct<=1?Ct:2-Ct,Rt=At<1e-9?0:St*Et/At;return{h:vt.h,s:clamp$2(Rt*100,0,100),l:clamp$2(Ct*50,0,100)}},ft.hslToHsv=function(vt){var St=vt.l*2,Et=vt.s*(St<=100?St:200-St)/100,Ct=St+Et<1e-9?0:2*Et/(St+Et);return{h:vt.h,s:clamp$2(Ct*100,0,100),v:clamp$2((St+Et)/2,0,100)}},ft.kelvinToRgb=function(vt){var St=vt/100,Et,Ct,At;return St<66?(Et=255,Ct=-155.25485562709179-.44596950469579133*(Ct=St-2)+104.49216199393888*log$1(Ct),At=St<20?0:-254.76935184120902+.8274096064007395*(At=St-10)+115.67994401066147*log$1(At)):(Et=351.97690566805693+.114206453784165*(Et=St-55)-40.25366309332127*log$1(Et),Ct=325.4494125711974+.07943456536662342*(Ct=St-50)-28.0852963507957*log$1(Ct),At=255),{r:clamp$2(floor(Et),0,255),g:clamp$2(floor(Ct),0,255),b:clamp$2(floor(At),0,255)}},ft.rgbToKelvin=function(vt){for(var St=vt.r,Et=vt.b,Ct=.4,At=KELVIN_MIN,Rt=KELVIN_MAX,Dt;Rt-At>Ct;){Dt=(Rt+At)*.5;var Nt=ft.kelvinToRgb(Dt);Nt.b/Nt.r>=Et/St?Rt=Dt:At=Dt}return Dt},_createClass$1(ft,[{key:"hsv",get:function(){var vt=this.$;return{h:vt.h,s:vt.s,v:vt.v}},set:function(vt){var St=this.$;if(vt=_extends$1({},St,vt),this.onChange){var Et={h:!1,v:!1,s:!1,a:!1};for(var Ct in St)Et[Ct]=vt[Ct]!=St[Ct];this.$=vt,(Et.h||Et.s||Et.v||Et.a)&&this.onChange(this,Et)}else this.$=vt}},{key:"hsva",get:function(){return _extends$1({},this.$)},set:function(vt){this.hsv=vt}},{key:"hue",get:function(){return this.$.h},set:function(vt){this.hsv={h:vt}}},{key:"saturation",get:function(){return this.$.s},set:function(vt){this.hsv={s:vt}}},{key:"value",get:function(){return this.$.v},set:function(vt){this.hsv={v:vt}}},{key:"alpha",get:function(){return this.$.a},set:function(vt){this.hsv=_extends$1({},this.hsv,{a:vt})}},{key:"kelvin",get:function(){return ft.rgbToKelvin(this.rgb)},set:function(vt){this.rgb=ft.kelvinToRgb(vt)}},{key:"red",get:function(){var vt=this.rgb;return vt.r},set:function(vt){this.rgb=_extends$1({},this.rgb,{r:vt})}},{key:"green",get:function(){var vt=this.rgb;return vt.g},set:function(vt){this.rgb=_extends$1({},this.rgb,{g:vt})}},{key:"blue",get:function(){var vt=this.rgb;return vt.b},set:function(vt){this.rgb=_extends$1({},this.rgb,{b:vt})}},{key:"rgb",get:function(){var vt=ft.hsvToRgb(this.$),St=vt.r,Et=vt.g,Ct=vt.b;return{r:round(St),g:round(Et),b:round(Ct)}},set:function(vt){this.hsv=_extends$1({},ft.rgbToHsv(vt),{a:vt.a===void 0?1:vt.a})}},{key:"rgba",get:function(){return _extends$1({},this.rgb,{a:this.alpha})},set:function(vt){this.rgb=vt}},{key:"hsl",get:function(){var vt=ft.hsvToHsl(this.$),St=vt.h,Et=vt.s,Ct=vt.l;return{h:round(St),s:round(Et),l:round(Ct)}},set:function(vt){this.hsv=_extends$1({},ft.hslToHsv(vt),{a:vt.a===void 0?1:vt.a})}},{key:"hsla",get:function(){return _extends$1({},this.hsl,{a:this.alpha})},set:function(vt){this.hsl=vt}},{key:"rgbString",get:function(){var vt=this.rgb;return"rgb("+vt.r+", "+vt.g+", "+vt.b+")"},set:function(vt){var St,Et,Ct,At,Rt=1;if((St=REGEX_FUNCTIONAL_RGB.exec(vt))?(Et=parseUnit(St[1],255),Ct=parseUnit(St[2],255),At=parseUnit(St[3],255)):(St=REGEX_FUNCTIONAL_RGBA.exec(vt))&&(Et=parseUnit(St[1],255),Ct=parseUnit(St[2],255),At=parseUnit(St[3],255),Rt=parseUnit(St[4],1)),St)this.rgb={r:Et,g:Ct,b:At,a:Rt};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var vt=this.rgba;return"rgba("+vt.r+", "+vt.g+", "+vt.b+", "+vt.a+")"},set:function(vt){this.rgbString=vt}},{key:"hexString",get:function(){var vt=this.rgb;return"#"+intToHex(vt.r)+intToHex(vt.g)+intToHex(vt.b)},set:function(vt){var St,Et,Ct,At,Rt=255;if((St=REGEX_HEX_3.exec(vt))?(Et=parseHexInt(St[1])*17,Ct=parseHexInt(St[2])*17,At=parseHexInt(St[3])*17):(St=REGEX_HEX_4.exec(vt))?(Et=parseHexInt(St[1])*17,Ct=parseHexInt(St[2])*17,At=parseHexInt(St[3])*17,Rt=parseHexInt(St[4])*17):(St=REGEX_HEX_6.exec(vt))?(Et=parseHexInt(St[1]),Ct=parseHexInt(St[2]),At=parseHexInt(St[3])):(St=REGEX_HEX_8.exec(vt))&&(Et=parseHexInt(St[1]),Ct=parseHexInt(St[2]),At=parseHexInt(St[3]),Rt=parseHexInt(St[4])),St)this.rgb={r:Et,g:Ct,b:At,a:Rt/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var vt=this.rgba;return"#"+intToHex(vt.r)+intToHex(vt.g)+intToHex(vt.b)+intToHex(floor(vt.a*255))},set:function(vt){this.hexString=vt}},{key:"hslString",get:function(){var vt=this.hsl;return"hsl("+vt.h+", "+vt.s+"%, "+vt.l+"%)"},set:function(vt){var St,Et,Ct,At,Rt=1;if((St=REGEX_FUNCTIONAL_HSL.exec(vt))?(Et=parseUnit(St[1],360),Ct=parseUnit(St[2],100),At=parseUnit(St[3],100)):(St=REGEX_FUNCTIONAL_HSLA.exec(vt))&&(Et=parseUnit(St[1],360),Ct=parseUnit(St[2],100),At=parseUnit(St[3],100),Rt=parseUnit(St[4],1)),St)this.hsl={h:Et,s:Ct,l:At,a:Rt};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var vt=this.hsla;return"hsla("+vt.h+", "+vt.s+"%, "+vt.l+"%, "+vt.a+")"},set:function(vt){this.hslString=vt}}]),ft}(),sliderDefaultOptions={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function getSliderDimensions(ft){var lt,dt=ft.width,vt=ft.sliderSize,St=ft.borderWidth,Et=ft.handleRadius,Ct=ft.padding,At=ft.sliderShape,Rt=ft.layoutDirection==="horizontal";return vt=(lt=vt)!=null?lt:Ct*2+Et*2,At==="circle"?{handleStart:ft.padding+ft.handleRadius,handleRange:dt-Ct*2-Et*2,width:dt,height:dt,cx:dt/2,cy:dt/2,radius:dt/2-St/2}:{handleStart:vt/2,handleRange:dt-vt,radius:vt/2,x:0,y:0,width:Rt?vt:dt,height:Rt?dt:vt}}function getCurrentSliderValue(ft,lt){var dt=lt.hsva,vt=lt.rgb;switch(ft.sliderType){case"red":return vt.r/2.55;case"green":return vt.g/2.55;case"blue":return vt.b/2.55;case"alpha":return dt.a*100;case"kelvin":var St=ft.minTemperature,Et=ft.maxTemperature,Ct=Et-St,At=(lt.kelvin-St)/Ct*100;return Math.max(0,Math.min(At,100));case"hue":return dt.h/=3.6;case"saturation":return dt.s;case"value":default:return dt.v}}function getSliderValueFromInput(ft,lt,dt){var vt=getSliderDimensions(ft),St=vt.handleRange,Et=vt.handleStart,Ct;ft.layoutDirection==="horizontal"?Ct=-1*dt+St+Et:Ct=lt-Et,Ct=Math.max(Math.min(Ct,St),0);var At=Math.round(100/St*Ct);switch(ft.sliderType){case"kelvin":var Rt=ft.minTemperature,Dt=ft.maxTemperature,Nt=Dt-Rt;return Rt+Nt*(At/100);case"alpha":return At/100;case"hue":return At*3.6;case"red":case"blue":case"green":return At*2.55;default:return At}}function getSliderHandlePosition(ft,lt){var dt=getSliderDimensions(ft),vt=dt.width,St=dt.height,Et=dt.handleRange,Ct=dt.handleStart,At=ft.layoutDirection==="horizontal",Rt=getCurrentSliderValue(ft,lt),Dt=At?vt/2:St/2,Nt=Ct+Rt/100*Et;return At&&(Nt=-1*Nt+Et+Ct*2),{x:At?Dt:Nt,y:At?Nt:Dt}}function getSliderGradient(ft,lt){var dt=lt.hsv,vt=lt.rgb;switch(ft.sliderType){case"red":return[[0,"rgb(0,"+vt.g+","+vt.b+")"],[100,"rgb(255,"+vt.g+","+vt.b+")"]];case"green":return[[0,"rgb("+vt.r+",0,"+vt.b+")"],[100,"rgb("+vt.r+",255,"+vt.b+")"]];case"blue":return[[0,"rgb("+vt.r+","+vt.g+",0)"],[100,"rgb("+vt.r+","+vt.g+",255)"]];case"alpha":return[[0,"rgba("+vt.r+","+vt.g+","+vt.b+",0)"],[100,"rgb("+vt.r+","+vt.g+","+vt.b+")"]];case"kelvin":for(var St=[],Et=ft.minTemperature,Ct=ft.maxTemperature,At=8,Rt=Ct-Et,Dt=Et,Nt=0;Dt<Ct;Dt+=Rt/At,Nt+=1){var Ft=IroColor.kelvinToRgb(Dt),Ut=Ft.r,Wt=Ft.g,Zt=Ft.b;St.push([100/At*Nt,"rgb("+Ut+","+Wt+","+Zt+")"])}return St;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var Kt=IroColor.hsvToHsl({h:dt.h,s:0,v:dt.v}),cn=IroColor.hsvToHsl({h:dt.h,s:100,v:dt.v});return[[0,"hsl("+Kt.h+","+Kt.s+"%,"+Kt.l+"%)"],[100,"hsl("+cn.h+","+cn.s+"%,"+cn.l+"%)"]];case"value":default:var hn=IroColor.hsvToHsl({h:dt.h,s:dt.s,v:100});return[[0,"#000"],[100,"hsl("+hn.h+","+hn.s+"%,"+hn.l+"%)"]]}}var TAU=Math.PI*2,mod=function(lt,dt){return(lt%dt+dt)%dt},dist=function(lt,dt){return Math.sqrt(lt*lt+dt*dt)};function getHandleRange(ft){return ft.width/2-ft.padding-ft.handleRadius-ft.borderWidth}function isInputInsideWheel(ft,lt,dt){var vt=getWheelDimensions(ft),St=vt.cx,Et=vt.cy,Ct=ft.width/2;return dist(St-lt,Et-dt)<Ct}function getWheelDimensions(ft){var lt=ft.width/2;return{width:ft.width,radius:lt-ft.borderWidth,cx:lt,cy:lt}}function translateWheelAngle(ft,lt,dt){var vt=ft.wheelAngle,St=ft.wheelDirection;return dt&&St==="clockwise"?lt=vt+lt:St==="clockwise"?lt=360-vt+lt:dt&&St==="anticlockwise"?lt=vt+180-lt:St==="anticlockwise"&&(lt=vt-lt),mod(lt,360)}function getWheelHandlePosition(ft,lt){var dt=lt.hsv,vt=getWheelDimensions(ft),St=vt.cx,Et=vt.cy,Ct=getHandleRange(ft),At=(180+translateWheelAngle(ft,dt.h,!0))*(TAU/360),Rt=dt.s/100*Ct,Dt=ft.wheelDirection==="clockwise"?-1:1;return{x:St+Rt*Math.cos(At)*Dt,y:Et+Rt*Math.sin(At)*Dt}}function getWheelValueFromInput(ft,lt,dt){var vt=getWheelDimensions(ft),St=vt.cx,Et=vt.cy,Ct=getHandleRange(ft);lt=St-lt,dt=Et-dt;var At=translateWheelAngle(ft,Math.atan2(-dt,-lt)*(360/TAU)),Rt=Math.min(dist(lt,dt),Ct);return{h:Math.round(At),s:Math.round(100/Ct*Rt)}}function getBoxDimensions(ft){var lt=ft.width,dt=ft.boxHeight,vt=ft.padding,St=ft.handleRadius;return{width:lt,height:dt??lt,radius:vt+St}}function getBoxValueFromInput(ft,lt,dt){var vt=getBoxDimensions(ft),St=vt.width,Et=vt.height,Ct=vt.radius,At=Ct,Rt=St-Ct*2,Dt=Et-Ct*2,Nt=(lt-At)/Rt*100,Ft=(dt-At)/Dt*100;return{s:Math.max(0,Math.min(Nt,100)),v:Math.max(0,Math.min(100-Ft,100))}}function getBoxHandlePosition(ft,lt){var dt=getBoxDimensions(ft),vt=dt.width,St=dt.height,Et=dt.radius,Ct=lt.hsv,At=Et,Rt=vt-Et*2,Dt=St-Et*2;return{x:At+Ct.s/100*Rt,y:At+(Dt-Ct.v/100*Dt)}}function getBoxGradients(ft,lt){var dt=lt.hue;return[[[0,"#fff"],[100,"hsl("+dt+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var BASE_ELEMENTS;function resolveSvgUrl(ft){BASE_ELEMENTS||(BASE_ELEMENTS=document.getElementsByTagName("base"));var lt=window.navigator.userAgent,dt=/^((?!chrome|android).)*safari/i.test(lt),vt=/iPhone|iPod|iPad/i.test(lt),St=window.location;return(dt||vt)&&BASE_ELEMENTS.length>0?St.protocol+"//"+St.host+St.pathname+St.search+ft:ft}function getHandleAtPoint(ft,lt,dt,vt){for(var St=0;St<vt.length;St++){var Et=vt[St].x-lt,Ct=vt[St].y-dt,At=Math.sqrt(Et*Et+Ct*Ct);if(At<ft.handleRadius)return St}return null}function cssBorderStyles(ft){return{boxSizing:"border-box",border:ft.borderWidth+"px solid "+ft.borderColor}}function cssGradient(ft,lt,dt){return ft+"-gradient("+lt+", "+dt.map(function(vt){var St=vt[0],Et=vt[1];return Et+" "+St+"%"}).join(",")+")"}function cssValue(ft){return typeof ft=="string"?ft:ft+"px"}var iroColorPickerOptionDefaults={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},SECONDARY_EVENTS=["mousemove","touchmove","mouseup","touchend"],IroComponentWrapper=function(ft){function lt(dt){ft.call(this,dt),this.uid=(Math.random()+1).toString(36).substring(5)}return ft&&(lt.__proto__=ft),lt.prototype=Object.create(ft&&ft.prototype),lt.prototype.constructor=lt,lt.prototype.render=function(vt){var St=this.handleEvent.bind(this),Et={onMouseDown:St,ontouchstart:St},Ct=vt.layoutDirection==="horizontal",At=vt.margin===null?vt.sliderMargin:vt.margin,Rt={overflow:"visible",display:Ct?"inline-block":"block"};return vt.index>0&&(Rt[Ct?"marginLeft":"marginTop"]=At),h$8(d$7,null,vt.children(this.uid,Et,Rt))},lt.prototype.handleEvent=function(vt){var St=this,Et=this.props.onInput,Ct=this.base.getBoundingClientRect();vt.preventDefault();var At=vt.touches?vt.changedTouches[0]:vt,Rt=At.clientX-Ct.left,Dt=At.clientY-Ct.top;switch(vt.type){case"mousedown":case"touchstart":var Nt=Et(Rt,Dt,0);Nt!==!1&&SECONDARY_EVENTS.forEach(function(Ft){document.addEventListener(Ft,St,{passive:!1})});break;case"mousemove":case"touchmove":Et(Rt,Dt,1);break;case"mouseup":case"touchend":Et(Rt,Dt,2),SECONDARY_EVENTS.forEach(function(Ft){document.removeEventListener(Ft,St,{passive:!1})});break}},lt}(m$5);function IroHandle(ft){var lt=ft.r,dt=ft.url,vt=lt,St=lt;return h$8("svg",{className:"IroHandle IroHandle--"+ft.index+" "+(ft.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+cssValue(ft.x)+", "+cssValue(ft.y)+")",willChange:"transform",top:cssValue(-lt),left:cssValue(-lt),width:cssValue(lt*2),height:cssValue(lt*2),position:"absolute",overflow:"visible"}},dt&&h$8("use",Object.assign({xlinkHref:resolveSvgUrl(dt)},ft.props)),!dt&&h$8("circle",{cx:vt,cy:St,r:lt,fill:"none","stroke-width":2,stroke:"#000"}),!dt&&h$8("circle",{cx:vt,cy:St,r:lt-2,fill:ft.fill,"stroke-width":2,stroke:"#fff"}))}IroHandle.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function IroSlider(ft){var lt=ft.activeIndex,dt=lt!==void 0&&lt<ft.colors.length?ft.colors[lt]:ft.color,vt=getSliderDimensions(ft),St=vt.width,Et=vt.height,Ct=vt.radius,At=getSliderHandlePosition(ft,dt),Rt=getSliderGradient(ft,dt);function Dt(Nt,Ft,Ut){var Wt=getSliderValueFromInput(ft,Nt,Ft);ft.parent.inputActive=!0,dt[ft.sliderType]=Wt,ft.onInput(Ut,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Dt}),function(Nt,Ft,Ut){return h$8("div",Object.assign({},Ft,{className:"IroSlider",style:Object.assign({},{position:"relative",width:cssValue(St),height:cssValue(Et),borderRadius:cssValue(Ct),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},Ut)}),h$8("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:cssValue(Ct),background:cssGradient("linear",ft.layoutDirection==="horizontal"?"to top":"to right",Rt)},cssBorderStyles(ft))}),h$8(IroHandle,{isActive:!0,index:dt.index,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:At.x,y:At.y}))})}IroSlider.defaultProps=Object.assign({},sliderDefaultOptions);function IroBox(ft){var lt=getBoxDimensions(ft),dt=lt.width,vt=lt.height,St=lt.radius,Et=ft.colors,Ct=ft.parent,At=ft.activeIndex,Rt=At!==void 0&&At<ft.colors.length?ft.colors[At]:ft.color,Dt=getBoxGradients(ft,Rt),Nt=Et.map(function(Ut){return getBoxHandlePosition(ft,Ut)});function Ft(Ut,Wt,Zt){if(Zt===0){var Kt=getHandleAtPoint(ft,Ut,Wt,Nt);Kt!==null?Ct.setActiveColor(Kt):(Ct.inputActive=!0,Rt.hsv=getBoxValueFromInput(ft,Ut,Wt),ft.onInput(Zt,ft.id))}else Zt===1&&(Ct.inputActive=!0,Rt.hsv=getBoxValueFromInput(ft,Ut,Wt));ft.onInput(Zt,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Ft}),function(Ut,Wt,Zt){return h$8("div",Object.assign({},Wt,{className:"IroBox",style:Object.assign({},{width:cssValue(dt),height:cssValue(vt),position:"relative"},Zt)}),h$8("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:cssValue(St)},cssBorderStyles(ft),{background:cssGradient("linear","to bottom",Dt[1])+","+cssGradient("linear","to right",Dt[0])})}),Et.filter(function(Kt){return Kt!==Rt}).map(function(Kt){return h$8(IroHandle,{isActive:!1,index:Kt.index,fill:Kt.hslString,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Nt[Kt.index].x,y:Nt[Kt.index].y})}),h$8(IroHandle,{isActive:!0,index:Rt.index,fill:Rt.hslString,r:ft.activeHandleRadius||ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Nt[Rt.index].x,y:Nt[Rt.index].y}))})}var HUE_GRADIENT_CLOCKWISE="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",HUE_GRADIENT_ANTICLOCKWISE="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function IroWheel(ft){var lt=getWheelDimensions(ft),dt=lt.width,vt=ft.colors;ft.borderWidth;var St=ft.parent,Et=ft.color,Ct=Et.hsv,At=vt.map(function(Nt){return getWheelHandlePosition(ft,Nt)}),Rt={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function Dt(Nt,Ft,Ut){if(Ut===0){if(!isInputInsideWheel(ft,Nt,Ft))return!1;var Wt=getHandleAtPoint(ft,Nt,Ft,At);Wt!==null?St.setActiveColor(Wt):(St.inputActive=!0,Et.hsv=getWheelValueFromInput(ft,Nt,Ft),ft.onInput(Ut,ft.id))}else Ut===1&&(St.inputActive=!0,Et.hsv=getWheelValueFromInput(ft,Nt,Ft));ft.onInput(Ut,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Dt}),function(Nt,Ft,Ut){return h$8("div",Object.assign({},Ft,{className:"IroWheel",style:Object.assign({},{width:cssValue(dt),height:cssValue(dt),position:"relative"},Ut)}),h$8("div",{className:"IroWheelHue",style:Object.assign({},Rt,{transform:"rotateZ("+(ft.wheelAngle+90)+"deg)",background:ft.wheelDirection==="clockwise"?HUE_GRADIENT_CLOCKWISE:HUE_GRADIENT_ANTICLOCKWISE})}),h$8("div",{className:"IroWheelSaturation",style:Object.assign({},Rt,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),ft.wheelLightness&&h$8("div",{className:"IroWheelLightness",style:Object.assign({},Rt,{background:"#000",opacity:1-Ct.v/100})}),h$8("div",{className:"IroWheelBorder",style:Object.assign({},Rt,cssBorderStyles(ft))}),vt.filter(function(Wt){return Wt!==Et}).map(function(Wt){return h$8(IroHandle,{isActive:!1,index:Wt.index,fill:Wt.hslString,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:At[Wt.index].x,y:At[Wt.index].y})}),h$8(IroHandle,{isActive:!0,index:Et.index,fill:Et.hslString,r:ft.activeHandleRadius||ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:At[Et.index].x,y:At[Et.index].y}))})}function createWidget(ft){var lt=function(dt,vt){var St,Et=document.createElement("div");I$3(h$8(ft,Object.assign({},{ref:function(At){return St=At}},vt)),Et);function Ct(){var At=dt instanceof Element?dt:document.querySelector(dt);At.appendChild(St.base),St.onMount(At)}return document.readyState!=="loading"?Ct():document.addEventListener("DOMContentLoaded",Ct),St};return lt.prototype=ft.prototype,Object.assign(lt,ft),lt.__component=ft,lt}var IroColorPicker=function(ft){function lt(dt){var vt=this;ft.call(this,dt),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=dt.id;var St=dt.colors.length>0?dt.colors:[dt.color];St.forEach(function(Et){return vt.addColor(Et)}),this.setActiveColor(0),this.state=Object.assign({},dt,{color:this.color,colors:this.colors,layout:dt.layout})}return ft&&(lt.__proto__=ft),lt.prototype=Object.create(ft&&ft.prototype),lt.prototype.constructor=lt,lt.prototype.addColor=function(vt,St){St===void 0&&(St=this.colors.length);var Et=new IroColor(vt,this.onColorChange.bind(this));this.colors.splice(St,0,Et),this.colors.forEach(function(Ct,At){return Ct.index=At}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",Et)},lt.prototype.removeColor=function(vt){var St=this.colors.splice(vt,1)[0];St.unbind(),this.colors.forEach(function(Et,Ct){return Et.index=Ct}),this.state&&this.setState({colors:this.colors}),St.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",St)},lt.prototype.setActiveColor=function(vt){this.color=this.colors[vt],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},lt.prototype.setColors=function(vt,St){var Et=this;St===void 0&&(St=0),this.colors.forEach(function(Ct){return Ct.unbind()}),this.colors=[],vt.forEach(function(Ct){return Et.addColor(Ct)}),this.setActiveColor(St),this.emit("color:setAll",this.colors)},lt.prototype.on=function(vt,St){var Et=this,Ct=this.events;(Array.isArray(vt)?vt:[vt]).forEach(function(At){(Ct[At]||(Ct[At]=[])).push(St),Et.deferredEvents[At]&&(Et.deferredEvents[At].forEach(function(Rt){St.apply(null,Rt)}),Et.deferredEvents[At]=[])})},lt.prototype.off=function(vt,St){var Et=this;(Array.isArray(vt)?vt:[vt]).forEach(function(Ct){var At=Et.events[Ct];At&&At.splice(At.indexOf(St),1)})},lt.prototype.emit=function(vt){for(var St=this,Et=[],Ct=arguments.length-1;Ct-- >0;)Et[Ct]=arguments[Ct+1];var At=this.activeEvents,Rt=At.hasOwnProperty(vt)?At[vt]:!1;if(!Rt){At[vt]=!0;var Dt=this.events[vt]||[];Dt.forEach(function(Nt){return Nt.apply(St,Et)}),At[vt]=!1}},lt.prototype.deferredEmit=function(vt){for(var St,Et=[],Ct=arguments.length-1;Ct-- >0;)Et[Ct]=arguments[Ct+1];var At=this.deferredEvents;(St=this).emit.apply(St,[vt].concat(Et)),(At[vt]||(At[vt]=[])).push(Et)},lt.prototype.setOptions=function(vt){this.setState(vt)},lt.prototype.resize=function(vt){this.setOptions({width:vt})},lt.prototype.reset=function(){this.colors.forEach(function(vt){return vt.reset()}),this.setState({colors:this.colors})},lt.prototype.onMount=function(vt){this.el=vt,this.deferredEmit("mount",this)},lt.prototype.onColorChange=function(vt,St){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",vt,St)),this.emit("color:change",vt,St)},lt.prototype.emitInputEvent=function(vt,St){vt===0?this.emit("input:start",this.color,St):vt===1?this.emit("input:move",this.color,St):vt===2&&this.emit("input:end",this.color,St)},lt.prototype.render=function(vt,St){var Et=this,Ct=St.layout;if(!Array.isArray(Ct)){switch(Ct){default:Ct=[{component:IroWheel},{component:IroSlider}]}St.transparency&&Ct.push({component:IroSlider,options:{sliderType:"alpha"}})}return h$8("div",{class:"IroColorPicker",id:St.id,style:{display:St.display}},Ct.map(function(At,Rt){var Dt=At.component,Nt=At.options;return h$8(Dt,Object.assign({},St,Nt,{ref:void 0,onInput:Et.emitInputEvent.bind(Et),parent:Et,index:Rt}))}))},lt}(m$5);IroColorPicker.defaultProps=Object.assign({},iroColorPickerOptionDefaults,{colors:[],display:"block",id:null,layout:"default",margin:null});var IroColorPickerWidget=createWidget(IroColorPicker),iro;(function(ft){ft.version="5.5.2",ft.Color=IroColor,ft.ColorPicker=IroColorPickerWidget,function(lt){lt.h=h$8,lt.ComponentBase=IroComponentWrapper,lt.Handle=IroHandle,lt.Slider=IroSlider,lt.Wheel=IroWheel,lt.Box=IroBox}(ft.ui||(ft.ui={}))})(iro||(iro={}));var iro$1=iro;class ColorWheelField extends coreBrowserExports.FieldColour{constructor(lt,dt=150,vt={}){super(lt),this.color=lt,this.width=dt,this.options=vt}static fromJson(lt){return new ColorWheelField(lt.color,lt.size||150,lt.options||{})}showEditor_(){const lt=document.createElement("div");coreBrowserExports.DropDownDiv.getContentDiv().appendChild(lt),lt.classList.add("blockly-color-wheel-container"),iro$1.ColorPicker(lt,{width:this.width,color:this.getValue(),...this.options}).on("color:change",vt=>{this.setValue(vt.hexString)}),coreBrowserExports.DropDownDiv.showPositionedByField(this,()=>lt.remove())}}coreBrowserExports.fieldRegistry.register("color_wheel",ColorWheelField);function hexToRgb(ft){var lt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ft);return lt?{r:parseInt(lt[1],16),g:parseInt(lt[2],16),b:parseInt(lt[3],16)}:null}const block_color={name:"color",block:{init:function(){this.appendDummyInput().appendField("set LED color:").appendField(new ColorWheelField("#00FF00",150,{layoutDirection:"horizontal"}),"color"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},pythonGenerator:(ft,lt)=>'setLEDColorFromHex(cf, "'+ft.getFieldValue("color")+`")
`,javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("color"),vt=hexToRgb(dt);return`duration += simulator.setColor(group_state, ${vt==null?void 0:vt.r},${vt==null?void 0:vt.g},${vt==null?void 0:vt.b});`}},CUSTOM_BLOCKS={block_go_to_speed,block_go_to,block_land,block_move_angles,block_move_xyz,block_move,block_start_linear_motion,block_stop,block_takeoff,block_turn,block_circle,block_start_circle,block_start_move,block_start_turn,block_get_a_position,block_set_default_height,block_set_default_speed,block_set_default_xy,block_color};Object.values(CUSTOM_BLOCKS).forEach(ft=>{Blockly.Blocks[ft.name]=ft.block,pythonExports.pythonGenerator[ft.name]=lt=>ft.pythonGenerator(lt,pythonExports.pythonGenerator),javascriptExports.javascriptGenerator[ft.name]=lt=>ft.javascriptGenerator(lt,javascriptExports.javascriptGenerator)});const blockToToolbox=ft=>({kind:"block",type:ft.name}),blocklyToolboxConfiguration={kind:"categoryToolbox",contents:[{kind:"category",name:"Straight Motion",contents:[blockToToolbox(CUSTOM_BLOCKS.block_takeoff),blockToToolbox(CUSTOM_BLOCKS.block_land),blockToToolbox(CUSTOM_BLOCKS.block_go_to),blockToToolbox(CUSTOM_BLOCKS.block_go_to_speed),blockToToolbox(CUSTOM_BLOCKS.block_move_angles),blockToToolbox(CUSTOM_BLOCKS.block_move_xyz),blockToToolbox(CUSTOM_BLOCKS.block_move),blockToToolbox(CUSTOM_BLOCKS.block_stop),blockToToolbox(CUSTOM_BLOCKS.block_turn)]},{kind:"category",name:"Curves",contents:[blockToToolbox(CUSTOM_BLOCKS.block_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_move),blockToToolbox(CUSTOM_BLOCKS.block_start_turn)]},{kind:"category",name:"Config",contents:[blockToToolbox(CUSTOM_BLOCKS.block_get_a_position),blockToToolbox(CUSTOM_BLOCKS.block_set_default_height),blockToToolbox(CUSTOM_BLOCKS.block_set_default_speed),blockToToolbox(CUSTOM_BLOCKS.block_set_default_xy)]},{kind:"category",name:"Colors",contents:[blockToToolbox(CUSTOM_BLOCKS.block_color)]},{kind:"category",name:"Logic",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"}]},{kind:"category",name:"Math",contents:[{kind:"block",type:"math_round"},{kind:"block",type:"math_number"}]},{kind:"category",name:"Rotation and Translation"}]};function uuid$1(){const ft=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let lt=[];for(let dt=0;dt<36;dt++)dt===8||dt===13||dt===18||dt===23?lt[dt]="-":lt[dt]=ft[Math.ceil(Math.random()*ft.length-1)];return lt.join("")}var uuid_1=uuid$1;const uuid$2=getDefaultExportFromCjs(uuid_1),createStoreImpl=ft=>{let lt;const dt=new Set,vt=(Rt,Dt)=>{const Nt=typeof Rt=="function"?Rt(lt):Rt;if(!Object.is(Nt,lt)){const Ft=lt;lt=Dt??typeof Nt!="object"?Nt:Object.assign({},lt,Nt),dt.forEach(Ut=>Ut(lt,Ft))}},St=()=>lt,At={setState:vt,getState:St,subscribe:Rt=>(dt.add(Rt),()=>dt.delete(Rt)),destroy:()=>{({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),dt.clear()}};return lt=ft(vt,St,At),At},createStore$2=ft=>ft?createStoreImpl(ft):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$1=reactExports;function h$7(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var k$3=typeof Object.is=="function"?Object.is:h$7,l$7=e$1.useState,m$4=e$1.useEffect,n$6=e$1.useLayoutEffect,p$7=e$1.useDebugValue;function q$3(ft,lt){var dt=lt(),vt=l$7({inst:{value:dt,getSnapshot:lt}}),St=vt[0].inst,Et=vt[1];return n$6(function(){St.value=dt,St.getSnapshot=lt,r$8(St)&&Et({inst:St})},[ft,dt,lt]),m$4(function(){return r$8(St)&&Et({inst:St}),ft(function(){r$8(St)&&Et({inst:St})})},[ft]),p$7(dt),dt}function r$8(ft){var lt=ft.getSnapshot;ft=ft.value;try{var dt=lt();return!k$3(ft,dt)}catch{return!0}}function t$4(ft,lt){return lt()}var u$7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$1.useSyncExternalStore!==void 0?e$1.useSyncExternalStore:u$7;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$6=reactExports,n$5=shimExports;function p$6(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var q$2=typeof Object.is=="function"?Object.is:p$6,r$7=n$5.useSyncExternalStore,t$3=h$6.useRef,u$6=h$6.useEffect,v$5=h$6.useMemo,w$5=h$6.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(ft,lt,dt,vt,St){var Et=t$3(null);if(Et.current===null){var Ct={hasValue:!1,value:null};Et.current=Ct}else Ct=Et.current;Et=v$5(function(){function Rt(Wt){if(!Dt){if(Dt=!0,Nt=Wt,Wt=vt(Wt),St!==void 0&&Ct.hasValue){var Zt=Ct.value;if(St(Zt,Wt))return Ft=Zt}return Ft=Wt}if(Zt=Ft,q$2(Nt,Wt))return Zt;var Kt=vt(Wt);return St!==void 0&&St(Zt,Kt)?Zt:(Nt=Wt,Ft=Kt)}var Dt=!1,Nt,Ft,Ut=dt===void 0?null:dt;return[function(){return Rt(lt())},Ut===null?void 0:function(){return Rt(Ut())}]},[lt,dt,vt,St]);var At=r$7(ft,Et[0],Et[1]);return u$6(function(){Ct.hasValue=!0,Ct.value=At},[At]),w$5(At),At};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;function useStore$1(ft,lt=ft.getState,dt){const vt=useSyncExternalStoreWithSelector(ft.subscribe,ft.getState,ft.getServerState||ft.getState,lt,dt);return reactExports.useDebugValue(vt),vt}const createImpl=ft=>{({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof ft!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const lt=typeof ft=="function"?createStore$2(ft):ft,dt=(vt,St)=>useStore$1(lt,vt,St);return Object.assign(dt,lt),dt},create$2=ft=>ft?createImpl(ft):createImpl,subscribeWithSelectorImpl=ft=>(lt,dt,vt)=>{const St=vt.subscribe;return vt.subscribe=(Ct,At,Rt)=>{let Dt=Ct;if(At){const Nt=(Rt==null?void 0:Rt.equalityFn)||Object.is;let Ft=Ct(vt.getState());Dt=Ut=>{const Wt=Ct(Ut);if(!Nt(Ft,Wt)){const Zt=Ft;At(Ft=Wt,Zt)}},Rt!=null&&Rt.fireImmediately&&At(Ft,Ft)}return St(Dt)},ft(lt,dt,vt)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(ft){let lt;try{lt=ft()}catch{return}return{getItem:vt=>{var St;const Et=At=>At===null?null:JSON.parse(At),Ct=(St=lt.getItem(vt))!=null?St:null;return Ct instanceof Promise?Ct.then(Et):Et(Ct)},setItem:(vt,St)=>lt.setItem(vt,JSON.stringify(St)),removeItem:vt=>lt.removeItem(vt)}}const toThenable=ft=>lt=>{try{const dt=ft(lt);return dt instanceof Promise?dt:{then(vt){return toThenable(vt)(dt)},catch(vt){return this}}}catch(dt){return{then(vt){return this},catch(vt){return toThenable(vt)(dt)}}}},oldImpl=(ft,lt)=>(dt,vt,St)=>{let Et={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:cn=>cn,version:0,merge:(cn,hn)=>({...hn,...cn}),...lt},Ct=!1;const At=new Set,Rt=new Set;let Dt;try{Dt=Et.getStorage()}catch{}if(!Dt)return ft((...cn)=>{console.warn(`[zustand persist middleware] Unable to update item '${Et.name}', the given storage is currently unavailable.`),dt(...cn)},vt,St);const Nt=toThenable(Et.serialize),Ft=()=>{const cn=Et.partialize({...vt()});let hn;const dn=Nt({state:cn,version:Et.version}).then(pn=>Dt.setItem(Et.name,pn)).catch(pn=>{hn=pn});if(hn)throw hn;return dn},Ut=St.setState;St.setState=(cn,hn)=>{Ut(cn,hn),Ft()};const Wt=ft((...cn)=>{dt(...cn),Ft()},vt,St);let Zt;const Kt=()=>{var cn;if(!Dt)return;Ct=!1,At.forEach(dn=>dn(vt()));const hn=((cn=Et.onRehydrateStorage)==null?void 0:cn.call(Et,vt()))||void 0;return toThenable(Dt.getItem.bind(Dt))(Et.name).then(dn=>{if(dn)return Et.deserialize(dn)}).then(dn=>{if(dn)if(typeof dn.version=="number"&&dn.version!==Et.version){if(Et.migrate)return Et.migrate(dn.state,dn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return dn.state}).then(dn=>{var pn;return Zt=Et.merge(dn,(pn=vt())!=null?pn:Wt),dt(Zt,!0),Ft()}).then(()=>{hn==null||hn(Zt,void 0),Ct=!0,Rt.forEach(dn=>dn(Zt))}).catch(dn=>{hn==null||hn(void 0,dn)})};return St.persist={setOptions:cn=>{Et={...Et,...cn},cn.getStorage&&(Dt=cn.getStorage())},clearStorage:()=>{Dt==null||Dt.removeItem(Et.name)},getOptions:()=>Et,rehydrate:()=>Kt(),hasHydrated:()=>Ct,onHydrate:cn=>(At.add(cn),()=>{At.delete(cn)}),onFinishHydration:cn=>(Rt.add(cn),()=>{Rt.delete(cn)})},Kt(),Zt||Wt},newImpl=(ft,lt)=>(dt,vt,St)=>{let Et={storage:createJSONStorage(()=>localStorage),partialize:Kt=>Kt,version:0,merge:(Kt,cn)=>({...cn,...Kt}),...lt},Ct=!1;const At=new Set,Rt=new Set;let Dt=Et.storage;if(!Dt)return ft((...Kt)=>{console.warn(`[zustand persist middleware] Unable to update item '${Et.name}', the given storage is currently unavailable.`),dt(...Kt)},vt,St);const Nt=()=>{const Kt=Et.partialize({...vt()});return Dt.setItem(Et.name,{state:Kt,version:Et.version})},Ft=St.setState;St.setState=(Kt,cn)=>{Ft(Kt,cn),Nt()};const Ut=ft((...Kt)=>{dt(...Kt),Nt()},vt,St);let Wt;const Zt=()=>{var Kt;if(!Dt)return;Ct=!1,At.forEach(hn=>hn(vt()));const cn=((Kt=Et.onRehydrateStorage)==null?void 0:Kt.call(Et,vt()))||void 0;return toThenable(Dt.getItem.bind(Dt))(Et.name).then(hn=>{if(hn)if(typeof hn.version=="number"&&hn.version!==Et.version){if(Et.migrate)return Et.migrate(hn.state,hn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return hn.state}).then(hn=>{var dn;return Wt=Et.merge(hn,(dn=vt())!=null?dn:Ut),dt(Wt,!0),Nt()}).then(()=>{cn==null||cn(Wt,void 0),Ct=!0,Rt.forEach(hn=>hn(Wt))}).catch(hn=>{cn==null||cn(void 0,hn)})};return St.persist={setOptions:Kt=>{Et={...Et,...Kt},Kt.storage&&(Dt=Kt.storage)},clearStorage:()=>{Dt==null||Dt.removeItem(Et.name)},getOptions:()=>Et,rehydrate:()=>Zt(),hasHydrated:()=>Ct,onHydrate:Kt=>(At.add(Kt),()=>{At.delete(Kt)}),onFinishHydration:Kt=>(Rt.add(Kt),()=>{Rt.delete(Kt)})},Zt(),Wt||Ut},persistImpl=(ft,lt)=>"getStorage"in lt||"serialize"in lt||"deserialize"in lt?(({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(ft,lt)):newImpl(ft,lt),persist=persistImpl;function n$4(ft){for(var lt=arguments.length,dt=Array(lt>1?lt-1:0),vt=1;vt<lt;vt++)dt[vt-1]=arguments[vt];throw Error("[Immer] minified error nr: "+ft+(dt.length?" "+dt.map(function(St){return"'"+St+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$6(ft){return!!ft&&!!ft[Q$3]}function t$2(ft){var lt;return!!ft&&(function(dt){if(!dt||typeof dt!="object")return!1;var vt=Object.getPrototypeOf(dt);if(vt===null)return!0;var St=Object.hasOwnProperty.call(vt,"constructor")&&vt.constructor;return St===Object||typeof St=="function"&&Function.toString.call(St)===Z$1}(ft)||Array.isArray(ft)||!!ft[L$2]||!!(!((lt=ft.constructor)===null||lt===void 0)&&lt[L$2])||s$3(ft)||v$4(ft))}function i$6(ft,lt,dt){dt===void 0&&(dt=!1),o$4(ft)===0?(dt?Object.keys:nn$1)(ft).forEach(function(vt){dt&&typeof vt=="symbol"||lt(vt,ft[vt],ft)}):ft.forEach(function(vt,St){return lt(St,vt,ft)})}function o$4(ft){var lt=ft[Q$3];return lt?lt.i>3?lt.i-4:lt.i:Array.isArray(ft)?1:s$3(ft)?2:v$4(ft)?3:0}function u$5(ft,lt){return o$4(ft)===2?ft.has(lt):Object.prototype.hasOwnProperty.call(ft,lt)}function a$3(ft,lt){return o$4(ft)===2?ft.get(lt):ft[lt]}function f$5(ft,lt,dt){var vt=o$4(ft);vt===2?ft.set(lt,dt):vt===3?ft.add(dt):ft[lt]=dt}function c$6(ft,lt){return ft===lt?ft!==0||1/ft==1/lt:ft!=ft&&lt!=lt}function s$3(ft){return X$1&&ft instanceof Map}function v$4(ft){return q$1&&ft instanceof Set}function p$5(ft){return ft.o||ft.t}function l$6(ft){if(Array.isArray(ft))return Array.prototype.slice.call(ft);var lt=rn$1(ft);delete lt[Q$3];for(var dt=nn$1(lt),vt=0;vt<dt.length;vt++){var St=dt[vt],Et=lt[St];Et.writable===!1&&(Et.writable=!0,Et.configurable=!0),(Et.get||Et.set)&&(lt[St]={configurable:!0,writable:!0,enumerable:Et.enumerable,value:ft[St]})}return Object.create(Object.getPrototypeOf(ft),lt)}function d$6(ft,lt){return lt===void 0&&(lt=!1),y$5(ft)||r$6(ft)||!t$2(ft)||(o$4(ft)>1&&(ft.set=ft.add=ft.clear=ft.delete=h$5),Object.freeze(ft),lt&&i$6(ft,function(dt,vt){return d$6(vt,!0)},!0)),ft}function h$5(){n$4(2)}function y$5(ft){return ft==null||typeof ft!="object"||Object.isFrozen(ft)}function b$5(ft){var lt=tn[ft];return lt||n$4(18,ft),lt}function _$1(){return U$1}function j$2(ft,lt){lt&&(b$5("Patches"),ft.u=[],ft.s=[],ft.v=lt)}function O$3(ft){g$3(ft),ft.p.forEach(S$2),ft.p=null}function g$3(ft){ft===U$1&&(U$1=ft.l)}function w$4(ft){return U$1={p:[],l:U$1,h:ft,m:!0,_:0}}function S$2(ft){var lt=ft[Q$3];lt.i===0||lt.i===1?lt.j():lt.O=!0}function P$2(ft,lt){lt._=lt.p.length;var dt=lt.p[0],vt=ft!==void 0&&ft!==dt;return lt.h.g||b$5("ES5").S(lt,ft,vt),vt?(dt[Q$3].P&&(O$3(lt),n$4(4)),t$2(ft)&&(ft=M$1(lt,ft),lt.l||x$4(lt,ft)),lt.u&&b$5("Patches").M(dt[Q$3].t,ft,lt.u,lt.s)):ft=M$1(lt,dt,[]),O$3(lt),lt.u&&lt.v(lt.u,lt.s),ft!==H$3?ft:void 0}function M$1(ft,lt,dt){if(y$5(lt))return lt;var vt=lt[Q$3];if(!vt)return i$6(lt,function(At,Rt){return A$2(ft,vt,lt,At,Rt,dt)},!0),lt;if(vt.A!==ft)return lt;if(!vt.P)return x$4(ft,vt.t,!0),vt.t;if(!vt.I){vt.I=!0,vt.A._--;var St=vt.i===4||vt.i===5?vt.o=l$6(vt.k):vt.o,Et=St,Ct=!1;vt.i===3&&(Et=new Set(St),St.clear(),Ct=!0),i$6(Et,function(At,Rt){return A$2(ft,vt,St,At,Rt,dt,Ct)}),x$4(ft,St,!1),dt&&ft.u&&b$5("Patches").N(vt,dt,ft.u,ft.s)}return vt.o}function A$2(ft,lt,dt,vt,St,Et,Ct){if(r$6(St)){var At=M$1(ft,St,Et&&lt&&lt.i!==3&&!u$5(lt.R,vt)?Et.concat(vt):void 0);if(f$5(dt,vt,At),!r$6(At))return;ft.m=!1}else Ct&&dt.add(St);if(t$2(St)&&!y$5(St)){if(!ft.h.D&&ft._<1)return;M$1(ft,St),lt&&lt.A.l||x$4(ft,St)}}function x$4(ft,lt,dt){dt===void 0&&(dt=!1),!ft.l&&ft.h.D&&ft.m&&d$6(lt,dt)}function z$3(ft,lt){var dt=ft[Q$3];return(dt?p$5(dt):ft)[lt]}function I$2(ft,lt){if(lt in ft)for(var dt=Object.getPrototypeOf(ft);dt;){var vt=Object.getOwnPropertyDescriptor(dt,lt);if(vt)return vt;dt=Object.getPrototypeOf(dt)}}function k$2(ft){ft.P||(ft.P=!0,ft.l&&k$2(ft.l))}function E$5(ft){ft.o||(ft.o=l$6(ft.t))}function N$1(ft,lt,dt){var vt=s$3(lt)?b$5("MapSet").F(lt,dt):v$4(lt)?b$5("MapSet").T(lt,dt):ft.g?function(St,Et){var Ct=Array.isArray(St),At={i:Ct?1:0,A:Et?Et.A:_$1(),P:!1,I:!1,R:{},l:Et,t:St,k:null,o:null,j:null,C:!1},Rt=At,Dt=en;Ct&&(Rt=[At],Dt=on$1);var Nt=Proxy.revocable(Rt,Dt),Ft=Nt.revoke,Ut=Nt.proxy;return At.k=Ut,At.j=Ft,Ut}(lt,dt):b$5("ES5").J(lt,dt);return(dt?dt.A:_$1()).p.push(vt),vt}function R$2(ft){return r$6(ft)||n$4(22,ft),function lt(dt){if(!t$2(dt))return dt;var vt,St=dt[Q$3],Et=o$4(dt);if(St){if(!St.P&&(St.i<4||!b$5("ES5").K(St)))return St.t;St.I=!0,vt=D$4(dt,Et),St.I=!1}else vt=D$4(dt,Et);return i$6(vt,function(Ct,At){St&&a$3(St.t,Ct)===At||f$5(vt,Ct,lt(At))}),Et===3?new Set(vt):vt}(ft)}function D$4(ft,lt){switch(lt){case 2:return new Map(ft);case 3:return Array.from(ft)}return l$6(ft)}var G,U$1,W$3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$3=W$3?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$2=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$3=W$3?Symbol.for("immer-state"):"__$immer_state",Z$1=""+Object.prototype.constructor,nn$1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(ft){return Object.getOwnPropertyNames(ft).concat(Object.getOwnPropertySymbols(ft))}:Object.getOwnPropertyNames,rn$1=Object.getOwnPropertyDescriptors||function(ft){var lt={};return nn$1(ft).forEach(function(dt){lt[dt]=Object.getOwnPropertyDescriptor(ft,dt)}),lt},tn={},en={get:function(ft,lt){if(lt===Q$3)return ft;var dt=p$5(ft);if(!u$5(dt,lt))return function(St,Et,Ct){var At,Rt=I$2(Et,Ct);return Rt?"value"in Rt?Rt.value:(At=Rt.get)===null||At===void 0?void 0:At.call(St.k):void 0}(ft,dt,lt);var vt=dt[lt];return ft.I||!t$2(vt)?vt:vt===z$3(ft.t,lt)?(E$5(ft),ft.o[lt]=N$1(ft.A.h,vt,ft)):vt},has:function(ft,lt){return lt in p$5(ft)},ownKeys:function(ft){return Reflect.ownKeys(p$5(ft))},set:function(ft,lt,dt){var vt=I$2(p$5(ft),lt);if(vt!=null&&vt.set)return vt.set.call(ft.k,dt),!0;if(!ft.P){var St=z$3(p$5(ft),lt),Et=St==null?void 0:St[Q$3];if(Et&&Et.t===dt)return ft.o[lt]=dt,ft.R[lt]=!1,!0;if(c$6(dt,St)&&(dt!==void 0||u$5(ft.t,lt)))return!0;E$5(ft),k$2(ft)}return ft.o[lt]===dt&&(dt!==void 0||lt in ft.o)||Number.isNaN(dt)&&Number.isNaN(ft.o[lt])||(ft.o[lt]=dt,ft.R[lt]=!0),!0},deleteProperty:function(ft,lt){return z$3(ft.t,lt)!==void 0||lt in ft.t?(ft.R[lt]=!1,E$5(ft),k$2(ft)):delete ft.R[lt],ft.o&&delete ft.o[lt],!0},getOwnPropertyDescriptor:function(ft,lt){var dt=p$5(ft),vt=Reflect.getOwnPropertyDescriptor(dt,lt);return vt&&{writable:!0,configurable:ft.i!==1||lt!=="length",enumerable:vt.enumerable,value:dt[lt]}},defineProperty:function(){n$4(11)},getPrototypeOf:function(ft){return Object.getPrototypeOf(ft.t)},setPrototypeOf:function(){n$4(12)}},on$1={};i$6(en,function(ft,lt){on$1[ft]=function(){return arguments[0]=arguments[0][0],lt.apply(this,arguments)}}),on$1.deleteProperty=function(ft,lt){return on$1.set.call(this,ft,lt,void 0)},on$1.set=function(ft,lt,dt){return en.set.call(this,ft[0],lt,dt,ft[0])};var un=function(){function ft(dt){var vt=this;this.g=B$1,this.D=!0,this.produce=function(St,Et,Ct){if(typeof St=="function"&&typeof Et!="function"){var At=Et;Et=St;var Rt=vt;return function(Kt){var cn=this;Kt===void 0&&(Kt=At);for(var hn=arguments.length,dn=Array(hn>1?hn-1:0),pn=1;pn<hn;pn++)dn[pn-1]=arguments[pn];return Rt.produce(Kt,function(gn){var vn;return(vn=Et).call.apply(vn,[cn,gn].concat(dn))})}}var Dt;if(typeof Et!="function"&&n$4(6),Ct!==void 0&&typeof Ct!="function"&&n$4(7),t$2(St)){var Nt=w$4(vt),Ft=N$1(vt,St,void 0),Ut=!0;try{Dt=Et(Ft),Ut=!1}finally{Ut?O$3(Nt):g$3(Nt)}return typeof Promise<"u"&&Dt instanceof Promise?Dt.then(function(Kt){return j$2(Nt,Ct),P$2(Kt,Nt)},function(Kt){throw O$3(Nt),Kt}):(j$2(Nt,Ct),P$2(Dt,Nt))}if(!St||typeof St!="object"){if((Dt=Et(St))===void 0&&(Dt=St),Dt===H$3&&(Dt=void 0),vt.D&&d$6(Dt,!0),Ct){var Wt=[],Zt=[];b$5("Patches").M(St,Dt,Wt,Zt),Ct(Wt,Zt)}return Dt}n$4(21,St)},this.produceWithPatches=function(St,Et){if(typeof St=="function")return function(Dt){for(var Nt=arguments.length,Ft=Array(Nt>1?Nt-1:0),Ut=1;Ut<Nt;Ut++)Ft[Ut-1]=arguments[Ut];return vt.produceWithPatches(Dt,function(Wt){return St.apply(void 0,[Wt].concat(Ft))})};var Ct,At,Rt=vt.produce(St,Et,function(Dt,Nt){Ct=Dt,At=Nt});return typeof Promise<"u"&&Rt instanceof Promise?Rt.then(function(Dt){return[Dt,Ct,At]}):[Rt,Ct,At]},typeof(dt==null?void 0:dt.useProxies)=="boolean"&&this.setUseProxies(dt.useProxies),typeof(dt==null?void 0:dt.autoFreeze)=="boolean"&&this.setAutoFreeze(dt.autoFreeze)}var lt=ft.prototype;return lt.createDraft=function(dt){t$2(dt)||n$4(8),r$6(dt)&&(dt=R$2(dt));var vt=w$4(this),St=N$1(this,dt,void 0);return St[Q$3].C=!0,g$3(vt),St},lt.finishDraft=function(dt,vt){var St=dt&&dt[Q$3],Et=St.A;return j$2(Et,vt),P$2(void 0,Et)},lt.setAutoFreeze=function(dt){this.D=dt},lt.setUseProxies=function(dt){dt&&!B$1&&n$4(20),this.g=dt},lt.applyPatches=function(dt,vt){var St;for(St=vt.length-1;St>=0;St--){var Et=vt[St];if(Et.path.length===0&&Et.op==="replace"){dt=Et.value;break}}St>-1&&(vt=vt.slice(St+1));var Ct=b$5("Patches").$;return r$6(dt)?Ct(dt,vt):this.produce(dt,function(At){return Ct(At,vt)})},ft}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);const immerImpl=ft=>(lt,dt,vt)=>(vt.setState=(St,Et,...Ct)=>{const At=typeof St=="function"?fn(St):St;return lt(At,Et,...Ct)},ft(vt.setState,dt,vt)),immer=immerImpl,ROBART_VERSION=.1,saveToFile=(ft,lt)=>{const dt=document.createElement("a"),vt=new Blob([lt],{type:"text/plain"});dt.href=URL.createObjectURL(vt),dt.download=ft,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt)};function commonjsRequire(ft){throw new Error('Could not dynamically require "'+ft+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(ft,lt){(function(dt){ft.exports=dt()})(function(){return function dt(vt,St,Et){function Ct(Dt,Nt){if(!St[Dt]){if(!vt[Dt]){var Ft=typeof commonjsRequire=="function"&&commonjsRequire;if(!Nt&&Ft)return Ft(Dt,!0);if(At)return At(Dt,!0);var Ut=new Error("Cannot find module '"+Dt+"'");throw Ut.code="MODULE_NOT_FOUND",Ut}var Wt=St[Dt]={exports:{}};vt[Dt][0].call(Wt.exports,function(Zt){var Kt=vt[Dt][1][Zt];return Ct(Kt||Zt)},Wt,Wt.exports,dt,vt,St,Et)}return St[Dt].exports}for(var At=typeof commonjsRequire=="function"&&commonjsRequire,Rt=0;Rt<Et.length;Rt++)Ct(Et[Rt]);return Ct}({1:[function(dt,vt,St){var Et=dt("./utils"),Ct=dt("./support"),At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";St.encode=function(Rt){for(var Dt,Nt,Ft,Ut,Wt,Zt,Kt,cn=[],hn=0,dn=Rt.length,pn=dn,gn=Et.getTypeOf(Rt)!=="string";hn<Rt.length;)pn=dn-hn,Ft=gn?(Dt=Rt[hn++],Nt=hn<dn?Rt[hn++]:0,hn<dn?Rt[hn++]:0):(Dt=Rt.charCodeAt(hn++),Nt=hn<dn?Rt.charCodeAt(hn++):0,hn<dn?Rt.charCodeAt(hn++):0),Ut=Dt>>2,Wt=(3&Dt)<<4|Nt>>4,Zt=1<pn?(15&Nt)<<2|Ft>>6:64,Kt=2<pn?63&Ft:64,cn.push(At.charAt(Ut)+At.charAt(Wt)+At.charAt(Zt)+At.charAt(Kt));return cn.join("")},St.decode=function(Rt){var Dt,Nt,Ft,Ut,Wt,Zt,Kt=0,cn=0,hn="data:";if(Rt.substr(0,hn.length)===hn)throw new Error("Invalid base64 input, it looks like a data url.");var dn,pn=3*(Rt=Rt.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(Rt.charAt(Rt.length-1)===At.charAt(64)&&pn--,Rt.charAt(Rt.length-2)===At.charAt(64)&&pn--,pn%1!=0)throw new Error("Invalid base64 input, bad content length.");for(dn=Ct.uint8array?new Uint8Array(0|pn):new Array(0|pn);Kt<Rt.length;)Dt=At.indexOf(Rt.charAt(Kt++))<<2|(Ut=At.indexOf(Rt.charAt(Kt++)))>>4,Nt=(15&Ut)<<4|(Wt=At.indexOf(Rt.charAt(Kt++)))>>2,Ft=(3&Wt)<<6|(Zt=At.indexOf(Rt.charAt(Kt++))),dn[cn++]=Dt,Wt!==64&&(dn[cn++]=Nt),Zt!==64&&(dn[cn++]=Ft);return dn}},{"./support":30,"./utils":32}],2:[function(dt,vt,St){var Et=dt("./external"),Ct=dt("./stream/DataWorker"),At=dt("./stream/Crc32Probe"),Rt=dt("./stream/DataLengthProbe");function Dt(Nt,Ft,Ut,Wt,Zt){this.compressedSize=Nt,this.uncompressedSize=Ft,this.crc32=Ut,this.compression=Wt,this.compressedContent=Zt}Dt.prototype={getContentWorker:function(){var Nt=new Ct(Et.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Rt("data_length")),Ft=this;return Nt.on("end",function(){if(this.streamInfo.data_length!==Ft.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Nt},getCompressedWorker:function(){return new Ct(Et.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Dt.createWorkerFrom=function(Nt,Ft,Ut){return Nt.pipe(new At).pipe(new Rt("uncompressedSize")).pipe(Ft.compressWorker(Ut)).pipe(new Rt("compressedSize")).withStreamInfo("compression",Ft)},vt.exports=Dt},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(dt,vt,St){var Et=dt("./stream/GenericWorker");St.STORE={magic:"\0\0",compressWorker:function(){return new Et("STORE compression")},uncompressWorker:function(){return new Et("STORE decompression")}},St.DEFLATE=dt("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(dt,vt,St){var Et=dt("./utils"),Ct=function(){for(var At,Rt=[],Dt=0;Dt<256;Dt++){At=Dt;for(var Nt=0;Nt<8;Nt++)At=1&At?3988292384^At>>>1:At>>>1;Rt[Dt]=At}return Rt}();vt.exports=function(At,Rt){return At!==void 0&&At.length?Et.getTypeOf(At)!=="string"?function(Dt,Nt,Ft,Ut){var Wt=Ct,Zt=Ut+Ft;Dt^=-1;for(var Kt=Ut;Kt<Zt;Kt++)Dt=Dt>>>8^Wt[255&(Dt^Nt[Kt])];return-1^Dt}(0|Rt,At,At.length,0):function(Dt,Nt,Ft,Ut){var Wt=Ct,Zt=Ut+Ft;Dt^=-1;for(var Kt=Ut;Kt<Zt;Kt++)Dt=Dt>>>8^Wt[255&(Dt^Nt.charCodeAt(Kt))];return-1^Dt}(0|Rt,At,At.length,0):0}},{"./utils":32}],5:[function(dt,vt,St){St.base64=!1,St.binary=!1,St.dir=!1,St.createFolders=!0,St.date=null,St.compression=null,St.compressionOptions=null,St.comment=null,St.unixPermissions=null,St.dosPermissions=null},{}],6:[function(dt,vt,St){var Et=null;Et=typeof Promise<"u"?Promise:dt("lie"),vt.exports={Promise:Et}},{lie:37}],7:[function(dt,vt,St){var Et=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",Ct=dt("pako"),At=dt("./utils"),Rt=dt("./stream/GenericWorker"),Dt=Et?"uint8array":"array";function Nt(Ft,Ut){Rt.call(this,"FlateWorker/"+Ft),this._pako=null,this._pakoAction=Ft,this._pakoOptions=Ut,this.meta={}}St.magic="\b\0",At.inherits(Nt,Rt),Nt.prototype.processChunk=function(Ft){this.meta=Ft.meta,this._pako===null&&this._createPako(),this._pako.push(At.transformTo(Dt,Ft.data),!1)},Nt.prototype.flush=function(){Rt.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},Nt.prototype.cleanUp=function(){Rt.prototype.cleanUp.call(this),this._pako=null},Nt.prototype._createPako=function(){this._pako=new Ct[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Ft=this;this._pako.onData=function(Ut){Ft.push({data:Ut,meta:Ft.meta})}},St.compressWorker=function(Ft){return new Nt("Deflate",Ft)},St.uncompressWorker=function(){return new Nt("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(dt,vt,St){function Et(Wt,Zt){var Kt,cn="";for(Kt=0;Kt<Zt;Kt++)cn+=String.fromCharCode(255&Wt),Wt>>>=8;return cn}function Ct(Wt,Zt,Kt,cn,hn,dn){var pn,gn,vn=Wt.file,bn=Wt.compression,$n=dn!==Dt.utf8encode,Tn=At.transformTo("string",dn(vn.name)),In=At.transformTo("string",Dt.utf8encode(vn.name)),Pn=vn.comment,zn=At.transformTo("string",dn(Pn)),An=At.transformTo("string",Dt.utf8encode(Pn)),Gn=In.length!==vn.name.length,xn=An.length!==Pn.length,Qn="",qn="",nr="",Un=vn.dir,Nn=vn.date,jn={crc32:0,compressedSize:0,uncompressedSize:0};Zt&&!Kt||(jn.crc32=Wt.crc32,jn.compressedSize=Wt.compressedSize,jn.uncompressedSize=Wt.uncompressedSize);var Ln=0;Zt&&(Ln|=8),$n||!Gn&&!xn||(Ln|=2048);var Cn=0,tr=0;Un&&(Cn|=16),hn==="UNIX"?(tr=798,Cn|=function(Zn,br){var fr=Zn;return Zn||(fr=br?16893:33204),(65535&fr)<<16}(vn.unixPermissions,Un)):(tr=20,Cn|=function(Zn){return 63&(Zn||0)}(vn.dosPermissions)),pn=Nn.getUTCHours(),pn<<=6,pn|=Nn.getUTCMinutes(),pn<<=5,pn|=Nn.getUTCSeconds()/2,gn=Nn.getUTCFullYear()-1980,gn<<=4,gn|=Nn.getUTCMonth()+1,gn<<=5,gn|=Nn.getUTCDate(),Gn&&(qn=Et(1,1)+Et(Nt(Tn),4)+In,Qn+="up"+Et(qn.length,2)+qn),xn&&(nr=Et(1,1)+Et(Nt(zn),4)+An,Qn+="uc"+Et(nr.length,2)+nr);var ir="";return ir+=`
\0`,ir+=Et(Ln,2),ir+=bn.magic,ir+=Et(pn,2),ir+=Et(gn,2),ir+=Et(jn.crc32,4),ir+=Et(jn.compressedSize,4),ir+=Et(jn.uncompressedSize,4),ir+=Et(Tn.length,2),ir+=Et(Qn.length,2),{fileRecord:Ft.LOCAL_FILE_HEADER+ir+Tn+Qn,dirRecord:Ft.CENTRAL_FILE_HEADER+Et(tr,2)+ir+Et(zn.length,2)+"\0\0\0\0"+Et(Cn,4)+Et(cn,4)+Tn+Qn+zn}}var At=dt("../utils"),Rt=dt("../stream/GenericWorker"),Dt=dt("../utf8"),Nt=dt("../crc32"),Ft=dt("../signature");function Ut(Wt,Zt,Kt,cn){Rt.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Zt,this.zipPlatform=Kt,this.encodeFileName=cn,this.streamFiles=Wt,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}At.inherits(Ut,Rt),Ut.prototype.push=function(Wt){var Zt=Wt.meta.percent||0,Kt=this.entriesCount,cn=this._sources.length;this.accumulate?this.contentBuffer.push(Wt):(this.bytesWritten+=Wt.data.length,Rt.prototype.push.call(this,{data:Wt.data,meta:{currentFile:this.currentFile,percent:Kt?(Zt+100*(Kt-cn-1))/Kt:100}}))},Ut.prototype.openedSource=function(Wt){this.currentSourceOffset=this.bytesWritten,this.currentFile=Wt.file.name;var Zt=this.streamFiles&&!Wt.file.dir;if(Zt){var Kt=Ct(Wt,Zt,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Kt.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Ut.prototype.closedSource=function(Wt){this.accumulate=!1;var Zt=this.streamFiles&&!Wt.file.dir,Kt=Ct(Wt,Zt,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Kt.dirRecord),Zt)this.push({data:function(cn){return Ft.DATA_DESCRIPTOR+Et(cn.crc32,4)+Et(cn.compressedSize,4)+Et(cn.uncompressedSize,4)}(Wt),meta:{percent:100}});else for(this.push({data:Kt.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Ut.prototype.flush=function(){for(var Wt=this.bytesWritten,Zt=0;Zt<this.dirRecords.length;Zt++)this.push({data:this.dirRecords[Zt],meta:{percent:100}});var Kt=this.bytesWritten-Wt,cn=function(hn,dn,pn,gn,vn){var bn=At.transformTo("string",vn(gn));return Ft.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Et(hn,2)+Et(hn,2)+Et(dn,4)+Et(pn,4)+Et(bn.length,2)+bn}(this.dirRecords.length,Kt,Wt,this.zipComment,this.encodeFileName);this.push({data:cn,meta:{percent:100}})},Ut.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Ut.prototype.registerPrevious=function(Wt){this._sources.push(Wt);var Zt=this;return Wt.on("data",function(Kt){Zt.processChunk(Kt)}),Wt.on("end",function(){Zt.closedSource(Zt.previous.streamInfo),Zt._sources.length?Zt.prepareNextSource():Zt.end()}),Wt.on("error",function(Kt){Zt.error(Kt)}),this},Ut.prototype.resume=function(){return!!Rt.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Ut.prototype.error=function(Wt){var Zt=this._sources;if(!Rt.prototype.error.call(this,Wt))return!1;for(var Kt=0;Kt<Zt.length;Kt++)try{Zt[Kt].error(Wt)}catch{}return!0},Ut.prototype.lock=function(){Rt.prototype.lock.call(this);for(var Wt=this._sources,Zt=0;Zt<Wt.length;Zt++)Wt[Zt].lock()},vt.exports=Ut},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(dt,vt,St){var Et=dt("../compressions"),Ct=dt("./ZipFileWorker");St.generateWorker=function(At,Rt,Dt){var Nt=new Ct(Rt.streamFiles,Dt,Rt.platform,Rt.encodeFileName),Ft=0;try{At.forEach(function(Ut,Wt){Ft++;var Zt=function(dn,pn){var gn=dn||pn,vn=Et[gn];if(!vn)throw new Error(gn+" is not a valid compression method !");return vn}(Wt.options.compression,Rt.compression),Kt=Wt.options.compressionOptions||Rt.compressionOptions||{},cn=Wt.dir,hn=Wt.date;Wt._compressWorker(Zt,Kt).withStreamInfo("file",{name:Ut,dir:cn,date:hn,comment:Wt.comment||"",unixPermissions:Wt.unixPermissions,dosPermissions:Wt.dosPermissions}).pipe(Nt)}),Nt.entriesCount=Ft}catch(Ut){Nt.error(Ut)}return Nt}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(dt,vt,St){function Et(){if(!(this instanceof Et))return new Et;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var Ct=new Et;for(var At in this)typeof this[At]!="function"&&(Ct[At]=this[At]);return Ct}}(Et.prototype=dt("./object")).loadAsync=dt("./load"),Et.support=dt("./support"),Et.defaults=dt("./defaults"),Et.version="3.10.1",Et.loadAsync=function(Ct,At){return new Et().loadAsync(Ct,At)},Et.external=dt("./external"),vt.exports=Et},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(dt,vt,St){var Et=dt("./utils"),Ct=dt("./external"),At=dt("./utf8"),Rt=dt("./zipEntries"),Dt=dt("./stream/Crc32Probe"),Nt=dt("./nodejsUtils");function Ft(Ut){return new Ct.Promise(function(Wt,Zt){var Kt=Ut.decompressed.getContentWorker().pipe(new Dt);Kt.on("error",function(cn){Zt(cn)}).on("end",function(){Kt.streamInfo.crc32!==Ut.decompressed.crc32?Zt(new Error("Corrupted zip : CRC32 mismatch")):Wt()}).resume()})}vt.exports=function(Ut,Wt){var Zt=this;return Wt=Et.extend(Wt||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:At.utf8decode}),Nt.isNode&&Nt.isStream(Ut)?Ct.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):Et.prepareContent("the loaded zip file",Ut,!0,Wt.optimizedBinaryString,Wt.base64).then(function(Kt){var cn=new Rt(Wt);return cn.load(Kt),cn}).then(function(Kt){var cn=[Ct.Promise.resolve(Kt)],hn=Kt.files;if(Wt.checkCRC32)for(var dn=0;dn<hn.length;dn++)cn.push(Ft(hn[dn]));return Ct.Promise.all(cn)}).then(function(Kt){for(var cn=Kt.shift(),hn=cn.files,dn=0;dn<hn.length;dn++){var pn=hn[dn],gn=pn.fileNameStr,vn=Et.resolve(pn.fileNameStr);Zt.file(vn,pn.decompressed,{binary:!0,optimizedBinaryString:!0,date:pn.date,dir:pn.dir,comment:pn.fileCommentStr.length?pn.fileCommentStr:null,unixPermissions:pn.unixPermissions,dosPermissions:pn.dosPermissions,createFolders:Wt.createFolders}),pn.dir||(Zt.file(vn).unsafeOriginalName=gn)}return cn.zipComment.length&&(Zt.comment=cn.zipComment),Zt})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(dt,vt,St){var Et=dt("../utils"),Ct=dt("../stream/GenericWorker");function At(Rt,Dt){Ct.call(this,"Nodejs stream input adapter for "+Rt),this._upstreamEnded=!1,this._bindStream(Dt)}Et.inherits(At,Ct),At.prototype._bindStream=function(Rt){var Dt=this;(this._stream=Rt).pause(),Rt.on("data",function(Nt){Dt.push({data:Nt,meta:{percent:0}})}).on("error",function(Nt){Dt.isPaused?this.generatedError=Nt:Dt.error(Nt)}).on("end",function(){Dt.isPaused?Dt._upstreamEnded=!0:Dt.end()})},At.prototype.pause=function(){return!!Ct.prototype.pause.call(this)&&(this._stream.pause(),!0)},At.prototype.resume=function(){return!!Ct.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},vt.exports=At},{"../stream/GenericWorker":28,"../utils":32}],13:[function(dt,vt,St){var Et=dt("readable-stream").Readable;function Ct(At,Rt,Dt){Et.call(this,Rt),this._helper=At;var Nt=this;At.on("data",function(Ft,Ut){Nt.push(Ft)||Nt._helper.pause(),Dt&&Dt(Ut)}).on("error",function(Ft){Nt.emit("error",Ft)}).on("end",function(){Nt.push(null)})}dt("../utils").inherits(Ct,Et),Ct.prototype._read=function(){this._helper.resume()},vt.exports=Ct},{"../utils":32,"readable-stream":16}],14:[function(dt,vt,St){vt.exports={isNode:typeof Buffer<"u",newBufferFrom:function(Et,Ct){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(Et,Ct);if(typeof Et=="number")throw new Error('The "data" argument must not be a number');return new Buffer(Et,Ct)},allocBuffer:function(Et){if(Buffer.alloc)return Buffer.alloc(Et);var Ct=new Buffer(Et);return Ct.fill(0),Ct},isBuffer:function(Et){return Buffer.isBuffer(Et)},isStream:function(Et){return Et&&typeof Et.on=="function"&&typeof Et.pause=="function"&&typeof Et.resume=="function"}}},{}],15:[function(dt,vt,St){function Et(vn,bn,$n){var Tn,In=At.getTypeOf(bn),Pn=At.extend($n||{},Nt);Pn.date=Pn.date||new Date,Pn.compression!==null&&(Pn.compression=Pn.compression.toUpperCase()),typeof Pn.unixPermissions=="string"&&(Pn.unixPermissions=parseInt(Pn.unixPermissions,8)),Pn.unixPermissions&&16384&Pn.unixPermissions&&(Pn.dir=!0),Pn.dosPermissions&&16&Pn.dosPermissions&&(Pn.dir=!0),Pn.dir&&(vn=hn(vn)),Pn.createFolders&&(Tn=cn(vn))&&dn.call(this,Tn,!0);var zn=In==="string"&&Pn.binary===!1&&Pn.base64===!1;$n&&$n.binary!==void 0||(Pn.binary=!zn),(bn instanceof Ft&&bn.uncompressedSize===0||Pn.dir||!bn||bn.length===0)&&(Pn.base64=!1,Pn.binary=!0,bn="",Pn.compression="STORE",In="string");var An=null;An=bn instanceof Ft||bn instanceof Rt?bn:Zt.isNode&&Zt.isStream(bn)?new Kt(vn,bn):At.prepareContent(vn,bn,Pn.binary,Pn.optimizedBinaryString,Pn.base64);var Gn=new Ut(vn,An,Pn);this.files[vn]=Gn}var Ct=dt("./utf8"),At=dt("./utils"),Rt=dt("./stream/GenericWorker"),Dt=dt("./stream/StreamHelper"),Nt=dt("./defaults"),Ft=dt("./compressedObject"),Ut=dt("./zipObject"),Wt=dt("./generate"),Zt=dt("./nodejsUtils"),Kt=dt("./nodejs/NodejsStreamInputAdapter"),cn=function(vn){vn.slice(-1)==="/"&&(vn=vn.substring(0,vn.length-1));var bn=vn.lastIndexOf("/");return 0<bn?vn.substring(0,bn):""},hn=function(vn){return vn.slice(-1)!=="/"&&(vn+="/"),vn},dn=function(vn,bn){return bn=bn!==void 0?bn:Nt.createFolders,vn=hn(vn),this.files[vn]||Et.call(this,vn,null,{dir:!0,createFolders:bn}),this.files[vn]};function pn(vn){return Object.prototype.toString.call(vn)==="[object RegExp]"}var gn={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(vn){var bn,$n,Tn;for(bn in this.files)Tn=this.files[bn],($n=bn.slice(this.root.length,bn.length))&&bn.slice(0,this.root.length)===this.root&&vn($n,Tn)},filter:function(vn){var bn=[];return this.forEach(function($n,Tn){vn($n,Tn)&&bn.push(Tn)}),bn},file:function(vn,bn,$n){if(arguments.length!==1)return vn=this.root+vn,Et.call(this,vn,bn,$n),this;if(pn(vn)){var Tn=vn;return this.filter(function(Pn,zn){return!zn.dir&&Tn.test(Pn)})}var In=this.files[this.root+vn];return In&&!In.dir?In:null},folder:function(vn){if(!vn)return this;if(pn(vn))return this.filter(function(In,Pn){return Pn.dir&&vn.test(In)});var bn=this.root+vn,$n=dn.call(this,bn),Tn=this.clone();return Tn.root=$n.name,Tn},remove:function(vn){vn=this.root+vn;var bn=this.files[vn];if(bn||(vn.slice(-1)!=="/"&&(vn+="/"),bn=this.files[vn]),bn&&!bn.dir)delete this.files[vn];else for(var $n=this.filter(function(In,Pn){return Pn.name.slice(0,vn.length)===vn}),Tn=0;Tn<$n.length;Tn++)delete this.files[$n[Tn].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(vn){var bn,$n={};try{if(($n=At.extend(vn||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Ct.utf8encode})).type=$n.type.toLowerCase(),$n.compression=$n.compression.toUpperCase(),$n.type==="binarystring"&&($n.type="string"),!$n.type)throw new Error("No output type specified.");At.checkSupport($n.type),$n.platform!=="darwin"&&$n.platform!=="freebsd"&&$n.platform!=="linux"&&$n.platform!=="sunos"||($n.platform="UNIX"),$n.platform==="win32"&&($n.platform="DOS");var Tn=$n.comment||this.comment||"";bn=Wt.generateWorker(this,$n,Tn)}catch(In){(bn=new Rt("error")).error(In)}return new Dt(bn,$n.type||"string",$n.mimeType)},generateAsync:function(vn,bn){return this.generateInternalStream(vn).accumulate(bn)},generateNodeStream:function(vn,bn){return(vn=vn||{}).type||(vn.type="nodebuffer"),this.generateInternalStream(vn).toNodejsStream(bn)}};vt.exports=gn},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(dt,vt,St){vt.exports=dt("stream")},{stream:void 0}],17:[function(dt,vt,St){var Et=dt("./DataReader");function Ct(At){Et.call(this,At);for(var Rt=0;Rt<this.data.length;Rt++)At[Rt]=255&At[Rt]}dt("../utils").inherits(Ct,Et),Ct.prototype.byteAt=function(At){return this.data[this.zero+At]},Ct.prototype.lastIndexOfSignature=function(At){for(var Rt=At.charCodeAt(0),Dt=At.charCodeAt(1),Nt=At.charCodeAt(2),Ft=At.charCodeAt(3),Ut=this.length-4;0<=Ut;--Ut)if(this.data[Ut]===Rt&&this.data[Ut+1]===Dt&&this.data[Ut+2]===Nt&&this.data[Ut+3]===Ft)return Ut-this.zero;return-1},Ct.prototype.readAndCheckSignature=function(At){var Rt=At.charCodeAt(0),Dt=At.charCodeAt(1),Nt=At.charCodeAt(2),Ft=At.charCodeAt(3),Ut=this.readData(4);return Rt===Ut[0]&&Dt===Ut[1]&&Nt===Ut[2]&&Ft===Ut[3]},Ct.prototype.readData=function(At){if(this.checkOffset(At),At===0)return[];var Rt=this.data.slice(this.zero+this.index,this.zero+this.index+At);return this.index+=At,Rt},vt.exports=Ct},{"../utils":32,"./DataReader":18}],18:[function(dt,vt,St){var Et=dt("../utils");function Ct(At){this.data=At,this.length=At.length,this.index=0,this.zero=0}Ct.prototype={checkOffset:function(At){this.checkIndex(this.index+At)},checkIndex:function(At){if(this.length<this.zero+At||At<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+At+"). Corrupted zip ?")},setIndex:function(At){this.checkIndex(At),this.index=At},skip:function(At){this.setIndex(this.index+At)},byteAt:function(){},readInt:function(At){var Rt,Dt=0;for(this.checkOffset(At),Rt=this.index+At-1;Rt>=this.index;Rt--)Dt=(Dt<<8)+this.byteAt(Rt);return this.index+=At,Dt},readString:function(At){return Et.transformTo("string",this.readData(At))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var At=this.readInt(4);return new Date(Date.UTC(1980+(At>>25&127),(At>>21&15)-1,At>>16&31,At>>11&31,At>>5&63,(31&At)<<1))}},vt.exports=Ct},{"../utils":32}],19:[function(dt,vt,St){var Et=dt("./Uint8ArrayReader");function Ct(At){Et.call(this,At)}dt("../utils").inherits(Ct,Et),Ct.prototype.readData=function(At){this.checkOffset(At);var Rt=this.data.slice(this.zero+this.index,this.zero+this.index+At);return this.index+=At,Rt},vt.exports=Ct},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(dt,vt,St){var Et=dt("./DataReader");function Ct(At){Et.call(this,At)}dt("../utils").inherits(Ct,Et),Ct.prototype.byteAt=function(At){return this.data.charCodeAt(this.zero+At)},Ct.prototype.lastIndexOfSignature=function(At){return this.data.lastIndexOf(At)-this.zero},Ct.prototype.readAndCheckSignature=function(At){return At===this.readData(4)},Ct.prototype.readData=function(At){this.checkOffset(At);var Rt=this.data.slice(this.zero+this.index,this.zero+this.index+At);return this.index+=At,Rt},vt.exports=Ct},{"../utils":32,"./DataReader":18}],21:[function(dt,vt,St){var Et=dt("./ArrayReader");function Ct(At){Et.call(this,At)}dt("../utils").inherits(Ct,Et),Ct.prototype.readData=function(At){if(this.checkOffset(At),At===0)return new Uint8Array(0);var Rt=this.data.subarray(this.zero+this.index,this.zero+this.index+At);return this.index+=At,Rt},vt.exports=Ct},{"../utils":32,"./ArrayReader":17}],22:[function(dt,vt,St){var Et=dt("../utils"),Ct=dt("../support"),At=dt("./ArrayReader"),Rt=dt("./StringReader"),Dt=dt("./NodeBufferReader"),Nt=dt("./Uint8ArrayReader");vt.exports=function(Ft){var Ut=Et.getTypeOf(Ft);return Et.checkSupport(Ut),Ut!=="string"||Ct.uint8array?Ut==="nodebuffer"?new Dt(Ft):Ct.uint8array?new Nt(Et.transformTo("uint8array",Ft)):new At(Et.transformTo("array",Ft)):new Rt(Ft)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(dt,vt,St){St.LOCAL_FILE_HEADER="PK",St.CENTRAL_FILE_HEADER="PK",St.CENTRAL_DIRECTORY_END="PK",St.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",St.ZIP64_CENTRAL_DIRECTORY_END="PK",St.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(dt,vt,St){var Et=dt("./GenericWorker"),Ct=dt("../utils");function At(Rt){Et.call(this,"ConvertWorker to "+Rt),this.destType=Rt}Ct.inherits(At,Et),At.prototype.processChunk=function(Rt){this.push({data:Ct.transformTo(this.destType,Rt.data),meta:Rt.meta})},vt.exports=At},{"../utils":32,"./GenericWorker":28}],25:[function(dt,vt,St){var Et=dt("./GenericWorker"),Ct=dt("../crc32");function At(){Et.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}dt("../utils").inherits(At,Et),At.prototype.processChunk=function(Rt){this.streamInfo.crc32=Ct(Rt.data,this.streamInfo.crc32||0),this.push(Rt)},vt.exports=At},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(dt,vt,St){var Et=dt("../utils"),Ct=dt("./GenericWorker");function At(Rt){Ct.call(this,"DataLengthProbe for "+Rt),this.propName=Rt,this.withStreamInfo(Rt,0)}Et.inherits(At,Ct),At.prototype.processChunk=function(Rt){if(Rt){var Dt=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=Dt+Rt.data.length}Ct.prototype.processChunk.call(this,Rt)},vt.exports=At},{"../utils":32,"./GenericWorker":28}],27:[function(dt,vt,St){var Et=dt("../utils"),Ct=dt("./GenericWorker");function At(Rt){Ct.call(this,"DataWorker");var Dt=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,Rt.then(function(Nt){Dt.dataIsReady=!0,Dt.data=Nt,Dt.max=Nt&&Nt.length||0,Dt.type=Et.getTypeOf(Nt),Dt.isPaused||Dt._tickAndRepeat()},function(Nt){Dt.error(Nt)})}Et.inherits(At,Ct),At.prototype.cleanUp=function(){Ct.prototype.cleanUp.call(this),this.data=null},At.prototype.resume=function(){return!!Ct.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Et.delay(this._tickAndRepeat,[],this)),!0)},At.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(Et.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},At.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var Rt=null,Dt=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":Rt=this.data.substring(this.index,Dt);break;case"uint8array":Rt=this.data.subarray(this.index,Dt);break;case"array":case"nodebuffer":Rt=this.data.slice(this.index,Dt)}return this.index=Dt,this.push({data:Rt,meta:{percent:this.max?this.index/this.max*100:0}})},vt.exports=At},{"../utils":32,"./GenericWorker":28}],28:[function(dt,vt,St){function Et(Ct){this.name=Ct||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}Et.prototype={push:function(Ct){this.emit("data",Ct)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(Ct){this.emit("error",Ct)}return!0},error:function(Ct){return!this.isFinished&&(this.isPaused?this.generatedError=Ct:(this.isFinished=!0,this.emit("error",Ct),this.previous&&this.previous.error(Ct),this.cleanUp()),!0)},on:function(Ct,At){return this._listeners[Ct].push(At),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(Ct,At){if(this._listeners[Ct])for(var Rt=0;Rt<this._listeners[Ct].length;Rt++)this._listeners[Ct][Rt].call(this,At)},pipe:function(Ct){return Ct.registerPrevious(this)},registerPrevious:function(Ct){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=Ct.streamInfo,this.mergeStreamInfo(),this.previous=Ct;var At=this;return Ct.on("data",function(Rt){At.processChunk(Rt)}),Ct.on("end",function(){At.end()}),Ct.on("error",function(Rt){At.error(Rt)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var Ct=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),Ct=!0),this.previous&&this.previous.resume(),!Ct},flush:function(){},processChunk:function(Ct){this.push(Ct)},withStreamInfo:function(Ct,At){return this.extraStreamInfo[Ct]=At,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var Ct in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,Ct)&&(this.streamInfo[Ct]=this.extraStreamInfo[Ct])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var Ct="Worker "+this.name;return this.previous?this.previous+" -> "+Ct:Ct}},vt.exports=Et},{}],29:[function(dt,vt,St){var Et=dt("../utils"),Ct=dt("./ConvertWorker"),At=dt("./GenericWorker"),Rt=dt("../base64"),Dt=dt("../support"),Nt=dt("../external"),Ft=null;if(Dt.nodestream)try{Ft=dt("../nodejs/NodejsStreamOutputAdapter")}catch{}function Ut(Zt,Kt){return new Nt.Promise(function(cn,hn){var dn=[],pn=Zt._internalType,gn=Zt._outputType,vn=Zt._mimeType;Zt.on("data",function(bn,$n){dn.push(bn),Kt&&Kt($n)}).on("error",function(bn){dn=[],hn(bn)}).on("end",function(){try{var bn=function($n,Tn,In){switch($n){case"blob":return Et.newBlob(Et.transformTo("arraybuffer",Tn),In);case"base64":return Rt.encode(Tn);default:return Et.transformTo($n,Tn)}}(gn,function($n,Tn){var In,Pn=0,zn=null,An=0;for(In=0;In<Tn.length;In++)An+=Tn[In].length;switch($n){case"string":return Tn.join("");case"array":return Array.prototype.concat.apply([],Tn);case"uint8array":for(zn=new Uint8Array(An),In=0;In<Tn.length;In++)zn.set(Tn[In],Pn),Pn+=Tn[In].length;return zn;case"nodebuffer":return Buffer.concat(Tn);default:throw new Error("concat : unsupported type '"+$n+"'")}}(pn,dn),vn);cn(bn)}catch($n){hn($n)}dn=[]}).resume()})}function Wt(Zt,Kt,cn){var hn=Kt;switch(Kt){case"blob":case"arraybuffer":hn="uint8array";break;case"base64":hn="string"}try{this._internalType=hn,this._outputType=Kt,this._mimeType=cn,Et.checkSupport(hn),this._worker=Zt.pipe(new Ct(hn)),Zt.lock()}catch(dn){this._worker=new At("error"),this._worker.error(dn)}}Wt.prototype={accumulate:function(Zt){return Ut(this,Zt)},on:function(Zt,Kt){var cn=this;return Zt==="data"?this._worker.on(Zt,function(hn){Kt.call(cn,hn.data,hn.meta)}):this._worker.on(Zt,function(){Et.delay(Kt,arguments,cn)}),this},resume:function(){return Et.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Zt){if(Et.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Ft(this,{objectMode:this._outputType!=="nodebuffer"},Zt)}},vt.exports=Wt},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(dt,vt,St){if(St.base64=!0,St.array=!0,St.string=!0,St.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",St.nodebuffer=typeof Buffer<"u",St.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")St.blob=!1;else{var Et=new ArrayBuffer(0);try{St.blob=new Blob([Et],{type:"application/zip"}).size===0}catch{try{var Ct=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);Ct.append(Et),St.blob=Ct.getBlob("application/zip").size===0}catch{St.blob=!1}}}try{St.nodestream=!!dt("readable-stream").Readable}catch{St.nodestream=!1}},{"readable-stream":16}],31:[function(dt,vt,St){for(var Et=dt("./utils"),Ct=dt("./support"),At=dt("./nodejsUtils"),Rt=dt("./stream/GenericWorker"),Dt=new Array(256),Nt=0;Nt<256;Nt++)Dt[Nt]=252<=Nt?6:248<=Nt?5:240<=Nt?4:224<=Nt?3:192<=Nt?2:1;Dt[254]=Dt[254]=1;function Ft(){Rt.call(this,"utf-8 decode"),this.leftOver=null}function Ut(){Rt.call(this,"utf-8 encode")}St.utf8encode=function(Wt){return Ct.nodebuffer?At.newBufferFrom(Wt,"utf-8"):function(Zt){var Kt,cn,hn,dn,pn,gn=Zt.length,vn=0;for(dn=0;dn<gn;dn++)(64512&(cn=Zt.charCodeAt(dn)))==55296&&dn+1<gn&&(64512&(hn=Zt.charCodeAt(dn+1)))==56320&&(cn=65536+(cn-55296<<10)+(hn-56320),dn++),vn+=cn<128?1:cn<2048?2:cn<65536?3:4;for(Kt=Ct.uint8array?new Uint8Array(vn):new Array(vn),dn=pn=0;pn<vn;dn++)(64512&(cn=Zt.charCodeAt(dn)))==55296&&dn+1<gn&&(64512&(hn=Zt.charCodeAt(dn+1)))==56320&&(cn=65536+(cn-55296<<10)+(hn-56320),dn++),cn<128?Kt[pn++]=cn:(cn<2048?Kt[pn++]=192|cn>>>6:(cn<65536?Kt[pn++]=224|cn>>>12:(Kt[pn++]=240|cn>>>18,Kt[pn++]=128|cn>>>12&63),Kt[pn++]=128|cn>>>6&63),Kt[pn++]=128|63&cn);return Kt}(Wt)},St.utf8decode=function(Wt){return Ct.nodebuffer?Et.transformTo("nodebuffer",Wt).toString("utf-8"):function(Zt){var Kt,cn,hn,dn,pn=Zt.length,gn=new Array(2*pn);for(Kt=cn=0;Kt<pn;)if((hn=Zt[Kt++])<128)gn[cn++]=hn;else if(4<(dn=Dt[hn]))gn[cn++]=65533,Kt+=dn-1;else{for(hn&=dn===2?31:dn===3?15:7;1<dn&&Kt<pn;)hn=hn<<6|63&Zt[Kt++],dn--;1<dn?gn[cn++]=65533:hn<65536?gn[cn++]=hn:(hn-=65536,gn[cn++]=55296|hn>>10&1023,gn[cn++]=56320|1023&hn)}return gn.length!==cn&&(gn.subarray?gn=gn.subarray(0,cn):gn.length=cn),Et.applyFromCharCode(gn)}(Wt=Et.transformTo(Ct.uint8array?"uint8array":"array",Wt))},Et.inherits(Ft,Rt),Ft.prototype.processChunk=function(Wt){var Zt=Et.transformTo(Ct.uint8array?"uint8array":"array",Wt.data);if(this.leftOver&&this.leftOver.length){if(Ct.uint8array){var Kt=Zt;(Zt=new Uint8Array(Kt.length+this.leftOver.length)).set(this.leftOver,0),Zt.set(Kt,this.leftOver.length)}else Zt=this.leftOver.concat(Zt);this.leftOver=null}var cn=function(dn,pn){var gn;for((pn=pn||dn.length)>dn.length&&(pn=dn.length),gn=pn-1;0<=gn&&(192&dn[gn])==128;)gn--;return gn<0||gn===0?pn:gn+Dt[dn[gn]]>pn?gn:pn}(Zt),hn=Zt;cn!==Zt.length&&(Ct.uint8array?(hn=Zt.subarray(0,cn),this.leftOver=Zt.subarray(cn,Zt.length)):(hn=Zt.slice(0,cn),this.leftOver=Zt.slice(cn,Zt.length))),this.push({data:St.utf8decode(hn),meta:Wt.meta})},Ft.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:St.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},St.Utf8DecodeWorker=Ft,Et.inherits(Ut,Rt),Ut.prototype.processChunk=function(Wt){this.push({data:St.utf8encode(Wt.data),meta:Wt.meta})},St.Utf8EncodeWorker=Ut},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(dt,vt,St){var Et=dt("./support"),Ct=dt("./base64"),At=dt("./nodejsUtils"),Rt=dt("./external");function Dt(Kt){return Kt}function Nt(Kt,cn){for(var hn=0;hn<Kt.length;++hn)cn[hn]=255&Kt.charCodeAt(hn);return cn}dt("setimmediate"),St.newBlob=function(Kt,cn){St.checkSupport("blob");try{return new Blob([Kt],{type:cn})}catch{try{var hn=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return hn.append(Kt),hn.getBlob(cn)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ft={stringifyByChunk:function(Kt,cn,hn){var dn=[],pn=0,gn=Kt.length;if(gn<=hn)return String.fromCharCode.apply(null,Kt);for(;pn<gn;)cn==="array"||cn==="nodebuffer"?dn.push(String.fromCharCode.apply(null,Kt.slice(pn,Math.min(pn+hn,gn)))):dn.push(String.fromCharCode.apply(null,Kt.subarray(pn,Math.min(pn+hn,gn)))),pn+=hn;return dn.join("")},stringifyByChar:function(Kt){for(var cn="",hn=0;hn<Kt.length;hn++)cn+=String.fromCharCode(Kt[hn]);return cn},applyCanBeUsed:{uint8array:function(){try{return Et.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return Et.nodebuffer&&String.fromCharCode.apply(null,At.allocBuffer(1)).length===1}catch{return!1}}()}};function Ut(Kt){var cn=65536,hn=St.getTypeOf(Kt),dn=!0;if(hn==="uint8array"?dn=Ft.applyCanBeUsed.uint8array:hn==="nodebuffer"&&(dn=Ft.applyCanBeUsed.nodebuffer),dn)for(;1<cn;)try{return Ft.stringifyByChunk(Kt,hn,cn)}catch{cn=Math.floor(cn/2)}return Ft.stringifyByChar(Kt)}function Wt(Kt,cn){for(var hn=0;hn<Kt.length;hn++)cn[hn]=Kt[hn];return cn}St.applyFromCharCode=Ut;var Zt={};Zt.string={string:Dt,array:function(Kt){return Nt(Kt,new Array(Kt.length))},arraybuffer:function(Kt){return Zt.string.uint8array(Kt).buffer},uint8array:function(Kt){return Nt(Kt,new Uint8Array(Kt.length))},nodebuffer:function(Kt){return Nt(Kt,At.allocBuffer(Kt.length))}},Zt.array={string:Ut,array:Dt,arraybuffer:function(Kt){return new Uint8Array(Kt).buffer},uint8array:function(Kt){return new Uint8Array(Kt)},nodebuffer:function(Kt){return At.newBufferFrom(Kt)}},Zt.arraybuffer={string:function(Kt){return Ut(new Uint8Array(Kt))},array:function(Kt){return Wt(new Uint8Array(Kt),new Array(Kt.byteLength))},arraybuffer:Dt,uint8array:function(Kt){return new Uint8Array(Kt)},nodebuffer:function(Kt){return At.newBufferFrom(new Uint8Array(Kt))}},Zt.uint8array={string:Ut,array:function(Kt){return Wt(Kt,new Array(Kt.length))},arraybuffer:function(Kt){return Kt.buffer},uint8array:Dt,nodebuffer:function(Kt){return At.newBufferFrom(Kt)}},Zt.nodebuffer={string:Ut,array:function(Kt){return Wt(Kt,new Array(Kt.length))},arraybuffer:function(Kt){return Zt.nodebuffer.uint8array(Kt).buffer},uint8array:function(Kt){return Wt(Kt,new Uint8Array(Kt.length))},nodebuffer:Dt},St.transformTo=function(Kt,cn){if(cn=cn||"",!Kt)return cn;St.checkSupport(Kt);var hn=St.getTypeOf(cn);return Zt[hn][Kt](cn)},St.resolve=function(Kt){for(var cn=Kt.split("/"),hn=[],dn=0;dn<cn.length;dn++){var pn=cn[dn];pn==="."||pn===""&&dn!==0&&dn!==cn.length-1||(pn===".."?hn.pop():hn.push(pn))}return hn.join("/")},St.getTypeOf=function(Kt){return typeof Kt=="string"?"string":Object.prototype.toString.call(Kt)==="[object Array]"?"array":Et.nodebuffer&&At.isBuffer(Kt)?"nodebuffer":Et.uint8array&&Kt instanceof Uint8Array?"uint8array":Et.arraybuffer&&Kt instanceof ArrayBuffer?"arraybuffer":void 0},St.checkSupport=function(Kt){if(!Et[Kt.toLowerCase()])throw new Error(Kt+" is not supported by this platform")},St.MAX_VALUE_16BITS=65535,St.MAX_VALUE_32BITS=-1,St.pretty=function(Kt){var cn,hn,dn="";for(hn=0;hn<(Kt||"").length;hn++)dn+="\\x"+((cn=Kt.charCodeAt(hn))<16?"0":"")+cn.toString(16).toUpperCase();return dn},St.delay=function(Kt,cn,hn){setImmediate(function(){Kt.apply(hn||null,cn||[])})},St.inherits=function(Kt,cn){function hn(){}hn.prototype=cn.prototype,Kt.prototype=new hn},St.extend=function(){var Kt,cn,hn={};for(Kt=0;Kt<arguments.length;Kt++)for(cn in arguments[Kt])Object.prototype.hasOwnProperty.call(arguments[Kt],cn)&&hn[cn]===void 0&&(hn[cn]=arguments[Kt][cn]);return hn},St.prepareContent=function(Kt,cn,hn,dn,pn){return Rt.Promise.resolve(cn).then(function(gn){return Et.blob&&(gn instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(gn))!==-1)&&typeof FileReader<"u"?new Rt.Promise(function(vn,bn){var $n=new FileReader;$n.onload=function(Tn){vn(Tn.target.result)},$n.onerror=function(Tn){bn(Tn.target.error)},$n.readAsArrayBuffer(gn)}):gn}).then(function(gn){var vn=St.getTypeOf(gn);return vn?(vn==="arraybuffer"?gn=St.transformTo("uint8array",gn):vn==="string"&&(pn?gn=Ct.decode(gn):hn&&dn!==!0&&(gn=function(bn){return Nt(bn,Et.uint8array?new Uint8Array(bn.length):new Array(bn.length))}(gn))),gn):Rt.Promise.reject(new Error("Can't read the data of '"+Kt+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(dt,vt,St){var Et=dt("./reader/readerFor"),Ct=dt("./utils"),At=dt("./signature"),Rt=dt("./zipEntry"),Dt=dt("./support");function Nt(Ft){this.files=[],this.loadOptions=Ft}Nt.prototype={checkSignature:function(Ft){if(!this.reader.readAndCheckSignature(Ft)){this.reader.index-=4;var Ut=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Ct.pretty(Ut)+", expected "+Ct.pretty(Ft)+")")}},isSignature:function(Ft,Ut){var Wt=this.reader.index;this.reader.setIndex(Ft);var Zt=this.reader.readString(4)===Ut;return this.reader.setIndex(Wt),Zt},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Ft=this.reader.readData(this.zipCommentLength),Ut=Dt.uint8array?"uint8array":"array",Wt=Ct.transformTo(Ut,Ft);this.zipComment=this.loadOptions.decodeFileName(Wt)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Ft,Ut,Wt,Zt=this.zip64EndOfCentralSize-44;0<Zt;)Ft=this.reader.readInt(2),Ut=this.reader.readInt(4),Wt=this.reader.readData(Ut),this.zip64ExtensibleData[Ft]={id:Ft,length:Ut,value:Wt}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Ft,Ut;for(Ft=0;Ft<this.files.length;Ft++)Ut=this.files[Ft],this.reader.setIndex(Ut.localHeaderOffset),this.checkSignature(At.LOCAL_FILE_HEADER),Ut.readLocalPart(this.reader),Ut.handleUTF8(),Ut.processAttributes()},readCentralDir:function(){var Ft;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(At.CENTRAL_FILE_HEADER);)(Ft=new Rt({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Ft);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Ft=this.reader.lastIndexOfSignature(At.CENTRAL_DIRECTORY_END);if(Ft<0)throw this.isSignature(0,At.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Ft);var Ut=Ft;if(this.checkSignature(At.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Ct.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Ct.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Ct.MAX_VALUE_16BITS||this.centralDirRecords===Ct.MAX_VALUE_16BITS||this.centralDirSize===Ct.MAX_VALUE_32BITS||this.centralDirOffset===Ct.MAX_VALUE_32BITS){if(this.zip64=!0,(Ft=this.reader.lastIndexOfSignature(At.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Ft),this.checkSignature(At.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,At.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(At.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(At.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Wt=this.centralDirOffset+this.centralDirSize;this.zip64&&(Wt+=20,Wt+=12+this.zip64EndOfCentralSize);var Zt=Ut-Wt;if(0<Zt)this.isSignature(Ut,At.CENTRAL_FILE_HEADER)||(this.reader.zero=Zt);else if(Zt<0)throw new Error("Corrupted zip: missing "+Math.abs(Zt)+" bytes.")},prepareReader:function(Ft){this.reader=Et(Ft)},load:function(Ft){this.prepareReader(Ft),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},vt.exports=Nt},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(dt,vt,St){var Et=dt("./reader/readerFor"),Ct=dt("./utils"),At=dt("./compressedObject"),Rt=dt("./crc32"),Dt=dt("./utf8"),Nt=dt("./compressions"),Ft=dt("./support");function Ut(Wt,Zt){this.options=Wt,this.loadOptions=Zt}Ut.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(Wt){var Zt,Kt;if(Wt.skip(22),this.fileNameLength=Wt.readInt(2),Kt=Wt.readInt(2),this.fileName=Wt.readData(this.fileNameLength),Wt.skip(Kt),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((Zt=function(cn){for(var hn in Nt)if(Object.prototype.hasOwnProperty.call(Nt,hn)&&Nt[hn].magic===cn)return Nt[hn];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+Ct.pretty(this.compressionMethod)+" unknown (inner file : "+Ct.transformTo("string",this.fileName)+")");this.decompressed=new At(this.compressedSize,this.uncompressedSize,this.crc32,Zt,Wt.readData(this.compressedSize))},readCentralPart:function(Wt){this.versionMadeBy=Wt.readInt(2),Wt.skip(2),this.bitFlag=Wt.readInt(2),this.compressionMethod=Wt.readString(2),this.date=Wt.readDate(),this.crc32=Wt.readInt(4),this.compressedSize=Wt.readInt(4),this.uncompressedSize=Wt.readInt(4);var Zt=Wt.readInt(2);if(this.extraFieldsLength=Wt.readInt(2),this.fileCommentLength=Wt.readInt(2),this.diskNumberStart=Wt.readInt(2),this.internalFileAttributes=Wt.readInt(2),this.externalFileAttributes=Wt.readInt(4),this.localHeaderOffset=Wt.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Wt.skip(Zt),this.readExtraFields(Wt),this.parseZIP64ExtraField(Wt),this.fileComment=Wt.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Wt=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),Wt==0&&(this.dosPermissions=63&this.externalFileAttributes),Wt==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Wt=Et(this.extraFields[1].value);this.uncompressedSize===Ct.MAX_VALUE_32BITS&&(this.uncompressedSize=Wt.readInt(8)),this.compressedSize===Ct.MAX_VALUE_32BITS&&(this.compressedSize=Wt.readInt(8)),this.localHeaderOffset===Ct.MAX_VALUE_32BITS&&(this.localHeaderOffset=Wt.readInt(8)),this.diskNumberStart===Ct.MAX_VALUE_32BITS&&(this.diskNumberStart=Wt.readInt(4))}},readExtraFields:function(Wt){var Zt,Kt,cn,hn=Wt.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});Wt.index+4<hn;)Zt=Wt.readInt(2),Kt=Wt.readInt(2),cn=Wt.readData(Kt),this.extraFields[Zt]={id:Zt,length:Kt,value:cn};Wt.setIndex(hn)},handleUTF8:function(){var Wt=Ft.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Dt.utf8decode(this.fileName),this.fileCommentStr=Dt.utf8decode(this.fileComment);else{var Zt=this.findExtraFieldUnicodePath();if(Zt!==null)this.fileNameStr=Zt;else{var Kt=Ct.transformTo(Wt,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Kt)}var cn=this.findExtraFieldUnicodeComment();if(cn!==null)this.fileCommentStr=cn;else{var hn=Ct.transformTo(Wt,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(hn)}}},findExtraFieldUnicodePath:function(){var Wt=this.extraFields[28789];if(Wt){var Zt=Et(Wt.value);return Zt.readInt(1)!==1||Rt(this.fileName)!==Zt.readInt(4)?null:Dt.utf8decode(Zt.readData(Wt.length-5))}return null},findExtraFieldUnicodeComment:function(){var Wt=this.extraFields[25461];if(Wt){var Zt=Et(Wt.value);return Zt.readInt(1)!==1||Rt(this.fileComment)!==Zt.readInt(4)?null:Dt.utf8decode(Zt.readData(Wt.length-5))}return null}},vt.exports=Ut},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(dt,vt,St){function Et(Zt,Kt,cn){this.name=Zt,this.dir=cn.dir,this.date=cn.date,this.comment=cn.comment,this.unixPermissions=cn.unixPermissions,this.dosPermissions=cn.dosPermissions,this._data=Kt,this._dataBinary=cn.binary,this.options={compression:cn.compression,compressionOptions:cn.compressionOptions}}var Ct=dt("./stream/StreamHelper"),At=dt("./stream/DataWorker"),Rt=dt("./utf8"),Dt=dt("./compressedObject"),Nt=dt("./stream/GenericWorker");Et.prototype={internalStream:function(Zt){var Kt=null,cn="string";try{if(!Zt)throw new Error("No output type specified.");var hn=(cn=Zt.toLowerCase())==="string"||cn==="text";cn!=="binarystring"&&cn!=="text"||(cn="string"),Kt=this._decompressWorker();var dn=!this._dataBinary;dn&&!hn&&(Kt=Kt.pipe(new Rt.Utf8EncodeWorker)),!dn&&hn&&(Kt=Kt.pipe(new Rt.Utf8DecodeWorker))}catch(pn){(Kt=new Nt("error")).error(pn)}return new Ct(Kt,cn,"")},async:function(Zt,Kt){return this.internalStream(Zt).accumulate(Kt)},nodeStream:function(Zt,Kt){return this.internalStream(Zt||"nodebuffer").toNodejsStream(Kt)},_compressWorker:function(Zt,Kt){if(this._data instanceof Dt&&this._data.compression.magic===Zt.magic)return this._data.getCompressedWorker();var cn=this._decompressWorker();return this._dataBinary||(cn=cn.pipe(new Rt.Utf8EncodeWorker)),Dt.createWorkerFrom(cn,Zt,Kt)},_decompressWorker:function(){return this._data instanceof Dt?this._data.getContentWorker():this._data instanceof Nt?this._data:new At(this._data)}};for(var Ft=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Ut=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Wt=0;Wt<Ft.length;Wt++)Et.prototype[Ft[Wt]]=Ut;vt.exports=Et},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(dt,vt,St){(function(Et){var Ct,At,Rt=Et.MutationObserver||Et.WebKitMutationObserver;if(Rt){var Dt=0,Nt=new Rt(Zt),Ft=Et.document.createTextNode("");Nt.observe(Ft,{characterData:!0}),Ct=function(){Ft.data=Dt=++Dt%2}}else if(Et.setImmediate||Et.MessageChannel===void 0)Ct="document"in Et&&"onreadystatechange"in Et.document.createElement("script")?function(){var Kt=Et.document.createElement("script");Kt.onreadystatechange=function(){Zt(),Kt.onreadystatechange=null,Kt.parentNode.removeChild(Kt),Kt=null},Et.document.documentElement.appendChild(Kt)}:function(){setTimeout(Zt,0)};else{var Ut=new Et.MessageChannel;Ut.port1.onmessage=Zt,Ct=function(){Ut.port2.postMessage(0)}}var Wt=[];function Zt(){var Kt,cn;At=!0;for(var hn=Wt.length;hn;){for(cn=Wt,Wt=[],Kt=-1;++Kt<hn;)cn[Kt]();hn=Wt.length}At=!1}vt.exports=function(Kt){Wt.push(Kt)!==1||At||Ct()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(dt,vt,St){var Et=dt("immediate");function Ct(){}var At={},Rt=["REJECTED"],Dt=["FULFILLED"],Nt=["PENDING"];function Ft(hn){if(typeof hn!="function")throw new TypeError("resolver must be a function");this.state=Nt,this.queue=[],this.outcome=void 0,hn!==Ct&&Kt(this,hn)}function Ut(hn,dn,pn){this.promise=hn,typeof dn=="function"&&(this.onFulfilled=dn,this.callFulfilled=this.otherCallFulfilled),typeof pn=="function"&&(this.onRejected=pn,this.callRejected=this.otherCallRejected)}function Wt(hn,dn,pn){Et(function(){var gn;try{gn=dn(pn)}catch(vn){return At.reject(hn,vn)}gn===hn?At.reject(hn,new TypeError("Cannot resolve promise with itself")):At.resolve(hn,gn)})}function Zt(hn){var dn=hn&&hn.then;if(hn&&(typeof hn=="object"||typeof hn=="function")&&typeof dn=="function")return function(){dn.apply(hn,arguments)}}function Kt(hn,dn){var pn=!1;function gn($n){pn||(pn=!0,At.reject(hn,$n))}function vn($n){pn||(pn=!0,At.resolve(hn,$n))}var bn=cn(function(){dn(vn,gn)});bn.status==="error"&&gn(bn.value)}function cn(hn,dn){var pn={};try{pn.value=hn(dn),pn.status="success"}catch(gn){pn.status="error",pn.value=gn}return pn}(vt.exports=Ft).prototype.finally=function(hn){if(typeof hn!="function")return this;var dn=this.constructor;return this.then(function(pn){return dn.resolve(hn()).then(function(){return pn})},function(pn){return dn.resolve(hn()).then(function(){throw pn})})},Ft.prototype.catch=function(hn){return this.then(null,hn)},Ft.prototype.then=function(hn,dn){if(typeof hn!="function"&&this.state===Dt||typeof dn!="function"&&this.state===Rt)return this;var pn=new this.constructor(Ct);return this.state!==Nt?Wt(pn,this.state===Dt?hn:dn,this.outcome):this.queue.push(new Ut(pn,hn,dn)),pn},Ut.prototype.callFulfilled=function(hn){At.resolve(this.promise,hn)},Ut.prototype.otherCallFulfilled=function(hn){Wt(this.promise,this.onFulfilled,hn)},Ut.prototype.callRejected=function(hn){At.reject(this.promise,hn)},Ut.prototype.otherCallRejected=function(hn){Wt(this.promise,this.onRejected,hn)},At.resolve=function(hn,dn){var pn=cn(Zt,dn);if(pn.status==="error")return At.reject(hn,pn.value);var gn=pn.value;if(gn)Kt(hn,gn);else{hn.state=Dt,hn.outcome=dn;for(var vn=-1,bn=hn.queue.length;++vn<bn;)hn.queue[vn].callFulfilled(dn)}return hn},At.reject=function(hn,dn){hn.state=Rt,hn.outcome=dn;for(var pn=-1,gn=hn.queue.length;++pn<gn;)hn.queue[pn].callRejected(dn);return hn},Ft.resolve=function(hn){return hn instanceof this?hn:At.resolve(new this(Ct),hn)},Ft.reject=function(hn){var dn=new this(Ct);return At.reject(dn,hn)},Ft.all=function(hn){var dn=this;if(Object.prototype.toString.call(hn)!=="[object Array]")return this.reject(new TypeError("must be an array"));var pn=hn.length,gn=!1;if(!pn)return this.resolve([]);for(var vn=new Array(pn),bn=0,$n=-1,Tn=new this(Ct);++$n<pn;)In(hn[$n],$n);return Tn;function In(Pn,zn){dn.resolve(Pn).then(function(An){vn[zn]=An,++bn!==pn||gn||(gn=!0,At.resolve(Tn,vn))},function(An){gn||(gn=!0,At.reject(Tn,An))})}},Ft.race=function(hn){var dn=this;if(Object.prototype.toString.call(hn)!=="[object Array]")return this.reject(new TypeError("must be an array"));var pn=hn.length,gn=!1;if(!pn)return this.resolve([]);for(var vn=-1,bn=new this(Ct);++vn<pn;)$n=hn[vn],dn.resolve($n).then(function(Tn){gn||(gn=!0,At.resolve(bn,Tn))},function(Tn){gn||(gn=!0,At.reject(bn,Tn))});var $n;return bn}},{immediate:36}],38:[function(dt,vt,St){var Et={};(0,dt("./lib/utils/common").assign)(Et,dt("./lib/deflate"),dt("./lib/inflate"),dt("./lib/zlib/constants")),vt.exports=Et},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(dt,vt,St){var Et=dt("./zlib/deflate"),Ct=dt("./utils/common"),At=dt("./utils/strings"),Rt=dt("./zlib/messages"),Dt=dt("./zlib/zstream"),Nt=Object.prototype.toString,Ft=0,Ut=-1,Wt=0,Zt=8;function Kt(hn){if(!(this instanceof Kt))return new Kt(hn);this.options=Ct.assign({level:Ut,method:Zt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt,to:""},hn||{});var dn=this.options;dn.raw&&0<dn.windowBits?dn.windowBits=-dn.windowBits:dn.gzip&&0<dn.windowBits&&dn.windowBits<16&&(dn.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dt,this.strm.avail_out=0;var pn=Et.deflateInit2(this.strm,dn.level,dn.method,dn.windowBits,dn.memLevel,dn.strategy);if(pn!==Ft)throw new Error(Rt[pn]);if(dn.header&&Et.deflateSetHeader(this.strm,dn.header),dn.dictionary){var gn;if(gn=typeof dn.dictionary=="string"?At.string2buf(dn.dictionary):Nt.call(dn.dictionary)==="[object ArrayBuffer]"?new Uint8Array(dn.dictionary):dn.dictionary,(pn=Et.deflateSetDictionary(this.strm,gn))!==Ft)throw new Error(Rt[pn]);this._dict_set=!0}}function cn(hn,dn){var pn=new Kt(dn);if(pn.push(hn,!0),pn.err)throw pn.msg||Rt[pn.err];return pn.result}Kt.prototype.push=function(hn,dn){var pn,gn,vn=this.strm,bn=this.options.chunkSize;if(this.ended)return!1;gn=dn===~~dn?dn:dn===!0?4:0,typeof hn=="string"?vn.input=At.string2buf(hn):Nt.call(hn)==="[object ArrayBuffer]"?vn.input=new Uint8Array(hn):vn.input=hn,vn.next_in=0,vn.avail_in=vn.input.length;do{if(vn.avail_out===0&&(vn.output=new Ct.Buf8(bn),vn.next_out=0,vn.avail_out=bn),(pn=Et.deflate(vn,gn))!==1&&pn!==Ft)return this.onEnd(pn),!(this.ended=!0);vn.avail_out!==0&&(vn.avail_in!==0||gn!==4&&gn!==2)||(this.options.to==="string"?this.onData(At.buf2binstring(Ct.shrinkBuf(vn.output,vn.next_out))):this.onData(Ct.shrinkBuf(vn.output,vn.next_out)))}while((0<vn.avail_in||vn.avail_out===0)&&pn!==1);return gn===4?(pn=Et.deflateEnd(this.strm),this.onEnd(pn),this.ended=!0,pn===Ft):gn!==2||(this.onEnd(Ft),!(vn.avail_out=0))},Kt.prototype.onData=function(hn){this.chunks.push(hn)},Kt.prototype.onEnd=function(hn){hn===Ft&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ct.flattenChunks(this.chunks)),this.chunks=[],this.err=hn,this.msg=this.strm.msg},St.Deflate=Kt,St.deflate=cn,St.deflateRaw=function(hn,dn){return(dn=dn||{}).raw=!0,cn(hn,dn)},St.gzip=function(hn,dn){return(dn=dn||{}).gzip=!0,cn(hn,dn)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(dt,vt,St){var Et=dt("./zlib/inflate"),Ct=dt("./utils/common"),At=dt("./utils/strings"),Rt=dt("./zlib/constants"),Dt=dt("./zlib/messages"),Nt=dt("./zlib/zstream"),Ft=dt("./zlib/gzheader"),Ut=Object.prototype.toString;function Wt(Kt){if(!(this instanceof Wt))return new Wt(Kt);this.options=Ct.assign({chunkSize:16384,windowBits:0,to:""},Kt||{});var cn=this.options;cn.raw&&0<=cn.windowBits&&cn.windowBits<16&&(cn.windowBits=-cn.windowBits,cn.windowBits===0&&(cn.windowBits=-15)),!(0<=cn.windowBits&&cn.windowBits<16)||Kt&&Kt.windowBits||(cn.windowBits+=32),15<cn.windowBits&&cn.windowBits<48&&!(15&cn.windowBits)&&(cn.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nt,this.strm.avail_out=0;var hn=Et.inflateInit2(this.strm,cn.windowBits);if(hn!==Rt.Z_OK)throw new Error(Dt[hn]);this.header=new Ft,Et.inflateGetHeader(this.strm,this.header)}function Zt(Kt,cn){var hn=new Wt(cn);if(hn.push(Kt,!0),hn.err)throw hn.msg||Dt[hn.err];return hn.result}Wt.prototype.push=function(Kt,cn){var hn,dn,pn,gn,vn,bn,$n=this.strm,Tn=this.options.chunkSize,In=this.options.dictionary,Pn=!1;if(this.ended)return!1;dn=cn===~~cn?cn:cn===!0?Rt.Z_FINISH:Rt.Z_NO_FLUSH,typeof Kt=="string"?$n.input=At.binstring2buf(Kt):Ut.call(Kt)==="[object ArrayBuffer]"?$n.input=new Uint8Array(Kt):$n.input=Kt,$n.next_in=0,$n.avail_in=$n.input.length;do{if($n.avail_out===0&&($n.output=new Ct.Buf8(Tn),$n.next_out=0,$n.avail_out=Tn),(hn=Et.inflate($n,Rt.Z_NO_FLUSH))===Rt.Z_NEED_DICT&&In&&(bn=typeof In=="string"?At.string2buf(In):Ut.call(In)==="[object ArrayBuffer]"?new Uint8Array(In):In,hn=Et.inflateSetDictionary(this.strm,bn)),hn===Rt.Z_BUF_ERROR&&Pn===!0&&(hn=Rt.Z_OK,Pn=!1),hn!==Rt.Z_STREAM_END&&hn!==Rt.Z_OK)return this.onEnd(hn),!(this.ended=!0);$n.next_out&&($n.avail_out!==0&&hn!==Rt.Z_STREAM_END&&($n.avail_in!==0||dn!==Rt.Z_FINISH&&dn!==Rt.Z_SYNC_FLUSH)||(this.options.to==="string"?(pn=At.utf8border($n.output,$n.next_out),gn=$n.next_out-pn,vn=At.buf2string($n.output,pn),$n.next_out=gn,$n.avail_out=Tn-gn,gn&&Ct.arraySet($n.output,$n.output,pn,gn,0),this.onData(vn)):this.onData(Ct.shrinkBuf($n.output,$n.next_out)))),$n.avail_in===0&&$n.avail_out===0&&(Pn=!0)}while((0<$n.avail_in||$n.avail_out===0)&&hn!==Rt.Z_STREAM_END);return hn===Rt.Z_STREAM_END&&(dn=Rt.Z_FINISH),dn===Rt.Z_FINISH?(hn=Et.inflateEnd(this.strm),this.onEnd(hn),this.ended=!0,hn===Rt.Z_OK):dn!==Rt.Z_SYNC_FLUSH||(this.onEnd(Rt.Z_OK),!($n.avail_out=0))},Wt.prototype.onData=function(Kt){this.chunks.push(Kt)},Wt.prototype.onEnd=function(Kt){Kt===Rt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ct.flattenChunks(this.chunks)),this.chunks=[],this.err=Kt,this.msg=this.strm.msg},St.Inflate=Wt,St.inflate=Zt,St.inflateRaw=function(Kt,cn){return(cn=cn||{}).raw=!0,Zt(Kt,cn)},St.ungzip=Zt},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(dt,vt,St){var Et=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";St.assign=function(Rt){for(var Dt=Array.prototype.slice.call(arguments,1);Dt.length;){var Nt=Dt.shift();if(Nt){if(typeof Nt!="object")throw new TypeError(Nt+"must be non-object");for(var Ft in Nt)Nt.hasOwnProperty(Ft)&&(Rt[Ft]=Nt[Ft])}}return Rt},St.shrinkBuf=function(Rt,Dt){return Rt.length===Dt?Rt:Rt.subarray?Rt.subarray(0,Dt):(Rt.length=Dt,Rt)};var Ct={arraySet:function(Rt,Dt,Nt,Ft,Ut){if(Dt.subarray&&Rt.subarray)Rt.set(Dt.subarray(Nt,Nt+Ft),Ut);else for(var Wt=0;Wt<Ft;Wt++)Rt[Ut+Wt]=Dt[Nt+Wt]},flattenChunks:function(Rt){var Dt,Nt,Ft,Ut,Wt,Zt;for(Dt=Ft=0,Nt=Rt.length;Dt<Nt;Dt++)Ft+=Rt[Dt].length;for(Zt=new Uint8Array(Ft),Dt=Ut=0,Nt=Rt.length;Dt<Nt;Dt++)Wt=Rt[Dt],Zt.set(Wt,Ut),Ut+=Wt.length;return Zt}},At={arraySet:function(Rt,Dt,Nt,Ft,Ut){for(var Wt=0;Wt<Ft;Wt++)Rt[Ut+Wt]=Dt[Nt+Wt]},flattenChunks:function(Rt){return[].concat.apply([],Rt)}};St.setTyped=function(Rt){Rt?(St.Buf8=Uint8Array,St.Buf16=Uint16Array,St.Buf32=Int32Array,St.assign(St,Ct)):(St.Buf8=Array,St.Buf16=Array,St.Buf32=Array,St.assign(St,At))},St.setTyped(Et)},{}],42:[function(dt,vt,St){var Et=dt("./common"),Ct=!0,At=!0;try{String.fromCharCode.apply(null,[0])}catch{Ct=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{At=!1}for(var Rt=new Et.Buf8(256),Dt=0;Dt<256;Dt++)Rt[Dt]=252<=Dt?6:248<=Dt?5:240<=Dt?4:224<=Dt?3:192<=Dt?2:1;function Nt(Ft,Ut){if(Ut<65537&&(Ft.subarray&&At||!Ft.subarray&&Ct))return String.fromCharCode.apply(null,Et.shrinkBuf(Ft,Ut));for(var Wt="",Zt=0;Zt<Ut;Zt++)Wt+=String.fromCharCode(Ft[Zt]);return Wt}Rt[254]=Rt[254]=1,St.string2buf=function(Ft){var Ut,Wt,Zt,Kt,cn,hn=Ft.length,dn=0;for(Kt=0;Kt<hn;Kt++)(64512&(Wt=Ft.charCodeAt(Kt)))==55296&&Kt+1<hn&&(64512&(Zt=Ft.charCodeAt(Kt+1)))==56320&&(Wt=65536+(Wt-55296<<10)+(Zt-56320),Kt++),dn+=Wt<128?1:Wt<2048?2:Wt<65536?3:4;for(Ut=new Et.Buf8(dn),Kt=cn=0;cn<dn;Kt++)(64512&(Wt=Ft.charCodeAt(Kt)))==55296&&Kt+1<hn&&(64512&(Zt=Ft.charCodeAt(Kt+1)))==56320&&(Wt=65536+(Wt-55296<<10)+(Zt-56320),Kt++),Wt<128?Ut[cn++]=Wt:(Wt<2048?Ut[cn++]=192|Wt>>>6:(Wt<65536?Ut[cn++]=224|Wt>>>12:(Ut[cn++]=240|Wt>>>18,Ut[cn++]=128|Wt>>>12&63),Ut[cn++]=128|Wt>>>6&63),Ut[cn++]=128|63&Wt);return Ut},St.buf2binstring=function(Ft){return Nt(Ft,Ft.length)},St.binstring2buf=function(Ft){for(var Ut=new Et.Buf8(Ft.length),Wt=0,Zt=Ut.length;Wt<Zt;Wt++)Ut[Wt]=Ft.charCodeAt(Wt);return Ut},St.buf2string=function(Ft,Ut){var Wt,Zt,Kt,cn,hn=Ut||Ft.length,dn=new Array(2*hn);for(Wt=Zt=0;Wt<hn;)if((Kt=Ft[Wt++])<128)dn[Zt++]=Kt;else if(4<(cn=Rt[Kt]))dn[Zt++]=65533,Wt+=cn-1;else{for(Kt&=cn===2?31:cn===3?15:7;1<cn&&Wt<hn;)Kt=Kt<<6|63&Ft[Wt++],cn--;1<cn?dn[Zt++]=65533:Kt<65536?dn[Zt++]=Kt:(Kt-=65536,dn[Zt++]=55296|Kt>>10&1023,dn[Zt++]=56320|1023&Kt)}return Nt(dn,Zt)},St.utf8border=function(Ft,Ut){var Wt;for((Ut=Ut||Ft.length)>Ft.length&&(Ut=Ft.length),Wt=Ut-1;0<=Wt&&(192&Ft[Wt])==128;)Wt--;return Wt<0||Wt===0?Ut:Wt+Rt[Ft[Wt]]>Ut?Wt:Ut}},{"./common":41}],43:[function(dt,vt,St){vt.exports=function(Et,Ct,At,Rt){for(var Dt=65535&Et|0,Nt=Et>>>16&65535|0,Ft=0;At!==0;){for(At-=Ft=2e3<At?2e3:At;Nt=Nt+(Dt=Dt+Ct[Rt++]|0)|0,--Ft;);Dt%=65521,Nt%=65521}return Dt|Nt<<16|0}},{}],44:[function(dt,vt,St){vt.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(dt,vt,St){var Et=function(){for(var Ct,At=[],Rt=0;Rt<256;Rt++){Ct=Rt;for(var Dt=0;Dt<8;Dt++)Ct=1&Ct?3988292384^Ct>>>1:Ct>>>1;At[Rt]=Ct}return At}();vt.exports=function(Ct,At,Rt,Dt){var Nt=Et,Ft=Dt+Rt;Ct^=-1;for(var Ut=Dt;Ut<Ft;Ut++)Ct=Ct>>>8^Nt[255&(Ct^At[Ut])];return-1^Ct}},{}],46:[function(dt,vt,St){var Et,Ct=dt("../utils/common"),At=dt("./trees"),Rt=dt("./adler32"),Dt=dt("./crc32"),Nt=dt("./messages"),Ft=0,Ut=4,Wt=0,Zt=-2,Kt=-1,cn=4,hn=2,dn=8,pn=9,gn=286,vn=30,bn=19,$n=2*gn+1,Tn=15,In=3,Pn=258,zn=Pn+In+1,An=42,Gn=113,xn=1,Qn=2,qn=3,nr=4;function Un(Dn,yr){return Dn.msg=Nt[yr],yr}function Nn(Dn){return(Dn<<1)-(4<Dn?9:0)}function jn(Dn){for(var yr=Dn.length;0<=--yr;)Dn[yr]=0}function Ln(Dn){var yr=Dn.state,hr=yr.pending;hr>Dn.avail_out&&(hr=Dn.avail_out),hr!==0&&(Ct.arraySet(Dn.output,yr.pending_buf,yr.pending_out,hr,Dn.next_out),Dn.next_out+=hr,yr.pending_out+=hr,Dn.total_out+=hr,Dn.avail_out-=hr,yr.pending-=hr,yr.pending===0&&(yr.pending_out=0))}function Cn(Dn,yr){At._tr_flush_block(Dn,0<=Dn.block_start?Dn.block_start:-1,Dn.strstart-Dn.block_start,yr),Dn.block_start=Dn.strstart,Ln(Dn.strm)}function tr(Dn,yr){Dn.pending_buf[Dn.pending++]=yr}function ir(Dn,yr){Dn.pending_buf[Dn.pending++]=yr>>>8&255,Dn.pending_buf[Dn.pending++]=255&yr}function Zn(Dn,yr){var hr,Jn,Yn=Dn.max_chain_length,ar=Dn.strstart,Sr=Dn.prev_length,gr=Dn.nice_match,Vn=Dn.strstart>Dn.w_size-zn?Dn.strstart-(Dn.w_size-zn):0,Wn=Dn.window,rr=Dn.w_mask,lr=Dn.prev,xr=Dn.strstart+Pn,Fr=Wn[ar+Sr-1],mr=Wn[ar+Sr];Dn.prev_length>=Dn.good_match&&(Yn>>=2),gr>Dn.lookahead&&(gr=Dn.lookahead);do if(Wn[(hr=yr)+Sr]===mr&&Wn[hr+Sr-1]===Fr&&Wn[hr]===Wn[ar]&&Wn[++hr]===Wn[ar+1]){ar+=2,hr++;do;while(Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&Wn[++ar]===Wn[++hr]&&ar<xr);if(Jn=Pn-(xr-ar),ar=xr-Pn,Sr<Jn){if(Dn.match_start=yr,gr<=(Sr=Jn))break;Fr=Wn[ar+Sr-1],mr=Wn[ar+Sr]}}while((yr=lr[yr&rr])>Vn&&--Yn!=0);return Sr<=Dn.lookahead?Sr:Dn.lookahead}function br(Dn){var yr,hr,Jn,Yn,ar,Sr,gr,Vn,Wn,rr,lr=Dn.w_size;do{if(Yn=Dn.window_size-Dn.lookahead-Dn.strstart,Dn.strstart>=lr+(lr-zn)){for(Ct.arraySet(Dn.window,Dn.window,lr,lr,0),Dn.match_start-=lr,Dn.strstart-=lr,Dn.block_start-=lr,yr=hr=Dn.hash_size;Jn=Dn.head[--yr],Dn.head[yr]=lr<=Jn?Jn-lr:0,--hr;);for(yr=hr=lr;Jn=Dn.prev[--yr],Dn.prev[yr]=lr<=Jn?Jn-lr:0,--hr;);Yn+=lr}if(Dn.strm.avail_in===0)break;if(Sr=Dn.strm,gr=Dn.window,Vn=Dn.strstart+Dn.lookahead,Wn=Yn,rr=void 0,rr=Sr.avail_in,Wn<rr&&(rr=Wn),hr=rr===0?0:(Sr.avail_in-=rr,Ct.arraySet(gr,Sr.input,Sr.next_in,rr,Vn),Sr.state.wrap===1?Sr.adler=Rt(Sr.adler,gr,rr,Vn):Sr.state.wrap===2&&(Sr.adler=Dt(Sr.adler,gr,rr,Vn)),Sr.next_in+=rr,Sr.total_in+=rr,rr),Dn.lookahead+=hr,Dn.lookahead+Dn.insert>=In)for(ar=Dn.strstart-Dn.insert,Dn.ins_h=Dn.window[ar],Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[ar+1])&Dn.hash_mask;Dn.insert&&(Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[ar+In-1])&Dn.hash_mask,Dn.prev[ar&Dn.w_mask]=Dn.head[Dn.ins_h],Dn.head[Dn.ins_h]=ar,ar++,Dn.insert--,!(Dn.lookahead+Dn.insert<In)););}while(Dn.lookahead<zn&&Dn.strm.avail_in!==0)}function fr(Dn,yr){for(var hr,Jn;;){if(Dn.lookahead<zn){if(br(Dn),Dn.lookahead<zn&&yr===Ft)return xn;if(Dn.lookahead===0)break}if(hr=0,Dn.lookahead>=In&&(Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[Dn.strstart+In-1])&Dn.hash_mask,hr=Dn.prev[Dn.strstart&Dn.w_mask]=Dn.head[Dn.ins_h],Dn.head[Dn.ins_h]=Dn.strstart),hr!==0&&Dn.strstart-hr<=Dn.w_size-zn&&(Dn.match_length=Zn(Dn,hr)),Dn.match_length>=In)if(Jn=At._tr_tally(Dn,Dn.strstart-Dn.match_start,Dn.match_length-In),Dn.lookahead-=Dn.match_length,Dn.match_length<=Dn.max_lazy_match&&Dn.lookahead>=In){for(Dn.match_length--;Dn.strstart++,Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[Dn.strstart+In-1])&Dn.hash_mask,hr=Dn.prev[Dn.strstart&Dn.w_mask]=Dn.head[Dn.ins_h],Dn.head[Dn.ins_h]=Dn.strstart,--Dn.match_length!=0;);Dn.strstart++}else Dn.strstart+=Dn.match_length,Dn.match_length=0,Dn.ins_h=Dn.window[Dn.strstart],Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[Dn.strstart+1])&Dn.hash_mask;else Jn=At._tr_tally(Dn,0,Dn.window[Dn.strstart]),Dn.lookahead--,Dn.strstart++;if(Jn&&(Cn(Dn,!1),Dn.strm.avail_out===0))return xn}return Dn.insert=Dn.strstart<In-1?Dn.strstart:In-1,yr===Ut?(Cn(Dn,!0),Dn.strm.avail_out===0?qn:nr):Dn.last_lit&&(Cn(Dn,!1),Dn.strm.avail_out===0)?xn:Qn}function Or(Dn,yr){for(var hr,Jn,Yn;;){if(Dn.lookahead<zn){if(br(Dn),Dn.lookahead<zn&&yr===Ft)return xn;if(Dn.lookahead===0)break}if(hr=0,Dn.lookahead>=In&&(Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[Dn.strstart+In-1])&Dn.hash_mask,hr=Dn.prev[Dn.strstart&Dn.w_mask]=Dn.head[Dn.ins_h],Dn.head[Dn.ins_h]=Dn.strstart),Dn.prev_length=Dn.match_length,Dn.prev_match=Dn.match_start,Dn.match_length=In-1,hr!==0&&Dn.prev_length<Dn.max_lazy_match&&Dn.strstart-hr<=Dn.w_size-zn&&(Dn.match_length=Zn(Dn,hr),Dn.match_length<=5&&(Dn.strategy===1||Dn.match_length===In&&4096<Dn.strstart-Dn.match_start)&&(Dn.match_length=In-1)),Dn.prev_length>=In&&Dn.match_length<=Dn.prev_length){for(Yn=Dn.strstart+Dn.lookahead-In,Jn=At._tr_tally(Dn,Dn.strstart-1-Dn.prev_match,Dn.prev_length-In),Dn.lookahead-=Dn.prev_length-1,Dn.prev_length-=2;++Dn.strstart<=Yn&&(Dn.ins_h=(Dn.ins_h<<Dn.hash_shift^Dn.window[Dn.strstart+In-1])&Dn.hash_mask,hr=Dn.prev[Dn.strstart&Dn.w_mask]=Dn.head[Dn.ins_h],Dn.head[Dn.ins_h]=Dn.strstart),--Dn.prev_length!=0;);if(Dn.match_available=0,Dn.match_length=In-1,Dn.strstart++,Jn&&(Cn(Dn,!1),Dn.strm.avail_out===0))return xn}else if(Dn.match_available){if((Jn=At._tr_tally(Dn,0,Dn.window[Dn.strstart-1]))&&Cn(Dn,!1),Dn.strstart++,Dn.lookahead--,Dn.strm.avail_out===0)return xn}else Dn.match_available=1,Dn.strstart++,Dn.lookahead--}return Dn.match_available&&(Jn=At._tr_tally(Dn,0,Dn.window[Dn.strstart-1]),Dn.match_available=0),Dn.insert=Dn.strstart<In-1?Dn.strstart:In-1,yr===Ut?(Cn(Dn,!0),Dn.strm.avail_out===0?qn:nr):Dn.last_lit&&(Cn(Dn,!1),Dn.strm.avail_out===0)?xn:Qn}function Pr(Dn,yr,hr,Jn,Yn){this.good_length=Dn,this.max_lazy=yr,this.nice_length=hr,this.max_chain=Jn,this.func=Yn}function zr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ct.Buf16(2*$n),this.dyn_dtree=new Ct.Buf16(2*(2*vn+1)),this.bl_tree=new Ct.Buf16(2*(2*bn+1)),jn(this.dyn_ltree),jn(this.dyn_dtree),jn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ct.Buf16(Tn+1),this.heap=new Ct.Buf16(2*gn+1),jn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ct.Buf16(2*gn+1),jn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Dr(Dn){var yr;return Dn&&Dn.state?(Dn.total_in=Dn.total_out=0,Dn.data_type=hn,(yr=Dn.state).pending=0,yr.pending_out=0,yr.wrap<0&&(yr.wrap=-yr.wrap),yr.status=yr.wrap?An:Gn,Dn.adler=yr.wrap===2?0:1,yr.last_flush=Ft,At._tr_init(yr),Wt):Un(Dn,Zt)}function _r(Dn){var yr=Dr(Dn);return yr===Wt&&function(hr){hr.window_size=2*hr.w_size,jn(hr.head),hr.max_lazy_match=Et[hr.level].max_lazy,hr.good_match=Et[hr.level].good_length,hr.nice_match=Et[hr.level].nice_length,hr.max_chain_length=Et[hr.level].max_chain,hr.strstart=0,hr.block_start=0,hr.lookahead=0,hr.insert=0,hr.match_length=hr.prev_length=In-1,hr.match_available=0,hr.ins_h=0}(Dn.state),yr}function Nr(Dn,yr,hr,Jn,Yn,ar){if(!Dn)return Zt;var Sr=1;if(yr===Kt&&(yr=6),Jn<0?(Sr=0,Jn=-Jn):15<Jn&&(Sr=2,Jn-=16),Yn<1||pn<Yn||hr!==dn||Jn<8||15<Jn||yr<0||9<yr||ar<0||cn<ar)return Un(Dn,Zt);Jn===8&&(Jn=9);var gr=new zr;return(Dn.state=gr).strm=Dn,gr.wrap=Sr,gr.gzhead=null,gr.w_bits=Jn,gr.w_size=1<<gr.w_bits,gr.w_mask=gr.w_size-1,gr.hash_bits=Yn+7,gr.hash_size=1<<gr.hash_bits,gr.hash_mask=gr.hash_size-1,gr.hash_shift=~~((gr.hash_bits+In-1)/In),gr.window=new Ct.Buf8(2*gr.w_size),gr.head=new Ct.Buf16(gr.hash_size),gr.prev=new Ct.Buf16(gr.w_size),gr.lit_bufsize=1<<Yn+6,gr.pending_buf_size=4*gr.lit_bufsize,gr.pending_buf=new Ct.Buf8(gr.pending_buf_size),gr.d_buf=1*gr.lit_bufsize,gr.l_buf=3*gr.lit_bufsize,gr.level=yr,gr.strategy=ar,gr.method=hr,_r(Dn)}Et=[new Pr(0,0,0,0,function(Dn,yr){var hr=65535;for(hr>Dn.pending_buf_size-5&&(hr=Dn.pending_buf_size-5);;){if(Dn.lookahead<=1){if(br(Dn),Dn.lookahead===0&&yr===Ft)return xn;if(Dn.lookahead===0)break}Dn.strstart+=Dn.lookahead,Dn.lookahead=0;var Jn=Dn.block_start+hr;if((Dn.strstart===0||Dn.strstart>=Jn)&&(Dn.lookahead=Dn.strstart-Jn,Dn.strstart=Jn,Cn(Dn,!1),Dn.strm.avail_out===0)||Dn.strstart-Dn.block_start>=Dn.w_size-zn&&(Cn(Dn,!1),Dn.strm.avail_out===0))return xn}return Dn.insert=0,yr===Ut?(Cn(Dn,!0),Dn.strm.avail_out===0?qn:nr):(Dn.strstart>Dn.block_start&&(Cn(Dn,!1),Dn.strm.avail_out),xn)}),new Pr(4,4,8,4,fr),new Pr(4,5,16,8,fr),new Pr(4,6,32,32,fr),new Pr(4,4,16,16,Or),new Pr(8,16,32,32,Or),new Pr(8,16,128,128,Or),new Pr(8,32,128,256,Or),new Pr(32,128,258,1024,Or),new Pr(32,258,258,4096,Or)],St.deflateInit=function(Dn,yr){return Nr(Dn,yr,dn,15,8,0)},St.deflateInit2=Nr,St.deflateReset=_r,St.deflateResetKeep=Dr,St.deflateSetHeader=function(Dn,yr){return Dn&&Dn.state?Dn.state.wrap!==2?Zt:(Dn.state.gzhead=yr,Wt):Zt},St.deflate=function(Dn,yr){var hr,Jn,Yn,ar;if(!Dn||!Dn.state||5<yr||yr<0)return Dn?Un(Dn,Zt):Zt;if(Jn=Dn.state,!Dn.output||!Dn.input&&Dn.avail_in!==0||Jn.status===666&&yr!==Ut)return Un(Dn,Dn.avail_out===0?-5:Zt);if(Jn.strm=Dn,hr=Jn.last_flush,Jn.last_flush=yr,Jn.status===An)if(Jn.wrap===2)Dn.adler=0,tr(Jn,31),tr(Jn,139),tr(Jn,8),Jn.gzhead?(tr(Jn,(Jn.gzhead.text?1:0)+(Jn.gzhead.hcrc?2:0)+(Jn.gzhead.extra?4:0)+(Jn.gzhead.name?8:0)+(Jn.gzhead.comment?16:0)),tr(Jn,255&Jn.gzhead.time),tr(Jn,Jn.gzhead.time>>8&255),tr(Jn,Jn.gzhead.time>>16&255),tr(Jn,Jn.gzhead.time>>24&255),tr(Jn,Jn.level===9?2:2<=Jn.strategy||Jn.level<2?4:0),tr(Jn,255&Jn.gzhead.os),Jn.gzhead.extra&&Jn.gzhead.extra.length&&(tr(Jn,255&Jn.gzhead.extra.length),tr(Jn,Jn.gzhead.extra.length>>8&255)),Jn.gzhead.hcrc&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending,0)),Jn.gzindex=0,Jn.status=69):(tr(Jn,0),tr(Jn,0),tr(Jn,0),tr(Jn,0),tr(Jn,0),tr(Jn,Jn.level===9?2:2<=Jn.strategy||Jn.level<2?4:0),tr(Jn,3),Jn.status=Gn);else{var Sr=dn+(Jn.w_bits-8<<4)<<8;Sr|=(2<=Jn.strategy||Jn.level<2?0:Jn.level<6?1:Jn.level===6?2:3)<<6,Jn.strstart!==0&&(Sr|=32),Sr+=31-Sr%31,Jn.status=Gn,ir(Jn,Sr),Jn.strstart!==0&&(ir(Jn,Dn.adler>>>16),ir(Jn,65535&Dn.adler)),Dn.adler=1}if(Jn.status===69)if(Jn.gzhead.extra){for(Yn=Jn.pending;Jn.gzindex<(65535&Jn.gzhead.extra.length)&&(Jn.pending!==Jn.pending_buf_size||(Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),Ln(Dn),Yn=Jn.pending,Jn.pending!==Jn.pending_buf_size));)tr(Jn,255&Jn.gzhead.extra[Jn.gzindex]),Jn.gzindex++;Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),Jn.gzindex===Jn.gzhead.extra.length&&(Jn.gzindex=0,Jn.status=73)}else Jn.status=73;if(Jn.status===73)if(Jn.gzhead.name){Yn=Jn.pending;do{if(Jn.pending===Jn.pending_buf_size&&(Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),Ln(Dn),Yn=Jn.pending,Jn.pending===Jn.pending_buf_size)){ar=1;break}ar=Jn.gzindex<Jn.gzhead.name.length?255&Jn.gzhead.name.charCodeAt(Jn.gzindex++):0,tr(Jn,ar)}while(ar!==0);Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),ar===0&&(Jn.gzindex=0,Jn.status=91)}else Jn.status=91;if(Jn.status===91)if(Jn.gzhead.comment){Yn=Jn.pending;do{if(Jn.pending===Jn.pending_buf_size&&(Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),Ln(Dn),Yn=Jn.pending,Jn.pending===Jn.pending_buf_size)){ar=1;break}ar=Jn.gzindex<Jn.gzhead.comment.length?255&Jn.gzhead.comment.charCodeAt(Jn.gzindex++):0,tr(Jn,ar)}while(ar!==0);Jn.gzhead.hcrc&&Jn.pending>Yn&&(Dn.adler=Dt(Dn.adler,Jn.pending_buf,Jn.pending-Yn,Yn)),ar===0&&(Jn.status=103)}else Jn.status=103;if(Jn.status===103&&(Jn.gzhead.hcrc?(Jn.pending+2>Jn.pending_buf_size&&Ln(Dn),Jn.pending+2<=Jn.pending_buf_size&&(tr(Jn,255&Dn.adler),tr(Jn,Dn.adler>>8&255),Dn.adler=0,Jn.status=Gn)):Jn.status=Gn),Jn.pending!==0){if(Ln(Dn),Dn.avail_out===0)return Jn.last_flush=-1,Wt}else if(Dn.avail_in===0&&Nn(yr)<=Nn(hr)&&yr!==Ut)return Un(Dn,-5);if(Jn.status===666&&Dn.avail_in!==0)return Un(Dn,-5);if(Dn.avail_in!==0||Jn.lookahead!==0||yr!==Ft&&Jn.status!==666){var gr=Jn.strategy===2?function(Vn,Wn){for(var rr;;){if(Vn.lookahead===0&&(br(Vn),Vn.lookahead===0)){if(Wn===Ft)return xn;break}if(Vn.match_length=0,rr=At._tr_tally(Vn,0,Vn.window[Vn.strstart]),Vn.lookahead--,Vn.strstart++,rr&&(Cn(Vn,!1),Vn.strm.avail_out===0))return xn}return Vn.insert=0,Wn===Ut?(Cn(Vn,!0),Vn.strm.avail_out===0?qn:nr):Vn.last_lit&&(Cn(Vn,!1),Vn.strm.avail_out===0)?xn:Qn}(Jn,yr):Jn.strategy===3?function(Vn,Wn){for(var rr,lr,xr,Fr,mr=Vn.window;;){if(Vn.lookahead<=Pn){if(br(Vn),Vn.lookahead<=Pn&&Wn===Ft)return xn;if(Vn.lookahead===0)break}if(Vn.match_length=0,Vn.lookahead>=In&&0<Vn.strstart&&(lr=mr[xr=Vn.strstart-1])===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]){Fr=Vn.strstart+Pn;do;while(lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&lr===mr[++xr]&&xr<Fr);Vn.match_length=Pn-(Fr-xr),Vn.match_length>Vn.lookahead&&(Vn.match_length=Vn.lookahead)}if(Vn.match_length>=In?(rr=At._tr_tally(Vn,1,Vn.match_length-In),Vn.lookahead-=Vn.match_length,Vn.strstart+=Vn.match_length,Vn.match_length=0):(rr=At._tr_tally(Vn,0,Vn.window[Vn.strstart]),Vn.lookahead--,Vn.strstart++),rr&&(Cn(Vn,!1),Vn.strm.avail_out===0))return xn}return Vn.insert=0,Wn===Ut?(Cn(Vn,!0),Vn.strm.avail_out===0?qn:nr):Vn.last_lit&&(Cn(Vn,!1),Vn.strm.avail_out===0)?xn:Qn}(Jn,yr):Et[Jn.level].func(Jn,yr);if(gr!==qn&&gr!==nr||(Jn.status=666),gr===xn||gr===qn)return Dn.avail_out===0&&(Jn.last_flush=-1),Wt;if(gr===Qn&&(yr===1?At._tr_align(Jn):yr!==5&&(At._tr_stored_block(Jn,0,0,!1),yr===3&&(jn(Jn.head),Jn.lookahead===0&&(Jn.strstart=0,Jn.block_start=0,Jn.insert=0))),Ln(Dn),Dn.avail_out===0))return Jn.last_flush=-1,Wt}return yr!==Ut?Wt:Jn.wrap<=0?1:(Jn.wrap===2?(tr(Jn,255&Dn.adler),tr(Jn,Dn.adler>>8&255),tr(Jn,Dn.adler>>16&255),tr(Jn,Dn.adler>>24&255),tr(Jn,255&Dn.total_in),tr(Jn,Dn.total_in>>8&255),tr(Jn,Dn.total_in>>16&255),tr(Jn,Dn.total_in>>24&255)):(ir(Jn,Dn.adler>>>16),ir(Jn,65535&Dn.adler)),Ln(Dn),0<Jn.wrap&&(Jn.wrap=-Jn.wrap),Jn.pending!==0?Wt:1)},St.deflateEnd=function(Dn){var yr;return Dn&&Dn.state?(yr=Dn.state.status)!==An&&yr!==69&&yr!==73&&yr!==91&&yr!==103&&yr!==Gn&&yr!==666?Un(Dn,Zt):(Dn.state=null,yr===Gn?Un(Dn,-3):Wt):Zt},St.deflateSetDictionary=function(Dn,yr){var hr,Jn,Yn,ar,Sr,gr,Vn,Wn,rr=yr.length;if(!Dn||!Dn.state||(ar=(hr=Dn.state).wrap)===2||ar===1&&hr.status!==An||hr.lookahead)return Zt;for(ar===1&&(Dn.adler=Rt(Dn.adler,yr,rr,0)),hr.wrap=0,rr>=hr.w_size&&(ar===0&&(jn(hr.head),hr.strstart=0,hr.block_start=0,hr.insert=0),Wn=new Ct.Buf8(hr.w_size),Ct.arraySet(Wn,yr,rr-hr.w_size,hr.w_size,0),yr=Wn,rr=hr.w_size),Sr=Dn.avail_in,gr=Dn.next_in,Vn=Dn.input,Dn.avail_in=rr,Dn.next_in=0,Dn.input=yr,br(hr);hr.lookahead>=In;){for(Jn=hr.strstart,Yn=hr.lookahead-(In-1);hr.ins_h=(hr.ins_h<<hr.hash_shift^hr.window[Jn+In-1])&hr.hash_mask,hr.prev[Jn&hr.w_mask]=hr.head[hr.ins_h],hr.head[hr.ins_h]=Jn,Jn++,--Yn;);hr.strstart=Jn,hr.lookahead=In-1,br(hr)}return hr.strstart+=hr.lookahead,hr.block_start=hr.strstart,hr.insert=hr.lookahead,hr.lookahead=0,hr.match_length=hr.prev_length=In-1,hr.match_available=0,Dn.next_in=gr,Dn.input=Vn,Dn.avail_in=Sr,hr.wrap=ar,Wt},St.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(dt,vt,St){vt.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(dt,vt,St){vt.exports=function(Et,Ct){var At,Rt,Dt,Nt,Ft,Ut,Wt,Zt,Kt,cn,hn,dn,pn,gn,vn,bn,$n,Tn,In,Pn,zn,An,Gn,xn,Qn;At=Et.state,Rt=Et.next_in,xn=Et.input,Dt=Rt+(Et.avail_in-5),Nt=Et.next_out,Qn=Et.output,Ft=Nt-(Ct-Et.avail_out),Ut=Nt+(Et.avail_out-257),Wt=At.dmax,Zt=At.wsize,Kt=At.whave,cn=At.wnext,hn=At.window,dn=At.hold,pn=At.bits,gn=At.lencode,vn=At.distcode,bn=(1<<At.lenbits)-1,$n=(1<<At.distbits)-1;e:do{pn<15&&(dn+=xn[Rt++]<<pn,pn+=8,dn+=xn[Rt++]<<pn,pn+=8),Tn=gn[dn&bn];t:for(;;){if(dn>>>=In=Tn>>>24,pn-=In,(In=Tn>>>16&255)===0)Qn[Nt++]=65535&Tn;else{if(!(16&In)){if(!(64&In)){Tn=gn[(65535&Tn)+(dn&(1<<In)-1)];continue t}if(32&In){At.mode=12;break e}Et.msg="invalid literal/length code",At.mode=30;break e}Pn=65535&Tn,(In&=15)&&(pn<In&&(dn+=xn[Rt++]<<pn,pn+=8),Pn+=dn&(1<<In)-1,dn>>>=In,pn-=In),pn<15&&(dn+=xn[Rt++]<<pn,pn+=8,dn+=xn[Rt++]<<pn,pn+=8),Tn=vn[dn&$n];n:for(;;){if(dn>>>=In=Tn>>>24,pn-=In,!(16&(In=Tn>>>16&255))){if(!(64&In)){Tn=vn[(65535&Tn)+(dn&(1<<In)-1)];continue n}Et.msg="invalid distance code",At.mode=30;break e}if(zn=65535&Tn,pn<(In&=15)&&(dn+=xn[Rt++]<<pn,(pn+=8)<In&&(dn+=xn[Rt++]<<pn,pn+=8)),Wt<(zn+=dn&(1<<In)-1)){Et.msg="invalid distance too far back",At.mode=30;break e}if(dn>>>=In,pn-=In,(In=Nt-Ft)<zn){if(Kt<(In=zn-In)&&At.sane){Et.msg="invalid distance too far back",At.mode=30;break e}if(Gn=hn,(An=0)===cn){if(An+=Zt-In,In<Pn){for(Pn-=In;Qn[Nt++]=hn[An++],--In;);An=Nt-zn,Gn=Qn}}else if(cn<In){if(An+=Zt+cn-In,(In-=cn)<Pn){for(Pn-=In;Qn[Nt++]=hn[An++],--In;);if(An=0,cn<Pn){for(Pn-=In=cn;Qn[Nt++]=hn[An++],--In;);An=Nt-zn,Gn=Qn}}}else if(An+=cn-In,In<Pn){for(Pn-=In;Qn[Nt++]=hn[An++],--In;);An=Nt-zn,Gn=Qn}for(;2<Pn;)Qn[Nt++]=Gn[An++],Qn[Nt++]=Gn[An++],Qn[Nt++]=Gn[An++],Pn-=3;Pn&&(Qn[Nt++]=Gn[An++],1<Pn&&(Qn[Nt++]=Gn[An++]))}else{for(An=Nt-zn;Qn[Nt++]=Qn[An++],Qn[Nt++]=Qn[An++],Qn[Nt++]=Qn[An++],2<(Pn-=3););Pn&&(Qn[Nt++]=Qn[An++],1<Pn&&(Qn[Nt++]=Qn[An++]))}break}}break}}while(Rt<Dt&&Nt<Ut);Rt-=Pn=pn>>3,dn&=(1<<(pn-=Pn<<3))-1,Et.next_in=Rt,Et.next_out=Nt,Et.avail_in=Rt<Dt?Dt-Rt+5:5-(Rt-Dt),Et.avail_out=Nt<Ut?Ut-Nt+257:257-(Nt-Ut),At.hold=dn,At.bits=pn}},{}],49:[function(dt,vt,St){var Et=dt("../utils/common"),Ct=dt("./adler32"),At=dt("./crc32"),Rt=dt("./inffast"),Dt=dt("./inftrees"),Nt=1,Ft=2,Ut=0,Wt=-2,Zt=1,Kt=852,cn=592;function hn(An){return(An>>>24&255)+(An>>>8&65280)+((65280&An)<<8)+((255&An)<<24)}function dn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Et.Buf16(320),this.work=new Et.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function pn(An){var Gn;return An&&An.state?(Gn=An.state,An.total_in=An.total_out=Gn.total=0,An.msg="",Gn.wrap&&(An.adler=1&Gn.wrap),Gn.mode=Zt,Gn.last=0,Gn.havedict=0,Gn.dmax=32768,Gn.head=null,Gn.hold=0,Gn.bits=0,Gn.lencode=Gn.lendyn=new Et.Buf32(Kt),Gn.distcode=Gn.distdyn=new Et.Buf32(cn),Gn.sane=1,Gn.back=-1,Ut):Wt}function gn(An){var Gn;return An&&An.state?((Gn=An.state).wsize=0,Gn.whave=0,Gn.wnext=0,pn(An)):Wt}function vn(An,Gn){var xn,Qn;return An&&An.state?(Qn=An.state,Gn<0?(xn=0,Gn=-Gn):(xn=1+(Gn>>4),Gn<48&&(Gn&=15)),Gn&&(Gn<8||15<Gn)?Wt:(Qn.window!==null&&Qn.wbits!==Gn&&(Qn.window=null),Qn.wrap=xn,Qn.wbits=Gn,gn(An))):Wt}function bn(An,Gn){var xn,Qn;return An?(Qn=new dn,(An.state=Qn).window=null,(xn=vn(An,Gn))!==Ut&&(An.state=null),xn):Wt}var $n,Tn,In=!0;function Pn(An){if(In){var Gn;for($n=new Et.Buf32(512),Tn=new Et.Buf32(32),Gn=0;Gn<144;)An.lens[Gn++]=8;for(;Gn<256;)An.lens[Gn++]=9;for(;Gn<280;)An.lens[Gn++]=7;for(;Gn<288;)An.lens[Gn++]=8;for(Dt(Nt,An.lens,0,288,$n,0,An.work,{bits:9}),Gn=0;Gn<32;)An.lens[Gn++]=5;Dt(Ft,An.lens,0,32,Tn,0,An.work,{bits:5}),In=!1}An.lencode=$n,An.lenbits=9,An.distcode=Tn,An.distbits=5}function zn(An,Gn,xn,Qn){var qn,nr=An.state;return nr.window===null&&(nr.wsize=1<<nr.wbits,nr.wnext=0,nr.whave=0,nr.window=new Et.Buf8(nr.wsize)),Qn>=nr.wsize?(Et.arraySet(nr.window,Gn,xn-nr.wsize,nr.wsize,0),nr.wnext=0,nr.whave=nr.wsize):(Qn<(qn=nr.wsize-nr.wnext)&&(qn=Qn),Et.arraySet(nr.window,Gn,xn-Qn,qn,nr.wnext),(Qn-=qn)?(Et.arraySet(nr.window,Gn,xn-Qn,Qn,0),nr.wnext=Qn,nr.whave=nr.wsize):(nr.wnext+=qn,nr.wnext===nr.wsize&&(nr.wnext=0),nr.whave<nr.wsize&&(nr.whave+=qn))),0}St.inflateReset=gn,St.inflateReset2=vn,St.inflateResetKeep=pn,St.inflateInit=function(An){return bn(An,15)},St.inflateInit2=bn,St.inflate=function(An,Gn){var xn,Qn,qn,nr,Un,Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or,Pr,zr,Dr,_r,Nr,Dn,yr,hr,Jn,Yn=0,ar=new Et.Buf8(4),Sr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!An||!An.state||!An.output||!An.input&&An.avail_in!==0)return Wt;(xn=An.state).mode===12&&(xn.mode=13),Un=An.next_out,qn=An.output,jn=An.avail_out,nr=An.next_in,Qn=An.input,Nn=An.avail_in,Ln=xn.hold,Cn=xn.bits,tr=Nn,ir=jn,yr=Ut;e:for(;;)switch(xn.mode){case Zt:if(xn.wrap===0){xn.mode=13;break}for(;Cn<16;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(2&xn.wrap&&Ln===35615){ar[xn.check=0]=255&Ln,ar[1]=Ln>>>8&255,xn.check=At(xn.check,ar,2,0),Cn=Ln=0,xn.mode=2;break}if(xn.flags=0,xn.head&&(xn.head.done=!1),!(1&xn.wrap)||(((255&Ln)<<8)+(Ln>>8))%31){An.msg="incorrect header check",xn.mode=30;break}if((15&Ln)!=8){An.msg="unknown compression method",xn.mode=30;break}if(Cn-=4,Dn=8+(15&(Ln>>>=4)),xn.wbits===0)xn.wbits=Dn;else if(Dn>xn.wbits){An.msg="invalid window size",xn.mode=30;break}xn.dmax=1<<Dn,An.adler=xn.check=1,xn.mode=512&Ln?10:12,Cn=Ln=0;break;case 2:for(;Cn<16;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(xn.flags=Ln,(255&xn.flags)!=8){An.msg="unknown compression method",xn.mode=30;break}if(57344&xn.flags){An.msg="unknown header flags set",xn.mode=30;break}xn.head&&(xn.head.text=Ln>>8&1),512&xn.flags&&(ar[0]=255&Ln,ar[1]=Ln>>>8&255,xn.check=At(xn.check,ar,2,0)),Cn=Ln=0,xn.mode=3;case 3:for(;Cn<32;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.head&&(xn.head.time=Ln),512&xn.flags&&(ar[0]=255&Ln,ar[1]=Ln>>>8&255,ar[2]=Ln>>>16&255,ar[3]=Ln>>>24&255,xn.check=At(xn.check,ar,4,0)),Cn=Ln=0,xn.mode=4;case 4:for(;Cn<16;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.head&&(xn.head.xflags=255&Ln,xn.head.os=Ln>>8),512&xn.flags&&(ar[0]=255&Ln,ar[1]=Ln>>>8&255,xn.check=At(xn.check,ar,2,0)),Cn=Ln=0,xn.mode=5;case 5:if(1024&xn.flags){for(;Cn<16;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.length=Ln,xn.head&&(xn.head.extra_len=Ln),512&xn.flags&&(ar[0]=255&Ln,ar[1]=Ln>>>8&255,xn.check=At(xn.check,ar,2,0)),Cn=Ln=0}else xn.head&&(xn.head.extra=null);xn.mode=6;case 6:if(1024&xn.flags&&(Nn<(Zn=xn.length)&&(Zn=Nn),Zn&&(xn.head&&(Dn=xn.head.extra_len-xn.length,xn.head.extra||(xn.head.extra=new Array(xn.head.extra_len)),Et.arraySet(xn.head.extra,Qn,nr,Zn,Dn)),512&xn.flags&&(xn.check=At(xn.check,Qn,Zn,nr)),Nn-=Zn,nr+=Zn,xn.length-=Zn),xn.length))break e;xn.length=0,xn.mode=7;case 7:if(2048&xn.flags){if(Nn===0)break e;for(Zn=0;Dn=Qn[nr+Zn++],xn.head&&Dn&&xn.length<65536&&(xn.head.name+=String.fromCharCode(Dn)),Dn&&Zn<Nn;);if(512&xn.flags&&(xn.check=At(xn.check,Qn,Zn,nr)),Nn-=Zn,nr+=Zn,Dn)break e}else xn.head&&(xn.head.name=null);xn.length=0,xn.mode=8;case 8:if(4096&xn.flags){if(Nn===0)break e;for(Zn=0;Dn=Qn[nr+Zn++],xn.head&&Dn&&xn.length<65536&&(xn.head.comment+=String.fromCharCode(Dn)),Dn&&Zn<Nn;);if(512&xn.flags&&(xn.check=At(xn.check,Qn,Zn,nr)),Nn-=Zn,nr+=Zn,Dn)break e}else xn.head&&(xn.head.comment=null);xn.mode=9;case 9:if(512&xn.flags){for(;Cn<16;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(Ln!==(65535&xn.check)){An.msg="header crc mismatch",xn.mode=30;break}Cn=Ln=0}xn.head&&(xn.head.hcrc=xn.flags>>9&1,xn.head.done=!0),An.adler=xn.check=0,xn.mode=12;break;case 10:for(;Cn<32;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}An.adler=xn.check=hn(Ln),Cn=Ln=0,xn.mode=11;case 11:if(xn.havedict===0)return An.next_out=Un,An.avail_out=jn,An.next_in=nr,An.avail_in=Nn,xn.hold=Ln,xn.bits=Cn,2;An.adler=xn.check=1,xn.mode=12;case 12:if(Gn===5||Gn===6)break e;case 13:if(xn.last){Ln>>>=7&Cn,Cn-=7&Cn,xn.mode=27;break}for(;Cn<3;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}switch(xn.last=1&Ln,Cn-=1,3&(Ln>>>=1)){case 0:xn.mode=14;break;case 1:if(Pn(xn),xn.mode=20,Gn!==6)break;Ln>>>=2,Cn-=2;break e;case 2:xn.mode=17;break;case 3:An.msg="invalid block type",xn.mode=30}Ln>>>=2,Cn-=2;break;case 14:for(Ln>>>=7&Cn,Cn-=7&Cn;Cn<32;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if((65535&Ln)!=(Ln>>>16^65535)){An.msg="invalid stored block lengths",xn.mode=30;break}if(xn.length=65535&Ln,Cn=Ln=0,xn.mode=15,Gn===6)break e;case 15:xn.mode=16;case 16:if(Zn=xn.length){if(Nn<Zn&&(Zn=Nn),jn<Zn&&(Zn=jn),Zn===0)break e;Et.arraySet(qn,Qn,nr,Zn,Un),Nn-=Zn,nr+=Zn,jn-=Zn,Un+=Zn,xn.length-=Zn;break}xn.mode=12;break;case 17:for(;Cn<14;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(xn.nlen=257+(31&Ln),Ln>>>=5,Cn-=5,xn.ndist=1+(31&Ln),Ln>>>=5,Cn-=5,xn.ncode=4+(15&Ln),Ln>>>=4,Cn-=4,286<xn.nlen||30<xn.ndist){An.msg="too many length or distance symbols",xn.mode=30;break}xn.have=0,xn.mode=18;case 18:for(;xn.have<xn.ncode;){for(;Cn<3;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.lens[Sr[xn.have++]]=7&Ln,Ln>>>=3,Cn-=3}for(;xn.have<19;)xn.lens[Sr[xn.have++]]=0;if(xn.lencode=xn.lendyn,xn.lenbits=7,hr={bits:xn.lenbits},yr=Dt(0,xn.lens,0,19,xn.lencode,0,xn.work,hr),xn.lenbits=hr.bits,yr){An.msg="invalid code lengths set",xn.mode=30;break}xn.have=0,xn.mode=19;case 19:for(;xn.have<xn.nlen+xn.ndist;){for(;Pr=(Yn=xn.lencode[Ln&(1<<xn.lenbits)-1])>>>16&255,zr=65535&Yn,!((Or=Yn>>>24)<=Cn);){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(zr<16)Ln>>>=Or,Cn-=Or,xn.lens[xn.have++]=zr;else{if(zr===16){for(Jn=Or+2;Cn<Jn;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(Ln>>>=Or,Cn-=Or,xn.have===0){An.msg="invalid bit length repeat",xn.mode=30;break}Dn=xn.lens[xn.have-1],Zn=3+(3&Ln),Ln>>>=2,Cn-=2}else if(zr===17){for(Jn=Or+3;Cn<Jn;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}Cn-=Or,Dn=0,Zn=3+(7&(Ln>>>=Or)),Ln>>>=3,Cn-=3}else{for(Jn=Or+7;Cn<Jn;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}Cn-=Or,Dn=0,Zn=11+(127&(Ln>>>=Or)),Ln>>>=7,Cn-=7}if(xn.have+Zn>xn.nlen+xn.ndist){An.msg="invalid bit length repeat",xn.mode=30;break}for(;Zn--;)xn.lens[xn.have++]=Dn}}if(xn.mode===30)break;if(xn.lens[256]===0){An.msg="invalid code -- missing end-of-block",xn.mode=30;break}if(xn.lenbits=9,hr={bits:xn.lenbits},yr=Dt(Nt,xn.lens,0,xn.nlen,xn.lencode,0,xn.work,hr),xn.lenbits=hr.bits,yr){An.msg="invalid literal/lengths set",xn.mode=30;break}if(xn.distbits=6,xn.distcode=xn.distdyn,hr={bits:xn.distbits},yr=Dt(Ft,xn.lens,xn.nlen,xn.ndist,xn.distcode,0,xn.work,hr),xn.distbits=hr.bits,yr){An.msg="invalid distances set",xn.mode=30;break}if(xn.mode=20,Gn===6)break e;case 20:xn.mode=21;case 21:if(6<=Nn&&258<=jn){An.next_out=Un,An.avail_out=jn,An.next_in=nr,An.avail_in=Nn,xn.hold=Ln,xn.bits=Cn,Rt(An,ir),Un=An.next_out,qn=An.output,jn=An.avail_out,nr=An.next_in,Qn=An.input,Nn=An.avail_in,Ln=xn.hold,Cn=xn.bits,xn.mode===12&&(xn.back=-1);break}for(xn.back=0;Pr=(Yn=xn.lencode[Ln&(1<<xn.lenbits)-1])>>>16&255,zr=65535&Yn,!((Or=Yn>>>24)<=Cn);){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(Pr&&!(240&Pr)){for(Dr=Or,_r=Pr,Nr=zr;Pr=(Yn=xn.lencode[Nr+((Ln&(1<<Dr+_r)-1)>>Dr)])>>>16&255,zr=65535&Yn,!(Dr+(Or=Yn>>>24)<=Cn);){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}Ln>>>=Dr,Cn-=Dr,xn.back+=Dr}if(Ln>>>=Or,Cn-=Or,xn.back+=Or,xn.length=zr,Pr===0){xn.mode=26;break}if(32&Pr){xn.back=-1,xn.mode=12;break}if(64&Pr){An.msg="invalid literal/length code",xn.mode=30;break}xn.extra=15&Pr,xn.mode=22;case 22:if(xn.extra){for(Jn=xn.extra;Cn<Jn;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.length+=Ln&(1<<xn.extra)-1,Ln>>>=xn.extra,Cn-=xn.extra,xn.back+=xn.extra}xn.was=xn.length,xn.mode=23;case 23:for(;Pr=(Yn=xn.distcode[Ln&(1<<xn.distbits)-1])>>>16&255,zr=65535&Yn,!((Or=Yn>>>24)<=Cn);){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(!(240&Pr)){for(Dr=Or,_r=Pr,Nr=zr;Pr=(Yn=xn.distcode[Nr+((Ln&(1<<Dr+_r)-1)>>Dr)])>>>16&255,zr=65535&Yn,!(Dr+(Or=Yn>>>24)<=Cn);){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}Ln>>>=Dr,Cn-=Dr,xn.back+=Dr}if(Ln>>>=Or,Cn-=Or,xn.back+=Or,64&Pr){An.msg="invalid distance code",xn.mode=30;break}xn.offset=zr,xn.extra=15&Pr,xn.mode=24;case 24:if(xn.extra){for(Jn=xn.extra;Cn<Jn;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}xn.offset+=Ln&(1<<xn.extra)-1,Ln>>>=xn.extra,Cn-=xn.extra,xn.back+=xn.extra}if(xn.offset>xn.dmax){An.msg="invalid distance too far back",xn.mode=30;break}xn.mode=25;case 25:if(jn===0)break e;if(Zn=ir-jn,xn.offset>Zn){if((Zn=xn.offset-Zn)>xn.whave&&xn.sane){An.msg="invalid distance too far back",xn.mode=30;break}br=Zn>xn.wnext?(Zn-=xn.wnext,xn.wsize-Zn):xn.wnext-Zn,Zn>xn.length&&(Zn=xn.length),fr=xn.window}else fr=qn,br=Un-xn.offset,Zn=xn.length;for(jn<Zn&&(Zn=jn),jn-=Zn,xn.length-=Zn;qn[Un++]=fr[br++],--Zn;);xn.length===0&&(xn.mode=21);break;case 26:if(jn===0)break e;qn[Un++]=xn.length,jn--,xn.mode=21;break;case 27:if(xn.wrap){for(;Cn<32;){if(Nn===0)break e;Nn--,Ln|=Qn[nr++]<<Cn,Cn+=8}if(ir-=jn,An.total_out+=ir,xn.total+=ir,ir&&(An.adler=xn.check=xn.flags?At(xn.check,qn,ir,Un-ir):Ct(xn.check,qn,ir,Un-ir)),ir=jn,(xn.flags?Ln:hn(Ln))!==xn.check){An.msg="incorrect data check",xn.mode=30;break}Cn=Ln=0}xn.mode=28;case 28:if(xn.wrap&&xn.flags){for(;Cn<32;){if(Nn===0)break e;Nn--,Ln+=Qn[nr++]<<Cn,Cn+=8}if(Ln!==(4294967295&xn.total)){An.msg="incorrect length check",xn.mode=30;break}Cn=Ln=0}xn.mode=29;case 29:yr=1;break e;case 30:yr=-3;break e;case 31:return-4;case 32:default:return Wt}return An.next_out=Un,An.avail_out=jn,An.next_in=nr,An.avail_in=Nn,xn.hold=Ln,xn.bits=Cn,(xn.wsize||ir!==An.avail_out&&xn.mode<30&&(xn.mode<27||Gn!==4))&&zn(An,An.output,An.next_out,ir-An.avail_out)?(xn.mode=31,-4):(tr-=An.avail_in,ir-=An.avail_out,An.total_in+=tr,An.total_out+=ir,xn.total+=ir,xn.wrap&&ir&&(An.adler=xn.check=xn.flags?At(xn.check,qn,ir,An.next_out-ir):Ct(xn.check,qn,ir,An.next_out-ir)),An.data_type=xn.bits+(xn.last?64:0)+(xn.mode===12?128:0)+(xn.mode===20||xn.mode===15?256:0),(tr==0&&ir===0||Gn===4)&&yr===Ut&&(yr=-5),yr)},St.inflateEnd=function(An){if(!An||!An.state)return Wt;var Gn=An.state;return Gn.window&&(Gn.window=null),An.state=null,Ut},St.inflateGetHeader=function(An,Gn){var xn;return An&&An.state&&2&(xn=An.state).wrap?((xn.head=Gn).done=!1,Ut):Wt},St.inflateSetDictionary=function(An,Gn){var xn,Qn=Gn.length;return An&&An.state?(xn=An.state).wrap!==0&&xn.mode!==11?Wt:xn.mode===11&&Ct(1,Gn,Qn,0)!==xn.check?-3:zn(An,Gn,Qn,Qn)?(xn.mode=31,-4):(xn.havedict=1,Ut):Wt},St.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(dt,vt,St){var Et=dt("../utils/common"),Ct=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],At=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Rt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Dt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];vt.exports=function(Nt,Ft,Ut,Wt,Zt,Kt,cn,hn){var dn,pn,gn,vn,bn,$n,Tn,In,Pn,zn=hn.bits,An=0,Gn=0,xn=0,Qn=0,qn=0,nr=0,Un=0,Nn=0,jn=0,Ln=0,Cn=null,tr=0,ir=new Et.Buf16(16),Zn=new Et.Buf16(16),br=null,fr=0;for(An=0;An<=15;An++)ir[An]=0;for(Gn=0;Gn<Wt;Gn++)ir[Ft[Ut+Gn]]++;for(qn=zn,Qn=15;1<=Qn&&ir[Qn]===0;Qn--);if(Qn<qn&&(qn=Qn),Qn===0)return Zt[Kt++]=20971520,Zt[Kt++]=20971520,hn.bits=1,0;for(xn=1;xn<Qn&&ir[xn]===0;xn++);for(qn<xn&&(qn=xn),An=Nn=1;An<=15;An++)if(Nn<<=1,(Nn-=ir[An])<0)return-1;if(0<Nn&&(Nt===0||Qn!==1))return-1;for(Zn[1]=0,An=1;An<15;An++)Zn[An+1]=Zn[An]+ir[An];for(Gn=0;Gn<Wt;Gn++)Ft[Ut+Gn]!==0&&(cn[Zn[Ft[Ut+Gn]]++]=Gn);if($n=Nt===0?(Cn=br=cn,19):Nt===1?(Cn=Ct,tr-=257,br=At,fr-=257,256):(Cn=Rt,br=Dt,-1),An=xn,bn=Kt,Un=Gn=Ln=0,gn=-1,vn=(jn=1<<(nr=qn))-1,Nt===1&&852<jn||Nt===2&&592<jn)return 1;for(;;){for(Tn=An-Un,Pn=cn[Gn]<$n?(In=0,cn[Gn]):cn[Gn]>$n?(In=br[fr+cn[Gn]],Cn[tr+cn[Gn]]):(In=96,0),dn=1<<An-Un,xn=pn=1<<nr;Zt[bn+(Ln>>Un)+(pn-=dn)]=Tn<<24|In<<16|Pn|0,pn!==0;);for(dn=1<<An-1;Ln&dn;)dn>>=1;if(dn!==0?(Ln&=dn-1,Ln+=dn):Ln=0,Gn++,--ir[An]==0){if(An===Qn)break;An=Ft[Ut+cn[Gn]]}if(qn<An&&(Ln&vn)!==gn){for(Un===0&&(Un=qn),bn+=xn,Nn=1<<(nr=An-Un);nr+Un<Qn&&!((Nn-=ir[nr+Un])<=0);)nr++,Nn<<=1;if(jn+=1<<nr,Nt===1&&852<jn||Nt===2&&592<jn)return 1;Zt[gn=Ln&vn]=qn<<24|nr<<16|bn-Kt|0}}return Ln!==0&&(Zt[bn+Ln]=An-Un<<24|64<<16|0),hn.bits=qn,0}},{"../utils/common":41}],51:[function(dt,vt,St){vt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(dt,vt,St){var Et=dt("../utils/common"),Ct=0,At=1;function Rt(Yn){for(var ar=Yn.length;0<=--ar;)Yn[ar]=0}var Dt=0,Nt=29,Ft=256,Ut=Ft+1+Nt,Wt=30,Zt=19,Kt=2*Ut+1,cn=15,hn=16,dn=7,pn=256,gn=16,vn=17,bn=18,$n=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],In=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],zn=new Array(2*(Ut+2));Rt(zn);var An=new Array(2*Wt);Rt(An);var Gn=new Array(512);Rt(Gn);var xn=new Array(256);Rt(xn);var Qn=new Array(Nt);Rt(Qn);var qn,nr,Un,Nn=new Array(Wt);function jn(Yn,ar,Sr,gr,Vn){this.static_tree=Yn,this.extra_bits=ar,this.extra_base=Sr,this.elems=gr,this.max_length=Vn,this.has_stree=Yn&&Yn.length}function Ln(Yn,ar){this.dyn_tree=Yn,this.max_code=0,this.stat_desc=ar}function Cn(Yn){return Yn<256?Gn[Yn]:Gn[256+(Yn>>>7)]}function tr(Yn,ar){Yn.pending_buf[Yn.pending++]=255&ar,Yn.pending_buf[Yn.pending++]=ar>>>8&255}function ir(Yn,ar,Sr){Yn.bi_valid>hn-Sr?(Yn.bi_buf|=ar<<Yn.bi_valid&65535,tr(Yn,Yn.bi_buf),Yn.bi_buf=ar>>hn-Yn.bi_valid,Yn.bi_valid+=Sr-hn):(Yn.bi_buf|=ar<<Yn.bi_valid&65535,Yn.bi_valid+=Sr)}function Zn(Yn,ar,Sr){ir(Yn,Sr[2*ar],Sr[2*ar+1])}function br(Yn,ar){for(var Sr=0;Sr|=1&Yn,Yn>>>=1,Sr<<=1,0<--ar;);return Sr>>>1}function fr(Yn,ar,Sr){var gr,Vn,Wn=new Array(cn+1),rr=0;for(gr=1;gr<=cn;gr++)Wn[gr]=rr=rr+Sr[gr-1]<<1;for(Vn=0;Vn<=ar;Vn++){var lr=Yn[2*Vn+1];lr!==0&&(Yn[2*Vn]=br(Wn[lr]++,lr))}}function Or(Yn){var ar;for(ar=0;ar<Ut;ar++)Yn.dyn_ltree[2*ar]=0;for(ar=0;ar<Wt;ar++)Yn.dyn_dtree[2*ar]=0;for(ar=0;ar<Zt;ar++)Yn.bl_tree[2*ar]=0;Yn.dyn_ltree[2*pn]=1,Yn.opt_len=Yn.static_len=0,Yn.last_lit=Yn.matches=0}function Pr(Yn){8<Yn.bi_valid?tr(Yn,Yn.bi_buf):0<Yn.bi_valid&&(Yn.pending_buf[Yn.pending++]=Yn.bi_buf),Yn.bi_buf=0,Yn.bi_valid=0}function zr(Yn,ar,Sr,gr){var Vn=2*ar,Wn=2*Sr;return Yn[Vn]<Yn[Wn]||Yn[Vn]===Yn[Wn]&&gr[ar]<=gr[Sr]}function Dr(Yn,ar,Sr){for(var gr=Yn.heap[Sr],Vn=Sr<<1;Vn<=Yn.heap_len&&(Vn<Yn.heap_len&&zr(ar,Yn.heap[Vn+1],Yn.heap[Vn],Yn.depth)&&Vn++,!zr(ar,gr,Yn.heap[Vn],Yn.depth));)Yn.heap[Sr]=Yn.heap[Vn],Sr=Vn,Vn<<=1;Yn.heap[Sr]=gr}function _r(Yn,ar,Sr){var gr,Vn,Wn,rr,lr=0;if(Yn.last_lit!==0)for(;gr=Yn.pending_buf[Yn.d_buf+2*lr]<<8|Yn.pending_buf[Yn.d_buf+2*lr+1],Vn=Yn.pending_buf[Yn.l_buf+lr],lr++,gr===0?Zn(Yn,Vn,ar):(Zn(Yn,(Wn=xn[Vn])+Ft+1,ar),(rr=$n[Wn])!==0&&ir(Yn,Vn-=Qn[Wn],rr),Zn(Yn,Wn=Cn(--gr),Sr),(rr=Tn[Wn])!==0&&ir(Yn,gr-=Nn[Wn],rr)),lr<Yn.last_lit;);Zn(Yn,pn,ar)}function Nr(Yn,ar){var Sr,gr,Vn,Wn=ar.dyn_tree,rr=ar.stat_desc.static_tree,lr=ar.stat_desc.has_stree,xr=ar.stat_desc.elems,Fr=-1;for(Yn.heap_len=0,Yn.heap_max=Kt,Sr=0;Sr<xr;Sr++)Wn[2*Sr]!==0?(Yn.heap[++Yn.heap_len]=Fr=Sr,Yn.depth[Sr]=0):Wn[2*Sr+1]=0;for(;Yn.heap_len<2;)Wn[2*(Vn=Yn.heap[++Yn.heap_len]=Fr<2?++Fr:0)]=1,Yn.depth[Vn]=0,Yn.opt_len--,lr&&(Yn.static_len-=rr[2*Vn+1]);for(ar.max_code=Fr,Sr=Yn.heap_len>>1;1<=Sr;Sr--)Dr(Yn,Wn,Sr);for(Vn=xr;Sr=Yn.heap[1],Yn.heap[1]=Yn.heap[Yn.heap_len--],Dr(Yn,Wn,1),gr=Yn.heap[1],Yn.heap[--Yn.heap_max]=Sr,Yn.heap[--Yn.heap_max]=gr,Wn[2*Vn]=Wn[2*Sr]+Wn[2*gr],Yn.depth[Vn]=(Yn.depth[Sr]>=Yn.depth[gr]?Yn.depth[Sr]:Yn.depth[gr])+1,Wn[2*Sr+1]=Wn[2*gr+1]=Vn,Yn.heap[1]=Vn++,Dr(Yn,Wn,1),2<=Yn.heap_len;);Yn.heap[--Yn.heap_max]=Yn.heap[1],function(mr,Yr){var Vr,eo,ur,kr,Br,Rn,Xn=Yr.dyn_tree,cr=Yr.max_code,wr=Yr.stat_desc.static_tree,Kn=Yr.stat_desc.has_stree,Cr=Yr.stat_desc.extra_bits,qr=Yr.stat_desc.extra_base,oo=Yr.stat_desc.max_length,co=0;for(kr=0;kr<=cn;kr++)mr.bl_count[kr]=0;for(Xn[2*mr.heap[mr.heap_max]+1]=0,Vr=mr.heap_max+1;Vr<Kt;Vr++)oo<(kr=Xn[2*Xn[2*(eo=mr.heap[Vr])+1]+1]+1)&&(kr=oo,co++),Xn[2*eo+1]=kr,cr<eo||(mr.bl_count[kr]++,Br=0,qr<=eo&&(Br=Cr[eo-qr]),Rn=Xn[2*eo],mr.opt_len+=Rn*(kr+Br),Kn&&(mr.static_len+=Rn*(wr[2*eo+1]+Br)));if(co!==0){do{for(kr=oo-1;mr.bl_count[kr]===0;)kr--;mr.bl_count[kr]--,mr.bl_count[kr+1]+=2,mr.bl_count[oo]--,co-=2}while(0<co);for(kr=oo;kr!==0;kr--)for(eo=mr.bl_count[kr];eo!==0;)cr<(ur=mr.heap[--Vr])||(Xn[2*ur+1]!==kr&&(mr.opt_len+=(kr-Xn[2*ur+1])*Xn[2*ur],Xn[2*ur+1]=kr),eo--)}}(Yn,ar),fr(Wn,Fr,Yn.bl_count)}function Dn(Yn,ar,Sr){var gr,Vn,Wn=-1,rr=ar[1],lr=0,xr=7,Fr=4;for(rr===0&&(xr=138,Fr=3),ar[2*(Sr+1)+1]=65535,gr=0;gr<=Sr;gr++)Vn=rr,rr=ar[2*(gr+1)+1],++lr<xr&&Vn===rr||(lr<Fr?Yn.bl_tree[2*Vn]+=lr:Vn!==0?(Vn!==Wn&&Yn.bl_tree[2*Vn]++,Yn.bl_tree[2*gn]++):lr<=10?Yn.bl_tree[2*vn]++:Yn.bl_tree[2*bn]++,Wn=Vn,Fr=(lr=0)===rr?(xr=138,3):Vn===rr?(xr=6,3):(xr=7,4))}function yr(Yn,ar,Sr){var gr,Vn,Wn=-1,rr=ar[1],lr=0,xr=7,Fr=4;for(rr===0&&(xr=138,Fr=3),gr=0;gr<=Sr;gr++)if(Vn=rr,rr=ar[2*(gr+1)+1],!(++lr<xr&&Vn===rr)){if(lr<Fr)for(;Zn(Yn,Vn,Yn.bl_tree),--lr!=0;);else Vn!==0?(Vn!==Wn&&(Zn(Yn,Vn,Yn.bl_tree),lr--),Zn(Yn,gn,Yn.bl_tree),ir(Yn,lr-3,2)):lr<=10?(Zn(Yn,vn,Yn.bl_tree),ir(Yn,lr-3,3)):(Zn(Yn,bn,Yn.bl_tree),ir(Yn,lr-11,7));Wn=Vn,Fr=(lr=0)===rr?(xr=138,3):Vn===rr?(xr=6,3):(xr=7,4)}}Rt(Nn);var hr=!1;function Jn(Yn,ar,Sr,gr){ir(Yn,(Dt<<1)+(gr?1:0),3),function(Vn,Wn,rr,lr){Pr(Vn),lr&&(tr(Vn,rr),tr(Vn,~rr)),Et.arraySet(Vn.pending_buf,Vn.window,Wn,rr,Vn.pending),Vn.pending+=rr}(Yn,ar,Sr,!0)}St._tr_init=function(Yn){hr||(function(){var ar,Sr,gr,Vn,Wn,rr=new Array(cn+1);for(Vn=gr=0;Vn<Nt-1;Vn++)for(Qn[Vn]=gr,ar=0;ar<1<<$n[Vn];ar++)xn[gr++]=Vn;for(xn[gr-1]=Vn,Vn=Wn=0;Vn<16;Vn++)for(Nn[Vn]=Wn,ar=0;ar<1<<Tn[Vn];ar++)Gn[Wn++]=Vn;for(Wn>>=7;Vn<Wt;Vn++)for(Nn[Vn]=Wn<<7,ar=0;ar<1<<Tn[Vn]-7;ar++)Gn[256+Wn++]=Vn;for(Sr=0;Sr<=cn;Sr++)rr[Sr]=0;for(ar=0;ar<=143;)zn[2*ar+1]=8,ar++,rr[8]++;for(;ar<=255;)zn[2*ar+1]=9,ar++,rr[9]++;for(;ar<=279;)zn[2*ar+1]=7,ar++,rr[7]++;for(;ar<=287;)zn[2*ar+1]=8,ar++,rr[8]++;for(fr(zn,Ut+1,rr),ar=0;ar<Wt;ar++)An[2*ar+1]=5,An[2*ar]=br(ar,5);qn=new jn(zn,$n,Ft+1,Ut,cn),nr=new jn(An,Tn,0,Wt,cn),Un=new jn(new Array(0),In,0,Zt,dn)}(),hr=!0),Yn.l_desc=new Ln(Yn.dyn_ltree,qn),Yn.d_desc=new Ln(Yn.dyn_dtree,nr),Yn.bl_desc=new Ln(Yn.bl_tree,Un),Yn.bi_buf=0,Yn.bi_valid=0,Or(Yn)},St._tr_stored_block=Jn,St._tr_flush_block=function(Yn,ar,Sr,gr){var Vn,Wn,rr=0;0<Yn.level?(Yn.strm.data_type===2&&(Yn.strm.data_type=function(lr){var xr,Fr=4093624447;for(xr=0;xr<=31;xr++,Fr>>>=1)if(1&Fr&&lr.dyn_ltree[2*xr]!==0)return Ct;if(lr.dyn_ltree[18]!==0||lr.dyn_ltree[20]!==0||lr.dyn_ltree[26]!==0)return At;for(xr=32;xr<Ft;xr++)if(lr.dyn_ltree[2*xr]!==0)return At;return Ct}(Yn)),Nr(Yn,Yn.l_desc),Nr(Yn,Yn.d_desc),rr=function(lr){var xr;for(Dn(lr,lr.dyn_ltree,lr.l_desc.max_code),Dn(lr,lr.dyn_dtree,lr.d_desc.max_code),Nr(lr,lr.bl_desc),xr=Zt-1;3<=xr&&lr.bl_tree[2*Pn[xr]+1]===0;xr--);return lr.opt_len+=3*(xr+1)+5+5+4,xr}(Yn),Vn=Yn.opt_len+3+7>>>3,(Wn=Yn.static_len+3+7>>>3)<=Vn&&(Vn=Wn)):Vn=Wn=Sr+5,Sr+4<=Vn&&ar!==-1?Jn(Yn,ar,Sr,gr):Yn.strategy===4||Wn===Vn?(ir(Yn,2+(gr?1:0),3),_r(Yn,zn,An)):(ir(Yn,4+(gr?1:0),3),function(lr,xr,Fr,mr){var Yr;for(ir(lr,xr-257,5),ir(lr,Fr-1,5),ir(lr,mr-4,4),Yr=0;Yr<mr;Yr++)ir(lr,lr.bl_tree[2*Pn[Yr]+1],3);yr(lr,lr.dyn_ltree,xr-1),yr(lr,lr.dyn_dtree,Fr-1)}(Yn,Yn.l_desc.max_code+1,Yn.d_desc.max_code+1,rr+1),_r(Yn,Yn.dyn_ltree,Yn.dyn_dtree)),Or(Yn),gr&&Pr(Yn)},St._tr_tally=function(Yn,ar,Sr){return Yn.pending_buf[Yn.d_buf+2*Yn.last_lit]=ar>>>8&255,Yn.pending_buf[Yn.d_buf+2*Yn.last_lit+1]=255&ar,Yn.pending_buf[Yn.l_buf+Yn.last_lit]=255&Sr,Yn.last_lit++,ar===0?Yn.dyn_ltree[2*Sr]++:(Yn.matches++,ar--,Yn.dyn_ltree[2*(xn[Sr]+Ft+1)]++,Yn.dyn_dtree[2*Cn(ar)]++),Yn.last_lit===Yn.lit_bufsize-1},St._tr_align=function(Yn){ir(Yn,2,3),Zn(Yn,pn,zn),function(ar){ar.bi_valid===16?(tr(ar,ar.bi_buf),ar.bi_buf=0,ar.bi_valid=0):8<=ar.bi_valid&&(ar.pending_buf[ar.pending++]=255&ar.bi_buf,ar.bi_buf>>=8,ar.bi_valid-=8)}(Yn)}},{"../utils/common":41}],53:[function(dt,vt,St){vt.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(dt,vt,St){(function(Et){(function(Ct,At){if(!Ct.setImmediate){var Rt,Dt,Nt,Ft,Ut=1,Wt={},Zt=!1,Kt=Ct.document,cn=Object.getPrototypeOf&&Object.getPrototypeOf(Ct);cn=cn&&cn.setTimeout?cn:Ct,Rt={}.toString.call(Ct.process)==="[object process]"?function(gn){process.nextTick(function(){dn(gn)})}:function(){if(Ct.postMessage&&!Ct.importScripts){var gn=!0,vn=Ct.onmessage;return Ct.onmessage=function(){gn=!1},Ct.postMessage("","*"),Ct.onmessage=vn,gn}}()?(Ft="setImmediate$"+Math.random()+"$",Ct.addEventListener?Ct.addEventListener("message",pn,!1):Ct.attachEvent("onmessage",pn),function(gn){Ct.postMessage(Ft+gn,"*")}):Ct.MessageChannel?((Nt=new MessageChannel).port1.onmessage=function(gn){dn(gn.data)},function(gn){Nt.port2.postMessage(gn)}):Kt&&"onreadystatechange"in Kt.createElement("script")?(Dt=Kt.documentElement,function(gn){var vn=Kt.createElement("script");vn.onreadystatechange=function(){dn(gn),vn.onreadystatechange=null,Dt.removeChild(vn),vn=null},Dt.appendChild(vn)}):function(gn){setTimeout(dn,0,gn)},cn.setImmediate=function(gn){typeof gn!="function"&&(gn=new Function(""+gn));for(var vn=new Array(arguments.length-1),bn=0;bn<vn.length;bn++)vn[bn]=arguments[bn+1];var $n={callback:gn,args:vn};return Wt[Ut]=$n,Rt(Ut),Ut++},cn.clearImmediate=hn}function hn(gn){delete Wt[gn]}function dn(gn){if(Zt)setTimeout(dn,0,gn);else{var vn=Wt[gn];if(vn){Zt=!0;try{(function(bn){var $n=bn.callback,Tn=bn.args;switch(Tn.length){case 0:$n();break;case 1:$n(Tn[0]);break;case 2:$n(Tn[0],Tn[1]);break;case 3:$n(Tn[0],Tn[1],Tn[2]);break;default:$n.apply(At,Tn)}})(vn)}finally{hn(gn),Zt=!1}}}}function pn(gn){gn.source===Ct&&typeof gn.data=="string"&&gn.data.indexOf(Ft)===0&&dn(+gn.data.slice(Ft.length))}})(typeof self>"u"?Et===void 0?this:Et:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JsZip=getDefaultExportFromCjs(jszip_minExports);var FileSaver_min={exports:{}};(function(ft,lt){(function(dt,vt){vt()})(commonjsGlobal,function(){function dt(Dt,Nt){return typeof Nt>"u"?Nt={autoBom:!1}:typeof Nt!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Nt={autoBom:!Nt}),Nt.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Dt.type)?new Blob(["\uFEFF",Dt],{type:Dt.type}):Dt}function vt(Dt,Nt,Ft){var Ut=new XMLHttpRequest;Ut.open("GET",Dt),Ut.responseType="blob",Ut.onload=function(){Rt(Ut.response,Nt,Ft)},Ut.onerror=function(){console.error("could not download file")},Ut.send()}function St(Dt){var Nt=new XMLHttpRequest;Nt.open("HEAD",Dt,!1);try{Nt.send()}catch{}return 200<=Nt.status&&299>=Nt.status}function Et(Dt){try{Dt.dispatchEvent(new MouseEvent("click"))}catch{var Nt=document.createEvent("MouseEvents");Nt.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Dt.dispatchEvent(Nt)}}var Ct=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,At=Ct.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Rt=Ct.saveAs||(typeof window!="object"||window!==Ct?function(){}:"download"in HTMLAnchorElement.prototype&&!At?function(Dt,Nt,Ft){var Ut=Ct.URL||Ct.webkitURL,Wt=document.createElement("a");Nt=Nt||Dt.name||"download",Wt.download=Nt,Wt.rel="noopener",typeof Dt=="string"?(Wt.href=Dt,Wt.origin===location.origin?Et(Wt):St(Wt.href)?vt(Dt,Nt,Ft):Et(Wt,Wt.target="_blank")):(Wt.href=Ut.createObjectURL(Dt),setTimeout(function(){Ut.revokeObjectURL(Wt.href)},4e4),setTimeout(function(){Et(Wt)},0))}:"msSaveOrOpenBlob"in navigator?function(Dt,Nt,Ft){if(Nt=Nt||Dt.name||"download",typeof Dt!="string")navigator.msSaveOrOpenBlob(dt(Dt,Ft),Nt);else if(St(Dt))vt(Dt,Nt,Ft);else{var Ut=document.createElement("a");Ut.href=Dt,Ut.target="_blank",setTimeout(function(){Et(Ut)})}}:function(Dt,Nt,Ft,Ut){if(Ut=Ut||open("","_blank"),Ut&&(Ut.document.title=Ut.document.body.innerText="downloading..."),typeof Dt=="string")return vt(Dt,Nt,Ft);var Wt=Dt.type==="application/octet-stream",Zt=/constructor/i.test(Ct.HTMLElement)||Ct.safari,Kt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Kt||Wt&&Zt||At)&&typeof FileReader<"u"){var cn=new FileReader;cn.onloadend=function(){var pn=cn.result;pn=Kt?pn:pn.replace(/^data:[^;]*;/,"data:attachment/file;"),Ut?Ut.location.href=pn:location=pn,Ut=null},cn.readAsDataURL(Dt)}else{var hn=Ct.URL||Ct.webkitURL,dn=hn.createObjectURL(Dt);Ut?Ut.location=dn:location.href=dn,Ut=null,setTimeout(function(){hn.revokeObjectURL(dn)},4e4)}});Ct.saveAs=Rt.saveAs=Rt,ft.exports=Rt})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const FileSaver=getDefaultExportFromCjs(FileSaver_minExports),trajLine=45,execBlocksLine=88;var launcherNodeLine=39;const exportToROS=async(ft,lt)=>{var dt=launcherNode.split(`
`),vt=0;const St=JsZip(),Et=ft.timelineState.groups;for(let dn in Et){const pn=ft.timelineState.groups[dn],gn=Object.values(pn.robots);var Ct=[];if(gn.length===0)continue;vt+=1;for(let bn in gn)console.log(gn,bn),gn[bn]!=null&&(Ct.push(bn),console.log("Robot Indices",Ct));var At="",Rt="";if(Object.keys(pn.items).length===0){console.log("No items"+pn);continue}else console.log(pn.items);console.log("Items: "+pn.items);for(let bn in pn.items){console.log(bn);const $n=pn.items[bn],Tn=$n.startTime,In=ft.blocks[$n.blockId].python;if($n.isTrajectory)At+="        trajectories.append("+In+")",Rt+="        start_time = ${startTime}\n",Rt+=`        self.wait_until(start_time)
`,Rt+=`        for cf in self.crazyflies:
`,Rt+="            cf.startTrajectory(${trajCounter}, 0, 1)\n",Rt+="        self.wait_until(start_time + self.trajectories[${trajCounter}].duration\n";else{Rt+=`        start_time = ${Tn}
`,Rt+=`        total_duration = 1
`,Rt+=`        self.wait_until(start_time)
`;for(var Dt=In.split(`
`),Nt=0;Nt<Dt.length-1;Nt++)Rt+=`        for cf in self.crazyflies:
`,Rt+=`            block_duration = ${Dt[Nt]}
`,Rt+=`        self.wait(block_duration)
`;Rt+=`        self.wait_until(start_time + total_duration)
`}}var Ft=workerNodeTemplate.split(`
`);Ft.splice(trajLine,0,At),Ft.splice(execBlocksLine,0,Rt),console.log(Ct);var Ut=`    import ${dn}_node
`;Ut=`    cfs = []
`;for(let bn in Ct)Ut+=`    cfs.append(crazyflies[${bn}])
`;Ut+=`    nodes.append(${dn}_node.worker_node(cfs, len(nodes)-1, ${vt}))
`,dt.splice(launcherNodeLine,0,Ut),launcherNodeLine+=2;const vn=new Blob([Ft.join(`
`)],{type:"text/plain"});St.file(`${dn}_node.py`,vn)}const Wt=new Blob([dt.join(`
`)],{type:"text/plain"}),Zt=new Blob([configure],{type:"text/plain"});var Kt=`positions:
`;for(let dn in Object.values(ft.robots)){var cn=[0,0,0];ft.robots[dn]!=null&&(cn=ft.robots[dn].startingPosition),Kt+=`    - [${cn[0]}, ${cn[1]}, ${cn[2]}]
`}const hn=new Blob([Kt],{type:"text/plain"});St.file("starting_positions.yaml",hn),St.file("configure.py",Zt),St.file("launch_nodes.py",Wt),St.generateAsync({type:"blob"}).then(dn=>FileSaver.saveAs(dn,`${ft.projectName}.zip`))},workerNodeTemplate=`import rclpy
from rclpy.node import Node
from std_msgs.msg import Int32
from crazyflie_py import generate_trajectory
import numpy as np
from blocklyTranslations import *

Hz = 30

class worker_node(Node):

    def __init__(self, crazyflies, id=0, num_nodes=1):
        """
        id: a unique id between 0 and num_nodes corresponding to the thread number of this worker
        num_nodes: number of nodes (threads) in total
        """
        super().__init__("worker_node_{}".format(id))
        self.id = id
        self.num_nodes = num_nodes
        self.crazyflies = crazyflies

        self.execution_ready_subscription(
            Int32,
            'ready',
            self.ready_callback,
            num_nodes + 1
        )
        self.execution_ready_publisher(
            Int32,
            'ready',
            num_nodes + 1
        )
        self.timer = self.create_timer(1/Hz, self.timer_callback)
        self.ready_ids = set()
        self.executing = False
        self.running = False
        self.done = False
    
    def compute_trajectories(self):
        """
        Inject Trajectory computation code here...
        """
        trajectories = []
        
        #TODO insert trajectories here...

        return trajectories

    def upload_trajectories(crazyflies, trajectories):
        '''
            Upload trajectories to crazyflies one by one
        '''

        # TODO: Currently doesn't support overlapping crazyflies as we will overwrite trajectories...
        for i, traj in enumerate(trajectories):
            for cf in crazyflies:
                cf.uploadTrajectory(traj, i, 0)

    def begin(self):
        """
            Prepare for execution. Pre-compute trajectories and upload them to crazyflies
        """
        trajectories = self.compute_trajectories()
        self.upload_trajectories(trajectories)
        msg = Int32()
        msg.data = self.id
        self.ready_publisher.publish(msg)

    def time(self):
        return self.get_clock().now().nanoseconds / 1e9
    
    def execute_blocks(self):
        """
        Must be injected into...

        Typical format should be:
        
        start_time = 0.0
        duration = 3.0
        self.wait_until(start_time)
        for cf in self.crazyflies:
            cf.takeoff(1.0, duration)
        self.wait_until(start_time+duration)

        where start_time, duration, and in the inner portion of the for loop are provided.
        """
        # BLOCKS...
        pass

    def ready_callback(self, msg):
        self.ready_ids.add(msg.data)
    
    def timer_callback(self):
        if not self.running:
            self.begin()
            self.running = True
        if len(self.ready_ids) == self.num_nodes and not self.executing:
            self.running = True
            self.start_time = self.get_clock().now()
            self.execute_blocks()
            self.destroy_node()
            self.done = True

    def wait_until(self, end_time):
        while self.time() < end_time:
            rclpy.spin_once(self, timeout_sec=0)

    def wait(self, time):
        end_time = self.time() + time
        self.wait_until(end_time)
`,launcherNode=`import yaml
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node
from crazyflie_py import Crazyswarm
import rclpy
import threading

# Inject Imports Here:

def launch(nodes):
    threads = []
    for node in nodes:
        thread = threading.Thread(target=rclpy.spin, args=(node, ), daemon=True)
        thread.start()
        threads.append(thread)
    while not all([n.done for n in nodes]):
        pass
    rclpy.shutdown()
    [t.join() for t in threads]

def main():
    # node_config_file = get_package_share_directory('crazyflie'), 'config', 'crazyflies.yaml'
    
    # Initialize swarm
    swarm = Crazyswarm()
    with open("cfs_ordering.yaml") as f:
        ordering = yaml.load(f)
        order = ordering['cfs']
    # all_crazyflies = swarm.allcfs.crazyflies
    all_crazyflies = [swarm.allcfs.crazyfliesById[k] for k in order]
    # Construct Launch Description from yaml files
    # One node per line in the timeline, linked to a worker node described in the yaml file
    counter = 0
    nodes = []
    cfs = []

    # Inject append here...

    # cfs.append(all_crazyflies[0])
    # nodes.append(group1_node.worker_node(cfs, len(cfs), 1))
    
    # Launch all nodes
    return launch(nodes)

if __name__ == '__main__':
    main()
`,configure=`# Need to ask user which crazyflies they will use, and will tell them where to place them

import yaml
import copy
import os, sys, stat

# Load starting positions from blockly
with open('starting_positions.yaml') as f:
    starting_positions = yaml.load(f)

n_robots = len(starting_positions['positions'])

print("You will need {} crazyflies".format(n_robots))
print("Which crazyflies (by ID) will you use?")

cfs = []
for i in range(n_robots):
    cf = input("crazyflie #{}: ".format(i + 1))
    cfs.append(cf)

    
start_dict = {}
for cf, pos in zip(cfs, starting_positions['positions']):
    print("Place cf {} at location {}".format(cf, pos))
    start_dict[cf] = pos

# Make changes to local mycrazyflies.yaml
with open('crazyflies.yaml') as f:
    all_crazyflies = yaml.load(f)

my_cfs = copy.deepcopy(all_crazyflies)
for r in all_crazyflies['robots']:
    id = r.strip('cf')
    if id not in cfs:
        del my_cfs['robots'][r]
    else:
        my_cfs['robots'][r]['enabled'] = True
        my_cfs['robots'][r]['initial_position'] = start_dict[id]


with open('my_crazyflies.yaml', 'w') as f:
    yaml.dump(my_cfs, f)

# Make commands for sim and non-sim launches
with open('sim.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml backend:=sim')
    os.chmod('sim.sh', stat.S_IRWXU)
with open('run.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml')
    os.chmod('run.sh', stat.S_IRWXU)
`,saveProjectToFile=(ft,lt=void 0)=>{const dt=JSON.stringify(ft);lt=lt??ft.projectName.replaceAll(" ","")+".robart",saveToFile(lt,dt)},loadProjectFromFile=ft=>JSON.parse(ft),exportROS=(ft,lt)=>{exportToROS(ft)};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="150",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(lt,dt){this._listeners===void 0&&(this._listeners={});const vt=this._listeners;vt[lt]===void 0&&(vt[lt]=[]),vt[lt].indexOf(dt)===-1&&vt[lt].push(dt)}hasEventListener(lt,dt){if(this._listeners===void 0)return!1;const vt=this._listeners;return vt[lt]!==void 0&&vt[lt].indexOf(dt)!==-1}removeEventListener(lt,dt){if(this._listeners===void 0)return;const St=this._listeners[lt];if(St!==void 0){const Et=St.indexOf(dt);Et!==-1&&St.splice(Et,1)}}dispatchEvent(lt){if(this._listeners===void 0)return;const vt=this._listeners[lt.type];if(vt!==void 0){lt.target=this;const St=vt.slice(0);for(let Et=0,Ct=St.length;Et<Ct;Et++)St[Et].call(this,lt);lt.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const ft=Math.random()*4294967295|0,lt=Math.random()*4294967295|0,dt=Math.random()*4294967295|0,vt=Math.random()*4294967295|0;return(_lut$1[ft&255]+_lut$1[ft>>8&255]+_lut$1[ft>>16&255]+_lut$1[ft>>24&255]+"-"+_lut$1[lt&255]+_lut$1[lt>>8&255]+"-"+_lut$1[lt>>16&15|64]+_lut$1[lt>>24&255]+"-"+_lut$1[dt&63|128]+_lut$1[dt>>8&255]+"-"+_lut$1[dt>>16&255]+_lut$1[dt>>24&255]+_lut$1[vt&255]+_lut$1[vt>>8&255]+_lut$1[vt>>16&255]+_lut$1[vt>>24&255]).toLowerCase()}function clamp$1(ft,lt,dt){return Math.max(lt,Math.min(dt,ft))}function euclideanModulo(ft,lt){return(ft%lt+lt)%lt}function mapLinear(ft,lt,dt,vt,St){return vt+(ft-lt)*(St-vt)/(dt-lt)}function inverseLerp(ft,lt,dt){return ft!==lt?(dt-ft)/(lt-ft):0}function lerp(ft,lt,dt){return(1-dt)*ft+dt*lt}function damp(ft,lt,dt,vt){return lerp(ft,lt,1-Math.exp(-dt*vt))}function pingpong(ft,lt=1){return lt-Math.abs(euclideanModulo(ft,lt*2)-lt)}function smoothstep(ft,lt,dt){return ft<=lt?0:ft>=dt?1:(ft=(ft-lt)/(dt-lt),ft*ft*(3-2*ft))}function smootherstep(ft,lt,dt){return ft<=lt?0:ft>=dt?1:(ft=(ft-lt)/(dt-lt),ft*ft*ft*(ft*(ft*6-15)+10))}function randInt(ft,lt){return ft+Math.floor(Math.random()*(lt-ft+1))}function randFloat(ft,lt){return ft+Math.random()*(lt-ft)}function randFloatSpread(ft){return ft*(.5-Math.random())}function seededRandom(ft){ft!==void 0&&(_seed=ft);let lt=_seed+=1831565813;return lt=Math.imul(lt^lt>>>15,lt|1),lt^=lt+Math.imul(lt^lt>>>7,lt|61),((lt^lt>>>14)>>>0)/4294967296}function degToRad(ft){return ft*DEG2RAD}function radToDeg(ft){return ft*RAD2DEG}function isPowerOfTwo(ft){return(ft&ft-1)===0&&ft!==0}function ceilPowerOfTwo(ft){return Math.pow(2,Math.ceil(Math.log(ft)/Math.LN2))}function floorPowerOfTwo(ft){return Math.pow(2,Math.floor(Math.log(ft)/Math.LN2))}function setQuaternionFromProperEuler(ft,lt,dt,vt,St){const Et=Math.cos,Ct=Math.sin,At=Et(dt/2),Rt=Ct(dt/2),Dt=Et((lt+vt)/2),Nt=Ct((lt+vt)/2),Ft=Et((lt-vt)/2),Ut=Ct((lt-vt)/2),Wt=Et((vt-lt)/2),Zt=Ct((vt-lt)/2);switch(St){case"XYX":ft.set(At*Nt,Rt*Ft,Rt*Ut,At*Dt);break;case"YZY":ft.set(Rt*Ut,At*Nt,Rt*Ft,At*Dt);break;case"ZXZ":ft.set(Rt*Ft,Rt*Ut,At*Nt,At*Dt);break;case"XZX":ft.set(At*Nt,Rt*Zt,Rt*Wt,At*Dt);break;case"YXY":ft.set(Rt*Wt,At*Nt,Rt*Zt,At*Dt);break;case"ZYZ":ft.set(Rt*Zt,Rt*Wt,At*Nt,At*Dt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+St)}}function denormalize(ft,lt){switch(lt.constructor){case Float32Array:return ft;case Uint16Array:return ft/65535;case Uint8Array:return ft/255;case Int16Array:return Math.max(ft/32767,-1);case Int8Array:return Math.max(ft/127,-1);default:throw new Error("Invalid component type.")}}function normalize(ft,lt){switch(lt.constructor){case Float32Array:return ft;case Uint16Array:return Math.round(ft*65535);case Uint8Array:return Math.round(ft*255);case Int16Array:return Math.round(ft*32767);case Int8Array:return Math.round(ft*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(lt=0,dt=0){Vector2.prototype.isVector2=!0,this.x=lt,this.y=dt}get width(){return this.x}set width(lt){this.x=lt}get height(){return this.y}set height(lt){this.y=lt}set(lt,dt){return this.x=lt,this.y=dt,this}setScalar(lt){return this.x=lt,this.y=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y)}copy(lt){return this.x=lt.x,this.y=lt.y,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this}addScalar(lt){return this.x+=lt,this.y+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this}subScalar(lt){return this.x-=lt,this.y-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this}divide(lt){return this.x/=lt.x,this.y/=lt.y,this}divideScalar(lt){return this.multiplyScalar(1/lt)}applyMatrix3(lt){const dt=this.x,vt=this.y,St=lt.elements;return this.x=St[0]*dt+St[3]*vt+St[6],this.y=St[1]*dt+St[4]*vt+St[7],this}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(lt){return this.x*lt.x+this.y*lt.y}cross(lt){return this.x*lt.y-this.y*lt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(lt){return Math.sqrt(this.distanceToSquared(lt))}distanceToSquared(lt){const dt=this.x-lt.x,vt=this.y-lt.y;return dt*dt+vt*vt}manhattanDistanceTo(lt){return Math.abs(this.x-lt.x)+Math.abs(this.y-lt.y)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this}equals(lt){return lt.x===this.x&&lt.y===this.y}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this}rotateAround(lt,dt){const vt=Math.cos(dt),St=Math.sin(dt),Et=this.x-lt.x,Ct=this.y-lt.y;return this.x=Et*vt-Ct*St+lt.x,this.y=Et*St+Ct*vt+lt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(lt,dt,vt,St,Et,Ct,At,Rt,Dt){const Nt=this.elements;return Nt[0]=lt,Nt[1]=St,Nt[2]=At,Nt[3]=dt,Nt[4]=Et,Nt[5]=Rt,Nt[6]=vt,Nt[7]=Ct,Nt[8]=Dt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(lt){const dt=this.elements,vt=lt.elements;return dt[0]=vt[0],dt[1]=vt[1],dt[2]=vt[2],dt[3]=vt[3],dt[4]=vt[4],dt[5]=vt[5],dt[6]=vt[6],dt[7]=vt[7],dt[8]=vt[8],this}extractBasis(lt,dt,vt){return lt.setFromMatrix3Column(this,0),dt.setFromMatrix3Column(this,1),vt.setFromMatrix3Column(this,2),this}setFromMatrix4(lt){const dt=lt.elements;return this.set(dt[0],dt[4],dt[8],dt[1],dt[5],dt[9],dt[2],dt[6],dt[10]),this}multiply(lt){return this.multiplyMatrices(this,lt)}premultiply(lt){return this.multiplyMatrices(lt,this)}multiplyMatrices(lt,dt){const vt=lt.elements,St=dt.elements,Et=this.elements,Ct=vt[0],At=vt[3],Rt=vt[6],Dt=vt[1],Nt=vt[4],Ft=vt[7],Ut=vt[2],Wt=vt[5],Zt=vt[8],Kt=St[0],cn=St[3],hn=St[6],dn=St[1],pn=St[4],gn=St[7],vn=St[2],bn=St[5],$n=St[8];return Et[0]=Ct*Kt+At*dn+Rt*vn,Et[3]=Ct*cn+At*pn+Rt*bn,Et[6]=Ct*hn+At*gn+Rt*$n,Et[1]=Dt*Kt+Nt*dn+Ft*vn,Et[4]=Dt*cn+Nt*pn+Ft*bn,Et[7]=Dt*hn+Nt*gn+Ft*$n,Et[2]=Ut*Kt+Wt*dn+Zt*vn,Et[5]=Ut*cn+Wt*pn+Zt*bn,Et[8]=Ut*hn+Wt*gn+Zt*$n,this}multiplyScalar(lt){const dt=this.elements;return dt[0]*=lt,dt[3]*=lt,dt[6]*=lt,dt[1]*=lt,dt[4]*=lt,dt[7]*=lt,dt[2]*=lt,dt[5]*=lt,dt[8]*=lt,this}determinant(){const lt=this.elements,dt=lt[0],vt=lt[1],St=lt[2],Et=lt[3],Ct=lt[4],At=lt[5],Rt=lt[6],Dt=lt[7],Nt=lt[8];return dt*Ct*Nt-dt*At*Dt-vt*Et*Nt+vt*At*Rt+St*Et*Dt-St*Ct*Rt}invert(){const lt=this.elements,dt=lt[0],vt=lt[1],St=lt[2],Et=lt[3],Ct=lt[4],At=lt[5],Rt=lt[6],Dt=lt[7],Nt=lt[8],Ft=Nt*Ct-At*Dt,Ut=At*Rt-Nt*Et,Wt=Dt*Et-Ct*Rt,Zt=dt*Ft+vt*Ut+St*Wt;if(Zt===0)return this.set(0,0,0,0,0,0,0,0,0);const Kt=1/Zt;return lt[0]=Ft*Kt,lt[1]=(St*Dt-Nt*vt)*Kt,lt[2]=(At*vt-St*Ct)*Kt,lt[3]=Ut*Kt,lt[4]=(Nt*dt-St*Rt)*Kt,lt[5]=(St*Et-At*dt)*Kt,lt[6]=Wt*Kt,lt[7]=(vt*Rt-Dt*dt)*Kt,lt[8]=(Ct*dt-vt*Et)*Kt,this}transpose(){let lt;const dt=this.elements;return lt=dt[1],dt[1]=dt[3],dt[3]=lt,lt=dt[2],dt[2]=dt[6],dt[6]=lt,lt=dt[5],dt[5]=dt[7],dt[7]=lt,this}getNormalMatrix(lt){return this.setFromMatrix4(lt).invert().transpose()}transposeIntoArray(lt){const dt=this.elements;return lt[0]=dt[0],lt[1]=dt[3],lt[2]=dt[6],lt[3]=dt[1],lt[4]=dt[4],lt[5]=dt[7],lt[6]=dt[2],lt[7]=dt[5],lt[8]=dt[8],this}setUvTransform(lt,dt,vt,St,Et,Ct,At){const Rt=Math.cos(Et),Dt=Math.sin(Et);return this.set(vt*Rt,vt*Dt,-vt*(Rt*Ct+Dt*At)+Ct+lt,-St*Dt,St*Rt,-St*(-Dt*Ct+Rt*At)+At+dt,0,0,1),this}scale(lt,dt){return this.premultiply(_m3.makeScale(lt,dt)),this}rotate(lt){return this.premultiply(_m3.makeRotation(-lt)),this}translate(lt,dt){return this.premultiply(_m3.makeTranslation(lt,dt)),this}makeTranslation(lt,dt){return this.set(1,0,lt,0,1,dt,0,0,1),this}makeRotation(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,-vt,0,vt,dt,0,0,0,1),this}makeScale(lt,dt){return this.set(lt,0,0,0,dt,0,0,0,1),this}equals(lt){const dt=this.elements,vt=lt.elements;for(let St=0;St<9;St++)if(dt[St]!==vt[St])return!1;return!0}fromArray(lt,dt=0){for(let vt=0;vt<9;vt++)this.elements[vt]=lt[vt+dt];return this}toArray(lt=[],dt=0){const vt=this.elements;return lt[dt]=vt[0],lt[dt+1]=vt[1],lt[dt+2]=vt[2],lt[dt+3]=vt[3],lt[dt+4]=vt[4],lt[dt+5]=vt[5],lt[dt+6]=vt[6],lt[dt+7]=vt[7],lt[dt+8]=vt[8],lt}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(ft){for(let lt=ft.length-1;lt>=0;--lt)if(ft[lt]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(ft,lt){return new TYPED_ARRAYS[ft](lt)}function createElementNS$1(ft){return document.createElementNS("http://www.w3.org/1999/xhtml",ft)}class Quaternion{constructor(lt=0,dt=0,vt=0,St=1){this.isQuaternion=!0,this._x=lt,this._y=dt,this._z=vt,this._w=St}static slerpFlat(lt,dt,vt,St,Et,Ct,At){let Rt=vt[St+0],Dt=vt[St+1],Nt=vt[St+2],Ft=vt[St+3];const Ut=Et[Ct+0],Wt=Et[Ct+1],Zt=Et[Ct+2],Kt=Et[Ct+3];if(At===0){lt[dt+0]=Rt,lt[dt+1]=Dt,lt[dt+2]=Nt,lt[dt+3]=Ft;return}if(At===1){lt[dt+0]=Ut,lt[dt+1]=Wt,lt[dt+2]=Zt,lt[dt+3]=Kt;return}if(Ft!==Kt||Rt!==Ut||Dt!==Wt||Nt!==Zt){let cn=1-At;const hn=Rt*Ut+Dt*Wt+Nt*Zt+Ft*Kt,dn=hn>=0?1:-1,pn=1-hn*hn;if(pn>Number.EPSILON){const vn=Math.sqrt(pn),bn=Math.atan2(vn,hn*dn);cn=Math.sin(cn*bn)/vn,At=Math.sin(At*bn)/vn}const gn=At*dn;if(Rt=Rt*cn+Ut*gn,Dt=Dt*cn+Wt*gn,Nt=Nt*cn+Zt*gn,Ft=Ft*cn+Kt*gn,cn===1-At){const vn=1/Math.sqrt(Rt*Rt+Dt*Dt+Nt*Nt+Ft*Ft);Rt*=vn,Dt*=vn,Nt*=vn,Ft*=vn}}lt[dt]=Rt,lt[dt+1]=Dt,lt[dt+2]=Nt,lt[dt+3]=Ft}static multiplyQuaternionsFlat(lt,dt,vt,St,Et,Ct){const At=vt[St],Rt=vt[St+1],Dt=vt[St+2],Nt=vt[St+3],Ft=Et[Ct],Ut=Et[Ct+1],Wt=Et[Ct+2],Zt=Et[Ct+3];return lt[dt]=At*Zt+Nt*Ft+Rt*Wt-Dt*Ut,lt[dt+1]=Rt*Zt+Nt*Ut+Dt*Ft-At*Wt,lt[dt+2]=Dt*Zt+Nt*Wt+At*Ut-Rt*Ft,lt[dt+3]=Nt*Zt-At*Ft-Rt*Ut-Dt*Wt,lt}get x(){return this._x}set x(lt){this._x=lt,this._onChangeCallback()}get y(){return this._y}set y(lt){this._y=lt,this._onChangeCallback()}get z(){return this._z}set z(lt){this._z=lt,this._onChangeCallback()}get w(){return this._w}set w(lt){this._w=lt,this._onChangeCallback()}set(lt,dt,vt,St){return this._x=lt,this._y=dt,this._z=vt,this._w=St,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(lt){return this._x=lt.x,this._y=lt.y,this._z=lt.z,this._w=lt.w,this._onChangeCallback(),this}setFromEuler(lt,dt){const vt=lt._x,St=lt._y,Et=lt._z,Ct=lt._order,At=Math.cos,Rt=Math.sin,Dt=At(vt/2),Nt=At(St/2),Ft=At(Et/2),Ut=Rt(vt/2),Wt=Rt(St/2),Zt=Rt(Et/2);switch(Ct){case"XYZ":this._x=Ut*Nt*Ft+Dt*Wt*Zt,this._y=Dt*Wt*Ft-Ut*Nt*Zt,this._z=Dt*Nt*Zt+Ut*Wt*Ft,this._w=Dt*Nt*Ft-Ut*Wt*Zt;break;case"YXZ":this._x=Ut*Nt*Ft+Dt*Wt*Zt,this._y=Dt*Wt*Ft-Ut*Nt*Zt,this._z=Dt*Nt*Zt-Ut*Wt*Ft,this._w=Dt*Nt*Ft+Ut*Wt*Zt;break;case"ZXY":this._x=Ut*Nt*Ft-Dt*Wt*Zt,this._y=Dt*Wt*Ft+Ut*Nt*Zt,this._z=Dt*Nt*Zt+Ut*Wt*Ft,this._w=Dt*Nt*Ft-Ut*Wt*Zt;break;case"ZYX":this._x=Ut*Nt*Ft-Dt*Wt*Zt,this._y=Dt*Wt*Ft+Ut*Nt*Zt,this._z=Dt*Nt*Zt-Ut*Wt*Ft,this._w=Dt*Nt*Ft+Ut*Wt*Zt;break;case"YZX":this._x=Ut*Nt*Ft+Dt*Wt*Zt,this._y=Dt*Wt*Ft+Ut*Nt*Zt,this._z=Dt*Nt*Zt-Ut*Wt*Ft,this._w=Dt*Nt*Ft-Ut*Wt*Zt;break;case"XZY":this._x=Ut*Nt*Ft-Dt*Wt*Zt,this._y=Dt*Wt*Ft-Ut*Nt*Zt,this._z=Dt*Nt*Zt+Ut*Wt*Ft,this._w=Dt*Nt*Ft+Ut*Wt*Zt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ct)}return dt!==!1&&this._onChangeCallback(),this}setFromAxisAngle(lt,dt){const vt=dt/2,St=Math.sin(vt);return this._x=lt.x*St,this._y=lt.y*St,this._z=lt.z*St,this._w=Math.cos(vt),this._onChangeCallback(),this}setFromRotationMatrix(lt){const dt=lt.elements,vt=dt[0],St=dt[4],Et=dt[8],Ct=dt[1],At=dt[5],Rt=dt[9],Dt=dt[2],Nt=dt[6],Ft=dt[10],Ut=vt+At+Ft;if(Ut>0){const Wt=.5/Math.sqrt(Ut+1);this._w=.25/Wt,this._x=(Nt-Rt)*Wt,this._y=(Et-Dt)*Wt,this._z=(Ct-St)*Wt}else if(vt>At&&vt>Ft){const Wt=2*Math.sqrt(1+vt-At-Ft);this._w=(Nt-Rt)/Wt,this._x=.25*Wt,this._y=(St+Ct)/Wt,this._z=(Et+Dt)/Wt}else if(At>Ft){const Wt=2*Math.sqrt(1+At-vt-Ft);this._w=(Et-Dt)/Wt,this._x=(St+Ct)/Wt,this._y=.25*Wt,this._z=(Rt+Nt)/Wt}else{const Wt=2*Math.sqrt(1+Ft-vt-At);this._w=(Ct-St)/Wt,this._x=(Et+Dt)/Wt,this._y=(Rt+Nt)/Wt,this._z=.25*Wt}return this._onChangeCallback(),this}setFromUnitVectors(lt,dt){let vt=lt.dot(dt)+1;return vt<Number.EPSILON?(vt=0,Math.abs(lt.x)>Math.abs(lt.z)?(this._x=-lt.y,this._y=lt.x,this._z=0,this._w=vt):(this._x=0,this._y=-lt.z,this._z=lt.y,this._w=vt)):(this._x=lt.y*dt.z-lt.z*dt.y,this._y=lt.z*dt.x-lt.x*dt.z,this._z=lt.x*dt.y-lt.y*dt.x,this._w=vt),this.normalize()}angleTo(lt){return 2*Math.acos(Math.abs(clamp$1(this.dot(lt),-1,1)))}rotateTowards(lt,dt){const vt=this.angleTo(lt);if(vt===0)return this;const St=Math.min(1,dt/vt);return this.slerp(lt,St),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(lt){return this._x*lt._x+this._y*lt._y+this._z*lt._z+this._w*lt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let lt=this.length();return lt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(lt=1/lt,this._x=this._x*lt,this._y=this._y*lt,this._z=this._z*lt,this._w=this._w*lt),this._onChangeCallback(),this}multiply(lt){return this.multiplyQuaternions(this,lt)}premultiply(lt){return this.multiplyQuaternions(lt,this)}multiplyQuaternions(lt,dt){const vt=lt._x,St=lt._y,Et=lt._z,Ct=lt._w,At=dt._x,Rt=dt._y,Dt=dt._z,Nt=dt._w;return this._x=vt*Nt+Ct*At+St*Dt-Et*Rt,this._y=St*Nt+Ct*Rt+Et*At-vt*Dt,this._z=Et*Nt+Ct*Dt+vt*Rt-St*At,this._w=Ct*Nt-vt*At-St*Rt-Et*Dt,this._onChangeCallback(),this}slerp(lt,dt){if(dt===0)return this;if(dt===1)return this.copy(lt);const vt=this._x,St=this._y,Et=this._z,Ct=this._w;let At=Ct*lt._w+vt*lt._x+St*lt._y+Et*lt._z;if(At<0?(this._w=-lt._w,this._x=-lt._x,this._y=-lt._y,this._z=-lt._z,At=-At):this.copy(lt),At>=1)return this._w=Ct,this._x=vt,this._y=St,this._z=Et,this;const Rt=1-At*At;if(Rt<=Number.EPSILON){const Wt=1-dt;return this._w=Wt*Ct+dt*this._w,this._x=Wt*vt+dt*this._x,this._y=Wt*St+dt*this._y,this._z=Wt*Et+dt*this._z,this.normalize(),this._onChangeCallback(),this}const Dt=Math.sqrt(Rt),Nt=Math.atan2(Dt,At),Ft=Math.sin((1-dt)*Nt)/Dt,Ut=Math.sin(dt*Nt)/Dt;return this._w=Ct*Ft+this._w*Ut,this._x=vt*Ft+this._x*Ut,this._y=St*Ft+this._y*Ut,this._z=Et*Ft+this._z*Ut,this._onChangeCallback(),this}slerpQuaternions(lt,dt,vt){return this.copy(lt).slerp(dt,vt)}random(){const lt=Math.random(),dt=Math.sqrt(1-lt),vt=Math.sqrt(lt),St=2*Math.PI*Math.random(),Et=2*Math.PI*Math.random();return this.set(dt*Math.cos(St),vt*Math.sin(Et),vt*Math.cos(Et),dt*Math.sin(St))}equals(lt){return lt._x===this._x&&lt._y===this._y&&lt._z===this._z&&lt._w===this._w}fromArray(lt,dt=0){return this._x=lt[dt],this._y=lt[dt+1],this._z=lt[dt+2],this._w=lt[dt+3],this._onChangeCallback(),this}toArray(lt=[],dt=0){return lt[dt]=this._x,lt[dt+1]=this._y,lt[dt+2]=this._z,lt[dt+3]=this._w,lt}fromBufferAttribute(lt,dt){return this._x=lt.getX(dt),this._y=lt.getY(dt),this._z=lt.getZ(dt),this._w=lt.getW(dt),this}_onChange(lt){return this._onChangeCallback=lt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(lt=0,dt=0,vt=0){Vector3.prototype.isVector3=!0,this.x=lt,this.y=dt,this.z=vt}set(lt,dt,vt){return vt===void 0&&(vt=this.z),this.x=lt,this.y=dt,this.z=vt,this}setScalar(lt){return this.x=lt,this.y=lt,this.z=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setZ(lt){return this.z=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;case 2:this.z=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(lt){return this.x=lt.x,this.y=lt.y,this.z=lt.z,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this.z+=lt.z,this}addScalar(lt){return this.x+=lt,this.y+=lt,this.z+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this.z=lt.z+dt.z,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this.z+=lt.z*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this.z-=lt.z,this}subScalar(lt){return this.x-=lt,this.y-=lt,this.z-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this.z=lt.z-dt.z,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this.z*=lt.z,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this.z*=lt,this}multiplyVectors(lt,dt){return this.x=lt.x*dt.x,this.y=lt.y*dt.y,this.z=lt.z*dt.z,this}applyEuler(lt){return this.applyQuaternion(_quaternion$4.setFromEuler(lt))}applyAxisAngle(lt,dt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(lt,dt))}applyMatrix3(lt){const dt=this.x,vt=this.y,St=this.z,Et=lt.elements;return this.x=Et[0]*dt+Et[3]*vt+Et[6]*St,this.y=Et[1]*dt+Et[4]*vt+Et[7]*St,this.z=Et[2]*dt+Et[5]*vt+Et[8]*St,this}applyNormalMatrix(lt){return this.applyMatrix3(lt).normalize()}applyMatrix4(lt){const dt=this.x,vt=this.y,St=this.z,Et=lt.elements,Ct=1/(Et[3]*dt+Et[7]*vt+Et[11]*St+Et[15]);return this.x=(Et[0]*dt+Et[4]*vt+Et[8]*St+Et[12])*Ct,this.y=(Et[1]*dt+Et[5]*vt+Et[9]*St+Et[13])*Ct,this.z=(Et[2]*dt+Et[6]*vt+Et[10]*St+Et[14])*Ct,this}applyQuaternion(lt){const dt=this.x,vt=this.y,St=this.z,Et=lt.x,Ct=lt.y,At=lt.z,Rt=lt.w,Dt=Rt*dt+Ct*St-At*vt,Nt=Rt*vt+At*dt-Et*St,Ft=Rt*St+Et*vt-Ct*dt,Ut=-Et*dt-Ct*vt-At*St;return this.x=Dt*Rt+Ut*-Et+Nt*-At-Ft*-Ct,this.y=Nt*Rt+Ut*-Ct+Ft*-Et-Dt*-At,this.z=Ft*Rt+Ut*-At+Dt*-Ct-Nt*-Et,this}project(lt){return this.applyMatrix4(lt.matrixWorldInverse).applyMatrix4(lt.projectionMatrix)}unproject(lt){return this.applyMatrix4(lt.projectionMatrixInverse).applyMatrix4(lt.matrixWorld)}transformDirection(lt){const dt=this.x,vt=this.y,St=this.z,Et=lt.elements;return this.x=Et[0]*dt+Et[4]*vt+Et[8]*St,this.y=Et[1]*dt+Et[5]*vt+Et[9]*St,this.z=Et[2]*dt+Et[6]*vt+Et[10]*St,this.normalize()}divide(lt){return this.x/=lt.x,this.y/=lt.y,this.z/=lt.z,this}divideScalar(lt){return this.multiplyScalar(1/lt)}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this.z=Math.min(this.z,lt.z),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this.z=Math.max(this.z,lt.z),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this.z=Math.max(lt.z,Math.min(dt.z,this.z)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this.z=Math.max(lt,Math.min(dt,this.z)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(lt){return this.x*lt.x+this.y*lt.y+this.z*lt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this.z+=(lt.z-this.z)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this.z=lt.z+(dt.z-lt.z)*vt,this}cross(lt){return this.crossVectors(this,lt)}crossVectors(lt,dt){const vt=lt.x,St=lt.y,Et=lt.z,Ct=dt.x,At=dt.y,Rt=dt.z;return this.x=St*Rt-Et*At,this.y=Et*Ct-vt*Rt,this.z=vt*At-St*Ct,this}projectOnVector(lt){const dt=lt.lengthSq();if(dt===0)return this.set(0,0,0);const vt=lt.dot(this)/dt;return this.copy(lt).multiplyScalar(vt)}projectOnPlane(lt){return _vector$d.copy(this).projectOnVector(lt),this.sub(_vector$d)}reflect(lt){return this.sub(_vector$d.copy(lt).multiplyScalar(2*this.dot(lt)))}angleTo(lt){const dt=Math.sqrt(this.lengthSq()*lt.lengthSq());if(dt===0)return Math.PI/2;const vt=this.dot(lt)/dt;return Math.acos(clamp$1(vt,-1,1))}distanceTo(lt){return Math.sqrt(this.distanceToSquared(lt))}distanceToSquared(lt){const dt=this.x-lt.x,vt=this.y-lt.y,St=this.z-lt.z;return dt*dt+vt*vt+St*St}manhattanDistanceTo(lt){return Math.abs(this.x-lt.x)+Math.abs(this.y-lt.y)+Math.abs(this.z-lt.z)}setFromSpherical(lt){return this.setFromSphericalCoords(lt.radius,lt.phi,lt.theta)}setFromSphericalCoords(lt,dt,vt){const St=Math.sin(dt)*lt;return this.x=St*Math.sin(vt),this.y=Math.cos(dt)*lt,this.z=St*Math.cos(vt),this}setFromCylindrical(lt){return this.setFromCylindricalCoords(lt.radius,lt.theta,lt.y)}setFromCylindricalCoords(lt,dt,vt){return this.x=lt*Math.sin(dt),this.y=vt,this.z=lt*Math.cos(dt),this}setFromMatrixPosition(lt){const dt=lt.elements;return this.x=dt[12],this.y=dt[13],this.z=dt[14],this}setFromMatrixScale(lt){const dt=this.setFromMatrixColumn(lt,0).length(),vt=this.setFromMatrixColumn(lt,1).length(),St=this.setFromMatrixColumn(lt,2).length();return this.x=dt,this.y=vt,this.z=St,this}setFromMatrixColumn(lt,dt){return this.fromArray(lt.elements,dt*4)}setFromMatrix3Column(lt,dt){return this.fromArray(lt.elements,dt*3)}setFromEuler(lt){return this.x=lt._x,this.y=lt._y,this.z=lt._z,this}equals(lt){return lt.x===this.x&&lt.y===this.y&&lt.z===this.z}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this.z=lt[dt+2],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt[dt+2]=this.z,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this.z=lt.getZ(dt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const lt=(Math.random()-.5)*2,dt=Math.random()*Math.PI*2,vt=Math.sqrt(1-lt**2);return this.x=vt*Math.cos(dt),this.y=vt*Math.sin(dt),this.z=lt,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$d=new Vector3,_quaternion$4=new Quaternion;function SRGBToLinear(ft){return ft<.04045?ft*.0773993808:Math.pow(ft*.9478672986+.0521327014,2.4)}function LinearToSRGB(ft){return ft<.0031308?ft*12.92:1.055*Math.pow(ft,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_vector$c=new Vector3;function DisplayP3ToLinearSRGB(ft){return ft.convertSRGBToLinear(),_vector$c.set(ft.r,ft.g,ft.b).applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),ft.setRGB(_vector$c.x,_vector$c.y,_vector$c.z)}function LinearSRGBToDisplayP3(ft){return _vector$c.set(ft.r,ft.g,ft.b).applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3),ft.setRGB(_vector$c.x,_vector$c.y,_vector$c.z).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:ft=>ft,[SRGBColorSpace]:ft=>ft.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:ft=>ft,[SRGBColorSpace]:ft=>ft.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(ft){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!ft},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(ft){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(ft,lt,dt){if(this.enabled===!1||lt===dt||!lt||!dt)return ft;const vt=TO_LINEAR[lt],St=FROM_LINEAR[dt];if(vt===void 0||St===void 0)throw new Error(`Unsupported color space conversion, "${lt}" to "${dt}".`);return St(vt(ft))},fromWorkingColorSpace:function(ft,lt){return this.convert(ft,this.workingColorSpace,lt)},toWorkingColorSpace:function(ft,lt){return this.convert(ft,lt,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(lt){if(/^data:/i.test(lt.src)||typeof HTMLCanvasElement>"u")return lt.src;let dt;if(lt instanceof HTMLCanvasElement)dt=lt;else{_canvas===void 0&&(_canvas=createElementNS$1("canvas")),_canvas.width=lt.width,_canvas.height=lt.height;const vt=_canvas.getContext("2d");lt instanceof ImageData?vt.putImageData(lt,0,0):vt.drawImage(lt,0,0,lt.width,lt.height),dt=_canvas}return dt.width>2048||dt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",lt),dt.toDataURL("image/jpeg",.6)):dt.toDataURL("image/png")}static sRGBToLinear(lt){if(typeof HTMLImageElement<"u"&&lt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&lt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&lt instanceof ImageBitmap){const dt=createElementNS$1("canvas");dt.width=lt.width,dt.height=lt.height;const vt=dt.getContext("2d");vt.drawImage(lt,0,0,lt.width,lt.height);const St=vt.getImageData(0,0,lt.width,lt.height),Et=St.data;for(let Ct=0;Ct<Et.length;Ct++)Et[Ct]=SRGBToLinear(Et[Ct]/255)*255;return vt.putImageData(St,0,0),dt}else if(lt.data){const dt=lt.data.slice(0);for(let vt=0;vt<dt.length;vt++)dt instanceof Uint8Array||dt instanceof Uint8ClampedArray?dt[vt]=Math.floor(SRGBToLinear(dt[vt]/255)*255):dt[vt]=SRGBToLinear(dt[vt]);return{data:dt,width:lt.width,height:lt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),lt}}class Source{constructor(lt=null){this.isSource=!0,this.uuid=generateUUID$1(),this.data=lt,this.version=0}set needsUpdate(lt){lt===!0&&this.version++}toJSON(lt){const dt=lt===void 0||typeof lt=="string";if(!dt&&lt.images[this.uuid]!==void 0)return lt.images[this.uuid];const vt={uuid:this.uuid,url:""},St=this.data;if(St!==null){let Et;if(Array.isArray(St)){Et=[];for(let Ct=0,At=St.length;Ct<At;Ct++)St[Ct].isDataTexture?Et.push(serializeImage(St[Ct].image)):Et.push(serializeImage(St[Ct]))}else Et=serializeImage(St);vt.url=Et}return dt||(lt.images[this.uuid]=vt),vt}}function serializeImage(ft){return typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ft instanceof ImageBitmap?ImageUtils.getDataURL(ft):ft.data?{data:Array.from(ft.data),width:ft.width,height:ft.height,type:ft.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(lt=Texture.DEFAULT_IMAGE,dt=Texture.DEFAULT_MAPPING,vt=ClampToEdgeWrapping,St=ClampToEdgeWrapping,Et=LinearFilter,Ct=LinearMipmapLinearFilter,At=RGBAFormat,Rt=UnsignedByteType,Dt=Texture.DEFAULT_ANISOTROPY,Nt=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(lt),this.mipmaps=[],this.mapping=dt,this.wrapS=vt,this.wrapT=St,this.magFilter=Et,this.minFilter=Ct,this.anisotropy=Dt,this.format=At,this.internalFormat=null,this.type=Rt,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Nt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(lt=null){this.source.data=lt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(lt){return this.name=lt.name,this.source=lt.source,this.mipmaps=lt.mipmaps.slice(0),this.mapping=lt.mapping,this.wrapS=lt.wrapS,this.wrapT=lt.wrapT,this.magFilter=lt.magFilter,this.minFilter=lt.minFilter,this.anisotropy=lt.anisotropy,this.format=lt.format,this.internalFormat=lt.internalFormat,this.type=lt.type,this.offset.copy(lt.offset),this.repeat.copy(lt.repeat),this.center.copy(lt.center),this.rotation=lt.rotation,this.matrixAutoUpdate=lt.matrixAutoUpdate,this.matrix.copy(lt.matrix),this.generateMipmaps=lt.generateMipmaps,this.premultiplyAlpha=lt.premultiplyAlpha,this.flipY=lt.flipY,this.unpackAlignment=lt.unpackAlignment,this.encoding=lt.encoding,this.userData=JSON.parse(JSON.stringify(lt.userData)),this.needsUpdate=!0,this}toJSON(lt){const dt=lt===void 0||typeof lt=="string";if(!dt&&lt.textures[this.uuid]!==void 0)return lt.textures[this.uuid];const vt={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(lt).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(vt.userData=this.userData),dt||(lt.textures[this.uuid]=vt),vt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(lt){if(this.mapping!==UVMapping)return lt;if(lt.applyMatrix3(this.matrix),lt.x<0||lt.x>1)switch(this.wrapS){case RepeatWrapping:lt.x=lt.x-Math.floor(lt.x);break;case ClampToEdgeWrapping:lt.x=lt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(lt.x)%2)===1?lt.x=Math.ceil(lt.x)-lt.x:lt.x=lt.x-Math.floor(lt.x);break}if(lt.y<0||lt.y>1)switch(this.wrapT){case RepeatWrapping:lt.y=lt.y-Math.floor(lt.y);break;case ClampToEdgeWrapping:lt.y=lt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(lt.y)%2)===1?lt.y=Math.ceil(lt.y)-lt.y:lt.y=lt.y-Math.floor(lt.y);break}return this.flipY&&(lt.y=1-lt.y),lt}set needsUpdate(lt){lt===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(lt=0,dt=0,vt=0,St=1){Vector4.prototype.isVector4=!0,this.x=lt,this.y=dt,this.z=vt,this.w=St}get width(){return this.z}set width(lt){this.z=lt}get height(){return this.w}set height(lt){this.w=lt}set(lt,dt,vt,St){return this.x=lt,this.y=dt,this.z=vt,this.w=St,this}setScalar(lt){return this.x=lt,this.y=lt,this.z=lt,this.w=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setZ(lt){return this.z=lt,this}setW(lt){return this.w=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;case 2:this.z=dt;break;case 3:this.w=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(lt){return this.x=lt.x,this.y=lt.y,this.z=lt.z,this.w=lt.w!==void 0?lt.w:1,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this.z+=lt.z,this.w+=lt.w,this}addScalar(lt){return this.x+=lt,this.y+=lt,this.z+=lt,this.w+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this.z=lt.z+dt.z,this.w=lt.w+dt.w,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this.z+=lt.z*dt,this.w+=lt.w*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this.z-=lt.z,this.w-=lt.w,this}subScalar(lt){return this.x-=lt,this.y-=lt,this.z-=lt,this.w-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this.z=lt.z-dt.z,this.w=lt.w-dt.w,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this.z*=lt.z,this.w*=lt.w,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this.z*=lt,this.w*=lt,this}applyMatrix4(lt){const dt=this.x,vt=this.y,St=this.z,Et=this.w,Ct=lt.elements;return this.x=Ct[0]*dt+Ct[4]*vt+Ct[8]*St+Ct[12]*Et,this.y=Ct[1]*dt+Ct[5]*vt+Ct[9]*St+Ct[13]*Et,this.z=Ct[2]*dt+Ct[6]*vt+Ct[10]*St+Ct[14]*Et,this.w=Ct[3]*dt+Ct[7]*vt+Ct[11]*St+Ct[15]*Et,this}divideScalar(lt){return this.multiplyScalar(1/lt)}setAxisAngleFromQuaternion(lt){this.w=2*Math.acos(lt.w);const dt=Math.sqrt(1-lt.w*lt.w);return dt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=lt.x/dt,this.y=lt.y/dt,this.z=lt.z/dt),this}setAxisAngleFromRotationMatrix(lt){let dt,vt,St,Et;const Rt=lt.elements,Dt=Rt[0],Nt=Rt[4],Ft=Rt[8],Ut=Rt[1],Wt=Rt[5],Zt=Rt[9],Kt=Rt[2],cn=Rt[6],hn=Rt[10];if(Math.abs(Nt-Ut)<.01&&Math.abs(Ft-Kt)<.01&&Math.abs(Zt-cn)<.01){if(Math.abs(Nt+Ut)<.1&&Math.abs(Ft+Kt)<.1&&Math.abs(Zt+cn)<.1&&Math.abs(Dt+Wt+hn-3)<.1)return this.set(1,0,0,0),this;dt=Math.PI;const pn=(Dt+1)/2,gn=(Wt+1)/2,vn=(hn+1)/2,bn=(Nt+Ut)/4,$n=(Ft+Kt)/4,Tn=(Zt+cn)/4;return pn>gn&&pn>vn?pn<.01?(vt=0,St=.707106781,Et=.707106781):(vt=Math.sqrt(pn),St=bn/vt,Et=$n/vt):gn>vn?gn<.01?(vt=.707106781,St=0,Et=.707106781):(St=Math.sqrt(gn),vt=bn/St,Et=Tn/St):vn<.01?(vt=.707106781,St=.707106781,Et=0):(Et=Math.sqrt(vn),vt=$n/Et,St=Tn/Et),this.set(vt,St,Et,dt),this}let dn=Math.sqrt((cn-Zt)*(cn-Zt)+(Ft-Kt)*(Ft-Kt)+(Ut-Nt)*(Ut-Nt));return Math.abs(dn)<.001&&(dn=1),this.x=(cn-Zt)/dn,this.y=(Ft-Kt)/dn,this.z=(Ut-Nt)/dn,this.w=Math.acos((Dt+Wt+hn-1)/2),this}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this.z=Math.min(this.z,lt.z),this.w=Math.min(this.w,lt.w),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this.z=Math.max(this.z,lt.z),this.w=Math.max(this.w,lt.w),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this.z=Math.max(lt.z,Math.min(dt.z,this.z)),this.w=Math.max(lt.w,Math.min(dt.w,this.w)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this.z=Math.max(lt,Math.min(dt,this.z)),this.w=Math.max(lt,Math.min(dt,this.w)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(lt){return this.x*lt.x+this.y*lt.y+this.z*lt.z+this.w*lt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this.z+=(lt.z-this.z)*dt,this.w+=(lt.w-this.w)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this.z=lt.z+(dt.z-lt.z)*vt,this.w=lt.w+(dt.w-lt.w)*vt,this}equals(lt){return lt.x===this.x&&lt.y===this.y&&lt.z===this.z&&lt.w===this.w}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this.z=lt[dt+2],this.w=lt[dt+3],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt[dt+2]=this.z,lt[dt+3]=this.w,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this.z=lt.getZ(dt),this.w=lt.getW(dt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(lt=1,dt=1,vt={}){super(),this.isWebGLRenderTarget=!0,this.width=lt,this.height=dt,this.depth=1,this.scissor=new Vector4(0,0,lt,dt),this.scissorTest=!1,this.viewport=new Vector4(0,0,lt,dt);const St={width:lt,height:dt,depth:1};this.texture=new Texture(St,vt.mapping,vt.wrapS,vt.wrapT,vt.magFilter,vt.minFilter,vt.format,vt.type,vt.anisotropy,vt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=vt.generateMipmaps!==void 0?vt.generateMipmaps:!1,this.texture.internalFormat=vt.internalFormat!==void 0?vt.internalFormat:null,this.texture.minFilter=vt.minFilter!==void 0?vt.minFilter:LinearFilter,this.depthBuffer=vt.depthBuffer!==void 0?vt.depthBuffer:!0,this.stencilBuffer=vt.stencilBuffer!==void 0?vt.stencilBuffer:!1,this.depthTexture=vt.depthTexture!==void 0?vt.depthTexture:null,this.samples=vt.samples!==void 0?vt.samples:0}setSize(lt,dt,vt=1){(this.width!==lt||this.height!==dt||this.depth!==vt)&&(this.width=lt,this.height=dt,this.depth=vt,this.texture.image.width=lt,this.texture.image.height=dt,this.texture.image.depth=vt,this.dispose()),this.viewport.set(0,0,lt,dt),this.scissor.set(0,0,lt,dt)}clone(){return new this.constructor().copy(this)}copy(lt){this.width=lt.width,this.height=lt.height,this.depth=lt.depth,this.viewport.copy(lt.viewport),this.texture=lt.texture.clone(),this.texture.isRenderTargetTexture=!0;const dt=Object.assign({},lt.texture.image);return this.texture.source=new Source(dt),this.depthBuffer=lt.depthBuffer,this.stencilBuffer=lt.stencilBuffer,lt.depthTexture!==null&&(this.depthTexture=lt.depthTexture.clone()),this.samples=lt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(lt=null,dt=1,vt=1,St=1){super(null),this.isDataArrayTexture=!0,this.image={data:lt,width:dt,height:vt,depth:St},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1){super(lt,dt),this.isWebGLArrayRenderTarget=!0,this.depth=vt,this.texture=new DataArrayTexture(null,lt,dt,vt),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(lt=null,dt=1,vt=1,St=1){super(null),this.isData3DTexture=!0,this.image={data:lt,width:dt,height:vt,depth:St},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1){super(lt,dt),this.isWebGL3DRenderTarget=!0,this.depth=vt,this.texture=new Data3DTexture(null,lt,dt,vt),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1,St={}){super(lt,dt,St),this.isWebGLMultipleRenderTargets=!0;const Et=this.texture;this.texture=[];for(let Ct=0;Ct<vt;Ct++)this.texture[Ct]=Et.clone(),this.texture[Ct].isRenderTargetTexture=!0}setSize(lt,dt,vt=1){if(this.width!==lt||this.height!==dt||this.depth!==vt){this.width=lt,this.height=dt,this.depth=vt;for(let St=0,Et=this.texture.length;St<Et;St++)this.texture[St].image.width=lt,this.texture[St].image.height=dt,this.texture[St].image.depth=vt;this.dispose()}return this.viewport.set(0,0,lt,dt),this.scissor.set(0,0,lt,dt),this}copy(lt){this.dispose(),this.width=lt.width,this.height=lt.height,this.depth=lt.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=lt.depthBuffer,this.stencilBuffer=lt.stencilBuffer,lt.depthTexture!==null&&(this.depthTexture=lt.depthTexture.clone()),this.texture.length=0;for(let dt=0,vt=lt.texture.length;dt<vt;dt++)this.texture[dt]=lt.texture[dt].clone(),this.texture[dt].isRenderTargetTexture=!0;return this}}class Box3{constructor(lt=new Vector3(1/0,1/0,1/0),dt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=lt,this.max=dt}set(lt,dt){return this.min.copy(lt),this.max.copy(dt),this}setFromArray(lt){let dt=1/0,vt=1/0,St=1/0,Et=-1/0,Ct=-1/0,At=-1/0;for(let Rt=0,Dt=lt.length;Rt<Dt;Rt+=3){const Nt=lt[Rt],Ft=lt[Rt+1],Ut=lt[Rt+2];Nt<dt&&(dt=Nt),Ft<vt&&(vt=Ft),Ut<St&&(St=Ut),Nt>Et&&(Et=Nt),Ft>Ct&&(Ct=Ft),Ut>At&&(At=Ut)}return this.min.set(dt,vt,St),this.max.set(Et,Ct,At),this}setFromBufferAttribute(lt){let dt=1/0,vt=1/0,St=1/0,Et=-1/0,Ct=-1/0,At=-1/0;for(let Rt=0,Dt=lt.count;Rt<Dt;Rt++){const Nt=lt.getX(Rt),Ft=lt.getY(Rt),Ut=lt.getZ(Rt);Nt<dt&&(dt=Nt),Ft<vt&&(vt=Ft),Ut<St&&(St=Ut),Nt>Et&&(Et=Nt),Ft>Ct&&(Ct=Ft),Ut>At&&(At=Ut)}return this.min.set(dt,vt,St),this.max.set(Et,Ct,At),this}setFromPoints(lt){this.makeEmpty();for(let dt=0,vt=lt.length;dt<vt;dt++)this.expandByPoint(lt[dt]);return this}setFromCenterAndSize(lt,dt){const vt=_vector$b.copy(dt).multiplyScalar(.5);return this.min.copy(lt).sub(vt),this.max.copy(lt).add(vt),this}setFromObject(lt,dt=!1){return this.makeEmpty(),this.expandByObject(lt,dt)}clone(){return new this.constructor().copy(this)}copy(lt){return this.min.copy(lt.min),this.max.copy(lt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(lt){return this.isEmpty()?lt.set(0,0,0):lt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(lt){return this.isEmpty()?lt.set(0,0,0):lt.subVectors(this.max,this.min)}expandByPoint(lt){return this.min.min(lt),this.max.max(lt),this}expandByVector(lt){return this.min.sub(lt),this.max.add(lt),this}expandByScalar(lt){return this.min.addScalar(-lt),this.max.addScalar(lt),this}expandByObject(lt,dt=!1){lt.updateWorldMatrix(!1,!1);const vt=lt.geometry;if(vt!==void 0)if(dt&&vt.attributes!=null&&vt.attributes.position!==void 0){const Et=vt.attributes.position;for(let Ct=0,At=Et.count;Ct<At;Ct++)_vector$b.fromBufferAttribute(Et,Ct).applyMatrix4(lt.matrixWorld),this.expandByPoint(_vector$b)}else vt.boundingBox===null&&vt.computeBoundingBox(),_box$3.copy(vt.boundingBox),_box$3.applyMatrix4(lt.matrixWorld),this.union(_box$3);const St=lt.children;for(let Et=0,Ct=St.length;Et<Ct;Et++)this.expandByObject(St[Et],dt);return this}containsPoint(lt){return!(lt.x<this.min.x||lt.x>this.max.x||lt.y<this.min.y||lt.y>this.max.y||lt.z<this.min.z||lt.z>this.max.z)}containsBox(lt){return this.min.x<=lt.min.x&&lt.max.x<=this.max.x&&this.min.y<=lt.min.y&&lt.max.y<=this.max.y&&this.min.z<=lt.min.z&&lt.max.z<=this.max.z}getParameter(lt,dt){return dt.set((lt.x-this.min.x)/(this.max.x-this.min.x),(lt.y-this.min.y)/(this.max.y-this.min.y),(lt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(lt){return!(lt.max.x<this.min.x||lt.min.x>this.max.x||lt.max.y<this.min.y||lt.min.y>this.max.y||lt.max.z<this.min.z||lt.min.z>this.max.z)}intersectsSphere(lt){return this.clampPoint(lt.center,_vector$b),_vector$b.distanceToSquared(lt.center)<=lt.radius*lt.radius}intersectsPlane(lt){let dt,vt;return lt.normal.x>0?(dt=lt.normal.x*this.min.x,vt=lt.normal.x*this.max.x):(dt=lt.normal.x*this.max.x,vt=lt.normal.x*this.min.x),lt.normal.y>0?(dt+=lt.normal.y*this.min.y,vt+=lt.normal.y*this.max.y):(dt+=lt.normal.y*this.max.y,vt+=lt.normal.y*this.min.y),lt.normal.z>0?(dt+=lt.normal.z*this.min.z,vt+=lt.normal.z*this.max.z):(dt+=lt.normal.z*this.max.z,vt+=lt.normal.z*this.min.z),dt<=-lt.constant&&vt>=-lt.constant}intersectsTriangle(lt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(lt.a,_center),_v1$7.subVectors(lt.b,_center),_v2$4.subVectors(lt.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let dt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents)||(dt=[1,0,0,0,1,0,0,0,1],!satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),dt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(lt,dt){return dt.copy(lt).clamp(this.min,this.max)}distanceToPoint(lt){return this.clampPoint(lt,_vector$b).distanceTo(lt)}getBoundingSphere(lt){return this.isEmpty()?lt.makeEmpty():(this.getCenter(lt.center),lt.radius=this.getSize(_vector$b).length()*.5),lt}intersect(lt){return this.min.max(lt.min),this.max.min(lt.max),this.isEmpty()&&this.makeEmpty(),this}union(lt){return this.min.min(lt.min),this.max.max(lt.max),this}applyMatrix4(lt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(lt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(lt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(lt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(lt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(lt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(lt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(lt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(lt),this.setFromPoints(_points),this)}translate(lt){return this.min.add(lt),this.max.add(lt),this}equals(lt){return lt.min.equals(this.min)&&lt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(ft,lt,dt,vt,St){for(let Et=0,Ct=ft.length-3;Et<=Ct;Et+=3){_testAxis.fromArray(ft,Et);const At=St.x*Math.abs(_testAxis.x)+St.y*Math.abs(_testAxis.y)+St.z*Math.abs(_testAxis.z),Rt=lt.dot(_testAxis),Dt=dt.dot(_testAxis),Nt=vt.dot(_testAxis);if(Math.max(-Math.max(Rt,Dt,Nt),Math.min(Rt,Dt,Nt))>At)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor(lt=new Vector3,dt=-1){this.center=lt,this.radius=dt}set(lt,dt){return this.center.copy(lt),this.radius=dt,this}setFromPoints(lt,dt){const vt=this.center;dt!==void 0?vt.copy(dt):_box$2.setFromPoints(lt).getCenter(vt);let St=0;for(let Et=0,Ct=lt.length;Et<Ct;Et++)St=Math.max(St,vt.distanceToSquared(lt[Et]));return this.radius=Math.sqrt(St),this}copy(lt){return this.center.copy(lt.center),this.radius=lt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(lt){return lt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(lt){return lt.distanceTo(this.center)-this.radius}intersectsSphere(lt){const dt=this.radius+lt.radius;return lt.center.distanceToSquared(this.center)<=dt*dt}intersectsBox(lt){return lt.intersectsSphere(this)}intersectsPlane(lt){return Math.abs(lt.distanceToPoint(this.center))<=this.radius}clampPoint(lt,dt){const vt=this.center.distanceToSquared(lt);return dt.copy(lt),vt>this.radius*this.radius&&(dt.sub(this.center).normalize(),dt.multiplyScalar(this.radius).add(this.center)),dt}getBoundingBox(lt){return this.isEmpty()?(lt.makeEmpty(),lt):(lt.set(this.center,this.center),lt.expandByScalar(this.radius),lt)}applyMatrix4(lt){return this.center.applyMatrix4(lt),this.radius=this.radius*lt.getMaxScaleOnAxis(),this}translate(lt){return this.center.add(lt),this}expandByPoint(lt){if(this.isEmpty())return this.center.copy(lt),this.radius=0,this;_v1$6.subVectors(lt,this.center);const dt=_v1$6.lengthSq();if(dt>this.radius*this.radius){const vt=Math.sqrt(dt),St=(vt-this.radius)*.5;this.center.addScaledVector(_v1$6,St/vt),this.radius+=St}return this}union(lt){return lt.isEmpty()?this:this.isEmpty()?(this.copy(lt),this):(this.center.equals(lt.center)===!0?this.radius=Math.max(this.radius,lt.radius):(_v2$3.subVectors(lt.center,this.center).setLength(lt.radius),this.expandByPoint(_v1$6.copy(lt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(lt.center).sub(_v2$3))),this)}equals(lt){return lt.center.equals(this.center)&&lt.radius===this.radius}clone(){return new this.constructor().copy(this)}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(lt=new Vector3,dt=new Vector3(0,0,-1)){this.origin=lt,this.direction=dt}set(lt,dt){return this.origin.copy(lt),this.direction.copy(dt),this}copy(lt){return this.origin.copy(lt.origin),this.direction.copy(lt.direction),this}at(lt,dt){return dt.copy(this.origin).addScaledVector(this.direction,lt)}lookAt(lt){return this.direction.copy(lt).sub(this.origin).normalize(),this}recast(lt){return this.origin.copy(this.at(lt,_vector$a)),this}closestPointToPoint(lt,dt){dt.subVectors(lt,this.origin);const vt=dt.dot(this.direction);return vt<0?dt.copy(this.origin):dt.copy(this.origin).addScaledVector(this.direction,vt)}distanceToPoint(lt){return Math.sqrt(this.distanceSqToPoint(lt))}distanceSqToPoint(lt){const dt=_vector$a.subVectors(lt,this.origin).dot(this.direction);return dt<0?this.origin.distanceToSquared(lt):(_vector$a.copy(this.origin).addScaledVector(this.direction,dt),_vector$a.distanceToSquared(lt))}distanceSqToSegment(lt,dt,vt,St){_segCenter.copy(lt).add(dt).multiplyScalar(.5),_segDir.copy(dt).sub(lt).normalize(),_diff.copy(this.origin).sub(_segCenter);const Et=lt.distanceTo(dt)*.5,Ct=-this.direction.dot(_segDir),At=_diff.dot(this.direction),Rt=-_diff.dot(_segDir),Dt=_diff.lengthSq(),Nt=Math.abs(1-Ct*Ct);let Ft,Ut,Wt,Zt;if(Nt>0)if(Ft=Ct*Rt-At,Ut=Ct*At-Rt,Zt=Et*Nt,Ft>=0)if(Ut>=-Zt)if(Ut<=Zt){const Kt=1/Nt;Ft*=Kt,Ut*=Kt,Wt=Ft*(Ft+Ct*Ut+2*At)+Ut*(Ct*Ft+Ut+2*Rt)+Dt}else Ut=Et,Ft=Math.max(0,-(Ct*Ut+At)),Wt=-Ft*Ft+Ut*(Ut+2*Rt)+Dt;else Ut=-Et,Ft=Math.max(0,-(Ct*Ut+At)),Wt=-Ft*Ft+Ut*(Ut+2*Rt)+Dt;else Ut<=-Zt?(Ft=Math.max(0,-(-Ct*Et+At)),Ut=Ft>0?-Et:Math.min(Math.max(-Et,-Rt),Et),Wt=-Ft*Ft+Ut*(Ut+2*Rt)+Dt):Ut<=Zt?(Ft=0,Ut=Math.min(Math.max(-Et,-Rt),Et),Wt=Ut*(Ut+2*Rt)+Dt):(Ft=Math.max(0,-(Ct*Et+At)),Ut=Ft>0?Et:Math.min(Math.max(-Et,-Rt),Et),Wt=-Ft*Ft+Ut*(Ut+2*Rt)+Dt);else Ut=Ct>0?-Et:Et,Ft=Math.max(0,-(Ct*Ut+At)),Wt=-Ft*Ft+Ut*(Ut+2*Rt)+Dt;return vt&&vt.copy(this.origin).addScaledVector(this.direction,Ft),St&&St.copy(_segCenter).addScaledVector(_segDir,Ut),Wt}intersectSphere(lt,dt){_vector$a.subVectors(lt.center,this.origin);const vt=_vector$a.dot(this.direction),St=_vector$a.dot(_vector$a)-vt*vt,Et=lt.radius*lt.radius;if(St>Et)return null;const Ct=Math.sqrt(Et-St),At=vt-Ct,Rt=vt+Ct;return Rt<0?null:At<0?this.at(Rt,dt):this.at(At,dt)}intersectsSphere(lt){return this.distanceSqToPoint(lt.center)<=lt.radius*lt.radius}distanceToPlane(lt){const dt=lt.normal.dot(this.direction);if(dt===0)return lt.distanceToPoint(this.origin)===0?0:null;const vt=-(this.origin.dot(lt.normal)+lt.constant)/dt;return vt>=0?vt:null}intersectPlane(lt,dt){const vt=this.distanceToPlane(lt);return vt===null?null:this.at(vt,dt)}intersectsPlane(lt){const dt=lt.distanceToPoint(this.origin);return dt===0||lt.normal.dot(this.direction)*dt<0}intersectBox(lt,dt){let vt,St,Et,Ct,At,Rt;const Dt=1/this.direction.x,Nt=1/this.direction.y,Ft=1/this.direction.z,Ut=this.origin;return Dt>=0?(vt=(lt.min.x-Ut.x)*Dt,St=(lt.max.x-Ut.x)*Dt):(vt=(lt.max.x-Ut.x)*Dt,St=(lt.min.x-Ut.x)*Dt),Nt>=0?(Et=(lt.min.y-Ut.y)*Nt,Ct=(lt.max.y-Ut.y)*Nt):(Et=(lt.max.y-Ut.y)*Nt,Ct=(lt.min.y-Ut.y)*Nt),vt>Ct||Et>St||((Et>vt||isNaN(vt))&&(vt=Et),(Ct<St||isNaN(St))&&(St=Ct),Ft>=0?(At=(lt.min.z-Ut.z)*Ft,Rt=(lt.max.z-Ut.z)*Ft):(At=(lt.max.z-Ut.z)*Ft,Rt=(lt.min.z-Ut.z)*Ft),vt>Rt||At>St)||((At>vt||vt!==vt)&&(vt=At),(Rt<St||St!==St)&&(St=Rt),St<0)?null:this.at(vt>=0?vt:St,dt)}intersectsBox(lt){return this.intersectBox(lt,_vector$a)!==null}intersectTriangle(lt,dt,vt,St,Et){_edge1.subVectors(dt,lt),_edge2.subVectors(vt,lt),_normal$1.crossVectors(_edge1,_edge2);let Ct=this.direction.dot(_normal$1),At;if(Ct>0){if(St)return null;At=1}else if(Ct<0)At=-1,Ct=-Ct;else return null;_diff.subVectors(this.origin,lt);const Rt=At*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Rt<0)return null;const Dt=At*this.direction.dot(_edge1.cross(_diff));if(Dt<0||Rt+Dt>Ct)return null;const Nt=-At*_diff.dot(_normal$1);return Nt<0?null:this.at(Nt/Ct,Et)}applyMatrix4(lt){return this.origin.applyMatrix4(lt),this.direction.transformDirection(lt),this}equals(lt){return lt.origin.equals(this.origin)&&lt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt,Ft,Ut,Wt,Zt,Kt,cn){const hn=this.elements;return hn[0]=lt,hn[4]=dt,hn[8]=vt,hn[12]=St,hn[1]=Et,hn[5]=Ct,hn[9]=At,hn[13]=Rt,hn[2]=Dt,hn[6]=Nt,hn[10]=Ft,hn[14]=Ut,hn[3]=Wt,hn[7]=Zt,hn[11]=Kt,hn[15]=cn,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(lt){const dt=this.elements,vt=lt.elements;return dt[0]=vt[0],dt[1]=vt[1],dt[2]=vt[2],dt[3]=vt[3],dt[4]=vt[4],dt[5]=vt[5],dt[6]=vt[6],dt[7]=vt[7],dt[8]=vt[8],dt[9]=vt[9],dt[10]=vt[10],dt[11]=vt[11],dt[12]=vt[12],dt[13]=vt[13],dt[14]=vt[14],dt[15]=vt[15],this}copyPosition(lt){const dt=this.elements,vt=lt.elements;return dt[12]=vt[12],dt[13]=vt[13],dt[14]=vt[14],this}setFromMatrix3(lt){const dt=lt.elements;return this.set(dt[0],dt[3],dt[6],0,dt[1],dt[4],dt[7],0,dt[2],dt[5],dt[8],0,0,0,0,1),this}extractBasis(lt,dt,vt){return lt.setFromMatrixColumn(this,0),dt.setFromMatrixColumn(this,1),vt.setFromMatrixColumn(this,2),this}makeBasis(lt,dt,vt){return this.set(lt.x,dt.x,vt.x,0,lt.y,dt.y,vt.y,0,lt.z,dt.z,vt.z,0,0,0,0,1),this}extractRotation(lt){const dt=this.elements,vt=lt.elements,St=1/_v1$5.setFromMatrixColumn(lt,0).length(),Et=1/_v1$5.setFromMatrixColumn(lt,1).length(),Ct=1/_v1$5.setFromMatrixColumn(lt,2).length();return dt[0]=vt[0]*St,dt[1]=vt[1]*St,dt[2]=vt[2]*St,dt[3]=0,dt[4]=vt[4]*Et,dt[5]=vt[5]*Et,dt[6]=vt[6]*Et,dt[7]=0,dt[8]=vt[8]*Ct,dt[9]=vt[9]*Ct,dt[10]=vt[10]*Ct,dt[11]=0,dt[12]=0,dt[13]=0,dt[14]=0,dt[15]=1,this}makeRotationFromEuler(lt){const dt=this.elements,vt=lt.x,St=lt.y,Et=lt.z,Ct=Math.cos(vt),At=Math.sin(vt),Rt=Math.cos(St),Dt=Math.sin(St),Nt=Math.cos(Et),Ft=Math.sin(Et);if(lt.order==="XYZ"){const Ut=Ct*Nt,Wt=Ct*Ft,Zt=At*Nt,Kt=At*Ft;dt[0]=Rt*Nt,dt[4]=-Rt*Ft,dt[8]=Dt,dt[1]=Wt+Zt*Dt,dt[5]=Ut-Kt*Dt,dt[9]=-At*Rt,dt[2]=Kt-Ut*Dt,dt[6]=Zt+Wt*Dt,dt[10]=Ct*Rt}else if(lt.order==="YXZ"){const Ut=Rt*Nt,Wt=Rt*Ft,Zt=Dt*Nt,Kt=Dt*Ft;dt[0]=Ut+Kt*At,dt[4]=Zt*At-Wt,dt[8]=Ct*Dt,dt[1]=Ct*Ft,dt[5]=Ct*Nt,dt[9]=-At,dt[2]=Wt*At-Zt,dt[6]=Kt+Ut*At,dt[10]=Ct*Rt}else if(lt.order==="ZXY"){const Ut=Rt*Nt,Wt=Rt*Ft,Zt=Dt*Nt,Kt=Dt*Ft;dt[0]=Ut-Kt*At,dt[4]=-Ct*Ft,dt[8]=Zt+Wt*At,dt[1]=Wt+Zt*At,dt[5]=Ct*Nt,dt[9]=Kt-Ut*At,dt[2]=-Ct*Dt,dt[6]=At,dt[10]=Ct*Rt}else if(lt.order==="ZYX"){const Ut=Ct*Nt,Wt=Ct*Ft,Zt=At*Nt,Kt=At*Ft;dt[0]=Rt*Nt,dt[4]=Zt*Dt-Wt,dt[8]=Ut*Dt+Kt,dt[1]=Rt*Ft,dt[5]=Kt*Dt+Ut,dt[9]=Wt*Dt-Zt,dt[2]=-Dt,dt[6]=At*Rt,dt[10]=Ct*Rt}else if(lt.order==="YZX"){const Ut=Ct*Rt,Wt=Ct*Dt,Zt=At*Rt,Kt=At*Dt;dt[0]=Rt*Nt,dt[4]=Kt-Ut*Ft,dt[8]=Zt*Ft+Wt,dt[1]=Ft,dt[5]=Ct*Nt,dt[9]=-At*Nt,dt[2]=-Dt*Nt,dt[6]=Wt*Ft+Zt,dt[10]=Ut-Kt*Ft}else if(lt.order==="XZY"){const Ut=Ct*Rt,Wt=Ct*Dt,Zt=At*Rt,Kt=At*Dt;dt[0]=Rt*Nt,dt[4]=-Ft,dt[8]=Dt*Nt,dt[1]=Ut*Ft+Kt,dt[5]=Ct*Nt,dt[9]=Wt*Ft-Zt,dt[2]=Zt*Ft-Wt,dt[6]=At*Nt,dt[10]=Kt*Ft+Ut}return dt[3]=0,dt[7]=0,dt[11]=0,dt[12]=0,dt[13]=0,dt[14]=0,dt[15]=1,this}makeRotationFromQuaternion(lt){return this.compose(_zero,lt,_one)}lookAt(lt,dt,vt){const St=this.elements;return _z.subVectors(lt,dt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(vt,_z),_x.lengthSq()===0&&(Math.abs(vt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(vt,_z)),_x.normalize(),_y.crossVectors(_z,_x),St[0]=_x.x,St[4]=_y.x,St[8]=_z.x,St[1]=_x.y,St[5]=_y.y,St[9]=_z.y,St[2]=_x.z,St[6]=_y.z,St[10]=_z.z,this}multiply(lt){return this.multiplyMatrices(this,lt)}premultiply(lt){return this.multiplyMatrices(lt,this)}multiplyMatrices(lt,dt){const vt=lt.elements,St=dt.elements,Et=this.elements,Ct=vt[0],At=vt[4],Rt=vt[8],Dt=vt[12],Nt=vt[1],Ft=vt[5],Ut=vt[9],Wt=vt[13],Zt=vt[2],Kt=vt[6],cn=vt[10],hn=vt[14],dn=vt[3],pn=vt[7],gn=vt[11],vn=vt[15],bn=St[0],$n=St[4],Tn=St[8],In=St[12],Pn=St[1],zn=St[5],An=St[9],Gn=St[13],xn=St[2],Qn=St[6],qn=St[10],nr=St[14],Un=St[3],Nn=St[7],jn=St[11],Ln=St[15];return Et[0]=Ct*bn+At*Pn+Rt*xn+Dt*Un,Et[4]=Ct*$n+At*zn+Rt*Qn+Dt*Nn,Et[8]=Ct*Tn+At*An+Rt*qn+Dt*jn,Et[12]=Ct*In+At*Gn+Rt*nr+Dt*Ln,Et[1]=Nt*bn+Ft*Pn+Ut*xn+Wt*Un,Et[5]=Nt*$n+Ft*zn+Ut*Qn+Wt*Nn,Et[9]=Nt*Tn+Ft*An+Ut*qn+Wt*jn,Et[13]=Nt*In+Ft*Gn+Ut*nr+Wt*Ln,Et[2]=Zt*bn+Kt*Pn+cn*xn+hn*Un,Et[6]=Zt*$n+Kt*zn+cn*Qn+hn*Nn,Et[10]=Zt*Tn+Kt*An+cn*qn+hn*jn,Et[14]=Zt*In+Kt*Gn+cn*nr+hn*Ln,Et[3]=dn*bn+pn*Pn+gn*xn+vn*Un,Et[7]=dn*$n+pn*zn+gn*Qn+vn*Nn,Et[11]=dn*Tn+pn*An+gn*qn+vn*jn,Et[15]=dn*In+pn*Gn+gn*nr+vn*Ln,this}multiplyScalar(lt){const dt=this.elements;return dt[0]*=lt,dt[4]*=lt,dt[8]*=lt,dt[12]*=lt,dt[1]*=lt,dt[5]*=lt,dt[9]*=lt,dt[13]*=lt,dt[2]*=lt,dt[6]*=lt,dt[10]*=lt,dt[14]*=lt,dt[3]*=lt,dt[7]*=lt,dt[11]*=lt,dt[15]*=lt,this}determinant(){const lt=this.elements,dt=lt[0],vt=lt[4],St=lt[8],Et=lt[12],Ct=lt[1],At=lt[5],Rt=lt[9],Dt=lt[13],Nt=lt[2],Ft=lt[6],Ut=lt[10],Wt=lt[14],Zt=lt[3],Kt=lt[7],cn=lt[11],hn=lt[15];return Zt*(+Et*Rt*Ft-St*Dt*Ft-Et*At*Ut+vt*Dt*Ut+St*At*Wt-vt*Rt*Wt)+Kt*(+dt*Rt*Wt-dt*Dt*Ut+Et*Ct*Ut-St*Ct*Wt+St*Dt*Nt-Et*Rt*Nt)+cn*(+dt*Dt*Ft-dt*At*Wt-Et*Ct*Ft+vt*Ct*Wt+Et*At*Nt-vt*Dt*Nt)+hn*(-St*At*Nt-dt*Rt*Ft+dt*At*Ut+St*Ct*Ft-vt*Ct*Ut+vt*Rt*Nt)}transpose(){const lt=this.elements;let dt;return dt=lt[1],lt[1]=lt[4],lt[4]=dt,dt=lt[2],lt[2]=lt[8],lt[8]=dt,dt=lt[6],lt[6]=lt[9],lt[9]=dt,dt=lt[3],lt[3]=lt[12],lt[12]=dt,dt=lt[7],lt[7]=lt[13],lt[13]=dt,dt=lt[11],lt[11]=lt[14],lt[14]=dt,this}setPosition(lt,dt,vt){const St=this.elements;return lt.isVector3?(St[12]=lt.x,St[13]=lt.y,St[14]=lt.z):(St[12]=lt,St[13]=dt,St[14]=vt),this}invert(){const lt=this.elements,dt=lt[0],vt=lt[1],St=lt[2],Et=lt[3],Ct=lt[4],At=lt[5],Rt=lt[6],Dt=lt[7],Nt=lt[8],Ft=lt[9],Ut=lt[10],Wt=lt[11],Zt=lt[12],Kt=lt[13],cn=lt[14],hn=lt[15],dn=Ft*cn*Dt-Kt*Ut*Dt+Kt*Rt*Wt-At*cn*Wt-Ft*Rt*hn+At*Ut*hn,pn=Zt*Ut*Dt-Nt*cn*Dt-Zt*Rt*Wt+Ct*cn*Wt+Nt*Rt*hn-Ct*Ut*hn,gn=Nt*Kt*Dt-Zt*Ft*Dt+Zt*At*Wt-Ct*Kt*Wt-Nt*At*hn+Ct*Ft*hn,vn=Zt*Ft*Rt-Nt*Kt*Rt-Zt*At*Ut+Ct*Kt*Ut+Nt*At*cn-Ct*Ft*cn,bn=dt*dn+vt*pn+St*gn+Et*vn;if(bn===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const $n=1/bn;return lt[0]=dn*$n,lt[1]=(Kt*Ut*Et-Ft*cn*Et-Kt*St*Wt+vt*cn*Wt+Ft*St*hn-vt*Ut*hn)*$n,lt[2]=(At*cn*Et-Kt*Rt*Et+Kt*St*Dt-vt*cn*Dt-At*St*hn+vt*Rt*hn)*$n,lt[3]=(Ft*Rt*Et-At*Ut*Et-Ft*St*Dt+vt*Ut*Dt+At*St*Wt-vt*Rt*Wt)*$n,lt[4]=pn*$n,lt[5]=(Nt*cn*Et-Zt*Ut*Et+Zt*St*Wt-dt*cn*Wt-Nt*St*hn+dt*Ut*hn)*$n,lt[6]=(Zt*Rt*Et-Ct*cn*Et-Zt*St*Dt+dt*cn*Dt+Ct*St*hn-dt*Rt*hn)*$n,lt[7]=(Ct*Ut*Et-Nt*Rt*Et+Nt*St*Dt-dt*Ut*Dt-Ct*St*Wt+dt*Rt*Wt)*$n,lt[8]=gn*$n,lt[9]=(Zt*Ft*Et-Nt*Kt*Et-Zt*vt*Wt+dt*Kt*Wt+Nt*vt*hn-dt*Ft*hn)*$n,lt[10]=(Ct*Kt*Et-Zt*At*Et+Zt*vt*Dt-dt*Kt*Dt-Ct*vt*hn+dt*At*hn)*$n,lt[11]=(Nt*At*Et-Ct*Ft*Et-Nt*vt*Dt+dt*Ft*Dt+Ct*vt*Wt-dt*At*Wt)*$n,lt[12]=vn*$n,lt[13]=(Nt*Kt*St-Zt*Ft*St+Zt*vt*Ut-dt*Kt*Ut-Nt*vt*cn+dt*Ft*cn)*$n,lt[14]=(Zt*At*St-Ct*Kt*St-Zt*vt*Rt+dt*Kt*Rt+Ct*vt*cn-dt*At*cn)*$n,lt[15]=(Ct*Ft*St-Nt*At*St+Nt*vt*Rt-dt*Ft*Rt-Ct*vt*Ut+dt*At*Ut)*$n,this}scale(lt){const dt=this.elements,vt=lt.x,St=lt.y,Et=lt.z;return dt[0]*=vt,dt[4]*=St,dt[8]*=Et,dt[1]*=vt,dt[5]*=St,dt[9]*=Et,dt[2]*=vt,dt[6]*=St,dt[10]*=Et,dt[3]*=vt,dt[7]*=St,dt[11]*=Et,this}getMaxScaleOnAxis(){const lt=this.elements,dt=lt[0]*lt[0]+lt[1]*lt[1]+lt[2]*lt[2],vt=lt[4]*lt[4]+lt[5]*lt[5]+lt[6]*lt[6],St=lt[8]*lt[8]+lt[9]*lt[9]+lt[10]*lt[10];return Math.sqrt(Math.max(dt,vt,St))}makeTranslation(lt,dt,vt){return this.set(1,0,0,lt,0,1,0,dt,0,0,1,vt,0,0,0,1),this}makeRotationX(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(1,0,0,0,0,dt,-vt,0,0,vt,dt,0,0,0,0,1),this}makeRotationY(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,0,vt,0,0,1,0,0,-vt,0,dt,0,0,0,0,1),this}makeRotationZ(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,-vt,0,0,vt,dt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(lt,dt){const vt=Math.cos(dt),St=Math.sin(dt),Et=1-vt,Ct=lt.x,At=lt.y,Rt=lt.z,Dt=Et*Ct,Nt=Et*At;return this.set(Dt*Ct+vt,Dt*At-St*Rt,Dt*Rt+St*At,0,Dt*At+St*Rt,Nt*At+vt,Nt*Rt-St*Ct,0,Dt*Rt-St*At,Nt*Rt+St*Ct,Et*Rt*Rt+vt,0,0,0,0,1),this}makeScale(lt,dt,vt){return this.set(lt,0,0,0,0,dt,0,0,0,0,vt,0,0,0,0,1),this}makeShear(lt,dt,vt,St,Et,Ct){return this.set(1,vt,Et,0,lt,1,Ct,0,dt,St,1,0,0,0,0,1),this}compose(lt,dt,vt){const St=this.elements,Et=dt._x,Ct=dt._y,At=dt._z,Rt=dt._w,Dt=Et+Et,Nt=Ct+Ct,Ft=At+At,Ut=Et*Dt,Wt=Et*Nt,Zt=Et*Ft,Kt=Ct*Nt,cn=Ct*Ft,hn=At*Ft,dn=Rt*Dt,pn=Rt*Nt,gn=Rt*Ft,vn=vt.x,bn=vt.y,$n=vt.z;return St[0]=(1-(Kt+hn))*vn,St[1]=(Wt+gn)*vn,St[2]=(Zt-pn)*vn,St[3]=0,St[4]=(Wt-gn)*bn,St[5]=(1-(Ut+hn))*bn,St[6]=(cn+dn)*bn,St[7]=0,St[8]=(Zt+pn)*$n,St[9]=(cn-dn)*$n,St[10]=(1-(Ut+Kt))*$n,St[11]=0,St[12]=lt.x,St[13]=lt.y,St[14]=lt.z,St[15]=1,this}decompose(lt,dt,vt){const St=this.elements;let Et=_v1$5.set(St[0],St[1],St[2]).length();const Ct=_v1$5.set(St[4],St[5],St[6]).length(),At=_v1$5.set(St[8],St[9],St[10]).length();this.determinant()<0&&(Et=-Et),lt.x=St[12],lt.y=St[13],lt.z=St[14],_m1$2.copy(this);const Dt=1/Et,Nt=1/Ct,Ft=1/At;return _m1$2.elements[0]*=Dt,_m1$2.elements[1]*=Dt,_m1$2.elements[2]*=Dt,_m1$2.elements[4]*=Nt,_m1$2.elements[5]*=Nt,_m1$2.elements[6]*=Nt,_m1$2.elements[8]*=Ft,_m1$2.elements[9]*=Ft,_m1$2.elements[10]*=Ft,dt.setFromRotationMatrix(_m1$2),vt.x=Et,vt.y=Ct,vt.z=At,this}makePerspective(lt,dt,vt,St,Et,Ct){const At=this.elements,Rt=2*Et/(dt-lt),Dt=2*Et/(vt-St),Nt=(dt+lt)/(dt-lt),Ft=(vt+St)/(vt-St),Ut=-(Ct+Et)/(Ct-Et),Wt=-2*Ct*Et/(Ct-Et);return At[0]=Rt,At[4]=0,At[8]=Nt,At[12]=0,At[1]=0,At[5]=Dt,At[9]=Ft,At[13]=0,At[2]=0,At[6]=0,At[10]=Ut,At[14]=Wt,At[3]=0,At[7]=0,At[11]=-1,At[15]=0,this}makeOrthographic(lt,dt,vt,St,Et,Ct){const At=this.elements,Rt=1/(dt-lt),Dt=1/(vt-St),Nt=1/(Ct-Et),Ft=(dt+lt)*Rt,Ut=(vt+St)*Dt,Wt=(Ct+Et)*Nt;return At[0]=2*Rt,At[4]=0,At[8]=0,At[12]=-Ft,At[1]=0,At[5]=2*Dt,At[9]=0,At[13]=-Ut,At[2]=0,At[6]=0,At[10]=-2*Nt,At[14]=-Wt,At[3]=0,At[7]=0,At[11]=0,At[15]=1,this}equals(lt){const dt=this.elements,vt=lt.elements;for(let St=0;St<16;St++)if(dt[St]!==vt[St])return!1;return!0}fromArray(lt,dt=0){for(let vt=0;vt<16;vt++)this.elements[vt]=lt[vt+dt];return this}toArray(lt=[],dt=0){const vt=this.elements;return lt[dt]=vt[0],lt[dt+1]=vt[1],lt[dt+2]=vt[2],lt[dt+3]=vt[3],lt[dt+4]=vt[4],lt[dt+5]=vt[5],lt[dt+6]=vt[6],lt[dt+7]=vt[7],lt[dt+8]=vt[8],lt[dt+9]=vt[9],lt[dt+10]=vt[10],lt[dt+11]=vt[11],lt[dt+12]=vt[12],lt[dt+13]=vt[13],lt[dt+14]=vt[14],lt[dt+15]=vt[15],lt}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(lt=0,dt=0,vt=0,St=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=lt,this._y=dt,this._z=vt,this._order=St}get x(){return this._x}set x(lt){this._x=lt,this._onChangeCallback()}get y(){return this._y}set y(lt){this._y=lt,this._onChangeCallback()}get z(){return this._z}set z(lt){this._z=lt,this._onChangeCallback()}get order(){return this._order}set order(lt){this._order=lt,this._onChangeCallback()}set(lt,dt,vt,St=this._order){return this._x=lt,this._y=dt,this._z=vt,this._order=St,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(lt){return this._x=lt._x,this._y=lt._y,this._z=lt._z,this._order=lt._order,this._onChangeCallback(),this}setFromRotationMatrix(lt,dt=this._order,vt=!0){const St=lt.elements,Et=St[0],Ct=St[4],At=St[8],Rt=St[1],Dt=St[5],Nt=St[9],Ft=St[2],Ut=St[6],Wt=St[10];switch(dt){case"XYZ":this._y=Math.asin(clamp$1(At,-1,1)),Math.abs(At)<.9999999?(this._x=Math.atan2(-Nt,Wt),this._z=Math.atan2(-Ct,Et)):(this._x=Math.atan2(Ut,Dt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(Nt,-1,1)),Math.abs(Nt)<.9999999?(this._y=Math.atan2(At,Wt),this._z=Math.atan2(Rt,Dt)):(this._y=Math.atan2(-Ft,Et),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(Ut,-1,1)),Math.abs(Ut)<.9999999?(this._y=Math.atan2(-Ft,Wt),this._z=Math.atan2(-Ct,Dt)):(this._y=0,this._z=Math.atan2(Rt,Et));break;case"ZYX":this._y=Math.asin(-clamp$1(Ft,-1,1)),Math.abs(Ft)<.9999999?(this._x=Math.atan2(Ut,Wt),this._z=Math.atan2(Rt,Et)):(this._x=0,this._z=Math.atan2(-Ct,Dt));break;case"YZX":this._z=Math.asin(clamp$1(Rt,-1,1)),Math.abs(Rt)<.9999999?(this._x=Math.atan2(-Nt,Dt),this._y=Math.atan2(-Ft,Et)):(this._x=0,this._y=Math.atan2(At,Wt));break;case"XZY":this._z=Math.asin(-clamp$1(Ct,-1,1)),Math.abs(Ct)<.9999999?(this._x=Math.atan2(Ut,Dt),this._y=Math.atan2(At,Et)):(this._x=Math.atan2(-Nt,Wt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+dt)}return this._order=dt,vt===!0&&this._onChangeCallback(),this}setFromQuaternion(lt,dt,vt){return _matrix$1.makeRotationFromQuaternion(lt),this.setFromRotationMatrix(_matrix$1,dt,vt)}setFromVector3(lt,dt=this._order){return this.set(lt.x,lt.y,lt.z,dt)}reorder(lt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,lt)}equals(lt){return lt._x===this._x&&lt._y===this._y&&lt._z===this._z&&lt._order===this._order}fromArray(lt){return this._x=lt[0],this._y=lt[1],this._z=lt[2],lt[3]!==void 0&&(this._order=lt[3]),this._onChangeCallback(),this}toArray(lt=[],dt=0){return lt[dt]=this._x,lt[dt+1]=this._y,lt[dt+2]=this._z,lt[dt+3]=this._order,lt}_onChange(lt){return this._onChangeCallback=lt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";let Layers$1=class{constructor(){this.mask=1}set(lt){this.mask=(1<<lt|0)>>>0}enable(lt){this.mask|=1<<lt|0}enableAll(){this.mask=-1}toggle(lt){this.mask^=1<<lt|0}disable(lt){this.mask&=~(1<<lt|0)}disableAll(){this.mask=0}test(lt){return(this.mask&lt.mask)!==0}isEnabled(lt){return(this.mask&(1<<lt|0))!==0}},_object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const lt=new Vector3,dt=new Euler,vt=new Quaternion,St=new Vector3(1,1,1);function Et(){vt.setFromEuler(dt,!1)}function Ct(){dt.setFromQuaternion(vt,void 0,!1)}dt._onChange(Et),vt._onChange(Ct),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:lt},rotation:{configurable:!0,enumerable:!0,value:dt},quaternion:{configurable:!0,enumerable:!0,value:vt},scale:{configurable:!0,enumerable:!0,value:St},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers$1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(lt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(lt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(lt){return this.quaternion.premultiply(lt),this}setRotationFromAxisAngle(lt,dt){this.quaternion.setFromAxisAngle(lt,dt)}setRotationFromEuler(lt){this.quaternion.setFromEuler(lt,!0)}setRotationFromMatrix(lt){this.quaternion.setFromRotationMatrix(lt)}setRotationFromQuaternion(lt){this.quaternion.copy(lt)}rotateOnAxis(lt,dt){return _q1.setFromAxisAngle(lt,dt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(lt,dt){return _q1.setFromAxisAngle(lt,dt),this.quaternion.premultiply(_q1),this}rotateX(lt){return this.rotateOnAxis(_xAxis,lt)}rotateY(lt){return this.rotateOnAxis(_yAxis,lt)}rotateZ(lt){return this.rotateOnAxis(_zAxis,lt)}translateOnAxis(lt,dt){return _v1$4.copy(lt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(dt)),this}translateX(lt){return this.translateOnAxis(_xAxis,lt)}translateY(lt){return this.translateOnAxis(_yAxis,lt)}translateZ(lt){return this.translateOnAxis(_zAxis,lt)}localToWorld(lt){return this.updateWorldMatrix(!0,!1),lt.applyMatrix4(this.matrixWorld)}worldToLocal(lt){return this.updateWorldMatrix(!0,!1),lt.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(lt,dt,vt){lt.isVector3?_target.copy(lt):_target.set(lt,dt,vt);const St=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),St&&(_m1$1.extractRotation(St.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(lt){if(arguments.length>1){for(let dt=0;dt<arguments.length;dt++)this.add(arguments[dt]);return this}return lt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",lt),this):(lt&&lt.isObject3D?(lt.parent!==null&&lt.parent.remove(lt),lt.parent=this,this.children.push(lt),lt.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",lt),this)}remove(lt){if(arguments.length>1){for(let vt=0;vt<arguments.length;vt++)this.remove(arguments[vt]);return this}const dt=this.children.indexOf(lt);return dt!==-1&&(lt.parent=null,this.children.splice(dt,1),lt.dispatchEvent(_removedEvent)),this}removeFromParent(){const lt=this.parent;return lt!==null&&lt.remove(this),this}clear(){for(let lt=0;lt<this.children.length;lt++){const dt=this.children[lt];dt.parent=null,dt.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(lt){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),lt.parent!==null&&(lt.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(lt.parent.matrixWorld)),lt.applyMatrix4(_m1$1),this.add(lt),lt.updateWorldMatrix(!1,!0),this}getObjectById(lt){return this.getObjectByProperty("id",lt)}getObjectByName(lt){return this.getObjectByProperty("name",lt)}getObjectByProperty(lt,dt){if(this[lt]===dt)return this;for(let vt=0,St=this.children.length;vt<St;vt++){const Ct=this.children[vt].getObjectByProperty(lt,dt);if(Ct!==void 0)return Ct}}getObjectsByProperty(lt,dt){let vt=[];this[lt]===dt&&vt.push(this);for(let St=0,Et=this.children.length;St<Et;St++){const Ct=this.children[St].getObjectsByProperty(lt,dt);Ct.length>0&&(vt=vt.concat(Ct))}return vt}getWorldPosition(lt){return this.updateWorldMatrix(!0,!1),lt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(lt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,lt,_scale$2),lt}getWorldScale(lt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,lt),lt}getWorldDirection(lt){this.updateWorldMatrix(!0,!1);const dt=this.matrixWorld.elements;return lt.set(dt[8],dt[9],dt[10]).normalize()}raycast(){}traverse(lt){lt(this);const dt=this.children;for(let vt=0,St=dt.length;vt<St;vt++)dt[vt].traverse(lt)}traverseVisible(lt){if(this.visible===!1)return;lt(this);const dt=this.children;for(let vt=0,St=dt.length;vt<St;vt++)dt[vt].traverseVisible(lt)}traverseAncestors(lt){const dt=this.parent;dt!==null&&(lt(dt),dt.traverseAncestors(lt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(lt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||lt)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,lt=!0);const dt=this.children;for(let vt=0,St=dt.length;vt<St;vt++){const Et=dt[vt];(Et.matrixWorldAutoUpdate===!0||lt===!0)&&Et.updateMatrixWorld(lt)}}updateWorldMatrix(lt,dt){const vt=this.parent;if(lt===!0&&vt!==null&&vt.matrixWorldAutoUpdate===!0&&vt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),dt===!0){const St=this.children;for(let Et=0,Ct=St.length;Et<Ct;Et++){const At=St[Et];At.matrixWorldAutoUpdate===!0&&At.updateWorldMatrix(!1,!0)}}}toJSON(lt){const dt=lt===void 0||typeof lt=="string",vt={};dt&&(lt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},vt.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const St={};St.uuid=this.uuid,St.type=this.type,this.name!==""&&(St.name=this.name),this.castShadow===!0&&(St.castShadow=!0),this.receiveShadow===!0&&(St.receiveShadow=!0),this.visible===!1&&(St.visible=!1),this.frustumCulled===!1&&(St.frustumCulled=!1),this.renderOrder!==0&&(St.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(St.userData=this.userData),St.layers=this.layers.mask,St.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(St.matrixAutoUpdate=!1),this.isInstancedMesh&&(St.type="InstancedMesh",St.count=this.count,St.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(St.instanceColor=this.instanceColor.toJSON()));function Et(At,Rt){return At[Rt.uuid]===void 0&&(At[Rt.uuid]=Rt.toJSON(lt)),Rt.uuid}if(this.isScene)this.background&&(this.background.isColor?St.background=this.background.toJSON():this.background.isTexture&&(St.background=this.background.toJSON(lt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(St.environment=this.environment.toJSON(lt).uuid);else if(this.isMesh||this.isLine||this.isPoints){St.geometry=Et(lt.geometries,this.geometry);const At=this.geometry.parameters;if(At!==void 0&&At.shapes!==void 0){const Rt=At.shapes;if(Array.isArray(Rt))for(let Dt=0,Nt=Rt.length;Dt<Nt;Dt++){const Ft=Rt[Dt];Et(lt.shapes,Ft)}else Et(lt.shapes,Rt)}}if(this.isSkinnedMesh&&(St.bindMode=this.bindMode,St.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(Et(lt.skeletons,this.skeleton),St.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const At=[];for(let Rt=0,Dt=this.material.length;Rt<Dt;Rt++)At.push(Et(lt.materials,this.material[Rt]));St.material=At}else St.material=Et(lt.materials,this.material);if(this.children.length>0){St.children=[];for(let At=0;At<this.children.length;At++)St.children.push(this.children[At].toJSON(lt).object)}if(this.animations.length>0){St.animations=[];for(let At=0;At<this.animations.length;At++){const Rt=this.animations[At];St.animations.push(Et(lt.animations,Rt))}}if(dt){const At=Ct(lt.geometries),Rt=Ct(lt.materials),Dt=Ct(lt.textures),Nt=Ct(lt.images),Ft=Ct(lt.shapes),Ut=Ct(lt.skeletons),Wt=Ct(lt.animations),Zt=Ct(lt.nodes);At.length>0&&(vt.geometries=At),Rt.length>0&&(vt.materials=Rt),Dt.length>0&&(vt.textures=Dt),Nt.length>0&&(vt.images=Nt),Ft.length>0&&(vt.shapes=Ft),Ut.length>0&&(vt.skeletons=Ut),Wt.length>0&&(vt.animations=Wt),Zt.length>0&&(vt.nodes=Zt)}return vt.object=St,vt;function Ct(At){const Rt=[];for(const Dt in At){const Nt=At[Dt];delete Nt.metadata,Rt.push(Nt)}return Rt}}clone(lt){return new this.constructor().copy(this,lt)}copy(lt,dt=!0){if(this.name=lt.name,this.up.copy(lt.up),this.position.copy(lt.position),this.rotation.order=lt.rotation.order,this.quaternion.copy(lt.quaternion),this.scale.copy(lt.scale),this.matrix.copy(lt.matrix),this.matrixWorld.copy(lt.matrixWorld),this.matrixAutoUpdate=lt.matrixAutoUpdate,this.matrixWorldNeedsUpdate=lt.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=lt.matrixWorldAutoUpdate,this.layers.mask=lt.layers.mask,this.visible=lt.visible,this.castShadow=lt.castShadow,this.receiveShadow=lt.receiveShadow,this.frustumCulled=lt.frustumCulled,this.renderOrder=lt.renderOrder,this.userData=JSON.parse(JSON.stringify(lt.userData)),dt===!0)for(let vt=0;vt<lt.children.length;vt++){const St=lt.children[vt];this.add(St.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3){this.a=lt,this.b=dt,this.c=vt}static getNormal(lt,dt,vt,St){St.subVectors(vt,dt),_v0$1.subVectors(lt,dt),St.cross(_v0$1);const Et=St.lengthSq();return Et>0?St.multiplyScalar(1/Math.sqrt(Et)):St.set(0,0,0)}static getBarycoord(lt,dt,vt,St,Et){_v0$1.subVectors(St,dt),_v1$3.subVectors(vt,dt),_v2$2.subVectors(lt,dt);const Ct=_v0$1.dot(_v0$1),At=_v0$1.dot(_v1$3),Rt=_v0$1.dot(_v2$2),Dt=_v1$3.dot(_v1$3),Nt=_v1$3.dot(_v2$2),Ft=Ct*Dt-At*At;if(Ft===0)return Et.set(-2,-1,-1);const Ut=1/Ft,Wt=(Dt*Rt-At*Nt)*Ut,Zt=(Ct*Nt-At*Rt)*Ut;return Et.set(1-Wt-Zt,Zt,Wt)}static containsPoint(lt,dt,vt,St){return this.getBarycoord(lt,dt,vt,St,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(lt,dt,vt,St,Et,Ct,At,Rt){return this.getBarycoord(lt,dt,vt,St,_v3$1),Rt.set(0,0),Rt.addScaledVector(Et,_v3$1.x),Rt.addScaledVector(Ct,_v3$1.y),Rt.addScaledVector(At,_v3$1.z),Rt}static isFrontFacing(lt,dt,vt,St){return _v0$1.subVectors(vt,dt),_v1$3.subVectors(lt,dt),_v0$1.cross(_v1$3).dot(St)<0}set(lt,dt,vt){return this.a.copy(lt),this.b.copy(dt),this.c.copy(vt),this}setFromPointsAndIndices(lt,dt,vt,St){return this.a.copy(lt[dt]),this.b.copy(lt[vt]),this.c.copy(lt[St]),this}setFromAttributeAndIndices(lt,dt,vt,St){return this.a.fromBufferAttribute(lt,dt),this.b.fromBufferAttribute(lt,vt),this.c.fromBufferAttribute(lt,St),this}clone(){return new this.constructor().copy(this)}copy(lt){return this.a.copy(lt.a),this.b.copy(lt.b),this.c.copy(lt.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(lt){return lt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(lt){return Triangle.getNormal(this.a,this.b,this.c,lt)}getPlane(lt){return lt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(lt,dt){return Triangle.getBarycoord(lt,this.a,this.b,this.c,dt)}getUV(lt,dt,vt,St,Et){return Triangle.getUV(lt,this.a,this.b,this.c,dt,vt,St,Et)}containsPoint(lt){return Triangle.containsPoint(lt,this.a,this.b,this.c)}isFrontFacing(lt){return Triangle.isFrontFacing(this.a,this.b,this.c,lt)}intersectsBox(lt){return lt.intersectsTriangle(this)}closestPointToPoint(lt,dt){const vt=this.a,St=this.b,Et=this.c;let Ct,At;_vab.subVectors(St,vt),_vac.subVectors(Et,vt),_vap.subVectors(lt,vt);const Rt=_vab.dot(_vap),Dt=_vac.dot(_vap);if(Rt<=0&&Dt<=0)return dt.copy(vt);_vbp.subVectors(lt,St);const Nt=_vab.dot(_vbp),Ft=_vac.dot(_vbp);if(Nt>=0&&Ft<=Nt)return dt.copy(St);const Ut=Rt*Ft-Nt*Dt;if(Ut<=0&&Rt>=0&&Nt<=0)return Ct=Rt/(Rt-Nt),dt.copy(vt).addScaledVector(_vab,Ct);_vcp.subVectors(lt,Et);const Wt=_vab.dot(_vcp),Zt=_vac.dot(_vcp);if(Zt>=0&&Wt<=Zt)return dt.copy(Et);const Kt=Wt*Dt-Rt*Zt;if(Kt<=0&&Dt>=0&&Zt<=0)return At=Dt/(Dt-Zt),dt.copy(vt).addScaledVector(_vac,At);const cn=Nt*Zt-Wt*Ft;if(cn<=0&&Ft-Nt>=0&&Wt-Zt>=0)return _vbc.subVectors(Et,St),At=(Ft-Nt)/(Ft-Nt+(Wt-Zt)),dt.copy(St).addScaledVector(_vbc,At);const hn=1/(cn+Kt+Ut);return Ct=Kt*hn,At=Ut*hn,dt.copy(vt).addScaledVector(_vab,Ct).addScaledVector(_vac,At)}equals(lt){return lt.a.equals(this.a)&&lt.b.equals(this.b)&&lt.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(lt){this._alphaTest>0!=lt>0&&this.version++,this._alphaTest=lt}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(lt){if(lt!==void 0)for(const dt in lt){const vt=lt[dt];if(vt===void 0){console.warn("THREE.Material: '"+dt+"' parameter is undefined.");continue}const St=this[dt];if(St===void 0){console.warn("THREE."+this.type+": '"+dt+"' is not a property of this material.");continue}St&&St.isColor?St.set(vt):St&&St.isVector3&&vt&&vt.isVector3?St.copy(vt):this[dt]=vt}}toJSON(lt){const dt=lt===void 0||typeof lt=="string";dt&&(lt={textures:{},images:{}});const vt={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};vt.uuid=this.uuid,vt.type=this.type,this.name!==""&&(vt.name=this.name),this.color&&this.color.isColor&&(vt.color=this.color.getHex()),this.roughness!==void 0&&(vt.roughness=this.roughness),this.metalness!==void 0&&(vt.metalness=this.metalness),this.sheen!==void 0&&(vt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(vt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(vt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(vt.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(vt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(vt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(vt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(vt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(vt.shininess=this.shininess),this.clearcoat!==void 0&&(vt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(vt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(vt.clearcoatMap=this.clearcoatMap.toJSON(lt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(vt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(lt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(vt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(lt).uuid,vt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(vt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(vt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(vt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(vt.iridescenceMap=this.iridescenceMap.toJSON(lt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(vt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(lt).uuid),this.map&&this.map.isTexture&&(vt.map=this.map.toJSON(lt).uuid),this.matcap&&this.matcap.isTexture&&(vt.matcap=this.matcap.toJSON(lt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(vt.alphaMap=this.alphaMap.toJSON(lt).uuid),this.lightMap&&this.lightMap.isTexture&&(vt.lightMap=this.lightMap.toJSON(lt).uuid,vt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(vt.aoMap=this.aoMap.toJSON(lt).uuid,vt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(vt.bumpMap=this.bumpMap.toJSON(lt).uuid,vt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(vt.normalMap=this.normalMap.toJSON(lt).uuid,vt.normalMapType=this.normalMapType,vt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(vt.displacementMap=this.displacementMap.toJSON(lt).uuid,vt.displacementScale=this.displacementScale,vt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(vt.roughnessMap=this.roughnessMap.toJSON(lt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(vt.metalnessMap=this.metalnessMap.toJSON(lt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(vt.emissiveMap=this.emissiveMap.toJSON(lt).uuid),this.specularMap&&this.specularMap.isTexture&&(vt.specularMap=this.specularMap.toJSON(lt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(vt.specularIntensityMap=this.specularIntensityMap.toJSON(lt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(vt.specularColorMap=this.specularColorMap.toJSON(lt).uuid),this.envMap&&this.envMap.isTexture&&(vt.envMap=this.envMap.toJSON(lt).uuid,this.combine!==void 0&&(vt.combine=this.combine)),this.envMapIntensity!==void 0&&(vt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(vt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(vt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(vt.gradientMap=this.gradientMap.toJSON(lt).uuid),this.transmission!==void 0&&(vt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(vt.transmissionMap=this.transmissionMap.toJSON(lt).uuid),this.thickness!==void 0&&(vt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(vt.thicknessMap=this.thicknessMap.toJSON(lt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(vt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(vt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(vt.size=this.size),this.shadowSide!==null&&(vt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(vt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(vt.blending=this.blending),this.side!==FrontSide&&(vt.side=this.side),this.vertexColors&&(vt.vertexColors=!0),this.opacity<1&&(vt.opacity=this.opacity),this.transparent===!0&&(vt.transparent=this.transparent),vt.depthFunc=this.depthFunc,vt.depthTest=this.depthTest,vt.depthWrite=this.depthWrite,vt.colorWrite=this.colorWrite,vt.stencilWrite=this.stencilWrite,vt.stencilWriteMask=this.stencilWriteMask,vt.stencilFunc=this.stencilFunc,vt.stencilRef=this.stencilRef,vt.stencilFuncMask=this.stencilFuncMask,vt.stencilFail=this.stencilFail,vt.stencilZFail=this.stencilZFail,vt.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(vt.rotation=this.rotation),this.polygonOffset===!0&&(vt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(vt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(vt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(vt.linewidth=this.linewidth),this.dashSize!==void 0&&(vt.dashSize=this.dashSize),this.gapSize!==void 0&&(vt.gapSize=this.gapSize),this.scale!==void 0&&(vt.scale=this.scale),this.dithering===!0&&(vt.dithering=!0),this.alphaTest>0&&(vt.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(vt.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(vt.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(vt.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(vt.wireframe=this.wireframe),this.wireframeLinewidth>1&&(vt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(vt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(vt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(vt.flatShading=this.flatShading),this.visible===!1&&(vt.visible=!1),this.toneMapped===!1&&(vt.toneMapped=!1),this.fog===!1&&(vt.fog=!1),Object.keys(this.userData).length>0&&(vt.userData=this.userData);function St(Et){const Ct=[];for(const At in Et){const Rt=Et[At];delete Rt.metadata,Ct.push(Rt)}return Ct}if(dt){const Et=St(lt.textures),Ct=St(lt.images);Et.length>0&&(vt.textures=Et),Ct.length>0&&(vt.images=Ct)}return vt}clone(){return new this.constructor().copy(this)}copy(lt){this.name=lt.name,this.blending=lt.blending,this.side=lt.side,this.vertexColors=lt.vertexColors,this.opacity=lt.opacity,this.transparent=lt.transparent,this.blendSrc=lt.blendSrc,this.blendDst=lt.blendDst,this.blendEquation=lt.blendEquation,this.blendSrcAlpha=lt.blendSrcAlpha,this.blendDstAlpha=lt.blendDstAlpha,this.blendEquationAlpha=lt.blendEquationAlpha,this.depthFunc=lt.depthFunc,this.depthTest=lt.depthTest,this.depthWrite=lt.depthWrite,this.stencilWriteMask=lt.stencilWriteMask,this.stencilFunc=lt.stencilFunc,this.stencilRef=lt.stencilRef,this.stencilFuncMask=lt.stencilFuncMask,this.stencilFail=lt.stencilFail,this.stencilZFail=lt.stencilZFail,this.stencilZPass=lt.stencilZPass,this.stencilWrite=lt.stencilWrite;const dt=lt.clippingPlanes;let vt=null;if(dt!==null){const St=dt.length;vt=new Array(St);for(let Et=0;Et!==St;++Et)vt[Et]=dt[Et].clone()}return this.clippingPlanes=vt,this.clipIntersection=lt.clipIntersection,this.clipShadows=lt.clipShadows,this.shadowSide=lt.shadowSide,this.colorWrite=lt.colorWrite,this.precision=lt.precision,this.polygonOffset=lt.polygonOffset,this.polygonOffsetFactor=lt.polygonOffsetFactor,this.polygonOffsetUnits=lt.polygonOffsetUnits,this.dithering=lt.dithering,this.alphaTest=lt.alphaTest,this.alphaToCoverage=lt.alphaToCoverage,this.premultipliedAlpha=lt.premultipliedAlpha,this.forceSinglePass=lt.forceSinglePass,this.visible=lt.visible,this.toneMapped=lt.toneMapped,this.userData=JSON.parse(JSON.stringify(lt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(lt){lt===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(ft,lt,dt){return dt<0&&(dt+=1),dt>1&&(dt-=1),dt<1/6?ft+(lt-ft)*6*dt:dt<1/2?lt:dt<2/3?ft+(lt-ft)*6*(2/3-dt):ft}class Color{constructor(lt,dt,vt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,dt===void 0&&vt===void 0?this.set(lt):this.setRGB(lt,dt,vt)}set(lt){return lt&&lt.isColor?this.copy(lt):typeof lt=="number"?this.setHex(lt):typeof lt=="string"&&this.setStyle(lt),this}setScalar(lt){return this.r=lt,this.g=lt,this.b=lt,this}setHex(lt,dt=SRGBColorSpace){return lt=Math.floor(lt),this.r=(lt>>16&255)/255,this.g=(lt>>8&255)/255,this.b=(lt&255)/255,ColorManagement.toWorkingColorSpace(this,dt),this}setRGB(lt,dt,vt,St=ColorManagement.workingColorSpace){return this.r=lt,this.g=dt,this.b=vt,ColorManagement.toWorkingColorSpace(this,St),this}setHSL(lt,dt,vt,St=ColorManagement.workingColorSpace){if(lt=euclideanModulo(lt,1),dt=clamp$1(dt,0,1),vt=clamp$1(vt,0,1),dt===0)this.r=this.g=this.b=vt;else{const Et=vt<=.5?vt*(1+dt):vt+dt-vt*dt,Ct=2*vt-Et;this.r=hue2rgb(Ct,Et,lt+1/3),this.g=hue2rgb(Ct,Et,lt),this.b=hue2rgb(Ct,Et,lt-1/3)}return ColorManagement.toWorkingColorSpace(this,St),this}setStyle(lt,dt=SRGBColorSpace){function vt(Et){Et!==void 0&&parseFloat(Et)<1&&console.warn("THREE.Color: Alpha component of "+lt+" will be ignored.")}let St;if(St=/^(\w+)\(([^\)]*)\)/.exec(lt)){let Et;const Ct=St[1],At=St[2];switch(Ct){case"rgb":case"rgba":if(Et=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At))return this.r=Math.min(255,parseInt(Et[1],10))/255,this.g=Math.min(255,parseInt(Et[2],10))/255,this.b=Math.min(255,parseInt(Et[3],10))/255,ColorManagement.toWorkingColorSpace(this,dt),vt(Et[4]),this;if(Et=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At))return this.r=Math.min(100,parseInt(Et[1],10))/100,this.g=Math.min(100,parseInt(Et[2],10))/100,this.b=Math.min(100,parseInt(Et[3],10))/100,ColorManagement.toWorkingColorSpace(this,dt),vt(Et[4]),this;break;case"hsl":case"hsla":if(Et=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At)){const Rt=parseFloat(Et[1])/360,Dt=parseFloat(Et[2])/100,Nt=parseFloat(Et[3])/100;return vt(Et[4]),this.setHSL(Rt,Dt,Nt,dt)}break;default:console.warn("THREE.Color: Unknown color model "+lt)}}else if(St=/^\#([A-Fa-f\d]+)$/.exec(lt)){const Et=St[1],Ct=Et.length;if(Ct===3)return this.r=parseInt(Et.charAt(0)+Et.charAt(0),16)/255,this.g=parseInt(Et.charAt(1)+Et.charAt(1),16)/255,this.b=parseInt(Et.charAt(2)+Et.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,dt),this;if(Ct===6)return this.r=parseInt(Et.charAt(0)+Et.charAt(1),16)/255,this.g=parseInt(Et.charAt(2)+Et.charAt(3),16)/255,this.b=parseInt(Et.charAt(4)+Et.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,dt),this;console.warn("THREE.Color: Invalid hex color "+lt)}else if(lt&&lt.length>0)return this.setColorName(lt,dt);return this}setColorName(lt,dt=SRGBColorSpace){const vt=_colorKeywords[lt.toLowerCase()];return vt!==void 0?this.setHex(vt,dt):console.warn("THREE.Color: Unknown color "+lt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(lt){return this.r=lt.r,this.g=lt.g,this.b=lt.b,this}copySRGBToLinear(lt){return this.r=SRGBToLinear(lt.r),this.g=SRGBToLinear(lt.g),this.b=SRGBToLinear(lt.b),this}copyLinearToSRGB(lt){return this.r=LinearToSRGB(lt.r),this.g=LinearToSRGB(lt.g),this.b=LinearToSRGB(lt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(lt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),lt),clamp$1(_color.r*255,0,255)<<16^clamp$1(_color.g*255,0,255)<<8^clamp$1(_color.b*255,0,255)<<0}getHexString(lt=SRGBColorSpace){return("000000"+this.getHex(lt).toString(16)).slice(-6)}getHSL(lt,dt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),dt);const vt=_color.r,St=_color.g,Et=_color.b,Ct=Math.max(vt,St,Et),At=Math.min(vt,St,Et);let Rt,Dt;const Nt=(At+Ct)/2;if(At===Ct)Rt=0,Dt=0;else{const Ft=Ct-At;switch(Dt=Nt<=.5?Ft/(Ct+At):Ft/(2-Ct-At),Ct){case vt:Rt=(St-Et)/Ft+(St<Et?6:0);break;case St:Rt=(Et-vt)/Ft+2;break;case Et:Rt=(vt-St)/Ft+4;break}Rt/=6}return lt.h=Rt,lt.s=Dt,lt.l=Nt,lt}getRGB(lt,dt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),dt),lt.r=_color.r,lt.g=_color.g,lt.b=_color.b,lt}getStyle(lt=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),lt);const dt=_color.r,vt=_color.g,St=_color.b;return lt!==SRGBColorSpace?`color(${lt} ${dt.toFixed(3)} ${vt.toFixed(3)} ${St.toFixed(3)})`:`rgb(${dt*255|0},${vt*255|0},${St*255|0})`}offsetHSL(lt,dt,vt){return this.getHSL(_hslA),_hslA.h+=lt,_hslA.s+=dt,_hslA.l+=vt,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(lt){return this.r+=lt.r,this.g+=lt.g,this.b+=lt.b,this}addColors(lt,dt){return this.r=lt.r+dt.r,this.g=lt.g+dt.g,this.b=lt.b+dt.b,this}addScalar(lt){return this.r+=lt,this.g+=lt,this.b+=lt,this}sub(lt){return this.r=Math.max(0,this.r-lt.r),this.g=Math.max(0,this.g-lt.g),this.b=Math.max(0,this.b-lt.b),this}multiply(lt){return this.r*=lt.r,this.g*=lt.g,this.b*=lt.b,this}multiplyScalar(lt){return this.r*=lt,this.g*=lt,this.b*=lt,this}lerp(lt,dt){return this.r+=(lt.r-this.r)*dt,this.g+=(lt.g-this.g)*dt,this.b+=(lt.b-this.b)*dt,this}lerpColors(lt,dt,vt){return this.r=lt.r+(dt.r-lt.r)*vt,this.g=lt.g+(dt.g-lt.g)*vt,this.b=lt.b+(dt.b-lt.b)*vt,this}lerpHSL(lt,dt){this.getHSL(_hslA),lt.getHSL(_hslB);const vt=lerp(_hslA.h,_hslB.h,dt),St=lerp(_hslA.s,_hslB.s,dt),Et=lerp(_hslA.l,_hslB.l,dt);return this.setHSL(vt,St,Et),this}equals(lt){return lt.r===this.r&&lt.g===this.g&&lt.b===this.b}fromArray(lt,dt=0){return this.r=lt[dt],this.g=lt[dt+1],this.b=lt[dt+2],this}toArray(lt=[],dt=0){return lt[dt]=this.r,lt[dt+1]=this.g,lt[dt+2]=this.b,lt}fromBufferAttribute(lt,dt){return this.r=lt.getX(dt),this.g=lt.getY(dt),this.b=lt.getZ(dt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(lt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.fog=lt.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(lt,dt,vt=!1){if(Array.isArray(lt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=lt,this.itemSize=dt,this.count=lt!==void 0?lt.length/dt:0,this.normalized=vt,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(lt){lt===!0&&this.version++}setUsage(lt){return this.usage=lt,this}copy(lt){return this.name=lt.name,this.array=new lt.array.constructor(lt.array),this.itemSize=lt.itemSize,this.count=lt.count,this.normalized=lt.normalized,this.usage=lt.usage,this}copyAt(lt,dt,vt){lt*=this.itemSize,vt*=dt.itemSize;for(let St=0,Et=this.itemSize;St<Et;St++)this.array[lt+St]=dt.array[vt+St];return this}copyArray(lt){return this.array.set(lt),this}applyMatrix3(lt){if(this.itemSize===2)for(let dt=0,vt=this.count;dt<vt;dt++)_vector2$1.fromBufferAttribute(this,dt),_vector2$1.applyMatrix3(lt),this.setXY(dt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyMatrix3(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyMatrix4(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyNormalMatrix(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.transformDirection(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(lt,dt=0){return this.array.set(lt,dt),this}getX(lt){let dt=this.array[lt*this.itemSize];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setX(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize]=dt,this}getY(lt){let dt=this.array[lt*this.itemSize+1];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setY(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+1]=dt,this}getZ(lt){let dt=this.array[lt*this.itemSize+2];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setZ(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+2]=dt,this}getW(lt){let dt=this.array[lt*this.itemSize+3];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setW(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+3]=dt,this}setXY(lt,dt,vt){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this}setXYZ(lt,dt,vt,St){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),St=normalize(St,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this.array[lt+2]=St,this}setXYZW(lt,dt,vt,St,Et){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),St=normalize(St,this.array),Et=normalize(Et,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this.array[lt+2]=St,this.array[lt+3]=Et,this}onUpload(lt){return this.onUploadCallback=lt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const lt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(lt.name=this.name),this.usage!==StaticDrawUsage&&(lt.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(lt.updateRange=this.updateRange),lt}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int8Array(lt),dt,vt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint8Array(lt),dt,vt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint8ClampedArray(lt),dt,vt)}}class Int16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int16Array(lt),dt,vt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint16Array(lt),dt,vt)}}class Int32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int32Array(lt),dt,vt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint32Array(lt),dt,vt)}}class Float16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint16Array(lt),dt,vt),this.isFloat16BufferAttribute=!0}}class Float32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Float32Array(lt),dt,vt)}}class Float64BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Float64Array(lt),dt,vt)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(lt){return Array.isArray(lt)?this.index=new(arrayNeedsUint32(lt)?Uint32BufferAttribute:Uint16BufferAttribute)(lt,1):this.index=lt,this}getAttribute(lt){return this.attributes[lt]}setAttribute(lt,dt){return this.attributes[lt]=dt,this}deleteAttribute(lt){return delete this.attributes[lt],this}hasAttribute(lt){return this.attributes[lt]!==void 0}addGroup(lt,dt,vt=0){this.groups.push({start:lt,count:dt,materialIndex:vt})}clearGroups(){this.groups=[]}setDrawRange(lt,dt){this.drawRange.start=lt,this.drawRange.count=dt}applyMatrix4(lt){const dt=this.attributes.position;dt!==void 0&&(dt.applyMatrix4(lt),dt.needsUpdate=!0);const vt=this.attributes.normal;if(vt!==void 0){const Et=new Matrix3().getNormalMatrix(lt);vt.applyNormalMatrix(Et),vt.needsUpdate=!0}const St=this.attributes.tangent;return St!==void 0&&(St.transformDirection(lt),St.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(lt){return _m1.makeRotationFromQuaternion(lt),this.applyMatrix4(_m1),this}rotateX(lt){return _m1.makeRotationX(lt),this.applyMatrix4(_m1),this}rotateY(lt){return _m1.makeRotationY(lt),this.applyMatrix4(_m1),this}rotateZ(lt){return _m1.makeRotationZ(lt),this.applyMatrix4(_m1),this}translate(lt,dt,vt){return _m1.makeTranslation(lt,dt,vt),this.applyMatrix4(_m1),this}scale(lt,dt,vt){return _m1.makeScale(lt,dt,vt),this.applyMatrix4(_m1),this}lookAt(lt){return _obj.lookAt(lt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(lt){const dt=[];for(let vt=0,St=lt.length;vt<St;vt++){const Et=lt[vt];dt.push(Et.x,Et.y,Et.z||0)}return this.setAttribute("position",new Float32BufferAttribute(dt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const lt=this.attributes.position,dt=this.morphAttributes.position;if(lt&&lt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(lt!==void 0){if(this.boundingBox.setFromBufferAttribute(lt),dt)for(let vt=0,St=dt.length;vt<St;vt++){const Et=dt[vt];_box$1$1.setFromBufferAttribute(Et),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1$1.min),this.boundingBox.expandByPoint(_box$1$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const lt=this.attributes.position,dt=this.morphAttributes.position;if(lt&&lt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(lt){const vt=this.boundingSphere.center;if(_box$1$1.setFromBufferAttribute(lt),dt)for(let Et=0,Ct=dt.length;Et<Ct;Et++){const At=dt[Et];_boxMorphTargets.setFromBufferAttribute(At),this.morphTargetsRelative?(_vector$8.addVectors(_box$1$1.min,_boxMorphTargets.min),_box$1$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1$1.max,_boxMorphTargets.max),_box$1$1.expandByPoint(_vector$8)):(_box$1$1.expandByPoint(_boxMorphTargets.min),_box$1$1.expandByPoint(_boxMorphTargets.max))}_box$1$1.getCenter(vt);let St=0;for(let Et=0,Ct=lt.count;Et<Ct;Et++)_vector$8.fromBufferAttribute(lt,Et),St=Math.max(St,vt.distanceToSquared(_vector$8));if(dt)for(let Et=0,Ct=dt.length;Et<Ct;Et++){const At=dt[Et],Rt=this.morphTargetsRelative;for(let Dt=0,Nt=At.count;Dt<Nt;Dt++)_vector$8.fromBufferAttribute(At,Dt),Rt&&(_offset.fromBufferAttribute(lt,Dt),_vector$8.add(_offset)),St=Math.max(St,vt.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(St),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const lt=this.index,dt=this.attributes;if(lt===null||dt.position===void 0||dt.normal===void 0||dt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const vt=lt.array,St=dt.position.array,Et=dt.normal.array,Ct=dt.uv.array,At=St.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*At),4));const Rt=this.getAttribute("tangent").array,Dt=[],Nt=[];for(let Pn=0;Pn<At;Pn++)Dt[Pn]=new Vector3,Nt[Pn]=new Vector3;const Ft=new Vector3,Ut=new Vector3,Wt=new Vector3,Zt=new Vector2,Kt=new Vector2,cn=new Vector2,hn=new Vector3,dn=new Vector3;function pn(Pn,zn,An){Ft.fromArray(St,Pn*3),Ut.fromArray(St,zn*3),Wt.fromArray(St,An*3),Zt.fromArray(Ct,Pn*2),Kt.fromArray(Ct,zn*2),cn.fromArray(Ct,An*2),Ut.sub(Ft),Wt.sub(Ft),Kt.sub(Zt),cn.sub(Zt);const Gn=1/(Kt.x*cn.y-cn.x*Kt.y);isFinite(Gn)&&(hn.copy(Ut).multiplyScalar(cn.y).addScaledVector(Wt,-Kt.y).multiplyScalar(Gn),dn.copy(Wt).multiplyScalar(Kt.x).addScaledVector(Ut,-cn.x).multiplyScalar(Gn),Dt[Pn].add(hn),Dt[zn].add(hn),Dt[An].add(hn),Nt[Pn].add(dn),Nt[zn].add(dn),Nt[An].add(dn))}let gn=this.groups;gn.length===0&&(gn=[{start:0,count:vt.length}]);for(let Pn=0,zn=gn.length;Pn<zn;++Pn){const An=gn[Pn],Gn=An.start,xn=An.count;for(let Qn=Gn,qn=Gn+xn;Qn<qn;Qn+=3)pn(vt[Qn+0],vt[Qn+1],vt[Qn+2])}const vn=new Vector3,bn=new Vector3,$n=new Vector3,Tn=new Vector3;function In(Pn){$n.fromArray(Et,Pn*3),Tn.copy($n);const zn=Dt[Pn];vn.copy(zn),vn.sub($n.multiplyScalar($n.dot(zn))).normalize(),bn.crossVectors(Tn,zn);const Gn=bn.dot(Nt[Pn])<0?-1:1;Rt[Pn*4]=vn.x,Rt[Pn*4+1]=vn.y,Rt[Pn*4+2]=vn.z,Rt[Pn*4+3]=Gn}for(let Pn=0,zn=gn.length;Pn<zn;++Pn){const An=gn[Pn],Gn=An.start,xn=An.count;for(let Qn=Gn,qn=Gn+xn;Qn<qn;Qn+=3)In(vt[Qn+0]),In(vt[Qn+1]),In(vt[Qn+2])}}computeVertexNormals(){const lt=this.index,dt=this.getAttribute("position");if(dt!==void 0){let vt=this.getAttribute("normal");if(vt===void 0)vt=new BufferAttribute(new Float32Array(dt.count*3),3),this.setAttribute("normal",vt);else for(let Ut=0,Wt=vt.count;Ut<Wt;Ut++)vt.setXYZ(Ut,0,0,0);const St=new Vector3,Et=new Vector3,Ct=new Vector3,At=new Vector3,Rt=new Vector3,Dt=new Vector3,Nt=new Vector3,Ft=new Vector3;if(lt)for(let Ut=0,Wt=lt.count;Ut<Wt;Ut+=3){const Zt=lt.getX(Ut+0),Kt=lt.getX(Ut+1),cn=lt.getX(Ut+2);St.fromBufferAttribute(dt,Zt),Et.fromBufferAttribute(dt,Kt),Ct.fromBufferAttribute(dt,cn),Nt.subVectors(Ct,Et),Ft.subVectors(St,Et),Nt.cross(Ft),At.fromBufferAttribute(vt,Zt),Rt.fromBufferAttribute(vt,Kt),Dt.fromBufferAttribute(vt,cn),At.add(Nt),Rt.add(Nt),Dt.add(Nt),vt.setXYZ(Zt,At.x,At.y,At.z),vt.setXYZ(Kt,Rt.x,Rt.y,Rt.z),vt.setXYZ(cn,Dt.x,Dt.y,Dt.z)}else for(let Ut=0,Wt=dt.count;Ut<Wt;Ut+=3)St.fromBufferAttribute(dt,Ut+0),Et.fromBufferAttribute(dt,Ut+1),Ct.fromBufferAttribute(dt,Ut+2),Nt.subVectors(Ct,Et),Ft.subVectors(St,Et),Nt.cross(Ft),vt.setXYZ(Ut+0,Nt.x,Nt.y,Nt.z),vt.setXYZ(Ut+1,Nt.x,Nt.y,Nt.z),vt.setXYZ(Ut+2,Nt.x,Nt.y,Nt.z);this.normalizeNormals(),vt.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const lt=this.attributes.normal;for(let dt=0,vt=lt.count;dt<vt;dt++)_vector$8.fromBufferAttribute(lt,dt),_vector$8.normalize(),lt.setXYZ(dt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function lt(At,Rt){const Dt=At.array,Nt=At.itemSize,Ft=At.normalized,Ut=new Dt.constructor(Rt.length*Nt);let Wt=0,Zt=0;for(let Kt=0,cn=Rt.length;Kt<cn;Kt++){At.isInterleavedBufferAttribute?Wt=Rt[Kt]*At.data.stride+At.offset:Wt=Rt[Kt]*Nt;for(let hn=0;hn<Nt;hn++)Ut[Zt++]=Dt[Wt++]}return new BufferAttribute(Ut,Nt,Ft)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const dt=new BufferGeometry,vt=this.index.array,St=this.attributes;for(const At in St){const Rt=St[At],Dt=lt(Rt,vt);dt.setAttribute(At,Dt)}const Et=this.morphAttributes;for(const At in Et){const Rt=[],Dt=Et[At];for(let Nt=0,Ft=Dt.length;Nt<Ft;Nt++){const Ut=Dt[Nt],Wt=lt(Ut,vt);Rt.push(Wt)}dt.morphAttributes[At]=Rt}dt.morphTargetsRelative=this.morphTargetsRelative;const Ct=this.groups;for(let At=0,Rt=Ct.length;At<Rt;At++){const Dt=Ct[At];dt.addGroup(Dt.start,Dt.count,Dt.materialIndex)}return dt}toJSON(){const lt={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(lt.uuid=this.uuid,lt.type=this.type,this.name!==""&&(lt.name=this.name),Object.keys(this.userData).length>0&&(lt.userData=this.userData),this.parameters!==void 0){const Rt=this.parameters;for(const Dt in Rt)Rt[Dt]!==void 0&&(lt[Dt]=Rt[Dt]);return lt}lt.data={attributes:{}};const dt=this.index;dt!==null&&(lt.data.index={type:dt.array.constructor.name,array:Array.prototype.slice.call(dt.array)});const vt=this.attributes;for(const Rt in vt){const Dt=vt[Rt];lt.data.attributes[Rt]=Dt.toJSON(lt.data)}const St={};let Et=!1;for(const Rt in this.morphAttributes){const Dt=this.morphAttributes[Rt],Nt=[];for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft++){const Wt=Dt[Ft];Nt.push(Wt.toJSON(lt.data))}Nt.length>0&&(St[Rt]=Nt,Et=!0)}Et&&(lt.data.morphAttributes=St,lt.data.morphTargetsRelative=this.morphTargetsRelative);const Ct=this.groups;Ct.length>0&&(lt.data.groups=JSON.parse(JSON.stringify(Ct)));const At=this.boundingSphere;return At!==null&&(lt.data.boundingSphere={center:At.center.toArray(),radius:At.radius}),lt}clone(){return new this.constructor().copy(this)}copy(lt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const dt={};this.name=lt.name;const vt=lt.index;vt!==null&&this.setIndex(vt.clone(dt));const St=lt.attributes;for(const Dt in St){const Nt=St[Dt];this.setAttribute(Dt,Nt.clone(dt))}const Et=lt.morphAttributes;for(const Dt in Et){const Nt=[],Ft=Et[Dt];for(let Ut=0,Wt=Ft.length;Ut<Wt;Ut++)Nt.push(Ft[Ut].clone(dt));this.morphAttributes[Dt]=Nt}this.morphTargetsRelative=lt.morphTargetsRelative;const Ct=lt.groups;for(let Dt=0,Nt=Ct.length;Dt<Nt;Dt++){const Ft=Ct[Dt];this.addGroup(Ft.start,Ft.count,Ft.materialIndex)}const At=lt.boundingBox;At!==null&&(this.boundingBox=At.clone());const Rt=lt.boundingSphere;return Rt!==null&&(this.boundingSphere=Rt.clone()),this.drawRange.start=lt.drawRange.start,this.drawRange.count=lt.drawRange.count,this.userData=lt.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(lt=new BufferGeometry,dt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),lt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=lt.morphTargetInfluences.slice()),lt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},lt.morphTargetDictionary)),this.material=lt.material,this.geometry=lt.geometry,this}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const St=dt[vt[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=St.length;Et<Ct;Et++){const At=St[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Et}}}}getVertexPosition(lt,dt){const vt=this.geometry,St=vt.attributes.position,Et=vt.morphAttributes.position,Ct=vt.morphTargetsRelative;dt.fromBufferAttribute(St,lt);const At=this.morphTargetInfluences;if(Et&&At){_morphA.set(0,0,0);for(let Rt=0,Dt=Et.length;Rt<Dt;Rt++){const Nt=At[Rt],Ft=Et[Rt];Nt!==0&&(_tempA.fromBufferAttribute(Ft,lt),Ct?_morphA.addScaledVector(_tempA,Nt):_morphA.addScaledVector(_tempA.sub(dt),Nt))}dt.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(lt,dt),dt}raycast(lt,dt){const vt=this.geometry,St=this.material,Et=this.matrixWorld;if(St===void 0||(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$3.copy(vt.boundingSphere),_sphere$3.applyMatrix4(Et),_ray$2.copy(lt.ray).recast(lt.near),_sphere$3.containsPoint(_ray$2.origin)===!1&&(_ray$2.intersectSphere(_sphere$3,_sphereHitAt)===null||_ray$2.origin.distanceToSquared(_sphereHitAt)>(lt.far-lt.near)**2))||(_inverseMatrix$2.copy(Et).invert(),_ray$2.copy(lt.ray).applyMatrix4(_inverseMatrix$2),vt.boundingBox!==null&&_ray$2.intersectsBox(vt.boundingBox)===!1))return;let Ct;const At=vt.index,Rt=vt.attributes.position,Dt=vt.attributes.uv,Nt=vt.attributes.uv2,Ft=vt.groups,Ut=vt.drawRange;if(At!==null)if(Array.isArray(St))for(let Wt=0,Zt=Ft.length;Wt<Zt;Wt++){const Kt=Ft[Wt],cn=St[Kt.materialIndex],hn=Math.max(Kt.start,Ut.start),dn=Math.min(At.count,Math.min(Kt.start+Kt.count,Ut.start+Ut.count));for(let pn=hn,gn=dn;pn<gn;pn+=3){const vn=At.getX(pn),bn=At.getX(pn+1),$n=At.getX(pn+2);Ct=checkBufferGeometryIntersection(this,cn,lt,_ray$2,Dt,Nt,vn,bn,$n),Ct&&(Ct.faceIndex=Math.floor(pn/3),Ct.face.materialIndex=Kt.materialIndex,dt.push(Ct))}}else{const Wt=Math.max(0,Ut.start),Zt=Math.min(At.count,Ut.start+Ut.count);for(let Kt=Wt,cn=Zt;Kt<cn;Kt+=3){const hn=At.getX(Kt),dn=At.getX(Kt+1),pn=At.getX(Kt+2);Ct=checkBufferGeometryIntersection(this,St,lt,_ray$2,Dt,Nt,hn,dn,pn),Ct&&(Ct.faceIndex=Math.floor(Kt/3),dt.push(Ct))}}else if(Rt!==void 0)if(Array.isArray(St))for(let Wt=0,Zt=Ft.length;Wt<Zt;Wt++){const Kt=Ft[Wt],cn=St[Kt.materialIndex],hn=Math.max(Kt.start,Ut.start),dn=Math.min(Rt.count,Math.min(Kt.start+Kt.count,Ut.start+Ut.count));for(let pn=hn,gn=dn;pn<gn;pn+=3){const vn=pn,bn=pn+1,$n=pn+2;Ct=checkBufferGeometryIntersection(this,cn,lt,_ray$2,Dt,Nt,vn,bn,$n),Ct&&(Ct.faceIndex=Math.floor(pn/3),Ct.face.materialIndex=Kt.materialIndex,dt.push(Ct))}}else{const Wt=Math.max(0,Ut.start),Zt=Math.min(Rt.count,Ut.start+Ut.count);for(let Kt=Wt,cn=Zt;Kt<cn;Kt+=3){const hn=Kt,dn=Kt+1,pn=Kt+2;Ct=checkBufferGeometryIntersection(this,St,lt,_ray$2,Dt,Nt,hn,dn,pn),Ct&&(Ct.faceIndex=Math.floor(Kt/3),dt.push(Ct))}}}}function checkIntersection(ft,lt,dt,vt,St,Et,Ct,At){let Rt;if(lt.side===BackSide?Rt=vt.intersectTriangle(Ct,Et,St,!0,At):Rt=vt.intersectTriangle(St,Et,Ct,lt.side===FrontSide,At),Rt===null)return null;_intersectionPointWorld.copy(At),_intersectionPointWorld.applyMatrix4(ft.matrixWorld);const Dt=dt.ray.origin.distanceTo(_intersectionPointWorld);return Dt<dt.near||Dt>dt.far?null:{distance:Dt,point:_intersectionPointWorld.clone(),object:ft}}function checkBufferGeometryIntersection(ft,lt,dt,vt,St,Et,Ct,At,Rt){ft.getVertexPosition(Ct,_vA$1),ft.getVertexPosition(At,_vB$1),ft.getVertexPosition(Rt,_vC$1);const Dt=checkIntersection(ft,lt,dt,vt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(Dt){St&&(_uvA$1.fromBufferAttribute(St,Ct),_uvB$1.fromBufferAttribute(St,At),_uvC$1.fromBufferAttribute(St,Rt),Dt.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),Et&&(_uvA$1.fromBufferAttribute(Et,Ct),_uvB$1.fromBufferAttribute(Et,At),_uvC$1.fromBufferAttribute(Et,Rt),Dt.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const Nt={a:Ct,b:At,c:Rt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Nt.normal),Dt.face=Nt}return Dt}class BoxGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,St=1,Et=1,Ct=1){super(),this.type="BoxGeometry",this.parameters={width:lt,height:dt,depth:vt,widthSegments:St,heightSegments:Et,depthSegments:Ct};const At=this;St=Math.floor(St),Et=Math.floor(Et),Ct=Math.floor(Ct);const Rt=[],Dt=[],Nt=[],Ft=[];let Ut=0,Wt=0;Zt("z","y","x",-1,-1,vt,dt,lt,Ct,Et,0),Zt("z","y","x",1,-1,vt,dt,-lt,Ct,Et,1),Zt("x","z","y",1,1,lt,vt,dt,St,Ct,2),Zt("x","z","y",1,-1,lt,vt,-dt,St,Ct,3),Zt("x","y","z",1,-1,lt,dt,vt,St,Et,4),Zt("x","y","z",-1,-1,lt,dt,-vt,St,Et,5),this.setIndex(Rt),this.setAttribute("position",new Float32BufferAttribute(Dt,3)),this.setAttribute("normal",new Float32BufferAttribute(Nt,3)),this.setAttribute("uv",new Float32BufferAttribute(Ft,2));function Zt(Kt,cn,hn,dn,pn,gn,vn,bn,$n,Tn,In){const Pn=gn/$n,zn=vn/Tn,An=gn/2,Gn=vn/2,xn=bn/2,Qn=$n+1,qn=Tn+1;let nr=0,Un=0;const Nn=new Vector3;for(let jn=0;jn<qn;jn++){const Ln=jn*zn-Gn;for(let Cn=0;Cn<Qn;Cn++){const tr=Cn*Pn-An;Nn[Kt]=tr*dn,Nn[cn]=Ln*pn,Nn[hn]=xn,Dt.push(Nn.x,Nn.y,Nn.z),Nn[Kt]=0,Nn[cn]=0,Nn[hn]=bn>0?1:-1,Nt.push(Nn.x,Nn.y,Nn.z),Ft.push(Cn/$n),Ft.push(1-jn/Tn),nr+=1}}for(let jn=0;jn<Tn;jn++)for(let Ln=0;Ln<$n;Ln++){const Cn=Ut+Ln+Qn*jn,tr=Ut+Ln+Qn*(jn+1),ir=Ut+(Ln+1)+Qn*(jn+1),Zn=Ut+(Ln+1)+Qn*jn;Rt.push(Cn,tr,Zn),Rt.push(tr,ir,Zn),Un+=6}At.addGroup(Wt,Un,In),Wt+=Un,Ut+=nr}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new BoxGeometry(lt.width,lt.height,lt.depth,lt.widthSegments,lt.heightSegments,lt.depthSegments)}}function cloneUniforms(ft){const lt={};for(const dt in ft){lt[dt]={};for(const vt in ft[dt]){const St=ft[dt][vt];St&&(St.isColor||St.isMatrix3||St.isMatrix4||St.isVector2||St.isVector3||St.isVector4||St.isTexture||St.isQuaternion)?lt[dt][vt]=St.clone():Array.isArray(St)?lt[dt][vt]=St.slice():lt[dt][vt]=St}}return lt}function mergeUniforms(ft){const lt={};for(let dt=0;dt<ft.length;dt++){const vt=cloneUniforms(ft[dt]);for(const St in vt)lt[St]=vt[St]}return lt}function cloneUniformsGroups(ft){const lt=[];for(let dt=0;dt<ft.length;dt++)lt.push(ft[dt].clone());return lt}function getUnlitUniformColorSpace(ft){return ft.getRenderTarget()===null&&ft.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(lt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,lt!==void 0&&this.setValues(lt)}copy(lt){return super.copy(lt),this.fragmentShader=lt.fragmentShader,this.vertexShader=lt.vertexShader,this.uniforms=cloneUniforms(lt.uniforms),this.uniformsGroups=cloneUniformsGroups(lt.uniformsGroups),this.defines=Object.assign({},lt.defines),this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.fog=lt.fog,this.lights=lt.lights,this.clipping=lt.clipping,this.extensions=Object.assign({},lt.extensions),this.glslVersion=lt.glslVersion,this}toJSON(lt){const dt=super.toJSON(lt);dt.glslVersion=this.glslVersion,dt.uniforms={};for(const St in this.uniforms){const Ct=this.uniforms[St].value;Ct&&Ct.isTexture?dt.uniforms[St]={type:"t",value:Ct.toJSON(lt).uuid}:Ct&&Ct.isColor?dt.uniforms[St]={type:"c",value:Ct.getHex()}:Ct&&Ct.isVector2?dt.uniforms[St]={type:"v2",value:Ct.toArray()}:Ct&&Ct.isVector3?dt.uniforms[St]={type:"v3",value:Ct.toArray()}:Ct&&Ct.isVector4?dt.uniforms[St]={type:"v4",value:Ct.toArray()}:Ct&&Ct.isMatrix3?dt.uniforms[St]={type:"m3",value:Ct.toArray()}:Ct&&Ct.isMatrix4?dt.uniforms[St]={type:"m4",value:Ct.toArray()}:dt.uniforms[St]={value:Ct}}Object.keys(this.defines).length>0&&(dt.defines=this.defines),dt.vertexShader=this.vertexShader,dt.fragmentShader=this.fragmentShader;const vt={};for(const St in this.extensions)this.extensions[St]===!0&&(vt[St]=!0);return Object.keys(vt).length>0&&(dt.extensions=vt),dt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(lt,dt){return super.copy(lt,dt),this.matrixWorldInverse.copy(lt.matrixWorldInverse),this.projectionMatrix.copy(lt.projectionMatrix),this.projectionMatrixInverse.copy(lt.projectionMatrixInverse),this}getWorldDirection(lt){this.updateWorldMatrix(!0,!1);const dt=this.matrixWorld.elements;return lt.set(-dt[8],-dt[9],-dt[10]).normalize()}updateMatrixWorld(lt){super.updateMatrixWorld(lt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(lt,dt){super.updateWorldMatrix(lt,dt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(lt=50,dt=1,vt=.1,St=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=lt,this.zoom=1,this.near=vt,this.far=St,this.focus=10,this.aspect=dt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(lt,dt){return super.copy(lt,dt),this.fov=lt.fov,this.zoom=lt.zoom,this.near=lt.near,this.far=lt.far,this.focus=lt.focus,this.aspect=lt.aspect,this.view=lt.view===null?null:Object.assign({},lt.view),this.filmGauge=lt.filmGauge,this.filmOffset=lt.filmOffset,this}setFocalLength(lt){const dt=.5*this.getFilmHeight()/lt;this.fov=RAD2DEG*2*Math.atan(dt),this.updateProjectionMatrix()}getFocalLength(){const lt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/lt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(lt,dt,vt,St,Et,Ct){this.aspect=lt/dt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=lt,this.view.fullHeight=dt,this.view.offsetX=vt,this.view.offsetY=St,this.view.width=Et,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const lt=this.near;let dt=lt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,vt=2*dt,St=this.aspect*vt,Et=-.5*St;const Ct=this.view;if(this.view!==null&&this.view.enabled){const Rt=Ct.fullWidth,Dt=Ct.fullHeight;Et+=Ct.offsetX*St/Rt,dt-=Ct.offsetY*vt/Dt,St*=Ct.width/Rt,vt*=Ct.height/Dt}const At=this.filmOffset;At!==0&&(Et+=lt*At/this.getFilmWidth()),this.projectionMatrix.makePerspective(Et,Et+St,dt,dt-vt,lt,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(lt){const dt=super.toJSON(lt);return dt.object.fov=this.fov,dt.object.zoom=this.zoom,dt.object.near=this.near,dt.object.far=this.far,dt.object.focus=this.focus,dt.object.aspect=this.aspect,this.view!==null&&(dt.object.view=Object.assign({},this.view)),dt.object.filmGauge=this.filmGauge,dt.object.filmOffset=this.filmOffset,dt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(lt,dt,vt){super(),this.type="CubeCamera",this.renderTarget=vt;const St=new PerspectiveCamera(fov,aspect,lt,dt);St.layers=this.layers,St.up.set(0,1,0),St.lookAt(1,0,0),this.add(St);const Et=new PerspectiveCamera(fov,aspect,lt,dt);Et.layers=this.layers,Et.up.set(0,1,0),Et.lookAt(-1,0,0),this.add(Et);const Ct=new PerspectiveCamera(fov,aspect,lt,dt);Ct.layers=this.layers,Ct.up.set(0,0,-1),Ct.lookAt(0,1,0),this.add(Ct);const At=new PerspectiveCamera(fov,aspect,lt,dt);At.layers=this.layers,At.up.set(0,0,1),At.lookAt(0,-1,0),this.add(At);const Rt=new PerspectiveCamera(fov,aspect,lt,dt);Rt.layers=this.layers,Rt.up.set(0,1,0),Rt.lookAt(0,0,1),this.add(Rt);const Dt=new PerspectiveCamera(fov,aspect,lt,dt);Dt.layers=this.layers,Dt.up.set(0,1,0),Dt.lookAt(0,0,-1),this.add(Dt)}update(lt,dt){this.parent===null&&this.updateMatrixWorld();const vt=this.renderTarget,[St,Et,Ct,At,Rt,Dt]=this.children,Nt=lt.getRenderTarget(),Ft=lt.toneMapping,Ut=lt.xr.enabled;lt.toneMapping=NoToneMapping,lt.xr.enabled=!1;const Wt=vt.texture.generateMipmaps;vt.texture.generateMipmaps=!1,lt.setRenderTarget(vt,0),lt.render(dt,St),lt.setRenderTarget(vt,1),lt.render(dt,Et),lt.setRenderTarget(vt,2),lt.render(dt,Ct),lt.setRenderTarget(vt,3),lt.render(dt,At),lt.setRenderTarget(vt,4),lt.render(dt,Rt),vt.texture.generateMipmaps=Wt,lt.setRenderTarget(vt,5),lt.render(dt,Dt),lt.setRenderTarget(Nt),lt.toneMapping=Ft,lt.xr.enabled=Ut,vt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt){lt=lt!==void 0?lt:[],dt=dt!==void 0?dt:CubeReflectionMapping,super(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(lt){this.image=lt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt={}){super(lt,lt,dt),this.isWebGLCubeRenderTarget=!0;const vt={width:lt,height:lt,depth:1},St=[vt,vt,vt,vt,vt,vt];this.texture=new CubeTexture(St,dt.mapping,dt.wrapS,dt.wrapT,dt.magFilter,dt.minFilter,dt.format,dt.type,dt.anisotropy,dt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=dt.generateMipmaps!==void 0?dt.generateMipmaps:!1,this.texture.minFilter=dt.minFilter!==void 0?dt.minFilter:LinearFilter}fromEquirectangularTexture(lt,dt){this.texture.type=dt.type,this.texture.encoding=dt.encoding,this.texture.generateMipmaps=dt.generateMipmaps,this.texture.minFilter=dt.minFilter,this.texture.magFilter=dt.magFilter;const vt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},St=new BoxGeometry(5,5,5),Et=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(vt.uniforms),vertexShader:vt.vertexShader,fragmentShader:vt.fragmentShader,side:BackSide,blending:NoBlending});Et.uniforms.tEquirect.value=dt;const Ct=new Mesh(St,Et),At=dt.minFilter;return dt.minFilter===LinearMipmapLinearFilter&&(dt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(lt,Ct),dt.minFilter=At,Ct.geometry.dispose(),Ct.material.dispose(),this}clear(lt,dt,vt,St){const Et=lt.getRenderTarget();for(let Ct=0;Ct<6;Ct++)lt.setRenderTarget(this,Ct),lt.clear(dt,vt,St);lt.setRenderTarget(Et)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(lt=new Vector3(1,0,0),dt=0){this.isPlane=!0,this.normal=lt,this.constant=dt}set(lt,dt){return this.normal.copy(lt),this.constant=dt,this}setComponents(lt,dt,vt,St){return this.normal.set(lt,dt,vt),this.constant=St,this}setFromNormalAndCoplanarPoint(lt,dt){return this.normal.copy(lt),this.constant=-dt.dot(this.normal),this}setFromCoplanarPoints(lt,dt,vt){const St=_vector1.subVectors(vt,dt).cross(_vector2.subVectors(lt,dt)).normalize();return this.setFromNormalAndCoplanarPoint(St,lt),this}copy(lt){return this.normal.copy(lt.normal),this.constant=lt.constant,this}normalize(){const lt=1/this.normal.length();return this.normal.multiplyScalar(lt),this.constant*=lt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(lt){return this.normal.dot(lt)+this.constant}distanceToSphere(lt){return this.distanceToPoint(lt.center)-lt.radius}projectPoint(lt,dt){return dt.copy(lt).addScaledVector(this.normal,-this.distanceToPoint(lt))}intersectLine(lt,dt){const vt=lt.delta(_vector1),St=this.normal.dot(vt);if(St===0)return this.distanceToPoint(lt.start)===0?dt.copy(lt.start):null;const Et=-(lt.start.dot(this.normal)+this.constant)/St;return Et<0||Et>1?null:dt.copy(lt.start).addScaledVector(vt,Et)}intersectsLine(lt){const dt=this.distanceToPoint(lt.start),vt=this.distanceToPoint(lt.end);return dt<0&&vt>0||vt<0&&dt>0}intersectsBox(lt){return lt.intersectsPlane(this)}intersectsSphere(lt){return lt.intersectsPlane(this)}coplanarPoint(lt){return lt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(lt,dt){const vt=dt||_normalMatrix.getNormalMatrix(lt),St=this.coplanarPoint(_vector1).applyMatrix4(lt),Et=this.normal.applyMatrix3(vt).normalize();return this.constant=-St.dot(Et),this}translate(lt){return this.constant-=lt.dot(this.normal),this}equals(lt){return lt.normal.equals(this.normal)&&lt.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$2=new Sphere$1,_vector$7=new Vector3;class Frustum{constructor(lt=new Plane$1,dt=new Plane$1,vt=new Plane$1,St=new Plane$1,Et=new Plane$1,Ct=new Plane$1){this.planes=[lt,dt,vt,St,Et,Ct]}set(lt,dt,vt,St,Et,Ct){const At=this.planes;return At[0].copy(lt),At[1].copy(dt),At[2].copy(vt),At[3].copy(St),At[4].copy(Et),At[5].copy(Ct),this}copy(lt){const dt=this.planes;for(let vt=0;vt<6;vt++)dt[vt].copy(lt.planes[vt]);return this}setFromProjectionMatrix(lt){const dt=this.planes,vt=lt.elements,St=vt[0],Et=vt[1],Ct=vt[2],At=vt[3],Rt=vt[4],Dt=vt[5],Nt=vt[6],Ft=vt[7],Ut=vt[8],Wt=vt[9],Zt=vt[10],Kt=vt[11],cn=vt[12],hn=vt[13],dn=vt[14],pn=vt[15];return dt[0].setComponents(At-St,Ft-Rt,Kt-Ut,pn-cn).normalize(),dt[1].setComponents(At+St,Ft+Rt,Kt+Ut,pn+cn).normalize(),dt[2].setComponents(At+Et,Ft+Dt,Kt+Wt,pn+hn).normalize(),dt[3].setComponents(At-Et,Ft-Dt,Kt-Wt,pn-hn).normalize(),dt[4].setComponents(At-Ct,Ft-Nt,Kt-Zt,pn-dn).normalize(),dt[5].setComponents(At+Ct,Ft+Nt,Kt+Zt,pn+dn).normalize(),this}intersectsObject(lt){const dt=lt.geometry;return dt.boundingSphere===null&&dt.computeBoundingSphere(),_sphere$2.copy(dt.boundingSphere).applyMatrix4(lt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(lt){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(lt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(lt){const dt=this.planes,vt=lt.center,St=-lt.radius;for(let Et=0;Et<6;Et++)if(dt[Et].distanceToPoint(vt)<St)return!1;return!0}intersectsBox(lt){const dt=this.planes;for(let vt=0;vt<6;vt++){const St=dt[vt];if(_vector$7.x=St.normal.x>0?lt.max.x:lt.min.x,_vector$7.y=St.normal.y>0?lt.max.y:lt.min.y,_vector$7.z=St.normal.z>0?lt.max.z:lt.min.z,St.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(lt){const dt=this.planes;for(let vt=0;vt<6;vt++)if(dt[vt].distanceToPoint(lt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let ft=null,lt=!1,dt=null,vt=null;function St(Et,Ct){dt(Et,Ct),vt=ft.requestAnimationFrame(St)}return{start:function(){lt!==!0&&dt!==null&&(vt=ft.requestAnimationFrame(St),lt=!0)},stop:function(){ft.cancelAnimationFrame(vt),lt=!1},setAnimationLoop:function(Et){dt=Et},setContext:function(Et){ft=Et}}}function WebGLAttributes(ft,lt){const dt=lt.isWebGL2,vt=new WeakMap;function St(Dt,Nt){const Ft=Dt.array,Ut=Dt.usage,Wt=ft.createBuffer();ft.bindBuffer(Nt,Wt),ft.bufferData(Nt,Ft,Ut),Dt.onUploadCallback();let Zt;if(Ft instanceof Float32Array)Zt=5126;else if(Ft instanceof Uint16Array)if(Dt.isFloat16BufferAttribute)if(dt)Zt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Zt=5123;else if(Ft instanceof Int16Array)Zt=5122;else if(Ft instanceof Uint32Array)Zt=5125;else if(Ft instanceof Int32Array)Zt=5124;else if(Ft instanceof Int8Array)Zt=5120;else if(Ft instanceof Uint8Array)Zt=5121;else if(Ft instanceof Uint8ClampedArray)Zt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Ft);return{buffer:Wt,type:Zt,bytesPerElement:Ft.BYTES_PER_ELEMENT,version:Dt.version}}function Et(Dt,Nt,Ft){const Ut=Nt.array,Wt=Nt.updateRange;ft.bindBuffer(Ft,Dt),Wt.count===-1?ft.bufferSubData(Ft,0,Ut):(dt?ft.bufferSubData(Ft,Wt.offset*Ut.BYTES_PER_ELEMENT,Ut,Wt.offset,Wt.count):ft.bufferSubData(Ft,Wt.offset*Ut.BYTES_PER_ELEMENT,Ut.subarray(Wt.offset,Wt.offset+Wt.count)),Wt.count=-1),Nt.onUploadCallback()}function Ct(Dt){return Dt.isInterleavedBufferAttribute&&(Dt=Dt.data),vt.get(Dt)}function At(Dt){Dt.isInterleavedBufferAttribute&&(Dt=Dt.data);const Nt=vt.get(Dt);Nt&&(ft.deleteBuffer(Nt.buffer),vt.delete(Dt))}function Rt(Dt,Nt){if(Dt.isGLBufferAttribute){const Ut=vt.get(Dt);(!Ut||Ut.version<Dt.version)&&vt.set(Dt,{buffer:Dt.buffer,type:Dt.type,bytesPerElement:Dt.elementSize,version:Dt.version});return}Dt.isInterleavedBufferAttribute&&(Dt=Dt.data);const Ft=vt.get(Dt);Ft===void 0?vt.set(Dt,St(Dt,Nt)):Ft.version<Dt.version&&(Et(Ft.buffer,Dt,Nt),Ft.version=Dt.version)}return{get:Ct,remove:At,update:Rt}}class PlaneGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,St=1){super(),this.type="PlaneGeometry",this.parameters={width:lt,height:dt,widthSegments:vt,heightSegments:St};const Et=lt/2,Ct=dt/2,At=Math.floor(vt),Rt=Math.floor(St),Dt=At+1,Nt=Rt+1,Ft=lt/At,Ut=dt/Rt,Wt=[],Zt=[],Kt=[],cn=[];for(let hn=0;hn<Nt;hn++){const dn=hn*Ut-Ct;for(let pn=0;pn<Dt;pn++){const gn=pn*Ft-Et;Zt.push(gn,-dn,0),Kt.push(0,0,1),cn.push(pn/At),cn.push(1-hn/Rt)}}for(let hn=0;hn<Rt;hn++)for(let dn=0;dn<At;dn++){const pn=dn+Dt*hn,gn=dn+Dt*(hn+1),vn=dn+1+Dt*(hn+1),bn=dn+1+Dt*hn;Wt.push(pn,gn,bn),Wt.push(gn,vn,bn)}this.setIndex(Wt),this.setAttribute("position",new Float32BufferAttribute(Zt,3)),this.setAttribute("normal",new Float32BufferAttribute(Kt,3)),this.setAttribute("uv",new Float32BufferAttribute(cn,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new PlaneGeometry(lt.width,lt.height,lt.widthSegments,lt.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(ft,lt,dt,vt,St,Et,Ct){const At=new Color(0);let Rt=Et===!0?0:1,Dt,Nt,Ft=null,Ut=0,Wt=null;function Zt(cn,hn){let dn=!1,pn=hn.isScene===!0?hn.background:null;pn&&pn.isTexture&&(pn=(hn.backgroundBlurriness>0?dt:lt).get(pn));const gn=ft.xr,vn=gn.getSession&&gn.getSession();vn&&vn.environmentBlendMode==="additive"&&(pn=null),pn===null?Kt(At,Rt):pn&&pn.isColor&&(Kt(pn,1),dn=!0),(ft.autoClear||dn)&&ft.clear(ft.autoClearColor,ft.autoClearDepth,ft.autoClearStencil),pn&&(pn.isCubeTexture||pn.mapping===CubeUVReflectionMapping)?(Nt===void 0&&(Nt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Nt.geometry.deleteAttribute("normal"),Nt.geometry.deleteAttribute("uv"),Nt.onBeforeRender=function(bn,$n,Tn){this.matrixWorld.copyPosition(Tn.matrixWorld)},Object.defineProperty(Nt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),St.update(Nt)),Nt.material.uniforms.envMap.value=pn,Nt.material.uniforms.flipEnvMap.value=pn.isCubeTexture&&pn.isRenderTargetTexture===!1?-1:1,Nt.material.uniforms.backgroundBlurriness.value=hn.backgroundBlurriness,Nt.material.uniforms.backgroundIntensity.value=hn.backgroundIntensity,Nt.material.toneMapped=pn.encoding!==sRGBEncoding,(Ft!==pn||Ut!==pn.version||Wt!==ft.toneMapping)&&(Nt.material.needsUpdate=!0,Ft=pn,Ut=pn.version,Wt=ft.toneMapping),Nt.layers.enableAll(),cn.unshift(Nt,Nt.geometry,Nt.material,0,0,null)):pn&&pn.isTexture&&(Dt===void 0&&(Dt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Dt.geometry.deleteAttribute("normal"),Object.defineProperty(Dt.material,"map",{get:function(){return this.uniforms.t2D.value}}),St.update(Dt)),Dt.material.uniforms.t2D.value=pn,Dt.material.uniforms.backgroundIntensity.value=hn.backgroundIntensity,Dt.material.toneMapped=pn.encoding!==sRGBEncoding,pn.matrixAutoUpdate===!0&&pn.updateMatrix(),Dt.material.uniforms.uvTransform.value.copy(pn.matrix),(Ft!==pn||Ut!==pn.version||Wt!==ft.toneMapping)&&(Dt.material.needsUpdate=!0,Ft=pn,Ut=pn.version,Wt=ft.toneMapping),Dt.layers.enableAll(),cn.unshift(Dt,Dt.geometry,Dt.material,0,0,null))}function Kt(cn,hn){cn.getRGB(_rgb,getUnlitUniformColorSpace(ft)),vt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,hn,Ct)}return{getClearColor:function(){return At},setClearColor:function(cn,hn=1){At.set(cn),Rt=hn,Kt(At,Rt)},getClearAlpha:function(){return Rt},setClearAlpha:function(cn){Rt=cn,Kt(At,Rt)},render:Zt}}function WebGLBindingStates(ft,lt,dt,vt){const St=ft.getParameter(34921),Et=vt.isWebGL2?null:lt.get("OES_vertex_array_object"),Ct=vt.isWebGL2||Et!==null,At={},Rt=cn(null);let Dt=Rt,Nt=!1;function Ft(xn,Qn,qn,nr,Un){let Nn=!1;if(Ct){const jn=Kt(nr,qn,Qn);Dt!==jn&&(Dt=jn,Wt(Dt.object)),Nn=hn(xn,nr,qn,Un),Nn&&dn(xn,nr,qn,Un)}else{const jn=Qn.wireframe===!0;(Dt.geometry!==nr.id||Dt.program!==qn.id||Dt.wireframe!==jn)&&(Dt.geometry=nr.id,Dt.program=qn.id,Dt.wireframe=jn,Nn=!0)}Un!==null&&dt.update(Un,34963),(Nn||Nt)&&(Nt=!1,Tn(xn,Qn,qn,nr),Un!==null&&ft.bindBuffer(34963,dt.get(Un).buffer))}function Ut(){return vt.isWebGL2?ft.createVertexArray():Et.createVertexArrayOES()}function Wt(xn){return vt.isWebGL2?ft.bindVertexArray(xn):Et.bindVertexArrayOES(xn)}function Zt(xn){return vt.isWebGL2?ft.deleteVertexArray(xn):Et.deleteVertexArrayOES(xn)}function Kt(xn,Qn,qn){const nr=qn.wireframe===!0;let Un=At[xn.id];Un===void 0&&(Un={},At[xn.id]=Un);let Nn=Un[Qn.id];Nn===void 0&&(Nn={},Un[Qn.id]=Nn);let jn=Nn[nr];return jn===void 0&&(jn=cn(Ut()),Nn[nr]=jn),jn}function cn(xn){const Qn=[],qn=[],nr=[];for(let Un=0;Un<St;Un++)Qn[Un]=0,qn[Un]=0,nr[Un]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Qn,enabledAttributes:qn,attributeDivisors:nr,object:xn,attributes:{},index:null}}function hn(xn,Qn,qn,nr){const Un=Dt.attributes,Nn=Qn.attributes;let jn=0;const Ln=qn.getAttributes();for(const Cn in Ln)if(Ln[Cn].location>=0){const ir=Un[Cn];let Zn=Nn[Cn];if(Zn===void 0&&(Cn==="instanceMatrix"&&xn.instanceMatrix&&(Zn=xn.instanceMatrix),Cn==="instanceColor"&&xn.instanceColor&&(Zn=xn.instanceColor)),ir===void 0||ir.attribute!==Zn||Zn&&ir.data!==Zn.data)return!0;jn++}return Dt.attributesNum!==jn||Dt.index!==nr}function dn(xn,Qn,qn,nr){const Un={},Nn=Qn.attributes;let jn=0;const Ln=qn.getAttributes();for(const Cn in Ln)if(Ln[Cn].location>=0){let ir=Nn[Cn];ir===void 0&&(Cn==="instanceMatrix"&&xn.instanceMatrix&&(ir=xn.instanceMatrix),Cn==="instanceColor"&&xn.instanceColor&&(ir=xn.instanceColor));const Zn={};Zn.attribute=ir,ir&&ir.data&&(Zn.data=ir.data),Un[Cn]=Zn,jn++}Dt.attributes=Un,Dt.attributesNum=jn,Dt.index=nr}function pn(){const xn=Dt.newAttributes;for(let Qn=0,qn=xn.length;Qn<qn;Qn++)xn[Qn]=0}function gn(xn){vn(xn,0)}function vn(xn,Qn){const qn=Dt.newAttributes,nr=Dt.enabledAttributes,Un=Dt.attributeDivisors;qn[xn]=1,nr[xn]===0&&(ft.enableVertexAttribArray(xn),nr[xn]=1),Un[xn]!==Qn&&((vt.isWebGL2?ft:lt.get("ANGLE_instanced_arrays"))[vt.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](xn,Qn),Un[xn]=Qn)}function bn(){const xn=Dt.newAttributes,Qn=Dt.enabledAttributes;for(let qn=0,nr=Qn.length;qn<nr;qn++)Qn[qn]!==xn[qn]&&(ft.disableVertexAttribArray(qn),Qn[qn]=0)}function $n(xn,Qn,qn,nr,Un,Nn){vt.isWebGL2===!0&&(qn===5124||qn===5125)?ft.vertexAttribIPointer(xn,Qn,qn,Un,Nn):ft.vertexAttribPointer(xn,Qn,qn,nr,Un,Nn)}function Tn(xn,Qn,qn,nr){if(vt.isWebGL2===!1&&(xn.isInstancedMesh||nr.isInstancedBufferGeometry)&&lt.get("ANGLE_instanced_arrays")===null)return;pn();const Un=nr.attributes,Nn=qn.getAttributes(),jn=Qn.defaultAttributeValues;for(const Ln in Nn){const Cn=Nn[Ln];if(Cn.location>=0){let tr=Un[Ln];if(tr===void 0&&(Ln==="instanceMatrix"&&xn.instanceMatrix&&(tr=xn.instanceMatrix),Ln==="instanceColor"&&xn.instanceColor&&(tr=xn.instanceColor)),tr!==void 0){const ir=tr.normalized,Zn=tr.itemSize,br=dt.get(tr);if(br===void 0)continue;const fr=br.buffer,Or=br.type,Pr=br.bytesPerElement;if(tr.isInterleavedBufferAttribute){const zr=tr.data,Dr=zr.stride,_r=tr.offset;if(zr.isInstancedInterleavedBuffer){for(let Nr=0;Nr<Cn.locationSize;Nr++)vn(Cn.location+Nr,zr.meshPerAttribute);xn.isInstancedMesh!==!0&&nr._maxInstanceCount===void 0&&(nr._maxInstanceCount=zr.meshPerAttribute*zr.count)}else for(let Nr=0;Nr<Cn.locationSize;Nr++)gn(Cn.location+Nr);ft.bindBuffer(34962,fr);for(let Nr=0;Nr<Cn.locationSize;Nr++)$n(Cn.location+Nr,Zn/Cn.locationSize,Or,ir,Dr*Pr,(_r+Zn/Cn.locationSize*Nr)*Pr)}else{if(tr.isInstancedBufferAttribute){for(let zr=0;zr<Cn.locationSize;zr++)vn(Cn.location+zr,tr.meshPerAttribute);xn.isInstancedMesh!==!0&&nr._maxInstanceCount===void 0&&(nr._maxInstanceCount=tr.meshPerAttribute*tr.count)}else for(let zr=0;zr<Cn.locationSize;zr++)gn(Cn.location+zr);ft.bindBuffer(34962,fr);for(let zr=0;zr<Cn.locationSize;zr++)$n(Cn.location+zr,Zn/Cn.locationSize,Or,ir,Zn*Pr,Zn/Cn.locationSize*zr*Pr)}}else if(jn!==void 0){const ir=jn[Ln];if(ir!==void 0)switch(ir.length){case 2:ft.vertexAttrib2fv(Cn.location,ir);break;case 3:ft.vertexAttrib3fv(Cn.location,ir);break;case 4:ft.vertexAttrib4fv(Cn.location,ir);break;default:ft.vertexAttrib1fv(Cn.location,ir)}}}}bn()}function In(){An();for(const xn in At){const Qn=At[xn];for(const qn in Qn){const nr=Qn[qn];for(const Un in nr)Zt(nr[Un].object),delete nr[Un];delete Qn[qn]}delete At[xn]}}function Pn(xn){if(At[xn.id]===void 0)return;const Qn=At[xn.id];for(const qn in Qn){const nr=Qn[qn];for(const Un in nr)Zt(nr[Un].object),delete nr[Un];delete Qn[qn]}delete At[xn.id]}function zn(xn){for(const Qn in At){const qn=At[Qn];if(qn[xn.id]===void 0)continue;const nr=qn[xn.id];for(const Un in nr)Zt(nr[Un].object),delete nr[Un];delete qn[xn.id]}}function An(){Gn(),Nt=!0,Dt!==Rt&&(Dt=Rt,Wt(Dt.object))}function Gn(){Rt.geometry=null,Rt.program=null,Rt.wireframe=!1}return{setup:Ft,reset:An,resetDefaultState:Gn,dispose:In,releaseStatesOfGeometry:Pn,releaseStatesOfProgram:zn,initAttributes:pn,enableAttribute:gn,disableUnusedAttributes:bn}}function WebGLBufferRenderer(ft,lt,dt,vt){const St=vt.isWebGL2;let Et;function Ct(Dt){Et=Dt}function At(Dt,Nt){ft.drawArrays(Et,Dt,Nt),dt.update(Nt,Et,1)}function Rt(Dt,Nt,Ft){if(Ft===0)return;let Ut,Wt;if(St)Ut=ft,Wt="drawArraysInstanced";else if(Ut=lt.get("ANGLE_instanced_arrays"),Wt="drawArraysInstancedANGLE",Ut===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ut[Wt](Et,Dt,Nt,Ft),dt.update(Nt,Et,Ft)}this.setMode=Ct,this.render=At,this.renderInstances=Rt}function WebGLCapabilities(ft,lt,dt){let vt;function St(){if(vt!==void 0)return vt;if(lt.has("EXT_texture_filter_anisotropic")===!0){const $n=lt.get("EXT_texture_filter_anisotropic");vt=ft.getParameter($n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else vt=0;return vt}function Et($n){if($n==="highp"){if(ft.getShaderPrecisionFormat(35633,36338).precision>0&&ft.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";$n="mediump"}return $n==="mediump"&&ft.getShaderPrecisionFormat(35633,36337).precision>0&&ft.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const Ct=typeof WebGL2RenderingContext<"u"&&ft instanceof WebGL2RenderingContext;let At=dt.precision!==void 0?dt.precision:"highp";const Rt=Et(At);Rt!==At&&(console.warn("THREE.WebGLRenderer:",At,"not supported, using",Rt,"instead."),At=Rt);const Dt=Ct||lt.has("WEBGL_draw_buffers"),Nt=dt.logarithmicDepthBuffer===!0,Ft=ft.getParameter(34930),Ut=ft.getParameter(35660),Wt=ft.getParameter(3379),Zt=ft.getParameter(34076),Kt=ft.getParameter(34921),cn=ft.getParameter(36347),hn=ft.getParameter(36348),dn=ft.getParameter(36349),pn=Ut>0,gn=Ct||lt.has("OES_texture_float"),vn=pn&&gn,bn=Ct?ft.getParameter(36183):0;return{isWebGL2:Ct,drawBuffers:Dt,getMaxAnisotropy:St,getMaxPrecision:Et,precision:At,logarithmicDepthBuffer:Nt,maxTextures:Ft,maxVertexTextures:Ut,maxTextureSize:Wt,maxCubemapSize:Zt,maxAttributes:Kt,maxVertexUniforms:cn,maxVaryings:hn,maxFragmentUniforms:dn,vertexTextures:pn,floatFragmentTextures:gn,floatVertexTextures:vn,maxSamples:bn}}function WebGLClipping(ft){const lt=this;let dt=null,vt=0,St=!1,Et=!1;const Ct=new Plane$1,At=new Matrix3,Rt={value:null,needsUpdate:!1};this.uniform=Rt,this.numPlanes=0,this.numIntersection=0,this.init=function(Ft,Ut){const Wt=Ft.length!==0||Ut||vt!==0||St;return St=Ut,vt=Ft.length,Wt},this.beginShadows=function(){Et=!0,Nt(null)},this.endShadows=function(){Et=!1},this.setGlobalState=function(Ft,Ut){dt=Nt(Ft,Ut,0)},this.setState=function(Ft,Ut,Wt){const Zt=Ft.clippingPlanes,Kt=Ft.clipIntersection,cn=Ft.clipShadows,hn=ft.get(Ft);if(!St||Zt===null||Zt.length===0||Et&&!cn)Et?Nt(null):Dt();else{const dn=Et?0:vt,pn=dn*4;let gn=hn.clippingState||null;Rt.value=gn,gn=Nt(Zt,Ut,pn,Wt);for(let vn=0;vn!==pn;++vn)gn[vn]=dt[vn];hn.clippingState=gn,this.numIntersection=Kt?this.numPlanes:0,this.numPlanes+=dn}};function Dt(){Rt.value!==dt&&(Rt.value=dt,Rt.needsUpdate=vt>0),lt.numPlanes=vt,lt.numIntersection=0}function Nt(Ft,Ut,Wt,Zt){const Kt=Ft!==null?Ft.length:0;let cn=null;if(Kt!==0){if(cn=Rt.value,Zt!==!0||cn===null){const hn=Wt+Kt*4,dn=Ut.matrixWorldInverse;At.getNormalMatrix(dn),(cn===null||cn.length<hn)&&(cn=new Float32Array(hn));for(let pn=0,gn=Wt;pn!==Kt;++pn,gn+=4)Ct.copy(Ft[pn]).applyMatrix4(dn,At),Ct.normal.toArray(cn,gn),cn[gn+3]=Ct.constant}Rt.value=cn,Rt.needsUpdate=!0}return lt.numPlanes=Kt,lt.numIntersection=0,cn}}function WebGLCubeMaps(ft){let lt=new WeakMap;function dt(Ct,At){return At===EquirectangularReflectionMapping?Ct.mapping=CubeReflectionMapping:At===EquirectangularRefractionMapping&&(Ct.mapping=CubeRefractionMapping),Ct}function vt(Ct){if(Ct&&Ct.isTexture&&Ct.isRenderTargetTexture===!1){const At=Ct.mapping;if(At===EquirectangularReflectionMapping||At===EquirectangularRefractionMapping)if(lt.has(Ct)){const Rt=lt.get(Ct).texture;return dt(Rt,Ct.mapping)}else{const Rt=Ct.image;if(Rt&&Rt.height>0){const Dt=new WebGLCubeRenderTarget(Rt.height/2);return Dt.fromEquirectangularTexture(ft,Ct),lt.set(Ct,Dt),Ct.addEventListener("dispose",St),dt(Dt.texture,Ct.mapping)}else return null}}return Ct}function St(Ct){const At=Ct.target;At.removeEventListener("dispose",St);const Rt=lt.get(At);Rt!==void 0&&(lt.delete(At),Rt.dispose())}function Et(){lt=new WeakMap}return{get:vt,dispose:Et}}let OrthographicCamera$1=class extends Camera{constructor(lt=-1,dt=1,vt=1,St=-1,Et=.1,Ct=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=lt,this.right=dt,this.top=vt,this.bottom=St,this.near=Et,this.far=Ct,this.updateProjectionMatrix()}copy(lt,dt){return super.copy(lt,dt),this.left=lt.left,this.right=lt.right,this.top=lt.top,this.bottom=lt.bottom,this.near=lt.near,this.far=lt.far,this.zoom=lt.zoom,this.view=lt.view===null?null:Object.assign({},lt.view),this}setViewOffset(lt,dt,vt,St,Et,Ct){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=lt,this.view.fullHeight=dt,this.view.offsetX=vt,this.view.offsetY=St,this.view.width=Et,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const lt=(this.right-this.left)/(2*this.zoom),dt=(this.top-this.bottom)/(2*this.zoom),vt=(this.right+this.left)/2,St=(this.top+this.bottom)/2;let Et=vt-lt,Ct=vt+lt,At=St+dt,Rt=St-dt;if(this.view!==null&&this.view.enabled){const Dt=(this.right-this.left)/this.view.fullWidth/this.zoom,Nt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Et+=Dt*this.view.offsetX,Ct=Et+Dt*this.view.width,At-=Nt*this.view.offsetY,Rt=At-Nt*this.view.height}this.projectionMatrix.makeOrthographic(Et,Ct,At,Rt,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(lt){const dt=super.toJSON(lt);return dt.object.zoom=this.zoom,dt.object.left=this.left,dt.object.right=this.right,dt.object.top=this.top,dt.object.bottom=this.bottom,dt.object.near=this.near,dt.object.far=this.far,this.view!==null&&(dt.object.view=Object.assign({},this.view)),dt}};const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera$1,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(lt){this._renderer=lt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(lt,dt=0,vt=.1,St=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const Et=this._allocateTargets();return Et.depthBuffer=!0,this._sceneToCubeUV(lt,vt,St,Et),dt>0&&this._blur(Et,0,0,dt),this._applyPMREM(Et),this._cleanup(Et),Et}fromEquirectangular(lt,dt=null){return this._fromTexture(lt,dt)}fromCubemap(lt,dt=null){return this._fromTexture(lt,dt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(lt){this._lodMax=Math.floor(Math.log2(lt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let lt=0;lt<this._lodPlanes.length;lt++)this._lodPlanes[lt].dispose()}_cleanup(lt){this._renderer.setRenderTarget(_oldTarget),lt.scissorTest=!1,_setViewport(lt,0,0,lt.width,lt.height)}_fromTexture(lt,dt){lt.mapping===CubeReflectionMapping||lt.mapping===CubeRefractionMapping?this._setSize(lt.image.length===0?16:lt.image[0].width||lt.image[0].image.width):this._setSize(lt.image.width/4),_oldTarget=this._renderer.getRenderTarget();const vt=dt||this._allocateTargets();return this._textureToCubeUV(lt,vt),this._applyPMREM(vt),this._cleanup(vt),vt}_allocateTargets(){const lt=3*Math.max(this._cubeSize,112),dt=4*this._cubeSize,vt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},St=_createRenderTarget(lt,dt,vt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==lt||this._pingPongRenderTarget.height!==dt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(lt,dt,vt);const{_lodMax:Et}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(Et)),this._blurMaterial=_getBlurShader(Et,lt,dt)}return St}_compileMaterial(lt){const dt=new Mesh(this._lodPlanes[0],lt);this._renderer.compile(dt,_flatCamera)}_sceneToCubeUV(lt,dt,vt,St){const At=new PerspectiveCamera(90,1,dt,vt),Rt=[1,-1,1,1,1,1],Dt=[1,1,1,-1,-1,-1],Nt=this._renderer,Ft=Nt.autoClear,Ut=Nt.toneMapping;Nt.getClearColor(_clearColor),Nt.toneMapping=NoToneMapping,Nt.autoClear=!1;const Wt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),Zt=new Mesh(new BoxGeometry,Wt);let Kt=!1;const cn=lt.background;cn?cn.isColor&&(Wt.color.copy(cn),lt.background=null,Kt=!0):(Wt.color.copy(_clearColor),Kt=!0);for(let hn=0;hn<6;hn++){const dn=hn%3;dn===0?(At.up.set(0,Rt[hn],0),At.lookAt(Dt[hn],0,0)):dn===1?(At.up.set(0,0,Rt[hn]),At.lookAt(0,Dt[hn],0)):(At.up.set(0,Rt[hn],0),At.lookAt(0,0,Dt[hn]));const pn=this._cubeSize;_setViewport(St,dn*pn,hn>2?pn:0,pn,pn),Nt.setRenderTarget(St),Kt&&Nt.render(Zt,At),Nt.render(lt,At)}Zt.geometry.dispose(),Zt.material.dispose(),Nt.toneMapping=Ut,Nt.autoClear=Ft,lt.background=cn}_textureToCubeUV(lt,dt){const vt=this._renderer,St=lt.mapping===CubeReflectionMapping||lt.mapping===CubeRefractionMapping;St?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=lt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const Et=St?this._cubemapMaterial:this._equirectMaterial,Ct=new Mesh(this._lodPlanes[0],Et),At=Et.uniforms;At.envMap.value=lt;const Rt=this._cubeSize;_setViewport(dt,0,0,3*Rt,2*Rt),vt.setRenderTarget(dt),vt.render(Ct,_flatCamera)}_applyPMREM(lt){const dt=this._renderer,vt=dt.autoClear;dt.autoClear=!1;for(let St=1;St<this._lodPlanes.length;St++){const Et=Math.sqrt(this._sigmas[St]*this._sigmas[St]-this._sigmas[St-1]*this._sigmas[St-1]),Ct=_axisDirections[(St-1)%_axisDirections.length];this._blur(lt,St-1,St,Et,Ct)}dt.autoClear=vt}_blur(lt,dt,vt,St,Et){const Ct=this._pingPongRenderTarget;this._halfBlur(lt,Ct,dt,vt,St,"latitudinal",Et),this._halfBlur(Ct,lt,vt,vt,St,"longitudinal",Et)}_halfBlur(lt,dt,vt,St,Et,Ct,At){const Rt=this._renderer,Dt=this._blurMaterial;Ct!=="latitudinal"&&Ct!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Nt=3,Ft=new Mesh(this._lodPlanes[St],Dt),Ut=Dt.uniforms,Wt=this._sizeLods[vt]-1,Zt=isFinite(Et)?Math.PI/(2*Wt):2*Math.PI/(2*MAX_SAMPLES-1),Kt=Et/Zt,cn=isFinite(Et)?1+Math.floor(Nt*Kt):MAX_SAMPLES;cn>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Et}, is too large and will clip, as it requested ${cn} samples when the maximum is set to ${MAX_SAMPLES}`);const hn=[];let dn=0;for(let $n=0;$n<MAX_SAMPLES;++$n){const Tn=$n/Kt,In=Math.exp(-Tn*Tn/2);hn.push(In),$n===0?dn+=In:$n<cn&&(dn+=2*In)}for(let $n=0;$n<hn.length;$n++)hn[$n]=hn[$n]/dn;Ut.envMap.value=lt.texture,Ut.samples.value=cn,Ut.weights.value=hn,Ut.latitudinal.value=Ct==="latitudinal",At&&(Ut.poleAxis.value=At);const{_lodMax:pn}=this;Ut.dTheta.value=Zt,Ut.mipInt.value=pn-vt;const gn=this._sizeLods[St],vn=3*gn*(St>pn-LOD_MIN?St-pn+LOD_MIN:0),bn=4*(this._cubeSize-gn);_setViewport(dt,vn,bn,3*gn,2*gn),Rt.setRenderTarget(dt),Rt.render(Ft,_flatCamera)}}function _createPlanes(ft){const lt=[],dt=[],vt=[];let St=ft;const Et=ft-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let Ct=0;Ct<Et;Ct++){const At=Math.pow(2,St);dt.push(At);let Rt=1/At;Ct>ft-LOD_MIN?Rt=EXTRA_LOD_SIGMA[Ct-ft+LOD_MIN-1]:Ct===0&&(Rt=0),vt.push(Rt);const Dt=1/(At-2),Nt=-Dt,Ft=1+Dt,Ut=[Nt,Nt,Ft,Nt,Ft,Ft,Nt,Nt,Ft,Ft,Nt,Ft],Wt=6,Zt=6,Kt=3,cn=2,hn=1,dn=new Float32Array(Kt*Zt*Wt),pn=new Float32Array(cn*Zt*Wt),gn=new Float32Array(hn*Zt*Wt);for(let bn=0;bn<Wt;bn++){const $n=bn%3*2/3-1,Tn=bn>2?0:-1,In=[$n,Tn,0,$n+2/3,Tn,0,$n+2/3,Tn+1,0,$n,Tn,0,$n+2/3,Tn+1,0,$n,Tn+1,0];dn.set(In,Kt*Zt*bn),pn.set(Ut,cn*Zt*bn);const Pn=[bn,bn,bn,bn,bn,bn];gn.set(Pn,hn*Zt*bn)}const vn=new BufferGeometry;vn.setAttribute("position",new BufferAttribute(dn,Kt)),vn.setAttribute("uv",new BufferAttribute(pn,cn)),vn.setAttribute("faceIndex",new BufferAttribute(gn,hn)),lt.push(vn),St>LOD_MIN&&St--}return{lodPlanes:lt,sizeLods:dt,sigmas:vt}}function _createRenderTarget(ft,lt,dt){const vt=new WebGLRenderTarget(ft,lt,dt);return vt.texture.mapping=CubeUVReflectionMapping,vt.texture.name="PMREM.cubeUv",vt.scissorTest=!0,vt}function _setViewport(ft,lt,dt,vt,St){ft.viewport.set(lt,dt,vt,St),ft.scissor.set(lt,dt,vt,St)}function _getBlurShader(ft,lt,dt){const vt=new Float32Array(MAX_SAMPLES),St=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/lt,CUBEUV_TEXEL_HEIGHT:1/dt,CUBEUV_MAX_MIP:`${ft}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:vt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:St}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(ft){let lt=new WeakMap,dt=null;function vt(At){if(At&&At.isTexture){const Rt=At.mapping,Dt=Rt===EquirectangularReflectionMapping||Rt===EquirectangularRefractionMapping,Nt=Rt===CubeReflectionMapping||Rt===CubeRefractionMapping;if(Dt||Nt)if(At.isRenderTargetTexture&&At.needsPMREMUpdate===!0){At.needsPMREMUpdate=!1;let Ft=lt.get(At);return dt===null&&(dt=new PMREMGenerator(ft)),Ft=Dt?dt.fromEquirectangular(At,Ft):dt.fromCubemap(At,Ft),lt.set(At,Ft),Ft.texture}else{if(lt.has(At))return lt.get(At).texture;{const Ft=At.image;if(Dt&&Ft&&Ft.height>0||Nt&&Ft&&St(Ft)){dt===null&&(dt=new PMREMGenerator(ft));const Ut=Dt?dt.fromEquirectangular(At):dt.fromCubemap(At);return lt.set(At,Ut),At.addEventListener("dispose",Et),Ut.texture}else return null}}}return At}function St(At){let Rt=0;const Dt=6;for(let Nt=0;Nt<Dt;Nt++)At[Nt]!==void 0&&Rt++;return Rt===Dt}function Et(At){const Rt=At.target;Rt.removeEventListener("dispose",Et);const Dt=lt.get(Rt);Dt!==void 0&&(lt.delete(Rt),Dt.dispose())}function Ct(){lt=new WeakMap,dt!==null&&(dt.dispose(),dt=null)}return{get:vt,dispose:Ct}}function WebGLExtensions(ft){const lt={};function dt(vt){if(lt[vt]!==void 0)return lt[vt];let St;switch(vt){case"WEBGL_depth_texture":St=ft.getExtension("WEBGL_depth_texture")||ft.getExtension("MOZ_WEBGL_depth_texture")||ft.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":St=ft.getExtension("EXT_texture_filter_anisotropic")||ft.getExtension("MOZ_EXT_texture_filter_anisotropic")||ft.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":St=ft.getExtension("WEBGL_compressed_texture_s3tc")||ft.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ft.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":St=ft.getExtension("WEBGL_compressed_texture_pvrtc")||ft.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:St=ft.getExtension(vt)}return lt[vt]=St,St}return{has:function(vt){return dt(vt)!==null},init:function(vt){vt.isWebGL2?dt("EXT_color_buffer_float"):(dt("WEBGL_depth_texture"),dt("OES_texture_float"),dt("OES_texture_half_float"),dt("OES_texture_half_float_linear"),dt("OES_standard_derivatives"),dt("OES_element_index_uint"),dt("OES_vertex_array_object"),dt("ANGLE_instanced_arrays")),dt("OES_texture_float_linear"),dt("EXT_color_buffer_half_float"),dt("WEBGL_multisampled_render_to_texture")},get:function(vt){const St=dt(vt);return St===null&&console.warn("THREE.WebGLRenderer: "+vt+" extension not supported."),St}}}function WebGLGeometries(ft,lt,dt,vt){const St={},Et=new WeakMap;function Ct(Ft){const Ut=Ft.target;Ut.index!==null&&lt.remove(Ut.index);for(const Zt in Ut.attributes)lt.remove(Ut.attributes[Zt]);Ut.removeEventListener("dispose",Ct),delete St[Ut.id];const Wt=Et.get(Ut);Wt&&(lt.remove(Wt),Et.delete(Ut)),vt.releaseStatesOfGeometry(Ut),Ut.isInstancedBufferGeometry===!0&&delete Ut._maxInstanceCount,dt.memory.geometries--}function At(Ft,Ut){return St[Ut.id]===!0||(Ut.addEventListener("dispose",Ct),St[Ut.id]=!0,dt.memory.geometries++),Ut}function Rt(Ft){const Ut=Ft.attributes;for(const Zt in Ut)lt.update(Ut[Zt],34962);const Wt=Ft.morphAttributes;for(const Zt in Wt){const Kt=Wt[Zt];for(let cn=0,hn=Kt.length;cn<hn;cn++)lt.update(Kt[cn],34962)}}function Dt(Ft){const Ut=[],Wt=Ft.index,Zt=Ft.attributes.position;let Kt=0;if(Wt!==null){const dn=Wt.array;Kt=Wt.version;for(let pn=0,gn=dn.length;pn<gn;pn+=3){const vn=dn[pn+0],bn=dn[pn+1],$n=dn[pn+2];Ut.push(vn,bn,bn,$n,$n,vn)}}else{const dn=Zt.array;Kt=Zt.version;for(let pn=0,gn=dn.length/3-1;pn<gn;pn+=3){const vn=pn+0,bn=pn+1,$n=pn+2;Ut.push(vn,bn,bn,$n,$n,vn)}}const cn=new(arrayNeedsUint32(Ut)?Uint32BufferAttribute:Uint16BufferAttribute)(Ut,1);cn.version=Kt;const hn=Et.get(Ft);hn&&lt.remove(hn),Et.set(Ft,cn)}function Nt(Ft){const Ut=Et.get(Ft);if(Ut){const Wt=Ft.index;Wt!==null&&Ut.version<Wt.version&&Dt(Ft)}else Dt(Ft);return Et.get(Ft)}return{get:At,update:Rt,getWireframeAttribute:Nt}}function WebGLIndexedBufferRenderer(ft,lt,dt,vt){const St=vt.isWebGL2;let Et;function Ct(Ut){Et=Ut}let At,Rt;function Dt(Ut){At=Ut.type,Rt=Ut.bytesPerElement}function Nt(Ut,Wt){ft.drawElements(Et,Wt,At,Ut*Rt),dt.update(Wt,Et,1)}function Ft(Ut,Wt,Zt){if(Zt===0)return;let Kt,cn;if(St)Kt=ft,cn="drawElementsInstanced";else if(Kt=lt.get("ANGLE_instanced_arrays"),cn="drawElementsInstancedANGLE",Kt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Kt[cn](Et,Wt,At,Ut*Rt,Zt),dt.update(Wt,Et,Zt)}this.setMode=Ct,this.setIndex=Dt,this.render=Nt,this.renderInstances=Ft}function WebGLInfo(ft){const lt={geometries:0,textures:0},dt={frame:0,calls:0,triangles:0,points:0,lines:0};function vt(Et,Ct,At){switch(dt.calls++,Ct){case 4:dt.triangles+=At*(Et/3);break;case 1:dt.lines+=At*(Et/2);break;case 3:dt.lines+=At*(Et-1);break;case 2:dt.lines+=At*Et;break;case 0:dt.points+=At*Et;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ct);break}}function St(){dt.frame++,dt.calls=0,dt.triangles=0,dt.points=0,dt.lines=0}return{memory:lt,render:dt,programs:null,autoReset:!0,reset:St,update:vt}}function numericalSort(ft,lt){return ft[0]-lt[0]}function absNumericalSort(ft,lt){return Math.abs(lt[1])-Math.abs(ft[1])}function WebGLMorphtargets(ft,lt,dt){const vt={},St=new Float32Array(8),Et=new WeakMap,Ct=new Vector4,At=[];for(let Dt=0;Dt<8;Dt++)At[Dt]=[Dt,0];function Rt(Dt,Nt,Ft){const Ut=Dt.morphTargetInfluences;if(lt.isWebGL2===!0){const Zt=Nt.morphAttributes.position||Nt.morphAttributes.normal||Nt.morphAttributes.color,Kt=Zt!==void 0?Zt.length:0;let cn=Et.get(Nt);if(cn===void 0||cn.count!==Kt){let Qn=function(){Gn.dispose(),Et.delete(Nt),Nt.removeEventListener("dispose",Qn)};var Wt=Qn;cn!==void 0&&cn.texture.dispose();const pn=Nt.morphAttributes.position!==void 0,gn=Nt.morphAttributes.normal!==void 0,vn=Nt.morphAttributes.color!==void 0,bn=Nt.morphAttributes.position||[],$n=Nt.morphAttributes.normal||[],Tn=Nt.morphAttributes.color||[];let In=0;pn===!0&&(In=1),gn===!0&&(In=2),vn===!0&&(In=3);let Pn=Nt.attributes.position.count*In,zn=1;Pn>lt.maxTextureSize&&(zn=Math.ceil(Pn/lt.maxTextureSize),Pn=lt.maxTextureSize);const An=new Float32Array(Pn*zn*4*Kt),Gn=new DataArrayTexture(An,Pn,zn,Kt);Gn.type=FloatType,Gn.needsUpdate=!0;const xn=In*4;for(let qn=0;qn<Kt;qn++){const nr=bn[qn],Un=$n[qn],Nn=Tn[qn],jn=Pn*zn*4*qn;for(let Ln=0;Ln<nr.count;Ln++){const Cn=Ln*xn;pn===!0&&(Ct.fromBufferAttribute(nr,Ln),An[jn+Cn+0]=Ct.x,An[jn+Cn+1]=Ct.y,An[jn+Cn+2]=Ct.z,An[jn+Cn+3]=0),gn===!0&&(Ct.fromBufferAttribute(Un,Ln),An[jn+Cn+4]=Ct.x,An[jn+Cn+5]=Ct.y,An[jn+Cn+6]=Ct.z,An[jn+Cn+7]=0),vn===!0&&(Ct.fromBufferAttribute(Nn,Ln),An[jn+Cn+8]=Ct.x,An[jn+Cn+9]=Ct.y,An[jn+Cn+10]=Ct.z,An[jn+Cn+11]=Nn.itemSize===4?Ct.w:1)}}cn={count:Kt,texture:Gn,size:new Vector2(Pn,zn)},Et.set(Nt,cn),Nt.addEventListener("dispose",Qn)}let hn=0;for(let pn=0;pn<Ut.length;pn++)hn+=Ut[pn];const dn=Nt.morphTargetsRelative?1:1-hn;Ft.getUniforms().setValue(ft,"morphTargetBaseInfluence",dn),Ft.getUniforms().setValue(ft,"morphTargetInfluences",Ut),Ft.getUniforms().setValue(ft,"morphTargetsTexture",cn.texture,dt),Ft.getUniforms().setValue(ft,"morphTargetsTextureSize",cn.size)}else{const Zt=Ut===void 0?0:Ut.length;let Kt=vt[Nt.id];if(Kt===void 0||Kt.length!==Zt){Kt=[];for(let gn=0;gn<Zt;gn++)Kt[gn]=[gn,0];vt[Nt.id]=Kt}for(let gn=0;gn<Zt;gn++){const vn=Kt[gn];vn[0]=gn,vn[1]=Ut[gn]}Kt.sort(absNumericalSort);for(let gn=0;gn<8;gn++)gn<Zt&&Kt[gn][1]?(At[gn][0]=Kt[gn][0],At[gn][1]=Kt[gn][1]):(At[gn][0]=Number.MAX_SAFE_INTEGER,At[gn][1]=0);At.sort(numericalSort);const cn=Nt.morphAttributes.position,hn=Nt.morphAttributes.normal;let dn=0;for(let gn=0;gn<8;gn++){const vn=At[gn],bn=vn[0],$n=vn[1];bn!==Number.MAX_SAFE_INTEGER&&$n?(cn&&Nt.getAttribute("morphTarget"+gn)!==cn[bn]&&Nt.setAttribute("morphTarget"+gn,cn[bn]),hn&&Nt.getAttribute("morphNormal"+gn)!==hn[bn]&&Nt.setAttribute("morphNormal"+gn,hn[bn]),St[gn]=$n,dn+=$n):(cn&&Nt.hasAttribute("morphTarget"+gn)===!0&&Nt.deleteAttribute("morphTarget"+gn),hn&&Nt.hasAttribute("morphNormal"+gn)===!0&&Nt.deleteAttribute("morphNormal"+gn),St[gn]=0)}const pn=Nt.morphTargetsRelative?1:1-dn;Ft.getUniforms().setValue(ft,"morphTargetBaseInfluence",pn),Ft.getUniforms().setValue(ft,"morphTargetInfluences",St)}}return{update:Rt}}function WebGLObjects(ft,lt,dt,vt){let St=new WeakMap;function Et(Rt){const Dt=vt.render.frame,Nt=Rt.geometry,Ft=lt.get(Rt,Nt);return St.get(Ft)!==Dt&&(lt.update(Ft),St.set(Ft,Dt)),Rt.isInstancedMesh&&(Rt.hasEventListener("dispose",At)===!1&&Rt.addEventListener("dispose",At),dt.update(Rt.instanceMatrix,34962),Rt.instanceColor!==null&&dt.update(Rt.instanceColor,34962)),Ft}function Ct(){St=new WeakMap}function At(Rt){const Dt=Rt.target;Dt.removeEventListener("dispose",At),dt.remove(Dt.instanceMatrix),Dt.instanceColor!==null&&dt.remove(Dt.instanceColor)}return{update:Et,dispose:Ct}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(ft,lt,dt){const vt=ft[0];if(vt<=0||vt>0)return ft;const St=lt*dt;let Et=arrayCacheF32[St];if(Et===void 0&&(Et=new Float32Array(St),arrayCacheF32[St]=Et),lt!==0){vt.toArray(Et,0);for(let Ct=1,At=0;Ct!==lt;++Ct)At+=dt,ft[Ct].toArray(Et,At)}return Et}function arraysEqual(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0,vt=ft.length;dt<vt;dt++)if(ft[dt]!==lt[dt])return!1;return!0}function copyArray(ft,lt){for(let dt=0,vt=lt.length;dt<vt;dt++)ft[dt]=lt[dt]}function allocTexUnits(ft,lt){let dt=arrayCacheI32[lt];dt===void 0&&(dt=new Int32Array(lt),arrayCacheI32[lt]=dt);for(let vt=0;vt!==lt;++vt)dt[vt]=ft.allocateTextureUnit();return dt}function setValueV1f(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1f(this.addr,lt),dt[0]=lt)}function setValueV2f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2f(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2fv(this.addr,lt),copyArray(dt,lt)}}function setValueV3f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3f(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else if(lt.r!==void 0)(dt[0]!==lt.r||dt[1]!==lt.g||dt[2]!==lt.b)&&(ft.uniform3f(this.addr,lt.r,lt.g,lt.b),dt[0]=lt.r,dt[1]=lt.g,dt[2]=lt.b);else{if(arraysEqual(dt,lt))return;ft.uniform3fv(this.addr,lt),copyArray(dt,lt)}}function setValueV4f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4f(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4fv(this.addr,lt),copyArray(dt,lt)}}function setValueM2(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix2fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat2array.set(vt),ft.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(dt,vt)}}function setValueM3(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix3fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat3array.set(vt),ft.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(dt,vt)}}function setValueM4(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix4fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat4array.set(vt),ft.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(dt,vt)}}function setValueV1i(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1i(this.addr,lt),dt[0]=lt)}function setValueV2i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2i(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2iv(this.addr,lt),copyArray(dt,lt)}}function setValueV3i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3i(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else{if(arraysEqual(dt,lt))return;ft.uniform3iv(this.addr,lt),copyArray(dt,lt)}}function setValueV4i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4i(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4iv(this.addr,lt),copyArray(dt,lt)}}function setValueV1ui(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1ui(this.addr,lt),dt[0]=lt)}function setValueV2ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2ui(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2uiv(this.addr,lt),copyArray(dt,lt)}}function setValueV3ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3ui(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else{if(arraysEqual(dt,lt))return;ft.uniform3uiv(this.addr,lt),copyArray(dt,lt)}}function setValueV4ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4ui(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4uiv(this.addr,lt),copyArray(dt,lt)}}function setValueT1(ft,lt,dt){const vt=this.cache,St=dt.allocateTextureUnit();vt[0]!==St&&(ft.uniform1i(this.addr,St),vt[0]=St),dt.setTexture2D(lt||emptyTexture,St)}function setValueT3D1(ft,lt,dt){const vt=this.cache,St=dt.allocateTextureUnit();vt[0]!==St&&(ft.uniform1i(this.addr,St),vt[0]=St),dt.setTexture3D(lt||empty3dTexture,St)}function setValueT6(ft,lt,dt){const vt=this.cache,St=dt.allocateTextureUnit();vt[0]!==St&&(ft.uniform1i(this.addr,St),vt[0]=St),dt.setTextureCube(lt||emptyCubeTexture,St)}function setValueT2DArray1(ft,lt,dt){const vt=this.cache,St=dt.allocateTextureUnit();vt[0]!==St&&(ft.uniform1i(this.addr,St),vt[0]=St),dt.setTexture2DArray(lt||emptyArrayTexture,St)}function getSingularSetter(ft){switch(ft){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ft,lt){ft.uniform1fv(this.addr,lt)}function setValueV2fArray(ft,lt){const dt=flatten$2(lt,this.size,2);ft.uniform2fv(this.addr,dt)}function setValueV3fArray(ft,lt){const dt=flatten$2(lt,this.size,3);ft.uniform3fv(this.addr,dt)}function setValueV4fArray(ft,lt){const dt=flatten$2(lt,this.size,4);ft.uniform4fv(this.addr,dt)}function setValueM2Array(ft,lt){const dt=flatten$2(lt,this.size,4);ft.uniformMatrix2fv(this.addr,!1,dt)}function setValueM3Array(ft,lt){const dt=flatten$2(lt,this.size,9);ft.uniformMatrix3fv(this.addr,!1,dt)}function setValueM4Array(ft,lt){const dt=flatten$2(lt,this.size,16);ft.uniformMatrix4fv(this.addr,!1,dt)}function setValueV1iArray(ft,lt){ft.uniform1iv(this.addr,lt)}function setValueV2iArray(ft,lt){ft.uniform2iv(this.addr,lt)}function setValueV3iArray(ft,lt){ft.uniform3iv(this.addr,lt)}function setValueV4iArray(ft,lt){ft.uniform4iv(this.addr,lt)}function setValueV1uiArray(ft,lt){ft.uniform1uiv(this.addr,lt)}function setValueV2uiArray(ft,lt){ft.uniform2uiv(this.addr,lt)}function setValueV3uiArray(ft,lt){ft.uniform3uiv(this.addr,lt)}function setValueV4uiArray(ft,lt){ft.uniform4uiv(this.addr,lt)}function setValueT1Array(ft,lt,dt){const vt=this.cache,St=lt.length,Et=allocTexUnits(dt,St);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==St;++Ct)dt.setTexture2D(lt[Ct]||emptyTexture,Et[Ct])}function setValueT3DArray(ft,lt,dt){const vt=this.cache,St=lt.length,Et=allocTexUnits(dt,St);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==St;++Ct)dt.setTexture3D(lt[Ct]||empty3dTexture,Et[Ct])}function setValueT6Array(ft,lt,dt){const vt=this.cache,St=lt.length,Et=allocTexUnits(dt,St);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==St;++Ct)dt.setTextureCube(lt[Ct]||emptyCubeTexture,Et[Ct])}function setValueT2DArrayArray(ft,lt,dt){const vt=this.cache,St=lt.length,Et=allocTexUnits(dt,St);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==St;++Ct)dt.setTexture2DArray(lt[Ct]||emptyArrayTexture,Et[Ct])}function getPureArraySetter(ft){switch(ft){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(lt,dt,vt){this.id=lt,this.addr=vt,this.cache=[],this.setValue=getSingularSetter(dt.type)}}class PureArrayUniform{constructor(lt,dt,vt){this.id=lt,this.addr=vt,this.cache=[],this.size=dt.size,this.setValue=getPureArraySetter(dt.type)}}class StructuredUniform{constructor(lt){this.id=lt,this.seq=[],this.map={}}setValue(lt,dt,vt){const St=this.seq;for(let Et=0,Ct=St.length;Et!==Ct;++Et){const At=St[Et];At.setValue(lt,dt[At.id],vt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(ft,lt){ft.seq.push(lt),ft.map[lt.id]=lt}function parseUniform(ft,lt,dt){const vt=ft.name,St=vt.length;for(RePathPart.lastIndex=0;;){const Et=RePathPart.exec(vt),Ct=RePathPart.lastIndex;let At=Et[1];const Rt=Et[2]==="]",Dt=Et[3];if(Rt&&(At=At|0),Dt===void 0||Dt==="["&&Ct+2===St){addUniform(dt,Dt===void 0?new SingleUniform(At,ft,lt):new PureArrayUniform(At,ft,lt));break}else{let Ft=dt.map[At];Ft===void 0&&(Ft=new StructuredUniform(At),addUniform(dt,Ft)),dt=Ft}}}class WebGLUniforms{constructor(lt,dt){this.seq=[],this.map={};const vt=lt.getProgramParameter(dt,35718);for(let St=0;St<vt;++St){const Et=lt.getActiveUniform(dt,St),Ct=lt.getUniformLocation(dt,Et.name);parseUniform(Et,Ct,this)}}setValue(lt,dt,vt,St){const Et=this.map[dt];Et!==void 0&&Et.setValue(lt,vt,St)}setOptional(lt,dt,vt){const St=dt[vt];St!==void 0&&this.setValue(lt,vt,St)}static upload(lt,dt,vt,St){for(let Et=0,Ct=dt.length;Et!==Ct;++Et){const At=dt[Et],Rt=vt[At.id];Rt.needsUpdate!==!1&&At.setValue(lt,Rt.value,St)}}static seqWithValue(lt,dt){const vt=[];for(let St=0,Et=lt.length;St!==Et;++St){const Ct=lt[St];Ct.id in dt&&vt.push(Ct)}return vt}}function WebGLShader(ft,lt,dt){const vt=ft.createShader(lt);return ft.shaderSource(vt,dt),ft.compileShader(vt),vt}let programIdCount=0;function handleSource(ft,lt){const dt=ft.split(`
`),vt=[],St=Math.max(lt-6,0),Et=Math.min(lt+6,dt.length);for(let Ct=St;Ct<Et;Ct++){const At=Ct+1;vt.push(`${At===lt?">":" "} ${At}: ${dt[Ct]}`)}return vt.join(`
`)}function getEncodingComponents(ft){switch(ft){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",ft),["Linear","( value )"]}}function getShaderErrors(ft,lt,dt){const vt=ft.getShaderParameter(lt,35713),St=ft.getShaderInfoLog(lt).trim();if(vt&&St==="")return"";const Et=/ERROR: 0:(\d+)/.exec(St);if(Et){const Ct=parseInt(Et[1]);return dt.toUpperCase()+`

`+St+`

`+handleSource(ft.getShaderSource(lt),Ct)}else return St}function getTexelEncodingFunction(ft,lt){const dt=getEncodingComponents(lt);return"vec4 "+ft+"( vec4 value ) { return LinearTo"+dt[0]+dt[1]+"; }"}function getToneMappingFunction(ft,lt){let dt;switch(lt){case LinearToneMapping:dt="Linear";break;case ReinhardToneMapping:dt="Reinhard";break;case CineonToneMapping:dt="OptimizedCineon";break;case ACESFilmicToneMapping:dt="ACESFilmic";break;case CustomToneMapping:dt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",lt),dt="Linear"}return"vec3 "+ft+"( vec3 color ) { return "+dt+"ToneMapping( color ); }"}function generateExtensions(ft){return[ft.extensionDerivatives||ft.envMapCubeUVHeight||ft.bumpMap||ft.tangentSpaceNormalMap||ft.clearcoatNormalMap||ft.flatShading||ft.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ft.extensionFragDepth||ft.logarithmicDepthBuffer)&&ft.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ft.extensionDrawBuffers&&ft.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ft.extensionShaderTextureLOD||ft.envMap||ft.transmission)&&ft.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(ft){const lt=[];for(const dt in ft){const vt=ft[dt];vt!==!1&&lt.push("#define "+dt+" "+vt)}return lt.join(`
`)}function fetchAttributeLocations(ft,lt){const dt={},vt=ft.getProgramParameter(lt,35721);for(let St=0;St<vt;St++){const Et=ft.getActiveAttrib(lt,St),Ct=Et.name;let At=1;Et.type===35674&&(At=2),Et.type===35675&&(At=3),Et.type===35676&&(At=4),dt[Ct]={type:Et.type,location:ft.getAttribLocation(lt,Ct),locationSize:At}}return dt}function filterEmptyLine(ft){return ft!==""}function replaceLightNums(ft,lt){const dt=lt.numSpotLightShadows+lt.numSpotLightMaps-lt.numSpotLightShadowsWithMaps;return ft.replace(/NUM_DIR_LIGHTS/g,lt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,lt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,lt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,dt).replace(/NUM_RECT_AREA_LIGHTS/g,lt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,lt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,lt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,lt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,lt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,lt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,lt.numPointLightShadows)}function replaceClippingPlaneNums(ft,lt){return ft.replace(/NUM_CLIPPING_PLANES/g,lt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,lt.numClippingPlanes-lt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ft){return ft.replace(includePattern,includeReplacer)}function includeReplacer(ft,lt){const dt=ShaderChunk[lt];if(dt===void 0)throw new Error("Can not resolve #include <"+lt+">");return resolveIncludes(dt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(ft){return ft.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(ft,lt,dt,vt){let St="";for(let Et=parseInt(lt);Et<parseInt(dt);Et++)St+=vt.replace(/\[\s*i\s*\]/g,"[ "+Et+" ]").replace(/UNROLLED_LOOP_INDEX/g,Et);return St}function generatePrecision(ft){let lt="precision "+ft.precision+` float;
precision `+ft.precision+" int;";return ft.precision==="highp"?lt+=`
#define HIGH_PRECISION`:ft.precision==="mediump"?lt+=`
#define MEDIUM_PRECISION`:ft.precision==="lowp"&&(lt+=`
#define LOW_PRECISION`),lt}function generateShadowMapTypeDefine(ft){let lt="SHADOWMAP_TYPE_BASIC";return ft.shadowMapType===PCFShadowMap?lt="SHADOWMAP_TYPE_PCF":ft.shadowMapType===PCFSoftShadowMap?lt="SHADOWMAP_TYPE_PCF_SOFT":ft.shadowMapType===VSMShadowMap&&(lt="SHADOWMAP_TYPE_VSM"),lt}function generateEnvMapTypeDefine(ft){let lt="ENVMAP_TYPE_CUBE";if(ft.envMap)switch(ft.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:lt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:lt="ENVMAP_TYPE_CUBE_UV";break}return lt}function generateEnvMapModeDefine(ft){let lt="ENVMAP_MODE_REFLECTION";if(ft.envMap)switch(ft.envMapMode){case CubeRefractionMapping:lt="ENVMAP_MODE_REFRACTION";break}return lt}function generateEnvMapBlendingDefine(ft){let lt="ENVMAP_BLENDING_NONE";if(ft.envMap)switch(ft.combine){case MultiplyOperation:lt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:lt="ENVMAP_BLENDING_MIX";break;case AddOperation:lt="ENVMAP_BLENDING_ADD";break}return lt}function generateCubeUVSize(ft){const lt=ft.envMapCubeUVHeight;if(lt===null)return null;const dt=Math.log2(lt)-2,vt=1/lt;return{texelWidth:1/(3*Math.max(Math.pow(2,dt),7*16)),texelHeight:vt,maxMip:dt}}function WebGLProgram(ft,lt,dt,vt){const St=ft.getContext(),Et=dt.defines;let Ct=dt.vertexShader,At=dt.fragmentShader;const Rt=generateShadowMapTypeDefine(dt),Dt=generateEnvMapTypeDefine(dt),Nt=generateEnvMapModeDefine(dt),Ft=generateEnvMapBlendingDefine(dt),Ut=generateCubeUVSize(dt),Wt=dt.isWebGL2?"":generateExtensions(dt),Zt=generateDefines(Et),Kt=St.createProgram();let cn,hn,dn=dt.glslVersion?"#version "+dt.glslVersion+`
`:"";dt.isRawShaderMaterial?(cn=[Zt].filter(filterEmptyLine).join(`
`),cn.length>0&&(cn+=`
`),hn=[Wt,Zt].filter(filterEmptyLine).join(`
`),hn.length>0&&(hn+=`
`)):(cn=[generatePrecision(dt),"#define SHADER_NAME "+dt.shaderName,Zt,dt.instancing?"#define USE_INSTANCING":"",dt.instancingColor?"#define USE_INSTANCING_COLOR":"",dt.supportsVertexTextures?"#define VERTEX_TEXTURES":"",dt.useFog&&dt.fog?"#define USE_FOG":"",dt.useFog&&dt.fogExp2?"#define FOG_EXP2":"",dt.map?"#define USE_MAP":"",dt.envMap?"#define USE_ENVMAP":"",dt.envMap?"#define "+Nt:"",dt.lightMap?"#define USE_LIGHTMAP":"",dt.aoMap?"#define USE_AOMAP":"",dt.emissiveMap?"#define USE_EMISSIVEMAP":"",dt.bumpMap?"#define USE_BUMPMAP":"",dt.normalMap?"#define USE_NORMALMAP":"",dt.normalMap&&dt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",dt.normalMap&&dt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",dt.clearcoatMap?"#define USE_CLEARCOATMAP":"",dt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",dt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",dt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",dt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",dt.displacementMap&&dt.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",dt.specularMap?"#define USE_SPECULARMAP":"",dt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",dt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",dt.roughnessMap?"#define USE_ROUGHNESSMAP":"",dt.metalnessMap?"#define USE_METALNESSMAP":"",dt.alphaMap?"#define USE_ALPHAMAP":"",dt.transmission?"#define USE_TRANSMISSION":"",dt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",dt.thicknessMap?"#define USE_THICKNESSMAP":"",dt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",dt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",dt.vertexTangents?"#define USE_TANGENT":"",dt.vertexColors?"#define USE_COLOR":"",dt.vertexAlphas?"#define USE_COLOR_ALPHA":"",dt.vertexUvs?"#define USE_UV":"",dt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",dt.flatShading?"#define FLAT_SHADED":"",dt.skinning?"#define USE_SKINNING":"",dt.morphTargets?"#define USE_MORPHTARGETS":"",dt.morphNormals&&dt.flatShading===!1?"#define USE_MORPHNORMALS":"",dt.morphColors&&dt.isWebGL2?"#define USE_MORPHCOLORS":"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+dt.morphTextureStride:"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_COUNT "+dt.morphTargetsCount:"",dt.doubleSided?"#define DOUBLE_SIDED":"",dt.flipSided?"#define FLIP_SIDED":"",dt.shadowMapEnabled?"#define USE_SHADOWMAP":"",dt.shadowMapEnabled?"#define "+Rt:"",dt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",dt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dt.logarithmicDepthBuffer&&dt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),hn=[Wt,generatePrecision(dt),"#define SHADER_NAME "+dt.shaderName,Zt,dt.useFog&&dt.fog?"#define USE_FOG":"",dt.useFog&&dt.fogExp2?"#define FOG_EXP2":"",dt.map?"#define USE_MAP":"",dt.matcap?"#define USE_MATCAP":"",dt.envMap?"#define USE_ENVMAP":"",dt.envMap?"#define "+Dt:"",dt.envMap?"#define "+Nt:"",dt.envMap?"#define "+Ft:"",Ut?"#define CUBEUV_TEXEL_WIDTH "+Ut.texelWidth:"",Ut?"#define CUBEUV_TEXEL_HEIGHT "+Ut.texelHeight:"",Ut?"#define CUBEUV_MAX_MIP "+Ut.maxMip+".0":"",dt.lightMap?"#define USE_LIGHTMAP":"",dt.aoMap?"#define USE_AOMAP":"",dt.emissiveMap?"#define USE_EMISSIVEMAP":"",dt.bumpMap?"#define USE_BUMPMAP":"",dt.normalMap?"#define USE_NORMALMAP":"",dt.normalMap&&dt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",dt.normalMap&&dt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",dt.clearcoat?"#define USE_CLEARCOAT":"",dt.clearcoatMap?"#define USE_CLEARCOATMAP":"",dt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",dt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",dt.iridescence?"#define USE_IRIDESCENCE":"",dt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",dt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",dt.specularMap?"#define USE_SPECULARMAP":"",dt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",dt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",dt.roughnessMap?"#define USE_ROUGHNESSMAP":"",dt.metalnessMap?"#define USE_METALNESSMAP":"",dt.alphaMap?"#define USE_ALPHAMAP":"",dt.alphaTest?"#define USE_ALPHATEST":"",dt.sheen?"#define USE_SHEEN":"",dt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",dt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",dt.transmission?"#define USE_TRANSMISSION":"",dt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",dt.thicknessMap?"#define USE_THICKNESSMAP":"",dt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",dt.vertexTangents?"#define USE_TANGENT":"",dt.vertexColors||dt.instancingColor?"#define USE_COLOR":"",dt.vertexAlphas?"#define USE_COLOR_ALPHA":"",dt.vertexUvs?"#define USE_UV":"",dt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",dt.gradientMap?"#define USE_GRADIENTMAP":"",dt.flatShading?"#define FLAT_SHADED":"",dt.doubleSided?"#define DOUBLE_SIDED":"",dt.flipSided?"#define FLIP_SIDED":"",dt.shadowMapEnabled?"#define USE_SHADOWMAP":"",dt.shadowMapEnabled?"#define "+Rt:"",dt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",dt.useLegacyLights?"#define LEGACY_LIGHTS":"",dt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dt.logarithmicDepthBuffer&&dt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",dt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",dt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",dt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",dt.toneMapping):"",dt.dithering?"#define DITHERING":"",dt.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",dt.outputEncoding),dt.useDepthPacking?"#define DEPTH_PACKING "+dt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ct=resolveIncludes(Ct),Ct=replaceLightNums(Ct,dt),Ct=replaceClippingPlaneNums(Ct,dt),At=resolveIncludes(At),At=replaceLightNums(At,dt),At=replaceClippingPlaneNums(At,dt),Ct=unrollLoops(Ct),At=unrollLoops(At),dt.isWebGL2&&dt.isRawShaderMaterial!==!0&&(dn=`#version 300 es
`,cn=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+cn,hn=["#define varying in",dt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",dt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+hn);const pn=dn+cn+Ct,gn=dn+hn+At,vn=WebGLShader(St,35633,pn),bn=WebGLShader(St,35632,gn);if(St.attachShader(Kt,vn),St.attachShader(Kt,bn),dt.index0AttributeName!==void 0?St.bindAttribLocation(Kt,0,dt.index0AttributeName):dt.morphTargets===!0&&St.bindAttribLocation(Kt,0,"position"),St.linkProgram(Kt),ft.debug.checkShaderErrors){const In=St.getProgramInfoLog(Kt).trim(),Pn=St.getShaderInfoLog(vn).trim(),zn=St.getShaderInfoLog(bn).trim();let An=!0,Gn=!0;if(St.getProgramParameter(Kt,35714)===!1){An=!1;const xn=getShaderErrors(St,vn,"vertex"),Qn=getShaderErrors(St,bn,"fragment");console.error("THREE.WebGLProgram: Shader Error "+St.getError()+" - VALIDATE_STATUS "+St.getProgramParameter(Kt,35715)+`

Program Info Log: `+In+`
`+xn+`
`+Qn)}else In!==""?console.warn("THREE.WebGLProgram: Program Info Log:",In):(Pn===""||zn==="")&&(Gn=!1);Gn&&(this.diagnostics={runnable:An,programLog:In,vertexShader:{log:Pn,prefix:cn},fragmentShader:{log:zn,prefix:hn}})}St.deleteShader(vn),St.deleteShader(bn);let $n;this.getUniforms=function(){return $n===void 0&&($n=new WebGLUniforms(St,Kt)),$n};let Tn;return this.getAttributes=function(){return Tn===void 0&&(Tn=fetchAttributeLocations(St,Kt)),Tn},this.destroy=function(){vt.releaseStatesOfProgram(this),St.deleteProgram(Kt),this.program=void 0},this.name=dt.shaderName,this.id=programIdCount++,this.cacheKey=lt,this.usedTimes=1,this.program=Kt,this.vertexShader=vn,this.fragmentShader=bn,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(lt){const dt=lt.vertexShader,vt=lt.fragmentShader,St=this._getShaderStage(dt),Et=this._getShaderStage(vt),Ct=this._getShaderCacheForMaterial(lt);return Ct.has(St)===!1&&(Ct.add(St),St.usedTimes++),Ct.has(Et)===!1&&(Ct.add(Et),Et.usedTimes++),this}remove(lt){const dt=this.materialCache.get(lt);for(const vt of dt)vt.usedTimes--,vt.usedTimes===0&&this.shaderCache.delete(vt.code);return this.materialCache.delete(lt),this}getVertexShaderID(lt){return this._getShaderStage(lt.vertexShader).id}getFragmentShaderID(lt){return this._getShaderStage(lt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(lt){const dt=this.materialCache;let vt=dt.get(lt);return vt===void 0&&(vt=new Set,dt.set(lt,vt)),vt}_getShaderStage(lt){const dt=this.shaderCache;let vt=dt.get(lt);return vt===void 0&&(vt=new WebGLShaderStage(lt),dt.set(lt,vt)),vt}}class WebGLShaderStage{constructor(lt){this.id=_id++,this.code=lt,this.usedTimes=0}}function WebGLPrograms(ft,lt,dt,vt,St,Et,Ct){const At=new Layers$1,Rt=new WebGLShaderCache,Dt=[],Nt=St.isWebGL2,Ft=St.logarithmicDepthBuffer,Ut=St.vertexTextures;let Wt=St.precision;const Zt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Kt(Tn,In,Pn,zn,An){const Gn=zn.fog,xn=An.geometry,Qn=Tn.isMeshStandardMaterial?zn.environment:null,qn=(Tn.isMeshStandardMaterial?dt:lt).get(Tn.envMap||Qn),nr=qn&&qn.mapping===CubeUVReflectionMapping?qn.image.height:null,Un=Zt[Tn.type];Tn.precision!==null&&(Wt=St.getMaxPrecision(Tn.precision),Wt!==Tn.precision&&console.warn("THREE.WebGLProgram.getParameters:",Tn.precision,"not supported, using",Wt,"instead."));const Nn=xn.morphAttributes.position||xn.morphAttributes.normal||xn.morphAttributes.color,jn=Nn!==void 0?Nn.length:0;let Ln=0;xn.morphAttributes.position!==void 0&&(Ln=1),xn.morphAttributes.normal!==void 0&&(Ln=2),xn.morphAttributes.color!==void 0&&(Ln=3);let Cn,tr,ir,Zn;if(Un){const Dr=ShaderLib[Un];Cn=Dr.vertexShader,tr=Dr.fragmentShader}else Cn=Tn.vertexShader,tr=Tn.fragmentShader,Rt.update(Tn),ir=Rt.getVertexShaderID(Tn),Zn=Rt.getFragmentShaderID(Tn);const br=ft.getRenderTarget(),fr=Tn.alphaTest>0,Or=Tn.clearcoat>0,Pr=Tn.iridescence>0;return{isWebGL2:Nt,shaderID:Un,shaderName:Tn.type,vertexShader:Cn,fragmentShader:tr,defines:Tn.defines,customVertexShaderID:ir,customFragmentShaderID:Zn,isRawShaderMaterial:Tn.isRawShaderMaterial===!0,glslVersion:Tn.glslVersion,precision:Wt,instancing:An.isInstancedMesh===!0,instancingColor:An.isInstancedMesh===!0&&An.instanceColor!==null,supportsVertexTextures:Ut,outputEncoding:br===null?ft.outputEncoding:br.isXRRenderTarget===!0?br.texture.encoding:LinearEncoding,map:!!Tn.map,matcap:!!Tn.matcap,envMap:!!qn,envMapMode:qn&&qn.mapping,envMapCubeUVHeight:nr,lightMap:!!Tn.lightMap,aoMap:!!Tn.aoMap,emissiveMap:!!Tn.emissiveMap,bumpMap:!!Tn.bumpMap,normalMap:!!Tn.normalMap,objectSpaceNormalMap:Tn.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Tn.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!Tn.map&&Tn.map.isVideoTexture===!0&&Tn.map.encoding===sRGBEncoding,clearcoat:Or,clearcoatMap:Or&&!!Tn.clearcoatMap,clearcoatRoughnessMap:Or&&!!Tn.clearcoatRoughnessMap,clearcoatNormalMap:Or&&!!Tn.clearcoatNormalMap,iridescence:Pr,iridescenceMap:Pr&&!!Tn.iridescenceMap,iridescenceThicknessMap:Pr&&!!Tn.iridescenceThicknessMap,displacementMap:!!Tn.displacementMap,roughnessMap:!!Tn.roughnessMap,metalnessMap:!!Tn.metalnessMap,specularMap:!!Tn.specularMap,specularIntensityMap:!!Tn.specularIntensityMap,specularColorMap:!!Tn.specularColorMap,opaque:Tn.transparent===!1&&Tn.blending===NormalBlending,alphaMap:!!Tn.alphaMap,alphaTest:fr,gradientMap:!!Tn.gradientMap,sheen:Tn.sheen>0,sheenColorMap:!!Tn.sheenColorMap,sheenRoughnessMap:!!Tn.sheenRoughnessMap,transmission:Tn.transmission>0,transmissionMap:!!Tn.transmissionMap,thicknessMap:!!Tn.thicknessMap,combine:Tn.combine,vertexTangents:!!Tn.normalMap&&!!xn.attributes.tangent,vertexColors:Tn.vertexColors,vertexAlphas:Tn.vertexColors===!0&&!!xn.attributes.color&&xn.attributes.color.itemSize===4,vertexUvs:!!Tn.map||!!Tn.bumpMap||!!Tn.normalMap||!!Tn.specularMap||!!Tn.alphaMap||!!Tn.emissiveMap||!!Tn.roughnessMap||!!Tn.metalnessMap||!!Tn.clearcoatMap||!!Tn.clearcoatRoughnessMap||!!Tn.clearcoatNormalMap||!!Tn.iridescenceMap||!!Tn.iridescenceThicknessMap||!!Tn.displacementMap||!!Tn.transmissionMap||!!Tn.thicknessMap||!!Tn.specularIntensityMap||!!Tn.specularColorMap||!!Tn.sheenColorMap||!!Tn.sheenRoughnessMap,uvsVertexOnly:!(Tn.map||Tn.bumpMap||Tn.normalMap||Tn.specularMap||Tn.alphaMap||Tn.emissiveMap||Tn.roughnessMap||Tn.metalnessMap||Tn.clearcoatNormalMap||Tn.iridescenceMap||Tn.iridescenceThicknessMap||Tn.transmission>0||Tn.transmissionMap||Tn.thicknessMap||Tn.specularIntensityMap||Tn.specularColorMap||Tn.sheen>0||Tn.sheenColorMap||Tn.sheenRoughnessMap)&&!!Tn.displacementMap,fog:!!Gn,useFog:Tn.fog===!0,fogExp2:Gn&&Gn.isFogExp2,flatShading:!!Tn.flatShading,sizeAttenuation:Tn.sizeAttenuation,logarithmicDepthBuffer:Ft,skinning:An.isSkinnedMesh===!0,morphTargets:xn.morphAttributes.position!==void 0,morphNormals:xn.morphAttributes.normal!==void 0,morphColors:xn.morphAttributes.color!==void 0,morphTargetsCount:jn,morphTextureStride:Ln,numDirLights:In.directional.length,numPointLights:In.point.length,numSpotLights:In.spot.length,numSpotLightMaps:In.spotLightMap.length,numRectAreaLights:In.rectArea.length,numHemiLights:In.hemi.length,numDirLightShadows:In.directionalShadowMap.length,numPointLightShadows:In.pointShadowMap.length,numSpotLightShadows:In.spotShadowMap.length,numSpotLightShadowsWithMaps:In.numSpotLightShadowsWithMaps,numClippingPlanes:Ct.numPlanes,numClipIntersection:Ct.numIntersection,dithering:Tn.dithering,shadowMapEnabled:ft.shadowMap.enabled&&Pn.length>0,shadowMapType:ft.shadowMap.type,toneMapping:Tn.toneMapped?ft.toneMapping:NoToneMapping,useLegacyLights:ft.useLegacyLights,premultipliedAlpha:Tn.premultipliedAlpha,doubleSided:Tn.side===DoubleSide,flipSided:Tn.side===BackSide,useDepthPacking:!!Tn.depthPacking,depthPacking:Tn.depthPacking||0,index0AttributeName:Tn.index0AttributeName,extensionDerivatives:Tn.extensions&&Tn.extensions.derivatives,extensionFragDepth:Tn.extensions&&Tn.extensions.fragDepth,extensionDrawBuffers:Tn.extensions&&Tn.extensions.drawBuffers,extensionShaderTextureLOD:Tn.extensions&&Tn.extensions.shaderTextureLOD,rendererExtensionFragDepth:Nt||vt.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Nt||vt.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Nt||vt.has("EXT_shader_texture_lod"),customProgramCacheKey:Tn.customProgramCacheKey()}}function cn(Tn){const In=[];if(Tn.shaderID?In.push(Tn.shaderID):(In.push(Tn.customVertexShaderID),In.push(Tn.customFragmentShaderID)),Tn.defines!==void 0)for(const Pn in Tn.defines)In.push(Pn),In.push(Tn.defines[Pn]);return Tn.isRawShaderMaterial===!1&&(hn(In,Tn),dn(In,Tn),In.push(ft.outputEncoding)),In.push(Tn.customProgramCacheKey),In.join()}function hn(Tn,In){Tn.push(In.precision),Tn.push(In.outputEncoding),Tn.push(In.envMapMode),Tn.push(In.envMapCubeUVHeight),Tn.push(In.combine),Tn.push(In.vertexUvs),Tn.push(In.fogExp2),Tn.push(In.sizeAttenuation),Tn.push(In.morphTargetsCount),Tn.push(In.morphAttributeCount),Tn.push(In.numDirLights),Tn.push(In.numPointLights),Tn.push(In.numSpotLights),Tn.push(In.numSpotLightMaps),Tn.push(In.numHemiLights),Tn.push(In.numRectAreaLights),Tn.push(In.numDirLightShadows),Tn.push(In.numPointLightShadows),Tn.push(In.numSpotLightShadows),Tn.push(In.numSpotLightShadowsWithMaps),Tn.push(In.shadowMapType),Tn.push(In.toneMapping),Tn.push(In.numClippingPlanes),Tn.push(In.numClipIntersection),Tn.push(In.depthPacking)}function dn(Tn,In){At.disableAll(),In.isWebGL2&&At.enable(0),In.supportsVertexTextures&&At.enable(1),In.instancing&&At.enable(2),In.instancingColor&&At.enable(3),In.map&&At.enable(4),In.matcap&&At.enable(5),In.envMap&&At.enable(6),In.lightMap&&At.enable(7),In.aoMap&&At.enable(8),In.emissiveMap&&At.enable(9),In.bumpMap&&At.enable(10),In.normalMap&&At.enable(11),In.objectSpaceNormalMap&&At.enable(12),In.tangentSpaceNormalMap&&At.enable(13),In.clearcoat&&At.enable(14),In.clearcoatMap&&At.enable(15),In.clearcoatRoughnessMap&&At.enable(16),In.clearcoatNormalMap&&At.enable(17),In.iridescence&&At.enable(18),In.iridescenceMap&&At.enable(19),In.iridescenceThicknessMap&&At.enable(20),In.displacementMap&&At.enable(21),In.specularMap&&At.enable(22),In.roughnessMap&&At.enable(23),In.metalnessMap&&At.enable(24),In.gradientMap&&At.enable(25),In.alphaMap&&At.enable(26),In.alphaTest&&At.enable(27),In.vertexColors&&At.enable(28),In.vertexAlphas&&At.enable(29),In.vertexUvs&&At.enable(30),In.vertexTangents&&At.enable(31),In.uvsVertexOnly&&At.enable(32),Tn.push(At.mask),At.disableAll(),In.fog&&At.enable(0),In.useFog&&At.enable(1),In.flatShading&&At.enable(2),In.logarithmicDepthBuffer&&At.enable(3),In.skinning&&At.enable(4),In.morphTargets&&At.enable(5),In.morphNormals&&At.enable(6),In.morphColors&&At.enable(7),In.premultipliedAlpha&&At.enable(8),In.shadowMapEnabled&&At.enable(9),In.useLegacyLights&&At.enable(10),In.doubleSided&&At.enable(11),In.flipSided&&At.enable(12),In.useDepthPacking&&At.enable(13),In.dithering&&At.enable(14),In.specularIntensityMap&&At.enable(15),In.specularColorMap&&At.enable(16),In.transmission&&At.enable(17),In.transmissionMap&&At.enable(18),In.thicknessMap&&At.enable(19),In.sheen&&At.enable(20),In.sheenColorMap&&At.enable(21),In.sheenRoughnessMap&&At.enable(22),In.decodeVideoTexture&&At.enable(23),In.opaque&&At.enable(24),Tn.push(At.mask)}function pn(Tn){const In=Zt[Tn.type];let Pn;if(In){const zn=ShaderLib[In];Pn=UniformsUtils.clone(zn.uniforms)}else Pn=Tn.uniforms;return Pn}function gn(Tn,In){let Pn;for(let zn=0,An=Dt.length;zn<An;zn++){const Gn=Dt[zn];if(Gn.cacheKey===In){Pn=Gn,++Pn.usedTimes;break}}return Pn===void 0&&(Pn=new WebGLProgram(ft,In,Tn,Et),Dt.push(Pn)),Pn}function vn(Tn){if(--Tn.usedTimes===0){const In=Dt.indexOf(Tn);Dt[In]=Dt[Dt.length-1],Dt.pop(),Tn.destroy()}}function bn(Tn){Rt.remove(Tn)}function $n(){Rt.dispose()}return{getParameters:Kt,getProgramCacheKey:cn,getUniforms:pn,acquireProgram:gn,releaseProgram:vn,releaseShaderCache:bn,programs:Dt,dispose:$n}}function WebGLProperties(){let ft=new WeakMap;function lt(Et){let Ct=ft.get(Et);return Ct===void 0&&(Ct={},ft.set(Et,Ct)),Ct}function dt(Et){ft.delete(Et)}function vt(Et,Ct,At){ft.get(Et)[Ct]=At}function St(){ft=new WeakMap}return{get:lt,remove:dt,update:vt,dispose:St}}function painterSortStable(ft,lt){return ft.groupOrder!==lt.groupOrder?ft.groupOrder-lt.groupOrder:ft.renderOrder!==lt.renderOrder?ft.renderOrder-lt.renderOrder:ft.material.id!==lt.material.id?ft.material.id-lt.material.id:ft.z!==lt.z?ft.z-lt.z:ft.id-lt.id}function reversePainterSortStable(ft,lt){return ft.groupOrder!==lt.groupOrder?ft.groupOrder-lt.groupOrder:ft.renderOrder!==lt.renderOrder?ft.renderOrder-lt.renderOrder:ft.z!==lt.z?lt.z-ft.z:ft.id-lt.id}function WebGLRenderList(){const ft=[];let lt=0;const dt=[],vt=[],St=[];function Et(){lt=0,dt.length=0,vt.length=0,St.length=0}function Ct(Ft,Ut,Wt,Zt,Kt,cn){let hn=ft[lt];return hn===void 0?(hn={id:Ft.id,object:Ft,geometry:Ut,material:Wt,groupOrder:Zt,renderOrder:Ft.renderOrder,z:Kt,group:cn},ft[lt]=hn):(hn.id=Ft.id,hn.object=Ft,hn.geometry=Ut,hn.material=Wt,hn.groupOrder=Zt,hn.renderOrder=Ft.renderOrder,hn.z=Kt,hn.group=cn),lt++,hn}function At(Ft,Ut,Wt,Zt,Kt,cn){const hn=Ct(Ft,Ut,Wt,Zt,Kt,cn);Wt.transmission>0?vt.push(hn):Wt.transparent===!0?St.push(hn):dt.push(hn)}function Rt(Ft,Ut,Wt,Zt,Kt,cn){const hn=Ct(Ft,Ut,Wt,Zt,Kt,cn);Wt.transmission>0?vt.unshift(hn):Wt.transparent===!0?St.unshift(hn):dt.unshift(hn)}function Dt(Ft,Ut){dt.length>1&&dt.sort(Ft||painterSortStable),vt.length>1&&vt.sort(Ut||reversePainterSortStable),St.length>1&&St.sort(Ut||reversePainterSortStable)}function Nt(){for(let Ft=lt,Ut=ft.length;Ft<Ut;Ft++){const Wt=ft[Ft];if(Wt.id===null)break;Wt.id=null,Wt.object=null,Wt.geometry=null,Wt.material=null,Wt.group=null}}return{opaque:dt,transmissive:vt,transparent:St,init:Et,push:At,unshift:Rt,finish:Nt,sort:Dt}}function WebGLRenderLists(){let ft=new WeakMap;function lt(vt,St){const Et=ft.get(vt);let Ct;return Et===void 0?(Ct=new WebGLRenderList,ft.set(vt,[Ct])):St>=Et.length?(Ct=new WebGLRenderList,Et.push(Ct)):Ct=Et[St],Ct}function dt(){ft=new WeakMap}return{get:lt,dispose:dt}}function UniformsCache(){const ft={};return{get:function(lt){if(ft[lt.id]!==void 0)return ft[lt.id];let dt;switch(lt.type){case"DirectionalLight":dt={direction:new Vector3,color:new Color};break;case"SpotLight":dt={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":dt={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":dt={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":dt={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ft[lt.id]=dt,dt}}}function ShadowUniformsCache(){const ft={};return{get:function(lt){if(ft[lt.id]!==void 0)return ft[lt.id];let dt;switch(lt.type){case"DirectionalLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ft[lt.id]=dt,dt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(ft,lt){return(lt.castShadow?2:0)-(ft.castShadow?2:0)+(lt.map?1:0)-(ft.map?1:0)}function WebGLLights(ft,lt){const dt=new UniformsCache,vt=ShadowUniformsCache(),St={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let Nt=0;Nt<9;Nt++)St.probe.push(new Vector3);const Et=new Vector3,Ct=new Matrix4,At=new Matrix4;function Rt(Nt,Ft){let Ut=0,Wt=0,Zt=0;for(let zn=0;zn<9;zn++)St.probe[zn].set(0,0,0);let Kt=0,cn=0,hn=0,dn=0,pn=0,gn=0,vn=0,bn=0,$n=0,Tn=0;Nt.sort(shadowCastingAndTexturingLightsFirst);const In=Ft===!0?Math.PI:1;for(let zn=0,An=Nt.length;zn<An;zn++){const Gn=Nt[zn],xn=Gn.color,Qn=Gn.intensity,qn=Gn.distance,nr=Gn.shadow&&Gn.shadow.map?Gn.shadow.map.texture:null;if(Gn.isAmbientLight)Ut+=xn.r*Qn*In,Wt+=xn.g*Qn*In,Zt+=xn.b*Qn*In;else if(Gn.isLightProbe)for(let Un=0;Un<9;Un++)St.probe[Un].addScaledVector(Gn.sh.coefficients[Un],Qn);else if(Gn.isDirectionalLight){const Un=dt.get(Gn);if(Un.color.copy(Gn.color).multiplyScalar(Gn.intensity*In),Gn.castShadow){const Nn=Gn.shadow,jn=vt.get(Gn);jn.shadowBias=Nn.bias,jn.shadowNormalBias=Nn.normalBias,jn.shadowRadius=Nn.radius,jn.shadowMapSize=Nn.mapSize,St.directionalShadow[Kt]=jn,St.directionalShadowMap[Kt]=nr,St.directionalShadowMatrix[Kt]=Gn.shadow.matrix,gn++}St.directional[Kt]=Un,Kt++}else if(Gn.isSpotLight){const Un=dt.get(Gn);Un.position.setFromMatrixPosition(Gn.matrixWorld),Un.color.copy(xn).multiplyScalar(Qn*In),Un.distance=qn,Un.coneCos=Math.cos(Gn.angle),Un.penumbraCos=Math.cos(Gn.angle*(1-Gn.penumbra)),Un.decay=Gn.decay,St.spot[hn]=Un;const Nn=Gn.shadow;if(Gn.map&&(St.spotLightMap[$n]=Gn.map,$n++,Nn.updateMatrices(Gn),Gn.castShadow&&Tn++),St.spotLightMatrix[hn]=Nn.matrix,Gn.castShadow){const jn=vt.get(Gn);jn.shadowBias=Nn.bias,jn.shadowNormalBias=Nn.normalBias,jn.shadowRadius=Nn.radius,jn.shadowMapSize=Nn.mapSize,St.spotShadow[hn]=jn,St.spotShadowMap[hn]=nr,bn++}hn++}else if(Gn.isRectAreaLight){const Un=dt.get(Gn);Un.color.copy(xn).multiplyScalar(Qn),Un.halfWidth.set(Gn.width*.5,0,0),Un.halfHeight.set(0,Gn.height*.5,0),St.rectArea[dn]=Un,dn++}else if(Gn.isPointLight){const Un=dt.get(Gn);if(Un.color.copy(Gn.color).multiplyScalar(Gn.intensity*In),Un.distance=Gn.distance,Un.decay=Gn.decay,Gn.castShadow){const Nn=Gn.shadow,jn=vt.get(Gn);jn.shadowBias=Nn.bias,jn.shadowNormalBias=Nn.normalBias,jn.shadowRadius=Nn.radius,jn.shadowMapSize=Nn.mapSize,jn.shadowCameraNear=Nn.camera.near,jn.shadowCameraFar=Nn.camera.far,St.pointShadow[cn]=jn,St.pointShadowMap[cn]=nr,St.pointShadowMatrix[cn]=Gn.shadow.matrix,vn++}St.point[cn]=Un,cn++}else if(Gn.isHemisphereLight){const Un=dt.get(Gn);Un.skyColor.copy(Gn.color).multiplyScalar(Qn*In),Un.groundColor.copy(Gn.groundColor).multiplyScalar(Qn*In),St.hemi[pn]=Un,pn++}}dn>0&&(lt.isWebGL2||ft.has("OES_texture_float_linear")===!0?(St.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,St.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):ft.has("OES_texture_half_float_linear")===!0?(St.rectAreaLTC1=UniformsLib.LTC_HALF_1,St.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),St.ambient[0]=Ut,St.ambient[1]=Wt,St.ambient[2]=Zt;const Pn=St.hash;(Pn.directionalLength!==Kt||Pn.pointLength!==cn||Pn.spotLength!==hn||Pn.rectAreaLength!==dn||Pn.hemiLength!==pn||Pn.numDirectionalShadows!==gn||Pn.numPointShadows!==vn||Pn.numSpotShadows!==bn||Pn.numSpotMaps!==$n)&&(St.directional.length=Kt,St.spot.length=hn,St.rectArea.length=dn,St.point.length=cn,St.hemi.length=pn,St.directionalShadow.length=gn,St.directionalShadowMap.length=gn,St.pointShadow.length=vn,St.pointShadowMap.length=vn,St.spotShadow.length=bn,St.spotShadowMap.length=bn,St.directionalShadowMatrix.length=gn,St.pointShadowMatrix.length=vn,St.spotLightMatrix.length=bn+$n-Tn,St.spotLightMap.length=$n,St.numSpotLightShadowsWithMaps=Tn,Pn.directionalLength=Kt,Pn.pointLength=cn,Pn.spotLength=hn,Pn.rectAreaLength=dn,Pn.hemiLength=pn,Pn.numDirectionalShadows=gn,Pn.numPointShadows=vn,Pn.numSpotShadows=bn,Pn.numSpotMaps=$n,St.version=nextVersion++)}function Dt(Nt,Ft){let Ut=0,Wt=0,Zt=0,Kt=0,cn=0;const hn=Ft.matrixWorldInverse;for(let dn=0,pn=Nt.length;dn<pn;dn++){const gn=Nt[dn];if(gn.isDirectionalLight){const vn=St.directional[Ut];vn.direction.setFromMatrixPosition(gn.matrixWorld),Et.setFromMatrixPosition(gn.target.matrixWorld),vn.direction.sub(Et),vn.direction.transformDirection(hn),Ut++}else if(gn.isSpotLight){const vn=St.spot[Zt];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),vn.direction.setFromMatrixPosition(gn.matrixWorld),Et.setFromMatrixPosition(gn.target.matrixWorld),vn.direction.sub(Et),vn.direction.transformDirection(hn),Zt++}else if(gn.isRectAreaLight){const vn=St.rectArea[Kt];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),At.identity(),Ct.copy(gn.matrixWorld),Ct.premultiply(hn),At.extractRotation(Ct),vn.halfWidth.set(gn.width*.5,0,0),vn.halfHeight.set(0,gn.height*.5,0),vn.halfWidth.applyMatrix4(At),vn.halfHeight.applyMatrix4(At),Kt++}else if(gn.isPointLight){const vn=St.point[Wt];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),Wt++}else if(gn.isHemisphereLight){const vn=St.hemi[cn];vn.direction.setFromMatrixPosition(gn.matrixWorld),vn.direction.transformDirection(hn),cn++}}}return{setup:Rt,setupView:Dt,state:St}}function WebGLRenderState(ft,lt){const dt=new WebGLLights(ft,lt),vt=[],St=[];function Et(){vt.length=0,St.length=0}function Ct(Ft){vt.push(Ft)}function At(Ft){St.push(Ft)}function Rt(Ft){dt.setup(vt,Ft)}function Dt(Ft){dt.setupView(vt,Ft)}return{init:Et,state:{lightsArray:vt,shadowsArray:St,lights:dt},setupLights:Rt,setupLightsView:Dt,pushLight:Ct,pushShadow:At}}function WebGLRenderStates(ft,lt){let dt=new WeakMap;function vt(Et,Ct=0){const At=dt.get(Et);let Rt;return At===void 0?(Rt=new WebGLRenderState(ft,lt),dt.set(Et,[Rt])):Ct>=At.length?(Rt=new WebGLRenderState(ft,lt),At.push(Rt)):Rt=At[Ct],Rt}function St(){dt=new WeakMap}return{get:vt,dispose:St}}class MeshDepthMaterial extends Material{constructor(lt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(lt)}copy(lt){return super.copy(lt),this.depthPacking=lt.depthPacking,this.map=lt.map,this.alphaMap=lt.alphaMap,this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(lt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(lt)}copy(lt){return super.copy(lt),this.referencePosition.copy(lt.referencePosition),this.nearDistance=lt.nearDistance,this.farDistance=lt.farDistance,this.map=lt.map,this.alphaMap=lt.alphaMap,this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(ft,lt,dt){let vt=new Frustum;const St=new Vector2,Et=new Vector2,Ct=new Vector4,At=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),Rt=new MeshDistanceMaterial,Dt={},Nt=dt.maxTextureSize,Ft={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Ut=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),Wt=Ut.clone();Wt.defines.HORIZONTAL_PASS=1;const Zt=new BufferGeometry;Zt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Kt=new Mesh(Zt,Ut),cn=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(gn,vn,bn){if(cn.enabled===!1||cn.autoUpdate===!1&&cn.needsUpdate===!1||gn.length===0)return;const $n=ft.getRenderTarget(),Tn=ft.getActiveCubeFace(),In=ft.getActiveMipmapLevel(),Pn=ft.state;Pn.setBlending(NoBlending),Pn.buffers.color.setClear(1,1,1,1),Pn.buffers.depth.setTest(!0),Pn.setScissorTest(!1);for(let zn=0,An=gn.length;zn<An;zn++){const Gn=gn[zn],xn=Gn.shadow;if(xn===void 0){console.warn("THREE.WebGLShadowMap:",Gn,"has no shadow.");continue}if(xn.autoUpdate===!1&&xn.needsUpdate===!1)continue;St.copy(xn.mapSize);const Qn=xn.getFrameExtents();if(St.multiply(Qn),Et.copy(xn.mapSize),(St.x>Nt||St.y>Nt)&&(St.x>Nt&&(Et.x=Math.floor(Nt/Qn.x),St.x=Et.x*Qn.x,xn.mapSize.x=Et.x),St.y>Nt&&(Et.y=Math.floor(Nt/Qn.y),St.y=Et.y*Qn.y,xn.mapSize.y=Et.y)),xn.map===null){const nr=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};xn.map=new WebGLRenderTarget(St.x,St.y,nr),xn.map.texture.name=Gn.name+".shadowMap",xn.camera.updateProjectionMatrix()}ft.setRenderTarget(xn.map),ft.clear();const qn=xn.getViewportCount();for(let nr=0;nr<qn;nr++){const Un=xn.getViewport(nr);Ct.set(Et.x*Un.x,Et.y*Un.y,Et.x*Un.z,Et.y*Un.w),Pn.viewport(Ct),xn.updateMatrices(Gn,nr),vt=xn.getFrustum(),pn(vn,bn,xn.camera,Gn,this.type)}xn.isPointLightShadow!==!0&&this.type===VSMShadowMap&&hn(xn,bn),xn.needsUpdate=!1}cn.needsUpdate=!1,ft.setRenderTarget($n,Tn,In)};function hn(gn,vn){const bn=lt.update(Kt);Ut.defines.VSM_SAMPLES!==gn.blurSamples&&(Ut.defines.VSM_SAMPLES=gn.blurSamples,Wt.defines.VSM_SAMPLES=gn.blurSamples,Ut.needsUpdate=!0,Wt.needsUpdate=!0),gn.mapPass===null&&(gn.mapPass=new WebGLRenderTarget(St.x,St.y)),Ut.uniforms.shadow_pass.value=gn.map.texture,Ut.uniforms.resolution.value=gn.mapSize,Ut.uniforms.radius.value=gn.radius,ft.setRenderTarget(gn.mapPass),ft.clear(),ft.renderBufferDirect(vn,null,bn,Ut,Kt,null),Wt.uniforms.shadow_pass.value=gn.mapPass.texture,Wt.uniforms.resolution.value=gn.mapSize,Wt.uniforms.radius.value=gn.radius,ft.setRenderTarget(gn.map),ft.clear(),ft.renderBufferDirect(vn,null,bn,Wt,Kt,null)}function dn(gn,vn,bn,$n,Tn,In){let Pn=null;const zn=bn.isPointLight===!0?gn.customDistanceMaterial:gn.customDepthMaterial;if(zn!==void 0)Pn=zn;else if(Pn=bn.isPointLight===!0?Rt:At,ft.localClippingEnabled&&vn.clipShadows===!0&&Array.isArray(vn.clippingPlanes)&&vn.clippingPlanes.length!==0||vn.displacementMap&&vn.displacementScale!==0||vn.alphaMap&&vn.alphaTest>0||vn.map&&vn.alphaTest>0){const An=Pn.uuid,Gn=vn.uuid;let xn=Dt[An];xn===void 0&&(xn={},Dt[An]=xn);let Qn=xn[Gn];Qn===void 0&&(Qn=Pn.clone(),xn[Gn]=Qn),Pn=Qn}return Pn.visible=vn.visible,Pn.wireframe=vn.wireframe,In===VSMShadowMap?Pn.side=vn.shadowSide!==null?vn.shadowSide:vn.side:Pn.side=vn.shadowSide!==null?vn.shadowSide:Ft[vn.side],Pn.alphaMap=vn.alphaMap,Pn.alphaTest=vn.alphaTest,Pn.map=vn.map,Pn.clipShadows=vn.clipShadows,Pn.clippingPlanes=vn.clippingPlanes,Pn.clipIntersection=vn.clipIntersection,Pn.displacementMap=vn.displacementMap,Pn.displacementScale=vn.displacementScale,Pn.displacementBias=vn.displacementBias,Pn.wireframeLinewidth=vn.wireframeLinewidth,Pn.linewidth=vn.linewidth,bn.isPointLight===!0&&Pn.isMeshDistanceMaterial===!0&&(Pn.referencePosition.setFromMatrixPosition(bn.matrixWorld),Pn.nearDistance=$n,Pn.farDistance=Tn),Pn}function pn(gn,vn,bn,$n,Tn){if(gn.visible===!1)return;if(gn.layers.test(vn.layers)&&(gn.isMesh||gn.isLine||gn.isPoints)&&(gn.castShadow||gn.receiveShadow&&Tn===VSMShadowMap)&&(!gn.frustumCulled||vt.intersectsObject(gn))){gn.modelViewMatrix.multiplyMatrices(bn.matrixWorldInverse,gn.matrixWorld);const zn=lt.update(gn),An=gn.material;if(Array.isArray(An)){const Gn=zn.groups;for(let xn=0,Qn=Gn.length;xn<Qn;xn++){const qn=Gn[xn],nr=An[qn.materialIndex];if(nr&&nr.visible){const Un=dn(gn,nr,$n,bn.near,bn.far,Tn);ft.renderBufferDirect(bn,null,zn,Un,gn,qn)}}}else if(An.visible){const Gn=dn(gn,An,$n,bn.near,bn.far,Tn);ft.renderBufferDirect(bn,null,zn,Gn,gn,null)}}const Pn=gn.children;for(let zn=0,An=Pn.length;zn<An;zn++)pn(Pn[zn],vn,bn,$n,Tn)}}function WebGLState(ft,lt,dt){const vt=dt.isWebGL2;function St(){let Kn=!1;const Cr=new Vector4;let qr=null;const oo=new Vector4(0,0,0,0);return{setMask:function(co){qr!==co&&!Kn&&(ft.colorMask(co,co,co,co),qr=co)},setLocked:function(co){Kn=co},setClear:function(co,jo,Xo,rs,zo){zo===!0&&(co*=rs,jo*=rs,Xo*=rs),Cr.set(co,jo,Xo,rs),oo.equals(Cr)===!1&&(ft.clearColor(co,jo,Xo,rs),oo.copy(Cr))},reset:function(){Kn=!1,qr=null,oo.set(-1,0,0,0)}}}function Et(){let Kn=!1,Cr=null,qr=null,oo=null;return{setTest:function(co){co?fr(2929):Or(2929)},setMask:function(co){Cr!==co&&!Kn&&(ft.depthMask(co),Cr=co)},setFunc:function(co){if(qr!==co){switch(co){case NeverDepth:ft.depthFunc(512);break;case AlwaysDepth:ft.depthFunc(519);break;case LessDepth:ft.depthFunc(513);break;case LessEqualDepth:ft.depthFunc(515);break;case EqualDepth:ft.depthFunc(514);break;case GreaterEqualDepth:ft.depthFunc(518);break;case GreaterDepth:ft.depthFunc(516);break;case NotEqualDepth:ft.depthFunc(517);break;default:ft.depthFunc(515)}qr=co}},setLocked:function(co){Kn=co},setClear:function(co){oo!==co&&(ft.clearDepth(co),oo=co)},reset:function(){Kn=!1,Cr=null,qr=null,oo=null}}}function Ct(){let Kn=!1,Cr=null,qr=null,oo=null,co=null,jo=null,Xo=null,rs=null,zo=null;return{setTest:function(os){Kn||(os?fr(2960):Or(2960))},setMask:function(os){Cr!==os&&!Kn&&(ft.stencilMask(os),Cr=os)},setFunc:function(os,Lo,Zo){(qr!==os||oo!==Lo||co!==Zo)&&(ft.stencilFunc(os,Lo,Zo),qr=os,oo=Lo,co=Zo)},setOp:function(os,Lo,Zo){(jo!==os||Xo!==Lo||rs!==Zo)&&(ft.stencilOp(os,Lo,Zo),jo=os,Xo=Lo,rs=Zo)},setLocked:function(os){Kn=os},setClear:function(os){zo!==os&&(ft.clearStencil(os),zo=os)},reset:function(){Kn=!1,Cr=null,qr=null,oo=null,co=null,jo=null,Xo=null,rs=null,zo=null}}}const At=new St,Rt=new Et,Dt=new Ct,Nt=new WeakMap,Ft=new WeakMap;let Ut={},Wt={},Zt=new WeakMap,Kt=[],cn=null,hn=!1,dn=null,pn=null,gn=null,vn=null,bn=null,$n=null,Tn=null,In=!1,Pn=null,zn=null,An=null,Gn=null,xn=null;const Qn=ft.getParameter(35661);let qn=!1,nr=0;const Un=ft.getParameter(7938);Un.indexOf("WebGL")!==-1?(nr=parseFloat(/^WebGL (\d)/.exec(Un)[1]),qn=nr>=1):Un.indexOf("OpenGL ES")!==-1&&(nr=parseFloat(/^OpenGL ES (\d)/.exec(Un)[1]),qn=nr>=2);let Nn=null,jn={};const Ln=ft.getParameter(3088),Cn=ft.getParameter(2978),tr=new Vector4().fromArray(Ln),ir=new Vector4().fromArray(Cn);function Zn(Kn,Cr,qr){const oo=new Uint8Array(4),co=ft.createTexture();ft.bindTexture(Kn,co),ft.texParameteri(Kn,10241,9728),ft.texParameteri(Kn,10240,9728);for(let jo=0;jo<qr;jo++)ft.texImage2D(Cr+jo,0,6408,1,1,0,6408,5121,oo);return co}const br={};br[3553]=Zn(3553,3553,1),br[34067]=Zn(34067,34069,6),At.setClear(0,0,0,1),Rt.setClear(1),Dt.setClear(0),fr(2929),Rt.setFunc(LessEqualDepth),hr(!1),Jn(CullFaceBack),fr(2884),Dn(NoBlending);function fr(Kn){Ut[Kn]!==!0&&(ft.enable(Kn),Ut[Kn]=!0)}function Or(Kn){Ut[Kn]!==!1&&(ft.disable(Kn),Ut[Kn]=!1)}function Pr(Kn,Cr){return Wt[Kn]!==Cr?(ft.bindFramebuffer(Kn,Cr),Wt[Kn]=Cr,vt&&(Kn===36009&&(Wt[36160]=Cr),Kn===36160&&(Wt[36009]=Cr)),!0):!1}function zr(Kn,Cr){let qr=Kt,oo=!1;if(Kn)if(qr=Zt.get(Cr),qr===void 0&&(qr=[],Zt.set(Cr,qr)),Kn.isWebGLMultipleRenderTargets){const co=Kn.texture;if(qr.length!==co.length||qr[0]!==36064){for(let jo=0,Xo=co.length;jo<Xo;jo++)qr[jo]=36064+jo;qr.length=co.length,oo=!0}}else qr[0]!==36064&&(qr[0]=36064,oo=!0);else qr[0]!==1029&&(qr[0]=1029,oo=!0);oo&&(dt.isWebGL2?ft.drawBuffers(qr):lt.get("WEBGL_draw_buffers").drawBuffersWEBGL(qr))}function Dr(Kn){return cn!==Kn?(ft.useProgram(Kn),cn=Kn,!0):!1}const _r={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(vt)_r[MinEquation]=32775,_r[MaxEquation]=32776;else{const Kn=lt.get("EXT_blend_minmax");Kn!==null&&(_r[MinEquation]=Kn.MIN_EXT,_r[MaxEquation]=Kn.MAX_EXT)}const Nr={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Dn(Kn,Cr,qr,oo,co,jo,Xo,rs){if(Kn===NoBlending){hn===!0&&(Or(3042),hn=!1);return}if(hn===!1&&(fr(3042),hn=!0),Kn!==CustomBlending){if(Kn!==dn||rs!==In){if((pn!==AddEquation||bn!==AddEquation)&&(ft.blendEquation(32774),pn=AddEquation,bn=AddEquation),rs)switch(Kn){case NormalBlending:ft.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ft.blendFunc(1,1);break;case SubtractiveBlending:ft.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:ft.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kn);break}else switch(Kn){case NormalBlending:ft.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ft.blendFunc(770,1);break;case SubtractiveBlending:ft.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:ft.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kn);break}gn=null,vn=null,$n=null,Tn=null,dn=Kn,In=rs}return}co=co||Cr,jo=jo||qr,Xo=Xo||oo,(Cr!==pn||co!==bn)&&(ft.blendEquationSeparate(_r[Cr],_r[co]),pn=Cr,bn=co),(qr!==gn||oo!==vn||jo!==$n||Xo!==Tn)&&(ft.blendFuncSeparate(Nr[qr],Nr[oo],Nr[jo],Nr[Xo]),gn=qr,vn=oo,$n=jo,Tn=Xo),dn=Kn,In=!1}function yr(Kn,Cr){Kn.side===DoubleSide?Or(2884):fr(2884);let qr=Kn.side===BackSide;Cr&&(qr=!qr),hr(qr),Kn.blending===NormalBlending&&Kn.transparent===!1?Dn(NoBlending):Dn(Kn.blending,Kn.blendEquation,Kn.blendSrc,Kn.blendDst,Kn.blendEquationAlpha,Kn.blendSrcAlpha,Kn.blendDstAlpha,Kn.premultipliedAlpha),Rt.setFunc(Kn.depthFunc),Rt.setTest(Kn.depthTest),Rt.setMask(Kn.depthWrite),At.setMask(Kn.colorWrite);const oo=Kn.stencilWrite;Dt.setTest(oo),oo&&(Dt.setMask(Kn.stencilWriteMask),Dt.setFunc(Kn.stencilFunc,Kn.stencilRef,Kn.stencilFuncMask),Dt.setOp(Kn.stencilFail,Kn.stencilZFail,Kn.stencilZPass)),ar(Kn.polygonOffset,Kn.polygonOffsetFactor,Kn.polygonOffsetUnits),Kn.alphaToCoverage===!0?fr(32926):Or(32926)}function hr(Kn){Pn!==Kn&&(Kn?ft.frontFace(2304):ft.frontFace(2305),Pn=Kn)}function Jn(Kn){Kn!==CullFaceNone?(fr(2884),Kn!==zn&&(Kn===CullFaceBack?ft.cullFace(1029):Kn===CullFaceFront?ft.cullFace(1028):ft.cullFace(1032))):Or(2884),zn=Kn}function Yn(Kn){Kn!==An&&(qn&&ft.lineWidth(Kn),An=Kn)}function ar(Kn,Cr,qr){Kn?(fr(32823),(Gn!==Cr||xn!==qr)&&(ft.polygonOffset(Cr,qr),Gn=Cr,xn=qr)):Or(32823)}function Sr(Kn){Kn?fr(3089):Or(3089)}function gr(Kn){Kn===void 0&&(Kn=33984+Qn-1),Nn!==Kn&&(ft.activeTexture(Kn),Nn=Kn)}function Vn(Kn,Cr,qr){qr===void 0&&(Nn===null?qr=33984+Qn-1:qr=Nn);let oo=jn[qr];oo===void 0&&(oo={type:void 0,texture:void 0},jn[qr]=oo),(oo.type!==Kn||oo.texture!==Cr)&&(Nn!==qr&&(ft.activeTexture(qr),Nn=qr),ft.bindTexture(Kn,Cr||br[Kn]),oo.type=Kn,oo.texture=Cr)}function Wn(){const Kn=jn[Nn];Kn!==void 0&&Kn.type!==void 0&&(ft.bindTexture(Kn.type,null),Kn.type=void 0,Kn.texture=void 0)}function rr(){try{ft.compressedTexImage2D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function lr(){try{ft.compressedTexImage3D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function xr(){try{ft.texSubImage2D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function Fr(){try{ft.texSubImage3D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function mr(){try{ft.compressedTexSubImage2D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function Yr(){try{ft.compressedTexSubImage3D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function Vr(){try{ft.texStorage2D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function eo(){try{ft.texStorage3D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function ur(){try{ft.texImage2D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function kr(){try{ft.texImage3D.apply(ft,arguments)}catch(Kn){console.error("THREE.WebGLState:",Kn)}}function Br(Kn){tr.equals(Kn)===!1&&(ft.scissor(Kn.x,Kn.y,Kn.z,Kn.w),tr.copy(Kn))}function Rn(Kn){ir.equals(Kn)===!1&&(ft.viewport(Kn.x,Kn.y,Kn.z,Kn.w),ir.copy(Kn))}function Xn(Kn,Cr){let qr=Ft.get(Cr);qr===void 0&&(qr=new WeakMap,Ft.set(Cr,qr));let oo=qr.get(Kn);oo===void 0&&(oo=ft.getUniformBlockIndex(Cr,Kn.name),qr.set(Kn,oo))}function cr(Kn,Cr){const oo=Ft.get(Cr).get(Kn);Nt.get(Cr)!==oo&&(ft.uniformBlockBinding(Cr,oo,Kn.__bindingPointIndex),Nt.set(Cr,oo))}function wr(){ft.disable(3042),ft.disable(2884),ft.disable(2929),ft.disable(32823),ft.disable(3089),ft.disable(2960),ft.disable(32926),ft.blendEquation(32774),ft.blendFunc(1,0),ft.blendFuncSeparate(1,0,1,0),ft.colorMask(!0,!0,!0,!0),ft.clearColor(0,0,0,0),ft.depthMask(!0),ft.depthFunc(513),ft.clearDepth(1),ft.stencilMask(4294967295),ft.stencilFunc(519,0,4294967295),ft.stencilOp(7680,7680,7680),ft.clearStencil(0),ft.cullFace(1029),ft.frontFace(2305),ft.polygonOffset(0,0),ft.activeTexture(33984),ft.bindFramebuffer(36160,null),vt===!0&&(ft.bindFramebuffer(36009,null),ft.bindFramebuffer(36008,null)),ft.useProgram(null),ft.lineWidth(1),ft.scissor(0,0,ft.canvas.width,ft.canvas.height),ft.viewport(0,0,ft.canvas.width,ft.canvas.height),Ut={},Nn=null,jn={},Wt={},Zt=new WeakMap,Kt=[],cn=null,hn=!1,dn=null,pn=null,gn=null,vn=null,bn=null,$n=null,Tn=null,In=!1,Pn=null,zn=null,An=null,Gn=null,xn=null,tr.set(0,0,ft.canvas.width,ft.canvas.height),ir.set(0,0,ft.canvas.width,ft.canvas.height),At.reset(),Rt.reset(),Dt.reset()}return{buffers:{color:At,depth:Rt,stencil:Dt},enable:fr,disable:Or,bindFramebuffer:Pr,drawBuffers:zr,useProgram:Dr,setBlending:Dn,setMaterial:yr,setFlipSided:hr,setCullFace:Jn,setLineWidth:Yn,setPolygonOffset:ar,setScissorTest:Sr,activeTexture:gr,bindTexture:Vn,unbindTexture:Wn,compressedTexImage2D:rr,compressedTexImage3D:lr,texImage2D:ur,texImage3D:kr,updateUBOMapping:Xn,uniformBlockBinding:cr,texStorage2D:Vr,texStorage3D:eo,texSubImage2D:xr,texSubImage3D:Fr,compressedTexSubImage2D:mr,compressedTexSubImage3D:Yr,scissor:Br,viewport:Rn,reset:wr}}function WebGLTextures(ft,lt,dt,vt,St,Et,Ct){const At=St.isWebGL2,Rt=St.maxTextures,Dt=St.maxCubemapSize,Nt=St.maxTextureSize,Ft=St.maxSamples,Ut=lt.has("WEBGL_multisampled_render_to_texture")?lt.get("WEBGL_multisampled_render_to_texture"):null,Wt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Zt=new WeakMap;let Kt;const cn=new WeakMap;let hn=!1;try{hn=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function dn(Vn,Wn){return hn?new OffscreenCanvas(Vn,Wn):createElementNS$1("canvas")}function pn(Vn,Wn,rr,lr){let xr=1;if((Vn.width>lr||Vn.height>lr)&&(xr=lr/Math.max(Vn.width,Vn.height)),xr<1||Wn===!0)if(typeof HTMLImageElement<"u"&&Vn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Vn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Vn instanceof ImageBitmap){const Fr=Wn?floorPowerOfTwo:Math.floor,mr=Fr(xr*Vn.width),Yr=Fr(xr*Vn.height);Kt===void 0&&(Kt=dn(mr,Yr));const Vr=rr?dn(mr,Yr):Kt;return Vr.width=mr,Vr.height=Yr,Vr.getContext("2d").drawImage(Vn,0,0,mr,Yr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Vn.width+"x"+Vn.height+") to ("+mr+"x"+Yr+")."),Vr}else return"data"in Vn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Vn.width+"x"+Vn.height+")."),Vn;return Vn}function gn(Vn){return isPowerOfTwo(Vn.width)&&isPowerOfTwo(Vn.height)}function vn(Vn){return At?!1:Vn.wrapS!==ClampToEdgeWrapping||Vn.wrapT!==ClampToEdgeWrapping||Vn.minFilter!==NearestFilter&&Vn.minFilter!==LinearFilter}function bn(Vn,Wn){return Vn.generateMipmaps&&Wn&&Vn.minFilter!==NearestFilter&&Vn.minFilter!==LinearFilter}function $n(Vn){ft.generateMipmap(Vn)}function Tn(Vn,Wn,rr,lr,xr=!1){if(At===!1)return Wn;if(Vn!==null){if(ft[Vn]!==void 0)return ft[Vn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Vn+"'")}let Fr=Wn;return Wn===6403&&(rr===5126&&(Fr=33326),rr===5131&&(Fr=33325),rr===5121&&(Fr=33321)),Wn===33319&&(rr===5126&&(Fr=33328),rr===5131&&(Fr=33327),rr===5121&&(Fr=33323)),Wn===6408&&(rr===5126&&(Fr=34836),rr===5131&&(Fr=34842),rr===5121&&(Fr=lr===sRGBEncoding&&xr===!1?35907:32856),rr===32819&&(Fr=32854),rr===32820&&(Fr=32855)),(Fr===33325||Fr===33326||Fr===33327||Fr===33328||Fr===34842||Fr===34836)&&lt.get("EXT_color_buffer_float"),Fr}function In(Vn,Wn,rr){return bn(Vn,rr)===!0||Vn.isFramebufferTexture&&Vn.minFilter!==NearestFilter&&Vn.minFilter!==LinearFilter?Math.log2(Math.max(Wn.width,Wn.height))+1:Vn.mipmaps!==void 0&&Vn.mipmaps.length>0?Vn.mipmaps.length:Vn.isCompressedTexture&&Array.isArray(Vn.image)?Wn.mipmaps.length:1}function Pn(Vn){return Vn===NearestFilter||Vn===NearestMipmapNearestFilter||Vn===NearestMipmapLinearFilter?9728:9729}function zn(Vn){const Wn=Vn.target;Wn.removeEventListener("dispose",zn),Gn(Wn),Wn.isVideoTexture&&Zt.delete(Wn)}function An(Vn){const Wn=Vn.target;Wn.removeEventListener("dispose",An),Qn(Wn)}function Gn(Vn){const Wn=vt.get(Vn);if(Wn.__webglInit===void 0)return;const rr=Vn.source,lr=cn.get(rr);if(lr){const xr=lr[Wn.__cacheKey];xr.usedTimes--,xr.usedTimes===0&&xn(Vn),Object.keys(lr).length===0&&cn.delete(rr)}vt.remove(Vn)}function xn(Vn){const Wn=vt.get(Vn);ft.deleteTexture(Wn.__webglTexture);const rr=Vn.source,lr=cn.get(rr);delete lr[Wn.__cacheKey],Ct.memory.textures--}function Qn(Vn){const Wn=Vn.texture,rr=vt.get(Vn),lr=vt.get(Wn);if(lr.__webglTexture!==void 0&&(ft.deleteTexture(lr.__webglTexture),Ct.memory.textures--),Vn.depthTexture&&Vn.depthTexture.dispose(),Vn.isWebGLCubeRenderTarget)for(let xr=0;xr<6;xr++)ft.deleteFramebuffer(rr.__webglFramebuffer[xr]),rr.__webglDepthbuffer&&ft.deleteRenderbuffer(rr.__webglDepthbuffer[xr]);else{if(ft.deleteFramebuffer(rr.__webglFramebuffer),rr.__webglDepthbuffer&&ft.deleteRenderbuffer(rr.__webglDepthbuffer),rr.__webglMultisampledFramebuffer&&ft.deleteFramebuffer(rr.__webglMultisampledFramebuffer),rr.__webglColorRenderbuffer)for(let xr=0;xr<rr.__webglColorRenderbuffer.length;xr++)rr.__webglColorRenderbuffer[xr]&&ft.deleteRenderbuffer(rr.__webglColorRenderbuffer[xr]);rr.__webglDepthRenderbuffer&&ft.deleteRenderbuffer(rr.__webglDepthRenderbuffer)}if(Vn.isWebGLMultipleRenderTargets)for(let xr=0,Fr=Wn.length;xr<Fr;xr++){const mr=vt.get(Wn[xr]);mr.__webglTexture&&(ft.deleteTexture(mr.__webglTexture),Ct.memory.textures--),vt.remove(Wn[xr])}vt.remove(Wn),vt.remove(Vn)}let qn=0;function nr(){qn=0}function Un(){const Vn=qn;return Vn>=Rt&&console.warn("THREE.WebGLTextures: Trying to use "+Vn+" texture units while this GPU supports only "+Rt),qn+=1,Vn}function Nn(Vn){const Wn=[];return Wn.push(Vn.wrapS),Wn.push(Vn.wrapT),Wn.push(Vn.wrapR||0),Wn.push(Vn.magFilter),Wn.push(Vn.minFilter),Wn.push(Vn.anisotropy),Wn.push(Vn.internalFormat),Wn.push(Vn.format),Wn.push(Vn.type),Wn.push(Vn.generateMipmaps),Wn.push(Vn.premultiplyAlpha),Wn.push(Vn.flipY),Wn.push(Vn.unpackAlignment),Wn.push(Vn.encoding),Wn.join()}function jn(Vn,Wn){const rr=vt.get(Vn);if(Vn.isVideoTexture&&Sr(Vn),Vn.isRenderTargetTexture===!1&&Vn.version>0&&rr.__version!==Vn.version){const lr=Vn.image;if(lr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(lr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Or(rr,Vn,Wn);return}}dt.bindTexture(3553,rr.__webglTexture,33984+Wn)}function Ln(Vn,Wn){const rr=vt.get(Vn);if(Vn.version>0&&rr.__version!==Vn.version){Or(rr,Vn,Wn);return}dt.bindTexture(35866,rr.__webglTexture,33984+Wn)}function Cn(Vn,Wn){const rr=vt.get(Vn);if(Vn.version>0&&rr.__version!==Vn.version){Or(rr,Vn,Wn);return}dt.bindTexture(32879,rr.__webglTexture,33984+Wn)}function tr(Vn,Wn){const rr=vt.get(Vn);if(Vn.version>0&&rr.__version!==Vn.version){Pr(rr,Vn,Wn);return}dt.bindTexture(34067,rr.__webglTexture,33984+Wn)}const ir={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Zn={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function br(Vn,Wn,rr){if(rr?(ft.texParameteri(Vn,10242,ir[Wn.wrapS]),ft.texParameteri(Vn,10243,ir[Wn.wrapT]),(Vn===32879||Vn===35866)&&ft.texParameteri(Vn,32882,ir[Wn.wrapR]),ft.texParameteri(Vn,10240,Zn[Wn.magFilter]),ft.texParameteri(Vn,10241,Zn[Wn.minFilter])):(ft.texParameteri(Vn,10242,33071),ft.texParameteri(Vn,10243,33071),(Vn===32879||Vn===35866)&&ft.texParameteri(Vn,32882,33071),(Wn.wrapS!==ClampToEdgeWrapping||Wn.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ft.texParameteri(Vn,10240,Pn(Wn.magFilter)),ft.texParameteri(Vn,10241,Pn(Wn.minFilter)),Wn.minFilter!==NearestFilter&&Wn.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),lt.has("EXT_texture_filter_anisotropic")===!0){const lr=lt.get("EXT_texture_filter_anisotropic");if(Wn.magFilter===NearestFilter||Wn.minFilter!==NearestMipmapLinearFilter&&Wn.minFilter!==LinearMipmapLinearFilter||Wn.type===FloatType&&lt.has("OES_texture_float_linear")===!1||At===!1&&Wn.type===HalfFloatType&&lt.has("OES_texture_half_float_linear")===!1)return;(Wn.anisotropy>1||vt.get(Wn).__currentAnisotropy)&&(ft.texParameterf(Vn,lr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Wn.anisotropy,St.getMaxAnisotropy())),vt.get(Wn).__currentAnisotropy=Wn.anisotropy)}}function fr(Vn,Wn){let rr=!1;Vn.__webglInit===void 0&&(Vn.__webglInit=!0,Wn.addEventListener("dispose",zn));const lr=Wn.source;let xr=cn.get(lr);xr===void 0&&(xr={},cn.set(lr,xr));const Fr=Nn(Wn);if(Fr!==Vn.__cacheKey){xr[Fr]===void 0&&(xr[Fr]={texture:ft.createTexture(),usedTimes:0},Ct.memory.textures++,rr=!0),xr[Fr].usedTimes++;const mr=xr[Vn.__cacheKey];mr!==void 0&&(xr[Vn.__cacheKey].usedTimes--,mr.usedTimes===0&&xn(Wn)),Vn.__cacheKey=Fr,Vn.__webglTexture=xr[Fr].texture}return rr}function Or(Vn,Wn,rr){let lr=3553;(Wn.isDataArrayTexture||Wn.isCompressedArrayTexture)&&(lr=35866),Wn.isData3DTexture&&(lr=32879);const xr=fr(Vn,Wn),Fr=Wn.source;dt.bindTexture(lr,Vn.__webglTexture,33984+rr);const mr=vt.get(Fr);if(Fr.version!==mr.__version||xr===!0){dt.activeTexture(33984+rr),ft.pixelStorei(37440,Wn.flipY),ft.pixelStorei(37441,Wn.premultiplyAlpha),ft.pixelStorei(3317,Wn.unpackAlignment),ft.pixelStorei(37443,0);const Yr=vn(Wn)&&gn(Wn.image)===!1;let Vr=pn(Wn.image,Yr,!1,Nt);Vr=gr(Wn,Vr);const eo=gn(Vr)||At,ur=Et.convert(Wn.format,Wn.encoding);let kr=Et.convert(Wn.type),Br=Tn(Wn.internalFormat,ur,kr,Wn.encoding,Wn.isVideoTexture);br(lr,Wn,eo);let Rn;const Xn=Wn.mipmaps,cr=At&&Wn.isVideoTexture!==!0,wr=mr.__version===void 0||xr===!0,Kn=In(Wn,Vr,eo);if(Wn.isDepthTexture)Br=6402,At?Wn.type===FloatType?Br=36012:Wn.type===UnsignedIntType?Br=33190:Wn.type===UnsignedInt248Type?Br=35056:Br=33189:Wn.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Wn.format===DepthFormat&&Br===6402&&Wn.type!==UnsignedShortType&&Wn.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Wn.type=UnsignedIntType,kr=Et.convert(Wn.type)),Wn.format===DepthStencilFormat&&Br===6402&&(Br=34041,Wn.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Wn.type=UnsignedInt248Type,kr=Et.convert(Wn.type))),wr&&(cr?dt.texStorage2D(3553,1,Br,Vr.width,Vr.height):dt.texImage2D(3553,0,Br,Vr.width,Vr.height,0,ur,kr,null));else if(Wn.isDataTexture)if(Xn.length>0&&eo){cr&&wr&&dt.texStorage2D(3553,Kn,Br,Xn[0].width,Xn[0].height);for(let Cr=0,qr=Xn.length;Cr<qr;Cr++)Rn=Xn[Cr],cr?dt.texSubImage2D(3553,Cr,0,0,Rn.width,Rn.height,ur,kr,Rn.data):dt.texImage2D(3553,Cr,Br,Rn.width,Rn.height,0,ur,kr,Rn.data);Wn.generateMipmaps=!1}else cr?(wr&&dt.texStorage2D(3553,Kn,Br,Vr.width,Vr.height),dt.texSubImage2D(3553,0,0,0,Vr.width,Vr.height,ur,kr,Vr.data)):dt.texImage2D(3553,0,Br,Vr.width,Vr.height,0,ur,kr,Vr.data);else if(Wn.isCompressedTexture)if(Wn.isCompressedArrayTexture){cr&&wr&&dt.texStorage3D(35866,Kn,Br,Xn[0].width,Xn[0].height,Vr.depth);for(let Cr=0,qr=Xn.length;Cr<qr;Cr++)Rn=Xn[Cr],Wn.format!==RGBAFormat?ur!==null?cr?dt.compressedTexSubImage3D(35866,Cr,0,0,0,Rn.width,Rn.height,Vr.depth,ur,Rn.data,0,0):dt.compressedTexImage3D(35866,Cr,Br,Rn.width,Rn.height,Vr.depth,0,Rn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):cr?dt.texSubImage3D(35866,Cr,0,0,0,Rn.width,Rn.height,Vr.depth,ur,kr,Rn.data):dt.texImage3D(35866,Cr,Br,Rn.width,Rn.height,Vr.depth,0,ur,kr,Rn.data)}else{cr&&wr&&dt.texStorage2D(3553,Kn,Br,Xn[0].width,Xn[0].height);for(let Cr=0,qr=Xn.length;Cr<qr;Cr++)Rn=Xn[Cr],Wn.format!==RGBAFormat?ur!==null?cr?dt.compressedTexSubImage2D(3553,Cr,0,0,Rn.width,Rn.height,ur,Rn.data):dt.compressedTexImage2D(3553,Cr,Br,Rn.width,Rn.height,0,Rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):cr?dt.texSubImage2D(3553,Cr,0,0,Rn.width,Rn.height,ur,kr,Rn.data):dt.texImage2D(3553,Cr,Br,Rn.width,Rn.height,0,ur,kr,Rn.data)}else if(Wn.isDataArrayTexture)cr?(wr&&dt.texStorage3D(35866,Kn,Br,Vr.width,Vr.height,Vr.depth),dt.texSubImage3D(35866,0,0,0,0,Vr.width,Vr.height,Vr.depth,ur,kr,Vr.data)):dt.texImage3D(35866,0,Br,Vr.width,Vr.height,Vr.depth,0,ur,kr,Vr.data);else if(Wn.isData3DTexture)cr?(wr&&dt.texStorage3D(32879,Kn,Br,Vr.width,Vr.height,Vr.depth),dt.texSubImage3D(32879,0,0,0,0,Vr.width,Vr.height,Vr.depth,ur,kr,Vr.data)):dt.texImage3D(32879,0,Br,Vr.width,Vr.height,Vr.depth,0,ur,kr,Vr.data);else if(Wn.isFramebufferTexture){if(wr)if(cr)dt.texStorage2D(3553,Kn,Br,Vr.width,Vr.height);else{let Cr=Vr.width,qr=Vr.height;for(let oo=0;oo<Kn;oo++)dt.texImage2D(3553,oo,Br,Cr,qr,0,ur,kr,null),Cr>>=1,qr>>=1}}else if(Xn.length>0&&eo){cr&&wr&&dt.texStorage2D(3553,Kn,Br,Xn[0].width,Xn[0].height);for(let Cr=0,qr=Xn.length;Cr<qr;Cr++)Rn=Xn[Cr],cr?dt.texSubImage2D(3553,Cr,0,0,ur,kr,Rn):dt.texImage2D(3553,Cr,Br,ur,kr,Rn);Wn.generateMipmaps=!1}else cr?(wr&&dt.texStorage2D(3553,Kn,Br,Vr.width,Vr.height),dt.texSubImage2D(3553,0,0,0,ur,kr,Vr)):dt.texImage2D(3553,0,Br,ur,kr,Vr);bn(Wn,eo)&&$n(lr),mr.__version=Fr.version,Wn.onUpdate&&Wn.onUpdate(Wn)}Vn.__version=Wn.version}function Pr(Vn,Wn,rr){if(Wn.image.length!==6)return;const lr=fr(Vn,Wn),xr=Wn.source;dt.bindTexture(34067,Vn.__webglTexture,33984+rr);const Fr=vt.get(xr);if(xr.version!==Fr.__version||lr===!0){dt.activeTexture(33984+rr),ft.pixelStorei(37440,Wn.flipY),ft.pixelStorei(37441,Wn.premultiplyAlpha),ft.pixelStorei(3317,Wn.unpackAlignment),ft.pixelStorei(37443,0);const mr=Wn.isCompressedTexture||Wn.image[0].isCompressedTexture,Yr=Wn.image[0]&&Wn.image[0].isDataTexture,Vr=[];for(let Cr=0;Cr<6;Cr++)!mr&&!Yr?Vr[Cr]=pn(Wn.image[Cr],!1,!0,Dt):Vr[Cr]=Yr?Wn.image[Cr].image:Wn.image[Cr],Vr[Cr]=gr(Wn,Vr[Cr]);const eo=Vr[0],ur=gn(eo)||At,kr=Et.convert(Wn.format,Wn.encoding),Br=Et.convert(Wn.type),Rn=Tn(Wn.internalFormat,kr,Br,Wn.encoding),Xn=At&&Wn.isVideoTexture!==!0,cr=Fr.__version===void 0||lr===!0;let wr=In(Wn,eo,ur);br(34067,Wn,ur);let Kn;if(mr){Xn&&cr&&dt.texStorage2D(34067,wr,Rn,eo.width,eo.height);for(let Cr=0;Cr<6;Cr++){Kn=Vr[Cr].mipmaps;for(let qr=0;qr<Kn.length;qr++){const oo=Kn[qr];Wn.format!==RGBAFormat?kr!==null?Xn?dt.compressedTexSubImage2D(34069+Cr,qr,0,0,oo.width,oo.height,kr,oo.data):dt.compressedTexImage2D(34069+Cr,qr,Rn,oo.width,oo.height,0,oo.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Xn?dt.texSubImage2D(34069+Cr,qr,0,0,oo.width,oo.height,kr,Br,oo.data):dt.texImage2D(34069+Cr,qr,Rn,oo.width,oo.height,0,kr,Br,oo.data)}}}else{Kn=Wn.mipmaps,Xn&&cr&&(Kn.length>0&&wr++,dt.texStorage2D(34067,wr,Rn,Vr[0].width,Vr[0].height));for(let Cr=0;Cr<6;Cr++)if(Yr){Xn?dt.texSubImage2D(34069+Cr,0,0,0,Vr[Cr].width,Vr[Cr].height,kr,Br,Vr[Cr].data):dt.texImage2D(34069+Cr,0,Rn,Vr[Cr].width,Vr[Cr].height,0,kr,Br,Vr[Cr].data);for(let qr=0;qr<Kn.length;qr++){const co=Kn[qr].image[Cr].image;Xn?dt.texSubImage2D(34069+Cr,qr+1,0,0,co.width,co.height,kr,Br,co.data):dt.texImage2D(34069+Cr,qr+1,Rn,co.width,co.height,0,kr,Br,co.data)}}else{Xn?dt.texSubImage2D(34069+Cr,0,0,0,kr,Br,Vr[Cr]):dt.texImage2D(34069+Cr,0,Rn,kr,Br,Vr[Cr]);for(let qr=0;qr<Kn.length;qr++){const oo=Kn[qr];Xn?dt.texSubImage2D(34069+Cr,qr+1,0,0,kr,Br,oo.image[Cr]):dt.texImage2D(34069+Cr,qr+1,Rn,kr,Br,oo.image[Cr])}}}bn(Wn,ur)&&$n(34067),Fr.__version=xr.version,Wn.onUpdate&&Wn.onUpdate(Wn)}Vn.__version=Wn.version}function zr(Vn,Wn,rr,lr,xr){const Fr=Et.convert(rr.format,rr.encoding),mr=Et.convert(rr.type),Yr=Tn(rr.internalFormat,Fr,mr,rr.encoding);vt.get(Wn).__hasExternalTextures||(xr===32879||xr===35866?dt.texImage3D(xr,0,Yr,Wn.width,Wn.height,Wn.depth,0,Fr,mr,null):dt.texImage2D(xr,0,Yr,Wn.width,Wn.height,0,Fr,mr,null)),dt.bindFramebuffer(36160,Vn),ar(Wn)?Ut.framebufferTexture2DMultisampleEXT(36160,lr,xr,vt.get(rr).__webglTexture,0,Yn(Wn)):(xr===3553||xr>=34069&&xr<=34074)&&ft.framebufferTexture2D(36160,lr,xr,vt.get(rr).__webglTexture,0),dt.bindFramebuffer(36160,null)}function Dr(Vn,Wn,rr){if(ft.bindRenderbuffer(36161,Vn),Wn.depthBuffer&&!Wn.stencilBuffer){let lr=33189;if(rr||ar(Wn)){const xr=Wn.depthTexture;xr&&xr.isDepthTexture&&(xr.type===FloatType?lr=36012:xr.type===UnsignedIntType&&(lr=33190));const Fr=Yn(Wn);ar(Wn)?Ut.renderbufferStorageMultisampleEXT(36161,Fr,lr,Wn.width,Wn.height):ft.renderbufferStorageMultisample(36161,Fr,lr,Wn.width,Wn.height)}else ft.renderbufferStorage(36161,lr,Wn.width,Wn.height);ft.framebufferRenderbuffer(36160,36096,36161,Vn)}else if(Wn.depthBuffer&&Wn.stencilBuffer){const lr=Yn(Wn);rr&&ar(Wn)===!1?ft.renderbufferStorageMultisample(36161,lr,35056,Wn.width,Wn.height):ar(Wn)?Ut.renderbufferStorageMultisampleEXT(36161,lr,35056,Wn.width,Wn.height):ft.renderbufferStorage(36161,34041,Wn.width,Wn.height),ft.framebufferRenderbuffer(36160,33306,36161,Vn)}else{const lr=Wn.isWebGLMultipleRenderTargets===!0?Wn.texture:[Wn.texture];for(let xr=0;xr<lr.length;xr++){const Fr=lr[xr],mr=Et.convert(Fr.format,Fr.encoding),Yr=Et.convert(Fr.type),Vr=Tn(Fr.internalFormat,mr,Yr,Fr.encoding),eo=Yn(Wn);rr&&ar(Wn)===!1?ft.renderbufferStorageMultisample(36161,eo,Vr,Wn.width,Wn.height):ar(Wn)?Ut.renderbufferStorageMultisampleEXT(36161,eo,Vr,Wn.width,Wn.height):ft.renderbufferStorage(36161,Vr,Wn.width,Wn.height)}}ft.bindRenderbuffer(36161,null)}function _r(Vn,Wn){if(Wn&&Wn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(dt.bindFramebuffer(36160,Vn),!(Wn.depthTexture&&Wn.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!vt.get(Wn.depthTexture).__webglTexture||Wn.depthTexture.image.width!==Wn.width||Wn.depthTexture.image.height!==Wn.height)&&(Wn.depthTexture.image.width=Wn.width,Wn.depthTexture.image.height=Wn.height,Wn.depthTexture.needsUpdate=!0),jn(Wn.depthTexture,0);const lr=vt.get(Wn.depthTexture).__webglTexture,xr=Yn(Wn);if(Wn.depthTexture.format===DepthFormat)ar(Wn)?Ut.framebufferTexture2DMultisampleEXT(36160,36096,3553,lr,0,xr):ft.framebufferTexture2D(36160,36096,3553,lr,0);else if(Wn.depthTexture.format===DepthStencilFormat)ar(Wn)?Ut.framebufferTexture2DMultisampleEXT(36160,33306,3553,lr,0,xr):ft.framebufferTexture2D(36160,33306,3553,lr,0);else throw new Error("Unknown depthTexture format")}function Nr(Vn){const Wn=vt.get(Vn),rr=Vn.isWebGLCubeRenderTarget===!0;if(Vn.depthTexture&&!Wn.__autoAllocateDepthBuffer){if(rr)throw new Error("target.depthTexture not supported in Cube render targets");_r(Wn.__webglFramebuffer,Vn)}else if(rr){Wn.__webglDepthbuffer=[];for(let lr=0;lr<6;lr++)dt.bindFramebuffer(36160,Wn.__webglFramebuffer[lr]),Wn.__webglDepthbuffer[lr]=ft.createRenderbuffer(),Dr(Wn.__webglDepthbuffer[lr],Vn,!1)}else dt.bindFramebuffer(36160,Wn.__webglFramebuffer),Wn.__webglDepthbuffer=ft.createRenderbuffer(),Dr(Wn.__webglDepthbuffer,Vn,!1);dt.bindFramebuffer(36160,null)}function Dn(Vn,Wn,rr){const lr=vt.get(Vn);Wn!==void 0&&zr(lr.__webglFramebuffer,Vn,Vn.texture,36064,3553),rr!==void 0&&Nr(Vn)}function yr(Vn){const Wn=Vn.texture,rr=vt.get(Vn),lr=vt.get(Wn);Vn.addEventListener("dispose",An),Vn.isWebGLMultipleRenderTargets!==!0&&(lr.__webglTexture===void 0&&(lr.__webglTexture=ft.createTexture()),lr.__version=Wn.version,Ct.memory.textures++);const xr=Vn.isWebGLCubeRenderTarget===!0,Fr=Vn.isWebGLMultipleRenderTargets===!0,mr=gn(Vn)||At;if(xr){rr.__webglFramebuffer=[];for(let Yr=0;Yr<6;Yr++)rr.__webglFramebuffer[Yr]=ft.createFramebuffer()}else{if(rr.__webglFramebuffer=ft.createFramebuffer(),Fr)if(St.drawBuffers){const Yr=Vn.texture;for(let Vr=0,eo=Yr.length;Vr<eo;Vr++){const ur=vt.get(Yr[Vr]);ur.__webglTexture===void 0&&(ur.__webglTexture=ft.createTexture(),Ct.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(At&&Vn.samples>0&&ar(Vn)===!1){const Yr=Fr?Wn:[Wn];rr.__webglMultisampledFramebuffer=ft.createFramebuffer(),rr.__webglColorRenderbuffer=[],dt.bindFramebuffer(36160,rr.__webglMultisampledFramebuffer);for(let Vr=0;Vr<Yr.length;Vr++){const eo=Yr[Vr];rr.__webglColorRenderbuffer[Vr]=ft.createRenderbuffer(),ft.bindRenderbuffer(36161,rr.__webglColorRenderbuffer[Vr]);const ur=Et.convert(eo.format,eo.encoding),kr=Et.convert(eo.type),Br=Tn(eo.internalFormat,ur,kr,eo.encoding,Vn.isXRRenderTarget===!0),Rn=Yn(Vn);ft.renderbufferStorageMultisample(36161,Rn,Br,Vn.width,Vn.height),ft.framebufferRenderbuffer(36160,36064+Vr,36161,rr.__webglColorRenderbuffer[Vr])}ft.bindRenderbuffer(36161,null),Vn.depthBuffer&&(rr.__webglDepthRenderbuffer=ft.createRenderbuffer(),Dr(rr.__webglDepthRenderbuffer,Vn,!0)),dt.bindFramebuffer(36160,null)}}if(xr){dt.bindTexture(34067,lr.__webglTexture),br(34067,Wn,mr);for(let Yr=0;Yr<6;Yr++)zr(rr.__webglFramebuffer[Yr],Vn,Wn,36064,34069+Yr);bn(Wn,mr)&&$n(34067),dt.unbindTexture()}else if(Fr){const Yr=Vn.texture;for(let Vr=0,eo=Yr.length;Vr<eo;Vr++){const ur=Yr[Vr],kr=vt.get(ur);dt.bindTexture(3553,kr.__webglTexture),br(3553,ur,mr),zr(rr.__webglFramebuffer,Vn,ur,36064+Vr,3553),bn(ur,mr)&&$n(3553)}dt.unbindTexture()}else{let Yr=3553;(Vn.isWebGL3DRenderTarget||Vn.isWebGLArrayRenderTarget)&&(At?Yr=Vn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),dt.bindTexture(Yr,lr.__webglTexture),br(Yr,Wn,mr),zr(rr.__webglFramebuffer,Vn,Wn,36064,Yr),bn(Wn,mr)&&$n(Yr),dt.unbindTexture()}Vn.depthBuffer&&Nr(Vn)}function hr(Vn){const Wn=gn(Vn)||At,rr=Vn.isWebGLMultipleRenderTargets===!0?Vn.texture:[Vn.texture];for(let lr=0,xr=rr.length;lr<xr;lr++){const Fr=rr[lr];if(bn(Fr,Wn)){const mr=Vn.isWebGLCubeRenderTarget?34067:3553,Yr=vt.get(Fr).__webglTexture;dt.bindTexture(mr,Yr),$n(mr),dt.unbindTexture()}}}function Jn(Vn){if(At&&Vn.samples>0&&ar(Vn)===!1){const Wn=Vn.isWebGLMultipleRenderTargets?Vn.texture:[Vn.texture],rr=Vn.width,lr=Vn.height;let xr=16384;const Fr=[],mr=Vn.stencilBuffer?33306:36096,Yr=vt.get(Vn),Vr=Vn.isWebGLMultipleRenderTargets===!0;if(Vr)for(let eo=0;eo<Wn.length;eo++)dt.bindFramebuffer(36160,Yr.__webglMultisampledFramebuffer),ft.framebufferRenderbuffer(36160,36064+eo,36161,null),dt.bindFramebuffer(36160,Yr.__webglFramebuffer),ft.framebufferTexture2D(36009,36064+eo,3553,null,0);dt.bindFramebuffer(36008,Yr.__webglMultisampledFramebuffer),dt.bindFramebuffer(36009,Yr.__webglFramebuffer);for(let eo=0;eo<Wn.length;eo++){Fr.push(36064+eo),Vn.depthBuffer&&Fr.push(mr);const ur=Yr.__ignoreDepthValues!==void 0?Yr.__ignoreDepthValues:!1;if(ur===!1&&(Vn.depthBuffer&&(xr|=256),Vn.stencilBuffer&&(xr|=1024)),Vr&&ft.framebufferRenderbuffer(36008,36064,36161,Yr.__webglColorRenderbuffer[eo]),ur===!0&&(ft.invalidateFramebuffer(36008,[mr]),ft.invalidateFramebuffer(36009,[mr])),Vr){const kr=vt.get(Wn[eo]).__webglTexture;ft.framebufferTexture2D(36009,36064,3553,kr,0)}ft.blitFramebuffer(0,0,rr,lr,0,0,rr,lr,xr,9728),Wt&&ft.invalidateFramebuffer(36008,Fr)}if(dt.bindFramebuffer(36008,null),dt.bindFramebuffer(36009,null),Vr)for(let eo=0;eo<Wn.length;eo++){dt.bindFramebuffer(36160,Yr.__webglMultisampledFramebuffer),ft.framebufferRenderbuffer(36160,36064+eo,36161,Yr.__webglColorRenderbuffer[eo]);const ur=vt.get(Wn[eo]).__webglTexture;dt.bindFramebuffer(36160,Yr.__webglFramebuffer),ft.framebufferTexture2D(36009,36064+eo,3553,ur,0)}dt.bindFramebuffer(36009,Yr.__webglMultisampledFramebuffer)}}function Yn(Vn){return Math.min(Ft,Vn.samples)}function ar(Vn){const Wn=vt.get(Vn);return At&&Vn.samples>0&&lt.has("WEBGL_multisampled_render_to_texture")===!0&&Wn.__useRenderToTexture!==!1}function Sr(Vn){const Wn=Ct.render.frame;Zt.get(Vn)!==Wn&&(Zt.set(Vn,Wn),Vn.update())}function gr(Vn,Wn){const rr=Vn.encoding,lr=Vn.format,xr=Vn.type;return Vn.isCompressedTexture===!0||Vn.isVideoTexture===!0||Vn.format===_SRGBAFormat||rr!==LinearEncoding&&(rr===sRGBEncoding?At===!1?lt.has("EXT_sRGB")===!0&&lr===RGBAFormat?(Vn.format=_SRGBAFormat,Vn.minFilter=LinearFilter,Vn.generateMipmaps=!1):Wn=ImageUtils.sRGBToLinear(Wn):(lr!==RGBAFormat||xr!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",rr)),Wn}this.allocateTextureUnit=Un,this.resetTextureUnits=nr,this.setTexture2D=jn,this.setTexture2DArray=Ln,this.setTexture3D=Cn,this.setTextureCube=tr,this.rebindTextures=Dn,this.setupRenderTarget=yr,this.updateRenderTargetMipmap=hr,this.updateMultisampleRenderTarget=Jn,this.setupDepthRenderbuffer=Nr,this.setupFrameBufferTexture=zr,this.useMultisampledRTT=ar}function WebGLUtils(ft,lt,dt){const vt=dt.isWebGL2;function St(Et,Ct=null){let At;if(Et===UnsignedByteType)return 5121;if(Et===UnsignedShort4444Type)return 32819;if(Et===UnsignedShort5551Type)return 32820;if(Et===ByteType)return 5120;if(Et===ShortType)return 5122;if(Et===UnsignedShortType)return 5123;if(Et===IntType)return 5124;if(Et===UnsignedIntType)return 5125;if(Et===FloatType)return 5126;if(Et===HalfFloatType)return vt?5131:(At=lt.get("OES_texture_half_float"),At!==null?At.HALF_FLOAT_OES:null);if(Et===AlphaFormat)return 6406;if(Et===RGBAFormat)return 6408;if(Et===LuminanceFormat)return 6409;if(Et===LuminanceAlphaFormat)return 6410;if(Et===DepthFormat)return 6402;if(Et===DepthStencilFormat)return 34041;if(Et===_SRGBAFormat)return At=lt.get("EXT_sRGB"),At!==null?At.SRGB_ALPHA_EXT:null;if(Et===RedFormat)return 6403;if(Et===RedIntegerFormat)return 36244;if(Et===RGFormat)return 33319;if(Et===RGIntegerFormat)return 33320;if(Et===RGBAIntegerFormat)return 36249;if(Et===RGB_S3TC_DXT1_Format||Et===RGBA_S3TC_DXT1_Format||Et===RGBA_S3TC_DXT3_Format||Et===RGBA_S3TC_DXT5_Format)if(Ct===sRGBEncoding)if(At=lt.get("WEBGL_compressed_texture_s3tc_srgb"),At!==null){if(Et===RGB_S3TC_DXT1_Format)return At.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT1_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT3_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Et===RGBA_S3TC_DXT5_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(At=lt.get("WEBGL_compressed_texture_s3tc"),At!==null){if(Et===RGB_S3TC_DXT1_Format)return At.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT1_Format)return At.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT3_Format)return At.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Et===RGBA_S3TC_DXT5_Format)return At.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Et===RGB_PVRTC_4BPPV1_Format||Et===RGB_PVRTC_2BPPV1_Format||Et===RGBA_PVRTC_4BPPV1_Format||Et===RGBA_PVRTC_2BPPV1_Format)if(At=lt.get("WEBGL_compressed_texture_pvrtc"),At!==null){if(Et===RGB_PVRTC_4BPPV1_Format)return At.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Et===RGB_PVRTC_2BPPV1_Format)return At.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Et===RGBA_PVRTC_4BPPV1_Format)return At.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Et===RGBA_PVRTC_2BPPV1_Format)return At.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Et===RGB_ETC1_Format)return At=lt.get("WEBGL_compressed_texture_etc1"),At!==null?At.COMPRESSED_RGB_ETC1_WEBGL:null;if(Et===RGB_ETC2_Format||Et===RGBA_ETC2_EAC_Format)if(At=lt.get("WEBGL_compressed_texture_etc"),At!==null){if(Et===RGB_ETC2_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ETC2:At.COMPRESSED_RGB8_ETC2;if(Et===RGBA_ETC2_EAC_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:At.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Et===RGBA_ASTC_4x4_Format||Et===RGBA_ASTC_5x4_Format||Et===RGBA_ASTC_5x5_Format||Et===RGBA_ASTC_6x5_Format||Et===RGBA_ASTC_6x6_Format||Et===RGBA_ASTC_8x5_Format||Et===RGBA_ASTC_8x6_Format||Et===RGBA_ASTC_8x8_Format||Et===RGBA_ASTC_10x5_Format||Et===RGBA_ASTC_10x6_Format||Et===RGBA_ASTC_10x8_Format||Et===RGBA_ASTC_10x10_Format||Et===RGBA_ASTC_12x10_Format||Et===RGBA_ASTC_12x12_Format)if(At=lt.get("WEBGL_compressed_texture_astc"),At!==null){if(Et===RGBA_ASTC_4x4_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:At.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Et===RGBA_ASTC_5x4_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:At.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Et===RGBA_ASTC_5x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:At.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Et===RGBA_ASTC_6x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:At.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Et===RGBA_ASTC_6x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:At.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Et===RGBA_ASTC_8x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:At.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Et===RGBA_ASTC_8x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:At.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Et===RGBA_ASTC_8x8_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:At.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Et===RGBA_ASTC_10x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:At.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Et===RGBA_ASTC_10x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:At.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Et===RGBA_ASTC_10x8_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:At.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Et===RGBA_ASTC_10x10_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:At.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Et===RGBA_ASTC_12x10_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:At.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Et===RGBA_ASTC_12x12_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:At.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Et===RGBA_BPTC_Format)if(At=lt.get("EXT_texture_compression_bptc"),At!==null){if(Et===RGBA_BPTC_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:At.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(Et===RED_RGTC1_Format||Et===SIGNED_RED_RGTC1_Format||Et===RED_GREEN_RGTC2_Format||Et===SIGNED_RED_GREEN_RGTC2_Format)if(At=lt.get("EXT_texture_compression_rgtc"),At!==null){if(Et===RGBA_BPTC_Format)return At.COMPRESSED_RED_RGTC1_EXT;if(Et===SIGNED_RED_RGTC1_Format)return At.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Et===RED_GREEN_RGTC2_Format)return At.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Et===SIGNED_RED_GREEN_RGTC2_Format)return At.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Et===UnsignedInt248Type?vt?34042:(At=lt.get("WEBGL_depth_texture"),At!==null?At.UNSIGNED_INT_24_8_WEBGL:null):ft[Et]!==void 0?ft[Et]:null}return{convert:St}}class ArrayCamera extends PerspectiveCamera{constructor(lt=[]){super(),this.isArrayCamera=!0,this.cameras=lt}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(lt){return this._targetRay!==null&&this._targetRay.dispatchEvent(lt),this._grip!==null&&this._grip.dispatchEvent(lt),this._hand!==null&&this._hand.dispatchEvent(lt),this}connect(lt){if(lt&&lt.hand){const dt=this._hand;if(dt)for(const vt of lt.hand.values())this._getHandJoint(dt,vt)}return this.dispatchEvent({type:"connected",data:lt}),this}disconnect(lt){return this.dispatchEvent({type:"disconnected",data:lt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(lt,dt,vt){let St=null,Et=null,Ct=null;const At=this._targetRay,Rt=this._grip,Dt=this._hand;if(lt&&dt.session.visibilityState!=="visible-blurred"){if(Dt&&lt.hand){Ct=!0;for(const Kt of lt.hand.values()){const cn=dt.getJointPose(Kt,vt),hn=this._getHandJoint(Dt,Kt);cn!==null&&(hn.matrix.fromArray(cn.transform.matrix),hn.matrix.decompose(hn.position,hn.rotation,hn.scale),hn.jointRadius=cn.radius),hn.visible=cn!==null}const Nt=Dt.joints["index-finger-tip"],Ft=Dt.joints["thumb-tip"],Ut=Nt.position.distanceTo(Ft.position),Wt=.02,Zt=.005;Dt.inputState.pinching&&Ut>Wt+Zt?(Dt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:lt.handedness,target:this})):!Dt.inputState.pinching&&Ut<=Wt-Zt&&(Dt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:lt.handedness,target:this}))}else Rt!==null&&lt.gripSpace&&(Et=dt.getPose(lt.gripSpace,vt),Et!==null&&(Rt.matrix.fromArray(Et.transform.matrix),Rt.matrix.decompose(Rt.position,Rt.rotation,Rt.scale),Et.linearVelocity?(Rt.hasLinearVelocity=!0,Rt.linearVelocity.copy(Et.linearVelocity)):Rt.hasLinearVelocity=!1,Et.angularVelocity?(Rt.hasAngularVelocity=!0,Rt.angularVelocity.copy(Et.angularVelocity)):Rt.hasAngularVelocity=!1));At!==null&&(St=dt.getPose(lt.targetRaySpace,vt),St===null&&Et!==null&&(St=Et),St!==null&&(At.matrix.fromArray(St.transform.matrix),At.matrix.decompose(At.position,At.rotation,At.scale),St.linearVelocity?(At.hasLinearVelocity=!0,At.linearVelocity.copy(St.linearVelocity)):At.hasLinearVelocity=!1,St.angularVelocity?(At.hasAngularVelocity=!0,At.angularVelocity.copy(St.angularVelocity)):At.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return At!==null&&(At.visible=St!==null),Rt!==null&&(Rt.visible=Et!==null),Dt!==null&&(Dt.visible=Ct!==null),this}_getHandJoint(lt,dt){if(lt.joints[dt.jointName]===void 0){const vt=new Group;vt.matrixAutoUpdate=!1,vt.visible=!1,lt.joints[dt.jointName]=vt,lt.add(vt)}return lt.joints[dt.jointName]}}class DepthTexture extends Texture{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt){if(Nt=Nt!==void 0?Nt:DepthFormat,Nt!==DepthFormat&&Nt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");vt===void 0&&Nt===DepthFormat&&(vt=UnsignedIntType),vt===void 0&&Nt===DepthStencilFormat&&(vt=UnsignedInt248Type),super(null,St,Et,Ct,At,Rt,Nt,vt,Dt),this.isDepthTexture=!0,this.image={width:lt,height:dt},this.magFilter=At!==void 0?At:NearestFilter,this.minFilter=Rt!==void 0?Rt:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(lt,dt){super();const vt=this;let St=null,Et=1,Ct=null,At="local-floor",Rt=1,Dt=null,Nt=null,Ft=null,Ut=null,Wt=null,Zt=null;const Kt=dt.getContextAttributes();let cn=null,hn=null;const dn=[],pn=[],gn=new Set,vn=new Map,bn=new PerspectiveCamera;bn.layers.enable(1),bn.viewport=new Vector4;const $n=new PerspectiveCamera;$n.layers.enable(2),$n.viewport=new Vector4;const Tn=[bn,$n],In=new ArrayCamera;In.layers.enable(1),In.layers.enable(2);let Pn=null,zn=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Cn){let tr=dn[Cn];return tr===void 0&&(tr=new WebXRController,dn[Cn]=tr),tr.getTargetRaySpace()},this.getControllerGrip=function(Cn){let tr=dn[Cn];return tr===void 0&&(tr=new WebXRController,dn[Cn]=tr),tr.getGripSpace()},this.getHand=function(Cn){let tr=dn[Cn];return tr===void 0&&(tr=new WebXRController,dn[Cn]=tr),tr.getHandSpace()};function An(Cn){const tr=pn.indexOf(Cn.inputSource);if(tr===-1)return;const ir=dn[tr];ir!==void 0&&ir.dispatchEvent({type:Cn.type,data:Cn.inputSource})}function Gn(){St.removeEventListener("select",An),St.removeEventListener("selectstart",An),St.removeEventListener("selectend",An),St.removeEventListener("squeeze",An),St.removeEventListener("squeezestart",An),St.removeEventListener("squeezeend",An),St.removeEventListener("end",Gn),St.removeEventListener("inputsourceschange",xn);for(let Cn=0;Cn<dn.length;Cn++){const tr=pn[Cn];tr!==null&&(pn[Cn]=null,dn[Cn].disconnect(tr))}Pn=null,zn=null,lt.setRenderTarget(cn),Wt=null,Ut=null,Ft=null,St=null,hn=null,Ln.stop(),vt.isPresenting=!1,vt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Cn){Et=Cn,vt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Cn){At=Cn,vt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Dt||Ct},this.setReferenceSpace=function(Cn){Dt=Cn},this.getBaseLayer=function(){return Ut!==null?Ut:Wt},this.getBinding=function(){return Ft},this.getFrame=function(){return Zt},this.getSession=function(){return St},this.setSession=async function(Cn){if(St=Cn,St!==null){if(cn=lt.getRenderTarget(),St.addEventListener("select",An),St.addEventListener("selectstart",An),St.addEventListener("selectend",An),St.addEventListener("squeeze",An),St.addEventListener("squeezestart",An),St.addEventListener("squeezeend",An),St.addEventListener("end",Gn),St.addEventListener("inputsourceschange",xn),Kt.xrCompatible!==!0&&await dt.makeXRCompatible(),St.renderState.layers===void 0||lt.capabilities.isWebGL2===!1){const tr={antialias:St.renderState.layers===void 0?Kt.antialias:!0,alpha:Kt.alpha,depth:Kt.depth,stencil:Kt.stencil,framebufferScaleFactor:Et};Wt=new XRWebGLLayer(St,dt,tr),St.updateRenderState({baseLayer:Wt}),hn=new WebGLRenderTarget(Wt.framebufferWidth,Wt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:lt.outputEncoding,stencilBuffer:Kt.stencil})}else{let tr=null,ir=null,Zn=null;Kt.depth&&(Zn=Kt.stencil?35056:33190,tr=Kt.stencil?DepthStencilFormat:DepthFormat,ir=Kt.stencil?UnsignedInt248Type:UnsignedIntType);const br={colorFormat:32856,depthFormat:Zn,scaleFactor:Et};Ft=new XRWebGLBinding(St,dt),Ut=Ft.createProjectionLayer(br),St.updateRenderState({layers:[Ut]}),hn=new WebGLRenderTarget(Ut.textureWidth,Ut.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Ut.textureWidth,Ut.textureHeight,ir,void 0,void 0,void 0,void 0,void 0,void 0,tr),stencilBuffer:Kt.stencil,encoding:lt.outputEncoding,samples:Kt.antialias?4:0});const fr=lt.properties.get(hn);fr.__ignoreDepthValues=Ut.ignoreDepthValues}hn.isXRRenderTarget=!0,this.setFoveation(Rt),Dt=null,Ct=await St.requestReferenceSpace(At),Ln.setContext(St),Ln.start(),vt.isPresenting=!0,vt.dispatchEvent({type:"sessionstart"})}};function xn(Cn){for(let tr=0;tr<Cn.removed.length;tr++){const ir=Cn.removed[tr],Zn=pn.indexOf(ir);Zn>=0&&(pn[Zn]=null,dn[Zn].disconnect(ir))}for(let tr=0;tr<Cn.added.length;tr++){const ir=Cn.added[tr];let Zn=pn.indexOf(ir);if(Zn===-1){for(let fr=0;fr<dn.length;fr++)if(fr>=pn.length){pn.push(ir),Zn=fr;break}else if(pn[fr]===null){pn[fr]=ir,Zn=fr;break}if(Zn===-1)break}const br=dn[Zn];br&&br.connect(ir)}}const Qn=new Vector3,qn=new Vector3;function nr(Cn,tr,ir){Qn.setFromMatrixPosition(tr.matrixWorld),qn.setFromMatrixPosition(ir.matrixWorld);const Zn=Qn.distanceTo(qn),br=tr.projectionMatrix.elements,fr=ir.projectionMatrix.elements,Or=br[14]/(br[10]-1),Pr=br[14]/(br[10]+1),zr=(br[9]+1)/br[5],Dr=(br[9]-1)/br[5],_r=(br[8]-1)/br[0],Nr=(fr[8]+1)/fr[0],Dn=Or*_r,yr=Or*Nr,hr=Zn/(-_r+Nr),Jn=hr*-_r;tr.matrixWorld.decompose(Cn.position,Cn.quaternion,Cn.scale),Cn.translateX(Jn),Cn.translateZ(hr),Cn.matrixWorld.compose(Cn.position,Cn.quaternion,Cn.scale),Cn.matrixWorldInverse.copy(Cn.matrixWorld).invert();const Yn=Or+hr,ar=Pr+hr,Sr=Dn-Jn,gr=yr+(Zn-Jn),Vn=zr*Pr/ar*Yn,Wn=Dr*Pr/ar*Yn;Cn.projectionMatrix.makePerspective(Sr,gr,Vn,Wn,Yn,ar)}function Un(Cn,tr){tr===null?Cn.matrixWorld.copy(Cn.matrix):Cn.matrixWorld.multiplyMatrices(tr.matrixWorld,Cn.matrix),Cn.matrixWorldInverse.copy(Cn.matrixWorld).invert()}this.updateCamera=function(Cn){if(St===null)return;In.near=$n.near=bn.near=Cn.near,In.far=$n.far=bn.far=Cn.far,(Pn!==In.near||zn!==In.far)&&(St.updateRenderState({depthNear:In.near,depthFar:In.far}),Pn=In.near,zn=In.far);const tr=Cn.parent,ir=In.cameras;Un(In,tr);for(let br=0;br<ir.length;br++)Un(ir[br],tr);In.matrixWorld.decompose(In.position,In.quaternion,In.scale),Cn.matrix.copy(In.matrix),Cn.matrix.decompose(Cn.position,Cn.quaternion,Cn.scale);const Zn=Cn.children;for(let br=0,fr=Zn.length;br<fr;br++)Zn[br].updateMatrixWorld(!0);ir.length===2?nr(In,bn,$n):In.projectionMatrix.copy(bn.projectionMatrix)},this.getCamera=function(){return In},this.getFoveation=function(){if(!(Ut===null&&Wt===null))return Rt},this.setFoveation=function(Cn){Rt=Cn,Ut!==null&&(Ut.fixedFoveation=Cn),Wt!==null&&Wt.fixedFoveation!==void 0&&(Wt.fixedFoveation=Cn)},this.getPlanes=function(){return gn};let Nn=null;function jn(Cn,tr){if(Nt=tr.getViewerPose(Dt||Ct),Zt=tr,Nt!==null){const ir=Nt.views;Wt!==null&&(lt.setRenderTargetFramebuffer(hn,Wt.framebuffer),lt.setRenderTarget(hn));let Zn=!1;ir.length!==In.cameras.length&&(In.cameras.length=0,Zn=!0);for(let br=0;br<ir.length;br++){const fr=ir[br];let Or=null;if(Wt!==null)Or=Wt.getViewport(fr);else{const zr=Ft.getViewSubImage(Ut,fr);Or=zr.viewport,br===0&&(lt.setRenderTargetTextures(hn,zr.colorTexture,Ut.ignoreDepthValues?void 0:zr.depthStencilTexture),lt.setRenderTarget(hn))}let Pr=Tn[br];Pr===void 0&&(Pr=new PerspectiveCamera,Pr.layers.enable(br),Pr.viewport=new Vector4,Tn[br]=Pr),Pr.matrix.fromArray(fr.transform.matrix),Pr.projectionMatrix.fromArray(fr.projectionMatrix),Pr.viewport.set(Or.x,Or.y,Or.width,Or.height),br===0&&In.matrix.copy(Pr.matrix),Zn===!0&&In.cameras.push(Pr)}}for(let ir=0;ir<dn.length;ir++){const Zn=pn[ir],br=dn[ir];Zn!==null&&br!==void 0&&br.update(Zn,tr,Dt||Ct)}if(Nn&&Nn(Cn,tr),tr.detectedPlanes){vt.dispatchEvent({type:"planesdetected",data:tr.detectedPlanes});let ir=null;for(const Zn of gn)tr.detectedPlanes.has(Zn)||(ir===null&&(ir=[]),ir.push(Zn));if(ir!==null)for(const Zn of ir)gn.delete(Zn),vn.delete(Zn),vt.dispatchEvent({type:"planeremoved",data:Zn});for(const Zn of tr.detectedPlanes)if(!gn.has(Zn))gn.add(Zn),vn.set(Zn,tr.lastChangedTime),vt.dispatchEvent({type:"planeadded",data:Zn});else{const br=vn.get(Zn);Zn.lastChangedTime>br&&(vn.set(Zn,Zn.lastChangedTime),vt.dispatchEvent({type:"planechanged",data:Zn}))}}Zt=null}const Ln=new WebGLAnimation;Ln.setAnimationLoop(jn),this.setAnimationLoop=function(Cn){Nn=Cn},this.dispose=function(){}}}function WebGLMaterials(ft,lt){function dt(Kt,cn){cn.color.getRGB(Kt.fogColor.value,getUnlitUniformColorSpace(ft)),cn.isFog?(Kt.fogNear.value=cn.near,Kt.fogFar.value=cn.far):cn.isFogExp2&&(Kt.fogDensity.value=cn.density)}function vt(Kt,cn,hn,dn,pn){cn.isMeshBasicMaterial||cn.isMeshLambertMaterial?St(Kt,cn):cn.isMeshToonMaterial?(St(Kt,cn),Nt(Kt,cn)):cn.isMeshPhongMaterial?(St(Kt,cn),Dt(Kt,cn)):cn.isMeshStandardMaterial?(St(Kt,cn),Ft(Kt,cn),cn.isMeshPhysicalMaterial&&Ut(Kt,cn,pn)):cn.isMeshMatcapMaterial?(St(Kt,cn),Wt(Kt,cn)):cn.isMeshDepthMaterial?St(Kt,cn):cn.isMeshDistanceMaterial?(St(Kt,cn),Zt(Kt,cn)):cn.isMeshNormalMaterial?St(Kt,cn):cn.isLineBasicMaterial?(Et(Kt,cn),cn.isLineDashedMaterial&&Ct(Kt,cn)):cn.isPointsMaterial?At(Kt,cn,hn,dn):cn.isSpriteMaterial?Rt(Kt,cn):cn.isShadowMaterial?(Kt.color.value.copy(cn.color),Kt.opacity.value=cn.opacity):cn.isShaderMaterial&&(cn.uniformsNeedUpdate=!1)}function St(Kt,cn){Kt.opacity.value=cn.opacity,cn.color&&Kt.diffuse.value.copy(cn.color),cn.emissive&&Kt.emissive.value.copy(cn.emissive).multiplyScalar(cn.emissiveIntensity),cn.map&&(Kt.map.value=cn.map),cn.alphaMap&&(Kt.alphaMap.value=cn.alphaMap),cn.bumpMap&&(Kt.bumpMap.value=cn.bumpMap,Kt.bumpScale.value=cn.bumpScale,cn.side===BackSide&&(Kt.bumpScale.value*=-1)),cn.displacementMap&&(Kt.displacementMap.value=cn.displacementMap,Kt.displacementScale.value=cn.displacementScale,Kt.displacementBias.value=cn.displacementBias),cn.emissiveMap&&(Kt.emissiveMap.value=cn.emissiveMap),cn.normalMap&&(Kt.normalMap.value=cn.normalMap,Kt.normalScale.value.copy(cn.normalScale),cn.side===BackSide&&Kt.normalScale.value.negate()),cn.specularMap&&(Kt.specularMap.value=cn.specularMap),cn.alphaTest>0&&(Kt.alphaTest.value=cn.alphaTest);const hn=lt.get(cn).envMap;if(hn&&(Kt.envMap.value=hn,Kt.flipEnvMap.value=hn.isCubeTexture&&hn.isRenderTargetTexture===!1?-1:1,Kt.reflectivity.value=cn.reflectivity,Kt.ior.value=cn.ior,Kt.refractionRatio.value=cn.refractionRatio),cn.lightMap){Kt.lightMap.value=cn.lightMap;const gn=ft.useLegacyLights===!0?Math.PI:1;Kt.lightMapIntensity.value=cn.lightMapIntensity*gn}cn.aoMap&&(Kt.aoMap.value=cn.aoMap,Kt.aoMapIntensity.value=cn.aoMapIntensity);let dn;cn.map?dn=cn.map:cn.specularMap?dn=cn.specularMap:cn.displacementMap?dn=cn.displacementMap:cn.normalMap?dn=cn.normalMap:cn.bumpMap?dn=cn.bumpMap:cn.roughnessMap?dn=cn.roughnessMap:cn.metalnessMap?dn=cn.metalnessMap:cn.alphaMap?dn=cn.alphaMap:cn.emissiveMap?dn=cn.emissiveMap:cn.clearcoatMap?dn=cn.clearcoatMap:cn.clearcoatNormalMap?dn=cn.clearcoatNormalMap:cn.clearcoatRoughnessMap?dn=cn.clearcoatRoughnessMap:cn.iridescenceMap?dn=cn.iridescenceMap:cn.iridescenceThicknessMap?dn=cn.iridescenceThicknessMap:cn.specularIntensityMap?dn=cn.specularIntensityMap:cn.specularColorMap?dn=cn.specularColorMap:cn.transmissionMap?dn=cn.transmissionMap:cn.thicknessMap?dn=cn.thicknessMap:cn.sheenColorMap?dn=cn.sheenColorMap:cn.sheenRoughnessMap&&(dn=cn.sheenRoughnessMap),dn!==void 0&&(dn.isWebGLRenderTarget&&(dn=dn.texture),dn.matrixAutoUpdate===!0&&dn.updateMatrix(),Kt.uvTransform.value.copy(dn.matrix));let pn;cn.aoMap?pn=cn.aoMap:cn.lightMap&&(pn=cn.lightMap),pn!==void 0&&(pn.isWebGLRenderTarget&&(pn=pn.texture),pn.matrixAutoUpdate===!0&&pn.updateMatrix(),Kt.uv2Transform.value.copy(pn.matrix))}function Et(Kt,cn){Kt.diffuse.value.copy(cn.color),Kt.opacity.value=cn.opacity}function Ct(Kt,cn){Kt.dashSize.value=cn.dashSize,Kt.totalSize.value=cn.dashSize+cn.gapSize,Kt.scale.value=cn.scale}function At(Kt,cn,hn,dn){Kt.diffuse.value.copy(cn.color),Kt.opacity.value=cn.opacity,Kt.size.value=cn.size*hn,Kt.scale.value=dn*.5,cn.map&&(Kt.map.value=cn.map),cn.alphaMap&&(Kt.alphaMap.value=cn.alphaMap),cn.alphaTest>0&&(Kt.alphaTest.value=cn.alphaTest);let pn;cn.map?pn=cn.map:cn.alphaMap&&(pn=cn.alphaMap),pn!==void 0&&(pn.matrixAutoUpdate===!0&&pn.updateMatrix(),Kt.uvTransform.value.copy(pn.matrix))}function Rt(Kt,cn){Kt.diffuse.value.copy(cn.color),Kt.opacity.value=cn.opacity,Kt.rotation.value=cn.rotation,cn.map&&(Kt.map.value=cn.map),cn.alphaMap&&(Kt.alphaMap.value=cn.alphaMap),cn.alphaTest>0&&(Kt.alphaTest.value=cn.alphaTest);let hn;cn.map?hn=cn.map:cn.alphaMap&&(hn=cn.alphaMap),hn!==void 0&&(hn.matrixAutoUpdate===!0&&hn.updateMatrix(),Kt.uvTransform.value.copy(hn.matrix))}function Dt(Kt,cn){Kt.specular.value.copy(cn.specular),Kt.shininess.value=Math.max(cn.shininess,1e-4)}function Nt(Kt,cn){cn.gradientMap&&(Kt.gradientMap.value=cn.gradientMap)}function Ft(Kt,cn){Kt.roughness.value=cn.roughness,Kt.metalness.value=cn.metalness,cn.roughnessMap&&(Kt.roughnessMap.value=cn.roughnessMap),cn.metalnessMap&&(Kt.metalnessMap.value=cn.metalnessMap),lt.get(cn).envMap&&(Kt.envMapIntensity.value=cn.envMapIntensity)}function Ut(Kt,cn,hn){Kt.ior.value=cn.ior,cn.sheen>0&&(Kt.sheenColor.value.copy(cn.sheenColor).multiplyScalar(cn.sheen),Kt.sheenRoughness.value=cn.sheenRoughness,cn.sheenColorMap&&(Kt.sheenColorMap.value=cn.sheenColorMap),cn.sheenRoughnessMap&&(Kt.sheenRoughnessMap.value=cn.sheenRoughnessMap)),cn.clearcoat>0&&(Kt.clearcoat.value=cn.clearcoat,Kt.clearcoatRoughness.value=cn.clearcoatRoughness,cn.clearcoatMap&&(Kt.clearcoatMap.value=cn.clearcoatMap),cn.clearcoatRoughnessMap&&(Kt.clearcoatRoughnessMap.value=cn.clearcoatRoughnessMap),cn.clearcoatNormalMap&&(Kt.clearcoatNormalScale.value.copy(cn.clearcoatNormalScale),Kt.clearcoatNormalMap.value=cn.clearcoatNormalMap,cn.side===BackSide&&Kt.clearcoatNormalScale.value.negate())),cn.iridescence>0&&(Kt.iridescence.value=cn.iridescence,Kt.iridescenceIOR.value=cn.iridescenceIOR,Kt.iridescenceThicknessMinimum.value=cn.iridescenceThicknessRange[0],Kt.iridescenceThicknessMaximum.value=cn.iridescenceThicknessRange[1],cn.iridescenceMap&&(Kt.iridescenceMap.value=cn.iridescenceMap),cn.iridescenceThicknessMap&&(Kt.iridescenceThicknessMap.value=cn.iridescenceThicknessMap)),cn.transmission>0&&(Kt.transmission.value=cn.transmission,Kt.transmissionSamplerMap.value=hn.texture,Kt.transmissionSamplerSize.value.set(hn.width,hn.height),cn.transmissionMap&&(Kt.transmissionMap.value=cn.transmissionMap),Kt.thickness.value=cn.thickness,cn.thicknessMap&&(Kt.thicknessMap.value=cn.thicknessMap),Kt.attenuationDistance.value=cn.attenuationDistance,Kt.attenuationColor.value.copy(cn.attenuationColor)),Kt.specularIntensity.value=cn.specularIntensity,Kt.specularColor.value.copy(cn.specularColor),cn.specularIntensityMap&&(Kt.specularIntensityMap.value=cn.specularIntensityMap),cn.specularColorMap&&(Kt.specularColorMap.value=cn.specularColorMap)}function Wt(Kt,cn){cn.matcap&&(Kt.matcap.value=cn.matcap)}function Zt(Kt,cn){Kt.referencePosition.value.copy(cn.referencePosition),Kt.nearDistance.value=cn.nearDistance,Kt.farDistance.value=cn.farDistance}return{refreshFogUniforms:dt,refreshMaterialUniforms:vt}}function WebGLUniformsGroups(ft,lt,dt,vt){let St={},Et={},Ct=[];const At=dt.isWebGL2?ft.getParameter(35375):0;function Rt(dn,pn){const gn=pn.program;vt.uniformBlockBinding(dn,gn)}function Dt(dn,pn){let gn=St[dn.id];gn===void 0&&(Zt(dn),gn=Nt(dn),St[dn.id]=gn,dn.addEventListener("dispose",cn));const vn=pn.program;vt.updateUBOMapping(dn,vn);const bn=lt.render.frame;Et[dn.id]!==bn&&(Ut(dn),Et[dn.id]=bn)}function Nt(dn){const pn=Ft();dn.__bindingPointIndex=pn;const gn=ft.createBuffer(),vn=dn.__size,bn=dn.usage;return ft.bindBuffer(35345,gn),ft.bufferData(35345,vn,bn),ft.bindBuffer(35345,null),ft.bindBufferBase(35345,pn,gn),gn}function Ft(){for(let dn=0;dn<At;dn++)if(Ct.indexOf(dn)===-1)return Ct.push(dn),dn;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ut(dn){const pn=St[dn.id],gn=dn.uniforms,vn=dn.__cache;ft.bindBuffer(35345,pn);for(let bn=0,$n=gn.length;bn<$n;bn++){const Tn=gn[bn];if(Wt(Tn,bn,vn)===!0){const In=Tn.__offset,Pn=Array.isArray(Tn.value)?Tn.value:[Tn.value];let zn=0;for(let An=0;An<Pn.length;An++){const Gn=Pn[An],xn=Kt(Gn);typeof Gn=="number"?(Tn.__data[0]=Gn,ft.bufferSubData(35345,In+zn,Tn.__data)):Gn.isMatrix3?(Tn.__data[0]=Gn.elements[0],Tn.__data[1]=Gn.elements[1],Tn.__data[2]=Gn.elements[2],Tn.__data[3]=Gn.elements[0],Tn.__data[4]=Gn.elements[3],Tn.__data[5]=Gn.elements[4],Tn.__data[6]=Gn.elements[5],Tn.__data[7]=Gn.elements[0],Tn.__data[8]=Gn.elements[6],Tn.__data[9]=Gn.elements[7],Tn.__data[10]=Gn.elements[8],Tn.__data[11]=Gn.elements[0]):(Gn.toArray(Tn.__data,zn),zn+=xn.storage/Float32Array.BYTES_PER_ELEMENT)}ft.bufferSubData(35345,In,Tn.__data)}}ft.bindBuffer(35345,null)}function Wt(dn,pn,gn){const vn=dn.value;if(gn[pn]===void 0){if(typeof vn=="number")gn[pn]=vn;else{const bn=Array.isArray(vn)?vn:[vn],$n=[];for(let Tn=0;Tn<bn.length;Tn++)$n.push(bn[Tn].clone());gn[pn]=$n}return!0}else if(typeof vn=="number"){if(gn[pn]!==vn)return gn[pn]=vn,!0}else{const bn=Array.isArray(gn[pn])?gn[pn]:[gn[pn]],$n=Array.isArray(vn)?vn:[vn];for(let Tn=0;Tn<bn.length;Tn++){const In=bn[Tn];if(In.equals($n[Tn])===!1)return In.copy($n[Tn]),!0}}return!1}function Zt(dn){const pn=dn.uniforms;let gn=0;const vn=16;let bn=0;for(let $n=0,Tn=pn.length;$n<Tn;$n++){const In=pn[$n],Pn={boundary:0,storage:0},zn=Array.isArray(In.value)?In.value:[In.value];for(let An=0,Gn=zn.length;An<Gn;An++){const xn=zn[An],Qn=Kt(xn);Pn.boundary+=Qn.boundary,Pn.storage+=Qn.storage}if(In.__data=new Float32Array(Pn.storage/Float32Array.BYTES_PER_ELEMENT),In.__offset=gn,$n>0){bn=gn%vn;const An=vn-bn;bn!==0&&An-Pn.boundary<0&&(gn+=vn-bn,In.__offset=gn)}gn+=Pn.storage}return bn=gn%vn,bn>0&&(gn+=vn-bn),dn.__size=gn,dn.__cache={},this}function Kt(dn){const pn={boundary:0,storage:0};return typeof dn=="number"?(pn.boundary=4,pn.storage=4):dn.isVector2?(pn.boundary=8,pn.storage=8):dn.isVector3||dn.isColor?(pn.boundary=16,pn.storage=12):dn.isVector4?(pn.boundary=16,pn.storage=16):dn.isMatrix3?(pn.boundary=48,pn.storage=48):dn.isMatrix4?(pn.boundary=64,pn.storage=64):dn.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",dn),pn}function cn(dn){const pn=dn.target;pn.removeEventListener("dispose",cn);const gn=Ct.indexOf(pn.__bindingPointIndex);Ct.splice(gn,1),ft.deleteBuffer(St[pn.id]),delete St[pn.id],delete Et[pn.id]}function hn(){for(const dn in St)ft.deleteBuffer(St[dn]);Ct=[],St={},Et={}}return{bind:Rt,update:Dt,dispose:hn}}function createCanvasElement(){const ft=createElementNS$1("canvas");return ft.style.display="block",ft}function WebGLRenderer(ft={}){this.isWebGLRenderer=!0;const lt=ft.canvas!==void 0?ft.canvas:createCanvasElement(),dt=ft.context!==void 0?ft.context:null,vt=ft.depth!==void 0?ft.depth:!0,St=ft.stencil!==void 0?ft.stencil:!0,Et=ft.antialias!==void 0?ft.antialias:!1,Ct=ft.premultipliedAlpha!==void 0?ft.premultipliedAlpha:!0,At=ft.preserveDrawingBuffer!==void 0?ft.preserveDrawingBuffer:!1,Rt=ft.powerPreference!==void 0?ft.powerPreference:"default",Dt=ft.failIfMajorPerformanceCaveat!==void 0?ft.failIfMajorPerformanceCaveat:!1;let Nt;dt!==null?Nt=dt.getContextAttributes().alpha:Nt=ft.alpha!==void 0?ft.alpha:!1;let Ft=null,Ut=null;const Wt=[],Zt=[];this.domElement=lt,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const Kt=this;let cn=!1,hn=0,dn=0,pn=null,gn=-1,vn=null;const bn=new Vector4,$n=new Vector4;let Tn=null,In=lt.width,Pn=lt.height,zn=1,An=null,Gn=null;const xn=new Vector4(0,0,In,Pn),Qn=new Vector4(0,0,In,Pn);let qn=!1;const nr=new Frustum;let Un=!1,Nn=!1,jn=null;const Ln=new Matrix4,Cn=new Vector3,tr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ir(){return pn===null?zn:1}let Zn=dt;function br(sr,Gr){for(let Qr=0;Qr<sr.length;Qr++){const Ir=sr[Qr],Xr=lt.getContext(Ir,Gr);if(Xr!==null)return Xr}return null}try{const sr={alpha:!0,depth:vt,stencil:St,antialias:Et,premultipliedAlpha:Ct,preserveDrawingBuffer:At,powerPreference:Rt,failIfMajorPerformanceCaveat:Dt};if("setAttribute"in lt&&lt.setAttribute("data-engine",`three.js r${REVISION}`),lt.addEventListener("webglcontextlost",kr,!1),lt.addEventListener("webglcontextrestored",Br,!1),lt.addEventListener("webglcontextcreationerror",Rn,!1),Zn===null){const Gr=["webgl2","webgl","experimental-webgl"];if(Kt.isWebGL1Renderer===!0&&Gr.shift(),Zn=br(Gr,sr),Zn===null)throw br(Gr)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Zn.getShaderPrecisionFormat===void 0&&(Zn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(sr){throw console.error("THREE.WebGLRenderer: "+sr.message),sr}let fr,Or,Pr,zr,Dr,_r,Nr,Dn,yr,hr,Jn,Yn,ar,Sr,gr,Vn,Wn,rr,lr,xr,Fr,mr,Yr,Vr;function eo(){fr=new WebGLExtensions(Zn),Or=new WebGLCapabilities(Zn,fr,ft),fr.init(Or),mr=new WebGLUtils(Zn,fr,Or),Pr=new WebGLState(Zn,fr,Or),zr=new WebGLInfo,Dr=new WebGLProperties,_r=new WebGLTextures(Zn,fr,Pr,Dr,Or,mr,zr),Nr=new WebGLCubeMaps(Kt),Dn=new WebGLCubeUVMaps(Kt),yr=new WebGLAttributes(Zn,Or),Yr=new WebGLBindingStates(Zn,fr,yr,Or),hr=new WebGLGeometries(Zn,yr,zr,Yr),Jn=new WebGLObjects(Zn,hr,yr,zr),lr=new WebGLMorphtargets(Zn,Or,_r),Vn=new WebGLClipping(Dr),Yn=new WebGLPrograms(Kt,Nr,Dn,fr,Or,Yr,Vn),ar=new WebGLMaterials(Kt,Dr),Sr=new WebGLRenderLists,gr=new WebGLRenderStates(fr,Or),rr=new WebGLBackground(Kt,Nr,Dn,Pr,Jn,Nt,Ct),Wn=new WebGLShadowMap(Kt,Jn,Or),Vr=new WebGLUniformsGroups(Zn,zr,Or,Pr),xr=new WebGLBufferRenderer(Zn,fr,zr,Or),Fr=new WebGLIndexedBufferRenderer(Zn,fr,zr,Or),zr.programs=Yn.programs,Kt.capabilities=Or,Kt.extensions=fr,Kt.properties=Dr,Kt.renderLists=Sr,Kt.shadowMap=Wn,Kt.state=Pr,Kt.info=zr}eo();const ur=new WebXRManager(Kt,Zn);this.xr=ur,this.getContext=function(){return Zn},this.getContextAttributes=function(){return Zn.getContextAttributes()},this.forceContextLoss=function(){const sr=fr.get("WEBGL_lose_context");sr&&sr.loseContext()},this.forceContextRestore=function(){const sr=fr.get("WEBGL_lose_context");sr&&sr.restoreContext()},this.getPixelRatio=function(){return zn},this.setPixelRatio=function(sr){sr!==void 0&&(zn=sr,this.setSize(In,Pn,!1))},this.getSize=function(sr){return sr.set(In,Pn)},this.setSize=function(sr,Gr,Qr=!0){if(ur.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}In=sr,Pn=Gr,lt.width=Math.floor(sr*zn),lt.height=Math.floor(Gr*zn),Qr===!0&&(lt.style.width=sr+"px",lt.style.height=Gr+"px"),this.setViewport(0,0,sr,Gr)},this.getDrawingBufferSize=function(sr){return sr.set(In*zn,Pn*zn).floor()},this.setDrawingBufferSize=function(sr,Gr,Qr){In=sr,Pn=Gr,zn=Qr,lt.width=Math.floor(sr*Qr),lt.height=Math.floor(Gr*Qr),this.setViewport(0,0,sr,Gr)},this.getCurrentViewport=function(sr){return sr.copy(bn)},this.getViewport=function(sr){return sr.copy(xn)},this.setViewport=function(sr,Gr,Qr,Ir){sr.isVector4?xn.set(sr.x,sr.y,sr.z,sr.w):xn.set(sr,Gr,Qr,Ir),Pr.viewport(bn.copy(xn).multiplyScalar(zn).floor())},this.getScissor=function(sr){return sr.copy(Qn)},this.setScissor=function(sr,Gr,Qr,Ir){sr.isVector4?Qn.set(sr.x,sr.y,sr.z,sr.w):Qn.set(sr,Gr,Qr,Ir),Pr.scissor($n.copy(Qn).multiplyScalar(zn).floor())},this.getScissorTest=function(){return qn},this.setScissorTest=function(sr){Pr.setScissorTest(qn=sr)},this.setOpaqueSort=function(sr){An=sr},this.setTransparentSort=function(sr){Gn=sr},this.getClearColor=function(sr){return sr.copy(rr.getClearColor())},this.setClearColor=function(){rr.setClearColor.apply(rr,arguments)},this.getClearAlpha=function(){return rr.getClearAlpha()},this.setClearAlpha=function(){rr.setClearAlpha.apply(rr,arguments)},this.clear=function(sr=!0,Gr=!0,Qr=!0){let Ir=0;sr&&(Ir|=16384),Gr&&(Ir|=256),Qr&&(Ir|=1024),Zn.clear(Ir)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){lt.removeEventListener("webglcontextlost",kr,!1),lt.removeEventListener("webglcontextrestored",Br,!1),lt.removeEventListener("webglcontextcreationerror",Rn,!1),Sr.dispose(),gr.dispose(),Dr.dispose(),Nr.dispose(),Dn.dispose(),Jn.dispose(),Yr.dispose(),Vr.dispose(),Yn.dispose(),ur.dispose(),ur.removeEventListener("sessionstart",qr),ur.removeEventListener("sessionend",oo),jn&&(jn.dispose(),jn=null),co.stop()};function kr(sr){sr.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),cn=!0}function Br(){console.log("THREE.WebGLRenderer: Context Restored."),cn=!1;const sr=zr.autoReset,Gr=Wn.enabled,Qr=Wn.autoUpdate,Ir=Wn.needsUpdate,Xr=Wn.type;eo(),zr.autoReset=sr,Wn.enabled=Gr,Wn.autoUpdate=Qr,Wn.needsUpdate=Ir,Wn.type=Xr}function Rn(sr){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",sr.statusMessage)}function Xn(sr){const Gr=sr.target;Gr.removeEventListener("dispose",Xn),cr(Gr)}function cr(sr){wr(sr),Dr.remove(sr)}function wr(sr){const Gr=Dr.get(sr).programs;Gr!==void 0&&(Gr.forEach(function(Qr){Yn.releaseProgram(Qr)}),sr.isShaderMaterial&&Yn.releaseShaderCache(sr))}this.renderBufferDirect=function(sr,Gr,Qr,Ir,Xr,Oo){Gr===null&&(Gr=tr);const _o=Xr.isMesh&&Xr.matrixWorld.determinant()<0,wo=Ll(sr,Gr,Qr,Ir,Xr);Pr.setMaterial(Ir,_o);let Ao=Qr.index,Ro=1;Ir.wireframe===!0&&(Ao=hr.getWireframeAttribute(Qr),Ro=2);const Co=Qr.drawRange,to=Qr.attributes.position;let vs=Co.start*Ro,zs=(Co.start+Co.count)*Ro;Oo!==null&&(vs=Math.max(vs,Oo.start*Ro),zs=Math.min(zs,(Oo.start+Oo.count)*Ro)),Ao!==null?(vs=Math.max(vs,0),zs=Math.min(zs,Ao.count)):to!=null&&(vs=Math.max(vs,0),zs=Math.min(zs,to.count));const Hs=zs-vs;if(Hs<0||Hs===1/0)return;Yr.setup(Xr,Ir,wo,Qr,Ao);let Nl,Fo=xr;if(Ao!==null&&(Nl=yr.get(Ao),Fo=Fr,Fo.setIndex(Nl)),Xr.isMesh)Ir.wireframe===!0?(Pr.setLineWidth(Ir.wireframeLinewidth*ir()),Fo.setMode(1)):Fo.setMode(4);else if(Xr.isLine){let _i=Ir.linewidth;_i===void 0&&(_i=1),Pr.setLineWidth(_i*ir()),Xr.isLineSegments?Fo.setMode(1):Xr.isLineLoop?Fo.setMode(2):Fo.setMode(3)}else Xr.isPoints?Fo.setMode(0):Xr.isSprite&&Fo.setMode(4);if(Xr.isInstancedMesh)Fo.renderInstances(vs,Hs,Xr.count);else if(Qr.isInstancedBufferGeometry){const _i=Qr._maxInstanceCount!==void 0?Qr._maxInstanceCount:1/0,ts=Math.min(Qr.instanceCount,_i);Fo.renderInstances(vs,Hs,ts)}else Fo.render(vs,Hs)},this.compile=function(sr,Gr){function Qr(Ir,Xr,Oo){Ir.transparent===!0&&Ir.side===DoubleSide&&Ir.forceSinglePass===!1?(Ir.side=BackSide,Ir.needsUpdate=!0,Lo(Ir,Xr,Oo),Ir.side=FrontSide,Ir.needsUpdate=!0,Lo(Ir,Xr,Oo),Ir.side=DoubleSide):Lo(Ir,Xr,Oo)}Ut=gr.get(sr),Ut.init(),Zt.push(Ut),sr.traverseVisible(function(Ir){Ir.isLight&&Ir.layers.test(Gr.layers)&&(Ut.pushLight(Ir),Ir.castShadow&&Ut.pushShadow(Ir))}),Ut.setupLights(Kt.useLegacyLights),sr.traverse(function(Ir){const Xr=Ir.material;if(Xr)if(Array.isArray(Xr))for(let Oo=0;Oo<Xr.length;Oo++){const _o=Xr[Oo];Qr(_o,sr,Ir)}else Qr(Xr,sr,Ir)}),Zt.pop(),Ut=null};let Kn=null;function Cr(sr){Kn&&Kn(sr)}function qr(){co.stop()}function oo(){co.start()}const co=new WebGLAnimation;co.setAnimationLoop(Cr),typeof self<"u"&&co.setContext(self),this.setAnimationLoop=function(sr){Kn=sr,ur.setAnimationLoop(sr),sr===null?co.stop():co.start()},ur.addEventListener("sessionstart",qr),ur.addEventListener("sessionend",oo),this.render=function(sr,Gr){if(Gr!==void 0&&Gr.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(cn===!0)return;sr.matrixWorldAutoUpdate===!0&&sr.updateMatrixWorld(),Gr.parent===null&&Gr.matrixWorldAutoUpdate===!0&&Gr.updateMatrixWorld(),ur.enabled===!0&&ur.isPresenting===!0&&(ur.cameraAutoUpdate===!0&&ur.updateCamera(Gr),Gr=ur.getCamera()),sr.isScene===!0&&sr.onBeforeRender(Kt,sr,Gr,pn),Ut=gr.get(sr,Zt.length),Ut.init(),Zt.push(Ut),Ln.multiplyMatrices(Gr.projectionMatrix,Gr.matrixWorldInverse),nr.setFromProjectionMatrix(Ln),Nn=this.localClippingEnabled,Un=Vn.init(this.clippingPlanes,Nn),Ft=Sr.get(sr,Wt.length),Ft.init(),Wt.push(Ft),jo(sr,Gr,0,Kt.sortObjects),Ft.finish(),Kt.sortObjects===!0&&Ft.sort(An,Gn),Un===!0&&Vn.beginShadows();const Qr=Ut.state.shadowsArray;if(Wn.render(Qr,sr,Gr),Un===!0&&Vn.endShadows(),this.info.autoReset===!0&&this.info.reset(),rr.render(Ft,sr),Ut.setupLights(Kt.useLegacyLights),Gr.isArrayCamera){const Ir=Gr.cameras;for(let Xr=0,Oo=Ir.length;Xr<Oo;Xr++){const _o=Ir[Xr];Xo(Ft,sr,_o,_o.viewport)}}else Xo(Ft,sr,Gr);pn!==null&&(_r.updateMultisampleRenderTarget(pn),_r.updateRenderTargetMipmap(pn)),sr.isScene===!0&&sr.onAfterRender(Kt,sr,Gr),Yr.resetDefaultState(),gn=-1,vn=null,Zt.pop(),Zt.length>0?Ut=Zt[Zt.length-1]:Ut=null,Wt.pop(),Wt.length>0?Ft=Wt[Wt.length-1]:Ft=null};function jo(sr,Gr,Qr,Ir){if(sr.visible===!1)return;if(sr.layers.test(Gr.layers)){if(sr.isGroup)Qr=sr.renderOrder;else if(sr.isLOD)sr.autoUpdate===!0&&sr.update(Gr);else if(sr.isLight)Ut.pushLight(sr),sr.castShadow&&Ut.pushShadow(sr);else if(sr.isSprite){if(!sr.frustumCulled||nr.intersectsSprite(sr)){Ir&&Cn.setFromMatrixPosition(sr.matrixWorld).applyMatrix4(Ln);const _o=Jn.update(sr),wo=sr.material;wo.visible&&Ft.push(sr,_o,wo,Qr,Cn.z,null)}}else if((sr.isMesh||sr.isLine||sr.isPoints)&&(sr.isSkinnedMesh&&sr.skeleton.frame!==zr.render.frame&&(sr.skeleton.update(),sr.skeleton.frame=zr.render.frame),!sr.frustumCulled||nr.intersectsObject(sr))){Ir&&Cn.setFromMatrixPosition(sr.matrixWorld).applyMatrix4(Ln);const _o=Jn.update(sr),wo=sr.material;if(Array.isArray(wo)){const Ao=_o.groups;for(let Ro=0,Co=Ao.length;Ro<Co;Ro++){const to=Ao[Ro],vs=wo[to.materialIndex];vs&&vs.visible&&Ft.push(sr,_o,vs,Qr,Cn.z,to)}}else wo.visible&&Ft.push(sr,_o,wo,Qr,Cn.z,null)}}const Oo=sr.children;for(let _o=0,wo=Oo.length;_o<wo;_o++)jo(Oo[_o],Gr,Qr,Ir)}function Xo(sr,Gr,Qr,Ir){const Xr=sr.opaque,Oo=sr.transmissive,_o=sr.transparent;Ut.setupLightsView(Qr),Un===!0&&Vn.setGlobalState(Kt.clippingPlanes,Qr),Oo.length>0&&rs(Xr,Gr,Qr),Ir&&Pr.viewport(bn.copy(Ir)),Xr.length>0&&zo(Xr,Gr,Qr),Oo.length>0&&zo(Oo,Gr,Qr),_o.length>0&&zo(_o,Gr,Qr),Pr.buffers.depth.setTest(!0),Pr.buffers.depth.setMask(!0),Pr.buffers.color.setMask(!0),Pr.setPolygonOffset(!1)}function rs(sr,Gr,Qr){const Ir=Or.isWebGL2;jn===null&&(jn=new WebGLRenderTarget(1024,1024,{generateMipmaps:!0,type:fr.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:Ir&&Et===!0?4:0}));const Xr=Kt.getRenderTarget();Kt.setRenderTarget(jn),Kt.clear();const Oo=Kt.toneMapping;Kt.toneMapping=NoToneMapping,zo(sr,Gr,Qr),Kt.toneMapping=Oo,_r.updateMultisampleRenderTarget(jn),_r.updateRenderTargetMipmap(jn),Kt.setRenderTarget(Xr)}function zo(sr,Gr,Qr){const Ir=Gr.isScene===!0?Gr.overrideMaterial:null;for(let Xr=0,Oo=sr.length;Xr<Oo;Xr++){const _o=sr[Xr],wo=_o.object,Ao=_o.geometry,Ro=Ir===null?_o.material:Ir,Co=_o.group;wo.layers.test(Qr.layers)&&os(wo,Gr,Qr,Ao,Ro,Co)}}function os(sr,Gr,Qr,Ir,Xr,Oo){sr.onBeforeRender(Kt,Gr,Qr,Ir,Xr,Oo),sr.modelViewMatrix.multiplyMatrices(Qr.matrixWorldInverse,sr.matrixWorld),sr.normalMatrix.getNormalMatrix(sr.modelViewMatrix),Xr.onBeforeRender(Kt,Gr,Qr,Ir,sr,Oo),Xr.transparent===!0&&Xr.side===DoubleSide&&Xr.forceSinglePass===!1?(Xr.side=BackSide,Xr.needsUpdate=!0,Kt.renderBufferDirect(Qr,Gr,Ir,Xr,sr,Oo),Xr.side=FrontSide,Xr.needsUpdate=!0,Kt.renderBufferDirect(Qr,Gr,Ir,Xr,sr,Oo),Xr.side=DoubleSide):Kt.renderBufferDirect(Qr,Gr,Ir,Xr,sr,Oo),sr.onAfterRender(Kt,Gr,Qr,Ir,Xr,Oo)}function Lo(sr,Gr,Qr){Gr.isScene!==!0&&(Gr=tr);const Ir=Dr.get(sr),Xr=Ut.state.lights,Oo=Ut.state.shadowsArray,_o=Xr.state.version,wo=Yn.getParameters(sr,Xr.state,Oo,Gr,Qr),Ao=Yn.getProgramCacheKey(wo);let Ro=Ir.programs;Ir.environment=sr.isMeshStandardMaterial?Gr.environment:null,Ir.fog=Gr.fog,Ir.envMap=(sr.isMeshStandardMaterial?Dn:Nr).get(sr.envMap||Ir.environment),Ro===void 0&&(sr.addEventListener("dispose",Xn),Ro=new Map,Ir.programs=Ro);let Co=Ro.get(Ao);if(Co!==void 0){if(Ir.currentProgram===Co&&Ir.lightsStateVersion===_o)return Zo(sr,wo),Co}else wo.uniforms=Yn.getUniforms(sr),sr.onBuild(Qr,wo,Kt),sr.onBeforeCompile(wo,Kt),Co=Yn.acquireProgram(wo,Ao),Ro.set(Ao,Co),Ir.uniforms=wo.uniforms;const to=Ir.uniforms;(!sr.isShaderMaterial&&!sr.isRawShaderMaterial||sr.clipping===!0)&&(to.clippingPlanes=Vn.uniform),Zo(sr,wo),Ir.needsLights=ss(sr),Ir.lightsStateVersion=_o,Ir.needsLights&&(to.ambientLightColor.value=Xr.state.ambient,to.lightProbe.value=Xr.state.probe,to.directionalLights.value=Xr.state.directional,to.directionalLightShadows.value=Xr.state.directionalShadow,to.spotLights.value=Xr.state.spot,to.spotLightShadows.value=Xr.state.spotShadow,to.rectAreaLights.value=Xr.state.rectArea,to.ltc_1.value=Xr.state.rectAreaLTC1,to.ltc_2.value=Xr.state.rectAreaLTC2,to.pointLights.value=Xr.state.point,to.pointLightShadows.value=Xr.state.pointShadow,to.hemisphereLights.value=Xr.state.hemi,to.directionalShadowMap.value=Xr.state.directionalShadowMap,to.directionalShadowMatrix.value=Xr.state.directionalShadowMatrix,to.spotShadowMap.value=Xr.state.spotShadowMap,to.spotLightMatrix.value=Xr.state.spotLightMatrix,to.spotLightMap.value=Xr.state.spotLightMap,to.pointShadowMap.value=Xr.state.pointShadowMap,to.pointShadowMatrix.value=Xr.state.pointShadowMatrix);const vs=Co.getUniforms(),zs=WebGLUniforms.seqWithValue(vs.seq,to);return Ir.currentProgram=Co,Ir.uniformsList=zs,Co}function Zo(sr,Gr){const Qr=Dr.get(sr);Qr.outputEncoding=Gr.outputEncoding,Qr.instancing=Gr.instancing,Qr.skinning=Gr.skinning,Qr.morphTargets=Gr.morphTargets,Qr.morphNormals=Gr.morphNormals,Qr.morphColors=Gr.morphColors,Qr.morphTargetsCount=Gr.morphTargetsCount,Qr.numClippingPlanes=Gr.numClippingPlanes,Qr.numIntersection=Gr.numClipIntersection,Qr.vertexAlphas=Gr.vertexAlphas,Qr.vertexTangents=Gr.vertexTangents,Qr.toneMapping=Gr.toneMapping}function Ll(sr,Gr,Qr,Ir,Xr){Gr.isScene!==!0&&(Gr=tr),_r.resetTextureUnits();const Oo=Gr.fog,_o=Ir.isMeshStandardMaterial?Gr.environment:null,wo=pn===null?Kt.outputEncoding:pn.isXRRenderTarget===!0?pn.texture.encoding:LinearEncoding,Ao=(Ir.isMeshStandardMaterial?Dn:Nr).get(Ir.envMap||_o),Ro=Ir.vertexColors===!0&&!!Qr.attributes.color&&Qr.attributes.color.itemSize===4,Co=!!Ir.normalMap&&!!Qr.attributes.tangent,to=!!Qr.morphAttributes.position,vs=!!Qr.morphAttributes.normal,zs=!!Qr.morphAttributes.color,Hs=Ir.toneMapped?Kt.toneMapping:NoToneMapping,Nl=Qr.morphAttributes.position||Qr.morphAttributes.normal||Qr.morphAttributes.color,Fo=Nl!==void 0?Nl.length:0,_i=Dr.get(Ir),ts=Ut.state.lights;if(Un===!0&&(Nn===!0||sr!==vn)){const _s=sr===vn&&Ir.id===gn;Vn.setState(Ir,sr,_s)}let Mo=!1;Ir.version===_i.__version?(_i.needsLights&&_i.lightsStateVersion!==ts.state.version||_i.outputEncoding!==wo||Xr.isInstancedMesh&&_i.instancing===!1||!Xr.isInstancedMesh&&_i.instancing===!0||Xr.isSkinnedMesh&&_i.skinning===!1||!Xr.isSkinnedMesh&&_i.skinning===!0||_i.envMap!==Ao||Ir.fog===!0&&_i.fog!==Oo||_i.numClippingPlanes!==void 0&&(_i.numClippingPlanes!==Vn.numPlanes||_i.numIntersection!==Vn.numIntersection)||_i.vertexAlphas!==Ro||_i.vertexTangents!==Co||_i.morphTargets!==to||_i.morphNormals!==vs||_i.morphColors!==zs||_i.toneMapping!==Hs||Or.isWebGL2===!0&&_i.morphTargetsCount!==Fo)&&(Mo=!0):(Mo=!0,_i.__version=Ir.version);let fo=_i.currentProgram;Mo===!0&&(fo=Lo(Ir,Gr,Xr));let jp=!1,Ol=!1,Sl=!1;const ds=fo.getUniforms(),no=_i.uniforms;if(Pr.useProgram(fo.program)&&(jp=!0,Ol=!0,Sl=!0),Ir.id!==gn&&(gn=Ir.id,Ol=!0),jp||vn!==sr){if(ds.setValue(Zn,"projectionMatrix",sr.projectionMatrix),Or.logarithmicDepthBuffer&&ds.setValue(Zn,"logDepthBufFC",2/(Math.log(sr.far+1)/Math.LN2)),vn!==sr&&(vn=sr,Ol=!0,Sl=!0),Ir.isShaderMaterial||Ir.isMeshPhongMaterial||Ir.isMeshToonMaterial||Ir.isMeshStandardMaterial||Ir.envMap){const _s=ds.map.cameraPosition;_s!==void 0&&_s.setValue(Zn,Cn.setFromMatrixPosition(sr.matrixWorld))}(Ir.isMeshPhongMaterial||Ir.isMeshToonMaterial||Ir.isMeshLambertMaterial||Ir.isMeshBasicMaterial||Ir.isMeshStandardMaterial||Ir.isShaderMaterial)&&ds.setValue(Zn,"isOrthographic",sr.isOrthographicCamera===!0),(Ir.isMeshPhongMaterial||Ir.isMeshToonMaterial||Ir.isMeshLambertMaterial||Ir.isMeshBasicMaterial||Ir.isMeshStandardMaterial||Ir.isShaderMaterial||Ir.isShadowMaterial||Xr.isSkinnedMesh)&&ds.setValue(Zn,"viewMatrix",sr.matrixWorldInverse)}if(Xr.isSkinnedMesh){ds.setOptional(Zn,Xr,"bindMatrix"),ds.setOptional(Zn,Xr,"bindMatrixInverse");const _s=Xr.skeleton;_s&&(Or.floatVertexTextures?(_s.boneTexture===null&&_s.computeBoneTexture(),ds.setValue(Zn,"boneTexture",_s.boneTexture,_r),ds.setValue(Zn,"boneTextureSize",_s.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Yo=Qr.morphAttributes;if((Yo.position!==void 0||Yo.normal!==void 0||Yo.color!==void 0&&Or.isWebGL2===!0)&&lr.update(Xr,Qr,fo),(Ol||_i.receiveShadow!==Xr.receiveShadow)&&(_i.receiveShadow=Xr.receiveShadow,ds.setValue(Zn,"receiveShadow",Xr.receiveShadow)),Ir.isMeshGouraudMaterial&&Ir.envMap!==null&&(no.envMap.value=Ao,no.flipEnvMap.value=Ao.isCubeTexture&&Ao.isRenderTargetTexture===!1?-1:1),Ol&&(ds.setValue(Zn,"toneMappingExposure",Kt.toneMappingExposure),_i.needsLights&&So(no,Sl),Oo&&Ir.fog===!0&&ar.refreshFogUniforms(no,Oo),ar.refreshMaterialUniforms(no,Ir,zn,Pn,jn),WebGLUniforms.upload(Zn,_i.uniformsList,no,_r)),Ir.isShaderMaterial&&Ir.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Zn,_i.uniformsList,no,_r),Ir.uniformsNeedUpdate=!1),Ir.isSpriteMaterial&&ds.setValue(Zn,"center",Xr.center),ds.setValue(Zn,"modelViewMatrix",Xr.modelViewMatrix),ds.setValue(Zn,"normalMatrix",Xr.normalMatrix),ds.setValue(Zn,"modelMatrix",Xr.matrixWorld),Ir.isShaderMaterial||Ir.isRawShaderMaterial){const _s=Ir.uniformsGroups;for(let Os=0,Qs=_s.length;Os<Qs;Os++)if(Or.isWebGL2){const Po=_s[Os];Vr.update(Po,fo),Vr.bind(Po,fo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return fo}function So(sr,Gr){sr.ambientLightColor.needsUpdate=Gr,sr.lightProbe.needsUpdate=Gr,sr.directionalLights.needsUpdate=Gr,sr.directionalLightShadows.needsUpdate=Gr,sr.pointLights.needsUpdate=Gr,sr.pointLightShadows.needsUpdate=Gr,sr.spotLights.needsUpdate=Gr,sr.spotLightShadows.needsUpdate=Gr,sr.rectAreaLights.needsUpdate=Gr,sr.hemisphereLights.needsUpdate=Gr}function ss(sr){return sr.isMeshLambertMaterial||sr.isMeshToonMaterial||sr.isMeshPhongMaterial||sr.isMeshStandardMaterial||sr.isShadowMaterial||sr.isShaderMaterial&&sr.lights===!0}this.getActiveCubeFace=function(){return hn},this.getActiveMipmapLevel=function(){return dn},this.getRenderTarget=function(){return pn},this.setRenderTargetTextures=function(sr,Gr,Qr){Dr.get(sr.texture).__webglTexture=Gr,Dr.get(sr.depthTexture).__webglTexture=Qr;const Ir=Dr.get(sr);Ir.__hasExternalTextures=!0,Ir.__hasExternalTextures&&(Ir.__autoAllocateDepthBuffer=Qr===void 0,Ir.__autoAllocateDepthBuffer||fr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ir.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(sr,Gr){const Qr=Dr.get(sr);Qr.__webglFramebuffer=Gr,Qr.__useDefaultFramebuffer=Gr===void 0},this.setRenderTarget=function(sr,Gr=0,Qr=0){pn=sr,hn=Gr,dn=Qr;let Ir=!0,Xr=null,Oo=!1,_o=!1;if(sr){const Ao=Dr.get(sr);Ao.__useDefaultFramebuffer!==void 0?(Pr.bindFramebuffer(36160,null),Ir=!1):Ao.__webglFramebuffer===void 0?_r.setupRenderTarget(sr):Ao.__hasExternalTextures&&_r.rebindTextures(sr,Dr.get(sr.texture).__webglTexture,Dr.get(sr.depthTexture).__webglTexture);const Ro=sr.texture;(Ro.isData3DTexture||Ro.isDataArrayTexture||Ro.isCompressedArrayTexture)&&(_o=!0);const Co=Dr.get(sr).__webglFramebuffer;sr.isWebGLCubeRenderTarget?(Xr=Co[Gr],Oo=!0):Or.isWebGL2&&sr.samples>0&&_r.useMultisampledRTT(sr)===!1?Xr=Dr.get(sr).__webglMultisampledFramebuffer:Xr=Co,bn.copy(sr.viewport),$n.copy(sr.scissor),Tn=sr.scissorTest}else bn.copy(xn).multiplyScalar(zn).floor(),$n.copy(Qn).multiplyScalar(zn).floor(),Tn=qn;if(Pr.bindFramebuffer(36160,Xr)&&Or.drawBuffers&&Ir&&Pr.drawBuffers(sr,Xr),Pr.viewport(bn),Pr.scissor($n),Pr.setScissorTest(Tn),Oo){const Ao=Dr.get(sr.texture);Zn.framebufferTexture2D(36160,36064,34069+Gr,Ao.__webglTexture,Qr)}else if(_o){const Ao=Dr.get(sr.texture),Ro=Gr||0;Zn.framebufferTextureLayer(36160,36064,Ao.__webglTexture,Qr||0,Ro)}gn=-1},this.readRenderTargetPixels=function(sr,Gr,Qr,Ir,Xr,Oo,_o){if(!(sr&&sr.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wo=Dr.get(sr).__webglFramebuffer;if(sr.isWebGLCubeRenderTarget&&_o!==void 0&&(wo=wo[_o]),wo){Pr.bindFramebuffer(36160,wo);try{const Ao=sr.texture,Ro=Ao.format,Co=Ao.type;if(Ro!==RGBAFormat&&mr.convert(Ro)!==Zn.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const to=Co===HalfFloatType&&(fr.has("EXT_color_buffer_half_float")||Or.isWebGL2&&fr.has("EXT_color_buffer_float"));if(Co!==UnsignedByteType&&mr.convert(Co)!==Zn.getParameter(35738)&&!(Co===FloatType&&(Or.isWebGL2||fr.has("OES_texture_float")||fr.has("WEBGL_color_buffer_float")))&&!to){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Gr>=0&&Gr<=sr.width-Ir&&Qr>=0&&Qr<=sr.height-Xr&&Zn.readPixels(Gr,Qr,Ir,Xr,mr.convert(Ro),mr.convert(Co),Oo)}finally{const Ao=pn!==null?Dr.get(pn).__webglFramebuffer:null;Pr.bindFramebuffer(36160,Ao)}}},this.copyFramebufferToTexture=function(sr,Gr,Qr=0){const Ir=Math.pow(2,-Qr),Xr=Math.floor(Gr.image.width*Ir),Oo=Math.floor(Gr.image.height*Ir);_r.setTexture2D(Gr,0),Zn.copyTexSubImage2D(3553,Qr,0,0,sr.x,sr.y,Xr,Oo),Pr.unbindTexture()},this.copyTextureToTexture=function(sr,Gr,Qr,Ir=0){const Xr=Gr.image.width,Oo=Gr.image.height,_o=mr.convert(Qr.format),wo=mr.convert(Qr.type);_r.setTexture2D(Qr,0),Zn.pixelStorei(37440,Qr.flipY),Zn.pixelStorei(37441,Qr.premultiplyAlpha),Zn.pixelStorei(3317,Qr.unpackAlignment),Gr.isDataTexture?Zn.texSubImage2D(3553,Ir,sr.x,sr.y,Xr,Oo,_o,wo,Gr.image.data):Gr.isCompressedTexture?Zn.compressedTexSubImage2D(3553,Ir,sr.x,sr.y,Gr.mipmaps[0].width,Gr.mipmaps[0].height,_o,Gr.mipmaps[0].data):Zn.texSubImage2D(3553,Ir,sr.x,sr.y,_o,wo,Gr.image),Ir===0&&Qr.generateMipmaps&&Zn.generateMipmap(3553),Pr.unbindTexture()},this.copyTextureToTexture3D=function(sr,Gr,Qr,Ir,Xr=0){if(Kt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Oo=sr.max.x-sr.min.x+1,_o=sr.max.y-sr.min.y+1,wo=sr.max.z-sr.min.z+1,Ao=mr.convert(Ir.format),Ro=mr.convert(Ir.type);let Co;if(Ir.isData3DTexture)_r.setTexture3D(Ir,0),Co=32879;else if(Ir.isDataArrayTexture)_r.setTexture2DArray(Ir,0),Co=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Zn.pixelStorei(37440,Ir.flipY),Zn.pixelStorei(37441,Ir.premultiplyAlpha),Zn.pixelStorei(3317,Ir.unpackAlignment);const to=Zn.getParameter(3314),vs=Zn.getParameter(32878),zs=Zn.getParameter(3316),Hs=Zn.getParameter(3315),Nl=Zn.getParameter(32877),Fo=Qr.isCompressedTexture?Qr.mipmaps[0]:Qr.image;Zn.pixelStorei(3314,Fo.width),Zn.pixelStorei(32878,Fo.height),Zn.pixelStorei(3316,sr.min.x),Zn.pixelStorei(3315,sr.min.y),Zn.pixelStorei(32877,sr.min.z),Qr.isDataTexture||Qr.isData3DTexture?Zn.texSubImage3D(Co,Xr,Gr.x,Gr.y,Gr.z,Oo,_o,wo,Ao,Ro,Fo.data):Qr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Zn.compressedTexSubImage3D(Co,Xr,Gr.x,Gr.y,Gr.z,Oo,_o,wo,Ao,Fo.data)):Zn.texSubImage3D(Co,Xr,Gr.x,Gr.y,Gr.z,Oo,_o,wo,Ao,Ro,Fo),Zn.pixelStorei(3314,to),Zn.pixelStorei(32878,vs),Zn.pixelStorei(3316,zs),Zn.pixelStorei(3315,Hs),Zn.pixelStorei(32877,Nl),Xr===0&&Ir.generateMipmaps&&Zn.generateMipmap(Co),Pr.unbindTexture()},this.initTexture=function(sr){sr.isCubeTexture?_r.setTextureCube(sr,0):sr.isData3DTexture?_r.setTexture3D(sr,0):sr.isDataArrayTexture||sr.isCompressedArrayTexture?_r.setTexture2DArray(sr,0):_r.setTexture2D(sr,0),Pr.unbindTexture()},this.resetState=function(){hn=0,dn=0,pn=null,Pr.reset(),Yr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(WebGLRenderer.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(ft){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!ft}}});class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(lt,dt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(lt),this.density=dt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(lt,dt=1,vt=1e3){this.isFog=!0,this.name="",this.color=new Color(lt),this.near=dt,this.far=vt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(lt,dt){return super.copy(lt,dt),lt.background!==null&&(this.background=lt.background.clone()),lt.environment!==null&&(this.environment=lt.environment.clone()),lt.fog!==null&&(this.fog=lt.fog.clone()),this.backgroundBlurriness=lt.backgroundBlurriness,this.backgroundIntensity=lt.backgroundIntensity,lt.overrideMaterial!==null&&(this.overrideMaterial=lt.overrideMaterial.clone()),this.matrixAutoUpdate=lt.matrixAutoUpdate,this}toJSON(lt){const dt=super.toJSON(lt);return this.fog!==null&&(dt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(dt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(dt.object.backgroundIntensity=this.backgroundIntensity),dt}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(lt){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=lt}}class InterleavedBuffer{constructor(lt,dt){this.isInterleavedBuffer=!0,this.array=lt,this.stride=dt,this.count=lt!==void 0?lt.length/dt:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(lt){lt===!0&&this.version++}setUsage(lt){return this.usage=lt,this}copy(lt){return this.array=new lt.array.constructor(lt.array),this.count=lt.count,this.stride=lt.stride,this.usage=lt.usage,this}copyAt(lt,dt,vt){lt*=this.stride,vt*=dt.stride;for(let St=0,Et=this.stride;St<Et;St++)this.array[lt+St]=dt.array[vt+St];return this}set(lt,dt=0){return this.array.set(lt,dt),this}clone(lt){lt.arrayBuffers===void 0&&(lt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),lt.arrayBuffers[this.array.buffer._uuid]===void 0&&(lt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const dt=new this.array.constructor(lt.arrayBuffers[this.array.buffer._uuid]),vt=new this.constructor(dt,this.stride);return vt.setUsage(this.usage),vt}onUpload(lt){return this.onUploadCallback=lt,this}toJSON(lt){return lt.arrayBuffers===void 0&&(lt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),lt.arrayBuffers[this.array.buffer._uuid]===void 0&&(lt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(lt,dt,vt,St=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=lt,this.itemSize=dt,this.offset=vt,this.normalized=St}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(lt){this.data.needsUpdate=lt}applyMatrix4(lt){for(let dt=0,vt=this.data.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.applyMatrix4(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.applyNormalMatrix(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.transformDirection(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset]=dt,this}setY(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+1]=dt,this}setZ(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+2]=dt,this}setW(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+3]=dt,this}getX(lt){let dt=this.data.array[lt*this.data.stride+this.offset];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getY(lt){let dt=this.data.array[lt*this.data.stride+this.offset+1];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getZ(lt){let dt=this.data.array[lt*this.data.stride+this.offset+2];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getW(lt){let dt=this.data.array[lt*this.data.stride+this.offset+3];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setXY(lt,dt,vt){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this}setXYZ(lt,dt,vt,St){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),St=normalize(St,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this.data.array[lt+2]=St,this}setXYZW(lt,dt,vt,St,Et){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),St=normalize(St,this.array),Et=normalize(Et,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this.data.array[lt+2]=St,this.data.array[lt+3]=Et,this}clone(lt){if(lt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const dt=[];for(let vt=0;vt<this.count;vt++){const St=vt*this.data.stride+this.offset;for(let Et=0;Et<this.itemSize;Et++)dt.push(this.data.array[St+Et])}return new BufferAttribute(new this.array.constructor(dt),this.itemSize,this.normalized)}else return lt.interleavedBuffers===void 0&&(lt.interleavedBuffers={}),lt.interleavedBuffers[this.data.uuid]===void 0&&(lt.interleavedBuffers[this.data.uuid]=this.data.clone(lt)),new InterleavedBufferAttribute(lt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(lt){if(lt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const dt=[];for(let vt=0;vt<this.count;vt++){const St=vt*this.data.stride+this.offset;for(let Et=0;Et<this.itemSize;Et++)dt.push(this.data.array[St+Et])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:dt,normalized:this.normalized}}else return lt.interleavedBuffers===void 0&&(lt.interleavedBuffers={}),lt.interleavedBuffers[this.data.uuid]===void 0&&(lt.interleavedBuffers[this.data.uuid]=this.data.toJSON(lt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(lt){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.alphaMap=lt.alphaMap,this.rotation=lt.rotation,this.sizeAttenuation=lt.sizeAttenuation,this.fog=lt.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(lt){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const dt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),vt=new InterleavedBuffer(dt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(vt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(vt,2,3,!1))}this.geometry=_geometry,this.material=lt!==void 0?lt:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(lt,dt){lt.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(lt.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(lt.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),lt.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const vt=this.material.rotation;let St,Et;vt!==0&&(Et=Math.cos(vt),St=Math.sin(vt));const Ct=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,Ct,_worldScale,St,Et),transformVertex(_vB.set(.5,-.5,0),_mvPosition,Ct,_worldScale,St,Et),transformVertex(_vC.set(.5,.5,0),_mvPosition,Ct,_worldScale,St,Et),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let At=lt.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(At===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,Ct,_worldScale,St,Et),_uvB.set(0,1),At=lt.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),At===null))return;const Rt=lt.ray.origin.distanceTo(_intersectPoint);Rt<lt.near||Rt>lt.far||dt.push({distance:Rt,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(lt,dt){return super.copy(lt,dt),lt.center!==void 0&&this.center.copy(lt.center),this.material=lt.material,this}}function transformVertex(ft,lt,dt,vt,St,Et){_alignedPosition.subVectors(ft,dt).addScalar(.5).multiply(vt),St!==void 0?(_rotatedPosition.x=Et*_alignedPosition.x-St*_alignedPosition.y,_rotatedPosition.y=St*_alignedPosition.x+Et*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ft.copy(lt),ft.x+=_rotatedPosition.x,ft.y+=_rotatedPosition.y,ft.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(lt){super.copy(lt,!1);const dt=lt.levels;for(let vt=0,St=dt.length;vt<St;vt++){const Et=dt[vt];this.addLevel(Et.object.clone(),Et.distance,Et.hysteresis)}return this.autoUpdate=lt.autoUpdate,this}addLevel(lt,dt=0,vt=0){dt=Math.abs(dt);const St=this.levels;let Et;for(Et=0;Et<St.length&&!(dt<St[Et].distance);Et++);return St.splice(Et,0,{distance:dt,hysteresis:vt,object:lt}),this.add(lt),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(lt){const dt=this.levels;if(dt.length>0){let vt,St;for(vt=1,St=dt.length;vt<St;vt++){let Et=dt[vt].distance;if(dt[vt].object.visible&&(Et-=Et*dt[vt].hysteresis),lt<Et)break}return dt[vt-1].object}return null}raycast(lt,dt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const St=lt.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(St).raycast(lt,dt)}}update(lt){const dt=this.levels;if(dt.length>1){_v1$2.setFromMatrixPosition(lt.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const vt=_v1$2.distanceTo(_v2$1)/lt.zoom;dt[0].object.visible=!0;let St,Et;for(St=1,Et=dt.length;St<Et;St++){let Ct=dt[St].distance;if(dt[St].object.visible&&(Ct-=Ct*dt[St].hysteresis),vt>=Ct)dt[St-1].object.visible=!1,dt[St].object.visible=!0;else break}for(this._currentLevel=St-1;St<Et;St++)dt[St].object.visible=!1}}toJSON(lt){const dt=super.toJSON(lt);this.autoUpdate===!1&&(dt.object.autoUpdate=!1),dt.object.levels=[];const vt=this.levels;for(let St=0,Et=vt.length;St<Et;St++){const Ct=vt[St];dt.object.levels.push({object:Ct.object.uuid,distance:Ct.distance,hysteresis:Ct.hysteresis})}return dt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(lt,dt){super(lt,dt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(lt,dt){return super.copy(lt,dt),this.bindMode=lt.bindMode,this.bindMatrix.copy(lt.bindMatrix),this.bindMatrixInverse.copy(lt.bindMatrixInverse),this.skeleton=lt.skeleton,this}bind(lt,dt){this.skeleton=lt,dt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),dt=this.matrixWorld),this.bindMatrix.copy(dt),this.bindMatrixInverse.copy(dt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const lt=new Vector4,dt=this.geometry.attributes.skinWeight;for(let vt=0,St=dt.count;vt<St;vt++){lt.fromBufferAttribute(dt,vt);const Et=1/lt.manhattanLength();Et!==1/0?lt.multiplyScalar(Et):lt.set(1,0,0,0),dt.setXYZW(vt,lt.x,lt.y,lt.z,lt.w)}}updateMatrixWorld(lt){super.updateMatrixWorld(lt),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(lt,dt){const vt=this.skeleton,St=this.geometry;_skinIndex.fromBufferAttribute(St.attributes.skinIndex,lt),_skinWeight.fromBufferAttribute(St.attributes.skinWeight,lt),_basePosition.copy(dt).applyMatrix4(this.bindMatrix),dt.set(0,0,0);for(let Et=0;Et<4;Et++){const Ct=_skinWeight.getComponent(Et);if(Ct!==0){const At=_skinIndex.getComponent(Et);_matrix.multiplyMatrices(vt.bones[At].matrixWorld,vt.boneInverses[At]),dt.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),Ct)}}return dt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(lt=null,dt=1,vt=1,St,Et,Ct,At,Rt,Dt=NearestFilter,Nt=NearestFilter,Ft,Ut){super(null,Ct,At,Rt,Dt,Nt,St,Et,Ft,Ut),this.isDataTexture=!0,this.image={data:lt,width:dt,height:vt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(lt=[],dt=[]){this.uuid=generateUUID$1(),this.bones=lt.slice(0),this.boneInverses=dt,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const lt=this.bones,dt=this.boneInverses;if(this.boneMatrices=new Float32Array(lt.length*16),dt.length===0)this.calculateInverses();else if(lt.length!==dt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let vt=0,St=this.bones.length;vt<St;vt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=new Matrix4;this.bones[lt]&&vt.copy(this.bones[lt].matrixWorld).invert(),this.boneInverses.push(vt)}}pose(){for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=this.bones[lt];vt&&vt.matrixWorld.copy(this.boneInverses[lt]).invert()}for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=this.bones[lt];vt&&(vt.parent&&vt.parent.isBone?(vt.matrix.copy(vt.parent.matrixWorld).invert(),vt.matrix.multiply(vt.matrixWorld)):vt.matrix.copy(vt.matrixWorld),vt.matrix.decompose(vt.position,vt.quaternion,vt.scale))}}update(){const lt=this.bones,dt=this.boneInverses,vt=this.boneMatrices,St=this.boneTexture;for(let Et=0,Ct=lt.length;Et<Ct;Et++){const At=lt[Et]?lt[Et].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(At,dt[Et]),_offsetMatrix.toArray(vt,Et*16)}St!==null&&(St.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let lt=Math.sqrt(this.bones.length*4);lt=ceilPowerOfTwo(lt),lt=Math.max(lt,4);const dt=new Float32Array(lt*lt*4);dt.set(this.boneMatrices);const vt=new DataTexture(dt,lt,lt,RGBAFormat,FloatType);return vt.needsUpdate=!0,this.boneMatrices=dt,this.boneTexture=vt,this.boneTextureSize=lt,this}getBoneByName(lt){for(let dt=0,vt=this.bones.length;dt<vt;dt++){const St=this.bones[dt];if(St.name===lt)return St}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(lt,dt){this.uuid=lt.uuid;for(let vt=0,St=lt.bones.length;vt<St;vt++){const Et=lt.bones[vt];let Ct=dt[Et];Ct===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",Et),Ct=new Bone),this.bones.push(Ct),this.boneInverses.push(new Matrix4().fromArray(lt.boneInverses[vt]))}return this.init(),this}toJSON(){const lt={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};lt.uuid=this.uuid;const dt=this.bones,vt=this.boneInverses;for(let St=0,Et=dt.length;St<Et;St++){const Ct=dt[St];lt.bones.push(Ct.uuid);const At=vt[St];lt.boneInverses.push(At.toArray())}return lt}}class InstancedBufferAttribute extends BufferAttribute{constructor(lt,dt,vt,St=1){super(lt,dt,vt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=St}copy(lt){return super.copy(lt),this.meshPerAttribute=lt.meshPerAttribute,this}toJSON(){const lt=super.toJSON();return lt.meshPerAttribute=this.meshPerAttribute,lt.isInstancedBufferAttribute=!0,lt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_identity=new Matrix4,_mesh=new Mesh;class InstancedMesh extends Mesh{constructor(lt,dt,vt){super(lt,dt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(vt*16),16),this.instanceColor=null,this.count=vt,this.frustumCulled=!1;for(let St=0;St<vt;St++)this.setMatrixAt(St,_identity)}copy(lt,dt){return super.copy(lt,dt),this.instanceMatrix.copy(lt.instanceMatrix),lt.instanceColor!==null&&(this.instanceColor=lt.instanceColor.clone()),this.count=lt.count,this}getColorAt(lt,dt){dt.fromArray(this.instanceColor.array,lt*3)}getMatrixAt(lt,dt){dt.fromArray(this.instanceMatrix.array,lt*16)}raycast(lt,dt){const vt=this.matrixWorld,St=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let Et=0;Et<St;Et++){this.getMatrixAt(Et,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(vt,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(lt,_instanceIntersects);for(let Ct=0,At=_instanceIntersects.length;Ct<At;Ct++){const Rt=_instanceIntersects[Ct];Rt.instanceId=Et,Rt.object=this,dt.push(Rt)}_instanceIntersects.length=0}}setColorAt(lt,dt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),dt.toArray(this.instanceColor.array,lt*3)}setMatrixAt(lt,dt){dt.toArray(this.instanceMatrix.array,lt*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(lt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.linewidth=lt.linewidth,this.linecap=lt.linecap,this.linejoin=lt.linejoin,this.fog=lt.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere$1;let Line$2=class extends Object3D{constructor(lt=new BufferGeometry,dt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),this.material=lt.material,this.geometry=lt.geometry,this}computeLineDistances(){const lt=this.geometry;if(lt.index===null){const dt=lt.attributes.position,vt=[0];for(let St=1,Et=dt.count;St<Et;St++)_start$1.fromBufferAttribute(dt,St-1),_end$1.fromBufferAttribute(dt,St),vt[St]=vt[St-1],vt[St]+=_start$1.distanceTo(_end$1);lt.setAttribute("lineDistance",new Float32BufferAttribute(vt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(lt,dt){const vt=this.geometry,St=this.matrixWorld,Et=lt.params.Line.threshold,Ct=vt.drawRange;if(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$1.copy(vt.boundingSphere),_sphere$1.applyMatrix4(St),_sphere$1.radius+=Et,lt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(St).invert(),_ray$1.copy(lt.ray).applyMatrix4(_inverseMatrix$1);const At=Et/((this.scale.x+this.scale.y+this.scale.z)/3),Rt=At*At,Dt=new Vector3,Nt=new Vector3,Ft=new Vector3,Ut=new Vector3,Wt=this.isLineSegments?2:1,Zt=vt.index,cn=vt.attributes.position;if(Zt!==null){const hn=Math.max(0,Ct.start),dn=Math.min(Zt.count,Ct.start+Ct.count);for(let pn=hn,gn=dn-1;pn<gn;pn+=Wt){const vn=Zt.getX(pn),bn=Zt.getX(pn+1);if(Dt.fromBufferAttribute(cn,vn),Nt.fromBufferAttribute(cn,bn),_ray$1.distanceSqToSegment(Dt,Nt,Ut,Ft)>Rt)continue;Ut.applyMatrix4(this.matrixWorld);const Tn=lt.ray.origin.distanceTo(Ut);Tn<lt.near||Tn>lt.far||dt.push({distance:Tn,point:Ft.clone().applyMatrix4(this.matrixWorld),index:pn,face:null,faceIndex:null,object:this})}}else{const hn=Math.max(0,Ct.start),dn=Math.min(cn.count,Ct.start+Ct.count);for(let pn=hn,gn=dn-1;pn<gn;pn+=Wt){if(Dt.fromBufferAttribute(cn,pn),Nt.fromBufferAttribute(cn,pn+1),_ray$1.distanceSqToSegment(Dt,Nt,Ut,Ft)>Rt)continue;Ut.applyMatrix4(this.matrixWorld);const bn=lt.ray.origin.distanceTo(Ut);bn<lt.near||bn>lt.far||dt.push({distance:bn,point:Ft.clone().applyMatrix4(this.matrixWorld),index:pn,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const St=dt[vt[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=St.length;Et<Ct;Et++){const At=St[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Et}}}}};const _start$2=new Vector3,_end$2=new Vector3;class LineSegments extends Line$2{constructor(lt,dt){super(lt,dt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const lt=this.geometry;if(lt.index===null){const dt=lt.attributes.position,vt=[];for(let St=0,Et=dt.count;St<Et;St+=2)_start$2.fromBufferAttribute(dt,St),_end$2.fromBufferAttribute(dt,St+1),vt[St]=St===0?0:vt[St-1],vt[St+1]=vt[St]+_start$2.distanceTo(_end$2);lt.setAttribute("lineDistance",new Float32BufferAttribute(vt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(lt,dt){super(lt,dt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(lt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.alphaMap=lt.alphaMap,this.size=lt.size,this.sizeAttenuation=lt.sizeAttenuation,this.fog=lt.fog,this}}const _inverseMatrix=new Matrix4,_ray$3=new Ray,_sphere$4=new Sphere$1,_position$2=new Vector3;class Points extends Object3D{constructor(lt=new BufferGeometry,dt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),this.material=lt.material,this.geometry=lt.geometry,this}raycast(lt,dt){const vt=this.geometry,St=this.matrixWorld,Et=lt.params.Points.threshold,Ct=vt.drawRange;if(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$4.copy(vt.boundingSphere),_sphere$4.applyMatrix4(St),_sphere$4.radius+=Et,lt.ray.intersectsSphere(_sphere$4)===!1)return;_inverseMatrix.copy(St).invert(),_ray$3.copy(lt.ray).applyMatrix4(_inverseMatrix);const At=Et/((this.scale.x+this.scale.y+this.scale.z)/3),Rt=At*At,Dt=vt.index,Ft=vt.attributes.position;if(Dt!==null){const Ut=Math.max(0,Ct.start),Wt=Math.min(Dt.count,Ct.start+Ct.count);for(let Zt=Ut,Kt=Wt;Zt<Kt;Zt++){const cn=Dt.getX(Zt);_position$2.fromBufferAttribute(Ft,cn),testPoint(_position$2,cn,Rt,St,lt,dt,this)}}else{const Ut=Math.max(0,Ct.start),Wt=Math.min(Ft.count,Ct.start+Ct.count);for(let Zt=Ut,Kt=Wt;Zt<Kt;Zt++)_position$2.fromBufferAttribute(Ft,Zt),testPoint(_position$2,Zt,Rt,St,lt,dt,this)}}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const St=dt[vt[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=St.length;Et<Ct;Et++){const At=St[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Et}}}}}function testPoint(ft,lt,dt,vt,St,Et,Ct){const At=_ray$3.distanceSqToPoint(ft);if(At<dt){const Rt=new Vector3;_ray$3.closestPointToPoint(ft,Rt),Rt.applyMatrix4(vt);const Dt=St.ray.origin.distanceTo(Rt);if(Dt<St.near||Dt>St.far)return;Et.push({distance:Dt,distanceToRay:Math.sqrt(At),point:Rt,index:lt,face:null,object:Ct})}}class VideoTexture extends Texture{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt){super(lt,dt,vt,St,Et,Ct,At,Rt,Dt),this.isVideoTexture=!0,this.minFilter=Ct!==void 0?Ct:LinearFilter,this.magFilter=Et!==void 0?Et:LinearFilter,this.generateMipmaps=!1;const Nt=this;function Ft(){Nt.needsUpdate=!0,lt.requestVideoFrameCallback(Ft)}"requestVideoFrameCallback"in lt&&lt.requestVideoFrameCallback(Ft)}clone(){return new this.constructor(this.image).copy(this)}update(){const lt=this.image;"requestVideoFrameCallback"in lt===!1&&lt.readyState>=lt.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(lt,dt,vt){super({width:lt,height:dt}),this.isFramebufferTexture=!0,this.format=vt,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt,Ft,Ut){super(null,Ct,At,Rt,Dt,Nt,St,Et,Ft,Ut),this.isCompressedTexture=!0,this.image={width:dt,height:vt},this.mipmaps=lt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(lt,dt,vt,St,Et,Ct){super(lt,dt,vt,Et,Ct),this.isCompressedArrayTexture=!0,this.image.depth=St,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt){super(lt,dt,vt,St,Et,Ct,At,Rt,Dt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(lt,dt){const vt=this.getUtoTmapping(lt);return this.getPoint(vt,dt)}getPoints(lt=5){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPoint(vt/lt));return dt}getSpacedPoints(lt=5){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPointAt(vt/lt));return dt}getLength(){const lt=this.getLengths();return lt[lt.length-1]}getLengths(lt=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===lt+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const dt=[];let vt,St=this.getPoint(0),Et=0;dt.push(0);for(let Ct=1;Ct<=lt;Ct++)vt=this.getPoint(Ct/lt),Et+=vt.distanceTo(St),dt.push(Et),St=vt;return this.cacheArcLengths=dt,dt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(lt,dt){const vt=this.getLengths();let St=0;const Et=vt.length;let Ct;dt?Ct=dt:Ct=lt*vt[Et-1];let At=0,Rt=Et-1,Dt;for(;At<=Rt;)if(St=Math.floor(At+(Rt-At)/2),Dt=vt[St]-Ct,Dt<0)At=St+1;else if(Dt>0)Rt=St-1;else{Rt=St;break}if(St=Rt,vt[St]===Ct)return St/(Et-1);const Nt=vt[St],Ut=vt[St+1]-Nt,Wt=(Ct-Nt)/Ut;return(St+Wt)/(Et-1)}getTangent(lt,dt){let St=lt-1e-4,Et=lt+1e-4;St<0&&(St=0),Et>1&&(Et=1);const Ct=this.getPoint(St),At=this.getPoint(Et),Rt=dt||(Ct.isVector2?new Vector2:new Vector3);return Rt.copy(At).sub(Ct).normalize(),Rt}getTangentAt(lt,dt){const vt=this.getUtoTmapping(lt);return this.getTangent(vt,dt)}computeFrenetFrames(lt,dt){const vt=new Vector3,St=[],Et=[],Ct=[],At=new Vector3,Rt=new Matrix4;for(let Wt=0;Wt<=lt;Wt++){const Zt=Wt/lt;St[Wt]=this.getTangentAt(Zt,new Vector3)}Et[0]=new Vector3,Ct[0]=new Vector3;let Dt=Number.MAX_VALUE;const Nt=Math.abs(St[0].x),Ft=Math.abs(St[0].y),Ut=Math.abs(St[0].z);Nt<=Dt&&(Dt=Nt,vt.set(1,0,0)),Ft<=Dt&&(Dt=Ft,vt.set(0,1,0)),Ut<=Dt&&vt.set(0,0,1),At.crossVectors(St[0],vt).normalize(),Et[0].crossVectors(St[0],At),Ct[0].crossVectors(St[0],Et[0]);for(let Wt=1;Wt<=lt;Wt++){if(Et[Wt]=Et[Wt-1].clone(),Ct[Wt]=Ct[Wt-1].clone(),At.crossVectors(St[Wt-1],St[Wt]),At.length()>Number.EPSILON){At.normalize();const Zt=Math.acos(clamp$1(St[Wt-1].dot(St[Wt]),-1,1));Et[Wt].applyMatrix4(Rt.makeRotationAxis(At,Zt))}Ct[Wt].crossVectors(St[Wt],Et[Wt])}if(dt===!0){let Wt=Math.acos(clamp$1(Et[0].dot(Et[lt]),-1,1));Wt/=lt,St[0].dot(At.crossVectors(Et[0],Et[lt]))>0&&(Wt=-Wt);for(let Zt=1;Zt<=lt;Zt++)Et[Zt].applyMatrix4(Rt.makeRotationAxis(St[Zt],Wt*Zt)),Ct[Zt].crossVectors(St[Zt],Et[Zt])}return{tangents:St,normals:Et,binormals:Ct}}clone(){return new this.constructor().copy(this)}copy(lt){return this.arcLengthDivisions=lt.arcLengthDivisions,this}toJSON(){const lt={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return lt.arcLengthDivisions=this.arcLengthDivisions,lt.type=this.type,lt}fromJSON(lt){return this.arcLengthDivisions=lt.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(lt=0,dt=0,vt=1,St=1,Et=0,Ct=Math.PI*2,At=!1,Rt=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=lt,this.aY=dt,this.xRadius=vt,this.yRadius=St,this.aStartAngle=Et,this.aEndAngle=Ct,this.aClockwise=At,this.aRotation=Rt}getPoint(lt,dt){const vt=dt||new Vector2,St=Math.PI*2;let Et=this.aEndAngle-this.aStartAngle;const Ct=Math.abs(Et)<Number.EPSILON;for(;Et<0;)Et+=St;for(;Et>St;)Et-=St;Et<Number.EPSILON&&(Ct?Et=0:Et=St),this.aClockwise===!0&&!Ct&&(Et===St?Et=-St:Et=Et-St);const At=this.aStartAngle+lt*Et;let Rt=this.aX+this.xRadius*Math.cos(At),Dt=this.aY+this.yRadius*Math.sin(At);if(this.aRotation!==0){const Nt=Math.cos(this.aRotation),Ft=Math.sin(this.aRotation),Ut=Rt-this.aX,Wt=Dt-this.aY;Rt=Ut*Nt-Wt*Ft+this.aX,Dt=Ut*Ft+Wt*Nt+this.aY}return vt.set(Rt,Dt)}copy(lt){return super.copy(lt),this.aX=lt.aX,this.aY=lt.aY,this.xRadius=lt.xRadius,this.yRadius=lt.yRadius,this.aStartAngle=lt.aStartAngle,this.aEndAngle=lt.aEndAngle,this.aClockwise=lt.aClockwise,this.aRotation=lt.aRotation,this}toJSON(){const lt=super.toJSON();return lt.aX=this.aX,lt.aY=this.aY,lt.xRadius=this.xRadius,lt.yRadius=this.yRadius,lt.aStartAngle=this.aStartAngle,lt.aEndAngle=this.aEndAngle,lt.aClockwise=this.aClockwise,lt.aRotation=this.aRotation,lt}fromJSON(lt){return super.fromJSON(lt),this.aX=lt.aX,this.aY=lt.aY,this.xRadius=lt.xRadius,this.yRadius=lt.yRadius,this.aStartAngle=lt.aStartAngle,this.aEndAngle=lt.aEndAngle,this.aClockwise=lt.aClockwise,this.aRotation=lt.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(lt,dt,vt,St,Et,Ct){super(lt,dt,vt,vt,St,Et,Ct),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let ft=0,lt=0,dt=0,vt=0;function St(Et,Ct,At,Rt){ft=Et,lt=At,dt=-3*Et+3*Ct-2*At-Rt,vt=2*Et-2*Ct+At+Rt}return{initCatmullRom:function(Et,Ct,At,Rt,Dt){St(Ct,At,Dt*(At-Et),Dt*(Rt-Ct))},initNonuniformCatmullRom:function(Et,Ct,At,Rt,Dt,Nt,Ft){let Ut=(Ct-Et)/Dt-(At-Et)/(Dt+Nt)+(At-Ct)/Nt,Wt=(At-Ct)/Nt-(Rt-Ct)/(Nt+Ft)+(Rt-At)/Ft;Ut*=Nt,Wt*=Nt,St(Ct,At,Ut,Wt)},calc:function(Et){const Ct=Et*Et,At=Ct*Et;return ft+lt*Et+dt*Ct+vt*At}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(lt=[],dt=!1,vt="centripetal",St=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=lt,this.closed=dt,this.curveType=vt,this.tension=St}getPoint(lt,dt=new Vector3){const vt=dt,St=this.points,Et=St.length,Ct=(Et-(this.closed?0:1))*lt;let At=Math.floor(Ct),Rt=Ct-At;this.closed?At+=At>0?0:(Math.floor(Math.abs(At)/Et)+1)*Et:Rt===0&&At===Et-1&&(At=Et-2,Rt=1);let Dt,Nt;this.closed||At>0?Dt=St[(At-1)%Et]:(tmp.subVectors(St[0],St[1]).add(St[0]),Dt=tmp);const Ft=St[At%Et],Ut=St[(At+1)%Et];if(this.closed||At+2<Et?Nt=St[(At+2)%Et]:(tmp.subVectors(St[Et-1],St[Et-2]).add(St[Et-1]),Nt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const Wt=this.curveType==="chordal"?.5:.25;let Zt=Math.pow(Dt.distanceToSquared(Ft),Wt),Kt=Math.pow(Ft.distanceToSquared(Ut),Wt),cn=Math.pow(Ut.distanceToSquared(Nt),Wt);Kt<1e-4&&(Kt=1),Zt<1e-4&&(Zt=Kt),cn<1e-4&&(cn=Kt),px.initNonuniformCatmullRom(Dt.x,Ft.x,Ut.x,Nt.x,Zt,Kt,cn),py.initNonuniformCatmullRom(Dt.y,Ft.y,Ut.y,Nt.y,Zt,Kt,cn),pz.initNonuniformCatmullRom(Dt.z,Ft.z,Ut.z,Nt.z,Zt,Kt,cn)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Dt.x,Ft.x,Ut.x,Nt.x,this.tension),py.initCatmullRom(Dt.y,Ft.y,Ut.y,Nt.y,this.tension),pz.initCatmullRom(Dt.z,Ft.z,Ut.z,Nt.z,this.tension));return vt.set(px.calc(Rt),py.calc(Rt),pz.calc(Rt)),vt}copy(lt){super.copy(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const St=lt.points[dt];this.points.push(St.clone())}return this.closed=lt.closed,this.curveType=lt.curveType,this.tension=lt.tension,this}toJSON(){const lt=super.toJSON();lt.points=[];for(let dt=0,vt=this.points.length;dt<vt;dt++){const St=this.points[dt];lt.points.push(St.toArray())}return lt.closed=this.closed,lt.curveType=this.curveType,lt.tension=this.tension,lt}fromJSON(lt){super.fromJSON(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const St=lt.points[dt];this.points.push(new Vector3().fromArray(St))}return this.closed=lt.closed,this.curveType=lt.curveType,this.tension=lt.tension,this}}function CatmullRom(ft,lt,dt,vt,St){const Et=(vt-lt)*.5,Ct=(St-dt)*.5,At=ft*ft,Rt=ft*At;return(2*dt-2*vt+Et+Ct)*Rt+(-3*dt+3*vt-2*Et-Ct)*At+Et*ft+dt}function QuadraticBezierP0(ft,lt){const dt=1-ft;return dt*dt*lt}function QuadraticBezierP1(ft,lt){return 2*(1-ft)*ft*lt}function QuadraticBezierP2(ft,lt){return ft*ft*lt}function QuadraticBezier(ft,lt,dt,vt){return QuadraticBezierP0(ft,lt)+QuadraticBezierP1(ft,dt)+QuadraticBezierP2(ft,vt)}function CubicBezierP0(ft,lt){const dt=1-ft;return dt*dt*dt*lt}function CubicBezierP1(ft,lt){const dt=1-ft;return 3*dt*dt*ft*lt}function CubicBezierP2(ft,lt){return 3*(1-ft)*ft*ft*lt}function CubicBezierP3(ft,lt){return ft*ft*ft*lt}function CubicBezier(ft,lt,dt,vt,St){return CubicBezierP0(ft,lt)+CubicBezierP1(ft,dt)+CubicBezierP2(ft,vt)+CubicBezierP3(ft,St)}class CubicBezierCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2,vt=new Vector2,St=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=lt,this.v1=dt,this.v2=vt,this.v3=St}getPoint(lt,dt=new Vector2){const vt=dt,St=this.v0,Et=this.v1,Ct=this.v2,At=this.v3;return vt.set(CubicBezier(lt,St.x,Et.x,Ct.x,At.x),CubicBezier(lt,St.y,Et.y,Ct.y,At.y)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this.v3.copy(lt.v3),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt.v3=this.v3.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this.v3.fromArray(lt.v3),this}}class CubicBezierCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3,St=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=lt,this.v1=dt,this.v2=vt,this.v3=St}getPoint(lt,dt=new Vector3){const vt=dt,St=this.v0,Et=this.v1,Ct=this.v2,At=this.v3;return vt.set(CubicBezier(lt,St.x,Et.x,Ct.x,At.x),CubicBezier(lt,St.y,Et.y,Ct.y,At.y),CubicBezier(lt,St.z,Et.z,Ct.z,At.z)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this.v3.copy(lt.v3),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt.v3=this.v3.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this.v3.fromArray(lt.v3),this}}class LineCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=lt,this.v2=dt}getPoint(lt,dt=new Vector2){const vt=dt;return lt===1?vt.copy(this.v2):(vt.copy(this.v2).sub(this.v1),vt.multiplyScalar(lt).add(this.v1)),vt}getPointAt(lt,dt){return this.getPoint(lt,dt)}getTangent(lt,dt=new Vector2){return dt.subVectors(this.v2,this.v1).normalize()}getTangentAt(lt,dt){return this.getTangent(lt,dt)}copy(lt){return super.copy(lt),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class LineCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=lt,this.v2=dt}getPoint(lt,dt=new Vector3){const vt=dt;return lt===1?vt.copy(this.v2):(vt.copy(this.v2).sub(this.v1),vt.multiplyScalar(lt).add(this.v1)),vt}getPointAt(lt,dt){return this.getPoint(lt,dt)}getTangent(lt,dt=new Vector3){return dt.subVectors(this.v2,this.v1).normalize()}getTangentAt(lt,dt){return this.getTangent(lt,dt)}copy(lt){return super.copy(lt),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class QuadraticBezierCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2,vt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=lt,this.v1=dt,this.v2=vt}getPoint(lt,dt=new Vector2){const vt=dt,St=this.v0,Et=this.v1,Ct=this.v2;return vt.set(QuadraticBezier(lt,St.x,Et.x,Ct.x),QuadraticBezier(lt,St.y,Et.y,Ct.y)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=lt,this.v1=dt,this.v2=vt}getPoint(lt,dt=new Vector3){const vt=dt,St=this.v0,Et=this.v1,Ct=this.v2;return vt.set(QuadraticBezier(lt,St.x,Et.x,Ct.x),QuadraticBezier(lt,St.y,Et.y,Ct.y),QuadraticBezier(lt,St.z,Et.z,Ct.z)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class SplineCurve extends Curve{constructor(lt=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=lt}getPoint(lt,dt=new Vector2){const vt=dt,St=this.points,Et=(St.length-1)*lt,Ct=Math.floor(Et),At=Et-Ct,Rt=St[Ct===0?Ct:Ct-1],Dt=St[Ct],Nt=St[Ct>St.length-2?St.length-1:Ct+1],Ft=St[Ct>St.length-3?St.length-1:Ct+2];return vt.set(CatmullRom(At,Rt.x,Dt.x,Nt.x,Ft.x),CatmullRom(At,Rt.y,Dt.y,Nt.y,Ft.y)),vt}copy(lt){super.copy(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const St=lt.points[dt];this.points.push(St.clone())}return this}toJSON(){const lt=super.toJSON();lt.points=[];for(let dt=0,vt=this.points.length;dt<vt;dt++){const St=this.points[dt];lt.points.push(St.toArray())}return lt}fromJSON(lt){super.fromJSON(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const St=lt.points[dt];this.points.push(new Vector2().fromArray(St))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(lt){this.curves.push(lt)}closePath(){const lt=this.curves[0].getPoint(0),dt=this.curves[this.curves.length-1].getPoint(1);lt.equals(dt)||this.curves.push(new LineCurve(dt,lt))}getPoint(lt,dt){const vt=lt*this.getLength(),St=this.getCurveLengths();let Et=0;for(;Et<St.length;){if(St[Et]>=vt){const Ct=St[Et]-vt,At=this.curves[Et],Rt=At.getLength(),Dt=Rt===0?0:1-Ct/Rt;return At.getPointAt(Dt,dt)}Et++}return null}getLength(){const lt=this.getCurveLengths();return lt[lt.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const lt=[];let dt=0;for(let vt=0,St=this.curves.length;vt<St;vt++)dt+=this.curves[vt].getLength(),lt.push(dt);return this.cacheLengths=lt,lt}getSpacedPoints(lt=40){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPoint(vt/lt));return this.autoClose&&dt.push(dt[0]),dt}getPoints(lt=12){const dt=[];let vt;for(let St=0,Et=this.curves;St<Et.length;St++){const Ct=Et[St],At=Ct.isEllipseCurve?lt*2:Ct.isLineCurve||Ct.isLineCurve3?1:Ct.isSplineCurve?lt*Ct.points.length:lt,Rt=Ct.getPoints(At);for(let Dt=0;Dt<Rt.length;Dt++){const Nt=Rt[Dt];vt&&vt.equals(Nt)||(dt.push(Nt),vt=Nt)}}return this.autoClose&&dt.length>1&&!dt[dt.length-1].equals(dt[0])&&dt.push(dt[0]),dt}copy(lt){super.copy(lt),this.curves=[];for(let dt=0,vt=lt.curves.length;dt<vt;dt++){const St=lt.curves[dt];this.curves.push(St.clone())}return this.autoClose=lt.autoClose,this}toJSON(){const lt=super.toJSON();lt.autoClose=this.autoClose,lt.curves=[];for(let dt=0,vt=this.curves.length;dt<vt;dt++){const St=this.curves[dt];lt.curves.push(St.toJSON())}return lt}fromJSON(lt){super.fromJSON(lt),this.autoClose=lt.autoClose,this.curves=[];for(let dt=0,vt=lt.curves.length;dt<vt;dt++){const St=lt.curves[dt];this.curves.push(new Curves[St.type]().fromJSON(St))}return this}}class Path extends CurvePath{constructor(lt){super(),this.type="Path",this.currentPoint=new Vector2,lt&&this.setFromPoints(lt)}setFromPoints(lt){this.moveTo(lt[0].x,lt[0].y);for(let dt=1,vt=lt.length;dt<vt;dt++)this.lineTo(lt[dt].x,lt[dt].y);return this}moveTo(lt,dt){return this.currentPoint.set(lt,dt),this}lineTo(lt,dt){const vt=new LineCurve(this.currentPoint.clone(),new Vector2(lt,dt));return this.curves.push(vt),this.currentPoint.set(lt,dt),this}quadraticCurveTo(lt,dt,vt,St){const Et=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(lt,dt),new Vector2(vt,St));return this.curves.push(Et),this.currentPoint.set(vt,St),this}bezierCurveTo(lt,dt,vt,St,Et,Ct){const At=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(lt,dt),new Vector2(vt,St),new Vector2(Et,Ct));return this.curves.push(At),this.currentPoint.set(Et,Ct),this}splineThru(lt){const dt=[this.currentPoint.clone()].concat(lt),vt=new SplineCurve(dt);return this.curves.push(vt),this.currentPoint.copy(lt[lt.length-1]),this}arc(lt,dt,vt,St,Et,Ct){const At=this.currentPoint.x,Rt=this.currentPoint.y;return this.absarc(lt+At,dt+Rt,vt,St,Et,Ct),this}absarc(lt,dt,vt,St,Et,Ct){return this.absellipse(lt,dt,vt,vt,St,Et,Ct),this}ellipse(lt,dt,vt,St,Et,Ct,At,Rt){const Dt=this.currentPoint.x,Nt=this.currentPoint.y;return this.absellipse(lt+Dt,dt+Nt,vt,St,Et,Ct,At,Rt),this}absellipse(lt,dt,vt,St,Et,Ct,At,Rt){const Dt=new EllipseCurve(lt,dt,vt,St,Et,Ct,At,Rt);if(this.curves.length>0){const Ft=Dt.getPoint(0);Ft.equals(this.currentPoint)||this.lineTo(Ft.x,Ft.y)}this.curves.push(Dt);const Nt=Dt.getPoint(1);return this.currentPoint.copy(Nt),this}copy(lt){return super.copy(lt),this.currentPoint.copy(lt.currentPoint),this}toJSON(){const lt=super.toJSON();return lt.currentPoint=this.currentPoint.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.currentPoint.fromArray(lt.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(lt=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],dt=12,vt=0,St=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:lt,segments:dt,phiStart:vt,phiLength:St},dt=Math.floor(dt),St=clamp$1(St,0,Math.PI*2);const Et=[],Ct=[],At=[],Rt=[],Dt=[],Nt=1/dt,Ft=new Vector3,Ut=new Vector2,Wt=new Vector3,Zt=new Vector3,Kt=new Vector3;let cn=0,hn=0;for(let dn=0;dn<=lt.length-1;dn++)switch(dn){case 0:cn=lt[dn+1].x-lt[dn].x,hn=lt[dn+1].y-lt[dn].y,Wt.x=hn*1,Wt.y=-cn,Wt.z=hn*0,Kt.copy(Wt),Wt.normalize(),Rt.push(Wt.x,Wt.y,Wt.z);break;case lt.length-1:Rt.push(Kt.x,Kt.y,Kt.z);break;default:cn=lt[dn+1].x-lt[dn].x,hn=lt[dn+1].y-lt[dn].y,Wt.x=hn*1,Wt.y=-cn,Wt.z=hn*0,Zt.copy(Wt),Wt.x+=Kt.x,Wt.y+=Kt.y,Wt.z+=Kt.z,Wt.normalize(),Rt.push(Wt.x,Wt.y,Wt.z),Kt.copy(Zt)}for(let dn=0;dn<=dt;dn++){const pn=vt+dn*Nt*St,gn=Math.sin(pn),vn=Math.cos(pn);for(let bn=0;bn<=lt.length-1;bn++){Ft.x=lt[bn].x*gn,Ft.y=lt[bn].y,Ft.z=lt[bn].x*vn,Ct.push(Ft.x,Ft.y,Ft.z),Ut.x=dn/dt,Ut.y=bn/(lt.length-1),At.push(Ut.x,Ut.y);const $n=Rt[3*bn+0]*gn,Tn=Rt[3*bn+1],In=Rt[3*bn+0]*vn;Dt.push($n,Tn,In)}}for(let dn=0;dn<dt;dn++)for(let pn=0;pn<lt.length-1;pn++){const gn=pn+dn*lt.length,vn=gn,bn=gn+lt.length,$n=gn+lt.length+1,Tn=gn+1;Et.push(vn,bn,Tn),Et.push($n,Tn,bn)}this.setIndex(Et),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("uv",new Float32BufferAttribute(At,2)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new LatheGeometry(lt.points,lt.segments,lt.phiStart,lt.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(lt=1,dt=1,vt=4,St=8){const Et=new Path;Et.absarc(0,-dt/2,lt,Math.PI*1.5,0),Et.absarc(0,dt/2,lt,0,Math.PI*.5),super(Et.getPoints(vt),St),this.type="CapsuleGeometry",this.parameters={radius:lt,height:dt,capSegments:vt,radialSegments:St}}static fromJSON(lt){return new CapsuleGeometry(lt.radius,lt.length,lt.capSegments,lt.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(lt=1,dt=32,vt=0,St=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:lt,segments:dt,thetaStart:vt,thetaLength:St},dt=Math.max(3,dt);const Et=[],Ct=[],At=[],Rt=[],Dt=new Vector3,Nt=new Vector2;Ct.push(0,0,0),At.push(0,0,1),Rt.push(.5,.5);for(let Ft=0,Ut=3;Ft<=dt;Ft++,Ut+=3){const Wt=vt+Ft/dt*St;Dt.x=lt*Math.cos(Wt),Dt.y=lt*Math.sin(Wt),Ct.push(Dt.x,Dt.y,Dt.z),At.push(0,0,1),Nt.x=(Ct[Ut]/lt+1)/2,Nt.y=(Ct[Ut+1]/lt+1)/2,Rt.push(Nt.x,Nt.y)}for(let Ft=1;Ft<=dt;Ft++)Et.push(Ft,Ft+1,0);this.setIndex(Et),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("normal",new Float32BufferAttribute(At,3)),this.setAttribute("uv",new Float32BufferAttribute(Rt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new CircleGeometry(lt.radius,lt.segments,lt.thetaStart,lt.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,St=32,Et=1,Ct=!1,At=0,Rt=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:lt,radiusBottom:dt,height:vt,radialSegments:St,heightSegments:Et,openEnded:Ct,thetaStart:At,thetaLength:Rt};const Dt=this;St=Math.floor(St),Et=Math.floor(Et);const Nt=[],Ft=[],Ut=[],Wt=[];let Zt=0;const Kt=[],cn=vt/2;let hn=0;dn(),Ct===!1&&(lt>0&&pn(!0),dt>0&&pn(!1)),this.setIndex(Nt),this.setAttribute("position",new Float32BufferAttribute(Ft,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(Wt,2));function dn(){const gn=new Vector3,vn=new Vector3;let bn=0;const $n=(dt-lt)/vt;for(let Tn=0;Tn<=Et;Tn++){const In=[],Pn=Tn/Et,zn=Pn*(dt-lt)+lt;for(let An=0;An<=St;An++){const Gn=An/St,xn=Gn*Rt+At,Qn=Math.sin(xn),qn=Math.cos(xn);vn.x=zn*Qn,vn.y=-Pn*vt+cn,vn.z=zn*qn,Ft.push(vn.x,vn.y,vn.z),gn.set(Qn,$n,qn).normalize(),Ut.push(gn.x,gn.y,gn.z),Wt.push(Gn,1-Pn),In.push(Zt++)}Kt.push(In)}for(let Tn=0;Tn<St;Tn++)for(let In=0;In<Et;In++){const Pn=Kt[In][Tn],zn=Kt[In+1][Tn],An=Kt[In+1][Tn+1],Gn=Kt[In][Tn+1];Nt.push(Pn,zn,Gn),Nt.push(zn,An,Gn),bn+=6}Dt.addGroup(hn,bn,0),hn+=bn}function pn(gn){const vn=Zt,bn=new Vector2,$n=new Vector3;let Tn=0;const In=gn===!0?lt:dt,Pn=gn===!0?1:-1;for(let An=1;An<=St;An++)Ft.push(0,cn*Pn,0),Ut.push(0,Pn,0),Wt.push(.5,.5),Zt++;const zn=Zt;for(let An=0;An<=St;An++){const xn=An/St*Rt+At,Qn=Math.cos(xn),qn=Math.sin(xn);$n.x=In*qn,$n.y=cn*Pn,$n.z=In*Qn,Ft.push($n.x,$n.y,$n.z),Ut.push(0,Pn,0),bn.x=Qn*.5+.5,bn.y=qn*.5*Pn+.5,Wt.push(bn.x,bn.y),Zt++}for(let An=0;An<St;An++){const Gn=vn+An,xn=zn+An;gn===!0?Nt.push(xn,xn+1,Gn):Nt.push(xn+1,xn,Gn),Tn+=3}Dt.addGroup(hn,Tn,gn===!0?1:2),hn+=Tn}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new CylinderGeometry(lt.radiusTop,lt.radiusBottom,lt.height,lt.radialSegments,lt.heightSegments,lt.openEnded,lt.thetaStart,lt.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(lt=1,dt=1,vt=32,St=1,Et=!1,Ct=0,At=Math.PI*2){super(0,lt,dt,vt,St,Et,Ct,At),this.type="ConeGeometry",this.parameters={radius:lt,height:dt,radialSegments:vt,heightSegments:St,openEnded:Et,thetaStart:Ct,thetaLength:At}}static fromJSON(lt){return new ConeGeometry(lt.radius,lt.height,lt.radialSegments,lt.heightSegments,lt.openEnded,lt.thetaStart,lt.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(lt=[],dt=[],vt=1,St=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:lt,indices:dt,radius:vt,detail:St};const Et=[],Ct=[];At(St),Dt(vt),Nt(),this.setAttribute("position",new Float32BufferAttribute(Et,3)),this.setAttribute("normal",new Float32BufferAttribute(Et.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2)),St===0?this.computeVertexNormals():this.normalizeNormals();function At(dn){const pn=new Vector3,gn=new Vector3,vn=new Vector3;for(let bn=0;bn<dt.length;bn+=3)Wt(dt[bn+0],pn),Wt(dt[bn+1],gn),Wt(dt[bn+2],vn),Rt(pn,gn,vn,dn)}function Rt(dn,pn,gn,vn){const bn=vn+1,$n=[];for(let Tn=0;Tn<=bn;Tn++){$n[Tn]=[];const In=dn.clone().lerp(gn,Tn/bn),Pn=pn.clone().lerp(gn,Tn/bn),zn=bn-Tn;for(let An=0;An<=zn;An++)An===0&&Tn===bn?$n[Tn][An]=In:$n[Tn][An]=In.clone().lerp(Pn,An/zn)}for(let Tn=0;Tn<bn;Tn++)for(let In=0;In<2*(bn-Tn)-1;In++){const Pn=Math.floor(In/2);In%2===0?(Ut($n[Tn][Pn+1]),Ut($n[Tn+1][Pn]),Ut($n[Tn][Pn])):(Ut($n[Tn][Pn+1]),Ut($n[Tn+1][Pn+1]),Ut($n[Tn+1][Pn]))}}function Dt(dn){const pn=new Vector3;for(let gn=0;gn<Et.length;gn+=3)pn.x=Et[gn+0],pn.y=Et[gn+1],pn.z=Et[gn+2],pn.normalize().multiplyScalar(dn),Et[gn+0]=pn.x,Et[gn+1]=pn.y,Et[gn+2]=pn.z}function Nt(){const dn=new Vector3;for(let pn=0;pn<Et.length;pn+=3){dn.x=Et[pn+0],dn.y=Et[pn+1],dn.z=Et[pn+2];const gn=cn(dn)/2/Math.PI+.5,vn=hn(dn)/Math.PI+.5;Ct.push(gn,1-vn)}Zt(),Ft()}function Ft(){for(let dn=0;dn<Ct.length;dn+=6){const pn=Ct[dn+0],gn=Ct[dn+2],vn=Ct[dn+4],bn=Math.max(pn,gn,vn),$n=Math.min(pn,gn,vn);bn>.9&&$n<.1&&(pn<.2&&(Ct[dn+0]+=1),gn<.2&&(Ct[dn+2]+=1),vn<.2&&(Ct[dn+4]+=1))}}function Ut(dn){Et.push(dn.x,dn.y,dn.z)}function Wt(dn,pn){const gn=dn*3;pn.x=lt[gn+0],pn.y=lt[gn+1],pn.z=lt[gn+2]}function Zt(){const dn=new Vector3,pn=new Vector3,gn=new Vector3,vn=new Vector3,bn=new Vector2,$n=new Vector2,Tn=new Vector2;for(let In=0,Pn=0;In<Et.length;In+=9,Pn+=6){dn.set(Et[In+0],Et[In+1],Et[In+2]),pn.set(Et[In+3],Et[In+4],Et[In+5]),gn.set(Et[In+6],Et[In+7],Et[In+8]),bn.set(Ct[Pn+0],Ct[Pn+1]),$n.set(Ct[Pn+2],Ct[Pn+3]),Tn.set(Ct[Pn+4],Ct[Pn+5]),vn.copy(dn).add(pn).add(gn).divideScalar(3);const zn=cn(vn);Kt(bn,Pn+0,dn,zn),Kt($n,Pn+2,pn,zn),Kt(Tn,Pn+4,gn,zn)}}function Kt(dn,pn,gn,vn){vn<0&&dn.x===1&&(Ct[pn]=dn.x-1),gn.x===0&&gn.z===0&&(Ct[pn]=vn/2/Math.PI+.5)}function cn(dn){return Math.atan2(dn.z,-dn.x)}function hn(dn){return Math.atan2(-dn.y,Math.sqrt(dn.x*dn.x+dn.z*dn.z))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new PolyhedronGeometry(lt.vertices,lt.indices,lt.radius,lt.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=(1+Math.sqrt(5))/2,St=1/vt,Et=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-St,-vt,0,-St,vt,0,St,-vt,0,St,vt,-St,-vt,0,-St,vt,0,St,-vt,0,St,vt,0,-vt,0,-St,vt,0,-St,-vt,0,St,vt,0,St],Ct=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(Et,Ct,lt,dt),this.type="DodecahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new DodecahedronGeometry(lt.radius,lt.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(lt=null,dt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:lt,thresholdAngle:dt},lt!==null){const St=Math.pow(10,4),Et=Math.cos(DEG2RAD*dt),Ct=lt.getIndex(),At=lt.getAttribute("position"),Rt=Ct?Ct.count:At.count,Dt=[0,0,0],Nt=["a","b","c"],Ft=new Array(3),Ut={},Wt=[];for(let Zt=0;Zt<Rt;Zt+=3){Ct?(Dt[0]=Ct.getX(Zt),Dt[1]=Ct.getX(Zt+1),Dt[2]=Ct.getX(Zt+2)):(Dt[0]=Zt,Dt[1]=Zt+1,Dt[2]=Zt+2);const{a:Kt,b:cn,c:hn}=_triangle;if(Kt.fromBufferAttribute(At,Dt[0]),cn.fromBufferAttribute(At,Dt[1]),hn.fromBufferAttribute(At,Dt[2]),_triangle.getNormal(_normal),Ft[0]=`${Math.round(Kt.x*St)},${Math.round(Kt.y*St)},${Math.round(Kt.z*St)}`,Ft[1]=`${Math.round(cn.x*St)},${Math.round(cn.y*St)},${Math.round(cn.z*St)}`,Ft[2]=`${Math.round(hn.x*St)},${Math.round(hn.y*St)},${Math.round(hn.z*St)}`,!(Ft[0]===Ft[1]||Ft[1]===Ft[2]||Ft[2]===Ft[0]))for(let dn=0;dn<3;dn++){const pn=(dn+1)%3,gn=Ft[dn],vn=Ft[pn],bn=_triangle[Nt[dn]],$n=_triangle[Nt[pn]],Tn=`${gn}_${vn}`,In=`${vn}_${gn}`;In in Ut&&Ut[In]?(_normal.dot(Ut[In].normal)<=Et&&(Wt.push(bn.x,bn.y,bn.z),Wt.push($n.x,$n.y,$n.z)),Ut[In]=null):Tn in Ut||(Ut[Tn]={index0:Dt[dn],index1:Dt[pn],normal:_normal.clone()})}}for(const Zt in Ut)if(Ut[Zt]){const{index0:Kt,index1:cn}=Ut[Zt];_v0.fromBufferAttribute(At,Kt),_v1$1.fromBufferAttribute(At,cn),Wt.push(_v0.x,_v0.y,_v0.z),Wt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(Wt,3))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}}class Shape extends Path{constructor(lt){super(lt),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(lt){const dt=[];for(let vt=0,St=this.holes.length;vt<St;vt++)dt[vt]=this.holes[vt].getPoints(lt);return dt}extractPoints(lt){return{shape:this.getPoints(lt),holes:this.getPointsHoles(lt)}}copy(lt){super.copy(lt),this.holes=[];for(let dt=0,vt=lt.holes.length;dt<vt;dt++){const St=lt.holes[dt];this.holes.push(St.clone())}return this}toJSON(){const lt=super.toJSON();lt.uuid=this.uuid,lt.holes=[];for(let dt=0,vt=this.holes.length;dt<vt;dt++){const St=this.holes[dt];lt.holes.push(St.toJSON())}return lt}fromJSON(lt){super.fromJSON(lt),this.uuid=lt.uuid,this.holes=[];for(let dt=0,vt=lt.holes.length;dt<vt;dt++){const St=lt.holes[dt];this.holes.push(new Path().fromJSON(St))}return this}}const Earcut={triangulate:function(ft,lt,dt=2){const vt=lt&&lt.length,St=vt?lt[0]*dt:ft.length;let Et=linkedList(ft,0,St,dt,!0);const Ct=[];if(!Et||Et.next===Et.prev)return Ct;let At,Rt,Dt,Nt,Ft,Ut,Wt;if(vt&&(Et=eliminateHoles(ft,lt,Et,dt)),ft.length>80*dt){At=Dt=ft[0],Rt=Nt=ft[1];for(let Zt=dt;Zt<St;Zt+=dt)Ft=ft[Zt],Ut=ft[Zt+1],Ft<At&&(At=Ft),Ut<Rt&&(Rt=Ut),Ft>Dt&&(Dt=Ft),Ut>Nt&&(Nt=Ut);Wt=Math.max(Dt-At,Nt-Rt),Wt=Wt!==0?32767/Wt:0}return earcutLinked(Et,Ct,dt,At,Rt,Wt,0),Ct}};function linkedList(ft,lt,dt,vt,St){let Et,Ct;if(St===signedArea(ft,lt,dt,vt)>0)for(Et=lt;Et<dt;Et+=vt)Ct=insertNode(Et,ft[Et],ft[Et+1],Ct);else for(Et=dt-vt;Et>=lt;Et-=vt)Ct=insertNode(Et,ft[Et],ft[Et+1],Ct);return Ct&&equals(Ct,Ct.next)&&(removeNode(Ct),Ct=Ct.next),Ct}function filterPoints(ft,lt){if(!ft)return ft;lt||(lt=ft);let dt=ft,vt;do if(vt=!1,!dt.steiner&&(equals(dt,dt.next)||area(dt.prev,dt,dt.next)===0)){if(removeNode(dt),dt=lt=dt.prev,dt===dt.next)break;vt=!0}else dt=dt.next;while(vt||dt!==lt);return lt}function earcutLinked(ft,lt,dt,vt,St,Et,Ct){if(!ft)return;!Ct&&Et&&indexCurve(ft,vt,St,Et);let At=ft,Rt,Dt;for(;ft.prev!==ft.next;){if(Rt=ft.prev,Dt=ft.next,Et?isEarHashed(ft,vt,St,Et):isEar(ft)){lt.push(Rt.i/dt|0),lt.push(ft.i/dt|0),lt.push(Dt.i/dt|0),removeNode(ft),ft=Dt.next,At=Dt.next;continue}if(ft=Dt,ft===At){Ct?Ct===1?(ft=cureLocalIntersections(filterPoints(ft),lt,dt),earcutLinked(ft,lt,dt,vt,St,Et,2)):Ct===2&&splitEarcut(ft,lt,dt,vt,St,Et):earcutLinked(filterPoints(ft),lt,dt,vt,St,Et,1);break}}}function isEar(ft){const lt=ft.prev,dt=ft,vt=ft.next;if(area(lt,dt,vt)>=0)return!1;const St=lt.x,Et=dt.x,Ct=vt.x,At=lt.y,Rt=dt.y,Dt=vt.y,Nt=St<Et?St<Ct?St:Ct:Et<Ct?Et:Ct,Ft=At<Rt?At<Dt?At:Dt:Rt<Dt?Rt:Dt,Ut=St>Et?St>Ct?St:Ct:Et>Ct?Et:Ct,Wt=At>Rt?At>Dt?At:Dt:Rt>Dt?Rt:Dt;let Zt=vt.next;for(;Zt!==lt;){if(Zt.x>=Nt&&Zt.x<=Ut&&Zt.y>=Ft&&Zt.y<=Wt&&pointInTriangle(St,At,Et,Rt,Ct,Dt,Zt.x,Zt.y)&&area(Zt.prev,Zt,Zt.next)>=0)return!1;Zt=Zt.next}return!0}function isEarHashed(ft,lt,dt,vt){const St=ft.prev,Et=ft,Ct=ft.next;if(area(St,Et,Ct)>=0)return!1;const At=St.x,Rt=Et.x,Dt=Ct.x,Nt=St.y,Ft=Et.y,Ut=Ct.y,Wt=At<Rt?At<Dt?At:Dt:Rt<Dt?Rt:Dt,Zt=Nt<Ft?Nt<Ut?Nt:Ut:Ft<Ut?Ft:Ut,Kt=At>Rt?At>Dt?At:Dt:Rt>Dt?Rt:Dt,cn=Nt>Ft?Nt>Ut?Nt:Ut:Ft>Ut?Ft:Ut,hn=zOrder(Wt,Zt,lt,dt,vt),dn=zOrder(Kt,cn,lt,dt,vt);let pn=ft.prevZ,gn=ft.nextZ;for(;pn&&pn.z>=hn&&gn&&gn.z<=dn;){if(pn.x>=Wt&&pn.x<=Kt&&pn.y>=Zt&&pn.y<=cn&&pn!==St&&pn!==Ct&&pointInTriangle(At,Nt,Rt,Ft,Dt,Ut,pn.x,pn.y)&&area(pn.prev,pn,pn.next)>=0||(pn=pn.prevZ,gn.x>=Wt&&gn.x<=Kt&&gn.y>=Zt&&gn.y<=cn&&gn!==St&&gn!==Ct&&pointInTriangle(At,Nt,Rt,Ft,Dt,Ut,gn.x,gn.y)&&area(gn.prev,gn,gn.next)>=0))return!1;gn=gn.nextZ}for(;pn&&pn.z>=hn;){if(pn.x>=Wt&&pn.x<=Kt&&pn.y>=Zt&&pn.y<=cn&&pn!==St&&pn!==Ct&&pointInTriangle(At,Nt,Rt,Ft,Dt,Ut,pn.x,pn.y)&&area(pn.prev,pn,pn.next)>=0)return!1;pn=pn.prevZ}for(;gn&&gn.z<=dn;){if(gn.x>=Wt&&gn.x<=Kt&&gn.y>=Zt&&gn.y<=cn&&gn!==St&&gn!==Ct&&pointInTriangle(At,Nt,Rt,Ft,Dt,Ut,gn.x,gn.y)&&area(gn.prev,gn,gn.next)>=0)return!1;gn=gn.nextZ}return!0}function cureLocalIntersections(ft,lt,dt){let vt=ft;do{const St=vt.prev,Et=vt.next.next;!equals(St,Et)&&intersects(St,vt,vt.next,Et)&&locallyInside(St,Et)&&locallyInside(Et,St)&&(lt.push(St.i/dt|0),lt.push(vt.i/dt|0),lt.push(Et.i/dt|0),removeNode(vt),removeNode(vt.next),vt=ft=Et),vt=vt.next}while(vt!==ft);return filterPoints(vt)}function splitEarcut(ft,lt,dt,vt,St,Et){let Ct=ft;do{let At=Ct.next.next;for(;At!==Ct.prev;){if(Ct.i!==At.i&&isValidDiagonal(Ct,At)){let Rt=splitPolygon(Ct,At);Ct=filterPoints(Ct,Ct.next),Rt=filterPoints(Rt,Rt.next),earcutLinked(Ct,lt,dt,vt,St,Et,0),earcutLinked(Rt,lt,dt,vt,St,Et,0);return}At=At.next}Ct=Ct.next}while(Ct!==ft)}function eliminateHoles(ft,lt,dt,vt){const St=[];let Et,Ct,At,Rt,Dt;for(Et=0,Ct=lt.length;Et<Ct;Et++)At=lt[Et]*vt,Rt=Et<Ct-1?lt[Et+1]*vt:ft.length,Dt=linkedList(ft,At,Rt,vt,!1),Dt===Dt.next&&(Dt.steiner=!0),St.push(getLeftmost(Dt));for(St.sort(compareX),Et=0;Et<St.length;Et++)dt=eliminateHole(St[Et],dt);return dt}function compareX(ft,lt){return ft.x-lt.x}function eliminateHole(ft,lt){const dt=findHoleBridge(ft,lt);if(!dt)return lt;const vt=splitPolygon(dt,ft);return filterPoints(vt,vt.next),filterPoints(dt,dt.next)}function findHoleBridge(ft,lt){let dt=lt,vt=-1/0,St;const Et=ft.x,Ct=ft.y;do{if(Ct<=dt.y&&Ct>=dt.next.y&&dt.next.y!==dt.y){const Ut=dt.x+(Ct-dt.y)*(dt.next.x-dt.x)/(dt.next.y-dt.y);if(Ut<=Et&&Ut>vt&&(vt=Ut,St=dt.x<dt.next.x?dt:dt.next,Ut===Et))return St}dt=dt.next}while(dt!==lt);if(!St)return null;const At=St,Rt=St.x,Dt=St.y;let Nt=1/0,Ft;dt=St;do Et>=dt.x&&dt.x>=Rt&&Et!==dt.x&&pointInTriangle(Ct<Dt?Et:vt,Ct,Rt,Dt,Ct<Dt?vt:Et,Ct,dt.x,dt.y)&&(Ft=Math.abs(Ct-dt.y)/(Et-dt.x),locallyInside(dt,ft)&&(Ft<Nt||Ft===Nt&&(dt.x>St.x||dt.x===St.x&&sectorContainsSector(St,dt)))&&(St=dt,Nt=Ft)),dt=dt.next;while(dt!==At);return St}function sectorContainsSector(ft,lt){return area(ft.prev,ft,lt.prev)<0&&area(lt.next,ft,ft.next)<0}function indexCurve(ft,lt,dt,vt){let St=ft;do St.z===0&&(St.z=zOrder(St.x,St.y,lt,dt,vt)),St.prevZ=St.prev,St.nextZ=St.next,St=St.next;while(St!==ft);St.prevZ.nextZ=null,St.prevZ=null,sortLinked(St)}function sortLinked(ft){let lt,dt,vt,St,Et,Ct,At,Rt,Dt=1;do{for(dt=ft,ft=null,Et=null,Ct=0;dt;){for(Ct++,vt=dt,At=0,lt=0;lt<Dt&&(At++,vt=vt.nextZ,!!vt);lt++);for(Rt=Dt;At>0||Rt>0&&vt;)At!==0&&(Rt===0||!vt||dt.z<=vt.z)?(St=dt,dt=dt.nextZ,At--):(St=vt,vt=vt.nextZ,Rt--),Et?Et.nextZ=St:ft=St,St.prevZ=Et,Et=St;dt=vt}Et.nextZ=null,Dt*=2}while(Ct>1);return ft}function zOrder(ft,lt,dt,vt,St){return ft=(ft-dt)*St|0,lt=(lt-vt)*St|0,ft=(ft|ft<<8)&16711935,ft=(ft|ft<<4)&252645135,ft=(ft|ft<<2)&858993459,ft=(ft|ft<<1)&1431655765,lt=(lt|lt<<8)&16711935,lt=(lt|lt<<4)&252645135,lt=(lt|lt<<2)&858993459,lt=(lt|lt<<1)&1431655765,ft|lt<<1}function getLeftmost(ft){let lt=ft,dt=ft;do(lt.x<dt.x||lt.x===dt.x&&lt.y<dt.y)&&(dt=lt),lt=lt.next;while(lt!==ft);return dt}function pointInTriangle(ft,lt,dt,vt,St,Et,Ct,At){return(St-Ct)*(lt-At)>=(ft-Ct)*(Et-At)&&(ft-Ct)*(vt-At)>=(dt-Ct)*(lt-At)&&(dt-Ct)*(Et-At)>=(St-Ct)*(vt-At)}function isValidDiagonal(ft,lt){return ft.next.i!==lt.i&&ft.prev.i!==lt.i&&!intersectsPolygon(ft,lt)&&(locallyInside(ft,lt)&&locallyInside(lt,ft)&&middleInside(ft,lt)&&(area(ft.prev,ft,lt.prev)||area(ft,lt.prev,lt))||equals(ft,lt)&&area(ft.prev,ft,ft.next)>0&&area(lt.prev,lt,lt.next)>0)}function area(ft,lt,dt){return(lt.y-ft.y)*(dt.x-lt.x)-(lt.x-ft.x)*(dt.y-lt.y)}function equals(ft,lt){return ft.x===lt.x&&ft.y===lt.y}function intersects(ft,lt,dt,vt){const St=sign(area(ft,lt,dt)),Et=sign(area(ft,lt,vt)),Ct=sign(area(dt,vt,ft)),At=sign(area(dt,vt,lt));return!!(St!==Et&&Ct!==At||St===0&&onSegment(ft,dt,lt)||Et===0&&onSegment(ft,vt,lt)||Ct===0&&onSegment(dt,ft,vt)||At===0&&onSegment(dt,lt,vt))}function onSegment(ft,lt,dt){return lt.x<=Math.max(ft.x,dt.x)&&lt.x>=Math.min(ft.x,dt.x)&&lt.y<=Math.max(ft.y,dt.y)&&lt.y>=Math.min(ft.y,dt.y)}function sign(ft){return ft>0?1:ft<0?-1:0}function intersectsPolygon(ft,lt){let dt=ft;do{if(dt.i!==ft.i&&dt.next.i!==ft.i&&dt.i!==lt.i&&dt.next.i!==lt.i&&intersects(dt,dt.next,ft,lt))return!0;dt=dt.next}while(dt!==ft);return!1}function locallyInside(ft,lt){return area(ft.prev,ft,ft.next)<0?area(ft,lt,ft.next)>=0&&area(ft,ft.prev,lt)>=0:area(ft,lt,ft.prev)<0||area(ft,ft.next,lt)<0}function middleInside(ft,lt){let dt=ft,vt=!1;const St=(ft.x+lt.x)/2,Et=(ft.y+lt.y)/2;do dt.y>Et!=dt.next.y>Et&&dt.next.y!==dt.y&&St<(dt.next.x-dt.x)*(Et-dt.y)/(dt.next.y-dt.y)+dt.x&&(vt=!vt),dt=dt.next;while(dt!==ft);return vt}function splitPolygon(ft,lt){const dt=new Node$1(ft.i,ft.x,ft.y),vt=new Node$1(lt.i,lt.x,lt.y),St=ft.next,Et=lt.prev;return ft.next=lt,lt.prev=ft,dt.next=St,St.prev=dt,vt.next=dt,dt.prev=vt,Et.next=vt,vt.prev=Et,vt}function insertNode(ft,lt,dt,vt){const St=new Node$1(ft,lt,dt);return vt?(St.next=vt.next,St.prev=vt,vt.next.prev=St,vt.next=St):(St.prev=St,St.next=St),St}function removeNode(ft){ft.next.prev=ft.prev,ft.prev.next=ft.next,ft.prevZ&&(ft.prevZ.nextZ=ft.nextZ),ft.nextZ&&(ft.nextZ.prevZ=ft.prevZ)}function Node$1(ft,lt,dt){this.i=ft,this.x=lt,this.y=dt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ft,lt,dt,vt){let St=0;for(let Et=lt,Ct=dt-vt;Et<dt;Et+=vt)St+=(ft[Ct]-ft[Et])*(ft[Et+1]+ft[Ct+1]),Ct=Et;return St}class ShapeUtils{static area(lt){const dt=lt.length;let vt=0;for(let St=dt-1,Et=0;Et<dt;St=Et++)vt+=lt[St].x*lt[Et].y-lt[Et].x*lt[St].y;return vt*.5}static isClockWise(lt){return ShapeUtils.area(lt)<0}static triangulateShape(lt,dt){const vt=[],St=[],Et=[];removeDupEndPts(lt),addContour(vt,lt);let Ct=lt.length;dt.forEach(removeDupEndPts);for(let Rt=0;Rt<dt.length;Rt++)St.push(Ct),Ct+=dt[Rt].length,addContour(vt,dt[Rt]);const At=Earcut.triangulate(vt,St);for(let Rt=0;Rt<At.length;Rt+=3)Et.push(At.slice(Rt,Rt+3));return Et}}function removeDupEndPts(ft){const lt=ft.length;lt>2&&ft[lt-1].equals(ft[0])&&ft.pop()}function addContour(ft,lt){for(let dt=0;dt<lt.length;dt++)ft.push(lt[dt].x),ft.push(lt[dt].y)}class ExtrudeGeometry extends BufferGeometry{constructor(lt=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),dt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:lt,options:dt},lt=Array.isArray(lt)?lt:[lt];const vt=this,St=[],Et=[];for(let At=0,Rt=lt.length;At<Rt;At++){const Dt=lt[At];Ct(Dt)}this.setAttribute("position",new Float32BufferAttribute(St,3)),this.setAttribute("uv",new Float32BufferAttribute(Et,2)),this.computeVertexNormals();function Ct(At){const Rt=[],Dt=dt.curveSegments!==void 0?dt.curveSegments:12,Nt=dt.steps!==void 0?dt.steps:1,Ft=dt.depth!==void 0?dt.depth:1;let Ut=dt.bevelEnabled!==void 0?dt.bevelEnabled:!0,Wt=dt.bevelThickness!==void 0?dt.bevelThickness:.2,Zt=dt.bevelSize!==void 0?dt.bevelSize:Wt-.1,Kt=dt.bevelOffset!==void 0?dt.bevelOffset:0,cn=dt.bevelSegments!==void 0?dt.bevelSegments:3;const hn=dt.extrudePath,dn=dt.UVGenerator!==void 0?dt.UVGenerator:WorldUVGenerator;let pn,gn=!1,vn,bn,$n,Tn;hn&&(pn=hn.getSpacedPoints(Nt),gn=!0,Ut=!1,vn=hn.computeFrenetFrames(Nt,!1),bn=new Vector3,$n=new Vector3,Tn=new Vector3),Ut||(cn=0,Wt=0,Zt=0,Kt=0);const In=At.extractPoints(Dt);let Pn=In.shape;const zn=In.holes;if(!ShapeUtils.isClockWise(Pn)){Pn=Pn.reverse();for(let _r=0,Nr=zn.length;_r<Nr;_r++){const Dn=zn[_r];ShapeUtils.isClockWise(Dn)&&(zn[_r]=Dn.reverse())}}const Gn=ShapeUtils.triangulateShape(Pn,zn),xn=Pn;for(let _r=0,Nr=zn.length;_r<Nr;_r++){const Dn=zn[_r];Pn=Pn.concat(Dn)}function Qn(_r,Nr,Dn){return Nr||console.error("THREE.ExtrudeGeometry: vec does not exist"),_r.clone().addScaledVector(Nr,Dn)}const qn=Pn.length,nr=Gn.length;function Un(_r,Nr,Dn){let yr,hr,Jn;const Yn=_r.x-Nr.x,ar=_r.y-Nr.y,Sr=Dn.x-_r.x,gr=Dn.y-_r.y,Vn=Yn*Yn+ar*ar,Wn=Yn*gr-ar*Sr;if(Math.abs(Wn)>Number.EPSILON){const rr=Math.sqrt(Vn),lr=Math.sqrt(Sr*Sr+gr*gr),xr=Nr.x-ar/rr,Fr=Nr.y+Yn/rr,mr=Dn.x-gr/lr,Yr=Dn.y+Sr/lr,Vr=((mr-xr)*gr-(Yr-Fr)*Sr)/(Yn*gr-ar*Sr);yr=xr+Yn*Vr-_r.x,hr=Fr+ar*Vr-_r.y;const eo=yr*yr+hr*hr;if(eo<=2)return new Vector2(yr,hr);Jn=Math.sqrt(eo/2)}else{let rr=!1;Yn>Number.EPSILON?Sr>Number.EPSILON&&(rr=!0):Yn<-Number.EPSILON?Sr<-Number.EPSILON&&(rr=!0):Math.sign(ar)===Math.sign(gr)&&(rr=!0),rr?(yr=-ar,hr=Yn,Jn=Math.sqrt(Vn)):(yr=Yn,hr=ar,Jn=Math.sqrt(Vn/2))}return new Vector2(yr/Jn,hr/Jn)}const Nn=[];for(let _r=0,Nr=xn.length,Dn=Nr-1,yr=_r+1;_r<Nr;_r++,Dn++,yr++)Dn===Nr&&(Dn=0),yr===Nr&&(yr=0),Nn[_r]=Un(xn[_r],xn[Dn],xn[yr]);const jn=[];let Ln,Cn=Nn.concat();for(let _r=0,Nr=zn.length;_r<Nr;_r++){const Dn=zn[_r];Ln=[];for(let yr=0,hr=Dn.length,Jn=hr-1,Yn=yr+1;yr<hr;yr++,Jn++,Yn++)Jn===hr&&(Jn=0),Yn===hr&&(Yn=0),Ln[yr]=Un(Dn[yr],Dn[Jn],Dn[Yn]);jn.push(Ln),Cn=Cn.concat(Ln)}for(let _r=0;_r<cn;_r++){const Nr=_r/cn,Dn=Wt*Math.cos(Nr*Math.PI/2),yr=Zt*Math.sin(Nr*Math.PI/2)+Kt;for(let hr=0,Jn=xn.length;hr<Jn;hr++){const Yn=Qn(xn[hr],Nn[hr],yr);fr(Yn.x,Yn.y,-Dn)}for(let hr=0,Jn=zn.length;hr<Jn;hr++){const Yn=zn[hr];Ln=jn[hr];for(let ar=0,Sr=Yn.length;ar<Sr;ar++){const gr=Qn(Yn[ar],Ln[ar],yr);fr(gr.x,gr.y,-Dn)}}}const tr=Zt+Kt;for(let _r=0;_r<qn;_r++){const Nr=Ut?Qn(Pn[_r],Cn[_r],tr):Pn[_r];gn?($n.copy(vn.normals[0]).multiplyScalar(Nr.x),bn.copy(vn.binormals[0]).multiplyScalar(Nr.y),Tn.copy(pn[0]).add($n).add(bn),fr(Tn.x,Tn.y,Tn.z)):fr(Nr.x,Nr.y,0)}for(let _r=1;_r<=Nt;_r++)for(let Nr=0;Nr<qn;Nr++){const Dn=Ut?Qn(Pn[Nr],Cn[Nr],tr):Pn[Nr];gn?($n.copy(vn.normals[_r]).multiplyScalar(Dn.x),bn.copy(vn.binormals[_r]).multiplyScalar(Dn.y),Tn.copy(pn[_r]).add($n).add(bn),fr(Tn.x,Tn.y,Tn.z)):fr(Dn.x,Dn.y,Ft/Nt*_r)}for(let _r=cn-1;_r>=0;_r--){const Nr=_r/cn,Dn=Wt*Math.cos(Nr*Math.PI/2),yr=Zt*Math.sin(Nr*Math.PI/2)+Kt;for(let hr=0,Jn=xn.length;hr<Jn;hr++){const Yn=Qn(xn[hr],Nn[hr],yr);fr(Yn.x,Yn.y,Ft+Dn)}for(let hr=0,Jn=zn.length;hr<Jn;hr++){const Yn=zn[hr];Ln=jn[hr];for(let ar=0,Sr=Yn.length;ar<Sr;ar++){const gr=Qn(Yn[ar],Ln[ar],yr);gn?fr(gr.x,gr.y+pn[Nt-1].y,pn[Nt-1].x+Dn):fr(gr.x,gr.y,Ft+Dn)}}}ir(),Zn();function ir(){const _r=St.length/3;if(Ut){let Nr=0,Dn=qn*Nr;for(let yr=0;yr<nr;yr++){const hr=Gn[yr];Or(hr[2]+Dn,hr[1]+Dn,hr[0]+Dn)}Nr=Nt+cn*2,Dn=qn*Nr;for(let yr=0;yr<nr;yr++){const hr=Gn[yr];Or(hr[0]+Dn,hr[1]+Dn,hr[2]+Dn)}}else{for(let Nr=0;Nr<nr;Nr++){const Dn=Gn[Nr];Or(Dn[2],Dn[1],Dn[0])}for(let Nr=0;Nr<nr;Nr++){const Dn=Gn[Nr];Or(Dn[0]+qn*Nt,Dn[1]+qn*Nt,Dn[2]+qn*Nt)}}vt.addGroup(_r,St.length/3-_r,0)}function Zn(){const _r=St.length/3;let Nr=0;br(xn,Nr),Nr+=xn.length;for(let Dn=0,yr=zn.length;Dn<yr;Dn++){const hr=zn[Dn];br(hr,Nr),Nr+=hr.length}vt.addGroup(_r,St.length/3-_r,1)}function br(_r,Nr){let Dn=_r.length;for(;--Dn>=0;){const yr=Dn;let hr=Dn-1;hr<0&&(hr=_r.length-1);for(let Jn=0,Yn=Nt+cn*2;Jn<Yn;Jn++){const ar=qn*Jn,Sr=qn*(Jn+1),gr=Nr+yr+ar,Vn=Nr+hr+ar,Wn=Nr+hr+Sr,rr=Nr+yr+Sr;Pr(gr,Vn,Wn,rr)}}}function fr(_r,Nr,Dn){Rt.push(_r),Rt.push(Nr),Rt.push(Dn)}function Or(_r,Nr,Dn){zr(_r),zr(Nr),zr(Dn);const yr=St.length/3,hr=dn.generateTopUV(vt,St,yr-3,yr-2,yr-1);Dr(hr[0]),Dr(hr[1]),Dr(hr[2])}function Pr(_r,Nr,Dn,yr){zr(_r),zr(Nr),zr(yr),zr(Nr),zr(Dn),zr(yr);const hr=St.length/3,Jn=dn.generateSideWallUV(vt,St,hr-6,hr-3,hr-2,hr-1);Dr(Jn[0]),Dr(Jn[1]),Dr(Jn[3]),Dr(Jn[1]),Dr(Jn[2]),Dr(Jn[3])}function zr(_r){St.push(Rt[_r*3+0]),St.push(Rt[_r*3+1]),St.push(Rt[_r*3+2])}function Dr(_r){Et.push(_r.x),Et.push(_r.y)}}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON(),dt=this.parameters.shapes,vt=this.parameters.options;return toJSON$1(dt,vt,lt)}static fromJSON(lt,dt){const vt=[];for(let Et=0,Ct=lt.shapes.length;Et<Ct;Et++){const At=dt[lt.shapes[Et]];vt.push(At)}const St=lt.options.extrudePath;return St!==void 0&&(lt.options.extrudePath=new Curves[St.type]().fromJSON(St)),new ExtrudeGeometry(vt,lt.options)}}const WorldUVGenerator={generateTopUV:function(ft,lt,dt,vt,St){const Et=lt[dt*3],Ct=lt[dt*3+1],At=lt[vt*3],Rt=lt[vt*3+1],Dt=lt[St*3],Nt=lt[St*3+1];return[new Vector2(Et,Ct),new Vector2(At,Rt),new Vector2(Dt,Nt)]},generateSideWallUV:function(ft,lt,dt,vt,St,Et){const Ct=lt[dt*3],At=lt[dt*3+1],Rt=lt[dt*3+2],Dt=lt[vt*3],Nt=lt[vt*3+1],Ft=lt[vt*3+2],Ut=lt[St*3],Wt=lt[St*3+1],Zt=lt[St*3+2],Kt=lt[Et*3],cn=lt[Et*3+1],hn=lt[Et*3+2];return Math.abs(At-Nt)<Math.abs(Ct-Dt)?[new Vector2(Ct,1-Rt),new Vector2(Dt,1-Ft),new Vector2(Ut,1-Zt),new Vector2(Kt,1-hn)]:[new Vector2(At,1-Rt),new Vector2(Nt,1-Ft),new Vector2(Wt,1-Zt),new Vector2(cn,1-hn)]}};function toJSON$1(ft,lt,dt){if(dt.shapes=[],Array.isArray(ft))for(let vt=0,St=ft.length;vt<St;vt++){const Et=ft[vt];dt.shapes.push(Et.uuid)}else dt.shapes.push(ft.uuid);return dt.options=Object.assign({},lt),lt.extrudePath!==void 0&&(dt.options.extrudePath=lt.extrudePath.toJSON()),dt}class IcosahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=(1+Math.sqrt(5))/2,St=[-1,vt,0,1,vt,0,-1,-vt,0,1,-vt,0,0,-1,vt,0,1,vt,0,-1,-vt,0,1,-vt,vt,0,-1,vt,0,1,-vt,0,-1,-vt,0,1],Et=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(St,Et,lt,dt),this.type="IcosahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new IcosahedronGeometry(lt.radius,lt.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],St=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(vt,St,lt,dt),this.type="OctahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new OctahedronGeometry(lt.radius,lt.detail)}}class RingGeometry extends BufferGeometry{constructor(lt=.5,dt=1,vt=32,St=1,Et=0,Ct=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:lt,outerRadius:dt,thetaSegments:vt,phiSegments:St,thetaStart:Et,thetaLength:Ct},vt=Math.max(3,vt),St=Math.max(1,St);const At=[],Rt=[],Dt=[],Nt=[];let Ft=lt;const Ut=(dt-lt)/St,Wt=new Vector3,Zt=new Vector2;for(let Kt=0;Kt<=St;Kt++){for(let cn=0;cn<=vt;cn++){const hn=Et+cn/vt*Ct;Wt.x=Ft*Math.cos(hn),Wt.y=Ft*Math.sin(hn),Rt.push(Wt.x,Wt.y,Wt.z),Dt.push(0,0,1),Zt.x=(Wt.x/dt+1)/2,Zt.y=(Wt.y/dt+1)/2,Nt.push(Zt.x,Zt.y)}Ft+=Ut}for(let Kt=0;Kt<St;Kt++){const cn=Kt*(vt+1);for(let hn=0;hn<vt;hn++){const dn=hn+cn,pn=dn,gn=dn+vt+1,vn=dn+vt+2,bn=dn+1;At.push(pn,gn,bn),At.push(gn,vn,bn)}}this.setIndex(At),this.setAttribute("position",new Float32BufferAttribute(Rt,3)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3)),this.setAttribute("uv",new Float32BufferAttribute(Nt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new RingGeometry(lt.innerRadius,lt.outerRadius,lt.thetaSegments,lt.phiSegments,lt.thetaStart,lt.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(lt=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),dt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:lt,curveSegments:dt};const vt=[],St=[],Et=[],Ct=[];let At=0,Rt=0;if(Array.isArray(lt)===!1)Dt(lt);else for(let Nt=0;Nt<lt.length;Nt++)Dt(lt[Nt]),this.addGroup(At,Rt,Nt),At+=Rt,Rt=0;this.setIndex(vt),this.setAttribute("position",new Float32BufferAttribute(St,3)),this.setAttribute("normal",new Float32BufferAttribute(Et,3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2));function Dt(Nt){const Ft=St.length/3,Ut=Nt.extractPoints(dt);let Wt=Ut.shape;const Zt=Ut.holes;ShapeUtils.isClockWise(Wt)===!1&&(Wt=Wt.reverse());for(let cn=0,hn=Zt.length;cn<hn;cn++){const dn=Zt[cn];ShapeUtils.isClockWise(dn)===!0&&(Zt[cn]=dn.reverse())}const Kt=ShapeUtils.triangulateShape(Wt,Zt);for(let cn=0,hn=Zt.length;cn<hn;cn++){const dn=Zt[cn];Wt=Wt.concat(dn)}for(let cn=0,hn=Wt.length;cn<hn;cn++){const dn=Wt[cn];St.push(dn.x,dn.y,0),Et.push(0,0,1),Ct.push(dn.x,dn.y)}for(let cn=0,hn=Kt.length;cn<hn;cn++){const dn=Kt[cn],pn=dn[0]+Ft,gn=dn[1]+Ft,vn=dn[2]+Ft;vt.push(pn,gn,vn),Rt+=3}}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON(),dt=this.parameters.shapes;return toJSON(dt,lt)}static fromJSON(lt,dt){const vt=[];for(let St=0,Et=lt.shapes.length;St<Et;St++){const Ct=dt[lt.shapes[St]];vt.push(Ct)}return new ShapeGeometry(vt,lt.curveSegments)}}function toJSON(ft,lt){if(lt.shapes=[],Array.isArray(ft))for(let dt=0,vt=ft.length;dt<vt;dt++){const St=ft[dt];lt.shapes.push(St.uuid)}else lt.shapes.push(ft.uuid);return lt}class SphereGeometry extends BufferGeometry{constructor(lt=1,dt=32,vt=16,St=0,Et=Math.PI*2,Ct=0,At=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:lt,widthSegments:dt,heightSegments:vt,phiStart:St,phiLength:Et,thetaStart:Ct,thetaLength:At},dt=Math.max(3,Math.floor(dt)),vt=Math.max(2,Math.floor(vt));const Rt=Math.min(Ct+At,Math.PI);let Dt=0;const Nt=[],Ft=new Vector3,Ut=new Vector3,Wt=[],Zt=[],Kt=[],cn=[];for(let hn=0;hn<=vt;hn++){const dn=[],pn=hn/vt;let gn=0;hn==0&&Ct==0?gn=.5/dt:hn==vt&&Rt==Math.PI&&(gn=-.5/dt);for(let vn=0;vn<=dt;vn++){const bn=vn/dt;Ft.x=-lt*Math.cos(St+bn*Et)*Math.sin(Ct+pn*At),Ft.y=lt*Math.cos(Ct+pn*At),Ft.z=lt*Math.sin(St+bn*Et)*Math.sin(Ct+pn*At),Zt.push(Ft.x,Ft.y,Ft.z),Ut.copy(Ft).normalize(),Kt.push(Ut.x,Ut.y,Ut.z),cn.push(bn+gn,1-pn),dn.push(Dt++)}Nt.push(dn)}for(let hn=0;hn<vt;hn++)for(let dn=0;dn<dt;dn++){const pn=Nt[hn][dn+1],gn=Nt[hn][dn],vn=Nt[hn+1][dn],bn=Nt[hn+1][dn+1];(hn!==0||Ct>0)&&Wt.push(pn,gn,bn),(hn!==vt-1||Rt<Math.PI)&&Wt.push(gn,vn,bn)}this.setIndex(Wt),this.setAttribute("position",new Float32BufferAttribute(Zt,3)),this.setAttribute("normal",new Float32BufferAttribute(Kt,3)),this.setAttribute("uv",new Float32BufferAttribute(cn,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new SphereGeometry(lt.radius,lt.widthSegments,lt.heightSegments,lt.phiStart,lt.phiLength,lt.thetaStart,lt.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],St=[2,1,0,0,3,2,1,3,0,2,3,1];super(vt,St,lt,dt),this.type="TetrahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new TetrahedronGeometry(lt.radius,lt.detail)}}class TorusGeometry extends BufferGeometry{constructor(lt=1,dt=.4,vt=12,St=48,Et=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:lt,tube:dt,radialSegments:vt,tubularSegments:St,arc:Et},vt=Math.floor(vt),St=Math.floor(St);const Ct=[],At=[],Rt=[],Dt=[],Nt=new Vector3,Ft=new Vector3,Ut=new Vector3;for(let Wt=0;Wt<=vt;Wt++)for(let Zt=0;Zt<=St;Zt++){const Kt=Zt/St*Et,cn=Wt/vt*Math.PI*2;Ft.x=(lt+dt*Math.cos(cn))*Math.cos(Kt),Ft.y=(lt+dt*Math.cos(cn))*Math.sin(Kt),Ft.z=dt*Math.sin(cn),At.push(Ft.x,Ft.y,Ft.z),Nt.x=lt*Math.cos(Kt),Nt.y=lt*Math.sin(Kt),Ut.subVectors(Ft,Nt).normalize(),Rt.push(Ut.x,Ut.y,Ut.z),Dt.push(Zt/St),Dt.push(Wt/vt)}for(let Wt=1;Wt<=vt;Wt++)for(let Zt=1;Zt<=St;Zt++){const Kt=(St+1)*Wt+Zt-1,cn=(St+1)*(Wt-1)+Zt-1,hn=(St+1)*(Wt-1)+Zt,dn=(St+1)*Wt+Zt;Ct.push(Kt,cn,dn),Ct.push(cn,hn,dn)}this.setIndex(Ct),this.setAttribute("position",new Float32BufferAttribute(At,3)),this.setAttribute("normal",new Float32BufferAttribute(Rt,3)),this.setAttribute("uv",new Float32BufferAttribute(Dt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new TorusGeometry(lt.radius,lt.tube,lt.radialSegments,lt.tubularSegments,lt.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(lt=1,dt=.4,vt=64,St=8,Et=2,Ct=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:lt,tube:dt,tubularSegments:vt,radialSegments:St,p:Et,q:Ct},vt=Math.floor(vt),St=Math.floor(St);const At=[],Rt=[],Dt=[],Nt=[],Ft=new Vector3,Ut=new Vector3,Wt=new Vector3,Zt=new Vector3,Kt=new Vector3,cn=new Vector3,hn=new Vector3;for(let pn=0;pn<=vt;++pn){const gn=pn/vt*Et*Math.PI*2;dn(gn,Et,Ct,lt,Wt),dn(gn+.01,Et,Ct,lt,Zt),cn.subVectors(Zt,Wt),hn.addVectors(Zt,Wt),Kt.crossVectors(cn,hn),hn.crossVectors(Kt,cn),Kt.normalize(),hn.normalize();for(let vn=0;vn<=St;++vn){const bn=vn/St*Math.PI*2,$n=-dt*Math.cos(bn),Tn=dt*Math.sin(bn);Ft.x=Wt.x+($n*hn.x+Tn*Kt.x),Ft.y=Wt.y+($n*hn.y+Tn*Kt.y),Ft.z=Wt.z+($n*hn.z+Tn*Kt.z),Rt.push(Ft.x,Ft.y,Ft.z),Ut.subVectors(Ft,Wt).normalize(),Dt.push(Ut.x,Ut.y,Ut.z),Nt.push(pn/vt),Nt.push(vn/St)}}for(let pn=1;pn<=vt;pn++)for(let gn=1;gn<=St;gn++){const vn=(St+1)*(pn-1)+(gn-1),bn=(St+1)*pn+(gn-1),$n=(St+1)*pn+gn,Tn=(St+1)*(pn-1)+gn;At.push(vn,bn,Tn),At.push(bn,$n,Tn)}this.setIndex(At),this.setAttribute("position",new Float32BufferAttribute(Rt,3)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3)),this.setAttribute("uv",new Float32BufferAttribute(Nt,2));function dn(pn,gn,vn,bn,$n){const Tn=Math.cos(pn),In=Math.sin(pn),Pn=vn/gn*pn,zn=Math.cos(Pn);$n.x=bn*(2+zn)*.5*Tn,$n.y=bn*(2+zn)*In*.5,$n.z=bn*Math.sin(Pn)*.5}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new TorusKnotGeometry(lt.radius,lt.tube,lt.tubularSegments,lt.radialSegments,lt.p,lt.q)}}class TubeGeometry extends BufferGeometry{constructor(lt=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),dt=64,vt=1,St=8,Et=!1){super(),this.type="TubeGeometry",this.parameters={path:lt,tubularSegments:dt,radius:vt,radialSegments:St,closed:Et};const Ct=lt.computeFrenetFrames(dt,Et);this.tangents=Ct.tangents,this.normals=Ct.normals,this.binormals=Ct.binormals;const At=new Vector3,Rt=new Vector3,Dt=new Vector2;let Nt=new Vector3;const Ft=[],Ut=[],Wt=[],Zt=[];Kt(),this.setIndex(Zt),this.setAttribute("position",new Float32BufferAttribute(Ft,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(Wt,2));function Kt(){for(let pn=0;pn<dt;pn++)cn(pn);cn(Et===!1?dt:0),dn(),hn()}function cn(pn){Nt=lt.getPointAt(pn/dt,Nt);const gn=Ct.normals[pn],vn=Ct.binormals[pn];for(let bn=0;bn<=St;bn++){const $n=bn/St*Math.PI*2,Tn=Math.sin($n),In=-Math.cos($n);Rt.x=In*gn.x+Tn*vn.x,Rt.y=In*gn.y+Tn*vn.y,Rt.z=In*gn.z+Tn*vn.z,Rt.normalize(),Ut.push(Rt.x,Rt.y,Rt.z),At.x=Nt.x+vt*Rt.x,At.y=Nt.y+vt*Rt.y,At.z=Nt.z+vt*Rt.z,Ft.push(At.x,At.y,At.z)}}function hn(){for(let pn=1;pn<=dt;pn++)for(let gn=1;gn<=St;gn++){const vn=(St+1)*(pn-1)+(gn-1),bn=(St+1)*pn+(gn-1),$n=(St+1)*pn+gn,Tn=(St+1)*(pn-1)+gn;Zt.push(vn,bn,Tn),Zt.push(bn,$n,Tn)}}function dn(){for(let pn=0;pn<=dt;pn++)for(let gn=0;gn<=St;gn++)Dt.x=pn/dt,Dt.y=gn/St,Wt.push(Dt.x,Dt.y)}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON();return lt.path=this.parameters.path.toJSON(),lt}static fromJSON(lt){return new TubeGeometry(new Curves[lt.path.type]().fromJSON(lt.path),lt.tubularSegments,lt.radius,lt.radialSegments,lt.closed)}}class WireframeGeometry extends BufferGeometry{constructor(lt=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:lt},lt!==null){const dt=[],vt=new Set,St=new Vector3,Et=new Vector3;if(lt.index!==null){const Ct=lt.attributes.position,At=lt.index;let Rt=lt.groups;Rt.length===0&&(Rt=[{start:0,count:At.count,materialIndex:0}]);for(let Dt=0,Nt=Rt.length;Dt<Nt;++Dt){const Ft=Rt[Dt],Ut=Ft.start,Wt=Ft.count;for(let Zt=Ut,Kt=Ut+Wt;Zt<Kt;Zt+=3)for(let cn=0;cn<3;cn++){const hn=At.getX(Zt+cn),dn=At.getX(Zt+(cn+1)%3);St.fromBufferAttribute(Ct,hn),Et.fromBufferAttribute(Ct,dn),isUniqueEdge(St,Et,vt)===!0&&(dt.push(St.x,St.y,St.z),dt.push(Et.x,Et.y,Et.z))}}}else{const Ct=lt.attributes.position;for(let At=0,Rt=Ct.count/3;At<Rt;At++)for(let Dt=0;Dt<3;Dt++){const Nt=3*At+Dt,Ft=3*At+(Dt+1)%3;St.fromBufferAttribute(Ct,Nt),Et.fromBufferAttribute(Ct,Ft),isUniqueEdge(St,Et,vt)===!0&&(dt.push(St.x,St.y,St.z),dt.push(Et.x,Et.y,Et.z))}}this.setAttribute("position",new Float32BufferAttribute(dt,3))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}}function isUniqueEdge(ft,lt,dt){const vt=`${ft.x},${ft.y},${ft.z}-${lt.x},${lt.y},${lt.z}`,St=`${lt.x},${lt.y},${lt.z}-${ft.x},${ft.y},${ft.z}`;return dt.has(vt)===!0||dt.has(St)===!0?!1:(dt.add(vt),dt.add(St),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(lt){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.fog=lt.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(lt){super(lt),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(lt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.defines={STANDARD:""},this.color.copy(lt.color),this.roughness=lt.roughness,this.metalness=lt.metalness,this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.roughnessMap=lt.roughnessMap,this.metalnessMap=lt.metalnessMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.envMapIntensity=lt.envMapIntensity,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(lt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(dt){this.ior=(1+.4*dt)/(1-.4*dt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(lt)}get sheen(){return this._sheen}set sheen(lt){this._sheen>0!=lt>0&&this.version++,this._sheen=lt}get clearcoat(){return this._clearcoat}set clearcoat(lt){this._clearcoat>0!=lt>0&&this.version++,this._clearcoat=lt}get iridescence(){return this._iridescence}set iridescence(lt){this._iridescence>0!=lt>0&&this.version++,this._iridescence=lt}get transmission(){return this._transmission}set transmission(lt){this._transmission>0!=lt>0&&this.version++,this._transmission=lt}copy(lt){return super.copy(lt),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=lt.clearcoat,this.clearcoatMap=lt.clearcoatMap,this.clearcoatRoughness=lt.clearcoatRoughness,this.clearcoatRoughnessMap=lt.clearcoatRoughnessMap,this.clearcoatNormalMap=lt.clearcoatNormalMap,this.clearcoatNormalScale.copy(lt.clearcoatNormalScale),this.ior=lt.ior,this.iridescence=lt.iridescence,this.iridescenceMap=lt.iridescenceMap,this.iridescenceIOR=lt.iridescenceIOR,this.iridescenceThicknessRange=[...lt.iridescenceThicknessRange],this.iridescenceThicknessMap=lt.iridescenceThicknessMap,this.sheen=lt.sheen,this.sheenColor.copy(lt.sheenColor),this.sheenColorMap=lt.sheenColorMap,this.sheenRoughness=lt.sheenRoughness,this.sheenRoughnessMap=lt.sheenRoughnessMap,this.transmission=lt.transmission,this.transmissionMap=lt.transmissionMap,this.thickness=lt.thickness,this.thicknessMap=lt.thicknessMap,this.attenuationDistance=lt.attenuationDistance,this.attenuationColor.copy(lt.attenuationColor),this.specularIntensity=lt.specularIntensity,this.specularIntensityMap=lt.specularIntensityMap,this.specularColor.copy(lt.specularColor),this.specularColorMap=lt.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(lt){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.specular.copy(lt.specular),this.shininess=lt.shininess,this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshToonMaterial extends Material{constructor(lt){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.gradientMap=lt.gradientMap,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.alphaMap=lt.alphaMap,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.fog=lt.fog,this}}class MeshNormalMaterial extends Material{constructor(lt){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(lt)}copy(lt){return super.copy(lt),this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.flatShading=lt.flatShading,this}}class MeshLambertMaterial extends Material{constructor(lt){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshMatcapMaterial extends Material{constructor(lt){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.defines={MATCAP:""},this.color.copy(lt.color),this.matcap=lt.matcap,this.map=lt.map,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.alphaMap=lt.alphaMap,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(lt){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(lt)}copy(lt){return super.copy(lt),this.scale=lt.scale,this.dashSize=lt.dashSize,this.gapSize=lt.gapSize,this}}function arraySlice(ft,lt,dt){return isTypedArray(ft)?new ft.constructor(ft.subarray(lt,dt!==void 0?dt:ft.length)):ft.slice(lt,dt)}function convertArray(ft,lt,dt){return!ft||!dt&&ft.constructor===lt?ft:typeof lt.BYTES_PER_ELEMENT=="number"?new lt(ft):Array.prototype.slice.call(ft)}function isTypedArray(ft){return ArrayBuffer.isView(ft)&&!(ft instanceof DataView)}function getKeyframeOrder(ft){function lt(St,Et){return ft[St]-ft[Et]}const dt=ft.length,vt=new Array(dt);for(let St=0;St!==dt;++St)vt[St]=St;return vt.sort(lt),vt}function sortedArray(ft,lt,dt){const vt=ft.length,St=new ft.constructor(vt);for(let Et=0,Ct=0;Ct!==vt;++Et){const At=dt[Et]*lt;for(let Rt=0;Rt!==lt;++Rt)St[Ct++]=ft[At+Rt]}return St}function flattenJSON(ft,lt,dt,vt){let St=1,Et=ft[0];for(;Et!==void 0&&Et[vt]===void 0;)Et=ft[St++];if(Et===void 0)return;let Ct=Et[vt];if(Ct!==void 0)if(Array.isArray(Ct))do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),dt.push.apply(dt,Ct)),Et=ft[St++];while(Et!==void 0);else if(Ct.toArray!==void 0)do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),Ct.toArray(dt,dt.length)),Et=ft[St++];while(Et!==void 0);else do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),dt.push(Ct)),Et=ft[St++];while(Et!==void 0)}function subclip(ft,lt,dt,vt,St=30){const Et=ft.clone();Et.name=lt;const Ct=[];for(let Rt=0;Rt<Et.tracks.length;++Rt){const Dt=Et.tracks[Rt],Nt=Dt.getValueSize(),Ft=[],Ut=[];for(let Wt=0;Wt<Dt.times.length;++Wt){const Zt=Dt.times[Wt]*St;if(!(Zt<dt||Zt>=vt)){Ft.push(Dt.times[Wt]);for(let Kt=0;Kt<Nt;++Kt)Ut.push(Dt.values[Wt*Nt+Kt])}}Ft.length!==0&&(Dt.times=convertArray(Ft,Dt.times.constructor),Dt.values=convertArray(Ut,Dt.values.constructor),Ct.push(Dt))}Et.tracks=Ct;let At=1/0;for(let Rt=0;Rt<Et.tracks.length;++Rt)At>Et.tracks[Rt].times[0]&&(At=Et.tracks[Rt].times[0]);for(let Rt=0;Rt<Et.tracks.length;++Rt)Et.tracks[Rt].shift(-1*At);return Et.resetDuration(),Et}function makeClipAdditive(ft,lt=0,dt=ft,vt=30){vt<=0&&(vt=30);const St=dt.tracks.length,Et=lt/vt;for(let Ct=0;Ct<St;++Ct){const At=dt.tracks[Ct],Rt=At.ValueTypeName;if(Rt==="bool"||Rt==="string")continue;const Dt=ft.tracks.find(function(hn){return hn.name===At.name&&hn.ValueTypeName===Rt});if(Dt===void 0)continue;let Nt=0;const Ft=At.getValueSize();At.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Nt=Ft/3);let Ut=0;const Wt=Dt.getValueSize();Dt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ut=Wt/3);const Zt=At.times.length-1;let Kt;if(Et<=At.times[0]){const hn=Nt,dn=Ft-Nt;Kt=arraySlice(At.values,hn,dn)}else if(Et>=At.times[Zt]){const hn=Zt*Ft+Nt,dn=hn+Ft-Nt;Kt=arraySlice(At.values,hn,dn)}else{const hn=At.createInterpolant(),dn=Nt,pn=Ft-Nt;hn.evaluate(Et),Kt=arraySlice(hn.resultBuffer,dn,pn)}Rt==="quaternion"&&new Quaternion().fromArray(Kt).normalize().conjugate().toArray(Kt);const cn=Dt.times.length;for(let hn=0;hn<cn;++hn){const dn=hn*Wt+Ut;if(Rt==="quaternion")Quaternion.multiplyQuaternionsFlat(Dt.values,dn,Kt,0,Dt.values,dn);else{const pn=Wt-Ut*2;for(let gn=0;gn<pn;++gn)Dt.values[dn+gn]-=Kt[gn]}}}return ft.blendMode=AdditiveAnimationBlendMode,ft}const AnimationUtils={arraySlice,convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(lt,dt,vt,St){this.parameterPositions=lt,this._cachedIndex=0,this.resultBuffer=St!==void 0?St:new dt.constructor(vt),this.sampleValues=dt,this.valueSize=vt,this.settings=null,this.DefaultSettings_={}}evaluate(lt){const dt=this.parameterPositions;let vt=this._cachedIndex,St=dt[vt],Et=dt[vt-1];e:{t:{let Ct;n:{r:if(!(lt<St)){for(let At=vt+2;;){if(St===void 0){if(lt<Et)break r;return vt=dt.length,this._cachedIndex=vt,this.copySampleValue_(vt-1)}if(vt===At)break;if(Et=St,St=dt[++vt],lt<St)break t}Ct=dt.length;break n}if(!(lt>=Et)){const At=dt[1];lt<At&&(vt=2,Et=At);for(let Rt=vt-2;;){if(Et===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(vt===Rt)break;if(St=Et,Et=dt[--vt-1],lt>=Et)break t}Ct=vt,vt=0;break n}break e}for(;vt<Ct;){const At=vt+Ct>>>1;lt<dt[At]?Ct=At:vt=At+1}if(St=dt[vt],Et=dt[vt-1],Et===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(St===void 0)return vt=dt.length,this._cachedIndex=vt,this.copySampleValue_(vt-1)}this._cachedIndex=vt,this.intervalChanged_(vt,Et,St)}return this.interpolate_(vt,Et,lt,St)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(lt){const dt=this.resultBuffer,vt=this.sampleValues,St=this.valueSize,Et=lt*St;for(let Ct=0;Ct!==St;++Ct)dt[Ct]=vt[Et+Ct];return dt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(lt,dt,vt,St){super(lt,dt,vt,St),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(lt,dt,vt){const St=this.parameterPositions;let Et=lt-2,Ct=lt+1,At=St[Et],Rt=St[Ct];if(At===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Et=lt,At=2*dt-vt;break;case WrapAroundEnding:Et=St.length-2,At=dt+St[Et]-St[Et+1];break;default:Et=lt,At=vt}if(Rt===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ct=lt,Rt=2*vt-dt;break;case WrapAroundEnding:Ct=1,Rt=vt+St[1]-St[0];break;default:Ct=lt-1,Rt=dt}const Dt=(vt-dt)*.5,Nt=this.valueSize;this._weightPrev=Dt/(dt-At),this._weightNext=Dt/(Rt-vt),this._offsetPrev=Et*Nt,this._offsetNext=Ct*Nt}interpolate_(lt,dt,vt,St){const Et=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=lt*At,Dt=Rt-At,Nt=this._offsetPrev,Ft=this._offsetNext,Ut=this._weightPrev,Wt=this._weightNext,Zt=(vt-dt)/(St-dt),Kt=Zt*Zt,cn=Kt*Zt,hn=-Ut*cn+2*Ut*Kt-Ut*Zt,dn=(1+Ut)*cn+(-1.5-2*Ut)*Kt+(-.5+Ut)*Zt+1,pn=(-1-Wt)*cn+(1.5+Wt)*Kt+.5*Zt,gn=Wt*cn-Wt*Kt;for(let vn=0;vn!==At;++vn)Et[vn]=hn*Ct[Nt+vn]+dn*Ct[Dt+vn]+pn*Ct[Rt+vn]+gn*Ct[Ft+vn];return Et}}class LinearInterpolant extends Interpolant{constructor(lt,dt,vt,St){super(lt,dt,vt,St)}interpolate_(lt,dt,vt,St){const Et=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=lt*At,Dt=Rt-At,Nt=(vt-dt)/(St-dt),Ft=1-Nt;for(let Ut=0;Ut!==At;++Ut)Et[Ut]=Ct[Dt+Ut]*Ft+Ct[Rt+Ut]*Nt;return Et}}class DiscreteInterpolant extends Interpolant{constructor(lt,dt,vt,St){super(lt,dt,vt,St)}interpolate_(lt){return this.copySampleValue_(lt-1)}}class KeyframeTrack{constructor(lt,dt,vt,St){if(lt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(dt===void 0||dt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+lt);this.name=lt,this.times=convertArray(dt,this.TimeBufferType),this.values=convertArray(vt,this.ValueBufferType),this.setInterpolation(St||this.DefaultInterpolation)}static toJSON(lt){const dt=lt.constructor;let vt;if(dt.toJSON!==this.toJSON)vt=dt.toJSON(lt);else{vt={name:lt.name,times:convertArray(lt.times,Array),values:convertArray(lt.values,Array)};const St=lt.getInterpolation();St!==lt.DefaultInterpolation&&(vt.interpolation=St)}return vt.type=lt.ValueTypeName,vt}InterpolantFactoryMethodDiscrete(lt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),lt)}InterpolantFactoryMethodLinear(lt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),lt)}InterpolantFactoryMethodSmooth(lt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),lt)}setInterpolation(lt){let dt;switch(lt){case InterpolateDiscrete:dt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:dt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:dt=this.InterpolantFactoryMethodSmooth;break}if(dt===void 0){const vt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(lt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(vt);return console.warn("THREE.KeyframeTrack:",vt),this}return this.createInterpolant=dt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(lt){if(lt!==0){const dt=this.times;for(let vt=0,St=dt.length;vt!==St;++vt)dt[vt]+=lt}return this}scale(lt){if(lt!==1){const dt=this.times;for(let vt=0,St=dt.length;vt!==St;++vt)dt[vt]*=lt}return this}trim(lt,dt){const vt=this.times,St=vt.length;let Et=0,Ct=St-1;for(;Et!==St&&vt[Et]<lt;)++Et;for(;Ct!==-1&&vt[Ct]>dt;)--Ct;if(++Ct,Et!==0||Ct!==St){Et>=Ct&&(Ct=Math.max(Ct,1),Et=Ct-1);const At=this.getValueSize();this.times=arraySlice(vt,Et,Ct),this.values=arraySlice(this.values,Et*At,Ct*At)}return this}validate(){let lt=!0;const dt=this.getValueSize();dt-Math.floor(dt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),lt=!1);const vt=this.times,St=this.values,Et=vt.length;Et===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),lt=!1);let Ct=null;for(let At=0;At!==Et;At++){const Rt=vt[At];if(typeof Rt=="number"&&isNaN(Rt)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,At,Rt),lt=!1;break}if(Ct!==null&&Ct>Rt){console.error("THREE.KeyframeTrack: Out of order keys.",this,At,Rt,Ct),lt=!1;break}Ct=Rt}if(St!==void 0&&isTypedArray(St))for(let At=0,Rt=St.length;At!==Rt;++At){const Dt=St[At];if(isNaN(Dt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,At,Dt),lt=!1;break}}return lt}optimize(){const lt=arraySlice(this.times),dt=arraySlice(this.values),vt=this.getValueSize(),St=this.getInterpolation()===InterpolateSmooth,Et=lt.length-1;let Ct=1;for(let At=1;At<Et;++At){let Rt=!1;const Dt=lt[At],Nt=lt[At+1];if(Dt!==Nt&&(At!==1||Dt!==lt[0]))if(St)Rt=!0;else{const Ft=At*vt,Ut=Ft-vt,Wt=Ft+vt;for(let Zt=0;Zt!==vt;++Zt){const Kt=dt[Ft+Zt];if(Kt!==dt[Ut+Zt]||Kt!==dt[Wt+Zt]){Rt=!0;break}}}if(Rt){if(At!==Ct){lt[Ct]=lt[At];const Ft=At*vt,Ut=Ct*vt;for(let Wt=0;Wt!==vt;++Wt)dt[Ut+Wt]=dt[Ft+Wt]}++Ct}}if(Et>0){lt[Ct]=lt[Et];for(let At=Et*vt,Rt=Ct*vt,Dt=0;Dt!==vt;++Dt)dt[Rt+Dt]=dt[At+Dt];++Ct}return Ct!==lt.length?(this.times=arraySlice(lt,0,Ct),this.values=arraySlice(dt,0,Ct*vt)):(this.times=lt,this.values=dt),this}clone(){const lt=arraySlice(this.times,0),dt=arraySlice(this.values,0),vt=this.constructor,St=new vt(this.name,lt,dt);return St.createInterpolant=this.createInterpolant,St}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(lt,dt,vt,St){super(lt,dt,vt,St)}interpolate_(lt,dt,vt,St){const Et=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=(vt-dt)/(St-dt);let Dt=lt*At;for(let Nt=Dt+At;Dt!==Nt;Dt+=4)Quaternion.slerpFlat(Et,0,Ct,Dt-At,Ct,Dt,Rt);return Et}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(lt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),lt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(lt,dt=-1,vt,St=NormalAnimationBlendMode){this.name=lt,this.tracks=vt,this.duration=dt,this.blendMode=St,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(lt){const dt=[],vt=lt.tracks,St=1/(lt.fps||1);for(let Ct=0,At=vt.length;Ct!==At;++Ct)dt.push(parseKeyframeTrack(vt[Ct]).scale(St));const Et=new this(lt.name,lt.duration,dt,lt.blendMode);return Et.uuid=lt.uuid,Et}static toJSON(lt){const dt=[],vt=lt.tracks,St={name:lt.name,duration:lt.duration,tracks:dt,uuid:lt.uuid,blendMode:lt.blendMode};for(let Et=0,Ct=vt.length;Et!==Ct;++Et)dt.push(KeyframeTrack.toJSON(vt[Et]));return St}static CreateFromMorphTargetSequence(lt,dt,vt,St){const Et=dt.length,Ct=[];for(let At=0;At<Et;At++){let Rt=[],Dt=[];Rt.push((At+Et-1)%Et,At,(At+1)%Et),Dt.push(0,1,0);const Nt=getKeyframeOrder(Rt);Rt=sortedArray(Rt,1,Nt),Dt=sortedArray(Dt,1,Nt),!St&&Rt[0]===0&&(Rt.push(Et),Dt.push(Dt[0])),Ct.push(new NumberKeyframeTrack(".morphTargetInfluences["+dt[At].name+"]",Rt,Dt).scale(1/vt))}return new this(lt,-1,Ct)}static findByName(lt,dt){let vt=lt;if(!Array.isArray(lt)){const St=lt;vt=St.geometry&&St.geometry.animations||St.animations}for(let St=0;St<vt.length;St++)if(vt[St].name===dt)return vt[St];return null}static CreateClipsFromMorphTargetSequences(lt,dt,vt){const St={},Et=/^([\w-]*?)([\d]+)$/;for(let At=0,Rt=lt.length;At<Rt;At++){const Dt=lt[At],Nt=Dt.name.match(Et);if(Nt&&Nt.length>1){const Ft=Nt[1];let Ut=St[Ft];Ut||(St[Ft]=Ut=[]),Ut.push(Dt)}}const Ct=[];for(const At in St)Ct.push(this.CreateFromMorphTargetSequence(At,St[At],dt,vt));return Ct}static parseAnimation(lt,dt){if(!lt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const vt=function(Ft,Ut,Wt,Zt,Kt){if(Wt.length!==0){const cn=[],hn=[];flattenJSON(Wt,cn,hn,Zt),cn.length!==0&&Kt.push(new Ft(Ut,cn,hn))}},St=[],Et=lt.name||"default",Ct=lt.fps||30,At=lt.blendMode;let Rt=lt.length||-1;const Dt=lt.hierarchy||[];for(let Ft=0;Ft<Dt.length;Ft++){const Ut=Dt[Ft].keys;if(!(!Ut||Ut.length===0))if(Ut[0].morphTargets){const Wt={};let Zt;for(Zt=0;Zt<Ut.length;Zt++)if(Ut[Zt].morphTargets)for(let Kt=0;Kt<Ut[Zt].morphTargets.length;Kt++)Wt[Ut[Zt].morphTargets[Kt]]=-1;for(const Kt in Wt){const cn=[],hn=[];for(let dn=0;dn!==Ut[Zt].morphTargets.length;++dn){const pn=Ut[Zt];cn.push(pn.time),hn.push(pn.morphTarget===Kt?1:0)}St.push(new NumberKeyframeTrack(".morphTargetInfluence["+Kt+"]",cn,hn))}Rt=Wt.length*Ct}else{const Wt=".bones["+dt[Ft].name+"]";vt(VectorKeyframeTrack,Wt+".position",Ut,"pos",St),vt(QuaternionKeyframeTrack,Wt+".quaternion",Ut,"rot",St),vt(VectorKeyframeTrack,Wt+".scale",Ut,"scl",St)}}return St.length===0?null:new this(Et,Rt,St,At)}resetDuration(){const lt=this.tracks;let dt=0;for(let vt=0,St=lt.length;vt!==St;++vt){const Et=this.tracks[vt];dt=Math.max(dt,Et.times[Et.times.length-1])}return this.duration=dt,this}trim(){for(let lt=0;lt<this.tracks.length;lt++)this.tracks[lt].trim(0,this.duration);return this}validate(){let lt=!0;for(let dt=0;dt<this.tracks.length;dt++)lt=lt&&this.tracks[dt].validate();return lt}optimize(){for(let lt=0;lt<this.tracks.length;lt++)this.tracks[lt].optimize();return this}clone(){const lt=[];for(let dt=0;dt<this.tracks.length;dt++)lt.push(this.tracks[dt].clone());return new this.constructor(this.name,this.duration,lt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(ft){switch(ft.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ft)}function parseKeyframeTrack(ft){if(ft.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const lt=getTrackTypeForValueTypeName(ft.type);if(ft.times===void 0){const dt=[],vt=[];flattenJSON(ft.keys,dt,vt,"value"),ft.times=dt,ft.values=vt}return lt.parse!==void 0?lt.parse(ft):new lt(ft.name,ft.times,ft.values,ft.interpolation)}const Cache={enabled:!1,files:{},add:function(ft,lt){this.enabled!==!1&&(this.files[ft]=lt)},get:function(ft){if(this.enabled!==!1)return this.files[ft]},remove:function(ft){delete this.files[ft]},clear:function(){this.files={}}};class LoadingManager{constructor(lt,dt,vt){const St=this;let Et=!1,Ct=0,At=0,Rt;const Dt=[];this.onStart=void 0,this.onLoad=lt,this.onProgress=dt,this.onError=vt,this.itemStart=function(Nt){At++,Et===!1&&St.onStart!==void 0&&St.onStart(Nt,Ct,At),Et=!0},this.itemEnd=function(Nt){Ct++,St.onProgress!==void 0&&St.onProgress(Nt,Ct,At),Ct===At&&(Et=!1,St.onLoad!==void 0&&St.onLoad())},this.itemError=function(Nt){St.onError!==void 0&&St.onError(Nt)},this.resolveURL=function(Nt){return Rt?Rt(Nt):Nt},this.setURLModifier=function(Nt){return Rt=Nt,this},this.addHandler=function(Nt,Ft){return Dt.push(Nt,Ft),this},this.removeHandler=function(Nt){const Ft=Dt.indexOf(Nt);return Ft!==-1&&Dt.splice(Ft,2),this},this.getHandler=function(Nt){for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft+=2){const Wt=Dt[Ft],Zt=Dt[Ft+1];if(Wt.global&&(Wt.lastIndex=0),Wt.test(Nt))return Zt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(lt){this.manager=lt!==void 0?lt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(lt,dt){const vt=this;return new Promise(function(St,Et){vt.load(lt,St,dt,Et)})}parse(){}setCrossOrigin(lt){return this.crossOrigin=lt,this}setWithCredentials(lt){return this.withCredentials=lt,this}setPath(lt){return this.path=lt,this}setResourcePath(lt){return this.resourcePath=lt,this}setRequestHeader(lt){return this.requestHeader=lt,this}}const loading={};class HttpError extends Error{constructor(lt,dt){super(lt),this.response=dt}}class FileLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){lt===void 0&&(lt=""),this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=Cache.get(lt);if(Et!==void 0)return this.manager.itemStart(lt),setTimeout(()=>{dt&&dt(Et),this.manager.itemEnd(lt)},0),Et;if(loading[lt]!==void 0){loading[lt].push({onLoad:dt,onProgress:vt,onError:St});return}loading[lt]=[],loading[lt].push({onLoad:dt,onProgress:vt,onError:St});const Ct=new Request(lt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),At=this.mimeType,Rt=this.responseType;fetch(Ct).then(Dt=>{if(Dt.status===200||Dt.status===0){if(Dt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||Dt.body===void 0||Dt.body.getReader===void 0)return Dt;const Nt=loading[lt],Ft=Dt.body.getReader(),Ut=Dt.headers.get("Content-Length")||Dt.headers.get("X-File-Size"),Wt=Ut?parseInt(Ut):0,Zt=Wt!==0;let Kt=0;const cn=new ReadableStream({start(hn){dn();function dn(){Ft.read().then(({done:pn,value:gn})=>{if(pn)hn.close();else{Kt+=gn.byteLength;const vn=new ProgressEvent("progress",{lengthComputable:Zt,loaded:Kt,total:Wt});for(let bn=0,$n=Nt.length;bn<$n;bn++){const Tn=Nt[bn];Tn.onProgress&&Tn.onProgress(vn)}hn.enqueue(gn),dn()}})}}});return new Response(cn)}else throw new HttpError(`fetch for "${Dt.url}" responded with ${Dt.status}: ${Dt.statusText}`,Dt)}).then(Dt=>{switch(Rt){case"arraybuffer":return Dt.arrayBuffer();case"blob":return Dt.blob();case"document":return Dt.text().then(Nt=>new DOMParser().parseFromString(Nt,At));case"json":return Dt.json();default:if(At===void 0)return Dt.text();{const Ft=/charset="?([^;"\s]*)"?/i.exec(At),Ut=Ft&&Ft[1]?Ft[1].toLowerCase():void 0,Wt=new TextDecoder(Ut);return Dt.arrayBuffer().then(Zt=>Wt.decode(Zt))}}}).then(Dt=>{Cache.add(lt,Dt);const Nt=loading[lt];delete loading[lt];for(let Ft=0,Ut=Nt.length;Ft<Ut;Ft++){const Wt=Nt[Ft];Wt.onLoad&&Wt.onLoad(Dt)}}).catch(Dt=>{const Nt=loading[lt];if(Nt===void 0)throw this.manager.itemError(lt),Dt;delete loading[lt];for(let Ft=0,Ut=Nt.length;Ft<Ut;Ft++){const Wt=Nt[Ft];Wt.onError&&Wt.onError(Dt)}this.manager.itemError(lt)}).finally(()=>{this.manager.itemEnd(lt)}),this.manager.itemStart(lt)}setResponseType(lt){return this.responseType=lt,this}setMimeType(lt){return this.mimeType=lt,this}}class AnimationLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=new FileLoader(this.manager);Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load(lt,function(At){try{dt(Et.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Et.manager.itemError(lt)}},vt,St)}parse(lt){const dt=[];for(let vt=0;vt<lt.length;vt++){const St=AnimationClip.parse(lt[vt]);dt.push(St)}return dt}}class CompressedTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=[],At=new CompressedTexture,Rt=new FileLoader(this.manager);Rt.setPath(this.path),Rt.setResponseType("arraybuffer"),Rt.setRequestHeader(this.requestHeader),Rt.setWithCredentials(Et.withCredentials);let Dt=0;function Nt(Ft){Rt.load(lt[Ft],function(Ut){const Wt=Et.parse(Ut,!0);Ct[Ft]={width:Wt.width,height:Wt.height,format:Wt.format,mipmaps:Wt.mipmaps},Dt+=1,Dt===6&&(Wt.mipmapCount===1&&(At.minFilter=LinearFilter),At.image=Ct,At.format=Wt.format,At.needsUpdate=!0,dt&&dt(At))},vt,St)}if(Array.isArray(lt))for(let Ft=0,Ut=lt.length;Ft<Ut;++Ft)Nt(Ft);else Rt.load(lt,function(Ft){const Ut=Et.parse(Ft,!0);if(Ut.isCubemap){const Wt=Ut.mipmaps.length/Ut.mipmapCount;for(let Zt=0;Zt<Wt;Zt++){Ct[Zt]={mipmaps:[]};for(let Kt=0;Kt<Ut.mipmapCount;Kt++)Ct[Zt].mipmaps.push(Ut.mipmaps[Zt*Ut.mipmapCount+Kt]),Ct[Zt].format=Ut.format,Ct[Zt].width=Ut.width,Ct[Zt].height=Ut.height}At.image=Ct}else At.image.width=Ut.width,At.image.height=Ut.height,At.mipmaps=Ut.mipmaps;Ut.mipmapCount===1&&(At.minFilter=LinearFilter),At.format=Ut.format,At.needsUpdate=!0,dt&&dt(At)},vt,St);return At}}class ImageLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=this,Ct=Cache.get(lt);if(Ct!==void 0)return Et.manager.itemStart(lt),setTimeout(function(){dt&&dt(Ct),Et.manager.itemEnd(lt)},0),Ct;const At=createElementNS$1("img");function Rt(){Nt(),Cache.add(lt,this),dt&&dt(this),Et.manager.itemEnd(lt)}function Dt(Ft){Nt(),St&&St(Ft),Et.manager.itemError(lt),Et.manager.itemEnd(lt)}function Nt(){At.removeEventListener("load",Rt,!1),At.removeEventListener("error",Dt,!1)}return At.addEventListener("load",Rt,!1),At.addEventListener("error",Dt,!1),lt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(At.crossOrigin=this.crossOrigin),Et.manager.itemStart(lt),At.src=lt,At}}class CubeTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=new CubeTexture,Ct=new ImageLoader(this.manager);Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path);let At=0;function Rt(Dt){Ct.load(lt[Dt],function(Nt){Et.images[Dt]=Nt,At++,At===6&&(Et.needsUpdate=!0,dt&&dt(Et))},void 0,St)}for(let Dt=0;Dt<lt.length;++Dt)Rt(Dt);return Et}}class DataTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=new DataTexture,At=new FileLoader(this.manager);return At.setResponseType("arraybuffer"),At.setRequestHeader(this.requestHeader),At.setPath(this.path),At.setWithCredentials(Et.withCredentials),At.load(lt,function(Rt){const Dt=Et.parse(Rt);Dt&&(Dt.image!==void 0?Ct.image=Dt.image:Dt.data!==void 0&&(Ct.image.width=Dt.width,Ct.image.height=Dt.height,Ct.image.data=Dt.data),Ct.wrapS=Dt.wrapS!==void 0?Dt.wrapS:ClampToEdgeWrapping,Ct.wrapT=Dt.wrapT!==void 0?Dt.wrapT:ClampToEdgeWrapping,Ct.magFilter=Dt.magFilter!==void 0?Dt.magFilter:LinearFilter,Ct.minFilter=Dt.minFilter!==void 0?Dt.minFilter:LinearFilter,Ct.anisotropy=Dt.anisotropy!==void 0?Dt.anisotropy:1,Dt.encoding!==void 0&&(Ct.encoding=Dt.encoding),Dt.flipY!==void 0&&(Ct.flipY=Dt.flipY),Dt.format!==void 0&&(Ct.format=Dt.format),Dt.type!==void 0&&(Ct.type=Dt.type),Dt.mipmaps!==void 0&&(Ct.mipmaps=Dt.mipmaps,Ct.minFilter=LinearMipmapLinearFilter),Dt.mipmapCount===1&&(Ct.minFilter=LinearFilter),Dt.generateMipmaps!==void 0&&(Ct.generateMipmaps=Dt.generateMipmaps),Ct.needsUpdate=!0,dt&&dt(Ct,Dt))},vt,St),Ct}}class TextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=new Texture,Ct=new ImageLoader(this.manager);return Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path),Ct.load(lt,function(At){Et.image=At,Et.needsUpdate=!0,dt!==void 0&&dt(Et)},vt,St),Et}}class Light extends Object3D{constructor(lt,dt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(lt),this.intensity=dt}dispose(){}copy(lt,dt){return super.copy(lt,dt),this.color.copy(lt.color),this.intensity=lt.intensity,this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.color=this.color.getHex(),dt.object.intensity=this.intensity,this.groundColor!==void 0&&(dt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(dt.object.distance=this.distance),this.angle!==void 0&&(dt.object.angle=this.angle),this.decay!==void 0&&(dt.object.decay=this.decay),this.penumbra!==void 0&&(dt.object.penumbra=this.penumbra),this.shadow!==void 0&&(dt.object.shadow=this.shadow.toJSON()),dt}}class HemisphereLight extends Light{constructor(lt,dt,vt){super(lt,vt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(dt)}copy(lt,dt){return super.copy(lt,dt),this.groundColor.copy(lt.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(lt){this.camera=lt,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(lt){const dt=this.camera,vt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(lt.matrixWorld),dt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(lt.target.matrixWorld),dt.lookAt(_lookTarget$1),dt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(dt.projectionMatrix,dt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),vt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),vt.multiply(_projScreenMatrix$1)}getViewport(lt){return this._viewports[lt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(lt){return this.camera=lt.camera.clone(),this.bias=lt.bias,this.radius=lt.radius,this.mapSize.copy(lt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const lt={};return this.bias!==0&&(lt.bias=this.bias),this.normalBias!==0&&(lt.normalBias=this.normalBias),this.radius!==1&&(lt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(lt.mapSize=this.mapSize.toArray()),lt.camera=this.camera.toJSON(!1).object,delete lt.camera.matrix,lt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(lt){const dt=this.camera,vt=RAD2DEG*2*lt.angle*this.focus,St=this.mapSize.width/this.mapSize.height,Et=lt.distance||dt.far;(vt!==dt.fov||St!==dt.aspect||Et!==dt.far)&&(dt.fov=vt,dt.aspect=St,dt.far=Et,dt.updateProjectionMatrix()),super.updateMatrices(lt)}copy(lt){return super.copy(lt),this.focus=lt.focus,this}}class SpotLight extends Light{constructor(lt,dt,vt=0,St=Math.PI/3,Et=0,Ct=2){super(lt,dt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=vt,this.angle=St,this.penumbra=Et,this.decay=Ct,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(lt){this.intensity=lt/Math.PI}dispose(){this.shadow.dispose()}copy(lt,dt){return super.copy(lt,dt),this.distance=lt.distance,this.angle=lt.angle,this.penumbra=lt.penumbra,this.decay=lt.decay,this.target=lt.target.clone(),this.shadow=lt.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(lt,dt=0){const vt=this.camera,St=this.matrix,Et=lt.distance||vt.far;Et!==vt.far&&(vt.far=Et,vt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(lt.matrixWorld),vt.position.copy(_lightPositionWorld),_lookTarget.copy(vt.position),_lookTarget.add(this._cubeDirections[dt]),vt.up.copy(this._cubeUps[dt]),vt.lookAt(_lookTarget),vt.updateMatrixWorld(),St.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(lt,dt,vt=0,St=2){super(lt,dt),this.isPointLight=!0,this.type="PointLight",this.distance=vt,this.decay=St,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(lt){this.intensity=lt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(lt,dt){return super.copy(lt,dt),this.distance=lt.distance,this.decay=lt.decay,this.shadow=lt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera$1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(lt,dt){super(lt,dt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(lt){return super.copy(lt),this.target=lt.target.clone(),this.shadow=lt.shadow.clone(),this}}class AmbientLight extends Light{constructor(lt,dt){super(lt,dt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(lt,dt,vt=10,St=10){super(lt,dt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=vt,this.height=St}get power(){return this.intensity*this.width*this.height*Math.PI}set power(lt){this.intensity=lt/(this.width*this.height*Math.PI)}copy(lt){return super.copy(lt),this.width=lt.width,this.height=lt.height,this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.width=this.width,dt.object.height=this.height,dt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let lt=0;lt<9;lt++)this.coefficients.push(new Vector3)}set(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].copy(lt[dt]);return this}zero(){for(let lt=0;lt<9;lt++)this.coefficients[lt].set(0,0,0);return this}getAt(lt,dt){const vt=lt.x,St=lt.y,Et=lt.z,Ct=this.coefficients;return dt.copy(Ct[0]).multiplyScalar(.282095),dt.addScaledVector(Ct[1],.488603*St),dt.addScaledVector(Ct[2],.488603*Et),dt.addScaledVector(Ct[3],.488603*vt),dt.addScaledVector(Ct[4],1.092548*(vt*St)),dt.addScaledVector(Ct[5],1.092548*(St*Et)),dt.addScaledVector(Ct[6],.315392*(3*Et*Et-1)),dt.addScaledVector(Ct[7],1.092548*(vt*Et)),dt.addScaledVector(Ct[8],.546274*(vt*vt-St*St)),dt}getIrradianceAt(lt,dt){const vt=lt.x,St=lt.y,Et=lt.z,Ct=this.coefficients;return dt.copy(Ct[0]).multiplyScalar(.886227),dt.addScaledVector(Ct[1],2*.511664*St),dt.addScaledVector(Ct[2],2*.511664*Et),dt.addScaledVector(Ct[3],2*.511664*vt),dt.addScaledVector(Ct[4],2*.429043*vt*St),dt.addScaledVector(Ct[5],2*.429043*St*Et),dt.addScaledVector(Ct[6],.743125*Et*Et-.247708),dt.addScaledVector(Ct[7],2*.429043*vt*Et),dt.addScaledVector(Ct[8],.429043*(vt*vt-St*St)),dt}add(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].add(lt.coefficients[dt]);return this}addScaledSH(lt,dt){for(let vt=0;vt<9;vt++)this.coefficients[vt].addScaledVector(lt.coefficients[vt],dt);return this}scale(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].multiplyScalar(lt);return this}lerp(lt,dt){for(let vt=0;vt<9;vt++)this.coefficients[vt].lerp(lt.coefficients[vt],dt);return this}equals(lt){for(let dt=0;dt<9;dt++)if(!this.coefficients[dt].equals(lt.coefficients[dt]))return!1;return!0}copy(lt){return this.set(lt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(lt,dt=0){const vt=this.coefficients;for(let St=0;St<9;St++)vt[St].fromArray(lt,dt+St*3);return this}toArray(lt=[],dt=0){const vt=this.coefficients;for(let St=0;St<9;St++)vt[St].toArray(lt,dt+St*3);return lt}static getBasisAt(lt,dt){const vt=lt.x,St=lt.y,Et=lt.z;dt[0]=.282095,dt[1]=.488603*St,dt[2]=.488603*Et,dt[3]=.488603*vt,dt[4]=1.092548*vt*St,dt[5]=1.092548*St*Et,dt[6]=.315392*(3*Et*Et-1),dt[7]=1.092548*vt*Et,dt[8]=.546274*(vt*vt-St*St)}}class LightProbe extends Light{constructor(lt=new SphericalHarmonics3,dt=1){super(void 0,dt),this.isLightProbe=!0,this.sh=lt}copy(lt){return super.copy(lt),this.sh.copy(lt.sh),this}fromJSON(lt){return this.intensity=lt.intensity,this.sh.fromArray(lt.sh),this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.sh=this.sh.toArray(),dt}}class MaterialLoader extends Loader{constructor(lt){super(lt),this.textures={}}load(lt,dt,vt,St){const Et=this,Ct=new FileLoader(Et.manager);Ct.setPath(Et.path),Ct.setRequestHeader(Et.requestHeader),Ct.setWithCredentials(Et.withCredentials),Ct.load(lt,function(At){try{dt(Et.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Et.manager.itemError(lt)}},vt,St)}parse(lt){const dt=this.textures;function vt(Et){return dt[Et]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Et),dt[Et]}const St=MaterialLoader.createMaterialFromType(lt.type);if(lt.uuid!==void 0&&(St.uuid=lt.uuid),lt.name!==void 0&&(St.name=lt.name),lt.color!==void 0&&St.color!==void 0&&St.color.setHex(lt.color),lt.roughness!==void 0&&(St.roughness=lt.roughness),lt.metalness!==void 0&&(St.metalness=lt.metalness),lt.sheen!==void 0&&(St.sheen=lt.sheen),lt.sheenColor!==void 0&&(St.sheenColor=new Color().setHex(lt.sheenColor)),lt.sheenRoughness!==void 0&&(St.sheenRoughness=lt.sheenRoughness),lt.emissive!==void 0&&St.emissive!==void 0&&St.emissive.setHex(lt.emissive),lt.specular!==void 0&&St.specular!==void 0&&St.specular.setHex(lt.specular),lt.specularIntensity!==void 0&&(St.specularIntensity=lt.specularIntensity),lt.specularColor!==void 0&&St.specularColor!==void 0&&St.specularColor.setHex(lt.specularColor),lt.shininess!==void 0&&(St.shininess=lt.shininess),lt.clearcoat!==void 0&&(St.clearcoat=lt.clearcoat),lt.clearcoatRoughness!==void 0&&(St.clearcoatRoughness=lt.clearcoatRoughness),lt.iridescence!==void 0&&(St.iridescence=lt.iridescence),lt.iridescenceIOR!==void 0&&(St.iridescenceIOR=lt.iridescenceIOR),lt.iridescenceThicknessRange!==void 0&&(St.iridescenceThicknessRange=lt.iridescenceThicknessRange),lt.transmission!==void 0&&(St.transmission=lt.transmission),lt.thickness!==void 0&&(St.thickness=lt.thickness),lt.attenuationDistance!==void 0&&(St.attenuationDistance=lt.attenuationDistance),lt.attenuationColor!==void 0&&St.attenuationColor!==void 0&&St.attenuationColor.setHex(lt.attenuationColor),lt.fog!==void 0&&(St.fog=lt.fog),lt.flatShading!==void 0&&(St.flatShading=lt.flatShading),lt.blending!==void 0&&(St.blending=lt.blending),lt.combine!==void 0&&(St.combine=lt.combine),lt.side!==void 0&&(St.side=lt.side),lt.shadowSide!==void 0&&(St.shadowSide=lt.shadowSide),lt.opacity!==void 0&&(St.opacity=lt.opacity),lt.transparent!==void 0&&(St.transparent=lt.transparent),lt.alphaTest!==void 0&&(St.alphaTest=lt.alphaTest),lt.depthTest!==void 0&&(St.depthTest=lt.depthTest),lt.depthWrite!==void 0&&(St.depthWrite=lt.depthWrite),lt.colorWrite!==void 0&&(St.colorWrite=lt.colorWrite),lt.stencilWrite!==void 0&&(St.stencilWrite=lt.stencilWrite),lt.stencilWriteMask!==void 0&&(St.stencilWriteMask=lt.stencilWriteMask),lt.stencilFunc!==void 0&&(St.stencilFunc=lt.stencilFunc),lt.stencilRef!==void 0&&(St.stencilRef=lt.stencilRef),lt.stencilFuncMask!==void 0&&(St.stencilFuncMask=lt.stencilFuncMask),lt.stencilFail!==void 0&&(St.stencilFail=lt.stencilFail),lt.stencilZFail!==void 0&&(St.stencilZFail=lt.stencilZFail),lt.stencilZPass!==void 0&&(St.stencilZPass=lt.stencilZPass),lt.wireframe!==void 0&&(St.wireframe=lt.wireframe),lt.wireframeLinewidth!==void 0&&(St.wireframeLinewidth=lt.wireframeLinewidth),lt.wireframeLinecap!==void 0&&(St.wireframeLinecap=lt.wireframeLinecap),lt.wireframeLinejoin!==void 0&&(St.wireframeLinejoin=lt.wireframeLinejoin),lt.rotation!==void 0&&(St.rotation=lt.rotation),lt.linewidth!==1&&(St.linewidth=lt.linewidth),lt.dashSize!==void 0&&(St.dashSize=lt.dashSize),lt.gapSize!==void 0&&(St.gapSize=lt.gapSize),lt.scale!==void 0&&(St.scale=lt.scale),lt.polygonOffset!==void 0&&(St.polygonOffset=lt.polygonOffset),lt.polygonOffsetFactor!==void 0&&(St.polygonOffsetFactor=lt.polygonOffsetFactor),lt.polygonOffsetUnits!==void 0&&(St.polygonOffsetUnits=lt.polygonOffsetUnits),lt.dithering!==void 0&&(St.dithering=lt.dithering),lt.alphaToCoverage!==void 0&&(St.alphaToCoverage=lt.alphaToCoverage),lt.premultipliedAlpha!==void 0&&(St.premultipliedAlpha=lt.premultipliedAlpha),lt.forceSinglePass!==void 0&&(St.forceSinglePass=lt.forceSinglePass),lt.visible!==void 0&&(St.visible=lt.visible),lt.toneMapped!==void 0&&(St.toneMapped=lt.toneMapped),lt.userData!==void 0&&(St.userData=lt.userData),lt.vertexColors!==void 0&&(typeof lt.vertexColors=="number"?St.vertexColors=lt.vertexColors>0:St.vertexColors=lt.vertexColors),lt.uniforms!==void 0)for(const Et in lt.uniforms){const Ct=lt.uniforms[Et];switch(St.uniforms[Et]={},Ct.type){case"t":St.uniforms[Et].value=vt(Ct.value);break;case"c":St.uniforms[Et].value=new Color().setHex(Ct.value);break;case"v2":St.uniforms[Et].value=new Vector2().fromArray(Ct.value);break;case"v3":St.uniforms[Et].value=new Vector3().fromArray(Ct.value);break;case"v4":St.uniforms[Et].value=new Vector4().fromArray(Ct.value);break;case"m3":St.uniforms[Et].value=new Matrix3().fromArray(Ct.value);break;case"m4":St.uniforms[Et].value=new Matrix4().fromArray(Ct.value);break;default:St.uniforms[Et].value=Ct.value}}if(lt.defines!==void 0&&(St.defines=lt.defines),lt.vertexShader!==void 0&&(St.vertexShader=lt.vertexShader),lt.fragmentShader!==void 0&&(St.fragmentShader=lt.fragmentShader),lt.glslVersion!==void 0&&(St.glslVersion=lt.glslVersion),lt.extensions!==void 0)for(const Et in lt.extensions)St.extensions[Et]=lt.extensions[Et];if(lt.size!==void 0&&(St.size=lt.size),lt.sizeAttenuation!==void 0&&(St.sizeAttenuation=lt.sizeAttenuation),lt.map!==void 0&&(St.map=vt(lt.map)),lt.matcap!==void 0&&(St.matcap=vt(lt.matcap)),lt.alphaMap!==void 0&&(St.alphaMap=vt(lt.alphaMap)),lt.bumpMap!==void 0&&(St.bumpMap=vt(lt.bumpMap)),lt.bumpScale!==void 0&&(St.bumpScale=lt.bumpScale),lt.normalMap!==void 0&&(St.normalMap=vt(lt.normalMap)),lt.normalMapType!==void 0&&(St.normalMapType=lt.normalMapType),lt.normalScale!==void 0){let Et=lt.normalScale;Array.isArray(Et)===!1&&(Et=[Et,Et]),St.normalScale=new Vector2().fromArray(Et)}return lt.displacementMap!==void 0&&(St.displacementMap=vt(lt.displacementMap)),lt.displacementScale!==void 0&&(St.displacementScale=lt.displacementScale),lt.displacementBias!==void 0&&(St.displacementBias=lt.displacementBias),lt.roughnessMap!==void 0&&(St.roughnessMap=vt(lt.roughnessMap)),lt.metalnessMap!==void 0&&(St.metalnessMap=vt(lt.metalnessMap)),lt.emissiveMap!==void 0&&(St.emissiveMap=vt(lt.emissiveMap)),lt.emissiveIntensity!==void 0&&(St.emissiveIntensity=lt.emissiveIntensity),lt.specularMap!==void 0&&(St.specularMap=vt(lt.specularMap)),lt.specularIntensityMap!==void 0&&(St.specularIntensityMap=vt(lt.specularIntensityMap)),lt.specularColorMap!==void 0&&(St.specularColorMap=vt(lt.specularColorMap)),lt.envMap!==void 0&&(St.envMap=vt(lt.envMap)),lt.envMapIntensity!==void 0&&(St.envMapIntensity=lt.envMapIntensity),lt.reflectivity!==void 0&&(St.reflectivity=lt.reflectivity),lt.refractionRatio!==void 0&&(St.refractionRatio=lt.refractionRatio),lt.lightMap!==void 0&&(St.lightMap=vt(lt.lightMap)),lt.lightMapIntensity!==void 0&&(St.lightMapIntensity=lt.lightMapIntensity),lt.aoMap!==void 0&&(St.aoMap=vt(lt.aoMap)),lt.aoMapIntensity!==void 0&&(St.aoMapIntensity=lt.aoMapIntensity),lt.gradientMap!==void 0&&(St.gradientMap=vt(lt.gradientMap)),lt.clearcoatMap!==void 0&&(St.clearcoatMap=vt(lt.clearcoatMap)),lt.clearcoatRoughnessMap!==void 0&&(St.clearcoatRoughnessMap=vt(lt.clearcoatRoughnessMap)),lt.clearcoatNormalMap!==void 0&&(St.clearcoatNormalMap=vt(lt.clearcoatNormalMap)),lt.clearcoatNormalScale!==void 0&&(St.clearcoatNormalScale=new Vector2().fromArray(lt.clearcoatNormalScale)),lt.iridescenceMap!==void 0&&(St.iridescenceMap=vt(lt.iridescenceMap)),lt.iridescenceThicknessMap!==void 0&&(St.iridescenceThicknessMap=vt(lt.iridescenceThicknessMap)),lt.transmissionMap!==void 0&&(St.transmissionMap=vt(lt.transmissionMap)),lt.thicknessMap!==void 0&&(St.thicknessMap=vt(lt.thicknessMap)),lt.sheenColorMap!==void 0&&(St.sheenColorMap=vt(lt.sheenColorMap)),lt.sheenRoughnessMap!==void 0&&(St.sheenRoughnessMap=vt(lt.sheenRoughnessMap)),St}setTextures(lt){return this.textures=lt,this}static createMaterialFromType(lt){const dt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new dt[lt]}}class LoaderUtils{static decodeText(lt){if(typeof TextDecoder<"u")return new TextDecoder().decode(lt);let dt="";for(let vt=0,St=lt.length;vt<St;vt++)dt+=String.fromCharCode(lt[vt]);try{return decodeURIComponent(escape(dt))}catch{return dt}}static extractUrlBase(lt){const dt=lt.lastIndexOf("/");return dt===-1?"./":lt.slice(0,dt+1)}static resolveURL(lt,dt){return typeof lt!="string"||lt===""?"":(/^https?:\/\//i.test(dt)&&/^\//.test(lt)&&(dt=dt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(lt)||/^data:.*,.*$/i.test(lt)||/^blob:.*$/i.test(lt)?lt:dt+lt)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(lt){return super.copy(lt),this.instanceCount=lt.instanceCount,this}toJSON(){const lt=super.toJSON();return lt.instanceCount=this.instanceCount,lt.isInstancedBufferGeometry=!0,lt}}class BufferGeometryLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=new FileLoader(Et.manager);Ct.setPath(Et.path),Ct.setRequestHeader(Et.requestHeader),Ct.setWithCredentials(Et.withCredentials),Ct.load(lt,function(At){try{dt(Et.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Et.manager.itemError(lt)}},vt,St)}parse(lt){const dt={},vt={};function St(Wt,Zt){if(dt[Zt]!==void 0)return dt[Zt];const cn=Wt.interleavedBuffers[Zt],hn=Et(Wt,cn.buffer),dn=getTypedArray(cn.type,hn),pn=new InterleavedBuffer(dn,cn.stride);return pn.uuid=cn.uuid,dt[Zt]=pn,pn}function Et(Wt,Zt){if(vt[Zt]!==void 0)return vt[Zt];const cn=Wt.arrayBuffers[Zt],hn=new Uint32Array(cn).buffer;return vt[Zt]=hn,hn}const Ct=lt.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,At=lt.data.index;if(At!==void 0){const Wt=getTypedArray(At.type,At.array);Ct.setIndex(new BufferAttribute(Wt,1))}const Rt=lt.data.attributes;for(const Wt in Rt){const Zt=Rt[Wt];let Kt;if(Zt.isInterleavedBufferAttribute){const cn=St(lt.data,Zt.data);Kt=new InterleavedBufferAttribute(cn,Zt.itemSize,Zt.offset,Zt.normalized)}else{const cn=getTypedArray(Zt.type,Zt.array),hn=Zt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;Kt=new hn(cn,Zt.itemSize,Zt.normalized)}Zt.name!==void 0&&(Kt.name=Zt.name),Zt.usage!==void 0&&Kt.setUsage(Zt.usage),Zt.updateRange!==void 0&&(Kt.updateRange.offset=Zt.updateRange.offset,Kt.updateRange.count=Zt.updateRange.count),Ct.setAttribute(Wt,Kt)}const Dt=lt.data.morphAttributes;if(Dt)for(const Wt in Dt){const Zt=Dt[Wt],Kt=[];for(let cn=0,hn=Zt.length;cn<hn;cn++){const dn=Zt[cn];let pn;if(dn.isInterleavedBufferAttribute){const gn=St(lt.data,dn.data);pn=new InterleavedBufferAttribute(gn,dn.itemSize,dn.offset,dn.normalized)}else{const gn=getTypedArray(dn.type,dn.array);pn=new BufferAttribute(gn,dn.itemSize,dn.normalized)}dn.name!==void 0&&(pn.name=dn.name),Kt.push(pn)}Ct.morphAttributes[Wt]=Kt}lt.data.morphTargetsRelative&&(Ct.morphTargetsRelative=!0);const Ft=lt.data.groups||lt.data.drawcalls||lt.data.offsets;if(Ft!==void 0)for(let Wt=0,Zt=Ft.length;Wt!==Zt;++Wt){const Kt=Ft[Wt];Ct.addGroup(Kt.start,Kt.count,Kt.materialIndex)}const Ut=lt.data.boundingSphere;if(Ut!==void 0){const Wt=new Vector3;Ut.center!==void 0&&Wt.fromArray(Ut.center),Ct.boundingSphere=new Sphere$1(Wt,Ut.radius)}return lt.name&&(Ct.name=lt.name),lt.userData&&(Ct.userData=lt.userData),Ct}}class ObjectLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=this.path===""?LoaderUtils.extractUrlBase(lt):this.path;this.resourcePath=this.resourcePath||Ct;const At=new FileLoader(this.manager);At.setPath(this.path),At.setRequestHeader(this.requestHeader),At.setWithCredentials(this.withCredentials),At.load(lt,function(Rt){let Dt=null;try{Dt=JSON.parse(Rt)}catch(Ft){St!==void 0&&St(Ft),console.error("THREE:ObjectLoader: Can't parse "+lt+".",Ft.message);return}const Nt=Dt.metadata;if(Nt===void 0||Nt.type===void 0||Nt.type.toLowerCase()==="geometry"){St!==void 0&&St(new Error("THREE.ObjectLoader: Can't load "+lt)),console.error("THREE.ObjectLoader: Can't load "+lt);return}Et.parse(Dt,dt)},vt,St)}async loadAsync(lt,dt){const vt=this,St=this.path===""?LoaderUtils.extractUrlBase(lt):this.path;this.resourcePath=this.resourcePath||St;const Et=new FileLoader(this.manager);Et.setPath(this.path),Et.setRequestHeader(this.requestHeader),Et.setWithCredentials(this.withCredentials);const Ct=await Et.loadAsync(lt,dt),At=JSON.parse(Ct),Rt=At.metadata;if(Rt===void 0||Rt.type===void 0||Rt.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+lt);return await vt.parseAsync(At)}parse(lt,dt){const vt=this.parseAnimations(lt.animations),St=this.parseShapes(lt.shapes),Et=this.parseGeometries(lt.geometries,St),Ct=this.parseImages(lt.images,function(){dt!==void 0&&dt(Dt)}),At=this.parseTextures(lt.textures,Ct),Rt=this.parseMaterials(lt.materials,At),Dt=this.parseObject(lt.object,Et,Rt,At,vt),Nt=this.parseSkeletons(lt.skeletons,Dt);if(this.bindSkeletons(Dt,Nt),dt!==void 0){let Ft=!1;for(const Ut in Ct)if(Ct[Ut].data instanceof HTMLImageElement){Ft=!0;break}Ft===!1&&dt(Dt)}return Dt}async parseAsync(lt){const dt=this.parseAnimations(lt.animations),vt=this.parseShapes(lt.shapes),St=this.parseGeometries(lt.geometries,vt),Et=await this.parseImagesAsync(lt.images),Ct=this.parseTextures(lt.textures,Et),At=this.parseMaterials(lt.materials,Ct),Rt=this.parseObject(lt.object,St,At,Ct,dt),Dt=this.parseSkeletons(lt.skeletons,Rt);return this.bindSkeletons(Rt,Dt),Rt}parseShapes(lt){const dt={};if(lt!==void 0)for(let vt=0,St=lt.length;vt<St;vt++){const Et=new Shape().fromJSON(lt[vt]);dt[Et.uuid]=Et}return dt}parseSkeletons(lt,dt){const vt={},St={};if(dt.traverse(function(Et){Et.isBone&&(St[Et.uuid]=Et)}),lt!==void 0)for(let Et=0,Ct=lt.length;Et<Ct;Et++){const At=new Skeleton().fromJSON(lt[Et],St);vt[At.uuid]=At}return vt}parseGeometries(lt,dt){const vt={};if(lt!==void 0){const St=new BufferGeometryLoader;for(let Et=0,Ct=lt.length;Et<Ct;Et++){let At;const Rt=lt[Et];switch(Rt.type){case"BufferGeometry":case"InstancedBufferGeometry":At=St.parse(Rt);break;default:Rt.type in Geometries?At=Geometries[Rt.type].fromJSON(Rt,dt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${Rt.type}"`)}At.uuid=Rt.uuid,Rt.name!==void 0&&(At.name=Rt.name),Rt.userData!==void 0&&(At.userData=Rt.userData),vt[Rt.uuid]=At}}return vt}parseMaterials(lt,dt){const vt={},St={};if(lt!==void 0){const Et=new MaterialLoader;Et.setTextures(dt);for(let Ct=0,At=lt.length;Ct<At;Ct++){const Rt=lt[Ct];vt[Rt.uuid]===void 0&&(vt[Rt.uuid]=Et.parse(Rt)),St[Rt.uuid]=vt[Rt.uuid]}}return St}parseAnimations(lt){const dt={};if(lt!==void 0)for(let vt=0;vt<lt.length;vt++){const St=lt[vt],Et=AnimationClip.parse(St);dt[Et.uuid]=Et}return dt}parseImages(lt,dt){const vt=this,St={};let Et;function Ct(Rt){return vt.manager.itemStart(Rt),Et.load(Rt,function(){vt.manager.itemEnd(Rt)},void 0,function(){vt.manager.itemError(Rt),vt.manager.itemEnd(Rt)})}function At(Rt){if(typeof Rt=="string"){const Dt=Rt,Nt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Dt)?Dt:vt.resourcePath+Dt;return Ct(Nt)}else return Rt.data?{data:getTypedArray(Rt.type,Rt.data),width:Rt.width,height:Rt.height}:null}if(lt!==void 0&&lt.length>0){const Rt=new LoadingManager(dt);Et=new ImageLoader(Rt),Et.setCrossOrigin(this.crossOrigin);for(let Dt=0,Nt=lt.length;Dt<Nt;Dt++){const Ft=lt[Dt],Ut=Ft.url;if(Array.isArray(Ut)){const Wt=[];for(let Zt=0,Kt=Ut.length;Zt<Kt;Zt++){const cn=Ut[Zt],hn=At(cn);hn!==null&&(hn instanceof HTMLImageElement?Wt.push(hn):Wt.push(new DataTexture(hn.data,hn.width,hn.height)))}St[Ft.uuid]=new Source(Wt)}else{const Wt=At(Ft.url);St[Ft.uuid]=new Source(Wt)}}}return St}async parseImagesAsync(lt){const dt=this,vt={};let St;async function Et(Ct){if(typeof Ct=="string"){const At=Ct,Rt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(At)?At:dt.resourcePath+At;return await St.loadAsync(Rt)}else return Ct.data?{data:getTypedArray(Ct.type,Ct.data),width:Ct.width,height:Ct.height}:null}if(lt!==void 0&&lt.length>0){St=new ImageLoader(this.manager),St.setCrossOrigin(this.crossOrigin);for(let Ct=0,At=lt.length;Ct<At;Ct++){const Rt=lt[Ct],Dt=Rt.url;if(Array.isArray(Dt)){const Nt=[];for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft++){const Wt=Dt[Ft],Zt=await Et(Wt);Zt!==null&&(Zt instanceof HTMLImageElement?Nt.push(Zt):Nt.push(new DataTexture(Zt.data,Zt.width,Zt.height)))}vt[Rt.uuid]=new Source(Nt)}else{const Nt=await Et(Rt.url);vt[Rt.uuid]=new Source(Nt)}}}return vt}parseTextures(lt,dt){function vt(Et,Ct){return typeof Et=="number"?Et:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Et),Ct[Et])}const St={};if(lt!==void 0)for(let Et=0,Ct=lt.length;Et<Ct;Et++){const At=lt[Et];At.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',At.uuid),dt[At.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",At.image);const Rt=dt[At.image],Dt=Rt.data;let Nt;Array.isArray(Dt)?(Nt=new CubeTexture,Dt.length===6&&(Nt.needsUpdate=!0)):(Dt&&Dt.data?Nt=new DataTexture:Nt=new Texture,Dt&&(Nt.needsUpdate=!0)),Nt.source=Rt,Nt.uuid=At.uuid,At.name!==void 0&&(Nt.name=At.name),At.mapping!==void 0&&(Nt.mapping=vt(At.mapping,TEXTURE_MAPPING)),At.offset!==void 0&&Nt.offset.fromArray(At.offset),At.repeat!==void 0&&Nt.repeat.fromArray(At.repeat),At.center!==void 0&&Nt.center.fromArray(At.center),At.rotation!==void 0&&(Nt.rotation=At.rotation),At.wrap!==void 0&&(Nt.wrapS=vt(At.wrap[0],TEXTURE_WRAPPING),Nt.wrapT=vt(At.wrap[1],TEXTURE_WRAPPING)),At.format!==void 0&&(Nt.format=At.format),At.internalFormat!==void 0&&(Nt.internalFormat=At.internalFormat),At.type!==void 0&&(Nt.type=At.type),At.encoding!==void 0&&(Nt.encoding=At.encoding),At.minFilter!==void 0&&(Nt.minFilter=vt(At.minFilter,TEXTURE_FILTER)),At.magFilter!==void 0&&(Nt.magFilter=vt(At.magFilter,TEXTURE_FILTER)),At.anisotropy!==void 0&&(Nt.anisotropy=At.anisotropy),At.flipY!==void 0&&(Nt.flipY=At.flipY),At.generateMipmaps!==void 0&&(Nt.generateMipmaps=At.generateMipmaps),At.premultiplyAlpha!==void 0&&(Nt.premultiplyAlpha=At.premultiplyAlpha),At.unpackAlignment!==void 0&&(Nt.unpackAlignment=At.unpackAlignment),At.userData!==void 0&&(Nt.userData=At.userData),St[At.uuid]=Nt}return St}parseObject(lt,dt,vt,St,Et){let Ct;function At(Ut){return dt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ut),dt[Ut]}function Rt(Ut){if(Ut!==void 0){if(Array.isArray(Ut)){const Wt=[];for(let Zt=0,Kt=Ut.length;Zt<Kt;Zt++){const cn=Ut[Zt];vt[cn]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",cn),Wt.push(vt[cn])}return Wt}return vt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ut),vt[Ut]}}function Dt(Ut){return St[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Ut),St[Ut]}let Nt,Ft;switch(lt.type){case"Scene":Ct=new Scene,lt.background!==void 0&&(Number.isInteger(lt.background)?Ct.background=new Color(lt.background):Ct.background=Dt(lt.background)),lt.environment!==void 0&&(Ct.environment=Dt(lt.environment)),lt.fog!==void 0&&(lt.fog.type==="Fog"?Ct.fog=new Fog(lt.fog.color,lt.fog.near,lt.fog.far):lt.fog.type==="FogExp2"&&(Ct.fog=new FogExp2(lt.fog.color,lt.fog.density))),lt.backgroundBlurriness!==void 0&&(Ct.backgroundBlurriness=lt.backgroundBlurriness),lt.backgroundIntensity!==void 0&&(Ct.backgroundIntensity=lt.backgroundIntensity);break;case"PerspectiveCamera":Ct=new PerspectiveCamera(lt.fov,lt.aspect,lt.near,lt.far),lt.focus!==void 0&&(Ct.focus=lt.focus),lt.zoom!==void 0&&(Ct.zoom=lt.zoom),lt.filmGauge!==void 0&&(Ct.filmGauge=lt.filmGauge),lt.filmOffset!==void 0&&(Ct.filmOffset=lt.filmOffset),lt.view!==void 0&&(Ct.view=Object.assign({},lt.view));break;case"OrthographicCamera":Ct=new OrthographicCamera$1(lt.left,lt.right,lt.top,lt.bottom,lt.near,lt.far),lt.zoom!==void 0&&(Ct.zoom=lt.zoom),lt.view!==void 0&&(Ct.view=Object.assign({},lt.view));break;case"AmbientLight":Ct=new AmbientLight(lt.color,lt.intensity);break;case"DirectionalLight":Ct=new DirectionalLight(lt.color,lt.intensity);break;case"PointLight":Ct=new PointLight(lt.color,lt.intensity,lt.distance,lt.decay);break;case"RectAreaLight":Ct=new RectAreaLight(lt.color,lt.intensity,lt.width,lt.height);break;case"SpotLight":Ct=new SpotLight(lt.color,lt.intensity,lt.distance,lt.angle,lt.penumbra,lt.decay);break;case"HemisphereLight":Ct=new HemisphereLight(lt.color,lt.groundColor,lt.intensity);break;case"LightProbe":Ct=new LightProbe().fromJSON(lt);break;case"SkinnedMesh":Nt=At(lt.geometry),Ft=Rt(lt.material),Ct=new SkinnedMesh(Nt,Ft),lt.bindMode!==void 0&&(Ct.bindMode=lt.bindMode),lt.bindMatrix!==void 0&&Ct.bindMatrix.fromArray(lt.bindMatrix),lt.skeleton!==void 0&&(Ct.skeleton=lt.skeleton);break;case"Mesh":Nt=At(lt.geometry),Ft=Rt(lt.material),Ct=new Mesh(Nt,Ft);break;case"InstancedMesh":Nt=At(lt.geometry),Ft=Rt(lt.material);const Ut=lt.count,Wt=lt.instanceMatrix,Zt=lt.instanceColor;Ct=new InstancedMesh(Nt,Ft,Ut),Ct.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Wt.array),16),Zt!==void 0&&(Ct.instanceColor=new InstancedBufferAttribute(new Float32Array(Zt.array),Zt.itemSize));break;case"LOD":Ct=new LOD;break;case"Line":Ct=new Line$2(At(lt.geometry),Rt(lt.material));break;case"LineLoop":Ct=new LineLoop(At(lt.geometry),Rt(lt.material));break;case"LineSegments":Ct=new LineSegments(At(lt.geometry),Rt(lt.material));break;case"PointCloud":case"Points":Ct=new Points(At(lt.geometry),Rt(lt.material));break;case"Sprite":Ct=new Sprite(Rt(lt.material));break;case"Group":Ct=new Group;break;case"Bone":Ct=new Bone;break;default:Ct=new Object3D}if(Ct.uuid=lt.uuid,lt.name!==void 0&&(Ct.name=lt.name),lt.matrix!==void 0?(Ct.matrix.fromArray(lt.matrix),lt.matrixAutoUpdate!==void 0&&(Ct.matrixAutoUpdate=lt.matrixAutoUpdate),Ct.matrixAutoUpdate&&Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale)):(lt.position!==void 0&&Ct.position.fromArray(lt.position),lt.rotation!==void 0&&Ct.rotation.fromArray(lt.rotation),lt.quaternion!==void 0&&Ct.quaternion.fromArray(lt.quaternion),lt.scale!==void 0&&Ct.scale.fromArray(lt.scale)),lt.castShadow!==void 0&&(Ct.castShadow=lt.castShadow),lt.receiveShadow!==void 0&&(Ct.receiveShadow=lt.receiveShadow),lt.shadow&&(lt.shadow.bias!==void 0&&(Ct.shadow.bias=lt.shadow.bias),lt.shadow.normalBias!==void 0&&(Ct.shadow.normalBias=lt.shadow.normalBias),lt.shadow.radius!==void 0&&(Ct.shadow.radius=lt.shadow.radius),lt.shadow.mapSize!==void 0&&Ct.shadow.mapSize.fromArray(lt.shadow.mapSize),lt.shadow.camera!==void 0&&(Ct.shadow.camera=this.parseObject(lt.shadow.camera))),lt.visible!==void 0&&(Ct.visible=lt.visible),lt.frustumCulled!==void 0&&(Ct.frustumCulled=lt.frustumCulled),lt.renderOrder!==void 0&&(Ct.renderOrder=lt.renderOrder),lt.userData!==void 0&&(Ct.userData=lt.userData),lt.layers!==void 0&&(Ct.layers.mask=lt.layers),lt.children!==void 0){const Ut=lt.children;for(let Wt=0;Wt<Ut.length;Wt++)Ct.add(this.parseObject(Ut[Wt],dt,vt,St,Et))}if(lt.animations!==void 0){const Ut=lt.animations;for(let Wt=0;Wt<Ut.length;Wt++){const Zt=Ut[Wt];Ct.animations.push(Et[Zt])}}if(lt.type==="LOD"){lt.autoUpdate!==void 0&&(Ct.autoUpdate=lt.autoUpdate);const Ut=lt.levels;for(let Wt=0;Wt<Ut.length;Wt++){const Zt=Ut[Wt],Kt=Ct.getObjectByProperty("uuid",Zt.object);Kt!==void 0&&Ct.addLevel(Kt,Zt.distance,Zt.hysteresis)}}return Ct}bindSkeletons(lt,dt){Object.keys(dt).length!==0&&lt.traverse(function(vt){if(vt.isSkinnedMesh===!0&&vt.skeleton!==void 0){const St=dt[vt.skeleton];St===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",vt.skeleton):vt.bind(St,vt.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(lt){super(lt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(lt){return this.options=lt,this}load(lt,dt,vt,St){lt===void 0&&(lt=""),this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=this,Ct=Cache.get(lt);if(Ct!==void 0)return Et.manager.itemStart(lt),setTimeout(function(){dt&&dt(Ct),Et.manager.itemEnd(lt)},0),Ct;const At={};At.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",At.headers=this.requestHeader,fetch(lt,At).then(function(Rt){return Rt.blob()}).then(function(Rt){return createImageBitmap(Rt,Object.assign(Et.options,{colorSpaceConversion:"none"}))}).then(function(Rt){Cache.add(lt,Rt),dt&&dt(Rt),Et.manager.itemEnd(lt)}).catch(function(Rt){St&&St(Rt),Et.manager.itemError(lt),Et.manager.itemEnd(lt)}),Et.manager.itemStart(lt)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(lt){_context=lt}}class AudioLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,St){const Et=this,Ct=new FileLoader(this.manager);Ct.setResponseType("arraybuffer"),Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load(lt,function(At){try{const Rt=At.slice(0);AudioContext.getContext().decodeAudioData(Rt,function(Nt){dt(Nt)})}catch(Rt){St?St(Rt):console.error(Rt),Et.manager.itemError(lt)}},vt,St)}}class HemisphereLightProbe extends LightProbe{constructor(lt,dt,vt=1){super(void 0,vt),this.isHemisphereLightProbe=!0;const St=new Color().set(lt),Et=new Color().set(dt),Ct=new Vector3(St.r,St.g,St.b),At=new Vector3(Et.r,Et.g,Et.b),Rt=Math.sqrt(Math.PI),Dt=Rt*Math.sqrt(.75);this.sh.coefficients[0].copy(Ct).add(At).multiplyScalar(Rt),this.sh.coefficients[1].copy(Ct).sub(At).multiplyScalar(Dt)}}class AmbientLightProbe extends LightProbe{constructor(lt,dt=1){super(void 0,dt),this.isAmbientLightProbe=!0;const vt=new Color().set(lt);this.sh.coefficients[0].set(vt.r,vt.g,vt.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(lt){const dt=this._cache;if(dt.focus!==lt.focus||dt.fov!==lt.fov||dt.aspect!==lt.aspect*this.aspect||dt.near!==lt.near||dt.far!==lt.far||dt.zoom!==lt.zoom||dt.eyeSep!==this.eyeSep){dt.focus=lt.focus,dt.fov=lt.fov,dt.aspect=lt.aspect*this.aspect,dt.near=lt.near,dt.far=lt.far,dt.zoom=lt.zoom,dt.eyeSep=this.eyeSep,_projectionMatrix.copy(lt.projectionMatrix);const St=dt.eyeSep/2,Et=St*dt.near/dt.focus,Ct=dt.near*Math.tan(DEG2RAD*dt.fov*.5)/dt.zoom;let At,Rt;_eyeLeft.elements[12]=-St,_eyeRight.elements[12]=St,At=-Ct*dt.aspect+Et,Rt=Ct*dt.aspect+Et,_projectionMatrix.elements[0]=2*dt.near/(Rt-At),_projectionMatrix.elements[8]=(Rt+At)/(Rt-At),this.cameraL.projectionMatrix.copy(_projectionMatrix),At=-Ct*dt.aspect-Et,Rt=Ct*dt.aspect-Et,_projectionMatrix.elements[0]=2*dt.near/(Rt-At),_projectionMatrix.elements[8]=(Rt+At)/(Rt-At),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(lt.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(lt.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(lt=!0){this.autoStart=lt,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let lt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const dt=now$2();lt=(dt-this.oldTime)/1e3,this.oldTime=dt,this.elapsedTime+=lt}return lt}}function now$2(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(lt){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=lt,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(lt){return this.gain.gain.setTargetAtTime(lt,this.context.currentTime,.01),this}updateMatrixWorld(lt){super.updateMatrixWorld(lt);const dt=this.context.listener,vt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),dt.positionX){const St=this.context.currentTime+this.timeDelta;dt.positionX.linearRampToValueAtTime(_position$1.x,St),dt.positionY.linearRampToValueAtTime(_position$1.y,St),dt.positionZ.linearRampToValueAtTime(_position$1.z,St),dt.forwardX.linearRampToValueAtTime(_orientation$1.x,St),dt.forwardY.linearRampToValueAtTime(_orientation$1.y,St),dt.forwardZ.linearRampToValueAtTime(_orientation$1.z,St),dt.upX.linearRampToValueAtTime(vt.x,St),dt.upY.linearRampToValueAtTime(vt.y,St),dt.upZ.linearRampToValueAtTime(vt.z,St)}else dt.setPosition(_position$1.x,_position$1.y,_position$1.z),dt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,vt.x,vt.y,vt.z)}}class Audio extends Object3D{constructor(lt){super(),this.type="Audio",this.listener=lt,this.context=lt.context,this.gain=this.context.createGain(),this.gain.connect(lt.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(lt){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=lt,this.connect(),this}setMediaElementSource(lt){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(lt),this.connect(),this}setMediaStreamSource(lt){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(lt),this.connect(),this}setBuffer(lt){return this.buffer=lt,this.sourceType="buffer",this.autoplay&&this.play(),this}play(lt=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+lt;const dt=this.context.createBufferSource();return dt.buffer=this.buffer,dt.loop=this.loop,dt.loopStart=this.loopStart,dt.loopEnd=this.loopEnd,dt.onended=this.onEnded.bind(this),dt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=dt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let lt=1,dt=this.filters.length;lt<dt;lt++)this.filters[lt-1].connect(this.filters[lt]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let lt=1,dt=this.filters.length;lt<dt;lt++)this.filters[lt-1].disconnect(this.filters[lt]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(lt){return lt||(lt=[]),this._connected===!0?(this.disconnect(),this.filters=lt.slice(),this.connect()):this.filters=lt.slice(),this}setDetune(lt){if(this.detune=lt,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(lt){return this.setFilters(lt?[lt]:[])}setPlaybackRate(lt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=lt,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(lt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=lt,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(lt){return this.loopStart=lt,this}setLoopEnd(lt){return this.loopEnd=lt,this}getVolume(){return this.gain.gain.value}setVolume(lt){return this.gain.gain.setTargetAtTime(lt,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(lt){super(lt),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(lt){return this.panner.refDistance=lt,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(lt){return this.panner.rolloffFactor=lt,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(lt){return this.panner.distanceModel=lt,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(lt){return this.panner.maxDistance=lt,this}setDirectionalCone(lt,dt,vt){return this.panner.coneInnerAngle=lt,this.panner.coneOuterAngle=dt,this.panner.coneOuterGain=vt,this}updateMatrixWorld(lt){if(super.updateMatrixWorld(lt),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const dt=this.panner;if(dt.positionX){const vt=this.context.currentTime+this.listener.timeDelta;dt.positionX.linearRampToValueAtTime(_position.x,vt),dt.positionY.linearRampToValueAtTime(_position.y,vt),dt.positionZ.linearRampToValueAtTime(_position.z,vt),dt.orientationX.linearRampToValueAtTime(_orientation.x,vt),dt.orientationY.linearRampToValueAtTime(_orientation.y,vt),dt.orientationZ.linearRampToValueAtTime(_orientation.z,vt)}else dt.setPosition(_position.x,_position.y,_position.z),dt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(lt,dt=2048){this.analyser=lt.context.createAnalyser(),this.analyser.fftSize=dt,this.data=new Uint8Array(this.analyser.frequencyBinCount),lt.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let lt=0;const dt=this.getFrequencyData();for(let vt=0;vt<dt.length;vt++)lt+=dt[vt];return lt/dt.length}}class PropertyMixer{constructor(lt,dt,vt){this.binding=lt,this.valueSize=vt;let St,Et,Ct;switch(dt){case"quaternion":St=this._slerp,Et=this._slerpAdditive,Ct=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(vt*6),this._workIndex=5;break;case"string":case"bool":St=this._select,Et=this._select,Ct=this._setAdditiveIdentityOther,this.buffer=new Array(vt*5);break;default:St=this._lerp,Et=this._lerpAdditive,Ct=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(vt*5)}this._mixBufferRegion=St,this._mixBufferRegionAdditive=Et,this._setIdentity=Ct,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(lt,dt){const vt=this.buffer,St=this.valueSize,Et=lt*St+St;let Ct=this.cumulativeWeight;if(Ct===0){for(let At=0;At!==St;++At)vt[Et+At]=vt[At];Ct=dt}else{Ct+=dt;const At=dt/Ct;this._mixBufferRegion(vt,Et,0,At,St)}this.cumulativeWeight=Ct}accumulateAdditive(lt){const dt=this.buffer,vt=this.valueSize,St=vt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(dt,St,0,lt,vt),this.cumulativeWeightAdditive+=lt}apply(lt){const dt=this.valueSize,vt=this.buffer,St=lt*dt+dt,Et=this.cumulativeWeight,Ct=this.cumulativeWeightAdditive,At=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Et<1){const Rt=dt*this._origIndex;this._mixBufferRegion(vt,St,Rt,1-Et,dt)}Ct>0&&this._mixBufferRegionAdditive(vt,St,this._addIndex*dt,1,dt);for(let Rt=dt,Dt=dt+dt;Rt!==Dt;++Rt)if(vt[Rt]!==vt[Rt+dt]){At.setValue(vt,St);break}}saveOriginalState(){const lt=this.binding,dt=this.buffer,vt=this.valueSize,St=vt*this._origIndex;lt.getValue(dt,St);for(let Et=vt,Ct=St;Et!==Ct;++Et)dt[Et]=dt[St+Et%vt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const lt=this.valueSize*3;this.binding.setValue(this.buffer,lt)}_setAdditiveIdentityNumeric(){const lt=this._addIndex*this.valueSize,dt=lt+this.valueSize;for(let vt=lt;vt<dt;vt++)this.buffer[vt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const lt=this._origIndex*this.valueSize,dt=this._addIndex*this.valueSize;for(let vt=0;vt<this.valueSize;vt++)this.buffer[dt+vt]=this.buffer[lt+vt]}_select(lt,dt,vt,St,Et){if(St>=.5)for(let Ct=0;Ct!==Et;++Ct)lt[dt+Ct]=lt[vt+Ct]}_slerp(lt,dt,vt,St){Quaternion.slerpFlat(lt,dt,lt,dt,lt,vt,St)}_slerpAdditive(lt,dt,vt,St,Et){const Ct=this._workIndex*Et;Quaternion.multiplyQuaternionsFlat(lt,Ct,lt,dt,lt,vt),Quaternion.slerpFlat(lt,dt,lt,dt,lt,Ct,St)}_lerp(lt,dt,vt,St,Et){const Ct=1-St;for(let At=0;At!==Et;++At){const Rt=dt+At;lt[Rt]=lt[Rt]*Ct+lt[vt+At]*St}}_lerpAdditive(lt,dt,vt,St,Et){for(let Ct=0;Ct!==Et;++Ct){const At=dt+Ct;lt[At]=lt[At]+lt[vt+Ct]*St}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(lt,dt,vt){const St=vt||PropertyBinding.parseTrackName(dt);this._targetGroup=lt,this._bindings=lt.subscribe_(dt,St)}getValue(lt,dt){this.bind();const vt=this._targetGroup.nCachedObjects_,St=this._bindings[vt];St!==void 0&&St.getValue(lt,dt)}setValue(lt,dt){const vt=this._bindings;for(let St=this._targetGroup.nCachedObjects_,Et=vt.length;St!==Et;++St)vt[St].setValue(lt,dt)}bind(){const lt=this._bindings;for(let dt=this._targetGroup.nCachedObjects_,vt=lt.length;dt!==vt;++dt)lt[dt].bind()}unbind(){const lt=this._bindings;for(let dt=this._targetGroup.nCachedObjects_,vt=lt.length;dt!==vt;++dt)lt[dt].unbind()}}class PropertyBinding{constructor(lt,dt,vt){this.path=dt,this.parsedPath=vt||PropertyBinding.parseTrackName(dt),this.node=PropertyBinding.findNode(lt,this.parsedPath.nodeName),this.rootNode=lt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(lt,dt,vt){return lt&&lt.isAnimationObjectGroup?new PropertyBinding.Composite(lt,dt,vt):new PropertyBinding(lt,dt,vt)}static sanitizeNodeName(lt){return lt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(lt){const dt=_trackRe.exec(lt);if(dt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+lt);const vt={nodeName:dt[2],objectName:dt[3],objectIndex:dt[4],propertyName:dt[5],propertyIndex:dt[6]},St=vt.nodeName&&vt.nodeName.lastIndexOf(".");if(St!==void 0&&St!==-1){const Et=vt.nodeName.substring(St+1);_supportedObjectNames.indexOf(Et)!==-1&&(vt.nodeName=vt.nodeName.substring(0,St),vt.objectName=Et)}if(vt.propertyName===null||vt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+lt);return vt}static findNode(lt,dt){if(dt===void 0||dt===""||dt==="."||dt===-1||dt===lt.name||dt===lt.uuid)return lt;if(lt.skeleton){const vt=lt.skeleton.getBoneByName(dt);if(vt!==void 0)return vt}if(lt.children){const vt=function(Et){for(let Ct=0;Ct<Et.length;Ct++){const At=Et[Ct];if(At.name===dt||At.uuid===dt)return At;const Rt=vt(At.children);if(Rt)return Rt}return null},St=vt(lt.children);if(St)return St}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(lt,dt){lt[dt]=this.targetObject[this.propertyName]}_getValue_array(lt,dt){const vt=this.resolvedProperty;for(let St=0,Et=vt.length;St!==Et;++St)lt[dt++]=vt[St]}_getValue_arrayElement(lt,dt){lt[dt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(lt,dt){this.resolvedProperty.toArray(lt,dt)}_setValue_direct(lt,dt){this.targetObject[this.propertyName]=lt[dt]}_setValue_direct_setNeedsUpdate(lt,dt){this.targetObject[this.propertyName]=lt[dt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(lt,dt){this.targetObject[this.propertyName]=lt[dt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(lt,dt){const vt=this.resolvedProperty;for(let St=0,Et=vt.length;St!==Et;++St)vt[St]=lt[dt++]}_setValue_array_setNeedsUpdate(lt,dt){const vt=this.resolvedProperty;for(let St=0,Et=vt.length;St!==Et;++St)vt[St]=lt[dt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(lt,dt){const vt=this.resolvedProperty;for(let St=0,Et=vt.length;St!==Et;++St)vt[St]=lt[dt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt]}_setValue_arrayElement_setNeedsUpdate(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(lt,dt){this.resolvedProperty.fromArray(lt,dt)}_setValue_fromArray_setNeedsUpdate(lt,dt){this.resolvedProperty.fromArray(lt,dt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(lt,dt){this.resolvedProperty.fromArray(lt,dt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(lt,dt){this.bind(),this.getValue(lt,dt)}_setValue_unbound(lt,dt){this.bind(),this.setValue(lt,dt)}bind(){let lt=this.node;const dt=this.parsedPath,vt=dt.objectName,St=dt.propertyName;let Et=dt.propertyIndex;if(lt||(lt=PropertyBinding.findNode(this.rootNode,dt.nodeName),this.node=lt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!lt){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(vt){let Dt=dt.objectIndex;switch(vt){case"materials":if(!lt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!lt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}lt=lt.material.materials;break;case"bones":if(!lt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}lt=lt.skeleton.bones;for(let Nt=0;Nt<lt.length;Nt++)if(lt[Nt].name===Dt){Dt=Nt;break}break;case"map":if("map"in lt){lt=lt.map;break}if(!lt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!lt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}lt=lt.material.map;break;default:if(lt[vt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}lt=lt[vt]}if(Dt!==void 0){if(lt[Dt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,lt);return}lt=lt[Dt]}}const Ct=lt[St];if(Ct===void 0){const Dt=dt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Dt+"."+St+" but it wasn't found.",lt);return}let At=this.Versioning.None;this.targetObject=lt,lt.needsUpdate!==void 0?At=this.Versioning.NeedsUpdate:lt.matrixWorldNeedsUpdate!==void 0&&(At=this.Versioning.MatrixWorldNeedsUpdate);let Rt=this.BindingType.Direct;if(Et!==void 0){if(St==="morphTargetInfluences"){if(!lt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!lt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}lt.morphTargetDictionary[Et]!==void 0&&(Et=lt.morphTargetDictionary[Et])}Rt=this.BindingType.ArrayElement,this.resolvedProperty=Ct,this.propertyIndex=Et}else Ct.fromArray!==void 0&&Ct.toArray!==void 0?(Rt=this.BindingType.HasFromToArray,this.resolvedProperty=Ct):Array.isArray(Ct)?(Rt=this.BindingType.EntireArray,this.resolvedProperty=Ct):this.propertyName=St;this.getValue=this.GetterByBindingType[Rt],this.setValue=this.SetterByBindingTypeAndVersioning[Rt][At]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const lt={};this._indicesByUUID=lt;for(let vt=0,St=arguments.length;vt!==St;++vt)lt[arguments[vt].uuid]=vt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const dt=this;this.stats={objects:{get total(){return dt._objects.length},get inUse(){return this.total-dt.nCachedObjects_}},get bindingsPerObject(){return dt._bindings.length}}}add(){const lt=this._objects,dt=this._indicesByUUID,vt=this._paths,St=this._parsedPaths,Et=this._bindings,Ct=Et.length;let At,Rt=lt.length,Dt=this.nCachedObjects_;for(let Nt=0,Ft=arguments.length;Nt!==Ft;++Nt){const Ut=arguments[Nt],Wt=Ut.uuid;let Zt=dt[Wt];if(Zt===void 0){Zt=Rt++,dt[Wt]=Zt,lt.push(Ut);for(let Kt=0,cn=Ct;Kt!==cn;++Kt)Et[Kt].push(new PropertyBinding(Ut,vt[Kt],St[Kt]))}else if(Zt<Dt){At=lt[Zt];const Kt=--Dt,cn=lt[Kt];dt[cn.uuid]=Zt,lt[Zt]=cn,dt[Wt]=Kt,lt[Kt]=Ut;for(let hn=0,dn=Ct;hn!==dn;++hn){const pn=Et[hn],gn=pn[Kt];let vn=pn[Zt];pn[Zt]=gn,vn===void 0&&(vn=new PropertyBinding(Ut,vt[hn],St[hn])),pn[Kt]=vn}}else lt[Zt]!==At&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Dt}remove(){const lt=this._objects,dt=this._indicesByUUID,vt=this._bindings,St=vt.length;let Et=this.nCachedObjects_;for(let Ct=0,At=arguments.length;Ct!==At;++Ct){const Rt=arguments[Ct],Dt=Rt.uuid,Nt=dt[Dt];if(Nt!==void 0&&Nt>=Et){const Ft=Et++,Ut=lt[Ft];dt[Ut.uuid]=Nt,lt[Nt]=Ut,dt[Dt]=Ft,lt[Ft]=Rt;for(let Wt=0,Zt=St;Wt!==Zt;++Wt){const Kt=vt[Wt],cn=Kt[Ft],hn=Kt[Nt];Kt[Nt]=cn,Kt[Ft]=hn}}}this.nCachedObjects_=Et}uncache(){const lt=this._objects,dt=this._indicesByUUID,vt=this._bindings,St=vt.length;let Et=this.nCachedObjects_,Ct=lt.length;for(let At=0,Rt=arguments.length;At!==Rt;++At){const Dt=arguments[At],Nt=Dt.uuid,Ft=dt[Nt];if(Ft!==void 0)if(delete dt[Nt],Ft<Et){const Ut=--Et,Wt=lt[Ut],Zt=--Ct,Kt=lt[Zt];dt[Wt.uuid]=Ft,lt[Ft]=Wt,dt[Kt.uuid]=Ut,lt[Ut]=Kt,lt.pop();for(let cn=0,hn=St;cn!==hn;++cn){const dn=vt[cn],pn=dn[Ut],gn=dn[Zt];dn[Ft]=pn,dn[Ut]=gn,dn.pop()}}else{const Ut=--Ct,Wt=lt[Ut];Ut>0&&(dt[Wt.uuid]=Ft),lt[Ft]=Wt,lt.pop();for(let Zt=0,Kt=St;Zt!==Kt;++Zt){const cn=vt[Zt];cn[Ft]=cn[Ut],cn.pop()}}}this.nCachedObjects_=Et}subscribe_(lt,dt){const vt=this._bindingsIndicesByPath;let St=vt[lt];const Et=this._bindings;if(St!==void 0)return Et[St];const Ct=this._paths,At=this._parsedPaths,Rt=this._objects,Dt=Rt.length,Nt=this.nCachedObjects_,Ft=new Array(Dt);St=Et.length,vt[lt]=St,Ct.push(lt),At.push(dt),Et.push(Ft);for(let Ut=Nt,Wt=Rt.length;Ut!==Wt;++Ut){const Zt=Rt[Ut];Ft[Ut]=new PropertyBinding(Zt,lt,dt)}return Ft}unsubscribe_(lt){const dt=this._bindingsIndicesByPath,vt=dt[lt];if(vt!==void 0){const St=this._paths,Et=this._parsedPaths,Ct=this._bindings,At=Ct.length-1,Rt=Ct[At],Dt=lt[At];dt[Dt]=vt,Ct[vt]=Rt,Ct.pop(),Et[vt]=Et[At],Et.pop(),St[vt]=St[At],St.pop()}}}class AnimationAction{constructor(lt,dt,vt=null,St=dt.blendMode){this._mixer=lt,this._clip=dt,this._localRoot=vt,this.blendMode=St;const Et=dt.tracks,Ct=Et.length,At=new Array(Ct),Rt={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let Dt=0;Dt!==Ct;++Dt){const Nt=Et[Dt].createInterpolant(null);At[Dt]=Nt,Nt.settings=Rt}this._interpolantSettings=Rt,this._interpolants=At,this._propertyBindings=new Array(Ct),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(lt){return this._startTime=lt,this}setLoop(lt,dt){return this.loop=lt,this.repetitions=dt,this}setEffectiveWeight(lt){return this.weight=lt,this._effectiveWeight=this.enabled?lt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(lt){return this._scheduleFading(lt,0,1)}fadeOut(lt){return this._scheduleFading(lt,1,0)}crossFadeFrom(lt,dt,vt){if(lt.fadeOut(dt),this.fadeIn(dt),vt){const St=this._clip.duration,Et=lt._clip.duration,Ct=Et/St,At=St/Et;lt.warp(1,Ct,dt),this.warp(At,1,dt)}return this}crossFadeTo(lt,dt,vt){return lt.crossFadeFrom(this,dt,vt)}stopFading(){const lt=this._weightInterpolant;return lt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(lt)),this}setEffectiveTimeScale(lt){return this.timeScale=lt,this._effectiveTimeScale=this.paused?0:lt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(lt){return this.timeScale=this._clip.duration/lt,this.stopWarping()}syncWith(lt){return this.time=lt.time,this.timeScale=lt.timeScale,this.stopWarping()}halt(lt){return this.warp(this._effectiveTimeScale,0,lt)}warp(lt,dt,vt){const St=this._mixer,Et=St.time,Ct=this.timeScale;let At=this._timeScaleInterpolant;At===null&&(At=St._lendControlInterpolant(),this._timeScaleInterpolant=At);const Rt=At.parameterPositions,Dt=At.sampleValues;return Rt[0]=Et,Rt[1]=Et+vt,Dt[0]=lt/Ct,Dt[1]=dt/Ct,this}stopWarping(){const lt=this._timeScaleInterpolant;return lt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(lt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(lt,dt,vt,St){if(!this.enabled){this._updateWeight(lt);return}const Et=this._startTime;if(Et!==null){const Rt=(lt-Et)*vt;Rt<0||vt===0?dt=0:(this._startTime=null,dt=vt*Rt)}dt*=this._updateTimeScale(lt);const Ct=this._updateTime(dt),At=this._updateWeight(lt);if(At>0){const Rt=this._interpolants,Dt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let Nt=0,Ft=Rt.length;Nt!==Ft;++Nt)Rt[Nt].evaluate(Ct),Dt[Nt].accumulateAdditive(At);break;case NormalAnimationBlendMode:default:for(let Nt=0,Ft=Rt.length;Nt!==Ft;++Nt)Rt[Nt].evaluate(Ct),Dt[Nt].accumulate(St,At)}}}_updateWeight(lt){let dt=0;if(this.enabled){dt=this.weight;const vt=this._weightInterpolant;if(vt!==null){const St=vt.evaluate(lt)[0];dt*=St,lt>vt.parameterPositions[1]&&(this.stopFading(),St===0&&(this.enabled=!1))}}return this._effectiveWeight=dt,dt}_updateTimeScale(lt){let dt=0;if(!this.paused){dt=this.timeScale;const vt=this._timeScaleInterpolant;if(vt!==null){const St=vt.evaluate(lt)[0];dt*=St,lt>vt.parameterPositions[1]&&(this.stopWarping(),dt===0?this.paused=!0:this.timeScale=dt)}}return this._effectiveTimeScale=dt,dt}_updateTime(lt){const dt=this._clip.duration,vt=this.loop;let St=this.time+lt,Et=this._loopCount;const Ct=vt===LoopPingPong;if(lt===0)return Et===-1?St:Ct&&(Et&1)===1?dt-St:St;if(vt===LoopOnce){Et===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(St>=dt)St=dt;else if(St<0)St=0;else{this.time=St;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=St,this._mixer.dispatchEvent({type:"finished",action:this,direction:lt<0?-1:1})}}else{if(Et===-1&&(lt>=0?(Et=0,this._setEndings(!0,this.repetitions===0,Ct)):this._setEndings(this.repetitions===0,!0,Ct)),St>=dt||St<0){const At=Math.floor(St/dt);St-=dt*At,Et+=Math.abs(At);const Rt=this.repetitions-Et;if(Rt<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,St=lt>0?dt:0,this.time=St,this._mixer.dispatchEvent({type:"finished",action:this,direction:lt>0?1:-1});else{if(Rt===1){const Dt=lt<0;this._setEndings(Dt,!Dt,Ct)}else this._setEndings(!1,!1,Ct);this._loopCount=Et,this.time=St,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:At})}}else this.time=St;if(Ct&&(Et&1)===1)return dt-St}return St}_setEndings(lt,dt,vt){const St=this._interpolantSettings;vt?(St.endingStart=ZeroSlopeEnding,St.endingEnd=ZeroSlopeEnding):(lt?St.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:St.endingStart=WrapAroundEnding,dt?St.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:St.endingEnd=WrapAroundEnding)}_scheduleFading(lt,dt,vt){const St=this._mixer,Et=St.time;let Ct=this._weightInterpolant;Ct===null&&(Ct=St._lendControlInterpolant(),this._weightInterpolant=Ct);const At=Ct.parameterPositions,Rt=Ct.sampleValues;return At[0]=Et,Rt[0]=dt,At[1]=Et+lt,Rt[1]=vt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(lt){super(),this._root=lt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(lt,dt){const vt=lt._localRoot||this._root,St=lt._clip.tracks,Et=St.length,Ct=lt._propertyBindings,At=lt._interpolants,Rt=vt.uuid,Dt=this._bindingsByRootAndName;let Nt=Dt[Rt];Nt===void 0&&(Nt={},Dt[Rt]=Nt);for(let Ft=0;Ft!==Et;++Ft){const Ut=St[Ft],Wt=Ut.name;let Zt=Nt[Wt];if(Zt!==void 0)++Zt.referenceCount,Ct[Ft]=Zt;else{if(Zt=Ct[Ft],Zt!==void 0){Zt._cacheIndex===null&&(++Zt.referenceCount,this._addInactiveBinding(Zt,Rt,Wt));continue}const Kt=dt&&dt._propertyBindings[Ft].binding.parsedPath;Zt=new PropertyMixer(PropertyBinding.create(vt,Wt,Kt),Ut.ValueTypeName,Ut.getValueSize()),++Zt.referenceCount,this._addInactiveBinding(Zt,Rt,Wt),Ct[Ft]=Zt}At[Ft].resultBuffer=Zt.buffer}}_activateAction(lt){if(!this._isActiveAction(lt)){if(lt._cacheIndex===null){const vt=(lt._localRoot||this._root).uuid,St=lt._clip.uuid,Et=this._actionsByClip[St];this._bindAction(lt,Et&&Et.knownActions[0]),this._addInactiveAction(lt,St,vt)}const dt=lt._propertyBindings;for(let vt=0,St=dt.length;vt!==St;++vt){const Et=dt[vt];Et.useCount++===0&&(this._lendBinding(Et),Et.saveOriginalState())}this._lendAction(lt)}}_deactivateAction(lt){if(this._isActiveAction(lt)){const dt=lt._propertyBindings;for(let vt=0,St=dt.length;vt!==St;++vt){const Et=dt[vt];--Et.useCount===0&&(Et.restoreOriginalState(),this._takeBackBinding(Et))}this._takeBackAction(lt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const lt=this;this.stats={actions:{get total(){return lt._actions.length},get inUse(){return lt._nActiveActions}},bindings:{get total(){return lt._bindings.length},get inUse(){return lt._nActiveBindings}},controlInterpolants:{get total(){return lt._controlInterpolants.length},get inUse(){return lt._nActiveControlInterpolants}}}}_isActiveAction(lt){const dt=lt._cacheIndex;return dt!==null&&dt<this._nActiveActions}_addInactiveAction(lt,dt,vt){const St=this._actions,Et=this._actionsByClip;let Ct=Et[dt];if(Ct===void 0)Ct={knownActions:[lt],actionByRoot:{}},lt._byClipCacheIndex=0,Et[dt]=Ct;else{const At=Ct.knownActions;lt._byClipCacheIndex=At.length,At.push(lt)}lt._cacheIndex=St.length,St.push(lt),Ct.actionByRoot[vt]=lt}_removeInactiveAction(lt){const dt=this._actions,vt=dt[dt.length-1],St=lt._cacheIndex;vt._cacheIndex=St,dt[St]=vt,dt.pop(),lt._cacheIndex=null;const Et=lt._clip.uuid,Ct=this._actionsByClip,At=Ct[Et],Rt=At.knownActions,Dt=Rt[Rt.length-1],Nt=lt._byClipCacheIndex;Dt._byClipCacheIndex=Nt,Rt[Nt]=Dt,Rt.pop(),lt._byClipCacheIndex=null;const Ft=At.actionByRoot,Ut=(lt._localRoot||this._root).uuid;delete Ft[Ut],Rt.length===0&&delete Ct[Et],this._removeInactiveBindingsForAction(lt)}_removeInactiveBindingsForAction(lt){const dt=lt._propertyBindings;for(let vt=0,St=dt.length;vt!==St;++vt){const Et=dt[vt];--Et.referenceCount===0&&this._removeInactiveBinding(Et)}}_lendAction(lt){const dt=this._actions,vt=lt._cacheIndex,St=this._nActiveActions++,Et=dt[St];lt._cacheIndex=St,dt[St]=lt,Et._cacheIndex=vt,dt[vt]=Et}_takeBackAction(lt){const dt=this._actions,vt=lt._cacheIndex,St=--this._nActiveActions,Et=dt[St];lt._cacheIndex=St,dt[St]=lt,Et._cacheIndex=vt,dt[vt]=Et}_addInactiveBinding(lt,dt,vt){const St=this._bindingsByRootAndName,Et=this._bindings;let Ct=St[dt];Ct===void 0&&(Ct={},St[dt]=Ct),Ct[vt]=lt,lt._cacheIndex=Et.length,Et.push(lt)}_removeInactiveBinding(lt){const dt=this._bindings,vt=lt.binding,St=vt.rootNode.uuid,Et=vt.path,Ct=this._bindingsByRootAndName,At=Ct[St],Rt=dt[dt.length-1],Dt=lt._cacheIndex;Rt._cacheIndex=Dt,dt[Dt]=Rt,dt.pop(),delete At[Et],Object.keys(At).length===0&&delete Ct[St]}_lendBinding(lt){const dt=this._bindings,vt=lt._cacheIndex,St=this._nActiveBindings++,Et=dt[St];lt._cacheIndex=St,dt[St]=lt,Et._cacheIndex=vt,dt[vt]=Et}_takeBackBinding(lt){const dt=this._bindings,vt=lt._cacheIndex,St=--this._nActiveBindings,Et=dt[St];lt._cacheIndex=St,dt[St]=lt,Et._cacheIndex=vt,dt[vt]=Et}_lendControlInterpolant(){const lt=this._controlInterpolants,dt=this._nActiveControlInterpolants++;let vt=lt[dt];return vt===void 0&&(vt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),vt.__cacheIndex=dt,lt[dt]=vt),vt}_takeBackControlInterpolant(lt){const dt=this._controlInterpolants,vt=lt.__cacheIndex,St=--this._nActiveControlInterpolants,Et=dt[St];lt.__cacheIndex=St,dt[St]=lt,Et.__cacheIndex=vt,dt[vt]=Et}clipAction(lt,dt,vt){const St=dt||this._root,Et=St.uuid;let Ct=typeof lt=="string"?AnimationClip.findByName(St,lt):lt;const At=Ct!==null?Ct.uuid:lt,Rt=this._actionsByClip[At];let Dt=null;if(vt===void 0&&(Ct!==null?vt=Ct.blendMode:vt=NormalAnimationBlendMode),Rt!==void 0){const Ft=Rt.actionByRoot[Et];if(Ft!==void 0&&Ft.blendMode===vt)return Ft;Dt=Rt.knownActions[0],Ct===null&&(Ct=Dt._clip)}if(Ct===null)return null;const Nt=new AnimationAction(this,Ct,dt,vt);return this._bindAction(Nt,Dt),this._addInactiveAction(Nt,At,Et),Nt}existingAction(lt,dt){const vt=dt||this._root,St=vt.uuid,Et=typeof lt=="string"?AnimationClip.findByName(vt,lt):lt,Ct=Et?Et.uuid:lt,At=this._actionsByClip[Ct];return At!==void 0&&At.actionByRoot[St]||null}stopAllAction(){const lt=this._actions,dt=this._nActiveActions;for(let vt=dt-1;vt>=0;--vt)lt[vt].stop();return this}update(lt){lt*=this.timeScale;const dt=this._actions,vt=this._nActiveActions,St=this.time+=lt,Et=Math.sign(lt),Ct=this._accuIndex^=1;for(let Dt=0;Dt!==vt;++Dt)dt[Dt]._update(St,lt,Et,Ct);const At=this._bindings,Rt=this._nActiveBindings;for(let Dt=0;Dt!==Rt;++Dt)At[Dt].apply(Ct);return this}setTime(lt){this.time=0;for(let dt=0;dt<this._actions.length;dt++)this._actions[dt].time=0;return this.update(lt)}getRoot(){return this._root}uncacheClip(lt){const dt=this._actions,vt=lt.uuid,St=this._actionsByClip,Et=St[vt];if(Et!==void 0){const Ct=Et.knownActions;for(let At=0,Rt=Ct.length;At!==Rt;++At){const Dt=Ct[At];this._deactivateAction(Dt);const Nt=Dt._cacheIndex,Ft=dt[dt.length-1];Dt._cacheIndex=null,Dt._byClipCacheIndex=null,Ft._cacheIndex=Nt,dt[Nt]=Ft,dt.pop(),this._removeInactiveBindingsForAction(Dt)}delete St[vt]}}uncacheRoot(lt){const dt=lt.uuid,vt=this._actionsByClip;for(const Ct in vt){const At=vt[Ct].actionByRoot,Rt=At[dt];Rt!==void 0&&(this._deactivateAction(Rt),this._removeInactiveAction(Rt))}const St=this._bindingsByRootAndName,Et=St[dt];if(Et!==void 0)for(const Ct in Et){const At=Et[Ct];At.restoreOriginalState(),this._removeInactiveBinding(At)}}uncacheAction(lt,dt){const vt=this.existingAction(lt,dt);vt!==null&&(this._deactivateAction(vt),this._removeInactiveAction(vt))}}class Uniform{constructor(lt){this.value=lt}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id$1=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id$1++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(lt){return this.uniforms.push(lt),this}remove(lt){const dt=this.uniforms.indexOf(lt);return dt!==-1&&this.uniforms.splice(dt,1),this}setName(lt){return this.name=lt,this}setUsage(lt){return this.usage=lt,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(lt){this.name=lt.name,this.usage=lt.usage;const dt=lt.uniforms;this.uniforms.length=0;for(let vt=0,St=dt.length;vt<St;vt++)this.uniforms.push(dt[vt].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(lt,dt,vt=1){super(lt,dt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=vt}copy(lt){return super.copy(lt),this.meshPerAttribute=lt.meshPerAttribute,this}clone(lt){const dt=super.clone(lt);return dt.meshPerAttribute=this.meshPerAttribute,dt}toJSON(lt){const dt=super.toJSON(lt);return dt.isInstancedInterleavedBuffer=!0,dt.meshPerAttribute=this.meshPerAttribute,dt}}class GLBufferAttribute{constructor(lt,dt,vt,St,Et){this.isGLBufferAttribute=!0,this.name="",this.buffer=lt,this.type=dt,this.itemSize=vt,this.elementSize=St,this.count=Et,this.version=0}set needsUpdate(lt){lt===!0&&this.version++}setBuffer(lt){return this.buffer=lt,this}setType(lt,dt){return this.type=lt,this.elementSize=dt,this}setItemSize(lt){return this.itemSize=lt,this}setCount(lt){return this.count=lt,this}}class Raycaster{constructor(lt,dt,vt=0,St=1/0){this.ray=new Ray(lt,dt),this.near=vt,this.far=St,this.camera=null,this.layers=new Layers$1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(lt,dt){this.ray.set(lt,dt)}setFromCamera(lt,dt){dt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(dt.matrixWorld),this.ray.direction.set(lt.x,lt.y,.5).unproject(dt).sub(this.ray.origin).normalize(),this.camera=dt):dt.isOrthographicCamera?(this.ray.origin.set(lt.x,lt.y,(dt.near+dt.far)/(dt.near-dt.far)).unproject(dt),this.ray.direction.set(0,0,-1).transformDirection(dt.matrixWorld),this.camera=dt):console.error("THREE.Raycaster: Unsupported camera type: "+dt.type)}intersectObject(lt,dt=!0,vt=[]){return intersectObject(lt,this,vt,dt),vt.sort(ascSort),vt}intersectObjects(lt,dt=!0,vt=[]){for(let St=0,Et=lt.length;St<Et;St++)intersectObject(lt[St],this,vt,dt);return vt.sort(ascSort),vt}}function ascSort(ft,lt){return ft.distance-lt.distance}function intersectObject(ft,lt,dt,vt){if(ft.layers.test(lt.layers)&&ft.raycast(lt,dt),vt===!0){const St=ft.children;for(let Et=0,Ct=St.length;Et<Ct;Et++)intersectObject(St[Et],lt,dt,!0)}}class Spherical{constructor(lt=1,dt=0,vt=0){return this.radius=lt,this.phi=dt,this.theta=vt,this}set(lt,dt,vt){return this.radius=lt,this.phi=dt,this.theta=vt,this}copy(lt){return this.radius=lt.radius,this.phi=lt.phi,this.theta=lt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(lt){return this.setFromCartesianCoords(lt.x,lt.y,lt.z)}setFromCartesianCoords(lt,dt,vt){return this.radius=Math.sqrt(lt*lt+dt*dt+vt*vt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(lt,vt),this.phi=Math.acos(clamp$1(dt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(lt=1,dt=0,vt=0){return this.radius=lt,this.theta=dt,this.y=vt,this}set(lt,dt,vt){return this.radius=lt,this.theta=dt,this.y=vt,this}copy(lt){return this.radius=lt.radius,this.theta=lt.theta,this.y=lt.y,this}setFromVector3(lt){return this.setFromCartesianCoords(lt.x,lt.y,lt.z)}setFromCartesianCoords(lt,dt,vt){return this.radius=Math.sqrt(lt*lt+vt*vt),this.theta=Math.atan2(lt,vt),this.y=dt,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(lt=new Vector2(1/0,1/0),dt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=lt,this.max=dt}set(lt,dt){return this.min.copy(lt),this.max.copy(dt),this}setFromPoints(lt){this.makeEmpty();for(let dt=0,vt=lt.length;dt<vt;dt++)this.expandByPoint(lt[dt]);return this}setFromCenterAndSize(lt,dt){const vt=_vector$4.copy(dt).multiplyScalar(.5);return this.min.copy(lt).sub(vt),this.max.copy(lt).add(vt),this}clone(){return new this.constructor().copy(this)}copy(lt){return this.min.copy(lt.min),this.max.copy(lt.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(lt){return this.isEmpty()?lt.set(0,0):lt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(lt){return this.isEmpty()?lt.set(0,0):lt.subVectors(this.max,this.min)}expandByPoint(lt){return this.min.min(lt),this.max.max(lt),this}expandByVector(lt){return this.min.sub(lt),this.max.add(lt),this}expandByScalar(lt){return this.min.addScalar(-lt),this.max.addScalar(lt),this}containsPoint(lt){return!(lt.x<this.min.x||lt.x>this.max.x||lt.y<this.min.y||lt.y>this.max.y)}containsBox(lt){return this.min.x<=lt.min.x&&lt.max.x<=this.max.x&&this.min.y<=lt.min.y&&lt.max.y<=this.max.y}getParameter(lt,dt){return dt.set((lt.x-this.min.x)/(this.max.x-this.min.x),(lt.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(lt){return!(lt.max.x<this.min.x||lt.min.x>this.max.x||lt.max.y<this.min.y||lt.min.y>this.max.y)}clampPoint(lt,dt){return dt.copy(lt).clamp(this.min,this.max)}distanceToPoint(lt){return this.clampPoint(lt,_vector$4).distanceTo(lt)}intersect(lt){return this.min.max(lt.min),this.max.min(lt.max),this.isEmpty()&&this.makeEmpty(),this}union(lt){return this.min.min(lt.min),this.max.max(lt.max),this}translate(lt){return this.min.add(lt),this.max.add(lt),this}equals(lt){return lt.min.equals(this.min)&&lt.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(lt=new Vector3,dt=new Vector3){this.start=lt,this.end=dt}set(lt,dt){return this.start.copy(lt),this.end.copy(dt),this}copy(lt){return this.start.copy(lt.start),this.end.copy(lt.end),this}getCenter(lt){return lt.addVectors(this.start,this.end).multiplyScalar(.5)}delta(lt){return lt.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(lt,dt){return this.delta(dt).multiplyScalar(lt).add(this.start)}closestPointToPointParameter(lt,dt){_startP.subVectors(lt,this.start),_startEnd.subVectors(this.end,this.start);const vt=_startEnd.dot(_startEnd);let Et=_startEnd.dot(_startP)/vt;return dt&&(Et=clamp$1(Et,0,1)),Et}closestPointToPoint(lt,dt,vt){const St=this.closestPointToPointParameter(lt,dt);return this.delta(vt).multiplyScalar(St).add(this.start)}applyMatrix4(lt){return this.start.applyMatrix4(lt),this.end.applyMatrix4(lt),this}equals(lt){return lt.start.equals(this.start)&&lt.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(lt,dt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=dt,this.type="SpotLightHelper";const vt=new BufferGeometry,St=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let Ct=0,At=1,Rt=32;Ct<Rt;Ct++,At++){const Dt=Ct/Rt*Math.PI*2,Nt=At/Rt*Math.PI*2;St.push(Math.cos(Dt),Math.sin(Dt),1,Math.cos(Nt),Math.sin(Nt),1)}vt.setAttribute("position",new Float32BufferAttribute(St,3));const Et=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(vt,Et),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const lt=this.light.distance?this.light.distance:1e3,dt=lt*Math.tan(this.light.angle);this.cone.scale.set(dt,dt,lt),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(lt){const dt=getBoneList(lt),vt=new BufferGeometry,St=[],Et=[],Ct=new Color(0,0,1),At=new Color(0,1,0);for(let Dt=0;Dt<dt.length;Dt++){const Nt=dt[Dt];Nt.parent&&Nt.parent.isBone&&(St.push(0,0,0),St.push(0,0,0),Et.push(Ct.r,Ct.g,Ct.b),Et.push(At.r,At.g,At.b))}vt.setAttribute("position",new Float32BufferAttribute(St,3)),vt.setAttribute("color",new Float32BufferAttribute(Et,3));const Rt=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(vt,Rt),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=lt,this.bones=dt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(lt){const dt=this.bones,vt=this.geometry,St=vt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let Et=0,Ct=0;Et<dt.length;Et++){const At=dt[Et];At.parent&&At.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,At.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),St.setXYZ(Ct,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,At.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),St.setXYZ(Ct+1,_vector$2.x,_vector$2.y,_vector$2.z),Ct+=2)}vt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(lt)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(ft){const lt=[];ft.isBone===!0&&lt.push(ft);for(let dt=0;dt<ft.children.length;dt++)lt.push.apply(lt,getBoneList(ft.children[dt]));return lt}class PointLightHelper extends Mesh{constructor(lt,dt,vt){const St=new SphereGeometry(dt,4,2),Et=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(St,Et),this.light=lt,this.color=vt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(lt,dt,vt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=vt,this.type="HemisphereLightHelper";const St=new OctahedronGeometry(dt);St.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const Et=St.getAttribute("position"),Ct=new Float32Array(Et.count*3);St.setAttribute("color",new BufferAttribute(Ct,3)),this.add(new Mesh(St,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const lt=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const dt=lt.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let vt=0,St=dt.count;vt<St;vt++){const Et=vt<St/2?_color1:_color2;dt.setXYZ(vt,Et.r,Et.g,Et.b)}dt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),lt.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(lt=10,dt=10,vt=4473924,St=8947848){vt=new Color(vt),St=new Color(St);const Et=dt/2,Ct=lt/dt,At=lt/2,Rt=[],Dt=[];for(let Ut=0,Wt=0,Zt=-At;Ut<=dt;Ut++,Zt+=Ct){Rt.push(-At,0,Zt,At,0,Zt),Rt.push(Zt,0,-At,Zt,0,At);const Kt=Ut===Et?vt:St;Kt.toArray(Dt,Wt),Wt+=3,Kt.toArray(Dt,Wt),Wt+=3,Kt.toArray(Dt,Wt),Wt+=3,Kt.toArray(Dt,Wt),Wt+=3}const Nt=new BufferGeometry;Nt.setAttribute("position",new Float32BufferAttribute(Rt,3)),Nt.setAttribute("color",new Float32BufferAttribute(Dt,3));const Ft=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Nt,Ft),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(lt=10,dt=16,vt=8,St=64,Et=4473924,Ct=8947848){Et=new Color(Et),Ct=new Color(Ct);const At=[],Rt=[];if(dt>1)for(let Ft=0;Ft<dt;Ft++){const Ut=Ft/dt*(Math.PI*2),Wt=Math.sin(Ut)*lt,Zt=Math.cos(Ut)*lt;At.push(0,0,0),At.push(Wt,0,Zt);const Kt=Ft&1?Et:Ct;Rt.push(Kt.r,Kt.g,Kt.b),Rt.push(Kt.r,Kt.g,Kt.b)}for(let Ft=0;Ft<vt;Ft++){const Ut=Ft&1?Et:Ct,Wt=lt-lt/vt*Ft;for(let Zt=0;Zt<St;Zt++){let Kt=Zt/St*(Math.PI*2),cn=Math.sin(Kt)*Wt,hn=Math.cos(Kt)*Wt;At.push(cn,0,hn),Rt.push(Ut.r,Ut.g,Ut.b),Kt=(Zt+1)/St*(Math.PI*2),cn=Math.sin(Kt)*Wt,hn=Math.cos(Kt)*Wt,At.push(cn,0,hn),Rt.push(Ut.r,Ut.g,Ut.b)}}const Dt=new BufferGeometry;Dt.setAttribute("position",new Float32BufferAttribute(At,3)),Dt.setAttribute("color",new Float32BufferAttribute(Rt,3));const Nt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Dt,Nt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(lt,dt,vt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=vt,this.type="DirectionalLightHelper",dt===void 0&&(dt=1);let St=new BufferGeometry;St.setAttribute("position",new Float32BufferAttribute([-dt,dt,0,dt,dt,0,dt,-dt,0,-dt,-dt,0,-dt,dt,0],3));const Et=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(St,Et),this.add(this.lightPlane),St=new BufferGeometry,St.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(St,Et),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector$e=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(lt){const dt=new BufferGeometry,vt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),St=[],Et=[],Ct={};At("n1","n2"),At("n2","n4"),At("n4","n3"),At("n3","n1"),At("f1","f2"),At("f2","f4"),At("f4","f3"),At("f3","f1"),At("n1","f1"),At("n2","f2"),At("n3","f3"),At("n4","f4"),At("p","n1"),At("p","n2"),At("p","n3"),At("p","n4"),At("u1","u2"),At("u2","u3"),At("u3","u1"),At("c","t"),At("p","c"),At("cn1","cn2"),At("cn3","cn4"),At("cf1","cf2"),At("cf3","cf4");function At(Zt,Kt){Rt(Zt),Rt(Kt)}function Rt(Zt){St.push(0,0,0),Et.push(0,0,0),Ct[Zt]===void 0&&(Ct[Zt]=[]),Ct[Zt].push(St.length/3-1)}dt.setAttribute("position",new Float32BufferAttribute(St,3)),dt.setAttribute("color",new Float32BufferAttribute(Et,3)),super(dt,vt),this.type="CameraHelper",this.camera=lt,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ct,this.update();const Dt=new Color(16755200),Nt=new Color(16711680),Ft=new Color(43775),Ut=new Color(16777215),Wt=new Color(3355443);this.setColors(Dt,Nt,Ft,Ut,Wt)}setColors(lt,dt,vt,St,Et){const At=this.geometry.getAttribute("color");At.setXYZ(0,lt.r,lt.g,lt.b),At.setXYZ(1,lt.r,lt.g,lt.b),At.setXYZ(2,lt.r,lt.g,lt.b),At.setXYZ(3,lt.r,lt.g,lt.b),At.setXYZ(4,lt.r,lt.g,lt.b),At.setXYZ(5,lt.r,lt.g,lt.b),At.setXYZ(6,lt.r,lt.g,lt.b),At.setXYZ(7,lt.r,lt.g,lt.b),At.setXYZ(8,lt.r,lt.g,lt.b),At.setXYZ(9,lt.r,lt.g,lt.b),At.setXYZ(10,lt.r,lt.g,lt.b),At.setXYZ(11,lt.r,lt.g,lt.b),At.setXYZ(12,lt.r,lt.g,lt.b),At.setXYZ(13,lt.r,lt.g,lt.b),At.setXYZ(14,lt.r,lt.g,lt.b),At.setXYZ(15,lt.r,lt.g,lt.b),At.setXYZ(16,lt.r,lt.g,lt.b),At.setXYZ(17,lt.r,lt.g,lt.b),At.setXYZ(18,lt.r,lt.g,lt.b),At.setXYZ(19,lt.r,lt.g,lt.b),At.setXYZ(20,lt.r,lt.g,lt.b),At.setXYZ(21,lt.r,lt.g,lt.b),At.setXYZ(22,lt.r,lt.g,lt.b),At.setXYZ(23,lt.r,lt.g,lt.b),At.setXYZ(24,dt.r,dt.g,dt.b),At.setXYZ(25,dt.r,dt.g,dt.b),At.setXYZ(26,dt.r,dt.g,dt.b),At.setXYZ(27,dt.r,dt.g,dt.b),At.setXYZ(28,dt.r,dt.g,dt.b),At.setXYZ(29,dt.r,dt.g,dt.b),At.setXYZ(30,dt.r,dt.g,dt.b),At.setXYZ(31,dt.r,dt.g,dt.b),At.setXYZ(32,vt.r,vt.g,vt.b),At.setXYZ(33,vt.r,vt.g,vt.b),At.setXYZ(34,vt.r,vt.g,vt.b),At.setXYZ(35,vt.r,vt.g,vt.b),At.setXYZ(36,vt.r,vt.g,vt.b),At.setXYZ(37,vt.r,vt.g,vt.b),At.setXYZ(38,St.r,St.g,St.b),At.setXYZ(39,St.r,St.g,St.b),At.setXYZ(40,Et.r,Et.g,Et.b),At.setXYZ(41,Et.r,Et.g,Et.b),At.setXYZ(42,Et.r,Et.g,Et.b),At.setXYZ(43,Et.r,Et.g,Et.b),At.setXYZ(44,Et.r,Et.g,Et.b),At.setXYZ(45,Et.r,Et.g,Et.b),At.setXYZ(46,Et.r,Et.g,Et.b),At.setXYZ(47,Et.r,Et.g,Et.b),At.setXYZ(48,Et.r,Et.g,Et.b),At.setXYZ(49,Et.r,Et.g,Et.b),At.needsUpdate=!0}update(){const lt=this.geometry,dt=this.pointMap,vt=1,St=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",dt,lt,_camera,0,0,-1),setPoint("t",dt,lt,_camera,0,0,1),setPoint("n1",dt,lt,_camera,-vt,-St,-1),setPoint("n2",dt,lt,_camera,vt,-St,-1),setPoint("n3",dt,lt,_camera,-vt,St,-1),setPoint("n4",dt,lt,_camera,vt,St,-1),setPoint("f1",dt,lt,_camera,-vt,-St,1),setPoint("f2",dt,lt,_camera,vt,-St,1),setPoint("f3",dt,lt,_camera,-vt,St,1),setPoint("f4",dt,lt,_camera,vt,St,1),setPoint("u1",dt,lt,_camera,vt*.7,St*1.1,-1),setPoint("u2",dt,lt,_camera,-vt*.7,St*1.1,-1),setPoint("u3",dt,lt,_camera,0,St*2,-1),setPoint("cf1",dt,lt,_camera,-vt,0,1),setPoint("cf2",dt,lt,_camera,vt,0,1),setPoint("cf3",dt,lt,_camera,0,-St,1),setPoint("cf4",dt,lt,_camera,0,St,1),setPoint("cn1",dt,lt,_camera,-vt,0,-1),setPoint("cn2",dt,lt,_camera,vt,0,-1),setPoint("cn3",dt,lt,_camera,0,-St,-1),setPoint("cn4",dt,lt,_camera,0,St,-1),lt.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(ft,lt,dt,vt,St,Et,Ct){_vector$e.set(St,Et,Ct).unproject(vt);const At=lt[ft];if(At!==void 0){const Rt=dt.getAttribute("position");for(let Dt=0,Nt=At.length;Dt<Nt;Dt++)Rt.setXYZ(At[Dt],_vector$e.x,_vector$e.y,_vector$e.z)}}const _box$4=new Box3;class BoxHelper extends LineSegments{constructor(lt,dt=16776960){const vt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),St=new Float32Array(8*3),Et=new BufferGeometry;Et.setIndex(new BufferAttribute(vt,1)),Et.setAttribute("position",new BufferAttribute(St,3)),super(Et,new LineBasicMaterial({color:dt,toneMapped:!1})),this.object=lt,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(lt){if(lt!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$4.setFromObject(this.object),_box$4.isEmpty())return;const dt=_box$4.min,vt=_box$4.max,St=this.geometry.attributes.position,Et=St.array;Et[0]=vt.x,Et[1]=vt.y,Et[2]=vt.z,Et[3]=dt.x,Et[4]=vt.y,Et[5]=vt.z,Et[6]=dt.x,Et[7]=dt.y,Et[8]=vt.z,Et[9]=vt.x,Et[10]=dt.y,Et[11]=vt.z,Et[12]=vt.x,Et[13]=vt.y,Et[14]=dt.z,Et[15]=dt.x,Et[16]=vt.y,Et[17]=dt.z,Et[18]=dt.x,Et[19]=dt.y,Et[20]=dt.z,Et[21]=vt.x,Et[22]=dt.y,Et[23]=dt.z,St.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(lt){return this.object=lt,this.update(),this}copy(lt,dt){return super.copy(lt,dt),this.object=lt.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(lt,dt=16776960){const vt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),St=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Et=new BufferGeometry;Et.setIndex(new BufferAttribute(vt,1)),Et.setAttribute("position",new Float32BufferAttribute(St,3)),super(Et,new LineBasicMaterial({color:dt,toneMapped:!1})),this.box=lt,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(lt){const dt=this.box;dt.isEmpty()||(dt.getCenter(this.position),dt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(lt))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor(lt,dt=1,vt=16776960){const St=vt,Et=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],Ct=new BufferGeometry;Ct.setAttribute("position",new Float32BufferAttribute(Et,3)),Ct.computeBoundingSphere(),super(Ct,new LineBasicMaterial({color:St,toneMapped:!1})),this.type="PlaneHelper",this.plane=lt,this.size=dt;const At=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],Rt=new BufferGeometry;Rt.setAttribute("position",new Float32BufferAttribute(At,3)),Rt.computeBoundingSphere(),this.add(new Mesh(Rt,new MeshBasicMaterial({color:St,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(lt){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(lt)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(lt=new Vector3(0,0,1),dt=new Vector3(0,0,0),vt=1,St=16776960,Et=vt*.2,Ct=Et*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(dt),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:St,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:St,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(lt),this.setLength(vt,Et,Ct)}setDirection(lt){if(lt.y>.99999)this.quaternion.set(0,0,0,1);else if(lt.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(lt.z,0,-lt.x).normalize();const dt=Math.acos(lt.y);this.quaternion.setFromAxisAngle(_axis,dt)}}setLength(lt,dt=lt*.2,vt=dt*.2){this.line.scale.set(1,Math.max(1e-4,lt-dt),1),this.line.updateMatrix(),this.cone.scale.set(vt,dt,vt),this.cone.position.y=lt,this.cone.updateMatrix()}setColor(lt){this.line.material.color.set(lt),this.cone.material.color.set(lt)}copy(lt){return super.copy(lt,!1),this.line.copy(lt.line),this.cone.copy(lt.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(lt=1){const dt=[0,0,0,lt,0,0,0,0,0,0,lt,0,0,0,0,0,0,lt],vt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],St=new BufferGeometry;St.setAttribute("position",new Float32BufferAttribute(dt,3)),St.setAttribute("color",new Float32BufferAttribute(vt,3));const Et=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(St,Et),this.type="AxesHelper"}setColors(lt,dt,vt){const St=new Color,Et=this.geometry.attributes.color.array;return St.set(lt),St.toArray(Et,0),St.toArray(Et,3),St.set(dt),St.toArray(Et,6),St.toArray(Et,9),St.set(vt),St.toArray(Et,12),St.toArray(Et,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(lt,dt){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(lt,dt),this}lineTo(lt,dt){return this.currentPath.lineTo(lt,dt),this}quadraticCurveTo(lt,dt,vt,St){return this.currentPath.quadraticCurveTo(lt,dt,vt,St),this}bezierCurveTo(lt,dt,vt,St,Et,Ct){return this.currentPath.bezierCurveTo(lt,dt,vt,St,Et,Ct),this}splineThru(lt){return this.currentPath.splineThru(lt),this}toShapes(lt){function dt(hn){const dn=[];for(let pn=0,gn=hn.length;pn<gn;pn++){const vn=hn[pn],bn=new Shape;bn.curves=vn.curves,dn.push(bn)}return dn}function vt(hn,dn){const pn=dn.length;let gn=!1;for(let vn=pn-1,bn=0;bn<pn;vn=bn++){let $n=dn[vn],Tn=dn[bn],In=Tn.x-$n.x,Pn=Tn.y-$n.y;if(Math.abs(Pn)>Number.EPSILON){if(Pn<0&&($n=dn[bn],In=-In,Tn=dn[vn],Pn=-Pn),hn.y<$n.y||hn.y>Tn.y)continue;if(hn.y===$n.y){if(hn.x===$n.x)return!0}else{const zn=Pn*(hn.x-$n.x)-In*(hn.y-$n.y);if(zn===0)return!0;if(zn<0)continue;gn=!gn}}else{if(hn.y!==$n.y)continue;if(Tn.x<=hn.x&&hn.x<=$n.x||$n.x<=hn.x&&hn.x<=Tn.x)return!0}}return gn}const St=ShapeUtils.isClockWise,Et=this.subPaths;if(Et.length===0)return[];let Ct,At,Rt;const Dt=[];if(Et.length===1)return At=Et[0],Rt=new Shape,Rt.curves=At.curves,Dt.push(Rt),Dt;let Nt=!St(Et[0].getPoints());Nt=lt?!Nt:Nt;const Ft=[],Ut=[];let Wt=[],Zt=0,Kt;Ut[Zt]=void 0,Wt[Zt]=[];for(let hn=0,dn=Et.length;hn<dn;hn++)At=Et[hn],Kt=At.getPoints(),Ct=St(Kt),Ct=lt?!Ct:Ct,Ct?(!Nt&&Ut[Zt]&&Zt++,Ut[Zt]={s:new Shape,p:Kt},Ut[Zt].s.curves=At.curves,Nt&&Zt++,Wt[Zt]=[]):Wt[Zt].push({h:At,p:Kt[0]});if(!Ut[0])return dt(Et);if(Ut.length>1){let hn=!1,dn=0;for(let pn=0,gn=Ut.length;pn<gn;pn++)Ft[pn]=[];for(let pn=0,gn=Ut.length;pn<gn;pn++){const vn=Wt[pn];for(let bn=0;bn<vn.length;bn++){const $n=vn[bn];let Tn=!0;for(let In=0;In<Ut.length;In++)vt($n.p,Ut[In].p)&&(pn!==In&&dn++,Tn?(Tn=!1,Ft[In].push($n)):hn=!0);Tn&&Ft[pn].push($n)}}dn>0&&hn===!1&&(Wt=Ft)}let cn;for(let hn=0,dn=Ut.length;hn<dn;hn++){Rt=Ut[hn].s,Dt.push(Rt),cn=Wt[hn];for(let pn=0,gn=cn.length;pn<gn;pn++)Rt.holes.push(cn[pn].h)}return Dt}}const _tables=_generateTables();function _generateTables(){const ft=new ArrayBuffer(4),lt=new Float32Array(ft),dt=new Uint32Array(ft),vt=new Uint32Array(512),St=new Uint32Array(512);for(let Rt=0;Rt<256;++Rt){const Dt=Rt-127;Dt<-27?(vt[Rt]=0,vt[Rt|256]=32768,St[Rt]=24,St[Rt|256]=24):Dt<-14?(vt[Rt]=1024>>-Dt-14,vt[Rt|256]=1024>>-Dt-14|32768,St[Rt]=-Dt-1,St[Rt|256]=-Dt-1):Dt<=15?(vt[Rt]=Dt+15<<10,vt[Rt|256]=Dt+15<<10|32768,St[Rt]=13,St[Rt|256]=13):Dt<128?(vt[Rt]=31744,vt[Rt|256]=64512,St[Rt]=24,St[Rt|256]=24):(vt[Rt]=31744,vt[Rt|256]=64512,St[Rt]=13,St[Rt|256]=13)}const Et=new Uint32Array(2048),Ct=new Uint32Array(64),At=new Uint32Array(64);for(let Rt=1;Rt<1024;++Rt){let Dt=Rt<<13,Nt=0;for(;!(Dt&8388608);)Dt<<=1,Nt-=8388608;Dt&=-8388609,Nt+=947912704,Et[Rt]=Dt|Nt}for(let Rt=1024;Rt<2048;++Rt)Et[Rt]=939524096+(Rt-1024<<13);for(let Rt=1;Rt<31;++Rt)Ct[Rt]=Rt<<23;Ct[31]=1199570944,Ct[32]=2147483648;for(let Rt=33;Rt<63;++Rt)Ct[Rt]=2147483648+(Rt-32<<23);Ct[63]=3347054592;for(let Rt=1;Rt<64;++Rt)Rt!==32&&(At[Rt]=1024);return{floatView:lt,uint32View:dt,baseTable:vt,shiftTable:St,mantissaTable:Et,exponentTable:Ct,offsetTable:At}}function toHalfFloat(ft){Math.abs(ft)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),ft=clamp$1(ft,-65504,65504),_tables.floatView[0]=ft;const lt=_tables.uint32View[0],dt=lt>>23&511;return _tables.baseTable[dt]+((lt&8388607)>>_tables.shiftTable[dt])}function fromHalfFloat(ft){const lt=ft>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[lt]+(ft&1023)]+_tables.exponentTable[lt],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat};class BoxBufferGeometry extends BoxGeometry{constructor(lt,dt,vt,St,Et,Ct){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(lt,dt,vt,St,Et,Ct)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(lt,dt,vt,St){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(lt,dt,vt,St)}}class CircleBufferGeometry extends CircleGeometry{constructor(lt,dt,vt,St){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(lt,dt,vt,St)}}class ConeBufferGeometry extends ConeGeometry{constructor(lt,dt,vt,St,Et,Ct,At){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(lt,dt,vt,St,Et,Ct,At)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(lt,dt,vt,St,Et,Ct,At,Rt){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(lt,dt,vt,St,Et,Ct,At,Rt)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(lt,dt){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(lt,dt)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(lt,dt){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(lt,dt)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(lt,dt){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(lt,dt)}}class LatheBufferGeometry extends LatheGeometry{constructor(lt,dt,vt,St){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(lt,dt,vt,St)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(lt,dt){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(lt,dt)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(lt,dt,vt,St){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(lt,dt,vt,St)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(lt,dt,vt,St){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(lt,dt,vt,St)}}class RingBufferGeometry extends RingGeometry{constructor(lt,dt,vt,St,Et,Ct){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(lt,dt,vt,St,Et,Ct)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(lt,dt){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(lt,dt)}}class SphereBufferGeometry extends SphereGeometry{constructor(lt,dt,vt,St,Et,Ct,At){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(lt,dt,vt,St,Et,Ct,At)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(lt,dt){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(lt,dt)}}class TorusBufferGeometry extends TorusGeometry{constructor(lt,dt,vt,St,Et){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(lt,dt,vt,St,Et)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(lt,dt,vt,St,Et,Ct){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(lt,dt,vt,St,Et,Ct)}}class TubeBufferGeometry extends TubeGeometry{constructor(lt,dt,vt,St,Et){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(lt,dt,vt,St,Et)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const r$5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers:Layers$1,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line:Line$2,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera:OrthographicCamera$1,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane:Plane$1,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere:Sphere$1,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));class Trajectory{constructor(lt){go(this,"duration");this.duration=lt}}class PolynomialTrajectory extends Trajectory{constructor(dt,vt){super(dt);go(this,"coefs");this.coefs=vt}evaluate(dt){const vt=new Vector3;return this.coefs.map((St,Et)=>{vt.addScaledVector(St,Math.pow(dt,Et))}),vt}}class CircleTrajectory extends Trajectory{constructor(dt,vt,St,Et=["X","Z"],Ct=2*Math.PI,At=!1){super(dt);go(this,"radius");go(this,"axes");go(this,"radians");go(this,"clockwise");go(this,"pos");this.radius=St,this.axes=Et,this.radians=Ct,this.clockwise=At,this.pos=vt}evaluate(dt){let vt=1;this.clockwise&&(vt=-1);const St=(this.radius*Math.cos(dt*this.radians)-1)*vt,Et=this.radius*-Math.sin(dt*this.radians)*vt;var Ct=this.pos.x,At=this.pos.y,Rt=this.pos.z;return this.axes.some(Dt=>Dt==="X")?Ct=St+this.pos.x:At=St+this.pos.y,this.axes.some(Dt=>Dt==="Z")?Rt=Et+this.pos.z:At=Et+this.pos.y,new Vector3(Ct,At,Rt)}}const FPS=60,defaultSimulatorState={robots:{},time:0,timeDilation:1,status:"STOPPED"},nullTrajectory=new PolynomialTrajectory(-1,[]),SIMULATOR_TIMEOUTS=[],useSimulator=create$2()(immer((set,get)=>({...defaultSimulatorState,play:()=>{set({status:"RUNNING",time:0}),get().executeSimulation(0)},pause:()=>{set({status:"PAUSED"}),get().cancelSimulation()},resume:()=>{set({status:"RUNNING"}),get().executeSimulation(get().time)},halt:()=>{set({status:"STOPPED"}),get().cancelSimulation()},step:()=>{const{status:ft,time:lt,timeDilation:dt,robots:vt}=get();if(ft!=="RUNNING")return;const St=1/(FPS*dt),Et=lt+St,Ct={...vt};Object.keys(Ct).forEach(At=>{var Ut;const Rt=Ct[At];if(Rt.trajectory===null||Rt.trajectory.duration<0)return;const Dt=Rt.timeAlongTrajectory+St/Rt.trajectoryDuration,Nt=Rt.trajectory.evaluate(Dt),Ft=Nt.clone().sub(Rt.pos);Ct[At]={...Ct[At],pos:Nt,boundingBox:(Ut=Rt.boundingBox)==null?void 0:Ut.clone().translate(Ft),timeAlongTrajectory:Dt},Ct[At].timeAlongTrajectory>=1&&(Ct[At].trajectory=nullTrajectory,Ct[At].timeAlongTrajectory=0)}),set({robots:Ct,time:Et})},setRobots:ft=>{const lt={};Object.values(ft).forEach(dt=>{lt[dt.id]={id:dt.id,boundingBox:void 0,pos:new Vector3(...dt.startingPosition),vel:new Vector3,acc:new Vector3,color:new Color(255,255,255),timeAlongTrajectory:0,trajectory:nullTrajectory,trajectoryDuration:0,trajectories:[]}}),set({robots:lt})},updateRobotBoundingBox:(ft,lt)=>{set(dt=>{dt.robots[ft].boundingBox=lt})},checkCollisions:ft=>{const lt=get().robots[ft],dt=Object.entries(get().robots);return lt.boundingBox===void 0?!1:dt.some(([vt,St])=>(vt!==ft&&St.boundingBox&&lt.boundingBox&&lt.boundingBox.intersectsBox(St.boundingBox),vt!==ft&&St.boundingBox&&lt.boundingBox&&lt.boundingBox.intersectsBox(St.boundingBox)))},updateTrajectory:(ft,lt,dt)=>{set(vt=>{vt.robots[ft].timeAlongTrajectory=0,vt.robots[ft].trajectory=lt,vt.robots[ft].trajectoryDuration=dt})},robotGoTo:(ft,lt,dt,vt)=>{const St=get().robots[ft],Et=St.pos.clone(),Ct=St.vel.clone(),At=St.acc.clone().multiplyScalar(.5),Rt=new Vector3,Dt=St.acc.clone().multiplyScalar(2).addScaledVector(vt,-1).addScaledVector(St.vel,8).addScaledVector(dt,6).addScaledVector(St.pos,14).addScaledVector(lt,-14).multiplyScalar(-2.5),Nt=St.acc.clone().multiplyScalar(10).addScaledVector(vt,-7).addScaledVector(St.vel,45).addScaledVector(dt,39).addScaledVector(St.pos,84).addScaledVector(lt,-84),Ft=St.acc.clone().multiplyScalar(-15).addScaledVector(vt,13).addScaledVector(St.vel,-72).addScaledVector(dt,-68).addScaledVector(St.pos,-140).addScaledVector(lt,140).multiplyScalar(.5),Ut=St.acc.clone().addScaledVector(vt,-1).addScaledVector(St.vel,5).addScaledVector(dt,5).addScaledVector(St.pos,10).addScaledVector(lt,-10).multiplyScalar(2);return new PolynomialTrajectory(1,[Et,Ct,At,Rt,Dt,Nt,Ft,Ut])},robotCircle:(ft,lt=1,dt=["Y","Z"],vt=2*Math.PI,St=!1)=>{const Et=get().robots[ft];return new CircleTrajectory(1,Et.pos,lt,dt,vt,St)},executeSimulation:startTime=>{const timeline=useRobartState.getState().timelineState,blocks=useRobartState.getState().blocks,robartRobots=useRobartState.getState().robots;startTime===0&&get().setRobots(robartRobots),Object.values(timeline.groups).forEach(group=>{Object.keys(group.robots),Object.values(group.items).forEach(timelineItem=>{const offset=timelineItem.startTime-startTime;if(offset<0)return;const timeout=setTimeout(()=>{eval(blocks[timelineItem.blockId].javaScript)},timeline.scale*offset*1e3);SIMULATOR_TIMEOUTS.push(timeout)})})},cancelSimulation:()=>{for(SIMULATOR_TIMEOUTS.map(ft=>clearInterval(ft));SIMULATOR_TIMEOUTS.length>0;)SIMULATOR_TIMEOUTS.pop()}}))),defaultRobartState={blocks:{},projectName:"New Robart Project",timelineState:{scale:1,mode:"ADD",groups:{group1:{id:"group1",name:"Group 1",items:{},robots:{},duration:60},group2:{id:"group2",name:"Group 2",items:{},robots:{},duration:60},group3:{id:"group3",name:"Group 3",items:{},robots:{},duration:60},group4:{id:"group4",name:"Group 4",items:{},robots:{},duration:60},group5:{id:"group5",name:"Group 5",items:{},robots:{},duration:60}}},editingBlockId:void 0,version:ROBART_VERSION,robots:{}},useRobartState=create$2()(immer(subscribeWithSelector(persist((set,get)=>({...defaultRobartState,loadProject:ft=>{const lt=loadProjectFromFile(ft);set(lt)},saveProject:ft=>{const lt={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};saveProjectToFile(lt,ft)},exportToROS:ft=>{const lt={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};exportROS(lt)},resetProject:()=>{set(defaultRobartState)},setProjectName:ft=>set({projectName:ft}),saveGroup:(ft,lt)=>{},createGroup:ft=>{const lt=uuid$2(),dt={id:lt,name:ft,items:{},robots:{},duration:60};return set(vt=>{vt.timelineState.groups[lt]=dt}),lt},addBlockToTimeline:(groupId,blockId,startTime,isTrajectory)=>{Object.keys(get().timelineState.groups[groupId].robots);const state={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};Object.keys(get().timelineState.groups[groupId].items),state.timelineState.groups[groupId].items;var duration=0;eval(get().blocks[blockId].javaScript),duration=Math.max(.1,duration);const newItem={id:uuid$2(),groupId,blockId,startTime,isTrajectory,duration},oldItems={...get().timelineState.groups[groupId].items};oldItems[newItem.id]=newItem,set(ft=>{ft.timelineState.groups[groupId].items=oldItems})},updateBlockInTimeline:(ft,lt,dt)=>{const vt={...get().timelineState.groups[ft].items[lt],startTime:dt},St={...get().timelineState.groups[ft].items};St[vt.id]=vt,set(Et=>{Et.timelineState.groups[ft].items=St})},saveBlock:(ft,lt)=>{get().blocks[ft]!==void 0&&set(dt=>{dt.blocks[ft]={...dt.blocks[ft],...lt}})},removeBlock:ft=>{var St;const lt=Object.fromEntries(Object.entries(get().blocks).filter(([Et,Ct])=>Et!==ft));Object.values(get().timelineState.groups).map(Et=>Object.values(Et.items).filter(Ct=>Ct.blockId===ft)).flat().forEach(Et=>get().removeTimelineItem(Et.groupId,Et.id));const vt=(St=Object.values(lt).at(-1))==null?void 0:St.id;set({blocks:lt,editingBlockId:vt})},renameBlock:ft=>set(lt=>{lt.blocks[lt.editingBlockId].name=ft}),createBlock:ft=>{const lt={id:uuid$2(),name:ft,xml:"",python:"",javaScript:"",duration:3};return set(dt=>{dt.blocks[lt.id]=lt}),lt.id},copyBlock:ft=>{const lt={...get().blocks[ft],id:uuid$2(),name:`Copy of ${get().blocks[ft].name}`};return set(dt=>{dt.blocks[lt.id]=lt}),lt.id},setDuration:(ft,lt)=>{set(dt=>{dt.blocks[ft].duration=lt})},setEditingBlock:ft=>{const lt=get().editingBlockId;set({editingBlockId:void 0}),ft!=lt&&set({editingBlockId:ft})},addRobotToGroup:(ft,lt)=>{set(dt=>{dt.timelineState.groups[ft].robots[lt]=dt.robots[lt]})},removeRobotFromGroup:(ft,lt)=>{set(dt=>{delete dt.timelineState.groups[ft].robots[lt]})},createRobot:()=>{const ft=uuid$2(),lt=Object.keys(get().robots).length;return set(dt=>{dt.robots[ft]={id:ft,name:`CF ${lt}`,type:"crazyflie",startingPosition:[0,0,0]}}),ft},saveRobot:(ft,lt)=>{set(dt=>{dt.robots[ft]={...dt.robots[ft],...lt}})},deleteRobot:ft=>{const lt={...get().robots};delete lt[ft],set({robots:lt})},setTimelineMode:ft=>{set({timelineState:{...get().timelineState,mode:ft}})},removeTimelineItem:(ft,lt)=>{const dt={...get().timelineState.groups[ft].items};delete dt[lt],set(vt=>{vt.timelineState.groups[ft].items=dt})}}),{storage:createJSONStorage(()=>sessionStorage),name:"robartState"}))));useRobartState.subscribe(ft=>ft.robots,ft=>{useSimulator.getState().setRobots(ft)});function debounce$1(ft,lt){var dt=null,vt=null,St=function(){for(var Ct=[],At=0;At<arguments.length;At++)Ct[At]=arguments[At];vt=function(){dt=null,ft.apply(void 0,Ct)},clearTimeout(dt),dt=setTimeout(vt,lt)},Et=function(){dt!==null&&(clearTimeout(dt),vt())};return[St,Et]}var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(ft){for(var lt,dt=1,vt=arguments.length;dt<vt;dt++){lt=arguments[dt];for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])}return ft},__assign$1.apply(this,arguments)};function importFromXml(ft,lt,dt){try{return Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(ft),lt),!0}catch(vt){return dt&&dt(vt),!1}}var useBlocklyWorkspace=function(ft){var lt=ft.ref,dt=ft.initialXml,vt=ft.toolboxConfiguration,St=ft.workspaceConfiguration,Et=ft.onWorkspaceChange,Ct=ft.onImportXmlError,At=ft.onInject,Rt=ft.onDispose,Dt=React.useState(null),Nt=Dt[0],Ft=Dt[1],Ut=React.useState(dt),Wt=Ut[0],Zt=Ut[1],Kt=React.useState(!1),cn=Kt[0],hn=Kt[1],dn=React.useState(!1),pn=dn[0],gn=dn[1],vn=React.useRef(St);React.useEffect(function(){vn.current=St},[St]);var bn=React.useRef(vt);React.useEffect(function(){bn.current=vt,vt&&Nt&&Nt.updateToolbox(vt)},[vt,Nt]);var $n=React.useRef(At),Tn=React.useRef(Rt);React.useEffect(function(){$n.current=At},[At]),React.useEffect(function(){Tn.current=Rt},[Rt]);var In=React.useCallback(function(Pn){Et&&Et(Pn)},[Et]);return React.useEffect(function(){if(lt.current){var Pn=Blockly.inject(lt.current,__assign$1(__assign$1({},vn.current),{toolbox:bn.current}));Ft(Pn),hn(!1),gn(!1),$n.current&&$n.current(Pn);var zn=Tn.current;return function(){Pn.dispose(),zn&&zn(Pn)}}},[lt]),React.useEffect(function(){Nt&&!pn&&In(Nt)},[In,pn,Nt]),React.useEffect(function(){if(Nt!=null){var Pn=function(){In(Nt)};return Nt.addChangeListener(Pn),function(){Nt.removeChangeListener(Pn)}}},[Nt,In]),React.useEffect(function(){if(Nt!=null){var Pn=debounce$1(function(){var Gn=Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(Nt));Gn!==Wt&&Zt(Gn)},200),zn=Pn[0],An=Pn[1];return Nt.addChangeListener(zn),function(){Nt.removeChangeListener(zn),An()}}},[Nt,Wt]),React.useEffect(function(){if(Wt&&Nt&&!cn){var Pn=importFromXml(Wt,Nt,Ct);Pn||Zt(null),hn(!0)}},[Wt,Nt,cn,Ct]),{workspace:Nt,xml:Wt}},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function ft(vt,St,Et,Ct,At,Rt){if(Rt!==ReactPropTypesSecret){var Dt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Dt.name="Invariant Violation",Dt}}ft.isRequired=ft;function lt(){return ft}var dt={array:ft,bigint:ft,bool:ft,func:ft,number:ft,object:ft,string:ft,symbol:ft,any:ft,arrayOf:lt,element:ft,elementType:ft,instanceOf:lt,node:ft,objectOf:lt,oneOf:lt,oneOfType:lt,shape:lt,exact:lt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return dt.PropTypes=dt,dt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);PropTypes.string,PropTypes.object,PropTypes.object,PropTypes.string,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func;function r$4(ft){var lt,dt,vt="";if(typeof ft=="string"||typeof ft=="number")vt+=ft;else if(typeof ft=="object")if(Array.isArray(ft))for(lt=0;lt<ft.length;lt++)ft[lt]&&(dt=r$4(ft[lt]))&&(vt&&(vt+=" "),vt+=dt);else for(lt in ft)ft[lt]&&(vt&&(vt+=" "),vt+=lt);return vt}function clsx(){for(var ft,lt,dt=0,vt="";dt<arguments.length;)(ft=arguments[dt++])&&(lt=r$4(ft))&&(vt&&(vt+=" "),vt+=lt);return vt}const RenamableText=({text:ft,updateText:lt,className:dt})=>{const[vt,St]=reactExports.useState(!1),[Et,Ct]=reactExports.useState(""),[At,Rt]=reactExports.useState(0),Dt=reactExports.useRef(null);reactExports.useEffect(()=>{var Ft;Dt.current!==null&&Rt((Ft=Dt.current)==null?void 0:Ft.offsetWidth)},[Et]);const Nt="h-min w-fit rounded-md border-2 border-white hover:border-black";return vt?jsxs("form",{onSubmit:Ft=>{Ft.preventDefault(),lt(Et),St(!1)},children:[jsx("span",{className:clsx(Nt,dt,"absolute -z-40 whitespace-pre"),ref:Dt,children:Et}),jsx("input",{className:clsx(Nt,dt),value:Et,style:{width:`calc(${At}px + 1ch)`},onChange:Ft=>Ct(Ft.target.value),onBlur:()=>St(!1),autoFocus:!0}),jsx("input",{type:"submit",className:"hidden"})]}):jsx("h2",{className:clsx(Nt,dt),onClick:()=>{Ct(ft),St(!0)},children:ft})},BlockEditorHeader=()=>{const ft=useRobartState(vt=>vt.editingBlockId),lt=useRobartState(vt=>vt.blocks[ft??""]),dt=useRobartState(vt=>vt.renameBlock);return lt?jsx("div",{className:"m-2 flex items-center gap-2",children:jsx(RenamableText,{text:lt.name,className:"text-lg font-bold",updateText:vt=>{dt(vt!==""?vt:"New Block")}})}):jsx("div",{className:"h-full w-full text-3xl font-bold flex justify-center items-center",children:"No Block Selected."})},BlockEditorPanel=()=>{const ft=useRobartState(At=>At.editingBlockId),lt=useRobartState(At=>At.saveBlock),dt=reactExports.useRef(null),[vt,St]=reactExports.useState(),{workspace:Et,xml:Ct}=useBlocklyWorkspace({toolboxConfiguration:blocklyToolboxConfiguration,initialXml:"",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:At=>{const Rt=pythonExports.pythonGenerator.workspaceToCode(At),Dt=javascriptExports.javascriptGenerator.workspaceToCode(At);vt&&Ct&&lt(vt,{xml:Ct,python:Rt,javaScript:Dt})},ref:dt});return reactExports.useEffect(()=>{if(window.dispatchEvent(new Event("resize")),!!Et)if(St(ft),ft){Et.setVisible(!0);const Rt=useRobartState.getState().blocks[ft];if(Rt.xml){var At=Blockly.Xml.textToDom(Rt.xml);Blockly.Xml.clearWorkspaceAndLoadFromXml(At,Et)}else Rt.xml||Et.clear()}else Et.setVisible(!1),Et.clear()},[ft]),jsxs("div",{className:"flex h-full w-full flex-col",children:[jsx(BlockEditorHeader,{}),jsx("div",{ref:dt,className:"w-full flex-grow"})]})};function ownKeys$4(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ft,St).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2$2(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$4(Object(dt),!0).forEach(function(vt){_defineProperty$5(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$4(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _typeof$2(ft){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof$2(ft)}function _classCallCheck(ft,lt){if(!(ft instanceof lt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(ft,lt){for(var dt=0;dt<lt.length;dt++){var vt=lt[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(ft,vt.key,vt)}}function _createClass(ft,lt,dt){return lt&&_defineProperties(ft.prototype,lt),dt&&_defineProperties(ft,dt),Object.defineProperty(ft,"prototype",{writable:!1}),ft}function _defineProperty$5(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _slicedToArray$2(ft,lt){return _arrayWithHoles$2(ft)||_iterableToArrayLimit$2(ft,lt)||_unsupportedIterableToArray$3(ft,lt)||_nonIterableRest$2()}function _toConsumableArray$3(ft){return _arrayWithoutHoles$3(ft)||_iterableToArray$3(ft)||_unsupportedIterableToArray$3(ft)||_nonIterableSpread$3()}function _arrayWithoutHoles$3(ft){if(Array.isArray(ft))return _arrayLikeToArray$3(ft)}function _arrayWithHoles$2(ft){if(Array.isArray(ft))return ft}function _iterableToArray$3(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _iterableToArrayLimit$2(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],St=!0,Et=!1,Ct,At;try{for(dt=dt.call(ft);!(St=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));St=!0);}catch(Rt){Et=!0,At=Rt}finally{try{!St&&dt.return!=null&&dt.return()}finally{if(Et)throw At}}return vt}}function _unsupportedIterableToArray$3(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$3(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$3(ft,lt)}}function _arrayLikeToArray$3(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop$2=function ft(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$2,measure:noop$2};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(ft){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(ft){return new Proxy(ft,{get:function(dt,vt){return vt in dt?dt[vt]:dt[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$5(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$5(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$5(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$5(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$5(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$5(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$5(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$5(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$5(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$5(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray$3(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(ft){return"".concat(ft,"x")})).concat(oneToTwenty.map(function(ft){return"w-".concat(ft)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(ft){var lt=DOCUMENT.querySelector("script["+ft+"]");if(lt)return lt.getAttribute(ft)}function coerce(ft){return ft===""?!0:ft==="false"?!1:ft==="true"?!0:ft}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(ft){var lt=_slicedToArray$2(ft,2),dt=lt[0],vt=lt[1],St=coerce(getAttrConfig(dt));St!=null&&(initial[vt]=St)})}var _default$1={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$2(_objectSpread2$2({},_default$1),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config$1={};Object.keys(_default$1).forEach(function(ft){Object.defineProperty(config$1,ft,{enumerable:!0,set:function(dt){_config[ft]=dt,_onChangeCb.forEach(function(vt){return vt(config$1)})},get:function(){return _config[ft]}})});Object.defineProperty(config$1,"familyPrefix",{enumerable:!0,set:function ft(lt){_config.cssPrefix=lt,_onChangeCb.forEach(function(dt){return dt(config$1)})},get:function ft(){return _config.cssPrefix}});WINDOW.FontAwesomeConfig=config$1;var _onChangeCb=[];function onChange(ft){return _onChangeCb.push(ft),function(){_onChangeCb.splice(_onChangeCb.indexOf(ft),1)}}var d$5=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(ft){if(!(!ft||!IS_DOM)){var lt=DOCUMENT.createElement("style");lt.setAttribute("type","text/css"),lt.innerHTML=ft;for(var dt=DOCUMENT.head.childNodes,vt=null,St=dt.length-1;St>-1;St--){var Et=dt[St],Ct=(Et.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Ct)>-1&&(vt=Et)}return DOCUMENT.head.insertBefore(lt,vt),ft}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var ft=12,lt="";ft-- >0;)lt+=idPool[Math.random()*62|0];return lt}function toArray(ft){for(var lt=[],dt=(ft||[]).length>>>0;dt--;)lt[dt]=ft[dt];return lt}function classArray(ft){return ft.classList?toArray(ft.classList):(ft.getAttribute("class")||"").split(" ").filter(function(lt){return lt})}function htmlEscape(ft){return"".concat(ft).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(ft){return Object.keys(ft||{}).reduce(function(lt,dt){return lt+"".concat(dt,'="').concat(htmlEscape(ft[dt]),'" ')},"").trim()}function joinStyles(ft){return Object.keys(ft||{}).reduce(function(lt,dt){return lt+"".concat(dt,": ").concat(ft[dt].trim(),";")},"")}function transformIsMeaningful(ft){return ft.size!==meaninglessTransform.size||ft.x!==meaninglessTransform.x||ft.y!==meaninglessTransform.y||ft.rotate!==meaninglessTransform.rotate||ft.flipX||ft.flipY}function transformForSvg(ft){var lt=ft.transform,dt=ft.containerWidth,vt=ft.iconWidth,St={transform:"translate(".concat(dt/2," 256)")},Et="translate(".concat(lt.x*32,", ").concat(lt.y*32,") "),Ct="scale(".concat(lt.size/16*(lt.flipX?-1:1),", ").concat(lt.size/16*(lt.flipY?-1:1),") "),At="rotate(".concat(lt.rotate," 0 0)"),Rt={transform:"".concat(Et," ").concat(Ct," ").concat(At)},Dt={transform:"translate(".concat(vt/2*-1," -256)")};return{outer:St,inner:Rt,path:Dt}}function transformForCss(ft){var lt=ft.transform,dt=ft.width,vt=dt===void 0?UNITS_IN_GRID:dt,St=ft.height,Et=St===void 0?UNITS_IN_GRID:St,Ct=ft.startCentered,At=Ct===void 0?!1:Ct,Rt="";return At&&IS_IE?Rt+="translate(".concat(lt.x/d$5-vt/2,"em, ").concat(lt.y/d$5-Et/2,"em) "):At?Rt+="translate(calc(-50% + ".concat(lt.x/d$5,"em), calc(-50% + ").concat(lt.y/d$5,"em)) "):Rt+="translate(".concat(lt.x/d$5,"em, ").concat(lt.y/d$5,"em) "),Rt+="scale(".concat(lt.size/d$5*(lt.flipX?-1:1),", ").concat(lt.size/d$5*(lt.flipY?-1:1),") "),Rt+="rotate(".concat(lt.rotate,"deg) "),Rt}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var ft=DEFAULT_CSS_PREFIX,lt=DEFAULT_REPLACEMENT_CLASS,dt=config$1.cssPrefix,vt=config$1.replacementClass,St=baseStyles;if(dt!==ft||vt!==lt){var Et=new RegExp("\\.".concat(ft,"\\-"),"g"),Ct=new RegExp("\\--".concat(ft,"\\-"),"g"),At=new RegExp("\\.".concat(lt),"g");St=St.replace(Et,".".concat(dt,"-")).replace(Ct,"--".concat(dt,"-")).replace(At,".".concat(vt))}return St}var _cssInserted=!1;function ensureCss(){config$1.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function ft(){return{dom:{css,insertCss:ensureCss}}},hooks:function ft(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w$3=WINDOW||{};w$3[NAMESPACE_IDENTIFIER]||(w$3[NAMESPACE_IDENTIFIER]={});w$3[NAMESPACE_IDENTIFIER].styles||(w$3[NAMESPACE_IDENTIFIER].styles={});w$3[NAMESPACE_IDENTIFIER].hooks||(w$3[NAMESPACE_IDENTIFIER].hooks={});w$3[NAMESPACE_IDENTIFIER].shims||(w$3[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w$3[NAMESPACE_IDENTIFIER],functions=[],listener=function ft(){DOCUMENT.removeEventListener("DOMContentLoaded",ft),loaded=1,functions.map(function(lt){return lt()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(ft){IS_DOM&&(loaded?setTimeout(ft,0):functions.push(ft))}function toHtml(ft){var lt=ft.tag,dt=ft.attributes,vt=dt===void 0?{}:dt,St=ft.children,Et=St===void 0?[]:St;return typeof ft=="string"?htmlEscape(ft):"<".concat(lt," ").concat(joinAttributes(vt),">").concat(Et.map(toHtml).join(""),"</").concat(lt,">")}function iconFromMapping(ft,lt,dt){if(ft&&ft[lt]&&ft[lt][dt])return{prefix:lt,iconName:dt,icon:ft[lt][dt]}}var bindInternal4=function ft(lt,dt){return function(vt,St,Et,Ct){return lt.call(dt,vt,St,Et,Ct)}},reduce=function ft(lt,dt,vt,St){var Et=Object.keys(lt),Ct=Et.length,At=St!==void 0?bindInternal4(dt,St):dt,Rt,Dt,Nt;for(vt===void 0?(Rt=1,Nt=lt[Et[0]]):(Rt=0,Nt=vt);Rt<Ct;Rt++)Dt=Et[Rt],Nt=At(Nt,lt[Dt],Dt,lt);return Nt};function ucs2decode(ft){for(var lt=[],dt=0,vt=ft.length;dt<vt;){var St=ft.charCodeAt(dt++);if(St>=55296&&St<=56319&&dt<vt){var Et=ft.charCodeAt(dt++);(Et&64512)==56320?lt.push(((St&1023)<<10)+(Et&1023)+65536):(lt.push(St),dt--)}else lt.push(St)}return lt}function toHex(ft){var lt=ucs2decode(ft);return lt.length===1?lt[0].toString(16):null}function codePointAt$1(ft,lt){var dt=ft.length,vt=ft.charCodeAt(lt),St;return vt>=55296&&vt<=56319&&dt>lt+1&&(St=ft.charCodeAt(lt+1),St>=56320&&St<=57343)?(vt-55296)*1024+St-56320+65536:vt}function normalizeIcons(ft){return Object.keys(ft).reduce(function(lt,dt){var vt=ft[dt],St=!!vt.icon;return St?lt[vt.iconName]=vt.icon:lt[dt]=vt,lt},{})}function defineIcons(ft,lt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},vt=dt.skipHooks,St=vt===void 0?!1:vt,Et=normalizeIcons(lt);typeof namespace.hooks.addPack=="function"&&!St?namespace.hooks.addPack(ft,normalizeIcons(lt)):namespace.styles[ft]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[ft]||{}),Et),ft==="fas"&&defineIcons("fa",lt)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$5(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$5(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(ft){return~RESERVED_CLASSES.indexOf(ft)}function getIconName(ft,lt){var dt=lt.split("-"),vt=dt[0],St=dt.slice(1).join("-");return vt===ft&&St!==""&&!isReserved(St)?St:null}var build=function ft(){var lt=function(Et){return reduce(styles,function(Ct,At,Rt){return Ct[Rt]=reduce(At,Et,{}),Ct},{})};_byUnicode=lt(function(St,Et,Ct){if(Et[3]&&(St[Et[3]]=Ct),Et[2]){var At=Et[2].filter(function(Rt){return typeof Rt=="number"});At.forEach(function(Rt){St[Rt.toString(16)]=Ct})}return St}),_byLigature=lt(function(St,Et,Ct){if(St[Ct]=Ct,Et[2]){var At=Et[2].filter(function(Rt){return typeof Rt=="string"});At.forEach(function(Rt){St[Rt]=Ct})}return St}),_byAlias=lt(function(St,Et,Ct){var At=Et[2];return St[Ct]=Ct,At.forEach(function(Rt){St[Rt]=Ct}),St});var dt="far"in styles||config$1.autoFetchSvg,vt=reduce(shims,function(St,Et){var Ct=Et[0],At=Et[1],Rt=Et[2];return At==="far"&&!dt&&(At="fas"),typeof Ct=="string"&&(St.names[Ct]={prefix:At,iconName:Rt}),typeof Ct=="number"&&(St.unicodes[Ct.toString(16)]={prefix:At,iconName:Rt}),St},{names:{},unicodes:{}});_byOldName=vt.names,_byOldUnicode=vt.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config$1.styleDefault,{family:config$1.familyDefault})};onChange(function(ft){_defaultUsablePrefix=getCanonicalPrefix(ft.styleDefault,{family:config$1.familyDefault})});build();function byUnicode(ft,lt){return(_byUnicode[ft]||{})[lt]}function byLigature(ft,lt){return(_byLigature[ft]||{})[lt]}function byAlias(ft,lt){return(_byAlias[ft]||{})[lt]}function byOldName(ft){return _byOldName[ft]||{prefix:null,iconName:null}}function byOldUnicode(ft){var lt=_byOldUnicode[ft],dt=byUnicode("fas",ft);return lt||(dt?{prefix:"fas",iconName:dt}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function ft(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=lt.family,vt=dt===void 0?FAMILY_CLASSIC:dt,St=PREFIX_TO_STYLE[vt][ft],Et=STYLE_TO_PREFIX[vt][ft]||STYLE_TO_PREFIX[vt][St],Ct=ft in namespace.styles?ft:null;return Et||Ct||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(ft){var lt,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=dt.skipLookups,St=vt===void 0?!1:vt,Et=(lt={},_defineProperty$5(lt,FAMILY_CLASSIC,"".concat(config$1.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$5(lt,FAMILY_SHARP,"".concat(config$1.cssPrefix,"-").concat(FAMILY_SHARP)),lt),Ct=null,At=FAMILY_CLASSIC;(ft.includes(Et[FAMILY_CLASSIC])||ft.some(function(Dt){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(Dt)}))&&(At=FAMILY_CLASSIC),(ft.includes(Et[FAMILY_SHARP])||ft.some(function(Dt){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(Dt)}))&&(At=FAMILY_SHARP);var Rt=ft.reduce(function(Dt,Nt){var Ft=getIconName(config$1.cssPrefix,Nt);if(styles[Nt]?(Nt=LONG_STYLE[At].includes(Nt)?LONG_STYLE_TO_PREFIX[At][Nt]:Nt,Ct=Nt,Dt.prefix=Nt):PREFIXES[At].indexOf(Nt)>-1?(Ct=Nt,Dt.prefix=getCanonicalPrefix(Nt,{family:At})):Ft?Dt.iconName=Ft:Nt!==config$1.replacementClass&&Nt!==Et[FAMILY_CLASSIC]&&Nt!==Et[FAMILY_SHARP]&&Dt.rest.push(Nt),!St&&Dt.prefix&&Dt.iconName){var Ut=Ct==="fa"?byOldName(Dt.iconName):{},Wt=byAlias(Dt.prefix,Dt.iconName);Ut.prefix&&(Ct=null),Dt.iconName=Ut.iconName||Wt||Dt.iconName,Dt.prefix=Ut.prefix||Dt.prefix,Dt.prefix==="far"&&!styles.far&&styles.fas&&!config$1.autoFetchSvg&&(Dt.prefix="fas")}return Dt},emptyCanonicalIcon());return(ft.includes("fa-brands")||ft.includes("fab"))&&(Rt.prefix="fab"),(ft.includes("fa-duotone")||ft.includes("fad"))&&(Rt.prefix="fad"),!Rt.prefix&&At===FAMILY_SHARP&&(styles.fass||config$1.autoFetchSvg)&&(Rt.prefix="fass",Rt.iconName=byAlias(Rt.prefix,Rt.iconName)||Rt.iconName),(Rt.prefix==="fa"||Ct==="fa")&&(Rt.prefix=getDefaultUsablePrefix()||"fas"),Rt}var Library=function(){function ft(){_classCallCheck(this,ft),this.definitions={}}return _createClass(ft,[{key:"add",value:function(){for(var dt=this,vt=arguments.length,St=new Array(vt),Et=0;Et<vt;Et++)St[Et]=arguments[Et];var Ct=St.reduce(this._pullDefinitions,{});Object.keys(Ct).forEach(function(At){dt.definitions[At]=_objectSpread2$2(_objectSpread2$2({},dt.definitions[At]||{}),Ct[At]),defineIcons(At,Ct[At]);var Rt=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][At];Rt&&defineIcons(Rt,Ct[At]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(dt,vt){var St=vt.prefix&&vt.iconName&&vt.icon?{0:vt}:vt;return Object.keys(St).map(function(Et){var Ct=St[Et],At=Ct.prefix,Rt=Ct.iconName,Dt=Ct.icon,Nt=Dt[2];dt[At]||(dt[At]={}),Nt.length>0&&Nt.forEach(function(Ft){typeof Ft=="string"&&(dt[At][Ft]=Dt)}),dt[At][Rt]=Dt}),dt}}]),ft}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(ft,lt){var dt=lt.mixoutsTo;return _plugins=ft,_hooks={},Object.keys(providers).forEach(function(vt){defaultProviderKeys.indexOf(vt)===-1&&delete providers[vt]}),_plugins.forEach(function(vt){var St=vt.mixout?vt.mixout():{};if(Object.keys(St).forEach(function(Ct){typeof St[Ct]=="function"&&(dt[Ct]=St[Ct]),_typeof$2(St[Ct])==="object"&&Object.keys(St[Ct]).forEach(function(At){dt[Ct]||(dt[Ct]={}),dt[Ct][At]=St[Ct][At]})}),vt.hooks){var Et=vt.hooks();Object.keys(Et).forEach(function(Ct){_hooks[Ct]||(_hooks[Ct]=[]),_hooks[Ct].push(Et[Ct])})}vt.provides&&vt.provides(providers)}),dt}function chainHooks(ft,lt){for(var dt=arguments.length,vt=new Array(dt>2?dt-2:0),St=2;St<dt;St++)vt[St-2]=arguments[St];var Et=_hooks[ft]||[];return Et.forEach(function(Ct){lt=Ct.apply(null,[lt].concat(vt))}),lt}function callHooks(ft){for(var lt=arguments.length,dt=new Array(lt>1?lt-1:0),vt=1;vt<lt;vt++)dt[vt-1]=arguments[vt];var St=_hooks[ft]||[];St.forEach(function(Et){Et.apply(null,dt)})}function callProvided(){var ft=arguments[0],lt=Array.prototype.slice.call(arguments,1);return providers[ft]?providers[ft].apply(null,lt):void 0}function findIconDefinition(ft){ft.prefix==="fa"&&(ft.prefix="fas");var lt=ft.iconName,dt=ft.prefix||getDefaultUsablePrefix();if(lt)return lt=byAlias(dt,lt)||lt,iconFromMapping(library.definitions,dt,lt)||iconFromMapping(namespace.styles,dt,lt)}var library=new Library,noAuto=function ft(){config$1.autoReplaceSvg=!1,config$1.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",lt),callProvided("pseudoElements2svg",lt),callProvided("i2svg",lt)):Promise.reject("Operation requires a DOM of some kind.")},watch:function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=lt.autoReplaceSvgRoot;config$1.autoReplaceSvg===!1&&(config$1.autoReplaceSvg=!0),config$1.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:dt}),callHooks("watch",lt)})}},parse$1={icon:function ft(lt){if(lt===null)return null;if(_typeof$2(lt)==="object"&&lt.prefix&&lt.iconName)return{prefix:lt.prefix,iconName:byAlias(lt.prefix,lt.iconName)||lt.iconName};if(Array.isArray(lt)&&lt.length===2){var dt=lt[1].indexOf("fa-")===0?lt[1].slice(3):lt[1],vt=getCanonicalPrefix(lt[0]);return{prefix:vt,iconName:byAlias(vt,dt)||dt}}if(typeof lt=="string"&&(lt.indexOf("".concat(config$1.cssPrefix,"-"))>-1||lt.match(ICON_SELECTION_SYNTAX_PATTERN))){var St=getCanonicalIcon(lt.split(" "),{skipLookups:!0});return{prefix:St.prefix||getDefaultUsablePrefix(),iconName:byAlias(St.prefix,St.iconName)||St.iconName}}if(typeof lt=="string"){var Et=getDefaultUsablePrefix();return{prefix:Et,iconName:byAlias(Et,lt)||lt}}}},api={noAuto,config:config$1,dom,parse:parse$1,library,findIconDefinition,toHtml},autoReplace=function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=lt.autoReplaceSvgRoot,vt=dt===void 0?DOCUMENT:dt;(Object.keys(namespace.styles).length>0||config$1.autoFetchSvg)&&IS_DOM&&config$1.autoReplaceSvg&&api.dom.i2svg({node:vt})};function domVariants(ft,lt){return Object.defineProperty(ft,"abstract",{get:lt}),Object.defineProperty(ft,"html",{get:function(){return ft.abstract.map(function(vt){return toHtml(vt)})}}),Object.defineProperty(ft,"node",{get:function(){if(IS_DOM){var vt=DOCUMENT.createElement("div");return vt.innerHTML=ft.html,vt.children}}}),ft}function asIcon(ft){var lt=ft.children,dt=ft.main,vt=ft.mask,St=ft.attributes,Et=ft.styles,Ct=ft.transform;if(transformIsMeaningful(Ct)&&dt.found&&!vt.found){var At=dt.width,Rt=dt.height,Dt={x:At/Rt/2,y:.5};St.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},Et),{},{"transform-origin":"".concat(Dt.x+Ct.x/16,"em ").concat(Dt.y+Ct.y/16,"em")}))}return[{tag:"svg",attributes:St,children:lt}]}function asSymbol(ft){var lt=ft.prefix,dt=ft.iconName,vt=ft.children,St=ft.attributes,Et=ft.symbol,Ct=Et===!0?"".concat(lt,"-").concat(config$1.cssPrefix,"-").concat(dt):Et;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{id:Ct}),children:vt}]}]}function makeInlineSvgAbstract(ft){var lt=ft.icons,dt=lt.main,vt=lt.mask,St=ft.prefix,Et=ft.iconName,Ct=ft.transform,At=ft.symbol,Rt=ft.title,Dt=ft.maskId,Nt=ft.titleId,Ft=ft.extra,Ut=ft.watchable,Wt=Ut===void 0?!1:Ut,Zt=vt.found?vt:dt,Kt=Zt.width,cn=Zt.height,hn=St==="fak",dn=[config$1.replacementClass,Et?"".concat(config$1.cssPrefix,"-").concat(Et):""].filter(function(In){return Ft.classes.indexOf(In)===-1}).filter(function(In){return In!==""||!!In}).concat(Ft.classes).join(" "),pn={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},Ft.attributes),{},{"data-prefix":St,"data-icon":Et,class:dn,role:Ft.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Kt," ").concat(cn)})},gn=hn&&!~Ft.classes.indexOf("fa-fw")?{width:"".concat(Kt/cn*16*.0625,"em")}:{};Wt&&(pn.attributes[DATA_FA_I2SVG]=""),Rt&&(pn.children.push({tag:"title",attributes:{id:pn.attributes["aria-labelledby"]||"title-".concat(Nt||nextUniqueId())},children:[Rt]}),delete pn.attributes.title);var vn=_objectSpread2$2(_objectSpread2$2({},pn),{},{prefix:St,iconName:Et,main:dt,mask:vt,maskId:Dt,transform:Ct,symbol:At,styles:_objectSpread2$2(_objectSpread2$2({},gn),Ft.styles)}),bn=vt.found&&dt.found?callProvided("generateAbstractMask",vn)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",vn)||{children:[],attributes:{}},$n=bn.children,Tn=bn.attributes;return vn.children=$n,vn.attributes=Tn,At?asSymbol(vn):asIcon(vn)}function makeLayersTextAbstract(ft){var lt=ft.content,dt=ft.width,vt=ft.height,St=ft.transform,Et=ft.title,Ct=ft.extra,At=ft.watchable,Rt=At===void 0?!1:At,Dt=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},Ct.attributes),Et?{title:Et}:{}),{},{class:Ct.classes.join(" ")});Rt&&(Dt[DATA_FA_I2SVG]="");var Nt=_objectSpread2$2({},Ct.styles);transformIsMeaningful(St)&&(Nt.transform=transformForCss({transform:St,startCentered:!0,width:dt,height:vt}),Nt["-webkit-transform"]=Nt.transform);var Ft=joinStyles(Nt);Ft.length>0&&(Dt.style=Ft);var Ut=[];return Ut.push({tag:"span",attributes:Dt,children:[lt]}),Et&&Ut.push({tag:"span",attributes:{class:"sr-only"},children:[Et]}),Ut}function makeLayersCounterAbstract(ft){var lt=ft.content,dt=ft.title,vt=ft.extra,St=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},vt.attributes),dt?{title:dt}:{}),{},{class:vt.classes.join(" ")}),Et=joinStyles(vt.styles);Et.length>0&&(St.style=Et);var Ct=[];return Ct.push({tag:"span",attributes:St,children:[lt]}),dt&&Ct.push({tag:"span",attributes:{class:"sr-only"},children:[dt]}),Ct}var styles$1=namespace.styles;function asFoundIcon(ft){var lt=ft[0],dt=ft[1],vt=ft.slice(4),St=_slicedToArray$2(vt,1),Et=St[0],Ct=null;return Array.isArray(Et)?Ct={tag:"g",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:Et[0]}},{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:Et[1]}}]}:Ct={tag:"path",attributes:{fill:"currentColor",d:Et}},{found:!0,width:lt,height:dt,icon:Ct}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(ft,lt){!PRODUCTION$1&&!config$1.showMissingIcons&&ft&&console.error('Icon with name "'.concat(ft,'" and prefix "').concat(lt,'" is missing.'))}function findIcon(ft,lt){var dt=lt;return lt==="fa"&&config$1.styleDefault!==null&&(lt=getDefaultUsablePrefix()),new Promise(function(vt,St){if(callProvided("missingIconAbstract"),dt==="fa"){var Et=byOldName(ft)||{};ft=Et.iconName||ft,lt=Et.prefix||lt}if(ft&&lt&&styles$1[lt]&&styles$1[lt][ft]){var Ct=styles$1[lt][ft];return vt(asFoundIcon(Ct))}maybeNotifyMissing(ft,lt),vt(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config$1.showMissingIcons&&ft?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1$1=function ft(){},p$4=config$1.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1$1,measure:noop$1$1},preamble='FA "6.3.0"',begin=function ft(lt){return p$4.mark("".concat(preamble," ").concat(lt," begins")),function(){return end(lt)}},end=function ft(lt){p$4.mark("".concat(preamble," ").concat(lt," ends")),p$4.measure("".concat(preamble," ").concat(lt),"".concat(preamble," ").concat(lt," begins"),"".concat(preamble," ").concat(lt," ends"))},perf={begin,end},noop$2$1=function ft(){};function isWatched(ft){var lt=ft.getAttribute?ft.getAttribute(DATA_FA_I2SVG):null;return typeof lt=="string"}function hasPrefixAndIcon(ft){var lt=ft.getAttribute?ft.getAttribute(DATA_PREFIX):null,dt=ft.getAttribute?ft.getAttribute(DATA_ICON):null;return lt&&dt}function hasBeenReplaced(ft){return ft&&ft.classList&&ft.classList.contains&&ft.classList.contains(config$1.replacementClass)}function getMutator(){if(config$1.autoReplaceSvg===!0)return mutators.replace;var ft=mutators[config$1.autoReplaceSvg];return ft||mutators.replace}function createElementNS(ft){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",ft)}function createElement(ft){return DOCUMENT.createElement(ft)}function convertSVG(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=lt.ceFn,vt=dt===void 0?ft.tag==="svg"?createElementNS:createElement:dt;if(typeof ft=="string")return DOCUMENT.createTextNode(ft);var St=vt(ft.tag);Object.keys(ft.attributes||[]).forEach(function(Ct){St.setAttribute(Ct,ft.attributes[Ct])});var Et=ft.children||[];return Et.forEach(function(Ct){St.appendChild(convertSVG(Ct,{ceFn:vt}))}),St}function nodeAsComment(ft){var lt=" ".concat(ft.outerHTML," ");return lt="".concat(lt,"Font Awesome fontawesome.com "),lt}var mutators={replace:function ft(lt){var dt=lt[0];if(dt.parentNode)if(lt[1].forEach(function(St){dt.parentNode.insertBefore(convertSVG(St),dt)}),dt.getAttribute(DATA_FA_I2SVG)===null&&config$1.keepOriginalSource){var vt=DOCUMENT.createComment(nodeAsComment(dt));dt.parentNode.replaceChild(vt,dt)}else dt.remove()},nest:function ft(lt){var dt=lt[0],vt=lt[1];if(~classArray(dt).indexOf(config$1.replacementClass))return mutators.replace(lt);var St=new RegExp("".concat(config$1.cssPrefix,"-.*"));if(delete vt[0].attributes.id,vt[0].attributes.class){var Et=vt[0].attributes.class.split(" ").reduce(function(At,Rt){return Rt===config$1.replacementClass||Rt.match(St)?At.toSvg.push(Rt):At.toNode.push(Rt),At},{toNode:[],toSvg:[]});vt[0].attributes.class=Et.toSvg.join(" "),Et.toNode.length===0?dt.removeAttribute("class"):dt.setAttribute("class",Et.toNode.join(" "))}var Ct=vt.map(function(At){return toHtml(At)}).join(`
`);dt.setAttribute(DATA_FA_I2SVG,""),dt.innerHTML=Ct}};function performOperationSync(ft){ft()}function perform(ft,lt){var dt=typeof lt=="function"?lt:noop$2$1;if(ft.length===0)dt();else{var vt=performOperationSync;config$1.mutateApproach===MUTATION_APPROACH_ASYNC&&(vt=WINDOW.requestAnimationFrame||performOperationSync),vt(function(){var St=getMutator(),Et=perf.begin("mutate");ft.map(St),Et(),dt()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(ft){if(MUTATION_OBSERVER&&config$1.observeMutations){var lt=ft.treeCallback,dt=lt===void 0?noop$2$1:lt,vt=ft.nodeCallback,St=vt===void 0?noop$2$1:vt,Et=ft.pseudoElementsCallback,Ct=Et===void 0?noop$2$1:Et,At=ft.observeMutationsRoot,Rt=At===void 0?DOCUMENT:At;mo=new MUTATION_OBSERVER(function(Dt){if(!disabled){var Nt=getDefaultUsablePrefix();toArray(Dt).forEach(function(Ft){if(Ft.type==="childList"&&Ft.addedNodes.length>0&&!isWatched(Ft.addedNodes[0])&&(config$1.searchPseudoElements&&Ct(Ft.target),dt(Ft.target)),Ft.type==="attributes"&&Ft.target.parentNode&&config$1.searchPseudoElements&&Ct(Ft.target.parentNode),Ft.type==="attributes"&&isWatched(Ft.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(Ft.attributeName))if(Ft.attributeName==="class"&&hasPrefixAndIcon(Ft.target)){var Ut=getCanonicalIcon(classArray(Ft.target)),Wt=Ut.prefix,Zt=Ut.iconName;Ft.target.setAttribute(DATA_PREFIX,Wt||Nt),Zt&&Ft.target.setAttribute(DATA_ICON,Zt)}else hasBeenReplaced(Ft.target)&&St(Ft.target)})}}),IS_DOM&&mo.observe(Rt,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(ft){var lt=ft.getAttribute("style"),dt=[];return lt&&(dt=lt.split(";").reduce(function(vt,St){var Et=St.split(":"),Ct=Et[0],At=Et.slice(1);return Ct&&At.length>0&&(vt[Ct]=At.join(":").trim()),vt},{})),dt}function classParser(ft){var lt=ft.getAttribute("data-prefix"),dt=ft.getAttribute("data-icon"),vt=ft.innerText!==void 0?ft.innerText.trim():"",St=getCanonicalIcon(classArray(ft));return St.prefix||(St.prefix=getDefaultUsablePrefix()),lt&&dt&&(St.prefix=lt,St.iconName=dt),St.iconName&&St.prefix||(St.prefix&&vt.length>0&&(St.iconName=byLigature(St.prefix,ft.innerText)||byUnicode(St.prefix,toHex(ft.innerText))),!St.iconName&&config$1.autoFetchSvg&&ft.firstChild&&ft.firstChild.nodeType===Node.TEXT_NODE&&(St.iconName=ft.firstChild.data)),St}function attributesParser(ft){var lt=toArray(ft.attributes).reduce(function(St,Et){return St.name!=="class"&&St.name!=="style"&&(St[Et.name]=Et.value),St},{}),dt=ft.getAttribute("title"),vt=ft.getAttribute("data-fa-title-id");return config$1.autoA11y&&(dt?lt["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(vt||nextUniqueId()):(lt["aria-hidden"]="true",lt.focusable="false")),lt}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},dt=classParser(ft),vt=dt.iconName,St=dt.prefix,Et=dt.rest,Ct=attributesParser(ft),At=chainHooks("parseNodeAttributes",{},ft),Rt=lt.styleParser?styleParser(ft):[];return _objectSpread2$2({iconName:vt,title:ft.getAttribute("title"),titleId:ft.getAttribute("data-fa-title-id"),prefix:St,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:Et,styles:Rt,attributes:Ct}},At)}var styles$2=namespace.styles;function generateMutation(ft){var lt=config$1.autoReplaceSvg==="nest"?parseMeta(ft,{styleParser:!1}):parseMeta(ft);return~lt.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",ft,lt):callProvided("generateSvgReplacementMutation",ft,lt)}var knownPrefixes=new Set;FAMILIES.map(function(ft){knownPrefixes.add("fa-".concat(ft))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray$3(knownPrefixes);function onTree(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var dt=DOCUMENT.documentElement.classList,vt=function(Ft){return dt.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ft))},St=function(Ft){return dt.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ft))},Et=config$1.autoFetchSvg?knownPrefixes:FAMILIES.map(function(Nt){return"fa-".concat(Nt)}).concat(Object.keys(styles$2));Et.includes("fa")||Et.push("fa");var Ct=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(Et.map(function(Nt){return".".concat(Nt,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(Ct.length===0)return Promise.resolve();var At=[];try{At=toArray(ft.querySelectorAll(Ct))}catch{}if(At.length>0)vt("pending"),St("complete");else return Promise.resolve();var Rt=perf.begin("onTree"),Dt=At.reduce(function(Nt,Ft){try{var Ut=generateMutation(Ft);Ut&&Nt.push(Ut)}catch(Wt){PRODUCTION$1||Wt.name==="MissingIcon"&&console.error(Wt)}return Nt},[]);return new Promise(function(Nt,Ft){Promise.all(Dt).then(function(Ut){perform(Ut,function(){vt("active"),vt("complete"),St("pending"),typeof lt=="function"&&lt(),Rt(),Nt()})}).catch(function(Ut){Rt(),Ft(Ut)})})}function onNode(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(ft).then(function(dt){dt&&perform([dt],lt)})}function resolveIcons(ft){return function(lt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=(lt||{}).icon?lt:findIconDefinition(lt||{}),St=dt.mask;return St&&(St=(St||{}).icon?St:findIconDefinition(St||{})),ft(vt,_objectSpread2$2(_objectSpread2$2({},dt),{},{mask:St}))}}var render=function ft(lt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=dt.transform,St=vt===void 0?meaninglessTransform:vt,Et=dt.symbol,Ct=Et===void 0?!1:Et,At=dt.mask,Rt=At===void 0?null:At,Dt=dt.maskId,Nt=Dt===void 0?null:Dt,Ft=dt.title,Ut=Ft===void 0?null:Ft,Wt=dt.titleId,Zt=Wt===void 0?null:Wt,Kt=dt.classes,cn=Kt===void 0?[]:Kt,hn=dt.attributes,dn=hn===void 0?{}:hn,pn=dt.styles,gn=pn===void 0?{}:pn;if(lt){var vn=lt.prefix,bn=lt.iconName,$n=lt.icon;return domVariants(_objectSpread2$2({type:"icon"},lt),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:lt,params:dt}),config$1.autoA11y&&(Ut?dn["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(Zt||nextUniqueId()):(dn["aria-hidden"]="true",dn.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon($n),mask:Rt?asFoundIcon(Rt.icon):{found:!1,width:null,height:null,icon:{}}},prefix:vn,iconName:bn,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),St),symbol:Ct,title:Ut,maskId:Nt,titleId:Zt,extra:{attributes:dn,styles:gn,classes:cn}})})}},ReplaceElements={mixout:function ft(){return{icon:resolveIcons(render)}},hooks:function ft(){return{mutationObserverCallbacks:function(dt){return dt.treeCallback=onTree,dt.nodeCallback=onNode,dt}}},provides:function ft(lt){lt.i2svg=function(dt){var vt=dt.node,St=vt===void 0?DOCUMENT:vt,Et=dt.callback,Ct=Et===void 0?function(){}:Et;return onTree(St,Ct)},lt.generateSvgReplacementMutation=function(dt,vt){var St=vt.iconName,Et=vt.title,Ct=vt.titleId,At=vt.prefix,Rt=vt.transform,Dt=vt.symbol,Nt=vt.mask,Ft=vt.maskId,Ut=vt.extra;return new Promise(function(Wt,Zt){Promise.all([findIcon(St,At),Nt.iconName?findIcon(Nt.iconName,Nt.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Kt){var cn=_slicedToArray$2(Kt,2),hn=cn[0],dn=cn[1];Wt([dt,makeInlineSvgAbstract({icons:{main:hn,mask:dn},prefix:At,iconName:St,transform:Rt,symbol:Dt,maskId:Ft,title:Et,titleId:Ct,extra:Ut,watchable:!0})])}).catch(Zt)})},lt.generateAbstractIcon=function(dt){var vt=dt.children,St=dt.attributes,Et=dt.main,Ct=dt.transform,At=dt.styles,Rt=joinStyles(At);Rt.length>0&&(St.style=Rt);var Dt;return transformIsMeaningful(Ct)&&(Dt=callProvided("generateAbstractTransformGrouping",{main:Et,transform:Ct,containerWidth:Et.width,iconWidth:Et.width})),vt.push(Dt||Et.icon),{children:vt,attributes:St}}}},Layers={mixout:function ft(){return{layer:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=vt.classes,Et=St===void 0?[]:St;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:dt,params:vt});var Ct=[];return dt(function(At){Array.isArray(At)?At.map(function(Rt){Ct=Ct.concat(Rt.abstract)}):Ct=Ct.concat(At.abstract)}),[{tag:"span",attributes:{class:["".concat(config$1.cssPrefix,"-layers")].concat(_toConsumableArray$3(Et)).join(" ")},children:Ct}]})}}}},LayersCounter={mixout:function ft(){return{counter:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=vt.title,Et=St===void 0?null:St,Ct=vt.classes,At=Ct===void 0?[]:Ct,Rt=vt.attributes,Dt=Rt===void 0?{}:Rt,Nt=vt.styles,Ft=Nt===void 0?{}:Nt;return domVariants({type:"counter",content:dt},function(){return callHooks("beforeDOMElementCreation",{content:dt,params:vt}),makeLayersCounterAbstract({content:dt.toString(),title:Et,extra:{attributes:Dt,styles:Ft,classes:["".concat(config$1.cssPrefix,"-layers-counter")].concat(_toConsumableArray$3(At))}})})}}}},LayersText={mixout:function ft(){return{text:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=vt.transform,Et=St===void 0?meaninglessTransform:St,Ct=vt.title,At=Ct===void 0?null:Ct,Rt=vt.classes,Dt=Rt===void 0?[]:Rt,Nt=vt.attributes,Ft=Nt===void 0?{}:Nt,Ut=vt.styles,Wt=Ut===void 0?{}:Ut;return domVariants({type:"text",content:dt},function(){return callHooks("beforeDOMElementCreation",{content:dt,params:vt}),makeLayersTextAbstract({content:dt,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),Et),title:At,extra:{attributes:Ft,styles:Wt,classes:["".concat(config$1.cssPrefix,"-layers-text")].concat(_toConsumableArray$3(Dt))}})})}}},provides:function ft(lt){lt.generateLayersText=function(dt,vt){var St=vt.title,Et=vt.transform,Ct=vt.extra,At=null,Rt=null;if(IS_IE){var Dt=parseInt(getComputedStyle(dt).fontSize,10),Nt=dt.getBoundingClientRect();At=Nt.width/Dt,Rt=Nt.height/Dt}return config$1.autoA11y&&!St&&(Ct.attributes["aria-hidden"]="true"),Promise.resolve([dt,makeLayersTextAbstract({content:dt.innerHTML,width:At,height:Rt,transform:Et,title:St,extra:Ct,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(ft){var lt=ft.replace(CLEAN_CONTENT_PATTERN,""),dt=codePointAt$1(lt,0),vt=dt>=SECONDARY_UNICODE_RANGE[0]&&dt<=SECONDARY_UNICODE_RANGE[1],St=lt.length===2?lt[0]===lt[1]:!1;return{value:toHex(St?lt[0]:lt),isSecondary:vt||St}}function replaceForPosition(ft,lt){var dt="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(lt.replace(":","-"));return new Promise(function(vt,St){if(ft.getAttribute(dt)!==null)return vt();var Et=toArray(ft.children),Ct=Et.filter(function($n){return $n.getAttribute(DATA_FA_PSEUDO_ELEMENT)===lt})[0],At=WINDOW.getComputedStyle(ft,lt),Rt=At.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),Dt=At.getPropertyValue("font-weight"),Nt=At.getPropertyValue("content");if(Ct&&!Rt)return ft.removeChild(Ct),vt();if(Rt&&Nt!=="none"&&Nt!==""){var Ft=At.getPropertyValue("content"),Ut=~["Sharp"].indexOf(Rt[2])?FAMILY_SHARP:FAMILY_CLASSIC,Wt=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(Rt[2])?STYLE_TO_PREFIX[Ut][Rt[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[Ut][Dt],Zt=hexValueFromContent(Ft),Kt=Zt.value,cn=Zt.isSecondary,hn=Rt[0].startsWith("FontAwesome"),dn=byUnicode(Wt,Kt),pn=dn;if(hn){var gn=byOldUnicode(Kt);gn.iconName&&gn.prefix&&(dn=gn.iconName,Wt=gn.prefix)}if(dn&&!cn&&(!Ct||Ct.getAttribute(DATA_PREFIX)!==Wt||Ct.getAttribute(DATA_ICON)!==pn)){ft.setAttribute(dt,pn),Ct&&ft.removeChild(Ct);var vn=blankMeta(),bn=vn.extra;bn.attributes[DATA_FA_PSEUDO_ELEMENT]=lt,findIcon(dn,Wt).then(function($n){var Tn=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},vn),{},{icons:{main:$n,mask:emptyCanonicalIcon()},prefix:Wt,iconName:pn,extra:bn,watchable:!0})),In=DOCUMENT.createElement("svg");lt==="::before"?ft.insertBefore(In,ft.firstChild):ft.appendChild(In),In.outerHTML=Tn.map(function(Pn){return toHtml(Pn)}).join(`
`),ft.removeAttribute(dt),vt()}).catch(St)}else vt()}else vt()})}function replace(ft){return Promise.all([replaceForPosition(ft,"::before"),replaceForPosition(ft,"::after")])}function processable(ft){return ft.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(ft.tagName.toUpperCase())&&!ft.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!ft.parentNode||ft.parentNode.tagName!=="svg")}function searchPseudoElements(ft){if(IS_DOM)return new Promise(function(lt,dt){var vt=toArray(ft.querySelectorAll("*")).filter(processable).map(replace),St=perf.begin("searchPseudoElements");disableObservation(),Promise.all(vt).then(function(){St(),enableObservation(),lt()}).catch(function(){St(),enableObservation(),dt()})})}var PseudoElements={hooks:function ft(){return{mutationObserverCallbacks:function(dt){return dt.pseudoElementsCallback=searchPseudoElements,dt}}},provides:function ft(lt){lt.pseudoElements2svg=function(dt){var vt=dt.node,St=vt===void 0?DOCUMENT:vt;config$1.searchPseudoElements&&searchPseudoElements(St)}}},_unwatched=!1,MutationObserver$1={mixout:function ft(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function ft(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(dt){var vt=dt.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:vt}))}}}},parseTransformString=function ft(lt){var dt={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return lt.toLowerCase().split(" ").reduce(function(vt,St){var Et=St.toLowerCase().split("-"),Ct=Et[0],At=Et.slice(1).join("-");if(Ct&&At==="h")return vt.flipX=!0,vt;if(Ct&&At==="v")return vt.flipY=!0,vt;if(At=parseFloat(At),isNaN(At))return vt;switch(Ct){case"grow":vt.size=vt.size+At;break;case"shrink":vt.size=vt.size-At;break;case"left":vt.x=vt.x-At;break;case"right":vt.x=vt.x+At;break;case"up":vt.y=vt.y-At;break;case"down":vt.y=vt.y+At;break;case"rotate":vt.rotate=vt.rotate+At;break}return vt},dt)},PowerTransforms={mixout:function ft(){return{parse:{transform:function(dt){return parseTransformString(dt)}}}},hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var St=vt.getAttribute("data-fa-transform");return St&&(dt.transform=parseTransformString(St)),dt}}},provides:function ft(lt){lt.generateAbstractTransformGrouping=function(dt){var vt=dt.main,St=dt.transform,Et=dt.containerWidth,Ct=dt.iconWidth,At={transform:"translate(".concat(Et/2," 256)")},Rt="translate(".concat(St.x*32,", ").concat(St.y*32,") "),Dt="scale(".concat(St.size/16*(St.flipX?-1:1),", ").concat(St.size/16*(St.flipY?-1:1),") "),Nt="rotate(".concat(St.rotate," 0 0)"),Ft={transform:"".concat(Rt," ").concat(Dt," ").concat(Nt)},Ut={transform:"translate(".concat(Ct/2*-1," -256)")},Wt={outer:At,inner:Ft,path:Ut};return{tag:"g",attributes:_objectSpread2$2({},Wt.outer),children:[{tag:"g",attributes:_objectSpread2$2({},Wt.inner),children:[{tag:vt.icon.tag,children:vt.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},vt.icon.attributes),Wt.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ft.attributes&&(ft.attributes.fill||lt)&&(ft.attributes.fill="black"),ft}function deGroup(ft){return ft.tag==="g"?ft.children:[ft]}var Masks={hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var St=vt.getAttribute("data-fa-mask"),Et=St?getCanonicalIcon(St.split(" ").map(function(Ct){return Ct.trim()})):emptyCanonicalIcon();return Et.prefix||(Et.prefix=getDefaultUsablePrefix()),dt.mask=Et,dt.maskId=vt.getAttribute("data-fa-mask-id"),dt}}},provides:function ft(lt){lt.generateAbstractMask=function(dt){var vt=dt.children,St=dt.attributes,Et=dt.main,Ct=dt.mask,At=dt.maskId,Rt=dt.transform,Dt=Et.width,Nt=Et.icon,Ft=Ct.width,Ut=Ct.icon,Wt=transformForSvg({transform:Rt,containerWidth:Ft,iconWidth:Dt}),Zt={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},Kt=Nt.children?{children:Nt.children.map(fillBlack)}:{},cn={tag:"g",attributes:_objectSpread2$2({},Wt.inner),children:[fillBlack(_objectSpread2$2({tag:Nt.tag,attributes:_objectSpread2$2(_objectSpread2$2({},Nt.attributes),Wt.path)},Kt))]},hn={tag:"g",attributes:_objectSpread2$2({},Wt.outer),children:[cn]},dn="mask-".concat(At||nextUniqueId()),pn="clip-".concat(At||nextUniqueId()),gn={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:dn,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Zt,hn]},vn={tag:"defs",children:[{tag:"clipPath",attributes:{id:pn},children:deGroup(Ut)},gn]};return vt.push(vn,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat(pn,")"),mask:"url(#".concat(dn,")")},ALL_SPACE)}),{children:vt,attributes:St}}}},MissingIconIndicator={provides:function ft(lt){var dt=!1;WINDOW.matchMedia&&(dt=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),lt.missingIconAbstract=function(){var vt=[],St={fill:"currentColor"},Et={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var Ct=_objectSpread2$2(_objectSpread2$2({},Et),{},{attributeName:"opacity"}),At={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{cx:"256",cy:"364",r:"28"}),children:[]};return dt||At.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Et),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;1;1;0;1;"})}),vt.push(At),vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:dt?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;0;0;0;1;"})}]}),dt||vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:vt}}}},SvgSymbols={hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var St=vt.getAttribute("data-fa-symbol"),Et=St===null?!1:St===""?!0:St;return dt.symbol=Et,dt}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;api.library;api.dom;var parse$1$1=api.parse;api.findIconDefinition;api.toHtml;var icon=api.icon;api.layer;api.text;api.counter;function ownKeys$3(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ft,St).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2$1(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$3(Object(dt),!0).forEach(function(vt){_defineProperty$4(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$3(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _typeof$1(ft){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof$1(ft)}function _defineProperty$4(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _objectWithoutPropertiesLoose$3(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),St,Et;for(Et=0;Et<vt.length;Et++)St=vt[Et],!(lt.indexOf(St)>=0)&&(dt[St]=ft[St]);return dt}function _objectWithoutProperties$2(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$3(ft,lt),vt,St;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(St=0;St<Et.length;St++)vt=Et[St],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}function _toConsumableArray$2(ft){return _arrayWithoutHoles$2(ft)||_iterableToArray$2(ft)||_unsupportedIterableToArray$2(ft)||_nonIterableSpread$2()}function _arrayWithoutHoles$2(ft){if(Array.isArray(ft))return _arrayLikeToArray$2(ft)}function _iterableToArray$2(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _unsupportedIterableToArray$2(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$2(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$2(ft,lt)}}function _arrayLikeToArray$2(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(ft){var lt,dt=ft.beat,vt=ft.fade,St=ft.beatFade,Et=ft.bounce,Ct=ft.shake,At=ft.flash,Rt=ft.spin,Dt=ft.spinPulse,Nt=ft.spinReverse,Ft=ft.pulse,Ut=ft.fixedWidth,Wt=ft.inverse,Zt=ft.border,Kt=ft.listItem,cn=ft.flip,hn=ft.size,dn=ft.rotation,pn=ft.pull,gn=(lt={"fa-beat":dt,"fa-fade":vt,"fa-beat-fade":St,"fa-bounce":Et,"fa-shake":Ct,"fa-flash":At,"fa-spin":Rt,"fa-spin-reverse":Nt,"fa-spin-pulse":Dt,"fa-pulse":Ft,"fa-fw":Ut,"fa-inverse":Wt,"fa-border":Zt,"fa-li":Kt,"fa-flip":cn===!0,"fa-flip-horizontal":cn==="horizontal"||cn==="both","fa-flip-vertical":cn==="vertical"||cn==="both"},_defineProperty$4(lt,"fa-".concat(hn),typeof hn<"u"&&hn!==null),_defineProperty$4(lt,"fa-rotate-".concat(dn),typeof dn<"u"&&dn!==null&&dn!==0),_defineProperty$4(lt,"fa-pull-".concat(pn),typeof pn<"u"&&pn!==null),_defineProperty$4(lt,"fa-swap-opacity",ft.swapOpacity),lt);return Object.keys(gn).map(function(vn){return gn[vn]?vn:null}).filter(function(vn){return vn})}function _isNumerical(ft){return ft=ft-0,ft===ft}function camelize(ft){return _isNumerical(ft)?ft:(ft=ft.replace(/[\-_\s]+(.)?/g,function(lt,dt){return dt?dt.toUpperCase():""}),ft.substr(0,1).toLowerCase()+ft.substr(1))}var _excluded$3=["style"];function capitalize$1(ft){return ft.charAt(0).toUpperCase()+ft.slice(1)}function styleToObject(ft){return ft.split(";").map(function(lt){return lt.trim()}).filter(function(lt){return lt}).reduce(function(lt,dt){var vt=dt.indexOf(":"),St=camelize(dt.slice(0,vt)),Et=dt.slice(vt+1).trim();return St.startsWith("webkit")?lt[capitalize$1(St)]=Et:lt[St]=Et,lt},{})}function convert(ft,lt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof lt=="string")return lt;var vt=(lt.children||[]).map(function(Rt){return convert(ft,Rt)}),St=Object.keys(lt.attributes||{}).reduce(function(Rt,Dt){var Nt=lt.attributes[Dt];switch(Dt){case"class":Rt.attrs.className=Nt,delete lt.attributes.class;break;case"style":Rt.attrs.style=styleToObject(Nt);break;default:Dt.indexOf("aria-")===0||Dt.indexOf("data-")===0?Rt.attrs[Dt.toLowerCase()]=Nt:Rt.attrs[camelize(Dt)]=Nt}return Rt},{attrs:{}}),Et=dt.style,Ct=Et===void 0?{}:Et,At=_objectWithoutProperties$2(dt,_excluded$3);return St.attrs.style=_objectSpread2$1(_objectSpread2$1({},St.attrs.style),Ct),ft.apply(void 0,[lt.tag,_objectSpread2$1(_objectSpread2$1({},St.attrs),At)].concat(_toConsumableArray$2(vt)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(ft){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var ft;(ft=console).error.apply(ft,arguments)}}function normalizeIconArgs(ft){if(ft&&_typeof$1(ft)==="object"&&ft.prefix&&ft.iconName&&ft.icon)return ft;if(parse$1$1.icon)return parse$1$1.icon(ft);if(ft===null)return null;if(ft&&_typeof$1(ft)==="object"&&ft.prefix&&ft.iconName)return ft;if(Array.isArray(ft)&&ft.length===2)return{prefix:ft[0],iconName:ft[1]};if(typeof ft=="string")return{prefix:"fas",iconName:ft}}function objectWithKey(ft,lt){return Array.isArray(lt)&&lt.length>0||!Array.isArray(lt)&&lt?_defineProperty$4({},ft,lt):{}}var FontAwesomeIcon=React.forwardRef(function(ft,lt){var dt=ft.icon,vt=ft.mask,St=ft.symbol,Et=ft.className,Ct=ft.title,At=ft.titleId,Rt=ft.maskId,Dt=normalizeIconArgs(dt),Nt=objectWithKey("classes",[].concat(_toConsumableArray$2(classList(ft)),_toConsumableArray$2(Et.split(" ")))),Ft=objectWithKey("transform",typeof ft.transform=="string"?parse$1$1.transform(ft.transform):ft.transform),Ut=objectWithKey("mask",normalizeIconArgs(vt)),Wt=icon(Dt,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},Nt),Ft),Ut),{},{symbol:St,title:Ct,titleId:At,maskId:Rt}));if(!Wt)return log("Could not find icon",Dt),null;var Zt=Wt.abstract,Kt={ref:lt};return Object.keys(ft).forEach(function(cn){FontAwesomeIcon.defaultProps.hasOwnProperty(cn)||(Kt[cn]=ft[cn])}),convertCurry(Zt[0],Kt)});FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(ft){(function(){var lt={}.hasOwnProperty;function dt(){for(var vt=[],St=0;St<arguments.length;St++){var Et=arguments[St];if(Et){var Ct=typeof Et;if(Ct==="string"||Ct==="number")vt.push(Et);else if(Array.isArray(Et)){if(Et.length){var At=dt.apply(null,Et);At&&vt.push(At)}}else if(Ct==="object"){if(Et.toString!==Object.prototype.toString&&!Et.toString.toString().includes("[native code]")){vt.push(Et.toString());continue}for(var Rt in Et)lt.call(Et,Rt)&&Et[Rt]&&vt.push(Rt)}}}return vt.join(" ")}ft.exports?(dt.default=dt,ft.exports=dt):window.classNames=dt})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(ft){for(var lt,dt=1,vt=arguments.length;dt<vt;dt++){lt=arguments[dt];for(var St in lt)Object.prototype.hasOwnProperty.call(lt,St)&&(ft[St]=lt[St])}return ft},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(ft,lt){var dt={};for(var vt in ft)Object.prototype.hasOwnProperty.call(ft,vt)&&lt.indexOf(vt)<0&&(dt[vt]=ft[vt]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,vt=Object.getOwnPropertySymbols(ft);St<vt.length;St++)lt.indexOf(vt[St])<0&&Object.prototype.propertyIsEnumerable.call(ft,vt[St])&&(dt[vt[St]]=ft[vt[St]]);return dt};function Tree2Element(ft){return ft&&ft.map(function(lt,dt){return React.createElement(lt.tag,__assign({key:dt},lt.attr),Tree2Element(lt.child))})}function GenIcon(ft){return function(lt){return React.createElement(IconBase,__assign({attr:__assign({},ft.attr)},lt),Tree2Element(ft.child))}}function IconBase(ft){var lt=function(dt){var vt=ft.attr,St=ft.size,Et=ft.title,Ct=__rest(ft,["attr","size","title"]),At=St||dt.size||"1em",Rt;return dt.className&&(Rt=dt.className),ft.className&&(Rt=(Rt?Rt+" ":"")+ft.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},dt.attr,vt,Ct,{className:Rt,style:__assign(__assign({color:ft.color||dt.color},dt.style),ft.style),height:At,width:At,xmlns:"http://www.w3.org/2000/svg"}),Et&&React.createElement("title",null,Et),ft.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(dt){return lt(dt)}):lt(DefaultContext)}function HiChevronDown(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(ft)}function HiStar(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(ft)}function HiX(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(ft)}function HiOutlineChevronDown(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}}]})(ft)}function HiOutlineChevronLeft(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(ft)}function HiOutlineChevronRight(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(ft)}function HiOutlineChevronUp(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"}}]})(ft)}function HiOutlineX(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}}]})(ft)}function isObject$1(ft){return ft!==null&&typeof ft=="object"&&ft.constructor===Object}function cloneDeep(ft){if(!isObject$1(ft))return ft;const lt={...ft};return Object.keys(ft).forEach(dt=>{lt[dt]=cloneDeep(ft[dt])}),lt}function mergeDeep(ft,lt){if(isObject$1(lt)&&Object.keys(lt).length===0)return cloneDeep({...ft,...lt});let dt={...ft,...lt};return isObject$1(lt)&&isObject$1(ft)&&Object.keys(lt).forEach(vt=>{isObject$1(lt[vt])&&vt in ft&&isObject$1(ft[vt])?dt[vt]=mergeDeep(ft[vt],lt[vt]):dt[vt]=isObject$1(lt[vt])?cloneDeep(lt[vt]):lt[vt]}),dt}const theme$1={accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{root:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",wrapper:"flex items-center",color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg"},closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300"}}},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"}},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center w-10 h-10 bg-gray-100 dark:bg-gray-600"}},avatarGroupCounter:{root:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},avatarGroup:{root:{base:"flex -space-x-4"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400"},disabled:"cursor-not-allowed opacity-50",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"!block bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{base:"relative h-full w-full",indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none",scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},darkThemeToggle:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"},dropdown:{floating:{target:"w-fit",base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",content:"py-1 text-sm text-gray-700 dark:text-gray-200",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},divider:"my-1 h-px bg-gray-100 dark:bg-gray-600"},arrowIcon:"ml-2 h-4 w-4",inlineWrapper:"flex items-center",content:"py-1"},footer:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800",groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},fileInput:{base:"flex",field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},label:{base:"text-sm font-medium",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"},disabled:"opacity-50"},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{base:"flex",field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},helperText:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}},listGroup:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",item:{active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},base:"flex w-full cursor-pointer border-b border-gray-200 py-2 px-4 first:rounded-t-lg last:rounded-b-lg last:border-b-0 dark:border-gray-600",href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}},modal:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},rating:{base:"flex items-center",star:{sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"},filled:"text-yellow-400",empty:"text-gray-300 dark:text-gray-500"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},sidebar:{base:"h-full",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800",collapsed:{on:"w-16",off:"w-64"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"flex items-center justify-center rounded-full text-center font-medium leading-none text-blue-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},toast:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden",toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"}},table:{wrapper:"relative overflow-x-auto shadow-md sm:rounded-lg",base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",head:{base:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",cell:{base:"px-6 py-3"}},row:{hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"},cell:{base:"px-6 py-4"}},timeline:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"},item:{base:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},point:{base:{horizontal:"flex items-center",vertical:""},marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900",base:"h-3 w-3 text-blue-600 dark:text-blue-300"}},line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex"},content:{base:"mt-3 sm:pr-8",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white",body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"}}}},ThemeContext=reactExports.createContext({theme:theme$1});function useTheme(){return reactExports.useContext(ThemeContext)}const AccordionPanelContext=reactExports.createContext(void 0);function useAccordionContext(){const ft=reactExports.useContext(AccordionPanelContext);if(!ft)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return ft}const AccordionContent=({children:ft,className:lt,theme:dt={},...vt})=>{const{isOpen:St}=useAccordionContext(),Et=mergeDeep(useTheme().theme.accordion.content,dt);return jsx("div",{className:classNames(Et.base,lt),"data-testid":"flowbite-accordion-content",hidden:!St,...vt,children:ft})},AccordionPanel=({children:ft,...lt})=>{const{alwaysOpen:dt}=lt,[vt,St]=reactExports.useState(lt.isOpen),Et=dt?{...lt,isOpen:vt,setOpen:()=>St(!vt)}:lt;return jsx(AccordionPanelContext.Provider,{value:Et,children:ft})},AccordionTitle=({as:ft="h2",children:lt,className:dt,theme:vt={},...St})=>{const{arrowIcon:Et,flush:Ct,isOpen:At,setOpen:Rt}=useAccordionContext(),Dt=()=>typeof Rt<"u"&&Rt(),Nt=mergeDeep(useTheme().theme.accordion.title,vt);return jsxs("button",{className:classNames(Nt.base,Nt.flush[Ct?"on":"off"],Nt.open[At?"on":"off"],dt),onClick:Dt,type:"button",...St,children:[jsx(ft,{className:Nt.heading,"data-testid":"flowbite-accordion-heading",children:lt}),Et&&jsx(Et,{"aria-hidden":!0,className:classNames(Nt.arrow.base,Nt.arrow.open[At?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},AccordionComponent=({alwaysOpen:ft=!1,arrowIcon:lt=HiChevronDown,children:dt,flush:vt=!1,collapseAll:St=!1,className:Et,theme:Ct={},...At})=>{const[Rt,Dt]=reactExports.useState(St?-1:0),Nt=reactExports.useMemo(()=>reactExports.Children.map(dt,(Ut,Wt)=>reactExports.cloneElement(Ut,{alwaysOpen:ft,arrowIcon:lt,flush:vt,isOpen:Rt===Wt,setOpen:()=>Dt(Wt)})),[ft,lt,dt,vt,Rt]),Ft=mergeDeep(useTheme().theme.accordion.root,Ct);return jsx("div",{className:classNames(Ft.base,Ft.flush[vt?"on":"off"],Et),"data-testid":"flowbite-accordion",...At,children:Nt})};AccordionComponent.displayName="Accordion";AccordionPanel.displayName="Accordion.Panel";AccordionTitle.displayName="Accordion.Title";AccordionContent.displayName="Accordion.Content";Object.assign(AccordionComponent,{Panel:AccordionPanel,Title:AccordionTitle,Content:AccordionContent});const AvatarGroup=({children:ft,className:lt,theme:dt={},...vt})=>{const St=mergeDeep(useTheme().theme.avatarGroup.root,dt);return jsx("div",{"data-testid":"avatar-group-element",className:classNames(St.base,lt),...vt,children:ft})};AvatarGroup.displayName="Avatar.Group";const AvatarGroupCounter=({total:ft,href:lt,className:dt,theme:vt={}})=>{const St=mergeDeep(useTheme().theme.avatarGroupCounter.root,vt);return jsxs("a",{className:classNames(St.base,dt),href:lt,children:["+",ft]})};AvatarGroupCounter.displayName="Avatar.GroupCounter";const AvatarComponent=({alt:ft="",bordered:lt=!1,children:dt,img:vt,color:St="light",rounded:Et=!1,size:Ct="md",stacked:At=!1,status:Rt,statusPosition:Dt="top-left",placeholderInitials:Nt="",className:Ft,theme:Ut={},...Wt})=>{const Zt=mergeDeep(useTheme().theme.avatar,Ut),Kt=classNames(lt&&Zt.root.bordered,lt&&Zt.root.color[St],Et&&Zt.root.rounded,At&&Zt.root.stacked,Zt.img.on,Zt.root.size[Ct]),cn={alt:ft,className:classNames(Kt,Zt.img.on),"data-testid":"flowbite-avatar-img"};return jsxs("div",{className:classNames(Zt.root.base,Ft),"data-testid":"flowbite-avatar",...Wt,children:[jsxs("div",{className:"relative",children:[vt?typeof vt=="string"?jsx("img",{...cn,src:vt}):vt(cn):Nt?jsx("div",{className:classNames(Zt.img.off,Zt.initials.base,Et&&Zt.root.rounded,At&&Zt.root.stacked,lt&&Zt.root.bordered,lt&&Zt.root.color[St]),"data-testid":"flowbite-avatar-initials-placeholder",children:jsx("span",{className:classNames(Zt.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:Nt})}):jsx("div",{className:classNames(Kt,Zt.img.off),"data-testid":"flowbite-avatar-img",children:jsx("svg",{className:Zt.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),Rt&&jsx("span",{"data-testid":"flowbite-avatar-status",className:classNames(Zt.status.base,Zt.status[Rt],Zt.root.statusPosition[Dt])})]}),dt&&jsx("div",{children:dt})]})};AvatarComponent.displayName="Avatar";Object.assign(AvatarComponent,{Group:AvatarGroup,Counter:AvatarGroupCounter});const Badge=({children:ft,color:lt="info",href:dt,icon:vt,size:St="xs",className:Et,theme:Ct={},...At})=>{const Rt=mergeDeep(useTheme().theme.badge,Ct),Dt=()=>jsxs("span",{className:classNames(Rt.root.base,Rt.root.color[lt],Rt.icon[vt?"on":"off"],Rt.root.size[St],Et),"data-testid":"flowbite-badge",...At,children:[vt&&jsx(vt,{"aria-hidden":!0,className:Rt.icon.size[St],"data-testid":"flowbite-badge-icon"}),ft&&jsx("span",{children:ft})]});return dt?jsx("a",{className:Rt.root.href,href:dt,children:jsx(Dt,{})}):jsx(Dt,{})},BreadcrumbItem=reactExports.forwardRef(({children:ft,className:lt,href:dt,icon:vt,theme:St={},...Et},Ct)=>{const At=typeof dt<"u",Rt=At?"a":"span",Dt=mergeDeep(useTheme().theme.breadcrumb.item,St);return jsxs("li",{className:classNames(Dt.base,lt),...Et,children:[jsx(HiOutlineChevronRight,{"aria-hidden":!0,className:Dt.chevron,"data-testid":"flowbite-breadcrumb-separator"}),jsxs(Rt,{ref:Ct,className:Dt.href[At?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:dt,children:[vt&&jsx(vt,{"aria-hidden":!0,className:Dt.icon}),ft]})]})});BreadcrumbItem.displayName="Breadcrumb.Item";const BreadcrumbComponent=({children:ft,className:lt,theme:dt={},...vt})=>{const St=mergeDeep(useTheme().theme.breadcrumb.root,dt);return jsx("nav",{"aria-label":"Breadcrumb",className:classNames(St.base,lt),...vt,children:jsx("ol",{className:St.list,children:ft})})};BreadcrumbComponent.displayName="Breadcrumb";Object.assign(BreadcrumbComponent,{Item:BreadcrumbItem});const ButtonGroup=({children:ft,outline:lt,pill:dt,className:vt,...St})=>{const Et=reactExports.useMemo(()=>reactExports.Children.map(ft,(At,Rt)=>reactExports.cloneElement(At,{outline:lt,pill:dt,positionInGroup:Rt===0?"start":Rt===ft.length-1?"end":"middle"})),[ft,lt,dt]),Ct=useTheme().theme.buttonGroup;return jsx("div",{className:classNames(Ct.base,vt),role:"group",...St,children:Et})};ButtonGroup.displayName="Button.Group";const ButtonComponent=reactExports.forwardRef(({children:ft,color:lt="info",disabled:dt=!1,gradientDuoTone:vt,gradientMonochrome:St,href:Et,label:Ct,outline:At=!1,pill:Rt=!1,fullSized:Dt,positionInGroup:Nt="none",size:Ft="md",className:Ut,...Wt},Zt)=>{const Kt=typeof Et<"u",{buttonGroup:cn,button:hn}=useTheme().theme,dn=Kt?"a":"button",pn=Wt;return jsx(dn,{className:classNames(dt&&hn.disabled,!vt&&!St&&hn.color[lt],vt&&!St&&hn.gradientDuoTone[vt],!vt&&St&&hn.gradient[St],cn.position[Nt],At&&(hn.outline.color[lt]??hn.outline.color.default),hn.base,hn.pill[Rt?"on":"off"],Dt&&hn.fullSized,Ut),disabled:dt,href:Et,type:Kt?void 0:"button",ref:Zt,...pn,children:jsx("span",{className:classNames(hn.inner.base,hn.inner.position[Nt],hn.outline[At?"on":"off"],hn.outline.pill[At&&Rt?"on":"off"],hn.size[Ft],At&&!hn.outline.color[lt]&&hn.inner.outline),children:jsxs(Fragment,{children:[typeof ft<"u"&&ft,typeof Ct<"u"&&jsx("span",{className:hn.label,"data-testid":"flowbite-button-label",children:Ct})]})})})});ButtonComponent.displayName="Button";const Button=Object.assign(ButtonComponent,{Group:ButtonGroup});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n$3=function(ft,lt){return(n$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,vt){dt.__proto__=vt}||function(dt,vt){for(var St in vt)vt.hasOwnProperty(St)&&(dt[St]=vt[St])})(ft,lt)},o$3,r$3,i$5=(function(ft){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var lt={}.hasOwnProperty;function dt(){for(var vt=[],St=0;St<arguments.length;St++){var Et=arguments[St];if(Et){var Ct=typeof Et;if(Ct==="string"||Ct==="number")vt.push(Et);else if(Array.isArray(Et)&&Et.length){var At=dt.apply(null,Et);At&&vt.push(At)}else if(Ct==="object")for(var Rt in Et)lt.call(Et,Rt)&&Et[Rt]&&vt.push(Rt)}}return vt.join(" ")}ft.exports?(dt.default=dt,ft.exports=dt):window.classNames=dt})()}(r$3={path:o$3,exports:{},require:function(ft,lt){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(lt==null&&r$3.path)}},r$3.exports),r$3.exports);function s$2(ft,lt,dt){var vt,St,Et,Ct,At;function Rt(){var Nt=Date.now()-Ct;Nt<lt&&Nt>=0?vt=setTimeout(Rt,lt-Nt):(vt=null,dt||(At=ft.apply(Et,St),Et=St=null))}lt==null&&(lt=100);var Dt=function(){Et=this,St=arguments,Ct=Date.now();var Nt=dt&&!vt;return vt||(vt=setTimeout(Rt,lt)),Nt&&(At=ft.apply(Et,St),Et=St=null),At};return Dt.clear=function(){vt&&(clearTimeout(vt),vt=null)},Dt.flush=function(){vt&&(At=ft.apply(Et,St),Et=St=null,clearTimeout(vt),vt=null)},Dt}s$2.debounce=s$2;var l$5=s$2;(function(ft,lt){lt===void 0&&(lt={});var dt=lt.insertAt;if(ft&&typeof document<"u"){var vt=document.head||document.getElementsByTagName("head")[0],St=document.createElement("style");St.type="text/css",dt==="top"&&vt.firstChild?vt.insertBefore(St,vt.firstChild):vt.appendChild(St),St.styleSheet?St.styleSheet.cssText=ft:St.appendChild(document.createTextNode(ft))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var a$2,c$5=(a$2="indiana-scroll-container",function(ft,lt){if(!ft)return a$2;var dt;typeof ft=="string"?dt=ft:lt=ft;var vt=a$2;return dt&&(vt+="__"+dt),vt+(lt?Object.keys(lt).reduce(function(St,Et){var Ct=lt[Et];return Ct&&(St+=" "+(typeof Ct=="boolean"?vt+"--"+Et:vt+"--"+Et+"_"+Ct)),St},""):"")});(function(ft){function lt(dt){var vt=ft.call(this,dt)||this;return vt.onEndScroll=function(){vt.scrolling=!1,!vt.pressed&&vt.started&&vt.processEnd()},vt.onScroll=function(St){var Et=vt.container.current;Et.scrollLeft===vt.scrollLeft&&Et.scrollTop===vt.scrollTop||(vt.scrolling=!0,vt.processScroll(St),vt.onEndScroll())},vt.onTouchStart=function(St){var Et=vt.props.nativeMobileScroll;if(vt.isDraggable(St.target))if(vt.internal=!0,Et&&vt.scrolling)vt.pressed=!0;else{var Ct=St.touches[0];vt.processClick(St,Ct.clientX,Ct.clientY),!Et&&vt.props.stopPropagation&&St.stopPropagation()}},vt.onTouchEnd=function(St){var Et=vt.props.nativeMobileScroll;vt.pressed&&(!vt.started||vt.scrolling&&Et?vt.pressed=!1:vt.processEnd(),vt.forceUpdate())},vt.onTouchMove=function(St){var Et=vt.props.nativeMobileScroll;if(vt.pressed&&(!Et||!vt.isMobile)){var Ct=St.touches[0];Ct&&vt.processMove(St,Ct.clientX,Ct.clientY),St.preventDefault(),vt.props.stopPropagation&&St.stopPropagation()}},vt.onMouseDown=function(St){vt.isDraggable(St.target)&&vt.isScrollable()&&(vt.internal=!0,vt.props.buttons.indexOf(St.button)!==-1&&(vt.processClick(St,St.clientX,St.clientY),St.preventDefault(),vt.props.stopPropagation&&St.stopPropagation()))},vt.onMouseMove=function(St){vt.pressed&&(vt.processMove(St,St.clientX,St.clientY),St.preventDefault(),vt.props.stopPropagation&&St.stopPropagation())},vt.onMouseUp=function(St){vt.pressed&&(vt.started?vt.processEnd():(vt.internal=!1,vt.pressed=!1,vt.forceUpdate(),vt.props.onClick&&vt.props.onClick(St)),St.preventDefault(),vt.props.stopPropagation&&St.stopPropagation())},vt.container=React.createRef(),vt.onEndScroll=l$5(vt.onEndScroll,300),vt.scrolling=!1,vt.started=!1,vt.pressed=!1,vt.internal=!1,vt.getRef=vt.getRef.bind(vt),vt}return function(dt,vt){function St(){this.constructor=dt}n$3(dt,vt),dt.prototype=vt===null?Object.create(vt):(St.prototype=vt.prototype,new St)}(lt,ft),lt.prototype.componentDidMount=function(){var dt=this.props.nativeMobileScroll,vt=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),vt.addEventListener("touchstart",this.onTouchStart,{passive:!1}),vt.addEventListener("mousedown",this.onMouseDown,{passive:!1}),dt&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},lt.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},lt.prototype.getElement=function(){return this.container.current},lt.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},lt.prototype.isDraggable=function(dt){var vt=this.props.ignoreElements;if(vt){var St=dt.closest(vt);return St===null||St.contains(this.getElement())}return!0},lt.prototype.isScrollable=function(){var dt=this.container.current;return dt&&(dt.scrollWidth>dt.clientWidth||dt.scrollHeight>dt.clientHeight)},lt.prototype.processClick=function(dt,vt,St){var Et=this.container.current;this.scrollLeft=Et.scrollLeft,this.scrollTop=Et.scrollTop,this.clientX=vt,this.clientY=St,this.pressed=!0},lt.prototype.processStart=function(dt){dt===void 0&&(dt=!0);var vt=this.props.onStartScroll;this.started=!0,dt&&document.body.classList.add("indiana-dragging"),vt&&vt({external:!this.internal}),this.forceUpdate()},lt.prototype.processScroll=function(dt){if(this.started){var vt=this.props.onScroll;vt&&vt({external:!this.internal})}else this.processStart(!1)},lt.prototype.processMove=function(dt,vt,St){var Et=this.props,Ct=Et.horizontal,At=Et.vertical,Rt=Et.activationDistance,Dt=Et.onScroll,Nt=this.container.current;this.started?(Ct&&(Nt.scrollLeft-=vt-this.clientX),At&&(Nt.scrollTop-=St-this.clientY),Dt&&Dt({external:!this.internal}),this.clientX=vt,this.clientY=St,this.scrollLeft=Nt.scrollLeft,this.scrollTop=Nt.scrollTop):(Ct&&Math.abs(vt-this.clientX)>Rt||At&&Math.abs(St-this.clientY)>Rt)&&(this.clientX=vt,this.clientY=St,this.processStart())},lt.prototype.processEnd=function(){var dt=this.props.onEndScroll;this.container.current&&dt&&dt({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},lt.prototype.getRef=function(dt){[this.container,this.props.innerRef].forEach(function(vt){vt&&(typeof vt=="function"?vt(dt):vt.current=dt)})},lt.prototype.render=function(){var dt=this.props,vt=dt.children,St=dt.draggingClassName,Et=dt.className,Ct=dt.style,At=dt.hideScrollbars,Rt=dt.component;return React.createElement(Rt,{className:i$5(Et,this.pressed&&St,c$5({dragging:this.pressed,"hide-scrollbars":At,"native-scroll":this.isMobile})),style:Ct,ref:this.getRef,onScroll:this.onScroll},vt)},lt.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},lt})(reactExports.PureComponent);const Checkbox=reactExports.forwardRef(({theme:ft={},className:lt,...dt},vt)=>{const St=mergeDeep(useTheme().theme.checkbox,ft);return jsx("input",{ref:vt,className:classNames(St.root.base,lt),type:"checkbox",...dt})});Checkbox.displayName="Checkbox";function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ft){const lt=Math.random()*16|0;return(ft=="x"?lt:lt&3|8).toString(16)})}function t$1(ft){return ft.split("-")[1]}function e(ft){return ft==="y"?"height":"width"}function n$2(ft){return ft.split("-")[0]}function o$2(ft){return["top","bottom"].includes(n$2(ft))?"x":"y"}function r$2(ft,lt,dt){let{reference:vt,floating:St}=ft;const Et=vt.x+vt.width/2-St.width/2,Ct=vt.y+vt.height/2-St.height/2,At=o$2(lt),Rt=e(At),Dt=vt[Rt]/2-St[Rt]/2,Nt=At==="x";let Ft;switch(n$2(lt)){case"top":Ft={x:Et,y:vt.y-St.height};break;case"bottom":Ft={x:Et,y:vt.y+vt.height};break;case"right":Ft={x:vt.x+vt.width,y:Ct};break;case"left":Ft={x:vt.x-St.width,y:Ct};break;default:Ft={x:vt.x,y:vt.y}}switch(t$1(lt)){case"start":Ft[At]-=Dt*(dt&&Nt?-1:1);break;case"end":Ft[At]+=Dt*(dt&&Nt?-1:1)}return Ft}const i$4=async(ft,lt,dt)=>{const{placement:vt="bottom",strategy:St="absolute",middleware:Et=[],platform:Ct}=dt,At=Et.filter(Boolean),Rt=await(Ct.isRTL==null?void 0:Ct.isRTL(lt));let Dt=await Ct.getElementRects({reference:ft,floating:lt,strategy:St}),{x:Nt,y:Ft}=r$2(Dt,vt,Rt),Ut=vt,Wt={},Zt=0;for(let Kt=0;Kt<At.length;Kt++){const{name:cn,fn:hn}=At[Kt],{x:dn,y:pn,data:gn,reset:vn}=await hn({x:Nt,y:Ft,initialPlacement:vt,placement:Ut,strategy:St,middlewareData:Wt,rects:Dt,platform:Ct,elements:{reference:ft,floating:lt}});Nt=dn??Nt,Ft=pn??Ft,Wt={...Wt,[cn]:{...Wt[cn],...gn}},vn&&Zt<=50&&(Zt++,typeof vn=="object"&&(vn.placement&&(Ut=vn.placement),vn.rects&&(Dt=vn.rects===!0?await Ct.getElementRects({reference:ft,floating:lt,strategy:St}):vn.rects),{x:Nt,y:Ft}=r$2(Dt,Ut,Rt)),Kt=-1)}return{x:Nt,y:Ft,placement:Ut,strategy:St,middlewareData:Wt}};function a$1(ft){return typeof ft!="number"?function(lt){return{top:0,right:0,bottom:0,left:0,...lt}}(ft):{top:ft,right:ft,bottom:ft,left:ft}}function l$4(ft){return{...ft,top:ft.y,left:ft.x,right:ft.x+ft.width,bottom:ft.y+ft.height}}async function s$1(ft,lt){var dt;lt===void 0&&(lt={});const{x:vt,y:St,platform:Et,rects:Ct,elements:At,strategy:Rt}=ft,{boundary:Dt="clippingAncestors",rootBoundary:Nt="viewport",elementContext:Ft="floating",altBoundary:Ut=!1,padding:Wt=0}=lt,Zt=a$1(Wt),Kt=At[Ut?Ft==="floating"?"reference":"floating":Ft],cn=l$4(await Et.getClippingRect({element:(dt=await(Et.isElement==null?void 0:Et.isElement(Kt)))==null||dt?Kt:Kt.contextElement||await(Et.getDocumentElement==null?void 0:Et.getDocumentElement(At.floating)),boundary:Dt,rootBoundary:Nt,strategy:Rt})),hn=Ft==="floating"?{...Ct.floating,x:vt,y:St}:Ct.reference,dn=await(Et.getOffsetParent==null?void 0:Et.getOffsetParent(At.floating)),pn=await(Et.isElement==null?void 0:Et.isElement(dn))&&await(Et.getScale==null?void 0:Et.getScale(dn))||{x:1,y:1},gn=l$4(Et.convertOffsetParentRelativeRectToViewportRelativeRect?await Et.convertOffsetParentRelativeRectToViewportRelativeRect({rect:hn,offsetParent:dn,strategy:Rt}):hn);return{top:(cn.top-gn.top+Zt.top)/pn.y,bottom:(gn.bottom-cn.bottom+Zt.bottom)/pn.y,left:(cn.left-gn.left+Zt.left)/pn.x,right:(gn.right-cn.right+Zt.right)/pn.x}}const c$4=Math.min,f$4=Math.max;function u$4(ft,lt,dt){return f$4(ft,c$4(lt,dt))}const m$3=ft=>({name:"arrow",options:ft,async fn(lt){const{element:dt,padding:vt=0}=ft||{},{x:St,y:Et,placement:Ct,rects:At,platform:Rt}=lt;if(dt==null)return{};const Dt=a$1(vt),Nt={x:St,y:Et},Ft=o$2(Ct),Ut=e(Ft),Wt=await Rt.getDimensions(dt),Zt=Ft==="y"?"top":"left",Kt=Ft==="y"?"bottom":"right",cn=At.reference[Ut]+At.reference[Ft]-Nt[Ft]-At.floating[Ut],hn=Nt[Ft]-At.reference[Ft],dn=await(Rt.getOffsetParent==null?void 0:Rt.getOffsetParent(dt));let pn=dn?Ft==="y"?dn.clientHeight||0:dn.clientWidth||0:0;pn===0&&(pn=At.floating[Ut]);const gn=cn/2-hn/2,vn=Dt[Zt],bn=pn-Wt[Ut]-Dt[Kt],$n=pn/2-Wt[Ut]/2+gn,Tn=u$4(vn,$n,bn),In=t$1(Ct)!=null&&$n!=Tn&&At.reference[Ut]/2-($n<vn?Dt[Zt]:Dt[Kt])-Wt[Ut]/2<0;return{[Ft]:Nt[Ft]-(In?$n<vn?vn-$n:bn-$n:0),data:{[Ft]:Tn,centerOffset:$n-Tn}}}}),g$2=["top","right","bottom","left"],d$4=g$2.reduce((ft,lt)=>ft.concat(lt,lt+"-start",lt+"-end"),[]),p$3={left:"right",right:"left",bottom:"top",top:"bottom"};function h$4(ft){return ft.replace(/left|right|bottom|top/g,lt=>p$3[lt])}function y$4(ft,lt,dt){dt===void 0&&(dt=!1);const vt=t$1(ft),St=o$2(ft),Et=e(St);let Ct=St==="x"?vt===(dt?"end":"start")?"right":"left":vt==="start"?"bottom":"top";return lt.reference[Et]>lt.floating[Et]&&(Ct=h$4(Ct)),{main:Ct,cross:h$4(Ct)}}const x$3={start:"end",end:"start"};function w$2(ft){return ft.replace(/start|end/g,lt=>x$3[lt])}const v$3=function(ft){return ft===void 0&&(ft={}),{name:"autoPlacement",options:ft,async fn(lt){var dt,vt,St;const{rects:Et,middlewareData:Ct,placement:At,platform:Rt,elements:Dt}=lt,{crossAxis:Nt=!1,alignment:Ft,allowedPlacements:Ut=d$4,autoAlignment:Wt=!0,...Zt}=ft,Kt=Ft!==void 0||Ut===d$4?function(Pn,zn,An){return(Pn?[...An.filter(Gn=>t$1(Gn)===Pn),...An.filter(Gn=>t$1(Gn)!==Pn)]:An.filter(Gn=>n$2(Gn)===Gn)).filter(Gn=>!Pn||t$1(Gn)===Pn||!!zn&&w$2(Gn)!==Gn)}(Ft||null,Wt,Ut):Ut,cn=await s$1(lt,Zt),hn=((dt=Ct.autoPlacement)==null?void 0:dt.index)||0,dn=Kt[hn];if(dn==null)return{};const{main:pn,cross:gn}=y$4(dn,Et,await(Rt.isRTL==null?void 0:Rt.isRTL(Dt.floating)));if(At!==dn)return{reset:{placement:Kt[0]}};const vn=[cn[n$2(dn)],cn[pn],cn[gn]],bn=[...((vt=Ct.autoPlacement)==null?void 0:vt.overflows)||[],{placement:dn,overflows:vn}],$n=Kt[hn+1];if($n)return{data:{index:hn+1,overflows:bn},reset:{placement:$n}};const Tn=bn.map(Pn=>{const zn=t$1(Pn.placement);return[Pn.placement,zn&&Nt?Pn.overflows.slice(0,2).reduce((An,Gn)=>An+Gn,0):Pn.overflows[0],Pn.overflows]}).sort((Pn,zn)=>Pn[1]-zn[1]),In=((St=Tn.filter(Pn=>Pn[2].slice(0,t$1(Pn[0])?2:3).every(zn=>zn<=0))[0])==null?void 0:St[0])||Tn[0][0];return In!==At?{data:{index:hn+1,overflows:bn},reset:{placement:In}}:{}}}},b$4=function(ft){return ft===void 0&&(ft={}),{name:"flip",options:ft,async fn(lt){var dt;const{placement:vt,middlewareData:St,rects:Et,initialPlacement:Ct,platform:At,elements:Rt}=lt,{mainAxis:Dt=!0,crossAxis:Nt=!0,fallbackPlacements:Ft,fallbackStrategy:Ut="bestFit",fallbackAxisSideDirection:Wt="none",flipAlignment:Zt=!0,...Kt}=ft,cn=n$2(vt),hn=n$2(Ct)===Ct,dn=await(At.isRTL==null?void 0:At.isRTL(Rt.floating)),pn=Ft||(hn||!Zt?[h$4(Ct)]:function(zn){const An=h$4(zn);return[w$2(zn),An,w$2(An)]}(Ct));Ft||Wt==="none"||pn.push(...function(zn,An,Gn,xn){const Qn=t$1(zn);let qn=function(nr,Un,Nn){const jn=["left","right"],Ln=["right","left"],Cn=["top","bottom"],tr=["bottom","top"];switch(nr){case"top":case"bottom":return Nn?Un?Ln:jn:Un?jn:Ln;case"left":case"right":return Un?Cn:tr;default:return[]}}(n$2(zn),Gn==="start",xn);return Qn&&(qn=qn.map(nr=>nr+"-"+Qn),An&&(qn=qn.concat(qn.map(w$2)))),qn}(Ct,Zt,Wt,dn));const gn=[Ct,...pn],vn=await s$1(lt,Kt),bn=[];let $n=((dt=St.flip)==null?void 0:dt.overflows)||[];if(Dt&&bn.push(vn[cn]),Nt){const{main:zn,cross:An}=y$4(vt,Et,dn);bn.push(vn[zn],vn[An])}if($n=[...$n,{placement:vt,overflows:bn}],!bn.every(zn=>zn<=0)){var Tn,In;const zn=(((Tn=St.flip)==null?void 0:Tn.index)||0)+1,An=gn[zn];if(An)return{data:{index:zn,overflows:$n},reset:{placement:An}};let Gn=(In=$n.filter(xn=>xn.overflows[0]<=0).sort((xn,Qn)=>xn.overflows[1]-Qn.overflows[1])[0])==null?void 0:In.placement;if(!Gn)switch(Ut){case"bestFit":{var Pn;const xn=(Pn=$n.map(Qn=>[Qn.placement,Qn.overflows.filter(qn=>qn>0).reduce((qn,nr)=>qn+nr,0)]).sort((Qn,qn)=>Qn[1]-qn[1])[0])==null?void 0:Pn[0];xn&&(Gn=xn);break}case"initialPlacement":Gn=Ct}if(vt!==Gn)return{reset:{placement:Gn}}}return{}}}},O$2=function(ft){return ft===void 0&&(ft=0),{name:"offset",options:ft,async fn(lt){const{x:dt,y:vt}=lt,St=await async function(Et,Ct){const{placement:At,platform:Rt,elements:Dt}=Et,Nt=await(Rt.isRTL==null?void 0:Rt.isRTL(Dt.floating)),Ft=n$2(At),Ut=t$1(At),Wt=o$2(At)==="x",Zt=["left","top"].includes(Ft)?-1:1,Kt=Nt&&Wt?-1:1,cn=typeof Ct=="function"?Ct(Et):Ct;let{mainAxis:hn,crossAxis:dn,alignmentAxis:pn}=typeof cn=="number"?{mainAxis:cn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...cn};return Ut&&typeof pn=="number"&&(dn=Ut==="end"?-1*pn:pn),Wt?{x:dn*Kt,y:hn*Zt}:{x:hn*Zt,y:dn*Kt}}(lt,ft);return{x:dt+St.x,y:vt+St.y,data:St}}}};function D$3(ft){return ft==="x"?"y":"x"}const E$4=function(ft){return ft===void 0&&(ft={}),{name:"shift",options:ft,async fn(lt){const{x:dt,y:vt,placement:St}=lt,{mainAxis:Et=!0,crossAxis:Ct=!1,limiter:At={fn:cn=>{let{x:hn,y:dn}=cn;return{x:hn,y:dn}}},...Rt}=ft,Dt={x:dt,y:vt},Nt=await s$1(lt,Rt),Ft=o$2(n$2(St)),Ut=D$3(Ft);let Wt=Dt[Ft],Zt=Dt[Ut];if(Et){const cn=Ft==="y"?"bottom":"right";Wt=u$4(Wt+Nt[Ft==="y"?"top":"left"],Wt,Wt-Nt[cn])}if(Ct){const cn=Ut==="y"?"bottom":"right";Zt=u$4(Zt+Nt[Ut==="y"?"top":"left"],Zt,Zt-Nt[cn])}const Kt=At.fn({...lt,[Ft]:Wt,[Ut]:Zt});return{...Kt,data:{x:Kt.x-dt,y:Kt.y-vt}}}}};function n$1(ft){var lt;return((lt=ft.ownerDocument)==null?void 0:lt.defaultView)||window}function o$1(ft){return n$1(ft).getComputedStyle(ft)}const i$3=Math.min,r$1=Math.max,l$3=Math.round;function c$3(ft){const lt=o$1(ft);let dt=parseFloat(lt.width),vt=parseFloat(lt.height);const St=ft.offsetWidth,Et=ft.offsetHeight,Ct=l$3(dt)!==St||l$3(vt)!==Et;return Ct&&(dt=St,vt=Et),{width:dt,height:vt,fallback:Ct}}function s(ft){return h$3(ft)?(ft.nodeName||"").toLowerCase():""}let f$3;function u$3(){if(f$3)return f$3;const ft=navigator.userAgentData;return ft&&Array.isArray(ft.brands)?(f$3=ft.brands.map(lt=>lt.brand+"/"+lt.version).join(" "),f$3):navigator.userAgent}function a(ft){return ft instanceof n$1(ft).HTMLElement}function d$3(ft){return ft instanceof n$1(ft).Element}function h$3(ft){return ft instanceof n$1(ft).Node}function p$2(ft){return typeof ShadowRoot>"u"?!1:ft instanceof n$1(ft).ShadowRoot||ft instanceof ShadowRoot}function g$1(ft){const{overflow:lt,overflowX:dt,overflowY:vt,display:St}=o$1(ft);return/auto|scroll|overlay|hidden|clip/.test(lt+vt+dt)&&!["inline","contents"].includes(St)}function m$2(ft){return["table","td","th"].includes(s(ft))}function y$3(ft){const lt=/firefox/i.test(u$3()),dt=o$1(ft),vt=dt.backdropFilter||dt.WebkitBackdropFilter;return dt.transform!=="none"||dt.perspective!=="none"||!!vt&&vt!=="none"||lt&&dt.willChange==="filter"||lt&&!!dt.filter&&dt.filter!=="none"||["transform","perspective"].some(St=>dt.willChange.includes(St))||["paint","layout","strict","content"].some(St=>{const Et=dt.contain;return Et!=null&&Et.includes(St)})}function x$2(){return/^((?!chrome|android).)*safari/i.test(u$3())}function w$1(ft){return["html","body","#document"].includes(s(ft))}function v$2(ft){return d$3(ft)?ft:ft.contextElement}const b$3={x:1,y:1};function L$1(ft){const lt=v$2(ft);if(!a(lt))return b$3;const dt=lt.getBoundingClientRect(),{width:vt,height:St,fallback:Et}=c$3(lt);let Ct=(Et?l$3(dt.width):dt.width)/vt,At=(Et?l$3(dt.height):dt.height)/St;return Ct&&Number.isFinite(Ct)||(Ct=1),At&&Number.isFinite(At)||(At=1),{x:Ct,y:At}}function E$3(ft,lt,dt,vt){var St,Et;lt===void 0&&(lt=!1),dt===void 0&&(dt=!1);const Ct=ft.getBoundingClientRect(),At=v$2(ft);let Rt=b$3;lt&&(vt?d$3(vt)&&(Rt=L$1(vt)):Rt=L$1(ft));const Dt=At?n$1(At):window,Nt=x$2()&&dt;let Ft=(Ct.left+(Nt&&((St=Dt.visualViewport)==null?void 0:St.offsetLeft)||0))/Rt.x,Ut=(Ct.top+(Nt&&((Et=Dt.visualViewport)==null?void 0:Et.offsetTop)||0))/Rt.y,Wt=Ct.width/Rt.x,Zt=Ct.height/Rt.y;if(At){const Kt=n$1(At),cn=vt&&d$3(vt)?n$1(vt):vt;let hn=Kt.frameElement;for(;hn&&vt&&cn!==Kt;){const dn=L$1(hn),pn=hn.getBoundingClientRect(),gn=getComputedStyle(hn);pn.x+=(hn.clientLeft+parseFloat(gn.paddingLeft))*dn.x,pn.y+=(hn.clientTop+parseFloat(gn.paddingTop))*dn.y,Ft*=dn.x,Ut*=dn.y,Wt*=dn.x,Zt*=dn.y,Ft+=pn.x,Ut+=pn.y,hn=n$1(hn).frameElement}}return{width:Wt,height:Zt,top:Ut,right:Ft+Wt,bottom:Ut+Zt,left:Ft,x:Ft,y:Ut}}function R$1(ft){return((h$3(ft)?ft.ownerDocument:ft.document)||window.document).documentElement}function T$1(ft){return d$3(ft)?{scrollLeft:ft.scrollLeft,scrollTop:ft.scrollTop}:{scrollLeft:ft.pageXOffset,scrollTop:ft.pageYOffset}}function C$2(ft){return E$3(R$1(ft)).left+T$1(ft).scrollLeft}function F$1(ft){if(s(ft)==="html")return ft;const lt=ft.assignedSlot||ft.parentNode||p$2(ft)&&ft.host||R$1(ft);return p$2(lt)?lt.host:lt}function W$2(ft){const lt=F$1(ft);return w$1(lt)?lt.ownerDocument.body:a(lt)&&g$1(lt)?lt:W$2(lt)}function D$2(ft,lt){var dt;lt===void 0&&(lt=[]);const vt=W$2(ft),St=vt===((dt=ft.ownerDocument)==null?void 0:dt.body),Et=n$1(vt);return St?lt.concat(Et,Et.visualViewport||[],g$1(vt)?vt:[]):lt.concat(vt,D$2(vt))}function S$1(ft,lt,dt){let vt;if(lt==="viewport")vt=function(Ct,At){const Rt=n$1(Ct),Dt=R$1(Ct),Nt=Rt.visualViewport;let Ft=Dt.clientWidth,Ut=Dt.clientHeight,Wt=0,Zt=0;if(Nt){Ft=Nt.width,Ut=Nt.height;const Kt=x$2();(!Kt||Kt&&At==="fixed")&&(Wt=Nt.offsetLeft,Zt=Nt.offsetTop)}return{width:Ft,height:Ut,x:Wt,y:Zt}}(ft,dt);else if(lt==="document")vt=function(Ct){const At=R$1(Ct),Rt=T$1(Ct),Dt=Ct.ownerDocument.body,Nt=r$1(At.scrollWidth,At.clientWidth,Dt.scrollWidth,Dt.clientWidth),Ft=r$1(At.scrollHeight,At.clientHeight,Dt.scrollHeight,Dt.clientHeight);let Ut=-Rt.scrollLeft+C$2(Ct);const Wt=-Rt.scrollTop;return o$1(Dt).direction==="rtl"&&(Ut+=r$1(At.clientWidth,Dt.clientWidth)-Nt),{width:Nt,height:Ft,x:Ut,y:Wt}}(R$1(ft));else if(d$3(lt))vt=function(Ct,At){const Rt=E$3(Ct,!0,At==="fixed"),Dt=Rt.top+Ct.clientTop,Nt=Rt.left+Ct.clientLeft,Ft=a(Ct)?L$1(Ct):{x:1,y:1};return{width:Ct.clientWidth*Ft.x,height:Ct.clientHeight*Ft.y,x:Nt*Ft.x,y:Dt*Ft.y}}(lt,dt);else{const Ct={...lt};if(x$2()){var St,Et;const At=n$1(ft);Ct.x-=((St=At.visualViewport)==null?void 0:St.offsetLeft)||0,Ct.y-=((Et=At.visualViewport)==null?void 0:Et.offsetTop)||0}vt=Ct}return l$4(vt)}function A$1(ft,lt){return a(ft)&&o$1(ft).position!=="fixed"?lt?lt(ft):ft.offsetParent:null}function H$2(ft,lt){const dt=n$1(ft);let vt=A$1(ft,lt);for(;vt&&m$2(vt)&&o$1(vt).position==="static";)vt=A$1(vt,lt);return vt&&(s(vt)==="html"||s(vt)==="body"&&o$1(vt).position==="static"&&!y$3(vt))?dt:vt||function(St){let Et=F$1(St);for(;a(Et)&&!w$1(Et);){if(y$3(Et))return Et;Et=F$1(Et)}return null}(ft)||dt}function V$2(ft,lt,dt){const vt=a(lt),St=R$1(lt),Et=E$3(ft,!0,dt==="fixed",lt);let Ct={scrollLeft:0,scrollTop:0};const At={x:0,y:0};if(vt||!vt&&dt!=="fixed")if((s(lt)!=="body"||g$1(St))&&(Ct=T$1(lt)),a(lt)){const Rt=E$3(lt,!0);At.x=Rt.x+lt.clientLeft,At.y=Rt.y+lt.clientTop}else St&&(At.x=C$2(St));return{x:Et.left+Ct.scrollLeft-At.x,y:Et.top+Ct.scrollTop-At.y,width:Et.width,height:Et.height}}const O$1={getClippingRect:function(ft){let{element:lt,boundary:dt,rootBoundary:vt,strategy:St}=ft;const Et=dt==="clippingAncestors"?function(Dt,Nt){const Ft=Nt.get(Dt);if(Ft)return Ft;let Ut=D$2(Dt).filter(cn=>d$3(cn)&&s(cn)!=="body"),Wt=null;const Zt=o$1(Dt).position==="fixed";let Kt=Zt?F$1(Dt):Dt;for(;d$3(Kt)&&!w$1(Kt);){const cn=o$1(Kt),hn=y$3(Kt);cn.position==="fixed"?Wt=null:(Zt?hn||Wt:hn||cn.position!=="static"||!Wt||!["absolute","fixed"].includes(Wt.position))?Wt=cn:Ut=Ut.filter(dn=>dn!==Kt),Kt=F$1(Kt)}return Nt.set(Dt,Ut),Ut}(lt,this._c):[].concat(dt),Ct=[...Et,vt],At=Ct[0],Rt=Ct.reduce((Dt,Nt)=>{const Ft=S$1(lt,Nt,St);return Dt.top=r$1(Ft.top,Dt.top),Dt.right=i$3(Ft.right,Dt.right),Dt.bottom=i$3(Ft.bottom,Dt.bottom),Dt.left=r$1(Ft.left,Dt.left),Dt},S$1(lt,At,St));return{width:Rt.right-Rt.left,height:Rt.bottom-Rt.top,x:Rt.left,y:Rt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(ft){let{rect:lt,offsetParent:dt,strategy:vt}=ft;const St=a(dt),Et=R$1(dt);if(dt===Et)return lt;let Ct={scrollLeft:0,scrollTop:0},At={x:1,y:1};const Rt={x:0,y:0};if((St||!St&&vt!=="fixed")&&((s(dt)!=="body"||g$1(Et))&&(Ct=T$1(dt)),a(dt))){const Dt=E$3(dt);At=L$1(dt),Rt.x=Dt.x+dt.clientLeft,Rt.y=Dt.y+dt.clientTop}return{width:lt.width*At.x,height:lt.height*At.y,x:lt.x*At.x-Ct.scrollLeft*At.x+Rt.x,y:lt.y*At.y-Ct.scrollTop*At.y+Rt.y}},isElement:d$3,getDimensions:function(ft){return a(ft)?c$3(ft):ft.getBoundingClientRect()},getOffsetParent:H$2,getDocumentElement:R$1,getScale:L$1,async getElementRects(ft){let{reference:lt,floating:dt,strategy:vt}=ft;const St=this.getOffsetParent||H$2,Et=this.getDimensions;return{reference:V$2(lt,await St(dt),vt),floating:{x:0,y:0,...await Et(dt)}}},getClientRects:ft=>Array.from(ft.getClientRects()),isRTL:ft=>o$1(ft).direction==="rtl"};function P$1(ft,lt,dt,vt){vt===void 0&&(vt={});const{ancestorScroll:St=!0,ancestorResize:Et=!0,elementResize:Ct=!0,animationFrame:At=!1}=vt,Rt=St&&!At,Dt=Rt||Et?[...d$3(ft)?D$2(ft):ft.contextElement?D$2(ft.contextElement):[],...D$2(lt)]:[];Dt.forEach(Wt=>{Rt&&Wt.addEventListener("scroll",dt,{passive:!0}),Et&&Wt.addEventListener("resize",dt)});let Nt,Ft=null;if(Ct){let Wt=!0;Ft=new ResizeObserver(()=>{Wt||dt(),Wt=!1}),d$3(ft)&&!At&&Ft.observe(ft),d$3(ft)||!ft.contextElement||At||Ft.observe(ft.contextElement),Ft.observe(lt)}let Ut=At?E$3(ft):null;return At&&function Wt(){const Zt=E$3(ft);!Ut||Zt.x===Ut.x&&Zt.y===Ut.y&&Zt.width===Ut.width&&Zt.height===Ut.height||dt(),Ut=Zt,Nt=requestAnimationFrame(Wt)}(),dt(),()=>{var Wt;Dt.forEach(Zt=>{Rt&&Zt.removeEventListener("scroll",dt),Et&&Zt.removeEventListener("resize",dt)}),(Wt=Ft)==null||Wt.disconnect(),Ft=null,At&&cancelAnimationFrame(Nt)}}const z$2=(ft,lt,dt)=>{const vt=new Map,St={platform:O$1,...dt},Et={...St.platform,_c:vt};return i$4(ft,lt,{...St,platform:Et})},arrow=ft=>{const{element:lt,padding:dt}=ft;function vt(St){return Object.prototype.hasOwnProperty.call(St,"current")}return{name:"arrow",options:ft,fn(St){return vt(lt)?lt.current!=null?m$3({element:lt.current,padding:dt}).fn(St):{}:lt?m$3({element:lt,padding:dt}).fn(St):{}}}};var index$2=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(ft,lt){if(ft===lt)return!0;if(typeof ft!=typeof lt)return!1;if(typeof ft=="function"&&ft.toString()===lt.toString())return!0;let dt,vt,St;if(ft&&lt&&typeof ft=="object"){if(Array.isArray(ft)){if(dt=ft.length,dt!=lt.length)return!1;for(vt=dt;vt--!==0;)if(!deepEqual(ft[vt],lt[vt]))return!1;return!0}if(St=Object.keys(ft),dt=St.length,dt!==Object.keys(lt).length)return!1;for(vt=dt;vt--!==0;)if(!Object.prototype.hasOwnProperty.call(lt,St[vt]))return!1;for(vt=dt;vt--!==0;){const Et=St[vt];if(!(Et==="_owner"&&ft.$$typeof)&&!deepEqual(ft[Et],lt[Et]))return!1}return!0}return ft!==ft&&lt!==lt}function useLatestRef$1(ft){const lt=reactExports.useRef(ft);return index$2(()=>{lt.current=ft}),lt}function useFloating$1(ft){ft===void 0&&(ft={});const{placement:lt="bottom",strategy:dt="absolute",middleware:vt=[],platform:St,whileElementsMounted:Et,open:Ct}=ft,[At,Rt]=reactExports.useState({x:null,y:null,strategy:dt,placement:lt,middlewareData:{},isPositioned:!1}),[Dt,Nt]=reactExports.useState(vt);deepEqual(Dt,vt)||Nt(vt);const Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),Wt=reactExports.useRef(At),Zt=useLatestRef$1(Et),Kt=useLatestRef$1(St),[cn,hn]=reactExports.useState(null),[dn,pn]=reactExports.useState(null),gn=reactExports.useCallback(Pn=>{Ft.current!==Pn&&(Ft.current=Pn,hn(Pn))},[]),vn=reactExports.useCallback(Pn=>{Ut.current!==Pn&&(Ut.current=Pn,pn(Pn))},[]),bn=reactExports.useCallback(()=>{if(!Ft.current||!Ut.current)return;const Pn={placement:lt,strategy:dt,middleware:Dt};Kt.current&&(Pn.platform=Kt.current),z$2(Ft.current,Ut.current,Pn).then(zn=>{const An={...zn,isPositioned:!0};$n.current&&!deepEqual(Wt.current,An)&&(Wt.current=An,reactDomExports.flushSync(()=>{Rt(An)}))})},[Dt,lt,dt,Kt]);index$2(()=>{Ct===!1&&Wt.current.isPositioned&&(Wt.current.isPositioned=!1,Rt(Pn=>({...Pn,isPositioned:!1})))},[Ct]);const $n=reactExports.useRef(!1);index$2(()=>($n.current=!0,()=>{$n.current=!1}),[]),index$2(()=>{if(cn&&dn){if(Zt.current)return Zt.current(cn,dn,bn);bn()}},[cn,dn,bn,Zt]);const Tn=reactExports.useMemo(()=>({reference:Ft,floating:Ut,setReference:gn,setFloating:vn}),[gn,vn]),In=reactExports.useMemo(()=>({reference:cn,floating:dn}),[cn,dn]);return reactExports.useMemo(()=>({...At,update:bn,refs:Tn,elements:In,reference:gn,floating:vn}),[At,bn,Tn,In,gn,vn])}var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[ft,lt]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{ft==null&&lt(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete||(serverHandoffComplete=!0)},[]),ft}const useReactId=React$1["useId".toString()],useId=useReactId||useFloatingId;function createPubSub(){const ft=new Map;return{emit(lt,dt){var vt;(vt=ft.get(lt))==null||vt.forEach(St=>St(dt))},on(lt,dt){ft.set(lt,[...ft.get(lt)||[],dt])},off(lt,dt){ft.set(lt,(ft.get(lt)||[]).filter(vt=>vt!==dt))}}}const FloatingTreeContext=reactExports.createContext(null),useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function getDocument(ft){return(ft==null?void 0:ft.ownerDocument)||document}function getWindow(ft){return getDocument(ft).defaultView||window}function isElement(ft){return ft?ft instanceof getWindow(ft).Element:!1}function isHTMLElement(ft){return ft?ft instanceof getWindow(ft).HTMLElement:!1}function isShadowRoot(ft){if(typeof ShadowRoot>"u")return!1;const lt=getWindow(ft).ShadowRoot;return ft instanceof lt||ft instanceof ShadowRoot}function isSafari(){return/apple/i.test(navigator.vendor)}function isMouseLikePointerType(ft,lt){const dt=["mouse","pen"];return lt||dt.push("",void 0),dt.includes(ft)}function contains$1(ft,lt){if(!ft||!lt)return!1;const dt=lt.getRootNode&&lt.getRootNode();if(ft.contains(lt))return!0;if(dt&&isShadowRoot(dt)){let vt=lt;do{if(vt&&ft===vt)return!0;vt=vt.parentNode||vt.host}while(vt)}return!1}function getChildren$1(ft,lt){let dt=ft.filter(St=>{var Et;return St.parentId===lt&&((Et=St.context)==null?void 0:Et.open)})||[],vt=dt;for(;vt.length;)vt=ft.filter(St=>{var Et;return(Et=vt)==null?void 0:Et.some(Ct=>{var At;return St.parentId===Ct.id&&((At=St.context)==null?void 0:At.open)})})||[],dt=dt.concat(vt);return dt}function getTarget(ft){return"composedPath"in ft?ft.composedPath()[0]:ft.target}function isPointInPolygon(ft,lt){const[dt,vt]=ft;let St=!1;const Et=lt.length;for(let Ct=0,At=Et-1;Ct<Et;At=Ct++){const[Rt,Dt]=lt[Ct]||[0,0],[Nt,Ft]=lt[At]||[0,0];Dt>=vt!=Ft>=vt&&dt<=(Nt-Rt)*(vt-Dt)/(Ft-Dt)+Rt&&(St=!St)}return St}const svgNs="http://www.w3.org/2000/svg";function createPolygonElement(ft,lt,dt){var vt,St;const Et=isSafari(),Ct=lt.defaultView||window,At=lt.createElementNS(svgNs,"svg");Object.assign(At.style,{position:"fixed",left:(Et&&((vt=Ct.visualViewport)==null?void 0:vt.offsetLeft)||0)+"px",top:(Et&&((St=Ct.visualViewport)==null?void 0:St.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),At.setAttribute("data-type",dt?"rect":"triangle");const Rt=lt.createElementNS(svgNs,"polygon");return Rt.setAttribute("points",ft.map(Dt=>{let[Nt,Ft]=Dt;return Nt+","+Ft}).join(" ")),Object.assign(Rt.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),At.appendChild(Rt),At}function destroyPolygon(ft){ft.current&&(ft.current.remove(),ft.current=null)}function safePolygon(ft){let{restMs:lt=0,buffer:dt=.5,blockPointerEvents:vt=!0}=ft===void 0?{}:ft,St,Et=!1,Ct=!1;return Rt=>{let{x:Dt,y:Nt,placement:Ft,refs:Ut,onClose:Wt,nodeId:Zt,tree:Kt,polygonRef:cn}=Rt;return function(dn){var pn;function gn(){destroyPolygon(cn),clearTimeout(St),Wt()}if(clearTimeout(St),!Ut.domReference.current||!Ut.floating.current||Ft==null||Dt==null||Nt==null)return;const{clientX:vn,clientY:bn}=dn,$n=getTarget(dn),Tn=dn.type==="mouseleave",In=contains$1(Ut.domReference.current,$n),Pn=contains$1(Ut.floating.current,$n);if(!Tn&&In){destroyPolygon(cn);return}if(!Tn&&(In||Et&&contains$1(cn.current,$n))||Tn&&isElement(dn.relatedTarget)&&contains$1(Ut.floating.current,dn.relatedTarget)||Kt&&getChildren$1(Kt.nodesRef.current,Zt).some(Nn=>{let{context:jn}=Nn;return jn==null?void 0:jn.open}))return;if(Pn&&(Ct=!0),Pn&&!Tn&&((pn=cn.current)==null?void 0:pn.dataset.type)!=="rect"){destroyPolygon(cn);return}const zn=Ut.domReference.current.getBoundingClientRect(),An=Ut.floating.current.getBoundingClientRect(),Gn=Ft.split("-")[0],xn=Dt>An.right-An.width/2,Qn=Nt>An.bottom-An.height/2;if(Gn==="top"&&Nt>=zn.bottom-1||Gn==="bottom"&&Nt<=zn.top+1||Gn==="left"&&Dt>=zn.right-1||Gn==="right"&&Dt<=zn.left+1)return gn();let qn=[];switch(Gn){case"top":qn=[[An.left,zn.top+1],[An.left,An.bottom-1],[An.right,An.bottom-1],[An.right,zn.top+1]],Et=vn>=An.left&&vn<=An.right&&bn>=An.top&&bn<=zn.top+1;break;case"bottom":qn=[[An.left,An.top+1],[An.left,zn.bottom-1],[An.right,zn.bottom-1],[An.right,An.top+1]],Et=vn>=An.left&&vn<=An.right&&bn>=zn.bottom-1&&bn<=An.bottom;break;case"left":qn=[[An.right-1,An.bottom],[An.right-1,An.top],[zn.left+1,An.top],[zn.left+1,An.bottom]],Et=vn>=An.left&&vn<=zn.left+1&&bn>=An.top&&bn<=An.bottom;break;case"right":qn=[[zn.right-1,An.bottom],[zn.right-1,An.top],[An.left+1,An.top],[An.left+1,An.bottom]],Et=vn>=zn.right-1&&vn<=An.right&&bn>=An.top&&bn<=An.bottom;break}function nr(Nn){let[jn,Ln]=Nn;const Cn=An.width>zn.width,tr=An.height>zn.height;switch(Gn){case"top":{const ir=[Cn?jn+dt/2:xn?jn+dt*4:jn-dt*4,Ln+dt+1],Zn=[Cn?jn-dt/2:xn?jn+dt*4:jn-dt*4,Ln+dt+1],br=[[An.left,xn||Cn?An.bottom-dt:An.top],[An.right,xn?Cn?An.bottom-dt:An.top:An.bottom-dt]];return[ir,Zn,...br]}case"bottom":{const ir=[Cn?jn+dt/2:xn?jn+dt*4:jn-dt*4,Ln-dt],Zn=[Cn?jn-dt/2:xn?jn+dt*4:jn-dt*4,Ln-dt],br=[[An.left,xn||Cn?An.top+dt:An.bottom],[An.right,xn?Cn?An.top+dt:An.bottom:An.top+dt]];return[ir,Zn,...br]}case"left":{const ir=[jn+dt+1,tr?Ln+dt/2:Qn?Ln+dt*4:Ln-dt*4],Zn=[jn+dt+1,tr?Ln-dt/2:Qn?Ln+dt*4:Ln-dt*4];return[...[[Qn||tr?An.right-dt:An.left,An.top],[Qn?tr?An.right-dt:An.left:An.right-dt,An.bottom]],ir,Zn]}case"right":{const ir=[jn-dt,tr?Ln+dt/2:Qn?Ln+dt*4:Ln-dt*4],Zn=[jn-dt,tr?Ln-dt/2:Qn?Ln+dt*4:Ln-dt*4],br=[[Qn||tr?An.left+dt:An.right,An.top],[Qn?tr?An.left+dt:An.right:An.left+dt,An.bottom]];return[ir,Zn,...br]}}}const Un=Et?qn:nr([Dt,Nt]);if(!cn.current&&vt&&Tn){const Nn=getDocument(Ut.floating.current);cn.current=createPolygonElement(Un,Nn,Et),Nn.body.appendChild(cn.current)}Et||(isPointInPolygon([vn,bn],Un)?lt&&!Ct&&(St=setTimeout(Wt,lt)):gn())}}}function useLatestRef(ft){const lt=reactExports.useRef(ft);return index$1(()=>{lt.current=ft}),lt}function getDelay(ft,lt,dt){return dt&&!isMouseLikePointerType(dt)?0:typeof ft=="number"?ft:ft==null?void 0:ft[lt]}const useHover=function(ft,lt){let{enabled:dt=!0,delay:vt=0,handleClose:St=null,mouseOnly:Et=!1,restMs:Ct=0,move:At=!0}=lt===void 0?{}:lt;const{open:Rt,onOpenChange:Dt,dataRef:Nt,events:Ft,refs:Ut,_:Wt}=ft,Zt=useFloatingTree(),Kt=useLatestRef(St),cn=useLatestRef(vt),hn=reactExports.useRef(),dn=reactExports.useRef(),pn=reactExports.useRef(),gn=reactExports.useRef(),vn=reactExports.useRef(!0),bn=reactExports.useRef(null),$n=reactExports.useCallback(()=>{var Pn;const zn=(Pn=Nt.current.openEvent)==null?void 0:Pn.type;return(zn==null?void 0:zn.includes("mouse"))&&zn!=="mousedown"},[Nt]);reactExports.useEffect(()=>{if(!dt)return;function Pn(){clearTimeout(dn.current),clearTimeout(gn.current),vn.current=!0}return Ft.on("dismiss",Pn),()=>{Ft.off("dismiss",Pn)}},[dt,Ft,Ut]),reactExports.useEffect(()=>{if(!dt||!Kt.current||!Rt)return;function Pn(){$n()&&Dt(!1)}const zn=getDocument(Ut.floating.current).documentElement;return zn.addEventListener("mouseleave",Pn),()=>{zn.removeEventListener("mouseleave",Pn)}},[Ut,Rt,Dt,dt,Kt,Nt,$n]);const Tn=reactExports.useCallback(function(Pn){Pn===void 0&&(Pn=!0);const zn=getDelay(cn.current,"close",hn.current);zn&&!pn.current?(clearTimeout(dn.current),dn.current=setTimeout(()=>Dt(!1),zn)):Pn&&(clearTimeout(dn.current),Dt(!1))},[cn,Dt]),In=reactExports.useCallback(()=>{pn.current&&(getDocument(Ut.floating.current).removeEventListener("mousemove",pn.current),pn.current=void 0)},[Ut]);return reactExports.useEffect(()=>{if(!dt)return;function Pn(){return Nt.current.openEvent?["click","mousedown"].includes(Nt.current.openEvent.type):!1}function zn(qn){if(clearTimeout(dn.current),vn.current=!1,Et&&!isMouseLikePointerType(hn.current)||Ct>0&&getDelay(cn.current,"open")===0)return;Nt.current.openEvent=qn;const nr=getDelay(cn.current,"open",hn.current);nr?dn.current=setTimeout(()=>{Dt(!0)},nr):Dt(!0)}function An(qn){if(Pn())return;const nr=getDocument(Ut.floating.current);if(clearTimeout(gn.current),Kt.current){clearTimeout(dn.current),pn.current&&nr.removeEventListener("mousemove",pn.current),pn.current=Kt.current({...ft,tree:Zt,polygonRef:bn,x:qn.clientX,y:qn.clientY,onClose(){In(),Tn()}}),nr.addEventListener("mousemove",pn.current);return}Tn()}function Gn(qn){Pn()||Kt.current==null||Kt.current({...ft,tree:Zt,polygonRef:bn,x:qn.clientX,y:qn.clientY,onClose(){In(),Tn()}})(qn)}const xn=Ut.floating.current,Qn=Ut.domReference.current;if(isElement(Qn))return Rt&&Qn.addEventListener("mouseleave",Gn),xn==null||xn.addEventListener("mouseleave",Gn),At&&Qn.addEventListener("mousemove",zn,{once:!0}),Qn.addEventListener("mouseenter",zn),Qn.addEventListener("mouseleave",An),()=>{Rt&&Qn.removeEventListener("mouseleave",Gn),xn==null||xn.removeEventListener("mouseleave",Gn),At&&Qn.removeEventListener("mousemove",zn),Qn.removeEventListener("mouseenter",zn),Qn.removeEventListener("mouseleave",An)}},[Wt.domReference,dt,ft,Et,Ct,At,Tn,In,Dt,Rt,Zt,Ut,cn,Kt,Nt]),index$1(()=>{Rt||(hn.current=void 0,In(),destroyPolygon(bn))},[Rt,In]),reactExports.useEffect(()=>()=>{In(),clearTimeout(dn.current),clearTimeout(gn.current),destroyPolygon(bn)},[dt,In]),reactExports.useMemo(()=>{if(!dt)return{};function Pn(zn){hn.current=zn.pointerType}return{reference:{onPointerDown:Pn,onPointerEnter:Pn,onMouseMove(){Rt||Ct===0||(clearTimeout(gn.current),gn.current=setTimeout(()=>{vn.current||Dt(!0)},Ct))}},floating:{onMouseEnter(){clearTimeout(dn.current)},onMouseLeave(){Ft.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),Tn(!1)}}}},[Ft,dt,Ct,Rt,Dt,Tn])};function activeElement$1(ft){let lt=ft.activeElement;for(;((dt=lt)==null||(vt=dt.shadowRoot)==null?void 0:vt.activeElement)!=null;){var dt,vt;lt=lt.shadowRoot.activeElement}return lt}const TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function isTypeableElement(ft){return isHTMLElement(ft)&&ft.matches(TYPEABLE_SELECTOR)}const useInsertionEffect=React$1["useInsertionEffect".toString()],useSafeInsertionEffect=useInsertionEffect||(ft=>ft());function useEvent(ft){const lt=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{lt.current=ft}),reactExports.useCallback(function(){for(var dt=arguments.length,vt=new Array(dt),St=0;St<dt;St++)vt[St]=arguments[St];return lt.current==null?void 0:lt.current(...vt)},[])}function isButtonTarget(ft){return isHTMLElement(ft.target)&&ft.target.tagName==="BUTTON"}function isSpaceIgnored(ft){return isTypeableElement(ft)}const useClick=function(ft,lt){let{open:dt,onOpenChange:vt,dataRef:St,refs:Et}=ft,{enabled:Ct=!0,event:At="click",toggle:Rt=!0,ignoreMouse:Dt=!1,keyboardHandlers:Nt=!0}=lt===void 0?{}:lt;const Ft=reactExports.useRef();return reactExports.useMemo(()=>Ct?{reference:{onPointerDown(Ut){Ft.current=Ut.pointerType},onMouseDown(Ut){Ut.button===0&&(isMouseLikePointerType(Ft.current,!0)&&Dt||At!=="click"&&(dt?Rt&&(!St.current.openEvent||St.current.openEvent.type==="mousedown")&&vt(!1):(Ut.preventDefault(),vt(!0)),St.current.openEvent=Ut.nativeEvent))},onClick(Ut){if(At==="mousedown"&&Ft.current){Ft.current=void 0;return}isMouseLikePointerType(Ft.current,!0)&&Dt||(dt?Rt&&(!St.current.openEvent||St.current.openEvent.type==="click")&&vt(!1):vt(!0),St.current.openEvent=Ut.nativeEvent)},onKeyDown(Ut){Ft.current=void 0,Nt&&(isButtonTarget(Ut)||(Ut.key===" "&&!isSpaceIgnored(Et.domReference.current)&&Ut.preventDefault(),Ut.key==="Enter"&&(dt?Rt&&vt(!1):vt(!0))))},onKeyUp(Ut){Nt&&(isButtonTarget(Ut)||isSpaceIgnored(Et.domReference.current)||Ut.key===" "&&(dt?Rt&&vt(!1):vt(!0)))}}}:{},[Ct,St,At,Dt,Nt,Et,Rt,dt,vt])};function isEventTargetWithin(ft,lt){if(lt==null)return!1;if("composedPath"in ft)return ft.composedPath().includes(lt);const dt=ft;return dt.target!=null&&lt.contains(dt.target)}const useFocus=function(ft,lt){let{open:dt,onOpenChange:vt,dataRef:St,refs:Et,events:Ct}=ft,{enabled:At=!0,keyboardOnly:Rt=!0}=lt===void 0?{}:lt;const Dt=reactExports.useRef(""),Nt=reactExports.useRef(!1),Ft=reactExports.useRef();return reactExports.useEffect(()=>{if(!At)return;const Wt=getDocument(Et.floating.current).defaultView||window;function Zt(){!dt&&isHTMLElement(Et.domReference.current)&&Et.domReference.current===activeElement$1(getDocument(Et.domReference.current))&&(Nt.current=!0)}return Wt.addEventListener("blur",Zt),()=>{Wt.removeEventListener("blur",Zt)}},[Et,dt,At]),reactExports.useEffect(()=>{if(!At)return;function Ut(Wt){(Wt.type==="referencePress"||Wt.type==="escapeKey")&&(Nt.current=!0)}return Ct.on("dismiss",Ut),()=>{Ct.off("dismiss",Ut)}},[Ct,At]),reactExports.useEffect(()=>()=>{clearTimeout(Ft.current)},[]),reactExports.useMemo(()=>At?{reference:{onPointerDown(Ut){let{pointerType:Wt}=Ut;Dt.current=Wt,Nt.current=!!(Wt&&Rt)},onMouseLeave(){Nt.current=!1},onFocus(Ut){var Wt;Nt.current||Ut.type==="focus"&&((Wt=St.current.openEvent)==null?void 0:Wt.type)==="mousedown"&&St.current.openEvent&&isEventTargetWithin(St.current.openEvent,Et.domReference.current)||(St.current.openEvent=Ut.nativeEvent,vt(!0))},onBlur(Ut){Nt.current=!1;const Wt=Ut.relatedTarget,Zt=isElement(Wt)&&Wt.hasAttribute("data-floating-ui-focus-guard");Ft.current=setTimeout(()=>{contains$1(Et.floating.current,Wt)||contains$1(Et.domReference.current,Wt)||Zt||vt(!1)})}}}:{},[At,Rt,Et,St,vt])},useRole=function(ft,lt){let{open:dt}=ft,{enabled:vt=!0,role:St="dialog"}=lt===void 0?{}:lt;const Et=useId(),Ct=useId();return reactExports.useMemo(()=>{const At={id:Et,role:St};return vt?St==="tooltip"?{reference:{"aria-describedby":dt?Et:void 0},floating:At}:{reference:{"aria-expanded":dt?"true":"false","aria-haspopup":St==="alertdialog"?"dialog":St,"aria-controls":dt?Et:void 0,...St==="listbox"&&{role:"combobox"},...St==="menu"&&{id:Ct}},floating:{...At,...St==="menu"&&{"aria-labelledby":Ct}}}:{}},[vt,St,dt,Et,Ct])};function useFloating(ft){let{open:lt=!1,onOpenChange:dt,whileElementsMounted:vt,placement:St,middleware:Et,strategy:Ct,nodeId:At}=ft===void 0?{}:ft;const[Rt,Dt]=reactExports.useState(null),Nt=useFloatingTree(),Ft=reactExports.useRef(null),Ut=reactExports.useRef({}),Wt=reactExports.useState(()=>createPubSub())[0],Zt=useFloating$1({open:lt,placement:St,middleware:Et,strategy:Ct,whileElementsMounted:vt}),Kt=useEvent(dt),cn=reactExports.useMemo(()=>({...Zt.refs,domReference:Ft}),[Zt.refs]),hn=reactExports.useMemo(()=>({...Zt,refs:cn,dataRef:Ut,nodeId:At,events:Wt,open:lt,onOpenChange:Kt,_:{domReference:Rt}}),[Zt,At,Wt,lt,Kt,cn,Rt]);index$1(()=>{const vn=Nt==null?void 0:Nt.nodesRef.current.find(bn=>bn.id===At);vn&&(vn.context=hn)});const{reference:dn}=Zt,pn=reactExports.useCallback(vn=>{(isElement(vn)||vn===null)&&(cn.domReference.current=vn,Dt(vn)),(isElement(cn.reference.current)||cn.reference.current===null||vn!==null&&!isElement(vn))&&dn(vn)},[dn,cn]),gn=reactExports.useCallback(vn=>{const bn=isElement(vn)?{getBoundingClientRect:()=>vn.getBoundingClientRect(),contextElement:vn}:vn;dn(bn)},[dn]);return reactExports.useMemo(()=>({...Zt,context:hn,refs:cn,reference:pn,positionReference:gn}),[Zt,cn,hn,pn,gn])}function mergeProps(ft,lt,dt){const vt=new Map;return{...dt==="floating"&&{tabIndex:-1},...ft,...lt.map(St=>St?St[dt]:null).concat(ft).reduce((St,Et)=>(Et&&Object.entries(Et).forEach(Ct=>{let[At,Rt]=Ct;if(At.indexOf("on")===0){if(vt.has(At)||vt.set(At,[]),typeof Rt=="function"){var Dt;(Dt=vt.get(At))==null||Dt.push(Rt),St[At]=function(){for(var Nt,Ft=arguments.length,Ut=new Array(Ft),Wt=0;Wt<Ft;Wt++)Ut[Wt]=arguments[Wt];(Nt=vt.get(At))==null||Nt.forEach(Zt=>Zt(...Ut))}}}else St[At]=Rt}),St),{})}}const useInteractions=function(ft){ft===void 0&&(ft=[]);const lt=ft,dt=reactExports.useCallback(Et=>mergeProps(Et,ft,"reference"),lt),vt=reactExports.useCallback(Et=>mergeProps(Et,ft,"floating"),lt),St=reactExports.useCallback(Et=>mergeProps(Et,ft,"item"),lt);return reactExports.useMemo(()=>({getReferenceProps:dt,getFloatingProps:vt,getItemProps:St}),[dt,vt,St])},getMiddleware=({arrowRef:ft,placement:lt})=>{const dt=[];return dt.push(O$2(8)),dt.push(lt==="auto"?v$3():b$4()),dt.push(E$4({padding:8})),ft.current&&dt.push(arrow({element:ft.current})),dt},getPlacement=({placement:ft})=>ft==="auto"?void 0:ft,getArrowPlacement=({placement:ft})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[ft.split("-")[0]],Floating=({children:ft,content:lt,theme:dt,animation:vt="duration-300",arrow:St=!0,placement:Et="top",style:Ct="dark",trigger:At="hover",closeRequestKey:Rt,className:Dt,...Nt})=>{const Ft=reactExports.useRef(null),[Ut,Wt]=reactExports.useState(!1),Zt=useFloating({middleware:getMiddleware({arrowRef:Ft,placement:Et}),onOpenChange:Wt,open:Ut,placement:getPlacement({placement:Et})}),{context:Kt,floating:cn,middlewareData:{arrow:{x:hn,y:dn}={}},reference:pn,refs:gn,strategy:vn,update:bn,x:$n,y:Tn}=Zt,{getFloatingProps:In,getReferenceProps:Pn}=useInteractions([useClick(Kt,{enabled:At==="click"}),useFocus(Kt),useHover(Kt,{enabled:At==="hover",handleClose:safePolygon()}),useRole(Kt,{role:"tooltip"})]);return reactExports.useEffect(()=>{if(gn.reference.current&&gn.floating.current&&Ut)return P$1(gn.reference.current,gn.floating.current,bn)},[Ut,gn.floating,gn.reference,bn]),reactExports.useEffect(()=>{Rt!==void 0&&Wt(!1)},[Rt]),jsxs(Fragment,{children:[jsx("div",{className:dt.target,...Pn({ref:pn}),"data-testid":"flowbite-tooltip-target",children:ft}),jsxs("div",{"data-testid":"flowbite-tooltip",...In({className:classNames(dt.base,vt&&`${dt.animation} ${vt}`,!Ut&&dt.hidden,dt.style[Ct],Dt),ref:cn,style:{position:vn,top:Tn??" ",left:$n??" "},...Nt}),children:[jsx("div",{className:dt.content,children:lt}),St&&jsx("div",{className:classNames(dt.arrow.base,{[dt.arrow.style.dark]:Ct==="dark",[dt.arrow.style.light]:Ct==="light",[dt.arrow.style.auto]:Ct==="auto"}),"data-testid":"flowbite-tooltip-arrow",ref:Ft,style:{top:dn??" ",left:hn??" ",right:" ",bottom:" ",[getArrowPlacement({placement:Zt.placement})]:dt.arrow.placement},children:""})]})]})},DropdownDivider=()=>{const ft=useTheme().theme.dropdown.floating.divider;return jsx("div",{className:ft})},DropdownHeader=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.dropdown.floating.header;return jsxs(Fragment,{children:[jsx("div",{className:classNames(vt,lt),...dt,children:ft}),jsx(DropdownDivider,{})]})},DropdownItem=({children:ft,className:lt,onClick:dt,icon:vt})=>{const St=useTheme().theme.dropdown.floating.item;return jsxs("li",{className:classNames(St.base,lt),onClick:dt,children:[vt&&jsx(vt,{className:St.icon}),ft]})},icons={top:HiOutlineChevronUp,right:HiOutlineChevronRight,bottom:HiOutlineChevronDown,left:HiOutlineChevronLeft},DropdownComponent=({children:ft,className:lt,dismissOnClick:dt=!0,...vt})=>{const St=useTheme().theme.dropdown,Et=vt,{placement:Ct=vt.inline?"bottom-start":"bottom",trigger:At="click",label:Rt,inline:Dt,floatingArrow:Nt=!1,arrowIcon:Ft=!0,...Ut}=Et,Wt=reactExports.useMemo(()=>{const[pn]=Ct.split("-");return icons[pn]??HiOutlineChevronDown},[Ct]),[Zt,Kt]=reactExports.useState(void 0),cn=pn=>React.isValidElement(pn)?pn.type===DropdownItem?React.cloneElement(pn,{onClick:()=>{var gn,vn;(vn=(gn=pn.props).onClick)==null||vn.call(gn),dt&&Kt(uuid())}}):pn.props.children&&typeof pn.props.children=="object"?React.cloneElement(pn,{children:reactExports.Children.map(pn.props.children,cn)}):pn:pn,hn=reactExports.useMemo(()=>jsx("ul",{className:St.content,children:reactExports.Children.map(ft,cn)}),[ft,St]),dn=({children:pn})=>Dt?jsx("button",{className:St.inlineWrapper,children:pn}):jsx(Button,{...Ut,children:pn});return jsx(Floating,{content:hn,style:"auto",animation:"duration-100",placement:Ct,arrow:Nt,trigger:At,theme:St.floating,closeRequestKey:Zt,className:lt,children:jsxs(dn,{children:[Rt,Ft&&jsx(Wt,{className:St.arrowIcon})]})})};DropdownComponent.displayName="Dropdown";DropdownItem.displayName="Dropdown.Item";DropdownHeader.displayName="Dropdown.Header";DropdownDivider.displayName="Dropdown.Divider";const Dropdown=Object.assign(DropdownComponent,{Item:DropdownItem,Header:DropdownHeader,Divider:DropdownDivider}),HelperText=({value:ft,children:lt,color:dt="default",className:vt,...St})=>{const Et=useTheme().theme.helperText;return jsx("p",{className:classNames(Et.base,Et.colors[dt],vt),...St,children:ft??lt??""})},FileInput=reactExports.forwardRef(({theme:ft={},sizing:lt="md",helperText:dt,color:vt="gray",className:St,...Et},Ct)=>{const At=mergeDeep(useTheme().theme.fileInput,ft);return jsxs(Fragment,{children:[jsx("div",{className:classNames(At.base,St),children:jsx("div",{className:At.field.base,children:jsx("input",{className:classNames(At.field.input.base,At.field.input.colors[vt],At.field.input.sizes[lt]),...Et,type:"file",ref:Ct})})}),dt&&jsx(HelperText,{color:vt,children:dt})]})});FileInput.displayName="FileInput";const FooterBrand=({alt:ft,className:lt,children:dt,href:vt,name:St,src:Et})=>{const Ct=useTheme().theme.footer.brand;return jsx("div",{children:vt?jsxs("a",{"data-testid":"flowbite-footer-brand",href:vt,className:classNames(Ct.base,lt),children:[jsx("img",{alt:ft,src:Et,className:Ct.img}),jsx("span",{"data-testid":"flowbite-footer-brand-span",className:Ct.span,children:St}),dt]}):jsx("img",{alt:ft,"data-testid":"flowbite-footer-brand",src:Et,className:Ct.img})})},FooterCopyright=({href:ft,by:lt,year:dt,className:vt})=>{const St=useTheme().theme.footer.copyright;return jsx("div",{children:jsxs("span",{className:classNames(St.base,vt),"data-testid":"flowbite-footer-copyright",children:[" ",dt,ft?jsx("a",{href:ft,className:St.href,children:lt}):jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:St.span,children:lt})]})})},FooterDivider=({className:ft})=>{const lt=useTheme().theme.footer.divider;return jsx("hr",{"data-testid":"footer-divider",className:classNames(lt.base,ft)})},FooterIcon=({href:ft,className:lt,ariaLabel:dt,icon:vt})=>{const St=useTheme().theme.footer.icon;return jsx("div",{children:ft?jsx("a",{"aria-label":dt,"data-testid":"flowbite-footer-icon",href:ft,className:classNames(St.base,lt),children:jsx(vt,{className:St.size})}):jsx(vt,{"data-testid":"flowbite-footer-icon",className:St.size})})},FooterLink=({children:ft,className:lt,href:dt})=>{const vt=useTheme().theme.footer.groupLink.link;return jsx("li",{className:classNames(vt.base,lt),children:jsx("a",{href:dt,className:vt.href,children:ft})})},FooterLinkGroup=({children:ft,className:lt,col:dt=!1})=>{const vt=useTheme().theme.footer.groupLink;return jsx("ul",{"data-testid":"footer-groupLink",className:classNames(vt.base,dt&&vt.col,lt),children:ft})},FooterTitle=({title:ft,className:lt})=>{const dt=useTheme().theme.footer.title;return jsx("h2",{"data-testid":"flowbite-footer-title",className:classNames(dt.base,lt),children:ft})},FooterComponent=({children:ft,className:lt,bgDark:dt=!1,container:vt=!1})=>{const St=useTheme().theme.footer;return jsx("footer",{"data-testid":"flowbite-footer",className:classNames(St.base,dt&&St.bgDark,vt&&St.container,lt),children:ft})};FooterComponent.displayName="Footer";FooterCopyright.displayName="Footer.Copyright";FooterLink.displayName="Footer.Link";FooterBrand.displayName="Footer.Brand";FooterLinkGroup.displayName="Footer.LinkGroup";FooterIcon.displayName="Footer.Icon";FooterTitle.displayName="Footer.Title";FooterDivider.displayName="Footer.Divider";Object.assign(FooterComponent,{Copyright:FooterCopyright,Link:FooterLink,LinkGroup:FooterLinkGroup,Brand:FooterBrand,Icon:FooterIcon,Title:FooterTitle,Divider:FooterDivider});const Label=({children:ft,color:lt="default",disabled:dt=!1,value:vt,className:St,...Et})=>{const Ct=useTheme().theme.label;return jsx("label",{className:classNames(Ct.base,Ct.colors[lt],dt??Ct.disabled,St),...Et,children:vt??ft??""})},ListGroupItem=({active:ft,children:lt,href:dt,icon:vt,onClick:St,className:Et,...Ct})=>{const At=typeof dt<"u",Rt=At?"a":"button",Dt=useTheme().theme.listGroup.item,Nt=Ct;return jsx("li",{children:jsxs(Rt,{className:classNames(Dt.active[ft?"on":"off"],Dt.base,Dt.href[At?"on":"off"]),href:dt,onClick:St,type:At?void 0:"button",...Nt,children:[vt&&jsx(vt,{"aria-hidden":!0,className:Dt.icon,"data-testid":"flowbite-list-group-item-icon"}),lt]})})},ListGroupComponent=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.listGroup.base,St=dt;return jsx("ul",{className:classNames(vt,lt),...St,children:ft})};ListGroupComponent.displayName="ListGroup";ListGroupItem.displayName="ListGroup.Item";Object.assign(ListGroupComponent,{Item:ListGroupItem});const useKeyDown=(ft,lt)=>{const dt=vt=>{vt.key===ft&&lt()};reactExports.useEffect(()=>(document.addEventListener("keydown",dt),()=>{document.removeEventListener("keydown",dt)}),[ft,lt])},ModalContext=reactExports.createContext(void 0);function useModalContext(){const ft=reactExports.useContext(ModalContext);if(!ft)throw new Error("useModalContext should be used within the ModalContext provider!");return ft}const ModalBody=({children:ft,className:lt,...dt})=>{const{popup:vt}=useModalContext(),St=useTheme().theme.modal.body;return jsx("div",{className:classNames(St.base,{[St.popup]:vt},lt),...dt,children:ft})},ModalFooter=({children:ft,className:lt,...dt})=>{const{popup:vt}=useModalContext(),St=useTheme().theme.modal.footer;return jsx("div",{className:classNames(St.base,{[St.popup]:!vt},lt),...dt,children:ft})},ModalHeader=({children:ft,className:lt,...dt})=>{const{popup:vt,onClose:St}=useModalContext(),Et=useTheme().theme.modal.header;return jsxs("div",{className:classNames(Et.base,{[Et.popup]:vt},lt),...dt,children:[jsx("h3",{className:Et.title,children:ft}),jsx("button",{"aria-label":"Close",className:Et.close.base,type:"button",onClick:St,children:jsx(HiOutlineX,{"aria-hidden":!0,className:Et.close.icon})})]})},ModalComponent=({children:ft,show:lt,root:dt=document.body,popup:vt,size:St="2xl",position:Et="center",dismissible:Ct=!1,onClose:At,className:Rt,...Dt})=>{const Nt=useTheme().theme.modal,Ft=reactExports.useRef(null);Ft.current||(Ft.current=document.createElement("div")),Ft.current.parentNode!==dt&&dt.appendChild(Ft.current),reactExports.useEffect(()=>()=>{var Zt;const Wt=Ft.current;Wt&&((Zt=Wt.parentNode)==null||Zt.removeChild(Wt),Ft.current=null)},[]),useKeyDown("Escape",()=>{Ct&&At&&At()});const Ut=Wt=>{Ct&&Wt.target===Wt.currentTarget&&At&&At()};return reactDomExports.createPortal(jsx(ModalContext.Provider,{value:{popup:vt,onClose:At},children:jsx("div",{"aria-hidden":!lt,className:classNames(Nt.base,Nt.positions[Et],lt?Nt.show.on:Nt.show.off,Rt),"data-testid":"modal",role:"dialog",onClick:Ut,...Dt,children:jsx("div",{className:classNames(Nt.content.base,Nt.sizes[St]),children:jsx("div",{className:Nt.content.inner,children:ft})})})}),Ft.current)};ModalComponent.displayName="Modal";ModalHeader.displayName="Modal.Header";ModalBody.displayName="Modal.Body";ModalFooter.displayName="Modal.Footer";const Modal=Object.assign(ModalComponent,{Header:ModalHeader,Body:ModalBody,Footer:ModalFooter}),NavbarBrand=({theme:ft={},children:lt,className:dt,as:vt="a",...St})=>{const Et=mergeDeep(useTheme().theme.navbar.brand,ft);return jsx(vt,{className:classNames(Et.base,dt),...St,children:lt})},NavbarContext=reactExports.createContext(void 0);function useNavbarContext(){const ft=reactExports.useContext(NavbarContext);if(!ft)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return ft}const NavbarCollapse=({theme:ft={},children:lt,className:dt,...vt})=>{const{isOpen:St}=useNavbarContext(),Et=mergeDeep(useTheme().theme.navbar.collapse,ft);return jsx("div",{className:classNames(Et.base,Et.hidden[St?"off":"on"],dt),"data-testid":"flowbite-navbar-collapse",...vt,children:jsx("ul",{className:Et.list,children:lt})})},NavbarLink=({active:ft,disabled:lt,theme:dt={},children:vt,className:St,as:Et="a",...Ct})=>{const At=mergeDeep(useTheme().theme.navbar.link,dt);return jsx("li",{children:jsx(Et,{className:classNames(At.base,{[At.active.on]:ft,[At.active.off]:!ft&&!lt},At.disabled[lt?"on":"off"],St),...Ct,children:vt})})};function GoThreeBars(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(ft)}const NavbarToggle=({barIcon:ft=GoThreeBars,theme:lt={},className:dt,...vt})=>{const{isOpen:St,setIsOpen:Et}=useNavbarContext(),Ct=()=>{Et(!St)},At=mergeDeep(useTheme().theme.navbar.toggle,lt);return jsxs("button",{className:classNames(At.base,dt),"data-testid":"flowbite-navbar-toggle",onClick:Ct,...vt,children:[jsx("span",{className:"sr-only",children:"Open main menu"}),jsx(ft,{className:At.icon})]})},NavbarComponent=({children:ft,menuOpen:lt,fluid:dt=!1,rounded:vt,border:St,className:Et,theme:Ct={},...At})=>{const[Rt,Dt]=reactExports.useState(lt),Nt=mergeDeep(useTheme().theme.navbar.root,Ct);return jsx(NavbarContext.Provider,{value:{isOpen:Rt,setIsOpen:Dt},children:jsx("nav",{className:classNames(Nt.base,Nt.bordered[St?"on":"off"],Nt.rounded[vt?"on":"off"],Et),...At,children:jsx("div",{className:classNames(Nt.inner.base,Nt.inner.fluid[dt?"on":"off"]),children:ft})})})};NavbarComponent.displayName="Navbar";NavbarBrand.displayName="Navbar.Brand";NavbarCollapse.displayName="Navbar.Collapse";NavbarLink.displayName="Navbar.Link";NavbarToggle.displayName="Navbar.Toggle";Object.assign(NavbarComponent,{Brand:NavbarBrand,Collapse:NavbarCollapse,Link:NavbarLink,Toggle:NavbarToggle});const Radio=reactExports.forwardRef(({theme:ft={},className:lt,...dt},vt)=>{const St=mergeDeep(useTheme().theme.radio,ft);return jsx("input",{ref:vt,className:classNames(St.root.base,lt),type:"radio",...dt})});Radio.displayName="Radio";const RangeSlider=reactExports.forwardRef(({theme:ft={},sizing:lt="md",className:dt,...vt},St)=>{const Et=mergeDeep(useTheme().theme.rangeSlider,ft);return jsx(Fragment,{children:jsx("div",{"data-testid":"flowbite-range-slider",className:classNames(Et.base,dt),children:jsx("div",{className:Et.field.base,children:jsx("input",{className:classNames(Et.field.input.base,Et.field.input.sizes[lt]),...vt,type:"range",ref:St})})})})});RangeSlider.displayName="RangeSlider";const RatingAdvanced=({percentFilled:ft=0,children:lt,className:dt,...vt})=>{const St=useTheme().theme.rating.advanced;return jsxs("div",{className:classNames(St.base,dt),...vt,children:[jsx("span",{className:St.label,children:lt}),jsx("div",{className:St.progress.base,children:jsx("div",{className:St.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${ft}%`}})}),jsx("span",{className:St.progress.label,children:`${ft}%`})]})},RatingContext=reactExports.createContext(void 0);function useRatingContext(){const ft=reactExports.useContext(RatingContext);if(!ft)throw new Error("useRatingContext should be used within the RatingContext provider!");return ft}const RatingStar=({filled:ft=!0,starIcon:lt=HiStar,className:dt})=>{const{size:vt="sm"}=useRatingContext(),St=useTheme().theme.rating.star;return jsx(lt,{className:classNames(St.sizes[vt],St[ft?"filled":"empty"],dt),"data-testid":"flowbite-rating-star"})},RatingComponent=({children:ft,size:lt="sm",className:dt,...vt})=>{const St=useTheme().theme.rating;return jsx(RatingContext.Provider,{value:{size:lt},children:jsx("div",{className:classNames(St.base,dt),...vt,children:ft})})};RatingComponent.displayName="Rating";RatingStar.displayName="Rating.Star";RatingAdvanced.displayName="Rating.Advanced";Object.assign(RatingComponent,{Star:RatingStar,Advanced:RatingAdvanced});const Select=reactExports.forwardRef(({children:ft,sizing:lt="md",shadow:dt,helperText:vt,addon:St,icon:Et,color:Ct="gray",className:At,...Rt},Dt)=>{const Nt=useTheme().theme.select;return jsxs("div",{className:classNames(Nt.base,At),children:[St&&jsx("span",{className:Nt.addon,children:St}),jsxs("div",{className:Nt.field.base,children:[Et&&jsx("div",{className:Nt.field.icon.base,children:jsx(Et,{className:Nt.field.icon.svg})}),jsx("select",{className:classNames(Nt.field.select.base,Nt.field.select.colors[Ct],Nt.field.select.withIcon[Et?"on":"off"],Nt.field.select.withAddon[St?"on":"off"],Nt.field.select.withShadow[dt?"on":"off"],Nt.field.select.sizes[lt]),...Rt,ref:Dt,children:ft}),vt&&jsx(HelperText,{color:Ct,children:vt})]})]})});Select.displayName="Select";const Tooltip=({animation:ft="duration-300",arrow:lt=!0,children:dt,content:vt,placement:St="top",style:Et="dark",trigger:Ct="hover",className:At,...Rt})=>{const Dt=useTheme().theme.tooltip;return jsx(Floating,{content:vt,style:Et,animation:ft,placement:St,arrow:lt,trigger:Ct,theme:Dt,className:At,...Rt,children:dt})},SidebarContext=reactExports.createContext(void 0);function useSidebarContext(){const ft=reactExports.useContext(SidebarContext);if(!ft)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return ft}const SidebarItemContext=reactExports.createContext(void 0);function useSidebarItemContext(){const ft=reactExports.useContext(SidebarItemContext);if(!ft)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return ft}const SidebarCollapse=({children:ft,icon:lt,label:dt,className:vt,open:St=!1,...Et})=>{const Ct=reactExports.useId(),{isCollapsed:At}=useSidebarContext(),[Rt,Dt]=reactExports.useState(St),Nt=useTheme().theme.sidebar.collapse;return reactExports.useEffect(()=>Dt(St),[St]),jsxs(({children:Ut})=>jsx("li",{children:At&&!Rt?jsx(Tooltip,{content:dt,placement:"right",children:Ut}):Ut}),{children:[jsxs("button",{className:classNames(Nt.button,vt),id:`flowbite-sidebar-collapse-${Ct}`,onClick:()=>Dt(!Rt),title:dt,type:"button",...Et,children:[lt&&jsx(lt,{"aria-hidden":!0,className:classNames(Nt.icon.base,Nt.icon.open[Rt?"on":"off"]),"data-testid":"flowbite-sidebar-collapse-icon"}),At?jsx("span",{className:"sr-only",children:dt}):jsxs(Fragment,{children:[jsx("span",{className:Nt.label.base,"data-testid":"flowbite-sidebar-collapse-label",children:dt}),jsx(HiChevronDown,{"aria-hidden":!0,className:Nt.label.icon})]})]}),jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${Ct}`,className:Nt.list,hidden:!Rt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!0},children:ft})})]})};SidebarCollapse.displayName="Sidebar.Collapse";const SidebarCTA=({children:ft,color:lt="info",className:dt,...vt})=>{const{isCollapsed:St}=useSidebarContext(),Et=useTheme().theme.sidebar.cta;return jsx("div",{className:classNames(Et.base,Et.color[lt],dt),"data-testid":"sidebar-cta",hidden:St,...vt,children:ft})};SidebarCTA.displayName="Sidebar.CTA";const ListItem=({id:ft,isCollapsed:lt,tooltipChildren:dt,children:vt})=>jsx("li",{children:lt?jsx(Tooltip,{content:jsx(TooltipContent,{id:ft,children:dt}),placement:"right",children:vt}):vt}),TooltipContent=({id:ft,children:lt})=>jsx(Children,{id:ft,children:lt}),Children=({id:ft,children:lt})=>{const dt=useTheme().theme.sidebar.item;return jsx("span",{className:classNames(dt.content.base),"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${ft}`,children:lt})},SidebarItem=reactExports.forwardRef(({as:ft="a",children:lt,icon:dt,active:vt,label:St,labelColor:Et="info",className:Ct,...At},Rt)=>{const Dt=reactExports.useId(),{isCollapsed:Nt}=useSidebarContext(),{isInsideCollapse:Ft}=useSidebarItemContext(),Ut=useTheme().theme.sidebar.item;return jsx(ListItem,{id:Dt,isCollapsed:Nt,tooltipChildren:lt,children:jsxs(ft,{"aria-labelledby":`flowbite-sidebar-item-${Dt}`,className:classNames(Ut.base,vt&&Ut.active,!Nt&&Ft&&Ut.collapsed.insideCollapse,Ct),ref:Rt,...At,children:[dt&&jsx(dt,{"aria-hidden":!0,className:classNames(Ut.icon.base,vt&&Ut.icon.active),"data-testid":"flowbite-sidebar-item-icon"}),Nt&&!dt&&jsx("span",{className:Ut.collapsed.noIcon,children:lt.charAt(0).toLocaleUpperCase()??"?"}),!Nt&&jsx(Children,{id:Dt,children:lt}),!Nt&&St&&jsx(Badge,{color:Et,"data-testid":"flowbite-sidebar-label",hidden:Nt,className:Ut.label,children:St})]})})});SidebarItem.displayName="Sidebar.Item";const SidebarItemGroup=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.sidebar.itemGroup;return jsx("ul",{className:classNames(vt,lt),"data-testid":"flowbite-sidebar-item-group",...dt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!1},children:ft})})};SidebarItemGroup.displayName="Sidebar.ItemGroup";const SidebarItems=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.sidebar.items;return jsx("div",{className:classNames(vt,lt),"data-testid":"flowbite-sidebar-items",...dt,children:ft})};SidebarItems.displayName="Sidebar.Items";const SidebarLogo=({children:ft,href:lt,img:dt,imgAlt:vt="",className:St,...Et})=>{const Ct=reactExports.useId(),{isCollapsed:At}=useSidebarContext(),Rt=useTheme().theme.sidebar.logo;return jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${Ct}`,className:classNames(Rt.base,St),href:lt,...Et,children:[jsx("img",{alt:vt,className:Rt.img,src:dt}),jsx("span",{className:Rt.collapsed[At?"on":"off"],id:`flowbite-sidebar-logo-${Ct}`,children:ft})]})};SidebarLogo.displayName="Sidebar.Logo";const SidebarComponent=({children:ft,collapseBehavior:lt="collapse",collapsed:dt=!1,...vt})=>{const St=useTheme().theme.sidebar;return jsx(SidebarContext.Provider,{value:{isCollapsed:dt},children:jsx("aside",{"aria-label":"Sidebar",className:classNames(St.base,St.collapsed[dt?"on":"off"]),hidden:dt&&lt==="hide",...vt,children:jsx("div",{className:St.inner,children:ft})})})};SidebarComponent.displayName="Sidebar";Object.assign(SidebarComponent,{Collapse:SidebarCollapse,CTA:SidebarCTA,Item:SidebarItem,Items:SidebarItems,ItemGroup:SidebarItemGroup,Logo:SidebarLogo});const TabItem=({children:ft,className:lt})=>jsx("div",{className:lt,children:ft}),TabsComponent=reactExports.forwardRef(({children:ft,style:lt="default",className:dt,onActiveTabChange:vt,...St},Et)=>{const Ct=useTheme().theme.tab,At=reactExports.useId(),Rt=reactExports.useMemo(()=>reactExports.Children.map(ft,({props:dn})=>dn),[ft]),Dt=reactExports.useRef([]),[Nt,Ft]=reactExports.useState(Math.max(0,Rt.findIndex(dn=>dn.active))),[Ut,Wt]=reactExports.useState(Math.max(0,Rt.findIndex(dn=>dn.active))),Zt=dn=>{Ft(dn),vt&&vt(dn)},Kt=({target:dn})=>{Zt(dn),Wt(dn)},cn=({event:dn,target:pn})=>{dn.key==="ArrowLeft"&&Wt(Math.max(0,Ut-1)),dn.key==="ArrowRight"&&Wt(Math.min(Rt.length-1,Ut+1)),dn.key==="Enter"&&(Zt(pn),Wt(pn))},hn=Ct.tablist.tabitem.styles[lt];return reactExports.useEffect(()=>{var dn;(dn=Dt.current[Ut])==null||dn.focus()},[Ut]),reactExports.useImperativeHandle(Et,()=>({setActiveTab:Zt})),jsxs("div",{className:classNames(Ct.base,dt),children:[jsx("div",{"aria-label":"Tabs",role:"tablist",className:classNames(Ct.tablist.base,Ct.tablist.styles[lt],dt),...St,children:Rt.map((dn,pn)=>jsxs("button",{type:"button","aria-controls":`${At}-tabpanel-${pn}`,"aria-selected":pn===Nt,className:classNames(Ct.tablist.tabitem.base,{...hn},{[hn.active.on]:pn===Nt,[hn.active.off]:pn!==Nt&&!dn.disabled}),disabled:dn.disabled,id:`${At}-tab-${pn}`,onClick:()=>Kt({target:pn}),onKeyDown:gn=>cn({event:gn,target:pn}),ref:gn=>Dt.current[pn]=gn,role:"tab",tabIndex:pn===Ut?0:-1,children:[dn.icon&&jsx(dn.icon,{className:Ct.tablist.tabitem.icon}),dn.title]},pn))}),jsx("div",{children:Rt.map((dn,pn)=>jsx("div",{"aria-labelledby":`${At}-tab-${pn}`,className:Ct.tabpanel,hidden:pn!==Nt,id:`${At}-tabpanel-${pn}`,role:"tabpanel",tabIndex:0,children:dn.children},pn))})]})});TabsComponent.displayName="Tabs.Group";TabItem.displayName="Tabs.Item";const Tabs={Group:TabsComponent,Item:TabItem},TableBody=({children:ft,...lt})=>jsx("tbody",{...lt,children:ft}),TableCell=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.cell;return jsx("td",{className:classNames(vt.base,lt),...dt,children:ft})},TableContext=reactExports.createContext(void 0);function useTableContext(){const ft=reactExports.useContext(TableContext);if(!ft)throw new Error("useTableContext should be used within the TableContext provider!");return ft}const TableHead=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table;return jsx("thead",{className:classNames(vt.head.base,lt),...dt,children:jsx("tr",{children:ft})})},TableHeadCell=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.head.cell;return jsx("th",{className:classNames(vt.base,lt),...dt,children:ft})},TableRow=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.row,{striped:St,hoverable:Et}=useTableContext();return jsx("tr",{"data-testid":"table-row-element",className:classNames(St&&vt.striped,Et&&vt.hovered,lt),...dt,children:ft})},TableComponent=({children:ft,striped:lt,hoverable:dt,className:vt,...St})=>{const Et=useTheme().theme.table;return jsx("div",{"data-testid":"table-element",className:classNames(Et.wrapper),children:jsx(TableContext.Provider,{value:{striped:lt,hoverable:dt},children:jsx("table",{className:classNames(Et.base,vt),...St,children:ft})})})};TableComponent.displayName="Table";TableHead.displayName="Table.Head";TableBody.displayName="Table.Body";TableRow.displayName="Table.Row";TableCell.displayName="Table.Cell";TableHeadCell.displayName="Table.HeadCell";Object.assign(TableComponent,{Head:TableHead,Body:TableBody,Row:TableRow,Cell:TableCell,HeadCell:TableHeadCell});const Textarea=reactExports.forwardRef(({shadow:ft,helperText:lt,color:dt="gray",className:vt,...St},Et)=>{const Ct=useTheme().theme.textarea;return jsxs(Fragment,{children:[jsx("textarea",{ref:Et,className:classNames(Ct.base,Ct.colors[dt],Ct.withShadow[ft?"on":"off"],vt),...St}),lt&&jsx(HelperText,{color:dt,children:lt})]})});Textarea.displayName="Textarea";const TextInput=reactExports.forwardRef(({sizing:ft="md",shadow:lt,helperText:dt,addon:vt,icon:St,rightIcon:Et,color:Ct="gray",className:At,theme:Rt={},...Dt},Nt)=>{const Ft=mergeDeep(useTheme().theme.textInput,Rt);return jsxs(Fragment,{children:[jsxs("div",{className:classNames(Ft.base,At),children:[vt&&jsx("span",{className:Ft.addon,children:vt}),jsxs("div",{className:Ft.field.base,children:[St&&jsx("div",{className:Ft.field.icon.base,children:jsx(St,{className:Ft.field.icon.svg})}),Et&&jsx("div",{"data-testid":"right-icon",className:Ft.field.rightIcon.base,children:jsx(Et,{className:Ft.field.rightIcon.svg})}),jsx("input",{className:classNames(Ft.field.input.base,Ft.field.input.colors[Ct],Ft.field.input.withIcon[St?"on":"off"],Ft.field.input.withAddon[vt?"on":"off"],Ft.field.input.withShadow[lt?"on":"off"],Ft.field.input.sizes[ft]),...Dt,ref:Nt})]})]}),dt&&jsx(HelperText,{color:Ct,children:dt})]})});TextInput.displayName="TextInput";const TimelineBody=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content;return jsx("p",{className:classNames(vt.body,lt),...dt,children:ft})},TimelineContext=reactExports.createContext(void 0);function useTimelineContext(){const ft=reactExports.useContext(TimelineContext);if(!ft)throw new Error("useTimelineContext should be used within the TimelineContext providor!");return ft}const TimelineContent=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content,{horizontal:St}=useTimelineContext();return jsx("div",{"data-testid":"timeline-content",className:classNames(St&&vt.base,lt),...dt,children:ft})},TimelineItem=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item,{horizontal:St}=useTimelineContext();return jsx("li",{"data-testid":"timeline-item",className:classNames(St&&vt.base.horizontal,!St&&vt.base.vertical,lt),...dt,children:ft})},TimelinePoint=({children:ft,className:lt,icon:dt,...vt})=>{const St=useTheme().theme.timeline.item.point,{horizontal:Et}=useTimelineContext();return jsxs("div",{"data-testid":"timeline-point",className:classNames(Et&&St.base.horizontal,!Et&&St.base.vertical,lt),...vt,children:[ft,dt?jsx("span",{className:classNames(St.marker.icon.wrapper),children:jsx(dt,{"aria-hidden":!0,className:classNames(St.marker.icon.base)})}):jsx("div",{className:classNames(Et&&St.marker.base.horizontal,!Et&&St.marker.base.vertical)}),Et&&jsx("div",{className:classNames(St.line)})]})},TimelineTime=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content;return jsx("time",{className:classNames(vt.time,lt),...dt,children:ft})},TimelineTitle=({children:ft,className:lt,as:dt="h3",...vt})=>{const St=useTheme().theme.timeline.item.content;return jsx(dt,{className:classNames(St.title,lt),...vt,children:ft})},TimelineComponent=({children:ft,horizontal:lt,className:dt})=>{const vt=useTheme().theme.timeline;return jsx(TimelineContext.Provider,{value:{horizontal:lt},children:jsx("ol",{"data-testid":"timeline-component",className:classNames(lt&&vt.direction.horizontal,!lt&&vt.direction.vertical,dt),children:ft})})};TimelineComponent.displayName="Timeline";TimelineItem.displayName="Timeline.Item";TimelinePoint.displayName="Timeline.Point";TimelineContent.displayName="Timeline.Content";TimelineTime.displayName="Timeline.Time";TimelineTitle.displayName="Timeline.Title";TimelineBody.displayName="Timeline.Body";Object.assign(TimelineComponent,{Item:TimelineItem,Point:TimelinePoint,Content:TimelineContent,Time:TimelineTime,Title:TimelineTitle,Body:TimelineBody});const ToastContext=reactExports.createContext(void 0);function useToastContext(){const ft=reactExports.useContext(ToastContext);if(!ft)throw new Error("useToastContext should be used within the ToastContext provider!");return ft}const ToastToggle=({className:ft,xIcon:lt=HiX})=>{const{duration:dt,isClosed:vt,isRemoved:St,setIsClosed:Et,setIsRemoved:Ct}=useToastContext(),At=useTheme().theme.toast.toggle;return jsx("button",{"aria-label":"Close",onClick:()=>{Et(!vt),setTimeout(()=>Ct(!St),dt)},type:"button",className:classNames(At.base,ft),children:jsx(lt,{className:At.icon})})},durationClasses={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},ToastComponent=({children:ft,duration:lt=300,className:dt,...vt})=>{const[St,Et]=reactExports.useState(!1),[Ct,At]=reactExports.useState(!1),Rt=useTheme().theme.toast;return jsx(ToastContext.Provider,{value:{duration:lt,isClosed:St,isRemoved:Ct,setIsClosed:Et,setIsRemoved:At},children:jsx("div",{"data-testid":"flowbite-toast",className:classNames(Rt.base,durationClasses[lt],{[Rt.closed]:St},{[Rt.removed]:Ct},dt),...vt,children:ft})})};ToastComponent.displayName="Toast";ToastToggle.displayName="Toast.Toggle";Object.assign(ToastComponent,{Toggle:ToastToggle});const IconButton=({icon:ft,text:lt,color:dt,onClick:vt,className:St,type:Et})=>jsxs(Button,{className:St,onClick:vt,color:dt,type:Et,children:[jsx(FontAwesomeIcon,{icon:ft}),lt!==""?jsx("span",{className:"ml-2",children:lt}):null]});var faTrashCan={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},faPause={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},faArrowsLeftRight={prefix:"fas",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},faArrowsRotate={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},faSync=faArrowsRotate,faSquare={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faTrash={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},faDownload={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},faUpload={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352H192c0 35.3 28.7 64 64 64s64-28.7 64-64H448c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V416c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},faEraser={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M258.7 57.4L25.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H256h9.4H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H355.9L486.6 285.3c25-25 25-65.5 0-90.5L349.3 57.4c-25-25-65.5-25-90.5 0zM265.4 416H256l-105.4 0-80-80L195.3 211.3 332.7 348.7 265.4 416z"]},faPlay={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},faCopy={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},faPlus={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},faRobot={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"]},faCirclePlus={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},faPlusCircle=faCirclePlus,faCircleXmark={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},faXmarkCircle=faCircleXmark;const BlockManagerPanel=()=>{const ft=useRobartState(Ct=>Object.values(Ct.blocks)),lt=useRobartState(Ct=>Ct.removeBlock),dt=useRobartState(Ct=>Ct.createBlock),vt=useRobartState(Ct=>Ct.copyBlock),St=useRobartState(Ct=>Ct.editingBlockId),Et=useRobartState(Ct=>Ct.setEditingBlock);return useRobartState(Ct=>Ct.setDuration),jsxs("div",{children:[jsxs("div",{className:"flex flex-wrap gap-2 p-2",children:[jsx(IconButton,{icon:faPlusCircle,text:"New",onClick:()=>{const Ct=dt("New Block");Et(Ct)}}),jsx(IconButton,{icon:faCopy,text:"Copy",onClick:()=>{if(St===void 0)return;const Ct=vt(St);Et(Ct)}}),jsx(IconButton,{color:"failure",icon:faTrash,text:"Delete",onClick:()=>{St!==void 0&&lt(St)}})]}),jsx("div",{className:"flex flex-wrap gap-2 p-2",children:ft.map(Ct=>jsx(Button,{className:"flex",onClick:()=>Et(Ct.id),color:"success",children:Ct.name},Ct.id))})]})};function __awaiter(ft,lt,dt,vt){function St(Et){return Et instanceof dt?Et:new dt(function(Ct){Ct(Et)})}return new(dt||(dt=Promise))(function(Et,Ct){function At(Nt){try{Dt(vt.next(Nt))}catch(Ft){Ct(Ft)}}function Rt(Nt){try{Dt(vt.throw(Nt))}catch(Ft){Ct(Ft)}}function Dt(Nt){Nt.done?Et(Nt.value):St(Nt.value).then(At,Rt)}Dt((vt=vt.apply(ft,lt||[])).next())})}function __generator(ft,lt){var dt={label:0,sent:function(){if(Et[0]&1)throw Et[1];return Et[1]},trys:[],ops:[]},vt,St,Et,Ct;return Ct={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function At(Dt){return function(Nt){return Rt([Dt,Nt])}}function Rt(Dt){if(vt)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,Dt[0]&&(dt=0)),dt;)try{if(vt=1,St&&(Et=Dt[0]&2?St.return:Dt[0]?St.throw||((Et=St.return)&&Et.call(St),0):St.next)&&!(Et=Et.call(St,Dt[1])).done)return Et;switch(St=0,Et&&(Dt=[Dt[0]&2,Et.value]),Dt[0]){case 0:case 1:Et=Dt;break;case 4:return dt.label++,{value:Dt[1],done:!1};case 5:dt.label++,St=Dt[1],Dt=[0];continue;case 7:Dt=dt.ops.pop(),dt.trys.pop();continue;default:if(Et=dt.trys,!(Et=Et.length>0&&Et[Et.length-1])&&(Dt[0]===6||Dt[0]===2)){dt=0;continue}if(Dt[0]===3&&(!Et||Dt[1]>Et[0]&&Dt[1]<Et[3])){dt.label=Dt[1];break}if(Dt[0]===6&&dt.label<Et[1]){dt.label=Et[1],Et=Dt;break}if(Et&&dt.label<Et[2]){dt.label=Et[2],dt.ops.push(Dt);break}Et[2]&&dt.ops.pop(),dt.trys.pop();continue}Dt=lt.call(ft,dt)}catch(Nt){Dt=[6,Nt],St=0}finally{vt=Et=0}if(Dt[0]&5)throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}}function __read(ft,lt){var dt=typeof Symbol=="function"&&ft[Symbol.iterator];if(!dt)return ft;var vt=dt.call(ft),St,Et=[],Ct;try{for(;(lt===void 0||lt-- >0)&&!(St=vt.next()).done;)Et.push(St.value)}catch(At){Ct={error:At}}finally{try{St&&!St.done&&(dt=vt.return)&&dt.call(vt)}finally{if(Ct)throw Ct.error}}return Et}function __spreadArray(ft,lt,dt){if(dt||arguments.length===2)for(var vt=0,St=lt.length,Et;vt<St;vt++)(Et||!(vt in lt))&&(Et||(Et=Array.prototype.slice.call(lt,0,vt)),Et[vt]=lt[vt]);return ft.concat(Et||Array.prototype.slice.call(lt))}var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(ft,lt){var dt=withMimeType(ft);if(typeof dt.path!="string"){var vt=ft.webkitRelativePath;Object.defineProperty(dt,"path",{value:typeof lt=="string"?lt:typeof vt=="string"&&vt.length>0?vt:ft.name,writable:!1,configurable:!1,enumerable:!0})}return dt}function withMimeType(ft){var lt=ft.name,dt=lt&&lt.lastIndexOf(".")!==-1;if(dt&&!ft.type){var vt=lt.split(".").pop().toLowerCase(),St=COMMON_MIME_TYPES.get(vt);St&&Object.defineProperty(ft,"type",{value:St,writable:!1,configurable:!1,enumerable:!0})}return ft}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return isObject(ft)&&isDataTransfer(ft.dataTransfer)?[2,getDataTransferFiles(ft.dataTransfer,ft.type)]:isChangeEvt(ft)?[2,getInputFiles(ft)]:Array.isArray(ft)&&ft.every(function(dt){return"getFile"in dt&&typeof dt.getFile=="function"})?[2,getFsHandleFiles(ft)]:[2,[]]})})}function isDataTransfer(ft){return isObject(ft)}function isChangeEvt(ft){return isObject(ft)&&isObject(ft.target)}function isObject(ft){return typeof ft=="object"&&ft!==null}function getInputFiles(ft){return fromList(ft.target.files).map(function(lt){return toFileWithPath(lt)})}function getFsHandleFiles(ft){return __awaiter(this,void 0,void 0,function(){var lt;return __generator(this,function(dt){switch(dt.label){case 0:return[4,Promise.all(ft.map(function(vt){return vt.getFile()}))];case 1:return lt=dt.sent(),[2,lt.map(function(vt){return toFileWithPath(vt)})]}})})}function getDataTransferFiles(ft,lt){return __awaiter(this,void 0,void 0,function(){var dt,vt;return __generator(this,function(St){switch(St.label){case 0:return ft.items?(dt=fromList(ft.items).filter(function(Et){return Et.kind==="file"}),lt!=="drop"?[2,dt]:[4,Promise.all(dt.map(toFilePromises))]):[3,2];case 1:return vt=St.sent(),[2,noIgnoredFiles(flatten$1(vt))];case 2:return[2,noIgnoredFiles(fromList(ft.files).map(function(Et){return toFileWithPath(Et)}))]}})})}function noIgnoredFiles(ft){return ft.filter(function(lt){return FILES_TO_IGNORE.indexOf(lt.name)===-1})}function fromList(ft){if(ft===null)return[];for(var lt=[],dt=0;dt<ft.length;dt++){var vt=ft[dt];lt.push(vt)}return lt}function toFilePromises(ft){if(typeof ft.webkitGetAsEntry!="function")return fromDataTransferItem(ft);var lt=ft.webkitGetAsEntry();return lt&&lt.isDirectory?fromDirEntry(lt):fromDataTransferItem(ft)}function flatten$1(ft){return ft.reduce(function(lt,dt){return __spreadArray(__spreadArray([],__read(lt),!1),__read(Array.isArray(dt)?flatten$1(dt):[dt]),!1)},[])}function fromDataTransferItem(ft){var lt=ft.getAsFile();if(!lt)return Promise.reject("".concat(ft," is not a File"));var dt=toFileWithPath(lt);return Promise.resolve(dt)}function fromEntry(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return[2,ft.isDirectory?fromDirEntry(ft):fromFileEntry(ft)]})})}function fromDirEntry(ft){var lt=ft.createReader();return new Promise(function(dt,vt){var St=[];function Et(){var Ct=this;lt.readEntries(function(At){return __awaiter(Ct,void 0,void 0,function(){var Rt,Dt,Nt;return __generator(this,function(Ft){switch(Ft.label){case 0:if(At.length)return[3,5];Ft.label=1;case 1:return Ft.trys.push([1,3,,4]),[4,Promise.all(St)];case 2:return Rt=Ft.sent(),dt(Rt),[3,4];case 3:return Dt=Ft.sent(),vt(Dt),[3,4];case 4:return[3,6];case 5:Nt=Promise.all(At.map(fromEntry)),St.push(Nt),Et(),Ft.label=6;case 6:return[2]}})})},function(At){vt(At)})}Et()})}function fromFileEntry(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return[2,new Promise(function(dt,vt){ft.file(function(St){var Et=toFileWithPath(St,ft.fullPath);dt(Et)},function(St){vt(St)})})]})})}var _default=function(ft,lt){if(ft&&lt){var dt=Array.isArray(lt)?lt:lt.split(","),vt=ft.name||"",St=(ft.type||"").toLowerCase(),Et=St.replace(/\/.*$/,"");return dt.some(function(Ct){var At=Ct.trim().toLowerCase();return At.charAt(0)==="."?vt.toLowerCase().endsWith(At):At.endsWith("/*")?Et===At.replace(/\/.*$/,""):St===At})}return!0};function _toConsumableArray$1(ft){return _arrayWithoutHoles$1(ft)||_iterableToArray$1(ft)||_unsupportedIterableToArray$1(ft)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _arrayWithoutHoles$1(ft){if(Array.isArray(ft))return _arrayLikeToArray$1(ft)}function ownKeys$2(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ft,St).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$1(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$2(Object(dt),!0).forEach(function(vt){_defineProperty$3(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$2(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _defineProperty$3(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _slicedToArray$1(ft,lt){return _arrayWithHoles$1(ft)||_iterableToArrayLimit$1(ft,lt)||_unsupportedIterableToArray$1(ft,lt)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$1(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$1(ft,lt)}}function _arrayLikeToArray$1(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _iterableToArrayLimit$1(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],St=!0,Et=!1,Ct,At;try{for(dt=dt.call(ft);!(St=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));St=!0);}catch(Rt){Et=!0,At=Rt}finally{try{!St&&dt.return!=null&&dt.return()}finally{if(Et)throw At}}return vt}}function _arrayWithHoles$1(ft){if(Array.isArray(ft))return ft}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function ft(lt){lt=Array.isArray(lt)&&lt.length===1?lt[0]:lt;var dt=Array.isArray(lt)?"one of ".concat(lt.join(", ")):lt;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(dt)}},getTooLargeRejectionErr=function ft(lt){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(lt," ").concat(lt===1?"byte":"bytes")}},getTooSmallRejectionErr=function ft(lt){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(lt," ").concat(lt===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(ft,lt){var dt=ft.type==="application/x-moz-file"||_default(ft,lt);return[dt,dt?null:getInvalidTypeRejectionErr(lt)]}function fileMatchSize(ft,lt,dt){if(isDefined(ft.size))if(isDefined(lt)&&isDefined(dt)){if(ft.size>dt)return[!1,getTooLargeRejectionErr(dt)];if(ft.size<lt)return[!1,getTooSmallRejectionErr(lt)]}else{if(isDefined(lt)&&ft.size<lt)return[!1,getTooSmallRejectionErr(lt)];if(isDefined(dt)&&ft.size>dt)return[!1,getTooLargeRejectionErr(dt)]}return[!0,null]}function isDefined(ft){return ft!=null}function allFilesAccepted(ft){var lt=ft.files,dt=ft.accept,vt=ft.minSize,St=ft.maxSize,Et=ft.multiple,Ct=ft.maxFiles,At=ft.validator;return!Et&&lt.length>1||Et&&Ct>=1&&lt.length>Ct?!1:lt.every(function(Rt){var Dt=fileAccepted(Rt,dt),Nt=_slicedToArray$1(Dt,1),Ft=Nt[0],Ut=fileMatchSize(Rt,vt,St),Wt=_slicedToArray$1(Ut,1),Zt=Wt[0],Kt=At?At(Rt):null;return Ft&&Zt&&!Kt})}function isPropagationStopped(ft){return typeof ft.isPropagationStopped=="function"?ft.isPropagationStopped():typeof ft.cancelBubble<"u"?ft.cancelBubble:!1}function isEvtWithFiles(ft){return ft.dataTransfer?Array.prototype.some.call(ft.dataTransfer.types,function(lt){return lt==="Files"||lt==="application/x-moz-file"}):!!ft.target&&!!ft.target.files}function onDocumentDragOver(ft){ft.preventDefault()}function isIe(ft){return ft.indexOf("MSIE")!==-1||ft.indexOf("Trident/")!==-1}function isEdge(ft){return ft.indexOf("Edge/")!==-1}function isIeOrEdge(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(ft)||isEdge(ft)}function composeEventHandlers(){for(var ft=arguments.length,lt=new Array(ft),dt=0;dt<ft;dt++)lt[dt]=arguments[dt];return function(vt){for(var St=arguments.length,Et=new Array(St>1?St-1:0),Ct=1;Ct<St;Ct++)Et[Ct-1]=arguments[Ct];return lt.some(function(At){return!isPropagationStopped(vt)&&At&&At.apply(void 0,[vt].concat(Et)),isPropagationStopped(vt)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(ft){if(isDefined(ft)){var lt=Object.entries(ft).filter(function(dt){var vt=_slicedToArray$1(dt,2),St=vt[0],Et=vt[1],Ct=!0;return isMIMEType(St)||(console.warn('Skipped "'.concat(St,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),Ct=!1),(!Array.isArray(Et)||!Et.every(isExt))&&(console.warn('Skipped "'.concat(St,'" because an invalid file extension was provided.')),Ct=!1),Ct}).reduce(function(dt,vt){var St=_slicedToArray$1(vt,2),Et=St[0],Ct=St[1];return _objectSpread$1(_objectSpread$1({},dt),{},_defineProperty$3({},Et,Ct))},{});return[{description:"Files",accept:lt}]}return ft}function acceptPropAsAcceptAttr(ft){if(isDefined(ft))return Object.entries(ft).reduce(function(lt,dt){var vt=_slicedToArray$1(dt,2),St=vt[0],Et=vt[1];return[].concat(_toConsumableArray$1(lt),[St],_toConsumableArray$1(Et))},[]).filter(function(lt){return isMIMEType(lt)||isExt(lt)}).join(",")}function isAbort(ft){return ft instanceof DOMException&&(ft.name==="AbortError"||ft.code===ft.ABORT_ERR)}function isSecurityError(ft){return ft instanceof DOMException&&(ft.name==="SecurityError"||ft.code===ft.SECURITY_ERR)}function isMIMEType(ft){return ft==="audio/*"||ft==="video/*"||ft==="image/*"||ft==="text/*"||/\w+\/[-+.\w]+/g.test(ft)}function isExt(ft){return/^.*\.[\w]+$/.test(ft)}var _excluded$2=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(ft){return _arrayWithoutHoles(ft)||_iterableToArray(ft)||_unsupportedIterableToArray(ft)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _arrayWithoutHoles(ft){if(Array.isArray(ft))return _arrayLikeToArray(ft)}function _slicedToArray(ft,lt){return _arrayWithHoles(ft)||_iterableToArrayLimit(ft,lt)||_unsupportedIterableToArray(ft,lt)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray(ft,lt)}}function _arrayLikeToArray(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _iterableToArrayLimit(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],St=!0,Et=!1,Ct,At;try{for(dt=dt.call(ft);!(St=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));St=!0);}catch(Rt){Et=!0,At=Rt}finally{try{!St&&dt.return!=null&&dt.return()}finally{if(Et)throw At}}return vt}}function _arrayWithHoles(ft){if(Array.isArray(ft))return ft}function ownKeys$1(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ft,St).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$1(Object(dt),!0).forEach(function(vt){_defineProperty$2(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$1(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _defineProperty$2(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _objectWithoutProperties$1(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$2(ft,lt),vt,St;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(St=0;St<Et.length;St++)vt=Et[St],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}function _objectWithoutPropertiesLoose$2(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),St,Et;for(Et=0;Et<vt.length;Et++)St=vt[Et],!(lt.indexOf(St)>=0)&&(dt[St]=ft[St]);return dt}var Dropzone=reactExports.forwardRef(function(ft,lt){var dt=ft.children,vt=_objectWithoutProperties$1(ft,_excluded$2),St=useDropzone(vt),Et=St.open,Ct=_objectWithoutProperties$1(St,_excluded2);return reactExports.useImperativeHandle(lt,function(){return{open:Et}},[Et]),React.createElement(reactExports.Fragment,null,dt(_objectSpread(_objectSpread({},Ct),{},{open:Et})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=_objectSpread(_objectSpread({},defaultProps),ft),dt=lt.accept,vt=lt.disabled,St=lt.getFilesFromEvent,Et=lt.maxSize,Ct=lt.minSize,At=lt.multiple,Rt=lt.maxFiles,Dt=lt.onDragEnter,Nt=lt.onDragLeave,Ft=lt.onDragOver,Ut=lt.onDrop,Wt=lt.onDropAccepted,Zt=lt.onDropRejected,Kt=lt.onFileDialogCancel,cn=lt.onFileDialogOpen,hn=lt.useFsAccessApi,dn=lt.autoFocus,pn=lt.preventDropOnDocument,gn=lt.noClick,vn=lt.noKeyboard,bn=lt.noDrag,$n=lt.noDragEventsBubbling,Tn=lt.onError,In=lt.validator,Pn=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(dt)},[dt]),zn=reactExports.useMemo(function(){return pickerOptionsFromAccept(dt)},[dt]),An=reactExports.useMemo(function(){return typeof cn=="function"?cn:noop$1},[cn]),Gn=reactExports.useMemo(function(){return typeof Kt=="function"?Kt:noop$1},[Kt]),xn=reactExports.useRef(null),Qn=reactExports.useRef(null),qn=reactExports.useReducer(reducer,initialState),nr=_slicedToArray(qn,2),Un=nr[0],Nn=nr[1],jn=Un.isFocused,Ln=Un.isFileDialogActive,Cn=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&hn&&canUseFileSystemAccessAPI()),tr=function(){!Cn.current&&Ln&&setTimeout(function(){if(Qn.current){var lr=Qn.current.files;lr.length||(Nn({type:"closeDialog"}),Gn())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",tr,!1),function(){window.removeEventListener("focus",tr,!1)}},[Qn,Ln,Gn,Cn]);var ir=reactExports.useRef([]),Zn=function(lr){xn.current&&xn.current.contains(lr.target)||(lr.preventDefault(),ir.current=[])};reactExports.useEffect(function(){return pn&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Zn,!1)),function(){pn&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Zn))}},[xn,pn]),reactExports.useEffect(function(){return!vt&&dn&&xn.current&&xn.current.focus(),function(){}},[xn,dn,vt]);var br=reactExports.useCallback(function(rr){Tn?Tn(rr):console.error(rr)},[Tn]),fr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Sr(rr),ir.current=[].concat(_toConsumableArray(ir.current),[rr.target]),isEvtWithFiles(rr)&&Promise.resolve(St(rr)).then(function(lr){if(!(isPropagationStopped(rr)&&!$n)){var xr=lr.length,Fr=xr>0&&allFilesAccepted({files:lr,accept:Pn,minSize:Ct,maxSize:Et,multiple:At,maxFiles:Rt,validator:In}),mr=xr>0&&!Fr;Nn({isDragAccept:Fr,isDragReject:mr,isDragActive:!0,type:"setDraggedFiles"}),Dt&&Dt(rr)}}).catch(function(lr){return br(lr)})},[St,Dt,br,$n,Pn,Ct,Et,At,Rt,In]),Or=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Sr(rr);var lr=isEvtWithFiles(rr);if(lr&&rr.dataTransfer)try{rr.dataTransfer.dropEffect="copy"}catch{}return lr&&Ft&&Ft(rr),!1},[Ft,$n]),Pr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Sr(rr);var lr=ir.current.filter(function(Fr){return xn.current&&xn.current.contains(Fr)}),xr=lr.indexOf(rr.target);xr!==-1&&lr.splice(xr,1),ir.current=lr,!(lr.length>0)&&(Nn({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(rr)&&Nt&&Nt(rr))},[xn,Nt,$n]),zr=reactExports.useCallback(function(rr,lr){var xr=[],Fr=[];rr.forEach(function(mr){var Yr=fileAccepted(mr,Pn),Vr=_slicedToArray(Yr,2),eo=Vr[0],ur=Vr[1],kr=fileMatchSize(mr,Ct,Et),Br=_slicedToArray(kr,2),Rn=Br[0],Xn=Br[1],cr=In?In(mr):null;if(eo&&Rn&&!cr)xr.push(mr);else{var wr=[ur,Xn];cr&&(wr=wr.concat(cr)),Fr.push({file:mr,errors:wr.filter(function(Kn){return Kn})})}}),(!At&&xr.length>1||At&&Rt>=1&&xr.length>Rt)&&(xr.forEach(function(mr){Fr.push({file:mr,errors:[TOO_MANY_FILES_REJECTION]})}),xr.splice(0)),Nn({acceptedFiles:xr,fileRejections:Fr,type:"setFiles"}),Ut&&Ut(xr,Fr,lr),Fr.length>0&&Zt&&Zt(Fr,lr),xr.length>0&&Wt&&Wt(xr,lr)},[Nn,At,Pn,Ct,Et,Rt,Ut,Wt,Zt,In]),Dr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Sr(rr),ir.current=[],isEvtWithFiles(rr)&&Promise.resolve(St(rr)).then(function(lr){isPropagationStopped(rr)&&!$n||zr(lr,rr)}).catch(function(lr){return br(lr)}),Nn({type:"reset"})},[St,zr,br,$n]),_r=reactExports.useCallback(function(){if(Cn.current){Nn({type:"openDialog"}),An();var rr={multiple:At,types:zn};window.showOpenFilePicker(rr).then(function(lr){return St(lr)}).then(function(lr){zr(lr,null),Nn({type:"closeDialog"})}).catch(function(lr){isAbort(lr)?(Gn(lr),Nn({type:"closeDialog"})):isSecurityError(lr)?(Cn.current=!1,Qn.current?(Qn.current.value=null,Qn.current.click()):br(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):br(lr)});return}Qn.current&&(Nn({type:"openDialog"}),An(),Qn.current.value=null,Qn.current.click())},[Nn,An,Gn,hn,zr,br,zn,At]),Nr=reactExports.useCallback(function(rr){!xn.current||!xn.current.isEqualNode(rr.target)||(rr.key===" "||rr.key==="Enter"||rr.keyCode===32||rr.keyCode===13)&&(rr.preventDefault(),_r())},[xn,_r]),Dn=reactExports.useCallback(function(){Nn({type:"focus"})},[]),yr=reactExports.useCallback(function(){Nn({type:"blur"})},[]),hr=reactExports.useCallback(function(){gn||(isIeOrEdge()?setTimeout(_r,0):_r())},[gn,_r]),Jn=function(lr){return vt?null:lr},Yn=function(lr){return vn?null:Jn(lr)},ar=function(lr){return bn?null:Jn(lr)},Sr=function(lr){$n&&lr.stopPropagation()},gr=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lr=rr.refKey,xr=lr===void 0?"ref":lr,Fr=rr.role,mr=rr.onKeyDown,Yr=rr.onFocus,Vr=rr.onBlur,eo=rr.onClick,ur=rr.onDragEnter,kr=rr.onDragOver,Br=rr.onDragLeave,Rn=rr.onDrop,Xn=_objectWithoutProperties$1(rr,_excluded3);return _objectSpread(_objectSpread(_defineProperty$2({onKeyDown:Yn(composeEventHandlers(mr,Nr)),onFocus:Yn(composeEventHandlers(Yr,Dn)),onBlur:Yn(composeEventHandlers(Vr,yr)),onClick:Jn(composeEventHandlers(eo,hr)),onDragEnter:ar(composeEventHandlers(ur,fr)),onDragOver:ar(composeEventHandlers(kr,Or)),onDragLeave:ar(composeEventHandlers(Br,Pr)),onDrop:ar(composeEventHandlers(Rn,Dr)),role:typeof Fr=="string"&&Fr!==""?Fr:"presentation"},xr,xn),!vt&&!vn?{tabIndex:0}:{}),Xn)}},[xn,Nr,Dn,yr,hr,fr,Or,Pr,Dr,vn,bn,vt]),Vn=reactExports.useCallback(function(rr){rr.stopPropagation()},[]),Wn=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lr=rr.refKey,xr=lr===void 0?"ref":lr,Fr=rr.onChange,mr=rr.onClick,Yr=_objectWithoutProperties$1(rr,_excluded4),Vr=_defineProperty$2({accept:Pn,multiple:At,type:"file",style:{display:"none"},onChange:Jn(composeEventHandlers(Fr,Dr)),onClick:Jn(composeEventHandlers(mr,Vn)),tabIndex:-1},xr,Qn);return _objectSpread(_objectSpread({},Vr),Yr)}},[Qn,dt,At,Dr,vt]);return _objectSpread(_objectSpread({},Un),{},{isFocused:jn&&!vt,getRootProps:gr,getInputProps:Wn,rootRef:xn,inputRef:Qn,open:Jn(_r)})}function reducer(ft,lt){switch(lt.type){case"focus":return _objectSpread(_objectSpread({},ft),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},ft),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},ft),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},ft),{},{isDragActive:lt.isDragActive,isDragAccept:lt.isDragAccept,isDragReject:lt.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},ft),{},{acceptedFiles:lt.acceptedFiles,fileRejections:lt.fileRejections});case"reset":return _objectSpread({},initialState);default:return ft}}function noop$1(){}const CancelButton=({onClick:ft})=>jsx(Button,{color:"gray",onClick:ft,children:"Cancel"}),UploadFileModal=({open:ft,onClose:lt,onFileUpload:dt,header:vt})=>{const St=reactExports.useCallback(Dt=>{Dt.forEach(Nt=>{const Ft=new FileReader;Ft.onabort=()=>console.log("file reading was aborted!"),Ft.onerror=()=>console.log("file reading failed!"),Ft.onload=()=>{dt(Ft.result),lt()},Ft.readAsBinaryString(Nt)})},[]),{getRootProps:Et,getInputProps:Ct,isDragActive:At,inputRef:Rt}=useDropzone({onDrop:Dt=>St(Dt),multiple:!1,onDragEnter:Dt=>{},onDragLeave:Dt=>{},onDragOver:Dt=>{},accept:{"application/json":[".robart"]}});return jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:vt}),jsx(Modal.Body,{children:jsxs("div",{className:"border-1 flex justify-center border-gray-500 bg-gray-50 p-5 py-14 text-lg shadow-lg",...Et(),children:[jsx("input",{ref:Rt,...Ct()}),jsx("p",{children:"Drag & drop a project file here, or click to select a file"})]})}),jsx(Modal.Footer,{children:jsx(CancelButton,{onClick:lt})})]})},useUIState=create$2()((ft,lt)=>({settingsModalOpen:!1,curveEditorOpen:!1,openSimulation:!1,robotManagerModalOpen:!1,toggleSettingsModal:()=>ft({settingsModalOpen:!lt().settingsModalOpen}),toggleCurveEditor:()=>ft({curveEditorOpen:!lt().curveEditorOpen}),toggleRobotManager:()=>{ft({robotManagerModalOpen:!lt().robotManagerModalOpen})},toggleSimulation:()=>{ft({openSimulation:!lt().openSimulation})}})),ConfirmationModal=({open:ft,onCancel:lt,onConfirm:dt,header:vt,children:St})=>jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:vt}),jsx(Modal.Body,{children:St}),jsxs(Modal.Footer,{children:[jsx(Button,{color:"gray",onClick:lt,children:"Cancel"}),jsx(Button,{color:"failure",onClick:dt,children:"Confirm"})]})]});var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(ft){let lt;const dt=new Set,vt=(Dt,Nt)=>{const Ft=typeof Dt=="function"?Dt(lt):Dt;if(Ft!==lt){const Ut=lt;lt=Nt?Ft:Object.assign({},lt,Ft),dt.forEach(Wt=>Wt(lt,Ut))}},St=()=>lt,Et=(Dt,Nt=St,Ft=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let Ut=Nt(lt);function Wt(){const Zt=Nt(lt);if(!Ft(Ut,Zt)){const Kt=Ut;Dt(Ut=Zt,Kt)}}return dt.add(Wt),()=>dt.delete(Wt)},Rt={setState:vt,getState:St,subscribe:(Dt,Nt,Ft)=>Nt||Ft?Et(Dt,Nt,Ft):(dt.add(Dt),()=>dt.delete(Dt)),destroy:()=>dt.clear()};return lt=ft(vt,St,Rt),Rt}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(ft){const lt=typeof ft=="function"?createStore$1(ft):ft,dt=(vt=lt.getState,St=Object.is)=>{const[,Et]=reactExports.useReducer(cn=>cn+1,0),Ct=lt.getState(),At=reactExports.useRef(Ct),Rt=reactExports.useRef(vt),Dt=reactExports.useRef(St),Nt=reactExports.useRef(!1),Ft=reactExports.useRef();Ft.current===void 0&&(Ft.current=vt(Ct));let Ut,Wt=!1;(At.current!==Ct||Rt.current!==vt||Dt.current!==St||Nt.current)&&(Ut=vt(Ct),Wt=!St(Ft.current,Ut)),useIsomorphicLayoutEffect$1(()=>{Wt&&(Ft.current=Ut),At.current=Ct,Rt.current=vt,Dt.current=St,Nt.current=!1});const Zt=reactExports.useRef(Ct);useIsomorphicLayoutEffect$1(()=>{const cn=()=>{try{const dn=lt.getState(),pn=Rt.current(dn);Dt.current(Ft.current,pn)||(At.current=dn,Ft.current=pn,Et())}catch{Nt.current=!0,Et()}},hn=lt.subscribe(cn);return lt.getState()!==Zt.current&&cn(),hn},[]);const Kt=Wt?Ut:Ft.current;return reactExports.useDebugValue(Kt),Kt};return Object.assign(dt,lt),dt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const vt=[dt,lt];return{next(){const St=vt.length<=0;return{value:vt.shift(),done:St}}}},dt}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(ft){function lt(Un,Nn){var jn=Un.length;Un.push(Nn);e:for(;0<jn;){var Ln=jn-1>>>1,Cn=Un[Ln];if(0<St(Cn,Nn))Un[Ln]=Nn,Un[jn]=Cn,jn=Ln;else break e}}function dt(Un){return Un.length===0?null:Un[0]}function vt(Un){if(Un.length===0)return null;var Nn=Un[0],jn=Un.pop();if(jn!==Nn){Un[0]=jn;e:for(var Ln=0,Cn=Un.length,tr=Cn>>>1;Ln<tr;){var ir=2*(Ln+1)-1,Zn=Un[ir],br=ir+1,fr=Un[br];if(0>St(Zn,jn))br<Cn&&0>St(fr,Zn)?(Un[Ln]=fr,Un[br]=jn,Ln=br):(Un[Ln]=Zn,Un[ir]=jn,Ln=ir);else if(br<Cn&&0>St(fr,jn))Un[Ln]=fr,Un[br]=jn,Ln=br;else break e}}return Nn}function St(Un,Nn){var jn=Un.sortIndex-Nn.sortIndex;return jn!==0?jn:Un.id-Nn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,At=Ct.now();ft.unstable_now=function(){return Ct.now()-At}}var Rt=[],Dt=[],Nt=1,Ft=null,Ut=3,Wt=!1,Zt=!1,Kt=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,dn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pn(Un){for(var Nn=dt(Dt);Nn!==null;){if(Nn.callback===null)vt(Dt);else if(Nn.startTime<=Un)vt(Dt),Nn.sortIndex=Nn.expirationTime,lt(Rt,Nn);else break;Nn=dt(Dt)}}function gn(Un){if(Kt=!1,pn(Un),!Zt)if(dt(Rt)!==null)Zt=!0,qn(vn);else{var Nn=dt(Dt);Nn!==null&&nr(gn,Nn.startTime-Un)}}function vn(Un,Nn){Zt=!1,Kt&&(Kt=!1,hn(Tn),Tn=-1),Wt=!0;var jn=Ut;try{for(pn(Nn),Ft=dt(Rt);Ft!==null&&(!(Ft.expirationTime>Nn)||Un&&!zn());){var Ln=Ft.callback;if(typeof Ln=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Cn=Ln(Ft.expirationTime<=Nn);Nn=ft.unstable_now(),typeof Cn=="function"?Ft.callback=Cn:Ft===dt(Rt)&&vt(Rt),pn(Nn)}else vt(Rt);Ft=dt(Rt)}if(Ft!==null)var tr=!0;else{var ir=dt(Dt);ir!==null&&nr(gn,ir.startTime-Nn),tr=!1}return tr}finally{Ft=null,Ut=jn,Wt=!1}}var bn=!1,$n=null,Tn=-1,In=5,Pn=-1;function zn(){return!(ft.unstable_now()-Pn<In)}function An(){if($n!==null){var Un=ft.unstable_now();Pn=Un;var Nn=!0;try{Nn=$n(!0,Un)}finally{Nn?Gn():(bn=!1,$n=null)}}else bn=!1}var Gn;if(typeof dn=="function")Gn=function(){dn(An)};else if(typeof MessageChannel<"u"){var xn=new MessageChannel,Qn=xn.port2;xn.port1.onmessage=An,Gn=function(){Qn.postMessage(null)}}else Gn=function(){cn(An,0)};function qn(Un){$n=Un,bn||(bn=!0,Gn())}function nr(Un,Nn){Tn=cn(function(){Un(ft.unstable_now())},Nn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Un){Un.callback=null},ft.unstable_continueExecution=function(){Zt||Wt||(Zt=!0,qn(vn))},ft.unstable_forceFrameRate=function(Un){0>Un||125<Un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Un?Math.floor(1e3/Un):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(Rt)},ft.unstable_next=function(Un){switch(Ut){case 1:case 2:case 3:var Nn=3;break;default:Nn=Ut}var jn=Ut;Ut=Nn;try{return Un()}finally{Ut=jn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Un,Nn){switch(Un){case 1:case 2:case 3:case 4:case 5:break;default:Un=3}var jn=Ut;Ut=Un;try{return Nn()}finally{Ut=jn}},ft.unstable_scheduleCallback=function(Un,Nn,jn){var Ln=ft.unstable_now();switch(typeof jn=="object"&&jn!==null?(jn=jn.delay,jn=typeof jn=="number"&&0<jn?Ln+jn:Ln):jn=Ln,Un){case 1:var Cn=-1;break;case 2:Cn=250;break;case 5:Cn=1073741823;break;case 4:Cn=1e4;break;default:Cn=5e3}return Cn=jn+Cn,Un={id:Nt++,callback:Nn,priorityLevel:Un,startTime:jn,expirationTime:Cn,sortIndex:-1},jn>Ln?(Un.sortIndex=jn,lt(Dt,Un),dt(Rt)===null&&Un===dt(Dt)&&(Kt?(hn(Tn),Tn=-1):Kt=!0,nr(gn,jn-Ln))):(Un.sortIndex=Cn,lt(Rt,Un),Zt||Wt||(Zt=!0,qn(vn))),Un},ft.unstable_shouldYield=zn,ft.unstable_wrapCallback=function(Un){var Nn=Ut;return function(){var jn=Ut;Ut=Nn;try{return Un.apply(this,arguments)}finally{Ut=jn}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function ft(lt){var dt={},vt=reactExports,St=requireScheduler(),Et=Object.assign;function Ct(Ht){for(var ln="https://reactjs.org/docs/error-decoder.html?invariant="+Ht,yn=1;yn<arguments.length;yn++)ln+="&args[]="+encodeURIComponent(arguments[yn]);return"Minified React error #"+Ht+"; visit "+ln+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var At=vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rt=Symbol.for("react.element"),Dt=Symbol.for("react.portal"),Nt=Symbol.for("react.fragment"),Ft=Symbol.for("react.strict_mode"),Ut=Symbol.for("react.profiler"),Wt=Symbol.for("react.provider"),Zt=Symbol.for("react.context"),Kt=Symbol.for("react.forward_ref"),cn=Symbol.for("react.suspense"),hn=Symbol.for("react.suspense_list"),dn=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),gn=Symbol.for("react.offscreen"),vn=Symbol.iterator;function bn(Ht){return Ht===null||typeof Ht!="object"?null:(Ht=vn&&Ht[vn]||Ht["@@iterator"],typeof Ht=="function"?Ht:null)}function $n(Ht){if(Ht==null)return null;if(typeof Ht=="function")return Ht.displayName||Ht.name||null;if(typeof Ht=="string")return Ht;switch(Ht){case Nt:return"Fragment";case Dt:return"Portal";case Ut:return"Profiler";case Ft:return"StrictMode";case cn:return"Suspense";case hn:return"SuspenseList"}if(typeof Ht=="object")switch(Ht.$$typeof){case Zt:return(Ht.displayName||"Context")+".Consumer";case Wt:return(Ht._context.displayName||"Context")+".Provider";case Kt:var ln=Ht.render;return Ht=Ht.displayName,Ht||(Ht=ln.displayName||ln.name||"",Ht=Ht!==""?"ForwardRef("+Ht+")":"ForwardRef"),Ht;case dn:return ln=Ht.displayName||null,ln!==null?ln:$n(Ht.type)||"Memo";case pn:ln=Ht._payload,Ht=Ht._init;try{return $n(Ht(ln))}catch{}}return null}function Tn(Ht){var ln=Ht.type;switch(Ht.tag){case 24:return"Cache";case 9:return(ln.displayName||"Context")+".Consumer";case 10:return(ln._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Ht=ln.render,Ht=Ht.displayName||Ht.name||"",ln.displayName||(Ht!==""?"ForwardRef("+Ht+")":"ForwardRef");case 7:return"Fragment";case 5:return ln;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $n(ln);case 8:return ln===Ft?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof ln=="function")return ln.displayName||ln.name||null;if(typeof ln=="string")return ln}return null}function In(Ht){var ln=Ht,yn=Ht;if(Ht.alternate)for(;ln.return;)ln=ln.return;else{Ht=ln;do ln=Ht,ln.flags&4098&&(yn=ln.return),Ht=ln.return;while(Ht)}return ln.tag===3?yn:null}function Pn(Ht){if(In(Ht)!==Ht)throw Error(Ct(188))}function zn(Ht){var ln=Ht.alternate;if(!ln){if(ln=In(Ht),ln===null)throw Error(Ct(188));return ln!==Ht?null:Ht}for(var yn=Ht,On=ln;;){var Mn=yn.return;if(Mn===null)break;var Bn=Mn.alternate;if(Bn===null){if(On=Mn.return,On!==null){yn=On;continue}break}if(Mn.child===Bn.child){for(Bn=Mn.child;Bn;){if(Bn===yn)return Pn(Mn),Ht;if(Bn===On)return Pn(Mn),ln;Bn=Bn.sibling}throw Error(Ct(188))}if(yn.return!==On.return)yn=Mn,On=Bn;else{for(var dr=!1,Ar=Mn.child;Ar;){if(Ar===yn){dr=!0,yn=Mn,On=Bn;break}if(Ar===On){dr=!0,On=Mn,yn=Bn;break}Ar=Ar.sibling}if(!dr){for(Ar=Bn.child;Ar;){if(Ar===yn){dr=!0,yn=Bn,On=Mn;break}if(Ar===On){dr=!0,On=Bn,yn=Mn;break}Ar=Ar.sibling}if(!dr)throw Error(Ct(189))}}if(yn.alternate!==On)throw Error(Ct(190))}if(yn.tag!==3)throw Error(Ct(188));return yn.stateNode.current===yn?Ht:ln}function An(Ht){return Ht=zn(Ht),Ht!==null?Gn(Ht):null}function Gn(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){var ln=Gn(Ht);if(ln!==null)return ln;Ht=Ht.sibling}return null}function xn(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){if(Ht.tag!==4){var ln=xn(Ht);if(ln!==null)return ln}Ht=Ht.sibling}return null}var Qn=Array.isArray,qn=lt.getPublicInstance,nr=lt.getRootHostContext,Un=lt.getChildHostContext,Nn=lt.prepareForCommit,jn=lt.resetAfterCommit,Ln=lt.createInstance,Cn=lt.appendInitialChild,tr=lt.finalizeInitialChildren,ir=lt.prepareUpdate,Zn=lt.shouldSetTextContent,br=lt.createTextInstance,fr=lt.scheduleTimeout,Or=lt.cancelTimeout,Pr=lt.noTimeout,zr=lt.isPrimaryRenderer,Dr=lt.supportsMutation,_r=lt.supportsPersistence,Nr=lt.supportsHydration,Dn=lt.getInstanceFromNode,yr=lt.preparePortalMount,hr=lt.getCurrentEventPriority,Jn=lt.detachDeletedInstance,Yn=lt.supportsMicrotasks,ar=lt.scheduleMicrotask,Sr=lt.supportsTestSelectors,gr=lt.findFiberRoot,Vn=lt.getBoundingRect,Wn=lt.getTextContent,rr=lt.isHiddenSubtree,lr=lt.matchAccessibilityRole,xr=lt.setFocusIfFocusable,Fr=lt.setupIntersectionObserver,mr=lt.appendChild,Yr=lt.appendChildToContainer,Vr=lt.commitTextUpdate,eo=lt.commitMount,ur=lt.commitUpdate,kr=lt.insertBefore,Br=lt.insertInContainerBefore,Rn=lt.removeChild,Xn=lt.removeChildFromContainer,cr=lt.resetTextContent,wr=lt.hideInstance,Kn=lt.hideTextInstance,Cr=lt.unhideInstance,qr=lt.unhideTextInstance,oo=lt.clearContainer,co=lt.cloneInstance,jo=lt.createContainerChildSet,Xo=lt.appendChildToContainerChildSet,rs=lt.finalizeContainerChildren,zo=lt.replaceContainerChildren,os=lt.cloneHiddenInstance,Lo=lt.cloneHiddenTextInstance,Zo=lt.canHydrateInstance,Ll=lt.canHydrateTextInstance,So=lt.canHydrateSuspenseInstance,ss=lt.isSuspenseInstancePending,sr=lt.isSuspenseInstanceFallback,Gr=lt.registerSuspenseInstanceRetry,Qr=lt.getNextHydratableSibling,Ir=lt.getFirstHydratableChild,Xr=lt.getFirstHydratableChildWithinContainer,Oo=lt.getFirstHydratableChildWithinSuspenseInstance,_o=lt.hydrateInstance,wo=lt.hydrateTextInstance,Ao=lt.hydrateSuspenseInstance,Ro=lt.getNextHydratableInstanceAfterSuspenseInstance,Co=lt.commitHydratedContainer,to=lt.commitHydratedSuspenseInstance,vs=lt.clearSuspenseBoundary,zs=lt.clearSuspenseBoundaryFromContainer,Hs=lt.shouldDeleteUnhydratedTailInstances,Nl=lt.didNotMatchHydratedContainerTextInstance,Fo=lt.didNotMatchHydratedTextInstance,_i;function ts(Ht){if(_i===void 0)try{throw Error()}catch(yn){var ln=yn.stack.trim().match(/\n( *(at )?)/);_i=ln&&ln[1]||""}return`
`+_i+Ht}var Mo=!1;function fo(Ht,ln){if(!Ht||Mo)return"";Mo=!0;var yn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ln)if(ln=function(){throw Error()},Object.defineProperty(ln.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ln,[])}catch(io){var On=io}Reflect.construct(Ht,[],ln)}else{try{ln.call()}catch(io){On=io}Ht.call(ln.prototype)}else{try{throw Error()}catch(io){On=io}Ht()}}catch(io){if(io&&On&&typeof io.stack=="string"){for(var Mn=io.stack.split(`
`),Bn=On.stack.split(`
`),dr=Mn.length-1,Ar=Bn.length-1;1<=dr&&0<=Ar&&Mn[dr]!==Bn[Ar];)Ar--;for(;1<=dr&&0<=Ar;dr--,Ar--)if(Mn[dr]!==Bn[Ar]){if(dr!==1||Ar!==1)do if(dr--,Ar--,0>Ar||Mn[dr]!==Bn[Ar]){var Zr=`
`+Mn[dr].replace(" at new "," at ");return Ht.displayName&&Zr.includes("<anonymous>")&&(Zr=Zr.replace("<anonymous>",Ht.displayName)),Zr}while(1<=dr&&0<=Ar);break}}}finally{Mo=!1,Error.prepareStackTrace=yn}return(Ht=Ht?Ht.displayName||Ht.name:"")?ts(Ht):""}var jp=Object.prototype.hasOwnProperty,Ol=[],Sl=-1;function ds(Ht){return{current:Ht}}function no(Ht){0>Sl||(Ht.current=Ol[Sl],Ol[Sl]=null,Sl--)}function Yo(Ht,ln){Sl++,Ol[Sl]=Ht.current,Ht.current=ln}var _s={},Os=ds(_s),Qs=ds(!1),Po=_s;function ba(Ht,ln){var yn=Ht.type.contextTypes;if(!yn)return _s;var On=Ht.stateNode;if(On&&On.__reactInternalMemoizedUnmaskedChildContext===ln)return On.__reactInternalMemoizedMaskedChildContext;var Mn={},Bn;for(Bn in yn)Mn[Bn]=ln[Bn];return On&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=ln,Ht.__reactInternalMemoizedMaskedChildContext=Mn),Mn}function Cs(Ht){return Ht=Ht.childContextTypes,Ht!=null}function np(){no(Qs),no(Os)}function rp(Ht,ln,yn){if(Os.current!==_s)throw Error(Ct(168));Yo(Os,ln),Yo(Qs,yn)}function Cm(Ht,ln,yn){var On=Ht.stateNode;if(ln=ln.childContextTypes,typeof On.getChildContext!="function")return yn;On=On.getChildContext();for(var Mn in On)if(!(Mn in ln))throw Error(Ct(108,Tn(Ht)||"Unknown",Mn));return Et({},yn,On)}function mu(Ht){return Ht=(Ht=Ht.stateNode)&&Ht.__reactInternalMemoizedMergedChildContext||_s,Po=Os.current,Yo(Os,Ht),Yo(Qs,Qs.current),!0}function X_(Ht,ln,yn){var On=Ht.stateNode;if(!On)throw Error(Ct(169));yn?(Ht=Cm(Ht,ln,Po),On.__reactInternalMemoizedMergedChildContext=Ht,no(Qs),no(Os),Yo(Os,Ht)):no(Qs),Yo(Qs,yn)}var Tl=Math.clz32?Math.clz32:Am,Sp=Math.log,Xp=Math.LN2;function Am(Ht){return Ht>>>=0,Ht===0?32:31-(Sp(Ht)/Xp|0)|0}var ip=64,wu=4194304;function zu(Ht){switch(Ht&-Ht){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Ht&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Ht&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Ht}}function Tp(Ht,ln){var yn=Ht.pendingLanes;if(yn===0)return 0;var On=0,Mn=Ht.suspendedLanes,Bn=Ht.pingedLanes,dr=yn&268435455;if(dr!==0){var Ar=dr&~Mn;Ar!==0?On=zu(Ar):(Bn&=dr,Bn!==0&&(On=zu(Bn)))}else dr=yn&~Mn,dr!==0?On=zu(dr):Bn!==0&&(On=zu(Bn));if(On===0)return 0;if(ln!==0&&ln!==On&&!(ln&Mn)&&(Mn=On&-On,Bn=ln&-ln,Mn>=Bn||Mn===16&&(Bn&4194240)!==0))return ln;if(On&4&&(On|=yn&16),ln=Ht.entangledLanes,ln!==0)for(Ht=Ht.entanglements,ln&=On;0<ln;)yn=31-Tl(ln),Mn=1<<yn,On|=Ht[yn],ln&=~Mn;return On}function Y_(Ht,ln){switch(Ht){case 1:case 2:case 4:return ln+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ln+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yp(Ht,ln){for(var yn=Ht.suspendedLanes,On=Ht.pingedLanes,Mn=Ht.expirationTimes,Bn=Ht.pendingLanes;0<Bn;){var dr=31-Tl(Bn),Ar=1<<dr,Zr=Mn[dr];Zr===-1?(!(Ar&yn)||Ar&On)&&(Mn[dr]=Y_(Ar,ln)):Zr<=ln&&(Ht.expiredLanes|=Ar),Bn&=~Ar}}function ru(Ht){return Ht=Ht.pendingLanes&-1073741825,Ht!==0?Ht:Ht&1073741824?1073741824:0}function Zp(Ht){for(var ln=[],yn=0;31>yn;yn++)ln.push(Ht);return ln}function gu(Ht,ln,yn){Ht.pendingLanes|=ln,ln!==536870912&&(Ht.suspendedLanes=0,Ht.pingedLanes=0),Ht=Ht.eventTimes,ln=31-Tl(ln),Ht[ln]=yn}function xp(Ht,ln){var yn=Ht.pendingLanes&~ln;Ht.pendingLanes=ln,Ht.suspendedLanes=0,Ht.pingedLanes=0,Ht.expiredLanes&=ln,Ht.mutableReadLanes&=ln,Ht.entangledLanes&=ln,ln=Ht.entanglements;var On=Ht.eventTimes;for(Ht=Ht.expirationTimes;0<yn;){var Mn=31-Tl(yn),Bn=1<<Mn;ln[Mn]=0,On[Mn]=-1,Ht[Mn]=-1,yn&=~Bn}}function Cu(Ht,ln){var yn=Ht.entangledLanes|=ln;for(Ht=Ht.entanglements;yn;){var On=31-Tl(yn),Mn=1<<On;Mn&ln|Ht[On]&ln&&(Ht[On]|=ln),yn&=~Mn}}var Vo=0;function Ep(Ht){return Ht&=-Ht,1<Ht?4<Ht?Ht&268435455?16:536870912:4:1}var _u=St.unstable_scheduleCallback,km=St.unstable_cancelCallback,qp=St.unstable_shouldYield,Zl=St.unstable_requestPaint,ys=St.unstable_now,Zs=St.unstable_ImmediatePriority,Kp=St.unstable_UserBlockingPriority,xl=St.unstable_NormalPriority,Jp=St.unstable_IdlePriority,Hu=null,Kl=null;function r_(Ht){if(Kl&&typeof Kl.onCommitFiberRoot=="function")try{Kl.onCommitFiberRoot(Hu,Ht,void 0,(Ht.current.flags&128)===128)}catch{}}function em(Ht,ln){return Ht===ln&&(Ht!==0||1/Ht===1/ln)||Ht!==Ht&&ln!==ln}var El=typeof Object.is=="function"?Object.is:em,Bl=null,Qu=!1,qs=!1;function Im(Ht){Bl===null?Bl=[Ht]:Bl.push(Ht)}function $l(Ht){Qu=!0,Im(Ht)}function Jl(){if(!qs&&Bl!==null){qs=!0;var Ht=0,ln=Vo;try{var yn=Bl;for(Vo=1;Ht<yn.length;Ht++){var On=yn[Ht];do On=On(!0);while(On!==null)}Bl=null,Qu=!1}catch(Mn){throw Bl!==null&&(Bl=Bl.slice(Ht+1)),_u(Zs,Jl),Mn}finally{Vo=ln,qs=!1}}return null}var Rs=At.ReactCurrentBatchConfig;function tm(Ht,ln){if(El(Ht,ln))return!0;if(typeof Ht!="object"||Ht===null||typeof ln!="object"||ln===null)return!1;var yn=Object.keys(Ht),On=Object.keys(ln);if(yn.length!==On.length)return!1;for(On=0;On<yn.length;On++){var Mn=yn[On];if(!jp.call(ln,Mn)||!El(Ht[Mn],ln[Mn]))return!1}return!0}function Au(Ht){switch(Ht.tag){case 5:return ts(Ht.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return Ht=fo(Ht.type,!1),Ht;case 11:return Ht=fo(Ht.type.render,!1),Ht;case 1:return Ht=fo(Ht.type,!0),Ht;default:return""}}function Cl(Ht,ln){if(Ht&&Ht.defaultProps){ln=Et({},ln),Ht=Ht.defaultProps;for(var yn in Ht)ln[yn]===void 0&&(ln[yn]=Ht[yn]);return ln}return ln}var Es=ds(null),nm=null,ku=null,$p=null;function Rm(){$p=ku=nm=null}function Z_(Ht,ln,yn){zr?(Yo(Es,ln._currentValue),ln._currentValue=yn):(Yo(Es,ln._currentValue2),ln._currentValue2=yn)}function ju(Ht){var ln=Es.current;no(Es),zr?Ht._currentValue=ln:Ht._currentValue2=ln}function Ms(Ht,ln,yn){for(;Ht!==null;){var On=Ht.alternate;if((Ht.childLanes&ln)!==ln?(Ht.childLanes|=ln,On!==null&&(On.childLanes|=ln)):On!==null&&(On.childLanes&ln)!==ln&&(On.childLanes|=ln),Ht===yn)break;Ht=Ht.return}}function Ks(Ht,ln){nm=Ht,$p=ku=null,Ht=Ht.dependencies,Ht!==null&&Ht.firstContext!==null&&(Ht.lanes&ln&&(cu=!0),Ht.firstContext=null)}function ms(Ht){var ln=zr?Ht._currentValue:Ht._currentValue2;if($p!==Ht)if(Ht={context:Ht,memoizedValue:ln,next:null},ku===null){if(nm===null)throw Error(Ct(308));ku=Ht,nm.dependencies={lanes:0,firstContext:Ht}}else ku=ku.next=Ht;return ln}var Ps=null,Iu=!1;function ey(Ht){Ht.updateQueue={baseState:Ht.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nv(Ht,ln){Ht=Ht.updateQueue,ln.updateQueue===Ht&&(ln.updateQueue={baseState:Ht.baseState,firstBaseUpdate:Ht.firstBaseUpdate,lastBaseUpdate:Ht.lastBaseUpdate,shared:Ht.shared,effects:Ht.effects})}function yu(Ht,ln){return{eventTime:Ht,lane:ln,tag:0,payload:null,callback:null,next:null}}function op(Ht,ln){var yn=Ht.updateQueue;yn!==null&&(yn=yn.shared,Ns!==null&&Ht.mode&1&&!(Ho&2)?(Ht=yn.interleaved,Ht===null?(ln.next=ln,Ps===null?Ps=[yn]:Ps.push(yn)):(ln.next=Ht.next,Ht.next=ln),yn.interleaved=ln):(Ht=yn.pending,Ht===null?ln.next=ln:(ln.next=Ht.next,Ht.next=ln),yn.pending=ln))}function i_(Ht,ln,yn){if(ln=ln.updateQueue,ln!==null&&(ln=ln.shared,(yn&4194240)!==0)){var On=ln.lanes;On&=Ht.pendingLanes,yn|=On,ln.lanes=yn,Cu(Ht,yn)}}function ty(Ht,ln){var yn=Ht.updateQueue,On=Ht.alternate;if(On!==null&&(On=On.updateQueue,yn===On)){var Mn=null,Bn=null;if(yn=yn.firstBaseUpdate,yn!==null){do{var dr={eventTime:yn.eventTime,lane:yn.lane,tag:yn.tag,payload:yn.payload,callback:yn.callback,next:null};Bn===null?Mn=Bn=dr:Bn=Bn.next=dr,yn=yn.next}while(yn!==null);Bn===null?Mn=Bn=ln:Bn=Bn.next=ln}else Mn=Bn=ln;yn={baseState:On.baseState,firstBaseUpdate:Mn,lastBaseUpdate:Bn,shared:On.shared,effects:On.effects},Ht.updateQueue=yn;return}Ht=yn.lastBaseUpdate,Ht===null?yn.firstBaseUpdate=ln:Ht.next=ln,yn.lastBaseUpdate=ln}function q_(Ht,ln,yn,On){var Mn=Ht.updateQueue;Iu=!1;var Bn=Mn.firstBaseUpdate,dr=Mn.lastBaseUpdate,Ar=Mn.shared.pending;if(Ar!==null){Mn.shared.pending=null;var Zr=Ar,io=Zr.next;Zr.next=null,dr===null?Bn=io:dr.next=io,dr=Zr;var yo=Ht.alternate;yo!==null&&(yo=yo.updateQueue,Ar=yo.lastBaseUpdate,Ar!==dr&&(Ar===null?yo.firstBaseUpdate=io:Ar.next=io,yo.lastBaseUpdate=Zr))}if(Bn!==null){var No=Mn.baseState;dr=0,yo=io=Zr=null,Ar=Bn;do{var $o=Ar.lane,ps=Ar.eventTime;if((On&$o)===$o){yo!==null&&(yo=yo.next={eventTime:ps,lane:0,tag:Ar.tag,payload:Ar.payload,callback:Ar.callback,next:null});e:{var Eo=Ht,na=Ar;switch($o=ln,ps=yn,na.tag){case 1:if(Eo=na.payload,typeof Eo=="function"){No=Eo.call(ps,No,$o);break e}No=Eo;break e;case 3:Eo.flags=Eo.flags&-65537|128;case 0:if(Eo=na.payload,$o=typeof Eo=="function"?Eo.call(ps,No,$o):Eo,$o==null)break e;No=Et({},No,$o);break e;case 2:Iu=!0}}Ar.callback!==null&&Ar.lane!==0&&(Ht.flags|=64,$o=Mn.effects,$o===null?Mn.effects=[Ar]:$o.push(Ar))}else ps={eventTime:ps,lane:$o,tag:Ar.tag,payload:Ar.payload,callback:Ar.callback,next:null},yo===null?(io=yo=ps,Zr=No):yo=yo.next=ps,dr|=$o;if(Ar=Ar.next,Ar===null){if(Ar=Mn.shared.pending,Ar===null)break;$o=Ar,Ar=$o.next,$o.next=null,Mn.lastBaseUpdate=$o,Mn.shared.pending=null}}while(1);if(yo===null&&(Zr=No),Mn.baseState=Zr,Mn.firstBaseUpdate=io,Mn.lastBaseUpdate=yo,ln=Mn.shared.interleaved,ln!==null){Mn=ln;do dr|=Mn.lane,Mn=Mn.next;while(Mn!==ln)}else Bn===null&&(Mn.shared.lanes=0);zm|=dr,Ht.lanes=dr,Ht.memoizedState=No}}function K_(Ht,ln,yn){if(Ht=ln.effects,ln.effects=null,Ht!==null)for(ln=0;ln<Ht.length;ln++){var On=Ht[ln],Mn=On.callback;if(Mn!==null){if(On.callback=null,On=yn,typeof Mn!="function")throw Error(Ct(191,Mn));Mn.call(On)}}}var ny=new vt.Component().refs;function ry(Ht,ln,yn,On){ln=Ht.memoizedState,yn=yn(On,ln),yn=yn==null?ln:Et({},ln,yn),Ht.memoizedState=yn,Ht.lanes===0&&(Ht.updateQueue.baseState=yn)}var o_={isMounted:function(Ht){return(Ht=Ht._reactInternals)?In(Ht)===Ht:!1},enqueueSetState:function(Ht,ln,yn){Ht=Ht._reactInternals;var On=_l(),Mn=Rp(Ht),Bn=yu(On,Mn);Bn.payload=ln,yn!=null&&(Bn.callback=yn),op(Ht,Bn),ln=Su(Ht,Mn,On),ln!==null&&i_(ln,Ht,Mn)},enqueueReplaceState:function(Ht,ln,yn){Ht=Ht._reactInternals;var On=_l(),Mn=Rp(Ht),Bn=yu(On,Mn);Bn.tag=1,Bn.payload=ln,yn!=null&&(Bn.callback=yn),op(Ht,Bn),ln=Su(Ht,Mn,On),ln!==null&&i_(ln,Ht,Mn)},enqueueForceUpdate:function(Ht,ln){Ht=Ht._reactInternals;var yn=_l(),On=Rp(Ht),Mn=yu(yn,On);Mn.tag=2,ln!=null&&(Mn.callback=ln),op(Ht,Mn),ln=Su(Ht,On,yn),ln!==null&&i_(ln,Ht,On)}};function Bv(Ht,ln,yn,On,Mn,Bn,dr){return Ht=Ht.stateNode,typeof Ht.shouldComponentUpdate=="function"?Ht.shouldComponentUpdate(On,Bn,dr):ln.prototype&&ln.prototype.isPureReactComponent?!tm(yn,On)||!tm(Mn,Bn):!0}function Fv(Ht,ln,yn){var On=!1,Mn=_s,Bn=ln.contextType;return typeof Bn=="object"&&Bn!==null?Bn=ms(Bn):(Mn=Cs(ln)?Po:Os.current,On=ln.contextTypes,Bn=(On=On!=null)?ba(Ht,Mn):_s),ln=new ln(yn,Bn),Ht.memoizedState=ln.state!==null&&ln.state!==void 0?ln.state:null,ln.updater=o_,Ht.stateNode=ln,ln._reactInternals=Ht,On&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=Mn,Ht.__reactInternalMemoizedMaskedChildContext=Bn),ln}function Gv(Ht,ln,yn,On){Ht=ln.state,typeof ln.componentWillReceiveProps=="function"&&ln.componentWillReceiveProps(yn,On),typeof ln.UNSAFE_componentWillReceiveProps=="function"&&ln.UNSAFE_componentWillReceiveProps(yn,On),ln.state!==Ht&&o_.enqueueReplaceState(ln,ln.state,null)}function iy(Ht,ln,yn,On){var Mn=Ht.stateNode;Mn.props=yn,Mn.state=Ht.memoizedState,Mn.refs=ny,ey(Ht);var Bn=ln.contextType;typeof Bn=="object"&&Bn!==null?Mn.context=ms(Bn):(Bn=Cs(ln)?Po:Os.current,Mn.context=ba(Ht,Bn)),Mn.state=Ht.memoizedState,Bn=ln.getDerivedStateFromProps,typeof Bn=="function"&&(ry(Ht,ln,Bn,yn),Mn.state=Ht.memoizedState),typeof ln.getDerivedStateFromProps=="function"||typeof Mn.getSnapshotBeforeUpdate=="function"||typeof Mn.UNSAFE_componentWillMount!="function"&&typeof Mn.componentWillMount!="function"||(ln=Mn.state,typeof Mn.componentWillMount=="function"&&Mn.componentWillMount(),typeof Mn.UNSAFE_componentWillMount=="function"&&Mn.UNSAFE_componentWillMount(),ln!==Mn.state&&o_.enqueueReplaceState(Mn,Mn.state,null),q_(Ht,yn,Mn,On),Mn.state=Ht.memoizedState),typeof Mn.componentDidMount=="function"&&(Ht.flags|=4194308)}var Xu=[],im=0,s_=null,om=0,Fl=[],vu=0,sm=null,Yu=1,Zu="";function iu(Ht,ln){Xu[im++]=om,Xu[im++]=s_,s_=Ht,om=ln}function oy(Ht,ln,yn){Fl[vu++]=Yu,Fl[vu++]=Zu,Fl[vu++]=sm,sm=Ht;var On=Yu;Ht=Zu;var Mn=32-Tl(On)-1;On&=~(1<<Mn),yn+=1;var Bn=32-Tl(ln)+Mn;if(30<Bn){var dr=Mn-Mn%5;Bn=(On&(1<<dr)-1).toString(32),On>>=dr,Mn-=dr,Yu=1<<32-Tl(ln)+Mn|yn<<Mn|On,Zu=Bn+Ht}else Yu=1<<Bn|yn<<Mn|On,Zu=Ht}function J_(Ht){Ht.return!==null&&(iu(Ht,1),oy(Ht,1,0))}function sy(Ht){for(;Ht===s_;)s_=Xu[--im],Xu[im]=null,om=Xu[--im],Xu[im]=null;for(;Ht===sm;)sm=Fl[--vu],Fl[vu]=null,Zu=Fl[--vu],Fl[vu]=null,Yu=Fl[--vu],Fl[vu]=null}var ou=null,su=null,bs=!1,Mm=!1,Ru=null;function ay(Ht,ln){var yn=Tu(5,null,null,0);yn.elementType="DELETED",yn.stateNode=ln,yn.return=Ht,ln=Ht.deletions,ln===null?(Ht.deletions=[yn],Ht.flags|=16):ln.push(yn)}function Uv(Ht,ln){switch(Ht.tag){case 5:return ln=Zo(ln,Ht.type,Ht.pendingProps),ln!==null?(Ht.stateNode=ln,ou=Ht,su=Ir(ln),!0):!1;case 6:return ln=Ll(ln,Ht.pendingProps),ln!==null?(Ht.stateNode=ln,ou=Ht,su=null,!0):!1;case 13:if(ln=So(ln),ln!==null){var yn=sm!==null?{id:Yu,overflow:Zu}:null;return Ht.memoizedState={dehydrated:ln,treeContext:yn,retryLane:1073741824},yn=Tu(18,null,null,0),yn.stateNode=ln,yn.return=Ht,Ht.child=yn,ou=Ht,su=null,!0}return!1;default:return!1}}function sp(Ht){return(Ht.mode&1)!==0&&(Ht.flags&128)===0}function Pm(Ht){if(bs){var ln=su;if(ln){var yn=ln;if(!Uv(Ht,ln)){if(sp(Ht))throw Error(Ct(418));ln=Qr(yn);var On=ou;ln&&Uv(Ht,ln)?ay(On,yn):(Ht.flags=Ht.flags&-4097|2,bs=!1,ou=Ht)}}else{if(sp(Ht))throw Error(Ct(418));Ht.flags=Ht.flags&-4097|2,bs=!1,ou=Ht}}}function e0(Ht){for(Ht=Ht.return;Ht!==null&&Ht.tag!==5&&Ht.tag!==3&&Ht.tag!==13;)Ht=Ht.return;ou=Ht}function am(Ht){if(!Nr||Ht!==ou)return!1;if(!bs)return e0(Ht),bs=!0,!1;if(Ht.tag!==3&&(Ht.tag!==5||Hs(Ht.type)&&!Zn(Ht.type,Ht.memoizedProps))){var ln=su;if(ln){if(sp(Ht)){for(Ht=su;Ht;)Ht=Qr(Ht);throw Error(Ct(418))}for(;ln;)ay(Ht,ln),ln=Qr(ln)}}if(e0(Ht),Ht.tag===13){if(!Nr)throw Error(Ct(316));if(Ht=Ht.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(Ct(317));su=Ro(Ht)}else su=ou?Qr(Ht.stateNode):null;return!0}function Mu(){Nr&&(su=ou=null,Mm=bs=!1)}function a_(Ht){Ru===null?Ru=[Ht]:Ru.push(Ht)}function lm(Ht,ln,yn){if(Ht=yn.ref,Ht!==null&&typeof Ht!="function"&&typeof Ht!="object"){if(yn._owner){if(yn=yn._owner,yn){if(yn.tag!==1)throw Error(Ct(309));var On=yn.stateNode}if(!On)throw Error(Ct(147,Ht));var Mn=On,Bn=""+Ht;return ln!==null&&ln.ref!==null&&typeof ln.ref=="function"&&ln.ref._stringRef===Bn?ln.ref:(ln=function(dr){var Ar=Mn.refs;Ar===ny&&(Ar=Mn.refs={}),dr===null?delete Ar[Bn]:Ar[Bn]=dr},ln._stringRef=Bn,ln)}if(typeof Ht!="string")throw Error(Ct(284));if(!yn._owner)throw Error(Ct(290,Ht))}return Ht}function Dm(Ht,ln){throw Ht=Object.prototype.toString.call(ln),Error(Ct(31,Ht==="[object Object]"?"object with keys {"+Object.keys(ln).join(", ")+"}":Ht))}function Ss(Ht){var ln=Ht._init;return ln(Ht._payload)}function l_(Ht){function ln(Hr,Rr){if(Ht){var jr=Hr.deletions;jr===null?(Hr.deletions=[Rr],Hr.flags|=16):jr.push(Rr)}}function yn(Hr,Rr){if(!Ht)return null;for(;Rr!==null;)ln(Hr,Rr),Rr=Rr.sibling;return null}function On(Hr,Rr){for(Hr=new Map;Rr!==null;)Rr.key!==null?Hr.set(Rr.key,Rr):Hr.set(Rr.index,Rr),Rr=Rr.sibling;return Hr}function Mn(Hr,Rr){return Hr=Lp(Hr,Rr),Hr.index=0,Hr.sibling=null,Hr}function Bn(Hr,Rr,jr){return Hr.index=jr,Ht?(jr=Hr.alternate,jr!==null?(jr=jr.index,jr<Rr?(Hr.flags|=2,Rr):jr):(Hr.flags|=2,Rr)):(Hr.flags|=1048576,Rr)}function dr(Hr){return Ht&&Hr.alternate===null&&(Hr.flags|=2),Hr}function Ar(Hr,Rr,jr,so){return Rr===null||Rr.tag!==6?(Rr=Ml(jr,Hr.mode,so),Rr.return=Hr,Rr):(Rr=Mn(Rr,jr),Rr.return=Hr,Rr)}function Zr(Hr,Rr,jr,so){var bo=jr.type;return bo===Nt?yo(Hr,Rr,jr.props.children,so,jr.key):Rr!==null&&(Rr.elementType===bo||typeof bo=="object"&&bo!==null&&bo.$$typeof===pn&&Ss(bo)===Rr.type)?(so=Mn(Rr,jr.props),so.ref=lm(Hr,Rr,jr),so.return=Hr,so):(so=C0(jr.type,jr.key,jr.props,null,Hr.mode,so),so.ref=lm(Hr,Rr,jr),so.return=Hr,so)}function io(Hr,Rr,jr,so){return Rr===null||Rr.tag!==4||Rr.stateNode.containerInfo!==jr.containerInfo||Rr.stateNode.implementation!==jr.implementation?(Rr=Bs(jr,Hr.mode,so),Rr.return=Hr,Rr):(Rr=Mn(Rr,jr.children||[]),Rr.return=Hr,Rr)}function yo(Hr,Rr,jr,so,bo){return Rr===null||Rr.tag!==7?(Rr=ym(jr,Hr.mode,so,bo),Rr.return=Hr,Rr):(Rr=Mn(Rr,jr),Rr.return=Hr,Rr)}function No(Hr,Rr,jr){if(typeof Rr=="string"&&Rr!==""||typeof Rr=="number")return Rr=Ml(""+Rr,Hr.mode,jr),Rr.return=Hr,Rr;if(typeof Rr=="object"&&Rr!==null){switch(Rr.$$typeof){case Rt:return jr=C0(Rr.type,Rr.key,Rr.props,null,Hr.mode,jr),jr.ref=lm(Hr,null,Rr),jr.return=Hr,jr;case Dt:return Rr=Bs(Rr,Hr.mode,jr),Rr.return=Hr,Rr;case pn:var so=Rr._init;return No(Hr,so(Rr._payload),jr)}if(Qn(Rr)||bn(Rr))return Rr=ym(Rr,Hr.mode,jr,null),Rr.return=Hr,Rr;Dm(Hr,Rr)}return null}function $o(Hr,Rr,jr,so){var bo=Rr!==null?Rr.key:null;if(typeof jr=="string"&&jr!==""||typeof jr=="number")return bo!==null?null:Ar(Hr,Rr,""+jr,so);if(typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case Rt:return jr.key===bo?Zr(Hr,Rr,jr,so):null;case Dt:return jr.key===bo?io(Hr,Rr,jr,so):null;case pn:return bo=jr._init,$o(Hr,Rr,bo(jr._payload),so)}if(Qn(jr)||bn(jr))return bo!==null?null:yo(Hr,Rr,jr,so,null);Dm(Hr,jr)}return null}function ps(Hr,Rr,jr,so,bo){if(typeof so=="string"&&so!==""||typeof so=="number")return Hr=Hr.get(jr)||null,Ar(Rr,Hr,""+so,bo);if(typeof so=="object"&&so!==null){switch(so.$$typeof){case Rt:return Hr=Hr.get(so.key===null?jr:so.key)||null,Zr(Rr,Hr,so,bo);case Dt:return Hr=Hr.get(so.key===null?jr:so.key)||null,io(Rr,Hr,so,bo);case pn:var Wo=so._init;return ps(Hr,Rr,jr,Wo(so._payload),bo)}if(Qn(so)||bn(so))return Hr=Hr.get(jr)||null,yo(Rr,Hr,so,bo,null);Dm(Rr,so)}return null}function Eo(Hr,Rr,jr,so){for(var bo=null,Wo=null,Go=Rr,ns=Rr=0,Ts=null;Go!==null&&ns<jr.length;ns++){Go.index>ns?(Ts=Go,Go=null):Ts=Go.sibling;var Jo=$o(Hr,Go,jr[ns],so);if(Jo===null){Go===null&&(Go=Ts);break}Ht&&Go&&Jo.alternate===null&&ln(Hr,Go),Rr=Bn(Jo,Rr,ns),Wo===null?bo=Jo:Wo.sibling=Jo,Wo=Jo,Go=Ts}if(ns===jr.length)return yn(Hr,Go),bs&&iu(Hr,ns),bo;if(Go===null){for(;ns<jr.length;ns++)Go=No(Hr,jr[ns],so),Go!==null&&(Rr=Bn(Go,Rr,ns),Wo===null?bo=Go:Wo.sibling=Go,Wo=Go);return bs&&iu(Hr,ns),bo}for(Go=On(Hr,Go);ns<jr.length;ns++)Ts=ps(Go,Hr,ns,jr[ns],so),Ts!==null&&(Ht&&Ts.alternate!==null&&Go.delete(Ts.key===null?ns:Ts.key),Rr=Bn(Ts,Rr,ns),Wo===null?bo=Ts:Wo.sibling=Ts,Wo=Ts);return Ht&&Go.forEach(function(uu){return ln(Hr,uu)}),bs&&iu(Hr,ns),bo}function na(Hr,Rr,jr,so){var bo=bn(jr);if(typeof bo!="function")throw Error(Ct(150));if(jr=bo.call(jr),jr==null)throw Error(Ct(151));for(var Wo=bo=null,Go=Rr,ns=Rr=0,Ts=null,Jo=jr.next();Go!==null&&!Jo.done;ns++,Jo=jr.next()){Go.index>ns?(Ts=Go,Go=null):Ts=Go.sibling;var uu=$o(Hr,Go,Jo.value,so);if(uu===null){Go===null&&(Go=Ts);break}Ht&&Go&&uu.alternate===null&&ln(Hr,Go),Rr=Bn(uu,Rr,ns),Wo===null?bo=uu:Wo.sibling=uu,Wo=uu,Go=Ts}if(Jo.done)return yn(Hr,Go),bs&&iu(Hr,ns),bo;if(Go===null){for(;!Jo.done;ns++,Jo=jr.next())Jo=No(Hr,Jo.value,so),Jo!==null&&(Rr=Bn(Jo,Rr,ns),Wo===null?bo=Jo:Wo.sibling=Jo,Wo=Jo);return bs&&iu(Hr,ns),bo}for(Go=On(Hr,Go);!Jo.done;ns++,Jo=jr.next())Jo=ps(Go,Hr,ns,Jo.value,so),Jo!==null&&(Ht&&Jo.alternate!==null&&Go.delete(Jo.key===null?ns:Jo.key),Rr=Bn(Jo,Rr,ns),Wo===null?bo=Jo:Wo.sibling=Jo,Wo=Jo);return Ht&&Go.forEach(function(Bu){return ln(Hr,Bu)}),bs&&iu(Hr,ns),bo}function Us(Hr,Rr,jr,so){if(typeof jr=="object"&&jr!==null&&jr.type===Nt&&jr.key===null&&(jr=jr.props.children),typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case Rt:e:{for(var bo=jr.key,Wo=Rr;Wo!==null;){if(Wo.key===bo){if(bo=jr.type,bo===Nt){if(Wo.tag===7){yn(Hr,Wo.sibling),Rr=Mn(Wo,jr.props.children),Rr.return=Hr,Hr=Rr;break e}}else if(Wo.elementType===bo||typeof bo=="object"&&bo!==null&&bo.$$typeof===pn&&Ss(bo)===Wo.type){yn(Hr,Wo.sibling),Rr=Mn(Wo,jr.props),Rr.ref=lm(Hr,Wo,jr),Rr.return=Hr,Hr=Rr;break e}yn(Hr,Wo);break}else ln(Hr,Wo);Wo=Wo.sibling}jr.type===Nt?(Rr=ym(jr.props.children,Hr.mode,so,jr.key),Rr.return=Hr,Hr=Rr):(so=C0(jr.type,jr.key,jr.props,null,Hr.mode,so),so.ref=lm(Hr,Rr,jr),so.return=Hr,Hr=so)}return dr(Hr);case Dt:e:{for(Wo=jr.key;Rr!==null;){if(Rr.key===Wo)if(Rr.tag===4&&Rr.stateNode.containerInfo===jr.containerInfo&&Rr.stateNode.implementation===jr.implementation){yn(Hr,Rr.sibling),Rr=Mn(Rr,jr.children||[]),Rr.return=Hr,Hr=Rr;break e}else{yn(Hr,Rr);break}else ln(Hr,Rr);Rr=Rr.sibling}Rr=Bs(jr,Hr.mode,so),Rr.return=Hr,Hr=Rr}return dr(Hr);case pn:return Wo=jr._init,Us(Hr,Rr,Wo(jr._payload),so)}if(Qn(jr))return Eo(Hr,Rr,jr,so);if(bn(jr))return na(Hr,Rr,jr,so);Dm(Hr,jr)}return typeof jr=="string"&&jr!==""||typeof jr=="number"?(jr=""+jr,Rr!==null&&Rr.tag===6?(yn(Hr,Rr.sibling),Rr=Mn(Rr,jr),Rr.return=Hr,Hr=Rr):(yn(Hr,Rr),Rr=Ml(jr,Hr.mode,so),Rr.return=Hr,Hr=Rr),dr(Hr)):yn(Hr,Rr)}return Us}var Pu=l_(!0),cm=l_(!1),c_={},au=ds(c_),um=ds(c_),Gl=ds(c_);function Du(Ht){if(Ht===c_)throw Error(Ct(174));return Ht}function u_(Ht,ln){Yo(Gl,ln),Yo(um,Ht),Yo(au,c_),Ht=nr(ln),no(au),Yo(au,Ht)}function hm(){no(au),no(um),no(Gl)}function ly(Ht){var ln=Du(Gl.current),yn=Du(au.current);ln=Un(yn,Ht.type,ln),yn!==ln&&(Yo(um,Ht),Yo(au,ln))}function cy(Ht){um.current===Ht&&(no(au),no(um))}var $s=ds(0);function Ul(Ht){for(var ln=Ht;ln!==null;){if(ln.tag===13){var yn=ln.memoizedState;if(yn!==null&&(yn=yn.dehydrated,yn===null||ss(yn)||sr(yn)))return ln}else if(ln.tag===19&&ln.memoizedProps.revealOrder!==void 0){if(ln.flags&128)return ln}else if(ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===Ht)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===Ht)return null;ln=ln.return}ln.sibling.return=ln.return,ln=ln.sibling}return null}var uy=[];function h_(){for(var Ht=0;Ht<uy.length;Ht++){var ln=uy[Ht];zr?ln._workInProgressVersionPrimary=null:ln._workInProgressVersionSecondary=null}uy.length=0}var t0=At.ReactCurrentDispatcher,Ds=At.ReactCurrentBatchConfig,fs=0,As=null,Al=null,Js=null,d_=!1,f_=!1,p_=0,wp=0;function Il(){throw Error(Ct(321))}function Lm(Ht,ln){if(ln===null)return!1;for(var yn=0;yn<ln.length&&yn<Ht.length;yn++)if(!El(Ht[yn],ln[yn]))return!1;return!0}function hy(Ht,ln,yn,On,Mn,Bn){if(fs=Bn,As=ln,ln.memoizedState=null,ln.updateQueue=null,ln.lanes=0,t0.current=Ht===null||Ht.memoizedState===null?Ls:aS,Ht=yn(On,Mn),f_){Bn=0;do{if(f_=!1,p_=0,25<=Bn)throw Error(Ct(301));Bn+=1,Js=Al=null,ln.updateQueue=null,t0.current=lS,Ht=yn(On,Mn)}while(f_)}if(t0.current=uo,ln=Al!==null&&Al.next!==null,fs=0,Js=Al=As=null,d_=!1,ln)throw Error(Ct(300));return Ht}function Nm(){var Ht=p_!==0;return p_=0,Ht}function Lu(){var Ht={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?As.memoizedState=Js=Ht:Js=Js.next=Ht,Js}function qu(){if(Al===null){var Ht=As.alternate;Ht=Ht!==null?Ht.memoizedState:null}else Ht=Al.next;var ln=Js===null?As.memoizedState:Js.next;if(ln!==null)Js=ln,Al=Ht;else{if(Ht===null)throw Error(Ct(310));Al=Ht,Ht={memoizedState:Al.memoizedState,baseState:Al.baseState,baseQueue:Al.baseQueue,queue:Al.queue,next:null},Js===null?As.memoizedState=Js=Ht:Js=Js.next=Ht}return Js}function ap(Ht,ln){return typeof ln=="function"?ln(Ht):ln}function n0(Ht){var ln=qu(),yn=ln.queue;if(yn===null)throw Error(Ct(311));yn.lastRenderedReducer=Ht;var On=Al,Mn=On.baseQueue,Bn=yn.pending;if(Bn!==null){if(Mn!==null){var dr=Mn.next;Mn.next=Bn.next,Bn.next=dr}On.baseQueue=Mn=Bn,yn.pending=null}if(Mn!==null){Bn=Mn.next,On=On.baseState;var Ar=dr=null,Zr=null,io=Bn;do{var yo=io.lane;if((fs&yo)===yo)Zr!==null&&(Zr=Zr.next={lane:0,action:io.action,hasEagerState:io.hasEagerState,eagerState:io.eagerState,next:null}),On=io.hasEagerState?io.eagerState:Ht(On,io.action);else{var No={lane:yo,action:io.action,hasEagerState:io.hasEagerState,eagerState:io.eagerState,next:null};Zr===null?(Ar=Zr=No,dr=On):Zr=Zr.next=No,As.lanes|=yo,zm|=yo}io=io.next}while(io!==null&&io!==Bn);Zr===null?dr=On:Zr.next=Ar,El(On,ln.memoizedState)||(cu=!0),ln.memoizedState=On,ln.baseState=dr,ln.baseQueue=Zr,yn.lastRenderedState=On}if(Ht=yn.interleaved,Ht!==null){Mn=Ht;do Bn=Mn.lane,As.lanes|=Bn,zm|=Bn,Mn=Mn.next;while(Mn!==Ht)}else Mn===null&&(yn.lanes=0);return[ln.memoizedState,yn.dispatch]}function Bm(Ht){var ln=qu(),yn=ln.queue;if(yn===null)throw Error(Ct(311));yn.lastRenderedReducer=Ht;var On=yn.dispatch,Mn=yn.pending,Bn=ln.memoizedState;if(Mn!==null){yn.pending=null;var dr=Mn=Mn.next;do Bn=Ht(Bn,dr.action),dr=dr.next;while(dr!==Mn);El(Bn,ln.memoizedState)||(cu=!0),ln.memoizedState=Bn,ln.baseQueue===null&&(ln.baseState=Bn),yn.lastRenderedState=Bn}return[Bn,On]}function dy(){}function fy(Ht,ln){var yn=As,On=qu(),Mn=ln(),Bn=!El(On.memoizedState,Mn);if(Bn&&(On.memoizedState=Mn,cu=!0),On=On.queue,fm(Wv.bind(null,yn,On,Ht),[Ht]),On.getSnapshot!==ln||Bn||Js!==null&&Js.memoizedState.tag&1){if(yn.flags|=2048,dm(9,Vv.bind(null,yn,On,Mn,ln),void 0,null),Ns===null)throw Error(Ct(349));fs&30||m_(yn,ln,Mn)}return Mn}function m_(Ht,ln,yn){Ht.flags|=16384,Ht={getSnapshot:ln,value:yn},ln=As.updateQueue,ln===null?(ln={lastEffect:null,stores:null},As.updateQueue=ln,ln.stores=[Ht]):(yn=ln.stores,yn===null?ln.stores=[Ht]:yn.push(Ht))}function Vv(Ht,ln,yn,On){ln.value=yn,ln.getSnapshot=On,zv(ln)&&Su(Ht,1,-1)}function Wv(Ht,ln,yn){return yn(function(){zv(ln)&&Su(Ht,1,-1)})}function zv(Ht){var ln=Ht.getSnapshot;Ht=Ht.value;try{var yn=ln();return!El(Ht,yn)}catch{return!0}}function r0(Ht){var ln=Lu();return typeof Ht=="function"&&(Ht=Ht()),ln.memoizedState=ln.baseState=Ht,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:Ht},ln.queue=Ht,Ht=Ht.dispatch=lu.bind(null,As,Ht),[ln.memoizedState,Ht]}function dm(Ht,ln,yn,On){return Ht={tag:Ht,create:ln,destroy:yn,deps:On,next:null},ln=As.updateQueue,ln===null?(ln={lastEffect:null,stores:null},As.updateQueue=ln,ln.lastEffect=Ht.next=Ht):(yn=ln.lastEffect,yn===null?ln.lastEffect=Ht.next=Ht:(On=yn.next,yn.next=Ht,Ht.next=On,ln.lastEffect=Ht)),Ht}function Hv(){return qu().memoizedState}function i0(Ht,ln,yn,On){var Mn=Lu();As.flags|=Ht,Mn.memoizedState=dm(1|ln,yn,void 0,On===void 0?null:On)}function o0(Ht,ln,yn,On){var Mn=qu();On=On===void 0?null:On;var Bn=void 0;if(Al!==null){var dr=Al.memoizedState;if(Bn=dr.destroy,On!==null&&Lm(On,dr.deps)){Mn.memoizedState=dm(ln,yn,Bn,On);return}}As.flags|=Ht,Mn.memoizedState=dm(1|ln,yn,Bn,On)}function s0(Ht,ln){return i0(8390656,8,Ht,ln)}function fm(Ht,ln){return o0(2048,8,Ht,ln)}function my(Ht,ln){return o0(4,2,Ht,ln)}function a0(Ht,ln){return o0(4,4,Ht,ln)}function Qv(Ht,ln){if(typeof ln=="function")return Ht=Ht(),ln(Ht),function(){ln(null)};if(ln!=null)return Ht=Ht(),ln.current=Ht,function(){ln.current=null}}function g_(Ht,ln,yn){return yn=yn!=null?yn.concat([Ht]):null,o0(4,4,Qv.bind(null,ln,Ht),yn)}function gy(){}function jv(Ht,ln){var yn=qu();ln=ln===void 0?null:ln;var On=yn.memoizedState;return On!==null&&ln!==null&&Lm(ln,On[1])?On[0]:(yn.memoizedState=[Ht,ln],Ht)}function Xv(Ht,ln){var yn=qu();ln=ln===void 0?null:ln;var On=yn.memoizedState;return On!==null&&ln!==null&&Lm(ln,On[1])?On[0]:(Ht=Ht(),yn.memoizedState=[Ht,ln],Ht)}function sS(Ht,ln){var yn=Vo;Vo=yn!==0&&4>yn?yn:4,Ht(!0);var On=Ds.transition;Ds.transition={};try{Ht(!1),ln()}finally{Vo=yn,Ds.transition=On}}function Vl(){return qu().memoizedState}function To(Ht,ln,yn){var On=Rp(Ht);yn={lane:On,action:yn,hasEagerState:!1,eagerState:null,next:null},xa(Ht)?gs(ln,yn):(Ku(Ht,ln,yn),yn=_l(),Ht=Su(Ht,On,yn),Ht!==null&&Fm(Ht,ln,On))}function lu(Ht,ln,yn){var On=Rp(Ht),Mn={lane:On,action:yn,hasEagerState:!1,eagerState:null,next:null};if(xa(Ht))gs(ln,Mn);else{Ku(Ht,ln,Mn);var Bn=Ht.alternate;if(Ht.lanes===0&&(Bn===null||Bn.lanes===0)&&(Bn=ln.lastRenderedReducer,Bn!==null))try{var dr=ln.lastRenderedState,Ar=Bn(dr,yn);if(Mn.hasEagerState=!0,Mn.eagerState=Ar,El(Ar,dr))return}catch{}finally{}yn=_l(),Ht=Su(Ht,On,yn),Ht!==null&&Fm(Ht,ln,On)}}function xa(Ht){var ln=Ht.alternate;return Ht===As||ln!==null&&ln===As}function gs(Ht,ln){f_=d_=!0;var yn=Ht.pending;yn===null?ln.next=ln:(ln.next=yn.next,yn.next=ln),Ht.pending=ln}function Ku(Ht,ln,yn){Ns!==null&&Ht.mode&1&&!(Ho&2)?(Ht=ln.interleaved,Ht===null?(yn.next=yn,Ps===null?Ps=[ln]:Ps.push(ln)):(yn.next=Ht.next,Ht.next=yn),ln.interleaved=yn):(Ht=ln.pending,Ht===null?yn.next=yn:(yn.next=Ht.next,Ht.next=yn),ln.pending=yn)}function Fm(Ht,ln,yn){if(yn&4194240){var On=ln.lanes;On&=Ht.pendingLanes,yn|=On,ln.lanes=yn,Cu(Ht,yn)}}var uo={readContext:ms,useCallback:Il,useContext:Il,useEffect:Il,useImperativeHandle:Il,useInsertionEffect:Il,useLayoutEffect:Il,useMemo:Il,useReducer:Il,useRef:Il,useState:Il,useDebugValue:Il,useDeferredValue:Il,useTransition:Il,useMutableSource:Il,useSyncExternalStore:Il,useId:Il,unstable_isNewReconciler:!1},Ls={readContext:ms,useCallback:function(Ht,ln){return Lu().memoizedState=[Ht,ln===void 0?null:ln],Ht},useContext:ms,useEffect:s0,useImperativeHandle:function(Ht,ln,yn){return yn=yn!=null?yn.concat([Ht]):null,i0(4194308,4,Qv.bind(null,ln,Ht),yn)},useLayoutEffect:function(Ht,ln){return i0(4194308,4,Ht,ln)},useInsertionEffect:function(Ht,ln){return i0(4,2,Ht,ln)},useMemo:function(Ht,ln){var yn=Lu();return ln=ln===void 0?null:ln,Ht=Ht(),yn.memoizedState=[Ht,ln],Ht},useReducer:function(Ht,ln,yn){var On=Lu();return ln=yn!==void 0?yn(ln):ln,On.memoizedState=On.baseState=ln,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:ln},On.queue=Ht,Ht=Ht.dispatch=To.bind(null,As,Ht),[On.memoizedState,Ht]},useRef:function(Ht){var ln=Lu();return Ht={current:Ht},ln.memoizedState=Ht},useState:r0,useDebugValue:gy,useDeferredValue:function(Ht){var ln=r0(Ht),yn=ln[0],On=ln[1];return s0(function(){var Mn=Ds.transition;Ds.transition={};try{On(Ht)}finally{Ds.transition=Mn}},[Ht]),yn},useTransition:function(){var Ht=r0(!1),ln=Ht[0];return Ht=sS.bind(null,Ht[1]),Lu().memoizedState=Ht,[ln,Ht]},useMutableSource:function(){},useSyncExternalStore:function(Ht,ln,yn){var On=As,Mn=Lu();if(bs){if(yn===void 0)throw Error(Ct(407));yn=yn()}else{if(yn=ln(),Ns===null)throw Error(Ct(349));fs&30||m_(On,ln,yn)}Mn.memoizedState=yn;var Bn={value:yn,getSnapshot:ln};return Mn.queue=Bn,s0(Wv.bind(null,On,Bn,Ht),[Ht]),On.flags|=2048,dm(9,Vv.bind(null,On,Bn,yn,ln),void 0,null),yn},useId:function(){var Ht=Lu(),ln=Ns.identifierPrefix;if(bs){var yn=Zu,On=Yu;yn=(On&~(1<<32-Tl(On)-1)).toString(32)+yn,ln=":"+ln+"R"+yn,yn=p_++,0<yn&&(ln+="H"+yn.toString(32)),ln+=":"}else yn=wp++,ln=":"+ln+"r"+yn.toString(32)+":";return Ht.memoizedState=ln},unstable_isNewReconciler:!1},aS={readContext:ms,useCallback:jv,useContext:ms,useEffect:fm,useImperativeHandle:g_,useInsertionEffect:my,useLayoutEffect:a0,useMemo:Xv,useReducer:n0,useRef:Hv,useState:function(){return n0(ap)},useDebugValue:gy,useDeferredValue:function(Ht){var ln=n0(ap),yn=ln[0],On=ln[1];return fm(function(){var Mn=Ds.transition;Ds.transition={};try{On(Ht)}finally{Ds.transition=Mn}},[Ht]),yn},useTransition:function(){var Ht=n0(ap)[0],ln=qu().memoizedState;return[Ht,ln]},useMutableSource:dy,useSyncExternalStore:fy,useId:Vl,unstable_isNewReconciler:!1},lS={readContext:ms,useCallback:jv,useContext:ms,useEffect:fm,useImperativeHandle:g_,useInsertionEffect:my,useLayoutEffect:a0,useMemo:Xv,useReducer:Bm,useRef:Hv,useState:function(){return Bm(ap)},useDebugValue:gy,useDeferredValue:function(Ht){var ln=Bm(ap),yn=ln[0],On=ln[1];return fm(function(){var Mn=Ds.transition;Ds.transition={};try{On(Ht)}finally{Ds.transition=Mn}},[Ht]),yn},useTransition:function(){var Ht=Bm(ap)[0],ln=qu().memoizedState;return[Ht,ln]},useMutableSource:dy,useSyncExternalStore:fy,useId:Vl,unstable_isNewReconciler:!1};function yy(Ht,ln){try{var yn="",On=ln;do yn+=Au(On),On=On.return;while(On);var Mn=yn}catch(Bn){Mn=`
Error generating stack: `+Bn.message+`
`+Bn.stack}return{value:Ht,source:ln,stack:Mn}}function vy(Ht,ln){try{console.error(ln.value)}catch(yn){setTimeout(function(){throw yn})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function Yv(Ht,ln,yn){yn=yu(-1,yn),yn.tag=3,yn.payload={element:null};var On=ln.value;return yn.callback=function(){x0||(x0=!0,Py=On),vy(Ht,ln)},yn}function Zv(Ht,ln,yn){yn=yu(-1,yn),yn.tag=3;var On=Ht.type.getDerivedStateFromError;if(typeof On=="function"){var Mn=ln.value;yn.payload=function(){return On(Mn)},yn.callback=function(){vy(Ht,ln)}}var Bn=Ht.stateNode;return Bn!==null&&typeof Bn.componentDidCatch=="function"&&(yn.callback=function(){vy(Ht,ln),typeof On!="function"&&(Ip===null?Ip=new Set([this]):Ip.add(this));var dr=ln.stack;this.componentDidCatch(ln.value,{componentStack:dr!==null?dr:""})}),yn}function qv(Ht,ln,yn){var On=Ht.pingCache;if(On===null){On=Ht.pingCache=new cS;var Mn=new Set;On.set(ln,Mn)}else Mn=On.get(ln),Mn===void 0&&(Mn=new Set,On.set(ln,Mn));Mn.has(yn)||(Mn.add(yn),Ht=pS.bind(null,Ht,ln,yn),ln.then(Ht,Ht))}function Kv(Ht){do{var ln;if((ln=Ht.tag===13)&&(ln=Ht.memoizedState,ln=ln!==null?ln.dehydrated!==null:!0),ln)return Ht;Ht=Ht.return}while(Ht!==null);return null}function Jv(Ht,ln,yn,On,Mn){return Ht.mode&1?(Ht.flags|=65536,Ht.lanes=Mn,Ht):(Ht===ln?Ht.flags|=65536:(Ht.flags|=128,yn.flags|=131072,yn.flags&=-52805,yn.tag===1&&(yn.alternate===null?yn.tag=17:(ln=yu(-1,1),ln.tag=2,op(yn,ln))),yn.lanes|=1),Ht)}function Ju(Ht){Ht.flags|=4}function eO(Ht,ln){if(Ht!==null&&Ht.child===ln.child)return!0;if(ln.flags&16)return!1;for(Ht=ln.child;Ht!==null;){if(Ht.flags&12854||Ht.subtreeFlags&12854)return!1;Ht=Ht.sibling}return!0}var __,pm,l0,Ou;if(Dr)__=function(Ht,ln){for(var yn=ln.child;yn!==null;){if(yn.tag===5||yn.tag===6)Cn(Ht,yn.stateNode);else if(yn.tag!==4&&yn.child!==null){yn.child.return=yn,yn=yn.child;continue}if(yn===ln)break;for(;yn.sibling===null;){if(yn.return===null||yn.return===ln)return;yn=yn.return}yn.sibling.return=yn.return,yn=yn.sibling}},pm=function(){},l0=function(Ht,ln,yn,On,Mn){if(Ht=Ht.memoizedProps,Ht!==On){var Bn=ln.stateNode,dr=Du(au.current);yn=ir(Bn,yn,Ht,On,Mn,dr),(ln.updateQueue=yn)&&Ju(ln)}},Ou=function(Ht,ln,yn,On){yn!==On&&Ju(ln)};else if(_r){__=function(Ht,ln,yn,On){for(var Mn=ln.child;Mn!==null;){if(Mn.tag===5){var Bn=Mn.stateNode;yn&&On&&(Bn=os(Bn,Mn.type,Mn.memoizedProps,Mn)),Cn(Ht,Bn)}else if(Mn.tag===6)Bn=Mn.stateNode,yn&&On&&(Bn=Lo(Bn,Mn.memoizedProps,Mn)),Cn(Ht,Bn);else if(Mn.tag!==4){if(Mn.tag===22&&Mn.memoizedState!==null)Bn=Mn.child,Bn!==null&&(Bn.return=Mn),__(Ht,Mn,!0,!0);else if(Mn.child!==null){Mn.child.return=Mn,Mn=Mn.child;continue}}if(Mn===ln)break;for(;Mn.sibling===null;){if(Mn.return===null||Mn.return===ln)return;Mn=Mn.return}Mn.sibling.return=Mn.return,Mn=Mn.sibling}};var tO=function(Ht,ln,yn,On){for(var Mn=ln.child;Mn!==null;){if(Mn.tag===5){var Bn=Mn.stateNode;yn&&On&&(Bn=os(Bn,Mn.type,Mn.memoizedProps,Mn)),Xo(Ht,Bn)}else if(Mn.tag===6)Bn=Mn.stateNode,yn&&On&&(Bn=Lo(Bn,Mn.memoizedProps,Mn)),Xo(Ht,Bn);else if(Mn.tag!==4){if(Mn.tag===22&&Mn.memoizedState!==null)Bn=Mn.child,Bn!==null&&(Bn.return=Mn),tO(Ht,Mn,!0,!0);else if(Mn.child!==null){Mn.child.return=Mn,Mn=Mn.child;continue}}if(Mn===ln)break;for(;Mn.sibling===null;){if(Mn.return===null||Mn.return===ln)return;Mn=Mn.return}Mn.sibling.return=Mn.return,Mn=Mn.sibling}};pm=function(Ht,ln){var yn=ln.stateNode;if(!eO(Ht,ln)){Ht=yn.containerInfo;var On=jo(Ht);tO(On,ln,!1,!1),yn.pendingChildren=On,Ju(ln),rs(Ht,On)}},l0=function(Ht,ln,yn,On,Mn){var Bn=Ht.stateNode,dr=Ht.memoizedProps;if((Ht=eO(Ht,ln))&&dr===On)ln.stateNode=Bn;else{var Ar=ln.stateNode,Zr=Du(au.current),io=null;dr!==On&&(io=ir(Ar,yn,dr,On,Mn,Zr)),Ht&&io===null?ln.stateNode=Bn:(Bn=co(Bn,io,yn,dr,On,ln,Ht,Ar),tr(Bn,yn,On,Mn,Zr)&&Ju(ln),ln.stateNode=Bn,Ht?Ju(ln):__(Bn,ln,!1,!1))}},Ou=function(Ht,ln,yn,On){yn!==On?(Ht=Du(Gl.current),yn=Du(au.current),ln.stateNode=br(On,Ht,yn,ln),Ju(ln)):ln.stateNode=Ht.stateNode}}else pm=function(){},l0=function(){},Ou=function(){};function y_(Ht,ln){if(!bs)switch(Ht.tailMode){case"hidden":ln=Ht.tail;for(var yn=null;ln!==null;)ln.alternate!==null&&(yn=ln),ln=ln.sibling;yn===null?Ht.tail=null:yn.sibling=null;break;case"collapsed":yn=Ht.tail;for(var On=null;yn!==null;)yn.alternate!==null&&(On=yn),yn=yn.sibling;On===null?ln||Ht.tail===null?Ht.tail=null:Ht.tail.sibling=null:On.sibling=null}}function Rl(Ht){var ln=Ht.alternate!==null&&Ht.alternate.child===Ht.child,yn=0,On=0;if(ln)for(var Mn=Ht.child;Mn!==null;)yn|=Mn.lanes|Mn.childLanes,On|=Mn.subtreeFlags&14680064,On|=Mn.flags&14680064,Mn.return=Ht,Mn=Mn.sibling;else for(Mn=Ht.child;Mn!==null;)yn|=Mn.lanes|Mn.childLanes,On|=Mn.subtreeFlags,On|=Mn.flags,Mn.return=Ht,Mn=Mn.sibling;return Ht.subtreeFlags|=On,Ht.childLanes=yn,ln}function uS(Ht,ln,yn){var On=ln.pendingProps;switch(sy(ln),ln.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rl(ln),null;case 1:return Cs(ln.type)&&np(),Rl(ln),null;case 3:return On=ln.stateNode,hm(),no(Qs),no(Os),h_(),On.pendingContext&&(On.context=On.pendingContext,On.pendingContext=null),(Ht===null||Ht.child===null)&&(am(ln)?Ju(ln):Ht===null||Ht.memoizedState.isDehydrated&&!(ln.flags&256)||(ln.flags|=1024,Ru!==null&&(Ly(Ru),Ru=null))),pm(Ht,ln),Rl(ln),null;case 5:cy(ln),yn=Du(Gl.current);var Mn=ln.type;if(Ht!==null&&ln.stateNode!=null)l0(Ht,ln,Mn,On,yn),Ht.ref!==ln.ref&&(ln.flags|=512,ln.flags|=2097152);else{if(!On){if(ln.stateNode===null)throw Error(Ct(166));return Rl(ln),null}if(Ht=Du(au.current),am(ln)){if(!Nr)throw Error(Ct(175));Ht=_o(ln.stateNode,ln.type,ln.memoizedProps,yn,Ht,ln,!Mm),ln.updateQueue=Ht,Ht!==null&&Ju(ln)}else{var Bn=Ln(Mn,On,yn,Ht,ln);__(Bn,ln,!1,!1),ln.stateNode=Bn,tr(Bn,Mn,On,yn,Ht)&&Ju(ln)}ln.ref!==null&&(ln.flags|=512,ln.flags|=2097152)}return Rl(ln),null;case 6:if(Ht&&ln.stateNode!=null)Ou(Ht,ln,Ht.memoizedProps,On);else{if(typeof On!="string"&&ln.stateNode===null)throw Error(Ct(166));if(Ht=Du(Gl.current),yn=Du(au.current),am(ln)){if(!Nr)throw Error(Ct(176));if(Ht=ln.stateNode,On=ln.memoizedProps,(yn=wo(Ht,On,ln,!Mm))&&(Mn=ou,Mn!==null))switch(Bn=(Mn.mode&1)!==0,Mn.tag){case 3:Nl(Mn.stateNode.containerInfo,Ht,On,Bn);break;case 5:Fo(Mn.type,Mn.memoizedProps,Mn.stateNode,Ht,On,Bn)}yn&&Ju(ln)}else ln.stateNode=br(On,Ht,yn,ln)}return Rl(ln),null;case 13:if(no($s),On=ln.memoizedState,bs&&su!==null&&ln.mode&1&&!(ln.flags&128)){for(Ht=su;Ht;)Ht=Qr(Ht);return Mu(),ln.flags|=98560,ln}if(On!==null&&On.dehydrated!==null){if(On=am(ln),Ht===null){if(!On)throw Error(Ct(318));if(!Nr)throw Error(Ct(344));if(Ht=ln.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(Ct(317));Ao(Ht,ln)}else Mu(),!(ln.flags&128)&&(ln.memoizedState=null),ln.flags|=4;return Rl(ln),null}return Ru!==null&&(Ly(Ru),Ru=null),ln.flags&128?(ln.lanes=yn,ln):(On=On!==null,yn=!1,Ht===null?am(ln):yn=Ht.memoizedState!==null,On&&!yn&&(ln.child.flags|=8192,ln.mode&1&&(Ht===null||$s.current&1?js===0&&(js=3):k_())),ln.updateQueue!==null&&(ln.flags|=4),Rl(ln),null);case 4:return hm(),pm(Ht,ln),Ht===null&&yr(ln.stateNode.containerInfo),Rl(ln),null;case 10:return ju(ln.type._context),Rl(ln),null;case 17:return Cs(ln.type)&&np(),Rl(ln),null;case 19:if(no($s),Mn=ln.memoizedState,Mn===null)return Rl(ln),null;if(On=(ln.flags&128)!==0,Bn=Mn.rendering,Bn===null)if(On)y_(Mn,!1);else{if(js!==0||Ht!==null&&Ht.flags&128)for(Ht=ln.child;Ht!==null;){if(Bn=Ul(Ht),Bn!==null){for(ln.flags|=128,y_(Mn,!1),Ht=Bn.updateQueue,Ht!==null&&(ln.updateQueue=Ht,ln.flags|=4),ln.subtreeFlags=0,Ht=yn,On=ln.child;On!==null;)yn=On,Mn=Ht,yn.flags&=14680066,Bn=yn.alternate,Bn===null?(yn.childLanes=0,yn.lanes=Mn,yn.child=null,yn.subtreeFlags=0,yn.memoizedProps=null,yn.memoizedState=null,yn.updateQueue=null,yn.dependencies=null,yn.stateNode=null):(yn.childLanes=Bn.childLanes,yn.lanes=Bn.lanes,yn.child=Bn.child,yn.subtreeFlags=0,yn.deletions=null,yn.memoizedProps=Bn.memoizedProps,yn.memoizedState=Bn.memoizedState,yn.updateQueue=Bn.updateQueue,yn.type=Bn.type,Mn=Bn.dependencies,yn.dependencies=Mn===null?null:{lanes:Mn.lanes,firstContext:Mn.firstContext}),On=On.sibling;return Yo($s,$s.current&1|2),ln.child}Ht=Ht.sibling}Mn.tail!==null&&ys()>C_&&(ln.flags|=128,On=!0,y_(Mn,!1),ln.lanes=4194304)}else{if(!On)if(Ht=Ul(Bn),Ht!==null){if(ln.flags|=128,On=!0,Ht=Ht.updateQueue,Ht!==null&&(ln.updateQueue=Ht,ln.flags|=4),y_(Mn,!0),Mn.tail===null&&Mn.tailMode==="hidden"&&!Bn.alternate&&!bs)return Rl(ln),null}else 2*ys()-Mn.renderingStartTime>C_&&yn!==1073741824&&(ln.flags|=128,On=!0,y_(Mn,!1),ln.lanes=4194304);Mn.isBackwards?(Bn.sibling=ln.child,ln.child=Bn):(Ht=Mn.last,Ht!==null?Ht.sibling=Bn:ln.child=Bn,Mn.last=Bn)}return Mn.tail!==null?(ln=Mn.tail,Mn.rendering=ln,Mn.tail=ln.sibling,Mn.renderingStartTime=ys(),ln.sibling=null,Ht=$s.current,Yo($s,On?Ht&1|2:Ht&1),ln):(Rl(ln),null);case 22:case 23:return w0(),On=ln.memoizedState!==null,Ht!==null&&Ht.memoizedState!==null!==On&&(ln.flags|=8192),On&&ln.mode&1?_c&1073741824&&(Rl(ln),Dr&&ln.subtreeFlags&6&&(ln.flags|=8192)):Rl(ln),null;case 24:return null;case 25:return null}throw Error(Ct(156,ln.tag))}var hS=At.ReactCurrentOwner,cu=!1;function Wl(Ht,ln,yn,On){ln.child=Ht===null?cm(ln,null,yn,On):Pu(ln,Ht.child,yn,On)}function Oy(Ht,ln,yn,On,Mn){yn=yn.render;var Bn=ln.ref;return Ks(ln,Mn),On=hy(Ht,ln,yn,On,Bn,Mn),yn=Nm(),Ht!==null&&!cu?(ln.updateQueue=Ht.updateQueue,ln.flags&=-2053,Ht.lanes&=~Mn,_h(Ht,ln,Mn)):(bs&&yn&&J_(ln),ln.flags|=1,Wl(Ht,ln,On,Mn),ln.child)}function Cp(Ht,ln,yn,On,Mn){if(Ht===null){var Bn=yn.type;return typeof Bn=="function"&&!Hy(Bn)&&Bn.defaultProps===void 0&&yn.compare===null&&yn.defaultProps===void 0?(ln.tag=15,ln.type=Bn,c0(Ht,ln,Bn,On,Mn)):(Ht=C0(yn.type,null,On,ln,ln.mode,Mn),Ht.ref=ln.ref,Ht.return=ln,ln.child=Ht)}if(Bn=Ht.child,!(Ht.lanes&Mn)){var dr=Bn.memoizedProps;if(yn=yn.compare,yn=yn!==null?yn:tm,yn(dr,On)&&Ht.ref===ln.ref)return _h(Ht,ln,Mn)}return ln.flags|=1,Ht=Lp(Bn,On),Ht.ref=ln.ref,Ht.return=ln,ln.child=Ht}function c0(Ht,ln,yn,On,Mn){if(Ht!==null&&tm(Ht.memoizedProps,On)&&Ht.ref===ln.ref)if(cu=!1,(Ht.lanes&Mn)!==0)Ht.flags&131072&&(cu=!0);else return ln.lanes=Ht.lanes,_h(Ht,ln,Mn);return Sy(Ht,ln,yn,On,Mn)}function by(Ht,ln,yn){var On=ln.pendingProps,Mn=On.children,Bn=Ht!==null?Ht.memoizedState:null;if(On.mode==="hidden")if(!(ln.mode&1))ln.memoizedState={baseLanes:0,cachePool:null},Yo(cp,_c),_c|=yn;else if(yn&1073741824)ln.memoizedState={baseLanes:0,cachePool:null},On=Bn!==null?Bn.baseLanes:yn,Yo(cp,_c),_c|=On;else return Ht=Bn!==null?Bn.baseLanes|yn:yn,ln.lanes=ln.childLanes=1073741824,ln.memoizedState={baseLanes:Ht,cachePool:null},ln.updateQueue=null,Yo(cp,_c),_c|=Ht,null;else Bn!==null?(On=Bn.baseLanes|yn,ln.memoizedState=null):On=yn,Yo(cp,_c),_c|=On;return Wl(Ht,ln,Mn,yn),ln.child}function nO(Ht,ln){var yn=ln.ref;(Ht===null&&yn!==null||Ht!==null&&Ht.ref!==yn)&&(ln.flags|=512,ln.flags|=2097152)}function Sy(Ht,ln,yn,On,Mn){var Bn=Cs(yn)?Po:Os.current;return Bn=ba(ln,Bn),Ks(ln,Mn),yn=hy(Ht,ln,yn,On,Bn,Mn),On=Nm(),Ht!==null&&!cu?(ln.updateQueue=Ht.updateQueue,ln.flags&=-2053,Ht.lanes&=~Mn,_h(Ht,ln,Mn)):(bs&&On&&J_(ln),ln.flags|=1,Wl(Ht,ln,yn,Mn),ln.child)}function rO(Ht,ln,yn,On,Mn){if(Cs(yn)){var Bn=!0;mu(ln)}else Bn=!1;if(Ks(ln,Mn),ln.stateNode===null)Ht!==null&&(Ht.alternate=null,ln.alternate=null,ln.flags|=2),Fv(ln,yn,On),iy(ln,yn,On,Mn),On=!0;else if(Ht===null){var dr=ln.stateNode,Ar=ln.memoizedProps;dr.props=Ar;var Zr=dr.context,io=yn.contextType;typeof io=="object"&&io!==null?io=ms(io):(io=Cs(yn)?Po:Os.current,io=ba(ln,io));var yo=yn.getDerivedStateFromProps,No=typeof yo=="function"||typeof dr.getSnapshotBeforeUpdate=="function";No||typeof dr.UNSAFE_componentWillReceiveProps!="function"&&typeof dr.componentWillReceiveProps!="function"||(Ar!==On||Zr!==io)&&Gv(ln,dr,On,io),Iu=!1;var $o=ln.memoizedState;dr.state=$o,q_(ln,On,dr,Mn),Zr=ln.memoizedState,Ar!==On||$o!==Zr||Qs.current||Iu?(typeof yo=="function"&&(ry(ln,yn,yo,On),Zr=ln.memoizedState),(Ar=Iu||Bv(ln,yn,Ar,On,$o,Zr,io))?(No||typeof dr.UNSAFE_componentWillMount!="function"&&typeof dr.componentWillMount!="function"||(typeof dr.componentWillMount=="function"&&dr.componentWillMount(),typeof dr.UNSAFE_componentWillMount=="function"&&dr.UNSAFE_componentWillMount()),typeof dr.componentDidMount=="function"&&(ln.flags|=4194308)):(typeof dr.componentDidMount=="function"&&(ln.flags|=4194308),ln.memoizedProps=On,ln.memoizedState=Zr),dr.props=On,dr.state=Zr,dr.context=io,On=Ar):(typeof dr.componentDidMount=="function"&&(ln.flags|=4194308),On=!1)}else{dr=ln.stateNode,Nv(Ht,ln),Ar=ln.memoizedProps,io=ln.type===ln.elementType?Ar:Cl(ln.type,Ar),dr.props=io,No=ln.pendingProps,$o=dr.context,Zr=yn.contextType,typeof Zr=="object"&&Zr!==null?Zr=ms(Zr):(Zr=Cs(yn)?Po:Os.current,Zr=ba(ln,Zr));var ps=yn.getDerivedStateFromProps;(yo=typeof ps=="function"||typeof dr.getSnapshotBeforeUpdate=="function")||typeof dr.UNSAFE_componentWillReceiveProps!="function"&&typeof dr.componentWillReceiveProps!="function"||(Ar!==No||$o!==Zr)&&Gv(ln,dr,On,Zr),Iu=!1,$o=ln.memoizedState,dr.state=$o,q_(ln,On,dr,Mn);var Eo=ln.memoizedState;Ar!==No||$o!==Eo||Qs.current||Iu?(typeof ps=="function"&&(ry(ln,yn,ps,On),Eo=ln.memoizedState),(io=Iu||Bv(ln,yn,io,On,$o,Eo,Zr)||!1)?(yo||typeof dr.UNSAFE_componentWillUpdate!="function"&&typeof dr.componentWillUpdate!="function"||(typeof dr.componentWillUpdate=="function"&&dr.componentWillUpdate(On,Eo,Zr),typeof dr.UNSAFE_componentWillUpdate=="function"&&dr.UNSAFE_componentWillUpdate(On,Eo,Zr)),typeof dr.componentDidUpdate=="function"&&(ln.flags|=4),typeof dr.getSnapshotBeforeUpdate=="function"&&(ln.flags|=1024)):(typeof dr.componentDidUpdate!="function"||Ar===Ht.memoizedProps&&$o===Ht.memoizedState||(ln.flags|=4),typeof dr.getSnapshotBeforeUpdate!="function"||Ar===Ht.memoizedProps&&$o===Ht.memoizedState||(ln.flags|=1024),ln.memoizedProps=On,ln.memoizedState=Eo),dr.props=On,dr.state=Eo,dr.context=Zr,On=io):(typeof dr.componentDidUpdate!="function"||Ar===Ht.memoizedProps&&$o===Ht.memoizedState||(ln.flags|=4),typeof dr.getSnapshotBeforeUpdate!="function"||Ar===Ht.memoizedProps&&$o===Ht.memoizedState||(ln.flags|=1024),On=!1)}return Ty(Ht,ln,yn,On,Bn,Mn)}function Ty(Ht,ln,yn,On,Mn,Bn){nO(Ht,ln);var dr=(ln.flags&128)!==0;if(!On&&!dr)return Mn&&X_(ln,yn,!1),_h(Ht,ln,Bn);On=ln.stateNode,hS.current=ln;var Ar=dr&&typeof yn.getDerivedStateFromError!="function"?null:On.render();return ln.flags|=1,Ht!==null&&dr?(ln.child=Pu(ln,Ht.child,null,Bn),ln.child=Pu(ln,null,Ar,Bn)):Wl(Ht,ln,Ar,Bn),ln.memoizedState=On.state,Mn&&X_(ln,yn,!0),ln.child}function iO(Ht){var ln=Ht.stateNode;ln.pendingContext?rp(Ht,ln.pendingContext,ln.pendingContext!==ln.context):ln.context&&rp(Ht,ln.context,!1),u_(Ht,ln.containerInfo)}function oO(Ht,ln,yn,On,Mn){return Mu(),a_(Mn),ln.flags|=256,Wl(Ht,ln,yn,On),ln.child}var u0={dehydrated:null,treeContext:null,retryLane:0};function h0(Ht){return{baseLanes:Ht,cachePool:null}}function xy(Ht,ln,yn){var On=ln.pendingProps,Mn=$s.current,Bn=!1,dr=(ln.flags&128)!==0,Ar;if((Ar=dr)||(Ar=Ht!==null&&Ht.memoizedState===null?!1:(Mn&2)!==0),Ar?(Bn=!0,ln.flags&=-129):(Ht===null||Ht.memoizedState!==null)&&(Mn|=1),Yo($s,Mn&1),Ht===null)return Pm(ln),Ht=ln.memoizedState,Ht!==null&&(Ht=Ht.dehydrated,Ht!==null)?(ln.mode&1?sr(Ht)?ln.lanes=8:ln.lanes=1073741824:ln.lanes=1,null):(Mn=On.children,Ht=On.fallback,Bn?(On=ln.mode,Bn=ln.child,Mn={mode:"hidden",children:Mn},!(On&1)&&Bn!==null?(Bn.childLanes=0,Bn.pendingProps=Mn):Bn=xo(Mn,On,0,null),Ht=ym(Ht,On,yn,null),Bn.return=ln,Ht.return=ln,Bn.sibling=Ht,ln.child=Bn,ln.child.memoizedState=h0(yn),ln.memoizedState=u0,Ht):Ey(ln,Mn));if(Mn=Ht.memoizedState,Mn!==null){if(Ar=Mn.dehydrated,Ar!==null){if(dr)return ln.flags&256?(ln.flags&=-257,d0(Ht,ln,yn,Error(Ct(422)))):ln.memoizedState!==null?(ln.child=Ht.child,ln.flags|=128,null):(Bn=On.fallback,Mn=ln.mode,On=xo({mode:"visible",children:On.children},Mn,0,null),Bn=ym(Bn,Mn,yn,null),Bn.flags|=2,On.return=ln,Bn.return=ln,On.sibling=Bn,ln.child=On,ln.mode&1&&Pu(ln,Ht.child,null,yn),ln.child.memoizedState=h0(yn),ln.memoizedState=u0,Bn);if(!(ln.mode&1))ln=d0(Ht,ln,yn,null);else if(sr(Ar))ln=d0(Ht,ln,yn,Error(Ct(419)));else if(On=(yn&Ht.childLanes)!==0,cu||On){if(On=Ns,On!==null){switch(yn&-yn){case 4:Bn=2;break;case 16:Bn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Bn=32;break;case 536870912:Bn=268435456;break;default:Bn=0}On=Bn&(On.suspendedLanes|yn)?0:Bn,On!==0&&On!==Mn.retryLane&&(Mn.retryLane=On,Su(Ht,On,-1))}k_(),ln=d0(Ht,ln,yn,Error(Ct(421)))}else ss(Ar)?(ln.flags|=128,ln.child=Ht.child,ln=mS.bind(null,Ht),Gr(Ar,ln),ln=null):(yn=Mn.treeContext,Nr&&(su=Oo(Ar),ou=ln,bs=!0,Ru=null,Mm=!1,yn!==null&&(Fl[vu++]=Yu,Fl[vu++]=Zu,Fl[vu++]=sm,Yu=yn.id,Zu=yn.overflow,sm=ln)),ln=Ey(ln,ln.pendingProps.children),ln.flags|=4096);return ln}return Bn?(On=aO(Ht,ln,On.children,On.fallback,yn),Bn=ln.child,Mn=Ht.child.memoizedState,Bn.memoizedState=Mn===null?h0(yn):{baseLanes:Mn.baseLanes|yn,cachePool:null},Bn.childLanes=Ht.childLanes&~yn,ln.memoizedState=u0,On):(yn=sO(Ht,ln,On.children,yn),ln.memoizedState=null,yn)}return Bn?(On=aO(Ht,ln,On.children,On.fallback,yn),Bn=ln.child,Mn=Ht.child.memoizedState,Bn.memoizedState=Mn===null?h0(yn):{baseLanes:Mn.baseLanes|yn,cachePool:null},Bn.childLanes=Ht.childLanes&~yn,ln.memoizedState=u0,On):(yn=sO(Ht,ln,On.children,yn),ln.memoizedState=null,yn)}function Ey(Ht,ln){return ln=xo({mode:"visible",children:ln},Ht.mode,0,null),ln.return=Ht,Ht.child=ln}function sO(Ht,ln,yn,On){var Mn=Ht.child;return Ht=Mn.sibling,yn=Lp(Mn,{mode:"visible",children:yn}),!(ln.mode&1)&&(yn.lanes=On),yn.return=ln,yn.sibling=null,Ht!==null&&(On=ln.deletions,On===null?(ln.deletions=[Ht],ln.flags|=16):On.push(Ht)),ln.child=yn}function aO(Ht,ln,yn,On,Mn){var Bn=ln.mode;Ht=Ht.child;var dr=Ht.sibling,Ar={mode:"hidden",children:yn};return!(Bn&1)&&ln.child!==Ht?(yn=ln.child,yn.childLanes=0,yn.pendingProps=Ar,ln.deletions=null):(yn=Lp(Ht,Ar),yn.subtreeFlags=Ht.subtreeFlags&14680064),dr!==null?On=Lp(dr,On):(On=ym(On,Bn,Mn,null),On.flags|=2),On.return=ln,yn.return=ln,yn.sibling=On,ln.child=yn,On}function d0(Ht,ln,yn,On){return On!==null&&a_(On),Pu(ln,Ht.child,null,yn),Ht=Ey(ln,ln.pendingProps.children),Ht.flags|=2,ln.memoizedState=null,Ht}function v_(Ht,ln,yn){Ht.lanes|=ln;var On=Ht.alternate;On!==null&&(On.lanes|=ln),Ms(Ht.return,ln,yn)}function f0(Ht,ln,yn,On,Mn){var Bn=Ht.memoizedState;Bn===null?Ht.memoizedState={isBackwards:ln,rendering:null,renderingStartTime:0,last:On,tail:yn,tailMode:Mn}:(Bn.isBackwards=ln,Bn.rendering=null,Bn.renderingStartTime=0,Bn.last=On,Bn.tail=yn,Bn.tailMode=Mn)}function $y(Ht,ln,yn){var On=ln.pendingProps,Mn=On.revealOrder,Bn=On.tail;if(Wl(Ht,ln,On.children,yn),On=$s.current,On&2)On=On&1|2,ln.flags|=128;else{if(Ht!==null&&Ht.flags&128)e:for(Ht=ln.child;Ht!==null;){if(Ht.tag===13)Ht.memoizedState!==null&&v_(Ht,yn,ln);else if(Ht.tag===19)v_(Ht,yn,ln);else if(Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===ln)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===ln)break e;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}On&=1}if(Yo($s,On),!(ln.mode&1))ln.memoizedState=null;else switch(Mn){case"forwards":for(yn=ln.child,Mn=null;yn!==null;)Ht=yn.alternate,Ht!==null&&Ul(Ht)===null&&(Mn=yn),yn=yn.sibling;yn=Mn,yn===null?(Mn=ln.child,ln.child=null):(Mn=yn.sibling,yn.sibling=null),f0(ln,!1,Mn,yn,Bn);break;case"backwards":for(yn=null,Mn=ln.child,ln.child=null;Mn!==null;){if(Ht=Mn.alternate,Ht!==null&&Ul(Ht)===null){ln.child=Mn;break}Ht=Mn.sibling,Mn.sibling=yn,yn=Mn,Mn=Ht}f0(ln,!0,yn,null,Bn);break;case"together":f0(ln,!1,null,null,void 0);break;default:ln.memoizedState=null}return ln.child}function _h(Ht,ln,yn){if(Ht!==null&&(ln.dependencies=Ht.dependencies),zm|=ln.lanes,!(yn&ln.childLanes))return null;if(Ht!==null&&ln.child!==Ht.child)throw Error(Ct(153));if(ln.child!==null){for(Ht=ln.child,yn=Lp(Ht,Ht.pendingProps),ln.child=yn,yn.return=ln;Ht.sibling!==null;)Ht=Ht.sibling,yn=yn.sibling=Lp(Ht,Ht.pendingProps),yn.return=ln;yn.sibling=null}return ln.child}function lO(Ht,ln,yn){switch(ln.tag){case 3:iO(ln),Mu();break;case 5:ly(ln);break;case 1:Cs(ln.type)&&mu(ln);break;case 4:u_(ln,ln.stateNode.containerInfo);break;case 10:Z_(ln,ln.type._context,ln.memoizedProps.value);break;case 13:var On=ln.memoizedState;if(On!==null)return On.dehydrated!==null?(Yo($s,$s.current&1),ln.flags|=128,null):yn&ln.child.childLanes?xy(Ht,ln,yn):(Yo($s,$s.current&1),Ht=_h(Ht,ln,yn),Ht!==null?Ht.sibling:null);Yo($s,$s.current&1);break;case 19:if(On=(yn&ln.childLanes)!==0,Ht.flags&128){if(On)return $y(Ht,ln,yn);ln.flags|=128}var Mn=ln.memoizedState;if(Mn!==null&&(Mn.rendering=null,Mn.tail=null,Mn.lastEffect=null),Yo($s,$s.current),On)break;return null;case 22:case 23:return ln.lanes=0,by(Ht,ln,yn)}return _h(Ht,ln,yn)}function cO(Ht,ln){switch(sy(ln),ln.tag){case 1:return Cs(ln.type)&&np(),Ht=ln.flags,Ht&65536?(ln.flags=Ht&-65537|128,ln):null;case 3:return hm(),no(Qs),no(Os),h_(),Ht=ln.flags,Ht&65536&&!(Ht&128)?(ln.flags=Ht&-65537|128,ln):null;case 5:return cy(ln),null;case 13:if(no($s),Ht=ln.memoizedState,Ht!==null&&Ht.dehydrated!==null){if(ln.alternate===null)throw Error(Ct(340));Mu()}return Ht=ln.flags,Ht&65536?(ln.flags=Ht&-65537|128,ln):null;case 19:return no($s),null;case 4:return hm(),null;case 10:return ju(ln.type._context),null;case 22:case 23:return w0(),null;case 24:return null;default:return null}}var O_=!1,Nu=!1,b_=typeof WeakSet=="function"?WeakSet:Set,ho=null;function Gm(Ht,ln){var yn=Ht.ref;if(yn!==null)if(typeof yn=="function")try{yn(null)}catch(On){Hl(Ht,ln,On)}else yn.current=null}function Um(Ht,ln,yn){try{yn()}catch(On){Hl(Ht,ln,On)}}var uO=!1;function hO(Ht,ln){for(Nn(Ht.containerInfo),ho=ln;ho!==null;)if(Ht=ho,ln=Ht.child,(Ht.subtreeFlags&1028)!==0&&ln!==null)ln.return=Ht,ho=ln;else for(;ho!==null;){Ht=ho;try{var yn=Ht.alternate;if(Ht.flags&1024)switch(Ht.tag){case 0:case 11:case 15:break;case 1:if(yn!==null){var On=yn.memoizedProps,Mn=yn.memoizedState,Bn=Ht.stateNode,dr=Bn.getSnapshotBeforeUpdate(Ht.elementType===Ht.type?On:Cl(Ht.type,On),Mn);Bn.__reactInternalSnapshotBeforeUpdate=dr}break;case 3:Dr&&oo(Ht.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(Ar){Hl(Ht,Ht.return,Ar)}if(ln=Ht.sibling,ln!==null){ln.return=Ht.return,ho=ln;break}ho=Ht.return}return yn=uO,uO=!1,yn}function Ap(Ht,ln,yn){var On=ln.updateQueue;if(On=On!==null?On.lastEffect:null,On!==null){var Mn=On=On.next;do{if((Mn.tag&Ht)===Ht){var Bn=Mn.destroy;Mn.destroy=void 0,Bn!==void 0&&Um(ln,yn,Bn)}Mn=Mn.next}while(Mn!==On)}}function kp(Ht,ln){if(ln=ln.updateQueue,ln=ln!==null?ln.lastEffect:null,ln!==null){var yn=ln=ln.next;do{if((yn.tag&Ht)===Ht){var On=yn.create;yn.destroy=On()}yn=yn.next}while(yn!==ln)}}function wy(Ht){var ln=Ht.ref;if(ln!==null){var yn=Ht.stateNode;switch(Ht.tag){case 5:Ht=qn(yn);break;default:Ht=yn}typeof ln=="function"?ln(Ht):ln.current=Ht}}function dO(Ht,ln,yn){if(Kl&&typeof Kl.onCommitFiberUnmount=="function")try{Kl.onCommitFiberUnmount(Hu,ln)}catch{}switch(ln.tag){case 0:case 11:case 14:case 15:if(Ht=ln.updateQueue,Ht!==null&&(Ht=Ht.lastEffect,Ht!==null)){var On=Ht=Ht.next;do{var Mn=On,Bn=Mn.destroy;Mn=Mn.tag,Bn!==void 0&&(Mn&2||Mn&4)&&Um(ln,yn,Bn),On=On.next}while(On!==Ht)}break;case 1:if(Gm(ln,yn),Ht=ln.stateNode,typeof Ht.componentWillUnmount=="function")try{Ht.props=ln.memoizedProps,Ht.state=ln.memoizedState,Ht.componentWillUnmount()}catch(dr){Hl(ln,yn,dr)}break;case 5:Gm(ln,yn);break;case 4:Dr?gO(Ht,ln,yn):_r&&_r&&(ln=ln.stateNode.containerInfo,yn=jo(ln),zo(ln,yn))}}function fO(Ht,ln,yn){for(var On=ln;;)if(dO(Ht,On,yn),On.child===null||Dr&&On.tag===4){if(On===ln)break;for(;On.sibling===null;){if(On.return===null||On.return===ln)return;On=On.return}On.sibling.return=On.return,On=On.sibling}else On.child.return=On,On=On.child}function pO(Ht){var ln=Ht.alternate;ln!==null&&(Ht.alternate=null,pO(ln)),Ht.child=null,Ht.deletions=null,Ht.sibling=null,Ht.tag===5&&(ln=Ht.stateNode,ln!==null&&Jn(ln)),Ht.stateNode=null,Ht.return=null,Ht.dependencies=null,Ht.memoizedProps=null,Ht.memoizedState=null,Ht.pendingProps=null,Ht.stateNode=null,Ht.updateQueue=null}function S_(Ht){return Ht.tag===5||Ht.tag===3||Ht.tag===4}function Cy(Ht){e:for(;;){for(;Ht.sibling===null;){if(Ht.return===null||S_(Ht.return))return null;Ht=Ht.return}for(Ht.sibling.return=Ht.return,Ht=Ht.sibling;Ht.tag!==5&&Ht.tag!==6&&Ht.tag!==18;){if(Ht.flags&2||Ht.child===null||Ht.tag===4)continue e;Ht.child.return=Ht,Ht=Ht.child}if(!(Ht.flags&2))return Ht.stateNode}}function mO(Ht){if(Dr){e:{for(var ln=Ht.return;ln!==null;){if(S_(ln))break e;ln=ln.return}throw Error(Ct(160))}var yn=ln;switch(yn.tag){case 5:ln=yn.stateNode,yn.flags&32&&(cr(ln),yn.flags&=-33),yn=Cy(Ht),m0(Ht,yn,ln);break;case 3:case 4:ln=yn.stateNode.containerInfo,yn=Cy(Ht),p0(Ht,yn,ln);break;default:throw Error(Ct(161))}}}function p0(Ht,ln,yn){var On=Ht.tag;if(On===5||On===6)Ht=Ht.stateNode,ln?Br(yn,Ht,ln):Yr(yn,Ht);else if(On!==4&&(Ht=Ht.child,Ht!==null))for(p0(Ht,ln,yn),Ht=Ht.sibling;Ht!==null;)p0(Ht,ln,yn),Ht=Ht.sibling}function m0(Ht,ln,yn){var On=Ht.tag;if(On===5||On===6)Ht=Ht.stateNode,ln?kr(yn,Ht,ln):mr(yn,Ht);else if(On!==4&&(Ht=Ht.child,Ht!==null))for(m0(Ht,ln,yn),Ht=Ht.sibling;Ht!==null;)m0(Ht,ln,yn),Ht=Ht.sibling}function gO(Ht,ln,yn){for(var On=ln,Mn=!1,Bn,dr;;){if(!Mn){Mn=On.return;e:for(;;){if(Mn===null)throw Error(Ct(160));switch(Bn=Mn.stateNode,Mn.tag){case 5:dr=!1;break e;case 3:Bn=Bn.containerInfo,dr=!0;break e;case 4:Bn=Bn.containerInfo,dr=!0;break e}Mn=Mn.return}Mn=!0}if(On.tag===5||On.tag===6)fO(Ht,On,yn),dr?Xn(Bn,On.stateNode):Rn(Bn,On.stateNode);else if(On.tag===18)dr?zs(Bn,On.stateNode):vs(Bn,On.stateNode);else if(On.tag===4){if(On.child!==null){Bn=On.stateNode.containerInfo,dr=!0,On.child.return=On,On=On.child;continue}}else if(dO(Ht,On,yn),On.child!==null){On.child.return=On,On=On.child;continue}if(On===ln)break;for(;On.sibling===null;){if(On.return===null||On.return===ln)return;On=On.return,On.tag===4&&(Mn=!1)}On.sibling.return=On.return,On=On.sibling}}function T_(Ht,ln){if(Dr){switch(ln.tag){case 0:case 11:case 14:case 15:Ap(3,ln,ln.return),kp(3,ln),Ap(5,ln,ln.return);return;case 1:return;case 5:var yn=ln.stateNode;if(yn!=null){var On=ln.memoizedProps;Ht=Ht!==null?Ht.memoizedProps:On;var Mn=ln.type,Bn=ln.updateQueue;ln.updateQueue=null,Bn!==null&&ur(yn,Bn,Mn,Ht,On,ln)}return;case 6:if(ln.stateNode===null)throw Error(Ct(162));yn=ln.memoizedProps,Vr(ln.stateNode,Ht!==null?Ht.memoizedProps:yn,yn);return;case 3:Nr&&Ht!==null&&Ht.memoizedState.isDehydrated&&Co(ln.stateNode.containerInfo);return;case 12:return;case 13:Vm(ln);return;case 19:Vm(ln);return;case 17:return}throw Error(Ct(163))}switch(ln.tag){case 0:case 11:case 14:case 15:Ap(3,ln,ln.return),kp(3,ln),Ap(5,ln,ln.return);return;case 12:return;case 13:Vm(ln);return;case 19:Vm(ln);return;case 3:Nr&&Ht!==null&&Ht.memoizedState.isDehydrated&&Co(ln.stateNode.containerInfo);break;case 22:case 23:return}e:if(_r){switch(ln.tag){case 1:case 5:case 6:break e;case 3:case 4:ln=ln.stateNode,zo(ln.containerInfo,ln.pendingChildren);break e}throw Error(Ct(163))}}function Vm(Ht){var ln=Ht.updateQueue;if(ln!==null){Ht.updateQueue=null;var yn=Ht.stateNode;yn===null&&(yn=Ht.stateNode=new b_),ln.forEach(function(On){var Mn=gS.bind(null,Ht,On);yn.has(On)||(yn.add(On),On.then(Mn,Mn))})}}function Ay(Ht,ln){for(ho=ln;ho!==null;){ln=ho;var yn=ln.deletions;if(yn!==null)for(var On=0;On<yn.length;On++){var Mn=yn[On];try{var Bn=Ht;Dr?gO(Bn,Mn,ln):fO(Bn,Mn,ln);var dr=Mn.alternate;dr!==null&&(dr.return=null),Mn.return=null}catch(bo){Hl(Mn,ln,bo)}}if(yn=ln.child,ln.subtreeFlags&12854&&yn!==null)yn.return=ln,ho=yn;else for(;ho!==null;){ln=ho;try{var Ar=ln.flags;if(Ar&32&&Dr&&cr(ln.stateNode),Ar&512){var Zr=ln.alternate;if(Zr!==null){var io=Zr.ref;io!==null&&(typeof io=="function"?io(null):io.current=null)}}if(Ar&8192)switch(ln.tag){case 13:if(ln.memoizedState!==null){var yo=ln.alternate;(yo===null||yo.memoizedState===null)&&(T0=ys())}break;case 22:var No=ln.memoizedState!==null,$o=ln.alternate,ps=$o!==null&&$o.memoizedState!==null;if(yn=ln,Dr){e:if(On=yn,Mn=No,Bn=null,Dr)for(var Eo=On;;){if(Eo.tag===5){if(Bn===null){Bn=Eo;var na=Eo.stateNode;Mn?wr(na):Cr(Eo.stateNode,Eo.memoizedProps)}}else if(Eo.tag===6){if(Bn===null){var Us=Eo.stateNode;Mn?Kn(Us):qr(Us,Eo.memoizedProps)}}else if((Eo.tag!==22&&Eo.tag!==23||Eo.memoizedState===null||Eo===On)&&Eo.child!==null){Eo.child.return=Eo,Eo=Eo.child;continue}if(Eo===On)break;for(;Eo.sibling===null;){if(Eo.return===null||Eo.return===On)break e;Bn===Eo&&(Bn=null),Eo=Eo.return}Bn===Eo&&(Bn=null),Eo.sibling.return=Eo.return,Eo=Eo.sibling}}if(No&&!ps&&yn.mode&1){ho=yn;for(var Hr=yn.child;Hr!==null;){for(yn=ho=Hr;ho!==null;){On=ho;var Rr=On.child;switch(On.tag){case 0:case 11:case 14:case 15:Ap(4,On,On.return);break;case 1:Gm(On,On.return);var jr=On.stateNode;if(typeof jr.componentWillUnmount=="function"){var so=On.return;try{jr.props=On.memoizedProps,jr.state=On.memoizedState,jr.componentWillUnmount()}catch(bo){Hl(On,so,bo)}}break;case 5:Gm(On,On.return);break;case 22:if(On.memoizedState!==null){Ry(yn);continue}}Rr!==null?(Rr.return=On,ho=Rr):Ry(yn)}Hr=Hr.sibling}}}switch(Ar&4102){case 2:mO(ln),ln.flags&=-3;break;case 6:mO(ln),ln.flags&=-3,T_(ln.alternate,ln);break;case 4096:ln.flags&=-4097;break;case 4100:ln.flags&=-4097,T_(ln.alternate,ln);break;case 4:T_(ln.alternate,ln)}}catch(bo){Hl(ln,ln.return,bo)}if(yn=ln.sibling,yn!==null){yn.return=ln.return,ho=yn;break}ho=ln.return}}}function _O(Ht,ln,yn){ho=Ht,ky(Ht)}function ky(Ht,ln,yn){for(var On=(Ht.mode&1)!==0;ho!==null;){var Mn=ho,Bn=Mn.child;if(Mn.tag===22&&On){var dr=Mn.memoizedState!==null||O_;if(!dr){var Ar=Mn.alternate,Zr=Ar!==null&&Ar.memoizedState!==null||Nu;Ar=O_;var io=Nu;if(O_=dr,(Nu=Zr)&&!io)for(ho=Mn;ho!==null;)dr=ho,Zr=dr.child,dr.tag===22&&dr.memoizedState!==null?My(Mn):Zr!==null?(Zr.return=dr,ho=Zr):My(Mn);for(;Bn!==null;)ho=Bn,ky(Bn),Bn=Bn.sibling;ho=Mn,O_=Ar,Nu=io}Iy(Ht)}else Mn.subtreeFlags&8772&&Bn!==null?(Bn.return=Mn,ho=Bn):Iy(Ht)}}function Iy(Ht){for(;ho!==null;){var ln=ho;if(ln.flags&8772){var yn=ln.alternate;try{if(ln.flags&8772)switch(ln.tag){case 0:case 11:case 15:Nu||kp(5,ln);break;case 1:var On=ln.stateNode;if(ln.flags&4&&!Nu)if(yn===null)On.componentDidMount();else{var Mn=ln.elementType===ln.type?yn.memoizedProps:Cl(ln.type,yn.memoizedProps);On.componentDidUpdate(Mn,yn.memoizedState,On.__reactInternalSnapshotBeforeUpdate)}var Bn=ln.updateQueue;Bn!==null&&K_(ln,Bn,On);break;case 3:var dr=ln.updateQueue;if(dr!==null){if(yn=null,ln.child!==null)switch(ln.child.tag){case 5:yn=qn(ln.child.stateNode);break;case 1:yn=ln.child.stateNode}K_(ln,dr,yn)}break;case 5:var Ar=ln.stateNode;yn===null&&ln.flags&4&&eo(Ar,ln.type,ln.memoizedProps,ln);break;case 6:break;case 4:break;case 12:break;case 13:if(Nr&&ln.memoizedState===null){var Zr=ln.alternate;if(Zr!==null){var io=Zr.memoizedState;if(io!==null){var yo=io.dehydrated;yo!==null&&to(yo)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ct(163))}Nu||ln.flags&512&&wy(ln)}catch(No){Hl(ln,ln.return,No)}}if(ln===Ht){ho=null;break}if(yn=ln.sibling,yn!==null){yn.return=ln.return,ho=yn;break}ho=ln.return}}function Ry(Ht){for(;ho!==null;){var ln=ho;if(ln===Ht){ho=null;break}var yn=ln.sibling;if(yn!==null){yn.return=ln.return,ho=yn;break}ho=ln.return}}function My(Ht){for(;ho!==null;){var ln=ho;try{switch(ln.tag){case 0:case 11:case 15:var yn=ln.return;try{kp(4,ln)}catch(Zr){Hl(ln,yn,Zr)}break;case 1:var On=ln.stateNode;if(typeof On.componentDidMount=="function"){var Mn=ln.return;try{On.componentDidMount()}catch(Zr){Hl(ln,Mn,Zr)}}var Bn=ln.return;try{wy(ln)}catch(Zr){Hl(ln,Bn,Zr)}break;case 5:var dr=ln.return;try{wy(ln)}catch(Zr){Hl(ln,dr,Zr)}}}catch(Zr){Hl(ln,ln.return,Zr)}if(ln===Ht){ho=null;break}var Ar=ln.sibling;if(Ar!==null){Ar.return=ln.return,ho=Ar;break}ho=ln.return}}var x_=0,E_=1,$_=2,lp=3,g0=4;if(typeof Symbol=="function"&&Symbol.for){var bu=Symbol.for;x_=bu("selector.component"),E_=bu("selector.has_pseudo_class"),$_=bu("selector.role"),lp=bu("selector.test_id"),g0=bu("selector.text")}function w_(Ht){var ln=Dn(Ht);if(ln!=null){if(typeof ln.memoizedProps["data-testname"]!="string")throw Error(Ct(364));return ln}if(Ht=gr(Ht),Ht===null)throw Error(Ct(362));return Ht.stateNode.current}function _0(Ht,ln){switch(ln.$$typeof){case x_:if(Ht.type===ln.value)return!0;break;case E_:e:{ln=ln.value,Ht=[Ht,0];for(var yn=0;yn<Ht.length;){var On=Ht[yn++],Mn=Ht[yn++],Bn=ln[Mn];if(On.tag!==5||!rr(On)){for(;Bn!=null&&_0(On,Bn);)Mn++,Bn=ln[Mn];if(Mn===ln.length){ln=!0;break e}else for(On=On.child;On!==null;)Ht.push(On,Mn),On=On.sibling}}ln=!1}return ln;case $_:if(Ht.tag===5&&lr(Ht.stateNode,ln.value))return!0;break;case g0:if((Ht.tag===5||Ht.tag===6)&&(Ht=Wn(Ht),Ht!==null&&0<=Ht.indexOf(ln.value)))return!0;break;case lp:if(Ht.tag===5&&(Ht=Ht.memoizedProps["data-testname"],typeof Ht=="string"&&Ht.toLowerCase()===ln.value.toLowerCase()))return!0;break;default:throw Error(Ct(365))}return!1}function y0(Ht){switch(Ht.$$typeof){case x_:return"<"+($n(Ht.value)||"Unknown")+">";case E_:return":has("+(y0(Ht)||"")+")";case $_:return'[role="'+Ht.value+'"]';case g0:return'"'+Ht.value+'"';case lp:return'[data-testname="'+Ht.value+'"]';default:throw Error(Ct(365))}}function yO(Ht,ln){var yn=[];Ht=[Ht,0];for(var On=0;On<Ht.length;){var Mn=Ht[On++],Bn=Ht[On++],dr=ln[Bn];if(Mn.tag!==5||!rr(Mn)){for(;dr!=null&&_0(Mn,dr);)Bn++,dr=ln[Bn];if(Bn===ln.length)yn.push(Mn);else for(Mn=Mn.child;Mn!==null;)Ht.push(Mn,Bn),Mn=Mn.sibling}}return yn}function v0(Ht,ln){if(!Sr)throw Error(Ct(363));Ht=w_(Ht),Ht=yO(Ht,ln),ln=[],Ht=Array.from(Ht);for(var yn=0;yn<Ht.length;){var On=Ht[yn++];if(On.tag===5)rr(On)||ln.push(On.stateNode);else for(On=On.child;On!==null;)Ht.push(On),On=On.sibling}return ln}var dS=Math.ceil,Wm=At.ReactCurrentDispatcher,O0=At.ReactCurrentOwner,ks=At.ReactCurrentBatchConfig,Ho=0,Ns=null,Gs=null,$a=0,_c=0,cp=ds(0),js=0,up=null,zm=0,b0=0,S0=0,Hm=null,zl=null,T0=0,C_=1/0;function mm(){C_=ys()+500}var x0=!1,Py=null,Ip=null,Qm=!1,_d=null,jm=0,gm=0,Xm=null,A_=-1,E0=0;function _l(){return Ho&6?ys():A_!==-1?A_:A_=ys()}function Rp(Ht){return Ht.mode&1?Ho&2&&$a!==0?$a&-$a:Rs.transition!==null?(E0===0&&(Ht=ip,ip<<=1,!(ip&4194240)&&(ip=64),E0=Ht),E0):(Ht=Vo,Ht!==0?Ht:hr()):1}function Su(Ht,ln,yn){if(50<gm)throw gm=0,Xm=null,Error(Ct(185));var On=$0(Ht,ln);return On===null?null:(gu(On,ln,yn),(!(Ho&2)||On!==Ns)&&(On===Ns&&(!(Ho&2)&&(b0|=ln),js===4&&hp(On,$a)),eu(On,yn),ln===1&&Ho===0&&!(Ht.mode&1)&&(mm(),Qu&&Jl())),On)}function $0(Ht,ln){Ht.lanes|=ln;var yn=Ht.alternate;for(yn!==null&&(yn.lanes|=ln),yn=Ht,Ht=Ht.return;Ht!==null;)Ht.childLanes|=ln,yn=Ht.alternate,yn!==null&&(yn.childLanes|=ln),yn=Ht,Ht=Ht.return;return yn.tag===3?yn.stateNode:null}function eu(Ht,ln){var yn=Ht.callbackNode;Yp(Ht,ln);var On=Tp(Ht,Ht===Ns?$a:0);if(On===0)yn!==null&&km(yn),Ht.callbackNode=null,Ht.callbackPriority=0;else if(ln=On&-On,Ht.callbackPriority!==ln){if(yn!=null&&km(yn),ln===1)Ht.tag===0?$l(Ny.bind(null,Ht)):Im(Ny.bind(null,Ht)),Yn?ar(function(){Ho===0&&Jl()}):_u(Zs,Jl),yn=null;else{switch(Ep(On)){case 1:yn=Zs;break;case 4:yn=Kp;break;case 16:yn=xl;break;case 536870912:yn=Jp;break;default:yn=xl}yn=xO(yn,vO.bind(null,Ht))}Ht.callbackPriority=ln,Ht.callbackNode=yn}}function vO(Ht,ln){if(A_=-1,E0=0,Ho&6)throw Error(Ct(327));var yn=Ht.callbackNode;if(Dp()&&Ht.callbackNode!==yn)return null;var On=Tp(Ht,Ht===Ns?$a:0);if(On===0)return null;if(On&30||On&Ht.expiredLanes||ln)ln=_m(Ht,On);else{ln=On;var Mn=Ho;Ho|=2;var Bn=Gy();(Ns!==Ht||$a!==ln)&&(mm(),Mp(Ht,ln));do try{fS();break}catch(Ar){Fy(Ht,Ar)}while(1);Rm(),Wm.current=Bn,Ho=Mn,Gs!==null?ln=0:(Ns=null,$a=0,ln=js)}if(ln!==0){if(ln===2&&(Mn=ru(Ht),Mn!==0&&(On=Mn,ln=Dy(Ht,Mn))),ln===1)throw yn=up,Mp(Ht,0),hp(Ht,On),eu(Ht,ys()),yn;if(ln===6)hp(Ht,On);else{if(Mn=Ht.current.alternate,!(On&30)&&!OO(Mn)&&(ln=_m(Ht,On),ln===2&&(Bn=ru(Ht),Bn!==0&&(On=Bn,ln=Dy(Ht,Bn))),ln===1))throw yn=up,Mp(Ht,0),hp(Ht,On),eu(Ht,ys()),yn;switch(Ht.finishedWork=Mn,Ht.finishedLanes=On,ln){case 0:case 1:throw Error(Ct(345));case 2:Pp(Ht,zl);break;case 3:if(hp(Ht,On),(On&130023424)===On&&(ln=T0+500-ys(),10<ln)){if(Tp(Ht,0)!==0)break;if(Mn=Ht.suspendedLanes,(Mn&On)!==On){_l(),Ht.pingedLanes|=Ht.suspendedLanes&Mn;break}Ht.timeoutHandle=fr(Pp.bind(null,Ht,zl),ln);break}Pp(Ht,zl);break;case 4:if(hp(Ht,On),(On&4194240)===On)break;for(ln=Ht.eventTimes,Mn=-1;0<On;){var dr=31-Tl(On);Bn=1<<dr,dr=ln[dr],dr>Mn&&(Mn=dr),On&=~Bn}if(On=Mn,On=ys()-On,On=(120>On?120:480>On?480:1080>On?1080:1920>On?1920:3e3>On?3e3:4320>On?4320:1960*dS(On/1960))-On,10<On){Ht.timeoutHandle=fr(Pp.bind(null,Ht,zl),On);break}Pp(Ht,zl);break;case 5:Pp(Ht,zl);break;default:throw Error(Ct(329))}}}return eu(Ht,ys()),Ht.callbackNode===yn?vO.bind(null,Ht):null}function Dy(Ht,ln){var yn=Hm;return Ht.current.memoizedState.isDehydrated&&(Mp(Ht,ln).flags|=256),Ht=_m(Ht,ln),Ht!==2&&(ln=zl,zl=yn,ln!==null&&Ly(ln)),Ht}function Ly(Ht){zl===null?zl=Ht:zl.push.apply(zl,Ht)}function OO(Ht){for(var ln=Ht;;){if(ln.flags&16384){var yn=ln.updateQueue;if(yn!==null&&(yn=yn.stores,yn!==null))for(var On=0;On<yn.length;On++){var Mn=yn[On],Bn=Mn.getSnapshot;Mn=Mn.value;try{if(!El(Bn(),Mn))return!1}catch{return!1}}}if(yn=ln.child,ln.subtreeFlags&16384&&yn!==null)yn.return=ln,ln=yn;else{if(ln===Ht)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===Ht)return!0;ln=ln.return}ln.sibling.return=ln.return,ln=ln.sibling}}return!0}function hp(Ht,ln){for(ln&=~S0,ln&=~b0,Ht.suspendedLanes|=ln,Ht.pingedLanes&=~ln,Ht=Ht.expirationTimes;0<ln;){var yn=31-Tl(ln),On=1<<yn;Ht[yn]=-1,ln&=~On}}function Ny(Ht){if(Ho&6)throw Error(Ct(327));Dp();var ln=Tp(Ht,0);if(!(ln&1))return eu(Ht,ys()),null;var yn=_m(Ht,ln);if(Ht.tag!==0&&yn===2){var On=ru(Ht);On!==0&&(ln=On,yn=Dy(Ht,On))}if(yn===1)throw yn=up,Mp(Ht,0),hp(Ht,ln),eu(Ht,ys()),yn;if(yn===6)throw Error(Ct(345));return Ht.finishedWork=Ht.current.alternate,Ht.finishedLanes=ln,Pp(Ht,zl),eu(Ht,ys()),null}function By(Ht){_d!==null&&_d.tag===0&&!(Ho&6)&&Dp();var ln=Ho;Ho|=1;var yn=ks.transition,On=Vo;try{if(ks.transition=null,Vo=1,Ht)return Ht()}finally{Vo=On,ks.transition=yn,Ho=ln,!(Ho&6)&&Jl()}}function w0(){_c=cp.current,no(cp)}function Mp(Ht,ln){Ht.finishedWork=null,Ht.finishedLanes=0;var yn=Ht.timeoutHandle;if(yn!==Pr&&(Ht.timeoutHandle=Pr,Or(yn)),Gs!==null)for(yn=Gs.return;yn!==null;){var On=yn;switch(sy(On),On.tag){case 1:On=On.type.childContextTypes,On!=null&&np();break;case 3:hm(),no(Qs),no(Os),h_();break;case 5:cy(On);break;case 4:hm();break;case 13:no($s);break;case 19:no($s);break;case 10:ju(On.type._context);break;case 22:case 23:w0()}yn=yn.return}if(Ns=Ht,Gs=Ht=Lp(Ht.current,null),$a=_c=ln,js=0,up=null,S0=b0=zm=0,zl=Hm=null,Ps!==null){for(ln=0;ln<Ps.length;ln++)if(yn=Ps[ln],On=yn.interleaved,On!==null){yn.interleaved=null;var Mn=On.next,Bn=yn.pending;if(Bn!==null){var dr=Bn.next;Bn.next=Mn,On.next=dr}yn.pending=On}Ps=null}return Ht}function Fy(Ht,ln){do{var yn=Gs;try{if(Rm(),t0.current=uo,d_){for(var On=As.memoizedState;On!==null;){var Mn=On.queue;Mn!==null&&(Mn.pending=null),On=On.next}d_=!1}if(fs=0,Js=Al=As=null,f_=!1,p_=0,O0.current=null,yn===null||yn.return===null){js=1,up=ln,Gs=null;break}e:{var Bn=Ht,dr=yn.return,Ar=yn,Zr=ln;if(ln=$a,Ar.flags|=32768,Zr!==null&&typeof Zr=="object"&&typeof Zr.then=="function"){var io=Zr,yo=Ar,No=yo.tag;if(!(yo.mode&1)&&(No===0||No===11||No===15)){var $o=yo.alternate;$o?(yo.updateQueue=$o.updateQueue,yo.memoizedState=$o.memoizedState,yo.lanes=$o.lanes):(yo.updateQueue=null,yo.memoizedState=null)}var ps=Kv(dr);if(ps!==null){ps.flags&=-257,Jv(ps,dr,Ar,Bn,ln),ps.mode&1&&qv(Bn,io,ln),ln=ps,Zr=io;var Eo=ln.updateQueue;if(Eo===null){var na=new Set;na.add(Zr),ln.updateQueue=na}else Eo.add(Zr);break e}else{if(!(ln&1)){qv(Bn,io,ln),k_();break e}Zr=Error(Ct(426))}}else if(bs&&Ar.mode&1){var Us=Kv(dr);if(Us!==null){!(Us.flags&65536)&&(Us.flags|=256),Jv(Us,dr,Ar,Bn,ln),a_(Zr);break e}}Bn=Zr,js!==4&&(js=2),Hm===null?Hm=[Bn]:Hm.push(Bn),Zr=yy(Zr,Ar),Ar=dr;do{switch(Ar.tag){case 3:Ar.flags|=65536,ln&=-ln,Ar.lanes|=ln;var Hr=Yv(Ar,Zr,ln);ty(Ar,Hr);break e;case 1:Bn=Zr;var Rr=Ar.type,jr=Ar.stateNode;if(!(Ar.flags&128)&&(typeof Rr.getDerivedStateFromError=="function"||jr!==null&&typeof jr.componentDidCatch=="function"&&(Ip===null||!Ip.has(jr)))){Ar.flags|=65536,ln&=-ln,Ar.lanes|=ln;var so=Zv(Ar,Bn,ln);ty(Ar,so);break e}}Ar=Ar.return}while(Ar!==null)}Vy(yn)}catch(bo){ln=bo,Gs===yn&&yn!==null&&(Gs=yn=yn.return);continue}break}while(1)}function Gy(){var Ht=Wm.current;return Wm.current=uo,Ht===null?uo:Ht}function k_(){(js===0||js===3||js===2)&&(js=4),Ns===null||!(zm&268435455)&&!(b0&268435455)||hp(Ns,$a)}function _m(Ht,ln){var yn=Ho;Ho|=2;var On=Gy();Ns===Ht&&$a===ln||Mp(Ht,ln);do try{bO();break}catch(Mn){Fy(Ht,Mn)}while(1);if(Rm(),Ho=yn,Wm.current=On,Gs!==null)throw Error(Ct(261));return Ns=null,$a=0,js}function bO(){for(;Gs!==null;)Uy(Gs)}function fS(){for(;Gs!==null&&!qp();)Uy(Gs)}function Uy(Ht){var ln=TO(Ht.alternate,Ht,_c);Ht.memoizedProps=Ht.pendingProps,ln===null?Vy(Ht):Gs=ln,O0.current=null}function Vy(Ht){var ln=Ht;do{var yn=ln.alternate;if(Ht=ln.return,ln.flags&32768){if(yn=cO(yn,ln),yn!==null){yn.flags&=32767,Gs=yn;return}if(Ht!==null)Ht.flags|=32768,Ht.subtreeFlags=0,Ht.deletions=null;else{js=6,Gs=null;return}}else if(yn=uS(yn,ln,_c),yn!==null){Gs=yn;return}if(ln=ln.sibling,ln!==null){Gs=ln;return}Gs=ln=Ht}while(ln!==null);js===0&&(js=5)}function Pp(Ht,ln){var yn=Vo,On=ks.transition;try{ks.transition=null,Vo=1,SO(Ht,ln,yn)}finally{ks.transition=On,Vo=yn}return null}function SO(Ht,ln,yn){do Dp();while(_d!==null);if(Ho&6)throw Error(Ct(327));var On=Ht.finishedWork,Mn=Ht.finishedLanes;if(On===null)return null;if(Ht.finishedWork=null,Ht.finishedLanes=0,On===Ht.current)throw Error(Ct(177));Ht.callbackNode=null,Ht.callbackPriority=0;var Bn=On.lanes|On.childLanes;if(xp(Ht,Bn),Ht===Ns&&(Gs=Ns=null,$a=0),!(On.subtreeFlags&2064)&&!(On.flags&2064)||Qm||(Qm=!0,xO(xl,function(){return Dp(),null})),Bn=(On.flags&15990)!==0,On.subtreeFlags&15990||Bn){Bn=ks.transition,ks.transition=null;var dr=Vo;Vo=1;var Ar=Ho;Ho|=4,O0.current=null,hO(Ht,On),Ay(Ht,On),jn(Ht.containerInfo),Ht.current=On,_O(On),Zl(),Ho=Ar,Vo=dr,ks.transition=Bn}else Ht.current=On;if(Qm&&(Qm=!1,_d=Ht,jm=Mn),Bn=Ht.pendingLanes,Bn===0&&(Ip=null),r_(On.stateNode),eu(Ht,ys()),ln!==null)for(yn=Ht.onRecoverableError,On=0;On<ln.length;On++)yn(ln[On]);if(x0)throw x0=!1,Ht=Py,Py=null,Ht;return jm&1&&Ht.tag!==0&&Dp(),Bn=Ht.pendingLanes,Bn&1?Ht===Xm?gm++:(gm=0,Xm=Ht):gm=0,Jl(),null}function Dp(){if(_d!==null){var Ht=Ep(jm),ln=ks.transition,yn=Vo;try{if(ks.transition=null,Vo=16>Ht?16:Ht,_d===null)var On=!1;else{if(Ht=_d,_d=null,jm=0,Ho&6)throw Error(Ct(331));var Mn=Ho;for(Ho|=4,ho=Ht.current;ho!==null;){var Bn=ho,dr=Bn.child;if(ho.flags&16){var Ar=Bn.deletions;if(Ar!==null){for(var Zr=0;Zr<Ar.length;Zr++){var io=Ar[Zr];for(ho=io;ho!==null;){var yo=ho;switch(yo.tag){case 0:case 11:case 15:Ap(8,yo,Bn)}var No=yo.child;if(No!==null)No.return=yo,ho=No;else for(;ho!==null;){yo=ho;var $o=yo.sibling,ps=yo.return;if(pO(yo),yo===io){ho=null;break}if($o!==null){$o.return=ps,ho=$o;break}ho=ps}}}var Eo=Bn.alternate;if(Eo!==null){var na=Eo.child;if(na!==null){Eo.child=null;do{var Us=na.sibling;na.sibling=null,na=Us}while(na!==null)}}ho=Bn}}if(Bn.subtreeFlags&2064&&dr!==null)dr.return=Bn,ho=dr;else e:for(;ho!==null;){if(Bn=ho,Bn.flags&2048)switch(Bn.tag){case 0:case 11:case 15:Ap(9,Bn,Bn.return)}var Hr=Bn.sibling;if(Hr!==null){Hr.return=Bn.return,ho=Hr;break e}ho=Bn.return}}var Rr=Ht.current;for(ho=Rr;ho!==null;){dr=ho;var jr=dr.child;if(dr.subtreeFlags&2064&&jr!==null)jr.return=dr,ho=jr;else e:for(dr=Rr;ho!==null;){if(Ar=ho,Ar.flags&2048)try{switch(Ar.tag){case 0:case 11:case 15:kp(9,Ar)}}catch(bo){Hl(Ar,Ar.return,bo)}if(Ar===dr){ho=null;break e}var so=Ar.sibling;if(so!==null){so.return=Ar.return,ho=so;break e}ho=Ar.return}}if(Ho=Mn,Jl(),Kl&&typeof Kl.onPostCommitFiberRoot=="function")try{Kl.onPostCommitFiberRoot(Hu,Ht)}catch{}On=!0}return On}finally{Vo=yn,ks.transition=ln}}return!1}function Wy(Ht,ln,yn){ln=yy(yn,ln),ln=Yv(Ht,ln,1),op(Ht,ln),ln=_l(),Ht=$0(Ht,1),Ht!==null&&(gu(Ht,1,ln),eu(Ht,ln))}function Hl(Ht,ln,yn){if(Ht.tag===3)Wy(Ht,Ht,yn);else for(;ln!==null;){if(ln.tag===3){Wy(ln,Ht,yn);break}else if(ln.tag===1){var On=ln.stateNode;if(typeof ln.type.getDerivedStateFromError=="function"||typeof On.componentDidCatch=="function"&&(Ip===null||!Ip.has(On))){Ht=yy(yn,Ht),Ht=Zv(ln,Ht,1),op(ln,Ht),Ht=_l(),ln=$0(ln,1),ln!==null&&(gu(ln,1,Ht),eu(ln,Ht));break}}ln=ln.return}}function pS(Ht,ln,yn){var On=Ht.pingCache;On!==null&&On.delete(ln),ln=_l(),Ht.pingedLanes|=Ht.suspendedLanes&yn,Ns===Ht&&($a&yn)===yn&&(js===4||js===3&&($a&130023424)===$a&&500>ys()-T0?Mp(Ht,0):S0|=yn),eu(Ht,ln)}function zy(Ht,ln){ln===0&&(Ht.mode&1?(ln=wu,wu<<=1,!(wu&130023424)&&(wu=4194304)):ln=1);var yn=_l();Ht=$0(Ht,ln),Ht!==null&&(gu(Ht,ln,yn),eu(Ht,yn))}function mS(Ht){var ln=Ht.memoizedState,yn=0;ln!==null&&(yn=ln.retryLane),zy(Ht,yn)}function gS(Ht,ln){var yn=0;switch(Ht.tag){case 13:var On=Ht.stateNode,Mn=Ht.memoizedState;Mn!==null&&(yn=Mn.retryLane);break;case 19:On=Ht.stateNode;break;default:throw Error(Ct(314))}On!==null&&On.delete(ln),zy(Ht,yn)}var TO;TO=function(Ht,ln,yn){if(Ht!==null)if(Ht.memoizedProps!==ln.pendingProps||Qs.current)cu=!0;else{if(!(Ht.lanes&yn)&&!(ln.flags&128))return cu=!1,lO(Ht,ln,yn);cu=!!(Ht.flags&131072)}else cu=!1,bs&&ln.flags&1048576&&oy(ln,om,ln.index);switch(ln.lanes=0,ln.tag){case 2:var On=ln.type;Ht!==null&&(Ht.alternate=null,ln.alternate=null,ln.flags|=2),Ht=ln.pendingProps;var Mn=ba(ln,Os.current);Ks(ln,yn),Mn=hy(null,ln,On,Ht,Mn,yn);var Bn=Nm();return ln.flags|=1,typeof Mn=="object"&&Mn!==null&&typeof Mn.render=="function"&&Mn.$$typeof===void 0?(ln.tag=1,ln.memoizedState=null,ln.updateQueue=null,Cs(On)?(Bn=!0,mu(ln)):Bn=!1,ln.memoizedState=Mn.state!==null&&Mn.state!==void 0?Mn.state:null,ey(ln),Mn.updater=o_,ln.stateNode=Mn,Mn._reactInternals=ln,iy(ln,On,Ht,yn),ln=Ty(null,ln,On,!0,Bn,yn)):(ln.tag=0,bs&&Bn&&J_(ln),Wl(null,ln,Mn,yn),ln=ln.child),ln;case 16:On=ln.elementType;e:{switch(Ht!==null&&(Ht.alternate=null,ln.alternate=null,ln.flags|=2),Ht=ln.pendingProps,Mn=On._init,On=Mn(On._payload),ln.type=On,Mn=ln.tag=yS(On),Ht=Cl(On,Ht),Mn){case 0:ln=Sy(null,ln,On,Ht,yn);break e;case 1:ln=rO(null,ln,On,Ht,yn);break e;case 11:ln=Oy(null,ln,On,Ht,yn);break e;case 14:ln=Cp(null,ln,On,Cl(On.type,Ht),yn);break e}throw Error(Ct(306,On,""))}return ln;case 0:return On=ln.type,Mn=ln.pendingProps,Mn=ln.elementType===On?Mn:Cl(On,Mn),Sy(Ht,ln,On,Mn,yn);case 1:return On=ln.type,Mn=ln.pendingProps,Mn=ln.elementType===On?Mn:Cl(On,Mn),rO(Ht,ln,On,Mn,yn);case 3:e:{if(iO(ln),Ht===null)throw Error(Ct(387));On=ln.pendingProps,Bn=ln.memoizedState,Mn=Bn.element,Nv(Ht,ln),q_(ln,On,null,yn);var dr=ln.memoizedState;if(On=dr.element,Nr&&Bn.isDehydrated)if(Bn={element:On,isDehydrated:!1,cache:dr.cache,transitions:dr.transitions},ln.updateQueue.baseState=Bn,ln.memoizedState=Bn,ln.flags&256){Mn=Error(Ct(423)),ln=oO(Ht,ln,On,yn,Mn);break e}else if(On!==Mn){Mn=Error(Ct(424)),ln=oO(Ht,ln,On,yn,Mn);break e}else for(Nr&&(su=Xr(ln.stateNode.containerInfo),ou=ln,bs=!0,Ru=null,Mm=!1),yn=cm(ln,null,On,yn),ln.child=yn;yn;)yn.flags=yn.flags&-3|4096,yn=yn.sibling;else{if(Mu(),On===Mn){ln=_h(Ht,ln,yn);break e}Wl(Ht,ln,On,yn)}ln=ln.child}return ln;case 5:return ly(ln),Ht===null&&Pm(ln),On=ln.type,Mn=ln.pendingProps,Bn=Ht!==null?Ht.memoizedProps:null,dr=Mn.children,Zn(On,Mn)?dr=null:Bn!==null&&Zn(On,Bn)&&(ln.flags|=32),nO(Ht,ln),Wl(Ht,ln,dr,yn),ln.child;case 6:return Ht===null&&Pm(ln),null;case 13:return xy(Ht,ln,yn);case 4:return u_(ln,ln.stateNode.containerInfo),On=ln.pendingProps,Ht===null?ln.child=Pu(ln,null,On,yn):Wl(Ht,ln,On,yn),ln.child;case 11:return On=ln.type,Mn=ln.pendingProps,Mn=ln.elementType===On?Mn:Cl(On,Mn),Oy(Ht,ln,On,Mn,yn);case 7:return Wl(Ht,ln,ln.pendingProps,yn),ln.child;case 8:return Wl(Ht,ln,ln.pendingProps.children,yn),ln.child;case 12:return Wl(Ht,ln,ln.pendingProps.children,yn),ln.child;case 10:e:{if(On=ln.type._context,Mn=ln.pendingProps,Bn=ln.memoizedProps,dr=Mn.value,Z_(ln,On,dr),Bn!==null)if(El(Bn.value,dr)){if(Bn.children===Mn.children&&!Qs.current){ln=_h(Ht,ln,yn);break e}}else for(Bn=ln.child,Bn!==null&&(Bn.return=ln);Bn!==null;){var Ar=Bn.dependencies;if(Ar!==null){dr=Bn.child;for(var Zr=Ar.firstContext;Zr!==null;){if(Zr.context===On){if(Bn.tag===1){Zr=yu(-1,yn&-yn),Zr.tag=2;var io=Bn.updateQueue;if(io!==null){io=io.shared;var yo=io.pending;yo===null?Zr.next=Zr:(Zr.next=yo.next,yo.next=Zr),io.pending=Zr}}Bn.lanes|=yn,Zr=Bn.alternate,Zr!==null&&(Zr.lanes|=yn),Ms(Bn.return,yn,ln),Ar.lanes|=yn;break}Zr=Zr.next}}else if(Bn.tag===10)dr=Bn.type===ln.type?null:Bn.child;else if(Bn.tag===18){if(dr=Bn.return,dr===null)throw Error(Ct(341));dr.lanes|=yn,Ar=dr.alternate,Ar!==null&&(Ar.lanes|=yn),Ms(dr,yn,ln),dr=Bn.sibling}else dr=Bn.child;if(dr!==null)dr.return=Bn;else for(dr=Bn;dr!==null;){if(dr===ln){dr=null;break}if(Bn=dr.sibling,Bn!==null){Bn.return=dr.return,dr=Bn;break}dr=dr.return}Bn=dr}Wl(Ht,ln,Mn.children,yn),ln=ln.child}return ln;case 9:return Mn=ln.type,On=ln.pendingProps.children,Ks(ln,yn),Mn=ms(Mn),On=On(Mn),ln.flags|=1,Wl(Ht,ln,On,yn),ln.child;case 14:return On=ln.type,Mn=Cl(On,ln.pendingProps),Mn=Cl(On.type,Mn),Cp(Ht,ln,On,Mn,yn);case 15:return c0(Ht,ln,ln.type,ln.pendingProps,yn);case 17:return On=ln.type,Mn=ln.pendingProps,Mn=ln.elementType===On?Mn:Cl(On,Mn),Ht!==null&&(Ht.alternate=null,ln.alternate=null,ln.flags|=2),ln.tag=1,Cs(On)?(Ht=!0,mu(ln)):Ht=!1,Ks(ln,yn),Fv(ln,On,Mn),iy(ln,On,Mn,yn),Ty(null,ln,On,!0,Ht,yn);case 19:return $y(Ht,ln,yn);case 22:return by(Ht,ln,yn)}throw Error(Ct(156,ln.tag))};function xO(Ht,ln){return _u(Ht,ln)}function _S(Ht,ln,yn,On){this.tag=Ht,this.key=yn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ln,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=On,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(Ht,ln,yn,On){return new _S(Ht,ln,yn,On)}function Hy(Ht){return Ht=Ht.prototype,!(!Ht||!Ht.isReactComponent)}function yS(Ht){if(typeof Ht=="function")return Hy(Ht)?1:0;if(Ht!=null){if(Ht=Ht.$$typeof,Ht===Kt)return 11;if(Ht===dn)return 14}return 2}function Lp(Ht,ln){var yn=Ht.alternate;return yn===null?(yn=Tu(Ht.tag,ln,Ht.key,Ht.mode),yn.elementType=Ht.elementType,yn.type=Ht.type,yn.stateNode=Ht.stateNode,yn.alternate=Ht,Ht.alternate=yn):(yn.pendingProps=ln,yn.type=Ht.type,yn.flags=0,yn.subtreeFlags=0,yn.deletions=null),yn.flags=Ht.flags&14680064,yn.childLanes=Ht.childLanes,yn.lanes=Ht.lanes,yn.child=Ht.child,yn.memoizedProps=Ht.memoizedProps,yn.memoizedState=Ht.memoizedState,yn.updateQueue=Ht.updateQueue,ln=Ht.dependencies,yn.dependencies=ln===null?null:{lanes:ln.lanes,firstContext:ln.firstContext},yn.sibling=Ht.sibling,yn.index=Ht.index,yn.ref=Ht.ref,yn}function C0(Ht,ln,yn,On,Mn,Bn){var dr=2;if(On=Ht,typeof Ht=="function")Hy(Ht)&&(dr=1);else if(typeof Ht=="string")dr=5;else e:switch(Ht){case Nt:return ym(yn.children,Mn,Bn,ln);case Ft:dr=8,Mn|=8;break;case Ut:return Ht=Tu(12,yn,ln,Mn|2),Ht.elementType=Ut,Ht.lanes=Bn,Ht;case cn:return Ht=Tu(13,yn,ln,Mn),Ht.elementType=cn,Ht.lanes=Bn,Ht;case hn:return Ht=Tu(19,yn,ln,Mn),Ht.elementType=hn,Ht.lanes=Bn,Ht;case gn:return xo(yn,Mn,Bn,ln);default:if(typeof Ht=="object"&&Ht!==null)switch(Ht.$$typeof){case Wt:dr=10;break e;case Zt:dr=9;break e;case Kt:dr=11;break e;case dn:dr=14;break e;case pn:dr=16,On=null;break e}throw Error(Ct(130,Ht==null?Ht:typeof Ht,""))}return ln=Tu(dr,yn,ln,Mn),ln.elementType=Ht,ln.type=On,ln.lanes=Bn,ln}function ym(Ht,ln,yn,On){return Ht=Tu(7,Ht,On,ln),Ht.lanes=yn,Ht}function xo(Ht,ln,yn,On){return Ht=Tu(22,Ht,On,ln),Ht.elementType=gn,Ht.lanes=yn,Ht.stateNode={},Ht}function Ml(Ht,ln,yn){return Ht=Tu(6,Ht,null,ln),Ht.lanes=yn,Ht}function Bs(Ht,ln,yn){return ln=Tu(4,Ht.children!==null?Ht.children:[],Ht.key,ln),ln.lanes=yn,ln.stateNode={containerInfo:Ht.containerInfo,pendingChildren:null,implementation:Ht.implementation},ln}function vS(Ht,ln,yn,On,Mn){this.tag=ln,this.containerInfo=Ht,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zp(0),this.expirationTimes=Zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zp(0),this.identifierPrefix=On,this.onRecoverableError=Mn,Nr&&(this.mutableSourceEagerHydrationData=null)}function Qy(Ht,ln,yn,On,Mn,Bn,dr,Ar,Zr){return Ht=new vS(Ht,ln,yn,Ar,Zr),ln===1?(ln=1,Bn===!0&&(ln|=8)):ln=0,Bn=Tu(3,null,null,ln),Ht.current=Bn,Bn.stateNode=Ht,Bn.memoizedState={element:On,isDehydrated:yn,cache:null,transitions:null},ey(Bn),Ht}function I_(Ht){if(!Ht)return _s;Ht=Ht._reactInternals;e:{if(In(Ht)!==Ht||Ht.tag!==1)throw Error(Ct(170));var ln=Ht;do{switch(ln.tag){case 3:ln=ln.stateNode.context;break e;case 1:if(Cs(ln.type)){ln=ln.stateNode.__reactInternalMemoizedMergedChildContext;break e}}ln=ln.return}while(ln!==null);throw Error(Ct(171))}if(Ht.tag===1){var yn=Ht.type;if(Cs(yn))return Cm(Ht,yn,ln)}return ln}function Np(Ht){var ln=Ht._reactInternals;if(ln===void 0)throw typeof Ht.render=="function"?Error(Ct(188)):(Ht=Object.keys(Ht).join(","),Error(Ct(268,Ht)));return Ht=An(ln),Ht===null?null:Ht.stateNode}function R_(Ht,ln){if(Ht=Ht.memoizedState,Ht!==null&&Ht.dehydrated!==null){var yn=Ht.retryLane;Ht.retryLane=yn!==0&&yn<ln?yn:ln}}function Ql(Ht,ln){R_(Ht,ln),(Ht=Ht.alternate)&&R_(Ht,ln)}function jy(Ht){return Ht=An(Ht),Ht===null?null:Ht.stateNode}function EO(){return null}return dt.attemptContinuousHydration=function(Ht){if(Ht.tag===13){var ln=_l();Su(Ht,134217728,ln),Ql(Ht,134217728)}},dt.attemptHydrationAtCurrentPriority=function(Ht){if(Ht.tag===13){var ln=_l(),yn=Rp(Ht);Su(Ht,yn,ln),Ql(Ht,yn)}},dt.attemptSynchronousHydration=function(Ht){switch(Ht.tag){case 3:var ln=Ht.stateNode;if(ln.current.memoizedState.isDehydrated){var yn=zu(ln.pendingLanes);yn!==0&&(Cu(ln,yn|1),eu(ln,ys()),!(Ho&6)&&(mm(),Jl()))}break;case 13:var On=_l();By(function(){return Su(Ht,1,On)}),Ql(Ht,1)}},dt.batchedUpdates=function(Ht,ln){var yn=Ho;Ho|=1;try{return Ht(ln)}finally{Ho=yn,Ho===0&&(mm(),Qu&&Jl())}},dt.createComponentSelector=function(Ht){return{$$typeof:x_,value:Ht}},dt.createContainer=function(Ht,ln,yn,On,Mn,Bn,dr){return Qy(Ht,ln,!1,null,yn,On,Mn,Bn,dr)},dt.createHasPseudoClassSelector=function(Ht){return{$$typeof:E_,value:Ht}},dt.createHydrationContainer=function(Ht,ln,yn,On,Mn,Bn,dr,Ar,Zr){return Ht=Qy(yn,On,!0,Ht,Mn,Bn,dr,Ar,Zr),Ht.context=I_(null),yn=Ht.current,On=_l(),Mn=Rp(yn),Bn=yu(On,Mn),Bn.callback=ln??null,op(yn,Bn),Ht.current.lanes=Mn,gu(Ht,Mn,On),eu(Ht,On),Ht},dt.createPortal=function(Ht,ln,yn){var On=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dt,key:On==null?null:""+On,children:Ht,containerInfo:ln,implementation:yn}},dt.createRoleSelector=function(Ht){return{$$typeof:$_,value:Ht}},dt.createTestNameSelector=function(Ht){return{$$typeof:lp,value:Ht}},dt.createTextSelector=function(Ht){return{$$typeof:g0,value:Ht}},dt.deferredUpdates=function(Ht){var ln=Vo,yn=ks.transition;try{return ks.transition=null,Vo=16,Ht()}finally{Vo=ln,ks.transition=yn}},dt.discreteUpdates=function(Ht,ln,yn,On,Mn){var Bn=Vo,dr=ks.transition;try{return ks.transition=null,Vo=1,Ht(ln,yn,On,Mn)}finally{Vo=Bn,ks.transition=dr,Ho===0&&mm()}},dt.findAllNodes=v0,dt.findBoundingRects=function(Ht,ln){if(!Sr)throw Error(Ct(363));ln=v0(Ht,ln),Ht=[];for(var yn=0;yn<ln.length;yn++)Ht.push(Vn(ln[yn]));for(ln=Ht.length-1;0<ln;ln--){yn=Ht[ln];for(var On=yn.x,Mn=On+yn.width,Bn=yn.y,dr=Bn+yn.height,Ar=ln-1;0<=Ar;Ar--)if(ln!==Ar){var Zr=Ht[Ar],io=Zr.x,yo=io+Zr.width,No=Zr.y,$o=No+Zr.height;if(On>=io&&Bn>=No&&Mn<=yo&&dr<=$o){Ht.splice(ln,1);break}else if(On!==io||yn.width!==Zr.width||$o<Bn||No>dr){if(!(Bn!==No||yn.height!==Zr.height||yo<On||io>Mn)){io>On&&(Zr.width+=io-On,Zr.x=On),yo<Mn&&(Zr.width=Mn-io),Ht.splice(ln,1);break}}else{No>Bn&&(Zr.height+=No-Bn,Zr.y=Bn),$o<dr&&(Zr.height=dr-No),Ht.splice(ln,1);break}}}return Ht},dt.findHostInstance=Np,dt.findHostInstanceWithNoPortals=function(Ht){return Ht=zn(Ht),Ht=Ht!==null?xn(Ht):null,Ht===null?null:Ht.stateNode},dt.findHostInstanceWithWarning=function(Ht){return Np(Ht)},dt.flushControlled=function(Ht){var ln=Ho;Ho|=1;var yn=ks.transition,On=Vo;try{ks.transition=null,Vo=1,Ht()}finally{Vo=On,ks.transition=yn,Ho=ln,Ho===0&&(mm(),Jl())}},dt.flushPassiveEffects=Dp,dt.flushSync=By,dt.focusWithin=function(Ht,ln){if(!Sr)throw Error(Ct(363));for(Ht=w_(Ht),ln=yO(Ht,ln),ln=Array.from(ln),Ht=0;Ht<ln.length;){var yn=ln[Ht++];if(!rr(yn)){if(yn.tag===5&&xr(yn.stateNode))return!0;for(yn=yn.child;yn!==null;)ln.push(yn),yn=yn.sibling}}return!1},dt.getCurrentUpdatePriority=function(){return Vo},dt.getFindAllNodesFailureDescription=function(Ht,ln){if(!Sr)throw Error(Ct(363));var yn=0,On=[];Ht=[w_(Ht),0];for(var Mn=0;Mn<Ht.length;){var Bn=Ht[Mn++],dr=Ht[Mn++],Ar=ln[dr];if((Bn.tag!==5||!rr(Bn))&&(_0(Bn,Ar)&&(On.push(y0(Ar)),dr++,dr>yn&&(yn=dr)),dr<ln.length))for(Bn=Bn.child;Bn!==null;)Ht.push(Bn,dr),Bn=Bn.sibling}if(yn<ln.length){for(Ht=[];yn<ln.length;yn++)Ht.push(y0(ln[yn]));return`findAllNodes was able to match part of the selector:
  `+(On.join(" > ")+`

No matching component was found for:
  `)+Ht.join(" > ")}return null},dt.getPublicRootInstance=function(Ht){if(Ht=Ht.current,!Ht.child)return null;switch(Ht.child.tag){case 5:return qn(Ht.child.stateNode);default:return Ht.child.stateNode}},dt.injectIntoDevTools=function(Ht){if(Ht={bundleType:Ht.bundleType,version:Ht.version,rendererPackageName:Ht.rendererPackageName,rendererConfig:Ht.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:At.ReactCurrentDispatcher,findHostInstanceByFiber:jy,findFiberByHostInstance:Ht.findFiberByHostInstance||EO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Ht=!1;else{var ln=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ln.isDisabled||!ln.supportsFiber)Ht=!0;else{try{Hu=ln.inject(Ht),Kl=ln}catch{}Ht=!!ln.checkDCE}}return Ht},dt.isAlreadyRendering=function(){return!1},dt.observeVisibleRects=function(Ht,ln,yn,On){if(!Sr)throw Error(Ct(363));Ht=v0(Ht,ln);var Mn=Fr(Ht,yn,On).disconnect;return{disconnect:function(){Mn()}}},dt.registerMutableSourceForHydration=function(Ht,ln){var yn=ln._getVersion;yn=yn(ln._source),Ht.mutableSourceEagerHydrationData==null?Ht.mutableSourceEagerHydrationData=[ln,yn]:Ht.mutableSourceEagerHydrationData.push(ln,yn)},dt.runWithPriority=function(Ht,ln){var yn=Vo;try{return Vo=Ht,ln()}finally{Vo=yn}},dt.shouldError=function(){return null},dt.shouldSuspend=function(){return!1},dt.updateContainer=function(Ht,ln,yn,On){var Mn=ln.current,Bn=_l(),dr=Rp(Mn);return yn=I_(yn),ln.context===null?ln.context=yn:ln.pendingContext=yn,ln=yu(Bn,dr),ln.payload={element:Ht},On=On===void 0?null:On,On!==null&&(ln.callback=On),op(Mn,ln),Ht=Su(Mn,dr,Bn),Ht!==null&&i_(Ht,Mn,dr),dr},dt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ft){function lt(Un,Nn){var jn=Un.length;Un.push(Nn);e:for(;0<jn;){var Ln=jn-1>>>1,Cn=Un[Ln];if(0<St(Cn,Nn))Un[Ln]=Nn,Un[jn]=Cn,jn=Ln;else break e}}function dt(Un){return Un.length===0?null:Un[0]}function vt(Un){if(Un.length===0)return null;var Nn=Un[0],jn=Un.pop();if(jn!==Nn){Un[0]=jn;e:for(var Ln=0,Cn=Un.length,tr=Cn>>>1;Ln<tr;){var ir=2*(Ln+1)-1,Zn=Un[ir],br=ir+1,fr=Un[br];if(0>St(Zn,jn))br<Cn&&0>St(fr,Zn)?(Un[Ln]=fr,Un[br]=jn,Ln=br):(Un[Ln]=Zn,Un[ir]=jn,Ln=ir);else if(br<Cn&&0>St(fr,jn))Un[Ln]=fr,Un[br]=jn,Ln=br;else break e}}return Nn}function St(Un,Nn){var jn=Un.sortIndex-Nn.sortIndex;return jn!==0?jn:Un.id-Nn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,At=Ct.now();ft.unstable_now=function(){return Ct.now()-At}}var Rt=[],Dt=[],Nt=1,Ft=null,Ut=3,Wt=!1,Zt=!1,Kt=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,dn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pn(Un){for(var Nn=dt(Dt);Nn!==null;){if(Nn.callback===null)vt(Dt);else if(Nn.startTime<=Un)vt(Dt),Nn.sortIndex=Nn.expirationTime,lt(Rt,Nn);else break;Nn=dt(Dt)}}function gn(Un){if(Kt=!1,pn(Un),!Zt)if(dt(Rt)!==null)Zt=!0,qn(vn);else{var Nn=dt(Dt);Nn!==null&&nr(gn,Nn.startTime-Un)}}function vn(Un,Nn){Zt=!1,Kt&&(Kt=!1,hn(Tn),Tn=-1),Wt=!0;var jn=Ut;try{for(pn(Nn),Ft=dt(Rt);Ft!==null&&(!(Ft.expirationTime>Nn)||Un&&!zn());){var Ln=Ft.callback;if(typeof Ln=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Cn=Ln(Ft.expirationTime<=Nn);Nn=ft.unstable_now(),typeof Cn=="function"?Ft.callback=Cn:Ft===dt(Rt)&&vt(Rt),pn(Nn)}else vt(Rt);Ft=dt(Rt)}if(Ft!==null)var tr=!0;else{var ir=dt(Dt);ir!==null&&nr(gn,ir.startTime-Nn),tr=!1}return tr}finally{Ft=null,Ut=jn,Wt=!1}}var bn=!1,$n=null,Tn=-1,In=5,Pn=-1;function zn(){return!(ft.unstable_now()-Pn<In)}function An(){if($n!==null){var Un=ft.unstable_now();Pn=Un;var Nn=!0;try{Nn=$n(!0,Un)}finally{Nn?Gn():(bn=!1,$n=null)}}else bn=!1}var Gn;if(typeof dn=="function")Gn=function(){dn(An)};else if(typeof MessageChannel<"u"){var xn=new MessageChannel,Qn=xn.port2;xn.port1.onmessage=An,Gn=function(){Qn.postMessage(null)}}else Gn=function(){cn(An,0)};function qn(Un){$n=Un,bn||(bn=!0,Gn())}function nr(Un,Nn){Tn=cn(function(){Un(ft.unstable_now())},Nn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Un){Un.callback=null},ft.unstable_continueExecution=function(){Zt||Wt||(Zt=!0,qn(vn))},ft.unstable_forceFrameRate=function(Un){0>Un||125<Un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Un?Math.floor(1e3/Un):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(Rt)},ft.unstable_next=function(Un){switch(Ut){case 1:case 2:case 3:var Nn=3;break;default:Nn=Ut}var jn=Ut;Ut=Nn;try{return Un()}finally{Ut=jn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Un,Nn){switch(Un){case 1:case 2:case 3:case 4:case 5:break;default:Un=3}var jn=Ut;Ut=Un;try{return Nn()}finally{Ut=jn}},ft.unstable_scheduleCallback=function(Un,Nn,jn){var Ln=ft.unstable_now();switch(typeof jn=="object"&&jn!==null?(jn=jn.delay,jn=typeof jn=="number"&&0<jn?Ln+jn:Ln):jn=Ln,Un){case 1:var Cn=-1;break;case 2:Cn=250;break;case 5:Cn=1073741823;break;case 4:Cn=1e4;break;default:Cn=5e3}return Cn=jn+Cn,Un={id:Nt++,callback:Nn,priorityLevel:Un,startTime:jn,expirationTime:Cn,sortIndex:-1},jn>Ln?(Un.sortIndex=jn,lt(Dt,Un),dt(Rt)===null&&Un===dt(Dt)&&(Kt?(hn(Tn),Tn=-1):Kt=!0,nr(gn,jn-Ln))):(Un.sortIndex=Cn,lt(Rt,Un),Zt||Wt||(Zt=!0,qn(vn))),Un},ft.unstable_shouldYield=zn,ft.unstable_wrapCallback=function(Un){var Nn=Ut;return function(){var jn=Ut;Ut=Nn;try{return Un.apply(this,arguments)}finally{Ut=jn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;function shallowEqualArrays(ft,lt,dt=(vt,St)=>vt===St){if(ft===lt)return!0;if(!ft||!lt)return!1;const vt=ft.length;if(lt.length!==vt)return!1;for(let St=0;St<vt;St++)if(!dt(ft[St],lt[St]))return!1;return!0}const globalCache=[];function query(ft,lt,dt=!1,vt={}){for(const Et of globalCache)if(shallowEqualArrays(lt,Et.keys,Et.equal)){if(dt)return;if(Object.prototype.hasOwnProperty.call(Et,"error"))throw Et.error;if(Object.prototype.hasOwnProperty.call(Et,"response"))return Et.response;if(!dt)throw Et.promise}const St={keys:lt,equal:vt.equal,promise:ft(...lt).then(Et=>St.response=Et).then(()=>{vt.lifespan&&vt.lifespan>0&&setTimeout(()=>{const Et=globalCache.indexOf(St);Et!==-1&&globalCache.splice(Et,1)},vt.lifespan)}).catch(Et=>St.error=Et)};if(globalCache.push(St),!dt)throw St.promise}const suspend=(ft,lt,dt)=>query(ft,lt,!1,dt),preload=(ft,lt,dt)=>void query(ft,lt,!0,dt),clear=ft=>{if(ft===void 0||ft.length===0)globalCache.splice(0,globalCache.length);else{const lt=globalCache.find(dt=>shallowEqualArrays(ft,dt.keys,dt.equal));if(lt){const dt=globalCache.indexOf(lt);dt!==-1&&globalCache.splice(dt,1)}}},catalogue={},extend$1=ft=>void Object.assign(catalogue,ft);function createRenderer(ft,lt){function dt(Nt,{args:Ft=[],attach:Ut,...Wt},Zt){let Kt=`${Nt[0].toUpperCase()}${Nt.slice(1)}`,cn;if(Nt==="primitive"){if(Wt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const hn=Wt.object;cn=prepare(hn,{type:Nt,root:Zt,attach:Ut,primitive:!0})}else{const hn=catalogue[Kt];if(!hn)throw new Error(`R3F: ${Kt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(Ft))throw new Error("R3F: The args prop must be an array!");cn=prepare(new hn(...Ft),{type:Nt,root:Zt,attach:Ut,memoizedProps:{args:Ft}})}return cn.__r3f.attach===void 0&&(cn instanceof BufferGeometry?cn.__r3f.attach="geometry":cn instanceof Material&&(cn.__r3f.attach="material")),Kt!=="inject"&&applyProps$1(cn,Wt),cn}function vt(Nt,Ft){let Ut=!1;if(Ft){var Wt,Zt;(Wt=Ft.__r3f)!=null&&Wt.attach?attach(Nt,Ft,Ft.__r3f.attach):Ft.isObject3D&&Nt.isObject3D&&(Nt.add(Ft),Ut=!0),Ut||(Zt=Nt.__r3f)==null||Zt.objects.push(Ft),Ft.__r3f||prepare(Ft,{}),Ft.__r3f.parent=Nt,updateInstance(Ft),invalidateInstance(Ft)}}function St(Nt,Ft,Ut){let Wt=!1;if(Ft){var Zt,Kt;if((Zt=Ft.__r3f)!=null&&Zt.attach)attach(Nt,Ft,Ft.__r3f.attach);else if(Ft.isObject3D&&Nt.isObject3D){Ft.parent=Nt,Ft.dispatchEvent({type:"added"});const cn=Nt.children.filter(dn=>dn!==Ft),hn=cn.indexOf(Ut);Nt.children=[...cn.slice(0,hn),Ft,...cn.slice(hn)],Wt=!0}Wt||(Kt=Nt.__r3f)==null||Kt.objects.push(Ft),Ft.__r3f||prepare(Ft,{}),Ft.__r3f.parent=Nt,updateInstance(Ft),invalidateInstance(Ft)}}function Et(Nt,Ft,Ut=!1){Nt&&[...Nt].forEach(Wt=>Ct(Ft,Wt,Ut))}function Ct(Nt,Ft,Ut){if(Ft){var Wt,Zt,Kt;if(Ft.__r3f&&(Ft.__r3f.parent=null),(Wt=Nt.__r3f)!=null&&Wt.objects&&(Nt.__r3f.objects=Nt.__r3f.objects.filter(gn=>gn!==Ft)),(Zt=Ft.__r3f)!=null&&Zt.attach)detach(Nt,Ft,Ft.__r3f.attach);else if(Ft.isObject3D&&Nt.isObject3D){var cn;Nt.remove(Ft),(cn=Ft.__r3f)!=null&&cn.root&&removeInteractivity(Ft.__r3f.root,Ft)}const dn=(Kt=Ft.__r3f)==null?void 0:Kt.primitive,pn=Ut===void 0?Ft.dispose!==null&&!dn:Ut;if(!dn){var hn;Et((hn=Ft.__r3f)==null?void 0:hn.objects,Ft,pn),Et(Ft.children,Ft,pn)}Ft.__r3f&&(delete Ft.__r3f.root,delete Ft.__r3f.objects,delete Ft.__r3f.handlers,delete Ft.__r3f.memoizedProps,dn||delete Ft.__r3f),pn&&Ft.dispose&&Ft.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{Ft.dispose()}catch{}}),invalidateInstance(Nt)}}function At(Nt,Ft,Ut,Wt){var Zt;const Kt=(Zt=Nt.__r3f)==null?void 0:Zt.parent;if(!Kt)return;const cn=dt(Ft,Ut,Nt.__r3f.root);if(Nt.children){for(const hn of Nt.children)hn.__r3f&&vt(cn,hn);Nt.children=Nt.children.filter(hn=>!hn.__r3f)}Nt.__r3f.objects.forEach(hn=>vt(cn,hn)),Nt.__r3f.objects=[],Nt.__r3f.autoRemovedBeforeAppend||Ct(Kt,Nt),cn.parent&&(cn.__r3f.autoRemovedBeforeAppend=!0),vt(Kt,cn),cn.raycast&&cn.__r3f.eventCount&&cn.__r3f.root.getState().internal.interaction.push(cn),[Wt,Wt.alternate].forEach(hn=>{hn!==null&&(hn.stateNode=cn,hn.ref&&(typeof hn.ref=="function"?hn.ref(cn):hn.ref.current=cn))})}const Rt=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:dt,removeChild:Ct,appendChild:vt,appendInitialChild:vt,insertBefore:St,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(Nt,Ft)=>{if(!Ft)return;const Ut=Nt.getState().scene;Ut.__r3f&&(Ut.__r3f.root=Nt,vt(Ut,Ft))},removeChildFromContainer:(Nt,Ft)=>{Ft&&Ct(Nt.getState().scene,Ft)},insertInContainerBefore:(Nt,Ft,Ut)=>{if(!Ft||!Ut)return;const Wt=Nt.getState().scene;Wt.__r3f&&St(Wt,Ft,Ut)},getRootHostContext:()=>null,getChildHostContext:Nt=>Nt,finalizeInitialChildren(Nt){var Ft;return!!((Ft=Nt==null?void 0:Nt.__r3f)!=null?Ft:{}).handlers},prepareUpdate(Nt,Ft,Ut,Wt){if(Nt.__r3f.primitive&&Wt.object&&Wt.object!==Nt)return[!0];{const{args:Zt=[],children:Kt,...cn}=Wt,{args:hn=[],children:dn,...pn}=Ut;if(!Array.isArray(Zt))throw new Error("R3F: the args prop must be an array!");if(Zt.some((vn,bn)=>vn!==hn[bn]))return[!0];const gn=diffProps(Nt,cn,pn,!0);return gn.changes.length?[!1,gn]:null}},commitUpdate(Nt,[Ft,Ut],Wt,Zt,Kt,cn){Ft?At(Nt,Wt,Kt,cn):applyProps$1(Nt,Ut)},commitMount(Nt,Ft,Ut,Wt){var Zt;const Kt=(Zt=Nt.__r3f)!=null?Zt:{};Nt.raycast&&Kt.handlers&&Kt.eventCount&&Nt.__r3f.root.getState().internal.interaction.push(Nt)},getPublicInstance:Nt=>Nt,prepareForCommit:()=>null,preparePortalMount:Nt=>prepare(Nt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(Nt){var Ft;const{attach:Ut,parent:Wt}=(Ft=Nt.__r3f)!=null?Ft:{};Ut&&Wt&&detach(Wt,Nt,Ut),Nt.isObject3D&&(Nt.visible=!1),invalidateInstance(Nt)},unhideInstance(Nt,Ft){var Ut;const{attach:Wt,parent:Zt}=(Ut=Nt.__r3f)!=null?Ut:{};Wt&&Zt&&attach(Zt,Nt,Wt),(Nt.isObject3D&&Ft.visible==null||Ft.visible)&&(Nt.visible=!0),invalidateInstance(Nt)},createTextInstance:Rt,hideTextInstance:Rt,unhideTextInstance:Rt,getCurrentEventPriority:()=>lt?lt():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const getColorManagement=()=>{var ft;return(ft=catalogue.ColorManagement)!=null?ft:null},isOrthographicCamera=ft=>ft&&ft.isOrthographicCamera,isRef=ft=>ft&&ft.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(ft){const lt=reactExports.useRef(ft);return useIsomorphicLayoutEffect(()=>void(lt.current=ft),[ft]),lt}function Block({set:ft}){return useIsomorphicLayoutEffect(()=>(ft(new Promise(()=>null)),()=>ft(!1)),[ft]),null}class ErrorBoundary extends reactExports.Component{constructor(...lt){super(...lt),this.state={error:!1}}componentDidCatch(lt){this.props.set(lt)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=ft=>ft&&!!ft.memoized&&!!ft.changes;function calculateDpr(ft){const lt=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(ft)?Math.min(Math.max(ft[0],lt),ft[1]):ft}const getRootState=ft=>{var lt;return(lt=ft.__r3f)==null?void 0:lt.root.getState()},is={obj:ft=>ft===Object(ft)&&!is.arr(ft)&&typeof ft!="function",fun:ft=>typeof ft=="function",str:ft=>typeof ft=="string",num:ft=>typeof ft=="number",boo:ft=>typeof ft=="boolean",und:ft=>ft===void 0,arr:ft=>Array.isArray(ft),equ(ft,lt,{arrays:dt="shallow",objects:vt="reference",strict:St=!0}={}){if(typeof ft!=typeof lt||!!ft!=!!lt)return!1;if(is.str(ft)||is.num(ft))return ft===lt;const Et=is.obj(ft);if(Et&&vt==="reference")return ft===lt;const Ct=is.arr(ft);if(Ct&&dt==="reference")return ft===lt;if((Ct||Et)&&ft===lt)return!0;let At;for(At in ft)if(!(At in lt))return!1;if(Et&&dt==="shallow"&&vt==="shallow"){for(At in St?lt:ft)if(!is.equ(ft[At],lt[At],{strict:St,objects:"reference"}))return!1}else for(At in St?lt:ft)if(ft[At]!==lt[At])return!1;if(is.und(At)){if(Ct&&ft.length===0&&lt.length===0||Et&&Object.keys(ft).length===0&&Object.keys(lt).length===0)return!0;if(ft!==lt)return!1}return!0}};function buildGraph(ft){const lt={nodes:{},materials:{}};return ft&&ft.traverse(dt=>{dt.name&&(lt.nodes[dt.name]=dt),dt.material&&!lt.materials[dt.material.name]&&(lt.materials[dt.material.name]=dt.material)}),lt}function dispose(ft){ft.dispose&&ft.type!=="Scene"&&ft.dispose();for(const lt in ft)lt.dispose==null||lt.dispose(),delete ft[lt]}function prepare(ft,lt){const dt=ft;return(lt!=null&&lt.primitive||!dt.__r3f)&&(dt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...lt}),ft}function resolve(ft,lt){let dt=ft;if(lt.includes("-")){const vt=lt.split("-"),St=vt.pop();return dt=vt.reduce((Et,Ct)=>Et[Ct],ft),{target:dt,key:St}}else return{target:dt,key:lt}}const INDEX_REGEX=/-\d+$/;function attach(ft,lt,dt){if(is.str(dt)){if(INDEX_REGEX.test(dt)){const Et=dt.replace(INDEX_REGEX,""),{target:Ct,key:At}=resolve(ft,Et);Array.isArray(Ct[At])||(Ct[At]=[])}const{target:vt,key:St}=resolve(ft,dt);lt.__r3f.previousAttach=vt[St],vt[St]=lt}else lt.__r3f.previousAttach=dt(ft,lt)}function detach(ft,lt,dt){var vt,St;if(is.str(dt)){const{target:Et,key:Ct}=resolve(ft,dt),At=lt.__r3f.previousAttach;At===void 0?delete Et[Ct]:Et[Ct]=At}else(vt=lt.__r3f)==null||vt.previousAttach==null||vt.previousAttach(ft,lt);(St=lt.__r3f)==null||delete St.previousAttach}function diffProps(ft,{children:lt,key:dt,ref:vt,...St},{children:Et,key:Ct,ref:At,...Rt}={},Dt=!1){var Nt;const Ft=(Nt=ft==null?void 0:ft.__r3f)!=null?Nt:{},Ut=Object.entries(St),Wt=[];if(Dt){const Kt=Object.keys(Rt);for(let cn=0;cn<Kt.length;cn++)St.hasOwnProperty(Kt[cn])||Ut.unshift([Kt[cn],DEFAULT+"remove"])}Ut.forEach(([Kt,cn])=>{var hn;if((hn=ft.__r3f)!=null&&hn.primitive&&Kt==="object"||is.equ(cn,Rt[Kt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(Kt))return Wt.push([Kt,cn,!0,[]]);let dn=[];Kt.includes("-")&&(dn=Kt.split("-")),Wt.push([Kt,cn,!1,dn]);for(const pn in St){const gn=St[pn];pn.startsWith(`${Kt}-`)&&Wt.push([pn,gn,!1,pn.split("-")])}});const Zt={...St};return Ft.memoizedProps&&Ft.memoizedProps.args&&(Zt.args=Ft.memoizedProps.args),Ft.memoizedProps&&Ft.memoizedProps.attach&&(Zt.attach=Ft.memoizedProps.attach),{memoized:Zt,changes:Wt}}function applyProps$1(ft,lt){var dt,vt,St;const Et=(dt=ft.__r3f)!=null?dt:{},Ct=Et.root,At=(vt=Ct==null||Ct.getState==null?void 0:Ct.getState())!=null?vt:{},{memoized:Rt,changes:Dt}=isDiffSet(lt)?lt:diffProps(ft,lt),Nt=Et.eventCount;ft.__r3f&&(ft.__r3f.memoizedProps=Rt);for(let Ut=0;Ut<Dt.length;Ut++){let[Wt,Zt,Kt,cn]=Dt[Ut],hn=ft,dn=hn[Wt];if(cn.length&&(dn=cn.reduce((pn,gn)=>pn[gn],ft),!(dn&&dn.set))){const[pn,...gn]=cn.reverse();hn=gn.reverse().reduce((vn,bn)=>vn[bn],ft),Wt=pn}if(Zt===DEFAULT+"remove")if(hn.constructor){let pn=DEFAULTS.get(hn.constructor);pn||(pn=new hn.constructor,DEFAULTS.set(hn.constructor,pn)),Zt=pn[Wt]}else Zt=0;if(Kt)Zt?Et.handlers[Wt]=Zt:delete Et.handlers[Wt],Et.eventCount=Object.keys(Et.handlers).length;else if(dn&&dn.set&&(dn.copy||dn instanceof Layers$1)){if(Array.isArray(Zt))dn.fromArray?dn.fromArray(Zt):dn.set(...Zt);else if(dn.copy&&Zt&&Zt.constructor&&dn.constructor===Zt.constructor)dn.copy(Zt);else if(Zt!==void 0){const pn=dn instanceof Color;!pn&&dn.setScalar?dn.setScalar(Zt):dn instanceof Layers$1&&Zt instanceof Layers$1?dn.mask=Zt.mask:dn.set(Zt),!getColorManagement()&&!At.linear&&pn&&dn.convertSRGBToLinear()}}else hn[Wt]=Zt,!At.linear&&hn[Wt]instanceof Texture&&hn[Wt].format===RGBAFormat&&hn[Wt].type===UnsignedByteType&&(hn[Wt].encoding=sRGBEncoding);invalidateInstance(ft)}if(Et.parent&&At.internal&&ft.raycast&&Nt!==Et.eventCount){const Ut=At.internal.interaction.indexOf(ft);Ut>-1&&At.internal.interaction.splice(Ut,1),Et.eventCount&&At.internal.interaction.push(ft)}return!(Dt.length===1&&Dt[0][0]==="onUpdate")&&Dt.length&&(St=ft.__r3f)!=null&&St.parent&&updateInstance(ft),ft}function invalidateInstance(ft){var lt,dt;const vt=(lt=ft.__r3f)==null||(dt=lt.root)==null||dt.getState==null?void 0:dt.getState();vt&&vt.internal.frames===0&&vt.invalidate()}function updateInstance(ft){ft.onUpdate==null||ft.onUpdate(ft)}function updateCamera(ft,lt){ft.manual||(isOrthographicCamera(ft)?(ft.left=lt.width/-2,ft.right=lt.width/2,ft.top=lt.height/2,ft.bottom=lt.height/-2):ft.aspect=lt.width/lt.height,ft.updateProjectionMatrix(),ft.updateMatrixWorld())}function makeId(ft){return(ft.eventObject||ft.object).uuid+"/"+ft.index+ft.instanceId}function getEventPriority(){var ft;const lt=typeof self<"u"&&self||typeof window<"u"&&window;if(!lt)return constantsExports.DefaultEventPriority;switch((ft=lt.event)==null?void 0:ft.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(ft,lt,dt,vt){const St=dt.get(lt);St&&(dt.delete(lt),dt.size===0&&(ft.delete(vt),St.target.releasePointerCapture(vt)))}function removeInteractivity(ft,lt){const{internal:dt}=ft.getState();dt.interaction=dt.interaction.filter(vt=>vt!==lt),dt.initialHits=dt.initialHits.filter(vt=>vt!==lt),dt.hovered.forEach((vt,St)=>{(vt.eventObject===lt||vt.object===lt)&&dt.hovered.delete(St)}),dt.capturedMap.forEach((vt,St)=>{releaseInternalPointerCapture(dt.capturedMap,lt,vt,St)})}function createEvents(ft){function lt(Rt){const{internal:Dt}=ft.getState(),Nt=Rt.offsetX-Dt.initialClick[0],Ft=Rt.offsetY-Dt.initialClick[1];return Math.round(Math.sqrt(Nt*Nt+Ft*Ft))}function dt(Rt){return Rt.filter(Dt=>["Move","Over","Enter","Out","Leave"].some(Nt=>{var Ft;return(Ft=Dt.__r3f)==null?void 0:Ft.handlers["onPointer"+Nt]}))}function vt(Rt,Dt){const Nt=ft.getState(),Ft=new Set,Ut=[],Wt=Dt?Dt(Nt.internal.interaction):Nt.internal.interaction;for(let hn=0;hn<Wt.length;hn++){const dn=getRootState(Wt[hn]);dn&&(dn.raycaster.camera=void 0)}Nt.previousRoot||Nt.events.compute==null||Nt.events.compute(Rt,Nt);function Zt(hn){const dn=getRootState(hn);if(!dn||!dn.events.enabled||dn.raycaster.camera===null)return[];if(dn.raycaster.camera===void 0){var pn;dn.events.compute==null||dn.events.compute(Rt,dn,(pn=dn.previousRoot)==null?void 0:pn.getState()),dn.raycaster.camera===void 0&&(dn.raycaster.camera=null)}return dn.raycaster.camera?dn.raycaster.intersectObject(hn,!0):[]}let Kt=Wt.flatMap(Zt).sort((hn,dn)=>{const pn=getRootState(hn.object),gn=getRootState(dn.object);return!pn||!gn?hn.distance-dn.distance:gn.events.priority-pn.events.priority||hn.distance-dn.distance}).filter(hn=>{const dn=makeId(hn);return Ft.has(dn)?!1:(Ft.add(dn),!0)});Nt.events.filter&&(Kt=Nt.events.filter(Kt,Nt));for(const hn of Kt){let dn=hn.object;for(;dn;){var cn;(cn=dn.__r3f)!=null&&cn.eventCount&&Ut.push({...hn,eventObject:dn}),dn=dn.parent}}if("pointerId"in Rt&&Nt.internal.capturedMap.has(Rt.pointerId))for(let hn of Nt.internal.capturedMap.get(Rt.pointerId).values())Ft.has(makeId(hn.intersection))||Ut.push(hn.intersection);return Ut}function St(Rt,Dt,Nt,Ft){const Ut=ft.getState();if(Rt.length){const Wt={stopped:!1};for(const Zt of Rt){const Kt=getRootState(Zt.object)||Ut,{raycaster:cn,pointer:hn,camera:dn,internal:pn}=Kt,gn=new Vector3(hn.x,hn.y,0).unproject(dn),vn=Pn=>{var zn,An;return(zn=(An=pn.capturedMap.get(Pn))==null?void 0:An.has(Zt.eventObject))!=null?zn:!1},bn=Pn=>{const zn={intersection:Zt,target:Dt.target};pn.capturedMap.has(Pn)?pn.capturedMap.get(Pn).set(Zt.eventObject,zn):pn.capturedMap.set(Pn,new Map([[Zt.eventObject,zn]])),Dt.target.setPointerCapture(Pn)},$n=Pn=>{const zn=pn.capturedMap.get(Pn);zn&&releaseInternalPointerCapture(pn.capturedMap,Zt.eventObject,zn,Pn)};let Tn={};for(let Pn in Dt){let zn=Dt[Pn];typeof zn!="function"&&(Tn[Pn]=zn)}let In={...Zt,...Tn,pointer:hn,intersections:Rt,stopped:Wt.stopped,delta:Nt,unprojectedPoint:gn,ray:cn.ray,camera:dn,stopPropagation(){const Pn="pointerId"in Dt&&pn.capturedMap.get(Dt.pointerId);if((!Pn||Pn.has(Zt.eventObject))&&(In.stopped=Wt.stopped=!0,pn.hovered.size&&Array.from(pn.hovered.values()).find(zn=>zn.eventObject===Zt.eventObject))){const zn=Rt.slice(0,Rt.indexOf(Zt));Et([...zn,Zt])}},target:{hasPointerCapture:vn,setPointerCapture:bn,releasePointerCapture:$n},currentTarget:{hasPointerCapture:vn,setPointerCapture:bn,releasePointerCapture:$n},nativeEvent:Dt};if(Ft(In),Wt.stopped===!0)break}}return Rt}function Et(Rt){const{internal:Dt}=ft.getState();for(const Nt of Dt.hovered.values())if(!Rt.length||!Rt.find(Ft=>Ft.object===Nt.object&&Ft.index===Nt.index&&Ft.instanceId===Nt.instanceId)){const Ut=Nt.eventObject.__r3f,Wt=Ut==null?void 0:Ut.handlers;if(Dt.hovered.delete(makeId(Nt)),Ut!=null&&Ut.eventCount){const Zt={...Nt,intersections:Rt};Wt.onPointerOut==null||Wt.onPointerOut(Zt),Wt.onPointerLeave==null||Wt.onPointerLeave(Zt)}}}function Ct(Rt,Dt){for(let Nt=0;Nt<Dt.length;Nt++){const Ft=Dt[Nt].__r3f;Ft==null||Ft.handlers.onPointerMissed==null||Ft.handlers.onPointerMissed(Rt)}}function At(Rt){switch(Rt){case"onPointerLeave":case"onPointerCancel":return()=>Et([]);case"onLostPointerCapture":return Dt=>{const{internal:Nt}=ft.getState();"pointerId"in Dt&&Nt.capturedMap.has(Dt.pointerId)&&requestAnimationFrame(()=>{Nt.capturedMap.has(Dt.pointerId)&&(Nt.capturedMap.delete(Dt.pointerId),Et([]))})}}return function(Nt){const{onPointerMissed:Ft,internal:Ut}=ft.getState();Ut.lastEvent.current=Nt;const Wt=Rt==="onPointerMove",Zt=Rt==="onClick"||Rt==="onContextMenu"||Rt==="onDoubleClick",cn=vt(Nt,Wt?dt:void 0),hn=Zt?lt(Nt):0;Rt==="onPointerDown"&&(Ut.initialClick=[Nt.offsetX,Nt.offsetY],Ut.initialHits=cn.map(pn=>pn.eventObject)),Zt&&!cn.length&&hn<=2&&(Ct(Nt,Ut.interaction),Ft&&Ft(Nt)),Wt&&Et(cn);function dn(pn){const gn=pn.eventObject,vn=gn.__r3f,bn=vn==null?void 0:vn.handlers;if(vn!=null&&vn.eventCount)if(Wt){if(bn.onPointerOver||bn.onPointerEnter||bn.onPointerOut||bn.onPointerLeave){const $n=makeId(pn),Tn=Ut.hovered.get($n);Tn?Tn.stopped&&pn.stopPropagation():(Ut.hovered.set($n,pn),bn.onPointerOver==null||bn.onPointerOver(pn),bn.onPointerEnter==null||bn.onPointerEnter(pn))}bn.onPointerMove==null||bn.onPointerMove(pn)}else{const $n=bn[Rt];$n?(!Zt||Ut.initialHits.includes(gn))&&(Ct(Nt,Ut.interaction.filter(Tn=>!Ut.initialHits.includes(Tn))),$n(pn)):Zt&&Ut.initialHits.includes(gn)&&Ct(Nt,Ut.interaction.filter(Tn=>!Ut.initialHits.includes(Tn)))}}St(cn,Nt,hn,dn)}}return{handlePointer:At}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=ft=>!!(ft!=null&&ft.render),context=reactExports.createContext(null),createStore=(ft,lt)=>{const dt=create$1((At,Rt)=>{const Dt=new Vector3,Nt=new Vector3,Ft=new Vector3;function Ut(hn=Rt().camera,dn=Nt,pn=Rt().size){const{width:gn,height:vn,top:bn,left:$n}=pn,Tn=gn/vn;dn instanceof Vector3?Ft.copy(dn):Ft.set(...dn);const In=hn.getWorldPosition(Dt).distanceTo(Ft);if(isOrthographicCamera(hn))return{width:gn/hn.zoom,height:vn/hn.zoom,top:bn,left:$n,factor:1,distance:In,aspect:Tn};{const Pn=hn.fov*Math.PI/180,zn=2*Math.tan(Pn/2)*In,An=zn*(gn/vn);return{width:An,height:zn,top:bn,left:$n,factor:gn/An,distance:In,aspect:Tn}}}let Wt;const Zt=hn=>At(dn=>({performance:{...dn.performance,current:hn}})),Kt=new Vector2;return{set:At,get:Rt,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(hn=1)=>ft(Rt(),hn),advance:(hn,dn)=>lt(hn,dn,Rt()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:Kt,mouse:Kt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const hn=Rt();Wt&&clearTimeout(Wt),hn.performance.current!==hn.performance.min&&Zt(hn.performance.min),Wt=setTimeout(()=>Zt(Rt().performance.max),hn.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Ut},setEvents:hn=>At(dn=>({...dn,events:{...dn.events,...hn}})),setSize:(hn,dn,pn,gn,vn)=>{const bn=Rt().camera,$n={width:hn,height:dn,top:gn||0,left:vn||0,updateStyle:pn};At(Tn=>({size:$n,viewport:{...Tn.viewport,...Ut(bn,Nt,$n)}}))},setDpr:hn=>At(dn=>{const pn=calculateDpr(hn);return{viewport:{...dn.viewport,dpr:pn,initialDpr:dn.viewport.initialDpr||pn}}}),setFrameloop:(hn="always")=>{const dn=Rt().clock;dn.stop(),dn.elapsedTime=0,hn!=="never"&&(dn.start(),dn.elapsedTime=0),At(()=>({frameloop:hn}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(hn,dn,pn)=>{const gn=Rt().internal;return gn.priority=gn.priority+(dn>0?1:0),gn.subscribers.push({ref:hn,priority:dn,store:pn}),gn.subscribers=gn.subscribers.sort((vn,bn)=>vn.priority-bn.priority),()=>{const vn=Rt().internal;vn!=null&&vn.subscribers&&(vn.priority=vn.priority-(dn>0?1:0),vn.subscribers=vn.subscribers.filter(bn=>bn.ref!==hn))}}}}}),vt=dt.getState();let St=vt.size,Et=vt.viewport.dpr,Ct=vt.camera;return dt.subscribe(()=>{const{camera:At,size:Rt,viewport:Dt,gl:Nt,set:Ft}=dt.getState();if(Rt!==St||Dt.dpr!==Et){var Ut;St=Rt,Et=Dt.dpr,updateCamera(At,Rt),Nt.setPixelRatio(Dt.dpr);const Wt=(Ut=Rt.updateStyle)!=null?Ut:typeof HTMLCanvasElement<"u"&&Nt.domElement instanceof HTMLCanvasElement;Nt.setSize(Rt.width,Rt.height,Wt)}At!==Ct&&(Ct=At,Ft(Wt=>({viewport:{...Wt.viewport,...Wt.viewport.getCurrentViewport(At)}})))}),dt.subscribe(At=>ft(At)),dt};function createSubs(ft,lt){const dt={callback:ft};return lt.add(dt),()=>void lt.delete(dt)}let i$2,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;const addEffect=ft=>createSubs(ft,globalEffects);function run(ft,lt){if(ft.size)for(const{callback:dt}of ft.values())dt(lt)}function flushGlobalEffects(ft,lt){switch(ft){case"before":return run(globalEffects,lt);case"after":return run(globalAfterEffects,lt);case"tail":return run(globalTailEffects,lt)}}let subscribers,subscription;function render$1(ft,lt,dt){let vt=lt.clock.getDelta();for(lt.frameloop==="never"&&typeof ft=="number"&&(vt=ft-lt.clock.elapsedTime,lt.clock.oldTime=lt.clock.elapsedTime,lt.clock.elapsedTime=ft),subscribers=lt.internal.subscribers,i$2=0;i$2<subscribers.length;i$2++)subscription=subscribers[i$2],subscription.ref.current(subscription.store.getState(),vt,dt);return!lt.internal.priority&&lt.gl.render&&lt.gl.render(lt.scene,lt.camera),lt.internal.frames=Math.max(0,lt.internal.frames-1),lt.frameloop==="always"?1:lt.internal.frames}function createLoop(ft){let lt=!1,dt,vt,St;function Et(Rt){vt=requestAnimationFrame(Et),lt=!0,dt=0,flushGlobalEffects("before",Rt);for(const Nt of ft.values()){var Dt;St=Nt.store.getState(),St.internal.active&&(St.frameloop==="always"||St.internal.frames>0)&&!((Dt=St.gl.xr)!=null&&Dt.isPresenting)&&(dt+=render$1(Rt,St))}if(flushGlobalEffects("after",Rt),dt===0)return flushGlobalEffects("tail",Rt),lt=!1,cancelAnimationFrame(vt)}function Ct(Rt,Dt=1){var Nt;if(!Rt)return ft.forEach(Ft=>Ct(Ft.store.getState()),Dt);(Nt=Rt.gl.xr)!=null&&Nt.isPresenting||!Rt.internal.active||Rt.frameloop==="never"||(Rt.internal.frames=Math.min(60,Rt.internal.frames+Dt),lt||(lt=!0,requestAnimationFrame(Et)))}function At(Rt,Dt=!0,Nt,Ft){if(Dt&&flushGlobalEffects("before",Rt),Nt)render$1(Rt,Nt,Ft);else for(const Ut of ft.values())render$1(Rt,Ut.store.getState());Dt&&flushGlobalEffects("after",Rt)}return{loop:Et,invalidate:Ct,advance:At}}function useStore(){const ft=reactExports.useContext(context);if(!ft)throw new Error("R3F: Hooks can only be used within the Canvas component!");return ft}function useThree(ft=dt=>dt,lt){return useStore()(ft,lt)}function useFrame(ft,lt=0){const dt=useStore(),vt=dt.getState().internal.subscribe,St=useMutableCallback(ft);return useIsomorphicLayoutEffect(()=>vt(St,lt,dt),[lt,vt,dt]),null}function loadingFn(ft,lt){return function(dt,...vt){const St=new dt;return ft&&ft(St),Promise.all(vt.map(Et=>new Promise((Ct,At)=>St.load(Et,Rt=>{Rt.scene&&Object.assign(Rt,buildGraph(Rt.scene)),Ct(Rt)},lt,Rt=>At(new Error(`Could not load ${Et}: ${Rt.message})`))))))}}function useLoader(ft,lt,dt,vt){const St=Array.isArray(lt)?lt:[lt],Et=suspend(loadingFn(dt,vt),[ft,...St],{equal:is.equ});return Array.isArray(lt)?Et:Et[0]}useLoader.preload=function(ft,lt,dt){const vt=Array.isArray(lt)?lt:[lt];return preload(loadingFn(dt),[ft,...vt])};useLoader.clear=function(ft,lt){const dt=Array.isArray(lt)?lt:[lt];return clear([ft,...dt])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(ft,lt)=>{const dt=typeof ft=="function"?ft(lt):ft;return isRenderer(dt)?dt:new WebGLRenderer({powerPreference:"high-performance",canvas:lt,antialias:!0,alpha:!0,...ft})};function computeInitialSize(ft,lt){if(lt)return lt;if(typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement&&ft.parentElement){const{width:dt,height:vt,top:St,left:Et}=ft.parentElement.getBoundingClientRect();return{width:dt,height:vt,top:St,left:Et}}else if(typeof OffscreenCanvas<"u"&&ft instanceof OffscreenCanvas)return{width:ft.width,height:ft.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(ft){const lt=roots.get(ft),dt=lt==null?void 0:lt.fiber,vt=lt==null?void 0:lt.store;lt&&console.warn("R3F.createRoot should only be called once!");const St=typeof reportError=="function"?reportError:console.error,Et=vt||createStore(invalidate,advance),Ct=dt||reconciler.createContainer(Et,constantsExports.ConcurrentRoot,null,!1,null,"",St,null);lt||roots.set(ft,{fiber:Ct,store:Et});let At,Rt=!1,Dt;return{configure(Nt={}){let{gl:Ft,size:Ut,scene:Wt,events:Zt,onCreated:Kt,shadows:cn=!1,linear:hn=!1,flat:dn=!1,legacy:pn=!1,orthographic:gn=!1,frameloop:vn="always",dpr:bn=[1,2],performance:$n,raycaster:Tn,camera:In,onPointerMissed:Pn}=Nt,zn=Et.getState(),An=zn.gl;zn.gl||zn.set({gl:An=createRendererInstance(Ft,ft)});let Gn=zn.raycaster;Gn||zn.set({raycaster:Gn=new Raycaster});const{params:xn,...Qn}=Tn||{};if(is.equ(Qn,Gn,shallowLoose)||applyProps(Gn,{...Qn}),is.equ(xn,Gn.params,shallowLoose)||applyProps(Gn,{params:{...Gn.params,...xn}}),!zn.camera||zn.camera===Dt&&!is.equ(Dt,In,shallowLoose)){Dt=In;const Ln=In instanceof Camera,Cn=Ln?In:gn?new OrthographicCamera$1(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Ln||(Cn.position.z=5,In&&applyProps(Cn,In),!zn.camera&&!(In!=null&&In.rotation)&&Cn.lookAt(0,0,0)),zn.set({camera:Cn})}if(!zn.scene){let Ln;Wt instanceof Scene?Ln=Wt:(Ln=new Scene,Wt&&applyProps(Ln,Wt)),zn.set({scene:prepare(Ln)})}if(!zn.xr){const Ln=(ir,Zn)=>{const br=Et.getState();br.frameloop!=="never"&&advance(ir,!0,br,Zn)},Cn=()=>{const ir=Et.getState();ir.gl.xr.enabled=ir.gl.xr.isPresenting,ir.gl.xr.setAnimationLoop(ir.gl.xr.isPresenting?Ln:null),ir.gl.xr.isPresenting||invalidate(ir)},tr={connect(){const ir=Et.getState().gl;ir.xr.addEventListener("sessionstart",Cn),ir.xr.addEventListener("sessionend",Cn)},disconnect(){const ir=Et.getState().gl;ir.xr.removeEventListener("sessionstart",Cn),ir.xr.removeEventListener("sessionend",Cn)}};An.xr&&tr.connect(),zn.set({xr:tr})}if(An.shadowMap){const Ln=An.shadowMap.enabled,Cn=An.shadowMap.type;if(An.shadowMap.enabled=!!cn,is.boo(cn))An.shadowMap.type=PCFSoftShadowMap;else if(is.str(cn)){var qn;const tr={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};An.shadowMap.type=(qn=tr[cn])!=null?qn:PCFSoftShadowMap}else is.obj(cn)&&Object.assign(An.shadowMap,cn);(Ln!==An.shadowMap.enabled||Cn!==An.shadowMap.type)&&(An.shadowMap.needsUpdate=!0)}const nr=getColorManagement();nr&&("enabled"in nr?nr.enabled=!pn:"legacyMode"in nr&&(nr.legacyMode=pn));const Un=hn?LinearEncoding:sRGBEncoding,Nn=dn?NoToneMapping:ACESFilmicToneMapping;An.outputEncoding!==Un&&(An.outputEncoding=Un),An.toneMapping!==Nn&&(An.toneMapping=Nn),zn.legacy!==pn&&zn.set(()=>({legacy:pn})),zn.linear!==hn&&zn.set(()=>({linear:hn})),zn.flat!==dn&&zn.set(()=>({flat:dn})),Ft&&!is.fun(Ft)&&!isRenderer(Ft)&&!is.equ(Ft,An,shallowLoose)&&applyProps(An,Ft),Zt&&!zn.events.handlers&&zn.set({events:Zt(Et)});const jn=computeInitialSize(ft,Ut);return is.equ(jn,zn.size,shallowLoose)||zn.setSize(jn.width,jn.height,jn.updateStyle,jn.top,jn.left),bn&&zn.viewport.dpr!==calculateDpr(bn)&&zn.setDpr(bn),zn.frameloop!==vn&&zn.setFrameloop(vn),zn.onPointerMissed||zn.set({onPointerMissed:Pn}),$n&&!is.equ($n,zn.performance,shallowLoose)&&zn.set(Ln=>({performance:{...Ln.performance,...$n}})),At=Kt,Rt=!0,this},render(Nt){return Rt||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:Et,children:Nt,onCreated:At,rootElement:ft}),Ct,null,()=>{}),Et},unmount(){unmountComponentAtNode(ft)}}}function Provider({store:ft,children:lt,onCreated:dt,rootElement:vt}){return useIsomorphicLayoutEffect(()=>{const St=ft.getState();St.set(Et=>({internal:{...Et.internal,active:!0}})),dt&&dt(St),ft.getState().events.connected||St.events.connect==null||St.events.connect(vt)},[]),reactExports.createElement(context.Provider,{value:ft},lt)}function unmountComponentAtNode(ft,lt){const dt=roots.get(ft),vt=dt==null?void 0:dt.fiber;if(vt){const St=dt==null?void 0:dt.store.getState();St&&(St.internal.active=!1),reconciler.updateContainer(null,vt,null,()=>{St&&setTimeout(()=>{try{var Et,Ct,At,Rt;St.events.disconnect==null||St.events.disconnect(),(Et=St.gl)==null||(Ct=Et.renderLists)==null||Ct.dispose==null||Ct.dispose(),(At=St.gl)==null||At.forceContextLoss==null||At.forceContextLoss(),(Rt=St.gl)!=null&&Rt.xr&&St.xr.disconnect(),dispose(St),roots.delete(ft),lt&&lt(ft)}catch{}},500)})}}function createPortal(ft,lt,dt){return reactExports.createElement(Portal,{key:lt.uuid,children:ft,container:lt,state:dt})}function Portal({state:ft={},children:lt,container:dt}){const{events:vt,size:St,...Et}=ft,Ct=useStore(),[At]=reactExports.useState(()=>new Raycaster),[Rt]=reactExports.useState(()=>new Vector2),Dt=reactExports.useCallback((Ft,Ut)=>{const Wt={...Ft};Object.keys(Ft).forEach(Kt=>{(privateKeys.includes(Kt)||Ft[Kt]!==Ut[Kt]&&Ut[Kt])&&delete Wt[Kt]});let Zt;if(Ut&&St){const Kt=Ut.camera;Zt=Ft.viewport.getCurrentViewport(Kt,new Vector3,St),Kt!==Ft.camera&&updateCamera(Kt,St)}return{...Wt,scene:dt,raycaster:At,pointer:Rt,mouse:Rt,previousRoot:Ct,events:{...Ft.events,...Ut==null?void 0:Ut.events,...vt},size:{...Ft.size,...St},viewport:{...Ft.viewport,...Zt},...Et}},[ft]),[Nt]=reactExports.useState(()=>{const Ft=Ct.getState();return create$1((Wt,Zt)=>({...Ft,scene:dt,raycaster:At,pointer:Rt,mouse:Rt,previousRoot:Ct,events:{...Ft.events,...vt},size:{...Ft.size,...St},...Et,set:Wt,get:Zt,setEvents:Kt=>Wt(cn=>({...cn,events:{...cn.events,...Kt}}))}))});return reactExports.useEffect(()=>{const Ft=Ct.subscribe(Ut=>Nt.setState(Wt=>Dt(Ut,Wt)));return()=>{Ft(),Nt.destroy()}},[]),reactExports.useEffect(()=>{Nt.setState(Ft=>Dt(Ct.getState(),Ft))},[Dt]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:Nt},lt),Nt,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends(){return _extends=Object.assign?Object.assign.bind():function(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt];for(var vt in dt)Object.prototype.hasOwnProperty.call(dt,vt)&&(ft[vt]=dt[vt])}return ft},_extends.apply(this,arguments)}function debounce(ft,lt,dt){var vt,St,Et,Ct,At;lt==null&&(lt=100);function Rt(){var Nt=Date.now()-Ct;Nt<lt&&Nt>=0?vt=setTimeout(Rt,lt-Nt):(vt=null,dt||(At=ft.apply(Et,St),Et=St=null))}var Dt=function(){Et=this,St=arguments,Ct=Date.now();var Nt=dt&&!vt;return vt||(vt=setTimeout(Rt,lt)),Nt&&(At=ft.apply(Et,St),Et=St=null),At};return Dt.clear=function(){vt&&(clearTimeout(vt),vt=null)},Dt.flush=function(){vt&&(At=ft.apply(Et,St),Et=St=null,clearTimeout(vt),vt=null)},Dt}debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(ft){let{debounce:lt,scroll:dt,polyfill:vt,offsetSize:St}=ft===void 0?{debounce:0,scroll:!1,offsetSize:!1}:ft;const Et=vt||(typeof window>"u"?class{}:window.ResizeObserver);if(!Et)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Ct,At]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Rt=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Ct}),Dt=lt?typeof lt=="number"?lt:lt.scroll:null,Nt=lt?typeof lt=="number"?lt:lt.resize:null,Ft=reactExports.useRef(!1);reactExports.useEffect(()=>(Ft.current=!0,()=>void(Ft.current=!1)));const[Ut,Wt,Zt]=reactExports.useMemo(()=>{const dn=()=>{if(!Rt.current.element)return;const{left:pn,top:gn,width:vn,height:bn,bottom:$n,right:Tn,x:In,y:Pn}=Rt.current.element.getBoundingClientRect(),zn={left:pn,top:gn,width:vn,height:bn,bottom:$n,right:Tn,x:In,y:Pn};Rt.current.element instanceof HTMLElement&&St&&(zn.height=Rt.current.element.offsetHeight,zn.width=Rt.current.element.offsetWidth),Object.freeze(zn),Ft.current&&!areBoundsEqual(Rt.current.lastBounds,zn)&&At(Rt.current.lastBounds=zn)};return[dn,Nt?createDebounce(dn,Nt):dn,Dt?createDebounce(dn,Dt):dn]},[At,St,Dt,Nt]);function Kt(){Rt.current.scrollContainers&&(Rt.current.scrollContainers.forEach(dn=>dn.removeEventListener("scroll",Zt,!0)),Rt.current.scrollContainers=null),Rt.current.resizeObserver&&(Rt.current.resizeObserver.disconnect(),Rt.current.resizeObserver=null)}function cn(){Rt.current.element&&(Rt.current.resizeObserver=new Et(Zt),Rt.current.resizeObserver.observe(Rt.current.element),dt&&Rt.current.scrollContainers&&Rt.current.scrollContainers.forEach(dn=>dn.addEventListener("scroll",Zt,{capture:!0,passive:!0})))}const hn=dn=>{!dn||dn===Rt.current.element||(Kt(),Rt.current.element=dn,Rt.current.scrollContainers=findScrollContainers(dn),cn())};return useOnWindowScroll(Zt,!!dt),useOnWindowResize(Wt),reactExports.useEffect(()=>{Kt(),cn()},[dt,Zt,Wt]),reactExports.useEffect(()=>Kt,[]),[hn,Ct,Ut]}function useOnWindowResize(ft){reactExports.useEffect(()=>{const lt=ft;return window.addEventListener("resize",lt),()=>void window.removeEventListener("resize",lt)},[ft])}function useOnWindowScroll(ft,lt){reactExports.useEffect(()=>{if(lt){const dt=ft;return window.addEventListener("scroll",dt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",dt,!0)}},[ft,lt])}function findScrollContainers(ft){const lt=[];if(!ft||ft===document.body)return lt;const{overflow:dt,overflowX:vt,overflowY:St}=window.getComputedStyle(ft);return[dt,vt,St].some(Et=>Et==="auto"||Et==="scroll")&&lt.push(ft),[...lt,...findScrollContainers(ft.parentElement)]}const keys$1=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(ft,lt)=>keys$1.every(dt=>ft[dt]===lt[dt]);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(ft,lt,dt)=>lt in ft?__defProp(ft,lt,{enumerable:!0,configurable:!0,writable:!0,value:dt}):ft[lt]=dt,__spreadValues=(ft,lt)=>{for(var dt in lt||(lt={}))__hasOwnProp.call(lt,dt)&&__defNormalProp(ft,dt,lt[dt]);if(__getOwnPropSymbols)for(var dt of __getOwnPropSymbols(lt))__propIsEnum.call(lt,dt)&&__defNormalProp(ft,dt,lt[dt]);return ft},__spreadProps=(ft,lt)=>__defProps(ft,__getOwnPropDescs(lt)),_a$1;function traverseFiber(ft,lt,dt){if(!ft)return;if(dt(ft)===!0)return ft;let vt=lt?ft.return:ft.child;for(;vt;){const St=traverseFiber(vt,lt,dt);if(St)return St;vt=lt?null:vt.sibling}}function wrapContext(ft){try{return Object.defineProperties(ft,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return ft}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=(_a$1=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?_a$1:{};function useFiber(){const ft=reactExports.useContext(FiberContext),lt=reactExports.useId();return reactExports.useMemo(()=>{var vt;return(vt=ReactCurrentOwner==null?void 0:ReactCurrentOwner.current)!=null?vt:traverseFiber(ft,!1,St=>{let Et=St.memoizedState;for(;Et;){if(Et.memoizedState===lt)return!0;Et=Et.next}})},[ft,lt])}function useContextBridge(){var ft,lt;const dt=useFiber(),[vt]=reactExports.useState(()=>new Map);vt.clear();let St=dt;for(;St;){const Et=(ft=St.type)==null?void 0:ft._context;Et&&Et!==FiberContext&&!vt.has(Et)&&vt.set(Et,(lt=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:lt.readContext(wrapContext(Et))),St=St.return}return reactExports.useMemo(()=>Array.from(vt.keys()).reduce((Et,Ct)=>At=>reactExports.createElement(Et,null,reactExports.createElement(Ct.Provider,__spreadProps(__spreadValues({},At),{value:vt.get(Ct)}))),Et=>reactExports.createElement(FiberProvider,__spreadValues({},Et))),[vt])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(ft){const{handlePointer:lt}=createEvents(ft);return{priority:1,enabled:!0,compute(dt,vt,St){vt.pointer.set(dt.offsetX/vt.size.width*2-1,-(dt.offsetY/vt.size.height)*2+1),vt.raycaster.setFromCamera(vt.pointer,vt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((dt,vt)=>({...dt,[vt]:lt(vt)}),{}),update:()=>{var dt;const{events:vt,internal:St}=ft.getState();(dt=St.lastEvent)!=null&&dt.current&&vt.handlers&&vt.handlers.onPointerMove(St.lastEvent.current)},connect:dt=>{var vt;const{set:St,events:Et}=ft.getState();Et.disconnect==null||Et.disconnect(),St(Ct=>({events:{...Ct.events,connected:dt}})),Object.entries((vt=Et.handlers)!=null?vt:[]).forEach(([Ct,At])=>{const[Rt,Dt]=DOM_EVENTS[Ct];dt.addEventListener(Rt,At,{passive:Dt})})},disconnect:()=>{const{set:dt,events:vt}=ft.getState();if(vt.connected){var St;Object.entries((St=vt.handlers)!=null?St:[]).forEach(([Et,Ct])=>{if(vt&&vt.connected instanceof HTMLElement){const[At]=DOM_EVENTS[Et];vt.connected.removeEventListener(At,Ct)}}),dt(Et=>({events:{...Et.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function ft({children:lt,fallback:dt,resize:vt,style:St,gl:Et,events:Ct=createPointerEvents,eventSource:At,eventPrefix:Rt,shadows:Dt,linear:Nt,flat:Ft,legacy:Ut,orthographic:Wt,frameloop:Zt,dpr:Kt,performance:cn,raycaster:hn,camera:dn,onPointerMissed:pn,onCreated:gn,...vn},bn){reactExports.useMemo(()=>extend$1(r$5),[]);const $n=useContextBridge(),[Tn,In]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...vt}),Pn=reactExports.useRef(null),zn=reactExports.useRef(null);reactExports.useImperativeHandle(bn,()=>Pn.current);const An=useMutableCallback(pn),[Gn,xn]=reactExports.useState(!1),[Qn,qn]=reactExports.useState(!1);if(Gn)throw Gn;if(Qn)throw Qn;const nr=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Nn=Pn.current;In.width>0&&In.height>0&&Nn&&(nr.current||(nr.current=createRoot(Nn)),nr.current.configure({gl:Et,events:Ct,shadows:Dt,linear:Nt,flat:Ft,legacy:Ut,orthographic:Wt,frameloop:Zt,dpr:Kt,performance:cn,raycaster:hn,camera:dn,size:In,onPointerMissed:(...jn)=>An.current==null?void 0:An.current(...jn),onCreated:jn=>{jn.events.connect==null||jn.events.connect(At?isRef(At)?At.current:At:zn.current),Rt&&jn.setEvents({compute:(Ln,Cn)=>{const tr=Ln[Rt+"X"],ir=Ln[Rt+"Y"];Cn.pointer.set(tr/Cn.size.width*2-1,-(ir/Cn.size.height)*2+1),Cn.raycaster.setFromCamera(Cn.pointer,Cn.camera)}}),gn==null||gn(jn)}}),nr.current.render(reactExports.createElement($n,null,reactExports.createElement(ErrorBoundary,{set:qn},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:xn})},lt)))))}),reactExports.useEffect(()=>{const Nn=Pn.current;if(Nn)return()=>unmountComponentAtNode(Nn)},[]);const Un=At?"none":"auto";return reactExports.createElement("div",_extends({ref:zn,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Un,...St}},vn),reactExports.createElement("div",{ref:Tn,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Pn,style:{display:"block"}},dt)))}),Canvas=reactExports.forwardRef(function ft(lt,dt){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},lt,{ref:dt})))}),BINOMIAL_COEFFICIENTS=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1],[1,9,36,84,126,126,84,36,9,1],[1,10,45,120,210,252,210,120,45,10,1]],MAX_CONTROL_POINTS=BINOMIAL_COEFFICIENTS.length,computeBezierPoint=(ft,lt)=>{const dt=new Vector3(0,0,0),vt=ft.length-1;for(let St=0;St<=vt;St++)dt.addScaledVector(ft[St],BINOMIAL_COEFFICIENTS[vt][St]*Math.pow(1-lt,vt-St)*Math.pow(lt,St));return dt},interpolateBezierPoints=(ft,lt)=>Array(lt).fill(0).map((dt,vt)=>computeBezierPoint(ft,vt/lt)),INTERPOLATION_COUNT=1e3,useCurveEditorState=create$2()(subscribeWithSelector(immer((ft,lt)=>({bezierControlPoints:[new Vector3(1,1,1),new Vector3(2,5,4)],selectedControlPoint:void 0,hoveredControlPoint:void 0,bezierLinePoints:[],addBezierControlPoint:dt=>{const vt=[...lt().bezierControlPoints];vt.push(dt),!(vt.length>MAX_CONTROL_POINTS)&&ft({bezierControlPoints:vt})},removeBezierControlPoint:dt=>{const vt=[...lt().bezierControlPoints];vt.splice(dt,1),ft({bezierControlPoints:vt})},updateBezierControlPoint:(dt,vt)=>ft(St=>{St.bezierControlPoints[dt]=vt}),setSelectedControlPoint:dt=>{ft({selectedControlPoint:dt})},updateBezierInterpolationPoints:()=>{const dt=interpolateBezierPoints(lt().bezierControlPoints,INTERPOLATION_COUNT);ft({bezierLinePoints:dt})}}))));useCurveEditorState.subscribe(ft=>ft.bezierControlPoints,()=>{useCurveEditorState.getState().updateBezierInterpolationPoints()});const VectorEditorItem=({id:ft,point:lt})=>{const dt=useCurveEditorState(Ct=>Ct.updateBezierControlPoint),vt=useCurveEditorState(Ct=>Ct.removeBezierControlPoint),[St,Et]=reactExports.useState({x:`${lt.x}`,y:`${lt.y}`,z:`${lt.z}`});return reactExports.useEffect(()=>{dt(ft,new Vector3(parseFloat(St.x)||0,parseFloat(St.y)||0,parseFloat(St.z)||0))},[St]),reactExports.useEffect(()=>{Et({x:`${lt.x}`,y:`${lt.y}`,z:`${lt.z}`})},[lt]),jsxs("div",{className:"flex items-center gap-2 p-2",children:[jsx("span",{children:`${ft+1}.`}),jsx(TextInput,{className:"text-center",value:St.x,onChange:Ct=>Et(At=>({...At,x:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:St.y,onChange:Ct=>Et(At=>({...At,y:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:St.z,onChange:Ct=>Et(At=>({...At,z:Ct.target.value}))}),jsx("button",{onClick:()=>vt(ft),children:jsx(FontAwesomeIcon,{className:"text-blue-600",icon:faTrashCan})})]})},VectorEditor=({points:ft})=>jsx("div",{children:ft.map((lt,dt)=>jsx(VectorEditorItem,{id:dt,point:lt},dt))});function mergeRefs(ft){return function(lt){ft.forEach(function(dt){typeof dt=="function"?dt(lt):dt!=null&&(dt.current=lt)})}}function clamp(ft,lt,dt){return Math.max(lt,Math.min(ft,dt))}const V$1={toVector(ft,lt){return ft===void 0&&(ft=lt),Array.isArray(ft)?ft:[ft,ft]},add(ft,lt){return[ft[0]+lt[0],ft[1]+lt[1]]},sub(ft,lt){return[ft[0]-lt[0],ft[1]-lt[1]]},addTo(ft,lt){ft[0]+=lt[0],ft[1]+=lt[1]},subTo(ft,lt){ft[0]-=lt[0],ft[1]-=lt[1]}};function rubberband(ft,lt,dt){return lt===0||Math.abs(lt)===1/0?Math.pow(ft,dt*5):ft*lt*dt/(lt+dt*ft)}function rubberbandIfOutOfBounds(ft,lt,dt,vt=.15){return vt===0?clamp(ft,lt,dt):ft<lt?-rubberband(lt-ft,dt-lt,vt)+lt:ft>dt?+rubberband(ft-dt,dt-lt,vt)+dt:ft}function computeRubberband(ft,[lt,dt],[vt,St]){const[[Et,Ct],[At,Rt]]=ft;return[rubberbandIfOutOfBounds(lt,Et,Ct,vt),rubberbandIfOutOfBounds(dt,At,Rt,St)]}function _toPrimitive$1(ft,lt){if(typeof ft!="object"||ft===null)return ft;var dt=ft[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(ft,lt||"default");if(typeof vt!="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lt==="string"?String:Number)(ft)}function _toPropertyKey$1(ft){var lt=_toPrimitive$1(ft,"string");return typeof lt=="symbol"?lt:String(lt)}function _defineProperty$1(ft,lt,dt){return lt=_toPropertyKey$1(lt),lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function ownKeys(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ft,St).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys(Object(dt),!0).forEach(function(vt){_defineProperty$1(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(ft){return ft?ft[0].toUpperCase()+ft.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(ft=!1,lt){return ft&&!actionsWithoutCaptureSupported.includes(lt)}function toHandlerProp(ft,lt="",dt=!1){const vt=EVENT_TYPE_MAP[ft],St=vt&&vt[lt]||lt;return"on"+capitalize(ft)+capitalize(St)+(hasCapture(dt,St)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(ft){let lt=ft.substring(2).toLowerCase();const dt=!!~lt.indexOf("passive");dt&&(lt=lt.replace("passive",""));const vt=pointerCaptureEvents.includes(lt)?"capturecapture":"capture",St=!!~lt.indexOf(vt);return St&&(lt=lt.replace("capture","")),{device:lt,capture:St,passive:dt}}function toDomEventType(ft,lt=""){const dt=EVENT_TYPE_MAP[ft],vt=dt&&dt[lt]||lt;return ft+vt}function isTouch(ft){return"touches"in ft}function getPointerType(ft){return isTouch(ft)?"touch":"pointerType"in ft?ft.pointerType:"mouse"}function getCurrentTargetTouchList(ft){return Array.from(ft.touches).filter(lt=>{var dt,vt;return lt.target===ft.currentTarget||((dt=ft.currentTarget)===null||dt===void 0||(vt=dt.contains)===null||vt===void 0?void 0:vt.call(dt,lt.target))})}function getTouchList(ft){return ft.type==="touchend"||ft.type==="touchcancel"?ft.changedTouches:ft.targetTouches}function getValueEvent(ft){return isTouch(ft)?getTouchList(ft)[0]:ft}function distanceAngle(ft,lt){const dt=lt.clientX-ft.clientX,vt=lt.clientY-ft.clientY,St=(lt.clientX+ft.clientX)/2,Et=(lt.clientY+ft.clientY)/2,Ct=Math.hypot(dt,vt);return{angle:-(Math.atan2(dt,vt)*180)/Math.PI,distance:Ct,origin:[St,Et]}}function touchIds(ft){return getCurrentTargetTouchList(ft).map(lt=>lt.identifier)}function touchDistanceAngle(ft,lt){const[dt,vt]=Array.from(ft.touches).filter(St=>lt.includes(St.identifier));return distanceAngle(dt,vt)}function pointerId(ft){const lt=getValueEvent(ft);return isTouch(ft)?lt.identifier:lt.pointerId}function pointerValues(ft){const lt=getValueEvent(ft);return[lt.clientX,lt.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(ft){let{deltaX:lt,deltaY:dt,deltaMode:vt}=ft;return vt===1?(lt*=LINE_HEIGHT,dt*=LINE_HEIGHT):vt===2&&(lt*=PAGE_HEIGHT,dt*=PAGE_HEIGHT),[lt,dt]}function scrollValues(ft){var lt,dt;const{scrollX:vt,scrollY:St,scrollLeft:Et,scrollTop:Ct}=ft.currentTarget;return[(lt=vt??Et)!==null&&lt!==void 0?lt:0,(dt=St??Ct)!==null&&dt!==void 0?dt:0]}function getEventDetails(ft){const lt={};if("buttons"in ft&&(lt.buttons=ft.buttons),"shiftKey"in ft){const{shiftKey:dt,altKey:vt,metaKey:St,ctrlKey:Et}=ft;Object.assign(lt,{shiftKey:dt,altKey:vt,metaKey:St,ctrlKey:Et})}return lt}function call(ft,...lt){return typeof ft=="function"?ft(...lt):ft}function noop(){}function chain(...ft){return ft.length===0?noop:ft.length===1?ft[0]:function(){let lt;for(const dt of ft)lt=dt.apply(this,arguments)||lt;return lt}}function assignDefault(ft,lt){return Object.assign({},lt,ft||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(lt,dt,vt){this.ctrl=lt,this.args=dt,this.key=vt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(lt){this.ctrl.state[this.key]=lt}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:lt,shared:dt,ingKey:vt,args:St}=this;dt[vt]=lt._active=lt.active=lt._blocked=lt._force=!1,lt._step=[!1,!1],lt.intentional=!1,lt._movement=[0,0],lt._distance=[0,0],lt._direction=[0,0],lt._delta=[0,0],lt._bounds=[[-1/0,1/0],[-1/0,1/0]],lt.args=St,lt.axis=void 0,lt.memo=void 0,lt.elapsedTime=0,lt.direction=[0,0],lt.distance=[0,0],lt.overflow=[0,0],lt._movementBound=[!1,!1],lt.velocity=[0,0],lt.movement=[0,0],lt.delta=[0,0],lt.timeStamp=0}start(lt){const dt=this.state,vt=this.config;dt._active||(this.reset(),this.computeInitial(),dt._active=!0,dt.target=lt.target,dt.currentTarget=lt.currentTarget,dt.lastOffset=vt.from?call(vt.from,dt):dt.offset,dt.offset=dt.lastOffset),dt.startTime=dt.timeStamp=lt.timeStamp}computeValues(lt){const dt=this.state;dt._values=lt,dt.values=this.config.transform(lt)}computeInitial(){const lt=this.state;lt._initial=lt._values,lt.initial=lt.values}compute(lt){const{state:dt,config:vt,shared:St}=this;dt.args=this.args;let Et=0;if(lt&&(dt.event=lt,vt.preventDefault&&lt.cancelable&&dt.event.preventDefault(),dt.type=lt.type,St.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,St.locked=!!document.pointerLockElement,Object.assign(St,getEventDetails(lt)),St.down=St.pressed=St.buttons%2===1||St.touches>0,Et=lt.timeStamp-dt.timeStamp,dt.timeStamp=lt.timeStamp,dt.elapsedTime=dt.timeStamp-dt.startTime),dt._active){const bn=dt._delta.map(Math.abs);V$1.addTo(dt._distance,bn)}this.axisIntent&&this.axisIntent(lt);const[Ct,At]=dt._movement,[Rt,Dt]=vt.threshold,{_step:Nt,values:Ft}=dt;if(vt.hasCustomTransform?(Nt[0]===!1&&(Nt[0]=Math.abs(Ct)>=Rt&&Ft[0]),Nt[1]===!1&&(Nt[1]=Math.abs(At)>=Dt&&Ft[1])):(Nt[0]===!1&&(Nt[0]=Math.abs(Ct)>=Rt&&Math.sign(Ct)*Rt),Nt[1]===!1&&(Nt[1]=Math.abs(At)>=Dt&&Math.sign(At)*Dt)),dt.intentional=Nt[0]!==!1||Nt[1]!==!1,!dt.intentional)return;const Ut=[0,0];if(vt.hasCustomTransform){const[bn,$n]=Ft;Ut[0]=Nt[0]!==!1?bn-Nt[0]:0,Ut[1]=Nt[1]!==!1?$n-Nt[1]:0}else Ut[0]=Nt[0]!==!1?Ct-Nt[0]:0,Ut[1]=Nt[1]!==!1?At-Nt[1]:0;this.restrictToAxis&&!dt._blocked&&this.restrictToAxis(Ut);const Wt=dt.offset,Zt=dt._active&&!dt._blocked||dt.active;Zt&&(dt.first=dt._active&&!dt.active,dt.last=!dt._active&&dt.active,dt.active=St[this.ingKey]=dt._active,lt&&(dt.first&&("bounds"in vt&&(dt._bounds=call(vt.bounds,dt)),this.setup&&this.setup()),dt.movement=Ut,this.computeOffset()));const[Kt,cn]=dt.offset,[[hn,dn],[pn,gn]]=dt._bounds;dt.overflow=[Kt<hn?-1:Kt>dn?1:0,cn<pn?-1:cn>gn?1:0],dt._movementBound[0]=dt.overflow[0]?dt._movementBound[0]===!1?dt._movement[0]:dt._movementBound[0]:!1,dt._movementBound[1]=dt.overflow[1]?dt._movementBound[1]===!1?dt._movement[1]:dt._movementBound[1]:!1;const vn=dt._active?vt.rubberband||[0,0]:[0,0];if(dt.offset=computeRubberband(dt._bounds,dt.offset,vn),dt.delta=V$1.sub(dt.offset,Wt),this.computeMovement(),Zt&&(!dt.last||Et>BEFORE_LAST_KINEMATICS_DELAY)){dt.delta=V$1.sub(dt.offset,Wt);const bn=dt.delta.map(Math.abs);V$1.addTo(dt.distance,bn),dt.direction=dt.delta.map(Math.sign),dt._direction=dt._delta.map(Math.sign),!dt.first&&Et>0&&(dt.velocity=[bn[0]/Et,bn[1]/Et])}}emit(){const lt=this.state,dt=this.shared,vt=this.config;if(lt._active||this.clean(),(lt._blocked||!lt.intentional)&&!lt._force&&!vt.triggerAllEvents)return;const St=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},dt),lt),{},{[this.aliasKey]:lt.values}));St!==void 0&&(lt.memo=St)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([ft,lt],dt){const vt=Math.abs(ft),St=Math.abs(lt);if(vt>St&&vt>dt)return"x";if(St>vt&&St>dt)return"y"}class CoordinatesEngine extends Engine{constructor(...lt){super(...lt),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent(lt){const dt=this.state,vt=this.config;if(!dt.axis&&lt){const St=typeof vt.axisThreshold=="object"?vt.axisThreshold[getPointerType(lt)]:vt.axisThreshold;dt.axis=selectAxis(dt._movement,St)}dt._blocked=(vt.lockDirection||!!vt.axis)&&!dt.axis||!!vt.axis&&vt.axis!==dt.axis}restrictToAxis(lt){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":lt[1]=0;break;case"y":lt[0]=0;break}}}const identity=ft=>ft,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(ft=!0){return ft},eventOptions(ft,lt,dt){return _objectSpread2(_objectSpread2({},dt.shared.eventOptions),ft)},preventDefault(ft=!1){return ft},triggerAllEvents(ft=!1){return ft},rubberband(ft=0){switch(ft){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(ft)}},from(ft){if(typeof ft=="function")return ft;if(ft!=null)return V$1.toVector(ft)},transform(ft,lt,dt){const vt=ft||dt.shared.transform;return this.hasCustomTransform=!!vt,vt||identity},threshold(ft){return V$1.toVector(ft,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(ft,lt,{axis:dt}){if(this.lockDirection=dt==="lock",!this.lockDirection)return dt},axisThreshold(ft=DEFAULT_AXIS_THRESHOLD){return ft},bounds(ft={}){if(typeof ft=="function")return Et=>coordinatesConfigResolver.bounds(ft(Et));if("current"in ft)return()=>ft.current;if(typeof HTMLElement=="function"&&ft instanceof HTMLElement)return ft;const{left:lt=-1/0,right:dt=1/0,top:vt=-1/0,bottom:St=1/0}=ft;return[[lt,dt],[vt,St]]}}),KEYS_DELTA_MAP={ArrowRight:(ft,lt=1)=>[ft*lt,0],ArrowLeft:(ft,lt=1)=>[-1*ft*lt,0],ArrowUp:(ft,lt=1)=>[0,-1*ft*lt],ArrowDown:(ft,lt=1)=>[0,ft*lt]};class DragEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const lt=this.state;lt._pointerId=void 0,lt._pointerActive=!1,lt._keyboardActive=!1,lt._preventScroll=!1,lt._delayed=!1,lt.swipe=[0,0],lt.tap=!1,lt.canceled=!1,lt.cancel=this.cancel.bind(this)}setup(){const lt=this.state;if(lt._bounds instanceof HTMLElement){const dt=lt._bounds.getBoundingClientRect(),vt=lt.currentTarget.getBoundingClientRect(),St={left:dt.left-vt.left+lt.offset[0],right:dt.right-vt.right+lt.offset[0],top:dt.top-vt.top+lt.offset[1],bottom:dt.bottom-vt.bottom+lt.offset[1]};lt._bounds=coordinatesConfigResolver.bounds(St)}}cancel(){const lt=this.state;lt.canceled||(lt.canceled=!0,lt._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(lt){const dt=this.config,vt=this.state;if(lt.buttons!=null&&(Array.isArray(dt.pointerButtons)?!dt.pointerButtons.includes(lt.buttons):dt.pointerButtons!==-1&&dt.pointerButtons!==lt.buttons))return;const St=this.ctrl.setEventIds(lt);dt.pointerCapture&&lt.target.setPointerCapture(lt.pointerId),!(St&&St.size>1&&vt._pointerActive)&&(this.start(lt),this.setupPointer(lt),vt._pointerId=pointerId(lt),vt._pointerActive=!0,this.computeValues(pointerValues(lt)),this.computeInitial(),dt.preventScrollAxis&&getPointerType(lt)!=="mouse"?(vt._active=!1,this.setupScrollPrevention(lt)):dt.delay>0?(this.setupDelayTrigger(lt),dt.triggerAllEvents&&(this.compute(lt),this.emit())):this.startPointerDrag(lt))}startPointerDrag(lt){const dt=this.state;dt._active=!0,dt._preventScroll=!0,dt._delayed=!1,this.compute(lt),this.emit()}pointerMove(lt){const dt=this.state,vt=this.config;if(!dt._pointerActive||dt.type===lt.type&&lt.timeStamp===dt.timeStamp)return;const St=pointerId(lt);if(dt._pointerId!==void 0&&St!==dt._pointerId)return;const Et=pointerValues(lt);if(document.pointerLockElement===lt.target?dt._delta=[lt.movementX,lt.movementY]:(dt._delta=V$1.sub(Et,dt._values),this.computeValues(Et)),V$1.addTo(dt._movement,dt._delta),this.compute(lt),dt._delayed&&dt.intentional){this.timeoutStore.remove("dragDelay"),dt.active=!1,this.startPointerDrag(lt);return}if(vt.preventScrollAxis&&!dt._preventScroll)if(dt.axis)if(dt.axis===vt.preventScrollAxis||vt.preventScrollAxis==="xy"){dt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(lt);return}else return;this.emit()}pointerUp(lt){this.ctrl.setEventIds(lt);try{this.config.pointerCapture&&lt.target.hasPointerCapture(lt.pointerId)&&lt.target.releasePointerCapture(lt.pointerId)}catch{}const dt=this.state,vt=this.config;if(!dt._active||!dt._pointerActive)return;const St=pointerId(lt);if(dt._pointerId!==void 0&&St!==dt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(lt);const[Et,Ct]=dt._distance;if(dt.tap=Et<=vt.tapsThreshold&&Ct<=vt.tapsThreshold,dt.tap&&vt.filterTaps)dt._force=!0;else{const[At,Rt]=dt.direction,[Dt,Nt]=dt.velocity,[Ft,Ut]=dt.movement,[Wt,Zt]=vt.swipe.velocity,[Kt,cn]=vt.swipe.distance,hn=vt.swipe.duration;dt.elapsedTime<hn&&(Math.abs(Dt)>Wt&&Math.abs(Ft)>Kt&&(dt.swipe[0]=At),Math.abs(Nt)>Zt&&Math.abs(Ut)>cn&&(dt.swipe[1]=Rt))}this.emit()}pointerClick(lt){!this.state.tap&&lt.detail>0&&(lt.preventDefault(),lt.stopPropagation())}setupPointer(lt){const dt=this.config,vt=dt.device;dt.pointerLock&&lt.currentTarget.requestPointerLock(),dt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,vt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(lt){this.state._preventScroll&&lt.cancelable&&lt.preventDefault()}setupScrollPrevention(lt){this.state._preventScroll=!1,persistEvent(lt);const dt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",dt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",dt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,lt)}setupDelayTrigger(lt){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(lt)},this.config.delay)}keyDown(lt){const dt=KEYS_DELTA_MAP[lt.key];if(dt){const vt=this.state,St=lt.shiftKey?10:lt.altKey?.1:1;this.start(lt),vt._delta=dt(this.config.keyboardDisplacement,St),vt._keyboardActive=!0,V$1.addTo(vt._movement,vt._delta),this.compute(lt),this.emit()}}keyUp(lt){lt.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(lt),this.emit())}bind(lt){const dt=this.config.device;lt(dt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(lt(dt,"change",this.pointerMove.bind(this)),lt(dt,"end",this.pointerUp.bind(this)),lt(dt,"cancel",this.pointerUp.bind(this)),lt("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(lt("key","down",this.keyDown.bind(this)),lt("key","up",this.keyUp.bind(this))),this.config.filterTaps&&lt("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(ft){"persist"in ft&&typeof ft.persist=="function"&&ft.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(ft,lt,{pointer:{touch:dt=!1,lock:vt=!1,mouse:St=!1}={}}){return this.pointerLock=vt&&SUPPORT.pointerLock,SUPPORT.touch&&dt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!St?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(ft,lt,{preventScroll:dt}){if(this.preventScrollDelay=typeof dt=="number"?dt:dt||dt===void 0&&ft?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||dt===!1))return ft||(dt!==void 0?"y":void 0)},pointerCapture(ft,lt,{pointer:{capture:dt=!0,buttons:vt=1,keys:St=!0}={}}){return this.pointerButtons=vt,this.keys=St,!this.pointerLock&&this.device==="pointer"&&dt},threshold(ft,lt,{filterTaps:dt=!1,tapsThreshold:vt=3,axis:St=void 0}){const Et=V$1.toVector(ft,dt?vt:St?1:0);return this.filterTaps=dt,this.tapsThreshold=vt,Et},swipe({velocity:ft=DEFAULT_SWIPE_VELOCITY,distance:lt=DEFAULT_SWIPE_DISTANCE,duration:dt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(ft)),distance:this.transform(V$1.toVector(lt)),duration:dt}},delay(ft=0){switch(ft){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return ft}},axisThreshold(ft){return ft?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),ft):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(ft=DEFAULT_KEYBOARD_DISPLACEMENT){return ft}});function clampStateInternalMovementToBounds(ft){const[lt,dt]=ft.overflow,[vt,St]=ft._delta,[Et,Ct]=ft._direction;(lt<0&&vt>0&&Et<0||lt>0&&vt<0&&Et>0)&&(ft._movement[0]=ft._movementBound[0]),(dt<0&&St>0&&Ct<0||dt>0&&St<0&&Ct>0)&&(ft._movement[1]=ft._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const lt=this.state;lt._touchIds=[],lt.canceled=!1,lt.cancel=this.cancel.bind(this),lt.turns=0}computeOffset(){const{type:lt,movement:dt,lastOffset:vt}=this.state;lt==="wheel"?this.state.offset=V$1.add(dt,vt):this.state.offset=[(1+dt[0])*vt[0],dt[1]+vt[1]]}computeMovement(){const{offset:lt,lastOffset:dt}=this.state;this.state.movement=[lt[0]/dt[0],lt[1]-dt[1]]}axisIntent(){const lt=this.state,[dt,vt]=lt._movement;if(!lt.axis){const St=Math.abs(dt)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(vt);St<0?lt.axis="angle":St>0&&(lt.axis="scale")}}restrictToAxis(lt){this.config.lockDirection&&(this.state.axis==="scale"?lt[1]=0:this.state.axis==="angle"&&(lt[0]=0))}cancel(){const lt=this.state;lt.canceled||setTimeout(()=>{lt.canceled=!0,lt._active=!1,this.compute(),this.emit()},0)}touchStart(lt){this.ctrl.setEventIds(lt);const dt=this.state,vt=this.ctrl.touchIds;if(dt._active&&dt._touchIds.every(Et=>vt.has(Et))||vt.size<2)return;this.start(lt),dt._touchIds=Array.from(vt).slice(0,2);const St=touchDistanceAngle(lt,dt._touchIds);this.pinchStart(lt,St)}pointerStart(lt){if(lt.buttons!=null&&lt.buttons%2!==1)return;this.ctrl.setEventIds(lt),lt.target.setPointerCapture(lt.pointerId);const dt=this.state,vt=dt._pointerEvents,St=this.ctrl.pointerIds;if(dt._active&&Array.from(vt.keys()).every(Ct=>St.has(Ct))||(vt.size<2&&vt.set(lt.pointerId,lt),dt._pointerEvents.size<2))return;this.start(lt);const Et=distanceAngle(...Array.from(vt.values()));this.pinchStart(lt,Et)}pinchStart(lt,dt){const vt=this.state;vt.origin=dt.origin,this.computeValues([dt.distance,dt.angle]),this.computeInitial(),this.compute(lt),this.emit()}touchMove(lt){if(!this.state._active)return;const dt=touchDistanceAngle(lt,this.state._touchIds);this.pinchMove(lt,dt)}pointerMove(lt){const dt=this.state._pointerEvents;if(dt.has(lt.pointerId)&&dt.set(lt.pointerId,lt),!this.state._active)return;const vt=distanceAngle(...Array.from(dt.values()));this.pinchMove(lt,vt)}pinchMove(lt,dt){const vt=this.state,St=vt._values[1],Et=dt.angle-St;let Ct=0;Math.abs(Et)>270&&(Ct+=Math.sign(Et)),this.computeValues([dt.distance,dt.angle-360*Ct]),vt.origin=dt.origin,vt.turns=Ct,vt._movement=[vt._values[0]/vt._initial[0]-1,vt._values[1]-vt._initial[1]],this.compute(lt),this.emit()}touchEnd(lt){this.ctrl.setEventIds(lt),this.state._active&&this.state._touchIds.some(dt=>!this.ctrl.touchIds.has(dt))&&(this.state._active=!1,this.compute(lt),this.emit())}pointerEnd(lt){const dt=this.state;this.ctrl.setEventIds(lt);try{lt.target.releasePointerCapture(lt.pointerId)}catch{}dt._pointerEvents.has(lt.pointerId)&&dt._pointerEvents.delete(lt.pointerId),dt._active&&dt._pointerEvents.size<2&&(dt._active=!1,this.compute(lt),this.emit())}gestureStart(lt){lt.cancelable&&lt.preventDefault();const dt=this.state;dt._active||(this.start(lt),this.computeValues([lt.scale,lt.rotation]),dt.origin=[lt.clientX,lt.clientY],this.compute(lt),this.emit())}gestureMove(lt){if(lt.cancelable&&lt.preventDefault(),!this.state._active)return;const dt=this.state;this.computeValues([lt.scale,lt.rotation]),dt.origin=[lt.clientX,lt.clientY];const vt=dt._movement;dt._movement=[lt.scale-1,lt.rotation],dt._delta=V$1.sub(dt._movement,vt),this.compute(lt),this.emit()}gestureEnd(lt){this.state._active&&(this.state._active=!1,this.compute(lt),this.emit())}wheel(lt){const dt=this.config.modifierKey;dt&&!lt[dt]||(this.state._active?this.wheelChange(lt):this.wheelStart(lt),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(lt){this.start(lt),this.wheelChange(lt)}wheelChange(lt){"uv"in lt||lt.cancelable&&lt.preventDefault();const vt=this.state;vt._delta=[-wheelValues(lt)[1]/PINCH_WHEEL_RATIO*vt.offset[0],0],V$1.addTo(vt._movement,vt._delta),clampStateInternalMovementToBounds(vt),this.state.origin=[lt.clientX,lt.clientY],this.compute(lt),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){const dt=this.config.device;dt&&(lt(dt,"start",this[dt+"Start"].bind(this)),lt(dt,"change",this[dt+"Move"].bind(this)),lt(dt,"end",this[dt+"End"].bind(this)),lt(dt,"cancel",this[dt+"End"].bind(this))),this.config.pinchOnWheel&&lt("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(ft,lt,{shared:dt,pointer:{touch:vt=!1}={}}){if(dt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&vt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(ft,lt,{scaleBounds:dt={},angleBounds:vt={}}){const St=Ct=>{const At=assignDefault(call(dt,Ct),{min:-1/0,max:1/0});return[At.min,At.max]},Et=Ct=>{const At=assignDefault(call(vt,Ct),{min:-1/0,max:1/0});return[At.min,At.max]};return typeof dt!="function"&&typeof vt!="function"?[St(),Et()]:Ct=>[St(Ct),Et(Ct)]},threshold(ft,lt,dt){return this.lockDirection=dt.axis==="lock",V$1.toVector(ft,this.lockDirection?[.1,3]:0)},modifierKey(ft){return ft===void 0?"ctrlKey":ft},pinchOnWheel(ft=!0){return ft}});class MoveEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","moving")}move(lt){this.config.mouseOnly&&lt.pointerType!=="mouse"||(this.state._active?this.moveChange(lt):this.moveStart(lt),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(lt){this.start(lt),this.computeValues(pointerValues(lt)),this.compute(lt),this.computeInitial(),this.emit()}moveChange(lt){if(!this.state._active)return;const dt=pointerValues(lt),vt=this.state;vt._delta=V$1.sub(dt,vt._values),V$1.addTo(vt._movement,vt._delta),this.computeValues(dt),this.compute(lt),this.emit()}moveEnd(lt){this.state._active&&(this.state._active=!1,this.compute(lt),this.emit())}bind(lt){lt("pointer","change",this.move.bind(this)),lt("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(ft=!0)=>ft});class ScrollEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","scrolling")}scroll(lt){this.state._active||this.start(lt),this.scrollChange(lt),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(lt){lt.cancelable&&lt.preventDefault();const dt=this.state,vt=scrollValues(lt);dt._delta=V$1.sub(vt,dt._values),V$1.addTo(dt._movement,dt._delta),this.computeValues(vt),this.compute(lt),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){lt("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","wheeling")}wheel(lt){this.state._active||this.start(lt),this.wheelChange(lt),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(lt){const dt=this.state;dt._delta=wheelValues(lt),V$1.addTo(dt._movement,dt._delta),clampStateInternalMovementToBounds(dt),this.compute(lt),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){lt("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","hovering")}enter(lt){this.config.mouseOnly&&lt.pointerType!=="mouse"||(this.start(lt),this.computeValues(pointerValues(lt)),this.compute(lt),this.emit())}leave(lt){if(this.config.mouseOnly&&lt.pointerType!=="mouse")return;const dt=this.state;if(!dt._active)return;dt._active=!1;const vt=pointerValues(lt);dt._movement=dt._delta=V$1.sub(vt,dt._values),this.computeValues(vt),this.compute(lt),dt.delta=dt.movement,this.emit()}bind(lt){lt("pointer","enter",this.enter.bind(this)),lt("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(ft=!0)=>ft}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(ft){EngineMap.set(ft.key,ft.engine),ConfigResolverMap.set(ft.key,ft.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose$1(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),St,Et;for(Et=0;Et<vt.length;Et++)St=vt[Et],!(lt.indexOf(St)>=0)&&(dt[St]=ft[St]);return dt}function _objectWithoutProperties(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$1(ft,lt),vt,St;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(St=0;St<Et.length;St++)vt=Et[St],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}const sharedConfigResolver={target(ft){if(ft)return()=>"current"in ft?ft.current:ft},enabled(ft=!0){return ft},window(ft=SUPPORT.isBrowser?window:void 0){return ft},eventOptions({passive:ft=!0,capture:lt=!1}={}){return{passive:ft,capture:lt}},transform(ft){return ft}},_excluded$1=["target","eventOptions","window","enabled","transform"];function resolveWith(ft={},lt){const dt={};for(const[vt,St]of Object.entries(lt))switch(typeof St){case"function":dt[vt]=St.call(dt,ft[vt],vt,ft);break;case"object":dt[vt]=resolveWith(ft[vt],St);break;case"boolean":St&&(dt[vt]=ft[vt]);break}return dt}function parse(ft,lt,dt={}){const vt=ft,{target:St,eventOptions:Et,window:Ct,enabled:At,transform:Rt}=vt,Dt=_objectWithoutProperties(vt,_excluded$1);if(dt.shared=resolveWith({target:St,eventOptions:Et,window:Ct,enabled:At,transform:Rt},sharedConfigResolver),lt){const Nt=ConfigResolverMap.get(lt);dt[lt]=resolveWith(_objectSpread2({shared:dt.shared},Dt),Nt)}else for(const Nt in Dt){const Ft=ConfigResolverMap.get(Nt);Ft&&(dt[Nt]=resolveWith(_objectSpread2({shared:dt.shared},Dt[Nt]),Ft))}return dt}class EventStore{constructor(lt,dt){_defineProperty$1(this,"_listeners",new Set),this._ctrl=lt,this._gestureKey=dt}add(lt,dt,vt,St,Et){const Ct=this._listeners,At=toDomEventType(dt,vt),Rt=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},Dt=_objectSpread2(_objectSpread2({},Rt),Et);lt.addEventListener(At,St,Dt);const Nt=()=>{lt.removeEventListener(At,St,Dt),Ct.delete(Nt)};return Ct.add(Nt),Nt}clean(){this._listeners.forEach(lt=>lt()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add(lt,dt,vt=140,...St){this.remove(lt),this._timeouts.set(lt,window.setTimeout(dt,vt,...St))}remove(lt){const dt=this._timeouts.get(lt);dt&&window.clearTimeout(dt)}clean(){this._timeouts.forEach(lt=>void window.clearTimeout(lt)),this._timeouts.clear()}}class Controller{constructor(lt){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,lt)}setEventIds(lt){if(isTouch(lt))return this.touchIds=new Set(touchIds(lt)),this.touchIds;if("pointerId"in lt)return lt.type==="pointerup"||lt.type==="pointercancel"?this.pointerIds.delete(lt.pointerId):lt.type==="pointerdown"&&this.pointerIds.add(lt.pointerId),this.pointerIds}applyHandlers(lt,dt){this.handlers=lt,this.nativeHandlers=dt}applyConfig(lt,dt){this.config=parse(lt,dt,this.config)}clean(){this._targetEventStore.clean();for(const lt of this.gestures)this.gestureEventStores[lt].clean(),this.gestureTimeoutStores[lt].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...lt){const dt=this.config.shared,vt={};let St;if(!(dt.target&&(St=dt.target(),!St))){if(dt.enabled){for(const Ct of this.gestures){const At=this.config[Ct],Rt=bindToProps(vt,At.eventOptions,!!St);if(At.enabled){const Dt=EngineMap.get(Ct);new Dt(this,lt,Ct).bind(Rt)}}const Et=bindToProps(vt,dt.eventOptions,!!St);for(const Ct in this.nativeHandlers)Et(Ct,"",At=>this.nativeHandlers[Ct](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:At,args:lt})),void 0,!0)}for(const Et in vt)vt[Et]=chain(...vt[Et]);if(!St)return vt;for(const Et in vt){const{device:Ct,capture:At,passive:Rt}=parseProp(Et);this._targetEventStore.add(St,Ct,"",vt[Et],{capture:At,passive:Rt})}}}}function setupGesture(ft,lt){ft.gestures.add(lt),ft.gestureEventStores[lt]=new EventStore(ft,lt),ft.gestureTimeoutStores[lt]=new TimeoutStore}function resolveGestures(ft,lt){lt.drag&&setupGesture(ft,"drag"),lt.wheel&&setupGesture(ft,"wheel"),lt.scroll&&setupGesture(ft,"scroll"),lt.move&&setupGesture(ft,"move"),lt.pinch&&setupGesture(ft,"pinch"),lt.hover&&setupGesture(ft,"hover")}const bindToProps=(ft,lt,dt)=>(vt,St,Et,Ct={},At=!1)=>{var Rt,Dt;const Nt=(Rt=Ct.capture)!==null&&Rt!==void 0?Rt:lt.capture,Ft=(Dt=Ct.passive)!==null&&Dt!==void 0?Dt:lt.passive;let Ut=At?vt:toHandlerProp(vt,St,Nt);dt&&Ft&&(Ut+="Passive"),ft[Ut]=ft[Ut]||[],ft[Ut].push(Et)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(ft){const lt={},dt={},vt=new Set;for(let St in ft)RE_NOT_NATIVE.test(St)?(vt.add(RegExp.lastMatch),dt[St]=ft[St]):lt[St]=ft[St];return[dt,lt,vt]}function registerGesture(ft,lt,dt,vt,St,Et){if(!ft.has(dt)||!EngineMap.has(vt))return;const Ct=dt+"Start",At=dt+"End",Rt=Dt=>{let Nt;return Dt.first&&Ct in lt&&lt[Ct](Dt),dt in lt&&(Nt=lt[dt](Dt)),Dt.last&&At in lt&&lt[At](Dt),Nt};St[vt]=Rt,Et[vt]=Et[vt]||{}}function parseMergedHandlers(ft,lt){const[dt,vt,St]=sortHandlers(ft),Et={};return registerGesture(St,dt,"onDrag","drag",Et,lt),registerGesture(St,dt,"onWheel","wheel",Et,lt),registerGesture(St,dt,"onScroll","scroll",Et,lt),registerGesture(St,dt,"onPinch","pinch",Et,lt),registerGesture(St,dt,"onMove","move",Et,lt),registerGesture(St,dt,"onHover","hover",Et,lt),{handlers:Et,config:lt,nativeHandlers:vt}}function useRecognizers(ft,lt={},dt,vt){const St=React.useMemo(()=>new Controller(ft),[]);if(St.applyHandlers(ft,vt),St.applyConfig(lt,dt),React.useEffect(St.effect.bind(St)),React.useEffect(()=>St.clean.bind(St),[]),lt.target===void 0)return St.bind.bind(St)}function useDrag(ft,lt){return registerAction(dragAction),useRecognizers({drag:ft},lt||{},"drag")}function createUseGesture(ft){return ft.forEach(registerAction),function(dt,vt){const{handlers:St,nativeHandlers:Et,config:Ct}=parseMergedHandlers(dt,vt||{});return useRecognizers(St,Ct,void 0,Et)}}function useGesture(ft,lt){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(ft,lt||{})}function _typeof(ft){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof(ft)}function _toPrimitive(ft,lt){if(_typeof(ft)!=="object"||ft===null)return ft;var dt=ft[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(ft,lt||"default");if(_typeof(vt)!=="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lt==="string"?String:Number)(ft)}function _toPropertyKey(ft){var lt=_toPrimitive(ft,"string");return _typeof(lt)==="symbol"?lt:String(lt)}function _defineProperty(ft,lt,dt){return lt=_toPropertyKey(lt),lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}let Sky$1=class QE extends Mesh{constructor(){super(new BoxGeometry(1,1,1),QE.material)}};_defineProperty(Sky$1,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});_defineProperty(Sky$1,"material",new ShaderMaterial({name:"SkyShader",fragmentShader:Sky$1.SkyShader.fragmentShader,vertexShader:Sky$1.SkyShader.vertexShader,uniforms:UniformsUtils.clone(Sky$1.SkyShader.uniforms),side:BackSide,depthWrite:!1}));const moduloWrapAround=(ft,lt)=>(ft%lt+lt)%lt;let OrbitControls$1=class extends EventDispatcher{constructor(lt,dt){super(),_defineProperty(this,"object",void 0),_defineProperty(this,"domElement",void 0),_defineProperty(this,"enabled",!0),_defineProperty(this,"target",new Vector3),_defineProperty(this,"minDistance",0),_defineProperty(this,"maxDistance",1/0),_defineProperty(this,"minZoom",0),_defineProperty(this,"maxZoom",1/0),_defineProperty(this,"minPolarAngle",0),_defineProperty(this,"maxPolarAngle",Math.PI),_defineProperty(this,"minAzimuthAngle",-1/0),_defineProperty(this,"maxAzimuthAngle",1/0),_defineProperty(this,"enableDamping",!1),_defineProperty(this,"dampingFactor",.05),_defineProperty(this,"enableZoom",!0),_defineProperty(this,"zoomSpeed",1),_defineProperty(this,"enableRotate",!0),_defineProperty(this,"rotateSpeed",1),_defineProperty(this,"enablePan",!0),_defineProperty(this,"panSpeed",1),_defineProperty(this,"screenSpacePanning",!0),_defineProperty(this,"keyPanSpeed",7),_defineProperty(this,"autoRotate",!1),_defineProperty(this,"autoRotateSpeed",2),_defineProperty(this,"reverseOrbit",!1),_defineProperty(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_defineProperty(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),_defineProperty(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),_defineProperty(this,"target0",void 0),_defineProperty(this,"position0",void 0),_defineProperty(this,"zoom0",void 0),_defineProperty(this,"_domElementKeyEvents",null),_defineProperty(this,"getPolarAngle",void 0),_defineProperty(this,"getAzimuthalAngle",void 0),_defineProperty(this,"setPolarAngle",void 0),_defineProperty(this,"setAzimuthalAngle",void 0),_defineProperty(this,"getDistance",void 0),_defineProperty(this,"listenToKeyEvents",void 0),_defineProperty(this,"saveState",void 0),_defineProperty(this,"reset",void 0),_defineProperty(this,"update",void 0),_defineProperty(this,"connect",void 0),_defineProperty(this,"dispose",void 0),this.object=lt,this.domElement=dt,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>Nt.phi,this.getAzimuthalAngle=()=>Nt.theta,this.setPolarAngle=ur=>{let kr=moduloWrapAround(ur,2*Math.PI),Br=Nt.phi;Br<0&&(Br+=2*Math.PI),kr<0&&(kr+=2*Math.PI);let Rn=Math.abs(kr-Br);2*Math.PI-Rn<Rn&&(kr<Br?kr+=2*Math.PI:Br+=2*Math.PI),Ft.phi=kr-Br,vt.update()},this.setAzimuthalAngle=ur=>{let kr=moduloWrapAround(ur,2*Math.PI),Br=Nt.theta;Br<0&&(Br+=2*Math.PI),kr<0&&(kr+=2*Math.PI);let Rn=Math.abs(kr-Br);2*Math.PI-Rn<Rn&&(kr<Br?kr+=2*Math.PI:Br+=2*Math.PI),Ft.theta=kr-Br,vt.update()},this.getDistance=()=>vt.object.position.distanceTo(vt.target),this.listenToKeyEvents=ur=>{ur.addEventListener("keydown",rr),this._domElementKeyEvents=ur},this.saveState=()=>{vt.target0.copy(vt.target),vt.position0.copy(vt.object.position),vt.zoom0=vt.object instanceof PerspectiveCamera?vt.object.zoom:1},this.reset=()=>{vt.target.copy(vt.target0),vt.object.position.copy(vt.position0),vt.object instanceof PerspectiveCamera&&(vt.object.zoom=vt.zoom0,vt.object.updateProjectionMatrix()),vt.dispatchEvent(St),vt.update(),Rt=At.NONE},this.update=(()=>{const ur=new Vector3,kr=new Quaternion().setFromUnitVectors(lt.up,new Vector3(0,1,0)),Br=kr.clone().invert(),Rn=new Vector3,Xn=new Quaternion,cr=2*Math.PI;return function(){const Kn=vt.object.position;ur.copy(Kn).sub(vt.target),ur.applyQuaternion(kr),Nt.setFromVector3(ur),vt.autoRotate&&Rt===At.NONE&&An(Pn()),vt.enableDamping?(Nt.theta+=Ft.theta*vt.dampingFactor,Nt.phi+=Ft.phi*vt.dampingFactor):(Nt.theta+=Ft.theta,Nt.phi+=Ft.phi);let Cr=vt.minAzimuthAngle,qr=vt.maxAzimuthAngle;return isFinite(Cr)&&isFinite(qr)&&(Cr<-Math.PI?Cr+=cr:Cr>Math.PI&&(Cr-=cr),qr<-Math.PI?qr+=cr:qr>Math.PI&&(qr-=cr),Cr<=qr?Nt.theta=Math.max(Cr,Math.min(qr,Nt.theta)):Nt.theta=Nt.theta>(Cr+qr)/2?Math.max(Cr,Nt.theta):Math.min(qr,Nt.theta)),Nt.phi=Math.max(vt.minPolarAngle,Math.min(vt.maxPolarAngle,Nt.phi)),Nt.makeSafe(),Nt.radius*=Ut,Nt.radius=Math.max(vt.minDistance,Math.min(vt.maxDistance,Nt.radius)),vt.enableDamping===!0?vt.target.addScaledVector(Wt,vt.dampingFactor):vt.target.add(Wt),ur.setFromSpherical(Nt),ur.applyQuaternion(Br),Kn.copy(vt.target).add(ur),vt.object.lookAt(vt.target),vt.enableDamping===!0?(Ft.theta*=1-vt.dampingFactor,Ft.phi*=1-vt.dampingFactor,Wt.multiplyScalar(1-vt.dampingFactor)):(Ft.set(0,0,0),Wt.set(0,0,0)),Ut=1,Zt||Rn.distanceToSquared(vt.object.position)>Dt||8*(1-Xn.dot(vt.object.quaternion))>Dt?(vt.dispatchEvent(St),Rn.copy(vt.object.position),Xn.copy(vt.object.quaternion),Zt=!1,!0):!1}})(),this.connect=ur=>{ur===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),vt.domElement=ur,vt.domElement.style.touchAction="none",vt.domElement.addEventListener("contextmenu",Fr),vt.domElement.addEventListener("pointerdown",Jn),vt.domElement.addEventListener("pointercancel",Sr),vt.domElement.addEventListener("wheel",Wn)},this.dispose=()=>{var ur,kr,Br,Rn,Xn,cr;(ur=vt.domElement)===null||ur===void 0||ur.removeEventListener("contextmenu",Fr),(kr=vt.domElement)===null||kr===void 0||kr.removeEventListener("pointerdown",Jn),(Br=vt.domElement)===null||Br===void 0||Br.removeEventListener("pointercancel",Sr),(Rn=vt.domElement)===null||Rn===void 0||Rn.removeEventListener("wheel",Wn),(Xn=vt.domElement)===null||Xn===void 0||Xn.ownerDocument.removeEventListener("pointermove",Yn),(cr=vt.domElement)===null||cr===void 0||cr.ownerDocument.removeEventListener("pointerup",ar),vt._domElementKeyEvents!==null&&vt._domElementKeyEvents.removeEventListener("keydown",rr)};const vt=this,St={type:"change"},Et={type:"start"},Ct={type:"end"},At={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Rt=At.NONE;const Dt=1e-6,Nt=new Spherical,Ft=new Spherical;let Ut=1;const Wt=new Vector3;let Zt=!1;const Kt=new Vector2,cn=new Vector2,hn=new Vector2,dn=new Vector2,pn=new Vector2,gn=new Vector2,vn=new Vector2,bn=new Vector2,$n=new Vector2,Tn=[],In={};function Pn(){return 2*Math.PI/60/60*vt.autoRotateSpeed}function zn(){return Math.pow(.95,vt.zoomSpeed)}function An(ur){vt.reverseOrbit?Ft.theta+=ur:Ft.theta-=ur}function Gn(ur){vt.reverseOrbit?Ft.phi+=ur:Ft.phi-=ur}const xn=(()=>{const ur=new Vector3;return function(Br,Rn){ur.setFromMatrixColumn(Rn,0),ur.multiplyScalar(-Br),Wt.add(ur)}})(),Qn=(()=>{const ur=new Vector3;return function(Br,Rn){vt.screenSpacePanning===!0?ur.setFromMatrixColumn(Rn,1):(ur.setFromMatrixColumn(Rn,0),ur.crossVectors(vt.object.up,ur)),ur.multiplyScalar(Br),Wt.add(ur)}})(),qn=(()=>{const ur=new Vector3;return function(Br,Rn){const Xn=vt.domElement;if(Xn&&vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera){const cr=vt.object.position;ur.copy(cr).sub(vt.target);let wr=ur.length();wr*=Math.tan(vt.object.fov/2*Math.PI/180),xn(2*Br*wr/Xn.clientHeight,vt.object.matrix),Qn(2*Rn*wr/Xn.clientHeight,vt.object.matrix)}else Xn&&vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(xn(Br*(vt.object.right-vt.object.left)/vt.object.zoom/Xn.clientWidth,vt.object.matrix),Qn(Rn*(vt.object.top-vt.object.bottom)/vt.object.zoom/Xn.clientHeight,vt.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),vt.enablePan=!1)}})();function nr(ur){vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera?Ut/=ur:vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(vt.object.zoom=Math.max(vt.minZoom,Math.min(vt.maxZoom,vt.object.zoom*ur)),vt.object.updateProjectionMatrix(),Zt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),vt.enableZoom=!1)}function Un(ur){vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera?Ut*=ur:vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(vt.object.zoom=Math.max(vt.minZoom,Math.min(vt.maxZoom,vt.object.zoom/ur)),vt.object.updateProjectionMatrix(),Zt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),vt.enableZoom=!1)}function Nn(ur){Kt.set(ur.clientX,ur.clientY)}function jn(ur){vn.set(ur.clientX,ur.clientY)}function Ln(ur){dn.set(ur.clientX,ur.clientY)}function Cn(ur){cn.set(ur.clientX,ur.clientY),hn.subVectors(cn,Kt).multiplyScalar(vt.rotateSpeed);const kr=vt.domElement;kr&&(An(2*Math.PI*hn.x/kr.clientHeight),Gn(2*Math.PI*hn.y/kr.clientHeight)),Kt.copy(cn),vt.update()}function tr(ur){bn.set(ur.clientX,ur.clientY),$n.subVectors(bn,vn),$n.y>0?nr(zn()):$n.y<0&&Un(zn()),vn.copy(bn),vt.update()}function ir(ur){pn.set(ur.clientX,ur.clientY),gn.subVectors(pn,dn).multiplyScalar(vt.panSpeed),qn(gn.x,gn.y),dn.copy(pn),vt.update()}function Zn(ur){ur.deltaY<0?Un(zn()):ur.deltaY>0&&nr(zn()),vt.update()}function br(ur){let kr=!1;switch(ur.code){case vt.keys.UP:qn(0,vt.keyPanSpeed),kr=!0;break;case vt.keys.BOTTOM:qn(0,-vt.keyPanSpeed),kr=!0;break;case vt.keys.LEFT:qn(vt.keyPanSpeed,0),kr=!0;break;case vt.keys.RIGHT:qn(-vt.keyPanSpeed,0),kr=!0;break}kr&&(ur.preventDefault(),vt.update())}function fr(){if(Tn.length==1)Kt.set(Tn[0].pageX,Tn[0].pageY);else{const ur=.5*(Tn[0].pageX+Tn[1].pageX),kr=.5*(Tn[0].pageY+Tn[1].pageY);Kt.set(ur,kr)}}function Or(){if(Tn.length==1)dn.set(Tn[0].pageX,Tn[0].pageY);else{const ur=.5*(Tn[0].pageX+Tn[1].pageX),kr=.5*(Tn[0].pageY+Tn[1].pageY);dn.set(ur,kr)}}function Pr(){const ur=Tn[0].pageX-Tn[1].pageX,kr=Tn[0].pageY-Tn[1].pageY,Br=Math.sqrt(ur*ur+kr*kr);vn.set(0,Br)}function zr(){vt.enableZoom&&Pr(),vt.enablePan&&Or()}function Dr(){vt.enableZoom&&Pr(),vt.enableRotate&&fr()}function _r(ur){if(Tn.length==1)cn.set(ur.pageX,ur.pageY);else{const Br=eo(ur),Rn=.5*(ur.pageX+Br.x),Xn=.5*(ur.pageY+Br.y);cn.set(Rn,Xn)}hn.subVectors(cn,Kt).multiplyScalar(vt.rotateSpeed);const kr=vt.domElement;kr&&(An(2*Math.PI*hn.x/kr.clientHeight),Gn(2*Math.PI*hn.y/kr.clientHeight)),Kt.copy(cn)}function Nr(ur){if(Tn.length==1)pn.set(ur.pageX,ur.pageY);else{const kr=eo(ur),Br=.5*(ur.pageX+kr.x),Rn=.5*(ur.pageY+kr.y);pn.set(Br,Rn)}gn.subVectors(pn,dn).multiplyScalar(vt.panSpeed),qn(gn.x,gn.y),dn.copy(pn)}function Dn(ur){const kr=eo(ur),Br=ur.pageX-kr.x,Rn=ur.pageY-kr.y,Xn=Math.sqrt(Br*Br+Rn*Rn);bn.set(0,Xn),$n.set(0,Math.pow(bn.y/vn.y,vt.zoomSpeed)),nr($n.y),vn.copy(bn)}function yr(ur){vt.enableZoom&&Dn(ur),vt.enablePan&&Nr(ur)}function hr(ur){vt.enableZoom&&Dn(ur),vt.enableRotate&&_r(ur)}function Jn(ur){if(vt.enabled!==!1){if(Tn.length===0){var kr,Br;(kr=vt.domElement)===null||kr===void 0||kr.ownerDocument.addEventListener("pointermove",Yn),(Br=vt.domElement)===null||Br===void 0||Br.ownerDocument.addEventListener("pointerup",ar)}mr(ur),ur.pointerType==="touch"?lr(ur):gr(ur)}}function Yn(ur){vt.enabled!==!1&&(ur.pointerType==="touch"?xr(ur):Vn(ur))}function ar(ur){if(Yr(ur),Tn.length===0){var kr,Br,Rn;(kr=vt.domElement)===null||kr===void 0||kr.releasePointerCapture(ur.pointerId),(Br=vt.domElement)===null||Br===void 0||Br.ownerDocument.removeEventListener("pointermove",Yn),(Rn=vt.domElement)===null||Rn===void 0||Rn.ownerDocument.removeEventListener("pointerup",ar)}vt.dispatchEvent(Ct),Rt=At.NONE}function Sr(ur){Yr(ur)}function gr(ur){let kr;switch(ur.button){case 0:kr=vt.mouseButtons.LEFT;break;case 1:kr=vt.mouseButtons.MIDDLE;break;case 2:kr=vt.mouseButtons.RIGHT;break;default:kr=-1}switch(kr){case MOUSE.DOLLY:if(vt.enableZoom===!1)return;jn(ur),Rt=At.DOLLY;break;case MOUSE.ROTATE:if(ur.ctrlKey||ur.metaKey||ur.shiftKey){if(vt.enablePan===!1)return;Ln(ur),Rt=At.PAN}else{if(vt.enableRotate===!1)return;Nn(ur),Rt=At.ROTATE}break;case MOUSE.PAN:if(ur.ctrlKey||ur.metaKey||ur.shiftKey){if(vt.enableRotate===!1)return;Nn(ur),Rt=At.ROTATE}else{if(vt.enablePan===!1)return;Ln(ur),Rt=At.PAN}break;default:Rt=At.NONE}Rt!==At.NONE&&vt.dispatchEvent(Et)}function Vn(ur){if(vt.enabled!==!1)switch(Rt){case At.ROTATE:if(vt.enableRotate===!1)return;Cn(ur);break;case At.DOLLY:if(vt.enableZoom===!1)return;tr(ur);break;case At.PAN:if(vt.enablePan===!1)return;ir(ur);break}}function Wn(ur){vt.enabled===!1||vt.enableZoom===!1||Rt!==At.NONE&&Rt!==At.ROTATE||(ur.preventDefault(),vt.dispatchEvent(Et),Zn(ur),vt.dispatchEvent(Ct))}function rr(ur){vt.enabled===!1||vt.enablePan===!1||br(ur)}function lr(ur){switch(Vr(ur),Tn.length){case 1:switch(vt.touches.ONE){case TOUCH.ROTATE:if(vt.enableRotate===!1)return;fr(),Rt=At.TOUCH_ROTATE;break;case TOUCH.PAN:if(vt.enablePan===!1)return;Or(),Rt=At.TOUCH_PAN;break;default:Rt=At.NONE}break;case 2:switch(vt.touches.TWO){case TOUCH.DOLLY_PAN:if(vt.enableZoom===!1&&vt.enablePan===!1)return;zr(),Rt=At.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(vt.enableZoom===!1&&vt.enableRotate===!1)return;Dr(),Rt=At.TOUCH_DOLLY_ROTATE;break;default:Rt=At.NONE}break;default:Rt=At.NONE}Rt!==At.NONE&&vt.dispatchEvent(Et)}function xr(ur){switch(Vr(ur),Rt){case At.TOUCH_ROTATE:if(vt.enableRotate===!1)return;_r(ur),vt.update();break;case At.TOUCH_PAN:if(vt.enablePan===!1)return;Nr(ur),vt.update();break;case At.TOUCH_DOLLY_PAN:if(vt.enableZoom===!1&&vt.enablePan===!1)return;yr(ur),vt.update();break;case At.TOUCH_DOLLY_ROTATE:if(vt.enableZoom===!1&&vt.enableRotate===!1)return;hr(ur),vt.update();break;default:Rt=At.NONE}}function Fr(ur){vt.enabled!==!1&&ur.preventDefault()}function mr(ur){Tn.push(ur)}function Yr(ur){delete In[ur.pointerId];for(let kr=0;kr<Tn.length;kr++)if(Tn[kr].pointerId==ur.pointerId){Tn.splice(kr,1);return}}function Vr(ur){let kr=In[ur.pointerId];kr===void 0&&(kr=new Vector2,In[ur.pointerId]=kr),kr.set(ur.pageX,ur.pageY)}function eo(ur){const kr=ur.pointerId===Tn[0].pointerId?Tn[1]:Tn[0];return In[kr.pointerId]}dt!==void 0&&this.connect(dt),this.update()}};class GLTFLoader extends Loader{constructor(lt){super(lt),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(dt){return new GLTFMaterialsClearcoatExtension(dt)}),this.register(function(dt){return new GLTFTextureBasisUExtension(dt)}),this.register(function(dt){return new GLTFTextureWebPExtension(dt)}),this.register(function(dt){return new GLTFMaterialsSheenExtension(dt)}),this.register(function(dt){return new GLTFMaterialsTransmissionExtension(dt)}),this.register(function(dt){return new GLTFMaterialsVolumeExtension(dt)}),this.register(function(dt){return new GLTFMaterialsIorExtension(dt)}),this.register(function(dt){return new GLTFMaterialsEmissiveStrengthExtension(dt)}),this.register(function(dt){return new GLTFMaterialsSpecularExtension(dt)}),this.register(function(dt){return new GLTFMaterialsIridescenceExtension(dt)}),this.register(function(dt){return new GLTFLightsExtension(dt)}),this.register(function(dt){return new GLTFMeshoptCompression(dt)})}load(lt,dt,vt,St){const Et=this;let Ct;this.resourcePath!==""?Ct=this.resourcePath:this.path!==""?Ct=this.path:Ct=LoaderUtils.extractUrlBase(lt),this.manager.itemStart(lt);const At=function(Dt){St?St(Dt):console.error(Dt),Et.manager.itemError(lt),Et.manager.itemEnd(lt)},Rt=new FileLoader(this.manager);Rt.setPath(this.path),Rt.setResponseType("arraybuffer"),Rt.setRequestHeader(this.requestHeader),Rt.setWithCredentials(this.withCredentials),Rt.load(lt,function(Dt){try{Et.parse(Dt,Ct,function(Nt){dt(Nt),Et.manager.itemEnd(lt)},At)}catch(Nt){At(Nt)}},vt,At)}setDRACOLoader(lt){return this.dracoLoader=lt,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(lt){return this.ktx2Loader=lt,this}setMeshoptDecoder(lt){return this.meshoptDecoder=lt,this}register(lt){return this.pluginCallbacks.indexOf(lt)===-1&&this.pluginCallbacks.push(lt),this}unregister(lt){return this.pluginCallbacks.indexOf(lt)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(lt),1),this}parse(lt,dt,vt,St){let Et;const Ct={},At={};if(typeof lt=="string")Et=lt;else if(LoaderUtils.decodeText(new Uint8Array(lt,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{Ct[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(lt)}catch(Ft){St&&St(Ft);return}Et=Ct[EXTENSIONS.KHR_BINARY_GLTF].content}else Et=LoaderUtils.decodeText(new Uint8Array(lt));const Rt=JSON.parse(Et);if(Rt.asset===void 0||Rt.asset.version[0]<2){St&&St(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Dt=new GLTFParser(Rt,{path:dt||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Dt.fileLoader.setRequestHeader(this.requestHeader);for(let Nt=0;Nt<this.pluginCallbacks.length;Nt++){const Ft=this.pluginCallbacks[Nt](Dt);At[Ft.name]=Ft,Ct[Ft.name]=!0}if(Rt.extensionsUsed)for(let Nt=0;Nt<Rt.extensionsUsed.length;++Nt){const Ft=Rt.extensionsUsed[Nt],Ut=Rt.extensionsRequired||[];switch(Ft){case EXTENSIONS.KHR_MATERIALS_UNLIT:Ct[Ft]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Ct[Ft]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:Ct[Ft]=new GLTFDracoMeshCompressionExtension(Rt,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:Ct[Ft]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:Ct[Ft]=new GLTFMeshQuantizationExtension;break;default:Ut.indexOf(Ft)>=0&&At[Ft]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ft+'".')}}Dt.setExtensions(Ct),Dt.setPlugins(At),Dt.parse(vt,St)}parseAsync(lt,dt){const vt=this;return new Promise(function(St,Et){vt.parse(lt,dt,St,Et)})}}function GLTFRegistry(){let ft={};return{get:function(lt){return ft[lt]},add:function(lt,dt){ft[lt]=dt},remove:function(lt){delete ft[lt]},removeAll:function(){ft={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const lt=this.parser,dt=this.parser.json.nodes||[];for(let vt=0,St=dt.length;vt<St;vt++){const Et=dt[vt];Et.extensions&&Et.extensions[this.name]&&Et.extensions[this.name].light!==void 0&&lt._addNodeRef(this.cache,Et.extensions[this.name].light)}}_loadLight(lt){const dt=this.parser,vt="light:"+lt;let St=dt.cache.get(vt);if(St)return St;const Et=dt.json,Rt=((Et.extensions&&Et.extensions[this.name]||{}).lights||[])[lt];let Dt;const Nt=new Color(16777215);Rt.color!==void 0&&Nt.fromArray(Rt.color);const Ft=Rt.range!==void 0?Rt.range:0;switch(Rt.type){case"directional":Dt=new DirectionalLight(Nt),Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;case"point":Dt=new PointLight(Nt),Dt.distance=Ft;break;case"spot":Dt=new SpotLight(Nt),Dt.distance=Ft,Rt.spot=Rt.spot||{},Rt.spot.innerConeAngle=Rt.spot.innerConeAngle!==void 0?Rt.spot.innerConeAngle:0,Rt.spot.outerConeAngle=Rt.spot.outerConeAngle!==void 0?Rt.spot.outerConeAngle:Math.PI/4,Dt.angle=Rt.spot.outerConeAngle,Dt.penumbra=1-Rt.spot.innerConeAngle/Rt.spot.outerConeAngle,Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Rt.type)}return Dt.position.set(0,0,0),Dt.decay=2,Rt.intensity!==void 0&&(Dt.intensity=Rt.intensity),Dt.name=dt.createUniqueName(Rt.name||"light_"+lt),St=Promise.resolve(Dt),dt.cache.add(vt,St),St}createNodeAttachment(lt){const dt=this,vt=this.parser,Et=vt.json.nodes[lt],At=(Et.extensions&&Et.extensions[this.name]||{}).light;return At===void 0?null:this._loadLight(At).then(function(Rt){return vt._getNodeRef(dt.cache,At,Rt)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(lt,dt,vt){const St=[];lt.color=new Color(1,1,1),lt.opacity=1;const Et=dt.pbrMetallicRoughness;if(Et){if(Array.isArray(Et.baseColorFactor)){const Ct=Et.baseColorFactor;lt.color.fromArray(Ct),lt.opacity=Ct[3]}Et.baseColorTexture!==void 0&&St.push(vt.assignTexture(lt,"map",Et.baseColorTexture,sRGBEncoding))}return Promise.all(St)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(lt,dt){const St=this.parser.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=St.extensions[this.name].emissiveStrength;return Et!==void 0&&(dt.emissiveIntensity=Et),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[],Ct=St.extensions[this.name];if(Ct.clearcoatFactor!==void 0&&(dt.clearcoat=Ct.clearcoatFactor),Ct.clearcoatTexture!==void 0&&Et.push(vt.assignTexture(dt,"clearcoatMap",Ct.clearcoatTexture)),Ct.clearcoatRoughnessFactor!==void 0&&(dt.clearcoatRoughness=Ct.clearcoatRoughnessFactor),Ct.clearcoatRoughnessTexture!==void 0&&Et.push(vt.assignTexture(dt,"clearcoatRoughnessMap",Ct.clearcoatRoughnessTexture)),Ct.clearcoatNormalTexture!==void 0&&(Et.push(vt.assignTexture(dt,"clearcoatNormalMap",Ct.clearcoatNormalTexture)),Ct.clearcoatNormalTexture.scale!==void 0)){const At=Ct.clearcoatNormalTexture.scale;dt.clearcoatNormalScale=new Vector2(At,At)}return Promise.all(Et)}}class GLTFMaterialsIridescenceExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[],Ct=St.extensions[this.name];return Ct.iridescenceFactor!==void 0&&(dt.iridescence=Ct.iridescenceFactor),Ct.iridescenceTexture!==void 0&&Et.push(vt.assignTexture(dt,"iridescenceMap",Ct.iridescenceTexture)),Ct.iridescenceIor!==void 0&&(dt.iridescenceIOR=Ct.iridescenceIor),dt.iridescenceThicknessRange===void 0&&(dt.iridescenceThicknessRange=[100,400]),Ct.iridescenceThicknessMinimum!==void 0&&(dt.iridescenceThicknessRange[0]=Ct.iridescenceThicknessMinimum),Ct.iridescenceThicknessMaximum!==void 0&&(dt.iridescenceThicknessRange[1]=Ct.iridescenceThicknessMaximum),Ct.iridescenceThicknessTexture!==void 0&&Et.push(vt.assignTexture(dt,"iridescenceThicknessMap",Ct.iridescenceThicknessTexture)),Promise.all(Et)}}class GLTFMaterialsSheenExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[];dt.sheenColor=new Color(0,0,0),dt.sheenRoughness=0,dt.sheen=1;const Ct=St.extensions[this.name];return Ct.sheenColorFactor!==void 0&&dt.sheenColor.fromArray(Ct.sheenColorFactor),Ct.sheenRoughnessFactor!==void 0&&(dt.sheenRoughness=Ct.sheenRoughnessFactor),Ct.sheenColorTexture!==void 0&&Et.push(vt.assignTexture(dt,"sheenColorMap",Ct.sheenColorTexture,sRGBEncoding)),Ct.sheenRoughnessTexture!==void 0&&Et.push(vt.assignTexture(dt,"sheenRoughnessMap",Ct.sheenRoughnessTexture)),Promise.all(Et)}}class GLTFMaterialsTransmissionExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[],Ct=St.extensions[this.name];return Ct.transmissionFactor!==void 0&&(dt.transmission=Ct.transmissionFactor),Ct.transmissionTexture!==void 0&&Et.push(vt.assignTexture(dt,"transmissionMap",Ct.transmissionTexture)),Promise.all(Et)}}class GLTFMaterialsVolumeExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[],Ct=St.extensions[this.name];dt.thickness=Ct.thicknessFactor!==void 0?Ct.thicknessFactor:0,Ct.thicknessTexture!==void 0&&Et.push(vt.assignTexture(dt,"thicknessMap",Ct.thicknessTexture)),dt.attenuationDistance=Ct.attenuationDistance||1/0;const At=Ct.attenuationColor||[1,1,1];return dt.attenuationColor=new Color(At[0],At[1],At[2]),Promise.all(Et)}}class GLTFMaterialsIorExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const St=this.parser.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=St.extensions[this.name];return dt.ior=Et.ior!==void 0?Et.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,St=vt.json.materials[lt];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Et=[],Ct=St.extensions[this.name];dt.specularIntensity=Ct.specularFactor!==void 0?Ct.specularFactor:1,Ct.specularTexture!==void 0&&Et.push(vt.assignTexture(dt,"specularIntensityMap",Ct.specularTexture));const At=Ct.specularColorFactor||[1,1,1];return dt.specularColor=new Color(At[0],At[1],At[2]),Ct.specularColorTexture!==void 0&&Et.push(vt.assignTexture(dt,"specularColorMap",Ct.specularColorTexture,sRGBEncoding)),Promise.all(Et)}}class GLTFTextureBasisUExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(lt){const dt=this.parser,vt=dt.json,St=vt.textures[lt];if(!St.extensions||!St.extensions[this.name])return null;const Et=St.extensions[this.name],Ct=dt.options.ktx2Loader;if(!Ct){if(vt.extensionsRequired&&vt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return dt.loadTextureImage(lt,Et.source,Ct)}}class GLTFTextureWebPExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(lt){const dt=this.name,vt=this.parser,St=vt.json,Et=St.textures[lt];if(!Et.extensions||!Et.extensions[dt])return null;const Ct=Et.extensions[dt],At=St.images[Ct.source];let Rt=vt.textureLoader;if(At.uri){const Dt=vt.options.manager.getHandler(At.uri);Dt!==null&&(Rt=Dt)}return this.detectSupport().then(function(Dt){if(Dt)return vt.loadTextureImage(lt,Ct.source,Rt);if(St.extensionsRequired&&St.extensionsRequired.indexOf(dt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return vt.loadTexture(lt)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(lt){const dt=new Image;dt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",dt.onload=dt.onerror=function(){lt(dt.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(lt){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=lt}loadBufferView(lt){const dt=this.parser.json,vt=dt.bufferViews[lt];if(vt.extensions&&vt.extensions[this.name]){const St=vt.extensions[this.name],Et=this.parser.getDependency("buffer",St.buffer),Ct=this.parser.options.meshoptDecoder;if(!Ct||!Ct.supported){if(dt.extensionsRequired&&dt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Et.then(function(At){const Rt=St.byteOffset||0,Dt=St.byteLength||0,Nt=St.count,Ft=St.byteStride,Ut=new Uint8Array(At,Rt,Dt);return Ct.decodeGltfBufferAsync?Ct.decodeGltfBufferAsync(Nt,Ft,Ut,St.mode,St.filter).then(function(Wt){return Wt.buffer}):Ct.ready.then(function(){const Wt=new ArrayBuffer(Nt*Ft);return Ct.decodeGltfBuffer(new Uint8Array(Wt),Nt,Ft,Ut,St.mode,St.filter),Wt})})}else return null}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(lt){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const dt=new DataView(lt,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(lt.slice(0,4))),version:dt.getUint32(4,!0),length:dt.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const vt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,St=new DataView(lt,BINARY_EXTENSION_HEADER_LENGTH);let Et=0;for(;Et<vt;){const Ct=St.getUint32(Et,!0);Et+=4;const At=St.getUint32(Et,!0);if(Et+=4,At===BINARY_EXTENSION_CHUNK_TYPES.JSON){const Rt=new Uint8Array(lt,BINARY_EXTENSION_HEADER_LENGTH+Et,Ct);this.content=LoaderUtils.decodeText(Rt)}else if(At===BINARY_EXTENSION_CHUNK_TYPES.BIN){const Rt=BINARY_EXTENSION_HEADER_LENGTH+Et;this.body=lt.slice(Rt,Rt+Ct)}Et+=Ct}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(lt,dt){if(!dt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=lt,this.dracoLoader=dt,this.dracoLoader.preload()}decodePrimitive(lt,dt){const vt=this.json,St=this.dracoLoader,Et=lt.extensions[this.name].bufferView,Ct=lt.extensions[this.name].attributes,At={},Rt={},Dt={};for(const Nt in Ct){const Ft=ATTRIBUTES[Nt]||Nt.toLowerCase();At[Ft]=Ct[Nt]}for(const Nt in lt.attributes){const Ft=ATTRIBUTES[Nt]||Nt.toLowerCase();if(Ct[Nt]!==void 0){const Ut=vt.accessors[lt.attributes[Nt]],Wt=WEBGL_COMPONENT_TYPES[Ut.componentType];Dt[Ft]=Wt.name,Rt[Ft]=Ut.normalized===!0}}return dt.getDependency("bufferView",Et).then(function(Nt){return new Promise(function(Ft){St.decodeDracoFile(Nt,function(Ut){for(const Wt in Ut.attributes){const Zt=Ut.attributes[Wt],Kt=Rt[Wt];Kt!==void 0&&(Zt.normalized=Kt)}Ft(Ut)},At,Dt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(lt,dt){return dt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),dt.offset===void 0&&dt.rotation===void 0&&dt.scale===void 0||(lt=lt.clone(),dt.offset!==void 0&&lt.offset.fromArray(dt.offset),dt.rotation!==void 0&&(lt.rotation=dt.rotation),dt.scale!==void 0&&lt.repeat.fromArray(dt.scale),lt.needsUpdate=!0),lt}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor(lt){super(),this.isGLTFSpecularGlossinessMaterial=!0;const dt=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),vt=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),St=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Et=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Ct=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),At={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=At,this.onBeforeCompile=function(Rt){for(const Dt in At)Rt.uniforms[Dt]=At[Dt];Rt.fragmentShader=Rt.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",dt).replace("#include <metalnessmap_pars_fragment>",vt).replace("#include <roughnessmap_fragment>",St).replace("#include <metalnessmap_fragment>",Et).replace("#include <lights_physical_fragment>",Ct)},Object.defineProperties(this,{specular:{get:function(){return At.specular.value},set:function(Rt){At.specular.value=Rt}},specularMap:{get:function(){return At.specularMap.value},set:function(Rt){At.specularMap.value=Rt,Rt?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return At.glossiness.value},set:function(Rt){At.glossiness.value=Rt}},glossinessMap:{get:function(){return At.glossinessMap.value},set:function(Rt){At.glossinessMap.value=Rt,Rt?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(lt)}copy(lt){return super.copy(lt),this.specularMap=lt.specularMap,this.specular.copy(lt.specular),this.glossinessMap=lt.glossinessMap,this.glossiness=lt.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(lt,dt,vt){const St=dt.extensions[this.name];lt.color=new Color(1,1,1),lt.opacity=1;const Et=[];if(Array.isArray(St.diffuseFactor)){const Ct=St.diffuseFactor;lt.color.fromArray(Ct),lt.opacity=Ct[3]}if(St.diffuseTexture!==void 0&&Et.push(vt.assignTexture(lt,"map",St.diffuseTexture,sRGBEncoding)),lt.emissive=new Color(0,0,0),lt.glossiness=St.glossinessFactor!==void 0?St.glossinessFactor:1,lt.specular=new Color(1,1,1),Array.isArray(St.specularFactor)&&lt.specular.fromArray(St.specularFactor),St.specularGlossinessTexture!==void 0){const Ct=St.specularGlossinessTexture;Et.push(vt.assignTexture(lt,"glossinessMap",Ct)),Et.push(vt.assignTexture(lt,"specularMap",Ct,sRGBEncoding))}return Promise.all(Et)}createMaterial(lt){const dt=new GLTFMeshStandardSGMaterial(lt);return dt.fog=!0,dt.color=lt.color,dt.map=lt.map===void 0?null:lt.map,dt.lightMap=null,dt.lightMapIntensity=1,dt.aoMap=lt.aoMap===void 0?null:lt.aoMap,dt.aoMapIntensity=1,dt.emissive=lt.emissive,dt.emissiveIntensity=lt.emissiveIntensity===void 0?1:lt.emissiveIntensity,dt.emissiveMap=lt.emissiveMap===void 0?null:lt.emissiveMap,dt.bumpMap=lt.bumpMap===void 0?null:lt.bumpMap,dt.bumpScale=1,dt.normalMap=lt.normalMap===void 0?null:lt.normalMap,dt.normalMapType=TangentSpaceNormalMap,lt.normalScale&&(dt.normalScale=lt.normalScale),dt.displacementMap=null,dt.displacementScale=1,dt.displacementBias=0,dt.specularMap=lt.specularMap===void 0?null:lt.specularMap,dt.specular=lt.specular,dt.glossinessMap=lt.glossinessMap===void 0?null:lt.glossinessMap,dt.glossiness=lt.glossiness,dt.alphaMap=null,dt.envMap=lt.envMap===void 0?null:lt.envMap,dt.envMapIntensity=1,dt.refractionRatio=.98,dt}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(lt,dt,vt,St){super(lt,dt,vt,St)}copySampleValue_(lt){const dt=this.resultBuffer,vt=this.sampleValues,St=this.valueSize,Et=lt*St*3+St;for(let Ct=0;Ct!==St;Ct++)dt[Ct]=vt[Et+Ct];return dt}interpolate_(lt,dt,vt,St){const Et=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=At*2,Dt=At*3,Nt=St-dt,Ft=(vt-dt)/Nt,Ut=Ft*Ft,Wt=Ut*Ft,Zt=lt*Dt,Kt=Zt-Dt,cn=-2*Wt+3*Ut,hn=Wt-Ut,dn=1-cn,pn=hn-Ut+Ft;for(let gn=0;gn!==At;gn++){const vn=Ct[Kt+gn+At],bn=Ct[Kt+gn+Rt]*Nt,$n=Ct[Zt+gn+At],Tn=Ct[Zt+gn]*Nt;Et[gn]=dn*vn+pn*bn+cn*$n+hn*Tn}return Et}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(lt,dt,vt,St){const Et=super.interpolate_(lt,dt,vt,St);return _q.fromArray(Et).normalize().toArray(Et),Et}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(ft){return ft.DefaultMaterial===void 0&&(ft.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),ft.DefaultMaterial}function addUnknownExtensionsToUserData(ft,lt,dt){for(const vt in dt.extensions)ft[vt]===void 0&&(lt.userData.gltfExtensions=lt.userData.gltfExtensions||{},lt.userData.gltfExtensions[vt]=dt.extensions[vt])}function assignExtrasToUserData(ft,lt){lt.extras!==void 0&&(typeof lt.extras=="object"?Object.assign(ft.userData,lt.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+lt.extras))}function addMorphTargets(ft,lt,dt){let vt=!1,St=!1,Et=!1;for(let Dt=0,Nt=lt.length;Dt<Nt;Dt++){const Ft=lt[Dt];if(Ft.POSITION!==void 0&&(vt=!0),Ft.NORMAL!==void 0&&(St=!0),Ft.COLOR_0!==void 0&&(Et=!0),vt&&St&&Et)break}if(!vt&&!St&&!Et)return Promise.resolve(ft);const Ct=[],At=[],Rt=[];for(let Dt=0,Nt=lt.length;Dt<Nt;Dt++){const Ft=lt[Dt];if(vt){const Ut=Ft.POSITION!==void 0?dt.getDependency("accessor",Ft.POSITION):ft.attributes.position;Ct.push(Ut)}if(St){const Ut=Ft.NORMAL!==void 0?dt.getDependency("accessor",Ft.NORMAL):ft.attributes.normal;At.push(Ut)}if(Et){const Ut=Ft.COLOR_0!==void 0?dt.getDependency("accessor",Ft.COLOR_0):ft.attributes.color;Rt.push(Ut)}}return Promise.all([Promise.all(Ct),Promise.all(At),Promise.all(Rt)]).then(function(Dt){const Nt=Dt[0],Ft=Dt[1],Ut=Dt[2];return vt&&(ft.morphAttributes.position=Nt),St&&(ft.morphAttributes.normal=Ft),Et&&(ft.morphAttributes.color=Ut),ft.morphTargetsRelative=!0,ft})}function updateMorphTargets(ft,lt){if(ft.updateMorphTargets(),lt.weights!==void 0)for(let dt=0,vt=lt.weights.length;dt<vt;dt++)ft.morphTargetInfluences[dt]=lt.weights[dt];if(lt.extras&&Array.isArray(lt.extras.targetNames)){const dt=lt.extras.targetNames;if(ft.morphTargetInfluences.length===dt.length){ft.morphTargetDictionary={};for(let vt=0,St=dt.length;vt<St;vt++)ft.morphTargetDictionary[dt[vt]]=vt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(ft){const lt=ft.extensions&&ft.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let dt;return lt?dt="draco:"+lt.bufferView+":"+lt.indices+":"+createAttributesKey(lt.attributes):dt=ft.indices+":"+createAttributesKey(ft.attributes)+":"+ft.mode,dt}function createAttributesKey(ft){let lt="";const dt=Object.keys(ft).sort();for(let vt=0,St=dt.length;vt<St;vt++)lt+=dt[vt]+":"+ft[dt[vt]]+";";return lt}function getNormalizedComponentScale(ft){switch(ft){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(ft){return ft.search(/\.jpe?g($|\?)/i)>0||ft.search(/^data\:image\/jpeg/)===0?"image/jpeg":ft.search(/\.webp($|\?)/i)>0||ft.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class GLTFParser{constructor(lt={},dt={}){var vt,St;this.json=lt,this.extensions={},this.plugins={},this.options=dt,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const Et=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Ct=typeof navigator<"u"&&((vt=navigator.userAgent)===null||vt===void 0?void 0:vt.indexOf("Firefox"))>-1,At=typeof navigator<"u"&&Ct?(St=navigator.userAgent)===null||St===void 0?void 0:St.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||Et||Ct&&At<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(lt){this.extensions=lt}setPlugins(lt){this.plugins=lt}parse(lt,dt){const vt=this,St=this.json,Et=this.extensions;this.cache.removeAll(),this._invokeAll(function(Ct){return Ct._markDefs&&Ct._markDefs()}),Promise.all(this._invokeAll(function(Ct){return Ct.beforeRoot&&Ct.beforeRoot()})).then(function(){return Promise.all([vt.getDependencies("scene"),vt.getDependencies("animation"),vt.getDependencies("camera")])}).then(function(Ct){const At={scene:Ct[0][St.scene||0],scenes:Ct[0],animations:Ct[1],cameras:Ct[2],asset:St.asset,parser:vt,userData:{}};addUnknownExtensionsToUserData(Et,At,St),assignExtrasToUserData(At,St),Promise.all(vt._invokeAll(function(Rt){return Rt.afterRoot&&Rt.afterRoot(At)})).then(function(){lt(At)})}).catch(dt)}_markDefs(){const lt=this.json.nodes||[],dt=this.json.skins||[],vt=this.json.meshes||[];for(let St=0,Et=dt.length;St<Et;St++){const Ct=dt[St].joints;for(let At=0,Rt=Ct.length;At<Rt;At++)lt[Ct[At]].isBone=!0}for(let St=0,Et=lt.length;St<Et;St++){const Ct=lt[St];Ct.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ct.mesh),Ct.skin!==void 0&&(vt[Ct.mesh].isSkinnedMesh=!0)),Ct.camera!==void 0&&this._addNodeRef(this.cameraCache,Ct.camera)}}_addNodeRef(lt,dt){dt!==void 0&&(lt.refs[dt]===void 0&&(lt.refs[dt]=lt.uses[dt]=0),lt.refs[dt]++)}_getNodeRef(lt,dt,vt){if(lt.refs[dt]<=1)return vt;const St=vt.clone(),Et=(Ct,At)=>{const Rt=this.associations.get(Ct);Rt!=null&&this.associations.set(At,Rt);for(const[Dt,Nt]of Ct.children.entries())Et(Nt,At.children[Dt])};return Et(vt,St),St.name+="_instance_"+lt.uses[dt]++,St}_invokeOne(lt){const dt=Object.values(this.plugins);dt.push(this);for(let vt=0;vt<dt.length;vt++){const St=lt(dt[vt]);if(St)return St}return null}_invokeAll(lt){const dt=Object.values(this.plugins);dt.unshift(this);const vt=[];for(let St=0;St<dt.length;St++){const Et=lt(dt[St]);Et&&vt.push(Et)}return vt}getDependency(lt,dt){const vt=lt+":"+dt;let St=this.cache.get(vt);if(!St){switch(lt){case"scene":St=this.loadScene(dt);break;case"node":St=this.loadNode(dt);break;case"mesh":St=this._invokeOne(function(Et){return Et.loadMesh&&Et.loadMesh(dt)});break;case"accessor":St=this.loadAccessor(dt);break;case"bufferView":St=this._invokeOne(function(Et){return Et.loadBufferView&&Et.loadBufferView(dt)});break;case"buffer":St=this.loadBuffer(dt);break;case"material":St=this._invokeOne(function(Et){return Et.loadMaterial&&Et.loadMaterial(dt)});break;case"texture":St=this._invokeOne(function(Et){return Et.loadTexture&&Et.loadTexture(dt)});break;case"skin":St=this.loadSkin(dt);break;case"animation":St=this._invokeOne(function(Et){return Et.loadAnimation&&Et.loadAnimation(dt)});break;case"camera":St=this.loadCamera(dt);break;default:throw new Error("Unknown type: "+lt)}this.cache.add(vt,St)}return St}getDependencies(lt){let dt=this.cache.get(lt);if(!dt){const vt=this,St=this.json[lt+(lt==="mesh"?"es":"s")]||[];dt=Promise.all(St.map(function(Et,Ct){return vt.getDependency(lt,Ct)})),this.cache.add(lt,dt)}return dt}loadBuffer(lt){const dt=this.json.buffers[lt],vt=this.fileLoader;if(dt.type&&dt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+dt.type+" buffer type is not supported.");if(dt.uri===void 0&&lt===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const St=this.options;return new Promise(function(Et,Ct){vt.load(LoaderUtils.resolveURL(dt.uri,St.path),Et,void 0,function(){Ct(new Error('THREE.GLTFLoader: Failed to load buffer "'+dt.uri+'".'))})})}loadBufferView(lt){const dt=this.json.bufferViews[lt];return this.getDependency("buffer",dt.buffer).then(function(vt){const St=dt.byteLength||0,Et=dt.byteOffset||0;return vt.slice(Et,Et+St)})}loadAccessor(lt){const dt=this,vt=this.json,St=this.json.accessors[lt];if(St.bufferView===void 0&&St.sparse===void 0)return Promise.resolve(null);const Et=[];return St.bufferView!==void 0?Et.push(this.getDependency("bufferView",St.bufferView)):Et.push(null),St.sparse!==void 0&&(Et.push(this.getDependency("bufferView",St.sparse.indices.bufferView)),Et.push(this.getDependency("bufferView",St.sparse.values.bufferView))),Promise.all(Et).then(function(Ct){const At=Ct[0],Rt=WEBGL_TYPE_SIZES[St.type],Dt=WEBGL_COMPONENT_TYPES[St.componentType],Nt=Dt.BYTES_PER_ELEMENT,Ft=Nt*Rt,Ut=St.byteOffset||0,Wt=St.bufferView!==void 0?vt.bufferViews[St.bufferView].byteStride:void 0,Zt=St.normalized===!0;let Kt,cn;if(Wt&&Wt!==Ft){const hn=Math.floor(Ut/Wt),dn="InterleavedBuffer:"+St.bufferView+":"+St.componentType+":"+hn+":"+St.count;let pn=dt.cache.get(dn);pn||(Kt=new Dt(At,hn*Wt,St.count*Wt/Nt),pn=new InterleavedBuffer(Kt,Wt/Nt),dt.cache.add(dn,pn)),cn=new InterleavedBufferAttribute(pn,Rt,Ut%Wt/Nt,Zt)}else At===null?Kt=new Dt(St.count*Rt):Kt=new Dt(At,Ut,St.count*Rt),cn=new BufferAttribute(Kt,Rt,Zt);if(St.sparse!==void 0){const hn=WEBGL_TYPE_SIZES.SCALAR,dn=WEBGL_COMPONENT_TYPES[St.sparse.indices.componentType],pn=St.sparse.indices.byteOffset||0,gn=St.sparse.values.byteOffset||0,vn=new dn(Ct[1],pn,St.sparse.count*hn),bn=new Dt(Ct[2],gn,St.sparse.count*Rt);At!==null&&(cn=new BufferAttribute(cn.array.slice(),cn.itemSize,cn.normalized));for(let $n=0,Tn=vn.length;$n<Tn;$n++){const In=vn[$n];if(cn.setX(In,bn[$n*Rt]),Rt>=2&&cn.setY(In,bn[$n*Rt+1]),Rt>=3&&cn.setZ(In,bn[$n*Rt+2]),Rt>=4&&cn.setW(In,bn[$n*Rt+3]),Rt>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return cn})}loadTexture(lt){const dt=this.json,vt=this.options,Et=dt.textures[lt].source,Ct=dt.images[Et];let At=this.textureLoader;if(Ct.uri){const Rt=vt.manager.getHandler(Ct.uri);Rt!==null&&(At=Rt)}return this.loadTextureImage(lt,Et,At)}loadTextureImage(lt,dt,vt){const St=this,Et=this.json,Ct=Et.textures[lt],At=Et.images[dt],Rt=(At.uri||At.bufferView)+":"+Ct.sampler;if(this.textureCache[Rt])return this.textureCache[Rt];const Dt=this.loadImageSource(dt,vt).then(function(Nt){Nt.flipY=!1,Ct.name&&(Nt.name=Ct.name);const Ut=(Et.samplers||{})[Ct.sampler]||{};return Nt.magFilter=WEBGL_FILTERS[Ut.magFilter]||LinearFilter,Nt.minFilter=WEBGL_FILTERS[Ut.minFilter]||LinearMipmapLinearFilter,Nt.wrapS=WEBGL_WRAPPINGS[Ut.wrapS]||RepeatWrapping,Nt.wrapT=WEBGL_WRAPPINGS[Ut.wrapT]||RepeatWrapping,St.associations.set(Nt,{textures:lt}),Nt}).catch(function(){return null});return this.textureCache[Rt]=Dt,Dt}loadImageSource(lt,dt){const vt=this,St=this.json,Et=this.options;if(this.sourceCache[lt]!==void 0)return this.sourceCache[lt].then(Ft=>Ft.clone());const Ct=St.images[lt],At=self.URL||self.webkitURL;let Rt=Ct.uri||"",Dt=!1;if(Ct.bufferView!==void 0)Rt=vt.getDependency("bufferView",Ct.bufferView).then(function(Ft){Dt=!0;const Ut=new Blob([Ft],{type:Ct.mimeType});return Rt=At.createObjectURL(Ut),Rt});else if(Ct.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+lt+" is missing URI and bufferView");const Nt=Promise.resolve(Rt).then(function(Ft){return new Promise(function(Ut,Wt){let Zt=Ut;dt.isImageBitmapLoader===!0&&(Zt=function(Kt){const cn=new Texture(Kt);cn.needsUpdate=!0,Ut(cn)}),dt.load(LoaderUtils.resolveURL(Ft,Et.path),Zt,void 0,Wt)})}).then(function(Ft){return Dt===!0&&At.revokeObjectURL(Rt),Ft.userData.mimeType=Ct.mimeType||getImageURIMimeType(Ct.uri),Ft}).catch(function(Ft){throw console.error("THREE.GLTFLoader: Couldn't load texture",Rt),Ft});return this.sourceCache[lt]=Nt,Nt}assignTexture(lt,dt,vt,St){const Et=this;return this.getDependency("texture",vt.index).then(function(Ct){if(vt.texCoord!==void 0&&vt.texCoord!=0&&!(dt==="aoMap"&&vt.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+vt.texCoord+" for texture "+dt+" not yet supported."),Et.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const At=vt.extensions!==void 0?vt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(At){const Rt=Et.associations.get(Ct);Ct=Et.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(Ct,At),Et.associations.set(Ct,Rt)}}return St!==void 0&&(Ct.encoding=St),lt[dt]=Ct,Ct})}assignFinalMaterial(lt){const dt=lt.geometry;let vt=lt.material;const St=dt.attributes.tangent===void 0,Et=dt.attributes.color!==void 0,Ct=dt.attributes.normal===void 0;if(lt.isPoints){const At="PointsMaterial:"+vt.uuid;let Rt=this.cache.get(At);Rt||(Rt=new PointsMaterial,Material.prototype.copy.call(Rt,vt),Rt.color.copy(vt.color),Rt.map=vt.map,Rt.sizeAttenuation=!1,this.cache.add(At,Rt)),vt=Rt}else if(lt.isLine){const At="LineBasicMaterial:"+vt.uuid;let Rt=this.cache.get(At);Rt||(Rt=new LineBasicMaterial,Material.prototype.copy.call(Rt,vt),Rt.color.copy(vt.color),this.cache.add(At,Rt)),vt=Rt}if(St||Et||Ct){let At="ClonedMaterial:"+vt.uuid+":";vt.isGLTFSpecularGlossinessMaterial&&(At+="specular-glossiness:"),St&&(At+="derivative-tangents:"),Et&&(At+="vertex-colors:"),Ct&&(At+="flat-shading:");let Rt=this.cache.get(At);Rt||(Rt=vt.clone(),Et&&(Rt.vertexColors=!0),Ct&&(Rt.flatShading=!0),St&&(Rt.normalScale&&(Rt.normalScale.y*=-1),Rt.clearcoatNormalScale&&(Rt.clearcoatNormalScale.y*=-1)),this.cache.add(At,Rt),this.associations.set(Rt,this.associations.get(vt))),vt=Rt}vt.aoMap&&dt.attributes.uv2===void 0&&dt.attributes.uv!==void 0&&dt.setAttribute("uv2",dt.attributes.uv),lt.material=vt}getMaterialType(){return MeshStandardMaterial}loadMaterial(lt){const dt=this,vt=this.json,St=this.extensions,Et=vt.materials[lt];let Ct;const At={},Rt=Et.extensions||{},Dt=[];if(Rt[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const Ft=St[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Ct=Ft.getMaterialType(),Dt.push(Ft.extendParams(At,Et,dt))}else if(Rt[EXTENSIONS.KHR_MATERIALS_UNLIT]){const Ft=St[EXTENSIONS.KHR_MATERIALS_UNLIT];Ct=Ft.getMaterialType(),Dt.push(Ft.extendParams(At,Et,dt))}else{const Ft=Et.pbrMetallicRoughness||{};if(At.color=new Color(1,1,1),At.opacity=1,Array.isArray(Ft.baseColorFactor)){const Ut=Ft.baseColorFactor;At.color.fromArray(Ut),At.opacity=Ut[3]}Ft.baseColorTexture!==void 0&&Dt.push(dt.assignTexture(At,"map",Ft.baseColorTexture,sRGBEncoding)),At.metalness=Ft.metallicFactor!==void 0?Ft.metallicFactor:1,At.roughness=Ft.roughnessFactor!==void 0?Ft.roughnessFactor:1,Ft.metallicRoughnessTexture!==void 0&&(Dt.push(dt.assignTexture(At,"metalnessMap",Ft.metallicRoughnessTexture)),Dt.push(dt.assignTexture(At,"roughnessMap",Ft.metallicRoughnessTexture))),Ct=this._invokeOne(function(Ut){return Ut.getMaterialType&&Ut.getMaterialType(lt)}),Dt.push(Promise.all(this._invokeAll(function(Ut){return Ut.extendMaterialParams&&Ut.extendMaterialParams(lt,At)})))}Et.doubleSided===!0&&(At.side=DoubleSide);const Nt=Et.alphaMode||ALPHA_MODES.OPAQUE;if(Nt===ALPHA_MODES.BLEND?(At.transparent=!0,At.depthWrite=!1):(At.transparent=!1,Nt===ALPHA_MODES.MASK&&(At.alphaTest=Et.alphaCutoff!==void 0?Et.alphaCutoff:.5)),Et.normalTexture!==void 0&&Ct!==MeshBasicMaterial&&(Dt.push(dt.assignTexture(At,"normalMap",Et.normalTexture)),At.normalScale=new Vector2(1,1),Et.normalTexture.scale!==void 0)){const Ft=Et.normalTexture.scale;At.normalScale.set(Ft,Ft)}return Et.occlusionTexture!==void 0&&Ct!==MeshBasicMaterial&&(Dt.push(dt.assignTexture(At,"aoMap",Et.occlusionTexture)),Et.occlusionTexture.strength!==void 0&&(At.aoMapIntensity=Et.occlusionTexture.strength)),Et.emissiveFactor!==void 0&&Ct!==MeshBasicMaterial&&(At.emissive=new Color().fromArray(Et.emissiveFactor)),Et.emissiveTexture!==void 0&&Ct!==MeshBasicMaterial&&Dt.push(dt.assignTexture(At,"emissiveMap",Et.emissiveTexture,sRGBEncoding)),Promise.all(Dt).then(function(){let Ft;return Ct===GLTFMeshStandardSGMaterial?Ft=St[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(At):Ft=new Ct(At),Et.name&&(Ft.name=Et.name),assignExtrasToUserData(Ft,Et),dt.associations.set(Ft,{materials:lt}),Et.extensions&&addUnknownExtensionsToUserData(St,Ft,Et),Ft})}createUniqueName(lt){const dt=PropertyBinding.sanitizeNodeName(lt||"");let vt=dt;for(let St=1;this.nodeNamesUsed[vt];++St)vt=dt+"_"+St;return this.nodeNamesUsed[vt]=!0,vt}loadGeometries(lt){const dt=this,vt=this.extensions,St=this.primitiveCache;function Et(At){return vt[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(At,dt).then(function(Rt){return addPrimitiveAttributes(Rt,At,dt)})}const Ct=[];for(let At=0,Rt=lt.length;At<Rt;At++){const Dt=lt[At],Nt=createPrimitiveKey(Dt),Ft=St[Nt];if(Ft)Ct.push(Ft.promise);else{let Ut;Dt.extensions&&Dt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Ut=Et(Dt):Ut=addPrimitiveAttributes(new BufferGeometry,Dt,dt),St[Nt]={primitive:Dt,promise:Ut},Ct.push(Ut)}}return Promise.all(Ct)}loadMesh(lt){const dt=this,vt=this.json,St=this.extensions,Et=vt.meshes[lt],Ct=Et.primitives,At=[];for(let Rt=0,Dt=Ct.length;Rt<Dt;Rt++){const Nt=Ct[Rt].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",Ct[Rt].material);At.push(Nt)}return At.push(dt.loadGeometries(Ct)),Promise.all(At).then(function(Rt){const Dt=Rt.slice(0,Rt.length-1),Nt=Rt[Rt.length-1],Ft=[];for(let Wt=0,Zt=Nt.length;Wt<Zt;Wt++){const Kt=Nt[Wt],cn=Ct[Wt];let hn;const dn=Dt[Wt];if(cn.mode===WEBGL_CONSTANTS.TRIANGLES||cn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||cn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||cn.mode===void 0)hn=Et.isSkinnedMesh===!0?new SkinnedMesh(Kt,dn):new Mesh(Kt,dn),hn.isSkinnedMesh===!0&&!hn.geometry.attributes.skinWeight.normalized&&hn.normalizeSkinWeights(),cn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?hn.geometry=toTrianglesDrawMode(hn.geometry,TriangleStripDrawMode):cn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(hn.geometry=toTrianglesDrawMode(hn.geometry,TriangleFanDrawMode));else if(cn.mode===WEBGL_CONSTANTS.LINES)hn=new LineSegments(Kt,dn);else if(cn.mode===WEBGL_CONSTANTS.LINE_STRIP)hn=new Line$2(Kt,dn);else if(cn.mode===WEBGL_CONSTANTS.LINE_LOOP)hn=new LineLoop(Kt,dn);else if(cn.mode===WEBGL_CONSTANTS.POINTS)hn=new Points(Kt,dn);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+cn.mode);Object.keys(hn.geometry.morphAttributes).length>0&&updateMorphTargets(hn,Et),hn.name=dt.createUniqueName(Et.name||"mesh_"+lt),assignExtrasToUserData(hn,Et),cn.extensions&&addUnknownExtensionsToUserData(St,hn,cn),dt.assignFinalMaterial(hn),Ft.push(hn)}for(let Wt=0,Zt=Ft.length;Wt<Zt;Wt++)dt.associations.set(Ft[Wt],{meshes:lt,primitives:Wt});if(Ft.length===1)return Ft[0];const Ut=new Group;dt.associations.set(Ut,{meshes:lt});for(let Wt=0,Zt=Ft.length;Wt<Zt;Wt++)Ut.add(Ft[Wt]);return Ut})}loadCamera(lt){let dt;const vt=this.json.cameras[lt],St=vt[vt.type];if(!St){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return vt.type==="perspective"?dt=new PerspectiveCamera(MathUtils.radToDeg(St.yfov),St.aspectRatio||1,St.znear||1,St.zfar||2e6):vt.type==="orthographic"&&(dt=new OrthographicCamera$1(-St.xmag,St.xmag,St.ymag,-St.ymag,St.znear,St.zfar)),vt.name&&(dt.name=this.createUniqueName(vt.name)),assignExtrasToUserData(dt,vt),Promise.resolve(dt)}loadSkin(lt){const dt=this.json.skins[lt],vt={joints:dt.joints};return dt.inverseBindMatrices===void 0?Promise.resolve(vt):this.getDependency("accessor",dt.inverseBindMatrices).then(function(St){return vt.inverseBindMatrices=St,vt})}loadAnimation(lt){const vt=this.json.animations[lt],St=[],Et=[],Ct=[],At=[],Rt=[];for(let Dt=0,Nt=vt.channels.length;Dt<Nt;Dt++){const Ft=vt.channels[Dt],Ut=vt.samplers[Ft.sampler],Wt=Ft.target,Zt=Wt.node,Kt=vt.parameters!==void 0?vt.parameters[Ut.input]:Ut.input,cn=vt.parameters!==void 0?vt.parameters[Ut.output]:Ut.output;St.push(this.getDependency("node",Zt)),Et.push(this.getDependency("accessor",Kt)),Ct.push(this.getDependency("accessor",cn)),At.push(Ut),Rt.push(Wt)}return Promise.all([Promise.all(St),Promise.all(Et),Promise.all(Ct),Promise.all(At),Promise.all(Rt)]).then(function(Dt){const Nt=Dt[0],Ft=Dt[1],Ut=Dt[2],Wt=Dt[3],Zt=Dt[4],Kt=[];for(let hn=0,dn=Nt.length;hn<dn;hn++){const pn=Nt[hn],gn=Ft[hn],vn=Ut[hn],bn=Wt[hn],$n=Zt[hn];if(pn===void 0)continue;pn.updateMatrix();let Tn;switch(PATH_PROPERTIES[$n.path]){case PATH_PROPERTIES.weights:Tn=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:Tn=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:Tn=VectorKeyframeTrack;break}const In=pn.name?pn.name:pn.uuid,Pn=bn.interpolation!==void 0?INTERPOLATION[bn.interpolation]:InterpolateLinear,zn=[];PATH_PROPERTIES[$n.path]===PATH_PROPERTIES.weights?pn.traverse(function(Gn){Gn.morphTargetInfluences&&zn.push(Gn.name?Gn.name:Gn.uuid)}):zn.push(In);let An=vn.array;if(vn.normalized){const Gn=getNormalizedComponentScale(An.constructor),xn=new Float32Array(An.length);for(let Qn=0,qn=An.length;Qn<qn;Qn++)xn[Qn]=An[Qn]*Gn;An=xn}for(let Gn=0,xn=zn.length;Gn<xn;Gn++){const Qn=new Tn(zn[Gn]+"."+PATH_PROPERTIES[$n.path],gn.array,An,Pn);bn.interpolation==="CUBICSPLINE"&&(Qn.createInterpolant=function(nr){const Un=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Un(this.times,this.values,this.getValueSize()/3,nr)},Qn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Kt.push(Qn)}}const cn=vt.name?vt.name:"animation_"+lt;return new AnimationClip(cn,void 0,Kt)})}createNodeMesh(lt){const dt=this.json,vt=this,St=dt.nodes[lt];return St.mesh===void 0?null:vt.getDependency("mesh",St.mesh).then(function(Et){const Ct=vt._getNodeRef(vt.meshCache,St.mesh,Et);return St.weights!==void 0&&Ct.traverse(function(At){if(At.isMesh)for(let Rt=0,Dt=St.weights.length;Rt<Dt;Rt++)At.morphTargetInfluences[Rt]=St.weights[Rt]}),Ct})}loadNode(lt){const dt=this.json,vt=this.extensions,St=this,Et=dt.nodes[lt],Ct=Et.name?St.createUniqueName(Et.name):"";return function(){const At=[],Rt=St._invokeOne(function(Dt){return Dt.createNodeMesh&&Dt.createNodeMesh(lt)});return Rt&&At.push(Rt),Et.camera!==void 0&&At.push(St.getDependency("camera",Et.camera).then(function(Dt){return St._getNodeRef(St.cameraCache,Et.camera,Dt)})),St._invokeAll(function(Dt){return Dt.createNodeAttachment&&Dt.createNodeAttachment(lt)}).forEach(function(Dt){At.push(Dt)}),Promise.all(At)}().then(function(At){let Rt;if(Et.isBone===!0?Rt=new Bone:At.length>1?Rt=new Group:At.length===1?Rt=At[0]:Rt=new Object3D,Rt!==At[0])for(let Dt=0,Nt=At.length;Dt<Nt;Dt++)Rt.add(At[Dt]);if(Et.name&&(Rt.userData.name=Et.name,Rt.name=Ct),assignExtrasToUserData(Rt,Et),Et.extensions&&addUnknownExtensionsToUserData(vt,Rt,Et),Et.matrix!==void 0){const Dt=new Matrix4;Dt.fromArray(Et.matrix),Rt.applyMatrix4(Dt)}else Et.translation!==void 0&&Rt.position.fromArray(Et.translation),Et.rotation!==void 0&&Rt.quaternion.fromArray(Et.rotation),Et.scale!==void 0&&Rt.scale.fromArray(Et.scale);return St.associations.has(Rt)||St.associations.set(Rt,{}),St.associations.get(Rt).nodes=lt,Rt})}loadScene(lt){const dt=this.json,vt=this.extensions,St=this.json.scenes[lt],Et=this,Ct=new Group;St.name&&(Ct.name=Et.createUniqueName(St.name)),assignExtrasToUserData(Ct,St),St.extensions&&addUnknownExtensionsToUserData(vt,Ct,St);const At=St.nodes||[],Rt=[];for(let Dt=0,Nt=At.length;Dt<Nt;Dt++)Rt.push(buildNodeHierarchy(At[Dt],Ct,dt,Et));return Promise.all(Rt).then(function(){const Dt=Nt=>{const Ft=new Map;for(const[Ut,Wt]of Et.associations)(Ut instanceof Material||Ut instanceof Texture)&&Ft.set(Ut,Wt);return Nt.traverse(Ut=>{const Wt=Et.associations.get(Ut);Wt!=null&&Ft.set(Ut,Wt)}),Ft};return Et.associations=Dt(Ct),Ct})}}function buildNodeHierarchy(ft,lt,dt,vt){const St=dt.nodes[ft];return vt.getDependency("node",ft).then(function(Et){if(St.skin===void 0)return Et;let Ct;return vt.getDependency("skin",St.skin).then(function(At){Ct=At;const Rt=[];for(let Dt=0,Nt=Ct.joints.length;Dt<Nt;Dt++)Rt.push(vt.getDependency("node",Ct.joints[Dt]));return Promise.all(Rt)}).then(function(At){return Et.traverse(function(Rt){if(!Rt.isMesh)return;const Dt=[],Nt=[];for(let Ft=0,Ut=At.length;Ft<Ut;Ft++){const Wt=At[Ft];if(Wt){Dt.push(Wt);const Zt=new Matrix4;Ct.inverseBindMatrices!==void 0&&Zt.fromArray(Ct.inverseBindMatrices.array,Ft*16),Nt.push(Zt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ct.joints[Ft])}Rt.bind(new Skeleton(Dt,Nt),Rt.matrixWorld)}),Et})}).then(function(Et){lt.add(Et);const Ct=[];if(St.children){const At=St.children;for(let Rt=0,Dt=At.length;Rt<Dt;Rt++){const Nt=At[Rt];Ct.push(buildNodeHierarchy(Nt,Et,dt,vt))}}return Promise.all(Ct)})}function computeBounds(ft,lt,dt){const vt=lt.attributes,St=new Box3;if(vt.POSITION!==void 0){const At=dt.json.accessors[vt.POSITION],Rt=At.min,Dt=At.max;if(Rt!==void 0&&Dt!==void 0){if(St.set(new Vector3(Rt[0],Rt[1],Rt[2]),new Vector3(Dt[0],Dt[1],Dt[2])),At.normalized){const Nt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[At.componentType]);St.min.multiplyScalar(Nt),St.max.multiplyScalar(Nt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Et=lt.targets;if(Et!==void 0){const At=new Vector3,Rt=new Vector3;for(let Dt=0,Nt=Et.length;Dt<Nt;Dt++){const Ft=Et[Dt];if(Ft.POSITION!==void 0){const Ut=dt.json.accessors[Ft.POSITION],Wt=Ut.min,Zt=Ut.max;if(Wt!==void 0&&Zt!==void 0){if(Rt.setX(Math.max(Math.abs(Wt[0]),Math.abs(Zt[0]))),Rt.setY(Math.max(Math.abs(Wt[1]),Math.abs(Zt[1]))),Rt.setZ(Math.max(Math.abs(Wt[2]),Math.abs(Zt[2]))),Ut.normalized){const Kt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Ut.componentType]);Rt.multiplyScalar(Kt)}At.max(Rt)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}St.expandByVector(At)}ft.boundingBox=St;const Ct=new Sphere$1;St.getCenter(Ct.center),Ct.radius=St.min.distanceTo(St.max)/2,ft.boundingSphere=Ct}function addPrimitiveAttributes(ft,lt,dt){const vt=lt.attributes,St=[];function Et(Ct,At){return dt.getDependency("accessor",Ct).then(function(Rt){ft.setAttribute(At,Rt)})}for(const Ct in vt){const At=ATTRIBUTES[Ct]||Ct.toLowerCase();At in ft.attributes||St.push(Et(vt[Ct],At))}if(lt.indices!==void 0&&!ft.index){const Ct=dt.getDependency("accessor",lt.indices).then(function(At){ft.setIndex(At)});St.push(Ct)}return assignExtrasToUserData(ft,lt),computeBounds(ft,lt,dt),Promise.all(St).then(function(){return lt.targets!==void 0?addMorphTargets(ft,lt.targets,dt):ft})}function toTrianglesDrawMode(ft,lt){let dt=ft.getIndex();if(dt===null){const Ct=[],At=ft.getAttribute("position");if(At!==void 0){for(let Rt=0;Rt<At.count;Rt++)Ct.push(Rt);ft.setIndex(Ct),dt=ft.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ft}const vt=dt.count-2,St=[];if(lt===TriangleFanDrawMode)for(let Ct=1;Ct<=vt;Ct++)St.push(dt.getX(0)),St.push(dt.getX(Ct)),St.push(dt.getX(Ct+1));else for(let Ct=0;Ct<vt;Ct++)Ct%2===0?(St.push(dt.getX(Ct)),St.push(dt.getX(Ct+1)),St.push(dt.getX(Ct+2))):(St.push(dt.getX(Ct+2)),St.push(dt.getX(Ct+1)),St.push(dt.getX(Ct)));St.length/3!==vt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Et=ft.clone();return Et.setIndex(St),Et}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(lt){super(lt),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(lt){return this.decoderPath=lt,this}setDecoderConfig(lt){return this.decoderConfig=lt,this}setWorkerLimit(lt){return this.workerLimit=lt,this}load(lt,dt,vt,St){const Et=new FileLoader(this.manager);Et.setPath(this.path),Et.setResponseType("arraybuffer"),Et.setRequestHeader(this.requestHeader),Et.setWithCredentials(this.withCredentials),Et.load(lt,Ct=>{const At={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(Ct,At).then(dt).catch(St)},vt,St)}decodeDracoFile(lt,dt,vt,St){const Et={attributeIDs:vt||this.defaultAttributeIDs,attributeTypes:St||this.defaultAttributeTypes,useUniqueIDs:!!vt};this.decodeGeometry(lt,Et).then(dt)}decodeGeometry(lt,dt){for(const Rt in dt.attributeTypes){const Dt=dt.attributeTypes[Rt];Dt.BYTES_PER_ELEMENT!==void 0&&(dt.attributeTypes[Rt]=Dt.name)}const vt=JSON.stringify(dt);if(_taskCache.has(lt)){const Rt=_taskCache.get(lt);if(Rt.key===vt)return Rt.promise;if(lt.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let St;const Et=this.workerNextTaskID++,Ct=lt.byteLength,At=this._getWorker(Et,Ct).then(Rt=>(St=Rt,new Promise((Dt,Nt)=>{St._callbacks[Et]={resolve:Dt,reject:Nt},St.postMessage({type:"decode",id:Et,taskConfig:dt,buffer:lt},[lt])}))).then(Rt=>this._createGeometry(Rt.geometry));return At.catch(()=>!0).then(()=>{St&&Et&&this._releaseTask(St,Et)}),_taskCache.set(lt,{key:vt,promise:At}),At}_createGeometry(lt){const dt=new BufferGeometry;lt.index&&dt.setIndex(new BufferAttribute(lt.index.array,1));for(let vt=0;vt<lt.attributes.length;vt++){const St=lt.attributes[vt],Et=St.name,Ct=St.array,At=St.itemSize;dt.setAttribute(Et,new BufferAttribute(Ct,At))}return dt}_loadLibrary(lt,dt){const vt=new FileLoader(this.manager);return vt.setPath(this.decoderPath),vt.setResponseType(dt),vt.setWithCredentials(this.withCredentials),new Promise((St,Et)=>{vt.load(lt,St,void 0,Et)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const lt=typeof WebAssembly!="object"||this.decoderConfig.type==="js",dt=[];return lt?dt.push(this._loadLibrary("draco_decoder.js","text")):(dt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),dt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(dt).then(vt=>{const St=vt[0];lt||(this.decoderConfig.wasmBinary=vt[1]);const Et=DRACOWorker.toString(),Ct=["/* draco decoder */",St,"","/* worker */",Et.substring(Et.indexOf("{")+1,Et.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ct]))}),this.decoderPending}_getWorker(lt,dt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const St=new Worker(this.workerSourceURL);St._callbacks={},St._taskCosts={},St._taskLoad=0,St.postMessage({type:"init",decoderConfig:this.decoderConfig}),St.onmessage=function(Et){const Ct=Et.data;switch(Ct.type){case"decode":St._callbacks[Ct.id].resolve(Ct);break;case"error":St._callbacks[Ct.id].reject(Ct);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Ct.type+'"')}},this.workerPool.push(St)}else this.workerPool.sort(function(St,Et){return St._taskLoad>Et._taskLoad?-1:1});const vt=this.workerPool[this.workerPool.length-1];return vt._taskCosts[lt]=dt,vt._taskLoad+=dt,vt})}_releaseTask(lt,dt){lt._taskLoad-=lt._taskCosts[dt],delete lt._callbacks[dt],delete lt._taskCosts[dt]}debug(){console.log("Task load: ",this.workerPool.map(lt=>lt._taskLoad))}dispose(){for(let lt=0;lt<this.workerPool.length;++lt)this.workerPool[lt].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let ft,lt;onmessage=function(Ct){const At=Ct.data;switch(At.type){case"init":ft=At.decoderConfig,lt=new Promise(function(Nt){ft.onModuleLoaded=function(Ft){Nt({draco:Ft})},DracoDecoderModule(ft)});break;case"decode":const Rt=At.buffer,Dt=At.taskConfig;lt.then(Nt=>{const Ft=Nt.draco,Ut=new Ft.Decoder,Wt=new Ft.DecoderBuffer;Wt.Init(new Int8Array(Rt),Rt.byteLength);try{const Zt=dt(Ft,Ut,Wt,Dt),Kt=Zt.attributes.map(cn=>cn.array.buffer);Zt.index&&Kt.push(Zt.index.array.buffer),self.postMessage({type:"decode",id:At.id,geometry:Zt},Kt)}catch(Zt){console.error(Zt),self.postMessage({type:"error",id:At.id,error:Zt.message})}finally{Ft.destroy(Wt),Ft.destroy(Ut)}});break}};function dt(Ct,At,Rt,Dt){const Nt=Dt.attributeIDs,Ft=Dt.attributeTypes;let Ut,Wt;const Zt=At.GetEncodedGeometryType(Rt);if(Zt===Ct.TRIANGULAR_MESH)Ut=new Ct.Mesh,Wt=At.DecodeBufferToMesh(Rt,Ut);else if(Zt===Ct.POINT_CLOUD)Ut=new Ct.PointCloud,Wt=At.DecodeBufferToPointCloud(Rt,Ut);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Wt.ok()||Ut.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Wt.error_msg());const Kt={index:null,attributes:[]};for(const cn in Nt){const hn=self[Ft[cn]];let dn,pn;if(Dt.useUniqueIDs)pn=Nt[cn],dn=At.GetAttributeByUniqueId(Ut,pn);else{if(pn=At.GetAttributeId(Ut,Ct[Nt[cn]]),pn===-1)continue;dn=At.GetAttribute(Ut,pn)}Kt.attributes.push(St(Ct,At,Ut,cn,hn,dn))}return Zt===Ct.TRIANGULAR_MESH&&(Kt.index=vt(Ct,At,Ut)),Ct.destroy(Ut),Kt}function vt(Ct,At,Rt){const Nt=Rt.num_faces()*3,Ft=Nt*4,Ut=Ct._malloc(Ft);At.GetTrianglesUInt32Array(Rt,Ft,Ut);const Wt=new Uint32Array(Ct.HEAPF32.buffer,Ut,Nt).slice();return Ct._free(Ut),{array:Wt,itemSize:1}}function St(Ct,At,Rt,Dt,Nt,Ft){const Ut=Ft.num_components(),Zt=Rt.num_points()*Ut,Kt=Zt*Nt.BYTES_PER_ELEMENT,cn=Et(Ct,Nt),hn=Ct._malloc(Kt);At.GetAttributeDataArrayForAllPoints(Rt,Ft,cn,Kt,hn);const dn=new Nt(Ct.HEAPF32.buffer,hn,Zt).slice();return Ct._free(hn),{name:Dt,array:dn,itemSize:Ut}}function Et(Ct,At){switch(At){case Float32Array:return Ct.DT_FLOAT32;case Int8Array:return Ct.DT_INT8;case Int16Array:return Ct.DT_INT16;case Int32Array:return Ct.DT_INT32;case Uint8Array:return Ct.DT_UINT8;case Uint16Array:return Ct.DT_UINT16;case Uint32Array:return Ct.DT_UINT32}}}const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const lt=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],dt=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],vt=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(vt),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2))}applyMatrix4(lt){const dt=this.attributes.instanceStart,vt=this.attributes.instanceEnd;return dt!==void 0&&(dt.applyMatrix4(lt),vt.applyMatrix4(lt),dt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(lt){let dt;lt instanceof Float32Array?dt=lt:Array.isArray(lt)&&(dt=new Float32Array(lt));const vt=new InstancedInterleavedBuffer(dt,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(vt,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(vt,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(lt){let dt;lt instanceof Float32Array?dt=lt:Array.isArray(lt)&&(dt=new Float32Array(lt));const vt=new InstancedInterleavedBuffer(dt,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(vt,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(vt,3,3)),this}fromWireframeGeometry(lt){return this.setPositions(lt.attributes.position.array),this}fromEdgesGeometry(lt){return this.setPositions(lt.attributes.position.array),this}fromMesh(lt){return this.fromWireframeGeometry(new WireframeGeometry(lt.geometry)),this}fromLineSegments(lt){const dt=lt.geometry;return this.setPositions(dt.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const lt=this.attributes.instanceStart,dt=this.attributes.instanceEnd;lt!==void 0&&dt!==void 0&&(this.boundingBox.setFromBufferAttribute(lt),_box$1.setFromBufferAttribute(dt),this.boundingBox.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),this.boundingBox===null&&this.computeBoundingBox();const lt=this.attributes.instanceStart,dt=this.attributes.instanceEnd;if(lt!==void 0&&dt!==void 0){const vt=this.boundingSphere.center;this.boundingBox.getCenter(vt);let St=0;for(let Et=0,Ct=lt.count;Et<Ct;Et++)_vector.fromBufferAttribute(lt,Et),St=Math.max(St,vt.distanceToSquared(_vector)),_vector.fromBufferAttribute(dt,Et),St=Math.max(St,vt.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(St),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(lt){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(lt)}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(lt){const dt=lt.length-3,vt=new Float32Array(2*dt);for(let St=0;St<dt;St+=3)vt[2*St]=lt[St],vt[2*St+1]=lt[St+1],vt[2*St+2]=lt[St+2],vt[2*St+3]=lt[St+3],vt[2*St+4]=lt[St+4],vt[2*St+5]=lt[St+5];return super.setPositions(vt),this}setColors(lt){const dt=lt.length-3,vt=new Float32Array(2*dt);for(let St=0;St<dt;St+=3)vt[2*St]=lt[St],vt[2*St+1]=lt[St+1],vt[2*St+2]=lt[St+2],vt[2*St+3]=lt[St+3],vt[2*St+4]=lt[St+4],vt[2*St+5]=lt[St+5];return super.setColors(vt),this}fromLine(lt){const dt=lt.geometry;return this.setPositions(dt.attributes.position.array),this}}UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ShaderLib.line={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,UniformsLib.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class LineMaterial extends ShaderMaterial{constructor(lt){super({type:"LineMaterial",uniforms:UniformsUtils.clone(ShaderLib.line.uniforms),vertexShader:ShaderLib.line.vertexShader,fragmentShader:ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(dt){this.uniforms.diffuse.value=dt}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(dt){dt===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(dt){this.uniforms.linewidth.value=dt}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(dt){!!dt!="USE_DASH"in this.defines&&(this.needsUpdate=!0),dt===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(dt){this.uniforms.dashScale.value=dt}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(dt){this.uniforms.dashSize.value=dt}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(dt){this.uniforms.dashOffset.value=dt}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(dt){this.uniforms.gapSize.value=dt}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(dt){this.uniforms.opacity.value=dt}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(dt){this.uniforms.resolution.value.copy(dt)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(dt){!!dt!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),dt===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(lt)}}const _start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere=new Sphere$1,_clipToWorldVector=new Vector4;let _ray,_instanceStart,_instanceEnd,_lineWidth;function getWorldSpaceHalfWidth(ft,lt,dt){return _clipToWorldVector.set(0,0,-lt,1).applyMatrix4(ft.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/dt.width,_clipToWorldVector.y=_lineWidth/dt.height,_clipToWorldVector.applyMatrix4(ft.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(ft,lt){for(let dt=0,vt=_instanceStart.count;dt<vt;dt++){_line.start.fromBufferAttribute(_instanceStart,dt),_line.end.fromBufferAttribute(_instanceEnd,dt);const St=new Vector3,Et=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,Et,St),Et.distanceTo(St)<_lineWidth*.5&&lt.push({point:Et,pointOnLine:St,distance:_ray.origin.distanceTo(Et),object:ft,face:null,faceIndex:dt,uv:null,uv2:null})}}function raycastScreenSpace(ft,lt,dt){const vt=lt.projectionMatrix,Et=ft.material.resolution,Ct=ft.matrixWorld,At=ft.geometry,Rt=At.attributes.instanceStart,Dt=At.attributes.instanceEnd,Nt=-lt.near;_ray.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4(lt.matrixWorldInverse),_ssOrigin.applyMatrix4(vt),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=Et.x/2,_ssOrigin.y*=Et.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices(lt.matrixWorldInverse,Ct);for(let Ft=0,Ut=Rt.count;Ft<Ut;Ft++){if(_start4.fromBufferAttribute(Rt,Ft),_end4.fromBufferAttribute(Dt,Ft),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix),_start4.z>Nt&&_end4.z>Nt)continue;if(_start4.z>Nt){const dn=_start4.z-_end4.z,pn=(_start4.z-Nt)/dn;_start4.lerp(_end4,pn)}else if(_end4.z>Nt){const dn=_end4.z-_start4.z,pn=(_end4.z-Nt)/dn;_end4.lerp(_start4,pn)}_start4.applyMatrix4(vt),_end4.applyMatrix4(vt),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=Et.x/2,_start4.y*=Et.y/2,_end4.x*=Et.x/2,_end4.y*=Et.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const Zt=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(Zt,_closestPoint);const Kt=MathUtils.lerp(_start4.z,_end4.z,Zt),cn=Kt>=-1&&Kt<=1,hn=_ssOrigin3.distanceTo(_closestPoint)<_lineWidth*.5;if(cn&&hn){_line.start.fromBufferAttribute(Rt,Ft),_line.end.fromBufferAttribute(Dt,Ft),_line.start.applyMatrix4(Ct),_line.end.applyMatrix4(Ct);const dn=new Vector3,pn=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,pn,dn),dt.push({point:pn,pointOnLine:dn,distance:_ray.origin.distanceTo(pn),object:ft,face:null,faceIndex:Ft,uv:null,uv2:null})}}}class LineSegments2 extends Mesh{constructor(lt=new LineSegmentsGeometry,dt=new LineMaterial({color:Math.random()*16777215})){super(lt,dt),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const lt=this.geometry,dt=lt.attributes.instanceStart,vt=lt.attributes.instanceEnd,St=new Float32Array(2*dt.count);for(let Ct=0,At=0,Rt=dt.count;Ct<Rt;Ct++,At+=2)_start.fromBufferAttribute(dt,Ct),_end.fromBufferAttribute(vt,Ct),St[At]=At===0?0:St[At-1],St[At+1]=St[At]+_start.distanceTo(_end);const Et=new InstancedInterleavedBuffer(St,2,1);return lt.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(Et,1,0)),lt.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(Et,1,1)),this}raycast(lt,dt){const vt=this.material.worldUnits,St=lt.camera;St===null&&!vt&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const Et=lt.params.Line2!==void 0&&lt.params.Line2.threshold||0;_ray=lt.ray;const Ct=this.matrixWorld,At=this.geometry,Rt=this.material;_lineWidth=Rt.linewidth+Et,_instanceStart=At.attributes.instanceStart,_instanceEnd=At.attributes.instanceEnd,At.boundingSphere===null&&At.computeBoundingSphere(),_sphere.copy(At.boundingSphere).applyMatrix4(Ct);let Dt;if(vt)Dt=_lineWidth*.5;else{const Ft=Math.max(St.near,_sphere.distanceToPoint(_ray.origin));Dt=getWorldSpaceHalfWidth(St,Ft,Rt.resolution)}if(_sphere.radius+=Dt,_ray.intersectsSphere(_sphere)===!1)return;At.boundingBox===null&&At.computeBoundingBox(),_box.copy(At.boundingBox).applyMatrix4(Ct);let Nt;if(vt)Nt=_lineWidth*.5;else{const Ft=Math.max(St.near,_box.distanceToPoint(_ray.origin));Nt=getWorldSpaceHalfWidth(St,Ft,Rt.resolution)}_box.expandByScalar(Nt),_ray.intersectsBox(_box)!==!1&&(vt?raycastWorldUnits(this,dt):raycastScreenSpace(this,St,dt))}}class Line2 extends LineSegments2{constructor(lt=new LineGeometry,dt=new LineMaterial({color:Math.random()*16777215})){super(lt,dt),this.isLine2=!0,this.type="Line2"}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const ft="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",lt="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",dt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),vt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let St=ft;WebAssembly.validate(dt)&&(St=lt);let Et;const Ct=WebAssembly.instantiate(At(St),{}).then(Ft=>{Et=Ft.instance,Et.exports.__wasm_call_ctors()});function At(Ft){const Ut=new Uint8Array(Ft.length);for(let Zt=0;Zt<Ft.length;++Zt){const Kt=Ft.charCodeAt(Zt);Ut[Zt]=Kt>96?Kt-71:Kt>64?Kt-65:Kt>47?Kt+4:Kt>46?63:62}let Wt=0;for(let Zt=0;Zt<Ft.length;++Zt)Ut[Wt++]=Ut[Zt]<60?vt[Ut[Zt]]:(Ut[Zt]-60)*64+Ut[++Zt];return Ut.buffer.slice(0,Wt)}function Rt(Ft,Ut,Wt,Zt,Kt,cn){const hn=Et.exports.sbrk,dn=Wt+3&-4,pn=hn(dn*Zt),gn=hn(Kt.length),vn=new Uint8Array(Et.exports.memory.buffer);vn.set(Kt,gn);const bn=Ft(pn,Wt,Zt,gn,Kt.length);if(bn===0&&cn&&cn(pn,dn,Zt),Ut.set(vn.subarray(pn,pn+Wt*Zt)),hn(pn-hn(0)),bn!==0)throw new Error(`Malformed buffer data: ${bn}`)}const Dt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Nt={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:Ct,supported:!0,decodeVertexBuffer(Ft,Ut,Wt,Zt,Kt){Rt(Et.exports.meshopt_decodeVertexBuffer,Ft,Ut,Wt,Zt,Et.exports[Dt[Kt]])},decodeIndexBuffer(Ft,Ut,Wt,Zt){Rt(Et.exports.meshopt_decodeIndexBuffer,Ft,Ut,Wt,Zt)},decodeIndexSequence(Ft,Ut,Wt,Zt){Rt(Et.exports.meshopt_decodeIndexSequence,Ft,Ut,Wt,Zt)},decodeGltfBuffer(Ft,Ut,Wt,Zt,Kt,cn){Rt(Et.exports[Nt[Kt]],Ft,Ut,Wt,Zt,Et.exports[Dt[cn]])}},generated},Line$1=reactExports.forwardRef(function ft({points:lt,color:dt="black",vertexColors:vt,linewidth:St,lineWidth:Et,segments:Ct,dashed:At,...Rt},Dt){const Nt=useThree(Zt=>Zt.size),Ft=reactExports.useMemo(()=>Ct?new LineSegments2:new Line2,[Ct]),[Ut]=reactExports.useState(()=>new LineMaterial),Wt=reactExports.useMemo(()=>{const Zt=Ct?new LineSegmentsGeometry:new LineGeometry,Kt=lt.map(cn=>{const hn=Array.isArray(cn);return cn instanceof Vector3?[cn.x,cn.y,cn.z]:cn instanceof Vector2?[cn.x,cn.y,0]:hn&&cn.length===3?[cn[0],cn[1],cn[2]]:hn&&cn.length===2?[cn[0],cn[1],0]:cn});if(Zt.setPositions(Kt.flat()),vt){const cn=vt.map(hn=>hn instanceof Color?hn.toArray():hn);Zt.setColors(cn.flat())}return Zt},[lt,Ct,vt]);return reactExports.useLayoutEffect(()=>{Ft.computeLineDistances()},[lt,Ft]),reactExports.useLayoutEffect(()=>{At?Ut.defines.USE_DASH="":delete Ut.defines.USE_DASH,Ut.needsUpdate=!0},[At,Ut]),reactExports.useEffect(()=>()=>Wt.dispose(),[Wt]),reactExports.createElement("primitive",_extends({object:Ft,ref:Dt},Rt),reactExports.createElement("primitive",{object:Wt,attach:"geometry"}),reactExports.createElement("primitive",_extends({object:Ut,attach:"material",color:dt,vertexColors:!!vt,resolution:[Nt.width,Nt.height],linewidth:St??Et,dashed:At},Rt)))}),CatmullRomLine=reactExports.forwardRef(function ft({points:lt,closed:dt=!1,curveType:vt="centripetal",tension:St=.5,segments:Et=20,vertexColors:Ct,...At},Rt){const Dt=reactExports.useMemo(()=>{const Ut=lt.map(Wt=>Wt instanceof Vector3?Wt:new Vector3(...Wt));return new CatmullRomCurve3(Ut,dt,vt,St)},[lt,dt,vt,St]),Nt=reactExports.useMemo(()=>Dt.getPoints(Et),[Dt,Et]),Ft=reactExports.useMemo(()=>{if(!Ct||Ct.length<2)return;if(Ct.length===Et+1)return Ct;const Ut=Ct.map(Kt=>Kt instanceof Color?Kt:new Color(...Kt));dt&&Ut.push(Ut[0].clone());const Wt=[Ut[0]],Zt=Et/(Ut.length-1);for(let Kt=1;Kt<Et;Kt++){const cn=Kt%Zt/Zt,hn=Math.floor(Kt/Zt);Wt.push(Ut[hn].clone().lerp(Ut[hn+1],cn))}return Wt.push(Ut[Ut.length-1]),Wt},[Ct,Et]);return reactExports.createElement(Line$1,_extends({ref:Rt,points:Nt,vertexColors:Ft},At))});function workerBootstrap(){var ft=Object.create(null);function lt(St,Et){var Ct=St.id,At=St.name,Rt=St.dependencies;Rt===void 0&&(Rt=[]);var Dt=St.init;Dt===void 0&&(Dt=function(){});var Nt=St.getTransferables;if(Nt===void 0&&(Nt=null),!ft[Ct])try{Rt=Rt.map(function(Ut){return Ut&&Ut.isWorkerModule&&(lt(Ut,function(Wt){if(Wt instanceof Error)throw Wt}),Ut=ft[Ut.id].value),Ut}),Dt=vt("<"+At+">.init",Dt),Nt&&(Nt=vt("<"+At+">.getTransferables",Nt));var Ft=null;typeof Dt=="function"?Ft=Dt.apply(void 0,Rt):console.error("worker module init function failed to rehydrate"),ft[Ct]={id:Ct,value:Ft,getTransferables:Nt},Et(Ft)}catch(Ut){Ut&&Ut.noLog||console.error(Ut),Et(Ut)}}function dt(St,Et){var Ct,At=St.id,Rt=St.args;(!ft[At]||typeof ft[At].value!="function")&&Et(new Error("Worker module "+At+": not found or its 'init' did not return a function"));try{var Dt=(Ct=ft[At]).value.apply(Ct,Rt);Dt&&typeof Dt.then=="function"?Dt.then(Nt,function(Ft){return Et(Ft instanceof Error?Ft:new Error(""+Ft))}):Nt(Dt)}catch(Ft){Et(Ft)}function Nt(Ft){try{var Ut=ft[At].getTransferables&&ft[At].getTransferables(Ft);(!Ut||!Array.isArray(Ut)||!Ut.length)&&(Ut=void 0),Et(Ft,Ut)}catch(Wt){console.error(Wt),Et(Wt)}}}function vt(St,Et){var Ct=void 0;self.troikaDefine=function(Rt){return Ct=Rt};var At=URL.createObjectURL(new Blob(["/** "+St.replace(/\*/g,"")+` **/

troikaDefine(
`+Et+`
)`],{type:"application/javascript"}));try{importScripts(At)}catch(Rt){console.error(Rt)}return URL.revokeObjectURL(At),delete self.troikaDefine,Ct}self.addEventListener("message",function(St){var Et=St.data,Ct=Et.messageId,At=Et.action,Rt=Et.data;try{At==="registerModule"&&lt(Rt,function(Dt){Dt instanceof Error?postMessage({messageId:Ct,success:!1,error:Dt.message}):postMessage({messageId:Ct,success:!0,result:{isCallable:typeof Dt=="function"}})}),At==="callModule"&&dt(Rt,function(Dt,Nt){Dt instanceof Error?postMessage({messageId:Ct,success:!1,error:Dt.message}):postMessage({messageId:Ct,success:!0,result:Dt},Nt||void 0)})}catch(Dt){postMessage({messageId:Ct,success:!1,error:Dt.stack})}})}function defineMainThreadModule(ft){var lt=function(){for(var dt=[],vt=arguments.length;vt--;)dt[vt]=arguments[vt];return lt._getInitResult().then(function(St){if(typeof St=="function")return St.apply(void 0,dt);throw new Error("Worker module function was called but `init` did not return a callable function")})};return lt._getInitResult=function(){var dt=ft.dependencies,vt=ft.init;dt=Array.isArray(dt)?dt.map(function(Et){return Et&&Et._getInitResult?Et._getInitResult():Et}):[];var St=Promise.all(dt).then(function(Et){return vt.apply(null,Et)});return lt._getInitResult=function(){return St},St},lt}var supportsWorkers=function(){var ft=!1;if(typeof window<"u"&&typeof window.document<"u")try{var lt=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));lt.terminate(),ft=!0}catch(dt){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+dt.message+"]")}return supportsWorkers=function(){return ft},ft},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(ft){if((!ft||typeof ft.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var lt=ft.dependencies,dt=ft.init,vt=ft.getTransferables,St=ft.workerId;if(!supportsWorkers())return defineMainThreadModule(ft);St==null&&(St="#default");var Et="workerModule"+ ++_workerModuleId,Ct=ft.name||Et,At=null;lt=lt&&lt.map(function(Dt){return typeof Dt=="function"&&!Dt.workerModuleData&&(_allowInitAsString=!0,Dt=defineWorkerModule({workerId:St,name:"<"+Ct+"> function dependency: "+Dt.name,init:`function(){return (
`+stringifyFunction(Dt)+`
)}`}),_allowInitAsString=!1),Dt&&Dt.workerModuleData&&(Dt=Dt.workerModuleData),Dt});function Rt(){for(var Dt=[],Nt=arguments.length;Nt--;)Dt[Nt]=arguments[Nt];if(!At){At=callWorker(St,"registerModule",Rt.workerModuleData);var Ft=function(){At=null,registeredModules[St].delete(Ft)};(registeredModules[St]||(registeredModules[St]=new Set)).add(Ft)}return At.then(function(Ut){var Wt=Ut.isCallable;if(Wt)return callWorker(St,"callModule",{id:Et,args:Dt});throw new Error("Worker module function was called but `init` did not return a callable function")})}return Rt.workerModuleData={isWorkerModule:!0,id:Et,name:Ct,dependencies:lt,init:stringifyFunction(dt),getTransferables:vt&&stringifyFunction(vt)},Rt}function terminateWorker(ft){registeredModules[ft]&&registeredModules[ft].forEach(function(lt){lt()}),workers[ft]&&(workers[ft].terminate(),delete workers[ft])}function stringifyFunction(ft){var lt=ft.toString();return!/^function/.test(lt)&&/^\w+\s*\(/.test(lt)&&(lt="function "+lt),lt}function getWorker(ft){var lt=workers[ft];if(!lt){var dt=stringifyFunction(workerBootstrap);lt=workers[ft]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+ft.replace(/\*/g,"")+` **/

;(`+dt+")()"],{type:"application/javascript"}))),lt.onmessage=function(vt){var St=vt.data,Et=St.messageId,Ct=openRequests[Et];if(!Ct)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[Et],Ct(St)}}return lt}function callWorker(ft,lt,dt){return new Promise(function(vt,St){var Et=++_messageId;openRequests[Et]=function(Ct){Ct.success?vt(Ct.result):St(new Error("Error in worker "+lt+" call: "+Ct.error))},getWorker(ft).postMessage({messageId:Et,action:lt,data:dt})})}function SDFGenerator(){var ft=function(lt){function dt(Nn,jn,Ln,Cn,tr,ir,Zn,br){var fr=1-Zn;br.x=fr*fr*Nn+2*fr*Zn*Ln+Zn*Zn*tr,br.y=fr*fr*jn+2*fr*Zn*Cn+Zn*Zn*ir}function vt(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or){var Pr=1-fr;Or.x=Pr*Pr*Pr*Nn+3*Pr*Pr*fr*Ln+3*Pr*fr*fr*tr+fr*fr*fr*Zn,Or.y=Pr*Pr*Pr*jn+3*Pr*Pr*fr*Cn+3*Pr*fr*fr*ir+fr*fr*fr*br}function St(Nn,jn){for(var Ln=/([MLQCZ])([^MLQCZ]*)/g,Cn,tr,ir,Zn,br;Cn=Ln.exec(Nn);){var fr=Cn[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Or){return parseFloat(Or)});switch(Cn[1]){case"M":Zn=tr=fr[0],br=ir=fr[1];break;case"L":(fr[0]!==Zn||fr[1]!==br)&&jn("L",Zn,br,Zn=fr[0],br=fr[1]);break;case"Q":{jn("Q",Zn,br,Zn=fr[2],br=fr[3],fr[0],fr[1]);break}case"C":{jn("C",Zn,br,Zn=fr[4],br=fr[5],fr[0],fr[1],fr[2],fr[3]);break}case"Z":(Zn!==tr||br!==ir)&&jn("L",Zn,br,tr,ir);break}}}function Et(Nn,jn,Ln){Ln===void 0&&(Ln=16);var Cn={x:0,y:0};St(Nn,function(tr,ir,Zn,br,fr,Or,Pr,zr,Dr){switch(tr){case"L":jn(ir,Zn,br,fr);break;case"Q":{for(var _r=ir,Nr=Zn,Dn=1;Dn<Ln;Dn++)dt(ir,Zn,Or,Pr,br,fr,Dn/(Ln-1),Cn),jn(_r,Nr,Cn.x,Cn.y),_r=Cn.x,Nr=Cn.y;break}case"C":{for(var yr=ir,hr=Zn,Jn=1;Jn<Ln;Jn++)vt(ir,Zn,Or,Pr,zr,Dr,br,fr,Jn/(Ln-1),Cn),jn(yr,hr,Cn.x,Cn.y),yr=Cn.x,hr=Cn.y;break}}})}var Ct="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",At="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",Rt=new WeakMap,Dt={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function Nt(Nn,jn){var Ln=Nn.getContext?Nn.getContext("webgl",Dt):Nn,Cn=Rt.get(Ln);if(!Cn){let yr=function(gr){var Vn=ir[gr];if(!Vn&&(Vn=ir[gr]=Ln.getExtension(gr),!Vn))throw new Error(gr+" not supported");return Vn},hr=function(gr,Vn){var Wn=Ln.createShader(Vn);return Ln.shaderSource(Wn,gr),Ln.compileShader(Wn),Wn},Jn=function(gr,Vn,Wn,rr){if(!Zn[gr]){var lr={},xr={},Fr=Ln.createProgram();Ln.attachShader(Fr,hr(Vn,Ln.VERTEX_SHADER)),Ln.attachShader(Fr,hr(Wn,Ln.FRAGMENT_SHADER)),Ln.linkProgram(Fr),Zn[gr]={program:Fr,transaction:function(Yr){Ln.useProgram(Fr),Yr({setUniform:function(eo,ur){for(var kr=[],Br=arguments.length-2;Br-- >0;)kr[Br]=arguments[Br+2];var Rn=xr[ur]||(xr[ur]=Ln.getUniformLocation(Fr,ur));Ln["uniform"+eo].apply(Ln,[Rn].concat(kr))},setAttribute:function(eo,ur,kr,Br,Rn){var Xn=lr[eo];Xn||(Xn=lr[eo]={buf:Ln.createBuffer(),loc:Ln.getAttribLocation(Fr,eo),data:null}),Ln.bindBuffer(Ln.ARRAY_BUFFER,Xn.buf),Ln.vertexAttribPointer(Xn.loc,ur,Ln.FLOAT,!1,0,0),Ln.enableVertexAttribArray(Xn.loc),tr?Ln.vertexAttribDivisor(Xn.loc,Br):yr("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Xn.loc,Br),Rn!==Xn.data&&(Ln.bufferData(Ln.ARRAY_BUFFER,Rn,kr),Xn.data=Rn)}})}}}Zn[gr].transaction(rr)},Yn=function(gr,Vn){fr++;try{Ln.activeTexture(Ln.TEXTURE0+fr);var Wn=br[gr];Wn||(Wn=br[gr]=Ln.createTexture(),Ln.bindTexture(Ln.TEXTURE_2D,Wn),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MIN_FILTER,Ln.NEAREST),Ln.texParameteri(Ln.TEXTURE_2D,Ln.TEXTURE_MAG_FILTER,Ln.NEAREST)),Ln.bindTexture(Ln.TEXTURE_2D,Wn),Vn(Wn,fr)}finally{fr--}},ar=function(gr,Vn,Wn){var rr=Ln.createFramebuffer();Or.push(rr),Ln.bindFramebuffer(Ln.FRAMEBUFFER,rr),Ln.activeTexture(Ln.TEXTURE0+Vn),Ln.bindTexture(Ln.TEXTURE_2D,gr),Ln.framebufferTexture2D(Ln.FRAMEBUFFER,Ln.COLOR_ATTACHMENT0,Ln.TEXTURE_2D,gr,0);try{Wn(rr)}finally{Ln.deleteFramebuffer(rr),Ln.bindFramebuffer(Ln.FRAMEBUFFER,Or[--Or.length-1]||null)}},Sr=function(){ir={},Zn={},br={},fr=-1,Or.length=0};var Pr=yr,zr=hr,Dr=Jn,_r=Yn,Nr=ar,Dn=Sr,tr=typeof WebGL2RenderingContext<"u"&&Ln instanceof WebGL2RenderingContext,ir={},Zn={},br={},fr=-1,Or=[];Ln.canvas.addEventListener("webglcontextlost",function(gr){Sr(),gr.preventDefault()},!1),Rt.set(Ln,Cn={gl:Ln,isWebGL2:tr,getExtension:yr,withProgram:Jn,withTexture:Yn,withTextureFramebuffer:ar,handleContextLoss:Sr})}jn(Cn)}function Ft(Nn,jn,Ln,Cn,tr,ir,Zn,br){Zn===void 0&&(Zn=15),br===void 0&&(br=null),Nt(Nn,function(fr){var Or=fr.gl,Pr=fr.withProgram,zr=fr.withTexture;zr("copy",function(Dr,_r){Or.texImage2D(Or.TEXTURE_2D,0,Or.RGBA,tr,ir,0,Or.RGBA,Or.UNSIGNED_BYTE,jn),Pr("copy",Ct,At,function(Nr){var Dn=Nr.setUniform,yr=Nr.setAttribute;yr("aUV",2,Or.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Dn("1i","image",_r),Or.bindFramebuffer(Or.FRAMEBUFFER,br||null),Or.disable(Or.BLEND),Or.colorMask(Zn&8,Zn&4,Zn&2,Zn&1),Or.viewport(Ln,Cn,tr,ir),Or.scissor(Ln,Cn,tr,ir),Or.drawArrays(Or.TRIANGLES,0,3)})})})}function Ut(Nn,jn,Ln){var Cn=Nn.width,tr=Nn.height;Nt(Nn,function(ir){var Zn=ir.gl,br=new Uint8Array(Cn*tr*4);Zn.readPixels(0,0,Cn,tr,Zn.RGBA,Zn.UNSIGNED_BYTE,br),Nn.width=jn,Nn.height=Ln,Ft(Zn,br,0,0,Cn,tr)})}var Wt=Object.freeze({__proto__:null,withWebGLContext:Nt,renderImageData:Ft,resizeWebGLCanvasWithoutClearing:Ut});function Zt(Nn,jn,Ln,Cn,tr,ir){ir===void 0&&(ir=1);var Zn=new Uint8Array(Nn*jn),br=Cn[2]-Cn[0],fr=Cn[3]-Cn[1],Or=[];Et(Ln,function(yr,hr,Jn,Yn){Or.push({x1:yr,y1:hr,x2:Jn,y2:Yn,minX:Math.min(yr,Jn),minY:Math.min(hr,Yn),maxX:Math.max(yr,Jn),maxY:Math.max(hr,Yn)})}),Or.sort(function(yr,hr){return yr.maxX-hr.maxX});for(var Pr=0;Pr<Nn;Pr++)for(var zr=0;zr<jn;zr++){var Dr=Nr(Cn[0]+br*(Pr+.5)/Nn,Cn[1]+fr*(zr+.5)/jn),_r=Math.pow(1-Math.abs(Dr)/tr,ir)/2;Dr<0&&(_r=1-_r),_r=Math.max(0,Math.min(255,Math.round(_r*255))),Zn[zr*Nn+Pr]=_r}return Zn;function Nr(yr,hr){for(var Jn=1/0,Yn=1/0,ar=Or.length;ar--;){var Sr=Or[ar];if(Sr.maxX+Yn<=yr)break;if(yr+Yn>Sr.minX&&hr-Yn<Sr.maxY&&hr+Yn>Sr.minY){var gr=hn(yr,hr,Sr.x1,Sr.y1,Sr.x2,Sr.y2);gr<Jn&&(Jn=gr,Yn=Math.sqrt(Jn))}}return Dn(yr,hr)&&(Yn=-Yn),Yn}function Dn(yr,hr){for(var Jn=0,Yn=Or.length;Yn--;){var ar=Or[Yn];if(ar.maxX<=yr)break;var Sr=ar.y1>hr!=ar.y2>hr&&yr<(ar.x2-ar.x1)*(hr-ar.y1)/(ar.y2-ar.y1)+ar.x1;Sr&&(Jn+=ar.y1<ar.y2?1:-1)}return Jn!==0}}function Kt(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or){ir===void 0&&(ir=1),br===void 0&&(br=0),fr===void 0&&(fr=0),Or===void 0&&(Or=0),cn(Nn,jn,Ln,Cn,tr,ir,Zn,null,br,fr,Or)}function cn(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or,Pr){ir===void 0&&(ir=1),fr===void 0&&(fr=0),Or===void 0&&(Or=0),Pr===void 0&&(Pr=0);for(var zr=Zt(Nn,jn,Ln,Cn,tr,ir),Dr=new Uint8Array(zr.length*4),_r=0;_r<zr.length;_r++)Dr[_r*4+Pr]=zr[_r];Ft(Zn,Dr,fr,Or,Nn,jn,1<<3-Pr,br)}function hn(Nn,jn,Ln,Cn,tr,ir){var Zn=tr-Ln,br=ir-Cn,fr=Zn*Zn+br*br,Or=fr?Math.max(0,Math.min(1,((Nn-Ln)*Zn+(jn-Cn)*br)/fr)):0,Pr=Nn-(Ln+Or*Zn),zr=jn-(Cn+Or*br);return Pr*Pr+zr*zr}var dn=Object.freeze({__proto__:null,generate:Zt,generateIntoCanvas:Kt,generateIntoFramebuffer:cn}),pn="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",gn="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",vn="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",bn=new Float32Array([0,0,2,0,0,2]),$n=null,Tn=!1,In={},Pn=new WeakMap;function zn(Nn){if(!Tn&&!Qn(Nn))throw new Error("WebGL generation not supported")}function An(Nn,jn,Ln,Cn,tr,ir,Zn){if(ir===void 0&&(ir=1),Zn===void 0&&(Zn=null),!Zn&&(Zn=$n,!Zn)){var br=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!br)throw new Error("OffscreenCanvas or DOM canvas not supported");Zn=$n=br.getContext("webgl",{depth:!1})}zn(Zn);var fr=new Uint8Array(Nn*jn*4);Nt(Zn,function(Dr){var _r=Dr.gl,Nr=Dr.withTexture,Dn=Dr.withTextureFramebuffer;Nr("readable",function(yr,hr){_r.texImage2D(_r.TEXTURE_2D,0,_r.RGBA,Nn,jn,0,_r.RGBA,_r.UNSIGNED_BYTE,null),Dn(yr,hr,function(Jn){xn(Nn,jn,Ln,Cn,tr,ir,_r,Jn,0,0,0),_r.readPixels(0,0,Nn,jn,_r.RGBA,_r.UNSIGNED_BYTE,fr)})})});for(var Or=new Uint8Array(Nn*jn),Pr=0,zr=0;Pr<fr.length;Pr+=4)Or[zr++]=fr[Pr];return Or}function Gn(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or){ir===void 0&&(ir=1),br===void 0&&(br=0),fr===void 0&&(fr=0),Or===void 0&&(Or=0),xn(Nn,jn,Ln,Cn,tr,ir,Zn,null,br,fr,Or)}function xn(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or,Pr){ir===void 0&&(ir=1),fr===void 0&&(fr=0),Or===void 0&&(Or=0),Pr===void 0&&(Pr=0),zn(Zn);var zr=[];Et(Ln,function(Dr,_r,Nr,Dn){zr.push(Dr,_r,Nr,Dn)}),zr=new Float32Array(zr),Nt(Zn,function(Dr){var _r=Dr.gl,Nr=Dr.isWebGL2,Dn=Dr.getExtension,yr=Dr.withProgram,hr=Dr.withTexture,Jn=Dr.withTextureFramebuffer,Yn=Dr.handleContextLoss;if(hr("rawDistances",function(ar,Sr){(Nn!==ar._lastWidth||jn!==ar._lastHeight)&&_r.texImage2D(_r.TEXTURE_2D,0,_r.RGBA,ar._lastWidth=Nn,ar._lastHeight=jn,0,_r.RGBA,_r.UNSIGNED_BYTE,null),yr("main",pn,gn,function(gr){var Vn=gr.setAttribute,Wn=gr.setUniform,rr=!Nr&&Dn("ANGLE_instanced_arrays"),lr=!Nr&&Dn("EXT_blend_minmax");Vn("aUV",2,_r.STATIC_DRAW,0,bn),Vn("aLineSegment",4,_r.DYNAMIC_DRAW,1,zr),Wn.apply(void 0,["4f","uGlyphBounds"].concat(Cn)),Wn("1f","uMaxDistance",tr),Wn("1f","uExponent",ir),Jn(ar,Sr,function(xr){_r.enable(_r.BLEND),_r.colorMask(!0,!0,!0,!0),_r.viewport(0,0,Nn,jn),_r.scissor(0,0,Nn,jn),_r.blendFunc(_r.ONE,_r.ONE),_r.blendEquationSeparate(_r.FUNC_ADD,Nr?_r.MAX:lr.MAX_EXT),_r.clear(_r.COLOR_BUFFER_BIT),Nr?_r.drawArraysInstanced(_r.TRIANGLES,0,3,zr.length/4):rr.drawArraysInstancedANGLE(_r.TRIANGLES,0,3,zr.length/4)})}),yr("post",Ct,vn,function(gr){gr.setAttribute("aUV",2,_r.STATIC_DRAW,0,bn),gr.setUniform("1i","tex",Sr),_r.bindFramebuffer(_r.FRAMEBUFFER,br),_r.disable(_r.BLEND),_r.colorMask(Pr===0,Pr===1,Pr===2,Pr===3),_r.viewport(fr,Or,Nn,jn),_r.scissor(fr,Or,Nn,jn),_r.drawArrays(_r.TRIANGLES,0,3)})}),_r.isContextLost())throw Yn(),new Error("webgl context lost")})}function Qn(Nn){var jn=!Nn||Nn===$n?In:Nn.canvas||Nn,Ln=Pn.get(jn);if(Ln===void 0){Tn=!0;var Cn=null;try{var tr=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ir=An(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Nn);Ln=ir&&tr.length===ir.length&&ir.every(function(Zn,br){return Zn===tr[br]}),Ln||(Cn="bad trial run results",console.info(tr,ir))}catch(Zn){Ln=!1,Cn=Zn.message}Cn&&console.warn("WebGL SDF generation not supported:",Cn),Tn=!1,Pn.set(jn,Ln)}return Ln}var qn=Object.freeze({__proto__:null,generate:An,generateIntoCanvas:Gn,generateIntoFramebuffer:xn,isSupported:Qn});function nr(Nn,jn,Ln,Cn,tr,ir){tr===void 0&&(tr=Math.max(Cn[2]-Cn[0],Cn[3]-Cn[1])/2),ir===void 0&&(ir=1);try{return An.apply(qn,arguments)}catch(Zn){return console.info("WebGL SDF generation failed, falling back to JS",Zn),Zt.apply(dn,arguments)}}function Un(Nn,jn,Ln,Cn,tr,ir,Zn,br,fr,Or){tr===void 0&&(tr=Math.max(Cn[2]-Cn[0],Cn[3]-Cn[1])/2),ir===void 0&&(ir=1),br===void 0&&(br=0),fr===void 0&&(fr=0),Or===void 0&&(Or=0);try{return Gn.apply(qn,arguments)}catch(Pr){return console.info("WebGL SDF generation failed, falling back to JS",Pr),Kt.apply(dn,arguments)}}return lt.forEachPathCommand=St,lt.generate=nr,lt.generateIntoCanvas=Un,lt.javascript=dn,lt.pathToLineSegments=Et,lt.webgl=qn,lt.webglUtils=Wt,Object.defineProperty(lt,"__esModule",{value:!0}),lt}({});return ft}function bidiFactory(){var ft=function(lt){var dt={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},vt={},St={};vt.L=1,St[1]="L",Object.keys(dt).forEach(function(Yn,ar){vt[Yn]=1<<ar+1,St[vt[Yn]]=Yn}),Object.freeze(vt);var Et=vt.LRI|vt.RLI|vt.FSI,Ct=vt.L|vt.R|vt.AL,At=vt.B|vt.S|vt.WS|vt.ON|vt.FSI|vt.LRI|vt.RLI|vt.PDI,Rt=vt.BN|vt.RLE|vt.LRE|vt.RLO|vt.LRO|vt.PDF,Dt=vt.S|vt.WS|vt.B|Et|vt.PDI|Rt,Nt=null;function Ft(){if(!Nt){Nt=new Map;var Yn=function(Sr){if(dt.hasOwnProperty(Sr)){var gr=0;dt[Sr].split(",").forEach(function(Vn){var Wn=Vn.split("+"),rr=Wn[0],lr=Wn[1];rr=parseInt(rr,36),lr=lr?parseInt(lr,36):0,Nt.set(gr+=rr,vt[Sr]);for(var xr=0;xr<lr;xr++)Nt.set(++gr,vt[Sr])})}};for(var ar in dt)Yn(ar)}}function Ut(Yn){return Ft(),Nt.get(Yn.codePointAt(0))||vt.L}function Wt(Yn){return St[Ut(Yn)]}var Zt={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function Kt(Yn,ar){var Sr=36,gr=0,Vn=new Map,Wn=ar&&new Map,rr;return Yn.split(",").forEach(function lr(xr){if(xr.indexOf("+")!==-1)for(var Fr=+xr;Fr--;)lr(rr);else{rr=xr;var mr=xr.split(">"),Yr=mr[0],Vr=mr[1];Yr=String.fromCodePoint(gr+=parseInt(Yr,Sr)),Vr=String.fromCodePoint(gr+=parseInt(Vr,Sr)),Vn.set(Yr,Vr),ar&&Wn.set(Vr,Yr)}}),{map:Vn,reverseMap:Wn}}var cn,hn,dn;function pn(){if(!cn){var Yn=Kt(Zt.pairs,!0),ar=Yn.map,Sr=Yn.reverseMap;cn=ar,hn=Sr,dn=Kt(Zt.canonical,!1).map}}function gn(Yn){return pn(),cn.get(Yn)||null}function vn(Yn){return pn(),hn.get(Yn)||null}function bn(Yn){return pn(),dn.get(Yn)||null}var $n=vt.L,Tn=vt.R,In=vt.EN,Pn=vt.ES,zn=vt.ET,An=vt.AN,Gn=vt.CS,xn=vt.B,Qn=vt.S,qn=vt.ON,nr=vt.BN,Un=vt.NSM,Nn=vt.AL,jn=vt.LRO,Ln=vt.RLO,Cn=vt.LRE,tr=vt.RLE,ir=vt.PDF,Zn=vt.LRI,br=vt.RLI,fr=vt.FSI,Or=vt.PDI;function Pr(Yn,ar){for(var Sr=125,gr=new Uint32Array(Yn.length),Vn=0;Vn<Yn.length;Vn++)gr[Vn]=Ut(Yn[Vn]);var Wn=new Map;function rr(Ms,Ks){var ms=gr[Ms];gr[Ms]=Ks,Wn.set(ms,Wn.get(ms)-1),ms&At&&Wn.set(At,Wn.get(At)-1),Wn.set(Ks,(Wn.get(Ks)||0)+1),Ks&At&&Wn.set(At,(Wn.get(At)||0)+1)}for(var lr=new Uint8Array(Yn.length),xr=new Map,Fr=[],mr=null,Yr=0;Yr<Yn.length;Yr++)mr||Fr.push(mr={start:Yr,end:Yn.length-1,level:ar==="rtl"?1:ar==="ltr"?0:Rm(Yr,!1)}),gr[Yr]&xn&&(mr.end=Yr,mr=null);for(var Vr=tr|Cn|Ln|jn|Et|Or|ir|xn,eo=function(Ms){return Ms+(Ms&1?1:2)},ur=function(Ms){return Ms+(Ms&1?2:1)},kr=0;kr<Fr.length;kr++){mr=Fr[kr];var Br=[{_level:mr.level,_override:0,_isolate:0}],Rn=void 0,Xn=0,cr=0,wr=0;Wn.clear();for(var Kn=mr.start;Kn<=mr.end;Kn++){var Cr=gr[Kn];if(Rn=Br[Br.length-1],Wn.set(Cr,(Wn.get(Cr)||0)+1),Cr&At&&Wn.set(At,(Wn.get(At)||0)+1),Cr&Vr)if(Cr&(tr|Cn)){lr[Kn]=Rn._level;var qr=(Cr===tr?ur:eo)(Rn._level);qr<=Sr&&!Xn&&!cr?Br.push({_level:qr,_override:0,_isolate:0}):Xn||cr++}else if(Cr&(Ln|jn)){lr[Kn]=Rn._level;var oo=(Cr===Ln?ur:eo)(Rn._level);oo<=Sr&&!Xn&&!cr?Br.push({_level:oo,_override:Cr&Ln?Tn:$n,_isolate:0}):Xn||cr++}else if(Cr&Et){Cr&fr&&(Cr=Rm(Kn+1,!0)===1?br:Zn),lr[Kn]=Rn._level,Rn._override&&rr(Kn,Rn._override);var co=(Cr===br?ur:eo)(Rn._level);co<=Sr&&Xn===0&&cr===0?(wr++,Br.push({_level:co,_override:0,_isolate:1,_isolInitIndex:Kn})):Xn++}else if(Cr&Or){if(Xn>0)Xn--;else if(wr>0){for(cr=0;!Br[Br.length-1]._isolate;)Br.pop();var jo=Br[Br.length-1]._isolInitIndex;jo!=null&&(xr.set(jo,Kn),xr.set(Kn,jo)),Br.pop(),wr--}Rn=Br[Br.length-1],lr[Kn]=Rn._level,Rn._override&&rr(Kn,Rn._override)}else Cr&ir?(Xn===0&&(cr>0?cr--:!Rn._isolate&&Br.length>1&&(Br.pop(),Rn=Br[Br.length-1])),lr[Kn]=Rn._level):Cr&xn&&(lr[Kn]=mr.level);else lr[Kn]=Rn._level,Rn._override&&Cr!==nr&&rr(Kn,Rn._override)}for(var Xo=[],rs=null,zo=mr.start;zo<=mr.end;zo++){var os=gr[zo];if(!(os&Rt)){var Lo=lr[zo],Zo=os&Et,Ll=os===Or;rs&&Lo===rs._level?(rs._end=zo,rs._endsWithIsolInit=Zo):Xo.push(rs={_start:zo,_end:zo,_level:Lo,_startsWithPDI:Ll,_endsWithIsolInit:Zo})}}for(var So=[],ss=0;ss<Xo.length;ss++){var sr=Xo[ss];if(!sr._startsWithPDI||sr._startsWithPDI&&!xr.has(sr._start)){for(var Gr=[rs=sr],Qr=void 0;rs&&rs._endsWithIsolInit&&(Qr=xr.get(rs._end))!=null;)for(var Ir=ss+1;Ir<Xo.length;Ir++)if(Xo[Ir]._start===Qr){Gr.push(rs=Xo[Ir]);break}for(var Xr=[],Oo=0;Oo<Gr.length;Oo++)for(var _o=Gr[Oo],wo=_o._start;wo<=_o._end;wo++)Xr.push(wo);for(var Ao=lr[Xr[0]],Ro=mr.level,Co=Xr[0]-1;Co>=0;Co--)if(!(gr[Co]&Rt)){Ro=lr[Co];break}var to=Xr[Xr.length-1],vs=lr[to],zs=mr.level;if(!(gr[to]&Et)){for(var Hs=to+1;Hs<=mr.end;Hs++)if(!(gr[Hs]&Rt)){zs=lr[Hs];break}}So.push({_seqIndices:Xr,_sosType:Math.max(Ro,Ao)%2?Tn:$n,_eosType:Math.max(zs,vs)%2?Tn:$n})}}for(var Nl=0;Nl<So.length;Nl++){var Fo=So[Nl],_i=Fo._seqIndices,ts=Fo._sosType,Mo=Fo._eosType;if(Wn.get(Un))for(var fo=0;fo<_i.length;fo++){var jp=_i[fo];if(gr[jp]&Un){for(var Ol=ts,Sl=fo-1;Sl>=0;Sl--)if(!(gr[_i[Sl]]&Rt)){Ol=gr[_i[Sl]];break}rr(jp,Ol&(Et|Or)?qn:Ol)}}if(Wn.get(In))for(var ds=0;ds<_i.length;ds++){var no=_i[ds];if(gr[no]&In)for(var Yo=ds-1;Yo>=-1;Yo--){var _s=Yo===-1?ts:gr[_i[Yo]];if(_s&Ct){_s===Nn&&rr(no,An);break}}}if(Wn.get(Nn))for(var Os=0;Os<_i.length;Os++){var Qs=_i[Os];gr[Qs]&Nn&&rr(Qs,Tn)}if(Wn.get(Pn)||Wn.get(Gn))for(var Po=1;Po<_i.length-1;Po++){var ba=_i[Po];if(gr[ba]&(Pn|Gn)){for(var Cs=0,np=0,rp=Po-1;rp>=0&&(Cs=gr[_i[rp]],!!(Cs&Rt));rp--);for(var Cm=Po+1;Cm<_i.length&&(np=gr[_i[Cm]],!!(np&Rt));Cm++);Cs===np&&(gr[ba]===Pn?Cs===In:Cs&(In|An))&&rr(ba,Cs)}}if(Wn.get(In))for(var mu=0;mu<_i.length;mu++){var X_=_i[mu];if(gr[X_]&In){for(var Tl=mu-1;Tl>=0&&gr[_i[Tl]]&(zn|Rt);Tl--)rr(_i[Tl],In);for(var Sp=mu+1;Sp<_i.length&&gr[_i[Sp]]&(zn|Rt);Sp++)rr(_i[Sp],In)}}if(Wn.get(zn)||Wn.get(Pn)||Wn.get(Gn))for(var Xp=0;Xp<_i.length;Xp++){var Am=_i[Xp];if(gr[Am]&(zn|Pn|Gn)){rr(Am,qn);for(var ip=Xp-1;ip>=0&&gr[_i[ip]]&Rt;ip--)rr(_i[ip],qn);for(var wu=Xp+1;wu<_i.length&&gr[_i[wu]]&Rt;wu++)rr(_i[wu],qn)}}if(Wn.get(In))for(var zu=0,Tp=ts;zu<_i.length;zu++){var Y_=_i[zu],Yp=gr[Y_];Yp&In?Tp===$n&&rr(Y_,$n):Yp&Ct&&(Tp=Yp)}if(Wn.get(At)){var ru=Tn|In|An,Zp=ru|$n,gu=[];{for(var xp=[],Cu=0;Cu<_i.length;Cu++)if(gr[_i[Cu]]&At){var Vo=Yn[_i[Cu]],Ep=void 0;if(gn(Vo)!==null)if(xp.length<63)xp.push({char:Vo,seqIndex:Cu});else break;else if((Ep=vn(Vo))!==null)for(var _u=xp.length-1;_u>=0;_u--){var km=xp[_u].char;if(km===Ep||km===vn(bn(Vo))||gn(bn(km))===Vo){gu.push([xp[_u].seqIndex,Cu]),xp.length=_u;break}}}gu.sort(function(Ms,Ks){return Ms[0]-Ks[0]})}for(var qp=0;qp<gu.length;qp++){for(var Zl=gu[qp],ys=Zl[0],Zs=Zl[1],Kp=!1,xl=0,Jp=ys+1;Jp<Zs;Jp++){var Hu=_i[Jp];if(gr[Hu]&Zp){Kp=!0;var Kl=gr[Hu]&ru?Tn:$n;if(Kl===ju(Hu)){xl=Kl;break}}}if(Kp&&!xl){xl=ts;for(var r_=ys-1;r_>=0;r_--){var em=_i[r_];if(gr[em]&Zp){var El=gr[em]&ru?Tn:$n;El!==ju(em)?xl=El:xl=ju(em);break}}}if(xl){if(gr[_i[ys]]=gr[_i[Zs]]=xl,xl!==ju(_i[ys])){for(var Bl=ys+1;Bl<_i.length;Bl++)if(!(gr[_i[Bl]]&Rt)){Ut(Yn[_i[Bl]])&Un&&(gr[_i[Bl]]=xl);break}}if(xl!==ju(_i[Zs])){for(var Qu=Zs+1;Qu<_i.length;Qu++)if(!(gr[_i[Qu]]&Rt)){Ut(Yn[_i[Qu]])&Un&&(gr[_i[Qu]]=xl);break}}}}for(var qs=0;qs<_i.length;qs++)if(gr[_i[qs]]&At){for(var Im=qs,$l=qs,Jl=ts,Rs=qs-1;Rs>=0;Rs--)if(gr[_i[Rs]]&Rt)Im=Rs;else{Jl=gr[_i[Rs]]&ru?Tn:$n;break}for(var tm=Mo,Au=qs+1;Au<_i.length;Au++)if(gr[_i[Au]]&(At|Rt))$l=Au;else{tm=gr[_i[Au]]&ru?Tn:$n;break}for(var Cl=Im;Cl<=$l;Cl++)gr[_i[Cl]]=Jl===tm?Jl:ju(_i[Cl]);qs=$l}}}for(var Es=mr.start;Es<=mr.end;Es++){var nm=lr[Es],ku=gr[Es];if(nm&1?ku&($n|In|An)&&lr[Es]++:ku&Tn?lr[Es]++:ku&(An|In)&&(lr[Es]+=2),ku&Rt&&(lr[Es]=Es===0?mr.level:lr[Es-1]),Es===mr.end||Ut(Yn[Es])&(Qn|xn))for(var $p=Es;$p>=0&&Ut(Yn[$p])&Dt;$p--)lr[$p]=mr.level}}return{levels:lr,paragraphs:Fr};function Rm(Ms,Ks){for(var ms=Ms;ms<Yn.length;ms++){var Ps=gr[ms];if(Ps&(Tn|Nn))return 1;if(Ps&(xn|$n)||Ks&&Ps===Or)return 0;if(Ps&Et){var Iu=Z_(ms);ms=Iu===-1?Yn.length:Iu}}return 0}function Z_(Ms){for(var Ks=1,ms=Ms+1;ms<Yn.length;ms++){var Ps=gr[ms];if(Ps&xn)break;if(Ps&Or){if(--Ks===0)return ms}else Ps&Et&&Ks++}return-1}function ju(Ms){return lr[Ms]&1?Tn:$n}}var zr="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Dr;function _r(){if(!Dr){var Yn=Kt(zr,!0),ar=Yn.map,Sr=Yn.reverseMap;Sr.forEach(function(gr,Vn){ar.set(Vn,gr)}),Dr=ar}}function Nr(Yn){return _r(),Dr.get(Yn)||null}function Dn(Yn,ar,Sr,gr){var Vn=Yn.length;Sr=Math.max(0,Sr==null?0:+Sr),gr=Math.min(Vn-1,gr==null?Vn-1:+gr);for(var Wn=new Map,rr=Sr;rr<=gr;rr++)if(ar[rr]&1){var lr=Nr(Yn[rr]);lr!==null&&Wn.set(rr,lr)}return Wn}function yr(Yn,ar,Sr,gr){var Vn=Yn.length;Sr=Math.max(0,Sr==null?0:+Sr),gr=Math.min(Vn-1,gr==null?Vn-1:+gr);var Wn=[];return ar.paragraphs.forEach(function(rr){var lr=Math.max(Sr,rr.start),xr=Math.min(gr,rr.end);if(lr<xr){for(var Fr=ar.levels.slice(lr,xr+1),mr=xr;mr>=lr&&Ut(Yn[mr])&Dt;mr--)Fr[mr]=rr.level;for(var Yr=rr.level,Vr=1/0,eo=0;eo<Fr.length;eo++){var ur=Fr[eo];ur>Yr&&(Yr=ur),ur<Vr&&(Vr=ur|1)}for(var kr=Yr;kr>=Vr;kr--)for(var Br=0;Br<Fr.length;Br++)if(Fr[Br]>=kr){for(var Rn=Br;Br+1<Fr.length&&Fr[Br+1]>=kr;)Br++;Br>Rn&&Wn.push([Rn+Sr,Br+Sr])}}}),Wn}function hr(Yn,ar,Sr,gr){var Vn=Jn(Yn,ar,Sr,gr),Wn=[].concat(Yn);return Vn.forEach(function(rr,lr){Wn[lr]=(ar.levels[rr]&1?Nr(Yn[rr]):null)||Yn[rr]}),Wn.join("")}function Jn(Yn,ar,Sr,gr){for(var Vn=yr(Yn,ar,Sr,gr),Wn=[],rr=0;rr<Yn.length;rr++)Wn[rr]=rr;return Vn.forEach(function(lr){for(var xr=lr[0],Fr=lr[1],mr=Wn.slice(xr,Fr+1),Yr=mr.length;Yr--;)Wn[Fr-Yr]=mr[Yr]}),Wn}return lt.closingToOpeningBracket=vn,lt.getBidiCharType=Ut,lt.getBidiCharTypeName=Wt,lt.getCanonicalBracket=bn,lt.getEmbeddingLevels=Pr,lt.getMirroredCharacter=Nr,lt.getMirroredCharactersMap=Dn,lt.getReorderSegments=yr,lt.getReorderedIndices=Jn,lt.getReorderedString=hr,lt.openingToClosingBracket=gn,Object.defineProperty(lt,"__esModule",{value:!0}),lt}({});return ft}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(ft){const lt=/^[ \t]*#include +<([\w\d./]+)>/gm;function dt(vt,St){let Et=ShaderChunk[St];return Et?expandShaderIncludes(Et):vt}return ft.replace(lt,dt)}const _lut=[];for(let ft=0;ft<256;ft++)_lut[ft]=(ft<16?"0":"")+ft.toString(16);function generateUUID(){const ft=Math.random()*4294967295|0,lt=Math.random()*4294967295|0,dt=Math.random()*4294967295|0,vt=Math.random()*4294967295|0;return(_lut[ft&255]+_lut[ft>>8&255]+_lut[ft>>16&255]+_lut[ft>>24&255]+"-"+_lut[lt&255]+_lut[lt>>8&255]+"-"+_lut[lt>>16&15|64]+_lut[lt>>24&255]+"-"+_lut[dt&63|128]+_lut[dt>>8&255]+"-"+_lut[dt>>16&255]+_lut[dt>>24&255]+_lut[vt&255]+_lut[vt>>8&255]+_lut[vt>>16&255]+_lut[vt>>24&255]).toUpperCase()}const assign$1=Object.assign||function(){let ft=arguments[0];for(let lt=1,dt=arguments.length;lt<dt;lt++){let vt=arguments[lt];if(vt)for(let St in vt)vt.hasOwnProperty(St)&&(ft[St]=vt[St])}return ft},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(ft,lt){const dt=getKeyForOptions(lt);let vt=CONSTRUCTOR_CACHE.get(ft);if(vt||CONSTRUCTOR_CACHE.set(ft,vt=Object.create(null)),vt[dt])return new vt[dt];const St=`_onBeforeCompile${dt}`,Et=function(Dt){ft.onBeforeCompile.call(this,Dt);const Nt=this.customProgramCacheKey()+"|"+Dt.vertexShader+"|"+Dt.fragmentShader;let Ft=SHADER_UPGRADE_CACHE[Nt];if(!Ft){const Ut=upgradeShaders(Dt,lt,dt);Ft=SHADER_UPGRADE_CACHE[Nt]=Ut}Dt.vertexShader=Ft.vertexShader,Dt.fragmentShader=Ft.fragmentShader,assign$1(Dt.uniforms,this.uniforms),lt.timeUniform&&(Dt.uniforms[lt.timeUniform]={get value(){return Date.now()-epoch}}),this[St]&&this[St](Dt)},Ct=function(){return At(lt.chained?ft:ft.clone())},At=function(Dt){const Nt=Object.create(Dt,Rt);return Object.defineProperty(Nt,"baseMaterial",{value:ft}),Object.defineProperty(Nt,"id",{value:materialInstanceId++}),Nt.uuid=generateUUID(),Nt.uniforms=assign$1({},Dt.uniforms,lt.uniforms),Nt.defines=assign$1({},Dt.defines,lt.defines),Nt.defines[`TROIKA_DERIVED_MATERIAL_${dt}`]="",Nt.extensions=assign$1({},Dt.extensions,lt.extensions),Nt._listeners=void 0,Nt},Rt={constructor:{value:Ct},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return ft.customProgramCacheKey()+"|"+dt}},onBeforeCompile:{get(){return Et},set(Dt){this[St]=Dt}},copy:{writable:!0,configurable:!0,value:function(Dt){return ft.copy.call(this,Dt),!ft.isShaderMaterial&&!ft.isDerivedMaterial&&(assign$1(this.extensions,Dt.extensions),assign$1(this.defines,Dt.defines),assign$1(this.uniforms,UniformsUtils.clone(Dt.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const Dt=new ft.constructor;return At(Dt).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let Dt=this._depthMaterial;return Dt||(Dt=this._depthMaterial=createDerivedMaterial(ft.isDerivedMaterial?ft.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),lt),Dt.defines.IS_DEPTH_MATERIAL="",Dt.uniforms=this.uniforms),Dt}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let Dt=this._distanceMaterial;return Dt||(Dt=this._distanceMaterial=createDerivedMaterial(ft.isDerivedMaterial?ft.getDistanceMaterial():new MeshDistanceMaterial,lt),Dt.defines.IS_DISTANCE_MATERIAL="",Dt.uniforms=this.uniforms),Dt}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:Dt,_distanceMaterial:Nt}=this;Dt&&Dt.dispose(),Nt&&Nt.dispose(),ft.dispose.call(this)}}};return vt[dt]=Ct,new Ct}function upgradeShaders({vertexShader:ft,fragmentShader:lt},dt,vt){let{vertexDefs:St,vertexMainIntro:Et,vertexMainOutro:Ct,vertexTransform:At,fragmentDefs:Rt,fragmentMainIntro:Dt,fragmentMainOutro:Nt,fragmentColorTransform:Ft,customRewriter:Ut,timeUniform:Wt}=dt;if(St=St||"",Et=Et||"",Ct=Ct||"",Rt=Rt||"",Dt=Dt||"",Nt=Nt||"",(At||Ut)&&(ft=expandShaderIncludes(ft)),(Ft||Ut)&&(lt=lt.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),lt=expandShaderIncludes(lt)),Ut){let Zt=Ut({vertexShader:ft,fragmentShader:lt});ft=Zt.vertexShader,lt=Zt.fragmentShader}if(Ft){let Zt=[];lt=lt.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,Kt=>(Zt.push(Kt),"")),Nt=`${Ft}
${Zt.join(`
`)}
${Nt}`}if(Wt){const Zt=`
uniform float ${Wt};
`;St=Zt+St,Rt=Zt+Rt}return At&&(ft=`vec3 troika_position_${vt};
vec3 troika_normal_${vt};
vec2 troika_uv_${vt};
${ft}
`,St=`${St}
void troikaVertexTransform${vt}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${At}
}
`,Et=`
troika_position_${vt} = vec3(position);
troika_normal_${vt} = vec3(normal);
troika_uv_${vt} = vec2(uv);
troikaVertexTransform${vt}(troika_position_${vt}, troika_normal_${vt}, troika_uv_${vt});
${Et}
`,ft=ft.replace(/\b(position|normal|uv)\b/g,(Zt,Kt,cn,hn)=>/\battribute\s+vec[23]\s+$/.test(hn.substr(0,cn))?Kt:`troika_${Kt}_${vt}`)),ft=injectIntoShaderCode(ft,vt,St,Et,Ct),lt=injectIntoShaderCode(lt,vt,Rt,Dt,Nt),{vertexShader:ft,fragmentShader:lt}}function injectIntoShaderCode(ft,lt,dt,vt,St){return(vt||St||dt)&&(ft=ft.replace(voidMainRegExp,`
${dt}
void troikaOrigMain${lt}() {`),ft+=`
void main() {
  ${vt}
  troikaOrigMain${lt}();
  ${St}
}`),ft}function optionsJsonReplacer(ft,lt){return ft==="uniforms"?void 0:typeof lt=="function"?lt.toString():lt}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(ft){const lt=JSON.stringify(ft,optionsJsonReplacer);let dt=optionsHashesToIds.get(lt);return dt==null&&optionsHashesToIds.set(lt,dt=++_idCtr),dt}function createTypesetter(ft,lt,dt){const{defaultFontURL:vt}=dt,St=Object.create(null),Et=1/0,Ct=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,At="[^\\S\\u00A0]",Rt=new RegExp(`${At}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function Dt(dn,pn){function gn(){const vn=bn=>{console.error(`Failure loading font ${dn}${dn===vt?"":"; trying fallback"}`,bn),dn!==vt&&(dn=vt,gn())};try{const bn=new XMLHttpRequest;bn.open("get",dn,!0),bn.responseType="arraybuffer",bn.onload=function(){if(bn.status>=400)vn(new Error(bn.statusText));else if(bn.status>0)try{const $n=ft(bn.response);pn($n)}catch($n){vn($n)}},bn.onerror=vn,bn.send()}catch(bn){vn(bn)}}gn()}function Nt(dn,pn){dn||(dn=vt);let gn=St[dn];gn?gn.pending?gn.pending.push(pn):pn(gn):(St[dn]={pending:[pn]},Dt(dn,vn=>{let bn=St[dn].pending;St[dn]=vn,bn.forEach($n=>$n(vn))}))}function Ft({text:dn="",font:pn=vt,sdfGlyphSize:gn=64,fontSize:vn=1,letterSpacing:bn=0,lineHeight:$n="normal",maxWidth:Tn=Et,direction:In,textAlign:Pn="left",textIndent:zn=0,whiteSpace:An="normal",overflowWrap:Gn="normal",anchorX:xn=0,anchorY:Qn=0,includeCaretPositions:qn=!1,chunkedBoundsSize:nr=8192,colorRanges:Un=null},Nn,jn=!1){const Ln=Kt(),Cn={fontLoad:0,typesetting:0};dn.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),dn=dn.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),vn=+vn,bn=+bn,Tn=+Tn,$n=$n||"normal",zn=+zn,Nt(pn,tr=>{const ir=isFinite(Tn);let Zn=null,br=null,fr=null,Or=null,Pr=null,zr=null,Dr=null,_r=0,Nr=0,Dn=An!=="nowrap";const{ascender:yr,descender:hr,unitsPerEm:Jn,lineGap:Yn,capHeight:ar,xHeight:Sr}=tr;Cn.fontLoad=Kt()-Ln;const gr=Kt(),Vn=vn/Jn;$n==="normal"&&($n=(yr-hr+Yn)/Jn),$n=$n*vn;const Wn=($n-(yr-hr)*Vn)/2,rr=-(yr*Vn+Wn),lr=Math.min($n,(yr-hr)*Vn),xr=(yr+hr)/2*Vn-lr/2;let Fr=zn,mr=new cn;const Yr=[mr];tr.forEachGlyph(dn,vn,bn,(ur,kr,Br)=>{const Rn=dn.charAt(Br),Xn=ur.advanceWidth*Vn,cr=mr.count;let wr;if("isEmpty"in ur||(ur.isWhitespace=!!Rn&&new RegExp(At).test(Rn),ur.canBreakAfter=!!Rn&&Rt.test(Rn),ur.isEmpty=ur.xMin===ur.xMax||ur.yMin===ur.yMax||Ct.test(Rn)),!ur.isWhitespace&&!ur.isEmpty&&Nr++,Dn&&ir&&!ur.isWhitespace&&kr+Xn+Fr>Tn&&cr){if(mr.glyphAt(cr-1).glyphObj.canBreakAfter)wr=new cn,Fr=-kr;else for(let Cr=cr;Cr--;)if(Cr===0&&Gn==="break-word"){wr=new cn,Fr=-kr;break}else if(mr.glyphAt(Cr).glyphObj.canBreakAfter){wr=mr.splitAt(Cr+1);const qr=wr.glyphAt(0).x;Fr-=qr;for(let oo=wr.count;oo--;)wr.glyphAt(oo).x-=qr;break}wr&&(mr.isSoftWrapped=!0,mr=wr,Yr.push(mr),_r=Tn)}let Kn=mr.glyphAt(mr.count);Kn.glyphObj=ur,Kn.x=kr+Fr,Kn.width=Xn,Kn.charIndex=Br,Rn===`
`&&(mr=new cn,Yr.push(mr),Fr=-(kr+Xn+bn*vn)+zn)}),Yr.forEach(ur=>{for(let kr=ur.count;kr--;){let{glyphObj:Br,x:Rn,width:Xn}=ur.glyphAt(kr);if(!Br.isWhitespace){ur.width=Rn+Xn,ur.width>_r&&(_r=ur.width);return}}});let Vr=0,eo=0;if(xn&&(typeof xn=="number"?Vr=-xn:typeof xn=="string"&&(Vr=-_r*(xn==="left"?0:xn==="center"?.5:xn==="right"?1:Wt(xn)))),Qn){if(typeof Qn=="number")eo=-Qn;else if(typeof Qn=="string"){let ur=Yr.length*$n;eo=Qn==="top"?0:Qn==="top-baseline"?-rr:Qn==="top-cap"?-rr-ar*Vn:Qn==="top-ex"?-rr-Sr*Vn:Qn==="middle"?ur/2:Qn==="bottom"?ur:Qn==="bottom-baseline"?ur-Wn+hr*Vn:Wt(Qn)*ur}}if(!jn){const ur=lt.getEmbeddingLevels(dn,In);Zn=new Uint16Array(Nr),br=new Float32Array(Nr*2),fr={},zr=[Et,Et,-Et,-Et],Dr=[];let kr=rr;qn&&(Pr=new Float32Array(dn.length*3)),Un&&(Or=new Uint8Array(Nr*3));let Br=0,Rn=-1,Xn=-1,cr,wr;if(Yr.forEach((Kn,Cr)=>{let{count:qr,width:oo}=Kn;if(qr>0){let co=0;for(let Lo=qr;Lo--&&Kn.glyphAt(Lo).glyphObj.isWhitespace;)co++;let jo=0,Xo=0;if(Pn==="center")jo=(_r-oo)/2;else if(Pn==="right")jo=_r-oo;else if(Pn==="justify"&&Kn.isSoftWrapped){let Lo=0;for(let Zo=qr-co;Zo--;)Kn.glyphAt(Zo).glyphObj.isWhitespace&&Lo++;Xo=(_r-oo)/Lo}if(Xo||jo){let Lo=0;for(let Zo=0;Zo<qr;Zo++){let Ll=Kn.glyphAt(Zo);const So=Ll.glyphObj;Ll.x+=jo+Lo,Xo!==0&&So.isWhitespace&&Zo<qr-co&&(Lo+=Xo,Ll.width+=Xo)}}const rs=lt.getReorderSegments(dn,ur,Kn.glyphAt(0).charIndex,Kn.glyphAt(Kn.count-1).charIndex);for(let Lo=0;Lo<rs.length;Lo++){const[Zo,Ll]=rs[Lo];let So=1/0,ss=-1/0;for(let sr=0;sr<qr;sr++)if(Kn.glyphAt(sr).charIndex>=Zo){let Gr=sr,Qr=sr;for(;Qr<qr;Qr++){let Ir=Kn.glyphAt(Qr);if(Ir.charIndex>Ll)break;Qr<qr-co&&(So=Math.min(So,Ir.x),ss=Math.max(ss,Ir.x+Ir.width))}for(let Ir=Gr;Ir<Qr;Ir++){const Xr=Kn.glyphAt(Ir);Xr.x=ss-(Xr.x+Xr.width-So)}break}}let zo;const os=Lo=>zo=Lo;for(let Lo=0;Lo<qr;Lo++){let Zo=Kn.glyphAt(Lo);zo=Zo.glyphObj;const Ll=zo.index,So=ur.levels[Zo.charIndex]&1;if(So){const ss=lt.getMirroredCharacter(dn[Zo.charIndex]);ss&&tr.forEachGlyph(ss,0,0,os)}if(qn){const{charIndex:ss}=Zo,sr=Zo.x+Vr,Gr=Zo.x+Zo.width+Vr;Pr[ss*3]=So?Gr:sr,Pr[ss*3+1]=So?sr:Gr,Pr[ss*3+2]=kr+xr+eo;const Qr=ss-Rn;Qr>1&&Zt(Pr,Rn,Qr),Rn=ss}if(Un){const{charIndex:ss}=Zo;for(;ss>Xn;)Xn++,Un.hasOwnProperty(Xn)&&(wr=Un[Xn])}if(!zo.isWhitespace&&!zo.isEmpty){const ss=Br++;fr[Ll]||(fr[Ll]={path:zo.path,pathBounds:[zo.xMin,zo.yMin,zo.xMax,zo.yMax]});const sr=Zo.x+Vr,Gr=kr+eo;br[ss*2]=sr,br[ss*2+1]=Gr;const Qr=sr+zo.xMin*Vn,Ir=Gr+zo.yMin*Vn,Xr=sr+zo.xMax*Vn,Oo=Gr+zo.yMax*Vn;Qr<zr[0]&&(zr[0]=Qr),Ir<zr[1]&&(zr[1]=Ir),Xr>zr[2]&&(zr[2]=Xr),Oo>zr[3]&&(zr[3]=Oo),ss%nr===0&&(cr={start:ss,end:ss,rect:[Et,Et,-Et,-Et]},Dr.push(cr)),cr.end++;const _o=cr.rect;if(Qr<_o[0]&&(_o[0]=Qr),Ir<_o[1]&&(_o[1]=Ir),Xr>_o[2]&&(_o[2]=Xr),Oo>_o[3]&&(_o[3]=Oo),Zn[ss]=Ll,Un){const wo=ss*3;Or[wo]=wr>>16&255,Or[wo+1]=wr>>8&255,Or[wo+2]=wr&255}}}}kr-=$n}),Pr){const Kn=dn.length-Rn;Kn>1&&Zt(Pr,Rn,Kn)}}Cn.typesetting=Kt()-gr,Nn({glyphIds:Zn,glyphPositions:br,glyphData:fr,caretPositions:Pr,caretHeight:lr,glyphColors:Or,chunkedBounds:Dr,fontSize:vn,unitsPerEm:Jn,ascender:yr*Vn,descender:hr*Vn,capHeight:ar*Vn,xHeight:Sr*Vn,lineHeight:$n,topBaseline:rr,blockBounds:[Vr,eo-Yr.length*$n,Vr+_r,eo],visibleBounds:zr,timings:Cn})})}function Ut(dn,pn){Ft(dn,gn=>{const[vn,bn,$n,Tn]=gn.blockBounds;pn({width:$n-vn,height:Tn-bn})},{metricsOnly:!0})}function Wt(dn){let pn=dn.match(/^([\d.]+)%$/),gn=pn?parseFloat(pn[1]):NaN;return isNaN(gn)?0:gn/100}function Zt(dn,pn,gn){const vn=dn[pn*3],bn=dn[pn*3+1],$n=dn[pn*3+2],Tn=(bn-vn)/gn;for(let In=0;In<gn;In++){const Pn=(pn+In)*3;dn[Pn]=vn+Tn*In,dn[Pn+1]=vn+Tn*(In+1),dn[Pn+2]=$n}}function Kt(){return(self.performance||Date).now()}function cn(){this.data=[]}const hn=["glyphObj","x","width","charIndex"];return cn.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/hn.length)},glyphAt(dn){let pn=cn.flyweight;return pn.data=this.data,pn.index=dn,pn},splitAt(dn){let pn=new cn;return pn.data=this.data.splice(dn*hn.length),pn}},cn.flyweight=hn.reduce((dn,pn,gn,vn)=>(Object.defineProperty(dn,pn,{get(){return this.data[this.index*hn.length+gn]},set(bn){this.data[this.index*hn.length+gn]=bn}}),dn),{data:null,index:0}),{typeset:Ft,measure:Ut,loadFont:Nt}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned$1;function generateSDF(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt=!0){return Nt?generateSDF_GL(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt).then(null,Ft=>(warned$1||(console.warn("WebGL SDF generation failed, falling back to JS",Ft),warned$1=!0),generateSDF_JS_Worker(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt))):generateSDF_JS_Worker(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const ft=now();for(;queue.length&&now()-ft<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(...ft)=>new Promise((lt,dt)=>{queue.push(()=>{const vt=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...ft),lt({timing:now()-vt})}catch(St){dt(St)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(ft,lt,dt,vt,St,Et,Ct,At,Rt,Dt){const Nt="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let Ft=threads[Nt];return Ft||(Ft=threads[Nt]={workerModule:defineWorkerModule({name:Nt,workerId:Nt,dependencies:[SDFGenerator,now],init(Ut,Wt){const Zt=Ut().javascript.generate;return function(...Kt){const cn=Wt();return{textureData:Zt(...Kt),timing:Wt()-cn}}},getTransferables(Ut){return[Ut.textureData.buffer]}}),requests:0,idleTimer:null}),Ft.requests++,clearTimeout(Ft.idleTimer),Ft.workerModule(ft,lt,dt,vt,St,Et).then(({textureData:Ut,timing:Wt})=>{const Zt=now(),Kt=new Uint8Array(Ut.length*4);for(let cn=0;cn<Ut.length;cn++)Kt[cn*4+Dt]=Ut[cn];return mainThreadGenerator.webglUtils.renderImageData(Ct,Kt,At,Rt,ft,lt,1<<3-Dt),Wt+=now()-Zt,--Ft.requests===0&&(Ft.idleTimer=setTimeout(()=>{terminateWorker(Nt)},idleTimeout)),{timing:Wt}})}function warmUpSDFCanvas(ft){ft._warm||(mainThreadGenerator.webgl.isSupported(ft),ft._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window>"u"&&(self.window=self),function(ft){var lt={parse:function(St){var Et=lt._bin,Ct=new Uint8Array(St);if(Et.readASCII(Ct,0,4)=="ttcf"){var At=4;Et.readUshort(Ct,At),At+=2,Et.readUshort(Ct,At),At+=2;var Rt=Et.readUint(Ct,At);At+=4;for(var Dt=[],Nt=0;Nt<Rt;Nt++){var Ft=Et.readUint(Ct,At);At+=4,Dt.push(lt._readFont(Ct,Ft))}return Dt}return[lt._readFont(Ct,0)]},_readFont:function(St,Et){var Ct=lt._bin,At=Et;Ct.readFixed(St,Et),Et+=4;var Rt=Ct.readUshort(St,Et);Et+=2,Ct.readUshort(St,Et),Et+=2,Ct.readUshort(St,Et),Et+=2,Ct.readUshort(St,Et),Et+=2;for(var Dt=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],Nt={_data:St,_offset:At},Ft={},Ut=0;Ut<Rt;Ut++){var Wt=Ct.readASCII(St,Et,4);Et+=4,Ct.readUint(St,Et),Et+=4;var Zt=Ct.readUint(St,Et);Et+=4;var Kt=Ct.readUint(St,Et);Et+=4,Ft[Wt]={offset:Zt,length:Kt}}for(Ut=0;Ut<Dt.length;Ut++){var cn=Dt[Ut];Ft[cn]&&(Nt[cn.trim()]=lt[cn.trim()].parse(St,Ft[cn].offset,Ft[cn].length,Nt))}return Nt},_tabOffset:function(St,Et,Ct){for(var At=lt._bin,Rt=At.readUshort(St,Ct+4),Dt=Ct+12,Nt=0;Nt<Rt;Nt++){var Ft=At.readASCII(St,Dt,4);Dt+=4,At.readUint(St,Dt),Dt+=4;var Ut=At.readUint(St,Dt);if(Dt+=4,At.readUint(St,Dt),Dt+=4,Ft==Et)return Ut}return 0}};lt._bin={readFixed:function(St,Et){return(St[Et]<<8|St[Et+1])+(St[Et+2]<<8|St[Et+3])/65540},readF2dot14:function(St,Et){return lt._bin.readShort(St,Et)/16384},readInt:function(St,Et){return lt._bin._view(St).getInt32(Et)},readInt8:function(St,Et){return lt._bin._view(St).getInt8(Et)},readShort:function(St,Et){return lt._bin._view(St).getInt16(Et)},readUshort:function(St,Et){return lt._bin._view(St).getUint16(Et)},readUshorts:function(St,Et,Ct){for(var At=[],Rt=0;Rt<Ct;Rt++)At.push(lt._bin.readUshort(St,Et+2*Rt));return At},readUint:function(St,Et){return lt._bin._view(St).getUint32(Et)},readUint64:function(St,Et){return 4294967296*lt._bin.readUint(St,Et)+lt._bin.readUint(St,Et+4)},readASCII:function(St,Et,Ct){for(var At="",Rt=0;Rt<Ct;Rt++)At+=String.fromCharCode(St[Et+Rt]);return At},readUnicode:function(St,Et,Ct){for(var At="",Rt=0;Rt<Ct;Rt++){var Dt=St[Et++]<<8|St[Et++];At+=String.fromCharCode(Dt)}return At},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(St,Et,Ct){var At=lt._bin._tdec;return At&&Et==0&&Ct==St.length?At.decode(St):lt._bin.readASCII(St,Et,Ct)},readBytes:function(St,Et,Ct){for(var At=[],Rt=0;Rt<Ct;Rt++)At.push(St[Et+Rt]);return At},readASCIIArray:function(St,Et,Ct){for(var At=[],Rt=0;Rt<Ct;Rt++)At.push(String.fromCharCode(St[Et+Rt]));return At},_view:function(St){return St._dataView||(St._dataView=St.buffer?new DataView(St.buffer,St.byteOffset,St.byteLength):new DataView(new Uint8Array(St).buffer))}},lt._lctf={},lt._lctf.parse=function(St,Et,Ct,At,Rt){var Dt=lt._bin,Nt={},Ft=Et;Dt.readFixed(St,Et),Et+=4;var Ut=Dt.readUshort(St,Et);Et+=2;var Wt=Dt.readUshort(St,Et);Et+=2;var Zt=Dt.readUshort(St,Et);return Et+=2,Nt.scriptList=lt._lctf.readScriptList(St,Ft+Ut),Nt.featureList=lt._lctf.readFeatureList(St,Ft+Wt),Nt.lookupList=lt._lctf.readLookupList(St,Ft+Zt,Rt),Nt},lt._lctf.readLookupList=function(St,Et,Ct){var At=lt._bin,Rt=Et,Dt=[],Nt=At.readUshort(St,Et);Et+=2;for(var Ft=0;Ft<Nt;Ft++){var Ut=At.readUshort(St,Et);Et+=2;var Wt=lt._lctf.readLookupTable(St,Rt+Ut,Ct);Dt.push(Wt)}return Dt},lt._lctf.readLookupTable=function(St,Et,Ct){var At=lt._bin,Rt=Et,Dt={tabs:[]};Dt.ltype=At.readUshort(St,Et),Et+=2,Dt.flag=At.readUshort(St,Et),Et+=2;var Nt=At.readUshort(St,Et);Et+=2;for(var Ft=Dt.ltype,Ut=0;Ut<Nt;Ut++){var Wt=At.readUshort(St,Et);Et+=2;var Zt=Ct(St,Ft,Rt+Wt,Dt);Dt.tabs.push(Zt)}return Dt},lt._lctf.numOfOnes=function(St){for(var Et=0,Ct=0;Ct<32;Ct++)St>>>Ct&1&&Et++;return Et},lt._lctf.readClassDef=function(St,Et){var Ct=lt._bin,At=[],Rt=Ct.readUshort(St,Et);if(Et+=2,Rt==1){var Dt=Ct.readUshort(St,Et);Et+=2;var Nt=Ct.readUshort(St,Et);Et+=2;for(var Ft=0;Ft<Nt;Ft++)At.push(Dt+Ft),At.push(Dt+Ft),At.push(Ct.readUshort(St,Et)),Et+=2}if(Rt==2){var Ut=Ct.readUshort(St,Et);for(Et+=2,Ft=0;Ft<Ut;Ft++)At.push(Ct.readUshort(St,Et)),Et+=2,At.push(Ct.readUshort(St,Et)),Et+=2,At.push(Ct.readUshort(St,Et)),Et+=2}return At},lt._lctf.getInterval=function(St,Et){for(var Ct=0;Ct<St.length;Ct+=3){var At=St[Ct],Rt=St[Ct+1];if(St[Ct+2],At<=Et&&Et<=Rt)return Ct}return-1},lt._lctf.readCoverage=function(St,Et){var Ct=lt._bin,At={};At.fmt=Ct.readUshort(St,Et),Et+=2;var Rt=Ct.readUshort(St,Et);return Et+=2,At.fmt==1&&(At.tab=Ct.readUshorts(St,Et,Rt)),At.fmt==2&&(At.tab=Ct.readUshorts(St,Et,3*Rt)),At},lt._lctf.coverageIndex=function(St,Et){var Ct=St.tab;if(St.fmt==1)return Ct.indexOf(Et);if(St.fmt==2){var At=lt._lctf.getInterval(Ct,Et);if(At!=-1)return Ct[At+2]+(Et-Ct[At])}return-1},lt._lctf.readFeatureList=function(St,Et){var Ct=lt._bin,At=Et,Rt=[],Dt=Ct.readUshort(St,Et);Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=Ct.readASCII(St,Et,4);Et+=4;var Ut=Ct.readUshort(St,Et);Et+=2;var Wt=lt._lctf.readFeatureTable(St,At+Ut);Wt.tag=Ft.trim(),Rt.push(Wt)}return Rt},lt._lctf.readFeatureTable=function(St,Et){var Ct=lt._bin,At=Et,Rt={},Dt=Ct.readUshort(St,Et);Et+=2,Dt>0&&(Rt.featureParams=At+Dt);var Nt=Ct.readUshort(St,Et);Et+=2,Rt.tab=[];for(var Ft=0;Ft<Nt;Ft++)Rt.tab.push(Ct.readUshort(St,Et+2*Ft));return Rt},lt._lctf.readScriptList=function(St,Et){var Ct=lt._bin,At=Et,Rt={},Dt=Ct.readUshort(St,Et);Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=Ct.readASCII(St,Et,4);Et+=4;var Ut=Ct.readUshort(St,Et);Et+=2,Rt[Ft.trim()]=lt._lctf.readScriptTable(St,At+Ut)}return Rt},lt._lctf.readScriptTable=function(St,Et){var Ct=lt._bin,At=Et,Rt={},Dt=Ct.readUshort(St,Et);Et+=2,Rt.default=lt._lctf.readLangSysTable(St,At+Dt);var Nt=Ct.readUshort(St,Et);Et+=2;for(var Ft=0;Ft<Nt;Ft++){var Ut=Ct.readASCII(St,Et,4);Et+=4;var Wt=Ct.readUshort(St,Et);Et+=2,Rt[Ut.trim()]=lt._lctf.readLangSysTable(St,At+Wt)}return Rt},lt._lctf.readLangSysTable=function(St,Et){var Ct=lt._bin,At={};Ct.readUshort(St,Et),Et+=2,At.reqFeature=Ct.readUshort(St,Et),Et+=2;var Rt=Ct.readUshort(St,Et);return Et+=2,At.features=Ct.readUshorts(St,Et,Rt),At},lt.CFF={},lt.CFF.parse=function(St,Et,Ct){var At=lt._bin;(St=new Uint8Array(St.buffer,Et,Ct))[Et=0],St[++Et],St[++Et],St[++Et],Et++;var Rt=[];Et=lt.CFF.readIndex(St,Et,Rt);for(var Dt=[],Nt=0;Nt<Rt.length-1;Nt++)Dt.push(At.readASCII(St,Et+Rt[Nt],Rt[Nt+1]-Rt[Nt]));Et+=Rt[Rt.length-1];var Ft=[];Et=lt.CFF.readIndex(St,Et,Ft);var Ut=[];for(Nt=0;Nt<Ft.length-1;Nt++)Ut.push(lt.CFF.readDict(St,Et+Ft[Nt],Et+Ft[Nt+1]));Et+=Ft[Ft.length-1];var Wt=Ut[0],Zt=[];Et=lt.CFF.readIndex(St,Et,Zt);var Kt=[];for(Nt=0;Nt<Zt.length-1;Nt++)Kt.push(At.readASCII(St,Et+Zt[Nt],Zt[Nt+1]-Zt[Nt]));if(Et+=Zt[Zt.length-1],lt.CFF.readSubrs(St,Et,Wt),Wt.CharStrings){Et=Wt.CharStrings,Zt=[],Et=lt.CFF.readIndex(St,Et,Zt);var cn=[];for(Nt=0;Nt<Zt.length-1;Nt++)cn.push(At.readBytes(St,Et+Zt[Nt],Zt[Nt+1]-Zt[Nt]));Wt.CharStrings=cn}if(Wt.ROS){Et=Wt.FDArray;var hn=[];for(Et=lt.CFF.readIndex(St,Et,hn),Wt.FDArray=[],Nt=0;Nt<hn.length-1;Nt++){var dn=lt.CFF.readDict(St,Et+hn[Nt],Et+hn[Nt+1]);lt.CFF._readFDict(St,dn,Kt),Wt.FDArray.push(dn)}Et+=hn[hn.length-1],Et=Wt.FDSelect,Wt.FDSelect=[];var pn=St[Et];if(Et++,pn!=3)throw pn;var gn=At.readUshort(St,Et);for(Et+=2,Nt=0;Nt<gn+1;Nt++)Wt.FDSelect.push(At.readUshort(St,Et),St[Et+2]),Et+=3}return Wt.Encoding&&(Wt.Encoding=lt.CFF.readEncoding(St,Wt.Encoding,Wt.CharStrings.length)),Wt.charset&&(Wt.charset=lt.CFF.readCharset(St,Wt.charset,Wt.CharStrings.length)),lt.CFF._readFDict(St,Wt,Kt),Wt},lt.CFF._readFDict=function(St,Et,Ct){var At;for(var Rt in Et.Private&&(At=Et.Private[1],Et.Private=lt.CFF.readDict(St,At,At+Et.Private[0]),Et.Private.Subrs&&lt.CFF.readSubrs(St,At+Et.Private.Subrs,Et.Private)),Et)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(Rt)!=-1&&(Et[Rt]=Ct[Et[Rt]-426+35])},lt.CFF.readSubrs=function(St,Et,Ct){var At=lt._bin,Rt=[];Et=lt.CFF.readIndex(St,Et,Rt);var Dt,Nt=Rt.length;Dt=Nt<1240?107:Nt<33900?1131:32768,Ct.Bias=Dt,Ct.Subrs=[];for(var Ft=0;Ft<Rt.length-1;Ft++)Ct.Subrs.push(At.readBytes(St,Et+Rt[Ft],Rt[Ft+1]-Rt[Ft]))},lt.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],lt.CFF.glyphByUnicode=function(St,Et){for(var Ct=0;Ct<St.charset.length;Ct++)if(St.charset[Ct]==Et)return Ct;return-1},lt.CFF.glyphBySE=function(St,Et){return Et<0||Et>255?-1:lt.CFF.glyphByUnicode(St,lt.CFF.tableSE[Et])},lt.CFF.readEncoding=function(St,Et,Ct){lt._bin;var At=[".notdef"],Rt=St[Et];if(Et++,Rt!=0)throw"error: unknown encoding format: "+Rt;var Dt=St[Et];Et++;for(var Nt=0;Nt<Dt;Nt++)At.push(St[Et+Nt]);return At},lt.CFF.readCharset=function(St,Et,Ct){var At=lt._bin,Rt=[".notdef"],Dt=St[Et];if(Et++,Dt==0)for(var Nt=0;Nt<Ct;Nt++){var Ft=At.readUshort(St,Et);Et+=2,Rt.push(Ft)}else{if(Dt!=1&&Dt!=2)throw"error: format: "+Dt;for(;Rt.length<Ct;){Ft=At.readUshort(St,Et),Et+=2;var Ut=0;for(Dt==1?(Ut=St[Et],Et++):(Ut=At.readUshort(St,Et),Et+=2),Nt=0;Nt<=Ut;Nt++)Rt.push(Ft),Ft++}}return Rt},lt.CFF.readIndex=function(St,Et,Ct){var At=lt._bin,Rt=At.readUshort(St,Et)+1,Dt=St[Et+=2];if(Et++,Dt==1)for(var Nt=0;Nt<Rt;Nt++)Ct.push(St[Et+Nt]);else if(Dt==2)for(Nt=0;Nt<Rt;Nt++)Ct.push(At.readUshort(St,Et+2*Nt));else if(Dt==3)for(Nt=0;Nt<Rt;Nt++)Ct.push(16777215&At.readUint(St,Et+3*Nt-1));else if(Rt!=1)throw"unsupported offset size: "+Dt+", count: "+Rt;return(Et+=Rt*Dt)-1},lt.CFF.getCharString=function(St,Et,Ct){var At=lt._bin,Rt=St[Et],Dt=St[Et+1];St[Et+2],St[Et+3],St[Et+4];var Nt=1,Ft=null,Ut=null;Rt<=20&&(Ft=Rt,Nt=1),Rt==12&&(Ft=100*Rt+Dt,Nt=2),21<=Rt&&Rt<=27&&(Ft=Rt,Nt=1),Rt==28&&(Ut=At.readShort(St,Et+1),Nt=3),29<=Rt&&Rt<=31&&(Ft=Rt,Nt=1),32<=Rt&&Rt<=246&&(Ut=Rt-139,Nt=1),247<=Rt&&Rt<=250&&(Ut=256*(Rt-247)+Dt+108,Nt=2),251<=Rt&&Rt<=254&&(Ut=256*-(Rt-251)-Dt-108,Nt=2),Rt==255&&(Ut=At.readInt(St,Et+1)/65535,Nt=5),Ct.val=Ut??"o"+Ft,Ct.size=Nt},lt.CFF.readCharString=function(St,Et,Ct){for(var At=Et+Ct,Rt=lt._bin,Dt=[];Et<At;){var Nt=St[Et],Ft=St[Et+1];St[Et+2],St[Et+3],St[Et+4];var Ut=1,Wt=null,Zt=null;Nt<=20&&(Wt=Nt,Ut=1),Nt==12&&(Wt=100*Nt+Ft,Ut=2),Nt!=19&&Nt!=20||(Wt=Nt,Ut=2),21<=Nt&&Nt<=27&&(Wt=Nt,Ut=1),Nt==28&&(Zt=Rt.readShort(St,Et+1),Ut=3),29<=Nt&&Nt<=31&&(Wt=Nt,Ut=1),32<=Nt&&Nt<=246&&(Zt=Nt-139,Ut=1),247<=Nt&&Nt<=250&&(Zt=256*(Nt-247)+Ft+108,Ut=2),251<=Nt&&Nt<=254&&(Zt=256*-(Nt-251)-Ft-108,Ut=2),Nt==255&&(Zt=Rt.readInt(St,Et+1)/65535,Ut=5),Dt.push(Zt??"o"+Wt),Et+=Ut}return Dt},lt.CFF.readDict=function(St,Et,Ct){for(var At=lt._bin,Rt={},Dt=[];Et<Ct;){var Nt=St[Et],Ft=St[Et+1];St[Et+2],St[Et+3],St[Et+4];var Ut=1,Wt=null,Zt=null;if(Nt==28&&(Zt=At.readShort(St,Et+1),Ut=3),Nt==29&&(Zt=At.readInt(St,Et+1),Ut=5),32<=Nt&&Nt<=246&&(Zt=Nt-139,Ut=1),247<=Nt&&Nt<=250&&(Zt=256*(Nt-247)+Ft+108,Ut=2),251<=Nt&&Nt<=254&&(Zt=256*-(Nt-251)-Ft-108,Ut=2),Nt==255)throw Zt=At.readInt(St,Et+1)/65535,Ut=5,"unknown number";if(Nt==30){var Kt=[];for(Ut=1;;){var cn=St[Et+Ut];Ut++;var hn=cn>>4,dn=15&cn;if(hn!=15&&Kt.push(hn),dn!=15&&Kt.push(dn),dn==15)break}for(var pn="",gn=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],vn=0;vn<Kt.length;vn++)pn+=gn[Kt[vn]];Zt=parseFloat(pn)}Nt<=21&&(Wt=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][Nt],Ut=1,Nt==12&&(Wt=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][Ft],Ut=2)),Wt!=null?(Rt[Wt]=Dt.length==1?Dt[0]:Dt,Dt=[]):Dt.push(Zt),Et+=Ut}return Rt},lt.cmap={},lt.cmap.parse=function(St,Et,Ct){St=new Uint8Array(St.buffer,Et,Ct),Et=0;var At=lt._bin,Rt={};At.readUshort(St,Et),Et+=2;var Dt=At.readUshort(St,Et);Et+=2;var Nt=[];Rt.tables=[];for(var Ft=0;Ft<Dt;Ft++){var Ut=At.readUshort(St,Et);Et+=2;var Wt=At.readUshort(St,Et);Et+=2;var Zt=At.readUint(St,Et);Et+=4;var Kt="p"+Ut+"e"+Wt,cn=Nt.indexOf(Zt);if(cn==-1){var hn;cn=Rt.tables.length,Nt.push(Zt);var dn=At.readUshort(St,Zt);dn==0?hn=lt.cmap.parse0(St,Zt):dn==4?hn=lt.cmap.parse4(St,Zt):dn==6?hn=lt.cmap.parse6(St,Zt):dn==12?hn=lt.cmap.parse12(St,Zt):console.debug("unknown format: "+dn,Ut,Wt,Zt),Rt.tables.push(hn)}if(Rt[Kt]!=null)throw"multiple tables for one platform+encoding";Rt[Kt]=cn}return Rt},lt.cmap.parse0=function(St,Et){var Ct=lt._bin,At={};At.format=Ct.readUshort(St,Et),Et+=2;var Rt=Ct.readUshort(St,Et);Et+=2,Ct.readUshort(St,Et),Et+=2,At.map=[];for(var Dt=0;Dt<Rt-6;Dt++)At.map.push(St[Et+Dt]);return At},lt.cmap.parse4=function(St,Et){var Ct=lt._bin,At=Et,Rt={};Rt.format=Ct.readUshort(St,Et),Et+=2;var Dt=Ct.readUshort(St,Et);Et+=2,Ct.readUshort(St,Et),Et+=2;var Nt=Ct.readUshort(St,Et);Et+=2;var Ft=Nt/2;Rt.searchRange=Ct.readUshort(St,Et),Et+=2,Rt.entrySelector=Ct.readUshort(St,Et),Et+=2,Rt.rangeShift=Ct.readUshort(St,Et),Et+=2,Rt.endCount=Ct.readUshorts(St,Et,Ft),Et+=2*Ft,Et+=2,Rt.startCount=Ct.readUshorts(St,Et,Ft),Et+=2*Ft,Rt.idDelta=[];for(var Ut=0;Ut<Ft;Ut++)Rt.idDelta.push(Ct.readShort(St,Et)),Et+=2;for(Rt.idRangeOffset=Ct.readUshorts(St,Et,Ft),Et+=2*Ft,Rt.glyphIdArray=[];Et<At+Dt;)Rt.glyphIdArray.push(Ct.readUshort(St,Et)),Et+=2;return Rt},lt.cmap.parse6=function(St,Et){var Ct=lt._bin,At={};At.format=Ct.readUshort(St,Et),Et+=2,Ct.readUshort(St,Et),Et+=2,Ct.readUshort(St,Et),Et+=2,At.firstCode=Ct.readUshort(St,Et),Et+=2;var Rt=Ct.readUshort(St,Et);Et+=2,At.glyphIdArray=[];for(var Dt=0;Dt<Rt;Dt++)At.glyphIdArray.push(Ct.readUshort(St,Et)),Et+=2;return At},lt.cmap.parse12=function(St,Et){var Ct=lt._bin,At={};At.format=Ct.readUshort(St,Et),Et+=2,Et+=2,Ct.readUint(St,Et),Et+=4,Ct.readUint(St,Et),Et+=4;var Rt=Ct.readUint(St,Et);Et+=4,At.groups=[];for(var Dt=0;Dt<Rt;Dt++){var Nt=Et+12*Dt,Ft=Ct.readUint(St,Nt+0),Ut=Ct.readUint(St,Nt+4),Wt=Ct.readUint(St,Nt+8);At.groups.push([Ft,Ut,Wt])}return At},lt.glyf={},lt.glyf.parse=function(St,Et,Ct,At){for(var Rt=[],Dt=0;Dt<At.maxp.numGlyphs;Dt++)Rt.push(null);return Rt},lt.glyf._parseGlyf=function(St,Et){var Ct=lt._bin,At=St._data,Rt=lt._tabOffset(At,"glyf",St._offset)+St.loca[Et];if(St.loca[Et]==St.loca[Et+1])return null;var Dt={};if(Dt.noc=Ct.readShort(At,Rt),Rt+=2,Dt.xMin=Ct.readShort(At,Rt),Rt+=2,Dt.yMin=Ct.readShort(At,Rt),Rt+=2,Dt.xMax=Ct.readShort(At,Rt),Rt+=2,Dt.yMax=Ct.readShort(At,Rt),Rt+=2,Dt.xMin>=Dt.xMax||Dt.yMin>=Dt.yMax)return null;if(Dt.noc>0){Dt.endPts=[];for(var Nt=0;Nt<Dt.noc;Nt++)Dt.endPts.push(Ct.readUshort(At,Rt)),Rt+=2;var Ft=Ct.readUshort(At,Rt);if(Rt+=2,At.length-Rt<Ft)return null;Dt.instructions=Ct.readBytes(At,Rt,Ft),Rt+=Ft;var Ut=Dt.endPts[Dt.noc-1]+1;for(Dt.flags=[],Nt=0;Nt<Ut;Nt++){var Wt=At[Rt];if(Rt++,Dt.flags.push(Wt),(8&Wt)!=0){var Zt=At[Rt];Rt++;for(var Kt=0;Kt<Zt;Kt++)Dt.flags.push(Wt),Nt++}}for(Dt.xs=[],Nt=0;Nt<Ut;Nt++){var cn=(2&Dt.flags[Nt])!=0,hn=(16&Dt.flags[Nt])!=0;cn?(Dt.xs.push(hn?At[Rt]:-At[Rt]),Rt++):hn?Dt.xs.push(0):(Dt.xs.push(Ct.readShort(At,Rt)),Rt+=2)}for(Dt.ys=[],Nt=0;Nt<Ut;Nt++)cn=(4&Dt.flags[Nt])!=0,hn=(32&Dt.flags[Nt])!=0,cn?(Dt.ys.push(hn?At[Rt]:-At[Rt]),Rt++):hn?Dt.ys.push(0):(Dt.ys.push(Ct.readShort(At,Rt)),Rt+=2);var dn=0,pn=0;for(Nt=0;Nt<Ut;Nt++)dn+=Dt.xs[Nt],pn+=Dt.ys[Nt],Dt.xs[Nt]=dn,Dt.ys[Nt]=pn}else{var gn;Dt.parts=[];do{gn=Ct.readUshort(At,Rt),Rt+=2;var vn={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(Dt.parts.push(vn),vn.glyphIndex=Ct.readUshort(At,Rt),Rt+=2,1&gn){var bn=Ct.readShort(At,Rt);Rt+=2;var $n=Ct.readShort(At,Rt);Rt+=2}else bn=Ct.readInt8(At,Rt),Rt++,$n=Ct.readInt8(At,Rt),Rt++;2&gn?(vn.m.tx=bn,vn.m.ty=$n):(vn.p1=bn,vn.p2=$n),8&gn?(vn.m.a=vn.m.d=Ct.readF2dot14(At,Rt),Rt+=2):64&gn?(vn.m.a=Ct.readF2dot14(At,Rt),Rt+=2,vn.m.d=Ct.readF2dot14(At,Rt),Rt+=2):128&gn&&(vn.m.a=Ct.readF2dot14(At,Rt),Rt+=2,vn.m.b=Ct.readF2dot14(At,Rt),Rt+=2,vn.m.c=Ct.readF2dot14(At,Rt),Rt+=2,vn.m.d=Ct.readF2dot14(At,Rt),Rt+=2)}while(32&gn);if(256&gn){var Tn=Ct.readUshort(At,Rt);for(Rt+=2,Dt.instr=[],Nt=0;Nt<Tn;Nt++)Dt.instr.push(At[Rt]),Rt++}}return Dt},lt.GPOS={},lt.GPOS.parse=function(St,Et,Ct,At){return lt._lctf.parse(St,Et,Ct,At,lt.GPOS.subt)},lt.GPOS.subt=function(St,Et,Ct,At){var Rt=lt._bin,Dt=Ct,Nt={};if(Nt.fmt=Rt.readUshort(St,Ct),Ct+=2,Et==1||Et==2||Et==3||Et==7||Et==8&&Nt.fmt<=2){var Ft=Rt.readUshort(St,Ct);Ct+=2,Nt.coverage=lt._lctf.readCoverage(St,Ft+Dt)}if(Et==1&&Nt.fmt==1){var Ut=Rt.readUshort(St,Ct);Ct+=2;var Wt=lt._lctf.numOfOnes(Ut);Ut!=0&&(Nt.pos=lt.GPOS.readValueRecord(St,Ct,Ut))}else if(Et==2&&Nt.fmt>=1&&Nt.fmt<=2){Ut=Rt.readUshort(St,Ct),Ct+=2;var Zt=Rt.readUshort(St,Ct);Ct+=2,Wt=lt._lctf.numOfOnes(Ut);var Kt=lt._lctf.numOfOnes(Zt);if(Nt.fmt==1){Nt.pairsets=[];var cn=Rt.readUshort(St,Ct);Ct+=2;for(var hn=0;hn<cn;hn++){var dn=Dt+Rt.readUshort(St,Ct);Ct+=2;var pn=Rt.readUshort(St,dn);dn+=2;for(var gn=[],vn=0;vn<pn;vn++){var bn=Rt.readUshort(St,dn);dn+=2,Ut!=0&&(An=lt.GPOS.readValueRecord(St,dn,Ut),dn+=2*Wt),Zt!=0&&(Gn=lt.GPOS.readValueRecord(St,dn,Zt),dn+=2*Kt),gn.push({gid2:bn,val1:An,val2:Gn})}Nt.pairsets.push(gn)}}if(Nt.fmt==2){var $n=Rt.readUshort(St,Ct);Ct+=2;var Tn=Rt.readUshort(St,Ct);Ct+=2;var In=Rt.readUshort(St,Ct);Ct+=2;var Pn=Rt.readUshort(St,Ct);for(Ct+=2,Nt.classDef1=lt._lctf.readClassDef(St,Dt+$n),Nt.classDef2=lt._lctf.readClassDef(St,Dt+Tn),Nt.matrix=[],hn=0;hn<In;hn++){var zn=[];for(vn=0;vn<Pn;vn++){var An=null,Gn=null;Ut!=0&&(An=lt.GPOS.readValueRecord(St,Ct,Ut),Ct+=2*Wt),Zt!=0&&(Gn=lt.GPOS.readValueRecord(St,Ct,Zt),Ct+=2*Kt),zn.push({val1:An,val2:Gn})}Nt.matrix.push(zn)}}}else{if(Et==9&&Nt.fmt==1){var xn=Rt.readUshort(St,Ct);Ct+=2;var Qn=Rt.readUint(St,Ct);if(Ct+=4,At.ltype==9)At.ltype=xn;else if(At.ltype!=xn)throw"invalid extension substitution";return lt.GPOS.subt(St,At.ltype,Dt+Qn)}console.debug("unsupported GPOS table LookupType",Et,"format",Nt.fmt)}return Nt},lt.GPOS.readValueRecord=function(St,Et,Ct){var At=lt._bin,Rt=[];return Rt.push(1&Ct?At.readShort(St,Et):0),Et+=1&Ct?2:0,Rt.push(2&Ct?At.readShort(St,Et):0),Et+=2&Ct?2:0,Rt.push(4&Ct?At.readShort(St,Et):0),Et+=4&Ct?2:0,Rt.push(8&Ct?At.readShort(St,Et):0),Et+=8&Ct?2:0,Rt},lt.GSUB={},lt.GSUB.parse=function(St,Et,Ct,At){return lt._lctf.parse(St,Et,Ct,At,lt.GSUB.subt)},lt.GSUB.subt=function(St,Et,Ct,At){var Rt=lt._bin,Dt=Ct,Nt={};if(Nt.fmt=Rt.readUshort(St,Ct),Ct+=2,Et!=1&&Et!=4&&Et!=5&&Et!=6)return null;if(Et==1||Et==4||Et==5&&Nt.fmt<=2||Et==6&&Nt.fmt<=2){var Ft=Rt.readUshort(St,Ct);Ct+=2,Nt.coverage=lt._lctf.readCoverage(St,Dt+Ft)}if(Et==1&&Nt.fmt>=1&&Nt.fmt<=2){if(Nt.fmt==1)Nt.delta=Rt.readShort(St,Ct),Ct+=2;else if(Nt.fmt==2){var Ut=Rt.readUshort(St,Ct);Ct+=2,Nt.newg=Rt.readUshorts(St,Ct,Ut),Ct+=2*Nt.newg.length}}else if(Et==4){Nt.vals=[],Ut=Rt.readUshort(St,Ct),Ct+=2;for(var Wt=0;Wt<Ut;Wt++){var Zt=Rt.readUshort(St,Ct);Ct+=2,Nt.vals.push(lt.GSUB.readLigatureSet(St,Dt+Zt))}}else if(Et==5&&Nt.fmt==2){if(Nt.fmt==2){var Kt=Rt.readUshort(St,Ct);Ct+=2,Nt.cDef=lt._lctf.readClassDef(St,Dt+Kt),Nt.scset=[];var cn=Rt.readUshort(St,Ct);for(Ct+=2,Wt=0;Wt<cn;Wt++){var hn=Rt.readUshort(St,Ct);Ct+=2,Nt.scset.push(hn==0?null:lt.GSUB.readSubClassSet(St,Dt+hn))}}}else if(Et==6&&Nt.fmt==3){if(Nt.fmt==3){for(Wt=0;Wt<3;Wt++){Ut=Rt.readUshort(St,Ct),Ct+=2;for(var dn=[],pn=0;pn<Ut;pn++)dn.push(lt._lctf.readCoverage(St,Dt+Rt.readUshort(St,Ct+2*pn)));Ct+=2*Ut,Wt==0&&(Nt.backCvg=dn),Wt==1&&(Nt.inptCvg=dn),Wt==2&&(Nt.ahedCvg=dn)}Ut=Rt.readUshort(St,Ct),Ct+=2,Nt.lookupRec=lt.GSUB.readSubstLookupRecords(St,Ct,Ut)}}else{if(Et==7&&Nt.fmt==1){var gn=Rt.readUshort(St,Ct);Ct+=2;var vn=Rt.readUint(St,Ct);if(Ct+=4,At.ltype==9)At.ltype=gn;else if(At.ltype!=gn)throw"invalid extension substitution";return lt.GSUB.subt(St,At.ltype,Dt+vn)}console.debug("unsupported GSUB table LookupType",Et,"format",Nt.fmt)}return Nt},lt.GSUB.readSubClassSet=function(St,Et){var Ct=lt._bin.readUshort,At=Et,Rt=[],Dt=Ct(St,Et);Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=Ct(St,Et);Et+=2,Rt.push(lt.GSUB.readSubClassRule(St,At+Ft))}return Rt},lt.GSUB.readSubClassRule=function(St,Et){var Ct=lt._bin.readUshort,At={},Rt=Ct(St,Et),Dt=Ct(St,Et+=2);Et+=2,At.input=[];for(var Nt=0;Nt<Rt-1;Nt++)At.input.push(Ct(St,Et)),Et+=2;return At.substLookupRecords=lt.GSUB.readSubstLookupRecords(St,Et,Dt),At},lt.GSUB.readSubstLookupRecords=function(St,Et,Ct){for(var At=lt._bin.readUshort,Rt=[],Dt=0;Dt<Ct;Dt++)Rt.push(At(St,Et),At(St,Et+2)),Et+=4;return Rt},lt.GSUB.readChainSubClassSet=function(St,Et){var Ct=lt._bin,At=Et,Rt=[],Dt=Ct.readUshort(St,Et);Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=Ct.readUshort(St,Et);Et+=2,Rt.push(lt.GSUB.readChainSubClassRule(St,At+Ft))}return Rt},lt.GSUB.readChainSubClassRule=function(St,Et){for(var Ct=lt._bin,At={},Rt=["backtrack","input","lookahead"],Dt=0;Dt<Rt.length;Dt++){var Nt=Ct.readUshort(St,Et);Et+=2,Dt==1&&Nt--,At[Rt[Dt]]=Ct.readUshorts(St,Et,Nt),Et+=2*At[Rt[Dt]].length}return Nt=Ct.readUshort(St,Et),Et+=2,At.subst=Ct.readUshorts(St,Et,2*Nt),Et+=2*At.subst.length,At},lt.GSUB.readLigatureSet=function(St,Et){var Ct=lt._bin,At=Et,Rt=[],Dt=Ct.readUshort(St,Et);Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=Ct.readUshort(St,Et);Et+=2,Rt.push(lt.GSUB.readLigature(St,At+Ft))}return Rt},lt.GSUB.readLigature=function(St,Et){var Ct=lt._bin,At={chain:[]};At.nglyph=Ct.readUshort(St,Et),Et+=2;var Rt=Ct.readUshort(St,Et);Et+=2;for(var Dt=0;Dt<Rt-1;Dt++)At.chain.push(Ct.readUshort(St,Et)),Et+=2;return At},lt.head={},lt.head.parse=function(St,Et,Ct){var At=lt._bin,Rt={};return At.readFixed(St,Et),Et+=4,Rt.fontRevision=At.readFixed(St,Et),Et+=4,At.readUint(St,Et),Et+=4,At.readUint(St,Et),Et+=4,Rt.flags=At.readUshort(St,Et),Et+=2,Rt.unitsPerEm=At.readUshort(St,Et),Et+=2,Rt.created=At.readUint64(St,Et),Et+=8,Rt.modified=At.readUint64(St,Et),Et+=8,Rt.xMin=At.readShort(St,Et),Et+=2,Rt.yMin=At.readShort(St,Et),Et+=2,Rt.xMax=At.readShort(St,Et),Et+=2,Rt.yMax=At.readShort(St,Et),Et+=2,Rt.macStyle=At.readUshort(St,Et),Et+=2,Rt.lowestRecPPEM=At.readUshort(St,Et),Et+=2,Rt.fontDirectionHint=At.readShort(St,Et),Et+=2,Rt.indexToLocFormat=At.readShort(St,Et),Et+=2,Rt.glyphDataFormat=At.readShort(St,Et),Et+=2,Rt},lt.hhea={},lt.hhea.parse=function(St,Et,Ct){var At=lt._bin,Rt={};return At.readFixed(St,Et),Et+=4,Rt.ascender=At.readShort(St,Et),Et+=2,Rt.descender=At.readShort(St,Et),Et+=2,Rt.lineGap=At.readShort(St,Et),Et+=2,Rt.advanceWidthMax=At.readUshort(St,Et),Et+=2,Rt.minLeftSideBearing=At.readShort(St,Et),Et+=2,Rt.minRightSideBearing=At.readShort(St,Et),Et+=2,Rt.xMaxExtent=At.readShort(St,Et),Et+=2,Rt.caretSlopeRise=At.readShort(St,Et),Et+=2,Rt.caretSlopeRun=At.readShort(St,Et),Et+=2,Rt.caretOffset=At.readShort(St,Et),Et+=2,Et+=8,Rt.metricDataFormat=At.readShort(St,Et),Et+=2,Rt.numberOfHMetrics=At.readUshort(St,Et),Et+=2,Rt},lt.hmtx={},lt.hmtx.parse=function(St,Et,Ct,At){for(var Rt=lt._bin,Dt={aWidth:[],lsBearing:[]},Nt=0,Ft=0,Ut=0;Ut<At.maxp.numGlyphs;Ut++)Ut<At.hhea.numberOfHMetrics&&(Nt=Rt.readUshort(St,Et),Et+=2,Ft=Rt.readShort(St,Et),Et+=2),Dt.aWidth.push(Nt),Dt.lsBearing.push(Ft);return Dt},lt.kern={},lt.kern.parse=function(St,Et,Ct,At){var Rt=lt._bin,Dt=Rt.readUshort(St,Et);if(Et+=2,Dt==1)return lt.kern.parseV1(St,Et-2,Ct,At);var Nt=Rt.readUshort(St,Et);Et+=2;for(var Ft={glyph1:[],rval:[]},Ut=0;Ut<Nt;Ut++){Et+=2,Ct=Rt.readUshort(St,Et),Et+=2;var Wt=Rt.readUshort(St,Et);Et+=2;var Zt=Wt>>>8;if((Zt&=15)!=0)throw"unknown kern table format: "+Zt;Et=lt.kern.readFormat0(St,Et,Ft)}return Ft},lt.kern.parseV1=function(St,Et,Ct,At){var Rt=lt._bin;Rt.readFixed(St,Et),Et+=4;var Dt=Rt.readUint(St,Et);Et+=4;for(var Nt={glyph1:[],rval:[]},Ft=0;Ft<Dt;Ft++){Rt.readUint(St,Et),Et+=4;var Ut=Rt.readUshort(St,Et);Et+=2,Rt.readUshort(St,Et),Et+=2;var Wt=Ut>>>8;if((Wt&=15)!=0)throw"unknown kern table format: "+Wt;Et=lt.kern.readFormat0(St,Et,Nt)}return Nt},lt.kern.readFormat0=function(St,Et,Ct){var At=lt._bin,Rt=-1,Dt=At.readUshort(St,Et);Et+=2,At.readUshort(St,Et),Et+=2,At.readUshort(St,Et),Et+=2,At.readUshort(St,Et),Et+=2;for(var Nt=0;Nt<Dt;Nt++){var Ft=At.readUshort(St,Et);Et+=2;var Ut=At.readUshort(St,Et);Et+=2;var Wt=At.readShort(St,Et);Et+=2,Ft!=Rt&&(Ct.glyph1.push(Ft),Ct.rval.push({glyph2:[],vals:[]}));var Zt=Ct.rval[Ct.rval.length-1];Zt.glyph2.push(Ut),Zt.vals.push(Wt),Rt=Ft}return Et},lt.loca={},lt.loca.parse=function(St,Et,Ct,At){var Rt=lt._bin,Dt=[],Nt=At.head.indexToLocFormat,Ft=At.maxp.numGlyphs+1;if(Nt==0)for(var Ut=0;Ut<Ft;Ut++)Dt.push(Rt.readUshort(St,Et+(Ut<<1))<<1);if(Nt==1)for(Ut=0;Ut<Ft;Ut++)Dt.push(Rt.readUint(St,Et+(Ut<<2)));return Dt},lt.maxp={},lt.maxp.parse=function(St,Et,Ct){var At=lt._bin,Rt={},Dt=At.readUint(St,Et);return Et+=4,Rt.numGlyphs=At.readUshort(St,Et),Et+=2,Dt==65536&&(Rt.maxPoints=At.readUshort(St,Et),Et+=2,Rt.maxContours=At.readUshort(St,Et),Et+=2,Rt.maxCompositePoints=At.readUshort(St,Et),Et+=2,Rt.maxCompositeContours=At.readUshort(St,Et),Et+=2,Rt.maxZones=At.readUshort(St,Et),Et+=2,Rt.maxTwilightPoints=At.readUshort(St,Et),Et+=2,Rt.maxStorage=At.readUshort(St,Et),Et+=2,Rt.maxFunctionDefs=At.readUshort(St,Et),Et+=2,Rt.maxInstructionDefs=At.readUshort(St,Et),Et+=2,Rt.maxStackElements=At.readUshort(St,Et),Et+=2,Rt.maxSizeOfInstructions=At.readUshort(St,Et),Et+=2,Rt.maxComponentElements=At.readUshort(St,Et),Et+=2,Rt.maxComponentDepth=At.readUshort(St,Et),Et+=2),Rt},lt.name={},lt.name.parse=function(St,Et,Ct){var At=lt._bin,Rt={};At.readUshort(St,Et),Et+=2;var Dt=At.readUshort(St,Et);Et+=2,At.readUshort(St,Et);for(var Nt,Ft=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],Ut=Et+=2,Wt=0;Wt<Dt;Wt++){var Zt=At.readUshort(St,Et);Et+=2;var Kt=At.readUshort(St,Et);Et+=2;var cn=At.readUshort(St,Et);Et+=2;var hn=At.readUshort(St,Et);Et+=2;var dn=At.readUshort(St,Et);Et+=2;var pn=At.readUshort(St,Et);Et+=2;var gn,vn=Ft[hn],bn=Ut+12*Dt+pn;if(Zt==0)gn=At.readUnicode(St,bn,dn/2);else if(Zt==3&&Kt==0)gn=At.readUnicode(St,bn,dn/2);else if(Kt==0)gn=At.readASCII(St,bn,dn);else if(Kt==1)gn=At.readUnicode(St,bn,dn/2);else if(Kt==3)gn=At.readUnicode(St,bn,dn/2);else{if(Zt!=1)throw"unknown encoding "+Kt+", platformID: "+Zt;gn=At.readASCII(St,bn,dn),console.debug("reading unknown MAC encoding "+Kt+" as ASCII")}var $n="p"+Zt+","+cn.toString(16);Rt[$n]==null&&(Rt[$n]={}),Rt[$n][vn!==void 0?vn:hn]=gn,Rt[$n]._lang=cn}for(var Tn in Rt)if(Rt[Tn].postScriptName!=null&&Rt[Tn]._lang==1033)return Rt[Tn];for(var Tn in Rt)if(Rt[Tn].postScriptName!=null&&Rt[Tn]._lang==0)return Rt[Tn];for(var Tn in Rt)if(Rt[Tn].postScriptName!=null&&Rt[Tn]._lang==3084)return Rt[Tn];for(var Tn in Rt)if(Rt[Tn].postScriptName!=null)return Rt[Tn];for(var Tn in Rt){Nt=Tn;break}return console.debug("returning name table with languageID "+Rt[Nt]._lang),Rt[Nt]},lt["OS/2"]={},lt["OS/2"].parse=function(St,Et,Ct){var At=lt._bin.readUshort(St,Et);Et+=2;var Rt={};if(At==0)lt["OS/2"].version0(St,Et,Rt);else if(At==1)lt["OS/2"].version1(St,Et,Rt);else if(At==2||At==3||At==4)lt["OS/2"].version2(St,Et,Rt);else{if(At!=5)throw"unknown OS/2 table version: "+At;lt["OS/2"].version5(St,Et,Rt)}return Rt},lt["OS/2"].version0=function(St,Et,Ct){var At=lt._bin;return Ct.xAvgCharWidth=At.readShort(St,Et),Et+=2,Ct.usWeightClass=At.readUshort(St,Et),Et+=2,Ct.usWidthClass=At.readUshort(St,Et),Et+=2,Ct.fsType=At.readUshort(St,Et),Et+=2,Ct.ySubscriptXSize=At.readShort(St,Et),Et+=2,Ct.ySubscriptYSize=At.readShort(St,Et),Et+=2,Ct.ySubscriptXOffset=At.readShort(St,Et),Et+=2,Ct.ySubscriptYOffset=At.readShort(St,Et),Et+=2,Ct.ySuperscriptXSize=At.readShort(St,Et),Et+=2,Ct.ySuperscriptYSize=At.readShort(St,Et),Et+=2,Ct.ySuperscriptXOffset=At.readShort(St,Et),Et+=2,Ct.ySuperscriptYOffset=At.readShort(St,Et),Et+=2,Ct.yStrikeoutSize=At.readShort(St,Et),Et+=2,Ct.yStrikeoutPosition=At.readShort(St,Et),Et+=2,Ct.sFamilyClass=At.readShort(St,Et),Et+=2,Ct.panose=At.readBytes(St,Et,10),Et+=10,Ct.ulUnicodeRange1=At.readUint(St,Et),Et+=4,Ct.ulUnicodeRange2=At.readUint(St,Et),Et+=4,Ct.ulUnicodeRange3=At.readUint(St,Et),Et+=4,Ct.ulUnicodeRange4=At.readUint(St,Et),Et+=4,Ct.achVendID=[At.readInt8(St,Et),At.readInt8(St,Et+1),At.readInt8(St,Et+2),At.readInt8(St,Et+3)],Et+=4,Ct.fsSelection=At.readUshort(St,Et),Et+=2,Ct.usFirstCharIndex=At.readUshort(St,Et),Et+=2,Ct.usLastCharIndex=At.readUshort(St,Et),Et+=2,Ct.sTypoAscender=At.readShort(St,Et),Et+=2,Ct.sTypoDescender=At.readShort(St,Et),Et+=2,Ct.sTypoLineGap=At.readShort(St,Et),Et+=2,Ct.usWinAscent=At.readUshort(St,Et),Et+=2,Ct.usWinDescent=At.readUshort(St,Et),Et+=2},lt["OS/2"].version1=function(St,Et,Ct){var At=lt._bin;return Et=lt["OS/2"].version0(St,Et,Ct),Ct.ulCodePageRange1=At.readUint(St,Et),Et+=4,Ct.ulCodePageRange2=At.readUint(St,Et),Et+=4},lt["OS/2"].version2=function(St,Et,Ct){var At=lt._bin;return Et=lt["OS/2"].version1(St,Et,Ct),Ct.sxHeight=At.readShort(St,Et),Et+=2,Ct.sCapHeight=At.readShort(St,Et),Et+=2,Ct.usDefault=At.readUshort(St,Et),Et+=2,Ct.usBreak=At.readUshort(St,Et),Et+=2,Ct.usMaxContext=At.readUshort(St,Et),Et+=2},lt["OS/2"].version5=function(St,Et,Ct){var At=lt._bin;return Et=lt["OS/2"].version2(St,Et,Ct),Ct.usLowerOpticalPointSize=At.readUshort(St,Et),Et+=2,Ct.usUpperOpticalPointSize=At.readUshort(St,Et),Et+=2},lt.post={},lt.post.parse=function(St,Et,Ct){var At=lt._bin,Rt={};return Rt.version=At.readFixed(St,Et),Et+=4,Rt.italicAngle=At.readFixed(St,Et),Et+=4,Rt.underlinePosition=At.readShort(St,Et),Et+=2,Rt.underlineThickness=At.readShort(St,Et),Et+=2,Rt},lt==null&&(lt={}),lt.U==null&&(lt.U={}),lt.U.codeToGlyph=function(St,Et){var Ct=St.cmap,At=-1;if(Ct.p0e4!=null?At=Ct.p0e4:Ct.p3e1!=null?At=Ct.p3e1:Ct.p1e0!=null?At=Ct.p1e0:Ct.p0e3!=null&&(At=Ct.p0e3),At==-1)throw"no familiar platform and encoding!";var Rt=Ct.tables[At];if(Rt.format==0)return Et>=Rt.map.length?0:Rt.map[Et];if(Rt.format==4){for(var Dt=-1,Nt=0;Nt<Rt.endCount.length;Nt++)if(Et<=Rt.endCount[Nt]){Dt=Nt;break}return Dt==-1||Rt.startCount[Dt]>Et?0:65535&(Rt.idRangeOffset[Dt]!=0?Rt.glyphIdArray[Et-Rt.startCount[Dt]+(Rt.idRangeOffset[Dt]>>1)-(Rt.idRangeOffset.length-Dt)]:Et+Rt.idDelta[Dt])}if(Rt.format==12){if(Et>Rt.groups[Rt.groups.length-1][1])return 0;for(Nt=0;Nt<Rt.groups.length;Nt++){var Ft=Rt.groups[Nt];if(Ft[0]<=Et&&Et<=Ft[1])return Ft[2]+(Et-Ft[0])}return 0}throw"unknown cmap table format "+Rt.format},lt.U.glyphToPath=function(St,Et){var Ct={cmds:[],crds:[]};if(St.SVG&&St.SVG.entries[Et]){var At=St.SVG.entries[Et];return At==null?Ct:(typeof At=="string"&&(At=lt.SVG.toPath(At),St.SVG.entries[Et]=At),At)}if(St.CFF){var Rt={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:St.CFF.Private?St.CFF.Private.defaultWidthX:0,open:!1},Dt=St.CFF,Nt=St.CFF.Private;if(Dt.ROS){for(var Ft=0;Dt.FDSelect[Ft+2]<=Et;)Ft+=2;Nt=Dt.FDArray[Dt.FDSelect[Ft+1]].Private}lt.U._drawCFF(St.CFF.CharStrings[Et],Rt,Dt,Nt,Ct)}else St.glyf&&lt.U._drawGlyf(Et,St,Ct);return Ct},lt.U._drawGlyf=function(St,Et,Ct){var At=Et.glyf[St];At==null&&(At=Et.glyf[St]=lt.glyf._parseGlyf(Et,St)),At!=null&&(At.noc>-1?lt.U._simpleGlyph(At,Ct):lt.U._compoGlyph(At,Et,Ct))},lt.U._simpleGlyph=function(St,Et){for(var Ct=0;Ct<St.noc;Ct++){for(var At=Ct==0?0:St.endPts[Ct-1]+1,Rt=St.endPts[Ct],Dt=At;Dt<=Rt;Dt++){var Nt=Dt==At?Rt:Dt-1,Ft=Dt==Rt?At:Dt+1,Ut=1&St.flags[Dt],Wt=1&St.flags[Nt],Zt=1&St.flags[Ft],Kt=St.xs[Dt],cn=St.ys[Dt];if(Dt==At)if(Ut){if(!Wt){lt.U.P.moveTo(Et,Kt,cn);continue}lt.U.P.moveTo(Et,St.xs[Nt],St.ys[Nt])}else Wt?lt.U.P.moveTo(Et,St.xs[Nt],St.ys[Nt]):lt.U.P.moveTo(Et,(St.xs[Nt]+Kt)/2,(St.ys[Nt]+cn)/2);Ut?Wt&&lt.U.P.lineTo(Et,Kt,cn):Zt?lt.U.P.qcurveTo(Et,Kt,cn,St.xs[Ft],St.ys[Ft]):lt.U.P.qcurveTo(Et,Kt,cn,(Kt+St.xs[Ft])/2,(cn+St.ys[Ft])/2)}lt.U.P.closePath(Et)}},lt.U._compoGlyph=function(St,Et,Ct){for(var At=0;At<St.parts.length;At++){var Rt={cmds:[],crds:[]},Dt=St.parts[At];lt.U._drawGlyf(Dt.glyphIndex,Et,Rt);for(var Nt=Dt.m,Ft=0;Ft<Rt.crds.length;Ft+=2){var Ut=Rt.crds[Ft],Wt=Rt.crds[Ft+1];Ct.crds.push(Ut*Nt.a+Wt*Nt.b+Nt.tx),Ct.crds.push(Ut*Nt.c+Wt*Nt.d+Nt.ty)}for(Ft=0;Ft<Rt.cmds.length;Ft++)Ct.cmds.push(Rt.cmds[Ft])}},lt.U._getGlyphClass=function(St,Et){var Ct=lt._lctf.getInterval(Et,St);return Ct==-1?0:Et[Ct+2]},lt.U.getPairAdjustment=function(St,Et,Ct){var At=!1;if(St.GPOS)for(var Rt=St.GPOS,Dt=Rt.lookupList,Nt=Rt.featureList,Ft=[],Ut=0;Ut<Nt.length;Ut++){var Wt=Nt[Ut];if(Wt.tag=="kern"){At=!0;for(var Zt=0;Zt<Wt.tab.length;Zt++)if(!Ft[Wt.tab[Zt]]){Ft[Wt.tab[Zt]]=!0;for(var Kt=Dt[Wt.tab[Zt]],cn=0;cn<Kt.tabs.length;cn++)if(Kt.tabs[cn]!=null){var hn,dn=Kt.tabs[cn];if((!dn.coverage||(hn=lt._lctf.coverageIndex(dn.coverage,Et))!=-1)&&Kt.ltype!=1){if(Kt.ltype==2){var pn=null;if(dn.fmt==1){var gn=dn.pairsets[hn];for(Ut=0;Ut<gn.length;Ut++)gn[Ut].gid2==Ct&&(pn=gn[Ut])}else if(dn.fmt==2){var vn=lt.U._getGlyphClass(Et,dn.classDef1),bn=lt.U._getGlyphClass(Ct,dn.classDef2);pn=dn.matrix[vn][bn]}if(pn){var $n=0;return pn.val1&&pn.val1[2]&&($n+=pn.val1[2]),pn.val2&&pn.val2[0]&&($n+=pn.val2[0]),$n}}}}}}}if(St.kern&&!At){var Tn=St.kern.glyph1.indexOf(Et);if(Tn!=-1){var In=St.kern.rval[Tn].glyph2.indexOf(Ct);if(In!=-1)return St.kern.rval[Tn].vals[In]}}return 0},lt.U._applySubs=function(St,Et,Ct,At){for(var Rt=St.length-Et-1,Dt=0;Dt<Ct.tabs.length;Dt++)if(Ct.tabs[Dt]!=null){var Nt,Ft=Ct.tabs[Dt];if(!Ft.coverage||(Nt=lt._lctf.coverageIndex(Ft.coverage,St[Et]))!=-1){if(Ct.ltype==1)St[Et],Ft.fmt==1?St[Et]=St[Et]+Ft.delta:St[Et]=Ft.newg[Nt];else if(Ct.ltype==4)for(var Ut=Ft.vals[Nt],Wt=0;Wt<Ut.length;Wt++){var Zt=Ut[Wt],Kt=Zt.chain.length;if(!(Kt>Rt)){for(var cn=!0,hn=0,dn=0;dn<Kt;dn++){for(;St[Et+hn+(1+dn)]==-1;)hn++;Zt.chain[dn]!=St[Et+hn+(1+dn)]&&(cn=!1)}if(cn){for(St[Et]=Zt.nglyph,dn=0;dn<Kt+hn;dn++)St[Et+dn+1]=-1;break}}}else if(Ct.ltype==5&&Ft.fmt==2)for(var pn=lt._lctf.getInterval(Ft.cDef,St[Et]),gn=Ft.cDef[pn+2],vn=Ft.scset[gn],bn=0;bn<vn.length;bn++){var $n=vn[bn],Tn=$n.input;if(!(Tn.length>Rt)){for(cn=!0,dn=0;dn<Tn.length;dn++){var In=lt._lctf.getInterval(Ft.cDef,St[Et+1+dn]);if(pn==-1&&Ft.cDef[In+2]!=Tn[dn]){cn=!1;break}}if(cn){var Pn=$n.substLookupRecords;for(Wt=0;Wt<Pn.length;Wt+=2)Pn[Wt],Pn[Wt+1]}}}else if(Ct.ltype==6&&Ft.fmt==3){if(!lt.U._glsCovered(St,Ft.backCvg,Et-Ft.backCvg.length)||!lt.U._glsCovered(St,Ft.inptCvg,Et)||!lt.U._glsCovered(St,Ft.ahedCvg,Et+Ft.inptCvg.length))continue;var zn=Ft.lookupRec;for(bn=0;bn<zn.length;bn+=2){pn=zn[bn];var An=At[zn[bn+1]];lt.U._applySubs(St,Et+pn,An,At)}}}}},lt.U._glsCovered=function(St,Et,Ct){for(var At=0;At<Et.length;At++)if(lt._lctf.coverageIndex(Et[At],St[Ct+At])==-1)return!1;return!0},lt.U.glyphsToPath=function(St,Et,Ct){for(var At={cmds:[],crds:[]},Rt=0,Dt=0;Dt<Et.length;Dt++){var Nt=Et[Dt];if(Nt!=-1){for(var Ft=Dt<Et.length-1&&Et[Dt+1]!=-1?Et[Dt+1]:0,Ut=lt.U.glyphToPath(St,Nt),Wt=0;Wt<Ut.crds.length;Wt+=2)At.crds.push(Ut.crds[Wt]+Rt),At.crds.push(Ut.crds[Wt+1]);for(Ct&&At.cmds.push(Ct),Wt=0;Wt<Ut.cmds.length;Wt++)At.cmds.push(Ut.cmds[Wt]);Ct&&At.cmds.push("X"),Rt+=St.hmtx.aWidth[Nt],Dt<Et.length-1&&(Rt+=lt.U.getPairAdjustment(St,Nt,Ft))}}return At},lt.U.P={},lt.U.P.moveTo=function(St,Et,Ct){St.cmds.push("M"),St.crds.push(Et,Ct)},lt.U.P.lineTo=function(St,Et,Ct){St.cmds.push("L"),St.crds.push(Et,Ct)},lt.U.P.curveTo=function(St,Et,Ct,At,Rt,Dt,Nt){St.cmds.push("C"),St.crds.push(Et,Ct,At,Rt,Dt,Nt)},lt.U.P.qcurveTo=function(St,Et,Ct,At,Rt){St.cmds.push("Q"),St.crds.push(Et,Ct,At,Rt)},lt.U.P.closePath=function(St){St.cmds.push("Z")},lt.U._drawCFF=function(St,Et,Ct,At,Rt){for(var Dt=Et.stack,Nt=Et.nStems,Ft=Et.haveWidth,Ut=Et.width,Wt=Et.open,Zt=0,Kt=Et.x,cn=Et.y,hn=0,dn=0,pn=0,gn=0,vn=0,bn=0,$n=0,Tn=0,In=0,Pn=0,zn={val:0,size:0};Zt<St.length;){lt.CFF.getCharString(St,Zt,zn);var An=zn.val;if(Zt+=zn.size,An=="o1"||An=="o18")Dt.length%2!=0&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX),Nt+=Dt.length>>1,Dt.length=0,Ft=!0;else if(An=="o3"||An=="o23")Dt.length%2!=0&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX),Nt+=Dt.length>>1,Dt.length=0,Ft=!0;else if(An=="o4")Dt.length>1&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX,Ft=!0),Wt&&lt.U.P.closePath(Rt),cn+=Dt.pop(),lt.U.P.moveTo(Rt,Kt,cn),Wt=!0;else if(An=="o5")for(;Dt.length>0;)Kt+=Dt.shift(),cn+=Dt.shift(),lt.U.P.lineTo(Rt,Kt,cn);else if(An=="o6"||An=="o7")for(var Gn=Dt.length,xn=An=="o6",Qn=0;Qn<Gn;Qn++){var qn=Dt.shift();xn?Kt+=qn:cn+=qn,xn=!xn,lt.U.P.lineTo(Rt,Kt,cn)}else if(An=="o8"||An=="o24"){Gn=Dt.length;for(var nr=0;nr+6<=Gn;)hn=Kt+Dt.shift(),dn=cn+Dt.shift(),pn=hn+Dt.shift(),gn=dn+Dt.shift(),Kt=pn+Dt.shift(),cn=gn+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,Kt,cn),nr+=6;An=="o24"&&(Kt+=Dt.shift(),cn+=Dt.shift(),lt.U.P.lineTo(Rt,Kt,cn))}else{if(An=="o11")break;if(An=="o1234"||An=="o1235"||An=="o1236"||An=="o1237")An=="o1234"&&(dn=cn,pn=(hn=Kt+Dt.shift())+Dt.shift(),Pn=gn=dn+Dt.shift(),bn=gn,Tn=cn,Kt=($n=(vn=(In=pn+Dt.shift())+Dt.shift())+Dt.shift())+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,In,Pn),lt.U.P.curveTo(Rt,vn,bn,$n,Tn,Kt,cn)),An=="o1235"&&(hn=Kt+Dt.shift(),dn=cn+Dt.shift(),pn=hn+Dt.shift(),gn=dn+Dt.shift(),In=pn+Dt.shift(),Pn=gn+Dt.shift(),vn=In+Dt.shift(),bn=Pn+Dt.shift(),$n=vn+Dt.shift(),Tn=bn+Dt.shift(),Kt=$n+Dt.shift(),cn=Tn+Dt.shift(),Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,In,Pn),lt.U.P.curveTo(Rt,vn,bn,$n,Tn,Kt,cn)),An=="o1236"&&(hn=Kt+Dt.shift(),dn=cn+Dt.shift(),pn=hn+Dt.shift(),Pn=gn=dn+Dt.shift(),bn=gn,$n=(vn=(In=pn+Dt.shift())+Dt.shift())+Dt.shift(),Tn=bn+Dt.shift(),Kt=$n+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,In,Pn),lt.U.P.curveTo(Rt,vn,bn,$n,Tn,Kt,cn)),An=="o1237"&&(hn=Kt+Dt.shift(),dn=cn+Dt.shift(),pn=hn+Dt.shift(),gn=dn+Dt.shift(),In=pn+Dt.shift(),Pn=gn+Dt.shift(),vn=In+Dt.shift(),bn=Pn+Dt.shift(),$n=vn+Dt.shift(),Tn=bn+Dt.shift(),Math.abs($n-Kt)>Math.abs(Tn-cn)?Kt=$n+Dt.shift():cn=Tn+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,In,Pn),lt.U.P.curveTo(Rt,vn,bn,$n,Tn,Kt,cn));else if(An=="o14"){if(Dt.length>0&&!Ft&&(Ut=Dt.shift()+Ct.nominalWidthX,Ft=!0),Dt.length==4){var Un=Dt.shift(),Nn=Dt.shift(),jn=Dt.shift(),Ln=Dt.shift(),Cn=lt.CFF.glyphBySE(Ct,jn),tr=lt.CFF.glyphBySE(Ct,Ln);lt.U._drawCFF(Ct.CharStrings[Cn],Et,Ct,At,Rt),Et.x=Un,Et.y=Nn,lt.U._drawCFF(Ct.CharStrings[tr],Et,Ct,At,Rt)}Wt&&(lt.U.P.closePath(Rt),Wt=!1)}else if(An=="o19"||An=="o20")Dt.length%2!=0&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX),Nt+=Dt.length>>1,Dt.length=0,Ft=!0,Zt+=Nt+7>>3;else if(An=="o21")Dt.length>2&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX,Ft=!0),cn+=Dt.pop(),Kt+=Dt.pop(),Wt&&lt.U.P.closePath(Rt),lt.U.P.moveTo(Rt,Kt,cn),Wt=!0;else if(An=="o22")Dt.length>1&&!Ft&&(Ut=Dt.shift()+At.nominalWidthX,Ft=!0),Kt+=Dt.pop(),Wt&&lt.U.P.closePath(Rt),lt.U.P.moveTo(Rt,Kt,cn),Wt=!0;else if(An=="o25"){for(;Dt.length>6;)Kt+=Dt.shift(),cn+=Dt.shift(),lt.U.P.lineTo(Rt,Kt,cn);hn=Kt+Dt.shift(),dn=cn+Dt.shift(),pn=hn+Dt.shift(),gn=dn+Dt.shift(),Kt=pn+Dt.shift(),cn=gn+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,Kt,cn)}else if(An=="o26")for(Dt.length%2&&(Kt+=Dt.shift());Dt.length>0;)hn=Kt,dn=cn+Dt.shift(),Kt=pn=hn+Dt.shift(),cn=(gn=dn+Dt.shift())+Dt.shift(),lt.U.P.curveTo(Rt,hn,dn,pn,gn,Kt,cn);else if(An=="o27")for(Dt.length%2&&(cn+=Dt.shift());Dt.length>0;)dn=cn,pn=(hn=Kt+Dt.shift())+Dt.shift(),gn=dn+Dt.shift(),Kt=pn+Dt.shift(),cn=gn,lt.U.P.curveTo(Rt,hn,dn,pn,gn,Kt,cn);else if(An=="o10"||An=="o29"){var ir=An=="o10"?At:Ct;if(Dt.length==0)console.debug("error: empty stack");else{var Zn=Dt.pop(),br=ir.Subrs[Zn+ir.Bias];Et.x=Kt,Et.y=cn,Et.nStems=Nt,Et.haveWidth=Ft,Et.width=Ut,Et.open=Wt,lt.U._drawCFF(br,Et,Ct,At,Rt),Kt=Et.x,cn=Et.y,Nt=Et.nStems,Ft=Et.haveWidth,Ut=Et.width,Wt=Et.open}}else if(An=="o30"||An=="o31"){var fr=Dt.length,Or=(nr=0,An=="o31");for(nr+=fr-(Gn=-3&fr);nr<Gn;)Or?(dn=cn,pn=(hn=Kt+Dt.shift())+Dt.shift(),cn=(gn=dn+Dt.shift())+Dt.shift(),Gn-nr==5?(Kt=pn+Dt.shift(),nr++):Kt=pn,Or=!1):(hn=Kt,dn=cn+Dt.shift(),pn=hn+Dt.shift(),gn=dn+Dt.shift(),Kt=pn+Dt.shift(),Gn-nr==5?(cn=gn+Dt.shift(),nr++):cn=gn,Or=!0),lt.U.P.curveTo(Rt,hn,dn,pn,gn,Kt,cn),nr+=4}else{if((An+"").charAt(0)=="o")throw console.debug("Unknown operation: "+An,St),An;Dt.push(An)}}}Et.x=Kt,Et.y=cn,Et.nStems=Nt,Et.haveWidth=Ft,Et.width=Ut,Et.open=Wt};var dt=lt,vt={Typr:dt};return ft.Typr=dt,ft.default=vt,Object.defineProperty(ft,"__esModule",{value:!0}),ft}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(ft){var lt=Uint8Array,dt=Uint16Array,vt=Uint32Array,St=new lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Et=new lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ct=new lt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),At=function(An,Gn){for(var xn=new dt(31),Qn=0;Qn<31;++Qn)xn[Qn]=Gn+=1<<An[Qn-1];var qn=new vt(xn[30]);for(Qn=1;Qn<30;++Qn)for(var nr=xn[Qn];nr<xn[Qn+1];++nr)qn[nr]=nr-xn[Qn]<<5|Qn;return[xn,qn]},Rt=At(St,2),Dt=Rt[0],Nt=Rt[1];Dt[28]=258,Nt[258]=28;for(var Ft=At(Et,0)[0],Ut=new dt(32768),Wt=0;Wt<32768;++Wt){var Zt=(43690&Wt)>>>1|(21845&Wt)<<1;Zt=(61680&(Zt=(52428&Zt)>>>2|(13107&Zt)<<2))>>>4|(3855&Zt)<<4,Ut[Wt]=((65280&Zt)>>>8|(255&Zt)<<8)>>>1}var Kt=function(An,Gn,xn){for(var Qn=An.length,qn=0,nr=new dt(Gn);qn<Qn;++qn)++nr[An[qn]-1];var Un,Nn=new dt(Gn);for(qn=0;qn<Gn;++qn)Nn[qn]=Nn[qn-1]+nr[qn-1]<<1;if(xn){Un=new dt(1<<Gn);var jn=15-Gn;for(qn=0;qn<Qn;++qn)if(An[qn])for(var Ln=qn<<4|An[qn],Cn=Gn-An[qn],tr=Nn[An[qn]-1]++<<Cn,ir=tr|(1<<Cn)-1;tr<=ir;++tr)Un[Ut[tr]>>>jn]=Ln}else for(Un=new dt(Qn),qn=0;qn<Qn;++qn)An[qn]&&(Un[qn]=Ut[Nn[An[qn]-1]++]>>>15-An[qn]);return Un},cn=new lt(288);for(Wt=0;Wt<144;++Wt)cn[Wt]=8;for(Wt=144;Wt<256;++Wt)cn[Wt]=9;for(Wt=256;Wt<280;++Wt)cn[Wt]=7;for(Wt=280;Wt<288;++Wt)cn[Wt]=8;var hn=new lt(32);for(Wt=0;Wt<32;++Wt)hn[Wt]=5;var dn=Kt(cn,9,1),pn=Kt(hn,5,1),gn=function(An){for(var Gn=An[0],xn=1;xn<An.length;++xn)An[xn]>Gn&&(Gn=An[xn]);return Gn},vn=function(An,Gn,xn){var Qn=Gn/8|0;return(An[Qn]|An[Qn+1]<<8)>>(7&Gn)&xn},bn=function(An,Gn){var xn=Gn/8|0;return(An[xn]|An[xn+1]<<8|An[xn+2]<<16)>>(7&Gn)},$n=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Tn=function(An,Gn,xn){var Qn=new Error(Gn||$n[An]);if(Qn.code=An,Error.captureStackTrace&&Error.captureStackTrace(Qn,Tn),!xn)throw Qn;return Qn},In=function(An,Gn,xn){var Qn=An.length;if(!Qn||xn&&!xn.l&&Qn<5)return Gn||new lt(0);var qn=!Gn||xn,nr=!xn||xn.i;xn||(xn={}),Gn||(Gn=new lt(3*Qn));var Un,Nn=function(Rn){var Xn=Gn.length;if(Rn>Xn){var cr=new lt(Math.max(2*Xn,Rn));cr.set(Gn),Gn=cr}},jn=xn.f||0,Ln=xn.p||0,Cn=xn.b||0,tr=xn.l,ir=xn.d,Zn=xn.m,br=xn.n,fr=8*Qn;do{if(!tr){xn.f=jn=vn(An,Ln,1);var Or=vn(An,Ln+1,3);if(Ln+=3,!Or){var Pr=An[(Sr=((Un=Ln)/8|0)+(7&Un&&1)+4)-4]|An[Sr-3]<<8,zr=Sr+Pr;if(zr>Qn){nr&&Tn(0);break}qn&&Nn(Cn+Pr),Gn.set(An.subarray(Sr,zr),Cn),xn.b=Cn+=Pr,xn.p=Ln=8*zr;continue}if(Or==1)tr=dn,ir=pn,Zn=9,br=5;else if(Or==2){var Dr=vn(An,Ln,31)+257,_r=vn(An,Ln+10,15)+4,Nr=Dr+vn(An,Ln+5,31)+1;Ln+=14;for(var Dn=new lt(Nr),yr=new lt(19),hr=0;hr<_r;++hr)yr[Ct[hr]]=vn(An,Ln+3*hr,7);Ln+=3*_r;var Jn=gn(yr),Yn=(1<<Jn)-1,ar=Kt(yr,Jn,1);for(hr=0;hr<Nr;){var Sr,gr=ar[vn(An,Ln,Yn)];if(Ln+=15&gr,(Sr=gr>>>4)<16)Dn[hr++]=Sr;else{var Vn=0,Wn=0;for(Sr==16?(Wn=3+vn(An,Ln,3),Ln+=2,Vn=Dn[hr-1]):Sr==17?(Wn=3+vn(An,Ln,7),Ln+=3):Sr==18&&(Wn=11+vn(An,Ln,127),Ln+=7);Wn--;)Dn[hr++]=Vn}}var rr=Dn.subarray(0,Dr),lr=Dn.subarray(Dr);Zn=gn(rr),br=gn(lr),tr=Kt(rr,Zn,1),ir=Kt(lr,br,1)}else Tn(1);if(Ln>fr){nr&&Tn(0);break}}qn&&Nn(Cn+131072);for(var xr=(1<<Zn)-1,Fr=(1<<br)-1,mr=Ln;;mr=Ln){var Yr=(Vn=tr[bn(An,Ln)&xr])>>>4;if((Ln+=15&Vn)>fr){nr&&Tn(0);break}if(Vn||Tn(2),Yr<256)Gn[Cn++]=Yr;else{if(Yr==256){mr=Ln,tr=null;break}var Vr=Yr-254;if(Yr>264){var eo=St[hr=Yr-257];Vr=vn(An,Ln,(1<<eo)-1)+Dt[hr],Ln+=eo}var ur=ir[bn(An,Ln)&Fr],kr=ur>>>4;if(ur||Tn(3),Ln+=15&ur,lr=Ft[kr],kr>3&&(eo=Et[kr],lr+=bn(An,Ln)&(1<<eo)-1,Ln+=eo),Ln>fr){nr&&Tn(0);break}qn&&Nn(Cn+131072);for(var Br=Cn+Vr;Cn<Br;Cn+=4)Gn[Cn]=Gn[Cn-lr],Gn[Cn+1]=Gn[Cn+1-lr],Gn[Cn+2]=Gn[Cn+2-lr],Gn[Cn+3]=Gn[Cn+3-lr];Cn=Br}}xn.l=tr,xn.p=mr,xn.b=Cn,tr&&(jn=1,xn.m=Zn,xn.d=ir,xn.n=br)}while(!jn);return Cn==Gn.length?Gn:function(Rn,Xn,cr){(Xn==null||Xn<0)&&(Xn=0),(cr==null||cr>Rn.length)&&(cr=Rn.length);var wr=new(Rn instanceof dt?dt:Rn instanceof vt?vt:lt)(cr-Xn);return wr.set(Rn.subarray(Xn,cr)),wr}(Gn,0,Cn)},Pn=new lt(0),zn=typeof TextDecoder<"u"&&new TextDecoder;try{zn.decode(Pn,{stream:!0})}catch{}return ft.convert_streams=function(An){var Gn=new DataView(An),xn=0;function Qn(){var Dr=Gn.getUint16(xn);return xn+=2,Dr}function qn(){var Dr=Gn.getUint32(xn);return xn+=4,Dr}function nr(Dr){Pr.setUint16(zr,Dr),zr+=2}function Un(Dr){Pr.setUint32(zr,Dr),zr+=4}for(var Nn={signature:qn(),flavor:qn(),length:qn(),numTables:Qn(),reserved:Qn(),totalSfntSize:qn(),majorVersion:Qn(),minorVersion:Qn(),metaOffset:qn(),metaLength:qn(),metaOrigLength:qn(),privOffset:qn(),privLength:qn()},jn=0;Math.pow(2,jn)<=Nn.numTables;)jn++;jn--;for(var Ln=16*Math.pow(2,jn),Cn=16*Nn.numTables-Ln,tr=12,ir=[],Zn=0;Zn<Nn.numTables;Zn++)ir.push({tag:qn(),offset:qn(),compLength:qn(),origLength:qn(),origChecksum:qn()}),tr+=16;var br,fr=new Uint8Array(12+16*ir.length+ir.reduce(function(Dr,_r){return Dr+_r.origLength+4},0)),Or=fr.buffer,Pr=new DataView(Or),zr=0;return Un(Nn.flavor),nr(Nn.numTables),nr(Ln),nr(jn),nr(Cn),ir.forEach(function(Dr){Un(Dr.tag),Un(Dr.origChecksum),Un(tr),Un(Dr.origLength),Dr.outOffset=tr,(tr+=Dr.origLength)%4!=0&&(tr+=4-tr%4)}),ir.forEach(function(Dr){var _r,Nr=An.slice(Dr.offset,Dr.offset+Dr.compLength);if(Dr.compLength!=Dr.origLength){var Dn=new Uint8Array(Dr.origLength);_r=new Uint8Array(Nr,2),In(_r,Dn)}else Dn=new Uint8Array(Nr);fr.set(Dn,Dr.outOffset);var yr=0;(tr=Dr.outOffset+Dr.origLength)%4!=0&&(yr=4-tr%4),fr.set(new Uint8Array(yr).buffer,Dr.outOffset+Dr.origLength),br=tr+yr}),Or.slice(0,br)},Object.defineProperty(ft,"__esModule",{value:!0}),ft}({}).convert_streams}function parserFactory(ft,lt){const dt={M:2,L:2,Q:4,C:6,Z:0},vt={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},St=1,Et=2,Ct=4,At=8,Rt=16,Dt=32;let Nt;function Ft(vn){if(!Nt){const bn={R:Et,L:St,D:Ct,C:Rt,U:Dt,T:At};Nt=new Map;for(let $n in vt){let Tn=0;vt[$n].split(",").forEach(In=>{let[Pn,zn]=In.split("+");Pn=parseInt(Pn,36),zn=zn?parseInt(zn,36):0,Nt.set(Tn+=Pn,bn[$n]);for(let An=zn;An--;)Nt.set(++Tn,bn[$n])})}}return Nt.get(vn)||Dt}const Ut=1,Wt=2,Zt=3,Kt=4,cn=[null,"isol","init","fina","medi"];function hn(vn){const bn=new Uint8Array(vn.length);let $n=Dt,Tn=Ut,In=-1;for(let Pn=0;Pn<vn.length;Pn++){const zn=vn.codePointAt(Pn);let An=Ft(zn)|0,Gn=Ut;An&At||($n&(St|Ct|Rt)?An&(Et|Ct|Rt)?(Gn=Zt,(Tn===Ut||Tn===Zt)&&bn[In]++):An&(St|Dt)&&(Tn===Wt||Tn===Kt)&&bn[In]--:$n&(Et|Dt)&&(Tn===Wt||Tn===Kt)&&bn[In]--,Tn=bn[Pn]=Gn,$n=An,In=Pn,zn>65535&&Pn++)}return bn}function dn(vn,bn){const $n=[];for(let In=0;In<bn.length;In++){const Pn=bn.codePointAt(In);Pn>65535&&In++,$n.push(ft.U.codeToGlyph(vn,Pn))}const Tn=vn.GSUB;if(Tn){const{lookupList:In,featureList:Pn}=Tn;let zn;const An=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Gn=[];Pn.forEach(xn=>{if(An.test(xn.tag))for(let Qn=0;Qn<xn.tab.length;Qn++){if(Gn[xn.tab[Qn]])continue;Gn[xn.tab[Qn]]=!0;const qn=In[xn.tab[Qn]],nr=/^(isol|init|fina|medi)$/.test(xn.tag);nr&&!zn&&(zn=hn(bn));for(let Un=0;Un<$n.length;Un++)(!zn||!nr||cn[zn[Un]]===xn.tag)&&ft.U._applySubs($n,Un,qn,In)}})}return $n}function pn(...vn){for(let bn=0;bn<vn.length;bn++)if(typeof vn[bn]=="number")return vn[bn]}function gn(vn){const bn=Object.create(null),$n=vn["OS/2"],Tn=vn.hhea,In=vn.head.unitsPerEm,Pn=pn($n&&$n.sTypoAscender,Tn&&Tn.ascender,In),zn={unitsPerEm:In,ascender:Pn,descender:pn($n&&$n.sTypoDescender,Tn&&Tn.descender,0),capHeight:pn($n&&$n.sCapHeight,Pn),xHeight:pn($n&&$n.sxHeight,Pn),lineGap:pn($n&&$n.sTypoLineGap,Tn&&Tn.lineGap),forEachGlyph(An,Gn,xn,Qn){let qn=0;const nr=1/zn.unitsPerEm*Gn,Un=dn(vn,An);let Nn=0,jn=-1;return Un.forEach((Ln,Cn)=>{if(Ln!==-1){let tr=bn[Ln];if(!tr){const{cmds:ir,crds:Zn}=ft.U.glyphToPath(vn,Ln);let br="",fr=0;for(let _r=0,Nr=ir.length;_r<Nr;_r++){const Dn=dt[ir[_r]];br+=ir[_r];for(let yr=1;yr<=Dn;yr++)br+=(yr>1?",":"")+Zn[fr++]}let Or,Pr,zr,Dr;if(Zn.length){Or=Pr=1/0,zr=Dr=-1/0;for(let _r=0,Nr=Zn.length;_r<Nr;_r+=2){let Dn=Zn[_r],yr=Zn[_r+1];Dn<Or&&(Or=Dn),yr<Pr&&(Pr=yr),Dn>zr&&(zr=Dn),yr>Dr&&(Dr=yr)}}else Or=zr=Pr=Dr=0;tr=bn[Ln]={index:Ln,advanceWidth:vn.hmtx.aWidth[Ln],xMin:Or,yMin:Pr,xMax:zr,yMax:Dr,path:br,pathCommandCount:ir.length}}jn!==-1&&(qn+=ft.U.getPairAdjustment(vn,jn,Ln)*nr),Qn.call(null,tr,qn,Nn),tr.advanceWidth&&(qn+=tr.advanceWidth*nr),xn&&(qn+=xn*Gn),jn=Ln}Nn+=An.codePointAt(Nn)>65535?2:1}),qn}};return zn}return function(bn){const $n=new Uint8Array(bn,0,4),Tn=ft._bin.readASCII($n,0,4);if(Tn==="wOFF")bn=lt(bn);else if(Tn==="wOF2")throw new Error("woff2 fonts not supported");return gn(ft.parse(bn)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(ft,lt,dt){const vt=ft(),St=lt();return dt(vt,St)}}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(ft,lt){ft=assign({},ft);const dt=now$1();if(ft.font=toAbsoluteURL(ft.font||CONFIG.defaultFontURL),ft.text=""+ft.text,ft.sdfGlyphSize=ft.sdfGlyphSize||CONFIG.sdfGlyphSize,ft.colorRanges!=null){let Ft={};for(let Ut in ft.colorRanges)if(ft.colorRanges.hasOwnProperty(Ut)){let Wt=ft.colorRanges[Ut];typeof Wt!="number"&&(Wt=tempColor.set(Wt).getHex()),Ft[Ut]=Wt}ft.colorRanges=Ft}Object.freeze(ft);const{textureWidth:vt,sdfExponent:St}=CONFIG,{sdfGlyphSize:Et}=ft,Ct=vt/Et*4;let At=atlases[Et];if(!At){const Ft=document.createElement("canvas");Ft.width=vt,Ft.height=Et*256/Ct,At=atlases[Et]={glyphCount:0,sdfGlyphSize:Et,sdfCanvas:Ft,sdfTexture:new Texture(Ft,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},At.sdfTexture.generateMipmaps=!1,initContextLossHandling(At)}const{sdfTexture:Rt,sdfCanvas:Dt}=At;let Nt=At.glyphsByFont.get(ft.font);Nt||At.glyphsByFont.set(ft.font,Nt=new Map),typesetInWorker(ft).then(Ft=>{const{glyphIds:Ut,glyphPositions:Wt,fontSize:Zt,unitsPerEm:Kt,timings:cn}=Ft,hn=[],dn=new Float32Array(Ut.length*4),pn=Zt/Kt;let gn=0,vn=0;const bn=now$1();Ut.forEach((zn,An)=>{let Gn=Nt.get(zn);if(!Gn){const{path:nr,pathBounds:Un}=Ft.glyphData[zn],Nn=Math.max(Un[2]-Un[0],Un[3]-Un[1])/Et*(CONFIG.sdfMargin*Et+.5),jn=At.glyphCount++,Ln=[Un[0]-Nn,Un[1]-Nn,Un[2]+Nn,Un[3]+Nn];Nt.set(zn,Gn={path:nr,atlasIndex:jn,sdfViewBox:Ln}),hn.push(Gn)}const{sdfViewBox:xn}=Gn,Qn=Wt[vn++],qn=Wt[vn++];dn[gn++]=Qn+xn[0]*pn,dn[gn++]=qn+xn[1]*pn,dn[gn++]=Qn+xn[2]*pn,dn[gn++]=qn+xn[3]*pn,Ut[An]=Gn.atlasIndex}),cn.quads=(cn.quads||0)+(now$1()-bn);const $n=now$1();cn.sdf={};const Tn=Dt.height,In=Math.ceil(At.glyphCount/Ct),Pn=Math.pow(2,Math.ceil(Math.log2(In*Et)));Pn>Tn&&(console.info(`Increasing SDF texture size ${Tn}->${Pn}`),resizeWebGLCanvasWithoutClearing(Dt,vt,Pn),Rt.dispose()),Promise.all(hn.map(zn=>generateGlyphSDF(zn,At,ft.gpuAccelerateSDF).then(({timing:An})=>{cn.sdf[zn.atlasIndex]=An}))).then(()=>{hn.length&&!At.contextLost&&(safariPre15Workaround(At),Rt.needsUpdate=!0),cn.sdfTotal=now$1()-$n,cn.total=now$1()-dt,lt(Object.freeze({parameters:ft,sdfTexture:Rt,sdfGlyphSize:Et,sdfExponent:St,glyphBounds:dn,glyphAtlasIndices:Ut,glyphColors:Ft.glyphColors,caretPositions:Ft.caretPositions,caretHeight:Ft.caretHeight,chunkedBounds:Ft.chunkedBounds,ascender:Ft.ascender,descender:Ft.descender,lineHeight:Ft.lineHeight,capHeight:Ft.capHeight,xHeight:Ft.xHeight,topBaseline:Ft.topBaseline,blockBounds:Ft.blockBounds,visibleBounds:Ft.visibleBounds,timings:Ft.timings}))})}),Promise.resolve().then(()=>{At.contextLost||warmUpSDFCanvas(Dt)})}function generateGlyphSDF({path:ft,atlasIndex:lt,sdfViewBox:dt},{sdfGlyphSize:vt,sdfCanvas:St,contextLost:Et},Ct){if(Et)return Promise.resolve({timing:-1});const{textureWidth:At,sdfExponent:Rt}=CONFIG,Dt=Math.max(dt[2]-dt[0],dt[3]-dt[1]),Nt=Math.floor(lt/4),Ft=Nt%(At/vt)*vt,Ut=Math.floor(Nt/(At/vt))*vt,Wt=lt%4;return generateSDF(vt,vt,ft,dt,Dt,Rt,St,Ft,Ut,Wt,Ct)}function initContextLossHandling(ft){const lt=ft.sdfCanvas;lt.addEventListener("webglcontextlost",dt=>{console.log("Context Lost",dt),dt.preventDefault(),ft.contextLost=!0}),lt.addEventListener("webglcontextrestored",dt=>{console.log("Context Restored",dt),ft.contextLost=!1;const vt=[];ft.glyphsByFont.forEach(St=>{St.forEach(Et=>{vt.push(generateGlyphSDF(Et,ft,!0))})}),Promise.all(vt).then(()=>{safariPre15Workaround(ft),ft.sdfTexture.needsUpdate=!0})})}function preloadFont({font:ft,characters:lt,sdfGlyphSize:dt},vt){let St=Array.isArray(lt)?lt.join(`
`):""+lt;getTextRenderInfo({font:ft,sdfGlyphSize:dt,text:St},vt)}function assign(ft,lt){for(let dt in lt)lt.hasOwnProperty(dt)&&(ft[dt]=lt[dt]);return ft}let linkEl;function toAbsoluteURL(ft){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=ft,linkEl.href}function safariPre15Workaround(ft){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:lt,sdfTexture:dt}=ft,{width:vt,height:St}=lt,Et=ft.sdfCanvas.getContext("webgl");let Ct=dt.image.data;(!Ct||Ct.length!==vt*St*4)&&(Ct=new Uint8Array(vt*St*4),dt.image={width:vt,height:St,data:Ct},dt.flipY=!1,dt.isDataTexture=!0),Et.readPixels(0,0,vt,St,Et.RGBA,Et.UNSIGNED_BYTE,Ct)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(ft,lt,dt,vt){const{defaultFontURL:St}=ft;return dt(lt,vt(),{defaultFontURL:St})}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(ft){return function(lt){return new Promise(dt=>{ft.typeset(lt,dt)})}},getTransferables(ft){const lt=[ft.glyphPositions.buffer,ft.glyphIds.buffer];return ft.caretPositions&&lt.push(ft.caretPositions.buffer),ft.glyphColors&&lt.push(ft.glyphColors.buffer),lt}}),templateGeometries={};function getTemplateGeometry(ft){let lt=templateGeometries[ft];if(!lt){const dt=new PlaneGeometry(1,1,ft,ft),vt=dt.clone(),St=dt.attributes,Et=vt.attributes,Ct=new BufferGeometry,At=St.uv.count;for(let Rt=0;Rt<At;Rt++)Et.position.array[Rt*3]*=-1,Et.normal.array[Rt*3+2]*=-1;["position","normal","uv"].forEach(Rt=>{Ct.setAttribute(Rt,new Float32BufferAttribute([...St[Rt].array,...Et[Rt].array],St[Rt].itemSize))}),Ct.setIndex([...dt.index.array,...vt.index.array.map(Rt=>Rt+At)]),Ct.translate(.5,.5,0),lt=templateGeometries[ft]=Ct}return lt}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere$1,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(lt){const dt=this.getIndex().count;this.setDrawRange(lt===BackSide?dt/2:0,lt===DoubleSide?dt:dt/2)}set detail(lt){if(lt!==this._detail){this._detail=lt,(typeof lt!="number"||lt<1)&&(lt=1);let dt=getTemplateGeometry(lt);["position","normal","uv"].forEach(vt=>{this.attributes[vt]=dt.attributes[vt].clone()}),this.setIndex(dt.getIndex().clone())}}get detail(){return this._detail}set curveRadius(lt){lt!==this._curveRadius&&(this._curveRadius=lt,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(lt,dt,vt,St,Et){updateBufferAttr(this,glyphBoundsAttrName,lt,4),updateBufferAttr(this,glyphIndexAttrName,dt,1),updateBufferAttr(this,glyphColorAttrName,Et,3),this._blockBounds=vt,this._chunkedBounds=St,this.instanceCount=dt.length,this._updateBounds()}_updateBounds(){const lt=this._blockBounds;if(lt){const{curveRadius:dt,boundingBox:vt}=this;if(dt){const{PI:St,floor:Et,min:Ct,max:At,sin:Rt,cos:Dt}=Math,Nt=St/2,Ft=St*2,Ut=Math.abs(dt),Wt=lt[0]/Ut,Zt=lt[2]/Ut,Kt=Et((Wt+Nt)/Ft)!==Et((Zt+Nt)/Ft)?-Ut:Ct(Rt(Wt)*Ut,Rt(Zt)*Ut),cn=Et((Wt-Nt)/Ft)!==Et((Zt-Nt)/Ft)?Ut:At(Rt(Wt)*Ut,Rt(Zt)*Ut),hn=Et((Wt+St)/Ft)!==Et((Zt+St)/Ft)?Ut*2:At(Ut-Dt(Wt)*Ut,Ut-Dt(Zt)*Ut);vt.min.set(Kt,lt[1],dt<0?-hn:0),vt.max.set(cn,lt[3],dt<0?0:hn)}else vt.min.set(lt[0],lt[1],0),vt.max.set(lt[2],lt[3],0);vt.getBoundingSphere(this.boundingSphere)}}applyClipRect(lt){let dt=this.getAttribute(glyphIndexAttrName).count,vt=this._chunkedBounds;if(vt)for(let St=vt.length;St--;){dt=vt[St].end;let Et=vt[St].rect;if(Et[1]<lt.w&&Et[3]>lt.y&&Et[0]<lt.z&&Et[2]>lt.x)break}this.instanceCount=dt}}function updateBufferAttr(ft,lt,dt,vt){const St=ft.getAttribute(lt);dt?St&&St.array.length===dt.length?(St.array.set(dt),St.needsUpdate=!0):(ft.setAttribute(lt,new InstancedBufferAttribute(dt,vt)),delete ft._maxInstanceCount,ft.dispose()):St&&ft.deleteAttribute(lt)}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(ft){const lt=createDerivedMaterial(ft,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:dt,fragmentShader:vt}){let St=/\buniform\s+vec3\s+diffuse\b/;return St.test(vt)&&(vt=vt.replace(St,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),St.test(dt)||(dt=dt.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:dt,fragmentShader:vt}}});return lt.transparent=!0,Object.defineProperties(lt,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),lt}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(ft){return Array.isArray(ft)?ft[0]:ft}let getFlatRaycastMesh=()=>{const ft=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>ft,ft},getCurvedRaycastMesh=()=>{const ft=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>ft,ft};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$2=class extends Mesh{constructor(){const lt=new GlyphsGeometry;super(lt,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(lt){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(lt):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},dt=>{this._isSyncing=!1,this._textRenderInfo=dt,this.geometry.updateGlyphs(dt.glyphBounds,dt.glyphAtlasIndices,dt.blockBounds,dt.chunkedBounds,dt.glyphColors);const vt=this._queuedSyncs;vt&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{vt.forEach(St=>St&&St())})),this.dispatchEvent(syncCompleteEvent),lt&&lt()})))}onBeforeRender(lt,dt,vt,St,Et,Ct){this.sync(),Et.isTroikaTextMaterial&&this._prepareForRender(Et),Et._hadOwnSide=Et.hasOwnProperty("side"),this.geometry.setSide(Et._actualSide=Et.side),Et.side=FrontSide}onAfterRender(lt,dt,vt,St,Et,Ct){Et._hadOwnSide?Et.side=Et._actualSide:delete Et.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let lt=this._derivedMaterial;const dt=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!lt||lt.baseMaterial!==dt)&&(lt=this._derivedMaterial=createTextDerivedMaterial(dt),dt.addEventListener("dispose",function vt(){dt.removeEventListener("dispose",vt),lt.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let vt=lt._outlineMtl;return vt||(vt=lt._outlineMtl=Object.create(lt,{id:{value:lt.id+.1}}),vt.isTextOutlineMaterial=!0,vt.depthWrite=!1,vt.map=null,lt.addEventListener("dispose",function St(){lt.removeEventListener("dispose",St),vt.dispose()})),[vt,lt]}else return lt}set material(lt){lt&&lt.isTroikaTextMaterial?(this._derivedMaterial=lt,this._baseMaterial=lt.baseMaterial):this._baseMaterial=lt}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(lt){this.geometry.detail=lt}get curveRadius(){return this.geometry.curveRadius}set curveRadius(lt){this.geometry.curveRadius=lt}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(lt){const dt=lt.isTextOutlineMaterial,vt=lt.uniforms,St=this.textRenderInfo;if(St){const{sdfTexture:At,blockBounds:Rt}=St;vt.uTroikaSDFTexture.value=At,vt.uTroikaSDFTextureSize.value.set(At.image.width,At.image.height),vt.uTroikaSDFGlyphSize.value=St.sdfGlyphSize,vt.uTroikaSDFExponent.value=St.sdfExponent,vt.uTroikaTotalBounds.value.fromArray(Rt),vt.uTroikaUseGlyphColors.value=!dt&&!!St.glyphColors;let Dt=0,Nt=0,Ft=0,Ut,Wt,Zt,Kt=0,cn=0;if(dt){let{outlineWidth:dn,outlineOffsetX:pn,outlineOffsetY:gn,outlineBlur:vn,outlineOpacity:bn}=this;Dt=this._parsePercent(dn)||0,Nt=Math.max(0,this._parsePercent(vn)||0),Ut=bn,Kt=this._parsePercent(pn)||0,cn=this._parsePercent(gn)||0}else Ft=Math.max(0,this._parsePercent(this.strokeWidth)||0),Ft&&(Zt=this.strokeColor,vt.uTroikaStrokeColor.value.set(Zt??defaultStrokeColor),Wt=this.strokeOpacity,Wt==null&&(Wt=1)),Ut=this.fillOpacity;vt.uTroikaDistanceOffset.value=Dt,vt.uTroikaPositionOffset.value.set(Kt,cn),vt.uTroikaBlurRadius.value=Nt,vt.uTroikaStrokeWidth.value=Ft,vt.uTroikaStrokeOpacity.value=Wt,vt.uTroikaFillOpacity.value=Ut??1,vt.uTroikaCurveRadius.value=this.curveRadius||0;let hn=this.clipRect;if(hn&&Array.isArray(hn)&&hn.length===4)vt.uTroikaClipRect.value.fromArray(hn);else{const dn=(this.fontSize||.1)*100;vt.uTroikaClipRect.value.set(Rt[0]-dn,Rt[1]-dn,Rt[2]+dn,Rt[3]+dn)}this.geometry.applyClipRect(vt.uTroikaClipRect.value)}vt.uTroikaSDFDebug.value=!!this.debugSDF,lt.polygonOffset=!!this.depthOffset,lt.polygonOffsetFactor=lt.polygonOffsetUnits=this.depthOffset||0;const Et=dt?this.outlineColor||0:this.color;if(Et==null)delete lt.color;else{const At=lt.hasOwnProperty("color")?lt.color:lt.color=new Color;(Et!==At._input||typeof Et=="object")&&At.set(At._input=Et)}let Ct=this.orientation||defaultOrient;if(Ct!==lt._orientation){let At=vt.uTroikaOrient.value;Ct=Ct.replace(/[^-+xyz]/g,"");let Rt=Ct!==defaultOrient&&Ct.match(/^([-+])([xyz])([-+])([xyz])$/);if(Rt){let[,Dt,Nt,Ft,Ut]=Rt;tempVec3a.set(0,0,0)[Nt]=Dt==="-"?1:-1,tempVec3b.set(0,0,0)[Ut]=Ft==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),At.setFromMatrix4(tempMat4)}else At.identity();lt._orientation=Ct}}_parsePercent(lt){if(typeof lt=="string"){let dt=lt.match(/^(-?[\d.]+)%$/),vt=dt?parseFloat(dt[1]):NaN;lt=(isNaN(vt)?0:vt/100)*this.fontSize}return lt}localPositionToTextCoords(lt,dt=new Vector2){dt.copy(lt);const vt=this.curveRadius;return vt&&(dt.x=Math.atan2(lt.x,Math.abs(vt)-Math.abs(lt.z))*Math.abs(vt)),dt}worldPositionToTextCoords(lt,dt=new Vector2){return tempVec3a.copy(lt),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),dt)}raycast(lt,dt){const{textRenderInfo:vt,curveRadius:St}=this;if(vt){const Et=vt.blockBounds,Ct=St?getCurvedRaycastMesh():getFlatRaycastMesh(),At=Ct.geometry,{position:Rt,uv:Dt}=At.attributes;for(let Nt=0;Nt<Dt.count;Nt++){let Ft=Et[0]+Dt.getX(Nt)*(Et[2]-Et[0]);const Ut=Et[1]+Dt.getY(Nt)*(Et[3]-Et[1]);let Wt=0;St&&(Wt=St-Math.cos(Ft/St)*St,Ft=Math.sin(Ft/St)*St),Rt.setXYZ(Nt,Ft,Ut,Wt)}At.boundingSphere=this.geometry.boundingSphere,At.boundingBox=this.geometry.boundingBox,Ct.matrixWorld=this.matrixWorld,Ct.material.side=this.material.side,tempArray.length=0,Ct.raycast(lt,tempArray);for(let Nt=0;Nt<tempArray.length;Nt++)tempArray[Nt].object=this,dt.push(tempArray[Nt])}}copy(lt){const dt=this.geometry;return super.copy(lt),this.geometry=dt,COPYABLE_PROPS.forEach(vt=>{this[vt]=lt[vt]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(ft=>{const lt="_private_"+ft;Object.defineProperty(Text$2.prototype,ft,{get(){return this[lt]},set(dt){dt!==this[lt]&&(this[lt]=dt,this._needsSync=!0)}})});const Text$1=reactExports.forwardRef(({anchorX:ft="center",anchorY:lt="middle",font:dt,fontSize:vt=1,children:St,characters:Et,onSync:Ct,...At},Rt)=>{const Dt=useThree(({invalidate:Wt})=>Wt),[Nt]=reactExports.useState(()=>new Text$2),[Ft,Ut]=reactExports.useMemo(()=>{const Wt=[];let Zt="";return reactExports.Children.forEach(St,Kt=>{typeof Kt=="string"||typeof Kt=="number"?Zt+=Kt:Wt.push(Kt)}),[Wt,Zt]},[St]);return suspend(()=>new Promise(Wt=>preloadFont({font:dt,characters:Et},Wt)),["troika-text",dt,Et]),reactExports.useLayoutEffect(()=>void Nt.sync(()=>{Dt(),Ct&&Ct(Nt)})),reactExports.useEffect(()=>()=>Nt.dispose(),[Nt]),reactExports.createElement("primitive",_extends({object:Nt,ref:Rt,font:dt,text:Ut,anchorX:ft,anchorY:lt,fontSize:vt},At),Ft)});function shaderMaterial(ft,lt,dt,vt){const St=class extends ShaderMaterial{constructor(Ct={}){const At=Object.entries(ft);super({uniforms:At.reduce((Rt,[Dt,Nt])=>{const Ft=UniformsUtils.clone({[Dt]:{value:Nt}});return{...Rt,...Ft}},{}),vertexShader:lt,fragmentShader:dt}),this.key="",At.forEach(([Rt])=>Object.defineProperty(this,Rt,{get:()=>this.uniforms[Rt].value,set:Dt=>this.uniforms[Rt].value=Dt})),Object.assign(this,Ct),vt&&vt(this)}};return St.key=MathUtils.generateUUID(),St}let dracoLoader=null;function extensions(ft,lt,dt){return vt=>{dt&&dt(vt),ft&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof ft=="string"?ft:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),vt.setDRACOLoader(dracoLoader)),lt&&vt.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(ft,lt=!0,dt=!0,vt){return useLoader(GLTFLoader,ft,extensions(lt,dt,vt))}useGLTF.preload=(ft,lt=!0,dt=!0,vt)=>useLoader.preload(GLTFLoader,ft,extensions(lt,dt,vt));useGLTF.clear=ft=>useLoader.clear(GLTFLoader,ft);function useFBO(ft,lt,dt){const{gl:vt,size:St,viewport:Et}=useThree(),Ct=typeof ft=="number"?ft:St.width*Et.dpr,At=typeof lt=="number"?lt:St.height*Et.dpr,Rt=(typeof ft=="number"?dt:ft)||{},{samples:Dt=0,depth:Nt,...Ft}=Rt,Ut=reactExports.useMemo(()=>{let Wt;return Wt=new WebGLRenderTarget(Ct,At,{minFilter:LinearFilter,magFilter:LinearFilter,encoding:vt.outputEncoding,type:HalfFloatType,...Ft}),Nt&&(Wt.depthTexture=new DepthTexture(Ct,At,FloatType)),Wt.samples=Dt,Wt},[]);return reactExports.useLayoutEffect(()=>{Ut.setSize(Ct,At),Dt&&(Ut.samples=Dt)},[Dt,Ut,Ct,At]),reactExports.useEffect(()=>()=>Ut.dispose(),[]),Ut}const isFunction=ft=>typeof ft=="function",OrthographicCamera=reactExports.forwardRef(({envMap:ft,resolution:lt=256,frames:dt=1/0,children:vt,makeDefault:St,...Et},Ct)=>{const At=useThree(({set:cn})=>cn),Rt=useThree(({camera:cn})=>cn),Dt=useThree(({size:cn})=>cn),Nt=reactExports.useRef(null),Ft=reactExports.useRef(null),Ut=useFBO(lt);reactExports.useLayoutEffect(()=>{Et.manual||Nt.current.updateProjectionMatrix()},[Dt,Et]),reactExports.useLayoutEffect(()=>{Nt.current.updateProjectionMatrix()}),reactExports.useLayoutEffect(()=>{if(St){const cn=Rt;return At(()=>({camera:Nt.current})),()=>At(()=>({camera:cn}))}},[Nt,St,At]);let Wt=0,Zt=null;const Kt=isFunction(vt);return useFrame(cn=>{Kt&&(dt===1/0||Wt<dt)&&(Ft.current.visible=!1,cn.gl.setRenderTarget(Ut),Zt=cn.scene.background,ft&&(cn.scene.background=ft),cn.gl.render(cn.scene,Nt.current),cn.scene.background=Zt,cn.gl.setRenderTarget(null),Ft.current.visible=!0,Wt++)}),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("orthographicCamera",_extends({left:Dt.width/-2,right:Dt.width/2,top:Dt.height/2,bottom:Dt.height/-2,ref:mergeRefs([Nt,Ct])},Et),!Kt&&vt),reactExports.createElement("group",{ref:Ft},Kt&&vt(Ut.texture)))}),OrbitControls=reactExports.forwardRef(({makeDefault:ft,camera:lt,regress:dt,domElement:vt,enableDamping:St=!0,onChange:Et,onStart:Ct,onEnd:At,...Rt},Dt)=>{const Nt=useThree(vn=>vn.invalidate),Ft=useThree(vn=>vn.camera),Ut=useThree(vn=>vn.gl),Wt=useThree(vn=>vn.events),Zt=useThree(vn=>vn.setEvents),Kt=useThree(vn=>vn.set),cn=useThree(vn=>vn.get),hn=useThree(vn=>vn.performance),dn=lt||Ft,pn=vt||Wt.connected||Ut.domElement,gn=reactExports.useMemo(()=>new OrbitControls$1(dn),[dn]);return useFrame(()=>{gn.enabled&&gn.update()},-1),reactExports.useEffect(()=>(gn.connect(pn),()=>void gn.dispose()),[pn,dt,gn,Nt]),reactExports.useEffect(()=>{const vn=Tn=>{Nt(),dt&&hn.regress(),Et&&Et(Tn)},bn=Tn=>{Ct&&Ct(Tn)},$n=Tn=>{At&&At(Tn)};return gn.addEventListener("change",vn),gn.addEventListener("start",bn),gn.addEventListener("end",$n),()=>{gn.removeEventListener("start",bn),gn.removeEventListener("end",$n),gn.removeEventListener("change",vn)}},[Et,Ct,At,gn,Nt,Zt]),reactExports.useEffect(()=>{if(ft){const vn=cn().controls;return Kt({controls:gn}),()=>Kt({controls:vn})}},[ft,gn]),reactExports.createElement("primitive",_extends({ref:Dt,object:gn,enableDamping:St},Rt))});function RenderHud({defaultScene:ft,defaultCamera:lt,renderPriority:dt=1}){const{gl:vt,scene:St,camera:Et}=useThree();let Ct;return useFrame(()=>{Ct=vt.autoClear,dt===1&&(vt.autoClear=!0,vt.render(ft,lt)),vt.autoClear=!1,vt.clearDepth(),vt.render(St,Et),vt.autoClear=Ct},dt),reactExports.createElement(reactExports.Fragment,null)}function Hud({children:ft,renderPriority:lt=1}){const{scene:dt,camera:vt}=useThree(),[St]=reactExports.useState(()=>new Scene);return reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,ft,reactExports.createElement(RenderHud,{defaultScene:dt,defaultCamera:vt,renderPriority:lt})),St,{events:{priority:lt+1}}))}const Context=reactExports.createContext({}),useGizmoContext=()=>reactExports.useContext(Context),turnRate=2*Math.PI,dummy=new Object3D,matrix=new Matrix4,[q1,q2]=[new Quaternion,new Quaternion],target=new Vector3,targetPosition=new Vector3,isOrbitControls=ft=>"minPolarAngle"in ft,GizmoHelper=({alignment:ft="bottom-right",margin:lt=[80,80],renderPriority:dt=1,onUpdate:vt,onTarget:St,children:Et})=>{const Ct=useThree(bn=>bn.size),At=useThree(bn=>bn.camera),Rt=useThree(bn=>bn.controls),Dt=useThree(bn=>bn.invalidate),Nt=reactExports.useRef(),Ft=reactExports.useRef(null),Ut=reactExports.useRef(!1),Wt=reactExports.useRef(0),Zt=reactExports.useRef(new Vector3(0,0,0)),Kt=reactExports.useRef(new Vector3(0,0,0));reactExports.useEffect(()=>{Kt.current.copy(At.up)},[At]);const cn=reactExports.useCallback(bn=>{Ut.current=!0,(Rt||St)&&(Zt.current=(Rt==null?void 0:Rt.target)||(St==null?void 0:St())),Wt.current=At.position.distanceTo(target),q1.copy(At.quaternion),targetPosition.copy(bn).multiplyScalar(Wt.current).add(target),dummy.lookAt(targetPosition),q2.copy(dummy.quaternion),Dt()},[Rt,At,St,Dt]);useFrame((bn,$n)=>{if(Ft.current&&Nt.current){var Tn;if(Ut.current)if(q1.angleTo(q2)<.01)Ut.current=!1,isOrbitControls(Rt)&&At.up.copy(Kt.current);else{const In=$n*turnRate;q1.rotateTowards(q2,In),At.position.set(0,0,1).applyQuaternion(q1).multiplyScalar(Wt.current).add(Zt.current),At.up.set(0,1,0).applyQuaternion(q1).normalize(),At.quaternion.copy(q1),vt?vt():Rt&&Rt.update(),Dt()}matrix.copy(At.matrix).invert(),(Tn=Nt.current)==null||Tn.quaternion.setFromRotationMatrix(matrix)}});const hn=reactExports.useMemo(()=>({tweenCamera:cn}),[cn]),[dn,pn]=lt,gn=ft.endsWith("-center")?0:ft.endsWith("-left")?-Ct.width/2+dn:Ct.width/2-dn,vn=ft.startsWith("center-")?0:ft.startsWith("top-")?Ct.height/2-pn:-Ct.height/2+pn;return reactExports.createElement(Hud,{renderPriority:dt},reactExports.createElement(Context.Provider,{value:hn},reactExports.createElement(OrthographicCamera,{makeDefault:!0,ref:Ft,position:[0,0,200]}),reactExports.createElement("group",{ref:Nt,position:[gn,vn,0]},Et)))};function Axis({scale:ft=[.8,.05,.05],color:lt,rotation:dt}){return reactExports.createElement("group",{rotation:dt},reactExports.createElement("mesh",{position:[.4,0,0]},reactExports.createElement("boxGeometry",{args:ft}),reactExports.createElement("meshBasicMaterial",{color:lt,toneMapped:!1})))}function AxisHead({onClick:ft,font:lt,disabled:dt,arcStyle:vt,label:St,labelColor:Et,axisHeadScale:Ct=1,...At}){const Rt=useThree(Kt=>Kt.gl),Dt=reactExports.useMemo(()=>{const Kt=document.createElement("canvas");Kt.width=64,Kt.height=64;const cn=Kt.getContext("2d");return cn.beginPath(),cn.arc(32,32,16,0,2*Math.PI),cn.closePath(),cn.fillStyle=vt,cn.fill(),St&&(cn.font=lt,cn.textAlign="center",cn.fillStyle=Et,cn.fillText(St,32,41)),new CanvasTexture(Kt)},[vt,St,Et,lt]),[Nt,Ft]=reactExports.useState(!1),Ut=(St?1:.75)*(Nt?1.2:1)*Ct,Wt=Kt=>{Kt.stopPropagation(),Ft(!0)},Zt=Kt=>{Kt.stopPropagation(),Ft(!1)};return reactExports.createElement("sprite",_extends({scale:Ut,onPointerOver:dt?void 0:Wt,onPointerOut:dt?void 0:ft||Zt},At),reactExports.createElement("spriteMaterial",{map:Dt,"map-encoding":Rt.outputEncoding,"map-anisotropy":Rt.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:St?1:.75,toneMapped:!1}))}const GizmoViewport=({hideNegativeAxes:ft,hideAxisHeads:lt,disabled:dt,font:vt="18px Inter var, Arial, sans-serif",axisColors:St=["#ff2060","#20df80","#2080ff"],axisHeadScale:Et=1,axisScale:Ct,labels:At=["X","Y","Z"],labelColor:Rt="#000",onClick:Dt,...Nt})=>{const[Ft,Ut,Wt]=St,{tweenCamera:Zt}=useGizmoContext(),Kt={font:vt,disabled:dt,labelColor:Rt,onClick:Dt,axisHeadScale:Et,onPointerDown:dt?void 0:cn=>{Zt(cn.object.position),cn.stopPropagation()}};return reactExports.createElement("group",_extends({scale:40},Nt),reactExports.createElement(Axis,{color:Ft,rotation:[0,0,0],scale:Ct}),reactExports.createElement(Axis,{color:Ut,rotation:[0,0,Math.PI/2],scale:Ct}),reactExports.createElement(Axis,{color:Wt,rotation:[0,-Math.PI/2,0],scale:Ct}),!lt&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Ft,position:[1,0,0],label:At[0]},Kt)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,1,0],label:At[1]},Kt)),reactExports.createElement(AxisHead,_extends({arcStyle:Wt,position:[0,0,1],label:At[2]},Kt)),!ft&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Ft,position:[-1,0,0]},Kt)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,-1,0]},Kt)),reactExports.createElement(AxisHead,_extends({arcStyle:Wt,position:[0,0,-1]},Kt)))),reactExports.createElement("ambientLight",{intensity:.5}),reactExports.createElement("pointLight",{position:[10,10,10],intensity:.5}))},GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:0,followCamera:0},`varying vec3 worldPosition;
   uniform float fadeDistance;
   uniform float infiniteGrid;
   uniform float followCamera;
   void main() {
     vec3 pos = position.xzy * (1. + fadeDistance * infiniteGrid);
     pos.xz += (cameraPosition.xz * followCamera);
     worldPosition = pos;
     gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
   }`,`varying vec3 worldPosition;
   uniform float cellSize;
   uniform float sectionSize;
   uniform vec3 cellColor;
   uniform vec3 sectionColor;
   uniform float fadeDistance;
   uniform float fadeStrength;
   uniform float cellThickness;
   uniform float sectionThickness;
   uniform float infiniteGrid;
   float getGrid(float size, float thickness) {
     vec2 r = worldPosition.xz / size;
     vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
     float line = min(grid.x, grid.y) + 1. - thickness;
     return 1.0 - min(line, 1.);
   }
   void main() {
     float g1 = getGrid(cellSize, cellThickness);
     float g2 = getGrid(sectionSize, sectionThickness);
     float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
     vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));
     gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
     gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
     if (gl_FragColor.a <= 0.0) discard;
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),Grid=reactExports.forwardRef(({args:ft,cellColor:lt="#000000",sectionColor:dt="#2080ff",cellSize:vt=.5,sectionSize:St=1,followCamera:Et=!1,infiniteGrid:Ct=!1,fadeDistance:At=100,fadeStrength:Rt=1,cellThickness:Dt=.5,sectionThickness:Nt=1,side:Ft=BackSide,...Ut},Wt)=>{extend$1({GridMaterial});const Zt={cellSize:vt,sectionSize:St,cellColor:lt,sectionColor:dt,cellThickness:Dt,sectionThickness:Nt},Kt={fadeDistance:At,fadeStrength:Rt,infiniteGrid:Ct,followCamera:Et};return reactExports.createElement("mesh",_extends({ref:Wt,frustumCulled:!1},Ut),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:Ft},Zt,Kt)),reactExports.createElement("planeGeometry",{args:ft}))});function useAnimations(ft,lt){const dt=reactExports.useRef(),[vt]=reactExports.useState(()=>lt?lt instanceof Object3D?{current:lt}:lt:dt),[St]=reactExports.useState(()=>new AnimationMixer(void 0)),Et=reactExports.useRef({}),[Ct]=reactExports.useState(()=>{const At={};return ft.forEach(Rt=>Object.defineProperty(At,Rt.name,{enumerable:!0,get(){if(vt.current)return Et.current[Rt.name]||(Et.current[Rt.name]=St.clipAction(Rt,vt.current))}})),{ref:vt,clips:ft,actions:At,names:ft.map(Rt=>Rt.name),mixer:St}});return useFrame((At,Rt)=>St.update(Rt)),reactExports.useEffect(()=>{const At=vt.current;return()=>{Et.current={},Object.values(Ct.actions).forEach(Rt=>{At&&St.uncacheAction(Rt,At)})}},[ft]),reactExports.useEffect(()=>()=>{St.stopAllAction()},[St]),Ct}function create(ft){const lt=ft+"Geometry";return reactExports.forwardRef(({args:dt,children:vt,...St},Et)=>reactExports.createElement("mesh",_extends({ref:Et},St),reactExports.createElement(lt,{attach:"geometry",args:dt}),vt))}const Box=create("box"),Sphere=create("sphere"),Plane=create("plane");function calcPosFromAngles(ft,lt,dt=new Vector3){const vt=Math.PI*(ft-.5),St=2*Math.PI*(lt-.5);return dt.x=Math.cos(St),dt.y=Math.sin(vt),dt.z=Math.sin(St),dt}const Sky=reactExports.forwardRef(({inclination:ft=.6,azimuth:lt=.1,distance:dt=1e3,mieCoefficient:vt=.005,mieDirectionalG:St=.8,rayleigh:Et=.5,turbidity:Ct=10,sunPosition:At=calcPosFromAngles(ft,lt),...Rt},Dt)=>{const Nt=reactExports.useMemo(()=>new Vector3().setScalar(dt),[dt]),[Ft]=reactExports.useState(()=>new Sky$1);return reactExports.createElement("primitive",_extends({object:Ft,ref:Dt,"material-uniforms-mieCoefficient-value":vt,"material-uniforms-mieDirectionalG-value":St,"material-uniforms-rayleigh-value":Et,"material-uniforms-sunPosition-value":At,"material-uniforms-turbidity-value":Ct,scale:Nt},Rt))});function Crazyflie({robotId:ft,renderBoundingBox:lt}){const dt=useSimulator(gn=>gn.updateRobotBoundingBox),vt=useSimulator(gn=>gn.checkCollisions),St=useRobartState(gn=>gn.robots[ft]),Et=useSimulator(gn=>gn.robots[ft]),Ct=Et==null?void 0:Et.boundingBox,At=Ct==null?void 0:Ct.getSize(new Vector3),[Rt,Dt]=reactExports.useState(!1),{camera:Nt}=useThree(),Ft=reactExports.useRef(null),{nodes:Ut,materials:Wt,animations:Zt}=useGLTF("./crazyflie.glb"),{actions:Kt}=useAnimations(Zt,Ft),[cn,hn]=reactExports.useState(!0),[dn,pn]=reactExports.useState(!0);return reactExports.useEffect(()=>{Object.values(Kt).map(gn=>gn==null?void 0:gn.play()),hn(!1)},[]),reactExports.useEffect(()=>{if(!Ft.current){pn(!1);return}if(lt){const gn=new Box3;gn.setFromObject(Ft.current),dt(ft,gn)}pn(!1)},[Ft.current]),cn||dn?jsx(Text$1,{fontSize:1,children:"Loading..."}):jsxs(Fragment,{children:[Rt?jsx(Text$1,{quaternion:Nt.quaternion.clone(),position:[0,0,1],fontSize:.25,children:`${St.name}, Position: (${Et.pos.x.toFixed(1)}, ${Et.pos.y.toFixed(1)}, ${Et.pos.z.toFixed(1)})`}):null,jsx("group",{children:jsxs("group",{ref:Ft,children:[jsx("group",{scale:.3,rotation:[Math.PI/2,-Math.PI/2,0],children:jsxs("mesh",{name:"pcb_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut.pcb_Default_sldprt.geometry,material:Wt["Material.003"],position:[.01,0,0],scale:.01,children:[jsx("mesh",{name:"propeller_ccw_Default_sldprt001",castShadow:!0,receiveShadow:!0,geometry:Ut.propeller_ccw_Default_sldprt001.geometry,material:Wt["Material.004"],position:[33.94,15.2,33.85],rotation:[1.56,-.01,.79]}),jsx("mesh",{name:"propeller_ccw_Default_sldprt002",castShadow:!0,receiveShadow:!0,geometry:Ut.propeller_ccw_Default_sldprt002.geometry,material:Wt["Material.001"],position:[33.94,15.2,-33.85],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt003",castShadow:!0,receiveShadow:!0,geometry:Ut.propeller_ccw_Default_sldprt003.geometry,material:Wt["Material.004"],position:[-33.83,15.2,33.32],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt004",castShadow:!0,receiveShadow:!0,geometry:Ut.propeller_ccw_Default_sldprt004.geometry,material:Wt["Material.004"],position:[-33.94,15.2,-33.85],rotation:[1.57,0,Math.PI/4]}),jsx("mesh",{name:"7mm_motor_mount_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut["7mm_motor_mount_Default_sldprt"].geometry,material:Wt.Material,position:[-33.72,3.79,-33.71],rotation:[1.56,0,0]}),jsx("mesh",{name:"7x15_motor_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut["7x15_motor_Default_sldprt"].geometry,material:Wt["Material.002"],position:[-33.85,-4.25,-33.74],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_bc-bl-01-a_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut["battery_bc-bl-01-a_Default_sldprt"].geometry,material:Wt["Material.006"],position:[-11.27,2.54,8.16],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_holder_board_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut.battery_holder_board_Default_sldprt.geometry,material:Wt["Material.003"],position:[-10.37,9.9,13.13],rotation:[Math.PI/2,0,0],scale:[1,.97,1]}),jsx("mesh",{name:"header_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:Ut.header_Default_sldprt.geometry,material:Wt["Material.005"],position:[-9.32,4.28,-8.95],rotation:[1.56,0,-Math.PI],scale:-1})]})}),jsxs(Sphere,{position:[0,0,-.05],scale:.033,castShadow:!1,receiveShadow:!1,children:[jsx("meshStandardMaterial",{emissive:Et?[Et.color.r/255,Et.color.g/255,Et.color.b/255]:[1,1,1]}),jsx("pointLight",{position:[0,0,0],intensity:.5})]})]})}),lt&&At?jsx(Box,{onPointerOver:()=>{Dt(!0)},onPointerLeave:()=>{Dt(!1)},args:[At.x,At.y,At.z],material:new MeshBasicMaterial({color:vt(ft)?16711680:65280,wireframe:!0}),position:new Vector3(0,0,0)},ft):null]})}useGLTF.preload("./crazyflie.glb");var f$2=l$2(),n=ft=>c$2(ft,f$2),m$1=l$2();n.write=ft=>c$2(ft,m$1);var d$2=l$2();n.onStart=ft=>c$2(ft,d$2);var h$2=l$2();n.onFrame=ft=>c$2(ft,h$2);var p$1=l$2();n.onFinish=ft=>c$2(ft,p$1);var i$1=[];n.setTimeout=(ft,lt)=>{let dt=n.now()+lt,vt=()=>{let Et=i$1.findIndex(Ct=>Ct.cancel==vt);~Et&&i$1.splice(Et,1),u$2-=~Et?1:0},St={time:dt,handler:ft,cancel:vt};return i$1.splice(w(dt),0,St),u$2+=1,v$1(),St};var w=ft=>~(~i$1.findIndex(lt=>lt.time>ft)||~i$1.length);n.cancel=ft=>{d$2.delete(ft),h$2.delete(ft),p$1.delete(ft),f$2.delete(ft),m$1.delete(ft)};n.sync=ft=>{T=!0,n.batchedUpdates(ft),T=!1};n.throttle=ft=>{let lt;function dt(){try{ft(...lt)}finally{lt=null}}function vt(...St){lt=St,n.onStart(dt)}return vt.handler=ft,vt.cancel=()=>{d$2.delete(dt),lt=null},vt};var y$2=typeof window<"u"?window.requestAnimationFrame:()=>{};n.use=ft=>y$2=ft;n.now=typeof performance<"u"?()=>performance.now():Date.now;n.batchedUpdates=ft=>ft();n.catch=console.error;n.frameLoop="always";n.advance=()=>{n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):x$1()};var r=-1,u$2=0,T=!1;function c$2(ft,lt){T?(lt.delete(ft),ft(0)):(lt.add(ft),v$1())}function v$1(){r<0&&(r=0,n.frameLoop!=="demand"&&y$2(b$2))}function R(){r=-1}function b$2(){~r&&(y$2(b$2),n.batchedUpdates(x$1))}function x$1(){let ft=r;r=n.now();let lt=w(r);if(lt&&(Q$2(i$1.splice(0,lt),dt=>dt.handler()),u$2-=lt),!u$2){R();return}d$2.flush(),f$2.flush(ft?Math.min(64,r-ft):16.667),h$2.flush(),m$1.flush(),p$1.flush()}function l$2(){let ft=new Set,lt=ft;return{add(dt){u$2+=lt==ft&&!ft.has(dt)?1:0,ft.add(dt)},delete(dt){return u$2-=lt==ft&&ft.has(dt)?1:0,ft.delete(dt)},flush(dt){lt.size&&(ft=new Set,u$2-=lt.size,Q$2(lt,vt=>vt(dt)&&ft.add(vt)),u$2+=ft.size,lt=ft)}}}function Q$2(ft,lt){ft.forEach(dt=>{try{lt(dt)}catch(vt){n.catch(vt)}})}var ze$1=Object.defineProperty,Le$2=(ft,lt)=>{for(var dt in lt)ze$1(ft,dt,{get:lt[dt],enumerable:!0})},p={};Le$2(p,{assign:()=>U,colors:()=>c$1,createStringInterpolator:()=>k$1,skipAnimation:()=>ee,to:()=>J$1,willAdvance:()=>S});function Y(){}var mt$1=(ft,lt,dt)=>Object.defineProperty(ft,lt,{value:dt,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:ft=>!!ft&&ft.constructor.name==="Object",fun:ft=>typeof ft=="function",str:ft=>typeof ft=="string",num:ft=>typeof ft=="number",und:ft=>ft===void 0};function bt$1(ft,lt){if(l$1.arr(ft)){if(!l$1.arr(lt)||ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}return ft===lt}var Ve=(ft,lt)=>ft.forEach(lt);function xt(ft,lt,dt){if(l$1.arr(ft)){for(let vt=0;vt<ft.length;vt++)lt.call(dt,ft[vt],`${vt}`);return}for(let vt in ft)ft.hasOwnProperty(vt)&&lt.call(dt,ft[vt],vt)}var ht$1=ft=>l$1.und(ft)?[]:l$1.arr(ft)?ft:[ft];function Pe$1(ft,lt){if(ft.size){let dt=Array.from(ft);ft.clear(),Ve(dt,lt)}}var yt$1=(ft,...lt)=>Pe$1(ft,dt=>dt(...lt)),h$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k$1,J$1,c$1=null,ee=!1,S=Y,U=ft=>{ft.to&&(J$1=ft.to),ft.now&&(n.now=ft.now),ft.colors!==void 0&&(c$1=ft.colors),ft.skipAnimation!=null&&(ee=ft.skipAnimation),ft.createStringInterpolator&&(k$1=ft.createStringInterpolator),ft.requestAnimationFrame&&n.use(ft.requestAnimationFrame),ft.batchedUpdates&&(n.batchedUpdates=ft.batchedUpdates),ft.willAdvance&&(S=ft.willAdvance),ft.frameLoop&&(n.frameLoop=ft.frameLoop)},E$2=new Set,u$1=[],H$1=[],A=0,qe$1={get idle(){return!E$2.size&&!u$1.length},start(ft){A>ft.priority?(E$2.add(ft),n.onStart($e)):(te$1(ft),n(B))},advance:B,sort(ft){if(A)n.onFrame(()=>qe$1.sort(ft));else{let lt=u$1.indexOf(ft);~lt&&(u$1.splice(lt,1),re(ft))}},clear(){u$1=[],E$2.clear()}};function $e(){E$2.forEach(te$1),E$2.clear(),n(B)}function te$1(ft){u$1.includes(ft)||re(ft)}function re(ft){u$1.splice(Ge$1(u$1,lt=>lt.priority>ft.priority),0,ft)}function B(ft){let lt=H$1;for(let dt=0;dt<u$1.length;dt++){let vt=u$1[dt];A=vt.priority,vt.idle||(S(vt),vt.advance(ft),vt.idle||lt.push(vt))}return A=0,H$1=u$1,H$1.length=0,u$1=lt,u$1.length>0}function Ge$1(ft,lt){let dt=ft.findIndex(lt);return dt<0?ft.length:dt}var ne$2=(ft,lt,dt)=>Math.min(Math.max(dt,ft),lt),It={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},d$1="[-+]?\\d*\\.?\\d+",M=d$1+"%";function C$1(...ft){return"\\(\\s*("+ft.join(")\\s*,\\s*(")+")\\s*\\)"}var oe$1=new RegExp("rgb"+C$1(d$1,d$1,d$1)),fe$1=new RegExp("rgba"+C$1(d$1,d$1,d$1,d$1)),ae$1=new RegExp("hsl"+C$1(d$1,M,M)),ie$2=new RegExp("hsla"+C$1(d$1,M,M,d$1)),se$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ue$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,le$1=/^#([0-9a-fA-F]{6})$/,ce=/^#([0-9a-fA-F]{8})$/;function be$1(ft){let lt;return typeof ft=="number"?ft>>>0===ft&&ft>=0&&ft<=4294967295?ft:null:(lt=le$1.exec(ft))?parseInt(lt[1]+"ff",16)>>>0:c$1&&c$1[ft]!==void 0?c$1[ft]:(lt=oe$1.exec(ft))?(y$1(lt[1])<<24|y$1(lt[2])<<16|y$1(lt[3])<<8|255)>>>0:(lt=fe$1.exec(ft))?(y$1(lt[1])<<24|y$1(lt[2])<<16|y$1(lt[3])<<8|me$1(lt[4]))>>>0:(lt=se$1.exec(ft))?parseInt(lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]+"ff",16)>>>0:(lt=ce.exec(ft))?parseInt(lt[1],16)>>>0:(lt=ue$1.exec(ft))?parseInt(lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]+lt[4]+lt[4],16)>>>0:(lt=ae$1.exec(ft))?(de$1(pe(lt[1]),z$1(lt[2]),z$1(lt[3]))|255)>>>0:(lt=ie$2.exec(ft))?(de$1(pe(lt[1]),z$1(lt[2]),z$1(lt[3]))|me$1(lt[4]))>>>0:null}function j$1(ft,lt,dt){return dt<0&&(dt+=1),dt>1&&(dt-=1),dt<1/6?ft+(lt-ft)*6*dt:dt<1/2?lt:dt<2/3?ft+(lt-ft)*(2/3-dt)*6:ft}function de$1(ft,lt,dt){let vt=dt<.5?dt*(1+lt):dt+lt-dt*lt,St=2*dt-vt,Et=j$1(St,vt,ft+1/3),Ct=j$1(St,vt,ft),At=j$1(St,vt,ft-1/3);return Math.round(Et*255)<<24|Math.round(Ct*255)<<16|Math.round(At*255)<<8}function y$1(ft){let lt=parseInt(ft,10);return lt<0?0:lt>255?255:lt}function pe(ft){return(parseFloat(ft)%360+360)%360/360}function me$1(ft){let lt=parseFloat(ft);return lt<0?0:lt>1?255:Math.round(lt*255)}function z$1(ft){let lt=parseFloat(ft);return lt<0?0:lt>100?1:lt/100}function D$1(ft){let lt=be$1(ft);if(lt===null)return ft;lt=lt||0;let dt=(lt&4278190080)>>>24,vt=(lt&16711680)>>>16,St=(lt&65280)>>>8,Et=(lt&255)/255;return`rgba(${dt}, ${vt}, ${St}, ${Et})`}var W$1=(ft,lt,dt)=>{if(l$1.fun(ft))return ft;if(l$1.arr(ft))return W$1({range:ft,output:lt,extrapolate:dt});if(l$1.str(ft.output[0]))return k$1(ft);let vt=ft,St=vt.output,Et=vt.range||[0,1],Ct=vt.extrapolateLeft||vt.extrapolate||"extend",At=vt.extrapolateRight||vt.extrapolate||"extend",Rt=vt.easing||(Dt=>Dt);return Dt=>{let Nt=He$1(Dt,Et);return Ue$1(Dt,Et[Nt],Et[Nt+1],St[Nt],St[Nt+1],Rt,Ct,At,vt.map)}};function Ue$1(ft,lt,dt,vt,St,Et,Ct,At,Rt){let Dt=Rt?Rt(ft):ft;if(Dt<lt){if(Ct==="identity")return Dt;Ct==="clamp"&&(Dt=lt)}if(Dt>dt){if(At==="identity")return Dt;At==="clamp"&&(Dt=dt)}return vt===St?vt:lt===dt?ft<=lt?vt:St:(lt===-1/0?Dt=-Dt:dt===1/0?Dt=Dt-lt:Dt=(Dt-lt)/(dt-lt),Dt=Et(Dt),vt===-1/0?Dt=-Dt:St===1/0?Dt=Dt+vt:Dt=Dt*(St-vt)+vt,Dt)}function He$1(ft,lt){for(var dt=1;dt<lt.length-1&&!(lt[dt]>=ft);++dt);return dt-1}var Be=(ft,lt="end")=>dt=>{dt=lt==="end"?Math.min(dt,.999):Math.max(dt,.001);let vt=dt*ft,St=lt==="end"?Math.floor(vt):Math.ceil(vt);return ne$2(0,1,St/ft)},P=1.70158,L=P*1.525,xe$1=P+1,he$1=2*Math.PI/3,ye$1=2*Math.PI/4.5,V=ft=>ft<1/2.75?7.5625*ft*ft:ft<2/2.75?7.5625*(ft-=1.5/2.75)*ft+.75:ft<2.5/2.75?7.5625*(ft-=2.25/2.75)*ft+.9375:7.5625*(ft-=2.625/2.75)*ft+.984375,Lt$1={linear:ft=>ft,easeInQuad:ft=>ft*ft,easeOutQuad:ft=>1-(1-ft)*(1-ft),easeInOutQuad:ft=>ft<.5?2*ft*ft:1-Math.pow(-2*ft+2,2)/2,easeInCubic:ft=>ft*ft*ft,easeOutCubic:ft=>1-Math.pow(1-ft,3),easeInOutCubic:ft=>ft<.5?4*ft*ft*ft:1-Math.pow(-2*ft+2,3)/2,easeInQuart:ft=>ft*ft*ft*ft,easeOutQuart:ft=>1-Math.pow(1-ft,4),easeInOutQuart:ft=>ft<.5?8*ft*ft*ft*ft:1-Math.pow(-2*ft+2,4)/2,easeInQuint:ft=>ft*ft*ft*ft*ft,easeOutQuint:ft=>1-Math.pow(1-ft,5),easeInOutQuint:ft=>ft<.5?16*ft*ft*ft*ft*ft:1-Math.pow(-2*ft+2,5)/2,easeInSine:ft=>1-Math.cos(ft*Math.PI/2),easeOutSine:ft=>Math.sin(ft*Math.PI/2),easeInOutSine:ft=>-(Math.cos(Math.PI*ft)-1)/2,easeInExpo:ft=>ft===0?0:Math.pow(2,10*ft-10),easeOutExpo:ft=>ft===1?1:1-Math.pow(2,-10*ft),easeInOutExpo:ft=>ft===0?0:ft===1?1:ft<.5?Math.pow(2,20*ft-10)/2:(2-Math.pow(2,-20*ft+10))/2,easeInCirc:ft=>1-Math.sqrt(1-Math.pow(ft,2)),easeOutCirc:ft=>Math.sqrt(1-Math.pow(ft-1,2)),easeInOutCirc:ft=>ft<.5?(1-Math.sqrt(1-Math.pow(2*ft,2)))/2:(Math.sqrt(1-Math.pow(-2*ft+2,2))+1)/2,easeInBack:ft=>xe$1*ft*ft*ft-P*ft*ft,easeOutBack:ft=>1+xe$1*Math.pow(ft-1,3)+P*Math.pow(ft-1,2),easeInOutBack:ft=>ft<.5?Math.pow(2*ft,2)*((L+1)*2*ft-L)/2:(Math.pow(2*ft-2,2)*((L+1)*(ft*2-2)+L)+2)/2,easeInElastic:ft=>ft===0?0:ft===1?1:-Math.pow(2,10*ft-10)*Math.sin((ft*10-10.75)*he$1),easeOutElastic:ft=>ft===0?0:ft===1?1:Math.pow(2,-10*ft)*Math.sin((ft*10-.75)*he$1)+1,easeInOutElastic:ft=>ft===0?0:ft===1?1:ft<.5?-(Math.pow(2,20*ft-10)*Math.sin((20*ft-11.125)*ye$1))/2:Math.pow(2,-20*ft+10)*Math.sin((20*ft-11.125)*ye$1)/2+1,easeInBounce:ft=>1-V(1-ft),easeOutBounce:V,easeInOutBounce:ft=>ft<.5?(1-V(1-2*ft))/2:(1+V(2*ft-1))/2,steps:Be},g=Symbol.for("FluidValue.get"),m=Symbol.for("FluidValue.observers"),Pt=ft=>!!(ft&&ft[g]),ve=ft=>ft&&ft[g]?ft[g]():ft,qt=ft=>ft[m]||null;function je(ft,lt){ft.eventObserved?ft.eventObserved(lt):ft(lt)}function $t(ft,lt){let dt=ft[m];dt&&dt.forEach(vt=>{je(vt,lt)})}var U$,V$,HE,ge=(HE=class{constructor(ft){go(this,U$);go(this,V$);if(!ft&&!(ft=this.get))throw Error("Unknown getter");De$1(this,ft)}},U$=g,V$=m,HE),De$1=(ft,lt)=>Ee$1(ft,g,lt);function Gt(ft,lt){if(ft[g]){let dt=ft[m];dt||Ee$1(ft,m,dt=new Set),dt.has(lt)||(dt.add(lt),ft.observerAdded&&ft.observerAdded(dt.size,lt))}return lt}function Qt(ft,lt){let dt=ft[m];if(dt&&dt.has(lt)){let vt=dt.size-1;vt?dt.delete(lt):ft[m]=null,ft.observerRemoved&&ft.observerRemoved(vt,lt)}}var Ee$1=(ft,lt,dt)=>Object.defineProperty(ft,lt,{value:dt,writable:!0,configurable:!0}),O=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K=new RegExp(`(${O.source})(%|[a-z]+)`,"i"),we$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,b$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,N=ft=>{let[lt,dt]=We(ft);if(!lt||h$1())return ft;let vt=window.getComputedStyle(document.documentElement).getPropertyValue(lt);return vt?vt.trim():dt&&dt.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(dt)||ft:dt&&b$1.test(dt)?N(dt):dt||ft},We=ft=>{let lt=b$1.exec(ft);if(!lt)return[,];let[,dt,vt]=lt;return[dt,vt]},_,Ke$1=(ft,lt,dt,vt,St)=>`rgba(${Math.round(lt)}, ${Math.round(dt)}, ${Math.round(vt)}, ${St})`,Xt=ft=>{_||(_=c$1?new RegExp(`(${Object.keys(c$1).join("|")})(?!\\w)`,"g"):/^\b$/);let lt=ft.output.map(St=>ve(St).replace(b$1,N).replace(Oe,D$1).replace(_,D$1)),dt=lt.map(St=>St.match(O).map(Number)),vt=dt[0].map((St,Et)=>dt.map(Ct=>{if(!(Et in Ct))throw Error('The arity of each "output" value must be equal');return Ct[Et]})).map(St=>W$1({...ft,output:St}));return St=>{var At;let Et=!K.test(lt[0])&&((At=lt.find(Rt=>K.test(Rt)))==null?void 0:At.replace(O,"")),Ct=0;return lt[0].replace(O,()=>`${vt[Ct++](St)}${Et||""}`).replace(we$1,Ke$1)}},Z="react-spring: ",Te=ft=>{let lt=ft,dt=!1;if(typeof lt!="function")throw new TypeError(`${Z}once requires a function parameter`);return(...vt)=>{dt||(lt(...vt),dt=!0)}},Ne$1=Te(console.warn);function Jt(){Ne$1(`${Z}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var _e$1=Te(console.warn);function er(){_e$1(`${Z}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function or(ft){return l$1.str(ft)&&(ft[0]=="#"||/\d/.test(ft)||!h$1()&&b$1.test(ft)||ft in(c$1||{}))}var Q$1=h$1()?reactExports.useEffect:reactExports.useLayoutEffect,Ce$1=()=>{let ft=reactExports.useRef(!1);return Q$1(()=>(ft.current=!0,()=>{ft.current=!1}),[]),ft};function Mr(){let ft=reactExports.useState()[1],lt=Ce$1();return()=>{lt.current&&ft(Math.random())}}function Lr(ft,lt){let[dt]=reactExports.useState(()=>({inputs:lt,result:ft()})),vt=reactExports.useRef(),St=vt.current,Et=St;return Et?lt&&Et.inputs&&it$1(lt,Et.inputs)||(Et={inputs:lt,result:ft()}):Et=dt,reactExports.useEffect(()=>{vt.current=Et,St==dt&&(dt.inputs=dt.result=void 0)},[Et]),Et.result}function it$1(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}var $r=ft=>reactExports.useEffect(ft,ut),ut=[];function Ur(ft){let lt=reactExports.useRef();return reactExports.useEffect(()=>{lt.current=ft}),lt.current}var h=Symbol.for("Animated:node"),v=ft=>!!ft&&ft[h]===ft,k=ft=>ft&&ft[h],D=(ft,lt)=>mt$1(ft,h,lt),F=ft=>ft&&ft[h]&&ft[h].getPayload(),c=class{constructor(){go(this,"payload");D(this,this)}getPayload(){return this.payload||[]}},l=class extends c{constructor(lt){super();go(this,"done",!0);go(this,"elapsedTime");go(this,"lastPosition");go(this,"lastVelocity");go(this,"v0");go(this,"durationProgress",0);this._value=lt,l$1.num(this._value)&&(this.lastPosition=this._value)}static create(lt){return new l(lt)}getPayload(){return[this]}getValue(){return this._value}setValue(lt,dt){return l$1.num(lt)&&(this.lastPosition=lt,dt&&(lt=Math.round(lt/dt)*dt,this.done&&(this.lastPosition=lt))),this._value===lt?!1:(this._value=lt,!0)}reset(){let{done:lt}=this;this.done=!1,l$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,lt&&(this.lastVelocity=null),this.v0=null)}},d=class extends l{constructor(lt){super(0);go(this,"_string",null);go(this,"_toString");this._toString=W$1({output:[lt,lt]})}static create(lt){return new d(lt)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(lt){if(l$1.str(lt)){if(lt==this._string)return!1;this._string=lt,this._value=1}else if(super.setValue(lt))this._string=null;else return!1;return!0}reset(lt){lt&&(this._toString=W$1({output:[this.getValue(),lt]})),this._value=0,super.reset()}},f$1={dependencies:null},u=class extends c{constructor(ft){super(),this.source=ft,this.setValue(ft)}getValue(ft){let lt={};return xt(this.source,(dt,vt)=>{v(dt)?lt[vt]=dt.getValue(ft):Pt(dt)?lt[vt]=ve(dt):ft||(lt[vt]=dt)}),lt}setValue(ft){this.source=ft,this.payload=this._makePayload(ft)}reset(){this.payload&&Ve(this.payload,ft=>ft.reset())}_makePayload(ft){if(ft){let lt=new Set;return xt(ft,this._addToPayload,lt),Array.from(lt)}}_addToPayload(ft){f$1.dependencies&&Pt(ft)&&f$1.dependencies.add(ft);let lt=F(ft);lt&&Ve(lt,dt=>this.add(dt))}},y=class extends u{constructor(ft){super(ft)}static create(ft){return new y(ft)}getValue(){return this.source.map(ft=>ft.getValue())}setValue(ft){let lt=this.getPayload();return ft.length==lt.length?lt.map((dt,vt)=>dt.setValue(ft[vt])).some(Boolean):(super.setValue(ft.map(z)),!0)}};function z(ft){return(or(ft)?d:l).create(ft)}function Le$1(ft){let lt=k(ft);return lt?lt.constructor:l$1.arr(ft)?y:or(ft)?d:l}var x=(ft,lt)=>{let dt=!l$1.fun(ft)||ft.prototype&&ft.prototype.isReactComponent;return reactExports.forwardRef((vt,St)=>{let Et=reactExports.useRef(null),Ct=dt&&reactExports.useCallback(Zt=>{Et.current=ae(St,Zt)},[St]),[At,Rt]=ne$1(vt,lt),Dt=Mr(),Nt=()=>{let Zt=Et.current;dt&&!Zt||(Zt?lt.applyAnimatedValues(Zt,At.getValue(!0)):!1)===!1&&Dt()},Ft=new b(Nt,Rt),Ut=reactExports.useRef();Q$1(()=>(Ut.current=Ft,Ve(Rt,Zt=>Gt(Zt,Ft)),()=>{Ut.current&&(Ve(Ut.current.deps,Zt=>Qt(Zt,Ut.current)),n.cancel(Ut.current.update))})),reactExports.useEffect(Nt,[]),$r(()=>()=>{let Zt=Ut.current;Ve(Zt.deps,Kt=>Qt(Kt,Zt))});let Wt=lt.getComponentProps(At.getValue());return reactExports.createElement(ft,{...Wt,ref:Ct})})},b=class{constructor(ft,lt){this.update=ft,this.deps=lt}eventObserved(ft){ft.type=="change"&&n.write(this.update)}};function ne$1(ft,lt){let dt=new Set;return f$1.dependencies=dt,ft.style&&(ft={...ft,style:lt.createAnimatedStyle(ft.style)}),ft=new u(ft),f$1.dependencies=null,[ft,dt]}function ae(ft,lt){return ft&&(l$1.fun(ft)?ft(lt):ft.current=lt),lt}var j=Symbol.for("AnimatedComponent"),Ke=(ft,{applyAnimatedValues:lt=()=>!1,createAnimatedStyle:dt=St=>new u(St),getComponentProps:vt=St=>St}={})=>{let St={applyAnimatedValues:lt,createAnimatedStyle:dt,getComponentProps:vt},Et=Ct=>{let At=I$1(Ct)||"Anonymous";return l$1.str(Ct)?Ct=Et[Ct]||(Et[Ct]=x(Ct,St)):Ct=Ct[j]||(Ct[j]=x(Ct,St)),Ct.displayName=`Animated(${At})`,Ct};return xt(ft,(Ct,At)=>{l$1.arr(ft)&&(At=I$1(Ct)),Et[At]=Et(Ct)}),{animated:Et}},I$1=ft=>l$1.str(ft)?ft:ft&&l$1.str(ft.displayName)?ft.displayName:l$1.fun(ft)&&ft.name||null;function I(ft,...lt){return l$1.fun(ft)?ft(...lt):ft}var te=(ft,lt)=>ft===!0||!!(lt&&ft&&(l$1.fun(ft)?ft(lt):ht$1(ft).includes(lt))),et=(ft,lt)=>l$1.obj(ft)?lt&&ft[lt]:ft,ke=(ft,lt)=>ft.default===!0?ft[lt]:ft.default?ft.default[lt]:void 0,nn=ft=>ft,ne=(ft,lt=nn)=>{let dt=rn;ft.default&&ft.default!==!0&&(ft=ft.default,dt=Object.keys(ft));let vt={};for(let St of dt){let Et=lt(ft[St],St);l$1.und(Et)||(vt[St]=Et)}return vt},rn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],on={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sn(ft){let lt={},dt=0;if(xt(ft,(vt,St)=>{on[St]||(lt[St]=vt,dt++)}),dt)return lt}function de(ft){let lt=sn(ft);if(lt){let dt={to:lt};return xt(ft,(vt,St)=>St in lt||(dt[St]=vt)),dt}return{...ft}}function me(ft){return ft=ve(ft),l$1.arr(ft)?ft.map(me):or(ft)?p.createStringInterpolator({range:[0,1],output:[ft,ft]})(1):ft}function Ue(ft){for(let lt in ft)return!0;return!1}function Ee(ft){return l$1.fun(ft)||l$1.arr(ft)&&l$1.obj(ft[0])}function xe(ft,lt){var dt;(dt=ft.ref)==null||dt.delete(ft),lt==null||lt.delete(ft)}function he(ft,lt){var dt;lt&&ft.ref!==lt&&((dt=ft.ref)==null||dt.delete(ft),lt.add(ft),ft.ref=lt)}var mt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tt={...mt.default,mass:1,damping:1,easing:Lt$1.linear,clamp:!1},we=class{constructor(){go(this,"tension");go(this,"friction");go(this,"frequency");go(this,"damping");go(this,"mass");go(this,"velocity",0);go(this,"restVelocity");go(this,"precision");go(this,"progress");go(this,"duration");go(this,"easing");go(this,"clamp");go(this,"bounce");go(this,"decay");go(this,"round");Object.assign(this,tt)}};function gt(ft,lt,dt){dt&&(dt={...dt},ht(dt,lt),lt={...dt,...lt}),ht(ft,lt),Object.assign(ft,lt);for(let Ct in tt)ft[Ct]==null&&(ft[Ct]=tt[Ct]);let{mass:vt,frequency:St,damping:Et}=ft;return l$1.und(St)||(St<.01&&(St=.01),Et<0&&(Et=0),ft.tension=Math.pow(2*Math.PI/St,2)*vt,ft.friction=4*Math.PI*Et*vt/St),ft}function ht(ft,lt){if(!l$1.und(lt.decay))ft.duration=void 0;else{let dt=!l$1.und(lt.tension)||!l$1.und(lt.friction);(dt||!l$1.und(lt.frequency)||!l$1.und(lt.damping)||!l$1.und(lt.mass))&&(ft.duration=void 0,ft.decay=void 0),dt&&(ft.frequency=void 0)}}var yt=[],Le=class{constructor(){go(this,"changed",!1);go(this,"values",yt);go(this,"toValues",null);go(this,"fromValues",yt);go(this,"to");go(this,"from");go(this,"config",new we);go(this,"immediate",!1)}};function Me(ft,{key:lt,props:dt,defaultProps:vt,state:St,actions:Et}){return new Promise((Ct,At)=>{let Rt,Dt,Nt=te(dt.cancel??(vt==null?void 0:vt.cancel),lt);if(Nt)Wt();else{l$1.und(dt.pause)||(St.paused=te(dt.pause,lt));let Zt=vt==null?void 0:vt.pause;Zt!==!0&&(Zt=St.paused||te(Zt,lt)),Rt=I(dt.delay||0,lt),Zt?(St.resumeQueue.add(Ut),Et.pause()):(Et.resume(),Ut())}function Ft(){St.resumeQueue.add(Ut),St.timeouts.delete(Dt),Dt.cancel(),Rt=Dt.time-n.now()}function Ut(){Rt>0&&!p.skipAnimation?(St.delayed=!0,Dt=n.setTimeout(Wt,Rt),St.pauseQueue.add(Ft),St.timeouts.add(Dt)):Wt()}function Wt(){St.delayed&&(St.delayed=!1),St.pauseQueue.delete(Ft),St.timeouts.delete(Dt),ft<=(St.cancelId||0)&&(Nt=!0);try{Et.start({...dt,callId:ft,cancel:Nt},Ct)}catch(Zt){At(Zt)}}})}var be=(ft,lt)=>lt.length==1?lt[0]:lt.some(dt=>dt.cancelled)?q(ft.get()):lt.every(dt=>dt.noop)?nt(ft.get()):E$1(ft.get(),lt.every(dt=>dt.finished)),nt=ft=>({value:ft,noop:!0,finished:!0,cancelled:!1}),E$1=(ft,lt,dt=!1)=>({value:ft,finished:lt,cancelled:dt}),q=ft=>({value:ft,cancelled:!0,finished:!1});function De(ft,lt,dt,vt){let{callId:St,parentId:Et,onRest:Ct}=lt,{asyncTo:At,promise:Rt}=dt;return!Et&&ft===At&&!lt.reset?Rt:dt.promise=(async()=>{dt.asyncId=St,dt.asyncTo=ft;let Dt=ne(lt,(cn,hn)=>hn==="onRest"?void 0:cn),Nt,Ft,Ut=new Promise((cn,hn)=>(Nt=cn,Ft=hn)),Wt=cn=>{let hn=St<=(dt.cancelId||0)&&q(vt)||St!==dt.asyncId&&E$1(vt,!1);if(hn)throw cn.result=hn,Ft(cn),cn},Zt=(cn,hn)=>{let dn=new Ae,pn=new Ne;return(async()=>{if(p.skipAnimation)throw oe(dt),pn.result=E$1(vt,!1),Ft(pn),pn;Wt(dn);let gn=l$1.obj(cn)?{...cn}:{...hn,to:cn};gn.parentId=St,xt(Dt,(bn,$n)=>{l$1.und(gn[$n])&&(gn[$n]=bn)});let vn=await vt.start(gn);return Wt(dn),dt.paused&&await new Promise(bn=>{dt.resumeQueue.add(bn)}),vn})()},Kt;if(p.skipAnimation)return oe(dt),E$1(vt,!1);try{let cn;l$1.arr(ft)?cn=(async hn=>{for(let dn of hn)await Zt(dn)})(ft):cn=Promise.resolve(ft(Zt,vt.stop.bind(vt))),await Promise.all([cn.then(Nt),Ut]),Kt=E$1(vt.get(),!0,!1)}catch(cn){if(cn instanceof Ae)Kt=cn.result;else if(cn instanceof Ne)Kt=cn.result;else throw cn}finally{St==dt.asyncId&&(dt.asyncId=Et,dt.asyncTo=Et?At:void 0,dt.promise=Et?Rt:void 0)}return l$1.fun(Ct)&&n.batchedUpdates(()=>{Ct(Kt,vt,vt.item)}),Kt})()}function oe(ft,lt){Pe$1(ft.timeouts,dt=>dt.cancel()),ft.pauseQueue.clear(),ft.resumeQueue.clear(),ft.asyncId=ft.asyncTo=ft.promise=void 0,lt&&(ft.cancelId=lt)}var Ae=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");go(this,"result")}},Ne=class extends Error{constructor(){super("SkipAnimationSignal");go(this,"result")}},Re=ft=>ft instanceof X,Sn=1,X=class extends ge{constructor(){super(...arguments);go(this,"id",Sn++);go(this,"_priority",0)}get priority(){return this._priority}set priority(lt){this._priority!=lt&&(this._priority=lt,this._onPriorityChange(lt))}get(){let lt=k(this);return lt&&lt.getValue()}to(...lt){return p.to(this,lt)}interpolate(...lt){return Jt(),p.to(this,lt)}toJSON(){return this.get()}observerAdded(lt){lt==1&&this._attach()}observerRemoved(lt){lt==0&&this._detach()}_attach(){}_detach(){}_onChange(lt,dt=!1){$t(this,{type:"change",parent:this,value:lt,idle:dt})}_onPriorityChange(lt){this.idle||qe$1.sort(this),$t(this,{type:"priority",parent:this,priority:lt})}},se=Symbol.for("SpringPhase"),bt=1,rt=2,ot=4,qe=ft=>(ft[se]&bt)>0,Q=ft=>(ft[se]&rt)>0,ye=ft=>(ft[se]&ot)>0,st=(ft,lt)=>lt?ft[se]|=rt|bt:ft[se]&=~rt,it=(ft,lt)=>lt?ft[se]|=ot:ft[se]&=~ot,ue=class extends X{constructor(lt,dt){super();go(this,"key");go(this,"animation",new Le);go(this,"queue");go(this,"defaultProps",{});go(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});go(this,"_pendingCalls",new Set);go(this,"_lastCallId",0);go(this,"_lastToId",0);go(this,"_memoizedDuration",0);if(!l$1.und(lt)||!l$1.und(dt)){let vt=l$1.obj(lt)?{...lt}:{...dt,from:lt};l$1.und(vt.default)&&(vt.default=!0),this.start(vt)}}get idle(){return!(Q(this)||this._state.asyncTo)||ye(this)}get goal(){return ve(this.animation.to)}get velocity(){let lt=k(this);return lt instanceof l?lt.lastVelocity||0:lt.getPayload().map(dt=>dt.lastVelocity||0)}get hasAnimated(){return qe(this)}get isAnimating(){return Q(this)}get isPaused(){return ye(this)}get isDelayed(){return this._state.delayed}advance(lt){let dt=!0,vt=!1,St=this.animation,{config:Et,toValues:Ct}=St,At=F(St.to);!At&&Pt(St.to)&&(Ct=ht$1(ve(St.to))),St.values.forEach((Nt,Ft)=>{if(Nt.done)return;let Ut=Nt.constructor==d?1:At?At[Ft].lastPosition:Ct[Ft],Wt=St.immediate,Zt=Ut;if(!Wt){if(Zt=Nt.lastPosition,Et.tension<=0){Nt.done=!0;return}let Kt=Nt.elapsedTime+=lt,cn=St.fromValues[Ft],hn=Nt.v0!=null?Nt.v0:Nt.v0=l$1.arr(Et.velocity)?Et.velocity[Ft]:Et.velocity,dn,pn=Et.precision||(cn==Ut?.005:Math.min(1,Math.abs(Ut-cn)*.001));if(l$1.und(Et.duration))if(Et.decay){let gn=Et.decay===!0?.998:Et.decay,vn=Math.exp(-(1-gn)*Kt);Zt=cn+hn/(1-gn)*(1-vn),Wt=Math.abs(Nt.lastPosition-Zt)<=pn,dn=hn*vn}else{dn=Nt.lastVelocity==null?hn:Nt.lastVelocity;let gn=Et.restVelocity||pn/10,vn=Et.clamp?0:Et.bounce,bn=!l$1.und(vn),$n=cn==Ut?Nt.v0>0:cn<Ut,Tn,In=!1,Pn=1,zn=Math.ceil(lt/Pn);for(let An=0;An<zn&&(Tn=Math.abs(dn)>gn,!(!Tn&&(Wt=Math.abs(Ut-Zt)<=pn,Wt)));++An){bn&&(In=Zt==Ut||Zt>Ut==$n,In&&(dn=-dn*vn,Zt=Ut));let Gn=-Et.tension*1e-6*(Zt-Ut),xn=-Et.friction*.001*dn,Qn=(Gn+xn)/Et.mass;dn=dn+Qn*Pn,Zt=Zt+dn*Pn}}else{let gn=1;Et.duration>0&&(this._memoizedDuration!==Et.duration&&(this._memoizedDuration=Et.duration,Nt.durationProgress>0&&(Nt.elapsedTime=Et.duration*Nt.durationProgress,Kt=Nt.elapsedTime+=lt)),gn=(Et.progress||0)+Kt/this._memoizedDuration,gn=gn>1?1:gn<0?0:gn,Nt.durationProgress=gn),Zt=cn+Et.easing(gn)*(Ut-cn),dn=(Zt-Nt.lastPosition)/lt,Wt=gn==1}Nt.lastVelocity=dn,Number.isNaN(Zt)&&(console.warn("Got NaN while animating:",this),Wt=!0)}At&&!At[Ft].done&&(Wt=!1),Wt?Nt.done=!0:dt=!1,Nt.setValue(Zt,Et.round)&&(vt=!0)});let Rt=k(this),Dt=Rt.getValue();if(dt){let Nt=ve(St.to);(Dt!==Nt||vt)&&!Et.decay?(Rt.setValue(Nt),this._onChange(Nt)):vt&&Et.decay&&this._onChange(Dt),this._stop()}else vt&&this._onChange(Dt)}set(lt){return n.batchedUpdates(()=>{this._stop(),this._focus(lt),this._set(lt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Q(this)){let{to:lt,config:dt}=this.animation;n.batchedUpdates(()=>{this._onStart(),dt.decay||this._set(lt,!1),this._stop()})}return this}update(lt){return(this.queue||(this.queue=[])).push(lt),this}start(lt,dt){let vt;return l$1.und(lt)?(vt=this.queue||[],this.queue=[]):vt=[l$1.obj(lt)?lt:{...dt,to:lt}],Promise.all(vt.map(St=>this._update(St))).then(St=>be(this,St))}stop(lt){let{to:dt}=this.animation;return this._focus(this.get()),oe(this._state,lt&&this._lastCallId),n.batchedUpdates(()=>this._stop(dt,lt)),this}reset(){this._update({reset:!0})}eventObserved(lt){lt.type=="change"?this._start():lt.type=="priority"&&(this.priority=lt.priority+1)}_prepareNode(lt){let dt=this.key||"",{to:vt,from:St}=lt;vt=l$1.obj(vt)?vt[dt]:vt,(vt==null||Ee(vt))&&(vt=void 0),St=l$1.obj(St)?St[dt]:St,St==null&&(St=void 0);let Et={to:vt,from:St};return qe(this)||(lt.reverse&&([vt,St]=[St,vt]),St=ve(St),l$1.und(St)?k(this)||this._set(vt):this._set(St)),Et}_update({...lt},dt){let{key:vt,defaultProps:St}=this;lt.default&&Object.assign(St,ne(lt,(At,Rt)=>/^on/.test(Rt)?et(At,vt):At)),_t(this,lt,"onProps"),Ie(this,"onProps",lt,this);let Et=this._prepareNode(lt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ct=this._state;return Me(++this._lastCallId,{key:vt,props:lt,defaultProps:St,state:Ct,actions:{pause:()=>{ye(this)||(it(this,!0),yt$1(Ct.pauseQueue),Ie(this,"onPause",E$1(this,Ce(this,this.animation.to)),this))},resume:()=>{ye(this)&&(it(this,!1),Q(this)&&this._resume(),yt$1(Ct.resumeQueue),Ie(this,"onResume",E$1(this,Ce(this,this.animation.to)),this))},start:this._merge.bind(this,Et)}}).then(At=>{if(lt.loop&&At.finished&&!(dt&&At.noop)){let Rt=at(lt);if(Rt)return this._update(Rt,!0)}return At})}_merge(lt,dt,vt){if(dt.cancel)return this.stop(!0),vt(q(this));let St=!l$1.und(lt.to),Et=!l$1.und(lt.from);if(St||Et)if(dt.callId>this._lastToId)this._lastToId=dt.callId;else return vt(q(this));let{key:Ct,defaultProps:At,animation:Rt}=this,{to:Dt,from:Nt}=Rt,{to:Ft=Dt,from:Ut=Nt}=lt;Et&&!St&&(!dt.default||l$1.und(Ft))&&(Ft=Ut),dt.reverse&&([Ft,Ut]=[Ut,Ft]);let Wt=!bt$1(Ut,Nt);Wt&&(Rt.from=Ut),Ut=ve(Ut);let Zt=!bt$1(Ft,Dt);Zt&&this._focus(Ft);let Kt=Ee(dt.to),{config:cn}=Rt,{decay:hn,velocity:dn}=cn;(St||Et)&&(cn.velocity=0),dt.config&&!Kt&&gt(cn,I(dt.config,Ct),dt.config!==At.config?I(At.config,Ct):void 0);let pn=k(this);if(!pn||l$1.und(Ft))return vt(E$1(this,!0));let gn=l$1.und(dt.reset)?Et&&!dt.default:!l$1.und(Ut)&&te(dt.reset,Ct),vn=gn?Ut:this.get(),bn=me(Ft),$n=l$1.num(bn)||l$1.arr(bn)||or(bn),Tn=!Kt&&(!$n||te(At.immediate||dt.immediate,Ct));if(Zt){let An=Le$1(Ft);if(An!==pn.constructor)if(Tn)pn=this._set(bn);else throw Error(`Cannot animate between ${pn.constructor.name} and ${An.name}, as the "to" prop suggests`)}let In=pn.constructor,Pn=Pt(Ft),zn=!1;if(!Pn){let An=gn||!qe(this)&&Wt;(Zt||An)&&(zn=bt$1(me(vn),bn),Pn=!zn),(!bt$1(Rt.immediate,Tn)&&!Tn||!bt$1(cn.decay,hn)||!bt$1(cn.velocity,dn))&&(Pn=!0)}if(zn&&Q(this)&&(Rt.changed&&!gn?Pn=!0:Pn||this._stop(Dt)),!Kt&&((Pn||Pt(Dt))&&(Rt.values=pn.getPayload(),Rt.toValues=Pt(Ft)?null:In==d?[1]:ht$1(bn)),Rt.immediate!=Tn&&(Rt.immediate=Tn,!Tn&&!gn&&this._set(Dt)),Pn)){let{onRest:An}=Rt;Ve(_n,xn=>_t(this,dt,xn));let Gn=E$1(this,Ce(this,Dt));yt$1(this._pendingCalls,Gn),this._pendingCalls.add(vt),Rt.changed&&n.batchedUpdates(()=>{var xn;Rt.changed=!gn,An==null||An(Gn,this),gn?I(At.onRest,Gn):(xn=Rt.onStart)==null||xn.call(Rt,Gn,this)})}gn&&this._set(vn),Kt?vt(De(dt.to,dt,this._state,this)):Pn?this._start():Q(this)&&!Zt?this._pendingCalls.add(vt):vt(nt(vn))}_focus(lt){let dt=this.animation;lt!==dt.to&&(qt(this)&&this._detach(),dt.to=lt,qt(this)&&this._attach())}_attach(){let lt=0,{to:dt}=this.animation;Pt(dt)&&(Gt(dt,this),Re(dt)&&(lt=dt.priority+1)),this.priority=lt}_detach(){let{to:lt}=this.animation;Pt(lt)&&Qt(lt,this)}_set(lt,dt=!0){let vt=ve(lt);if(!l$1.und(vt)){let St=k(this);if(!St||!bt$1(vt,St.getValue())){let Et=Le$1(vt);!St||St.constructor!=Et?D(this,Et.create(vt)):St.setValue(vt),St&&n.batchedUpdates(()=>{this._onChange(vt,dt)})}}return k(this)}_onStart(){let lt=this.animation;lt.changed||(lt.changed=!0,Ie(this,"onStart",E$1(this,Ce(this,lt.to)),this))}_onChange(lt,dt){dt||(this._onStart(),I(this.animation.onChange,lt,this)),I(this.defaultProps.onChange,lt,this),super._onChange(lt,dt)}_start(){let lt=this.animation;k(this).reset(ve(lt.to)),lt.immediate||(lt.fromValues=lt.values.map(dt=>dt.lastPosition)),Q(this)||(st(this,!0),ye(this)||this._resume())}_resume(){p.skipAnimation?this.finish():qe$1.start(this)}_stop(lt,dt){if(Q(this)){st(this,!1);let vt=this.animation;Ve(vt.values,Et=>{Et.done=!0}),vt.toValues&&(vt.onChange=vt.onPause=vt.onResume=void 0),$t(this,{type:"idle",parent:this});let St=dt?q(this.get()):E$1(this.get(),Ce(this,lt??vt.to));yt$1(this._pendingCalls,St),vt.changed&&(vt.changed=!1,Ie(this,"onRest",St,this))}}};function Ce(ft,lt){let dt=me(lt),vt=me(ft.get());return bt$1(vt,dt)}function at(ft,lt=ft.loop,dt=ft.to){let vt=I(lt);if(vt){let St=vt!==!0&&de(vt),Et=(St||ft).reverse,Ct=!St||St.reset;return Pe({...ft,loop:lt,default:!1,pause:void 0,to:!Et||Ee(dt)?dt:void 0,from:Ct?ft.from:void 0,reset:Ct,...St})}}function Pe(ft){let{to:lt,from:dt}=ft=de(ft),vt=new Set;return l$1.obj(lt)&&Vt(lt,vt),l$1.obj(dt)&&Vt(dt,vt),ft.keys=vt.size?Array.from(vt):null,ft}function Ot(ft){let lt=Pe(ft);return l$1.und(lt.default)&&(lt.default=ne(lt)),lt}function Vt(ft,lt){xt(ft,(dt,vt)=>dt!=null&&lt.add(vt))}var _n=["onStart","onRest","onChange","onPause","onResume"];function _t(ft,lt,dt){ft.animation[dt]=lt[dt]!==ke(lt,dt)?et(lt[dt],ft.key):void 0}function Ie(ft,lt,...dt){var vt,St,Et,Ct;(St=(vt=ft.animation)[lt])==null||St.call(vt,...dt),(Ct=(Et=ft.defaultProps)[lt])==null||Ct.call(Et,...dt)}var Fn=["onStart","onChange","onRest"],kn=1,le=class{constructor(ft,lt){go(this,"id",kn++);go(this,"springs",{});go(this,"queue",[]);go(this,"ref");go(this,"_flush");go(this,"_initialProps");go(this,"_lastAsyncId",0);go(this,"_active",new Set);go(this,"_changed",new Set);go(this,"_started",!1);go(this,"_item");go(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});go(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),lt&&(this._flush=lt),ft&&this.start({default:!0,...ft})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(ft=>ft.idle&&!ft.isDelayed&&!ft.isPaused)}get item(){return this._item}set item(ft){this._item=ft}get(){let ft={};return this.each((lt,dt)=>ft[dt]=lt.get()),ft}set(ft){for(let lt in ft){let dt=ft[lt];l$1.und(dt)||this.springs[lt].set(dt)}}update(ft){return ft&&this.queue.push(Pe(ft)),this}start(ft){let{queue:lt}=this;return ft?lt=ht$1(ft).map(Pe):this.queue=[],this._flush?this._flush(this,lt):(jt(this,lt),ze(this,lt))}stop(ft,lt){if(ft!==!!ft&&(lt=ft),lt){let dt=this.springs;Ve(ht$1(lt),vt=>dt[vt].stop(!!ft))}else oe(this._state,this._lastAsyncId),this.each(dt=>dt.stop(!!ft));return this}pause(ft){if(l$1.und(ft))this.start({pause:!0});else{let lt=this.springs;Ve(ht$1(ft),dt=>lt[dt].pause())}return this}resume(ft){if(l$1.und(ft))this.start({pause:!1});else{let lt=this.springs;Ve(ht$1(ft),dt=>lt[dt].resume())}return this}each(ft){xt(this.springs,ft)}_onFrame(){let{onStart:ft,onChange:lt,onRest:dt}=this._events,vt=this._active.size>0,St=this._changed.size>0;(vt&&!this._started||St&&!this._started)&&(this._started=!0,Pe$1(ft,([At,Rt])=>{Rt.value=this.get(),At(Rt,this,this._item)}));let Et=!vt&&this._started,Ct=St||Et&&dt.size?this.get():null;St&&lt.size&&Pe$1(lt,([At,Rt])=>{Rt.value=Ct,At(Rt,this,this._item)}),Et&&(this._started=!1,Pe$1(dt,([At,Rt])=>{Rt.value=Ct,At(Rt,this,this._item)}))}eventObserved(ft){if(ft.type=="change")this._changed.add(ft.parent),ft.idle||this._active.add(ft.parent);else if(ft.type=="idle")this._active.delete(ft.parent);else return;n.onFrame(this._onFrame)}};function ze(ft,lt){return Promise.all(lt.map(dt=>wt(ft,dt))).then(dt=>be(ft,dt))}async function wt(ft,lt,dt){let{keys:vt,to:St,from:Et,loop:Ct,onRest:At,onResolve:Rt}=lt,Dt=l$1.obj(lt.default)&&lt.default;Ct&&(lt.loop=!1),St===!1&&(lt.to=null),Et===!1&&(lt.from=null);let Nt=l$1.arr(St)||l$1.fun(St)?St:void 0;Nt?(lt.to=void 0,lt.onRest=void 0,Dt&&(Dt.onRest=void 0)):Ve(Fn,Kt=>{let cn=lt[Kt];if(l$1.fun(cn)){let hn=ft._events[Kt];lt[Kt]=({finished:dn,cancelled:pn})=>{let gn=hn.get(cn);gn?(dn||(gn.finished=!1),pn&&(gn.cancelled=!0)):hn.set(cn,{value:null,finished:dn||!1,cancelled:pn||!1})},Dt&&(Dt[Kt]=lt[Kt])}});let Ft=ft._state;lt.pause===!Ft.paused?(Ft.paused=lt.pause,yt$1(lt.pause?Ft.pauseQueue:Ft.resumeQueue)):Ft.paused&&(lt.pause=!0);let Ut=(vt||Object.keys(ft.springs)).map(Kt=>ft.springs[Kt].start(lt)),Wt=lt.cancel===!0||ke(lt,"cancel")===!0;(Nt||Wt&&Ft.asyncId)&&Ut.push(Me(++ft._lastAsyncId,{props:lt,state:Ft,actions:{pause:Y,resume:Y,start(Kt,cn){Wt?(oe(Ft,ft._lastAsyncId),cn(q(ft))):(Kt.onRest=At,cn(De(Nt,Kt,Ft,ft)))}}})),Ft.paused&&await new Promise(Kt=>{Ft.resumeQueue.add(Kt)});let Zt=be(ft,await Promise.all(Ut));if(Ct&&Zt.finished&&!(dt&&Zt.noop)){let Kt=at(lt,Ct,St);if(Kt)return jt(ft,[Kt]),wt(ft,Kt,!0)}return Rt&&n.batchedUpdates(()=>Rt(Zt,ft,ft.item)),Zt}function _e(ft,lt){let dt={...ft.springs};return lt&&Ve(ht$1(lt),vt=>{l$1.und(vt.keys)&&(vt=Pe(vt)),l$1.obj(vt.to)||(vt={...vt,to:void 0}),Mt(dt,vt,St=>Lt(St))}),pt(ft,dt),dt}function pt(ft,lt){xt(lt,(dt,vt)=>{ft.springs[vt]||(ft.springs[vt]=dt,Gt(dt,ft))})}function Lt(ft,lt){let dt=new ue;return dt.key=ft,lt&&Gt(dt,lt),dt}function Mt(ft,lt,dt){lt.keys&&Ve(lt.keys,vt=>{(ft[vt]||(ft[vt]=dt(vt)))._prepareNode(lt)})}function jt(ft,lt){Ve(lt,dt=>{Mt(ft.springs,dt,vt=>Lt(vt,ft))})}var H=({children:ft,...lt})=>{let dt=reactExports.useContext(Ge),vt=lt.pause||!!dt.pause,St=lt.immediate||!!dt.immediate;lt=Lr(()=>({pause:vt,immediate:St}),[vt,St]);let{Provider:Et}=Ge;return reactExports.createElement(Et,{value:lt},ft)},Ge=wn(H,{});H.Provider=Ge.Provider;H.Consumer=Ge.Consumer;function wn(ft,lt){return Object.assign(ft,reactExports.createContext(lt)),ft.Provider._context=ft,ft.Consumer._context=ft,ft}var fe=()=>{let ft=[],lt=function(vt){er();let St=[];return Ve(ft,(Et,Ct)=>{if(l$1.und(vt))St.push(Et.start());else{let At=dt(vt,Et,Ct);At&&St.push(Et.start(At))}}),St};lt.current=ft,lt.add=function(vt){ft.includes(vt)||ft.push(vt)},lt.delete=function(vt){let St=ft.indexOf(vt);~St&&ft.splice(St,1)},lt.pause=function(){return Ve(ft,vt=>vt.pause(...arguments)),this},lt.resume=function(){return Ve(ft,vt=>vt.resume(...arguments)),this},lt.set=function(vt){Ve(ft,(St,Et)=>{let Ct=l$1.fun(vt)?vt(Et,St):vt;Ct&&St.set(Ct)})},lt.start=function(vt){let St=[];return Ve(ft,(Et,Ct)=>{if(l$1.und(vt))St.push(Et.start());else{let At=this._getProps(vt,Et,Ct);At&&St.push(Et.start(At))}}),St},lt.stop=function(){return Ve(ft,vt=>vt.stop(...arguments)),this},lt.update=function(vt){return Ve(ft,(St,Et)=>St.update(this._getProps(vt,St,Et))),this};let dt=function(vt,St,Et){return l$1.fun(vt)?vt(Et,St):vt};return lt._getProps=dt,lt};function He(ft,lt,dt){let vt=l$1.fun(lt)&&lt;vt&&!dt&&(dt=[]);let St=reactExports.useMemo(()=>vt||arguments.length==3?fe():void 0,[]),Et=reactExports.useRef(0),Ct=Mr(),At=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(hn,dn){let pn=_e(hn,dn);return Et.current>0&&!At.queue.length&&!Object.keys(pn).some(gn=>!hn.springs[gn])?ze(hn,dn):new Promise(gn=>{pt(hn,pn),At.queue.push(()=>{gn(ze(hn,dn))}),Ct()})}}),[]),Rt=reactExports.useRef([...At.ctrls]),Dt=[],Nt=Ur(ft)||0;reactExports.useMemo(()=>{Ve(Rt.current.slice(ft,Nt),hn=>{xe(hn,St),hn.stop(!0)}),Rt.current.length=ft,Ft(Nt,ft)},[ft]),reactExports.useMemo(()=>{Ft(0,Math.min(Nt,ft))},dt);function Ft(hn,dn){for(let pn=hn;pn<dn;pn++){let gn=Rt.current[pn]||(Rt.current[pn]=new le(null,At.flush)),vn=vt?vt(pn,gn):lt[pn];vn&&(Dt[pn]=Ot(vn))}}let Ut=Rt.current.map((hn,dn)=>_e(hn,Dt[dn])),Wt=reactExports.useContext(H),Zt=Ur(Wt),Kt=Wt!==Zt&&Ue(Wt);Q$1(()=>{Et.current++,At.ctrls=Rt.current;let{queue:hn}=At;hn.length&&(At.queue=[],Ve(hn,dn=>dn())),Ve(Rt.current,(dn,pn)=>{St==null||St.add(dn),Kt&&dn.start({default:Wt});let gn=Dt[pn];gn&&(he(dn,gn.ref),dn.ref?dn.queue.push(gn):dn.start(gn))})}),$r(()=>()=>{Ve(At.ctrls,hn=>hn.stop(!0))});let cn=Ut.map(hn=>({...hn}));return St?[cn,St]:cn}function J(ft,lt){let dt=l$1.fun(ft),[[vt],St]=He(1,dt?ft:[ft],dt?lt||[]:lt);return dt||arguments.length==2?[vt,St]:vt}var W=class extends X{constructor(lt,dt){super();go(this,"key");go(this,"idle",!0);go(this,"calc");go(this,"_active",new Set);this.source=lt,this.calc=W$1(...dt);let vt=this._get(),St=Le$1(vt);D(this,St.create(vt))}advance(lt){let dt=this._get(),vt=this.get();bt$1(dt,vt)||(k(this).setValue(dt),this._onChange(dt,this.idle)),!this.idle&&Yt(this._active)&&ct(this)}_get(){let lt=l$1.arr(this.source)?this.source.map(ve):ht$1(ve(this.source));return this.calc(...lt)}_start(){this.idle&&!Yt(this._active)&&(this.idle=!1,Ve(F(this),lt=>{lt.done=!1}),p.skipAnimation?(n.batchedUpdates(()=>this.advance()),ct(this)):qe$1.start(this))}_attach(){let lt=1;Ve(ht$1(this.source),dt=>{Pt(dt)&&Gt(dt,this),Re(dt)&&(dt.idle||this._active.add(dt),lt=Math.max(lt,dt.priority+1))}),this.priority=lt,this._start()}_detach(){Ve(ht$1(this.source),lt=>{Pt(lt)&&Qt(lt,this)}),this._active.clear(),ct(this)}eventObserved(lt){lt.type=="change"?lt.idle?this.advance():(this._active.add(lt.parent),this._start()):lt.type=="idle"?this._active.delete(lt.parent):lt.type=="priority"&&(this.priority=ht$1(this.source).reduce((dt,vt)=>Math.max(dt,(Re(vt)?vt.priority:0)+1),0))}};function vr(ft){return ft.idle!==!1}function Yt(ft){return!ft.size||Array.from(ft).every(vr)}function ct(ft){ft.idle||(ft.idle=!0,Ve(F(ft),lt=>{lt.done=!0}),$t(ft,{type:"idle",parent:ft}))}p.assign({createStringInterpolator:Xt,to:(ft,lt)=>new W(ft,lt)});var o=["primitive"].concat(Object.keys(r$5).filter(ft=>/^[A-Z]/.test(ft)).map(ft=>ft[0].toLowerCase()+ft.slice(1)));p.assign({createStringInterpolator:Xt,colors:It,frameLoop:"demand"});addEffect(()=>{n.advance()});var f=Ke(o,{applyAnimatedValues:applyProps}),E=f.animated;const BezierControlPoint=({id:ft,point:lt})=>{const[dt,vt]=reactExports.useState(void 0),St=useCurveEditorState(Wt=>Wt.selectedControlPoint),Et=useCurveEditorState(Wt=>Wt.setSelectedControlPoint),Ct=useCurveEditorState(Wt=>Wt.updateBezierControlPoint),{size:At,viewport:Rt,camera:Dt}=useThree();Rt.aspect;const[Nt,Ft]=J(()=>({scale:[1,1,1],position:[lt.x,lt.y,lt.z],config:{mass:1,tension:0,friction:18}})),Ut=useGesture({onDrag:({xy:[Wt,Zt]})=>{if(!dt)return;const Kt=new Raycaster;Kt.setFromCamera({x:(Wt-Rt.left)/At.width*2-1,y:-((Zt-Rt.top)/At.height)*2+1},Dt);const cn=new Plane$1;cn.setFromNormalAndCoplanarPoint(Dt.getWorldDirection(new Vector3(0,0,1)),dt);const hn=new Vector3;Kt.ray.intersectPlane(cn,hn),Ft({position:hn.toArray()}),Ct(ft,hn.clone())},onHover:({hovering:Wt})=>{Ft({scale:Wt?[1.2,1.2,1.2]:[1,1,1]})},onDragStart:()=>{Et(ft);const[Wt,Zt,Kt]=Nt.position.get();vt(new Vector3(Wt,Zt,Kt))},onDragEnd:()=>{vt(void 0),Et(void 0)}});return jsx(E.mesh,{...Nt,...Ut(),castShadow:!0,children:jsxs(Sphere,{scale:.2,children:[jsx("meshBasicMaterial",{color:St===ft?"#FF00FF":"#000000"}),jsx("pointLight",{color:16777215,intensity:1})]})})},CurveEditor=()=>{const ft=useCurveEditorState(Et=>Et.bezierControlPoints),lt=useCurveEditorState(Et=>Et.bezierLinePoints),dt=useCurveEditorState(Et=>Et.selectedControlPoint),vt=ft.length,St=reactExports.useRef();return useFrame(({clock:Et})=>{var Rt;const Ct=Et.getElapsedTime(),At=computeBezierPoint(ft,Ct%vt/vt);(Rt=St.current)==null||Rt.position.set(At.x,At.y,At.z)}),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/10),minPolarAngle:0,maxDistance:20,enableRotate:dt===void 0}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx("directionalLight",{color:"blue",position:[0,5,5]}),jsx(Sky,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25}),jsxs("group",{children:[ft.map((Et,Ct)=>jsx(BezierControlPoint,{id:Ct,point:Et},Ct)),jsx("group",{ref:St,children:jsx(Crazyflie,{robotId:"",renderBoundingBox:!1})}),jsx(CatmullRomLine,{points:lt,closed:!1,curveType:"centripetal",tension:.5,color:"black",lineWidth:3,dashed:!0,dashSize:.5,dashScale:5})]})]})},CurveEditorModal=()=>{const[ft,lt]=reactExports.useState([]),dt=useUIState(Rt=>Rt.curveEditorOpen),vt=useUIState(Rt=>Rt.toggleCurveEditor),St=useCurveEditorState(Rt=>Rt.bezierControlPoints),Et=useCurveEditorState(Rt=>Rt.addBezierControlPoint),Ct=useCurveEditorState(Rt=>Rt.selectedControlPoint),At=useCurveEditorState(Rt=>Rt.bezierControlPoints.length);return reactExports.useEffect(()=>{lt(St)},[Ct,At]),jsxs(Modal,{show:dt,onClose:vt,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Curve Editor"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsxs("div",{className:"flex h-full flex-row",children:[jsxs("div",{className:"w-1/4",children:[jsx(IconButton,{icon:faPlus,text:"Add Point",onClick:()=>Et(new Vector3(1,1,1))}),jsx(VectorEditor,{points:ft}),jsx("div",{className:"flex flex-col gap-2"})]}),jsx("div",{className:"flex h-full flex-grow",children:jsx(Canvas,{children:jsx(CurveEditor,{})})})]})}),jsx(Modal.Footer,{})]})},SettingsModal=()=>{const ft=useUIState(Rt=>Rt.settingsModalOpen),lt=useUIState(Rt=>Rt.toggleSettingsModal),dt=useRobartState(Rt=>Rt.resetProject),vt=useRobartState(Rt=>Rt.projectName),St=useRobartState(Rt=>Rt.setProjectName),Et=useUIState(Rt=>Rt.toggleCurveEditor),[Ct,At]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:"Settings"}),jsx(Modal.Body,{children:jsxs(Tabs.Group,{style:"default",children:[jsxs(Tabs.Item,{active:!0,title:"Project",children:["Profile content",jsxs("div",{children:[jsx("div",{className:"mb-2 block",children:jsx(Label,{value:"Project Name"})}),jsx(TextInput,{value:vt,onChange:Rt=>St(Rt.target.value)})]})]}),jsx(Tabs.Item,{title:"Blocks",children:"Block Settings"}),jsx(Tabs.Item,{title:"Preferences",children:"User Preferences"}),jsx(Tabs.Item,{title:"Utilities",children:jsx(Button,{onClick:Et,children:"Curve Editor"})})]})}),jsxs(Modal.Footer,{children:[jsx(CancelButton,{onClick:lt}),jsx(IconButton,{color:"warning",text:"Reset Project",icon:faSync,onClick:()=>At(!0)})]})]}),jsx(ConfirmationModal,{header:"Confirm Reset Project",open:Ct,onCancel:()=>At(!1),onConfirm:()=>{dt(),At(!1),lt()},children:"Are you sure?"}),jsx(CurveEditorModal,{})]})},NavigationBar=()=>{const[ft,lt]=reactExports.useState(!1),dt=useRobartState(Rt=>Rt.saveProject),vt=useRobartState(Rt=>Rt.exportToROS),St=useRobartState(Rt=>Rt.loadProject),Et=useUIState(Rt=>Rt.toggleSettingsModal),Ct=useRobartState(Rt=>Rt.projectName),At=useRobartState(Rt=>Rt.setProjectName);return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center gap-5 border-b-2 border-black p-4",children:[jsx(RenamableText,{className:"text-4xl font-extrabold",text:Ct,updateText:Rt=>{At(Rt!==""?Rt:"New Robart Project")}}),jsxs("div",{className:"flex flex-grow justify-end gap-3",children:[jsx(IconButton,{icon:faDownload,text:"Export To ROS",onClick:()=>vt("test.txt")}),jsx(IconButton,{icon:faDownload,text:"Save Project",onClick:()=>dt()}),jsx(IconButton,{icon:faUpload,text:"Load Project",onClick:()=>lt(!0)}),jsx(IconButton,{icon:faGear,text:"Settings",onClick:()=>Et()})]})]}),jsx(UploadFileModal,{header:"Load Project",open:ft,onClose:()=>lt(!1),onFileUpload:St}),jsx(SettingsModal,{})]})},DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor(lt,dt){this.from=lt,this.to=dt}};class NodeProp{constructor(lt={}){this.id=nextPropID++,this.perNode=!!lt.perNode,this.deserialize=lt.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(lt){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof lt!="function"&&(lt=NodeType.match(lt)),dt=>{let vt=lt(dt);return vt===void 0?null:[this,vt]}}}NodeProp.closedBy=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.group=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(lt,dt,vt,St=0){this.name=lt,this.props=dt,this.id=vt,this.flags=St}static define(lt){let dt=lt.props&&lt.props.length?Object.create(null):noProps,vt=(lt.top?1:0)|(lt.skipped?2:0)|(lt.error?4:0)|(lt.name==null?8:0),St=new NodeType(lt.name||"",dt,lt.id,vt);if(lt.props){for(let Et of lt.props)if(Array.isArray(Et)||(Et=Et(St)),Et){if(Et[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");dt[Et[0].id]=Et[1]}}return St}prop(lt){return this.props[lt.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(lt){if(typeof lt=="string"){if(this.name==lt)return!0;let dt=this.prop(NodeProp.group);return dt?dt.indexOf(lt)>-1:!1}return this.id==lt}static match(lt){let dt=Object.create(null);for(let vt in lt)for(let St of vt.split(" "))dt[St]=lt[vt];return vt=>{for(let St=vt.prop(NodeProp.group),Et=-1;Et<(St?St.length:0);Et++){let Ct=dt[Et<0?vt.name:St[Et]];if(Ct)return Ct}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(lt){this.types=lt;for(let dt=0;dt<lt.length;dt++)if(lt[dt].id!=dt)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...lt){let dt=[];for(let vt of this.types){let St=null;for(let Et of lt){let Ct=Et(vt);Ct&&(St||(St=Object.assign({},vt.props)),St[Ct[0].id]=Ct[1])}dt.push(St?new NodeType(vt.name,St,vt.id,vt.flags):vt)}return new NodeSet(dt)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(ft){ft[ft.ExcludeBuffers=1]="ExcludeBuffers",ft[ft.IncludeAnonymous=2]="IncludeAnonymous",ft[ft.IgnoreMounts=4]="IgnoreMounts",ft[ft.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(lt,dt,vt,St,Et){if(this.type=lt,this.children=dt,this.positions=vt,this.length=St,this.props=null,Et&&Et.length){this.props=Object.create(null);for(let[Ct,At]of Et)this.props[typeof Ct=="number"?Ct:Ct.id]=At}}toString(){let lt=this.prop(NodeProp.mounted);if(lt&&!lt.overlay)return lt.tree.toString();let dt="";for(let vt of this.children){let St=vt.toString();St&&(dt&&(dt+=","),dt+=St)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(dt.length?"("+dt+")":""):dt}cursor(lt=0){return new TreeCursor(this.topNode,lt)}cursorAt(lt,dt=0,vt=0){let St=CachedNode.get(this)||this.topNode,Et=new TreeCursor(St);return Et.moveTo(lt,dt),CachedNode.set(this,Et._tree),Et}get topNode(){return new TreeNode(this,0,0,null)}resolve(lt,dt=0){let vt=resolveNode(CachedNode.get(this)||this.topNode,lt,dt,!1);return CachedNode.set(this,vt),vt}resolveInner(lt,dt=0){let vt=resolveNode(CachedInnerNode.get(this)||this.topNode,lt,dt,!0);return CachedInnerNode.set(this,vt),vt}iterate(lt){let{enter:dt,leave:vt,from:St=0,to:Et=this.length}=lt;for(let Ct=this.cursor((lt.mode||0)|IterMode.IncludeAnonymous);;){let At=!1;if(Ct.from<=Et&&Ct.to>=St&&(Ct.type.isAnonymous||dt(Ct)!==!1)){if(Ct.firstChild())continue;At=!0}for(;At&&vt&&!Ct.type.isAnonymous&&vt(Ct),!Ct.nextSibling();){if(!Ct.parent())return;At=!0}}}prop(lt){return lt.perNode?this.props?this.props[lt.id]:void 0:this.type.prop(lt)}get propValues(){let lt=[];if(this.props)for(let dt in this.props)lt.push([+dt,this.props[dt]]);return lt}balance(lt={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(dt,vt,St)=>new Tree(this.type,dt,vt,St,this.propValues),lt.makeTree||((dt,vt,St)=>new Tree(NodeType.none,dt,vt,St)))}static build(lt){return buildTree(lt)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(lt,dt){this.buffer=lt,this.index=dt}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(lt,dt,vt){this.buffer=lt,this.length=dt,this.set=vt}get type(){return NodeType.none}toString(){let lt=[];for(let dt=0;dt<this.buffer.length;)lt.push(this.childString(dt)),dt=this.buffer[dt+3];return lt.join(",")}childString(lt){let dt=this.buffer[lt],vt=this.buffer[lt+3],St=this.set.types[dt],Et=St.name;if(/\W/.test(Et)&&!St.isError&&(Et=JSON.stringify(Et)),lt+=4,vt==lt)return Et;let Ct=[];for(;lt<vt;)Ct.push(this.childString(lt)),lt=this.buffer[lt+3];return Et+"("+Ct.join(",")+")"}findChild(lt,dt,vt,St,Et){let{buffer:Ct}=this,At=-1;for(let Rt=lt;Rt!=dt&&!(checkSide(Et,St,Ct[Rt+1],Ct[Rt+2])&&(At=Rt,vt>0));Rt=Ct[Rt+3]);return At}slice(lt,dt,vt){let St=this.buffer,Et=new Uint16Array(dt-lt),Ct=0;for(let At=lt,Rt=0;At<dt;){Et[Rt++]=St[At++],Et[Rt++]=St[At++]-vt;let Dt=Et[Rt++]=St[At++]-vt;Et[Rt++]=St[At++]-lt,Ct=Math.max(Ct,Dt)}return new TreeBuffer(Et,Ct,this.set)}}function checkSide(ft,lt,dt,vt){switch(ft){case-2:return dt<lt;case-1:return vt>=lt&&dt<lt;case 0:return dt<lt&&vt>lt;case 1:return dt<=lt&&vt>lt;case 2:return vt>lt;case 4:return!0}}function enterUnfinishedNodesBefore(ft,lt){let dt=ft.childBefore(lt);for(;dt;){let vt=dt.lastChild;if(!vt||vt.to!=dt.to)break;vt.type.isError&&vt.from==vt.to?(ft=dt,dt=vt.prevSibling):dt=vt}return ft}function resolveNode(ft,lt,dt,vt){for(var St;ft.from==ft.to||(dt<1?ft.from>=lt:ft.from>lt)||(dt>-1?ft.to<=lt:ft.to<lt);){let Ct=!vt&&ft instanceof TreeNode&&ft.index<0?null:ft.parent;if(!Ct)return ft;ft=Ct}let Et=vt?0:IterMode.IgnoreOverlays;if(vt)for(let Ct=ft,At=Ct.parent;At;Ct=At,At=Ct.parent)Ct instanceof TreeNode&&Ct.index<0&&((St=At.enter(lt,dt,Et))===null||St===void 0?void 0:St.from)!=Ct.from&&(ft=At);for(;;){let Ct=ft.enter(lt,dt,Et);if(!Ct)return ft;ft=Ct}}class TreeNode{constructor(lt,dt,vt,St){this._tree=lt,this.from=dt,this.index=vt,this._parent=St}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(lt,dt,vt,St,Et=0){for(let Ct=this;;){for(let{children:At,positions:Rt}=Ct._tree,Dt=dt>0?At.length:-1;lt!=Dt;lt+=dt){let Nt=At[lt],Ft=Rt[lt]+Ct.from;if(checkSide(St,vt,Ft,Ft+Nt.length)){if(Nt instanceof TreeBuffer){if(Et&IterMode.ExcludeBuffers)continue;let Ut=Nt.findChild(0,Nt.buffer.length,dt,vt-Ft,St);if(Ut>-1)return new BufferNode(new BufferContext(Ct,Nt,lt,Ft),null,Ut)}else if(Et&IterMode.IncludeAnonymous||!Nt.type.isAnonymous||hasChild(Nt)){let Ut;if(!(Et&IterMode.IgnoreMounts)&&Nt.props&&(Ut=Nt.prop(NodeProp.mounted))&&!Ut.overlay)return new TreeNode(Ut.tree,Ft,lt,Ct);let Wt=new TreeNode(Nt,Ft,lt,Ct);return Et&IterMode.IncludeAnonymous||!Wt.type.isAnonymous?Wt:Wt.nextChild(dt<0?Nt.children.length-1:0,dt,vt,St)}}}if(Et&IterMode.IncludeAnonymous||!Ct.type.isAnonymous||(Ct.index>=0?lt=Ct.index+dt:lt=dt<0?-1:Ct._parent._tree.children.length,Ct=Ct._parent,!Ct))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(lt){return this.nextChild(0,1,lt,2)}childBefore(lt){return this.nextChild(this._tree.children.length-1,-1,lt,-2)}enter(lt,dt,vt=0){let St;if(!(vt&IterMode.IgnoreOverlays)&&(St=this._tree.prop(NodeProp.mounted))&&St.overlay){let Et=lt-this.from;for(let{from:Ct,to:At}of St.overlay)if((dt>0?Ct<=Et:Ct<Et)&&(dt<0?At>=Et:At>Et))return new TreeNode(St.tree,St.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,lt,dt,vt)}nextSignificantParent(){let lt=this;for(;lt.type.isAnonymous&&lt._parent;)lt=lt._parent;return lt}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(lt=0){return new TreeCursor(this,lt)}get tree(){return this._tree}toTree(){return this._tree}resolve(lt,dt=0){return resolveNode(this,lt,dt,!1)}resolveInner(lt,dt=0){return resolveNode(this,lt,dt,!0)}enterUnfinishedNodesBefore(lt){return enterUnfinishedNodesBefore(this,lt)}getChild(lt,dt=null,vt=null){let St=getChildren(this,lt,dt,vt);return St.length?St[0]:null}getChildren(lt,dt=null,vt=null){return getChildren(this,lt,dt,vt)}toString(){return this._tree.toString()}get node(){return this}matchContext(lt){return matchNodeContext(this,lt)}}function getChildren(ft,lt,dt,vt){let St=ft.cursor(),Et=[];if(!St.firstChild())return Et;if(dt!=null){for(;!St.type.is(dt);)if(!St.nextSibling())return Et}for(;;){if(vt!=null&&St.type.is(vt))return Et;if(St.type.is(lt)&&Et.push(St.node),!St.nextSibling())return vt==null?Et:[]}}function matchNodeContext(ft,lt,dt=lt.length-1){for(let vt=ft.parent;dt>=0;vt=vt.parent){if(!vt)return!1;if(!vt.type.isAnonymous){if(lt[dt]&&lt[dt]!=vt.name)return!1;dt--}}return!0}class BufferContext{constructor(lt,dt,vt,St){this.parent=lt,this.buffer=dt,this.index=vt,this.start=St}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(lt,dt,vt){this.context=lt,this._parent=dt,this.index=vt,this.type=lt.buffer.set.types[lt.buffer.buffer[vt]]}child(lt,dt,vt){let{buffer:St}=this.context,Et=St.findChild(this.index+4,St.buffer[this.index+3],lt,dt-this.context.start,vt);return Et<0?null:new BufferNode(this.context,this,Et)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(lt){return this.child(1,lt,2)}childBefore(lt){return this.child(-1,lt,-2)}enter(lt,dt,vt=0){if(vt&IterMode.ExcludeBuffers)return null;let{buffer:St}=this.context,Et=St.findChild(this.index+4,St.buffer[this.index+3],dt>0?1:-1,lt-this.context.start,dt);return Et<0?null:new BufferNode(this.context,this,Et)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(lt){return this._parent?null:this.context.parent.nextChild(this.context.index+lt,lt,0,4)}get nextSibling(){let{buffer:lt}=this.context,dt=lt.buffer[this.index+3];return dt<(this._parent?lt.buffer[this._parent.index+3]:lt.buffer.length)?new BufferNode(this.context,this._parent,dt):this.externalSibling(1)}get prevSibling(){let{buffer:lt}=this.context,dt=this._parent?this._parent.index+4:0;return this.index==dt?this.externalSibling(-1):new BufferNode(this.context,this._parent,lt.findChild(dt,this.index,-1,0,4))}cursor(lt=0){return new TreeCursor(this,lt)}get tree(){return null}toTree(){let lt=[],dt=[],{buffer:vt}=this.context,St=this.index+4,Et=vt.buffer[this.index+3];if(Et>St){let Ct=vt.buffer[this.index+1];lt.push(vt.slice(St,Et,Ct)),dt.push(0)}return new Tree(this.type,lt,dt,this.to-this.from)}resolve(lt,dt=0){return resolveNode(this,lt,dt,!1)}resolveInner(lt,dt=0){return resolveNode(this,lt,dt,!0)}enterUnfinishedNodesBefore(lt){return enterUnfinishedNodesBefore(this,lt)}toString(){return this.context.buffer.childString(this.index)}getChild(lt,dt=null,vt=null){let St=getChildren(this,lt,dt,vt);return St.length?St[0]:null}getChildren(lt,dt=null,vt=null){return getChildren(this,lt,dt,vt)}get node(){return this}matchContext(lt){return matchNodeContext(this,lt)}}class TreeCursor{get name(){return this.type.name}constructor(lt,dt=0){if(this.mode=dt,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,lt instanceof TreeNode)this.yieldNode(lt);else{this._tree=lt.context.parent,this.buffer=lt.context;for(let vt=lt._parent;vt;vt=vt._parent)this.stack.unshift(vt.index);this.bufferNode=lt,this.yieldBuf(lt.index)}}yieldNode(lt){return lt?(this._tree=lt,this.type=lt.type,this.from=lt.from,this.to=lt.to,!0):!1}yieldBuf(lt,dt){this.index=lt;let{start:vt,buffer:St}=this.buffer;return this.type=dt||St.set.types[St.buffer[lt]],this.from=vt+St.buffer[lt+1],this.to=vt+St.buffer[lt+2],!0}yield(lt){return lt?lt instanceof TreeNode?(this.buffer=null,this.yieldNode(lt)):(this.buffer=lt.context,this.yieldBuf(lt.index,lt.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(lt,dt,vt){if(!this.buffer)return this.yield(this._tree.nextChild(lt<0?this._tree._tree.children.length-1:0,lt,dt,vt,this.mode));let{buffer:St}=this.buffer,Et=St.findChild(this.index+4,St.buffer[this.index+3],lt,dt-this.buffer.start,vt);return Et<0?!1:(this.stack.push(this.index),this.yieldBuf(Et))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(lt){return this.enterChild(1,lt,2)}childBefore(lt){return this.enterChild(-1,lt,-2)}enter(lt,dt,vt=this.mode){return this.buffer?vt&IterMode.ExcludeBuffers?!1:this.enterChild(1,lt,dt):this.yield(this._tree.enter(lt,dt,vt))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let lt=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(lt)}sibling(lt){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+lt,lt,0,4,this.mode)):!1;let{buffer:dt}=this.buffer,vt=this.stack.length-1;if(lt<0){let St=vt<0?0:this.stack[vt]+4;if(this.index!=St)return this.yieldBuf(dt.findChild(St,this.index,-1,0,4))}else{let St=dt.buffer[this.index+3];if(St<(vt<0?dt.buffer.length:dt.buffer[this.stack[vt]+3]))return this.yieldBuf(St)}return vt<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+lt,lt,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(lt){let dt,vt,{buffer:St}=this;if(St){if(lt>0){if(this.index<St.buffer.buffer.length)return!1}else for(let Et=0;Et<this.index;Et++)if(St.buffer.buffer[Et+3]<this.index)return!1;({index:dt,parent:vt}=St)}else({index:dt,_parent:vt}=this._tree);for(;vt;{index:dt,_parent:vt}=vt)if(dt>-1)for(let Et=dt+lt,Ct=lt<0?-1:vt._tree.children.length;Et!=Ct;Et+=lt){let At=vt._tree.children[Et];if(this.mode&IterMode.IncludeAnonymous||At instanceof TreeBuffer||!At.type.isAnonymous||hasChild(At))return!1}return!0}move(lt,dt){if(dt&&this.enterChild(lt,0,4))return!0;for(;;){if(this.sibling(lt))return!0;if(this.atLastNode(lt)||!this.parent())return!1}}next(lt=!0){return this.move(1,lt)}prev(lt=!0){return this.move(-1,lt)}moveTo(lt,dt=0){for(;(this.from==this.to||(dt<1?this.from>=lt:this.from>lt)||(dt>-1?this.to<=lt:this.to<lt))&&this.parent(););for(;this.enterChild(1,lt,dt););return this}get node(){if(!this.buffer)return this._tree;let lt=this.bufferNode,dt=null,vt=0;if(lt&&lt.context==this.buffer)e:for(let St=this.index,Et=this.stack.length;Et>=0;){for(let Ct=lt;Ct;Ct=Ct._parent)if(Ct.index==St){if(St==this.index)return Ct;dt=Ct,vt=Et+1;break e}St=this.stack[--Et]}for(let St=vt;St<this.stack.length;St++)dt=new BufferNode(this.buffer,dt,this.stack[St]);return this.bufferNode=new BufferNode(this.buffer,dt,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(lt,dt){for(let vt=0;;){let St=!1;if(this.type.isAnonymous||lt(this)!==!1){if(this.firstChild()){vt++;continue}this.type.isAnonymous||(St=!0)}for(;St&&dt&&dt(this),St=this.type.isAnonymous,!this.nextSibling();){if(!vt)return;this.parent(),vt--,St=!0}}}matchContext(lt){if(!this.buffer)return matchNodeContext(this.node,lt);let{buffer:dt}=this.buffer,{types:vt}=dt.set;for(let St=lt.length-1,Et=this.stack.length-1;St>=0;Et--){if(Et<0)return matchNodeContext(this.node,lt,St);let Ct=vt[dt.buffer[this.stack[Et]]];if(!Ct.isAnonymous){if(lt[St]&&lt[St]!=Ct.name)return!1;St--}}return!0}}function hasChild(ft){return ft.children.some(lt=>lt instanceof TreeBuffer||!lt.type.isAnonymous||hasChild(lt))}function buildTree(ft){var lt;let{buffer:dt,nodeSet:vt,maxBufferLength:St=DefaultBufferLength,reused:Et=[],minRepeatType:Ct=vt.types.length}=ft,At=Array.isArray(dt)?new FlatBufferCursor(dt,dt.length):dt,Rt=vt.types,Dt=0,Nt=0;function Ft(gn,vn,bn,$n,Tn){let{id:In,start:Pn,end:zn,size:An}=At,Gn=Nt;for(;An<0;)if(At.next(),An==-1){let Un=Et[In];bn.push(Un),$n.push(Pn-gn);return}else if(An==-3){Dt=In;return}else if(An==-4){Nt=In;return}else throw new RangeError(`Unrecognized record size: ${An}`);let xn=Rt[In],Qn,qn,nr=Pn-gn;if(zn-Pn<=St&&(qn=Kt(At.pos-vn,Tn))){let Un=new Uint16Array(qn.size-qn.skip),Nn=At.pos-qn.size,jn=Un.length;for(;At.pos>Nn;)jn=cn(qn.start,Un,jn);Qn=new TreeBuffer(Un,zn-qn.start,vt),nr=qn.start-gn}else{let Un=At.pos-An;At.next();let Nn=[],jn=[],Ln=In>=Ct?In:-1,Cn=0,tr=zn;for(;At.pos>Un;)Ln>=0&&At.id==Ln&&At.size>=0?(At.end<=tr-St&&(Wt(Nn,jn,Pn,Cn,At.end,tr,Ln,Gn),Cn=Nn.length,tr=At.end),At.next()):Ft(Pn,Un,Nn,jn,Ln);if(Ln>=0&&Cn>0&&Cn<Nn.length&&Wt(Nn,jn,Pn,Cn,Pn,tr,Ln,Gn),Nn.reverse(),jn.reverse(),Ln>-1&&Cn>0){let ir=Ut(xn);Qn=balanceRange(xn,Nn,jn,0,Nn.length,0,zn-Pn,ir,ir)}else Qn=Zt(xn,Nn,jn,zn-Pn,Gn-zn)}bn.push(Qn),$n.push(nr)}function Ut(gn){return(vn,bn,$n)=>{let Tn=0,In=vn.length-1,Pn,zn;if(In>=0&&(Pn=vn[In])instanceof Tree){if(!In&&Pn.type==gn&&Pn.length==$n)return Pn;(zn=Pn.prop(NodeProp.lookAhead))&&(Tn=bn[In]+Pn.length+zn)}return Zt(gn,vn,bn,$n,Tn)}}function Wt(gn,vn,bn,$n,Tn,In,Pn,zn){let An=[],Gn=[];for(;gn.length>$n;)An.push(gn.pop()),Gn.push(vn.pop()+bn-Tn);gn.push(Zt(vt.types[Pn],An,Gn,In-Tn,zn-In)),vn.push(Tn-bn)}function Zt(gn,vn,bn,$n,Tn=0,In){if(Dt){let Pn=[NodeProp.contextHash,Dt];In=In?[Pn].concat(In):[Pn]}if(Tn>25){let Pn=[NodeProp.lookAhead,Tn];In=In?[Pn].concat(In):[Pn]}return new Tree(gn,vn,bn,$n,In)}function Kt(gn,vn){let bn=At.fork(),$n=0,Tn=0,In=0,Pn=bn.end-St,zn={size:0,start:0,skip:0};e:for(let An=bn.pos-gn;bn.pos>An;){let Gn=bn.size;if(bn.id==vn&&Gn>=0){zn.size=$n,zn.start=Tn,zn.skip=In,In+=4,$n+=4,bn.next();continue}let xn=bn.pos-Gn;if(Gn<0||xn<An||bn.start<Pn)break;let Qn=bn.id>=Ct?4:0,qn=bn.start;for(bn.next();bn.pos>xn;){if(bn.size<0)if(bn.size==-3)Qn+=4;else break e;else bn.id>=Ct&&(Qn+=4);bn.next()}Tn=qn,$n+=Gn,In+=Qn}return(vn<0||$n==gn)&&(zn.size=$n,zn.start=Tn,zn.skip=In),zn.size>4?zn:void 0}function cn(gn,vn,bn){let{id:$n,start:Tn,end:In,size:Pn}=At;if(At.next(),Pn>=0&&$n<Ct){let zn=bn;if(Pn>4){let An=At.pos-(Pn-4);for(;At.pos>An;)bn=cn(gn,vn,bn)}vn[--bn]=zn,vn[--bn]=In-gn,vn[--bn]=Tn-gn,vn[--bn]=$n}else Pn==-3?Dt=$n:Pn==-4&&(Nt=$n);return bn}let hn=[],dn=[];for(;At.pos>0;)Ft(ft.start||0,ft.bufferStart||0,hn,dn,-1);let pn=(lt=ft.length)!==null&&lt!==void 0?lt:hn.length?dn[0]+hn[0].length:0;return new Tree(Rt[ft.topID],hn.reverse(),dn.reverse(),pn)}const nodeSizeCache=new WeakMap;function nodeSize(ft,lt){if(!ft.isAnonymous||lt instanceof TreeBuffer||lt.type!=ft)return 1;let dt=nodeSizeCache.get(lt);if(dt==null){dt=1;for(let vt of lt.children){if(vt.type!=ft||!(vt instanceof Tree)){dt=1;break}dt+=nodeSize(ft,vt)}nodeSizeCache.set(lt,dt)}return dt}function balanceRange(ft,lt,dt,vt,St,Et,Ct,At,Rt){let Dt=0;for(let Zt=vt;Zt<St;Zt++)Dt+=nodeSize(ft,lt[Zt]);let Nt=Math.ceil(Dt*1.5/8),Ft=[],Ut=[];function Wt(Zt,Kt,cn,hn,dn){for(let pn=cn;pn<hn;){let gn=pn,vn=Kt[pn],bn=nodeSize(ft,Zt[pn]);for(pn++;pn<hn;pn++){let $n=nodeSize(ft,Zt[pn]);if(bn+$n>=Nt)break;bn+=$n}if(pn==gn+1){if(bn>Nt){let $n=Zt[gn];Wt($n.children,$n.positions,0,$n.children.length,Kt[gn]+dn);continue}Ft.push(Zt[gn])}else{let $n=Kt[pn-1]+Zt[pn-1].length-vn;Ft.push(balanceRange(ft,Zt,Kt,gn,pn,vn,$n,null,Rt))}Ut.push(vn+dn-Et)}}return Wt(lt,dt,vt,St,0),(At||Rt)(Ft,Ut,Ct)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(lt,dt,vt){let St=this.map.get(lt);St||this.map.set(lt,St=new Map),St.set(dt,vt)}getBuffer(lt,dt){let vt=this.map.get(lt);return vt&&vt.get(dt)}set(lt,dt){lt instanceof BufferNode?this.setBuffer(lt.context.buffer,lt.index,dt):lt instanceof TreeNode&&this.map.set(lt.tree,dt)}get(lt){return lt instanceof BufferNode?this.getBuffer(lt.context.buffer,lt.index):lt instanceof TreeNode?this.map.get(lt.tree):void 0}cursorSet(lt,dt){lt.buffer?this.setBuffer(lt.buffer.buffer,lt.index,dt):this.map.set(lt.tree,dt)}cursorGet(lt){return lt.buffer?this.getBuffer(lt.buffer.buffer,lt.index):this.map.get(lt.tree)}}class TreeFragment{constructor(lt,dt,vt,St,Et=!1,Ct=!1){this.from=lt,this.to=dt,this.tree=vt,this.offset=St,this.open=(Et?1:0)|(Ct?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(lt,dt=[],vt=!1){let St=[new TreeFragment(0,lt.length,lt,0,!1,vt)];for(let Et of dt)Et.to>lt.length&&St.push(Et);return St}static applyChanges(lt,dt,vt=128){if(!dt.length)return lt;let St=[],Et=1,Ct=lt.length?lt[0]:null;for(let At=0,Rt=0,Dt=0;;At++){let Nt=At<dt.length?dt[At]:null,Ft=Nt?Nt.fromA:1e9;if(Ft-Rt>=vt)for(;Ct&&Ct.from<Ft;){let Ut=Ct;if(Rt>=Ut.from||Ft<=Ut.to||Dt){let Wt=Math.max(Ut.from,Rt)-Dt,Zt=Math.min(Ut.to,Ft)-Dt;Ut=Wt>=Zt?null:new TreeFragment(Wt,Zt,Ut.tree,Ut.offset+Dt,At>0,!!Nt)}if(Ut&&St.push(Ut),Ct.to>Ft)break;Ct=Et<lt.length?lt[Et++]:null}if(!Nt)break;Rt=Nt.toA,Dt=Nt.toA-Nt.toB}return St}}class Parser{startParse(lt,dt,vt){return typeof lt=="string"&&(lt=new StringInput(lt)),vt=vt?vt.length?vt.map(St=>new Range$1(St.from,St.to)):[new Range$1(0,0)]:[new Range$1(0,lt.length)],this.createParse(lt,dt||[],vt)}parse(lt,dt,vt){let St=this.startParse(lt,dt,vt);for(;;){let Et=St.advance();if(Et)return Et}}}class StringInput{constructor(lt){this.string=lt}get length(){return this.string.length}chunk(lt){return this.string.slice(lt)}get lineChunks(){return!1}read(lt,dt){return this.string.slice(lt,dt)}}new NodeProp({perNode:!0});class Stack{constructor(lt,dt,vt,St,Et,Ct,At,Rt,Dt,Nt=0,Ft){this.p=lt,this.stack=dt,this.state=vt,this.reducePos=St,this.pos=Et,this.score=Ct,this.buffer=At,this.bufferBase=Rt,this.curContext=Dt,this.lookAhead=Nt,this.parent=Ft}toString(){return`[${this.stack.filter((lt,dt)=>dt%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(lt,dt,vt=0){let St=lt.parser.context;return new Stack(lt,[],dt,vt,vt,0,[],0,St?new StackContext(St,St.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(lt,dt){this.stack.push(this.state,dt,this.bufferBase+this.buffer.length),this.state=lt}reduce(lt){var dt;let vt=lt>>19,St=lt&65535,{parser:Et}=this.p,Ct=Et.dynamicPrecedence(St);if(Ct&&(this.score+=Ct),vt==0){this.pushState(Et.getGoto(this.state,St,!0),this.reducePos),St<Et.minRepeatTerm&&this.storeNode(St,this.reducePos,this.reducePos,4,!0),this.reduceContext(St,this.reducePos);return}let At=this.stack.length-(vt-1)*3-(lt&262144?6:0),Rt=At?this.stack[At-2]:this.p.ranges[0].from,Dt=this.reducePos-Rt;Dt>=2e3&&!(!((dt=this.p.parser.nodeSet.types[St])===null||dt===void 0)&&dt.isAnonymous)&&(Rt==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Dt):this.p.lastBigReductionSize<Dt&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=Rt,this.p.lastBigReductionSize=Dt));let Nt=At?this.stack[At-1]:0,Ft=this.bufferBase+this.buffer.length-Nt;if(St<Et.minRepeatTerm||lt&131072){let Ut=Et.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(St,Rt,Ut,Ft+4,!0)}if(lt&262144)this.state=this.stack[At];else{let Ut=this.stack[At-3];this.state=Et.getGoto(Ut,St,!0)}for(;this.stack.length>At;)this.stack.pop();this.reduceContext(St,Rt)}storeNode(lt,dt,vt,St=4,Et=!1){if(lt==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let Ct=this,At=this.buffer.length;if(At==0&&Ct.parent&&(At=Ct.bufferBase-Ct.parent.bufferBase,Ct=Ct.parent),At>0&&Ct.buffer[At-4]==0&&Ct.buffer[At-1]>-1){if(dt==vt)return;if(Ct.buffer[At-2]>=dt){Ct.buffer[At-2]=vt;return}}}if(!Et||this.pos==vt)this.buffer.push(lt,dt,vt,St);else{let Ct=this.buffer.length;if(Ct>0&&this.buffer[Ct-4]!=0)for(;Ct>0&&this.buffer[Ct-2]>vt;)this.buffer[Ct]=this.buffer[Ct-4],this.buffer[Ct+1]=this.buffer[Ct-3],this.buffer[Ct+2]=this.buffer[Ct-2],this.buffer[Ct+3]=this.buffer[Ct-1],Ct-=4,St>4&&(St-=4);this.buffer[Ct]=lt,this.buffer[Ct+1]=dt,this.buffer[Ct+2]=vt,this.buffer[Ct+3]=St}}shift(lt,dt,vt){let St=this.pos;if(lt&131072)this.pushState(lt&65535,this.pos);else if(lt&262144)this.pos=vt,this.shiftContext(dt,St),dt<=this.p.parser.maxNode&&this.buffer.push(dt,St,vt,4);else{let Et=lt,{parser:Ct}=this.p;(vt>this.pos||dt<=Ct.maxNode)&&(this.pos=vt,Ct.stateFlag(Et,1)||(this.reducePos=vt)),this.pushState(Et,St),this.shiftContext(dt,St),dt<=Ct.maxNode&&this.buffer.push(dt,St,vt,4)}}apply(lt,dt,vt){lt&65536?this.reduce(lt):this.shift(lt,dt,vt)}useNode(lt,dt){let vt=this.p.reused.length-1;(vt<0||this.p.reused[vt]!=lt)&&(this.p.reused.push(lt),vt++);let St=this.pos;this.reducePos=this.pos=St+lt.length,this.pushState(dt,St),this.buffer.push(vt,St,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,lt,this,this.p.stream.reset(this.pos-lt.length)))}split(){let lt=this,dt=lt.buffer.length;for(;dt>0&&lt.buffer[dt-2]>lt.reducePos;)dt-=4;let vt=lt.buffer.slice(dt),St=lt.bufferBase+dt;for(;lt&&St==lt.bufferBase;)lt=lt.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,vt,St,this.curContext,this.lookAhead,lt)}recoverByDelete(lt,dt){let vt=lt<=this.p.parser.maxNode;vt&&this.storeNode(lt,this.pos,dt,4),this.storeNode(0,this.pos,dt,vt?8:4),this.pos=this.reducePos=dt,this.score-=190}canShift(lt){for(let dt=new SimulatedStack(this);;){let vt=this.p.parser.stateSlot(dt.state,4)||this.p.parser.hasAction(dt.state,lt);if(vt==0)return!1;if(!(vt&65536))return!0;dt.reduce(vt)}}recoverByInsert(lt){if(this.stack.length>=300)return[];let dt=this.p.parser.nextStates(this.state);if(dt.length>8||this.stack.length>=120){let St=[];for(let Et=0,Ct;Et<dt.length;Et+=2)(Ct=dt[Et+1])!=this.state&&this.p.parser.hasAction(Ct,lt)&&St.push(dt[Et],Ct);if(this.stack.length<120)for(let Et=0;St.length<8&&Et<dt.length;Et+=2){let Ct=dt[Et+1];St.some((At,Rt)=>Rt&1&&At==Ct)||St.push(dt[Et],Ct)}dt=St}let vt=[];for(let St=0;St<dt.length&&vt.length<4;St+=2){let Et=dt[St+1];if(Et==this.state)continue;let Ct=this.split();Ct.pushState(Et,this.pos),Ct.storeNode(0,Ct.pos,Ct.pos,4,!0),Ct.shiftContext(dt[St],this.pos),Ct.score-=200,vt.push(Ct)}return vt}forceReduce(){let lt=this.p.parser.stateSlot(this.state,5);if(!(lt&65536))return!1;let{parser:dt}=this.p;if(!dt.validAction(this.state,lt)){let vt=lt>>19,St=lt&65535,Et=this.stack.length-vt*3;if(Et<0||dt.getGoto(this.stack[Et],St,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(lt),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:lt}=this.p;return lt.data[lt.stateSlot(this.state,1)]==65535&&!lt.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(lt){if(this.state!=lt.state||this.stack.length!=lt.stack.length)return!1;for(let dt=0;dt<this.stack.length;dt+=3)if(this.stack[dt]!=lt.stack[dt])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(lt){return this.p.parser.dialect.flags[lt]}shiftContext(lt,dt){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,lt,this,this.p.stream.reset(dt)))}reduceContext(lt,dt){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,lt,this,this.p.stream.reset(dt)))}emitContext(){let lt=this.buffer.length-1;(lt<0||this.buffer[lt]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let lt=this.buffer.length-1;(lt<0||this.buffer[lt]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(lt){if(lt!=this.curContext.context){let dt=new StackContext(this.curContext.tracker,lt);dt.hash!=this.curContext.hash&&this.emitContext(),this.curContext=dt}}setLookAhead(lt){lt>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=lt)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(lt,dt){this.tracker=lt,this.context=dt,this.hash=lt.strict?lt.hash(dt):0}}var Recover;(function(ft){ft[ft.Insert=200]="Insert",ft[ft.Delete=190]="Delete",ft[ft.Reduce=100]="Reduce",ft[ft.MaxNext=4]="MaxNext",ft[ft.MaxInsertStackDepth=300]="MaxInsertStackDepth",ft[ft.DampenInsertStackDepth=120]="DampenInsertStackDepth",ft[ft.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(lt){this.start=lt,this.state=lt.state,this.stack=lt.stack,this.base=this.stack.length}reduce(lt){let dt=lt&65535,vt=lt>>19;vt==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(vt-1)*3;let St=this.start.p.parser.getGoto(this.stack[this.base-3],dt,!0);this.state=St}}class StackBufferCursor{constructor(lt,dt,vt){this.stack=lt,this.pos=dt,this.index=vt,this.buffer=lt.buffer,this.index==0&&this.maybeNext()}static create(lt,dt=lt.bufferBase+lt.buffer.length){return new StackBufferCursor(lt,dt,dt-lt.bufferBase)}maybeNext(){let lt=this.stack.parent;lt!=null&&(this.index=this.stack.bufferBase-lt.bufferBase,this.stack=lt,this.buffer=lt.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(ft,lt=Uint16Array){if(typeof ft!="string")return ft;let dt=null;for(let vt=0,St=0;vt<ft.length;){let Et=0;for(;;){let Ct=ft.charCodeAt(vt++),At=!1;if(Ct==126){Et=65535;break}Ct>=92&&Ct--,Ct>=34&&Ct--;let Rt=Ct-32;if(Rt>=46&&(Rt-=46,At=!0),Et+=Rt,At)break;Et*=46}dt?dt[St++]=Et:dt=new lt(Et)}return dt}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(lt,dt){this.input=lt,this.ranges=dt,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=dt[0].from,this.range=dt[0],this.end=dt[dt.length-1].to,this.readNext()}resolveOffset(lt,dt){let vt=this.range,St=this.rangeIndex,Et=this.pos+lt;for(;Et<vt.from;){if(!St)return null;let Ct=this.ranges[--St];Et-=vt.from-Ct.to,vt=Ct}for(;dt<0?Et>vt.to:Et>=vt.to;){if(St==this.ranges.length-1)return null;let Ct=this.ranges[++St];Et+=Ct.from-vt.to,vt=Ct}return Et}clipPos(lt){if(lt>=this.range.from&&lt<this.range.to)return lt;for(let dt of this.ranges)if(dt.to>lt)return Math.max(lt,dt.from);return this.end}peek(lt){let dt=this.chunkOff+lt,vt,St;if(dt>=0&&dt<this.chunk.length)vt=this.pos+lt,St=this.chunk.charCodeAt(dt);else{let Et=this.resolveOffset(lt,1);if(Et==null)return-1;if(vt=Et,vt>=this.chunk2Pos&&vt<this.chunk2Pos+this.chunk2.length)St=this.chunk2.charCodeAt(vt-this.chunk2Pos);else{let Ct=this.rangeIndex,At=this.range;for(;At.to<=vt;)At=this.ranges[++Ct];this.chunk2=this.input.chunk(this.chunk2Pos=vt),vt+this.chunk2.length>At.to&&(this.chunk2=this.chunk2.slice(0,At.to-vt)),St=this.chunk2.charCodeAt(0)}}return vt>=this.token.lookAhead&&(this.token.lookAhead=vt+1),St}acceptToken(lt,dt=0){let vt=dt?this.resolveOffset(dt,-1):this.pos;if(vt==null||vt<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=lt,this.token.end=vt}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:lt,chunkPos:dt}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=lt,this.chunk2Pos=dt,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let lt=this.input.chunk(this.pos),dt=this.pos+lt.length;this.chunk=dt>this.range.to?lt.slice(0,this.range.to-this.pos):lt,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(lt=1){for(this.chunkOff+=lt;this.pos+lt>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();lt-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=lt,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(lt,dt){if(dt?(this.token=dt,dt.start=lt,dt.lookAhead=lt+1,dt.value=dt.extended=-1):this.token=nullToken,this.pos!=lt){if(this.pos=lt,lt==this.end)return this.setDone(),this;for(;lt<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;lt>=this.range.to;)this.range=this.ranges[++this.rangeIndex];lt>=this.chunkPos&&lt<this.chunkPos+this.chunk.length?this.chunkOff=lt-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(lt,dt){if(lt>=this.chunkPos&&dt<=this.chunkPos+this.chunk.length)return this.chunk.slice(lt-this.chunkPos,dt-this.chunkPos);if(lt>=this.chunk2Pos&&dt<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(lt-this.chunk2Pos,dt-this.chunk2Pos);if(lt>=this.range.from&&dt<=this.range.to)return this.input.read(lt,dt);let vt="";for(let St of this.ranges){if(St.from>=dt)break;St.to>lt&&(vt+=this.input.read(Math.max(St.from,lt),Math.min(St.to,dt)))}return vt}}class TokenGroup{constructor(lt,dt){this.data=lt,this.id=dt}token(lt,dt){let{parser:vt}=dt.p;readToken(this.data,lt,dt,this.id,vt.data,vt.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(lt,dt,vt){this.precTable=dt,this.elseToken=vt,this.data=typeof lt=="string"?decodeArray(lt):lt}token(lt,dt){let vt=lt.pos,St;for(;St=lt.pos,readToken(this.data,lt,dt,0,this.data,this.precTable),!(lt.token.value>-1);){if(this.elseToken==null)return;if(lt.next<0)break;lt.advance(),lt.reset(St+1,lt.token)}St>vt&&(lt.reset(vt,lt.token),lt.acceptToken(this.elseToken,St-vt))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(lt,dt={}){this.token=lt,this.contextual=!!dt.contextual,this.fallback=!!dt.fallback,this.extend=!!dt.extend}}function readToken(ft,lt,dt,vt,St,Et){let Ct=0,At=1<<vt,{dialect:Rt}=dt.p.parser;e:for(;At&ft[Ct];){let Dt=ft[Ct+1];for(let Wt=Ct+3;Wt<Dt;Wt+=2)if((ft[Wt+1]&At)>0){let Zt=ft[Wt];if(Rt.allows(Zt)&&(lt.token.value==-1||lt.token.value==Zt||overrides(Zt,lt.token.value,St,Et))){lt.acceptToken(Zt);break}}let Nt=lt.next,Ft=0,Ut=ft[Ct+2];if(lt.next<0&&Ut>Ft&&ft[Dt+Ut*3-3]==65535&&ft[Dt+Ut*3-3]==65535){Ct=ft[Dt+Ut*3-1];continue e}for(;Ft<Ut;){let Wt=Ft+Ut>>1,Zt=Dt+Wt+(Wt<<1),Kt=ft[Zt],cn=ft[Zt+1]||65536;if(Nt<Kt)Ut=Wt;else if(Nt>=cn)Ft=Wt+1;else{Ct=ft[Zt+2],lt.advance();continue e}}break}}function findOffset(ft,lt,dt){for(let vt=lt,St;(St=ft[vt])!=65535;vt++)if(St==dt)return vt-lt;return-1}function overrides(ft,lt,dt,vt){let St=findOffset(dt,vt,lt);return St<0||findOffset(dt,vt,ft)<St}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(ft){ft[ft.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(ft,lt,dt){let vt=ft.cursor(IterMode.IncludeAnonymous);for(vt.moveTo(lt);;)if(!(dt<0?vt.childBefore(lt):vt.childAfter(lt)))for(;;){if((dt<0?vt.to<lt:vt.from>lt)&&!vt.type.isError)return dt<0?Math.max(0,Math.min(vt.to-1,lt-25)):Math.min(ft.length,Math.max(vt.from+1,lt+25));if(dt<0?vt.prevSibling():vt.nextSibling())break;if(!vt.parent())return dt<0?0:ft.length}}class FragmentCursor{constructor(lt,dt){this.fragments=lt,this.nodeSet=dt,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let lt=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(lt){for(this.safeFrom=lt.openStart?cutAt(lt.tree,lt.from+lt.offset,1)-lt.offset:lt.from,this.safeTo=lt.openEnd?cutAt(lt.tree,lt.to+lt.offset,-1)-lt.offset:lt.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(lt.tree),this.start.push(-lt.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(lt){if(lt<this.nextStart)return null;for(;this.fragment&&this.safeTo<=lt;)this.nextFragment();if(!this.fragment)return null;for(;;){let dt=this.trees.length-1;if(dt<0)return this.nextFragment(),null;let vt=this.trees[dt],St=this.index[dt];if(St==vt.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let Et=vt.children[St],Ct=this.start[dt]+vt.positions[St];if(Ct>lt)return this.nextStart=Ct,null;if(Et instanceof Tree){if(Ct==lt){if(Ct<this.safeFrom)return null;let At=Ct+Et.length;if(At<=this.safeTo){let Rt=Et.prop(NodeProp.lookAhead);if(!Rt||At+Rt<this.fragment.to)return Et}}this.index[dt]++,Ct+Et.length>=Math.max(this.safeFrom,lt)&&(this.trees.push(Et),this.start.push(Ct),this.index.push(0))}else this.index[dt]++,this.nextStart=Ct+Et.length}}}class TokenCache{constructor(lt,dt){this.stream=dt,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=lt.tokenizers.map(vt=>new CachedToken)}getActions(lt){let dt=0,vt=null,{parser:St}=lt.p,{tokenizers:Et}=St,Ct=St.stateSlot(lt.state,3),At=lt.curContext?lt.curContext.hash:0,Rt=0;for(let Dt=0;Dt<Et.length;Dt++){if(!(1<<Dt&Ct))continue;let Nt=Et[Dt],Ft=this.tokens[Dt];if(!(vt&&!Nt.fallback)&&((Nt.contextual||Ft.start!=lt.pos||Ft.mask!=Ct||Ft.context!=At)&&(this.updateCachedToken(Ft,Nt,lt),Ft.mask=Ct,Ft.context=At),Ft.lookAhead>Ft.end+25&&(Rt=Math.max(Ft.lookAhead,Rt)),Ft.value!=0)){let Ut=dt;if(Ft.extended>-1&&(dt=this.addActions(lt,Ft.extended,Ft.end,dt)),dt=this.addActions(lt,Ft.value,Ft.end,dt),!Nt.extend&&(vt=Ft,dt>Ut))break}}for(;this.actions.length>dt;)this.actions.pop();return Rt&&lt.setLookAhead(Rt),!vt&&lt.pos==this.stream.end&&(vt=new CachedToken,vt.value=lt.p.parser.eofTerm,vt.start=vt.end=lt.pos,dt=this.addActions(lt,vt.value,vt.end,dt)),this.mainToken=vt,this.actions}getMainToken(lt){if(this.mainToken)return this.mainToken;let dt=new CachedToken,{pos:vt,p:St}=lt;return dt.start=vt,dt.end=Math.min(vt+1,St.stream.end),dt.value=vt==St.stream.end?St.parser.eofTerm:0,dt}updateCachedToken(lt,dt,vt){let St=this.stream.clipPos(vt.pos);if(dt.token(this.stream.reset(St,lt),vt),lt.value>-1){let{parser:Et}=vt.p;for(let Ct=0;Ct<Et.specialized.length;Ct++)if(Et.specialized[Ct]==lt.value){let At=Et.specializers[Ct](this.stream.read(lt.start,lt.end),vt);if(At>=0&&vt.p.parser.dialect.allows(At>>1)){At&1?lt.extended=At>>1:lt.value=At>>1;break}}}else lt.value=0,lt.end=this.stream.clipPos(St+1)}putAction(lt,dt,vt,St){for(let Et=0;Et<St;Et+=3)if(this.actions[Et]==lt)return St;return this.actions[St++]=lt,this.actions[St++]=dt,this.actions[St++]=vt,St}addActions(lt,dt,vt,St){let{state:Et}=lt,{parser:Ct}=lt.p,{data:At}=Ct;for(let Rt=0;Rt<2;Rt++)for(let Dt=Ct.stateSlot(Et,Rt?2:1);;Dt+=3){if(At[Dt]==65535)if(At[Dt+1]==1)Dt=pair(At,Dt+2);else{St==0&&At[Dt+1]==2&&(St=this.putAction(pair(At,Dt+2),dt,vt,St));break}At[Dt]==dt&&(St=this.putAction(pair(At,Dt+1),dt,vt,St))}return St}}var Rec;(function(ft){ft[ft.Distance=5]="Distance",ft[ft.MaxRemainingPerStep=3]="MaxRemainingPerStep",ft[ft.MinBufferLengthPrune=500]="MinBufferLengthPrune",ft[ft.ForceReduceLimit=10]="ForceReduceLimit",ft[ft.CutDepth=15e3]="CutDepth",ft[ft.CutTo=9e3]="CutTo",ft[ft.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",ft[ft.MaxStackCount=12]="MaxStackCount"})(Rec||(Rec={}));class Parse{constructor(lt,dt,vt,St){this.parser=lt,this.input=dt,this.ranges=St,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(dt,St),this.tokens=new TokenCache(lt,this.stream),this.topTerm=lt.top[1];let{from:Et}=St[0];this.stacks=[Stack.start(this,lt.top[0],Et)],this.fragments=vt.length&&this.stream.end-Et>lt.bufferLength*4?new FragmentCursor(vt,lt.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let lt=this.stacks,dt=this.minStackPos,vt=this.stacks=[],St,Et;if(this.bigReductionCount>300&&lt.length==1){let[Ct]=lt;for(;Ct.forceReduce()&&Ct.stack.length&&Ct.stack[Ct.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let Ct=0;Ct<lt.length;Ct++){let At=lt[Ct];for(;;){if(this.tokens.mainToken=null,At.pos>dt)vt.push(At);else{if(this.advanceStack(At,vt,lt))continue;{St||(St=[],Et=[]),St.push(At);let Rt=this.tokens.getMainToken(At);Et.push(Rt.value,Rt.end)}}break}}if(!vt.length){let Ct=St&&findFinished(St);if(Ct)return this.stackToTree(Ct);if(this.parser.strict)throw verbose&&St&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+dt);this.recovering||(this.recovering=5)}if(this.recovering&&St){let Ct=this.stoppedAt!=null&&St[0].pos>this.stoppedAt?St[0]:this.runRecovery(St,Et,vt);if(Ct)return this.stackToTree(Ct.forceAll())}if(this.recovering){let Ct=this.recovering==1?1:this.recovering*3;if(vt.length>Ct)for(vt.sort((At,Rt)=>Rt.score-At.score);vt.length>Ct;)vt.pop();vt.some(At=>At.reducePos>dt)&&this.recovering--}else if(vt.length>1){e:for(let Ct=0;Ct<vt.length-1;Ct++){let At=vt[Ct];for(let Rt=Ct+1;Rt<vt.length;Rt++){let Dt=vt[Rt];if(At.sameState(Dt)||At.buffer.length>500&&Dt.buffer.length>500)if((At.score-Dt.score||At.buffer.length-Dt.buffer.length)>0)vt.splice(Rt--,1);else{vt.splice(Ct--,1);continue e}}}vt.length>12&&vt.splice(12,vt.length-12)}this.minStackPos=vt[0].pos;for(let Ct=1;Ct<vt.length;Ct++)vt[Ct].pos<this.minStackPos&&(this.minStackPos=vt[Ct].pos);return null}stopAt(lt){if(this.stoppedAt!=null&&this.stoppedAt<lt)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=lt}advanceStack(lt,dt,vt){let St=lt.pos,{parser:Et}=this,Ct=verbose?this.stackID(lt)+" -> ":"";if(this.stoppedAt!=null&&St>this.stoppedAt)return lt.forceReduce()?lt:null;if(this.fragments){let Dt=lt.curContext&&lt.curContext.tracker.strict,Nt=Dt?lt.curContext.hash:0;for(let Ft=this.fragments.nodeAt(St);Ft;){let Ut=this.parser.nodeSet.types[Ft.type.id]==Ft.type?Et.getGoto(lt.state,Ft.type.id):-1;if(Ut>-1&&Ft.length&&(!Dt||(Ft.prop(NodeProp.contextHash)||0)==Nt))return lt.useNode(Ft,Ut),verbose&&console.log(Ct+this.stackID(lt)+` (via reuse of ${Et.getName(Ft.type.id)})`),!0;if(!(Ft instanceof Tree)||Ft.children.length==0||Ft.positions[0]>0)break;let Wt=Ft.children[0];if(Wt instanceof Tree&&Ft.positions[0]==0)Ft=Wt;else break}}let At=Et.stateSlot(lt.state,4);if(At>0)return lt.reduce(At),verbose&&console.log(Ct+this.stackID(lt)+` (via always-reduce ${Et.getName(At&65535)})`),!0;if(lt.stack.length>=15e3)for(;lt.stack.length>9e3&&lt.forceReduce(););let Rt=this.tokens.getActions(lt);for(let Dt=0;Dt<Rt.length;){let Nt=Rt[Dt++],Ft=Rt[Dt++],Ut=Rt[Dt++],Wt=Dt==Rt.length||!vt,Zt=Wt?lt:lt.split();if(Zt.apply(Nt,Ft,Ut),verbose&&console.log(Ct+this.stackID(Zt)+` (via ${Nt&65536?`reduce of ${Et.getName(Nt&65535)}`:"shift"} for ${Et.getName(Ft)} @ ${St}${Zt==lt?"":", split"})`),Wt)return!0;Zt.pos>St?dt.push(Zt):vt.push(Zt)}return!1}advanceFully(lt,dt){let vt=lt.pos;for(;;){if(!this.advanceStack(lt,null,null))return!1;if(lt.pos>vt)return pushStackDedup(lt,dt),!0}}runRecovery(lt,dt,vt){let St=null,Et=!1;for(let Ct=0;Ct<lt.length;Ct++){let At=lt[Ct],Rt=dt[Ct<<1],Dt=dt[(Ct<<1)+1],Nt=verbose?this.stackID(At)+" -> ":"";if(At.deadEnd&&(Et||(Et=!0,At.restart(),verbose&&console.log(Nt+this.stackID(At)+" (restarted)"),this.advanceFully(At,vt))))continue;let Ft=At.split(),Ut=Nt;for(let Wt=0;Ft.forceReduce()&&Wt<10&&(verbose&&console.log(Ut+this.stackID(Ft)+" (via force-reduce)"),!this.advanceFully(Ft,vt));Wt++)verbose&&(Ut=this.stackID(Ft)+" -> ");for(let Wt of At.recoverByInsert(Rt))verbose&&console.log(Nt+this.stackID(Wt)+" (via recover-insert)"),this.advanceFully(Wt,vt);this.stream.end>At.pos?(Dt==At.pos&&(Dt++,Rt=0),At.recoverByDelete(Rt,Dt),verbose&&console.log(Nt+this.stackID(At)+` (via recover-delete ${this.parser.getName(Rt)})`),pushStackDedup(At,vt)):(!St||St.score<At.score)&&(St=At)}return St}stackToTree(lt){return lt.close(),Tree.build({buffer:StackBufferCursor.create(lt),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:lt.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(lt){let dt=(stackIDs||(stackIDs=new WeakMap)).get(lt);return dt||stackIDs.set(lt,dt=String.fromCodePoint(this.nextStackID++)),dt+lt}}function pushStackDedup(ft,lt){for(let dt=0;dt<lt.length;dt++){let vt=lt[dt];if(vt.pos==ft.pos&&vt.sameState(ft)){lt[dt].score<ft.score&&(lt[dt]=ft);return}}lt.push(ft)}class Dialect{constructor(lt,dt,vt){this.source=lt,this.flags=dt,this.disabled=vt}allows(lt){return!this.disabled||this.disabled[lt]==0}}const id=ft=>ft;class ContextTracker{constructor(lt){this.start=lt.start,this.shift=lt.shift||id,this.reduce=lt.reduce||id,this.reuse=lt.reuse||id,this.hash=lt.hash||(()=>0),this.strict=lt.strict!==!1}}class LRParser extends Parser{constructor(lt){if(super(),this.wrappers=[],lt.version!=14)throw new RangeError(`Parser version (${lt.version}) doesn't match runtime version (14)`);let dt=lt.nodeNames.split(" ");this.minRepeatTerm=dt.length;for(let At=0;At<lt.repeatNodeCount;At++)dt.push("");let vt=Object.keys(lt.topRules).map(At=>lt.topRules[At][1]),St=[];for(let At=0;At<dt.length;At++)St.push([]);function Et(At,Rt,Dt){St[At].push([Rt,Rt.deserialize(String(Dt))])}if(lt.nodeProps)for(let At of lt.nodeProps){let Rt=At[0];typeof Rt=="string"&&(Rt=NodeProp[Rt]);for(let Dt=1;Dt<At.length;){let Nt=At[Dt++];if(Nt>=0)Et(Nt,Rt,At[Dt++]);else{let Ft=At[Dt+-Nt];for(let Ut=-Nt;Ut>0;Ut--)Et(At[Dt++],Rt,Ft);Dt++}}}this.nodeSet=new NodeSet(dt.map((At,Rt)=>NodeType.define({name:Rt>=this.minRepeatTerm?void 0:At,id:Rt,props:St[Rt],top:vt.indexOf(Rt)>-1,error:Rt==0,skipped:lt.skippedNodes&&lt.skippedNodes.indexOf(Rt)>-1}))),lt.propSources&&(this.nodeSet=this.nodeSet.extend(...lt.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let Ct=decodeArray(lt.tokenData);this.context=lt.context,this.specializerSpecs=lt.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let At=0;At<this.specializerSpecs.length;At++)this.specialized[At]=this.specializerSpecs[At].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(lt.states,Uint32Array),this.data=decodeArray(lt.stateData),this.goto=decodeArray(lt.goto),this.maxTerm=lt.maxTerm,this.tokenizers=lt.tokenizers.map(At=>typeof At=="number"?new TokenGroup(Ct,At):At),this.topRules=lt.topRules,this.dialects=lt.dialects||{},this.dynamicPrecedences=lt.dynamicPrecedences||null,this.tokenPrecTable=lt.tokenPrec,this.termNames=lt.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(lt,dt,vt){let St=new Parse(this,lt,dt,vt);for(let Et of this.wrappers)St=Et(St,lt,dt,vt);return St}getGoto(lt,dt,vt=!1){let St=this.goto;if(dt>=St[0])return-1;for(let Et=St[dt+1];;){let Ct=St[Et++],At=Ct&1,Rt=St[Et++];if(At&&vt)return Rt;for(let Dt=Et+(Ct>>1);Et<Dt;Et++)if(St[Et]==lt)return Rt;if(At)return-1}}hasAction(lt,dt){let vt=this.data;for(let St=0;St<2;St++)for(let Et=this.stateSlot(lt,St?2:1),Ct;;Et+=3){if((Ct=vt[Et])==65535)if(vt[Et+1]==1)Ct=vt[Et=pair(vt,Et+2)];else{if(vt[Et+1]==2)return pair(vt,Et+2);break}if(Ct==dt||Ct==0)return pair(vt,Et+1)}return 0}stateSlot(lt,dt){return this.states[lt*6+dt]}stateFlag(lt,dt){return(this.stateSlot(lt,0)&dt)>0}validAction(lt,dt){if(dt==this.stateSlot(lt,4))return!0;for(let vt=this.stateSlot(lt,1);;vt+=3){if(this.data[vt]==65535)if(this.data[vt+1]==1)vt=pair(this.data,vt+2);else return!1;if(dt==pair(this.data,vt+1))return!0}}nextStates(lt){let dt=[];for(let vt=this.stateSlot(lt,1);;vt+=3){if(this.data[vt]==65535)if(this.data[vt+1]==1)vt=pair(this.data,vt+2);else break;if(!(this.data[vt+2]&1)){let St=this.data[vt+1];dt.some((Et,Ct)=>Ct&1&&Et==St)||dt.push(this.data[vt],St)}}return dt}configure(lt){let dt=Object.assign(Object.create(LRParser.prototype),this);if(lt.props&&(dt.nodeSet=this.nodeSet.extend(...lt.props)),lt.top){let vt=this.topRules[lt.top];if(!vt)throw new RangeError(`Invalid top rule name ${lt.top}`);dt.top=vt}return lt.tokenizers&&(dt.tokenizers=this.tokenizers.map(vt=>{let St=lt.tokenizers.find(Et=>Et.from==vt);return St?St.to:vt})),lt.specializers&&(dt.specializers=this.specializers.slice(),dt.specializerSpecs=this.specializerSpecs.map((vt,St)=>{let Et=lt.specializers.find(At=>At.from==vt.external);if(!Et)return vt;let Ct=Object.assign(Object.assign({},vt),{external:Et.to});return dt.specializers[St]=getSpecializer(Ct),Ct})),lt.contextTracker&&(dt.context=lt.contextTracker),lt.dialect&&(dt.dialect=this.parseDialect(lt.dialect)),lt.strict!=null&&(dt.strict=lt.strict),lt.wrap&&(dt.wrappers=dt.wrappers.concat(lt.wrap)),lt.bufferLength!=null&&(dt.bufferLength=lt.bufferLength),dt}hasWrappers(){return this.wrappers.length>0}getName(lt){return this.termNames?this.termNames[lt]:String(lt<=this.maxNode&&this.nodeSet.types[lt].name||lt)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(lt){let dt=this.dynamicPrecedences;return dt==null?0:dt[lt]||0}parseDialect(lt){let dt=Object.keys(this.dialects),vt=dt.map(()=>!1);if(lt)for(let Et of lt.split(" ")){let Ct=dt.indexOf(Et);Ct>=0&&(vt[Ct]=!0)}let St=null;for(let Et=0;Et<dt.length;Et++)if(!vt[Et])for(let Ct=this.dialects[dt[Et]],At;(At=this.data[Ct++])!=65535;)(St||(St=new Uint8Array(this.maxTerm+1)))[At]=1;return new Dialect(lt,vt,St)}static deserialize(lt){return new LRParser(lt)}}function pair(ft,lt){return ft[lt]|ft[lt+1]<<16}function findFinished(ft){let lt=null;for(let dt of ft){let vt=dt.p.stoppedAt;(dt.pos==dt.p.stream.end||vt!=null&&dt.pos>vt)&&dt.p.parser.stateFlag(dt.state,2)&&(!lt||lt.score<dt.score)&&(lt=dt)}return lt}function getSpecializer(ft){if(ft.external){let lt=ft.extend?1:0;return(dt,vt)=>ft.external(dt,vt)<<1|lt}return ft.get}let nextTagID=0;class Tag{constructor(lt,dt,vt){this.set=lt,this.base=dt,this.modified=vt,this.id=nextTagID++}static define(lt){if(lt!=null&&lt.base)throw new Error("Can not derive from a modified tag");let dt=new Tag([],null,[]);if(dt.set.push(dt),lt)for(let vt of lt.set)dt.set.push(vt);return dt}static defineModifier(){let lt=new Modifier;return dt=>dt.modified.indexOf(lt)>-1?dt:Modifier.get(dt.base||dt,dt.modified.concat(lt).sort((vt,St)=>vt.id-St.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(lt,dt){if(!dt.length)return lt;let vt=dt[0].instances.find(At=>At.base==lt&&sameArray$1(dt,At.modified));if(vt)return vt;let St=[],Et=new Tag(St,lt,dt);for(let At of dt)At.instances.push(Et);let Ct=powerSet(dt);for(let At of lt.set)if(!At.modified.length)for(let Rt of Ct)St.push(Modifier.get(At,Rt));return Et}}function sameArray$1(ft,lt){return ft.length==lt.length&&ft.every((dt,vt)=>dt==lt[vt])}function powerSet(ft){let lt=[[]];for(let dt=0;dt<ft.length;dt++)for(let vt=0,St=lt.length;vt<St;vt++)lt.push(lt[vt].concat(ft[dt]));return lt.sort((dt,vt)=>vt.length-dt.length)}function styleTags(ft){let lt=Object.create(null);for(let dt in ft){let vt=ft[dt];Array.isArray(vt)||(vt=[vt]);for(let St of dt.split(" "))if(St){let Et=[],Ct=2,At=St;for(let Ft=0;;){if(At=="..."&&Ft>0&&Ft+3==St.length){Ct=1;break}let Ut=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(At);if(!Ut)throw new RangeError("Invalid path: "+St);if(Et.push(Ut[0]=="*"?"":Ut[0][0]=='"'?JSON.parse(Ut[0]):Ut[0]),Ft+=Ut[0].length,Ft==St.length)break;let Wt=St[Ft++];if(Ft==St.length&&Wt=="!"){Ct=0;break}if(Wt!="/")throw new RangeError("Invalid path: "+St);At=St.slice(Ft)}let Rt=Et.length-1,Dt=Et[Rt];if(!Dt)throw new RangeError("Invalid path: "+St);let Nt=new Rule(vt,Ct,Rt>0?Et.slice(0,Rt):null);lt[Dt]=Nt.sort(lt[Dt])}}return ruleNodeProp.add(lt)}const ruleNodeProp=new NodeProp;class Rule{constructor(lt,dt,vt,St){this.tags=lt,this.mode=dt,this.context=vt,this.next=St}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(lt){return!lt||lt.depth<this.depth?(this.next=lt,this):(lt.next=this.sort(lt.next),lt)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(ft,lt){let dt=Object.create(null);for(let Et of ft)if(!Array.isArray(Et.tag))dt[Et.tag.id]=Et.class;else for(let Ct of Et.tag)dt[Ct.id]=Et.class;let{scope:vt,all:St=null}=lt||{};return{style:Et=>{let Ct=St;for(let At of Et)for(let Rt of At.set){let Dt=dt[Rt.id];if(Dt){Ct=Ct?Ct+" "+Dt:Dt;break}}return Ct},scope:vt}}function highlightTags(ft,lt){let dt=null;for(let vt of ft){let St=vt.style(lt);St&&(dt=dt?dt+" "+St:St)}return dt}function highlightTree(ft,lt,dt,vt=0,St=ft.length){let Et=new HighlightBuilder(vt,Array.isArray(lt)?lt:[lt],dt);Et.highlightRange(ft.cursor(),vt,St,"",Et.highlighters),Et.flush(St)}class HighlightBuilder{constructor(lt,dt,vt){this.at=lt,this.highlighters=dt,this.span=vt,this.class=""}startSpan(lt,dt){dt!=this.class&&(this.flush(lt),lt>this.at&&(this.at=lt),this.class=dt)}flush(lt){lt>this.at&&this.class&&this.span(this.at,lt,this.class)}highlightRange(lt,dt,vt,St,Et){let{type:Ct,from:At,to:Rt}=lt;if(At>=vt||Rt<=dt)return;Ct.isTop&&(Et=this.highlighters.filter(Wt=>!Wt.scope||Wt.scope(Ct)));let Dt=St,Nt=getStyleTags(lt)||Rule.empty,Ft=highlightTags(Et,Nt.tags);if(Ft&&(Dt&&(Dt+=" "),Dt+=Ft,Nt.mode==1&&(St+=(St?" ":"")+Ft)),this.startSpan(lt.from,Dt),Nt.opaque)return;let Ut=lt.tree&&lt.tree.prop(NodeProp.mounted);if(Ut&&Ut.overlay){let Wt=lt.node.enter(Ut.overlay[0].from+At,1),Zt=this.highlighters.filter(cn=>!cn.scope||cn.scope(Ut.tree.type)),Kt=lt.firstChild();for(let cn=0,hn=At;;cn++){let dn=cn<Ut.overlay.length?Ut.overlay[cn]:null,pn=dn?dn.from+At:Rt,gn=Math.max(dt,hn),vn=Math.min(vt,pn);if(gn<vn&&Kt)for(;lt.from<vn&&(this.highlightRange(lt,gn,vn,St,Et),this.startSpan(Math.min(vn,lt.to),Dt),!(lt.to>=pn||!lt.nextSibling())););if(!dn||pn>vt)break;hn=dn.to+At,hn>dt&&(this.highlightRange(Wt.cursor(),Math.max(dt,dn.from+At),Math.min(vt,hn),St,Zt),this.startSpan(hn,Dt))}Kt&&lt.parent()}else if(lt.firstChild()){do if(!(lt.to<=dt)){if(lt.from>=vt)break;this.highlightRange(lt,dt,vt,St,Et),this.startSpan(Math.min(vt,lt.to),Dt)}while(lt.nextSibling());lt.parent()}}}function getStyleTags(ft){let lt=ft.type.prop(ruleNodeProp);for(;lt&&lt.context&&!ft.matchContext(lt.context);)lt=lt.next;return lt||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const printKeyword=1,indent=189,dedent=190,newline$1=191,newlineBracketed=192,newlineEmpty=193,eof=194,ParenL=22,ParenthesizedExpression=23,TupleExpression=47,ComprehensionExpression=48,BracketL=53,ArrayExpression=54,ArrayComprehensionExpression=55,BraceL=57,DictionaryExpression=58,DictionaryComprehensionExpression=59,SetExpression=60,SetComprehensionExpression=61,ArgList=63,subscript=230,FormatReplacement=71,importList=255,ParamList=121,SequencePattern=142,MappingPattern=143,PatternArgList=146,newline$2=10,carriageReturn=13,space$1=32,tab=9,hash=35,parenOpen=40,dot=46,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,DictionaryExpression,DictionaryComprehensionExpression,FormatReplacement,SequencePattern,MappingPattern,PatternArgList]),newlines=new ExternalTokenizer((ft,lt)=>{if(ft.next<0)ft.acceptToken(eof);else if(!(ft.next!=newline$2&&ft.next!=carriageReturn))if(lt.context.depth<0)ft.acceptToken(newlineBracketed,1);else{ft.advance();let dt=0;for(;ft.next==space$1||ft.next==tab;)ft.advance(),dt++;let vt=ft.next==newline$2||ft.next==carriageReturn||ft.next==hash;ft.acceptToken(vt?newlineEmpty:newline$1,-dt)}},{contextual:!0,fallback:!0}),indentation=new ExternalTokenizer((ft,lt)=>{let dt=lt.context.depth;if(dt<0)return;let vt=ft.peek(-1);if((vt==newline$2||vt==carriageReturn)&&lt.context.depth>=0){let St=0,Et=0;for(;;){if(ft.next==space$1)St++;else if(ft.next==tab)St+=8-St%8;else break;ft.advance(),Et++}St!=dt&&ft.next!=newline$2&&ft.next!=carriageReturn&&ft.next!=hash&&(St<dt?ft.acceptToken(dedent,-Et):ft.acceptToken(indent))}});function IndentLevel(ft,lt){this.parent=ft,this.depth=lt,this.hash=(ft?ft.hash+ft.hash<<8:0)+lt+(lt<<4)}const topIndent$1=new IndentLevel(null,0);function countIndent(ft){let lt=0;for(let dt=0;dt<ft.length;dt++)lt+=ft.charCodeAt(dt)==tab?8-lt%8:1;return lt}const trackIndent=new ContextTracker({start:topIndent$1,reduce(ft,lt){return ft.depth<0&&bracketed.has(lt)?ft.parent:ft},shift(ft,lt,dt,vt){return lt==indent?new IndentLevel(ft,countIndent(vt.read(vt.pos,dt.pos))):lt==dedent?ft.parent:lt==ParenL||lt==BracketL||lt==BraceL?new IndentLevel(ft,-1):ft},hash(ft){return ft.hash}}),legacyPrint=new ExternalTokenizer(ft=>{for(let lt=0;lt<5;lt++){if(ft.next!="print".charCodeAt(lt))return;ft.advance()}if(!/\w/.test(String.fromCharCode(ft.next)))for(let lt=0;;lt++){let dt=ft.peek(lt);if(!(dt==space$1||dt==tab)){dt!=parenOpen&&dt!=dot&&dt!=newline$2&&dt!=carriageReturn&&dt!=hash&&ft.acceptToken(printKeyword);return}}}),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier$1={__proto__:null,await:40,or:50,and:52,in:56,not:58,is:60,if:66,else:68,lambda:72,yield:90,from:92,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250,match:261,case:267},parser$1=LRParser.deserialize({version:14,states:"!L`O`Q$IXOOO%fQ$I[O'#G|OOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'UQ$IWO'#ClO(wQ$I[O'#G{OOQ$IS'#G|'#G|OOQ$IS'#DS'#DSOOQ$IS'#G{'#G{O)eQ$IWO'#CsO)uQ$IWO'#DdO*VQ$IWO'#DhOOQ$IS'#Ds'#DsO*jO`O'#DsO*rOpO'#DsO*zO!bO'#DtO+VO#tO'#DtO+bO&jO'#DtO+mO,UO'#DtO-oQ$I[O'#GmOOQ$IS'#Gm'#GmO'UQ$IWO'#GlO/RQ$I[O'#GlOOQ$IS'#E]'#E]O/jQ$IWO'#E^OOQ$IS'#Gk'#GkO/tQ$IWO'#GjOOQ$IV'#Gj'#GjO0PQ$IWO'#FPOOQ$IS'#GX'#GXO0UQ$IWO'#FOOOQ$IV'#Hx'#HxOOQ$IV'#Gi'#GiOOQ$IT'#Fh'#FhQ`Q$IXOOO'UQ$IWO'#CoO0dQ$IWO'#C{O0kQ$IWO'#DPO0yQ$IWO'#HQO1ZQ$I[O'#EQO'UQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1oQ$IWO'#EZO2VQ$IWO'#E_O0PQ$IWO'#EaO2jQ$I[O'#EaO0PQ$IWO'#EdO/jQ$IWO'#EgO/jQ$IWO'#EkO/jQ$IWO'#EnO2uQ$IWO'#EpO2|Q$IWO'#EuO3XQ$IWO'#EqO/jQ$IWO'#EuO0PQ$IWO'#EwO0PQ$IWO'#E|O3^Q$IWO'#FROOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O3eQ$IWO'#DmOOQ$IS,5:W,5:WO3xQ$IWO'#H[OOQ$IS,5:Z,5:ZO4VQ%1`O,5:ZO4[Q$I[O,59WO0dQ$IWO,59`O0dQ$IWO,59`O0dQ$IWO,59`O6zQ$IWO,59`O7PQ$IWO,59`O7WQ$IWO,59hO7_Q$IWO'#G{O8eQ$IWO'#GzOOQ$IS'#Gz'#GzOOQ$IS'#DY'#DYO8|Q$IWO,59_O'UQ$IWO,59_O9[Q$IWO,59_O9aQ$IWO,5:PO'UQ$IWO,5:POOQ$IS,5:O,5:OO9oQ$IWO,5:OO9tQ$IWO,5:VO'UQ$IWO,5:VO'UQ$IWO,5:TOOQ$IS,5:S,5:SO:VQ$IWO,5:SO:[Q$IWO,5:UOOOO'#Fp'#FpO:aO`O,5:_OOQ$IS,5:_,5:_OOOO'#Fq'#FqO:iOpO,5:_O:qQ$IWO'#DuOOOO'#Fr'#FrO;RO!bO,5:`OOQ$IS,5:`,5:`OOOO'#Fu'#FuO;^O#tO,5:`OOOO'#Fv'#FvO;iO&jO,5:`OOOO'#Fw'#FwO;tO,UO,5:`OOQ$IS'#Fx'#FxO<PQ$I[O,5:dO>qQ$I[O,5=WO?[Q%GlO,5=WO?{Q$I[O,5=WOOQ$IS,5:x,5:xO@dQ$IXO'#GQOAsQ$IWO,5;TOOQ$IV,5=U,5=UOBOQ$I[O'#HtOBgQ$IWO,5;kOOQ$IS-E:V-E:VOOQ$IV,5;j,5;jO3SQ$IWO'#EwOOQ$IT-E9f-E9fOBoQ$I[O,59ZODvQ$I[O,59gOEaQ$IWO'#G}OElQ$IWO'#G}O0PQ$IWO'#G}OEwQ$IWO'#DROFPQ$IWO,59kOFUQ$IWO'#HRO'UQ$IWO'#HRO/jQ$IWO,5=lOOQ$IS,5=l,5=lO/jQ$IWO'#D|OOQ$IS'#D}'#D}OFsQ$IWO'#FzOGTQ$IWO,58zOGTQ$IWO,58zO)hQ$IWO,5:jOGcQ$I[O'#HTOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGvQ$IWO,5:yOHXQ$IWO,5:{OOQ$IS'#F}'#F}OHgQ$I[O,5:{OHuQ$IWO,5:{OHzQ$IWO'#HwOOQ$IS,5;O,5;OOIYQ$IWO'#HsOOQ$IS,5;R,5;RO3XQ$IWO,5;VO3XQ$IWO,5;YOIkQ$I[O'#HyO'UQ$IWO'#HyOIuQ$IWO,5;[O2uQ$IWO,5;[O/jQ$IWO,5;aO0PQ$IWO,5;cOIzQ$IXO'#ElOKTQ$IZO,5;]ONiQ$IWO'#HzO3XQ$IWO,5;aONtQ$IWO,5;cONyQ$IWO,5;hO! RQ$I[O,5;mO'UQ$IWO,5;mO!#uQ$I[O1G.hO!#|Q$I[O1G.hO!&mQ$I[O1G.hO!&wQ$I[O1G.hO!)bQ$I[O1G.hO!)uQ$I[O1G.hO!*YQ$IWO'#HZO!*hQ$I[O'#GmO/jQ$IWO'#HZO!*rQ$IWO'#HYOOQ$IS,5:X,5:XO!*zQ$IWO,5:XO!+PQ$IWO'#H]O!+[Q$IWO'#H]O!+oQ$IWO,5=vOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.z1G.zO!,oQ$I[O1G.zO!,vQ$I[O1G.zO0dQ$IWO1G.zO!-cQ$IWO1G/SOOQ$IS'#DX'#DXO/jQ$IWO,59rOOQ$IS1G.y1G.yO!-jQ$IWO1G/cO!-zQ$IWO1G/cO!.SQ$IWO1G/dO'UQ$IWO'#HSO!.XQ$IWO'#HSO!.^Q$I[O1G.yO!.nQ$IWO,59gO!/tQ$IWO,5=rO!0UQ$IWO,5=rO!0^Q$IWO1G/kO!0cQ$I[O1G/kOOQ$IS1G/j1G/jO!0sQ$IWO,5=mO!1jQ$IWO,5=mO/jQ$IWO1G/oO!2XQ$IWO1G/qO!2^Q$I[O1G/qO!2nQ$I[O1G/oOOQ$IS1G/n1G/nOOQ$IS1G/p1G/pOOOO-E9n-E9nOOQ$IS1G/y1G/yOOOO-E9o-E9oO!3OQ$IWO'#HhO/jQ$IWO'#HhO!3^Q$IWO,5:aOOOO-E9p-E9pOOQ$IS1G/z1G/zOOOO-E9s-E9sOOOO-E9t-E9tOOOO-E9u-E9uOOQ$IS-E9v-E9vO!3iQ%GlO1G2rO!4YQ$I[O1G2rO'UQ$IWO,5<eOOQ$IS,5<e,5<eOOQ$IS-E9w-E9wOOQ$IS,5<l,5<lOOQ$IS-E:O-E:OOOQ$IV1G0o1G0oO0PQ$IWO'#F|O!4qQ$I[O,5>`OOQ$IS1G1V1G1VO!5YQ$IWO1G1VOOQ$IS'#DT'#DTO/jQ$IWO,5=iOOQ$IS,5=i,5=iO!5_Q$IWO'#FiO!5jQ$IWO,59mO!5rQ$IWO1G/VO!5|Q$I[O,5=mOOQ$IS1G3W1G3WOOQ$IS,5:h,5:hO!6mQ$IWO'#GlOOQ$IS,5<f,5<fOOQ$IS-E9x-E9xO!7OQ$IWO1G.fOOQ$IS1G0U1G0UO!7^Q$IWO,5=oO!7nQ$IWO,5=oO/jQ$IWO1G0eO/jQ$IWO1G0eO0PQ$IWO1G0gOOQ$IS-E9{-E9{O!8PQ$IWO1G0gO!8[Q$IWO1G0gO!8aQ$IWO,5>cO!8oQ$IWO,5>cO!8}Q$IWO,5>_O!9eQ$IWO,5>_O!9vQ$IZO1G0qO!=XQ$IZO1G0tO!@gQ$IWO,5>eO!@qQ$IWO,5>eO!@yQ$I[O,5>eO/jQ$IWO1G0vO!ATQ$IWO1G0vO3XQ$IWO1G0{ONtQ$IWO1G0}OOQ$IV,5;W,5;WO!AYQ$IYO,5;WO!A_Q$IZO1G0wO!DsQ$IWO'#GUO3XQ$IWO1G0wO3XQ$IWO1G0wO!EQQ$IWO,5>fO!E_Q$IWO,5>fO0PQ$IWO,5>fOOQ$IV1G0{1G0{O!EgQ$IWO'#EyO!ExQ%1`O1G0}OOQ$IV1G1S1G1SO3XQ$IWO1G1SO!FQQ$IWO'#FTOOQ$IV1G1X1G1XO! RQ$I[O1G1XOOQ$IS,5=u,5=uOOQ$IS'#Dn'#DnO/jQ$IWO,5=uO!FVQ$IWO,5=tO!FjQ$IWO,5=tOOQ$IS1G/s1G/sO!FrQ$IWO,5=wO!GSQ$IWO,5=wO!G[Q$IWO,5=wO!GoQ$IWO,5=wO!HPQ$IWO,5=wOOQ$IS1G3b1G3bOOQ$IS7+$f7+$fO!5rQ$IWO7+$nO!IrQ$IWO1G.zO!IyQ$IWO1G.zOOQ$IS1G/^1G/^OOQ$IS,5<V,5<VO'UQ$IWO,5<VOOQ$IS7+$}7+$}O!JQQ$IWO7+$}OOQ$IS-E9i-E9iOOQ$IS7+%O7+%OO!JbQ$IWO,5=nO'UQ$IWO,5=nOOQ$IS7+$e7+$eO!JgQ$IWO7+$}O!JoQ$IWO7+%OO!JtQ$IWO1G3^OOQ$IS7+%V7+%VO!KUQ$IWO1G3^O!K^Q$IWO7+%VOOQ$IS,5<U,5<UO'UQ$IWO,5<UO!KcQ$IWO1G3XOOQ$IS-E9h-E9hO!LYQ$IWO7+%ZOOQ$IS7+%]7+%]O!LhQ$IWO1G3XO!MVQ$IWO7+%]O!M[Q$IWO1G3_O!MlQ$IWO1G3_O!MtQ$IWO7+%ZO!MyQ$IWO,5>SO!NaQ$IWO,5>SO!NaQ$IWO,5>SO!NoO!LQO'#DwO!NzOSO'#HiOOOO1G/{1G/{O# PQ$IWO1G/{O# XQ%GlO7+(^O# xQ$I[O1G2PP#!cQ$IWO'#FyOOQ$IS,5<h,5<hOOQ$IS-E9z-E9zOOQ$IS7+&q7+&qOOQ$IS1G3T1G3TOOQ$IS,5<T,5<TOOQ$IS-E9g-E9gOOQ$IS7+$q7+$qO#!pQ$IWO,5=WO##ZQ$IWO,5=WO##lQ$I[O,5<WO#$PQ$IWO1G3ZOOQ$IS-E9j-E9jOOQ$IS7+&P7+&PO#$aQ$IWO7+&POOQ$IS7+&R7+&RO#$oQ$IWO'#HvO0PQ$IWO'#HuO#%TQ$IWO7+&ROOQ$IS,5<k,5<kO#%`Q$IWO1G3}OOQ$IS-E9}-E9}OOQ$IS,5<g,5<gO#%nQ$IWO1G3yOOQ$IS-E9y-E9yO#&UQ$IZO7+&]O!DsQ$IWO'#GSO3XQ$IWO7+&]O3XQ$IWO7+&`O#)gQ$I[O,5<oO'UQ$IWO,5<oO#)qQ$IWO1G4POOQ$IS-E:R-E:RO#){Q$IWO1G4PO3XQ$IWO7+&bO/jQ$IWO7+&bOOQ$IV7+&g7+&gO!ExQ%1`O7+&iO#*TQ$IXO1G0rOOQ$IV-E:S-E:SO3XQ$IWO7+&cO3XQ$IWO7+&cOOQ$IV,5<p,5<pO#+yQ$IWO,5<pOOQ$IV7+&c7+&cO#,UQ$IZO7+&cO#/dQ$IWO,5<qO#/oQ$IWO1G4QOOQ$IS-E:T-E:TO#/|Q$IWO1G4QO#0UQ$IWO'#H|O#0dQ$IWO'#H|O0PQ$IWO'#H|OOQ$IS'#H|'#H|O#0oQ$IWO'#H{OOQ$IS,5;e,5;eO#0wQ$IWO,5;eO/jQ$IWO'#E{OOQ$IV7+&i7+&iO3XQ$IWO7+&iOOQ$IV7+&n7+&nO#0|Q$IYO,5;oOOQ$IV7+&s7+&sOOQ$IS1G3a1G3aOOQ$IS,5<Y,5<YO#1RQ$IWO1G3`OOQ$IS-E9l-E9lO#1fQ$IWO,5<ZO#1qQ$IWO,5<ZO#2UQ$IWO1G3cOOQ$IS-E9m-E9mO#2fQ$IWO1G3cO#2nQ$IWO1G3cO#3OQ$IWO1G3cO#2fQ$IWO1G3cOOQ$IS<<HY<<HYO#3ZQ$I[O1G1qOOQ$IS<<Hi<<HiP#3hQ$IWO'#FkO7WQ$IWO1G3YO#3uQ$IWO1G3YO#3zQ$IWO<<HiOOQ$IS<<Hj<<HjO#4[Q$IWO7+(xOOQ$IS<<Hq<<HqO#4lQ$I[O1G1pP#5]Q$IWO'#FjO#5jQ$IWO7+(yO#5zQ$IWO7+(yO#6SQ$IWO<<HuO#6XQ$IWO7+(sOOQ$IS<<Hw<<HwO#7OQ$IWO,5<XO'UQ$IWO,5<XOOQ$IS-E9k-E9kOOQ$IS<<Hu<<HuOOQ$IS,5<_,5<_O/jQ$IWO,5<_O#7TQ$IWO1G3nOOQ$IS-E9q-E9qO#7kQ$IWO1G3nOOOO'#Ft'#FtO#7yO!LQO,5:cOOOO,5>T,5>TOOOO7+%g7+%gO#8UQ$IWO1G2rO#8oQ$IWO1G2rP'UQ$IWO'#FlO/jQ$IWO<<IkO#9QQ$IWO,5>bO#9cQ$IWO,5>bO0PQ$IWO,5>bO#9tQ$IWO,5>aOOQ$IS<<Im<<ImP0PQ$IWO'#GPP/jQ$IWO'#F{OOQ$IV-E:Q-E:QO3XQ$IWO<<IwOOQ$IV,5<n,5<nO3XQ$IWO,5<nOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#9yQ$I[O1G2ZP#:TQ$IWO'#GTO#:[Q$IWO7+)kO#:fQ$IZO<<I|O3XQ$IWO<<I|OOQ$IV<<JT<<JTO3XQ$IWO<<JTOOQ$IV'#GR'#GRO#=tQ$IZO7+&^OOQ$IV<<I}<<I}O#?pQ$IZO<<I}OOQ$IV1G2[1G2[O0PQ$IWO1G2[O3XQ$IWO<<I}O0PQ$IWO1G2]P/jQ$IWO'#GVO#COQ$IWO7+)lO#C]Q$IWO7+)lOOQ$IS'#Ez'#EzO/jQ$IWO,5>hO#CeQ$IWO,5>hOOQ$IS,5>h,5>hO#CpQ$IWO,5>gO#DRQ$IWO,5>gOOQ$IS1G1P1G1POOQ$IS,5;g,5;gO#DZQ$IWO1G1ZP#D`Q$IWO'#FnO#DpQ$IWO1G1uO#ETQ$IWO1G1uO#EeQ$IWO1G1uP#EpQ$IWO'#FoO#E}Q$IWO7+(}O#F_Q$IWO7+(}O#F_Q$IWO7+(}O#FgQ$IWO7+(}O#FwQ$IWO7+(tO7WQ$IWO7+(tOOQ$ISAN>TAN>TO#GbQ$IWO<<LeOOQ$ISAN>aAN>aO/jQ$IWO1G1sO#GrQ$I[O1G1sP#G|Q$IWO'#FmOOQ$IS1G1y1G1yP#HZQ$IWO'#FsO#HhQ$IWO7+)YOOOO-E9r-E9rO#IOQ$IWO7+(^OOQ$ISAN?VAN?VO#IiQ$IWO,5<jO#I}Q$IWO1G3|OOQ$IS-E9|-E9|O#J`Q$IWO1G3|OOQ$IS1G3{1G3{OOQ$IVAN?cAN?cOOQ$IV1G2Y1G2YO3XQ$IWOAN?hO#JqQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E:P-E:POOQ$IV<<Ix<<IxO3XQ$IWOAN?iO3XQ$IWO7+'vOOQ$IVAN?iAN?iOOQ$IS7+'w7+'wO#NPQ$IWO<<MWOOQ$IS1G4S1G4SO/jQ$IWO1G4SOOQ$IS,5<r,5<rO#N^Q$IWO1G4ROOQ$IS-E:U-E:UOOQ$IU'#GY'#GYO#NoQ$IYO7+&uO#NzQ$IWO'#FUO$ rQ$IWO7+'aO$!SQ$IWO7+'aOOQ$IS7+'a7+'aO$!_Q$IWO<<LiO$!oQ$IWO<<LiO$!oQ$IWO<<LiO$!wQ$IWO'#HUOOQ$IS<<L`<<L`O$#RQ$IWO<<L`OOQ$IS7+'_7+'_O0PQ$IWO1G2UP0PQ$IWO'#GOO$#lQ$IWO7+)hO$#}Q$IWO7+)hOOQ$IVG25SG25SO3XQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<Kb<<KbOOQ$IS7+)n7+)nP$$`Q$IWO'#GWOOQ$IU-E:W-E:WOOQ$IV<<Ja<<JaO$%SQ$I[O'#FWOOQ$IS'#FY'#FYO$%dQ$IWO'#FXO$&UQ$IWO'#FXOOQ$IS'#FX'#FXO$&ZQ$IWO'#IOO#NzQ$IWO'#F`O#NzQ$IWO'#F`O$&rQ$IWO'#FaO#NzQ$IWO'#FbO$&yQ$IWO'#IPOOQ$IS'#IP'#IPO$'hQ$IWO,5;pOOQ$IS<<J{<<J{O$'pQ$IWO<<J{O$(QQ$IWOANBTO$(bQ$IWOANBTO$(jQ$IWO'#HVOOQ$IS'#HV'#HVO0kQ$IWO'#DaO$)TQ$IWO,5=pOOQ$ISANAzANAzOOQ$IS7+'p7+'pO$)lQ$IWO<<MSOOQ$IVLD*nLD*nO4VQ%1`O'#G[O$)}Q$I[O,5;yO#NzQ$IWO'#FdOOQ$IS,5;},5;}OOQ$IS'#FZ'#FZO$*oQ$IWO,5;sO$*tQ$IWO,5;sOOQ$IS'#F^'#F^O#NzQ$IWO'#GZO$+fQ$IWO,5;wO$,QQ$IWO,5>jO$,bQ$IWO,5>jO0PQ$IWO,5;vO$,sQ$IWO,5;zO$,xQ$IWO,5;zO#NzQ$IWO'#IQO$,}Q$IWO'#IQO$-SQ$IWO,5;{OOQ$IS,5;|,5;|O'UQ$IWO'#FgOOQ$IU1G1[1G1[O3XQ$IWO1G1[OOQ$ISAN@gAN@gO$-XQ$IWOG27oO$-iQ$IWO,59{OOQ$IS1G3[1G3[OOQ$IS,5<v,5<vOOQ$IS-E:Y-E:YO$-nQ$I[O'#FWO$-uQ$IWO'#IRO$.TQ$IWO'#IRO$.]Q$IWO,5<OOOQ$IS1G1_1G1_O$.bQ$IWO1G1_O$.gQ$IWO,5<uOOQ$IS-E:X-E:XO$/RQ$IWO,5<yO$/jQ$IWO1G4UOOQ$IS-E:]-E:]OOQ$IS1G1b1G1bOOQ$IS1G1f1G1fO$/zQ$IWO,5>lO#NzQ$IWO,5>lOOQ$IS1G1g1G1gO$0YQ$I[O,5<ROOQ$IU7+&v7+&vO$!wQ$IWO1G/gO#NzQ$IWO,5<PO$0aQ$IWO,5>mO$0hQ$IWO,5>mOOQ$IS1G1j1G1jOOQ$IS7+&y7+&yP#NzQ$IWO'#G_O$0pQ$IWO1G4WO$0zQ$IWO1G4WO$1SQ$IWO1G4WOOQ$IS7+%R7+%RO$1bQ$IWO1G1kO$1pQ$I[O'#FWO$1wQ$IWO,5<xOOQ$IS,5<x,5<xO$2VQ$IWO1G4XOOQ$IS-E:[-E:[O#NzQ$IWO,5<wO$2^Q$IWO,5<wO$2cQ$IWO7+)rOOQ$IS-E:Z-E:ZO$2mQ$IWO7+)rO#NzQ$IWO,5<QP#NzQ$IWO'#G^O$2uQ$IWO1G2cO#NzQ$IWO1G2cP$3TQ$IWO'#G]O$3[Q$IWO<<M^O$3fQ$IWO1G1lO$3tQ$IWO7+'}O7WQ$IWO'#C{O7WQ$IWO,59`O7WQ$IWO,59`O7WQ$IWO,59`O$4SQ$I[O,5=WO7WQ$IWO1G.zO/jQ$IWO1G/VO/jQ$IWO7+$nP$4gQ$IWO'#FyO'UQ$IWO'#GlO$4tQ$IWO,59`O$4yQ$IWO,59`O$5QQ$IWO,59kO$5VQ$IWO1G/SO0kQ$IWO'#DPO7WQ$IWO,59h",stateData:"$5m~O%[OS%XOS%WOSQOS~OPhOTeOdsOfXOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%VqO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~OT!bO]!bO_!cOf!jO!V!lO!d!nO%b!]O%c!^O%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bO~Oi%pXj%pXk%pXl%pXm%pXn%pXq%pXx%pXy%pX!s%pX#^%pX%V%pX%Y%pX%r%pXe%pX!R%pX!S%pX%s%pX!U%pX!Y%pX!O%pX#V%pXr%pX!j%pX~P$bOdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~Ox%oXy%oX#^%oX%V%oX%Y%oX%r%oX~Oi!qOj!rOk!pOl!pOm!sOn!tOq!uO!s%oX~P(cOT!{Om/iOt/wO}vO~P'UOT#OOm/iOt/wO!U#PO~P'UOT#SO_#TOm/iOt/wO!Y#UO~P'UO&T#XO&U#ZO~O&W#[O&X#ZO~O!Z#^O&Z#_O&_#aO~O!Z#^O&a#bO&b#aO~O!Z#^O&U#aO&d#dO~O!Z#^O&X#aO&f#fO~OT%aX]%aX_%aXf%aXi%aXj%aXk%aXl%aXm%aXn%aXq%aXx%aX!V%aX!d%aX%b%aX%c%aX%d%aX%e%aX%f%aX%g%aX%h%aX%i%aX%j%aX%k%aXe%aX!R%aX!S%aX~O&R[O&S]O&V^O&Y_O&``O&caO&ebOy%aX!s%aX#^%aX%V%aX%Y%aX%r%aX%s%aX!U%aX!Y%aX!O%aX#V%aXr%aX!j%aX~P+xOx#kOy%`X!s%`X#^%`X%V%`X%Y%`X%r%`X~Om/iOt/wO~P'UO#^#nO%V#pO%Y#pO~O%mVO~O!R#uO#l!YO#q!ZO#tlO~OmtO~P'UOT#zO_#{O%mVOyuP~OT$POm/iOt/wO!O$QO~P'UOy$SO!s$XO%r$TO#^!tX%V!tX%Y!tX~OT$POm/iOt/wO#^!}X%V!}X%Y!}X~P'UOm/iOt/wO#^#RX%V#RX%Y#RX~P'UO!d$_O!m$_O%mVO~OT$iO~P'UO!S$kO#j$lO#l$mO~Oy$nO~OT$uO~P'UOT%OO_%OOe%QOm/iOt/wO~P'UOm/iOt/wOy%TO~P'UO&Q%VO~O_!cOf!jO!V!lO!d!nOT`a]`ai`aj`ak`al`am`an`aq`ax`ay`a!s`a#^`a%V`a%Y`a%b`a%c`a%d`a%e`a%f`a%g`a%h`a%i`a%j`a%k`a%r`ae`a!R`a!S`a%s`a!U`a!Y`a!O`a#V`ar`a!j`a~Ol%[O~Om%[O~P'UOm/iO~P'UOi/kOj/lOk/jOl/jOm/sOn/tOq/xOe%oX!R%oX!S%oX%s%oX!U%oX!Y%oX!O%oX#V%oX!j%oX~P(cO%s%^Oe%nXx%nX!R%nX!S%nX!U%nXy%nX~Oe%`Ox%aO!R%eO!S%dO~Oe%`O~Ox%hO!R%eO!S%dO!U%zX~O!U%lO~Ox%mOy%oO!R%eO!S%dO!Y%uX~O!Y%sO~O!Y%tO~O&T#XO&U%vO~O&W#[O&X%vO~OT%yOm/iOt/wO}vO~P'UO!Z#^O&Z#_O&_%|O~O!Z#^O&a#bO&b%|O~O!Z#^O&U%|O&d#dO~O!Z#^O&X%|O&f#fO~OT!la]!la_!laf!lai!laj!lak!lal!lam!lan!laq!lax!lay!la!V!la!d!la!s!la#^!la%V!la%Y!la%b!la%c!la%d!la%e!la%f!la%g!la%h!la%i!la%j!la%k!la%r!lae!la!R!la!S!la%s!la!U!la!Y!la!O!la#V!lar!la!j!la~P#yOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOmtOtuOy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P'UOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$tX%V$tX%Y$tX~P'UO#^#nO%V&YO%Y&YO~O!d&ZOf&hX%V&hX#V&hX#^&hX%Y&hX#U&hX~Of!jO%V&]O~Oicajcakcalcamcancaqcaxcayca!sca#^ca%Vca%Yca%rcaeca!Rca!Sca%sca!Uca!Yca!Oca#Vcarca!jca~P$bOqoaxoayoa#^oa%Voa%Yoa%roa~Oi!qOj!rOk!pOl!pOm!sOn!tO!soa~PD_O%r&_Ox%qXy%qX~O%mVOx%qXy%qX~Ox&bOyuX~Oy&dO~Ox%mO#^%uX%V%uX%Y%uXe%uXy%uX!Y%uX!j%uX%r%uX~OT/rOm/iOt/wO}vO~P'UO%r$TO#^Sa%VSa%YSa~Ox&mO#^%wX%V%wX%Y%wXl%wX~P$bOx&pO!O&oO#^#Ra%V#Ra%Y#Ra~O#V&qO#^#Ta%V#Ta%Y#Ta~O!d$_O!m$_O#U&sO%mVO~O#U&sO~Ox&uO#^&kX%V&kX%Y&kX~Ox&wO#^&gX%V&gX%Y&gXy&gX~Ox&{Ol&mX~P$bOl'OO~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO%V'TO~P'UOr'XO#g'VO#h'WOP#eaT#ead#eaf#eam#eaq#eat#ea}#ea!O#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea#v#ea%S#ea%V#ea%g#ea%h#ea%l#ea%m#ea&R#ea&S#ea&V#ea&Y#ea&`#ea&c#ea&e#ea%U#ea%Y#ea~Ox'YO#V'[Oy&nX~Of'^O~Of!jOy$nO~Oy'bO~P$bOT!bO]!bO_!cOf!jO!V!lO!d!nO%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%c!^O~P! YO%cUi~P! YOT!bO]!bO_!cOf!jO!V!lO!d!nO%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%e!`O%f!`O~P!$TO%eUi%fUi~P!$TO_!cOf!jO!V!lO!d!nOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%eUi%fUi%gUi%hUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~OT!bO]!bO%i!bO%j!bO%k!bO~P!'ROTUi]Ui%iUi%jUi%kUi~P!'RO!R%eO!S%dOe%}Xx%}X~O%r'fO%s'fO~P+xOx'hOe%|X~Oe'jO~Ox'kOy'mO!U&PX~Om/iOt/wOx'kOy'nO!U&PX~P'UO!U'pO~Ok!pOl!pOm!sOn!tOihiqhixhiyhi!shi#^hi%Vhi%Yhi%rhi~Oj!rO~P!+tOjhi~P!+tOi/kOj/lOk/jOl/jOm/sOn/tO~Or'rO~P!,}OT'wOe'xOm/iOt/wO~P'UOe'xOx'yO~Oe'{O~O!S'}O~Oe(OOx'yO!R%eO!S%dO~P$bOi/kOj/lOk/jOl/jOm/sOn/tOeoa!Roa!Soa%soa!Uoa!Yoa!Ooa#Voaroa!joa~PD_OT'wOm/iOt/wO!U%za~P'UOx(RO!U%za~O!U(SO~Ox(RO!R%eO!S%dO!U%za~P$bOT(WOm/iOt/wO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~P'UOx(XO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~O!Y([O~Ox(XO!R%eO!S%dO!Y%ua~P$bOx(_O!R%eO!S%dO!Y%{a~P$bOx(bOy&[X!Y&[X!j&[X~Oy(eO!Y(gO!j(hO~OT&TOmtOtuOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~P'UOx(iOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~O!d&ZOf&ha%V&ha#V&ha#^&ha%Y&ha#U&ha~O%V(nO~OT#zO_#{O%mVO~Ox&bOyua~OmtOtuO~P'UOx(XO#^%ua%V%ua%Y%uae%uay%ua!Y%ua!j%ua%r%ua~P$bOx(sO#^%`X%V%`X%Y%`X%r%`X~O%r$TO#^Si%VSi%YSi~O#^%wa%V%wa%Y%wal%wa~P'UOx(vO#^%wa%V%wa%Y%wal%wa~OT(zOf(|O%mVO~O#U(}O~O%mVO#^&ka%V&ka%Y&ka~Ox)PO#^&ka%V&ka%Y&ka~Om/iOt/wO#^&ga%V&ga%Y&gay&ga~P'UOx)SO#^&ga%V&ga%Y&gay&ga~Or)WO#a)VOP#_iT#_id#_if#_im#_iq#_it#_i}#_i!O#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i#v#_i%S#_i%V#_i%g#_i%h#_i%l#_i%m#_i&R#_i&S#_i&V#_i&Y#_i&`#_i&c#_i&e#_i%U#_i%Y#_i~Or)XOP#biT#bid#bif#bim#biq#bit#bi}#bi!O#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi#v#bi%S#bi%V#bi%g#bi%h#bi%l#bi%m#bi&R#bi&S#bi&V#bi&Y#bi&`#bi&c#bi&e#bi%U#bi%Y#bi~OT)ZOl&ma~P'UOx)[Ol&ma~Ox)[Ol&ma~P$bOl)`O~O%T)cO~Or)fO#g'VO#h)eOP#eiT#eid#eif#eim#eiq#eit#ei}#ei!O#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei#v#ei%S#ei%V#ei%g#ei%h#ei%l#ei%m#ei&R#ei&S#ei&V#ei&Y#ei&`#ei&c#ei&e#ei%U#ei%Y#ei~Om/iOt/wOy$nO~P'UOm/iOt/wOy&na~P'UOx)lOy&na~OT)pO_)qOe)tO%i)rO%mVO~Oy$nO&q)vO~O%V)zO~OT%OO_%OOm/iOt/wOe%|a~P'UOx*OOe%|a~Om/iOt/wOy*RO!U&Pa~P'UOx*SO!U&Pa~Om/iOt/wOx*SOy*VO!U&Pa~P'UOm/iOt/wOx*SO!U&Pa~P'UOx*SOy*VO!U&Pa~Ok/jOl/jOm/sOn/tOehiihiqhixhi!Rhi!Shi%shi!Uhiyhi!Yhi#^hi%Vhi%Yhi!Ohi#Vhirhi!jhi%rhi~Oj/lO~P!H[Ojhi~P!H[OT'wOe*[Om/iOt/wO~P'UOl*^O~Oe*[Ox*`O~Oe*aO~OT'wOm/iOt/wO!U%zi~P'UOx*bO!U%zi~O!U*cO~OT(WOm/iOt/wO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~P'UOx*fO!R%eO!S%dO!Y%{i~Ox*iO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~O!Y*jO~O_*lOm/iOt/wO!Y%{i~P'UOx*fO!Y%{i~O!Y*nO~OT*pOm/iOt/wOy&[a!Y&[a!j&[a~P'UOx*qOy&[a!Y&[a!j&[a~O!Z#^O&^*tO!Y!kX~O!Y*vO~Oy(eO!Y*wO~OT&TOmtOtuOy%`q!s%`q#^%`q%V%`q%Y%`q%r%`q~P'UOx$miy$mi!s$mi#^$mi%V$mi%Y$mi%r$mi~P$bOT&TOmtOtuO~P'UOT&TOm/iOt/wO#^%`a%V%`a%Y%`a%r%`a~P'UOx*xO#^%`a%V%`a%Y%`a%r%`a~Ox$`a#^$`a%V$`a%Y$`al$`a~P$bO#^%wi%V%wi%Y%wil%wi~P'UOx*{O#^#Rq%V#Rq%Y#Rq~Ox*|O#V+OO#^&jX%V&jX%Y&jXe&jX~OT+QOf(|O%mVO~O%mVO#^&ki%V&ki%Y&ki~Om/iOt/wO#^&gi%V&gi%Y&giy&gi~P'UOr+UO#a)VOP#_qT#_qd#_qf#_qm#_qq#_qt#_q}#_q!O#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q#v#_q%S#_q%V#_q%g#_q%h#_q%l#_q%m#_q&R#_q&S#_q&V#_q&Y#_q&`#_q&c#_q&e#_q%U#_q%Y#_q~Ol$wax$wa~P$bOT)ZOl&mi~P'UOx+]Ol&mi~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O~P'UOx+gOy$nO#V+gO~O#h+hOP#eqT#eqd#eqf#eqm#eqq#eqt#eq}#eq!O#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq#v#eq%S#eq%V#eq%g#eq%h#eq%l#eq%m#eq&R#eq&S#eq&V#eq&Y#eq&`#eq&c#eq&e#eq%U#eq%Y#eq~O#V+iOx$yay$ya~Om/iOt/wOy&ni~P'UOx+kOy&ni~Oy$SO%r+mOe&pXx&pX~O%mVOe&pXx&pX~Ox+qOe&oX~Oe+sO~O%T+uO~OT%OO_%OOm/iOt/wOe%|i~P'UOy+wOx$ca!U$ca~Om/iOt/wOy+xOx$ca!U$ca~P'UOm/iOt/wOy*RO!U&Pi~P'UOx+{O!U&Pi~Om/iOt/wOx+{O!U&Pi~P'UOx+{Oy,OO!U&Pi~Oe$_ix$_i!U$_i~P$bOT'wOm/iOt/wO~P'UOl,QO~OT'wOe,ROm/iOt/wO~P'UOT'wOm/iOt/wO!U%zq~P'UOx$^i!Y$^i#^$^i%V$^i%Y$^ie$^iy$^i!j$^i%r$^i~P$bOT(WOm/iOt/wO~P'UO_*lOm/iOt/wO!Y%{q~P'UOx,SO!Y%{q~O!Y,TO~OT(WOm/iOt/wO!Y%uq#^%uq%V%uq%Y%uqe%uqy%uq!j%uq%r%uq~P'UOy,UO~OT*pOm/iOt/wOy&[i!Y&[i!j&[i~P'UOx,ZOy&[i!Y&[i!j&[i~O!Z#^O&^*tO!Y!ka~OT&TOm/iOt/wO#^%`i%V%`i%Y%`i%r%`i~P'UOx,]O#^%`i%V%`i%Y%`i%r%`i~O%mVO#^&ja%V&ja%Y&jae&ja~Ox,`O#^&ja%V&ja%Y&jae&ja~Oe,cO~Ol$wix$wi~P$bOT)ZO~P'UOT)ZOl&mq~P'UOr,fOP#dyT#dyd#dyf#dym#dyq#dyt#dy}#dy!O#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy#v#dy%S#dy%V#dy%g#dy%h#dy%l#dy%m#dy&R#dy&S#dy&V#dy&Y#dy&`#dy&c#dy&e#dy%U#dy%Y#dy~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%U,jO%Y,jO~P'UO#h,kOP#eyT#eyd#eyf#eym#eyq#eyt#ey}#ey!O#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey#v#ey%S#ey%V#ey%g#ey%h#ey%l#ey%m#ey&R#ey&S#ey&V#ey&Y#ey&`#ey&c#ey&e#ey%U#ey%Y#ey~Om/iOt/wOy&nq~P'UOx,oOy&nq~O%r+mOe&pax&pa~OT)pO_)qO%i)rO%mVOe&oa~Ox,sOe&oa~O#y,wO~OT%OO_%OOm/iOt/wO~P'UOm/iOt/wOy,xOx$ci!U$ci~P'UOm/iOt/wOx$ci!U$ci~P'UOy,xOx$ci!U$ci~Om/iOt/wOy*RO~P'UOm/iOt/wOy*RO!U&Pq~P'UOx,{O!U&Pq~Om/iOt/wOx,{O!U&Pq~P'UOq-OO!R%eO!S%dOe%vq!U%vq!Y%vqx%vq~P!,}O_*lOm/iOt/wO!Y%{y~P'UOx$ai!Y$ai~P$bO_*lOm/iOt/wO~P'UOT*pOm/iOt/wO~P'UOT*pOm/iOt/wOy&[q!Y&[q!j&[q~P'UOT&TOm/iOt/wO#^%`q%V%`q%Y%`q%r%`q~P'UO#V-SOx$ra#^$ra%V$ra%Y$rae$ra~O%mVO#^&ji%V&ji%Y&jie&ji~Ox-UO#^&ji%V&ji%Y&jie&ji~Or-XOP#d!RT#d!Rd#d!Rf#d!Rm#d!Rq#d!Rt#d!R}#d!R!O#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R#v#d!R%S#d!R%V#d!R%g#d!R%h#d!R%l#d!R%m#d!R&R#d!R&S#d!R&V#d!R&Y#d!R&`#d!R&c#d!R&e#d!R%U#d!R%Y#d!R~Om/iOt/wOy&ny~P'UOT)pO_)qO%i)rO%mVOe&oi~O#y,wO%U-_O%Y-_O~OT-iOf-gO!V-fO!Z-hO!f-bO!n-dO!o-dO%h-aO%mVO&R[O&S]O&V^O~Om/iOt/wOx$cq!U$cq~P'UOy-nOx$cq!U$cq~Om/iOt/wOy*RO!U&Py~P'UOx-oO!U&Py~Om/iOt-sO~P'UOq-OO!R%eO!S%dOe%vy!U%vy!Y%vyx%vy~P!,}O%mVO#^&jq%V&jq%Y&jqe&jq~Ox-wO#^&jq%V&jq%Y&jqe&jq~OT)pO_)qO%i)rO%mVO~Of-{O!d-yOx#zX#V#zX%b#zXe#zX~Oq#zXy#zX!U#zX!Y#zX~P$$nO%g-}O%h-}Oq#{Xx#{Xy#{X#V#{X%b#{X!U#{Xe#{X!Y#{X~O!f.PO~Ox.TO#V.VO%b.QOq&rXy&rX!U&rXe&rX~O_.YO~P$ WOf-{Oq&sXx&sXy&sX#V&sX%b&sX!U&sXe&sX!Y&sX~Oq.^Oy$nO~Om/iOt/wOx$cy!U$cy~P'UOm/iOt/wOy*RO!U&P!R~P'UOx.bO!U&P!R~Oe%yXq%yX!R%yX!S%yX!U%yX!Y%yXx%yX~P!,}Oq-OO!R%eO!S%dOe%xa!U%xa!Y%xax%xa~O%mVO#^&jy%V&jy%Y&jye&jy~O!d-yOf$Raq$Rax$Ray$Ra#V$Ra%b$Ra!U$Rae$Ra!Y$Ra~O!f.kO~O%g-}O%h-}Oq#{ax#{ay#{a#V#{a%b#{a!U#{ae#{a!Y#{a~O%b.QOq$Pax$Pay$Pa#V$Pa!U$Pae$Pa!Y$Pa~Oq&ray&ra!U&rae&ra~P#NzOx.pOq&ray&ra!U&rae&ra~O!U.sO~Oe.sO~Oy.uO~O!Y.vO~Om/iOt/wOy*RO!U&P!Z~P'UOy.yO~O%r.zO~P$$nOx.{O#V.VO%b.QOe&uX~Ox.{Oe&uX~Oe.}O~O!f/OO~O#V.VOq$}ax$}ay$}a%b$}a!U$}ae$}a!Y$}a~O#V.VO%b.QOq%Rax%Ray%Ra!U%Rae%Ra~Oq&riy&ri!U&rie&ri~P#NzOx/QO#V.VO%b.QO!Y&ta~Oy$Za~P$bOe&ua~P#NzOx/YOe&ua~O_/[O!Y&ti~P$ WOx/^O!Y&ti~Ox/^O#V.VO%b.QO!Y&ti~O#V.VO%b.QOe$Xix$Xi~O%r/aO~P$$nO#V.VO%b.QOe%Qax%Qa~Oe&ui~P#NzOy/dO~O_/[O!Y&tq~P$ WOx/fO!Y&tq~O#V.VO%b.QOx%Pi!Y%Pi~O_/[O~P$ WO_/[O!Y&ty~P$ WO#V.VO%b.QOe$Yix$Yi~O#V.VO%b.QOx%Pq!Y%Pq~Ox*xO#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOm/iOt/wO~P'UOl/nO~Om/nO~P'UOy/oO~Or/pO~P!,}O&S&V&c&e&R!Z&Z&a&d&f&Y&`&Y%m~",goto:"!9p&vPPPP&wP'P*e*}+h,S,o-]P-zP'P.k.k'PPPP'P2PPPPPPP2P4oPP4oP6{7U=QPP=T=c=fPP'P'PPP=rPP'P'PPP'P'P'P'P'P=v>m'PP>pP>vByFcPFw'PPPPF{GR&wP&w&wP&wP&wP&wP&wP&w&w&wP&wPP&wPP&wPGXPG`GfPG`PG`G`PPPG`PIePInItIzIePG`JQPG`PJXJ_PJcJwKfLPJcJcLVLdJcJcJcJcLxMOMRMWMZMaMgMsNVN]NgNm! Z! a! g! m! w! }!!T!!Z!!a!!g!!y!#T!#Z!#a!#g!#q!#w!#}!$T!$Z!$e!$k!$u!${!%U!%[!%k!%s!%}!&UPPPPPPPPP!&[!&d!&m!&w!'SPPPPPPPPPPPP!+r!,[!0j!3vPP!4O!4^!4g!5]!5S!5f!5l!5o!5r!5u!5}!6nPPPPPPPPPP!6q!6tPPPPPPPPP!6z!7W!7d!7j!7s!7v!7|!8S!8Y!8]P!8e!8n!9j!9m]iOr#n$n)c+c'udOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x}!dP#j#w$Y$h$t%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!P!eP#j#w$Y$h$t$v%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!R!fP#j#w$Y$h$t$v$w%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!T!gP#j#w$Y$h$t$v$w$x%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!V!hP#j#w$Y$h$t$v$w$x$y%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!X!iP#j#w$Y$h$t$v$w$x$y$z%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!]!iP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m'uSOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x&ZUOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/x%eWOXYZhrv|}!R!S!T!X!j!l#^#k#n$Q$S$U$X$l$n%O%T%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#}uQ.c-sR/u/w'ldOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xW#ql!O!P$`W#yu&b-s/wQ$b!QQ$r!YQ$s!ZW$}!j'h*O+vS&a#z#{Q'R$mQ(l&ZQ(z&qU({&s(|(}U)O&u)P+RQ)n'[W)o'^+q,s-]S+p)p)qY,_*|,`-T-U-wQ,b+OQ,l+gQ,n+il-`,w-f-g-i.R.T.Y.p.u.z/P/[/a/dQ-v-SQ.Z-hQ.g-{Q.r.VU/V.{/Y/bX/]/Q/^/e/fR&`#yi!xXY!S!T%a%h'y(R)V*]*`*bR%_!wQ!|XQ%z#^Q&i$UR&l$XT-r-O.y![!kP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mQ&^#rR'a$sR'g$}Q%W!nR.e-y'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xS#hc#i!P-d,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/f'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xT#hc#iS#__#`S#b`#cS#da#eS#fb#gT*t(e*uT(f%z(hQ$WwR+o)oX$Uw$V$W&kZkOr$n)c+cXoOr)c+cQ$o!WQ&y$fQ&z$gQ']$qQ'`$sQ)a'QQ)g'VQ)i'WQ)j'XQ)w'_Q)y'aQ+V)VQ+X)WQ+Y)XQ+^)_S+`)b)xQ+d)eQ+e)fQ+f)hQ,d+UQ,e+WQ,g+_Q,h+aQ,m+hQ-W,fQ-Y,kQ-Z,lQ-x-XQ._-lR.x.`WoOr)c+cR#tnQ'_$rR)b'RQ+n)oR,q+oQ)x'_R+a)bZmOnr)c+cQ'c$tR){'dT,u+u,vu-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dt-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dQ.Z-hX/]/Q/^/e/f!P-c,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/fQ.O-bR.l.Pg.R-e.S.h.o.t/S/U/W/c/g/hu-j,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dX-|-`-j.g/VR.i-{V/X.{/Y/bR.`-lQrOR#vrQ&c#|R(q&cS%n#R$OS(Y%n(]T(]%q&eQ%b!zQ%i!}W'z%b%i(P(TQ(P%fR(T%kQ&n$YR(w&nQ(`%rQ*g(ZT*m(`*gQ'i%PR*P'iS'l%S%TY*T'l*U+|,|-pU*U'm'n'oU+|*V*W*XS,|+},OR-p,}Q#Y]R%u#YQ#]^R%w#]Q#`_R%{#`Q(c%xS*r(c*sR*s(dQ*u(eR,[*uQ#c`R%}#cQ#eaR&O#eQ#gbR&P#gQ#icR&Q#iQ#lfQ&S#jW&V#l&S(t*yQ(t&hR*y/mQ$VwS&j$V&kR&k$WQ&x$dR)T&xQ&[#qR(m&[Q$`!PR&r$`Q*}({S,a*}-VR-V,bQ&v$bR)Q&vQ#ojR&X#oQ+c)cR,i+cQ)U&yR+T)UQ&|$hS)]&|)^R)^&}Q'U$oR)d'UQ'Z$pS)m'Z+lR+l)nQ+r)sR,t+rWnOr)c+cR#snQ,v+uR-^,vd.S-e.h.o.t/S/U/W/c/g/hR.n.SU-z-`.g/VR.f-zQ/R.tS/_/R/`R/`/SS.|.h.iR/Z.|Q.U-eR.q.USqOrT+b)c+cWpOr)c+cR'S$nYjOr$n)c+cR&W#n[wOr#n$n)c+cR&i$U&YPOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/xQ!oSQ#jeQ#wsU$Yx%d'}S$h!U$kQ$t![Q$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ${!iQ%f!{Q%k#OQ%q#SQ%r#TQ&e$PQ&}$iQ'd$uQ(j&TU(u&m(v*zW)Y&{)[+[+]Q*Z'wQ*d(WQ+Z)ZQ,V*lQ.w.^R/m/rQ!zXQ!}YQ$f!SQ$g!T^'v%a%h'y(R*]*`*bR+W)V[fOr#n$n)c+ch!wXY!S!T%a%h'y(R)V*]*`*bQ#RZQ#mhS$Ov|Q$]}W$d!R$X'O)`S$p!X$lW$|!j'h*O+vQ%S!lQ%x#^`&U#k&R(i(k(s*x,]/qQ&f$QQ&g$SQ&h$UQ'e%OQ'o%TQ'u%_W(V%m(X*e*iQ(Z%oQ(d%yQ(o&`S(r&d/oQ(x&oQ(y&pU)R&w)S+SQ)h'VY)k'Y)l+j+k,oQ)|'g^*Q'k*S+z+{,{-o.bQ*W'mQ*X'nS*Y'r/pW*k(_*f,S,WW*o(b*q,Y,ZQ+t)vQ+y*RQ+}*VQ,X*pQ,^*{Q,p+nQ,y+wQ,z+xQ,},OQ-R,UQ-[,qQ-m,xR.a-nhTOr#k#n$n&R&d'r(i(k)c+c$z!vXYZhv|}!R!S!T!X!j!l#^$Q$S$U$X$l%O%T%_%a%h%m%o%y&`&o&p&w'O'V'Y'g'h'k'm'n'y(R(X(_(b(s)S)V)`)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#xtW%X!p!t/j/tQ%Y!qQ%Z!rQ%]!uQ%g/iS'q%[/nQ's/kQ't/lQ,P*^Q-Q,QS-q-O.yR/v/xU#|u-s/wR(p&b[gOr#n$n)c+cX!yX#^$U$XQ#WZQ$RvR$[|Q%c!zQ%j!}Q%p#RQ'e$|Q(Q%fQ(U%kQ(^%qQ(a%rQ*h(ZQ-P,PQ-u-QR.d-tQ$ZxQ'|%dR*_'}Q-t-OR/T.yR#QYR#VZR%R!jQ%P!jV)}'h*O+v!]!mP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mR%U!lR%z#^Q(g%zR*w(hQ$e!RQ&l$XQ)_'OR+_)`Q#rlQ$^!OQ$a!PR&t$`Q(z&sR+Q(}Q(z&sQ+P(|R+Q(}R$c!QXpOr)c+cQ$j!UR'P$kQ$q!XR'Q$lR)u'^Q)s'^V,r+q,s-]Q-l,wQ.W-fR.X-gU-e,w-f-gQ.]-iQ.h-{Q.m.RU.o.T.p/PQ.t.YQ/S.uQ/U.zU/W.{/Y/bQ/c/[Q/g/aR/h/dR.[-hR.j-{",nodeNames:" print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:267,context:trackIndent,nodeProps:[["group",-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,23,38,47,48,54,55,58,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-10,105,107,110,112,113,117,119,124,126,129,"Statement",-9,134,135,138,139,141,142,143,144,145,"Pattern"],["openedBy",21,"(",52,"[",56,"{"],["closedBy",22,")",53,"]",57,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,2],repeatNodeCount:38,tokenData:")'WMgR!`OX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr!Gkrs!Ktst#J]tu%Tuv&'{vw&*kwx&+}xy'*fyz'+rz{'-O{|'/z|}'1^}!O'2j!O!P'5]!P!Q'Ae!Q!R'Da!R!['Ho![!](&g!]!^()V!^!_(*c!_!`(-_!`!a(.q!a!b%T!b!c(1j!c!d(3O!d!e(4|!e!h(3O!h!i(?z!i!t(3O!t!u(J[!u!w(3O!w!x(>S!x!}(3O!}#O(Ll#O#P!Fp#P#Q(Mx#Q#R) U#R#S(3O#S#T%T#T#U(3O#U#V(4|#V#Y(3O#Y#Z(?z#Z#f(3O#f#g(J[#g#i(3O#i#j(>S#j#o(3O#o#p)!h#p#q)#d#q#r)$v#r#s)%z#s$g%T$g;'S(3O;'S;=`(4v<%lO(3O<r%f]&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<Q&j]&^7[&TS&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c<Q'r]&^7[&TS&WW&Z`&d!b&f#tOr'crs&_sw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c;p(t]&^7[&WW&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p)z]&^7[&TS&WW&d!b&f#tOr)mrs*ssw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p*|]&^7[&TS&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p,O]&^7[&TS&d!bOr)mrs,wsw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m8r-QZ&^7[&TS&d!bOw,wwx-sx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r-xZ&^7[Ow,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r.pZ&^7[Ow,wwx/cx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w7[/hT&^7[O#o/c#p#q/c#r;'S/c;'S;=`/w<%lO/c7[/zP;=`<%l/c8r0SW&^7[O#o,w#o#p0l#p#q,w#q#r0l#r;'S,w;'S;=`7Q;=`<%l0l<%lO,w!f0sX&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f1cXOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2RWOw0lx#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2nRO;'S0l;'S;=`2w;=`O0l!f3OY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l0l<%lO0l!f3sX&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p0l#p;'S4`;'S;=`6t<%lO4`S4eV&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S4}VOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5gUOw4`x#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5|RO;'S4`;'S;=`6V;=`O4`S6[W&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`S6wP;=`<%l4`!f6}P;=`<%l0l8r7XY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l,w<%lO0l8r7zP;=`<%l,w;p8SW&^7[O#o)m#o#p8l#p#q)m#q#r8l#r;'S)m;'S;=`Jf;=`<%l8l<%lO)m%d8wZ&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d9qZ&TS&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d:kZ&TS&d!bOr8lrs0lsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d;eZ&WW&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d<_Z&WW&f#tOr8lrs9jsw8lwx=Qx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l#|=XX&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|=wXOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|>gWOr=Qs#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|?SRO;'S=Q;'S;=`?];=`O=Q#|?dY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l=Q<%lO=Q#|@XX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p=Q#p;'S@t;'S;=`CY<%lO@tW@yV&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWAcVOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWA{UOr@ts#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWBbRO;'S@t;'S;=`Bk;=`O@tWBpW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l@t<%lO@tWC]P;=`<%l@t#|CcP;=`<%l=Q%dCiRO;'S8l;'S;=`Cr;=`O8l%dC}[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l8l<%lO8l%dDzZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p8l#p;'SEm;'S;=`JY<%lOEm[EtX&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[FfX&TSOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GWX&TSOrEmrs4`swEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GxX&WWOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[HjX&WWOrEmrsFaswEmwx@tx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[IYRO;'SEm;'S;=`Ic;=`OEm[IjY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%lEm<%lOEm[J]P;=`<%lEm%dJcP;=`<%l8l;pJq[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l)m<%lO8l;pKjP;=`<%l)m;pKv]&^7[&WW&f#tOr)mrs*ssw)mwxLox#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m:YLxZ&^7[&WW&f#tOrLorsMks#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YMpZ&^7[OrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YNhZ&^7[OrLors/cs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:Y! `W&^7[O#oLo#o#p=Q#p#qLo#q#r=Q#r;'SLo;'S;=`! x;=`<%l=Q<%lOLo:Y!!PY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%lLo<%lO=Q:Y!!rP;=`<%lLo<Q!!zW&^7[O#o'c#o#p!#d#p#q'c#q#r!#d#r;'S'c;'S;=`!+^;=`<%l!#d<%lO'c%t!#qZ&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!$mZ&TS&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!%iZ&TS&Z`&d!bOr!#drs!&[sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d!v!&eX&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w<%lO!&[!v!'TRO;'S!&[;'S;=`!'^;=`O!&[!v!'gY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!&[<%lO!&[!v!([X&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p!&[#p;'S4`;'S;=`6t<%lO4`!v!(zP;=`<%l!&[%t!)QRO;'S!#d;'S;=`!)Z;=`O!#d%t!)h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l!#d<%lO!#d%t!*eZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!#d#p;'SEm;'S;=`JY<%lOEm%t!+ZP;=`<%l!#d<Q!+k[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l'c<%lO!#d<Q!,dP;=`<%l'c<Q!,r]&^7[&TS&Z`&d!bOr'crs!-ksw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c9S!-vZ&^7[&TS&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-k9S!.nW&^7[O#o!-k#o#p!&[#p#q!-k#q#r!&[#r;'S!-k;'S;=`!/W;=`<%l!&[<%lO!-k9S!/aY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!-k<%lO!&[9S!0SP;=`<%l!-k<b!0b]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!1j]&^7[&TS&WW&ap&d!b&f#tOr!1Zrs*ssw!1Zwx!0Vx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!2hW&^7[O#o!1Z#o#p!3Q#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!:z;=`<%l!3Q<%lO!1Z&U!3_Z&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!4ZZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!5VZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!5xx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q$n!6RX&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e<%lO!5x$n!6qRO;'S!5x;'S;=`!6z;=`O!5x$n!7TY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!5x<%lO!5x$n!7xX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p!5x#p;'S@t;'S;=`CY<%lO@t$n!8hP;=`<%l!5x&U!8nRO;'S!3Q;'S;=`!8w;=`O!3Q&U!9U[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!3Q<%lO!3Q&U!:RZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!3Q#p;'SEm;'S;=`JY<%lOEm&U!:wP;=`<%l!3Q<b!;X[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!1Z<%lO!3Q<b!<QP;=`<%l!1Z<b!<`]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!=Xx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z:z!=dZ&^7[&WW&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=X:z!>[W&^7[O#o!=X#o#p!5x#p#q!=X#q#r!5x#r;'S!=X;'S;=`!>t;=`<%l!5x<%lO!=X:z!>}Y&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!=X<%lO!5x:z!?pP;=`<%l!=X<r!?xW&^7[O#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T&f!@qZ&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@b&f!AgRO;'S!@b;'S;=`!Ap;=`O!@b&f!BP[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l!@b<%lO!@b&f!B|Z&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEm&f!CrP;=`<%l!@b<r!DU[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l%T<%lO!@b<r!D}P;=`<%l%TMg!Eec&^7[&TS&WW%[1s&Z`&ap&d!b&f#tOX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr%Trs&_sw%Twx!0Vx#O%T#O#P!Fp#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg!Fu[&^7[OY%TYZ!EQZ]%T]^!EQ^#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T<u!G|d&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#T%T#T#U!Jh#U#f%T#f#g!Jh#g#h!Jh#h#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!Io]kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!J{]!jR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{!LTa&bp&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs#HTsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!Mka&^7[&TS&WW&R,X&Z`&d!b&f#tOY!MYYZ'cZ]!MY]^'c^r!MYrs!Npsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!N}]&^7[&TS&R,X&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cFy#!Ra&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#;fx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy##ga&^7[&TS&WW&R,X&d!b&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx# vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy#$w]&^7[&TS&R,X&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy#%uW&^7[O#o##W#o#p#&_#p#q##W#q#r#&_#r;'S##W;'S;=`#:P;=`<%l#&_<%lO##W0m#&l_&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#'tZ&TS&R,X&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m#(p_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#)ox#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#)x_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#*wx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_/V#+Q]&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q<%lO#*w/V#,OX&R,XOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q/V#,nRO;'S#*w;'S;=`#,w;=`O#*w/V#-Q^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#*w<%lO#*w/V#.T]&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P#o#.|#o#p#*w#p;'S#.|;'S;=`#1k<%lO#.|,a#/TZ&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k<%lO#.|,a#/{V&R,XOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@t,a#0eRO;'S#.|;'S;=`#0n;=`O#.|,a#0u[&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k;=`<%l#.|<%lO#.|,a#1nP;=`<%l#.|/V#1tP;=`<%l#*w0m#1zRO;'S#&_;'S;=`#2T;=`O#&_0m#2b`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l#&_<%lO#&_0m#3m_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#&_#p;'S#4l;'S;=`#9s<%lO#4l,e#4u]&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#5uX&TS&R,XOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e#6i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#7bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#7i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#.|x#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#8eRO;'S#4l;'S;=`#8n;=`O#4l,e#8w^&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s;=`<%l#4l<%lO#4l,e#9vP;=`<%l#4l0m#9|P;=`<%l#&_Fy#:^`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l##W<%lO#&_Fy#;cP;=`<%l##WFy#;qa&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#<vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WEc#=R_&^7[&WW&R,X&f#tOY#<vYZLoZ]#<v]^Lo^r#<vrs#>Qs#O#<v#O#P#>z#P#o#<v#o#p#-|#p#q#<v#q#r#*w#r;'S#<v;'S;=`#@n<%lO#<vEc#>XZ&^7[&R,XOrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLoEc#?PW&^7[O#o#<v#o#p#*w#p#q#<v#q#r#*w#r;'S#<v;'S;=`#?i;=`<%l#*w<%lO#<vEc#?r^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#<v<%lO#*wEc#@qP;=`<%l#<vGZ#@yW&^7[O#o!MY#o#p#Ac#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#Fl;=`<%l#Ac<%lO!MY0}#Ar_&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff<%lO#Ac0}#B|Z&TS&R,X&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d0}#CrRO;'S#Ac;'S;=`#C{;=`O#Ac0}#D[`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l#Ac<%lO#Ac0}#Eg_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#Ac#p;'S#4l;'S;=`#9s<%lO#4l0}#FiP;=`<%l#AcGZ#F{`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l!MY<%lO#AcGZ#HQP;=`<%l!MYGZ#Hb]&^7[&TS&R,X&Z`&d!bOr'crs#IZsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ#IjZ&X#|&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kMg#JpaQ1s&^7[&TS&WW&Z`&ap&d!b&f#tOY#J]YZ%TZ]#J]]^%T^r#J]rs#Kusw#J]wx%;ax#O#J]#O#P& a#P#o#J]#o#p&%b#p#q#J]#q#r&!^#r;'S#J];'S;=`&'u<%lO#J]Lu#LSaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%6usw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLu#MjaQ1s&^7[&TS&WW&Z`&d!b&f#tOY#MXYZ'cZ]#MX]^'c^r#MXrs#Kusw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLe#NzaQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%#ix#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$!`aQ1s&^7[&TS&WW&d!b&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$#paQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$$usw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$%QaQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$&Vsw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PIg$&b_Q1s&^7[&TS&d!bOY$&VYZ,wZ]$&V]^,w^w$&Vwx$'ax#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$'h_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$(gx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$(n_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$)mx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VHP$)tZQ1s&^7[OY$)mYZ/cZ]$)m]^/c^#o$)m#o#p$*g#p#q$)m#q#r$*g#r;'S$)m;'S;=`$+R<%lO$)m1s$*lTQ1sOY$*gZ]$*g^;'S$*g;'S;=`$*{<%lO$*g1s$+OP;=`<%l$*gHP$+UP;=`<%l$)mIg$+`[Q1s&^7[OY$&VYZ,wZ]$&V]^,w^#o$&V#o#p$,U#p#q$&V#q#r$,U#r;'S$&V;'S;=`$5j;=`<%l0l<%lO$&V3Z$,_]Q1s&TS&d!bOY$,UYZ0lZ]$,U]^0l^w$,Uwx$-Wx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$-]]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$.Ux#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$.Z]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$*gx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$/XWQ1sOY$,UYZ0lZ]$,U]^0l^;'S$,U;'S;=`$/q;=`<%l0l<%lO$,U3Z$/xY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$,U<%lO0l3Z$0o]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p$,U#p;'S$1h;'S;=`$5^<%lO$1h1w$1oZQ1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$2gZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$3Yx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$3_ZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$*gx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$4VWQ1sOY$1hYZ4`Z]$1h]^4`^;'S$1h;'S;=`$4o;=`<%l4`<%lO$1h1w$4tW&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l$1h<%lO4`1w$5aP;=`<%l$1h3Z$5gP;=`<%l$,UIg$5qY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$&V<%lO0lIg$6dP;=`<%l$&VLe$6n[Q1s&^7[OY$!PYZ)mZ]$!P]^)m^#o$!P#o#p$7d#p#q$!P#q#r$7d#r;'S$!P;'S;=`%!b;=`<%l8l<%lO$!P6X$7q_Q1s&TS&WW&d!b&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$8y_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$9xsw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$:R_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$,Usw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$;Z_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$<Yx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$<c_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$=bx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d4q$=k]Q1s&WW&f#tOY$=bYZ=QZ]$=b]^=Q^r$=brs$>ds#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$>i]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$?bs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$?g]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$*gs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$@eWQ1sOY$=bYZ=QZ]$=b]^=Q^;'S$=b;'S;=`$@};=`<%l=Q<%lO$=b4q$AUY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l$=b<%lO=Q4q$A{]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p$=b#p;'S$Bt;'S;=`$Fj<%lO$Bt1{$B{ZQ1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$CsZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Dfs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$DkZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$*gs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$EcWQ1sOY$BtYZ@tZ]$Bt]^@t^;'S$Bt;'S;=`$E{;=`<%l@t<%lO$Bt1{$FQW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l$Bt<%lO@t1{$FmP;=`<%l$Bt4q$FsP;=`<%l$=b6X$F{WQ1sOY$7dYZ8lZ]$7d]^8l^;'S$7d;'S;=`$Ge;=`<%l8l<%lO$7d6X$Gp[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$7d<%lO8l6X$Ho_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p$7d#p;'S$In;'S;=`%!U<%lO$In2P$Iw]Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Jw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$Kpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Kw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$1hsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Lw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Mpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Mw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Btx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$NuWQ1sOY$InYZEmZ]$In]^Em^;'S$In;'S;=`% _;=`<%lEm<%lO$In2P% fY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%l$In<%lOEm2P%!XP;=`<%l$In6X%!_P;=`<%l$7dLe%!m[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$!P<%lO8lLe%#fP;=`<%l$!PLe%#taQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%$yx#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PJ}%%U_Q1s&^7[&WW&f#tOY%$yYZLoZ]%$y]^Lo^r%$yrs%&Ts#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%&[_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs%'Zs#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%'b_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs$)ms#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%(h[Q1s&^7[OY%$yYZLoZ]%$y]^Lo^#o%$y#o#p$=b#p#q%$y#q#r$=b#r;'S%$y;'S;=`%)^;=`<%l=Q<%lO%$yJ}%)eY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l%$y<%lO=QJ}%*WP;=`<%l%$yLu%*b[Q1s&^7[OY#MXYZ'cZ]#MX]^'c^#o#MX#o#p%+W#p#q#MX#q#r%+W#r;'S#MX;'S;=`%5l;=`<%l!#d<%lO#MX6i%+g_Q1s&TS&WW&Z`&d!b&f#tOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%,fsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%,q_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%-psw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%-{_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%.zsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W3k%/V]Q1s&TS&Z`&d!bOY%.zYZ!&[Z]%.z]^!&[^w%.zwx$-Wx#O%.z#O#P%0O#P#o%.z#o#p%1f#p;'S%.z;'S;=`%2f<%lO%.z3k%0TWQ1sOY%.zYZ!&[Z]%.z]^!&[^;'S%.z;'S;=`%0m;=`<%l!&[<%lO%.z3k%0vY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%.z<%lO!&[3k%1m]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p%.z#p;'S$1h;'S;=`$5^<%lO$1h3k%2iP;=`<%l%.z6i%2qWQ1sOY%+WYZ!#dZ]%+W]^!#d^;'S%+W;'S;=`%3Z;=`<%l!#d<%lO%+W6i%3h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l%+W<%lO!#d6i%4g_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%+W#p;'S$In;'S;=`%!U<%lO$In6i%5iP;=`<%l%+WLu%5y[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l#MX<%lO!#dLu%6rP;=`<%l#MXLu%7SaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%8Xsw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXIw%8f_Q1s&^7[&TS&Z`&d!bOY%8XYZ!-kZ]%8X]^!-k^w%8Xwx$'ax#O%8X#O#P%9e#P#o%8X#o#p%1f#p#q%8X#q#r%.z#r;'S%8X;'S;=`%;Z<%lO%8XIw%9l[Q1s&^7[OY%8XYZ!-kZ]%8X]^!-k^#o%8X#o#p%.z#p#q%8X#q#r%.z#r;'S%8X;'S;=`%:b;=`<%l!&[<%lO%8XIw%:kY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%8X<%lO!&[Iw%;^P;=`<%l%8XMV%;naQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%Jux#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%=UaQ1s&^7[&TS&WW&ap&d!b&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%;ax#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%>b[Q1s&^7[OY%<sYZ!1ZZ]%<s]^!1Z^#o%<s#o#p%?W#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Il;=`<%l!3Q<%lO%<s6y%?g_Q1s&TS&WW&ap&d!b&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%@fx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%@q_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Apx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%A{_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Bzx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W5c%CV]Q1s&WW&ap&f#tOY%BzYZ!5xZ]%Bz]^!5x^r%Bzrs$>ds#O%Bz#O#P%DO#P#o%Bz#o#p%Ef#p;'S%Bz;'S;=`%Ff<%lO%Bz5c%DTWQ1sOY%BzYZ!5xZ]%Bz]^!5x^;'S%Bz;'S;=`%Dm;=`<%l!5x<%lO%Bz5c%DvY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%Bz<%lO!5x5c%Em]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p%Bz#p;'S$Bt;'S;=`$Fj<%lO$Bt5c%FiP;=`<%l%Bz6y%FqWQ1sOY%?WYZ!3QZ]%?W]^!3Q^;'S%?W;'S;=`%GZ;=`<%l!3Q<%lO%?W6y%Gh[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%?W<%lO!3Q6y%Hg_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%?W#p;'S$In;'S;=`%!U<%lO$In6y%IiP;=`<%l%?WMV%Iy[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%<s<%lO!3QMV%JrP;=`<%l%<sMV%KSaQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%LXx#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sKo%Lf_Q1s&^7[&WW&ap&f#tOY%LXYZ!=XZ]%LX]^!=X^r%LXrs%&Ts#O%LX#O#P%Me#P#o%LX#o#p%Ef#p#q%LX#q#r%Bz#r;'S%LX;'S;=`& Z<%lO%LXKo%Ml[Q1s&^7[OY%LXYZ!=XZ]%LX]^!=X^#o%LX#o#p%Bz#p#q%LX#q#r%Bz#r;'S%LX;'S;=`%Nb;=`<%l!5x<%lO%LXKo%NkY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%LX<%lO!5xKo& ^P;=`<%l%LXMg& h[Q1s&^7[OY#J]YZ%TZ]#J]]^%T^#o#J]#o#p&!^#p#q#J]#q#r&!^#r;'S#J];'S;=`&&p;=`<%l!@b<%lO#J]7Z&!o_Q1s&TS&WW&Z`&ap&d!b&f#tOY&!^YZ!@bZ]&!^]^!@b^r&!^rs%,fsw&!^wx%@fx#O&!^#O#P&#n#P#o&!^#o#p&%b#p;'S&!^;'S;=`&&j<%lO&!^7Z&#sWQ1sOY&!^YZ!@bZ]&!^]^!@b^;'S&!^;'S;=`&$];=`<%l!@b<%lO&!^7Z&$l[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l&!^<%lO!@b7Z&%k_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p&!^#p;'S$In;'S;=`%!U<%lO$In7Z&&mP;=`<%l&!^Mg&'P[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l#J]<%lO!@bMg&'xP;=`<%l#J]Gz&(`_%jQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&)r]!s,W&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&+O_%dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{&,^a&_`&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx'(^x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk&-ta&^7[&TS&WW&R,X&ap&d!b&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx&Mwx#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cFy&/Ua&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Hisw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&0ja&^7[&TS&WW&R,X&d!b&f#tOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&.ysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&1z]&^7[&WW&R,X&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy&2xW&^7[O#o&0Z#o#p&3b#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&GS;=`<%l&3b<%lO&0Z0m&3o_&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&4w_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&5vsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&6P_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&7Osw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b-o&7X]&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x<%lO&7O-o&8VX&R,XOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l-o&8uRO;'S&7O;'S;=`&9O;=`O&7O-o&9X^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&7O<%lO&7O-o&:[]&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P#o&;T#o#p&7O#p;'S&;T;'S;=`&=r<%lO&;T,]&;[Z&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r<%lO&;T,]&<SV&R,XOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`,]&<lRO;'S&;T;'S;=`&<u;=`O&;T,]&<|[&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r;=`<%l&;T<%lO&;T,]&=uP;=`<%l&;T-o&={P;=`<%l&7O0m&>XZ&WW&R,X&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m&>}RO;'S&3b;'S;=`&?W;=`O&3b0m&?e`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&3b<%lO&3b0m&@p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p&3b#p;'S&Ao;'S;=`&Fv<%lO&Ao,e&Ax]&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Bx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Cqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Cx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&;Tsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&DxX&WW&R,XOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e&EhRO;'S&Ao;'S;=`&Eq;=`O&Ao,e&Ez^&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv;=`<%l&Ao<%lO&Ao,e&FyP;=`<%l&Ao0m&GPP;=`<%l&3bFy&Ga`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&0Z<%lO&3bFy&HfP;=`<%l&0ZFy&Hta&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Iysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZC{&JU_&^7[&TS&R,X&d!bOY&IyYZ,wZ]&Iy]^,w^w&Iywx&KTx#O&Iy#O#P&K}#P#o&Iy#o#p&:T#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Mq<%lO&IyC{&K[Z&^7[&R,XOw,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,wC{&LSW&^7[O#o&Iy#o#p&7O#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Ll;=`<%l&7O<%lO&IyC{&Lu^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&Iy<%lO&7OC{&MtP;=`<%l&IyGk&NU]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk' SW&^7[O#o&-c#o#p' l#p#q&-c#q#r' l#r;'S&-c;'S;=`'&u;=`<%l' l<%lO&-c1_' {_&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o<%lO' l1_'#VZ&WW&R,X&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q1_'#{RO;'S' l;'S;=`'$U;=`O' l1_'$e`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l' l<%lO' l1_'%p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p' l#p;'S&Ao;'S;=`&Fv<%lO&Ao1_'&rP;=`<%l' lGk''U`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l&-c<%lO' lGk'(ZP;=`<%l&-cGk'(k]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx')dx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk')sZ&U!f&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XG{'*y]f,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u',V]eR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'-caT,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vxz%Tz{'.h{!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'.{__R&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'0__%g,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u'1q]xR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg'2}`%h,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`!a'4P!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TB^'4d]&q&j&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'5pa!dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'6u!P!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'7W_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'8V!P#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'8j]!m,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'9vi!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'9c#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy';vc&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx{%T{|'=R|}%T}!O'=R!O!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'=d_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'>ve!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'>c#S#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'@l]!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'Axa%iR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!P%T!P!Q'B}!Q!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz'Cb_%kQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Dtw!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!d%T!d!e'Jw!e!g%T!g!h';e!h!l%T!l!m'@X!m!q%T!q!r'M}!r!z%T!z!{(!}!{#O%T#O#P!?s#P#R%T#R#S'Ho#S#U%T#U#V'Jw#V#X%T#X#Y';e#Y#^%T#^#_'@X#_#c%T#c#d'M}#d#l%T#l#m(!}#m#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Gp_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'ISk!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'Ho#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'KYb&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Lub!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'N`a&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy( xa!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(#`e&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(%Ue!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(&z_y1s&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`('y!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u((^]%sR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{()j]#^,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(*vakR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!^%T!^!_(+{!_!`!I[!`!a!I[!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(,`_%eQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(-r_%r,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(/U`kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`!a(0W!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(0k_%fQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(2P_]Q#tP&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(3ee&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs&_sw%Twx!0Vx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(4yP;=`<%l(3OMg(5ci&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(>S#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(7_a&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs(8dsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ(8q]&^7[&TS&R,X&Z`&d!bOr'crs(9jsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](9wZ&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(:wa&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx(;|x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk(<Z]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx(=Sx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(=aZ&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(>ie&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(@ai&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(Hd!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(Hd#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(B]]&^7[&TS&Z`&d!b&`,XOr'crs(CUsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ(Ca]&^7[&TS&Z`&d!bOr'crs(DYsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](DgZ&^7[&TS&e,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(Eg]&^7[&WW&ap&f#t&Y,XOr!1Zrs*ssw!1Zwx(F`x#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk(Fk]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx(Gdx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(GqZ&^7[&WW&c,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(Hye&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(Jqm&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!h(3O!h!i(Hd!i!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#U(3O#U#V(>S#V#Y(3O#Y#Z(Hd#Z#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OG{(MP]!V,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u(N]]!UR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz) i_%cQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy)!qZ&TS&WW!ZGmOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEmG{)#w_%bR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u)%XZ!Y7_&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@bGy)&_]%l,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T",tokenizers:[legacyPrint,indentation,0,1,2,3,4,5,6,7,8,9,10,newlines],topRules:{Script:[0,3]},specialized:[{term:213,get:ft=>spec_identifier$1[ft]||-1}],tokenPrec:7282});class Text{constructor(){}lineAt(lt){if(lt<0||lt>this.length)throw new RangeError(`Invalid position ${lt} in document of length ${this.length}`);return this.lineInner(lt,!1,1,0)}line(lt){if(lt<1||lt>this.lines)throw new RangeError(`Invalid line number ${lt} in ${this.lines}-line document`);return this.lineInner(lt,!0,1,0)}replace(lt,dt,vt){let St=[];return this.decompose(0,lt,St,2),vt.length&&vt.decompose(0,vt.length,St,3),this.decompose(dt,this.length,St,1),TextNode.from(St,this.length-(dt-lt)+vt.length)}append(lt){return this.replace(this.length,this.length,lt)}slice(lt,dt=this.length){let vt=[];return this.decompose(lt,dt,vt,0),TextNode.from(vt,dt-lt)}eq(lt){if(lt==this)return!0;if(lt.length!=this.length||lt.lines!=this.lines)return!1;let dt=this.scanIdentical(lt,1),vt=this.length-this.scanIdentical(lt,-1),St=new RawTextCursor(this),Et=new RawTextCursor(lt);for(let Ct=dt,At=dt;;){if(St.next(Ct),Et.next(Ct),Ct=0,St.lineBreak!=Et.lineBreak||St.done!=Et.done||St.value!=Et.value)return!1;if(At+=St.value.length,St.done||At>=vt)return!0}}iter(lt=1){return new RawTextCursor(this,lt)}iterRange(lt,dt=this.length){return new PartialTextCursor(this,lt,dt)}iterLines(lt,dt){let vt;if(lt==null)vt=this.iter();else{dt==null&&(dt=this.lines+1);let St=this.line(lt).from;vt=this.iterRange(St,Math.max(St,dt==this.lines+1?this.length:dt<=1?0:this.line(dt-1).to))}return new LineCursor(vt)}toString(){return this.sliceString(0)}toJSON(){let lt=[];return this.flatten(lt),lt}static of(lt){if(lt.length==0)throw new RangeError("A document must have at least one line");return lt.length==1&&!lt[0]?Text.empty:lt.length<=32?new TextLeaf(lt):TextNode.from(TextLeaf.split(lt,[]))}}class TextLeaf extends Text{constructor(lt,dt=textLength(lt)){super(),this.text=lt,this.length=dt}get lines(){return this.text.length}get children(){return null}lineInner(lt,dt,vt,St){for(let Et=0;;Et++){let Ct=this.text[Et],At=St+Ct.length;if((dt?vt:At)>=lt)return new Line(St,At,vt,Ct);St=At+1,vt++}}decompose(lt,dt,vt,St){let Et=lt<=0&&dt>=this.length?this:new TextLeaf(sliceText(this.text,lt,dt),Math.min(dt,this.length)-Math.max(0,lt));if(St&1){let Ct=vt.pop(),At=appendText(Et.text,Ct.text.slice(),0,Et.length);if(At.length<=32)vt.push(new TextLeaf(At,Ct.length+Et.length));else{let Rt=At.length>>1;vt.push(new TextLeaf(At.slice(0,Rt)),new TextLeaf(At.slice(Rt)))}}else vt.push(Et)}replace(lt,dt,vt){if(!(vt instanceof TextLeaf))return super.replace(lt,dt,vt);let St=appendText(this.text,appendText(vt.text,sliceText(this.text,0,lt)),dt),Et=this.length+vt.length-(dt-lt);return St.length<=32?new TextLeaf(St,Et):TextNode.from(TextLeaf.split(St,[]),Et)}sliceString(lt,dt=this.length,vt=`
`){let St="";for(let Et=0,Ct=0;Et<=dt&&Ct<this.text.length;Ct++){let At=this.text[Ct],Rt=Et+At.length;Et>lt&&Ct&&(St+=vt),lt<Rt&&dt>Et&&(St+=At.slice(Math.max(0,lt-Et),dt-Et)),Et=Rt+1}return St}flatten(lt){for(let dt of this.text)lt.push(dt)}scanIdentical(){return 0}static split(lt,dt){let vt=[],St=-1;for(let Et of lt)vt.push(Et),St+=Et.length+1,vt.length==32&&(dt.push(new TextLeaf(vt,St)),vt=[],St=-1);return St>-1&&dt.push(new TextLeaf(vt,St)),dt}}class TextNode extends Text{constructor(lt,dt){super(),this.children=lt,this.length=dt,this.lines=0;for(let vt of lt)this.lines+=vt.lines}lineInner(lt,dt,vt,St){for(let Et=0;;Et++){let Ct=this.children[Et],At=St+Ct.length,Rt=vt+Ct.lines-1;if((dt?Rt:At)>=lt)return Ct.lineInner(lt,dt,vt,St);St=At+1,vt=Rt+1}}decompose(lt,dt,vt,St){for(let Et=0,Ct=0;Ct<=dt&&Et<this.children.length;Et++){let At=this.children[Et],Rt=Ct+At.length;if(lt<=Rt&&dt>=Ct){let Dt=St&((Ct<=lt?1:0)|(Rt>=dt?2:0));Ct>=lt&&Rt<=dt&&!Dt?vt.push(At):At.decompose(lt-Ct,dt-Ct,vt,Dt)}Ct=Rt+1}}replace(lt,dt,vt){if(vt.lines<this.lines)for(let St=0,Et=0;St<this.children.length;St++){let Ct=this.children[St],At=Et+Ct.length;if(lt>=Et&&dt<=At){let Rt=Ct.replace(lt-Et,dt-Et,vt),Dt=this.lines-Ct.lines+Rt.lines;if(Rt.lines<Dt>>5-1&&Rt.lines>Dt>>5+1){let Nt=this.children.slice();return Nt[St]=Rt,new TextNode(Nt,this.length-(dt-lt)+vt.length)}return super.replace(Et,At,Rt)}Et=At+1}return super.replace(lt,dt,vt)}sliceString(lt,dt=this.length,vt=`
`){let St="";for(let Et=0,Ct=0;Et<this.children.length&&Ct<=dt;Et++){let At=this.children[Et],Rt=Ct+At.length;Ct>lt&&Et&&(St+=vt),lt<Rt&&dt>Ct&&(St+=At.sliceString(lt-Ct,dt-Ct,vt)),Ct=Rt+1}return St}flatten(lt){for(let dt of this.children)dt.flatten(lt)}scanIdentical(lt,dt){if(!(lt instanceof TextNode))return 0;let vt=0,[St,Et,Ct,At]=dt>0?[0,0,this.children.length,lt.children.length]:[this.children.length-1,lt.children.length-1,-1,-1];for(;;St+=dt,Et+=dt){if(St==Ct||Et==At)return vt;let Rt=this.children[St],Dt=lt.children[Et];if(Rt!=Dt)return vt+Rt.scanIdentical(Dt,dt);vt+=Rt.length+1}}static from(lt,dt=lt.reduce((vt,St)=>vt+St.length+1,-1)){let vt=0;for(let Wt of lt)vt+=Wt.lines;if(vt<32){let Wt=[];for(let Zt of lt)Zt.flatten(Wt);return new TextLeaf(Wt,dt)}let St=Math.max(32,vt>>5),Et=St<<1,Ct=St>>1,At=[],Rt=0,Dt=-1,Nt=[];function Ft(Wt){let Zt;if(Wt.lines>Et&&Wt instanceof TextNode)for(let Kt of Wt.children)Ft(Kt);else Wt.lines>Ct&&(Rt>Ct||!Rt)?(Ut(),At.push(Wt)):Wt instanceof TextLeaf&&Rt&&(Zt=Nt[Nt.length-1])instanceof TextLeaf&&Wt.lines+Zt.lines<=32?(Rt+=Wt.lines,Dt+=Wt.length+1,Nt[Nt.length-1]=new TextLeaf(Zt.text.concat(Wt.text),Zt.length+1+Wt.length)):(Rt+Wt.lines>St&&Ut(),Rt+=Wt.lines,Dt+=Wt.length+1,Nt.push(Wt))}function Ut(){Rt!=0&&(At.push(Nt.length==1?Nt[0]:TextNode.from(Nt,Dt)),Dt=-1,Rt=Nt.length=0)}for(let Wt of lt)Ft(Wt);return Ut(),At.length==1?At[0]:new TextNode(At,dt)}}Text.empty=new TextLeaf([""],0);function textLength(ft){let lt=-1;for(let dt of ft)lt+=dt.length+1;return lt}function appendText(ft,lt,dt=0,vt=1e9){for(let St=0,Et=0,Ct=!0;Et<ft.length&&St<=vt;Et++){let At=ft[Et],Rt=St+At.length;Rt>=dt&&(Rt>vt&&(At=At.slice(0,vt-St)),St<dt&&(At=At.slice(dt-St)),Ct?(lt[lt.length-1]+=At,Ct=!1):lt.push(At)),St=Rt+1}return lt}function sliceText(ft,lt,dt){return appendText(ft,[""],lt,dt)}class RawTextCursor{constructor(lt,dt=1){this.dir=dt,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[lt],this.offsets=[dt>0?1:(lt instanceof TextLeaf?lt.text.length:lt.children.length)<<1]}nextInner(lt,dt){for(this.done=this.lineBreak=!1;;){let vt=this.nodes.length-1,St=this.nodes[vt],Et=this.offsets[vt],Ct=Et>>1,At=St instanceof TextLeaf?St.text.length:St.children.length;if(Ct==(dt>0?At:0)){if(vt==0)return this.done=!0,this.value="",this;dt>0&&this.offsets[vt-1]++,this.nodes.pop(),this.offsets.pop()}else if((Et&1)==(dt>0?0:1)){if(this.offsets[vt]+=dt,lt==0)return this.lineBreak=!0,this.value=`
`,this;lt--}else if(St instanceof TextLeaf){let Rt=St.text[Ct+(dt<0?-1:0)];if(this.offsets[vt]+=dt,Rt.length>Math.max(0,lt))return this.value=lt==0?Rt:dt>0?Rt.slice(lt):Rt.slice(0,Rt.length-lt),this;lt-=Rt.length}else{let Rt=St.children[Ct+(dt<0?-1:0)];lt>Rt.length?(lt-=Rt.length,this.offsets[vt]+=dt):(dt<0&&this.offsets[vt]--,this.nodes.push(Rt),this.offsets.push(dt>0?1:(Rt instanceof TextLeaf?Rt.text.length:Rt.children.length)<<1))}}}next(lt=0){return lt<0&&(this.nextInner(-lt,-this.dir),lt=this.value.length),this.nextInner(lt,this.dir)}}class PartialTextCursor{constructor(lt,dt,vt){this.value="",this.done=!1,this.cursor=new RawTextCursor(lt,dt>vt?-1:1),this.pos=dt>vt?lt.length:0,this.from=Math.min(dt,vt),this.to=Math.max(dt,vt)}nextInner(lt,dt){if(dt<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;lt+=Math.max(0,dt<0?this.pos-this.to:this.from-this.pos);let vt=dt<0?this.pos-this.from:this.to-this.pos;lt>vt&&(lt=vt),vt-=lt;let{value:St}=this.cursor.next(lt);return this.pos+=(St.length+lt)*dt,this.value=St.length<=vt?St:dt<0?St.slice(St.length-vt):St.slice(0,vt),this.done=!this.value,this}next(lt=0){return lt<0?lt=Math.max(lt,this.from-this.pos):lt>0&&(lt=Math.min(lt,this.to-this.pos)),this.nextInner(lt,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(lt){this.inner=lt,this.afterBreak=!0,this.value="",this.done=!1}next(lt=0){let{done:dt,lineBreak:vt,value:St}=this.inner.next(lt);return dt?(this.done=!0,this.value=""):vt?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=St,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(lt,dt,vt,St){this.from=lt,this.to=dt,this.number=vt,this.text=St}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(ft=>ft?parseInt(ft,36):1);for(let ft=1;ft<extend.length;ft++)extend[ft]+=extend[ft-1];function isExtendingChar(ft){for(let lt=1;lt<extend.length;lt+=2)if(extend[lt]>ft)return extend[lt-1]<=ft;return!1}function isRegionalIndicator(ft){return ft>=127462&&ft<=127487}const ZWJ=8205;function findClusterBreak(ft,lt,dt=!0,vt=!0){return(dt?nextClusterBreak:prevClusterBreak)(ft,lt,vt)}function nextClusterBreak(ft,lt,dt){if(lt==ft.length)return lt;lt&&surrogateLow(ft.charCodeAt(lt))&&surrogateHigh(ft.charCodeAt(lt-1))&&lt--;let vt=codePointAt(ft,lt);for(lt+=codePointSize(vt);lt<ft.length;){let St=codePointAt(ft,lt);if(vt==ZWJ||St==ZWJ||dt&&isExtendingChar(St))lt+=codePointSize(St),vt=St;else if(isRegionalIndicator(St)){let Et=0,Ct=lt-2;for(;Ct>=0&&isRegionalIndicator(codePointAt(ft,Ct));)Et++,Ct-=2;if(Et%2==0)break;lt+=2}else break}return lt}function prevClusterBreak(ft,lt,dt){for(;lt>0;){let vt=nextClusterBreak(ft,lt-2,dt);if(vt<lt)return vt;lt--}return 0}function surrogateLow(ft){return ft>=56320&&ft<57344}function surrogateHigh(ft){return ft>=55296&&ft<56320}function codePointAt(ft,lt){let dt=ft.charCodeAt(lt);if(!surrogateHigh(dt)||lt+1==ft.length)return dt;let vt=ft.charCodeAt(lt+1);return surrogateLow(vt)?(dt-55296<<10)+(vt-56320)+65536:dt}function fromCodePoint(ft){return ft<=65535?String.fromCharCode(ft):(ft-=65536,String.fromCharCode((ft>>10)+55296,(ft&1023)+56320))}function codePointSize(ft){return ft<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(ft){return ft[ft.Simple=0]="Simple",ft[ft.TrackDel=1]="TrackDel",ft[ft.TrackBefore=2]="TrackBefore",ft[ft.TrackAfter=3]="TrackAfter",ft}(MapMode||(MapMode={}));class ChangeDesc{constructor(lt){this.sections=lt}get length(){let lt=0;for(let dt=0;dt<this.sections.length;dt+=2)lt+=this.sections[dt];return lt}get newLength(){let lt=0;for(let dt=0;dt<this.sections.length;dt+=2){let vt=this.sections[dt+1];lt+=vt<0?this.sections[dt]:vt}return lt}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(lt){for(let dt=0,vt=0,St=0;dt<this.sections.length;){let Et=this.sections[dt++],Ct=this.sections[dt++];Ct<0?(lt(vt,St,Et),St+=Et):St+=Ct,vt+=Et}}iterChangedRanges(lt,dt=!1){iterChanges(this,lt,dt)}get invertedDesc(){let lt=[];for(let dt=0;dt<this.sections.length;){let vt=this.sections[dt++],St=this.sections[dt++];St<0?lt.push(vt,St):lt.push(St,vt)}return new ChangeDesc(lt)}composeDesc(lt){return this.empty?lt:lt.empty?this:composeSets(this,lt)}mapDesc(lt,dt=!1){return lt.empty?this:mapSet(this,lt,dt)}mapPos(lt,dt=-1,vt=MapMode.Simple){let St=0,Et=0;for(let Ct=0;Ct<this.sections.length;){let At=this.sections[Ct++],Rt=this.sections[Ct++],Dt=St+At;if(Rt<0){if(Dt>lt)return Et+(lt-St);Et+=At}else{if(vt!=MapMode.Simple&&Dt>=lt&&(vt==MapMode.TrackDel&&St<lt&&Dt>lt||vt==MapMode.TrackBefore&&St<lt||vt==MapMode.TrackAfter&&Dt>lt))return null;if(Dt>lt||Dt==lt&&dt<0&&!At)return lt==St||dt<0?Et:Et+Rt;Et+=Rt}St=Dt}if(lt>St)throw new RangeError(`Position ${lt} is out of range for changeset of length ${St}`);return Et}touchesRange(lt,dt=lt){for(let vt=0,St=0;vt<this.sections.length&&St<=dt;){let Et=this.sections[vt++],Ct=this.sections[vt++],At=St+Et;if(Ct>=0&&St<=dt&&At>=lt)return St<lt&&At>dt?"cover":!0;St=At}return!1}toString(){let lt="";for(let dt=0;dt<this.sections.length;){let vt=this.sections[dt++],St=this.sections[dt++];lt+=(lt?" ":"")+vt+(St>=0?":"+St:"")}return lt}toJSON(){return this.sections}static fromJSON(lt){if(!Array.isArray(lt)||lt.length%2||lt.some(dt=>typeof dt!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(lt)}static create(lt){return new ChangeDesc(lt)}}class ChangeSet extends ChangeDesc{constructor(lt,dt){super(lt),this.inserted=dt}apply(lt){if(this.length!=lt.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(dt,vt,St,Et,Ct)=>lt=lt.replace(St,St+(vt-dt),Ct),!1),lt}mapDesc(lt,dt=!1){return mapSet(this,lt,dt,!0)}invert(lt){let dt=this.sections.slice(),vt=[];for(let St=0,Et=0;St<dt.length;St+=2){let Ct=dt[St],At=dt[St+1];if(At>=0){dt[St]=At,dt[St+1]=Ct;let Rt=St>>1;for(;vt.length<Rt;)vt.push(Text.empty);vt.push(Ct?lt.slice(Et,Et+Ct):Text.empty)}Et+=Ct}return new ChangeSet(dt,vt)}compose(lt){return this.empty?lt:lt.empty?this:composeSets(this,lt,!0)}map(lt,dt=!1){return lt.empty?this:mapSet(this,lt,dt,!0)}iterChanges(lt,dt=!1){iterChanges(this,lt,dt)}get desc(){return ChangeDesc.create(this.sections)}filter(lt){let dt=[],vt=[],St=[],Et=new SectionIter(this);e:for(let Ct=0,At=0;;){let Rt=Ct==lt.length?1e9:lt[Ct++];for(;At<Rt||At==Rt&&Et.len==0;){if(Et.done)break e;let Nt=Math.min(Et.len,Rt-At);addSection(St,Nt,-1);let Ft=Et.ins==-1?-1:Et.off==0?Et.ins:0;addSection(dt,Nt,Ft),Ft>0&&addInsert(vt,dt,Et.text),Et.forward(Nt),At+=Nt}let Dt=lt[Ct++];for(;At<Dt;){if(Et.done)break e;let Nt=Math.min(Et.len,Dt-At);addSection(dt,Nt,-1),addSection(St,Nt,Et.ins==-1?-1:Et.off==0?Et.ins:0),Et.forward(Nt),At+=Nt}}return{changes:new ChangeSet(dt,vt),filtered:ChangeDesc.create(St)}}toJSON(){let lt=[];for(let dt=0;dt<this.sections.length;dt+=2){let vt=this.sections[dt],St=this.sections[dt+1];St<0?lt.push(vt):St==0?lt.push([vt]):lt.push([vt].concat(this.inserted[dt>>1].toJSON()))}return lt}static of(lt,dt,vt){let St=[],Et=[],Ct=0,At=null;function Rt(Nt=!1){if(!Nt&&!St.length)return;Ct<dt&&addSection(St,dt-Ct,-1);let Ft=new ChangeSet(St,Et);At=At?At.compose(Ft.map(At)):Ft,St=[],Et=[],Ct=0}function Dt(Nt){if(Array.isArray(Nt))for(let Ft of Nt)Dt(Ft);else if(Nt instanceof ChangeSet){if(Nt.length!=dt)throw new RangeError(`Mismatched change set length (got ${Nt.length}, expected ${dt})`);Rt(),At=At?At.compose(Nt.map(At)):Nt}else{let{from:Ft,to:Ut=Ft,insert:Wt}=Nt;if(Ft>Ut||Ft<0||Ut>dt)throw new RangeError(`Invalid change range ${Ft} to ${Ut} (in doc of length ${dt})`);let Zt=Wt?typeof Wt=="string"?Text.of(Wt.split(vt||DefaultSplit)):Wt:Text.empty,Kt=Zt.length;if(Ft==Ut&&Kt==0)return;Ft<Ct&&Rt(),Ft>Ct&&addSection(St,Ft-Ct,-1),addSection(St,Ut-Ft,Kt),addInsert(Et,St,Zt),Ct=Ut}}return Dt(lt),Rt(!At),At}static empty(lt){return new ChangeSet(lt?[lt,-1]:[],[])}static fromJSON(lt){if(!Array.isArray(lt))throw new RangeError("Invalid JSON representation of ChangeSet");let dt=[],vt=[];for(let St=0;St<lt.length;St++){let Et=lt[St];if(typeof Et=="number")dt.push(Et,-1);else{if(!Array.isArray(Et)||typeof Et[0]!="number"||Et.some((Ct,At)=>At&&typeof Ct!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(Et.length==1)dt.push(Et[0],0);else{for(;vt.length<St;)vt.push(Text.empty);vt[St]=Text.of(Et.slice(1)),dt.push(Et[0],vt[St].length)}}}return new ChangeSet(dt,vt)}static createSet(lt,dt){return new ChangeSet(lt,dt)}}function addSection(ft,lt,dt,vt=!1){if(lt==0&&dt<=0)return;let St=ft.length-2;St>=0&&dt<=0&&dt==ft[St+1]?ft[St]+=lt:lt==0&&ft[St]==0?ft[St+1]+=dt:vt?(ft[St]+=lt,ft[St+1]+=dt):ft.push(lt,dt)}function addInsert(ft,lt,dt){if(dt.length==0)return;let vt=lt.length-2>>1;if(vt<ft.length)ft[ft.length-1]=ft[ft.length-1].append(dt);else{for(;ft.length<vt;)ft.push(Text.empty);ft.push(dt)}}function iterChanges(ft,lt,dt){let vt=ft.inserted;for(let St=0,Et=0,Ct=0;Ct<ft.sections.length;){let At=ft.sections[Ct++],Rt=ft.sections[Ct++];if(Rt<0)St+=At,Et+=At;else{let Dt=St,Nt=Et,Ft=Text.empty;for(;Dt+=At,Nt+=Rt,Rt&&vt&&(Ft=Ft.append(vt[Ct-2>>1])),!(dt||Ct==ft.sections.length||ft.sections[Ct+1]<0);)At=ft.sections[Ct++],Rt=ft.sections[Ct++];lt(St,Dt,Et,Nt,Ft),St=Dt,Et=Nt}}}function mapSet(ft,lt,dt,vt=!1){let St=[],Et=vt?[]:null,Ct=new SectionIter(ft),At=new SectionIter(lt);for(let Rt=-1;;)if(Ct.ins==-1&&At.ins==-1){let Dt=Math.min(Ct.len,At.len);addSection(St,Dt,-1),Ct.forward(Dt),At.forward(Dt)}else if(At.ins>=0&&(Ct.ins<0||Rt==Ct.i||Ct.off==0&&(At.len<Ct.len||At.len==Ct.len&&!dt))){let Dt=At.len;for(addSection(St,At.ins,-1);Dt;){let Nt=Math.min(Ct.len,Dt);Ct.ins>=0&&Rt<Ct.i&&Ct.len<=Nt&&(addSection(St,0,Ct.ins),Et&&addInsert(Et,St,Ct.text),Rt=Ct.i),Ct.forward(Nt),Dt-=Nt}At.next()}else if(Ct.ins>=0){let Dt=0,Nt=Ct.len;for(;Nt;)if(At.ins==-1){let Ft=Math.min(Nt,At.len);Dt+=Ft,Nt-=Ft,At.forward(Ft)}else if(At.ins==0&&At.len<Nt)Nt-=At.len,At.next();else break;addSection(St,Dt,Rt<Ct.i?Ct.ins:0),Et&&Rt<Ct.i&&addInsert(Et,St,Ct.text),Rt=Ct.i,Ct.forward(Ct.len-Nt)}else{if(Ct.done&&At.done)return Et?ChangeSet.createSet(St,Et):ChangeDesc.create(St);throw new Error("Mismatched change set lengths")}}function composeSets(ft,lt,dt=!1){let vt=[],St=dt?[]:null,Et=new SectionIter(ft),Ct=new SectionIter(lt);for(let At=!1;;){if(Et.done&&Ct.done)return St?ChangeSet.createSet(vt,St):ChangeDesc.create(vt);if(Et.ins==0)addSection(vt,Et.len,0,At),Et.next();else if(Ct.len==0&&!Ct.done)addSection(vt,0,Ct.ins,At),St&&addInsert(St,vt,Ct.text),Ct.next();else{if(Et.done||Ct.done)throw new Error("Mismatched change set lengths");{let Rt=Math.min(Et.len2,Ct.len),Dt=vt.length;if(Et.ins==-1){let Nt=Ct.ins==-1?-1:Ct.off?0:Ct.ins;addSection(vt,Rt,Nt,At),St&&Nt&&addInsert(St,vt,Ct.text)}else Ct.ins==-1?(addSection(vt,Et.off?0:Et.len,Rt,At),St&&addInsert(St,vt,Et.textBit(Rt))):(addSection(vt,Et.off?0:Et.len,Ct.off?0:Ct.ins,At),St&&!Ct.off&&addInsert(St,vt,Ct.text));At=(Et.ins>Rt||Ct.ins>=0&&Ct.len>Rt)&&(At||vt.length>Dt),Et.forward2(Rt),Ct.forward(Rt)}}}}class SectionIter{constructor(lt){this.set=lt,this.i=0,this.next()}next(){let{sections:lt}=this.set;this.i<lt.length?(this.len=lt[this.i++],this.ins=lt[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:lt}=this.set,dt=this.i-2>>1;return dt>=lt.length?Text.empty:lt[dt]}textBit(lt){let{inserted:dt}=this.set,vt=this.i-2>>1;return vt>=dt.length&&!lt?Text.empty:dt[vt].slice(this.off,lt==null?void 0:this.off+lt)}forward(lt){lt==this.len?this.next():(this.len-=lt,this.off+=lt)}forward2(lt){this.ins==-1?this.forward(lt):lt==this.ins?this.next():(this.ins-=lt,this.off+=lt)}}class SelectionRange{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.flags=vt}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let lt=this.flags&3;return lt==3?null:lt}get goalColumn(){let lt=this.flags>>5;return lt==33554431?void 0:lt}map(lt,dt=-1){let vt,St;return this.empty?vt=St=lt.mapPos(this.from,dt):(vt=lt.mapPos(this.from,1),St=lt.mapPos(this.to,-1)),vt==this.from&&St==this.to?this:new SelectionRange(vt,St,this.flags)}extend(lt,dt=lt){if(lt<=this.anchor&&dt>=this.anchor)return EditorSelection.range(lt,dt);let vt=Math.abs(lt-this.anchor)>Math.abs(dt-this.anchor)?lt:dt;return EditorSelection.range(this.anchor,vt)}eq(lt){return this.anchor==lt.anchor&&this.head==lt.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(lt){if(!lt||typeof lt.anchor!="number"||typeof lt.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(lt.anchor,lt.head)}static create(lt,dt,vt){return new SelectionRange(lt,dt,vt)}}class EditorSelection{constructor(lt,dt){this.ranges=lt,this.mainIndex=dt}map(lt,dt=-1){return lt.empty?this:EditorSelection.create(this.ranges.map(vt=>vt.map(lt,dt)),this.mainIndex)}eq(lt){if(this.ranges.length!=lt.ranges.length||this.mainIndex!=lt.mainIndex)return!1;for(let dt=0;dt<this.ranges.length;dt++)if(!this.ranges[dt].eq(lt.ranges[dt]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(lt,dt=!0){return EditorSelection.create([lt].concat(this.ranges),dt?0:this.mainIndex+1)}replaceRange(lt,dt=this.mainIndex){let vt=this.ranges.slice();return vt[dt]=lt,EditorSelection.create(vt,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(lt=>lt.toJSON()),main:this.mainIndex}}static fromJSON(lt){if(!lt||!Array.isArray(lt.ranges)||typeof lt.main!="number"||lt.main>=lt.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(lt.ranges.map(dt=>SelectionRange.fromJSON(dt)),lt.main)}static single(lt,dt=lt){return new EditorSelection([EditorSelection.range(lt,dt)],0)}static create(lt,dt=0){if(lt.length==0)throw new RangeError("A selection needs at least one range");for(let vt=0,St=0;St<lt.length;St++){let Et=lt[St];if(Et.empty?Et.from<=vt:Et.from<vt)return EditorSelection.normalized(lt.slice(),dt);vt=Et.to}return new EditorSelection(lt,dt)}static cursor(lt,dt=0,vt,St){return SelectionRange.create(lt,lt,(dt==0?0:dt<0?4:8)|(vt==null?3:Math.min(2,vt))|(St??33554431)<<5)}static range(lt,dt,vt,St){let Et=(vt??33554431)<<5|(St==null?3:Math.min(2,St));return dt<lt?SelectionRange.create(dt,lt,24|Et):SelectionRange.create(lt,dt,(dt>lt?4:0)|Et)}static normalized(lt,dt=0){let vt=lt[dt];lt.sort((St,Et)=>St.from-Et.from),dt=lt.indexOf(vt);for(let St=1;St<lt.length;St++){let Et=lt[St],Ct=lt[St-1];if(Et.empty?Et.from<=Ct.to:Et.from<Ct.to){let At=Ct.from,Rt=Math.max(Et.to,Ct.to);St<=dt&&dt--,lt.splice(--St,2,Et.anchor>Et.head?EditorSelection.range(Rt,At):EditorSelection.range(At,Rt))}}return new EditorSelection(lt,dt)}}function checkSelection(ft,lt){for(let dt of ft.ranges)if(dt.to>lt)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(lt,dt,vt,St,Et){this.combine=lt,this.compareInput=dt,this.compare=vt,this.isStatic=St,this.id=nextID++,this.default=lt([]),this.extensions=typeof Et=="function"?Et(this):Et}static define(lt={}){return new Facet(lt.combine||(dt=>dt),lt.compareInput||((dt,vt)=>dt===vt),lt.compare||(lt.combine?(dt,vt)=>dt===vt:sameArray),!!lt.static,lt.enables)}of(lt){return new FacetProvider([],this,0,lt)}compute(lt,dt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(lt,this,1,dt)}computeN(lt,dt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(lt,this,2,dt)}from(lt,dt){return dt||(dt=vt=>vt),this.compute([lt],vt=>dt(vt.field(lt)))}}function sameArray(ft,lt){return ft==lt||ft.length==lt.length&&ft.every((dt,vt)=>dt===lt[vt])}class FacetProvider{constructor(lt,dt,vt,St){this.dependencies=lt,this.facet=dt,this.type=vt,this.value=St,this.id=nextID++}dynamicSlot(lt){var dt;let vt=this.value,St=this.facet.compareInput,Et=this.id,Ct=lt[Et]>>1,At=this.type==2,Rt=!1,Dt=!1,Nt=[];for(let Ft of this.dependencies)Ft=="doc"?Rt=!0:Ft=="selection"?Dt=!0:((dt=lt[Ft.id])!==null&&dt!==void 0?dt:1)&1||Nt.push(lt[Ft.id]);return{create(Ft){return Ft.values[Ct]=vt(Ft),1},update(Ft,Ut){if(Rt&&Ut.docChanged||Dt&&(Ut.docChanged||Ut.selection)||ensureAll(Ft,Nt)){let Wt=vt(Ft);if(At?!compareArray(Wt,Ft.values[Ct],St):!St(Wt,Ft.values[Ct]))return Ft.values[Ct]=Wt,1}return 0},reconfigure:(Ft,Ut)=>{let Wt,Zt=Ut.config.address[Et];if(Zt!=null){let Kt=getAddr(Ut,Zt);if(this.dependencies.every(cn=>cn instanceof Facet?Ut.facet(cn)===Ft.facet(cn):cn instanceof StateField?Ut.field(cn,!1)==Ft.field(cn,!1):!0)||(At?compareArray(Wt=vt(Ft),Kt,St):St(Wt=vt(Ft),Kt)))return Ft.values[Ct]=Kt,0}else Wt=vt(Ft);return Ft.values[Ct]=Wt,1}}}}function compareArray(ft,lt,dt){if(ft.length!=lt.length)return!1;for(let vt=0;vt<ft.length;vt++)if(!dt(ft[vt],lt[vt]))return!1;return!0}function ensureAll(ft,lt){let dt=!1;for(let vt of lt)ensureAddr(ft,vt)&1&&(dt=!0);return dt}function dynamicFacetSlot(ft,lt,dt){let vt=dt.map(Rt=>ft[Rt.id]),St=dt.map(Rt=>Rt.type),Et=vt.filter(Rt=>!(Rt&1)),Ct=ft[lt.id]>>1;function At(Rt){let Dt=[];for(let Nt=0;Nt<vt.length;Nt++){let Ft=getAddr(Rt,vt[Nt]);if(St[Nt]==2)for(let Ut of Ft)Dt.push(Ut);else Dt.push(Ft)}return lt.combine(Dt)}return{create(Rt){for(let Dt of vt)ensureAddr(Rt,Dt);return Rt.values[Ct]=At(Rt),1},update(Rt,Dt){if(!ensureAll(Rt,Et))return 0;let Nt=At(Rt);return lt.compare(Nt,Rt.values[Ct])?0:(Rt.values[Ct]=Nt,1)},reconfigure(Rt,Dt){let Nt=ensureAll(Rt,vt),Ft=Dt.config.facets[lt.id],Ut=Dt.facet(lt);if(Ft&&!Nt&&sameArray(dt,Ft))return Rt.values[Ct]=Ut,0;let Wt=At(Rt);return lt.compare(Wt,Ut)?(Rt.values[Ct]=Ut,0):(Rt.values[Ct]=Wt,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(lt,dt,vt,St,Et){this.id=lt,this.createF=dt,this.updateF=vt,this.compareF=St,this.spec=Et,this.provides=void 0}static define(lt){let dt=new StateField(nextID++,lt.create,lt.update,lt.compare||((vt,St)=>vt===St),lt);return lt.provide&&(dt.provides=lt.provide(dt)),dt}create(lt){let dt=lt.facet(initField).find(vt=>vt.field==this);return((dt==null?void 0:dt.create)||this.createF)(lt)}slot(lt){let dt=lt[this.id]>>1;return{create:vt=>(vt.values[dt]=this.create(vt),1),update:(vt,St)=>{let Et=vt.values[dt],Ct=this.updateF(Et,St);return this.compareF(Et,Ct)?0:(vt.values[dt]=Ct,1)},reconfigure:(vt,St)=>St.config.address[this.id]!=null?(vt.values[dt]=St.field(this),0):(vt.values[dt]=this.create(vt),1)}}init(lt){return[this,initField.of({field:this,create:lt})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(ft){return lt=>new PrecExtension(lt,ft)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(lt,dt){this.inner=lt,this.prec=dt}}class Compartment{of(lt){return new CompartmentInstance(this,lt)}reconfigure(lt){return Compartment.reconfigure.of({compartment:this,extension:lt})}get(lt){return lt.config.compartments.get(this)}}class CompartmentInstance{constructor(lt,dt){this.compartment=lt,this.inner=dt}}class Configuration{constructor(lt,dt,vt,St,Et,Ct){for(this.base=lt,this.compartments=dt,this.dynamicSlots=vt,this.address=St,this.staticValues=Et,this.facets=Ct,this.statusTemplate=[];this.statusTemplate.length<vt.length;)this.statusTemplate.push(0)}staticFacet(lt){let dt=this.address[lt.id];return dt==null?lt.default:this.staticValues[dt>>1]}static resolve(lt,dt,vt){let St=[],Et=Object.create(null),Ct=new Map;for(let Ut of flatten(lt,dt,Ct))Ut instanceof StateField?St.push(Ut):(Et[Ut.facet.id]||(Et[Ut.facet.id]=[])).push(Ut);let At=Object.create(null),Rt=[],Dt=[];for(let Ut of St)At[Ut.id]=Dt.length<<1,Dt.push(Wt=>Ut.slot(Wt));let Nt=vt==null?void 0:vt.config.facets;for(let Ut in Et){let Wt=Et[Ut],Zt=Wt[0].facet,Kt=Nt&&Nt[Ut]||[];if(Wt.every(cn=>cn.type==0))if(At[Zt.id]=Rt.length<<1|1,sameArray(Kt,Wt))Rt.push(vt.facet(Zt));else{let cn=Zt.combine(Wt.map(hn=>hn.value));Rt.push(vt&&Zt.compare(cn,vt.facet(Zt))?vt.facet(Zt):cn)}else{for(let cn of Wt)cn.type==0?(At[cn.id]=Rt.length<<1|1,Rt.push(cn.value)):(At[cn.id]=Dt.length<<1,Dt.push(hn=>cn.dynamicSlot(hn)));At[Zt.id]=Dt.length<<1,Dt.push(cn=>dynamicFacetSlot(cn,Zt,Wt))}}let Ft=Dt.map(Ut=>Ut(At));return new Configuration(lt,Ct,Ft,At,Rt,Et)}}function flatten(ft,lt,dt){let vt=[[],[],[],[],[]],St=new Map;function Et(Ct,At){let Rt=St.get(Ct);if(Rt!=null){if(Rt<=At)return;let Dt=vt[Rt].indexOf(Ct);Dt>-1&&vt[Rt].splice(Dt,1),Ct instanceof CompartmentInstance&&dt.delete(Ct.compartment)}if(St.set(Ct,At),Array.isArray(Ct))for(let Dt of Ct)Et(Dt,At);else if(Ct instanceof CompartmentInstance){if(dt.has(Ct.compartment))throw new RangeError("Duplicate use of compartment in extensions");let Dt=lt.get(Ct.compartment)||Ct.inner;dt.set(Ct.compartment,Dt),Et(Dt,At)}else if(Ct instanceof PrecExtension)Et(Ct.inner,Ct.prec);else if(Ct instanceof StateField)vt[At].push(Ct),Ct.provides&&Et(Ct.provides,At);else if(Ct instanceof FacetProvider)vt[At].push(Ct),Ct.facet.extensions&&Et(Ct.facet.extensions,Prec_.default);else{let Dt=Ct.extension;if(!Dt)throw new Error(`Unrecognized extension value in extension set (${Ct}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);Et(Dt,At)}}return Et(ft,Prec_.default),vt.reduce((Ct,At)=>Ct.concat(At))}function ensureAddr(ft,lt){if(lt&1)return 2;let dt=lt>>1,vt=ft.status[dt];if(vt==4)throw new Error("Cyclic dependency between fields and/or facets");if(vt&2)return vt;ft.status[dt]=4;let St=ft.computeSlot(ft,ft.config.dynamicSlots[dt]);return ft.status[dt]=2|St}function getAddr(ft,lt){return lt&1?ft.config.staticValues[lt>>1]:ft.values[lt>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:ft=>ft.some(lt=>lt),static:!0}),lineSeparator=Facet.define({combine:ft=>ft.length?ft[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:ft=>ft.length?ft[0]:!1});class Annotation{constructor(lt,dt){this.type=lt,this.value=dt}static define(){return new AnnotationType}}class AnnotationType{of(lt){return new Annotation(this,lt)}}class StateEffectType{constructor(lt){this.map=lt}of(lt){return new StateEffect(this,lt)}}class StateEffect{constructor(lt,dt){this.type=lt,this.value=dt}map(lt){let dt=this.type.map(this.value,lt);return dt===void 0?void 0:dt==this.value?this:new StateEffect(this.type,dt)}is(lt){return this.type==lt}static define(lt={}){return new StateEffectType(lt.map||(dt=>dt))}static mapEffects(lt,dt){if(!lt.length)return lt;let vt=[];for(let St of lt){let Et=St.map(dt);Et&&vt.push(Et)}return vt}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(lt,dt,vt,St,Et,Ct){this.startState=lt,this.changes=dt,this.selection=vt,this.effects=St,this.annotations=Et,this.scrollIntoView=Ct,this._doc=null,this._state=null,vt&&checkSelection(vt,dt.newLength),Et.some(At=>At.type==Transaction.time)||(this.annotations=Et.concat(Transaction.time.of(Date.now())))}static create(lt,dt,vt,St,Et,Ct){return new Transaction(lt,dt,vt,St,Et,Ct)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(lt){for(let dt of this.annotations)if(dt.type==lt)return dt.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(lt){let dt=this.annotation(Transaction.userEvent);return!!(dt&&(dt==lt||dt.length>lt.length&&dt.slice(0,lt.length)==lt&&dt[lt.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(ft,lt){let dt=[];for(let vt=0,St=0;;){let Et,Ct;if(vt<ft.length&&(St==lt.length||lt[St]>=ft[vt]))Et=ft[vt++],Ct=ft[vt++];else if(St<lt.length)Et=lt[St++],Ct=lt[St++];else return dt;!dt.length||dt[dt.length-1]<Et?dt.push(Et,Ct):dt[dt.length-1]<Ct&&(dt[dt.length-1]=Ct)}}function mergeTransaction(ft,lt,dt){var vt;let St,Et,Ct;return dt?(St=lt.changes,Et=ChangeSet.empty(lt.changes.length),Ct=ft.changes.compose(lt.changes)):(St=lt.changes.map(ft.changes),Et=ft.changes.mapDesc(lt.changes,!0),Ct=ft.changes.compose(St)),{changes:Ct,selection:lt.selection?lt.selection.map(Et):(vt=ft.selection)===null||vt===void 0?void 0:vt.map(St),effects:StateEffect.mapEffects(ft.effects,St).concat(StateEffect.mapEffects(lt.effects,Et)),annotations:ft.annotations.length?ft.annotations.concat(lt.annotations):lt.annotations,scrollIntoView:ft.scrollIntoView||lt.scrollIntoView}}function resolveTransactionInner(ft,lt,dt){let vt=lt.selection,St=asArray$1(lt.annotations);return lt.userEvent&&(St=St.concat(Transaction.userEvent.of(lt.userEvent))),{changes:lt.changes instanceof ChangeSet?lt.changes:ChangeSet.of(lt.changes||[],dt,ft.facet(lineSeparator)),selection:vt&&(vt instanceof EditorSelection?vt:EditorSelection.single(vt.anchor,vt.head)),effects:asArray$1(lt.effects),annotations:St,scrollIntoView:!!lt.scrollIntoView}}function resolveTransaction(ft,lt,dt){let vt=resolveTransactionInner(ft,lt.length?lt[0]:{},ft.doc.length);lt.length&&lt[0].filter===!1&&(dt=!1);for(let Et=1;Et<lt.length;Et++){lt[Et].filter===!1&&(dt=!1);let Ct=!!lt[Et].sequential;vt=mergeTransaction(vt,resolveTransactionInner(ft,lt[Et],Ct?vt.changes.newLength:ft.doc.length),Ct)}let St=Transaction.create(ft,vt.changes,vt.selection,vt.effects,vt.annotations,vt.scrollIntoView);return extendTransaction(dt?filterTransaction(St):St)}function filterTransaction(ft){let lt=ft.startState,dt=!0;for(let St of lt.facet(changeFilter)){let Et=St(ft);if(Et===!1){dt=!1;break}Array.isArray(Et)&&(dt=dt===!0?Et:joinRanges(dt,Et))}if(dt!==!0){let St,Et;if(dt===!1)Et=ft.changes.invertedDesc,St=ChangeSet.empty(lt.doc.length);else{let Ct=ft.changes.filter(dt);St=Ct.changes,Et=Ct.filtered.mapDesc(Ct.changes).invertedDesc}ft=Transaction.create(lt,St,ft.selection&&ft.selection.map(Et),StateEffect.mapEffects(ft.effects,Et),ft.annotations,ft.scrollIntoView)}let vt=lt.facet(transactionFilter);for(let St=vt.length-1;St>=0;St--){let Et=vt[St](ft);Et instanceof Transaction?ft=Et:Array.isArray(Et)&&Et.length==1&&Et[0]instanceof Transaction?ft=Et[0]:ft=resolveTransaction(lt,asArray$1(Et),!1)}return ft}function extendTransaction(ft){let lt=ft.startState,dt=lt.facet(transactionExtender),vt=ft;for(let St=dt.length-1;St>=0;St--){let Et=dt[St](ft);Et&&Object.keys(Et).length&&(vt=mergeTransaction(vt,resolveTransactionInner(lt,Et,ft.changes.newLength),!0))}return vt==ft?ft:Transaction.create(lt,ft.changes,ft.selection,vt.effects,vt.annotations,vt.scrollIntoView)}const none$2=[];function asArray$1(ft){return ft==null?none$2:Array.isArray(ft)?ft:[ft]}var CharCategory=function(ft){return ft[ft.Word=0]="Word",ft[ft.Space=1]="Space",ft[ft.Other=2]="Other",ft}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(ft){}function hasWordChar(ft){if(wordChar)return wordChar.test(ft);for(let lt=0;lt<ft.length;lt++){let dt=ft[lt];if(/\w/.test(dt)||dt>""&&(dt.toUpperCase()!=dt.toLowerCase()||nonASCIISingleCaseWordChar.test(dt)))return!0}return!1}function makeCategorizer(ft){return lt=>{if(!/\S/.test(lt))return CharCategory.Space;if(hasWordChar(lt))return CharCategory.Word;for(let dt=0;dt<ft.length;dt++)if(lt.indexOf(ft[dt])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(lt,dt,vt,St,Et,Ct){this.config=lt,this.doc=dt,this.selection=vt,this.values=St,this.status=lt.statusTemplate.slice(),this.computeSlot=Et,Ct&&(Ct._state=this);for(let At=0;At<this.config.dynamicSlots.length;At++)ensureAddr(this,At<<1);this.computeSlot=null}field(lt,dt=!0){let vt=this.config.address[lt.id];if(vt==null){if(dt)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,vt),getAddr(this,vt)}update(...lt){return resolveTransaction(this,lt,!0)}applyTransaction(lt){let dt=this.config,{base:vt,compartments:St}=dt;for(let Ct of lt.effects)Ct.is(Compartment.reconfigure)?(dt&&(St=new Map,dt.compartments.forEach((At,Rt)=>St.set(Rt,At)),dt=null),St.set(Ct.value.compartment,Ct.value.extension)):Ct.is(StateEffect.reconfigure)?(dt=null,vt=Ct.value):Ct.is(StateEffect.appendConfig)&&(dt=null,vt=asArray$1(vt).concat(Ct.value));let Et;dt?Et=lt.startState.values.slice():(dt=Configuration.resolve(vt,St,this),Et=new EditorState(dt,this.doc,this.selection,dt.dynamicSlots.map(()=>null),(At,Rt)=>Rt.reconfigure(At,this),null).values),new EditorState(dt,lt.newDoc,lt.newSelection,Et,(Ct,At)=>At.update(Ct,lt),lt)}replaceSelection(lt){return typeof lt=="string"&&(lt=this.toText(lt)),this.changeByRange(dt=>({changes:{from:dt.from,to:dt.to,insert:lt},range:EditorSelection.cursor(dt.from+lt.length)}))}changeByRange(lt){let dt=this.selection,vt=lt(dt.ranges[0]),St=this.changes(vt.changes),Et=[vt.range],Ct=asArray$1(vt.effects);for(let At=1;At<dt.ranges.length;At++){let Rt=lt(dt.ranges[At]),Dt=this.changes(Rt.changes),Nt=Dt.map(St);for(let Ut=0;Ut<At;Ut++)Et[Ut]=Et[Ut].map(Nt);let Ft=St.mapDesc(Dt,!0);Et.push(Rt.range.map(Ft)),St=St.compose(Nt),Ct=StateEffect.mapEffects(Ct,Nt).concat(StateEffect.mapEffects(asArray$1(Rt.effects),Ft))}return{changes:St,selection:EditorSelection.create(Et,dt.mainIndex),effects:Ct}}changes(lt=[]){return lt instanceof ChangeSet?lt:ChangeSet.of(lt,this.doc.length,this.facet(EditorState.lineSeparator))}toText(lt){return Text.of(lt.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(lt=0,dt=this.doc.length){return this.doc.sliceString(lt,dt,this.lineBreak)}facet(lt){let dt=this.config.address[lt.id];return dt==null?lt.default:(ensureAddr(this,dt),getAddr(this,dt))}toJSON(lt){let dt={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(lt)for(let vt in lt){let St=lt[vt];St instanceof StateField&&this.config.address[St.id]!=null&&(dt[vt]=St.spec.toJSON(this.field(lt[vt]),this))}return dt}static fromJSON(lt,dt={},vt){if(!lt||typeof lt.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let St=[];if(vt){for(let Et in vt)if(Object.prototype.hasOwnProperty.call(lt,Et)){let Ct=vt[Et],At=lt[Et];St.push(Ct.init(Rt=>Ct.spec.fromJSON(At,Rt)))}}return EditorState.create({doc:lt.doc,selection:EditorSelection.fromJSON(lt.selection),extensions:dt.extensions?St.concat([dt.extensions]):St})}static create(lt={}){let dt=Configuration.resolve(lt.extensions||[],new Map),vt=lt.doc instanceof Text?lt.doc:Text.of((lt.doc||"").split(dt.staticFacet(EditorState.lineSeparator)||DefaultSplit)),St=lt.selection?lt.selection instanceof EditorSelection?lt.selection:EditorSelection.single(lt.selection.anchor,lt.selection.head):EditorSelection.single(0);return checkSelection(St,vt.length),dt.staticFacet(allowMultipleSelections)||(St=St.asSingle()),new EditorState(dt,vt,St,dt.dynamicSlots.map(()=>null),(Et,Ct)=>Ct.create(Et),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(lt,...dt){for(let vt of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(vt,lt)){lt=vt[lt];break}return dt.length&&(lt=lt.replace(/\$(\$|\d*)/g,(vt,St)=>{if(St=="$")return"$";let Et=+(St||1);return!Et||Et>dt.length?vt:dt[Et-1]})),lt}languageDataAt(lt,dt,vt=-1){let St=[];for(let Et of this.facet(languageData))for(let Ct of Et(this,dt,vt))Object.prototype.hasOwnProperty.call(Ct,lt)&&St.push(Ct[lt]);return St}charCategorizer(lt){return makeCategorizer(this.languageDataAt("wordChars",lt).join(""))}wordAt(lt){let{text:dt,from:vt,length:St}=this.doc.lineAt(lt),Et=this.charCategorizer(lt),Ct=lt-vt,At=lt-vt;for(;Ct>0;){let Rt=findClusterBreak(dt,Ct,!1);if(Et(dt.slice(Rt,Ct))!=CharCategory.Word)break;Ct=Rt}for(;At<St;){let Rt=findClusterBreak(dt,At);if(Et(dt.slice(At,Rt))!=CharCategory.Word)break;At=Rt}return Ct==At?null:EditorSelection.range(Ct+vt,At+vt)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:ft=>ft.length?ft[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(ft,lt){let dt=Object.keys(ft),vt=Object.keys(lt);return dt.length==vt.length&&dt.every(St=>ft[St]==lt[St])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(ft,lt,dt={}){let vt={};for(let St of ft)for(let Et of Object.keys(St)){let Ct=St[Et],At=vt[Et];if(At===void 0)vt[Et]=Ct;else if(!(At===Ct||Ct===void 0))if(Object.hasOwnProperty.call(dt,Et))vt[Et]=dt[Et](At,Ct);else throw new Error("Config merge conflict for field "+Et)}for(let St in lt)vt[St]===void 0&&(vt[St]=lt[St]);return vt}class RangeValue{eq(lt){return this==lt}range(lt,dt=lt){return Range.create(lt,dt,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.value=vt}static create(lt,dt,vt){return new Range(lt,dt,vt)}}function cmpRange(ft,lt){return ft.from-lt.from||ft.value.startSide-lt.value.startSide}class Chunk{constructor(lt,dt,vt,St){this.from=lt,this.to=dt,this.value=vt,this.maxPoint=St}get length(){return this.to[this.to.length-1]}findIndex(lt,dt,vt,St=0){let Et=vt?this.to:this.from;for(let Ct=St,At=Et.length;;){if(Ct==At)return Ct;let Rt=Ct+At>>1,Dt=Et[Rt]-lt||(vt?this.value[Rt].endSide:this.value[Rt].startSide)-dt;if(Rt==Ct)return Dt>=0?Ct:At;Dt>=0?At=Rt:Ct=Rt+1}}between(lt,dt,vt,St){for(let Et=this.findIndex(dt,-1e9,!0),Ct=this.findIndex(vt,1e9,!1,Et);Et<Ct;Et++)if(St(this.from[Et]+lt,this.to[Et]+lt,this.value[Et])===!1)return!1}map(lt,dt){let vt=[],St=[],Et=[],Ct=-1,At=-1;for(let Rt=0;Rt<this.value.length;Rt++){let Dt=this.value[Rt],Nt=this.from[Rt]+lt,Ft=this.to[Rt]+lt,Ut,Wt;if(Nt==Ft){let Zt=dt.mapPos(Nt,Dt.startSide,Dt.mapMode);if(Zt==null||(Ut=Wt=Zt,Dt.startSide!=Dt.endSide&&(Wt=dt.mapPos(Nt,Dt.endSide),Wt<Ut)))continue}else if(Ut=dt.mapPos(Nt,Dt.startSide),Wt=dt.mapPos(Ft,Dt.endSide),Ut>Wt||Ut==Wt&&Dt.startSide>0&&Dt.endSide<=0)continue;(Wt-Ut||Dt.endSide-Dt.startSide)<0||(Ct<0&&(Ct=Ut),Dt.point&&(At=Math.max(At,Wt-Ut)),vt.push(Dt),St.push(Ut-Ct),Et.push(Wt-Ct))}return{mapped:vt.length?new Chunk(St,Et,vt,At):null,pos:Ct}}}class RangeSet{constructor(lt,dt,vt,St){this.chunkPos=lt,this.chunk=dt,this.nextLayer=vt,this.maxPoint=St}static create(lt,dt,vt,St){return new RangeSet(lt,dt,vt,St)}get length(){let lt=this.chunk.length-1;return lt<0?0:Math.max(this.chunkEnd(lt),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let lt=this.nextLayer.size;for(let dt of this.chunk)lt+=dt.value.length;return lt}chunkEnd(lt){return this.chunkPos[lt]+this.chunk[lt].length}update(lt){let{add:dt=[],sort:vt=!1,filterFrom:St=0,filterTo:Et=this.length}=lt,Ct=lt.filter;if(dt.length==0&&!Ct)return this;if(vt&&(dt=dt.slice().sort(cmpRange)),this.isEmpty)return dt.length?RangeSet.of(dt):this;let At=new LayerCursor(this,null,-1).goto(0),Rt=0,Dt=[],Nt=new RangeSetBuilder;for(;At.value||Rt<dt.length;)if(Rt<dt.length&&(At.from-dt[Rt].from||At.startSide-dt[Rt].value.startSide)>=0){let Ft=dt[Rt++];Nt.addInner(Ft.from,Ft.to,Ft.value)||Dt.push(Ft)}else At.rangeIndex==1&&At.chunkIndex<this.chunk.length&&(Rt==dt.length||this.chunkEnd(At.chunkIndex)<dt[Rt].from)&&(!Ct||St>this.chunkEnd(At.chunkIndex)||Et<this.chunkPos[At.chunkIndex])&&Nt.addChunk(this.chunkPos[At.chunkIndex],this.chunk[At.chunkIndex])?At.nextChunk():((!Ct||St>At.to||Et<At.from||Ct(At.from,At.to,At.value))&&(Nt.addInner(At.from,At.to,At.value)||Dt.push(Range.create(At.from,At.to,At.value))),At.next());return Nt.finishInner(this.nextLayer.isEmpty&&!Dt.length?RangeSet.empty:this.nextLayer.update({add:Dt,filter:Ct,filterFrom:St,filterTo:Et}))}map(lt){if(lt.empty||this.isEmpty)return this;let dt=[],vt=[],St=-1;for(let Ct=0;Ct<this.chunk.length;Ct++){let At=this.chunkPos[Ct],Rt=this.chunk[Ct],Dt=lt.touchesRange(At,At+Rt.length);if(Dt===!1)St=Math.max(St,Rt.maxPoint),dt.push(Rt),vt.push(lt.mapPos(At));else if(Dt===!0){let{mapped:Nt,pos:Ft}=Rt.map(At,lt);Nt&&(St=Math.max(St,Nt.maxPoint),dt.push(Nt),vt.push(Ft))}}let Et=this.nextLayer.map(lt);return dt.length==0?Et:new RangeSet(vt,dt,Et||RangeSet.empty,St)}between(lt,dt,vt){if(!this.isEmpty){for(let St=0;St<this.chunk.length;St++){let Et=this.chunkPos[St],Ct=this.chunk[St];if(dt>=Et&&lt<=Et+Ct.length&&Ct.between(Et,lt-Et,dt-Et,vt)===!1)return}this.nextLayer.between(lt,dt,vt)}}iter(lt=0){return HeapCursor.from([this]).goto(lt)}get isEmpty(){return this.nextLayer==this}static iter(lt,dt=0){return HeapCursor.from(lt).goto(dt)}static compare(lt,dt,vt,St,Et=-1){let Ct=lt.filter(Ft=>Ft.maxPoint>0||!Ft.isEmpty&&Ft.maxPoint>=Et),At=dt.filter(Ft=>Ft.maxPoint>0||!Ft.isEmpty&&Ft.maxPoint>=Et),Rt=findSharedChunks(Ct,At,vt),Dt=new SpanCursor(Ct,Rt,Et),Nt=new SpanCursor(At,Rt,Et);vt.iterGaps((Ft,Ut,Wt)=>compare(Dt,Ft,Nt,Ut,Wt,St)),vt.empty&&vt.length==0&&compare(Dt,0,Nt,0,0,St)}static eq(lt,dt,vt=0,St){St==null&&(St=1e9-1);let Et=lt.filter(Nt=>!Nt.isEmpty&&dt.indexOf(Nt)<0),Ct=dt.filter(Nt=>!Nt.isEmpty&&lt.indexOf(Nt)<0);if(Et.length!=Ct.length)return!1;if(!Et.length)return!0;let At=findSharedChunks(Et,Ct),Rt=new SpanCursor(Et,At,0).goto(vt),Dt=new SpanCursor(Ct,At,0).goto(vt);for(;;){if(Rt.to!=Dt.to||!sameValues(Rt.active,Dt.active)||Rt.point&&(!Dt.point||!Rt.point.eq(Dt.point)))return!1;if(Rt.to>St)return!0;Rt.next(),Dt.next()}}static spans(lt,dt,vt,St,Et=-1){let Ct=new SpanCursor(lt,null,Et).goto(dt),At=dt,Rt=Ct.openStart;for(;;){let Dt=Math.min(Ct.to,vt);if(Ct.point){let Nt=Ct.activeForPoint(Ct.to),Ft=Ct.pointFrom<dt?Nt.length+1:Math.min(Nt.length,Rt);St.point(At,Dt,Ct.point,Nt,Ft,Ct.pointRank),Rt=Math.min(Ct.openEnd(Dt),Nt.length)}else Dt>At&&(St.span(At,Dt,Ct.active,Rt),Rt=Ct.openEnd(Dt));if(Ct.to>vt)return Rt+(Ct.point&&Ct.to>vt?1:0);At=Ct.to,Ct.next()}}static of(lt,dt=!1){let vt=new RangeSetBuilder;for(let St of lt instanceof Range?[lt]:dt?lazySort(lt):lt)vt.add(St.from,St.to,St.value);return vt.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(ft){if(ft.length>1)for(let lt=ft[0],dt=1;dt<ft.length;dt++){let vt=ft[dt];if(cmpRange(lt,vt)>0)return ft.slice().sort(cmpRange);lt=vt}return ft}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(lt){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,lt&&(this.from=[],this.to=[],this.value=[])}add(lt,dt,vt){this.addInner(lt,dt,vt)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(lt,dt,vt)}addInner(lt,dt,vt){let St=lt-this.lastTo||vt.startSide-this.last.endSide;if(St<=0&&(lt-this.lastFrom||vt.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return St<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=lt),this.from.push(lt-this.chunkStart),this.to.push(dt-this.chunkStart),this.last=vt,this.lastFrom=lt,this.lastTo=dt,this.value.push(vt),vt.point&&(this.maxPoint=Math.max(this.maxPoint,dt-lt)),!0)}addChunk(lt,dt){if((lt-this.lastTo||dt.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,dt.maxPoint),this.chunks.push(dt),this.chunkPos.push(lt);let vt=dt.value.length-1;return this.last=dt.value[vt],this.lastFrom=dt.from[vt]+lt,this.lastTo=dt.to[vt]+lt,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(lt){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return lt;let dt=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(lt):lt,this.setMaxPoint);return this.from=null,dt}}function findSharedChunks(ft,lt,dt){let vt=new Map;for(let Et of ft)for(let Ct=0;Ct<Et.chunk.length;Ct++)Et.chunk[Ct].maxPoint<=0&&vt.set(Et.chunk[Ct],Et.chunkPos[Ct]);let St=new Set;for(let Et of lt)for(let Ct=0;Ct<Et.chunk.length;Ct++){let At=vt.get(Et.chunk[Ct]);At!=null&&(dt?dt.mapPos(At):At)==Et.chunkPos[Ct]&&!(dt!=null&&dt.touchesRange(At,At+Et.chunk[Ct].length))&&St.add(Et.chunk[Ct])}return St}class LayerCursor{constructor(lt,dt,vt,St=0){this.layer=lt,this.skip=dt,this.minPoint=vt,this.rank=St}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(lt,dt=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(lt,dt,!1),this}gotoInner(lt,dt,vt){for(;this.chunkIndex<this.layer.chunk.length;){let St=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(St)||this.layer.chunkEnd(this.chunkIndex)<lt||St.maxPoint<this.minPoint))break;this.chunkIndex++,vt=!1}if(this.chunkIndex<this.layer.chunk.length){let St=this.layer.chunk[this.chunkIndex].findIndex(lt-this.layer.chunkPos[this.chunkIndex],dt,!0);(!vt||this.rangeIndex<St)&&this.setRangeIndex(St)}this.next()}forward(lt,dt){(this.to-lt||this.endSide-dt)<0&&this.gotoInner(lt,dt,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let lt=this.layer.chunkPos[this.chunkIndex],dt=this.layer.chunk[this.chunkIndex],vt=lt+dt.from[this.rangeIndex];if(this.from=vt,this.to=lt+dt.to[this.rangeIndex],this.value=dt.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(lt){if(lt==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=lt}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(lt){return this.from-lt.from||this.startSide-lt.startSide||this.rank-lt.rank||this.to-lt.to||this.endSide-lt.endSide}}class HeapCursor{constructor(lt){this.heap=lt}static from(lt,dt=null,vt=-1){let St=[];for(let Et=0;Et<lt.length;Et++)for(let Ct=lt[Et];!Ct.isEmpty;Ct=Ct.nextLayer)Ct.maxPoint>=vt&&St.push(new LayerCursor(Ct,dt,vt,Et));return St.length==1?St[0]:new HeapCursor(St)}get startSide(){return this.value?this.value.startSide:0}goto(lt,dt=-1e9){for(let vt of this.heap)vt.goto(lt,dt);for(let vt=this.heap.length>>1;vt>=0;vt--)heapBubble(this.heap,vt);return this.next(),this}forward(lt,dt){for(let vt of this.heap)vt.forward(lt,dt);for(let vt=this.heap.length>>1;vt>=0;vt--)heapBubble(this.heap,vt);(this.to-lt||this.value.endSide-dt)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let lt=this.heap[0];this.from=lt.from,this.to=lt.to,this.value=lt.value,this.rank=lt.rank,lt.value&&lt.next(),heapBubble(this.heap,0)}}}function heapBubble(ft,lt){for(let dt=ft[lt];;){let vt=(lt<<1)+1;if(vt>=ft.length)break;let St=ft[vt];if(vt+1<ft.length&&St.compare(ft[vt+1])>=0&&(St=ft[vt+1],vt++),dt.compare(St)<0)break;ft[vt]=dt,ft[lt]=St,lt=vt}}class SpanCursor{constructor(lt,dt,vt){this.minPoint=vt,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(lt,dt,vt)}goto(lt,dt=-1e9){return this.cursor.goto(lt,dt),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=lt,this.endSide=dt,this.openStart=-1,this.next(),this}forward(lt,dt){for(;this.minActive>-1&&(this.activeTo[this.minActive]-lt||this.active[this.minActive].endSide-dt)<0;)this.removeActive(this.minActive);this.cursor.forward(lt,dt)}removeActive(lt){remove(this.active,lt),remove(this.activeTo,lt),remove(this.activeRank,lt),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(lt){let dt=0,{value:vt,to:St,rank:Et}=this.cursor;for(;dt<this.activeRank.length&&this.activeRank[dt]<=Et;)dt++;insert(this.active,dt,vt),insert(this.activeTo,dt,St),insert(this.activeRank,dt,Et),lt&&insert(lt,dt,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let lt=this.to,dt=this.point;this.point=null;let vt=this.openStart<0?[]:null;for(;;){let St=this.minActive;if(St>-1&&(this.activeTo[St]-this.cursor.from||this.active[St].endSide-this.cursor.startSide)<0){if(this.activeTo[St]>lt){this.to=this.activeTo[St],this.endSide=this.active[St].endSide;break}this.removeActive(St),vt&&remove(vt,St)}else if(this.cursor.value)if(this.cursor.from>lt){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let Et=this.cursor.value;if(!Et.point)this.addActive(vt),this.cursor.next();else if(dt&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=Et,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=Et.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(vt){this.openStart=0;for(let St=vt.length-1;St>=0&&vt[St]<lt;St--)this.openStart++}}activeForPoint(lt){if(!this.active.length)return this.active;let dt=[];for(let vt=this.active.length-1;vt>=0&&!(this.activeRank[vt]<this.pointRank);vt--)(this.activeTo[vt]>lt||this.activeTo[vt]==lt&&this.active[vt].endSide>=this.point.endSide)&&dt.push(this.active[vt]);return dt.reverse()}openEnd(lt){let dt=0;for(let vt=this.activeTo.length-1;vt>=0&&this.activeTo[vt]>lt;vt--)dt++;return dt}}function compare(ft,lt,dt,vt,St,Et){ft.goto(lt),dt.goto(vt);let Ct=vt+St,At=vt,Rt=vt-lt;for(;;){let Dt=ft.to+Rt-dt.to||ft.endSide-dt.endSide,Nt=Dt<0?ft.to+Rt:dt.to,Ft=Math.min(Nt,Ct);if(ft.point||dt.point?ft.point&&dt.point&&(ft.point==dt.point||ft.point.eq(dt.point))&&sameValues(ft.activeForPoint(ft.to+Rt),dt.activeForPoint(dt.to))||Et.comparePoint(At,Ft,ft.point,dt.point):Ft>At&&!sameValues(ft.active,dt.active)&&Et.compareRange(At,Ft,ft.active,dt.active),Nt>Ct)break;At=Nt,Dt<=0&&ft.next(),Dt>=0&&dt.next()}}function sameValues(ft,lt){if(ft.length!=lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!=lt[dt]&&!ft[dt].eq(lt[dt]))return!1;return!0}function remove(ft,lt){for(let dt=lt,vt=ft.length-1;dt<vt;dt++)ft[dt]=ft[dt+1];ft.pop()}function insert(ft,lt,dt){for(let vt=ft.length-1;vt>=lt;vt--)ft[vt+1]=ft[vt];ft[lt]=dt}function findMinIndex(ft,lt){let dt=-1,vt=1e9;for(let St=0;St<lt.length;St++)(lt[St]-vt||ft[St].endSide-ft[dt].endSide)<0&&(dt=St,vt=lt[St]);return dt}function countColumn(ft,lt,dt=ft.length){let vt=0;for(let St=0;St<dt;)ft.charCodeAt(St)==9?(vt+=lt-vt%lt,St++):(vt++,St=findClusterBreak(ft,St));return vt}function findColumn(ft,lt,dt,vt){for(let St=0,Et=0;;){if(Et>=lt)return St;if(St==ft.length)break;Et+=ft.charCodeAt(St)==9?dt-Et%dt:1,St=findClusterBreak(ft,St)}return vt===!0?-1:ft.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(lt,dt){this.rules=[];let{finish:vt}=dt||{};function St(Ct){return/^@/.test(Ct)?[Ct]:Ct.split(/,\s*/)}function Et(Ct,At,Rt,Dt){let Nt=[],Ft=/^@(\w+)\b/.exec(Ct[0]),Ut=Ft&&Ft[1]=="keyframes";if(Ft&&At==null)return Rt.push(Ct[0]+";");for(let Wt in At){let Zt=At[Wt];if(/&/.test(Wt))Et(Wt.split(/,\s*/).map(Kt=>Ct.map(cn=>Kt.replace(/&/,cn))).reduce((Kt,cn)=>Kt.concat(cn)),Zt,Rt);else if(Zt&&typeof Zt=="object"){if(!Ft)throw new RangeError("The value of a property ("+Wt+") should be a primitive value.");Et(St(Wt),Zt,Nt,Ut)}else Zt!=null&&Nt.push(Wt.replace(/_.*/,"").replace(/[A-Z]/g,Kt=>"-"+Kt.toLowerCase())+": "+Zt+";")}(Nt.length||Ut)&&Rt.push((vt&&!Ft&&!Dt?Ct.map(vt):Ct).join(", ")+" {"+Nt.join(" ")+"}")}for(let Ct in lt)Et(St(Ct),lt[Ct],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let lt=top[COUNT]||1;return top[COUNT]=lt+1,C+lt.toString(36)}static mount(lt,dt){(lt[SET]||new StyleSet(lt)).mount(Array.isArray(dt)?dt:[dt])}}let adoptedSet=null;class StyleSet{constructor(lt){if(!lt.head&&lt.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return lt.adoptedStyleSheets=[adoptedSet.sheet].concat(lt.adoptedStyleSheets),lt[SET]=adoptedSet;this.sheet=new CSSStyleSheet,lt.adoptedStyleSheets=[this.sheet].concat(lt.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(lt.ownerDocument||lt).createElement("style");let dt=lt.head||lt;dt.insertBefore(this.styleTag,dt.firstChild)}this.modules=[],lt[SET]=this}mount(lt){let dt=this.sheet,vt=0,St=0;for(let Et=0;Et<lt.length;Et++){let Ct=lt[Et],At=this.modules.indexOf(Ct);if(At<St&&At>-1&&(this.modules.splice(At,1),St--,At=-1),At==-1){if(this.modules.splice(St++,0,Ct),dt)for(let Rt=0;Rt<Ct.rules.length;Rt++)dt.insertRule(Ct.rules[Rt],vt++)}else{for(;St<At;)vt+=this.modules[St++].rules.length;vt+=Ct.rules.length,St++}}if(!dt){let Et="";for(let Ct=0;Ct<this.modules.length;Ct++)Et+=this.modules[Ct].getRules()+`
`;this.styleTag.textContent=Et}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57;for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(ft){var lt=brokenModifierNames&&(ft.ctrlKey||ft.altKey||ft.metaKey)||ie$1&&ft.shiftKey&&ft.key&&ft.key.length==1||ft.key=="Unidentified",dt=!lt&&ft.key||(ft.shiftKey?shift:base)[ft.keyCode]||ft.key||"Unidentified";return dt=="Esc"&&(dt="Escape"),dt=="Del"&&(dt="Delete"),dt=="Left"&&(dt="ArrowLeft"),dt=="Up"&&(dt="ArrowUp"),dt=="Right"&&(dt="ArrowRight"),dt=="Down"&&(dt="ArrowDown"),dt}function getSelection(ft){let lt;return ft.nodeType==11?lt=ft.getSelection?ft:ft.ownerDocument:lt=ft,lt.getSelection()}function contains(ft,lt){return lt?ft==lt||ft.contains(lt.nodeType!=1?lt.parentNode:lt):!1}function deepActiveElement(ft){let lt=ft.activeElement;for(;lt&&lt.shadowRoot;)lt=lt.shadowRoot.activeElement;return lt}function hasSelection(ft,lt){if(!lt.anchorNode)return!1;try{return contains(ft,lt.anchorNode)}catch{return!1}}function clientRectsFor(ft){return ft.nodeType==3?textRange(ft,0,ft.nodeValue.length).getClientRects():ft.nodeType==1?ft.getClientRects():[]}function isEquivalentPosition(ft,lt,dt,vt){return dt?scanFor(ft,lt,dt,vt,-1)||scanFor(ft,lt,dt,vt,1):!1}function domIndex(ft){for(var lt=0;;lt++)if(ft=ft.previousSibling,!ft)return lt}function scanFor(ft,lt,dt,vt,St){for(;;){if(ft==dt&&lt==vt)return!0;if(lt==(St<0?0:maxOffset(ft))){if(ft.nodeName=="DIV")return!1;let Et=ft.parentNode;if(!Et||Et.nodeType!=1)return!1;lt=domIndex(ft)+(St<0?0:1),ft=Et}else if(ft.nodeType==1){if(ft=ft.childNodes[lt+(St<0?-1:0)],ft.nodeType==1&&ft.contentEditable=="false")return!1;lt=St<0?maxOffset(ft):0}else return!1}}function maxOffset(ft){return ft.nodeType==3?ft.nodeValue.length:ft.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(ft,lt){let dt=lt?ft.left:ft.right;return{left:dt,right:dt,top:ft.top,bottom:ft.bottom}}function windowRect(ft){return{left:0,right:ft.innerWidth,top:0,bottom:ft.innerHeight}}function scrollRectIntoView(ft,lt,dt,vt,St,Et,Ct,At){let Rt=ft.ownerDocument,Dt=Rt.defaultView||window;for(let Nt=ft;Nt;)if(Nt.nodeType==1){let Ft,Ut=Nt==Rt.body;if(Ut)Ft=windowRect(Dt);else{if(Nt.scrollHeight<=Nt.clientHeight&&Nt.scrollWidth<=Nt.clientWidth){Nt=Nt.assignedSlot||Nt.parentNode;continue}let Kt=Nt.getBoundingClientRect();Ft={left:Kt.left,right:Kt.left+Nt.clientWidth,top:Kt.top,bottom:Kt.top+Nt.clientHeight}}let Wt=0,Zt=0;if(St=="nearest")lt.top<Ft.top?(Zt=-(Ft.top-lt.top+Ct),dt>0&&lt.bottom>Ft.bottom+Zt&&(Zt=lt.bottom-Ft.bottom+Zt+Ct)):lt.bottom>Ft.bottom&&(Zt=lt.bottom-Ft.bottom+Ct,dt<0&&lt.top-Zt<Ft.top&&(Zt=-(Ft.top+Zt-lt.top+Ct)));else{let Kt=lt.bottom-lt.top,cn=Ft.bottom-Ft.top;Zt=(St=="center"&&Kt<=cn?lt.top+Kt/2-cn/2:St=="start"||St=="center"&&dt<0?lt.top-Ct:lt.bottom-cn+Ct)-Ft.top}if(vt=="nearest"?lt.left<Ft.left?(Wt=-(Ft.left-lt.left+Et),dt>0&&lt.right>Ft.right+Wt&&(Wt=lt.right-Ft.right+Wt+Et)):lt.right>Ft.right&&(Wt=lt.right-Ft.right+Et,dt<0&&lt.left<Ft.left+Wt&&(Wt=-(Ft.left+Wt-lt.left+Et))):Wt=(vt=="center"?lt.left+(lt.right-lt.left)/2-(Ft.right-Ft.left)/2:vt=="start"==At?lt.left-Et:lt.right-(Ft.right-Ft.left)+Et)-Ft.left,Wt||Zt)if(Ut)Dt.scrollBy(Wt,Zt);else{let Kt=0,cn=0;if(Zt){let hn=Nt.scrollTop;Nt.scrollTop+=Zt,cn=Nt.scrollTop-hn}if(Wt){let hn=Nt.scrollLeft;Nt.scrollLeft+=Wt,Kt=Nt.scrollLeft-hn}lt={left:lt.left-Kt,top:lt.top-cn,right:lt.right-Kt,bottom:lt.bottom-cn},Kt&&Math.abs(Kt-Wt)<1&&(vt="nearest"),cn&&Math.abs(cn-Zt)<1&&(St="nearest")}if(Ut)break;Nt=Nt.assignedSlot||Nt.parentNode}else if(Nt.nodeType==11)Nt=Nt.host;else break}function scrollableParent(ft){let lt=ft.ownerDocument;for(let dt=ft.parentNode;dt&&dt!=lt.body;)if(dt.nodeType==1){if(dt.scrollHeight>dt.clientHeight||dt.scrollWidth>dt.clientWidth)return dt;dt=dt.assignedSlot||dt.parentNode}else if(dt.nodeType==11)dt=dt.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(lt){return this.anchorNode==lt.anchorNode&&this.anchorOffset==lt.anchorOffset&&this.focusNode==lt.focusNode&&this.focusOffset==lt.focusOffset}setRange(lt){this.set(lt.anchorNode,lt.anchorOffset,lt.focusNode,lt.focusOffset)}set(lt,dt,vt,St){this.anchorNode=lt,this.anchorOffset=dt,this.focusNode=vt,this.focusOffset=St}}let preventScrollSupported=null;function focusPreventScroll(ft){if(ft.setActive)return ft.setActive();if(preventScrollSupported)return ft.focus(preventScrollSupported);let lt=[];for(let dt=ft;dt&&(lt.push(dt,dt.scrollTop,dt.scrollLeft),dt!=dt.ownerDocument);dt=dt.parentNode);if(ft.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let dt=0;dt<lt.length;){let vt=lt[dt++],St=lt[dt++],Et=lt[dt++];vt.scrollTop!=St&&(vt.scrollTop=St),vt.scrollLeft!=Et&&(vt.scrollLeft=Et)}}}let scratchRange;function textRange(ft,lt,dt=lt){let vt=scratchRange||(scratchRange=document.createRange());return vt.setEnd(ft,dt),vt.setStart(ft,lt),vt}function dispatchKey(ft,lt,dt){let vt={key:lt,code:lt,keyCode:dt,which:dt,cancelable:!0},St=new KeyboardEvent("keydown",vt);St.synthetic=!0,ft.dispatchEvent(St);let Et=new KeyboardEvent("keyup",vt);return Et.synthetic=!0,ft.dispatchEvent(Et),St.defaultPrevented||Et.defaultPrevented}function getRoot(ft){for(;ft;){if(ft&&(ft.nodeType==9||ft.nodeType==11&&ft.host))return ft;ft=ft.assignedSlot||ft.parentNode}return null}function clearAttributes(ft){for(;ft.attributes.length;)ft.removeAttributeNode(ft.attributes[0])}function atElementStart(ft,lt){let dt=lt.focusNode,vt=lt.focusOffset;if(!dt||lt.anchorNode!=dt||lt.anchorOffset!=vt)return!1;for(;;)if(vt){if(dt.nodeType!=1)return!1;let St=dt.childNodes[vt-1];St.contentEditable=="false"?vt--:(dt=St,vt=maxOffset(dt))}else{if(dt==ft)return!0;vt=domIndex(dt),dt=dt.parentNode}}class DOMPos{constructor(lt,dt,vt=!0){this.node=lt,this.offset=dt,this.precise=vt}static before(lt,dt){return new DOMPos(lt.parentNode,domIndex(lt),dt)}static after(lt,dt){return new DOMPos(lt.parentNode,domIndex(lt)+1,dt)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(lt){let dt=this.posAtStart;for(let vt of this.children){if(vt==lt)return dt;dt+=vt.length+vt.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(lt){return this.posBefore(lt)+lt.length}coordsAt(lt,dt){return null}sync(lt,dt){if(this.dirty&2){let vt=this.dom,St=null,Et;for(let Ct of this.children){if(Ct.dirty){if(!Ct.dom&&(Et=St?St.nextSibling:vt.firstChild)){let At=ContentView.get(Et);(!At||!At.parent&&At.canReuseDOM(Ct))&&Ct.reuseDOM(Et)}Ct.sync(lt,dt),Ct.dirty=0}if(Et=St?St.nextSibling:vt.firstChild,dt&&!dt.written&&dt.node==vt&&Et!=Ct.dom&&(dt.written=!0),Ct.dom.parentNode==vt)for(;Et&&Et!=Ct.dom;)Et=rm$1(Et);else vt.insertBefore(Ct.dom,Et);St=Ct.dom}for(Et=St?St.nextSibling:vt.firstChild,Et&&dt&&dt.node==vt&&(dt.written=!0);Et;)Et=rm$1(Et)}else if(this.dirty&1)for(let vt of this.children)vt.dirty&&(vt.sync(lt,dt),vt.dirty=0)}reuseDOM(lt){}localPosFromDOM(lt,dt){let vt;if(lt==this.dom)vt=this.dom.childNodes[dt];else{let St=maxOffset(lt)==0?0:dt==0?-1:1;for(;;){let Et=lt.parentNode;if(Et==this.dom)break;St==0&&Et.firstChild!=Et.lastChild&&(lt==Et.firstChild?St=-1:St=1),lt=Et}St<0?vt=lt:vt=lt.nextSibling}if(vt==this.dom.firstChild)return 0;for(;vt&&!ContentView.get(vt);)vt=vt.nextSibling;if(!vt)return this.length;for(let St=0,Et=0;;St++){let Ct=this.children[St];if(Ct.dom==vt)return Et;Et+=Ct.length+Ct.breakAfter}}domBoundsAround(lt,dt,vt=0){let St=-1,Et=-1,Ct=-1,At=-1;for(let Rt=0,Dt=vt,Nt=vt;Rt<this.children.length;Rt++){let Ft=this.children[Rt],Ut=Dt+Ft.length;if(Dt<lt&&Ut>dt)return Ft.domBoundsAround(lt,dt,Dt);if(Ut>=lt&&St==-1&&(St=Rt,Et=Dt),Dt>dt&&Ft.dom.parentNode==this.dom){Ct=Rt,At=Nt;break}Nt=Ut,Dt=Ut+Ft.breakAfter}return{from:Et,to:At<0?vt+this.length:At,startDOM:(St?this.children[St-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:Ct<this.children.length&&Ct>=0?this.children[Ct].dom:null}}markDirty(lt=!1){this.dirty|=2,this.markParentsDirty(lt)}markParentsDirty(lt){for(let dt=this.parent;dt;dt=dt.parent){if(lt&&(dt.dirty|=2),dt.dirty&1)return;dt.dirty|=1,lt=!1}}setParent(lt){this.parent!=lt&&(this.parent=lt,this.dirty&&this.markParentsDirty(!0))}setDOM(lt){this.dom&&(this.dom.cmView=null),this.dom=lt,lt.cmView=this}get rootView(){for(let lt=this;;){let dt=lt.parent;if(!dt)return lt;lt=dt}}replaceChildren(lt,dt,vt=noChildren){this.markDirty();for(let St=lt;St<dt;St++){let Et=this.children[St];Et.parent==this&&Et.destroy()}this.children.splice(lt,dt-lt,...vt);for(let St=0;St<vt.length;St++)vt[St].setParent(this)}ignoreMutation(lt){return!1}ignoreEvent(lt){return!1}childCursor(lt=this.length){return new ChildCursor(this.children,lt,this.children.length)}childPos(lt,dt=1){return this.childCursor().findPos(lt,dt)}toString(){let lt=this.constructor.name.replace("View","");return lt+(this.children.length?"("+this.children.join()+")":this.length?"["+(lt=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(lt){return lt.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(lt,dt,vt,St,Et,Ct){return!1}become(lt){return!1}canReuseDOM(lt){return lt.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(ft){let lt=ft.nextSibling;return ft.parentNode.removeChild(ft),lt}class ChildCursor{constructor(lt,dt,vt){this.children=lt,this.pos=dt,this.i=vt,this.off=0}findPos(lt,dt=1){for(;;){if(lt>this.pos||lt==this.pos&&(dt>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=lt-this.pos,this;let vt=this.children[--this.i];this.pos-=vt.length+vt.breakAfter}}}function replaceRange(ft,lt,dt,vt,St,Et,Ct,At,Rt){let{children:Dt}=ft,Nt=Dt.length?Dt[lt]:null,Ft=Et.length?Et[Et.length-1]:null,Ut=Ft?Ft.breakAfter:Ct;if(!(lt==vt&&Nt&&!Ct&&!Ut&&Et.length<2&&Nt.merge(dt,St,Et.length?Ft:null,dt==0,At,Rt))){if(vt<Dt.length){let Wt=Dt[vt];Wt&&St<Wt.length?(lt==vt&&(Wt=Wt.split(St),St=0),!Ut&&Ft&&Wt.merge(0,St,Ft,!0,0,Rt)?Et[Et.length-1]=Wt:(St&&Wt.merge(0,St,null,!1,0,Rt),Et.push(Wt))):Wt!=null&&Wt.breakAfter&&(Ft?Ft.breakAfter=1:Ct=1),vt++}for(Nt&&(Nt.breakAfter=Ct,dt>0&&(!Ct&&Et.length&&Nt.merge(dt,Nt.length,Et[0],!1,At,0)?Nt.breakAfter=Et.shift().breakAfter:(dt<Nt.length||Nt.children.length&&Nt.children[Nt.children.length-1].length==0)&&Nt.merge(dt,Nt.length,null,!1,At,0),lt++));lt<vt&&Et.length;)if(Dt[vt-1].become(Et[Et.length-1]))vt--,Et.pop(),Rt=Et.length?0:At;else if(Dt[lt].become(Et[0]))lt++,Et.shift(),At=Et.length?0:Rt;else break;!Et.length&&lt&&vt<Dt.length&&!Dt[lt-1].breakAfter&&Dt[vt].merge(0,0,Dt[lt-1],!1,At,Rt)&&lt--,(lt<vt||Et.length)&&ft.replaceChildren(lt,vt,Et)}}function mergeChildrenInto(ft,lt,dt,vt,St,Et){let Ct=ft.childCursor(),{i:At,off:Rt}=Ct.findPos(dt,1),{i:Dt,off:Nt}=Ct.findPos(lt,-1),Ft=lt-dt;for(let Ut of vt)Ft+=Ut.length;ft.length+=Ft,replaceRange(ft,Dt,Nt,At,Rt,vt,0,St,Et)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(lt){super(),this.text=lt}get length(){return this.text.length}createDOM(lt){this.setDOM(lt||document.createTextNode(this.text))}sync(lt,dt){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(dt&&dt.node==this.dom&&(dt.written=!0),this.dom.nodeValue=this.text)}reuseDOM(lt){lt.nodeType==3&&this.createDOM(lt)}merge(lt,dt,vt){return vt&&(!(vt instanceof TextView)||this.length-(dt-lt)+vt.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,lt)+(vt?vt.text:"")+this.text.slice(dt),this.markDirty(),!0)}split(lt){let dt=new TextView(this.text.slice(lt));return this.text=this.text.slice(0,lt),this.markDirty(),dt}localPosFromDOM(lt,dt){return lt==this.dom?dt:dt?this.text.length:0}domAtPos(lt){return new DOMPos(this.dom,lt)}domBoundsAround(lt,dt,vt){return{from:vt,to:vt+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(lt,dt){return textCoords(this.dom,lt,dt)}}class MarkView extends ContentView{constructor(lt,dt=[],vt=0){super(),this.mark=lt,this.children=dt,this.length=vt;for(let St of dt)St.setParent(this)}setAttrs(lt){if(clearAttributes(lt),this.mark.class&&(lt.className=this.mark.class),this.mark.attrs)for(let dt in this.mark.attrs)lt.setAttribute(dt,this.mark.attrs[dt]);return lt}reuseDOM(lt){lt.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(lt),this.dirty|=6)}sync(lt,dt){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(lt,dt)}merge(lt,dt,vt,St,Et,Ct){return vt&&(!(vt instanceof MarkView&&vt.mark.eq(this.mark))||lt&&Et<=0||dt<this.length&&Ct<=0)?!1:(mergeChildrenInto(this,lt,dt,vt?vt.children:[],Et-1,Ct-1),this.markDirty(),!0)}split(lt){let dt=[],vt=0,St=-1,Et=0;for(let At of this.children){let Rt=vt+At.length;Rt>lt&&dt.push(vt<lt?At.split(lt-vt):At),St<0&&vt>=lt&&(St=Et),vt=Rt,Et++}let Ct=this.length-lt;return this.length=lt,St>-1&&(this.children.length=St,this.markDirty()),new MarkView(this.mark,dt,Ct)}domAtPos(lt){return inlineDOMAtPos(this,lt)}coordsAt(lt,dt){return coordsInChildren(this,lt,dt)}}function textCoords(ft,lt,dt){let vt=ft.nodeValue.length;lt>vt&&(lt=vt);let St=lt,Et=lt,Ct=0;lt==0&&dt<0||lt==vt&&dt>=0?browser.chrome||browser.gecko||(lt?(St--,Ct=1):Et<vt&&(Et++,Ct=-1)):dt<0?St--:Et<vt&&Et++;let At=textRange(ft,St,Et).getClientRects();if(!At.length)return Rect0;let Rt=At[(Ct?Ct<0:dt>=0)?0:At.length-1];return browser.safari&&!Ct&&Rt.width==0&&(Rt=Array.prototype.find.call(At,Dt=>Dt.width)||Rt),Ct?flattenRect(Rt,Ct<0):Rt||null}class WidgetView extends ContentView{constructor(lt,dt,vt){super(),this.widget=lt,this.length=dt,this.side=vt,this.prevWidget=null}static create(lt,dt,vt){return new(lt.customView||WidgetView)(lt,dt,vt)}split(lt){let dt=WidgetView.create(this.widget,this.length-lt,this.side);return this.length-=lt,dt}sync(lt){(!this.dom||!this.widget.updateDOM(this.dom,lt))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(lt)),this.dom.contentEditable="false")}getSide(){return this.side}merge(lt,dt,vt,St,Et,Ct){return vt&&(!(vt instanceof WidgetView)||!this.widget.compare(vt.widget)||lt>0&&Et<=0||dt<this.length&&Ct<=0)?!1:(this.length=lt+(vt?vt.length:0)+(this.length-dt),!0)}become(lt){return lt.length==this.length&&lt instanceof WidgetView&&lt.side==this.side&&this.widget.constructor==lt.widget.constructor?(this.widget.eq(lt.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=lt.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(lt){return this.widget.ignoreEvent(lt)}get overrideDOMText(){if(this.length==0)return Text.empty;let lt=this;for(;lt.parent;)lt=lt.parent;let{view:dt}=lt,vt=dt&&dt.state.doc,St=this.posAtStart;return vt?vt.slice(St,St+this.length):Text.empty}domAtPos(lt){return lt==0?DOMPos.before(this.dom):DOMPos.after(this.dom,lt==this.length)}domBoundsAround(){return null}coordsAt(lt,dt){let vt=this.dom.getClientRects(),St=null;if(!vt.length)return Rect0;for(let Et=lt>0?vt.length-1:0;St=vt[Et],!(lt>0?Et==0:Et==vt.length-1||St.top<St.bottom);Et+=lt>0?-1:1);return this.length?St:flattenRect(St,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(lt){let{topView:dt,text:vt}=this.widget;return dt?scanCompositionTree(lt,0,dt,vt,(St,Et)=>St.domAtPos(Et),St=>new DOMPos(vt,Math.min(St,vt.nodeValue.length))):new DOMPos(vt,Math.min(lt,vt.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(lt,dt){let{topView:vt,text:St}=this.widget;return vt?posFromDOMInCompositionTree(lt,dt,vt,St):Math.min(dt,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(lt,dt){let{topView:vt,text:St}=this.widget;return vt?scanCompositionTree(lt,dt,vt,St,(Et,Ct,At)=>Et.coordsAt(Ct,At),(Et,Ct)=>textCoords(St,Et,Ct)):textCoords(St,lt,dt)}destroy(){var lt;super.destroy(),(lt=this.widget.topView)===null||lt===void 0||lt.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(ft,lt,dt,vt,St,Et){if(dt instanceof MarkView){for(let Ct=dt.dom.firstChild;Ct;Ct=Ct.nextSibling){let At=ContentView.get(Ct);if(!At)return Et(ft,lt);let Rt=contains(Ct,vt),Dt=At.length+(Rt?vt.nodeValue.length:0);if(ft<Dt||ft==Dt&&At.getSide()<=0)return Rt?scanCompositionTree(ft,lt,At,vt,St,Et):St(At,ft,lt);ft-=Dt}return St(dt,dt.length,-1)}else return dt.dom==vt?Et(ft,lt):St(dt,ft,lt)}function posFromDOMInCompositionTree(ft,lt,dt,vt){if(dt instanceof MarkView)for(let St of dt.children){let Et=0,Ct=contains(St.dom,vt);if(contains(St.dom,ft))return Et+(Ct?posFromDOMInCompositionTree(ft,lt,St,vt):St.localPosFromDOM(ft,lt));Et+=Ct?vt.nodeValue.length:St.length}else if(dt.dom==vt)return Math.min(lt,vt.nodeValue.length);return dt.localPosFromDOM(ft,lt)}class WidgetBufferView extends ContentView{constructor(lt){super(),this.side=lt}get length(){return 0}merge(){return!1}become(lt){return lt instanceof WidgetBufferView&&lt.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let lt=document.createElement("img");lt.className="cm-widgetBuffer",lt.setAttribute("aria-hidden","true"),this.setDOM(lt)}}getSide(){return this.side}domAtPos(lt){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(lt){let dt=this.dom.getBoundingClientRect(),vt=inlineSiblingRect(this,this.side>0?-1:1);return vt&&vt.top<dt.bottom&&vt.bottom>dt.top?{left:dt.left,right:dt.right,top:vt.top,bottom:vt.bottom}:dt}get overrideDOMText(){return Text.empty}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineSiblingRect(ft,lt){let dt=ft.parent,vt=dt?dt.children.indexOf(ft):-1;for(;dt&&vt>=0;)if(lt<0?vt>0:vt<dt.children.length){let St=dt.children[vt+lt];if(St instanceof TextView){let Et=St.coordsAt(lt<0?St.length:0,lt);if(Et)return Et}vt+=lt}else if(dt instanceof MarkView&&dt.parent)vt=dt.parent.children.indexOf(dt)+(lt<0?0:1),dt=dt.parent;else{let St=dt.dom.lastChild;if(St&&St.nodeName=="BR")return St.getClientRects()[0];break}}function inlineDOMAtPos(ft,lt){let dt=ft.dom,{children:vt}=ft,St=0;for(let Et=0;St<vt.length;St++){let Ct=vt[St],At=Et+Ct.length;if(!(At==Et&&Ct.getSide()<=0)){if(lt>Et&&lt<At&&Ct.dom.parentNode==dt)return Ct.domAtPos(lt-Et);if(lt<=Et)break;Et=At}}for(let Et=St;Et>0;Et--){let Ct=vt[Et-1];if(Ct.dom.parentNode==dt)return Ct.domAtPos(Ct.length)}for(let Et=St;Et<vt.length;Et++){let Ct=vt[Et];if(Ct.dom.parentNode==dt)return Ct.domAtPos(0)}return new DOMPos(dt,0)}function joinInlineInto(ft,lt,dt){let vt,{children:St}=ft;dt>0&&lt instanceof MarkView&&St.length&&(vt=St[St.length-1])instanceof MarkView&&vt.mark.eq(lt.mark)?joinInlineInto(vt,lt.children[0],dt-1):(St.push(lt),lt.setParent(ft)),ft.length+=lt.length}function coordsInChildren(ft,lt,dt){let vt=null,St=-1,Et=null,Ct=-1;function At(Dt,Nt){for(let Ft=0,Ut=0;Ft<Dt.children.length&&Ut<=Nt;Ft++){let Wt=Dt.children[Ft],Zt=Ut+Wt.length;Zt>=Nt&&(Wt.children.length?At(Wt,Nt-Ut):!Et&&(Zt>Nt||Ut==Zt&&Wt.getSide()>0)?(Et=Wt,Ct=Nt-Ut):(Ut<Nt||Ut==Zt&&Wt.getSide()<0)&&(vt=Wt,St=Nt-Ut)),Ut=Zt}}At(ft,lt);let Rt=(dt<0?vt:Et)||vt||Et;return Rt?Rt.coordsAt(Math.max(0,Rt==vt?St:Ct),dt):fallbackRect(ft)}function fallbackRect(ft){let lt=ft.dom.lastChild;if(!lt)return ft.dom.getBoundingClientRect();let dt=clientRectsFor(lt);return dt[dt.length-1]||null}function combineAttrs(ft,lt){for(let dt in ft)dt=="class"&&lt.class?lt.class+=" "+ft.class:dt=="style"&&lt.style?lt.style+=";"+ft.style:lt[dt]=ft[dt];return lt}function attrsEq(ft,lt){if(ft==lt)return!0;if(!ft||!lt)return!1;let dt=Object.keys(ft),vt=Object.keys(lt);if(dt.length!=vt.length)return!1;for(let St of dt)if(vt.indexOf(St)==-1||ft[St]!==lt[St])return!1;return!0}function updateAttrs(ft,lt,dt){let vt=null;if(lt)for(let St in lt)dt&&St in dt||ft.removeAttribute(vt=St);if(dt)for(let St in dt)lt&&lt[St]==dt[St]||ft.setAttribute(vt=St,dt[St]);return!!vt}class WidgetType{eq(lt){return!1}updateDOM(lt,dt){return!1}compare(lt){return this==lt||this.constructor==lt.constructor&&this.eq(lt)}get estimatedHeight(){return-1}ignoreEvent(lt){return!0}get customView(){return null}destroy(lt){}}var BlockType=function(ft){return ft[ft.Text=0]="Text",ft[ft.WidgetBefore=1]="WidgetBefore",ft[ft.WidgetAfter=2]="WidgetAfter",ft[ft.WidgetRange=3]="WidgetRange",ft}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(lt,dt,vt,St){super(),this.startSide=lt,this.endSide=dt,this.widget=vt,this.spec=St}get heightRelevant(){return!1}static mark(lt){return new MarkDecoration(lt)}static widget(lt){let dt=lt.side||0,vt=!!lt.block;return dt+=vt?dt>0?3e8:-4e8:dt>0?1e8:-1e8,new PointDecoration(lt,dt,dt,vt,lt.widget||null,!1)}static replace(lt){let dt=!!lt.block,vt,St;if(lt.isBlockGap)vt=-5e8,St=4e8;else{let{start:Et,end:Ct}=getInclusive(lt,dt);vt=(Et?dt?-3e8:-1:5e8)-1,St=(Ct?dt?2e8:1:-6e8)+1}return new PointDecoration(lt,vt,St,dt,lt.widget||null,!0)}static line(lt){return new LineDecoration(lt)}static set(lt,dt=!1){return RangeSet.of(lt,dt)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(lt){let{start:dt,end:vt}=getInclusive(lt);super(dt?-1:5e8,vt?1:-6e8,null,lt),this.tagName=lt.tagName||"span",this.class=lt.class||"",this.attrs=lt.attributes||null}eq(lt){return this==lt||lt instanceof MarkDecoration&&this.tagName==lt.tagName&&this.class==lt.class&&attrsEq(this.attrs,lt.attrs)}range(lt,dt=lt){if(lt>=dt)throw new RangeError("Mark decorations may not be empty");return super.range(lt,dt)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(lt){super(-2e8,-2e8,null,lt)}eq(lt){return lt instanceof LineDecoration&&this.spec.class==lt.spec.class&&attrsEq(this.spec.attributes,lt.spec.attributes)}range(lt,dt=lt){if(dt!=lt)throw new RangeError("Line decoration ranges must be zero-length");return super.range(lt,dt)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(lt,dt,vt,St,Et,Ct){super(dt,vt,Et,lt),this.block=St,this.isReplace=Ct,this.mapMode=St?dt<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(lt){return lt instanceof PointDecoration&&widgetsEq(this.widget,lt.widget)&&this.block==lt.block&&this.startSide==lt.startSide&&this.endSide==lt.endSide}range(lt,dt=lt){if(this.isReplace&&(lt>dt||lt==dt&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&dt!=lt)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(lt,dt)}}PointDecoration.prototype.point=!0;function getInclusive(ft,lt=!1){let{inclusiveStart:dt,inclusiveEnd:vt}=ft;return dt==null&&(dt=ft.inclusive),vt==null&&(vt=ft.inclusive),{start:dt??lt,end:vt??lt}}function widgetsEq(ft,lt){return ft==lt||!!(ft&&lt&&ft.compare(lt))}function addRange(ft,lt,dt,vt=0){let St=dt.length-1;St>=0&&dt[St]+vt>=ft?dt[St]=Math.max(dt[St],lt):dt.push(ft,lt)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(lt,dt,vt,St,Et,Ct){if(vt){if(!(vt instanceof LineView))return!1;this.dom||vt.transferDOM(this)}return St&&this.setDeco(vt?vt.attrs:null),mergeChildrenInto(this,lt,dt,vt?vt.children:[],Et,Ct),!0}split(lt){let dt=new LineView;if(dt.breakAfter=this.breakAfter,this.length==0)return dt;let{i:vt,off:St}=this.childPos(lt);St&&(dt.append(this.children[vt].split(St),0),this.children[vt].merge(St,this.children[vt].length,null,!1,0,0),vt++);for(let Et=vt;Et<this.children.length;Et++)dt.append(this.children[Et],0);for(;vt>0&&this.children[vt-1].length==0;)this.children[--vt].destroy();return this.children.length=vt,this.markDirty(),this.length=lt,dt}transferDOM(lt){this.dom&&(this.markDirty(),lt.setDOM(this.dom),lt.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(lt){attrsEq(this.attrs,lt)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=lt)}append(lt,dt){joinInlineInto(this,lt,dt)}addLineDeco(lt){let dt=lt.spec.attributes,vt=lt.spec.class;dt&&(this.attrs=combineAttrs(dt,this.attrs||{})),vt&&(this.attrs=combineAttrs({class:vt},this.attrs||{}))}domAtPos(lt){return inlineDOMAtPos(this,lt)}reuseDOM(lt){lt.nodeName=="DIV"&&(this.setDOM(lt),this.dirty|=6)}sync(lt,dt){var vt;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(lt,dt);let St=this.dom.lastChild;for(;St&&ContentView.get(St)instanceof MarkView;)St=St.lastChild;if(!St||!this.length||St.nodeName!="BR"&&((vt=ContentView.get(St))===null||vt===void 0?void 0:vt.isEditable)==!1&&(!browser.ios||!this.children.some(Et=>Et instanceof TextView))){let Et=document.createElement("BR");Et.cmIgnore=!0,this.dom.appendChild(Et)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let lt=0;for(let dt of this.children){if(!(dt instanceof TextView)||/[^ -~]/.test(dt.text))return null;let vt=clientRectsFor(dt.dom);if(vt.length!=1)return null;lt+=vt[0].width}return lt?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:lt/this.length}:null}coordsAt(lt,dt){return coordsInChildren(this,lt,dt)}become(lt){return!1}get type(){return BlockType.Text}static find(lt,dt){for(let vt=0,St=0;vt<lt.children.length;vt++){let Et=lt.children[vt],Ct=St+Et.length;if(Ct>=dt){if(Et instanceof LineView)return Et;if(Ct>dt)break}St=Ct+Et.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(lt,dt,vt){super(),this.widget=lt,this.length=dt,this.type=vt,this.breakAfter=0,this.prevWidget=null}merge(lt,dt,vt,St,Et,Ct){return vt&&(!(vt instanceof BlockWidgetView)||!this.widget.compare(vt.widget)||lt>0&&Et<=0||dt<this.length&&Ct<=0)?!1:(this.length=lt+(vt?vt.length:0)+(this.length-dt),!0)}domAtPos(lt){return lt==0?DOMPos.before(this.dom):DOMPos.after(this.dom,lt==this.length)}split(lt){let dt=this.length-lt;this.length=lt;let vt=new BlockWidgetView(this.widget,dt,this.type);return vt.breakAfter=this.breakAfter,vt}get children(){return noChildren}sync(lt){(!this.dom||!this.widget.updateDOM(this.dom,lt))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(lt)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(lt){return lt instanceof BlockWidgetView&&lt.type==this.type&&lt.widget.constructor==this.widget.constructor?(lt.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=lt.widget,this.length=lt.length,this.breakAfter=lt.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(lt){return this.widget.ignoreEvent(lt)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(lt,dt,vt,St){this.doc=lt,this.pos=dt,this.end=vt,this.disallowBlockEffectsFor=St,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=lt.iter(),this.skip=dt}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let lt=this.content[this.content.length-1];return!lt.breakAfter&&!(lt instanceof BlockWidgetView&&lt.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(lt=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),lt),lt.length),this.pendingBuffer=0)}addBlockWidget(lt){this.flushBuffer(),this.curLine=null,this.content.push(lt)}finish(lt){this.pendingBuffer&&lt<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(lt,dt,vt){for(;lt>0;){if(this.textOff==this.text.length){let{value:Et,lineBreak:Ct,done:At}=this.cursor.next(this.skip);if(this.skip=0,At)throw new Error("Ran out of text content when drawing inline views");if(Ct){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,lt--;continue}else this.text=Et,this.textOff=0}let St=Math.min(this.text.length-this.textOff,lt,512);this.flushBuffer(dt.slice(dt.length-vt)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+St)),dt),vt),this.atCursorPos=!0,this.textOff+=St,lt-=St,vt=0}}span(lt,dt,vt,St){this.buildText(dt-lt,vt,St),this.pos=dt,this.openStart<0&&(this.openStart=St)}point(lt,dt,vt,St,Et,Ct){if(this.disallowBlockEffectsFor[Ct]&&vt instanceof PointDecoration){if(vt.block)throw new RangeError("Block decorations may not be specified via plugins");if(dt>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let At=dt-lt;if(vt instanceof PointDecoration)if(vt.block){let{type:Rt}=vt;Rt==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(vt.widget||new NullWidget("div"),At,Rt))}else{let Rt=WidgetView.create(vt.widget||new NullWidget("span"),At,At?0:vt.startSide),Dt=this.atCursorPos&&!Rt.isEditable&&Et<=St.length&&(lt<dt||vt.startSide>0),Nt=!Rt.isEditable&&(lt<dt||Et>St.length||vt.startSide<=0),Ft=this.getLine();this.pendingBuffer==2&&!Dt&&(this.pendingBuffer=0),this.flushBuffer(St),Dt&&(Ft.append(wrapMarks(new WidgetBufferView(1),St),Et),Et=St.length+Math.max(0,Et-St.length)),Ft.append(wrapMarks(Rt,St),Et),this.atCursorPos=Nt,this.pendingBuffer=Nt?lt<dt||Et>St.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=St.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(vt);At&&(this.textOff+At<=this.text.length?this.textOff+=At:(this.skip+=At-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=dt),this.openStart<0&&(this.openStart=Et)}static build(lt,dt,vt,St,Et){let Ct=new ContentBuilder(lt,dt,vt,Et);return Ct.openEnd=RangeSet.spans(St,dt,vt,Ct),Ct.openStart<0&&(Ct.openStart=Ct.openEnd),Ct.finish(Ct.openEnd),Ct}}function wrapMarks(ft,lt){for(let dt of lt)ft=new MarkView(dt,[ft],ft.length);return ft}class NullWidget extends WidgetType{constructor(lt){super(),this.tag=lt}eq(lt){return lt.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(lt){return lt.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:ft=>ft.some(lt=>lt)}),nativeSelectionHidden=Facet.define({combine:ft=>ft.some(lt=>lt)});class ScrollTarget{constructor(lt,dt="nearest",vt="nearest",St=5,Et=5){this.range=lt,this.y=dt,this.x=vt,this.yMargin=St,this.xMargin=Et}map(lt){return lt.empty?this:new ScrollTarget(this.range.map(lt),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(ft,lt)=>ft.map(lt)});function logException(ft,lt,dt){let vt=ft.facet(exceptionSink);vt.length?vt[0](lt):window.onerror?window.onerror(String(lt),dt,void 0,void 0,lt):dt?console.error(dt+":",lt):console.error(lt)}const editable=Facet.define({combine:ft=>ft.length?ft[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(lt,dt,vt,St){this.id=lt,this.create=dt,this.domEventHandlers=vt,this.extension=St(this)}static define(lt,dt){const{eventHandlers:vt,provide:St,decorations:Et}=dt||{};return new ViewPlugin(nextPluginID++,lt,vt,Ct=>{let At=[viewPlugin.of(Ct)];return Et&&At.push(decorations.of(Rt=>{let Dt=Rt.plugin(Ct);return Dt?Et(Dt):Decoration.none})),St&&At.push(St(Ct)),At})}static fromClass(lt,dt){return ViewPlugin.define(vt=>new lt(vt),dt)}}class PluginInstance{constructor(lt){this.spec=lt,this.mustUpdate=null,this.value=null}update(lt){if(this.value){if(this.mustUpdate){let dt=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(dt)}catch(vt){if(logException(dt.state,vt,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(lt)}catch(dt){logException(lt.state,dt,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(lt){var dt;if(!((dt=this.value)===null||dt===void 0)&&dt.destroy)try{this.value.destroy()}catch(vt){logException(lt.state,vt,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(lt,dt,vt,St){this.fromA=lt,this.toA=dt,this.fromB=vt,this.toB=St}join(lt){return new ChangedRange(Math.min(this.fromA,lt.fromA),Math.max(this.toA,lt.toA),Math.min(this.fromB,lt.fromB),Math.max(this.toB,lt.toB))}addToSet(lt){let dt=lt.length,vt=this;for(;dt>0;dt--){let St=lt[dt-1];if(!(St.fromA>vt.toA)){if(St.toA<vt.fromA)break;vt=vt.join(St),lt.splice(dt-1,1)}}return lt.splice(dt,0,vt),lt}static extendWithRanges(lt,dt){if(dt.length==0)return lt;let vt=[];for(let St=0,Et=0,Ct=0,At=0;;St++){let Rt=St==lt.length?null:lt[St],Dt=Ct-At,Nt=Rt?Rt.fromB:1e9;for(;Et<dt.length&&dt[Et]<Nt;){let Ft=dt[Et],Ut=dt[Et+1],Wt=Math.max(At,Ft),Zt=Math.min(Nt,Ut);if(Wt<=Zt&&new ChangedRange(Wt+Dt,Zt+Dt,Wt,Zt).addToSet(vt),Ut>Nt)break;Et+=2}if(!Rt)return vt;new ChangedRange(Rt.fromA,Rt.toA,Rt.fromB,Rt.toB).addToSet(vt),Ct=Rt.toA,At=Rt.toB}}}class ViewUpdate{constructor(lt,dt,vt){this.view=lt,this.state=dt,this.transactions=vt,this.flags=0,this.startState=lt.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let Et of vt)this.changes=this.changes.compose(Et.changes);let St=[];this.changes.iterChangedRanges((Et,Ct,At,Rt)=>St.push(new ChangedRange(Et,Ct,At,Rt))),this.changedRanges=St}static create(lt,dt,vt){return new ViewUpdate(lt,dt,vt)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(lt=>lt.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(ft){return ft[ft.LTR=0]="LTR",ft[ft.RTL=1]="RTL",ft}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(ft){let lt=[];for(let dt=0;dt<ft.length;dt++)lt.push(1<<+ft[dt]);return lt}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let ft of["()","[]","{}"]){let lt=ft.charCodeAt(0),dt=ft.charCodeAt(1);Brackets[lt]=dt,Brackets[dt]=-lt}function charType(ft){return ft<=247?LowTypes[ft]:1424<=ft&&ft<=1524?2:1536<=ft&&ft<=1785?ArabicTypes[ft-1536]:1774<=ft&&ft<=2220?4:8192<=ft&&ft<=8203?256:64336<=ft&&ft<=65023?4:ft==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.level=vt}get dir(){return this.level%2?RTL:LTR}side(lt,dt){return this.dir==dt==lt?this.to:this.from}static find(lt,dt,vt,St){let Et=-1;for(let Ct=0;Ct<lt.length;Ct++){let At=lt[Ct];if(At.from<=dt&&At.to>=dt){if(At.level==vt)return Ct;(Et<0||(St!=0?St<0?At.from<dt:At.to>dt:lt[Et].level>At.level))&&(Et=Ct)}}if(Et<0)throw new RangeError("Index out of range");return Et}}const types=[];function computeOrder(ft,lt){let dt=ft.length,vt=lt==LTR?1:2,St=lt==LTR?2:1;if(!ft||vt==1&&!BidiRE.test(ft))return trivialOrder(dt);for(let Ct=0,At=vt,Rt=vt;Ct<dt;Ct++){let Dt=charType(ft.charCodeAt(Ct));Dt==512?Dt=At:Dt==8&&Rt==4&&(Dt=16),types[Ct]=Dt==4?2:Dt,Dt&7&&(Rt=Dt),At=Dt}for(let Ct=0,At=vt,Rt=vt;Ct<dt;Ct++){let Dt=types[Ct];if(Dt==128)Ct<dt-1&&At==types[Ct+1]&&At&24?Dt=types[Ct]=At:types[Ct]=256;else if(Dt==64){let Nt=Ct+1;for(;Nt<dt&&types[Nt]==64;)Nt++;let Ft=Ct&&At==8||Nt<dt&&types[Nt]==8?Rt==1?1:8:256;for(let Ut=Ct;Ut<Nt;Ut++)types[Ut]=Ft;Ct=Nt-1}else Dt==8&&Rt==1&&(types[Ct]=1);At=Dt,Dt&7&&(Rt=Dt)}for(let Ct=0,At=0,Rt=0,Dt,Nt,Ft;Ct<dt;Ct++)if(Nt=Brackets[Dt=ft.charCodeAt(Ct)])if(Nt<0){for(let Ut=At-3;Ut>=0;Ut-=3)if(BracketStack[Ut+1]==-Nt){let Wt=BracketStack[Ut+2],Zt=Wt&2?vt:Wt&4?Wt&1?St:vt:0;Zt&&(types[Ct]=types[BracketStack[Ut]]=Zt),At=Ut;break}}else{if(BracketStack.length==189)break;BracketStack[At++]=Ct,BracketStack[At++]=Dt,BracketStack[At++]=Rt}else if((Ft=types[Ct])==2||Ft==1){let Ut=Ft==vt;Rt=Ut?0:1;for(let Wt=At-3;Wt>=0;Wt-=3){let Zt=BracketStack[Wt+2];if(Zt&2)break;if(Ut)BracketStack[Wt+2]|=2;else{if(Zt&4)break;BracketStack[Wt+2]|=4}}}for(let Ct=0;Ct<dt;Ct++)if(types[Ct]==256){let At=Ct+1;for(;At<dt&&types[At]==256;)At++;let Rt=(Ct?types[Ct-1]:vt)==1,Dt=(At<dt?types[At]:vt)==1,Nt=Rt==Dt?Rt?1:2:vt;for(let Ft=Ct;Ft<At;Ft++)types[Ft]=Nt;Ct=At-1}let Et=[];if(vt==1)for(let Ct=0;Ct<dt;){let At=Ct,Rt=types[Ct++]!=1;for(;Ct<dt&&Rt==(types[Ct]!=1);)Ct++;if(Rt)for(let Dt=Ct;Dt>At;){let Nt=Dt,Ft=types[--Dt]!=2;for(;Dt>At&&Ft==(types[Dt-1]!=2);)Dt--;Et.push(new BidiSpan(Dt,Nt,Ft?2:1))}else Et.push(new BidiSpan(At,Ct,0))}else for(let Ct=0;Ct<dt;){let At=Ct,Rt=types[Ct++]==2;for(;Ct<dt&&Rt==(types[Ct]==2);)Ct++;Et.push(new BidiSpan(At,Ct,Rt?1:2))}return Et}function trivialOrder(ft){return[new BidiSpan(0,ft,0)]}let movedOver="";function moveVisually(ft,lt,dt,vt,St){var Et;let Ct=vt.head-ft.from,At=-1;if(Ct==0){if(!St||!ft.length)return null;lt[0].level!=dt&&(Ct=lt[0].side(!1,dt),At=0)}else if(Ct==ft.length){if(St)return null;let Ut=lt[lt.length-1];Ut.level!=dt&&(Ct=Ut.side(!0,dt),At=lt.length-1)}At<0&&(At=BidiSpan.find(lt,Ct,(Et=vt.bidiLevel)!==null&&Et!==void 0?Et:-1,vt.assoc));let Rt=lt[At];Ct==Rt.side(St,dt)&&(Rt=lt[At+=St?1:-1],Ct=Rt.side(!St,dt));let Dt=St==(Rt.dir==dt),Nt=findClusterBreak(ft.text,Ct,Dt);if(movedOver=ft.text.slice(Math.min(Ct,Nt),Math.max(Ct,Nt)),Nt!=Rt.side(St,dt))return EditorSelection.cursor(Nt+ft.from,Dt?-1:1,Rt.level);let Ft=At==(St?lt.length-1:0)?null:lt[At+(St?1:-1)];return!Ft&&Rt.level!=dt?EditorSelection.cursor(St?ft.to:ft.from,St?-1:1,dt):Ft&&Ft.level<Rt.level?EditorSelection.cursor(Ft.side(!St,dt)+ft.from,St?1:-1,Ft.level):EditorSelection.cursor(Nt+ft.from,St?-1:1,Rt.level)}const LineBreakPlaceholder="";class DOMReader{constructor(lt,dt){this.points=lt,this.text="",this.lineSeparator=dt.facet(EditorState.lineSeparator)}append(lt){this.text+=lt}lineBreak(){this.text+=LineBreakPlaceholder}readRange(lt,dt){if(!lt)return this;let vt=lt.parentNode;for(let St=lt;;){this.findPointBefore(vt,St),this.readNode(St);let Et=St.nextSibling;if(Et==dt)break;let Ct=ContentView.get(St),At=ContentView.get(Et);(Ct&&At?Ct.breakAfter:(Ct?Ct.breakAfter:isBlockElement(St))||isBlockElement(Et)&&(St.nodeName!="BR"||St.cmIgnore))&&this.lineBreak(),St=Et}return this.findPointBefore(vt,dt),this}readTextNode(lt){let dt=lt.nodeValue;for(let vt of this.points)vt.node==lt&&(vt.pos=this.text.length+Math.min(vt.offset,dt.length));for(let vt=0,St=this.lineSeparator?null:/\r\n?|\n/g;;){let Et=-1,Ct=1,At;if(this.lineSeparator?(Et=dt.indexOf(this.lineSeparator,vt),Ct=this.lineSeparator.length):(At=St.exec(dt))&&(Et=At.index,Ct=At[0].length),this.append(dt.slice(vt,Et<0?dt.length:Et)),Et<0)break;if(this.lineBreak(),Ct>1)for(let Rt of this.points)Rt.node==lt&&Rt.pos>this.text.length&&(Rt.pos-=Ct-1);vt=Et+Ct}}readNode(lt){if(lt.cmIgnore)return;let dt=ContentView.get(lt),vt=dt&&dt.overrideDOMText;if(vt!=null){this.findPointInside(lt,vt.length);for(let St=vt.iter();!St.next().done;)St.lineBreak?this.lineBreak():this.append(St.value)}else lt.nodeType==3?this.readTextNode(lt):lt.nodeName=="BR"?lt.nextSibling&&this.lineBreak():lt.nodeType==1&&this.readRange(lt.firstChild,null)}findPointBefore(lt,dt){for(let vt of this.points)vt.node==lt&&lt.childNodes[vt.offset]==dt&&(vt.pos=this.text.length)}findPointInside(lt,dt){for(let vt of this.points)(lt.nodeType==3?vt.node==lt:lt.contains(vt.node))&&(vt.pos=this.text.length+Math.min(dt,vt.offset))}}function isBlockElement(ft){return ft.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(ft.nodeName)}class DOMPoint{constructor(lt,dt){this.node=lt,this.offset=dt,this.pos=-1}}class DocView extends ContentView{constructor(lt){super(),this.view=lt,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(lt.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,lt.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(lt){let dt=lt.changedRanges;this.minWidth>0&&dt.length&&(dt.every(({fromA:Ct,toA:At})=>At<this.minWidthFrom||Ct>this.minWidthTo)?(this.minWidthFrom=lt.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=lt.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(lt.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,lt.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&lt&&lt.state.doc.lines!=lt.startState.doc.lines&&(this.forceSelection=!0);let vt=this.decorations,St=this.updateDeco(),Et=findChangedDeco(vt,St,lt.changes);return dt=ChangedRange.extendWithRanges(dt,Et),this.dirty==0&&dt.length==0?!1:(this.updateInner(dt,lt.startState.doc.length),lt.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(lt,dt){this.view.viewState.mustMeasureContent=!0,this.updateChildren(lt,dt);let{observer:vt}=this.view;vt.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let Et=browser.chrome||browser.ios?{node:vt.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,Et),this.dirty=0,Et&&(Et.written||vt.selectionRange.focusNode!=Et.node)&&(this.forceSelection=!0),this.dom.style.height=""});let St=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let Et of this.children)Et instanceof BlockWidgetView&&Et.widget instanceof BlockGapWidget&&St.push(Et.dom);vt.updateGaps(St)}updateChildren(lt,dt){let vt=this.childCursor(dt);for(let St=lt.length-1;;St--){let Et=St>=0?lt[St]:null;if(!Et)break;let{fromA:Ct,toA:At,fromB:Rt,toB:Dt}=Et,{content:Nt,breakAtStart:Ft,openStart:Ut,openEnd:Wt}=ContentBuilder.build(this.view.state.doc,Rt,Dt,this.decorations,this.dynamicDecorationMap),{i:Zt,off:Kt}=vt.findPos(At,1),{i:cn,off:hn}=vt.findPos(Ct,-1);replaceRange(this,cn,hn,Zt,Kt,Nt,Ft,Ut,Wt)}}updateSelection(lt=!1,dt=!1){if((lt||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(dt||this.mayControlSelection()))return;let vt=this.forceSelection;this.forceSelection=!1;let St=this.view.state.selection.main,Et=this.domAtPos(St.anchor),Ct=St.empty?Et:this.domAtPos(St.head);if(browser.gecko&&St.empty&&betweenUneditable(Et)){let Rt=document.createTextNode("");this.view.observer.ignore(()=>Et.node.insertBefore(Rt,Et.node.childNodes[Et.offset]||null)),Et=Ct=new DOMPos(Rt,0),vt=!0}let At=this.view.observer.selectionRange;(vt||!At.focusNode||!isEquivalentPosition(Et.node,Et.offset,At.anchorNode,At.anchorOffset)||!isEquivalentPosition(Ct.node,Ct.offset,At.focusNode,At.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(At.focusNode)&&inUneditable(At.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let Rt=getSelection(this.view.root);if(Rt)if(St.empty){if(browser.gecko){let Dt=nextToUneditable(Et.node,Et.offset);if(Dt&&Dt!=3){let Nt=nearbyTextNode(Et.node,Et.offset,Dt==1?1:-1);Nt&&(Et=new DOMPos(Nt,Dt==1?0:Nt.nodeValue.length))}}Rt.collapse(Et.node,Et.offset),St.bidiLevel!=null&&At.cursorBidiLevel!=null&&(At.cursorBidiLevel=St.bidiLevel)}else if(Rt.extend){Rt.collapse(Et.node,Et.offset);try{Rt.extend(Ct.node,Ct.offset)}catch{}}else{let Dt=document.createRange();St.anchor>St.head&&([Et,Ct]=[Ct,Et]),Dt.setEnd(Ct.node,Ct.offset),Dt.setStart(Et.node,Et.offset),Rt.removeAllRanges(),Rt.addRange(Dt)}}),this.view.observer.setSelectionRange(Et,Ct)),this.impreciseAnchor=Et.precise?null:new DOMPos(At.anchorNode,At.anchorOffset),this.impreciseHead=Ct.precise?null:new DOMPos(At.focusNode,At.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:lt}=this,dt=lt.state.selection.main,vt=getSelection(lt.root),{anchorNode:St,anchorOffset:Et}=lt.observer.selectionRange;if(!vt||!dt.empty||!dt.assoc||!vt.modify)return;let Ct=LineView.find(this,dt.head);if(!Ct)return;let At=Ct.posAtStart;if(dt.head==At||dt.head==At+Ct.length)return;let Rt=this.coordsAt(dt.head,-1),Dt=this.coordsAt(dt.head,1);if(!Rt||!Dt||Rt.bottom>Dt.top)return;let Nt=this.domAtPos(dt.head+dt.assoc);vt.collapse(Nt.node,Nt.offset),vt.modify("move",dt.assoc<0?"forward":"backward","lineboundary"),lt.observer.readSelectionRange();let Ft=lt.observer.selectionRange;lt.docView.posFromDOM(Ft.anchorNode,Ft.anchorOffset)!=dt.from&&vt.collapse(St,Et)}mayControlSelection(){let lt=this.view.root.activeElement;return lt==this.dom||hasSelection(this.dom,this.view.observer.selectionRange)&&!(lt&&this.dom.contains(lt))}nearest(lt){for(let dt=lt;dt;){let vt=ContentView.get(dt);if(vt&&vt.rootView==this)return vt;dt=dt.parentNode}return null}posFromDOM(lt,dt){let vt=this.nearest(lt);if(!vt)throw new RangeError("Trying to find position for a DOM position outside of the document");return vt.localPosFromDOM(lt,dt)+vt.posAtStart}domAtPos(lt){let{i:dt,off:vt}=this.childCursor().findPos(lt,-1);for(;dt<this.children.length-1;){let St=this.children[dt];if(vt<St.length||St instanceof LineView)break;dt++,vt=0}return this.children[dt].domAtPos(vt)}coordsAt(lt,dt){for(let vt=this.length,St=this.children.length-1;;St--){let Et=this.children[St],Ct=vt-Et.breakAfter-Et.length;if(lt>Ct||lt==Ct&&Et.type!=BlockType.WidgetBefore&&Et.type!=BlockType.WidgetAfter&&(!St||dt==2||this.children[St-1].breakAfter||this.children[St-1].type==BlockType.WidgetBefore&&dt>-2))return Et.coordsAt(lt-Ct,dt);vt=Ct}}measureVisibleLineHeights(lt){let dt=[],{from:vt,to:St}=lt,Et=this.view.contentDOM.clientWidth,Ct=Et>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,At=-1,Rt=this.view.textDirection==Direction.LTR;for(let Dt=0,Nt=0;Nt<this.children.length;Nt++){let Ft=this.children[Nt],Ut=Dt+Ft.length;if(Ut>St)break;if(Dt>=vt){let Wt=Ft.dom.getBoundingClientRect();if(dt.push(Wt.height),Ct){let Zt=Ft.dom.lastChild,Kt=Zt?clientRectsFor(Zt):[];if(Kt.length){let cn=Kt[Kt.length-1],hn=Rt?cn.right-Wt.left:Wt.right-cn.left;hn>At&&(At=hn,this.minWidth=Et,this.minWidthFrom=Dt,this.minWidthTo=Ut)}}}Dt=Ut+Ft.breakAfter}return dt}textDirectionAt(lt){let{i:dt}=this.childPos(lt,1);return getComputedStyle(this.children[dt].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let St of this.children)if(St instanceof LineView){let Et=St.measureTextSize();if(Et)return Et}let lt=document.createElement("div"),dt,vt;return lt.className="cm-line",lt.style.width="99999px",lt.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(lt);let St=clientRectsFor(lt.firstChild)[0];dt=lt.getBoundingClientRect().height,vt=St?St.width/27:7,lt.remove()}),{lineHeight:dt,charWidth:vt}}childCursor(lt=this.length){let dt=this.children.length;return dt&&(lt-=this.children[--dt].length),new ChildCursor(this.children,lt,dt)}computeBlockGapDeco(){let lt=[],dt=this.view.viewState;for(let vt=0,St=0;;St++){let Et=St==dt.viewports.length?null:dt.viewports[St],Ct=Et?Et.from-1:this.length;if(Ct>vt){let At=dt.lineBlockAt(Ct).bottom-dt.lineBlockAt(vt).top;lt.push(Decoration.replace({widget:new BlockGapWidget(At),block:!0,inclusive:!0,isBlockGap:!0}).range(vt,Ct))}if(!Et)break;vt=Et.to+1}return Decoration.set(lt)}updateDeco(){let lt=this.view.state.facet(decorations).map((dt,vt)=>(this.dynamicDecorationMap[vt]=typeof dt=="function")?dt(this.view):dt);for(let dt=lt.length;dt<lt.length+3;dt++)this.dynamicDecorationMap[dt]=!1;return this.decorations=[...lt,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(lt){let{range:dt}=lt,vt=this.coordsAt(dt.head,dt.empty?dt.assoc:dt.head>dt.anchor?-1:1),St;if(!vt)return;!dt.empty&&(St=this.coordsAt(dt.anchor,dt.anchor>dt.head?-1:1))&&(vt={left:Math.min(vt.left,St.left),top:Math.min(vt.top,St.top),right:Math.max(vt.right,St.right),bottom:Math.max(vt.bottom,St.bottom)});let Et=0,Ct=0,At=0,Rt=0;for(let Nt of this.view.state.facet(scrollMargins).map(Ft=>Ft(this.view)))if(Nt){let{left:Ft,right:Ut,top:Wt,bottom:Zt}=Nt;Ft!=null&&(Et=Math.max(Et,Ft)),Ut!=null&&(Ct=Math.max(Ct,Ut)),Wt!=null&&(At=Math.max(At,Wt)),Zt!=null&&(Rt=Math.max(Rt,Zt))}let Dt={left:vt.left-Et,top:vt.top-At,right:vt.right+Ct,bottom:vt.bottom+Rt};scrollRectIntoView(this.view.scrollDOM,Dt,dt.head<dt.anchor?-1:1,lt.x,lt.y,lt.xMargin,lt.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(ft){return ft.node.nodeType==1&&ft.node.firstChild&&(ft.offset==0||ft.node.childNodes[ft.offset-1].contentEditable=="false")&&(ft.offset==ft.node.childNodes.length||ft.node.childNodes[ft.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(lt){super(),this.height=lt}toDOM(){let lt=document.createElement("div");return this.updateDOM(lt),lt}eq(lt){return lt.height==this.height}updateDOM(lt){return lt.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(ft){let lt=ft.observer.selectionRange,dt=lt.focusNode&&nearbyTextNode(lt.focusNode,lt.focusOffset,0);if(!dt)return null;let vt=ft.docView.nearest(dt);if(!vt)return null;if(vt instanceof LineView){let St=dt;for(;St.parentNode!=vt.dom;)St=St.parentNode;let Et=St.previousSibling;for(;Et&&!ContentView.get(Et);)Et=Et.previousSibling;let Ct=Et?ContentView.get(Et).posAtEnd:vt.posAtStart;return{from:Ct,to:Ct,node:St,text:dt}}else{for(;;){let{parent:Et}=vt;if(!Et)return null;if(Et instanceof LineView)break;vt=Et}let St=vt.posAtStart;return{from:St,to:St+vt.length,node:vt.dom,text:dt}}}function computeCompositionDeco(ft,lt){let dt=compositionSurroundingNode(ft);if(!dt)return Decoration.none;let{from:vt,to:St,node:Et,text:Ct}=dt,At=lt.mapPos(vt,1),Rt=Math.max(At,lt.mapPos(St,-1)),{state:Dt}=ft,Nt=Et.nodeType==3?Et.nodeValue:new DOMReader([],Dt).readRange(Et.firstChild,null).text;if(Rt-At<Nt.length)if(Dt.doc.sliceString(At,Math.min(Dt.doc.length,At+Nt.length),LineBreakPlaceholder)==Nt)Rt=At+Nt.length;else if(Dt.doc.sliceString(Math.max(0,Rt-Nt.length),Rt,LineBreakPlaceholder)==Nt)At=Rt-Nt.length;else return Decoration.none;else if(Dt.doc.sliceString(At,Rt,LineBreakPlaceholder)!=Nt)return Decoration.none;let Ft=ContentView.get(Et);return Ft instanceof CompositionView?Ft=Ft.widget.topView:Ft&&(Ft.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(Et,Ct,Ft),inclusive:!0}).range(At,Rt))}class CompositionWidget extends WidgetType{constructor(lt,dt,vt){super(),this.top=lt,this.text=dt,this.topView=vt}eq(lt){return this.top==lt.top&&this.text==lt.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(ft,lt,dt){for(;;){if(ft.nodeType==3)return ft;if(ft.nodeType==1&&lt>0&&dt<=0)ft=ft.childNodes[lt-1],lt=maxOffset(ft);else if(ft.nodeType==1&&lt<ft.childNodes.length&&dt>=0)ft=ft.childNodes[lt],lt=0;else return null}}function nextToUneditable(ft,lt){return ft.nodeType!=1?0:(lt&&ft.childNodes[lt-1].contentEditable=="false"?1:0)|(lt<ft.childNodes.length&&ft.childNodes[lt].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(lt,dt){addRange(lt,dt,this.changes)}comparePoint(lt,dt){addRange(lt,dt,this.changes)}}function findChangedDeco(ft,lt,dt){let vt=new DecorationComparator$1;return RangeSet.compare(ft,lt,dt,vt),vt.changes}function inUneditable(ft,lt){for(let dt=ft;dt&&dt!=lt;dt=dt.assignedSlot||dt.parentNode)if(dt.nodeType==1&&dt.contentEditable=="false")return!0;return!1}function groupAt(ft,lt,dt=1){let vt=ft.charCategorizer(lt),St=ft.doc.lineAt(lt),Et=lt-St.from;if(St.length==0)return EditorSelection.cursor(lt);Et==0?dt=1:Et==St.length&&(dt=-1);let Ct=Et,At=Et;dt<0?Ct=findClusterBreak(St.text,Et,!1):At=findClusterBreak(St.text,Et);let Rt=vt(St.text.slice(Ct,At));for(;Ct>0;){let Dt=findClusterBreak(St.text,Ct,!1);if(vt(St.text.slice(Dt,Ct))!=Rt)break;Ct=Dt}for(;At<St.length;){let Dt=findClusterBreak(St.text,At);if(vt(St.text.slice(At,Dt))!=Rt)break;At=Dt}return EditorSelection.range(Ct+St.from,At+St.from)}function getdx(ft,lt){return lt.left>ft?lt.left-ft:Math.max(0,ft-lt.right)}function getdy(ft,lt){return lt.top>ft?lt.top-ft:Math.max(0,ft-lt.bottom)}function yOverlap(ft,lt){return ft.top<lt.bottom-1&&ft.bottom>lt.top+1}function upTop(ft,lt){return lt<ft.top?{top:lt,left:ft.left,right:ft.right,bottom:ft.bottom}:ft}function upBot(ft,lt){return lt>ft.bottom?{top:ft.top,left:ft.left,right:ft.right,bottom:lt}:ft}function domPosAtCoords(ft,lt,dt){let vt,St,Et,Ct,At=!1,Rt,Dt,Nt,Ft;for(let Zt=ft.firstChild;Zt;Zt=Zt.nextSibling){let Kt=clientRectsFor(Zt);for(let cn=0;cn<Kt.length;cn++){let hn=Kt[cn];St&&yOverlap(St,hn)&&(hn=upTop(upBot(hn,St.bottom),St.top));let dn=getdx(lt,hn),pn=getdy(dt,hn);if(dn==0&&pn==0)return Zt.nodeType==3?domPosInText(Zt,lt,dt):domPosAtCoords(Zt,lt,dt);if(!vt||Ct>pn||Ct==pn&&Et>dn){vt=Zt,St=hn,Et=dn,Ct=pn;let gn=pn?dt<hn.top?-1:1:dn?lt<hn.left?-1:1:0;At=!gn||(gn>0?cn<Kt.length-1:cn>0)}dn==0?dt>hn.bottom&&(!Nt||Nt.bottom<hn.bottom)?(Rt=Zt,Nt=hn):dt<hn.top&&(!Ft||Ft.top>hn.top)&&(Dt=Zt,Ft=hn):Nt&&yOverlap(Nt,hn)?Nt=upBot(Nt,hn.bottom):Ft&&yOverlap(Ft,hn)&&(Ft=upTop(Ft,hn.top))}}if(Nt&&Nt.bottom>=dt?(vt=Rt,St=Nt):Ft&&Ft.top<=dt&&(vt=Dt,St=Ft),!vt)return{node:ft,offset:0};let Ut=Math.max(St.left,Math.min(St.right,lt));if(vt.nodeType==3)return domPosInText(vt,Ut,dt);if(At&&vt.contentEditable!="false")return domPosAtCoords(vt,Ut,dt);let Wt=Array.prototype.indexOf.call(ft.childNodes,vt)+(lt>=(St.left+St.right)/2?1:0);return{node:ft,offset:Wt}}function domPosInText(ft,lt,dt){let vt=ft.nodeValue.length,St=-1,Et=1e9,Ct=0;for(let At=0;At<vt;At++){let Rt=textRange(ft,At,At+1).getClientRects();for(let Dt=0;Dt<Rt.length;Dt++){let Nt=Rt[Dt];if(Nt.top==Nt.bottom)continue;Ct||(Ct=lt-Nt.left);let Ft=(Nt.top>dt?Nt.top-dt:dt-Nt.bottom)-1;if(Nt.left-1<=lt&&Nt.right+1>=lt&&Ft<Et){let Ut=lt>=(Nt.left+Nt.right)/2,Wt=Ut;if((browser.chrome||browser.gecko)&&textRange(ft,At).getBoundingClientRect().left==Nt.right&&(Wt=!Ut),Ft<=0)return{node:ft,offset:At+(Wt?1:0)};St=At+(Wt?1:0),Et=Ft}}}return{node:ft,offset:St>-1?St:Ct>0?ft.nodeValue.length:0}}function posAtCoords(ft,lt,dt,vt=-1){var St;let Et=ft.contentDOM.getBoundingClientRect(),Ct=Et.top+ft.viewState.paddingTop,At,{docHeight:Rt}=ft.viewState,{x:Dt,y:Nt}=lt,Ft=Nt-Ct;if(Ft<0)return 0;if(Ft>Rt)return ft.state.doc.length;for(let pn=ft.defaultLineHeight/2,gn=!1;At=ft.elementAtHeight(Ft),At.type!=BlockType.Text;)for(;Ft=vt>0?At.bottom+pn:At.top-pn,!(Ft>=0&&Ft<=Rt);){if(gn)return dt?null:0;gn=!0,vt=-vt}Nt=Ct+Ft;let Ut=At.from;if(Ut<ft.viewport.from)return ft.viewport.from==0?0:dt?null:posAtCoordsImprecise(ft,Et,At,Dt,Nt);if(Ut>ft.viewport.to)return ft.viewport.to==ft.state.doc.length?ft.state.doc.length:dt?null:posAtCoordsImprecise(ft,Et,At,Dt,Nt);let Wt=ft.dom.ownerDocument,Zt=ft.root.elementFromPoint?ft.root:Wt,Kt=Zt.elementFromPoint(Dt,Nt);Kt&&!ft.contentDOM.contains(Kt)&&(Kt=null),Kt||(Dt=Math.max(Et.left+1,Math.min(Et.right-1,Dt)),Kt=Zt.elementFromPoint(Dt,Nt),Kt&&!ft.contentDOM.contains(Kt)&&(Kt=null));let cn,hn=-1;if(Kt&&((St=ft.docView.nearest(Kt))===null||St===void 0?void 0:St.isEditable)!=!1){if(Wt.caretPositionFromPoint){let pn=Wt.caretPositionFromPoint(Dt,Nt);pn&&({offsetNode:cn,offset:hn}=pn)}else if(Wt.caretRangeFromPoint){let pn=Wt.caretRangeFromPoint(Dt,Nt);pn&&({startContainer:cn,startOffset:hn}=pn,(!ft.contentDOM.contains(cn)||browser.safari&&isSuspiciousSafariCaretResult(cn,hn,Dt)||browser.chrome&&isSuspiciousChromeCaretResult(cn,hn,Dt))&&(cn=void 0))}}if(!cn||!ft.docView.dom.contains(cn)){let pn=LineView.find(ft.docView,Ut);if(!pn)return Ft>At.top+At.height/2?At.to:At.from;({node:cn,offset:hn}=domPosAtCoords(pn.dom,Dt,Nt))}let dn=ft.docView.nearest(cn);if(!dn)return null;if(dn.isWidget){let pn=dn.dom.getBoundingClientRect();return lt.y<pn.top||lt.y<=pn.bottom&&lt.x<=(pn.left+pn.right)/2?dn.posAtStart:dn.posAtEnd}else return dn.localPosFromDOM(cn,hn)+dn.posAtStart}function posAtCoordsImprecise(ft,lt,dt,vt,St){let Et=Math.round((vt-lt.left)*ft.defaultCharacterWidth);if(ft.lineWrapping&&dt.height>ft.defaultLineHeight*1.5){let At=Math.floor((St-dt.top)/ft.defaultLineHeight);Et+=At*ft.viewState.heightOracle.lineLength}let Ct=ft.state.sliceDoc(dt.from,dt.to);return dt.from+findColumn(Ct,Et,ft.state.tabSize)}function isSuspiciousSafariCaretResult(ft,lt,dt){let vt;if(ft.nodeType!=3||lt!=(vt=ft.nodeValue.length))return!1;for(let St=ft.nextSibling;St;St=St.nextSibling)if(St.nodeType!=1||St.nodeName!="BR")return!1;return textRange(ft,vt-1,vt).getBoundingClientRect().left>dt}function isSuspiciousChromeCaretResult(ft,lt,dt){if(lt!=0)return!1;for(let St=ft;;){let Et=St.parentNode;if(!Et||Et.nodeType!=1||Et.firstChild!=St)return!1;if(Et.classList.contains("cm-line"))break;St=Et}let vt=ft.nodeType==1?ft.getBoundingClientRect():textRange(ft,0,Math.max(ft.nodeValue.length,1)).getBoundingClientRect();return dt-vt.left>5}function moveToLineBoundary(ft,lt,dt,vt){let St=ft.state.doc.lineAt(lt.head),Et=!vt||!ft.lineWrapping?null:ft.coordsAtPos(lt.assoc<0&&lt.head>St.from?lt.head-1:lt.head);if(Et){let Rt=ft.dom.getBoundingClientRect(),Dt=ft.textDirectionAt(St.from),Nt=ft.posAtCoords({x:dt==(Dt==Direction.LTR)?Rt.right-1:Rt.left+1,y:(Et.top+Et.bottom)/2});if(Nt!=null)return EditorSelection.cursor(Nt,dt?-1:1)}let Ct=LineView.find(ft.docView,lt.head),At=Ct?dt?Ct.posAtEnd:Ct.posAtStart:dt?St.to:St.from;return EditorSelection.cursor(At,dt?-1:1)}function moveByChar(ft,lt,dt,vt){let St=ft.state.doc.lineAt(lt.head),Et=ft.bidiSpans(St),Ct=ft.textDirectionAt(St.from);for(let At=lt,Rt=null;;){let Dt=moveVisually(St,Et,Ct,At,dt),Nt=movedOver;if(!Dt){if(St.number==(dt?ft.state.doc.lines:1))return At;Nt=`
`,St=ft.state.doc.line(St.number+(dt?1:-1)),Et=ft.bidiSpans(St),Dt=EditorSelection.cursor(dt?St.from:St.to)}if(Rt){if(!Rt(Nt))return At}else{if(!vt)return Dt;Rt=vt(Nt)}At=Dt}}function byGroup(ft,lt,dt){let vt=ft.state.charCategorizer(lt),St=vt(dt);return Et=>{let Ct=vt(Et);return St==CharCategory.Space&&(St=Ct),St==Ct}}function moveVertically(ft,lt,dt,vt){let St=lt.head,Et=dt?1:-1;if(St==(dt?ft.state.doc.length:0))return EditorSelection.cursor(St,lt.assoc);let Ct=lt.goalColumn,At,Rt=ft.contentDOM.getBoundingClientRect(),Dt=ft.coordsAtPos(St),Nt=ft.documentTop;if(Dt)Ct==null&&(Ct=Dt.left-Rt.left),At=Et<0?Dt.top:Dt.bottom;else{let Wt=ft.viewState.lineBlockAt(St);Ct==null&&(Ct=Math.min(Rt.right-Rt.left,ft.defaultCharacterWidth*(St-Wt.from))),At=(Et<0?Wt.top:Wt.bottom)+Nt}let Ft=Rt.left+Ct,Ut=vt??ft.defaultLineHeight>>1;for(let Wt=0;;Wt+=10){let Zt=At+(Ut+Wt)*Et,Kt=posAtCoords(ft,{x:Ft,y:Zt},!1,Et);if(Zt<Rt.top||Zt>Rt.bottom||(Et<0?Kt<St:Kt>St))return EditorSelection.cursor(Kt,lt.assoc,void 0,Ct)}}function skipAtoms(ft,lt,dt){let vt=ft.state.facet(atomicRanges).map(St=>St(ft));for(;;){let St=!1;for(let Et of vt)Et.between(dt.from-1,dt.from+1,(Ct,At,Rt)=>{dt.from>Ct&&dt.from<At&&(dt=lt.head>dt.from?EditorSelection.cursor(Ct,1):EditorSelection.cursor(At,-1),St=!0)});if(!St)return dt}}class InputState{constructor(lt){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let dt=(vt,St)=>{this.ignoreDuringComposition(St)||St.type=="keydown"&&this.keydown(lt,St)||(this.mustFlushObserver(St)&&lt.observer.forceFlush(),this.runCustomHandlers(St.type,lt,St)?St.preventDefault():vt(lt,St))};for(let vt in handlers){let St=handlers[vt];lt.contentDOM.addEventListener(vt,Et=>{eventBelongsToEditor(lt,Et)&&dt(St,Et)},handlerOptions[vt]),this.registeredEvents.push(vt)}lt.scrollDOM.addEventListener("mousedown",vt=>{vt.target==lt.scrollDOM&&vt.clientY>lt.contentDOM.getBoundingClientRect().bottom&&dt(handlers.mousedown,vt)}),browser.chrome&&browser.chrome_version==102&&lt.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?lt.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,lt.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=lt.hasFocus,browser.safari&&lt.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(lt){this.lastSelectionOrigin=lt,this.lastSelectionTime=Date.now()}ensureHandlers(lt,dt){var vt;let St;this.customHandlers=[];for(let Et of dt)if(St=(vt=Et.update(lt).spec)===null||vt===void 0?void 0:vt.domEventHandlers){this.customHandlers.push({plugin:Et.value,handlers:St});for(let Ct in St)this.registeredEvents.indexOf(Ct)<0&&Ct!="scroll"&&(this.registeredEvents.push(Ct),lt.contentDOM.addEventListener(Ct,At=>{eventBelongsToEditor(lt,At)&&this.runCustomHandlers(Ct,lt,At)&&At.preventDefault()}))}}runCustomHandlers(lt,dt,vt){for(let St of this.customHandlers){let Et=St.handlers[lt];if(Et)try{if(Et.call(St.plugin,vt,dt)||vt.defaultPrevented)return!0}catch(Ct){logException(dt.state,Ct)}}return!1}runScrollHandlers(lt,dt){this.lastScrollTop=lt.scrollDOM.scrollTop,this.lastScrollLeft=lt.scrollDOM.scrollLeft;for(let vt of this.customHandlers){let St=vt.handlers.scroll;if(St)try{St.call(vt.plugin,dt,lt)}catch(Et){logException(lt.state,Et)}}}keydown(lt,dt){if(this.lastKeyCode=dt.keyCode,this.lastKeyTime=Date.now(),dt.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!dt.synthetic&&(dt.keyCode==13||dt.keyCode==8))return lt.observer.delayAndroidKey(dt.key,dt.keyCode),!0;let vt;return browser.ios&&!dt.synthetic&&!dt.altKey&&!dt.metaKey&&((vt=PendingKeys.find(St=>St.keyCode==dt.keyCode))&&!dt.ctrlKey||EmacsyPendingKeys.indexOf(dt.key)>-1&&dt.ctrlKey&&!dt.shiftKey)?(this.pendingIOSKey=vt||dt,setTimeout(()=>this.flushIOSKey(lt),250),!0):!1}flushIOSKey(lt){let dt=this.pendingIOSKey;return dt?(this.pendingIOSKey=void 0,dispatchKey(lt.contentDOM,dt.key,dt.keyCode)):!1}ignoreDuringComposition(lt){return/^key/.test(lt.type)?this.composing>0?!0:browser.safari&&!browser.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(lt){return lt.type=="keydown"&&lt.keyCode!=229}startMouseSelection(lt){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=lt}update(lt){this.mouseSelection&&this.mouseSelection.update(lt),lt.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(ft){return ft*.7+8}class MouseSelection{constructor(lt,dt,vt,St){this.view=lt,this.style=vt,this.mustSelect=St,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=dt,this.scrollParent=scrollableParent(lt.contentDOM);let Et=lt.contentDOM.ownerDocument;Et.addEventListener("mousemove",this.move=this.move.bind(this)),Et.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=dt.shiftKey,this.multiple=lt.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(lt,dt),this.dragMove=dragMovesSelection(lt,dt),this.dragging=isInPrimarySelection(lt,dt)&&getClickType(dt)==1?null:!1}start(lt){this.dragging===!1&&(lt.preventDefault(),this.select(lt))}move(lt){var dt;if(lt.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=lt);let vt=0,St=0,Et=((dt=this.scrollParent)===null||dt===void 0?void 0:dt.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};lt.clientX<=Et.left?vt=-dragScrollSpeed(Et.left-lt.clientX):lt.clientX>=Et.right&&(vt=dragScrollSpeed(lt.clientX-Et.right)),lt.clientY<=Et.top?St=-dragScrollSpeed(Et.top-lt.clientY):lt.clientY>=Et.bottom&&(St=dragScrollSpeed(lt.clientY-Et.bottom)),this.setScrollSpeed(vt,St)}up(lt){this.dragging==null&&this.select(this.lastEvent),this.dragging||lt.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let lt=this.view.contentDOM.ownerDocument;lt.removeEventListener("mousemove",this.move),lt.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(lt,dt){this.scrollSpeed={x:lt,y:dt},lt||dt?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(lt){let dt=this.style.get(lt,this.extend,this.multiple);(this.mustSelect||!dt.eq(this.view.state.selection)||dt.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:dt,userEvent:"select.pointer"}),this.mustSelect=!1}update(lt){lt.docChanged&&this.dragging&&(this.dragging=this.dragging.map(lt.changes)),this.style.update(lt)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(ft,lt){let dt=ft.state.facet(clickAddsSelectionRange);return dt.length?dt[0](lt):browser.mac?lt.metaKey:lt.ctrlKey}function dragMovesSelection(ft,lt){let dt=ft.state.facet(dragMovesSelection$1);return dt.length?dt[0](lt):browser.mac?!lt.altKey:!lt.ctrlKey}function isInPrimarySelection(ft,lt){let{main:dt}=ft.state.selection;if(dt.empty)return!1;let vt=getSelection(ft.root);if(!vt||vt.rangeCount==0)return!0;let St=vt.getRangeAt(0).getClientRects();for(let Et=0;Et<St.length;Et++){let Ct=St[Et];if(Ct.left<=lt.clientX&&Ct.right>=lt.clientX&&Ct.top<=lt.clientY&&Ct.bottom>=lt.clientY)return!0}return!1}function eventBelongsToEditor(ft,lt){if(!lt.bubbles)return!0;if(lt.defaultPrevented)return!1;for(let dt=lt.target,vt;dt!=ft.contentDOM;dt=dt.parentNode)if(!dt||dt.nodeType==11||(vt=ContentView.get(dt))&&vt.ignoreEvent(lt))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(ft){let lt=ft.dom.parentNode;if(!lt)return;let dt=lt.appendChild(document.createElement("textarea"));dt.style.cssText="position: fixed; left: -10000px; top: 10px",dt.focus(),setTimeout(()=>{ft.focus(),dt.remove(),doPaste(ft,dt.value)},50)}function doPaste(ft,lt){let{state:dt}=ft,vt,St=1,Et=dt.toText(lt),Ct=Et.lines==dt.selection.ranges.length;if(lastLinewiseCopy!=null&&dt.selection.ranges.every(Rt=>Rt.empty)&&lastLinewiseCopy==Et.toString()){let Rt=-1;vt=dt.changeByRange(Dt=>{let Nt=dt.doc.lineAt(Dt.from);if(Nt.from==Rt)return{range:Dt};Rt=Nt.from;let Ft=dt.toText((Ct?Et.line(St++).text:lt)+dt.lineBreak);return{changes:{from:Nt.from,insert:Ft},range:EditorSelection.cursor(Dt.from+Ft.length)}})}else Ct?vt=dt.changeByRange(Rt=>{let Dt=Et.line(St++);return{changes:{from:Rt.from,to:Rt.to,insert:Dt.text},range:EditorSelection.cursor(Rt.from+Dt.length)}}):vt=dt.replaceSelection(Et);ft.dispatch(vt,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(ft,lt)=>{ft.inputState.setSelectionOrigin("select"),lt.keyCode==27?ft.inputState.lastEscPress=Date.now():modifierCodes.indexOf(lt.keyCode)<0&&(ft.inputState.lastEscPress=0)};handlers.touchstart=(ft,lt)=>{ft.inputState.lastTouchTime=Date.now(),ft.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=ft=>{ft.inputState.setSelectionOrigin("select.pointer")};handlerOptions.touchstart=handlerOptions.touchmove={passive:!0};handlers.mousedown=(ft,lt)=>{if(ft.observer.flush(),ft.inputState.lastTouchTime>Date.now()-2e3)return;let dt=null;for(let vt of ft.state.facet(mouseSelectionStyle))if(dt=vt(ft,lt),dt)break;if(!dt&&lt.button==0&&(dt=basicMouseSelection(ft,lt)),dt){let vt=ft.root.activeElement!=ft.contentDOM;ft.inputState.startMouseSelection(new MouseSelection(ft,lt,dt,vt)),vt&&ft.observer.ignore(()=>focusPreventScroll(ft.contentDOM)),ft.inputState.mouseSelection&&ft.inputState.mouseSelection.start(lt)}};function rangeForClick(ft,lt,dt,vt){if(vt==1)return EditorSelection.cursor(lt,dt);if(vt==2)return groupAt(ft.state,lt,dt);{let St=LineView.find(ft.docView,lt),Et=ft.state.doc.lineAt(St?St.posAtEnd:lt),Ct=St?St.posAtStart:Et.from,At=St?St.posAtEnd:Et.to;return At<ft.state.doc.length&&At==Et.to&&At++,EditorSelection.range(Ct,At)}}let insideY=(ft,lt)=>ft>=lt.top&&ft<=lt.bottom,inside=(ft,lt,dt)=>insideY(lt,dt)&&ft>=dt.left&&ft<=dt.right;function findPositionSide(ft,lt,dt,vt){let St=LineView.find(ft.docView,lt);if(!St)return 1;let Et=lt-St.posAtStart;if(Et==0)return 1;if(Et==St.length)return-1;let Ct=St.coordsAt(Et,-1);if(Ct&&inside(dt,vt,Ct))return-1;let At=St.coordsAt(Et,1);return At&&inside(dt,vt,At)?1:Ct&&insideY(vt,Ct)?-1:1}function queryPos(ft,lt){let dt=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1);return{pos:dt,bias:findPositionSide(ft,dt,lt.clientX,lt.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(ft){if(!BadMouseDetail)return ft.detail;let lt=lastMouseDown,dt=lastMouseDownTime;return lastMouseDown=ft,lastMouseDownTime=Date.now(),lastMouseDownCount=!lt||dt>Date.now()-400&&Math.abs(lt.clientX-ft.clientX)<2&&Math.abs(lt.clientY-ft.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(ft,lt){let dt=queryPos(ft,lt),vt=getClickType(lt),St=ft.state.selection;return{update(Et){Et.docChanged&&(dt.pos=Et.changes.mapPos(dt.pos),St=St.map(Et.changes))},get(Et,Ct,At){let Rt=queryPos(ft,Et),Dt=rangeForClick(ft,Rt.pos,Rt.bias,vt);if(dt.pos!=Rt.pos&&!Ct){let Nt=rangeForClick(ft,dt.pos,dt.bias,vt),Ft=Math.min(Nt.from,Dt.from),Ut=Math.max(Nt.to,Dt.to);Dt=Ft<Dt.from?EditorSelection.range(Ft,Ut):EditorSelection.range(Ut,Ft)}return Ct?St.replaceRange(St.main.extend(Dt.from,Dt.to)):At&&St.ranges.length>1&&St.ranges.some(Nt=>Nt.eq(Dt))?removeRange(St,Dt):At?St.addRange(Dt):EditorSelection.create([Dt])}}}function removeRange(ft,lt){for(let dt=0;;dt++)if(ft.ranges[dt].eq(lt))return EditorSelection.create(ft.ranges.slice(0,dt).concat(ft.ranges.slice(dt+1)),ft.mainIndex==dt?0:ft.mainIndex-(ft.mainIndex>dt?1:0))}handlers.dragstart=(ft,lt)=>{let{selection:{main:dt}}=ft.state,{mouseSelection:vt}=ft.inputState;vt&&(vt.dragging=dt),lt.dataTransfer&&(lt.dataTransfer.setData("Text",ft.state.sliceDoc(dt.from,dt.to)),lt.dataTransfer.effectAllowed="copyMove")};function dropText(ft,lt,dt,vt){if(!dt)return;let St=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1);lt.preventDefault();let{mouseSelection:Et}=ft.inputState,Ct=vt&&Et&&Et.dragging&&Et.dragMove?{from:Et.dragging.from,to:Et.dragging.to}:null,At={from:St,insert:dt},Rt=ft.state.changes(Ct?[Ct,At]:At);ft.focus(),ft.dispatch({changes:Rt,selection:{anchor:Rt.mapPos(St,-1),head:Rt.mapPos(St,1)},userEvent:Ct?"move.drop":"input.drop"})}handlers.drop=(ft,lt)=>{if(!lt.dataTransfer)return;if(ft.state.readOnly)return lt.preventDefault();let dt=lt.dataTransfer.files;if(dt&&dt.length){lt.preventDefault();let vt=Array(dt.length),St=0,Et=()=>{++St==dt.length&&dropText(ft,lt,vt.filter(Ct=>Ct!=null).join(ft.state.lineBreak),!1)};for(let Ct=0;Ct<dt.length;Ct++){let At=new FileReader;At.onerror=Et,At.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(At.result)||(vt[Ct]=At.result),Et()},At.readAsText(dt[Ct])}}else dropText(ft,lt,lt.dataTransfer.getData("Text"),!0)};handlers.paste=(ft,lt)=>{if(ft.state.readOnly)return lt.preventDefault();ft.observer.flush();let dt=brokenClipboardAPI?null:lt.clipboardData;dt?(doPaste(ft,dt.getData("text/plain")),lt.preventDefault()):capturePaste(ft)};function captureCopy(ft,lt){let dt=ft.dom.parentNode;if(!dt)return;let vt=dt.appendChild(document.createElement("textarea"));vt.style.cssText="position: fixed; left: -10000px; top: 10px",vt.value=lt,vt.focus(),vt.selectionEnd=lt.length,vt.selectionStart=0,setTimeout(()=>{vt.remove(),ft.focus()},50)}function copiedRange(ft){let lt=[],dt=[],vt=!1;for(let St of ft.selection.ranges)St.empty||(lt.push(ft.sliceDoc(St.from,St.to)),dt.push(St));if(!lt.length){let St=-1;for(let{from:Et}of ft.selection.ranges){let Ct=ft.doc.lineAt(Et);Ct.number>St&&(lt.push(Ct.text),dt.push({from:Ct.from,to:Math.min(ft.doc.length,Ct.to+1)})),St=Ct.number}vt=!0}return{text:lt.join(ft.lineBreak),ranges:dt,linewise:vt}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(ft,lt)=>{let{text:dt,ranges:vt,linewise:St}=copiedRange(ft.state);if(!dt&&!St)return;lastLinewiseCopy=St?dt:null;let Et=brokenClipboardAPI?null:lt.clipboardData;Et?(lt.preventDefault(),Et.clearData(),Et.setData("text/plain",dt)):captureCopy(ft,dt),lt.type=="cut"&&!ft.state.readOnly&&ft.dispatch({changes:vt,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(ft,lt){let dt=[];for(let vt of ft.facet(focusChangeEffect)){let St=vt(ft,lt);St&&dt.push(St)}return dt?ft.update({effects:dt,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(ft){setTimeout(()=>{let lt=ft.hasFocus;if(lt!=ft.inputState.notifiedFocused){let dt=focusChangeTransaction(ft.state,lt);dt?ft.dispatch(dt):ft.update([])}},10)}handlers.focus=ft=>{ft.inputState.lastFocusTime=Date.now(),!ft.scrollDOM.scrollTop&&(ft.inputState.lastScrollTop||ft.inputState.lastScrollLeft)&&(ft.scrollDOM.scrollTop=ft.inputState.lastScrollTop,ft.scrollDOM.scrollLeft=ft.inputState.lastScrollLeft),updateForFocusChange(ft)};handlers.blur=ft=>{ft.observer.clearSelectionRange(),updateForFocusChange(ft)};handlers.compositionstart=handlers.compositionupdate=ft=>{ft.inputState.compositionFirstChange==null&&(ft.inputState.compositionFirstChange=!0),ft.inputState.composing<0&&(ft.inputState.composing=0)};handlers.compositionend=ft=>{ft.inputState.composing=-1,ft.inputState.compositionEndedAt=Date.now(),ft.inputState.compositionFirstChange=null,browser.chrome&&browser.android&&ft.observer.flushSoon(),setTimeout(()=>{ft.inputState.composing<0&&ft.docView.compositionDeco.size&&ft.update([])},50)};handlers.contextmenu=ft=>{ft.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(ft,lt)=>{var dt;let vt;if(browser.chrome&&browser.android&&(vt=PendingKeys.find(St=>St.inputType==lt.inputType))&&(ft.observer.delayAndroidKey(vt.key,vt.keyCode),vt.key=="Backspace"||vt.key=="Delete")){let St=((dt=window.visualViewport)===null||dt===void 0?void 0:dt.height)||0;setTimeout(()=>{var Et;(((Et=window.visualViewport)===null||Et===void 0?void 0:Et.height)||0)>St+10&&ft.hasFocus&&(ft.contentDOM.blur(),ft.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(lt){this.lineWrapping=lt,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(lt,dt){let vt=this.doc.lineAt(dt).number-this.doc.lineAt(lt).number+1;return this.lineWrapping&&(vt+=Math.max(0,Math.ceil((dt-lt-vt*this.lineLength*.5)/this.lineLength))),this.lineHeight*vt}heightForLine(lt){return this.lineWrapping?(1+Math.max(0,Math.ceil((lt-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(lt){return this.doc=lt,this}mustRefreshForWrapping(lt){return wrappingWhiteSpace.indexOf(lt)>-1!=this.lineWrapping}mustRefreshForHeights(lt){let dt=!1;for(let vt=0;vt<lt.length;vt++){let St=lt[vt];St<0?vt++:this.heightSamples[Math.floor(St*10)]||(dt=!0,this.heightSamples[Math.floor(St*10)]=!0)}return dt}refresh(lt,dt,vt,St,Et){let Ct=wrappingWhiteSpace.indexOf(lt)>-1,At=Math.round(dt)!=Math.round(this.lineHeight)||this.lineWrapping!=Ct;if(this.lineWrapping=Ct,this.lineHeight=dt,this.charWidth=vt,this.lineLength=St,At){this.heightSamples={};for(let Rt=0;Rt<Et.length;Rt++){let Dt=Et[Rt];Dt<0?Rt++:this.heightSamples[Math.floor(Dt*10)]=!0}}return At}}class MeasuredHeights{constructor(lt,dt){this.from=lt,this.heights=dt,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(lt,dt,vt,St,Et){this.from=lt,this.length=dt,this.top=vt,this.height=St,this.type=Et}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(lt){let dt=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(lt.type)?lt.type:[lt]);return new BlockInfo(this.from,this.length+lt.length,this.top,this.height+lt.height,dt)}}var QueryType$1=function(ft){return ft[ft.ByPos=0]="ByPos",ft[ft.ByHeight=1]="ByHeight",ft[ft.ByPosNoHeight=2]="ByPosNoHeight",ft}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(lt,dt,vt=2){this.length=lt,this.height=dt,this.flags=vt}get outdated(){return(this.flags&2)>0}set outdated(lt){this.flags=(lt?2:0)|this.flags&-3}setHeight(lt,dt){this.height!=dt&&(Math.abs(this.height-dt)>Epsilon&&(lt.heightChanged=!0),this.height=dt)}replace(lt,dt,vt){return HeightMap.of(vt)}decomposeLeft(lt,dt){dt.push(this)}decomposeRight(lt,dt){dt.push(this)}applyChanges(lt,dt,vt,St){let Et=this,Ct=vt.doc;for(let At=St.length-1;At>=0;At--){let{fromA:Rt,toA:Dt,fromB:Nt,toB:Ft}=St[At],Ut=Et.lineAt(Rt,QueryType$1.ByPosNoHeight,vt.setDoc(dt),0,0),Wt=Ut.to>=Dt?Ut:Et.lineAt(Dt,QueryType$1.ByPosNoHeight,vt,0,0);for(Ft+=Wt.to-Dt,Dt=Wt.to;At>0&&Ut.from<=St[At-1].toA;)Rt=St[At-1].fromA,Nt=St[At-1].fromB,At--,Rt<Ut.from&&(Ut=Et.lineAt(Rt,QueryType$1.ByPosNoHeight,vt,0,0));Nt+=Ut.from-Rt,Rt=Ut.from;let Zt=NodeBuilder.build(vt.setDoc(Ct),lt,Nt,Ft);Et=Et.replace(Rt,Dt,Zt)}return Et.updateHeight(vt,0)}static empty(){return new HeightMapText(0,0)}static of(lt){if(lt.length==1)return lt[0];let dt=0,vt=lt.length,St=0,Et=0;for(;;)if(dt==vt)if(St>Et*2){let At=lt[dt-1];At.break?lt.splice(--dt,1,At.left,null,At.right):lt.splice(--dt,1,At.left,At.right),vt+=1+At.break,St-=At.size}else if(Et>St*2){let At=lt[vt];At.break?lt.splice(vt,1,At.left,null,At.right):lt.splice(vt,1,At.left,At.right),vt+=2+At.break,Et-=At.size}else break;else if(St<Et){let At=lt[dt++];At&&(St+=At.size)}else{let At=lt[--vt];At&&(Et+=At.size)}let Ct=0;return lt[dt-1]==null?(Ct=1,dt--):lt[dt]==null&&(Ct=1,vt++),new HeightMapBranch(HeightMap.of(lt.slice(0,dt)),Ct,HeightMap.of(lt.slice(vt)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(lt,dt,vt){super(lt,dt),this.type=vt}blockAt(lt,dt,vt,St){return new BlockInfo(St,this.length,vt,this.height,this.type)}lineAt(lt,dt,vt,St,Et){return this.blockAt(0,vt,St,Et)}forEachLine(lt,dt,vt,St,Et,Ct){lt<=Et+this.length&&dt>=Et&&Ct(this.blockAt(0,vt,St,Et))}updateHeight(lt,dt=0,vt=!1,St){return St&&St.from<=dt&&St.more&&this.setHeight(lt,St.heights[St.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(lt,dt){super(lt,dt,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(lt,dt,vt){let St=vt[0];return vt.length==1&&(St instanceof HeightMapText||St instanceof HeightMapGap&&St.flags&4)&&Math.abs(this.length-St.length)<10?(St instanceof HeightMapGap?St=new HeightMapText(St.length,this.height):St.height=this.height,this.outdated||(St.outdated=!1),St):HeightMap.of(vt)}updateHeight(lt,dt=0,vt=!1,St){return St&&St.from<=dt&&St.more?this.setHeight(lt,St.heights[St.index++]):(vt||this.outdated)&&this.setHeight(lt,Math.max(this.widgetHeight,lt.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(lt){super(lt,0)}heightMetrics(lt,dt){let vt=lt.doc.lineAt(dt).number,St=lt.doc.lineAt(dt+this.length).number,Et=St-vt+1,Ct,At=0;if(lt.lineWrapping){let Rt=Math.min(this.height,lt.lineHeight*Et);Ct=Rt/Et,At=(this.height-Rt)/(this.length-Et-1)}else Ct=this.height/Et;return{firstLine:vt,lastLine:St,perLine:Ct,perChar:At}}blockAt(lt,dt,vt,St){let{firstLine:Et,lastLine:Ct,perLine:At,perChar:Rt}=this.heightMetrics(dt,St);if(dt.lineWrapping){let Dt=St+Math.round(Math.max(0,Math.min(1,(lt-vt)/this.height))*this.length),Nt=dt.doc.lineAt(Dt),Ft=At+Nt.length*Rt,Ut=Math.max(vt,lt-Ft/2);return new BlockInfo(Nt.from,Nt.length,Ut,Ft,BlockType.Text)}else{let Dt=Math.max(0,Math.min(Ct-Et,Math.floor((lt-vt)/At))),{from:Nt,length:Ft}=dt.doc.line(Et+Dt);return new BlockInfo(Nt,Ft,vt+At*Dt,At,BlockType.Text)}}lineAt(lt,dt,vt,St,Et){if(dt==QueryType$1.ByHeight)return this.blockAt(lt,vt,St,Et);if(dt==QueryType$1.ByPosNoHeight){let{from:Wt,to:Zt}=vt.doc.lineAt(lt);return new BlockInfo(Wt,Zt-Wt,0,0,BlockType.Text)}let{firstLine:Ct,perLine:At,perChar:Rt}=this.heightMetrics(vt,Et),Dt=vt.doc.lineAt(lt),Nt=At+Dt.length*Rt,Ft=Dt.number-Ct,Ut=St+At*Ft+Rt*(Dt.from-Et-Ft);return new BlockInfo(Dt.from,Dt.length,Math.max(St,Math.min(Ut,St+this.height-Nt)),Nt,BlockType.Text)}forEachLine(lt,dt,vt,St,Et,Ct){lt=Math.max(lt,Et),dt=Math.min(dt,Et+this.length);let{firstLine:At,perLine:Rt,perChar:Dt}=this.heightMetrics(vt,Et);for(let Nt=lt,Ft=St;Nt<=dt;){let Ut=vt.doc.lineAt(Nt);if(Nt==lt){let Zt=Ut.number-At;Ft+=Rt*Zt+Dt*(lt-Et-Zt)}let Wt=Rt+Dt*Ut.length;Ct(new BlockInfo(Ut.from,Ut.length,Ft,Wt,BlockType.Text)),Ft+=Wt,Nt=Ut.to+1}}replace(lt,dt,vt){let St=this.length-dt;if(St>0){let Et=vt[vt.length-1];Et instanceof HeightMapGap?vt[vt.length-1]=new HeightMapGap(Et.length+St):vt.push(null,new HeightMapGap(St-1))}if(lt>0){let Et=vt[0];Et instanceof HeightMapGap?vt[0]=new HeightMapGap(lt+Et.length):vt.unshift(new HeightMapGap(lt-1),null)}return HeightMap.of(vt)}decomposeLeft(lt,dt){dt.push(new HeightMapGap(lt-1),null)}decomposeRight(lt,dt){dt.push(null,new HeightMapGap(this.length-lt-1))}updateHeight(lt,dt=0,vt=!1,St){let Et=dt+this.length;if(St&&St.from<=dt+this.length&&St.more){let Ct=[],At=Math.max(dt,St.from),Rt=-1;for(St.from>dt&&Ct.push(new HeightMapGap(St.from-dt-1).updateHeight(lt,dt));At<=Et&&St.more;){let Nt=lt.doc.lineAt(At).length;Ct.length&&Ct.push(null);let Ft=St.heights[St.index++];Rt==-1?Rt=Ft:Math.abs(Ft-Rt)>=Epsilon&&(Rt=-2);let Ut=new HeightMapText(Nt,Ft);Ut.outdated=!1,Ct.push(Ut),At+=Nt+1}At<=Et&&Ct.push(null,new HeightMapGap(Et-At).updateHeight(lt,At));let Dt=HeightMap.of(Ct);return(Rt<0||Math.abs(Dt.height-this.height)>=Epsilon||Math.abs(Rt-this.heightMetrics(lt,dt).perLine)>=Epsilon)&&(lt.heightChanged=!0),Dt}else(vt||this.outdated)&&(this.setHeight(lt,lt.heightForGap(dt,dt+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(lt,dt,vt){super(lt.length+dt+vt.length,lt.height+vt.height,dt|(lt.outdated||vt.outdated?2:0)),this.left=lt,this.right=vt,this.size=lt.size+vt.size}get break(){return this.flags&1}blockAt(lt,dt,vt,St){let Et=vt+this.left.height;return lt<Et?this.left.blockAt(lt,dt,vt,St):this.right.blockAt(lt,dt,Et,St+this.left.length+this.break)}lineAt(lt,dt,vt,St,Et){let Ct=St+this.left.height,At=Et+this.left.length+this.break,Rt=dt==QueryType$1.ByHeight?lt<Ct:lt<At,Dt=Rt?this.left.lineAt(lt,dt,vt,St,Et):this.right.lineAt(lt,dt,vt,Ct,At);if(this.break||(Rt?Dt.to<At:Dt.from>At))return Dt;let Nt=dt==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return Rt?Dt.join(this.right.lineAt(At,Nt,vt,Ct,At)):this.left.lineAt(At,Nt,vt,St,Et).join(Dt)}forEachLine(lt,dt,vt,St,Et,Ct){let At=St+this.left.height,Rt=Et+this.left.length+this.break;if(this.break)lt<Rt&&this.left.forEachLine(lt,dt,vt,St,Et,Ct),dt>=Rt&&this.right.forEachLine(lt,dt,vt,At,Rt,Ct);else{let Dt=this.lineAt(Rt,QueryType$1.ByPos,vt,St,Et);lt<Dt.from&&this.left.forEachLine(lt,Dt.from-1,vt,St,Et,Ct),Dt.to>=lt&&Dt.from<=dt&&Ct(Dt),dt>Dt.to&&this.right.forEachLine(Dt.to+1,dt,vt,At,Rt,Ct)}}replace(lt,dt,vt){let St=this.left.length+this.break;if(dt<St)return this.balanced(this.left.replace(lt,dt,vt),this.right);if(lt>this.left.length)return this.balanced(this.left,this.right.replace(lt-St,dt-St,vt));let Et=[];lt>0&&this.decomposeLeft(lt,Et);let Ct=Et.length;for(let At of vt)Et.push(At);if(lt>0&&mergeGaps(Et,Ct-1),dt<this.length){let At=Et.length;this.decomposeRight(dt,Et),mergeGaps(Et,At)}return HeightMap.of(Et)}decomposeLeft(lt,dt){let vt=this.left.length;if(lt<=vt)return this.left.decomposeLeft(lt,dt);dt.push(this.left),this.break&&(vt++,lt>=vt&&dt.push(null)),lt>vt&&this.right.decomposeLeft(lt-vt,dt)}decomposeRight(lt,dt){let vt=this.left.length,St=vt+this.break;if(lt>=St)return this.right.decomposeRight(lt-St,dt);lt<vt&&this.left.decomposeRight(lt,dt),this.break&&lt<St&&dt.push(null),dt.push(this.right)}balanced(lt,dt){return lt.size>2*dt.size||dt.size>2*lt.size?HeightMap.of(this.break?[lt,null,dt]:[lt,dt]):(this.left=lt,this.right=dt,this.height=lt.height+dt.height,this.outdated=lt.outdated||dt.outdated,this.size=lt.size+dt.size,this.length=lt.length+this.break+dt.length,this)}updateHeight(lt,dt=0,vt=!1,St){let{left:Et,right:Ct}=this,At=dt+Et.length+this.break,Rt=null;return St&&St.from<=dt+Et.length&&St.more?Rt=Et=Et.updateHeight(lt,dt,vt,St):Et.updateHeight(lt,dt,vt),St&&St.from<=At+Ct.length&&St.more?Rt=Ct=Ct.updateHeight(lt,At,vt,St):Ct.updateHeight(lt,At,vt),Rt?this.balanced(Et,Ct):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(ft,lt){let dt,vt;ft[lt]==null&&(dt=ft[lt-1])instanceof HeightMapGap&&(vt=ft[lt+1])instanceof HeightMapGap&&ft.splice(lt-1,3,new HeightMapGap(dt.length+1+vt.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(lt,dt){this.pos=lt,this.oracle=dt,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=lt}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(lt,dt){if(this.lineStart>-1){let vt=Math.min(dt,this.lineEnd),St=this.nodes[this.nodes.length-1];St instanceof HeightMapText?St.length+=vt-this.pos:(vt>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(vt-this.pos,-1)),this.writtenTo=vt,dt>vt&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=dt}point(lt,dt,vt){if(lt<dt||vt.heightRelevant){let St=vt.widget?vt.widget.estimatedHeight:0;St<0&&(St=this.oracle.lineHeight);let Et=dt-lt;vt.block?this.addBlock(new HeightMapBlock(Et,St,vt.type)):(Et||St>=relevantWidgetHeight)&&this.addLineDeco(St,Et)}else dt>lt&&this.span(lt,dt);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:lt,to:dt}=this.oracle.doc.lineAt(this.pos);this.lineStart=lt,this.lineEnd=dt,this.writtenTo<lt&&((this.writtenTo<lt-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,lt-1)),this.nodes.push(null)),this.pos>lt&&this.nodes.push(new HeightMapText(this.pos-lt,-1)),this.writtenTo=this.pos}blankContent(lt,dt){let vt=new HeightMapGap(dt-lt);return this.oracle.doc.lineAt(lt).to==dt&&(vt.flags|=4),vt}ensureLine(){this.enterLine();let lt=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(lt instanceof HeightMapText)return lt;let dt=new HeightMapText(0,-1);return this.nodes.push(dt),dt}addBlock(lt){this.enterLine(),lt.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(lt),this.writtenTo=this.pos=this.pos+lt.length,lt.type!=BlockType.WidgetBefore&&(this.covering=lt)}addLineDeco(lt,dt){let vt=this.ensureLine();vt.length+=dt,vt.collapsed+=dt,vt.widgetHeight=Math.max(vt.widgetHeight,lt),this.writtenTo=this.pos=this.pos+dt}finish(lt){let dt=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(dt instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||dt==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let vt=lt;for(let St of this.nodes)St instanceof HeightMapText&&St.updateHeight(this.oracle,vt),vt+=St?St.length:1;return this.nodes}static build(lt,dt,vt,St){let Et=new NodeBuilder(vt,lt);return RangeSet.spans(dt,vt,St,Et,0),Et.finish(vt)}}function heightRelevantDecoChanges(ft,lt,dt){let vt=new DecorationComparator;return RangeSet.compare(ft,lt,dt,vt,0),vt.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(lt,dt,vt,St){(lt<dt||vt&&vt.heightRelevant||St&&St.heightRelevant)&&addRange(lt,dt,this.changes,5)}}function visiblePixelRange(ft,lt){let dt=ft.getBoundingClientRect(),vt=ft.ownerDocument,St=vt.defaultView||window,Et=Math.max(0,dt.left),Ct=Math.min(St.innerWidth,dt.right),At=Math.max(0,dt.top),Rt=Math.min(St.innerHeight,dt.bottom);for(let Dt=ft.parentNode;Dt&&Dt!=vt.body;)if(Dt.nodeType==1){let Nt=Dt,Ft=window.getComputedStyle(Nt);if((Nt.scrollHeight>Nt.clientHeight||Nt.scrollWidth>Nt.clientWidth)&&Ft.overflow!="visible"){let Ut=Nt.getBoundingClientRect();Et=Math.max(Et,Ut.left),Ct=Math.min(Ct,Ut.right),At=Math.max(At,Ut.top),Rt=Dt==ft.parentNode?Ut.bottom:Math.min(Rt,Ut.bottom)}Dt=Ft.position=="absolute"||Ft.position=="fixed"?Nt.offsetParent:Nt.parentNode}else if(Dt.nodeType==11)Dt=Dt.host;else break;return{left:Et-dt.left,right:Math.max(Et,Ct)-dt.left,top:At-(dt.top+lt),bottom:Math.max(At,Rt)-(dt.top+lt)}}function fullPixelRange(ft,lt){let dt=ft.getBoundingClientRect();return{left:0,right:dt.right-dt.left,top:lt,bottom:dt.bottom-(dt.top+lt)}}class LineGap{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.size=vt}static same(lt,dt){if(lt.length!=dt.length)return!1;for(let vt=0;vt<lt.length;vt++){let St=lt[vt],Et=dt[vt];if(St.from!=Et.from||St.to!=Et.to||St.size!=Et.size)return!1}return!0}draw(lt){return Decoration.replace({widget:new LineGapWidget(this.size,lt)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(lt,dt){super(),this.size=lt,this.vertical=dt}eq(lt){return lt.size==this.size&&lt.vertical==this.vertical}toDOM(){let lt=document.createElement("div");return this.vertical?lt.style.height=this.size+"px":(lt.style.width=this.size+"px",lt.style.height="2px",lt.style.display="inline-block"),lt}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(lt){this.state=lt,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let dt=lt.facet(contentAttributes).some(vt=>typeof vt!="function"&&vt.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(dt),this.stateDeco=lt.facet(decorations).filter(vt=>typeof vt!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(lt.doc),[new ChangedRange(0,0,0,lt.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(vt=>vt.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let lt=[this.viewport],{main:dt}=this.state.selection;for(let vt=0;vt<=1;vt++){let St=vt?dt.head:dt.anchor;if(!lt.some(({from:Et,to:Ct})=>St>=Et&&St<=Ct)){let{from:Et,to:Ct}=this.lineBlockAt(St);lt.push(new Viewport(Et,Ct))}}this.viewports=lt.sort((vt,St)=>vt.from-St.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,lt=>{this.viewportLines.push(this.scaler.scale==1?lt:scaleBlock(lt,this.scaler))})}update(lt,dt=null){this.state=lt.state;let vt=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(Dt=>typeof Dt!="function");let St=lt.changedRanges,Et=ChangedRange.extendWithRanges(St,heightRelevantDecoChanges(vt,this.stateDeco,lt?lt.changes:ChangeSet.empty(this.state.doc.length))),Ct=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,lt.startState.doc,this.heightOracle.setDoc(this.state.doc),Et),this.heightMap.height!=Ct&&(lt.flags|=2);let At=Et.length?this.mapViewport(this.viewport,lt.changes):this.viewport;(dt&&(dt.range.head<At.from||dt.range.head>At.to)||!this.viewportIsAppropriate(At))&&(At=this.getViewport(0,dt));let Rt=!lt.changes.empty||lt.flags&2||At.from!=this.viewport.from||At.to!=this.viewport.to;this.viewport=At,this.updateForViewport(),Rt&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,lt.changes))),lt.flags|=this.computeVisibleRanges(),dt&&(this.scrollTarget=dt),!this.mustEnforceCursorAssoc&&lt.selectionSet&&lt.view.lineWrapping&&lt.state.selection.main.empty&&lt.state.selection.main.assoc&&!lt.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(lt){let dt=lt.contentDOM,vt=window.getComputedStyle(dt),St=this.heightOracle,Et=vt.whiteSpace;this.defaultTextDirection=vt.direction=="rtl"?Direction.RTL:Direction.LTR;let Ct=this.heightOracle.mustRefreshForWrapping(Et),At=dt.getBoundingClientRect(),Rt=Ct||this.mustMeasureContent||this.contentDOMHeight!=At.height;this.contentDOMHeight=At.height,this.mustMeasureContent=!1;let Dt=0,Nt=0,Ft=parseInt(vt.paddingTop)||0,Ut=parseInt(vt.paddingBottom)||0;(this.paddingTop!=Ft||this.paddingBottom!=Ut)&&(this.paddingTop=Ft,this.paddingBottom=Ut,Dt|=10),this.editorWidth!=lt.scrollDOM.clientWidth&&(St.lineWrapping&&(Rt=!0),this.editorWidth=lt.scrollDOM.clientWidth,Dt|=8);let Wt=(this.printing?fullPixelRange:visiblePixelRange)(dt,this.paddingTop),Zt=Wt.top-this.pixelViewport.top,Kt=Wt.bottom-this.pixelViewport.bottom;this.pixelViewport=Wt;let cn=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(cn!=this.inView&&(this.inView=cn,cn&&(Rt=!0)),!this.inView&&!this.scrollTarget)return 0;let hn=At.width;if((this.contentDOMWidth!=hn||this.editorHeight!=lt.scrollDOM.clientHeight)&&(this.contentDOMWidth=At.width,this.editorHeight=lt.scrollDOM.clientHeight,Dt|=8),Rt){let pn=lt.docView.measureVisibleLineHeights(this.viewport);if(St.mustRefreshForHeights(pn)&&(Ct=!0),Ct||St.lineWrapping&&Math.abs(hn-this.contentDOMWidth)>St.charWidth){let{lineHeight:gn,charWidth:vn}=lt.docView.measureTextSize();Ct=gn>0&&St.refresh(Et,gn,vn,hn/vn,pn),Ct&&(lt.docView.minWidth=0,Dt|=8)}Zt>0&&Kt>0?Nt=Math.max(Zt,Kt):Zt<0&&Kt<0&&(Nt=Math.min(Zt,Kt)),St.heightChanged=!1;for(let gn of this.viewports){let vn=gn.from==this.viewport.from?pn:lt.docView.measureVisibleLineHeights(gn);this.heightMap=(Ct?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,lt.state.doc.length)]):this.heightMap).updateHeight(St,0,Ct,new MeasuredHeights(gn.from,vn))}St.heightChanged&&(Dt|=2)}let dn=!this.viewportIsAppropriate(this.viewport,Nt)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return dn&&(this.viewport=this.getViewport(Nt,this.scrollTarget)),this.updateForViewport(),(Dt&2||dn)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(Ct?[]:this.lineGaps,lt)),Dt|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,lt.docView.enforceCursorAssoc()),Dt}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(lt,dt){let vt=.5-Math.max(-.5,Math.min(.5,lt/1e3/2)),St=this.heightMap,Et=this.heightOracle,{visibleTop:Ct,visibleBottom:At}=this,Rt=new Viewport(St.lineAt(Ct-vt*1e3,QueryType$1.ByHeight,Et,0,0).from,St.lineAt(At+(1-vt)*1e3,QueryType$1.ByHeight,Et,0,0).to);if(dt){let{head:Dt}=dt.range;if(Dt<Rt.from||Dt>Rt.to){let Nt=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Ft=St.lineAt(Dt,QueryType$1.ByPos,Et,0,0),Ut;dt.y=="center"?Ut=(Ft.top+Ft.bottom)/2-Nt/2:dt.y=="start"||dt.y=="nearest"&&Dt<Rt.from?Ut=Ft.top:Ut=Ft.bottom-Nt,Rt=new Viewport(St.lineAt(Ut-1e3/2,QueryType$1.ByHeight,Et,0,0).from,St.lineAt(Ut+Nt+1e3/2,QueryType$1.ByHeight,Et,0,0).to)}}return Rt}mapViewport(lt,dt){let vt=dt.mapPos(lt.from,-1),St=dt.mapPos(lt.to,1);return new Viewport(this.heightMap.lineAt(vt,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(St,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:lt,to:dt},vt=0){if(!this.inView)return!0;let{top:St}=this.heightMap.lineAt(lt,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:Et}=this.heightMap.lineAt(dt,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:Ct,visibleBottom:At}=this;return(lt==0||St<=Ct-Math.max(10,Math.min(-vt,250)))&&(dt==this.state.doc.length||Et>=At+Math.max(10,Math.min(vt,250)))&&St>Ct-2*1e3&&Et<At+2*1e3}mapLineGaps(lt,dt){if(!lt.length||dt.empty)return lt;let vt=[];for(let St of lt)dt.touchesRange(St.from,St.to)||vt.push(new LineGap(dt.mapPos(St.from),dt.mapPos(St.to),St.size));return vt}ensureLineGaps(lt,dt){let vt=this.heightOracle.lineWrapping,St=vt?1e4:2e3,Et=St>>1,Ct=St<<1;if(this.defaultTextDirection!=Direction.LTR&&!vt)return[];let At=[],Rt=(Dt,Nt,Ft,Ut)=>{if(Nt-Dt<Et)return;let Wt=this.state.selection.main,Zt=[Wt.from];Wt.empty||Zt.push(Wt.to);for(let cn of Zt)if(cn>Dt&&cn<Nt){Rt(Dt,cn-10,Ft,Ut),Rt(cn+10,Nt,Ft,Ut);return}let Kt=find(lt,cn=>cn.from>=Ft.from&&cn.to<=Ft.to&&Math.abs(cn.from-Dt)<Et&&Math.abs(cn.to-Nt)<Et&&!Zt.some(hn=>cn.from<hn&&cn.to>hn));if(!Kt){if(Nt<Ft.to&&dt&&vt&&dt.visibleRanges.some(cn=>cn.from<=Nt&&cn.to>=Nt)){let cn=dt.moveToLineBoundary(EditorSelection.cursor(Nt),!1,!0).head;cn>Dt&&(Nt=cn)}Kt=new LineGap(Dt,Nt,this.gapSize(Ft,Dt,Nt,Ut))}At.push(Kt)};for(let Dt of this.viewportLines){if(Dt.length<Ct)continue;let Nt=lineStructure(Dt.from,Dt.to,this.stateDeco);if(Nt.total<Ct)continue;let Ft=this.scrollTarget?this.scrollTarget.range.head:null,Ut,Wt;if(vt){let Zt=St/this.heightOracle.lineLength*this.heightOracle.lineHeight,Kt,cn;if(Ft!=null){let hn=findFraction(Nt,Ft),dn=((this.visibleBottom-this.visibleTop)/2+Zt)/Dt.height;Kt=hn-dn,cn=hn+dn}else Kt=(this.visibleTop-Dt.top-Zt)/Dt.height,cn=(this.visibleBottom-Dt.top+Zt)/Dt.height;Ut=findPosition(Nt,Kt),Wt=findPosition(Nt,cn)}else{let Zt=Nt.total*this.heightOracle.charWidth,Kt=St*this.heightOracle.charWidth,cn,hn;if(Ft!=null){let dn=findFraction(Nt,Ft),pn=((this.pixelViewport.right-this.pixelViewport.left)/2+Kt)/Zt;cn=dn-pn,hn=dn+pn}else cn=(this.pixelViewport.left-Kt)/Zt,hn=(this.pixelViewport.right+Kt)/Zt;Ut=findPosition(Nt,cn),Wt=findPosition(Nt,hn)}Ut>Dt.from&&Rt(Dt.from,Ut,Dt,Nt),Wt<Dt.to&&Rt(Wt,Dt.to,Dt,Nt)}return At}gapSize(lt,dt,vt,St){let Et=findFraction(St,vt)-findFraction(St,dt);return this.heightOracle.lineWrapping?lt.height*Et:St.total*this.heightOracle.charWidth*Et}updateLineGaps(lt){LineGap.same(lt,this.lineGaps)||(this.lineGaps=lt,this.lineGapDeco=Decoration.set(lt.map(dt=>dt.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let lt=this.stateDeco;this.lineGaps.length&&(lt=lt.concat(this.lineGapDeco));let dt=[];RangeSet.spans(lt,this.viewport.from,this.viewport.to,{span(St,Et){dt.push({from:St,to:Et})},point(){}},20);let vt=dt.length!=this.visibleRanges.length||this.visibleRanges.some((St,Et)=>St.from!=dt[Et].from||St.to!=dt[Et].to);return this.visibleRanges=dt,vt?4:0}lineBlockAt(lt){return lt>=this.viewport.from&&lt<=this.viewport.to&&this.viewportLines.find(dt=>dt.from<=lt&&dt.to>=lt)||scaleBlock(this.heightMap.lineAt(lt,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(lt){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(lt),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(lt){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(lt),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(lt,dt){this.from=lt,this.to=dt}}function lineStructure(ft,lt,dt){let vt=[],St=ft,Et=0;return RangeSet.spans(dt,ft,lt,{span(){},point(Ct,At){Ct>St&&(vt.push({from:St,to:Ct}),Et+=Ct-St),St=At}},20),St<lt&&(vt.push({from:St,to:lt}),Et+=lt-St),{total:Et,ranges:vt}}function findPosition({total:ft,ranges:lt},dt){if(dt<=0)return lt[0].from;if(dt>=1)return lt[lt.length-1].to;let vt=Math.floor(ft*dt);for(let St=0;;St++){let{from:Et,to:Ct}=lt[St],At=Ct-Et;if(vt<=At)return Et+vt;vt-=At}}function findFraction(ft,lt){let dt=0;for(let{from:vt,to:St}of ft.ranges){if(lt<=St){dt+=lt-vt;break}dt+=St-vt}return dt/ft.total}function find(ft,lt){for(let dt of ft)if(lt(dt))return dt}const IdScaler={toDOM(ft){return ft},fromDOM(ft){return ft},scale:1};class BigScaler{constructor(lt,dt,vt){let St=0,Et=0,Ct=0;this.viewports=vt.map(({from:At,to:Rt})=>{let Dt=dt.lineAt(At,QueryType$1.ByPos,lt,0,0).top,Nt=dt.lineAt(Rt,QueryType$1.ByPos,lt,0,0).bottom;return St+=Nt-Dt,{from:At,to:Rt,top:Dt,bottom:Nt,domTop:0,domBottom:0}}),this.scale=(7e6-St)/(dt.height-St);for(let At of this.viewports)At.domTop=Ct+(At.top-Et)*this.scale,Ct=At.domBottom=At.domTop+(At.bottom-At.top),Et=At.bottom}toDOM(lt){for(let dt=0,vt=0,St=0;;dt++){let Et=dt<this.viewports.length?this.viewports[dt]:null;if(!Et||lt<Et.top)return St+(lt-vt)*this.scale;if(lt<=Et.bottom)return Et.domTop+(lt-Et.top);vt=Et.bottom,St=Et.domBottom}}fromDOM(lt){for(let dt=0,vt=0,St=0;;dt++){let Et=dt<this.viewports.length?this.viewports[dt]:null;if(!Et||lt<Et.domTop)return vt+(lt-St)/this.scale;if(lt<=Et.domBottom)return Et.top+(lt-Et.domTop);vt=Et.bottom,St=Et.domBottom}}}function scaleBlock(ft,lt){if(lt.scale==1)return ft;let dt=lt.toDOM(ft.top),vt=lt.toDOM(ft.bottom);return new BlockInfo(ft.from,ft.length,dt,vt-dt,Array.isArray(ft.type)?ft.type.map(St=>scaleBlock(St,lt)):ft.type)}const theme=Facet.define({combine:ft=>ft.join(" ")}),darkTheme=Facet.define({combine:ft=>ft.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(ft,lt,dt){return new StyleModule(lt,{finish(vt){return/&/.test(vt)?vt.replace(/&\w*/,St=>{if(St=="&")return ft;if(!dt||!dt[St])throw new RangeError(`Unsupported selector: ${St}`);return dt[St]}):ft+" "+vt}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(lt,dt,vt,St){this.typeOver=St,this.bounds=null,this.text="";let{impreciseHead:Et,impreciseAnchor:Ct}=lt.docView;if(lt.state.readOnly&&dt>-1)this.newSel=null;else if(dt>-1&&(this.bounds=lt.docView.domBoundsAround(dt,vt,0))){let At=Et||Ct?[]:selectionPoints(lt),Rt=new DOMReader(At,lt.state);Rt.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=Rt.text,this.newSel=selectionFromPoints(At,this.bounds.from)}else{let At=lt.observer.selectionRange,Rt=Et&&Et.node==At.focusNode&&Et.offset==At.focusOffset||!contains(lt.contentDOM,At.focusNode)?lt.state.selection.main.head:lt.docView.posFromDOM(At.focusNode,At.focusOffset),Dt=Ct&&Ct.node==At.anchorNode&&Ct.offset==At.anchorOffset||!contains(lt.contentDOM,At.anchorNode)?lt.state.selection.main.anchor:lt.docView.posFromDOM(At.anchorNode,At.anchorOffset);this.newSel=EditorSelection.single(Dt,Rt)}}}function applyDOMChange(ft,lt){let dt,{newSel:vt}=lt,St=ft.state.selection.main;if(lt.bounds){let{from:Et,to:Ct}=lt.bounds,At=St.from,Rt=null;(ft.inputState.lastKeyCode===8&&ft.inputState.lastKeyTime>Date.now()-100||browser.android&&lt.text.length<Ct-Et)&&(At=St.to,Rt="end");let Dt=findDiff(ft.state.doc.sliceString(Et,Ct,LineBreakPlaceholder),lt.text,At-Et,Rt);Dt&&(browser.chrome&&ft.inputState.lastKeyCode==13&&Dt.toB==Dt.from+2&&lt.text.slice(Dt.from,Dt.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&Dt.toB--,dt={from:Et+Dt.from,to:Et+Dt.toA,insert:Text.of(lt.text.slice(Dt.from,Dt.toB).split(LineBreakPlaceholder))})}else vt&&(!ft.hasFocus&&ft.state.facet(editable)||vt.main.eq(St))&&(vt=null);if(!dt&&!vt)return!1;if(!dt&&lt.typeOver&&!St.empty&&vt&&vt.main.empty?dt={from:St.from,to:St.to,insert:ft.state.doc.slice(St.from,St.to)}:dt&&dt.from>=St.from&&dt.to<=St.to&&(dt.from!=St.from||dt.to!=St.to)&&St.to-St.from-(dt.to-dt.from)<=4?dt={from:St.from,to:St.to,insert:ft.state.doc.slice(St.from,dt.from).append(dt.insert).append(ft.state.doc.slice(dt.to,St.to))}:(browser.mac||browser.android)&&dt&&dt.from==dt.to&&dt.from==St.head-1&&/^\. ?$/.test(dt.insert.toString())&&ft.contentDOM.getAttribute("autocorrect")=="off"?(vt&&dt.insert.length==2&&(vt=EditorSelection.single(vt.main.anchor-1,vt.main.head-1)),dt={from:St.from,to:St.to,insert:Text.of([" "])}):browser.chrome&&dt&&dt.from==dt.to&&dt.from==St.head&&dt.insert.toString()==`
 `&&ft.lineWrapping&&(vt&&(vt=EditorSelection.single(vt.main.anchor-1,vt.main.head-1)),dt={from:St.from,to:St.to,insert:Text.of([" "])}),dt){let Et=ft.state;if(browser.ios&&ft.inputState.flushIOSKey(ft)||browser.android&&(dt.from==St.from&&dt.to==St.to&&dt.insert.length==1&&dt.insert.lines==2&&dispatchKey(ft.contentDOM,"Enter",13)||dt.from==St.from-1&&dt.to==St.to&&dt.insert.length==0&&dispatchKey(ft.contentDOM,"Backspace",8)||dt.from==St.from&&dt.to==St.to+1&&dt.insert.length==0&&dispatchKey(ft.contentDOM,"Delete",46)))return!0;let Ct=dt.insert.toString();if(ft.state.facet(inputHandler$1).some(Dt=>Dt(ft,dt.from,dt.to,Ct)))return!0;ft.inputState.composing>=0&&ft.inputState.composing++;let At;if(dt.from>=St.from&&dt.to<=St.to&&dt.to-dt.from>=(St.to-St.from)/3&&(!vt||vt.main.empty&&vt.main.from==dt.from+dt.insert.length)&&ft.inputState.composing<0){let Dt=St.from<dt.from?Et.sliceDoc(St.from,dt.from):"",Nt=St.to>dt.to?Et.sliceDoc(dt.to,St.to):"";At=Et.replaceSelection(ft.state.toText(Dt+dt.insert.sliceString(0,void 0,ft.state.lineBreak)+Nt))}else{let Dt=Et.changes(dt),Nt=vt&&!Et.selection.main.eq(vt.main)&&vt.main.to<=Dt.newLength?vt.main:void 0;if(Et.selection.ranges.length>1&&ft.inputState.composing>=0&&dt.to<=St.to&&dt.to>=St.to-10){let Ft=ft.state.sliceDoc(dt.from,dt.to),Ut=compositionSurroundingNode(ft)||ft.state.doc.lineAt(St.head),Wt=St.to-dt.to,Zt=St.to-St.from;At=Et.changeByRange(Kt=>{if(Kt.from==St.from&&Kt.to==St.to)return{changes:Dt,range:Nt||Kt.map(Dt)};let cn=Kt.to-Wt,hn=cn-Ft.length;if(Kt.to-Kt.from!=Zt||ft.state.sliceDoc(hn,cn)!=Ft||Ut&&Kt.to>=Ut.from&&Kt.from<=Ut.to)return{range:Kt};let dn=Et.changes({from:hn,to:cn,insert:dt.insert}),pn=Kt.to-St.to;return{changes:dn,range:Nt?EditorSelection.range(Math.max(0,Nt.anchor+pn),Math.max(0,Nt.head+pn)):Kt.map(dn)}})}else At={changes:Dt,selection:Nt&&Et.selection.replaceRange(Nt)}}let Rt="input.type";return ft.composing&&(Rt+=".compose",ft.inputState.compositionFirstChange&&(Rt+=".start",ft.inputState.compositionFirstChange=!1)),ft.dispatch(At,{scrollIntoView:!0,userEvent:Rt}),!0}else if(vt&&!vt.main.eq(St)){let Et=!1,Ct="select";return ft.inputState.lastSelectionTime>Date.now()-50&&(ft.inputState.lastSelectionOrigin=="select"&&(Et=!0),Ct=ft.inputState.lastSelectionOrigin),ft.dispatch({selection:vt,scrollIntoView:Et,userEvent:Ct}),!0}else return!1}function findDiff(ft,lt,dt,vt){let St=Math.min(ft.length,lt.length),Et=0;for(;Et<St&&ft.charCodeAt(Et)==lt.charCodeAt(Et);)Et++;if(Et==St&&ft.length==lt.length)return null;let Ct=ft.length,At=lt.length;for(;Ct>0&&At>0&&ft.charCodeAt(Ct-1)==lt.charCodeAt(At-1);)Ct--,At--;if(vt=="end"){let Rt=Math.max(0,Et-Math.min(Ct,At));dt-=Ct+Rt-Et}if(Ct<Et&&ft.length<lt.length){let Rt=dt<=Et&&dt>=Ct?Et-dt:0;Et-=Rt,At=Et+(At-Ct),Ct=Et}else if(At<Et){let Rt=dt<=Et&&dt>=At?Et-dt:0;Et-=Rt,Ct=Et+(Ct-At),At=Et}return{from:Et,toA:Ct,toB:At}}function selectionPoints(ft){let lt=[];if(ft.root.activeElement!=ft.contentDOM)return lt;let{anchorNode:dt,anchorOffset:vt,focusNode:St,focusOffset:Et}=ft.observer.selectionRange;return dt&&(lt.push(new DOMPoint(dt,vt)),(St!=dt||Et!=vt)&&lt.push(new DOMPoint(St,Et))),lt}function selectionFromPoints(ft,lt){if(ft.length==0)return null;let dt=ft[0].pos,vt=ft.length==2?ft[1].pos:dt;return dt>-1&&vt>-1?EditorSelection.single(dt+lt,vt+lt):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(lt){this.view=lt,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=lt.contentDOM,this.observer=new MutationObserver(dt=>{for(let vt of dt)this.queue.push(vt);(browser.ie&&browser.ie_version<=11||browser.ios&&lt.composing)&&dt.some(vt=>vt.type=="childList"&&vt.removedNodes.length||vt.type=="characterData"&&vt.oldValue.length>vt.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=dt=>{this.queue.push({target:dt.target,type:"characterData",oldValue:dt.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var dt;((dt=this.view.docView)===null||dt===void 0?void 0:dt.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(lt.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(lt.contentDOM)),this.addWindowListeners(this.win=lt.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(dt=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),dt.length>0&&dt[dt.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(dt=>{dt.length>0&&dt[dt.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(lt){this.view.inputState.runScrollHandlers(this.view,lt),this.intersecting&&this.view.measure()}onScroll(lt){this.intersecting&&this.flush(!1),this.onScrollChanged(lt)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(lt){if(this.gapIntersection&&(lt.length!=this.gaps.length||this.gaps.some((dt,vt)=>dt!=lt[vt]))){this.gapIntersection.disconnect();for(let dt of lt)this.gapIntersection.observe(dt);this.gaps=lt}}onSelectionChange(lt){let dt=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:vt}=this,St=this.selectionRange;if(vt.state.facet(editable)?vt.root.activeElement!=this.dom:!hasSelection(vt.dom,St))return;let Et=St.anchorNode&&vt.docView.nearest(St.anchorNode);if(Et&&Et.ignoreEvent(lt)){dt||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!vt.state.selection.main.empty&&St.focusNode&&isEquivalentPosition(St.focusNode,St.focusOffset,St.anchorNode,St.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:lt}=this,dt=browser.safari&&lt.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(lt.root);if(!dt||this.selectionRange.eq(dt))return!1;let vt=hasSelection(this.dom,dt);return vt&&!this.selectionChanged&&lt.inputState.lastFocusTime>Date.now()-200&&lt.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,dt)?(this.view.inputState.lastFocusTime=0,lt.docView.updateSelection(),!1):(this.selectionRange.setRange(dt),vt&&(this.selectionChanged=!0),!0)}setSelectionRange(lt,dt){this.selectionRange.set(lt.node,lt.offset,dt.node,dt.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let lt=0,dt=null;for(let vt=this.dom;vt;)if(vt.nodeType==1)!dt&&lt<this.scrollTargets.length&&this.scrollTargets[lt]==vt?lt++:dt||(dt=this.scrollTargets.slice(0,lt)),dt&&dt.push(vt),vt=vt.assignedSlot||vt.parentNode;else if(vt.nodeType==11)vt=vt.host;else break;if(lt<this.scrollTargets.length&&!dt&&(dt=this.scrollTargets.slice(0,lt)),dt){for(let vt of this.scrollTargets)vt.removeEventListener("scroll",this.onScroll);for(let vt of this.scrollTargets=dt)vt.addEventListener("scroll",this.onScroll)}}ignore(lt){if(!this.active)return lt();try{return this.stop(),lt()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(lt,dt){var vt;if(!this.delayedAndroidKey){let St=()=>{let Et=this.delayedAndroidKey;Et&&(this.clearDelayedAndroidKey(),!this.flush()&&Et.force&&dispatchKey(this.dom,Et.key,Et.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(St)}(!this.delayedAndroidKey||lt=="Enter")&&(this.delayedAndroidKey={key:lt,keyCode:dt,force:this.lastChange<Date.now()-50||!!(!((vt=this.delayedAndroidKey)===null||vt===void 0)&&vt.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let lt=this.queue;for(let Et of this.observer.takeRecords())lt.push(Et);lt.length&&(this.queue=[]);let dt=-1,vt=-1,St=!1;for(let Et of lt){let Ct=this.readMutation(Et);Ct&&(Ct.typeOver&&(St=!0),dt==-1?{from:dt,to:vt}=Ct:(dt=Math.min(Ct.from,dt),vt=Math.max(Ct.to,vt)))}return{from:dt,to:vt,typeOver:St}}readChange(){let{from:lt,to:dt,typeOver:vt}=this.processRecords(),St=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return lt<0&&!St?null:(lt>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,lt,dt,vt))}flush(lt=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;lt&&this.readSelectionRange();let dt=this.readChange();if(!dt)return!1;let vt=this.view.state,St=applyDOMChange(this.view,dt);return this.view.state==vt&&this.view.update([]),St}readMutation(lt){let dt=this.view.docView.nearest(lt.target);if(!dt||dt.ignoreMutation(lt))return null;if(dt.markDirty(lt.type=="attributes"),lt.type=="attributes"&&(dt.dirty|=4),lt.type=="childList"){let vt=findChild(dt,lt.previousSibling||lt.target.previousSibling,-1),St=findChild(dt,lt.nextSibling||lt.target.nextSibling,1);return{from:vt?dt.posAfter(vt):dt.posAtStart,to:St?dt.posBefore(St):dt.posAtEnd,typeOver:!1}}else return lt.type=="characterData"?{from:dt.posAtStart,to:dt.posAtEnd,typeOver:lt.target.nodeValue==lt.oldValue}:null}setWindow(lt){lt!=this.win&&(this.removeWindowListeners(this.win),this.win=lt,this.addWindowListeners(this.win))}addWindowListeners(lt){lt.addEventListener("resize",this.onResize),lt.addEventListener("beforeprint",this.onPrint),lt.addEventListener("scroll",this.onScroll),lt.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(lt){lt.removeEventListener("scroll",this.onScroll),lt.removeEventListener("resize",this.onResize),lt.removeEventListener("beforeprint",this.onPrint),lt.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var lt,dt,vt,St;this.stop(),(lt=this.intersection)===null||lt===void 0||lt.disconnect(),(dt=this.gapIntersection)===null||dt===void 0||dt.disconnect(),(vt=this.resizeScroll)===null||vt===void 0||vt.disconnect(),(St=this.resizeContent)===null||St===void 0||St.disconnect();for(let Et of this.scrollTargets)Et.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(ft,lt,dt){for(;lt;){let vt=ContentView.get(lt);if(vt&&vt.parent==ft)return vt;let St=lt.parentNode;lt=St!=ft.dom?St:dt>0?lt.nextSibling:lt.previousSibling}return null}function safariSelectionRangeHack(ft){let lt=null;function dt(Rt){Rt.preventDefault(),Rt.stopImmediatePropagation(),lt=Rt.getTargetRanges()[0]}if(ft.contentDOM.addEventListener("beforeinput",dt,!0),ft.dom.ownerDocument.execCommand("indent"),ft.contentDOM.removeEventListener("beforeinput",dt,!0),!lt)return null;let vt=lt.startContainer,St=lt.startOffset,Et=lt.endContainer,Ct=lt.endOffset,At=ft.docView.domAtPos(ft.state.selection.main.anchor);return isEquivalentPosition(At.node,At.offset,Et,Ct)&&([vt,St,Et,Ct]=[Et,Ct,vt,St]),{anchorNode:vt,anchorOffset:St,focusNode:Et,focusOffset:Ct}}class EditorView{constructor(lt={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=lt.dispatch||(dt=>this.update([dt])),this.dispatch=this.dispatch.bind(this),this._root=lt.root||getRoot(lt.parent)||document,this.viewState=new ViewState(lt.state||EditorState.create(lt)),this.plugins=this.state.facet(viewPlugin).map(dt=>new PluginInstance(dt));for(let dt of this.plugins)dt.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),lt.parent&&lt.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...lt){this._dispatch(lt.length==1&&lt[0]instanceof Transaction?lt[0]:this.state.update(...lt))}update(lt){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let dt=!1,vt=!1,St,Et=this.state;for(let Ut of lt){if(Ut.startState!=Et)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");Et=Ut.state}if(this.destroyed){this.viewState.state=Et;return}let Ct=this.hasFocus,At=0,Rt=null;lt.some(Ut=>Ut.annotation(isFocusChange))?(this.inputState.notifiedFocused=Ct,At=1):Ct!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=Ct,Rt=focusChangeTransaction(Et,Ct),Rt||(At=1));let Dt=this.observer.delayedAndroidKey,Nt=null;if(Dt?(this.observer.clearDelayedAndroidKey(),Nt=this.observer.readChange(),(Nt&&!this.state.doc.eq(Et.doc)||!this.state.selection.eq(Et.selection))&&(Nt=null)):this.observer.clear(),Et.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(Et);St=ViewUpdate.create(this,Et,lt),St.flags|=At;let Ft=this.viewState.scrollTarget;try{this.updateState=2;for(let Ut of lt){if(Ft&&(Ft=Ft.map(Ut.changes)),Ut.scrollIntoView){let{main:Wt}=Ut.state.selection;Ft=new ScrollTarget(Wt.empty?Wt:EditorSelection.cursor(Wt.head,Wt.head>Wt.anchor?-1:1))}for(let Wt of Ut.effects)Wt.is(scrollIntoView$1)&&(Ft=Wt.value)}this.viewState.update(St,Ft),this.bidiCache=CachedOrder.update(this.bidiCache,St.changes),St.empty||(this.updatePlugins(St),this.inputState.update(St)),dt=this.docView.update(St),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),vt=this.updateAttrs(),this.showAnnouncements(lt),this.docView.updateSelection(dt,lt.some(Ut=>Ut.isUserEvent("select.pointer")))}finally{this.updateState=0}if(St.startState.facet(theme)!=St.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(dt||vt||Ft||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!St.empty)for(let Ut of this.state.facet(updateListener))Ut(St);(Rt||Nt)&&Promise.resolve().then(()=>{Rt&&this.state==Rt.startState&&this.dispatch(Rt),Nt&&!applyDOMChange(this,Nt)&&Dt.force&&dispatchKey(this.contentDOM,Dt.key,Dt.keyCode)})}setState(lt){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=lt;return}this.updateState=2;let dt=this.hasFocus;try{for(let vt of this.plugins)vt.destroy(this);this.viewState=new ViewState(lt),this.plugins=lt.facet(viewPlugin).map(vt=>new PluginInstance(vt)),this.pluginMap.clear();for(let vt of this.plugins)vt.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}dt&&this.focus(),this.requestMeasure()}updatePlugins(lt){let dt=lt.startState.facet(viewPlugin),vt=lt.state.facet(viewPlugin);if(dt!=vt){let St=[];for(let Et of vt){let Ct=dt.indexOf(Et);if(Ct<0)St.push(new PluginInstance(Et));else{let At=this.plugins[Ct];At.mustUpdate=lt,St.push(At)}}for(let Et of this.plugins)Et.mustUpdate!=lt&&Et.destroy(this);this.plugins=St,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let St of this.plugins)St.mustUpdate=lt;for(let St=0;St<this.plugins.length;St++)this.plugins[St].update(this)}measure(lt=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,lt&&this.observer.forceFlush();let dt=null,{scrollHeight:vt,scrollTop:St,clientHeight:Et}=this.scrollDOM,Ct=St>vt-Et-4?vt:St;try{for(let At=0;;At++){this.updateState=1;let Rt=this.viewport,Dt=this.viewState.lineBlockAtHeight(Ct),Nt=this.viewState.measure(this);if(!Nt&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(At>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let Ft=[];Nt&4||([this.measureRequests,Ft]=[Ft,this.measureRequests]);let Ut=Ft.map(cn=>{try{return cn.read(this)}catch(hn){return logException(this.state,hn),BadMeasure}}),Wt=ViewUpdate.create(this,this.state,[]),Zt=!1,Kt=!1;Wt.flags|=Nt,dt?dt.flags|=Nt:dt=Wt,this.updateState=2,Wt.empty||(this.updatePlugins(Wt),this.inputState.update(Wt),this.updateAttrs(),Zt=this.docView.update(Wt));for(let cn=0;cn<Ft.length;cn++)if(Ut[cn]!=BadMeasure)try{let hn=Ft[cn];hn.write&&hn.write(Ut[cn],this)}catch(hn){logException(this.state,hn)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,Kt=!0;else{let cn=this.viewState.lineBlockAt(Dt.from).top-Dt.top;(cn>1||cn<-1)&&(this.scrollDOM.scrollTop+=cn,Kt=!0)}if(Zt&&this.docView.updateSelection(!0),this.viewport.from==Rt.from&&this.viewport.to==Rt.to&&!Kt&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(dt&&!dt.empty)for(let At of this.state.facet(updateListener))At(dt)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let lt=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),dt={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(dt["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,dt);let vt=this.observer.ignore(()=>{let St=updateAttrs(this.contentDOM,this.contentAttrs,dt),Et=updateAttrs(this.dom,this.editorAttrs,lt);return St||Et});return this.editorAttrs=lt,this.contentAttrs=dt,vt}showAnnouncements(lt){let dt=!0;for(let vt of lt)for(let St of vt.effects)if(St.is(EditorView.announce)){dt&&(this.announceDOM.textContent=""),dt=!1;let Et=this.announceDOM.appendChild(document.createElement("div"));Et.textContent=St.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(lt){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),lt){if(this.measureRequests.indexOf(lt)>-1)return;if(lt.key!=null){for(let dt=0;dt<this.measureRequests.length;dt++)if(this.measureRequests[dt].key===lt.key){this.measureRequests[dt]=lt;return}}this.measureRequests.push(lt)}}plugin(lt){let dt=this.pluginMap.get(lt);return(dt===void 0||dt&&dt.spec!=lt)&&this.pluginMap.set(lt,dt=this.plugins.find(vt=>vt.spec==lt)||null),dt&&dt.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(lt){return this.readMeasured(),this.viewState.elementAtHeight(lt)}lineBlockAtHeight(lt){return this.readMeasured(),this.viewState.lineBlockAtHeight(lt)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(lt){return this.viewState.lineBlockAt(lt)}get contentHeight(){return this.viewState.contentHeight}moveByChar(lt,dt,vt){return skipAtoms(this,lt,moveByChar(this,lt,dt,vt))}moveByGroup(lt,dt){return skipAtoms(this,lt,moveByChar(this,lt,dt,vt=>byGroup(this,lt.head,vt)))}moveToLineBoundary(lt,dt,vt=!0){return moveToLineBoundary(this,lt,dt,vt)}moveVertically(lt,dt,vt){return skipAtoms(this,lt,moveVertically(this,lt,dt,vt))}domAtPos(lt){return this.docView.domAtPos(lt)}posAtDOM(lt,dt=0){return this.docView.posFromDOM(lt,dt)}posAtCoords(lt,dt=!0){return this.readMeasured(),posAtCoords(this,lt,dt)}coordsAtPos(lt,dt=1){this.readMeasured();let vt=this.docView.coordsAt(lt,dt);if(!vt||vt.left==vt.right)return vt;let St=this.state.doc.lineAt(lt),Et=this.bidiSpans(St),Ct=Et[BidiSpan.find(Et,lt-St.from,-1,dt)];return flattenRect(vt,Ct.dir==Direction.LTR==dt>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(lt){return!this.state.facet(perLineTextDirection)||lt<this.viewport.from||lt>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(lt))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(lt){if(lt.length>MaxBidiLine)return trivialOrder(lt.length);let dt=this.textDirectionAt(lt.from);for(let St of this.bidiCache)if(St.from==lt.from&&St.dir==dt)return St.order;let vt=computeOrder(lt.text,dt);return this.bidiCache.push(new CachedOrder(lt.from,lt.to,dt,vt)),vt}get hasFocus(){var lt;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((lt=this.inputState)===null||lt===void 0?void 0:lt.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(lt){this._root!=lt&&(this._root=lt,this.observer.setWindow((lt.nodeType==9?lt:lt.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let lt of this.plugins)lt.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(lt,dt={}){return scrollIntoView$1.of(new ScrollTarget(typeof lt=="number"?EditorSelection.cursor(lt):lt,dt.y,dt.x,dt.yMargin,dt.xMargin))}static domEventHandlers(lt){return ViewPlugin.define(()=>({}),{eventHandlers:lt})}static theme(lt,dt){let vt=StyleModule.newName(),St=[theme.of(vt),styleModule.of(buildTheme(`.${vt}`,lt))];return dt&&dt.dark&&St.push(darkTheme.of(!0)),St}static baseTheme(lt){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,lt,lightDarkIDs)))}static findFromDOM(lt){var dt;let vt=lt.querySelector(".cm-content"),St=vt&&ContentView.get(vt)||ContentView.get(lt);return((dt=St==null?void 0:St.rootView)===null||dt===void 0?void 0:dt.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(lt,dt,vt,St){this.from=lt,this.to=dt,this.dir=vt,this.order=St}static update(lt,dt){if(dt.empty)return lt;let vt=[],St=lt.length?lt[lt.length-1].dir:Direction.LTR;for(let Et=Math.max(0,lt.length-10);Et<lt.length;Et++){let Ct=lt[Et];Ct.dir==St&&!dt.touchesRange(Ct.from,Ct.to)&&vt.push(new CachedOrder(dt.mapPos(Ct.from,1),dt.mapPos(Ct.to,-1),Ct.dir,Ct.order))}return vt}}function attrsFromFacet(ft,lt,dt){for(let vt=ft.state.facet(lt),St=vt.length-1;St>=0;St--){let Et=vt[St],Ct=typeof Et=="function"?Et(ft):Et;Ct&&combineAttrs(Ct,dt)}return dt}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(ft,lt){const dt=ft.split(/-(?!$)/);let vt=dt[dt.length-1];vt=="Space"&&(vt=" ");let St,Et,Ct,At;for(let Rt=0;Rt<dt.length-1;++Rt){const Dt=dt[Rt];if(/^(cmd|meta|m)$/i.test(Dt))At=!0;else if(/^a(lt)?$/i.test(Dt))St=!0;else if(/^(c|ctrl|control)$/i.test(Dt))Et=!0;else if(/^s(hift)?$/i.test(Dt))Ct=!0;else if(/^mod$/i.test(Dt))lt=="mac"?At=!0:Et=!0;else throw new Error("Unrecognized modifier name: "+Dt)}return St&&(vt="Alt-"+vt),Et&&(vt="Ctrl-"+vt),At&&(vt="Meta-"+vt),Ct&&(vt="Shift-"+vt),vt}function modifiers(ft,lt,dt){return lt.altKey&&(ft="Alt-"+ft),lt.ctrlKey&&(ft="Ctrl-"+ft),lt.metaKey&&(ft="Meta-"+ft),dt!==!1&&lt.shiftKey&&(ft="Shift-"+ft),ft}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(ft,lt){return runHandlers(getKeymap(lt.state),ft,lt,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(ft){let lt=ft.facet(keymap),dt=Keymaps.get(lt);return dt||Keymaps.set(lt,dt=buildKeymap(lt.reduce((vt,St)=>vt.concat(St),[]))),dt}function runScopeHandlers(ft,lt,dt){return runHandlers(getKeymap(ft.state),lt,ft,dt)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(ft,lt=currentPlatform){let dt=Object.create(null),vt=Object.create(null),St=(Ct,At)=>{let Rt=vt[Ct];if(Rt==null)vt[Ct]=At;else if(Rt!=At)throw new Error("Key binding "+Ct+" is used both as a regular binding and as a multi-stroke prefix")},Et=(Ct,At,Rt,Dt)=>{var Nt,Ft;let Ut=dt[Ct]||(dt[Ct]=Object.create(null)),Wt=At.split(/ (?!$)/).map(cn=>normalizeKeyName(cn,lt));for(let cn=1;cn<Wt.length;cn++){let hn=Wt.slice(0,cn).join(" ");St(hn,!0),Ut[hn]||(Ut[hn]={preventDefault:!0,run:[dn=>{let pn=storedPrefix={view:dn,prefix:hn,scope:Ct};return setTimeout(()=>{storedPrefix==pn&&(storedPrefix=null)},PrefixTimeout),!0}]})}let Zt=Wt.join(" ");St(Zt,!1);let Kt=Ut[Zt]||(Ut[Zt]={preventDefault:!1,run:((Ft=(Nt=Ut._any)===null||Nt===void 0?void 0:Nt.run)===null||Ft===void 0?void 0:Ft.slice())||[]});Rt&&Kt.run.push(Rt),Dt&&(Kt.preventDefault=!0)};for(let Ct of ft){let At=Ct.scope?Ct.scope.split(" "):["editor"];if(Ct.any)for(let Dt of At){let Nt=dt[Dt]||(dt[Dt]=Object.create(null));Nt._any||(Nt._any={preventDefault:!1,run:[]});for(let Ft in Nt)Nt[Ft].run.push(Ct.any)}let Rt=Ct[lt]||Ct.key;if(Rt)for(let Dt of At)Et(Dt,Rt,Ct.run,Ct.preventDefault),Ct.shift&&Et(Dt,"Shift-"+Rt,Ct.shift,Ct.preventDefault)}return dt}function runHandlers(ft,lt,dt,vt){let St=keyName(lt),Et=codePointAt(St,0),Ct=codePointSize(Et)==St.length&&St!=" ",At="",Rt=!1;storedPrefix&&storedPrefix.view==dt&&storedPrefix.scope==vt&&(At=storedPrefix.prefix+" ",(Rt=modifierCodes.indexOf(lt.keyCode)<0)&&(storedPrefix=null));let Dt=new Set,Nt=Zt=>{if(Zt){for(let Kt of Zt.run)if(!Dt.has(Kt)&&(Dt.add(Kt),Kt(dt,lt)))return!0;Zt.preventDefault&&(Rt=!0)}return!1},Ft=ft[vt],Ut,Wt;if(Ft){if(Nt(Ft[At+modifiers(St,lt,!Ct)]))return!0;if(Ct&&(lt.altKey||lt.metaKey||lt.ctrlKey)&&!(browser.windows&&lt.ctrlKey&&lt.altKey)&&(Ut=base[lt.keyCode])&&Ut!=St){if(Nt(Ft[At+modifiers(Ut,lt,!0)]))return!0;if(lt.shiftKey&&(Wt=shift[lt.keyCode])!=St&&Wt!=Ut&&Nt(Ft[At+modifiers(Wt,lt,!1)]))return!0}else if(Ct&&lt.shiftKey&&Nt(Ft[At+modifiers(St,lt,!0)]))return!0;if(Nt(Ft._any))return!0}return Rt}class RectangleMarker{constructor(lt,dt,vt,St,Et){this.className=lt,this.left=dt,this.top=vt,this.width=St,this.height=Et}draw(){let lt=document.createElement("div");return lt.className=this.className,this.adjust(lt),lt}update(lt,dt){return dt.className!=this.className?!1:(this.adjust(lt),!0)}adjust(lt){lt.style.left=this.left+"px",lt.style.top=this.top+"px",this.width!=null&&(lt.style.width=this.width+"px"),lt.style.height=this.height+"px"}eq(lt){return this.left==lt.left&&this.top==lt.top&&this.width==lt.width&&this.height==lt.height&&this.className==lt.className}static forRange(lt,dt,vt){if(vt.empty){let St=lt.coordsAtPos(vt.head,vt.assoc||1);if(!St)return[];let Et=getBase(lt);return[new RectangleMarker(dt,St.left-Et.left,St.top-Et.top,null,St.bottom-St.top)]}else return rectanglesForRange(lt,dt,vt)}}function getBase(ft){let lt=ft.scrollDOM.getBoundingClientRect();return{left:(ft.textDirection==Direction.LTR?lt.left:lt.right-ft.scrollDOM.clientWidth)-ft.scrollDOM.scrollLeft,top:lt.top-ft.scrollDOM.scrollTop}}function wrappedLine(ft,lt,dt){let vt=EditorSelection.cursor(lt);return{from:Math.max(dt.from,ft.moveToLineBoundary(vt,!1,!0).from),to:Math.min(dt.to,ft.moveToLineBoundary(vt,!0,!0).from),type:BlockType.Text}}function blockAt(ft,lt){let dt=ft.lineBlockAt(lt);if(Array.isArray(dt.type)){for(let vt of dt.type)if(vt.to>lt||vt.to==lt&&(vt.to==dt.to||vt.type==BlockType.Text))return vt}return dt}function rectanglesForRange(ft,lt,dt){if(dt.to<=ft.viewport.from||dt.from>=ft.viewport.to)return[];let vt=Math.max(dt.from,ft.viewport.from),St=Math.min(dt.to,ft.viewport.to),Et=ft.textDirection==Direction.LTR,Ct=ft.contentDOM,At=Ct.getBoundingClientRect(),Rt=getBase(ft),Dt=window.getComputedStyle(Ct.firstChild),Nt=At.left+parseInt(Dt.paddingLeft)+Math.min(0,parseInt(Dt.textIndent)),Ft=At.right-parseInt(Dt.paddingRight),Ut=blockAt(ft,vt),Wt=blockAt(ft,St),Zt=Ut.type==BlockType.Text?Ut:null,Kt=Wt.type==BlockType.Text?Wt:null;if(ft.lineWrapping&&(Zt&&(Zt=wrappedLine(ft,vt,Zt)),Kt&&(Kt=wrappedLine(ft,St,Kt))),Zt&&Kt&&Zt.from==Kt.from)return hn(dn(dt.from,dt.to,Zt));{let gn=Zt?dn(dt.from,null,Zt):pn(Ut,!1),vn=Kt?dn(null,dt.to,Kt):pn(Wt,!0),bn=[];return(Zt||Ut).to<(Kt||Wt).from-1?bn.push(cn(Nt,gn.bottom,Ft,vn.top)):gn.bottom<vn.top&&ft.elementAtHeight((gn.bottom+vn.top)/2).type==BlockType.Text&&(gn.bottom=vn.top=(gn.bottom+vn.top)/2),hn(gn).concat(bn).concat(hn(vn))}function cn(gn,vn,bn,$n){return new RectangleMarker(lt,gn-Rt.left,vn-Rt.top-.01,bn-gn,$n-vn+.01)}function hn({top:gn,bottom:vn,horizontal:bn}){let $n=[];for(let Tn=0;Tn<bn.length;Tn+=2)$n.push(cn(bn[Tn],gn,bn[Tn+1],vn));return $n}function dn(gn,vn,bn){let $n=1e9,Tn=-1e9,In=[];function Pn(Gn,xn,Qn,qn,nr){let Un=ft.coordsAtPos(Gn,Gn==bn.to?-2:2),Nn=ft.coordsAtPos(Qn,Qn==bn.from?2:-2);$n=Math.min(Un.top,Nn.top,$n),Tn=Math.max(Un.bottom,Nn.bottom,Tn),nr==Direction.LTR?In.push(Et&&xn?Nt:Un.left,Et&&qn?Ft:Nn.right):In.push(!Et&&qn?Nt:Nn.left,!Et&&xn?Ft:Un.right)}let zn=gn??bn.from,An=vn??bn.to;for(let Gn of ft.visibleRanges)if(Gn.to>zn&&Gn.from<An)for(let xn=Math.max(Gn.from,zn),Qn=Math.min(Gn.to,An);;){let qn=ft.state.doc.lineAt(xn);for(let nr of ft.bidiSpans(qn)){let Un=nr.from+qn.from,Nn=nr.to+qn.from;if(Un>=Qn)break;Nn>xn&&Pn(Math.max(Un,xn),gn==null&&Un<=zn,Math.min(Nn,Qn),vn==null&&Nn>=An,nr.dir)}if(xn=qn.to+1,xn>=Qn)break}return In.length==0&&Pn(zn,gn==null,An,vn==null,ft.textDirection),{top:$n,bottom:Tn,horizontal:In}}function pn(gn,vn){let bn=At.top+(vn?gn.top:gn.bottom);return{top:bn,bottom:bn,horizontal:[]}}}function sameMarker(ft,lt){return ft.constructor==lt.constructor&&ft.eq(lt)}class LayerView{constructor(lt,dt){this.view=lt,this.layer=dt,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=lt.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),dt.above&&this.dom.classList.add("cm-layer-above"),dt.class&&this.dom.classList.add(dt.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(lt.state),lt.requestMeasure(this.measureReq),dt.mount&&dt.mount(this.dom,lt)}update(lt){lt.startState.facet(layerOrder)!=lt.state.facet(layerOrder)&&this.setOrder(lt.state),(this.layer.update(lt,this.dom)||lt.geometryChanged)&&lt.view.requestMeasure(this.measureReq)}setOrder(lt){let dt=0,vt=lt.facet(layerOrder);for(;dt<vt.length&&vt[dt]!=this.layer;)dt++;this.dom.style.zIndex=String((this.layer.above?150:-1)-dt)}measure(){return this.layer.markers(this.view)}draw(lt){if(lt.length!=this.drawn.length||lt.some((dt,vt)=>!sameMarker(dt,this.drawn[vt]))){let dt=this.dom.firstChild,vt=0;for(let St of lt)St.update&&dt&&St.constructor&&this.drawn[vt].constructor&&St.update(dt,this.drawn[vt])?(dt=dt.nextSibling,vt++):this.dom.insertBefore(St.draw(),dt);for(;dt;){let St=dt.nextSibling;dt.remove(),dt=St}this.drawn=lt}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(ft){return[ViewPlugin.define(lt=>new LayerView(lt,ft)),layerOrder.of(ft)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(ft){return combineConfig(ft,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(lt,dt)=>Math.min(lt,dt),drawRangeCursor:(lt,dt)=>lt||dt})}});function drawSelection(ft={}){return[selectionConfig.of(ft),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(ft){return ft.startState.facet(selectionConfig)!=ft.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(ft){let{state:lt}=ft,dt=lt.facet(selectionConfig),vt=[];for(let St of lt.selection.ranges){let Et=St==lt.selection.main;if(St.empty?!Et||CanHidePrimary:dt.drawRangeCursor){let Ct=Et?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",At=St.empty?St:EditorSelection.cursor(St.head,St.head>St.anchor?-1:1);for(let Rt of RectangleMarker.forRange(ft,Ct,At))vt.push(Rt)}}return vt},update(ft,lt){ft.transactions.some(vt=>vt.selection)&&(lt.style.animationName=lt.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let dt=configChanged(ft);return dt&&setBlinkRate(ft.state,lt),ft.docChanged||ft.selectionSet||dt},mount(ft,lt){setBlinkRate(lt.state,ft)},class:"cm-cursorLayer"});function setBlinkRate(ft,lt){lt.style.animationDuration=ft.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(ft){return ft.state.selection.ranges.map(lt=>lt.empty?[]:RectangleMarker.forRange(ft,"cm-selectionBackground",lt)).reduce((lt,dt)=>lt.concat(dt))},update(ft,lt){return ft.docChanged||ft.selectionSet||ft.viewportChanged||configChanged(ft)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(ft,lt){return ft==null?null:lt.mapPos(ft)}}),dropCursorPos=StateField.define({create(){return null},update(ft,lt){return ft!=null&&(ft=lt.changes.mapPos(ft)),lt.effects.reduce((dt,vt)=>vt.is(setDropCursorPos)?vt.value:dt,ft)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(ft){var lt;let dt=ft.state.field(dropCursorPos);dt==null?this.cursor!=null&&((lt=this.cursor)===null||lt===void 0||lt.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(ft.startState.field(dropCursorPos)!=dt||ft.docChanged||ft.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let ft=this.view.state.field(dropCursorPos),lt=ft!=null&&this.view.coordsAtPos(ft);if(!lt)return null;let dt=this.view.scrollDOM.getBoundingClientRect();return{left:lt.left-dt.left+this.view.scrollDOM.scrollLeft,top:lt.top-dt.top+this.view.scrollDOM.scrollTop,height:lt.bottom-lt.top}}drawCursor(ft){this.cursor&&(ft?(this.cursor.style.left=ft.left+"px",this.cursor.style.top=ft.top+"px",this.cursor.style.height=ft.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(ft){this.view.state.field(dropCursorPos)!=ft&&this.view.dispatch({effects:setDropCursorPos.of(ft)})}},{eventHandlers:{dragover(ft){this.setDropPos(this.view.posAtCoords({x:ft.clientX,y:ft.clientY}))},dragleave(ft){(ft.target==this.view.contentDOM||!this.view.contentDOM.contains(ft.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(ft,lt,dt,vt,St){lt.lastIndex=0;for(let Et=ft.iterRange(dt,vt),Ct=dt,At;!Et.next().done;Ct+=Et.value.length)if(!Et.lineBreak)for(;At=lt.exec(Et.value);)St(Ct+At.index,At)}function matchRanges(ft,lt){let dt=ft.visibleRanges;if(dt.length==1&&dt[0].from==ft.viewport.from&&dt[0].to==ft.viewport.to)return dt;let vt=[];for(let{from:St,to:Et}of dt)St=Math.max(ft.state.doc.lineAt(St).from,St-lt),Et=Math.min(ft.state.doc.lineAt(Et).to,Et+lt),vt.length&&vt[vt.length-1].to>=St?vt[vt.length-1].to=Et:vt.push({from:St,to:Et});return vt}class MatchDecorator{constructor(lt){const{regexp:dt,decoration:vt,decorate:St,boundary:Et,maxLength:Ct=1e3}=lt;if(!dt.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=dt,St)this.addMatch=(At,Rt,Dt,Nt)=>St(Nt,Dt,Dt+At[0].length,At,Rt);else if(typeof vt=="function")this.addMatch=(At,Rt,Dt,Nt)=>{let Ft=vt(At,Rt,Dt);Ft&&Nt(Dt,Dt+At[0].length,Ft)};else if(vt)this.addMatch=(At,Rt,Dt,Nt)=>Nt(Dt,Dt+At[0].length,vt);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=Et,this.maxLength=Ct}createDeco(lt){let dt=new RangeSetBuilder,vt=dt.add.bind(dt);for(let{from:St,to:Et}of matchRanges(lt,this.maxLength))iterMatches(lt.state.doc,this.regexp,St,Et,(Ct,At)=>this.addMatch(At,lt,Ct,vt));return dt.finish()}updateDeco(lt,dt){let vt=1e9,St=-1;return lt.docChanged&&lt.changes.iterChanges((Et,Ct,At,Rt)=>{Rt>lt.view.viewport.from&&At<lt.view.viewport.to&&(vt=Math.min(At,vt),St=Math.max(Rt,St))}),lt.viewportChanged||St-vt>1e3?this.createDeco(lt.view):St>-1?this.updateRange(lt.view,dt.map(lt.changes),vt,St):dt}updateRange(lt,dt,vt,St){for(let Et of lt.visibleRanges){let Ct=Math.max(Et.from,vt),At=Math.min(Et.to,St);if(At>Ct){let Rt=lt.state.doc.lineAt(Ct),Dt=Rt.to<At?lt.state.doc.lineAt(At):Rt,Nt=Math.max(Et.from,Rt.from),Ft=Math.min(Et.to,Dt.to);if(this.boundary){for(;Ct>Rt.from;Ct--)if(this.boundary.test(Rt.text[Ct-1-Rt.from])){Nt=Ct;break}for(;At<Dt.to;At++)if(this.boundary.test(Dt.text[At-Dt.from])){Ft=At;break}}let Ut=[],Wt,Zt=(Kt,cn,hn)=>Ut.push(hn.range(Kt,cn));if(Rt==Dt)for(this.regexp.lastIndex=Nt-Rt.from;(Wt=this.regexp.exec(Rt.text))&&Wt.index<Ft-Rt.from;)this.addMatch(Wt,lt,Wt.index+Rt.from,Zt);else iterMatches(lt.state.doc,this.regexp,Nt,Ft,(Kt,cn)=>this.addMatch(cn,lt,Kt,Zt));dt=dt.update({filterFrom:Nt,filterTo:Ft,filter:(Kt,cn)=>Kt<Nt||cn>Ft,add:Ut})}}return dt}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var ft;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let lt=document.body.style;_supportsTabSize=((ft=lt.tabSize)!==null&&ft!==void 0?ft:lt.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(ft){let lt=combineConfig(ft,{render:null,specialChars:Specials,addSpecialChars:null});return(lt.replaceTabs=!supportsTabSize())&&(lt.specialChars=new RegExp("	|"+lt.specialChars.source,UnicodeRegexpSupport)),lt.addSpecialChars&&(lt.specialChars=new RegExp(lt.specialChars.source+"|"+lt.addSpecialChars.source,UnicodeRegexpSupport)),lt}});function highlightSpecialChars(ft={}){return[specialCharConfig.of(ft),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(ft.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(ft)}makeDecorator(ft){return new MatchDecorator({regexp:ft.specialChars,decoration:(lt,dt,vt)=>{let{doc:St}=dt.state,Et=codePointAt(lt[0],0);if(Et==9){let Ct=St.lineAt(vt),At=dt.state.tabSize,Rt=countColumn(Ct.text,At,vt-Ct.from);return Decoration.replace({widget:new TabWidget((At-Rt%At)*this.view.defaultCharacterWidth)})}return this.decorationCache[Et]||(this.decorationCache[Et]=Decoration.replace({widget:new SpecialCharWidget(ft,Et)}))},boundary:ft.replaceTabs?void 0:/[^]/})}update(ft){let lt=ft.state.facet(specialCharConfig);ft.startState.facet(specialCharConfig)!=lt?(this.decorator=this.makeDecorator(lt),this.decorations=this.decorator.createDeco(ft.view)):this.decorations=this.decorator.updateDeco(ft,this.decorations)}},{decorations:ft=>ft.decorations}))}const DefaultPlaceholder="";function placeholder$1(ft){return ft>=32?DefaultPlaceholder:ft==10?"":String.fromCharCode(9216+ft)}class SpecialCharWidget extends WidgetType{constructor(lt,dt){super(),this.options=lt,this.code=dt}eq(lt){return lt.code==this.code}toDOM(lt){let dt=placeholder$1(this.code),vt=lt.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),St=this.options.render&&this.options.render(this.code,vt,dt);if(St)return St;let Et=document.createElement("span");return Et.textContent=dt,Et.title=vt,Et.setAttribute("aria-label",vt),Et.className="cm-specialChar",Et}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(lt){super(),this.width=lt}eq(lt){return lt.width==this.width}toDOM(){let lt=document.createElement("span");return lt.textContent="	",lt.className="cm-tab",lt.style.width=this.width+"px",lt}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.decorations=this.getDeco(ft)}update(ft){(ft.docChanged||ft.selectionSet)&&(this.decorations=this.getDeco(ft.view))}getDeco(ft){let lt=-1,dt=[];for(let vt of ft.state.selection.ranges){let St=ft.lineBlockAt(vt.head);St.from>lt&&(dt.push(lineDeco.range(St.from)),lt=St.from)}return Decoration.set(dt)}},{decorations:ft=>ft.decorations});class Placeholder extends WidgetType{constructor(lt){super(),this.content=lt}toDOM(){let lt=document.createElement("span");return lt.className="cm-placeholder",lt.style.pointerEvents="none",lt.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?lt.setAttribute("aria-label","placeholder "+this.content):lt.setAttribute("aria-hidden","true"),lt}ignoreEvent(){return!1}}function placeholder(ft){return ViewPlugin.fromClass(class{constructor(lt){this.view=lt,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(ft),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:lt=>lt.decorations})}const MaxOff=2e3;function rectangleFor(ft,lt,dt){let vt=Math.min(lt.line,dt.line),St=Math.max(lt.line,dt.line),Et=[];if(lt.off>MaxOff||dt.off>MaxOff||lt.col<0||dt.col<0){let Ct=Math.min(lt.off,dt.off),At=Math.max(lt.off,dt.off);for(let Rt=vt;Rt<=St;Rt++){let Dt=ft.doc.line(Rt);Dt.length<=At&&Et.push(EditorSelection.range(Dt.from+Ct,Dt.to+At))}}else{let Ct=Math.min(lt.col,dt.col),At=Math.max(lt.col,dt.col);for(let Rt=vt;Rt<=St;Rt++){let Dt=ft.doc.line(Rt),Nt=findColumn(Dt.text,Ct,ft.tabSize,!0);if(Nt<0)Et.push(EditorSelection.cursor(Dt.to));else{let Ft=findColumn(Dt.text,At,ft.tabSize);Et.push(EditorSelection.range(Dt.from+Nt,Dt.from+Ft))}}}return Et}function absoluteColumn(ft,lt){let dt=ft.coordsAtPos(ft.viewport.from);return dt?Math.round(Math.abs((dt.left-lt)/ft.defaultCharacterWidth)):-1}function getPos(ft,lt){let dt=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1),vt=ft.state.doc.lineAt(dt),St=dt-vt.from,Et=St>MaxOff?-1:St==vt.length?absoluteColumn(ft,lt.clientX):countColumn(vt.text,ft.state.tabSize,dt-vt.from);return{line:vt.number,col:Et,off:St}}function rectangleSelectionStyle(ft,lt){let dt=getPos(ft,lt),vt=ft.state.selection;return dt?{update(St){if(St.docChanged){let Et=St.changes.mapPos(St.startState.doc.line(dt.line).from),Ct=St.state.doc.lineAt(Et);dt={line:Ct.number,col:dt.col,off:Math.min(dt.off,Ct.length)},vt=vt.map(St.changes)}},get(St,Et,Ct){let At=getPos(ft,St);if(!At)return vt;let Rt=rectangleFor(ft.state,dt,At);return Rt.length?Ct?EditorSelection.create(Rt.concat(vt.ranges)):EditorSelection.create(Rt):vt}}:null}function rectangularSelection(ft){let lt=(ft==null?void 0:ft.eventFilter)||(dt=>dt.altKey&&dt.button==0);return EditorView.mouseSelectionStyle.of((dt,vt)=>lt(vt)?rectangleSelectionStyle(dt,vt):null)}const keys={Alt:[18,ft=>ft.altKey],Control:[17,ft=>ft.ctrlKey],Shift:[16,ft=>ft.shiftKey],Meta:[91,ft=>ft.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(ft={}){let[lt,dt]=keys[ft.key||"Alt"],vt=ViewPlugin.fromClass(class{constructor(St){this.view=St,this.isDown=!1}set(St){this.isDown!=St&&(this.isDown=St,this.view.update([]))}},{eventHandlers:{keydown(St){this.set(St.keyCode==lt||dt(St))},keyup(St){(St.keyCode==lt||!dt(St))&&this.set(!1)},mousemove(St){this.set(dt(St))}}});return[vt,EditorView.contentAttributes.of(St=>{var Et;return!((Et=St.plugin(vt))===null||Et===void 0)&&Et.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(lt,dt,vt){this.facet=dt,this.createTooltipView=vt,this.input=lt.state.facet(dt),this.tooltips=this.input.filter(St=>St),this.tooltipViews=this.tooltips.map(vt)}update(lt){var dt;let vt=lt.state.facet(this.facet),St=vt.filter(Ct=>Ct);if(vt===this.input){for(let Ct of this.tooltipViews)Ct.update&&Ct.update(lt);return!1}let Et=[];for(let Ct=0;Ct<St.length;Ct++){let At=St[Ct],Rt=-1;if(At){for(let Dt=0;Dt<this.tooltips.length;Dt++){let Nt=this.tooltips[Dt];Nt&&Nt.create==At.create&&(Rt=Dt)}if(Rt<0)Et[Ct]=this.createTooltipView(At);else{let Dt=Et[Ct]=this.tooltipViews[Rt];Dt.update&&Dt.update(lt)}}}for(let Ct of this.tooltipViews)Et.indexOf(Ct)<0&&(Ct.dom.remove(),(dt=Ct.destroy)===null||dt===void 0||dt.call(Ct));return this.input=vt,this.tooltips=St,this.tooltipViews=Et,!0}}function windowSpace(ft){let{win:lt}=ft;return{top:0,left:0,bottom:lt.innerHeight,right:lt.innerWidth}}const tooltipConfig=Facet.define({combine:ft=>{var lt,dt,vt;return{position:browser.ios?"absolute":((lt=ft.find(St=>St.position))===null||lt===void 0?void 0:lt.position)||"fixed",parent:((dt=ft.find(St=>St.parent))===null||dt===void 0?void 0:dt.parent)||null,tooltipSpace:((vt=ft.find(St=>St.tooltipSpace))===null||vt===void 0?void 0:vt.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let lt=ft.state.facet(tooltipConfig);this.position=lt.position,this.parent=lt.parent,this.classes=ft.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(ft,showTooltip,dt=>this.createTooltip(dt)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(dt=>{Date.now()>this.lastTransaction-50&&dt.length>0&&dt[dt.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),ft.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let ft of this.manager.tooltipViews)this.intersectionObserver.observe(ft.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(ft){ft.transactions.length&&(this.lastTransaction=Date.now());let lt=this.manager.update(ft);lt&&this.observeIntersection();let dt=lt||ft.geometryChanged,vt=ft.state.facet(tooltipConfig);if(vt.position!=this.position){this.position=vt.position;for(let St of this.manager.tooltipViews)St.dom.style.position=this.position;dt=!0}if(vt.parent!=this.parent){this.parent&&this.container.remove(),this.parent=vt.parent,this.createContainer();for(let St of this.manager.tooltipViews)this.container.appendChild(St.dom);dt=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);dt&&this.maybeMeasure()}createTooltip(ft){let lt=ft.create(this.view);if(lt.dom.classList.add("cm-tooltip"),ft.arrow&&!lt.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let dt=document.createElement("div");dt.className="cm-tooltip-arrow",lt.dom.appendChild(dt)}return lt.dom.style.position=this.position,lt.dom.style.top=Outside,this.container.appendChild(lt.dom),lt.mount&&lt.mount(this.view),lt}destroy(){var ft,lt;this.view.win.removeEventListener("resize",this.measureSoon);for(let dt of this.manager.tooltipViews)dt.dom.remove(),(ft=dt.destroy)===null||ft===void 0||ft.call(dt);(lt=this.intersectionObserver)===null||lt===void 0||lt.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let ft=this.view.dom.getBoundingClientRect();return{editor:ft,parent:this.parent?this.container.getBoundingClientRect():ft,pos:this.manager.tooltips.map((lt,dt)=>{let vt=this.manager.tooltipViews[dt];return vt.getCoords?vt.getCoords(lt.pos):this.view.coordsAtPos(lt.pos)}),size:this.manager.tooltipViews.map(({dom:lt})=>lt.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(ft){var lt;let{editor:dt,space:vt}=ft,St=[];for(let Et=0;Et<this.manager.tooltips.length;Et++){let Ct=this.manager.tooltips[Et],At=this.manager.tooltipViews[Et],{dom:Rt}=At,Dt=ft.pos[Et],Nt=ft.size[Et];if(!Dt||Dt.bottom<=Math.max(dt.top,vt.top)||Dt.top>=Math.min(dt.bottom,vt.bottom)||Dt.right<Math.max(dt.left,vt.left)-.1||Dt.left>Math.min(dt.right,vt.right)+.1){Rt.style.top=Outside;continue}let Ft=Ct.arrow?At.dom.querySelector(".cm-tooltip-arrow"):null,Ut=Ft?7:0,Wt=Nt.right-Nt.left,Zt=(lt=knownHeight.get(At))!==null&&lt!==void 0?lt:Nt.bottom-Nt.top,Kt=At.offset||noOffset,cn=this.view.textDirection==Direction.LTR,hn=Nt.width>vt.right-vt.left?cn?vt.left:vt.right-Nt.width:cn?Math.min(Dt.left-(Ft?14:0)+Kt.x,vt.right-Wt):Math.max(vt.left,Dt.left-Wt+(Ft?14:0)-Kt.x),dn=!!Ct.above;!Ct.strictSide&&(dn?Dt.top-(Nt.bottom-Nt.top)-Kt.y<vt.top:Dt.bottom+(Nt.bottom-Nt.top)+Kt.y>vt.bottom)&&dn==vt.bottom-Dt.bottom>Dt.top-vt.top&&(dn=!dn);let pn=(dn?Dt.top-vt.top:vt.bottom-Dt.bottom)-Ut;if(pn<Zt&&At.resize!==!1){if(pn<this.view.defaultLineHeight){Rt.style.top=Outside;continue}knownHeight.set(At,Zt),Rt.style.height=(Zt=pn)+"px"}else Rt.style.height&&(Rt.style.height="");let gn=dn?Dt.top-Zt-Ut-Kt.y:Dt.bottom+Ut+Kt.y,vn=hn+Wt;if(At.overlap!==!0)for(let bn of St)bn.left<vn&&bn.right>hn&&bn.top<gn+Zt&&bn.bottom>gn&&(gn=dn?bn.top-Zt-2-Ut:bn.bottom+Ut+2);this.position=="absolute"?(Rt.style.top=gn-ft.parent.top+"px",Rt.style.left=hn-ft.parent.left+"px"):(Rt.style.top=gn+"px",Rt.style.left=hn+"px"),Ft&&(Ft.style.left=`${Dt.left+(cn?Kt.x:-Kt.x)-(hn+14-7)}px`),At.overlap!==!0&&St.push({left:hn,top:gn,right:vn,bottom:gn+Zt}),Rt.classList.toggle("cm-tooltip-above",dn),Rt.classList.toggle("cm-tooltip-below",!dn),At.positioned&&At.positioned(ft.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let ft of this.manager.tooltipViews)ft.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(lt){this.view=lt,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(lt,showHoverTooltip,dt=>this.createHostedView(dt))}static create(lt){return new HoverTooltipHost(lt)}createHostedView(lt){let dt=lt.create(this.view);return dt.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(dt.dom),this.mounted&&dt.mount&&dt.mount(this.view),dt}mount(lt){for(let dt of this.manager.tooltipViews)dt.mount&&dt.mount(lt);this.mounted=!0}positioned(lt){for(let dt of this.manager.tooltipViews)dt.positioned&&dt.positioned(lt)}update(lt){this.manager.update(lt)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],ft=>{let lt=ft.facet(showHoverTooltip).filter(dt=>dt);return lt.length===0?null:{pos:Math.min(...lt.map(dt=>dt.pos)),end:Math.max(...lt.filter(dt=>dt.end!=null).map(dt=>dt.end)),create:HoverTooltipHost.create,above:lt[0].above,arrow:lt.some(dt=>dt.arrow)}});class HoverPlugin{constructor(lt,dt,vt,St,Et){this.view=lt,this.source=dt,this.field=vt,this.setHover=St,this.hoverTime=Et,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:lt.dom,time:0},this.checkHover=this.checkHover.bind(this),lt.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),lt.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let lt=Date.now()-this.lastMove.time;lt<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-lt):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:lt}=this,dt=this.view.contentDOM.contains(lt.target)?this.view.posAtCoords(lt):null;if(dt==null)return;let vt=this.view.coordsAtPos(dt);if(vt==null||lt.y<vt.top||lt.y>vt.bottom||lt.x<vt.left-this.view.defaultCharacterWidth||lt.x>vt.right+this.view.defaultCharacterWidth)return;let St=this.view.bidiSpans(this.view.state.doc.lineAt(dt)).find(At=>At.from<=dt&&At.to>=dt),Et=St&&St.dir==Direction.RTL?-1:1,Ct=this.source(this.view,dt,lt.x<vt.left?-Et:Et);if(Ct!=null&&Ct.then){let At=this.pending={pos:dt};Ct.then(Rt=>{this.pending==At&&(this.pending=null,Rt&&this.view.dispatch({effects:this.setHover.of(Rt)}))},Rt=>logException(this.view.state,Rt,"hover tooltip"))}else Ct&&this.view.dispatch({effects:this.setHover.of(Ct)})}mousemove(lt){var dt;this.lastMove={x:lt.clientX,y:lt.clientY,target:lt.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let vt=this.active;if(vt&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:St}=vt||this.pending,Et=(dt=vt==null?void 0:vt.end)!==null&&dt!==void 0?dt:St;(St==Et?this.view.posAtCoords(this.lastMove)!=St:!isOverRange(this.view,St,Et,lt.clientX,lt.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(lt){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(lt.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(ft){for(let lt=ft;lt;lt=lt.parentNode)if(lt.nodeType==1&&lt.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(ft,lt,dt,vt,St,Et){let Ct=document.createRange(),At=ft.domAtPos(lt),Rt=ft.domAtPos(dt);Ct.setEnd(Rt.node,Rt.offset),Ct.setStart(At.node,At.offset);let Dt=Ct.getClientRects();Ct.detach();for(let Nt=0;Nt<Dt.length;Nt++){let Ft=Dt[Nt];if(Math.max(Ft.top-St,St-Ft.bottom,Ft.left-vt,vt-Ft.right)<=Et)return!0}return!1}function hoverTooltip(ft,lt={}){let dt=StateEffect.define(),vt=StateField.define({create(){return null},update(St,Et){if(St&&(lt.hideOnChange&&(Et.docChanged||Et.selection)||lt.hideOn&&lt.hideOn(Et,St)))return null;if(St&&Et.docChanged){let Ct=Et.changes.mapPos(St.pos,-1,MapMode.TrackDel);if(Ct==null)return null;let At=Object.assign(Object.create(null),St);At.pos=Ct,St.end!=null&&(At.end=Et.changes.mapPos(St.end)),St=At}for(let Ct of Et.effects)Ct.is(dt)&&(St=Ct.value),Ct.is(closeHoverTooltipEffect)&&(St=null);return St},provide:St=>showHoverTooltip.from(St)});return[vt,ViewPlugin.define(St=>new HoverPlugin(St,ft,vt,dt,lt.hoverTime||300)),showHoverTooltipHost]}function getTooltip(ft,lt){let dt=ft.plugin(tooltipPlugin);if(!dt)return null;let vt=dt.manager.tooltips.indexOf(lt);return vt<0?null:dt.manager.tooltipViews[vt]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(ft){let lt,dt;for(let vt of ft)lt=lt||vt.topContainer,dt=dt||vt.bottomContainer;return{topContainer:lt,bottomContainer:dt}}});function getPanel(ft,lt){let dt=ft.plugin(panelPlugin),vt=dt?dt.specs.indexOf(lt):-1;return vt>-1?dt.panels[vt]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(ft){this.input=ft.state.facet(showPanel),this.specs=this.input.filter(dt=>dt),this.panels=this.specs.map(dt=>dt(ft));let lt=ft.state.facet(panelConfig);this.top=new PanelGroup(ft,!0,lt.topContainer),this.bottom=new PanelGroup(ft,!1,lt.bottomContainer),this.top.sync(this.panels.filter(dt=>dt.top)),this.bottom.sync(this.panels.filter(dt=>!dt.top));for(let dt of this.panels)dt.dom.classList.add("cm-panel"),dt.mount&&dt.mount()}update(ft){let lt=ft.state.facet(panelConfig);this.top.container!=lt.topContainer&&(this.top.sync([]),this.top=new PanelGroup(ft.view,!0,lt.topContainer)),this.bottom.container!=lt.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(ft.view,!1,lt.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let dt=ft.state.facet(showPanel);if(dt!=this.input){let vt=dt.filter(Rt=>Rt),St=[],Et=[],Ct=[],At=[];for(let Rt of vt){let Dt=this.specs.indexOf(Rt),Nt;Dt<0?(Nt=Rt(ft.view),At.push(Nt)):(Nt=this.panels[Dt],Nt.update&&Nt.update(ft)),St.push(Nt),(Nt.top?Et:Ct).push(Nt)}this.specs=vt,this.panels=St,this.top.sync(Et),this.bottom.sync(Ct);for(let Rt of At)Rt.dom.classList.add("cm-panel"),Rt.mount&&Rt.mount()}else for(let vt of this.panels)vt.update&&vt.update(ft)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:ft=>EditorView.scrollMargins.of(lt=>{let dt=lt.plugin(ft);return dt&&{top:dt.top.scrollMargin(),bottom:dt.bottom.scrollMargin()}})});class PanelGroup{constructor(lt,dt,vt){this.view=lt,this.top=dt,this.container=vt,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(lt){for(let dt of this.panels)dt.destroy&&lt.indexOf(dt)<0&&dt.destroy();this.panels=lt,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let dt=this.container||this.view.dom;dt.insertBefore(this.dom,this.top?dt.firstChild:null)}let lt=this.dom.firstChild;for(let dt of this.panels)if(dt.dom.parentNode==this.dom){for(;lt!=dt.dom;)lt=rm(lt);lt=lt.nextSibling}else this.dom.insertBefore(dt.dom,lt);for(;lt;)lt=rm(lt)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let lt of this.classes.split(" "))lt&&this.container.classList.remove(lt);for(let lt of(this.classes=this.view.themeClasses).split(" "))lt&&this.container.classList.add(lt)}}}function rm(ft){let lt=ft.nextSibling;return ft.remove(),lt}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(lt){return this==lt||this.constructor==lt.constructor&&this.eq(lt)}eq(lt){return!1}destroy(lt){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(ft){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),ft))]}const unfixGutters=Facet.define({combine:ft=>ft.some(lt=>lt)});function gutters(ft){let lt=[gutterView];return ft&&ft.fixed===!1&&lt.push(unfixGutters.of(!0)),lt}const gutterView=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.prevViewport=ft.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=ft.state.facet(activeGutters).map(lt=>new SingleGutterView(ft,lt));for(let lt of this.gutters)this.dom.appendChild(lt.dom);this.fixed=!ft.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),ft.scrollDOM.insertBefore(this.dom,ft.contentDOM)}update(ft){if(this.updateGutters(ft)){let lt=this.prevViewport,dt=ft.view.viewport,vt=Math.min(lt.to,dt.to)-Math.max(lt.from,dt.from);this.syncGutters(vt<(dt.to-dt.from)*.8)}ft.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=ft.view.viewport}syncGutters(ft){let lt=this.dom.nextSibling;ft&&this.dom.remove();let dt=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),vt=[],St=this.gutters.map(Et=>new UpdateContext(Et,this.view.viewport,-this.view.documentPadding.top));for(let Et of this.view.viewportLineBlocks){let Ct;if(Array.isArray(Et.type)){for(let At of Et.type)if(At.type==BlockType.Text){Ct=At;break}}else Ct=Et.type==BlockType.Text?Et:void 0;if(Ct){vt.length&&(vt=[]),advanceCursor(dt,vt,Et.from);for(let At of St)At.line(this.view,Ct,vt)}}for(let Et of St)Et.finish();ft&&this.view.scrollDOM.insertBefore(this.dom,lt)}updateGutters(ft){let lt=ft.startState.facet(activeGutters),dt=ft.state.facet(activeGutters),vt=ft.docChanged||ft.heightChanged||ft.viewportChanged||!RangeSet.eq(ft.startState.facet(gutterLineClass),ft.state.facet(gutterLineClass),ft.view.viewport.from,ft.view.viewport.to);if(lt==dt)for(let St of this.gutters)St.update(ft)&&(vt=!0);else{vt=!0;let St=[];for(let Et of dt){let Ct=lt.indexOf(Et);Ct<0?St.push(new SingleGutterView(this.view,Et)):(this.gutters[Ct].update(ft),St.push(this.gutters[Ct]))}for(let Et of this.gutters)Et.dom.remove(),St.indexOf(Et)<0&&Et.destroy();for(let Et of St)this.dom.appendChild(Et.dom);this.gutters=St}return vt}destroy(){for(let ft of this.gutters)ft.destroy();this.dom.remove()}},{provide:ft=>EditorView.scrollMargins.of(lt=>{let dt=lt.plugin(ft);return!dt||dt.gutters.length==0||!dt.fixed?null:lt.textDirection==Direction.LTR?{left:dt.dom.offsetWidth}:{right:dt.dom.offsetWidth}})});function asArray(ft){return Array.isArray(ft)?ft:[ft]}function advanceCursor(ft,lt,dt){for(;ft.value&&ft.from<=dt;)ft.from==dt&&lt.push(ft.value),ft.next()}class UpdateContext{constructor(lt,dt,vt){this.gutter=lt,this.height=vt,this.i=0,this.cursor=RangeSet.iter(lt.markers,dt.from)}line(lt,dt,vt){let St=[];advanceCursor(this.cursor,St,dt.from),vt.length&&(St=St.concat(vt));let Et=this.gutter.config.lineMarker(lt,dt,St);Et&&St.unshift(Et);let Ct=this.gutter;if(St.length==0&&!Ct.config.renderEmptyElements)return;let At=dt.top-this.height;if(this.i==Ct.elements.length){let Rt=new GutterElement(lt,dt.height,At,St);Ct.elements.push(Rt),Ct.dom.appendChild(Rt.dom)}else Ct.elements[this.i].update(lt,dt.height,At,St);this.height=dt.bottom,this.i++}finish(){let lt=this.gutter;for(;lt.elements.length>this.i;){let dt=lt.elements.pop();lt.dom.removeChild(dt.dom),dt.destroy()}}}class SingleGutterView{constructor(lt,dt){this.view=lt,this.config=dt,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let vt in dt.domEventHandlers)this.dom.addEventListener(vt,St=>{let Et=St.target,Ct;if(Et!=this.dom&&this.dom.contains(Et)){for(;Et.parentNode!=this.dom;)Et=Et.parentNode;let Rt=Et.getBoundingClientRect();Ct=(Rt.top+Rt.bottom)/2}else Ct=St.clientY;let At=lt.lineBlockAtHeight(Ct-lt.documentTop);dt.domEventHandlers[vt](lt,At,St)&&St.preventDefault()});this.markers=asArray(dt.markers(lt)),dt.initialSpacer&&(this.spacer=new GutterElement(lt,0,0,[dt.initialSpacer(lt)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(lt){let dt=this.markers;if(this.markers=asArray(this.config.markers(lt.view)),this.spacer&&this.config.updateSpacer){let St=this.config.updateSpacer(this.spacer.markers[0],lt);St!=this.spacer.markers[0]&&this.spacer.update(lt.view,0,0,[St])}let vt=lt.view.viewport;return!RangeSet.eq(this.markers,dt,vt.from,vt.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(lt):!1)}destroy(){for(let lt of this.elements)lt.destroy()}}class GutterElement{constructor(lt,dt,vt,St){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(lt,dt,vt,St)}update(lt,dt,vt,St){this.height!=dt&&(this.dom.style.height=(this.height=dt)+"px"),this.above!=vt&&(this.dom.style.marginTop=(this.above=vt)?vt+"px":""),sameMarkers(this.markers,St)||this.setMarkers(lt,St)}setMarkers(lt,dt){let vt="cm-gutterElement",St=this.dom.firstChild;for(let Et=0,Ct=0;;){let At=Ct,Rt=Et<dt.length?dt[Et++]:null,Dt=!1;if(Rt){let Nt=Rt.elementClass;Nt&&(vt+=" "+Nt);for(let Ft=Ct;Ft<this.markers.length;Ft++)if(this.markers[Ft].compare(Rt)){At=Ft,Dt=!0;break}}else At=this.markers.length;for(;Ct<At;){let Nt=this.markers[Ct++];if(Nt.toDOM){Nt.destroy(St);let Ft=St.nextSibling;St.remove(),St=Ft}}if(!Rt)break;Rt.toDOM&&(Dt?St=St.nextSibling:this.dom.insertBefore(Rt.toDOM(lt),St)),Dt&&Ct++}this.dom.className=vt,this.markers=dt}destroy(){this.setMarkers(null,[])}}function sameMarkers(ft,lt){if(ft.length!=lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(!ft[dt].compare(lt[dt]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(ft){return combineConfig(ft,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(lt,dt){let vt=Object.assign({},lt);for(let St in dt){let Et=vt[St],Ct=dt[St];vt[St]=Et?(At,Rt,Dt)=>Et(At,Rt,Dt)||Ct(At,Rt,Dt):Ct}return vt}})}});class NumberMarker extends GutterMarker{constructor(lt){super(),this.number=lt}eq(lt){return this.number==lt.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(ft,lt){return ft.state.facet(lineNumberConfig).formatNumber(lt,ft.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],ft=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(lt){return lt.state.facet(lineNumberMarkers)},lineMarker(lt,dt,vt){return vt.some(St=>St.toDOM)?null:new NumberMarker(formatNumber(lt,lt.state.doc.lineAt(dt.from).number))},lineMarkerChange:lt=>lt.startState.facet(lineNumberConfig)!=lt.state.facet(lineNumberConfig),initialSpacer(lt){return new NumberMarker(formatNumber(lt,maxLineNumber(lt.state.doc.lines)))},updateSpacer(lt,dt){let vt=formatNumber(dt.view,maxLineNumber(dt.view.state.doc.lines));return vt==lt.number?lt:new NumberMarker(vt)},domEventHandlers:ft.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(ft={}){return[lineNumberConfig.of(ft),gutters(),lineNumberGutter]}function maxLineNumber(ft){let lt=9;for(;lt<ft;)lt=lt*10+9;return lt}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],ft=>{let lt=[],dt=-1;for(let vt of ft.selection.ranges){let St=ft.doc.lineAt(vt.head).from;St>dt&&(dt=St,lt.push(activeLineGutterMarker.range(St)))}return RangeSet.of(lt)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(ft){return Facet.define({combine:ft?lt=>lt.concat(ft):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(lt,dt,vt=[],St=""){this.data=lt,this.name=St,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=dt,this.extension=[language.of(this),EditorState.languageData.of((Et,Ct,At)=>{let Rt=topNodeAt(Et,Ct,At),Dt=Rt.type.prop(languageDataProp);if(!Dt)return[];let Nt=Et.facet(Dt),Ft=Rt.type.prop(sublanguageProp);if(Ft){let Ut=Rt.resolve(Ct-Rt.from,At);for(let Wt of Ft)if(Wt.test(Ut,Et)){let Zt=Et.facet(Wt.facet);return Wt.type=="replace"?Zt:Zt.concat(Nt)}}return Nt})].concat(vt)}isActiveAt(lt,dt,vt=-1){return topNodeAt(lt,dt,vt).type.prop(languageDataProp)==this.data}findRegions(lt){let dt=lt.facet(language);if((dt==null?void 0:dt.data)==this.data)return[{from:0,to:lt.doc.length}];if(!dt||!dt.allowsNesting)return[];let vt=[],St=(Et,Ct)=>{if(Et.prop(languageDataProp)==this.data){vt.push({from:Ct,to:Ct+Et.length});return}let At=Et.prop(NodeProp.mounted);if(At){if(At.tree.prop(languageDataProp)==this.data){if(At.overlay)for(let Rt of At.overlay)vt.push({from:Rt.from+Ct,to:Rt.to+Ct});else vt.push({from:Ct,to:Ct+Et.length});return}else if(At.overlay){let Rt=vt.length;if(St(At.tree,At.overlay[0].from+Ct),vt.length>Rt)return}}for(let Rt=0;Rt<Et.children.length;Rt++){let Dt=Et.children[Rt];Dt instanceof Tree&&St(Dt,Et.positions[Rt]+Ct)}};return St(syntaxTree(lt),0),vt}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(ft,lt,dt){let vt=ft.facet(language),St=syntaxTree(ft).topNode;if(!vt||vt.allowsNesting)for(let Et=St;Et;Et=Et.enter(lt,dt,IterMode.ExcludeBuffers))Et.type.isTop&&(St=Et);return St}class LRLanguage extends Language{constructor(lt,dt,vt){super(lt,dt,[],vt),this.parser=dt}static define(lt){let dt=defineLanguageFacet(lt.languageData);return new LRLanguage(dt,lt.parser.configure({props:[languageDataProp.add(vt=>vt.isTop?dt:void 0)]}),lt.name)}configure(lt,dt){return new LRLanguage(this.data,this.parser.configure(lt),dt||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(ft){let lt=ft.field(Language.state,!1);return lt?lt.tree:Tree.empty}class DocInput{constructor(lt){this.doc=lt,this.cursorPos=0,this.string="",this.cursor=lt.iter()}get length(){return this.doc.length}syncTo(lt){return this.string=this.cursor.next(lt-this.cursorPos).value,this.cursorPos=lt+this.string.length,this.cursorPos-this.string.length}chunk(lt){return this.syncTo(lt),this.string}get lineChunks(){return!0}read(lt,dt){let vt=this.cursorPos-this.string.length;return lt<vt||dt>=this.cursorPos?this.doc.sliceString(lt,dt):this.string.slice(lt-vt,dt-vt)}}let currentContext=null;class ParseContext{constructor(lt,dt,vt=[],St,Et,Ct,At,Rt){this.parser=lt,this.state=dt,this.fragments=vt,this.tree=St,this.treeLen=Et,this.viewport=Ct,this.skipped=At,this.scheduleOn=Rt,this.parse=null,this.tempSkipped=[]}static create(lt,dt,vt){return new ParseContext(lt,dt,[],Tree.empty,0,vt,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(lt,dt){return dt!=null&&dt>=this.state.doc.length&&(dt=void 0),this.tree!=Tree.empty&&this.isDone(dt??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var vt;if(typeof lt=="number"){let St=Date.now()+lt;lt=()=>Date.now()>St}for(this.parse||(this.parse=this.startParse()),dt!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>dt)&&dt<this.state.doc.length&&this.parse.stopAt(dt);;){let St=this.parse.advance();if(St)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(St,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(vt=this.parse.stoppedAt)!==null&&vt!==void 0?vt:this.state.doc.length,this.tree=St,this.parse=null,this.treeLen<(dt??this.state.doc.length))this.parse=this.startParse();else return!0;if(lt())return!1}})}takeTree(){let lt,dt;this.parse&&(lt=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>lt)&&this.parse.stopAt(lt),this.withContext(()=>{for(;!(dt=this.parse.advance()););}),this.treeLen=lt,this.tree=dt,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(lt){let dt=currentContext;currentContext=this;try{return lt()}finally{currentContext=dt}}withoutTempSkipped(lt){for(let dt;dt=this.tempSkipped.pop();)lt=cutFragments(lt,dt.from,dt.to);return lt}changes(lt,dt){let{fragments:vt,tree:St,treeLen:Et,viewport:Ct,skipped:At}=this;if(this.takeTree(),!lt.empty){let Rt=[];if(lt.iterChangedRanges((Dt,Nt,Ft,Ut)=>Rt.push({fromA:Dt,toA:Nt,fromB:Ft,toB:Ut})),vt=TreeFragment.applyChanges(vt,Rt),St=Tree.empty,Et=0,Ct={from:lt.mapPos(Ct.from,-1),to:lt.mapPos(Ct.to,1)},this.skipped.length){At=[];for(let Dt of this.skipped){let Nt=lt.mapPos(Dt.from,1),Ft=lt.mapPos(Dt.to,-1);Nt<Ft&&At.push({from:Nt,to:Ft})}}}return new ParseContext(this.parser,dt,vt,St,Et,Ct,At,this.scheduleOn)}updateViewport(lt){if(this.viewport.from==lt.from&&this.viewport.to==lt.to)return!1;this.viewport=lt;let dt=this.skipped.length;for(let vt=0;vt<this.skipped.length;vt++){let{from:St,to:Et}=this.skipped[vt];St<lt.to&&Et>lt.from&&(this.fragments=cutFragments(this.fragments,St,Et),this.skipped.splice(vt--,1))}return this.skipped.length>=dt?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(lt,dt){this.skipped.push({from:lt,to:dt})}static getSkippingParser(lt){return new class extends Parser{createParse(dt,vt,St){let Et=St[0].from,Ct=St[St.length-1].to;return{parsedPos:Et,advance(){let Rt=currentContext;if(Rt){for(let Dt of St)Rt.tempSkipped.push(Dt);lt&&(Rt.scheduleOn=Rt.scheduleOn?Promise.all([Rt.scheduleOn,lt]):lt)}return this.parsedPos=Ct,new Tree(NodeType.none,[],[],Ct-Et)},stoppedAt:null,stopAt(){}}}}}isDone(lt){lt=Math.min(lt,this.state.doc.length);let dt=this.fragments;return this.treeLen>=lt&&dt.length&&dt[0].from==0&&dt[0].to>=lt}static get(){return currentContext}}function cutFragments(ft,lt,dt){return TreeFragment.applyChanges(ft,[{fromA:lt,toA:dt,fromB:lt,toB:dt}])}class LanguageState{constructor(lt){this.context=lt,this.tree=lt.tree}apply(lt){if(!lt.docChanged&&this.tree==this.context.tree)return this;let dt=this.context.changes(lt.changes,lt.state),vt=this.context.treeLen==lt.startState.doc.length?void 0:Math.max(lt.changes.mapPos(this.context.treeLen),dt.viewport.to);return dt.work(20,vt)||dt.takeTree(),new LanguageState(dt)}static init(lt){let dt=Math.min(3e3,lt.doc.length),vt=ParseContext.create(lt.facet(language).parser,lt,{from:0,to:dt});return vt.work(20,dt)||vt.takeTree(),new LanguageState(vt)}}Language.state=StateField.define({create:LanguageState.init,update(ft,lt){for(let dt of lt.effects)if(dt.is(Language.setState))return dt.value;return lt.startState.facet(language)!=lt.state.facet(language)?LanguageState.init(lt.state):ft.apply(lt)}});let requestIdle=ft=>{let lt=setTimeout(()=>ft(),500);return()=>clearTimeout(lt)};typeof requestIdleCallback<"u"&&(requestIdle=ft=>{let lt=-1,dt=setTimeout(()=>{lt=requestIdleCallback(ft,{timeout:500-100})},100);return()=>lt<0?clearTimeout(dt):cancelIdleCallback(lt)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(lt){this.view=lt,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(lt){let dt=this.view.state.field(Language.state).context;(dt.updateViewport(lt.view.viewport)||this.view.viewport.to>dt.treeLen)&&this.scheduleWork(),lt.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(dt)}scheduleWork(){if(this.working)return;let{state:lt}=this.view,dt=lt.field(Language.state);(dt.tree!=dt.context.tree||!dt.context.isDone(lt.doc.length))&&(this.working=requestIdle(this.work))}work(lt){this.working=null;let dt=Date.now();if(this.chunkEnd<dt&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=dt+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:vt,viewport:{to:St}}=this.view,Et=vt.field(Language.state);if(Et.tree==Et.context.tree&&Et.context.isDone(St+1e5))return;let Ct=Date.now()+Math.min(this.chunkBudget,100,lt&&!isInputPending?Math.max(25,lt.timeRemaining()-5):1e9),At=Et.context.treeLen<St&&vt.doc.length>St+1e3,Rt=Et.context.work(()=>isInputPending&&isInputPending()||Date.now()>Ct,St+(At?0:1e5));this.chunkBudget-=Date.now()-dt,(Rt||this.chunkBudget<=0)&&(Et.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(Et.context))})),this.chunkBudget>0&&!(Rt&&!At)&&this.scheduleWork(),this.checkAsyncSchedule(Et.context)}checkAsyncSchedule(lt){lt.scheduleOn&&(this.workScheduled++,lt.scheduleOn.then(()=>this.scheduleWork()).catch(dt=>logException(this.view.state,dt)).then(()=>this.workScheduled--),lt.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(ft){return ft.length?ft[0]:null},enables:ft=>[Language.state,parseWorker,EditorView.contentAttributes.compute([ft],lt=>{let dt=lt.facet(ft);return dt&&dt.name?{"data-language":dt.name}:{}})]});class LanguageSupport{constructor(lt,dt=[]){this.language=lt,this.support=dt,this.extension=[lt,dt]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:ft=>{if(!ft.length)return"  ";let lt=ft[0];if(!lt||/\S/.test(lt)||Array.from(lt).some(dt=>dt!=lt[0]))throw new Error("Invalid indent unit: "+JSON.stringify(ft[0]));return lt}});function getIndentUnit(ft){let lt=ft.facet(indentUnit);return lt.charCodeAt(0)==9?ft.tabSize*lt.length:lt.length}function indentString(ft,lt){let dt="",vt=ft.tabSize,St=ft.facet(indentUnit)[0];if(St=="	"){for(;lt>=vt;)dt+="	",lt-=vt;St=" "}for(let Et=0;Et<lt;Et++)dt+=St;return dt}function getIndentation(ft,lt){ft instanceof EditorState&&(ft=new IndentContext(ft));for(let vt of ft.state.facet(indentService)){let St=vt(ft,lt);if(St!==void 0)return St}let dt=syntaxTree(ft.state);return dt?syntaxIndentation(ft,dt,lt):null}class IndentContext{constructor(lt,dt={}){this.state=lt,this.options=dt,this.unit=getIndentUnit(lt)}lineAt(lt,dt=1){let vt=this.state.doc.lineAt(lt),{simulateBreak:St,simulateDoubleBreak:Et}=this.options;return St!=null&&St>=vt.from&&St<=vt.to?Et&&St==lt?{text:"",from:lt}:(dt<0?St<lt:St<=lt)?{text:vt.text.slice(St-vt.from),from:St}:{text:vt.text.slice(0,St-vt.from),from:vt.from}:vt}textAfterPos(lt,dt=1){if(this.options.simulateDoubleBreak&&lt==this.options.simulateBreak)return"";let{text:vt,from:St}=this.lineAt(lt,dt);return vt.slice(lt-St,Math.min(vt.length,lt+100-St))}column(lt,dt=1){let{text:vt,from:St}=this.lineAt(lt,dt),Et=this.countColumn(vt,lt-St),Ct=this.options.overrideIndentation?this.options.overrideIndentation(St):-1;return Ct>-1&&(Et+=Ct-this.countColumn(vt,vt.search(/\S|$/))),Et}countColumn(lt,dt=lt.length){return countColumn(lt,this.state.tabSize,dt)}lineIndent(lt,dt=1){let{text:vt,from:St}=this.lineAt(lt,dt),Et=this.options.overrideIndentation;if(Et){let Ct=Et(St);if(Ct>-1)return Ct}return this.countColumn(vt,vt.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(ft,lt,dt){return indentFrom(lt.resolveInner(dt).enterUnfinishedNodesBefore(dt),dt,ft)}function ignoreClosed(ft){return ft.pos==ft.options.simulateBreak&&ft.options.simulateDoubleBreak}function indentStrategy(ft){let lt=ft.type.prop(indentNodeProp);if(lt)return lt;let dt=ft.firstChild,vt;if(dt&&(vt=dt.type.prop(NodeProp.closedBy))){let St=ft.lastChild,Et=St&&vt.indexOf(St.name)>-1;return Ct=>delimitedStrategy(Ct,!0,1,void 0,Et&&!ignoreClosed(Ct)?St.from:void 0)}return ft.parent==null?topIndent:null}function indentFrom(ft,lt,dt){for(;ft;ft=ft.parent){let vt=indentStrategy(ft);if(vt)return vt(TreeIndentContext.create(dt,lt,ft))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(lt,dt,vt){super(lt.state,lt.options),this.base=lt,this.pos=dt,this.node=vt}static create(lt,dt,vt){return new TreeIndentContext(lt,dt,vt)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let lt=this.state.doc.lineAt(this.node.from);for(;;){let dt=this.node.resolve(lt.from);for(;dt.parent&&dt.parent.from==dt.from;)dt=dt.parent;if(isParent(dt,this.node))break;lt=this.state.doc.lineAt(dt.from)}return this.lineIndent(lt.from)}continue(){let lt=this.node.parent;return lt?indentFrom(lt,this.pos,this.base):0}}function isParent(ft,lt){for(let dt=lt;dt;dt=dt.parent)if(ft==dt)return!0;return!1}function bracketedAligned(ft){let lt=ft.node,dt=lt.childAfter(lt.from),vt=lt.lastChild;if(!dt)return null;let St=ft.options.simulateBreak,Et=ft.state.doc.lineAt(dt.from),Ct=St==null||St<=Et.from?Et.to:Math.min(Et.to,St);for(let At=dt.to;;){let Rt=lt.childAfter(At);if(!Rt||Rt==vt)return null;if(!Rt.type.isSkipped)return Rt.from<Ct?dt:null;At=Rt.to}}function delimitedIndent({closing:ft,align:lt=!0,units:dt=1}){return vt=>delimitedStrategy(vt,lt,dt,ft)}function delimitedStrategy(ft,lt,dt,vt,St){let Et=ft.textAfter,Ct=Et.match(/^\s*/)[0].length,At=vt&&Et.slice(Ct,Ct+vt.length)==vt||St==ft.pos+Ct,Rt=lt?bracketedAligned(ft):null;return Rt?At?ft.column(Rt.from):ft.column(Rt.to):ft.baseIndent+(At?0:ft.unit*dt)}const flatIndent=ft=>ft.baseIndent;function continuedIndent({except:ft,units:lt=1}={}){return dt=>{let vt=ft&&ft.test(dt.textAfter);return dt.baseIndent+(vt?0:lt*dt.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(ft=>{if(!ft.docChanged||!ft.isUserEvent("input.type")&&!ft.isUserEvent("input.complete"))return ft;let lt=ft.startState.languageDataAt("indentOnInput",ft.startState.selection.main.head);if(!lt.length)return ft;let dt=ft.newDoc,{head:vt}=ft.newSelection.main,St=dt.lineAt(vt);if(vt>St.from+DontIndentBeyond)return ft;let Et=dt.sliceString(St.from,vt);if(!lt.some(Dt=>Dt.test(Et)))return ft;let{state:Ct}=ft,At=-1,Rt=[];for(let{head:Dt}of Ct.selection.ranges){let Nt=Ct.doc.lineAt(Dt);if(Nt.from==At)continue;At=Nt.from;let Ft=getIndentation(Ct,Nt.from);if(Ft==null)continue;let Ut=/^\s*/.exec(Nt.text)[0],Wt=indentString(Ct,Ft);Ut!=Wt&&Rt.push({from:Nt.from,to:Nt.from+Ut.length,insert:Wt})}return Rt.length?[ft,{changes:Rt,sequential:!0}]:ft})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(ft){let lt=ft.firstChild,dt=ft.lastChild;return lt&&lt.to<dt.from?{from:lt.to,to:dt.type.isError?ft.to:dt.from}:null}function syntaxFolding(ft,lt,dt){let vt=syntaxTree(ft);if(vt.length<dt)return null;let St=vt.resolveInner(dt,1),Et=null;for(let Ct=St;Ct;Ct=Ct.parent){if(Ct.to<=dt||Ct.from>dt)continue;if(Et&&Ct.from<lt)break;let At=Ct.type.prop(foldNodeProp);if(At&&(Ct.to<vt.length-50||vt.length==ft.doc.length||!isUnfinished(Ct))){let Rt=At(Ct,ft);Rt&&Rt.from<=dt&&Rt.from>=lt&&Rt.to>dt&&(Et=Rt)}}return Et}function isUnfinished(ft){let lt=ft.lastChild;return lt&&lt.to==ft.to&&lt.type.isError}function foldable(ft,lt,dt){for(let vt of ft.facet(foldService)){let St=vt(ft,lt,dt);if(St)return St}return syntaxFolding(ft,lt,dt)}function mapRange(ft,lt){let dt=lt.mapPos(ft.from,1),vt=lt.mapPos(ft.to,-1);return dt>=vt?void 0:{from:dt,to:vt}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(ft){let lt=[];for(let{head:dt}of ft.state.selection.ranges)lt.some(vt=>vt.from<=dt&&vt.to>=dt)||lt.push(ft.lineBlockAt(dt));return lt}const foldState=StateField.define({create(){return Decoration.none},update(ft,lt){ft=ft.map(lt.changes);for(let dt of lt.effects)dt.is(foldEffect)&&!foldExists(ft,dt.value.from,dt.value.to)?ft=ft.update({add:[foldWidget.range(dt.value.from,dt.value.to)]}):dt.is(unfoldEffect)&&(ft=ft.update({filter:(vt,St)=>dt.value.from!=vt||dt.value.to!=St,filterFrom:dt.value.from,filterTo:dt.value.to}));if(lt.selection){let dt=!1,{head:vt}=lt.selection.main;ft.between(vt,vt,(St,Et)=>{St<vt&&Et>vt&&(dt=!0)}),dt&&(ft=ft.update({filterFrom:vt,filterTo:vt,filter:(St,Et)=>Et<=vt||St>=vt}))}return ft},provide:ft=>EditorView.decorations.from(ft),toJSON(ft,lt){let dt=[];return ft.between(0,lt.doc.length,(vt,St)=>{dt.push(vt,St)}),dt},fromJSON(ft){if(!Array.isArray(ft)||ft.length%2)throw new RangeError("Invalid JSON for fold state");let lt=[];for(let dt=0;dt<ft.length;){let vt=ft[dt++],St=ft[dt++];if(typeof vt!="number"||typeof St!="number")throw new RangeError("Invalid JSON for fold state");lt.push(foldWidget.range(vt,St))}return Decoration.set(lt,!0)}});function findFold(ft,lt,dt){var vt;let St=null;return(vt=ft.field(foldState,!1))===null||vt===void 0||vt.between(lt,dt,(Et,Ct)=>{(!St||St.from>Et)&&(St={from:Et,to:Ct})}),St}function foldExists(ft,lt,dt){let vt=!1;return ft.between(lt,lt,(St,Et)=>{St==lt&&Et==dt&&(vt=!0)}),vt}function maybeEnable(ft,lt){return ft.field(foldState,!1)?lt:lt.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=ft=>{for(let lt of selectedLines(ft)){let dt=foldable(ft.state,lt.from,lt.to);if(dt)return ft.dispatch({effects:maybeEnable(ft.state,[foldEffect.of(dt),announceFold(ft,dt)])}),!0}return!1},unfoldCode=ft=>{if(!ft.state.field(foldState,!1))return!1;let lt=[];for(let dt of selectedLines(ft)){let vt=findFold(ft.state,dt.from,dt.to);vt&&lt.push(unfoldEffect.of(vt),announceFold(ft,vt,!1))}return lt.length&&ft.dispatch({effects:lt}),lt.length>0};function announceFold(ft,lt,dt=!0){let vt=ft.state.doc.lineAt(lt.from).number,St=ft.state.doc.lineAt(lt.to).number;return EditorView.announce.of(`${ft.state.phrase(dt?"Folded lines":"Unfolded lines")} ${vt} ${ft.state.phrase("to")} ${St}.`)}const foldAll=ft=>{let{state:lt}=ft,dt=[];for(let vt=0;vt<lt.doc.length;){let St=ft.lineBlockAt(vt),Et=foldable(lt,St.from,St.to);Et&&dt.push(foldEffect.of(Et)),vt=(Et?ft.lineBlockAt(Et.to):St).to+1}return dt.length&&ft.dispatch({effects:maybeEnable(ft.state,dt)}),!!dt.length},unfoldAll=ft=>{let lt=ft.state.field(foldState,!1);if(!lt||!lt.size)return!1;let dt=[];return lt.between(0,ft.state.doc.length,(vt,St)=>{dt.push(unfoldEffect.of({from:vt,to:St}))}),ft.dispatch({effects:dt}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:""},foldConfig=Facet.define({combine(ft){return combineConfig(ft,defaultConfig)}});function codeFolding(ft){let lt=[foldState,baseTheme$1$1];return ft&&lt.push(foldConfig.of(ft)),lt}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(ft){let{state:lt}=ft,dt=lt.facet(foldConfig),vt=Et=>{let Ct=ft.lineBlockAt(ft.posAtDOM(Et.target)),At=findFold(ft.state,Ct.from,Ct.to);At&&ft.dispatch({effects:unfoldEffect.of(At)}),Et.preventDefault()};if(dt.placeholderDOM)return dt.placeholderDOM(ft,vt);let St=document.createElement("span");return St.textContent=dt.placeholderText,St.setAttribute("aria-label",lt.phrase("folded code")),St.title=lt.phrase("unfold"),St.className="cm-foldPlaceholder",St.onclick=vt,St}}}),foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(lt,dt){super(),this.config=lt,this.open=dt}eq(lt){return this.config==lt.config&&this.open==lt.open}toDOM(lt){if(this.config.markerDOM)return this.config.markerDOM(this.open);let dt=document.createElement("span");return dt.textContent=this.open?this.config.openText:this.config.closedText,dt.title=lt.state.phrase(this.open?"Fold line":"Unfold line"),dt}}function foldGutter(ft={}){let lt=Object.assign(Object.assign({},foldGutterDefaults),ft),dt=new FoldMarker(lt,!0),vt=new FoldMarker(lt,!1),St=ViewPlugin.fromClass(class{constructor(Ct){this.from=Ct.viewport.from,this.markers=this.buildMarkers(Ct)}update(Ct){(Ct.docChanged||Ct.viewportChanged||Ct.startState.facet(language)!=Ct.state.facet(language)||Ct.startState.field(foldState,!1)!=Ct.state.field(foldState,!1)||syntaxTree(Ct.startState)!=syntaxTree(Ct.state)||lt.foldingChanged(Ct))&&(this.markers=this.buildMarkers(Ct.view))}buildMarkers(Ct){let At=new RangeSetBuilder;for(let Rt of Ct.viewportLineBlocks){let Dt=findFold(Ct.state,Rt.from,Rt.to)?vt:foldable(Ct.state,Rt.from,Rt.to)?dt:null;Dt&&At.add(Rt.from,Rt.from,Dt)}return At.finish()}}),{domEventHandlers:Et}=lt;return[St,gutter({class:"cm-foldGutter",markers(Ct){var At;return((At=Ct.plugin(St))===null||At===void 0?void 0:At.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(lt,!1)},domEventHandlers:Object.assign(Object.assign({},Et),{click:(Ct,At,Rt)=>{if(Et.click&&Et.click(Ct,At,Rt))return!0;let Dt=findFold(Ct.state,At.from,At.to);if(Dt)return Ct.dispatch({effects:unfoldEffect.of(Dt)}),!0;let Nt=foldable(Ct.state,At.from,At.to);return Nt?(Ct.dispatch({effects:foldEffect.of(Nt)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(lt,dt){this.specs=lt;let vt;function St(At){let Rt=StyleModule.newName();return(vt||(vt=Object.create(null)))["."+Rt]=At,Rt}const Et=typeof dt.all=="string"?dt.all:dt.all?St(dt.all):void 0,Ct=dt.scope;this.scope=Ct instanceof Language?At=>At.prop(languageDataProp)==Ct.data:Ct?At=>At==Ct:void 0,this.style=tagHighlighter(lt.map(At=>({tag:At.tag,class:At.class||St(Object.assign({},At,{tag:null}))})),{all:Et}).style,this.module=vt?new StyleModule(vt):null,this.themeType=dt.themeType}static define(lt,dt){return new HighlightStyle(lt,dt||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(ft){return ft.length?[ft[0]]:null}});function getHighlighters(ft){let lt=ft.facet(highlighterFacet);return lt.length?lt:ft.facet(fallbackHighlighter)}function syntaxHighlighting(ft,lt){let dt=[treeHighlighter],vt;return ft instanceof HighlightStyle&&(ft.module&&dt.push(EditorView.styleModule.of(ft.module)),vt=ft.themeType),lt!=null&&lt.fallback?dt.push(fallbackHighlighter.of(ft)):vt?dt.push(highlighterFacet.computeN([EditorView.darkTheme],St=>St.facet(EditorView.darkTheme)==(vt=="dark")?[ft]:[])):dt.push(highlighterFacet.of(ft)),dt}class TreeHighlighter{constructor(lt){this.markCache=Object.create(null),this.tree=syntaxTree(lt.state),this.decorations=this.buildDeco(lt,getHighlighters(lt.state))}update(lt){let dt=syntaxTree(lt.state),vt=getHighlighters(lt.state),St=vt!=getHighlighters(lt.startState);dt.length<lt.view.viewport.to&&!St&&dt.type==this.tree.type?this.decorations=this.decorations.map(lt.changes):(dt!=this.tree||lt.viewportChanged||St)&&(this.tree=dt,this.decorations=this.buildDeco(lt.view,vt))}buildDeco(lt,dt){if(!dt||!this.tree.length)return Decoration.none;let vt=new RangeSetBuilder;for(let{from:St,to:Et}of lt.visibleRanges)highlightTree(this.tree,dt,(Ct,At,Rt)=>{vt.add(Ct,At,this.markCache[Rt]||(this.markCache[Rt]=Decoration.mark({class:Rt})))},St,Et);return vt.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:ft=>ft.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(ft){return combineConfig(ft,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(ft){let lt=[],dt=ft.matched?matchingMark:nonmatchingMark;return lt.push(dt.range(ft.start.from,ft.start.to)),ft.end&&lt.push(dt.range(ft.end.from,ft.end.to)),lt}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(ft,lt){if(!lt.docChanged&&!lt.selection)return ft;let dt=[],vt=lt.state.facet(bracketMatchingConfig);for(let St of lt.state.selection.ranges){if(!St.empty)continue;let Et=matchBrackets(lt.state,St.head,-1,vt)||St.head>0&&matchBrackets(lt.state,St.head-1,1,vt)||vt.afterCursor&&(matchBrackets(lt.state,St.head,1,vt)||St.head<lt.state.doc.length&&matchBrackets(lt.state,St.head+1,-1,vt));Et&&(dt=dt.concat(vt.renderMatch(Et,lt.state)))}return Decoration.set(dt,!0)},provide:ft=>EditorView.decorations.from(ft)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(ft={}){return[bracketMatchingConfig.of(ft),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(ft,lt,dt){let vt=ft.prop(lt<0?NodeProp.openedBy:NodeProp.closedBy);if(vt)return vt;if(ft.name.length==1){let St=dt.indexOf(ft.name);if(St>-1&&St%2==(lt<0?1:0))return[dt[St+lt]]}return null}function findHandle(ft){let lt=ft.type.prop(bracketMatchingHandle);return lt?lt(ft.node):ft}function matchBrackets(ft,lt,dt,vt={}){let St=vt.maxScanDistance||DefaultScanDist,Et=vt.brackets||DefaultBrackets,Ct=syntaxTree(ft),At=Ct.resolveInner(lt,dt);for(let Rt=At;Rt;Rt=Rt.parent){let Dt=matchingNodes(Rt.type,dt,Et);if(Dt&&Rt.from<Rt.to){let Nt=findHandle(Rt);if(Nt&&(dt>0?lt>=Nt.from&&lt<Nt.to:lt>Nt.from&&lt<=Nt.to))return matchMarkedBrackets(ft,lt,dt,Rt,Nt,Dt,Et)}}return matchPlainBrackets(ft,lt,dt,Ct,At.type,St,Et)}function matchMarkedBrackets(ft,lt,dt,vt,St,Et,Ct){let At=vt.parent,Rt={from:St.from,to:St.to},Dt=0,Nt=At==null?void 0:At.cursor();if(Nt&&(dt<0?Nt.childBefore(vt.from):Nt.childAfter(vt.to)))do if(dt<0?Nt.to<=vt.from:Nt.from>=vt.to){if(Dt==0&&Et.indexOf(Nt.type.name)>-1&&Nt.from<Nt.to){let Ft=findHandle(Nt);return{start:Rt,end:Ft?{from:Ft.from,to:Ft.to}:void 0,matched:!0}}else if(matchingNodes(Nt.type,dt,Ct))Dt++;else if(matchingNodes(Nt.type,-dt,Ct)){if(Dt==0){let Ft=findHandle(Nt);return{start:Rt,end:Ft&&Ft.from<Ft.to?{from:Ft.from,to:Ft.to}:void 0,matched:!1}}Dt--}}while(dt<0?Nt.prevSibling():Nt.nextSibling());return{start:Rt,matched:!1}}function matchPlainBrackets(ft,lt,dt,vt,St,Et,Ct){let At=dt<0?ft.sliceDoc(lt-1,lt):ft.sliceDoc(lt,lt+1),Rt=Ct.indexOf(At);if(Rt<0||Rt%2==0!=dt>0)return null;let Dt={from:dt<0?lt-1:lt,to:dt>0?lt+1:lt},Nt=ft.doc.iterRange(lt,dt>0?ft.doc.length:0),Ft=0;for(let Ut=0;!Nt.next().done&&Ut<=Et;){let Wt=Nt.value;dt<0&&(Ut+=Wt.length);let Zt=lt+Ut*dt;for(let Kt=dt>0?0:Wt.length-1,cn=dt>0?Wt.length:-1;Kt!=cn;Kt+=dt){let hn=Ct.indexOf(Wt[Kt]);if(!(hn<0||vt.resolveInner(Zt+Kt,1).type!=St))if(hn%2==0==dt>0)Ft++;else{if(Ft==1)return{start:Dt,end:{from:Zt+Kt,to:Zt+Kt+1},matched:hn>>1==Rt>>1};Ft--}}dt>0&&(Ut+=Wt.length)}return Nt.done?{start:Dt,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[ft,lt]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[ft]=createTokenType(noTokens,lt);function warnForPart(ft,lt){warned.indexOf(ft)>-1||(warned.push(ft),console.warn(lt))}function createTokenType(ft,lt){let dt=null;for(let Et of lt.split(".")){let Ct=ft[Et]||tags[Et];Ct?typeof Ct=="function"?dt?dt=Ct(dt):warnForPart(Et,`Modifier ${Et} used at start of tag`):dt?warnForPart(Et,`Tag ${Et} used as modifier`):dt=Ct:warnForPart(Et,`Unknown highlighting tag ${Et}`)}if(!dt)return 0;let vt=lt.replace(/ /g,"_"),St=NodeType.define({id:typeArray.length,name:vt,props:[styleTags({[vt]:dt})]});return typeArray.push(St),St.id}class CompletionContext{constructor(lt,dt,vt){this.state=lt,this.pos=dt,this.explicit=vt,this.abortListeners=[]}tokenBefore(lt){let dt=syntaxTree(this.state).resolveInner(this.pos,-1);for(;dt&&lt.indexOf(dt.name)<0;)dt=dt.parent;return dt?{from:dt.from,to:this.pos,text:this.state.sliceDoc(dt.from,this.pos),type:dt.type}:null}matchBefore(lt){let dt=this.state.doc.lineAt(this.pos),vt=Math.max(dt.from,this.pos-250),St=dt.text.slice(vt-dt.from,this.pos-dt.from),Et=St.search(ensureAnchor(lt,!1));return Et<0?null:{from:vt+Et,to:this.pos,text:St.slice(Et)}}get aborted(){return this.abortListeners==null}addEventListener(lt,dt){lt=="abort"&&this.abortListeners&&this.abortListeners.push(dt)}}function toSet(ft){let lt=Object.keys(ft).join(""),dt=/\w/.test(lt);return dt&&(lt=lt.replace(/\w/g,"")),`[${dt?"\\w":""}${lt.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(ft){let lt=Object.create(null),dt=Object.create(null);for(let{label:St}of ft){lt[St[0]]=!0;for(let Et=1;Et<St.length;Et++)dt[St[Et]]=!0}let vt=toSet(lt)+toSet(dt)+"*$";return[new RegExp("^"+vt),new RegExp(vt)]}function completeFromList(ft){let lt=ft.map(St=>typeof St=="string"?{label:St}:St),[dt,vt]=lt.every(St=>/^\w+$/.test(St.label))?[/\w*$/,/\w+$/]:prefixMatch(lt);return St=>{let Et=St.matchBefore(vt);return Et||St.explicit?{from:Et?Et.from:St.pos,options:lt,validFor:dt}:null}}function ifNotIn(ft,lt){return dt=>{for(let vt=syntaxTree(dt.state).resolveInner(dt.pos,-1);vt;vt=vt.parent){if(ft.indexOf(vt.name)>-1)return null;if(vt.type.isTop)break}return lt(dt)}}class Option{constructor(lt,dt,vt){this.completion=lt,this.source=dt,this.match=vt}}function cur(ft){return ft.selection.main.head}function ensureAnchor(ft,lt){var dt;let{source:vt}=ft,St=lt&&vt[0]!="^",Et=vt[vt.length-1]!="$";return!St&&!Et?ft:new RegExp(`${St?"^":""}(?:${vt})${Et?"$":""}`,(dt=ft.flags)!==null&&dt!==void 0?dt:ft.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(ft,lt,dt,vt){return Object.assign(Object.assign({},ft.changeByRange(St=>{if(St==ft.selection.main)return{changes:{from:dt,to:vt,insert:lt},range:EditorSelection.cursor(dt+lt.length)};let Et=vt-dt;return!St.empty||Et&&ft.sliceDoc(St.from-Et,St.from)!=ft.sliceDoc(dt,vt)?{range:St}:{changes:{from:St.from-Et,to:St.from,insert:lt},range:EditorSelection.cursor(St.from-Et+lt.length)}})),{userEvent:"input.complete"})}function applyCompletion(ft,lt){const dt=lt.completion.apply||lt.completion.label;let vt=lt.source;typeof dt=="string"?ft.dispatch(Object.assign(Object.assign({},insertCompletionText(ft.state,dt,vt.from,vt.to)),{annotations:pickedCompletion.of(lt.completion)})):dt(ft,lt.completion,vt.from,vt.to)}const SourceCache=new WeakMap;function asSource(ft){if(!Array.isArray(ft))return ft;let lt=SourceCache.get(ft);return lt||SourceCache.set(ft,lt=completeFromList(ft)),lt}class FuzzyMatcher{constructor(lt){this.pattern=lt,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let dt=0;dt<lt.length;){let vt=codePointAt(lt,dt),St=codePointSize(vt);this.chars.push(vt);let Et=lt.slice(dt,dt+St),Ct=Et.toUpperCase();this.folded.push(codePointAt(Ct==Et?Et.toLowerCase():Ct,0)),dt+=St}this.astral=lt.length!=this.chars.length}match(lt){if(this.pattern.length==0)return[0];if(lt.length<this.pattern.length)return null;let{chars:dt,folded:vt,any:St,precise:Et,byWord:Ct}=this;if(dt.length==1){let dn=codePointAt(lt,0),pn=codePointSize(dn),gn=pn==lt.length?0:-100;if(dn!=dt[0])if(dn==vt[0])gn+=-200;else return null;return[gn,0,pn]}let At=lt.indexOf(this.pattern);if(At==0)return[lt.length==this.pattern.length?0:-100,0,this.pattern.length];let Rt=dt.length,Dt=0;if(At<0){for(let dn=0,pn=Math.min(lt.length,200);dn<pn&&Dt<Rt;){let gn=codePointAt(lt,dn);(gn==dt[Dt]||gn==vt[Dt])&&(St[Dt++]=dn),dn+=codePointSize(gn)}if(Dt<Rt)return null}let Nt=0,Ft=0,Ut=!1,Wt=0,Zt=-1,Kt=-1,cn=/[a-z]/.test(lt),hn=!0;for(let dn=0,pn=Math.min(lt.length,200),gn=0;dn<pn&&Ft<Rt;){let vn=codePointAt(lt,dn);At<0&&(Nt<Rt&&vn==dt[Nt]&&(Et[Nt++]=dn),Wt<Rt&&(vn==dt[Wt]||vn==vt[Wt]?(Wt==0&&(Zt=dn),Kt=dn+1,Wt++):Wt=0));let bn,$n=vn<255?vn>=48&&vn<=57||vn>=97&&vn<=122?2:vn>=65&&vn<=90?1:0:(bn=fromCodePoint(vn))!=bn.toLowerCase()?1:bn!=bn.toUpperCase()?2:0;(!dn||$n==1&&cn||gn==0&&$n!=0)&&(dt[Ft]==vn||vt[Ft]==vn&&(Ut=!0)?Ct[Ft++]=dn:Ct.length&&(hn=!1)),gn=$n,dn+=codePointSize(vn)}return Ft==Rt&&Ct[0]==0&&hn?this.result(-100+(Ut?-200:0),Ct,lt):Wt==Rt&&Zt==0?[-200-lt.length+(Kt==lt.length?0:-100),0,Kt]:At>-1?[-700-lt.length,At,At+this.pattern.length]:Wt==Rt?[-200+-700-lt.length,Zt,Kt]:Ft==Rt?this.result(-100+(Ut?-200:0)+-700+(hn?0:-1100),Ct,lt):dt.length==2?null:this.result((St[0]?-700:0)+-200+-1100,St,lt)}result(lt,dt,vt){let St=[lt-vt.length],Et=1;for(let Ct of dt){let At=Ct+(this.astral?codePointSize(codePointAt(vt,Ct)):1);Et>1&&St[Et-1]==Ct?St[Et-1]=At:(St[Et++]=Ct,St[Et++]=At)}return St}}const completionConfig=Facet.define({combine(ft){return combineConfig(ft,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(lt,dt)=>lt.label.localeCompare(dt.label),interactionDelay:75},{defaultKeymap:(lt,dt)=>lt&&dt,closeOnBlur:(lt,dt)=>lt&&dt,icons:(lt,dt)=>lt&&dt,tooltipClass:(lt,dt)=>vt=>joinClass(lt(vt),dt(vt)),optionClass:(lt,dt)=>vt=>joinClass(lt(vt),dt(vt)),addToOptions:(lt,dt)=>lt.concat(dt)})}});function joinClass(ft,lt){return ft?lt?ft+" "+lt:ft:lt}function optionContent(ft){let lt=ft.addToOptions.slice();return ft.icons&&lt.push({render(dt){let vt=document.createElement("div");return vt.classList.add("cm-completionIcon"),dt.type&&vt.classList.add(...dt.type.split(/\s+/g).map(St=>"cm-completionIcon-"+St)),vt.setAttribute("aria-hidden","true"),vt},position:20}),lt.push({render(dt,vt,St){let Et=document.createElement("span");Et.className="cm-completionLabel";let{label:Ct}=dt,At=0;for(let Rt=1;Rt<St.length;){let Dt=St[Rt++],Nt=St[Rt++];Dt>At&&Et.appendChild(document.createTextNode(Ct.slice(At,Dt)));let Ft=Et.appendChild(document.createElement("span"));Ft.appendChild(document.createTextNode(Ct.slice(Dt,Nt))),Ft.className="cm-completionMatchedText",At=Nt}return At<Ct.length&&Et.appendChild(document.createTextNode(Ct.slice(At))),Et},position:50},{render(dt){if(!dt.detail)return null;let vt=document.createElement("span");return vt.className="cm-completionDetail",vt.textContent=dt.detail,vt},position:80}),lt.sort((dt,vt)=>dt.position-vt.position).map(dt=>dt.render)}function rangeAroundSelected(ft,lt,dt){if(ft<=dt)return{from:0,to:ft};if(lt<0&&(lt=0),lt<=ft>>1){let St=Math.floor(lt/dt);return{from:St*dt,to:(St+1)*dt}}let vt=Math.floor((ft-lt)/dt);return{from:ft-(vt+1)*dt,to:ft-vt*dt}}class CompletionTooltip{constructor(lt,dt){this.view=lt,this.stateField=dt,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:At=>this.positionInfo(At),key:this},this.space=null,this.currentClass="";let vt=lt.state.field(dt),{options:St,selected:Et}=vt.open,Ct=lt.state.facet(completionConfig);this.optionContent=optionContent(Ct),this.optionClass=Ct.optionClass,this.tooltipClass=Ct.tooltipClass,this.range=rangeAroundSelected(St.length,Et,Ct.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(lt.state),this.dom.addEventListener("mousedown",At=>{for(let Rt=At.target,Dt;Rt&&Rt!=this.dom;Rt=Rt.parentNode)if(Rt.nodeName=="LI"&&(Dt=/-(\d+)$/.exec(Rt.id))&&+Dt[1]<St.length){applyCompletion(lt,St[+Dt[1]]),At.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(St,vt.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(lt){var dt,vt,St;let Et=lt.state.field(this.stateField),Ct=lt.startState.field(this.stateField);this.updateTooltipClass(lt.state),Et!=Ct&&(this.updateSel(),((dt=Et.open)===null||dt===void 0?void 0:dt.disabled)!=((vt=Ct.open)===null||vt===void 0?void 0:vt.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((St=Et.open)===null||St===void 0)&&St.disabled)))}updateTooltipClass(lt){let dt=this.tooltipClass(lt);if(dt!=this.currentClass){for(let vt of this.currentClass.split(" "))vt&&this.dom.classList.remove(vt);for(let vt of dt.split(" "))vt&&this.dom.classList.add(vt);this.currentClass=dt}}positioned(lt){this.space=lt,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let lt=this.view.state.field(this.stateField),dt=lt.open;if((dt.selected>-1&&dt.selected<this.range.from||dt.selected>=this.range.to)&&(this.range=rangeAroundSelected(dt.options.length,dt.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(dt.options,lt.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(dt.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:vt}=dt.options[dt.selected],{info:St}=vt;if(!St)return;let Et=typeof St=="string"?document.createTextNode(St):St(vt);if(!Et)return;"then"in Et?Et.then(Ct=>{Ct&&this.view.state.field(this.stateField,!1)==lt&&this.addInfoPane(Ct)}).catch(Ct=>logException(this.view.state,Ct,"completion info")):this.addInfoPane(Et)}}addInfoPane(lt){let dt=this.info=document.createElement("div");dt.className="cm-tooltip cm-completionInfo",dt.appendChild(lt),this.dom.appendChild(dt),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(lt){let dt=null;for(let vt=this.list.firstChild,St=this.range.from;vt;vt=vt.nextSibling,St++)St==lt?vt.hasAttribute("aria-selected")||(vt.setAttribute("aria-selected","true"),dt=vt):vt.hasAttribute("aria-selected")&&vt.removeAttribute("aria-selected");return dt&&scrollIntoView(this.list,dt),dt}measureInfo(){let lt=this.dom.querySelector("[aria-selected]");if(!lt||!this.info)return null;let dt=this.dom.getBoundingClientRect(),vt=this.info.getBoundingClientRect(),St=lt.getBoundingClientRect(),Et=this.space;if(!Et){let Zt=this.dom.ownerDocument.defaultView||window;Et={left:0,top:0,right:Zt.innerWidth,bottom:Zt.innerHeight}}if(St.top>Math.min(Et.bottom,dt.bottom)-10||St.bottom<Math.max(Et.top,dt.top)+10)return null;let Ct=this.view.textDirection==Direction.RTL,At=Ct,Rt=!1,Dt,Nt="",Ft="",Ut=dt.left-Et.left,Wt=Et.right-dt.right;if(At&&Ut<Math.min(vt.width,Wt)?At=!1:!At&&Wt<Math.min(vt.width,Ut)&&(At=!0),vt.width<=(At?Ut:Wt))Nt=Math.max(Et.top,Math.min(St.top,Et.bottom-vt.height))-dt.top+"px",Dt=Math.min(400,At?Ut:Wt)+"px";else{Rt=!0,Dt=Math.min(400,(Ct?dt.right:Et.right-dt.left)-30)+"px";let Zt=Et.bottom-dt.bottom;Zt>=vt.height||Zt>dt.top?Nt=St.bottom-dt.top+"px":Ft=dt.bottom-St.top+"px"}return{top:Nt,bottom:Ft,maxWidth:Dt,class:Rt?Ct?"left-narrow":"right-narrow":At?"left":"right"}}positionInfo(lt){this.info&&(lt?(this.info.style.top=lt.top,this.info.style.bottom=lt.bottom,this.info.style.maxWidth=lt.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+lt.class):this.info.style.top="-1e6px")}createListBox(lt,dt,vt){const St=document.createElement("ul");St.id=dt,St.setAttribute("role","listbox"),St.setAttribute("aria-expanded","true"),St.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let Et=vt.from;Et<vt.to;Et++){let{completion:Ct,match:At}=lt[Et];const Rt=St.appendChild(document.createElement("li"));Rt.id=dt+"-"+Et,Rt.setAttribute("role","option");let Dt=this.optionClass(Ct);Dt&&(Rt.className=Dt);for(let Nt of this.optionContent){let Ft=Nt(Ct,this.view.state,At);Ft&&Rt.appendChild(Ft)}}return vt.from&&St.classList.add("cm-completionListIncompleteTop"),vt.to<lt.length&&St.classList.add("cm-completionListIncompleteBottom"),St}}function completionTooltip(ft){return lt=>new CompletionTooltip(lt,ft)}function scrollIntoView(ft,lt){let dt=ft.getBoundingClientRect(),vt=lt.getBoundingClientRect();vt.top<dt.top?ft.scrollTop-=dt.top-vt.top:vt.bottom>dt.bottom&&(ft.scrollTop+=vt.bottom-dt.bottom)}function score(ft){return(ft.boost||0)*100+(ft.apply?10:0)+(ft.info?5:0)+(ft.type?1:0)}function sortOptions(ft,lt){let dt=[],vt=0;for(let At of ft)if(At.hasResult())if(At.result.filter===!1){let Rt=At.result.getMatch;for(let Dt of At.result.options){let Nt=[1e9-vt++];if(Rt)for(let Ft of Rt(Dt))Nt.push(Ft);dt.push(new Option(Dt,At,Nt))}}else{let Rt=new FuzzyMatcher(lt.sliceDoc(At.from,At.to)),Dt;for(let Nt of At.result.options)(Dt=Rt.match(Nt.label))&&(Nt.boost!=null&&(Dt[0]+=Nt.boost),dt.push(new Option(Nt,At,Dt)))}let St=[],Et=null,Ct=lt.facet(completionConfig).compareCompletions;for(let At of dt.sort((Rt,Dt)=>Dt.match[0]-Rt.match[0]||Ct(Rt.completion,Dt.completion)))!Et||Et.label!=At.completion.label||Et.detail!=At.completion.detail||Et.type!=null&&At.completion.type!=null&&Et.type!=At.completion.type||Et.apply!=At.completion.apply?St.push(At):score(At.completion)>score(Et)&&(St[St.length-1]=At),Et=At.completion;return St}class CompletionDialog{constructor(lt,dt,vt,St,Et,Ct){this.options=lt,this.attrs=dt,this.tooltip=vt,this.timestamp=St,this.selected=Et,this.disabled=Ct}setSelected(lt,dt){return lt==this.selected||lt>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(dt,lt),this.tooltip,this.timestamp,lt,this.disabled)}static build(lt,dt,vt,St,Et){let Ct=sortOptions(lt,dt);if(!Ct.length)return St&&lt.some(Rt=>Rt.state==1)?new CompletionDialog(St.options,St.attrs,St.tooltip,St.timestamp,St.selected,!0):null;let At=dt.facet(completionConfig).selectOnOpen?0:-1;if(St&&St.selected!=At&&St.selected!=-1){let Rt=St.options[St.selected].completion;for(let Dt=0;Dt<Ct.length;Dt++)if(Ct[Dt].completion==Rt){At=Dt;break}}return new CompletionDialog(Ct,makeAttrs(vt,At),{pos:lt.reduce((Rt,Dt)=>Dt.hasResult()?Math.min(Rt,Dt.from):Rt,1e8),create:completionTooltip(completionState),above:Et.aboveCursor},St?St.timestamp:Date.now(),At,!1)}map(lt){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:lt.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(lt,dt,vt){this.active=lt,this.id=dt,this.open=vt}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(lt){let{state:dt}=lt,vt=dt.facet(completionConfig),Et=(vt.override||dt.languageDataAt("autocomplete",cur(dt)).map(asSource)).map(At=>(this.active.find(Dt=>Dt.source==At)||new ActiveSource(At,this.active.some(Dt=>Dt.state!=0)?1:0)).update(lt,vt));Et.length==this.active.length&&Et.every((At,Rt)=>At==this.active[Rt])&&(Et=this.active);let Ct=this.open;Ct&&lt.docChanged&&(Ct=Ct.map(lt.changes)),lt.selection||Et.some(At=>At.hasResult()&&lt.changes.touchesRange(At.from,At.to))||!sameResults(Et,this.active)?Ct=CompletionDialog.build(Et,dt,this.id,Ct,vt):Ct&&Ct.disabled&&!Et.some(At=>At.state==1)&&(Ct=null),!Ct&&Et.every(At=>At.state!=1)&&Et.some(At=>At.hasResult())&&(Et=Et.map(At=>At.hasResult()?new ActiveSource(At.source,0):At));for(let At of lt.effects)At.is(setSelectedEffect)&&(Ct=Ct&&Ct.setSelected(At.value,this.id));return Et==this.active&&Ct==this.open?this:new CompletionState(Et,this.id,Ct)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(ft,lt){if(ft==lt)return!0;for(let dt=0,vt=0;;){for(;dt<ft.length&&!ft[dt].hasResult;)dt++;for(;vt<lt.length&&!lt[vt].hasResult;)vt++;let St=dt==ft.length,Et=vt==lt.length;if(St||Et)return St==Et;if(ft[dt++].result!=lt[vt++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(ft,lt){let dt={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":ft};return lt>-1&&(dt["aria-activedescendant"]=ft+"-"+lt),dt}const none$1=[];function getUserEvent(ft){return ft.isUserEvent("input.type")?"input":ft.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(lt,dt,vt=-1){this.source=lt,this.state=dt,this.explicitPos=vt}hasResult(){return!1}update(lt,dt){let vt=getUserEvent(lt),St=this;vt?St=St.handleUserEvent(lt,vt,dt):lt.docChanged?St=St.handleChange(lt):lt.selection&&St.state!=0&&(St=new ActiveSource(St.source,0));for(let Et of lt.effects)if(Et.is(startCompletionEffect))St=new ActiveSource(St.source,1,Et.value?cur(lt.state):-1);else if(Et.is(closeCompletionEffect))St=new ActiveSource(St.source,0);else if(Et.is(setActiveEffect))for(let Ct of Et.value)Ct.source==St.source&&(St=Ct);return St}handleUserEvent(lt,dt,vt){return dt=="delete"||!vt.activateOnTyping?this.map(lt.changes):new ActiveSource(this.source,1)}handleChange(lt){return lt.changes.touchesRange(cur(lt.startState))?new ActiveSource(this.source,0):this.map(lt.changes)}map(lt){return lt.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,lt.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(lt,dt,vt,St,Et){super(lt,2,dt),this.result=vt,this.from=St,this.to=Et}hasResult(){return!0}handleUserEvent(lt,dt,vt){var St;let Et=lt.changes.mapPos(this.from),Ct=lt.changes.mapPos(this.to,1),At=cur(lt.state);if((this.explicitPos<0?At<=Et:At<this.from)||At>Ct||dt=="delete"&&cur(lt.startState)==this.from)return new ActiveSource(this.source,dt=="input"&&vt.activateOnTyping?1:0);let Rt=this.explicitPos<0?-1:lt.changes.mapPos(this.explicitPos),Dt;return checkValid(this.result.validFor,lt.state,Et,Ct)?new ActiveResult(this.source,Rt,this.result,Et,Ct):this.result.update&&(Dt=this.result.update(this.result,Et,Ct,new CompletionContext(lt.state,At,Rt>=0)))?new ActiveResult(this.source,Rt,Dt,Dt.from,(St=Dt.to)!==null&&St!==void 0?St:cur(lt.state)):new ActiveSource(this.source,1,Rt)}handleChange(lt){return lt.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(lt.changes)}map(lt){return lt.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:lt.mapPos(this.explicitPos),this.result,lt.mapPos(this.from),lt.mapPos(this.to,1))}}function checkValid(ft,lt,dt,vt){if(!ft)return!1;let St=lt.sliceDoc(dt,vt);return typeof ft=="function"?ft(St,dt,vt,lt):ensureAnchor(ft,!0).test(St)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map(ft,lt){return ft.map(dt=>dt.map(lt))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(ft,lt){return ft.update(lt)},provide:ft=>[showTooltip.from(ft,lt=>lt.tooltip),EditorView.contentAttributes.from(ft,lt=>lt.attrs)]});function moveCompletionSelection(ft,lt="option"){return dt=>{let vt=dt.state.field(completionState,!1);if(!vt||!vt.open||vt.open.disabled||Date.now()-vt.open.timestamp<dt.state.facet(completionConfig).interactionDelay)return!1;let St=1,Et;lt=="page"&&(Et=getTooltip(dt,vt.open.tooltip))&&(St=Math.max(2,Math.floor(Et.dom.offsetHeight/Et.dom.querySelector("li").offsetHeight)-1));let{length:Ct}=vt.open.options,At=vt.open.selected>-1?vt.open.selected+St*(ft?1:-1):ft?0:Ct-1;return At<0?At=lt=="page"?0:Ct-1:At>=Ct&&(At=lt=="page"?Ct-1:0),dt.dispatch({effects:setSelectedEffect.of(At)}),!0}}const acceptCompletion=ft=>{let lt=ft.state.field(completionState,!1);return ft.state.readOnly||!lt||!lt.open||lt.open.selected<0||Date.now()-lt.open.timestamp<ft.state.facet(completionConfig).interactionDelay?!1:(lt.open.disabled||applyCompletion(ft,lt.open.options[lt.open.selected]),!0)},startCompletion=ft=>ft.state.field(completionState,!1)?(ft.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=ft=>{let lt=ft.state.field(completionState,!1);return!lt||!lt.active.some(dt=>dt.state!=0)?!1:(ft.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(lt,dt){this.active=lt,this.context=dt,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let lt of ft.state.field(completionState).active)lt.state==1&&this.startQuery(lt)}update(ft){let lt=ft.state.field(completionState);if(!ft.selectionSet&&!ft.docChanged&&ft.startState.field(completionState)==lt)return;let dt=ft.transactions.some(vt=>(vt.selection||vt.docChanged)&&!getUserEvent(vt));for(let vt=0;vt<this.running.length;vt++){let St=this.running[vt];if(dt||St.updates.length+ft.transactions.length>MaxUpdateCount&&Date.now()-St.time>MinAbortTime){for(let Et of St.context.abortListeners)try{Et()}catch(Ct){logException(this.view.state,Ct)}St.context.abortListeners=null,this.running.splice(vt--,1)}else St.updates.push(...ft.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=lt.active.some(vt=>vt.state==1&&!this.running.some(St=>St.active.source==vt.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let vt of ft.transactions)getUserEvent(vt)=="input"?this.composing=2:this.composing==2&&vt.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:ft}=this.view,lt=ft.field(completionState);for(let dt of lt.active)dt.state==1&&!this.running.some(vt=>vt.active.source==dt.source)&&this.startQuery(dt)}startQuery(ft){let{state:lt}=this.view,dt=cur(lt),vt=new CompletionContext(lt,dt,ft.explicitPos==dt),St=new RunningQuery(ft,vt);this.running.push(St),Promise.resolve(ft.source(vt)).then(Et=>{St.context.aborted||(St.done=Et||null,this.scheduleAccept())},Et=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,Et)})}scheduleAccept(){this.running.every(ft=>ft.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var ft;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let lt=[],dt=this.view.state.facet(completionConfig);for(let vt=0;vt<this.running.length;vt++){let St=this.running[vt];if(St.done===void 0)continue;if(this.running.splice(vt--,1),St.done){let Ct=new ActiveResult(St.active.source,St.active.explicitPos,St.done,St.done.from,(ft=St.done.to)!==null&&ft!==void 0?ft:cur(St.updates.length?St.updates[0].startState:this.view.state));for(let At of St.updates)Ct=Ct.update(At,dt);if(Ct.hasResult()){lt.push(Ct);continue}}let Et=this.view.state.field(completionState).active.find(Ct=>Ct.source==St.active.source);if(Et&&Et.state==1)if(St.done==null){let Ct=new ActiveSource(St.active.source,0);for(let At of St.updates)Ct=Ct.update(At,dt);Ct.state!=1&&lt.push(Ct)}else this.startQuery(Et)}lt.length&&this.view.dispatch({effects:setActiveEffect.of(lt)})}},{eventHandlers:{blur(){let ft=this.view.state.field(completionState,!1);ft&&ft.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(lt,dt,vt,St){this.field=lt,this.line=dt,this.from=vt,this.to=St}}class FieldRange{constructor(lt,dt,vt){this.field=lt,this.from=dt,this.to=vt}map(lt){let dt=lt.mapPos(this.from,-1,MapMode.TrackDel),vt=lt.mapPos(this.to,1,MapMode.TrackDel);return dt==null||vt==null?null:new FieldRange(this.field,dt,vt)}}class Snippet{constructor(lt,dt){this.lines=lt,this.fieldPositions=dt}instantiate(lt,dt){let vt=[],St=[dt],Et=lt.doc.lineAt(dt),Ct=/^\s*/.exec(Et.text)[0];for(let Rt of this.lines){if(vt.length){let Dt=Ct,Nt=/^\t*/.exec(Rt)[0].length;for(let Ft=0;Ft<Nt;Ft++)Dt+=lt.facet(indentUnit);St.push(dt+Dt.length-Nt),Rt=Dt+Rt.slice(Nt)}vt.push(Rt),dt+=Rt.length+1}let At=this.fieldPositions.map(Rt=>new FieldRange(Rt.field,St[Rt.line]+Rt.from,St[Rt.line]+Rt.to));return{text:vt,ranges:At}}static parse(lt){let dt=[],vt=[],St=[],Et;for(let Ct of lt.split(/\r\n?|\n/)){for(;Et=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(Ct);){let At=Et[1]?+Et[1]:null,Rt=Et[2]||Et[3]||"",Dt=-1;for(let Nt=0;Nt<dt.length;Nt++)(At!=null?dt[Nt].seq==At:Rt&&dt[Nt].name==Rt)&&(Dt=Nt);if(Dt<0){let Nt=0;for(;Nt<dt.length&&(At==null||dt[Nt].seq!=null&&dt[Nt].seq<At);)Nt++;dt.splice(Nt,0,{seq:At,name:Rt}),Dt=Nt;for(let Ft of St)Ft.field>=Dt&&Ft.field++}St.push(new FieldPos(Dt,vt.length,Et.index,Et.index+Rt.length)),Ct=Ct.slice(0,Et.index)+Rt+Ct.slice(Et.index+Et[0].length)}for(let At;At=/\\([{}])/.exec(Ct);){Ct=Ct.slice(0,At.index)+At[1]+Ct.slice(At.index+At[0].length);for(let Rt of St)Rt.line==vt.length&&Rt.from>At.index&&(Rt.from--,Rt.to--)}vt.push(Ct)}return new Snippet(vt,St)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let ft=document.createElement("span");return ft.className="cm-snippetFieldPosition",ft}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(lt,dt){this.ranges=lt,this.active=dt,this.deco=Decoration.set(lt.map(vt=>(vt.from==vt.to?fieldMarker:fieldRange).range(vt.from,vt.to)))}map(lt){let dt=[];for(let vt of this.ranges){let St=vt.map(lt);if(!St)return null;dt.push(St)}return new ActiveSnippet(dt,this.active)}selectionInsideField(lt){return lt.ranges.every(dt=>this.ranges.some(vt=>vt.field==this.active&&vt.from<=dt.from&&vt.to>=dt.to))}}const setActive=StateEffect.define({map(ft,lt){return ft&&ft.map(lt)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(ft,lt){for(let dt of lt.effects){if(dt.is(setActive))return dt.value;if(dt.is(moveToField)&&ft)return new ActiveSnippet(ft.ranges,dt.value)}return ft&&lt.docChanged&&(ft=ft.map(lt.changes)),ft&&lt.selection&&!ft.selectionInsideField(lt.selection)&&(ft=null),ft},provide:ft=>EditorView.decorations.from(ft,lt=>lt?lt.deco:Decoration.none)});function fieldSelection(ft,lt){return EditorSelection.create(ft.filter(dt=>dt.field==lt).map(dt=>EditorSelection.range(dt.from,dt.to)))}function snippet(ft){let lt=Snippet.parse(ft);return(dt,vt,St,Et)=>{let{text:Ct,ranges:At}=lt.instantiate(dt.state,St),Rt={changes:{from:St,to:Et,insert:Text.of(Ct)},scrollIntoView:!0,annotations:pickedCompletion.of(vt)};if(At.length&&(Rt.selection=fieldSelection(At,0)),At.length>1){let Dt=new ActiveSnippet(At,0),Nt=Rt.effects=[setActive.of(Dt)];dt.state.field(snippetState,!1)===void 0&&Nt.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}dt.dispatch(dt.state.update(Rt))}}function moveField(ft){return({state:lt,dispatch:dt})=>{let vt=lt.field(snippetState,!1);if(!vt||ft<0&&vt.active==0)return!1;let St=vt.active+ft,Et=ft>0&&!vt.ranges.some(Ct=>Ct.field==St+ft);return dt(lt.update({selection:fieldSelection(vt.ranges,St),effects:setActive.of(Et?null:new ActiveSnippet(vt.ranges,St))})),!0}}const clearSnippet=({state:ft,dispatch:lt})=>ft.field(snippetState,!1)?(lt(ft.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(ft){return ft.length?ft[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],ft=>ft.facet(snippetKeymap)));function snippetCompletion(ft,lt){return Object.assign(Object.assign({},lt),{apply:snippet(ft)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(ft,lt){let dt=lt.state.field(snippetState,!1),vt;if(!dt||(vt=lt.posAtCoords({x:ft.clientX,y:ft.clientY}))==null)return!1;let St=dt.ranges.find(Et=>Et.from<=vt&&Et.to>=vt);return!St||St.field==dt.active?!1:(lt.dispatch({selection:fieldSelection(dt.ranges,St.field),effects:setActive.of(dt.ranges.some(Et=>Et.field>St.field)?new ActiveSnippet(dt.ranges,St.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(ft,lt){let dt=lt.mapPos(ft,-1,MapMode.TrackAfter);return dt??void 0}}),skipBracketEffect=StateEffect.define({map(ft,lt){return lt.mapPos(ft)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(ft,lt){if(lt.selection){let dt=lt.state.doc.lineAt(lt.selection.main.head).from,vt=lt.startState.doc.lineAt(lt.startState.selection.main.head).from;dt!=lt.changes.mapPos(vt,-1)&&(ft=RangeSet.empty)}ft=ft.map(lt.changes);for(let dt of lt.effects)dt.is(closeBracketEffect)?ft=ft.update({add:[closedBracket.range(dt.value,dt.value+1)]}):dt.is(skipBracketEffect)&&(ft=ft.update({filter:vt=>vt!=dt.value}));return ft}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(ft){for(let lt=0;lt<definedClosing.length;lt+=2)if(definedClosing.charCodeAt(lt)==ft)return definedClosing.charAt(lt+1);return fromCodePoint(ft<128?ft:ft+1)}function config(ft,lt){return ft.languageDataAt("closeBrackets",lt)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((ft,lt,dt,vt)=>{if((android$1?ft.composing:ft.compositionStarted)||ft.state.readOnly)return!1;let St=ft.state.selection.main;if(vt.length>2||vt.length==2&&codePointSize(codePointAt(vt,0))==1||lt!=St.from||dt!=St.to)return!1;let Et=insertBracket(ft.state,vt);return Et?(ft.dispatch(Et),!0):!1}),deleteBracketPair=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let vt=config(ft,ft.selection.main.head).brackets||defaults.brackets,St=null,Et=ft.changeByRange(Ct=>{if(Ct.empty){let At=prevChar(ft.doc,Ct.head);for(let Rt of vt)if(Rt==At&&nextChar(ft.doc,Ct.head)==closing(codePointAt(Rt,0)))return{changes:{from:Ct.head-Rt.length,to:Ct.head+Rt.length},range:EditorSelection.cursor(Ct.head-Rt.length)}}return{range:St=Ct}});return St||lt(ft.update(Et,{scrollIntoView:!0,userEvent:"delete.backward"})),!St},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(ft,lt){let dt=config(ft,ft.selection.main.head),vt=dt.brackets||defaults.brackets;for(let St of vt){let Et=closing(codePointAt(St,0));if(lt==St)return Et==St?handleSame(ft,St,vt.indexOf(St+St+St)>-1,dt):handleOpen(ft,St,Et,dt.before||defaults.before);if(lt==Et&&closedBracketAt(ft,ft.selection.main.from))return handleClose(ft,St,Et)}return null}function closedBracketAt(ft,lt){let dt=!1;return ft.field(bracketState).between(0,ft.doc.length,vt=>{vt==lt&&(dt=!0)}),dt}function nextChar(ft,lt){let dt=ft.sliceString(lt,lt+2);return dt.slice(0,codePointSize(codePointAt(dt,0)))}function prevChar(ft,lt){let dt=ft.sliceString(lt-2,lt);return codePointSize(codePointAt(dt,0))==dt.length?dt:dt.slice(1)}function handleOpen(ft,lt,dt,vt){let St=null,Et=ft.changeByRange(Ct=>{if(!Ct.empty)return{changes:[{insert:lt,from:Ct.from},{insert:dt,from:Ct.to}],effects:closeBracketEffect.of(Ct.to+lt.length),range:EditorSelection.range(Ct.anchor+lt.length,Ct.head+lt.length)};let At=nextChar(ft.doc,Ct.head);return!At||/\s/.test(At)||vt.indexOf(At)>-1?{changes:{insert:lt+dt,from:Ct.head},effects:closeBracketEffect.of(Ct.head+lt.length),range:EditorSelection.cursor(Ct.head+lt.length)}:{range:St=Ct}});return St?null:ft.update(Et,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(ft,lt,dt){let vt=null,St=ft.selection.ranges.map(Et=>Et.empty&&nextChar(ft.doc,Et.head)==dt?EditorSelection.cursor(Et.head+dt.length):vt=Et);return vt?null:ft.update({selection:EditorSelection.create(St,ft.selection.mainIndex),scrollIntoView:!0,effects:ft.selection.ranges.map(({from:Et})=>skipBracketEffect.of(Et))})}function handleSame(ft,lt,dt,vt){let St=vt.stringPrefixes||defaults.stringPrefixes,Et=null,Ct=ft.changeByRange(At=>{if(!At.empty)return{changes:[{insert:lt,from:At.from},{insert:lt,from:At.to}],effects:closeBracketEffect.of(At.to+lt.length),range:EditorSelection.range(At.anchor+lt.length,At.head+lt.length)};let Rt=At.head,Dt=nextChar(ft.doc,Rt),Nt;if(Dt==lt){if(nodeStart(ft,Rt))return{changes:{insert:lt+lt,from:Rt},effects:closeBracketEffect.of(Rt+lt.length),range:EditorSelection.cursor(Rt+lt.length)};if(closedBracketAt(ft,Rt)){let Ft=dt&&ft.sliceDoc(Rt,Rt+lt.length*3)==lt+lt+lt;return{range:EditorSelection.cursor(Rt+lt.length*(Ft?3:1)),effects:skipBracketEffect.of(Rt)}}}else{if(dt&&ft.sliceDoc(Rt-2*lt.length,Rt)==lt+lt&&(Nt=canStartStringAt(ft,Rt-2*lt.length,St))>-1&&nodeStart(ft,Nt))return{changes:{insert:lt+lt+lt+lt,from:Rt},effects:closeBracketEffect.of(Rt+lt.length),range:EditorSelection.cursor(Rt+lt.length)};if(ft.charCategorizer(Rt)(Dt)!=CharCategory.Word&&canStartStringAt(ft,Rt,St)>-1&&!probablyInString(ft,Rt,lt,St))return{changes:{insert:lt+lt,from:Rt},effects:closeBracketEffect.of(Rt+lt.length),range:EditorSelection.cursor(Rt+lt.length)}}return{range:Et=At}});return Et?null:ft.update(Ct,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(ft,lt){let dt=syntaxTree(ft).resolveInner(lt+1);return dt.parent&&dt.from==lt}function probablyInString(ft,lt,dt,vt){let St=syntaxTree(ft).resolveInner(lt,-1),Et=vt.reduce((Ct,At)=>Math.max(Ct,At.length),0);for(let Ct=0;Ct<5;Ct++){let At=ft.sliceDoc(St.from,Math.min(St.to,St.from+dt.length+Et)),Rt=At.indexOf(dt);if(!Rt||Rt>-1&&vt.indexOf(At.slice(0,Rt))>-1){let Nt=St.firstChild;for(;Nt&&Nt.from==St.from&&Nt.to-Nt.from>dt.length+Rt;){if(ft.sliceDoc(Nt.to-dt.length,Nt.to)==dt)return!1;Nt=Nt.firstChild}return!0}let Dt=St.to==lt&&St.parent;if(!Dt)break;St=Dt}return!1}function canStartStringAt(ft,lt,dt){let vt=ft.charCategorizer(lt);if(vt(ft.sliceDoc(lt-1,lt))!=CharCategory.Word)return lt;for(let St of dt){let Et=lt-St.length;if(ft.sliceDoc(Et,lt)==St&&vt(ft.sliceDoc(Et-1,Et))!=CharCategory.Word)return Et}return-1}function autocompletion(ft={}){return[completionState,completionConfig.of(ft),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],ft=>ft.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),cache$1=new NodeWeakMap,ScopeNodes$1=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID$1(ft){return(lt,dt,vt)=>{if(vt)return!1;let St=lt.node.getChild("VariableName");return St&&dt(St,ft),!0}}const gatherCompletions$1={FunctionDefinition:defID$1("function"),ClassDefinition:defID$1("class"),ForStatement(ft,lt,dt){if(dt){for(let vt=ft.node.firstChild;vt;vt=vt.nextSibling)if(vt.name=="VariableName")lt(vt,"variable");else if(vt.name=="in")break}},ImportStatement(ft,lt){var dt,vt;let{node:St}=ft,Et=((dt=St.firstChild)===null||dt===void 0?void 0:dt.name)=="from";for(let Ct=St.getChild("import");Ct;Ct=Ct.nextSibling)Ct.name=="VariableName"&&((vt=Ct.nextSibling)===null||vt===void 0?void 0:vt.name)!="as"&&lt(Ct,Et?"variable":"namespace")},AssignStatement(ft,lt){for(let dt=ft.node.firstChild;dt;dt=dt.nextSibling)if(dt.name=="VariableName")lt(dt,"variable");else if(dt.name==":"||dt.name=="AssignOp")break},ParamList(ft,lt){for(let dt=null,vt=ft.node.firstChild;vt;vt=vt.nextSibling)vt.name=="VariableName"&&(!dt||!/\*|AssignOp/.test(dt.name))&&lt(vt,"variable"),dt=vt},CapturePattern:defID$1("variable"),AsPattern:defID$1("variable"),__proto__:null};function getScope$1(ft,lt){let dt=cache$1.get(lt);if(dt)return dt;let vt=[],St=!0;function Et(Ct,At){let Rt=ft.sliceString(Ct.from,Ct.to);vt.push({label:Rt,type:At})}return lt.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(Ct.name){let At=gatherCompletions$1[Ct.name];if(At&&At(Ct,Et,St)||!St&&ScopeNodes$1.has(Ct.name))return!1;St=!1}else if(Ct.to-Ct.from>8192){for(let At of getScope$1(ft,Ct.node))vt.push(At);return!1}}),cache$1.set(lt,vt),vt}const Identifier$1=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete$1=["String","FormatString","Comment","PropertyName"];function localCompletionSource$1(ft){let lt=syntaxTree(ft.state).resolveInner(ft.pos,-1);if(dontComplete$1.indexOf(lt.name)>-1)return null;let dt=lt.name=="VariableName"||lt.to-lt.from<20&&Identifier$1.test(ft.state.sliceDoc(lt.from,lt.to));if(!dt&&!ft.explicit)return null;let vt=[];for(let St=lt;St;St=St.parent)ScopeNodes$1.has(St.name)&&(vt=vt.concat(getScope$1(ft.state.doc,St)));return{options:vt,from:dt?lt.from:ft.pos,validFor:Identifier$1}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(ft=>({label:ft,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(ft=>({label:ft,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(ft=>({label:ft,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(ft=>({label:ft,type:"function"}))),snippets$1=[snippetCompletion("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete$1,completeFromList(globals.concat(snippets$1)));function indentBody(ft,lt){let dt=ft.lineIndent(lt.from),vt=ft.lineAt(ft.pos,-1),St=vt.from+vt.text.length;return!/\S/.test(vt.text)&&ft.node.to<St+100&&!/\S/.test(ft.state.sliceDoc(St,ft.node.to))&&ft.lineIndent(ft.pos,-1)<=dt||/^\s*(else:|elif |except |finally:)/.test(ft.textAfter)&&ft.lineIndent(ft.pos,-1)>dt?null:dt+ft.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser$1.configure({props:[indentNodeProp.add({Body:ft=>{var lt;return(lt=indentBody(ft,ft.node))!==null&&lt!==void 0?lt:ft.continue()},IfStatement:ft=>/^\s*(else:|elif )/.test(ft.textAfter)?ft.baseIndent:ft.continue(),TryStatement:ft=>/^\s*(except |finally:|else:)/.test(ft.textAfter)?ft.baseIndent:ft.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:ft=>{if(ft.pos+/\s*/.exec(ft.textAfter)[0].length>=ft.node.to){let lt=null;for(let dt=ft.node,vt=dt.to;dt=dt.lastChild,!(!dt||dt.to!=vt);)dt.type.name=="Body"&&(lt=dt);if(lt){let dt=indentBody(ft,lt);if(dt!=null)return dt}}return ft.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(ft,lt)=>({from:ft.from+1,to:ft.to-(ft.to==lt.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource$1}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function _objectWithoutPropertiesLoose(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),St,Et;for(Et=0;Et<vt.length;Et++)St=vt[Et],!(lt.indexOf(St)>=0)&&(dt[St]=ft[St]);return dt}const toggleComment=ft=>{let{state:lt}=ft,dt=lt.doc.lineAt(lt.selection.main.head),vt=getConfig(ft.state,dt.from);return vt.line?toggleLineComment(ft):vt.block?toggleBlockCommentByLine(ft):!1};function command(ft,lt){return({state:dt,dispatch:vt})=>{if(dt.readOnly)return!1;let St=ft(lt,dt);return St?(vt(dt.update(St)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((ft,lt)=>changeBlockComment(ft,lt,selectedLineRanges(lt)),0);function getConfig(ft,lt){let dt=ft.languageDataAt("commentTokens",lt);return dt.length?dt[0]:{}}const SearchMargin=50;function findBlockComment(ft,{open:lt,close:dt},vt,St){let Et=ft.sliceDoc(vt-SearchMargin,vt),Ct=ft.sliceDoc(St,St+SearchMargin),At=/\s*$/.exec(Et)[0].length,Rt=/^\s*/.exec(Ct)[0].length,Dt=Et.length-At;if(Et.slice(Dt-lt.length,Dt)==lt&&Ct.slice(Rt,Rt+dt.length)==dt)return{open:{pos:vt-At,margin:At&&1},close:{pos:St+Rt,margin:Rt&&1}};let Nt,Ft;St-vt<=2*SearchMargin?Nt=Ft=ft.sliceDoc(vt,St):(Nt=ft.sliceDoc(vt,vt+SearchMargin),Ft=ft.sliceDoc(St-SearchMargin,St));let Ut=/^\s*/.exec(Nt)[0].length,Wt=/\s*$/.exec(Ft)[0].length,Zt=Ft.length-Wt-dt.length;return Nt.slice(Ut,Ut+lt.length)==lt&&Ft.slice(Zt,Zt+dt.length)==dt?{open:{pos:vt+Ut+lt.length,margin:/\s/.test(Nt.charAt(Ut+lt.length))?1:0},close:{pos:St-Wt-dt.length,margin:/\s/.test(Ft.charAt(Zt-1))?1:0}}:null}function selectedLineRanges(ft){let lt=[];for(let dt of ft.selection.ranges){let vt=ft.doc.lineAt(dt.from),St=dt.to<=vt.to?vt:ft.doc.lineAt(dt.to),Et=lt.length-1;Et>=0&&lt[Et].to>vt.from?lt[Et].to=St.to:lt.push({from:vt.from,to:St.to})}return lt}function changeBlockComment(ft,lt,dt=lt.selection.ranges){let vt=dt.map(Et=>getConfig(lt,Et.from).block);if(!vt.every(Et=>Et))return null;let St=dt.map((Et,Ct)=>findBlockComment(lt,vt[Ct],Et.from,Et.to));if(ft!=2&&!St.every(Et=>Et))return{changes:lt.changes(dt.map((Et,Ct)=>St[Ct]?[]:[{from:Et.from,insert:vt[Ct].open+" "},{from:Et.to,insert:" "+vt[Ct].close}]))};if(ft!=1&&St.some(Et=>Et)){let Et=[];for(let Ct=0,At;Ct<St.length;Ct++)if(At=St[Ct]){let Rt=vt[Ct],{open:Dt,close:Nt}=At;Et.push({from:Dt.pos-Rt.open.length,to:Dt.pos+Dt.margin},{from:Nt.pos-Nt.margin,to:Nt.pos+Rt.close.length})}return{changes:Et}}return null}function changeLineComment(ft,lt,dt=lt.selection.ranges){let vt=[],St=-1;for(let{from:Et,to:Ct}of dt){let At=vt.length,Rt=1e9;for(let Dt=Et;Dt<=Ct;){let Nt=lt.doc.lineAt(Dt);if(Nt.from>St&&(Et==Ct||Ct>Nt.from)){St=Nt.from;let Ft=getConfig(lt,Nt.from).line;if(!Ft)continue;let Ut=/^\s*/.exec(Nt.text)[0].length,Wt=Ut==Nt.length,Zt=Nt.text.slice(Ut,Ut+Ft.length)==Ft?Ut:-1;Ut<Nt.text.length&&Ut<Rt&&(Rt=Ut),vt.push({line:Nt,comment:Zt,token:Ft,indent:Ut,empty:Wt,single:!1})}Dt=Nt.to+1}if(Rt<1e9)for(let Dt=At;Dt<vt.length;Dt++)vt[Dt].indent<vt[Dt].line.text.length&&(vt[Dt].indent=Rt);vt.length==At+1&&(vt[At].single=!0)}if(ft!=2&&vt.some(Et=>Et.comment<0&&(!Et.empty||Et.single))){let Et=[];for(let{line:At,token:Rt,indent:Dt,empty:Nt,single:Ft}of vt)(Ft||!Nt)&&Et.push({from:At.from+Dt,insert:Rt+" "});let Ct=lt.changes(Et);return{changes:Ct,selection:lt.selection.map(Ct,1)}}else if(ft!=1&&vt.some(Et=>Et.comment>=0)){let Et=[];for(let{line:Ct,comment:At,token:Rt}of vt)if(At>=0){let Dt=Ct.from+At,Nt=Dt+Rt.length;Ct.text[Nt-Ct.from]==" "&&Nt++,Et.push({from:Dt,to:Nt})}return{changes:Et}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(ft){return combineConfig(ft,{minDepth:100,newGroupDelay:500,joinToEvent:(lt,dt)=>dt},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(lt,dt)=>(vt,St)=>lt(vt,St)||dt(vt,St)})}});function changeEnd(ft){let lt=0;return ft.iterChangedRanges((dt,vt)=>lt=vt),lt}const historyField_=StateField.define({create(){return HistoryState.empty},update(ft,lt){let dt=lt.state.facet(historyConfig),vt=lt.annotation(fromHistory);if(vt){let Rt=lt.docChanged?EditorSelection.single(changeEnd(lt.changes)):void 0,Dt=HistEvent.fromTransaction(lt,Rt),Nt=vt.side,Ft=Nt==0?ft.undone:ft.done;return Dt?Ft=updateBranch(Ft,Ft.length,dt.minDepth,Dt):Ft=addSelection(Ft,lt.startState.selection),new HistoryState(Nt==0?vt.rest:Ft,Nt==0?Ft:vt.rest)}let St=lt.annotation(isolateHistory);if((St=="full"||St=="before")&&(ft=ft.isolate()),lt.annotation(Transaction.addToHistory)===!1)return lt.changes.empty?ft:ft.addMapping(lt.changes.desc);let Et=HistEvent.fromTransaction(lt),Ct=lt.annotation(Transaction.time),At=lt.annotation(Transaction.userEvent);return Et?ft=ft.addChanges(Et,Ct,At,dt,lt):lt.selection&&(ft=ft.addSelection(lt.startState.selection,Ct,At,dt.newGroupDelay)),(St=="full"||St=="after")&&(ft=ft.isolate()),ft},toJSON(ft){return{done:ft.done.map(lt=>lt.toJSON()),undone:ft.undone.map(lt=>lt.toJSON())}},fromJSON(ft){return new HistoryState(ft.done.map(HistEvent.fromJSON),ft.undone.map(HistEvent.fromJSON))}});function history(ft={}){return[historyField_,historyConfig.of(ft),EditorView.domEventHandlers({beforeinput(lt,dt){let vt=lt.inputType=="historyUndo"?undo:lt.inputType=="historyRedo"?redo:null;return vt?(lt.preventDefault(),vt(dt)):!1}})]}function cmd(ft,lt){return function({state:dt,dispatch:vt}){if(!lt&&dt.readOnly)return!1;let St=dt.field(historyField_,!1);if(!St)return!1;let Et=St.pop(ft,dt,lt);return Et?(vt(Et),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(lt,dt,vt,St,Et){this.changes=lt,this.effects=dt,this.mapped=vt,this.startSelection=St,this.selectionsAfter=Et}setSelAfter(lt){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,lt)}toJSON(){var lt,dt,vt;return{changes:(lt=this.changes)===null||lt===void 0?void 0:lt.toJSON(),mapped:(dt=this.mapped)===null||dt===void 0?void 0:dt.toJSON(),startSelection:(vt=this.startSelection)===null||vt===void 0?void 0:vt.toJSON(),selectionsAfter:this.selectionsAfter.map(St=>St.toJSON())}}static fromJSON(lt){return new HistEvent(lt.changes&&ChangeSet.fromJSON(lt.changes),[],lt.mapped&&ChangeDesc.fromJSON(lt.mapped),lt.startSelection&&EditorSelection.fromJSON(lt.startSelection),lt.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(lt,dt){let vt=none;for(let St of lt.startState.facet(invertedEffects)){let Et=St(lt);Et.length&&(vt=vt.concat(Et))}return!vt.length&&lt.changes.empty?null:new HistEvent(lt.changes.invert(lt.startState.doc),vt,void 0,dt||lt.startState.selection,none)}static selection(lt){return new HistEvent(void 0,none,void 0,void 0,lt)}}function updateBranch(ft,lt,dt,vt){let St=lt+1>dt+20?lt-dt-1:0,Et=ft.slice(St,lt);return Et.push(vt),Et}function isAdjacent(ft,lt){let dt=[],vt=!1;return ft.iterChangedRanges((St,Et)=>dt.push(St,Et)),lt.iterChangedRanges((St,Et,Ct,At)=>{for(let Rt=0;Rt<dt.length;){let Dt=dt[Rt++],Nt=dt[Rt++];At>=Dt&&Ct<=Nt&&(vt=!0)}}),vt}function eqSelectionShape(ft,lt){return ft.ranges.length==lt.ranges.length&&ft.ranges.filter((dt,vt)=>dt.empty!=lt.ranges[vt].empty).length===0}function conc(ft,lt){return ft.length?lt.length?ft.concat(lt):ft:lt}const none=[],MaxSelectionsPerEvent=200;function addSelection(ft,lt){if(ft.length){let dt=ft[ft.length-1],vt=dt.selectionsAfter.slice(Math.max(0,dt.selectionsAfter.length-MaxSelectionsPerEvent));return vt.length&&vt[vt.length-1].eq(lt)?ft:(vt.push(lt),updateBranch(ft,ft.length-1,1e9,dt.setSelAfter(vt)))}else return[HistEvent.selection([lt])]}function popSelection(ft){let lt=ft[ft.length-1],dt=ft.slice();return dt[ft.length-1]=lt.setSelAfter(lt.selectionsAfter.slice(0,lt.selectionsAfter.length-1)),dt}function addMappingToBranch(ft,lt){if(!ft.length)return ft;let dt=ft.length,vt=none;for(;dt;){let St=mapEvent(ft[dt-1],lt,vt);if(St.changes&&!St.changes.empty||St.effects.length){let Et=ft.slice(0,dt);return Et[dt-1]=St,Et}else lt=St.mapped,dt--,vt=St.selectionsAfter}return vt.length?[HistEvent.selection(vt)]:none}function mapEvent(ft,lt,dt){let vt=conc(ft.selectionsAfter.length?ft.selectionsAfter.map(At=>At.map(lt)):none,dt);if(!ft.changes)return HistEvent.selection(vt);let St=ft.changes.map(lt),Et=lt.mapDesc(ft.changes,!0),Ct=ft.mapped?ft.mapped.composeDesc(Et):Et;return new HistEvent(St,StateEffect.mapEffects(ft.effects,lt),Ct,ft.startSelection.map(Et),vt)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(lt,dt,vt=0,St=void 0){this.done=lt,this.undone=dt,this.prevTime=vt,this.prevUserEvent=St}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(lt,dt,vt,St,Et){let Ct=this.done,At=Ct[Ct.length-1];return At&&At.changes&&!At.changes.empty&&lt.changes&&(!vt||joinableUserEvent.test(vt))&&(!At.selectionsAfter.length&&dt-this.prevTime<St.newGroupDelay&&St.joinToEvent(Et,isAdjacent(At.changes,lt.changes))||vt=="input.type.compose")?Ct=updateBranch(Ct,Ct.length-1,St.minDepth,new HistEvent(lt.changes.compose(At.changes),conc(lt.effects,At.effects),At.mapped,At.startSelection,none)):Ct=updateBranch(Ct,Ct.length,St.minDepth,lt),new HistoryState(Ct,none,dt,vt)}addSelection(lt,dt,vt,St){let Et=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return Et.length>0&&dt-this.prevTime<St&&vt==this.prevUserEvent&&vt&&/^select($|\.)/.test(vt)&&eqSelectionShape(Et[Et.length-1],lt)?this:new HistoryState(addSelection(this.done,lt),this.undone,dt,vt)}addMapping(lt){return new HistoryState(addMappingToBranch(this.done,lt),addMappingToBranch(this.undone,lt),this.prevTime,this.prevUserEvent)}pop(lt,dt,vt){let St=lt==0?this.done:this.undone;if(St.length==0)return null;let Et=St[St.length-1];if(vt&&Et.selectionsAfter.length)return dt.update({selection:Et.selectionsAfter[Et.selectionsAfter.length-1],annotations:fromHistory.of({side:lt,rest:popSelection(St)}),userEvent:lt==0?"select.undo":"select.redo",scrollIntoView:!0});if(Et.changes){let Ct=St.length==1?none:St.slice(0,St.length-1);return Et.mapped&&(Ct=addMappingToBranch(Ct,Et.mapped)),dt.update({changes:Et.changes,selection:Et.startSelection,effects:Et.effects,annotations:fromHistory.of({side:lt,rest:Ct}),filter:!1,userEvent:lt==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(ft,lt){return EditorSelection.create(ft.ranges.map(lt),ft.mainIndex)}function setSel(ft,lt){return ft.update({selection:lt,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:ft,dispatch:lt},dt){let vt=updateSel(ft.selection,dt);return vt.eq(ft.selection)?!1:(lt(setSel(ft,vt)),!0)}function rangeEnd(ft,lt){return EditorSelection.cursor(lt?ft.to:ft.from)}function cursorByChar(ft,lt){return moveSel(ft,dt=>dt.empty?ft.moveByChar(dt,lt):rangeEnd(dt,lt))}function ltrAtCursor(ft){return ft.textDirectionAt(ft.state.selection.main.head)==Direction.LTR}const cursorCharLeft=ft=>cursorByChar(ft,!ltrAtCursor(ft)),cursorCharRight=ft=>cursorByChar(ft,ltrAtCursor(ft));function cursorByGroup(ft,lt){return moveSel(ft,dt=>dt.empty?ft.moveByGroup(dt,lt):rangeEnd(dt,lt))}const cursorGroupLeft=ft=>cursorByGroup(ft,!ltrAtCursor(ft)),cursorGroupRight=ft=>cursorByGroup(ft,ltrAtCursor(ft));function interestingNode(ft,lt,dt){if(lt.type.prop(dt))return!0;let vt=lt.to-lt.from;return vt&&(vt>2||/[^\s,.;:]/.test(ft.sliceDoc(lt.from,lt.to)))||lt.firstChild}function moveBySyntax(ft,lt,dt){let vt=syntaxTree(ft).resolveInner(lt.head),St=dt?NodeProp.closedBy:NodeProp.openedBy;for(let Rt=lt.head;;){let Dt=dt?vt.childAfter(Rt):vt.childBefore(Rt);if(!Dt)break;interestingNode(ft,Dt,St)?vt=Dt:Rt=dt?Dt.to:Dt.from}let Et=vt.type.prop(St),Ct,At;return Et&&(Ct=dt?matchBrackets(ft,vt.from,1):matchBrackets(ft,vt.to,-1))&&Ct.matched?At=dt?Ct.end.to:Ct.end.from:At=dt?vt.to:vt.from,EditorSelection.cursor(At,dt?-1:1)}const cursorSyntaxLeft=ft=>moveSel(ft,lt=>moveBySyntax(ft.state,lt,!ltrAtCursor(ft))),cursorSyntaxRight=ft=>moveSel(ft,lt=>moveBySyntax(ft.state,lt,ltrAtCursor(ft)));function cursorByLine(ft,lt){return moveSel(ft,dt=>{if(!dt.empty)return rangeEnd(dt,lt);let vt=ft.moveVertically(dt,lt);return vt.head!=dt.head?vt:ft.moveToLineBoundary(dt,lt)})}const cursorLineUp=ft=>cursorByLine(ft,!1),cursorLineDown=ft=>cursorByLine(ft,!0);function pageInfo(ft){let lt=ft.scrollDOM.clientHeight<ft.scrollDOM.scrollHeight-2,dt=0,vt=0,St;if(lt){for(let Et of ft.state.facet(EditorView.scrollMargins)){let Ct=Et(ft);Ct!=null&&Ct.top&&(dt=Math.max(Ct==null?void 0:Ct.top,dt)),Ct!=null&&Ct.bottom&&(vt=Math.max(Ct==null?void 0:Ct.bottom,vt))}St=ft.scrollDOM.clientHeight-dt-vt}else St=(ft.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:dt,marginBottom:vt,selfScroll:lt,height:Math.max(ft.defaultLineHeight,St-5)}}function cursorByPage(ft,lt){let dt=pageInfo(ft),{state:vt}=ft,St=updateSel(vt.selection,Ct=>Ct.empty?ft.moveVertically(Ct,lt,dt.height):rangeEnd(Ct,lt));if(St.eq(vt.selection))return!1;let Et;if(dt.selfScroll){let Ct=ft.coordsAtPos(vt.selection.main.head),At=ft.scrollDOM.getBoundingClientRect(),Rt=At.top+dt.marginTop,Dt=At.bottom-dt.marginBottom;Ct&&Ct.top>Rt&&Ct.bottom<Dt&&(Et=EditorView.scrollIntoView(St.main.head,{y:"start",yMargin:Ct.top-Rt}))}return ft.dispatch(setSel(vt,St),{effects:Et}),!0}const cursorPageUp=ft=>cursorByPage(ft,!1),cursorPageDown=ft=>cursorByPage(ft,!0);function moveByLineBoundary(ft,lt,dt){let vt=ft.lineBlockAt(lt.head),St=ft.moveToLineBoundary(lt,dt);if(St.head==lt.head&&St.head!=(dt?vt.to:vt.from)&&(St=ft.moveToLineBoundary(lt,dt,!1)),!dt&&St.head==vt.from&&vt.length){let Et=/^\s*/.exec(ft.state.sliceDoc(vt.from,Math.min(vt.from+100,vt.to)))[0].length;Et&&lt.head!=vt.from+Et&&(St=EditorSelection.cursor(vt.from+Et))}return St}const cursorLineBoundaryForward=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!0)),cursorLineBoundaryBackward=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!1)),cursorLineBoundaryLeft=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!ltrAtCursor(ft))),cursorLineBoundaryRight=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,ltrAtCursor(ft))),cursorLineStart=ft=>moveSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).from,1)),cursorLineEnd=ft=>moveSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).to,-1));function toMatchingBracket(ft,lt,dt){let vt=!1,St=updateSel(ft.selection,Et=>{let Ct=matchBrackets(ft,Et.head,-1)||matchBrackets(ft,Et.head,1)||Et.head>0&&matchBrackets(ft,Et.head-1,1)||Et.head<ft.doc.length&&matchBrackets(ft,Et.head+1,-1);if(!Ct||!Ct.end)return Et;vt=!0;let At=Ct.start.from==Et.head?Ct.end.to:Ct.end.from;return dt?EditorSelection.range(Et.anchor,At):EditorSelection.cursor(At)});return vt?(lt(setSel(ft,St)),!0):!1}const cursorMatchingBracket=({state:ft,dispatch:lt})=>toMatchingBracket(ft,lt,!1);function extendSel(ft,lt){let dt=updateSel(ft.state.selection,vt=>{let St=lt(vt);return EditorSelection.range(vt.anchor,St.head,St.goalColumn,St.bidiLevel||void 0)});return dt.eq(ft.state.selection)?!1:(ft.dispatch(setSel(ft.state,dt)),!0)}function selectByChar(ft,lt){return extendSel(ft,dt=>ft.moveByChar(dt,lt))}const selectCharLeft=ft=>selectByChar(ft,!ltrAtCursor(ft)),selectCharRight=ft=>selectByChar(ft,ltrAtCursor(ft));function selectByGroup(ft,lt){return extendSel(ft,dt=>ft.moveByGroup(dt,lt))}const selectGroupLeft=ft=>selectByGroup(ft,!ltrAtCursor(ft)),selectGroupRight=ft=>selectByGroup(ft,ltrAtCursor(ft)),selectSyntaxLeft=ft=>extendSel(ft,lt=>moveBySyntax(ft.state,lt,!ltrAtCursor(ft))),selectSyntaxRight=ft=>extendSel(ft,lt=>moveBySyntax(ft.state,lt,ltrAtCursor(ft)));function selectByLine(ft,lt){return extendSel(ft,dt=>ft.moveVertically(dt,lt))}const selectLineUp=ft=>selectByLine(ft,!1),selectLineDown=ft=>selectByLine(ft,!0);function selectByPage(ft,lt){return extendSel(ft,dt=>ft.moveVertically(dt,lt,pageInfo(ft).height))}const selectPageUp=ft=>selectByPage(ft,!1),selectPageDown=ft=>selectByPage(ft,!0),selectLineBoundaryForward=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!0)),selectLineBoundaryBackward=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!1)),selectLineBoundaryLeft=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!ltrAtCursor(ft))),selectLineBoundaryRight=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,ltrAtCursor(ft))),selectLineStart=ft=>extendSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).from)),selectLineEnd=ft=>extendSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).to)),cursorDocStart=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:0})),!0),cursorDocEnd=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.doc.length})),!0),selectDocStart=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.selection.main.anchor,head:0})),!0),selectDocEnd=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.selection.main.anchor,head:ft.doc.length})),!0),selectAll=({state:ft,dispatch:lt})=>(lt(ft.update({selection:{anchor:0,head:ft.doc.length},userEvent:"select"})),!0),selectLine=({state:ft,dispatch:lt})=>{let dt=selectedLineBlocks(ft).map(({from:vt,to:St})=>EditorSelection.range(vt,Math.min(St+1,ft.doc.length)));return lt(ft.update({selection:EditorSelection.create(dt),userEvent:"select"})),!0},selectParentSyntax=({state:ft,dispatch:lt})=>{let dt=updateSel(ft.selection,vt=>{var St;let Et=syntaxTree(ft).resolveInner(vt.head,1);for(;!(Et.from<vt.from&&Et.to>=vt.to||Et.to>vt.to&&Et.from<=vt.from||!(!((St=Et.parent)===null||St===void 0)&&St.parent));)Et=Et.parent;return EditorSelection.range(Et.to,Et.from)});return lt(setSel(ft,dt)),!0},simplifySelection=({state:ft,dispatch:lt})=>{let dt=ft.selection,vt=null;return dt.ranges.length>1?vt=EditorSelection.create([dt.main]):dt.main.empty||(vt=EditorSelection.create([EditorSelection.cursor(dt.main.head)])),vt?(lt(setSel(ft,vt)),!0):!1};function deleteBy(ft,lt){if(ft.state.readOnly)return!1;let dt="delete.selection",{state:vt}=ft,St=vt.changeByRange(Et=>{let{from:Ct,to:At}=Et;if(Ct==At){let Rt=lt(Ct);Rt<Ct?(dt="delete.backward",Rt=skipAtomic(ft,Rt,!1)):Rt>Ct&&(dt="delete.forward",Rt=skipAtomic(ft,Rt,!0)),Ct=Math.min(Ct,Rt),At=Math.max(At,Rt)}else Ct=skipAtomic(ft,Ct,!1),At=skipAtomic(ft,At,!0);return Ct==At?{range:Et}:{changes:{from:Ct,to:At},range:EditorSelection.cursor(Ct)}});return St.changes.empty?!1:(ft.dispatch(vt.update(St,{scrollIntoView:!0,userEvent:dt,effects:dt=="delete.selection"?EditorView.announce.of(vt.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(ft,lt,dt){if(ft instanceof EditorView)for(let vt of ft.state.facet(EditorView.atomicRanges).map(St=>St(ft)))vt.between(lt,lt,(St,Et)=>{St<lt&&Et>lt&&(lt=dt?Et:St)});return lt}const deleteByChar=(ft,lt)=>deleteBy(ft,dt=>{let{state:vt}=ft,St=vt.doc.lineAt(dt),Et,Ct;if(!lt&&dt>St.from&&dt<St.from+200&&!/[^ \t]/.test(Et=St.text.slice(0,dt-St.from))){if(Et[Et.length-1]=="	")return dt-1;let At=countColumn(Et,vt.tabSize),Rt=At%getIndentUnit(vt)||getIndentUnit(vt);for(let Dt=0;Dt<Rt&&Et[Et.length-1-Dt]==" ";Dt++)dt--;Ct=dt}else Ct=findClusterBreak(St.text,dt-St.from,lt,lt)+St.from,Ct==dt&&St.number!=(lt?vt.doc.lines:1)&&(Ct+=lt?1:-1);return Ct}),deleteCharBackward=ft=>deleteByChar(ft,!1),deleteCharForward=ft=>deleteByChar(ft,!0),deleteByGroup=(ft,lt)=>deleteBy(ft,dt=>{let vt=dt,{state:St}=ft,Et=St.doc.lineAt(vt),Ct=St.charCategorizer(vt);for(let At=null;;){if(vt==(lt?Et.to:Et.from)){vt==dt&&Et.number!=(lt?St.doc.lines:1)&&(vt+=lt?1:-1);break}let Rt=findClusterBreak(Et.text,vt-Et.from,lt)+Et.from,Dt=Et.text.slice(Math.min(vt,Rt)-Et.from,Math.max(vt,Rt)-Et.from),Nt=Ct(Dt);if(At!=null&&Nt!=At)break;(Dt!=" "||vt!=dt)&&(At=Nt),vt=Rt}return vt}),deleteGroupBackward=ft=>deleteByGroup(ft,!1),deleteGroupForward=ft=>deleteByGroup(ft,!0),deleteToLineEnd=ft=>deleteBy(ft,lt=>{let dt=ft.lineBlockAt(lt).to;return lt<dt?dt:Math.min(ft.state.doc.length,lt+1)}),deleteToLineStart=ft=>deleteBy(ft,lt=>{let dt=ft.lineBlockAt(lt).from;return lt>dt?dt:Math.max(0,lt-1)}),splitLine=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=ft.changeByRange(vt=>({changes:{from:vt.from,to:vt.to,insert:Text.of(["",""])},range:EditorSelection.cursor(vt.from)}));return lt(ft.update(dt,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=ft.changeByRange(vt=>{if(!vt.empty||vt.from==0||vt.from==ft.doc.length)return{range:vt};let St=vt.from,Et=ft.doc.lineAt(St),Ct=St==Et.from?St-1:findClusterBreak(Et.text,St-Et.from,!1)+Et.from,At=St==Et.to?St+1:findClusterBreak(Et.text,St-Et.from,!0)+Et.from;return{changes:{from:Ct,to:At,insert:ft.doc.slice(St,At).append(ft.doc.slice(Ct,St))},range:EditorSelection.cursor(At)}});return dt.changes.empty?!1:(lt(ft.update(dt,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(ft){let lt=[],dt=-1;for(let vt of ft.selection.ranges){let St=ft.doc.lineAt(vt.from),Et=ft.doc.lineAt(vt.to);if(!vt.empty&&vt.to==Et.from&&(Et=ft.doc.lineAt(vt.to-1)),dt>=St.number){let Ct=lt[lt.length-1];Ct.to=Et.to,Ct.ranges.push(vt)}else lt.push({from:St.from,to:Et.to,ranges:[vt]});dt=Et.number+1}return lt}function moveLine(ft,lt,dt){if(ft.readOnly)return!1;let vt=[],St=[];for(let Et of selectedLineBlocks(ft)){if(dt?Et.to==ft.doc.length:Et.from==0)continue;let Ct=ft.doc.lineAt(dt?Et.to+1:Et.from-1),At=Ct.length+1;if(dt){vt.push({from:Et.to,to:Ct.to},{from:Et.from,insert:Ct.text+ft.lineBreak});for(let Rt of Et.ranges)St.push(EditorSelection.range(Math.min(ft.doc.length,Rt.anchor+At),Math.min(ft.doc.length,Rt.head+At)))}else{vt.push({from:Ct.from,to:Et.from},{from:Et.to,insert:ft.lineBreak+Ct.text});for(let Rt of Et.ranges)St.push(EditorSelection.range(Rt.anchor-At,Rt.head-At))}}return vt.length?(lt(ft.update({changes:vt,scrollIntoView:!0,selection:EditorSelection.create(St,ft.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:ft,dispatch:lt})=>moveLine(ft,lt,!1),moveLineDown=({state:ft,dispatch:lt})=>moveLine(ft,lt,!0);function copyLine(ft,lt,dt){if(ft.readOnly)return!1;let vt=[];for(let St of selectedLineBlocks(ft))dt?vt.push({from:St.from,insert:ft.doc.slice(St.from,St.to)+ft.lineBreak}):vt.push({from:St.to,insert:ft.lineBreak+ft.doc.slice(St.from,St.to)});return lt(ft.update({changes:vt,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:ft,dispatch:lt})=>copyLine(ft,lt,!1),copyLineDown=({state:ft,dispatch:lt})=>copyLine(ft,lt,!0),deleteLine=ft=>{if(ft.state.readOnly)return!1;let{state:lt}=ft,dt=lt.changes(selectedLineBlocks(lt).map(({from:St,to:Et})=>(St>0?St--:Et<lt.doc.length&&Et++,{from:St,to:Et}))),vt=updateSel(lt.selection,St=>ft.moveVertically(St,!0)).map(dt);return ft.dispatch({changes:dt,selection:vt,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(ft,lt){if(/\(\)|\[\]|\{\}/.test(ft.sliceDoc(lt-1,lt+1)))return{from:lt,to:lt};let dt=syntaxTree(ft).resolveInner(lt),vt=dt.childBefore(lt),St=dt.childAfter(lt),Et;return vt&&St&&vt.to<=lt&&St.from>=lt&&(Et=vt.type.prop(NodeProp.closedBy))&&Et.indexOf(St.name)>-1&&ft.doc.lineAt(vt.to).from==ft.doc.lineAt(St.from).from?{from:vt.to,to:St.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(ft){return({state:lt,dispatch:dt})=>{if(lt.readOnly)return!1;let vt=lt.changeByRange(St=>{let{from:Et,to:Ct}=St,At=lt.doc.lineAt(Et),Rt=!ft&&Et==Ct&&isBetweenBrackets(lt,Et);ft&&(Et=Ct=(Ct<=At.to?At:lt.doc.lineAt(Ct)).to);let Dt=new IndentContext(lt,{simulateBreak:Et,simulateDoubleBreak:!!Rt}),Nt=getIndentation(Dt,Et);for(Nt==null&&(Nt=/^\s*/.exec(lt.doc.lineAt(Et).text)[0].length);Ct<At.to&&/\s/.test(At.text[Ct-At.from]);)Ct++;Rt?{from:Et,to:Ct}=Rt:Et>At.from&&Et<At.from+100&&!/\S/.test(At.text.slice(0,Et))&&(Et=At.from);let Ft=["",indentString(lt,Nt)];return Rt&&Ft.push(indentString(lt,Dt.lineIndent(At.from,-1))),{changes:{from:Et,to:Ct,insert:Text.of(Ft)},range:EditorSelection.cursor(Et+1+Ft[1].length)}});return dt(lt.update(vt,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(ft,lt){let dt=-1;return ft.changeByRange(vt=>{let St=[];for(let Ct=vt.from;Ct<=vt.to;){let At=ft.doc.lineAt(Ct);At.number>dt&&(vt.empty||vt.to>At.from)&&(lt(At,St,vt),dt=At.number),Ct=At.to+1}let Et=ft.changes(St);return{changes:St,range:EditorSelection.range(Et.mapPos(vt.anchor,1),Et.mapPos(vt.head,1))}})}const indentSelection=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=Object.create(null),vt=new IndentContext(ft,{overrideIndentation:Et=>{let Ct=dt[Et];return Ct??-1}}),St=changeBySelectedLine(ft,(Et,Ct,At)=>{let Rt=getIndentation(vt,Et.from);if(Rt==null)return;/\S/.test(Et.text)||(Rt=0);let Dt=/^\s*/.exec(Et.text)[0],Nt=indentString(ft,Rt);(Dt!=Nt||At.from<Et.from+Dt.length)&&(dt[Et.from]=Rt,Ct.push({from:Et.from,to:Et.from+Dt.length,insert:Nt}))});return St.changes.empty||lt(ft.update(St,{userEvent:"indent"})),!0},indentMore=({state:ft,dispatch:lt})=>ft.readOnly?!1:(lt(ft.update(changeBySelectedLine(ft,(dt,vt)=>{vt.push({from:dt.from,insert:ft.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:ft,dispatch:lt})=>ft.readOnly?!1:(lt(ft.update(changeBySelectedLine(ft,(dt,vt)=>{let St=/^\s*/.exec(dt.text)[0];if(!St)return;let Et=countColumn(St,ft.tabSize),Ct=0,At=indentString(ft,Math.max(0,Et-getIndentUnit(ft)));for(;Ct<St.length&&Ct<At.length&&St.charCodeAt(Ct)==At.charCodeAt(Ct);)Ct++;vt.push({from:dt.from+Ct,to:dt.from+St.length,insert:At.slice(Ct)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(ft=>({mac:ft.key,run:ft.run,shift:ft.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var ft=arguments[0];typeof ft=="string"&&(ft=document.createElement(ft));var lt=1,dt=arguments[1];if(dt&&typeof dt=="object"&&dt.nodeType==null&&!Array.isArray(dt)){for(var vt in dt)if(Object.prototype.hasOwnProperty.call(dt,vt)){var St=dt[vt];typeof St=="string"?ft.setAttribute(vt,St):St!=null&&(ft[vt]=St)}lt++}for(;lt<arguments.length;lt++)add(ft,arguments[lt]);return ft}function add(ft,lt){if(typeof lt=="string")ft.appendChild(document.createTextNode(lt));else if(lt!=null)if(lt.nodeType!=null)ft.appendChild(lt);else if(Array.isArray(lt))for(var dt=0;dt<lt.length;dt++)add(ft,lt[dt]);else throw new RangeError("Unsupported child node: "+lt)}const basicNormalize=typeof String.prototype.normalize=="function"?ft=>ft.normalize("NFKD"):ft=>ft;class SearchCursor{constructor(lt,dt,vt=0,St=lt.length,Et,Ct){this.test=Ct,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=lt.iterRange(vt,St),this.bufferStart=vt,this.normalize=Et?At=>Et(basicNormalize(At)):basicNormalize,this.query=this.normalize(dt)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let lt=this.peek();if(lt<0)return this.done=!0,this;let dt=fromCodePoint(lt),vt=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(lt);let St=this.normalize(dt);for(let Et=0,Ct=vt;;Et++){let At=St.charCodeAt(Et),Rt=this.match(At,Ct);if(Rt)return this.value=Rt,this;if(Et==St.length-1)break;Ct==vt&&Et<dt.length&&dt.charCodeAt(Et)==At&&Ct++}}}match(lt,dt){let vt=null;for(let St=0;St<this.matches.length;St+=2){let Et=this.matches[St],Ct=!1;this.query.charCodeAt(Et)==lt&&(Et==this.query.length-1?vt={from:this.matches[St+1],to:dt+1}:(this.matches[St]++,Ct=!0)),Ct||(this.matches.splice(St,2),St-=2)}return this.query.charCodeAt(0)==lt&&(this.query.length==1?vt={from:dt,to:dt+1}:this.matches.push(1,dt)),vt&&this.test&&!this.test(vt.from,vt.to,this.buffer,this.bufferPos)&&(vt=null),vt}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(lt,dt,vt,St=0,Et=lt.length){if(this.text=lt,this.to=Et,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(dt))return new MultilineRegExpCursor(lt,dt,vt,St,Et);this.re=new RegExp(dt,baseFlags+(vt!=null&&vt.ignoreCase?"i":"")),this.test=vt==null?void 0:vt.test,this.iter=lt.iter();let Ct=lt.lineAt(St);this.curLineStart=Ct.from,this.matchPos=toCharEnd(lt,St),this.getLine(this.curLineStart)}getLine(lt){this.iter.next(lt),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let lt=this.matchPos-this.curLineStart;;){this.re.lastIndex=lt;let dt=this.matchPos<=this.to&&this.re.exec(this.curLine);if(dt){let vt=this.curLineStart+dt.index,St=vt+dt[0].length;if(this.matchPos=toCharEnd(this.text,St+(vt==St?1:0)),vt==this.curLineStart+this.curLine.length&&this.nextLine(),(vt<St||vt>this.value.to)&&(!this.test||this.test(vt,St,dt)))return this.value={from:vt,to:St,match:dt},this;lt=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),lt=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(lt,dt){this.from=lt,this.text=dt}get to(){return this.from+this.text.length}static get(lt,dt,vt){let St=flattened.get(lt);if(!St||St.from>=vt||St.to<=dt){let At=new FlattenedDoc(dt,lt.sliceString(dt,vt));return flattened.set(lt,At),At}if(St.from==dt&&St.to==vt)return St;let{text:Et,from:Ct}=St;return Ct>dt&&(Et=lt.sliceString(dt,Ct)+Et,Ct=dt),St.to<vt&&(Et+=lt.sliceString(St.to,vt)),flattened.set(lt,new FlattenedDoc(Ct,Et)),new FlattenedDoc(dt,Et.slice(dt-Ct,vt-Ct))}}class MultilineRegExpCursor{constructor(lt,dt,vt,St,Et){this.text=lt,this.to=Et,this.done=!1,this.value=empty,this.matchPos=toCharEnd(lt,St),this.re=new RegExp(dt,baseFlags+(vt!=null&&vt.ignoreCase?"i":"")),this.test=vt==null?void 0:vt.test,this.flat=FlattenedDoc.get(lt,St,this.chunkEnd(St+5e3))}chunkEnd(lt){return lt>=this.to?this.to:this.text.lineAt(lt).to}next(){for(;;){let lt=this.re.lastIndex=this.matchPos-this.flat.from,dt=this.re.exec(this.flat.text);if(dt&&!dt[0]&&dt.index==lt&&(this.re.lastIndex=lt+1,dt=this.re.exec(this.flat.text)),dt){let vt=this.flat.from+dt.index,St=vt+dt[0].length;if((this.flat.to>=this.to||dt.index+dt[0].length<=this.flat.text.length-10)&&(!this.test||this.test(vt,St,dt)))return this.value={from:vt,to:St,match:dt},this.matchPos=toCharEnd(this.text,St+(vt==St?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(ft){try{return new RegExp(ft,baseFlags),!0}catch{return!1}}function toCharEnd(ft,lt){if(lt>=ft.length)return lt;let dt=ft.lineAt(lt),vt;for(;lt<dt.to&&(vt=dt.text.charCodeAt(lt-dt.from))>=56320&&vt<57344;)lt++;return lt}function createLineDialog(ft){let lt=crelt("input",{class:"cm-textfield",name:"line"}),dt=crelt("form",{class:"cm-gotoLine",onkeydown:St=>{St.keyCode==27?(St.preventDefault(),ft.dispatch({effects:dialogEffect.of(!1)}),ft.focus()):St.keyCode==13&&(St.preventDefault(),vt())},onsubmit:St=>{St.preventDefault(),vt()}},crelt("label",ft.state.phrase("Go to line"),": ",lt)," ",crelt("button",{class:"cm-button",type:"submit"},ft.state.phrase("go")));function vt(){let St=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(lt.value);if(!St)return;let{state:Et}=ft,Ct=Et.doc.lineAt(Et.selection.main.head),[,At,Rt,Dt,Nt]=St,Ft=Dt?+Dt.slice(1):0,Ut=Rt?+Rt:Ct.number;if(Rt&&Nt){let Zt=Ut/100;At&&(Zt=Zt*(At=="-"?-1:1)+Ct.number/Et.doc.lines),Ut=Math.round(Et.doc.lines*Zt)}else Rt&&At&&(Ut=Ut*(At=="-"?-1:1)+Ct.number);let Wt=Et.doc.line(Math.max(1,Math.min(Et.doc.lines,Ut)));ft.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(Wt.from+Math.max(0,Math.min(Ft,Wt.length))),scrollIntoView:!0}),ft.focus()}return{dom:dt}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(ft,lt){for(let dt of lt.effects)dt.is(dialogEffect)&&(ft=dt.value);return ft},provide:ft=>showPanel.from(ft,lt=>lt?createLineDialog:null)}),gotoLine=ft=>{let lt=getPanel(ft,createLineDialog);if(!lt){let dt=[dialogEffect.of(!0)];ft.state.field(dialogField,!1)==null&&dt.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),ft.dispatch({effects:dt}),lt=getPanel(ft,createLineDialog)}return lt&&lt.dom.querySelector("input").focus(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(ft){return combineConfig(ft,defaultHighlightOptions,{highlightWordAroundCursor:(lt,dt)=>lt||dt,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(ft){let lt=[defaultTheme,matchHighlighter];return ft&&lt.push(highlightConfig.of(ft)),lt}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(ft,lt,dt,vt){return(dt==0||ft(lt.sliceDoc(dt-1,dt))!=CharCategory.Word)&&(vt==lt.doc.length||ft(lt.sliceDoc(vt,vt+1))!=CharCategory.Word)}function insideWord(ft,lt,dt,vt){return ft(lt.sliceDoc(dt,dt+1))==CharCategory.Word&&ft(lt.sliceDoc(vt-1,vt))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.decorations=this.getDeco(ft)}update(ft){(ft.selectionSet||ft.docChanged||ft.viewportChanged)&&(this.decorations=this.getDeco(ft.view))}getDeco(ft){let lt=ft.state.facet(highlightConfig),{state:dt}=ft,vt=dt.selection;if(vt.ranges.length>1)return Decoration.none;let St=vt.main,Et,Ct=null;if(St.empty){if(!lt.highlightWordAroundCursor)return Decoration.none;let Rt=dt.wordAt(St.head);if(!Rt)return Decoration.none;Ct=dt.charCategorizer(St.head),Et=dt.sliceDoc(Rt.from,Rt.to)}else{let Rt=St.to-St.from;if(Rt<lt.minSelectionLength||Rt>200)return Decoration.none;if(lt.wholeWords){if(Et=dt.sliceDoc(St.from,St.to),Ct=dt.charCategorizer(St.head),!(insideWordBoundaries(Ct,dt,St.from,St.to)&&insideWord(Ct,dt,St.from,St.to)))return Decoration.none}else if(Et=dt.sliceDoc(St.from,St.to).trim(),!Et)return Decoration.none}let At=[];for(let Rt of ft.visibleRanges){let Dt=new SearchCursor(dt.doc,Et,Rt.from,Rt.to);for(;!Dt.next().done;){let{from:Nt,to:Ft}=Dt.value;if((!Ct||insideWordBoundaries(Ct,dt,Nt,Ft))&&(St.empty&&Nt<=St.from&&Ft>=St.to?At.push(mainMatchDeco.range(Nt,Ft)):(Nt>=St.to||Ft<=St.from)&&At.push(matchDeco.range(Nt,Ft)),At.length>lt.maxMatches))return Decoration.none}}return Decoration.set(At)}},{decorations:ft=>ft.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:ft,dispatch:lt})=>{let{selection:dt}=ft,vt=EditorSelection.create(dt.ranges.map(St=>ft.wordAt(St.head)||EditorSelection.cursor(St.head)),dt.mainIndex);return vt.eq(dt)?!1:(lt(ft.update({selection:vt})),!0)};function findNextOccurrence(ft,lt){let{main:dt,ranges:vt}=ft.selection,St=ft.wordAt(dt.head),Et=St&&St.from==dt.from&&St.to==dt.to;for(let Ct=!1,At=new SearchCursor(ft.doc,lt,vt[vt.length-1].to);;)if(At.next(),At.done){if(Ct)return null;At=new SearchCursor(ft.doc,lt,0,Math.max(0,vt[vt.length-1].from-1)),Ct=!0}else{if(Ct&&vt.some(Rt=>Rt.from==At.value.from))continue;if(Et){let Rt=ft.wordAt(At.value.from);if(!Rt||Rt.from!=At.value.from||Rt.to!=At.value.to)continue}return At.value}}const selectNextOccurrence=({state:ft,dispatch:lt})=>{let{ranges:dt}=ft.selection;if(dt.some(Et=>Et.from===Et.to))return selectWord({state:ft,dispatch:lt});let vt=ft.sliceDoc(dt[0].from,dt[0].to);if(ft.selection.ranges.some(Et=>ft.sliceDoc(Et.from,Et.to)!=vt))return!1;let St=findNextOccurrence(ft,vt);return St?(lt(ft.update({selection:ft.selection.addRange(EditorSelection.range(St.from,St.to),!1),effects:EditorView.scrollIntoView(St.to)})),!0):!1},searchConfigFacet=Facet.define({combine(ft){return combineConfig(ft,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:lt=>new SearchPanel(lt)})}});class SearchQuery{constructor(lt){this.search=lt.search,this.caseSensitive=!!lt.caseSensitive,this.literal=!!lt.literal,this.regexp=!!lt.regexp,this.replace=lt.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!lt.wholeWord}unquote(lt){return this.literal?lt:lt.replace(/\\([nrt\\])/g,(dt,vt)=>vt=="n"?`
`:vt=="r"?"\r":vt=="t"?"	":"\\")}eq(lt){return this.search==lt.search&&this.replace==lt.replace&&this.caseSensitive==lt.caseSensitive&&this.regexp==lt.regexp&&this.wholeWord==lt.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(lt,dt=0,vt){let St=lt.doc?lt:EditorState.create({doc:lt});return vt==null&&(vt=St.doc.length),this.regexp?regexpCursor(this,St,dt,vt):stringCursor(this,St,dt,vt)}}class QueryType{constructor(lt){this.spec=lt}}function stringCursor(ft,lt,dt,vt){return new SearchCursor(lt.doc,ft.unquoted,dt,vt,ft.caseSensitive?void 0:St=>St.toLowerCase(),ft.wholeWord?stringWordTest(lt.doc,lt.charCategorizer(lt.selection.main.head)):void 0)}function stringWordTest(ft,lt){return(dt,vt,St,Et)=>((Et>dt||Et+St.length<vt)&&(Et=Math.max(0,dt-2),St=ft.sliceString(Et,Math.min(ft.length,vt+2))),(lt(charBefore(St,dt-Et))!=CharCategory.Word||lt(charAfter(St,dt-Et))!=CharCategory.Word)&&(lt(charAfter(St,vt-Et))!=CharCategory.Word||lt(charBefore(St,vt-Et))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(lt){super(lt)}nextMatch(lt,dt,vt){let St=stringCursor(this.spec,lt,vt,lt.doc.length).nextOverlapping();return St.done&&(St=stringCursor(this.spec,lt,0,dt).nextOverlapping()),St.done?null:St.value}prevMatchInRange(lt,dt,vt){for(let St=vt;;){let Et=Math.max(dt,St-1e4-this.spec.unquoted.length),Ct=stringCursor(this.spec,lt,Et,St),At=null;for(;!Ct.nextOverlapping().done;)At=Ct.value;if(At)return At;if(Et==dt)return null;St-=1e4}}prevMatch(lt,dt,vt){return this.prevMatchInRange(lt,0,dt)||this.prevMatchInRange(lt,vt,lt.doc.length)}getReplacement(lt){return this.spec.unquote(this.spec.replace)}matchAll(lt,dt){let vt=stringCursor(this.spec,lt,0,lt.doc.length),St=[];for(;!vt.next().done;){if(St.length>=dt)return null;St.push(vt.value)}return St}highlight(lt,dt,vt,St){let Et=stringCursor(this.spec,lt,Math.max(0,dt-this.spec.unquoted.length),Math.min(vt+this.spec.unquoted.length,lt.doc.length));for(;!Et.next().done;)St(Et.value.from,Et.value.to)}}function regexpCursor(ft,lt,dt,vt){return new RegExpCursor(lt.doc,ft.search,{ignoreCase:!ft.caseSensitive,test:ft.wholeWord?regexpWordTest(lt.charCategorizer(lt.selection.main.head)):void 0},dt,vt)}function charBefore(ft,lt){return ft.slice(findClusterBreak(ft,lt,!1),lt)}function charAfter(ft,lt){return ft.slice(lt,findClusterBreak(ft,lt))}function regexpWordTest(ft){return(lt,dt,vt)=>!vt[0].length||(ft(charBefore(vt.input,vt.index))!=CharCategory.Word||ft(charAfter(vt.input,vt.index))!=CharCategory.Word)&&(ft(charAfter(vt.input,vt.index+vt[0].length))!=CharCategory.Word||ft(charBefore(vt.input,vt.index+vt[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(lt,dt,vt){let St=regexpCursor(this.spec,lt,vt,lt.doc.length).next();return St.done&&(St=regexpCursor(this.spec,lt,0,dt).next()),St.done?null:St.value}prevMatchInRange(lt,dt,vt){for(let St=1;;St++){let Et=Math.max(dt,vt-St*1e4),Ct=regexpCursor(this.spec,lt,Et,vt),At=null;for(;!Ct.next().done;)At=Ct.value;if(At&&(Et==dt||At.from>Et+10))return At;if(Et==dt)return null}}prevMatch(lt,dt,vt){return this.prevMatchInRange(lt,0,dt)||this.prevMatchInRange(lt,vt,lt.doc.length)}getReplacement(lt){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(dt,vt)=>vt=="$"?"$":vt=="&"?lt.match[0]:vt!="0"&&+vt<lt.match.length?lt.match[vt]:dt))}matchAll(lt,dt){let vt=regexpCursor(this.spec,lt,0,lt.doc.length),St=[];for(;!vt.next().done;){if(St.length>=dt)return null;St.push(vt.value)}return St}highlight(lt,dt,vt,St){let Et=regexpCursor(this.spec,lt,Math.max(0,dt-250),Math.min(vt+250,lt.doc.length));for(;!Et.next().done;)St(Et.value.from,Et.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(ft){return new SearchState(defaultQuery(ft).create(),null)},update(ft,lt){for(let dt of lt.effects)dt.is(setSearchQuery)?ft=new SearchState(dt.value.create(),ft.panel):dt.is(togglePanel$1)&&(ft=new SearchState(ft.query,dt.value?createSearchPanel:null));return ft},provide:ft=>showPanel.from(ft,lt=>lt.panel)});class SearchState{constructor(lt,dt){this.query=lt,this.panel=dt}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.decorations=this.highlight(ft.state.field(searchState))}update(ft){let lt=ft.state.field(searchState);(lt!=ft.startState.field(searchState)||ft.docChanged||ft.selectionSet||ft.viewportChanged)&&(this.decorations=this.highlight(lt))}highlight({query:ft,panel:lt}){if(!lt||!ft.spec.valid)return Decoration.none;let{view:dt}=this,vt=new RangeSetBuilder;for(let St=0,Et=dt.visibleRanges,Ct=Et.length;St<Ct;St++){let{from:At,to:Rt}=Et[St];for(;St<Ct-1&&Rt>Et[St+1].from-2*250;)Rt=Et[++St].to;ft.highlight(dt.state,At,Rt,(Dt,Nt)=>{let Ft=dt.state.selection.ranges.some(Ut=>Ut.from==Dt&&Ut.to==Nt);vt.add(Dt,Nt,Ft?selectedMatchMark:matchMark)})}return vt.finish()}},{decorations:ft=>ft.decorations});function searchCommand(ft){return lt=>{let dt=lt.state.field(searchState,!1);return dt&&dt.query.spec.valid?ft(lt,dt):openSearchPanel(lt)}}const findNext=searchCommand((ft,{query:lt})=>{let{to:dt}=ft.state.selection.main,vt=lt.nextMatch(ft.state,dt,dt);return vt?(ft.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0,effects:announceMatch(ft,vt),userEvent:"select.search"}),!0):!1}),findPrevious=searchCommand((ft,{query:lt})=>{let{state:dt}=ft,{from:vt}=dt.selection.main,St=lt.prevMatch(dt,vt,vt);return St?(ft.dispatch({selection:{anchor:St.from,head:St.to},scrollIntoView:!0,effects:announceMatch(ft,St),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((ft,{query:lt})=>{let dt=lt.matchAll(ft.state,1e3);return!dt||!dt.length?!1:(ft.dispatch({selection:EditorSelection.create(dt.map(vt=>EditorSelection.range(vt.from,vt.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:ft,dispatch:lt})=>{let dt=ft.selection;if(dt.ranges.length>1||dt.main.empty)return!1;let{from:vt,to:St}=dt.main,Et=[],Ct=0;for(let At=new SearchCursor(ft.doc,ft.sliceDoc(vt,St));!At.next().done;){if(Et.length>1e3)return!1;At.value.from==vt&&(Ct=Et.length),Et.push(EditorSelection.range(At.value.from,At.value.to))}return lt(ft.update({selection:EditorSelection.create(Et,Ct),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((ft,{query:lt})=>{let{state:dt}=ft,{from:vt,to:St}=dt.selection.main;if(dt.readOnly)return!1;let Et=lt.nextMatch(dt,vt,vt);if(!Et)return!1;let Ct=[],At,Rt,Dt=[];if(Et.from==vt&&Et.to==St&&(Rt=dt.toText(lt.getReplacement(Et)),Ct.push({from:Et.from,to:Et.to,insert:Rt}),Et=lt.nextMatch(dt,Et.from,Et.to),Dt.push(EditorView.announce.of(dt.phrase("replaced match on line $",dt.doc.lineAt(vt).number)+"."))),Et){let Nt=Ct.length==0||Ct[0].from>=Et.to?0:Et.to-Et.from-Rt.length;At={anchor:Et.from-Nt,head:Et.to-Nt},Dt.push(announceMatch(ft,Et))}return ft.dispatch({changes:Ct,selection:At,scrollIntoView:!!At,effects:Dt,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((ft,{query:lt})=>{if(ft.state.readOnly)return!1;let dt=lt.matchAll(ft.state,1e9).map(St=>{let{from:Et,to:Ct}=St;return{from:Et,to:Ct,insert:lt.getReplacement(St)}});if(!dt.length)return!1;let vt=ft.state.phrase("replaced $ matches",dt.length)+".";return ft.dispatch({changes:dt,effects:EditorView.announce.of(vt),userEvent:"input.replace.all"}),!0});function createSearchPanel(ft){return ft.state.facet(searchConfigFacet).createPanel(ft)}function defaultQuery(ft,lt){var dt,vt,St,Et;let Ct=ft.selection.main,At=Ct.empty||Ct.to>Ct.from+100?"":ft.sliceDoc(Ct.from,Ct.to);if(lt&&!At)return lt;let Rt=ft.facet(searchConfigFacet);return new SearchQuery({search:((dt=lt==null?void 0:lt.literal)!==null&&dt!==void 0?dt:Rt.literal)?At:At.replace(/\n/g,"\\n"),caseSensitive:(vt=lt==null?void 0:lt.caseSensitive)!==null&&vt!==void 0?vt:Rt.caseSensitive,literal:(St=lt==null?void 0:lt.literal)!==null&&St!==void 0?St:Rt.literal,wholeWord:(Et=lt==null?void 0:lt.wholeWord)!==null&&Et!==void 0?Et:Rt.wholeWord})}const openSearchPanel=ft=>{let lt=ft.state.field(searchState,!1);if(lt&&lt.panel){let dt=getPanel(ft,createSearchPanel);if(!dt)return!1;let vt=dt.dom.querySelector("[main-field]");if(vt&&vt!=ft.root.activeElement){let St=defaultQuery(ft.state,lt.query.spec);St.valid&&ft.dispatch({effects:setSearchQuery.of(St)}),vt.focus(),vt.select()}}else ft.dispatch({effects:[togglePanel$1.of(!0),lt?setSearchQuery.of(defaultQuery(ft.state,lt.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=ft=>{let lt=ft.state.field(searchState,!1);if(!lt||!lt.panel)return!1;let dt=getPanel(ft,createSearchPanel);return dt&&dt.dom.contains(ft.root.activeElement)&&ft.focus(),ft.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(lt){this.view=lt;let dt=this.query=lt.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:dt.search,placeholder:phrase(lt,"Find"),"aria-label":phrase(lt,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:dt.replace,placeholder:phrase(lt,"Replace"),"aria-label":phrase(lt,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:dt.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:dt.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:dt.wholeWord,onchange:this.commit});function vt(St,Et,Ct){return crelt("button",{class:"cm-button",name:St,onclick:Et,type:"button"},Ct)}this.dom=crelt("div",{onkeydown:St=>this.keydown(St),class:"cm-search"},[this.searchField,vt("next",()=>findNext(lt),[phrase(lt,"next")]),vt("prev",()=>findPrevious(lt),[phrase(lt,"previous")]),vt("select",()=>selectMatches(lt),[phrase(lt,"all")]),crelt("label",null,[this.caseField,phrase(lt,"match case")]),crelt("label",null,[this.reField,phrase(lt,"regexp")]),crelt("label",null,[this.wordField,phrase(lt,"by word")]),...lt.state.readOnly?[]:[crelt("br"),this.replaceField,vt("replace",()=>replaceNext(lt),[phrase(lt,"replace")]),vt("replaceAll",()=>replaceAll(lt),[phrase(lt,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(lt),"aria-label":phrase(lt,"close"),type:"button"},[""])])}commit(){let lt=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});lt.eq(this.query)||(this.query=lt,this.view.dispatch({effects:setSearchQuery.of(lt)}))}keydown(lt){runScopeHandlers(this.view,lt,"search-panel")?lt.preventDefault():lt.keyCode==13&&lt.target==this.searchField?(lt.preventDefault(),(lt.shiftKey?findPrevious:findNext)(this.view)):lt.keyCode==13&&lt.target==this.replaceField&&(lt.preventDefault(),replaceNext(this.view))}update(lt){for(let dt of lt.transactions)for(let vt of dt.effects)vt.is(setSearchQuery)&&!vt.value.eq(this.query)&&this.setQuery(vt.value)}setQuery(lt){this.query=lt,this.searchField.value=lt.search,this.replaceField.value=lt.replace,this.caseField.checked=lt.caseSensitive,this.reField.checked=lt.regexp,this.wordField.checked=lt.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(ft,lt){return ft.state.phrase(lt)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(ft,{from:lt,to:dt}){let vt=ft.state.doc.lineAt(lt),St=ft.state.doc.lineAt(dt).to,Et=Math.max(vt.from,lt-AnnounceMargin),Ct=Math.min(St,dt+AnnounceMargin),At=ft.state.sliceDoc(Et,Ct);if(Et!=vt.from){for(let Rt=0;Rt<AnnounceMargin;Rt++)if(!Break.test(At[Rt+1])&&Break.test(At[Rt])){At=At.slice(Rt);break}}if(Ct!=St){for(let Rt=At.length-1;Rt>At.length-AnnounceMargin;Rt--)if(!Break.test(At[Rt-1])&&Break.test(At[Rt])){At=At.slice(0,Rt);break}}return EditorView.announce.of(`${ft.state.phrase("current match")}. ${At} ${ft.state.phrase("on line")} ${vt.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.diagnostic=vt}}class LintState{constructor(lt,dt,vt){this.diagnostics=lt,this.panel=dt,this.selected=vt}static init(lt,dt,vt){let St=lt,Et=vt.facet(lintConfig).markerFilter;Et&&(St=Et(St));let Ct=Decoration.set(St.map(At=>At.from==At.to||At.from==At.to-1&&vt.doc.lineAt(At.from).to==At.from?Decoration.widget({widget:new DiagnosticWidget(At),diagnostic:At}).range(At.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+At.severity},diagnostic:At}).range(At.from,At.to)),!0);return new LintState(Ct,dt,findDiagnostic(Ct))}}function findDiagnostic(ft,lt=null,dt=0){let vt=null;return ft.between(dt,1e9,(St,Et,{spec:Ct})=>{if(!(lt&&Ct.diagnostic!=lt))return vt=new SelectedDiagnostic(St,Et,Ct.diagnostic),!1}),vt}function hideTooltip(ft,lt){return!!(ft.effects.some(dt=>dt.is(setDiagnosticsEffect))||ft.changes.touchesRange(lt.pos))}function maybeEnableLint(ft,lt){return ft.field(lintState,!1)?lt:lt.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],dt=>{let{selected:vt,panel:St}=dt.field(lintState);return!vt||!St||vt.from==vt.to?Decoration.none:Decoration.set([activeMark.range(vt.from,vt.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(ft,lt){return{effects:maybeEnableLint(ft,[setDiagnosticsEffect.of(lt)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(ft,lt){if(lt.docChanged){let dt=ft.diagnostics.map(lt.changes),vt=null;if(ft.selected){let St=lt.changes.mapPos(ft.selected.from,1);vt=findDiagnostic(dt,ft.selected.diagnostic,St)||findDiagnostic(dt,null,St)}ft=new LintState(dt,ft.panel,vt)}for(let dt of lt.effects)dt.is(setDiagnosticsEffect)?ft=LintState.init(dt.value,ft.panel,lt.state):dt.is(togglePanel)?ft=new LintState(ft.diagnostics,dt.value?LintPanel.open:null,ft.selected):dt.is(movePanelSelection)&&(ft=new LintState(ft.diagnostics,ft.panel,dt.value));return ft},provide:ft=>[showPanel.from(ft,lt=>lt.panel),EditorView.decorations.from(ft,lt=>lt.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(ft,lt,dt){let{diagnostics:vt}=ft.state.field(lintState),St=[],Et=2e8,Ct=0;vt.between(lt-(dt<0?1:0),lt+(dt>0?1:0),(Rt,Dt,{spec:Nt})=>{lt>=Rt&&lt<=Dt&&(Rt==Dt||(lt>Rt||dt>0)&&(lt<Dt||dt<0))&&(St.push(Nt.diagnostic),Et=Math.min(Rt,Et),Ct=Math.max(Dt,Ct))});let At=ft.state.facet(lintConfig).tooltipFilter;return At&&(St=At(St)),St.length?{pos:Et,end:Ct,above:ft.state.doc.lineAt(Et).to<Ct,create(){return{dom:diagnosticsTooltip(ft,St)}}}:null}function diagnosticsTooltip(ft,lt){return crelt("ul",{class:"cm-tooltip-lint"},lt.map(dt=>renderDiagnostic(ft,dt,!1)))}const openLintPanel=ft=>{let lt=ft.state.field(lintState,!1);(!lt||!lt.panel)&&ft.dispatch({effects:maybeEnableLint(ft.state,[togglePanel.of(!0)])});let dt=getPanel(ft,LintPanel.open);return dt&&dt.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=ft=>{let lt=ft.state.field(lintState,!1);return!lt||!lt.panel?!1:(ft.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=ft=>{let lt=ft.state.field(lintState,!1);if(!lt)return!1;let dt=ft.state.selection.main,vt=lt.diagnostics.iter(dt.to+1);return!vt.value&&(vt=lt.diagnostics.iter(0),!vt.value||vt.from==dt.from&&vt.to==dt.to)?!1:(ft.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.timeout=-1,this.set=!0;let{delay:lt}=ft.state.facet(lintConfig);this.lintTime=Date.now()+lt,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,lt)}run(){let ft=Date.now();if(ft<this.lintTime-10)setTimeout(this.run,this.lintTime-ft);else{this.set=!1;let{state:lt}=this.view,{sources:dt}=lt.facet(lintConfig);Promise.all(dt.map(vt=>Promise.resolve(vt(this.view)))).then(vt=>{let St=vt.reduce((Et,Ct)=>Et.concat(Ct));this.view.state.doc==lt.doc&&this.view.dispatch(setDiagnostics(this.view.state,St))},vt=>{logException(this.view.state,vt)})}}update(ft){let lt=ft.state.facet(lintConfig);(ft.docChanged||lt!=ft.startState.facet(lintConfig)||lt.needsRefresh&&lt.needsRefresh(ft))&&(this.lintTime=Date.now()+lt.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,lt.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(ft){return Object.assign({sources:ft.map(lt=>lt.source)},combineConfig(ft.map(lt=>lt.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(lt,dt)=>lt?dt?vt=>lt(vt)||dt(vt):lt:dt}))},enables:lintPlugin});function assignKeys(ft){let lt=[];if(ft)e:for(let{name:dt}of ft){for(let vt=0;vt<dt.length;vt++){let St=dt[vt];if(/[a-zA-Z]/.test(St)&&!lt.some(Et=>Et.toLowerCase()==St.toLowerCase())){lt.push(St);continue e}}lt.push("")}return lt}function renderDiagnostic(ft,lt,dt){var vt;let St=dt?assignKeys(lt.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+lt.severity},crelt("span",{class:"cm-diagnosticText"},lt.renderMessage?lt.renderMessage():lt.message),(vt=lt.actions)===null||vt===void 0?void 0:vt.map((Et,Ct)=>{let At=!1,Rt=Ut=>{if(Ut.preventDefault(),At)return;At=!0;let Wt=findDiagnostic(ft.state.field(lintState).diagnostics,lt);Wt&&Et.apply(ft,Wt.from,Wt.to)},{name:Dt}=Et,Nt=St[Ct]?Dt.indexOf(St[Ct]):-1,Ft=Nt<0?Dt:[Dt.slice(0,Nt),crelt("u",Dt.slice(Nt,Nt+1)),Dt.slice(Nt+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:Rt,onmousedown:Rt,"aria-label":` Action: ${Dt}${Nt<0?"":` (access key "${St[Ct]})"`}.`},Ft)}),lt.source&&crelt("div",{class:"cm-diagnosticSource"},lt.source))}class DiagnosticWidget extends WidgetType{constructor(lt){super(),this.diagnostic=lt}eq(lt){return lt.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(lt,dt){this.diagnostic=dt,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(lt,dt,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(lt){this.view=lt,this.items=[];let dt=St=>{if(St.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(St.keyCode==38||St.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(St.keyCode==40||St.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(St.keyCode==36)this.moveSelection(0);else if(St.keyCode==35)this.moveSelection(this.items.length-1);else if(St.keyCode==13)this.view.focus();else if(St.keyCode>=65&&St.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:Et}=this.items[this.selectedIndex],Ct=assignKeys(Et.actions);for(let At=0;At<Ct.length;At++)if(Ct[At].toUpperCase().charCodeAt(0)==St.keyCode){let Rt=findDiagnostic(this.view.state.field(lintState).diagnostics,Et);Rt&&Et.actions[At].apply(lt,Rt.from,Rt.to)}}else return;St.preventDefault()},vt=St=>{for(let Et=0;Et<this.items.length;Et++)this.items[Et].dom.contains(St.target)&&this.moveSelection(Et)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:dt,onclick:vt}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let lt=this.view.state.field(lintState).selected;if(!lt)return-1;for(let dt=0;dt<this.items.length;dt++)if(this.items[dt].diagnostic==lt.diagnostic)return dt;return-1}update(){let{diagnostics:lt,selected:dt}=this.view.state.field(lintState),vt=0,St=!1,Et=null;for(lt.between(0,this.view.state.doc.length,(Ct,At,{spec:Rt})=>{let Dt=-1,Nt;for(let Ft=vt;Ft<this.items.length;Ft++)if(this.items[Ft].diagnostic==Rt.diagnostic){Dt=Ft;break}Dt<0?(Nt=new PanelItem(this.view,Rt.diagnostic),this.items.splice(vt,0,Nt),St=!0):(Nt=this.items[Dt],Dt>vt&&(this.items.splice(vt,Dt-vt),St=!0)),dt&&Nt.diagnostic==dt.diagnostic?Nt.dom.hasAttribute("aria-selected")||(Nt.dom.setAttribute("aria-selected","true"),Et=Nt):Nt.dom.hasAttribute("aria-selected")&&Nt.dom.removeAttribute("aria-selected"),vt++});vt<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)St=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),St=!0),Et?(this.list.setAttribute("aria-activedescendant",Et.id),this.view.requestMeasure({key:this,read:()=>({sel:Et.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:Ct,panel:At})=>{Ct.top<At.top?this.list.scrollTop-=At.top-Ct.top:Ct.bottom>At.bottom&&(this.list.scrollTop+=Ct.bottom-At.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),St&&this.sync()}sync(){let lt=this.list.firstChild;function dt(){let vt=lt;lt=vt.nextSibling,vt.remove()}for(let vt of this.items)if(vt.dom.parentNode==this.list){for(;lt!=vt.dom;)dt();lt=vt.dom.nextSibling}else this.list.insertBefore(vt.dom,lt);for(;lt;)dt()}moveSelection(lt){if(this.selectedIndex<0)return;let dt=this.view.state.field(lintState),vt=findDiagnostic(dt.diagnostics,this.items[lt].diagnostic);vt&&this.view.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0,effects:movePanelSelection.of(vt)})}static open(lt){return new LintPanel(lt)}}function svg(ft,lt='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${lt}>${encodeURIComponent(ft)}</svg>')`}function underline(ft){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${ft}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var basicSetup=function ft(lt){lt===void 0&&(lt={});var dt=[];lt.closeBracketsKeymap!==!1&&(dt=dt.concat(closeBracketsKeymap)),lt.defaultKeymap!==!1&&(dt=dt.concat(defaultKeymap)),lt.searchKeymap!==!1&&(dt=dt.concat(searchKeymap)),lt.historyKeymap!==!1&&(dt=dt.concat(historyKeymap)),lt.foldKeymap!==!1&&(dt=dt.concat(foldKeymap)),lt.completionKeymap!==!1&&(dt=dt.concat(completionKeymap)),lt.lintKeymap!==!1&&(dt=dt.concat(lintKeymap));var vt=[];return lt.lineNumbers!==!1&&vt.push(lineNumbers()),lt.highlightActiveLineGutter!==!1&&vt.push(highlightActiveLineGutter()),lt.highlightSpecialChars!==!1&&vt.push(highlightSpecialChars()),lt.history!==!1&&vt.push(history()),lt.foldGutter!==!1&&vt.push(foldGutter()),lt.drawSelection!==!1&&vt.push(drawSelection()),lt.dropCursor!==!1&&vt.push(dropCursor()),lt.allowMultipleSelections!==!1&&vt.push(EditorState.allowMultipleSelections.of(!0)),lt.indentOnInput!==!1&&vt.push(indentOnInput()),lt.syntaxHighlighting!==!1&&vt.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),lt.bracketMatching!==!1&&vt.push(bracketMatching()),lt.closeBrackets!==!1&&vt.push(closeBrackets()),lt.autocompletion!==!1&&vt.push(autocompletion()),lt.rectangularSelection!==!1&&vt.push(rectangularSelection()),lt.crosshairCursor!==!1&&vt.push(crosshairCursor()),lt.highlightActiveLine!==!1&&vt.push(highlightActiveLine()),lt.highlightSelectionMatches!==!1&&vt.push(highlightSelectionMatches()),lt.tabSize&&typeof lt.tabSize=="number"&&vt.push(indentUnit.of(" ".repeat(lt.tabSize))),vt.concat([keymap.of(dt.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var getStatistics=ft=>({line:ft.state.doc.lineAt(ft.state.selection.main.from),lineCount:ft.state.doc.lines,lineBreak:ft.state.lineBreak,length:ft.state.doc.length,readOnly:ft.state.readOnly,tabSize:ft.state.tabSize,selection:ft.state.selection,selectionAsSingle:ft.state.selection.asSingle().main,ranges:ft.state.selection.ranges,selectionCode:ft.state.sliceDoc(ft.state.selection.main.from,ft.state.selection.main.to),selections:ft.state.selection.ranges.map(lt=>ft.state.sliceDoc(lt.from,lt.to)),selectedText:ft.state.selection.ranges.some(lt=>!lt.empty)}),External=Annotation.define();function useCodeMirror(ft){var{value:lt,selection:dt,onChange:vt,onStatistics:St,onCreateEditor:Et,onUpdate:Ct,extensions:At=[],autoFocus:Rt,theme:Dt="light",height:Nt="",minHeight:Ft="",maxHeight:Ut="",placeholder:Wt="",width:Zt="",minWidth:Kt="",maxWidth:cn="",editable:hn=!0,readOnly:dn=!1,indentWithTab:pn=!0,basicSetup:gn=!0,root:vn,initialState:bn}=ft,[$n,Tn]=reactExports.useState(),[In,Pn]=reactExports.useState(),[zn,An]=reactExports.useState(),Gn=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),xn=EditorView.theme({"&":{height:Nt,minHeight:Ft,maxHeight:Ut,width:Zt,minWidth:Kt,maxWidth:cn}}),Qn=EditorView.updateListener.of(nr=>{if(nr.docChanged&&typeof vt=="function"&&!nr.transactions.some(jn=>jn.annotation(External))){var Un=nr.state.doc,Nn=Un.toString();vt(Nn,nr)}St&&St(getStatistics(nr))}),qn=[Qn,xn];switch(pn&&qn.unshift(keymap.of([indentWithTab])),gn&&(typeof gn=="boolean"?qn.unshift(basicSetup()):qn.unshift(basicSetup(gn))),Wt&&qn.unshift(placeholder(Wt)),Dt){case"light":qn.push(Gn);break;case"dark":qn.push(oneDark);break;case"none":break;default:qn.push(Dt);break}return hn===!1&&qn.push(EditorView.editable.of(!1)),dn&&qn.push(EditorState.readOnly.of(!0)),Ct&&typeof Ct=="function"&&qn.push(EditorView.updateListener.of(Ct)),qn=qn.concat(At),reactExports.useEffect(()=>{if($n&&!zn){var nr={doc:lt,selection:dt,extensions:qn},Un=bn?EditorState.fromJSON(bn.json,nr,bn.fields):EditorState.create(nr);if(An(Un),!In){var Nn=new EditorView({state:Un,parent:$n,root:vn});Pn(Nn),Et&&Et(Nn,Un)}}return()=>{In&&(An(void 0),Pn(void 0))}},[$n,zn]),reactExports.useEffect(()=>Tn(ft.container),[ft.container]),reactExports.useEffect(()=>()=>{In&&(In.destroy(),Pn(void 0))},[In]),reactExports.useEffect(()=>{Rt&&In&&In.focus()},[Rt,In]),reactExports.useEffect(()=>{In&&In.dispatch({effects:StateEffect.reconfigure.of(qn)})},[Dt,At,Nt,Ft,Ut,Zt,Kt,cn,Wt,hn,dn,pn,gn,vt,Ct]),reactExports.useEffect(()=>{if(lt!==void 0){var nr=In?In.state.doc.toString():"";In&&lt!==nr&&In.dispatch({changes:{from:0,to:nr.length,insert:lt||""},annotations:[External.of(!0)]})}},[lt,In]),{state:zn,setState:An,view:In,setView:Pn,container:$n,setContainer:Tn}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((ft,lt)=>{var{className:dt,value:vt="",selection:St,extensions:Et=[],onChange:Ct,onStatistics:At,onCreateEditor:Rt,onUpdate:Dt,autoFocus:Nt,theme:Ft="light",height:Ut,minHeight:Wt,maxHeight:Zt,width:Kt,minWidth:cn,maxWidth:hn,basicSetup:dn,placeholder:pn,indentWithTab:gn,editable:vn,readOnly:bn,root:$n,initialState:Tn}=ft,In=_objectWithoutPropertiesLoose(ft,_excluded),Pn=reactExports.useRef(null),{state:zn,view:An,container:Gn,setContainer:xn}=useCodeMirror({container:Pn.current,root:$n,value:vt,autoFocus:Nt,theme:Ft,height:Ut,minHeight:Wt,maxHeight:Zt,width:Kt,minWidth:cn,maxWidth:hn,basicSetup:dn,placeholder:pn,indentWithTab:gn,editable:vn,readOnly:bn,selection:St,onChange:Ct,onStatistics:At,onCreateEditor:Rt,onUpdate:Dt,extensions:Et,initialState:Tn});if(reactExports.useImperativeHandle(lt,()=>({editor:Pn.current,state:zn,view:An}),[Pn,Gn,zn,An]),typeof vt!="string")throw new Error("value must be typeof string but got "+typeof vt);var Qn=typeof Ft=="string"?"cm-theme-"+Ft:"cm-theme";return jsx("div",_extends({ref:Pn,className:""+Qn+(dt?" "+dt:"")},In))});ReactCodeMirror.displayName="CodeMirror";const BlockPythonCodePanel=()=>{const ft=useRobartState(dt=>dt.editingBlockId),lt=useRobartState(dt=>dt.blocks[ft??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:lt==null?void 0:lt.python,className:"h-full w-full",extensions:[python()],readOnly:!0})})};let init=!0;const Simulation=()=>{const ft=reactExports.useRef(null),lt=useSimulator(Nt=>Nt.robots),dt=useRobartState(Nt=>Nt.robots),vt=useSimulator(Nt=>Nt.step),St=useSimulator(Nt=>Nt.setRobots),Et=useRobartState(),Ct=useSimulator();useFrame(({clock:Nt})=>{vt()}),Object.keys(lt).length!==0?Ct.time===0&&Object.values(lt).forEach(Nt=>{Nt.pos.set(...Et.robots[Nt.id].startingPosition)}):Object.keys(dt).length!==0&&St(dt);const{size:At,viewport:Rt,camera:Dt}=useThree();return init&&(Dt.position.set(-5,0,2),Dt.up.set(0,0,1),init=!1),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/20),minPolarAngle:0,minAzimuthAngle:-Math.PI/2,maxAzimuthAngle:Math.PI/2,minDistance:.5,maxDistance:5,object:Dt}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{labels:["X","Y","Z"],axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,0,-.001],args:[10.5,10.5],cellSize:1,cellThickness:1,rotation:[0,-Math.PI/2,-Math.PI/2],cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx(Plane,{args:[1e3,1e3],rotation:[0,0,-Math.PI/2],position:[0,0,-.02],children:jsx("meshStandardMaterial",{color:"black"})}),Object.values(lt).map(Nt=>jsx("group",{ref:ft,position:Nt.pos,children:jsx(Crazyflie,{robotId:Nt.id,renderBoundingBox:!0})},Nt.id)),jsx("primitive",{object:Dt})]})},SimulationPanel=()=>jsx("div",{className:"h-full w-full",children:jsx(Canvas,{children:jsx(Simulation,{})})}),noSemi=302,incdec=1,incdecPrefix=2,insertSemi=303,spaces=305,newline=306,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(ft,lt){return lt==LineComment||lt==BlockComment||lt==spaces?ft:lt==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft;(dt==braceR||dt==-1||lt.context)&&lt.canShift(insertSemi)&&ft.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft,vt;space.indexOf(dt)>-1||dt==slash&&((vt=ft.peek(1))==slash||vt==star)||dt!=braceR&&dt!=semicolon&&dt!=-1&&!lt.context&&lt.canShift(noSemi)&&ft.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft;if((dt==plus||dt==minus)&&(ft.advance(),dt==ft.next)){ft.advance();let vt=!lt.context&&lt.canShift(incdec);ft.acceptToken(vt?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,interface:417,enum:421,namespace:427,module:429,declare:433,global:437,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},spec_word={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$EnO`QUOOO%QQUOOO'TQWOOP(bOSOOO*pQ(CjO'#CfO*wOpO'#CgO+VO!bO'#CgO+eO07`O'#DZO-vQUO'#DaO.WQUO'#DlO%QQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0uQSO'#ETOOQO'#I`'#I`O0}QSO'#GkOOQO'#Ei'#EiO1YQSO'#EhO1_QSO'#EhO3aQ(CjO'#JcO6QQ(CjO'#JdO6nQSO'#FWO6sQ#tO'#FoOOQ(CY'#F`'#F`O7OO&jO'#F`O7^Q,UO'#FvO8tQSO'#FuOOQ(CY'#Jd'#JdOOQ(CW'#Jc'#JcOOQQ'#J}'#J}O8yQSO'#IPO9OQ(C[O'#IQOOQQ'#JP'#JPOOQQ'#IU'#IUQ`QUOOO%QQUO'#DnO9WQUO'#DzO%QQUO'#D|O9_QSO'#GkO9dQ,UO'#ClO9rQSO'#EgO9}QSO'#ErO:SQ,UO'#F_O:qQSO'#GkO:vQSO'#GoO;RQSO'#GoO;aQSO'#GrO;aQSO'#GsO;aQSO'#GuO9_QSO'#GxO<QQSO'#G{O=cQSO'#CbO=sQSO'#HYO={QSO'#H`O={QSO'#HbO`QUO'#HdO={QSO'#HfO={QSO'#HiO>QQSO'#HoO>VQ(C]O'#HuO%QQUO'#HwO>bQ(C]O'#HyO>mQ(C]O'#H{O9OQ(C[O'#H}O>xQ(CjO'#CfO?zQWO'#DfQOQSOOO@bQSO'#EPO9dQ,UO'#EgO@mQSO'#EgO@xQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jg'#JgO%QQUO'#JgOBUQWO'#E`OOQ(CW'#E_'#E_OB`Q(C`O'#E`OBzQWO'#ESOOQO'#Jj'#JjOC`QWO'#ESOCmQWO'#E`ODTQWO'#EfODWQWO'#E`ODqQWO'#E`OAQQWO'#E`OBzQWO'#E`PEbO?MpO'#C`POOO)CDn)CDnOOOO'#IV'#IVOEmOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOE{O!bO,59RO%QQUO'#D]OOOO'#IY'#IYOFZO07`O,59uOOQ(CY,59u,59uOFiQUO'#IZOF|QSO'#JeOIOQbO'#JeO+sQUO'#JeOIVQSO,59{OImQSO'#EiOIzQSO'#JrOJVQSO'#JqOJVQSO'#JqOJ_QSO,5;VOJdQSO'#JpOOQ(CY,5:W,5:WOJkQUO,5:WOLlQ(CjO,5:bOM]QSO,5:jOMbQSO'#JnON[Q(C[O'#JoO:vQSO'#JnONcQSO'#JnONkQSO,5;UONpQSO'#JnOOQ(CY'#Cf'#CfO%QQUO'#EOO! dQ`O,5:oOOQO'#Jk'#JkOOQO-E<^-E<^O9_QSO,5=VO! zQSO,5=VO!!PQUO,5;SO!$SQ,UO'#EdO!%gQSO,5;SO!'PQ,UO'#DpO!'WQUO'#DuO!'bQWO,5;]O!'jQWO,5;]O%QQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^OOQQ'#FU'#FUO!'xQUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!){QSO,5;uOOQ(CY,5;v,5;vO%QQUO'#IfO!*TQ(C[O,5<cO!$SQ,UO,5;^O!*rQ,UO,5;^O%QQUO,5;rO!*yQ#tO'#FeO!+vQ#tO'#JvO!+bQ#tO'#JvO!+}Q#tO'#JvOOQO'#Jv'#JvO!,cQ#tO,5;}OOOO,5<Z,5<ZO!,tQUO'#FqOOOO'#Ie'#IeO7OO&jO,5;zO!,{Q#tO'#FsOOQ(CY,5;z,5;zO!-lQ7[O'#CrOOQ(CY'#Cv'#CvO!.PQSO'#CvO!.UO07`O'#CzO!.rQ,UO,5<`O!.yQSO,5<bO!0`QMhO'#GQO!0mQSO'#GRO!0rQSO'#GRO!0wQMhO'#GVO!1vQWO'#GZO!2iQ7[O'#J^OOQ(CY'#J^'#J^O!2sQSO'#J]O!3RQSO'#J[O!3ZQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0xQSO'#DSO!%lQ,UO'#FxO!%lQ,UO'#FzO!3cQSO'#F|O!3hQSO'#F}O!0rQSO'#GTO!%lQ,UO'#GYO!3mQSO'#EjO!4XQSO,5<aO`QUO,5>kOOQQ'#JX'#JXOOQQ,5>l,5>lOOQQ-E<S-E<SO!6WQ(CjO,5:YO!8tQ(CjO,5:fO%QQUO,5:fO!;_Q(CjO,5:hOOQ(CW'#Co'#CoO!<OQ,UO,5=VO!<^Q(C[O'#JYO8tQSO'#JYO!<oQ(C[O,59WO!<zQWO,59WO!=SQ,UO,59WO9dQ,UO,59WO!=_QSO,5;SO!=gQSO'#HXO!=xQSO'#KRO%QQUO,5;wO!>QQWO,5;yO!>VQSO,5=rO!>[QSO,5=rO!>aQSO,5=rO9OQ(C[O,5=rO!>oQSO'#EkO!?iQWO'#ElOOQ(CW'#Jp'#JpO!?pQ(C[O'#KOO9OQ(C[O,5=ZO;aQSO,5=aOOQO'#Cr'#CrO!?{QWO,5=^O!@TQ,UO,5=_O!@`QSO,5=aO!@eQ`O,5=dO>QQSO'#G}O9_QSO'#HPO!@mQSO'#HPO9dQ,UO'#HSO!@rQSO'#HSOOQQ,5=g,5=gO!@wQSO'#HTO!APQSO'#ClO!AUQSO,58|O!A`QSO,58|O!ChQUO,58|OOQQ,58|,58|O!CuQ(C[O,58|O%QQUO,58|O!DQQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!DbQSO,5=tO`QUO,5=zO`QUO,5=|O!DgQSO,5>OO`QUO,5>QO!DlQSO,5>TO!DqQUO,5>ZOOQQ,5>a,5>aO%QQUO,5>aO9OQ(C[O,5>cOOQQ,5>e,5>eO!HxQSO,5>eOOQQ,5>g,5>gO!HxQSO,5>gOOQQ,5>i,5>iO!H}QWO'#DXO%QQUO'#JgO!IlQWO'#JgO!JZQWO'#DgO!JlQWO'#DgO!L}QUO'#DgO!MUQSO'#JfO!M^QSO,5:QO!McQSO'#EmO!MqQSO'#JsO!MyQSO,5;WO!NOQWO'#DgO!N]QWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!NdQSO,5:kO>QQSO,5;RO!<zQWO,5;RO!=SQ,UO,5;RO9dQ,UO,5;RO!NlQSO,5@RO!NqQ!LQO,5:oO# wQ(C`O,5:zOBzQWO,5:nO#!cQWO,5:nO#!pQWO,5:zO##WQWO,5:zO##qQWO,5:zO#$bQWO,5:zOBzQWO,5:zO!<oQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%QQUO,5:zO#%UQ(C[O,5:zO#%aQ(C[O,5:zO!<zQWO,5:nOOQO,5;Q,5;QO#%oQ(C[O,5:zPOOO'#IT'#ITP#&TO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#&`Q`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#&eQbO,5>uO+sQUO,5>uOOQO,5>{,5>{O#&oQUO'#IZOOQO-E<X-E<XO#&|QSO,5@PO#'UQbO,5@PO#']QSO,5@]OOQ(CY1G/g1G/gO%QQUO,5@^O#'eQSO'#IaOOQO-E<_-E<_O#']QSO,5@]OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#'yQSO,5@YO:vQSO,5@YO#(RQSO,5@YO%QQUO,5@ZO#(aQ(C[O,5@ZO#(rQ(C[O,5@ZO#(yQSO'#IcO#'yQSO,5@YOOQ(CW1G0p1G0pO!'bQWO,5:qO!'mQWO,5:qOOQO,5:s,5:sO#)hQSO,5:sO#)pQ,UO1G2qO9_QSO1G2qOOQ(CY1G0n1G0nO#*OQ(CjO1G0nO#+TQ(ChO,5;OOOQ(CY'#GP'#GPO#+qQ(CjO'#J^O!!PQUO1G0nO#-yQ,UO'#JhO#.TQSO,5:[O#.YQbO'#JiO%QQUO'#JiO#.dQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%QQUO1G0wOOQ(CY1G1a1G1aO#.iQSO1G0wO#1QQ(CjO1G0xO#1XQ(CjO1G0xO#3rQ(CjO1G0xO#3yQ(CjO1G0xO#6TQ(CjO1G0xO#6kQ(CjO1G0xO#9eQ(CjO1G0xO#9lQ(CjO1G0xO#<VQ(CjO1G0xO#<^Q(CjO1G0xO#>UQ(CjO1G0xO#AUQ$IUO'#CfO#CSQ$IUO1G1ZO#EQQ$IUO'#JdO!*OQSO1G1aO#EeQ(CjO,5?QOOQ(CW-E<d-E<dO#FXQ(CjO1G0xOOQ(CY1G0x1G0xO#HdQ(CjO1G1^O#IWQ#tO,5<RO#I`Q#tO,5<SO#IhQ#tO'#FjO#JPQSO'#FiOOQO'#Jw'#JwOOQO'#Id'#IdO#JUQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JgQ$IUO'#JcO#JqQSO,5<]O!'xQUO,5<]OOOO-E<c-E<cOOQ(CY1G1f1G1fO#JvQWO'#JvOOQ(CY,5<_,5<_O#KOQWO,5<_OOQ(CY,59b,59bO!$SQ,UO'#C|OOOO'#IX'#IXO#KTO07`O,59fOOQ(CY,59f,59fO%QQUO1G1zO!3hQSO'#IhO#K`QSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!%lQ,UO,5=POOQO'#Gh'#GhO!%lQ,UO,5=RO!$SQ,UO,5=TOOQO1G1|1G1|O#KnQ`O'#CoO#LRQ`O,5<lO#LYQSO'#JzO9_QSO'#JzO#LhQSO,5<nO!%lQ,UO,5<mO#LmQSO'#GSO#LxQSO,5<mO#L}Q`O'#GPO#M[Q`O'#J{O#MfQSO'#J{O!$SQ,UO'#J{O#MkQSO,5<qO#MpQWO'#G[O!1qQWO'#G[O#NRQSO'#G^O#NWQSO'#G`O!0rQSO'#GcO#N]Q(C[O'#IjO#NhQWO,5<uOOQ(CY,5<u,5<uO#NoQWO'#G[O#N}QWO'#G]O$ VQWO'#G]OOQ(CY,5=U,5=UO!%lQ,UO,5?wO!%lQ,UO,5?wO$ [QSO'#IkO$ gQSO,5?vO$ oQSO,59]O$!`Q,UO,59nOOQ(CY,59n,59nO$#RQ,UO,5<dO$#tQ,UO,5<fO?rQSO,5<hOOQ(CY,5<i,5<iO$$OQSO,5<oO$$TQ,UO,5<tO!!PQUO1G1{O$$eQSO1G1{OOQQ1G4V1G4VOOQ(CY1G/t1G/tO!){QSO1G/tO$&dQ(CjO1G0QOOQQ1G2q1G2qO!$SQ,UO1G2qO%QQUO1G2qO$'TQSO1G2qO$'`Q,UO'#EdOOQ(CW,5?t,5?tO$'jQ(C[O,5?tOOQQ1G.r1G.rO!<oQ(C[O1G.rO!<zQWO1G.rO!=SQ,UO1G.rO$'{QSO1G0nO$(QQSO'#CfO$(]QSO'#KSO$(eQSO,5=sO$(jQSO'#KSO$(oQSO'#KSO$(zQSO'#IsO$)YQSO,5@mO$)bQbO1G1cOOQ(CY1G1e1G1eO9_QSO1G3^O?rQSO1G3^O$)iQSO1G3^O$)nQSO1G3^OOQQ1G3^1G3^O:vQSO'#JqO:vQSO'#EmO%QQUO'#EmO:vQSO'#ImO$)sQ(C[O,5@jOOQQ1G2u1G2uO!@`QSO1G2{O!$SQ,UO1G2xO$*OQSO1G2xOOQQ1G2y1G2yO!$SQ,UO1G2yO$*TQSO1G2yO$*]QWO'#GwOOQQ1G2{1G2{O!1qQWO'#IoO!@eQ`O1G3OOOQQ1G3O1G3OOOQQ,5=i,5=iO$*eQ,UO,5=kO9_QSO,5=kO#NWQSO,5=nO8tQSO,5=nO!<zQWO,5=nO!=SQ,UO,5=nO9dQ,UO,5=nO$*sQSO'#KQO$+OQSO,5=oOOQQ1G.h1G.hO$+TQ(C[O1G.hO?rQSO1G.hO$+`QSO1G.hO9OQ(C[O1G.hO$+kQbO,5@oO$,OQSO,5@oO$,ZQUO,5=vO$,bQSO,5=vO:vQSO,5@oOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO={QSO1G3jO$,gQUO1G3lO$0hQUO'#HkOOQQ1G3o1G3oO$0uQSO'#HqO>QQSO'#HsOOQQ1G3u1G3uO$0}QUO1G3uO9OQ(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9OQ(C[O1G4PO9OQ(C[O1G4RO$5RQSO,5@RO!'xQUO,5;XO:vQSO,5;XO>QQSO,5:RO!'xQUO,5:RO!<zQWO,5:RO$5WQ$IUO,5:ROOQO,5;X,5;XO$5bQWO'#I[O$5xQSO,5@QOOQ(CY1G/l1G/lO$6QQWO'#IbO$6[QSO,5@_OOQ(CW1G0r1G0rO!JlQWO,5:ROOQO'#I_'#I_O$6dQWO,5:mOOQ(CY,5:m,5:mO!NgQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0m1G0mO>QQSO1G0mO!<zQWO1G0mO!=SQ,UO1G0mOOQ(CW1G5m1G5mO!<oQ(C[O1G0YOOQO1G0f1G0fO%QQUO1G0fO$6kQ(C[O1G0fO$6vQ(C[O1G0fO!<zQWO1G0YOBzQWO1G0YO$7UQ(C`O1G0fO$7pQWO1G0YOBzQWO1G0fO$7}QWO1G0fO$8eQWO1G0fO$9OQWO1G0fO$9oQ(C[O1G0fOOQO1G0Y1G0YO$:TQ(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$:_Q`O,5<cO$:gQbO1G4aOOQO1G4g1G4gO%QQUO,5>uO$:qQSO1G5kO$:yQSO1G5wO$;RQbO1G5xO:vQSO,5>{O$;]QSO1G5tO$;]QSO1G5tO:vQSO1G5tO$;eQ(CjO1G5uO%QQUO1G5uO$;uQ(C[O1G5uO$<WQSO,5>}O:vQSO,5>}OOQO,5>},5>}O$<lQSO,5>}OOQO-E<a-E<aOOQO1G0]1G0]OOQO1G0_1G0_O!*OQSO1G0_OOQQ7+(]7+(]O!$SQ,UO7+(]O%QQUO7+(]O$<zQSO7+(]O$=VQ,UO7+(]O$=eQ(CjO,59nO$?mQ(CjO,5<dO$AxQ(CjO,5<fO$DTQ(CjO,5<tOOQ(CY7+&Y7+&YO$FfQ(CjO7+&YO$GYQ,UO'#I]O$GdQSO,5@SOOQ(CY1G/v1G/vO$GlQUO'#I^O$GyQSO,5@TO$HRQbO,5@TOOQ(CY1G/{1G/{O$H]QSO7+&cOOQ(CY7+&c7+&cO$HbQ$IUO,5:bO%QQUO7+&uO$HlQ$IUO,5:YO$HyQ$IUO,5:fO$ITQ$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$I_Q#tO,5<UO!'xQUO,5<TOOQO-E<b-E<bOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$IjQSO1G1wOOQ(CY1G1y1G1yO$IoQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IvQ(CjO7+'fOOQ(CY,5?S,5?SO$JjQSO,5?SOOQ(CY1G2_1G2_P$JoQSO'#IhPOQ(CY-E<f-E<fO$KcQ,UO1G2kO$LUQ,UO1G2mO$L`Q`O1G2oOOQ(CY1G2W1G2WO$LgQSO'#IgO$LuQSO,5@fO$LuQSO,5@fO$L}QSO,5@fO$MYQSO,5@fOOQO1G2Y1G2YO$MhQ,UO1G2XO!%lQ,UO1G2XO$MxQMhO'#IiO$NYQSO,5@gO!$SQ,UO,5@gO$NbQ`O,5@gOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$NlQSO,5<wOBuQSO,5<wO!<zQWO,5<vOOQO'#G_'#G_O$NqQSO,5<xOOQ(CW,5<z,5<zO$NlQSO,5<}OOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY1G2a1G2aO!1qQWO,5<vO$NyQSO,5<wO#NRQSO,5<xO!1qQWO,5<wO% UQ,UO1G5cO% `Q,UO1G5cOOQO,5?V,5?VOOQO-E<i-E<iOOQO1G.w1G.wO!>QQWO,59pO%QQUO,59pO% mQSO1G2SO!%lQ,UO1G2ZO% rQ(CjO7+'gOOQ(CY7+'g7+'gO!!PQUO7+'gOOQ(CY7+%`7+%`O%!fQ`O'#J|O!NgQSO7+(]O%!pQbO7+(]O$<}QSO7+(]O%!wQ(ChO'#CfO%#[Q(ChO,5<{O%#|QSO,5<{OOQ(CW1G5`1G5`OOQQ7+$^7+$^O!<oQ(C[O7+$^O!<zQWO7+$^O!!PQUO7+&YO%$RQSO'#IrO%$gQSO,5@nOOQO1G3_1G3_O9_QSO,5@nO%$gQSO,5@nO%$oQSO,5@nOOQO,5?_,5?_OOQO-E<q-E<qOOQ(CY7+&}7+&}O%$tQSO7+(xO9OQ(C[O7+(xO9_QSO7+(xO?rQSO7+(xO%$yQSO,5;XOOQ(CW,5?X,5?XOOQ(CW-E<k-E<kOOQQ7+(g7+(gO%%OQ(ChO7+(dO!$SQ,UO7+(dO%%YQ`O7+(eOOQQ7+(e7+(eO!$SQ,UO7+(eO%%aQSO'#KPO%%lQSO,5=cOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ7+(j7+(jO%&{QWO'#HQOOQQ1G3V1G3VO!$SQ,UO1G3VO%QQUO1G3VO%'SQSO1G3VO%'_Q,UO1G3VO9OQ(C[O1G3YO#NWQSO1G3YO8tQSO1G3YO!<zQWO1G3YO!=SQ,UO1G3YO%'mQSO'#IqO%'xQSO,5@lO%(QQWO,5@lOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO?rQSO7+$SO9OQ(C[O7+$SO%(]QSO7+$SO%QQUO1G6ZO%QQUO1G6[O%(bQUO1G3bO%(iQSO1G3bO%(nQUO1G3bO%(uQ(C[O1G6ZOOQQ7+(z7+(zO9OQ(C[O7+)UO`QUO7+)WOOQQ'#KV'#KVOOQQ'#It'#ItO%)PQUO,5>VOOQQ,5>V,5>VO%QQUO'#HlO%)^QSO'#HnOOQQ,5>],5>]O:vQSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%)cQWO1G5mO%)wQ$IUO1G0sO%*RQSO1G0sOOQO1G/m1G/mO%*^Q$IUO1G/mO>QQSO1G/mO!'xQUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!<zQWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!NgQSO7+%qOOQ(CY7+&X7+&XO>QQSO7+&XO!<zQWO7+&XOOQO7+%t7+%tO$:TQ(CjO7+&QOOQO7+&Q7+&QO%QQUO7+&QO%*hQ(C[O7+&QO!<oQ(C[O7+%tO!<zQWO7+%tO%*sQ(C[O7+&QOBzQWO7+%tO%+RQ(C[O7+&QO%+gQ(C`O7+&QO%+qQWO7+%tOBzQWO7+&QO%,OQWO7+&QO%,fQWO7+&QO%-PQSO7++`O%-PQSO7++`O%-XQ(CjO7++aO%QQUO7++aOOQO1G4i1G4iO:vQSO1G4iO%-iQSO1G4iOOQO7+%y7+%yO!NgQSO<<KwO%!pQbO<<KwO%-wQSO<<KwOOQQ<<Kw<<KwO!$SQ,UO<<KwO%QQUO<<KwO%.PQSO<<KwO%.[Q(CjO1G2kO%0gQ(CjO1G2mO%2rQ(CjO1G2XO%5TQ,UO,5>wOOQO-E<Z-E<ZO%5_QbO,5>xO%QQUO,5>xOOQO-E<[-E<[O%5iQSO1G5oOOQ(CY<<I}<<I}O%5qQ$IUO1G0nO%7{Q$IUO1G0xO%8SQ$IUO1G0xO%:WQ$IUO1G0xO%:_Q$IUO1G0xO%<SQ$IUO1G0xO%<jQ$IUO1G0xO%>}Q$IUO1G0xO%?UQ$IUO1G0xO%AYQ$IUO1G0xO%AaQ$IUO1G0xO%CXQ$IUO1G0xO%ClQ(CjO<<JaO%DqQ$IUO1G0xO%FgQ$IUO'#J^O%HjQ$IUO1G1^O%HwQ$IUO1G0QO!'xQUO'#FlOOQO'#Jx'#JxOOQO1G1p1G1pO%IRQSO1G1oO%IWQ$IUO,5?QOOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4n1G4nO!%lQ,UO7+(ZO%IbQSO,5?RO9_QSO,5?ROOQO-E<e-E<eO%IpQSO1G6QO%IpQSO1G6QO%IxQSO1G6QO%JTQ,UO7+'sO%JeQ`O,5?TO%JoQSO,5?TO!$SQ,UO,5?TOOQO-E<g-E<gO%JtQ`O1G6RO%KOQSO1G6ROOQ(CW1G2c1G2cO$NlQSO1G2cOOQ(CW1G2b1G2bO%KWQSO1G2dO!$SQ,UO1G2dOOQ(CW1G2i1G2iO!<zQWO1G2bOBuQSO1G2cO%K]QSO1G2dO%KeQSO1G2cO!%lQ,UO7+*}OOQ(CY1G/[1G/[O%KpQSO1G/[OOQ(CY7+'n7+'nO%KuQ,UO7+'uO%LVQ(CjO<<KROOQ(CY<<KR<<KRO!$SQ,UO'#IlO%LyQSO,5@hO!$SQ,UO1G2gOOQQ<<Gx<<GxO!<oQ(C[O<<GxO%MRQ(CjO<<ItOOQ(CY<<It<<ItOOQO,5?^,5?^O%MuQSO,5?^O$(oQSO,5?^OOQO-E<p-E<pO%MzQSO1G6YO%MzQSO1G6YO9_QSO1G6YO?rQSO<<LdOOQQ<<Ld<<LdO%NSQSO<<LdO9OQ(C[O<<LdO%NXQSO1G0sOOQQ<<LO<<LOO%%OQ(ChO<<LOOOQQ<<LP<<LPO%%YQ`O<<LPO%N^QWO'#InO%NiQSO,5@kO!'xQUO,5@kOOQQ1G2}1G2}O%NqQ(C`O'#JgO& ]QUO'#JgO& dQWO'#E`O&!QQ(C[O'#E`OB`Q(C`O'#E`O(YQWO'#HROOQO'#Ip'#IpO9OQ(C[O'#IpO&!fQWO,5=lOOQQ,5=l,5=lO&#OQWO'#E`O& vQWO'#E`O&#VQWO'#E`O&#pQWO'#E`O& jQWO'#E`O&$aQWO'#HRO&$rQSO7+(qO&$wQSO7+(qOOQQ7+(q7+(qO!$SQ,UO7+(qO%QQUO7+(qO&%PQSO7+(qOOQQ7+(t7+(tO9OQ(C[O7+(tO#NWQSO7+(tO8tQSO7+(tO!<zQWO7+(tO&%[QSO,5?]OOQO-E<o-E<oOOQO'#HU'#HUO&%gQSO1G6WO9OQ(C[O<<GnOOQQ<<Gn<<GnO?rQSO<<GnO&%oQSO7++uO&%tQSO7++vOOQQ7+(|7+(|O&%yQSO7+(|O&&OQUO7+(|O&&VQSO7+(|O%QQUO7++uO%QQUO7++vOOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<r-E<rOOQQ1G3q1G3qO&&[QSO,5>WOOQQ,5>Y,5>YO&&aQSO1G3wO:vQSO7+&_O!'xQUO7+&_OOQO7+%X7+%XO&&fQ$IUO1G5xO>QQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>QQSO<<IsOOQO<<Il<<IlO$:TQ(CjO<<IlO%QQUO<<IlOOQO<<I`<<I`O!<oQ(C[O<<I`O&&pQ(C[O<<IlO!<zQWO<<I`O&&{Q(C[O<<IlOBzQWO<<I`O&'ZQ(C[O<<IlO&'oQ(C`O<<IlO&'yQWO<<I`OBzQWO<<IlO&(WQWO<<IlO&(nQSO<<NzO&(vQ(CjO<<N{OOQO7+*T7+*TO:vQSO7+*TOOQQANAcANAcO&)WQSOANAcO!$SQ,UOANAcO!NgQSOANAcO%!pQbOANAcO%QQUOANAcO&)`Q(CjO7+'sO&+qQ(CjO7+'uO&.SQbO1G4dO&.^Q$IUO7+&YO&.kQ$IUO,59nO&0nQ$IUO,5<dO&2qQ$IUO,5<fO&4tQ$IUO,5<tO&6jQ$IUO7+'fO&6wQ$IUO7+'gO&7UQSO,5<WOOQO7+'Z7+'ZO&7ZQ,UO<<KuOOQO1G4m1G4mO&7bQSO1G4mO&7mQSO1G4mO&7{QSO7++lO&7{QSO7++lO!$SQ,UO1G4oO&8TQ`O1G4oO&8_QSO7++mOOQ(CW7+'}7+'}O$NlQSO7+(OO&8gQ`O7+(OOOQ(CW7+'|7+'|O$NlQSO7+'}O&8nQSO7+(OO!$SQ,UO7+(OOBuQSO7+'}O&8sQ,UO<<NiOOQ(CY7+$v7+$vO&8}Q`O,5?WOOQO-E<j-E<jO&9XQ(ChO7+(ROOQQAN=dAN=dO9_QSO1G4xOOQO1G4x1G4xO&9iQSO1G4xO&9nQSO7++tO&9nQSO7++tO9OQ(C[OANBOO?rQSOANBOOOQQANBOANBOOOQQANAjANAjOOQQANAkANAkO&9vQSO,5?YOOQO-E<l-E<lO&:RQ$IUO1G6VO&:]Q(C[O,5=mO8tQSO,5=mO&<nQbO'#CfO&<xQWO,5:zO&=SQWO,5:zO&=aQWO,5:zO&=tQWO,5:zO!<zQWO,5=mOOQO,5?[,5?[OOQO-E<n-E<nOOQQ1G3W1G3WO& ]QUO,5<xO%NqQ(C`O,5=mO# wQ(C`O,5:zO(YQWO,5=mO&>[QWO,5=mO&>mQWO,5:zOOQQ<<L]<<L]O!$SQ,UO<<L]O&$rQSO<<L]O&?WQSO<<L]O%QQUO<<L]OOQQ<<L`<<L`O9OQ(C[O<<L`O#NWQSO<<L`O8tQSO<<L`O&?`QWO1G4wO&?kQSO7++rOOQQAN=YAN=YO9OQ(C[OAN=YOOQQ<= a<= aOOQQ<= b<= bOOQQ<<Lh<<LhO&?sQSO<<LhO&?xQUO<<LhO&@PQSO<= aO&@UQSO<= bOOQQ1G3r1G3rO>QQSO7+)cO&@ZQSO<<IyO&@fQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$:TQ(CjOAN?WOOQOAN>zAN>zO%QQUOAN?WO!<oQ(C[OAN>zO&@pQ(C[OAN?WO!<zQWOAN>zO&@{Q(C[OAN?WOBzQWOAN>zO&AZQ(C[OAN?WO&AoQ(C`OAN?WO&AyQWOAN>zOBzQWOAN?WOOQO<<Mo<<MoOOQQG26}G26}O!$SQ,UOG26}O!NgQSOG26}O&BWQSOG26}O%!pQbOG26}O&B`Q$IUO<<JaO&BmQ$IUO1G2XO&DcQ$IUO1G2kO&FfQ$IUO1G2mO&HiQ$IUO<<KRO&HvQ$IUO<<ItOOQO1G1r1G1rO!%lQ,UOANAaOOQO7+*X7+*XO&ITQSO7+*XO&I`QSO<= WO&IhQ`O7+*ZOOQ(CW<<Kj<<KjO$NlQSO<<KjOOQ(CW<<Ki<<KiO&IrQ`O<<KjO$NlQSO<<KiOOQO7+*d7+*dO9_QSO7+*dO&IyQSO<= `OOQQG27jG27jO9OQ(C[OG27jO!'xQUO1G4tO&JRQSO7++qOOQO1G3X1G3XO9OQ(C[O1G3XO&:]Q(C[O1G3XO&JZQWO1G0fO&JeQWO1G0fO&JrQWO1G0fO8tQSO1G3XO!<zQWO1G3XO(YQWO1G3XO%NqQ(C`O1G3XO$7UQ(C`O1G0fO&KVQWO1G3XO&$rQSOANAwOOQQANAwANAwO!$SQ,UOANAwO&KhQSOANAwOOQQANAzANAzO9OQ(C[OANAzO#NWQSOANAzOOQO'#HV'#HVOOQO7+*c7+*cOOQQG22tG22tOOQQANBSANBSO&KpQSOANBSOOQQAND{AND{OOQQAND|AND|OOQQ<<L}<<L}O!'xQUOAN?eOOQOG24rG24rO$:TQ(CjOG24rOOQOG24fG24fO%QQUOG24rO!<oQ(C[OG24fO&KuQ(C[OG24rO!<zQWOG24fO&LQQ(C[OG24rOBzQWOG24fO&L`Q(C[OG24rO!NgQSOLD,iOOQQLD,iLD,iO!$SQ,UOLD,iO&LtQSOLD,iO&L|Q$IUO7+'sO&NrQ$IUO7+'uO'!hQ,UOG26{OOQO<<Ms<<MsOOQ(CWANAUANAUO$NlQSOANAUOOQ(CWANATANATOOQO<<NO<<NOOOQQLD-ULD-UO'!xQ$IUO7+*`OOQO7+(s7+(sO9OQ(C[O7+(sO'#SQWO7+&QO'#^QWO7+&QO&:]Q(C[O7+(sO8tQSO7+(sO!<zQWO7+(sO(YQWO7+(sOOQQG27cG27cO&$rQSOG27cO!$SQ,UOG27cOOQQG27fG27fO9OQ(C[OG27fOOQQG27nG27nO'#kQ$IUOG25POOQOLD*^LD*^O$:TQ(CjOLD*^OOQOLD*QLD*QO%QQUOLD*^O!<oQ(C[OLD*QO'#uQ(C[OLD*^O!<zQWOLD*QO'$QQ(C[OLD*^OOQQ!$(!T!$(!TO!NgQSO!$(!TO!$SQ,UO!$(!TO'$`Q(CjOG26{OOQ(CWG26pG26pOOQO<<L_<<L_O'&qQWO<<IlO9OQ(C[O<<L_O&:]Q(C[O<<L_O8tQSO<<L_O!<zQWO<<L_OOQQLD,}LD,}O&$rQSOLD,}OOQQLD-QLD-QOOQO!$'Mx!$'MxO$:TQ(CjO!$'MxOOQO!$'Ml!$'MlO%QQUO!$'MxO!<oQ(C[O!$'MlO'&{Q(C[O!$'MxOOQQ!)9Eo!)9EoO!NgQSO!)9EoOOQOANAyANAyO9OQ(C[OANAyO&:]Q(C[OANAyO8tQSOANAyOOQQ!$(!i!$(!iOOQO!)9Cd!)9CdO$:TQ(CjO!)9CdOOQO!)9CW!)9CWO%QQUO!)9CdOOQQ!.K;Z!.K;ZO''WQ$IUOG26{OOQOG27eG27eO9OQ(C[OG27eO&:]Q(C[OG27eOOQO!.K9O!.K9OO$:TQ(CjO!.K9OOOQOLD-PLD-PO9OQ(C[OLD-POOQO!4/.j!4/.jOOQO!$(!k!$(!kO!'xQUO'#DvO0uQSO'#ETO'(|QbO'#JcO!'xQUO'#DnO')TQUO'#DzO!'xQUO'#D|O')[QbO'#CfO'+rQbO'#CfO',SQUO,5;SO!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO'#IfO'.VQSO,5<cO'._Q,UO,5;^O'/rQ,UO,5;^O!'xQUO,5;rO0xQSO'#DSO0xQSO'#DSO!$SQ,UO'#FxO'._Q,UO'#FxO!$SQ,UO'#FzO'._Q,UO'#FzO!$SQ,UO'#GYO'._Q,UO'#GYO!'xQUO,5:fO!'xQUO,5@^O',SQUO1G0nO'/yQ$IUO'#CfO!'xQUO1G1zO!$SQ,UO,5=PO'._Q,UO,5=PO!$SQ,UO,5=RO'._Q,UO,5=RO!$SQ,UO,5<mO'._Q,UO,5<mO',SQUO1G1{O!'xQUO7+&uO!$SQ,UO1G2XO'._Q,UO1G2XO!$SQ,UO1G2ZO'._Q,UO1G2ZO',SQUO7+'gO',SQUO7+&YO!$SQ,UOANAaO'._Q,UOANAaO'0TQSO'#EhO'0YQSO'#EhO'0bQSO'#FWO'0gQSO'#ErO'0lQSO'#JrO'0wQSO'#JpO'1SQSO,5;SO'1XQ,UO,5<`O'1`QSO'#GRO'1eQSO'#GRO'1jQSO,5<aO'1rQSO,5;SO'1zQ$IUO1G1ZO'2RQSO,5<mO'2WQSO,5<mO'2]QSO,5<oO'2bQSO,5<oO'2gQSO1G1{O'2lQSO1G0nO'2qQ,UO<<KuO'2xQ,UO<<KuO7^Q,UO'#FvO8tQSO'#FuO@mQSO'#EgO!'xQUO,5;oO!0rQSO'#GRO!0rQSO'#GRO!0rQSO'#GTO!0rQSO'#GTO!%lQ,UO7+(ZO!%lQ,UO7+(ZO$L`Q`O1G2oO$L`Q`O1G2oO!$SQ,UO,5=TO!$SQ,UO,5=T",stateData:"'4R~O'mOS'nOSROS'oRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#p}O$QzO$UfO%`{O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO%}!UO&T!VO&V!WO&X!XO&Z!YO&^!ZO&d![O&j!]O&l!^O&n!_O&p!`O&r!aO'tSO'vTO'yUO(RVO(`[O(miO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x<XO!|!wO!}!vO#O!tO#P!uO#Q!sO#T!xO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O'o!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'kYX(RYX(aYX(hYX(iYX~O!a$zX~P(gO[!{O'v!}O'w!{O'x!}O~O[#OO'x!}O'y!}O'z#OO~Oq#QO!O#RO(S#RO(T#TO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't<^O'vTO'yUO(RVO(`[O(miO~O!U#XO!V#UO!S(XP!S(eP~P+sO!W#aO~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(miO~O!U#gO!x]O#b#jO#c#gO't<_O!g(bP~P._O!h#lO't#kO~O!t#pO!x]O%`#qO~O#d#rO~O!a#sO#d#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!V$_O!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^(VX'k(VX'i(VX!g(VX!S(VX!X(VX%a(VX!a(VX~P1gO#X$cO#{$cOP(WXX(WXk(WXy(WXz(WX|(WX!V(WX!e(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!X(WX%a(WX~O^(WX!f(WX'k(WX'i(WX!S(WX!g(WXo(WX!a(WX~P3}O#X$cO~O$W$eO$Y$dO$a$jO~O!X$kO$UfO$d$lO$f$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't$pO'vTO'yUO'}%PO(R$sOd(OP~O!h%[O~O!a%^O~O^%_O'k%_O~O'u!iO~P%QO't%fO~O!h%[O't%fO'u!iO'}%PO~Ob%mO!h%[O't%fO~O#o$QO~Oy%rO!X%oO!h%qO%b%uO't%fO'u!iO'vTO'yUO](uP~O!t#pO~O|%wO!X%xO't%fO~O|%wO!X%xO%j%|O't%fO~O't%}O~O#p}O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO~Oa&WOb&VO!t&TO%`&UO%r&SO~P;fOa&ZObwO!X&YO!tvO!x]O#p}O%`{O%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO~O_&^O#X&aO%b&[O'u!iO~P<eO!h&bO!q&fO~O!h#lO~O!XXO~O^%_O'j&nO'k%_O~O^%_O'j&qO'k%_O~O^%_O'j&sO'k%_O~O'iYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(gO!['QO!]&yO!^&yO'u!iO'vTO'yUO~Ol&wO|&vO!U&zO(U&uO!W(YP!W(gP~P?fOg'TO!X'RO't%fO~Ob'YO!h%[O't%fO~Oy%rO!h%qO~Ol!kO|!lO!['_O!]'^O!^'^O!}'bO#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO'vTO'yUO(U!jO(`!nO~O!x<XO!|'cO~PAQO^%_O!a#sO!h%[O!l'jO#X'hO'k%_O'}%PO(a'fO~Ol!kO|!lO'vTO'yUO(U!jO(`!nO~O!]'^O!^'^O'u!iO~PBzO!['_O!]'^O!^'^O#T'dO#U'dO'u!iO~PBzO!XXO!['_O!]'^O!^'^O#Q'`O#T'dO#U'dO'u!iO~PBzO!['_O!]'^O!^'^O#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO~PBzO'p'nO'q'nO'r'pO~O[!{O'v'rO'w!{O'x'rO~O[#OO'x'rO'y'rO'z#OO~Oq#QO!O#RO(S#RO(T'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+sO!V'zO!S(XX~OP$ZOX$bOk$OOy#wOz#xO|#yO!V'zO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O!S(XX~PGUO!S(PO~O!S(dX!V(dX!a(dX!g(dX(a(dX~O#X(dX#d#]X!W(dX~PI[O#X(QO!S(fX!V(fX~O!V(RO!S(eX~O!S(UO~O#X$cO~PI[O!W(VO~P`Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(a!ja(h!ja(i!ja~O^!ja'k!ja'i!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJrO!g(WO~O|%wO!X%xO!x]O#b(ZO#c(YO't%fO~O!a#sO#X([O(a'fO!V(cX^(cX'k(cX~O!g(cX~PMvO!V(_O!g(bX~O!g(aO~O|%wO!X%xO#c(YO't%fO~Oy(bOz(cO!f#uO!h#vO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa't!wa~P! OO!t(gO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#d(mO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't(kO'vTO'yUO'}%PO(R$sO~Od([P~P!%lO!U(qO!g(]P~P%QO(U(sO(`[O~O|(uO!h#vO(U(sO(`[O~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~Oz)WO!h#vO~O!V$_O^$ka'k$ka'i$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!$SOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(jX$T(jX$W(jX$Y(jX$a(jX~Oy)_O~P!+bOy)_O!X(jX$T(jX$W(jX$Y(jX$a(jX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!'xO$W$eO$Y$dO$a)mO~Og$sXy$sX|$sX!f$sX(h$sX(i$sX~OdfXd$sXgfX!VfX#XfX~P!-WOl)oO~Oq)pO(S)qO(T)sO~Og)|Oy)uO|)vO(h)xO(i)zO~Od)tO~P!.aOd)}O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO'vTO'yUO'}%PO(R$sO~O!U*RO't*OO!g(nP~P!/OO#d*TO~O!h*UO~O!U*ZO't*WO!S(oP~P!/OOk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'u!iO(U!jO~O!W*dO~P!1UO!f#uOg(QXy(QX|(QX(h(QX(i(QX!V(QX#X(QX~Od(QX#y(QX~P!1}Og*jO#X*iOd(PX!V(PX~O!V*kOd(OX~O't%}Od(OP~O!h*rO~O't(kO~O|%wO!U#gO!X%xO!x]O#b#jO#c#gO't%fO!g(bP~O!a#sO#d*vO~OP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^!ba!V!ba'k!ba'i!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!4aOy#wOz#xO|#yO!f#uO!h#vO(RVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(a!na(h!na(i!na~O^!na'k!na'i!na!S!na!g!nao!na!X!na%a!na!a!na~P!6zOy#wOz#xO|#yO!f#uO!h#vO(RVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(a!pa(h!pa(i!pa~O^!pa'k!pa'i!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!9eOg+OO!X'RO%a*}O'}%PO~O!a+QO^'|X!X'|X'k'|X!V'|X~O^%_O!XXO'k%_O~O!h%[O'}%PO~O!h%[O't%fO'}%PO~O!a#sO#d(mO~O%b+^O't+YO'vTO'yUO!W(vP~O!V+_O](uX~O(U(sO~OX+cO~O]+dO~O!X%oO't%fO'u!iO](uP~O|%wO!U+hO!V(RO!X%xO't%fO!S(eP~Ol&}O|+jO!U+iO'vTO'yUO(U(sO~O!W(gP~P!?TO!V+kO^(rX'k(rX~O#X+oO'}%PO~Og+rO!X$zO'}%PO~O!X+tO~Oy+vO!XXO~O!t+{O~Ob,QO~O't#kO!W(tP~Ob%mO~O%b!OO't%}O~P<eOX,WO],VO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$UfO%`{O'vTO'yUO(RVO(`[O(miO~O!X!cO$Q!hO't!bO~P!AhO],VO^%_O'k%_O~O^,[O#p,^O%d,^O%e,^O~P%QO!h&bO~O&T,cO~O!X,eO~O&f,gO&h,hOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%h&ca%j&ca%m&ca%n&ca%p&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'i&ca't&ca'v&ca'y&ca(R&ca(`&ca(m&ca!W&ca&[&ca_&ca&a&ca~O't,mO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X'}!_X~O!a,rO#X,qO!V#aX!V(ZX!W#aX!W(ZX!a(ZX!h(ZX'}(ZX~O!a,tO!h%[O'}%PO!V!ZX!W!ZX~Ol!kO|!lO'vTO'yUO(U!jO~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(m=uO~O't<|O~P!J}O!V,xO!W(YX~O!W,zO~O!a,rO#X,qO!V#aX!W#aX~O!V,{O!W(gX~O!W,}O~O!]-OO!^-OO'u!iO~P!JlO!W-RO~P'TOg-UO!X'RO~O!S-ZO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'u!wa'v!wa'y!wa(U!wa(`!wa~P! OO^%_O!a#sO!h%[O!l-`O#X-^O'k%_O'}%PO(a'fO~O!]-bO!^-bO'u!iO~PBzO![-dO!]-bO!^-bO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO!}-hO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO^%_O#X-^O'k%_O~O^%_O!a#sO#X-^O'k%_O~O^%_O!a#sO!l-`O#X-^O'k%_O(a'fO~O'p'nO'q'nO'r-mO~Oo-nO~O!S&}a!V&}a~P!4aO!U-rO!S&}X!V&}X~P%QO!V'zO!S(Xa~O!S(Xa~PGUO!V(RO!S(ea~O|%wO!U-vO!X%xO't%fO!S'TX!V'TX~O!V(_O!g(ba~O|%wO!X%xO#c-yO't%fO~O#X-{O!V(ca!g(ca^(ca'k(ca~O!a#sO~P#(aO|%wO!U.OO!X%xO!x]O#b.QO#c.OO't%fO!V'VX!g'VX~Oz.UO!h#vO~Og.XO!X'RO%a.WO'}%PO~O^#[i!V#[i'k#[i'i#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!4aOg>ROy)uO|)vO(h)xO(i)zO~O#d#Wa^#Wa#X#Wa'k#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#*rO#d(QXP(QXX(QX^(QXk(QXz(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX'k(QX(R(QX(a(QX!g(QX!S(QX'i(QXo(QX!X(QX%a(QX!a(QX~P!1}O!V.bOd([X~P!.aOd.dO~O!V.eO!g(]X~P!4aO!g.hO~O!S.jO~OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#.nO#g#|O~P#.nOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O(RVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#1`Ok$OO~P#1`OP$ZOk$OOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO(RVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#4QOX$bO!e$QO#l$QO#m$QO#n$aO#o$QO~P#4QOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO(RVO^#fi!V#fi#s#fi#u#fi#v#fi'k#fi(a#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(h#fi~P#7RO(h#zO~P#7ROP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO(RVO(h#zO^#fi!V#fi#u#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(i#fi~P#9sO(i#{O~P#9sOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO(RVO(h#zO(i#{O~O^#fi!V#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#<eOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX!VYX!WYX~O#yYX~P#?OOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO#v<kO(RVO(a$XO(h#zO(i#{O~O#y.lO~P#A]OP(WXX(WXk(WXy(WXz(WX|(WX!e(WX!f(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!V(WX~O#X<pO#{<pO#o(WX#y(WX!W(WX~P#CZO^'Ya!V'Ya'k'Ya'i'Ya!g'Ya!S'Yao'Ya!X'Ya%a'Ya!a'Ya~P!4aOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(R#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#*rO^#zi!V#zi'k#zi'i#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!4aO$W.qO$Y.qO~O$W.rO$Y.rO~O!a)^O#X.sO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.tO~O!X)aO$T.vO$W)`O$Y)`O$a.wO~O!V<lO!W(VX~P#A]O!W.xO~O!a)^O$a(jX~O$a.zO~Oq)pO(S)qO(T.}O~Ol/QO!S/RO'vTO'yUO~O!VcX!acX!gcX!g$sX(acX~P!-WO!g/XO~P#*rO!V/YO!a#sO(a'fO!g(nX~O!g/_O~O!U*RO't%fO!g(nP~O#d/aO~O!S$sX!V$sX!a$zX~P!-WO!V/bO!S(oX~P#*rO!a/dO~O!S/fO~Ok/jO!a#sO!h%[O'}%PO(a'fO~O't/lO~O!a+QO~O^%_O!V/pO'k%_O~O!W/rO~P!1UO!]/sO!^/sO'u!iO(U!jO~O|/uO(U!jO~O#T/vO~O't%}Od'_X!V'_X~O!V*kOd(Oa~Od/{O~Oy/|Oz/|O|/}Ogva(hva(iva!Vva#Xva~Odva#yva~P$ tOy)uO|)vOg$la(h$la(i$la!V$la#X$la~Od$la#y$la~P$!jOy)uO|)vOg$na(h$na(i$na!V$na#X$na~Od$na#y$na~P$#]O#d0PO~Od$|a!V$|a#X$|a#y$|a~P!.aO#d0SO~Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(a!ni(h!ni(i!ni~O^!ni'k!ni'i!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$jOg.XO!X'RO%a.WO~Oi0ZO't0YO~P!/RO!a+QO^'|a!X'|a'k'|a!V'|a~O#d0aO~OXYX!VcX!WcX~O!V0bO!W(vX~O!W0dO~OX0eO~O't+YO'vTO'yUO~O!X%oO't%fO]'gX!V'gX~O!V+_O](ua~O!g0jO~P!4aOX0mO~O]0nO~O!V+kO^(ra'k(ra~O#X0tO~Og0wO!X$zO~O(U(sO!W(sP~Og1QO!X0}O%a1PO'}%PO~OX1[O!V1YO!W(tX~O!W1]O~O]1_O^%_O'k%_O~O't#kO'vTO'yUO~O#X$cO#o1bO#{$cO&R1cO^(WX~P#CZO#X$cO#o1bO&R1cO~O^1dO~P%QO^1fO~O&[1jOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%h&Yi%j&Yi%m&Yi%n&Yi%p&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'i&Yi't&Yi'v&Yi'y&Yi(R&Yi(`&Yi(m&Yi!W&Yi_&Yi&a&Yi~O_1pO!W1nO&a1oO~P`O!XXO!h1rO~O&h,hOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%h&ci%j&ci%m&ci%n&ci%p&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'i&ci't&ci'v&ci'y&ci(R&ci(`&ci(m&ci!W&ci&[&ci_&ci&a&ci~O!S1xO~O!V!Za!W!Za~P#A]Ol!kO|!lO!U2OO(U!jO!V'OX!W'OX~P?fO!V,xO!W(Ya~O!V'UX!W'UX~P!?TO!V,{O!W(ga~O!W2VO~P'TO^%_O#X2`O'k%_O~O^%_O!a#sO#X2`O'k%_O~O^%_O!a#sO!h%[O!l2dO#X2`O'k%_O'}%PO(a'fO~O!]2eO!^2eO'u!iO~PBzO![2hO!]2eO!^2eO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#Q2jO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#O2kO#P2kO#Q2jO#T2iO#U2iO'u!iO~PBzO^%_O!a#sO!l2dO#X2`O'k%_O(a'fO~O^%_O'k%_O~P!4aO!V$_Oo$ka~O!S&}i!V&}i~P!4aO!V'zO!S(Xi~O!V(RO!S(ei~O!S(fi!V(fi~P!4aO!V(_O!g(bi~O!V(ci!g(ci^(ci'k(ci~P!4aO#X2oO!V(ci!g(ci^(ci'k(ci~O|%wO!X%xO!x]O#b2rO#c2qO't%fO~O|%wO!X%xO#c2qO't%fO~Og2yO!X'RO%a2xO~Og2yO!X'RO%a2xO'}%PO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'kva(Rva(ava!gva!Sva'ivaova!Xva%ava!ava~P$ tO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'k$la(R$la(a$la!g$la!S$la'i$lao$la!X$la%a$la!a$la~P$!jO#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'k$na(R$na(a$na!g$na!S$na'i$nao$na!X$na%a$na!a$na~P$#]O#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'k$|a(R$|a(a$|a!g$|a!S$|a'i$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#*rO^#[q!V#[q'k#[q'i#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!4aOd'PX!V'PX~P!%lO!V.bOd([a~O!U3RO!V'QX!g'QX~P%QO!V.eO!g(]a~O!V.eO!g(]a~P!4aO!S3UO~O#y!ja!W!ja~PJrO#y!ba!V!ba!W!ba~P#A]O#y!na!W!na~P!6zO#y!pa!W!pa~P!9eO!X3hO$UfO$_3iO~O!W3mO~Oo3nO~P#*rO^$hq!V$hq'k$hq'i$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!4aO!S3oO~Ol/QO'vTO'yUO~Oy)uO|)vO(i)zOg%Xi(h%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JzOy)uO|)vOg%Zi(h%Zi(i%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$KmO(a$XO~P#*rO!U3rO't%fO!V'ZX!g'ZX~O!V/YO!g(na~O!V/YO!a#sO!g(na~O!V/YO!a#sO(a'fO!g(na~Od$ui!V$ui#X$ui#y$ui~P!.aO!U3zO't*WO!S']X!V']X~P!/OO!V/bO!S(oa~O!V/bO!S(oa~P#*rO!a#sO~O!a#sO#o4SO~Ok4VO!a#sO(a'fO~Od(Pi!V(Pi~P!.aO#X4YOd(Pi!V(Pi~P!.aO!g4]O~O^$iq!V$iq'k$iq'i$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!4aO!V4aO!X(pX~P#*rO!f#uO~P3}O^$sX!X$sX%UYX'k$sX!V$sX~P!-WO%U4cO^hXghXyhX|hX!XhX'khX(hhX(ihX!VhX~O%U4cO~O%b4jO't+YO'vTO'yUO!V'fX!W'fX~O!V0bO!W(va~OX4nO~O]4oO~O!S4sO~O^%_O'k%_O~P#*rO!X$zO~P#*rO!V4xO#X4zO!W(sX~O!W4{O~Ol!kO|4}O![5]O!]5RO!^5RO!x<XO!|5[O!}5ZO#O5YO#P5YO#Q5XO#T5WO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O!W5VO~P%%qOg5bO!X0}O%a5aO~Og5bO!X0}O%a5aO'}%PO~O't#kO!V'eX!W'eX~O!V1YO!W(ta~O'vTO'yUO(U5kO~O]5oO~O!g5rO~P%QO^5tO~O^5tO~P%QO#o5vO&R5wO~PMvO_1pO!W5{O&a1oO~P`O!a5}O~O!a6PO!V(Zi!W(Zi!a(Zi!h(Zi'}(Zi~O!V#ai!W#ai~P#A]O#X6QO!V#ai!W#ai~O!V!Zi!W!Zi~P#A]O^%_O#X6ZO'k%_O~O^%_O!a#sO#X6ZO'k%_O~O^%_O!a#sO!l6`O#X6ZO'k%_O(a'fO~O!h%[O'}%PO~P%+RO!]6aO!^6aO'u!iO~PBzO![6dO!]6aO!^6aO#T6eO#U6eO'u!iO~PBzO![6dO!]6aO!^6aO#Q6fO#T6eO#U6eO'u!iO~PBzO!V(_O!g(bq~O!V(cq!g(cq^(cq'k(cq~P!4aO|%wO!X%xO#c6jO't%fO~O!X'RO%a6mO~Og6pO!X'RO%a6mO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'k%Xi(R%Xi(a%Xi!g%Xi!S%Xi'i%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JzO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'k%Zi(R%Zi(a%Zi!g%Zi!S%Zi'i%Zio%Zi!X%Zi%a%Zi!a%Zi~P$KmO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'k$ui(R$ui(a$ui!g$ui!S$ui'i$ui#X$uio$ui!X$ui%a$ui!a$ui~P#*rOd'Pa!V'Pa~P!.aO!V'Qa!g'Qa~P!4aO!V.eO!g(]i~O#y#[i!V#[i!W#[i~P#A]OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~O#g#fi~P%6OO#g<aO~P%6OOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO(RVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~Ok#fi~P%8ZOk<cO~P%8ZOP$ZOk<cOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO(RVO#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%:fOX<oO!e<eO#l<eO#m<eO#n<nO#o<eO~P%:fOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO(RVO#s#fi#u#fi#v#fi#y#fi(a#fi(i#fi!V#fi!W#fi~O(h#fi~P%=QO(h#zO~P%=QOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO(RVO(h#zO#u#fi#v#fi#y#fi(a#fi!V#fi!W#fi~O(i#fi~P%?]O(i#{O~P%?]OP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO(RVO(h#zO(i#{O~O#v#fi#y#fi(a#fi!V#fi!W#fi~P%AhO^#wy!V#wy'k#wy'i#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!4aOg>SOy)uO|)vO(h)xO(i)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(R#fi(a#fi!V#fi!W#fi~P%D`O!f#uOP(QXX(QXg(QXk(QXy(QXz(QX|(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX#y(QX(R(QX(a(QX(h(QX(i(QX!V(QX!W(QX~O#y#zi!V#zi!W#zi~P#A]O#y!ni!W!ni~P$$jO!W6|O~O!V'Ya!W'Ya~P#A]O!a#sO(a'fO!V'Za!g'Za~O!V/YO!g(ni~O!V/YO!a#sO!g(ni~Od$uq!V$uq#X$uq#y$uq~P!.aO!S']a!V']a~P#*rO!a7TO~O!V/bO!S(oi~P#*rO!V/bO!S(oi~O!S7XO~O!a#sO#o7^O~Ok7_O!a#sO(a'fO~O!S7aO~Od$wq!V$wq#X$wq#y$wq~P!.aO^$iy!V$iy'k$iy'i$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!4aO!V4aO!X(pa~O^#[y!V#[y'k#[y'i#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!4aOX7fO~O!V0bO!W(vi~O]7lO~O!a6PO~O(U(sO!V'bX!W'bX~O!V4xO!W(sa~O!h%[O'}%PO^(ZX!a(ZX!l(ZX#X(ZX'k(ZX(a(ZX~O't7uO~P._O!x<XO!|7yO!}7xO#O7wO#P7wO#Q7vO#T'dO#U'dO~PBzO^%_O!a#sO!l'jO#X'hO'k%_O(a'fO~O!W7}O~P%%qOl!kO'vTO'yUO(U!jO(`!nO~O|8OO~P&!mO![8SO!]8RO!^8RO#Q7vO#T'dO#U'dO'u!iO~PBzO![8SO!]8RO!^8RO#O8TO#P8TO#Q7vO#T'dO#U'dO'u!iO~PBzO!]8RO!^8RO'u!iO(U!jO(`!nO~O!X0}O~O!X0}O%a8VO~Og8YO!X0}O%a8VO~OX8_O!V'ea!W'ea~O!V1YO!W(ti~O!g8cO~O!g8dO~O!g8eO~O!g8eO~P%QO^8gO~O!a8jO~O!g8kO~O!V(fi!W(fi~P#A]O^%_O#X8sO'k%_O~O^%_O!a#sO#X8sO'k%_O~O^%_O!a#sO!l8wO#X8sO'k%_O(a'fO~O!h%[O'}%PO~P&'ZO!]8xO!^8xO'u!iO~PBzO![8{O!]8xO!^8xO#T8|O#U8|O'u!iO~PBzO!V(_O!g(by~O!V(cy!g(cy^(cy'k(cy~P!4aO!X'RO%a9PO~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'k$uq(R$uq(a$uq!g$uq!S$uq'i$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#*rO#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'k$wq(R$wq(a$wq!g$wq!S$wq'i$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#*rO!V'Qi!g'Qi~P!4aO#y#[q!V#[q!W#[q~P#A]Oy/|Oz/|O|/}OPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Rva(ava(hva(iva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(R$la(a$la(h$la(i$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(R$na(a$na(h$na(i$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(R$|a(a$|a!V$|a!W$|a~P%D`O#y$hq!V$hq!W$hq~P#A]O#y$iq!V$iq!W$iq~P#A]O!W9ZO~O#y9[O~P!.aO!a#sO!V'Zi!g'Zi~O!a#sO(a'fO!V'Zi!g'Zi~O!V/YO!g(nq~O!S']i!V']i~P#*rO!V/bO!S(oq~O!S9bO~P#*rO!S9bO~Od(Py!V(Py~P!.aO!V'`a!X'`a~P#*rO^%Tq!X%Tq'k%Tq!V%Tq~P#*rOX9gO~O!V0bO!W(vq~O#X9kO!V'ba!W'ba~O!V4xO!W(si~P#A]O^%_O!a+QO'k%_O~OPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!a%RX#o%RX~P&:hO#T-eO#U-eO~PBzO#Q9pO#T-eO#U-eO~PBzO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!}9rO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!]9uO!^9uO'u!iO(U!jO(`!nO~O![9xO!]9uO!^9uO#Q9pO#T-eO#U-eO'u!iO~PBzO!X0}O%a9{O~O'vTO'yUO(U:QO~O!V1YO!W(tq~O!g:TO~O!g:TO~P%QO!g:VO~O!g:WO~O#X:YO!V#ay!W#ay~O!V#ay!W#ay~P#A]O^%_O#X:^O'k%_O~O^%_O!a#sO#X:^O'k%_O~O^%_O!a#sO!l:bO#X:^O'k%_O(a'fO~O!h%[O'}%PO~P&AZO!]:cO!^:cO'u!iO~PBzO!X'RO%a:gO~O#y#wy!V#wy!W#wy~P#A]OP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(R$ui(a$ui!V$ui!W$ui~P%D`Oy)uO|)vO(i)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(R%Xi(a%Xi(h%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(R%Zi(a%Zi(h%Zi(i%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#A]O#y#[y!V#[y!W#[y~P#A]O!a#sO!V'Zq!g'Zq~O!V/YO!g(ny~O!S']q!V']q~P#*rO!S:nO~P#*rO!V0bO!W(vy~O!V4xO!W(sq~O#T2iO#U2iO~PBzO#Q:uO#T2iO#U2iO~PBzO#O:vO#P:vO#Q:uO#T2iO#U2iO~PBzO!]:zO!^:zO'u!iO(U!jO(`!nO~O!X0}O%a:}O~O!g;QO~O^%_O#X;VO'k%_O~O^%_O!a#sO#X;VO'k%_O~O^%_O!a#sO!l;ZO#X;VO'k%_O(a'fO~O!X'RO%a;^O~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(R$uq(a$uq!V$uq!W$uq~P%D`OP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(R$wq(a$wq!V$wq!W$wq~P%D`Od%]!Z!V%]!Z#X%]!Z#y%]!Z~P!.aO!V'bq!W'bq~P#A]O#T6eO#U6eO~PBzO#Q;bO#T6eO#U6eO~PBzO!V#a!Z!W#a!Z~P#A]O^%_O#X;mO'k%_O~O^%_O!a#sO#X;mO'k%_O~O#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'k%]!Z(R%]!Z(a%]!Z!g%]!Z!S%]!Z'i%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#*rO#T8|O#U8|O~PBzO^%_O#X;zO'k%_O~OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(R%]!Z(a%]!Z!V%]!Z!W%]!Z~P%D`Oo(VX~P1gO'u!iO~P!'xO!ScX!VcX#XcX~P&:hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!acX!gYX!gcX(acX~P')iOP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!XXO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~O!V<lO!W$ka~Oi%QOk$rOl$qOm$qOs%ROu%SOw<rO|$yO!X$zO!c=|O!h$vO#c<xO$Q%WO$m<tO$o<vO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#p)[O~P'._O!WYX!WcX~P')iO#d<`O~O!a#sO#d<`O~O#X<pO~O#o<eO~O#X<zO!V(fX!W(fX~O#X<pO!V(dX!W(dX~O#d<{O~Od<}O~P!.aO#d=SO~O#d=TO~O!a#sO#d=UO~O!a#sO#d<{O~O#y=VO~P#A]O#d=WO~O#d=XO~O#d=YO~O#d=ZO~O#d=[O~O#d=]O~O#y=^O~P!.aO#y=_O~P!.aO$U~!f!|!}#P#Q#T#b#c#n(m$m$o$r%U%`%a%b%h%j%m%n%p%r~'oR$U(m#h!R'm'u#il#g#jky'n(U'n't$W$Y$W~",goto:"$2w(zPPPP({P)OP)`P+j/pPPPP7RPP7hP=gAYPAmPAmPPPAmPC]PAmPAmPAmPCaPPCfPDPPH}PPPIRPPPPIRLUPPPL[NiPIRP!#SPPPP!%fIRPPPIRPIRP!'xIRP!+`!,b!,gP!-X!-]!-XPPPPP!0j!3SPP!3]!4kP!,bIRIR!8S!;`!@l!@l!DePPP!DlIRPPPPPPPPPPP!G{P!IbPPIR!JsPIRPIRIRIRIRPIR!LZPP# eP#$kP#$o#$y#$}#$}P# bP#%R#%RP#(XP#(]IRIR#(c#+hAmPAmPAmAmP#,rAmAm#.lAm#0yAm#2mAmAm#3Z#5V#5V#5Z#5c#5V#5kP#5VPAm#6gAm#7oAmAm7RPPP#8zPP#9d#9dP#9dP#9y#9dPP#:PP#9vP#9v#:c!3X#9v#:}#;T7O)O#;W)OP#;_#;_#;_P)OP)OP)OP)OPP)OP#;e#;hP#;h)OP#;lP#;oP)OP)OP)OP)OP)OP)O)OPP#;u#;{#<V#<]#<c#<i#<o#<}#=T#=Z#=e#=k#>g#>v#>|#?`#?f#?l#?z#@a#Aq#BP#BV#B]#Bc#Bi#Bs#By#CP#CZ#Cm#CsPPPPPPPPPP#CyPPPPPPP#Dm#I^P#J}#KU#K^PPPP$ h$$^$+P$+S$+V$-g$-j$-m$-tPP$-z$.O$.w$/w$/{$0aPP$0e$0k$0oP$0r$0v$0y$1o$2V$2[$2_$2b$2h$2k$2o$2sR!zRmpOXr!X#b%^&e&g&h&j,`,e1j1mU!pQ'R-QQ%dtQ%lwQ%szQ&]!TS&y!c,xQ'X!f^'^!m!r!s!t!u!v!wS*^$z*cQ+W%mQ+e%uQ,P&VQ-O'QQ-Y'YY-b'_'`'a'b'cQ/s*eQ1X,QW2e-d-f-g-hS5R0}5UU6a2h2j2kU8R5Y5Z5]S8x6d6fS9u8S8TQ:c8{Q:z9xR<y<[%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;zS#n]<X!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ*n%TQ+]%oQ,R&YQ,Y&bQ.[<qQ0W+OQ0[+QQ0g+^Q1a,WQ2u.XQ4i0bQ5i1YQ6o2yQ6u<rQ7h4jR9S6p'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#n!kQ!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h0}2e2h2i2j2k5O5U5W5X5Y5Z5[6a6d6e6f7v7w7x7y8T8x8{8|9p9q9r:c:u:v;b$Y$qi#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ%vzQ&w!cS&}%x,{Q+]%oS/Q)v/SQ0O*rQ0g+^Q0l+dQ1`,VQ1a,WQ4i0bQ4r0nQ5l1[Q5m1_Q7h4jQ7k4oQ8b5oQ9j7lR:R8_pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR,T&^&z`OPXYrstux!X!^!g!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v'T'h'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=w=x[#ZWZ#U#X&z'xQ%gvQ%kwS%pz%u!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ&R!RQ'U!eQ'W!fQ(f#pS*Q$v*US+V%l%mQ+Z%oQ+z&TQ,O&VS-X'X'YQ.Z(gQ/^*RQ0`+WQ0f+^Q0h+_Q0k+cQ1S+{S1W,P,QQ2[-YQ3q/YQ4h0bQ4l0eQ4q0mQ5h1XQ7Q3rQ7g4jQ7j4nQ9f7fR:p9gv$xi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!d%iw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YQ+P%gQ+p&OQ+s&PQ+}&VQ.Y(fQ1R+zU1V,O,P,QQ2z.ZQ5c1SS5g1W1XS7t4|5QQ8^5hU9s7z8P8QU:x9t9v9wQ;e:yQ;u;f!z=y#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg=z<n<o<t<v<x=P=R=T=X=Z=_W$}i%P*k=uS&O!O&[Q&P!PQ&Q!QR+n%|$Z$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>ST)q$s)rV*o%T<q<rU&}!c%x,{S(t#w#xQ+b%rS.S(b(cQ0x+tQ4Z/|R7p4x'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x$q$^c#W#c%b%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.m.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lT#RV#S'RkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ&{!cR2P,x#f!kQ!c!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h2e2h2i2j2k5O5W5X5[6a6d6e6f7v7w7x7y8x8{8|9p9q9r:c:u:v;bS*]$z*cS/k*^*eQ/t*fQ0z+vQ4U/sQ4X/vS4|0}5US7z5R5]S8P5Y5ZS9t8R8SQ9v8TS:y9u9xR;f:zlpOXr!X#b%^&e&g&h&j,`,e1j1mQ&l![Q'l!tS(h#r<`Q+T%jQ+x&RQ+y&SQ-V'VQ-j'eS.`(m<{S0R*v=UQ0^+UQ0|+wQ1q,gQ1s,hQ1{,sQ2Y-WQ2]-[S4`0S=[Q4d0_S4g0a=]Q6R1}Q6V2ZQ6[2bQ7e4eQ8n6TQ8o6WQ8r6]Q:X8kQ:]8tQ;U:_Q;l;WR;y;n$l$]c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(e#m'[U*h${(l3eS*z%b.mQ2v0WQ6l2uQ9R6oR:h9S$l$[c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(d#m'[S(v#x$]S*y%b.mS.T(c(eQ.p)WQ0T*zR2s.U'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS#n]<XQ&g!VQ&h!WQ&j!YQ&k!ZR1i,cQ'S!eQ*|%gQ-T'US.V(f+PQ2W-SW2w.Y.Z0V0XQ6U2XU6k2t2v2zS9O6l6nS:f9Q9RS;[:e:hQ;p;]R;{;qV!qQ'R-Q!_^OQXZ_r!T!X!m#b#e%[%^&[&^&e&g&h&j'R(_,`,e-Q-}0}1j1m5O5UT#n]<X%^yOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS(t#w#xS.S(b(c!s=c$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xU!oQ'R-Q[']!m!s!t!u!v!wS'k!p!rY'm!x5O5W5X5[S-a'^'_W-c'`'a'b'cY-i'd7v7w7x7yS2c-b-dW2f-e9p9q9rU2g-f-g-hS5Q0}5US6_2e2hU6b2i:u:vS6c2j2kS7z5R5]S8Q5Y5ZS8v6a6dS8y6e;bQ8z6fS9t8R8SQ9w8TS:a8x8{Q:d8|S:y9u9xQ;Y:cR;f:zU!qQ'R-QT5S0}5UU'j!o5P5QS(^#f1gU-`']'m8QQ/]*QQ/i*]U2d-c-i9wQ3v/^S4P/j/tS6`2f2gQ7P3qS7[4V4XS8w6b6cQ9^7QQ9e7_S:b8y8zR;Z:dQ#tbU'i!o5P5QS(]#f1gQ*w%]Q+R%hQ+X%nW-_']'j'm8QQ-|(^Q/[*QQ/h*]Q/n*`Q0]+SQ1T+|W2a-`-c-i9wS3u/]/^S4O/i/tQ4R/mQ4T/oQ5e1UU6^2d2f2gQ7O3qQ7S3vS7W4P4XQ7]4WQ8[5fU8u6`6b6cS9]7P7QQ9a7XQ9c7[Q9n7sQ:O8]U:`8w8y8zQ:l9^Q:m9bQ:o9eQ:t9oQ;P:PS;X:b:dQ;`:nQ;c:wQ;o;ZQ;s;dQ<O;tQ<T<PQ=f=aQ=q=jR=r=k%^aOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS#tx!g!r=`$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=f=w%^bOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zQ%]j!d%hw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YS%nx!gQ+S%iQ+|&VW1U+},O,P,QU5f1V1W1XS7s4|5QS8]5g5hW9o7t7z8P8QQ:P8^W:w9s9t9v9wS;d:x:yS;t;e;fQ<P;u!r=a$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ=j=vR=k=w%QeOPXYrstu!X!^!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zY#`WZ#U#X'x!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ,Z&b!p=b$Y$k)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=e&zS'O!c%xR2R,{%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;z!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ,Y&bQ0W+OQ2u.XQ6o2yR9S6p!n$Sc#W%b'w'}(i(p)P)Q)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!T<g)U)g,v.m1y1|3V3_3`3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!j$Uc#W%b'w'}(i(p)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!P<i)U)g,v.m1y1|3V3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!f$Yc#W%b'w'}(i(p)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<YQ3p/Wz=x)U)g,v.m1y1|3V3f3l6S6t6y6z7r8m9T9X9Y:r;R=lQ=}>PR>O>Q'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS$lh$mR3i.s'XgOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$hf$nQ$ffS)`$i)dR)l$nT$gf$nT)b$i)d'XhOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$lh$mQ$ohR)k$m%^jOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;z!s=v$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#alOPXZr!X!^!l#Q#b#l#y$k%^&^&a&b&e&g&h&j&n&v'T(u)i+O+j,[,`,e-U.X.t/}1Q1b1c1d1f1j1m1o2y3h4}5b5t5v5w6p8O8Y8gv${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>SQ*s%XQ/P)ug3e<n<o<t<v<x=P=R=T=X=Z=_v$wi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>OQ*V$xS*`$z*cQ*t%YQ/o*a!z=h#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sf=i<n<o<t<v<x=P=R=T=X=Z=_Q=m=yQ=n=zQ=o={R=p=|v${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg3e<n<o<t<v<x=P=R=T=X=Z=_lnOXr!X#b%^&e&g&h&j,`,e1j1mQ*Y$yQ,n&qQ,o&sR3y/b$Y$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ+q&PQ0v+sQ4v0uR7o4wT*b$z*cS*b$z*cT5T0}5US/m*_4}T4W/u8OQ+R%hQ/n*`Q0]+SQ1T+|Q5e1UQ8[5fQ9n7sQ:O8]Q:t9oQ;P:PQ;c:wQ;s;dQ<O;tR<T<Pn)y$t(n*u/`/w/x3O3w4^6}7`:k=g=s=t!W=O(j)Z*P*X._.{/W/e0U0s0u2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q]=P3d6x9U:i:j;|p){$t(n*u/U/`/w/x3O3w4^6}7`:k=g=s=t!Y=Q(j)Z*P*X._.{/W/e0U0s0u2{2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q_=R3d6x9U9V:i:j;|pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ&X!SR,[&bpmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR&X!SQ+u&QR0r+nqmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ1O+zS5`1R1SU8U5^5_5cS9z8W8XS:{9y9|Q;g:|R;v;hQ&`!TR,U&[R5l1[S%pz%uR0h+_Q&e!UR,`&fR,f&kT1k,e1mR,j&lQ,i&lR1t,jQ'o!yR-l'oQrOQ#bXT%ar#bQ!|TR'q!|Q#PUR's#PQ)r$sR.|)rQ#SVR'u#SQ#VWU'{#V'|-sQ'|#WR-s'}Q,y&{R2Q,yQ.c(nR3P.cQ.f(pS3S.f3TR3T.gQ-Q'RR2U-Qr_OXr!T!X#b%^&[&^&e&g&h&j,`,e1j1mU!mQ'R-QS#eZ%[Y#o_!m#e-}5OQ-}(_T5O0}5US#]W%wU(S#](T-tQ(T#^R-t(OQ,|'OR2S,|Q(`#hQ-w(XW.R(`-w2l6gQ2l-xR6g2mQ)d$iR.u)dQ$mhR)j$mQ$`cU)Y$`-o<mQ-o<YR<m)gQ/Z*QW3s/Z3t7R9_U3t/[/]/^S7R3u3vR9_7S#m)w$t(j(n)Z*P*X*p*q*u.].^._.{/U/V/W/`/e/w/x0U0s0u2{2|2}3O3d3w3x3|4^4u4w6q6r6v6w6x6}7U7Y7`7b7d9U9V9W9`9d:i:j:k;_;|=g=s=t>P>QQ/c*XU3{/c3}7VQ3}/eR7V3|Q*c$zR/q*cQ*l%OR/z*lQ4b0UR7c4bQ+l%zR0q+lQ4y0xS7q4y9lR9l7rQ+w&RR0{+wQ5U0}R7|5UQ1Z,RS5j1Z8`R8`5lQ0c+ZW4k0c4m7i9hQ4m0fQ7i4lR9h7jQ+`%pR0i+`Q1m,eR5z1mWqOXr#bQ&i!XQ*x%^Q,_&eQ,a&gQ,b&hQ,d&jQ1h,`S1k,e1mR5y1jQ%`oQ&m!]Q&p!_Q&r!`Q&t!aU'g!o5P5QQ+T%jQ+g%vQ+m%{Q,T&`Q,l&oY-]']'i'j'm8QQ-j'eQ/p*bQ0^+US1^,U,XQ1u,kQ1v,nQ1w,oQ2]-[[2_-_-`-c-i-k9wQ4d0_Q4p0lQ4t0sQ5d1TQ5n1`Q5x1iY6X2^2a2d2f2gQ6[2bQ7e4eQ7m4rQ7n4uQ7{5TQ8Z5eQ8a5mY8p6Y6^6`6b6cQ8r6]Q9i7kQ9m7sQ9}8[Q:S8bY:Z8q8u8w8y8zQ:]8tQ:q9jS:s9n9oQ;O:OW;S:[:`:b:dQ;U:_S;a:t:wQ;i;PU;j;T;X;ZQ;l;WS;r;c;dS;w;k;oQ;y;nS;};s;tQ<Q;xS<S<O<PQ<U<RR<V<TQ%jwQ'V!fQ'e!oU+U%k%l%mQ,s&xU-W'W'X'YS-[']'kQ/g*]S0_+V+WQ1},uS2Z-X-YS2b-a-cQ4Q/kQ4e0`Q6T2TQ6W2[S6]2c2gQ7Z4US8t6_6cS:_8v8zQ;W:aR;n;YS$ui=uR*m%PU%Oi%P=uR/y*kQ$tiS(j#s+QQ(n#uS)Z$a$bQ*P$vQ*X$yQ*p%UQ*q%VQ*u%ZQ.]<sQ.^<uQ._<wQ.{)pQ/U)yQ/V){Q/W)|Q/`*TQ/e*ZQ/w*iQ/x*jh0U*}.W1P2x5a6m8V9P9{:g:};^Q0s+oQ0u+rQ2{=OQ2|=QQ2}=SQ3O.bS3d<n<oQ3w/aQ3x/bQ3|/dQ4^0PQ4u0tQ4w0wQ6q=WQ6r=YQ6v<tQ6w<vQ6x<xQ6}3pQ7U3zQ7Y4SQ7`4YQ7b4aQ7d4cQ9U=TQ9V=PQ9W=RQ9`7TQ9d7^Q:i=XQ:j=ZQ:k9[Q;_=^Q;|=_Q=g=uQ=s=}Q=t>OQ>P>RR>Q>SloOXr!X#b%^&e&g&h&j,`,e1j1mQ!dPS#dZ#lQ&o!^U'Z!l4}8OQ't#QQ(w#yQ)h$kS,X&^&aQ,]&bQ,k&nQ,p&vQ-S'TQ.i(uQ.y)iQ0X+OQ0o+jQ1e,[Q2X-UQ2v.XQ3k.tQ4[/}Q5_1QQ5p1bQ5q1cQ5s1dQ5u1fQ5|1oQ6l2yQ6{3hQ8X5bQ8f5tQ8h5vQ8i5wQ9R6pQ9|8YR:U8g#UcOPXZr!X!^!l#b#l#y%^&^&a&b&e&g&h&j&n&v'T(u+O+j,[,`,e-U.X/}1Q1b1c1d1f1j1m1o2y4}5b5t5v5w6p8O8Y8gQ#WWQ#cYQ%bsQ%ctQ%euS'w#U'zQ'}#XQ(i#rQ(p#vQ(x#|Q(y#}Q(z$OQ({$PQ(|$QQ(}$RQ)O$SQ)P$TQ)Q$UQ)R$VQ)S$WQ)U$YQ)X$_Q)]$cW)g$k)i.t3hQ*{%dQ+a%qS,v&z2OQ-k'hS-p'x-rQ-u(QQ-z([Q.a(mQ.g(qQ.k<WQ.m<ZQ.n<[Q.o<]Q/O)tQ0Q*vQ1y,qQ1|,tQ2^-^Q2n-{Q3Q.eQ3V<`Q3W<aQ3X<bQ3Y<cQ3Z<dQ3[<eQ3]<fQ3^<gQ3_<hQ3`<iQ3a<jQ3b<kQ3c.lQ3f<pQ3g<yQ3l<lQ4_0SQ4f0aQ6S<zQ6Y2`Q6h2oQ6s3RQ6t<{Q6y<}Q6z=UQ7r4zQ8m6QQ8q6ZQ9T=VQ9X=[Q9Y=]Q:[8sQ:r9kQ;R:YQ;T:^Q;k;VQ;x;mQ<R;zQ<Y#QR=l=xR#YWR&|!cU!oQ'R-QS&x!c,x[']!m!s!t!u!v!wS'k!p!r^'m!x5O5W5X5Y5Z5[S,u&y'QS-a'^'_W-c'`'a'b'c[-i'd7v7w7x7y8TQ2T-OS2c-b-dW2f-e9p9q9rU2g-f-g-hS5P0}5US6_2e2hU6b2i:u:vS6c2j2kS8v6a6dS8y6e;bQ8z6fS:a8x8{Q:d8|R;Y:cR(o#uR(r#vQ!dQT-P'R-QQ#m]R'[<XT#iZ%[S#hZ%[U%z|},^U(X#e#g#jS-x(Y(ZQ.P(_Q0p+kQ2m-yU2p-}.O.QS6i2q2rR8}6j`#[W#U#X%w'x(R+h-vt#fZ|}#e#g#j%[(Y(Z(_+k-y-}.O.Q2q2r6jQ1g,^Q1z,rQ6O1rQ8l6PT=d&z+iT#_W%wS#^W%wS'y#U(RS(O#X+hS,w&z+iT-q'x-vT'P!c%xQ$ifR)n$nT)c$i)dR3j.sT*S$v*UR*[$yQ0V*}Q2t.WQ5^1PQ6n2xQ8W5aQ9Q6mQ9y8VQ:e9PQ:|9{Q;]:gQ;h:}R;q;^lpOXr!X#b%^&e&g&h&j,`,e1j1mQ&_!TR,T&[V%{|},^R0y+tR,S&YQ%tzR+f%uR+[%oT&c!U&fT&d!U&fT1l,e1m",nodeNames:" ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:363,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,199,203,206,207,209,212,215,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,269],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'wp'z!b'm(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'x#S$d&j'n(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'wp'z!b'n(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'v$(n$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(`!L^'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'wp'z!b(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'wp'z!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'wp'z!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(i%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'y$)`$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'wpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'wp'z!b'u#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'wp'z!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'wp'z!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'wp'z!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'wp'z!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'z!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'z!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'z!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'z!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'z!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'z!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'wp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'wp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'wp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'wp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'wpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'wpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'wp'z!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'wp'z!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'wp'z!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'wp'z!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'wp'z!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'wp'z!b'o(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'wp'z!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'z!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'z!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'wpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'wpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'wp'z!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'}!*v!e'.r'wp'z!b$U)d(mSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(a$Ip$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'wp'z!b(R&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'wp'z!b(U!LY't&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'wp'z!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(h%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'wp'z!b'm(;d(U!LY't&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'wp'z!b'n(;d(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(T~~",141,326),new LocalTokenGroup("j~RQYZXz{^~^O'q~~aP!P!Qd~iO'r~~",25,308)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:13525,ts:13527},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:312,get:ft=>spec_identifier[ft]||-1},{term:328,get:ft=>spec_word[ft]||-1},{term:67,get:ft=>spec_LessThan[ft]||-1}],tokenPrec:13551}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(ft){return(lt,dt)=>{let vt=lt.node.getChild("VariableDefinition");return vt&&dt(vt,ft),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(ft,lt){ft.matchContext(functionContext)||lt(ft,"variable")},TypeDefinition(ft,lt){lt(ft,"type")},__proto__:null};function getScope(ft,lt){let dt=cache.get(lt);if(dt)return dt;let vt=[],St=!0;function Et(Ct,At){let Rt=ft.sliceString(Ct.from,Ct.to);vt.push({label:Rt,type:At})}return lt.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(St)St=!1;else if(Ct.name){let At=gatherCompletions[Ct.name];if(At&&At(Ct,Et)||ScopeNodes.has(Ct.name))return!1}else if(Ct.to-Ct.from>8192){for(let At of getScope(ft,Ct.node))vt.push(At);return!1}}),cache.set(lt,vt),vt}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(ft){let lt=syntaxTree(ft.state).resolveInner(ft.pos,-1);if(dontComplete.indexOf(lt.name)>-1)return null;let dt=lt.name=="VariableName"||lt.to-lt.from<20&&Identifier.test(ft.state.sliceDoc(lt.from,lt.to));if(!dt&&!ft.explicit)return null;let vt=[];for(let St=lt;St;St=St.parent)ScopeNodes.has(St.name)&&(vt=vt.concat(getScope(ft.state.doc,St)));return{options:vt,from:dt?lt.from:ft.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:ft=>{let lt=ft.textAfter,dt=/^\s*\}/.test(lt),vt=/^\s*(case|default)\b/.test(lt);return ft.baseIndent+(dt?0:vt?1:2)*ft.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:ft=>ft.baseIndent+ft.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(ft){let lt=/^\s*<\//.test(ft.textAfter);return ft.lineIndent(ft.node.from)+(lt?0:ft.unit)},JSXEscape(ft){let lt=/\s*\}/.test(ft.textAfter);return ft.lineIndent(ft.node.from)+(lt?0:ft.unit)},"JSXOpenTag JSXSelfClosingTag"(ft){return ft.column(ft.node.from)+ft.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(ft){return{from:ft.from+2,to:ft.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:ft=>/^JSX/.test(ft.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(ft=>ft.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(ft=>ft.isTop?[jsxSublanguage]:void 0)]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(ft=>({label:ft,type:"keyword"}));function javascript(ft={}){let lt=ft.jsx?ft.typescript?tsxLanguage:jsxLanguage:ft.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(lt,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),ft.jsx?autoCloseTags:[]])}function findOpenTag(ft){for(;;){if(ft.name=="JSXOpenTag"||ft.name=="JSXSelfClosingTag"||ft.name=="JSXFragmentTag")return ft;if(ft.name=="JSXEscape"||!ft.parent)return null;ft=ft.parent}}function elementName(ft,lt,dt=ft.length){for(let vt=lt==null?void 0:lt.firstChild;vt;vt=vt.nextSibling)if(vt.name=="JSXIdentifier"||vt.name=="JSXBuiltin"||vt.name=="JSXNamespacedName"||vt.name=="JSXMemberExpression")return ft.sliceString(vt.from,Math.min(vt.to,dt));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((ft,lt,dt,vt)=>{if((android?ft.composing:ft.compositionStarted)||ft.state.readOnly||lt!=dt||vt!=">"&&vt!="/"||!javascriptLanguage.isActiveAt(ft.state,lt,-1))return!1;let{state:St}=ft,Et=St.changeByRange(Ct=>{var At,Rt;let{head:Dt}=Ct,Nt=syntaxTree(St).resolveInner(Dt,-1),Ft;if(Nt.name=="JSXStartTag"&&(Nt=Nt.parent),vt==">"&&Nt.name=="JSXFragmentTag")return{range:EditorSelection.cursor(Dt+1),changes:{from:Dt,insert:"></>"}};if(vt=="/"&&Nt.name=="JSXFragmentTag"){let Ut=Nt.parent,Wt=Ut==null?void 0:Ut.parent;if(Ut.from==Dt-1&&((At=Wt.lastChild)===null||At===void 0?void 0:At.name)!="JSXEndTag"&&(Ft=elementName(St.doc,Wt==null?void 0:Wt.firstChild,Dt))){let Zt=`/${Ft}>`;return{range:EditorSelection.cursor(Dt+Zt.length),changes:{from:Dt,insert:Zt}}}}else if(vt==">"){let Ut=findOpenTag(Nt);if(Ut&&((Rt=Ut.lastChild)===null||Rt===void 0?void 0:Rt.name)!="JSXEndTag"&&St.sliceDoc(Dt,Dt+2)!="</"&&(Ft=elementName(St.doc,Ut,Dt)))return{range:EditorSelection.cursor(Dt+1),changes:{from:Dt,insert:`></${Ft}>`}}}return{range:Ct}});return Et.changes.empty?!1:(ft.dispatch(Et,{userEvent:"input.type",scrollIntoView:!0}),!0)}),BlockJavaScriptCodePanel=()=>{const ft=useRobartState(dt=>dt.editingBlockId),lt=useRobartState(dt=>dt.blocks[ft??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:lt==null?void 0:lt.javaScript,className:"h-full w-full",extensions:[javascript()],readOnly:!0})})},RightPanel=()=>{const[ft,lt]=reactExports.useState("simulation");return jsx(Fragment,{children:jsxs("div",{className:"flex flex-col gap-2 h-full",children:[jsx("div",{children:jsxs(Button.Group,{children:[jsx(Button,{color:ft=="simulation"?"blue":"gray",onClick:()=>lt("simulation"),children:"Simulation"}),jsx(Button,{color:ft=="python"?"blue":"gray",onClick:()=>lt("python"),children:"Python Code"}),jsx(Button,{color:ft=="javascript"?"blue":"gray",onClick:()=>lt("javascript"),children:"JavaScript Code"})]})}),jsxs("div",{className:"flex-grow h-full",children:[ft=="simulation"&&jsx(SimulationPanel,{}),ft=="python"&&jsx(BlockPythonCodePanel,{}),ft=="javascript"&&jsx(BlockJavaScriptCodePanel,{})]})]})})},HoverTimelineBlock=({scale:ft,startTime:lt,isOverlapping:dt})=>{const vt=useRobartState(Et=>Et.editingBlockId),St=useRobartState(Et=>Et.blocks[vt??""]);return lt===void 0||!vt?jsx(Fragment,{}):jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl border border-dashed",dt?"border-red-500/50 bg-red-300/50 text-red-500/50":"border-green-500/50 bg-green-300/50 text-green-500/50"),style:{width:PIXELS_PER_SECOND*ft*St.duration,left:PIXELS_PER_SECOND*ft*lt},children:dt?jsx(FontAwesomeIcon,{icon:faXmarkCircle}):jsx(FontAwesomeIcon,{icon:faPlusCircle})})},TickMark=({tickNumber:ft,subdivisionsPerSecond:lt,scale:dt})=>jsxs("div",{className:"absolute h-full",style:{left:`${convertSecondsToPixels(ft/lt,dt)}px`},children:[jsx("div",{className:clsx("w-[2px] bg-black self-start",ft%lt===0?"h-1/4":"h-1/6")}),ft%lt===0?jsx("span",{children:ft/lt}):null]}),TimelineBlock=({item:ft,scale:lt})=>{const dt=useRobartState(Nt=>Nt.blocks),vt=useRobartState(Nt=>Nt.removeTimelineItem),St=useRobartState(Nt=>Nt.timelineState.groups),Et=useRobartState(Nt=>Nt.updateBlockInTimeline),Ct=useRobartState(Nt=>Nt.timelineState.mode),At=dt[ft.blockId],Rt=useDrag(({delta:[Nt,Ft]})=>{if(Ct!=="MOVE")return;const Ut=convertPixelsToSeconds(Nt,lt),Wt=ft.startTime+Ut;blockOverlaps(St[ft.groupId],dt,Wt,At,ft.id)||Et(ft.groupId,ft.id,Wt)}),Dt=ft.duration;return jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl bg-purple-400 touch-none select-none",Ct==="MOVE"?"cursor-move":"",Ct==="ERASE"?"hover:bg-red-400":""),style:{width:PIXELS_PER_SECOND*lt*Dt,left:PIXELS_PER_SECOND*lt*ft.startTime},onClick:()=>Ct==="ERASE"&&vt(ft.groupId,ft.id),...Rt(),children:jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:At.name})})},PIXELS_PER_SECOND=100,SUBDIVISIONS_PER_SECOND=8,convertPixelsToSeconds=(ft,lt)=>ft/(PIXELS_PER_SECOND*lt),convertSecondsToPixels=(ft,lt)=>ft*PIXELS_PER_SECOND*lt,blockOverlaps=(ft,lt,dt,vt,St)=>dt===void 0||dt<0||Object.values(ft.items).some(Et=>{const Ct=Et.startTime,At=Et.startTime+Et.duration,Rt=dt,Dt=dt+vt.duration;return St!==void 0&&St===Et.id?!1:!(At<Rt||Dt<Ct)}),TimelineGroupBody=({group:ft})=>{const lt=useRobartState(Ut=>Ut.addBlockToTimeline),dt=useRobartState(Ut=>Ut.editingBlockId),vt=useRobartState(Ut=>Ut.blocks),St=useRobartState(Ut=>Ut.timelineState.mode),Et=useRobartState(Ut=>Ut.timelineState.scale),[Ct,At]=reactExports.useState(),Rt=reactExports.useRef(null),Dt=useGesture({onMouseOut:()=>At(void 0),onMouseMove:({event:{clientX:Ut}})=>{At(Ut)}}),Nt=Ut=>{var Wt,Zt;if(Ut!==void 0&&Rt.current){const Kt=(Wt=Rt.current.offsetParent)==null?void 0:Wt.offsetLeft,cn=(Zt=Rt.current.parentElement)==null?void 0:Zt.scrollLeft,hn=Ut-Kt;return dt===void 0||cn===void 0?void 0:(hn+cn)/(PIXELS_PER_SECOND*Et)-vt[dt].duration/2}};return jsxs("div",{className:"relative h-16 rounded bg-blue-300",ref:Rt,onClick:({clientX:Ut})=>{if(dt===void 0||St!=="ADD")return;const Wt=Nt(Ut);if(Wt!==void 0&&!blockOverlaps(ft,vt,Wt,vt[dt])){var Zt=!1;vt[dt].javaScript.includes("circle")&&(Zt=!0),lt(ft.id,dt,Wt,Zt)}},...Dt(),style:{width:`${convertSecondsToPixels(ft.duration,Et)}px`},children:[[...new Array(ft.duration*SUBDIVISIONS_PER_SECOND)].map((Ut,Wt)=>jsx(TickMark,{tickNumber:Wt,scale:Et,subdivisionsPerSecond:SUBDIVISIONS_PER_SECOND},Wt)),Object.values(ft.items).map((Ut,Wt)=>jsx(TimelineBlock,{scale:Et,item:Ut},Wt)),St==="ADD"&&jsx(HoverTimelineBlock,{scale:Et,startTime:Nt(Ct),isOverlapping:blockOverlaps(ft,vt,Nt(Ct),vt[dt??""])})]})},TimelineMarker=()=>{const ft=useSimulator(lt=>lt.time);return jsx("div",{className:"min-w-1 absolute z-10 h-full w-1 bg-black",style:{left:PIXELS_PER_SECOND*ft}})},TimelineGroupLabel=({group:ft})=>jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded bg-green-400",children:jsx("div",{className:"text-center font-bold",children:ft.name})}),useRobotManager=create$2()(immer((ft,lt)=>({selectedRobotId:void 0,showRenameInput:!1,setSelectedRobotId:dt=>{ft({selectedRobotId:dt})},openRenameInput:()=>{ft({showRenameInput:!0})},closeRenameInput:()=>{ft({showRenameInput:!1})}}))),RobotGroupEditor=()=>{const ft=useRobartState(St=>St.timelineState.groups),lt=useRobotManager(St=>St.selectedRobotId),dt=useRobartState(St=>St.addRobotToGroup),vt=useRobartState(St=>St.removeRobotFromGroup);return lt===void 0?jsx(Fragment,{}):jsxs("div",{className:"flex flex-col gap-2",children:[jsxs("div",{className:"flex items-center gap-2",children:[jsx("h3",{className:"text-lg font-extrabold",children:"Add Group"}),jsx(Dropdown,{label:jsx(FontAwesomeIcon,{icon:faPlusCircle}),size:"sm",arrowIcon:!1,children:Object.values(ft).filter(St=>!(lt in St.robots)).map(St=>jsx(Dropdown.Item,{onClick:()=>{dt(St.id,lt)},children:St.name},St.id))})]}),jsx("div",{className:"flex items-center gap-2",children:Object.values(ft).filter(St=>lt in St.robots).map(St=>jsx(Badge,{color:"purple",className:"bg-purple-100",onClick:()=>vt(St.id,lt),children:ft[St.id].name},St.id))})]})},StartingPositionEditor=({robotId:ft})=>{const lt=useRobartState(Ct=>Ct.robots[ft]),dt=useRobartState(Ct=>Ct.saveRobot),[vt,St]=reactExports.useState([lt.startingPosition[0].toString(),lt.startingPosition[1].toString(),lt.startingPosition[2].toString()]),Et=Ct=>{Ct.preventDefault();const At=parseFloat(vt[0]),Rt=parseFloat(vt[1]),Dt=parseFloat(vt[2]);isNaN(At)||isNaN(Rt)||isNaN(Dt)||dt(ft,{startingPosition:[At,Rt,Dt]})};return jsxs("div",{children:[jsx("h3",{className:"ml-3 mt-3 text-lg font-extrabold",children:"Starting Position:"}),jsx("div",{className:"flex",children:jsxs("form",{onSubmit:Et,className:"flex flex-col gap-2",children:[jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[0]))?"border-red-500":""),children:[jsx(TextInput,{id:"x-coordinate",value:vt[0],onChange:Ct=>St(([At,Rt,Dt])=>[Ct.target.value,Rt,Dt])}),jsx(Label,{htmlFor:"x-coordinate",className:isNaN(parseFloat(vt[0]))?"text-red-500":"",children:"x"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[0]))?"text-red-500":""),children:[jsx(TextInput,{id:"y-coordinate",value:vt[1],onChange:Ct=>St(([At,Rt,Dt])=>[At,Ct.target.value,Dt])}),jsx(Label,{htmlFor:"y-coordinate",className:isNaN(parseFloat(vt[1]))?"text-red-500":"",children:"y"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[2]))?"border-red-500":""),children:[jsx(TextInput,{id:"z-coordinate",value:vt[2],onChange:Ct=>St(([At,Rt,Dt])=>[At,Rt,Ct.target.value])}),jsx(Label,{htmlFor:"z-coordinate",className:isNaN(parseFloat(vt[2]))?"text-red-500":"",children:"z"})]}),jsx(IconButton,{className:"w-full",icon:faArrowsRotate,text:"Update Position",onClick:Et,type:"submit"})]})})]})},RobotEditor=()=>{const ft=useRobartState(Ct=>Ct.robots),lt=useRobartState(Ct=>Ct.saveRobot),dt=useRobartState(Ct=>Ct.deleteRobot),vt=useRobotManager(Ct=>Ct.selectedRobotId),St=useRobotManager(Ct=>Ct.setSelectedRobotId);if(reactExports.useEffect(()=>{vt===void 0&&Object.values(ft).length!==0&&St(Object.keys(ft)[0])},[vt,ft]),vt===void 0)return jsx(Fragment,{});const Et=ft[vt];return Et===void 0?jsx(Fragment,{}):jsxs("div",{className:"relative flex basis-4/5 flex-col p-4",children:[jsx(RenamableText,{text:Et.name,className:"text-4xl font-extrabold",updateText:Ct=>Ct!==""?lt(vt,{name:Ct}):lt(vt,{name:"Unnamed Robot"})}),jsxs("div",{className:"flex flex-col gap-10",children:[jsx(StartingPositionEditor,{robotId:vt}),jsx(RobotGroupEditor,{})]},vt),jsx(IconButton,{className:"absolute bottom-0",onClick:()=>{const Ct=vt;St(void 0),dt(Ct)},text:"Delete Robot",icon:faTrash,color:"failure"})]})},RobotSidebar=()=>{const ft=useRobartState(St=>St.robots),lt=useRobartState(St=>St.createRobot),dt=useRobotManager(St=>St.setSelectedRobotId),vt=useRobotManager(St=>St.closeRenameInput);return jsxs("div",{className:"flex flex-grow-0 basis-[10%] flex-col items-center gap-2 overflow-y-auto p-4",children:[jsx("h2",{className:"text-lg font-extrabold",children:"Robots"}),Object.values(ft).map(St=>jsx("button",{className:"flex h-8 w-full cursor-pointer items-center justify-center rounded-lg border-2 border-black px-2 text-center",onClick:()=>{vt(),dt(St.id)},children:jsx("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:St.name})},St.id)),jsx(IconButton,{icon:faPlusCircle,text:"",onClick:()=>{const St=lt();dt(St)}})]})},RobotManager=()=>jsxs("div",{className:"flex h-full",children:[jsx(RobotSidebar,{}),jsx(RobotEditor,{})]}),RobotManagerModal=()=>{const ft=useUIState(dt=>dt.robotManagerModalOpen),lt=useUIState(dt=>dt.toggleRobotManager);return jsxs(Modal,{show:ft,onClose:lt,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Robot Manager"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsx(RobotManager,{})}),jsx(Modal.Footer,{})]})},TimelineEditModeButtons=()=>{const ft=useRobartState(dt=>dt.timelineState.mode),lt=useRobartState(dt=>dt.setTimelineMode);return jsx("div",{className:"flex gap-3 pt-2 pl-3",children:jsxs(Button.Group,{children:[jsx(Button,{color:ft==="ADD"?"info":"gray",onClick:()=>lt("ADD"),children:jsx(FontAwesomeIcon,{icon:faPlusCircle})}),jsx(Button,{color:ft==="MOVE"?"info":"gray",onClick:()=>lt("MOVE"),children:jsx(FontAwesomeIcon,{icon:faArrowsLeftRight})}),jsx(Button,{color:ft==="ERASE"?"info":"gray",onClick:()=>lt("ERASE"),children:jsx(FontAwesomeIcon,{icon:faEraser})})]})})},TimelineSimulationButtons=()=>{const ft=useSimulator(Et=>Et.status),lt=useSimulator(Et=>Et.play),dt=useSimulator(Et=>Et.halt),vt=useSimulator(Et=>Et.pause),St=useSimulator(Et=>Et.resume);return jsxs(Fragment,{children:[ft==="RUNNING"&&jsx(IconButton,{icon:faPause,onClick:vt,text:"Pause Sim",color:"gray"}),ft==="PAUSED"&&jsx(IconButton,{icon:faPlay,onClick:St,text:"Resume Sim",color:"success"}),ft==="STOPPED"&&jsx(IconButton,{icon:faPlay,onClick:lt,text:"Run Sim",color:"success"}),ft!=="STOPPED"&&jsx(IconButton,{icon:faSquare,onClick:dt,text:"Stop Sim",color:"failure"})]})},Timeline=()=>{const ft=useRobartState(vt=>vt.timelineState),lt=Object.values(ft.groups),dt=useUIState(vt=>vt.toggleRobotManager);return jsxs("div",{className:"flex h-full w-full flex-col gap-2 rounded bg-blue-100",children:[jsxs("div",{className:"flex",children:[jsx(TimelineEditModeButtons,{}),jsx("div",{className:"flex flex-grow"}),jsxs("div",{className:"flex gap-3 pt-2 pr-3",children:[jsx(TimelineSimulationButtons,{}),jsx(IconButton,{icon:faRobot,onClick:dt,text:"Manage Robots"}),jsx(RobotManagerModal,{})]})]}),jsx("div",{className:"overflow-y-auto",children:jsxs("div",{className:"flex flex-shrink-0 gap-2",children:[jsx("div",{className:"ml-2 flex h-full flex-col gap-2",children:lt.map(vt=>jsx(TimelineGroupLabel,{group:vt},vt.id))}),jsxs("div",{className:"relative flex h-full w-full flex-col gap-2 overflow-x-auto",children:[lt.map(vt=>jsx(TimelineGroupBody,{group:vt},vt.id)),jsx(TimelineMarker,{})]})]})})]})};function App(){return jsx(Fragment,{children:jsxs("div",{className:"flex h-screen w-screen flex-col gap-1",children:[jsx(NavigationBar,{}),jsx("div",{className:"flex flex-grow",children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"vertical",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:60,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsx(BlockEditorPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,children:jsx(RightPanel,{})})]})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"h-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:40,children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:20,children:jsx(BlockManagerPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{children:jsx(Timeline,{})})]})})]})})]})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(App,{})}));
