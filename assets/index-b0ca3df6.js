var yie=Object.defineProperty;var bie=(n,e,t)=>e in n?yie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ct=(n,e,t)=>(bie(n,typeof e!="symbol"?e+"":e,t),t);function Sie(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var e8={exports:{}},VC={},t8={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT=Symbol.for("react.element"),Tie=Symbol.for("react.portal"),wie=Symbol.for("react.fragment"),Eie=Symbol.for("react.strict_mode"),xie=Symbol.for("react.profiler"),$ie=Symbol.for("react.provider"),Cie=Symbol.for("react.context"),Aie=Symbol.for("react.forward_ref"),kie=Symbol.for("react.suspense"),Iie=Symbol.for("react.memo"),Rie=Symbol.for("react.lazy"),KG=Symbol.iterator;function Mie(n){return n===null||typeof n!="object"?null:(n=KG&&n[KG]||n["@@iterator"],typeof n=="function"?n:null)}var n8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i8=Object.assign,r8={};function $O(n,e,t){this.props=n,this.context=e,this.refs=r8,this.updater=t||n8}$O.prototype.isReactComponent={};$O.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};$O.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function s8(){}s8.prototype=$O.prototype;function xN(n,e,t){this.props=n,this.context=e,this.refs=r8,this.updater=t||n8}var $N=xN.prototype=new s8;$N.constructor=xN;i8($N,$O.prototype);$N.isPureReactComponent=!0;var e5=Array.isArray,o8=Object.prototype.hasOwnProperty,CN={current:null},a8={key:!0,ref:!0,__self:!0,__source:!0};function l8(n,e,t){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)o8.call(e,i)&&!a8.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];r.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:hT,type:n,key:o,ref:a,props:r,_owner:CN.current}}function Pie(n,e){return{$$typeof:hT,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function AN(n){return typeof n=="object"&&n!==null&&n.$$typeof===hT}function Die(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var t5=/\/+/g;function pR(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Die(""+n.key):e.toString(36)}function xx(n,e,t,i,r){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case hT:case Tie:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+pR(a,0):i,e5(r)?(t="",n!=null&&(t=n.replace(t5,"$&/")+"/"),xx(r,e,t,"",function(h){return h})):r!=null&&(AN(r)&&(r=Pie(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(t5,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",e5(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+pR(o,l);a+=xx(o,e,t,u,r)}else if(u=Mie(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+pR(o,l++),a+=xx(o,e,t,u,r);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kw(n,e,t){if(n==null)return n;var i=[],r=0;return xx(n,i,"","",function(o){return e.call(t,o,r++)}),i}function Lie(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Bo={current:null},$x={transition:null},Nie={ReactCurrentDispatcher:Bo,ReactCurrentBatchConfig:$x,ReactCurrentOwner:CN};Pn.Children={map:kw,forEach:function(n,e,t){kw(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kw(n,function(){e++}),e},toArray:function(n){return kw(n,function(e){return e})||[]},only:function(n){if(!AN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pn.Component=$O;Pn.Fragment=wie;Pn.Profiler=xie;Pn.PureComponent=xN;Pn.StrictMode=Eie;Pn.Suspense=kie;Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nie;Pn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=i8({},n.props),r=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=CN.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)o8.call(e,u)&&!a8.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:hT,type:n.type,key:r,ref:o,props:i,_owner:a}};Pn.createContext=function(n){return n={$$typeof:Cie,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:$ie,_context:n},n.Consumer=n};Pn.createElement=l8;Pn.createFactory=function(n){var e=l8.bind(null,n);return e.type=n,e};Pn.createRef=function(){return{current:null}};Pn.forwardRef=function(n){return{$$typeof:Aie,render:n}};Pn.isValidElement=AN;Pn.lazy=function(n){return{$$typeof:Rie,_payload:{_status:-1,_result:n},_init:Lie}};Pn.memo=function(n,e){return{$$typeof:Iie,type:n,compare:e===void 0?null:e}};Pn.startTransition=function(n){var e=$x.transition;$x.transition={};try{n()}finally{$x.transition=e}};Pn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pn.useCallback=function(n,e){return Bo.current.useCallback(n,e)};Pn.useContext=function(n){return Bo.current.useContext(n)};Pn.useDebugValue=function(){};Pn.useDeferredValue=function(n){return Bo.current.useDeferredValue(n)};Pn.useEffect=function(n,e){return Bo.current.useEffect(n,e)};Pn.useId=function(){return Bo.current.useId()};Pn.useImperativeHandle=function(n,e,t){return Bo.current.useImperativeHandle(n,e,t)};Pn.useInsertionEffect=function(n,e){return Bo.current.useInsertionEffect(n,e)};Pn.useLayoutEffect=function(n,e){return Bo.current.useLayoutEffect(n,e)};Pn.useMemo=function(n,e){return Bo.current.useMemo(n,e)};Pn.useReducer=function(n,e,t){return Bo.current.useReducer(n,e,t)};Pn.useRef=function(n){return Bo.current.useRef(n)};Pn.useState=function(n){return Bo.current.useState(n)};Pn.useSyncExternalStore=function(n,e,t){return Bo.current.useSyncExternalStore(n,e,t)};Pn.useTransition=function(){return Bo.current.useTransition()};Pn.version="18.2.0";t8.exports=Pn;var q=t8.exports;const Cn=Mu(q),c8=Sie({__proto__:null,default:Cn},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bie=q,Fie=Symbol.for("react.element"),Uie=Symbol.for("react.fragment"),Gie=Object.prototype.hasOwnProperty,Wie=Bie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zie={key:!0,ref:!0,__self:!0,__source:!0};function u8(n,e,t){var i,r={},o=null,a=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Gie.call(e,i)&&!zie.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Fie,type:n,key:o,ref:a,props:r,_owner:Wie.current}}VC.Fragment=Uie;VC.jsx=u8;VC.jsxs=u8;e8.exports=VC;var kN=e8.exports;const Fr=kN.Fragment,se=kN.jsx,dt=kN.jsxs;var jP={},h8={exports:{}},ja={},d8={exports:{}},f8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,Q){var ee=X.length;X.push(Q);e:for(;0<ee;){var z=ee-1>>>1,L=X[z];if(0<r(L,Q))X[z]=Q,X[ee]=L,ee=z;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var Q=X[0],ee=X.pop();if(ee!==Q){X[0]=ee;e:for(var z=0,L=X.length,le=L>>>1;z<le;){var de=2*(z+1)-1,ie=X[de],Ce=de+1,ye=X[Ce];if(0>r(ie,ee))Ce<L&&0>r(ye,ie)?(X[z]=ye,X[Ce]=ee,z=Ce):(X[z]=ie,X[de]=ee,z=de);else if(Ce<L&&0>r(ye,ee))X[z]=ye,X[Ce]=ee,z=Ce;else break e}}return Q}function r(X,Q){var ee=X.sortIndex-Q.sortIndex;return ee!==0?ee:X.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,g=!1,v=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Q=t(h);Q!==null;){if(Q.callback===null)i(h);else if(Q.startTime<=X)i(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=t(h)}}function $(X){if(y=!1,E(X),!v)if(t(u)!==null)v=!0,re(A);else{var Q=t(h);Q!==null&&ce($,Q.startTime-X)}}function A(X,Q){v=!1,y&&(y=!1,T(R),R=-1),g=!0;var ee=m;try{for(E(Q),p=t(u);p!==null&&(!(p.expirationTime>Q)||X&&!Z());){var z=p.callback;if(typeof z=="function"){p.callback=null,m=p.priorityLevel;var L=z(p.expirationTime<=Q);Q=n.unstable_now(),typeof L=="function"?p.callback=L:p===t(u)&&i(u),E(Q)}else i(u);p=t(u)}if(p!==null)var le=!0;else{var de=t(h);de!==null&&ce($,de.startTime-Q),le=!1}return le}finally{p=null,m=ee,g=!1}}var I=!1,D=null,R=-1,B=5,G=-1;function Z(){return!(n.unstable_now()-G<B)}function N(){if(D!==null){var X=n.unstable_now();G=X;var Q=!0;try{Q=D(!0,X)}finally{Q?H():(I=!1,D=null)}}else I=!1}var H;if(typeof w=="function")H=function(){w(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,K=M.port2;M.port1.onmessage=N,H=function(){K.postMessage(null)}}else H=function(){S(N,0)};function re(X){D=X,I||(I=!0,H())}function ce(X,Q){R=S(function(){X(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,re(A))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(X){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ee=m;m=Q;try{return X()}finally{m=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,Q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=m;m=X;try{return Q()}finally{m=ee}},n.unstable_scheduleCallback=function(X,Q,ee){var z=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?z+ee:z):ee=z,X){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,X={id:d++,callback:Q,priorityLevel:X,startTime:ee,expirationTime:L,sortIndex:-1},ee>z?(X.sortIndex=ee,e(h,X),t(u)===null&&X===t(h)&&(y?(T(R),R=-1):y=!0,ce($,ee-z))):(X.sortIndex=L,e(u,X),v||g||(v=!0,re(A))),X},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(X){var Q=m;return function(){var ee=m;m=Q;try{return X.apply(this,arguments)}finally{m=ee}}}})(f8);d8.exports=f8;var Qie=d8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8=q,za=Qie;function ut(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m8=new Set,qb={};function dg(n,e){eO(n,e),eO(n+"Capture",e)}function eO(n,e){for(qb[n]=e,n=0;n<e.length;n++)m8.add(e[n])}var Qh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),YP=Object.prototype.hasOwnProperty,Vie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n5={},i5={};function Hie(n){return YP.call(i5,n)?!0:YP.call(n5,n)?!1:Vie.test(n)?i5[n]=!0:(n5[n]=!0,!1)}function Xie(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function jie(n,e,t,i){if(e===null||typeof e>"u"||Xie(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fo(n,e,t,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var js={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){js[n]=new Fo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];js[e]=new Fo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){js[n]=new Fo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){js[n]=new Fo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){js[n]=new Fo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){js[n]=new Fo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){js[n]=new Fo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){js[n]=new Fo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){js[n]=new Fo(n,5,!1,n.toLowerCase(),null,!1,!1)});var IN=/[\-:]([a-z])/g;function RN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(IN,RN);js[e]=new Fo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(IN,RN);js[e]=new Fo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(IN,RN);js[e]=new Fo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){js[n]=new Fo(n,1,!1,n.toLowerCase(),null,!1,!1)});js.xlinkHref=new Fo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){js[n]=new Fo(n,1,!1,n.toLowerCase(),null,!0,!0)});function MN(n,e,t,i){var r=js.hasOwnProperty(e)?js[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jie(e,t,r,i)&&(t=null),i||r===null?Hie(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var nd=p8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iw=Symbol.for("react.element"),a0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),PN=Symbol.for("react.strict_mode"),ZP=Symbol.for("react.profiler"),g8=Symbol.for("react.provider"),_8=Symbol.for("react.context"),DN=Symbol.for("react.forward_ref"),qP=Symbol.for("react.suspense"),JP=Symbol.for("react.suspense_list"),LN=Symbol.for("react.memo"),Yd=Symbol.for("react.lazy"),O8=Symbol.for("react.offscreen"),r5=Symbol.iterator;function Ey(n){return n===null||typeof n!="object"?null:(n=r5&&n[r5]||n["@@iterator"],typeof n=="function"?n:null)}var or=Object.assign,mR;function cb(n){if(mR===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);mR=e&&e[1]||""}return`
`+mR+n}var gR=!1;function _R(n,e){if(!n||gR)return"";gR=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(n,[],e)}else{try{e.call()}catch(h){i=h}n.call(e.prototype)}else{try{throw Error()}catch(h){i=h}n()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,l=o.length-1;1<=a&&0<=l&&r[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==o[l]){var u=`
`+r[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{gR=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?cb(n):""}function Yie(n){switch(n.tag){case 5:return cb(n.type);case 16:return cb("Lazy");case 13:return cb("Suspense");case 19:return cb("SuspenseList");case 0:case 2:case 15:return n=_R(n.type,!1),n;case 11:return n=_R(n.type.render,!1),n;case 1:return n=_R(n.type,!0),n;default:return""}}function KP(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case l0:return"Fragment";case a0:return"Portal";case ZP:return"Profiler";case PN:return"StrictMode";case qP:return"Suspense";case JP:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _8:return(n.displayName||"Context")+".Consumer";case g8:return(n._context.displayName||"Context")+".Provider";case DN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case LN:return e=n.displayName||null,e!==null?e:KP(n.type)||"Memo";case Yd:e=n._payload,n=n._init;try{return KP(n(e))}catch{}}return null}function Zie(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KP(e);case 8:return e===PN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function v8(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qie(n){var e=v8(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Rw(n){n._valueTracker||(n._valueTracker=qie(n))}function y8(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=v8(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function g$(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function e2(n,e){var t=e.checked;return or({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function s5(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=kf(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b8(n,e){e=e.checked,e!=null&&MN(n,"checked",e,!1)}function t2(n,e){b8(n,e);var t=kf(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?n2(n,e.type,t):e.hasOwnProperty("defaultValue")&&n2(n,e.type,kf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function o5(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function n2(n,e,t){(e!=="number"||g$(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ub=Array.isArray;function P0(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+kf(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function i2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return or({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function a5(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(ub(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:kf(t)}}function S8(n,e){var t=kf(e.value),i=kf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function l5(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function T8(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?T8(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Mw,w8=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Mw=Mw||document.createElement("div"),Mw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mw.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Jb(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Tb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jie=["Webkit","ms","Moz","O"];Object.keys(Tb).forEach(function(n){Jie.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Tb[e]=Tb[n]})});function E8(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Tb.hasOwnProperty(n)&&Tb[n]?(""+e).trim():e+"px"}function x8(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=E8(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Kie=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s2(n,e){if(e){if(Kie[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function o2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a2=null;function NN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var l2=null,D0=null,L0=null;function c5(n){if(n=pT(n)){if(typeof l2!="function")throw Error(ut(280));var e=n.stateNode;e&&(e=ZC(e),l2(n.stateNode,n.type,e))}}function $8(n){D0?L0?L0.push(n):L0=[n]:D0=n}function C8(){if(D0){var n=D0,e=L0;if(L0=D0=null,c5(n),e)for(n=0;n<e.length;n++)c5(e[n])}}function A8(n,e){return n(e)}function k8(){}var OR=!1;function I8(n,e,t){if(OR)return n(e,t);OR=!0;try{return A8(n,e,t)}finally{OR=!1,(D0!==null||L0!==null)&&(k8(),C8())}}function Kb(n,e){var t=n.stateNode;if(t===null)return null;var i=ZC(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var c2=!1;if(Qh)try{var xy={};Object.defineProperty(xy,"passive",{get:function(){c2=!0}}),window.addEventListener("test",xy,xy),window.removeEventListener("test",xy,xy)}catch{c2=!1}function ere(n,e,t,i,r,o,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(d){this.onError(d)}}var wb=!1,_$=null,O$=!1,u2=null,tre={onError:function(n){wb=!0,_$=n}};function nre(n,e,t,i,r,o,a,l,u){wb=!1,_$=null,ere.apply(tre,arguments)}function ire(n,e,t,i,r,o,a,l,u){if(nre.apply(this,arguments),wb){if(wb){var h=_$;wb=!1,_$=null}else throw Error(ut(198));O$||(O$=!0,u2=h)}}function fg(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function R8(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function u5(n){if(fg(n)!==n)throw Error(ut(188))}function rre(n){var e=n.alternate;if(!e){if(e=fg(n),e===null)throw Error(ut(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===t)return u5(r),n;if(o===i)return u5(r),e;o=o.sibling}throw Error(ut(188))}if(t.return!==i.return)t=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===t){a=!0,t=r,i=o;break}if(l===i){a=!0,i=r,t=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===t){a=!0,t=o,i=r;break}if(l===i){a=!0,i=o,t=r;break}l=l.sibling}if(!a)throw Error(ut(189))}}if(t.alternate!==i)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?n:e}function M8(n){return n=rre(n),n!==null?P8(n):null}function P8(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=P8(n);if(e!==null)return e;n=n.sibling}return null}var D8=za.unstable_scheduleCallback,h5=za.unstable_cancelCallback,sre=za.unstable_shouldYield,ore=za.unstable_requestPaint,Tr=za.unstable_now,are=za.unstable_getCurrentPriorityLevel,BN=za.unstable_ImmediatePriority,L8=za.unstable_UserBlockingPriority,v$=za.unstable_NormalPriority,lre=za.unstable_LowPriority,N8=za.unstable_IdlePriority,HC=null,Su=null;function cre(n){if(Su&&typeof Su.onCommitFiberRoot=="function")try{Su.onCommitFiberRoot(HC,n,void 0,(n.current.flags&128)===128)}catch{}}var gc=Math.clz32?Math.clz32:dre,ure=Math.log,hre=Math.LN2;function dre(n){return n>>>=0,n===0?32:31-(ure(n)/hre|0)|0}var Pw=64,Dw=4194304;function hb(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function y$(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,o=n.pingedLanes,a=t&268435455;if(a!==0){var l=a&~r;l!==0?i=hb(l):(o&=a,o!==0&&(i=hb(o)))}else a=t&~r,a!==0?i=hb(a):o!==0&&(i=hb(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-gc(e),r=1<<t,i|=n[t],e&=~r;return i}function fre(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pre(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-gc(o),l=1<<a,u=r[a];u===-1?(!(l&t)||l&i)&&(r[a]=fre(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function h2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function B8(){var n=Pw;return Pw<<=1,!(Pw&4194240)&&(Pw=64),n}function vR(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function dT(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-gc(e),n[e]=t}function mre(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-gc(t),o=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~o}}function FN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-gc(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var si=0;function F8(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var U8,UN,G8,W8,z8,d2=!1,Lw=[],pf=null,mf=null,gf=null,eS=new Map,tS=new Map,Kd=[],gre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d5(n,e){switch(n){case"focusin":case"focusout":pf=null;break;case"dragenter":case"dragleave":mf=null;break;case"mouseover":case"mouseout":gf=null;break;case"pointerover":case"pointerout":eS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tS.delete(e.pointerId)}}function $y(n,e,t,i,r,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=pT(e),e!==null&&UN(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function _re(n,e,t,i,r){switch(e){case"focusin":return pf=$y(pf,n,e,t,i,r),!0;case"dragenter":return mf=$y(mf,n,e,t,i,r),!0;case"mouseover":return gf=$y(gf,n,e,t,i,r),!0;case"pointerover":var o=r.pointerId;return eS.set(o,$y(eS.get(o)||null,n,e,t,i,r)),!0;case"gotpointercapture":return o=r.pointerId,tS.set(o,$y(tS.get(o)||null,n,e,t,i,r)),!0}return!1}function Q8(n){var e=pm(n.target);if(e!==null){var t=fg(e);if(t!==null){if(e=t.tag,e===13){if(e=R8(t),e!==null){n.blockedOn=e,z8(n.priority,function(){G8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=f2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);a2=i,t.target.dispatchEvent(i),a2=null}else return e=pT(t),e!==null&&UN(e),n.blockedOn=t,!1;e.shift()}return!0}function f5(n,e,t){Cx(n)&&t.delete(e)}function Ore(){d2=!1,pf!==null&&Cx(pf)&&(pf=null),mf!==null&&Cx(mf)&&(mf=null),gf!==null&&Cx(gf)&&(gf=null),eS.forEach(f5),tS.forEach(f5)}function Cy(n,e){n.blockedOn===e&&(n.blockedOn=null,d2||(d2=!0,za.unstable_scheduleCallback(za.unstable_NormalPriority,Ore)))}function nS(n){function e(r){return Cy(r,n)}if(0<Lw.length){Cy(Lw[0],n);for(var t=1;t<Lw.length;t++){var i=Lw[t];i.blockedOn===n&&(i.blockedOn=null)}}for(pf!==null&&Cy(pf,n),mf!==null&&Cy(mf,n),gf!==null&&Cy(gf,n),eS.forEach(e),tS.forEach(e),t=0;t<Kd.length;t++)i=Kd[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Kd.length&&(t=Kd[0],t.blockedOn===null);)Q8(t),t.blockedOn===null&&Kd.shift()}var N0=nd.ReactCurrentBatchConfig,b$=!0;function vre(n,e,t,i){var r=si,o=N0.transition;N0.transition=null;try{si=1,GN(n,e,t,i)}finally{si=r,N0.transition=o}}function yre(n,e,t,i){var r=si,o=N0.transition;N0.transition=null;try{si=4,GN(n,e,t,i)}finally{si=r,N0.transition=o}}function GN(n,e,t,i){if(b$){var r=f2(n,e,t,i);if(r===null)AR(n,e,i,S$,t),d5(n,i);else if(_re(r,n,e,t,i))i.stopPropagation();else if(d5(n,i),e&4&&-1<gre.indexOf(n)){for(;r!==null;){var o=pT(r);if(o!==null&&U8(o),o=f2(n,e,t,i),o===null&&AR(n,e,i,S$,t),o===r)break;r=o}r!==null&&i.stopPropagation()}else AR(n,e,i,null,t)}}var S$=null;function f2(n,e,t,i){if(S$=null,n=NN(i),n=pm(n),n!==null)if(e=fg(n),e===null)n=null;else if(t=e.tag,t===13){if(n=R8(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return S$=n,null}function V8(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(are()){case BN:return 1;case L8:return 4;case v$:case lre:return 16;case N8:return 536870912;default:return 16}default:return 16}}var nf=null,WN=null,Ax=null;function H8(){if(Ax)return Ax;var n,e=WN,t=e.length,i,r="value"in nf?nf.value:nf.textContent,o=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[o-i];i++);return Ax=r.slice(n,1<i?1-i:void 0)}function kx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Nw(){return!0}function p5(){return!1}function Ya(n){function e(t,i,r,o,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Nw:p5,this.isPropagationStopped=p5,this}return or(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Nw)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Nw)},persist:function(){},isPersistent:Nw}),e}var CO={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zN=Ya(CO),fT=or({},CO,{view:0,detail:0}),bre=Ya(fT),yR,bR,Ay,XC=or({},fT,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ay&&(Ay&&n.type==="mousemove"?(yR=n.screenX-Ay.screenX,bR=n.screenY-Ay.screenY):bR=yR=0,Ay=n),yR)},movementY:function(n){return"movementY"in n?n.movementY:bR}}),m5=Ya(XC),Sre=or({},XC,{dataTransfer:0}),Tre=Ya(Sre),wre=or({},fT,{relatedTarget:0}),SR=Ya(wre),Ere=or({},CO,{animationName:0,elapsedTime:0,pseudoElement:0}),xre=Ya(Ere),$re=or({},CO,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cre=Ya($re),Are=or({},CO,{data:0}),g5=Ya(Are),kre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ire={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mre(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Rre[n])?!!e[n]:!1}function QN(){return Mre}var Pre=or({},fT,{key:function(n){if(n.key){var e=kre[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=kx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ire[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QN,charCode:function(n){return n.type==="keypress"?kx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Dre=Ya(Pre),Lre=or({},XC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_5=Ya(Lre),Nre=or({},fT,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QN}),Bre=Ya(Nre),Fre=or({},CO,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ure=Ya(Fre),Gre=or({},XC,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wre=Ya(Gre),zre=[9,13,27,32],VN=Qh&&"CompositionEvent"in window,Eb=null;Qh&&"documentMode"in document&&(Eb=document.documentMode);var Qre=Qh&&"TextEvent"in window&&!Eb,X8=Qh&&(!VN||Eb&&8<Eb&&11>=Eb),O5=String.fromCharCode(32),v5=!1;function j8(n,e){switch(n){case"keyup":return zre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y8(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var c0=!1;function Vre(n,e){switch(n){case"compositionend":return Y8(e);case"keypress":return e.which!==32?null:(v5=!0,O5);case"textInput":return n=e.data,n===O5&&v5?null:n;default:return null}}function Hre(n,e){if(c0)return n==="compositionend"||!VN&&j8(n,e)?(n=H8(),Ax=WN=nf=null,c0=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X8&&e.locale!=="ko"?null:e.data;default:return null}}var Xre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Xre[n.type]:e==="textarea"}function Z8(n,e,t,i){$8(i),e=T$(e,"onChange"),0<e.length&&(t=new zN("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var xb=null,iS=null;function jre(n){aX(n,0)}function jC(n){var e=d0(n);if(y8(e))return n}function Yre(n,e){if(n==="change")return e}var q8=!1;if(Qh){var TR;if(Qh){var wR="oninput"in document;if(!wR){var b5=document.createElement("div");b5.setAttribute("oninput","return;"),wR=typeof b5.oninput=="function"}TR=wR}else TR=!1;q8=TR&&(!document.documentMode||9<document.documentMode)}function S5(){xb&&(xb.detachEvent("onpropertychange",J8),iS=xb=null)}function J8(n){if(n.propertyName==="value"&&jC(iS)){var e=[];Z8(e,iS,n,NN(n)),I8(jre,e)}}function Zre(n,e,t){n==="focusin"?(S5(),xb=e,iS=t,xb.attachEvent("onpropertychange",J8)):n==="focusout"&&S5()}function qre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jC(iS)}function Jre(n,e){if(n==="click")return jC(e)}function Kre(n,e){if(n==="input"||n==="change")return jC(e)}function ese(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var bc=typeof Object.is=="function"?Object.is:ese;function rS(n,e){if(bc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!YP.call(e,r)||!bc(n[r],e[r]))return!1}return!0}function T5(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function w5(n,e){var t=T5(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=T5(t)}}function K8(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?K8(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function eX(){for(var n=window,e=g$();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=g$(n.document)}return e}function HN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function tse(n){var e=eX(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&K8(t.ownerDocument.documentElement,t)){if(i!==null&&HN(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!n.extend&&o>i&&(r=i,i=o,o=r),r=w5(t,o);var a=w5(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nse=Qh&&"documentMode"in document&&11>=document.documentMode,u0=null,p2=null,$b=null,m2=!1;function E5(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;m2||u0==null||u0!==g$(i)||(i=u0,"selectionStart"in i&&HN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$b&&rS($b,i)||($b=i,i=T$(p2,"onSelect"),0<i.length&&(e=new zN("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=u0)))}function Bw(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var h0={animationend:Bw("Animation","AnimationEnd"),animationiteration:Bw("Animation","AnimationIteration"),animationstart:Bw("Animation","AnimationStart"),transitionend:Bw("Transition","TransitionEnd")},ER={},tX={};Qh&&(tX=document.createElement("div").style,"AnimationEvent"in window||(delete h0.animationend.animation,delete h0.animationiteration.animation,delete h0.animationstart.animation),"TransitionEvent"in window||delete h0.transitionend.transition);function YC(n){if(ER[n])return ER[n];if(!h0[n])return n;var e=h0[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tX)return ER[n]=e[t];return n}var nX=YC("animationend"),iX=YC("animationiteration"),rX=YC("animationstart"),sX=YC("transitionend"),oX=new Map,x5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hf(n,e){oX.set(n,e),dg(e,[n])}for(var xR=0;xR<x5.length;xR++){var $R=x5[xR],ise=$R.toLowerCase(),rse=$R[0].toUpperCase()+$R.slice(1);Hf(ise,"on"+rse)}Hf(nX,"onAnimationEnd");Hf(iX,"onAnimationIteration");Hf(rX,"onAnimationStart");Hf("dblclick","onDoubleClick");Hf("focusin","onFocus");Hf("focusout","onBlur");Hf(sX,"onTransitionEnd");eO("onMouseEnter",["mouseout","mouseover"]);eO("onMouseLeave",["mouseout","mouseover"]);eO("onPointerEnter",["pointerout","pointerover"]);eO("onPointerLeave",["pointerout","pointerover"]);dg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dg("onBeforeInput",["compositionend","keypress","textInput","paste"]);dg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sse=new Set("cancel close invalid load scroll toggle".split(" ").concat(db));function $5(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,ire(i,e,void 0,n),n.currentTarget=null}function aX(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==o&&r.isPropagationStopped())break e;$5(r,l,h),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==o&&r.isPropagationStopped())break e;$5(r,l,h),o=u}}}if(O$)throw n=u2,O$=!1,u2=null,n}function wi(n,e){var t=e[y2];t===void 0&&(t=e[y2]=new Set);var i=n+"__bubble";t.has(i)||(lX(e,n,2,!1),t.add(i))}function CR(n,e,t){var i=0;e&&(i|=4),lX(t,n,i,e)}var Fw="_reactListening"+Math.random().toString(36).slice(2);function sS(n){if(!n[Fw]){n[Fw]=!0,m8.forEach(function(t){t!=="selectionchange"&&(sse.has(t)||CR(t,!1,n),CR(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Fw]||(e[Fw]=!0,CR("selectionchange",!1,e))}}function lX(n,e,t,i){switch(V8(e)){case 1:var r=vre;break;case 4:r=yre;break;default:r=GN}t=r.bind(null,e,t,n),r=void 0,!c2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function AR(n,e,t,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;a=a.return}for(;l!==null;){if(a=pm(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}I8(function(){var h=o,d=NN(t),p=[];e:{var m=oX.get(n);if(m!==void 0){var g=zN,v=n;switch(n){case"keypress":if(kx(t)===0)break e;case"keydown":case"keyup":g=Dre;break;case"focusin":v="focus",g=SR;break;case"focusout":v="blur",g=SR;break;case"beforeblur":case"afterblur":g=SR;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=m5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Tre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Bre;break;case nX:case iX:case rX:g=xre;break;case sX:g=Ure;break;case"scroll":g=bre;break;case"wheel":g=Wre;break;case"copy":case"cut":case"paste":g=Cre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_5}var y=(e&4)!==0,S=!y&&n==="scroll",T=y?m!==null?m+"Capture":null:m;y=[];for(var w=h,E;w!==null;){E=w;var $=E.stateNode;if(E.tag===5&&$!==null&&(E=$,T!==null&&($=Kb(w,T),$!=null&&y.push(oS(w,$,E)))),S)break;w=w.return}0<y.length&&(m=new g(m,v,null,t,d),p.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==a2&&(v=t.relatedTarget||t.fromElement)&&(pm(v)||v[Vh]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=h,v=v?pm(v):null,v!==null&&(S=fg(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(y=m5,$="onMouseLeave",T="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(y=_5,$="onPointerLeave",T="onPointerEnter",w="pointer"),S=g==null?m:d0(g),E=v==null?m:d0(v),m=new y($,w+"leave",g,t,d),m.target=S,m.relatedTarget=E,$=null,pm(d)===h&&(y=new y(T,w+"enter",v,t,d),y.target=E,y.relatedTarget=S,$=y),S=$,g&&v)t:{for(y=g,T=v,w=0,E=y;E;E=A_(E))w++;for(E=0,$=T;$;$=A_($))E++;for(;0<w-E;)y=A_(y),w--;for(;0<E-w;)T=A_(T),E--;for(;w--;){if(y===T||T!==null&&y===T.alternate)break t;y=A_(y),T=A_(T)}y=null}else y=null;g!==null&&C5(p,m,g,y,!1),v!==null&&S!==null&&C5(p,S,v,y,!0)}}e:{if(m=h?d0(h):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=Yre;else if(y5(m))if(q8)A=Kre;else{A=qre;var I=Zre}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=Jre);if(A&&(A=A(n,h))){Z8(p,A,t,d);break e}I&&I(n,m,h),n==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&n2(m,"number",m.value)}switch(I=h?d0(h):window,n){case"focusin":(y5(I)||I.contentEditable==="true")&&(u0=I,p2=h,$b=null);break;case"focusout":$b=p2=u0=null;break;case"mousedown":m2=!0;break;case"contextmenu":case"mouseup":case"dragend":m2=!1,E5(p,t,d);break;case"selectionchange":if(nse)break;case"keydown":case"keyup":E5(p,t,d)}var D;if(VN)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else c0?j8(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(X8&&t.locale!=="ko"&&(c0||R!=="onCompositionStart"?R==="onCompositionEnd"&&c0&&(D=H8()):(nf=d,WN="value"in nf?nf.value:nf.textContent,c0=!0)),I=T$(h,R),0<I.length&&(R=new g5(R,n,null,t,d),p.push({event:R,listeners:I}),D?R.data=D:(D=Y8(t),D!==null&&(R.data=D)))),(D=Qre?Vre(n,t):Hre(n,t))&&(h=T$(h,"onBeforeInput"),0<h.length&&(d=new g5("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:h}),d.data=D))}aX(p,e)})}function oS(n,e,t){return{instance:n,listener:e,currentTarget:t}}function T$(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Kb(n,t),o!=null&&i.unshift(oS(n,o,r)),o=Kb(n,e),o!=null&&i.push(oS(n,o,r))),n=n.return}return i}function A_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function C5(n,e,t,i,r){for(var o=e._reactName,a=[];t!==null&&t!==i;){var l=t,u=l.alternate,h=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&h!==null&&(l=h,r?(u=Kb(t,o),u!=null&&a.unshift(oS(t,u,l))):r||(u=Kb(t,o),u!=null&&a.push(oS(t,u,l)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var ose=/\r\n?/g,ase=/\u0000|\uFFFD/g;function A5(n){return(typeof n=="string"?n:""+n).replace(ose,`
`).replace(ase,"")}function Uw(n,e,t){if(e=A5(e),A5(n)!==e&&t)throw Error(ut(425))}function w$(){}var g2=null,_2=null;function O2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v2=typeof setTimeout=="function"?setTimeout:void 0,lse=typeof clearTimeout=="function"?clearTimeout:void 0,k5=typeof Promise=="function"?Promise:void 0,cse=typeof queueMicrotask=="function"?queueMicrotask:typeof k5<"u"?function(n){return k5.resolve(null).then(n).catch(use)}:v2;function use(n){setTimeout(function(){throw n})}function kR(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),nS(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);nS(e)}function _f(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function I5(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var AO=Math.random().toString(36).slice(2),fu="__reactFiber$"+AO,aS="__reactProps$"+AO,Vh="__reactContainer$"+AO,y2="__reactEvents$"+AO,hse="__reactListeners$"+AO,dse="__reactHandles$"+AO;function pm(n){var e=n[fu];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Vh]||t[fu]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=I5(n);n!==null;){if(t=n[fu])return t;n=I5(n)}return e}n=t,t=n.parentNode}return null}function pT(n){return n=n[fu]||n[Vh],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function d0(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ut(33))}function ZC(n){return n[aS]||null}var b2=[],f0=-1;function Xf(n){return{current:n}}function Ai(n){0>f0||(n.current=b2[f0],b2[f0]=null,f0--)}function yi(n,e){f0++,b2[f0]=n.current,n.current=e}var If={},ho=Xf(If),ua=Xf(!1),Qm=If;function tO(n,e){var t=n.type.contextTypes;if(!t)return If;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in t)r[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ha(n){return n=n.childContextTypes,n!=null}function E$(){Ai(ua),Ai(ho)}function R5(n,e,t){if(ho.current!==If)throw Error(ut(168));yi(ho,e),yi(ua,t)}function cX(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ut(108,Zie(n)||"Unknown",r));return or({},t,i)}function x$(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||If,Qm=ho.current,yi(ho,n),yi(ua,ua.current),!0}function M5(n,e,t){var i=n.stateNode;if(!i)throw Error(ut(169));t?(n=cX(n,e,Qm),i.__reactInternalMemoizedMergedChildContext=n,Ai(ua),Ai(ho),yi(ho,n)):Ai(ua),yi(ua,t)}var Ch=null,qC=!1,IR=!1;function uX(n){Ch===null?Ch=[n]:Ch.push(n)}function fse(n){qC=!0,uX(n)}function jf(){if(!IR&&Ch!==null){IR=!0;var n=0,e=si;try{var t=Ch;for(si=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ch=null,qC=!1}catch(r){throw Ch!==null&&(Ch=Ch.slice(n+1)),D8(BN,jf),r}finally{si=e,IR=!1}}return null}var p0=[],m0=0,$$=null,C$=0,_l=[],Ol=0,Vm=null,Ph=1,Dh="";function Kp(n,e){p0[m0++]=C$,p0[m0++]=$$,$$=n,C$=e}function hX(n,e,t){_l[Ol++]=Ph,_l[Ol++]=Dh,_l[Ol++]=Vm,Vm=n;var i=Ph;n=Dh;var r=32-gc(i)-1;i&=~(1<<r),t+=1;var o=32-gc(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ph=1<<32-gc(e)+r|t<<r|i,Dh=o+n}else Ph=1<<o|t<<r|i,Dh=n}function XN(n){n.return!==null&&(Kp(n,1),hX(n,1,0))}function jN(n){for(;n===$$;)$$=p0[--m0],p0[m0]=null,C$=p0[--m0],p0[m0]=null;for(;n===Vm;)Vm=_l[--Ol],_l[Ol]=null,Dh=_l[--Ol],_l[Ol]=null,Ph=_l[--Ol],_l[Ol]=null}var Ua=null,Na=null,Fi=!1,uc=null;function dX(n,e){var t=wl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function P5(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ua=n,Na=_f(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ua=n,Na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vm!==null?{id:Ph,overflow:Dh}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=wl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ua=n,Na=null,!0):!1;default:return!1}}function S2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function T2(n){if(Fi){var e=Na;if(e){var t=e;if(!P5(n,e)){if(S2(n))throw Error(ut(418));e=_f(t.nextSibling);var i=Ua;e&&P5(n,e)?dX(i,t):(n.flags=n.flags&-4097|2,Fi=!1,Ua=n)}}else{if(S2(n))throw Error(ut(418));n.flags=n.flags&-4097|2,Fi=!1,Ua=n}}}function D5(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ua=n}function Gw(n){if(n!==Ua)return!1;if(!Fi)return D5(n),Fi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!O2(n.type,n.memoizedProps)),e&&(e=Na)){if(S2(n))throw fX(),Error(ut(418));for(;e;)dX(n,e),e=_f(e.nextSibling)}if(D5(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ut(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Na=_f(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Na=null}}else Na=Ua?_f(n.stateNode.nextSibling):null;return!0}function fX(){for(var n=Na;n;)n=_f(n.nextSibling)}function nO(){Na=Ua=null,Fi=!1}function YN(n){uc===null?uc=[n]:uc.push(n)}var pse=nd.ReactCurrentBatchConfig;function oc(n,e){if(n&&n.defaultProps){e=or({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var A$=Xf(null),k$=null,g0=null,ZN=null;function qN(){ZN=g0=k$=null}function JN(n){var e=A$.current;Ai(A$),n._currentValue=e}function w2(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function B0(n,e){k$=n,ZN=g0=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(oa=!0),n.firstContext=null)}function kl(n){var e=n._currentValue;if(ZN!==n)if(n={context:n,memoizedValue:e,next:null},g0===null){if(k$===null)throw Error(ut(308));g0=n,k$.dependencies={lanes:0,firstContext:n}}else g0=g0.next=n;return e}var mm=null;function KN(n){mm===null?mm=[n]:mm.push(n)}function pX(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,KN(e)):(t.next=r.next,r.next=t),e.interleaved=t,Hh(n,i)}function Hh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Zd=!1;function eB(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mX(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Bh(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Of(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Zn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Hh(n,t)}return r=i.interleaved,r===null?(e.next=e,KN(i)):(e.next=r.next,r.next=e),i.interleaved=e,Hh(n,t)}function Ix(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,FN(n,t)}}function L5(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?r=o=a:o=o.next=a,t=t.next}while(t!==null);o===null?r=o=e:o=o.next=e}else r=o=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function I$(n,e,t,i){var r=n.updateQueue;Zd=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?o=h:a.next=h,a=u;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(o!==null){var p=r.baseState;a=0,d=h=u=null,l=o;do{var m=l.lane,g=l.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=n,y=l;switch(m=e,g=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=or({},p,m);break e;case 2:Zd=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=g,u=p):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(d===null&&(u=p),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Xm|=a,n.lanes=a,n.memoizedState=p}}function N5(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ut(191,r));r.call(i)}}}var gX=new p8.Component().refs;function E2(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:or({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var JC={isMounted:function(n){return(n=n._reactInternals)?fg(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Lo(),r=yf(n),o=Bh(i,r);o.payload=e,t!=null&&(o.callback=t),e=Of(n,o,r),e!==null&&(_c(e,n,r,i),Ix(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Lo(),r=yf(n),o=Bh(i,r);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Of(n,o,r),e!==null&&(_c(e,n,r,i),Ix(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Lo(),i=yf(n),r=Bh(t,i);r.tag=2,e!=null&&(r.callback=e),e=Of(n,r,i),e!==null&&(_c(e,n,i,t),Ix(e,n,i))}};function B5(n,e,t,i,r,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!rS(t,i)||!rS(r,o):!0}function _X(n,e,t){var i=!1,r=If,o=e.contextType;return typeof o=="object"&&o!==null?o=kl(o):(r=ha(e)?Qm:ho.current,i=e.contextTypes,o=(i=i!=null)?tO(n,r):If),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=JC,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=o),e}function F5(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&JC.enqueueReplaceState(e,e.state,null)}function x2(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=gX,eB(n);var o=e.contextType;typeof o=="object"&&o!==null?r.context=kl(o):(o=ha(e)?Qm:ho.current,r.context=tO(n,o)),r.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(E2(n,e,o,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&JC.enqueueReplaceState(r,r.state,null),I$(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function ky(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var i=t.stateNode}if(!i)throw Error(ut(147,n));var r=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=r.refs;l===gX&&(l=r.refs={}),a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,n))}return n}function Ww(n,e){throw n=Object.prototype.toString.call(e),Error(ut(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function U5(n){var e=n._init;return e(n._payload)}function OX(n){function e(T,w){if(n){var E=T.deletions;E===null?(T.deletions=[w],T.flags|=16):E.push(w)}}function t(T,w){if(!n)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function i(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function r(T,w){return T=bf(T,w),T.index=0,T.sibling=null,T}function o(T,w,E){return T.index=E,n?(E=T.alternate,E!==null?(E=E.index,E<w?(T.flags|=2,w):E):(T.flags|=2,w)):(T.flags|=1048576,w)}function a(T){return n&&T.alternate===null&&(T.flags|=2),T}function l(T,w,E,$){return w===null||w.tag!==6?(w=BR(E,T.mode,$),w.return=T,w):(w=r(w,E),w.return=T,w)}function u(T,w,E,$){var A=E.type;return A===l0?d(T,w,E.props.children,$,E.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Yd&&U5(A)===w.type)?($=r(w,E.props),$.ref=ky(T,w,E),$.return=T,$):($=Nx(E.type,E.key,E.props,null,T.mode,$),$.ref=ky(T,w,E),$.return=T,$)}function h(T,w,E,$){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=FR(E,T.mode,$),w.return=T,w):(w=r(w,E.children||[]),w.return=T,w)}function d(T,w,E,$,A){return w===null||w.tag!==7?(w=Rm(E,T.mode,$,A),w.return=T,w):(w=r(w,E),w.return=T,w)}function p(T,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=BR(""+w,T.mode,E),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Iw:return E=Nx(w.type,w.key,w.props,null,T.mode,E),E.ref=ky(T,null,w),E.return=T,E;case a0:return w=FR(w,T.mode,E),w.return=T,w;case Yd:var $=w._init;return p(T,$(w._payload),E)}if(ub(w)||Ey(w))return w=Rm(w,T.mode,E,null),w.return=T,w;Ww(T,w)}return null}function m(T,w,E,$){var A=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:l(T,w,""+E,$);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Iw:return E.key===A?u(T,w,E,$):null;case a0:return E.key===A?h(T,w,E,$):null;case Yd:return A=E._init,m(T,w,A(E._payload),$)}if(ub(E)||Ey(E))return A!==null?null:d(T,w,E,$,null);Ww(T,E)}return null}function g(T,w,E,$,A){if(typeof $=="string"&&$!==""||typeof $=="number")return T=T.get(E)||null,l(w,T,""+$,A);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Iw:return T=T.get($.key===null?E:$.key)||null,u(w,T,$,A);case a0:return T=T.get($.key===null?E:$.key)||null,h(w,T,$,A);case Yd:var I=$._init;return g(T,w,E,I($._payload),A)}if(ub($)||Ey($))return T=T.get(E)||null,d(w,T,$,A,null);Ww(w,$)}return null}function v(T,w,E,$){for(var A=null,I=null,D=w,R=w=0,B=null;D!==null&&R<E.length;R++){D.index>R?(B=D,D=null):B=D.sibling;var G=m(T,D,E[R],$);if(G===null){D===null&&(D=B);break}n&&D&&G.alternate===null&&e(T,D),w=o(G,w,R),I===null?A=G:I.sibling=G,I=G,D=B}if(R===E.length)return t(T,D),Fi&&Kp(T,R),A;if(D===null){for(;R<E.length;R++)D=p(T,E[R],$),D!==null&&(w=o(D,w,R),I===null?A=D:I.sibling=D,I=D);return Fi&&Kp(T,R),A}for(D=i(T,D);R<E.length;R++)B=g(D,T,R,E[R],$),B!==null&&(n&&B.alternate!==null&&D.delete(B.key===null?R:B.key),w=o(B,w,R),I===null?A=B:I.sibling=B,I=B);return n&&D.forEach(function(Z){return e(T,Z)}),Fi&&Kp(T,R),A}function y(T,w,E,$){var A=Ey(E);if(typeof A!="function")throw Error(ut(150));if(E=A.call(E),E==null)throw Error(ut(151));for(var I=A=null,D=w,R=w=0,B=null,G=E.next();D!==null&&!G.done;R++,G=E.next()){D.index>R?(B=D,D=null):B=D.sibling;var Z=m(T,D,G.value,$);if(Z===null){D===null&&(D=B);break}n&&D&&Z.alternate===null&&e(T,D),w=o(Z,w,R),I===null?A=Z:I.sibling=Z,I=Z,D=B}if(G.done)return t(T,D),Fi&&Kp(T,R),A;if(D===null){for(;!G.done;R++,G=E.next())G=p(T,G.value,$),G!==null&&(w=o(G,w,R),I===null?A=G:I.sibling=G,I=G);return Fi&&Kp(T,R),A}for(D=i(T,D);!G.done;R++,G=E.next())G=g(D,T,R,G.value,$),G!==null&&(n&&G.alternate!==null&&D.delete(G.key===null?R:G.key),w=o(G,w,R),I===null?A=G:I.sibling=G,I=G);return n&&D.forEach(function(N){return e(T,N)}),Fi&&Kp(T,R),A}function S(T,w,E,$){if(typeof E=="object"&&E!==null&&E.type===l0&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Iw:e:{for(var A=E.key,I=w;I!==null;){if(I.key===A){if(A=E.type,A===l0){if(I.tag===7){t(T,I.sibling),w=r(I,E.props.children),w.return=T,T=w;break e}}else if(I.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Yd&&U5(A)===I.type){t(T,I.sibling),w=r(I,E.props),w.ref=ky(T,I,E),w.return=T,T=w;break e}t(T,I);break}else e(T,I);I=I.sibling}E.type===l0?(w=Rm(E.props.children,T.mode,$,E.key),w.return=T,T=w):($=Nx(E.type,E.key,E.props,null,T.mode,$),$.ref=ky(T,w,E),$.return=T,T=$)}return a(T);case a0:e:{for(I=E.key;w!==null;){if(w.key===I)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){t(T,w.sibling),w=r(w,E.children||[]),w.return=T,T=w;break e}else{t(T,w);break}else e(T,w);w=w.sibling}w=FR(E,T.mode,$),w.return=T,T=w}return a(T);case Yd:return I=E._init,S(T,w,I(E._payload),$)}if(ub(E))return v(T,w,E,$);if(Ey(E))return y(T,w,E,$);Ww(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(t(T,w.sibling),w=r(w,E),w.return=T,T=w):(t(T,w),w=BR(E,T.mode,$),w.return=T,T=w),a(T)):t(T,w)}return S}var iO=OX(!0),vX=OX(!1),mT={},Tu=Xf(mT),lS=Xf(mT),cS=Xf(mT);function gm(n){if(n===mT)throw Error(ut(174));return n}function tB(n,e){switch(yi(cS,e),yi(lS,n),yi(Tu,mT),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=r2(e,n)}Ai(Tu),yi(Tu,e)}function rO(){Ai(Tu),Ai(lS),Ai(cS)}function yX(n){gm(cS.current);var e=gm(Tu.current),t=r2(e,n.type);e!==t&&(yi(lS,n),yi(Tu,t))}function nB(n){lS.current===n&&(Ai(Tu),Ai(lS))}var qi=Xf(0);function R$(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var RR=[];function iB(){for(var n=0;n<RR.length;n++)RR[n]._workInProgressVersionPrimary=null;RR.length=0}var Rx=nd.ReactCurrentDispatcher,MR=nd.ReactCurrentBatchConfig,Hm=0,sr=null,Xr=null,Os=null,M$=!1,Cb=!1,uS=0,mse=0;function no(){throw Error(ut(321))}function rB(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!bc(n[t],e[t]))return!1;return!0}function sB(n,e,t,i,r,o){if(Hm=o,sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rx.current=n===null||n.memoizedState===null?vse:yse,n=t(i,r),Cb){o=0;do{if(Cb=!1,uS=0,25<=o)throw Error(ut(301));o+=1,Os=Xr=null,e.updateQueue=null,Rx.current=bse,n=t(i,r)}while(Cb)}if(Rx.current=P$,e=Xr!==null&&Xr.next!==null,Hm=0,Os=Xr=sr=null,M$=!1,e)throw Error(ut(300));return n}function oB(){var n=uS!==0;return uS=0,n}function cu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Os===null?sr.memoizedState=Os=n:Os=Os.next=n,Os}function Il(){if(Xr===null){var n=sr.alternate;n=n!==null?n.memoizedState:null}else n=Xr.next;var e=Os===null?sr.memoizedState:Os.next;if(e!==null)Os=e,Xr=n;else{if(n===null)throw Error(ut(310));Xr=n,n={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},Os===null?sr.memoizedState=Os=n:Os=Os.next=n}return Os}function hS(n,e){return typeof e=="function"?e(n):e}function PR(n){var e=Il(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var i=Xr,r=i.baseQueue,o=t.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,t.pending=null}if(r!==null){o=r.next,i=i.baseState;var l=a=null,u=null,h=o;do{var d=h.lane;if((Hm&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:n(i,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,a=i):u=u.next=p,sr.lanes|=d,Xm|=d}h=h.next}while(h!==null&&h!==o);u===null?a=i:u.next=l,bc(i,e.memoizedState)||(oa=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do o=r.lane,sr.lanes|=o,Xm|=o,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function DR(n){var e=Il(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,o=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do o=n(o,a.action),a=a.next;while(a!==r);bc(o,e.memoizedState)||(oa=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function bX(){}function SX(n,e){var t=sr,i=Il(),r=e(),o=!bc(i.memoizedState,r);if(o&&(i.memoizedState=r,oa=!0),i=i.queue,aB(EX.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||Os!==null&&Os.memoizedState.tag&1){if(t.flags|=2048,dS(9,wX.bind(null,t,i,r,e),void 0,null),ys===null)throw Error(ut(349));Hm&30||TX(t,e,r)}return r}function TX(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function wX(n,e,t,i){e.value=t,e.getSnapshot=i,xX(e)&&$X(n)}function EX(n,e,t){return t(function(){xX(e)&&$X(n)})}function xX(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!bc(n,t)}catch{return!0}}function $X(n){var e=Hh(n,1);e!==null&&_c(e,n,1,-1)}function G5(n){var e=cu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hS,lastRenderedState:n},e.queue=n,n=n.dispatch=Ose.bind(null,sr,n),[e.memoizedState,n]}function dS(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function CX(){return Il().memoizedState}function Mx(n,e,t,i){var r=cu();sr.flags|=n,r.memoizedState=dS(1|e,t,void 0,i===void 0?null:i)}function KC(n,e,t,i){var r=Il();i=i===void 0?null:i;var o=void 0;if(Xr!==null){var a=Xr.memoizedState;if(o=a.destroy,i!==null&&rB(i,a.deps)){r.memoizedState=dS(e,t,o,i);return}}sr.flags|=n,r.memoizedState=dS(1|e,t,o,i)}function W5(n,e){return Mx(8390656,8,n,e)}function aB(n,e){return KC(2048,8,n,e)}function AX(n,e){return KC(4,2,n,e)}function kX(n,e){return KC(4,4,n,e)}function IX(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function RX(n,e,t){return t=t!=null?t.concat([n]):null,KC(4,4,IX.bind(null,e,n),t)}function lB(){}function MX(n,e){var t=Il();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&rB(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function PX(n,e){var t=Il();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&rB(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function DX(n,e,t){return Hm&21?(bc(t,e)||(t=B8(),sr.lanes|=t,Xm|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,oa=!0),n.memoizedState=t)}function gse(n,e){var t=si;si=t!==0&&4>t?t:4,n(!0);var i=MR.transition;MR.transition={};try{n(!1),e()}finally{si=t,MR.transition=i}}function LX(){return Il().memoizedState}function _se(n,e,t){var i=yf(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},NX(n))BX(e,t);else if(t=pX(n,e,t,i),t!==null){var r=Lo();_c(t,n,i,r),FX(t,e,i)}}function Ose(n,e,t){var i=yf(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(NX(n))BX(e,r);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,t);if(r.hasEagerState=!0,r.eagerState=l,bc(l,a)){var u=e.interleaved;u===null?(r.next=r,KN(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=pX(n,e,r,i),t!==null&&(r=Lo(),_c(t,n,i,r),FX(t,e,i))}}function NX(n){var e=n.alternate;return n===sr||e!==null&&e===sr}function BX(n,e){Cb=M$=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function FX(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,FN(n,t)}}var P$={readContext:kl,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useInsertionEffect:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useSyncExternalStore:no,useId:no,unstable_isNewReconciler:!1},vse={readContext:kl,useCallback:function(n,e){return cu().memoizedState=[n,e===void 0?null:e],n},useContext:kl,useEffect:W5,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Mx(4194308,4,IX.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Mx(4194308,4,n,e)},useInsertionEffect:function(n,e){return Mx(4,2,n,e)},useMemo:function(n,e){var t=cu();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=cu();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=_se.bind(null,sr,n),[i.memoizedState,n]},useRef:function(n){var e=cu();return n={current:n},e.memoizedState=n},useState:G5,useDebugValue:lB,useDeferredValue:function(n){return cu().memoizedState=n},useTransition:function(){var n=G5(!1),e=n[0];return n=gse.bind(null,n[1]),cu().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=sr,r=cu();if(Fi){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),ys===null)throw Error(ut(349));Hm&30||TX(i,e,t)}r.memoizedState=t;var o={value:t,getSnapshot:e};return r.queue=o,W5(EX.bind(null,i,o,n),[n]),i.flags|=2048,dS(9,wX.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=cu(),e=ys.identifierPrefix;if(Fi){var t=Dh,i=Ph;t=(i&~(1<<32-gc(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=uS++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=mse++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},yse={readContext:kl,useCallback:MX,useContext:kl,useEffect:aB,useImperativeHandle:RX,useInsertionEffect:AX,useLayoutEffect:kX,useMemo:PX,useReducer:PR,useRef:CX,useState:function(){return PR(hS)},useDebugValue:lB,useDeferredValue:function(n){var e=Il();return DX(e,Xr.memoizedState,n)},useTransition:function(){var n=PR(hS)[0],e=Il().memoizedState;return[n,e]},useMutableSource:bX,useSyncExternalStore:SX,useId:LX,unstable_isNewReconciler:!1},bse={readContext:kl,useCallback:MX,useContext:kl,useEffect:aB,useImperativeHandle:RX,useInsertionEffect:AX,useLayoutEffect:kX,useMemo:PX,useReducer:DR,useRef:CX,useState:function(){return DR(hS)},useDebugValue:lB,useDeferredValue:function(n){var e=Il();return Xr===null?e.memoizedState=n:DX(e,Xr.memoizedState,n)},useTransition:function(){var n=DR(hS)[0],e=Il().memoizedState;return[n,e]},useMutableSource:bX,useSyncExternalStore:SX,useId:LX,unstable_isNewReconciler:!1};function sO(n,e){try{var t="",i=e;do t+=Yie(i),i=i.return;while(i);var r=t}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:r,digest:null}}function LR(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Sse=typeof WeakMap=="function"?WeakMap:Map;function UX(n,e,t){t=Bh(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){L$||(L$=!0,N2=i),$2(n,e)},t}function GX(n,e,t){t=Bh(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){$2(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){$2(n,e),typeof i!="function"&&(vf===null?vf=new Set([this]):vf.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function z5(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new Sse;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=Lse.bind(null,n,e,t),e.then(n,n))}function Q5(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function V5(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Bh(-1,1),e.tag=2,Of(t,e,1))),t.lanes|=1),n)}var Tse=nd.ReactCurrentOwner,oa=!1;function Ao(n,e,t,i){e.child=n===null?vX(e,null,t,i):iO(e,n.child,t,i)}function H5(n,e,t,i,r){t=t.render;var o=e.ref;return B0(e,r),i=sB(n,e,t,i,o,r),t=oB(),n!==null&&!oa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Xh(n,e,r)):(Fi&&t&&XN(e),e.flags|=1,Ao(n,e,i,r),e.child)}function X5(n,e,t,i,r){if(n===null){var o=t.type;return typeof o=="function"&&!gB(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,WX(n,e,o,i,r)):(n=Nx(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&r)){var a=o.memoizedProps;if(t=t.compare,t=t!==null?t:rS,t(a,i)&&n.ref===e.ref)return Xh(n,e,r)}return e.flags|=1,n=bf(o,i),n.ref=e.ref,n.return=e,e.child=n}function WX(n,e,t,i,r){if(n!==null){var o=n.memoizedProps;if(rS(o,i)&&n.ref===e.ref)if(oa=!1,e.pendingProps=i=o,(n.lanes&r)!==0)n.flags&131072&&(oa=!0);else return e.lanes=n.lanes,Xh(n,e,r)}return C2(n,e,t,i,r)}function zX(n,e,t){var i=e.pendingProps,r=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yi(O0,Pa),Pa|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,yi(O0,Pa),Pa|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,yi(O0,Pa),Pa|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,yi(O0,Pa),Pa|=i;return Ao(n,e,r,t),e.child}function QX(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function C2(n,e,t,i,r){var o=ha(t)?Qm:ho.current;return o=tO(e,o),B0(e,r),t=sB(n,e,t,i,o,r),i=oB(),n!==null&&!oa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Xh(n,e,r)):(Fi&&i&&XN(e),e.flags|=1,Ao(n,e,t,r),e.child)}function j5(n,e,t,i,r){if(ha(t)){var o=!0;x$(e)}else o=!1;if(B0(e,r),e.stateNode===null)Px(n,e),_X(e,t,i),x2(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=t.contextType;typeof h=="object"&&h!==null?h=kl(h):(h=ha(t)?Qm:ho.current,h=tO(e,h));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==h)&&F5(e,a,i,h),Zd=!1;var m=e.memoizedState;a.state=m,I$(e,i,a,r),u=e.memoizedState,l!==i||m!==u||ua.current||Zd?(typeof d=="function"&&(E2(e,t,d,i),u=e.memoizedState),(l=Zd||B5(e,t,l,i,m,u,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=h,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,mX(n,e),l=e.memoizedProps,h=e.type===e.elementType?l:oc(e.type,l),a.props=h,p=e.pendingProps,m=a.context,u=t.contextType,typeof u=="object"&&u!==null?u=kl(u):(u=ha(t)?Qm:ho.current,u=tO(e,u));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||m!==u)&&F5(e,a,i,u),Zd=!1,m=e.memoizedState,a.state=m,I$(e,i,a,r);var v=e.memoizedState;l!==p||m!==v||ua.current||Zd?(typeof g=="function"&&(E2(e,t,g,i),v=e.memoizedState),(h=Zd||B5(e,t,h,i,m,v,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,v,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),a.props=i,a.state=v,a.context=u,i=h):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return A2(n,e,t,i,o,r)}function A2(n,e,t,i,r,o){QX(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&M5(e,t,!1),Xh(n,e,o);i=e.stateNode,Tse.current=e;var l=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=iO(e,n.child,null,o),e.child=iO(e,null,l,o)):Ao(n,e,l,o),e.memoizedState=i.state,r&&M5(e,t,!0),e.child}function VX(n){var e=n.stateNode;e.pendingContext?R5(n,e.pendingContext,e.pendingContext!==e.context):e.context&&R5(n,e.context,!1),tB(n,e.containerInfo)}function Y5(n,e,t,i,r){return nO(),YN(r),e.flags|=256,Ao(n,e,t,i),e.child}var k2={dehydrated:null,treeContext:null,retryLane:0};function I2(n){return{baseLanes:n,cachePool:null,transitions:null}}function HX(n,e,t){var i=e.pendingProps,r=qi.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),yi(qi,r&1),n===null)return T2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=nA(a,i,0,null),n=Rm(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=I2(t),e.memoizedState=k2,n):cB(e,a));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return wse(n,e,a,i,l,r,t);if(o){o=i.fallback,a=e.mode,r=n.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=bf(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=bf(l,o):(o=Rm(o,a,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?I2(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~t,e.memoizedState=k2,i}return o=n.child,n=o.sibling,i=bf(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function cB(n,e){return e=nA({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zw(n,e,t,i){return i!==null&&YN(i),iO(e,n.child,null,t),n=cB(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function wse(n,e,t,i,r,o,a){if(t)return e.flags&256?(e.flags&=-257,i=LR(Error(ut(422))),zw(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=nA({mode:"visible",children:i.children},r,0,null),o=Rm(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&iO(e,n.child,null,a),e.child.memoizedState=I2(a),e.memoizedState=k2,o);if(!(e.mode&1))return zw(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(ut(419)),i=LR(o,i,void 0),zw(n,e,a,i)}if(l=(a&n.childLanes)!==0,oa||l){if(i=ys,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Hh(n,r),_c(i,n,r,-1))}return mB(),i=LR(Error(ut(421))),zw(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=Nse.bind(null,n),r._reactRetry=e,null):(n=o.treeContext,Na=_f(r.nextSibling),Ua=e,Fi=!0,uc=null,n!==null&&(_l[Ol++]=Ph,_l[Ol++]=Dh,_l[Ol++]=Vm,Ph=n.id,Dh=n.overflow,Vm=e),e=cB(e,i.children),e.flags|=4096,e)}function Z5(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),w2(n.return,e,t)}function NR(n,e,t,i,r){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=r)}function XX(n,e,t){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ao(n,e,i.children,t),i=qi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Z5(n,t,e);else if(n.tag===19)Z5(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(yi(qi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&R$(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),NR(e,!1,r,t,o);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&R$(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}NR(e,!0,t,null,o);break;case"together":NR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Px(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Xh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Xm|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ut(153));if(e.child!==null){for(n=e.child,t=bf(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=bf(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Ese(n,e,t){switch(e.tag){case 3:VX(e),nO();break;case 5:yX(e);break;case 1:ha(e.type)&&x$(e);break;case 4:tB(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;yi(A$,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(yi(qi,qi.current&1),e.flags|=128,null):t&e.child.childLanes?HX(n,e,t):(yi(qi,qi.current&1),n=Xh(n,e,t),n!==null?n.sibling:null);yi(qi,qi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return XX(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),yi(qi,qi.current),i)break;return null;case 22:case 23:return e.lanes=0,zX(n,e,t)}return Xh(n,e,t)}var jX,R2,YX,ZX;jX=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};R2=function(){};YX=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,gm(Tu.current);var o=null;switch(t){case"input":r=e2(n,r),i=e2(n,i),o=[];break;case"select":r=or({},r,{value:void 0}),i=or({},i,{value:void 0}),o=[];break;case"textarea":r=i2(n,r),i=i2(n,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=w$)}s2(t,i);var a;t=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var l=r[h];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(qb.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var u=i[h];if(l=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(t||(t={}),t[a]=u[a])}else t||(o||(o=[]),o.push(h,t)),t=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(qb.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&wi("scroll",n),o||l===u||(o=[])):(o=o||[]).push(h,u))}t&&(o=o||[]).push("style",t);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};ZX=function(n,e,t,i){t!==i&&(e.flags|=4)};function Iy(n,e){if(!Fi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function io(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function xse(n,e,t){var i=e.pendingProps;switch(jN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(e),null;case 1:return ha(e.type)&&E$(),io(e),null;case 3:return i=e.stateNode,rO(),Ai(ua),Ai(ho),iB(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Gw(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,uc!==null&&(U2(uc),uc=null))),R2(n,e),io(e),null;case 5:nB(e);var r=gm(cS.current);if(t=e.type,n!==null&&e.stateNode!=null)YX(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ut(166));return io(e),null}if(n=gm(Tu.current),Gw(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[fu]=e,i[aS]=o,n=(e.mode&1)!==0,t){case"dialog":wi("cancel",i),wi("close",i);break;case"iframe":case"object":case"embed":wi("load",i);break;case"video":case"audio":for(r=0;r<db.length;r++)wi(db[r],i);break;case"source":wi("error",i);break;case"img":case"image":case"link":wi("error",i),wi("load",i);break;case"details":wi("toggle",i);break;case"input":s5(i,o),wi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},wi("invalid",i);break;case"textarea":a5(i,o),wi("invalid",i)}s2(t,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Uw(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Uw(i.textContent,l,n),r=["children",""+l]):qb.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&wi("scroll",i)}switch(t){case"input":Rw(i),o5(i,o,!0);break;case"textarea":Rw(i),l5(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=w$)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=T8(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[fu]=e,n[aS]=i,jX(n,e,!1,!1),e.stateNode=n;e:{switch(a=o2(t,i),t){case"dialog":wi("cancel",n),wi("close",n),r=i;break;case"iframe":case"object":case"embed":wi("load",n),r=i;break;case"video":case"audio":for(r=0;r<db.length;r++)wi(db[r],n);r=i;break;case"source":wi("error",n),r=i;break;case"img":case"image":case"link":wi("error",n),wi("load",n),r=i;break;case"details":wi("toggle",n),r=i;break;case"input":s5(n,i),r=e2(n,i),wi("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=or({},i,{value:void 0}),wi("invalid",n);break;case"textarea":a5(n,i),r=i2(n,i),wi("invalid",n);break;default:r=i}s2(t,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?x8(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&w8(n,u)):o==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Jb(n,u):typeof u=="number"&&Jb(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qb.hasOwnProperty(o)?u!=null&&o==="onScroll"&&wi("scroll",n):u!=null&&MN(n,o,u,a))}switch(t){case"input":Rw(n),o5(n,i,!1);break;case"textarea":Rw(n),l5(n);break;case"option":i.value!=null&&n.setAttribute("value",""+kf(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?P0(n,!!i.multiple,o,!1):i.defaultValue!=null&&P0(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=w$)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return io(e),null;case 6:if(n&&e.stateNode!=null)ZX(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ut(166));if(t=gm(cS.current),gm(Tu.current),Gw(e)){if(i=e.stateNode,t=e.memoizedProps,i[fu]=e,(o=i.nodeValue!==t)&&(n=Ua,n!==null))switch(n.tag){case 3:Uw(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Uw(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[fu]=e,e.stateNode=i}return io(e),null;case 13:if(Ai(qi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fi&&Na!==null&&e.mode&1&&!(e.flags&128))fX(),nO(),e.flags|=98560,o=!1;else if(o=Gw(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(ut(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ut(317));o[fu]=e}else nO(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;io(e),o=!1}else uc!==null&&(U2(uc),uc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||qi.current&1?Zr===0&&(Zr=3):mB())),e.updateQueue!==null&&(e.flags|=4),io(e),null);case 4:return rO(),R2(n,e),n===null&&sS(e.stateNode.containerInfo),io(e),null;case 10:return JN(e.type._context),io(e),null;case 17:return ha(e.type)&&E$(),io(e),null;case 19:if(Ai(qi),o=e.memoizedState,o===null)return io(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Iy(o,!1);else{if(Zr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=R$(n),a!==null){for(e.flags|=128,Iy(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return yi(qi,qi.current&1|2),e.child}n=n.sibling}o.tail!==null&&Tr()>oO&&(e.flags|=128,i=!0,Iy(o,!1),e.lanes=4194304)}else{if(!i)if(n=R$(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Iy(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Fi)return io(e),null}else 2*Tr()-o.renderingStartTime>oO&&t!==1073741824&&(e.flags|=128,i=!0,Iy(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(t=o.last,t!==null?t.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Tr(),e.sibling=null,t=qi.current,yi(qi,i?t&1|2:t&1),e):(io(e),null);case 22:case 23:return pB(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Pa&1073741824&&(io(e),e.subtreeFlags&6&&(e.flags|=8192)):io(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function $se(n,e){switch(jN(e),e.tag){case 1:return ha(e.type)&&E$(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return rO(),Ai(ua),Ai(ho),iB(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return nB(e),null;case 13:if(Ai(qi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));nO()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ai(qi),null;case 4:return rO(),null;case 10:return JN(e.type._context),null;case 22:case 23:return pB(),null;case 24:return null;default:return null}}var Qw=!1,co=!1,Cse=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function _0(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){dr(n,e,i)}else t.current=null}function M2(n,e,t){try{t()}catch(i){dr(n,e,i)}}var q5=!1;function Ase(n,e){if(g2=b$,n=eX(),HN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var a=0,l=-1,u=-1,h=0,d=0,p=n,m=null;t:for(;;){for(var g;p!==t||r!==0&&p.nodeType!==3||(l=a+r),p!==o||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++h===r&&(l=a),m===o&&++d===i&&(u=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=l===-1||u===-1?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(_2={focusedElem:n,selectionRange:t},b$=!1,Dt=e;Dt!==null;)if(e=Dt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Dt=n;else for(;Dt!==null;){e=Dt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,S=v.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?y:oc(e.type,y),S);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch($){dr(e,e.return,$)}if(n=e.sibling,n!==null){n.return=e.return,Dt=n;break}Dt=e.return}return v=q5,q5=!1,v}function Ab(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var o=r.destroy;r.destroy=void 0,o!==void 0&&M2(e,t,o)}r=r.next}while(r!==i)}}function eA(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function P2(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function qX(n){var e=n.alternate;e!==null&&(n.alternate=null,qX(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[fu],delete e[aS],delete e[y2],delete e[hse],delete e[dse])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function JX(n){return n.tag===5||n.tag===3||n.tag===4}function J5(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JX(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function D2(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=w$));else if(i!==4&&(n=n.child,n!==null))for(D2(n,e,t),n=n.sibling;n!==null;)D2(n,e,t),n=n.sibling}function L2(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(L2(n,e,t),n=n.sibling;n!==null;)L2(n,e,t),n=n.sibling}var Fs=null,lc=!1;function Ud(n,e,t){for(t=t.child;t!==null;)KX(n,e,t),t=t.sibling}function KX(n,e,t){if(Su&&typeof Su.onCommitFiberUnmount=="function")try{Su.onCommitFiberUnmount(HC,t)}catch{}switch(t.tag){case 5:co||_0(t,e);case 6:var i=Fs,r=lc;Fs=null,Ud(n,e,t),Fs=i,lc=r,Fs!==null&&(lc?(n=Fs,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Fs.removeChild(t.stateNode));break;case 18:Fs!==null&&(lc?(n=Fs,t=t.stateNode,n.nodeType===8?kR(n.parentNode,t):n.nodeType===1&&kR(n,t),nS(n)):kR(Fs,t.stateNode));break;case 4:i=Fs,r=lc,Fs=t.stateNode.containerInfo,lc=!0,Ud(n,e,t),Fs=i,lc=r;break;case 0:case 11:case 14:case 15:if(!co&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&M2(t,e,a),r=r.next}while(r!==i)}Ud(n,e,t);break;case 1:if(!co&&(_0(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(l){dr(t,e,l)}Ud(n,e,t);break;case 21:Ud(n,e,t);break;case 22:t.mode&1?(co=(i=co)||t.memoizedState!==null,Ud(n,e,t),co=i):Ud(n,e,t);break;default:Ud(n,e,t)}}function K5(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Cse),e.forEach(function(i){var r=Bse.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function tc(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Fs=l.stateNode,lc=!1;break e;case 3:Fs=l.stateNode.containerInfo,lc=!0;break e;case 4:Fs=l.stateNode.containerInfo,lc=!0;break e}l=l.return}if(Fs===null)throw Error(ut(160));KX(o,a,r),Fs=null,lc=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(h){dr(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e9(e,n),e=e.sibling}function e9(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(tc(e,n),eu(n),i&4){try{Ab(3,n,n.return),eA(3,n)}catch(y){dr(n,n.return,y)}try{Ab(5,n,n.return)}catch(y){dr(n,n.return,y)}}break;case 1:tc(e,n),eu(n),i&512&&t!==null&&_0(t,t.return);break;case 5:if(tc(e,n),eu(n),i&512&&t!==null&&_0(t,t.return),n.flags&32){var r=n.stateNode;try{Jb(r,"")}catch(y){dr(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var o=n.memoizedProps,a=t!==null?t.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&b8(r,o),o2(l,a);var h=o2(l,o);for(a=0;a<u.length;a+=2){var d=u[a],p=u[a+1];d==="style"?x8(r,p):d==="dangerouslySetInnerHTML"?w8(r,p):d==="children"?Jb(r,p):MN(r,d,p,h)}switch(l){case"input":t2(r,o);break;case"textarea":S8(r,o);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?P0(r,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?P0(r,!!o.multiple,o.defaultValue,!0):P0(r,!!o.multiple,o.multiple?[]:"",!1))}r[aS]=o}catch(y){dr(n,n.return,y)}}break;case 6:if(tc(e,n),eu(n),i&4){if(n.stateNode===null)throw Error(ut(162));r=n.stateNode,o=n.memoizedProps;try{r.nodeValue=o}catch(y){dr(n,n.return,y)}}break;case 3:if(tc(e,n),eu(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{nS(e.containerInfo)}catch(y){dr(n,n.return,y)}break;case 4:tc(e,n),eu(n);break;case 13:tc(e,n),eu(n),r=n.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(dB=Tr())),i&4&&K5(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(co=(h=co)||d,tc(e,n),co=h):tc(e,n),eu(n),i&8192){if(h=n.memoizedState!==null,(n.stateNode.isHidden=h)&&!d&&n.mode&1)for(Dt=n,d=n.child;d!==null;){for(p=Dt=d;Dt!==null;){switch(m=Dt,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ab(4,m,m.return);break;case 1:_0(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){dr(i,t,y)}}break;case 5:_0(m,m.return);break;case 22:if(m.memoizedState!==null){t4(p);continue}}g!==null?(g.return=m,Dt=g):t4(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{r=p.stateNode,h?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=E8("display",a))}catch(y){dr(n,n.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(y){dr(n,n.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tc(e,n),eu(n),i&4&&K5(n);break;case 21:break;default:tc(e,n),eu(n)}}function eu(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(JX(t)){var i=t;break e}t=t.return}throw Error(ut(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jb(r,""),i.flags&=-33);var o=J5(n);L2(n,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,l=J5(n);D2(n,l,a);break;default:throw Error(ut(161))}}catch(u){dr(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kse(n,e,t){Dt=n,t9(n)}function t9(n,e,t){for(var i=(n.mode&1)!==0;Dt!==null;){var r=Dt,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Qw;if(!a){var l=r.alternate,u=l!==null&&l.memoizedState!==null||co;l=Qw;var h=co;if(Qw=a,(co=u)&&!h)for(Dt=r;Dt!==null;)a=Dt,u=a.child,a.tag===22&&a.memoizedState!==null?n4(r):u!==null?(u.return=a,Dt=u):n4(r);for(;o!==null;)Dt=o,t9(o),o=o.sibling;Dt=r,Qw=l,co=h}e4(n)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Dt=o):e4(n)}}function e4(n){for(;Dt!==null;){var e=Dt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:co||eA(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!co)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:oc(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&N5(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}N5(e,a,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&nS(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}co||e.flags&512&&P2(e)}catch(m){dr(e,e.return,m)}}if(e===n){Dt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Dt=t;break}Dt=e.return}}function t4(n){for(;Dt!==null;){var e=Dt;if(e===n){Dt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Dt=t;break}Dt=e.return}}function n4(n){for(;Dt!==null;){var e=Dt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{eA(4,e)}catch(u){dr(e,t,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){dr(e,r,u)}}var o=e.return;try{P2(e)}catch(u){dr(e,o,u)}break;case 5:var a=e.return;try{P2(e)}catch(u){dr(e,a,u)}}}catch(u){dr(e,e.return,u)}if(e===n){Dt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Dt=l;break}Dt=e.return}}var Ise=Math.ceil,D$=nd.ReactCurrentDispatcher,uB=nd.ReactCurrentOwner,Cl=nd.ReactCurrentBatchConfig,Zn=0,ys=null,Dr=null,Hs=0,Pa=0,O0=Xf(0),Zr=0,fS=null,Xm=0,tA=0,hB=0,kb=null,na=null,dB=0,oO=1/0,xh=null,L$=!1,N2=null,vf=null,Vw=!1,rf=null,N$=0,Ib=0,B2=null,Dx=-1,Lx=0;function Lo(){return Zn&6?Tr():Dx!==-1?Dx:Dx=Tr()}function yf(n){return n.mode&1?Zn&2&&Hs!==0?Hs&-Hs:pse.transition!==null?(Lx===0&&(Lx=B8()),Lx):(n=si,n!==0||(n=window.event,n=n===void 0?16:V8(n.type)),n):1}function _c(n,e,t,i){if(50<Ib)throw Ib=0,B2=null,Error(ut(185));dT(n,t,i),(!(Zn&2)||n!==ys)&&(n===ys&&(!(Zn&2)&&(tA|=t),Zr===4&&ef(n,Hs)),da(n,i),t===1&&Zn===0&&!(e.mode&1)&&(oO=Tr()+500,qC&&jf()))}function da(n,e){var t=n.callbackNode;pre(n,e);var i=y$(n,n===ys?Hs:0);if(i===0)t!==null&&h5(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&h5(t),e===1)n.tag===0?fse(i4.bind(null,n)):uX(i4.bind(null,n)),cse(function(){!(Zn&6)&&jf()}),t=null;else{switch(F8(i)){case 1:t=BN;break;case 4:t=L8;break;case 16:t=v$;break;case 536870912:t=N8;break;default:t=v$}t=c9(t,n9.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function n9(n,e){if(Dx=-1,Lx=0,Zn&6)throw Error(ut(327));var t=n.callbackNode;if(F0()&&n.callbackNode!==t)return null;var i=y$(n,n===ys?Hs:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=B$(n,i);else{e=i;var r=Zn;Zn|=2;var o=r9();(ys!==n||Hs!==e)&&(xh=null,oO=Tr()+500,Im(n,e));do try{Pse();break}catch(l){i9(n,l)}while(1);qN(),D$.current=o,Zn=r,Dr!==null?e=0:(ys=null,Hs=0,e=Zr)}if(e!==0){if(e===2&&(r=h2(n),r!==0&&(i=r,e=F2(n,r))),e===1)throw t=fS,Im(n,0),ef(n,i),da(n,Tr()),t;if(e===6)ef(n,i);else{if(r=n.current.alternate,!(i&30)&&!Rse(r)&&(e=B$(n,i),e===2&&(o=h2(n),o!==0&&(i=o,e=F2(n,o))),e===1))throw t=fS,Im(n,0),ef(n,i),da(n,Tr()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ut(345));case 2:em(n,na,xh);break;case 3:if(ef(n,i),(i&130023424)===i&&(e=dB+500-Tr(),10<e)){if(y$(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Lo(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=v2(em.bind(null,n,na,xh),e);break}em(n,na,xh);break;case 4:if(ef(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-gc(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Tr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ise(i/1960))-i,10<i){n.timeoutHandle=v2(em.bind(null,n,na,xh),i);break}em(n,na,xh);break;case 5:em(n,na,xh);break;default:throw Error(ut(329))}}}return da(n,Tr()),n.callbackNode===t?n9.bind(null,n):null}function F2(n,e){var t=kb;return n.current.memoizedState.isDehydrated&&(Im(n,e).flags|=256),n=B$(n,e),n!==2&&(e=na,na=t,e!==null&&U2(e)),n}function U2(n){na===null?na=n:na.push.apply(na,n)}function Rse(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],o=r.getSnapshot;r=r.value;try{if(!bc(o(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ef(n,e){for(e&=~hB,e&=~tA,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-gc(e),i=1<<t;n[t]=-1,e&=~i}}function i4(n){if(Zn&6)throw Error(ut(327));F0();var e=y$(n,0);if(!(e&1))return da(n,Tr()),null;var t=B$(n,e);if(n.tag!==0&&t===2){var i=h2(n);i!==0&&(e=i,t=F2(n,i))}if(t===1)throw t=fS,Im(n,0),ef(n,e),da(n,Tr()),t;if(t===6)throw Error(ut(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,em(n,na,xh),da(n,Tr()),null}function fB(n,e){var t=Zn;Zn|=1;try{return n(e)}finally{Zn=t,Zn===0&&(oO=Tr()+500,qC&&jf())}}function jm(n){rf!==null&&rf.tag===0&&!(Zn&6)&&F0();var e=Zn;Zn|=1;var t=Cl.transition,i=si;try{if(Cl.transition=null,si=1,n)return n()}finally{si=i,Cl.transition=t,Zn=e,!(Zn&6)&&jf()}}function pB(){Pa=O0.current,Ai(O0)}function Im(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,lse(t)),Dr!==null)for(t=Dr.return;t!==null;){var i=t;switch(jN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&E$();break;case 3:rO(),Ai(ua),Ai(ho),iB();break;case 5:nB(i);break;case 4:rO();break;case 13:Ai(qi);break;case 19:Ai(qi);break;case 10:JN(i.type._context);break;case 22:case 23:pB()}t=t.return}if(ys=n,Dr=n=bf(n.current,null),Hs=Pa=e,Zr=0,fS=null,hB=tA=Xm=0,na=kb=null,mm!==null){for(e=0;e<mm.length;e++)if(t=mm[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,o=t.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}t.pending=i}mm=null}return n}function i9(n,e){do{var t=Dr;try{if(qN(),Rx.current=P$,M$){for(var i=sr.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}M$=!1}if(Hm=0,Os=Xr=sr=null,Cb=!1,uS=0,uB.current=null,t===null||t.return===null){Zr=1,fS=e,Dr=null;break}e:{var o=n,a=t.return,l=t,u=e;if(e=Hs,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Q5(a);if(g!==null){g.flags&=-257,V5(g,a,l,o,e),g.mode&1&&z5(o,h,e),e=g,u=h;var v=e.updateQueue;if(v===null){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break e}else{if(!(e&1)){z5(o,h,e),mB();break e}u=Error(ut(426))}}else if(Fi&&l.mode&1){var S=Q5(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),V5(S,a,l,o,e),YN(sO(u,l));break e}}o=u=sO(u,l),Zr!==4&&(Zr=2),kb===null?kb=[o]:kb.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var T=UX(o,u,e);L5(o,T);break e;case 1:l=u;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(vf===null||!vf.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var $=GX(o,l,e);L5(o,$);break e}}o=o.return}while(o!==null)}o9(t)}catch(A){e=A,Dr===t&&t!==null&&(Dr=t=t.return);continue}break}while(1)}function r9(){var n=D$.current;return D$.current=P$,n===null?P$:n}function mB(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),ys===null||!(Xm&268435455)&&!(tA&268435455)||ef(ys,Hs)}function B$(n,e){var t=Zn;Zn|=2;var i=r9();(ys!==n||Hs!==e)&&(xh=null,Im(n,e));do try{Mse();break}catch(r){i9(n,r)}while(1);if(qN(),Zn=t,D$.current=i,Dr!==null)throw Error(ut(261));return ys=null,Hs=0,Zr}function Mse(){for(;Dr!==null;)s9(Dr)}function Pse(){for(;Dr!==null&&!sre();)s9(Dr)}function s9(n){var e=l9(n.alternate,n,Pa);n.memoizedProps=n.pendingProps,e===null?o9(n):Dr=e,uB.current=null}function o9(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=$se(t,e),t!==null){t.flags&=32767,Dr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Zr=6,Dr=null;return}}else if(t=xse(t,e,Pa),t!==null){Dr=t;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=n}while(e!==null);Zr===0&&(Zr=5)}function em(n,e,t){var i=si,r=Cl.transition;try{Cl.transition=null,si=1,Dse(n,e,t,i)}finally{Cl.transition=r,si=i}return null}function Dse(n,e,t,i){do F0();while(rf!==null);if(Zn&6)throw Error(ut(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ut(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(mre(n,o),n===ys&&(Dr=ys=null,Hs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vw||(Vw=!0,c9(v$,function(){return F0(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Cl.transition,Cl.transition=null;var a=si;si=1;var l=Zn;Zn|=4,uB.current=null,Ase(n,t),e9(t,n),tse(_2),b$=!!g2,_2=g2=null,n.current=t,kse(t),ore(),Zn=l,si=a,Cl.transition=o}else n.current=t;if(Vw&&(Vw=!1,rf=n,N$=r),o=n.pendingLanes,o===0&&(vf=null),cre(t.stateNode),da(n,Tr()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(L$)throw L$=!1,n=N2,N2=null,n;return N$&1&&n.tag!==0&&F0(),o=n.pendingLanes,o&1?n===B2?Ib++:(Ib=0,B2=n):Ib=0,jf(),null}function F0(){if(rf!==null){var n=F8(N$),e=Cl.transition,t=si;try{if(Cl.transition=null,si=16>n?16:n,rf===null)var i=!1;else{if(n=rf,rf=null,N$=0,Zn&6)throw Error(ut(331));var r=Zn;for(Zn|=4,Dt=n.current;Dt!==null;){var o=Dt,a=o.child;if(Dt.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Dt=h;Dt!==null;){var d=Dt;switch(d.tag){case 0:case 11:case 15:Ab(8,d,o)}var p=d.child;if(p!==null)p.return=d,Dt=p;else for(;Dt!==null;){d=Dt;var m=d.sibling,g=d.return;if(qX(d),d===h){Dt=null;break}if(m!==null){m.return=g,Dt=m;break}Dt=g}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}Dt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Dt=a;else e:for(;Dt!==null;){if(o=Dt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ab(9,o,o.return)}var T=o.sibling;if(T!==null){T.return=o.return,Dt=T;break e}Dt=o.return}}var w=n.current;for(Dt=w;Dt!==null;){a=Dt;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Dt=E;else e:for(a=w;Dt!==null;){if(l=Dt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eA(9,l)}}catch(A){dr(l,l.return,A)}if(l===a){Dt=null;break e}var $=l.sibling;if($!==null){$.return=l.return,Dt=$;break e}Dt=l.return}}if(Zn=r,jf(),Su&&typeof Su.onPostCommitFiberRoot=="function")try{Su.onPostCommitFiberRoot(HC,n)}catch{}i=!0}return i}finally{si=t,Cl.transition=e}}return!1}function r4(n,e,t){e=sO(t,e),e=UX(n,e,1),n=Of(n,e,1),e=Lo(),n!==null&&(dT(n,1,e),da(n,e))}function dr(n,e,t){if(n.tag===3)r4(n,n,t);else for(;e!==null;){if(e.tag===3){r4(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vf===null||!vf.has(i))){n=sO(t,n),n=GX(e,n,1),e=Of(e,n,1),n=Lo(),e!==null&&(dT(e,1,n),da(e,n));break}}e=e.return}}function Lse(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Lo(),n.pingedLanes|=n.suspendedLanes&t,ys===n&&(Hs&t)===t&&(Zr===4||Zr===3&&(Hs&130023424)===Hs&&500>Tr()-dB?Im(n,0):hB|=t),da(n,e)}function a9(n,e){e===0&&(n.mode&1?(e=Dw,Dw<<=1,!(Dw&130023424)&&(Dw=4194304)):e=1);var t=Lo();n=Hh(n,e),n!==null&&(dT(n,e,t),da(n,t))}function Nse(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),a9(n,t)}function Bse(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ut(314))}i!==null&&i.delete(e),a9(n,t)}var l9;l9=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ua.current)oa=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return oa=!1,Ese(n,e,t);oa=!!(n.flags&131072)}else oa=!1,Fi&&e.flags&1048576&&hX(e,C$,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Px(n,e),n=e.pendingProps;var r=tO(e,ho.current);B0(e,t),r=sB(null,e,i,n,r,t);var o=oB();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ha(i)?(o=!0,x$(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eB(e),r.updater=JC,e.stateNode=r,r._reactInternals=e,x2(e,i,n,t),e=A2(null,e,i,!0,o,t)):(e.tag=0,Fi&&o&&XN(e),Ao(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Px(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Use(i),n=oc(i,n),r){case 0:e=C2(null,e,i,n,t);break e;case 1:e=j5(null,e,i,n,t);break e;case 11:e=H5(null,e,i,n,t);break e;case 14:e=X5(null,e,i,oc(i.type,n),t);break e}throw Error(ut(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:oc(i,r),C2(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:oc(i,r),j5(n,e,i,r,t);case 3:e:{if(VX(e),n===null)throw Error(ut(387));i=e.pendingProps,o=e.memoizedState,r=o.element,mX(n,e),I$(e,i,null,t);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=sO(Error(ut(423)),e),e=Y5(n,e,i,t,r);break e}else if(i!==r){r=sO(Error(ut(424)),e),e=Y5(n,e,i,t,r);break e}else for(Na=_f(e.stateNode.containerInfo.firstChild),Ua=e,Fi=!0,uc=null,t=vX(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(nO(),i===r){e=Xh(n,e,t);break e}Ao(n,e,i,t)}e=e.child}return e;case 5:return yX(e),n===null&&T2(e),i=e.type,r=e.pendingProps,o=n!==null?n.memoizedProps:null,a=r.children,O2(i,r)?a=null:o!==null&&O2(i,o)&&(e.flags|=32),QX(n,e),Ao(n,e,a,t),e.child;case 6:return n===null&&T2(e),null;case 13:return HX(n,e,t);case 4:return tB(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=iO(e,null,i,t):Ao(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:oc(i,r),H5(n,e,i,r,t);case 7:return Ao(n,e,e.pendingProps,t),e.child;case 8:return Ao(n,e,e.pendingProps.children,t),e.child;case 12:return Ao(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,yi(A$,i._currentValue),i._currentValue=a,o!==null)if(bc(o.value,a)){if(o.children===r.children&&!ua.current){e=Xh(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=Bh(-1,t&-t),u.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}o.lanes|=t,u=o.alternate,u!==null&&(u.lanes|=t),w2(o.return,t,e),l.lanes|=t;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ut(341));a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),w2(a,t,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ao(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,B0(e,t),r=kl(r),i=i(r),e.flags|=1,Ao(n,e,i,t),e.child;case 14:return i=e.type,r=oc(i,e.pendingProps),r=oc(i.type,r),X5(n,e,i,r,t);case 15:return WX(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:oc(i,r),Px(n,e),e.tag=1,ha(i)?(n=!0,x$(e)):n=!1,B0(e,t),_X(e,i,r),x2(e,i,r,t),A2(null,e,i,!0,n,t);case 19:return XX(n,e,t);case 22:return zX(n,e,t)}throw Error(ut(156,e.tag))};function c9(n,e){return D8(n,e)}function Fse(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wl(n,e,t,i){return new Fse(n,e,t,i)}function gB(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Use(n){if(typeof n=="function")return gB(n)?1:0;if(n!=null){if(n=n.$$typeof,n===DN)return 11;if(n===LN)return 14}return 2}function bf(n,e){var t=n.alternate;return t===null?(t=wl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Nx(n,e,t,i,r,o){var a=2;if(i=n,typeof n=="function")gB(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case l0:return Rm(t.children,r,o,e);case PN:a=8,r|=8;break;case ZP:return n=wl(12,t,e,r|2),n.elementType=ZP,n.lanes=o,n;case qP:return n=wl(13,t,e,r),n.elementType=qP,n.lanes=o,n;case JP:return n=wl(19,t,e,r),n.elementType=JP,n.lanes=o,n;case O8:return nA(t,r,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case g8:a=10;break e;case _8:a=9;break e;case DN:a=11;break e;case LN:a=14;break e;case Yd:a=16,i=null;break e}throw Error(ut(130,n==null?n:typeof n,""))}return e=wl(a,t,e,r),e.elementType=n,e.type=i,e.lanes=o,e}function Rm(n,e,t,i){return n=wl(7,n,i,e),n.lanes=t,n}function nA(n,e,t,i){return n=wl(22,n,i,e),n.elementType=O8,n.lanes=t,n.stateNode={isHidden:!1},n}function BR(n,e,t){return n=wl(6,n,null,e),n.lanes=t,n}function FR(n,e,t){return e=wl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Gse(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vR(0),this.expirationTimes=vR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vR(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function _B(n,e,t,i,r,o,a,l,u){return n=new Gse(n,e,t,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=wl(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eB(o),n}function Wse(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a0,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function u9(n){if(!n)return If;n=n._reactInternals;e:{if(fg(n)!==n||n.tag!==1)throw Error(ut(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ha(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(n.tag===1){var t=n.type;if(ha(t))return cX(n,t,e)}return e}function h9(n,e,t,i,r,o,a,l,u){return n=_B(t,i,!0,n,r,o,a,l,u),n.context=u9(null),t=n.current,i=Lo(),r=yf(t),o=Bh(i,r),o.callback=e??null,Of(t,o,r),n.current.lanes=r,dT(n,r,i),da(n,i),n}function iA(n,e,t,i){var r=e.current,o=Lo(),a=yf(r);return t=u9(t),e.context===null?e.context=t:e.pendingContext=t,e=Bh(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Of(r,e,a),n!==null&&(_c(n,r,a,o),Ix(n,r,a)),a}function F$(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function s4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function OB(n,e){s4(n,e),(n=n.alternate)&&s4(n,e)}function zse(){return null}var d9=typeof reportError=="function"?reportError:function(n){console.error(n)};function vB(n){this._internalRoot=n}rA.prototype.render=vB.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ut(409));iA(n,e,null,null)};rA.prototype.unmount=vB.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;jm(function(){iA(null,n,null,null)}),e[Vh]=null}};function rA(n){this._internalRoot=n}rA.prototype.unstable_scheduleHydration=function(n){if(n){var e=W8();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Kd.length&&e!==0&&e<Kd[t].priority;t++);Kd.splice(t,0,n),t===0&&Q8(n)}};function yB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function o4(){}function Qse(n,e,t,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var h=F$(a);o.call(h)}}var a=h9(e,i,n,0,null,!1,!1,"",o4);return n._reactRootContainer=a,n[Vh]=a.current,sS(n.nodeType===8?n.parentNode:n),jm(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var h=F$(u);l.call(h)}}var u=_B(n,0,!1,null,null,!1,!1,"",o4);return n._reactRootContainer=u,n[Vh]=u.current,sS(n.nodeType===8?n.parentNode:n),jm(function(){iA(e,u,t,i)}),u}function oA(n,e,t,i,r){var o=t._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var l=r;r=function(){var u=F$(a);l.call(u)}}iA(e,a,n,r)}else a=Qse(t,e,n,r,i);return F$(a)}U8=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=hb(e.pendingLanes);t!==0&&(FN(e,t|1),da(e,Tr()),!(Zn&6)&&(oO=Tr()+500,jf()))}break;case 13:jm(function(){var i=Hh(n,1);if(i!==null){var r=Lo();_c(i,n,1,r)}}),OB(n,1)}};UN=function(n){if(n.tag===13){var e=Hh(n,134217728);if(e!==null){var t=Lo();_c(e,n,134217728,t)}OB(n,134217728)}};G8=function(n){if(n.tag===13){var e=yf(n),t=Hh(n,e);if(t!==null){var i=Lo();_c(t,n,e,i)}OB(n,e)}};W8=function(){return si};z8=function(n,e){var t=si;try{return si=n,e()}finally{si=t}};l2=function(n,e,t){switch(e){case"input":if(t2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=ZC(i);if(!r)throw Error(ut(90));y8(i),t2(i,r)}}}break;case"textarea":S8(n,t);break;case"select":e=t.value,e!=null&&P0(n,!!t.multiple,e,!1)}};A8=fB;k8=jm;var Vse={usingClientEntryPoint:!1,Events:[pT,d0,ZC,$8,C8,fB]},Ry={findFiberByHostInstance:pm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Hse={bundleType:Ry.bundleType,version:Ry.version,rendererPackageName:Ry.rendererPackageName,rendererConfig:Ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nd.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=M8(n),n===null?null:n.stateNode},findFiberByHostInstance:Ry.findFiberByHostInstance||zse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hw.isDisabled&&Hw.supportsFiber)try{HC=Hw.inject(Hse),Su=Hw}catch{}}ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vse;ja.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yB(e))throw Error(ut(200));return Wse(n,e,null,t)};ja.createRoot=function(n,e){if(!yB(n))throw Error(ut(299));var t=!1,i="",r=d9;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=_B(n,1,!1,null,null,t,!1,i,r),n[Vh]=e.current,sS(n.nodeType===8?n.parentNode:n),new vB(e)};ja.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ut(188)):(n=Object.keys(n).join(","),Error(ut(268,n)));return n=M8(e),n=n===null?null:n.stateNode,n};ja.flushSync=function(n){return jm(n)};ja.hydrate=function(n,e,t){if(!sA(e))throw Error(ut(200));return oA(null,n,e,!0,t)};ja.hydrateRoot=function(n,e,t){if(!yB(n))throw Error(ut(405));var i=t!=null&&t.hydratedSources||null,r=!1,o="",a=d9;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=h9(e,null,n,1,t??null,r,!1,o,a),n[Vh]=e.current,sS(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new rA(e)};ja.render=function(n,e,t){if(!sA(e))throw Error(ut(200));return oA(null,n,e,!1,t)};ja.unmountComponentAtNode=function(n){if(!sA(n))throw Error(ut(40));return n._reactRootContainer?(jm(function(){oA(null,null,n,!1,function(){n._reactRootContainer=null,n[Vh]=null})}),!0):!1};ja.unstable_batchedUpdates=fB;ja.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!sA(t))throw Error(ut(200));if(n==null||n._reactInternals===void 0)throw Error(ut(38));return oA(n,e,t,!1,i)};ja.version="18.2.0-next-9e3b772b8-20220608";function f9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f9)}catch(n){console.error(n)}}f9(),h8.exports=ja;var bB=h8.exports,a4=bB;jP.createRoot=a4.createRoot,jP.hydrateRoot=a4.hydrateRoot;const Xse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jse=Xse?q.useLayoutEffect:()=>{};var Rb=jse;let Yse=0;function SB(n=null){const e=typeof q.useId=="function"?q.useId():null,t=q.useRef(n||e||null);return t.current===null&&(t.current=""+Yse++),t.current}const aA=q.createContext(null);aA.displayName="PanelGroupContext";function p9({children:n=null,className:e="",collapsible:t=!1,defaultSize:i=null,forwardedRef:r,id:o=null,maxSize:a=100,minSize:l=10,onCollapse:u=null,onResize:h=null,order:d=null,style:p={},tagName:m="div"}){const g=q.useContext(aA);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const v=SB(o),{collapsePanel:y,expandPanel:S,getPanelStyle:T,registerPanel:w,resizePanel:E,unregisterPanel:$}=g,A=q.useRef({onCollapse:u,onResize:h});if(q.useEffect(()=>{A.current.onCollapse=u,A.current.onResize=h}),l<0||l>100)throw Error(`Panel minSize must be between 0 and 100, but was ${l}`);if(a<0||a>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${a}`);if(i!==null){if(i<0||i>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${i}`);l>i&&!t&&(console.error(`Panel minSize ${l} cannot be greater than defaultSize ${i}`),i=l)}Rb(()=>(w(v,{callbacksRef:A,collapsible:t,defaultSize:i,id:v,maxSize:a,minSize:l,order:d}),()=>{$(v)}),[t,i,v,a,l,d,w,$]);const I=T(v),D=q.useRef({size:l4(I)});return Rb(()=>{D.current.size=l4(I)}),q.useImperativeHandle(r,()=>({collapse:()=>y(v),expand:()=>S(v),getCollapsed(){return D.current.size===0},getSize(){return D.current.size},resize:R=>E(v,R)}),[y,S,v,E]),q.createElement(m,{children:n,className:e,"data-panel":"","data-panel-collapsible":t||void 0,"data-panel-id":v,"data-panel-size":parseFloat(""+I.flexGrow).toFixed(1),id:`data-panel-id-${v}`,style:{...I,...p}})}const tm=q.forwardRef((n,e)=>q.createElement(p9,{...n,forwardedRef:e}));p9.displayName="Panel";tm.displayName="forwardRef(Panel)";function l4(n){const{flexGrow:e}=n;return typeof e=="string"?parseFloat(e):e}function m9(n){return n.map(e=>{const{minSize:t,order:i}=e;return i?`${i}:${t}`:`${t}`}).sort((e,t)=>e.localeCompare(t)).join(",")}function g9(n,e){try{const t=e.getItem(`PanelGroup:sizes:${n}`);if(t){const i=JSON.parse(t);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Zse(n,e,t){const i=g9(n,t);if(i){const o=m9(e);var r;return(r=i[o])!==null&&r!==void 0?r:null}return null}function qse(n,e,t,i){const r=m9(e),o=g9(n,i)||{};o[r]=t;try{i.setItem(`PanelGroup:sizes:${n}`,JSON.stringify(o))}catch(a){console.error(a)}}const Ym=10;function fb(n,e,t,i,r,o,a,l){const{sizes:u}=l||{},h=u||o;if(r===0)return h;const d=ac(e),p=h.concat();let m=0;{const y=r<0?i:t,S=d.findIndex($=>$.id===y),T=d[S],w=h[S],E=c4(T,Math.abs(r),w,n);if(w===E)return h;E===0&&w>0&&a.set(y,w),r=r<0?w-E:E-w}let g=r<0?t:i,v=d.findIndex(y=>y.id===g);for(;;){const y=d[v],S=h[v],T=Math.abs(r)-Math.abs(m),w=c4(y,0-T,S,n);if(S!==w&&(w===0&&S>0&&a.set(y.id,S),m+=S-w,p[v]=w,m.toPrecision(Ym).localeCompare(Math.abs(r).toPrecision(Ym),void 0,{numeric:!0})>=0))break;if(r<0){if(--v<0)break}else if(++v>=d.length)break}return m===0?h:(g=r<0?i:t,v=d.findIndex(y=>y.id===g),p[v]=h[v]+m,p)}function My(n,e,t){t.forEach((i,r)=>{const o=e[r];if(o!==i){const{callbacksRef:a,collapsible:l}=n[r],{onCollapse:u,onResize:h}=a.current;h&&h(i),l&&u&&(!o&&i!==0?u(!1):o!==0&&i===0&&u(!0))}})}function UR(n,e){if(e.length<2)return[null,null];const t=e.findIndex(a=>a.id===n);if(t<0)return[null,null];const i=t===e.length-1,r=i?e[t-1].id:n,o=i?n:e[t+1].id;return[r,o]}function _9(n,e,t){if(n.size===1)return"100";const r=ac(n).findIndex(a=>a.id===e),o=t[r];return o==null?"0":o.toPrecision(Ym)}function Jse(n){const e=document.querySelector(`[data-panel-id="${n}"]`);return e||null}function TB(n){const e=document.querySelector(`[data-panel-group-id="${n}"]`);return e||null}function lA(n){const e=document.querySelector(`[data-panel-resize-handle-id="${n}"]`);return e||null}function Kse(n){const t=O9().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===n);return t??null}function O9(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function v9(n){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${n}"]`))}function wB(n,e,t){var i,r;const o=lA(e),l=v9(n).indexOf(o);var u;const h=(u=(i=t[l])===null||i===void 0?void 0:i.id)!==null&&u!==void 0?u:null;var d;const p=(d=(r=t[l+1])===null||r===void 0?void 0:r.id)!==null&&d!==void 0?d:null;return[h,p]}function ac(n){return Array.from(n.values()).sort((e,t)=>e.order-t.order)}function c4(n,e,t,i){const r=t+e;if(n.collapsible)if(t>0){if(r<=0)return 0}else{var o;if(!(i==null||(o=i.type)===null||o===void 0?void 0:o.startsWith("key"))&&r<n.minSize)return 0}return Math.min(n.maxSize,Math.max(n.minSize,r))}function y9(n,e,t,i=0,r=null){const o=t==="horizontal";let a=0;if(G2(n))a=o?n.clientX:n.clientY;else if(W2(n)){const d=n.touches[0];a=o?d.screenX:d.screenY}else return 0;const l=lA(e),u=r||l.getBoundingClientRect(),h=o?u.left:u.top;return a-h-i}function eoe(n,e,t,i,r,o,a){const{dragOffset:l=0,dragHandleRect:u,sizes:h}=a||{},d=h||o;if(toe(n)){const p=r==="horizontal",g=TB(e).getBoundingClientRect(),v=p?g.width:g.height,y=n.shiftKey?10:100,S=v/y;let T=0;switch(n.key){case"ArrowDown":T=p?0:S;break;case"ArrowLeft":T=p?-S:0;break;case"ArrowRight":T=p?S:0;break;case"ArrowUp":T=p?0:-S;break;case"End":T=v;break;case"Home":T=-v;break}const[w,E]=wB(e,t,i),$=T<0?w:E,A=i.findIndex(D=>D.id===$),I=i[A];if(I.collapsible){const D=d[A];(D===0||D.toPrecision(Ym)===I.minSize.toPrecision(Ym))&&(T=T<0?-I.minSize*v:I.minSize*v)}return T}else return y9(n,t,r,l,u)}function toe(n){return n.type==="keydown"}function G2(n){return n.type.startsWith("mouse")}function W2(n){return n.type.startsWith("touch")}function noe({committedValuesRef:n,groupId:e,panels:t,setSizes:i,sizes:r,panelSizeBeforeCollapse:o}){q.useEffect(()=>{const{direction:a,panels:l}=n.current,u=TB(e),{height:h,width:d}=u.getBoundingClientRect(),m=v9(e).map(g=>{const v=g.getAttribute("data-panel-resize-handle-id"),y=ac(l),[S,T]=wB(e,v,y);if(S==null||T==null)return()=>{};let w=0,E=100,$=0,A=0;y.forEach(Z=>{Z.id===S?(E=Z.maxSize,w=Z.minSize):($+=Z.minSize,A+=Z.maxSize)});const I=Math.min(E,100-$),D=Math.max(w,(y.length-1)*100-A),R=_9(l,S,r);g.setAttribute("aria-valuemax",""+Math.round(I)),g.setAttribute("aria-valuemin",""+Math.round(D)),g.setAttribute("aria-valuenow",""+Math.round(parseInt(R)));const B=Z=>{switch(Z.key){case"Enter":{const N=y.findIndex(H=>H.id===S);if(N>=0){const H=y[N],M=r[N];if(M!=null){let K=0;M.toPrecision(Ym)<=H.minSize.toPrecision(Ym)?K=a==="horizontal"?d:h:K=-(a==="horizontal"?d:h);const re=fb(Z,l,S,T,K,r,o.current,null);r!==re&&i(re)}}break}}};g.addEventListener("keydown",B);const G=Jse(S);return G!=null&&g.setAttribute("aria-controls",G.id),()=>{g.removeAttribute("aria-valuemax"),g.removeAttribute("aria-valuemin"),g.removeAttribute("aria-valuenow"),g.removeEventListener("keydown",B),G!=null&&g.removeAttribute("aria-controls")}});return()=>{m.forEach(g=>g())}},[e,t,r])}function ioe({disabled:n,handleId:e,resizeHandler:t}){q.useEffect(()=>{if(n||t==null)return;const i=lA(e);if(i==null)return;const r=o=>{switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":t(o);break;case"F6":{const a=O9(),l=Kse(e),u=o.shiftKey?l>0?l-1:a.length-1:l+1<a.length?l+1:0;a[u].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[n,e,t])}let z2=null,_m=null;function b9(n){switch(n){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function roe(){_m!==null&&(document.head.removeChild(_m),z2=null,_m=null)}function GR(n){if(z2===n)return;z2=n;const e=b9(n);_m===null&&(_m=document.createElement("style"),document.head.appendChild(_m)),_m.innerHTML=`*{cursor: ${e}!important;}`}function soe(n,e=10){let t=null;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}function ooe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const aoe=soe(qse,100);function u4(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const loe={getItem:typeof localStorage<"u"?n=>localStorage.getItem(n):u4,setItem:typeof localStorage<"u"?(n,e)=>localStorage.setItem(n,e):u4};function Bx({autoSaveId:n,children:e=null,className:t="",direction:i,disablePointerEventsDuringResize:r=!1,id:o=null,onLayout:a=null,storage:l=loe,style:u={},tagName:h="div"}){const d=SB(o),[p,m]=q.useState(null),[g,v]=q.useState(new Map),y=q.useRef(null),S=q.useRef({onLayout:a});q.useEffect(()=>{S.current.onLayout=a});const[T,w]=q.useState([]),E=q.useRef(new Map),$=q.useRef(0),A=q.useRef({direction:i,panels:g,sizes:T});Rb(()=>{A.current.direction=i,A.current.panels=g,A.current.sizes=T}),noe({committedValuesRef:A,groupId:d,panels:g,setSizes:w,sizes:T,panelSizeBeforeCollapse:E}),q.useEffect(()=>{const{onLayout:re}=S.current;if(re){const{sizes:ce}=A.current;ce.length>0&&re(ce)}},[T]);const I=q.useRef(!1);Rb(()=>{if(I.current)return;const{panels:re,sizes:ce}=A.current;if(ce.length>0){I.current=!0;const X=ac(re);My(X,[],ce)}},[T]),Rb(()=>{if(A.current.sizes.length===g.size)return;let ce;if(n){const X=ac(g);ce=Zse(n,X,l)}if(ce!=null)w(ce);else{const X=ac(g);let Q=0,ee=0,z=0;if(X.forEach(L=>{z+=L.minSize,L.defaultSize===null?Q++:ee+=L.defaultSize}),ee>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(z>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");w(X.map(L=>L.defaultSize===null?(100-ee)/Q:L.defaultSize))}},[n,g]),q.useEffect(()=>{if(n){if(T.length===0||T.length!==g.size)return;const re=ac(g);aoe(n,re,T,l)}},[n,g,T]);const D=q.useCallback(re=>{const{panels:ce}=A.current;return ce.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:_9(ce,re,T),flexShrink:1,overflow:"hidden",pointerEvents:r&&p!==null?"none":void 0}},[p,i,T]),R=q.useCallback((re,ce)=>{v(X=>{if(X.has(re))return X;const Q=new Map(X);return Q.set(re,ce),Q})},[]),B=q.useCallback(re=>X=>{X.preventDefault();const{direction:Q,panels:ee,sizes:z}=A.current,L=ac(ee),[le,de]=wB(d,re,L);if(le==null||de==null)return;const ie=eoe(X,d,re,L,Q,z,y.current);if(ie===0)return;const ye=TB(d).getBoundingClientRect(),xe=Q==="horizontal",Fe=xe?ye.width:ye.height,Xe=ie/Fe*100,Ue=fb(X,ee,le,de,Xe,z,E.current,y.current),we=!ooe(z,Ue);(G2(X)||W2(X))&&$.current!=Xe&&GR(we?xe?"horizontal":"vertical":xe?ie<0?"horizontal-min":"horizontal-max":ie<0?"vertical-min":"vertical-max"),we&&(My(L,z,Ue),w(Ue)),$.current=Xe},[d]),G=q.useCallback(re=>{v(ce=>{if(!ce.has(re))return ce;const X=new Map(ce);return X.delete(re),X})},[]),Z=q.useCallback(re=>{const{panels:ce,sizes:X}=A.current,Q=ce.get(re);if(Q==null||!Q.collapsible)return;const ee=ac(ce),z=ee.indexOf(Q);if(z<0)return;const L=X[z];if(L===0)return;E.current.set(re,L);const[le,de]=UR(re,ee);if(le==null||de==null)return;const Ce=z===ee.length-1?L:0-L,ye=fb(null,ce,le,de,Ce,X,E.current,null);X!==ye&&(My(ee,X,ye),w(ye))},[]),N=q.useCallback(re=>{const{panels:ce,sizes:X}=A.current,Q=ce.get(re);if(Q==null)return;const ee=E.current.get(re)||Q.minSize;if(!ee)return;const z=ac(ce),L=z.indexOf(Q);if(L<0||X[L]!==0)return;const[de,ie]=UR(re,z);if(de==null||ie==null)return;const ye=L===z.length-1?0-ee:ee,xe=fb(null,ce,de,ie,ye,X,E.current,null);X!==xe&&(My(z,X,xe),w(xe))},[]),H=q.useCallback((re,ce)=>{const{panels:X,sizes:Q}=A.current,ee=X.get(re);if(ee==null)return;const z=ac(X),L=z.indexOf(ee);if(L<0)return;const le=Q[L];if(le===ce)return;ee.collapsible&&ce===0||(ce=Math.min(ee.maxSize,Math.max(ee.minSize,ce)));const[de,ie]=UR(re,z);if(de==null||ie==null)return;const ye=L===z.length-1?le-ce:ce-le,xe=fb(null,X,de,ie,ye,Q,E.current,null);Q!==xe&&(My(z,Q,xe),w(xe))},[]),M=q.useMemo(()=>({activeHandleId:p,collapsePanel:Z,direction:i,expandPanel:N,getPanelStyle:D,groupId:d,registerPanel:R,registerResizeHandle:B,resizePanel:H,startDragging:(re,ce)=>{if(m(re),G2(ce)||W2(ce)){const X=lA(re);y.current={dragHandleRect:X.getBoundingClientRect(),dragOffset:y9(ce,re,i),sizes:A.current.sizes}}},stopDragging:()=>{roe(),m(null),y.current=null},unregisterPanel:G}),[p,Z,i,N,D,d,R,B,H,G]),K={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return q.createElement(aA.Provider,{children:q.createElement(h,{children:e,className:t,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":d,style:{...K,...u}}),value:M})}Bx.displayName="PanelGroup";function Fx({children:n=null,className:e="",disabled:t=!1,id:i=null,style:r={},tagName:o="div"}){const a=q.useRef(null),l=q.useContext(aA);if(l===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:u,direction:h,groupId:d,registerResizeHandle:p,startDragging:m,stopDragging:g}=l,v=SB(i),y=u===v,[S,T]=q.useState(!1),[w,E]=q.useState(null),$=q.useCallback(()=>{a.current.blur(),g()},[g]);q.useEffect(()=>{if(t)E(null);else{const I=p(v);E(()=>I)}},[t,v,p]),q.useEffect(()=>{if(t||w==null||!y)return;const I=D=>{w(D)};return document.body.addEventListener("contextmenu",$),document.body.addEventListener("mousemove",I),document.body.addEventListener("touchmove",I),window.addEventListener("mouseup",$),window.addEventListener("touchend",$),()=>{document.body.removeEventListener("contextmenu",$),document.body.removeEventListener("mousemove",I),document.body.removeEventListener("touchmove",I),window.removeEventListener("mouseup",$),window.removeEventListener("touchend",$)}},[h,t,y,w,$]),ioe({disabled:t,handleId:v,resizeHandler:w});const A={cursor:b9(h),touchAction:"none",userSelect:"none"};return q.createElement(o,{children:n,className:e,"data-resize-handle-active":y?"pointer":S?"keyboard":void 0,"data-panel-group-direction":h,"data-panel-group-id":d,"data-panel-resize-handle-enabled":!t,"data-panel-resize-handle-id":v,onBlur:()=>T(!1),onFocus:()=>T(!0),onMouseDown:I=>m(v,I.nativeEvent),onMouseUp:$,onTouchCancel:$,onTouchEnd:$,onTouchStart:I=>m(v,I.nativeEvent),ref:a,role:"separator",style:{...A,...r},tabIndex:0})}Fx.displayName="PanelResizeHandle";var S9={exports:{}},WR={exports:{}},zR={exports:{}},QR={exports:{}},h4;function cA(){return h4||(h4=1,function(n,e){(function(t,i){n.exports=i()})(Ki,function(){var t={},i=function(s,c,f,_){s=s+" was deprecated in "+c+" and will be deleted in "+f+".",_&&(s+=`
Use `+_+" instead."),console.warn(s)},r=function(s,c){o(),xp=setTimeout(function(){c&&c.handleRightClick(s)},Mk)},o=function(){xp&&(clearTimeout(xp),xp=0)},a=function(){Ep=null},l=function(s){return!s.type.startsWith("pointer")||s instanceof PointerEvent&&h(s)},u=function(s){return`${s.pointerId}`},h=function(s){const c=u(s);return Ep?Ep===c:s.type==="pointerdown"?(Ep=c,!0):!1},d=function(s){if(i("setClientFromTouch()","version 9","version 10"),s.type.startsWith("touch")&&s.changedTouches){const c=s.changedTouches[0];s.clientX=c.clientX,s.clientY=c.clientY}},p=function(s){return i("isMouseOrTouchEvent()","version 9","version 10"),s.type.startsWith("touch")||s.type.startsWith("mouse")||s.type.startsWith("pointer")},m=function(s){return i("isTouchEvent()","version 9","version 10"),s.type.startsWith("touch")||s.type.startsWith("pointer")},g=function(s){i("splitEventByTouches()","version 9","version 10");const c=[];if(s.changedTouches)for(let f=0;f<s.changedTouches.length;f++)c[f]={type:s.type,changedTouches:[s.changedTouches[f]],target:s.target,stopPropagation(){s.stopPropagation()},preventDefault(){s.preventDefault()}};else c.push(s);return c},v=function(s,c,f,_,x,P){function J(be){(x||l(be))&&(f?_.call(f,be):_(be))}if(P!==void 0&&i("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),P=[],c in Qc)for(let be=0;be<Qc[c].length;be++){const tt=Qc[c][be];s.addEventListener(tt,J,!1),P.push([s,tt,J])}else s.addEventListener(c,J,!1),P.push([s,c,J]);return P},y=function(s,c,f,_){function x(J){f?_.call(f,J):_(J)}const P=[];if(c in Qc)for(let J=0;J<Qc[c].length;J++){const be=Qc[c][J];s.addEventListener(be,x,!1),P.push([s,be,x])}else s.addEventListener(c,x,!1),P.push([s,c,x]);return P},S=function(s){const c=s[s.length-1][2];for(;s.length;){const f=s.pop();f[0].removeEventListener(f[1],f[2],!1)}return c},T=function(s){if(s.target instanceof HTMLElement){if(s.target.isContentEditable||s.target.getAttribute("data-is-text-input")==="true")return!0;if(s.target instanceof HTMLInputElement)return s=s.target,s.type==="text"||s.type==="number"||s.type==="email"||s.type==="password"||s.type==="search"||s.type==="tel"||s.type==="url";if(s.target instanceof HTMLTextAreaElement)return!0}return!1},w=function(s){return s.ctrlKey&&zt?!0:s.button===2},E=function(s,c,f){const _=c.createSVGPoint();return _.x=s.clientX,_.y=s.clientY,f||(f=c.getScreenCTM().inverse()),_.matrixTransform(f)},$=function(s){switch(s.deltaMode){default:return{x:s.deltaX,y:s.deltaY};case 1:return{x:s.deltaX*je,y:s.deltaY*je};case 2:return{x:s.deltaX*Be,y:s.deltaY*Be}}},A=function(s){return Nt[s]||null},I=function(){const s=[];for(const c in Nt)s.push(Nt[c]);return s},D=function(s){Nt[s.id]=s},R=function(s){delete Nt[s.id]},B=function(){return _n},G=function(s){_n=s},Z=function(){return un},N=function(s){un=s},H=function(){return Ln},M=function(s){Ln=s},K=function(s){for(;s.options.parentWorkspace;)s=s.options.parentWorkspace;const c=s.getParentSvg(),f=s.getCachedParentSvgSize();var _=c.parentElement;if(_ instanceof HTMLElement){var x=_.offsetWidth;_=_.offsetHeight,f.width!==x&&(c.setAttribute("width",x+"px"),s.setCachedParentSvgSize(x,null)),f.height!==_&&(c.setAttribute("height",_+"px"),s.setCachedParentSvgSize(null,_)),s.resize()}},re=function(s,c){const f=Object.create(null),_=s.getDescendants(!0);c&&(s=s.getNextBlock())&&(s=_.indexOf(s),_.splice(s,_.length-s));for(let x=0,P;P=_[x];x++)f[P.type]?f[P.type]++:f[P.type]=1;return f},ce=function(s){return function(){this.jsonInit(s)}},X=function(s){Rn.defineBlocksWithJsonArrayInternal(s)},Q=function(s){z(ee(s))},ee=function(s){const c={};for(let f=0;f<s.length;f++){const _=s[f];if(!_){console.warn(`Block definition #${f} in JSON array is ${_}. Skipping`);continue}const x=_.type;x?c[x]={init:ce(_)}:console.warn(`Block definition #${f} in JSON array is missing a type attribute. Skipping.`)}return c},z=function(s){for(const c of Object.keys(s)){const f=s[c];c in gt&&console.warn(`Block definiton "${c}" overwrites previous definition.`),gt[c]=f}},L=function(s,c,f){s=document.createElementNS(So,String(s));for(const _ in c)s.setAttribute(_,`${c[_]}`);return f&&f.appendChild(s),s},le=function(s,c){return c=c.split(" "),c.every(f=>s.classList.contains(f))?!1:(s.classList.add(...c),!0)},de=function(s,c){s.classList.remove(...c.split(" "))},ie=function(s,c){return c=c.split(" "),c.every(f=>!s.classList.contains(f))?!1:(s.classList.remove(...c),!0)},Ce=function(s,c){return s.classList.contains(c)},ye=function(s){return s&&s.parentNode?s.parentNode.removeChild(s):null},xe=function(s,c){const f=c.nextSibling;if(c=c.parentNode,!c)throw Error("Reference node has no parent.");f?c.insertBefore(s,f):c.appendChild(s)},Fe=function(s,c){return!!(s.compareDocumentPosition(c)&Vc.DOCUMENT_POSITION_CONTAINED_BY)},Xe=function(s,c){s.style.transform=c,s.style["-webkit-transform"]=c},Ue=function(){Pk++,Vl||(Vl=Object.create(null))},we=function(){Pk--,Pk||(Vl=null)},Ge=function(s){const c=s.textContent+`
`+s.className.baseVal;let f;if(Vl&&(f=Vl[c]))return f;try{f=s.getComputedTextLength()}catch{return 8*s.textContent.length}return Vl&&(Vl[c]=f),f},W=function(s,c,f,_){return Ee(s,c+"pt",f,_)},Ee=function(s,c,f,_){const x=s.textContent;s=x+`
`+s.className.baseVal;var P;return Vl&&(P=Vl[s])||(Y1||(P=document.createElement("canvas"),P.className="blocklyComputeCanvas",document.body.appendChild(P),Y1=P.getContext("2d")),Y1.font=f+" "+c+" "+_,P=x?Y1.measureText(x).width:0,Vl&&(Vl[s]=P)),P},Oe=function(s,c,f,_){const x=document.createElement("span");x.style.font=f+" "+c+" "+_,x.textContent=s,s=document.createElement("div"),s.style.width="1px",s.style.height="0",c=document.createElement("div"),c.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),c.appendChild(x),c.appendChild(s),document.body.appendChild(c),f={height:0,baseline:0};try{c.style.alignItems="baseline",f.baseline=s.offsetTop-x.offsetTop,c.style.alignItems="flex-end",f.height=s.offsetTop-x.offsetTop}finally{document.body.removeChild(c)}return f},ae=function(s){return s*Math.PI/180},ne=function(s){return 180*s/Math.PI},pe=function(s,c,f){if(f<s){const _=f;f=s,s=_}return Math.max(s,Math.min(c,f))},Ae=function(s){return uU.getSizeInternal(s)},Te=function(s){if(Y(s,"display")!=="none")return j(s);const c=s.style,f=c.display,_=c.visibility,x=c.position;c.visibility="hidden",c.position="absolute",c.display="inline";const P=s.offsetWidth;return s=s.offsetHeight,c.display=f,c.position=x,c.visibility=_,new ps(P,s)},j=function(s){return new ps(s.offsetWidth,s.offsetHeight)},Y=function(s,c){return s=window.getComputedStyle(s),s[c]||s.getPropertyValue(c)},ue=function(s,c){return i("Blockly.utils.style.getCascadedStyle","version 9","version 10"),s.currentStyle?s.currentStyle[c]:""},me=function(s){const c=new _t(0,0);s=s.getBoundingClientRect();var f=document.documentElement;return f=new _t(window.pageXOffset||f.scrollLeft,window.pageYOffset||f.scrollTop),c.x=s.left+f.x,c.y=s.top+f.y,c},Ie=function(){const s=document.body,c=document.documentElement;return new _t(s.scrollLeft||c.scrollLeft,s.scrollTop||c.scrollTop)},ze=function(s){const c=parseFloat(Y(s,"borderLeftWidth")),f=parseFloat(Y(s,"borderRightWidth")),_=parseFloat(Y(s,"borderTopWidth"));return s=parseFloat(Y(s,"borderBottomWidth")),new ji(_,s,c,f)},Se=function(s,c,f){s=Je(s,c,f),c.scrollLeft=s.x,c.scrollTop=s.y},Je=function(s,c,f){var _=me(s),x=me(c),P=ze(c);const J=_.x-x.x-P.left;return _=_.y-x.y-P.top,x=j(s),s=c.clientWidth-x.width,x=c.clientHeight-x.height,P=c.scrollLeft,c=c.scrollTop,f?(P+=J-s/2,c+=_-x/2):(P+=Math.min(J,Math.max(J-s,0)),c+=Math.min(_,Math.max(_-x,0))),new _t(P,c)},Ve=function(){Qn||(Qn=document.createElement("div"),Qn.className="blocklyDropDownDiv",(H()||document.body).appendChild(Qn),o_=document.createElement("div"),o_.className="blocklyDropDownContent",Qn.appendChild(o_),Cp=document.createElement("div"),Cp.className="blocklyDropDownArrow",Qn.appendChild(Cp),Qn.style.opacity="0",Qn.style.transition="transform "+q1+"s, opacity "+q1+"s",Qn.addEventListener("focusin",function(){le(Qn,"blocklyFocused")}),Qn.addEventListener("focusout",function(){ie(Qn,"blocklyFocused")}))},ot=function(s){Bk=s},_e=function(){return Id},Le=function(){return o_},We=function(){o_.textContent="",o_.style.width=""},F=function(s,c){Qn.style.backgroundColor=s,Qn.style.borderColor=c},te=function(s,c,f,_){return Pe(Me(c),s,f,_)},ge=function(s,c,f){return dU=!0,Pe(oe(s),s,c,f)},Me=function(s){var c=s.getSvgRoot();const f=s.workspace.scale,_=s.height*f;return s=s.width*f,c=me(c),new ji(c.y,c.y+_,c.x,c.x+s)},oe=function(s){return s=s.getScaledBBox(),new ji(s.top,s.bottom,s.left,s.right)},Pe=function(s,c,f,_){const x=s.left+(s.right-s.left)/2,P=s.bottom;s=s.top,_&&(s+=_),_=c.getSourceBlock();let J=_.workspace;for(;J.options.parentWorkspace;)J=J.options.parentWorkspace;return ot(J.getParentSvg().parentNode),et(c,_.RTL,x,P,x,s,f)},et=function(s,c,f,_,x,P,J){return Id=s,$p=J||null,Qn.style.direction=c?"rtl":"ltr",s=B(),r_=s.getRenderer().getClassName(),s_=s.getTheme().getClassName(),r_&&le(Qn,r_),s_&&le(Qn,s_),xn(f,_,x,P)},mt=function(s,c,f,_){return s=wn(s,f.left,f.right,_.width),{initialX:s.divX,initialY:c,finalX:s.divX,finalY:c+Lk,arrowX:s.arrowX,arrowY:-(Lv/2+Dk),arrowAtTop:!0,arrowVisible:!0}},bt=function(s,c,f,_){return s=wn(s,f.left,f.right,_.width),{initialX:s.divX,initialY:c-_.height,finalX:s.divX,finalY:c-_.height-Lk,arrowX:s.arrowX,arrowY:_.height-2*Dk-Lv/2,arrowAtTop:!1,arrowVisible:!0}},Tn=function(s,c,f){return s=wn(s,c.left,c.right,f.width),{initialX:s.divX,initialY:0,finalX:s.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},wn=function(s,c,f,_){return c=pe(c,s-_/2,f-_),s=s-Lv/2-c,f=hU,s=pe(f,s,_-f-Lv),{arrowX:s,divX:c}},Gn=function(){return!!Id},vn=function(s,c){return Id===s?(c?on():Wn(),!0):!1},Wn=function(){Qn.style.transform="translate(0, 0)",Qn.style.opacity="0",Nk=setTimeout(function(){on()},1e3*q1),$p&&($p(),$p=null)},on=function(){Gn()&&(Nk&&clearTimeout(Nk),Qn.style.transform="",Qn.style.left="",Qn.style.top="",Qn.style.opacity="0",Qn.style.display="none",Qn.style.backgroundColor="",Qn.style.borderColor="",$p&&($p(),$p=null),We(),Id=null,r_&&(ie(Qn,r_),r_=""),s_&&(ie(Qn,s_),s_=""),B().markFocused())},xn=function(s,c,f,_){s=Fk.getPositionMetrics(s,c,f,_),s.arrowVisible?(Cp.style.display="",Cp.style.transform="translate("+s.arrowX+"px,"+s.arrowY+"px) rotate(45deg)",Cp.setAttribute("class",s.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Cp.style.display="none",c=Math.floor(s.initialX),f=Math.floor(s.initialY),_=Math.floor(s.finalX);const x=Math.floor(s.finalY);return Qn.style.left=c+"px",Qn.style.top=f+"px",Qn.style.display="block",Qn.style.opacity="1",Qn.style.transform="translate("+(_-c)+"px,"+(x-f)+"px)",!!s.arrowAtTop},Ss=function(){if(Id){var s=Id.getSourceBlock();s=dU?oe(Id):Me(s);const c=s.left+(s.right-s.left)/2;xn(c,s.bottom,c,s.top)}else Wn()},Bt=function(s,c,f,_){if(!(s instanceof ct)&&typeof s!="string"||String(s).trim()==="")throw Error('Invalid type "'+s+'". The type must be a non-empty string or a Blockly.registry.Type.');if(s=String(s).toLowerCase(),typeof c!="string"||c.trim()==="")throw Error('Invalid name "'+c+'". The name must be a non-empty string.');const x=c.toLowerCase();if(!f)throw Error("Can not register a null value");let P=Rd[s],J=J1[s];if(P||(P=Rd[s]=Object.create(null),J=J1[s]=Object.create(null)),zn(s,f),!_&&P[x])throw Error('Name "'+x+'" with type "'+s+'" already registered.');P[x]=f,J[x]=c},zn=function(s,c){switch(s){case String(ct.FIELD):if(typeof c.fromJson!="function")throw Error('Type "'+s+'" must have a fromJson function')}},fe=function(s,c){s=String(s).toLowerCase(),c=c.toLowerCase();const f=Rd[s];f&&f[c]?(delete Rd[s][c],delete J1[s][c]):console.warn("Unable to unregister ["+c+"]["+s+"] from the registry.")},Qe=function(s,c,f){s=String(s).toLowerCase(),c=c.toLowerCase();const _=Rd[s];if(!_||!_[c]){if(c="Unable to find ["+c+"]["+s+"] in the registry.",f)throw Error(c+" You must require or register a "+s+" plugin.");return console.warn(c),null}return _[c]},Ye=function(s,c){return s=String(s).toLowerCase(),c=c.toLowerCase(),(s=Rd[s])?!!s[c]:!1},Ne=function(s,c,f){return Qe(s,c,f)},qe=function(s,c,f){return Qe(s,c,f)},Pt=function(s,c,f){s=String(s).toLowerCase();var _=Rd[s];if(!_){if(_=`Unable to find [${s}] in the registry.`,f)throw Error(`${_} You must require or register a ${s} plugin.`);return console.warn(_),null}if(!c)return _;s=J1[s],f=Object.create(null),c=Object.keys(_);for(let x=0;x<c.length;x++){const P=c[x];f[s[P]]=_[P]}return f},At=function(s,c,f){return c=c.plugins[s.toString()]||uh,typeof c=="function"?c:Ne(s,c,f)},Zt=function(){return"blockly-"+(Ane++).toString(36)},Jt=function(){return pU.genUid()},tn=function(s){Nv=s},qt=function(){return Nv},at=function(s){Wk.fireInternal(s)},fi=function(s){Dn()&&(h_.length||setTimeout(mr,0),h_.push(s))},mr=function(){const s=gr(h_,!0);h_.length=0;for(let c=0,f;f=s[c];c++){if(!f.workspaceId)continue;const _=A(f.workspaceId);_&&_.fireChangeListener(f)}},gr=function(s,c){s=s.slice(),c||s.reverse();const f=[],_=Object.create(null);for(let J=0,be;be=s[J];J++)if(!be.isNull()){var x=[be.isUiEvent?Fv:be.type,be.blockId,be.workspaceId].join(" "),P=_[x];const tt=P?P.event:null;P?be.type===To&&P.index===J-1?(x=be,tt.newParentId=x.newParentId,tt.newInputName=x.newInputName,tt.newCoordinate=x.newCoordinate,P.index=J):be.type===Hr&&be.element===tt.element&&be.name===tt.name?tt.newValue=be.newValue:be.type===kp?(P=be,tt.viewTop=P.viewTop,tt.viewLeft=P.viewLeft,tt.scale=P.scale,tt.oldScale=P.oldScale):(be.type!==Pd||tt.type!==hh)&&(_[x]={event:be,index:J},f.push(be)):(_[x]={event:be,index:J},f.push(be))}s=f.filter(function(J){return!J.isNull()}),c||s.reverse();for(let J=1,be;be=s[J];J++)be.type===Hr&&be.element==="mutation"&&s.unshift(s.splice(J,1)[0]);return s},Ts=function(){for(let s=0,c;c=h_[s];s++)c.recordUndo=!1},cn=function(){Uk++},rt=function(){Uk--},Dn=function(){return Uk===0},nn=function(){return mU},Et=function(s){Wk.setGroupInternal(s)},Fu=function(s){mU=typeof s=="boolean"?s?Jt():"":s},is=function(s){const c=[];s=s.getDescendants(!1);for(let f=0,_;_=s[f];f++)c[f]=_.id;return c},rs=function(s,c){var f=lt(s.type);if(!f)throw Error("Unknown event type.");return Jn(f)?f.fromJson(s,c):(f=new f,f.fromJson(s),f.workspaceId=c.id,f)},Jn=function(s){return Object.getOwnPropertyDescriptors(s).fromJson&&typeof s.fromJson=="function"},lt=function(s){const c=Ne(ct.EVENT,s);if(!c)throw Error(`Event type ${s} not found in registry.`);return c},En=function(s){if((s.type===To||s.type===Ms)&&s.workspaceId){var c=A(s.workspaceId);if(!s.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(s=c.getBlockById(s.blockId)){const f=Nv;try{Nv=!1;const _=s.getParent();if(_&&_.isEnabled()){const x=s.getDescendants(!1);for(let P=0,J;J=x[P];P++)J.setEnabled(!0)}else if((s.outputConnection||s.previousConnection)&&!c.isDragging())do s.setEnabled(!1),s=s.getNextBlock();while(s)}finally{Nv=f}}}},ai=function(s){({document:Rp=Rp,DOMParser:aw=aw,XMLSerializer:lw=lw}=s)},pi=function(){return i("Blockly.utils.xml.getDocument","version 9","version 10"),Rp},_r=function(s){i("Blockly.utils.xml.setDocument","version 9","version 10"),Rp=s},rn=function(s){return Rp.createElementNS(zk,s)},Wr=function(s){return Rp.createTextNode(s)},Pi=function(s){return new aw().parseFromString(s,"text/xml")},Dl=function(s){return new lw().serializeToString(s)},Ll=function(s,c){gU(s,c)},ud=function(s){gU=s},Go=function(s,c){vU.confirmInternal(s,c)},Tg=function(s,c){_U(s,c)},ss=function(s){_U=s},Ac=function(s,c,f){OU(s,c,f)},Uu=function(s){OU=s},hd=function(s){s=s.getAllBlocks(!1);const c=new Set;for(let f=0;f<s.length;f++){const _=s[f].getVarModels();if(_)for(let x=0;x<_.length;x++){const P=_[x];P.getId()&&c.add(P)}}return Array.from(c.values())},Nl=function(s){s=s.getAllBlocks(!1);const c=new Set;for(let _=0,x;x=s[_];_++){var f=x.getDeveloperVariables;if(f){f=f();for(let P=0;P<f.length;P++)c.add(f[P])}}return Array.from(c.values())},pa=function(s){let c=[];const f=document.createElement("button");return f.setAttribute("text","%{BKY_NEW_VARIABLE}"),f.setAttribute("callbackKey","CREATE_VARIABLE"),s.registerButtonCallback("CREATE_VARIABLE",function(_){mo(_.getTargetWorkspace())}),c.push(f),s=Ja(s),c=c.concat(s)},Ja=function(s){s=s.getVariablesOfType("");const c=[];if(0<s.length){var f=s[s.length-1];if(gt.variables_set){var _=rn("block");_.setAttribute("type","variables_set"),_.setAttribute("gap",gt.math_change?"8":"24"),_.appendChild(fn(f)),c.push(_)}if(gt.math_change&&(_=rn("block"),_.setAttribute("type","math_change"),_.setAttribute("gap",gt.variables_get?"20":"8"),_.appendChild(fn(f)),f=Gi('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),_.appendChild(f),c.push(_)),gt.variables_get){s.sort(Xv.compareByName);for(let x=0,P;P=s[x];x++)f=rn("block"),f.setAttribute("type","variables_get"),f.setAttribute("gap","8"),f.appendChild(fn(P)),c.push(f)}}return c},kc=function(s){return Hk.generateUniqueNameInternal(s)},wg=function(s){return Gu(uw.charAt(0),s.getAllVariableNames())},Gu=function(s,c){if(!c.length)return s;const f=uw;let _="",x=f.indexOf(s);for(;;){let P=!1;for(let J=0;J<c.length;J++)if(c[J].toLowerCase()===s){P=!0;break}if(!P)break;x++,x===f.length&&(x=0,_=`${Number(_)+1}`),s=f.charAt(x)+_}return s},mo=function(s,c,f){function _(P){Wo(Kt.NEW_VARIABLE_TITLE,P,function(J){if(J){const be=ma(J,s);if(be){let tt;be.type===x?tt=Kt.VARIABLE_ALREADY_EXISTS.replace("%1",be.name):(tt=Kt.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,tt=tt.replace("%1",be.name).replace("%2",be.type)),Ll(tt,function(){_(J)})}else s.createVariable(J,x),c&&c(J)}else c&&c(null)})}const x=f||"";_("")},Wu=function(s,c,f){function _(x){const P=Kt.RENAME_VARIABLE_TITLE.replace("%1",c.name);Wo(P,x,function(J){if(J){var be=Ic(J,c.type,s);be?(be=Kt.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",be.name).replace("%2",be.type),Ll(be,function(){_(J)})):(s.renameVariableById(c.getId(),J),f&&f(J))}else f&&f(null)})}_("")},Wo=function(s,c,f){Ac(s,c,function(_){_&&(_=_.replace(/[\s\xa0]+/g," ").trim(),_===Kt.RENAME_VARIABLE||_===Kt.NEW_VARIABLE)&&(_=null),f(_)})},Ic=function(s,c,f){f=f.getVariableMap().getAllVariables(),s=s.toLowerCase();for(let _=0,x;x=f[_];_++)if(x.name.toLowerCase()===s&&x.type!==c)return x;return null},ma=function(s,c){c=c.getVariableMap().getAllVariables(),s=s.toLowerCase();for(let f=0,_;_=c[f];f++)if(_.name.toLowerCase()===s)return _;return null},fn=function(s){const c=rn("field");return c.setAttribute("name","VAR"),c.setAttribute("id",s.getId()),c.setAttribute("variabletype",s.type),s=Wr(s.name),c.appendChild(s),c},Rc=function(s,c,f,_){let x=zo(s,c,f,_);return x||(x=dd(s,c,f,_)),x},zo=function(s,c,f,_){const x=s.getPotentialVariableMap();let P=null;if(c&&(P=s.getVariableById(c),!P&&x&&(P=x.getVariableById(c)),P))return P;if(f){if(_===void 0)throw Error("Tried to look up a variable by name without a type");P=s.getVariable(f,_),!P&&x&&(P=x.getVariable(f,_))}return P},dd=function(s,c,f,_){const x=s.getPotentialVariableMap();return f||(f=kc(s.isFlyout?s.targetWorkspace:s)),x?x.createVariable(f,_,c):s.createVariable(f,_,c)},zu=function(s,c){s=s.getAllVariables();const f=[];if(c.length!==s.length)for(let _=0;_<s.length;_++){const x=s[_];c.indexOf(x)===-1&&f.push(x)}return f},Ys=function(s){if(jk)throw Error("CSS already injected");Yk+=`
`+s},li=function(s,c){jk||(jk=!0,s&&(s=c.replace(/[\\/]$/,""),c=Yk.replace(/<<<PATH>>>/g,s),Yk="",s=document.createElement("style"),s.id="blockly-common-style",c=document.createTextNode(c),s.appendChild(c),document.head.insertBefore(s,document.head.firstChild)))},xr=function(s){const c=new _t(0,0);var f=s.x&&s.getAttribute("x");const _=s.y&&s.getAttribute("y");return f&&(c.x=parseInt(f)),_&&(c.y=parseInt(_)),(f=(f=s.getAttribute("transform"))&&f.match(yU))&&(c.x+=Number(f[1]),f[3]&&(c.y+=Number(f[3]))),(s=s.getAttribute("style"))&&-1<s.indexOf("translate")&&(s=s.match(bU))&&(c.x+=Number(s[1]),s[3]&&(c.y+=Number(s[3]))),c},Qu=function(s){let c=0,f=0;for(;s;){const _=xr(s);if(c+=_.x,f+=_.y,(" "+(s.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;s=s.parentNode}return new _t(c,f)},os=function(){return i("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},Vu=function(){const s=Ie();return new ji(s.y,document.documentElement.clientHeight+s.y,s.x,document.documentElement.clientWidth+s.x)},Ka=function(){const s=document.documentElement,c=window;return new _t(c.pageXOffset||s.scrollLeft,c.pageYOffset||s.scrollTop)},Zs=function(s,c){var f=c.x;c=c.y;const _=s.getInjectionDiv().getBoundingClientRect();return f=new _t(f-_.left,c-_.top),c=s.getOriginOffsetInPixels(),_t.difference(f,c).scale(1/s.scale)},qf=function(s,c){const f=rn("xml");var _=Hu(hd(s));_.hasChildNodes()&&f.appendChild(_),_=s.getTopComments(!0);for(let x=0;x<_.length;x++)f.appendChild(_[x].toXmlWithXY(c));for(s=s.getTopBlocks(!0),_=0;_<s.length;_++)f.appendChild(as(s[_],c));return f},Hu=function(s){const c=rn("variables");for(let f=0;f<s.length;f++){const _=s[f],x=rn("variable");x.appendChild(Wr(_.name)),_.type&&x.setAttribute("type",_.type),x.id=_.getId(),c.appendChild(x)}return c},as=function(s,c){if(s.isInsertionMarker()&&(s=s.getChildren(!1)[0],!s))return new DocumentFragment;let f=0;s.workspace.RTL&&(f=s.workspace.getWidth()),c=$r(s,c);const _=s.getRelativeToSurfaceXY();return c.setAttribute("x",Math.round(s.workspace.RTL?f-_.x:_.x)),c.setAttribute("y",Math.round(_.y)),c},ws=function(s){if(s.isSerializable()){const c=rn("field");return c.setAttribute("name",s.name||""),s.toXml(c)}return null},el=function(s,c){for(let f=0;f<s.inputList.length;f++){const _=s.inputList[f];for(let x=0;x<_.fieldRow.length;x++){const P=ws(_.fieldRow[x]);P&&c.appendChild(P)}}},$r=function(s,c){if(s.isInsertionMarker())return(c=s.getChildren(!1)[0])?$r(c):new DocumentFragment;const f=rn(s.isShadow()?"shadow":"block");if(f.setAttribute("type",s.type),c||f.setAttribute("id",s.id),s.mutationToDom){var _=s.mutationToDom();_&&(_.hasChildNodes()||_.hasAttributes())&&f.appendChild(_)}if(el(s,f),_=s.getCommentText()){var x=s.commentModel.size,P=s.commentModel.pinned,J=rn("comment");J.appendChild(Wr(_)),J.setAttribute("pinned",P),J.setAttribute("h",x.height),J.setAttribute("w",x.width),f.appendChild(J)}for(s.data&&(_=rn("data"),_.appendChild(Wr(s.data)),f.appendChild(_)),_=0;_<s.inputList.length;_++){x=s.inputList[_];var be=void 0;if(P=!0,x.type!==dn.DUMMY){J=x.connection.targetBlock(),x.type===dn.VALUE?be=rn("value"):x.type===dn.STATEMENT&&(be=rn("statement"));const Ot=x.connection.getShadowDom();!Ot||J&&J.isShadow()||be.appendChild(fd(Ot,c)),J&&(J=$r(J,c),J.nodeType===Vc.ELEMENT_NODE&&(be.appendChild(J),P=!1)),be.setAttribute("name",x.name),P||f.appendChild(be)}}s.inputsInline!==void 0&&s.inputsInline!==s.inputsInlineDefault&&f.setAttribute("inline",s.inputsInline.toString()),s.isCollapsed()&&f.setAttribute("collapsed","true"),s.isEnabled()||f.setAttribute("disabled","true"),s.isDeletable()||s.isShadow()||f.setAttribute("deletable","false"),s.isMovable()||s.isShadow()||f.setAttribute("movable","false"),s.isEditable()||f.setAttribute("editable","false"),be=s.getNextBlock();let tt;return be&&(_=$r(be,c),_.nodeType===Vc.ELEMENT_NODE&&(tt=rn("next"),tt.appendChild(_),f.appendChild(tt))),s=s.nextConnection&&s.nextConnection.getShadowDom(),!s||be&&be.isShadow()||tt.appendChild(fd(s,c)),f},fd=function(s,c){let f=s=s.cloneNode(!0),_;for(;f;)if(c&&f.nodeName==="shadow"&&f.removeAttribute("id"),f.firstChild)f=f.firstChild;else{for(;f&&!f.nextSibling;){_=f,f=f.parentNode;let x;_.nodeType===Vc.TEXT_NODE&&_.data.trim()===""&&((x=f)==null?void 0:x.firstChild)!==_&&ye(_)}f&&(_=f,f=f.nextSibling,_.nodeType===Vc.TEXT_NODE&&_.data.trim()===""&&ye(_))}return s},ls=function(s){return Dl(s).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},qs=function(s){s=ls(s).split("<");let c="";for(let f=1;f<s.length;f++){const _=s[f];_[0]==="/"&&(c=c.substring(2)),s[f]=c+"<"+_,_[0]!=="/"&&_.slice(-2)!=="/>"&&(c+="  ")}return s=s.join(`
`),s=s.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),s.replace(/^\n/,"")},Gi=function(s){const c=Pi(s);if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+s);return c.documentElement},Xu=function(s,c){return c.setResizesEnabled(!1),c.clear(),s=ga(s,c),c.setResizesEnabled(!0),s},ga=function(s,c){let f=0;c.RTL&&(f=c.getWidth());const _=[];Ue();const x=nn();x||Et(!0),c.setResizesEnabled&&c.setResizesEnabled(!1);let P=!0;try{for(let J=0,be;be=s.childNodes[J];J++){const tt=be.nodeName.toLowerCase(),Ot=be;if(tt==="block"||tt==="shadow"&&!qt()){const Mn=bi(Ot,c);_.push(Mn.id);const Ti=Ot.hasAttribute("x")?parseInt(Ot.getAttribute("x")):10,ka=Ot.hasAttribute("y")?parseInt(Ot.getAttribute("y")):10;isNaN(Ti)||isNaN(ka)||Mn.moveBy(c.RTL?f-Ti:Ti,ka),P=!1}else{if(tt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(tt==="comment")c.rendered?eo.fromXmlRendered(Ot,c,f):jc.fromXml(Ot,c);else if(tt==="variables"){if(P)ju(Ot,c);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");P=!1}}}}finally{x||Et(!1),we()}return c.setResizesEnabled&&c.setResizesEnabled(!0),at(new(lt(u_))(c)),_},cs=function(s,c){if(!c.getBlocksBoundingBox)return ga(s,c);var f=c.getBlocksBoundingBox();if(s=ga(s,c),f&&f.top!==f.bottom){var _=f.bottom;f=c.RTL?f.right:f.left;var x=1/0;let P=-1/0,J=1/0;for(let be=0;be<s.length;be++){const tt=c.getBlockById(s[be]).getRelativeToSurfaceXY();tt.y<J&&(J=tt.y),tt.x<x&&(x=tt.x),tt.x>P&&(P=tt.x)}for(_=_-J+10,f=c.RTL?f-P:f-x,x=0;x<s.length;x++)c.getBlockById(s[x]).moveBy(f,_)}return s},bi=function(s,c){cn();var f=c.getAllVariables();let _;try{if(_=zi(s,c),c.rendered){const x=_,P=_.getDescendants(!1);x.setConnectionTracking(!1);for(let J=P.length-1;0<=J;J--)P[J].initSvg();for(let J=P.length-1;0<=J;J--)P[J].render(!1);setTimeout(function(){x.disposed||x.setConnectionTracking(!0)},1),x.updateDisabled(),c.resizeContents()}else{const x=_.getDescendants(!1);for(let P=x.length-1;0<=P;P--)x[P].initModel()}}finally{rt()}if(Dn()){for(s=zu(c,f),c=0;c<s.length;c++)f=s[c],at(new(lt(Ap))(f));at(new(lt(Ms))(_))}return _},ju=function(s,c){for(let f=0;f<s.children.length;f++){const _=s.children[f],x=_.getAttribute("type"),P=_.getAttribute("id");c.createVariable(_.textContent,x,P)}},_a=function(s){const c={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let f=0;f<s.children.length;f++){const _=s.children[f];if(_.nodeType!==Vc.TEXT_NODE)switch(_.nodeName.toLowerCase()){case"mutation":c.mutation.push(_);break;case"comment":c.comment.push(_);break;case"data":c.data.push(_);break;case"title":case"field":c.field.push(_);break;case"value":case"statement":c.input.push(_);break;case"next":c.next.push(_);break;default:console.warn("Ignoring unknown tag: "+_.nodeName)}}return c},Mc=function(s,c){let f=!1;for(let _=0;_<s.length;_++){const x=s[_];c.domToMutation&&(c.domToMutation(x),c.initSvg&&(f=!0))}return f},pd=function(s,c){for(let _=0;_<s.length;_++){var f=s[_];const x=f.textContent,P=f.getAttribute("pinned")==="true",J=parseInt(f.getAttribute("w"));if(f=parseInt(f.getAttribute("h")),c.setCommentText(x),c.commentModel.pinned=P,isNaN(J)||isNaN(f)||(c.commentModel.size=new ps(J,f)),P&&c.getCommentIcon&&!c.isInFlyout){const be=c;setTimeout(function(){be.getCommentIcon().setVisible(!0)},1)}}},Eg=function(s,c){for(let f=0;f<s.length;f++)c.data=s[f].textContent},tl=function(s,c){for(let f=0;f<s.length;f++){const _=s[f],x=_.getAttribute("name");Oa(c,x,_)}},Wi=function(s){const c={childBlockElement:null,childShadowElement:null};for(let f=0;f<s.childNodes.length;f++){const _=s.childNodes[f];_.nodeType===Vc.ELEMENT_NODE&&(_.nodeName.toLowerCase()==="block"?c.childBlockElement=_:_.nodeName.toLowerCase()==="shadow"&&(c.childShadowElement=_))}return c},Cr=function(s,c,f,_){for(let P=0;P<s.length;P++){var x=s[P];const J=x.getAttribute("name"),be=f.getInput(J);if(!be){console.warn("Ignoring non-existent input "+J+" in block "+_);break}if(x=Wi(x),x.childBlockElement){if(!be.connection)throw TypeError("Input connection does not exist.");zi(x.childBlockElement,c,be.connection,!1)}if(x.childShadowElement){let tt;(tt=be.connection)==null||tt.setShadowDom(x.childShadowElement)}}},ii=function(s,c,f){for(let _=0;_<s.length;_++){const x=Wi(s[_]);if(x.childBlockElement){if(!f.nextConnection)throw TypeError("Next statement does not exist.");if(f.nextConnection.isConnected())throw TypeError("Next statement is already connected.");zi(x.childBlockElement,c,f.nextConnection,!0)}x.childShadowElement&&f.nextConnection&&f.nextConnection.setShadowDom(x.childShadowElement)}},zi=function(s,c,f,_){const x=s.getAttribute("type");if(!x)throw TypeError("Block type unspecified: "+s.outerHTML);var P=s.getAttribute("id");P=c.newBlock(x,P);const J=_a(s),be=Mc(J.mutation,P);if(pd(J.comment,P),Eg(J.data,P),f)if(_)if(P.previousConnection)f.connect(P.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(P.outputConnection)f.connect(P.outputConnection);else if(P.previousConnection)f.connect(P.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(tl(J.field,P),Cr(J.input,c,P,x),ii(J.next,c,P),be&&P.initSvg(),(c=s.getAttribute("inline"))&&P.setInputsInline(c==="true"),(c=s.getAttribute("disabled"))&&P.setEnabled(c!=="true"&&c!=="disabled"),(c=s.getAttribute("deletable"))&&P.setDeletable(c==="true"),(c=s.getAttribute("movable"))&&P.setMovable(c==="true"),(c=s.getAttribute("editable"))&&P.setEditable(c==="true"),(c=s.getAttribute("collapsed"))&&P.setCollapsed(c==="true"),s.nodeName.toLowerCase()==="shadow"){for(s=P.getChildren(!1),c=0;c<s.length;c++)if(!s[c].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(P.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");P.setShadow(!0)}return P},Oa=function(s,c,f){const _=s.getField(c);_?_.fromXml(f):console.warn("Ignoring non-existent field "+c+" in block "+s.type)},QO=function(s){for(let c=0;c<s.childNodes.length;c++){const f=s.childNodes[c];if(f.nodeName.toLowerCase()==="next"){s.removeChild(f);break}}},o1=function(s,c){return i("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),s.startsWith(c)},Qo=function(s){return s.length?s.reduce(function(c,f){return c.length<f.length?c:f}).length:0},Bl=function(s,c){if(!s.length)return 0;if(s.length===1)return s[0].length;let f=0;c=c||Qo(s);let _;for(_=0;_<c;_++){for(var x=s[0][_],P=1;P<s.length;P++)if(x!==s[P][_])return f;x===" "&&(f=_+1)}for(x=1;x<s.length;x++)if((P=s[x][_])&&P!==" ")return f;return c},Jf=function(s,c){if(!s.length)return 0;if(s.length===1)return s[0].length;let f=0;c=c||Qo(s);let _;for(_=0;_<c;_++){for(var x=s[0].substr(-_-1,1),P=1;P<s.length;P++)if(x!==s[P].substr(-_-1,1))return f;x===" "&&(f=_+1)}for(x=1;x<s.length;x++)if((P=s[x].charAt(s[x].length-_-1))&&P!==" ")return f;return c},VO=function(s,c){s=s.split(`
`);for(let f=0;f<s.length;f++)s[f]=xg(s[f],c);return s.join(`
`)},xg=function(s,c){if(s.length<=c)return s;const f=s.trim().split(/\s+/);for(var _=0;_<f.length;_++)f[_].length>c&&(c=f[_].length);var x=-1/0;let P,J=1;do{_=x,P=s,s=[],x=f.length/J;let be=1;for(let tt=0;tt<f.length-1;tt++)be<(tt+1.5)/x?(be++,s[tt]=!0):s[tt]=!1;s=HO(f,s,c),x=$g(f,s,c),s=XO(f,s),J++}while(x>_);return P},$g=function(s,c,f){const _=[0],x=[];for(var P=0;P<s.length;P++)_[_.length-1]+=s[P].length,c[P]===!0?(_.push(0),x.push(s[P].charAt(s[P].length-1))):c[P]===!1&&_[_.length-1]++;for(s=Math.max(..._),c=0,P=0;P<_.length;P++)c-=2*Math.pow(Math.abs(f-_[P]),1.5),c-=Math.pow(s-_[P],1.5),".?!".indexOf(x[P])!==-1?c+=f/3:",;)]}".indexOf(x[P])!==-1&&(c+=f/4);return 1<_.length&&_[_.length-1]<=_[_.length-2]&&(c+=.5),c},HO=function(s,c,f){let _=$g(s,c,f),x;for(let P=0;P<c.length-1;P++){if(c[P]===c[P+1])continue;const J=[].concat(c);J[P]=!J[P],J[P+1]=!J[P+1];const be=$g(s,J,f);be>_&&(_=be,x=J)}return x?HO(s,x,f):c},XO=function(s,c){const f=[];for(let _=0;_<s.length;_++)f.push(s[_]),c[_]!==void 0&&f.push(c[_]?`
`:" ");return f.join("")},Kf=function(s){return/^\s*-?\d+(\.\d+)?\s*$/.test(s)},a1=function(s){dw=s},l1=function(){return dw},c1=function(){return Yv},jO=function(){return vr},nl=function(s){if(s=Yu(s)){for(s=s.tooltip;typeof s=="function";)s=s();if(typeof s!="string")throw Error("Tooltip function must return a string.");return s}return""},Yu=function(s){for(;s&&s.tooltip;){if(typeof s.tooltip=="string"||typeof s.tooltip=="function")return s;s=s.tooltip}return null},ep=function(){vr||(vr=document.createElement("div"),vr.className="blocklyTooltipDiv",(H()||document.body).appendChild(vr))},Zu=function(s){s.mouseOverWrapper_=y(s,"pointerover",null,Vo),s.mouseOutWrapper_=y(s,"pointerout",null,qu),s.addEventListener("pointermove",il,!1)},Es=function(s){s&&(S(s.mouseOverWrapper_),S(s.mouseOutWrapper_),s.removeEventListener("pointermove",il))},Vo=function(s){f_||(s=Yu(s.currentTarget),ul!==s&&(go(),qv=null,ul=s),clearTimeout(TU))},qu=function(s){f_||(TU=setTimeout(function(){qv=ul=null,go()},1),clearTimeout(Zv))},il=function(s){if(ul&&ul.tooltip&&!f_)if(Yv){const c=qk-s.pageX;s=Jk-s.pageY,Math.sqrt(c*c+s*s)>wU&&go()}else qv!==ul&&(clearTimeout(Zv),qk=s.pageX,Jk=s.pageY,Zv=setTimeout(mi,EU))},rl=function(){qv=ul=null,go()},go=function(){Yv&&(Yv=!1,vr&&(vr.style.display="none")),Zv&&clearTimeout(Zv)},YO=function(){go(),f_=!0},Cg=function(){f_=!1},ZO=function(){vr&&ul&&(typeof dw=="function"?dw(vr,ul):_o())},_o=function(){var s=nl(ul);s=VO(s,SU),s=s.split(`
`);for(let c=0;c<s.length;c++){const f=document.createElement("div");f.appendChild(document.createTextNode(s[c])),vr.appendChild(f)}},Oo=function(s){const c=document.documentElement.clientWidth,f=document.documentElement.clientHeight;let _=qk;_=s?_-(Kk+vr.offsetWidth):_+Kk;let x=Jk+eI;return x+vr.offsetHeight>f+window.scrollY&&(x-=vr.offsetHeight+2*eI),s?_=Math.max(fw-window.scrollX,_):_+vr.offsetWidth>c+window.scrollX-2*fw&&(_=c-vr.offsetWidth-2*fw),{x:_,y:x}},mi=function(){if(!f_&&(qv=ul,vr)){vr.textContent="",ZO();var s=ul.RTL;vr.style.direction=s?"rtl":"ltr",vr.style.display="block",Yv=!0;var{x:c,y:f}=Oo(s);vr.style.left=c+"px",vr.style.top=f+"px"}},md=function(){return tI},va=function(s){tI=s},qO=function(){return nI},u1=function(s){nI=s},Fl=function(s){s=String(s).toLowerCase().trim();var c=xU[s];if(c||(c=s.substring(0,2)==="0x"?"#"+s.substring(2):s,c=c[0]==="#"?c:"#"+c,/^#[0-9a-f]{6}$/.test(c)))return c;if(/^#[0-9a-f]{3}$/.test(c))return["#",c[1],c[1],c[2],c[2],c[3],c[3]].join("");var f=s.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return f&&(s=Number(f[1]),c=Number(f[2]),f=Number(f[3]),0<=s&&256>s&&0<=c&&256>c&&0<=f&&256>f)?gd(s,c,f):null},gd=function(s,c,f){return c=s<<16|c<<8|f,16>s?"#"+(16777216|c).toString(16).substr(1):"#"+c.toString(16)},Ag=function(s){return s=Fl(s),s?(s=parseInt(s.substr(1),16),[s>>16,s>>8&255,s&255]):[0,0,0]},Ju=function(s,c,f){let _=0,x=0,P=0;if(c===0)P=x=_=f;else{const J=Math.floor(s/60),be=s/60-J;s=f*(1-c);const tt=f*(1-c*be);switch(c=f*(1-c*(1-be)),J){case 1:_=tt,x=f,P=s;break;case 2:_=s,x=f,P=c;break;case 3:_=s,x=tt,P=f;break;case 4:_=c,x=s,P=f;break;case 5:_=f,x=s,P=tt;break;case 6:case 0:_=f,x=c,P=s}}return gd(Math.floor(_),Math.floor(x),Math.floor(P))},ya=function(s,c,f){return s=Fl(s),!s||(c=Fl(c),!c)?null:(s=Ag(s),c=Ag(c),gd(Math.round(c[0]+f*(s[0]-c[0])),Math.round(c[1]+f*(s[1]-c[1])),Math.round(c[2]+f*(s[2]-c[2]))))},tp=function(s){return Ju(s,tI,255*nI)},Ku=function(s,c){const f=[];var _=s.split("");_.push("");var x=0;s=[];let P=null;for(let tt=0;tt<_.length;tt++){var J=_[tt];if(x===0)J==="%"?((x=s.join(""))&&f.push(x),s.length=0,x=1):s.push(J);else if(x===1)J==="%"?(s.push(J),x=0):c&&"0"<=J&&"9">=J?(x=2,P=J,(J=s.join(""))&&f.push(J),s.length=0):J==="{"?x=3:(s.push("%",J),x=0);else if(x===2)if("0"<=J&&"9">=J)P+=J;else{var be=void 0;f.push(parseInt((be=P)!=null?be:"",10)),tt--,x=0}else x===3&&(J===""?(s.splice(0,0,"%{"),tt--,x=0):J!=="}"?s.push(J):(x=s.join(""),/[A-Z]\w*/i.test(x)?(J=x.toUpperCase(),(J=J.startsWith("BKY_")?J.substring(4):null)&&J in Kt?(x=Kt[J],typeof x=="string"?Array.prototype.push.apply(f,Ku(x,c)):c?f.push(String(x)):f.push(x)):f.push("%{"+x+"}")):f.push("%{"+x+"}"),x=s.length=0))}for((c=s.join(""))&&f.push(c),be=[],s.length=0,_=0;_<f.length;_++)typeof f[_]=="string"?s.push(f[_]):((c=s.join(""))&&be.push(c),s.length=0,be.push(f[_]));return(c=s.join(""))&&be.push(c),s.length=0,be},_d=function(s){return Ku(s,!0)},gi=function(s){return typeof s!="string"?s:(s=Ku(s,!1),s.length?String(s[0]):"")},np=function(s){let c=!0;const f=Kt,_=s.match(/%{BKY_[A-Z]\w*}/ig);if(_)for(let x=0;x<_.length;x++){const P=_[x].toUpperCase();f[P.slice(6,-1)]===void 0&&(console.warn("No message string for "+_[x]+" in "+s),c=!1)}return c},ba=function(s){const c=typeof s=="string"?gi(s):s;var f=Number(c);if(!isNaN(f)&&0<=f&&360>=f)return{hue:f,hex:Ju(f,md(),255*qO())};if(f=Fl(c))return{hue:null,hex:f};throw f='Invalid colour: "'+c+'"',s!==c&&(f+=' (from "'+s+'")'),Error(f)},eh=function(){return jl},ip=function(s){jl=s},vo=function(){jl||(jl=document.createElement("div"),jl.className="blocklyWidgetDiv",(H()||document.body).appendChild(jl))},th=function(s,c,f){xs(),pw=s,mw=f,(s=jl)&&(s.style.direction=c?"rtl":"ltr",s.style.display="block",c=B(),p_=c.getRenderer().getClassName(),m_=c.getTheme().getClassName(),p_&&le(s,p_),m_&&le(s,m_))},xs=function(){if(Sa()){pw=null;var s=jl;s&&(s.style.display="none",s.style.left="",s.style.top="",mw&&mw(),mw=null,s.textContent="",p_&&(ie(s,p_),p_=""),m_&&(ie(s,m_),m_=""),B().markFocused())}},Sa=function(){return!!pw},rp=function(s){pw===s&&xs()},nh=function(s,c,f){jl.style.left=s+"px",jl.style.top=c+"px",jl.style.height=f+"px"},JO=function(s,c,f,_){const x=Si(s,c,f);s=KO(s,c,f,_),0>x?nh(s,0,f.height+x):nh(s,x,f.height)},KO=function(s,c,f,_){return _?Math.min(Math.max(c.right-f.width,s.left),s.right-f.width):Math.max(Math.min(c.left,s.right-f.width),s.left)},Si=function(s,c,f){return c.bottom+f.height>=s.bottom?c.top-f.height:c.bottom},$s=function(s,c){Bt(ct.FIELD,s,c)},ev=function(s){fe(ct.FIELD,s)},sp=function(s){return $U.fromJsonInternal(s)},kg=function(s){const c=qe(ct.FIELD,s.type);if(c){if(typeof c.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return c.fromJson(s)}return console.warn("Blockly could not create a field of type "+s.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Qi=function(s,c){s.setAttribute(Pne,c)},Kn=function(s,c,f){Array.isArray(f)&&(f=f.join(" ")),s.setAttribute(Mne+c,`${f}`)},Di=function(s){return s!==$n.SKIP_SETUP},us=function(s){let c=!1;const f=s.map(([J,be])=>typeof J=="string"?[gi(J),be]:(c=!0,[J.alt!==null?Object.assign({},J,{alt:gi(J.alt)}):Object.assign({},J),be]));if(c||2>s.length)return{options:f};var _=f.map(([J])=>J),x=Qo(_);s=Bl(_,x);const P=Jf(_,x);return!s&&!P||x<=s+P?{options:f}:(x=s?_[0].substring(0,s-1):void 0,_=P?_[0].substr(1-P):void 0,{options:Ar(f,s,P),prefix:x,suffix:_})},Ar=function(s,c,f){return s.map(([_,x])=>[_.substring(c,_.length-f),x])},op=function(s){if(!Array.isArray(s))throw TypeError("FieldDropdown options must be an array.");if(!s.length)throw TypeError("FieldDropdown options must not be an empty array.");let c=!1;for(let f=0;f<s.length;f++){const _=s[f];Array.isArray(_)?typeof _[1]!="string"?(c=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option id must be a string. Found "+_[1]+" in: ",_)):_[0]&&typeof _[0]!="string"&&typeof _[0].src!="string"&&(c=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must have a string label or image description. Found"+_[0]+" in: ",_)):(c=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must be an array. Found: ",_))}if(c)throw TypeError("Found invalid FieldDropdown options.")},ap=function(s,c){i("Blockly.utils.object.inherits","version 9","version 10"),s.superClass_=c.prototype,Object.setPrototypeOf(s,c),s.prototype=Object.create(c.prototype),s.prototype.constructor=s},lp=function(s,c){i("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const f in c)s[f]=c[f]},Pc=function(s,c){for(const f in c)s[f]=c[f]!==null&&typeof c[f]=="object"?Pc(s[f]||Object.create(null),c[f]):c[f];return s},hs=function(s){return i("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(s)},Od=function(s){return s?((s instanceof Element||typeof s=="string")&&(s=iv(s),s=Ig(s)),tv(s),s):null},tv=function(s){const c=s.kind;if(s=s.contents,c&&c!==AU&&c!==lI)throw Error("Invalid toolbox kind "+c+". Please supply either "+AU+" or "+lI);if(!s)throw Error("Toolbox must have a contents attribute.")},vd=function(s){return s?s.contents?s.contents:Array.isArray(s)&&0<s.length&&!s[0].nodeType?s:yd(s):[]},Ta=function(s){return kU.hasCategoriesInternal(s)},sl=function(s){if(!s)return!1;const c=s.kind;return c?c===lI:!!s.contents.filter(function(f){return f.kind.toUpperCase()==="CATEGORY"}).length},Ul=function(s){return s&&s.contents?!!s.contents.filter(function(c){return c.kind.toUpperCase()==="CATEGORY"}).length:!1},Ig=function(s){const c={contents:yd(s)};return s instanceof Node&&nv(s,c),c},yd=function(s){const c=[];let f=s.childNodes;f||(f=s);for(let _=0,x;x=f[_];_++){if(!x.tagName)continue;s={};const P=x.tagName.toUpperCase();s.kind=P,P==="BLOCK"?s.blockxml=x:x.childNodes&&0<x.childNodes.length&&(s.contents=yd(x)),nv(x,s),c.push(s)}return c},nv=function(s,c){for(let f=0;f<s.attributes.length;f++){const _=s.attributes[f];-1<_.nodeName.indexOf("css-")?(c.cssconfig=c.cssconfig||{},c.cssconfig[_.nodeName.replace("css-","")]=_.value):c[_.nodeName]=_.value}},iv=function(s){let c=null;if(s)if(typeof s=="string"){if(c=Gi(s),c.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else s instanceof Element&&(c=s);return c},cp=function(s,c){if(typeof s!="string"||s.trim()==="")throw Error('Error: Invalid extension name "'+s+'"');if(g_[s])throw Error('Error: Extension "'+s+'" is already registered.');if(typeof c!="function")throw Error('Error: Extension "'+s+'" must be a function');g_[s]=c},h1=function(s,c){if(!c||typeof c!="object")throw Error('Error: Mixin "'+s+'" must be a object');cp(s,function(){this.mixin(c)})},d1=function(s,c,f,_){const x='Error when registering mutator "'+s+'": ';rv(x,c);const P=Dg(c,x);if(f&&typeof f!="function")throw Error(x+'Extension "'+s+'" is not a function');cp(s,function(){P&&this.setMutator(new t.Mutator$$module$build$src$core$mutator(_||[],this)),this.mixin(c),f&&f.apply(this)})},f1=function(s){Rg(s)?delete g_[s]:console.warn('No extension mapping for name "'+s+'" found to unregister')},Rg=function(s){return!!g_[s]},ih=function(s,c,f){const _=g_[s];if(typeof _!="function")throw Error('Error: Extension "'+s+'" not found.');let x;if(f?p1(s,c):x=Lg(c),_.apply(c),f)rv('Error after applying mutator "'+s+'": ',c);else if(!m1(x,c))throw Error('Error when applying extension "'+s+'": mutation properties changed when applying a non-mutator extension.')},p1=function(s,c){if(Lg(c).length)throw Error('Error: tried to apply mutation "'+s+'" to a block that already has mutator functions.  Block id: '+c.id)},Mg=function(s,c){return rh(s.mutationToDom,s.domToMutation,c+" mutationToDom/domToMutation")},Pg=function(s,c){return rh(s.saveExtraState,s.loadExtraState,c+" saveExtraState/loadExtraState")},Dg=function(s,c){return rh(s.compose,s.decompose,c+" compose/decompose")},rh=function(s,c,f){if(s&&c){if(typeof s!="function"||typeof c!="function")throw Error(f+" must be a function");return!0}if(!s&&!c)return!1;throw Error(f+"Must have both or neither functions")},rv=function(s,c){const f=Mg(c,s),_=Pg(c,s);if(!f&&!_)throw Error(s+"Mutations must contain either XML hooks, or JSON hooks, or both");Dg(c,s)},Lg=function(s){const c=[];return s.domToMutation!==void 0&&c.push(s.domToMutation),s.mutationToDom!==void 0&&c.push(s.mutationToDom),s.saveExtraState!==void 0&&c.push(s.saveExtraState),s.loadExtraState!==void 0&&c.push(s.loadExtraState),s.compose!==void 0&&c.push(s.compose),s.decompose!==void 0&&c.push(s.decompose),c},m1=function(s,c){if(c=Lg(c),c.length!==s.length)return!1;for(let f=0;f<c.length;f++)if(s[f]!==c[f])return!1;return!0},up=function(s){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")s();else{const c=setInterval(function(){document.readyState==="complete"&&(clearInterval(c),s())},10)}},sv=function(s,c){const f=[];return typeof document=="object"&&up(function(){for(const _ in c)np(c[_])}),function(){this.type&&f.indexOf(this.type)===-1&&(g1(this,s,c),f.push(this.type)),this.setTooltip(function(){var _=String(this.getFieldValue(s));let x=c[_];return x===null?f.indexOf(this.type)===-1&&(_="No tooltip mapping for value "+_+" of field "+s,this.type!==null&&(_+=" of block type "+this.type),console.warn(_+".")):x=gi(x),x}.bind(this))}},g1=function(s,c,f){var _=s.getField(c);if(_ instanceof Zl&&!_.isOptionListDynamic()){_=_.getOptions();for(let x=0;x<_.length;x++){const P=_[x][1];f[P]===null&&console.warn("No tooltip mapping for value "+P+" of field "+c+" of block type "+s.type)}}},_1=function(s,c){return typeof document=="object"&&up(function(){np(s)}),function(){this.setTooltip(function(){const f=this.getField(c);return gi(s).replace("%1",f?f.getText():"")}.bind(this))}},yk=function(){const s=this.tooltip;this.setTooltip(function(){const c=this.getParent();return c&&c.getInputsInline()&&c.tooltip||s}.bind(this))},Cs=function(s,c){return c=s.indexOf(c),c===-1?!1:(s.splice(c,1),!0)},Ft=function(s,c){return" "+s+","+c+" "},yo=function(s,c){return" "+s+c.join("")},zr=function(s,c){return" M "+s+","+c+" "},oi=function(s,c){return" m "+s+","+c+" "},ol=function(s,c){return" l "+s+","+c+" "},bd=function(s){return" l"+s.join("")},Tt=function(s,c){return" "+s+" "+c+" "},Vi=function(s,c,f,_){return s+" "+f+" "+f+" "+c+_},bk=function(s){return i("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),xr(s)},Sk=function(s){return i("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),Qu(s)},ov=function(s){return i("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),_d(s)},av=function(s){return i("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),gi(s)},Tk=function(s){return i("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),np(s)},O1=function(){return i("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),os()},v1=function(){return i("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),Vu()},y1=function(s,c){return i("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),Cs(s,c)},b1=function(){return i("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),Ka()},S1=function(s,c){return i("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),re(s,c)},al=function(s,c){return i("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),Zs(s,c)},T1=function(s){return i("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),ba(s)},hp=function(s){i("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),up(s)},sh=function(s,c){Bt(ct.SERIALIZER,s,c)},Ng=function(s){fe(ct.SERIALIZER,s)},Ho=function(s,{addCoordinates:c=!1,addInputBlocks:f=!0,addNextBlocks:_=!0,doFullSerialization:x=!0}={}){if(s.isInsertionMarker())return null;const P={type:s.type,id:s.id};return c&&dp(s,P),w1(s,P),ds(s,P),wk(s,P),Ek(s,P,x),f&&bo(s,P,x),_&&As(s,P,x),P},w1=function(s,c){s.isCollapsed()&&(c.collapsed=!0),s.isEnabled()||(c.enabled=!1),s.inputsInline!==void 0&&s.inputsInline!==s.inputsInlineDefault&&(c.inline=s.inputsInline),s.data&&(c.data=s.data)},dp=function(s,c){const f=s.workspace;s=s.getRelativeToSurfaceXY(),c.x=Math.round(f.RTL?f.getWidth()-s.x:s.x),c.y=Math.round(s.y)},ds=function(s,c){s.saveExtraState?(s=s.saveExtraState(),s!==null&&(c.extraState=s)):s.mutationToDom&&(s=s.mutationToDom(),s!==null&&(c.extraState=ls(s).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},wk=function(s,c){s.getCommentText()&&(c.icons={comment:{text:s.getCommentText(),pinned:s.commentModel.pinned,height:Math.round(s.commentModel.size.height),width:Math.round(s.commentModel.size.width)}})},Ek=function(s,c,f){const _=Object.create(null);for(let x=0;x<s.inputList.length;x++){const P=s.inputList[x];for(let J=0;J<P.fieldRow.length;J++){const be=P.fieldRow[J];be.isSerializable()&&(_[be.name]=be.saveState(f))}}Object.keys(_).length&&(c.fields=_)},bo=function(s,c,f){const _=Object.create(null);for(let x=0;x<s.inputList.length;x++){const P=s.inputList[x];if(P.type===dn.DUMMY)continue;const J=lv(P.connection,f);J&&(_[P.name]=J)}Object.keys(_).length&&(c.inputs=_)},As=function(s,c,f){s.nextConnection&&(s=lv(s.nextConnection,f))&&(c.next=s)},lv=function(s,c){const f=s.getShadowState(!0);if(s=s.targetBlock(),!f&&!s)return null;const _=Object.create(null);return f&&(_.shadow=f),s&&!s.isShadow()&&(_.block=Ho(s,{doFullSerialization:c})),_},Dc=function(s,c,{recordUndo:f=!1}={}){return Bg(s,c,{recordUndo:f})},Bg=function(s,c,{parentConnection:f,isShadow:_=!1,recordUndo:x=!1}={}){const P=qt();tn(x),(x=nn())||Et(!0),cn();const J=cv(s,c,{parentConnection:f,isShadow:_});return rt(),at(new(lt(Ms))(J)),Et(x),tn(P),c.rendered&&setTimeout(()=>{J.disposed||J.setConnectionTracking(!0)},1),J},cv=function(s,c,{parentConnection:f,isShadow:_=!1}={}){if(!s.type)throw new MU(s);const x=c.newBlock(s.type,s.id);return x.setShadow(_),E1(x,s),uv(x,s),x1(x,s),hv(f,x,s),$1(x,s),C1(x,s),Fg(x,s),Ug(x,s),fv(x,c.rendered),x},E1=function(s,c){let f=c.x===void 0?0:c.x;c=c.y===void 0?0:c.y;const _=s.workspace;f=_.RTL?_.getWidth()-f:f,s.moveBy(f,c)},uv=function(s,c){c.collapsed&&s.setCollapsed(!0),c.enabled===!1&&s.setEnabled(!1),c.inline!==void 0&&s.setInputsInline(c.inline),c.data!==void 0&&(s.data=c.data)},x1=function(s,c){c.extraState&&(s.loadExtraState?s.loadExtraState(c.extraState):s.domToMutation&&s.domToMutation(Gi(c.extraState)))},hv=function(s,c,f){if(s){if(s.getSourceBlock().isShadow()&&!c.isShadow())throw new DU(f);if(s.type===dn.VALUE){var _=c.outputConnection;if(!_)throw new iy("output",c,f)}else if(_=c.previousConnection,!_)throw new iy("previous",c,f);if(!s.connect(_)){const x=c.workspace.connectionChecker;throw new PU(x.getErrorMessage(x.canConnectWithReason(_,s,!1),_,s),s.type===dn.VALUE?"output connection":"previous connection",c,f)}}},$1=function(s,c){c.icons&&(c=c.icons.comment)&&(s.setCommentText(c.text),"pinned"in c&&(s.commentModel.pinned=c.pinned),"width"in c&&"height"in c&&(s.commentModel.size=new ps(c.width,c.height)),c.pinned&&s.rendered&&!s.isInFlyout&&setTimeout(()=>s.getCommentIcon().setVisible(!0),1))},C1=function(s,c){if(c.fields){var f=Object.keys(c.fields);for(let _=0;_<f.length;_++){const x=f[_],P=c.fields[x],J=s.getField(x);J?J.loadState(P):console.warn(`Ignoring non-existant field ${x} in block ${s.type}`)}}},Fg=function(s,c){if(c.inputs){var f=Object.keys(c.inputs);for(let _=0;_<f.length;_++){const x=f[_],P=s.getInput(x);if(!P||!P.connection)throw new iy(x,s,c);dv(P.connection,c.inputs[x])}}},Ug=function(s,c){if(c.next){if(!s.nextConnection)throw new iy("next",s,c);dv(s.nextConnection,c.next)}},dv=function(s,c){c.shadow&&s.setShadowState(c.shadow),c.block&&cv(c.block,s.getSourceBlock().workspace,{parentConnection:s})},fv=function(s,c){if(c)for(s.setConnectionTracking(!1),s.initSvg(),s.render(!1),s=s.getIcons(),c=0;c<s.length;c++)s[c].computeIconLocation();else s.initModel()},A1=function(s,c){if(!s||!c)throw Error("Cannot connect null connections.");s.targetConnection=c,c.targetConnection=s},k1=function(s,c){let f=null;c=c.outputConnection;const _=c.getConnectionChecker();for(let x=0,P;P=s.inputList[x];x++){const J=P.connection;if(J&&_.canConnect(c,J,!1)){if(f)return null;f=J}}return f},Gg=function(s,c){let f;for(;f=k1(s,c);)if(s=f.targetBlock(),!s||s.isShadow())return f;return null},fp=function(s){let c=s.outputConnection;return(!c||s.previousConnection&&s.previousConnection.isConnected())&&(c=s.previousConnection),c},Wg=function(s){const c=s.workspace;var f=s.getSvgRoot();c.getAudioManager().play("delete");const _=c.getSvgXY(f);f=f.cloneNode(!0),f.setAttribute("transform","translate("+_.x+","+_.y+")"),c.getParentSvg().appendChild(f),pv(f,{x:_.x,y:_.y,width:s.width,height:s.height},c.RTL,new Date,c.scale)},pv=function(s,c,f,_,x){const P=(new Date().getTime()-_.getTime())/150;1<P?ye(s):(s.setAttribute("transform","translate("+(c.x+(f?-1:1)*c.width*x/2*P)+","+(c.y+c.height*x*P)+") scale("+(1-P)*x+")"),setTimeout(pv,10,s,c,f,_,x))},ll=function(s){const c=s.workspace,f=c.scale;if(c.getAudioManager().play("click"),!(1>f)){var _=c.getSvgXY(s.getSvgRoot());s.outputConnection?(_.x+=(s.RTL?3:-3)*f,_.y+=13*f):s.previousConnection&&(_.x+=(s.RTL?-23:23)*f,_.y+=3*f),s=L(Re.CIRCLE,{cx:_.x,cy:_.y,r:0,fill:"none",stroke:"#888","stroke-width":10},c.getParentSvg()),I1(s,new Date,f)}},I1=function(s,c,f){const _=(new Date().getTime()-c.getTime())/150;1<_?ye(s):(s.setAttribute("r",(25*_*f).toString()),s.style.opacity=(1-_).toString(),vw=setTimeout(I1,10,s,c,f))},R1=function(s){if(wa(),s.workspace.getAudioManager().play("disconnect"),!(1>s.workspace.scale)){var c=s.getHeightWidth().height;c=Math.atan(10/c)/Math.PI*180,s.RTL||(c*=-1),ay=s.getSvgRoot(),pp(ay,c,new Date)}},pp=function(s,c,f){const _=(new Date().getTime()-f.getTime())/200;let x="";1>=_&&(x=`skewX(${Math.round(Math.sin(_*Math.PI*3)*(1-_)*c)})`,vw=setTimeout(pp,10,s,c,f)),s.skew_=x,s.setAttribute("transform",s.translate_+s.skew_)},wa=function(){if(ay){vw&&clearTimeout(vw);const s=ay;s.skew_="",s.setAttribute("transform",s.translate_),ay=null}},mp=function(s){mI.copyInternal(s)},wt=function(s){mh=s.toCopyData()},Sd=function(){if(!mh)return null;let s=mh.source;return s.isFlyout&&(s=s.targetWorkspace),mh.typeCounts&&s.isCapacityAvailable(mh.typeCounts)?s.paste(mh.saveInfo):null},Td=function(s){return mI.duplicateInternal(s)},M1=function(s){const c=mh;mp(s);let f,_,x;return s=(x=(f=s.toCopyData())==null||(_=f.source)==null?void 0:_.paste(mh.saveInfo))!=null?x:null,mh=c,s},P1=function(){return uy},Lc=function(s){uy=s},Nc=function(s,c,f){if(th(gI,f,gv),c.length){var _=mv(c,f);hy=_,D1(_,s,f),setTimeout(function(){_.focus()},1),uy=null}else gp()},mv=function(s,c){const f=new iI;f.setRole(Jo.MENU);for(let _=0;_<s.length;_++){const x=s[_],P=new rI(x.text);P.setRightToLeft(c),P.setRole(Jo.MENUITEM),f.addChild(P),P.setEnabled(x.enabled),x.enabled&&P.onAction(function(){gp(),x.callback(x.scope)},{})}return f},D1=function(s,c,f){const _=Vu();c=new ji(c.clientY+_.top,c.clientY+_.top,c.clientX+_.left,c.clientX+_.left),L1(s);const x=s.getSize();f&&(c.left+=x.width,c.right+=x.width,_.left+=x.width,_.right+=x.width),JO(_,c,x,f),s.focus()},L1=function(s){var c=eh();if(!c)throw Error("Attempting to create a context menu when widget div is null");c=s.render(c),le(c,"blocklyContextMenu"),v(c,"contextmenu",null,N1),s.focus()},N1=function(s){s.preventDefault(),s.stopPropagation()},gp=function(){rp(gI),uy=null},gv=function(){hy&&(hy.dispose(),hy=null)},B1=function(s,c){return()=>{cn();let f;try{f=bi(c,s.workspace);const _=s.getRelativeToSurfaceXY();_.x=s.RTL?_.x-t.config$$module$build$src$core$config.snapRadius:_.x+t.config$$module$build$src$core$config.snapRadius,_.y+=2*t.config$$module$build$src$core$config.snapRadius,f.moveBy(_.x,_.y)}finally{rt()}Dn()&&!f.isShadow()&&at(new(lt(Ms))(f)),f.select()}},zg=function(s){return{text:Kt.REMOVE_COMMENT,enabled:!0,callback:function(){Et(!0),s.dispose(),Et(!1)}}},Qg=function(s){return{text:Kt.DUPLICATE_COMMENT,enabled:!0,callback:function(){Td(s)}}},F1=function(s,c){const f={enabled:!0};return f.text=Kt.ADD_COMMENT,f.callback=function(){const _=new eo(s,Kt.WORKSPACE_COMMENT_DEFAULT_TEXT,eo.DEFAULT_SIZE,eo.DEFAULT_SIZE);var x=s.getInjectionDiv().getBoundingClientRect();x=new _t(c.clientX-x.left,c.clientY-x.top);const P=s.getOriginOffsetInPixels();x=_t.difference(x,P),x.scale(1/s.scale),_.moveBy(x.x,x.y),s.rendered&&(_.initSvg(),_.render(),_.select())},f},_p=function(s,c,f,_,x,P){const J=P.scrollbar&&P.scrollbar.canScrollVertically();return s.horizontal===y_.LEFT?(f=x.absoluteMetrics.left+f,J&&P.RTL&&(f+=Ni.scrollbarThickness)):(f=x.absoluteMetrics.left+x.viewMetrics.width-c.width-f,J&&!P.RTL&&(f-=Ni.scrollbarThickness)),s.vertical===gh.TOP?s=x.absoluteMetrics.top+_:(s=x.absoluteMetrics.top+x.viewMetrics.height-c.height-_,P.scrollbar&&P.scrollbar.canScrollHorizontally()&&(s-=Ni.scrollbarThickness)),new ji(s,s+c.height,f,f+c.width)},wd=function(s,c){return{horizontal:c.toolboxMetrics.position===sn.LEFT||s.horizontalLayout&&!s.RTL?y_.RIGHT:y_.LEFT,vertical:c.toolboxMetrics.position===sn.BOTTOM?gh.TOP:gh.BOTTOM}},_v=function(s,c,f,_){const x=s.left,P=s.right-s.left,J=s.bottom-s.top;for(let be=0;be<_.length;be++){const tt=_[be];s.intersects(tt)&&(s=f===Nd.UP?tt.top-J-c:tt.bottom+c,s=new ji(s,s+J,x,x+P),be=-1)}return s},U1=function(){Yn.registry.register({name:Zc.ESCAPE,preconditionFn(s){return!s.options.readOnly},callback(s){return s.hideChaff(),!0},keyCodes:[Rt.ESC]})},Ov=function(){Yn.registry.register({name:Zc.DELETE,preconditionFn(s){const c=Z();return!s.options.readOnly&&c!=null&&c.isDeletable()},callback(s,c){return c.preventDefault(),Yc.inProgress()?!1:(Z().checkAndDelete(),!0)},keyCodes:[Rt.DELETE,Rt.BACKSPACE]})},vv=function(){const s=Yn.registry.createSerializedKey(Rt.C,[Rt.CTRL]),c=Yn.registry.createSerializedKey(Rt.C,[Rt.ALT]),f=Yn.registry.createSerializedKey(Rt.C,[Rt.META]);Yn.registry.register({name:Zc.COPY,preconditionFn(_){const x=Z();return!_.options.readOnly&&!Yc.inProgress()&&x!=null&&x.isDeletable()&&x.isMovable()},callback(_,x){return x.preventDefault(),_.hideChaff(),mp(Z()),!0},keyCodes:[s,c,f]})},yv=function(){const s=Yn.registry.createSerializedKey(Rt.X,[Rt.CTRL]),c=Yn.registry.createSerializedKey(Rt.X,[Rt.ALT]),f=Yn.registry.createSerializedKey(Rt.X,[Rt.META]);Yn.registry.register({name:Zc.CUT,preconditionFn(_){const x=Z();return!_.options.readOnly&&!Yc.inProgress()&&x!=null&&x instanceof hl&&x.isDeletable()&&x.isMovable()&&!x.workspace.isFlyout},callback(){const _=Z();return _?(mp(_),_.checkAndDelete(),!0):!1},keyCodes:[s,c,f]})},bv=function(){const s=Yn.registry.createSerializedKey(Rt.V,[Rt.CTRL]),c=Yn.registry.createSerializedKey(Rt.V,[Rt.ALT]),f=Yn.registry.createSerializedKey(Rt.V,[Rt.META]);Yn.registry.register({name:Zc.PASTE,preconditionFn(_){return!_.options.readOnly&&!Yc.inProgress()},callback(){return!!Sd()},keyCodes:[s,c,f]})},Op=function(){const s=Yn.registry.createSerializedKey(Rt.Z,[Rt.CTRL]),c=Yn.registry.createSerializedKey(Rt.Z,[Rt.ALT]),f=Yn.registry.createSerializedKey(Rt.Z,[Rt.META]);Yn.registry.register({name:Zc.UNDO,preconditionFn(_){return!_.options.readOnly&&!Yc.inProgress()},callback(_){return _.hideChaff(),_.undo(!1),!0},keyCodes:[s,c,f]})},vp=function(){const s=Yn.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.CTRL]),c=Yn.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.ALT]),f=Yn.registry.createSerializedKey(Rt.Z,[Rt.SHIFT,Rt.META]),_=Yn.registry.createSerializedKey(Rt.Y,[Rt.CTRL]);Yn.registry.register({name:Zc.REDO,preconditionFn(x){return!Yc.inProgress()&&!x.options.readOnly},callback(x){return x.hideChaff(),x.undo(!0),!0},keyCodes:[s,c,f,_]})},yp=function(){U1(),Ov(),vv(),yv(),bv(),Op(),vp()},Gl=function(s){return s.startPublishing!==void 0&&s.stopPublishing!==void 0},Vg=function(s){return s.doProcedureUpdate!==void 0},Xo=function(s){for(const c of s.getAllBlocks(!1))Vg(c)&&c.doProcedureUpdate()},bp=function(s){const c=s.getBlocksByType("procedures_defnoreturn",!1).map(function(f){return f.getProcedureDef()});return s=s.getBlocksByType("procedures_defreturn",!1).map(function(f){return f.getProcedureDef()}),c.sort(Hg),s.sort(Hg),[c,s]},Hg=function(s,c){return s[0].localeCompare(c[0],void 0,{sensitivity:"base"})},Xg=function(s,c){if(c.isInFlyout)return s;for(s=s||Kt.UNNAMED_KEY||"unnamed";!G1(s,c.workspace,c);){const f=s.match(/^(.*?)(\d+)$/);s=f?f[1]+(parseInt(f[2])+1):s+"2"}return s},G1=function(s,c,f){return!jg(s,c,f)},jg=function(s,c,f){c=c.getAllBlocks(!1);for(let x=0;x<c.length;x++)if(c[x]!==f){var _=c[x];if(_.getProcedureDef&&(_=_.getProcedureDef(),dl.equals(_[0],s)))return!0}return!1},xk=function(s){var c=this.getSourceBlock();if(!c)throw new yr;s=s.trim();const f=Xg(s,c),_=this.getValue();if(_!==s&&_!==f)for(s=c.workspace.getAllBlocks(!1),c=0;c<s.length;c++){const x=s[c];x.renameProcedure&&x.renameProcedure(_,f)}return f},Ed=function(s){function c(P,J){for(let tt=0;tt<P.length;tt++){var be=P[tt][0];const Ot=P[tt][1],Mn=rn("block");Mn.setAttribute("type",J),Mn.setAttribute("gap","16");const Ti=rn("mutation");for(Ti.setAttribute("name",be),Mn.appendChild(Ti),be=0;be<Ot.length;be++){const ka=rn("arg");ka.setAttribute("name",Ot[be]),Ti.appendChild(ka)}f.push(Mn)}}const f=[];if(gt.procedures_defnoreturn){var _=rn("block");_.setAttribute("type","procedures_defnoreturn"),_.setAttribute("gap","16");var x=rn("field");x.setAttribute("name","NAME"),x.appendChild(Wr(Kt.PROCEDURES_DEFNORETURN_PROCEDURE)),_.appendChild(x),f.push(_)}return gt.procedures_defreturn&&(_=rn("block"),_.setAttribute("type","procedures_defreturn"),_.setAttribute("gap","16"),x=rn("field"),x.setAttribute("name","NAME"),x.appendChild(Wr(Kt.PROCEDURES_DEFRETURN_PROCEDURE)),_.appendChild(x),f.push(_)),gt.procedures_ifreturn&&(_=rn("block"),_.setAttribute("type","procedures_ifreturn"),_.setAttribute("gap","16"),f.push(_)),f.length&&f[f.length-1].setAttribute("gap","24"),s=bp(s),c(s[0],"procedures_callnoreturn"),c(s[1],"procedures_callreturn"),f},Yg=function(s){var c=[],f=s.getBlocksByType("procedures_mutatorarg",!1);for(let P=0,J;J=f[P];P++)c.push(J.getFieldValue("NAME"));f=rn("xml");const _=rn("block");_.setAttribute("type","procedures_mutatorarg");const x=rn("field");x.setAttribute("name","NAME"),c=Gu(II,c),c=Wr(c),x.appendChild(c),_.appendChild(x),f.appendChild(_),s.updateToolbox(f)},Li=function(s){if(s.type===hh&&s.bubbleType==="mutator"&&s.isOpen&&s.blockId){s=A(s.workspaceId).getBlockById(s.blockId);var c=s.type;(c==="procedures_defnoreturn"||c==="procedures_defreturn")&&(s=s.mutator.getWorkspace(),Yg(s),s.addChangeListener(yn))}},yn=function(s){(s.type===Ms||s.type===Xc||s.type===Hr)&&(s=A(s.workspaceId),Yg(s))},Hi=function(s,c){const f=[];c=c.getAllBlocks(!1);for(let x=0;x<c.length;x++){var _=c[x];_.getProcedureCall&&(_=_.getProcedureCall())&&dl.equals(_,s)&&f.push(c[x])}return f},ar=function(s){const c=qt();var f=s.getProcedureDef()[0];const _=s.mutationToDom(!0);s=Hi(f,s.workspace);for(let P=0,J;J=s[P];P++){f=(f=J.mutationToDom())&&ls(f),J.domToMutation&&J.domToMutation(_);var x=J.mutationToDom();x=x&&ls(x),f!==x&&(tn(!1),at(new(lt(Hr))(J,"mutation",null,f,x)),tn(c))}},Qr=function(s,c){c=c.getAllBlocks(!1);for(let _=0;_<c.length;_++){var f=c[_];if(f.getProcedureDef&&(f=f.getProcedureDef())&&dl.equals(f[0],s))return c[_]}return null},Js=function(s){return s.isDynamic},Wl=function(){return oG},Or=function(){i("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),oG=!1},zl=function(s,c){Bt(ct.RENDERER,s,c)},xd=function(s){fe(ct.RENDERER,s)},Zg=function(){i("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Or()},qg=function(s,c,f){return s=new(Ne(ct.RENDERER,s))(s),s.init(c,f),s},$d=function(s){mo(s.getTargetWorkspace(),void 0,"String")},ks=function(s){mo(s.getTargetWorkspace(),void 0,"Number")},Jg=function(s){mo(s.getTargetWorkspace(),void 0,"Colour")},Sp=function(s){let c=[],f=document.createElement("button");return f.setAttribute("text",Kt.NEW_STRING_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),c.push(f),f=document.createElement("button"),f.setAttribute("text",Kt.NEW_NUMBER_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),c.push(f),f=document.createElement("button"),f.setAttribute("text",Kt.NEW_COLOUR_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),c.push(f),s.registerButtonCallback("CREATE_VARIABLE_STRING",$d),s.registerButtonCallback("CREATE_VARIABLE_NUMBER",ks),s.registerButtonCallback("CREATE_VARIABLE_COLOUR",Jg),s=oh(s),c=c.concat(s)},oh=function(s){s=s.getAllVariables();const c=[];if(0<s.length){if(gt.variables_set_dynamic){var f=s[s.length-1];const _=rn("block");_.setAttribute("type","variables_set_dynamic"),_.setAttribute("gap","24"),_.appendChild(fn(f)),c.push(_)}if(gt.variables_get_dynamic){s.sort(Xv.compareByName);for(let _=0,x;x=s[_];_++)f=rn("block"),f.setAttribute("type","variables_get_dynamic"),f.setAttribute("gap","8"),f.appendChild(fn(x)),c.push(f)}}return c},Kg=function(s){s.resizeContents()},Sv=function(s){const c=Object.create(null),f=Pt(ct.SERIALIZER,!0);for(const _ in f){let x;const P=(x=f[_])==null?void 0:x.save(s);P&&(c[_]=P)}return c},Bc=function(s,c,{recordUndo:f=!1}={}){var _=Pt(ct.SERIALIZER,!0);if(_){_=Object.entries(_).sort((P,J)=>J[1].priority-P[1].priority);var x=qt();tn(f),(f=nn())||Et(!0),Ue(),c instanceof Kl&&c.setResizesEnabled(!1);for(const[,P]of _.reverse()){let J;(J=P)==null||J.clear(c)}for(let[P,J]of _.reverse())if(s[P]){let be;(be=J)==null||be.load(s[P],c)}c instanceof Kl&&c.setResizesEnabled(!0),we(),at(new(lt(u_))(c)),Et(f),tn(x)}},Cd=function(s){const c={id:s.getId(),name:s.getName(),returnTypes:s.getReturnTypes()};return s.getParameters().length&&(c.parameters=s.getParameters().map(f=>cl(f))),c},cl=function(s){const c={id:s.getId(),name:s.getName()};return s.getTypes().length&&(c.types=s.getTypes()),c},Ad=function(s,c,f,_){if(s=new s(_,f.name,f.id).setReturnTypes(f.returnTypes),!f.parameters)return s;for(const[x,P]of f.parameters.entries())s.insertParameter(ah(c,P,_),x);return s},ah=function(s,c,f){return s=new s(f,c.name,c.id),c.types&&s.setTypes(c.types),s},kd=function(s,c,f){const _=f.getBoundingRectangle(),x=_.right-_.left,P=pe(c.top,_.top,c.top+c.height-(_.bottom-_.top))-_.top;let J=c.left;return c=c.left+c.width-x,s.RTL?J=Math.min(c,J):c=Math.max(J,c),(s=pe(J,_.left,c)-_.left)||P?(f.moveBy(s,P),!0):!1},Tp=function(s){return c=>{var f=s.getMetricsManager();if(f.hasFixedEdges()&&!s.isDragging()){var _;if(Gk.indexOf((_=c.type)!=null?_:"")!==-1){_=f.getScrollMetrics(!0);const x=e_(s,c);x&&(f=nn(),Et(c.group),kd(s,_,x)&&!c.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),f!==null&&Et(f))}else c.type===kp&&c.scale&&c.oldScale&&c.scale>c.oldScale&&Vr(s)}}},e_=function(s,c){let f=null;switch(c.type){case Ms:case To:(f=s.getBlockById(c.blockId))&&(f=f.getRootBlock());break;case Ip:case dh:f=s.getCommentById(c.commentId)}return f},Vr=function(s){var c=s.getMetricsManager();if(c.hasFixedEdges()&&!s.isDragging()){c=c.getScrollMetrics(!0);var f=s.getTopBoundedElements();for(let _=0,x;x=f[_];_++)kd(s,c,x)}},Fc=function(s,c){if(typeof s=="string"&&(s=document.getElementById(s)||document.querySelector(s)),!s||!Fe(document,s))throw Error("Error: container is not in current document.");c=new ql(c||{});const f=document.createElement("div");f.className="injectionDiv",f.tabIndex=0,Kn(f,Oi.LABEL,Kt.WORKSPACE_ARIA_LABEL),s.appendChild(f),s=jo(f,c);const _=new GG(f),x=new UG(f),P=t_(s,c,_,x);return Ks(P),G(P),K(P),f.addEventListener("focusin",function(){G(P)}),P},jo=function(s,c){s.setAttribute("dir","LTR"),li(c.hasCss,c.pathToMedia),s=L(Re.SVG,{xmlns:So,"xmlns:html":Ea,"xmlns:xlink":Zo,version:"1.1",class:"blocklySvg",tabindex:"0"},s);const f=L(Re.DEFS,{},s),_=String(Math.random()).substring(2);return c.gridPattern=kI.createDom(_,c.gridOptions,f),s},t_=function(s,c,f,_){c.parentWorkspace=null,c=new Kl(c,f,_),f=c.options,c.scale=f.zoomOptions.startScale,s.appendChild(c.createDom("blocklyMainBackground")),_=c.getInjectionDiv();var x=c.getRenderer().getClassName();return x&&le(_,x),(x=c.getTheme().getClassName())&&le(_,x),!f.hasCategories&&f.languageTree&&(_=c.addFlyout(Re.SVG),xe(_,s)),f.hasTrashcan&&c.addTrashcan(),f.zoomOptions&&f.zoomOptions.controls&&c.addZoomControls(),c.getThemeManager().subscribe(s,"workspaceBackgroundColour","background-color"),c.translate(0,0),c.addChangeListener(Tp(c)),K(c),vo(),Ve(),ep(),c},Ks=function(s){const c=s.options;var f=s.getParentSvg();if(v(f.parentNode,"contextmenu",null,function(_){T(_)||_.preventDefault()}),f=v(window,"resize",null,function(){s.hideChaff(!0),K(s),Vr(s)}),s.setResizeHandlerWrapper(f),Tv(),c.languageTree){f=s.getToolbox();const _=s.getFlyout(!0);f?f.init():_&&(_.init(s),_.show(c.languageTree),typeof _.scrollToStart=="function"&&_.scrollToStart())}c.hasTrashcan&&s.trashcan.init(),c.zoomOptions&&c.zoomOptions.controls&&s.zoomControls_.init(),c.moveOptions&&c.moveOptions.scrollbars?(s.scrollbar=new HI(s,c.moveOptions.scrollbars===!0||!!c.moveOptions.scrollbars.horizontal,c.moveOptions.scrollbars===!0||!!c.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),s.scrollbar.resize()):s.setMetrics({x:.5,y:.5}),c.hasSounds&&wv(c.pathToMedia,s)},W1=function(s){const c=B();c&&!(T(s)||c.rendered&&!c.isVisible())&&Yn.registry.onKeyDown(c,s)},Tv=function(){WG||(v(document,"scroll",null,function(){const s=I();for(let c=0,f;f=s[c];c++)f instanceof Kl&&f.updateInverseScreenCTM()}),v(document,"keydown",null,W1),y(document,"touchend",null,o),y(document,"touchcancel",null,o),Ht&&v(window,"orientationchange",document,function(){K(B())})),WG=!0},wv=function(s,c){function f(){for(;x.length;)S(x.pop());_.preload()}const _=c.getAudioManager();_.load([s+"click.mp3",s+"click.wav",s+"click.ogg"],"click"),_.load([s+"disconnect.wav",s+"disconnect.mp3",s+"disconnect.ogg"],"disconnect"),_.load([s+"delete.mp3",s+"delete.ogg",s+"delete.wav"],"delete");const x=[];x.push(v(document,"pointermove",null,f,!0)),x.push(v(document,"touchstart",null,f,!0))},z1=function(s,c,f){if(s=s.getProcedureMap().get(c),!s)throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return s.getParameters().find(_=>_.getId()===f)},Ql=function(){Hn.registry.register({displayText(){return Kt.UNDO},preconditionFn(s){return 0<s.workspace.getUndoStack().length?"enabled":"disabled"},callback(s){s.workspace.undo(!1)},scopeType:Hn.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Ev=function(){Hn.registry.register({displayText(){return Kt.REDO},preconditionFn(s){return 0<s.workspace.getRedoStack().length?"enabled":"disabled"},callback(s){s.workspace.undo(!0)},scopeType:Hn.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},xv=function(){Hn.registry.register({displayText(){return Kt.CLEAN_UP},preconditionFn(s){return s.workspace.isMovable()?1<s.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(s){s.workspace.cleanUp()},scopeType:Hn.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},n_=function(s,c){function f(P){x--,P.setCollapsed(s),x===0&&Et(!1)}let _=0,x=0;Et(!0);for(let P=0;P<c.length;P++){let J=c[P];for(;J;)x++,setTimeout(f.bind(null,J),_),J=J.getNextBlock(),_+=10}},Uc=function(){Hn.registry.register({displayText(){return Kt.COLLAPSE_ALL},preconditionFn(s){if(s.workspace.options.collapse){s=s.workspace.getTopBlocks(!1);for(let c=0;c<s.length;c++){let f=s[c];for(;f;){if(!f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(s){n_(!0,s.workspace.getTopBlocks(!0))},scopeType:Hn.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},$v=function(){Hn.registry.register({displayText(){return Kt.EXPAND_ALL},preconditionFn(s){if(s.workspace.options.collapse){s=s.workspace.getTopBlocks(!1);for(let c=0;c<s.length;c++){let f=s[c];for(;f;){if(f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(s){n_(!1,s.workspace.getTopBlocks(!0))},scopeType:Hn.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Cv=function(s,c){if(s.isDeletable())Array.prototype.push.apply(c,s.getDescendants(!1));else{s=s.getChildren(!1);for(let f=0;f<s.length;f++)Cv(s[f],c)}},wp=function(s){const c=[];s=s.getTopBlocks(!0);for(let f=0;f<s.length;f++)Cv(s[f],c);return c},lh=function(s,c){Et(c);const f=s.shift();f&&(f.isDeadOrDying()?lh(s,c):(f.dispose(!1,!0),setTimeout(lh,10,s,c))),Et(!1)},Q1=function(){Hn.registry.register({displayText(s){return s.workspace?(s=wp(s.workspace).length,s===1?Kt.DELETE_BLOCK:Kt.DELETE_X_BLOCKS.replace("%1",String(s))):""},preconditionFn(s){return s.workspace&&0<wp(s.workspace).length?"enabled":"disabled"},callback(s){if(s.workspace){s.workspace.cancelCurrentGesture();var c=wp(s.workspace),f=Jt();2>c.length?lh(c,f):Go(Kt.DELETE_ALL_BLOCKS.replace("%1",String(c.length)),function(_){_&&lh(c,f)})}},scopeType:Hn.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},$k=function(){Ql(),Ev(),xv(),Uc(),$v(),Q1()},Av=function(){Hn.registry.register({displayText(){return Kt.DUPLICATE_BLOCK},preconditionFn(s){return s=s.block,!s.isInFlyout&&s.isDeletable()&&s.isMovable()?s.isDuplicatable()?"enabled":"disabled":"hidden"},callback(s){s.block&&Td(s.block)},scopeType:Hn.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},kv=function(){Hn.registry.register({displayText(s){return s.block.getCommentIcon()?Kt.REMOVE_COMMENT:Kt.ADD_COMMENT},preconditionFn(s){return s=s.block,!s.isInFlyout&&s.workspace.options.comments&&!s.isCollapsed()&&s.isEditable()?"enabled":"hidden"},callback(s){s=s.block,s.getCommentIcon()?s.setCommentText(null):s.setCommentText("")},scopeType:Hn.ScopeType.BLOCK,id:"blockComment",weight:2})},Gc=function(){Hn.registry.register({displayText(s){return s.block.getInputsInline()?Kt.EXTERNAL_INPUTS:Kt.INLINE_INPUTS},preconditionFn(s){if(s=s.block,!s.isInFlyout&&s.isMovable()&&!s.isCollapsed()){for(let c=1;c<s.inputList.length;c++)if(s.inputList[c-1].type!==dn.STATEMENT&&s.inputList[c].type!==dn.STATEMENT)return"enabled"}return"hidden"},callback(s){s.block.setInputsInline(!s.block.getInputsInline())},scopeType:Hn.ScopeType.BLOCK,id:"blockInline",weight:3})},V1=function(){Hn.registry.register({displayText(s){return s.block.isCollapsed()?Kt.EXPAND_BLOCK:Kt.COLLAPSE_BLOCK},preconditionFn(s){return s=s.block,!s.isInFlyout&&s.isMovable()&&s.workspace.options.collapse?"enabled":"hidden"},callback(s){s.block.setCollapsed(!s.block.isCollapsed())},scopeType:Hn.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Wc=function(){Hn.registry.register({displayText(s){return s.block.isEnabled()?Kt.DISABLE_BLOCK:Kt.ENABLE_BLOCK},preconditionFn(s){return s=s.block,!s.isInFlyout&&s.workspace.options.disable&&s.isEditable()?s.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(s){s=s.block;const c=nn();c||Et(!0),s.setEnabled(!s.isEnabled()),c||Et(!1)},scopeType:Hn.ScopeType.BLOCK,id:"blockDisable",weight:5})},Iv=function(){Hn.registry.register({displayText(s){var c=s.block;return s=c.getDescendants(!1).length,(c=c.getNextBlock())&&(s-=c.getDescendants(!1).length),s===1?Kt.DELETE_BLOCK:Kt.DELETE_X_BLOCKS.replace("%1",String(s))},preconditionFn(s){return!s.block.isInFlyout&&s.block.isDeletable()?"enabled":"hidden"},callback(s){s.block&&s.block.checkAndDelete()},scopeType:Hn.ScopeType.BLOCK,id:"blockDelete",weight:6})},Is=function(){Hn.registry.register({displayText(){return Kt.HELP},preconditionFn(s){return s=s.block,(typeof s.helpUrl=="function"?s.helpUrl():s.helpUrl)?"enabled":"hidden"},callback(s){s.block.showHelp()},scopeType:Hn.ScopeType.BLOCK,id:"blockHelp",weight:7})},Ck=function(){Av(),kv(),Gc(),V1(),Wc(),Iv(),Is()},Rv=function(){$k(),Ck()},Ak=function(s){const c=[];s=s.getDescendants(!1);for(let f=0,_;_=s[f];f++){const x=_.getIcons();for(let P=0;P<x.length;P++){const J={location:x[P].getIconLocation(),icon:x[P]};c.push(J)}}return c},kk=function(s){B().hideChaff(s)},H1=function(s){i("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),Kg(s)},X1=function(s){i("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),mp(s)},Ik=function(){return i("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!Sd()},Yo=function(s){i("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),Td(s)},Mv=function(s){return i("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Kf(s)},Rk=function(s){return i("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),tp(s)},zc=function(s,c,f,_){return i("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),y(s,c,f,_)},i_=function(s){return i("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),S(s)},ch=function(s,c,f,_,x,P){return i("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),v(s,c,f,_,x)},Ut=Ut||{};Ut.scope={},Ut.ASSUME_ES5=!1,Ut.ASSUME_NO_NATIVE_MAP=!1,Ut.ASSUME_NO_NATIVE_SET=!1,Ut.SIMPLE_FROUND_POLYFILL=!1,Ut.ISOLATE_POLYFILLS=!1,Ut.FORCE_POLYFILL_PROMISE=!1,Ut.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ut.defineProperty=Ut.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,f){return s==Array.prototype||s==Object.prototype||(s[c]=f.value),s},Ut.getGlobal=function(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ki=="object"&&Ki];for(var c=0;c<s.length;++c){var f=s[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")},Ut.global=Ut.getGlobal(this),Ut.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Ut.TRUST_ES6_POLYFILLS=!Ut.ISOLATE_POLYFILLS||Ut.IS_SYMBOL_NATIVE,Ut.polyfills={},Ut.propertyToPolyfillSymbol={},Ut.POLYFILL_PREFIX="$jscp$",Ut.polyfill=function(s,c,f,_){c&&(Ut.ISOLATE_POLYFILLS?Ut.polyfillIsolated(s,c,f,_):Ut.polyfillUnisolated(s,c,f,_))},Ut.polyfillUnisolated=function(s,c,f,_){for(f=Ut.global,s=s.split("."),_=0;_<s.length-1;_++){var x=s[_];if(!(x in f))return;f=f[x]}s=s[s.length-1],_=f[s],c=c(_),c!=_&&c!=null&&Ut.defineProperty(f,s,{configurable:!0,writable:!0,value:c})},Ut.polyfillIsolated=function(s,c,f,_){var x=s.split(".");s=x.length===1,_=x[0],_=!s&&_ in Ut.polyfills?Ut.polyfills:Ut.global;for(var P=0;P<x.length-1;P++){var J=x[P];if(!(J in _))return;_=_[J]}x=x[x.length-1],f=Ut.IS_SYMBOL_NATIVE&&f==="es6"?_[x]:null,c=c(f),c!=null&&(s?Ut.defineProperty(Ut.polyfills,x,{configurable:!0,writable:!0,value:c}):c!==f&&(Ut.propertyToPolyfillSymbol[x]===void 0&&(f=1e9*Math.random()>>>0,Ut.propertyToPolyfillSymbol[x]=Ut.IS_SYMBOL_NATIVE?Ut.global.Symbol(x):Ut.POLYFILL_PREFIX+f+"$"+x),Ut.defineProperty(_,Ut.propertyToPolyfillSymbol[x],{configurable:!0,writable:!0,value:c})))},Ut.polyfill("globalThis",function(s){return s||Ut.global},"es_2020","es3"),Ut.polyfill("Object.getOwnPropertyDescriptors",function(s){return s||function(c){for(var f={},_=Reflect.ownKeys(c),x=0;x<_.length;x++)f[_[x]]=Object.getOwnPropertyDescriptor(c,_[x]);return f}},"es8","es5"),Ut.arrayIteratorImpl=function(s){var c=0;return function(){return c<s.length?{done:!1,value:s[c++]}:{done:!0}}},Ut.arrayIterator=function(s){return{next:Ut.arrayIteratorImpl(s)}},Ut.initSymbol=function(){},Ut.iteratorPrototype=function(s){return s={next:s},s[Symbol.iterator]=function(){return this},s},Ut.iteratorFromArray=function(s,c){s instanceof String&&(s+="");var f=0,_=!1,x={next:function(){if(!_&&f<s.length){var P=f++;return{value:c(P,s[P]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x},Ut.polyfill("Array.prototype.values",function(s){return s||function(){return Ut.iteratorFromArray(this,function(c,f){return f})}},"es8","es3"),Ut.owns=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},Ut.polyfill("Object.values",function(s){return s||function(c){var f=[],_;for(_ in c)Ut.owns(c,_)&&f.push(c[_]);return f}},"es8","es3"),Ut.polyfill("Array.prototype.flat",function(s){return s||function(c){c=c===void 0?1:c;for(var f=[],_=0;_<this.length;_++){var x=this[_];Array.isArray(x)&&0<c?(x=Array.prototype.flat.call(x,c-1),f.push.apply(f,x)):f.push(x)}return f}},"es9","es5"),Ut.polyfill("Object.entries",function(s){return s||function(c){var f=[],_;for(_ in c)Ut.owns(c,_)&&f.push([_,c[_]]);return f}},"es8","es3");var fs=fs||{};fs.global=globalThis||root,fs.define=function(s,c){return c},fs.DEBUG=!1,fs.DISALLOW_TEST_ONLY_CODE=!fs.DEBUG,fs.provide=function(s){},fs.module=function(s){},fs.module.get=function(s){},fs.module.declareLegacyNamespace=function(){},fs.setTestOnly=function(s){if(fs.DISALLOW_TEST_ONLY_CODE)throw s=s||"",Error("Importing test-only code into non-debug environment"+(s?": "+s:"."))},fs.require=function(s){},fs.requireType=function(s){};var Xi={};Xi.warn=i;var Mk=750,Pv="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Ep=null,Qc={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},xp=0,Rs={};Rs.TOUCH_ENABLED=Pv,Rs.TOUCH_MAP=Qc,Rs.checkTouchIdentifier=h,Rs.clearTouchIdentifier=a,Rs.getTouchIdentifierFromEvent=u,Rs.isMouseOrTouchEvent=p,Rs.isTouchEvent=m,Rs.longStart=r,Rs.longStop=o,Rs.setClientFromTouch=d,Rs.shouldHandleEvent=l,Rs.splitEventByTouches=g;var Dv,j1,O,b,C,k,U,V,ve,De;(function(s){function c(_){return f.indexOf(_.toUpperCase())!==-1}Dv=s;const f=Dv.toUpperCase();j1=c("JavaFX"),O=c("WebKit"),b=c("Gecko")&&!O,C=c("Android"),s=globalThis.navigator&&globalThis.navigator.maxTouchPoints,k=c("iPad")||c("Macintosh")&&0<s,U=c("iPhone")&&!k,V=c("Macintosh"),ve=k||C&&!c("Mobile")||c("Silk"),De=!ve&&(U||C)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ke=Dv,ft=j1,It=b,an=C,Ht=k,ti=U,zt=V,kr=De,lr={};lr.ANDROID=an,lr.GECKO=It,lr.IPAD=Ht,lr.IPHONE=ti,lr.JavaFx=ft,lr.MAC=zt,lr.MOBILE=kr,lr.raw=Ke;var je=40,Be=125,Ze={};Ze.bind=y,Ze.conditionalBind=v,Ze.getScrollDeltaPixels=$,Ze.isRightButton=w,Ze.isTargetInput=T,Ze.mouseToSvg=E,Ze.unbind=S;var gt=Object.create(null),Nt,_n,un,Ln,_i,Rn;Nt=Object.create(null),un=null,_i=[],Rn={defineBlocksWithJsonArrayInternal:Q},t.module$build$src$core$common={},t.module$build$src$core$common.TEST_ONLY=Rn,t.module$build$src$core$common.createBlockDefinitionsFromJsonArray=ee,t.module$build$src$core$common.defineBlocks=z,t.module$build$src$core$common.defineBlocksWithJsonArray=X,t.module$build$src$core$common.draggingConnections=_i,t.module$build$src$core$common.getAllWorkspaces=I,t.module$build$src$core$common.getBlockTypeCounts=re,t.module$build$src$core$common.getMainWorkspace=B,t.module$build$src$core$common.getParentContainer=H,t.module$build$src$core$common.getSelected=Z,t.module$build$src$core$common.getWorkspaceById=A,t.module$build$src$core$common.registerWorkspace=D,t.module$build$src$core$common.setMainWorkspace=G,t.module$build$src$core$common.setParentContainer=M,t.module$build$src$core$common.setSelected=N,t.module$build$src$core$common.svgResize=K,t.module$build$src$core$common.unregisterWorkpace=R;var So="http://www.w3.org/2000/svg",Ea="http://www.w3.org/1999/xhtml",Zo="http://www.w3.org/1999/xlink",Vc;(function(s){s[s.ELEMENT_NODE=1]="ELEMENT_NODE",s[s.TEXT_NODE=3]="TEXT_NODE",s[s.COMMENT_NODE=8]="COMMENT_NODE",s[s.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(Vc||(Vc={}));var Vl=null,Pk=0,Y1=null,Ir={};Ir.HTML_NS=Ea,Ir.NodeType=Vc,Ir.SVG_NS=So,Ir.XLINK_NS=Zo,Ir.addClass=le,Ir.containsNode=Fe,Ir.createSvgElement=L,Ir.getFastTextWidth=W,Ir.getFastTextWidthWithSizeString=Ee,Ir.getTextWidth=Ge,Ir.hasClass=Ce,Ir.insertAfter=xe,Ir.measureFontMetrics=Oe,Ir.removeClass=ie,Ir.removeClasses=de,Ir.removeNode=ye,Ir.setCssTransform=Xe,Ir.startTextWidthCache=Ue,Ir.stopTextWidthCache=we;var Z1={};Z1.clamp=pe,Z1.toDegrees=ne,Z1.toRadians=ae;var ji=class{constructor(s,c,f,_){this.top=s,this.bottom=c,this.left=f,this.right=_}contains(s,c){return s>=this.left&&s<=this.right&&c>=this.top&&c<=this.bottom}intersects(s){return!(this.left>s.right||this.right<s.left||this.top>s.bottom||this.bottom<s.top)}},_t=class{constructor(s,c){this.x=s,this.y=c}clone(){return new _t(this.x,this.y)}scale(s){return this.x*=s,this.y*=s,this}translate(s,c){return this.x+=s,this.y+=c,this}static equals(s,c){return s===c?!0:s&&c?s.x===c.x&&s.y===c.y:!1}static distance(s,c){const f=s.x-c.x;return s=s.y-c.y,Math.sqrt(f*f+s*s)}static magnitude(s){return Math.sqrt(s.x*s.x+s.y*s.y)}static difference(s,c){return new _t(s.x-c.x,s.y-c.y)}static sum(s,c){return new _t(s.x+c.x,s.y+c.y)}},ps=class{constructor(s,c){this.width=s,this.height=c}static equals(s,c){return s===c?!0:s&&c?s.width===c.width&&s.height===c.height:!1}},uU={getSizeInternal:Te},Hc={};Hc.TEST_ONLY=uU,Hc.getBorderBox=ze,Hc.getCascadedStyle=ue,Hc.getComputedStyle=Y,Hc.getContainerOffsetToScrollInto=Je,Hc.getPageOffset=me,Hc.getSize=Ae,Hc.getViewportPageOffset=Ie,Hc.scrollIntoContainerView=Se;var Lv=16,Dk=1,hU=12,Lk=16,q1=.25,Nk=null,$p=null,r_="",s_="",Qn,o_,Cp,Bk=null,Id=null,dU=null,Fk={getBoundsInfo:function(){const s=me(Bk),c=Ae(Bk);return{left:s.x,right:s.x+c.width,top:s.y,bottom:s.y+c.height,width:c.width,height:c.height}},getPositionMetrics:function(s,c,f,_){const x=Fk.getBoundsInfo(),P=Ae(Qn);return c+P.height<x.bottom?mt(s,c,x,P):_-P.height>x.top?bt(f,_,x,P):c+P.height<document.documentElement.clientHeight?mt(s,c,x,P):_-P.height>document.documentElement.clientTop?bt(f,_,x,P):Tn(s,x,P)}},cr={};cr.ANIMATION_TIME=q1,cr.ARROW_HORIZONTAL_PADDING=hU,cr.ARROW_SIZE=Lv,cr.BORDER_SIZE=Dk,cr.PADDING_Y=Lk,cr.TEST_ONLY=Fk,cr.clearContent=We,cr.createDom=Ve,cr.getContentDiv=Le,cr.getOwner=_e,cr.getPositionX=wn,cr.hide=Wn,cr.hideIfOwner=vn,cr.hideWithoutAnimation=on,cr.isVisible=Gn,cr.repositionForWindowResize=Ss,cr.setBoundsElement=ot,cr.setColour=F,cr.show=et,cr.showPositionedByBlock=te,cr.showPositionedByField=ge;var Rd=Object.create(null),Cne={typeMap:Rd},J1=Object.create(null),uh="default",ct=class{constructor(s){this.name=s}toString(){return this.name}};ct.CONNECTION_CHECKER=new ct("connectionChecker"),ct.CURSOR=new ct("cursor"),ct.EVENT=new ct("event"),ct.FIELD=new ct("field"),ct.RENDERER=new ct("renderer"),ct.TOOLBOX=new ct("toolbox"),ct.THEME=new ct("theme"),ct.TOOLBOX_ITEM=new ct("toolboxItem"),ct.FLYOUTS_VERTICAL_TOOLBOX=new ct("flyoutsVerticalToolbox"),ct.FLYOUTS_HORIZONTAL_TOOLBOX=new ct("flyoutsHorizontalToolbox"),ct.METRICS_MANAGER=new ct("metricsManager"),ct.BLOCK_DRAGGER=new ct("blockDragger"),ct.SERIALIZER=new ct("serializer");var Hl={};Hl.DEFAULT=uh,Hl.TEST_ONLY=Cne,Hl.Type=ct,Hl.getAllItems=Pt,Hl.getClass=Ne,Hl.getClassFromOptions=At,Hl.getObject=qe,Hl.hasItem=Ye,Hl.register=Bt,Hl.unregister=fe;var fU="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",pU={genUid:()=>{const s=fU.length,c=[];for(let f=0;20>f;f++)c[f]=fU.charAt(Math.random()*s);return c.join("")}},Ane=0,K1={};K1.TEST_ONLY=pU,K1.genUid=Jt,K1.getNextUniqueId=Zt;var mU="",Nv=!0,Uk=0,Ms="create",Xc="delete",Hr="change",To="move",Ap="var_create",a_="var_delete",Bv="var_rename",Fv="ui",l_="drag",Md="selected",Pd="click",Uv="marker_move",hh="bubble_open",Gv="trashcan_open",Wv="toolbox_item_select",zv="theme_change",kp="viewport_change",Ip="comment_create",c_="comment_delete",Qv="comment_change",dh="comment_move",u_="finished_loading",ew="procedure_create",Vv="procedure_delete",tw="procedure_rename",nw="procedure_enable",iw="procedure_change_return",rw="procedure_parameter_create",sw="procedure_parameter_delete",ow="procedure_parameter_rename",Gk=[Ms,To,Ip,dh],h_=[],Wk={FIRE_QUEUE:h_,fireNow:mr,fireInternal:fi,setGroupInternal:Fu},en={};en.BLOCK_CHANGE=Hr,en.BLOCK_CREATE=Ms,en.BLOCK_DELETE=Xc,en.BLOCK_DRAG=l_,en.BLOCK_MOVE=To,en.BUBBLE_OPEN=hh,en.BUMP_EVENTS=Gk,en.CHANGE=Hr,en.CLICK=Pd,en.COMMENT_CHANGE=Qv,en.COMMENT_CREATE=Ip,en.COMMENT_DELETE=c_,en.COMMENT_MOVE=dh,en.CREATE=Ms,en.DELETE=Xc,en.FINISHED_LOADING=u_,en.MARKER_MOVE=Uv,en.MOVE=To,en.PROCEDURE_CHANGE_RETURN=iw,en.PROCEDURE_CREATE=ew,en.PROCEDURE_DELETE=Vv,en.PROCEDURE_ENABLE=nw,en.PROCEDURE_PARAMETER_CREATE=rw,en.PROCEDURE_PARAMETER_DELETE=sw,en.PROCEDURE_PARAMETER_RENAME=ow,en.PROCEDURE_RENAME=tw,en.SELECTED=Md,en.TEST_ONLY=Wk,en.THEME_CHANGE=zv,en.TOOLBOX_ITEM_SELECT=Wv,en.TRASHCAN_OPEN=Gv,en.UI=Fv,en.VAR_CREATE=Ap,en.VAR_DELETE=a_,en.VAR_RENAME=Bv,en.VIEWPORT_CHANGE=kp,en.clearPendingUndo=Ts,en.disable=cn,en.disableOrphans=En,en.enable=rt,en.filter=gr,en.fire=at,en.fromJson=rs,en.get=lt,en.getDescendantIds=is,en.getGroup=nn,en.getRecordUndo=qt,en.isEnabled=Dn,en.setGroup=Et,en.setRecordUndo=tn;var dn;(function(s){s[s.VALUE=1]="VALUE",s[s.STATEMENT=3]="STATEMENT",s[s.DUMMY=5]="DUMMY"})(dn||(dn={})),t.module$build$src$core$input_types={},t.module$build$src$core$input_types.inputTypes=dn;var Rp,aw,lw,zk;({document:Rp,DOMParser:aw,XMLSerializer:lw}=globalThis),zk="https://developers.google.com/blockly/xml",t.module$build$src$core$utils$xml={},t.module$build$src$core$utils$xml.NAME_SPACE=zk,t.module$build$src$core$utils$xml.createElement=rn,t.module$build$src$core$utils$xml.createTextNode=Wr,t.module$build$src$core$utils$xml.domToText=Dl,t.module$build$src$core$utils$xml.getDocument=pi,t.module$build$src$core$utils$xml.injectDependencies=ai,t.module$build$src$core$utils$xml.setDocument=_r,t.module$build$src$core$utils$xml.textToDomDocument=Pi;var gU=function(s,c){window.alert(s),c&&c()},_U=function(s,c){c(window.confirm(s))},OU=function(s,c,f){f(window.prompt(s,c))},vU={confirmInternal:Tg},qo={};qo.TEST_ONLY=vU,qo.alert=Ll,qo.confirm=Go,qo.prompt=Ac,qo.setAlert=ud,qo.setConfirm=ss,qo.setPrompt=Uu;var Kt,Qk;Kt=Object.create(null),Qk=function(s){Object.keys(s).forEach(function(c){Kt[c]=s[c]})},t.module$build$src$core$msg={},t.module$build$src$core$msg.Msg=Kt,t.module$build$src$core$msg.setLocale=Qk;var Mp=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=nn(),this.recordUndo=qt()}toJson(){return{type:this.type,group:this.group}}fromJson(s){this.isBlank=!1,this.group=s.group||""}static fromJson(s,c,f){return i("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),f.isBlank=!1,f.group=s.group||"",f.workspaceId=c.id,f}isNull(){return!1}run(s){}getEventWorkspace_(){let s;if(this.workspaceId&&(s=A(this.workspaceId)),!s)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return s}},Hv=class extends Mp{constructor(s){super(),this.isBlank=typeof s>"u",s&&(this.varId=s.getId(),this.workspaceId=s.workspace.id)}toJson(){const s=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return s.varId=this.varId,s}fromJson(s){i("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.varId=s.varId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new Hv),c.varId=s.varId,c}},Vk=class extends Hv{constructor(s){super(s),this.type=Ap,s&&(this.varType=s.type,this.varName=s.name)}toJson(){const s=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return s.varType=this.varType,s.varName=this.varName,s}fromJson(s){i("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.varType=s.varType,this.varName=s.varName}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new Vk),c.varType=s.varType,c.varName=s.varName,c}run(s){const c=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");s?c.createVariable(this.varName,this.varType,this.varId):c.deleteVariableById(this.varId)}};Bt(ct.EVENT,Ap,Vk);var Xv=class{constructor(s,c,f,_){this.workspace=s,this.name=c,this.type=f||"",this.id_=_||Jt()}getId(){return this.id_}static compareByName(s,c){return s.name.localeCompare(c.name,void 0,{sensitivity:"base"})}},cw,uw,Hk;cw="VARIABLE",uw="ijkmnopqrstuvwxyzabcdefgh",Hk={generateUniqueNameInternal:wg},t.module$build$src$core$variables={},t.module$build$src$core$variables.CATEGORY_NAME=cw,t.module$build$src$core$variables.TEST_ONLY=Hk,t.module$build$src$core$variables.VAR_LETTER_OPTIONS=uw,t.module$build$src$core$variables.allDeveloperVariables=Nl,t.module$build$src$core$variables.allUsedVarModels=hd,t.module$build$src$core$variables.createVariableButtonHandler=mo,t.module$build$src$core$variables.flyoutCategory=pa,t.module$build$src$core$variables.flyoutCategoryBlocks=Ja,t.module$build$src$core$variables.generateUniqueName=kc,t.module$build$src$core$variables.generateUniqueNameFromOptions=Gu,t.module$build$src$core$variables.generateVariableFieldDom=fn,t.module$build$src$core$variables.getAddedVariables=zu,t.module$build$src$core$variables.getOrCreateVariablePackage=Rc,t.module$build$src$core$variables.getVariable=zo,t.module$build$src$core$variables.nameUsedWithAnyType=ma,t.module$build$src$core$variables.promptName=Wo,t.module$build$src$core$variables.renameVariable=Wu;var jc=class{constructor(s,c,f,_,x){this.workspace=s,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=x&&!s.getCommentById(x)?x:Jt(),s.addTopComment(this),this.xy_=new _t(0,0),this.height_=f,this.width_=_,this.RTL=s.RTL,this.content_=c,jc.fireCreateEvent(this)}dispose(){this.disposed_||(Dn()&&at(new(lt(c_))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(s){this.height_=s}getWidth(){return this.width_}setWidth(s){this.width_=s}getXY(){return new _t(this.xy_.x,this.xy_.y)}moveBy(s,c){const f=new(lt(dh))(this);this.xy_.translate(s,c),f.recordNew(),at(f)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(s){this.deletable_=s}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(s){this.movable_=s}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(s){this.editable_=s}getContent(){return this.content_}setContent(s){this.content_!==s&&(at(new(lt(Qv))(this,this.content_,s)),this.content_=s)}toXmlWithXY(s){return s=this.toXml(s),s.setAttribute("x",`${Math.round(this.xy_.x)}`),s.setAttribute("y",`${Math.round(this.xy_.y)}`),s.setAttribute("h",`${this.height_}`),s.setAttribute("w",`${this.width_}`),s}toXml(s){const c=rn("comment");return s||(c.id=this.id),c.textContent=this.getContent(),c}static fireCreateEvent(s){if(Dn()){const c=nn();c||Et(!0);try{at(new(lt(Ip))(s))}finally{c||Et(!1)}}}static fromXml(s,c){var f=jc.parseAttributes(s);return c=new jc(c,f.content,f.h,f.w,f.id),f=s.getAttribute("x"),s=s.getAttribute("y"),f=f?parseInt(f,10):NaN,s=s?parseInt(s,10):NaN,isNaN(f)||isNaN(s)||c.moveBy(f,s),jc.fireCreateEvent(c),c}static parseAttributes(s){const c=s.getAttribute("h"),f=s.getAttribute("w"),_=s.getAttribute("x"),x=s.getAttribute("y"),P=s.getAttribute("id");if(!P)throw Error("No ID present in XML comment definition.");let J;return{id:P,h:c?parseInt(c):100,w:f?parseInt(f):100,x:_?parseInt(_):NaN,y:x?parseInt(x):NaN,content:(J=s.textContent)!=null?J:""}}},Xl=class extends Mp{constructor(s){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof s>"u",this.workspaceId=s||""}},Xk=class extends Xl{constructor(s,c,f){super(f),this.type=Md,this.oldElementId=s??void 0,this.newElementId=c??void 0}toJson(){const s=super.toJson();return s.oldElementId=this.oldElementId,s.newElementId=this.newElementId,s}fromJson(s){i("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldElementId=s.oldElementId,this.newElementId=s.newElementId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new Xk),c.oldElementId=s.oldElementId,c.newElementId=s.newElementId,c}};Bt(ct.EVENT,Md,Xk);var jk=!1,Yk=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,Zk={};Zk.inject=li,Zk.register=Ys;var Re=class{constructor(s){this.tagName=s}toString(){return this.tagName}};Re.ANIMATE=new Re("animate"),Re.CIRCLE=new Re("circle"),Re.CLIPPATH=new Re("clipPath"),Re.DEFS=new Re("defs"),Re.FECOMPOSITE=new Re("feComposite"),Re.FECOMPONENTTRANSFER=new Re("feComponentTransfer"),Re.FEFLOOD=new Re("feFlood"),Re.FEFUNCA=new Re("feFuncA"),Re.FEGAUSSIANBLUR=new Re("feGaussianBlur"),Re.FEPOINTLIGHT=new Re("fePointLight"),Re.FESPECULARLIGHTING=new Re("feSpecularLighting"),Re.FILTER=new Re("filter"),Re.FOREIGNOBJECT=new Re("foreignObject"),Re.G=new Re("g"),Re.IMAGE=new Re("image"),Re.LINE=new Re("line"),Re.PATH=new Re("path"),Re.PATTERN=new Re("pattern"),Re.POLYGON=new Re("polygon"),Re.RECT=new Re("rect"),Re.SVG=new Re("svg"),Re.TEXT=new Re("text"),Re.TSPAN=new Re("tspan");var yU=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,bU=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,kne={XY_REGEX:yU,XY_STYLE_REGEX:bU},Dd={};Dd.TEST_ONLY=kne,Dd.getDocumentScroll=Ka,Dd.getInjectionDivXY=Qu,Dd.getRelativeXY=xr,Dd.getViewportBBox=Vu,Dd.is3dSupported=os,Dd.screenToWsCoordinates=Zs;var Ps=8,hw=3,Ine=2,eo=class extends jc{constructor(s,c,f,_,x){super(s,c,f,_,x),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=L(Re.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=s,this.svgRect_=L(Re.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:hw,ry:hw}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!s.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(Z()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Dn()&&at(new(lt(c_))(this)),ye(this.svgGroup_),this.disposeInternal_(),cn(),super.dispose(),rt())}initSvg(s){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(v(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),v(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!s&&this.textarea_&&this.textarea_.select()}pathMouseDown_(s){const c=this.workspace.getGesture(s);c&&c.handleBubbleStart(s,this)}showContextMenu(s){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(Z()!==this){var s=null;if(Z()){s=Z().id,cn();try{Z().unselect()}finally{rt()}}s=new(lt(Md))(s,this.id,this.workspace.id),at(s),N(this),this.addSelect()}}unselect(){if(Z()===this){var s=new(lt(Md))(this.id,null,this.workspace.id);at(s),N(null),this.removeSelect(),this.blurFocus()}}addSelect(){le(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){le(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){le(this.svgGroup_,"blocklyFocused")}removeFocus(){ie(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let s=0,c=0;const f=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let _=this.getSvgRoot();if(_)do{var x=xr(_);s+=x.x,c+=x.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===_&&(x=this.workspace.getBlockDragSurface().getSurfaceTranslation(),s+=x.x,c+=x.y),_=_.parentNode}while(_&&_!==this.workspace.getBubbleCanvas()&&_!==f);return this.xy_=new _t(s,c)}moveBy(s,c){const f=new(lt(dh))(this),_=this.getRelativeToSurfaceXY();this.translate(_.x+s,_.y+c),this.xy_=new _t(_.x+s,_.y+c),f.recordNew(),at(f),this.workspace.resizeContents()}translate(s,c){this.xy_=new _t(s,c),this.getSvgRoot().setAttribute("transform","translate("+s+","+c+")")}moveToDragSurface(){if(this.useDragSurface_){var s=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(s.x,s.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(s,c){s?s.translateSurface(c.x,c.y):(this.svgGroup_.translate_="translate("+c.x+","+c.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(s,c){this.translate(s,c)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var s=this.getRelativeToSurfaceXY();const c=this.getHeightWidth(),f=s.y,_=s.y+c.height;let x;return this.RTL?(x=s.x-c.width,s=s.x):(x=s.x,s=s.x+c.width),new ji(f,_,x,s)}updateMovable(){this.isMovable()?le(this.svgGroup_,"blocklyDraggable"):ie(this.svgGroup_,"blocklyDraggable")}setMovable(s){super.setMovable(s),this.updateMovable()}setEditable(s){super.setEditable(s),this.textarea_&&(this.textarea_.readOnly=!s)}setDragging(s){s?(s=this.getSvgRoot(),s.translate_="",s.skew_="",le(this.svgGroup_,"blocklyDragging")):ie(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(s){super.setContent(s),this.textarea_&&(this.textarea_.value=s)}setDeleteStyle(s){s?le(this.svgGroup_,"blocklyDraggingDelete"):ie(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(s){}toXmlWithXY(s){let c=0;this.workspace.RTL&&(c=this.workspace.getWidth()),s=this.toXml(s);const f=this.getRelativeToSurfaceXY();return s.setAttribute("x",Math.round(this.workspace.RTL?c-f.x:f.x)),s.setAttribute("y",Math.round(f.y)),s.setAttribute("h",this.getHeight()),s.setAttribute("w",this.getWidth()),s}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var s=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=L(Re.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=L(Re.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:hw,ry:hw}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(s.width,s.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&v(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(v(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),v(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),v(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=L(Re.FOREIGNOBJECT,{x:0,y:eo.TOP_OFFSET,class:"blocklyCommentForeignObject"});const s=document.createElementNS(Ea,"body");s.setAttribute("xmlns",Ea),s.className="blocklyMinimalBody";const c=document.createElementNS(Ea,"textarea");return c.className="blocklyCommentTextarea",c.setAttribute("dir",this.RTL?"RTL":"LTR"),c.readOnly=!this.isEditable(),s.appendChild(c),this.textarea_=c,this.foreignObject_.appendChild(s),v(c,"wheel",this,function(f){f.stopPropagation()}),v(c,"change",this,function(f){this.setContent(c.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=L(Re.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),L(Re.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Ps.toString())},this.resizeGroup_),L(Re.LINE,{class:"blocklyResizeLine",x1:Ps/3,y1:Ps-1,x2:Ps-1,y2:Ps/3},this.resizeGroup_),L(Re.LINE,{class:"blocklyResizeLine",x1:2*Ps/3,y1:Ps-1,x2:Ps-1,y2:2*Ps/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=L(Re.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=L(Re.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),L(Re.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),L(Re.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(s){this.unbindDragEvents_(),w(s)||(this.workspace.startDrag(s,new _t(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=v(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=v(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),s.stopPropagation()}deleteMouseDown_(s){this.deleteIconBorder_&&le(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),s.stopPropagation()}deleteMouseOut_(s){this.deleteIconBorder_&&ie(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(s){this.dispose(),s.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(S(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(S(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(s){a(),this.unbindDragEvents_()}resizeMouseMove_(s){this.autoLayout_=!1,s=this.workspace.moveDrag(s),this.setSize_(this.RTL?-s.x:s.x,s.y)}resizeComment_(){const s=this.getHeightWidth(),c=eo.TOP_OFFSET,f=2*Ine;this.foreignObject_.setAttribute("width",s.width),this.foreignObject_.setAttribute("height",(s.height-c).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-s.width).toString()),this.textarea_.style.width=s.width-f+"px",this.textarea_.style.height=s.height-f-c+"px"}setSize_(s,c){s=Math.max(s,45),c=Math.max(c,20+eo.TOP_OFFSET),this.width_=s,this.height_=c,this.svgRect_.setAttribute("width",s),this.svgRect_.setAttribute("height",c),this.svgRectTarget_.setAttribute("width",s),this.svgRectTarget_.setAttribute("height",c),this.svgHandleTarget_.setAttribute("width",s),this.svgHandleTarget_.setAttribute("height",eo.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-s+Ps)+","+(c-Ps)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-s+Ps)+","+-Ps+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(s-Ps)+","+(c-Ps)+")"),this.deleteGroup_.setAttribute("transform","translate("+(s-Ps)+","+-Ps+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&le(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&le(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&ie(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&ie(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(s,c,f){cn();let _;try{const x=jc.parseAttributes(s);if(_=new eo(c,x.content,x.h,x.w,x.id),c.rendered&&(_.initSvg(!0),_.render()),!isNaN(x.x)&&!isNaN(x.y))if(c.RTL){const P=f||c.getWidth();_.moveBy(P-x.x,x.y)}else _.moveBy(x.x,x.y)}finally{rt()}return jc.fireCreateEvent(_),_}};eo.DEFAULT_SIZE=100,eo.TOP_OFFSET=10,Ys(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),t.module$build$src$core$xml={},t.module$build$src$core$xml.appendDomToWorkspace=cs,t.module$build$src$core$xml.blockToDom=$r,t.module$build$src$core$xml.blockToDomWithXY=as,t.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=Xu,t.module$build$src$core$xml.deleteNext=QO,t.module$build$src$core$xml.domToBlock=bi,t.module$build$src$core$xml.domToPrettyText=qs,t.module$build$src$core$xml.domToText=ls,t.module$build$src$core$xml.domToVariables=ju,t.module$build$src$core$xml.domToWorkspace=ga,t.module$build$src$core$xml.textToDom=Gi,t.module$build$src$core$xml.variablesToDom=Hu,t.module$build$src$core$xml.workspaceToDom=qf;var d_=class extends Mp{constructor(s){super(),this.isBlank=!s,s&&(this.blockId=s.id,this.workspaceId=s.workspace.id)}toJson(){const s=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return s.blockId=this.blockId,s}fromJson(s){i("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.blockId=s.blockId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new d_),c.blockId=s.blockId,c}},Pp=class extends d_{constructor(s,c,f,_,x){super(s),this.type=Hr,s&&(this.element=c,this.name=f||void 0,this.oldValue=_,this.newValue=x)}toJson(){const s=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return s.element=this.element,s.name=this.name,s.oldValue=this.oldValue,s.newValue=this.newValue,s}fromJson(s){i("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.element=s.element,this.name=s.name,this.oldValue=s.oldValue,this.newValue=s.newValue}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new Pp),c.element=s.element,c.name=s.name,c.oldValue=s.oldValue,c.newValue=s.newValue,c}isNull(){return this.oldValue===this.newValue}run(s){var c=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(c=c.getBlockById(this.blockId),!c)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(c.mutator&&c.mutator.setVisible(!1),s=s?this.newValue:this.oldValue,this.element){case"field":(c=c.getField(this.name))?c.setValue(s):console.warn("Can't set non-existent field: "+this.name);break;case"comment":c.setCommentText(s||null);break;case"collapsed":c.setCollapsed(!!s);break;case"disabled":c.setEnabled(!s);break;case"inline":c.setInputsInline(!!s);break;case"mutation":const f=Pp.getExtraBlockState_(c);c.loadExtraState?c.loadExtraState(JSON.parse(s||"{}")):c.domToMutation&&c.domToMutation(Gi(s||"<mutation/>")),at(new Pp(c,"mutation",null,f,s));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(s){return s.saveExtraState?(s=s.saveExtraState())?JSON.stringify(s):"":s.mutationToDom&&(s=s.mutationToDom())?ls(s):""}};Bt(ct.EVENT,Hr,Pp);var jv=class{constructor(s){this.workspace=s,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(s,c){this.markers.has(s)&&this.unregisterMarker(s),c.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,c)),this.setMarkerSvg(c.getDrawer().createDom()),this.markers.set(s,c)}unregisterMarker(s){const c=this.markers.get(s);if(c)c.dispose(),this.markers.delete(s);else throw Error("Marker with ID "+s+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(s){return this.markers.get(s)||null}setCursor(s){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=s)&&(s=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(s),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(s){s?(this.workspace.getBlockCanvas().appendChild(s),this.cursorSvg_=s):this.cursorSvg_=null}setMarkerSvg(s){s?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(s,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(s)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const s=Object.keys(this.markers);for(let c=0,f;f=s[c];c++)this.unregisterMarker(f);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};jv.LOCAL_MARKER="local_marker_1",t.module$build$src$core$utils$string={},t.module$build$src$core$utils$string.commonWordPrefix=Bl,t.module$build$src$core$utils$string.commonWordSuffix=Jf,t.module$build$src$core$utils$string.isNumber=Kf,t.module$build$src$core$utils$string.shortestStringLength=Qo,t.module$build$src$core$utils$string.startsWith=o1,t.module$build$src$core$utils$string.wrap=VO;var dw=void 0,Yv=!1,f_=!1,SU=50,TU=0,Zv=0,qk=0,Jk=0,ul=null,qv=null,Kk=0,eI=10,wU=10,EU=750,fw=5,vr=null,ur={};ur.HOVER_MS=EU,ur.LIMIT=SU,ur.MARGINS=fw,ur.OFFSET_X=Kk,ur.OFFSET_Y=eI,ur.RADIUS_OK=wU,ur.bindMouseEvents=Zu,ur.block=YO,ur.createDom=ep,ur.dispose=rl,ur.getCustomTooltip=l1,ur.getDiv=jO,ur.getTooltipOfObject=nl,ur.hide=go,ur.isVisible=c1,ur.setCustomTooltip=a1,ur.unbindMouseEvents=Es,ur.unblock=Cg;var tI=.45,nI=.65,xU={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},to={};to.blend=ya,to.getHsvSaturation=md,to.getHsvValue=qO,to.hexToRgb=Ag,to.hsvToHex=Ju,to.hueToHex=tp,to.names=xU,to.parse=Fl,to.rgbToHex=gd,to.setHsvSaturation=va,to.setHsvValue=u1;var Jv={};Jv.checkMessageReferences=np,Jv.parseBlockColour=ba,Jv.replaceMessageReferences=gi,Jv.tokenizeInterpolation=_d;var Rne=class{},pw=null,mw=null,p_="",m_="",jl,Yl={};Yl.createDom=vo,Yl.getDiv=eh,Yl.hide=xs,Yl.hideIfOwner=rp,Yl.isVisible=Sa,Yl.positionWithAnchor=JO,Yl.show=th,Yl.testOnly_setDiv=ip;var $n=class{constructor(s,c,f){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new ps(0,0),s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){s.tooltip&&this.setTooltip(gi(s.tooltip))}setSourceBlock(s){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=s}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=L(Re.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=L(Re.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=L(Re.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const s=this.getClickTarget_();if(!s)throw Error("A click target has not been set.");Zu(s),this.mouseDownWrapper_=v(s,"pointerdown",this,this.onMouseDown_)}fromXml(s){this.setValue(s.textContent)}toXml(s){return s.textContent=this.getValue(),s}saveState(s){return s=this.saveLegacyState($n),s!==null?s:this.getValue()}loadState(s){this.loadLegacyState($n,s)||this.setValue(s)}saveLegacyState(s){return s.prototype.saveState===this.saveState&&s.prototype.toXml!==this.toXml?(s=rn("field"),s.setAttribute("name",this.name||""),ls(this.toXml(s)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(s,c){return s.prototype.loadState===this.loadState&&s.prototype.fromXml!==this.fromXml?(this.fromXml(Gi(c)),!0):!1}dispose(){vn(this),rp(this),Es(this.getClickTarget_()),this.mouseDownWrapper_&&S(this.mouseDownWrapper_),ye(this.fieldGroup_),this.disposed=!0}updateEditable(){const s=this.fieldGroup_,c=this.getSourceBlock();this.EDITABLE&&s&&c&&(this.enabled_&&c.isEditable()?(le(s,"blocklyEditableText"),ie(s,"blocklyNonEditableText"),s.style.cursor=this.CURSOR):(le(s,"blocklyNonEditableText"),ie(s,"blocklyEditableText"),s.style.cursor=""))}setEnabled(s){this.enabled_=s,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==$n.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let s=!1;return this.name&&(this.SERIALIZABLE?s=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),s=!0)),s}isVisible(){return this.visible_}setVisible(s){if(this.visible_!==s){this.visible_=s;var c=this.fieldGroup_;c&&(c.style.display=s?"block":"none")}}setValidator(s){this.validator_=s}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(s){this.isClickable()&&this.showEditor_(s)}showEditor_(s){}updateSize_(s){const c=this.getConstants();s=s!==void 0?s:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let f=2*s,_=c.FIELD_TEXT_HEIGHT,x=0;this.textElement_&&(x=W(this.textElement_,c.FIELD_TEXT_FONTSIZE,c.FIELD_TEXT_FONTWEIGHT,c.FIELD_TEXT_FONTFAMILY),f+=x),this.borderRect_&&(_=Math.max(_,c.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=_,this.size_.width=f,this.positionTextElement_(s,x),this.positionBorderRect_()}positionTextElement_(s,c){if(this.textElement_){var f=this.getConstants(),_=this.size_.height/2,x;this.textElement_.setAttribute("x",`${(x=this.getSourceBlock())!=null&&x.RTL?this.size_.width-c-s:s}`),this.textElement_.setAttribute("y",`${f.FIELD_TEXT_BASELINE_CENTER?_:_-f.FIELD_TEXT_HEIGHT/2+f.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new ps(0,0)}getScaledBBox(){let s;var c=this.getSourceBlock();if(!c)throw new yr;if(this.borderRect_){var f=this.borderRect_.getBoundingClientRect();s=me(this.borderRect_),c=f.width,f=f.height}else{f=this.sourceBlock_.getHeightWidth();const _=c.workspace.scale;s=this.getAbsoluteXY_(),c=(f.width+1)*_,f=(f.height+1)*_,It?(s.x+=1.5*_,s.y+=1.5*_):(s.x-=.5*_,s.y-=.5*_)}return new ji(s.y,s.y+f,s.x,s.x+c)}getDisplayText_(){let s=this.getText();return s?(s.length>this.maxDisplayLength&&(s=s.substring(0,this.maxDisplayLength-2)+""),s=s.replace(/\s/g,$n.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(s+=""),s):$n.NBSP}getText(){const s=this.getText_();return String(s!==null?s:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(s){if(s!==null){var c=this.doClassValidation_(s);if(s=this.processValidation_(s,c),!(s instanceof Error)){if((c=this.getValidator())&&(c=c.call(this,s),s=this.processValidation_(s,c),s instanceof Error))return;if(c=this.sourceBlock_,!c||!c.disposed){var f=this.getValue();f===s?this.doValueUpdate_(s):(this.doValueUpdate_(s),c&&Dn()&&at(new(lt(Hr))(c,"field",this.name||null,f,s)),this.isDirty_&&this.forceRerender())}}}}processValidation_(s,c){return c===null?(this.doValueInvalid_(s),this.isDirty_&&this.forceRerender(),Error()):(c!==void 0&&(s=c),s)}getValue(){return this.value_}doClassValidation_(s){return s??null}doValueUpdate_(s){this.value_=s,this.isDirty_=!0}doValueInvalid_(s){}onMouseDown_(s){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(s=this.sourceBlock_.workspace.getGesture(s))&&s.setStartField(this)}setTooltip(s){s||s===""||(s=this.sourceBlock_);const c=this.getClickTarget_();c?c.tooltip=s:this.tooltip_=s}getTooltip(){const s=this.getClickTarget_();return nl(s||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return me(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let s=null;const c=this.getSourceBlock();if(!c)throw new yr;const f=c.inputList;for(let _=0;_<c.inputList.length;_++){const x=f[_],P=x.fieldRow;for(let J=0;J<P.length;J++)if(P[J]===this){s=x;break}}return s}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(s){return!1}setCursorSvg(s){if(s){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(s),this.cursorSvg_=s}else this.cursorSvg_=null}setMarkerSvg(s){if(s){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(s),this.markerSvg_=s}else this.markerSvg_=null}updateMarkers_(){var s=this.getSourceBlock();if(!s)throw new yr;s=s.workspace,s.keyboardAccessibilityMode&&this.cursorSvg_&&s.getCursor().draw(),s.keyboardAccessibilityMode&&this.markerSvg_&&s.getMarker(jv.LOCAL_MARKER).draw()}};$n.NBSP="",$n.SKIP_SETUP=new Rne;var yr=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},$U={fromJsonInternal:kg},Kv={};Kv.TEST_ONLY=$U,Kv.fromJson=sp,Kv.register=$s,Kv.unregister=ev;var Mne="aria-",Pne="role",Jo;(function(s){s.GRID="grid",s.GRIDCELL="gridcell",s.GROUP="group",s.LISTBOX="listbox",s.MENU="menu",s.MENUITEM="menuitem",s.MENUITEMCHECKBOX="menuitemcheckbox",s.OPTION="option",s.PRESENTATION="presentation",s.ROW="row",s.TREE="tree",s.TREEITEM="treeitem"})(Jo||(Jo={}));var Oi;(function(s){s.ACTIVEDESCENDANT="activedescendant",s.COLCOUNT="colcount",s.DISABLED="disabled",s.EXPANDED="expanded",s.INVALID="invalid",s.LABEL="label",s.LABELLEDBY="labelledby",s.LEVEL="level",s.ORIENTATION="orientation",s.POSINSET="posinset",s.ROWCOUNT="rowcount",s.SELECTED="selected",s.SETSIZE="setsize",s.VALUEMAX="valuemax",s.VALUEMIN="valuemin"})(Oi||(Oi={}));var ey={};ey.Role=Jo,ey.State=Oi,ey.setRole=Qi,ey.setState=Kn;var Rt;(function(s){s[s.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",s[s.MAC_ENTER=3]="MAC_ENTER",s[s.BACKSPACE=8]="BACKSPACE",s[s.TAB=9]="TAB",s[s.NUM_CENTER=12]="NUM_CENTER",s[s.ENTER=13]="ENTER",s[s.SHIFT=16]="SHIFT",s[s.CTRL=17]="CTRL",s[s.ALT=18]="ALT",s[s.PAUSE=19]="PAUSE",s[s.CAPS_LOCK=20]="CAPS_LOCK",s[s.ESC=27]="ESC",s[s.SPACE=32]="SPACE",s[s.PAGE_UP=33]="PAGE_UP",s[s.PAGE_DOWN=34]="PAGE_DOWN",s[s.END=35]="END",s[s.HOME=36]="HOME",s[s.LEFT=37]="LEFT",s[s.UP=38]="UP",s[s.RIGHT=39]="RIGHT",s[s.DOWN=40]="DOWN",s[s.PLUS_SIGN=43]="PLUS_SIGN",s[s.PRINT_SCREEN=44]="PRINT_SCREEN",s[s.INSERT=45]="INSERT",s[s.DELETE=46]="DELETE",s[s.ZERO=48]="ZERO",s[s.ONE=49]="ONE",s[s.TWO=50]="TWO",s[s.THREE=51]="THREE",s[s.FOUR=52]="FOUR",s[s.FIVE=53]="FIVE",s[s.SIX=54]="SIX",s[s.SEVEN=55]="SEVEN",s[s.EIGHT=56]="EIGHT",s[s.NINE=57]="NINE",s[s.FF_SEMICOLON=59]="FF_SEMICOLON",s[s.FF_EQUALS=61]="FF_EQUALS",s[s.FF_DASH=173]="FF_DASH",s[s.FF_HASH=163]="FF_HASH",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.AT_SIGN=64]="AT_SIGN",s[s.A=65]="A",s[s.B=66]="B",s[s.C=67]="C",s[s.D=68]="D",s[s.E=69]="E",s[s.F=70]="F",s[s.G=71]="G",s[s.H=72]="H",s[s.I=73]="I",s[s.J=74]="J",s[s.K=75]="K",s[s.L=76]="L",s[s.M=77]="M",s[s.N=78]="N",s[s.O=79]="O",s[s.P=80]="P",s[s.Q=81]="Q",s[s.R=82]="R",s[s.S=83]="S",s[s.T=84]="T",s[s.U=85]="U",s[s.V=86]="V",s[s.W=87]="W",s[s.X=88]="X",s[s.Y=89]="Y",s[s.Z=90]="Z",s[s.META=91]="META",s[s.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",s[s.CONTEXT_MENU=93]="CONTEXT_MENU",s[s.NUM_ZERO=96]="NUM_ZERO",s[s.NUM_ONE=97]="NUM_ONE",s[s.NUM_TWO=98]="NUM_TWO",s[s.NUM_THREE=99]="NUM_THREE",s[s.NUM_FOUR=100]="NUM_FOUR",s[s.NUM_FIVE=101]="NUM_FIVE",s[s.NUM_SIX=102]="NUM_SIX",s[s.NUM_SEVEN=103]="NUM_SEVEN",s[s.NUM_EIGHT=104]="NUM_EIGHT",s[s.NUM_NINE=105]="NUM_NINE",s[s.NUM_MULTIPLY=106]="NUM_MULTIPLY",s[s.NUM_PLUS=107]="NUM_PLUS",s[s.NUM_MINUS=109]="NUM_MINUS",s[s.NUM_PERIOD=110]="NUM_PERIOD",s[s.NUM_DIVISION=111]="NUM_DIVISION",s[s.F1=112]="F1",s[s.F2=113]="F2",s[s.F3=114]="F3",s[s.F4=115]="F4",s[s.F5=116]="F5",s[s.F6=117]="F6",s[s.F7=118]="F7",s[s.F8=119]="F8",s[s.F9=120]="F9",s[s.F10=121]="F10",s[s.F11=122]="F11",s[s.F12=123]="F12",s[s.NUMLOCK=144]="NUMLOCK",s[s.SCROLL_LOCK=145]="SCROLL_LOCK",s[s.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",s[s.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",s[s.SEMICOLON=186]="SEMICOLON",s[s.DASH=189]="DASH",s[s.EQUALS=187]="EQUALS",s[s.COMMA=188]="COMMA",s[s.PERIOD=190]="PERIOD",s[s.SLASH=191]="SLASH",s[s.APOSTROPHE=192]="APOSTROPHE",s[s.TILDE=192]="TILDE",s[s.SINGLE_QUOTE=222]="SINGLE_QUOTE",s[s.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",s[s.BACKSLASH=220]="BACKSLASH",s[s.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",s[s.WIN_KEY=224]="WIN_KEY",s[s.MAC_FF_META=224]="MAC_FF_META",s[s.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",s[s.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",s[s.WIN_IME=229]="WIN_IME",s[s.VK_NONAME=252]="VK_NONAME",s[s.PHANTOM=255]="PHANTOM"})(Rt||(Rt={}));var iI=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(s){this.menuItems.push(s)}render(s){const c=document.createElement("div");c.className="blocklyMenu goog-menu blocklyNonSelectable",c.tabIndex=0,this.roleName&&Qi(c,this.roleName),this.element=c;for(let f=0,_;_=this.menuItems[f];f++)c.appendChild(_.createDom());return this.mouseOverHandler=v(c,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=v(c,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=v(c,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=v(c,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=v(c,"keydown",this,this.handleKeyEvent),s.appendChild(c),c}getElement(){return this.element}focus(){const s=this.getElement();s&&(s.focus({preventScroll:!0}),le(s,"blocklyFocused"))}blur(){const s=this.getElement();s&&(s.blur(),ie(s,"blocklyFocused"))}setRole(s){this.roleName=s}dispose(){this.mouseOverHandler&&(S(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(S(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(S(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(S(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(S(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let s=0,c;c=this.menuItems[s];s++)c.dispose();this.element=null}getMenuItem(s){const c=this.getElement();for(;s&&s!==c;){if(s.classList.contains("blocklyMenuItem")){for(let f=0,_;_=this.menuItems[f];f++)if(_.getElement()===s)return _}s=s.parentElement}return null}setHighlighted(s){var c=this.highlightedItem;c&&(c.setHighlighted(!1),this.highlightedItem=null),s&&(s.setHighlighted(!0),this.highlightedItem=s,c=this.getElement(),Se(s.getElement(),c),Kn(c,Oi.ACTIVEDESCENDANT,s.getId()))}highlightNext(){const s=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(s,1)}highlightPrevious(){const s=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>s?this.menuItems.length:s,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(s,c){s+=c;let f;for(;f=this.menuItems[s];){if(f.isEnabled()){this.setHighlighted(f);break}s+=c}}handleMouseOver(s){(s=this.getMenuItem(s.target))&&(s.isEnabled()?this.highlightedItem!==s&&this.setHighlighted(s):this.setHighlighted(null))}handleClick(s){const c=this.openingCoords;if(this.openingCoords=null,c&&typeof s.clientX=="number"){const f=new _t(s.clientX,s.clientY);if(1>_t.distance(c,f))return}(s=this.getMenuItem(s.target))&&s.performAction()}handleMouseEnter(s){this.focus()}handleMouseLeave(s){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(s){if(this.menuItems.length&&!(s.shiftKey||s.ctrlKey||s.metaKey||s.altKey)){var c=this.highlightedItem;switch(s.keyCode){case Rt.ENTER:case Rt.SPACE:c&&c.performAction();break;case Rt.UP:this.highlightPrevious();break;case Rt.DOWN:this.highlightNext();break;case Rt.PAGE_UP:case Rt.HOME:this.highlightFirst();break;case Rt.PAGE_DOWN:case Rt.END:this.highlightLast();break;default:return}s.preventDefault(),s.stopPropagation()}}getSize(){const s=this.getElement(),c=Ae(s);return c.height=s.scrollHeight,c}},rI=class{constructor(s,c){this.content=s,this.opt_value=c,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const s=document.createElement("div");s.id=Zt(),this.element=s,s.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const c=document.createElement("div");if(c.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var f=document.createElement("div");f.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",c.appendChild(f)}return f=this.content,typeof this.content=="string"&&(f=document.createTextNode(this.content)),c.appendChild(f),s.appendChild(c),this.roleName&&Qi(s,this.roleName),Kn(s,Oi.SELECTED,this.checkable&&this.checked||!1),Kn(s,Oi.DISABLED,!this.enabled),s}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let s;return(s=this.opt_value)!=null?s:null}setRightToLeft(s){this.rightToLeft=s}setRole(s){this.roleName=s}setCheckable(s){this.checkable=s}setChecked(s){this.checked=s}setHighlighted(s){this.highlight=s;const c=this.getElement();c&&this.isEnabled()&&(s?(le(c,"blocklyMenuItemHighlight"),le(c,"goog-menuitem-highlight")):(ie(c,"blocklyMenuItemHighlight"),ie(c,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(s){this.enabled=s}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(s,c){this.actionHandler=s.bind(c)}},Zl=class extends $n{constructor(s,c,f){super($n.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,Di(s)&&(Array.isArray(s)?(op(s),s=us(s),this.menuGenerator_=s.options,this.prefixField=s.prefix||null,this.suffixField=s.suffix||null):this.menuGenerator_=s,this.selectedOption_=this.getOptions(!1)[0],f&&this.configure_(f),this.setValue(this.selectedOption_[1]),c&&this.setValidator(c))}fromXml(s){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(s.textContent)}loadState(s){this.loadLegacyState(Zl,s)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(s))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=L(Re.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&le(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let s;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((s=this.getSourceBlock())!=null&&s.isShadow())}createTextArrow_(){this.arrow_=L(Re.TSPAN,{},this.textElement_);let s;this.arrow_.appendChild(document.createTextNode((s=this.getSourceBlock())!=null&&s.RTL?Zl.ARROW_CHAR+" ":" "+Zl.ARROW_CHAR));let c;(c=this.getSourceBlock())!=null&&c.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=L(Re.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Zo,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(s){var c=this.getSourceBlock();if(!c)throw new yr;this.dropdownCreate_(),this.menu_.openingCoords=s&&typeof s.clientX=="number"?new _t(s.clientX,s.clientY):null,We(),s=this.menu_.render(Le()),le(s,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(s=c.isShadow()?c.getParent().getColour():c.getColour(),c=c.isShadow()?c.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,F(s,c)),ge(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const s=this.getSourceBlock();if(!s)throw new yr;const c=new iI;c.setRole(Jo.LISTBOX),this.menu_=c;const f=this.getOptions(!1);this.selectedMenuItem_=null;for(let x=0;x<f.length;x++){const[P,J]=f[x];if(typeof P=="object"){var _=new Image(P.width,P.height);_.src=P.src,_.alt=P.alt||""}else _=P;_=new rI(_,J),_.setRole(Jo.OPTION),_.setRightToLeft(s.RTL),_.setCheckable(!0),c.addChild(_),_.setChecked(J===this.value_),J===this.value_&&(this.selectedMenuItem_=_),_.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(s){vn(this,!0),this.onItemSelected_(this.menu_,s)}onItemSelected_(s,c){this.setValue(c.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(s){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:s&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),op(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(s){return this.getOptions(!0).some(c=>c[1]===s)?s:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+s),null)}doValueUpdate_(s){super.doValueUpdate_(s),s=this.getOptions(!0);for(let c=0,f;f=s[c];c++)f[1]===this.value_&&(this.selectedOption_=f)}applyColour(){const s=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",s.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",s.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=s.colourSecondary:this.arrow_.style.fill=s.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const s=this.selectedOption_&&this.selectedOption_[0];s&&typeof s=="object"?this.renderSelectedImage_(s):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(s){const c=this.getSourceBlock();if(!c)throw new yr;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(Zo,"xlink:href",s.src),this.imageElement_.setAttribute("height",`${s.height}`),this.imageElement_.setAttribute("width",`${s.width}`);const f=Number(s.height);s=Number(s.width);var _=!!this.borderRect_;const x=Math.max(_?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,f+Lne);_=_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let P;P=this.svgArrow_?this.positionSVGArrow_(s+_,x/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):W(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=s+P+2*_,this.size_.height=x;let J=0;c.RTL?this.imageElement_.setAttribute("x",(_+P).toString()):(J=s+P,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",_.toString())),this.imageElement_.setAttribute("y",(x/2-f/2).toString()),this.positionTextElement_(J+_,s+P)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var s=this.getTextElement();le(s,"blocklyDropdownText"),s.setAttribute("text-anchor","start");var c=!!this.borderRect_;s=Math.max(c?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const f=W(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);c=c?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let _=0;this.svgArrow_&&(_=this.positionSVGArrow_(f+c,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=f+_+2*c,this.size_.height=s,this.positionTextElement_(c,f)}positionSVGArrow_(s,c){if(!this.svgArrow_)return 0;const f=this.getSourceBlock();if(!f)throw new yr;const _=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,x=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,P=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(f.RTL?_:s+x)+","+c+")"),P+x}getText_(){if(!this.selectedOption_)return null;const s=this.selectedOption_[0];return typeof s=="object"?s.alt:s}static fromJson(s){if(!s.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(s.options,void 0,s)}};Zl.CHECKMARK_OVERHANG=25,Zl.MAX_MENU_HEIGHT_VH=.45,Zl.ARROW_CHAR="";var Dne=5,Lne=2*Dne;$s("field_dropdown",Zl),t.module$build$src$core$field_dropdown={},t.module$build$src$core$field_dropdown.FieldDropdown=Zl;var sI=class extends Xl{constructor(s,c,f){super(s?s.workspace.id:void 0),this.type=hh,s&&(this.blockId=s.id,this.isOpen=c,this.bubbleType=f)}toJson(){const s=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return s.isOpen=this.isOpen,s.bubbleType=this.bubbleType,s.blockId=this.blockId||"",s}fromJson(s){i("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.isOpen=s.isOpen,this.bubbleType=s.bubbleType,this.blockId=s.blockId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new sI),c.isOpen=s.isOpen,c.bubbleType=s.bubbleType,c.blockId=s.blockId,c}},oI;(function(s){s.MUTATOR="mutator",s.COMMENT="comment",s.WARNING="warning"})(oI||(oI={})),Bt(ct.EVENT,hh,sI);var Ni=class{constructor(s,c,f,_,x){this.workspace=s,this.horizontal=c,this.oldHostMetrics=null,this.ratio=1,this.origin=new _t(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new _t(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=f||!1,this.margin=x!==void 0?x:Ni.DEFAULT_SCROLLBAR_MARGIN,s="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),_&&(s+=" "+_),this.outerSvg=L(Re.SVG,{class:s}),_=L(Re.G,{},this.outerSvg),this.svgBackground=L(Re.RECT,{class:"blocklyScrollbarBackground"},_),s=Math.floor((Ni.scrollbarThickness-5)/2),this.svgHandle=L(Re.RECT,{class:"blocklyScrollbarHandle",rx:s,ry:s},_),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),xe(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),c?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=v(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=v(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const s=Ni.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(s)),this.outerSvg.setAttribute("height",String(s)),this.svgHandle.setAttribute("height",String(s-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(s)),this.outerSvg.setAttribute("width",String(s)),this.svgHandle.setAttribute("width",String(s-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),S(this.onMouseDownBarWrapper_),S(this.onMouseDownHandleWrapper_),ye(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(s){return s=0>=s||isNaN(s)?0:Math.min(s,this.scrollbarLength)}setHandleLength(s){this.handleLength=s,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(s){return s=0>=s||isNaN(s)?0:Math.min(s,this.scrollbarLength-this.handleLength)}setHandlePosition(s){this.handlePosition=s,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(s){this.scrollbarLength=s,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(s,c){this.position.x=s,this.position.y=c,Xe(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(s){!s&&(s=this.workspace.getMetrics(),!s)||this.oldHostMetrics&&Ni.metricsAreEquivalent(s,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(s):this.resizeVertical(s),this.oldHostMetrics=s,this.updateMetrics())}requiresViewResize(s){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==s.viewWidth||this.oldHostMetrics.viewHeight!==s.viewHeight||this.oldHostMetrics.absoluteLeft!==s.absoluteLeft||this.oldHostMetrics.absoluteTop!==s.absoluteTop:!0}resizeHorizontal(s){this.requiresViewResize(s)?this.resizeViewHorizontal(s):this.resizeContentHorizontal(s)}resizeViewHorizontal(s){var c=s.viewWidth-2*this.margin;this.pair&&(c-=Ni.scrollbarThickness),this.setScrollbarLength(Math.max(0,c)),c=s.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(c+=Ni.scrollbarThickness),this.setPosition(c,s.absoluteTop+s.viewHeight-Ni.scrollbarThickness-this.margin),this.resizeContentHorizontal(s)}resizeContentHorizontal(s){if(s.viewWidth>=s.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var c=this.scrollbarLength*s.viewWidth/s.scrollWidth;c=this.constrainHandleLength(c),this.setHandleLength(c),c=s.scrollWidth-s.viewWidth;var f=this.scrollbarLength-this.handleLength;s=(s.viewLeft-s.scrollLeft)/c*f,s=this.constrainHandlePosition(s),this.setHandlePosition(s),this.ratio=f/c}}resizeVertical(s){this.requiresViewResize(s)?this.resizeViewVertical(s):this.resizeContentVertical(s)}resizeViewVertical(s){let c=s.viewHeight-2*this.margin;this.pair&&(c-=Ni.scrollbarThickness),this.setScrollbarLength(Math.max(0,c)),this.setPosition(this.workspace.RTL?s.absoluteLeft+this.margin:s.absoluteLeft+s.viewWidth-Ni.scrollbarThickness-this.margin,s.absoluteTop+this.margin),this.resizeContentVertical(s)}resizeContentVertical(s){if(s.viewHeight>=s.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var c=this.scrollbarLength*s.viewHeight/s.scrollHeight;c=this.constrainHandleLength(c),this.setHandleLength(c),c=s.scrollHeight-s.viewHeight;var f=this.scrollbarLength-this.handleLength;s=(s.viewTop-s.scrollTop)/c*f,s=this.constrainHandlePosition(s),this.setHandlePosition(s),this.ratio=f/c}}isVisible(){return this.isHandleVisible}setContainerVisible(s){const c=s!==this.containerVisible;this.containerVisible=s,c&&this.updateDisplay_()}setVisible(s){const c=s!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=s,c&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(s){if(this.workspace.markFocused(),a(),this.cleanUp(),w(s))s.stopPropagation();else{var c=E(s,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());c=this.horizontal?c.x:c.y;var f=Qu(this.svgHandle);f=this.horizontal?f.x:f.y;var _=this.handlePosition,x=.95*this.handleLength;c<=f?_-=x:c>=f+this.handleLength&&(_+=x),this.setHandlePosition(this.constrainHandlePosition(_)),this.updateMetrics(),s.stopPropagation(),s.preventDefault()}}onMouseDownHandle(s){this.workspace.markFocused(),this.cleanUp(),w(s)?s.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?s.clientX:s.clientY,this.onMouseUpWrapper_=v(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=v(document,"pointermove",this,this.onMouseMoveHandle),s.stopPropagation(),s.preventDefault())}onMouseMoveHandle(s){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?s.clientX:s.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),a(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(S(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(S(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let s=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(s)&&(s=0),s}updateMetrics(){const s=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:s}):this.workspace.setMetrics({y:s})}set(s,c){this.setHandlePosition(this.constrainHandlePosition(s*this.ratio)),(c||c===void 0)&&this.updateMetrics()}setOrigin(s,c){this.origin=new _t(s,c)}static metricsAreEquivalent(s,c){return s.viewWidth===c.viewWidth&&s.viewHeight===c.viewHeight&&s.viewLeft===c.viewLeft&&s.viewTop===c.viewTop&&s.absoluteTop===c.absoluteTop&&s.absoluteLeft===c.absoluteLeft&&s.scrollWidth===c.scrollWidth&&s.scrollHeight===c.scrollHeight&&s.scrollLeft===c.scrollLeft&&s.scrollTop===c.scrollTop}};Ni.scrollbarThickness=Pv?25:15,Ni.DEFAULT_SCROLLBAR_MARGIN=.5;var ln=class{constructor(s,c,f,_,x,P){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=s,this.content_=c,this.shape_=f,f=ln.ARROW_ANGLE,this.workspace_.RTL&&(f=-f),this.arrowRadians=ae(f),s.getBubbleCanvas().appendChild(this.createDom(c,!(!x||!P))),this.setAnchorLocation(_),x&&P||(s=this.content_.getBBox(),x=s.width+2*ln.BORDER_WIDTH,P=s.height+2*ln.BORDER_WIDTH),this.setBubbleSize(x,P),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(s,c){this.bubbleGroup=L(Re.G,{});var f={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return ft&&(f={}),f=L(Re.G,f,this.bubbleGroup),this.bubbleArrow=L(Re.PATH,{},f),this.bubbleBack=L(Re.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ln.BORDER_WIDTH,ry:ln.BORDER_WIDTH},f),c?(this.resizeGroup=L(Re.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),c=2*ln.BORDER_WIDTH,L(Re.POLYGON,{points:"0,x x,x x,0".replace(/x/g,c.toString())},this.resizeGroup),L(Re.LINE,{class:"blocklyResizeLine",x1:c/3,y1:c-1,x2:c-1,y2:c/3},this.resizeGroup),L(Re.LINE,{class:"blocklyResizeLine",x1:2*c/3,y1:c-1,x2:c-1,y2:2*c/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=v(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=v(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(s),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(s){let c;(c=this.bubbleGroup)==null||c.setAttribute("data-block-id",s)}bubbleMouseDown(s){const c=this.workspace_.getGesture(s);c&&c.handleBubbleStart(s,this)}showContextMenu(s){}isDeletable(){return!1}setDeleteStyle(s){}resizeMouseDown(s){this.promote(),ln.unbindDragEvents(),w(s)||(this.workspace_.startDrag(s,new _t(this.workspace_.RTL?-this.width:this.width,this.height)),ln.onMouseUpWrapper=v(document,"pointerup",this,ln.bubbleMouseUp),ln.onMouseMoveWrapper=v(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),s.stopPropagation()}resizeMouseMove(s){this.autoLayout=!1,s=this.workspace_.moveDrag(s),this.setBubbleSize(this.workspace_.RTL?-s.x:s.x,s.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(s){this.resizeCallback=s}registerMoveEvent(s){this.moveCallback=s}promote(){let s;const c=(s=this.bubbleGroup)==null?void 0:s.parentNode;return(c==null?void 0:c.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(c==null||c.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(s){this.anchorXY=s,this.rendered&&this.positionBubble()}layoutBubble(){var s=this.workspace_.getMetricsManager().getViewMetrics(!0),c=this.getOptimalRelativeLeft(s),f=this.getOptimalRelativeTop(s),_=this.shape_.getBBox();const x={x:c,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},P={x:-this.width-30,y:f};f={x:_.width,y:f};var J={x:c,y:_.height};c=_.width<_.height?f:J,_=_.width<_.height?J:f,f=this.getOverlap(x,s),J=this.getOverlap(P,s);const be=this.getOverlap(c,s);s=this.getOverlap(_,s),s=Math.max(f,J,be,s),f===s?(this.relativeLeft=x.x,this.relativeTop=x.y):J===s?(this.relativeLeft=P.x,this.relativeTop=P.y):be===s?(this.relativeLeft=c.x,this.relativeTop=c.y):(this.relativeLeft=_.x,this.relativeTop=_.y)}getOverlap(s,c){var f=this.workspace_.RTL?this.anchorXY.x-s.x-this.width:s.x+this.anchorXY.x;return s=s.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(f+this.width,c.left+c.width)-Math.max(f,c.left))*(Math.min(s+this.height,c.top+c.height)-Math.max(s,c.top))/(this.width*this.height)))}getOptimalRelativeLeft(s){let c=-this.width/4;if(this.width>s.width)return c;if(this.workspace_.RTL){var f=this.anchorXY.x-c,_=s.left+s.width;s=s.left+Ni.scrollbarThickness/this.workspace_.scale,f-this.width<s?c=-(s-this.anchorXY.x+this.width):f>_&&(c=-(_-this.anchorXY.x))}else{f=c+this.anchorXY.x,_=f+this.width;const x=s.left;s=s.left+s.width-Ni.scrollbarThickness/this.workspace_.scale,f<x?c=x-this.anchorXY.x:_>s&&(c=s-this.anchorXY.x-this.width)}return c}getOptimalRelativeTop(s){let c=-this.height/4;if(this.height>s.height)return c;const f=this.anchorXY.y+c,_=f+this.height,x=s.top;s=s.top+s.height-Ni.scrollbarThickness/this.workspace_.scale;const P=this.anchorXY.y;return f<x?c=x-P:_>s&&(c=s-P-this.height),c}positionBubble(){let s=this.anchorXY.x;s=this.workspace_.RTL?s-(this.relativeLeft+this.width):s+this.relativeLeft,this.moveTo(s,this.relativeTop+this.anchorXY.y)}moveTo(s,c){let f;(f=this.bubbleGroup)==null||f.setAttribute("transform","translate("+s+","+c+")")}setDragging(s){!s&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new ps(this.width,this.height)}setBubbleSize(s,c){const f=2*ln.BORDER_WIDTH;s=Math.max(s,f+45),c=Math.max(c,f+20),this.width=s,this.height=c;let _;(_=this.bubbleBack)==null||_.setAttribute("width",s.toString());let x;(x=this.bubbleBack)==null||x.setAttribute("height",c.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*ln.BORDER_WIDTH+","+(c-f)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(s-f)+","+(c-f)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const s=[];var c=this.width/2,f=this.height/2,_=-this.relativeLeft,x=-this.relativeTop;if(c===_&&f===x)s.push("M "+c+","+f);else{x-=f,_-=c,this.workspace_.RTL&&(_*=-1);var P=Math.sqrt(x*x+_*_),J=Math.acos(_/P);0>x&&(J=2*Math.PI-J);var be=J+Math.PI/2;be>2*Math.PI&&(be-=2*Math.PI);var tt=Math.sin(be);const Ti=Math.cos(be);var Ot=this.getBubbleSize();be=(Ot.width+Ot.height)/ln.ARROW_THICKNESS,be=Math.min(be,Ot.width,Ot.height)/4,Ot=1-ln.ANCHOR_RADIUS/P,_=c+Ot*_,x=f+Ot*x,Ot=c+be*Ti;const ka=f+be*tt;c-=be*Ti,f-=be*tt,tt=J+this.arrowRadians,tt>2*Math.PI&&(tt-=2*Math.PI),J=Math.sin(tt)*P/ln.ARROW_BEND,P=Math.cos(tt)*P/ln.ARROW_BEND,s.push("M"+Ot+","+ka),s.push("C"+(Ot+P)+","+(ka+J)+" "+_+","+x+" "+_+","+x),s.push("C"+_+","+x+" "+(c+P)+","+(f+J)+" "+c+","+f)}s.push("z");let Mn;(Mn=this.bubbleArrow)==null||Mn.setAttribute("d",s.join(" "))}setColour(s){let c;(c=this.bubbleBack)==null||c.setAttribute("fill",s);let f;(f=this.bubbleArrow)==null||f.setAttribute("fill",s)}dispose(){this.onMouseDownBubbleWrapper&&S(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&S(this.onMouseDownResizeWrapper),ln.unbindDragEvents(),ye(this.bubbleGroup),this.disposed=!0}moveDuringDrag(s,c){s?s.translateSurface(c.x,c.y):this.moveTo(c.x,c.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-c.x-this.width:c.x-this.anchorXY.x,this.relativeTop=c.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new _t(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(s){this.autoLayout=s}static unbindDragEvents(){ln.onMouseUpWrapper&&(S(ln.onMouseUpWrapper),ln.onMouseUpWrapper=null),ln.onMouseMoveWrapper&&(S(ln.onMouseMoveWrapper),ln.onMouseMoveWrapper=null)}static bubbleMouseUp(s){a(),ln.unbindDragEvents()}static textToDom(s){const c=L(Re.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:ln.BORDER_WIDTH});s=s.split(`
`);for(let f=0;f<s.length;f++){const _=L(Re.TSPAN,{dy:"1em",x:ln.BORDER_WIDTH},c),x=document.createTextNode(s[f]);_.appendChild(x)}return c}static createNonEditableBubble(s,c,f){if(f=new ln(c.workspace,s,c.pathObject.svgPath,f,null,null),f.setSvgId(c.id),c.RTL){c=s.getBBox().width;for(let _=0,x;x=s.childNodes[_];_++)x.setAttribute("text-anchor","end"),x.setAttribute("x",(c+ln.BORDER_WIDTH).toString())}return f}};ln.BORDER_WIDTH=6,ln.ARROW_THICKNESS=5,ln.ARROW_ANGLE=20,ln.ARROW_BEND=4,ln.ANCHOR_RADIUS=8,ln.onMouseUpWrapper=null,ln.onMouseMoveWrapper=null;var aI,CU;aI=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:aI,connectingSnapRadius:aI,currentConnectionPreference:8,bumpDelay:250},CU={},CU.config=t.config$$module$build$src$core$config;var gw=class{constructor(s){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,s||i("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=s}createIcon(){this.iconGroup_||(this.iconGroup_=L(Re.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&le(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),v(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){ye(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(s){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||w(s)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(s){this.iconXY_=s,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(s)}computeIconLocation(){var s=this.getBlock().getRelativeToSurfaceXY();const c=xr(this.iconGroup_);s=new _t(s.x+c.x+this.SIZE/2,s.y+c.y+this.SIZE/2),_t.equals(this.getIconLocation(),s)||this.setIconLocation(s)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new ps(this.SIZE,this.SIZE-2)}drawIcon_(s){}setVisible(s){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},ty={};ty.deepMerge=Pc,ty.inherits=ap,ty.mixin=lp,ty.values=hs;var Dp=class{constructor(s,c,f,_){this.name=s,this.startHats=!1,this.blockStyles=c||Object.create(null),this.categoryStyles=f||Object.create(null),this.componentStyles=_||Object.create(null),this.fontStyle=Object.create(null),Bt(ct.THEME,s,this)}getClassName(){return this.name+"-theme"}setBlockStyle(s,c){this.blockStyles[s]=c}setCategoryStyle(s,c){this.categoryStyles[s]=c}getComponentStyle(s){return(s=this.componentStyles[s])&&typeof s=="string"&&this.getComponentStyle(s)?this.getComponentStyle(s):s?String(s):null}setComponentStyle(s,c){this.componentStyles[s]=c}setFontStyle(s){this.fontStyle=s}setStartHats(s){this.startHats=s}static defineTheme(s,c){s=s.toLowerCase();const f=new Dp(s);let _=c.base;if(_){if(typeof _=="string"){let x;_=(x=qe(ct.THEME,_))!=null?x:void 0}_ instanceof Dp&&(Pc(f,_),f.name=s)}return Pc(f.blockStyles,c.blockStyles),Pc(f.categoryStyles,c.categoryStyles),Pc(f.componentStyles,c.componentStyles),Pc(f.fontStyle,c.fontStyle),c.startHats!==null&&(f.startHats=c.startHats),f}},Nne={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Bne={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},_w=new Dp("classic",Nne,Bne),lI="categoryToolbox",AU="flyoutToolbox",sn;(function(s){s[s.TOP=0]="TOP",s[s.BOTTOM=1]="BOTTOM",s[s.LEFT=2]="LEFT",s[s.RIGHT=3]="RIGHT"})(sn||(sn={}));var kU={hasCategoriesInternal:sl},Ld={};Ld.Position=sn,Ld.TEST_ONLY=kU,Ld.convertFlyoutDefToJsonArray=vd,Ld.convertToolboxDefToJson=Od,Ld.hasCategories=Ta,Ld.isCategoryCollapsible=Ul,Ld.parseToolboxTree=iv;var ql=class{constructor(s){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let c=null,f=!1;var _=!1,x=!1,P=!1,J=!1,be=!1;const tt=!!s.readOnly;if(!tt){var Ot;c=Od((Ot=s.toolbox)!=null?Ot:null),f=Ta(c),_=s.trashcan,_=_===void 0?f:_,x=s.collapse,x=x===void 0?f:x,P=s.comments,P=P===void 0?f:P,J=s.disable,J=J===void 0?f:J,be=s.sounds,be=be===void 0?!0:be}Ot=s.maxTrashcanContents,_?Ot===void 0&&(Ot=32):Ot=0;const Mn=!!s.rtl;let Ti=s.horizontalLayout;Ti===void 0&&(Ti=!1);var ka=s.toolboxPosition!=="end";ka=Ti?ka?sn.TOP:sn.BOTTOM:ka===Mn?sn.RIGHT:sn.LEFT;let hR=s.css;hR===void 0&&(hR=!0);let dR="https://blockly-demo.appspot.com/static/media/";s.media?dR=s.media.endsWith("/")?s.media:s.media+"/":"path"in s&&(i("path","Nov 2014","Jul 2023","media"),dR=s.path+"media/");const YG=s.oneBasedIndex,Oie=s.renderer||"geras",vie=s.plugins||{};let fR=s.modalInputs;fR===void 0&&(fR=!0),this.RTL=Mn,this.oneBasedIndex=YG===void 0?!0:YG,this.collapse=x,this.comments=P,this.disable=J,this.readOnly=tt,this.maxBlocks=s.maxBlocks||1/0;let ZG;this.maxInstances=(ZG=s.maxInstances)!=null?ZG:null,this.modalInputs=fR,this.pathToMedia=dR,this.hasCategories=f,this.moveOptions=ql.parseMoveOptions_(s,f),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_,this.maxTrashcanContents=Ot,this.hasSounds=be,this.hasCss=hR,this.horizontalLayout=Ti,this.languageTree=c,this.gridOptions=ql.parseGridOptions_(s),this.zoomOptions=ql.parseZoomOptions_(s),this.toolboxPosition=ka,this.theme=ql.parseThemeOptions_(s),this.renderer=Oie;let qG;this.rendererOverrides=(qG=s.rendererOverrides)!=null?qG:null;let JG;this.parentWorkspace=(JG=s.parentWorkspace)!=null?JG:null,this.plugins=vie}static parseMoveOptions_(s,c){const f=s.move||{},_={};return f.scrollbars===void 0&&s.scrollbars===void 0?_.scrollbars=c:typeof f.scrollbars=="object"?(_.scrollbars={horizontal:!!f.scrollbars.horizontal,vertical:!!f.scrollbars.vertical},_.scrollbars.horizontal&&_.scrollbars.vertical?_.scrollbars=!0:_.scrollbars.horizontal||_.scrollbars.vertical||(_.scrollbars=!1)):_.scrollbars=!!f.scrollbars||!!s.scrollbars,_.wheel=_.scrollbars&&f.wheel!==void 0?!!f.wheel:typeof _.scrollbars=="object",_.drag=_.scrollbars?f.drag===void 0?!0:!!f.drag:!1,_}static parseZoomOptions_(s){s=s.zoom||{};const c={};return c.controls=s.controls===void 0?!1:!!s.controls,c.wheel=s.wheel===void 0?!1:!!s.wheel,c.startScale=s.startScale===void 0?1:Number(s.startScale),c.maxScale=s.maxScale===void 0?3:Number(s.maxScale),c.minScale=s.minScale===void 0?.3:Number(s.minScale),c.scaleSpeed=s.scaleSpeed===void 0?1.2:Number(s.scaleSpeed),c.pinch=s.pinch===void 0?c.wheel||c.controls:!!s.pinch,c}static parseGridOptions_(s){s=s.grid||{};const c={};return c.spacing=Number(s.spacing)||0,c.colour=s.colour||"#888",c.length=s.length===void 0?1:Number(s.length),c.snap=0<c.spacing&&!!s.snap,c}static parseThemeOptions_(s){return s=s.theme||_w,typeof s=="string"?qe(ct.THEME,s):s instanceof Dp?s:Dp.defineTheme(s.name||"builtin"+Zt(),s)}},IU;t.Mutator$$module$build$src$core$mutator=class extends gw{constructor(s,c){c||i("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(c??null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=s}setBlock(s){this.block_=s}getWorkspace(){return this.workspace_}drawIcon_(s){L(Re.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},s),L(Re.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},s),L(Re.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},s)}iconClick_(s){this.getBlock().isEditable()&&super.iconClick_(s)}createEditor(){if(this.svgDialog=L(Re.SVG,{x:ln.BORDER_WIDTH,y:ln.BORDER_WIDTH}),this.quarkNames.length){var s=rn("xml");for(let _=0,x;x=this.quarkNames[_];_++){var c=rn("block");c.setAttribute("type",x),s.appendChild(c)}}else s=null;var f=this.getBlock();return c=new ql({disable:!1,parentWorkspace:f.workspace,media:f.workspace.options.pathToMedia,rtl:f.RTL,horizontalLayout:!1,renderer:f.workspace.options.renderer,rendererOverrides:f.workspace.options.rendererOverrides}),c.toolboxPosition=f.RTL?sn.RIGHT:sn.LEFT,(f=!!s)&&(c.languageTree=Od(s)),this.workspace_=this.newWorkspaceSvg(c),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(En),s=f?this.workspace_.addFlyout(Re.G):null,c=this.workspace_.createDom("blocklyMutatorBackground"),s&&c.insertBefore(s,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(c),this.svgDialog}newWorkspaceSvg(s){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&ie(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&le(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var s=2*ln.BORDER_WIDTH,c=this.workspace_.getCanvas(),f=c.getBBox(),_=f.width+f.x,x=f.height+3*s,P=this.workspace_.getFlyout();if(P){const J=P.getWorkspace().getMetricsManager().getScrollMetrics();x=Math.max(x,J.height+20),_+=P.getWidth()}(P=this.getBlock().RTL)&&(_=-f.x),_+=3*s,(Math.abs(this.workspaceWidth-_)>s||Math.abs(this.workspaceHeight-x)>s)&&(this.workspaceWidth=_,this.workspaceHeight=x,this.bubble_.setBubbleSize(_+s,x+s),this.svgDialog.setAttribute("width",`${_}`),this.svgDialog.setAttribute("height",`${x}`),this.workspace_.setCachedParentSvgSize(_,x)),P&&c.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(s){if(s!==this.isVisible()){var c=this.getBlock();if(at(new(lt(hh))(c,s,"mutator")),s){this.bubble_=new ln(c.workspace,this.createEditor(),c.pathObject.svgPath,this.iconXY_,null,null),s=this.workspace_,this.bubble_.setSvgId(c.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var f=s.options.languageTree,_=s.getFlyout();f&&(_.init(s),_.show(f)),this.rootBlock=c.decompose(s),f=this.rootBlock.getDescendants(!1);for(let x=0,P;P=f[x];x++)P.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),_?(f=2*_.CORNER_RADIUS,_=this.rootBlock.RTL?_.getWidth()+f:f):_=f=16,c.RTL&&(_=-_),this.rootBlock.moveBy(_,f),c.saveConnections){const x=this.rootBlock;c.saveConnections(x),this.sourceListener=()=>{const P=this.getBlock();P.saveConnections&&P.saveConnections(x)},c.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),s.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,(_=this.bubble_)==null||_.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(c.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(s){this.shouldIgnoreMutatorEvent_(s)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(s){return s.isUiEvent||s.type===Ms||s.type===Hr&&s.element==="disabled"}updateWorkspace(){if(!this.workspace_.isDragging()){var s=this.workspace_.getTopBlocks(!1);for(let _=0,x;x=s[_];_++){var c=x.getRelativeToSurfaceXY();if(20>c.y&&x.moveBy(0,20-c.y),x.RTL){var f=-20;const P=this.workspace_.getFlyout();P&&(f-=P.getWidth()),c.x>f&&x.moveBy(f-c.x,0)}else 20>c.x&&x.moveBy(20-c.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(s=nn())||Et(!0);const _=this.getBlock();if(c=Pp.getExtraBlockState_(_),f=_.rendered,_.rendered=!1,_.compose(this.rootBlock),_.rendered=f,_.initSvg(),_.rendered&&_.render(),f=Pp.getExtraBlockState_(_),c!==f){at(new(lt(Hr))(_,"mutation",null,c,f));const x=nn();setTimeout(function(){const P=nn();Et(x),_.bumpNeighbours(),Et(P)},t.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),Et(s)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var s=this.workspace_;if(s&&s.getAllBlocks(!1)){const c=s.getAllBlocks(!1);for(let f=0,_;_=c[f];f++)_.setStyle(_.getStyleName());if(s=s.getFlyout()){s=s.getWorkspace().getAllBlocks(!1);for(let f=0,_;_=s[f];f++)_.setStyle(_.getStyleName())}}}static reconnect(s,c,f){if(!s||!s.getSourceBlock().workspace)return!1;f=c.getInput(f).connection;const _=s.targetBlock();return _&&_!==c||!f||f.targetConnection===s?!1:(f.isConnected()&&f.disconnect(),f.connect(s),!0)}static findParentWs(s){let c=null;if(s&&s.options){const f=s.options.parentWorkspace;s.isFlyout?f&&f.options&&(c=f.options.parentWorkspace):f&&(c=f)}return c}},IU={},IU.Mutator=t.Mutator$$module$build$src$core$mutator;var g_=Object.create(null),Fne={allExtensions:g_};cp("parent_tooltip_when_inline",yk),t.module$build$src$core$extensions={},t.module$build$src$core$extensions.TEST_ONLY=Fne,t.module$build$src$core$extensions.apply=ih,t.module$build$src$core$extensions.buildTooltipForDropdown=sv,t.module$build$src$core$extensions.buildTooltipWithFieldText=_1,t.module$build$src$core$extensions.isRegistered=Rg,t.module$build$src$core$extensions.register=cp,t.module$build$src$core$extensions.registerMixin=h1,t.module$build$src$core$extensions.registerMutator=d1,t.module$build$src$core$extensions.runAfterPageLoad=up,t.module$build$src$core$extensions.unregister=f1;var RU={};RU.removeElem=Cs;var fh={};fh.arc=Vi,fh.curve=yo,fh.line=bd,fh.lineOnAxis=Tt,fh.lineTo=ol,fh.moveBy=oi,fh.moveTo=zr,fh.point=Ft;var kn={};kn.Coordinate=_t,kn.KeyCodes=Rt,kn.Rect=ji,kn.Size=ps,kn.Svg=Re,kn.aria=ey,kn.array=RU,kn.arrayRemove=y1,kn.browserEvents=Ze,kn.checkMessageReferences=Tk,kn.colour=to,kn.deprecation=Xi,kn.dom=Ir,kn.extensions=t.module$build$src$core$extensions,kn.getBlockTypeCounts=S1,kn.getDocumentScroll=b1,kn.getInjectionDivXY_=Sk,kn.getRelativeXY=bk,kn.getViewportBBox=v1,kn.idGenerator=K1,kn.is3dSupported=O1,kn.math=Z1,kn.object=ty,kn.parseBlockColour=T1,kn.parsing=Jv,kn.replaceMessageReferences=av,kn.runAfterPageLoad=hp,kn.screenToWsCoordinates=al,kn.string=t.module$build$src$core$utils$string,kn.style=Hc,kn.svgMath=Dd,kn.svgPaths=fh,kn.tokenizeInterpolation=ov,kn.toolbox=Ld,kn.userAgent=lr,kn.xml=t.module$build$src$core$utils$xml;var cI=class extends Xl{constructor(s,c){super(c),this.type=Gv,this.isOpen=s}toJson(){const s=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return s.isOpen=this.isOpen,s}fromJson(s){i("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.isOpen=s.isOpen}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new cI),c.isOpen=s.isOpen,c}};Bt(ct.EVENT,Gv,cI);var ph=class{constructor(s){this.name_=s}toString(){return this.name_}};ph.POSITIONABLE=new ph("positionable"),ph.DRAG_TARGET=new ph("drag_target"),ph.DELETE_AREA=new ph("delete_area"),ph.AUTOHIDEABLE=new ph("autohideable");var ms=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(s,c){const f=s.component.id;if(!c&&this.componentData.has(f)){var _;throw Error('Plugin "'+f+'" with capabilities "'+((_=this.componentData.get(f))==null?void 0:_.capabilities)+'" already added.')}for(this.componentData.set(f,s),c=[],_=0;_<s.capabilities.length;_++){const x=String(s.capabilities[_]).toLowerCase();if(c.push(x),this.capabilityToComponentIds.has(x)){let P;(P=this.capabilityToComponentIds.get(x))==null||P.push(f)}else this.capabilityToComponentIds.set(x,[f])}this.componentData.get(f).capabilities=c}removeComponent(s){const c=this.componentData.get(s);if(c){for(let f=0;f<c.capabilities.length;f++){const _=String(c.capabilities[f]).toLowerCase();Cs(this.capabilityToComponentIds.get(_),s)}this.componentData.delete(s)}}addCapability(s,c){if(!this.getComponent(s))throw Error('Cannot add capability, "'+c+'". Plugin "'+s+'" has not been added to the ComponentManager');if(this.hasCapability(s,c))console.warn('Plugin "'+s+'already has capability "'+c+'"');else{c=String(c).toLowerCase();var f;(f=this.componentData.get(s))==null||f.capabilities.push(c);var _;(_=this.capabilityToComponentIds.get(c))==null||_.push(s)}}removeCapability(s,c){if(!this.getComponent(s))throw Error('Cannot remove capability, "'+c+'". Plugin "'+s+'" has not been added to the ComponentManager');this.hasCapability(s,c)?(c=String(c).toLowerCase(),Cs(this.componentData.get(s).capabilities,c),Cs(this.capabilityToComponentIds.get(c),s)):console.warn('Plugin "'+s+`doesn't have capability "`+c+'" to remove')}hasCapability(s,c){return c=String(c).toLowerCase(),this.componentData.has(s)&&this.componentData.get(s).capabilities.indexOf(c)!==-1}getComponent(s){let c;return(c=this.componentData.get(s))==null?void 0:c.component}getComponents(s,c){if(s=String(s).toLowerCase(),s=this.capabilityToComponentIds.get(s),!s)return[];const f=[];if(c){const _=[];s.forEach(x=>{_.push(this.componentData.get(x))}),_.sort(function(x,P){return x.weight-P.weight}),_.forEach(function(x){f.push(x.component)})}else s.forEach(_=>{f.push(this.componentData.get(_).component)});return f}};ms.Capability=ph;var ny=class extends Error{},MU=class extends ny{constructor(s){super("Expected to find a 'type' property, defining the block type"),this.state=s}},iy=class extends ny{constructor(s,c,f){super(`The block ${c.toDevString()} is missing a(n) ${s}
connection`),this.block=c,this.state=f}},PU=class extends ny{constructor(s,c,f,_){super(`The block ${f.toDevString()} could not connect its
${c} to its parent, because: ${s}`),this.childBlock=f,this.childState=_}},DU=class extends ny{constructor(s){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=s}},__={};__.BadConnectionCheck=PU,__.DeserializationError=ny,__.MissingBlockType=MU,__.MissingConnection=iy,__.RealChildOfShadow=DU;var LU=100,NU=75,BU=50,Ow={};Ow.BLOCKS=BU,Ow.PROCEDURES=NU,Ow.VARIABLES=LU;var uI={};uI.register=sh,uI.unregister=Ng;var FU=class{constructor(){this.priority=BU}save(s){const c=[];for(const f of s.getTopBlocks(!1))(s=Ho(f,{addCoordinates:!0,doFullSerialization:!1}))&&c.push(s);return c.length?{languageVersion:0,blocks:c}:null}load(s,c){s=s.blocks;for(const f of s)Dc(f,c,{recordUndo:qt()})}clear(s){for(const c of s.getTopBlocks(!1))c.dispose(!1)}};sh("blocks",new FU);var ry={};ry.BlockSerializer=FU,ry.append=Dc,ry.appendInternal=Bg,ry.save=Ho;var hI=class extends d_{constructor(s){super(s),this.type=Ms,s&&(s.isShadow()&&(this.recordUndo=!1),this.xml=as(s),this.ids=is(s),this.json=Ho(s,{addCoordinates:!0}))}toJson(){const s=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return s.xml=ls(this.xml),s.ids=this.ids,s.json=this.json,this.recordUndo||(s.recordUndo=this.recordUndo),s}fromJson(s){i("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.xml=Gi(s.xml),this.ids=s.ids,this.json=s.json,s.recordUndo!==void 0&&(this.recordUndo=s.recordUndo)}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new hI),c.xml=Gi(s.xml),c.ids=s.ids,c.json=s.json,s.recordUndo!==void 0&&(c.recordUndo=s.recordUndo),c}run(s){const c=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(s)Dc(this.json,c);else for(s=0;s<this.ids.length;s++){const f=this.ids[s],_=c.getBlockById(f);_?_.dispose(!1):f===this.blockId&&console.warn("Can't uncreate non-existent block: "+f)}}};Bt(ct.EVENT,Ms,hI);var dI=class extends d_{constructor(s){if(super(s),this.type=Xc,s){if(s.getParent())throw Error("Connected blocks cannot be deleted.");s.isShadow()&&(this.recordUndo=!1),this.oldXml=as(s),this.ids=is(s),this.wasShadow=s.isShadow(),this.oldJson=Ho(s,{addCoordinates:!0})}}toJson(){const s=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return s.oldXml=ls(this.oldXml),s.ids=this.ids,s.wasShadow=this.wasShadow,s.oldJson=this.oldJson,this.recordUndo||(s.recordUndo=this.recordUndo),s}fromJson(s){i("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldXml=Gi(s.oldXml),this.ids=s.ids,this.wasShadow=s.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=s.oldJson,s.recordUndo!==void 0&&(this.recordUndo=s.recordUndo)}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new dI),c.oldXml=Gi(s.oldXml),c.ids=s.ids,c.wasShadow=s.wasShadow||c.oldXml.tagName.toLowerCase()==="shadow",c.oldJson=s.oldJson,s.recordUndo!==void 0&&(c.recordUndo=s.recordUndo),c}run(s){const c=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(s)for(s=0;s<this.ids.length;s++){const f=this.ids[s],_=c.getBlockById(f);_?_.dispose(!1):f===this.blockId&&console.warn("Can't delete non-existent block: "+f)}else Dc(this.oldJson,c)}};Bt(ct.EVENT,Xc,dI);var xt;(function(s){s[s.INPUT_VALUE=1]="INPUT_VALUE",s[s.OUTPUT_VALUE=2]="OUTPUT_VALUE",s[s.NEXT_STATEMENT=3]="NEXT_STATEMENT",s[s.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(xt||(xt={})),t.module$build$src$core$connection_type={},t.module$build$src$core$connection_type.ConnectionType=xt;var Vn=class{constructor(s,c){this.type=c,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=s}connect_(s){const c=xt.INPUT_VALUE,f=this.getSourceBlock();var _=s.getSourceBlock();s.isConnected()&&s.disconnect();let x;if(this.isConnected()){const J=this.stashShadowState_(),be=this.targetBlock();be.isShadow()?be.dispose(!1):(this.disconnect(),x=be),this.applyShadowState_(J)}let P;Dn()&&(P=new(lt(To))(_)),A1(this,s),_.setParent(f),P&&(P.recordNew(),at(P)),x&&(s=this.type===c?x.outputConnection:x.previousConnection,(_=Vn.getConnectionForOrphanedConnection(_,s))?s.connect(_):s.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const s=this.targetBlock();s&&s.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===xt.INPUT_VALUE||this.type===xt.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(s){}connect(s){if(this.targetConnection===s)return!0;if(this.getConnectionChecker().canConnect(this,s,!1)){const c=nn();c||Et(!0),this.isSuperior()?this.connect_(s):s.connect_(this),c||Et(!1)}return this.isConnected()}disconnect(){var s=this.targetConnection;if(!s)throw Error("Source connection not connected.");if(s.targetConnection!==this)throw Error("Target connection not connected to source connection.");let c,f;this.isSuperior()?(c=this.sourceBlock_,f=s.getSourceBlock(),s=this):(c=s.getSourceBlock(),f=this.sourceBlock_);const _=nn();_||Et(!0),this.disconnectInternal_(c,f),f.isShadow()||s.respawnShadow_(),_||Et(!1)}disconnectInternal_(s,c){let f;Dn()&&(f=new(lt(To))(c)),(s=this.targetConnection)&&(s.targetConnection=null),this.targetConnection=null,c.setParent(null),f&&(f.recordNew(),at(f))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let s,c;return(c=(s=this.targetConnection)==null?void 0:s.getSourceBlock())!=null?c:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(s){return s?(Array.isArray(s)||(s=[s]),this.check_=s,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(s){this.setShadowStateInternal_({shadowDom:s})}getShadowDom(s){return s&&this.targetBlock().isShadow()?$r(this.targetBlock()):this.shadowDom_}setShadowState(s){this.setShadowStateInternal_({shadowState:s})}getShadowState(s){return s&&this.targetBlock()&&this.targetBlock().isShadow()?Ho(this.targetBlock()):this.shadowState_}neighbours(s){return[]}getParentInput(){let s=null;const c=this.sourceBlock_.inputList;for(let f=0;f<c.length;f++)if(c[f].connection===this){s=c[f];break}return s}toString(){const s=this.sourceBlock_;if(!s)return"Orphan Connection";if(s.outputConnection===this)var c="Output Connection of ";else if(s.previousConnection===this)c="Previous Connection of ";else if(s.nextConnection===this)c="Next Connection of ";else{c=null;for(let f=0,_;_=s.inputList[f];f++)if(_.connection===this){c=_;break}if(c)c='Input "'+c.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return c+s.toDevString()}stashShadowState_(){const s=this.getShadowDom(!0),c=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:s,shadowState:c}}applyShadowState_({shadowDom:s,shadowState:c}){this.shadowDom_=s,this.shadowState_=c}setShadowStateInternal_({shadowDom:s=null,shadowState:c=null}={}){this.shadowDom_=s,this.shadowState_=c,(s=this.targetBlock())?s.isShadow()?(s.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(s=this.createShadowBlock_(!1),this.serializeShadow_(s),s&&s.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(s){var c=this.getSourceBlock();const f=this.getShadowState(),_=this.getShadowDom();if(c.isDeadOrDying()||!f&&!_)return null;if(f)return c=Bg(f,c.workspace,{parentConnection:s?this:void 0,isShadow:!0,recordUndo:!1});if(_){if(c=bi(_,c.workspace),s)if(this.type===xt.INPUT_VALUE){if(!c.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(c.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===xt.NEXT_STATEMENT){if(!c.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(c.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return c}return null}serializeShadow_(s){s&&(this.shadowDom_=$r(s),this.shadowState_=Ho(s))}static getConnectionForOrphanedConnection(s,c){if(c.type===xt.OUTPUT_VALUE)return Gg(s,c.getSourceBlock());s=s.lastConnectionInStack(!0);const f=c.getConnectionChecker();return s&&f.canConnect(c,s,!1)?s:null}};Vn.CAN_CONNECT=0,Vn.REASON_SELF_CONNECTION=1,Vn.REASON_WRONG_TYPE=2,Vn.REASON_TARGET_NULL=3,Vn.REASON_CHECKS_FAILED=4,Vn.REASON_DIFFERENT_WORKSPACES=5,Vn.REASON_SHADOW_PARENT=6,Vn.REASON_DRAG_CHECKS_FAILED=7,Vn.REASON_PREVIOUS_AND_OUTPUT=8;var sy="_TEMP_COLLAPSED_INPUT",oy="_TEMP_COLLAPSED_FIELD",fI={};fI.COLLAPSED_FIELD_NAME=oy,fI.COLLAPSED_INPUT_NAME=sy,t.FieldLabel$$module$build$src$core$field_label=class extends $n{constructor(s,c,f){super($n.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,s!==$n.SKIP_SETUP&&(f?this.configure_(f):this.class_=c||null,this.setValue(s))}configure_(s){super.configure_(s),s.class&&(this.class_=s.class)}initView(){this.createTextElement_(),this.class_&&le(this.getTextElement(),this.class_)}doClassValidation_(s){return s==null?null:String(s)}setClass(s){this.textElement_&&(this.class_&&ie(this.textElement_,this.class_),s&&le(this.textElement_,s)),this.class_=s}static fromJson(s){return new this(gi(s.text),void 0,s)}},$s("field_label",t.FieldLabel$$module$build$src$core$field_label),t.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",t.FieldLabel$$module$build$src$core$field_label;var O_=class{constructor(s,c,f,_){if(this.type=s,this.name=c,this.connection=_,this.fieldRow=[],this.align=t.Align$$module$build$src$core$input.LEFT,this.visible=!0,s!==dn.DUMMY&&!c)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=f}getSourceBlock(){return this.sourceBlock}appendField(s,c){return this.insertFieldAt(this.fieldRow.length,s,c),this}insertFieldAt(s,c,f){if(0>s||s>this.fieldRow.length)throw Error("index "+s+" out of bounds.");return(c||c===""&&f)&&(typeof c=="string"&&(c=sp({type:"field_label",text:c})),c.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(c.init(),c.applyColour()),c.name=f,c.setVisible(this.isVisible()),c.prefixField&&(s=this.insertFieldAt(s,c.prefixField)),this.fieldRow.splice(s,0,c),s++,c.suffixField&&(s=this.insertFieldAt(s,c.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),s}removeField(s,c){for(let f=0,_;_=this.fieldRow[f];f++)if(_.name===s)return _.dispose(),this.fieldRow.splice(f,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(c)return!1;throw Error('Field "'+s+'" not found.')}isVisible(){return this.visible}setVisible(s){let c=[];if(this.visible===s)return c;this.visible=s;for(let _=0,x;x=this.fieldRow[_];_++)x.setVisible(s);if(this.connection){var f=this.connection;s?c=f.startTrackingAll():f.stopTrackingAll(),(f=f.targetBlock())&&(f.getSvgRoot().style.display=s?"block":"none")}return c}markDirty(){for(let s=0,c;c=this.fieldRow[s];s++)c.markDirty()}setCheck(s){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(s),this}setAlign(s){return this.align=s,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(s){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(s),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let s=0;s<this.fieldRow.length;s++)this.fieldRow[s].init()}dispose(){for(let s=0,c;c=this.fieldRow[s];s++)c.dispose();this.connection&&this.connection.dispose()}},pI;(function(s){s=s.Align||(s.Align={}),s[s.LEFT=-1]="LEFT",s[s.CENTRE=0]="CENTRE",s[s.RIGHT=1]="RIGHT"})(O_||(O_={})),t.Align$$module$build$src$core$input=O_.Align,pI={},pI.Align=t.Align$$module$build$src$core$input,pI.Input=O_;var it=class{constructor(s,c,f){if(this.wsCoordinate_=null,!c)throw Error("Cannot create a node without a location.");this.type_=s,this.isConnection_=it.isConnectionType_(s),this.location_=c,this.processParams_(f||null)}processParams_(s){s&&s.wsCoordinate&&(this.wsCoordinate_=s.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var s=this.location_.getParentInput();const c=s.getSourceBlock();for(s=c.inputList.indexOf(s),s+=1;s<c.inputList.length;s++){const f=c.inputList[s],_=f.fieldRow;for(let x=0;x<_.length;x++){const P=_[x];if(P.isClickable()||it.NAVIGATE_ALL_FIELDS)return it.createFieldNode(P)}if(f.connection)return it.createInputNode(f)}return null}findNextForField_(){var s=this.location_,c=s.getParentInput();const f=s.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var _=f.inputList.indexOf(c);for(s=c.fieldRow.indexOf(s)+1;_<f.inputList.length;_++){c=f.inputList[_];const x=c.fieldRow;for(;s<x.length;){if(x[s].isClickable()||it.NAVIGATE_ALL_FIELDS)return it.createFieldNode(x[s]);s++}if(s=0,c.connection)return it.createInputNode(c)}return null}findPrevForInput_(){const s=this.location_.getParentInput(),c=s.getSourceBlock();for(var f=c.inputList.indexOf(s);0<=f;f--){var _=c.inputList[f];if(_.connection&&_!==s)return it.createInputNode(_);_=_.fieldRow;for(let x=_.length-1;0<=x;x--){const P=_[x];if(P.isClickable()||it.NAVIGATE_ALL_FIELDS)return it.createFieldNode(P)}}return null}findPrevForField_(){var s=this.location_;const c=s.getParentInput(),f=s.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var _=f.inputList.indexOf(c);for(s=c.fieldRow.indexOf(s)-1;0<=_;_--){var x=f.inputList[_];if(x.connection&&x!==c)return it.createInputNode(x);for(x=x.fieldRow;-1<s;){if(x[s].isClickable()||it.NAVIGATE_ALL_FIELDS)return it.createFieldNode(x[s]);s--}0<=_-1&&(s=f.inputList[_-1].fieldRow.length-1)}return null}navigateBetweenStacks_(s){var c=this.getLocation();if(c.getSourceBlock){var f=c.getSourceBlock();f&&(c=f)}if(!c||c.isDeadOrDying())return null;f=c.getRootBlock(),c=f.workspace.getTopBlocks(!0);for(let _=0;_<c.length;_++)if(f.id===c[_].id)return s=_+(s?1:-1),s===-1||s===c.length?null:it.createStackNode(c[s]);throw Error("Couldn't find "+(s?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(s){const c=fp(s);return c?it.createConnectionNode(c):it.createBlockNode(s)}getOutAstNodeForBlock_(s){if(!s)return null;s=s.getTopStackBlock();const c=fp(s);return c&&c.targetConnection&&c.targetConnection.getParentInput()?it.createInputNode(c.targetConnection.getParentInput()):it.createStackNode(s)}findFirstFieldOrInput_(s){s=s.inputList;for(let c=0;c<s.length;c++){const f=s[c],_=f.fieldRow;for(let x=0;x<_.length;x++){const P=_[x];if(P.isClickable()||it.NAVIGATE_ALL_FIELDS)return it.createFieldNode(P)}if(f.connection)return it.createInputNode(f)}return null}getSourceBlock(){return this.getType()===it.types.BLOCK?this.getLocation():this.getType()===it.types.STACK?this.getLocation():this.getType()===it.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case it.types.STACK:return this.navigateBetweenStacks_(!0);case it.types.OUTPUT:return it.createBlockNode(this.location_.getSourceBlock());case it.types.FIELD:return this.findNextForField_();case it.types.INPUT:return this.findNextForInput_();case it.types.BLOCK:return it.createConnectionNode(this.location_.nextConnection);case it.types.PREVIOUS:return it.createBlockNode(this.location_.getSourceBlock());case it.types.NEXT:return it.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case it.types.WORKSPACE:const s=this.location_.getTopBlocks(!0);if(0<s.length)return it.createStackNode(s[0]);break;case it.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case it.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case it.types.INPUT:return it.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case it.types.STACK:return this.navigateBetweenStacks_(!1);case it.types.FIELD:return this.findPrevForField_();case it.types.INPUT:return this.findPrevForInput_();case it.types.BLOCK:var s=fp(this.location_);return it.createConnectionNode(s);case it.types.PREVIOUS:if((s=this.location_.targetConnection)&&!s.getParentInput())return it.createConnectionNode(s);break;case it.types.NEXT:return it.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case it.types.STACK:var s=this.location_,c=s.getRelativeToSurfaceXY();return c=new _t(c.x,c.y+it.DEFAULT_OFFSET_Y),it.createWorkspaceNode(s.workspace,c);case it.types.OUTPUT:return s=this.location_,(c=s.targetConnection)?it.createConnectionNode(c):it.createStackNode(s.getSourceBlock());case it.types.FIELD:if(s=this.location_.getSourceBlock(),!s)throw Error("The current AST location is not associated with a block");return it.createBlockNode(s);case it.types.INPUT:return it.createBlockNode(this.location_.getSourceBlock());case it.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case it.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case it.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(s){switch(s){case it.types.PREVIOUS:case it.types.NEXT:case it.types.INPUT:case it.types.OUTPUT:return!0}return!1}static createFieldNode(s){return s?new it(it.types.FIELD,s):null}static createConnectionNode(s){if(!s)return null;const c=s.type;return c===xt.INPUT_VALUE||c===xt.NEXT_STATEMENT&&s.getParentInput()?it.createInputNode(s.getParentInput()):c===xt.NEXT_STATEMENT?new it(it.types.NEXT,s):c===xt.OUTPUT_VALUE?new it(it.types.OUTPUT,s):c===xt.PREVIOUS_STATEMENT?new it(it.types.PREVIOUS,s):null}static createInputNode(s){return s&&s.connection?new it(it.types.INPUT,s.connection):null}static createBlockNode(s){return s?new it(it.types.BLOCK,s):null}static createStackNode(s){return s?new it(it.types.STACK,s):null}static createWorkspaceNode(s,c){return c&&s?new it(it.types.WORKSPACE,s,{wsCoordinate:c}):null}static createTopNode(s){const c=fp(s);return c?it.createConnectionNode(c):it.createBlockNode(s)}};it.NAVIGATE_ALL_FIELDS=!1,it.DEFAULT_OFFSET_Y=-20,function(s){s=s.types||(s.types={}),s.FIELD="field",s.BLOCK="block",s.INPUT="input",s.OUTPUT="output",s.NEXT="next",s.PREVIOUS="previous",s.STACK="stack",s.WORKSPACE="workspace"}(it||(it={}));var v_=class{constructor(s,c,f){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=s,this.id=f&&!s.getBlockById(f)?f:Jt(),s.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new ps(160,80)},this.xy_=new _t(0,0),this.isInFlyout=s.isFlyout,this.isInMutator=s.isMutator,this.RTL=s.RTL,c){if(this.type=c,f=gt[c],!f||typeof f!="object")throw TypeError("Invalid block definition for type: "+c);Object.assign(this,f)}s.addTopBlock(this),s.addTypedBlock(this),new.target===v_&&this.doInit_()}doInit_(){const s=nn();s||Et(!0);const c=qt();try{typeof this.init=="function"&&(tn(!1),this.init(),tn(c)),Dn()&&at(new(lt(Ms))(this))}finally{s||Et(!1),tn(c)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(s){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(s),Dn()&&at(new(lt(Xc))(this)),cn();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let f=this.childBlocks_.length-1;0<=f;f--)this.childBlocks_[f].dispose(!1);for(let f=0,_;_=this.inputList[f];f++)_.dispose();this.inputList.length=0;const c=this.getConnections_(!0);for(let f=0,_;_=c[f];f++)_.dispose()}finally{rt(),typeof this.destroy=="function"&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let s=0,c;c=this.inputList[s];s++)for(let f=0,_;_=c.fieldRow[f];f++)_.initModel&&_.initModel()}unplug(s){this.outputConnection&&this.unplugFromRow_(s),this.previousConnection&&this.unplugFromStack_(s)}unplugFromRow_(s){let c=null;this.outputConnection.isConnected()&&(c=this.outputConnection.targetConnection,this.outputConnection.disconnect()),c&&s&&(s=this.getOnlyValueConnection_())&&s.isConnected()&&!s.targetBlock().isShadow()&&(s=s.targetConnection,s==null||s.disconnect(),this.workspace.connectionChecker.canConnect(s,c,!1)?c.connect(s):s==null||s.onFailedConnect(c))}getOnlyValueConnection_(){let s=null;for(let c=0;c<this.inputList.length;c++){const f=this.inputList[c].connection;if(f&&f.type===xt.INPUT_VALUE&&f.targetConnection){if(s)return null;s=f}}return s}unplugFromStack_(s){let c=null;this.previousConnection.isConnected()&&(c=this.previousConnection.targetConnection,this.previousConnection.disconnect());const f=this.getNextBlock();s&&f&&!f.isShadow()&&(s=this.nextConnection.targetConnection,s==null||s.disconnect(),c&&this.workspace.connectionChecker.canConnect(c,s,!1)&&c.connect(s))}getConnections_(s){s=[],this.outputConnection&&s.push(this.outputConnection),this.previousConnection&&s.push(this.previousConnection),this.nextConnection&&s.push(this.nextConnection);for(let c=0,f;f=this.inputList[c];c++)f.connection&&s.push(f.connection);return s}lastConnectionInStack(s){let c=this.nextConnection;for(;c;){const f=c.targetBlock();if(!f||s&&f.isShadow())return c;c=f.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(s){for(let c=0,f;f=this.inputList[c];c++)if(f.connection&&f.connection.targetBlock()===s)return f;return null}getSurroundParent(){let s=this,c;do if(c=s,s=s.getParent(),!s)return null;while(s.getNextBlock()===c);return s}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let s=0,c;c=this.inputList[s];s++)if(c.connection&&c.connection.type===xt.NEXT_STATEMENT)return c.connection;return null}getRootBlock(){let s,c=this;do s=c,c=s.parentBlock_;while(c);return s}getTopStackBlock(){let s=this,c;do c=s.getPreviousBlock();while(c&&c.getNextBlock()===s&&(s=c));return s}getChildren(s){if(!s)return this.childBlocks_;s=[];for(let f=0,_;_=this.inputList[f];f++)if(_.connection){var c=_.connection.targetBlock();c&&s.push(c)}return(c=this.getNextBlock())&&s.push(c),s}setParent(s){if(s!==this.parentBlock_){var c=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),f=!!c;if(f&&s&&c!==s)throw Error("Block connected to superior one that is not new parent.");if(!f&&s)throw Error("Block not connected to new parent.");if(f&&!s)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Cs(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=s)?s.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(s){const c=[this],f=this.getChildren(s);for(let _,x=0;_=f[x];x++)c.push(..._.getDescendants(s));return c}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(s){this.deletable_=s}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(s){this.movable_=s}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(re(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(s){this.isShadow_=s}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(s){this.isInsertionMarker_=s}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(s){this.editable_=s;for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)x.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(s,c){const f=this.getConnections_(!0);if(s=s.getConnections_(!0),f.length!==s.length)throw Error("Connection lists did not match in length.");for(let _=0;_<s.length;_++)if(s[_]===c)return f[_];return null}setHelpUrl(s){this.helpUrl=s}setTooltip(s){this.tooltip=s}getTooltip(){return nl(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(s){s=ba(s),this.hue_=s.hue,this.colour_=s.hex}setStyle(s){this.styleName_=s}setOnChange(s){if(s&&typeof s!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=s,this.onchangeWrapper_=s.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(s){if(typeof s!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(s===void 0?"nothing":s+" of type "+typeof s)+" instead");for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)if(x.name===s)return x;return null}getVars(){const s=[];for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)x.referencesVariables()&&s.push(x.getValue());return s}getVarModels(){const s=[];for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)if(x.referencesVariables()){const P=this.workspace.getVariableById(x.getValue());P&&s.push(P)}return s}updateVarName(s){for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)x.referencesVariables()&&s.getId()===x.getValue()&&x.refreshVariableName()}renameVarById(s,c){for(let f=0,_;_=this.inputList[f];f++)for(let x=0,P;P=_.fieldRow[x];x++)P.referencesVariables()&&s===P.getValue()&&P.setValue(c)}getFieldValue(s){return(s=this.getField(s))?s.getValue():null}setFieldValue(s,c){const f=this.getField(c);if(!f)throw Error('Field "'+c+'" not found.');f.setValue(s)}setPreviousStatement(s,c){if(s)c===void 0&&(c=null),this.previousConnection||(this.previousConnection=this.makeConnection_(xt.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(c);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(s,c){if(s)c===void 0&&(c=null),this.nextConnection||(this.nextConnection=this.makeConnection_(xt.NEXT_STATEMENT)),this.nextConnection.setCheck(c);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(s,c){if(s)c===void 0&&(c=null),this.outputConnection||(this.outputConnection=this.makeConnection_(xt.OUTPUT_VALUE)),this.outputConnection.setCheck(c);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(s){this.inputsInline!==s&&(at(new(lt(Hr))(this,"inline",null,this.inputsInline,s)),this.inputsInline=s)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var s=1;s<this.inputList.length;s++)if(this.inputList[s-1].type===dn.DUMMY&&this.inputList[s].type===dn.DUMMY)return!1;for(s=1;s<this.inputList.length;s++)if(this.inputList[s-1].type===dn.VALUE&&this.inputList[s].type===dn.DUMMY)return!0;return!1}setOutputShape(s){this.outputShape_=s}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(s){if(this.isEnabled()!==s){const c=this.disabled;this.disabled=!s,at(new(lt(Hr))(this,"disabled",null,c,!s))}}getInheritedDisabled(){let s=this.getSurroundParent();for(;s;){if(s.disabled)return!0;s=s.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(s){this.collapsed_!==s&&(at(new(lt(Hr))(this,"collapsed",null,this.collapsed_,s)),this.collapsed_=s)}toString(s,c){function f(Ot){let Mn=Ot.getCheck();return!Mn&&Ot.targetConnection&&(Mn=Ot.targetConnection.getCheck()),!!Mn&&(Mn.indexOf("Boolean")!==-1||Mn.indexOf("Number")!==-1)}function _(){let Ot,Mn;J&&J.getType()===((Ot=be)==null?void 0:Ot.getType())&&J.getLocation()===((Mn=be)==null?void 0:Mn.getLocation())&&(J=null)}var x=[];c=c||"?";const P=it.NAVIGATE_ALL_FIELDS;it.NAVIGATE_ALL_FIELDS=!0;let J=it.createBlockNode(this);const be=J;for(;J;){switch(J.getType()){case it.types.INPUT:var tt=J.getLocation();J.in()?f(tt)&&x.push("("):x.push(c);break;case it.types.FIELD:tt=J.getLocation(),tt.name!==oy&&x.push(tt.getText())}if(tt=J,J=tt.in()||tt.next(),!J){for(J=tt.out(),_();J&&!J.next();)J=J.out(),_(),J&&J.getType()===it.types.INPUT&&f(J.getLocation())&&x.push(")");J&&(J=J.next())}}for(it.NAVIGATE_ALL_FIELDS=P,c=2;c<x.length;c++)x[c-2]==="("&&x[c]===")"&&(x[c-2]=x[c-1],x.splice(c-1,2));return x=x.reduce(function(Ot,Mn){return Ot+(Ot.substr(-1)==="("||Mn===")"?"":" ")+Mn},""),x=x.trim()||"???",s&&x.length>s&&(x=x.substring(0,s-3)+"..."),x}appendValueInput(s){return this.appendInput_(dn.VALUE,s)}appendStatementInput(s){return this.appendInput_(dn.STATEMENT,s)}appendDummyInput(s){return this.appendInput_(dn.DUMMY,s||"")}jsonInit(s){var c=s.type?'Block "'+s.type+'": ':"";if(s.output&&s.previousStatement)throw Error(c+"Must not have both an output and a previousStatement.");if(s.style&&s.style.hat&&(this.hat=s.style.hat,s.style=null),s.style&&s.colour)throw Error(c+"Must not have both a colour and a style.");s.style?this.jsonInitStyle_(s,c):this.jsonInitColour_(s,c);for(var f=0;s["message"+f]!==void 0;)this.interpolate_(s["message"+f],s["args"+f]||[],s["lastDummyAlign"+f],c),f++;if(s.inputsInline!==void 0&&this.setInputsInline(s.inputsInline),s.output!==void 0&&this.setOutput(!0,s.output),s.outputShape!==void 0&&this.setOutputShape(s.outputShape),s.previousStatement!==void 0&&this.setPreviousStatement(!0,s.previousStatement),s.nextStatement!==void 0&&this.setNextStatement(!0,s.nextStatement),s.tooltip!==void 0&&(f=gi(s.tooltip),this.setTooltip(f)),s.enableContextMenu!==void 0&&(this.contextMenu=!!s.enableContextMenu),s.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!s.suppressPrefixSuffix),s.helpUrl!==void 0&&(f=gi(s.helpUrl),this.setHelpUrl(f)),typeof s.extensions=="string"&&(console.warn(c+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+s.type+"' block."),s.extensions=[s.extensions]),s.mutator!==void 0&&ih(s.mutator,this,!0),s=s.extensions,Array.isArray(s))for(c=0;c<s.length;c++)ih(s[c],this,!1)}jsonInitColour_(s,c){if("colour"in s)if(s.colour===void 0)console.warn(c+"Undefined colour value.");else{s=s.colour;try{this.setColour(s)}catch{console.warn(c+"Illegal colour value: ",s)}}}jsonInitStyle_(s,c){s=s.style;try{this.setStyle(s)}catch{console.warn(c+"Style does not exist: ",s)}}mixin(s,c){if(c!==void 0&&typeof c!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!c){c=[];for(const f in s)this[f]!==void 0&&c.push(f);if(c.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(c))}Object.assign(this,s)}interpolate_(s,c,f,_){s=_d(s),this.validateTokens_(s,c.length),c=this.interpolateArguments_(s,c,f),f=[];for(let x=0,P;P=c[x];x++)if(this.isInputKeyword_(P.type)){if(s=this.inputFromJson_(P,_)){for(let J=0,be;be=f[J];J++)s.appendField(be[0],be[1]);f.length=0}}else(s=this.fieldFromJson_(P))&&f.push([s,P.name])}validateTokens_(s,c){const f=[];let _=0;for(let x=0;x<s.length;x++){const P=s[x];if(typeof P=="number"){if(1>P||P>c)throw Error('Block "'+this.type+'": Message index %'+P+" out of range.");if(f[P])throw Error('Block "'+this.type+'": Message index %'+P+" duplicated.");f[P]=!0,_++}}if(_!==c)throw Error('Block "'+this.type+'": Message does not reference all '+c+" arg(s).")}interpolateArguments_(s,c,f){const _=[];for(let x=0;x<s.length;x++){let P=s[x];typeof P=="number"&&(P=c[P-1]),!(typeof P=="string"&&(P=this.stringToFieldJson_(P),!P))&&_.push(P)}return(s=_.length)&&!this.isInputKeyword_(_[s-1].type)&&(s={type:"input_dummy"},f&&(s.align=f),_.push(s)),_}fieldFromJson_(s){const c=sp(s);return!c&&s.alt?typeof s.alt=="string"?(s=this.stringToFieldJson_(s.alt))?this.fieldFromJson_(s):null:this.fieldFromJson_(s.alt):c}inputFromJson_(s,c){var f={LEFT:t.Align$$module$build$src$core$input.LEFT,RIGHT:t.Align$$module$build$src$core$input.RIGHT,CENTRE:t.Align$$module$build$src$core$input.CENTRE,CENTER:t.Align$$module$build$src$core$input.CENTRE};let _=null;switch(s.type){case"input_value":_=this.appendValueInput(s.name);break;case"input_statement":_=this.appendStatementInput(s.name);break;case"input_dummy":_=this.appendDummyInput(s.name)}return _?(s.check&&_.setCheck(s.check),s.align&&(f=f[s.align.toUpperCase()],f===void 0?console.warn(c+"Illegal align value: ",s.align):_.setAlign(f)),_):null}isInputKeyword_(s){return s==="input_value"||s==="input_statement"||s==="input_dummy"}stringToFieldJson_(s){return(s=s.trim())?{type:"field_label",text:s}:null}appendInput_(s,c){let f=null;return(s===dn.VALUE||s===dn.STATEMENT)&&(f=this.makeConnection_(s)),s===dn.STATEMENT&&this.statementInputCount++,s=new O_(s,c,this,f),this.inputList.push(s),s}moveInputBefore(s,c){if(s!==c){var f=-1,_=c?-1:this.inputList.length;for(let x=0,P;P=this.inputList[x];x++)if(P.name===s){if(f=x,_!==-1)break}else if(c&&P.name===c&&(_=x,f!==-1))break;if(f===-1)throw Error('Named input "'+s+'" not found.');if(_===-1)throw Error('Reference input "'+c+'" not found.');this.moveNumberedInputBefore(f,_)}}moveNumberedInputBefore(s,c){if(s===c)throw Error("Can't move input to itself.");if(s>=this.inputList.length)throw RangeError("Input index "+s+" out of bounds.");if(c>this.inputList.length)throw RangeError("Reference input "+c+" out of bounds.");const f=this.inputList[s];this.inputList.splice(s,1),s<c&&c--,this.inputList.splice(c,0,f)}removeInput(s,c){for(let f=0,_;_=this.inputList[f];f++)if(_.name===s)return _.type===dn.STATEMENT&&this.statementInputCount--,_.dispose(),this.inputList.splice(f,1),!0;if(c)return!1;throw Error("Input not found: "+s)}getInput(s){for(let c=0,f;f=this.inputList[c];c++)if(f.name===s)return f;return null}getInputTargetBlock(s){return(s=this.getInput(s))&&s.connection&&s.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(s){this.commentModel.text!==s&&(at(new(lt(Hr))(this,"comment",null,this.commentModel.text,s)),this.comment=this.commentModel.text=s)}setWarningText(s,c){}setMutator(s){}getRelativeToSurfaceXY(){return this.xy_}moveBy(s,c){if(this.parentBlock_)throw Error("Block has parent.");const f=new(lt(To))(this);this.xy_.translate(s,c),f.recordNew(),at(f)}makeConnection_(s){return new Vn(this,s)}allInputsFilled(s){if(s===void 0&&(s=!0),!s&&this.isShadow())return!1;for(let f=0,_;_=this.inputList[f];f++)if(_.connection){var c=_.connection.targetBlock();if(!c||!c.allInputsFilled(s))return!1}return(c=this.getNextBlock())?c.allInputsFilled(s):!0}toDevString(){let s=this.type?'"'+this.type+'" block':"Block";return this.id&&(s+=' (id="'+this.id+'")'),s}};v_.COLLAPSED_INPUT_NAME=sy,v_.COLLAPSED_FIELD_NAME=oy;var vw=null,ay=null,ly={};ly.connectionUiEffect=ll,ly.disconnectUiEffect=R1,ly.disconnectUiStop=wa,ly.disposeUiEffect=Wg;var UU=class extends gw{constructor(s){super(s),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=s.commentModel;let c;this.model.text=(c=this.model.text)!=null?c:"",this.createIcon()}drawIcon_(s){L(Re.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},s),L(Re.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},s),L(Re.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},s)}createEditor(){this.foreignObject=L(Re.FOREIGNOBJECT,{x:ln.BORDER_WIDTH,y:ln.BORDER_WIDTH});const s=document.createElementNS(Ea,"body");s.setAttribute("xmlns",Ea),s.className="blocklyMinimalBody";const c=this.textarea_=document.createElementNS(Ea,"textarea");c.className="blocklyCommentTextarea",c.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let f;return c.value=(f=this.model.text)!=null?f:"",this.resizeTextarea(),s.appendChild(c),this.foreignObject.appendChild(s),this.onMouseUpWrapper=v(c,"focus",this,this.startEdit,!0),this.onWheelWrapper=v(c,"wheel",this,function(_){_.stopPropagation()}),this.onChangeWrapper=v(c,"change",this,function(_){this.cachedText!==this.model.text&&at(new(lt(Hr))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=v(c,"input",this,function(_){this.model.text=c.value}),setTimeout(c.focus.bind(c),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var s=this.model.size,c=2*ln.BORDER_WIDTH,f=s.width-c;s=s.height-c,this.foreignObject.setAttribute("width",`${f}`),this.foreignObject.setAttribute("height",`${s}`),this.textarea_.style.width=f-4+"px",this.textarea_.style.height=s-4+"px"}}setVisible(s){s!==this.isVisible()&&(at(new(lt(hh))(this.getBlock(),s,"comment")),(this.model.pinned=s)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const s=this.getBlock();this.bubble_=new ln(s.workspace,this.createEditor(),s.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(s.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let s;this.paragraphElement_=ln.textToDom((s=this.model.text)!=null?s:""),this.bubble_=ln.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(S(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(S(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(S(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(S(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(s){let c;(c=this.bubble_)!=null&&c.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(s,c){this.bubble_?this.bubble_.setBubbleSize(s,c):(this.model.size.width=s,this.model.size.height=c)}updateText(){if(this.textarea_){let s;this.textarea_.value=(s=this.model.text)!=null?s:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};Ys(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var mh=null,mI={duplicateInternal:M1,copyInternal:wt},cy={};cy.TEST_ONLY=mI,cy.copy=mp,cy.duplicate=Td,cy.paste=Sd;var uy,gI,hy;uy=null,gI={},hy=null,t.module$build$src$core$contextmenu={},t.module$build$src$core$contextmenu.callbackFactory=B1,t.module$build$src$core$contextmenu.commentDeleteOption=zg,t.module$build$src$core$contextmenu.commentDuplicateOption=Qg,t.module$build$src$core$contextmenu.dispose=gv,t.module$build$src$core$contextmenu.getCurrentBlock=P1,t.module$build$src$core$contextmenu.hide=gp,t.module$build$src$core$contextmenu.setCurrentBlock=Lc,t.module$build$src$core$contextmenu.show=Nc,t.module$build$src$core$contextmenu.workspaceCommentOption=F1;var Hn=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(s){if(this.registry_.has(s.id))throw Error('Menu item with ID "'+s.id+'" is already registered.');this.registry_.set(s.id,s)}unregister(s){if(!this.registry_.has(s))throw Error('Menu item with ID "'+s+'" not found.');this.registry_.delete(s)}getItem(s){let c;return(c=this.registry_.get(s))!=null?c:null}getContextMenuOptions(s,c){const f=[];for(const x of this.registry_.values())if(s===x.scopeType){var _=x.preconditionFn(c);_!=="hidden"&&(_={text:typeof x.displayText=="function"?x.displayText(c):x.displayText,enabled:_==="enabled",callback:x.callback,scope:c,weight:x.weight},f.push(_))}return f.sort(function(x,P){return x.weight-P.weight}),f}};(function(s){var c=s.ScopeType||(s.ScopeType={});c.BLOCK="block",c.WORKSPACE="workspace",s.registry=new s})(Hn||(Hn={})),Hn.ScopeType;var GU=30,WU=!0,Lp=[];Lp[xt.INPUT_VALUE]=xt.OUTPUT_VALUE,Lp[xt.OUTPUT_VALUE]=xt.INPUT_VALUE,Lp[xt.NEXT_STATEMENT]=xt.PREVIOUS_STATEMENT,Lp[xt.PREVIOUS_STATEMENT]=xt.NEXT_STATEMENT;var _I="RENAME_VARIABLE_ID",OI="DELETE_VARIABLE_ID",zU=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(s){this.drawer_=s}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(s){const c=this.curNode_;this.curNode_=s,this.drawer_&&this.drawer_.draw(c,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},vI=class extends zU{constructor(){super(),this.type="cursor"}next(){var s=this.getCurNode();if(!s)return null;for(s=s.next();s&&s.next()&&(s.getType()===it.types.NEXT||s.getType()===it.types.BLOCK);)s=s.next();return s&&this.setCurNode(s),s}in(){var s=this.getCurNode();if(!s)return null;(s.getType()===it.types.PREVIOUS||s.getType()===it.types.OUTPUT)&&(s=s.next());let c,f;return(s=(f=(c=s)==null?void 0:c.in())!=null?f:null)&&this.setCurNode(s),s}prev(){var s=this.getCurNode();if(!s)return null;for(s=s.prev();s&&s.prev()&&(s.getType()===it.types.NEXT||s.getType()===it.types.BLOCK);)s=s.prev();return s&&this.setCurNode(s),s}out(){var s=this.getCurNode();return s?((s=s.out())&&s.getType()===it.types.BLOCK&&(s=s.prev()||s),s&&this.setCurNode(s),s):null}};Bt(ct.CURSOR,uh,vI);var dy=class extends vI{constructor(){super()}next(){var s=this.getCurNode();return s?((s=this.getNextNode_(s,this.validNode_))&&this.setCurNode(s),s):null}in(){return this.next()}prev(){var s=this.getCurNode();return s?((s=this.getPreviousNode_(s,this.validNode_))&&this.setCurNode(s),s):null}out(){return this.prev()}getNextNode_(s,c){if(!s)return null;const f=s.in()||s.next();return c(f)?f:f?this.getNextNode_(f,c):(s=this.findSiblingOrParent_(s.out()),c(s)?s:s?this.getNextNode_(s,c):null)}getPreviousNode_(s,c){if(!s)return null;let f=s.prev();return f=f?this.getRightMostChild_(f):s.out(),c(f)?f:f?this.getPreviousNode_(f,c):null}validNode_(s){let c=!1;return s=s&&s.getType(),(s===it.types.OUTPUT||s===it.types.INPUT||s===it.types.FIELD||s===it.types.NEXT||s===it.types.PREVIOUS||s===it.types.WORKSPACE)&&(c=!0),c}findSiblingOrParent_(s){if(!s)return null;const c=s.next();return c||this.findSiblingOrParent_(s.out())}getRightMostChild_(s){if(!s.in())return s;for(s=s.in();s&&s.next();)s=s.next();return this.getRightMostChild_(s)}};dy.registrationName="basicCursor",Bt(ct.CURSOR,dy.registrationName,dy);var QU=class extends dy{validNode_(s){let c=!1;const f=s&&s.getType();return s&&(s=s.getLocation(),f===it.types.FIELD&&s&&s.isTabNavigable()&&s.isClickable()&&(c=!0)),c}},yI=10,wo=class extends Vn{constructor(s,c){super(s,c),this.targetConnection=this.highlightPath=null,this.db_=s.workspace.connectionDBList[c],this.dbOpposite_=s.workspace.connectionDBList[Lp[c]],this.offsetInBlock_=new _t(0,0),this.trackedState_=wo.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===wo.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(s){const c=this.x-s.x;return s=this.y-s.y,Math.sqrt(c*c+s*s)}bumpAwayFrom(s){if(!this.sourceBlock_.workspace.isDragging()){var c=this.sourceBlock_.getRootBlock();if(!c.isInFlyout){var f=!1;if(!c.isMovable()){if(c=s.getSourceBlock().getRootBlock(),!c.isMovable())return;s=this,f=!0}var _=Z()==c;_||c.addSelect();var x=s.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*yI)-this.x,P=s.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*yI)-this.y;f&&(P=-P),c.RTL&&(x=s.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*yI)-this.x),c.moveBy(x,P),_||c.removeSelect()}}}moveTo(s,c){this.trackedState_===wo.TrackedState.WILL_TRACK?(this.db_.addConnection(this,c),this.trackedState_=wo.TrackedState.TRACKED):this.trackedState_===wo.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,c)),this.x=s,this.y=c}moveBy(s,c){this.moveTo(this.x+s,this.y+c)}moveToOffset(s){this.moveTo(s.x+this.offsetInBlock_.x,s.y+this.offsetInBlock_.y)}setOffsetInBlock(s,c){this.offsetInBlock_.x=s,this.offsetInBlock_.y=c}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const s=this.targetConnection.x-this.x,c=this.targetConnection.y-this.y;if(s!==0||c!==0){const _=this.targetBlock();var f=_.getSvgRoot();if(!f)throw Error("block is not rendered.");f=xr(f),_.getSvgRoot().setAttribute("transform","translate("+(f.x-s)+","+(f.y-c)+")"),_.moveConnections(-s,-c)}}closest(s,c){return this.dbOpposite_.searchForClosest(this,s,c)}highlight(){if(!this.highlightPath){var s=this.sourceBlock_.workspace.getRenderer().getConstants(),c=s.shapeFor(this);this.type===xt.INPUT_VALUE||this.type===xt.OUTPUT_VALUE?(s=s.TAB_OFFSET_FROM_TOP,c=oi(0,-s)+Tt("v",s)+c.pathDown+Tt("v",s)):(s=s.NOTCH_OFFSET_LEFT-s.CORNER_RADIUS,c=oi(-s,0)+Tt("h",s)+c.pathLeft+Tt("h",s)),s=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=L(Re.PATH,{class:"blocklyHighlightedConnectionPath",d:c,transform:"translate("+(this.x-s.x)+","+(this.y-s.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(ye(this.highlightPath),this.highlightPath=null)}setTracking(s){s&&this.trackedState_===wo.TrackedState.TRACKED||!s&&this.trackedState_===wo.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(s?(this.db_.addConnection(this,this.y),this.trackedState_=wo.TrackedState.TRACKED):(this.trackedState_===wo.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=wo.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const f=this.targetBlock().getDescendants(!1);for(let _=0;_<f.length;_++){var s=f[_],c=s.getConnections_(!0);for(let x=0;x<c.length;x++)c[x].setTracking(!1);for(s=s.getIcons(),c=0;c<s.length;c++)s[c].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let s=[];if(this.type!==xt.INPUT_VALUE&&this.type!==xt.NEXT_STATEMENT)return s;const c=this.targetBlock();if(c){let f;c.isCollapsed()?(f=[],c.outputConnection&&f.push(c.outputConnection),c.nextConnection&&f.push(c.nextConnection),c.previousConnection&&f.push(c.previousConnection)):f=c.getConnections_(!0);for(let _=0;_<f.length;_++)s.push(...f[_].startTrackingAll());s.length||(s=[c])}return s}onFailedConnect(s){const c=this.getSourceBlock();if(qt()){const f=nn();setTimeout(function(){c.isDisposed()||c.getParent()||(Et(f),this.bumpAwayFrom(s),Et(!1))}.bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(s,c){super.disconnectInternal_(s,c),s.rendered&&s.render(),c.rendered&&(c.updateDisabled(),c.render(),c.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var s=this.targetBlock();s&&(s.initSvg(),s.render(!1),s=this.getSourceBlock(),s.rendered&&s.render())}neighbours(s){return this.dbOpposite_.getNeighbours(this,s)}connect_(s){super.connect_(s);var c=this.getSourceBlock();s=s.getSourceBlock();const f=c.rendered,_=s.rendered;f&&c.updateDisabled(),_&&s.updateDisabled(),f&&_&&(this.type===xt.NEXT_STATEMENT||this.type===xt.PREVIOUS_STATEMENT?s.render():c.render()),(c=c.getInputWithBlock(s))&&(c=c.isVisible(),s.getSvgRoot().style.display=c?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(s){s=s.TrackedState||(s.TrackedState={}),s[s.WILL_TRACK=-1]="WILL_TRACK",s[s.UNTRACKED=0]="UNTRACKED",s[s.TRACKED=1]="TRACKED"})(wo||(wo={})),wo.TrackedState;var VU=class extends gw{constructor(s){super(s),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(s){L(Re.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},s),L(Re.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},s),L(Re.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},s)}setVisible(s){s!==this.isVisible()&&(at(new(lt(hh))(this.getBlock(),s,"warning")),s?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=ln.textToDom(this.getText()),this.bubble_=ln.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(s,c){this.text[c]!==s&&(s?this.text[c]=s:delete this.text[c],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const s=[];for(const c in this.text)s.push(this.text[c]);return s.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},hl=class extends v_{constructor(s,c,f){super(s,c,f),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=s,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=L(Re.G,{}),this.svgGroup_.translate_="",this.style=s.getRenderer().getConstants().getBlockStyle(null),this.pathObject=s.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!s.getBlockDragSurface(),s=this.pathObject.svgPath,s.tooltip=this,Zu(s),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let c=0,f;f=this.inputList[c];c++)f.init();var s=this.getIcons();for(let c=0;c<s.length;c++)s[c].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),s=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!s||v(s,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,s.parentNode||this.workspace.getCanvas().appendChild(s)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Z()!==this){var s=null;if(Z()){s=Z().id,cn();try{Z().unselect()}finally{rt()}}s=new(lt(Md))(s,this.id,this.workspace.id),at(s),N(this),this.addSelect()}}unselect(){if(Z()===this){var s=new(lt(Md))(this.id,null,this.workspace.id);s.workspaceId=this.workspace.id,at(s),N(null),this.removeSelect()}}getIcons(){const s=[];return this.mutator&&s.push(this.mutator),this.commentIcon_&&s.push(this.commentIcon_),this.warning&&s.push(this.warning),s}setParent(s){const c=this.parentBlock_;if(s!==c){Ue(),super.setParent(s),we();var f=this.getSvgRoot();if(!this.workspace.isClearing&&f){var _=this.getRelativeToSurfaceXY();s?(s.getSvgRoot().appendChild(f),s=this.getRelativeToSurfaceXY(),this.moveConnections(s.x-_.x,s.y-_.y)):c&&(this.workspace.getCanvas().appendChild(f),this.translate(_.x,_.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let s=0,c=0;const f=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let _=this.getSvgRoot();if(_)do{var x=xr(_);s+=x.x,c+=x.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===_&&(x=this.workspace.getBlockDragSurface().getSurfaceTranslation(),s+=x.x,c+=x.y),_=_.parentNode}while(_&&_!==this.workspace.getCanvas()&&_!==f);return new _t(s,c)}moveBy(s,c){if(this.parentBlock_)throw Error("Block has parent.");const f=Dn();let _=null;f&&(_=new(lt(To))(this));const x=this.getRelativeToSurfaceXY();this.translate(x.x+s,x.y+c),this.moveConnections(s,c),f&&_&&(_.recordNew(),at(_)),this.workspace.resizeContents()}translate(s,c){this.getSvgRoot().setAttribute("transform","translate("+s+","+c+")")}moveToDragSurface(){if(this.useDragSurface_){var s=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(s.x,s.y),(s=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(s)}}moveTo(s){const c=this.getRelativeToSurfaceXY();this.moveBy(s.x-c.x,s.y-c.y)}moveOffDragSurface(s){this.useDragSurface_&&(this.translate(s.x,s.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(s){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(s.x,s.y):(this.svgGroup_.translate_="translate("+s.x+","+s.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var s=this.workspace.getGrid();if(s&&s.shouldSnap()){var c=s.getSpacing(),f=c/2,_=this.getRelativeToSurfaceXY();s=Math.round(Math.round((_.x-f)/c)*c+f-_.x),c=Math.round(Math.round((_.y-f)/c)*c+f-_.y),(s||c)&&this.moveBy(s,c)}}}getBoundingRectangle(){const s=this.getRelativeToSurfaceXY(),c=this.getHeightWidth();let f,_;return this.RTL?(f=s.x-c.width,_=s.x):(f=s.x,_=s.x+c.width),new ji(s.y,s.y+c.height,f,_)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let s=0,c;c=this.inputList[s];s++)c.markDirty()}setCollapsed(s){this.collapsed_!==s&&(super.setCollapsed(s),s?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var s=this.isCollapsed();const c=sy,f=oy;for(let x=0,P;P=this.inputList[x];x++)P.name!==c&&P.setVisible(!s);if(s){s=this.getIcons();for(let x=0,P;P=s[x];x++)P.setVisible(!1);s=this.toString(GU);var _=this.getField(f);_?_.setValue(s):(this.getInput(c)||this.appendDummyInput(c)).appendField(new t.FieldLabel$$module$build$src$core$field_label(s),f)}else this.updateDisabled(),this.removeInput(c)}tab(s,c){const f=new QU;f.setCurNode(it.createFieldNode(s)),s=f.getCurNode(),c?f.next():f.prev(),(c=f.getCurNode())&&c!==s&&(c.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(c))}onMouseDown_(s){const c=this.workspace.getGesture(s);c&&c.handleBlockStart(s,this)}showHelp(){const s=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;s&&window.open(s)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const s=Hn.registry.getContextMenuOptions(Hn.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(s),s}showContextMenu(s){const c=this.generateContextMenu();c&&c.length&&(Nc(s,c,this.RTL),Lc(this))}moveConnections(s,c){if(this.rendered){for(var f=this.getConnections_(!1),_=0;_<f.length;_++)f[_].moveBy(s,c);for(f=this.getIcons(),_=0;_<f.length;_++)f[_].computeIconLocation();for(f=0;f<this.childBlocks_.length;f++)this.childBlocks_[f].moveConnections(s,c)}}setDragging(s){if(s){var c=this.getSvgRoot();c.translate_="",c.skew_="",_i.push(...this.getConnections_(!0)),le(this.svgGroup_,"blocklyDragging")}else _i.length=0,ie(this.svgGroup_,"blocklyDragging");for(c=0;c<this.childBlocks_.length;c++)this.childBlocks_[c].setDragging(s)}setMovable(s){super.setMovable(s),this.pathObject.updateMovable(s)}setEditable(s){super.setEditable(s),s=this.getIcons();for(let c=0;c<s.length;c++)s[c].updateEditable()}setShadow(s){super.setShadow(s),this.applyColour()}setInsertionMarker(s){this.isInsertionMarker_!==s&&(this.isInsertionMarker_=s)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(s,c){if(!this.isDeadOrDying()){rl(),Es(this.pathObject.svgPath),Ue();var f=this.workspace;Z()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),P1()===this&&gp(),c&&this.rendered&&(this.unplug(s),Wg(this)),this.rendered=!1;for(var _ of this.warningTextDb.values())clearTimeout(_);for(this.warningTextDb.clear(),c=this.getIcons(),_=0;_<c.length;_++)c[_].dispose();Z()===this&&N(null),super.dispose(!!s),ye(this.svgGroup_),f.resizeContents(),this.svgGroup_=null,we()}}checkAndDelete(){this.workspace.isFlyout||(Et(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),Et(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:Ho(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:re(this,!0)}}applyColour(){this.pathObject.applyColour(this);const s=this.getIcons();for(let c=0;c<s.length;c++)s[c].applyColour();for(let c=0,f;f=this.inputList[c];c++)for(let _=0,x;x=f.fieldRow[_];_++)x.applyColour()}updateDisabled(){const s=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let c=0,f;f=s[c];c++)f.rendered&&f.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(s){this.commentModel.text!==s&&(super.setCommentText(s),s=s!==null,!!this.commentIcon_===s?this.commentIcon_.updateText():(s?this.comment=this.commentIcon_=new UU(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(s,c){const f=c||"";if(f)this.warningTextDb.has(f)&&(clearTimeout(this.warningTextDb.get(f)),this.warningTextDb.delete(f));else{for(var _ of this.warningTextDb.values())clearTimeout(_);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(f,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(f),this.setWarningText(s,f))},100));else{if(this.isInFlyout&&(s=null),c=!1,typeof s=="string"){_=this.getSurroundParent();let x=null;for(;_;)_.isCollapsed()&&(x=_),_=_.getSurroundParent();x&&x.setWarningText(Kt.COLLAPSED_WARNINGS_WARNING,hl.COLLAPSED_WARNING_ID),this.warning||(this.warning=new VU(this),c=!0),this.warning.setText(s,f)}else this.warning&&!f?(this.warning.dispose(),c=!0):this.warning&&(c=this.warning.getText(),this.warning.setText("",f),(_=this.warning.getText())||this.warning.dispose(),c=c!==_);c&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(s){this.mutator&&this.mutator!==s&&this.mutator.dispose(),s&&(s.setBlock(this),this.mutator=s,s.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(s){this.isEnabled()!==s&&(super.setEnabled(s),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(s){this.rendered&&this.pathObject.updateHighlighted(s)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(s){this.pathObject.updateDraggingDelete(s)}getColour(){return this.style.colourPrimary}setColour(s){super.setColour(s),s=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(s.style),this.style=s.style,this.styleName_=s.name,this.applyColour()}setStyle(s){const c=this.workspace.getRenderer().getConstants().getBlockStyle(s);if(this.styleName_=s,c)this.hat=c.hat,this.pathObject.setStyle(c),this.colour_=c.colourPrimary,this.style=c,this.applyColour();else throw Error("Invalid style name: "+s)}bringToFront(){let s=this;do{const c=s.getSvgRoot(),f=c.parentNode,_=f.childNodes;_[_.length-1]!==c&&f.appendChild(c),s=s.getParent()}while(s)}setPreviousStatement(s,c){super.setPreviousStatement(s,c),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(s,c){super.setNextStatement(s,c),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(s,c){super.setOutput(s,c),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(s){super.setInputsInline(s),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(s,c){return s=super.removeInput(s,c),this.rendered&&(this.render(),this.bumpNeighbours()),s}moveNumberedInputBefore(s,c){super.moveNumberedInputBefore(s,c),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(s,c){return s=super.appendInput_(s,c),this.rendered&&(this.render(),this.bumpNeighbours()),s}setConnectionTracking(s){if(this.previousConnection&&this.previousConnection.setTracking(s),this.outputConnection&&this.outputConnection.setTracking(s),this.nextConnection){this.nextConnection.setTracking(s);var c=this.nextConnection.targetBlock();c&&c.setConnectionTracking(s)}if(!this.collapsed_)for(c=0;c<this.inputList.length;c++){var f=this.inputList[c].connection;f&&(f.setTracking(s),(f=f.targetBlock())&&f.setConnectionTracking(s))}}getConnections_(s){const c=[];if((s||this.rendered)&&(this.outputConnection&&c.push(this.outputConnection),this.previousConnection&&c.push(this.previousConnection),this.nextConnection&&c.push(this.nextConnection),s||!this.collapsed_))for(let f=0,_;_=this.inputList[f];f++)_.connection&&c.push(_.connection);return c}lastConnectionInStack(s){return super.lastConnectionInStack(s)}getMatchingConnection(s,c){return super.getMatchingConnection(s,c)}makeConnection_(s){return new wo(this,s)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const s=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||s.isInFlyout))for(const c of this.getConnections_(!1)){if(c.isSuperior()){let f;(f=c.targetBlock())==null||f.bumpNeighboursInternal()}for(const f of c.neighbours(t.config$$module$build$src$core$config.snapRadius))f.getSourceBlock().getRootBlock()!==s&&(c.isConnected()&&f.isConnected()||(c.isSuperior()?f.bumpAwayFrom(c):c.bumpAwayFrom(f)))}}scheduleSnapAndBump(){const s=nn();setTimeout(()=>{Et(s),this.snapToGrid(),Et(!1)},t.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{Et(s),this.bumpNeighbours(),Et(!1)},t.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(s,c){s.type!==xt.NEXT_STATEMENT&&s.type!==xt.INPUT_VALUE||this.moveBy(c.x-s.x,c.y-s.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(s){return super.getChildren(s)}render(s){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Ue(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),s!==!1){const c=this.getParent();c?c.render(!0):this.workspace.resizeContents()}we(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(jv.LOCAL_MARKER).draw()}updateConnectionLocations_(){const s=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(s),this.outputConnection&&this.outputConnection.moveToOffset(s);for(let c=0;c<this.inputList.length;c++){const f=this.inputList[c].connection;f&&(f.moveToOffset(s),f.isConnected()&&f.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(s),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(s){this.pathObject.setCursorSvg(s)}setMarkerSvg(s){this.pathObject.setMarkerSvg(s)}getHeightWidth(){let s=this.height,c=this.width;var f=this.getNextBlock();if(f){f=f.getHeightWidth();const _=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;s+=f.height-_,c=Math.max(c,f.width)}return{height:s,width:c}}fadeForReplacement(s){this.pathObject.updateReplacementFade(s)}highlightShapeForInput(s,c){this.pathObject.updateShapeForInputHighlight(s,c)}};hl.INLINE=-1,hl.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var HU=class{constructor(){}onDragEnter(s){}onDragOver(s){}onDragExit(s){}onDrop(s){}getClientRect(){return null}shouldPreventMove(s){return!1}},yw=class extends HU{constructor(){super(),this.wouldDelete_=!1}wouldDelete(s,c){return s instanceof hl?(s=!s.getParent()&&s.isDeletable(),this.updateWouldDelete_(s&&!c)):this.updateWouldDelete_(s.isDeletable()),this.wouldDelete_}updateWouldDelete_(s){this.wouldDelete_=s}},gh;(function(s){s[s.TOP=0]="TOP",s[s.BOTTOM=1]="BOTTOM"})(gh||(gh={}));var y_;(function(s){s[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT"})(y_||(y_={}));var Nd;(function(s){s[s.UP=0]="UP",s[s.DOWN=1]="DOWN"})(Nd||(Nd={}));var Np={};Np.bumpDirection=Nd,Np.bumpPositionRect=_v,Np.getCornerOppositeToolbox=wd,Np.getStartPositionRect=_p,Np.horizontalPosition=y_,Np.verticalPosition=gh;var Eo={width:96,height:124,url:"sprites.png"},XU=class extends yw{constructor(s){super(),this.workspace=s,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(s=new ql({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(s.toolboxPosition=this.workspace.toolboxPosition===sn.TOP?sn.BOTTOM:sn.TOP,this.flyout=new(At(ct.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(s)):(s.toolboxPosition=this.workspace.toolboxPosition===sn.RIGHT?sn.LEFT:sn.RIGHT,this.flyout=new(At(ct.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(s)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=L(Re.G,{class:"blocklyTrash"});let s;const c=String(Math.random()).substring(2);s=L(Re.CLIPPATH,{id:"blocklyTrashBodyClipPath"+c},this.svgGroup_),L(Re.RECT,{width:b_,height:bw,y:S_},s);const f=L(Re.IMAGE,{width:Eo.width,x:-bI,height:Eo.height,y:-SI,"clip-path":"url(#blocklyTrashBodyClipPath"+c+")"},this.svgGroup_);return f.setAttributeNS(Zo,"xlink:href",this.workspace.options.pathToMedia+Eo.url),s=L(Re.CLIPPATH,{id:"blocklyTrashLidClipPath"+c},this.svgGroup_),L(Re.RECT,{width:b_,height:S_},s),this.svgLid_=L(Re.IMAGE,{width:Eo.width,x:-bI,height:Eo.height,y:-SI,"clip-path":"url(#blocklyTrashLidClipPath"+c+")"},this.svgGroup_),this.svgLid_.setAttributeNS(Zo,"xlink:href",this.workspace.options.pathToMedia+Eo.url),y(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),y(this.svgGroup_,"pointerup",this,this.click),y(f,"pointerover",this,this.mouseOver_),y(f,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(xe(this.flyout.createDom(Re.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[ms.Capability.AUTOHIDEABLE,ms.Capability.DELETE_AREA,ms.Capability.DRAG_TARGET,ms.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(ye(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var s=this.contents_.map(function(f){return JSON.parse(f)}),c=this.workspace.getParentSvg().style;c.cursor="wait",setTimeout(()=>{let f;(f=this.flyout)==null||f.show(s),c.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var s;(s=this.flyout)==null||s.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(s){!s&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(s,c){if(this.initialized_){var f=wd(this.workspace,s);s=_p(f,new ps(b_,bw+S_),Une,jU,s,this.workspace),c=_v(s,jU,f.vertical===gh.TOP?Nd.DOWN:Nd.UP,c),this.top_=c.top,this.left_=c.left;var _;(_=this.svgGroup_)==null||_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new ji(this.top_,this.top_+bw+S_,this.left_,this.left_+b_)}getClientRect(){if(!this.svgGroup_)return null;var s=this.svgGroup_.getBoundingClientRect();const c=s.top+SI-Sw;return s=s.left+bI-Sw,new ji(c,c+S_+bw+2*Sw,s,s+b_+2*Sw)}onDragOver(s){this.setLidOpen(this.wouldDelete_)}onDragExit(s){this.setLidOpen(!1)}onDrop(s){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(s){this.isLidOpen!==s&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=s,this.animateLid_())}animateLid_(){const s=zne;var c=1/(s+1);this.lidOpen_+=this.isLidOpen?c:-c,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*ZU),c=YU+this.lidOpen_*(Qne-YU),this.svgGroup_&&(this.svgGroup_.style.opacity=c.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Wne/s))}setLidAngle_(s){const c=this.workspace.toolboxPosition===sn.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let f;(f=this.svgLid_)==null||f.setAttribute("transform","rotate("+(c?-s:s)+","+(c?4:b_-4)+","+(S_-2)+")")}setMinOpenness_(s){this.minOpenness_=s,this.isLidOpen||this.setLidAngle_(s*ZU)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(s){s=new(lt(Gv))(s,this.workspace.id),at(s)}blockMouseDownWhenOpenable_(s){!this.contentsIsOpen()&&this.hasContents_()&&s.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(s){if(!(0>=this.workspace.options.maxTrashcanContents||s.type!==Xc||s.type!==Xc||s.wasShadow)){if(!s.oldJson)throw Error("Encountered a delete event without proper oldJson");if(s=JSON.stringify(this.cleanBlockJson_(s.oldJson)),this.contents_.indexOf(s)===-1){for(this.contents_.unshift(s);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(Gne)}}}cleanBlockJson_(s){function c(f){if(f){if(delete f.id,delete f.x,delete f.y,delete f.enabled,f.icons&&f.icons.comment){var _=f.icons.comment;delete _.height,delete _.width,delete _.pinned}_=f.inputs;for(var x in _){var P=_[x];const J=P.block;P=P.shadow,J&&c(J),P&&c(P)}f.next&&(x=f.next,f=x.block,x=x.shadow,f&&c(f),x&&c(x))}}return s=JSON.parse(JSON.stringify(s)),c(s),Object.assign({},{kind:"BLOCK"},s)}},b_=47,bw=44,S_=16,jU=20,Une=20,Sw=10,bI=0,SI=32,Gne=.1,Wne=80,zne=4,YU=.4,Qne=.8,ZU=45,TI=class extends Xl{constructor(s,c,f){super(f),this.type=Wv,this.oldItem=s??void 0,this.newItem=c??void 0}toJson(){const s=super.toJson();return s.oldItem=this.oldItem,s.newItem=this.newItem,s}fromJson(s){i("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldItem=s.oldItem,this.newItem=s.newItem}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new TI),c.oldItem=s.oldItem,c.newItem=s.newItem,c}};Bt(ct.EVENT,Wv,TI);var wI=class{constructor(s,c,f){this.id_=s.toolboxitemid||Zt(),this.level_=(this.parent_=f||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=s,this.parentToolbox_=c,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(s){}},Jl=class extends wI{constructor(s,c,f){super(s,c,f),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(s){if("custom"in s)this.flyoutItems_=s.custom;else if(s=s.contents)for(let c=0;c<s.length;c++){const f=s[c];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(f)}}parseCategoryDef_(s){this.name_="name"in s?gi(s.name):"",this.colour_=this.getColour_(s),Object.assign(this.cssConfig_,s.cssconfig||s.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Qi(this.htmlDiv_,Jo.TREEITEM),Kn(this.htmlDiv_,Oi.SELECTED,!1),Kn(this.htmlDiv_,Oi.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Qi(this.iconDom_,Jo.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const s=this.labelDom_.getAttribute("id");return s&&Kn(this.htmlDiv_,Oi.LABELLEDBY,s),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const s=document.createElement("div"),c=this.cssConfig_.container;return c&&le(s,c),s}createRowContainer_(){const s=document.createElement("div");var c=this.cssConfig_.row;return c&&le(s,c),c=`${Jl.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?s.style.paddingRight=c:s.style.paddingLeft=c,s}createRowContentsContainer_(){const s=document.createElement("div"),c=this.cssConfig_.rowcontentcontainer;return c&&le(s,c),s}createIconDom_(){const s=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const c=this.cssConfig_.icon;c&&le(s,c)}return s.style.display="inline-block",s}createLabelDom_(s){const c=document.createElement("span");return c.setAttribute("id",this.getId()+".label"),c.textContent=s,(s=this.cssConfig_.label)&&le(c,s),c}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(s){s&&(s=Jl.borderWidth+"px solid "+(s||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=s:this.rowDiv_.style.borderLeft=s)}getColour_(s){const c=s.categorystyle||s.categoryStyle;if((s=s.colour)&&c)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(c)return this.getColourfromStyle_(c);if(s)return this.parseColour_(s)}return""}getColourfromStyle_(s){var c=this.workspace_.getTheme();if(s&&c){if((c=c.categoryStyles[s])&&c.colour)return this.parseColour_(c.colour);console.warn('Style "'+s+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(s){if(s=gi(s),s==null||s==="")return"";var c=Number(s);return isNaN(c)?(c=Fl(s))?c:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+s),""):tp(c)}openIcon_(s){if(s){var c=this.cssConfig_.closedicon;c&&de(s,c),(c=this.cssConfig_.openicon)&&le(s,c)}}closeIcon_(s){if(s){var c=this.cssConfig_.openicon;c&&de(s,c),(c=this.cssConfig_.closedicon)&&le(s,c)}}setVisible_(s){this.htmlDiv_.style.display=s?"block":"none",this.isHidden_=!s,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let s=this;for(;s.getParent();)if(s=s.getParent(),!s.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(s){}setSelected(s){if(this.rowDiv_){var c=this.cssConfig_.selected;if(s){const f=this.parseColour_(Jl.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||f,c&&le(this.rowDiv_,c)}else this.rowDiv_.style.backgroundColor="",c&&ie(this.rowDiv_,c);Kn(this.htmlDiv_,Oi.SELECTED,s)}}setDisabled(s){this.isDisabled_=s,this.getDiv().setAttribute("disabled",`${s}`),s?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(s){this.flyoutItems_=[],this.toolboxItemDef_=typeof s=="string"?{kind:this.toolboxItemDef_.kind,custom:s,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:vd(s),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ye(this.htmlDiv_)}};Jl.registrationName="category",Jl.nestedPadding=19,Jl.borderWidth=8,Jl.defaultBackgroundColour="#57e",Ys(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),Bt(ct.TOOLBOX_ITEM,Jl.registrationName,Jl);var fy=class extends wI{constructor(s,c){super(s,c),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,s.cssconfig||s.cssConfig)}init(){this.createDom_()}createDom_(){const s=document.createElement("div"),c=this.cssConfig_.container;return c&&le(s,c),this.htmlDiv_=s}getDiv(){return this.htmlDiv_}dispose(){ye(this.htmlDiv_)}};fy.registrationName="sep",Ys(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),Bt(ct.TOOLBOX_ITEM,fy.registrationName,fy);var T_=class extends Jl{constructor(s,c,f){super(s,c,f),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const s=super.makeDefaultCssConfig_();return s.contents="blocklyToolboxContents",s}parseContents_(s){const c=s.contents;let f=!0;if(s.custom)this.flyoutItems_=s.custom;else if(c)for(s=0;s<c.length;s++){const _=c[s];!Ye(ct.TOOLBOX_ITEM,_.kind)||_.kind.toLowerCase()===fy.registrationName&&f?(this.flyoutItems_.push(_),f=!0):(this.createToolboxItem_(_),f=!1)}}createToolboxItem_(s){let c=s.kind;c.toUpperCase()==="CATEGORY"&&Ul(s)&&(c=T_.registrationName),s=new(Ne(ct.TOOLBOX_ITEM,c))(s,this.parentToolbox_,this),this.toolboxItems_.push(s)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const s=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(s),Qi(this.subcategoriesDiv_,Jo.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const s=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const c=this.cssConfig_.icon;c&&le(s,c),s.style.visibility="visible"}return s.style.display="inline-block",s}createSubCategoriesDom_(s){const c=document.createElement("div");var f=this.cssConfig_.contents;for(f&&le(c,f),f=0;f<s.length;f++){const _=s[f];_.init();const x=_.getDiv();if(c.appendChild(x),_.getClickTarget){let P;(P=_.getClickTarget())==null||P.setAttribute("id",_.getId())}}return c}setExpanded(s){this.expanded_!==s&&((this.expanded_=s)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),Kn(this.htmlDiv_,Oi.EXPANDED,s),this.parentToolbox_.handleToolboxItemResize())}setVisible_(s){this.htmlDiv_.style.display=s?"block":"none";const c=this.getChildToolboxItems();for(let f=0;f<c.length;f++)c[f].setVisible_(s);this.isHidden_=!s,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(s){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};T_.registrationName="collapsibleCategory",Bt(ct.TOOLBOX_ITEM,T_.registrationName,T_);var qU=class extends yw{constructor(s){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=s,this.toolboxDef_=s.options.languageTree||{contents:[]},this.horizontalLayout_=s.options.horizontalLayout,this.RTL=s.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=s.options.toolboxPosition}onShortcut(s){return!1}init(){var s=this.workspace_;const c=s.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),xe(this.flyout_.createDom("svg"),c),this.setVisible(!0),this.flyout_.init(s),this.render(this.toolboxDef_),s=s.getThemeManager(),s.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),s.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[ms.Capability.AUTOHIDEABLE,ms.Capability.DELETE_AREA,ms.Capability.DRAG_TARGET]})}createDom_(s){s=s.getParentSvg();const c=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Qi(this.contentsDiv_,Jo.TREE),c.appendChild(this.contentsDiv_),s.parentNode.insertBefore(c,s),this.attachEvents_(c,this.contentsDiv_),c}createContainer_(){const s=document.createElement("div");return s.setAttribute("layout",this.isHorizontal()?"h":"v"),le(s,"blocklyToolboxDiv"),le(s,"blocklyNonSelectable"),s.setAttribute("dir",this.RTL?"RTL":"LTR"),s}createContentsContainer_(){const s=document.createElement("div");return le(s,"blocklyToolboxContents"),this.isHorizontal()&&(s.style.flexDirection="row"),s}attachEvents_(s,c){s=v(s,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(s),c=v(c,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(c)}onClick_(s){if(w(s)||s.target===this.HtmlDiv)B().hideChaff(!1);else{var c=s.target.getAttribute("id");c&&(c=this.getToolboxItemById(c),c.isSelectable()&&(this.setSelectedItem(c),c.onClick(s))),B().hideChaff(!0)}a()}onKeyDown_(s){let c=!1;switch(s.keyCode){case Rt.DOWN:c=this.selectNext_();break;case Rt.UP:c=this.selectPrevious_();break;case Rt.LEFT:c=this.selectParent_();break;case Rt.RIGHT:c=this.selectChild_();break;case Rt.ENTER:case Rt.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),c=!0);break;default:c=!1}if(!c&&this.selectedItem_){const f=this.selectedItem_;f.onKeyDown&&(c=f.onKeyDown(s))}c&&s.preventDefault()}createFlyout_(){const s=this.workspace_,c=new ql({parentWorkspace:s,rtl:s.RTL,oneBasedIndex:s.options.oneBasedIndex,horizontalLayout:s.horizontalLayout,renderer:s.options.renderer,rendererOverrides:s.options.rendererOverrides,move:{scrollbars:!0}});return c.toolboxPosition=s.options.toolboxPosition,new(s.horizontalLayout?At(ct.FLYOUTS_HORIZONTAL_TOOLBOX,s.options,!0):At(ct.FLYOUTS_VERTICAL_TOOLBOX,s.options,!0))(c)}render(s){this.toolboxDef_=s;for(let c=0;c<this.contents_.length;c++){const f=this.contents_[c];f&&f.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(s.contents),this.position(),this.handleToolboxItemResize()}renderContents_(s){const c=document.createDocumentFragment();for(let f=0;f<s.length;f++)this.createToolboxItem_(s[f],c);this.contentsDiv_.appendChild(c)}createToolboxItem_(s,c){var f=s.kind;f.toUpperCase()==="CATEGORY"&&Ul(s)&&(f=T_.registrationName),(f=Ne(ct.TOOLBOX_ITEM,f.toLowerCase()))&&(s=new f(s,this),s.init(),this.addToolboxItem_(s),(f=s.getDiv())&&c.appendChild(f),s.getClickTarget()&&s.getClickTarget().setAttribute("id",s.getId()))}addToolboxItem_(s){if(this.contents_.push(s),this.contentMap_[s.getId()]=s,s.isCollapsible()){s=s.getChildToolboxItems();for(let c=0;c<s.length;c++)this.addToolboxItem_(s[c])}}getToolboxItems(){return this.contents_}addStyle(s){s&&this.HtmlDiv&&le(this.HtmlDiv,s)}removeStyle(s){s&&this.HtmlDiv&&ie(this.HtmlDiv,s)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var s=this.HtmlDiv.getBoundingClientRect();const c=s.top,f=c+s.height,_=s.left;return s=_+s.width,this.toolboxPosition===sn.TOP?new ji(-1e7,f,-1e7,1e7):this.toolboxPosition===sn.BOTTOM?new ji(c,1e7,-1e7,1e7):this.toolboxPosition===sn.LEFT?new ji(-1e7,1e7,-1e7,s):new ji(-1e7,1e7,_,1e7)}wouldDelete(s,c){return s instanceof hl?this.updateWouldDelete_(!s.getParent()&&s.isDeletable()):this.updateWouldDelete_(s.isDeletable()),this.wouldDelete_}onDragEnter(s){this.updateCursorDeleteStyle_(!0)}onDragExit(s){this.updateCursorDeleteStyle_(!1)}onDrop(s){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(s){s!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=s,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(s){const c=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";s?this.addStyle(c):this.removeStyle(c)}getToolboxItemById(s){return this.contentMap_[s]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const s=this.workspace_.getMetrics(),c=this.HtmlDiv;c&&(this.horizontalLayout_?(c.style.left="0",c.style.height="auto",c.style.width="100%",this.height_=c.offsetHeight,this.width_=s.viewWidth,this.toolboxPosition===sn.TOP?c.style.top="0":c.style.bottom="0"):(this.toolboxPosition===sn.RIGHT?c.style.right="0":c.style.left="0",c.style.height="100%",this.width_=c.offsetWidth,this.height_=s.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const s=this.workspace_,c=this.HtmlDiv.getBoundingClientRect();s.translate(this.toolboxPosition===sn.LEFT?s.scrollX+c.width:s.scrollX,this.toolboxPosition===sn.TOP?s.scrollY+c.height:s.scrollY),K(s)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let s=0;s<this.contents_.length;s++){const c=this.contents_[s];c.refreshTheme&&c.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(s){this.isVisible_!==s&&(this.HtmlDiv.style.display=s?"block":"none",this.isVisible_=s,this.workspace_.recordDragTargets())}autoHide(s){!s&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(s){const c=this.selectedItem_;!s&&!c||s&&!s.isSelectable()||(this.shouldDeselectItem_(c,s)&&c!==null&&this.deselectItem_(c),this.shouldSelectItem_(c,s)&&s!==null&&this.selectItem_(c,s),this.updateFlyout_(c,s),this.fireSelectEvent_(c,s))}shouldDeselectItem_(s,c){return s!==null&&(!s.isCollapsible()||s!==c)}shouldSelectItem_(s,c){return c!==null&&c!==s}deselectItem_(s){this.selectedItem_=null,this.previouslySelectedItem_=s,s.setSelected(!1),Kn(this.contentsDiv_,Oi.ACTIVEDESCENDANT,"")}selectItem_(s,c){this.selectedItem_=c,this.previouslySelectedItem_=s,c.setSelected(!0),Kn(this.contentsDiv_,Oi.ACTIVEDESCENDANT,c.getId())}selectItemByPosition(s){-1<s&&s<this.contents_.length&&(s=this.contents_[s],s.isSelectable()&&this.setSelectedItem(s))}updateFlyout_(s,c){c&&(s!==c||c.isCollapsible())&&c.getContents().length?(this.flyout_.show(c.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(s,c){const f=s&&s.getName();let _=c&&c.getName();s===c&&(_=null),s=new(lt(Wv))(f,_,this.workspace_.id),at(s)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const s=this.selectedItem_;return s.isExpanded()?this.selectNext_():s.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let s=this.contents_.indexOf(this.selectedItem_)+1;if(-1<s&&s<this.contents_.length){let c=this.contents_[s];for(;c&&!c.isSelectable();)c=this.contents_[++s];if(c&&c.isSelectable())return this.setSelectedItem(c),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let s=this.contents_.indexOf(this.selectedItem_)-1;if(-1<s&&s<this.contents_.length){let c=this.contents_[s];for(;c&&!c.isSelectable();)c=this.contents_[--s];if(c&&c.isSelectable())return this.setSelectedItem(c),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var s=0;s<this.contents_.length;s++)this.contents_[s].dispose();for(s=0;s<this.boundEvents_.length;s++)S(this.boundEvents_[s]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ye(this.HtmlDiv)}};Ys(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),Bt(ct.TOOLBOX,uh,qU);var Vne={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Hne={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Xne=new Dp("zelos",Vne,Hne),EI={};EI.Classic=_w,EI.Zelos=Xne;var xI=class extends Xl{constructor(s,c,f){c=s?s.workspace.id:c,c===null&&(c=void 0),super(c),this.type=Pd,this.blockId=s?s.id:void 0,this.targetType=f}toJson(){const s=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return s.targetType=this.targetType,s.blockId=this.blockId,s}fromJson(s){i("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.targetType=s.targetType,this.blockId=s.blockId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new xI),c.targetType=s.targetType,c.blockId=s.blockId,c}},$I;(function(s){s.BLOCK="block",s.WORKSPACE="workspace",s.ZOOM_CONTROLS="zoom_controls"})($I||($I={})),Bt(ct.EVENT,Pd,xI);var JU=class{constructor(s,c){this.bubble=s,this.workspace=c,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=c.getBlockDragSurface()}startBubbleDrag(){nn()||Et(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(s,c){c=this.pixelsToWorkspaceUnits_(c),c=_t.sum(this.startXY_,c),this.bubble.moveDuringDrag(this.dragSurface_,c),c=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(s),s=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),s!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==c&&(c&&c.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(s){return s&&this.workspace.getComponentManager().hasCapability(s.id,ms.Capability.DELETE_AREA)?s.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(s,c){this.dragBubble(s,c),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?s=this.startXY_:(s=this.pixelsToWorkspaceUnits_(c),s=_t.sum(this.startXY_,s)),this.bubble.moveTo(s.x,s.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),Et(!1)}fireMoveEvent_(){if(this.bubble instanceof eo){const s=new(lt(dh))(this.bubble);s.setOldCoordinate(this.startXY_),s.recordNew(),at(s)}}pixelsToWorkspaceUnits_(s){return s=new _t(s.x/this.workspace.scale,s.y/this.workspace.scale),this.workspace.isMutator&&s.scale(1/this.workspace.options.parentWorkspace.scale),s}},KU=class{constructor(s){this.workspace=s,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new _t(s.scrollX,s.scrollY)}dispose(){this.workspace=null}startDrag(){Z()&&Z().unselect(),this.workspace.setupDragSurface()}endDrag(s){this.drag(s),this.workspace.resetDragSurface()}drag(s){if(s=_t.sum(this.startScrollXY_,s),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(s.x,s.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(s.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,s.y);else throw new TypeError("Invalid state.")}},jne=5,Yne=6,Yc=class{constructor(s,c){this.creatorWorkspace=c,this.mouseDownXY_=new _t(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=s,this.currentDragDeltaXY_=new _t(0,0),this.healStack_=!WU}dispose(){a(),Cg(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&S(this.onMoveWrapper_),this.onUpWrapper_&&S(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&S(this.onStartWrapper_)}updateFromEvent_(s){const c=new _t(s.clientX,s.clientY);this.updateDragDelta_(c)&&(this.updateIsDragging_(),o()),this.mostRecentEvent_=s}updateDragDelta_(s){return this.currentDragDeltaXY_=_t.difference(s,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=_t.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let s;if(!this.targetBlock_||(s=this.flyout_)==null||!s.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),nn()||Et(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new KU(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(At(ct.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new JU(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(s){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,T(s)?this.cancel():(this.hasStarted_=!0,wa(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=_e(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=s,YO(),this.targetBlock_&&this.targetBlock_.select(),w(s)?this.handleRightClick(s):(s.type.toLowerCase()==="pointerdown"&&s.pointerType!=="mouse"&&r(s,this),this.mouseDownXY_=new _t(s.clientX,s.clientY),this.healStack_=s.altKey||s.ctrlKey||s.metaKey,this.bindMouseEvents(s),this.isEnding_||this.handleTouchStart(s)))}bindMouseEvents(s){this.onStartWrapper_=v(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=v(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=v(document,"pointerup",null,this.handleUp.bind(this),!0),s.preventDefault(),s.stopPropagation()}handleStart(s){this.isDragging()||(this.handleTouchStart(s),this.isMultiTouch()&&o())}handleMove(s){this.isDragging()&&l(s)||!this.isMultiTouch()?(this.updateFromEvent_(s),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),s.preventDefault(),s.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(s),o())}handleUp(s){if(this.isDragging()||this.handleTouchEnd(s),!this.isMultiTouch()||this.isDragging()){if(!l(s))return;if(this.updateFromEvent_(s),o(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(s,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(s,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(s)}s.preventDefault(),s.stopPropagation(),this.dispose()}handleTouchStart(s){var c=u(s);this.cachedPoints.set(c,this.getTouchPoint(s));var f=Array.from(this.cachedPoints.keys());f.length===2&&(c=this.cachedPoints.get(f[0]),f=this.cachedPoints.get(f[1]),this.startDistance_=_t.distance(c,f),this.isMultiTouch_=!0,s.preventDefault())}handleTouchMove(s){const c=u(s);this.cachedPoints.set(c,this.getTouchPoint(s)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(s):this.handleMove(s)}handlePinch_(s){var c=Array.from(this.cachedPoints.keys()),f=this.cachedPoints.get(c[0]);if(c=this.cachedPoints.get(c[1]),f=_t.distance(f,c)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(c=f-this.previousScale_,c=0<c?c*jne:c*Yne,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const _=this.startWorkspace_,x=E(s,_.getParentSvg(),_.getInverseScreenCTM());_.zoom(x.x,x.y,c)}this.previousScale_=f,s.preventDefault()}handleTouchEnd(s){s=u(s),this.cachedPoints.has(s)&&this.cachedPoints.delete(s),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(s){return this.startWorkspace_?new _t(s.pageX,s.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(o(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(s){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(s)):this.startBubble_?this.startBubble_.showContextMenu(s):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(s)),s.preventDefault(),s.stopPropagation(),this.dispose()}handleWsStart(s,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(c),this.mostRecentEvent_=s,this.doStart(s)}fireWorkspaceClick_(s){at(new(lt(Pd))(null,s.id,"workspace"))}handleFlyoutStart(s,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(c),this.handleWsStart(s,c.getWorkspace())}handleBlockStart(s,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(c),this.mostRecentEvent_=s}handleBubbleStart(s,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(c),this.mostRecentEvent_=s}doBubbleClick_(){this.startBubble_ instanceof eo&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(nn()||Et(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const s=new(lt(Pd))(this.startBlock_,this.startWorkspace_.id,"block");at(s)}this.bringBlockToFront_(),Et(!1)}doWorkspaceClick_(s){s=this.creatorWorkspace,Z()&&Z().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||s)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(s){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=s)}setStartBubble(s){this.startBubble_||(this.startBubble_=s)}setStartBlock(s){this.startBlock_||this.startBubble_||(this.startBlock_=s,s.isInFlyout&&s!==s.getRootBlock()?this.setTargetBlock_(s.getRootBlock()):this.setTargetBlock_(s))}setTargetBlock_(s){s.isShadow()?this.setTargetBlock_(s.getParent()):this.targetBlock_=s}setStartWorkspace_(s){this.startWorkspace_||(this.startWorkspace_=s)}setStartFlyout_(s){this.flyout_||(this.flyout_=s)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let s,c;return(c=(s=this.blockDragger_)!=null?s:this.workspaceDragger_)!=null?c:this.bubbleDragger_}static inProgress(){const s=I();for(let c=0,f;f=s[c];c++)if(f.currentGesture_)return!0;return!1}},Yn=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(s,c){if(this.shortcuts.get(s.name)&&!c)throw Error(`Shortcut named "${s.name}" already exists.`);if(this.shortcuts.set(s.name,s),(c=s.keyCodes)&&0<c.length)for(let f=0;f<c.length;f++)this.addKeyMapping(c[f],s.name,!!s.allowCollision)}unregister(s){return this.shortcuts.get(s)?(this.removeAllKeyMappings(s),this.shortcuts.delete(s),!0):(console.warn(`Keyboard shortcut named "${s}" not found.`),!1)}addKeyMapping(s,c,f){s=String(s);const _=this.keyMap.get(s);if(_&&!f)throw Error(`Shortcut named "${c}" collides with shortcuts "${_}"`);_&&f?_.unshift(c):this.keyMap.set(s,[c])}removeKeyMapping(s,c,f){const _=this.keyMap.get(s);if(!_)return f||console.warn(`No keyboard shortcut named "${c}" registered with key code "${s}"`),!1;const x=_.indexOf(c);return-1<x?(_.splice(x,1),_.length===0&&this.keyMap.delete(s),!0):(f||console.warn(`No keyboard shortcut named "${c}" registered with key code "${s}"`),!1)}removeAllKeyMappings(s){for(const c of this.keyMap.keys())this.removeKeyMapping(c,s,!0)}setKeyMap(s){this.keyMap.clear();for(const c in s)this.keyMap.set(c,s[c])}getKeyMap(){const s=Object.create(null);for(const[c,f]of this.keyMap)s[c]=f;return s}getRegistry(){const s=Object.create(null);for(const[c,f]of this.shortcuts)s[c]=f;return Pc(Object.create(null),s)}onKeyDown(s,c){var f=this.serializeKeyEvent_(c);if(f=this.getShortcutNamesByKeyCode(f),!f)return!1;for(let _=0,x;x=f[_];_++){const P=this.shortcuts.get(x);let J,be;if((J=P)==null||!J.preconditionFn||(be=P)!=null&&be.preconditionFn(s)){let tt,Ot;if((tt=P)!=null&&tt.callback&&((Ot=P)!=null&&Ot.callback(s,c,P)))return!0}}return!1}getShortcutNamesByKeyCode(s){return this.keyMap.get(s)||[]}getKeyCodesByShortcutName(s){const c=[];for(const[f,_]of this.keyMap)-1<_.indexOf(s)&&c.push(f);return c}serializeKeyEvent_(s){let c="";for(const f in Yn.modifierKeys)s.getModifierState(f)&&(c!==""&&(c+="+"),c+=f);return c!==""&&s.keyCode?c=c+"+"+s.keyCode:s.keyCode&&(c=s.keyCode.toString()),c}checkModifiers_(s){for(let c=0,f;f=s[c];c++)if(!(f in Yn.modifierKeys))throw Error(f+" is not a valid modifier key.")}createSerializedKey(s,c){let f="";if(c){this.checkModifiers_(c);for(const _ in Yn.modifierKeys)-1<c.indexOf(Yn.modifierKeys[_])&&(f!==""&&(f+="+"),f+=_)}return f!==""&&s?f=f+"+"+s:s&&(f=s.toString()),f}};Yn.registry=new Yn,function(s){s=s.modifierKeys||(s.modifierKeys={}),s[s.Shift=16]="Shift",s[s.Control=17]="Control",s[s.Alt=18]="Alt",s[s.Meta=91]="Meta"}(Yn||(Yn={}));var Zc;(function(s){s.ESCAPE="escape",s.DELETE="delete",s.COPY="copy",s.CUT="cut",s.PASTE="paste",s.UNDO="undo",s.REDO="redo"})(Zc||(Zc={})),yp();var qc={};qc.names=Zc,qc.registerCopy=vv,qc.registerCut=yv,qc.registerDefaultShortcuts=yp,qc.registerDelete=Ov,qc.registerEscape=U1,qc.registerPaste=bv,qc.registerRedo=vp,qc.registerUndo=Op;var CI=class extends Xl{constructor(s,c){super(c),this.type=zv,this.themeName=s}toJson(){const s=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return s.themeName=this.themeName,s}fromJson(s){i("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.themeName=s.themeName}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new CI),c.themeName=s.themeName,c}};Bt(ct.EVENT,zv,CI);var AI=class extends Xl{constructor(s,c,f,_,x){super(_),this.type=kp,this.viewTop=s,this.viewLeft=c,this.scale=f,this.oldScale=x}toJson(){const s=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return s.viewTop=this.viewTop,s.viewLeft=this.viewLeft,s.scale=this.scale,s.oldScale=this.oldScale,s}fromJson(s){i("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.viewTop=s.viewTop,this.viewLeft=s.viewLeft,this.scale=s.scale,this.oldScale=s.oldScale}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new AI),c.viewTop=s.viewTop,c.viewLeft=s.viewLeft,c.scale=s.scale,c.oldScale=s.oldScale,c}};Bt(ct.EVENT,kp,AI);var w_=class{constructor(s){this.connectionChecker=s,this.connections_=[]}addConnection(s,c){c=this.calculateIndexForYPos_(c),this.connections_.splice(c,0,s)}findIndexOfConnection_(s,c){if(!this.connections_.length)return-1;const f=this.calculateIndexForYPos_(c);if(f>=this.connections_.length)return-1;c=s.y;let _=f;for(;0<=_&&this.connections_[_].y===c;){if(this.connections_[_]===s)return _;_--}for(_=f;_<this.connections_.length&&this.connections_[_].y===c;){if(this.connections_[_]===s)return _;_++}return-1}calculateIndexForYPos_(s){if(!this.connections_.length)return 0;let c=0,f=this.connections_.length;for(;c<f;){const _=Math.floor((c+f)/2);if(this.connections_[_].y<s)c=_+1;else if(this.connections_[_].y>s)f=_;else{c=_;break}}return c}removeConnection(s,c){if(s=this.findIndexOfConnection_(s,c),s===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(s,1)}getNeighbours(s,c){function f(Ot){const Mn=x-_[Ot].x,Ti=P-_[Ot].y;return Math.sqrt(Mn*Mn+Ti*Ti)<=c&&tt.push(_[Ot]),Ti<c}const _=this.connections_,x=s.x,P=s.y;s=0;let J=_.length-2,be=J;for(;s<be;)_[be].y<P?s=be:J=be,be=Math.floor((s+J)/2);const tt=[];if(J=s=be,_.length){for(;0<=s&&f(s);)s--;do J++;while(J<_.length&&f(J))}return tt}isInYRange_(s,c,f){return Math.abs(this.connections_[s].y-c)<=f}searchForClosest(s,c,f){if(!this.connections_.length)return{connection:null,radius:c};const _=s.y,x=s.x;s.x=x+f.x,s.y=_+f.y;var P=this.calculateIndexForYPos_(s.y);f=null;let J=c,be,tt=P-1;for(;0<=tt&&this.isInYRange_(tt,s.y,c);)be=this.connections_[tt],this.connectionChecker.canConnect(s,be,!0,J)&&(f=be,J=be.distanceFrom(s)),tt--;for(;P<this.connections_.length&&this.isInYRange_(P,s.y,c);)be=this.connections_[P],this.connectionChecker.canConnect(s,be,!0,J)&&(f=be,J=be.distanceFrom(s)),P++;return s.x=x,s.y=_,{connection:f,radius:J}}static init(s){const c=[];return c[xt.INPUT_VALUE]=new w_(s),c[xt.OUTPUT_VALUE]=new w_(s),c[xt.NEXT_STATEMENT]=new w_(s),c[xt.PREVIOUS_STATEMENT]=new w_(s),c}},kI=class{constructor(s,c){this.pattern=s;let f;this.spacing=(f=c.spacing)!=null?f:0;let _;this.length=(_=c.length)!=null?_:1,this.line2=(this.line1=s.firstChild)&&this.line1.nextSibling;let x;this.snapToGrid=(x=c.snap)!=null?x:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(s){var c=this.spacing*s||100;this.pattern.setAttribute("width",c.toString()),this.pattern.setAttribute("height",c.toString()),c=Math.floor(this.spacing/2)+.5;let f=c-this.length/2,_=c+this.length/2;c*=s,f*=s,_*=s,this.setLineAttributes(this.line1,s,f,_,c,c),this.setLineAttributes(this.line2,s,c,c,f,_)}setLineAttributes(s,c,f,_,x,P){s&&(s.setAttribute("stroke-width",c.toString()),s.setAttribute("x1",f.toString()),s.setAttribute("y1",x.toString()),s.setAttribute("x2",_.toString()),s.setAttribute("y2",P.toString()))}moveTo(s,c){this.pattern.setAttribute("x",s.toString()),this.pattern.setAttribute("y",c.toString())}static createDom(s,c,f){s=L(Re.PATTERN,{id:"blocklyGridPattern"+s,patternUnits:"userSpaceOnUse"},f);let _,x;if(0<((_=c.length)!=null?_:1)&&0<((x=c.spacing)!=null?x:0)){L(Re.LINE,{stroke:c.colour},s);let P;(P=c.length)!=null&&P&&L(Re.LINE,{stroke:c.colour},s)}else L(Re.LINE,{},s);return s}},dl=class{constructor(s,c){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=c||"",this.reservedWords=new Set(s?s.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(s){this.variableMap_=s}getNameForUserVariable_(s){return this.variableMap_?(s=this.variableMap_.getVariableById(s))?s.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(s){s=hd(s);for(let c=0;c<s.length;c++)this.getName(s[c].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(s){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(s,c){let f=s;c===t.NameType$$module$build$src$core$names.VARIABLE&&(s=this.getNameForUserVariable_(s))&&(f=s),s=f.toLowerCase();const _=c===t.NameType$$module$build$src$core$names.VARIABLE||c===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(c)||this.db.set(c,new Map);const x=this.db.get(c);return x.has(s)?_+x.get(s):(c=this.getDistinctName(f,c),x.set(s,c.substr(_.length)),c)}getUserNames(s){let c;return(s=(c=this.db.get(s))==null?void 0:c.keys())?Array.from(s):[]}getDistinctName(s,c){s=this.safeName_(s);let f="";for(;this.dbReverse.has(s+f)||this.reservedWords.has(s+f);)f=f?f+1:2;return s+=f,this.dbReverse.add(s),(c===t.NameType$$module$build$src$core$names.VARIABLE||c===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+s}safeName_(s){return s?(s=encodeURI(s.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(s[0])!==-1&&(s="my_"+s)):s=Kt.UNNAMED_KEY||"unnamed",s}static equals(s,c){return s.toLowerCase()===c.toLowerCase()}};(function(s){s=s.NameType||(s.NameType={}),s.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",s.VARIABLE="VARIABLE",s.PROCEDURE="PROCEDURE"})(dl||(dl={})),t.NameType$$module$build$src$core$names=dl.NameType,dl.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.module$build$src$core$names={},t.module$build$src$core$names.NameType=t.NameType$$module$build$src$core$names,t.module$build$src$core$names.Names=dl;var eG=class extends Map{constructor(s){super(),this.workspace=s}set(s,c){return this.get(s)===c?this:(super.set(s,c),at(new(lt(ew))(this.workspace,c)),Gl(c)&&c.startPublishing(),this)}delete(s){const c=this.get(s);return s=super.delete(s),s&&(Xo(this.workspace),at(new(lt(Vv))(this.workspace,c)),Gl(c)&&c.stopPublishing(),s)}clear(){if(this.size){for(const s of this.keys()){const c=this.get(s);super.delete(s),at(new(lt(Vv))(this.workspace,c))}Xo(this.workspace)}}add(s){return this.set(s.getId(),s)}getProcedures(){return[...this.values()]}},py=class{constructor(s,c,f){this.workspace=s,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=f??Jt(),this.name=c}setName(s){if(s===this.name)return this;const c=this.name;return this.name=s,Xo(this.workspace),this.shouldFireEvents&&at(new(lt(tw))(this.workspace,this,c)),this}insertParameter(s,c){return this.parameters[c]&&this.parameters[c].getId()===s.getId()?this:(this.parameters.splice(c,0,s),s.setProcedureModel(this),Gl(s)&&(this.shouldFireEvents?s.startPublishing():s.stopPublishing()),Xo(this.workspace),this.shouldFireEvents&&at(new(lt(rw))(this.workspace,this,s,c)),this)}deleteParameter(s){if(!this.parameters[s])return this;const c=this.parameters[s];return this.parameters.splice(s,1),Xo(this.workspace),Gl(c)&&c.stopPublishing(),this.shouldFireEvents&&at(new(lt(sw))(this.workspace,this,c,s)),this}setReturnTypes(s){if(s&&s.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!s==!!this.returnTypes)return this;const c=this.returnTypes;return this.returnTypes=s,Xo(this.workspace),this.shouldFireEvents&&at(new(lt(iw))(this.workspace,this,c)),this}setEnabled(s){return s===this.enabled?this:(this.enabled=s,Xo(this.workspace),this.shouldFireEvents&&at(new(lt(nw))(this.workspace,this)),this)}getId(){return this.id}getName(){return this.name}getParameter(s){return this.parameters[s]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const s of this.parameters)Gl(s)&&s.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const s of this.parameters)Gl(s)&&s.stopPublishing()}},E_=class{constructor(s,c,f){this.workspace=s,this.shouldFireEvents=!1,this.procedureModel=null,this.id=f??Jt();let _;this.variable=(_=this.workspace.getVariable(c))!=null?_:s.createVariable(c)}setName(s){if(s===this.variable.name)return this;const c=this.variable.name;let f;return this.variable=(f=this.workspace.getVariable(s))!=null?f:this.workspace.createVariable(s),Xo(this.workspace),this.shouldFireEvents&&at(new(lt(ow))(this.workspace,this.procedureModel,this,c)),this}setTypes(s){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(s){return this.procedureModel=s,this}},Tw,II;Tw="PROCEDURE",II="x",t.module$build$src$core$procedures={},t.module$build$src$core$procedures.CATEGORY_NAME=Tw,t.module$build$src$core$procedures.DEFAULT_ARG=II,t.module$build$src$core$procedures.ObservableParameterModel=E_,t.module$build$src$core$procedures.ObservableProcedureMap=eG,t.module$build$src$core$procedures.ObservableProcedureModel=py,t.module$build$src$core$procedures.allProcedures=bp,t.module$build$src$core$procedures.findLegalName=Xg,t.module$build$src$core$procedures.flyoutCategory=Ed,t.module$build$src$core$procedures.getCallers=Hi,t.module$build$src$core$procedures.getDefinition=Qr,t.module$build$src$core$procedures.isNameUsed=jg,t.module$build$src$core$procedures.mutateCallers=ar,t.module$build$src$core$procedures.mutatorOpenListener=Li,t.module$build$src$core$procedures.rename=xk;var Zne=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(s){return Object.prototype.hasOwnProperty.call(this,s)||(this[s]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[s]}isField(s){return s.type&this.FIELD}isHat(s){return s.type&this.HAT}isIcon(s){return s.type&this.ICON}isSpacer(s){return s.type&this.SPACER}isInRowSpacer(s){return s.type&this.IN_ROW_SPACER}isInput(s){return s.type&this.INPUT}isExternalInput(s){return s.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(s){return s.type&this.INLINE_INPUT}isStatementInput(s){return s.type&this.STATEMENT_INPUT}isPreviousConnection(s){return s.type&this.PREVIOUS_CONNECTION}isNextConnection(s){return s.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(s){return s.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(s){return s.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(s){return s.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(s){return s.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(s){return s.type&this.RIGHT_SQUARE_CORNER}isCorner(s){return s.type&this.CORNER}isJaggedEdge(s){return s.type&this.JAGGED_EDGE}isRow(s){return s.type&this.ROW}isBetweenRowSpacer(s){return s.type&this.BETWEEN_ROW_SPACER}isTopRow(s){return s.type&this.TOP_ROW}isBottomRow(s){return s.type&this.BOTTOM_ROW}isTopOrBottomRow(s){return s.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(s){return s.type&this.INPUT_ROW}},ke=new Zne,Jc=class{constructor(s){this.centerline=this.xPos=this.height=this.width=0,this.constants_=s,this.type=ke.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},my=class{constructor(s){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=s,this.type=ke.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let s=this.elements.length-1;0<=s;s--){const c=this.elements[s];if(ke.isInput(c))return c}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let s=0;s<this.elements.length;s++){const c=this.elements[s];if(ke.isSpacer(c))return c}return null}getLastSpacer(){for(let s=this.elements.length-1;0<=s;s--){const c=this.elements[s];if(ke.isSpacer(c))return c}return null}},RI=class extends my{constructor(s){super(s),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ke.BOTTOM_ROW}hasLeftSquareCorner(s){return!!s.outputConnection||!!s.getNextBlock()}hasRightSquareCorner(s){return!0}measure(){let s=0,c=0,f=0;for(let _=0;_<this.elements.length;_++){const x=this.elements[_];c+=x.width,ke.isSpacer(x)||(ke.isNextConnection(x)?f=Math.max(f,x.height):s=Math.max(s,x.height))}this.width=Math.max(this.minWidth,c),this.height=Math.max(this.minHeight,s)+f,this.descenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Bp=class extends Jc{constructor(s,c){super(s),this.connectionModel=c,this.shape=this.constants_.shapeFor(c),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=ke.CONNECTION}},_h=class extends Bp{constructor(s,c){super(s,c.connection),this.input=c,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ke.INPUT,this.align=c.align,(this.connectedBlock=c.connection&&c.connection.targetBlock()?c.connection.targetBlock():null)?(s=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=s.width,this.connectedBlockHeight=s.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},ww=class extends _h{constructor(s,c){super(s,c),this.height=0,this.type|=ke.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Fp=class extends Jc{constructor(s,c,f){super(s),this.field=c,this.parentInput=f,this.isEditable=c.EDITABLE,this.flipRtl=c.getFlipRtl(),this.type|=ke.FIELD,s=this.field.getSize(),this.height=s.height,this.width=s.width}},MI=class extends Jc{constructor(s){super(s),this.type|=ke.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},tG=class extends Jc{constructor(s,c){super(s),this.icon=c,this.flipRtl=!1,this.isVisible=c.isVisible(),this.type|=ke.ICON,s=c.getCorrectedSize(),this.height=s.height,this.width=s.width}},xa=class extends Jc{constructor(s,c){super(s),this.type=this.type|ke.SPACER|ke.IN_ROW_SPACER,this.width=c,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},PI=class extends _h{constructor(s,c){super(s,c),this.type|=ke.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},gy=class extends _h{constructor(s,c){super(s,c),this.type|=ke.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},DI=class extends my{constructor(s){super(s),this.connectedBlockWidths=0,this.type|=ke.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let s=0;for(let c=0;c<this.elements.length;c++){const f=this.elements[c];this.width+=f.width,ke.isInput(f)&&f instanceof _h&&(ke.isStatementInput(f)&&f instanceof gy?s+=f.connectedBlockWidth:ke.isExternalInput(f)&&f instanceof ww&&f.connectedBlockWidth!==0&&(s+=f.connectedBlockWidth-f.connectionWidth)),ke.isSpacer(f)||(this.height=Math.max(this.height,f.height))}this.connectedBlockWidths=s,this.widthWithConnectedBlocks=this.width+s}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},nG=class extends Jc{constructor(s){super(s),this.type|=ke.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},iG=class extends Bp{constructor(s,c){super(s,c),this.type|=ke.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},rG=class extends Bp{constructor(s,c){super(s,c),this.connectionOffsetX=0,this.type|=ke.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},sG=class extends Bp{constructor(s,c){super(s,c),this.type|=ke.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},_y=class extends Jc{constructor(s,c){super(s),this.type=(c&&c!=="left"?ke.RIGHT_ROUND_CORNER:ke.LEFT_ROUND_CORNER)|ke.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},LI=class extends my{constructor(s,c,f){super(s),this.height=c,this.width=f,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ke.SPACER|ke.BETWEEN_ROW_SPACER,this.elements=[new xa(this.constants_,f)]}measure(){}},Oy=class extends Jc{constructor(s,c){super(s),this.type=(c&&c!=="left"?ke.RIGHT_SQUARE_CORNER:ke.LEFT_SQUARE_CORNER)|ke.CORNER,this.width=this.height=this.constants_.NO_PADDING}},NI=class extends my{constructor(s){super(s),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ke.TOP_ROW}hasLeftSquareCorner(s){const c=(s.hat?s.hat==="cap":this.constants_.ADD_START_HATS)&&!s.outputConnection&&!s.previousConnection,f=s.getPreviousBlock();return!!s.outputConnection||c||(f?f.getNextBlock()===s:!1)}hasRightSquareCorner(s){return!0}measure(){let s=0,c=0,f=0;for(let _=0;_<this.elements.length;_++){const x=this.elements[_];c+=x.width,ke.isSpacer(x)||(ke.isHat(x)&&x instanceof MI?f=Math.max(f,x.ascenderHeight):s=Math.max(s,x.height))}this.width=Math.max(this.minWidth,c),this.height=Math.max(this.minHeight,s)+f,this.capline=this.ascenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},vy=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=oi(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(s){this.blockStyles=Object.create(null);const c=s.blockStyles;for(const f in c)this.blockStyles[f]=this.validatedBlockStyle_(c[f]);this.setDynamicProperties_(s)}setDynamicProperties_(s){this.setFontConstants_(s),this.setComponentConstants_(s),this.ADD_START_HATS=s.startHats!==void 0?s.startHats:this.ADD_START_HATS}setFontConstants_(s){s.fontStyle&&s.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=s.fontStyle.family),s.fontStyle&&s.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=s.fontStyle.weight),s.fontStyle&&s.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=s.fontStyle.size),s=Oe("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=s.height,this.FIELD_TEXT_BASELINE=s.baseline}setComponentConstants_(s){this.CURSOR_COLOUR=s.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=s.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=s.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(s.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(s){const c="auto_"+s;return this.blockStyles[c]||(this.blockStyles[c]=this.createBlockStyle_(s)),{style:this.blockStyles[c],name:c}}getBlockStyle(s){return this.blockStyles[s||""]||(s&&s.indexOf("auto_")===0?this.getBlockStyleForColour(s.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(s){return this.validatedBlockStyle_({colourPrimary:s})}validatedBlockStyle_(s){const c={};return s&&Object.assign(c,s),s=ba(c.colourPrimary||"#000"),c.colourPrimary=s.hex,c.colourSecondary=c.colourSecondary?ba(c.colourSecondary).hex:this.generateSecondaryColour_(c.colourPrimary),c.colourTertiary=c.colourTertiary?ba(c.colourTertiary).hex:this.generateTertiaryColour_(c.colourPrimary),c.hat=c.hat||"",c}generateSecondaryColour_(s){return ya("#fff",s,.6)||s}generateTertiaryColour_(s){return ya("#fff",s,.3)||s}dispose(){this.embossFilter_&&ye(this.embossFilter_),this.disabledPattern_&&ye(this.disabledPattern_),this.debugFilter_&&ye(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const s=this.JAGGED_TEETH_HEIGHT,c=this.JAGGED_TEETH_WIDTH,f=bd([Ft(c,s/4),Ft(2*-c,s/2),Ft(c,s/4)]);return{height:s,width:c,path:f}}makeStartHat(){const s=this.START_HAT_HEIGHT,c=this.START_HAT_WIDTH,f=yo("c",[Ft(30,-s),Ft(70,-s),Ft(c,0)]);return{height:s,width:c,path:f}}makePuzzleTab(){function s(P){P=P?-1:1;const J=-P;var be=f/2;const tt=be+2.5,Ot=be+.5,Mn=Ft(-c,P*be);return be=Ft(c,P*be),yo("c",[Ft(0,P*tt),Ft(-c,J*Ot),Mn])+yo("s",[Ft(c,2.5*J),be])}const c=this.TAB_WIDTH,f=this.TAB_HEIGHT,_=s(!0),x=s(!1);return{type:this.SHAPES.PUZZLE,width:c,height:f,pathDown:x,pathUp:_}}makeNotch(){function s(J){return bd([Ft(J*_,f),Ft(3*J,0),Ft(J*_,-f)])}const c=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,_=(c-3)/2,x=s(1),P=s(-1);return{type:this.SHAPES.NOTCH,width:c,height:f,pathLeft:x,pathRight:P}}makeInsideCorners(){const s=this.CORNER_RADIUS,c=Vi("a","0 0,0",s,Ft(-s,s)),f=Vi("a","0 0,0",s,Ft(s,s));return{width:s,height:s,pathTop:c,pathBottom:f}}makeOutsideCorners(){const s=this.CORNER_RADIUS,c=oi(0,s)+Vi("a","0 0,1",s,Ft(s,-s)),f=Vi("a","0 0,1",s,Ft(s,s)),_=Vi("a","0 0,1",s,Ft(-s,-s)),x=Vi("a","0 0,1",s,Ft(-s,s));return{topLeft:c,topRight:f,bottomRight:x,bottomLeft:_,rightHeight:s}}shapeFor(s){switch(s.type){case xt.INPUT_VALUE:case xt.OUTPUT_VALUE:return this.PUZZLE_TAB;case xt.PREVIOUS_STATEMENT:case xt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(s,c,f){this.injectCSS_(c,f),this.defs_=L(Re.DEFS,{},s),s=L(Re.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),L(Re.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},s),c=L(Re.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},s),L(Re.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},c),L(Re.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},s),L(Re.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},s),this.embossFilterId=s.id,this.embossFilter_=s,s=L(Re.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),L(Re.RECT,{width:10,height:10,fill:"#aaa"},s),L(Re.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},s),this.disabledPatternId=s.id,this.disabledPattern_=s,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const s=L(Re.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),c=L(Re.FECOMPONENTTRANSFER,{result:"outBlur"},s);L(Re.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},c),L(Re.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},s),L(Re.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},s),this.debugFilterId=s.id,this.debugFilter_=s}}injectCSS_(s,c){c=this.getCSS_(c),s="blockly-renderer-style-"+s,this.cssNode_=document.getElementById(s);const f=c.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=f:(c=document.createElement("style"),c.id=s,s=document.createTextNode(f),c.appendChild(s),document.head.insertBefore(c,document.head.firstChild),this.cssNode_=c)}getCSS_(s){return[`${s} .blocklyText, `,`${s} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${s} .blocklyText {`,"fill: #fff;","}",`${s} .blocklyNonEditableText>rect,`,`${s} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${s} .blocklyNonEditableText>text,`,`${s} .blocklyEditableText>text {`,"fill: #000;","}",`${s} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${s} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${s} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${s} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${s} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${s} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${s} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${s} .blocklyReplaceable .blocklyPathLight,`,`${s} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${s} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},oG=!1,$a=class{constructor(s){this.constants=s,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let s=0;s<this.debugElements_.length;s++)ye(this.debugElements_[s]);this.debugElements_=[]}drawSpacerRow(s,c,f){if($a.config.rowSpacers){var _=Math.abs(s.height),x=0>s.height;x&&(c-=_),this.debugElements_.push(L(Re.RECT,{class:"rowSpacerRect blockRenderDebug",x:f?-(s.xPos+s.width):s.xPos,y:c,width:s.width,height:_,stroke:x?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(s,c,f){if($a.config.elemSpacers){c=Math.abs(s.width);var _=0>s.width,x=_?s.xPos-c:s.xPos;f&&(x=-(x+c)),this.debugElements_.push(L(Re.RECT,{class:"elemSpacerRect blockRenderDebug",x,y:s.centerline-s.height/2,width:c,height:s.height,stroke:"pink",fill:_?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(s,c){if($a.config.elems){let f=s.xPos;c&&(f=-(f+s.width)),c=s.centerline-s.height/2,this.debugElements_.push(L(Re.RECT,{class:"rowRenderingRect blockRenderDebug",x:f,y:c,width:s.width,height:s.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),ke.isField(s)&&s instanceof Fp&&s.field instanceof t.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(L(Re.RECT,{class:"rowRenderingRect blockRenderDebug",x:f,y:c+this.constants.FIELD_TEXT_BASELINE,width:s.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}ke.isInput(s)&&s instanceof _h&&$a.config.connections&&this.drawConnection(s.connectionModel)}drawConnection(s){if($a.config.connections){var c="",f=0,_="";s.type===xt.INPUT_VALUE?(f=4,c="magenta",_="none"):s.type===xt.OUTPUT_VALUE?(f=2,_=c="magenta"):s.type===xt.NEXT_STATEMENT?(f=4,c="goldenrod",_="none"):s.type===xt.PREVIOUS_STATEMENT&&(f=2,_=c="goldenrod"),this.debugElements_.push(L(Re.CIRCLE,{class:"blockRenderDebug",cx:s.getOffsetInBlock().x,cy:s.getOffsetInBlock().y,r:f,fill:_,stroke:c},this.svgRoot_))}}drawRenderedRow(s,c,f){$a.config.rows&&(this.debugElements_.push(L(Re.RECT,{class:"elemRenderingRect blockRenderDebug",x:f?-(s.xPos+s.width):s.xPos,y:s.yPos,width:s.width,height:s.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),ke.isTopOrBottomRow(s)||$a.config.connectedBlockBounds&&this.debugElements_.push(L(Re.RECT,{class:"connectedBlockWidth blockRenderDebug",x:f?-(s.xPos+s.widthWithConnectedBlocks):s.xPos,y:s.yPos,width:s.widthWithConnectedBlocks,height:s.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(s,c,f){for(let _=0;_<s.elements.length;_++){const x=s.elements[_];x?ke.isSpacer(x)?this.drawSpacerElem(x,s.height,f):this.drawRenderedElem(x,f):console.warn("A row has an undefined or null element.",s,x)}this.drawRenderedRow(s,c,f)}drawBoundingBox(s){if($a.config.blockBounds){var c=s.RTL?-s.width:0;this.debugElements_.push(L(Re.RECT,{class:"blockBoundingBox blockRenderDebug",x:c,y:0,width:s.width,height:s.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),$a.config.connectedBlockBounds&&(c=s.RTL?-s.widthWithChildren:0,this.debugElements_.push(L(Re.RECT,{class:"blockRenderDebug",x:c,y:0,width:s.widthWithChildren,height:s.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(s,c){this.clearElems(),this.svgRoot_=s.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let f=0;for(let _=0;_<c.rows.length;_++){const x=c.rows[_];ke.isBetweenRowSpacer(x)?this.drawSpacerRow(x,f,c.RTL):this.drawRowWithElements(x,f,c.RTL),f+=x.height}s.previousConnection&&this.drawConnection(s.previousConnection),s.nextConnection&&this.drawConnection(s.nextConnection),s.outputConnection&&this.drawConnection(s.outputConnection),c.rightSide&&this.drawRenderedElem(c.rightSide,c.RTL),this.drawBoundingBox(c),this.drawRender(s.pathObject.svgPath)}drawRender(s){$a.config.render&&(s.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){s.setAttribute("filter","")},100))}};$a.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var yy=class{constructor(s,c){this.inlinePath_=this.outlinePath_="",this.block_=s,this.info_=c,this.topLeft_=s.getRelativeToSurfaceXY(),this.constants_=c.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Wl()){let s;(s=this.block_.renderingDebugger)==null||s.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let s=0,c;c=this.info_.hiddenIcons[s];s++){let f;(f=c.icon.iconGroup_)==null||f.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let s=1;s<this.info_.rows.length-1;s++){const c=this.info_.rows[s];c.hasJaggedEdge?this.drawJaggedEdge_(c):c.hasStatement?this.drawStatementInput_(c):c.hasExternalInput?this.drawValueInput_(c):this.drawRightSideRow_(c)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const s=this.info_.topRow,c=s.elements;this.positionPreviousConnection_(),this.outlinePath_+=oi(s.xPos,this.info_.startY);for(let f=0,_;_=c[f];f++)ke.isLeftRoundedCorner(_)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ke.isRightRoundedCorner(_)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ke.isPreviousConnection(_)&&_ instanceof Bp?this.outlinePath_+=_.shape.pathLeft:ke.isHat(_)?this.outlinePath_+=this.constants_.START_HAT.path:ke.isSpacer(_)&&(this.outlinePath_+=Tt("h",_.width));this.outlinePath_+=Tt("v",s.height)}drawJaggedEdge_(s){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Tt("v",s.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(s){const c=s.getLastInput();this.positionExternalValueConnection_(s);const f=Js(c.shape)?c.shape.pathDown(c.height):c.shape.pathDown;this.outlinePath_+=Tt("H",c.xPos+c.width)+f+Tt("v",s.height-c.connectionHeight)}drawStatementInput_(s){var c=s.getLastInput();if(c){var f=c.xPos+c.notchOffset+c.shape.width;c=c.shape.pathRight+Tt("h",-(c.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var _=s.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Tt("H",f)+c+Tt("v",_)+this.constants_.INSIDE_CORNERS.pathBottom+Tt("H",s.xPos+s.width),this.positionStatementInputConnection_(s)}}drawRightSideRow_(s){this.outlinePath_+=Tt("V",s.yPos+s.height)}drawBottom_(){const s=this.info_.bottomRow,c=s.elements;this.positionNextConnection_();let f=0,_="";for(let x=c.length-1,P;P=c[x];x--)ke.isNextConnection(P)&&P instanceof Bp?_+=P.shape.pathRight:ke.isLeftSquareCorner(P)?_+=Tt("H",s.xPos):ke.isLeftRoundedCorner(P)?_+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ke.isRightRoundedCorner(P)?(_+=this.constants_.OUTSIDE_CORNERS.bottomRight,f=this.constants_.OUTSIDE_CORNERS.rightHeight):ke.isSpacer(P)&&(_+=Tt("h",-1*P.width));this.outlinePath_+=Tt("V",s.baseline-f),this.outlinePath_+=_}drawLeft_(){var s=this.info_.outputConnection;if(this.positionOutputConnection_(),s){const c=s.connectionOffsetY+s.height;s=Js(s.shape)?s.shape.pathUp(s.height):s.shape.pathUp,this.outlinePath_+=Tt("V",c)+s}this.outlinePath_+="z"}drawInternals_(){for(let s=0,c;c=this.info_.rows[s];s++)for(let f=0,_;_=c.elements[f];f++)ke.isInlineInput(_)?this.drawInlineInput_(_):(ke.isIcon(_)||ke.isField(_))&&this.layoutField_(_)}layoutField_(s){const c=ke.isField(s)?s.field.getSvgRoot():s.icon.iconGroup_,f=s.centerline-s.height/2;let _=s.xPos,x="";this.info_.RTL&&(_=-(_+s.width),s.flipRtl&&(_+=s.width,x="scale(-1 1)")),ke.isIcon(s)?(c.setAttribute("display","block"),c.setAttribute("transform","translate("+_+","+f+")"),s.icon.computeIconLocation()):c.setAttribute("transform","translate("+_+","+f+")"+x),this.info_.isInsertionMarker&&c.setAttribute("display","none")}drawInlineInput_(s){const c=s.width,f=s.height,_=s.connectionOffsetY,x=s.connectionHeight+_;this.inlinePath_+=zr(s.xPos+s.connectionWidth,s.centerline-f/2)+Tt("v",_)+s.shape.pathDown+Tt("v",f-x)+Tt("h",c-s.connectionWidth)+Tt("v",-f)+"z",this.positionInlineInputConnection_(s)}positionInlineInputConnection_(s){const c=s.centerline-s.height/2;if(s.connectionModel){let f=s.xPos+s.connectionWidth+s.connectionOffsetX;this.info_.RTL&&(f*=-1),s.connectionModel.setOffsetInBlock(f,c+s.connectionOffsetY)}}positionStatementInputConnection_(s){const c=s.getLastInput();if(c!=null&&c.connectionModel){let f=s.xPos+s.statementEdge+c.notchOffset;this.info_.RTL&&(f*=-1),c.connectionModel.setOffsetInBlock(f,s.yPos)}}positionExternalValueConnection_(s){const c=s.getLastInput();if(c&&c.connectionModel){let f=s.xPos+s.width;this.info_.RTL&&(f*=-1),c.connectionModel.setOffsetInBlock(f,s.yPos)}}positionPreviousConnection_(){const s=this.info_.topRow;if(s.connection){const c=s.xPos+s.notchOffset;s.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-c:c,0)}}positionNextConnection_(){const s=this.info_.bottomRow;if(s.connection){const c=s.connection,f=c.xPos;c.connectionModel.setOffsetInBlock(this.info_.RTL?-f:f,s.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const s=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-s:s,this.info_.outputConnection.connectionOffsetY)}}},x_=class{constructor(s,c){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=s,this.block_=c,this.constants_=this.renderer_.getConstants(),this.outputConnection=c.outputConnection?new rG(this.constants_,c.outputConnection):null,this.isInline=c.getInputsInline()&&!c.isCollapsed(),this.isCollapsed=c.isCollapsed(),this.isInsertionMarker=c.isInsertionMarker(),this.RTL=c.RTL,this.topRow=new NI(this.constants_),this.bottomRow=new RI(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let s=new DI(this.constants_);this.inputRows.push(s);var c=this.block_.getIcons();for(let f=0,_;_=c[f];f++){const x=new tG(this.constants_,_);this.isCollapsed&&_.collapseHidden?this.hiddenIcons.push(x):s.elements.push(x)}c=void 0;for(let f=0,_;_=this.block_.inputList[f];f++)if(_.isVisible()){this.shouldStartNewRow_(_,c)&&(this.rows.push(s),s=new DI(this.constants_),this.inputRows.push(s));for(let x=0,P;P=_.fieldRow[x];x++)s.elements.push(new Fp(this.constants_,P,_));this.addInput_(_,s),c=_}this.isCollapsed&&(s.hasJaggedEdge=!0,s.elements.push(new nG(this.constants_))),(s.elements.length||s.hasDummyInput)&&this.rows.push(s),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var s=!!this.block_.previousConnection;const c=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!s;let f=this.topRow.hasLeftSquareCorner(this.block_)?Oy:_y;this.topRow.elements.push(new f(this.constants_)),c?(s=new MI(this.constants_),this.topRow.elements.push(s),this.topRow.capline=s.ascenderHeight):s&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new sG(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===dn.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,f=this.topRow.hasRightSquareCorner(this.block_)?Oy:_y,this.topRow.elements.push(new f(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===dn.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Oy(this.constants_)):this.bottomRow.elements.push(new _y(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new iG(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Oy(this.constants_,"right")):this.bottomRow.elements.push(new _y(this.constants_,"right"))}addInput_(s,c){this.isInline&&s.type===dn.VALUE?(c.elements.push(new PI(this.constants_,s)),c.hasInlineInput=!0):s.type===dn.STATEMENT?(c.elements.push(new gy(this.constants_,s)),c.hasStatement=!0):s.type===dn.VALUE?(c.elements.push(new ww(this.constants_,s)),c.hasExternalInput=!0):s.type===dn.DUMMY&&(c.minHeight=Math.max(c.minHeight,s.getSourceBlock()&&s.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),c.hasDummyInput=!0),c.align===null&&(c.align=s.align)}shouldStartNewRow_(s,c){return c?s.type===dn.STATEMENT||c.type===dn.STATEMENT?!0:s.type===dn.VALUE||s.type===dn.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let s=0,c;c=this.rows[s];s++){const f=c.elements;if(c.elements=[],c.startsWithElemSpacer()&&c.elements.push(new xa(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let _=0;_<f.length-1;_++){c.elements.push(f[_]);const x=this.getInRowSpacing_(f[_],f[_+1]);c.elements.push(new xa(this.constants_,x))}c.elements.push(f[f.length-1]),c.endsWithElemSpacer()&&c.elements.push(new xa(this.constants_,this.getInRowSpacing_(f[f.length-1],null)))}}}getInRowSpacing_(s,c){if(!s&&c&&ke.isStatementInput(c))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(s&&ke.isInput(s)&&!c){if(ke.isExternalInput(s))return this.constants_.NO_PADDING;if(ke.isInlineInput(s))return this.constants_.LARGE_PADDING;if(ke.isStatementInput(s))return this.constants_.NO_PADDING}return s&&ke.isLeftSquareCorner(s)&&c&&(ke.isPreviousConnection(c)||ke.isNextConnection(c))?c.notchOffset:s&&ke.isLeftRoundedCorner(s)&&c&&(ke.isPreviousConnection(c)||ke.isNextConnection(c))?c.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let s=0,c=0,f=0;for(let x=0,P;P=this.rows[x];x++){if(P.measure(),c=Math.max(c,P.width),P.hasStatement){var _=P.getLastInput();let J,be;_=P.width-((be=(J=_)==null?void 0:J.width)!=null?be:0),s=Math.max(s,_)}f=Math.max(f,P.widthWithConnectedBlocks)}this.statementEdge=s,this.width=c;for(let x=0,P;P=this.rows[x];x++)P.hasStatement&&(P.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(c,f),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let c=0,f;f=this.rows[c];c++)if(f.hasStatement)this.alignStatementRow_(f);else{var s=f.width;s=this.getDesiredRowWidth_(f)-s,0<s&&this.addAlignmentPadding_(f,s),ke.isTopOrBottomRow(f)&&(f.widthWithConnectedBlocks=f.width)}}getDesiredRowWidth_(s){return this.width-this.startX}addAlignmentPadding_(s,c){const f=s.getFirstSpacer(),_=s.getLastSpacer();if((s.hasExternalInput||s.hasStatement)&&(s.widthWithConnectedBlocks+=c),s.align===t.Align$$module$build$src$core$input.LEFT&&_)_.width+=c;else if(s.align===t.Align$$module$build$src$core$input.CENTRE&&f&&_)f.width+=c/2,_.width+=c/2;else if(s.align===t.Align$$module$build$src$core$input.RIGHT&&f)f.width+=c;else if(_)_.width+=c;else return;s.width+=c}alignStatementRow_(s){const c=s.getLastInput();if(c){var f=s.width-c.width,_=this.statementEdge;f=_-f,0<f&&this.addAlignmentPadding_(s,f),f=s.width,_=this.getDesiredRowWidth_(s),c.width+=_-f,c.height=Math.max(c.height,s.height),s.width+=_-f,s.widthWithConnectedBlocks=Math.max(s.width,this.statementEdge+s.connectedBlockWidths)}}addRowSpacing_(){const s=this.rows;this.rows=[];for(let c=0;c<s.length;c++)this.rows.push(s[c]),c!==s.length-1&&this.rows.push(this.makeSpacerRow_(s[c],s[c+1]))}makeSpacerRow_(s,c){var f=this.getSpacerRowHeight_(s,c);const _=this.getSpacerRowWidth_(s,c);return f=new LI(this.constants_,f,_),s.hasStatement&&(f.followsStatement=!0),c.hasStatement&&(f.precedesStatement=!0),f}getSpacerRowWidth_(s,c){return this.width-this.startX}getSpacerRowHeight_(s,c){return this.constants_.MEDIUM_PADDING}getElemCenterline_(s,c){return ke.isSpacer(c)?s.yPos+c.height/2:ke.isBottomRow(s)?(s=s.yPos+s.height-s.descenderHeight,ke.isNextConnection(c)?s+c.height/2:s-c.height/2):ke.isTopRow(s)?ke.isHat(c)?s.capline-c.height/2:s.capline+c.height/2:s.yPos+s.height/2}recordElemPositions_(s){let c=s.xPos;for(let f=0,_;_=s.elements[f];f++)ke.isSpacer(_)&&(_.height=s.height),_.xPos=c,_.centerline=this.getElemCenterline_(s,_),c+=_.width}finalize_(){let s=0,c=0;for(let f=0,_;_=this.rows[f];f++)_.yPos=c,_.xPos=this.startX,c+=_.height,s=Math.max(s,_.widthWithConnectedBlocks),this.recordElemPositions_(_);if(this.outputConnection&&this.block_.nextConnection){const f=this.block_.nextConnection.targetBlock();f&&(s=Math.max(s,f.getHeightWidth().width))}this.widthWithChildren=s+this.startX,this.height=c,this.startY=this.topRow.capline,this.bottomRow.baseline=c-this.bottomRow.descenderHeight}},BI=class extends Xl{constructor(s,c,f,_){let x=s?s.workspace.id:void 0;_&&_.getType()===it.types.WORKSPACE&&(x=_.getLocation().id),super(x),this.type=Uv,this.blockId=s==null?void 0:s.id,this.oldNode=f||void 0,this.newNode=_,this.isCursor=c}toJson(){const s=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return s.isCursor=this.isCursor,s.blockId=this.blockId,s.oldNode=this.oldNode,s.newNode=this.newNode,s}fromJson(s){i("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.isCursor=s.isCursor,this.blockId=s.blockId,this.oldNode=s.oldNode,this.newNode=s.newNode}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new BI),c.isCursor=s.isCursor,c.blockId=s.blockId,c.oldNode=s.oldNode,c.newNode=s.newNode,c}};Bt(ct.EVENT,Uv,BI);var qne="blocklyCursor",Jne="blocklyMarker",Kne=.75,FI=class{constructor(s,c,f){this.workspace=s,this.marker=f,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=c,s=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=f.colour||s}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const s=this.isCursor()?qne:Jne;return this.svgGroup_=L(Re.G,{class:s}),this.createDomInternal_(),this.svgGroup_}setParent_(s){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),s.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),s.setMarkerSvg(this.getSvgRoot())),this.parent_=s}draw(s,c){if(c){this.constants_=this.workspace.getRenderer().getConstants();var f=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||f,this.applyColour_(c),this.showAtLocation_(c),this.fireMarkerEvent_(s,c),s=this.currentMarkerSvg.childNodes[0],s!==void 0&&s.beginElement&&s.beginElement()}else this.hide()}showAtLocation_(s){const c=s.getLocation().type;s.getType()===it.types.BLOCK?this.showWithBlock_(s):s.getType()===it.types.OUTPUT?this.showWithOutput_(s):c===xt.INPUT_VALUE?this.showWithInput_(s):c===xt.NEXT_STATEMENT?this.showWithNext_(s):s.getType()===it.types.PREVIOUS?this.showWithPrevious_(s):s.getType()===it.types.FIELD?this.showWithField_(s):s.getType()===it.types.WORKSPACE?this.showWithCoordinates_(s):s.getType()===it.types.STACK&&this.showWithStack_(s)}showWithBlockPrevOutput_(s){s=s.getSourceBlock();const c=s.width;var f=s.height,_=f*Kne;const x=this.constants_.CURSOR_BLOCK_PADDING;s.previousConnection?(f=this.constants_.shapeFor(s.previousConnection),this.positionPrevious_(c,x,_,f)):s.outputConnection?(_=this.constants_.shapeFor(s.outputConnection),this.positionOutput_(c,f,_)):this.positionBlock_(c,x,_),this.setParent_(s),this.showCurrent_()}showWithBlock_(s){this.showWithBlockPrevOutput_(s)}showWithPrevious_(s){this.showWithBlockPrevOutput_(s)}showWithOutput_(s){this.showWithBlockPrevOutput_(s)}showWithCoordinates_(s){var c=s.getWsCoordinate();s=c.x,c=c.y,this.workspace.RTL&&(s-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(s,c,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(s){s=s.getLocation();const c=s.getSize().width,f=s.getSize().height;this.positionRect_(0,0,c,f),this.setParent_(s),this.showCurrent_()}showWithInput_(s){s=s.getLocation();const c=s.getSourceBlock();this.positionInput_(s),this.setParent_(c),this.showCurrent_()}showWithNext_(s){var c=s.getLocation();s=c.getSourceBlock();let f=0;c=c.getOffsetInBlock().y;const _=s.getHeightWidth().width;this.workspace.RTL&&(f=-_),this.positionLine_(f,c,_),this.setParent_(s),this.showCurrent_()}showWithStack_(s){s=s.getLocation();var c=s.getHeightWidth();const f=c.width+this.constants_.CURSOR_STACK_PADDING;c=c.height+this.constants_.CURSOR_STACK_PADDING;const _=-this.constants_.CURSOR_STACK_PADDING/2,x=-this.constants_.CURSOR_STACK_PADDING/2;let P=_;this.workspace.RTL&&(P=-(f+_)),this.positionRect_(P,x,f,c),this.setParent_(s),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(s,c,f){if(s=oi(-c,f)+Tt("V",-c)+Tt("H",s+2*c)+Tt("V",f),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",s),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(s){const c=s.getOffsetInBlock().x,f=s.getOffsetInBlock().y;s=zr(0,0)+this.constants_.shapeFor(s).pathDown,this.markerInput_.setAttribute("d",s),this.markerInput_.setAttribute("transform","translate("+c+","+f+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(s,c,f){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${s}`),this.markerSvgLine_.setAttribute("y",`${c}`),this.markerSvgLine_.setAttribute("width",`${f}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(s,c,f){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");s=oi(s,0)+Tt("h",-(s-f.width))+Tt("v",this.constants_.TAB_OFFSET_FROM_TOP)+f.pathDown+Tt("V",c)+Tt("H",s),this.markerBlock_.setAttribute("d",s),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(s,c,f,_){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");s=oi(-c,f)+Tt("V",-c)+Tt("H",this.constants_.NOTCH_OFFSET_LEFT)+_.pathLeft+Tt("H",s+2*c)+Tt("V",f),this.markerBlock_.setAttribute("d",s),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(s,c,f,_){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${s}`),this.markerSvgRect_.setAttribute("y",`${c}`),this.markerSvgRect_.setAttribute("width",`${f}`),this.markerSvgRect_.setAttribute("height",`${_}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(s){s.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(s,c){const f=c.getSourceBlock();s=new(lt(Uv))(f,this.isCursor(),s,c),at(s)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=L(Re.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=L(Re.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=L(Re.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=L(Re.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=L(Re.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const s=this.getBlinkProperties_();L(Re.ANIMATE,s,this.markerSvgLine_),L(Re.ANIMATE,s,this.markerInput_),L(Re.ANIMATE,Object.assign({},s,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(s){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(s=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",s),this.markerInput_.firstElementChild.setAttribute("values",s),this.markerBlock_.firstElementChild.setAttribute("values",s))}dispose(){this.svgGroup_&&ye(this.svgGroup_)}},Ew=class{constructor(s,c,f){this.markerSvg=this.cursorSvg=null,this.constants=f,this.style=c,this.svgRoot=s,this.svgPath=L(Re.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(s){this.svgPath.setAttribute("d",s)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(s){s?(this.svgRoot.appendChild(s),this.cursorSvg=s):this.cursorSvg=null}setMarkerSvg(s){s?(this.cursorSvg?this.svgRoot.insertBefore(s,this.cursorSvg):this.svgRoot.appendChild(s),this.markerSvg=s):this.markerSvg=null}applyColour(s){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(s.isShadow()),this.updateDisabled_(!s.isEnabled()||s.getInheritedDisabled())}setStyle(s){this.style=s}setClass_(s,c){s&&(c?le(this.svgRoot,s):ie(this.svgRoot,s))}updateHighlighted(s){s?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(s){s&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(s){this.setClass_("blocklyDisabled",s),s&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(s){this.setClass_("blocklySelected",s)}updateDraggingDelete(s){this.setClass_("blocklyDraggingDelete",s)}updateInsertionMarker(s){this.setClass_("blocklyInsertionMarker",s)}updateMovable(s){this.setClass_("blocklyDraggable",s)}updateReplacementFade(s){this.setClass_("blocklyReplaceable",s)}updateShapeForInputHighlight(s,c){}},aG="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Ca=class{constructor(s){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,N(s),this.topBlock=s,this.workspace=s.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,cn();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{rt()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){cn(),this.hidePreview(),rt();var{local:s,closest:c}=this.activeCandidate;if(s.connect(c),this.topBlock.rendered){const f=s.isSuperior()?c:s;ll(f.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(s,c){const f=this.getCandidate(s);((this.wouldDeleteBlock=this.shouldDelete(!!f,c))||this.shouldUpdatePreviews(f,s))&&(cn(),this.maybeHidePreview(f),this.maybeShowPreview(f),rt())}createMarkerBlock(s){var c=s.type;cn();let f;try{if(f=this.workspace.newBlock(c),f.setInsertionMarker(!0),s.saveExtraState){var _=s.saveExtraState();_&&f.loadExtraState&&f.loadExtraState(_)}else if(s.mutationToDom){const x=s.mutationToDom();x&&f.domToMutation&&f.domToMutation(x)}for(c=0;c<s.inputList.length;c++){const x=s.inputList[c];if(x.name===sy)continue;const P=f.inputList[c];if(!P)throw Error(aG.replace("%1","an input"));for(_=0;_<x.fieldRow.length;_++){const J=x.fieldRow[_],be=P.fieldRow[_];if(!be)throw Error(aG.replace("%1","a field"));be.setValue(J.getValue())}}f.setCollapsed(s.isCollapsed()),f.setInputsInline(s.getInputsInline()),f.initSvg(),f.getSvgRoot().setAttribute("visibility","hidden")}finally{rt()}return f}initAvailableConnections(){const s=this.topBlock.getConnections_(!1),c=this.topBlock.lastConnectionInStack(!0);if(c&&c!==this.topBlock.nextConnection){if(s.push(c),this.lastOnStack=c,this.lastMarker){cn();try{this.lastMarker.dispose()}finally{rt()}}this.lastMarker=this.createMarkerBlock(c.getSourceBlock())}return s}shouldUpdatePreviews(s,c){if(!s)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:f,closest:_}=this.activeCandidate;if(_===s.closest&&f===s.local)return!1;const x=f.x+c.x-_.x;return c=f.y+c.y-_.y,s.radius<Math.sqrt(x*x+c*c)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(s){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let c=this.getStartRadius(),f=null;for(let _=0;_<this.availableConnections.length;_++){const x=this.availableConnections[_],P=x.closest(c,s);P.connection&&(f={closest:P.connection,local:x,radius:P.radius},c=P.radius)}return f}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(s,c){return c&&this.workspace.getComponentManager().hasCapability(c.id,ms.Capability.DELETE_AREA)?c.wouldDelete(this.topBlock,s):!1}maybeShowPreview(s){if(!this.wouldDeleteBlock&&s){var c=s.closest,f;c===((f=this.activeCandidate)==null?void 0:f.closest)||c.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=s,this.showPreview(this.activeCandidate))}}showPreview(s){const c=this.workspace.getRenderer();switch(c.getConnectionPreviewMethod(s.closest,s.local,this.topBlock)){case Ca.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(s);break;case Ca.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(s);break;case Ca.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(s)}c.shouldHighlightConnection(s.closest)&&s.closest.highlight()}maybeHidePreview(s){if(!s)this.hidePreview();else if(this.activeCandidate){const c=this.activeCandidate.local!==s.local;(this.activeCandidate.closest!==s.closest||c||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let s;const c=(s=this.activeCandidate)==null?void 0:s.closest;c&&c.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(c)&&c.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(s){const{local:c,closest:f}=s;let _=(s=this.lastOnStack&&c===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!_)throw Error("Cannot show the insertion marker because there is no insertion marker block");let x;try{x=_.getMatchingConnection(c.getSourceBlock(),c)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),_=s?this.lastMarker:this.firstMarker,!_)throw Error("Cannot show the insertion marker because there is no insertion marker block");x=_.getMatchingConnection(c.getSourceBlock(),c)}if(!x)throw Error("Cannot show the insertion marker because there is no associated connection");if(x===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");_.render(),_.rendered=!0,_.getSvgRoot().setAttribute("visibility","visible"),x&&f&&_.positionNearConnection(x,f),f&&x.connect(f),this.markerConnection=x}hideInsertionMarker(){if(this.markerConnection){var s=this.markerConnection,c=s.getSourceBlock(),f=c.previousConnection,_=c.outputConnection,x=s===c.nextConnection;if(_=s.type===xt.INPUT_VALUE&&!(_&&_.targetConnection),x&&(!f||!f.targetConnection)||_?s.targetBlock().unplug(!1):s.type!==xt.NEXT_STATEMENT||x?c.unplug(!0):((x=s.targetConnection)&&x.getSourceBlock().unplug(!1),f=f?f.targetConnection:null,c.unplug(!0),f&&x&&f.connect(x)),s.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(s=c.getSvgRoot())&&s.setAttribute("visibility","hidden")}}showInsertionInputOutline(s){s=s.closest,this.highlightedBlock=s.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(s,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(s){if(this.fadedBlock=s.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const s=[];return this.firstMarker&&s.push(this.firstMarker),this.lastMarker&&s.push(this.lastMarker),s}};(function(s){s=s.PREVIEW_TYPE||(s.PREVIEW_TYPE={}),s[s.INSERTION_MARKER=0]="INSERTION_MARKER",s[s.INPUT_OUTLINE=1]="INPUT_OUTLINE",s[s.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Ca||(Ca={})),Ca.PREVIEW_TYPE;var by=class{constructor(s){this.overrides=null,this.name=s}getClassName(){return this.name+"-renderer"}init(s,c){this.constants_=this.makeConstants_(),c&&(this.overrides=c,Object.assign(this.constants_,c)),this.constants_.setTheme(s),this.constants_.init()}createDom(s,c){this.constants_.createDom(s,this.name+"-"+c.name,"."+this.getClassName()+"."+c.getClassName())}refreshDom(s,c){const f=this.getConstants();f.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=f.randomIdentifier,this.constants_.setTheme(c),this.constants_.init(),this.createDom(s,c)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new vy}makeRenderInfo_(s){return new x_(this,s)}makeDrawer_(s,c){return new yy(s,c)}makeDebugger_(){return new $a(this.getConstants())}makeMarkerDrawer(s,c){return new FI(s,this.getConstants(),c)}makePathObject(s,c){return new Ew(s,c,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(s){return!0}orphanCanConnectAtEnd(s,c,f){return!!Vn.getConnectionForOrphanedConnection(s,f===xt.OUTPUT_VALUE?c.outputConnection:c.previousConnection)}getConnectionPreviewMethod(s,c,f){return c.type===xt.OUTPUT_VALUE||c.type===xt.PREVIOUS_STATEMENT?!s.isConnected()||this.orphanCanConnectAtEnd(f,s.targetBlock(),c.type)?Ca.PREVIEW_TYPE.INSERTION_MARKER:Ca.PREVIEW_TYPE.REPLACEMENT_FADE:Ca.PREVIEW_TYPE.INSERTION_MARKER}render(s){Wl()&&!s.renderingDebugger&&(s.renderingDebugger=this.makeDebugger_());const c=this.makeRenderInfo_(s);c.measure(),this.makeDrawer_(s,c).draw()}},Xn={};Xn.BottomRow=RI,Xn.Connection=Bp,Xn.ConstantProvider=vy,Xn.Debug=$a,Xn.Drawer=yy,Xn.ExternalValueInput=ww,Xn.Field=Fp,Xn.Hat=MI,Xn.Icon=tG,Xn.InRowSpacer=xa,Xn.InlineInput=PI,Xn.InputConnection=_h,Xn.InputRow=DI,Xn.JaggedEdge=nG,Xn.MarkerSvg=FI,Xn.Measurable=Jc,Xn.NextConnection=iG,Xn.OutputConnection=rG,Xn.PathObject=Ew,Xn.PreviousConnection=sG,Xn.RenderInfo=x_,Xn.Renderer=by,Xn.RoundCorner=_y,Xn.Row=my,Xn.SpacerRow=LI,Xn.SquareCorner=Oy,Xn.StatementInput=gy,Xn.TopRow=NI,Xn.Types=ke,Xn.init=qg,Xn.register=zl,Xn.stopDebugger=Zg,Xn.unregister=xd;var lG=class{constructor(s,c){this.workspace=s,this.theme=c,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(s){var c=this.theme;this.theme=s,(s=this.workspace.getInjectionDiv())&&(c&&(c=c.getClassName())&&ie(s,c),(c=this.theme.getClassName())&&le(s,c));for(let f=0,_;_=this.subscribedWorkspaces_[f];f++)_.refreshTheme();for(const[f,_]of this.componentDB)for(const x of _){s=x.element,c=x.propertyName;const P=this.theme&&this.theme.getComponentStyle(f);s.style[c]=P||""}for(const f of this.subscribedWorkspaces_)f.hideChaff()}subscribeWorkspace(s){this.subscribedWorkspaces_.push(s)}unsubscribeWorkspace(s){if(!Cs(this.subscribedWorkspaces_,s))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(s,c,f){this.componentDB.has(c)||this.componentDB.set(c,[]),this.componentDB.get(c).push({element:s,propertyName:f}),c=this.theme&&this.theme.getComponentStyle(c),s.style[f]=c||""}unsubscribe(s){if(s)for(const[c,f]of this.componentDB){for(let _=f.length-1;0<=_;_--)f[_].element===s&&f.splice(_,1);f.length||this.componentDB.delete(c)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},UI="VARIABLE_DYNAMIC",Bd={};Bd.CATEGORY_NAME=UI,Bd.flyoutCategory=Sp,Bd.flyoutCategoryBlocks=oh,Bd.onCreateVariableButtonClick_Colour=Jg,Bd.onCreateVariableButtonClick_Number=ks,Bd.onCreateVariableButtonClick_String=$d;var cG=class{canConnect(s,c,f,_){return this.canConnectWithReason(s,c,f,_)===Vn.CAN_CONNECT}canConnectWithReason(s,c,f,_){const x=this.doSafetyChecks(s,c);return x!==Vn.CAN_CONNECT?x:this.doTypeChecks(s,c)?f&&!this.doDragChecks(s,c,_||0)?Vn.REASON_DRAG_CHECKS_FAILED:Vn.CAN_CONNECT:Vn.REASON_CHECKS_FAILED}getErrorMessage(s,c,f){switch(s){case Vn.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Vn.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Vn.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Vn.REASON_TARGET_NULL:return"Target connection is null.";case Vn.REASON_CHECKS_FAILED:return"Connection checks failed. "+(c+" expected "+c.getCheck()+", found "+f.getCheck());case Vn.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Vn.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Vn.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(s,c){if(!s||!c)return Vn.REASON_TARGET_NULL;let f,_,x;return s.isSuperior()?(f=s.getSourceBlock(),_=c.getSourceBlock(),x=c):(_=s.getSourceBlock(),f=c.getSourceBlock(),x=s,s=c),f===_?Vn.REASON_SELF_CONNECTION:x.type!==Lp[s.type]?Vn.REASON_WRONG_TYPE:f.workspace!==_.workspace?Vn.REASON_DIFFERENT_WORKSPACES:f.isShadow()&&!_.isShadow()?Vn.REASON_SHADOW_PARENT:x.type===xt.OUTPUT_VALUE&&_.previousConnection&&_.previousConnection.isConnected()||x.type===xt.PREVIOUS_STATEMENT&&_.outputConnection&&_.outputConnection.isConnected()?Vn.REASON_PREVIOUS_AND_OUTPUT:Vn.CAN_CONNECT}doTypeChecks(s,c){if(s=s.getCheck(),c=c.getCheck(),!s||!c)return!0;for(let f=0;f<s.length;f++)if(c.indexOf(s[f])!==-1)return!0;return!1}doDragChecks(s,c,f){if(s.distanceFrom(c)>f||c.getSourceBlock().isInsertionMarker())return!1;switch(c.type){case xt.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(s,c);case xt.OUTPUT_VALUE:if(c.isConnected()&&!c.targetBlock().isInsertionMarker()||s.isConnected())return!1;break;case xt.INPUT_VALUE:if(c.isConnected()&&!c.targetBlock().isMovable()&&!c.targetBlock().isShadow())return!1;break;case xt.NEXT_STATEMENT:if(c.isConnected()&&!s.getSourceBlock().nextConnection&&!c.targetBlock().isShadow()&&c.targetBlock().nextConnection)return!1;break;default:return!1}return _i.indexOf(c)===-1}canConnectToPrevious_(s,c){return s.targetConnection||_i.indexOf(c)!==-1?!1:c.targetConnection?(s=c.targetBlock(),s.isInsertionMarker()?!s.getPreviousBlock():!1):!0}};Bt(ct.CONNECTION_CHECKER,uh,cG);var GI=class extends Hv{constructor(s){super(s),this.type=a_,s&&(this.varType=s.type,this.varName=s.name)}toJson(){const s=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return s.varType=this.varType,s.varName=this.varName,s}fromJson(s){i("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.varType=s.varType,this.varName=s.varName}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new GI),c.varType=s.varType,c.varName=s.varName,c}run(s){const c=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");s?c.deleteVariableById(this.varId):c.createVariable(this.varName,this.varType,this.varId)}};Bt(ct.EVENT,a_,GI);var WI=class extends Hv{constructor(s,c){super(s),this.type=Bv,s&&(this.oldName=s.name,this.newName=typeof c>"u"?"":c)}toJson(){const s=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return s.oldName=this.oldName,s.newName=this.newName,s}fromJson(s){i("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldName=s.oldName,this.newName=s.newName}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new WI),c.oldName=s.oldName,c.newName=s.newName,c}run(s){const c=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");s?c.renameVariableById(this.varId,this.newName):c.renameVariableById(this.varId,this.oldName)}};Bt(ct.EVENT,Bv,WI);var zI=class{constructor(s){this.workspace=s,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(s,c){if(s.name!==c){var f=this.getVariable(c,s.type),_=this.workspace.getAllBlocks(!1);Et(!0);try{f&&f.getId()!==s.getId()?this.renameVariableWithConflict_(s,c,f,_):this.renameVariableAndUses_(s,c,_)}finally{Et(!1)}}}renameVariableById(s,c){const f=this.getVariableById(s);if(!f)throw Error("Tried to rename a variable that didn't exist. ID: "+s);this.renameVariable(f,c)}renameVariableAndUses_(s,c,f){for(at(new(lt(Bv))(s,c)),s.name=c,c=0;c<f.length;c++)f[c].updateVarName(s)}renameVariableWithConflict_(s,c,f,_){const x=s.type;for(c!==f.name&&this.renameVariableAndUses_(f,c,_),c=0;c<_.length;c++)_[c].renameVarById(s.getId(),f.getId());at(new(lt(a_))(s)),Cs(this.variableMap.get(x),s)}createVariable(s,c,f){var _=this.getVariable(s,c);if(_){if(f&&_.getId()!==f)throw Error('Variable "'+s+'" is already in use and its id is "'+_.getId()+'" which conflicts with the passed in id, "'+f+'".');return _}if(f&&this.getVariableById(f))throw Error('Variable id, "'+f+'", is already in use.');return _=f||Jt(),c=c||"",_=new Xv(this.workspace,s,c,_),s=this.variableMap.get(c)||[],s.push(_),this.variableMap.delete(c),this.variableMap.set(c,s),at(new(lt(Ap))(_)),_}deleteVariable(s){const c=s.getId(),f=this.variableMap.get(s.type);if(f){for(let _=0;_<f.length;_++)if(f[_].getId()===c){f.splice(_,1),at(new(lt(a_))(s));break}}}deleteVariableById(s){const c=this.getVariableById(s);if(c){var f=c.name;const _=this.getVariableUsesById(s);for(let x=0,P;P=_[x];x++)if(P.type==="procedures_defnoreturn"||P.type==="procedures_defreturn"){s=String(P.getFieldValue("NAME")),f=Kt.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",f).replace("%2",s),Ll(f);return}1<_.length?(f=Kt.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(_.length)).replace("%2",f),Go(f,x=>{x&&c&&this.deleteVariableInternal(c,_)})):this.deleteVariableInternal(c,_)}else console.warn("Can't delete non-existent variable: "+s)}deleteVariableInternal(s,c){const f=nn();f||Et(!0);try{for(let _=0;_<c.length;_++)c[_].dispose(!0);this.deleteVariable(s)}finally{f||Et(!1)}}getVariable(s,c){if(c=this.variableMap.get(c||"")){for(let f=0,_;_=c[f];f++)if(dl.equals(_.name,s))return _}return null}getVariableById(s){for(const[,c]of this.variableMap)for(const f of c)if(f.getId()===s)return f;return null}getVariablesOfType(s){return(s=this.variableMap.get(s||""))?s.slice():[]}getVariableTypes(s){const c=new Set(this.variableMap.keys());if(s&&s.getPotentialVariableMap())for(const f of s.getPotentialVariableMap().variableMap.keys())c.add(f);return c.has("")||c.add(""),Array.from(c.values())}getAllVariables(){let s=[];for(const c of this.variableMap.values())s=s.concat(c);return s}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(s=>s.name)}getVariableUsesById(s){const c=[],f=this.workspace.getAllBlocks(!1);for(let _=0;_<f.length;_++){const x=f[_].getVarModels();if(x)for(let P=0;P<x.length;P++)x[P].getId()===s&&c.push(f[_])}return c}},Oh=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(s){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new eG(this),this.potentialVariableMap=null,this.id=Jt(),D(this),this.options=s||new ql({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(At(ct.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new zI(this)}dispose(){this.listeners.length=0,this.clear(),R(this)}sortObjects_(s,c){return s=s.getRelativeToSurfaceXY(),c=c.getRelativeToSurfaceXY(),s.y+Oh.prototype.sortObjects_.offset*s.x-(c.y+Oh.prototype.sortObjects_.offset*c.x)}addTopBlock(s){this.topBlocks.push(s)}removeTopBlock(s){if(!Cs(this.topBlocks,s))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(s){const c=[].concat(this.topBlocks);return s&&1<c.length&&(this.sortObjects_.offset=Math.sin(ae(Oh.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),c.sort(this.sortObjects_)),c}addTypedBlock(s){this.typedBlocksDB.has(s.type)||this.typedBlocksDB.set(s.type,[]),this.typedBlocksDB.get(s.type).push(s)}removeTypedBlock(s){Cs(this.typedBlocksDB.get(s.type),s),this.typedBlocksDB.get(s.type).length||this.typedBlocksDB.delete(s.type)}getBlocksByType(s,c){return this.typedBlocksDB.has(s)?(s=this.typedBlocksDB.get(s).slice(0),c&&s&&1<s.length&&(this.sortObjects_.offset=Math.sin(ae(Oh.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),s.sort(this.sortObjects_)),s.filter(function(f){return!f.isInsertionMarker()})):[]}addTopComment(s){this.topComments.push(s),this.commentDB.has(s.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+s.id+'"'),this.commentDB.set(s.id,s)}removeTopComment(s){if(!Cs(this.topComments,s))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(s.id)}getTopComments(s){const c=[].concat(this.topComments);return s&&1<c.length&&(this.sortObjects_.offset=Math.sin(ae(Oh.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),c.sort(this.sortObjects_)),c}getAllBlocks(s){if(s){var c=this.getTopBlocks(!0);s=[];for(let f=0;f<c.length;f++)s.push(...c[f].getDescendants(!0))}else for(s=this.getTopBlocks(!1),c=0;c<s.length;c++)s.push(...s[c].getChildren(!1));return s.filter(function(f){return!f.isInsertionMarker()})}clear(){this.isClearing=!0;try{const s=nn();for(s||Et(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();s||Et(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(s,c){this.variableMap.renameVariableById(s,c)}createVariable(s,c,f){return this.variableMap.createVariable(s,c,f)}getVariableUsesById(s){return this.variableMap.getVariableUsesById(s)}deleteVariableById(s){this.variableMap.deleteVariableById(s)}getVariable(s,c){return this.variableMap.getVariable(s,c)}getVariableById(s){return this.variableMap.getVariableById(s)}getVariablesOfType(s){return this.variableMap.getVariablesOfType(s)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(s,c){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(s){return this.options.maxInstances?(this.options.maxInstances[s]!==void 0?this.options.maxInstances[s]:1/0)-this.getBlocksByType(s,!1).length:1/0}isCapacityAvailable(s){if(!this.hasBlockLimits())return!0;let c=0;for(const f in s){if(s[f]>this.remainingCapacityOfType(f))return!1;c+=s[f]}return!(c>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(s){var c=s?this.redoStack_:this.undoStack_,f=s?this.undoStack_:this.redoStack_;const _=c.pop();if(_){for(var x=[_];c.length&&_.group&&_.group===c[c.length-1].group;)x.push(c.pop());for(c=0;c<x.length;c++)f.push(x[c]);x=gr(x,s),tn(!1);try{for(f=0;f<x.length;f++)x[f].run(s)}finally{tn(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Ts()}addChangeListener(s){return this.listeners.push(s),s}removeChangeListener(s){Cs(this.listeners,s)}fireChangeListener(s){if(s.recordUndo)for(this.undoStack_.push(s),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let c=0;c<this.listeners.length;c++)(0,this.listeners[c])(s)}getBlockById(s){return this.blockDB.get(s)||null}setBlockById(s,c){this.blockDB.set(s,c)}removeBlockById(s){this.blockDB.delete(s)}getCommentById(s){let c;return(c=this.commentDB.get(s))!=null?c:null}allInputsFilled(s){const c=this.getTopBlocks(!1);for(let f=0;f<c.length;f++)if(!c[f].allInputsFilled(s))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new zI(this)}getVariableMap(){return this.variableMap}setVariableMap(s){this.variableMap=s}getProcedureMap(){return this.procedureMap}static getById(s){return A(s)}static getAll(){return I()}};Oh.SCAN_ANGLE=3;var eie=100,uG=class{constructor(s){this.parentWorkspace=s,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(s,c){if(s.length){try{var f=new globalThis.Audio}catch{return}for(let x=0;x<s.length;x++){const P=s[x],J=P.match(/\.(\w+)$/);if(J&&f.canPlayType("audio/"+J[1])){var _=new globalThis.Audio(P);break}}_&&this.sounds.set(c,_)}}preload(){for(const s of this.sounds.values()){s.volume=.01;const c=s.play();if(c!==void 0?c.then(s.pause).catch(function(){}):s.pause(),Ht||ti)break}}play(s,c){var f=this.sounds.get(s);f?(s=new Date,this.lastSound_!==null&&s.getTime()-this.lastSound_.getTime()<eie||(this.lastSound_=s,f=Ht||an?f:f.cloneNode(),f.volume=c===void 0?1:c,f.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(s,c)}},hG=class{constructor(s){this.workspace=s,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=L(Re.G,{});const s=String(Math.random()).substring(2);return this.createZoomOutSvg(s),this.createZoomInSvg(s),this.workspace.isMovable()&&this.createZoomResetSvg(s),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[ms.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ye(this.svgGroup),this.onZoomResetWrapper&&S(this.onZoomResetWrapper),this.onZoomInWrapper&&S(this.onZoomInWrapper),this.onZoomOutWrapper&&S(this.onZoomOutWrapper)}getBoundingRectangle(){let s=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(s+=this.LARGE_SPACING+this.HEIGHT),new ji(this.top,this.top+s,this.left,this.left+this.WIDTH)}position(s,c){if(this.initialized){var f=wd(this.workspace,s),_=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(_+=this.LARGE_SPACING+this.HEIGHT),s=_p(f,new ps(this.WIDTH,_),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,s,this.workspace),f=f.vertical,c=_v(s,this.MARGIN_VERTICAL,f===gh.TOP?Nd.DOWN:Nd.UP,c),f===gh.TOP){var x=this.SMALL_SPACING+this.HEIGHT,P;(P=this.zoomInGroup)==null||P.setAttribute("transform","translate(0, "+x+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(x+this.LARGE_SPACING+this.HEIGHT)+")")}else{P=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let be;(be=this.zoomInGroup)==null||be.setAttribute("transform","translate(0, "+P+")"),P=P+this.SMALL_SPACING+this.HEIGHT,(x=this.zoomOutGroup)==null||x.setAttribute("transform","translate(0, "+P+")")}this.top=c.top,this.left=c.left;var J;(J=this.svgGroup)==null||J.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(s){this.zoomOutGroup=L(Re.G,{class:"blocklyZoom"},this.svgGroup);const c=L(Re.CLIPPATH,{id:"blocklyZoomoutClipPath"+s},this.zoomOutGroup);L(Re.RECT,{width:32,height:32},c),L(Re.IMAGE,{width:Eo.width,height:Eo.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+s+")"},this.zoomOutGroup).setAttributeNS(Zo,"xlink:href",this.workspace.options.pathToMedia+Eo.url),this.onZoomOutWrapper=v(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(s){this.zoomInGroup=L(Re.G,{class:"blocklyZoom"},this.svgGroup);const c=L(Re.CLIPPATH,{id:"blocklyZoominClipPath"+s},this.zoomInGroup);L(Re.RECT,{width:32,height:32},c),L(Re.IMAGE,{width:Eo.width,height:Eo.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+s+")"},this.zoomInGroup).setAttributeNS(Zo,"xlink:href",this.workspace.options.pathToMedia+Eo.url),this.onZoomInWrapper=v(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(s,c){this.workspace.markFocused(),this.workspace.zoomCenter(s),this.fireZoomEvent(),a(),c.stopPropagation(),c.preventDefault()}createZoomResetSvg(s){this.zoomResetGroup=L(Re.G,{class:"blocklyZoom"},this.svgGroup);const c=L(Re.CLIPPATH,{id:"blocklyZoomresetClipPath"+s},this.zoomResetGroup);L(Re.RECT,{width:32,height:32},c),L(Re.IMAGE,{width:Eo.width,height:Eo.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+s+")"},this.zoomResetGroup).setAttributeNS(Zo,"xlink:href",this.workspace.options.pathToMedia+Eo.url),this.onZoomResetWrapper=v(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(s){this.workspace.markFocused();const c=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(c),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),a(),s.stopPropagation(),s.preventDefault()}fireZoomEvent(){const s=new(lt(Pd))(null,this.workspace.id,"zoom_controls");at(s)}};Ys(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var tie=20,Kl=class extends Oh{constructor(s,c,f){super(s),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(At(ct.METRICS_MANAGER,s,!0))(this),this.getMetrics=s.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=s.setMetrics||Kl.setTopLevelWorkspaceMetrics_,this.componentManager=new ms,this.connectionDBList=w_.init(this.connectionChecker),c&&(this.blockDragSurface=c),f&&(this.workspaceDragSurface=f),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new uG(s.parentWorkspace),this.grid=this.options.gridPattern?new kI(this.options.gridPattern,s.gridOptions):null,this.markerManager=new jv(this),t.module$build$src$core$variables&&pa&&this.registerToolboxCategoryCallback(cw,pa),Bd&&Sp&&this.registerToolboxCategoryCallback(UI,Sp),t.module$build$src$core$procedures&&Ed&&(this.registerToolboxCategoryCallback(Tw,Ed),this.addChangeListener(Li)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new lG(this,this.options.theme||_w),this.themeManager_.subscribeWorkspace(this);let _;this.renderer=qg(this.options.renderer||"geras",this.getTheme(),(_=this.options.rendererOverrides)!=null?_:void 0),this.cachedParentSvgSize=new ps(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(s){this.metricsManager=s,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(s){this.markerManager.setCursorSvg(s)}setMarkerSvg(s){this.markerManager.setMarkerSvg(s)}getMarker(s){return this.markerManager?this.markerManager.getMarker(s):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(s){s||(s=_w),this.themeManager_.setTheme(s)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(c){return!!c.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const s=new(lt(zv))(this.getTheme().name,this.id);at(s)}updateBlockStyles_(s){for(let c=0,f;f=s[c];c++){const _=f.getStyleName();if(_){const x=f;x.setStyle(_),x.mutator&&x.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const s=this.getParentSvg().getScreenCTM();s&&(this.inverseScreenCTM=s.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(s){let c=0,f=0,_=1;(Fe(this.getCanvas(),s)||Fe(this.getBubbleCanvas(),s))&&(_=this.scale);do{const x=xr(s);(s===this.getCanvas()||s===this.getBubbleCanvas())&&(_=1),c+=x.x*_,f+=x.y*_,s=s.parentNode}while(s&&s!==this.getParentSvg());return new _t(c,f)}getCachedParentSvgSize(){const s=this.cachedParentSvgSize;return new ps(s.width,s.height)}getOriginOffsetInPixels(){return Qu(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let s=this.svgGroup_;for(;s;){if((" "+(s.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=s;break}s=s.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(s){this.resizeHandlerWrapper=s}createDom(s){return this.svgGroup_=L(Re.G,{class:"blocklyWorkspace"}),s&&(this.svgBackground_=L(Re.RECT,{height:"100%",width:"100%",class:s},this.svgGroup_),s==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=L(Re.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=L(Re.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(v(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),v(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(At(ct.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(s=At(ct.CURSOR,this.options))&&this.markerManager.setCursor(new s),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ye(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const s=this.getParentSvg();s&&s.parentNode&&ye(s.parentNode)}this.resizeHandlerWrapper&&(S(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=Kl.newTrashcan(this);const s=this.trashcan.createDom();this.svgGroup_.insertBefore(s,this.svgBlockCanvas_)}static newTrashcan(s){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new hG(this);const s=this.zoomControls_.createDom();this.svgGroup_.appendChild(s)}addFlyout(s){const c=new ql({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return c.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(At(ct.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(c):new(At(ct.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(c),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(s)}getFlyout(s){return this.flyout||s?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const s=this.componentManager.getComponents(ms.Capability.POSITIONABLE,!0),c=this.getMetricsManager().getUiMetrics(),f=[];for(let _=0,x;x=s[_];_++){x.position(c,f);const P=x.getBoundingRectangle();P&&f.push(P)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const s=Ka();_t.equals(this.lastRecordedPageScroll,s)||(this.lastRecordedPageScroll=s,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(s,c){const f=this.getParentSvg();s!=null&&(this.cachedParentSvgSize.width=s,f.setAttribute("data-cached-width",s.toString())),c!=null&&(this.cachedParentSvgSize.height=c,f.setAttribute("data-cached-height",c.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let s=this.svgGroup_;for(;s;){if(s.tagName==="svg"){this.cachedParentSvg=s;break}s=s.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Dn()){var s=this.scale,c=-this.scrollY,f=-this.scrollX;if(!(s===this.oldScale&&1>Math.abs(c-this.oldTop)&&1>Math.abs(f-this.oldLeft))){var _=new(lt(kp))(c,f,s,this.id,this.oldScale);this.oldScale=s,this.oldTop=c,this.oldLeft=f,at(_)}}}translate(s,c){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var f;(f=this.workspaceDragSurface)==null||f.translateSurface(s,c)}else f="translate("+s+","+c+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",f),this.svgBubbleCanvas_.setAttribute("transform",f);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(s,c,this.scale),this.grid&&this.grid.moveTo(s,c),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var s=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),s="translate("+s.x+","+s.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",s),this.svgBubbleCanvas_.setAttribute("transform",s)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var s=this.svgBlockCanvas_.previousSibling,c,f=parseInt((c=this.getParentSvg().getAttribute("width"))!=null?c:"0"),_;c=parseInt((_=this.getParentSvg().getAttribute("height"))!=null?_:"0"),_=xr(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),s,f,c,this.scale),this.workspaceDragSurface.translateSurface(_.x,_.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const s=this.getMetrics();return s?s.viewWidth/this.scale:0}setVisible(s){if(this.isVisible_=s,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(s),this.getFlyout()&&this.getFlyout().setContainerVisible(s),this.getParentSvg().style.display=s?"block":"none",this.toolbox_&&this.toolbox_.setVisible(s),s){s=this.getAllBlocks(!1);for(let c=s.length-1;0<=c;c--)s[c].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var s=this.getAllBlocks(!1),c=s.length-1;0<=c;c--)s[c].render(!1);if(this.currentGesture_)for(s=this.currentGesture_.getInsertionMarkers(),c=0;c<s.length;c++)s[c].render(!1);this.markerManager.updateMarkers()}highlightBlock(s,c){if(c===void 0){for(let f=0,_;_=this.highlightedBlocks[f];f++)_.setHighlighted(!1);this.highlightedBlocks.length=0}(s=s?this.getBlockById(s):null)&&((c=c===void 0||c)?this.highlightedBlocks.indexOf(s)===-1&&this.highlightedBlocks.push(s):Cs(this.highlightedBlocks,s),s.setHighlighted(c))}paste(s){if(!this.rendered||!s.type&&!s.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const c=nn();return c||Et(!0),s=s.type?this.pasteBlock_(null,s):s.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(s):this.pasteBlock_(s,null),Et(c),s}pasteBlock_(s,c){cn();let f;try{let _=0,x=0;if(s){f=bi(s,this);let P;_=parseInt((P=s.getAttribute("x"))!=null?P:"0"),this.RTL&&(_=-_);let J;x=parseInt((J=s.getAttribute("y"))!=null?J:"0")}else c&&(f=Dc(c,this),_=c.x||10,this.RTL&&(_=this.getWidth()-_),x=c.y||10);if(!isNaN(_)&&!isNaN(x)){let P;do{P=!1;const J=this.getAllBlocks(!1);for(let be=0,tt;tt=J[be];be++){const Ot=tt.getRelativeToSurfaceXY();if(1>=Math.abs(_-Ot.x)&&1>=Math.abs(x-Ot.y)){P=!0;break}}if(!P){const be=f.getConnections_(!1);for(let tt=0,Ot;Ot=be[tt];tt++)if(Ot.closest(t.config$$module$build$src$core$config.snapRadius,new _t(_,x)).connection){P=!0;break}}P&&(_=this.RTL?_-t.config$$module$build$src$core$config.snapRadius:_+t.config$$module$build$src$core$config.snapRadius,x+=2*t.config$$module$build$src$core$config.snapRadius)}while(P);f.moveTo(new _t(_,x))}}finally{rt()}return Dn()&&!f.isShadow()&&at(new(lt(Ms))(f)),f.select(),f}pasteWorkspaceComment_(s){cn();let c;try{c=eo.fromXmlRendered(s,this);let f,_=parseInt((f=s.getAttribute("x"))!=null?f:"0"),x,P=parseInt((x=s.getAttribute("y"))!=null?x:"0");isNaN(_)||isNaN(P)||(this.RTL&&(_=-_),c.moveBy(_+50,P+50))}finally{rt()}return Dn()&&jc.fireCreateEvent(c),c.select(),c}refreshToolboxSelection(){const s=this.isFlyout?this.targetWorkspace:this;s&&!s.currentGesture_&&s.toolbox_&&s.toolbox_.getFlyout()&&s.toolbox_.refreshSelection()}renameVariableById(s,c){super.renameVariableById(s,c),this.refreshToolboxSelection()}deleteVariableById(s){super.deleteVariableById(s),this.refreshToolboxSelection()}createVariable(s,c,f){return s=super.createVariable(s,c,f),this.refreshToolboxSelection(),s}recordDragTargets(){const s=this.componentManager.getComponents(ms.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let c=0,f;f=s[c];c++){const _=f.getClientRect();_&&this.dragTargetAreas.push({component:f,clientRect:_})}}newBlock(s,c){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(s){for(let c=0,f;f=this.dragTargetAreas[c];c++)if(f.clientRect.contains(s.clientX,s.clientY))return f.component;return null}onMouseDown_(s){const c=this.getGesture(s);c&&c.handleWsStart(s,this)}startDrag(s,c){s=E(s,this.getParentSvg(),this.getInverseScreenCTM()),s.x/=this.scale,s.y/=this.scale,this.dragDeltaXY=_t.difference(c,s)}moveDrag(s){return s=E(s,this.getParentSvg(),this.getInverseScreenCTM()),s.x/=this.scale,s.y/=this.scale,_t.sum(this.dragDeltaXY,s)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const s=!!this.scrollbar;return this.isMovable()&&(!s||s&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const s=!!this.scrollbar;return this.isMovable()&&(!s||s&&this.scrollbar.canScrollVertically())}onMouseWheel_(s){if(Yc.inProgress())s.preventDefault(),s.stopPropagation();else{var c=this.options.zoomOptions&&this.options.zoomOptions.wheel,f=this.options.moveOptions&&this.options.moveOptions.wheel;if(c||f){var _=$(s);if(zt)var x=s.metaKey;c&&(s.ctrlKey||x||!f)?(_=-_.y/50,c=E(s,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(c.x,c.y,_)):(c=this.scrollX-_.x,f=this.scrollY-_.y,s.shiftKey&&!_.x&&(c=this.scrollX-_.y,f=this.scrollY),this.scroll(c,f)),s.preventDefault()}}}getBlocksBoundingBox(){const s=this.getTopBoundedElements();if(!s.length)return new ji(0,0,0,0);const c=s[0].getBoundingRectangle();for(let _=1;_<s.length;_++){var f=s[_];f.isInsertionMarker&&f.isInsertionMarker()||(f=f.getBoundingRectangle(),f.top<c.top&&(c.top=f.top),f.bottom>c.bottom&&(c.bottom=f.bottom),f.left<c.left&&(c.left=f.left),f.right>c.right&&(c.right=f.right))}return c}cleanUp(){this.setResizesEnabled(!1),Et(!0);const s=this.getTopBlocks(!0);let c=0;for(let f=0,_;_=s[f];f++){if(!_.isMovable())continue;const x=_.getRelativeToSurfaceXY();_.moveBy(-x.x,c-x.y),_.snapToGrid(),c=_.getRelativeToSurfaceXY().y+_.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}Et(!1),this.setResizesEnabled(!0)}showContextMenu(s){if(!this.options.readOnly&&!this.isFlyout){var c=Hn.registry.getContextMenuOptions(Hn.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(c,s),Nc(s,c,this.RTL)}}updateToolbox(s){if(s=Od(s)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Ta(s)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=s,this.toolbox_.render(s)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=s,this.flyout.show(s)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(G(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(s,c,f){f=Math.pow(this.options.zoomOptions.scaleSpeed,f);const _=this.scale*f;if(this.scale!==_){_>this.options.zoomOptions.maxScale?f=this.options.zoomOptions.maxScale/this.scale:_<this.options.zoomOptions.minScale&&(f=this.options.zoomOptions.minScale/this.scale);var x=this.getCanvas().getCTM(),P=this.getParentSvg().createSVGPoint();P.x=s,P.y=c,P=P.matrixTransform(x.inverse()),s=P.x,c=P.y,x=x.translate(s*(1-f),c*(1-f)).scale(f),this.scrollX=x.e,this.scrollY=x.f,this.setScale(_)}}zoomCenter(s){var c=this.getMetrics();let f;this.flyout?(f=c.svgWidth?c.svgWidth/2:0,c=c.svgHeight?c.svgHeight/2:0):(f=c.viewWidth/2+c.absoluteLeft,c=c.viewHeight/2+c.absoluteTop),this.zoom(f,c,s)}zoomToFit(){if(this.isMovable()){var s=this.getMetrics(),c=s.viewWidth;s=s.viewHeight;var f=this.getBlocksBoundingBox(),_=2*tie,x=f.right-f.left+_;if(f=f.bottom-f.top+_,x){this.flyout&&(this.horizontalLayout?(s+=this.flyout.getHeight(),f+=this.flyout.getHeight()/this.scale):(c+=this.flyout.getWidth(),x+=this.flyout.getWidth()/this.scale)),c/=x,s/=f,cn();try{this.setScale(Math.min(c,s)),this.scrollCenter()}finally{rt()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){le(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),le(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){ie(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),ie(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var s=this.getMetrics(),c=(s.scrollWidth-s.viewWidth)/2,f=(s.scrollHeight-s.viewHeight)/2;c=-c-s.scrollLeft,f=-f-s.scrollTop,this.scroll(c,f)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(s){if(this.isMovable()){if(s=s?this.getBlockById(s):null){var c=s.getRelativeToSurfaceXY(),f=s.getHeightWidth(),_=this.scale;s=(c.x+(this.RTL?-1:1)*f.width/2)*_,c=(c.y+f.height/2)*_,f=this.getMetrics(),this.scroll(-(s-f.viewWidth/2),-(c-f.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(s){this.options.zoomOptions.maxScale&&s>this.options.zoomOptions.maxScale?s=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&s<this.options.zoomOptions.minScale&&(s=this.options.zoomOptions.minScale),this.scale=s,this.hideChaff(!1),(s=this.getFlyout(!1))&&s.isVisible()&&(s.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),s=this.getMetrics(),this.scrollX-=s.absoluteLeft,this.scrollY-=s.absoluteTop,s.viewLeft+=s.absoluteLeft,s.viewTop+=s.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(s):this.scrollbar.resizeContent(s))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(s,c){this.hideChaff(!0);const f=this.getMetrics();s=Math.min(s,-f.scrollLeft),c=Math.min(c,-f.scrollTop);const _=f.scrollTop+Math.max(0,f.scrollHeight-f.viewHeight);s=Math.max(s,-(f.scrollLeft+Math.max(0,f.scrollWidth-f.viewWidth))),c=Math.max(c,-_),this.scrollX=s,this.scrollY=c,this.scrollbar&&this.scrollbar.set(-(s+f.scrollLeft),-(c+f.scrollTop),!1),s+=f.absoluteLeft,c+=f.absoluteTop,this.translate(s,c)}getBlockById(s){return super.getBlockById(s)}getAllBlocks(s){return super.getAllBlocks(s)}getTopBlocks(s){return super.getTopBlocks(s)}addTopBlock(s){this.addTopBoundedElement(s),super.addTopBlock(s)}removeTopBlock(s){this.removeTopBoundedElement(s),super.removeTopBlock(s)}addTopComment(s){this.addTopBoundedElement(s),super.addTopComment(s)}removeTopComment(s){this.removeTopBoundedElement(s),super.removeTopComment(s)}addTopBoundedElement(s){this.topBoundedElements.push(s)}removeTopBoundedElement(s){Cs(this.topBoundedElements,s)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(s){const c=!this.resizesEnabled&&s;this.resizesEnabled=s,c&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(s,c){if(typeof c!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(s,c)}getButtonCallback(s){let c;return(c=this.flyoutButtonCallbacks.get(s))!=null?c:null}removeButtonCallback(s){this.flyoutButtonCallbacks.delete(s)}registerToolboxCategoryCallback(s,c){if(typeof c!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(s,c)}getToolboxCategoryCallback(s){return this.toolboxCategoryCallbacks.get(s)||null}removeToolboxCategoryCallback(s){this.toolboxCategoryCallbacks.delete(s)}getGesture(s){const c=s.type==="pointerdown",f=this.currentGesture_;return f?c&&f.hasStarted()?(console.warn("Tried to start the same gesture twice."),f.cancel(),null):f:c?this.currentGesture_=new Yc(s,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(s){go(),xs(),on();const c=!!s;this.getComponentManager().getComponents(ms.Capability.AUTOHIDEABLE,!0).forEach(f=>f.autoHide(c))}static setTopLevelWorkspaceMetrics_(s){const c=this.getMetrics();typeof s.x=="number"&&(this.scrollX=-(c.scrollLeft+(c.scrollWidth-c.viewWidth)*s.x)),typeof s.y=="number"&&(this.scrollY=-(c.scrollTop+(c.scrollHeight-c.viewHeight)*s.y)),this.translate(this.scrollX+c.absoluteLeft,this.scrollY+c.absoluteTop)}},QI={};QI.load=Bc,QI.save=Sv;var dG=class{constructor(){this.priority=LU}save(s){const c=[];for(const f of s.getAllVariables())s={name:f.name,id:f.getId()},f.type&&(s.type=f.type),c.push(s);return c.length?c:null}load(s,c){for(const f of s)c.createVariable(f.name,f.type,f.id)}clear(s){s.getVariableMap().clear()}};sh("variables",new dG);var fG={};fG.VariableSerializer=dG;var pG=class{constructor(s,c){this.procedureModelClass=s,this.parameterModelClass=c,this.priority=NU}save(s){return s.getProcedureMap().getProcedures().map(c=>Cd(c))}load(s,c){const f=c.getProcedureMap();for(const _ of s)f.add(Ad(this.procedureModelClass,this.parameterModelClass,_,c))}clear(s){s.getProcedureMap().clear()}},nie=new pG(py,E_),Up={};Up.ProcedureSerializer=pG,Up.loadParameter=ah,Up.loadProcedure=Ad,Up.observableProcedureSerializer=nie,Up.saveParameter=cl,Up.saveProcedure=Cd;var iie={blocks:ry,exceptions:__,priorities:Ow,procedures:Up,registry:uI,variables:fG,workspaces:QI},mG=class extends vy{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(s){super.setFontConstants_(s),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(s){super.setDynamicProperties_(s),this.SELECTED_GLOW_COLOUR=s.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const c=Number(s.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=c&&!isNaN(c)?c:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=s.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(s=Number(s.getComponentStyle("replacementGlowSize")))&&!isNaN(s)?s:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&ye(this.selectedGlowFilter_),this.replacementGlowFilter_&&ye(this.replacementGlowFilter_)}makeStartHat(){const s=this.START_HAT_HEIGHT,c=this.START_HAT_WIDTH,f=yo("c",[Ft(25,-s),Ft(71,-s),Ft(c,0)]);return{height:s,width:c,path:f}}makeHexagonal(){function s(f,_,x){var P=f/2;return P=P>c?c:P,x=x?-1:1,f=(_?-1:1)*f/2,ol(-x*P,f)+ol(x*P,f)}const c=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(f){return f/=2,f>c?c:f},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return s(f,!1,!1)},pathUp(f){return s(f,!0,!1)},pathRightDown(f){return s(f,!1,!0)},pathRightUp(f){return s(f,!1,!0)}}}makeRounded(){function s(_,x,P){const J=_>f?_-f:0;return _=(_>f?f:_)/2,Vi("a","0 0,1",_,Ft((x?-1:1)*_,(x?-1:1)*_))+Tt("v",(P?1:-1)*J)+Vi("a","0 0,1",_,Ft((x?1:-1)*_,(x?-1:1)*_))}const c=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=2*c;return{type:this.SHAPES.ROUND,isDynamic:!0,width(_){return _/=2,_>c?c:_},height(_){return _},connectionOffsetY(_){return _/2},connectionOffsetX(_){return-_},pathDown(_){return s(_,!1,!1)},pathUp(_){return s(_,!0,!1)},pathRightDown(_){return s(_,!1,!0)},pathRightUp(_){return s(_,!1,!0)}}}makeSquared(){function s(f,_,x){return f-=2*c,Vi("a","0 0,1",c,Ft((_?-1:1)*c,(_?-1:1)*c))+Tt("v",(x?1:-1)*f)+Vi("a","0 0,1",c,Ft((_?1:-1)*c,(_?-1:1)*c))}const c=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(f){return c},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return s(f,!1,!1)},pathUp(f){return s(f,!0,!1)},pathRightDown(f){return s(f,!1,!0)},pathRightUp(f){return s(f,!1,!0)}}}shapeFor(s){let c=s.getCheck();switch(!c&&s.targetConnection&&(c=s.targetConnection.getCheck()),s.type){case xt.INPUT_VALUE:case xt.OUTPUT_VALUE:if(s=s.getSourceBlock().getOutputShape(),s!==null)switch(s){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return c&&c.indexOf("Boolean")!==-1?this.HEXAGONAL:c&&c.indexOf("Number")!==-1?this.ROUNDED:(c&&c.indexOf("String"),this.ROUNDED);case xt.PREVIOUS_STATEMENT:case xt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function s(Ot){return yo("c",[Ft(Ot*x/2,0),Ft(Ot*x*3/4,J/2),Ft(Ot*x,J)])+bd([Ft(Ot*x,P)])+yo("c",[Ft(Ot*x/4,J/2),Ft(Ot*x/2,J),Ft(Ot*x,J)])+Tt("h",Ot*_)+yo("c",[Ft(Ot*x/2,0),Ft(Ot*x*3/4,-(J/2)),Ft(Ot*x,-J)])+bd([Ft(Ot*x,-P)])+yo("c",[Ft(Ot*x/4,-(J/2)),Ft(Ot*x/2,-J),Ft(Ot*x,-J)])}const c=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,_=c/3,x=_/3,P=f/2,J=P/2,be=s(1),tt=s(-1);return{type:this.SHAPES.NOTCH,width:c,height:f,pathLeft:be,pathRight:tt}}makeInsideCorners(){const s=this.CORNER_RADIUS,c=Vi("a","0 0,0",s,Ft(-s,s)),f=Vi("a","0 0,1",s,Ft(-s,s)),_=Vi("a","0 0,0",s,Ft(s,s)),x=Vi("a","0 0,1",s,Ft(s,s));return{width:s,height:s,pathTop:c,pathBottom:_,rightWidth:s,rightHeight:s,pathTopRight:f,pathBottomRight:x}}generateSecondaryColour_(s){return ya("#000",s,.15)||s}generateTertiaryColour_(s){return ya("#000",s,.25)||s}createDom(s,c,f){super.createDom(s,c,f),s=L(Re.DEFS,{},s),c=L(Re.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},s),L(Re.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},c),f=L(Re.FECOMPONENTTRANSFER,{result:"outBlur"},c),L(Re.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},f),L(Re.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},c),L(Re.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},c),this.selectedGlowFilterId=c.id,this.selectedGlowFilter_=c,s=L(Re.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},s),L(Re.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},s),c=L(Re.FECOMPONENTTRANSFER,{result:"outBlur"},s),L(Re.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},c),L(Re.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},s),L(Re.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},s),L(Re.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},s),this.replacementGlowFilterId=s.id,this.replacementGlowFilter_=s}getCSS_(s){return[`${s} .blocklyText,`,`${s} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${s} .blocklyText {`,"fill: #fff;","}",`${s} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${s} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${s} .blocklyNonEditableText>text,`,`${s} .blocklyEditableText>text,`,`${s} .blocklyNonEditableText>g>text,`,`${s} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${s} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${s} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${s} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${s} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${s} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${s} .blocklyDropdownText {`,"fill: #fff !important;","}",`${s}.blocklyWidgetDiv .goog-menuitem,`,`${s}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${s}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${s} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${s} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${s} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},gG=class extends yy{constructor(s,c){super(s,c)}draw(){const s=this.block_.pathObject;if(s.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),s.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&s.flipRTL(),Wl()){let c,f;(c=this.block_)==null||(f=c.renderingDebugger)==null||f.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(s.outputShapeType=this.info_.outputConnection.shape.type),s.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(s){if(!(0>=s.height))if(ke.isSpacer(s)&&(s.precedesStatement||s.followsStatement)){var c=this.constants_.INSIDE_CORNERS.rightHeight;c=s.height-(s.precedesStatement?c:0),this.outlinePath_+=(s.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<c?Tt("V",s.yPos+c):"")+(s.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=Tt("V",s.yPos+s.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const s=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=oi(s.xPos,this.info_.startY),this.outlinePath_+=Tt("h",s.width)}drawFlatBottom_(){const s=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Tt("V",s.baseline),this.outlinePath_+=Tt("h",-s.width)}drawInlineInput_(s){this.positionInlineInputConnection_(s);const c=s.input.name;if(!s.connectedBlock&&!this.info_.isInsertionMarker){var f=s.width-2*s.connectionWidth;s=zr(s.xPos+s.connectionWidth,s.centerline-s.height/2)+Tt("h",f)+s.shape.pathRightDown(s.height)+Tt("h",-f)+s.shape.pathUp(s.height)+"z",this.block_.pathObject.setOutlinePath(c,s)}}drawStatementInput_(s){var c=s.getLastInput();const f=c.xPos+c.notchOffset+c.shape.width,_=c.shape.pathRight+Tt("h",-(c.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,x=s.height-2*this.constants_.INSIDE_CORNERS.height;c=this.constants_.INSIDE_CORNERS.pathBottom+Tt("h",c.notchOffset-this.constants_.INSIDE_CORNERS.width)+(c.connectedBottomNextConnection?"":c.shape.pathLeft),this.outlinePath_+=Tt("H",f)+_+Tt("v",x)+c+Tt("H",s.xPos+s.width),this.positionStatementInputConnection_(s)}};t.FieldImage$$module$build$src$core$field_image=class extends $n{constructor(s,c,f,_,x,P,J){if(super($n.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",f=Number(gi(f)),c=Number(gi(c)),isNaN(f)||isNaN(c))throw Error("Height and width values of an image field must cast to numbers.");if(0>=f||0>=c)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new ps(c,f+t.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=f,typeof x=="function"&&(this.clickHandler_=x),s!==$n.SKIP_SETUP&&(J?this.configure_(J):(this.flipRtl_=!!P,this.altText_=gi(_)||""),this.setValue(gi(s)))}configure_(s){super.configure_(s),s.flipRtl&&(this.flipRtl_=s.flipRtl),s.alt&&(this.altText_=gi(s.alt))}initView(){this.imageElement_=L(Re.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(Zo,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(s){return typeof s!="string"?null:s}doValueUpdate_(s){this.value_=s,this.imageElement_&&this.imageElement_.setAttributeNS(Zo,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(s){s!==this.altText_&&(this.altText_=s||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(s){this.clickHandler_=s}getText_(){return this.altText_}static fromJson(s){if(!s.src||!s.width||!s.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(s.src,s.width,s.height,void 0,void 0,void 0,s)}},t.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,$s("field_image",t.FieldImage$$module$build$src$core$field_image),t.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",t.FieldImage$$module$build$src$core$field_image;var Sy=class extends $n{constructor(s,c,f){super($n.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){super.configure_(s),s.spellcheck!==void 0&&(this.spellcheck_=s.spellcheck)}initView(){const s=this.getSourceBlock();if(!s)throw new yr;if(this.getConstants().FULL_BLOCK_FIELDS){let c=0,f=0;for(let _=0,x;x=s.inputList[_];_++){for(let P=0;x.fieldRow[P];P++)c++;x.connection&&f++}this.fullBlockClickTarget_=1>=c&&s.outputConnection&&!f}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(s){return s==null?null:String(s)}doValueInvalid_(s){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,s=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&Dn()&&at(new(lt(Hr))(this.sourceBlock_,"field",this.name||null,s,this.value_)))}doValueUpdate_(s){this.isTextValid_=this.isDirty_=!0,this.value_=s}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var s=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",s.style.colourTertiary):s.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const s=this.htmlInput_;this.isTextValid_?(ie(s,"blocklyInvalidInput"),Kn(s,Oi.INVALID,!1)):(le(s,"blocklyInvalidInput"),Kn(s,Oi.INVALID,!0))}}setSpellcheck(s){s!==this.spellcheck_&&(this.spellcheck_=s,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(s,c){this.workspace_=this.sourceBlock_.workspace,s=c||!1,!s&&this.workspace_.options.modalInputs&&(kr||an||Ht)?this.showPromptEditor_():this.showInlineEditor_(s)}showPromptEditor_(){Ac(Kt.CHANGE_VALUE_TITLE,this.getText(),s=>{s!==null&&this.setValue(this.getValueFromEditorText_(s))})}showInlineEditor_(s){const c=this.getSourceBlock();if(!c)throw new yr;th(this,c.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,s||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var s=this.getSourceBlock();if(!s)throw new yr;Et(!0);const c=eh();var f=this.getClickTarget_();if(!f)throw Error("A click target has not been set.");le(f,"editing"),f=document.createElement("input"),f.className="blocklyHtmlInput",f.setAttribute("spellcheck",this.spellcheck_);const _=this.workspace_.getScale();var x=this.getConstants().FIELD_TEXT_FONTSIZE*_+"pt";return c.style.fontSize=x,f.style.fontSize=x,x=Sy.BORDERRADIUS*_+"px",this.fullBlockClickTarget_&&(x=this.getScaledBBox(),x=(x.bottom-x.top)/2+"px",s=s.getParent()?s.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,f.style.border=1*_+"px solid "+s,c.style.borderRadius=x,c.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(c.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*_+"px")),f.style.borderRadius=x,c.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(f),f}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),Et(!1),this.unbindInputEvents_();var s=eh().style;if(s.width="auto",s.height="auto",s.fontSize="",s.transition="",s.boxShadow="",this.htmlInput_=null,s=this.getClickTarget_(),!s)throw Error("A click target has not been set.");ie(s,"editing")}onFinishEditing_(s){}bindInputEvents_(s){this.onKeyDownWrapper_=v(s,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=v(s,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(S(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(S(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(s){s.keyCode===Rt.ENTER?(xs(),on()):s.keyCode===Rt.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),xs(),on()):s.keyCode===Rt.TAB&&(xs(),on(),this.sourceBlock_.tab(this,!s.shiftKey),s.preventDefault())}onHtmlInputChange_(s){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(s){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(s)),this.setValue(s)}resizeEditor_(){var s=this.getSourceBlock();if(!s)throw new yr;const c=eh(),f=this.getScaledBBox();c.style.width=f.right-f.left+"px",c.style.height=f.bottom-f.top+"px",s=new _t(s.RTL?f.right-c.offsetWidth:f.left,f.top),c.style.left=s.x+"px",c.style.top=s.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(s){return String(s)}getValueFromEditorText_(s){return s}};Sy.BORDERRADIUS=4,t.FieldTextInput$$module$build$src$core$field_textinput=class extends Sy{constructor(s,c,f){super(s,c,f)}static fromJson(s){return new this(gi(s.text),void 0,s)}},$s("field_input",t.FieldTextInput$$module$build$src$core$field_textinput),t.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",t.FieldTextInput$$module$build$src$core$field_textinput;var _G=class extends RI{constructor(s){super(s)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(s){return!!s.outputConnection}hasRightSquareCorner(s){return!!s.outputConnection&&!s.statementInputCount&&!s.nextConnection}},OG=class extends gy{constructor(s,c){if(super(s,c),this.connectedBottomNextConnection=!1,this.connectedBlock){for(s=this.connectedBlock;c=s.getNextBlock();)s=c;s.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},vG=class extends Jc{constructor(s){super(s),this.width=this.height=0,this.type|=ke.getType("RIGHT_CONNECTION")}},yG=class extends NI{constructor(s){super(s)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(s){const c=(s.hat?s.hat==="cap":this.constants_.ADD_START_HATS)&&!s.outputConnection&&!s.previousConnection;return!!s.outputConnection||c}hasRightSquareCorner(s){return!!s.outputConnection&&!s.statementInputCount&&!s.nextConnection}},bG=class extends x_{constructor(s,c){super(s,c),this.isInline=!0,this.renderer_=s,this.constants_=this.renderer_.getConstants(),this.topRow=new yG(this.constants_),this.bottomRow=new _G(this.constants_),this.isMultiRow=!c.getInputsInline()||c.isCollapsed(),this.hasStatementInput=0<c.statementInputCount,this.rightSide=this.outputConnection?new vG(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(s,c){return c?s.type===dn.STATEMENT||c.type===dn.STATEMENT?!0:s.type===dn.VALUE||s.type===dn.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(s){return s.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(s)}getInRowSpacing_(s,c){return s&&c||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!s&&c&&ke.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:s&&ke.isLeftRoundedCorner(s)&&c&&(ke.isPreviousConnection(c)||ke.isNextConnection(c))?c.notchOffset-this.constants_.CORNER_RADIUS:s&&ke.isLeftSquareCorner(s)&&c&&ke.isHat(c)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(s,c){if(ke.isTopRow(s)&&ke.isBottomRow(c))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const f=ke.isInputRow(s)&&s.hasStatement,_=ke.isInputRow(c)&&c.hasStatement;return _||f?(s=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),_&&f?Math.max(s,this.constants_.DUMMY_INPUT_MIN_HEIGHT):s):ke.isTopRow(s)?s.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ke.isBottomRow(c)?this.outputConnection?!c.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(s,c){const f=this.width-this.startX;return ke.isInputRow(s)&&s.hasStatement||ke.isInputRow(c)&&c.hasStatement?Math.max(f,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):f}getElemCenterline_(s,c){if(s.hasStatement&&!ke.isSpacer(c)&&!ke.isStatementInput(c))return s.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ke.isInlineInput(c)&&c instanceof _h){const f=c.connectedBlock;if(f&&f.outputConnection&&f.nextConnection)return s.yPos+f.height/2}return super.getElemCenterline_(s,c)}addInput_(s,c){if(s.type===dn.DUMMY&&c.hasDummyInput&&c.align===t.Align$$module$build$src$core$input.LEFT&&s.align===t.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(c,s);else if(s.type===dn.STATEMENT){c.elements.push(new OG(this.constants_,s)),c.hasStatement=!0,c.align===null&&(c.align=s.align);return}super.addInput_(s,c)}addAlignmentPadding_(s,c){if(this.rightAlignedDummyInputs_.get(s)){let f;for(let _=0;_<s.elements.length;_++){const x=s.elements[_];if(ke.isSpacer(x)&&(f=x),ke.isField(x)&&x instanceof Fp&&x.parentInput===this.rightAlignedDummyInputs_.get(s))break}if(f){f.width+=c,s.width+=c;return}}super.addAlignmentPadding_(s,c)}adjustXPosition_(){const s=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let c=s;for(let x=2;x<this.rows.length-1;x+=2){var f=this.rows[x-1];const P=this.rows[x];var _=this.rows[x+1];if(f=x===2?!!this.topRow.hasPreviousConnection:!!f.followsStatement,_=x+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_.precedesStatement,ke.isInputRow(P)&&P.hasStatement){P.measure();let J,be;c=P.width-((be=(J=P.getLastInput())==null?void 0:J.width)!=null?be:0)+s}else if(f&&(x===2||_)&&ke.isInputRow(P)&&!P.hasStatement){_=P.xPos,f=null;for(let J=0;J<P.elements.length;J++){const be=P.elements[J];ke.isSpacer(be)&&(f=be),f&&(ke.isField(be)||ke.isInput(be))&&_<c&&!(ke.isField(be)&&be instanceof Fp&&(be.field instanceof t.FieldLabel$$module$build$src$core$field_label||be.field instanceof t.FieldImage$$module$build$src$core$field_image))&&(f.width+=c-_),_+=be.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var s=this.outputConnection.shape;if("isDynamic"in s&&s.isDynamic){for(var c=0,f=0;f<this.rows.length;f++){const _=this.rows[f];_.yPos=c,c+=_.height}this.height=c,f=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,c=s.height(f),f=s.width(f),this.outputConnection.height=c,this.outputConnection.width=f,this.outputConnection.startX=f,this.outputConnection.connectionOffsetY=s.connectionOffsetY(c),this.outputConnection.connectionOffsetX=s.connectionOffsetX(f),s=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(s=f,this.rightSide.height=c,this.rightSide.width=s,this.rightSide.centerline=c/2,this.rightSide.xPos=this.width+s),this.startX=f,this.width+=f+s,this.widthWithChildren+=f+s}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var s=0,c=0;c<this.rows.length;c++){var f=this.rows[c];if(!ke.isInputRow(f))continue;s=f.elements[f.elements.length-2];let _=this.getNegativeSpacing_(f.elements[1]),x=this.getNegativeSpacing_(s);s=_+x;const P=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-s<P&&(s=this.width-P,_=s/2,x=s/2),f.elements.unshift(new xa(this.constants_,-_)),f.elements.push(new xa(this.constants_,-x))}if(s)for(this.width-=s,this.widthWithChildren-=s,this.rightSide.xPos-=s,c=0;c<this.rows.length;c++)f=this.rows[c],ke.isTopOrBottomRow(f)&&(f.elements[1].width-=s),f.width-=s,f.widthWithConnectedBlocks-=s}}getNegativeSpacing_(s){if(!s||!this.outputConnection)return 0;const c=this.outputConnection.width;var f=this.outputConnection.shape.type;const _=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(f){case _.SHAPES.ROUND:return f=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=this.height/2>f?f:this.height/2,c-f*(1-Math.sin(Math.acos((f-this.constants_.SMALL_PADDING)/f)));default:return 0}if(ke.isInlineInput(s)&&s instanceof _h){const x=s.connectedBlock;return s=x?x.pathObject.outputShapeType:s.shape.type,s==null||x&&x.outputConnection&&(x.statementInputCount||x.nextConnection)||f===_.SHAPES.HEXAGONAL&&f!==s?0:c-this.constants_.SHAPE_IN_SHAPE_PADDING[f][s]}return ke.isField(s)&&s instanceof Fp?f===_.SHAPES.ROUND&&s.field instanceof t.FieldTextInput$$module$build$src$core$field_textinput?c-2.75*_.GRID_UNIT:c-this.constants_.SHAPE_IN_SHAPE_PADDING[f][0]:ke.isIcon(s)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let _=2;_<this.rows.length-1;_+=2){const x=this.rows[_-1],P=this.rows[_],J=this.rows[_+1];var s=_===2,c=_+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!J.precedesStatement;if(s?this.topRow.hasPreviousConnection:x.followsStatement){var f=P.elements[1];if(f=P.elements.length===3&&f instanceof Fp&&(f.field instanceof t.FieldLabel$$module$build$src$core$field_label||f.field instanceof t.FieldImage$$module$build$src$core$field_image),!s&&f)x.height-=this.constants_.SMALL_PADDING,J.height-=this.constants_.SMALL_PADDING,P.height-=this.constants_.MEDIUM_PADDING;else if(!s&&!c)x.height+=this.constants_.SMALL_PADDING;else if(c){for(s=!1,c=0;c<P.elements.length;c++)if(f=P.elements[c],f instanceof _h&&ke.isInlineInput(f)&&f.connectedBlock&&!f.connectedBlock.isShadow()&&40<=f.connectedBlock.getHeightWidth().height){s=!0;break}s&&(x.height-=this.constants_.SMALL_PADDING,J.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},SG=class extends FI{constructor(s,c,f){super(s,c,f),this.markerCircle_=null}showWithInputOutput_(s){const c=s.getSourceBlock();s=s.getLocation().getOffsetInBlock(),this.positionCircle_(s.x,s.y),this.setParent_(c),this.showCurrent_()}showWithOutput_(s){this.showWithInputOutput_(s)}showWithInput_(s){this.showWithInputOutput_(s)}showWithBlock_(s){s=s.getLocation();const c=s.getHeightWidth();this.positionRect_(0,0,c.width,c.height),this.setParent_(s),this.showCurrent_()}positionCircle_(s,c){let f;(f=this.markerCircle_)==null||f.setAttribute("cx",s.toString());let _;(_=this.markerCircle_)==null||_.setAttribute("cy",c.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=L(Re.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const s=this.getBlinkProperties_();L(Re.ANIMATE,s,this.markerCircle_)}return this.markerSvg_}applyColour_(s){super.applyColour_(s);let c;(c=this.markerCircle_)==null||c.setAttribute("fill",this.colour_);let f;if((f=this.markerCircle_)==null||f.setAttribute("stroke",this.colour_),this.isCursor()){s=this.colour_+";transparent;transparent;";let _;(_=this.markerCircle_)==null||_.firstElementChild.setAttribute("values",s)}}},TG=class extends Ew{constructor(s,c,f){super(s,c,f),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=f}setPath(s){super.setPath(s),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",s)}applyColour(s){super.applyColour(s);const c=s.getParent();s.isShadow()&&c&&this.svgPath.setAttribute("stroke",c.style.colourTertiary);for(const f of this.outlines.values())f.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const s of this.outlines.values())s.setAttribute("transform","scale(-1 1)")}updateSelected(s){this.setClass_("blocklySelected",s),s?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(s){this.setClass_("blocklyReplaceable",s),s?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(s,c){s=s.getParentInput().name,(s=this.getOutlinePath_(s))&&(c?s.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):s.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const s of this.outlines.keys())this.remainingOutlines.add(s)}endDrawing(){if(this.remainingOutlines.size)for(const s of this.remainingOutlines)this.removeOutlinePath_(s);this.remainingOutlines.clear()}setOutlinePath(s,c){s=this.getOutlinePath_(s),s.setAttribute("d",c),s.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(s){return this.outlines.has(s)||this.outlines.set(s,L(Re.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(s),this.outlines.get(s)}removeOutlinePath_(s){let c,f;(c=this.outlines.get(s))==null||(f=c.parentNode)==null||f.removeChild(this.outlines.get(s)),this.outlines.delete(s)}},wG=class extends by{constructor(s){super(s)}makeConstants_(){return new mG}makeRenderInfo_(s){return new bG(this,s)}makeDrawer_(s,c){return new gG(s,c)}makeMarkerDrawer(s,c){return new SG(s,this.getConstants(),c)}makePathObject(s,c){return new TG(s,c,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(s){return s.type!==xt.INPUT_VALUE&&s.type!==xt.OUTPUT_VALUE}getConnectionPreviewMethod(s,c,f){return c.type===xt.OUTPUT_VALUE?s.isConnected()?Ca.PREVIEW_TYPE.REPLACEMENT_FADE:Ca.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(s,c,f)}};zl("zelos",wG);var ec={};ec.BottomRow=_G,ec.ConstantProvider=mG,ec.Drawer=gG,ec.MarkerSvg=SG,ec.PathObject=TG,ec.RenderInfo=bG,ec.Renderer=wG,ec.RightConnectionShape=vG,ec.StatementInput=OG,ec.TopRow=yG;var EG=class extends x_{constructor(s,c){super(s,c)}getRenderer(){return this.renderer_}addElemSpacing_(){let s=!1;for(var c=0;c<this.rows.length;c++)if(this.rows[c].hasExternalInput){s=!0;break}for(c=0;c<this.rows.length;c++){const _=this.rows[c];var f=_.elements;if(_.elements=[],_.startsWithElemSpacer()&&_.elements.push(new xa(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let x=0;x<f.length-1;x++){_.elements.push(f[x]);const P=this.getInRowSpacing_(f[x],f[x+1]);_.elements.push(new xa(this.constants_,P))}_.elements.push(f[f.length-1]),_.endsWithElemSpacer()&&(f=this.getInRowSpacing_(f[f.length-1],null),s&&_.hasDummyInput&&(f+=this.constants_.TAB_WIDTH),_.elements.push(new xa(this.constants_,f)))}}}getInRowSpacing_(s,c){if(!s)return c&&ke.isField(c)&&c.isEditable?this.constants_.MEDIUM_PADDING:c&&ke.isInlineInput(c)?this.constants_.MEDIUM_LARGE_PADDING:c&&ke.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ke.isInput(s)&&!c)return ke.isField(s)&&s.isEditable?this.constants_.MEDIUM_PADDING:ke.isIcon(s)?2*this.constants_.LARGE_PADDING+1:ke.isHat(s)?this.constants_.NO_PADDING:ke.isPreviousOrNextConnection(s)?this.constants_.LARGE_PADDING:ke.isLeftRoundedCorner(s)?this.constants_.MIN_BLOCK_WIDTH:ke.isJaggedEdge(s)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ke.isInput(s)&&!c){if(ke.isExternalInput(s))return this.constants_.NO_PADDING;if(ke.isInlineInput(s))return this.constants_.LARGE_PADDING;if(ke.isStatementInput(s))return this.constants_.NO_PADDING}if(!ke.isInput(s)&&c&&ke.isInput(c)){if(ke.isField(s)&&s.isEditable){if(ke.isInlineInput(c)||ke.isExternalInput(c))return this.constants_.SMALL_PADDING}else{if(ke.isInlineInput(c)||ke.isExternalInput(c))return this.constants_.MEDIUM_LARGE_PADDING;if(ke.isStatementInput(c))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ke.isIcon(s)&&c&&!ke.isInput(c))return this.constants_.LARGE_PADDING;if(ke.isInlineInput(s)&&c&&ke.isField(c))return c.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ke.isLeftSquareCorner(s)&&c){if(ke.isHat(c))return this.constants_.NO_PADDING;if(ke.isPreviousConnection(c)||ke.isNextConnection(c))return c.notchOffset}return ke.isLeftRoundedCorner(s)&&c?c.notchOffset-this.constants_.CORNER_RADIUS:ke.isField(s)&&c&&ke.isField(c)&&s.isEditable===c.isEditable||c&&ke.isJaggedEdge(c)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(s,c){return ke.isTopRow(s)&&ke.isBottomRow(c)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ke.isTopRow(s)||ke.isBottomRow(c)?this.constants_.NO_PADDING:s.hasExternalInput&&c.hasExternalInput?this.constants_.LARGE_PADDING:!s.hasStatement&&c.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:s.hasStatement&&c.hasStatement||s.hasDummyInput||c.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(s,c){if(ke.isSpacer(c))return s.yPos+c.height/2;if(ke.isBottomRow(s))return s=s.yPos+s.height-s.descenderHeight,ke.isNextConnection(c)?s+c.height/2:s-c.height/2;if(ke.isTopRow(s))return ke.isHat(c)?s.capline-c.height/2:s.capline+c.height/2;let f=s.yPos;return f=ke.isField(c)&&s.hasStatement?f+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+c.height/2):f+s.height/2}finalize_(){let s=0,c=0;for(var f=0;f<this.rows.length;f++){const x=this.rows[f];x.yPos=c,x.xPos=this.startX,c+=x.height,s=Math.max(s,x.widthWithConnectedBlocks);var _=c-this.topRow.ascenderHeight;x===this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(_=this.constants_.MIN_BLOCK_HEIGHT-_,this.bottomRow.height+=_,c+=_),this.recordElemPositions_(x)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(s=Math.max(s,f.getHeightWidth().width)),this.bottomRow.baseline=c-this.bottomRow.descenderHeight,this.widthWithChildren=s+this.startX,this.height=c,this.startY=this.topRow.capline}},xG=class extends by{constructor(s){super(s)}makeRenderInfo_(s){return new EG(this,s)}};zl("thrasos",xG);var VI={};VI.RenderInfo=EG,VI.Renderer=xG;var $G=class extends vy{constructor(){super()}},CG=class extends yy{constructor(s,c){super(s,c)}},AG=class extends x_{constructor(s,c){super(s,c)}getRenderer(){return this.renderer_}},kG=class extends by{constructor(s){super(s)}makeConstants_(){return new $G}makeRenderInfo_(s){return new AG(this,s)}makeDrawer_(s,c){return new CG(s,c)}};zl("minimalist",kG);var Ty={};Ty.ConstantProvider=$G,Ty.Drawer=CG,Ty.RenderInfo=AG,Ty.Renderer=kG;var IG=class extends vy{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(s){return super.getCSS_(s).concat([`${s} .blocklyInsertionMarker>.blocklyPathLight,`,`${s} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},RG=class{constructor(s){this.inlineSteps_=this.steps_="",this.info_=s,this.RTL_=this.info_.RTL,s=s.getRenderer(),this.constants_=s.getConstants(),this.highlightConstants_=s.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(s){this.steps_+=oi(s.xPos,this.info_.startY);for(let c=0,f;f=s.elements[c];c++)ke.isLeftSquareCorner(f)?this.steps_+=this.highlightConstants_.START_POINT:ke.isLeftRoundedCorner(f)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ke.isPreviousConnection(f)?this.steps_+=this.notchPaths_.pathLeft:ke.isHat(f)?this.steps_+=this.startPaths_.path(this.RTL_):ke.isSpacer(f)&&f.width!==0&&(this.steps_+=Tt("H",f.xPos+f.width-this.highlightOffset_));this.steps_+=Tt("H",s.xPos+s.width-this.highlightOffset_)}drawJaggedEdge_(s){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Tt("v",s.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(s){const c=s.getLastInput();if(this.RTL_){const f=s.height-c.connectionHeight;this.steps_+=zr(c.xPos+c.width-this.highlightOffset_,s.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Tt("v",f)}else this.steps_+=zr(c.xPos+c.width,s.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(s){const c=s.getLastInput();if(c)if(this.RTL_){const f=s.height-2*this.insideCornerPaths_.height;this.steps_+=zr(c.xPos,s.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Tt("v",f)+this.insideCornerPaths_.pathBottom(this.RTL_)+ol(s.width-c.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=zr(c.xPos,s.yPos+s.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+ol(s.width-c.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(s){const c=s.xPos+s.width-this.highlightOffset_;s instanceof LI&&s.followsStatement&&(this.steps_+=Tt("H",c)),this.RTL_&&(this.steps_+=Tt("H",c),s.height>this.highlightOffset_&&(this.steps_+=Tt("V",s.yPos+s.height-this.highlightOffset_)))}drawBottomRow(s){if(this.RTL_)this.steps_+=Tt("V",s.baseline-this.highlightOffset_);else{const c=this.info_.bottomRow.elements[0];ke.isLeftSquareCorner(c)?this.steps_+=zr(s.xPos+this.highlightOffset_,s.baseline-this.highlightOffset_):ke.isLeftRoundedCorner(c)&&(this.steps_+=zr(s.xPos,s.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var s=this.info_.outputConnection;s&&(s=s.connectionOffsetY+s.height,this.RTL_?this.steps_+=zr(this.info_.startX,s):(this.steps_+=zr(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=Tt("V",s)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(s=this.info_.topRow,ke.isLeftRoundedCorner(s.elements[0])?this.steps_+=Tt("V",this.outsideCornerPaths_.height):this.steps_+=Tt("V",s.capline+this.highlightOffset_))}drawInlineInput(s){const c=this.highlightOffset_,f=s.xPos+s.connectionWidth;var _=s.centerline-s.height/2;const x=s.width-s.connectionWidth,P=_+c;this.RTL_?(_=s.connectionOffsetY-c,s=s.height-(s.connectionOffsetY+s.connectionHeight)+c,this.inlineSteps_+=zr(f-c,P)+Tt("v",_)+this.puzzleTabPaths_.pathDown(this.RTL_)+Tt("v",s)+Tt("h",x)):this.inlineSteps_+=zr(s.xPos+s.width+c,P)+Tt("v",s.height)+Tt("h",-x)+zr(f,_+s.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},MG=class extends yy{constructor(s,c){super(s,c),this.highlighter_=new RG(c)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const s=this.block_.pathObject;if(s.setPath(this.outlinePath_+`
`+this.inlinePath_),s.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&s.flipRTL(),Wl()){let c,f;(c=this.block_)==null||(f=c.renderingDebugger)==null||f.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(s){this.highlighter_.drawJaggedEdge_(s),super.drawJaggedEdge_(s)}drawValueInput_(s){this.highlighter_.drawValueInput(s),super.drawValueInput_(s)}drawStatementInput_(s){this.highlighter_.drawStatementInput(s),super.drawStatementInput_(s)}drawRightSideRow_(s){this.highlighter_.drawRightSideRow(s),this.outlinePath_+=Tt("H",s.xPos+s.width)+Tt("V",s.yPos+s.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(s){this.highlighter_.drawInlineInput(s),super.drawInlineInput_(s)}positionInlineInputConnection_(s){const c=s.centerline-s.height/2;if(s.connectionModel){let f=s.xPos+s.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),s.connectionModel.setOffsetInBlock(f,c+s.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(s){const c=s.getLastInput();if(c!=null&&c.connectionModel){let f=s.xPos+s.statementEdge+c.notchOffset;f=this.info_.RTL?-1*f:f+this.constants_.DARK_PATH_OFFSET,c.connectionModel.setOffsetInBlock(f,s.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(s){const c=s.getLastInput();if(c&&c.connectionModel){let f=s.xPos+s.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),c.connectionModel.setOffsetInBlock(f,s.yPos)}}positionNextConnection_(){const s=this.info_.bottomRow;if(s.connection){const c=s.connection,f=c.xPos;c.connectionModel.setOffsetInBlock((this.info_.RTL?-f:f)+this.constants_.DARK_PATH_OFFSET/2,s.baseline+this.constants_.DARK_PATH_OFFSET)}}},PG=class{constructor(s){this.OFFSET=.5,this.constantProvider=s,this.START_POINT=oi(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const s=this.constantProvider.CORNER_RADIUS,c=this.OFFSET,f=(1-Math.SQRT1_2)*(s+c)-c,_=oi(f,f)+Vi("a","0 0,0",s,Ft(-f-c,s-f)),x=Vi("a","0 0,0",s+c,Ft(s+c,s+c)),P=oi(f,-f)+Vi("a","0 0,0",s+c,Ft(s-f,f+c));return{width:s+c,height:s,pathTop(J){return J?_:""},pathBottom(J){return J?x:P}}}makeOutsideCorner(){const s=this.constantProvider.CORNER_RADIUS,c=this.OFFSET,f=(1-Math.SQRT1_2)*(s-c)+c,_=oi(f,f)+Vi("a","0 0,1",s-c,Ft(s-f,-f+c)),x=oi(c,s)+Vi("a","0 0,1",s-c,Ft(s,-s+c)),P=-f,J=oi(f,P)+Vi("a","0 0,1",s-c,Ft(-f+c,-P-s));return{height:s,topLeft(be){return be?_:x},bottomLeft(){return J}}}makePuzzleTab(){const s=this.constantProvider.TAB_WIDTH,c=this.constantProvider.TAB_HEIGHT,f=oi(-2,-c+3.4)+ol(-.45*s,-2.1),_=Tt("v",2.5)+oi(.97*-s,2.5)+yo("q",[Ft(.05*-s,10),Ft(.3*s,9.5)])+oi(.67*s,-1.9)+Tt("v",2.5),x=Tt("v",-1.5)+oi(-.92*s,-.5)+yo("q",[Ft(-.19*s,-5.5),Ft(0,-11)])+oi(.92*s,1),P=oi(-5,c-.7)+ol(.46*s,-2.1);return{width:s,height:c,pathUp(J){return J?f:x},pathDown(J){return J?_:P}}}makeNotch(){return{pathLeft:Tt("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:ol(5.1,2.6)+oi(-10.2,6.8)+ol(5.1,2.6),height:12,width:10.2}}makeStartHat(){const s=this.constantProvider.START_HAT.height,c=oi(25,-8.7)+yo("c",[Ft(29.7,-6.2),Ft(57.2,-.5),Ft(75,8.7)]),f=yo("c",[Ft(17.8,-9.2),Ft(45.3,-14.9),Ft(75,-8.7)])+zr(100.5,s+.5);return{path(_){return _?c:f}}}},DG=class extends PI{constructor(s,c){super(s,c),this.constants_=s,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},LG=class extends gy{constructor(s,c){super(s,c),this.constants_=s,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},NG=class extends x_{constructor(s,c){super(s,c),this.renderer_=s}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===dn.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(s,c){this.isInline&&s.type===dn.VALUE?(c.elements.push(new DG(this.constants_,s)),c.hasInlineInput=!0):s.type===dn.STATEMENT?(c.elements.push(new LG(this.constants_,s)),c.hasStatement=!0):s.type===dn.VALUE?(c.elements.push(new ww(this.constants_,s)),c.hasExternalInput=!0):s.type===dn.DUMMY&&(c.minHeight=Math.max(c.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),c.hasDummyInput=!0),this.isInline||c.align!==null||(c.align=s.align)}addElemSpacing_(){let s=!1;for(let f=0,_;_=this.rows[f];f++)_.hasExternalInput&&(s=!0);for(let f=0,_;_=this.rows[f];f++){var c=_.elements;if(_.elements=[],_.startsWithElemSpacer()&&_.elements.push(new xa(this.constants_,this.getInRowSpacing_(null,c[0]))),c.length){for(let x=0;x<c.length-1;x++){_.elements.push(c[x]);const P=this.getInRowSpacing_(c[x],c[x+1]);_.elements.push(new xa(this.constants_,P))}_.elements.push(c[c.length-1]),_.endsWithElemSpacer()&&(c=this.getInRowSpacing_(c[c.length-1],null),s&&_.hasDummyInput&&(c+=this.constants_.TAB_WIDTH),_.elements.push(new xa(this.constants_,c)))}}}getInRowSpacing_(s,c){if(!s)return c&&ke.isField(c)&&c.isEditable?this.constants_.MEDIUM_PADDING:c&&ke.isInlineInput(c)?this.constants_.MEDIUM_LARGE_PADDING:c&&ke.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ke.isInput(s)&&(!c||ke.isStatementInput(c)))return ke.isField(s)&&s.isEditable?this.constants_.MEDIUM_PADDING:ke.isIcon(s)?2*this.constants_.LARGE_PADDING+1:ke.isHat(s)?this.constants_.NO_PADDING:ke.isPreviousOrNextConnection(s)?this.constants_.LARGE_PADDING:ke.isLeftRoundedCorner(s)?this.constants_.MIN_BLOCK_WIDTH:ke.isJaggedEdge(s)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ke.isInput(s)&&!c){if(ke.isExternalInput(s))return this.constants_.NO_PADDING;if(ke.isInlineInput(s))return this.constants_.LARGE_PADDING;if(ke.isStatementInput(s))return this.constants_.NO_PADDING}if(!ke.isInput(s)&&c&&ke.isInput(c)){if(ke.isField(s)&&s.isEditable){if(ke.isInlineInput(c)||ke.isExternalInput(c))return this.constants_.SMALL_PADDING}else{if(ke.isInlineInput(c)||ke.isExternalInput(c))return this.constants_.MEDIUM_LARGE_PADDING;if(ke.isStatementInput(c))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ke.isIcon(s)&&c&&!ke.isInput(c))return this.constants_.LARGE_PADDING;if(ke.isInlineInput(s)&&c&&ke.isField(c))return c.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ke.isLeftSquareCorner(s)&&c){if(ke.isHat(c))return this.constants_.NO_PADDING;if(ke.isPreviousConnection(c))return c.notchOffset;if(ke.isNextConnection(c))return c.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ke.isLeftRoundedCorner(s)&&c){if(ke.isPreviousConnection(c))return c.notchOffset-this.constants_.CORNER_RADIUS;if(ke.isNextConnection(c))return c.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ke.isField(s)&&c&&ke.isField(c)&&s.isEditable===c.isEditable||c&&ke.isJaggedEdge(c)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(s,c){return ke.isTopRow(s)&&ke.isBottomRow(c)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ke.isTopRow(s)||ke.isBottomRow(c)?this.constants_.NO_PADDING:s.hasExternalInput&&c.hasExternalInput?this.constants_.LARGE_PADDING:!s.hasStatement&&c.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:s.hasStatement&&c.hasStatement||!s.hasStatement&&c.hasDummyInput||s.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(s,c){if(ke.isSpacer(c))return s.yPos+c.height/2;if(ke.isBottomRow(s))return s=s.yPos+s.height-s.descenderHeight,ke.isNextConnection(c)?s+c.height/2:s-c.height/2;if(ke.isTopRow(s))return ke.isHat(c)?s.capline-c.height/2:s.capline+c.height/2;let f=s.yPos;return ke.isField(c)||ke.isIcon(c)?(f+=c.height/2,(s.hasInlineInput||s.hasStatement)&&c.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=s.height&&(f+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):f=ke.isInlineInput(c)?f+c.height/2:f+s.height/2,f}alignRowElements_(){if(this.isInline){var s=0,c=new WeakMap,f=null;for(let _=this.rows.length-1,x;x=this.rows[_];_--)c.set(x,s),ke.isInputRow(x)&&(x.hasStatement&&this.alignStatementRow_(x),f&&f.hasStatement&&x.width<f.width?c.set(x,f.width):s=x.width,f=x);s=0;for(let _=0,x;x=this.rows[_];_++)x.hasStatement?s=this.getDesiredRowWidth_(x):ke.isSpacer(x)?x.width=Math.max(s,c.get(x)):(f=x.width,s=Math.max(s,c.get(x))-f,0<s&&this.addAlignmentPadding_(x,s),s=x.width)}else super.alignRowElements_()}getDesiredRowWidth_(s){return this.isInline&&s.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(s)}finalize_(){let s=0,c=0;for(let _=0,x;x=this.rows[_];_++){x.yPos=c,x.xPos=this.startX,c+=x.height,s=Math.max(s,x.widthWithConnectedBlocks);var f=c-this.topRow.ascenderHeight;x===this.bottomRow&&f<this.constants_.MIN_BLOCK_HEIGHT&&(f=this.constants_.MIN_BLOCK_HEIGHT-f,this.bottomRow.height+=f,c+=f),this.recordElemPositions_(x)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(s=Math.max(s,f.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=c-this.bottomRow.descenderHeight,this.widthWithChildren=s+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=c+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},BG=class extends Ew{constructor(s,c,f){super(s,c,f),this.constants=f,this.colourDark="#000000",this.svgPathDark=L(Re.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=L(Re.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(s){this.svgPath.setAttribute("d",s),this.svgPathDark.setAttribute("d",s)}setHighlightPath(s){this.svgPathLight.setAttribute("d",s)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(s){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(s),this.svgPath.setAttribute("stroke","none")}setStyle(s){this.style=s,this.colourDark=ya("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(s){s?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(s){if(s){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(s){super.updateDisabled_(s),s&&this.svgPath.setAttribute("stroke","none")}},FG=class extends by{constructor(s){super(s),this.highlightConstants_=null}init(s,c){super.init(s,c),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(s,c){super.refreshDom(s,c),this.getHighlightConstants().init()}makeConstants_(){return new IG}makeRenderInfo_(s){return new NG(this,s)}makeDrawer_(s,c){return new MG(s,c)}makePathObject(s,c){return new BG(s,c,this.getConstants())}makeHighlightConstants_(){return new PG(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};zl("geras",FG);var Kc={};Kc.ConstantProvider=IG,Kc.Drawer=MG,Kc.HighlightConstantProvider=PG,Kc.Highlighter=RG,Kc.InlineInput=DG,Kc.PathObject=BG,Kc.RenderInfo=NG,Kc.Renderer=FG,Kc.StatementInput=LG;var UG=class{constructor(s){this.container=s,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=L(Re.SVG,{xmlns:So,"xmlns:html":Ea,"xmlns:xlink":Zo,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(s,c){s=Math.round(s),c=Math.round(c),this.SVG.style.display="block",Xe(this.SVG,"translate3d("+s+"px, "+c+"px, 0)")}getSurfaceTranslation(){return xr(this.SVG)}clearAndHide(s){if(!s)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const c=this.SVG.childNodes[0],f=this.SVG.childNodes[1];if(!c||!f||!c.classList.contains("blocklyBlockCanvas")&&f.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?xe(c,this.previousSibling):s.insertBefore(c,s.firstChild),xe(f,c),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");Xe(this.SVG,""),this.previousSibling=null}setContentsAndShow(s,c,f,_,x,P){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=f,s.setAttribute("transform","translate(0, 0) scale("+P+")"),c.setAttribute("transform","translate(0, 0) scale("+P+")"),this.SVG.setAttribute("width",String(_)),this.SVG.setAttribute("height",String(x)),this.SVG.appendChild(s),this.SVG.appendChild(c),this.SVG.style.display="block"}},GG=class{constructor(s){this.container=s,this.scale=1,this.surfaceXY=new _t(0,0),this.childSurfaceXY=new _t(0,0),this.svg=L(Re.SVG,{xmlns:So,"xmlns:html":Ea,"xmlns:xlink":Zo,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=L(Re.G,{},this.svg)}createDom(){i("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(s){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(s),this.svg.style.display="block",this.surfaceXY=new _t(0,0)}translateAndScaleGroup(s,c,f){this.scale=f,s=Math.round(s),c=Math.round(c),this.childSurfaceXY.x=s,this.childSurfaceXY.y=c,this.dragGroup.setAttribute("transform","translate("+s+","+c+") scale("+f+")")}translateSurfaceInternal_(){const s=Math.round(this.surfaceXY.x),c=Math.round(this.surfaceXY.y);this.svg.style.display="block",Xe(this.svg,"translate3d("+s+"px, "+c+"px, 0)")}translateBy(s,c){this.surfaceXY=new _t(this.surfaceXY.x+s,this.surfaceXY.y+c),this.translateSurfaceInternal_()}translateSurface(s,c){this.surfaceXY=new _t(s*this.scale,c*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const s=xr(this.svg);return new _t(s.x/this.scale,s.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(s){const c=this.getCurrentBlock();if(c&&(s?s.appendChild(c):this.dragGroup.removeChild(c)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new _t(0,0)}},xw={};xw.bumpIntoBounds=kd,xw.bumpIntoBoundsHandler=Tp,xw.bumpTopObjectsIntoBounds=Vr;var HI=class{constructor(s,c,f,_,x){this.workspace=s,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,c=c===void 0?!0:c,f=f===void 0?!0:f;const P=c&&f;c&&(this.hScroll=new Ni(s,!0,P,_,x)),f&&(this.vScroll=new Ni(s,!1,P,_,x)),P&&(this.corner_=L(Re.RECT,{height:Ni.scrollbarThickness,width:Ni.scrollbarThickness,class:"blocklyScrollbarBackground"}),xe(this.corner_,s.getBubbleCanvas()))}dispose(){ye(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const s=this.workspace.getMetrics();if(s){var c=!1,f=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===s.viewWidth&&this.oldHostMetrics_.viewHeight===s.viewHeight&&this.oldHostMetrics_.absoluteTop===s.absoluteTop&&this.oldHostMetrics_.absoluteLeft===s.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===s.scrollWidth&&this.oldHostMetrics_.viewLeft===s.viewLeft&&this.oldHostMetrics_.scrollLeft===s.scrollLeft||(c=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===s.scrollHeight&&this.oldHostMetrics_.viewTop===s.viewTop&&this.oldHostMetrics_.scrollTop===s.scrollTop||(f=!0)):f=c=!0,c||f){try{cn(),this.hScroll&&c&&this.hScroll.resize(s),this.vScroll&&f&&this.vScroll.resize(s)}finally{rt()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==s.viewWidth||this.oldHostMetrics_.absoluteLeft!==s.absoluteLeft){let _;(_=this.corner_)==null||_.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==s.viewHeight||this.oldHostMetrics_.absoluteTop!==s.absoluteTop){let _;(_=this.corner_)==null||_.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=s}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(s,c){this.hScroll&&this.hScroll.setOrigin(s,c),this.vScroll&&this.vScroll.setOrigin(s,c)}set(s,c,f){this.hScroll&&this.hScroll.set(s,!1),this.vScroll&&this.vScroll.set(c,!1),(f||f===void 0)&&(s={},this.hScroll&&(s.x=this.hScroll.getRatio_()),this.vScroll&&(s.y=this.vScroll.getRatio_()),this.workspace.setMetrics(s))}setX(s){this.hScroll&&this.hScroll.set(s,!0)}setY(s){this.vScroll&&this.vScroll.set(s,!0)}setContainerVisible(s){this.hScroll&&this.hScroll.setContainerVisible(s),this.vScroll&&this.vScroll.setContainerVisible(s)}isVisible(){let s=!1;return this.hScroll&&(s=this.hScroll.isVisible()),this.vScroll&&(s=s||this.vScroll.isVisible()),s}resizeContent(s){this.hScroll&&this.hScroll.resizeContentHorizontal(s),this.vScroll&&this.vScroll.resizeContentVertical(s)}resizeView(s){this.hScroll&&this.hScroll.resizeViewHorizontal(s),this.vScroll&&this.vScroll.resizeViewVertical(s)}},WG=!1;t.CodeGenerator$$module$build$src$core$generator=class{constructor(s){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=s,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(s){s||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),s=B());var c=[];this.init(s),s=s.getTopBlocks(!0);for(let f=0,_;_=s[f];f++){let x=this.blockToCode(_);Array.isArray(x)&&(x=x[0]),x&&(_.outputConnection&&(x=this.scrubNakedValue(x),this.STATEMENT_PREFIX&&!_.suppressPrefixSuffix&&(x=this.injectId(this.STATEMENT_PREFIX,_)+x),this.STATEMENT_SUFFIX&&!_.suppressPrefixSuffix&&(x+=this.injectId(this.STATEMENT_SUFFIX,_))),c.push(x))}return c=c.join(`
`),c=this.finish(c),c=c.replace(/^\s+\n/,""),c=c.replace(/\n\s+$/,`
`),c=c.replace(/[ \t]+\n/g,`
`)}prefixLines(s,c){return c+s.replace(/(?!\n$)\n/g,`
`+c)}allNestedComments(s){const c=[];s=s.getDescendants(!0);for(let f=0;f<s.length;f++){const _=s[f].getCommentText();_&&c.push(_)}return c.length&&c.push(""),c.join(`
`)}blockToCode(s,c){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!s)return"";if(!s.isEnabled())return c?"":this.blockToCode(s.getNextBlock());if(s.isInsertionMarker())return c?"":this.blockToCode(s.getChildren(!1)[0]);var f=this[s.type];if(typeof f!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+s.type+'".');if(f=f.call(s,s),Array.isArray(f)){if(!s.outputConnection)throw TypeError("Expecting string from statement block: "+s.type);return[this.scrub_(s,f[0],c),f[1]]}if(typeof f=="string")return this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(f=this.injectId(this.STATEMENT_PREFIX,s)+f),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(f+=this.injectId(this.STATEMENT_SUFFIX,s)),this.scrub_(s,f,c);if(f===null)return"";throw SyntaxError("Invalid code generated: "+f)}valueToCode(s,c,f){if(isNaN(f))throw TypeError("Expecting valid order from block: "+s.type);var _=s.getInputTargetBlock(c);if(!_||(c=this.blockToCode(_),c===""))return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+_.type);if(s=c[0],c=c[1],isNaN(c))throw TypeError("Expecting valid order from value block: "+_.type);if(!s)return"";_=!1;var x=Math.floor(f);const P=Math.floor(c);if(x<=P&&(x!==P||x!==0&&x!==99)){for(_=!0,x=0;x<this.ORDER_OVERRIDES.length;x++)if(this.ORDER_OVERRIDES[x][0]===f&&this.ORDER_OVERRIDES[x][1]===c){_=!1;break}}return _&&(s="("+s+")"),s}statementToCode(s,c){if(s=s.getInputTargetBlock(c),c=this.blockToCode(s),typeof c!="string")throw TypeError("Expecting code from statement block: "+(s&&s.type));return c&&(c=this.prefixLines(c,this.INDENT)),c}addLoopTrap(s,c){return this.INFINITE_LOOP_TRAP&&(s=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,c),this.INDENT)+s),this.STATEMENT_SUFFIX&&!c.suppressPrefixSuffix&&(s=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,c),this.INDENT)+s),this.STATEMENT_PREFIX&&!c.suppressPrefixSuffix&&(s+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,c),this.INDENT)),s}injectId(s,c){return c=c.id.replace(/\$/g,"$$$$"),s.replace(/%1/g,"'"+c+"'")}addReservedWords(s){this.RESERVED_WORDS_+=s+","}provideFunction_(s,c){if(!this.definitions_[s]){const f=this.nameDB_.getDistinctName(s,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[s]=f,Array.isArray(c)&&(c=c.join(`
`)),c=c.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,f);let _;for(;_!==c;)_=c,c=c.replace(/^(( {2})*) {2}/gm,"$1\0");c=c.replace(/\0/g,this.INDENT),this.definitions_[s]=c}return this.functionNames_[s]}init(s){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(s,c,f){return c}finish(s){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),s}scrubNakedValue(s){return s}},Object.defineProperties(t.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return i("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(s){i("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=s}}}),t.CodeGenerator$$module$build$src$core$generator;var $_=class{constructor(s,c,f,_){this.workspace=s,this.targetWorkspace=c,this.isLabel_=_,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=f.text,this.position_=new _t(0,0),this.callbackKey_=f.callbackKey||f.callbackkey,this.cssClass_=f["web-class"]||null,this.info=f}createDom(){var s=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(s+=" "+this.cssClass_),this.svgGroup_=L(Re.G,{class:s},this.workspace.getCanvas());let c;this.isLabel_||(c=L(Re.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),s=L(Re.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const f=L(Re.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var _=gi(this.text_);this.workspace.RTL&&(_+=""),f.textContent=_,this.isLabel_&&(this.svgText_=f,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const x=Y(f,"fontSize"),P=Y(f,"fontWeight"),J=Y(f,"fontFamily");if(this.width=Ee(f,x,P,J),_=Oe(_,x,P,J),this.height=_.height,!this.isLabel_){this.width+=2*$_.TEXT_MARGIN_X,this.height+=2*$_.TEXT_MARGIN_Y;let be;(be=c)==null||be.setAttribute("width",this.width.toString());let tt;(tt=c)==null||tt.setAttribute("height",this.height.toString())}return s.setAttribute("width",this.width.toString()),s.setAttribute("height",this.height.toString()),f.setAttribute("x",(this.width/2).toString()),f.setAttribute("y",(this.height/2-_.height/2+_.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=v(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(s,c){this.position_.x=s,this.position_.y=c,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&S(this.onMouseUpWrapper_),this.svgGroup_&&ye(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(s){(s=this.targetWorkspace.getGesture(s))&&s.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(s=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&s(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};$_.TEXT_MARGIN_X=5,$_.TEXT_MARGIN_Y=2,Ys(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var XI=class{constructor(s){this.workspace_=s}getDimensionsPx_(s){let c=0,f=0;return s&&(c=s.getWidth(),f=s.getHeight()),new ps(c,f)}getFlyoutMetrics(s){return s=this.getDimensionsPx_(this.workspace_.getFlyout(s)),{width:s.width,height:s.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const s=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:s.width,height:s.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let s=0;const c=this.getToolboxMetrics(),f=this.getFlyoutMetrics(!0),_=!!this.workspace_.getToolbox(),x=!!this.workspace_.getFlyout(!0);var P=_?c.position:f.position,J=P===sn.LEFT;return P=P===sn.TOP,_&&J?s=c.width:x&&J&&(s=f.width),J=0,_&&P?J=c.height:x&&P&&(J=f.height),{top:J,left:s}}getViewMetrics(s){s=s?this.workspace_.scale:1;const c=this.getSvgMetrics(),f=this.getToolboxMetrics(),_=this.getFlyoutMetrics(!0),x=this.workspace_.getToolbox()?f.position:_.position;return this.workspace_.getToolbox()?x===sn.TOP||x===sn.BOTTOM?c.height-=f.height:(x===sn.LEFT||x===sn.RIGHT)&&(c.width-=f.width):this.workspace_.getFlyout(!0)&&(x===sn.TOP||x===sn.BOTTOM?c.height-=_.height:(x===sn.LEFT||x===sn.RIGHT)&&(c.width-=_.width)),{height:c.height/s,width:c.width/s,top:-this.workspace_.scrollY/s,left:-this.workspace_.scrollX/s}}getContentMetrics(s){s=s?1:this.workspace_.scale;const c=this.workspace_.getBlocksBoundingBox();return{height:(c.bottom-c.top)*s,width:(c.right-c.left)*s,top:c.top*s,left:c.left*s}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(s){if(!this.hasFixedEdges())return{};const c=this.workspace_.isMovableHorizontally(),f=this.workspace_.isMovableVertically();s=s||this.getViewMetrics(!1);const _={};return f||(_.top=s.top,_.bottom=s.top+s.height),c||(_.left=s.left,_.right=s.left+s.width),_}getPaddedContent_(s,c){const f=c.top+c.height,_=c.left+c.width,x=s.width;s=s.height;const P=x/2,J=s/2;return{top:Math.min(c.top-J,f-s),bottom:Math.max(f+J,c.top+s),left:Math.min(c.left-P,_-x),right:Math.max(_+P,c.left+x)}}getScrollMetrics(s,c,f){s=s?this.workspace_.scale:1,c=c||this.getViewMetrics(!1);var _=f||this.getContentMetrics();f=this.getComputedFixedEdges_(c),c=this.getPaddedContent_(c,_),_=f.top!==void 0?f.top:c.top;const x=f.left!==void 0?f.left:c.left;return{top:_/s,left:x/s,width:((f.right!==void 0?f.right:c.right)-x)/s,height:((f.bottom!==void 0?f.bottom:c.bottom)-_)/s}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const s=this.getToolboxMetrics(),c=this.getFlyoutMetrics(!0),f=this.getSvgMetrics(),_=this.getAbsoluteMetrics(),x=this.getViewMetrics(),P=this.getContentMetrics(),J=this.getScrollMetrics(!1,x,P);return{contentHeight:P.height,contentWidth:P.width,contentTop:P.top,contentLeft:P.left,scrollHeight:J.height,scrollWidth:J.width,scrollTop:J.top,scrollLeft:J.left,viewHeight:x.height,viewWidth:x.width,viewTop:x.top,viewLeft:x.left,absoluteTop:_.top,absoluteLeft:_.left,svgHeight:f.height,svgWidth:f.width,toolboxWidth:s.width,toolboxHeight:s.height,toolboxPosition:s.position,flyoutWidth:c.width,flyoutHeight:c.height}}};Bt(ct.METRICS_MANAGER,uh,XI);var zG=class extends XI{constructor(s,c){super(s),this.flyout_=c}getBoundingBox_(){let s;try{s=this.workspace_.getCanvas().getBBox()}catch{s={height:0,y:0,width:0,x:0}}return s}getContentMetrics(s){const c=this.getBoundingBox_();return s=s?1:this.workspace_.scale,{height:c.height*s,width:c.width*s,top:c.y*s,left:c.x*s}}getScrollMetrics(s,c,f){return c=f||this.getContentMetrics(),f=this.flyout_.MARGIN*this.workspace_.scale,s=s?this.workspace_.scale:1,{height:(c.height+2*f)/s,width:(c.width+c.left+f)/s,top:0,left:0}}},C_;(function(s){s.BLOCK="block",s.BUTTON="button"})(C_||(C_={}));var $w=class extends yw{constructor(s){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,s.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Kl(s),this.workspace_.setMetricsManager(new zG(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Jt(),this.RTL=!!s.RTL,this.toolboxPosition_=s.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(s){return this.svgGroup_=L(s,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=L(Re.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(s){this.targetWorkspace=s,this.workspace_.targetWorkspace=s,this.workspace_.scrollbar=new HI(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,v(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,v(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),s.getComponentManager().addComponent({component:this,weight:1,capabilities:[ms.Capability.DELETE_AREA,ms.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),S(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(ye(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(s){const c=s!==this.isVisible();this.isVisible_=s,c&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(s){const c=s!==this.containerVisible_;this.containerVisible_=s,c&&this.updateDisplay_()}updateDisplay_(){let s;s=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=s?"block":"none");let c;(c=this.workspace_.scrollbar)==null||c.setContainerVisible(s)}positionAt_(s,c,f,_){let x;(x=this.svgGroup_)==null||x.setAttribute("width",s.toString());let P;(P=this.svgGroup_)==null||P.setAttribute("height",c.toString()),this.workspace_.setCachedParentSvgSize(s,c);let J;if(((J=this.svgGroup_)==null?void 0:J.tagName)==="svg")Xe(this.svgGroup_,"translate("+f+"px,"+_+"px)");else{let be;(be=this.svgGroup_)==null||be.setAttribute("transform","translate("+f+","+_+")")}(s=this.workspace_.scrollbar)&&(s.setOrigin(f,_),s.resize(),s.hScroll&&s.hScroll.setPosition(s.hScroll.position.x,s.hScroll.position.y),s.vScroll&&s.vScroll.setPosition(s.vScroll.position.x,s.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let s=0,c;c=this.listeners_[s];s++)S(c);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(s){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof s=="string"&&(s=this.getDynamicCategoryContents_(s)),this.setVisible(!0),s=vd(s),s=this.createFlyoutInfo_(s),this.layout_(s.contents,s.gaps),this.listeners_.push(v(this.svgBackground_,"pointerover",this,function(){const c=this.workspace_.getTopBlocks(!1);for(let f=0,_;_=c[f];f++)_.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(s){const c=[],f=[];this.permanentlyDisabled_.length=0;const _=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let P=0,J;J=s[P];P++){if("custom"in J){var x=this.getDynamicCategoryContents_(J.custom);x=vd(x),s.splice.apply(s,[P,1,...x]),J=s[P]}switch(J.kind.toUpperCase()){case"BLOCK":x=J;const be=this.createFlyoutBlock_(x);c.push({type:C_.BLOCK,block:be}),this.addBlockGap_(x,f,_);break;case"SEP":this.addSeparatorGap_(J,f,_);break;case"LABEL":x=this.createButton_(J,!0),c.push({type:C_.BUTTON,button:x}),f.push(_);break;case"BUTTON":x=this.createButton_(J,!1),c.push({type:C_.BUTTON,button:x}),f.push(_)}}return{contents:c,gaps:f}}getDynamicCategoryContents_(s){if(s=this.workspace_.targetWorkspace.getToolboxCategoryCallback(s),typeof s!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return s(this.workspace_.targetWorkspace)}createButton_(s,c){return new $_(this.workspace_,this.targetWorkspace,s,c)}createFlyoutBlock_(s){let c;return s.blockxml?(s=typeof s.blockxml=="string"?Gi(s.blockxml):s.blockxml,(c=this.getRecycledBlock_(s.getAttribute("type")))||(c=bi(s,this.workspace_))):(c=this.getRecycledBlock_(s.type),c||(s.enabled===void 0&&(s.enabled=s.disabled!=="true"&&s.disabled!==!0),c=Dc(s,this.workspace_))),c.isEnabled()||this.permanentlyDisabled_.push(c),c}getRecycledBlock_(s){let c=-1;for(let f=0;f<this.recycledBlocks_.length;f++)if(this.recycledBlocks_[f].type===s){c=f;break}return c===-1?void 0:this.recycledBlocks_.splice(c,1)[0]}addBlockGap_(s,c,f){let _;s.gap?_=parseInt(s.gap.toString()):s.blockxml&&(s=typeof s.blockxml=="string"?Gi(s.blockxml):s.blockxml,_=parseInt(s.getAttribute("gap"))),c.push(!_||isNaN(_)?f:_)}addSeparatorGap_(s,c,f){s=parseInt(s.gap.toString()),!isNaN(s)&&0<c.length?c[c.length-1]=s:c.push(f)}clearOldBlocks_(){var s=this.workspace_.getTopBlocks(!1);for(let f=0,_;_=s[f];f++)this.blockIsRecyclable_(_)?this.recycleBlock_(_):_.dispose(!1,!1);for(s=0;s<this.mats_.length;s++){const f=this.mats_[s];f&&(Es(f),ye(f))}this.mats_.length=0;for(let f=0,_;_=this.buttons_[f];f++)_.dispose();this.buttons_.length=0;let c;(c=this.workspace_.getPotentialVariableMap())==null||c.clear()}emptyRecycledBlocks_(){for(let s=0;s<this.recycledBlocks_.length;s++)this.recycledBlocks_[s].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(s){return!1}recycleBlock_(s){const c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,-c.y),this.recycledBlocks_.push(s)}addBlockListeners_(s,c,f){this.listeners_.push(v(s,"pointerdown",null,this.blockMouseDown_(c))),this.listeners_.push(v(f,"pointerdown",null,this.blockMouseDown_(c))),this.listeners_.push(y(s,"pointerenter",c,c.addSelect)),this.listeners_.push(y(s,"pointerleave",c,c.removeSelect)),this.listeners_.push(y(f,"pointerenter",c,c.addSelect)),this.listeners_.push(y(f,"pointerleave",c,c.removeSelect))}blockMouseDown_(s){return c=>{const f=this.targetWorkspace.getGesture(c);f&&(f.setStartBlock(s),f.handleFlyoutStart(c,this))}}onMouseDown_(s){const c=this.targetWorkspace.getGesture(s);c&&c.handleFlyoutStart(s,this)}isBlockCreatable(s){return s.isEnabled()}createBlock(s){let c=null;cn();var f=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{c=this.placeNewBlock_(s)}finally{rt()}if(this.targetWorkspace.hideChaff(),s=zu(this.targetWorkspace,f),Dn()){for(Et(!0),f=0;f<s.length;f++){const _=s[f];at(new(lt(Ap))(_))}at(new(lt(Ms))(c))}return this.autoClose?this.hide():this.filterForCapacity_(),c}initFlyoutButton_(s,c,f){const _=s.createDom();s.moveTo(c,f),s.show(),this.listeners_.push(v(_,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(s)}createRect_(s,c,f,_,x){return c=L(Re.RECT,{"fill-opacity":0,x:c,y:f,height:_.height,width:_.width}),c.tooltip=s,Zu(c),this.workspace_.getCanvas().insertBefore(c,s.getSvgRoot()),this.rectMap_.set(s,c),this.mats_[x]=c}moveRectToBlock_(s,c){const f=c.getHeightWidth();s.setAttribute("width",f.width.toString()),s.setAttribute("height",f.height.toString()),c=c.getRelativeToSurfaceXY(),s.setAttribute("y",c.y.toString()),s.setAttribute("x",(this.RTL?c.x-f.width:c.x).toString())}filterForCapacity_(){const s=this.workspace_.getTopBlocks(!1);for(let c=0,f;f=s[c];c++)if(this.permanentlyDisabled_.indexOf(f)===-1){const _=this.targetWorkspace.isCapacityAvailable(re(f));for(;f;)f.setEnabled(_),f=f.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(s){var c=this.targetWorkspace;if(!s.getSvgRoot())throw Error("oldBlock is not rendered.");const f=Ho(s);return c.setResizesEnabled(!1),c=Dc(f,c),this.positionNewBlock_(s,c),c}positionNewBlock_(s,c){const f=this.targetWorkspace;var _=f.getOriginOffsetInPixels(),x=this.workspace_.getOriginOffsetInPixels();s=s.getRelativeToSurfaceXY(),s.scale(this.workspace_.scale),x=_t.sum(x,s),_=_t.difference(x,_),_.scale(1/f.scale),c.moveTo(new _t(_.x,_.y))}};$w.FlyoutItemType=C_;var jI=class extends $w{constructor(s){super(s)}setMetrics_(s){if(this.isVisible()){var c=this.workspace_.getMetricsManager(),f=c.getScrollMetrics(),_=c.getViewMetrics();c=c.getAbsoluteMetrics(),typeof s.y=="number"&&(this.workspace_.scrollY=-(f.top+(f.height-_.height)*s.y)),this.workspace_.translate(this.workspace_.scrollX+c.left,this.workspace_.scrollY+c.top)}}getX(){if(!this.isVisible())return 0;var s=this.targetWorkspace.getMetricsManager();const c=s.getAbsoluteMetrics(),f=s.getViewMetrics();return s=s.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===sn.LEFT?s.width:f.width-this.width_:this.toolboxPosition_===sn.LEFT?0:f.width:this.toolboxPosition_===sn.LEFT?0:f.width+c.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var s=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=s.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,s.height-2*this.CORNER_RADIUS),s=this.getX();var c=this.getY();this.positionAt_(this.width_,this.height_,s,c)}}setBackgroundPath_(s,c){const f=this.toolboxPosition_===sn.RIGHT;var _=s+this.CORNER_RADIUS;_=["M "+(f?_:0)+",0"],_.push("h",f?-s:s),_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),_.push("v",Math.max(0,c)),_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),_.push("h",f?s:-s),_.push("z"),this.svgBackground_.setAttribute("d",_.join(" "))}scrollToStart(){let s;(s=this.workspace_.scrollbar)==null||s.setY(0)}wheel_(s){var c=$(s);if(c.y){const f=this.workspace_.getMetricsManager(),_=f.getScrollMetrics();c=f.getViewMetrics().top-_.top+c.y;let x;(x=this.workspace_.scrollbar)==null||x.setY(c),xs(),on()}s.preventDefault(),s.stopPropagation()}layout_(s,c){this.workspace_.scale=this.targetWorkspace.scale;var f=this.MARGIN;const _=this.RTL?f:f+this.tabWidth_;for(let be=0,tt;tt=s[be];be++)if(tt.type==="block"){var x=tt.block,P=x.getDescendants(!1);for(let Mn=0,Ti;Ti=P[Mn];Mn++)Ti.isInFlyout=!0;x.render(),P=x.getSvgRoot();const Ot=x.getHeightWidth();var J=x.outputConnection?_-this.tabWidth_:_;x.moveBy(J,f),J=this.createRect_(x,this.RTL?J-Ot.width:J,f,Ot,be),this.addBlockListeners_(P,x,J),f+=Ot.height+c[be]}else tt.type==="button"&&(x=tt.button,this.initFlyoutButton_(x,_,f),f+=x.height+c[be])}isDragTowardWorkspace(s){s=Math.atan2(s.y,s.x)/Math.PI*180;const c=this.dragAngleRange_;return s<c&&s>-c||s<-180+c||s>180-c}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const s=this.svgGroup_.getBoundingClientRect(),c=s.left;return this.toolboxPosition_===sn.LEFT?new ji(-1e9,1e9,-1e9,c+s.width):new ji(-1e9,1e9,c,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let s=0;var c=this.workspace_.getTopBlocks(!1);for(let _=0,x;x=c[_];_++){var f=x.getHeightWidth().width;x.outputConnection&&(f-=this.tabWidth_),s=Math.max(s,f)}for(let _=0,x;x=this.buttons_[_];_++)s=Math.max(s,x.width);if(s+=1.5*this.MARGIN+this.tabWidth_,s*=this.workspace_.scale,s+=Ni.scrollbarThickness,this.width_!==s){for(let _=0,x;x=c[_];_++){if(this.RTL){f=x.getRelativeToSurfaceXY().x;let P=s/this.workspace_.scale-this.MARGIN;x.outputConnection||(P-=this.tabWidth_),x.moveBy(P-f,0)}this.rectMap_.has(x)&&this.moveRectToBlock_(this.rectMap_.get(x),x)}if(this.RTL)for(let _=0,x;x=this.buttons_[_];_++)c=x.getPosition().y,x.moveTo(s/this.workspace_.scale-x.width-this.MARGIN-this.tabWidth_,c);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==sn.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+s,this.targetWorkspace.scrollY),this.width_=s,this.position(),this.targetWorkspace.recordDragTargets()}}};jI.registryName="verticalFlyout",Bt(ct.FLYOUTS_VERTICAL_TOOLBOX,uh,jI);var QG=class extends $w{constructor(s){super(s),this.horizontalLayout=!0}setMetrics_(s){if(this.isVisible()){var c=this.workspace_.getMetricsManager(),f=c.getScrollMetrics(),_=c.getViewMetrics();c=c.getAbsoluteMetrics(),typeof s.x=="number"&&(this.workspace_.scrollX=-(f.left+(f.width-_.width)*s.x)),this.workspace_.translate(this.workspace_.scrollX+c.left,this.workspace_.scrollY+c.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var s=this.targetWorkspace.getMetricsManager();const c=s.getAbsoluteMetrics(),f=s.getViewMetrics();s=s.getToolboxMetrics();const _=this.toolboxPosition_===sn.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?_?s.height:f.height-this.height_:_?0:f.height:_?0:f.height+c.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var s=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=s.width,this.setBackgroundPath_(s.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),s=this.getX();var c=this.getY();this.positionAt_(this.width_,this.height_,s,c)}}setBackgroundPath_(s,c){const f=this.toolboxPosition_===sn.TOP,_=["M 0,"+(f?0:this.CORNER_RADIUS)];f?(_.push("h",s+2*this.CORNER_RADIUS),_.push("v",c),_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),_.push("h",-s),_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),_.push("h",s),_.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),_.push("v",c),_.push("h",-s-2*this.CORNER_RADIUS)),_.push("z"),this.svgBackground_.setAttribute("d",_.join(" "))}scrollToStart(){let s;(s=this.workspace_.scrollbar)==null||s.setX(this.RTL?1/0:0)}wheel_(s){var c=$(s);if(c=c.x||c.y){const f=this.workspace_.getMetricsManager(),_=f.getScrollMetrics();c=f.getViewMetrics().left-_.left+c;let x;(x=this.workspace_.scrollbar)==null||x.setX(c),xs(),on()}s.preventDefault(),s.stopPropagation()}layout_(s,c){this.workspace_.scale=this.targetWorkspace.scale;const f=this.MARGIN;let _=f+this.tabWidth_;this.RTL&&(s=s.reverse());for(let be=0,tt;tt=s[be];be++)if(tt.type==="block"){var x=tt.block,P=x.getDescendants(!1);for(let Mn=0,Ti;Ti=P[Mn];Mn++)Ti.isInFlyout=!0;x.render(),P=x.getSvgRoot();const Ot=x.getHeightWidth();var J=x.outputConnection?this.tabWidth_:0;J=this.RTL?_+Ot.width:_-J,x.moveBy(J,f),J=this.createRect_(x,J,f,Ot,be),_+=Ot.width+c[be],this.addBlockListeners_(P,x,J)}else tt.type==="button"&&(x=tt.button,this.initFlyoutButton_(x,_,f),_+=x.width+c[be])}isDragTowardWorkspace(s){s=Math.atan2(s.y,s.x)/Math.PI*180;const c=this.dragAngleRange_;return s<90+c&&s>90-c||s>-90-c&&s<-90+c}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const s=this.svgGroup_.getBoundingClientRect(),c=s.top;return this.toolboxPosition_===sn.TOP?new ji(-1e9,c+s.height,-1e9,1e9):new ji(c,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let s=0;const c=this.workspace_.getTopBlocks(!1);for(let _=0,x;x=c[_];_++)s=Math.max(s,x.getHeightWidth().height);const f=this.buttons_;for(let _=0,x;x=f[_];_++)s=Math.max(s,x.height);if(s+=1.5*this.MARGIN,s*=this.workspace_.scale,s+=Ni.scrollbarThickness,this.height_!==s){for(let _=0,x;x=c[_];_++)this.rectMap_.has(x)&&this.moveRectToBlock_(this.rectMap_.get(x),x);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==sn.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+s),this.height_=s,this.position(),this.targetWorkspace.recordDragTargets()}}};Bt(ct.FLYOUTS_HORIZONTAL_TOOLBOX,uh,QG);var wy=class extends Zl{constructor(s,c,f,_,x){super($n.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=wy.dropdownCreate,this.defaultVariableName=typeof s=="string"?s:"",this.size_=new ps(0,0),s!==$n.SKIP_SETUP&&(x?this.configure_(x):this.setTypes_(f,_),c&&this.setValidator(c))}configure_(s){super.configure_(s),this.setTypes_(s.variableTypes,s.defaultType)}initModel(){var s=this.getSourceBlock();if(!s)throw new yr;this.variable_||(s=Rc(s.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(s.getId()))}shouldAddBorderRect_(){const s=this.getSourceBlock();if(!s)throw new yr;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||s.type!=="variables_get")}fromXml(s){var c=this.getSourceBlock();if(!c)throw new yr;const f=s.getAttribute("id"),_=s.textContent,x=s.getAttribute("variabletype")||s.getAttribute("variableType")||"";if(c=Rc(c.workspace,f,_,x),x!==null&&x!==c.type)throw Error("Serialized variable type with id '"+c.getId()+"' had type "+c.type+", and does not match variable field that references it: "+ls(s)+".");this.setValue(c.getId())}toXml(s){return this.initModel(),s.id=this.variable_.getId(),s.textContent=this.variable_.name,this.variable_.type&&s.setAttribute("variabletype",this.variable_.type),s}saveState(s){var c=this.saveLegacyState(wy);return c!==null||(this.initModel(),c={id:this.variable_.getId()},s&&(c.name=this.variable_.name,c.type=this.variable_.type)),c}loadState(s){const c=this.getSourceBlock();if(!c)throw new yr;this.loadLegacyState(wy,s)||(s=Rc(c.workspace,s.id||null,s.name,s.type||""),this.setValue(s.getId()))}setSourceBlock(s){if(s.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(s)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(s){if(s===null)return null;var c=this.getSourceBlock();if(!c)throw new yr;return c=zo(c.workspace,s),c?(c=c.type,this.typeIsAllowed_(c)?s:(console.warn("Variable type doesn't match this field!  Type was "+c),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+s),null)}doValueUpdate_(s){const c=this.getSourceBlock();if(!c)throw new yr;this.variable_=zo(c.workspace,s),super.doValueUpdate_(s)}typeIsAllowed_(s){const c=this.getVariableTypes_();if(!c)return!0;for(let f=0;f<c.length;f++)if(s===c[f])return!0;return!1}getVariableTypes_(){var s=this.variableTypes;if(s===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(s=s||[""],s.length===0)throw s=this.getText(),Error("'variableTypes' of field variable "+s+" was an empty list");return s}setTypes_(s,c){if(c=c||"",s==null)s=null;else if(Array.isArray(s)){let f=!1;for(let _=0;_<s.length;_++)s[_]===c&&(f=!0);if(!f)throw Error("Invalid default type '"+c+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=c,this.variableTypes=s}refreshVariableName(){this.forceRerender()}onItemSelected_(s,c){if(s=c.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(s===_I){Wu(this.sourceBlock_.workspace,this.variable_);return}if(s===OI){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(s)}referencesVariables(){return!0}static fromJson(s){return new this(gi(s.variable),void 0,void 0,void 0,s)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const s=this.getText();let c=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var f=this.getVariableTypes_(),_=0;_<f.length;_++){const x=this.sourceBlock_.workspace.getVariablesOfType(f[_]);c=c.concat(x)}for(c.sort(Xv.compareByName),f=[],_=0;_<c.length;_++)f[_]=[c[_].name,c[_].getId()];return f.push([Kt.RENAME_VARIABLE,_I]),Kt.DELETE_VARIABLE&&f.push([Kt.DELETE_VARIABLE.replace("%1",s),OI]),f}};$s("field_variable",wy);var YI=class extends Sy{constructor(s,c,f,_,x,P){super($n.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,s!==$n.SKIP_SETUP&&(P?this.configure_(P):this.setConstraints(c,f,_),this.setValue(s),x&&this.setValidator(x))}configure_(s){super.configure_(s),this.setMinInternal_(s.min),this.setMaxInternal_(s.max),this.setPrecisionInternal_(s.precision)}setConstraints(s,c,f){this.setMinInternal_(s),this.setMaxInternal_(c),this.setPrecisionInternal_(f),this.setValue(this.getValue())}setMin(s){this.setMinInternal_(s),this.setValue(this.getValue())}setMinInternal_(s){s==null?this.min_=-1/0:(s=Number(s),isNaN(s)||(this.min_=s))}getMin(){return this.min_}setMax(s){this.setMaxInternal_(s),this.setValue(this.getValue())}setMaxInternal_(s){s==null?this.max_=1/0:(s=Number(s),isNaN(s)||(this.max_=s))}getMax(){return this.max_}setPrecision(s){this.setPrecisionInternal_(s),this.setValue(this.getValue())}setPrecisionInternal_(s){this.precision_=Number(s)||0;let c=String(this.precision_);c.indexOf("e")!==-1&&(c=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const f=c.indexOf(".");this.decimalPlaces_=f===-1?s?0:null:c.length-f-1}getPrecision(){return this.precision_}doClassValidation_(s){return s===null||(s=String(s),s=s.replace(/O/ig,"0"),s=s.replace(/,/g,""),s=s.replace(/infinity/i,"Infinity"),s=Number(s||0),isNaN(s))?null:(s=Math.min(Math.max(s,this.min_),this.max_),this.precision_&&isFinite(s)&&(s=Math.round(s/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(s=Number(s.toFixed(this.decimalPlaces_))),s)}widgetCreate_(){const s=super.widgetCreate_();return-1/0<this.min_&&Kn(s,Oi.VALUEMIN,this.min_),1/0>this.max_&&Kn(s,Oi.VALUEMAX,this.max_),s}static fromJson(s){return new this(s.value,void 0,void 0,void 0,void 0,s)}};$s("field_number",YI),YI.prototype.DEFAULT_VALUE=0;var ZI=class extends t.FieldTextInput$$module$build$src$core$field_textinput{constructor(s,c,f){super($n.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){super.configure_(s),s.maxLines&&this.setMaxLines(s.maxLines)}toXml(s){return s.textContent=this.getValue().replace(/\n/g,"&#10;"),s}fromXml(s){this.setValue(s.textContent.replace(/&#10;/g,`
`))}saveState(){const s=this.saveLegacyState(ZI);return s!==null?s:this.getValue()}loadState(s){this.loadLegacyState($n,s)||this.setValue(s)}initView(){this.createBorderRect_(),this.textGroup_=L(Re.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const s=this.getSourceBlock();if(!s)throw new yr;let c=this.getText();if(!c)return $n.NBSP;const f=c.split(`
`);c="";const _=this.isOverflowedY_?this.maxLines_:f.length;for(let x=0;x<_;x++){let P=f[x];P.length>this.maxDisplayLength?P=P.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&x===_-1&&(P=P.substring(0,P.length-3)+"..."),P=P.replace(/\s/g,$n.NBSP),c+=P,x!==_-1&&(c+=`
`)}return s.RTL&&(c+=""),c}doValueUpdate_(s){super.doValueUpdate_(s),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var s=this.getSourceBlock();if(!s)throw new yr;for(var c;c=this.textGroup_.firstChild;)this.textGroup_.removeChild(c);c=this.getDisplayText_().split(`
`);let f=0;for(let _=0;_<c.length;_++){const x=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;L(Re.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:f+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(c[_])),f+=x}this.isBeingEdited_&&(c=this.htmlInput_,this.isOverflowedY_?le(c,"blocklyHtmlTextAreaInputOverflowedY"):ie(c,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(s.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),s=this.htmlInput_,this.isTextValid_?(ie(s,"blocklyInvalidInput"),Kn(s,Oi.INVALID,!1)):(le(s,"blocklyInvalidInput"),Kn(s,Oi.INVALID,!0)))}updateSize_(){var s=this.textGroup_.childNodes;const c=this.getConstants().FIELD_TEXT_FONTSIZE,f=this.getConstants().FIELD_TEXT_FONTWEIGHT,_=this.getConstants().FIELD_TEXT_FONTFAMILY;let x=0,P=0;for(var J=0;J<s.length;J++){var be=W(s[J],c,f,_);be>x&&(x=be),P+=this.getConstants().FIELD_TEXT_HEIGHT+(0<J?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(s=this.value_.split(`
`),J=L(Re.TEXT,{class:"blocklyText blocklyMultilineText"}),be=0;be<s.length;be++){s[be].length>this.maxDisplayLength&&(s[be]=s[be].substring(0,this.maxDisplayLength)),J.textContent=s[be];const tt=W(J,c,f,_);tt>x&&(x=tt)}x+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(P+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,x+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",x),this.borderRect_.setAttribute("height",P)),this.size_.width=x,this.size_.height=P,this.positionBorderRect_()}showEditor_(s,c){super.showEditor_(s,c),this.forceRerender()}widgetCreate_(){const s=eh(),c=this.workspace_.getScale(),f=document.createElement("textarea");f.className="blocklyHtmlInput blocklyHtmlTextAreaInput",f.setAttribute("spellcheck",this.spellcheck_);var _=this.getConstants().FIELD_TEXT_FONTSIZE*c+"pt";s.style.fontSize=_,f.style.fontSize=_,f.style.borderRadius=t.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*c+"px",_=this.getConstants().FIELD_BORDER_RECT_X_PADDING*c;const x=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*c/2;return f.style.padding=x+"px "+_+"px "+x+"px "+_+"px",_=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,f.style.lineHeight=_*c+"px",s.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",this.value_),f.setAttribute("data-old-value",""),It?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(f),f}setMaxLines(s){typeof s=="number"&&0<s&&s!==this.maxLines_&&(this.maxLines_=s,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(s){s.keyCode!==Rt.ENTER&&super.onHtmlInputKeyDown_(s)}static fromJson(s){return new this(gi(s.text),void 0,s)}};Ys(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),$s("field_multilinetext",ZI);var VG=class extends t.FieldLabel$$module$build$src$core$field_label{constructor(s,c,f){super(String(s??""),c,f),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(s){return new this(gi(s.text),void 0,s)}};$s("field_label_serializable",VG);var Aa=class extends $n{constructor(s,c,f){super($n.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){super.configure_(s),s.colourOptions&&(this.colours_=s.colourOptions),s.colourTitles&&(this.titles_=s.colourTitles),s.columns&&(this.columns_=s.columns)}initView(){this.size_=new ps(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof hl&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof hl&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(s){return typeof s!="string"?null:Fl(s)}doValueUpdate_(s){this.value_=s,this.borderRect_?this.borderRect_.style.fill=s:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof hl&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",s),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let s=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(s)&&(s="#"+s[1]+s[3]+s[5]),s}setColours(s,c){return this.colours_=s,c&&(this.titles_=c),this}setColumns(s){return this.columns_=s,this}showEditor_(){this.dropdownCreate_(),Le().appendChild(this.picker_),ge(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(s){s=(s=s.target)&&s.getAttribute("data-colour"),s!==null&&(this.setValue(s),vn(this))}onKeyDown_(s){var c=!1;s.keyCode===Rt.UP?(this.moveHighlightBy_(0,-1),c=!0):s.keyCode===Rt.DOWN?(this.moveHighlightBy_(0,1),c=!0):s.keyCode===Rt.LEFT?(this.moveHighlightBy_(-1,0),c=!0):s.keyCode===Rt.RIGHT?(this.moveHighlightBy_(1,0),c=!0):s.keyCode===Rt.ENTER&&((c=this.getHighlighted_())&&(c=c&&c.getAttribute("data-colour"),c!==null&&this.setValue(c)),on(),c=!0),c&&s.stopPropagation()}moveHighlightBy_(s,c){if(this.highlightedIndex_){var f=this.colours_||Aa.COLOURS,_=this.columns_||Aa.COLUMNS,x=this.highlightedIndex_%_,P=Math.floor(this.highlightedIndex_/_);x+=s,P+=c,0>s?0>x&&0<P?(x=_-1,P--):0>x&&(x=0):0<s?x>_-1&&P<Math.floor(f.length/_)-1?(x=0,P++):x>_-1&&x--:0>c?0>P&&(P=0):0<c&&P>Math.floor(f.length/_)-1&&(P=Math.floor(f.length/_)-1),this.setHighlightedCell_(this.picker_.childNodes[P].childNodes[x],P*_+x)}}onMouseMove_(s){const c=(s=s.target)&&Number(s.getAttribute("data-index"));c!==null&&c!==this.highlightedIndex_&&this.setHighlightedCell_(s,c)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const s=this.getHighlighted_();s&&ie(s,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const s=this.columns_||Aa.COLUMNS,c=this.picker_.childNodes[Math.floor(this.highlightedIndex_/s)];return c?c.childNodes[this.highlightedIndex_%s]:null}setHighlightedCell_(s,c){const f=this.getHighlighted_();f&&ie(f,"blocklyColourHighlighted"),le(s,"blocklyColourHighlighted"),this.highlightedIndex_=c,Kn(this.picker_,Oi.ACTIVEDESCENDANT,s.getAttribute("id"))}dropdownCreate_(){const s=this.columns_||Aa.COLUMNS,c=this.colours_||Aa.COLOURS,f=this.titles_||Aa.TITLES,_=this.getValue(),x=document.createElement("table");x.className="blocklyColourTable",x.tabIndex=0,x.dir="ltr",Qi(x,Jo.GRID),Kn(x,Oi.EXPANDED,!0),Kn(x,Oi.ROWCOUNT,Math.floor(c.length/s)),Kn(x,Oi.COLCOUNT,s);let P;for(let J=0;J<c.length;J++){J%s===0&&(P=document.createElement("tr"),Qi(P,Jo.ROW),x.appendChild(P));const be=document.createElement("td");P.appendChild(be),be.setAttribute("data-colour",c[J]),be.title=f[J]||c[J],be.id=Zt(),be.setAttribute("data-index",J),Qi(be,Jo.GRIDCELL),Kn(be,Oi.LABEL,c[J]),Kn(be,Oi.SELECTED,c[J]===_),be.style.backgroundColor=c[J],c[J]===_&&(be.className="blocklyColourSelected",this.highlightedIndex_=J)}this.onClickWrapper_=v(x,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=v(x,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=v(x,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=v(x,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=v(x,"keydown",this,this.onKeyDown_),this.picker_=x}dropdownDispose_(){this.onClickWrapper_&&(S(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(S(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(S(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(S(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(S(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(s){return new this(s.colour,void 0,s)}};Aa.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Aa.TITLES=[],Aa.COLUMNS=7,Aa.prototype.DEFAULT_VALUE=Aa.COLOURS[0],Ys(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),$s("field_colour",Aa),t.FieldCheckbox$$module$build$src$core$field_checkbox=class extends $n{constructor(s,c,f){super($n.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=t.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){super.configure_(s),s.checkCharacter&&(this.checkChar_=s.checkCharacter)}saveState(){const s=this.saveLegacyState(t.FieldCheckbox$$module$build$src$core$field_checkbox);return s!==null?s:this.getValueBoolean()}initView(){super.initView();const s=this.getTextElement();le(s,"blocklyCheckbox"),s.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(s){this.checkChar_=s||t.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(s){return s===!0||s==="TRUE"?"TRUE":s===!1||s==="FALSE"?"FALSE":null}doValueUpdate_(s){this.value_=this.convertValueToBool_(s),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(s){return typeof s=="string"?s==="TRUE":!!s}static fromJson(s){return new this(s.checked,void 0,s)}},t.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="",$s("field_checkbox",t.FieldCheckbox$$module$build$src$core$field_checkbox),t.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox$$module$build$src$core$field_checkbox;var bn=class extends Sy{constructor(s,c,f){super($n.SKIP_SETUP),this.clockwise_=bn.CLOCKWISE,this.offset_=bn.OFFSET,this.wrap_=bn.WRAP,this.round_=bn.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,s!==$n.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(s),c&&this.setValidator(c))}configure_(s){switch(super.configure_(s),s.mode){case Cw.COMPASS:this.clockwise_=!0,this.offset_=90;break;case Cw.PROTRACTOR:this.clockwise_=!1,this.offset_=0}s.clockwise&&(this.clockwise_=s.clockwise),s.offset&&(this.offset_=s.offset),s.wrap&&(this.wrap_=s.wrap),s.round&&(this.round_=s.round)}initView(){super.initView(),this.symbol_=L(Re.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(s){super.showEditor_(s,kr||an||Ht),this.dropdownCreate_(),Le().appendChild(this.editor_),this.sourceBlock_ instanceof hl&&F(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),ge(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const s=L(Re.SVG,{xmlns:So,"xmlns:html":Ea,"xmlns:xlink":Zo,version:"1.1",height:2*bn.HALF+"px",width:2*bn.HALF+"px",style:"touch-action: none"}),c=L(Re.CIRCLE,{cx:bn.HALF,cy:bn.HALF,r:bn.RADIUS,class:"blocklyAngleCircle"},s);this.gauge_=L(Re.PATH,{class:"blocklyAngleGauge"},s),this.line_=L(Re.LINE,{x1:bn.HALF,y1:bn.HALF,class:"blocklyAngleLine"},s);for(let f=0;360>f;f+=15)L(Re.LINE,{x1:bn.HALF+bn.RADIUS,y1:bn.HALF,x2:bn.HALF+bn.RADIUS-(f%45===0?10:5),y2:bn.HALF,class:"blocklyAngleMarks",transform:"rotate("+f+","+bn.HALF+","+bn.HALF+")"},s);this.clickWrapper_=v(s,"click",this,this.hide_),this.clickSurfaceWrapper_=v(c,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=v(c,"pointermove",this,this.onMouseMove_,!0),this.editor_=s}dropdownDispose_(){this.clickWrapper_&&(S(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(S(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(S(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){vn(this),xs()}onMouseMove_(s){var c=this.gauge_.ownerSVGElement.getBoundingClientRect();const f=s.clientX-c.left-bn.HALF;s=s.clientY-c.top-bn.HALF,c=Math.atan(-s/f),isNaN(c)||(c=ne(c),0>f?c+=180:0<s&&(c+=360),c=this.clockwise_?this.offset_+360-c:360-(this.offset_-c),this.displayMouseOrKeyboardValue_(c))}displayMouseOrKeyboardValue_(s){this.round_&&(s=Math.round(s/this.round_)*this.round_),s=this.wrapValue_(s),s!==this.value_&&this.setEditorValue_(s)}updateGraph_(){if(this.gauge_){var s=Number(this.getText())+this.offset_,c=ae(s%360);s=["M ",bn.HALF,",",bn.HALF];var f=bn.HALF,_=bn.HALF;if(!isNaN(c)){const x=Number(this.clockwise_),P=ae(this.offset_),J=Math.cos(P)*bn.RADIUS,be=Math.sin(P)*-bn.RADIUS;x&&(c=2*P-c),f+=Math.cos(c)*bn.RADIUS,_-=Math.sin(c)*bn.RADIUS,c=Math.abs(Math.floor((c-P)/Math.PI)%2),x&&(c=1-c),s.push(" l ",J,",",be," A ",bn.RADIUS,",",bn.RADIUS," 0 ",c," ",x," ",f,",",_," z")}this.gauge_.setAttribute("d",s.join("")),this.line_.setAttribute("x2",f),this.line_.setAttribute("y2",_)}}onHtmlInputKeyDown_(s){super.onHtmlInputKeyDown_(s);var c=this.getSourceBlock();if(!c)throw new yr;let f;s.keyCode===Rt.LEFT?f=c.RTL?1:-1:s.keyCode===Rt.RIGHT?f=c.RTL?-1:1:s.keyCode===Rt.DOWN?f=-1:s.keyCode===Rt.UP&&(f=1),f&&(c=this.getValue(),this.displayMouseOrKeyboardValue_(c+f*this.round_),s.preventDefault(),s.stopPropagation())}doClassValidation_(s){return s=Number(s),isNaN(s)||!isFinite(s)?null:this.wrapValue_(s)}wrapValue_(s){return s%=360,0>s&&(s+=360),s>this.wrap_&&(s-=360),s}static fromJson(s){return new this(s.angle,void 0,s)}};bn.ROUND=15,bn.HALF=50,bn.CLOCKWISE=!1,bn.OFFSET=0,bn.WRAP=360,bn.RADIUS=bn.HALF-1,Ys(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),$s("field_angle",bn),bn.prototype.DEFAULT_VALUE=0;var Cw;(function(s){s.COMPASS="compass",s.PROTRACTOR="protractor"})(Cw||(Cw={}));var qI=class extends d_{constructor(s){super(s),this.type=To,s&&(s.isShadow()&&(this.recordUndo=!1),s=this.currentLocation_(),this.oldParentId=s.parentId,this.oldInputName=s.inputName,this.oldCoordinate=s.coordinate)}toJson(){const s=super.toJson();return s.oldParentId=this.oldParentId,s.oldInputName=this.oldInputName,this.oldCoordinate&&(s.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),s.newParentId=this.newParentId,s.newInputName=this.newInputName,this.newCoordinate&&(s.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(s.recordUndo=this.recordUndo),s}fromJson(s){if(i("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldParentId=s.oldParentId,this.oldInputName=s.oldInputName,s.oldCoordinate){var c=s.oldCoordinate.split(",");this.oldCoordinate=new _t(Number(c[0]),Number(c[1]))}this.newParentId=s.newParentId,this.newInputName=s.newInputName,s.newCoordinate&&(c=s.newCoordinate.split(","),this.newCoordinate=new _t(Number(c[0]),Number(c[1]))),s.recordUndo!==void 0&&(this.recordUndo=s.recordUndo)}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new qI),c.oldParentId=s.oldParentId,c.oldInputName=s.oldInputName,s.oldCoordinate&&(f=s.oldCoordinate.split(","),c.oldCoordinate=new _t(Number(f[0]),Number(f[1]))),c.newParentId=s.newParentId,c.newInputName=s.newInputName,s.newCoordinate&&(f=s.newCoordinate.split(","),c.newCoordinate=new _t(Number(f[0]),Number(f[1]))),s.recordUndo!==void 0&&(c.recordUndo=s.recordUndo),c}recordNew(){const s=this.currentLocation_();this.newParentId=s.parentId,this.newInputName=s.inputName,this.newCoordinate=s.coordinate}currentLocation_(){var s=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var c=s.getBlockById(this.blockId);if(!c)throw Error("The block associated with the block move event could not be found");s={};const f=c.getParent();return f?(s.parentId=f.id,(c=f.getInputWithBlock(c))&&(s.inputName=c.name)):s.coordinate=c.getRelativeToSurfaceXY(),s}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&_t.equals(this.oldCoordinate,this.newCoordinate)}run(s){var c=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var f=c.getBlockById(this.blockId);if(f){var _=s?this.newParentId:this.oldParentId,x=s?this.newInputName:this.oldInputName;if(s=s?this.newCoordinate:this.oldCoordinate,_){var P=c.getBlockById(_);if(!P){console.warn("Can't connect to non-existent block: "+_);return}}if(f.getParent()&&f.unplug(),s)x=f.getRelativeToSurfaceXY(),f.moveBy(s.x-x.x,s.y-x.y);else{c=f.outputConnection,(!c||f.previousConnection&&f.previousConnection.isConnected())&&(c=f.previousConnection);let J;f=c.type,x?(f=P.getInput(x))&&(J=f.connection):f===xt.PREVIOUS_STATEMENT&&(J=P.nextConnection),J?c.connect(J):console.warn("Can't connect to non-existent input: "+x)}}else console.warn("Can't move non-existent block: "+this.blockId)}};Bt(ct.EVENT,To,qI);var Fd=class extends Mp{constructor(s){super(),this.isBlank=!s,s&&(this.commentId=s.id,this.workspaceId=s.workspace.id,this.group=nn(),this.recordUndo=qt())}toJson(){const s=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return s.commentId=this.commentId,s}fromJson(s){i("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.commentId=s.commentId}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new Fd),c.commentId=s.commentId,c}static CommentCreateDeleteHelper(s,c){var f=s.getEventWorkspace_();if(c){if(c=rn("xml"),!s.xml)throw Error("Ecountered a comment event without proper xml");c.appendChild(s.xml),ga(c,f)}else{if(!s.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(f=f.getCommentById(s.commentId))?f.dispose():console.warn("Can't uncreate non-existent comment: "+s.commentId)}}},JI=class extends Fd{constructor(s,c,f){super(s),this.type=Qv,s&&(this.oldContents_=typeof c>"u"?"":c,this.newContents_=typeof f>"u"?"":f)}toJson(){const s=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return s.oldContents=this.oldContents_,s.newContents=this.newContents_,s}fromJson(s){i("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.oldContents_=s.oldContents,this.newContents_=s.newContents}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new JI),c.oldContents_=s.oldContents,c.newContents_=s.newContents,c}isNull(){return this.oldContents_===this.newContents_}run(s){var c=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(c=c.getCommentById(this.commentId)){var f=s?this.newContents_:this.oldContents_;if(!f)throw Error(s?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");c.setContent(f)}else console.warn("Can't change non-existent comment: "+this.commentId)}};Bt(ct.EVENT,Qv,JI);var KI=class extends Fd{constructor(s){super(s),this.type=Ip,s&&(this.xml=s.toXmlWithXY())}toJson(){const s=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return s.xml=ls(this.xml),s}fromJson(s){i("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.xml=Gi(s.xml)}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new KI),c.xml=Gi(s.xml),c}run(s){Fd.CommentCreateDeleteHelper(this,s)}};Bt(ct.EVENT,Ip,KI);var eR=class extends Fd{constructor(s){super(s),this.type=c_,s&&(this.xml=s.toXmlWithXY())}run(s){Fd.CommentCreateDeleteHelper(this,!s)}toJson(){const s=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return s.xml=ls(this.xml),s}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new eR),c.xml=Gi(s.xml),c}};Bt(ct.EVENT,c_,eR);var tR=class extends Fd{constructor(s){super(s),this.type=dh,s&&(this.comment_=s,this.oldCoordinate_=s.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(s){this.oldCoordinate_=s}toJson(){const s=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return s.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,s.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),s}fromJson(s){i("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s);let c=s.oldCoordinate.split(",");this.oldCoordinate_=new _t(Number(c[0]),Number(c[1])),c=s.newCoordinate.split(","),this.newCoordinate_=new _t(Number(c[0]),Number(c[1]))}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new tR),f=s.oldCoordinate.split(","),c.oldCoordinate_=new _t(Number(f[0]),Number(f[1])),f=s.newCoordinate.split(","),c.newCoordinate_=new _t(Number(f[0]),Number(f[1])),c}isNull(){return _t.equals(this.oldCoordinate_,this.newCoordinate_)}run(s){var c=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(c=c.getCommentById(this.commentId)){if(s=s?this.newCoordinate_:this.oldCoordinate_,!s)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var f=c.getXY();c.moveBy(s.x-f.x,s.y-f.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};Bt(ct.EVENT,dh,tR);var Gp=class extends Mp{constructor(s,c){super(),this.model=c,this.isBlank=!1,this.workspaceId=s.id}toJson(){const s=super.toJson();return s.procedureId=this.model.getId(),s}},nR=class extends Gp{constructor(s,c,f){super(s,c),this.oldTypes=f,this.type=iw,this.newTypes=c.getReturnTypes()}run(s){const c=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!c)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");s?c.setReturnTypes(this.newTypes):c.setReturnTypes(this.oldTypes)}toJson(){const s=super.toJson();return s.oldTypes=this.oldTypes,s}static fromJson(s,c){const f=c.getProcedureMap().get(s.procedureId);if(!f)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new nR(c,f,s.oldTypes)}};Bt(ct.EVENT,iw,nR);var iR=class extends Gp{constructor(s,c){super(s,c),this.type=ew}run(s){const c=this.getEventWorkspace_(),f=c.getProcedureMap(),_=f.get(this.model.getId());s?_||f.add(new py(c,this.model.getName(),this.model.getId())):_&&f.delete(this.model.getId())}toJson(){const s=super.toJson();return s.model=Cd(this.model),s}static fromJson(s,c){return new iR(c,Ad(py,E_,s.model,c))}};Bt(ct.EVENT,ew,iR);var rR=class extends Gp{constructor(s,c){super(s,c),this.type=Vv}run(s){const c=this.getEventWorkspace_(),f=c.getProcedureMap(),_=f.get(this.model.getId());s?_&&f.delete(this.model.getId()):_||f.add(new py(c,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(s,c){if(s=c.getProcedureMap().get(s.procedureId),!s)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new rR(c,s)}};Bt(ct.EVENT,Vv,rR);var sR=class extends Gp{constructor(s,c){super(s,c),this.type=nw,this.oldState=!c.getEnabled(),this.newState=c.getEnabled()}run(s){const c=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!c)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");s?c.setEnabled(this.newState):c.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(s,c){if(s=c.getProcedureMap().get(s.procedureId),!s)throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new sR(c,s)}};Bt(ct.EVENT,nw,sR);var oR=class extends Gp{constructor(s,c,f){super(s,c),this.oldName=f,this.type=tw,this.newName=c.getName()}run(s){const c=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!c)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");s?c.setName(this.newName):c.setName(this.oldName)}toJson(){const s=super.toJson();return s.oldName=this.oldName,s}static fromJson(s,c){const f=c.getProcedureMap().get(s.procedureId);if(!f)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new oR(c,f,s.oldName)}};Bt(ct.EVENT,tw,oR);var Aw=class extends Gp{constructor(s,c,f){super(s,c),this.parameter=f}toJson(){const s=super.toJson();return s.parameterId=this.model.getId(),s}},aR=class extends Aw{constructor(s,c,f,_){super(s,c,f),this.index=_,this.type=rw}run(s){const c=this.getEventWorkspace_(),f=c.getProcedureMap().get(this.model.getId());if(!f)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const _=f.getParameter(this.index);s?this.parameterMatches(_)||f.insertParameter(new E_(c,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(_)&&f.deleteParameter(this.index)}parameterMatches(s){return s&&s.getId()===this.parameter.getId()}toJson(){const s=super.toJson();return s.parameter=cl(this.parameter),s.index=this.index,s}static fromJson(s,c){const f=c.getProcedureMap().get(s.procedureId);if(!f)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new aR(c,f,ah(E_,s.parameter,c),s.index)}};Bt(ct.EVENT,rw,aR);var lR=class extends Aw{constructor(s,c,f,_){super(s,c,f),this.index=_,this.type=sw}run(s){const c=this.getEventWorkspace_(),f=c.getProcedureMap().get(this.model.getId());if(!f)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const _=f.getParameter(this.index);s?this.parameterMatches(_)&&f.deleteParameter(this.index):this.parameterMatches(_)||f.insertParameter(new E_(c,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(s){return s&&s.getId()===this.parameter.getId()}toJson(){const s=super.toJson();return s.index=this.index,s}static fromJson(s,c){const f=c.getProcedureMap().get(s.procedureId);if(!f)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const _=f.getParameter(s.index);return new lR(c,f,_,s.index)}};Bt(ct.EVENT,sw,lR);var cR=class extends Aw{constructor(s,c,f,_){super(s,c,f),this.oldName=_,this.type=ow,this.newName=f.getName()}run(s){const c=z1(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!c)throw Error("Cannot rename a parameter that does not exist in the procedure map");s?c.setName(this.newName):c.setName(this.oldName)}toJson(){const s=super.toJson();return s.oldName=this.oldName,s}static fromJson(s,c){const f=c.getProcedureMap().get(s.procedureId);if(!f)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const _=z1(c,s.procedureId,s.parameterId);if(!_)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new cR(c,f,_,s.oldName)}};Bt(ct.EVENT,ow,cR);var uR=class extends Xl{constructor(s,c,f){super(s?s.workspace.id:void 0),this.type=l_,s&&(this.blockId=s.id,this.isStart=c,this.blocks=f)}toJson(){const s=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return s.isStart=this.isStart,s.blockId=this.blockId,s.blocks=this.blocks,s}fromJson(s){i("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(s),this.isStart=s.isStart,this.blockId=s.blockId,this.blocks=s.blocks}static fromJson(s,c,f){return c=super.fromJson(s,c,f??new uR),c.isStart=s.isStart,c.blockId=s.blockId,c.blocks=s.blocks,c}};Bt(ct.EVENT,l_,uR);var HG=class extends Xl{constructor(s,c,f,_){super(s?s.workspace.id:void 0),this.type=Fv,this.blockId=s?s.id:null,this.element=typeof c>"u"?"":c,this.oldValue=typeof f>"u"?"":f,this.newValue=typeof _>"u"?"":_}toJson(){const s=super.toJson();return s.element=this.element,this.newValue!==void 0&&(s.newValue=this.newValue),this.blockId&&(s.blockId=this.blockId),s}fromJson(s){super.fromJson(s),this.element=s.element,this.newValue=s.newValue,this.blockId=s.blockId}};Bt(ct.EVENT,Fv,HG);var XG=class extends Mp{constructor(s){super(),this.isBlank=!0,this.recordUndo=!1,this.type=u_,this.isBlank=!!s,s&&(this.workspaceId=s.id)}toJson(){const s=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return s.workspaceId=this.workspaceId,s}fromJson(s){super.fromJson(s),this.workspaceId=s.workspaceId}};Bt(ct.EVENT,u_,XG),t.module$build$src$core$events$events={},t.module$build$src$core$events$events.Abstract=Mp,t.module$build$src$core$events$events.BLOCK_CHANGE=Hr,t.module$build$src$core$events$events.BLOCK_CREATE=Ms,t.module$build$src$core$events$events.BLOCK_DELETE=Xc,t.module$build$src$core$events$events.BLOCK_DRAG=l_,t.module$build$src$core$events$events.BLOCK_MOVE=To,t.module$build$src$core$events$events.BUBBLE_OPEN=hh,t.module$build$src$core$events$events.BUMP_EVENTS=Gk,t.module$build$src$core$events$events.BlockBase=d_,t.module$build$src$core$events$events.BlockChange=Pp,t.module$build$src$core$events$events.BlockCreate=hI,t.module$build$src$core$events$events.BlockDelete=dI,t.module$build$src$core$events$events.BlockDrag=uR,t.module$build$src$core$events$events.BlockMove=qI,t.module$build$src$core$events$events.BubbleOpen=sI,t.module$build$src$core$events$events.BubbleType=oI,t.module$build$src$core$events$events.CHANGE=Hr,t.module$build$src$core$events$events.CLICK=Pd,t.module$build$src$core$events$events.COMMENT_CHANGE=Qv,t.module$build$src$core$events$events.COMMENT_CREATE=Ip,t.module$build$src$core$events$events.COMMENT_DELETE=c_,t.module$build$src$core$events$events.COMMENT_MOVE=dh,t.module$build$src$core$events$events.CREATE=Ms,t.module$build$src$core$events$events.Click=xI,t.module$build$src$core$events$events.ClickTarget=$I,t.module$build$src$core$events$events.CommentBase=Fd,t.module$build$src$core$events$events.CommentChange=JI,t.module$build$src$core$events$events.CommentCreate=KI,t.module$build$src$core$events$events.CommentDelete=eR,t.module$build$src$core$events$events.CommentMove=tR,t.module$build$src$core$events$events.DELETE=Xc,t.module$build$src$core$events$events.FINISHED_LOADING=u_,t.module$build$src$core$events$events.FinishedLoading=XG,t.module$build$src$core$events$events.MARKER_MOVE=Uv,t.module$build$src$core$events$events.MOVE=To,t.module$build$src$core$events$events.MarkerMove=BI,t.module$build$src$core$events$events.ProcedureBase=Gp,t.module$build$src$core$events$events.ProcedureChangeReturn=nR,t.module$build$src$core$events$events.ProcedureCreate=iR,t.module$build$src$core$events$events.ProcedureDelete=rR,t.module$build$src$core$events$events.ProcedureEnable=sR,t.module$build$src$core$events$events.ProcedureParameterBase=Aw,t.module$build$src$core$events$events.ProcedureParameterCreate=aR,t.module$build$src$core$events$events.ProcedureParameterDelete=lR,t.module$build$src$core$events$events.ProcedureParameterRename=cR,t.module$build$src$core$events$events.ProcedureRename=oR,t.module$build$src$core$events$events.SELECTED=Md,t.module$build$src$core$events$events.Selected=Xk,t.module$build$src$core$events$events.THEME_CHANGE=zv,t.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=Wv,t.module$build$src$core$events$events.TRASHCAN_OPEN=Gv,t.module$build$src$core$events$events.ThemeChange=CI,t.module$build$src$core$events$events.ToolboxItemSelect=TI,t.module$build$src$core$events$events.TrashcanOpen=cI,t.module$build$src$core$events$events.UI=Fv,t.module$build$src$core$events$events.Ui=HG,t.module$build$src$core$events$events.UiBase=Xl,t.module$build$src$core$events$events.VAR_CREATE=Ap,t.module$build$src$core$events$events.VAR_DELETE=a_,t.module$build$src$core$events$events.VAR_RENAME=Bv,t.module$build$src$core$events$events.VIEWPORT_CHANGE=kp,t.module$build$src$core$events$events.VarBase=Hv,t.module$build$src$core$events$events.VarCreate=Vk,t.module$build$src$core$events$events.VarDelete=GI,t.module$build$src$core$events$events.VarRename=WI,t.module$build$src$core$events$events.ViewportChange=AI,t.module$build$src$core$events$events.clearPendingUndo=Ts,t.module$build$src$core$events$events.disable=cn,t.module$build$src$core$events$events.disableOrphans=En,t.module$build$src$core$events$events.enable=rt,t.module$build$src$core$events$events.filter=gr,t.module$build$src$core$events$events.fire=at,t.module$build$src$core$events$events.fromJson=rs,t.module$build$src$core$events$events.get=lt,t.module$build$src$core$events$events.getDescendantIds=is,t.module$build$src$core$events$events.getGroup=nn,t.module$build$src$core$events$events.getRecordUndo=qt,t.module$build$src$core$events$events.isEnabled=Dn,t.module$build$src$core$events$events.setGroup=Et,t.module$build$src$core$events$events.setRecordUndo=tn,Rv();var xo={};xo.registerCleanup=xv,xo.registerCollapse=Uc,xo.registerCollapseExpandBlock=V1,xo.registerComment=kv,xo.registerDefaultOptions=Rv,xo.registerDelete=Iv,xo.registerDeleteAll=Q1,xo.registerDisable=Wc,xo.registerDuplicate=Av,xo.registerExpand=$v,xo.registerHelp=Is,xo.registerInline=Gc,xo.registerRedo=Ev,xo.registerUndo=Ql;var jG=class{constructor(s,c){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=s,this.draggedConnectionManager_=new Ca(this.draggingBlock_),this.workspace_=c,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Ak(s)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(s,c){nn()||Et(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Ue(),this.workspace_.setResizesEnabled(!1),wa(),this.shouldDisconnect_(c)&&this.disconnectBlock_(c,s),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(s){return!!(this.draggingBlock_.getParent()||s&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(s,c){this.draggingBlock_.unplug(s),s=this.pixelsToWorkspaceUnits_(c),s=_t.sum(this.startXY_,s),this.draggingBlock_.translate(s.x,s.y),R1(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const s=new(lt(l_))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));at(s)}drag(s,c){c=this.pixelsToWorkspaceUnits_(c);var f=_t.sum(this.startXY_,c);this.draggingBlock_.moveDuringDrag(f),this.dragIcons_(c),f=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(s),this.draggedConnectionManager_.update(c,this.dragTarget_),s=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,s!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==f&&(f&&f.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(s,c){this.drag(s,c),this.dragIconData_=[],this.fireDragEndEvent_(),we(),wa(),s=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?c=this.startXY_:(c=this.getNewLocationAfterDrag_(c),s=c.delta,c=c.newLocation),this.draggingBlock_.moveOffDragSurface(c),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),s?this.updateBlockAfterMove_(s):kd(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),Et(!1)}getNewLocationAfterDrag_(s){s=this.pixelsToWorkspaceUnits_(s);const c=_t.sum(this.startXY_,s);return{delta:s,newLocation:c}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),_i.length=0,!0):!1}updateBlockAfterMove_(s){this.draggingBlock_.moveConnections(s.x,s.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const s=new(lt(l_))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));at(s)}updateToolboxStyle_(s){const c=this.workspace_.getToolbox();if(c){const f=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";s&&typeof c.removeStyle=="function"?c.removeStyle(f):s||typeof c.addStyle!="function"||c.addStyle(f)}}fireMoveEvent_(){const s=new(lt(To))(this.draggingBlock_);s.oldCoordinate=this.startXY_,s.recordNew(),at(s)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(s){return s=new _t(s.x/this.workspace_.scale,s.y/this.workspace_.scale),this.workspace_.isMutator&&s.scale(1/this.workspace_.options.parentWorkspace.scale),s}dragIcons_(s){for(let c=0;c<this.dragIconData_.length;c++){const f=this.dragIconData_[c];f.icon.setIconLocation(_t.sum(f.location,s))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};Bt(ct.BLOCK_DRAGGER,uh,jG);var rie="9.2.1",sie=t.Align$$module$build$src$core$input.LEFT,oie=t.Align$$module$build$src$core$input.CENTRE,aie=t.Align$$module$build$src$core$input.RIGHT,lie=xt.INPUT_VALUE,cie=xt.OUTPUT_VALUE,uie=xt.NEXT_STATEMENT,hie=xt.PREVIOUS_STATEMENT,die=dn.DUMMY,fie=sn.TOP,pie=sn.BOTTOM,mie=sn.LEFT,gie=sn.RIGHT;Oh.prototype.newBlock=function(s,c){return new v_(this,s,c)},Kl.prototype.newBlock=function(s,c){return new hl(this,s,c)},Kl.newTrashcan=function(s){return new XU(s)},eo.prototype.showContextMenu=function(s){if(!this.workspace.options.readOnly){var c=[];this.isDeletable()&&this.isMovable()&&(c.push(Qg(this)),c.push(zg(this))),Nc(s,c,this.RTL)}},t.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(s){return new Kl(s)},dl.prototype.populateProcedures=function(s){s=bp(s),s=s[0].concat(s[1]);for(let c=0;c<s.length;c++)this.getName(s[c][0],dl.NameType.PROCEDURE)};var _ie=xt,He={};return He.ALIGN_CENTRE=oie,He.ALIGN_LEFT=sie,He.ALIGN_RIGHT=aie,He.ASTNode=it,He.BasicCursor=dy,He.Block=v_,He.BlockDragSurfaceSvg=GG,He.BlockDragger=jG,He.BlockSvg=hl,He.Blocks=gt,He.Bubble=ln,He.BubbleDragger=JU,He.COLLAPSED_FIELD_NAME=oy,He.COLLAPSED_INPUT_NAME=sy,He.COLLAPSE_CHARS=GU,He.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,He.CollapsibleToolboxCategory=T_,He.Comment=UU,He.ComponentManager=ms,He.Connection=Vn,He.ConnectionChecker=cG,He.ConnectionDB=w_,He.ConnectionType=xt,He.ContextMenu=t.module$build$src$core$contextmenu,He.ContextMenuItems=xo,He.ContextMenuRegistry=Hn,He.Css=Zk,He.Cursor=vI,He.DELETE_VARIABLE_ID=OI,He.DRAG_STACK=WU,He.DUMMY_INPUT=die,He.DeleteArea=yw,He.DragTarget=HU,He.DropDownDiv=cr,He.Events=t.module$build$src$core$events$events,He.Extensions=t.module$build$src$core$extensions,He.Field=$n,He.FieldAngle=bn,He.FieldCheckbox=t.FieldCheckbox$$module$build$src$core$field_checkbox,He.FieldColour=Aa,He.FieldDropdown=Zl,He.FieldImage=t.FieldImage$$module$build$src$core$field_image,He.FieldLabel=t.FieldLabel$$module$build$src$core$field_label,He.FieldLabelSerializable=VG,He.FieldMultilineInput=ZI,He.FieldNumber=YI,He.FieldTextInput=t.FieldTextInput$$module$build$src$core$field_textinput,He.FieldVariable=wy,He.Flyout=$w,He.FlyoutButton=$_,He.FlyoutMetricsManager=zG,He.Generator=t.CodeGenerator$$module$build$src$core$generator,He.Gesture=Yc,He.Grid=kI,He.HorizontalFlyout=QG,He.INPUT_VALUE=lie,He.Icon=gw,He.Input=O_,He.InsertionMarkerManager=Ca,He.Marker=zU,He.MarkerManager=jv,He.Menu=iI,He.MenuItem=rI,He.MetricsManager=XI,He.Msg=Kt,He.Mutator=t.Mutator$$module$build$src$core$mutator,He.NEXT_STATEMENT=uie,He.Names=dl,He.OPPOSITE_TYPE=Lp,He.OUTPUT_VALUE=cie,He.Options=ql,He.PREVIOUS_STATEMENT=hie,He.PROCEDURE_CATEGORY_NAME=Tw,He.Procedures=t.module$build$src$core$procedures,He.RENAME_VARIABLE_ID=_I,He.RenderedConnection=wo,He.Scrollbar=Ni,He.ScrollbarPair=HI,He.ShortcutItems=qc,He.ShortcutRegistry=Yn,He.TOOLBOX_AT_BOTTOM=pie,He.TOOLBOX_AT_LEFT=mie,He.TOOLBOX_AT_RIGHT=gie,He.TOOLBOX_AT_TOP=fie,He.TabNavigateCursor=QU,He.Theme=Dp,He.ThemeManager=lG,He.Themes=EI,He.Toolbox=qU,He.ToolboxCategory=Jl,He.ToolboxItem=wI,He.ToolboxSeparator=fy,He.Tooltip=ur,He.Touch=Rs,He.TouchGesture=Yc,He.Trashcan=XU,He.VARIABLE_CATEGORY_NAME=cw,He.VARIABLE_DYNAMIC_CATEGORY_NAME=UI,He.VERSION=rie,He.VariableMap=zI,He.VariableModel=Xv,He.Variables=t.module$build$src$core$variables,He.VariablesDynamic=Bd,He.VerticalFlyout=jI,He.Warning=VU,He.WidgetDiv=Yl,He.Workspace=Oh,He.WorkspaceAudio=uG,He.WorkspaceComment=jc,He.WorkspaceCommentSvg=eo,He.WorkspaceDragSurfaceSvg=UG,He.WorkspaceDragger=KU,He.WorkspaceSvg=Kl,He.Xml=t.module$build$src$core$xml,He.ZoomControls=hG,He.bindEventWithChecks_=ch,He.bindEvent_=zc,He.blockAnimations=ly,He.blockRendering=Xn,He.browserEvents=Ze,He.bumpObjects=xw,He.clipboard=cy,He.common=t.module$build$src$core$common,He.config=t.config$$module$build$src$core$config,He.connectionTypes=_ie,He.constants=fI,He.copy=X1,He.defineBlocksWithJsonArray=X,He.dialog=qo,He.duplicate=Yo,He.fieldRegistry=Kv,He.geras=Kc,He.getMainWorkspace=B,He.getSelected=Z,He.hideChaff=kk,He.hueToHex=Rk,He.inject=Fc,He.inputTypes=dn,He.isNumber=Mv,He.minimalist=Ty,He.paste=Ik,He.procedures=t.module$build$src$core$procedures,He.registry=Hl,He.resizeSvgContents=H1,He.serialization=iie,He.setLocale=Qk,He.setParentContainer=M,He.svgResize=K,He.thrasos=VI,He.uiPosition=Np,He.unbindEvent_=i_,He.utils=kn,He.zelos=ec,t.module$build$src$core$contextmenu,t.module$build$src$core$events$events,t.module$build$src$core$msg,t.module$build$src$core$common,Object.defineProperties(He,{alert:{set:function(s){Xi.warn("Blockly.alert","December 2021","December 2022"),qo.setAlert(s)},get:function(){return Xi.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),qo.alert}},confirm:{set:function(s){Xi.warn("Blockly.confirm","December 2021","December 2022"),qo.setConfirm(s)},get:function(){return Xi.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),qo.confirm}},mainWorkspace:{set:function(s){Xi.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),t.module$build$src$core$common.setMainWorkspace(s)},get:function(){return Xi.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),t.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(s){Xi.warn("Blockly.prompt","December 2021","December 2022"),qo.setPrompt(s)},get:function(){return Xi.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),qo.prompt}},selected:{get:function(){return Xi.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),t.module$build$src$core$common.getSelected()},set:function(s){Xi.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),t.module$build$src$core$common.setSelected(s)}},HSV_SATURATION:{get:function(){return to.getHsvSaturation()},set:function(s){to.setHsvSaturation(s)}},HSV_VALUE:{get:function(){return to.getHsvValue()},set:function(s){to.setHsvValue(s)}}}),Object.defineProperties(t.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Xi.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),t.module$build$src$core$contextmenu.getCurrentBlock()},set:function(s){Xi.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),t.module$build$src$core$contextmenu.setCurrentBlock(s)}}}),Object.defineProperties(t.module$build$src$core$events$events,{recordUndo:{get:function(){return Xi.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),en.getRecordUndo()},set:function(s){Xi.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),en.setRecordUndo(s)}}}),Object.defineProperties(ur,{visible:{get:function(){return Xi.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),ur.isVisible()}},DIV:{get:function(){return Xi.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),ur.getDiv()}}}),Object.defineProperties(Yl,{DIV:{get:function(){return Xi.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),Yl.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:t.module$build$src$core$msg}),He.__namespace__=t,He})}(QR)),QR.exports}var d4;function coe(){return d4||(d4=1,function(n,e){(function(t,i){n.exports=i(cA())})(Ki,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(zR)),zR.exports}var f4;function uA(){return f4||(f4=1,function(n,e){(function(t,i){n.exports=i(coe())})(Ki,function(t){return t})}(WR)),WR.exports}var VR={exports:{}},p4;function uoe(){return p4||(p4=1,function(n,e){(function(t,i){n.exports=i(cA())})(Ki,function(t){var i=t.__namespace__,r={};i.module$build$src$core$utils$string,i.module$build$src$core$variables,i.CodeGenerator$$module$build$src$core$generator,i.module$build$src$core$input_types.inputTypes,i.module$build$src$core$names.Names,i.NameType$$module$build$src$core$names,r.pythonGenerator=new i.CodeGenerator$$module$build$src$core$generator("Python"),r.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),r.pythonGenerator.ORDER_ATOMIC=0,r.pythonGenerator.ORDER_COLLECTION=1,r.pythonGenerator.ORDER_STRING_CONVERSION=1,r.pythonGenerator.ORDER_MEMBER=2.1,r.pythonGenerator.ORDER_FUNCTION_CALL=2.2,r.pythonGenerator.ORDER_EXPONENTIATION=3,r.pythonGenerator.ORDER_UNARY_SIGN=4,r.pythonGenerator.ORDER_BITWISE_NOT=4,r.pythonGenerator.ORDER_MULTIPLICATIVE=5,r.pythonGenerator.ORDER_ADDITIVE=6,r.pythonGenerator.ORDER_BITWISE_SHIFT=7,r.pythonGenerator.ORDER_BITWISE_AND=8,r.pythonGenerator.ORDER_BITWISE_XOR=9,r.pythonGenerator.ORDER_BITWISE_OR=10,r.pythonGenerator.ORDER_RELATIONAL=11,r.pythonGenerator.ORDER_LOGICAL_NOT=12,r.pythonGenerator.ORDER_LOGICAL_AND=13,r.pythonGenerator.ORDER_LOGICAL_OR=14,r.pythonGenerator.ORDER_CONDITIONAL=15,r.pythonGenerator.ORDER_LAMBDA=16,r.pythonGenerator.ORDER_NONE=99,r.pythonGenerator.ORDER_OVERRIDES=[[r.pythonGenerator.ORDER_FUNCTION_CALL,r.pythonGenerator.ORDER_MEMBER],[r.pythonGenerator.ORDER_FUNCTION_CALL,r.pythonGenerator.ORDER_FUNCTION_CALL],[r.pythonGenerator.ORDER_MEMBER,r.pythonGenerator.ORDER_MEMBER],[r.pythonGenerator.ORDER_MEMBER,r.pythonGenerator.ORDER_FUNCTION_CALL],[r.pythonGenerator.ORDER_LOGICAL_NOT,r.pythonGenerator.ORDER_LOGICAL_NOT],[r.pythonGenerator.ORDER_LOGICAL_AND,r.pythonGenerator.ORDER_LOGICAL_AND],[r.pythonGenerator.ORDER_LOGICAL_OR,r.pythonGenerator.ORDER_LOGICAL_OR]],r.pythonGenerator.isInitialized=!1,r.pythonGenerator.init=function(l){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(l.getVariableMap()),this.nameDB_.populateVariables(l),this.nameDB_.populateProcedures(l);const u=[];var h=i.module$build$src$core$variables.allDeveloperVariables(l);for(let d=0;d<h.length;d++)u.push(this.nameDB_.getName(h[d],i.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(l=i.module$build$src$core$variables.allUsedVarModels(l),h=0;h<l.length;h++)u.push(this.nameDB_.getName(l[h].getId(),i.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=u.join(`
`),this.isInitialized=!0},r.pythonGenerator.finish=function(l){const u=[],h=[];for(let d in this.definitions_){const p=this.definitions_[d];p.match(/^(from\s+\S+\s+)?import\s+\S+/)?u.push(p):h.push(p)}return l=Object.getPrototypeOf(this).finish.call(this,l),this.isInitialized=!1,this.nameDB_.reset(),(u.join(`
`)+`

`+h.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+l},r.pythonGenerator.scrubNakedValue=function(l){return l+`
`},r.pythonGenerator.quote_=function(l){l=l.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let u="'";return l.indexOf("'")!==-1&&(l.indexOf('"')===-1?u='"':l=l.replace(/'/g,"\\'")),u+l+u},r.pythonGenerator.multiline_quote_=function(l){return l.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)},r.pythonGenerator.scrub_=function(l,u,h){let d="";if(!l.outputConnection||!l.outputConnection.targetConnection){var p=l.getCommentText();p&&(p=i.module$build$src$core$utils$string.wrap(p,this.COMMENT_WRAP-3),d+=this.prefixLines(p+`
`,"# "));for(let m=0;m<l.inputList.length;m++)l.inputList[m].type===i.module$build$src$core$input_types.inputTypes.VALUE&&(p=l.inputList[m].connection.targetBlock())&&(p=this.allNestedComments(p))&&(d+=this.prefixLines(p,"# "))}return l=l.nextConnection&&l.nextConnection.targetBlock(),h=h?"":this.blockToCode(l),d+u+h},r.pythonGenerator.getAdjustedInt=function(l,u,h,d){h=h||0,l.workspace.options.oneBasedIndex&&h--;const p=l.workspace.options.oneBasedIndex?"1":"0";return l=this.valueToCode(l,u,h?this.ORDER_ADDITIVE:this.ORDER_NONE)||p,i.module$build$src$core$utils$string.isNumber(l)?(l=parseInt(l,10)+h,d&&(l=-l)):(l=0<h?"int("+l+" + "+h+")":0>h?"int("+l+" - "+-h+")":"int("+l+")",d&&(l="-"+l)),l},i.NameType$$module$build$src$core$names,r.pythonGenerator.variables_get=function(l){return[r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.variables_set=function(l){const u=r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"0";return r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE)+" = "+u+`
`},r.pythonGenerator.variables_get_dynamic=r.pythonGenerator.variables_get,r.pythonGenerator.variables_set_dynamic=r.pythonGenerator.variables_set,i.module$build$src$core$utils$string,i.NameType$$module$build$src$core$names,r.pythonGenerator.text=function(l){return[r.pythonGenerator.quote_(l.getFieldValue("TEXT")),r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.text_multiline=function(l){l=r.pythonGenerator.multiline_quote_(l.getFieldValue("TEXT"));const u=l.indexOf("+")!==-1?r.pythonGenerator.ORDER_ADDITIVE:r.pythonGenerator.ORDER_ATOMIC;return[l,u]};var o=/^\s*'([^']|\\')*'\s*$/,a=function(l){return o.test(l)?[l,r.pythonGenerator.ORDER_ATOMIC]:["str("+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]};return r.pythonGenerator.text_join=function(l){switch(l.itemCount_){case 0:return["''",r.pythonGenerator.ORDER_ATOMIC];case 1:return l=r.pythonGenerator.valueToCode(l,"ADD0",r.pythonGenerator.ORDER_NONE)||"''",a(l);case 2:var u=r.pythonGenerator.valueToCode(l,"ADD0",r.pythonGenerator.ORDER_NONE)||"''";return l=r.pythonGenerator.valueToCode(l,"ADD1",r.pythonGenerator.ORDER_NONE)||"''",[a(u)[0]+" + "+a(l)[0],r.pythonGenerator.ORDER_ADDITIVE];default:u=[];for(let h=0;h<l.itemCount_;h++)u[h]=r.pythonGenerator.valueToCode(l,"ADD"+h,r.pythonGenerator.ORDER_NONE)||"''";return l=r.pythonGenerator.nameDB_.getDistinctName("x",i.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+l+") for "+l+" in ["+u.join(", ")+"]])",r.pythonGenerator.ORDER_FUNCTION_CALL]}},r.pythonGenerator.text_append=function(l){const u=r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE);return l=r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_NONE)||"''",u+" = str("+u+") + "+a(l)[0]+`
`},r.pythonGenerator.text_length=function(l){return["len("+(r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"''")+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_isEmpty=function(l){return["not len("+(r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"''")+")",r.pythonGenerator.ORDER_LOGICAL_NOT]},r.pythonGenerator.text_indexOf=function(l){var u=l.getFieldValue("END")==="FIRST"?"find":"rfind";const h=r.pythonGenerator.valueToCode(l,"FIND",r.pythonGenerator.ORDER_NONE)||"''";return u=(r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_MEMBER)||"''")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",r.pythonGenerator.ORDER_ADDITIVE]:[u,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_charAt=function(l){const u=l.getFieldValue("WHERE")||"FROM_START",h=r.pythonGenerator.valueToCode(l,"VALUE",u==="RANDOM"?r.pythonGenerator.ORDER_NONE:r.pythonGenerator.ORDER_MEMBER)||"''";switch(u){case"FIRST":return[h+"[0]",r.pythonGenerator.ORDER_MEMBER];case"LAST":return[h+"[-1]",r.pythonGenerator.ORDER_MEMBER];case"FROM_START":return l=r.pythonGenerator.getAdjustedInt(l,"AT"),[h+"["+l+"]",r.pythonGenerator.ORDER_MEMBER];case"FROM_END":return l=r.pythonGenerator.getAdjustedInt(l,"AT",1,!0),[h+"["+l+"]",r.pythonGenerator.ORDER_MEMBER];case"RANDOM":return r.pythonGenerator.definitions_.import_random="import random",[r.pythonGenerator.provideFunction_("text_random_letter",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+h+")",r.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},r.pythonGenerator.text_getSubstring=function(l){var u=l.getFieldValue("WHERE1");const h=l.getFieldValue("WHERE2"),d=r.pythonGenerator.valueToCode(l,"STRING",r.pythonGenerator.ORDER_MEMBER)||"''";switch(u){case"FROM_START":u=r.pythonGenerator.getAdjustedInt(l,"AT1"),u===0&&(u="");break;case"FROM_END":u=r.pythonGenerator.getAdjustedInt(l,"AT1",1,!0);break;case"FIRST":u="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(h){case"FROM_START":l=r.pythonGenerator.getAdjustedInt(l,"AT2",1);break;case"FROM_END":l=r.pythonGenerator.getAdjustedInt(l,"AT2",0,!0),i.module$build$src$core$utils$string.isNumber(String(l))?l===0&&(l=""):(r.pythonGenerator.definitions_.import_sys="import sys",l+=" or sys.maxsize");break;case"LAST":l="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[d+"["+u+" : "+l+"]",r.pythonGenerator.ORDER_MEMBER]},r.pythonGenerator.text_changeCase=function(l){const u={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[l.getFieldValue("CASE")];return[(r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_MEMBER)||"''")+u,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_trim=function(l){const u={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[l.getFieldValue("MODE")];return[(r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_MEMBER)||"''")+u,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_print=function(l){return"print("+(r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_NONE)||"''")+`)
`},r.pythonGenerator.text_prompt_ext=function(l){var u=r.pythonGenerator.provideFunction_("text_prompt",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);let h;return h=l.getField("TEXT")?r.pythonGenerator.quote_(l.getFieldValue("TEXT")):r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_NONE)||"''",u=u+"("+h+")",l.getFieldValue("TYPE")==="NUMBER"&&(u="float("+u+")"),[u,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_prompt=r.pythonGenerator.text_prompt_ext,r.pythonGenerator.text_count=function(l){const u=r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_MEMBER)||"''";return l=r.pythonGenerator.valueToCode(l,"SUB",r.pythonGenerator.ORDER_NONE)||"''",[u+".count("+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.text_replace=function(l){const u=r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_MEMBER)||"''",h=r.pythonGenerator.valueToCode(l,"FROM",r.pythonGenerator.ORDER_NONE)||"''";return l=r.pythonGenerator.valueToCode(l,"TO",r.pythonGenerator.ORDER_NONE)||"''",[u+".replace("+h+", "+l+")",r.pythonGenerator.ORDER_MEMBER]},r.pythonGenerator.text_reverse=function(l){return[(r.pythonGenerator.valueToCode(l,"TEXT",r.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",r.pythonGenerator.ORDER_MEMBER]},i.module$build$src$core$variables,i.NameType$$module$build$src$core$names,r.pythonGenerator.procedures_defreturn=function(l){var u=[],h=l.workspace,d=i.module$build$src$core$variables.allUsedVarModels(h)||[];for(let T=0,w;w=d[T];T++){var p=w.name;l.getVars().indexOf(p)===-1&&u.push(r.pythonGenerator.nameDB_.getName(p,i.NameType$$module$build$src$core$names.VARIABLE))}for(h=i.module$build$src$core$variables.allDeveloperVariables(h),d=0;d<h.length;d++)u.push(r.pythonGenerator.nameDB_.getName(h[d],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));h=u.length?r.pythonGenerator.INDENT+"global "+u.join(", ")+`
`:"",u=r.pythonGenerator.nameDB_.getName(l.getFieldValue("NAME"),i.NameType$$module$build$src$core$names.PROCEDURE),d="",r.pythonGenerator.STATEMENT_PREFIX&&(d+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_PREFIX,l)),r.pythonGenerator.STATEMENT_SUFFIX&&(d+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_SUFFIX,l)),d&&(d=r.pythonGenerator.prefixLines(d,r.pythonGenerator.INDENT)),p="",r.pythonGenerator.INFINITE_LOOP_TRAP&&(p=r.pythonGenerator.prefixLines(r.pythonGenerator.injectId(r.pythonGenerator.INFINITE_LOOP_TRAP,l),r.pythonGenerator.INDENT));let m=r.pythonGenerator.statementToCode(l,"STACK"),g=r.pythonGenerator.valueToCode(l,"RETURN",r.pythonGenerator.ORDER_NONE)||"",v="";m&&g&&(v=d),g?g=r.pythonGenerator.INDENT+"return "+g+`
`:m||(m=r.pythonGenerator.PASS);const y=[],S=l.getVars();for(let T=0;T<S.length;T++)y[T]=r.pythonGenerator.nameDB_.getName(S[T],i.NameType$$module$build$src$core$names.VARIABLE);return h="def "+u+"("+y.join(", ")+`):
`+h+d+p+m+v+g,h=r.pythonGenerator.scrub_(l,h),r.pythonGenerator.definitions_["%"+u]=h,null},r.pythonGenerator.procedures_defnoreturn=r.pythonGenerator.procedures_defreturn,r.pythonGenerator.procedures_callreturn=function(l){const u=r.pythonGenerator.nameDB_.getName(l.getFieldValue("NAME"),i.NameType$$module$build$src$core$names.PROCEDURE),h=[],d=l.getVars();for(let p=0;p<d.length;p++)h[p]=r.pythonGenerator.valueToCode(l,"ARG"+p,r.pythonGenerator.ORDER_NONE)||"None";return[u+"("+h.join(", ")+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.procedures_callnoreturn=function(l){return r.pythonGenerator.procedures_callreturn(l)[0]+`
`},r.pythonGenerator.procedures_ifreturn=function(l){let u="if "+(r.pythonGenerator.valueToCode(l,"CONDITION",r.pythonGenerator.ORDER_NONE)||"False")+`:
`;return r.pythonGenerator.STATEMENT_SUFFIX&&(u+=r.pythonGenerator.prefixLines(r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_SUFFIX,l),r.pythonGenerator.INDENT)),l.hasReturnValue_?(l=r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"None",u+=r.pythonGenerator.INDENT+"return "+l+`
`):u+=r.pythonGenerator.INDENT+`return
`,u},i.NameType$$module$build$src$core$names,r.pythonGenerator.addReservedWords("math,random,Number"),r.pythonGenerator.math_number=function(l){l=Number(l.getFieldValue("NUM"));let u;return l===1/0?(l='float("inf")',u=r.pythonGenerator.ORDER_FUNCTION_CALL):l===-1/0?(l='-float("inf")',u=r.pythonGenerator.ORDER_UNARY_SIGN):u=0>l?r.pythonGenerator.ORDER_UNARY_SIGN:r.pythonGenerator.ORDER_ATOMIC,[l,u]},r.pythonGenerator.math_arithmetic=function(l){var u={ADD:[" + ",r.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",r.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",r.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",r.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",r.pythonGenerator.ORDER_EXPONENTIATION]}[l.getFieldValue("OP")];const h=u[0];u=u[1];const d=r.pythonGenerator.valueToCode(l,"A",u)||"0";return l=r.pythonGenerator.valueToCode(l,"B",u)||"0",[d+h+l,u]},r.pythonGenerator.math_single=function(l){const u=l.getFieldValue("OP");let h;if(u==="NEG")return h=r.pythonGenerator.valueToCode(l,"NUM",r.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+h,r.pythonGenerator.ORDER_UNARY_SIGN];switch(r.pythonGenerator.definitions_.import_math="import math",l=u==="SIN"||u==="COS"||u==="TAN"?r.pythonGenerator.valueToCode(l,"NUM",r.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":r.pythonGenerator.valueToCode(l,"NUM",r.pythonGenerator.ORDER_NONE)||"0",u){case"ABS":h="math.fabs("+l+")";break;case"ROOT":h="math.sqrt("+l+")";break;case"LN":h="math.log("+l+")";break;case"LOG10":h="math.log10("+l+")";break;case"EXP":h="math.exp("+l+")";break;case"POW10":h="math.pow(10,"+l+")";break;case"ROUND":h="round("+l+")";break;case"ROUNDUP":h="math.ceil("+l+")";break;case"ROUNDDOWN":h="math.floor("+l+")";break;case"SIN":h="math.sin("+l+" / 180.0 * math.pi)";break;case"COS":h="math.cos("+l+" / 180.0 * math.pi)";break;case"TAN":h="math.tan("+l+" / 180.0 * math.pi)"}if(h)return[h,r.pythonGenerator.ORDER_FUNCTION_CALL];switch(u){case"ASIN":h="math.asin("+l+") / math.pi * 180";break;case"ACOS":h="math.acos("+l+") / math.pi * 180";break;case"ATAN":h="math.atan("+l+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+u)}return[h,r.pythonGenerator.ORDER_MULTIPLICATIVE]},r.pythonGenerator.math_constant=function(l){const u={PI:["math.pi",r.pythonGenerator.ORDER_MEMBER],E:["math.e",r.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",r.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",r.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",r.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",r.pythonGenerator.ORDER_ATOMIC]};return l=l.getFieldValue("CONSTANT"),l!=="INFINITY"&&(r.pythonGenerator.definitions_.import_math="import math"),u[l]},r.pythonGenerator.math_number_property=function(l){var u={EVEN:[" % 2 == 0",r.pythonGenerator.ORDER_MULTIPLICATIVE,r.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",r.pythonGenerator.ORDER_MULTIPLICATIVE,r.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",r.pythonGenerator.ORDER_MULTIPLICATIVE,r.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",r.pythonGenerator.ORDER_RELATIONAL,r.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",r.pythonGenerator.ORDER_RELATIONAL,r.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,r.pythonGenerator.ORDER_MULTIPLICATIVE,r.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,r.pythonGenerator.ORDER_NONE,r.pythonGenerator.ORDER_FUNCTION_CALL]};const h=l.getFieldValue("PROPERTY"),[d,p,m]=u[h];if(u=r.pythonGenerator.valueToCode(l,"NUMBER_TO_CHECK",p)||"0",h==="PRIME")r.pythonGenerator.definitions_.import_math="import math",r.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",l=r.pythonGenerator.provideFunction_("math_isPrime",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+u+")";else if(h==="DIVISIBLE_BY"){if(l=r.pythonGenerator.valueToCode(l,"DIVISOR",r.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",l==="0")return["False",r.pythonGenerator.ORDER_ATOMIC];l=u+" % "+l+" == 0"}else l=u+d;return[l,m]},r.pythonGenerator.math_change=function(l){r.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const u=r.pythonGenerator.valueToCode(l,"DELTA",r.pythonGenerator.ORDER_ADDITIVE)||"0";return l=r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),l+" = ("+l+" if isinstance("+l+", Number) else 0) + "+u+`
`},r.pythonGenerator.math_round=r.pythonGenerator.math_single,r.pythonGenerator.math_trig=r.pythonGenerator.math_single,r.pythonGenerator.math_on_list=function(l){var u=l.getFieldValue("OP");switch(l=r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_NONE)||"[]",u){case"SUM":u="sum("+l+")";break;case"MIN":u="min("+l+")";break;case"MAX":u="max("+l+")";break;case"AVERAGE":r.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",u=r.pythonGenerator.provideFunction_("math_mean",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+l+")";break;case"MEDIAN":r.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",u=r.pythonGenerator.provideFunction_("math_median",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+l+")";break;case"MODE":u=r.pythonGenerator.provideFunction_("math_modes",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+l+")";break;case"STD_DEV":r.pythonGenerator.definitions_.import_math="import math",u=r.pythonGenerator.provideFunction_("math_standard_deviation",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+l+")";break;case"RANDOM":r.pythonGenerator.definitions_.import_random="import random",u="random.choice("+l+")";break;default:throw Error("Unknown operator: "+u)}return[u,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.math_modulo=function(l){const u=r.pythonGenerator.valueToCode(l,"DIVIDEND",r.pythonGenerator.ORDER_MULTIPLICATIVE)||"0";return l=r.pythonGenerator.valueToCode(l,"DIVISOR",r.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",[u+" % "+l,r.pythonGenerator.ORDER_MULTIPLICATIVE]},r.pythonGenerator.math_constrain=function(l){const u=r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"0",h=r.pythonGenerator.valueToCode(l,"LOW",r.pythonGenerator.ORDER_NONE)||"0";return l=r.pythonGenerator.valueToCode(l,"HIGH",r.pythonGenerator.ORDER_NONE)||"float('inf')",["min(max("+u+", "+h+"), "+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.math_random_int=function(l){r.pythonGenerator.definitions_.import_random="import random";const u=r.pythonGenerator.valueToCode(l,"FROM",r.pythonGenerator.ORDER_NONE)||"0";return l=r.pythonGenerator.valueToCode(l,"TO",r.pythonGenerator.ORDER_NONE)||"0",["random.randint("+u+", "+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.math_random_float=function(l){return r.pythonGenerator.definitions_.import_random="import random",["random.random()",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.math_atan2=function(l){r.pythonGenerator.definitions_.import_math="import math";const u=r.pythonGenerator.valueToCode(l,"X",r.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(r.pythonGenerator.valueToCode(l,"Y",r.pythonGenerator.ORDER_NONE)||"0")+", "+u+") / math.pi * 180",r.pythonGenerator.ORDER_MULTIPLICATIVE]},i.module$build$src$core$utils$string,i.NameType$$module$build$src$core$names,r.pythonGenerator.controls_repeat_ext=function(l){let u;u=l.getField("TIMES")?String(parseInt(l.getFieldValue("TIMES"),10)):r.pythonGenerator.valueToCode(l,"TIMES",r.pythonGenerator.ORDER_NONE)||"0",u=i.module$build$src$core$utils$string.isNumber(u)?parseInt(u,10):"int("+u+")";let h=r.pythonGenerator.statementToCode(l,"DO");return h=r.pythonGenerator.addLoopTrap(h,l)||r.pythonGenerator.PASS,"for "+r.pythonGenerator.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE)+" in range("+u+`):
`+h},r.pythonGenerator.controls_repeat=r.pythonGenerator.controls_repeat_ext,r.pythonGenerator.controls_whileUntil=function(l){const u=l.getFieldValue("MODE")==="UNTIL";let h=r.pythonGenerator.valueToCode(l,"BOOL",u?r.pythonGenerator.ORDER_LOGICAL_NOT:r.pythonGenerator.ORDER_NONE)||"False",d=r.pythonGenerator.statementToCode(l,"DO");return d=r.pythonGenerator.addLoopTrap(d,l)||r.pythonGenerator.PASS,u&&(h="not "+h),"while "+h+`:
`+d},r.pythonGenerator.controls_for=function(l){const u=r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE);var h=r.pythonGenerator.valueToCode(l,"FROM",r.pythonGenerator.ORDER_NONE)||"0",d=r.pythonGenerator.valueToCode(l,"TO",r.pythonGenerator.ORDER_NONE)||"0",p=r.pythonGenerator.valueToCode(l,"BY",r.pythonGenerator.ORDER_NONE)||"1";let m=r.pythonGenerator.statementToCode(l,"DO");m=r.pythonGenerator.addLoopTrap(m,l)||r.pythonGenerator.PASS;let g="";const v=function(){return r.pythonGenerator.provideFunction_("upRange",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)},y=function(){return r.pythonGenerator.provideFunction_("downRange",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(l=function(S,T,w){return"("+S+" <= "+T+") and "+v()+"("+S+", "+T+", "+w+") or "+y()+"("+S+", "+T+", "+w+")"},i.module$build$src$core$utils$string.isNumber(h)&&i.module$build$src$core$utils$string.isNumber(d)&&i.module$build$src$core$utils$string.isNumber(p))h=Number(h),d=Number(d),p=Math.abs(Number(p)),h%1===0&&d%1===0&&p%1===0?(h<=d?(d++,l=h===0&&p===1?d:h+", "+d,p!==1&&(l+=", "+p)):(d--,l=h+", "+d+", -"+p),l="range("+l+")"):(l=h<d?v():y(),l+="("+h+", "+d+", "+p+")");else{const S=function(T,w){return i.module$build$src$core$utils$string.isNumber(T)?T=Number(T):T.match(/^\w+$/)||(w=r.pythonGenerator.nameDB_.getDistinctName(u+w,i.NameType$$module$build$src$core$names.VARIABLE),g+=w+" = "+T+`
`,T=w),T};h=S(h,"_start"),d=S(d,"_end"),p=S(p,"_inc"),typeof h=="number"&&typeof d=="number"?(l=h<d?v():y(),l+="("+h+", "+d+", "+p+")"):l=l(h,d,p)}return g+="for "+u+" in "+l+`:
`+m},r.pythonGenerator.controls_forEach=function(l){const u=r.pythonGenerator.nameDB_.getName(l.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),h=r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_RELATIONAL)||"[]";let d=r.pythonGenerator.statementToCode(l,"DO");return d=r.pythonGenerator.addLoopTrap(d,l)||r.pythonGenerator.PASS,"for "+u+" in "+h+`:
`+d},r.pythonGenerator.controls_flow_statements=function(l){let u="";if(r.pythonGenerator.STATEMENT_PREFIX&&(u+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_PREFIX,l)),r.pythonGenerator.STATEMENT_SUFFIX&&(u+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_SUFFIX,l)),r.pythonGenerator.STATEMENT_PREFIX){const h=l.getSurroundLoop();h&&!h.suppressPrefixSuffix&&(u+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_PREFIX,h))}switch(l.getFieldValue("FLOW")){case"BREAK":return u+`break
`;case"CONTINUE":return u+`continue
`}throw Error("Unknown flow statement.")},r.pythonGenerator.controls_if=function(l){let u=0,h="",d,p;r.pythonGenerator.STATEMENT_PREFIX&&(h+=r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_PREFIX,l));do p=r.pythonGenerator.valueToCode(l,"IF"+u,r.pythonGenerator.ORDER_NONE)||"False",d=r.pythonGenerator.statementToCode(l,"DO"+u)||r.pythonGenerator.PASS,r.pythonGenerator.STATEMENT_SUFFIX&&(d=r.pythonGenerator.prefixLines(r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_SUFFIX,l),r.pythonGenerator.INDENT)+d),h+=(u===0?"if ":"elif ")+p+`:
`+d,u++;while(l.getInput("IF"+u));return(l.getInput("ELSE")||r.pythonGenerator.STATEMENT_SUFFIX)&&(d=r.pythonGenerator.statementToCode(l,"ELSE")||r.pythonGenerator.PASS,r.pythonGenerator.STATEMENT_SUFFIX&&(d=r.pythonGenerator.prefixLines(r.pythonGenerator.injectId(r.pythonGenerator.STATEMENT_SUFFIX,l),r.pythonGenerator.INDENT)+d),h+=`else:
`+d),h},r.pythonGenerator.controls_ifelse=r.pythonGenerator.controls_if,r.pythonGenerator.logic_compare=function(l){const u={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],h=r.pythonGenerator.ORDER_RELATIONAL,d=r.pythonGenerator.valueToCode(l,"A",h)||"0";return l=r.pythonGenerator.valueToCode(l,"B",h)||"0",[d+" "+u+" "+l,h]},r.pythonGenerator.logic_operation=function(l){const u=l.getFieldValue("OP")==="AND"?"and":"or",h=u==="and"?r.pythonGenerator.ORDER_LOGICAL_AND:r.pythonGenerator.ORDER_LOGICAL_OR;let d=r.pythonGenerator.valueToCode(l,"A",h);if(l=r.pythonGenerator.valueToCode(l,"B",h),d||l){const p=u==="and"?"True":"False";d||(d=p),l||(l=p)}else l=d="False";return[d+" "+u+" "+l,h]},r.pythonGenerator.logic_negate=function(l){return["not "+(r.pythonGenerator.valueToCode(l,"BOOL",r.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),r.pythonGenerator.ORDER_LOGICAL_NOT]},r.pythonGenerator.logic_boolean=function(l){return[l.getFieldValue("BOOL")==="TRUE"?"True":"False",r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.logic_null=function(l){return["None",r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.logic_ternary=function(l){const u=r.pythonGenerator.valueToCode(l,"IF",r.pythonGenerator.ORDER_CONDITIONAL)||"False",h=r.pythonGenerator.valueToCode(l,"THEN",r.pythonGenerator.ORDER_CONDITIONAL)||"None";return l=r.pythonGenerator.valueToCode(l,"ELSE",r.pythonGenerator.ORDER_CONDITIONAL)||"None",[h+" if "+u+" else "+l,r.pythonGenerator.ORDER_CONDITIONAL]},i.module$build$src$core$utils$string,i.NameType$$module$build$src$core$names,r.pythonGenerator.lists_create_empty=function(l){return["[]",r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.lists_create_with=function(l){const u=Array(l.itemCount_);for(let h=0;h<l.itemCount_;h++)u[h]=r.pythonGenerator.valueToCode(l,"ADD"+h,r.pythonGenerator.ORDER_NONE)||"None";return["["+u.join(", ")+"]",r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.lists_repeat=function(l){const u=r.pythonGenerator.valueToCode(l,"ITEM",r.pythonGenerator.ORDER_NONE)||"None";return l=r.pythonGenerator.valueToCode(l,"NUM",r.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",["["+u+"] * "+l,r.pythonGenerator.ORDER_MULTIPLICATIVE]},r.pythonGenerator.lists_length=function(l){return["len("+(r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"[]")+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.lists_isEmpty=function(l){return["not len("+(r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"[]")+")",r.pythonGenerator.ORDER_LOGICAL_NOT]},r.pythonGenerator.lists_indexOf=function(l){const u=r.pythonGenerator.valueToCode(l,"FIND",r.pythonGenerator.ORDER_NONE)||"[]",h=r.pythonGenerator.valueToCode(l,"VALUE",r.pythonGenerator.ORDER_NONE)||"''";let d=" -1",p="",m=" - 1";return l.workspace.options.oneBasedIndex&&(d=" 0",p=" + 1",m=""),[(l.getFieldValue("END")==="FIRST"?r.pythonGenerator.provideFunction_("first_index",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${p}
  except: index =${d}
  return index
`):r.pythonGenerator.provideFunction_("last_index",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${m}
  except: index =${d}
  return index
`))+"("+h+", "+u+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.lists_getIndex=function(l){const u=l.getFieldValue("MODE")||"GET",h=l.getFieldValue("WHERE")||"FROM_START";var d=r.pythonGenerator.valueToCode(l,"VALUE",h==="RANDOM"?r.pythonGenerator.ORDER_NONE:r.pythonGenerator.ORDER_MEMBER)||"[]";switch(h){case"FIRST":if(u==="GET")return[d+"[0]",r.pythonGenerator.ORDER_MEMBER];if(u==="GET_REMOVE")return[d+".pop(0)",r.pythonGenerator.ORDER_FUNCTION_CALL];if(u==="REMOVE")return d+`.pop(0)
`;break;case"LAST":if(u==="GET")return[d+"[-1]",r.pythonGenerator.ORDER_MEMBER];if(u==="GET_REMOVE")return[d+".pop()",r.pythonGenerator.ORDER_FUNCTION_CALL];if(u==="REMOVE")return d+`.pop()
`;break;case"FROM_START":if(l=r.pythonGenerator.getAdjustedInt(l,"AT"),u==="GET")return[d+"["+l+"]",r.pythonGenerator.ORDER_MEMBER];if(u==="GET_REMOVE")return[d+".pop("+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL];if(u==="REMOVE")return d+".pop("+l+`)
`;break;case"FROM_END":if(l=r.pythonGenerator.getAdjustedInt(l,"AT",1,!0),u==="GET")return[d+"["+l+"]",r.pythonGenerator.ORDER_MEMBER];if(u==="GET_REMOVE")return[d+".pop("+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL];if(u==="REMOVE")return d+".pop("+l+`)
`;break;case"RANDOM":if(r.pythonGenerator.definitions_.import_random="import random",u==="GET")return["random.choice("+d+")",r.pythonGenerator.ORDER_FUNCTION_CALL];if(d=r.pythonGenerator.provideFunction_("lists_remove_random_item",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+d+")",u==="GET_REMOVE")return[d,r.pythonGenerator.ORDER_FUNCTION_CALL];if(u==="REMOVE")return d+`
`}throw Error("Unhandled combination (lists_getIndex).")},r.pythonGenerator.lists_setIndex=function(l){let u=r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_MEMBER)||"[]";const h=l.getFieldValue("MODE")||"GET";var d=l.getFieldValue("WHERE")||"FROM_START";const p=r.pythonGenerator.valueToCode(l,"TO",r.pythonGenerator.ORDER_NONE)||"None";switch(d){case"FIRST":if(h==="SET")return u+"[0] = "+p+`
`;if(h==="INSERT")return u+".insert(0, "+p+`)
`;break;case"LAST":if(h==="SET")return u+"[-1] = "+p+`
`;if(h==="INSERT")return u+".append("+p+`)
`;break;case"FROM_START":if(l=r.pythonGenerator.getAdjustedInt(l,"AT"),h==="SET")return u+"["+l+"] = "+p+`
`;if(h==="INSERT")return u+".insert("+l+", "+p+`)
`;break;case"FROM_END":if(l=r.pythonGenerator.getAdjustedInt(l,"AT",1,!0),h==="SET")return u+"["+l+"] = "+p+`
`;if(h==="INSERT")return u+".insert("+l+", "+p+`)
`;break;case"RANDOM":if(r.pythonGenerator.definitions_.import_random="import random",u.match(/^\w+$/)?l="":(l=r.pythonGenerator.nameDB_.getDistinctName("tmp_list",i.NameType$$module$build$src$core$names.VARIABLE),d=l+" = "+u+`
`,u=l,l=d),d=r.pythonGenerator.nameDB_.getDistinctName("tmp_x",i.NameType$$module$build$src$core$names.VARIABLE),l+=d+" = int(random.random() * len("+u+`))
`,h==="SET")return l+(u+"["+d+"] = "+p+`
`);if(h==="INSERT")return l+(u+".insert("+d+", "+p+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},r.pythonGenerator.lists_getSublist=function(l){const u=r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_MEMBER)||"[]";var h=l.getFieldValue("WHERE1");const d=l.getFieldValue("WHERE2");switch(h){case"FROM_START":h=r.pythonGenerator.getAdjustedInt(l,"AT1"),h===0&&(h="");break;case"FROM_END":h=r.pythonGenerator.getAdjustedInt(l,"AT1",1,!0);break;case"FIRST":h="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(d){case"FROM_START":l=r.pythonGenerator.getAdjustedInt(l,"AT2",1);break;case"FROM_END":l=r.pythonGenerator.getAdjustedInt(l,"AT2",0,!0),i.module$build$src$core$utils$string.isNumber(String(l))?l===0&&(l=""):(r.pythonGenerator.definitions_.import_sys="import sys",l+=" or sys.maxsize");break;case"LAST":l="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[u+"["+h+" : "+l+"]",r.pythonGenerator.ORDER_MEMBER]},r.pythonGenerator.lists_sort=function(l){const u=r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_NONE)||"[]",h=l.getFieldValue("TYPE");return l=l.getFieldValue("DIRECTION")==="1"?"False":"True",[r.pythonGenerator.provideFunction_("lists_sort",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+u+', "'+h+'", '+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.lists_split=function(l){var u=l.getFieldValue("MODE");if(u==="SPLIT")u=r.pythonGenerator.valueToCode(l,"INPUT",r.pythonGenerator.ORDER_MEMBER)||"''",l=r.pythonGenerator.valueToCode(l,"DELIM",r.pythonGenerator.ORDER_NONE),l=u+".split("+l+")";else if(u==="JOIN")u=r.pythonGenerator.valueToCode(l,"INPUT",r.pythonGenerator.ORDER_NONE)||"[]",l=(r.pythonGenerator.valueToCode(l,"DELIM",r.pythonGenerator.ORDER_MEMBER)||"''")+".join("+u+")";else throw Error("Unknown mode: "+u);return[l,r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.lists_reverse=function(l){return["list(reversed("+(r.pythonGenerator.valueToCode(l,"LIST",r.pythonGenerator.ORDER_NONE)||"[]")+"))",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.colour_picker=function(l){return[r.pythonGenerator.quote_(l.getFieldValue("COLOUR")),r.pythonGenerator.ORDER_ATOMIC]},r.pythonGenerator.colour_random=function(l){return r.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.colour_rgb=function(l){const u=r.pythonGenerator.provideFunction_("colour_rgb",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`),h=r.pythonGenerator.valueToCode(l,"RED",r.pythonGenerator.ORDER_NONE)||0,d=r.pythonGenerator.valueToCode(l,"GREEN",r.pythonGenerator.ORDER_NONE)||0;return l=r.pythonGenerator.valueToCode(l,"BLUE",r.pythonGenerator.ORDER_NONE)||0,[u+"("+h+", "+d+", "+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.pythonGenerator.colour_blend=function(l){const u=r.pythonGenerator.provideFunction_("colour_blend",`
def ${r.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`),h=r.pythonGenerator.valueToCode(l,"COLOUR1",r.pythonGenerator.ORDER_NONE)||"'#000000'",d=r.pythonGenerator.valueToCode(l,"COLOUR2",r.pythonGenerator.ORDER_NONE)||"'#000000'";return l=r.pythonGenerator.valueToCode(l,"RATIO",r.pythonGenerator.ORDER_NONE)||0,[u+"("+h+", "+d+", "+l+")",r.pythonGenerator.ORDER_FUNCTION_CALL]},r.__namespace__=i,r})}(VR)),VR.exports}(function(n,e){(function(t,i){n.exports=i(uA(),uoe())})(Ki,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(S9);var Q2=S9.exports,T9={exports:{}},HR={exports:{}},m4;function hoe(){return m4||(m4=1,function(n,e){(function(t,i){n.exports=i(cA())})(Ki,function(t){var i=t.__namespace__,r={};i.module$build$src$core$variables,i.module$build$src$core$utils$string,i.CodeGenerator$$module$build$src$core$generator,i.module$build$src$core$input_types.inputTypes,i.module$build$src$core$names.Names,i.NameType$$module$build$src$core$names,r.javascriptGenerator=new i.CodeGenerator$$module$build$src$core$generator("JavaScript"),r.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),r.javascriptGenerator.ORDER_ATOMIC=0,r.javascriptGenerator.ORDER_NEW=1.1,r.javascriptGenerator.ORDER_MEMBER=1.2,r.javascriptGenerator.ORDER_FUNCTION_CALL=2,r.javascriptGenerator.ORDER_INCREMENT=3,r.javascriptGenerator.ORDER_DECREMENT=3,r.javascriptGenerator.ORDER_BITWISE_NOT=4.1,r.javascriptGenerator.ORDER_UNARY_PLUS=4.2,r.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,r.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,r.javascriptGenerator.ORDER_TYPEOF=4.5,r.javascriptGenerator.ORDER_VOID=4.6,r.javascriptGenerator.ORDER_DELETE=4.7,r.javascriptGenerator.ORDER_AWAIT=4.8,r.javascriptGenerator.ORDER_EXPONENTIATION=5,r.javascriptGenerator.ORDER_MULTIPLICATION=5.1,r.javascriptGenerator.ORDER_DIVISION=5.2,r.javascriptGenerator.ORDER_MODULUS=5.3,r.javascriptGenerator.ORDER_SUBTRACTION=6.1,r.javascriptGenerator.ORDER_ADDITION=6.2,r.javascriptGenerator.ORDER_BITWISE_SHIFT=7,r.javascriptGenerator.ORDER_RELATIONAL=8,r.javascriptGenerator.ORDER_IN=8,r.javascriptGenerator.ORDER_INSTANCEOF=8,r.javascriptGenerator.ORDER_EQUALITY=9,r.javascriptGenerator.ORDER_BITWISE_AND=10,r.javascriptGenerator.ORDER_BITWISE_XOR=11,r.javascriptGenerator.ORDER_BITWISE_OR=12,r.javascriptGenerator.ORDER_LOGICAL_AND=13,r.javascriptGenerator.ORDER_LOGICAL_OR=14,r.javascriptGenerator.ORDER_CONDITIONAL=15,r.javascriptGenerator.ORDER_ASSIGNMENT=16,r.javascriptGenerator.ORDER_YIELD=17,r.javascriptGenerator.ORDER_COMMA=18,r.javascriptGenerator.ORDER_NONE=99,r.javascriptGenerator.ORDER_OVERRIDES=[[r.javascriptGenerator.ORDER_FUNCTION_CALL,r.javascriptGenerator.ORDER_MEMBER],[r.javascriptGenerator.ORDER_FUNCTION_CALL,r.javascriptGenerator.ORDER_FUNCTION_CALL],[r.javascriptGenerator.ORDER_MEMBER,r.javascriptGenerator.ORDER_MEMBER],[r.javascriptGenerator.ORDER_MEMBER,r.javascriptGenerator.ORDER_FUNCTION_CALL],[r.javascriptGenerator.ORDER_LOGICAL_NOT,r.javascriptGenerator.ORDER_LOGICAL_NOT],[r.javascriptGenerator.ORDER_MULTIPLICATION,r.javascriptGenerator.ORDER_MULTIPLICATION],[r.javascriptGenerator.ORDER_ADDITION,r.javascriptGenerator.ORDER_ADDITION],[r.javascriptGenerator.ORDER_LOGICAL_AND,r.javascriptGenerator.ORDER_LOGICAL_AND],[r.javascriptGenerator.ORDER_LOGICAL_OR,r.javascriptGenerator.ORDER_LOGICAL_OR]],r.javascriptGenerator.isInitialized=!1,r.javascriptGenerator.init=function(h){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(h.getVariableMap()),this.nameDB_.populateVariables(h),this.nameDB_.populateProcedures(h);const d=[];var p=i.module$build$src$core$variables.allDeveloperVariables(h);for(let m=0;m<p.length;m++)d.push(this.nameDB_.getName(p[m],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(h=i.module$build$src$core$variables.allUsedVarModels(h),p=0;p<h.length;p++)d.push(this.nameDB_.getName(h[p].getId(),i.NameType$$module$build$src$core$names.VARIABLE));d.length&&(this.definitions_.variables="var "+d.join(", ")+";"),this.isInitialized=!0},r.javascriptGenerator.finish=function(h){const d=Object.values(this.definitions_);return h=Object.getPrototypeOf(this).finish.call(this,h),this.isInitialized=!1,this.nameDB_.reset(),d.join(`

`)+`


`+h},r.javascriptGenerator.scrubNakedValue=function(h){return h+`;
`},r.javascriptGenerator.quote_=function(h){return h=h.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+h+"'"},r.javascriptGenerator.multiline_quote_=function(h){return h.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},r.javascriptGenerator.scrub_=function(h,d,p){let m="";if(!h.outputConnection||!h.outputConnection.targetConnection){var g=h.getCommentText();g&&(g=i.module$build$src$core$utils$string.wrap(g,this.COMMENT_WRAP-3),m+=this.prefixLines(g+`
`,"// "));for(let v=0;v<h.inputList.length;v++)h.inputList[v].type===i.module$build$src$core$input_types.inputTypes.VALUE&&(g=h.inputList[v].connection.targetBlock())&&(g=this.allNestedComments(g))&&(m+=this.prefixLines(g,"// "))}return h=h.nextConnection&&h.nextConnection.targetBlock(),p=p?"":this.blockToCode(h),m+d+p},r.javascriptGenerator.getAdjusted=function(h,d,p,m,g){p=p||0,g=g||this.ORDER_NONE,h.workspace.options.oneBasedIndex&&p--;const v=h.workspace.options.oneBasedIndex?"1":"0";let y,S=g;return 0<p?y=S=this.ORDER_ADDITION:0>p?y=S=this.ORDER_SUBTRACTION:m&&(y=S=this.ORDER_UNARY_NEGATION),h=this.valueToCode(h,d,S)||v,i.module$build$src$core$utils$string.isNumber(h)?(h=Number(h)+p,m&&(h=-h)):(0<p?h=h+" + "+p:0>p&&(h=h+" - "+-p),m&&(h=p?"-("+h+")":"-"+h),y=Math.floor(y),g=Math.floor(g),y&&g>=y&&(h="("+h+")")),h},i.NameType$$module$build$src$core$names,r.javascriptGenerator.variables_get=function(h){return[r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.variables_set=function(h){const d=r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE)+" = "+d+`;
`},r.javascriptGenerator.variables_get_dynamic=r.javascriptGenerator.variables_get,r.javascriptGenerator.variables_set_dynamic=r.javascriptGenerator.variables_set,i.NameType$$module$build$src$core$names;var o=/^\s*'([^']|\\')*'\s*$/,a=function(h){return o.test(h)?[h,r.javascriptGenerator.ORDER_ATOMIC]:["String("+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},l=function(h,d,p){return d==="FIRST"?"0":d==="FROM_END"?h+".length - 1 - "+p:d==="LAST"?h+".length - 1":p};r.javascriptGenerator.text=function(h){return[r.javascriptGenerator.quote_(h.getFieldValue("TEXT")),r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.text_multiline=function(h){h=r.javascriptGenerator.multiline_quote_(h.getFieldValue("TEXT"));const d=h.indexOf("+")!==-1?r.javascriptGenerator.ORDER_ADDITION:r.javascriptGenerator.ORDER_ATOMIC;return[h,d]},r.javascriptGenerator.text_join=function(h){switch(h.itemCount_){case 0:return["''",r.javascriptGenerator.ORDER_ATOMIC];case 1:return h=r.javascriptGenerator.valueToCode(h,"ADD0",r.javascriptGenerator.ORDER_NONE)||"''",a(h);case 2:var d=r.javascriptGenerator.valueToCode(h,"ADD0",r.javascriptGenerator.ORDER_NONE)||"''";return h=r.javascriptGenerator.valueToCode(h,"ADD1",r.javascriptGenerator.ORDER_NONE)||"''",[a(d)[0]+" + "+a(h)[0],r.javascriptGenerator.ORDER_ADDITION];default:d=Array(h.itemCount_);for(let p=0;p<h.itemCount_;p++)d[p]=r.javascriptGenerator.valueToCode(h,"ADD"+p,r.javascriptGenerator.ORDER_NONE)||"''";return["["+d.join(",")+"].join('')",r.javascriptGenerator.ORDER_FUNCTION_CALL]}},r.javascriptGenerator.text_append=function(h){const d=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE);return h=r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_NONE)||"''",d+" += "+a(h)[0]+`;
`},r.javascriptGenerator.text_length=function(h){return[(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"''")+".length",r.javascriptGenerator.ORDER_MEMBER]},r.javascriptGenerator.text_isEmpty=function(h){return["!"+(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"''")+".length",r.javascriptGenerator.ORDER_LOGICAL_NOT]},r.javascriptGenerator.text_indexOf=function(h){var d=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const p=r.javascriptGenerator.valueToCode(h,"FIND",r.javascriptGenerator.ORDER_NONE)||"''";return d=(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"''")+"."+d+"("+p+")",h.workspace.options.oneBasedIndex?[d+" + 1",r.javascriptGenerator.ORDER_ADDITION]:[d,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_charAt=function(h){const d=h.getFieldValue("WHERE")||"FROM_START",p=r.javascriptGenerator.valueToCode(h,"VALUE",d==="RANDOM"?r.javascriptGenerator.ORDER_NONE:r.javascriptGenerator.ORDER_MEMBER)||"''";switch(d){case"FIRST":return[p+".charAt(0)",r.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[p+".slice(-1)",r.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return h=r.javascriptGenerator.getAdjusted(h,"AT"),[p+".charAt("+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return h=r.javascriptGenerator.getAdjusted(h,"AT",1,!0),[p+".slice("+h+").charAt(0)",r.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[r.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+p+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},r.javascriptGenerator.text_getSubstring=function(h){var d=h.getFieldValue("WHERE1"),p=h.getFieldValue("WHERE2"),m=d!=="FROM_END"&&d!=="LAST"&&p!=="FROM_END"&&p!=="LAST",g=r.javascriptGenerator.valueToCode(h,"STRING",m?r.javascriptGenerator.ORDER_MEMBER:r.javascriptGenerator.ORDER_NONE)||"''";if(d==="FIRST"&&p==="LAST")return[g,r.javascriptGenerator.ORDER_NONE];if(g.match(/^'?\w+'?$/)||m){switch(d){case"FROM_START":d=r.javascriptGenerator.getAdjusted(h,"AT1");break;case"FROM_END":d=r.javascriptGenerator.getAdjusted(h,"AT1",1,!1,r.javascriptGenerator.ORDER_SUBTRACTION),d=g+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(p){case"FROM_START":p=r.javascriptGenerator.getAdjusted(h,"AT2",1);break;case"FROM_END":p=r.javascriptGenerator.getAdjusted(h,"AT2",0,!1,r.javascriptGenerator.ORDER_SUBTRACTION),p=g+".length - "+p;break;case"LAST":p=g+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}g=g+".slice("+d+", "+p+")"}else{m=r.javascriptGenerator.getAdjusted(h,"AT1"),h=r.javascriptGenerator.getAdjusted(h,"AT2");const v={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};g=r.javascriptGenerator.provideFunction_("subsequence"+v[d]+v[p],`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${d==="FROM_END"||d==="FROM_START"?", at1":""}${p==="FROM_END"||p==="FROM_START"?", at2":""}) {
  var start = ${l("sequence",d,"at1")};
  var end = ${l("sequence",p,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+g+(d==="FROM_END"||d==="FROM_START"?", "+m:"")+(p==="FROM_END"||p==="FROM_START"?", "+h:"")+")"}return[g,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_changeCase=function(h){const d={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[h.getFieldValue("CASE")];return h=r.javascriptGenerator.valueToCode(h,"TEXT",d?r.javascriptGenerator.ORDER_MEMBER:r.javascriptGenerator.ORDER_NONE)||"''",[d?h+d:r.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_trim=function(h){const d={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[h.getFieldValue("MODE")];return[(r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_MEMBER)||"''")+d,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_print=function(h){return"window.alert("+(r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_NONE)||"''")+`);
`},r.javascriptGenerator.text_prompt_ext=function(h){let d="window.prompt("+(h.getField("TEXT")?r.javascriptGenerator.quote_(h.getFieldValue("TEXT")):r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_NONE)||"''")+")";return h.getFieldValue("TYPE")==="NUMBER"&&(d="Number("+d+")"),[d,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_prompt=r.javascriptGenerator.text_prompt_ext,r.javascriptGenerator.text_count=function(h){const d=r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_NONE)||"''";return h=r.javascriptGenerator.valueToCode(h,"SUB",r.javascriptGenerator.ORDER_NONE)||"''",[r.javascriptGenerator.provideFunction_("textCount",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+d+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_replace=function(h){const d=r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_NONE)||"''",p=r.javascriptGenerator.valueToCode(h,"FROM",r.javascriptGenerator.ORDER_NONE)||"''";return h=r.javascriptGenerator.valueToCode(h,"TO",r.javascriptGenerator.ORDER_NONE)||"''",[r.javascriptGenerator.provideFunction_("textReplace",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+d+", "+p+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.text_reverse=function(h){return[(r.javascriptGenerator.valueToCode(h,"TEXT",r.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",r.javascriptGenerator.ORDER_FUNCTION_CALL]},i.NameType$$module$build$src$core$names,r.javascriptGenerator.procedures_defreturn=function(h){const d=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("NAME"),i.NameType$$module$build$src$core$names.PROCEDURE);var p="";r.javascriptGenerator.STATEMENT_PREFIX&&(p+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_PREFIX,h)),r.javascriptGenerator.STATEMENT_SUFFIX&&(p+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_SUFFIX,h)),p&&(p=r.javascriptGenerator.prefixLines(p,r.javascriptGenerator.INDENT));let m="";r.javascriptGenerator.INFINITE_LOOP_TRAP&&(m=r.javascriptGenerator.prefixLines(r.javascriptGenerator.injectId(r.javascriptGenerator.INFINITE_LOOP_TRAP,h),r.javascriptGenerator.INDENT));const g=r.javascriptGenerator.statementToCode(h,"STACK");let v=r.javascriptGenerator.valueToCode(h,"RETURN",r.javascriptGenerator.ORDER_NONE)||"",y="";g&&v&&(y=p),v&&(v=r.javascriptGenerator.INDENT+"return "+v+`;
`);const S=[],T=h.getVars();for(let w=0;w<T.length;w++)S[w]=r.javascriptGenerator.nameDB_.getName(T[w],i.NameType$$module$build$src$core$names.VARIABLE);return p="function "+d+"("+S.join(", ")+`) {
`+p+m+g+y+v+"}",p=r.javascriptGenerator.scrub_(h,p),r.javascriptGenerator.definitions_["%"+d]=p,null},r.javascriptGenerator.procedures_defnoreturn=r.javascriptGenerator.procedures_defreturn,r.javascriptGenerator.procedures_callreturn=function(h){const d=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("NAME"),i.NameType$$module$build$src$core$names.PROCEDURE),p=[],m=h.getVars();for(let g=0;g<m.length;g++)p[g]=r.javascriptGenerator.valueToCode(h,"ARG"+g,r.javascriptGenerator.ORDER_NONE)||"null";return[d+"("+p.join(", ")+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.procedures_callnoreturn=function(h){return r.javascriptGenerator.procedures_callreturn(h)[0]+`;
`},r.javascriptGenerator.procedures_ifreturn=function(h){let d="if ("+(r.javascriptGenerator.valueToCode(h,"CONDITION",r.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return r.javascriptGenerator.STATEMENT_SUFFIX&&(d+=r.javascriptGenerator.prefixLines(r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_SUFFIX,h),r.javascriptGenerator.INDENT)),h.hasReturnValue_?(h=r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_NONE)||"null",d+=r.javascriptGenerator.INDENT+"return "+h+`;
`):d+=r.javascriptGenerator.INDENT+`return;
`,d+`}
`},i.NameType$$module$build$src$core$names,r.javascriptGenerator.math_number=function(h){return h=Number(h.getFieldValue("NUM")),[h,0<=h?r.javascriptGenerator.ORDER_ATOMIC:r.javascriptGenerator.ORDER_UNARY_NEGATION]},r.javascriptGenerator.math_arithmetic=function(h){var d={ADD:[" + ",r.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",r.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",r.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",r.javascriptGenerator.ORDER_DIVISION],POWER:[null,r.javascriptGenerator.ORDER_NONE]}[h.getFieldValue("OP")];const p=d[0];d=d[1];const m=r.javascriptGenerator.valueToCode(h,"A",d)||"0";return h=r.javascriptGenerator.valueToCode(h,"B",d)||"0",p?[m+p+h,d]:["Math.pow("+m+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.math_single=function(h){const d=h.getFieldValue("OP");let p;if(d==="NEG")return h=r.javascriptGenerator.valueToCode(h,"NUM",r.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",h[0]==="-"&&(h=" "+h),["-"+h,r.javascriptGenerator.ORDER_UNARY_NEGATION];switch(h=d==="SIN"||d==="COS"||d==="TAN"?r.javascriptGenerator.valueToCode(h,"NUM",r.javascriptGenerator.ORDER_DIVISION)||"0":r.javascriptGenerator.valueToCode(h,"NUM",r.javascriptGenerator.ORDER_NONE)||"0",d){case"ABS":p="Math.abs("+h+")";break;case"ROOT":p="Math.sqrt("+h+")";break;case"LN":p="Math.log("+h+")";break;case"EXP":p="Math.exp("+h+")";break;case"POW10":p="Math.pow(10,"+h+")";break;case"ROUND":p="Math.round("+h+")";break;case"ROUNDUP":p="Math.ceil("+h+")";break;case"ROUNDDOWN":p="Math.floor("+h+")";break;case"SIN":p="Math.sin("+h+" / 180 * Math.PI)";break;case"COS":p="Math.cos("+h+" / 180 * Math.PI)";break;case"TAN":p="Math.tan("+h+" / 180 * Math.PI)"}if(p)return[p,r.javascriptGenerator.ORDER_FUNCTION_CALL];switch(d){case"LOG10":p="Math.log("+h+") / Math.log(10)";break;case"ASIN":p="Math.asin("+h+") / Math.PI * 180";break;case"ACOS":p="Math.acos("+h+") / Math.PI * 180";break;case"ATAN":p="Math.atan("+h+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+d)}return[p,r.javascriptGenerator.ORDER_DIVISION]},r.javascriptGenerator.math_constant=function(h){return{PI:["Math.PI",r.javascriptGenerator.ORDER_MEMBER],E:["Math.E",r.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",r.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",r.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",r.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",r.javascriptGenerator.ORDER_ATOMIC]}[h.getFieldValue("CONSTANT")]},r.javascriptGenerator.math_number_property=function(h){var d={EVEN:[" % 2 === 0",r.javascriptGenerator.ORDER_MODULUS,r.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",r.javascriptGenerator.ORDER_MODULUS,r.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",r.javascriptGenerator.ORDER_MODULUS,r.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",r.javascriptGenerator.ORDER_RELATIONAL,r.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",r.javascriptGenerator.ORDER_RELATIONAL,r.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,r.javascriptGenerator.ORDER_MODULUS,r.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,r.javascriptGenerator.ORDER_NONE,r.javascriptGenerator.ORDER_FUNCTION_CALL]};const p=h.getFieldValue("PROPERTY"),[m,g,v]=d[p];return d=r.javascriptGenerator.valueToCode(h,"NUMBER_TO_CHECK",g)||"0",p==="PRIME"?h=r.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+d+")":p==="DIVISIBLE_BY"?(h=r.javascriptGenerator.valueToCode(h,"DIVISOR",r.javascriptGenerator.ORDER_MODULUS)||"0",h=d+" % "+h+" === 0"):h=d+m,[h,v]},r.javascriptGenerator.math_change=function(h){const d=r.javascriptGenerator.valueToCode(h,"DELTA",r.javascriptGenerator.ORDER_ADDITION)||"0";return h=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),h+" = (typeof "+h+" === 'number' ? "+h+" : 0) + "+d+`;
`},r.javascriptGenerator.math_round=r.javascriptGenerator.math_single,r.javascriptGenerator.math_trig=r.javascriptGenerator.math_single,r.javascriptGenerator.math_on_list=function(h){var d=h.getFieldValue("OP");switch(d){case"SUM":h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_MEMBER)||"[]",h+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h="Math.min.apply(null, "+h+")";break;case"MAX":h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h="Math.max.apply(null, "+h+")";break;case"AVERAGE":d=r.javascriptGenerator.provideFunction_("mathMean",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h=d+"("+h+")";break;case"MEDIAN":d=r.javascriptGenerator.provideFunction_("mathMedian",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h=d+"("+h+")";break;case"MODE":d=r.javascriptGenerator.provideFunction_("mathModes",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h=d+"("+h+")";break;case"STD_DEV":d=r.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h=d+"("+h+")";break;case"RANDOM":d=r.javascriptGenerator.provideFunction_("mathRandomList",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),h=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_NONE)||"[]",h=d+"("+h+")";break;default:throw Error("Unknown operator: "+d)}return[h,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.math_modulo=function(h){const d=r.javascriptGenerator.valueToCode(h,"DIVIDEND",r.javascriptGenerator.ORDER_MODULUS)||"0";return h=r.javascriptGenerator.valueToCode(h,"DIVISOR",r.javascriptGenerator.ORDER_MODULUS)||"0",[d+" % "+h,r.javascriptGenerator.ORDER_MODULUS]},r.javascriptGenerator.math_constrain=function(h){const d=r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_NONE)||"0",p=r.javascriptGenerator.valueToCode(h,"LOW",r.javascriptGenerator.ORDER_NONE)||"0";return h=r.javascriptGenerator.valueToCode(h,"HIGH",r.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+d+", "+p+"), "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.math_random_int=function(h){const d=r.javascriptGenerator.valueToCode(h,"FROM",r.javascriptGenerator.ORDER_NONE)||"0";return h=r.javascriptGenerator.valueToCode(h,"TO",r.javascriptGenerator.ORDER_NONE)||"0",[r.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+d+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.math_random_float=function(h){return["Math.random()",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.math_atan2=function(h){const d=r.javascriptGenerator.valueToCode(h,"X",r.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(r.javascriptGenerator.valueToCode(h,"Y",r.javascriptGenerator.ORDER_NONE)||"0")+", "+d+") / Math.PI * 180",r.javascriptGenerator.ORDER_DIVISION]},i.module$build$src$core$utils$string,i.NameType$$module$build$src$core$names,r.javascriptGenerator.controls_repeat_ext=function(h){let d;d=h.getField("TIMES")?String(Number(h.getFieldValue("TIMES"))):r.javascriptGenerator.valueToCode(h,"TIMES",r.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let p=r.javascriptGenerator.statementToCode(h,"DO");p=r.javascriptGenerator.addLoopTrap(p,h),h="";const m=r.javascriptGenerator.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let g=d;return d.match(/^\w+$/)||i.module$build$src$core$utils$string.isNumber(d)||(g=r.javascriptGenerator.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+g+" = "+d+`;
`),h+("for (var "+m+" = 0; "+m+" < "+g+"; "+m+`++) {
`+p+`}
`)},r.javascriptGenerator.controls_repeat=r.javascriptGenerator.controls_repeat_ext,r.javascriptGenerator.controls_whileUntil=function(h){const d=h.getFieldValue("MODE")==="UNTIL";let p=r.javascriptGenerator.valueToCode(h,"BOOL",d?r.javascriptGenerator.ORDER_LOGICAL_NOT:r.javascriptGenerator.ORDER_NONE)||"false",m=r.javascriptGenerator.statementToCode(h,"DO");return m=r.javascriptGenerator.addLoopTrap(m,h),d&&(p="!"+p),"while ("+p+`) {
`+m+`}
`},r.javascriptGenerator.controls_for=function(h){var d=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE),p=r.javascriptGenerator.valueToCode(h,"FROM",r.javascriptGenerator.ORDER_ASSIGNMENT)||"0",m=r.javascriptGenerator.valueToCode(h,"TO",r.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const g=r.javascriptGenerator.valueToCode(h,"BY",r.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let v=r.javascriptGenerator.statementToCode(h,"DO");if(v=r.javascriptGenerator.addLoopTrap(v,h),i.module$build$src$core$utils$string.isNumber(p)&&i.module$build$src$core$utils$string.isNumber(m)&&i.module$build$src$core$utils$string.isNumber(g)){var y=Number(p)<=Number(m);h="for ("+d+" = "+p+"; "+d+(y?" <= ":" >= ")+m+"; "+d,d=Math.abs(Number(g)),h=d===1?h+(y?"++":"--"):h+((y?" += ":" -= ")+d),h+=`) {
`+v+`}
`}else h="",y=p,p.match(/^\w+$/)||i.module$build$src$core$utils$string.isNumber(p)||(y=r.javascriptGenerator.nameDB_.getDistinctName(d+"_start",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+y+" = "+p+`;
`),p=m,m.match(/^\w+$/)||i.module$build$src$core$utils$string.isNumber(m)||(p=r.javascriptGenerator.nameDB_.getDistinctName(d+"_end",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+p+" = "+m+`;
`),m=r.javascriptGenerator.nameDB_.getDistinctName(d+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+m+" = ",h=i.module$build$src$core$utils$string.isNumber(g)?h+(Math.abs(g)+`;
`):h+("Math.abs("+g+`);
`),h+="if ("+y+" > "+p+`) {
`,h+=r.javascriptGenerator.INDENT+m+" = -"+m+`;
`,h=h+`}
for (`+(d+" = "+y+"; "+m+" >= 0 ? "+d+" <= "+p+" : "+d+" >= "+p+"; "+d+" += "+m+`) {
`+v+`}
`);return h},r.javascriptGenerator.controls_forEach=function(h){const d=r.javascriptGenerator.nameDB_.getName(h.getFieldValue("VAR"),i.NameType$$module$build$src$core$names.VARIABLE);var p=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let m=r.javascriptGenerator.statementToCode(h,"DO");m=r.javascriptGenerator.addLoopTrap(m,h),h="";let g=p;return p.match(/^\w+$/)||(g=r.javascriptGenerator.nameDB_.getDistinctName(d+"_list",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+g+" = "+p+`;
`),p=r.javascriptGenerator.nameDB_.getDistinctName(d+"_index",i.NameType$$module$build$src$core$names.VARIABLE),m=r.javascriptGenerator.INDENT+d+" = "+g+"["+p+`];
`+m,h+("for (var "+p+" in "+g+`) {
`+m+`}
`)},r.javascriptGenerator.controls_flow_statements=function(h){let d="";if(r.javascriptGenerator.STATEMENT_PREFIX&&(d+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_PREFIX,h)),r.javascriptGenerator.STATEMENT_SUFFIX&&(d+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_SUFFIX,h)),r.javascriptGenerator.STATEMENT_PREFIX){const p=h.getSurroundLoop();p&&!p.suppressPrefixSuffix&&(d+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_PREFIX,p))}switch(h.getFieldValue("FLOW")){case"BREAK":return d+`break;
`;case"CONTINUE":return d+`continue;
`}throw Error("Unknown flow statement.")},r.javascriptGenerator.controls_if=function(h){var d=0;let p="";r.javascriptGenerator.STATEMENT_PREFIX&&(p+=r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_PREFIX,h));do{const m=r.javascriptGenerator.valueToCode(h,"IF"+d,r.javascriptGenerator.ORDER_NONE)||"false";let g=r.javascriptGenerator.statementToCode(h,"DO"+d);r.javascriptGenerator.STATEMENT_SUFFIX&&(g=r.javascriptGenerator.prefixLines(r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_SUFFIX,h),r.javascriptGenerator.INDENT)+g),p+=(0<d?" else ":"")+"if ("+m+`) {
`+g+"}",d++}while(h.getInput("IF"+d));return(h.getInput("ELSE")||r.javascriptGenerator.STATEMENT_SUFFIX)&&(d=r.javascriptGenerator.statementToCode(h,"ELSE"),r.javascriptGenerator.STATEMENT_SUFFIX&&(d=r.javascriptGenerator.prefixLines(r.javascriptGenerator.injectId(r.javascriptGenerator.STATEMENT_SUFFIX,h),r.javascriptGenerator.INDENT)+d),p+=` else {
`+d+"}"),p+`
`},r.javascriptGenerator.controls_ifelse=r.javascriptGenerator.controls_if,r.javascriptGenerator.logic_compare=function(h){const d={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[h.getFieldValue("OP")],p=d==="=="||d==="!="?r.javascriptGenerator.ORDER_EQUALITY:r.javascriptGenerator.ORDER_RELATIONAL,m=r.javascriptGenerator.valueToCode(h,"A",p)||"0";return h=r.javascriptGenerator.valueToCode(h,"B",p)||"0",[m+" "+d+" "+h,p]},r.javascriptGenerator.logic_operation=function(h){const d=h.getFieldValue("OP")==="AND"?"&&":"||",p=d==="&&"?r.javascriptGenerator.ORDER_LOGICAL_AND:r.javascriptGenerator.ORDER_LOGICAL_OR;let m=r.javascriptGenerator.valueToCode(h,"A",p);if(h=r.javascriptGenerator.valueToCode(h,"B",p),m||h){const g=d==="&&"?"true":"false";m||(m=g),h||(h=g)}else h=m="false";return[m+" "+d+" "+h,p]},r.javascriptGenerator.logic_negate=function(h){const d=r.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(r.javascriptGenerator.valueToCode(h,"BOOL",d)||"true"),d]},r.javascriptGenerator.logic_boolean=function(h){return[h.getFieldValue("BOOL")==="TRUE"?"true":"false",r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.logic_null=function(h){return["null",r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.logic_ternary=function(h){const d=r.javascriptGenerator.valueToCode(h,"IF",r.javascriptGenerator.ORDER_CONDITIONAL)||"false",p=r.javascriptGenerator.valueToCode(h,"THEN",r.javascriptGenerator.ORDER_CONDITIONAL)||"null";return h=r.javascriptGenerator.valueToCode(h,"ELSE",r.javascriptGenerator.ORDER_CONDITIONAL)||"null",[d+" ? "+p+" : "+h,r.javascriptGenerator.ORDER_CONDITIONAL]},i.NameType$$module$build$src$core$names,r.javascriptGenerator.lists_create_empty=function(h){return["[]",r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.lists_create_with=function(h){const d=Array(h.itemCount_);for(let p=0;p<h.itemCount_;p++)d[p]=r.javascriptGenerator.valueToCode(h,"ADD"+p,r.javascriptGenerator.ORDER_NONE)||"null";return["["+d.join(", ")+"]",r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.lists_repeat=function(h){const d=r.javascriptGenerator.provideFunction_("listsRepeat",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),p=r.javascriptGenerator.valueToCode(h,"ITEM",r.javascriptGenerator.ORDER_NONE)||"null";return h=r.javascriptGenerator.valueToCode(h,"NUM",r.javascriptGenerator.ORDER_NONE)||"0",[d+"("+p+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.lists_length=function(h){return[(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",r.javascriptGenerator.ORDER_MEMBER]},r.javascriptGenerator.lists_isEmpty=function(h){return["!"+(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",r.javascriptGenerator.ORDER_LOGICAL_NOT]},r.javascriptGenerator.lists_indexOf=function(h){var d=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const p=r.javascriptGenerator.valueToCode(h,"FIND",r.javascriptGenerator.ORDER_NONE)||"''";return d=(r.javascriptGenerator.valueToCode(h,"VALUE",r.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+d+"("+p+")",h.workspace.options.oneBasedIndex?[d+" + 1",r.javascriptGenerator.ORDER_ADDITION]:[d,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.lists_getIndex=function(h){const d=h.getFieldValue("MODE")||"GET",p=h.getFieldValue("WHERE")||"FROM_START";var m=r.javascriptGenerator.valueToCode(h,"VALUE",p==="RANDOM"?r.javascriptGenerator.ORDER_NONE:r.javascriptGenerator.ORDER_MEMBER)||"[]";switch(p){case"FIRST":if(d==="GET")return[m+"[0]",r.javascriptGenerator.ORDER_MEMBER];if(d==="GET_REMOVE")return[m+".shift()",r.javascriptGenerator.ORDER_MEMBER];if(d==="REMOVE")return m+`.shift();
`;break;case"LAST":if(d==="GET")return[m+".slice(-1)[0]",r.javascriptGenerator.ORDER_MEMBER];if(d==="GET_REMOVE")return[m+".pop()",r.javascriptGenerator.ORDER_MEMBER];if(d==="REMOVE")return m+`.pop();
`;break;case"FROM_START":if(h=r.javascriptGenerator.getAdjusted(h,"AT"),d==="GET")return[m+"["+h+"]",r.javascriptGenerator.ORDER_MEMBER];if(d==="GET_REMOVE")return[m+".splice("+h+", 1)[0]",r.javascriptGenerator.ORDER_FUNCTION_CALL];if(d==="REMOVE")return m+".splice("+h+`, 1);
`;break;case"FROM_END":if(h=r.javascriptGenerator.getAdjusted(h,"AT",1,!0),d==="GET")return[m+".slice("+h+")[0]",r.javascriptGenerator.ORDER_FUNCTION_CALL];if(d==="GET_REMOVE")return[m+".splice("+h+", 1)[0]",r.javascriptGenerator.ORDER_FUNCTION_CALL];if(d==="REMOVE")return m+".splice("+h+", 1);";break;case"RANDOM":if(m=r.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+m+", "+(d!=="GET")+")",d==="GET"||d==="GET_REMOVE")return[m,r.javascriptGenerator.ORDER_FUNCTION_CALL];if(d==="REMOVE")return m+`;
`}throw Error("Unhandled combination (lists_getIndex).")},r.javascriptGenerator.lists_setIndex=function(h){function d(){if(p.match(/^\w+$/))return"";const y=r.javascriptGenerator.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),S="var "+y+" = "+p+`;
`;return p=y,S}let p=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_MEMBER)||"[]";const m=h.getFieldValue("MODE")||"GET";var g=h.getFieldValue("WHERE")||"FROM_START";const v=r.javascriptGenerator.valueToCode(h,"TO",r.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(g){case"FIRST":if(m==="SET")return p+"[0] = "+v+`;
`;if(m==="INSERT")return p+".unshift("+v+`);
`;break;case"LAST":if(m==="SET")return d()+(p+"["+p+".length - 1] = "+v+`;
`);if(m==="INSERT")return p+".push("+v+`);
`;break;case"FROM_START":if(h=r.javascriptGenerator.getAdjusted(h,"AT"),m==="SET")return p+"["+h+"] = "+v+`;
`;if(m==="INSERT")return p+".splice("+h+", 0, "+v+`);
`;break;case"FROM_END":if(h=r.javascriptGenerator.getAdjusted(h,"AT",1,!1,r.javascriptGenerator.ORDER_SUBTRACTION),g=d(),m==="SET")return g+(p+"["+p+".length - "+h+"] = "+v+`;
`);if(m==="INSERT")return g+(p+".splice("+p+".length - "+h+", 0, "+v+`);
`);break;case"RANDOM":if(h=d(),g=r.javascriptGenerator.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),h+="var "+g+" = Math.floor(Math.random() * "+p+`.length);
`,m==="SET")return h+(p+"["+g+"] = "+v+`;
`);if(m==="INSERT")return h+(p+".splice("+g+", 0, "+v+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var u=function(h,d,p){return d==="FIRST"?"0":d==="FROM_END"?h+".length - 1 - "+p:d==="LAST"?h+".length - 1":p};return r.javascriptGenerator.lists_getSublist=function(h){var d=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_MEMBER)||"[]",p=h.getFieldValue("WHERE1"),m=h.getFieldValue("WHERE2");if(p==="FIRST"&&m==="LAST")d+=".slice(0)";else if(d.match(/^\w+$/)||p!=="FROM_END"&&m==="FROM_START"){switch(p){case"FROM_START":p=r.javascriptGenerator.getAdjusted(h,"AT1");break;case"FROM_END":p=r.javascriptGenerator.getAdjusted(h,"AT1",1,!1,r.javascriptGenerator.ORDER_SUBTRACTION),p=d+".length - "+p;break;case"FIRST":p="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(m){case"FROM_START":m=r.javascriptGenerator.getAdjusted(h,"AT2",1);break;case"FROM_END":m=r.javascriptGenerator.getAdjusted(h,"AT2",0,!1,r.javascriptGenerator.ORDER_SUBTRACTION),m=d+".length - "+m;break;case"LAST":m=d+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}d=d+".slice("+p+", "+m+")"}else{const g=r.javascriptGenerator.getAdjusted(h,"AT1");h=r.javascriptGenerator.getAdjusted(h,"AT2");const v={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};d=r.javascriptGenerator.provideFunction_("subsequence"+v[p]+v[m],`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${p==="FROM_END"||p==="FROM_START"?", at1":""}${m==="FROM_END"||m==="FROM_START"?", at2":""}) {
  var start = ${u("sequence",p,"at1")};
  var end = ${u("sequence",m,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+d+(p==="FROM_END"||p==="FROM_START"?", "+g:"")+(m==="FROM_END"||m==="FROM_START"?", "+h:"")+")"}return[d,r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.lists_sort=function(h){const d=r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",p=h.getFieldValue("DIRECTION")==="1"?1:-1;h=h.getFieldValue("TYPE");const m=r.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[d+".slice().sort("+m+'("'+h+'", '+p+"))",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.lists_split=function(h){let d=r.javascriptGenerator.valueToCode(h,"INPUT",r.javascriptGenerator.ORDER_MEMBER);const p=r.javascriptGenerator.valueToCode(h,"DELIM",r.javascriptGenerator.ORDER_NONE)||"''";if(h=h.getFieldValue("MODE"),h==="SPLIT")d||(d="''"),h="split";else if(h==="JOIN")d||(d="[]"),h="join";else throw Error("Unknown mode: "+h);return[d+"."+h+"("+p+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.lists_reverse=function(h){return[(r.javascriptGenerator.valueToCode(h,"LIST",r.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.colour_picker=function(h){return[r.javascriptGenerator.quote_(h.getFieldValue("COLOUR")),r.javascriptGenerator.ORDER_ATOMIC]},r.javascriptGenerator.colour_random=function(h){return[r.javascriptGenerator.provideFunction_("colourRandom",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.colour_rgb=function(h){const d=r.javascriptGenerator.valueToCode(h,"RED",r.javascriptGenerator.ORDER_NONE)||0,p=r.javascriptGenerator.valueToCode(h,"GREEN",r.javascriptGenerator.ORDER_NONE)||0;return h=r.javascriptGenerator.valueToCode(h,"BLUE",r.javascriptGenerator.ORDER_NONE)||0,[r.javascriptGenerator.provideFunction_("colourRgb",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+d+", "+p+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.javascriptGenerator.colour_blend=function(h){const d=r.javascriptGenerator.valueToCode(h,"COLOUR1",r.javascriptGenerator.ORDER_NONE)||"'#000000'",p=r.javascriptGenerator.valueToCode(h,"COLOUR2",r.javascriptGenerator.ORDER_NONE)||"'#000000'";return h=r.javascriptGenerator.valueToCode(h,"RATIO",r.javascriptGenerator.ORDER_NONE)||.5,[r.javascriptGenerator.provideFunction_("colourBlend",`
function ${r.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+d+", "+p+", "+h+")",r.javascriptGenerator.ORDER_FUNCTION_CALL]},r.__namespace__=i,r})}(HR)),HR.exports}(function(n,e){(function(t,i){n.exports=i(uA(),hoe())})(Ki,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(T9);var U$=T9.exports,w9={exports:{}},XR={exports:{}},jR={exports:{}},g4;function doe(){return g4||(g4=1,function(n,e){(function(t,i){n.exports=i()})(Ki,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1  %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(jR)),jR.exports}var YR={exports:{}},ZR={exports:{}},_4;function foe(){return _4||(_4=1,function(n,e){(function(t,i){n.exports=i(cA())})(Ki,function(t){var i=t.__namespace__,r={};i.module$build$src$core$contextmenu,i.module$build$src$core$extensions,i.module$build$src$core$variables,i.module$build$src$core$utils$xml;var o=i.module$build$src$core$msg.Msg,a=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,l=i.module$build$src$core$common.defineBlocks;r.blocks=a([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var u={customContextMenu:function(F){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(te={text:o.RENAME_VARIABLE,enabled:!0,callback:h(this)},oe=this.getField("VAR").getText(),oe={text:o.DELETE_VARIABLE.replace("%1",oe),enabled:!0,callback:d(this)},F.unshift(te),F.unshift(oe));else{var te=this.getFieldValue("VAR"),ge=this.workspace.getVariableById(te).type;if(this.type==="variables_get_dynamic"){te="variables_set_dynamic";var Me=o.VARIABLES_GET_CREATE_SET}else te="variables_get_dynamic",Me=o.VARIABLES_SET_CREATE_GET;var oe={enabled:0<this.workspace.remainingCapacity()};const Pe=this.getField("VAR").getText();oe.text=Me.replace("%1",Pe),Me=i.module$build$src$core$utils$xml.createElement("field"),Me.setAttribute("name","VAR"),Me.setAttribute("variabletype",ge),Me.appendChild(i.module$build$src$core$utils$xml.createTextNode(Pe)),ge=i.module$build$src$core$utils$xml.createElement("block"),ge.setAttribute("type",te),ge.appendChild(Me),oe.callback=i.module$build$src$core$contextmenu.callbackFactory(this,ge),F.push(oe)}},onchange:function(F){F=this.getFieldValue("VAR"),F=i.module$build$src$core$variables.getVariable(this.workspace,F),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(F.type):this.getInput("VALUE").connection.setCheck(F.type)}},h=function(F){return function(){const te=F.workspace,ge=F.getField("VAR").getVariable();i.module$build$src$core$variables.renameVariable(te,ge)}},d=function(F){return function(){const te=F.workspace,ge=F.getField("VAR").getVariable();te.deleteVariableById(ge.getId()),te.refreshToolboxSelection()}};i.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",u),l(r.blocks);var p={};i.module$build$src$core$contextmenu,i.module$build$src$core$extensions,i.module$build$src$core$variables,i.module$build$src$core$utils$xml;var m=i.module$build$src$core$msg.Msg,g=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,v=i.module$build$src$core$common.defineBlocks;p.blocks=g([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var y={customContextMenu:function(F){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(te={text:m.RENAME_VARIABLE,enabled:!0,callback:S(this)},Me=this.getField("VAR").getText(),Me={text:m.DELETE_VARIABLE.replace("%1",Me),enabled:!0,callback:T(this)},F.unshift(te),F.unshift(Me));else{if(this.type==="variables_get")var te="variables_set",ge=m.VARIABLES_GET_CREATE_SET;else te="variables_get",ge=m.VARIABLES_SET_CREATE_GET;var Me={enabled:0<this.workspace.remainingCapacity()},oe=this.getField("VAR").getText();Me.text=ge.replace("%1",oe),ge=i.module$build$src$core$utils$xml.createElement("field"),ge.setAttribute("name","VAR"),ge.appendChild(i.module$build$src$core$utils$xml.createTextNode(oe)),oe=i.module$build$src$core$utils$xml.createElement("block"),oe.setAttribute("type",te),oe.appendChild(ge),Me.callback=i.module$build$src$core$contextmenu.callbackFactory(this,oe),F.push(Me)}}},S=function(F){return function(){const te=F.workspace,ge=F.getField("VAR").getVariable();i.module$build$src$core$variables.renameVariable(te,ge)}},T=function(F){return function(){const te=F.workspace,ge=F.getField("VAR").getVariable();te.deleteVariableById(ge.getId()),te.refreshToolboxSelection()}};i.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",y),v(p.blocks);var w={};i.module$build$src$core$extensions;var E=i.module$build$src$core$msg.Msg;i.module$build$src$core$utils$xml,i.Align$$module$build$src$core$input,i.module$build$src$core$connection_type.ConnectionType;var $=i.module$build$src$core$field_dropdown.FieldDropdown;i.FieldImage$$module$build$src$core$field_image,i.FieldTextInput$$module$build$src$core$field_textinput,i.Mutator$$module$build$src$core$mutator;var A=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,I=i.module$build$src$core$common.defineBlocks;w.blocks=A([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),w.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[E.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[E.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[E.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[E.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[E.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[E.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(E.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(E.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),E.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(E.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(E.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");var te=this.getInput("AT1").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return F.setAttribute("at1",te),te=this.getInput("AT2").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,F.setAttribute("at2",te),F},domToMutation:function(F){const te=F.getAttribute("at1")==="true";F=F.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,F)},updateAt_:function(F,te){this.removeInput("AT"+F),this.removeInput("ORDINAL"+F,!0),te?(this.appendValueInput("AT"+F).setCheck("Number"),E.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+F).appendField(E.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+F),F===2&&E.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(E.TEXT_GET_SUBSTRING_TAIL));const ge=new $(this["WHERE_OPTIONS_"+F],function(Me){const oe=Me==="FROM_START"||Me==="FROM_END";if(oe!==te){const Pe=this.getSourceBlock();return Pe.updateAt_(F,oe),Pe.setFieldValue(Me,"WHERE"+F),null}});this.getInput("AT"+F).appendField(ge,"WHERE"+F),F===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},w.blocks.text_changeCase={init:function(){const F=[[E.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[E.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[E.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(E.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new $(F),"CASE"),this.setOutput(!0,"String"),this.setTooltip(E.TEXT_CHANGECASE_TOOLTIP)}},w.blocks.text_trim={init:function(){const F=[[E.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[E.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[E.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(E.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new $(F),"MODE"),this.setOutput(!0,"String"),this.setTooltip(E.TEXT_TRIM_TOOLTIP)}},w.blocks.text_print={init:function(){this.jsonInit({message0:E.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:E.TEXT_PRINT_TOOLTIP,helpUrl:E.TEXT_PRINT_HELPURL})}};var D={updateType_:function(F){this.outputConnection.setCheck(F==="NUMBER"?"Number":"String")},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("type",this.getFieldValue("TYPE")),F},domToMutation:function(F){this.updateType_(F.getAttribute("type"))}};w.blocks.text_prompt_ext=Object.assign({},D,{init:function(){var F=[[E.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[E.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(E.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const te=this;F=new $(F,function(ge){te.updateType_(ge)}),this.appendValueInput("TEXT").appendField(F,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return te.getFieldValue("TYPE")==="TEXT"?E.TEXT_PROMPT_TOOLTIP_TEXT:E.TEXT_PROMPT_TOOLTIP_NUMBER})}}),w.blocks.text_prompt=Object.assign({},D,{init:function(){this.mixin(R);var F=[[E.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[E.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const te=this;this.setHelpUrl(E.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),F=new $(F,function(ge){te.updateType_(ge)}),this.appendDummyInput().appendField(F,"TYPE").appendField(this.newQuote_(!0)).appendField(new i.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return te.getFieldValue("TYPE")==="TEXT"?E.TEXT_PROMPT_TOOLTIP_TEXT:E.TEXT_PROMPT_TOOLTIP_NUMBER})}}),w.blocks.text_count={init:function(){this.jsonInit({message0:E.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_COUNT_TOOLTIP,helpUrl:E.TEXT_COUNT_HELPURL})}},w.blocks.text_replace={init:function(){this.jsonInit({message0:E.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_REPLACE_TOOLTIP,helpUrl:E.TEXT_REPLACE_HELPURL})}},w.blocks.text_reverse={init:function(){this.jsonInit({message0:E.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:E.TEXT_REVERSE_TOOLTIP,helpUrl:E.TEXT_REVERSE_HELPURL})}};var R={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(F){for(let te=0,ge;ge=this.inputList[te];te++)for(let Me=0,oe;oe=ge.fieldRow[Me];Me++)if(F===oe.name){ge.insertFieldAt(Me,this.newQuote_(!0)),ge.insertFieldAt(Me+2,this.newQuote_(!1));return}console.warn('field named "'+F+'" not found in '+this.toDevString())},newQuote_:function(F){return F=this.RTL?!F:F,new i.FieldImage$$module$build$src$core$field_image(F?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,F?"":"")}},B=function(){this.mixin(R),this.quoteField_("TEXT")},G={mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("items",this.itemCount_),F},domToMutation:function(F){this.itemCount_=parseInt(F.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(F){this.itemCount_=F.itemCount,this.updateShape_()},decompose:function(F){const te=F.newBlock("text_create_join_container");te.initSvg();let ge=te.getInput("STACK").connection;for(let Me=0;Me<this.itemCount_;Me++){const oe=F.newBlock("text_create_join_item");oe.initSvg(),ge.connect(oe.previousConnection),ge=oe.nextConnection}return te},compose:function(F){var te=F.getInputTargetBlock("STACK");for(F=[];te;)te.isInsertionMarker()||F.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const ge=this.getInput("ADD"+te).connection.targetConnection;ge&&F.indexOf(ge)===-1&&ge.disconnect()}for(this.itemCount_=F.length,this.updateShape_(),te=0;te<this.itemCount_;te++)i.Mutator$$module$build$src$core$mutator.reconnect(F[te],this,"ADD"+te)},saveConnections:function(F){F=F.getInputTargetBlock("STACK");let te=0;for(;F;){if(F.isInsertionMarker()){F=F.getNextBlock();continue}const ge=this.getInput("ADD"+te);F.valueConnection_=ge&&ge.connection.targetConnection,F=F.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var F=0;F<this.itemCount_;F++)if(!this.getInput("ADD"+F)){const te=this.appendValueInput("ADD"+F).setAlign(i.Align$$module$build$src$core$input.RIGHT);F===0&&te.appendField(E.TEXT_JOIN_TITLE_CREATEWITH)}for(F=this.itemCount_;this.getInput("ADD"+F);F++)this.removeInput("ADD"+F)}},Z=function(){this.mixin(R),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};i.module$build$src$core$extensions.register("text_append_tooltip",i.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var N=function(){const F=this;this.setTooltip(function(){return E.TEXT_INDEXOF_TOOLTIP.replace("%1",F.workspace.options.oneBasedIndex?"0":"-1")})},H={mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("at",!!this.isAt_),F},domToMutation:function(F){F=F.getAttribute("at")!=="false",this.updateAt_(F)},updateAt_:function(F){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),F&&(this.appendValueInput("AT").setCheck("Number"),E.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(E.ORDINAL_NUMBER_SUFFIX)),E.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(E.TEXT_CHARAT_TAIL)),this.isAt_=F}},M=function(){this.getField("WHERE").setValidator(function(te){te=te==="FROM_START"||te==="FROM_END",te!==this.isAt_&&this.getSourceBlock().updateAt_(te)}),this.updateAt_(!0);const F=this;this.setTooltip(function(){var te=F.getFieldValue("WHERE");let ge=E.TEXT_CHARAT_TOOLTIP;return(te==="FROM_START"||te==="FROM_END")&&(te=te==="FROM_START"?E.LISTS_INDEX_FROM_START_TOOLTIP:E.LISTS_INDEX_FROM_END_TOOLTIP)&&(ge+="  "+te.replace("%1",F.workspace.options.oneBasedIndex?"#1":"#0")),ge})};i.module$build$src$core$extensions.register("text_indexOf_tooltip",N),i.module$build$src$core$extensions.register("text_quotes",B),i.module$build$src$core$extensions.registerMutator("text_join_mutator",G,Z),i.module$build$src$core$extensions.registerMutator("text_charAt_mutator",H,M),I(w.blocks);var K={};i.module$build$src$core$contextmenu,i.module$build$src$core$events$events,i.module$build$src$core$procedures,i.module$build$src$core$variables,i.module$build$src$core$xml,i.module$build$src$core$utils$xml,i.Align$$module$build$src$core$input,i.config$$module$build$src$core$config,i.FieldCheckbox$$module$build$src$core$field_checkbox,i.FieldLabel$$module$build$src$core$field_label,i.FieldTextInput$$module$build$src$core$field_textinput;var re=i.module$build$src$core$msg.Msg;i.Mutator$$module$build$src$core$mutator,i.module$build$src$core$names.Names;var ce=i.module$build$src$core$common.defineBlocks;K.blocks={};var X={setStatements_:function(F){this.hasStatements_!==F&&(F?(this.appendStatementInput("STACK").appendField(re.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=F)},updateParams_:function(){let F="";this.arguments_.length&&(F=re.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.module$build$src$core$events$events.disable();try{this.setFieldValue(F,"PARAMS")}finally{i.module$build$src$core$events$events.enable()}},mutationToDom:function(F){const te=i.module$build$src$core$utils$xml.createElement("mutation");F&&te.setAttribute("name",this.getFieldValue("NAME"));for(let ge=0;ge<this.argumentVarModels_.length;ge++){const Me=i.module$build$src$core$utils$xml.createElement("arg"),oe=this.argumentVarModels_[ge];Me.setAttribute("name",oe.name),Me.setAttribute("varid",oe.getId()),F&&this.paramIds_&&Me.setAttribute("paramId",this.paramIds_[ge]),te.appendChild(Me)}return this.hasStatements_||te.setAttribute("statements","false"),te},domToMutation:function(F){this.arguments_=[],this.argumentVarModels_=[];for(let ge=0,Me;Me=F.childNodes[ge];ge++)if(Me.nodeName.toLowerCase()==="arg"){const oe=Me.getAttribute("name");var te=Me.getAttribute("varid")||Me.getAttribute("varId");this.arguments_.push(oe),te=i.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,te,oe,""),te!==null?this.argumentVarModels_.push(te):console.log(`Failed to create a variable named "${oe}", ignoring.`)}this.updateParams_(),i.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(F.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const F=Object.create(null);if(this.argumentVarModels_.length){F.params=[];for(let te=0;te<this.argumentVarModels_.length;te++)F.params.push({name:this.argumentVarModels_[te].name,id:this.argumentVarModels_[te].getId()})}return this.hasStatements_||(F.hasStatements=!1),F},loadExtraState:function(F){if(this.arguments_=[],this.argumentVarModels_=[],F.params)for(let ge=0;ge<F.params.length;ge++){var te=F.params[ge];te=i.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,te.id,te.name,""),this.arguments_.push(te.name),this.argumentVarModels_.push(te)}this.updateParams_(),i.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(F.hasStatements!==!1)},decompose:function(F){const te=i.module$build$src$core$utils$xml.createElement("block");te.setAttribute("type","procedures_mutatorcontainer");var ge=i.module$build$src$core$utils$xml.createElement("statement");ge.setAttribute("name","STACK"),te.appendChild(ge);for(let oe=0;oe<this.arguments_.length;oe++){const Pe=i.module$build$src$core$utils$xml.createElement("block");Pe.setAttribute("type","procedures_mutatorarg");var Me=i.module$build$src$core$utils$xml.createElement("field");Me.setAttribute("name","NAME");const et=i.module$build$src$core$utils$xml.createTextNode(this.arguments_[oe]);Me.appendChild(et),Pe.appendChild(Me),Me=i.module$build$src$core$utils$xml.createElement("next"),Pe.appendChild(Me),ge.appendChild(Pe),ge=Me}return F=i.module$build$src$core$xml.domToBlock(te,F),this.type==="procedures_defreturn"?F.setFieldValue(this.hasStatements_,"STATEMENTS"):F.removeInput("STATEMENT_INPUT"),i.module$build$src$core$procedures.mutateCallers(this),F},compose:function(F){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let te=F.getInputTargetBlock("STACK");for(;te&&!te.isInsertionMarker();){var ge=te.getFieldValue("NAME");this.arguments_.push(ge),ge=this.workspace.getVariable(ge,""),this.argumentVarModels_.push(ge),this.paramIds_.push(te.id),te=te.nextConnection&&te.nextConnection.targetBlock()}this.updateParams_(),i.module$build$src$core$procedures.mutateCallers(this),F=F.getFieldValue("STATEMENTS"),F!==null&&(F=F==="TRUE",this.hasStatements_!==F)&&(F?(this.setStatements_(!0),i.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(F=this.getInput("STACK").connection,(this.statementConnection_=F.targetConnection)&&(F=F.targetBlock(),F.unplug(),F.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(F,te){var ge=this.workspace.getVariableById(F);if(ge.type===""){ge=ge.name,te=this.workspace.getVariableById(te);var Me=!1;for(let oe=0;oe<this.argumentVarModels_.length;oe++)this.argumentVarModels_[oe].getId()===F&&(this.arguments_[oe]=te.name,this.argumentVarModels_[oe]=te,Me=!0);Me&&(this.displayRenamedVar_(ge,te.name),i.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(F){const te=F.name;let ge=!1,Me;for(let oe=0;oe<this.argumentVarModels_.length;oe++)this.argumentVarModels_[oe].getId()===F.getId()&&(Me=this.arguments_[oe],this.arguments_[oe]=te,ge=!0);ge&&(this.displayRenamedVar_(Me,te),i.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(F,te){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const ge=this.mutator.workspace_.getAllBlocks(!1);for(let Me=0,oe;oe=ge[Me];Me++)oe.type==="procedures_mutatorarg"&&i.module$build$src$core$names.Names.equals(F,oe.getFieldValue("NAME"))&&oe.setFieldValue(te,"NAME")}},customContextMenu:function(F){if(!this.isInFlyout){var te={enabled:!0},ge=this.getFieldValue("NAME");te.text=re.PROCEDURES_CREATE_DO.replace("%1",ge);var Me=i.module$build$src$core$utils$xml.createElement("mutation");for(Me.setAttribute("name",ge),ge=0;ge<this.arguments_.length;ge++){var oe=i.module$build$src$core$utils$xml.createElement("arg");oe.setAttribute("name",this.arguments_[ge]),Me.appendChild(oe)}if(ge=i.module$build$src$core$utils$xml.createElement("block"),ge.setAttribute("type",this.callType_),ge.appendChild(Me),te.callback=i.module$build$src$core$contextmenu.callbackFactory(this,ge),F.push(te),!this.isCollapsed())for(te=0;te<this.argumentVarModels_.length;te++)Me={enabled:!0},ge=this.argumentVarModels_[te],Me.text=re.VARIABLES_SET_CREATE_GET.replace("%1",ge.name),ge=i.module$build$src$core$variables.generateVariableFieldDom(ge),oe=i.module$build$src$core$utils$xml.createElement("block"),oe.setAttribute("type","variables_get"),oe.appendChild(ge),Me.callback=i.module$build$src$core$contextmenu.callbackFactory(this,oe),F.push(Me)}}};K.blocks.procedures_defnoreturn=Object.assign({},X,{init:function(){var F=i.module$build$src$core$procedures.findLegalName("",this);F=new i.FieldTextInput$$module$build$src$core$field_textinput(F,i.module$build$src$core$procedures.rename),F.setSpellcheck(!1),this.appendDummyInput().appendField(re.PROCEDURES_DEFNORETURN_TITLE).appendField(F,"NAME").appendField("","PARAMS"),this.setMutator(new i.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&re.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(re.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(re.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(re.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),K.blocks.procedures_defreturn=Object.assign({},X,{init:function(){var F=i.module$build$src$core$procedures.findLegalName("",this);F=new i.FieldTextInput$$module$build$src$core$field_textinput(F,i.module$build$src$core$procedures.rename),F.setSpellcheck(!1),this.appendDummyInput().appendField(re.PROCEDURES_DEFRETURN_TITLE).appendField(F,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$input.RIGHT).appendField(re.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&re.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(re.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(re.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(re.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),K.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(re.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(re.PROCEDURES_ALLOW_STATEMENTS).appendField(new i.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(re.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},K.blocks.procedures_mutatorarg={init:function(){const F=new i.FieldTextInput$$module$build$src$core$field_textinput(i.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);F.oldShowEditorFn_=F.showEditor_,F.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(re.PROCEDURES_MUTATORARG_TITLE).appendField(F,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(re.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,F.onFinishEditing_=this.deleteIntermediateVars_,F.createdVariables_=[],F.onFinishEditing_("x")},validator_:function(F){var te=this.getSourceBlock();const ge=i.Mutator$$module$build$src$core$mutator.findParentWs(te.workspace);if(F=F.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!F)return null;const Me=(te.workspace.targetWorkspace||te.workspace).getAllBlocks(!1),oe=F.toLowerCase();for(let Pe=0;Pe<Me.length;Pe++){if(Me[Pe].id===this.getSourceBlock().id)continue;const et=Me[Pe].getFieldValue("NAME");if(et&&et.toLowerCase()===oe)return null}return te.isInFlyout||((te=ge.getVariable(F,""))&&te.name!==F&&ge.renameVariableById(te.getId(),F),te||(te=ge.createVariable(F,""))&&this.createdVariables_&&this.createdVariables_.push(te)),F},deleteIntermediateVars_:function(F){const te=i.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(te)for(let ge=0;ge<this.createdVariables_.length;ge++){const Me=this.createdVariables_[ge];Me.name!==F&&te.deleteVariableById(Me.getId())}}};var Q={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(F,te){i.module$build$src$core$names.Names.equals(F,this.getProcedureCall())&&(this.setFieldValue(te,"NAME"),this.setTooltip((this.outputConnection?re.PROCEDURES_CALLRETURN_TOOLTIP:re.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",te)))},setProcedureParameters_:function(F,te){var ge=i.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),Me=ge&&ge.mutator&&ge.mutator.isVisible();if(Me?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),F.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=te;else{if(te.length!==F.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),ge=this.rendered,this.rendered=!1;for(let Pe=0;Pe<this.arguments_.length;Pe++){var oe=this.getInput("ARG"+Pe);oe&&(oe=oe.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Pe]]=oe,Me&&oe&&te.indexOf(this.quarkIds_[Pe])===-1&&(oe.disconnect(),oe.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(F),this.argumentVarModels_=[],F=0;F<this.arguments_.length;F++)Me=i.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[F],""),this.argumentVarModels_.push(Me);if(this.updateShape_(),this.quarkIds_=te)for(te=0;te<this.arguments_.length;te++)F=this.quarkIds_[te],F in this.quarkConnections_&&(i.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[F],this,"ARG"+te)||delete this.quarkConnections_[F]);(this.rendered=ge)&&this.render()}},updateShape_:function(){for(var F=0;F<this.arguments_.length;F++){var te=this.getField("ARGNAME"+F);if(te){i.module$build$src$core$events$events.disable();try{te.setValue(this.arguments_[F])}finally{i.module$build$src$core$events$events.enable()}}else te=new i.FieldLabel$$module$build$src$core$field_label(this.arguments_[F]),this.appendValueInput("ARG"+F).setAlign(i.Align$$module$build$src$core$input.RIGHT).appendField(te,"ARGNAME"+F).init()}for(F=this.arguments_.length;this.getInput("ARG"+F);F++)this.removeInput("ARG"+F);(F=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(F.appendField(re.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),F.init()):this.getField("WITH")&&F.removeField("WITH"))},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");F.setAttribute("name",this.getProcedureCall());for(let te=0;te<this.arguments_.length;te++){const ge=i.module$build$src$core$utils$xml.createElement("arg");ge.setAttribute("name",this.arguments_[te]),F.appendChild(ge)}return F},domToMutation:function(F){var te=F.getAttribute("name");this.renameProcedure(this.getProcedureCall(),te),te=[];const ge=[];for(let Me=0,oe;oe=F.childNodes[Me];Me++)oe.nodeName.toLowerCase()==="arg"&&(te.push(oe.getAttribute("name")),ge.push(oe.getAttribute("paramId")));this.setProcedureParameters_(te,ge)},saveExtraState:function(){const F=Object.create(null);return F.name=this.getProcedureCall(),this.arguments_.length&&(F.params=this.arguments_),F},loadExtraState:function(F){if(this.renameProcedure(this.getProcedureCall(),F.name),F=F.params){const te=[];te.length=F.length,te.fill(null),this.setProcedureParameters_(F,te)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(F){if(this.workspace&&!this.workspace.isFlyout&&F.recordUndo)if(F.type===i.module$build$src$core$events$events.BLOCK_CREATE&&F.ids.indexOf(this.id)!==-1){var te=this.getProcedureCall();if(te=i.module$build$src$core$procedures.getDefinition(te,this.workspace),!te||te.type===this.defType_&&JSON.stringify(te.getVars())===JSON.stringify(this.arguments_)||(te=null),!te){i.module$build$src$core$events$events.setGroup(F.group),F=i.module$build$src$core$utils$xml.createElement("xml"),te=i.module$build$src$core$utils$xml.createElement("block"),te.setAttribute("type",this.defType_);var ge=this.getRelativeToSurfaceXY(),Me=ge.y+2*i.config$$module$build$src$core$config.snapRadius;te.setAttribute("x",ge.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),te.setAttribute("y",Me),ge=this.mutationToDom(),te.appendChild(ge),ge=i.module$build$src$core$utils$xml.createElement("field"),ge.setAttribute("name","NAME"),Me=this.getProcedureCall();const oe=i.module$build$src$core$procedures.findLegalName(Me,this);Me!==oe&&this.renameProcedure(Me,oe),ge.appendChild(i.module$build$src$core$utils$xml.createTextNode(Me)),te.appendChild(ge),F.appendChild(te),i.module$build$src$core$xml.domToWorkspace(F,this.workspace),i.module$build$src$core$events$events.setGroup(!1)}}else F.type===i.module$build$src$core$events$events.BLOCK_DELETE?(te=this.getProcedureCall(),i.module$build$src$core$procedures.getDefinition(te,this.workspace)||(i.module$build$src$core$events$events.setGroup(F.group),this.dispose(!0),i.module$build$src$core$events$events.setGroup(!1))):F.type===i.module$build$src$core$events$events.CHANGE&&F.element==="disabled"&&(te=this.getProcedureCall(),(te=i.module$build$src$core$procedures.getDefinition(te,this.workspace))&&te.id===F.blockId&&((te=i.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),i.module$build$src$core$events$events.setGroup(F.group),F.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.module$build$src$core$events$events.setGroup(te)))},customContextMenu:function(F){if(this.workspace.isMovable()){var te={enabled:!0};te.text=re.PROCEDURES_HIGHLIGHT_DEF;var ge=this.getProcedureCall(),Me=this.workspace;te.callback=function(){const oe=i.module$build$src$core$procedures.getDefinition(ge,Me);oe&&(Me.centerOnBlock(oe.id),oe.select())},F.push(te)}}};K.blocks.procedures_callnoreturn=Object.assign({},Q,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(re.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),K.blocks.procedures_callreturn=Object.assign({},Q,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(re.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),K.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(re.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(re.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(re.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(re.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("value",Number(this.hasReturnValue_)),F},domToMutation:function(F){this.hasReturnValue_=F.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(re.PROCEDURES_DEFRETURN_RETURN))},onchange:function(F){if(!(this.workspace.isDragging&&this.workspace.isDragging()||F.type!==i.module$build$src$core$events$events.BLOCK_MOVE)){var te=!1,ge=this;do{if(this.FUNCTION_TYPES.indexOf(ge.type)!==-1){te=!0;break}ge=ge.getSurroundParent()}while(ge);te?(ge.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(re.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):ge.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(re.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(re.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(ge=i.module$build$src$core$events$events.getGroup(),i.module$build$src$core$events$events.setGroup(F.group),this.setEnabled(te),i.module$build$src$core$events$events.setGroup(ge))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},ce(K.blocks);var ee={};i.module$build$src$core$extensions,i.module$build$src$core$field_dropdown,i.module$build$src$core$utils$xml;var z=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,L=i.module$build$src$core$common.defineBlocks;ee.blocks=z([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var le={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.module$build$src$core$extensions.register("math_op_tooltip",i.module$build$src$core$extensions.buildTooltipForDropdown("OP",le));var de={mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation"),te=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return F.setAttribute("divisor_input",te),F},domToMutation:function(F){F=F.getAttribute("divisor_input")==="true",this.updateShape_(F)},updateShape_:function(F){const te=this.getInput("DIVISOR");F?te||this.appendValueInput("DIVISOR").setCheck("Number"):te&&this.removeInput("DIVISOR")}},ie=function(){this.getField("PROPERTY").setValidator(function(F){F=F==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(F)})};i.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",de,ie),i.module$build$src$core$extensions.register("math_change_tooltip",i.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Ce={updateType_:function(F){F==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("op",this.getFieldValue("OP")),F},domToMutation:function(F){this.updateType_(F.getAttribute("op"))}},ye=function(){this.getField("OP").setValidator(function(F){this.updateType_(F)}.bind(this))};i.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",Ce,ye),L(ee.blocks);var xe={};i.module$build$src$core$contextmenu,i.module$build$src$core$events$events,i.module$build$src$core$extensions,i.module$build$src$core$variables,i.module$build$src$core$utils$xml;var Fe=i.module$build$src$core$msg.Msg,Xe=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Ue=i.module$build$src$core$common.defineBlocks;xe.blocks=Xe([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var we={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.module$build$src$core$extensions.register("controls_whileUntil_tooltip",i.module$build$src$core$extensions.buildTooltipForDropdown("MODE",we));var Ge={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.module$build$src$core$extensions.register("controls_flow_tooltip",i.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",Ge));var W={customContextMenu:function(F){if(!this.isInFlyout){var te=this.getField("VAR").getVariable(),ge=te.name;if(!this.isCollapsed()&&ge!==null){const Me={enabled:!0};Me.text=Fe.VARIABLES_SET_CREATE_GET.replace("%1",ge),te=i.module$build$src$core$variables.generateVariableFieldDom(te),ge=i.module$build$src$core$utils$xml.createElement("block"),ge.setAttribute("type","variables_get"),ge.appendChild(te),Me.callback=i.module$build$src$core$contextmenu.callbackFactory(this,ge),F.push(Me)}}}};i.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",W),i.module$build$src$core$extensions.register("controls_for_tooltip",i.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.module$build$src$core$extensions.register("controls_forEach_tooltip",i.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),xe.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var Ee={getSurroundLoop:function(){let F=this;do{if(xe.loopTypes.has(F.type))return F;F=F.getSurroundParent()}while(F);return null},onchange:function(F){if(this.workspace.isDragging&&!this.workspace.isDragging()&&F.type===i.module$build$src$core$events$events.BLOCK_MOVE){var te=this.getSurroundLoop(this);if(this.setWarningText(te?null:Fe.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const ge=i.module$build$src$core$events$events.getGroup();i.module$build$src$core$events$events.setGroup(F.group),this.setEnabled(te),i.module$build$src$core$events$events.setGroup(ge)}}}};i.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",Ee),Ue(xe.blocks);var Oe={};i.module$build$src$core$events$events,i.module$build$src$core$extensions,i.module$build$src$core$utils$xml;var ae=i.module$build$src$core$msg.Msg;i.Mutator$$module$build$src$core$mutator;var ne=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,pe=i.module$build$src$core$common.defineBlocks;Oe.blocks=ne([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Ae={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.module$build$src$core$extensions.register("logic_op_tooltip",i.module$build$src$core$extensions.buildTooltipForDropdown("OP",Ae));var Te={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const F=i.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&F.setAttribute("elseif",this.elseifCount_),this.elseCount_&&F.setAttribute("else",1),F},domToMutation:function(F){this.elseifCount_=parseInt(F.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(F.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const F=Object.create(null);return this.elseifCount_&&(F.elseIfCount=this.elseifCount_),this.elseCount_&&(F.hasElse=!0),F},loadExtraState:function(F){this.elseifCount_=F.elseIfCount||0,this.elseCount_=F.hasElse?1:0,this.updateShape_()},decompose:function(F){const te=F.newBlock("controls_if_if");te.initSvg();let ge=te.nextConnection;for(let Me=1;Me<=this.elseifCount_;Me++){const oe=F.newBlock("controls_if_elseif");oe.initSvg(),ge.connect(oe.previousConnection),ge=oe.nextConnection}return this.elseCount_&&(F=F.newBlock("controls_if_else"),F.initSvg(),ge.connect(F.previousConnection)),te},compose:function(F){F=F.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const te=[null],ge=[null];let Me=null;for(;F;){if(!F.isInsertionMarker())switch(F.type){case"controls_if_elseif":this.elseifCount_++,te.push(F.valueConnection_),ge.push(F.statementConnection_);break;case"controls_if_else":this.elseCount_++,Me=F.statementConnection_;break;default:throw TypeError("Unknown block type: "+F.type)}F=F.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(te,ge,Me)},saveConnections:function(F){F=F.nextConnection.targetBlock();let te=1;for(;F;){if(!F.isInsertionMarker())switch(F.type){case"controls_if_elseif":var ge=this.getInput("IF"+te);const Me=this.getInput("DO"+te);F.valueConnection_=ge&&ge.connection.targetConnection,F.statementConnection_=Me&&Me.connection.targetConnection,te++;break;case"controls_if_else":ge=this.getInput("ELSE"),F.statementConnection_=ge&&ge.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+F.type)}F=F.getNextBlock()}},rebuildShape_:function(){const F=[null],te=[null];let ge=null;this.getInput("ELSE")&&(ge=this.getInput("ELSE").connection.targetConnection);for(let Me=1;this.getInput("IF"+Me);Me++){const oe=this.getInput("IF"+Me),Pe=this.getInput("DO"+Me);F.push(oe.connection.targetConnection),te.push(Pe.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(F,te,ge)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var F=1;this.getInput("IF"+F);F++)this.removeInput("IF"+F),this.removeInput("DO"+F);for(F=1;F<=this.elseifCount_;F++)this.appendValueInput("IF"+F).setCheck("Boolean").appendField(ae.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+F).appendField(ae.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(ae.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(F,te,ge){for(let Me=1;Me<=this.elseifCount_;Me++)i.Mutator$$module$build$src$core$mutator.reconnect(F[Me],this,"IF"+Me),i.Mutator$$module$build$src$core$mutator.reconnect(te[Me],this,"DO"+Me);i.Mutator$$module$build$src$core$mutator.reconnect(ge,this,"ELSE")}};i.module$build$src$core$extensions.registerMutator("controls_if_mutator",Te,null,["controls_if_elseif","controls_if_else"]);var j=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return ae.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return ae.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return ae.CONTROLS_IF_TOOLTIP_4}else return ae.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};i.module$build$src$core$extensions.register("controls_if_tooltip",j);var Y={onchange:function(F){this.prevBlocks_||(this.prevBlocks_=[null,null]);var te=this.getInputTargetBlock("A");const ge=this.getInputTargetBlock("B");te&&ge&&!this.workspace.connectionChecker.doTypeChecks(te.outputConnection,ge.outputConnection)&&(i.module$build$src$core$events$events.setGroup(F.group),F=this.prevBlocks_[0],F!==te&&(te.unplug(),!F||F.isDisposed()||F.isShadow()||this.getInput("A").connection.connect(F.outputConnection)),te=this.prevBlocks_[1],te!==ge&&(ge.unplug(),!te||te.isDisposed()||te.isShadow()||this.getInput("B").connection.connect(te.outputConnection)),this.bumpNeighbours(),i.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ue=function(){this.mixin(Y)};i.module$build$src$core$extensions.register("logic_compare",ue);var me={prevParentConnection_:null,onchange:function(F){const te=this.getInputTargetBlock("THEN"),ge=this.getInputTargetBlock("ELSE"),Me=this.outputConnection.targetConnection;if((te||ge)&&Me)for(let oe=0;2>oe;oe++){const Pe=oe===1?te:ge;Pe&&!Pe.workspace.connectionChecker.doTypeChecks(Pe.outputConnection,Me)&&(i.module$build$src$core$events$events.setGroup(F.group),Me===this.prevParentConnection_?(this.unplug(),Me.getSourceBlock().bumpNeighbours()):(Pe.unplug(),Pe.bumpNeighbours()),i.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=Me}};i.module$build$src$core$extensions.registerMixin("logic_ternary",me),pe(Oe.blocks);var Ie={};i.module$build$src$core$utils$xml,i.module$build$src$core$xml,i.Align$$module$build$src$core$input,i.module$build$src$core$connection_type.ConnectionType;var ze=i.module$build$src$core$field_dropdown.FieldDropdown,Se=i.module$build$src$core$msg.Msg;i.Mutator$$module$build$src$core$mutator;var Je=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Ve=i.module$build$src$core$common.defineBlocks;Ie.blocks=Je([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ie.blocks.lists_create_with={init:function(){this.setHelpUrl(Se.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(Se.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("items",this.itemCount_),F},domToMutation:function(F){this.itemCount_=parseInt(F.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(F){this.itemCount_=F.itemCount,this.updateShape_()},decompose:function(F){const te=F.newBlock("lists_create_with_container");te.initSvg();let ge=te.getInput("STACK").connection;for(let Me=0;Me<this.itemCount_;Me++){const oe=F.newBlock("lists_create_with_item");oe.initSvg(),ge.connect(oe.previousConnection),ge=oe.nextConnection}return te},compose:function(F){var te=F.getInputTargetBlock("STACK");for(F=[];te;)te.isInsertionMarker()||F.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const ge=this.getInput("ADD"+te).connection.targetConnection;ge&&F.indexOf(ge)===-1&&ge.disconnect()}for(this.itemCount_=F.length,this.updateShape_(),te=0;te<this.itemCount_;te++)i.Mutator$$module$build$src$core$mutator.reconnect(F[te],this,"ADD"+te)},saveConnections:function(F){F=F.getInputTargetBlock("STACK");let te=0;for(;F;){if(F.isInsertionMarker()){F=F.getNextBlock();continue}const ge=this.getInput("ADD"+te);F.valueConnection_=ge&&ge.connection.targetConnection,F=F.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Se.LISTS_CREATE_EMPTY_TITLE);for(var F=0;F<this.itemCount_;F++)if(!this.getInput("ADD"+F)){const te=this.appendValueInput("ADD"+F).setAlign(i.Align$$module$build$src$core$input.RIGHT);F===0&&te.appendField(Se.LISTS_CREATE_WITH_INPUT_WITH)}for(F=this.itemCount_;this.getInput("ADD"+F);F++)this.removeInput("ADD"+F)}},Ie.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Se.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(Se.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Ie.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Se.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Se.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Ie.blocks.lists_indexOf={init:function(){const F=[[Se.LISTS_INDEX_OF_FIRST,"FIRST"],[Se.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Se.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(Se.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new ze(F),"END"),this.setInputsInline(!0);const te=this;this.setTooltip(function(){return Se.LISTS_INDEX_OF_TOOLTIP.replace("%1",te.workspace.options.oneBasedIndex?"0":"-1")})}},Ie.blocks.lists_getIndex={init:function(){var F=[[Se.LISTS_GET_INDEX_GET,"GET"],[Se.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Se.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Se.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Se.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Se.LISTS_GET_INDEX_FIRST,"FIRST"],[Se.LISTS_GET_INDEX_LAST,"LAST"],[Se.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Se.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),F=new ze(F,function(ge){ge=ge==="REMOVE",this.getSourceBlock().updateStatement_(ge)}),this.appendValueInput("VALUE").setCheck("Array").appendField(Se.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(F,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),Se.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Se.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const te=this;this.setTooltip(function(){const ge=te.getFieldValue("MODE"),Me=te.getFieldValue("WHERE");let oe="";switch(ge+" "+Me){case"GET FROM_START":case"GET FROM_END":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":oe=Se.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":oe=Se.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":oe=Se.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":oe=Se.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":oe=Se.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Me==="FROM_START"||Me==="FROM_END")&&(oe+="  "+(Me==="FROM_START"?Se.LISTS_INDEX_FROM_START_TOOLTIP:Se.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",te.workspace.options.oneBasedIndex?"#1":"#0")),oe})},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");F.setAttribute("statement",!this.outputConnection);const te=this.getInput("AT").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return F.setAttribute("at",te),F},domToMutation:function(F){const te=F.getAttribute("statement")==="true";this.updateStatement_(te),F=F.getAttribute("at")!=="false",this.updateAt_(F)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(F){F.isStatement?this.updateStatement_(!0):typeof F=="string"&&this.domToMutation(i.module$build$src$core$xml.textToDom(F))},updateStatement_:function(F){F!==!this.outputConnection&&(this.unplug(!0,!0),F?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(F){this.removeInput("AT"),this.removeInput("ORDINAL",!0),F?(this.appendValueInput("AT").setCheck("Number"),Se.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Se.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=new ze(this.WHERE_OPTIONS,function(ge){const Me=ge==="FROM_START"||ge==="FROM_END";if(Me!==F){const oe=this.getSourceBlock();return oe.updateAt_(Me),oe.setFieldValue(ge,"WHERE"),null}});this.getInput("AT").appendField(te,"WHERE"),Se.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Ie.blocks.lists_setIndex={init:function(){const F=[[Se.LISTS_SET_INDEX_SET,"SET"],[Se.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Se.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Se.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Se.LISTS_GET_INDEX_FIRST,"FIRST"],[Se.LISTS_GET_INDEX_LAST,"LAST"],[Se.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Se.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Se.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new ze(F),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Se.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Se.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const te=this;this.setTooltip(function(){const ge=te.getFieldValue("MODE"),Me=te.getFieldValue("WHERE");let oe="";switch(ge+" "+Me){case"SET FROM_START":case"SET FROM_END":oe=Se.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":oe=Se.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":oe=Se.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":oe=Se.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":oe=Se.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":oe=Se.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":oe=Se.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":oe=Se.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Me==="FROM_START"||Me==="FROM_END")&&(oe+="  "+Se.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",te.workspace.options.oneBasedIndex?"#1":"#0")),oe})},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation"),te=this.getInput("AT").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return F.setAttribute("at",te),F},domToMutation:function(F){F=F.getAttribute("at")!=="false",this.updateAt_(F)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(F){this.removeInput("AT"),this.removeInput("ORDINAL",!0),F?(this.appendValueInput("AT").setCheck("Number"),Se.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Se.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=new ze(this.WHERE_OPTIONS,function(ge){const Me=ge==="FROM_START"||ge==="FROM_END";if(Me!==F){const oe=this.getSourceBlock();return oe.updateAt_(Me),oe.setFieldValue(ge,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(te,"WHERE")}},Ie.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Se.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Se.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Se.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Se.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Se.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Se.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(Se.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Se.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Se.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Se.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Se.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");var te=this.getInput("AT1").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return F.setAttribute("at1",te),te=this.getInput("AT2").type===i.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,F.setAttribute("at2",te),F},domToMutation:function(F){const te=F.getAttribute("at1")==="true";F=F.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,F)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(F,te){this.removeInput("AT"+F),this.removeInput("ORDINAL"+F,!0),te?(this.appendValueInput("AT"+F).setCheck("Number"),Se.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+F).appendField(Se.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+F);const ge=new ze(this["WHERE_OPTIONS_"+F],function(Me){const oe=Me==="FROM_START"||Me==="FROM_END";if(oe!==te){const Pe=this.getSourceBlock();return Pe.updateAt_(F,oe),Pe.setFieldValue(Me,"WHERE"+F),null}});this.getInput("AT"+F).appendField(ge,"WHERE"+F),F===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),Se.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Ie.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Ie.blocks.lists_split={init:function(){const F=this,te=new ze([[Se.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Se.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(ge){F.updateType_(ge)});this.setHelpUrl(Se.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(te,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(Se.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const ge=F.getFieldValue("MODE");if(ge==="SPLIT")return Se.LISTS_SPLIT_TOOLTIP_SPLIT;if(ge==="JOIN")return Se.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+ge)})},updateType_:function(F){if(this.getFieldValue("MODE")!==F){const te=this.getInput("INPUT").connection;te.setShadowDom(null);const ge=te.targetBlock();ge&&(te.disconnect(),ge.isShadow()?ge.dispose():this.bumpNeighbours())}F==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const F=i.module$build$src$core$utils$xml.createElement("mutation");return F.setAttribute("mode",this.getFieldValue("MODE")),F},domToMutation:function(F){this.updateType_(F.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},Ve(Ie.blocks);var ot={},_e=i.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Le=i.module$build$src$core$common.defineBlocks;ot.blocks=_e([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Le(ot.blocks);var We={};return We.colour=ot,We.lists=Ie,We.logic=Oe,We.loops=xe,We.math=ee,We.procedures=K,We.texts=w,We.variables=p,We.variablesDynamic=r,We.blocks=Object.assign({},ot.blocks,Ie.blocks,Oe.blocks,xe.blocks,ee.blocks,K.blocks,p.blocks,r.blocks),We.__namespace__=i,We})}(ZR)),ZR.exports}var O4;function poe(){return O4||(O4=1,function(n,e){(function(t,i){n.exports=i(foe())})(Ki,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(YR)),YR.exports}var v4;function moe(){return v4||(v4=1,function(n,e){(function(t,i){n.exports=i(uA(),doe(),poe(),U$)})(Ki,function(t,i,r,o){return t.setLocale(i),t})}(XR)),XR.exports}(function(n,e){(function(t,i){n.exports=i(moe())})(Ki,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(w9);var goe=w9.exports;const Yt=Mu(goe),_oe={name:"circle",block:{init:function(){this.appendDummyInput().appendField(new Yt.FieldLabelSerializable("Go in circle of radius"),"Circular motion").appendField(new Yt.FieldNumber(0,0),"radius_m").appendField("m"),this.appendDummyInput().appendField("at speed").appendField(new Yt.FieldNumber(.2),"velocity").appendField("m/s"),this.appendDummyInput().appendField("for").appendField(new Yt.FieldAngle(90),"angle_degrees").appendField("degrees,"),this.appendDummyInput().appendField(new Yt.FieldDropdown([["counterclockwise","ccw"],["clockwise","cw"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("radius_m"),i=n.getFieldValue("velocity"),r=n.getFieldValue("angle_degrees"),o=n.getFieldValue("direction"),a="circle("+t+","+i+","+r+",'"+o+"')";return a},javascriptGenerator:(n,e)=>{const t=n.getFieldValue("radius_m"),i=n.getFieldValue("velocity"),r=n.getFieldValue("angle_degrees"),o=n.getFieldValue("direction");var a=!0;return o=="ccw"&&(a=!1),`duration += simulator.move_circle_vel(group_state, ${t}, ${i}, ${r}, ${a});`}},Ooe={name:"start_linear_motion",block:{init:function(){this.appendDummyInput().appendField("Start linear motion with speeds in"),this.appendDummyInput().appendField("x direction:").appendField(new Yt.FieldNumber(0),"velocity_x_m").appendField("m/s"),this.appendDummyInput().appendField("y direction:").appendField(new Yt.FieldNumber(0),"velocity_y_m").appendField("m/s"),this.appendDummyInput().appendField("z direction:").appendField(new Yt.FieldNumber(0),"velocity_z_m").appendField("m/s"),this.appendDummyInput().appendField("yaw:").appendField(new Yt.FieldAngle(90),"rate_yaw").appendField("/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("velocity_x_m"),i=n.getFieldValue("velocity_y_m"),r=n.getFieldValue("velocity_z_m"),o=n.getFieldValue("rate_yaw"),a="start_linear_motion("+t+","+i+","+r+","+o+`)
`;return a},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},voe={name:"set_default_height",block:{init:function(){this.appendDummyInput().appendField("set default height to").appendField(new Yt.FieldNumber(0,0),"default_height").appendField("meters"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("default_height"),i="set_default_height("+t+`)
`;return i},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},yoe={name:"stop",block:{init:function(){this.appendDummyInput().appendField("stop and hover"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(0),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>`stop_and_hover(cf)
`,javascriptGenerator:(n,e)=>`duration += simulator.stop_and_hover(group_state);
`},boe={name:"go_to",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Yt.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Yt.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Yt.FieldNumber(0),"z_pos").appendField("over").appendField(new Yt.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("x_pos"),i=n.getFieldValue("y_pos"),r=n.getFieldValue("z_pos"),o=n.getFieldValue("duration"),a="goto_duration(cf, "+t+","+i+","+r+","+o+`)
`;return a},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("x_pos"),i=n.getFieldValue("y_pos"),r=n.getFieldValue("z_pos"),o=n.getFieldValue("duration");return`duration += simulator.go_to_xyz_duration(group_state, ${t}, ${i}, ${r}, ${o});
`}},Soe={name:"go_to_speed",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Yt.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Yt.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Yt.FieldNumber(0),"z_pos").appendField("at").appendField(new Yt.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("x_pos"),i=n.getFieldValue("y_pos"),r=n.getFieldValue("z_pos"),o=n.getFieldValue("speed"),a="go_to(cf, "+t+","+i+","+r+","+o+`)
`;return a},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("x_pos"),i=n.getFieldValue("y_pos"),r=n.getFieldValue("z_pos"),o=n.getFieldValue("speed");return`duration += simulator.go_to_xyz_speed(group_state, ${t}, ${i}, ${r}, ${o});
`}},Toe={name:"land",block:{init:function(){this.appendDummyInput().appendField("land at height").appendField(new Yt.FieldNumber(0),"height").appendField("over").appendField(new Yt.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("height"),i=n.getFieldValue("duration"),r="land(cf, "+t+","+i+`)
`;return r},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("height"),i=n.getFieldValue("duration");return`duration += simulator.land(group_state, ${t}, ${i});
`}},woe={name:"move_angles",block:{init:function(){this.appendDummyInput().appendField("move towards"),this.appendDummyInput().appendField("horizontal angle").appendField(new Yt.FieldAngle(90),"horizontal angle"),this.appendDummyInput().appendField("vertical angle").appendField(new Yt.FieldAngle(90),"vertical angle"),this.appendDummyInput().appendField("distance").appendField(new Yt.FieldNumber(0),"distance").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Yt.FieldNumber(0),"speed").appendField("m/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("horizontal angle"),i=n.getFieldValue("vertical angle"),r=n.getFieldValue("distance"),o=n.getFieldValue("speed"),a="move_by_angles("+t+","+i+","+r+","+o+`)
`;return a},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("horizontal angle"),i=n.getFieldValue("vertical angle"),r=n.getFieldValue("distance"),o=n.getFieldValue("speed");return`duration += simulator.move_by_angles(group_state, ${t}, ${i}, ${r}, ${o})`}},Eoe={name:"move_xyz",block:{init:function(){this.appendDummyInput().appendField("move X").appendField(new Yt.FieldNumber(0),"x").appendField("meters"),this.appendDummyInput().appendField("move Y").appendField(new Yt.FieldNumber(0),"y").appendField("meters"),this.appendDummyInput().appendField("move Z").appendField(new Yt.FieldNumber(0),"z").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Yt.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("x"),i=n.getFieldValue("y"),r=n.getFieldValue("z"),o=n.getFieldValue("speed"),a="goto_rel_at_speed(cf, "+t+","+i+","+r+","+o+`)
`;return a},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("x"),i=n.getFieldValue("y"),r=n.getFieldValue("z"),o=n.getFieldValue("speed");return`duration += simulator.move_speed(group_state, ${t}, ${i}, ${r}, ${o});
`}},xoe={name:"move",block:{init:function(){this.appendDummyInput().appendField("move").appendField(new Yt.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField(new Yt.FieldNumber(0),"distance").appendField("meters for").appendField(new Yt.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("direction"),i=n.getFieldValue("distance"),r=n.getFieldValue("duration"),o="move_direction(cf, "+t+","+i+","+r+`)
`;return o},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("direction"),i=n.getFieldValue("distance"),r=n.getFieldValue("duration");return`duration += simulator.move_direction(group_state, ${t}, ${i}, ${r});
`}},$oe={name:"takeoff",block:{init:function(){this.appendDummyInput().appendField("takeoff to").appendField(new Yt.FieldNumber(0),"height").appendField("meters over").appendField(new Yt.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("height"),i=n.getFieldValue("duration"),r="takeoff(cf, "+t+" ,"+i+`)
`;return r},javascriptGenerator:(n,e)=>{var t=n.getFieldValue("height"),i=n.getFieldValue("duration");return`duration += simulator.takeoff(group_state, ${t}, ${i});
`}},Coe={name:"turn",block:{init:function(){this.appendDummyInput().appendField("turn").appendField(new Yt.FieldDropdown([["right",`
									right
								`],["left","left"]]),"direction").appendField(new Yt.FieldAngle(0),"degrees").appendField("at").appendField(new Yt.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("direction"),i=n.getFieldValue("degrees"),r=n.getFieldValue("rate"),o="turn("+t+","+i+","+r+`)
`;return o},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},Aoe={name:"start_circle",block:{init:function(){this.appendDummyInput().appendField("start cricling").appendField(new Yt.FieldNumber(0),"radius").appendField("meter radius").appendField(new Yt.FieldDropdown([["right","circle_right"],["left","circle_left"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("radius"),i=n.getFieldValue("direction"),r="start_circle("+t+","+i+`)
`;return r},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},koe={name:"start_move",block:{init:function(){this.appendDummyInput().appendField("start moving").appendField(new Yt.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField("at").appendField(new Yt.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("direction"),i=n.getFieldValue("speed"),r="start_move("+t+","+i+`)
`;return r},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},Ioe={name:"start_turn",block:{init:function(){this.appendDummyInput().appendField("start turning").appendField(new Yt.FieldDropdown([["right","right"],["left","left"]]),"direction").appendField("at").appendField(new Yt.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("direction"),i=n.getFieldValue("rate"),r="start_turn("+t+","+i+`)
`;return r},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},Roe={name:"get_a_position",block:{init:function(){this.appendDummyInput().appendField(new Yt.FieldDropdown([["default","default"],["current","current"]]),"which").appendField(new Yt.FieldDropdown([["x","x position"],["y","y position"],["z","z position"]]),"NAME").appendField("position"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("which"),i=n.getFieldValue("NAME"),r="get_a_position("+t+","+i+")";return r},javascriptGenerator:(n,e)=>"duration += simulator.dummy()"},Moe={name:"set_default_speed",block:{init:function(){this.appendDummyInput().appendField("set default speed to").appendField(new Yt.FieldNumber(0),"speed"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("speed"),i="set_default_speed("+t+`)
`;return i},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"},Poe={name:"set_default_xy",block:{init:function(){this.appendDummyInput().appendField("set default").appendField(new Yt.FieldDropdown([["x","x"],["y","y"]]),"xy").appendField("to").appendField(new Yt.FieldNumber(0),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(n,e)=>{var t=n.getFieldValue("xy"),i=n.getFieldValue("NAME"),r="set_default_xy("+t+","+i+`)
`;return r},javascriptGenerator:(n,e)=>"duration += simulator.dummy();"};var Ux=uA();/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var tr,G$,E9,V2,x9,Sf={},EB=[],Doe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function sf(n,e){for(var t in e)n[t]=e[t];return n}function $9(n){var e=n.parentNode;e&&e.removeChild(n)}function ui(n,e,t){var i,r,o,a,l=arguments;if(e=sf({},e),arguments.length>3)for(t=[t],i=3;i<arguments.length;i++)t.push(l[i]);if(t!=null&&(e.children=t),n!=null&&n.defaultProps!=null)for(r in n.defaultProps)e[r]===void 0&&(e[r]=n.defaultProps[r]);return a=e.key,(o=e.ref)!=null&&delete e.ref,a!=null&&delete e.key,H2(n,e,a,o)}function H2(n,e,t,i){var r={type:n,props:e,key:t,ref:i,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return tr.vnode&&tr.vnode(r),r}function hA(n){return n.children}function Loe(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return H2(null,n,null,null);if(n.__e!=null||n.__c!=null){var e=H2(n.type,n.props,n.key,null);return e.__e=n.__e,e}return n}function U0(n,e){this.props=n,this.context=e}function W$(n,e){if(e==null)return n.__p?W$(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?W$(n):null}function C9(n){var e,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return C9(n)}}function qR(n){(!n.__d&&(n.__d=!0)&&G$.push(n)===1||V2!==tr.debounceRendering)&&(V2=tr.debounceRendering,(tr.debounceRendering||E9)(Noe))}function Noe(){var n,e,t,i,r,o,a,l;for(G$.sort(function(u,h){return h.__v.__b-u.__v.__b});n=G$.pop();)n.__d&&(t=void 0,i=void 0,o=(r=(e=n).__v).__e,a=e.__P,l=e.u,e.u=!1,a&&(t=[],i=$B(a,r,sf({},r),e.__n,a.ownerSVGElement!==void 0,null,t,l,o??W$(r)),k9(t,r),i!=o&&C9(r)))}function A9(n,e,t,i,r,o,a,l,u){var h,d,p,m,g,v,y,S=t&&t.__k||EB,T=S.length;if(l==Sf&&(l=o!=null?o[0]:T?W$(t,0):null),h=0,e.__k=xB(e.__k,function(w){if(w!=null){if(w.__p=e,w.__b=e.__b+1,(p=S[h])===null||p&&w.key==p.key&&w.type===p.type)S[h]=void 0;else for(d=0;d<T;d++){if((p=S[d])&&w.key==p.key&&w.type===p.type){S[d]=void 0;break}p=null}if(m=$B(n,w,p=p||Sf,i,r,o,a,null,l,u),(d=w.ref)&&p.ref!=d&&(y||(y=[])).push(d,w.__c||m,w),m!=null){if(v==null&&(v=m),w.l!=null)m=w.l,w.l=null;else if(o==p||m!=l||m.parentNode==null){e:if(l==null||l.parentNode!==n)n.appendChild(m);else{for(g=l,d=0;(g=g.nextSibling)&&d<T;d+=2)if(g==m)break e;n.insertBefore(m,l)}e.type=="option"&&(n.value="")}l=m.nextSibling,typeof e.type=="function"&&(e.l=m)}}return h++,w}),e.__e=v,o!=null&&typeof e.type!="function")for(h=o.length;h--;)o[h]!=null&&$9(o[h]);for(h=T;h--;)S[h]!=null&&R9(S[h],S[h]);if(y)for(h=0;h<y.length;h++)I9(y[h],y[++h],y[++h])}function xB(n,e,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")e&&t.push(e(null));else if(Array.isArray(n))for(var i=0;i<n.length;i++)xB(n[i],e,t);else t.push(e?e(Loe(n)):n);return t}function Boe(n,e,t,i,r){var o;for(o in t)o in e||b4(n,o,null,t[o],i);for(o in e)r&&typeof e[o]!="function"||o==="value"||o==="checked"||t[o]===e[o]||b4(n,o,e[o],t[o],i)}function y4(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=typeof t=="number"&&Doe.test(e)===!1?t+"px":t??""}function b4(n,e,t,i,r){var o,a,l,u,h;if(!((e=r?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(o=n.style,typeof t=="string")o.cssText=t;else{if(typeof i=="string"&&(o.cssText="",i=null),i)for(a in i)t&&a in t||y4(o,a,"");if(t)for(l in t)i&&t[l]===i[l]||y4(o,l,t[l])}else e[0]==="o"&&e[1]==="n"?(u=e!==(e=e.replace(/Capture$/,"")),h=e.toLowerCase(),e=(h in n?h:e).slice(2),t?(i||n.addEventListener(e,S4,u),(n.t||(n.t={}))[e]=t):n.removeEventListener(e,S4,u)):e!=="list"&&e!=="tagName"&&e!=="form"&&!r&&e in n?n[e]=t??"":typeof t!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),t):t==null||t===!1?n.removeAttribute(e):n.setAttribute(e,t))}function S4(n){return this.t[n.type](tr.event?tr.event(n):n)}function $B(n,e,t,i,r,o,a,l,u,h){var d,p,m,g,v,y,S,T,w,E,$=e.type;if(e.constructor!==void 0)return null;(d=tr.__b)&&d(e);try{e:if(typeof $=="function"){if(T=e.props,w=(d=$.contextType)&&i[d.__c],E=d?w?w.props.value:d.__p:i,t.__c?S=(p=e.__c=t.__c).__p=p.__E:("prototype"in $&&$.prototype.render?e.__c=p=new $(T,E):(e.__c=p=new U0(T,E),p.constructor=$,p.render=Uoe),w&&w.sub(p),p.props=T,p.state||(p.state={}),p.context=E,p.__n=i,m=p.__d=!0,p.__h=[]),p.__s==null&&(p.__s=p.state),$.getDerivedStateFromProps!=null&&sf(p.__s==p.state?p.__s=sf({},p.__s):p.__s,$.getDerivedStateFromProps(T,p.__s)),m)$.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&a.push(p);else{if($.getDerivedStateFromProps==null&&l==null&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(T,E),!l&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(T,p.__s,E)===!1){for(p.props=T,p.state=p.__s,p.__d=!1,p.__v=e,e.__e=u!=null?u!==t.__e?u:t.__e:null,e.__k=t.__k,d=0;d<e.__k.length;d++)e.__k[d]&&(e.__k[d].__p=e);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(T,p.__s,E)}for(g=p.props,v=p.state,p.context=E,p.props=T,p.state=p.__s,(d=tr.__r)&&d(e),p.__d=!1,p.__v=e,p.__P=n,d=p.render(p.props,p.state,p.context),e.__k=xB(d!=null&&d.type==hA&&d.key==null?d.props.children:d),p.getChildContext!=null&&(i=sf(sf({},i),p.getChildContext())),m||p.getSnapshotBeforeUpdate==null||(y=p.getSnapshotBeforeUpdate(g,v)),A9(n,e,t,i,r,o,a,u,h),p.base=e.__e;d=p.__h.pop();)p.__s&&(p.state=p.__s),d.call(p);m||g==null||p.componentDidUpdate==null||p.componentDidUpdate(g,v,y),S&&(p.__E=p.__p=null)}else e.__e=Foe(t.__e,e,t,i,r,o,a,h);(d=tr.diffed)&&d(e)}catch(A){tr.__e(A,e,t)}return e.__e}function k9(n,e){for(var t;t=n.pop();)try{t.componentDidMount()}catch(i){tr.__e(i,t.__v)}tr.__c&&tr.__c(e)}function Foe(n,e,t,i,r,o,a,l){var u,h,d,p,m=t.props,g=e.props;if(r=e.type==="svg"||r,n==null&&o!=null){for(u=0;u<o.length;u++)if((h=o[u])!=null&&(e.type===null?h.nodeType===3:h.localName===e.type)){n=h,o[u]=null;break}}if(n==null){if(e.type===null)return document.createTextNode(g);n=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),o=null}return e.type===null?m!==g&&(o!=null&&(o[o.indexOf(n)]=null),n.data=g):e!==t&&(o!=null&&(o=EB.slice.call(n.childNodes)),d=(m=t.props||Sf).dangerouslySetInnerHTML,p=g.dangerouslySetInnerHTML,l||(p||d)&&(p&&d&&p.__html==d.__html||(n.innerHTML=p&&p.__html||"")),Boe(n,g,m,r,l),e.__k=e.props.children,p||A9(n,e,t,i,e.type!=="foreignObject"&&r,o,a,Sf,l),l||("value"in g&&g.value!==void 0&&g.value!==n.value&&(n.value=g.value==null?"":g.value),"checked"in g&&g.checked!==void 0&&g.checked!==n.checked&&(n.checked=g.checked))),n}function I9(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){tr.__e(i,t)}}function R9(n,e,t){var i,r,o;if(tr.unmount&&tr.unmount(n),(i=n.ref)&&I9(i,null,e),t||typeof n.type=="function"||(t=(r=n.__e)!=null),n.__e=n.l=null,(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){tr.__e(a,e)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&R9(i[o],e,t);r!=null&&$9(r)}function Uoe(n,e,t){return this.constructor(n,t)}function Goe(n,e,t){var i,r,o;tr.__p&&tr.__p(n,e),r=(i=t===x9)?null:t&&t.__k||e.__k,n=ui(hA,null,[n]),o=[],$B(e,i?e.__k=n:(t||e).__k=n,r||Sf,Sf,e.ownerSVGElement!==void 0,t&&!i?[t]:r?null:EB.slice.call(e.childNodes),o,!1,t||Sf,i),k9(o,n)}tr={},U0.prototype.setState=function(n,e){var t=this.__s!==this.state&&this.__s||(this.__s=sf({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&sf(t,n),n!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),qR(this))},U0.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,qR(this))},U0.prototype.render=hA,G$=[],E9=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,V2=tr.debounceRendering,tr.__e=function(n,e,t){for(var i;e=e.__p;)if((i=e.__c)&&!i.__p)try{if(i.constructor&&i.constructor.getDerivedStateFromError!=null)i.setState(i.constructor.getDerivedStateFromError(n));else{if(i.componentDidCatch==null)continue;i.componentDidCatch(n)}return qR(i.__E=i)}catch(r){n=r}throw n},x9=Sf;function T4(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Woe(n,e,t){return e&&T4(n.prototype,e),t&&T4(n,t),n}function ta(){return ta=Object.assign||function(n){for(var e=arguments,t=1;t<arguments.length;t++){var i=e[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},ta.apply(this,arguments)}var zoe="[-\\+]?\\d+%?",Qoe="[-\\+]?\\d*\\.\\d+%?",Om="(?:"+Qoe+")|(?:"+zoe+")",M9="[\\s|\\(]+("+Om+")[,|\\s]+("+Om+")[,|\\s]+("+Om+")\\s*\\)?",P9="[\\s|\\(]+("+Om+")[,|\\s]+("+Om+")[,|\\s]+("+Om+")[,|\\s]+("+Om+")\\s*\\)?",Voe=new RegExp("rgb"+M9),Hoe=new RegExp("rgba"+P9),Xoe=new RegExp("hsl"+M9),joe=new RegExp("hsla"+P9),dA="^(?:#?|0x?)",vm="([0-9a-fA-F]{1})",ym="([0-9a-fA-F]{2})",Yoe=new RegExp(dA+vm+vm+vm+"$"),Zoe=new RegExp(dA+vm+vm+vm+vm+"$"),qoe=new RegExp(dA+ym+ym+ym+"$"),Joe=new RegExp(dA+ym+ym+ym+ym+"$"),Koe=2e3,eae=4e4,Xw=Math.log,k_=Math.round,Py=Math.floor;function fl(n,e,t){return Math.min(Math.max(n,e),t)}function Ko(n,e){var t=n.indexOf("%")>-1,i=parseFloat(n);return t?e/100*i:i}function ea(n){return parseInt(n,16)}function Wp(n){return n.toString(16).padStart(2,"0")}var v0=function(){function n(t,i){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=i,this.initialValue=ta({},this.$)}var e=n.prototype;return e.set=function(i){if(typeof i=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(i)?this.hexString=i:/^rgba?/.test(i)?this.rgbString=i:/^hsla?/.test(i)&&(this.hslString=i);else if(typeof i=="object")i instanceof n?this.hsva=i.hsva:"r"in i&&"g"in i&&"b"in i?this.rgb=i:"h"in i&&"s"in i&&"v"in i?this.hsv=i:"h"in i&&"s"in i&&"l"in i?this.hsl=i:"kelvin"in i&&(this.kelvin=i.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(i,r,o){var a;this[i]=ta({},this[i],(a={},a[r]=o,a))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new n(this)},e.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(i){var r=i.h/60,o=i.s/100,a=i.v/100,l=Py(r),u=r-l,h=a*(1-o),d=a*(1-u*o),p=a*(1-(1-u)*o),m=l%6,g=[a,d,h,h,p,a][m],v=[p,a,a,d,h,h][m],y=[h,h,p,a,a,d][m];return{r:fl(g*255,0,255),g:fl(v*255,0,255),b:fl(y*255,0,255)}},n.rgbToHsv=function(i){var r=i.r/255,o=i.g/255,a=i.b/255,l=Math.max(r,o,a),u=Math.min(r,o,a),h=l-u,d=0,p=l,m=l===0?0:h/l;switch(l){case u:d=0;break;case r:d=(o-a)/h+(o<a?6:0);break;case o:d=(a-r)/h+2;break;case a:d=(r-o)/h+4;break}return{h:d*60%360,s:fl(m*100,0,100),v:fl(p*100,0,100)}},n.hsvToHsl=function(i){var r=i.s/100,o=i.v/100,a=(2-r)*o,l=a<=1?a:2-a,u=l<1e-9?0:r*o/l;return{h:i.h,s:fl(u*100,0,100),l:fl(a*50,0,100)}},n.hslToHsv=function(i){var r=i.l*2,o=i.s*(r<=100?r:200-r)/100,a=r+o<1e-9?0:2*o/(r+o);return{h:i.h,s:fl(a*100,0,100),v:fl((r+o)/2,0,100)}},n.kelvinToRgb=function(i){var r=i/100,o,a,l;return r<66?(o=255,a=-155.25485562709179-.44596950469579133*(a=r-2)+104.49216199393888*Xw(a),l=r<20?0:-254.76935184120902+.8274096064007395*(l=r-10)+115.67994401066147*Xw(l)):(o=351.97690566805693+.114206453784165*(o=r-55)-40.25366309332127*Xw(o),a=325.4494125711974+.07943456536662342*(a=r-50)-28.0852963507957*Xw(a),l=255),{r:fl(Py(o),0,255),g:fl(Py(a),0,255),b:fl(Py(l),0,255)}},n.rgbToKelvin=function(i){for(var r=i.r,o=i.b,a=.4,l=Koe,u=eae,h;u-l>a;){h=(u+l)*.5;var d=n.kelvinToRgb(h);d.b/d.r>=o/r?u=h:l=h}return h},Woe(n,[{key:"hsv",get:function(){var i=this.$;return{h:i.h,s:i.s,v:i.v}},set:function(i){var r=this.$;if(i=ta({},r,i),this.onChange){var o={h:!1,v:!1,s:!1,a:!1};for(var a in r)o[a]=i[a]!=r[a];this.$=i,(o.h||o.s||o.v||o.a)&&this.onChange(this,o)}else this.$=i}},{key:"hsva",get:function(){return ta({},this.$)},set:function(i){this.hsv=i}},{key:"hue",get:function(){return this.$.h},set:function(i){this.hsv={h:i}}},{key:"saturation",get:function(){return this.$.s},set:function(i){this.hsv={s:i}}},{key:"value",get:function(){return this.$.v},set:function(i){this.hsv={v:i}}},{key:"alpha",get:function(){return this.$.a},set:function(i){this.hsv=ta({},this.hsv,{a:i})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(i){this.rgb=n.kelvinToRgb(i)}},{key:"red",get:function(){var i=this.rgb;return i.r},set:function(i){this.rgb=ta({},this.rgb,{r:i})}},{key:"green",get:function(){var i=this.rgb;return i.g},set:function(i){this.rgb=ta({},this.rgb,{g:i})}},{key:"blue",get:function(){var i=this.rgb;return i.b},set:function(i){this.rgb=ta({},this.rgb,{b:i})}},{key:"rgb",get:function(){var i=n.hsvToRgb(this.$),r=i.r,o=i.g,a=i.b;return{r:k_(r),g:k_(o),b:k_(a)}},set:function(i){this.hsv=ta({},n.rgbToHsv(i),{a:i.a===void 0?1:i.a})}},{key:"rgba",get:function(){return ta({},this.rgb,{a:this.alpha})},set:function(i){this.rgb=i}},{key:"hsl",get:function(){var i=n.hsvToHsl(this.$),r=i.h,o=i.s,a=i.l;return{h:k_(r),s:k_(o),l:k_(a)}},set:function(i){this.hsv=ta({},n.hslToHsv(i),{a:i.a===void 0?1:i.a})}},{key:"hsla",get:function(){return ta({},this.hsl,{a:this.alpha})},set:function(i){this.hsl=i}},{key:"rgbString",get:function(){var i=this.rgb;return"rgb("+i.r+", "+i.g+", "+i.b+")"},set:function(i){var r,o,a,l,u=1;if((r=Voe.exec(i))?(o=Ko(r[1],255),a=Ko(r[2],255),l=Ko(r[3],255)):(r=Hoe.exec(i))&&(o=Ko(r[1],255),a=Ko(r[2],255),l=Ko(r[3],255),u=Ko(r[4],1)),r)this.rgb={r:o,g:a,b:l,a:u};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var i=this.rgba;return"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")"},set:function(i){this.rgbString=i}},{key:"hexString",get:function(){var i=this.rgb;return"#"+Wp(i.r)+Wp(i.g)+Wp(i.b)},set:function(i){var r,o,a,l,u=255;if((r=Yoe.exec(i))?(o=ea(r[1])*17,a=ea(r[2])*17,l=ea(r[3])*17):(r=Zoe.exec(i))?(o=ea(r[1])*17,a=ea(r[2])*17,l=ea(r[3])*17,u=ea(r[4])*17):(r=qoe.exec(i))?(o=ea(r[1]),a=ea(r[2]),l=ea(r[3])):(r=Joe.exec(i))&&(o=ea(r[1]),a=ea(r[2]),l=ea(r[3]),u=ea(r[4])),r)this.rgb={r:o,g:a,b:l,a:u/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var i=this.rgba;return"#"+Wp(i.r)+Wp(i.g)+Wp(i.b)+Wp(Py(i.a*255))},set:function(i){this.hexString=i}},{key:"hslString",get:function(){var i=this.hsl;return"hsl("+i.h+", "+i.s+"%, "+i.l+"%)"},set:function(i){var r,o,a,l,u=1;if((r=Xoe.exec(i))?(o=Ko(r[1],360),a=Ko(r[2],100),l=Ko(r[3],100)):(r=joe.exec(i))&&(o=Ko(r[1],360),a=Ko(r[2],100),l=Ko(r[3],100),u=Ko(r[4],1)),r)this.hsl={h:o,s:a,l,a:u};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var i=this.hsla;return"hsla("+i.h+", "+i.s+"%, "+i.l+"%, "+i.a+")"},set:function(i){this.hslString=i}}]),n}(),tae={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function CB(n){var e,t=n.width,i=n.sliderSize,r=n.borderWidth,o=n.handleRadius,a=n.padding,l=n.sliderShape,u=n.layoutDirection==="horizontal";return i=(e=i)!=null?e:a*2+o*2,l==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-a*2-o*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-r/2}:{handleStart:i/2,handleRange:t-i,radius:i/2,x:0,y:0,width:u?i:t,height:u?t:i}}function nae(n,e){var t=e.hsva,i=e.rgb;switch(n.sliderType){case"red":return i.r/2.55;case"green":return i.g/2.55;case"blue":return i.b/2.55;case"alpha":return t.a*100;case"kelvin":var r=n.minTemperature,o=n.maxTemperature,a=o-r,l=(e.kelvin-r)/a*100;return Math.max(0,Math.min(l,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function iae(n,e,t){var i=CB(n),r=i.handleRange,o=i.handleStart,a;n.layoutDirection==="horizontal"?a=-1*t+r+o:a=e-o,a=Math.max(Math.min(a,r),0);var l=Math.round(100/r*a);switch(n.sliderType){case"kelvin":var u=n.minTemperature,h=n.maxTemperature,d=h-u;return u+d*(l/100);case"alpha":return l/100;case"hue":return l*3.6;case"red":case"blue":case"green":return l*2.55;default:return l}}function rae(n,e){var t=CB(n),i=t.width,r=t.height,o=t.handleRange,a=t.handleStart,l=n.layoutDirection==="horizontal",u=nae(n,e),h=l?i/2:r/2,d=a+u/100*o;return l&&(d=-1*d+o+a*2),{x:l?h:d,y:l?d:h}}function sae(n,e){var t=e.hsv,i=e.rgb;switch(n.sliderType){case"red":return[[0,"rgb(0,"+i.g+","+i.b+")"],[100,"rgb(255,"+i.g+","+i.b+")"]];case"green":return[[0,"rgb("+i.r+",0,"+i.b+")"],[100,"rgb("+i.r+",255,"+i.b+")"]];case"blue":return[[0,"rgb("+i.r+","+i.g+",0)"],[100,"rgb("+i.r+","+i.g+",255)"]];case"alpha":return[[0,"rgba("+i.r+","+i.g+","+i.b+",0)"],[100,"rgb("+i.r+","+i.g+","+i.b+")"]];case"kelvin":for(var r=[],o=n.minTemperature,a=n.maxTemperature,l=8,u=a-o,h=o,d=0;h<a;h+=u/l,d+=1){var p=v0.kelvinToRgb(h),m=p.r,g=p.g,v=p.b;r.push([100/l*d,"rgb("+m+","+g+","+v+")"])}return r;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var y=v0.hsvToHsl({h:t.h,s:0,v:t.v}),S=v0.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+y.h+","+y.s+"%,"+y.l+"%)"],[100,"hsl("+S.h+","+S.s+"%,"+S.l+"%)"]];case"value":default:var T=v0.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+T.h+","+T.s+"%,"+T.l+"%)"]]}}var D9=Math.PI*2,oae=function(e,t){return(e%t+t)%t},L9=function(e,t){return Math.sqrt(e*e+t*t)};function N9(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function aae(n,e,t){var i=fA(n),r=i.cx,o=i.cy,a=n.width/2;return L9(r-e,o-t)<a}function fA(n){var e=n.width/2;return{width:n.width,radius:e-n.borderWidth,cx:e,cy:e}}function B9(n,e,t){var i=n.wheelAngle,r=n.wheelDirection;return t&&r==="clockwise"?e=i+e:r==="clockwise"?e=360-i+e:t&&r==="anticlockwise"?e=i+180-e:r==="anticlockwise"&&(e=i-e),oae(e,360)}function lae(n,e){var t=e.hsv,i=fA(n),r=i.cx,o=i.cy,a=N9(n),l=(180+B9(n,t.h,!0))*(D9/360),u=t.s/100*a,h=n.wheelDirection==="clockwise"?-1:1;return{x:r+u*Math.cos(l)*h,y:o+u*Math.sin(l)*h}}function w4(n,e,t){var i=fA(n),r=i.cx,o=i.cy,a=N9(n);e=r-e,t=o-t;var l=B9(n,Math.atan2(-t,-e)*(360/D9)),u=Math.min(L9(e,t),a);return{h:Math.round(l),s:Math.round(100/a*u)}}function AB(n){var e=n.width,t=n.boxHeight,i=n.padding,r=n.handleRadius;return{width:e,height:t??e,radius:i+r}}function E4(n,e,t){var i=AB(n),r=i.width,o=i.height,a=i.radius,l=a,u=r-a*2,h=o-a*2,d=(e-l)/u*100,p=(t-l)/h*100;return{s:Math.max(0,Math.min(d,100)),v:Math.max(0,Math.min(100-p,100))}}function cae(n,e){var t=AB(n),i=t.width,r=t.height,o=t.radius,a=e.hsv,l=o,u=i-o*2,h=r-o*2;return{x:l+a.s/100*u,y:l+(h-a.v/100*h)}}function uae(n,e){var t=e.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var JR;function hae(n){JR||(JR=document.getElementsByTagName("base"));var e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),i=/iPhone|iPod|iPad/i.test(e),r=window.location;return(t||i)&&JR.length>0?r.protocol+"//"+r.host+r.pathname+r.search+n:n}function F9(n,e,t,i){for(var r=0;r<i.length;r++){var o=i[r].x-e,a=i[r].y-t,l=Math.sqrt(o*o+a*a);if(l<n.handleRadius)return r}return null}function kB(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function X2(n,e,t){return n+"-gradient("+e+", "+t.map(function(i){var r=i[0],o=i[1];return o+" "+r+"%"}).join(",")+")"}function ko(n){return typeof n=="string"?n:n+"px"}var dae={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},x4=["mousemove","touchmove","mouseup","touchend"],pA=function(n){function e(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.render=function(i){var r=this.handleEvent.bind(this),o={onMouseDown:r,ontouchstart:r},a=i.layoutDirection==="horizontal",l=i.margin===null?i.sliderMargin:i.margin,u={overflow:"visible",display:a?"inline-block":"block"};return i.index>0&&(u[a?"marginLeft":"marginTop"]=l),ui(hA,null,i.children(this.uid,o,u))},e.prototype.handleEvent=function(i){var r=this,o=this.props.onInput,a=this.base.getBoundingClientRect();i.preventDefault();var l=i.touches?i.changedTouches[0]:i,u=l.clientX-a.left,h=l.clientY-a.top;switch(i.type){case"mousedown":case"touchstart":var d=o(u,h,0);d!==!1&&x4.forEach(function(p){document.addEventListener(p,r,{passive:!1})});break;case"mousemove":case"touchmove":o(u,h,1);break;case"mouseup":case"touchend":o(u,h,2),x4.forEach(function(p){document.removeEventListener(p,r,{passive:!1})});break}},e}(U0);function Zm(n){var e=n.r,t=n.url,i=e,r=e;return ui("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ko(n.x)+", "+ko(n.y)+")",willChange:"transform",top:ko(-e),left:ko(-e),width:ko(e*2),height:ko(e*2),position:"absolute",overflow:"visible"}},t&&ui("use",Object.assign({xlinkHref:hae(t)},n.props)),!t&&ui("circle",{cx:i,cy:r,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!t&&ui("circle",{cx:i,cy:r,r:e-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}Zm.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function z$(n){var e=n.activeIndex,t=e!==void 0&&e<n.colors.length?n.colors[e]:n.color,i=CB(n),r=i.width,o=i.height,a=i.radius,l=rae(n,t),u=sae(n,t);function h(d,p,m){var g=iae(n,d,p);n.parent.inputActive=!0,t[n.sliderType]=g,n.onInput(m,n.id)}return ui(pA,Object.assign({},n,{onInput:h}),function(d,p,m){return ui("div",Object.assign({},p,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ko(r),height:ko(o),borderRadius:ko(a),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},m)}),ui("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ko(a),background:X2("linear",n.layoutDirection==="horizontal"?"to top":"to right",u)},kB(n))}),ui(Zm,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:l.x,y:l.y}))})}z$.defaultProps=Object.assign({},tae);function fae(n){var e=AB(n),t=e.width,i=e.height,r=e.radius,o=n.colors,a=n.parent,l=n.activeIndex,u=l!==void 0&&l<n.colors.length?n.colors[l]:n.color,h=uae(n,u),d=o.map(function(m){return cae(n,m)});function p(m,g,v){if(v===0){var y=F9(n,m,g,d);y!==null?a.setActiveColor(y):(a.inputActive=!0,u.hsv=E4(n,m,g),n.onInput(v,n.id))}else v===1&&(a.inputActive=!0,u.hsv=E4(n,m,g));n.onInput(v,n.id)}return ui(pA,Object.assign({},n,{onInput:p}),function(m,g,v){return ui("div",Object.assign({},g,{className:"IroBox",style:Object.assign({},{width:ko(t),height:ko(i),position:"relative"},v)}),ui("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ko(r)},kB(n),{background:X2("linear","to bottom",h[1])+","+X2("linear","to right",h[0])})}),o.filter(function(y){return y!==u}).map(function(y){return ui(Zm,{isActive:!1,index:y.index,fill:y.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[y.index].x,y:d[y.index].y})}),ui(Zm,{isActive:!0,index:u.index,fill:u.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[u.index].x,y:d[u.index].y}))})}var pae="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",mae="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function U9(n){var e=fA(n),t=e.width,i=n.colors;n.borderWidth;var r=n.parent,o=n.color,a=o.hsv,l=i.map(function(d){return lae(n,d)}),u={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function h(d,p,m){if(m===0){if(!aae(n,d,p))return!1;var g=F9(n,d,p,l);g!==null?r.setActiveColor(g):(r.inputActive=!0,o.hsv=w4(n,d,p),n.onInput(m,n.id))}else m===1&&(r.inputActive=!0,o.hsv=w4(n,d,p));n.onInput(m,n.id)}return ui(pA,Object.assign({},n,{onInput:h}),function(d,p,m){return ui("div",Object.assign({},p,{className:"IroWheel",style:Object.assign({},{width:ko(t),height:ko(t),position:"relative"},m)}),ui("div",{className:"IroWheelHue",style:Object.assign({},u,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?pae:mae})}),ui("div",{className:"IroWheelSaturation",style:Object.assign({},u,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&ui("div",{className:"IroWheelLightness",style:Object.assign({},u,{background:"#000",opacity:1-a.v/100})}),ui("div",{className:"IroWheelBorder",style:Object.assign({},u,kB(n))}),i.filter(function(g){return g!==o}).map(function(g){return ui(Zm,{isActive:!1,index:g.index,fill:g.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:l[g.index].x,y:l[g.index].y})}),ui(Zm,{isActive:!0,index:o.index,fill:o.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:l[o.index].x,y:l[o.index].y}))})}function gae(n){var e=function(t,i){var r,o=document.createElement("div");Goe(ui(n,Object.assign({},{ref:function(l){return r=l}},i)),o);function a(){var l=t instanceof Element?t:document.querySelector(t);l.appendChild(r.base),r.onMount(l)}return document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a),r};return e.prototype=n.prototype,Object.assign(e,n),e.__component=n,e}var G9=function(n){function e(t){var i=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var r=t.colors.length>0?t.colors:[t.color];r.forEach(function(o){return i.addColor(o)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.addColor=function(i,r){r===void 0&&(r=this.colors.length);var o=new v0(i,this.onColorChange.bind(this));this.colors.splice(r,0,o),this.colors.forEach(function(a,l){return a.index=l}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",o)},e.prototype.removeColor=function(i){var r=this.colors.splice(i,1)[0];r.unbind(),this.colors.forEach(function(o,a){return o.index=a}),this.state&&this.setState({colors:this.colors}),r.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",r)},e.prototype.setActiveColor=function(i){this.color=this.colors[i],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(i,r){var o=this;r===void 0&&(r=0),this.colors.forEach(function(a){return a.unbind()}),this.colors=[],i.forEach(function(a){return o.addColor(a)}),this.setActiveColor(r),this.emit("color:setAll",this.colors)},e.prototype.on=function(i,r){var o=this,a=this.events;(Array.isArray(i)?i:[i]).forEach(function(l){(a[l]||(a[l]=[])).push(r),o.deferredEvents[l]&&(o.deferredEvents[l].forEach(function(u){r.apply(null,u)}),o.deferredEvents[l]=[])})},e.prototype.off=function(i,r){var o=this;(Array.isArray(i)?i:[i]).forEach(function(a){var l=o.events[a];l&&l.splice(l.indexOf(r),1)})},e.prototype.emit=function(i){for(var r=this,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var l=this.activeEvents,u=l.hasOwnProperty(i)?l[i]:!1;if(!u){l[i]=!0;var h=this.events[i]||[];h.forEach(function(d){return d.apply(r,o)}),l[i]=!1}},e.prototype.deferredEmit=function(i){for(var r,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var l=this.deferredEvents;(r=this).emit.apply(r,[i].concat(o)),(l[i]||(l[i]=[])).push(o)},e.prototype.setOptions=function(i){this.setState(i)},e.prototype.resize=function(i){this.setOptions({width:i})},e.prototype.reset=function(){this.colors.forEach(function(i){return i.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(i){this.el=i,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(i,r){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",i,r)),this.emit("color:change",i,r)},e.prototype.emitInputEvent=function(i,r){i===0?this.emit("input:start",this.color,r):i===1?this.emit("input:move",this.color,r):i===2&&this.emit("input:end",this.color,r)},e.prototype.render=function(i,r){var o=this,a=r.layout;if(!Array.isArray(a)){switch(a){default:a=[{component:U9},{component:z$}]}r.transparency&&a.push({component:z$,options:{sliderType:"alpha"}})}return ui("div",{class:"IroColorPicker",id:r.id,style:{display:r.display}},a.map(function(l,u){var h=l.component,d=l.options;return ui(h,Object.assign({},r,d,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:u}))}))},e}(U0);G9.defaultProps=Object.assign({},dae,{colors:[],display:"block",id:null,layout:"default",margin:null});var _ae=gae(G9),j2;(function(n){n.version="5.5.2",n.Color=v0,n.ColorPicker=_ae,function(e){e.h=ui,e.ComponentBase=pA,e.Handle=Zm,e.Slider=z$,e.Wheel=U9,e.Box=fae}(n.ui||(n.ui={}))})(j2||(j2={}));var Oae=j2;class mA extends Ux.FieldColour{constructor(e,t=150,i={}){super(e),this.color=e,this.width=t,this.options=i}static fromJson(e){return new mA(e.color,e.size||150,e.options||{})}showEditor_(){const e=document.createElement("div");Ux.DropDownDiv.getContentDiv().appendChild(e),e.classList.add("blockly-color-wheel-container"),Oae.ColorPicker(e,{width:this.width,color:this.getValue(),...this.options}).on("color:change",i=>{this.setValue(i.hexString)}),Ux.DropDownDiv.showPositionedByField(this,()=>e.remove())}}Ux.fieldRegistry.register("color_wheel",mA);function vae(n){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}const yae={name:"color",block:{init:function(){this.appendDummyInput().appendField("set LED color:").appendField(new mA("#00FF00",150,{layoutDirection:"horizontal"}),"color"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},pythonGenerator:(n,e)=>'setLEDColorFromHex(cf, "'+n.getFieldValue("color")+`")
`,javascriptGenerator:(n,e)=>{var t=n.getFieldValue("color"),i=vae(t);return`duration += simulator.setColor(group_state, ${i==null?void 0:i.r},${i==null?void 0:i.g},${i==null?void 0:i.b});`}},_s={block_go_to_speed:Soe,block_go_to:boe,block_land:Toe,block_move_angles:woe,block_move_xyz:Eoe,block_move:xoe,block_start_linear_motion:Ooe,block_stop:yoe,block_takeoff:$oe,block_turn:Coe,block_circle:_oe,block_start_circle:Aoe,block_start_move:koe,block_start_turn:Ioe,block_get_a_position:Roe,block_set_default_height:voe,block_set_default_speed:Moe,block_set_default_xy:Poe,block_color:yae};Object.values(_s).forEach(n=>{Yt.Blocks[n.name]=n.block,Q2.pythonGenerator[n.name]=e=>n.pythonGenerator(e,Q2.pythonGenerator),U$.javascriptGenerator[n.name]=e=>n.javascriptGenerator(e,U$.javascriptGenerator)});const Ds=n=>({kind:"block",type:n.name}),bae={kind:"categoryToolbox",contents:[{kind:"category",name:"Straight Motion",contents:[Ds(_s.block_takeoff),Ds(_s.block_land),Ds(_s.block_go_to),Ds(_s.block_go_to_speed),Ds(_s.block_move_angles),Ds(_s.block_move_xyz),Ds(_s.block_move),Ds(_s.block_stop),Ds(_s.block_turn)]},{kind:"category",name:"Curves",contents:[Ds(_s.block_circle),Ds(_s.block_start_move),Ds(_s.block_start_turn)]},{kind:"category",name:"Config",contents:[Ds(_s.block_get_a_position),Ds(_s.block_set_default_height),Ds(_s.block_set_default_speed),Ds(_s.block_set_default_xy)]},{kind:"category",name:"Colors",contents:[Ds(_s.block_color)]},{kind:"category",name:"Logic",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"}]},{kind:"category",name:"Math",contents:[{kind:"block",type:"math_round"},{kind:"block",type:"math_number"}]},{kind:"category",name:"Rotation and Translation"}]};function Sae(){const n=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let e=[];for(let t=0;t<36;t++)t===8||t===13||t===18||t===23?e[t]="-":e[t]=n[Math.ceil(Math.random()*n.length-1)];return e.join("")}var Tae=Sae;const Dy=Mu(Tae),$4=n=>{let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const p=e;e=h??typeof d!="object"?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,l={setState:i,getState:r,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,r,l),l},wae=n=>n?$4(n):$4;var W9={exports:{}},z9={},Q9={exports:{}},V9={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=q;function Eae(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var xae=typeof Object.is=="function"?Object.is:Eae,$ae=aO.useState,Cae=aO.useEffect,Aae=aO.useLayoutEffect,kae=aO.useDebugValue;function Iae(n,e){var t=e(),i=$ae({inst:{value:t,getSnapshot:e}}),r=i[0].inst,o=i[1];return Aae(function(){r.value=t,r.getSnapshot=e,KR(r)&&o({inst:r})},[n,t,e]),Cae(function(){return KR(r)&&o({inst:r}),n(function(){KR(r)&&o({inst:r})})},[n]),kae(t),t}function KR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!xae(n,t)}catch{return!0}}function Rae(n,e){return e()}var Mae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rae:Iae;V9.useSyncExternalStore=aO.useSyncExternalStore!==void 0?aO.useSyncExternalStore:Mae;Q9.exports=V9;var Pae=Q9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=q,Dae=Pae;function Lae(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Nae=typeof Object.is=="function"?Object.is:Lae,Bae=Dae.useSyncExternalStore,Fae=gA.useRef,Uae=gA.useEffect,Gae=gA.useMemo,Wae=gA.useDebugValue;z9.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var o=Fae(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Gae(function(){function u(g){if(!h){if(h=!0,d=g,g=i(g),r!==void 0&&a.hasValue){var v=a.value;if(r(v,g))return p=v}return p=g}if(v=p,Nae(d,g))return v;var y=i(g);return r!==void 0&&r(v,y)?v:(d=g,p=y)}var h=!1,d,p,m=t===void 0?null:t;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,t,i,r]);var l=Bae(n,o[0],o[1]);return Uae(function(){a.hasValue=!0,a.value=l},[l]),Wae(l),l};W9.exports=z9;var zae=W9.exports;const Qae=Mu(zae),{useSyncExternalStoreWithSelector:Vae}=Qae;function Hae(n,e=n.getState,t){const i=Vae(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return q.useDebugValue(i),i}const C4=n=>{({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?wae(n):n,t=(i,r)=>Hae(e,i,r);return Object.assign(t,e),t},gT=n=>n?C4(n):C4,Xae=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(a,l,u)=>{let h=a;if(l){const d=(u==null?void 0:u.equalityFn)||Object.is;let p=a(i.getState());h=m=>{const g=a(m);if(!d(p,g)){const v=p;l(p=g,v)}},u!=null&&u.fireImmediately&&l(p,p)}return r(h)},n(e,t,i)},H9=Xae;function X9(n){let e;try{e=n()}catch{return}return{getItem:i=>{var r;const o=l=>l===null?null:JSON.parse(l),a=(r=e.getItem(i))!=null?r:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,r)=>e.setItem(i,JSON.stringify(r)),removeItem:i=>e.removeItem(i)}}const pS=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return pS(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return pS(i)(t)}}}},jae=(n,e)=>(t,i,r)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,T)=>({...T,...S}),...e},a=!1;const l=new Set,u=new Set;let h;try{h=o.getStorage()}catch{}if(!h)return n((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...S)},i,r);const d=pS(o.serialize),p=()=>{const S=o.partialize({...i()});let T;const w=d({state:S,version:o.version}).then(E=>h.setItem(o.name,E)).catch(E=>{T=E});if(T)throw T;return w},m=r.setState;r.setState=(S,T)=>{m(S,T),p()};const g=n((...S)=>{t(...S),p()},i,r);let v;const y=()=>{var S;if(!h)return;a=!1,l.forEach(w=>w(i()));const T=((S=o.onRehydrateStorage)==null?void 0:S.call(o,i()))||void 0;return pS(h.getItem.bind(h))(o.name).then(w=>{if(w)return o.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==o.version){if(o.migrate)return o.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var E;return v=o.merge(w,(E=i())!=null?E:g),t(v,!0),p()}).then(()=>{T==null||T(v,void 0),a=!0,u.forEach(w=>w(v))}).catch(w=>{T==null||T(void 0,w)})};return r.persist={setOptions:S=>{o={...o,...S},S.getStorage&&(h=S.getStorage())},clearStorage:()=>{h==null||h.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:S=>(l.add(S),()=>{l.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},y(),v||g},Yae=(n,e)=>(t,i,r)=>{let o={storage:X9(()=>localStorage),partialize:y=>y,version:0,merge:(y,S)=>({...S,...y}),...e},a=!1;const l=new Set,u=new Set;let h=o.storage;if(!h)return n((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...y)},i,r);const d=()=>{const y=o.partialize({...i()});return h.setItem(o.name,{state:y,version:o.version})},p=r.setState;r.setState=(y,S)=>{p(y,S),d()};const m=n((...y)=>{t(...y),d()},i,r);let g;const v=()=>{var y;if(!h)return;a=!1,l.forEach(T=>T(i()));const S=((y=o.onRehydrateStorage)==null?void 0:y.call(o,i()))||void 0;return pS(h.getItem.bind(h))(o.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==o.version){if(o.migrate)return o.migrate(T.state,T.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return T.state}).then(T=>{var w;return g=o.merge(T,(w=i())!=null?w:m),t(g,!0),d()}).then(()=>{S==null||S(g,void 0),a=!0,u.forEach(T=>T(g))}).catch(T=>{S==null||S(void 0,T)})};return r.persist={setOptions:y=>{o={...o,...y},y.storage&&(h=y.storage)},clearStorage:()=>{h==null||h.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(u.add(y),()=>{u.delete(y)})},v(),g||m},Zae=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?(({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),jae(n,e)):Yae(n,e),qae=Zae;function dc(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(r){return"'"+r+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lO(n){return!!n&&!!n[Qa]}function qm(n){var e;return!!n&&(function(t){if(!t||typeof t!="object")return!1;var i=Object.getPrototypeOf(t);if(i===null)return!0;var r=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===sle}(n)||Array.isArray(n)||!!n[L4]||!!(!((e=n.constructor)===null||e===void 0)&&e[L4])||IB(n)||RB(n))}function mS(n,e,t){t===void 0&&(t=!1),kO(n)===0?(t?Object.keys:NB)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,r){return e(r,i,n)})}function kO(n){var e=n[Qa];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:IB(n)?2:RB(n)?3:0}function Y2(n,e){return kO(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Jae(n,e){return kO(n)===2?n.get(e):n[e]}function j9(n,e,t){var i=kO(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function Kae(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function IB(n){return ile&&n instanceof Map}function RB(n){return rle&&n instanceof Set}function nm(n){return n.o||n.t}function MB(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=ole(n);delete e[Qa];for(var t=NB(e),i=0;i<t.length;i++){var r=t[i],o=e[r];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[r]})}return Object.create(Object.getPrototypeOf(n),e)}function PB(n,e){return e===void 0&&(e=!1),DB(n)||lO(n)||!qm(n)||(kO(n)>1&&(n.set=n.add=n.clear=n.delete=ele),Object.freeze(n),e&&mS(n,function(t,i){return PB(i,!0)},!0)),n}function ele(){dc(2)}function DB(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function wu(n){var e=ale[n];return e||dc(18,n),e}function A4(){return gS}function eM(n,e){e&&(wu("Patches"),n.u=[],n.s=[],n.v=e)}function Q$(n){Z2(n),n.p.forEach(tle),n.p=null}function Z2(n){n===gS&&(gS=n.l)}function k4(n){return gS={p:[],l:gS,h:n,m:!0,_:0}}function tle(n){var e=n[Qa];e.i===0||e.i===1?e.j():e.O=!0}function tM(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.g||wu("ES5").S(e,n,i),i?(t[Qa].P&&(Q$(e),dc(4)),qm(n)&&(n=V$(e,n),e.l||H$(e,n)),e.u&&wu("Patches").M(t[Qa].t,n,e.u,e.s)):n=V$(e,t,[]),Q$(e),e.u&&e.v(e.u,e.s),n!==Y9?n:void 0}function V$(n,e,t){if(DB(e))return e;var i=e[Qa];if(!i)return mS(e,function(l,u){return I4(n,i,e,l,u,t)},!0),e;if(i.A!==n)return e;if(!i.P)return H$(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=i.i===4||i.i===5?i.o=MB(i.k):i.o,o=r,a=!1;i.i===3&&(o=new Set(r),r.clear(),a=!0),mS(o,function(l,u){return I4(n,i,r,l,u,t,a)}),H$(n,r,!1),t&&n.u&&wu("Patches").N(i,t,n.u,n.s)}return i.o}function I4(n,e,t,i,r,o,a){if(lO(r)){var l=V$(n,r,o&&e&&e.i!==3&&!Y2(e.R,i)?o.concat(i):void 0);if(j9(t,i,l),!lO(l))return;n.m=!1}else a&&t.add(r);if(qm(r)&&!DB(r)){if(!n.h.D&&n._<1)return;V$(n,r),e&&e.A.l||H$(n,r)}}function H$(n,e,t){t===void 0&&(t=!1),!n.l&&n.h.D&&n.m&&PB(e,t)}function nM(n,e){var t=n[Qa];return(t?nm(t):n)[e]}function R4(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function q2(n){n.P||(n.P=!0,n.l&&q2(n.l))}function iM(n){n.o||(n.o=MB(n.t))}function J2(n,e,t){var i=IB(e)?wu("MapSet").F(e,t):RB(e)?wu("MapSet").T(e,t):n.g?function(r,o){var a=Array.isArray(r),l={i:a?1:0,A:o?o.A:A4(),P:!1,I:!1,R:{},l:o,t:r,k:null,o:null,j:null,C:!1},u=l,h=K2;a&&(u=[l],h=pb);var d=Proxy.revocable(u,h),p=d.revoke,m=d.proxy;return l.k=m,l.j=p,m}(e,t):wu("ES5").J(e,t);return(t?t.A:A4()).p.push(i),i}function nle(n){return lO(n)||dc(22,n),function e(t){if(!qm(t))return t;var i,r=t[Qa],o=kO(t);if(r){if(!r.P&&(r.i<4||!wu("ES5").K(r)))return r.t;r.I=!0,i=M4(t,o),r.I=!1}else i=M4(t,o);return mS(i,function(a,l){r&&Jae(r.t,a)===l||j9(i,a,e(l))}),o===3?new Set(i):i}(n)}function M4(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return MB(n)}var P4,gS,LB=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ile=typeof Map<"u",rle=typeof Set<"u",D4=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Y9=LB?Symbol.for("immer-nothing"):((P4={})["immer-nothing"]=!0,P4),L4=LB?Symbol.for("immer-draftable"):"__$immer_draftable",Qa=LB?Symbol.for("immer-state"):"__$immer_state",sle=""+Object.prototype.constructor,NB=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,ole=Object.getOwnPropertyDescriptors||function(n){var e={};return NB(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},ale={},K2={get:function(n,e){if(e===Qa)return n;var t=nm(n);if(!Y2(t,e))return function(r,o,a){var l,u=R4(o,a);return u?"value"in u?u.value:(l=u.get)===null||l===void 0?void 0:l.call(r.k):void 0}(n,t,e);var i=t[e];return n.I||!qm(i)?i:i===nM(n.t,e)?(iM(n),n.o[e]=J2(n.A.h,i,n)):i},has:function(n,e){return e in nm(n)},ownKeys:function(n){return Reflect.ownKeys(nm(n))},set:function(n,e,t){var i=R4(nm(n),e);if(i!=null&&i.set)return i.set.call(n.k,t),!0;if(!n.P){var r=nM(nm(n),e),o=r==null?void 0:r[Qa];if(o&&o.t===t)return n.o[e]=t,n.R[e]=!1,!0;if(Kae(t,r)&&(t!==void 0||Y2(n.t,e)))return!0;iM(n),q2(n)}return n.o[e]===t&&(t!==void 0||e in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[e])||(n.o[e]=t,n.R[e]=!0),!0},deleteProperty:function(n,e){return nM(n.t,e)!==void 0||e in n.t?(n.R[e]=!1,iM(n),q2(n)):delete n.R[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=nm(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){dc(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){dc(12)}},pb={};mS(K2,function(n,e){pb[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),pb.deleteProperty=function(n,e){return pb.set.call(this,n,e,void 0)},pb.set=function(n,e,t){return K2.set.call(this,n[0],e,t,n[0])};var lle=function(){function n(t){var i=this;this.g=D4,this.D=!0,this.produce=function(r,o,a){if(typeof r=="function"&&typeof o!="function"){var l=o;o=r;var u=i;return function(y){var S=this;y===void 0&&(y=l);for(var T=arguments.length,w=Array(T>1?T-1:0),E=1;E<T;E++)w[E-1]=arguments[E];return u.produce(y,function($){var A;return(A=o).call.apply(A,[S,$].concat(w))})}}var h;if(typeof o!="function"&&dc(6),a!==void 0&&typeof a!="function"&&dc(7),qm(r)){var d=k4(i),p=J2(i,r,void 0),m=!0;try{h=o(p),m=!1}finally{m?Q$(d):Z2(d)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(y){return eM(d,a),tM(y,d)},function(y){throw Q$(d),y}):(eM(d,a),tM(h,d))}if(!r||typeof r!="object"){if((h=o(r))===void 0&&(h=r),h===Y9&&(h=void 0),i.D&&PB(h,!0),a){var g=[],v=[];wu("Patches").M(r,h,g,v),a(g,v)}return h}dc(21,r)},this.produceWithPatches=function(r,o){if(typeof r=="function")return function(h){for(var d=arguments.length,p=Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];return i.produceWithPatches(h,function(g){return r.apply(void 0,[g].concat(p))})};var a,l,u=i.produce(r,o,function(h,d){a=h,l=d});return typeof Promise<"u"&&u instanceof Promise?u.then(function(h){return[h,a,l]}):[u,a,l]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){qm(t)||dc(8),lO(t)&&(t=nle(t));var i=k4(this),r=J2(this,t,void 0);return r[Qa].C=!0,Z2(i),r},e.finishDraft=function(t,i){var r=t&&t[Qa],o=r.A;return eM(o,i),tM(void 0,o)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!D4&&dc(20),this.g=t},e.applyPatches=function(t,i){var r;for(r=i.length-1;r>=0;r--){var o=i[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(i=i.slice(r+1));var a=wu("Patches").$;return lO(t)?a(t,i):this.produce(t,function(l){return a(l,i)})},n}(),Va=new lle,cle=Va.produce;Va.produceWithPatches.bind(Va);Va.setAutoFreeze.bind(Va);Va.setUseProxies.bind(Va);Va.applyPatches.bind(Va);Va.createDraft.bind(Va);Va.finishDraft.bind(Va);const ule=n=>(e,t,i)=>(i.setState=(r,o,...a)=>{const l=typeof r=="function"?cle(r):r;return e(l,o,...a)},n(i.setState,t,i)),_A=ule,Gx=.1,hle=(n,e)=>{const t=document.createElement("a"),i=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(i),t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)};function jw(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z9={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,o){function a(h,d){if(!r[h]){if(!i[h]){var p=typeof jw=="function"&&jw;if(!d&&p)return p(h,!0);if(l)return l(h,!0);var m=new Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m}var g=r[h]={exports:{}};i[h][0].call(g.exports,function(v){var y=i[h][1][v];return a(y||v)},g,g.exports,t,i,r,o)}return r[h].exports}for(var l=typeof jw=="function"&&jw,u=0;u<o.length;u++)a(o[u]);return a}({1:[function(t,i,r){var o=t("./utils"),a=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var h,d,p,m,g,v,y,S=[],T=0,w=u.length,E=w,$=o.getTypeOf(u)!=="string";T<u.length;)E=w-T,p=$?(h=u[T++],d=T<w?u[T++]:0,T<w?u[T++]:0):(h=u.charCodeAt(T++),d=T<w?u.charCodeAt(T++):0,T<w?u.charCodeAt(T++):0),m=h>>2,g=(3&h)<<4|d>>4,v=1<E?(15&d)<<2|p>>6:64,y=2<E?63&p:64,S.push(l.charAt(m)+l.charAt(g)+l.charAt(v)+l.charAt(y));return S.join("")},r.decode=function(u){var h,d,p,m,g,v,y=0,S=0,T="data:";if(u.substr(0,T.length)===T)throw new Error("Invalid base64 input, it looks like a data url.");var w,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&E--,u.charAt(u.length-2)===l.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|E):new Array(0|E);y<u.length;)h=l.indexOf(u.charAt(y++))<<2|(m=l.indexOf(u.charAt(y++)))>>4,d=(15&m)<<4|(g=l.indexOf(u.charAt(y++)))>>2,p=(3&g)<<6|(v=l.indexOf(u.charAt(y++))),w[S++]=h,g!==64&&(w[S++]=d),v!==64&&(w[S++]=p);return w}},{"./support":30,"./utils":32}],2:[function(t,i,r){var o=t("./external"),a=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function h(d,p,m,g,v){this.compressedSize=d,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=v}h.prototype={getContentWorker:function(){var d=new a(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return d.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,p,m){return d.pipe(new l).pipe(new u("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var o=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var o=t("./utils"),a=function(){for(var l,u=[],h=0;h<256;h++){l=h;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;u[h]=l}return u}();i.exports=function(l,u){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var y=m;y<v;y++)h=h>>>8^g[255&(h^d[y])];return-1^h}(0|u,l,l.length,0):function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var y=m;y<v;y++)h=h>>>8^g[255&(h^d.charCodeAt(y))];return-1^h}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var o=null;o=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:o}},{lie:37}],7:[function(t,i,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),h=o?"uint8array":"array";function d(p,m){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}r.magic="\b\0",l.inherits(d,u),d.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(h,p.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},r.compressWorker=function(p){return new d("Deflate",p)},r.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){function o(g,v){var y,S="";for(y=0;y<v;y++)S+=String.fromCharCode(255&g),g>>>=8;return S}function a(g,v,y,S,T,w){var E,$,A=g.file,I=g.compression,D=w!==h.utf8encode,R=l.transformTo("string",w(A.name)),B=l.transformTo("string",h.utf8encode(A.name)),G=A.comment,Z=l.transformTo("string",w(G)),N=l.transformTo("string",h.utf8encode(G)),H=B.length!==A.name.length,M=N.length!==G.length,K="",re="",ce="",X=A.dir,Q=A.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};v&&!y||(ee.crc32=g.crc32,ee.compressedSize=g.compressedSize,ee.uncompressedSize=g.uncompressedSize);var z=0;v&&(z|=8),D||!H&&!M||(z|=2048);var L=0,le=0;X&&(L|=16),T==="UNIX"?(le=798,L|=function(ie,Ce){var ye=ie;return ie||(ye=Ce?16893:33204),(65535&ye)<<16}(A.unixPermissions,X)):(le=20,L|=function(ie){return 63&(ie||0)}(A.dosPermissions)),E=Q.getUTCHours(),E<<=6,E|=Q.getUTCMinutes(),E<<=5,E|=Q.getUTCSeconds()/2,$=Q.getUTCFullYear()-1980,$<<=4,$|=Q.getUTCMonth()+1,$<<=5,$|=Q.getUTCDate(),H&&(re=o(1,1)+o(d(R),4)+B,K+="up"+o(re.length,2)+re),M&&(ce=o(1,1)+o(d(Z),4)+N,K+="uc"+o(ce.length,2)+ce);var de="";return de+=`
\0`,de+=o(z,2),de+=I.magic,de+=o(E,2),de+=o($,2),de+=o(ee.crc32,4),de+=o(ee.compressedSize,4),de+=o(ee.uncompressedSize,4),de+=o(R.length,2),de+=o(K.length,2),{fileRecord:p.LOCAL_FILE_HEADER+de+R+K,dirRecord:p.CENTRAL_FILE_HEADER+o(le,2)+de+o(Z.length,2)+"\0\0\0\0"+o(L,4)+o(S,4)+R+K+Z}}var l=t("../utils"),u=t("../stream/GenericWorker"),h=t("../utf8"),d=t("../crc32"),p=t("../signature");function m(g,v,y,S){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=S,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,y=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-S-1))/y:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var y=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,y=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:function(S){return p.DATA_DESCRIPTOR+o(S.crc32,4)+o(S.compressedSize,4)+o(S.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-g,S=function(T,w,E,$,A){var I=l.transformTo("string",A($));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(T,2)+o(T,2)+o(w,4)+o(E,4)+o(I.length,2)+I}(this.dirRecords.length,y,g,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(y){v.processChunk(y)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(y){v.error(y)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var y=0;y<v.length;y++)try{v[y].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},i.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var o=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(l,u,h){var d=new a(u.streamFiles,h,u.platform,u.encodeFileName),p=0;try{l.forEach(function(m,g){p++;var v=function(w,E){var $=w||E,A=o[$];if(!A)throw new Error($+" is not a valid compression method !");return A}(g.options.compression,u.compression),y=g.options.compressionOptions||u.compressionOptions||{},S=g.dir,T=g.date;g._compressWorker(v,y).withStreamInfo("file",{name:m,dir:S,date:T,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=p}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new o;for(var l in this)typeof this[l]!="function"&&(a[l]=this[l]);return a}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(a,l){return new o().loadAsync(a,l)},o.external=t("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var o=t("./utils"),a=t("./external"),l=t("./utf8"),u=t("./zipEntries"),h=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function p(m){return new a.Promise(function(g,v){var y=m.decompressed.getContentWorker().pipe(new h);y.on("error",function(S){v(S)}).on("end",function(){y.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}i.exports=function(m,g){var v=this;return g=o.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(y){var S=new u(g);return S.load(y),S}).then(function(y){var S=[a.Promise.resolve(y)],T=y.files;if(g.checkCRC32)for(var w=0;w<T.length;w++)S.push(p(T[w]));return a.Promise.all(S)}).then(function(y){for(var S=y.shift(),T=S.files,w=0;w<T.length;w++){var E=T[w],$=E.fileNameStr,A=o.resolve(E.fileNameStr);v.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(A).unsafeOriginalName=$)}return S.zipComment.length&&(v.comment=S.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var o=t("../utils"),a=t("../stream/GenericWorker");function l(u,h){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(l,a),l.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},l.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var o=t("readable-stream").Readable;function a(l,u,h){o.call(this,u),this._helper=l;var d=this;l.on("data",function(p,m){d.push(p)||d._helper.pause(),h&&h(m)}).on("error",function(p){d.emit("error",p)}).on("end",function(){d.push(null)})}t("../utils").inherits(a,o),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,a);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,a)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var a=new Buffer(o);return a.fill(0),a},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,i,r){function o(A,I,D){var R,B=l.getTypeOf(I),G=l.extend(D||{},d);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(A=T(A)),G.createFolders&&(R=S(A))&&w.call(this,R,!0);var Z=B==="string"&&G.binary===!1&&G.base64===!1;D&&D.binary!==void 0||(G.binary=!Z),(I instanceof p&&I.uncompressedSize===0||G.dir||!I||I.length===0)&&(G.base64=!1,G.binary=!0,I="",G.compression="STORE",B="string");var N=null;N=I instanceof p||I instanceof u?I:v.isNode&&v.isStream(I)?new y(A,I):l.prepareContent(A,I,G.binary,G.optimizedBinaryString,G.base64);var H=new m(A,N,G);this.files[A]=H}var a=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),d=t("./defaults"),p=t("./compressedObject"),m=t("./zipObject"),g=t("./generate"),v=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),S=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var I=A.lastIndexOf("/");return 0<I?A.substring(0,I):""},T=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},w=function(A,I){return I=I!==void 0?I:d.createFolders,A=T(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:I}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var I,D,R;for(I in this.files)R=this.files[I],(D=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&A(D,R)},filter:function(A){var I=[];return this.forEach(function(D,R){A(D,R)&&I.push(R)}),I},file:function(A,I,D){if(arguments.length!==1)return A=this.root+A,o.call(this,A,I,D),this;if(E(A)){var R=A;return this.filter(function(G,Z){return!Z.dir&&R.test(G)})}var B=this.files[this.root+A];return B&&!B.dir?B:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(B,G){return G.dir&&A.test(B)});var I=this.root+A,D=w.call(this,I),R=this.clone();return R.root=D.name,R},remove:function(A){A=this.root+A;var I=this.files[A];if(I||(A.slice(-1)!=="/"&&(A+="/"),I=this.files[A]),I&&!I.dir)delete this.files[A];else for(var D=this.filter(function(B,G){return G.name.slice(0,A.length)===A}),R=0;R<D.length;R++)delete this.files[D[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var I,D={};try{if((D=l.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");l.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var R=D.comment||this.comment||"";I=g.generateWorker(this,D,R)}catch(B){(I=new u("error")).error(B)}return new h(I,D.type||"string",D.mimeType)},generateAsync:function(A,I){return this.generateInternalStream(A).accumulate(I)},generateNodeStream:function(A,I){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(I)}};i.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var o=t("./DataReader");function a(l){o.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),h=l.charCodeAt(1),d=l.charCodeAt(2),p=l.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===h&&this.data[m+2]===d&&this.data[m+3]===p)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),h=l.charCodeAt(1),d=l.charCodeAt(2),p=l.charCodeAt(3),m=this.readData(4);return u===m[0]&&h===m[1]&&d===m[2]&&p===m[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var o=t("../utils");function a(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,h=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=l,h},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},i.exports=a},{"../utils":32}],19:[function(t,i,r){var o=t("./Uint8ArrayReader");function a(l){o.call(this,l)}t("../utils").inherits(a,o),a.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var o=t("./DataReader");function a(l){o.call(this,l)}t("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},a.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var o=t("./ArrayReader");function a(l){o.call(this,l)}t("../utils").inherits(a,o),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var o=t("../utils"),a=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),h=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");i.exports=function(p){var m=o.getTypeOf(p);return o.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new h(p):a.uint8array?new d(o.transformTo("uint8array",p)):new l(o.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var o=t("./GenericWorker"),a=t("../utils");function l(u){o.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(l,o),l.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},i.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var o=t("./GenericWorker"),a=t("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,o),l.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var o=t("../utils"),a=t("./GenericWorker");function l(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(l,a),l.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}a.prototype.processChunk.call(this,u)},i.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var o=t("../utils"),a=t("./GenericWorker");function l(u){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=o.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}o.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function o(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,l){return this._listeners[a].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,l){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,l)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var l=this;return a.on("data",function(u){l.processChunk(u)}),a.on("end",function(){l.end()}),a.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,l){return this.extraStreamInfo[a]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=o},{}],29:[function(t,i,r){var o=t("../utils"),a=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),h=t("../support"),d=t("../external"),p=null;if(h.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,y){return new d.Promise(function(S,T){var w=[],E=v._internalType,$=v._outputType,A=v._mimeType;v.on("data",function(I,D){w.push(I),y&&y(D)}).on("error",function(I){w=[],T(I)}).on("end",function(){try{var I=function(D,R,B){switch(D){case"blob":return o.newBlob(o.transformTo("arraybuffer",R),B);case"base64":return u.encode(R);default:return o.transformTo(D,R)}}($,function(D,R){var B,G=0,Z=null,N=0;for(B=0;B<R.length;B++)N+=R[B].length;switch(D){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(Z=new Uint8Array(N),B=0;B<R.length;B++)Z.set(R[B],G),G+=R[B].length;return Z;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+D+"'")}}(E,w),A);S(I)}catch(D){T(D)}w=[]}).resume()})}function g(v,y,S){var T=y;switch(y){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string"}try{this._internalType=T,this._outputType=y,this._mimeType=S,o.checkSupport(T),this._worker=v.pipe(new a(T)),v.lock()}catch(w){this._worker=new l("error"),this._worker.error(w)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,y){var S=this;return v==="data"?this._worker.on(v,function(T){y.call(S,T.data,T.meta)}):this._worker.on(v,function(){o.delay(y,arguments,S)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(o),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var o=t("./utils"),a=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}r.utf8encode=function(g){return a.nodebuffer?l.newBufferFrom(g,"utf-8"):function(v){var y,S,T,w,E,$=v.length,A=0;for(w=0;w<$;w++)(64512&(S=v.charCodeAt(w)))==55296&&w+1<$&&(64512&(T=v.charCodeAt(w+1)))==56320&&(S=65536+(S-55296<<10)+(T-56320),w++),A+=S<128?1:S<2048?2:S<65536?3:4;for(y=a.uint8array?new Uint8Array(A):new Array(A),w=E=0;E<A;w++)(64512&(S=v.charCodeAt(w)))==55296&&w+1<$&&(64512&(T=v.charCodeAt(w+1)))==56320&&(S=65536+(S-55296<<10)+(T-56320),w++),S<128?y[E++]=S:(S<2048?y[E++]=192|S>>>6:(S<65536?y[E++]=224|S>>>12:(y[E++]=240|S>>>18,y[E++]=128|S>>>12&63),y[E++]=128|S>>>6&63),y[E++]=128|63&S);return y}(g)},r.utf8decode=function(g){return a.nodebuffer?o.transformTo("nodebuffer",g).toString("utf-8"):function(v){var y,S,T,w,E=v.length,$=new Array(2*E);for(y=S=0;y<E;)if((T=v[y++])<128)$[S++]=T;else if(4<(w=h[T]))$[S++]=65533,y+=w-1;else{for(T&=w===2?31:w===3?15:7;1<w&&y<E;)T=T<<6|63&v[y++],w--;1<w?$[S++]=65533:T<65536?$[S++]=T:(T-=65536,$[S++]=55296|T>>10&1023,$[S++]=56320|1023&T)}return $.length!==S&&($.subarray?$=$.subarray(0,S):$.length=S),o.applyFromCharCode($)}(g=o.transformTo(a.uint8array?"uint8array":"array",g))},o.inherits(p,u),p.prototype.processChunk=function(g){var v=o.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var y=v;(v=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),v.set(y,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var S=function(w,E){var $;for((E=E||w.length)>w.length&&(E=w.length),$=E-1;0<=$&&(192&w[$])==128;)$--;return $<0||$===0?E:$+h[w[$]]>E?$:E}(v),T=v;S!==v.length&&(a.uint8array?(T=v.subarray(0,S),this.leftOver=v.subarray(S,v.length)):(T=v.slice(0,S),this.leftOver=v.slice(S,v.length))),this.push({data:r.utf8decode(T),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,o.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:r.utf8encode(g.data),meta:g.meta})},r.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var o=t("./support"),a=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function h(y){return y}function d(y,S){for(var T=0;T<y.length;++T)S[T]=255&y.charCodeAt(T);return S}t("setimmediate"),r.newBlob=function(y,S){r.checkSupport("blob");try{return new Blob([y],{type:S})}catch{try{var T=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return T.append(y),T.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(y,S,T){var w=[],E=0,$=y.length;if($<=T)return String.fromCharCode.apply(null,y);for(;E<$;)S==="array"||S==="nodebuffer"?w.push(String.fromCharCode.apply(null,y.slice(E,Math.min(E+T,$)))):w.push(String.fromCharCode.apply(null,y.subarray(E,Math.min(E+T,$)))),E+=T;return w.join("")},stringifyByChar:function(y){for(var S="",T=0;T<y.length;T++)S+=String.fromCharCode(y[T]);return S},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function m(y){var S=65536,T=r.getTypeOf(y),w=!0;if(T==="uint8array"?w=p.applyCanBeUsed.uint8array:T==="nodebuffer"&&(w=p.applyCanBeUsed.nodebuffer),w)for(;1<S;)try{return p.stringifyByChunk(y,T,S)}catch{S=Math.floor(S/2)}return p.stringifyByChar(y)}function g(y,S){for(var T=0;T<y.length;T++)S[T]=y[T];return S}r.applyFromCharCode=m;var v={};v.string={string:h,array:function(y){return d(y,new Array(y.length))},arraybuffer:function(y){return v.string.uint8array(y).buffer},uint8array:function(y){return d(y,new Uint8Array(y.length))},nodebuffer:function(y){return d(y,l.allocBuffer(y.length))}},v.array={string:m,array:h,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(y)}},v.arraybuffer={string:function(y){return m(new Uint8Array(y))},array:function(y){return g(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:h,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(new Uint8Array(y))}},v.uint8array={string:m,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:h,nodebuffer:function(y){return l.newBufferFrom(y)}},v.nodebuffer={string:m,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return v.nodebuffer.uint8array(y).buffer},uint8array:function(y){return g(y,new Uint8Array(y.length))},nodebuffer:h},r.transformTo=function(y,S){if(S=S||"",!y)return S;r.checkSupport(y);var T=r.getTypeOf(S);return v[T][y](S)},r.resolve=function(y){for(var S=y.split("/"),T=[],w=0;w<S.length;w++){var E=S[w];E==="."||E===""&&w!==0&&w!==S.length-1||(E===".."?T.pop():T.push(E))}return T.join("/")},r.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(y)?"nodebuffer":o.uint8array&&y instanceof Uint8Array?"uint8array":o.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(y){if(!o[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(y){var S,T,w="";for(T=0;T<(y||"").length;T++)w+="\\x"+((S=y.charCodeAt(T))<16?"0":"")+S.toString(16).toUpperCase();return w},r.delay=function(y,S,T){setImmediate(function(){y.apply(T||null,S||[])})},r.inherits=function(y,S){function T(){}T.prototype=S.prototype,y.prototype=new T},r.extend=function(){var y,S,T={};for(y=0;y<arguments.length;y++)for(S in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],S)&&T[S]===void 0&&(T[S]=arguments[y][S]);return T},r.prepareContent=function(y,S,T,w,E){return u.Promise.resolve(S).then(function($){return o.blob&&($ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,I){var D=new FileReader;D.onload=function(R){A(R.target.result)},D.onerror=function(R){I(R.target.error)},D.readAsArrayBuffer($)}):$}).then(function($){var A=r.getTypeOf($);return A?(A==="arraybuffer"?$=r.transformTo("uint8array",$):A==="string"&&(E?$=a.decode($):T&&w!==!0&&($=function(I){return d(I,o.uint8array?new Uint8Array(I.length):new Array(I.length))}($))),$):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var o=t("./reader/readerFor"),a=t("./utils"),l=t("./signature"),u=t("./zipEntry"),h=t("./support");function d(p){this.files=[],this.loadOptions=p}d.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=h.uint8array?"uint8array":"array",g=a.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var o=t("./reader/readerFor"),a=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),h=t("./utf8"),d=t("./compressions"),p=t("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,y;if(g.skip(22),this.fileNameLength=g.readInt(2),y=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(S){for(var T in d)if(Object.prototype.hasOwnProperty.call(d,T)&&d[T].magic===S)return d[T];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=o(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,y,S,T=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<T;)v=g.readInt(2),y=g.readInt(2),S=g.readData(y),this.extraFields[v]={id:v,length:y,value:S};g.setIndex(T)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var y=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var T=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(T)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=o(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=o(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null}},i.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){function o(v,y,S){this.name=v,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=y,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var a=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),h=t("./compressedObject"),d=t("./stream/GenericWorker");o.prototype={internalStream:function(v){var y=null,S="string";try{if(!v)throw new Error("No output type specified.");var T=(S=v.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),y=this._decompressWorker();var w=!this._dataBinary;w&&!T&&(y=y.pipe(new u.Utf8EncodeWorker)),!w&&T&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(E){(y=new d("error")).error(E)}return new a(y,S,"")},async:function(v,y){return this.internalStream(v).accumulate(y)},nodeStream:function(v,y){return this.internalStream(v||"nodebuffer").toNodejsStream(y)},_compressWorker:function(v,y){if(this._data instanceof h&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(S,v,y)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)o.prototype[p[g]]=m;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(o){var a,l,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var h=0,d=new u(v),p=o.document.createTextNode("");d.observe(p,{characterData:!0}),a=function(){p.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)a="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var y=o.document.createElement("script");y.onreadystatechange=function(){v(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},o.document.documentElement.appendChild(y)}:function(){setTimeout(v,0)};else{var m=new o.MessageChannel;m.port1.onmessage=v,a=function(){m.port2.postMessage(0)}}var g=[];function v(){var y,S;l=!0;for(var T=g.length;T;){for(S=g,g=[],y=-1;++y<T;)S[y]();T=g.length}l=!1}i.exports=function(y){g.push(y)!==1||l||a()}}).call(this,typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var o=t("immediate");function a(){}var l={},u=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function p(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,T!==a&&y(this,T)}function m(T,w,E){this.promise=T,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(T,w,E){o(function(){var $;try{$=w(E)}catch(A){return l.reject(T,A)}$===T?l.reject(T,new TypeError("Cannot resolve promise with itself")):l.resolve(T,$)})}function v(T){var w=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof w=="function")return function(){w.apply(T,arguments)}}function y(T,w){var E=!1;function $(D){E||(E=!0,l.reject(T,D))}function A(D){E||(E=!0,l.resolve(T,D))}var I=S(function(){w(A,$)});I.status==="error"&&$(I.value)}function S(T,w){var E={};try{E.value=T(w),E.status="success"}catch($){E.status="error",E.value=$}return E}(i.exports=p).prototype.finally=function(T){if(typeof T!="function")return this;var w=this.constructor;return this.then(function(E){return w.resolve(T()).then(function(){return E})},function(E){return w.resolve(T()).then(function(){throw E})})},p.prototype.catch=function(T){return this.then(null,T)},p.prototype.then=function(T,w){if(typeof T!="function"&&this.state===h||typeof w!="function"&&this.state===u)return this;var E=new this.constructor(a);return this.state!==d?g(E,this.state===h?T:w,this.outcome):this.queue.push(new m(E,T,w)),E},m.prototype.callFulfilled=function(T){l.resolve(this.promise,T)},m.prototype.otherCallFulfilled=function(T){g(this.promise,this.onFulfilled,T)},m.prototype.callRejected=function(T){l.reject(this.promise,T)},m.prototype.otherCallRejected=function(T){g(this.promise,this.onRejected,T)},l.resolve=function(T,w){var E=S(v,w);if(E.status==="error")return l.reject(T,E.value);var $=E.value;if($)y(T,$);else{T.state=h,T.outcome=w;for(var A=-1,I=T.queue.length;++A<I;)T.queue[A].callFulfilled(w)}return T},l.reject=function(T,w){T.state=u,T.outcome=w;for(var E=-1,$=T.queue.length;++E<$;)T.queue[E].callRejected(w);return T},p.resolve=function(T){return T instanceof this?T:l.resolve(new this(a),T)},p.reject=function(T){var w=new this(a);return l.reject(w,T)},p.all=function(T){var w=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=T.length,$=!1;if(!E)return this.resolve([]);for(var A=new Array(E),I=0,D=-1,R=new this(a);++D<E;)B(T[D],D);return R;function B(G,Z){w.resolve(G).then(function(N){A[Z]=N,++I!==E||$||($=!0,l.resolve(R,A))},function(N){$||($=!0,l.reject(R,N))})}},p.race=function(T){var w=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=T.length,$=!1;if(!E)return this.resolve([]);for(var A=-1,I=new this(a);++A<E;)D=T[A],w.resolve(D).then(function(R){$||($=!0,l.resolve(I,R))},function(R){$||($=!0,l.reject(I,R))});var D;return I}},{immediate:36}],38:[function(t,i,r){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var o=t("./zlib/deflate"),a=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),h=t("./zlib/zstream"),d=Object.prototype.toString,p=0,m=-1,g=0,v=8;function y(T){if(!(this instanceof y))return new y(T);this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},T||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var E=o.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(E!==p)throw new Error(u[E]);if(w.header&&o.deflateSetHeader(this.strm,w.header),w.dictionary){var $;if($=typeof w.dictionary=="string"?l.string2buf(w.dictionary):d.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(E=o.deflateSetDictionary(this.strm,$))!==p)throw new Error(u[E]);this._dict_set=!0}}function S(T,w){var E=new y(w);if(E.push(T,!0),E.err)throw E.msg||u[E.err];return E.result}y.prototype.push=function(T,w){var E,$,A=this.strm,I=this.options.chunkSize;if(this.ended)return!1;$=w===~~w?w:w===!0?4:0,typeof T=="string"?A.input=l.string2buf(T):d.call(T)==="[object ArrayBuffer]"?A.input=new Uint8Array(T):A.input=T,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(I),A.next_out=0,A.avail_out=I),(E=o.deflate(A,$))!==1&&E!==p)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(A.output,A.next_out))):this.onData(a.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return $===4?(E=o.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===p):$!==2||(this.onEnd(p),!(A.avail_out=0))},y.prototype.onData=function(T){this.chunks.push(T)},y.prototype.onEnd=function(T){T===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},r.Deflate=y,r.deflate=S,r.deflateRaw=function(T,w){return(w=w||{}).raw=!0,S(T,w)},r.gzip=function(T,w){return(w=w||{}).gzip=!0,S(T,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var o=t("./zlib/inflate"),a=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),h=t("./zlib/messages"),d=t("./zlib/zstream"),p=t("./zlib/gzheader"),m=Object.prototype.toString;function g(y){if(!(this instanceof g))return new g(y);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},y||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||y&&y.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var T=o.inflateInit2(this.strm,S.windowBits);if(T!==u.Z_OK)throw new Error(h[T]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function v(y,S){var T=new g(S);if(T.push(y,!0),T.err)throw T.msg||h[T.err];return T.result}g.prototype.push=function(y,S){var T,w,E,$,A,I,D=this.strm,R=this.options.chunkSize,B=this.options.dictionary,G=!1;if(this.ended)return!1;w=S===~~S?S:S===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?D.input=l.binstring2buf(y):m.call(y)==="[object ArrayBuffer]"?D.input=new Uint8Array(y):D.input=y,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(R),D.next_out=0,D.avail_out=R),(T=o.inflate(D,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&B&&(I=typeof B=="string"?l.string2buf(B):m.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,T=o.inflateSetDictionary(this.strm,I)),T===u.Z_BUF_ERROR&&G===!0&&(T=u.Z_OK,G=!1),T!==u.Z_STREAM_END&&T!==u.Z_OK)return this.onEnd(T),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&T!==u.Z_STREAM_END&&(D.avail_in!==0||w!==u.Z_FINISH&&w!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=l.utf8border(D.output,D.next_out),$=D.next_out-E,A=l.buf2string(D.output,E),D.next_out=$,D.avail_out=R-$,$&&a.arraySet(D.output,D.output,E,$,0),this.onData(A)):this.onData(a.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(G=!0)}while((0<D.avail_in||D.avail_out===0)&&T!==u.Z_STREAM_END);return T===u.Z_STREAM_END&&(w=u.Z_FINISH),w===u.Z_FINISH?(T=o.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===u.Z_OK):w!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(D.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Inflate=g,r.inflate=v,r.inflateRaw=function(y,S){return(S=S||{}).raw=!0,v(y,S)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)d.hasOwnProperty(p)&&(u[p]=d[p])}}return u},r.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var a={arraySet:function(u,h,d,p,m){if(h.subarray&&u.subarray)u.set(h.subarray(d,d+p),m);else for(var g=0;g<p;g++)u[m+g]=h[d+g]},flattenChunks:function(u){var h,d,p,m,g,v;for(h=p=0,d=u.length;h<d;h++)p+=u[h].length;for(v=new Uint8Array(p),h=m=0,d=u.length;h<d;h++)g=u[h],v.set(g,m),m+=g.length;return v}},l={arraySet:function(u,h,d,p,m){for(var g=0;g<p;g++)u[m+g]=h[d+g]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(o)},{}],42:[function(t,i,r){var o=t("./common"),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new o.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(p,m){if(m<65537&&(p.subarray&&l||!p.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(p,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(p[v]);return g}u[254]=u[254]=1,r.string2buf=function(p){var m,g,v,y,S,T=p.length,w=0;for(y=0;y<T;y++)(64512&(g=p.charCodeAt(y)))==55296&&y+1<T&&(64512&(v=p.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),w+=g<128?1:g<2048?2:g<65536?3:4;for(m=new o.Buf8(w),y=S=0;S<w;y++)(64512&(g=p.charCodeAt(y)))==55296&&y+1<T&&(64512&(v=p.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),y++),g<128?m[S++]=g:(g<2048?m[S++]=192|g>>>6:(g<65536?m[S++]=224|g>>>12:(m[S++]=240|g>>>18,m[S++]=128|g>>>12&63),m[S++]=128|g>>>6&63),m[S++]=128|63&g);return m},r.buf2binstring=function(p){return d(p,p.length)},r.binstring2buf=function(p){for(var m=new o.Buf8(p.length),g=0,v=m.length;g<v;g++)m[g]=p.charCodeAt(g);return m},r.buf2string=function(p,m){var g,v,y,S,T=m||p.length,w=new Array(2*T);for(g=v=0;g<T;)if((y=p[g++])<128)w[v++]=y;else if(4<(S=u[y]))w[v++]=65533,g+=S-1;else{for(y&=S===2?31:S===3?15:7;1<S&&g<T;)y=y<<6|63&p[g++],S--;1<S?w[v++]=65533:y<65536?w[v++]=y:(y-=65536,w[v++]=55296|y>>10&1023,w[v++]=56320|1023&y)}return d(w,v)},r.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+u[p[g]]>m?g:m}},{"./common":41}],43:[function(t,i,r){i.exports=function(o,a,l,u){for(var h=65535&o|0,d=o>>>16&65535|0,p=0;l!==0;){for(l-=p=2e3<l?2e3:l;d=d+(h=h+a[u++]|0)|0,--p;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){var o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();i.exports=function(a,l,u,h){var d=o,p=h+u;a^=-1;for(var m=h;m<p;m++)a=a>>>8^d[255&(a^l[m])];return-1^a}},{}],46:[function(t,i,r){var o,a=t("../utils/common"),l=t("./trees"),u=t("./adler32"),h=t("./crc32"),d=t("./messages"),p=0,m=4,g=0,v=-2,y=-1,S=4,T=2,w=8,E=9,$=286,A=30,I=19,D=2*$+1,R=15,B=3,G=258,Z=G+B+1,N=42,H=113,M=1,K=2,re=3,ce=4;function X(W,Ee){return W.msg=d[Ee],Ee}function Q(W){return(W<<1)-(4<W?9:0)}function ee(W){for(var Ee=W.length;0<=--Ee;)W[Ee]=0}function z(W){var Ee=W.state,Oe=Ee.pending;Oe>W.avail_out&&(Oe=W.avail_out),Oe!==0&&(a.arraySet(W.output,Ee.pending_buf,Ee.pending_out,Oe,W.next_out),W.next_out+=Oe,Ee.pending_out+=Oe,W.total_out+=Oe,W.avail_out-=Oe,Ee.pending-=Oe,Ee.pending===0&&(Ee.pending_out=0))}function L(W,Ee){l._tr_flush_block(W,0<=W.block_start?W.block_start:-1,W.strstart-W.block_start,Ee),W.block_start=W.strstart,z(W.strm)}function le(W,Ee){W.pending_buf[W.pending++]=Ee}function de(W,Ee){W.pending_buf[W.pending++]=Ee>>>8&255,W.pending_buf[W.pending++]=255&Ee}function ie(W,Ee){var Oe,ae,ne=W.max_chain_length,pe=W.strstart,Ae=W.prev_length,Te=W.nice_match,j=W.strstart>W.w_size-Z?W.strstart-(W.w_size-Z):0,Y=W.window,ue=W.w_mask,me=W.prev,Ie=W.strstart+G,ze=Y[pe+Ae-1],Se=Y[pe+Ae];W.prev_length>=W.good_match&&(ne>>=2),Te>W.lookahead&&(Te=W.lookahead);do if(Y[(Oe=Ee)+Ae]===Se&&Y[Oe+Ae-1]===ze&&Y[Oe]===Y[pe]&&Y[++Oe]===Y[pe+1]){pe+=2,Oe++;do;while(Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&Y[++pe]===Y[++Oe]&&pe<Ie);if(ae=G-(Ie-pe),pe=Ie-G,Ae<ae){if(W.match_start=Ee,Te<=(Ae=ae))break;ze=Y[pe+Ae-1],Se=Y[pe+Ae]}}while((Ee=me[Ee&ue])>j&&--ne!=0);return Ae<=W.lookahead?Ae:W.lookahead}function Ce(W){var Ee,Oe,ae,ne,pe,Ae,Te,j,Y,ue,me=W.w_size;do{if(ne=W.window_size-W.lookahead-W.strstart,W.strstart>=me+(me-Z)){for(a.arraySet(W.window,W.window,me,me,0),W.match_start-=me,W.strstart-=me,W.block_start-=me,Ee=Oe=W.hash_size;ae=W.head[--Ee],W.head[Ee]=me<=ae?ae-me:0,--Oe;);for(Ee=Oe=me;ae=W.prev[--Ee],W.prev[Ee]=me<=ae?ae-me:0,--Oe;);ne+=me}if(W.strm.avail_in===0)break;if(Ae=W.strm,Te=W.window,j=W.strstart+W.lookahead,Y=ne,ue=void 0,ue=Ae.avail_in,Y<ue&&(ue=Y),Oe=ue===0?0:(Ae.avail_in-=ue,a.arraySet(Te,Ae.input,Ae.next_in,ue,j),Ae.state.wrap===1?Ae.adler=u(Ae.adler,Te,ue,j):Ae.state.wrap===2&&(Ae.adler=h(Ae.adler,Te,ue,j)),Ae.next_in+=ue,Ae.total_in+=ue,ue),W.lookahead+=Oe,W.lookahead+W.insert>=B)for(pe=W.strstart-W.insert,W.ins_h=W.window[pe],W.ins_h=(W.ins_h<<W.hash_shift^W.window[pe+1])&W.hash_mask;W.insert&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[pe+B-1])&W.hash_mask,W.prev[pe&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=pe,pe++,W.insert--,!(W.lookahead+W.insert<B)););}while(W.lookahead<Z&&W.strm.avail_in!==0)}function ye(W,Ee){for(var Oe,ae;;){if(W.lookahead<Z){if(Ce(W),W.lookahead<Z&&Ee===p)return M;if(W.lookahead===0)break}if(Oe=0,W.lookahead>=B&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+B-1])&W.hash_mask,Oe=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),Oe!==0&&W.strstart-Oe<=W.w_size-Z&&(W.match_length=ie(W,Oe)),W.match_length>=B)if(ae=l._tr_tally(W,W.strstart-W.match_start,W.match_length-B),W.lookahead-=W.match_length,W.match_length<=W.max_lazy_match&&W.lookahead>=B){for(W.match_length--;W.strstart++,W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+B-1])&W.hash_mask,Oe=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart,--W.match_length!=0;);W.strstart++}else W.strstart+=W.match_length,W.match_length=0,W.ins_h=W.window[W.strstart],W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+1])&W.hash_mask;else ae=l._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++;if(ae&&(L(W,!1),W.strm.avail_out===0))return M}return W.insert=W.strstart<B-1?W.strstart:B-1,Ee===m?(L(W,!0),W.strm.avail_out===0?re:ce):W.last_lit&&(L(W,!1),W.strm.avail_out===0)?M:K}function xe(W,Ee){for(var Oe,ae,ne;;){if(W.lookahead<Z){if(Ce(W),W.lookahead<Z&&Ee===p)return M;if(W.lookahead===0)break}if(Oe=0,W.lookahead>=B&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+B-1])&W.hash_mask,Oe=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),W.prev_length=W.match_length,W.prev_match=W.match_start,W.match_length=B-1,Oe!==0&&W.prev_length<W.max_lazy_match&&W.strstart-Oe<=W.w_size-Z&&(W.match_length=ie(W,Oe),W.match_length<=5&&(W.strategy===1||W.match_length===B&&4096<W.strstart-W.match_start)&&(W.match_length=B-1)),W.prev_length>=B&&W.match_length<=W.prev_length){for(ne=W.strstart+W.lookahead-B,ae=l._tr_tally(W,W.strstart-1-W.prev_match,W.prev_length-B),W.lookahead-=W.prev_length-1,W.prev_length-=2;++W.strstart<=ne&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+B-1])&W.hash_mask,Oe=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),--W.prev_length!=0;);if(W.match_available=0,W.match_length=B-1,W.strstart++,ae&&(L(W,!1),W.strm.avail_out===0))return M}else if(W.match_available){if((ae=l._tr_tally(W,0,W.window[W.strstart-1]))&&L(W,!1),W.strstart++,W.lookahead--,W.strm.avail_out===0)return M}else W.match_available=1,W.strstart++,W.lookahead--}return W.match_available&&(ae=l._tr_tally(W,0,W.window[W.strstart-1]),W.match_available=0),W.insert=W.strstart<B-1?W.strstart:B-1,Ee===m?(L(W,!0),W.strm.avail_out===0?re:ce):W.last_lit&&(L(W,!1),W.strm.avail_out===0)?M:K}function Fe(W,Ee,Oe,ae,ne){this.good_length=W,this.max_lazy=Ee,this.nice_length=Oe,this.max_chain=ae,this.func=ne}function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*D),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*I+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(R+1),this.heap=new a.Buf16(2*$+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*$+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ue(W){var Ee;return W&&W.state?(W.total_in=W.total_out=0,W.data_type=T,(Ee=W.state).pending=0,Ee.pending_out=0,Ee.wrap<0&&(Ee.wrap=-Ee.wrap),Ee.status=Ee.wrap?N:H,W.adler=Ee.wrap===2?0:1,Ee.last_flush=p,l._tr_init(Ee),g):X(W,v)}function we(W){var Ee=Ue(W);return Ee===g&&function(Oe){Oe.window_size=2*Oe.w_size,ee(Oe.head),Oe.max_lazy_match=o[Oe.level].max_lazy,Oe.good_match=o[Oe.level].good_length,Oe.nice_match=o[Oe.level].nice_length,Oe.max_chain_length=o[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=B-1,Oe.match_available=0,Oe.ins_h=0}(W.state),Ee}function Ge(W,Ee,Oe,ae,ne,pe){if(!W)return v;var Ae=1;if(Ee===y&&(Ee=6),ae<0?(Ae=0,ae=-ae):15<ae&&(Ae=2,ae-=16),ne<1||E<ne||Oe!==w||ae<8||15<ae||Ee<0||9<Ee||pe<0||S<pe)return X(W,v);ae===8&&(ae=9);var Te=new Xe;return(W.state=Te).strm=W,Te.wrap=Ae,Te.gzhead=null,Te.w_bits=ae,Te.w_size=1<<Te.w_bits,Te.w_mask=Te.w_size-1,Te.hash_bits=ne+7,Te.hash_size=1<<Te.hash_bits,Te.hash_mask=Te.hash_size-1,Te.hash_shift=~~((Te.hash_bits+B-1)/B),Te.window=new a.Buf8(2*Te.w_size),Te.head=new a.Buf16(Te.hash_size),Te.prev=new a.Buf16(Te.w_size),Te.lit_bufsize=1<<ne+6,Te.pending_buf_size=4*Te.lit_bufsize,Te.pending_buf=new a.Buf8(Te.pending_buf_size),Te.d_buf=1*Te.lit_bufsize,Te.l_buf=3*Te.lit_bufsize,Te.level=Ee,Te.strategy=pe,Te.method=Oe,we(W)}o=[new Fe(0,0,0,0,function(W,Ee){var Oe=65535;for(Oe>W.pending_buf_size-5&&(Oe=W.pending_buf_size-5);;){if(W.lookahead<=1){if(Ce(W),W.lookahead===0&&Ee===p)return M;if(W.lookahead===0)break}W.strstart+=W.lookahead,W.lookahead=0;var ae=W.block_start+Oe;if((W.strstart===0||W.strstart>=ae)&&(W.lookahead=W.strstart-ae,W.strstart=ae,L(W,!1),W.strm.avail_out===0)||W.strstart-W.block_start>=W.w_size-Z&&(L(W,!1),W.strm.avail_out===0))return M}return W.insert=0,Ee===m?(L(W,!0),W.strm.avail_out===0?re:ce):(W.strstart>W.block_start&&(L(W,!1),W.strm.avail_out),M)}),new Fe(4,4,8,4,ye),new Fe(4,5,16,8,ye),new Fe(4,6,32,32,ye),new Fe(4,4,16,16,xe),new Fe(8,16,32,32,xe),new Fe(8,16,128,128,xe),new Fe(8,32,128,256,xe),new Fe(32,128,258,1024,xe),new Fe(32,258,258,4096,xe)],r.deflateInit=function(W,Ee){return Ge(W,Ee,w,15,8,0)},r.deflateInit2=Ge,r.deflateReset=we,r.deflateResetKeep=Ue,r.deflateSetHeader=function(W,Ee){return W&&W.state?W.state.wrap!==2?v:(W.state.gzhead=Ee,g):v},r.deflate=function(W,Ee){var Oe,ae,ne,pe;if(!W||!W.state||5<Ee||Ee<0)return W?X(W,v):v;if(ae=W.state,!W.output||!W.input&&W.avail_in!==0||ae.status===666&&Ee!==m)return X(W,W.avail_out===0?-5:v);if(ae.strm=W,Oe=ae.last_flush,ae.last_flush=Ee,ae.status===N)if(ae.wrap===2)W.adler=0,le(ae,31),le(ae,139),le(ae,8),ae.gzhead?(le(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),le(ae,255&ae.gzhead.time),le(ae,ae.gzhead.time>>8&255),le(ae,ae.gzhead.time>>16&255),le(ae,ae.gzhead.time>>24&255),le(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),le(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(le(ae,255&ae.gzhead.extra.length),le(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(W.adler=h(W.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(le(ae,0),le(ae,0),le(ae,0),le(ae,0),le(ae,0),le(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),le(ae,3),ae.status=H);else{var Ae=w+(ae.w_bits-8<<4)<<8;Ae|=(2<=ae.strategy||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(Ae|=32),Ae+=31-Ae%31,ae.status=H,de(ae,Ae),ae.strstart!==0&&(de(ae,W.adler>>>16),de(ae,65535&W.adler)),W.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(ne=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),z(W),ne=ae.pending,ae.pending!==ae.pending_buf_size));)le(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){ne=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),z(W),ne=ae.pending,ae.pending===ae.pending_buf_size)){pe=1;break}pe=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,le(ae,pe)}while(pe!==0);ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),pe===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){ne=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),z(W),ne=ae.pending,ae.pending===ae.pending_buf_size)){pe=1;break}pe=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,le(ae,pe)}while(pe!==0);ae.gzhead.hcrc&&ae.pending>ne&&(W.adler=h(W.adler,ae.pending_buf,ae.pending-ne,ne)),pe===0&&(ae.status=103)}else ae.status=103;if(ae.status===103&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&z(W),ae.pending+2<=ae.pending_buf_size&&(le(ae,255&W.adler),le(ae,W.adler>>8&255),W.adler=0,ae.status=H)):ae.status=H),ae.pending!==0){if(z(W),W.avail_out===0)return ae.last_flush=-1,g}else if(W.avail_in===0&&Q(Ee)<=Q(Oe)&&Ee!==m)return X(W,-5);if(ae.status===666&&W.avail_in!==0)return X(W,-5);if(W.avail_in!==0||ae.lookahead!==0||Ee!==p&&ae.status!==666){var Te=ae.strategy===2?function(j,Y){for(var ue;;){if(j.lookahead===0&&(Ce(j),j.lookahead===0)){if(Y===p)return M;break}if(j.match_length=0,ue=l._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++,ue&&(L(j,!1),j.strm.avail_out===0))return M}return j.insert=0,Y===m?(L(j,!0),j.strm.avail_out===0?re:ce):j.last_lit&&(L(j,!1),j.strm.avail_out===0)?M:K}(ae,Ee):ae.strategy===3?function(j,Y){for(var ue,me,Ie,ze,Se=j.window;;){if(j.lookahead<=G){if(Ce(j),j.lookahead<=G&&Y===p)return M;if(j.lookahead===0)break}if(j.match_length=0,j.lookahead>=B&&0<j.strstart&&(me=Se[Ie=j.strstart-1])===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]){ze=j.strstart+G;do;while(me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&me===Se[++Ie]&&Ie<ze);j.match_length=G-(ze-Ie),j.match_length>j.lookahead&&(j.match_length=j.lookahead)}if(j.match_length>=B?(ue=l._tr_tally(j,1,j.match_length-B),j.lookahead-=j.match_length,j.strstart+=j.match_length,j.match_length=0):(ue=l._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++),ue&&(L(j,!1),j.strm.avail_out===0))return M}return j.insert=0,Y===m?(L(j,!0),j.strm.avail_out===0?re:ce):j.last_lit&&(L(j,!1),j.strm.avail_out===0)?M:K}(ae,Ee):o[ae.level].func(ae,Ee);if(Te!==re&&Te!==ce||(ae.status=666),Te===M||Te===re)return W.avail_out===0&&(ae.last_flush=-1),g;if(Te===K&&(Ee===1?l._tr_align(ae):Ee!==5&&(l._tr_stored_block(ae,0,0,!1),Ee===3&&(ee(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),z(W),W.avail_out===0))return ae.last_flush=-1,g}return Ee!==m?g:ae.wrap<=0?1:(ae.wrap===2?(le(ae,255&W.adler),le(ae,W.adler>>8&255),le(ae,W.adler>>16&255),le(ae,W.adler>>24&255),le(ae,255&W.total_in),le(ae,W.total_in>>8&255),le(ae,W.total_in>>16&255),le(ae,W.total_in>>24&255)):(de(ae,W.adler>>>16),de(ae,65535&W.adler)),z(W),0<ae.wrap&&(ae.wrap=-ae.wrap),ae.pending!==0?g:1)},r.deflateEnd=function(W){var Ee;return W&&W.state?(Ee=W.state.status)!==N&&Ee!==69&&Ee!==73&&Ee!==91&&Ee!==103&&Ee!==H&&Ee!==666?X(W,v):(W.state=null,Ee===H?X(W,-3):g):v},r.deflateSetDictionary=function(W,Ee){var Oe,ae,ne,pe,Ae,Te,j,Y,ue=Ee.length;if(!W||!W.state||(pe=(Oe=W.state).wrap)===2||pe===1&&Oe.status!==N||Oe.lookahead)return v;for(pe===1&&(W.adler=u(W.adler,Ee,ue,0)),Oe.wrap=0,ue>=Oe.w_size&&(pe===0&&(ee(Oe.head),Oe.strstart=0,Oe.block_start=0,Oe.insert=0),Y=new a.Buf8(Oe.w_size),a.arraySet(Y,Ee,ue-Oe.w_size,Oe.w_size,0),Ee=Y,ue=Oe.w_size),Ae=W.avail_in,Te=W.next_in,j=W.input,W.avail_in=ue,W.next_in=0,W.input=Ee,Ce(Oe);Oe.lookahead>=B;){for(ae=Oe.strstart,ne=Oe.lookahead-(B-1);Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[ae+B-1])&Oe.hash_mask,Oe.prev[ae&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=ae,ae++,--ne;);Oe.strstart=ae,Oe.lookahead=B-1,Ce(Oe)}return Oe.strstart+=Oe.lookahead,Oe.block_start=Oe.strstart,Oe.insert=Oe.lookahead,Oe.lookahead=0,Oe.match_length=Oe.prev_length=B-1,Oe.match_available=0,W.next_in=Te,W.input=j,W.avail_in=Ae,Oe.wrap=pe,g},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,r){i.exports=function(o,a){var l,u,h,d,p,m,g,v,y,S,T,w,E,$,A,I,D,R,B,G,Z,N,H,M,K;l=o.state,u=o.next_in,M=o.input,h=u+(o.avail_in-5),d=o.next_out,K=o.output,p=d-(a-o.avail_out),m=d+(o.avail_out-257),g=l.dmax,v=l.wsize,y=l.whave,S=l.wnext,T=l.window,w=l.hold,E=l.bits,$=l.lencode,A=l.distcode,I=(1<<l.lenbits)-1,D=(1<<l.distbits)-1;e:do{E<15&&(w+=M[u++]<<E,E+=8,w+=M[u++]<<E,E+=8),R=$[w&I];t:for(;;){if(w>>>=B=R>>>24,E-=B,(B=R>>>16&255)===0)K[d++]=65535&R;else{if(!(16&B)){if(!(64&B)){R=$[(65535&R)+(w&(1<<B)-1)];continue t}if(32&B){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}G=65535&R,(B&=15)&&(E<B&&(w+=M[u++]<<E,E+=8),G+=w&(1<<B)-1,w>>>=B,E-=B),E<15&&(w+=M[u++]<<E,E+=8,w+=M[u++]<<E,E+=8),R=A[w&D];n:for(;;){if(w>>>=B=R>>>24,E-=B,!(16&(B=R>>>16&255))){if(!(64&B)){R=A[(65535&R)+(w&(1<<B)-1)];continue n}o.msg="invalid distance code",l.mode=30;break e}if(Z=65535&R,E<(B&=15)&&(w+=M[u++]<<E,(E+=8)<B&&(w+=M[u++]<<E,E+=8)),g<(Z+=w&(1<<B)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(w>>>=B,E-=B,(B=d-p)<Z){if(y<(B=Z-B)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(H=T,(N=0)===S){if(N+=v-B,B<G){for(G-=B;K[d++]=T[N++],--B;);N=d-Z,H=K}}else if(S<B){if(N+=v+S-B,(B-=S)<G){for(G-=B;K[d++]=T[N++],--B;);if(N=0,S<G){for(G-=B=S;K[d++]=T[N++],--B;);N=d-Z,H=K}}}else if(N+=S-B,B<G){for(G-=B;K[d++]=T[N++],--B;);N=d-Z,H=K}for(;2<G;)K[d++]=H[N++],K[d++]=H[N++],K[d++]=H[N++],G-=3;G&&(K[d++]=H[N++],1<G&&(K[d++]=H[N++]))}else{for(N=d-Z;K[d++]=K[N++],K[d++]=K[N++],K[d++]=K[N++],2<(G-=3););G&&(K[d++]=K[N++],1<G&&(K[d++]=K[N++]))}break}}break}}while(u<h&&d<m);u-=G=E>>3,w&=(1<<(E-=G<<3))-1,o.next_in=u,o.next_out=d,o.avail_in=u<h?h-u+5:5-(u-h),o.avail_out=d<m?m-d+257:257-(d-m),l.hold=w,l.bits=E}},{}],49:[function(t,i,r){var o=t("../utils/common"),a=t("./adler32"),l=t("./crc32"),u=t("./inffast"),h=t("./inftrees"),d=1,p=2,m=0,g=-2,v=1,y=852,S=592;function T(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(N){var H;return N&&N.state?(H=N.state,N.total_in=N.total_out=H.total=0,N.msg="",H.wrap&&(N.adler=1&H.wrap),H.mode=v,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new o.Buf32(y),H.distcode=H.distdyn=new o.Buf32(S),H.sane=1,H.back=-1,m):g}function $(N){var H;return N&&N.state?((H=N.state).wsize=0,H.whave=0,H.wnext=0,E(N)):g}function A(N,H){var M,K;return N&&N.state?(K=N.state,H<0?(M=0,H=-H):(M=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?g:(K.window!==null&&K.wbits!==H&&(K.window=null),K.wrap=M,K.wbits=H,$(N))):g}function I(N,H){var M,K;return N?(K=new w,(N.state=K).window=null,(M=A(N,H))!==m&&(N.state=null),M):g}var D,R,B=!0;function G(N){if(B){var H;for(D=new o.Buf32(512),R=new o.Buf32(32),H=0;H<144;)N.lens[H++]=8;for(;H<256;)N.lens[H++]=9;for(;H<280;)N.lens[H++]=7;for(;H<288;)N.lens[H++]=8;for(h(d,N.lens,0,288,D,0,N.work,{bits:9}),H=0;H<32;)N.lens[H++]=5;h(p,N.lens,0,32,R,0,N.work,{bits:5}),B=!1}N.lencode=D,N.lenbits=9,N.distcode=R,N.distbits=5}function Z(N,H,M,K){var re,ce=N.state;return ce.window===null&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new o.Buf8(ce.wsize)),K>=ce.wsize?(o.arraySet(ce.window,H,M-ce.wsize,ce.wsize,0),ce.wnext=0,ce.whave=ce.wsize):(K<(re=ce.wsize-ce.wnext)&&(re=K),o.arraySet(ce.window,H,M-K,re,ce.wnext),(K-=re)?(o.arraySet(ce.window,H,M-K,K,0),ce.wnext=K,ce.whave=ce.wsize):(ce.wnext+=re,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=re))),0}r.inflateReset=$,r.inflateReset2=A,r.inflateResetKeep=E,r.inflateInit=function(N){return I(N,15)},r.inflateInit2=I,r.inflate=function(N,H){var M,K,re,ce,X,Q,ee,z,L,le,de,ie,Ce,ye,xe,Fe,Xe,Ue,we,Ge,W,Ee,Oe,ae,ne=0,pe=new o.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return g;(M=N.state).mode===12&&(M.mode=13),X=N.next_out,re=N.output,ee=N.avail_out,ce=N.next_in,K=N.input,Q=N.avail_in,z=M.hold,L=M.bits,le=Q,de=ee,Ee=m;e:for(;;)switch(M.mode){case v:if(M.wrap===0){M.mode=13;break}for(;L<16;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(2&M.wrap&&z===35615){pe[M.check=0]=255&z,pe[1]=z>>>8&255,M.check=l(M.check,pe,2,0),L=z=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&z)<<8)+(z>>8))%31){N.msg="incorrect header check",M.mode=30;break}if((15&z)!=8){N.msg="unknown compression method",M.mode=30;break}if(L-=4,W=8+(15&(z>>>=4)),M.wbits===0)M.wbits=W;else if(W>M.wbits){N.msg="invalid window size",M.mode=30;break}M.dmax=1<<W,N.adler=M.check=1,M.mode=512&z?10:12,L=z=0;break;case 2:for(;L<16;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(M.flags=z,(255&M.flags)!=8){N.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){N.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=z>>8&1),512&M.flags&&(pe[0]=255&z,pe[1]=z>>>8&255,M.check=l(M.check,pe,2,0)),L=z=0,M.mode=3;case 3:for(;L<32;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.head&&(M.head.time=z),512&M.flags&&(pe[0]=255&z,pe[1]=z>>>8&255,pe[2]=z>>>16&255,pe[3]=z>>>24&255,M.check=l(M.check,pe,4,0)),L=z=0,M.mode=4;case 4:for(;L<16;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.head&&(M.head.xflags=255&z,M.head.os=z>>8),512&M.flags&&(pe[0]=255&z,pe[1]=z>>>8&255,M.check=l(M.check,pe,2,0)),L=z=0,M.mode=5;case 5:if(1024&M.flags){for(;L<16;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.length=z,M.head&&(M.head.extra_len=z),512&M.flags&&(pe[0]=255&z,pe[1]=z>>>8&255,M.check=l(M.check,pe,2,0)),L=z=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(Q<(ie=M.length)&&(ie=Q),ie&&(M.head&&(W=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),o.arraySet(M.head.extra,K,ce,ie,W)),512&M.flags&&(M.check=l(M.check,K,ie,ce)),Q-=ie,ce+=ie,M.length-=ie),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(Q===0)break e;for(ie=0;W=K[ce+ie++],M.head&&W&&M.length<65536&&(M.head.name+=String.fromCharCode(W)),W&&ie<Q;);if(512&M.flags&&(M.check=l(M.check,K,ie,ce)),Q-=ie,ce+=ie,W)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(Q===0)break e;for(ie=0;W=K[ce+ie++],M.head&&W&&M.length<65536&&(M.head.comment+=String.fromCharCode(W)),W&&ie<Q;);if(512&M.flags&&(M.check=l(M.check,K,ie,ce)),Q-=ie,ce+=ie,W)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;L<16;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(z!==(65535&M.check)){N.msg="header crc mismatch",M.mode=30;break}L=z=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),N.adler=M.check=0,M.mode=12;break;case 10:for(;L<32;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}N.adler=M.check=T(z),L=z=0,M.mode=11;case 11:if(M.havedict===0)return N.next_out=X,N.avail_out=ee,N.next_in=ce,N.avail_in=Q,M.hold=z,M.bits=L,2;N.adler=M.check=1,M.mode=12;case 12:if(H===5||H===6)break e;case 13:if(M.last){z>>>=7&L,L-=7&L,M.mode=27;break}for(;L<3;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}switch(M.last=1&z,L-=1,3&(z>>>=1)){case 0:M.mode=14;break;case 1:if(G(M),M.mode=20,H!==6)break;z>>>=2,L-=2;break e;case 2:M.mode=17;break;case 3:N.msg="invalid block type",M.mode=30}z>>>=2,L-=2;break;case 14:for(z>>>=7&L,L-=7&L;L<32;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if((65535&z)!=(z>>>16^65535)){N.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&z,L=z=0,M.mode=15,H===6)break e;case 15:M.mode=16;case 16:if(ie=M.length){if(Q<ie&&(ie=Q),ee<ie&&(ie=ee),ie===0)break e;o.arraySet(re,K,ce,ie,X),Q-=ie,ce+=ie,ee-=ie,X+=ie,M.length-=ie;break}M.mode=12;break;case 17:for(;L<14;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(M.nlen=257+(31&z),z>>>=5,L-=5,M.ndist=1+(31&z),z>>>=5,L-=5,M.ncode=4+(15&z),z>>>=4,L-=4,286<M.nlen||30<M.ndist){N.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;L<3;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.lens[Ae[M.have++]]=7&z,z>>>=3,L-=3}for(;M.have<19;)M.lens[Ae[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,Oe={bits:M.lenbits},Ee=h(0,M.lens,0,19,M.lencode,0,M.work,Oe),M.lenbits=Oe.bits,Ee){N.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Fe=(ne=M.lencode[z&(1<<M.lenbits)-1])>>>16&255,Xe=65535&ne,!((xe=ne>>>24)<=L);){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(Xe<16)z>>>=xe,L-=xe,M.lens[M.have++]=Xe;else{if(Xe===16){for(ae=xe+2;L<ae;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(z>>>=xe,L-=xe,M.have===0){N.msg="invalid bit length repeat",M.mode=30;break}W=M.lens[M.have-1],ie=3+(3&z),z>>>=2,L-=2}else if(Xe===17){for(ae=xe+3;L<ae;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}L-=xe,W=0,ie=3+(7&(z>>>=xe)),z>>>=3,L-=3}else{for(ae=xe+7;L<ae;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}L-=xe,W=0,ie=11+(127&(z>>>=xe)),z>>>=7,L-=7}if(M.have+ie>M.nlen+M.ndist){N.msg="invalid bit length repeat",M.mode=30;break}for(;ie--;)M.lens[M.have++]=W}}if(M.mode===30)break;if(M.lens[256]===0){N.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,Oe={bits:M.lenbits},Ee=h(d,M.lens,0,M.nlen,M.lencode,0,M.work,Oe),M.lenbits=Oe.bits,Ee){N.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,Oe={bits:M.distbits},Ee=h(p,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,Oe),M.distbits=Oe.bits,Ee){N.msg="invalid distances set",M.mode=30;break}if(M.mode=20,H===6)break e;case 20:M.mode=21;case 21:if(6<=Q&&258<=ee){N.next_out=X,N.avail_out=ee,N.next_in=ce,N.avail_in=Q,M.hold=z,M.bits=L,u(N,de),X=N.next_out,re=N.output,ee=N.avail_out,ce=N.next_in,K=N.input,Q=N.avail_in,z=M.hold,L=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Fe=(ne=M.lencode[z&(1<<M.lenbits)-1])>>>16&255,Xe=65535&ne,!((xe=ne>>>24)<=L);){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(Fe&&!(240&Fe)){for(Ue=xe,we=Fe,Ge=Xe;Fe=(ne=M.lencode[Ge+((z&(1<<Ue+we)-1)>>Ue)])>>>16&255,Xe=65535&ne,!(Ue+(xe=ne>>>24)<=L);){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}z>>>=Ue,L-=Ue,M.back+=Ue}if(z>>>=xe,L-=xe,M.back+=xe,M.length=Xe,Fe===0){M.mode=26;break}if(32&Fe){M.back=-1,M.mode=12;break}if(64&Fe){N.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Fe,M.mode=22;case 22:if(M.extra){for(ae=M.extra;L<ae;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.length+=z&(1<<M.extra)-1,z>>>=M.extra,L-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Fe=(ne=M.distcode[z&(1<<M.distbits)-1])>>>16&255,Xe=65535&ne,!((xe=ne>>>24)<=L);){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(!(240&Fe)){for(Ue=xe,we=Fe,Ge=Xe;Fe=(ne=M.distcode[Ge+((z&(1<<Ue+we)-1)>>Ue)])>>>16&255,Xe=65535&ne,!(Ue+(xe=ne>>>24)<=L);){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}z>>>=Ue,L-=Ue,M.back+=Ue}if(z>>>=xe,L-=xe,M.back+=xe,64&Fe){N.msg="invalid distance code",M.mode=30;break}M.offset=Xe,M.extra=15&Fe,M.mode=24;case 24:if(M.extra){for(ae=M.extra;L<ae;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}M.offset+=z&(1<<M.extra)-1,z>>>=M.extra,L-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){N.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(ee===0)break e;if(ie=de-ee,M.offset>ie){if((ie=M.offset-ie)>M.whave&&M.sane){N.msg="invalid distance too far back",M.mode=30;break}Ce=ie>M.wnext?(ie-=M.wnext,M.wsize-ie):M.wnext-ie,ie>M.length&&(ie=M.length),ye=M.window}else ye=re,Ce=X-M.offset,ie=M.length;for(ee<ie&&(ie=ee),ee-=ie,M.length-=ie;re[X++]=ye[Ce++],--ie;);M.length===0&&(M.mode=21);break;case 26:if(ee===0)break e;re[X++]=M.length,ee--,M.mode=21;break;case 27:if(M.wrap){for(;L<32;){if(Q===0)break e;Q--,z|=K[ce++]<<L,L+=8}if(de-=ee,N.total_out+=de,M.total+=de,de&&(N.adler=M.check=M.flags?l(M.check,re,de,X-de):a(M.check,re,de,X-de)),de=ee,(M.flags?z:T(z))!==M.check){N.msg="incorrect data check",M.mode=30;break}L=z=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;L<32;){if(Q===0)break e;Q--,z+=K[ce++]<<L,L+=8}if(z!==(4294967295&M.total)){N.msg="incorrect length check",M.mode=30;break}L=z=0}M.mode=29;case 29:Ee=1;break e;case 30:Ee=-3;break e;case 31:return-4;case 32:default:return g}return N.next_out=X,N.avail_out=ee,N.next_in=ce,N.avail_in=Q,M.hold=z,M.bits=L,(M.wsize||de!==N.avail_out&&M.mode<30&&(M.mode<27||H!==4))&&Z(N,N.output,N.next_out,de-N.avail_out)?(M.mode=31,-4):(le-=N.avail_in,de-=N.avail_out,N.total_in+=le,N.total_out+=de,M.total+=de,M.wrap&&de&&(N.adler=M.check=M.flags?l(M.check,re,de,N.next_out-de):a(M.check,re,de,N.next_out-de)),N.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(le==0&&de===0||H===4)&&Ee===m&&(Ee=-5),Ee)},r.inflateEnd=function(N){if(!N||!N.state)return g;var H=N.state;return H.window&&(H.window=null),N.state=null,m},r.inflateGetHeader=function(N,H){var M;return N&&N.state&&2&(M=N.state).wrap?((M.head=H).done=!1,m):g},r.inflateSetDictionary=function(N,H){var M,K=H.length;return N&&N.state?(M=N.state).wrap!==0&&M.mode!==11?g:M.mode===11&&a(1,H,K,0)!==M.check?-3:Z(N,H,K,K)?(M.mode=31,-4):(M.havedict=1,m):g},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var o=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,p,m,g,v,y,S,T){var w,E,$,A,I,D,R,B,G,Z=T.bits,N=0,H=0,M=0,K=0,re=0,ce=0,X=0,Q=0,ee=0,z=0,L=null,le=0,de=new o.Buf16(16),ie=new o.Buf16(16),Ce=null,ye=0;for(N=0;N<=15;N++)de[N]=0;for(H=0;H<g;H++)de[p[m+H]]++;for(re=Z,K=15;1<=K&&de[K]===0;K--);if(K<re&&(re=K),K===0)return v[y++]=20971520,v[y++]=20971520,T.bits=1,0;for(M=1;M<K&&de[M]===0;M++);for(re<M&&(re=M),N=Q=1;N<=15;N++)if(Q<<=1,(Q-=de[N])<0)return-1;if(0<Q&&(d===0||K!==1))return-1;for(ie[1]=0,N=1;N<15;N++)ie[N+1]=ie[N]+de[N];for(H=0;H<g;H++)p[m+H]!==0&&(S[ie[p[m+H]]++]=H);if(D=d===0?(L=Ce=S,19):d===1?(L=a,le-=257,Ce=l,ye-=257,256):(L=u,Ce=h,-1),N=M,I=y,X=H=z=0,$=-1,A=(ee=1<<(ce=re))-1,d===1&&852<ee||d===2&&592<ee)return 1;for(;;){for(R=N-X,G=S[H]<D?(B=0,S[H]):S[H]>D?(B=Ce[ye+S[H]],L[le+S[H]]):(B=96,0),w=1<<N-X,M=E=1<<ce;v[I+(z>>X)+(E-=w)]=R<<24|B<<16|G|0,E!==0;);for(w=1<<N-1;z&w;)w>>=1;if(w!==0?(z&=w-1,z+=w):z=0,H++,--de[N]==0){if(N===K)break;N=p[m+S[H]]}if(re<N&&(z&A)!==$){for(X===0&&(X=re),I+=M,Q=1<<(ce=N-X);ce+X<K&&!((Q-=de[ce+X])<=0);)ce++,Q<<=1;if(ee+=1<<ce,d===1&&852<ee||d===2&&592<ee)return 1;v[$=z&A]=re<<24|ce<<16|I-y|0}}return z!==0&&(v[I+z]=N-X<<24|64<<16|0),T.bits=re,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var o=t("../utils/common"),a=0,l=1;function u(ne){for(var pe=ne.length;0<=--pe;)ne[pe]=0}var h=0,d=29,p=256,m=p+1+d,g=30,v=19,y=2*m+1,S=15,T=16,w=7,E=256,$=16,A=17,I=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(m+2));u(Z);var N=new Array(2*g);u(N);var H=new Array(512);u(H);var M=new Array(256);u(M);var K=new Array(d);u(K);var re,ce,X,Q=new Array(g);function ee(ne,pe,Ae,Te,j){this.static_tree=ne,this.extra_bits=pe,this.extra_base=Ae,this.elems=Te,this.max_length=j,this.has_stree=ne&&ne.length}function z(ne,pe){this.dyn_tree=ne,this.max_code=0,this.stat_desc=pe}function L(ne){return ne<256?H[ne]:H[256+(ne>>>7)]}function le(ne,pe){ne.pending_buf[ne.pending++]=255&pe,ne.pending_buf[ne.pending++]=pe>>>8&255}function de(ne,pe,Ae){ne.bi_valid>T-Ae?(ne.bi_buf|=pe<<ne.bi_valid&65535,le(ne,ne.bi_buf),ne.bi_buf=pe>>T-ne.bi_valid,ne.bi_valid+=Ae-T):(ne.bi_buf|=pe<<ne.bi_valid&65535,ne.bi_valid+=Ae)}function ie(ne,pe,Ae){de(ne,Ae[2*pe],Ae[2*pe+1])}function Ce(ne,pe){for(var Ae=0;Ae|=1&ne,ne>>>=1,Ae<<=1,0<--pe;);return Ae>>>1}function ye(ne,pe,Ae){var Te,j,Y=new Array(S+1),ue=0;for(Te=1;Te<=S;Te++)Y[Te]=ue=ue+Ae[Te-1]<<1;for(j=0;j<=pe;j++){var me=ne[2*j+1];me!==0&&(ne[2*j]=Ce(Y[me]++,me))}}function xe(ne){var pe;for(pe=0;pe<m;pe++)ne.dyn_ltree[2*pe]=0;for(pe=0;pe<g;pe++)ne.dyn_dtree[2*pe]=0;for(pe=0;pe<v;pe++)ne.bl_tree[2*pe]=0;ne.dyn_ltree[2*E]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function Fe(ne){8<ne.bi_valid?le(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Xe(ne,pe,Ae,Te){var j=2*pe,Y=2*Ae;return ne[j]<ne[Y]||ne[j]===ne[Y]&&Te[pe]<=Te[Ae]}function Ue(ne,pe,Ae){for(var Te=ne.heap[Ae],j=Ae<<1;j<=ne.heap_len&&(j<ne.heap_len&&Xe(pe,ne.heap[j+1],ne.heap[j],ne.depth)&&j++,!Xe(pe,Te,ne.heap[j],ne.depth));)ne.heap[Ae]=ne.heap[j],Ae=j,j<<=1;ne.heap[Ae]=Te}function we(ne,pe,Ae){var Te,j,Y,ue,me=0;if(ne.last_lit!==0)for(;Te=ne.pending_buf[ne.d_buf+2*me]<<8|ne.pending_buf[ne.d_buf+2*me+1],j=ne.pending_buf[ne.l_buf+me],me++,Te===0?ie(ne,j,pe):(ie(ne,(Y=M[j])+p+1,pe),(ue=D[Y])!==0&&de(ne,j-=K[Y],ue),ie(ne,Y=L(--Te),Ae),(ue=R[Y])!==0&&de(ne,Te-=Q[Y],ue)),me<ne.last_lit;);ie(ne,E,pe)}function Ge(ne,pe){var Ae,Te,j,Y=pe.dyn_tree,ue=pe.stat_desc.static_tree,me=pe.stat_desc.has_stree,Ie=pe.stat_desc.elems,ze=-1;for(ne.heap_len=0,ne.heap_max=y,Ae=0;Ae<Ie;Ae++)Y[2*Ae]!==0?(ne.heap[++ne.heap_len]=ze=Ae,ne.depth[Ae]=0):Y[2*Ae+1]=0;for(;ne.heap_len<2;)Y[2*(j=ne.heap[++ne.heap_len]=ze<2?++ze:0)]=1,ne.depth[j]=0,ne.opt_len--,me&&(ne.static_len-=ue[2*j+1]);for(pe.max_code=ze,Ae=ne.heap_len>>1;1<=Ae;Ae--)Ue(ne,Y,Ae);for(j=Ie;Ae=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],Ue(ne,Y,1),Te=ne.heap[1],ne.heap[--ne.heap_max]=Ae,ne.heap[--ne.heap_max]=Te,Y[2*j]=Y[2*Ae]+Y[2*Te],ne.depth[j]=(ne.depth[Ae]>=ne.depth[Te]?ne.depth[Ae]:ne.depth[Te])+1,Y[2*Ae+1]=Y[2*Te+1]=j,ne.heap[1]=j++,Ue(ne,Y,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(Se,Je){var Ve,ot,_e,Le,We,F,te=Je.dyn_tree,ge=Je.max_code,Me=Je.stat_desc.static_tree,oe=Je.stat_desc.has_stree,Pe=Je.stat_desc.extra_bits,et=Je.stat_desc.extra_base,mt=Je.stat_desc.max_length,bt=0;for(Le=0;Le<=S;Le++)Se.bl_count[Le]=0;for(te[2*Se.heap[Se.heap_max]+1]=0,Ve=Se.heap_max+1;Ve<y;Ve++)mt<(Le=te[2*te[2*(ot=Se.heap[Ve])+1]+1]+1)&&(Le=mt,bt++),te[2*ot+1]=Le,ge<ot||(Se.bl_count[Le]++,We=0,et<=ot&&(We=Pe[ot-et]),F=te[2*ot],Se.opt_len+=F*(Le+We),oe&&(Se.static_len+=F*(Me[2*ot+1]+We)));if(bt!==0){do{for(Le=mt-1;Se.bl_count[Le]===0;)Le--;Se.bl_count[Le]--,Se.bl_count[Le+1]+=2,Se.bl_count[mt]--,bt-=2}while(0<bt);for(Le=mt;Le!==0;Le--)for(ot=Se.bl_count[Le];ot!==0;)ge<(_e=Se.heap[--Ve])||(te[2*_e+1]!==Le&&(Se.opt_len+=(Le-te[2*_e+1])*te[2*_e],te[2*_e+1]=Le),ot--)}}(ne,pe),ye(Y,ze,ne.bl_count)}function W(ne,pe,Ae){var Te,j,Y=-1,ue=pe[1],me=0,Ie=7,ze=4;for(ue===0&&(Ie=138,ze=3),pe[2*(Ae+1)+1]=65535,Te=0;Te<=Ae;Te++)j=ue,ue=pe[2*(Te+1)+1],++me<Ie&&j===ue||(me<ze?ne.bl_tree[2*j]+=me:j!==0?(j!==Y&&ne.bl_tree[2*j]++,ne.bl_tree[2*$]++):me<=10?ne.bl_tree[2*A]++:ne.bl_tree[2*I]++,Y=j,ze=(me=0)===ue?(Ie=138,3):j===ue?(Ie=6,3):(Ie=7,4))}function Ee(ne,pe,Ae){var Te,j,Y=-1,ue=pe[1],me=0,Ie=7,ze=4;for(ue===0&&(Ie=138,ze=3),Te=0;Te<=Ae;Te++)if(j=ue,ue=pe[2*(Te+1)+1],!(++me<Ie&&j===ue)){if(me<ze)for(;ie(ne,j,ne.bl_tree),--me!=0;);else j!==0?(j!==Y&&(ie(ne,j,ne.bl_tree),me--),ie(ne,$,ne.bl_tree),de(ne,me-3,2)):me<=10?(ie(ne,A,ne.bl_tree),de(ne,me-3,3)):(ie(ne,I,ne.bl_tree),de(ne,me-11,7));Y=j,ze=(me=0)===ue?(Ie=138,3):j===ue?(Ie=6,3):(Ie=7,4)}}u(Q);var Oe=!1;function ae(ne,pe,Ae,Te){de(ne,(h<<1)+(Te?1:0),3),function(j,Y,ue,me){Fe(j),me&&(le(j,ue),le(j,~ue)),o.arraySet(j.pending_buf,j.window,Y,ue,j.pending),j.pending+=ue}(ne,pe,Ae,!0)}r._tr_init=function(ne){Oe||(function(){var pe,Ae,Te,j,Y,ue=new Array(S+1);for(j=Te=0;j<d-1;j++)for(K[j]=Te,pe=0;pe<1<<D[j];pe++)M[Te++]=j;for(M[Te-1]=j,j=Y=0;j<16;j++)for(Q[j]=Y,pe=0;pe<1<<R[j];pe++)H[Y++]=j;for(Y>>=7;j<g;j++)for(Q[j]=Y<<7,pe=0;pe<1<<R[j]-7;pe++)H[256+Y++]=j;for(Ae=0;Ae<=S;Ae++)ue[Ae]=0;for(pe=0;pe<=143;)Z[2*pe+1]=8,pe++,ue[8]++;for(;pe<=255;)Z[2*pe+1]=9,pe++,ue[9]++;for(;pe<=279;)Z[2*pe+1]=7,pe++,ue[7]++;for(;pe<=287;)Z[2*pe+1]=8,pe++,ue[8]++;for(ye(Z,m+1,ue),pe=0;pe<g;pe++)N[2*pe+1]=5,N[2*pe]=Ce(pe,5);re=new ee(Z,D,p+1,m,S),ce=new ee(N,R,0,g,S),X=new ee(new Array(0),B,0,v,w)}(),Oe=!0),ne.l_desc=new z(ne.dyn_ltree,re),ne.d_desc=new z(ne.dyn_dtree,ce),ne.bl_desc=new z(ne.bl_tree,X),ne.bi_buf=0,ne.bi_valid=0,xe(ne)},r._tr_stored_block=ae,r._tr_flush_block=function(ne,pe,Ae,Te){var j,Y,ue=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(me){var Ie,ze=4093624447;for(Ie=0;Ie<=31;Ie++,ze>>>=1)if(1&ze&&me.dyn_ltree[2*Ie]!==0)return a;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return l;for(Ie=32;Ie<p;Ie++)if(me.dyn_ltree[2*Ie]!==0)return l;return a}(ne)),Ge(ne,ne.l_desc),Ge(ne,ne.d_desc),ue=function(me){var Ie;for(W(me,me.dyn_ltree,me.l_desc.max_code),W(me,me.dyn_dtree,me.d_desc.max_code),Ge(me,me.bl_desc),Ie=v-1;3<=Ie&&me.bl_tree[2*G[Ie]+1]===0;Ie--);return me.opt_len+=3*(Ie+1)+5+5+4,Ie}(ne),j=ne.opt_len+3+7>>>3,(Y=ne.static_len+3+7>>>3)<=j&&(j=Y)):j=Y=Ae+5,Ae+4<=j&&pe!==-1?ae(ne,pe,Ae,Te):ne.strategy===4||Y===j?(de(ne,2+(Te?1:0),3),we(ne,Z,N)):(de(ne,4+(Te?1:0),3),function(me,Ie,ze,Se){var Je;for(de(me,Ie-257,5),de(me,ze-1,5),de(me,Se-4,4),Je=0;Je<Se;Je++)de(me,me.bl_tree[2*G[Je]+1],3);Ee(me,me.dyn_ltree,Ie-1),Ee(me,me.dyn_dtree,ze-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,ue+1),we(ne,ne.dyn_ltree,ne.dyn_dtree)),xe(ne),Te&&Fe(ne)},r._tr_tally=function(ne,pe,Ae){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=pe>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&pe,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ae,ne.last_lit++,pe===0?ne.dyn_ltree[2*Ae]++:(ne.matches++,pe--,ne.dyn_ltree[2*(M[Ae]+p+1)]++,ne.dyn_dtree[2*L(pe)]++),ne.last_lit===ne.lit_bufsize-1},r._tr_align=function(ne){de(ne,2,3),ie(ne,E,Z),function(pe){pe.bi_valid===16?(le(pe,pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0):8<=pe.bi_valid&&(pe.pending_buf[pe.pending++]=255&pe.bi_buf,pe.bi_buf>>=8,pe.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(t,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,r){(function(o){(function(a,l){if(!a.setImmediate){var u,h,d,p,m=1,g={},v=!1,y=a.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(a);S=S&&S.setTimeout?S:a,u={}.toString.call(a.process)==="[object process]"?function($){process.nextTick(function(){w($)})}:function(){if(a.postMessage&&!a.importScripts){var $=!0,A=a.onmessage;return a.onmessage=function(){$=!1},a.postMessage("","*"),a.onmessage=A,$}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function($){a.postMessage(p+$,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function($){w($.data)},function($){d.port2.postMessage($)}):y&&"onreadystatechange"in y.createElement("script")?(h=y.documentElement,function($){var A=y.createElement("script");A.onreadystatechange=function(){w($),A.onreadystatechange=null,h.removeChild(A),A=null},h.appendChild(A)}):function($){setTimeout(w,0,$)},S.setImmediate=function($){typeof $!="function"&&($=new Function(""+$));for(var A=new Array(arguments.length-1),I=0;I<A.length;I++)A[I]=arguments[I+1];var D={callback:$,args:A};return g[m]=D,u(m),m++},S.clearImmediate=T}function T($){delete g[$]}function w($){if(v)setTimeout(w,0,$);else{var A=g[$];if(A){v=!0;try{(function(I){var D=I.callback,R=I.args;switch(R.length){case 0:D();break;case 1:D(R[0]);break;case 2:D(R[0],R[1]);break;case 3:D(R[0],R[1],R[2]);break;default:D.apply(l,R)}})(A)}finally{T($),v=!1}}}}function E($){$.source===a&&typeof $.data=="string"&&$.data.indexOf(p)===0&&w(+$.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Z9);var dle=Z9.exports;const fle=Mu(dle);var q9={exports:{}};(function(n,e){(function(t,i){i()})(Ki,function(){function t(h,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,d,p){var m=new XMLHttpRequest;m.open("GET",h),m.responseType="blob",m.onload=function(){u(m.response,d,p)},m.onerror=function(){console.error("could not download file")},m.send()}function r(h){var d=new XMLHttpRequest;d.open("HEAD",h,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(d)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ki=="object"&&Ki.global===Ki?Ki:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(h,d,p){var m=a.URL||a.webkitURL,g=document.createElement("a");d=d||h.name||"download",g.download=d,g.rel="noopener",typeof h=="string"?(g.href=h,g.origin===location.origin?o(g):r(g.href)?i(h,d,p):o(g,g.target="_blank")):(g.href=m.createObjectURL(h),setTimeout(function(){m.revokeObjectURL(g.href)},4e4),setTimeout(function(){o(g)},0))}:"msSaveOrOpenBlob"in navigator?function(h,d,p){if(d=d||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,p),d);else if(r(h))i(h,d,p);else{var m=document.createElement("a");m.href=h,m.target="_blank",setTimeout(function(){o(m)})}}:function(h,d,p,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof h=="string")return i(h,d,p);var g=h.type==="application/octet-stream",v=/constructor/i.test(a.HTMLElement)||a.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||g&&v||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var E=S.result;E=y?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=E:location=E,m=null},S.readAsDataURL(h)}else{var T=a.URL||a.webkitURL,w=T.createObjectURL(h);m?m.location=w:location.href=w,m=null,setTimeout(function(){T.revokeObjectURL(w)},4e4)}});a.saveAs=u.saveAs=u,n.exports=u})})(q9);var ple=q9.exports;const mle=Mu(ple),gle=45,_le=88;var N4=39;const Ole=async(n,e)=>{var t=yle.split(`
`),i=0;const r=fle(),o=n.timelineState.groups;for(let w in o){const E=n.timelineState.groups[w],$=Object.values(E.robots);var a=[];if($.length===0)continue;i+=1;for(let I in $)console.log($,I),$[I]!=null&&(a.push(I),console.log("Robot Indices",a));var l="",u="";if(Object.keys(E.items).length===0){console.log("No items"+E);continue}else console.log(E.items);console.log("Items: "+E.items);for(let I in E.items){console.log(I);const D=E.items[I],R=D.startTime,B=n.blocks[D.blockId].python;if(D.isTrajectory)l+="        trajectories.append("+B+")",u+="        start_time = ${startTime}\n",u+=`        self.wait_until(start_time)
`,u+=`        for cf in self.crazyflies:
`,u+="            cf.startTrajectory(${trajCounter}, 0, 1)\n",u+="        self.wait_until(start_time + self.trajectories[${trajCounter}].duration\n";else{u+=`        start_time = ${R}
`,u+=`        total_duration = 1
`,u+=`        self.wait_until(start_time)
`;for(var h=B.split(`
`),d=0;d<h.length-1;d++)u+=`        for cf in self.crazyflies:
`,u+=`            block_duration = ${h[d]}
`,u+=`        self.wait(block_duration)
`;u+=`        self.wait_until(start_time + total_duration)
`}}var p=vle.split(`
`);p.splice(gle,0,l),p.splice(_le,0,u),console.log(a);var m=`    import ${w}_node
`;m=`    cfs = []
`;for(let I in a)m+=`    cfs.append(crazyflies[${I}])
`;m+=`    nodes.append(${w}_node.worker_node(cfs, len(nodes)-1, ${i}))
`,t.splice(N4,0,m),N4+=2;const A=new Blob([p.join(`
`)],{type:"text/plain"});r.file(`${w}_node.py`,A)}const g=new Blob([t.join(`
`)],{type:"text/plain"}),v=new Blob([ble],{type:"text/plain"});var y=`positions:
`;for(let w in Object.values(n.robots)){var S=[0,0,0];n.robots[w]!=null&&(S=n.robots[w].startingPosition),y+=`    - [${S[0]}, ${S[1]}, ${S[2]}]
`}const T=new Blob([y],{type:"text/plain"});r.file("starting_positions.yaml",T),r.file("configure.py",v),r.file("launch_nodes.py",g),r.generateAsync({type:"blob"}).then(w=>mle.saveAs(w,`${n.projectName}.zip`))},vle=`import rclpy
from rclpy.node import Node
from std_msgs.msg import Int32
from crazyflie_py import generate_trajectory
import numpy as np
from blocklyTranslations import *

Hz = 30

class worker_node(Node):

    def __init__(self, crazyflies, id=0, num_nodes=1):
        """
        id: a unique id between 0 and num_nodes corresponding to the thread number of this worker
        num_nodes: number of nodes (threads) in total
        """
        super().__init__("worker_node_{}".format(id))
        self.id = id
        self.num_nodes = num_nodes
        self.crazyflies = crazyflies

        self.execution_ready_subscription(
            Int32,
            'ready',
            self.ready_callback,
            num_nodes + 1
        )
        self.execution_ready_publisher(
            Int32,
            'ready',
            num_nodes + 1
        )
        self.timer = self.create_timer(1/Hz, self.timer_callback)
        self.ready_ids = set()
        self.executing = False
        self.running = False
        self.done = False
    
    def compute_trajectories(self):
        """
        Inject Trajectory computation code here...
        """
        trajectories = []
        
        #TODO insert trajectories here...

        return trajectories

    def upload_trajectories(crazyflies, trajectories):
        '''
            Upload trajectories to crazyflies one by one
        '''

        # TODO: Currently doesn't support overlapping crazyflies as we will overwrite trajectories...
        for i, traj in enumerate(trajectories):
            for cf in crazyflies:
                cf.uploadTrajectory(traj, i, 0)

    def begin(self):
        """
            Prepare for execution. Pre-compute trajectories and upload them to crazyflies
        """
        trajectories = self.compute_trajectories()
        self.upload_trajectories(trajectories)
        msg = Int32()
        msg.data = self.id
        self.ready_publisher.publish(msg)

    def time(self):
        return self.get_clock().now().nanoseconds / 1e9
    
    def execute_blocks(self):
        """
        Must be injected into...

        Typical format should be:
        
        start_time = 0.0
        duration = 3.0
        self.wait_until(start_time)
        for cf in self.crazyflies:
            cf.takeoff(1.0, duration)
        self.wait_until(start_time+duration)

        where start_time, duration, and in the inner portion of the for loop are provided.
        """
        # BLOCKS...
        pass

    def ready_callback(self, msg):
        self.ready_ids.add(msg.data)
    
    def timer_callback(self):
        if not self.running:
            self.begin()
            self.running = True
        if len(self.ready_ids) == self.num_nodes and not self.executing:
            self.running = True
            self.start_time = self.get_clock().now()
            self.execute_blocks()
            self.destroy_node()
            self.done = True

    def wait_until(self, end_time):
        while self.time() < end_time:
            rclpy.spin_once(self, timeout_sec=0)

    def wait(self, time):
        end_time = self.time() + time
        self.wait_until(end_time)
`,yle=`import yaml
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node
from crazyflie_py import Crazyswarm
import rclpy
import threading

# Inject Imports Here:

def launch(nodes):
    threads = []
    for node in nodes:
        thread = threading.Thread(target=rclpy.spin, args=(node, ), daemon=True)
        thread.start()
        threads.append(thread)
    while not all([n.done for n in nodes]):
        pass
    rclpy.shutdown()
    [t.join() for t in threads]

def main():
    # node_config_file = get_package_share_directory('crazyflie'), 'config', 'crazyflies.yaml'
    
    # Initialize swarm
    swarm = Crazyswarm()
    with open("cfs_ordering.yaml") as f:
        ordering = yaml.load(f)
        order = ordering['cfs']
    # all_crazyflies = swarm.allcfs.crazyflies
    all_crazyflies = [swarm.allcfs.crazyfliesById[k] for k in order]
    # Construct Launch Description from yaml files
    # One node per line in the timeline, linked to a worker node described in the yaml file
    counter = 0
    nodes = []
    cfs = []

    # Inject append here...

    # cfs.append(all_crazyflies[0])
    # nodes.append(group1_node.worker_node(cfs, len(cfs), 1))
    
    # Launch all nodes
    return launch(nodes)

if __name__ == '__main__':
    main()
`,ble=`# Need to ask user which crazyflies they will use, and will tell them where to place them

import yaml
import copy
import os, sys, stat

# Load starting positions from blockly
with open('starting_positions.yaml') as f:
    starting_positions = yaml.load(f)

n_robots = len(starting_positions['positions'])

print("You will need {} crazyflies".format(n_robots))
print("Which crazyflies (by ID) will you use?")

cfs = []
for i in range(n_robots):
    cf = input("crazyflie #{}: ".format(i + 1))
    cfs.append(cf)

    
start_dict = {}
for cf, pos in zip(cfs, starting_positions['positions']):
    print("Place cf {} at location {}".format(cf, pos))
    start_dict[cf] = pos

# Make changes to local mycrazyflies.yaml
with open('crazyflies.yaml') as f:
    all_crazyflies = yaml.load(f)

my_cfs = copy.deepcopy(all_crazyflies)
for r in all_crazyflies['robots']:
    id = r.strip('cf')
    if id not in cfs:
        del my_cfs['robots'][r]
    else:
        my_cfs['robots'][r]['enabled'] = True
        my_cfs['robots'][r]['initial_position'] = start_dict[id]


with open('my_crazyflies.yaml', 'w') as f:
    yaml.dump(my_cfs, f)

# Make commands for sim and non-sim launches
with open('sim.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml backend:=sim')
    os.chmod('sim.sh', stat.S_IRWXU)
with open('run.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml')
    os.chmod('run.sh', stat.S_IRWXU)
`,Sle=(n,e=void 0)=>{const t=JSON.stringify(n);e=e??n.projectName.replaceAll(" ","")+".robart",hle(e,t)},Tle=n=>JSON.parse(n),wle=(n,e)=>{Ole(n)};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const OA="150",im={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},J9=0,eD=1,K9=2,Ele=3,ej=0,vA=1,Mb=2,bm=3,Sc=0,Xs=1,El=2,xle=2,Fh=0,Mm=1,tD=2,nD=3,iD=4,tj=5,lm=100,nj=101,ij=102,rD=103,sD=104,rj=200,sj=201,oj=202,aj=203,BB=204,FB=205,lj=206,cj=207,uj=208,hj=209,dj=210,fj=0,pj=1,mj=2,X$=3,gj=4,_j=5,Oj=6,vj=7,_T=0,yj=1,bj=2,Oc=0,Sj=1,Tj=2,wj=3,UB=4,Ej=5,yA=300,Rf=301,Mf=302,_S=303,OS=304,IO=306,Pf=1e3,zs=1001,cO=1002,fr=1003,vS=1004,$le=1004,G0=1005,Cle=1005,hi=1006,bA=1007,Ale=1007,Iu=1008,kle=1008,jh=1009,xj=1010,$j=1011,GB=1012,Cj=1013,of=1014,_u=1015,Jm=1016,Aj=1017,kj=1018,Pm=1020,Ij=1021,ra=1023,Rj=1024,Mj=1025,Tf=1026,Km=1027,Pj=1028,Dj=1029,Lj=1030,Nj=1031,Bj=1033,Wx=33776,zx=33777,Qx=33778,Vx=33779,oD=35840,aD=35841,lD=35842,cD=35843,Fj=36196,uD=37492,hD=37496,dD=37808,fD=37809,pD=37810,mD=37811,gD=37812,_D=37813,OD=37814,vD=37815,yD=37816,bD=37817,SD=37818,TD=37819,wD=37820,ED=37821,Hx=36492,Uj=36283,xD=36284,$D=36285,CD=36286,Gj=2200,Wj=2201,zj=2202,uO=2300,eg=2301,Xx=2302,Sm=2400,Tm=2401,yS=2402,SA=2500,WB=2501,Ile=0,Qj=1,zB=2,Yh=3e3,Nn=3001,Vj=3200,QB=3201,id=0,Hj=1,Rle="",cc="srgb",hO="srgb-linear",VB="display-p3",Mle=0,jx=7680,Ple=7681,Dle=7682,Lle=7683,Nle=34055,Ble=34056,Fle=5386,Ule=512,Gle=513,Wle=514,zle=515,Qle=516,Vle=517,Hle=518,Xj=519,bS=35044,Xle=35048,jle=35040,Yle=35045,Zle=35049,qle=35041,Jle=35046,Kle=35050,ece=35042,tce="100",AD="300 es",j$=1035;class Pu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let o=0,a=r.length;o<a;o++)r[o].call(this,e);e.target=null}}}const ro=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let B4=1234567;const Dm=Math.PI/180,SS=180/Math.PI;function Ga(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ro[n&255]+ro[n>>8&255]+ro[n>>16&255]+ro[n>>24&255]+"-"+ro[e&255]+ro[e>>8&255]+"-"+ro[e>>16&15|64]+ro[e>>24&255]+"-"+ro[t&63|128]+ro[t>>8&255]+"-"+ro[t>>16&255]+ro[t>>24&255]+ro[i&255]+ro[i>>8&255]+ro[i>>16&255]+ro[i>>24&255]).toLowerCase()}function wr(n,e,t){return Math.max(e,Math.min(t,n))}function HB(n,e){return(n%e+e)%e}function nce(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function ice(n,e,t){return n!==e?(t-n)/(e-n):0}function Pb(n,e,t){return(1-t)*n+t*e}function rce(n,e,t,i){return Pb(n,e,1-Math.exp(-t*i))}function sce(n,e=1){return e-Math.abs(HB(n,e*2)-e)}function oce(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ace(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function lce(n,e){return n+Math.floor(Math.random()*(e-n+1))}function cce(n,e){return n+Math.random()*(e-n)}function uce(n){return n*(.5-Math.random())}function hce(n){n!==void 0&&(B4=n);let e=B4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function dce(n){return n*Dm}function fce(n){return n*SS}function kD(n){return(n&n-1)===0&&n!==0}function jj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Yj(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pce(n,e,t,i,r){const o=Math.cos,a=Math.sin,l=o(t/2),u=a(t/2),h=o((e+i)/2),d=a((e+i)/2),p=o((e-i)/2),m=a((e-i)/2),g=o((i-e)/2),v=a((i-e)/2);switch(r){case"XYX":n.set(l*d,u*p,u*m,l*h);break;case"YZY":n.set(u*m,l*d,u*p,l*h);break;case"ZXZ":n.set(u*p,u*m,l*d,l*h);break;case"XZX":n.set(l*d,u*v,u*g,l*h);break;case"YXY":n.set(u*g,l*d,u*v,l*h);break;case"ZYZ":n.set(u*v,u*g,l*d,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Lh(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ci(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const TA={DEG2RAD:Dm,RAD2DEG:SS,generateUUID:Ga,clamp:wr,euclideanModulo:HB,mapLinear:nce,inverseLerp:ice,lerp:Pb,damp:rce,pingpong:sce,smoothstep:oce,smootherstep:ace,randInt:lce,randFloat:cce,randFloatSpread:uce,seededRandom:hce,degToRad:dce,radToDeg:fce,isPowerOfTwo:kD,ceilPowerOfTwo:jj,floorPowerOfTwo:Yj,setQuaternionFromProperEuler:pce,normalize:ci,denormalize:Lh};class nt{constructor(e=0,t=0){nt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,a=this.y-e.y;return this.x=o*i-a*r+e.x,this.y=o*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vs{constructor(){vs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,o,a,l,u,h){const d=this.elements;return d[0]=e,d[1]=r,d[2]=l,d[3]=t,d[4]=o,d[5]=u,d[6]=i,d[7]=a,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,a=i[0],l=i[3],u=i[6],h=i[1],d=i[4],p=i[7],m=i[2],g=i[5],v=i[8],y=r[0],S=r[3],T=r[6],w=r[1],E=r[4],$=r[7],A=r[2],I=r[5],D=r[8];return o[0]=a*y+l*w+u*A,o[3]=a*S+l*E+u*I,o[6]=a*T+l*$+u*D,o[1]=h*y+d*w+p*A,o[4]=h*S+d*E+p*I,o[7]=h*T+d*$+p*D,o[2]=m*y+g*w+v*A,o[5]=m*S+g*E+v*I,o[8]=m*T+g*$+v*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],d=e[8];return t*a*d-t*l*h-i*o*d+i*l*u+r*o*h-r*a*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],d=e[8],p=d*a-l*h,m=l*u-d*o,g=h*o-a*u,v=t*p+i*m+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=p*y,e[1]=(r*h-d*i)*y,e[2]=(l*i-r*a)*y,e[3]=m*y,e[4]=(d*t-r*u)*y,e[5]=(r*o-l*t)*y,e[6]=g*y,e[7]=(i*u-h*t)*y,e[8]=(a*t-i*o)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,a,l){const u=Math.cos(o),h=Math.sin(o);return this.set(i*u,i*h,-i*(u*a+h*l)+a+e,-r*h,r*u,-r*(-h*a+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(rM.makeScale(e,t)),this}rotate(e){return this.premultiply(rM.makeRotation(-e)),this}translate(e,t){return this.premultiply(rM.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const rM=new vs;function Zj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const mce={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function y0(n,e){return new mce[n](e)}function TS(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class Jr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,a,l){let u=i[r+0],h=i[r+1],d=i[r+2],p=i[r+3];const m=o[a+0],g=o[a+1],v=o[a+2],y=o[a+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=d,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=g,e[t+2]=v,e[t+3]=y;return}if(p!==y||u!==m||h!==g||d!==v){let S=1-l;const T=u*m+h*g+d*v+p*y,w=T>=0?1:-1,E=1-T*T;if(E>Number.EPSILON){const A=Math.sqrt(E),I=Math.atan2(A,T*w);S=Math.sin(S*I)/A,l=Math.sin(l*I)/A}const $=l*w;if(u=u*S+m*$,h=h*S+g*$,d=d*S+v*$,p=p*S+y*$,S===1-l){const A=1/Math.sqrt(u*u+h*h+d*d+p*p);u*=A,h*=A,d*=A,p*=A}}e[t]=u,e[t+1]=h,e[t+2]=d,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,o,a){const l=i[r],u=i[r+1],h=i[r+2],d=i[r+3],p=o[a],m=o[a+1],g=o[a+2],v=o[a+3];return e[t]=l*v+d*p+u*g-h*m,e[t+1]=u*v+d*m+h*p-l*g,e[t+2]=h*v+d*g+l*m-u*p,e[t+3]=d*v-l*p-u*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,o=e._z,a=e._order,l=Math.cos,u=Math.sin,h=l(i/2),d=l(r/2),p=l(o/2),m=u(i/2),g=u(r/2),v=u(o/2);switch(a){case"XYZ":this._x=m*d*p+h*g*v,this._y=h*g*p-m*d*v,this._z=h*d*v+m*g*p,this._w=h*d*p-m*g*v;break;case"YXZ":this._x=m*d*p+h*g*v,this._y=h*g*p-m*d*v,this._z=h*d*v-m*g*p,this._w=h*d*p+m*g*v;break;case"ZXY":this._x=m*d*p-h*g*v,this._y=h*g*p+m*d*v,this._z=h*d*v+m*g*p,this._w=h*d*p-m*g*v;break;case"ZYX":this._x=m*d*p-h*g*v,this._y=h*g*p+m*d*v,this._z=h*d*v-m*g*p,this._w=h*d*p+m*g*v;break;case"YZX":this._x=m*d*p+h*g*v,this._y=h*g*p+m*d*v,this._z=h*d*v-m*g*p,this._w=h*d*p-m*g*v;break;case"XZY":this._x=m*d*p-h*g*v,this._y=h*g*p-m*d*v,this._z=h*d*v+m*g*p,this._w=h*d*p+m*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],a=t[1],l=t[5],u=t[9],h=t[2],d=t[6],p=t[10],m=i+l+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-u)*g,this._y=(o-h)*g,this._z=(a-r)*g}else if(i>l&&i>p){const g=2*Math.sqrt(1+i-l-p);this._w=(d-u)/g,this._x=.25*g,this._y=(r+a)/g,this._z=(o+h)/g}else if(l>p){const g=2*Math.sqrt(1+l-i-p);this._w=(o-h)/g,this._x=(r+a)/g,this._y=.25*g,this._z=(u+d)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(a-r)/g,this._x=(o+h)/g,this._y=(u+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wr(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,a=e._w,l=t._x,u=t._y,h=t._z,d=t._w;return this._x=i*d+a*l+r*h-o*u,this._y=r*d+a*u+o*l-i*h,this._z=o*d+a*h+i*u-r*l,this._w=a*d-i*l-r*u-o*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,o=this._z,a=this._w;let l=a*e._w+i*e._x+r*e._y+o*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=r,this._z=o,this;const u=1-l*l;if(u<=Number.EPSILON){const g=1-t;return this._w=g*a+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(u),d=Math.atan2(h,l),p=Math.sin((1-t)*d)/h,m=Math.sin(t*d)/h;return this._w=a*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=o*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(o),i*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,i=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(F4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(F4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,a=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*a,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*a,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,a=e.y,l=e.z,u=e.w,h=u*t+a*r-l*i,d=u*i+l*t-o*r,p=u*r+o*i-a*t,m=-o*t-a*i-l*r;return this.x=h*u+m*-o+d*-l-p*-a,this.y=d*u+m*-a+p*-o-h*-l,this.z=p*u+m*-l+h*-a-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,a=t.x,l=t.y,u=t.z;return this.x=r*u-o*l,this.y=o*a-i*u,this.z=i*l-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sM.copy(this).projectOnVector(e),this.sub(sM)}reflect(e){return this.sub(sM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(wr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sM=new he,F4=new Jr;function W0(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const gce=new vs().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),_ce=new vs().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),af=new he;function Oce(n){return n.convertSRGBToLinear(),af.set(n.r,n.g,n.b).applyMatrix3(_ce),n.setRGB(af.x,af.y,af.z)}function vce(n){return af.set(n.r,n.g,n.b).applyMatrix3(gce),n.setRGB(af.x,af.y,af.z).convertLinearToSRGB()}const yce={[hO]:n=>n,[cc]:n=>n.convertSRGBToLinear(),[VB]:Oce},bce={[hO]:n=>n,[cc]:n=>n.convertLinearToSRGB(),[VB]:vce},oo={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return hO},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=yce[e],r=bce[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let I_;class XB{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{I_===void 0&&(I_=TS("canvas")),I_.width=e.width,I_.height=e.height;const i=I_.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=I_}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=TS("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let a=0;a<o.length;a++)o[a]=W0(o[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(W0(t[i]/255)*255):t[i]=W0(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class wm{constructor(e=null){this.isSource=!0,this.uuid=Ga(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?o.push(aM(r[a].image)):o.push(aM(r[a]))}else o=aM(r);i.url=o}return t||(e.images[this.uuid]=i),i}}function aM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XB.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Sce=0;class Ri extends Pu{constructor(e=Ri.DEFAULT_IMAGE,t=Ri.DEFAULT_MAPPING,i=zs,r=zs,o=hi,a=Iu,l=ra,u=jh,h=Ri.DEFAULT_ANISOTROPY,d=Yh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Sce++}),this.uuid=Ga(),this.name="",this.source=new wm(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new nt(0,0),this.repeat=new nt(1,1),this.center=new nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pf:e.x=e.x-Math.floor(e.x);break;case zs:e.x=e.x<0?0:1;break;case cO:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pf:e.y=e.y-Math.floor(e.y);break;case zs:e.y=e.y<0?0:1;break;case cO:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Ri.DEFAULT_IMAGE=null;Ri.DEFAULT_MAPPING=yA;Ri.DEFAULT_ANISOTROPY=1;class Fn{constructor(e=0,t=0,i=0,r=1){Fn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*o,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*o,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*o,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const u=e.elements,h=u[0],d=u[4],p=u[8],m=u[1],g=u[5],v=u[9],y=u[2],S=u[6],T=u[10];if(Math.abs(d-m)<.01&&Math.abs(p-y)<.01&&Math.abs(v-S)<.01){if(Math.abs(d+m)<.1&&Math.abs(p+y)<.1&&Math.abs(v+S)<.1&&Math.abs(h+g+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(h+1)/2,$=(g+1)/2,A=(T+1)/2,I=(d+m)/4,D=(p+y)/4,R=(v+S)/4;return E>$&&E>A?E<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(E),r=I/i,o=D/i):$>A?$<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt($),i=I/r,o=R/r):A<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(A),i=D/o,r=R/o),this.set(i,r,o,t),this}let w=Math.sqrt((S-v)*(S-v)+(p-y)*(p-y)+(m-d)*(m-d));return Math.abs(w)<.001&&(w=1),this.x=(S-v)/w,this.y=(p-y)/w,this.z=(m-d)/w,this.w=Math.acos((h+g+T-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rl extends Pu{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Fn(0,0,e,t),this.scissorTest=!1,this.viewport=new Fn(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Ri(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:hi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new wm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wA extends Ri{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=fr,this.minFilter=fr,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tce extends Rl{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new wA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jB extends Ri{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=fr,this.minFilter=fr,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wce extends Rl{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new jB(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ece extends Rl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=o.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Za{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,o=-1/0,a=-1/0,l=-1/0;for(let u=0,h=e.length;u<h;u+=3){const d=e[u],p=e[u+1],m=e[u+2];d<t&&(t=d),p<i&&(i=p),m<r&&(r=m),d>o&&(o=d),p>a&&(a=p),m>l&&(l=m)}return this.min.set(t,i,r),this.max.set(o,a,l),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,o=-1/0,a=-1/0,l=-1/0;for(let u=0,h=e.count;u<h;u++){const d=e.getX(u),p=e.getY(u),m=e.getZ(u);d<t&&(t=d),p<i&&(i=p),m<r&&(r=m),d>o&&(o=d),p>a&&(a=p),m>l&&(l=m)}return this.min.set(t,i,r),this.max.set(o,a,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=zp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let a=0,l=o.count;a<l;a++)zp.fromBufferAttribute(o,a).applyMatrix4(e.matrixWorld),this.expandByPoint(zp)}else i.boundingBox===null&&i.computeBoundingBox(),lM.copy(i.boundingBox),lM.applyMatrix4(e.matrixWorld),this.union(lM);const r=e.children;for(let o=0,a=r.length;o<a;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zp),zp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ly),Yw.subVectors(this.max,Ly),R_.subVectors(e.a,Ly),M_.subVectors(e.b,Ly),P_.subVectors(e.c,Ly),Gd.subVectors(M_,R_),Wd.subVectors(P_,M_),Qp.subVectors(R_,P_);let t=[0,-Gd.z,Gd.y,0,-Wd.z,Wd.y,0,-Qp.z,Qp.y,Gd.z,0,-Gd.x,Wd.z,0,-Wd.x,Qp.z,0,-Qp.x,-Gd.y,Gd.x,0,-Wd.y,Wd.x,0,-Qp.y,Qp.x,0];return!cM(t,R_,M_,P_,Yw)||(t=[1,0,0,0,1,0,0,0,1],!cM(t,R_,M_,P_,Yw))?!1:(Zw.crossVectors(Gd,Wd),t=[Zw.x,Zw.y,Zw.z],cM(t,R_,M_,P_,Yw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zp).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zp).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vh=[new he,new he,new he,new he,new he,new he,new he,new he],zp=new he,lM=new Za,R_=new he,M_=new he,P_=new he,Gd=new he,Wd=new he,Qp=new he,Ly=new he,Yw=new he,Zw=new he,Vp=new he;function cM(n,e,t,i,r){for(let o=0,a=n.length-3;o<=a;o+=3){Vp.fromArray(n,o);const l=r.x*Math.abs(Vp.x)+r.y*Math.abs(Vp.y)+r.z*Math.abs(Vp.z),u=e.dot(Vp),h=t.dot(Vp),d=i.dot(Vp);if(Math.max(-Math.max(u,h,d),Math.min(u,h,d))>l)return!1}return!0}const xce=new Za,Ny=new he,uM=new he;let wc=class{constructor(e=new he,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):xce.setFromPoints(e).getCenter(i);let r=0;for(let o=0,a=e.length;o<a;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ny.subVectors(e,this.center);const t=Ny.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Ny,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ny.copy(e.center).add(uM)),this.expandByPoint(Ny.copy(e.center).sub(uM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const yh=new he,hM=new he,qw=new he,zd=new he,dM=new he,Jw=new he,fM=new he;class OT{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yh.copy(this.origin).addScaledVector(this.direction,t),yh.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){hM.copy(e).add(t).multiplyScalar(.5),qw.copy(t).sub(e).normalize(),zd.copy(this.origin).sub(hM);const o=e.distanceTo(t)*.5,a=-this.direction.dot(qw),l=zd.dot(this.direction),u=-zd.dot(qw),h=zd.lengthSq(),d=Math.abs(1-a*a);let p,m,g,v;if(d>0)if(p=a*u-l,m=a*l-u,v=o*d,p>=0)if(m>=-v)if(m<=v){const y=1/d;p*=y,m*=y,g=p*(p+a*m+2*l)+m*(a*p+m+2*u)+h}else m=o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*u)+h;else m=-o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*u)+h;else m<=-v?(p=Math.max(0,-(-a*o+l)),m=p>0?-o:Math.min(Math.max(-o,-u),o),g=-p*p+m*(m+2*u)+h):m<=v?(p=0,m=Math.min(Math.max(-o,-u),o),g=m*(m+2*u)+h):(p=Math.max(0,-(a*o+l)),m=p>0?o:Math.min(Math.max(-o,-u),o),g=-p*p+m*(m+2*u)+h);else m=a>0?-o:o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(hM).addScaledVector(qw,m),g}intersectSphere(e,t){yh.subVectors(e.center,this.origin);const i=yh.dot(this.direction),r=yh.dot(yh)-i*i,o=e.radius*e.radius;if(r>o)return null;const a=Math.sqrt(o-r),l=i-a,u=i+a;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,a,l,u;const h=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h>=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),d>=0?(o=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(o=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),i>a||o>r||((o>i||isNaN(i))&&(i=o),(a<r||isNaN(r))&&(r=a),p>=0?(l=(e.min.z-m.z)*p,u=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,u=(e.min.z-m.z)*p),i>u||l>r)||((l>i||i!==i)&&(i=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,yh)!==null}intersectTriangle(e,t,i,r,o){dM.subVectors(t,e),Jw.subVectors(i,e),fM.crossVectors(dM,Jw);let a=this.direction.dot(fM),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;zd.subVectors(this.origin,e);const u=l*this.direction.dot(Jw.crossVectors(zd,Jw));if(u<0)return null;const h=l*this.direction.dot(dM.cross(zd));if(h<0||u+h>a)return null;const d=-l*zd.dot(fM);return d<0?null:this.at(d/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hn{constructor(){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,o,a,l,u,h,d,p,m,g,v,y,S){const T=this.elements;return T[0]=e,T[4]=t,T[8]=i,T[12]=r,T[1]=o,T[5]=a,T[9]=l,T[13]=u,T[2]=h,T[6]=d,T[10]=p,T[14]=m,T[3]=g,T[7]=v,T[11]=y,T[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/D_.setFromMatrixColumn(e,0).length(),o=1/D_.setFromMatrixColumn(e,1).length(),a=1/D_.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,o=e.z,a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r),d=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const m=a*d,g=a*p,v=l*d,y=l*p;t[0]=u*d,t[4]=-u*p,t[8]=h,t[1]=g+v*h,t[5]=m-y*h,t[9]=-l*u,t[2]=y-m*h,t[6]=v+g*h,t[10]=a*u}else if(e.order==="YXZ"){const m=u*d,g=u*p,v=h*d,y=h*p;t[0]=m+y*l,t[4]=v*l-g,t[8]=a*h,t[1]=a*p,t[5]=a*d,t[9]=-l,t[2]=g*l-v,t[6]=y+m*l,t[10]=a*u}else if(e.order==="ZXY"){const m=u*d,g=u*p,v=h*d,y=h*p;t[0]=m-y*l,t[4]=-a*p,t[8]=v+g*l,t[1]=g+v*l,t[5]=a*d,t[9]=y-m*l,t[2]=-a*h,t[6]=l,t[10]=a*u}else if(e.order==="ZYX"){const m=a*d,g=a*p,v=l*d,y=l*p;t[0]=u*d,t[4]=v*h-g,t[8]=m*h+y,t[1]=u*p,t[5]=y*h+m,t[9]=g*h-v,t[2]=-h,t[6]=l*u,t[10]=a*u}else if(e.order==="YZX"){const m=a*u,g=a*h,v=l*u,y=l*h;t[0]=u*d,t[4]=y-m*p,t[8]=v*p+g,t[1]=p,t[5]=a*d,t[9]=-l*d,t[2]=-h*d,t[6]=g*p+v,t[10]=m-y*p}else if(e.order==="XZY"){const m=a*u,g=a*h,v=l*u,y=l*h;t[0]=u*d,t[4]=-p,t[8]=h*d,t[1]=m*p+y,t[5]=a*d,t[9]=g*p-v,t[2]=v*p-g,t[6]=l*d,t[10]=y*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($ce,e,Cce)}lookAt(e,t,i){const r=this.elements;return Ia.subVectors(e,t),Ia.lengthSq()===0&&(Ia.z=1),Ia.normalize(),Qd.crossVectors(i,Ia),Qd.lengthSq()===0&&(Math.abs(i.z)===1?Ia.x+=1e-4:Ia.z+=1e-4,Ia.normalize(),Qd.crossVectors(i,Ia)),Qd.normalize(),Kw.crossVectors(Ia,Qd),r[0]=Qd.x,r[4]=Kw.x,r[8]=Ia.x,r[1]=Qd.y,r[5]=Kw.y,r[9]=Ia.y,r[2]=Qd.z,r[6]=Kw.z,r[10]=Ia.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,a=i[0],l=i[4],u=i[8],h=i[12],d=i[1],p=i[5],m=i[9],g=i[13],v=i[2],y=i[6],S=i[10],T=i[14],w=i[3],E=i[7],$=i[11],A=i[15],I=r[0],D=r[4],R=r[8],B=r[12],G=r[1],Z=r[5],N=r[9],H=r[13],M=r[2],K=r[6],re=r[10],ce=r[14],X=r[3],Q=r[7],ee=r[11],z=r[15];return o[0]=a*I+l*G+u*M+h*X,o[4]=a*D+l*Z+u*K+h*Q,o[8]=a*R+l*N+u*re+h*ee,o[12]=a*B+l*H+u*ce+h*z,o[1]=d*I+p*G+m*M+g*X,o[5]=d*D+p*Z+m*K+g*Q,o[9]=d*R+p*N+m*re+g*ee,o[13]=d*B+p*H+m*ce+g*z,o[2]=v*I+y*G+S*M+T*X,o[6]=v*D+y*Z+S*K+T*Q,o[10]=v*R+y*N+S*re+T*ee,o[14]=v*B+y*H+S*ce+T*z,o[3]=w*I+E*G+$*M+A*X,o[7]=w*D+E*Z+$*K+A*Q,o[11]=w*R+E*N+$*re+A*ee,o[15]=w*B+E*H+$*ce+A*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],a=e[1],l=e[5],u=e[9],h=e[13],d=e[2],p=e[6],m=e[10],g=e[14],v=e[3],y=e[7],S=e[11],T=e[15];return v*(+o*u*p-r*h*p-o*l*m+i*h*m+r*l*g-i*u*g)+y*(+t*u*g-t*h*m+o*a*m-r*a*g+r*h*d-o*u*d)+S*(+t*h*p-t*l*g-o*a*p+i*a*g+o*l*d-i*h*d)+T*(-r*l*d-t*u*p+t*l*m+r*a*p-i*a*m+i*u*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],d=e[8],p=e[9],m=e[10],g=e[11],v=e[12],y=e[13],S=e[14],T=e[15],w=p*S*h-y*m*h+y*u*g-l*S*g-p*u*T+l*m*T,E=v*m*h-d*S*h-v*u*g+a*S*g+d*u*T-a*m*T,$=d*y*h-v*p*h+v*l*g-a*y*g-d*l*T+a*p*T,A=v*p*u-d*y*u-v*l*m+a*y*m+d*l*S-a*p*S,I=t*w+i*E+r*$+o*A;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/I;return e[0]=w*D,e[1]=(y*m*o-p*S*o-y*r*g+i*S*g+p*r*T-i*m*T)*D,e[2]=(l*S*o-y*u*o+y*r*h-i*S*h-l*r*T+i*u*T)*D,e[3]=(p*u*o-l*m*o-p*r*h+i*m*h+l*r*g-i*u*g)*D,e[4]=E*D,e[5]=(d*S*o-v*m*o+v*r*g-t*S*g-d*r*T+t*m*T)*D,e[6]=(v*u*o-a*S*o-v*r*h+t*S*h+a*r*T-t*u*T)*D,e[7]=(a*m*o-d*u*o+d*r*h-t*m*h-a*r*g+t*u*g)*D,e[8]=$*D,e[9]=(v*p*o-d*y*o-v*i*g+t*y*g+d*i*T-t*p*T)*D,e[10]=(a*y*o-v*l*o+v*i*h-t*y*h-a*i*T+t*l*T)*D,e[11]=(d*l*o-a*p*o-d*i*h+t*p*h+a*i*g-t*l*g)*D,e[12]=A*D,e[13]=(d*y*r-v*p*r+v*i*m-t*y*m-d*i*S+t*p*S)*D,e[14]=(v*l*r-a*y*r-v*i*u+t*y*u+a*i*S-t*l*S)*D,e[15]=(a*p*r-d*l*r+d*i*u-t*p*u-a*i*m+t*l*m)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,a=e.x,l=e.y,u=e.z,h=o*a,d=o*l;return this.set(h*a+i,h*l-r*u,h*u+r*l,0,h*l+r*u,d*l+i,d*u-r*a,0,h*u-r*l,d*u+r*a,o*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,a){return this.set(1,i,o,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,a=t._y,l=t._z,u=t._w,h=o+o,d=a+a,p=l+l,m=o*h,g=o*d,v=o*p,y=a*d,S=a*p,T=l*p,w=u*h,E=u*d,$=u*p,A=i.x,I=i.y,D=i.z;return r[0]=(1-(y+T))*A,r[1]=(g+$)*A,r[2]=(v-E)*A,r[3]=0,r[4]=(g-$)*I,r[5]=(1-(m+T))*I,r[6]=(S+w)*I,r[7]=0,r[8]=(v+E)*D,r[9]=(S-w)*D,r[10]=(1-(m+y))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=D_.set(r[0],r[1],r[2]).length();const a=D_.set(r[4],r[5],r[6]).length(),l=D_.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],nc.copy(this);const h=1/o,d=1/a,p=1/l;return nc.elements[0]*=h,nc.elements[1]*=h,nc.elements[2]*=h,nc.elements[4]*=d,nc.elements[5]*=d,nc.elements[6]*=d,nc.elements[8]*=p,nc.elements[9]*=p,nc.elements[10]*=p,t.setFromRotationMatrix(nc),i.x=o,i.y=a,i.z=l,this}makePerspective(e,t,i,r,o,a){const l=this.elements,u=2*o/(t-e),h=2*o/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r),m=-(a+o)/(a-o),g=-2*a*o/(a-o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,a){const l=this.elements,u=1/(t-e),h=1/(i-r),d=1/(a-o),p=(t+e)*u,m=(i+r)*h,g=(a+o)*d;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=-2*d,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const D_=new he,nc=new hn,$ce=new he(0,0,0),Cce=new he(1,1,1),Qd=new he,Kw=new he,Ia=new he,U4=new hn,G4=new Jr;class vT{constructor(e=0,t=0,i=0,r=vT.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,o=r[0],a=r[4],l=r[8],u=r[1],h=r[5],d=r[9],p=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(wr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-wr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(wr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-wr(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(wr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-wr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return U4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(U4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return G4.setFromEuler(this),this.setFromQuaternion(G4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}vT.DEFAULT_ORDER="XYZ";let Lm=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Ace=0;const W4=new he,L_=new Jr,bh=new hn,eE=new he,By=new he,kce=new he,Ice=new Jr,z4=new he(1,0,0),Q4=new he(0,1,0),V4=new he(0,0,1),Rce={type:"added"},H4={type:"removed"};class Un extends Pu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ace++}),this.uuid=Ga(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Un.DEFAULT_UP.clone();const e=new he,t=new vT,i=new Jr,r=new he(1,1,1);function o(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new hn},normalMatrix:{value:new vs}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=Un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Lm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return L_.setFromAxisAngle(e,t),this.quaternion.multiply(L_),this}rotateOnWorldAxis(e,t){return L_.setFromAxisAngle(e,t),this.quaternion.premultiply(L_),this}rotateX(e){return this.rotateOnAxis(z4,e)}rotateY(e){return this.rotateOnAxis(Q4,e)}rotateZ(e){return this.rotateOnAxis(V4,e)}translateOnAxis(e,t){return W4.copy(e).applyQuaternion(this.quaternion),this.position.add(W4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(z4,e)}translateY(e){return this.translateOnAxis(Q4,e)}translateZ(e){return this.translateOnAxis(V4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(bh.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?eE.copy(e):eE.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),By.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?bh.lookAt(By,eE,this.up):bh.lookAt(eE,By,this.up),this.quaternion.setFromRotationMatrix(bh),r&&(bh.extractRotation(r.matrixWorld),L_.setFromRotationMatrix(bh),this.quaternion.premultiply(L_.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Rce)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(H4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(H4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),bh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),bh.multiply(e.parent.matrixWorld)),e.applyMatrix4(bh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(i=i.concat(a))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(By,e,kce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(By,Ice,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let o=0,a=r.length;o<a;o++){const l=r[o];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function o(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,d=u.length;h<d;h++){const p=u[h];o(e.shapes,p)}else o(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(o(e.materials,this.material[u]));r.material=l}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(o(e.animations,u))}}if(t){const l=a(e.geometries),u=a(e.materials),h=a(e.textures),d=a(e.images),p=a(e.shapes),m=a(e.skeletons),g=a(e.animations),v=a(e.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),d.length>0&&(i.images=d),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),v.length>0&&(i.nodes=v)}return i.object=r,i;function a(l){const u=[];for(const h in l){const d=l[h];delete d.metadata,u.push(d)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Un.DEFAULT_UP=new he(0,1,0);Un.DEFAULT_MATRIX_AUTO_UPDATE=!0;Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ic=new he,Sh=new he,pM=new he,Th=new he,N_=new he,B_=new he,X4=new he,mM=new he,gM=new he,_M=new he;class bl{constructor(e=new he,t=new he,i=new he){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ic.subVectors(e,t),r.cross(ic);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){ic.subVectors(r,t),Sh.subVectors(i,t),pM.subVectors(e,t);const a=ic.dot(ic),l=ic.dot(Sh),u=ic.dot(pM),h=Sh.dot(Sh),d=Sh.dot(pM),p=a*h-l*l;if(p===0)return o.set(-2,-1,-1);const m=1/p,g=(h*u-l*d)*m,v=(a*d-l*u)*m;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Th),Th.x>=0&&Th.y>=0&&Th.x+Th.y<=1}static getUV(e,t,i,r,o,a,l,u){return this.getBarycoord(e,t,i,r,Th),u.set(0,0),u.addScaledVector(o,Th.x),u.addScaledVector(a,Th.y),u.addScaledVector(l,Th.z),u}static isFrontFacing(e,t,i,r){return ic.subVectors(i,t),Sh.subVectors(e,t),ic.cross(Sh).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ic.subVectors(this.c,this.b),Sh.subVectors(this.a,this.b),ic.cross(Sh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return bl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,o){return bl.getUV(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return bl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let a,l;N_.subVectors(r,i),B_.subVectors(o,i),mM.subVectors(e,i);const u=N_.dot(mM),h=B_.dot(mM);if(u<=0&&h<=0)return t.copy(i);gM.subVectors(e,r);const d=N_.dot(gM),p=B_.dot(gM);if(d>=0&&p<=d)return t.copy(r);const m=u*p-d*h;if(m<=0&&u>=0&&d<=0)return a=u/(u-d),t.copy(i).addScaledVector(N_,a);_M.subVectors(e,o);const g=N_.dot(_M),v=B_.dot(_M);if(v>=0&&g<=v)return t.copy(o);const y=g*h-u*v;if(y<=0&&h>=0&&v<=0)return l=h/(h-v),t.copy(i).addScaledVector(B_,l);const S=d*v-g*p;if(S<=0&&p-d>=0&&g-v>=0)return X4.subVectors(o,r),l=(p-d)/(p-d+(g-v)),t.copy(r).addScaledVector(X4,l);const T=1/(S+y+m);return a=y*T,l=m*T,t.copy(i).addScaledVector(N_,a).addScaledVector(B_,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Mce=0;class Br extends Pu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mce++}),this.uuid=Ga(),this.name="",this.type="Material",this.blending=Mm,this.side=Sc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=BB,this.blendDst=FB,this.blendEquation=lm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=X$,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Xj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jx,this.stencilZFail=jx,this.stencilZPass=jx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Mm&&(i.blending=this.blending),this.side!==Sc&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){const a=[];for(const l in o){const u=o[l];delete u.metadata,a.push(u)}return a}if(t){const o=r(e.textures),a=r(e.images);o.length>0&&(i.textures=o),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const qj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rc={h:0,s:0,l:0},tE={h:0,s:0,l:0};function OM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class pt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=cc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,oo.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=oo.workingColorSpace){return this.r=e,this.g=t,this.b=i,oo.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=oo.workingColorSpace){if(e=HB(e,1),t=wr(t,0,1),i=wr(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,a=2*i-o;this.r=OM(a,o,e+1/3),this.g=OM(a,o,e),this.b=OM(a,o,e-1/3)}return oo.toWorkingColorSpace(this,r),this}setStyle(e,t=cc){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,oo.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,oo.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const u=parseFloat(o[1])/360,h=parseFloat(o[2])/100,d=parseFloat(o[3])/100;return i(o[4]),this.setHSL(u,h,d,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],a=o.length;if(a===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,oo.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,oo.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=cc){const i=qj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=W0(e.r),this.g=W0(e.g),this.b=W0(e.b),this}copyLinearToSRGB(e){return this.r=oM(e.r),this.g=oM(e.g),this.b=oM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=cc){return oo.fromWorkingColorSpace(so.copy(this),e),wr(so.r*255,0,255)<<16^wr(so.g*255,0,255)<<8^wr(so.b*255,0,255)<<0}getHexString(e=cc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=oo.workingColorSpace){oo.fromWorkingColorSpace(so.copy(this),t);const i=so.r,r=so.g,o=so.b,a=Math.max(i,r,o),l=Math.min(i,r,o);let u,h;const d=(l+a)/2;if(l===a)u=0,h=0;else{const p=a-l;switch(h=d<=.5?p/(a+l):p/(2-a-l),a){case i:u=(r-o)/p+(r<o?6:0);break;case r:u=(o-i)/p+2;break;case o:u=(i-r)/p+4;break}u/=6}return e.h=u,e.s=h,e.l=d,e}getRGB(e,t=oo.workingColorSpace){return oo.fromWorkingColorSpace(so.copy(this),t),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=cc){oo.fromWorkingColorSpace(so.copy(this),e);const t=so.r,i=so.g,r=so.b;return e!==cc?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${t*255|0},${i*255|0},${r*255|0})`}offsetHSL(e,t,i){return this.getHSL(rc),rc.h+=e,rc.s+=t,rc.l+=i,this.setHSL(rc.h,rc.s,rc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(rc),e.getHSL(tE);const i=Pb(rc.h,tE.h,t),r=Pb(rc.s,tE.s,t),o=Pb(rc.l,tE.l,t);return this.setHSL(i,r,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const so=new pt;pt.NAMES=qj;class Ro extends Br{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rr=new he,nE=new nt;class ei{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=bS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)nE.fromBufferAttribute(this,t),nE.applyMatrix3(e),this.setXY(t,nE.x,nE.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix3(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix4(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyNormalMatrix(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.transformDirection(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Lh(t,this.array)),t}setX(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Lh(t,this.array)),t}setY(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Lh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Lh(t,this.array)),t}setW(e,t){return this.normalized&&(t=ci(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array),r=ci(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array),r=ci(r,this.array),o=ci(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Pce extends ei{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Dce extends ei{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Lce extends ei{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Nce extends ei{constructor(e,t,i){super(new Int16Array(e),t,i)}}class YB extends ei{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Bce extends ei{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ZB extends ei{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Fce extends ei{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Gt extends ei{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Uce extends ei{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Gce=0;const pl=new hn,vM=new Un,F_=new he,Ra=new Za,Fy=new Za,gs=new he;class On extends Pu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gce++}),this.uuid=Ga(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Zj(e)?ZB:YB)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new vs().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pl.makeRotationFromQuaternion(e),this.applyMatrix4(pl),this}rotateX(e){return pl.makeRotationX(e),this.applyMatrix4(pl),this}rotateY(e){return pl.makeRotationY(e),this.applyMatrix4(pl),this}rotateZ(e){return pl.makeRotationZ(e),this.applyMatrix4(pl),this}translate(e,t,i){return pl.makeTranslation(e,t,i),this.applyMatrix4(pl),this}scale(e,t,i){return pl.makeScale(e,t,i),this.applyMatrix4(pl),this}lookAt(e){return vM.lookAt(e),vM.updateMatrix(),this.applyMatrix4(vM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(F_).negate(),this.translate(F_.x,F_.y,F_.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Za);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const o=t[i];Ra.setFromBufferAttribute(o),this.morphTargetsRelative?(gs.addVectors(this.boundingBox.min,Ra.min),this.boundingBox.expandByPoint(gs),gs.addVectors(this.boundingBox.max,Ra.max),this.boundingBox.expandByPoint(gs)):(this.boundingBox.expandByPoint(Ra.min),this.boundingBox.expandByPoint(Ra.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new he,1/0);return}if(e){const i=this.boundingSphere.center;if(Ra.setFromBufferAttribute(e),t)for(let o=0,a=t.length;o<a;o++){const l=t[o];Fy.setFromBufferAttribute(l),this.morphTargetsRelative?(gs.addVectors(Ra.min,Fy.min),Ra.expandByPoint(gs),gs.addVectors(Ra.max,Fy.max),Ra.expandByPoint(gs)):(Ra.expandByPoint(Fy.min),Ra.expandByPoint(Fy.max))}Ra.getCenter(i);let r=0;for(let o=0,a=e.count;o<a;o++)gs.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(gs));if(t)for(let o=0,a=t.length;o<a;o++){const l=t[o],u=this.morphTargetsRelative;for(let h=0,d=l.count;h<d;h++)gs.fromBufferAttribute(l,h),u&&(F_.fromBufferAttribute(e,h),gs.add(F_)),r=Math.max(r,i.distanceToSquared(gs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,o=t.normal.array,a=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ei(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,h=[],d=[];for(let G=0;G<l;G++)h[G]=new he,d[G]=new he;const p=new he,m=new he,g=new he,v=new nt,y=new nt,S=new nt,T=new he,w=new he;function E(G,Z,N){p.fromArray(r,G*3),m.fromArray(r,Z*3),g.fromArray(r,N*3),v.fromArray(a,G*2),y.fromArray(a,Z*2),S.fromArray(a,N*2),m.sub(p),g.sub(p),y.sub(v),S.sub(v);const H=1/(y.x*S.y-S.x*y.y);isFinite(H)&&(T.copy(m).multiplyScalar(S.y).addScaledVector(g,-y.y).multiplyScalar(H),w.copy(g).multiplyScalar(y.x).addScaledVector(m,-S.x).multiplyScalar(H),h[G].add(T),h[Z].add(T),h[N].add(T),d[G].add(w),d[Z].add(w),d[N].add(w))}let $=this.groups;$.length===0&&($=[{start:0,count:i.length}]);for(let G=0,Z=$.length;G<Z;++G){const N=$[G],H=N.start,M=N.count;for(let K=H,re=H+M;K<re;K+=3)E(i[K+0],i[K+1],i[K+2])}const A=new he,I=new he,D=new he,R=new he;function B(G){D.fromArray(o,G*3),R.copy(D);const Z=h[G];A.copy(Z),A.sub(D.multiplyScalar(D.dot(Z))).normalize(),I.crossVectors(R,Z);const H=I.dot(d[G])<0?-1:1;u[G*4]=A.x,u[G*4+1]=A.y,u[G*4+2]=A.z,u[G*4+3]=H}for(let G=0,Z=$.length;G<Z;++G){const N=$[G],H=N.start,M=N.count;for(let K=H,re=H+M;K<re;K+=3)B(i[K+0]),B(i[K+1]),B(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ei(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new he,o=new he,a=new he,l=new he,u=new he,h=new he,d=new he,p=new he;if(e)for(let m=0,g=e.count;m<g;m+=3){const v=e.getX(m+0),y=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),a.fromBufferAttribute(t,S),d.subVectors(a,o),p.subVectors(r,o),d.cross(p),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,y),h.fromBufferAttribute(i,S),l.add(d),u.add(d),h.add(d),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z),i.setXYZ(S,h.x,h.y,h.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),o.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),d.subVectors(a,o),p.subVectors(r,o),d.cross(p),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)gs.fromBufferAttribute(e,t),gs.normalize(),e.setXYZ(t,gs.x,gs.y,gs.z)}toNonIndexed(){function e(l,u){const h=l.array,d=l.itemSize,p=l.normalized,m=new h.constructor(u.length*d);let g=0,v=0;for(let y=0,S=u.length;y<S;y++){l.isInterleavedBufferAttribute?g=u[y]*l.data.stride+l.offset:g=u[y]*d;for(let T=0;T<d;T++)m[v++]=h[g++]}return new ei(m,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new On,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],h=e(u,i);t.setAttribute(l,h)}const o=this.morphAttributes;for(const l in o){const u=[],h=o[l];for(let d=0,p=h.length;d<p;d++){const m=h[d],g=e(m,i);u.push(g)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const h=a[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let o=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],d=[];for(let p=0,m=h.length;p<m;p++){const g=h[p];d.push(g.toJSON(e.data))}d.length>0&&(r[u]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const h in r){const d=r[h];this.setAttribute(h,d.clone(t))}const o=e.morphAttributes;for(const h in o){const d=[],p=o[h];for(let m=0,g=p.length;m<g;m++)d.push(p[m].clone(t));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,d=a.length;h<d;h++){const p=a[h];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const j4=new hn,tu=new OT,iE=new wc,Y4=new he,Uy=new he,Gy=new he,Wy=new he,yM=new he,rE=new he,sE=new nt,oE=new nt,aE=new nt,bM=new he,lE=new he;class nr extends Un{constructor(e=new On,t=new Ro){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=r.length;o<a;o++){const l=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(o&&l){rE.set(0,0,0);for(let u=0,h=o.length;u<h;u++){const d=l[u],p=o[u];d!==0&&(yM.fromBufferAttribute(p,e),a?rE.addScaledVector(yM,d):rE.addScaledVector(yM.sub(t),d))}t.add(rE)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,o=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),iE.copy(i.boundingSphere),iE.applyMatrix4(o),tu.copy(e.ray).recast(e.near),iE.containsPoint(tu.origin)===!1&&(tu.intersectSphere(iE,Y4)===null||tu.origin.distanceToSquared(Y4)>(e.far-e.near)**2))||(j4.copy(o).invert(),tu.copy(e.ray).applyMatrix4(j4),i.boundingBox!==null&&tu.intersectsBox(i.boundingBox)===!1))return;let a;const l=i.index,u=i.attributes.position,h=i.attributes.uv,d=i.attributes.uv2,p=i.groups,m=i.drawRange;if(l!==null)if(Array.isArray(r))for(let g=0,v=p.length;g<v;g++){const y=p[g],S=r[y.materialIndex],T=Math.max(y.start,m.start),w=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=T,$=w;E<$;E+=3){const A=l.getX(E),I=l.getX(E+1),D=l.getX(E+2);a=cE(this,S,e,tu,h,d,A,I,D),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=y.materialIndex,t.push(a))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let y=g,S=v;y<S;y+=3){const T=l.getX(y),w=l.getX(y+1),E=l.getX(y+2);a=cE(this,r,e,tu,h,d,T,w,E),a&&(a.faceIndex=Math.floor(y/3),t.push(a))}}else if(u!==void 0)if(Array.isArray(r))for(let g=0,v=p.length;g<v;g++){const y=p[g],S=r[y.materialIndex],T=Math.max(y.start,m.start),w=Math.min(u.count,Math.min(y.start+y.count,m.start+m.count));for(let E=T,$=w;E<$;E+=3){const A=E,I=E+1,D=E+2;a=cE(this,S,e,tu,h,d,A,I,D),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=y.materialIndex,t.push(a))}}else{const g=Math.max(0,m.start),v=Math.min(u.count,m.start+m.count);for(let y=g,S=v;y<S;y+=3){const T=y,w=y+1,E=y+2;a=cE(this,r,e,tu,h,d,T,w,E),a&&(a.faceIndex=Math.floor(y/3),t.push(a))}}}}function Wce(n,e,t,i,r,o,a,l){let u;if(e.side===Xs?u=i.intersectTriangle(a,o,r,!0,l):u=i.intersectTriangle(r,o,a,e.side===Sc,l),u===null)return null;lE.copy(l),lE.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(lE);return h<t.near||h>t.far?null:{distance:h,point:lE.clone(),object:n}}function cE(n,e,t,i,r,o,a,l,u){n.getVertexPosition(a,Uy),n.getVertexPosition(l,Gy),n.getVertexPosition(u,Wy);const h=Wce(n,e,t,i,Uy,Gy,Wy,bM);if(h){r&&(sE.fromBufferAttribute(r,a),oE.fromBufferAttribute(r,l),aE.fromBufferAttribute(r,u),h.uv=bl.getUV(bM,Uy,Gy,Wy,sE,oE,aE,new nt)),o&&(sE.fromBufferAttribute(o,a),oE.fromBufferAttribute(o,l),aE.fromBufferAttribute(o,u),h.uv2=bl.getUV(bM,Uy,Gy,Wy,sE,oE,aE,new nt));const d={a,b:l,c:u,normal:new he,materialIndex:0};bl.getNormal(Uy,Gy,Wy,d.normal),h.face=d}return h}class rd extends On{constructor(e=1,t=1,i=1,r=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:a};const l=this;r=Math.floor(r),o=Math.floor(o),a=Math.floor(a);const u=[],h=[],d=[],p=[];let m=0,g=0;v("z","y","x",-1,-1,i,t,e,a,o,0),v("z","y","x",1,-1,i,t,-e,a,o,1),v("x","z","y",1,1,e,i,t,r,a,2),v("x","z","y",1,-1,e,i,-t,r,a,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(u),this.setAttribute("position",new Gt(h,3)),this.setAttribute("normal",new Gt(d,3)),this.setAttribute("uv",new Gt(p,2));function v(y,S,T,w,E,$,A,I,D,R,B){const G=$/D,Z=A/R,N=$/2,H=A/2,M=I/2,K=D+1,re=R+1;let ce=0,X=0;const Q=new he;for(let ee=0;ee<re;ee++){const z=ee*Z-H;for(let L=0;L<K;L++){const le=L*G-N;Q[y]=le*w,Q[S]=z*E,Q[T]=M,h.push(Q.x,Q.y,Q.z),Q[y]=0,Q[S]=0,Q[T]=I>0?1:-1,d.push(Q.x,Q.y,Q.z),p.push(L/D),p.push(1-ee/R),ce+=1}}for(let ee=0;ee<R;ee++)for(let z=0;z<D;z++){const L=m+z+K*ee,le=m+z+K*(ee+1),de=m+(z+1)+K*(ee+1),ie=m+(z+1)+K*ee;u.push(L,le,ie),u.push(le,de,ie),X+=6}l.addGroup(g,X,B),g+=X,m+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dO(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Co(n){const e={};for(let t=0;t<n.length;t++){const i=dO(n[t]);for(const r in i)e[r]=i[r]}return e}function zce(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Jj(n){return n.getRenderTarget()===null&&n.outputEncoding===Nn?cc:hO}const pg={clone:dO,merge:Co};var Qce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Vce=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ha extends Br{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Qce,this.fragmentShader=Vce,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dO(e.uniforms),this.uniformsGroups=zce(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class yT extends Un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ci extends yT{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=SS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Dm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return SS*2*Math.atan(Math.tan(Dm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,o,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Dm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,h=a.fullHeight;o+=a.offsetX*r/u,t-=a.offsetY*i/h,r*=a.width/u,i*=a.height/h}const l=this.filmOffset;l!==0&&(o+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const U_=-90,G_=1;class Kj extends Un{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Ci(U_,G_,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const o=new Ci(U_,G_,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);const a=new Ci(U_,G_,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const l=new Ci(U_,G_,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(0,-1,0),this.add(l);const u=new Ci(U_,G_,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const h=new Ci(U_,G_,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,o,a,l,u,h]=this.children,d=e.getRenderTarget(),p=e.toneMapping,m=e.xr.enabled;e.toneMapping=Oc,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,u),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,h),e.setRenderTarget(d),e.toneMapping=p,e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class bT extends Ri{constructor(e,t,i,r,o,a,l,u,h,d){e=e!==void 0?e:[],t=t!==void 0?t:Rf,super(e,t,i,r,o,a,l,u,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class eY extends Rl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new bT(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:hi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new rd(5,5,5),o=new Ha({name:"CubemapFromEquirect",uniforms:dO(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xs,blending:Fh});o.uniforms.tEquirect.value=t;const a=new nr(r,o),l=t.minFilter;return t.minFilter===Iu&&(t.minFilter=hi),new Kj(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(o)}}const SM=new he,Hce=new he,Xce=new vs;let Ah=class{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=SM.subVectors(i,t).cross(Hce.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(SM),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Xce.getNormalMatrix(e),r=this.coplanarPoint(SM).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const W_=new wc,uE=new he;class EA{constructor(e=new Ah,t=new Ah,i=new Ah,r=new Ah,o=new Ah,a=new Ah){this.planes=[e,t,i,r,o,a]}set(e,t,i,r,o,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(o),l[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],o=i[1],a=i[2],l=i[3],u=i[4],h=i[5],d=i[6],p=i[7],m=i[8],g=i[9],v=i[10],y=i[11],S=i[12],T=i[13],w=i[14],E=i[15];return t[0].setComponents(l-r,p-u,y-m,E-S).normalize(),t[1].setComponents(l+r,p+u,y+m,E+S).normalize(),t[2].setComponents(l+o,p+h,y+g,E+T).normalize(),t[3].setComponents(l-o,p-h,y-g,E-T).normalize(),t[4].setComponents(l-a,p-d,y-v,E-w).normalize(),t[5].setComponents(l+a,p+d,y+v,E+w).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),W_.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(W_)}intersectsSprite(e){return W_.center.set(0,0,0),W_.radius=.7071067811865476,W_.applyMatrix4(e.matrixWorld),this.intersectsSphere(W_)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(uE.x=r.normal.x>0?e.max.x:e.min.x,uE.y=r.normal.y>0?e.max.y:e.min.y,uE.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(uE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function tY(){let n=null,e=!1,t=null,i=null;function r(o,a){t(o,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function jce(n,e){const t=e.isWebGL2,i=new WeakMap;function r(h,d){const p=h.array,m=h.usage,g=n.createBuffer();n.bindBuffer(d,g),n.bufferData(d,p,m),h.onUploadCallback();let v;if(p instanceof Float32Array)v=5126;else if(p instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)v=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=5123;else if(p instanceof Int16Array)v=5122;else if(p instanceof Uint32Array)v=5125;else if(p instanceof Int32Array)v=5124;else if(p instanceof Int8Array)v=5120;else if(p instanceof Uint8Array)v=5121;else if(p instanceof Uint8ClampedArray)v=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:g,type:v,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function o(h,d,p){const m=d.array,g=d.updateRange;n.bindBuffer(p,h),g.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1),d.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=i.get(h);d&&(n.deleteBuffer(d.buffer),i.delete(h))}function u(h,d){if(h.isGLBufferAttribute){const m=i.get(h);(!m||m.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const p=i.get(h);p===void 0?i.set(h,r(h,d)):p.version<h.version&&(o(p.buffer,h,d),p.version=h.version)}return{get:a,remove:l,update:u}}class sd extends On{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,a=t/2,l=Math.floor(i),u=Math.floor(r),h=l+1,d=u+1,p=e/l,m=t/u,g=[],v=[],y=[],S=[];for(let T=0;T<d;T++){const w=T*m-a;for(let E=0;E<h;E++){const $=E*p-o;v.push($,-w,0),y.push(0,0,1),S.push(E/l),S.push(1-T/u)}}for(let T=0;T<u;T++)for(let w=0;w<l;w++){const E=w+h*T,$=w+h*(T+1),A=w+1+h*(T+1),I=w+1+h*T;g.push(E,$,I),g.push($,A,I)}this.setIndex(g),this.setAttribute("position",new Gt(v,3)),this.setAttribute("normal",new Gt(y,3)),this.setAttribute("uv",new Gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sd(e.width,e.height,e.widthSegments,e.heightSegments)}}var Yce=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Zce=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qce=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Jce=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Kce=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eue=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tue="vec3 transformed = vec3( position );",nue=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,iue=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,rue=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,sue=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oue=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cue=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uue=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,due=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,fue=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,pue=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,mue=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gue=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_ue=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Oue=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,vue=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yue=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bue="gl_FragColor = linearToOutputTexel( gl_FragColor );",Sue=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Tue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,wue=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Eue=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xue=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$ue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Cue=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Aue=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kue=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Iue=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Rue=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Mue=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Pue=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Due=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Lue=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nue=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bue=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Fue=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Uue=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Gue=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Wue=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,zue=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Que=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Vue=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Hue=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Xue=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,jue=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Yue=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Zue=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,que=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Jue=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Kue=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ehe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,the=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nhe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ihe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rhe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,she=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,ohe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ahe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,lhe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,che=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,uhe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hhe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dhe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,fhe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,phe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,mhe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,ghe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,_he=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ohe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vhe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,yhe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,bhe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,She=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,The=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,whe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ehe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xhe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$he=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Che=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ahe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,khe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ihe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Rhe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Mhe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Phe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Dhe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Lhe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Nhe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Bhe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Fhe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Uhe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Ghe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Whe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,zhe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Qhe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Vhe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Hhe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Xhe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,jhe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Yhe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Zhe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qhe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jhe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Khe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ede=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,tde=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nde=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ide=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rde=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,sde=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ode=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ade=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,lde=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cde=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ude=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hde=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,dde=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fde=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pde=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,mde=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gde=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_de=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ode=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vde=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yde=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bde=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Sde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tde=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wde=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ede=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Sn={alphamap_fragment:Yce,alphamap_pars_fragment:Zce,alphatest_fragment:qce,alphatest_pars_fragment:Jce,aomap_fragment:Kce,aomap_pars_fragment:eue,begin_vertex:tue,beginnormal_vertex:nue,bsdfs:iue,iridescence_fragment:rue,bumpmap_pars_fragment:sue,clipping_planes_fragment:oue,clipping_planes_pars_fragment:aue,clipping_planes_pars_vertex:lue,clipping_planes_vertex:cue,color_fragment:uue,color_pars_fragment:hue,color_pars_vertex:due,color_vertex:fue,common:pue,cube_uv_reflection_fragment:mue,defaultnormal_vertex:gue,displacementmap_pars_vertex:_ue,displacementmap_vertex:Oue,emissivemap_fragment:vue,emissivemap_pars_fragment:yue,encodings_fragment:bue,encodings_pars_fragment:Sue,envmap_fragment:Tue,envmap_common_pars_fragment:wue,envmap_pars_fragment:Eue,envmap_pars_vertex:xue,envmap_physical_pars_fragment:Bue,envmap_vertex:$ue,fog_vertex:Cue,fog_pars_vertex:Aue,fog_fragment:kue,fog_pars_fragment:Iue,gradientmap_pars_fragment:Rue,lightmap_fragment:Mue,lightmap_pars_fragment:Pue,lights_lambert_fragment:Due,lights_lambert_pars_fragment:Lue,lights_pars_begin:Nue,lights_toon_fragment:Fue,lights_toon_pars_fragment:Uue,lights_phong_fragment:Gue,lights_phong_pars_fragment:Wue,lights_physical_fragment:zue,lights_physical_pars_fragment:Que,lights_fragment_begin:Vue,lights_fragment_maps:Hue,lights_fragment_end:Xue,logdepthbuf_fragment:jue,logdepthbuf_pars_fragment:Yue,logdepthbuf_pars_vertex:Zue,logdepthbuf_vertex:que,map_fragment:Jue,map_pars_fragment:Kue,map_particle_fragment:ehe,map_particle_pars_fragment:the,metalnessmap_fragment:nhe,metalnessmap_pars_fragment:ihe,morphcolor_vertex:rhe,morphnormal_vertex:she,morphtarget_pars_vertex:ohe,morphtarget_vertex:ahe,normal_fragment_begin:lhe,normal_fragment_maps:che,normal_pars_fragment:uhe,normal_pars_vertex:hhe,normal_vertex:dhe,normalmap_pars_fragment:fhe,clearcoat_normal_fragment_begin:phe,clearcoat_normal_fragment_maps:mhe,clearcoat_pars_fragment:ghe,iridescence_pars_fragment:_he,output_fragment:Ohe,packing:vhe,premultiplied_alpha_fragment:yhe,project_vertex:bhe,dithering_fragment:She,dithering_pars_fragment:The,roughnessmap_fragment:whe,roughnessmap_pars_fragment:Ehe,shadowmap_pars_fragment:xhe,shadowmap_pars_vertex:$he,shadowmap_vertex:Che,shadowmask_pars_fragment:Ahe,skinbase_vertex:khe,skinning_pars_vertex:Ihe,skinning_vertex:Rhe,skinnormal_vertex:Mhe,specularmap_fragment:Phe,specularmap_pars_fragment:Dhe,tonemapping_fragment:Lhe,tonemapping_pars_fragment:Nhe,transmission_fragment:Bhe,transmission_pars_fragment:Fhe,uv_pars_fragment:Uhe,uv_pars_vertex:Ghe,uv_vertex:Whe,uv2_pars_fragment:zhe,uv2_pars_vertex:Qhe,uv2_vertex:Vhe,worldpos_vertex:Hhe,background_vert:Xhe,background_frag:jhe,backgroundCube_vert:Yhe,backgroundCube_frag:Zhe,cube_vert:qhe,cube_frag:Jhe,depth_vert:Khe,depth_frag:ede,distanceRGBA_vert:tde,distanceRGBA_frag:nde,equirect_vert:ide,equirect_frag:rde,linedashed_vert:sde,linedashed_frag:ode,meshbasic_vert:ade,meshbasic_frag:lde,meshlambert_vert:cde,meshlambert_frag:ude,meshmatcap_vert:hde,meshmatcap_frag:dde,meshnormal_vert:fde,meshnormal_frag:pde,meshphong_vert:mde,meshphong_frag:gde,meshphysical_vert:_de,meshphysical_frag:Ode,meshtoon_vert:vde,meshtoon_frag:yde,points_vert:bde,points_frag:Sde,shadow_vert:Tde,shadow_frag:wde,sprite_vert:Ede,sprite_frag:xde},vt={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vs},uv2Transform:{value:new vs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vs}},sprite:{diffuse:{value:new pt(16777215)},opacity:{value:1},center:{value:new nt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vs}}},Io={basic:{uniforms:Co([vt.common,vt.specularmap,vt.envmap,vt.aomap,vt.lightmap,vt.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:Co([vt.common,vt.specularmap,vt.envmap,vt.aomap,vt.lightmap,vt.emissivemap,vt.bumpmap,vt.normalmap,vt.displacementmap,vt.fog,vt.lights,{emissive:{value:new pt(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:Co([vt.common,vt.specularmap,vt.envmap,vt.aomap,vt.lightmap,vt.emissivemap,vt.bumpmap,vt.normalmap,vt.displacementmap,vt.fog,vt.lights,{emissive:{value:new pt(0)},specular:{value:new pt(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:Co([vt.common,vt.envmap,vt.aomap,vt.lightmap,vt.emissivemap,vt.bumpmap,vt.normalmap,vt.displacementmap,vt.roughnessmap,vt.metalnessmap,vt.fog,vt.lights,{emissive:{value:new pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},toon:{uniforms:Co([vt.common,vt.aomap,vt.lightmap,vt.emissivemap,vt.bumpmap,vt.normalmap,vt.displacementmap,vt.gradientmap,vt.fog,vt.lights,{emissive:{value:new pt(0)}}]),vertexShader:Sn.meshtoon_vert,fragmentShader:Sn.meshtoon_frag},matcap:{uniforms:Co([vt.common,vt.bumpmap,vt.normalmap,vt.displacementmap,vt.fog,{matcap:{value:null}}]),vertexShader:Sn.meshmatcap_vert,fragmentShader:Sn.meshmatcap_frag},points:{uniforms:Co([vt.points,vt.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:Co([vt.common,vt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:Co([vt.common,vt.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:Co([vt.common,vt.bumpmap,vt.normalmap,vt.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.meshnormal_vert,fragmentShader:Sn.meshnormal_frag},sprite:{uniforms:Co([vt.sprite,vt.fog]),vertexShader:Sn.sprite_vert,fragmentShader:Sn.sprite_frag},background:{uniforms:{uvTransform:{value:new vs},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Sn.background_vert,fragmentShader:Sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Sn.backgroundCube_vert,fragmentShader:Sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distanceRGBA:{uniforms:Co([vt.common,vt.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distanceRGBA_vert,fragmentShader:Sn.distanceRGBA_frag},shadow:{uniforms:Co([vt.lights,vt.fog,{color:{value:new pt(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};Io.physical={uniforms:Co([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new nt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new pt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};const hE={r:0,b:0,g:0};function $de(n,e,t,i,r,o,a){const l=new pt(0);let u=o===!0?0:1,h,d,p=null,m=0,g=null;function v(S,T){let w=!1,E=T.isScene===!0?T.background:null;E&&E.isTexture&&(E=(T.backgroundBlurriness>0?t:e).get(E));const $=n.xr,A=$.getSession&&$.getSession();A&&A.environmentBlendMode==="additive"&&(E=null),E===null?y(l,u):E&&E.isColor&&(y(E,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),E&&(E.isCubeTexture||E.mapping===IO)?(d===void 0&&(d=new nr(new rd(1,1,1),new Ha({name:"BackgroundCubeMaterial",uniforms:dO(Io.backgroundCube.uniforms),vertexShader:Io.backgroundCube.vertexShader,fragmentShader:Io.backgroundCube.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(I,D,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=E,d.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,d.material.toneMapped=E.encoding!==Nn,(p!==E||m!==E.version||g!==n.toneMapping)&&(d.material.needsUpdate=!0,p=E,m=E.version,g=n.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null)):E&&E.isTexture&&(h===void 0&&(h=new nr(new sd(2,2),new Ha({name:"BackgroundMaterial",uniforms:dO(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:Sc,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=E,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.toneMapped=E.encoding!==Nn,E.matrixAutoUpdate===!0&&E.updateMatrix(),h.material.uniforms.uvTransform.value.copy(E.matrix),(p!==E||m!==E.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,p=E,m=E.version,g=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null))}function y(S,T){S.getRGB(hE,Jj(n)),i.buffers.color.setClear(hE.r,hE.g,hE.b,T,a)}return{getClearColor:function(){return l},setClearColor:function(S,T=1){l.set(S),u=T,y(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(S){u=S,y(l,u)},render:v}}function Cde(n,e,t,i){const r=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||o!==null,l={},u=S(null);let h=u,d=!1;function p(M,K,re,ce,X){let Q=!1;if(a){const ee=y(ce,re,K);h!==ee&&(h=ee,g(h.object)),Q=T(M,ce,re,X),Q&&w(M,ce,re,X)}else{const ee=K.wireframe===!0;(h.geometry!==ce.id||h.program!==re.id||h.wireframe!==ee)&&(h.geometry=ce.id,h.program=re.id,h.wireframe=ee,Q=!0)}X!==null&&t.update(X,34963),(Q||d)&&(d=!1,R(M,K,re,ce),X!==null&&n.bindBuffer(34963,t.get(X).buffer))}function m(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function g(M){return i.isWebGL2?n.bindVertexArray(M):o.bindVertexArrayOES(M)}function v(M){return i.isWebGL2?n.deleteVertexArray(M):o.deleteVertexArrayOES(M)}function y(M,K,re){const ce=re.wireframe===!0;let X=l[M.id];X===void 0&&(X={},l[M.id]=X);let Q=X[K.id];Q===void 0&&(Q={},X[K.id]=Q);let ee=Q[ce];return ee===void 0&&(ee=S(m()),Q[ce]=ee),ee}function S(M){const K=[],re=[],ce=[];for(let X=0;X<r;X++)K[X]=0,re[X]=0,ce[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:re,attributeDivisors:ce,object:M,attributes:{},index:null}}function T(M,K,re,ce){const X=h.attributes,Q=K.attributes;let ee=0;const z=re.getAttributes();for(const L in z)if(z[L].location>=0){const de=X[L];let ie=Q[L];if(ie===void 0&&(L==="instanceMatrix"&&M.instanceMatrix&&(ie=M.instanceMatrix),L==="instanceColor"&&M.instanceColor&&(ie=M.instanceColor)),de===void 0||de.attribute!==ie||ie&&de.data!==ie.data)return!0;ee++}return h.attributesNum!==ee||h.index!==ce}function w(M,K,re,ce){const X={},Q=K.attributes;let ee=0;const z=re.getAttributes();for(const L in z)if(z[L].location>=0){let de=Q[L];de===void 0&&(L==="instanceMatrix"&&M.instanceMatrix&&(de=M.instanceMatrix),L==="instanceColor"&&M.instanceColor&&(de=M.instanceColor));const ie={};ie.attribute=de,de&&de.data&&(ie.data=de.data),X[L]=ie,ee++}h.attributes=X,h.attributesNum=ee,h.index=ce}function E(){const M=h.newAttributes;for(let K=0,re=M.length;K<re;K++)M[K]=0}function $(M){A(M,0)}function A(M,K){const re=h.newAttributes,ce=h.enabledAttributes,X=h.attributeDivisors;re[M]=1,ce[M]===0&&(n.enableVertexAttribArray(M),ce[M]=1),X[M]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](M,K),X[M]=K)}function I(){const M=h.newAttributes,K=h.enabledAttributes;for(let re=0,ce=K.length;re<ce;re++)K[re]!==M[re]&&(n.disableVertexAttribArray(re),K[re]=0)}function D(M,K,re,ce,X,Q){i.isWebGL2===!0&&(re===5124||re===5125)?n.vertexAttribIPointer(M,K,re,X,Q):n.vertexAttribPointer(M,K,re,ce,X,Q)}function R(M,K,re,ce){if(i.isWebGL2===!1&&(M.isInstancedMesh||ce.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const X=ce.attributes,Q=re.getAttributes(),ee=K.defaultAttributeValues;for(const z in Q){const L=Q[z];if(L.location>=0){let le=X[z];if(le===void 0&&(z==="instanceMatrix"&&M.instanceMatrix&&(le=M.instanceMatrix),z==="instanceColor"&&M.instanceColor&&(le=M.instanceColor)),le!==void 0){const de=le.normalized,ie=le.itemSize,Ce=t.get(le);if(Ce===void 0)continue;const ye=Ce.buffer,xe=Ce.type,Fe=Ce.bytesPerElement;if(le.isInterleavedBufferAttribute){const Xe=le.data,Ue=Xe.stride,we=le.offset;if(Xe.isInstancedInterleavedBuffer){for(let Ge=0;Ge<L.locationSize;Ge++)A(L.location+Ge,Xe.meshPerAttribute);M.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=Xe.meshPerAttribute*Xe.count)}else for(let Ge=0;Ge<L.locationSize;Ge++)$(L.location+Ge);n.bindBuffer(34962,ye);for(let Ge=0;Ge<L.locationSize;Ge++)D(L.location+Ge,ie/L.locationSize,xe,de,Ue*Fe,(we+ie/L.locationSize*Ge)*Fe)}else{if(le.isInstancedBufferAttribute){for(let Xe=0;Xe<L.locationSize;Xe++)A(L.location+Xe,le.meshPerAttribute);M.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Xe=0;Xe<L.locationSize;Xe++)$(L.location+Xe);n.bindBuffer(34962,ye);for(let Xe=0;Xe<L.locationSize;Xe++)D(L.location+Xe,ie/L.locationSize,xe,de,ie*Fe,ie/L.locationSize*Xe*Fe)}}else if(ee!==void 0){const de=ee[z];if(de!==void 0)switch(de.length){case 2:n.vertexAttrib2fv(L.location,de);break;case 3:n.vertexAttrib3fv(L.location,de);break;case 4:n.vertexAttrib4fv(L.location,de);break;default:n.vertexAttrib1fv(L.location,de)}}}}I()}function B(){N();for(const M in l){const K=l[M];for(const re in K){const ce=K[re];for(const X in ce)v(ce[X].object),delete ce[X];delete K[re]}delete l[M]}}function G(M){if(l[M.id]===void 0)return;const K=l[M.id];for(const re in K){const ce=K[re];for(const X in ce)v(ce[X].object),delete ce[X];delete K[re]}delete l[M.id]}function Z(M){for(const K in l){const re=l[K];if(re[M.id]===void 0)continue;const ce=re[M.id];for(const X in ce)v(ce[X].object),delete ce[X];delete re[M.id]}}function N(){H(),d=!0,h!==u&&(h=u,g(h.object))}function H(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:N,resetDefaultState:H,dispose:B,releaseStatesOfGeometry:G,releaseStatesOfProgram:Z,initAttributes:E,enableAttribute:$,disableUnusedAttributes:I}}function Ade(n,e,t,i){const r=i.isWebGL2;let o;function a(h){o=h}function l(h,d){n.drawArrays(o,h,d),t.update(d,o,1)}function u(h,d,p){if(p===0)return;let m,g;if(r)m=n,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](o,h,d,p),t.update(d,o,p)}this.setMode=a,this.render=l,this.renderInstances=u}function kde(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(D){if(D==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let l=t.precision!==void 0?t.precision:"highp";const u=o(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const h=a||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,p=n.getParameter(34930),m=n.getParameter(35660),g=n.getParameter(3379),v=n.getParameter(34076),y=n.getParameter(34921),S=n.getParameter(36347),T=n.getParameter(36348),w=n.getParameter(36349),E=m>0,$=a||e.has("OES_texture_float"),A=E&&$,I=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:r,getMaxPrecision:o,precision:l,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:S,maxVaryings:T,maxFragmentUniforms:w,vertexTextures:E,floatFragmentTextures:$,floatVertexTextures:A,maxSamples:I}}function Ide(n){const e=this;let t=null,i=0,r=!1,o=!1;const a=new Ah,l=new vs,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,m){t=d(p,m,0)},this.setState=function(p,m,g){const v=p.clippingPlanes,y=p.clipIntersection,S=p.clipShadows,T=n.get(p);if(!r||v===null||v.length===0||o&&!S)o?d(null):h();else{const w=o?0:i,E=w*4;let $=T.clippingState||null;u.value=$,$=d(v,m,E,g);for(let A=0;A!==E;++A)$[A]=t[A];T.clippingState=$,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(p,m,g,v){const y=p!==null?p.length:0;let S=null;if(y!==0){if(S=u.value,v!==!0||S===null){const T=g+y*4,w=m.matrixWorldInverse;l.getNormalMatrix(w),(S===null||S.length<T)&&(S=new Float32Array(T));for(let E=0,$=g;E!==y;++E,$+=4)a.copy(p[E]).applyMatrix4(w,l),a.normal.toArray(S,$),S[$+3]=a.constant}u.value=S,u.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,S}}function Rde(n){let e=new WeakMap;function t(a,l){return l===_S?a.mapping=Rf:l===OS&&(a.mapping=Mf),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping;if(l===_S||l===OS)if(e.has(a)){const u=e.get(a).texture;return t(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const h=new eY(u.height/2);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}let Uh=class extends yT{constructor(e=-1,t=1,i=1,r=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,a=i+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,a=o+h*this.view.width,l-=d*this.view.offsetY,u=l-d*this.view.height}this.projectionMatrix.makeOrthographic(o,a,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const b0=4,Z4=[.125,.215,.35,.446,.526,.582],cm=20,TM=new Uh,q4=new pt;let wM=null;const sm=(1+Math.sqrt(5))/2,z_=1/sm,J4=[new he(1,1,1),new he(-1,1,1),new he(1,1,-1),new he(-1,1,-1),new he(0,sm,z_),new he(0,sm,-z_),new he(z_,0,sm),new he(-z_,0,sm),new he(sm,z_,0),new he(-sm,z_,0)];class ID{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){wM=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wM),e.scissorTest=!1,dE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Rf||e.mapping===Mf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wM=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:hi,minFilter:hi,generateMipmaps:!1,type:Jm,format:ra,encoding:Yh,depthBuffer:!1},r=K4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=K4(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mde(o)),this._blurMaterial=Pde(o,e,t)}return r}_compileMaterial(e){const t=new nr(this._lodPlanes[0],e);this._renderer.compile(t,TM)}_sceneToCubeUV(e,t,i,r){const l=new Ci(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor(q4),d.toneMapping=Oc,d.autoClear=!1;const g=new Ro({name:"PMREM.Background",side:Xs,depthWrite:!1,depthTest:!1}),v=new nr(new rd,g);let y=!1;const S=e.background;S?S.isColor&&(g.color.copy(S),e.background=null,y=!0):(g.color.copy(q4),y=!0);for(let T=0;T<6;T++){const w=T%3;w===0?(l.up.set(0,u[T],0),l.lookAt(h[T],0,0)):w===1?(l.up.set(0,0,u[T]),l.lookAt(0,h[T],0)):(l.up.set(0,u[T],0),l.lookAt(0,0,h[T]));const E=this._cubeSize;dE(r,w*E,T>2?E:0,E,E),d.setRenderTarget(r),y&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Rf||e.mapping===Mf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=tW()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eW());const o=r?this._cubemapMaterial:this._equirectMaterial,a=new nr(this._lodPlanes[0],o),l=o.uniforms;l.envMap.value=e;const u=this._cubeSize;dE(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(a,TM)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=J4[(r-1)%J4.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,r,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",o),this._halfBlur(a,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,a,l){const u=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new nr(this._lodPlanes[r],h),m=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*cm-1),y=o/v,S=isFinite(o)?1+Math.floor(d*y):cm;S>cm&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${cm}`);const T=[];let w=0;for(let D=0;D<cm;++D){const R=D/y,B=Math.exp(-R*R/2);T.push(B),D===0?w+=B:D<S&&(w+=2*B)}for(let D=0;D<T.length;D++)T[D]=T[D]/w;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=T,m.latitudinal.value=a==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:E}=this;m.dTheta.value=v,m.mipInt.value=E-i;const $=this._sizeLods[r],A=3*$*(r>E-b0?r-E+b0:0),I=4*(this._cubeSize-$);dE(t,A,I,3*$,2*$),u.setRenderTarget(t),u.render(p,TM)}}function Mde(n){const e=[],t=[],i=[];let r=n;const o=n-b0+1+Z4.length;for(let a=0;a<o;a++){const l=Math.pow(2,r);t.push(l);let u=1/l;a>n-b0?u=Z4[a-n+b0-1]:a===0&&(u=0),i.push(u);const h=1/(l-2),d=-h,p=1+h,m=[d,d,p,d,p,p,d,d,p,p,d,p],g=6,v=6,y=3,S=2,T=1,w=new Float32Array(y*v*g),E=new Float32Array(S*v*g),$=new Float32Array(T*v*g);for(let I=0;I<g;I++){const D=I%3*2/3-1,R=I>2?0:-1,B=[D,R,0,D+2/3,R,0,D+2/3,R+1,0,D,R,0,D+2/3,R+1,0,D,R+1,0];w.set(B,y*v*I),E.set(m,S*v*I);const G=[I,I,I,I,I,I];$.set(G,T*v*I)}const A=new On;A.setAttribute("position",new ei(w,y)),A.setAttribute("uv",new ei(E,S)),A.setAttribute("faceIndex",new ei($,T)),e.push(A),r>b0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function K4(n,e,t){const i=new Rl(n,e,t);return i.texture.mapping=IO,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function dE(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Pde(n,e,t){const i=new Float32Array(cm),r=new he(0,1,0);return new Ha({name:"SphericalGaussianBlur",defines:{n:cm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:qB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fh,depthTest:!1,depthWrite:!1})}function eW(){return new Ha({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fh,depthTest:!1,depthWrite:!1})}function tW(){return new Ha({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fh,depthTest:!1,depthWrite:!1})}function qB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Dde(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const u=l.mapping,h=u===_S||u===OS,d=u===Rf||u===Mf;if(h||d)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let p=e.get(l);return t===null&&(t=new ID(n)),p=h?t.fromEquirectangular(l,p):t.fromCubemap(l,p),e.set(l,p),p.texture}else{if(e.has(l))return e.get(l).texture;{const p=l.image;if(h&&p&&p.height>0||d&&p&&r(p)){t===null&&(t=new ID(n));const m=h?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,m),l.addEventListener("dispose",o),m.texture}else return null}}}return l}function r(l){let u=0;const h=6;for(let d=0;d<h;d++)l[d]!==void 0&&u++;return u===h}function o(l){const u=l.target;u.removeEventListener("dispose",o);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function Lde(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Nde(n,e,t,i){const r={},o=new WeakMap;function a(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener("dispose",a),delete r[m.id];const g=o.get(m);g&&(e.remove(g),o.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return r[m.id]===!0||(m.addEventListener("dispose",a),r[m.id]=!0,t.memory.geometries++),m}function u(p){const m=p.attributes;for(const v in m)e.update(m[v],34962);const g=p.morphAttributes;for(const v in g){const y=g[v];for(let S=0,T=y.length;S<T;S++)e.update(y[S],34962)}}function h(p){const m=[],g=p.index,v=p.attributes.position;let y=0;if(g!==null){const w=g.array;y=g.version;for(let E=0,$=w.length;E<$;E+=3){const A=w[E+0],I=w[E+1],D=w[E+2];m.push(A,I,I,D,D,A)}}else{const w=v.array;y=v.version;for(let E=0,$=w.length/3-1;E<$;E+=3){const A=E+0,I=E+1,D=E+2;m.push(A,I,I,D,D,A)}}const S=new(Zj(m)?ZB:YB)(m,1);S.version=y;const T=o.get(p);T&&e.remove(T),o.set(p,S)}function d(p){const m=o.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&h(p)}else h(p);return o.get(p)}return{get:l,update:u,getWireframeAttribute:d}}function Bde(n,e,t,i){const r=i.isWebGL2;let o;function a(m){o=m}let l,u;function h(m){l=m.type,u=m.bytesPerElement}function d(m,g){n.drawElements(o,g,l,m*u),t.update(g,o,1)}function p(m,g,v){if(v===0)return;let y,S;if(r)y=n,S="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[S](o,g,l,m*u,v),t.update(g,o,v)}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=p}function Fde(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,a,l){switch(t.calls++,a){case 4:t.triangles+=l*(o/3);break;case 1:t.lines+=l*(o/2);break;case 3:t.lines+=l*(o-1);break;case 2:t.lines+=l*o;break;case 0:t.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Ude(n,e){return n[0]-e[0]}function Gde(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Wde(n,e,t){const i={},r=new Float32Array(8),o=new WeakMap,a=new Fn,l=[];for(let h=0;h<8;h++)l[h]=[h,0];function u(h,d,p){const m=h.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=v!==void 0?v.length:0;let S=o.get(d);if(S===void 0||S.count!==y){let K=function(){H.dispose(),o.delete(d),d.removeEventListener("dispose",K)};var g=K;S!==void 0&&S.texture.dispose();const E=d.morphAttributes.position!==void 0,$=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,I=d.morphAttributes.position||[],D=d.morphAttributes.normal||[],R=d.morphAttributes.color||[];let B=0;E===!0&&(B=1),$===!0&&(B=2),A===!0&&(B=3);let G=d.attributes.position.count*B,Z=1;G>e.maxTextureSize&&(Z=Math.ceil(G/e.maxTextureSize),G=e.maxTextureSize);const N=new Float32Array(G*Z*4*y),H=new wA(N,G,Z,y);H.type=_u,H.needsUpdate=!0;const M=B*4;for(let re=0;re<y;re++){const ce=I[re],X=D[re],Q=R[re],ee=G*Z*4*re;for(let z=0;z<ce.count;z++){const L=z*M;E===!0&&(a.fromBufferAttribute(ce,z),N[ee+L+0]=a.x,N[ee+L+1]=a.y,N[ee+L+2]=a.z,N[ee+L+3]=0),$===!0&&(a.fromBufferAttribute(X,z),N[ee+L+4]=a.x,N[ee+L+5]=a.y,N[ee+L+6]=a.z,N[ee+L+7]=0),A===!0&&(a.fromBufferAttribute(Q,z),N[ee+L+8]=a.x,N[ee+L+9]=a.y,N[ee+L+10]=a.z,N[ee+L+11]=Q.itemSize===4?a.w:1)}}S={count:y,texture:H,size:new nt(G,Z)},o.set(d,S),d.addEventListener("dispose",K)}let T=0;for(let E=0;E<m.length;E++)T+=m[E];const w=d.morphTargetsRelative?1:1-T;p.getUniforms().setValue(n,"morphTargetBaseInfluence",w),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",S.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",S.size)}else{const v=m===void 0?0:m.length;let y=i[d.id];if(y===void 0||y.length!==v){y=[];for(let $=0;$<v;$++)y[$]=[$,0];i[d.id]=y}for(let $=0;$<v;$++){const A=y[$];A[0]=$,A[1]=m[$]}y.sort(Gde);for(let $=0;$<8;$++)$<v&&y[$][1]?(l[$][0]=y[$][0],l[$][1]=y[$][1]):(l[$][0]=Number.MAX_SAFE_INTEGER,l[$][1]=0);l.sort(Ude);const S=d.morphAttributes.position,T=d.morphAttributes.normal;let w=0;for(let $=0;$<8;$++){const A=l[$],I=A[0],D=A[1];I!==Number.MAX_SAFE_INTEGER&&D?(S&&d.getAttribute("morphTarget"+$)!==S[I]&&d.setAttribute("morphTarget"+$,S[I]),T&&d.getAttribute("morphNormal"+$)!==T[I]&&d.setAttribute("morphNormal"+$,T[I]),r[$]=D,w+=D):(S&&d.hasAttribute("morphTarget"+$)===!0&&d.deleteAttribute("morphTarget"+$),T&&d.hasAttribute("morphNormal"+$)===!0&&d.deleteAttribute("morphNormal"+$),r[$]=0)}const E=d.morphTargetsRelative?1:1-w;p.getUniforms().setValue(n,"morphTargetBaseInfluence",E),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:u}}function zde(n,e,t,i){let r=new WeakMap;function o(u){const h=i.render.frame,d=u.geometry,p=e.get(u,d);return r.get(p)!==h&&(e.update(p),r.set(p,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),p}function a(){r=new WeakMap}function l(u){const h=u.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:o,dispose:a}}const nY=new Ri,iY=new wA,rY=new jB,sY=new bT,nW=[],iW=[],rW=new Float32Array(16),sW=new Float32Array(9),oW=new Float32Array(4);function RO(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=nW[r];if(o===void 0&&(o=new Float32Array(r),nW[r]=o),e!==0){i.toArray(o,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(o,l)}return o}function es(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ts(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function xA(n,e){let t=iW[e];t===void 0&&(t=new Int32Array(e),iW[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Qde(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Vde(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(es(t,e))return;n.uniform2fv(this.addr,e),ts(t,e)}}function Hde(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(es(t,e))return;n.uniform3fv(this.addr,e),ts(t,e)}}function Xde(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(es(t,e))return;n.uniform4fv(this.addr,e),ts(t,e)}}function jde(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(es(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ts(t,e)}else{if(es(t,i))return;oW.set(i),n.uniformMatrix2fv(this.addr,!1,oW),ts(t,i)}}function Yde(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(es(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ts(t,e)}else{if(es(t,i))return;sW.set(i),n.uniformMatrix3fv(this.addr,!1,sW),ts(t,i)}}function Zde(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(es(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ts(t,e)}else{if(es(t,i))return;rW.set(i),n.uniformMatrix4fv(this.addr,!1,rW),ts(t,i)}}function qde(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Jde(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(es(t,e))return;n.uniform2iv(this.addr,e),ts(t,e)}}function Kde(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(es(t,e))return;n.uniform3iv(this.addr,e),ts(t,e)}}function efe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(es(t,e))return;n.uniform4iv(this.addr,e),ts(t,e)}}function tfe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nfe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(es(t,e))return;n.uniform2uiv(this.addr,e),ts(t,e)}}function ife(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(es(t,e))return;n.uniform3uiv(this.addr,e),ts(t,e)}}function rfe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(es(t,e))return;n.uniform4uiv(this.addr,e),ts(t,e)}}function sfe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||nY,r)}function ofe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||rY,r)}function afe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||sY,r)}function lfe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||iY,r)}function cfe(n){switch(n){case 5126:return Qde;case 35664:return Vde;case 35665:return Hde;case 35666:return Xde;case 35674:return jde;case 35675:return Yde;case 35676:return Zde;case 5124:case 35670:return qde;case 35667:case 35671:return Jde;case 35668:case 35672:return Kde;case 35669:case 35673:return efe;case 5125:return tfe;case 36294:return nfe;case 36295:return ife;case 36296:return rfe;case 35678:case 36198:case 36298:case 36306:case 35682:return sfe;case 35679:case 36299:case 36307:return ofe;case 35680:case 36300:case 36308:case 36293:return afe;case 36289:case 36303:case 36311:case 36292:return lfe}}function ufe(n,e){n.uniform1fv(this.addr,e)}function hfe(n,e){const t=RO(e,this.size,2);n.uniform2fv(this.addr,t)}function dfe(n,e){const t=RO(e,this.size,3);n.uniform3fv(this.addr,t)}function ffe(n,e){const t=RO(e,this.size,4);n.uniform4fv(this.addr,t)}function pfe(n,e){const t=RO(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function mfe(n,e){const t=RO(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gfe(n,e){const t=RO(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _fe(n,e){n.uniform1iv(this.addr,e)}function Ofe(n,e){n.uniform2iv(this.addr,e)}function vfe(n,e){n.uniform3iv(this.addr,e)}function yfe(n,e){n.uniform4iv(this.addr,e)}function bfe(n,e){n.uniform1uiv(this.addr,e)}function Sfe(n,e){n.uniform2uiv(this.addr,e)}function Tfe(n,e){n.uniform3uiv(this.addr,e)}function wfe(n,e){n.uniform4uiv(this.addr,e)}function Efe(n,e,t){const i=this.cache,r=e.length,o=xA(t,r);es(i,o)||(n.uniform1iv(this.addr,o),ts(i,o));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||nY,o[a])}function xfe(n,e,t){const i=this.cache,r=e.length,o=xA(t,r);es(i,o)||(n.uniform1iv(this.addr,o),ts(i,o));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||rY,o[a])}function $fe(n,e,t){const i=this.cache,r=e.length,o=xA(t,r);es(i,o)||(n.uniform1iv(this.addr,o),ts(i,o));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||sY,o[a])}function Cfe(n,e,t){const i=this.cache,r=e.length,o=xA(t,r);es(i,o)||(n.uniform1iv(this.addr,o),ts(i,o));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||iY,o[a])}function Afe(n){switch(n){case 5126:return ufe;case 35664:return hfe;case 35665:return dfe;case 35666:return ffe;case 35674:return pfe;case 35675:return mfe;case 35676:return gfe;case 5124:case 35670:return _fe;case 35667:case 35671:return Ofe;case 35668:case 35672:return vfe;case 35669:case 35673:return yfe;case 5125:return bfe;case 36294:return Sfe;case 36295:return Tfe;case 36296:return wfe;case 35678:case 36198:case 36298:case 36306:case 35682:return Efe;case 35679:case 36299:case 36307:return xfe;case 35680:case 36300:case 36308:case 36293:return $fe;case 36289:case 36303:case 36311:case 36292:return Cfe}}class kfe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=cfe(t.type)}}class Ife{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Afe(t.type)}}class Rfe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let o=0,a=r.length;o!==a;++o){const l=r[o];l.setValue(e,t[l.id],i)}}}const EM=/(\w+)(\])?(\[|\.)?/g;function aW(n,e){n.seq.push(e),n.map[e.id]=e}function Mfe(n,e,t){const i=n.name,r=i.length;for(EM.lastIndex=0;;){const o=EM.exec(i),a=EM.lastIndex;let l=o[1];const u=o[2]==="]",h=o[3];if(u&&(l=l|0),h===void 0||h==="["&&a+2===r){aW(t,h===void 0?new kfe(l,n,e):new Ife(l,n,e));break}else{let p=t.map[l];p===void 0&&(p=new Rfe(l),aW(t,p)),t=p}}}class Yx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const o=e.getActiveUniform(t,r),a=e.getUniformLocation(t,o.name);Mfe(o,a,this)}}setValue(e,t,i,r){const o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,a=t.length;o!==a;++o){const l=t[o],u=i[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,o=e.length;r!==o;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function lW(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Pfe=0;function Dfe(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let a=r;a<o;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return i.join(`
`)}function Lfe(n){switch(n){case Yh:return["Linear","( value )"];case Nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function cW(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+Dfe(n.getShaderSource(e),a)}else return r}function Nfe(n,e){const t=Lfe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Bfe(n,e){let t;switch(e){case Sj:t="Linear";break;case Tj:t="Reinhard";break;case wj:t="OptimizedCineon";break;case UB:t="ACESFilmic";break;case Ej:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Ffe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(mb).join(`
`)}function Ufe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Gfe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),a=o.name;let l=1;o.type===35674&&(l=2),o.type===35675&&(l=3),o.type===35676&&(l=4),t[a]={type:o.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}function mb(n){return n!==""}function uW(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hW(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Wfe=/^[ \t]*#include +<([\w\d./]+)>/gm;function RD(n){return n.replace(Wfe,zfe)}function zfe(n,e){const t=Sn[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return RD(t)}const Qfe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dW(n){return n.replace(Qfe,Vfe)}function Vfe(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function fW(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Hfe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===vA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Mb?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bm&&(e="SHADOWMAP_TYPE_VSM"),e}function Xfe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Rf:case Mf:e="ENVMAP_TYPE_CUBE";break;case IO:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jfe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Mf:e="ENVMAP_MODE_REFRACTION";break}return e}function Yfe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case _T:e="ENVMAP_BLENDING_MULTIPLY";break;case yj:e="ENVMAP_BLENDING_MIX";break;case bj:e="ENVMAP_BLENDING_ADD";break}return e}function Zfe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qfe(n,e,t,i){const r=n.getContext(),o=t.defines;let a=t.vertexShader,l=t.fragmentShader;const u=Hfe(t),h=Xfe(t),d=jfe(t),p=Yfe(t),m=Zfe(t),g=t.isWebGL2?"":Ffe(t),v=Ufe(o),y=r.createProgram();let S,T,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=[v].filter(mb).join(`
`),S.length>0&&(S+=`
`),T=[g,v].filter(mb).join(`
`),T.length>0&&(T+=`
`)):(S=[fW(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mb).join(`
`),T=[g,fW(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Oc?"#define TONE_MAPPING":"",t.toneMapping!==Oc?Sn.tonemapping_pars_fragment:"",t.toneMapping!==Oc?Bfe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Sn.encodings_pars_fragment,Nfe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(mb).join(`
`)),a=RD(a),a=uW(a,t),a=hW(a,t),l=RD(l),l=uW(l,t),l=hW(l,t),a=dW(a),l=dW(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,S=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,T=["#define varying in",t.glslVersion===AD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const E=w+S+a,$=w+T+l,A=lW(r,35633,E),I=lW(r,35632,$);if(r.attachShader(y,A),r.attachShader(y,I),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const B=r.getProgramInfoLog(y).trim(),G=r.getShaderInfoLog(A).trim(),Z=r.getShaderInfoLog(I).trim();let N=!0,H=!0;if(r.getProgramParameter(y,35714)===!1){N=!1;const M=cW(r,A,"vertex"),K=cW(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+B+`
`+M+`
`+K)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(G===""||Z==="")&&(H=!1);H&&(this.diagnostics={runnable:N,programLog:B,vertexShader:{log:G,prefix:S},fragmentShader:{log:Z,prefix:T}})}r.deleteShader(A),r.deleteShader(I);let D;this.getUniforms=function(){return D===void 0&&(D=new Yx(r,y)),D};let R;return this.getAttributes=function(){return R===void 0&&(R=Gfe(r,y)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=Pfe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=A,this.fragmentShader=I,this}let Jfe=0;class Kfe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new epe(e),t.set(e,i)),i}}class epe{constructor(e){this.id=Jfe++,this.code=e,this.usedTimes=0}}function tpe(n,e,t,i,r,o,a){const l=new Lm,u=new Kfe,h=[],d=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(R,B,G,Z,N){const H=Z.fog,M=N.geometry,K=R.isMeshStandardMaterial?Z.environment:null,re=(R.isMeshStandardMaterial?t:e).get(R.envMap||K),ce=re&&re.mapping===IO?re.image.height:null,X=v[R.type];R.precision!==null&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const Q=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,ee=Q!==void 0?Q.length:0;let z=0;M.morphAttributes.position!==void 0&&(z=1),M.morphAttributes.normal!==void 0&&(z=2),M.morphAttributes.color!==void 0&&(z=3);let L,le,de,ie;if(X){const Ue=Io[X];L=Ue.vertexShader,le=Ue.fragmentShader}else L=R.vertexShader,le=R.fragmentShader,u.update(R),de=u.getVertexShaderID(R),ie=u.getFragmentShaderID(R);const Ce=n.getRenderTarget(),ye=R.alphaTest>0,xe=R.clearcoat>0,Fe=R.iridescence>0;return{isWebGL2:d,shaderID:X,shaderName:R.type,vertexShader:L,fragmentShader:le,defines:R.defines,customVertexShaderID:de,customFragmentShaderID:ie,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:m,outputEncoding:Ce===null?n.outputEncoding:Ce.isXRRenderTarget===!0?Ce.texture.encoding:Yh,map:!!R.map,matcap:!!R.matcap,envMap:!!re,envMapMode:re&&re.mapping,envMapCubeUVHeight:ce,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:R.normalMapType===Hj,tangentSpaceNormalMap:R.normalMapType===id,decodeVideoTexture:!!R.map&&R.map.isVideoTexture===!0&&R.map.encoding===Nn,clearcoat:xe,clearcoatMap:xe&&!!R.clearcoatMap,clearcoatRoughnessMap:xe&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:xe&&!!R.clearcoatNormalMap,iridescence:Fe,iridescenceMap:Fe&&!!R.iridescenceMap,iridescenceThicknessMap:Fe&&!!R.iridescenceThicknessMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:R.transparent===!1&&R.blending===Mm,alphaMap:!!R.alphaMap,alphaTest:ye,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!M.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!M.attributes.color&&M.attributes.color.itemSize===4,vertexUvs:!!R.map||!!R.bumpMap||!!R.normalMap||!!R.specularMap||!!R.alphaMap||!!R.emissiveMap||!!R.roughnessMap||!!R.metalnessMap||!!R.clearcoatMap||!!R.clearcoatRoughnessMap||!!R.clearcoatNormalMap||!!R.iridescenceMap||!!R.iridescenceThicknessMap||!!R.displacementMap||!!R.transmissionMap||!!R.thicknessMap||!!R.specularIntensityMap||!!R.specularColorMap||!!R.sheenColorMap||!!R.sheenRoughnessMap,uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap)&&!!R.displacementMap,fog:!!H,useFog:R.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:p,skinning:N.isSkinnedMesh===!0,morphTargets:M.morphAttributes.position!==void 0,morphNormals:M.morphAttributes.normal!==void 0,morphColors:M.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:z,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:Oc,useLegacyLights:n.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===El,flipSided:R.side===Xs,useDepthPacking:!!R.depthPacking,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function S(R){const B=[];if(R.shaderID?B.push(R.shaderID):(B.push(R.customVertexShaderID),B.push(R.customFragmentShaderID)),R.defines!==void 0)for(const G in R.defines)B.push(G),B.push(R.defines[G]);return R.isRawShaderMaterial===!1&&(T(B,R),w(B,R),B.push(n.outputEncoding)),B.push(R.customProgramCacheKey),B.join()}function T(R,B){R.push(B.precision),R.push(B.outputEncoding),R.push(B.envMapMode),R.push(B.envMapCubeUVHeight),R.push(B.combine),R.push(B.vertexUvs),R.push(B.fogExp2),R.push(B.sizeAttenuation),R.push(B.morphTargetsCount),R.push(B.morphAttributeCount),R.push(B.numDirLights),R.push(B.numPointLights),R.push(B.numSpotLights),R.push(B.numSpotLightMaps),R.push(B.numHemiLights),R.push(B.numRectAreaLights),R.push(B.numDirLightShadows),R.push(B.numPointLightShadows),R.push(B.numSpotLightShadows),R.push(B.numSpotLightShadowsWithMaps),R.push(B.shadowMapType),R.push(B.toneMapping),R.push(B.numClippingPlanes),R.push(B.numClipIntersection),R.push(B.depthPacking)}function w(R,B){l.disableAll(),B.isWebGL2&&l.enable(0),B.supportsVertexTextures&&l.enable(1),B.instancing&&l.enable(2),B.instancingColor&&l.enable(3),B.map&&l.enable(4),B.matcap&&l.enable(5),B.envMap&&l.enable(6),B.lightMap&&l.enable(7),B.aoMap&&l.enable(8),B.emissiveMap&&l.enable(9),B.bumpMap&&l.enable(10),B.normalMap&&l.enable(11),B.objectSpaceNormalMap&&l.enable(12),B.tangentSpaceNormalMap&&l.enable(13),B.clearcoat&&l.enable(14),B.clearcoatMap&&l.enable(15),B.clearcoatRoughnessMap&&l.enable(16),B.clearcoatNormalMap&&l.enable(17),B.iridescence&&l.enable(18),B.iridescenceMap&&l.enable(19),B.iridescenceThicknessMap&&l.enable(20),B.displacementMap&&l.enable(21),B.specularMap&&l.enable(22),B.roughnessMap&&l.enable(23),B.metalnessMap&&l.enable(24),B.gradientMap&&l.enable(25),B.alphaMap&&l.enable(26),B.alphaTest&&l.enable(27),B.vertexColors&&l.enable(28),B.vertexAlphas&&l.enable(29),B.vertexUvs&&l.enable(30),B.vertexTangents&&l.enable(31),B.uvsVertexOnly&&l.enable(32),R.push(l.mask),l.disableAll(),B.fog&&l.enable(0),B.useFog&&l.enable(1),B.flatShading&&l.enable(2),B.logarithmicDepthBuffer&&l.enable(3),B.skinning&&l.enable(4),B.morphTargets&&l.enable(5),B.morphNormals&&l.enable(6),B.morphColors&&l.enable(7),B.premultipliedAlpha&&l.enable(8),B.shadowMapEnabled&&l.enable(9),B.useLegacyLights&&l.enable(10),B.doubleSided&&l.enable(11),B.flipSided&&l.enable(12),B.useDepthPacking&&l.enable(13),B.dithering&&l.enable(14),B.specularIntensityMap&&l.enable(15),B.specularColorMap&&l.enable(16),B.transmission&&l.enable(17),B.transmissionMap&&l.enable(18),B.thicknessMap&&l.enable(19),B.sheen&&l.enable(20),B.sheenColorMap&&l.enable(21),B.sheenRoughnessMap&&l.enable(22),B.decodeVideoTexture&&l.enable(23),B.opaque&&l.enable(24),R.push(l.mask)}function E(R){const B=v[R.type];let G;if(B){const Z=Io[B];G=pg.clone(Z.uniforms)}else G=R.uniforms;return G}function $(R,B){let G;for(let Z=0,N=h.length;Z<N;Z++){const H=h[Z];if(H.cacheKey===B){G=H,++G.usedTimes;break}}return G===void 0&&(G=new qfe(n,B,R,o),h.push(G)),G}function A(R){if(--R.usedTimes===0){const B=h.indexOf(R);h[B]=h[h.length-1],h.pop(),R.destroy()}}function I(R){u.remove(R)}function D(){u.dispose()}return{getParameters:y,getProgramCacheKey:S,getUniforms:E,acquireProgram:$,releaseProgram:A,releaseShaderCache:I,programs:h,dispose:D}}function npe(){let n=new WeakMap;function e(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function t(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function ipe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function pW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mW(){const n=[];let e=0;const t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function a(p,m,g,v,y,S){let T=n[e];return T===void 0?(T={id:p.id,object:p,geometry:m,material:g,groupOrder:v,renderOrder:p.renderOrder,z:y,group:S},n[e]=T):(T.id=p.id,T.object=p,T.geometry=m,T.material=g,T.groupOrder=v,T.renderOrder=p.renderOrder,T.z=y,T.group=S),e++,T}function l(p,m,g,v,y,S){const T=a(p,m,g,v,y,S);g.transmission>0?i.push(T):g.transparent===!0?r.push(T):t.push(T)}function u(p,m,g,v,y,S){const T=a(p,m,g,v,y,S);g.transmission>0?i.unshift(T):g.transparent===!0?r.unshift(T):t.unshift(T)}function h(p,m){t.length>1&&t.sort(p||ipe),i.length>1&&i.sort(m||pW),r.length>1&&r.sort(m||pW)}function d(){for(let p=e,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:l,unshift:u,finish:d,sort:h}}function rpe(){let n=new WeakMap;function e(i,r){const o=n.get(i);let a;return o===void 0?(a=new mW,n.set(i,[a])):r>=o.length?(a=new mW,o.push(a)):a=o[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function spe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new pt};break;case"SpotLight":t={position:new he,direction:new he,color:new pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new pt,groundColor:new pt};break;case"RectAreaLight":t={color:new pt,position:new he,halfWidth:new he,halfHeight:new he};break}return n[e.id]=t,t}}}function ope(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let ape=0;function lpe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cpe(n,e){const t=new spe,i=ope(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new he);const o=new he,a=new hn,l=new hn;function u(d,p){let m=0,g=0,v=0;for(let Z=0;Z<9;Z++)r.probe[Z].set(0,0,0);let y=0,S=0,T=0,w=0,E=0,$=0,A=0,I=0,D=0,R=0;d.sort(lpe);const B=p===!0?Math.PI:1;for(let Z=0,N=d.length;Z<N;Z++){const H=d[Z],M=H.color,K=H.intensity,re=H.distance,ce=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)m+=M.r*K*B,g+=M.g*K*B,v+=M.b*K*B;else if(H.isLightProbe)for(let X=0;X<9;X++)r.probe[X].addScaledVector(H.sh.coefficients[X],K);else if(H.isDirectionalLight){const X=t.get(H);if(X.color.copy(H.color).multiplyScalar(H.intensity*B),H.castShadow){const Q=H.shadow,ee=i.get(H);ee.shadowBias=Q.bias,ee.shadowNormalBias=Q.normalBias,ee.shadowRadius=Q.radius,ee.shadowMapSize=Q.mapSize,r.directionalShadow[y]=ee,r.directionalShadowMap[y]=ce,r.directionalShadowMatrix[y]=H.shadow.matrix,$++}r.directional[y]=X,y++}else if(H.isSpotLight){const X=t.get(H);X.position.setFromMatrixPosition(H.matrixWorld),X.color.copy(M).multiplyScalar(K*B),X.distance=re,X.coneCos=Math.cos(H.angle),X.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),X.decay=H.decay,r.spot[T]=X;const Q=H.shadow;if(H.map&&(r.spotLightMap[D]=H.map,D++,Q.updateMatrices(H),H.castShadow&&R++),r.spotLightMatrix[T]=Q.matrix,H.castShadow){const ee=i.get(H);ee.shadowBias=Q.bias,ee.shadowNormalBias=Q.normalBias,ee.shadowRadius=Q.radius,ee.shadowMapSize=Q.mapSize,r.spotShadow[T]=ee,r.spotShadowMap[T]=ce,I++}T++}else if(H.isRectAreaLight){const X=t.get(H);X.color.copy(M).multiplyScalar(K),X.halfWidth.set(H.width*.5,0,0),X.halfHeight.set(0,H.height*.5,0),r.rectArea[w]=X,w++}else if(H.isPointLight){const X=t.get(H);if(X.color.copy(H.color).multiplyScalar(H.intensity*B),X.distance=H.distance,X.decay=H.decay,H.castShadow){const Q=H.shadow,ee=i.get(H);ee.shadowBias=Q.bias,ee.shadowNormalBias=Q.normalBias,ee.shadowRadius=Q.radius,ee.shadowMapSize=Q.mapSize,ee.shadowCameraNear=Q.camera.near,ee.shadowCameraFar=Q.camera.far,r.pointShadow[S]=ee,r.pointShadowMap[S]=ce,r.pointShadowMatrix[S]=H.shadow.matrix,A++}r.point[S]=X,S++}else if(H.isHemisphereLight){const X=t.get(H);X.skyColor.copy(H.color).multiplyScalar(K*B),X.groundColor.copy(H.groundColor).multiplyScalar(K*B),r.hemi[E]=X,E++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=vt.LTC_FLOAT_1,r.rectAreaLTC2=vt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=vt.LTC_HALF_1,r.rectAreaLTC2=vt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=g,r.ambient[2]=v;const G=r.hash;(G.directionalLength!==y||G.pointLength!==S||G.spotLength!==T||G.rectAreaLength!==w||G.hemiLength!==E||G.numDirectionalShadows!==$||G.numPointShadows!==A||G.numSpotShadows!==I||G.numSpotMaps!==D)&&(r.directional.length=y,r.spot.length=T,r.rectArea.length=w,r.point.length=S,r.hemi.length=E,r.directionalShadow.length=$,r.directionalShadowMap.length=$,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=$,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=I+D-R,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=R,G.directionalLength=y,G.pointLength=S,G.spotLength=T,G.rectAreaLength=w,G.hemiLength=E,G.numDirectionalShadows=$,G.numPointShadows=A,G.numSpotShadows=I,G.numSpotMaps=D,r.version=ape++)}function h(d,p){let m=0,g=0,v=0,y=0,S=0;const T=p.matrixWorldInverse;for(let w=0,E=d.length;w<E;w++){const $=d[w];if($.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition($.matrixWorld),o.setFromMatrixPosition($.target.matrixWorld),A.direction.sub(o),A.direction.transformDirection(T),m++}else if($.isSpotLight){const A=r.spot[v];A.position.setFromMatrixPosition($.matrixWorld),A.position.applyMatrix4(T),A.direction.setFromMatrixPosition($.matrixWorld),o.setFromMatrixPosition($.target.matrixWorld),A.direction.sub(o),A.direction.transformDirection(T),v++}else if($.isRectAreaLight){const A=r.rectArea[y];A.position.setFromMatrixPosition($.matrixWorld),A.position.applyMatrix4(T),l.identity(),a.copy($.matrixWorld),a.premultiply(T),l.extractRotation(a),A.halfWidth.set($.width*.5,0,0),A.halfHeight.set(0,$.height*.5,0),A.halfWidth.applyMatrix4(l),A.halfHeight.applyMatrix4(l),y++}else if($.isPointLight){const A=r.point[g];A.position.setFromMatrixPosition($.matrixWorld),A.position.applyMatrix4(T),g++}else if($.isHemisphereLight){const A=r.hemi[S];A.direction.setFromMatrixPosition($.matrixWorld),A.direction.transformDirection(T),S++}}}return{setup:u,setupView:h,state:r}}function gW(n,e){const t=new cpe(n,e),i=[],r=[];function o(){i.length=0,r.length=0}function a(p){i.push(p)}function l(p){r.push(p)}function u(p){t.setup(i,p)}function h(p){t.setupView(i,p)}return{init:o,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:u,setupLightsView:h,pushLight:a,pushShadow:l}}function upe(n,e){let t=new WeakMap;function i(o,a=0){const l=t.get(o);let u;return l===void 0?(u=new gW(n,e),t.set(o,[u])):a>=l.length?(u=new gW(n,e),l.push(u)):u=l[a],u}function r(){t=new WeakMap}return{get:i,dispose:r}}class $A extends Br{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Vj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CA extends Br{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new he,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const hpe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dpe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fpe(n,e,t){let i=new EA;const r=new nt,o=new nt,a=new Fn,l=new $A({depthPacking:QB}),u=new CA,h={},d=t.maxTextureSize,p={[Sc]:Xs,[Xs]:Sc,[El]:El},m=new Ha({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nt},radius:{value:4}},vertexShader:hpe,fragmentShader:dpe}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new On;v.setAttribute("position",new ei(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new nr(v,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vA,this.render=function($,A,I){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||$.length===0)return;const D=n.getRenderTarget(),R=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),G=n.state;G.setBlending(Fh),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);for(let Z=0,N=$.length;Z<N;Z++){const H=$[Z],M=H.shadow;if(M===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(M.autoUpdate===!1&&M.needsUpdate===!1)continue;r.copy(M.mapSize);const K=M.getFrameExtents();if(r.multiply(K),o.copy(M.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/K.x),r.x=o.x*K.x,M.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/K.y),r.y=o.y*K.y,M.mapSize.y=o.y)),M.map===null){const ce=this.type!==bm?{minFilter:fr,magFilter:fr}:{};M.map=new Rl(r.x,r.y,ce),M.map.texture.name=H.name+".shadowMap",M.camera.updateProjectionMatrix()}n.setRenderTarget(M.map),n.clear();const re=M.getViewportCount();for(let ce=0;ce<re;ce++){const X=M.getViewport(ce);a.set(o.x*X.x,o.y*X.y,o.x*X.z,o.y*X.w),G.viewport(a),M.updateMatrices(H,ce),i=M.getFrustum(),E(A,I,M.camera,H,this.type)}M.isPointLightShadow!==!0&&this.type===bm&&T(M,I),M.needsUpdate=!1}S.needsUpdate=!1,n.setRenderTarget(D,R,B)};function T($,A){const I=e.update(y);m.defines.VSM_SAMPLES!==$.blurSamples&&(m.defines.VSM_SAMPLES=$.blurSamples,g.defines.VSM_SAMPLES=$.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),$.mapPass===null&&($.mapPass=new Rl(r.x,r.y)),m.uniforms.shadow_pass.value=$.map.texture,m.uniforms.resolution.value=$.mapSize,m.uniforms.radius.value=$.radius,n.setRenderTarget($.mapPass),n.clear(),n.renderBufferDirect(A,null,I,m,y,null),g.uniforms.shadow_pass.value=$.mapPass.texture,g.uniforms.resolution.value=$.mapSize,g.uniforms.radius.value=$.radius,n.setRenderTarget($.map),n.clear(),n.renderBufferDirect(A,null,I,g,y,null)}function w($,A,I,D,R,B){let G=null;const Z=I.isPointLight===!0?$.customDistanceMaterial:$.customDepthMaterial;if(Z!==void 0)G=Z;else if(G=I.isPointLight===!0?u:l,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const N=G.uuid,H=A.uuid;let M=h[N];M===void 0&&(M={},h[N]=M);let K=M[H];K===void 0&&(K=G.clone(),M[H]=K),G=K}return G.visible=A.visible,G.wireframe=A.wireframe,B===bm?G.side=A.shadowSide!==null?A.shadowSide:A.side:G.side=A.shadowSide!==null?A.shadowSide:p[A.side],G.alphaMap=A.alphaMap,G.alphaTest=A.alphaTest,G.map=A.map,G.clipShadows=A.clipShadows,G.clippingPlanes=A.clippingPlanes,G.clipIntersection=A.clipIntersection,G.displacementMap=A.displacementMap,G.displacementScale=A.displacementScale,G.displacementBias=A.displacementBias,G.wireframeLinewidth=A.wireframeLinewidth,G.linewidth=A.linewidth,I.isPointLight===!0&&G.isMeshDistanceMaterial===!0&&(G.referencePosition.setFromMatrixPosition(I.matrixWorld),G.nearDistance=D,G.farDistance=R),G}function E($,A,I,D,R){if($.visible===!1)return;if($.layers.test(A.layers)&&($.isMesh||$.isLine||$.isPoints)&&($.castShadow||$.receiveShadow&&R===bm)&&(!$.frustumCulled||i.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,$.matrixWorld);const Z=e.update($),N=$.material;if(Array.isArray(N)){const H=Z.groups;for(let M=0,K=H.length;M<K;M++){const re=H[M],ce=N[re.materialIndex];if(ce&&ce.visible){const X=w($,ce,D,I.near,I.far,R);n.renderBufferDirect(I,null,Z,X,$,re)}}}else if(N.visible){const H=w($,N,D,I.near,I.far,R);n.renderBufferDirect(I,null,Z,H,$,null)}}const G=$.children;for(let Z=0,N=G.length;Z<N;Z++)E(G[Z],A,I,D,R)}}function ppe(n,e,t){const i=t.isWebGL2;function r(){let oe=!1;const Pe=new Fn;let et=null;const mt=new Fn(0,0,0,0);return{setMask:function(bt){et!==bt&&!oe&&(n.colorMask(bt,bt,bt,bt),et=bt)},setLocked:function(bt){oe=bt},setClear:function(bt,Tn,wn,Gn,vn){vn===!0&&(bt*=Gn,Tn*=Gn,wn*=Gn),Pe.set(bt,Tn,wn,Gn),mt.equals(Pe)===!1&&(n.clearColor(bt,Tn,wn,Gn),mt.copy(Pe))},reset:function(){oe=!1,et=null,mt.set(-1,0,0,0)}}}function o(){let oe=!1,Pe=null,et=null,mt=null;return{setTest:function(bt){bt?ye(2929):xe(2929)},setMask:function(bt){Pe!==bt&&!oe&&(n.depthMask(bt),Pe=bt)},setFunc:function(bt){if(et!==bt){switch(bt){case fj:n.depthFunc(512);break;case pj:n.depthFunc(519);break;case mj:n.depthFunc(513);break;case X$:n.depthFunc(515);break;case gj:n.depthFunc(514);break;case _j:n.depthFunc(518);break;case Oj:n.depthFunc(516);break;case vj:n.depthFunc(517);break;default:n.depthFunc(515)}et=bt}},setLocked:function(bt){oe=bt},setClear:function(bt){mt!==bt&&(n.clearDepth(bt),mt=bt)},reset:function(){oe=!1,Pe=null,et=null,mt=null}}}function a(){let oe=!1,Pe=null,et=null,mt=null,bt=null,Tn=null,wn=null,Gn=null,vn=null;return{setTest:function(Wn){oe||(Wn?ye(2960):xe(2960))},setMask:function(Wn){Pe!==Wn&&!oe&&(n.stencilMask(Wn),Pe=Wn)},setFunc:function(Wn,on,xn){(et!==Wn||mt!==on||bt!==xn)&&(n.stencilFunc(Wn,on,xn),et=Wn,mt=on,bt=xn)},setOp:function(Wn,on,xn){(Tn!==Wn||wn!==on||Gn!==xn)&&(n.stencilOp(Wn,on,xn),Tn=Wn,wn=on,Gn=xn)},setLocked:function(Wn){oe=Wn},setClear:function(Wn){vn!==Wn&&(n.clearStencil(Wn),vn=Wn)},reset:function(){oe=!1,Pe=null,et=null,mt=null,bt=null,Tn=null,wn=null,Gn=null,vn=null}}}const l=new r,u=new o,h=new a,d=new WeakMap,p=new WeakMap;let m={},g={},v=new WeakMap,y=[],S=null,T=!1,w=null,E=null,$=null,A=null,I=null,D=null,R=null,B=!1,G=null,Z=null,N=null,H=null,M=null;const K=n.getParameter(35661);let re=!1,ce=0;const X=n.getParameter(7938);X.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(X)[1]),re=ce>=1):X.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),re=ce>=2);let Q=null,ee={};const z=n.getParameter(3088),L=n.getParameter(2978),le=new Fn().fromArray(z),de=new Fn().fromArray(L);function ie(oe,Pe,et){const mt=new Uint8Array(4),bt=n.createTexture();n.bindTexture(oe,bt),n.texParameteri(oe,10241,9728),n.texParameteri(oe,10240,9728);for(let Tn=0;Tn<et;Tn++)n.texImage2D(Pe+Tn,0,6408,1,1,0,6408,5121,mt);return bt}const Ce={};Ce[3553]=ie(3553,3553,1),Ce[34067]=ie(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),h.setClear(0),ye(2929),u.setFunc(X$),Oe(!1),ae(eD),ye(2884),W(Fh);function ye(oe){m[oe]!==!0&&(n.enable(oe),m[oe]=!0)}function xe(oe){m[oe]!==!1&&(n.disable(oe),m[oe]=!1)}function Fe(oe,Pe){return g[oe]!==Pe?(n.bindFramebuffer(oe,Pe),g[oe]=Pe,i&&(oe===36009&&(g[36160]=Pe),oe===36160&&(g[36009]=Pe)),!0):!1}function Xe(oe,Pe){let et=y,mt=!1;if(oe)if(et=v.get(Pe),et===void 0&&(et=[],v.set(Pe,et)),oe.isWebGLMultipleRenderTargets){const bt=oe.texture;if(et.length!==bt.length||et[0]!==36064){for(let Tn=0,wn=bt.length;Tn<wn;Tn++)et[Tn]=36064+Tn;et.length=bt.length,mt=!0}}else et[0]!==36064&&(et[0]=36064,mt=!0);else et[0]!==1029&&(et[0]=1029,mt=!0);mt&&(t.isWebGL2?n.drawBuffers(et):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(et))}function Ue(oe){return S!==oe?(n.useProgram(oe),S=oe,!0):!1}const we={[lm]:32774,[nj]:32778,[ij]:32779};if(i)we[rD]=32775,we[sD]=32776;else{const oe=e.get("EXT_blend_minmax");oe!==null&&(we[rD]=oe.MIN_EXT,we[sD]=oe.MAX_EXT)}const Ge={[rj]:0,[sj]:1,[oj]:768,[BB]:770,[dj]:776,[uj]:774,[lj]:772,[aj]:769,[FB]:771,[hj]:775,[cj]:773};function W(oe,Pe,et,mt,bt,Tn,wn,Gn){if(oe===Fh){T===!0&&(xe(3042),T=!1);return}if(T===!1&&(ye(3042),T=!0),oe!==tj){if(oe!==w||Gn!==B){if((E!==lm||I!==lm)&&(n.blendEquation(32774),E=lm,I=lm),Gn)switch(oe){case Mm:n.blendFuncSeparate(1,771,1,771);break;case tD:n.blendFunc(1,1);break;case nD:n.blendFuncSeparate(0,769,0,1);break;case iD:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case Mm:n.blendFuncSeparate(770,771,1,771);break;case tD:n.blendFunc(770,1);break;case nD:n.blendFuncSeparate(0,769,0,1);break;case iD:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}$=null,A=null,D=null,R=null,w=oe,B=Gn}return}bt=bt||Pe,Tn=Tn||et,wn=wn||mt,(Pe!==E||bt!==I)&&(n.blendEquationSeparate(we[Pe],we[bt]),E=Pe,I=bt),(et!==$||mt!==A||Tn!==D||wn!==R)&&(n.blendFuncSeparate(Ge[et],Ge[mt],Ge[Tn],Ge[wn]),$=et,A=mt,D=Tn,R=wn),w=oe,B=!1}function Ee(oe,Pe){oe.side===El?xe(2884):ye(2884);let et=oe.side===Xs;Pe&&(et=!et),Oe(et),oe.blending===Mm&&oe.transparent===!1?W(Fh):W(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.premultipliedAlpha),u.setFunc(oe.depthFunc),u.setTest(oe.depthTest),u.setMask(oe.depthWrite),l.setMask(oe.colorWrite);const mt=oe.stencilWrite;h.setTest(mt),mt&&(h.setMask(oe.stencilWriteMask),h.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),h.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),pe(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?ye(32926):xe(32926)}function Oe(oe){G!==oe&&(oe?n.frontFace(2304):n.frontFace(2305),G=oe)}function ae(oe){oe!==J9?(ye(2884),oe!==Z&&(oe===eD?n.cullFace(1029):oe===K9?n.cullFace(1028):n.cullFace(1032))):xe(2884),Z=oe}function ne(oe){oe!==N&&(re&&n.lineWidth(oe),N=oe)}function pe(oe,Pe,et){oe?(ye(32823),(H!==Pe||M!==et)&&(n.polygonOffset(Pe,et),H=Pe,M=et)):xe(32823)}function Ae(oe){oe?ye(3089):xe(3089)}function Te(oe){oe===void 0&&(oe=33984+K-1),Q!==oe&&(n.activeTexture(oe),Q=oe)}function j(oe,Pe,et){et===void 0&&(Q===null?et=33984+K-1:et=Q);let mt=ee[et];mt===void 0&&(mt={type:void 0,texture:void 0},ee[et]=mt),(mt.type!==oe||mt.texture!==Pe)&&(Q!==et&&(n.activeTexture(et),Q=et),n.bindTexture(oe,Pe||Ce[oe]),mt.type=oe,mt.texture=Pe)}function Y(){const oe=ee[Q];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function ue(){try{n.compressedTexImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ie(){try{n.texSubImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function ze(){try{n.texSubImage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Se(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ve(){try{n.texStorage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function ot(){try{n.texStorage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function _e(){try{n.texImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Le(){try{n.texImage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function We(oe){le.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),le.copy(oe))}function F(oe){de.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),de.copy(oe))}function te(oe,Pe){let et=p.get(Pe);et===void 0&&(et=new WeakMap,p.set(Pe,et));let mt=et.get(oe);mt===void 0&&(mt=n.getUniformBlockIndex(Pe,oe.name),et.set(oe,mt))}function ge(oe,Pe){const mt=p.get(Pe).get(oe);d.get(Pe)!==mt&&(n.uniformBlockBinding(Pe,mt,oe.__bindingPointIndex),d.set(Pe,mt))}function Me(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},Q=null,ee={},g={},v=new WeakMap,y=[],S=null,T=!1,w=null,E=null,$=null,A=null,I=null,D=null,R=null,B=!1,G=null,Z=null,N=null,H=null,M=null,le.set(0,0,n.canvas.width,n.canvas.height),de.set(0,0,n.canvas.width,n.canvas.height),l.reset(),u.reset(),h.reset()}return{buffers:{color:l,depth:u,stencil:h},enable:ye,disable:xe,bindFramebuffer:Fe,drawBuffers:Xe,useProgram:Ue,setBlending:W,setMaterial:Ee,setFlipSided:Oe,setCullFace:ae,setLineWidth:ne,setPolygonOffset:pe,setScissorTest:Ae,activeTexture:Te,bindTexture:j,unbindTexture:Y,compressedTexImage2D:ue,compressedTexImage3D:me,texImage2D:_e,texImage3D:Le,updateUBOMapping:te,uniformBlockBinding:ge,texStorage2D:Ve,texStorage3D:ot,texSubImage2D:Ie,texSubImage3D:ze,compressedTexSubImage2D:Se,compressedTexSubImage3D:Je,scissor:We,viewport:F,reset:Me}}function mpe(n,e,t,i,r,o,a){const l=r.isWebGL2,u=r.maxTextures,h=r.maxCubemapSize,d=r.maxTextureSize,p=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const S=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(j,Y){return T?new OffscreenCanvas(j,Y):TS("canvas")}function E(j,Y,ue,me){let Ie=1;if((j.width>me||j.height>me)&&(Ie=me/Math.max(j.width,j.height)),Ie<1||Y===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const ze=Y?Yj:Math.floor,Se=ze(Ie*j.width),Je=ze(Ie*j.height);y===void 0&&(y=w(Se,Je));const Ve=ue?w(Se,Je):y;return Ve.width=Se,Ve.height=Je,Ve.getContext("2d").drawImage(j,0,0,Se,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+Se+"x"+Je+")."),Ve}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function $(j){return kD(j.width)&&kD(j.height)}function A(j){return l?!1:j.wrapS!==zs||j.wrapT!==zs||j.minFilter!==fr&&j.minFilter!==hi}function I(j,Y){return j.generateMipmaps&&Y&&j.minFilter!==fr&&j.minFilter!==hi}function D(j){n.generateMipmap(j)}function R(j,Y,ue,me,Ie=!1){if(l===!1)return Y;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let ze=Y;return Y===6403&&(ue===5126&&(ze=33326),ue===5131&&(ze=33325),ue===5121&&(ze=33321)),Y===33319&&(ue===5126&&(ze=33328),ue===5131&&(ze=33327),ue===5121&&(ze=33323)),Y===6408&&(ue===5126&&(ze=34836),ue===5131&&(ze=34842),ue===5121&&(ze=me===Nn&&Ie===!1?35907:32856),ue===32819&&(ze=32854),ue===32820&&(ze=32855)),(ze===33325||ze===33326||ze===33327||ze===33328||ze===34842||ze===34836)&&e.get("EXT_color_buffer_float"),ze}function B(j,Y,ue){return I(j,ue)===!0||j.isFramebufferTexture&&j.minFilter!==fr&&j.minFilter!==hi?Math.log2(Math.max(Y.width,Y.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?Y.mipmaps.length:1}function G(j){return j===fr||j===vS||j===G0?9728:9729}function Z(j){const Y=j.target;Y.removeEventListener("dispose",Z),H(Y),Y.isVideoTexture&&v.delete(Y)}function N(j){const Y=j.target;Y.removeEventListener("dispose",N),K(Y)}function H(j){const Y=i.get(j);if(Y.__webglInit===void 0)return;const ue=j.source,me=S.get(ue);if(me){const Ie=me[Y.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&M(j),Object.keys(me).length===0&&S.delete(ue)}i.remove(j)}function M(j){const Y=i.get(j);n.deleteTexture(Y.__webglTexture);const ue=j.source,me=S.get(ue);delete me[Y.__cacheKey],a.memory.textures--}function K(j){const Y=j.texture,ue=i.get(j),me=i.get(Y);if(me.__webglTexture!==void 0&&(n.deleteTexture(me.__webglTexture),a.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++)n.deleteFramebuffer(ue.__webglFramebuffer[Ie]),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[Ie]);else{if(n.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Ie=0;Ie<ue.__webglColorRenderbuffer.length;Ie++)ue.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer[Ie]);ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Ie=0,ze=Y.length;Ie<ze;Ie++){const Se=i.get(Y[Ie]);Se.__webglTexture&&(n.deleteTexture(Se.__webglTexture),a.memory.textures--),i.remove(Y[Ie])}i.remove(Y),i.remove(j)}let re=0;function ce(){re=0}function X(){const j=re;return j>=u&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+u),re+=1,j}function Q(j){const Y=[];return Y.push(j.wrapS),Y.push(j.wrapT),Y.push(j.wrapR||0),Y.push(j.magFilter),Y.push(j.minFilter),Y.push(j.anisotropy),Y.push(j.internalFormat),Y.push(j.format),Y.push(j.type),Y.push(j.generateMipmaps),Y.push(j.premultiplyAlpha),Y.push(j.flipY),Y.push(j.unpackAlignment),Y.push(j.encoding),Y.join()}function ee(j,Y){const ue=i.get(j);if(j.isVideoTexture&&Ae(j),j.isRenderTargetTexture===!1&&j.version>0&&ue.__version!==j.version){const me=j.image;if(me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(ue,j,Y);return}}t.bindTexture(3553,ue.__webglTexture,33984+Y)}function z(j,Y){const ue=i.get(j);if(j.version>0&&ue.__version!==j.version){xe(ue,j,Y);return}t.bindTexture(35866,ue.__webglTexture,33984+Y)}function L(j,Y){const ue=i.get(j);if(j.version>0&&ue.__version!==j.version){xe(ue,j,Y);return}t.bindTexture(32879,ue.__webglTexture,33984+Y)}function le(j,Y){const ue=i.get(j);if(j.version>0&&ue.__version!==j.version){Fe(ue,j,Y);return}t.bindTexture(34067,ue.__webglTexture,33984+Y)}const de={[Pf]:10497,[zs]:33071,[cO]:33648},ie={[fr]:9728,[vS]:9984,[G0]:9986,[hi]:9729,[bA]:9985,[Iu]:9987};function Ce(j,Y,ue){if(ue?(n.texParameteri(j,10242,de[Y.wrapS]),n.texParameteri(j,10243,de[Y.wrapT]),(j===32879||j===35866)&&n.texParameteri(j,32882,de[Y.wrapR]),n.texParameteri(j,10240,ie[Y.magFilter]),n.texParameteri(j,10241,ie[Y.minFilter])):(n.texParameteri(j,10242,33071),n.texParameteri(j,10243,33071),(j===32879||j===35866)&&n.texParameteri(j,32882,33071),(Y.wrapS!==zs||Y.wrapT!==zs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,10240,G(Y.magFilter)),n.texParameteri(j,10241,G(Y.minFilter)),Y.minFilter!==fr&&Y.minFilter!==hi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===fr||Y.minFilter!==G0&&Y.minFilter!==Iu||Y.type===_u&&e.has("OES_texture_float_linear")===!1||l===!1&&Y.type===Jm&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||i.get(Y).__currentAnisotropy)&&(n.texParameterf(j,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy)}}function ye(j,Y){let ue=!1;j.__webglInit===void 0&&(j.__webglInit=!0,Y.addEventListener("dispose",Z));const me=Y.source;let Ie=S.get(me);Ie===void 0&&(Ie={},S.set(me,Ie));const ze=Q(Y);if(ze!==j.__cacheKey){Ie[ze]===void 0&&(Ie[ze]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ue=!0),Ie[ze].usedTimes++;const Se=Ie[j.__cacheKey];Se!==void 0&&(Ie[j.__cacheKey].usedTimes--,Se.usedTimes===0&&M(Y)),j.__cacheKey=ze,j.__webglTexture=Ie[ze].texture}return ue}function xe(j,Y,ue){let me=3553;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(me=35866),Y.isData3DTexture&&(me=32879);const Ie=ye(j,Y),ze=Y.source;t.bindTexture(me,j.__webglTexture,33984+ue);const Se=i.get(ze);if(ze.version!==Se.__version||Ie===!0){t.activeTexture(33984+ue),n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const Je=A(Y)&&$(Y.image)===!1;let Ve=E(Y.image,Je,!1,d);Ve=Te(Y,Ve);const ot=$(Ve)||l,_e=o.convert(Y.format,Y.encoding);let Le=o.convert(Y.type),We=R(Y.internalFormat,_e,Le,Y.encoding,Y.isVideoTexture);Ce(me,Y,ot);let F;const te=Y.mipmaps,ge=l&&Y.isVideoTexture!==!0,Me=Se.__version===void 0||Ie===!0,oe=B(Y,Ve,ot);if(Y.isDepthTexture)We=6402,l?Y.type===_u?We=36012:Y.type===of?We=33190:Y.type===Pm?We=35056:We=33189:Y.type===_u&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===Tf&&We===6402&&Y.type!==GB&&Y.type!==of&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=of,Le=o.convert(Y.type)),Y.format===Km&&We===6402&&(We=34041,Y.type!==Pm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=Pm,Le=o.convert(Y.type))),Me&&(ge?t.texStorage2D(3553,1,We,Ve.width,Ve.height):t.texImage2D(3553,0,We,Ve.width,Ve.height,0,_e,Le,null));else if(Y.isDataTexture)if(te.length>0&&ot){ge&&Me&&t.texStorage2D(3553,oe,We,te[0].width,te[0].height);for(let Pe=0,et=te.length;Pe<et;Pe++)F=te[Pe],ge?t.texSubImage2D(3553,Pe,0,0,F.width,F.height,_e,Le,F.data):t.texImage2D(3553,Pe,We,F.width,F.height,0,_e,Le,F.data);Y.generateMipmaps=!1}else ge?(Me&&t.texStorage2D(3553,oe,We,Ve.width,Ve.height),t.texSubImage2D(3553,0,0,0,Ve.width,Ve.height,_e,Le,Ve.data)):t.texImage2D(3553,0,We,Ve.width,Ve.height,0,_e,Le,Ve.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){ge&&Me&&t.texStorage3D(35866,oe,We,te[0].width,te[0].height,Ve.depth);for(let Pe=0,et=te.length;Pe<et;Pe++)F=te[Pe],Y.format!==ra?_e!==null?ge?t.compressedTexSubImage3D(35866,Pe,0,0,0,F.width,F.height,Ve.depth,_e,F.data,0,0):t.compressedTexImage3D(35866,Pe,We,F.width,F.height,Ve.depth,0,F.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?t.texSubImage3D(35866,Pe,0,0,0,F.width,F.height,Ve.depth,_e,Le,F.data):t.texImage3D(35866,Pe,We,F.width,F.height,Ve.depth,0,_e,Le,F.data)}else{ge&&Me&&t.texStorage2D(3553,oe,We,te[0].width,te[0].height);for(let Pe=0,et=te.length;Pe<et;Pe++)F=te[Pe],Y.format!==ra?_e!==null?ge?t.compressedTexSubImage2D(3553,Pe,0,0,F.width,F.height,_e,F.data):t.compressedTexImage2D(3553,Pe,We,F.width,F.height,0,F.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?t.texSubImage2D(3553,Pe,0,0,F.width,F.height,_e,Le,F.data):t.texImage2D(3553,Pe,We,F.width,F.height,0,_e,Le,F.data)}else if(Y.isDataArrayTexture)ge?(Me&&t.texStorage3D(35866,oe,We,Ve.width,Ve.height,Ve.depth),t.texSubImage3D(35866,0,0,0,0,Ve.width,Ve.height,Ve.depth,_e,Le,Ve.data)):t.texImage3D(35866,0,We,Ve.width,Ve.height,Ve.depth,0,_e,Le,Ve.data);else if(Y.isData3DTexture)ge?(Me&&t.texStorage3D(32879,oe,We,Ve.width,Ve.height,Ve.depth),t.texSubImage3D(32879,0,0,0,0,Ve.width,Ve.height,Ve.depth,_e,Le,Ve.data)):t.texImage3D(32879,0,We,Ve.width,Ve.height,Ve.depth,0,_e,Le,Ve.data);else if(Y.isFramebufferTexture){if(Me)if(ge)t.texStorage2D(3553,oe,We,Ve.width,Ve.height);else{let Pe=Ve.width,et=Ve.height;for(let mt=0;mt<oe;mt++)t.texImage2D(3553,mt,We,Pe,et,0,_e,Le,null),Pe>>=1,et>>=1}}else if(te.length>0&&ot){ge&&Me&&t.texStorage2D(3553,oe,We,te[0].width,te[0].height);for(let Pe=0,et=te.length;Pe<et;Pe++)F=te[Pe],ge?t.texSubImage2D(3553,Pe,0,0,_e,Le,F):t.texImage2D(3553,Pe,We,_e,Le,F);Y.generateMipmaps=!1}else ge?(Me&&t.texStorage2D(3553,oe,We,Ve.width,Ve.height),t.texSubImage2D(3553,0,0,0,_e,Le,Ve)):t.texImage2D(3553,0,We,_e,Le,Ve);I(Y,ot)&&D(me),Se.__version=ze.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function Fe(j,Y,ue){if(Y.image.length!==6)return;const me=ye(j,Y),Ie=Y.source;t.bindTexture(34067,j.__webglTexture,33984+ue);const ze=i.get(Ie);if(Ie.version!==ze.__version||me===!0){t.activeTexture(33984+ue),n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const Se=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Je=Y.image[0]&&Y.image[0].isDataTexture,Ve=[];for(let Pe=0;Pe<6;Pe++)!Se&&!Je?Ve[Pe]=E(Y.image[Pe],!1,!0,h):Ve[Pe]=Je?Y.image[Pe].image:Y.image[Pe],Ve[Pe]=Te(Y,Ve[Pe]);const ot=Ve[0],_e=$(ot)||l,Le=o.convert(Y.format,Y.encoding),We=o.convert(Y.type),F=R(Y.internalFormat,Le,We,Y.encoding),te=l&&Y.isVideoTexture!==!0,ge=ze.__version===void 0||me===!0;let Me=B(Y,ot,_e);Ce(34067,Y,_e);let oe;if(Se){te&&ge&&t.texStorage2D(34067,Me,F,ot.width,ot.height);for(let Pe=0;Pe<6;Pe++){oe=Ve[Pe].mipmaps;for(let et=0;et<oe.length;et++){const mt=oe[et];Y.format!==ra?Le!==null?te?t.compressedTexSubImage2D(34069+Pe,et,0,0,mt.width,mt.height,Le,mt.data):t.compressedTexImage2D(34069+Pe,et,F,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):te?t.texSubImage2D(34069+Pe,et,0,0,mt.width,mt.height,Le,We,mt.data):t.texImage2D(34069+Pe,et,F,mt.width,mt.height,0,Le,We,mt.data)}}}else{oe=Y.mipmaps,te&&ge&&(oe.length>0&&Me++,t.texStorage2D(34067,Me,F,Ve[0].width,Ve[0].height));for(let Pe=0;Pe<6;Pe++)if(Je){te?t.texSubImage2D(34069+Pe,0,0,0,Ve[Pe].width,Ve[Pe].height,Le,We,Ve[Pe].data):t.texImage2D(34069+Pe,0,F,Ve[Pe].width,Ve[Pe].height,0,Le,We,Ve[Pe].data);for(let et=0;et<oe.length;et++){const bt=oe[et].image[Pe].image;te?t.texSubImage2D(34069+Pe,et+1,0,0,bt.width,bt.height,Le,We,bt.data):t.texImage2D(34069+Pe,et+1,F,bt.width,bt.height,0,Le,We,bt.data)}}else{te?t.texSubImage2D(34069+Pe,0,0,0,Le,We,Ve[Pe]):t.texImage2D(34069+Pe,0,F,Le,We,Ve[Pe]);for(let et=0;et<oe.length;et++){const mt=oe[et];te?t.texSubImage2D(34069+Pe,et+1,0,0,Le,We,mt.image[Pe]):t.texImage2D(34069+Pe,et+1,F,Le,We,mt.image[Pe])}}}I(Y,_e)&&D(34067),ze.__version=Ie.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function Xe(j,Y,ue,me,Ie){const ze=o.convert(ue.format,ue.encoding),Se=o.convert(ue.type),Je=R(ue.internalFormat,ze,Se,ue.encoding);i.get(Y).__hasExternalTextures||(Ie===32879||Ie===35866?t.texImage3D(Ie,0,Je,Y.width,Y.height,Y.depth,0,ze,Se,null):t.texImage2D(Ie,0,Je,Y.width,Y.height,0,ze,Se,null)),t.bindFramebuffer(36160,j),pe(Y)?m.framebufferTexture2DMultisampleEXT(36160,me,Ie,i.get(ue).__webglTexture,0,ne(Y)):(Ie===3553||Ie>=34069&&Ie<=34074)&&n.framebufferTexture2D(36160,me,Ie,i.get(ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ue(j,Y,ue){if(n.bindRenderbuffer(36161,j),Y.depthBuffer&&!Y.stencilBuffer){let me=33189;if(ue||pe(Y)){const Ie=Y.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===_u?me=36012:Ie.type===of&&(me=33190));const ze=ne(Y);pe(Y)?m.renderbufferStorageMultisampleEXT(36161,ze,me,Y.width,Y.height):n.renderbufferStorageMultisample(36161,ze,me,Y.width,Y.height)}else n.renderbufferStorage(36161,me,Y.width,Y.height);n.framebufferRenderbuffer(36160,36096,36161,j)}else if(Y.depthBuffer&&Y.stencilBuffer){const me=ne(Y);ue&&pe(Y)===!1?n.renderbufferStorageMultisample(36161,me,35056,Y.width,Y.height):pe(Y)?m.renderbufferStorageMultisampleEXT(36161,me,35056,Y.width,Y.height):n.renderbufferStorage(36161,34041,Y.width,Y.height),n.framebufferRenderbuffer(36160,33306,36161,j)}else{const me=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Ie=0;Ie<me.length;Ie++){const ze=me[Ie],Se=o.convert(ze.format,ze.encoding),Je=o.convert(ze.type),Ve=R(ze.internalFormat,Se,Je,ze.encoding),ot=ne(Y);ue&&pe(Y)===!1?n.renderbufferStorageMultisample(36161,ot,Ve,Y.width,Y.height):pe(Y)?m.renderbufferStorageMultisampleEXT(36161,ot,Ve,Y.width,Y.height):n.renderbufferStorage(36161,Ve,Y.width,Y.height)}}n.bindRenderbuffer(36161,null)}function we(j,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),ee(Y.depthTexture,0);const me=i.get(Y.depthTexture).__webglTexture,Ie=ne(Y);if(Y.depthTexture.format===Tf)pe(Y)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,me,0,Ie):n.framebufferTexture2D(36160,36096,3553,me,0);else if(Y.depthTexture.format===Km)pe(Y)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,me,0,Ie):n.framebufferTexture2D(36160,33306,3553,me,0);else throw new Error("Unknown depthTexture format")}function Ge(j){const Y=i.get(j),ue=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!Y.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");we(Y.__webglFramebuffer,j)}else if(ue){Y.__webglDepthbuffer=[];for(let me=0;me<6;me++)t.bindFramebuffer(36160,Y.__webglFramebuffer[me]),Y.__webglDepthbuffer[me]=n.createRenderbuffer(),Ue(Y.__webglDepthbuffer[me],j,!1)}else t.bindFramebuffer(36160,Y.__webglFramebuffer),Y.__webglDepthbuffer=n.createRenderbuffer(),Ue(Y.__webglDepthbuffer,j,!1);t.bindFramebuffer(36160,null)}function W(j,Y,ue){const me=i.get(j);Y!==void 0&&Xe(me.__webglFramebuffer,j,j.texture,36064,3553),ue!==void 0&&Ge(j)}function Ee(j){const Y=j.texture,ue=i.get(j),me=i.get(Y);j.addEventListener("dispose",N),j.isWebGLMultipleRenderTargets!==!0&&(me.__webglTexture===void 0&&(me.__webglTexture=n.createTexture()),me.__version=Y.version,a.memory.textures++);const Ie=j.isWebGLCubeRenderTarget===!0,ze=j.isWebGLMultipleRenderTargets===!0,Se=$(j)||l;if(Ie){ue.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)ue.__webglFramebuffer[Je]=n.createFramebuffer()}else{if(ue.__webglFramebuffer=n.createFramebuffer(),ze)if(r.drawBuffers){const Je=j.texture;for(let Ve=0,ot=Je.length;Ve<ot;Ve++){const _e=i.get(Je[Ve]);_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&j.samples>0&&pe(j)===!1){const Je=ze?Y:[Y];ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Je.length;Ve++){const ot=Je[Ve];ue.__webglColorRenderbuffer[Ve]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ue.__webglColorRenderbuffer[Ve]);const _e=o.convert(ot.format,ot.encoding),Le=o.convert(ot.type),We=R(ot.internalFormat,_e,Le,ot.encoding,j.isXRRenderTarget===!0),F=ne(j);n.renderbufferStorageMultisample(36161,F,We,j.width,j.height),n.framebufferRenderbuffer(36160,36064+Ve,36161,ue.__webglColorRenderbuffer[Ve])}n.bindRenderbuffer(36161,null),j.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),Ue(ue.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}}if(Ie){t.bindTexture(34067,me.__webglTexture),Ce(34067,Y,Se);for(let Je=0;Je<6;Je++)Xe(ue.__webglFramebuffer[Je],j,Y,36064,34069+Je);I(Y,Se)&&D(34067),t.unbindTexture()}else if(ze){const Je=j.texture;for(let Ve=0,ot=Je.length;Ve<ot;Ve++){const _e=Je[Ve],Le=i.get(_e);t.bindTexture(3553,Le.__webglTexture),Ce(3553,_e,Se),Xe(ue.__webglFramebuffer,j,_e,36064+Ve,3553),I(_e,Se)&&D(3553)}t.unbindTexture()}else{let Je=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(l?Je=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Je,me.__webglTexture),Ce(Je,Y,Se),Xe(ue.__webglFramebuffer,j,Y,36064,Je),I(Y,Se)&&D(Je),t.unbindTexture()}j.depthBuffer&&Ge(j)}function Oe(j){const Y=$(j)||l,ue=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let me=0,Ie=ue.length;me<Ie;me++){const ze=ue[me];if(I(ze,Y)){const Se=j.isWebGLCubeRenderTarget?34067:3553,Je=i.get(ze).__webglTexture;t.bindTexture(Se,Je),D(Se),t.unbindTexture()}}}function ae(j){if(l&&j.samples>0&&pe(j)===!1){const Y=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],ue=j.width,me=j.height;let Ie=16384;const ze=[],Se=j.stencilBuffer?33306:36096,Je=i.get(j),Ve=j.isWebGLMultipleRenderTargets===!0;if(Ve)for(let ot=0;ot<Y.length;ot++)t.bindFramebuffer(36160,Je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ot,36161,null),t.bindFramebuffer(36160,Je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ot,3553,null,0);t.bindFramebuffer(36008,Je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Je.__webglFramebuffer);for(let ot=0;ot<Y.length;ot++){ze.push(36064+ot),j.depthBuffer&&ze.push(Se);const _e=Je.__ignoreDepthValues!==void 0?Je.__ignoreDepthValues:!1;if(_e===!1&&(j.depthBuffer&&(Ie|=256),j.stencilBuffer&&(Ie|=1024)),Ve&&n.framebufferRenderbuffer(36008,36064,36161,Je.__webglColorRenderbuffer[ot]),_e===!0&&(n.invalidateFramebuffer(36008,[Se]),n.invalidateFramebuffer(36009,[Se])),Ve){const Le=i.get(Y[ot]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Le,0)}n.blitFramebuffer(0,0,ue,me,0,0,ue,me,Ie,9728),g&&n.invalidateFramebuffer(36008,ze)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ve)for(let ot=0;ot<Y.length;ot++){t.bindFramebuffer(36160,Je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ot,36161,Je.__webglColorRenderbuffer[ot]);const _e=i.get(Y[ot]).__webglTexture;t.bindFramebuffer(36160,Je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ot,3553,_e,0)}t.bindFramebuffer(36009,Je.__webglMultisampledFramebuffer)}}function ne(j){return Math.min(p,j.samples)}function pe(j){const Y=i.get(j);return l&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Ae(j){const Y=a.render.frame;v.get(j)!==Y&&(v.set(j,Y),j.update())}function Te(j,Y){const ue=j.encoding,me=j.format,Ie=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===j$||ue!==Yh&&(ue===Nn?l===!1?e.has("EXT_sRGB")===!0&&me===ra?(j.format=j$,j.minFilter=hi,j.generateMipmaps=!1):Y=XB.sRGBToLinear(Y):(me!==ra||Ie!==jh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ue)),Y}this.allocateTextureUnit=X,this.resetTextureUnits=ce,this.setTexture2D=ee,this.setTexture2DArray=z,this.setTexture3D=L,this.setTextureCube=le,this.rebindTextures=W,this.setupRenderTarget=Ee,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=ae,this.setupDepthRenderbuffer=Ge,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=pe}function oY(n,e,t){const i=t.isWebGL2;function r(o,a=null){let l;if(o===jh)return 5121;if(o===Aj)return 32819;if(o===kj)return 32820;if(o===xj)return 5120;if(o===$j)return 5122;if(o===GB)return 5123;if(o===Cj)return 5124;if(o===of)return 5125;if(o===_u)return 5126;if(o===Jm)return i?5131:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(o===Ij)return 6406;if(o===ra)return 6408;if(o===Rj)return 6409;if(o===Mj)return 6410;if(o===Tf)return 6402;if(o===Km)return 34041;if(o===j$)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(o===Pj)return 6403;if(o===Dj)return 36244;if(o===Lj)return 33319;if(o===Nj)return 33320;if(o===Bj)return 36249;if(o===Wx||o===zx||o===Qx||o===Vx)if(a===Nn)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(o===Wx)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===zx)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Qx)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Vx)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(o===Wx)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===zx)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Qx)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Vx)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===oD||o===aD||o===lD||o===cD)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(o===oD)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===aD)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===lD)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===cD)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===Fj)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===uD||o===hD)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(o===uD)return a===Nn?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(o===hD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===dD||o===fD||o===pD||o===mD||o===gD||o===_D||o===OD||o===vD||o===yD||o===bD||o===SD||o===TD||o===wD||o===ED)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(o===dD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===fD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===pD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===mD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===gD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===_D)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===OD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===vD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===yD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===bD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===SD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===TD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===wD)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===ED)return a===Nn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Hx)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(o===Hx)return a===Nn?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===Uj||o===xD||o===$D||o===CD)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(o===Hx)return l.COMPRESSED_RED_RGTC1_EXT;if(o===xD)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===$D)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===CD)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Pm?i?34042:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:r}}class aY extends Ci{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Nh extends Un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gpe={type:"move"};class xM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Nh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Nh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Nh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,a=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const y of e.hand.values()){const S=t.getJointPose(y,i),T=this._getHandJoint(h,y);S!==null&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=S.radius),T.visible=S!==null}const d=h.joints["index-finger-tip"],p=h.joints["thumb-tip"],m=d.position.distanceTo(p.position),g=.02,v=.005;h.inputState.pinching&&m>g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=g-v&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(u.matrix.fromArray(o.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),o.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(o.linearVelocity)):u.hasLinearVelocity=!1,o.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(o.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(gpe)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=o!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Nh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class JB extends Ri{constructor(e,t,i,r,o,a,l,u,h,d){if(d=d!==void 0?d:Tf,d!==Tf&&d!==Km)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Tf&&(i=of),i===void 0&&d===Km&&(i=Pm),super(null,r,o,a,l,u,d,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:fr,this.minFilter=u!==void 0?u:fr,this.flipY=!1,this.generateMipmaps=!1}}class _pe extends Pu{constructor(e,t){super();const i=this;let r=null,o=1,a=null,l="local-floor",u=1,h=null,d=null,p=null,m=null,g=null,v=null;const y=t.getContextAttributes();let S=null,T=null;const w=[],E=[],$=new Set,A=new Map,I=new Ci;I.layers.enable(1),I.viewport=new Fn;const D=new Ci;D.layers.enable(2),D.viewport=new Fn;const R=[I,D],B=new aY;B.layers.enable(1),B.layers.enable(2);let G=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let le=w[L];return le===void 0&&(le=new xM,w[L]=le),le.getTargetRaySpace()},this.getControllerGrip=function(L){let le=w[L];return le===void 0&&(le=new xM,w[L]=le),le.getGripSpace()},this.getHand=function(L){let le=w[L];return le===void 0&&(le=new xM,w[L]=le),le.getHandSpace()};function N(L){const le=E.indexOf(L.inputSource);if(le===-1)return;const de=w[le];de!==void 0&&de.dispatchEvent({type:L.type,data:L.inputSource})}function H(){r.removeEventListener("select",N),r.removeEventListener("selectstart",N),r.removeEventListener("selectend",N),r.removeEventListener("squeeze",N),r.removeEventListener("squeezestart",N),r.removeEventListener("squeezeend",N),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",M);for(let L=0;L<w.length;L++){const le=E[L];le!==null&&(E[L]=null,w[L].disconnect(le))}G=null,Z=null,e.setRenderTarget(S),g=null,m=null,p=null,r=null,T=null,z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){o=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){l=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(L){h=L},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(L){if(r=L,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",N),r.addEventListener("selectstart",N),r.addEventListener("selectend",N),r.addEventListener("squeeze",N),r.addEventListener("squeezestart",N),r.addEventListener("squeezeend",N),r.addEventListener("end",H),r.addEventListener("inputsourceschange",M),y.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const le={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:y.alpha,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,le),r.updateRenderState({baseLayer:g}),T=new Rl(g.framebufferWidth,g.framebufferHeight,{format:ra,type:jh,encoding:e.outputEncoding,stencilBuffer:y.stencil})}else{let le=null,de=null,ie=null;y.depth&&(ie=y.stencil?35056:33190,le=y.stencil?Km:Tf,de=y.stencil?Pm:of);const Ce={colorFormat:32856,depthFormat:ie,scaleFactor:o};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(Ce),r.updateRenderState({layers:[m]}),T=new Rl(m.textureWidth,m.textureHeight,{format:ra,type:jh,depthTexture:new JB(m.textureWidth,m.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,le),stencilBuffer:y.stencil,encoding:e.outputEncoding,samples:y.antialias?4:0});const ye=e.properties.get(T);ye.__ignoreDepthValues=m.ignoreDepthValues}T.isXRRenderTarget=!0,this.setFoveation(u),h=null,a=await r.requestReferenceSpace(l),z.setContext(r),z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function M(L){for(let le=0;le<L.removed.length;le++){const de=L.removed[le],ie=E.indexOf(de);ie>=0&&(E[ie]=null,w[ie].disconnect(de))}for(let le=0;le<L.added.length;le++){const de=L.added[le];let ie=E.indexOf(de);if(ie===-1){for(let ye=0;ye<w.length;ye++)if(ye>=E.length){E.push(de),ie=ye;break}else if(E[ye]===null){E[ye]=de,ie=ye;break}if(ie===-1)break}const Ce=w[ie];Ce&&Ce.connect(de)}}const K=new he,re=new he;function ce(L,le,de){K.setFromMatrixPosition(le.matrixWorld),re.setFromMatrixPosition(de.matrixWorld);const ie=K.distanceTo(re),Ce=le.projectionMatrix.elements,ye=de.projectionMatrix.elements,xe=Ce[14]/(Ce[10]-1),Fe=Ce[14]/(Ce[10]+1),Xe=(Ce[9]+1)/Ce[5],Ue=(Ce[9]-1)/Ce[5],we=(Ce[8]-1)/Ce[0],Ge=(ye[8]+1)/ye[0],W=xe*we,Ee=xe*Ge,Oe=ie/(-we+Ge),ae=Oe*-we;le.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(ae),L.translateZ(Oe),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const ne=xe+Oe,pe=Fe+Oe,Ae=W-ae,Te=Ee+(ie-ae),j=Xe*Fe/pe*ne,Y=Ue*Fe/pe*ne;L.projectionMatrix.makePerspective(Ae,Te,j,Y,ne,pe)}function X(L,le){le===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(le.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(r===null)return;B.near=D.near=I.near=L.near,B.far=D.far=I.far=L.far,(G!==B.near||Z!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),G=B.near,Z=B.far);const le=L.parent,de=B.cameras;X(B,le);for(let Ce=0;Ce<de.length;Ce++)X(de[Ce],le);B.matrixWorld.decompose(B.position,B.quaternion,B.scale),L.matrix.copy(B.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale);const ie=L.children;for(let Ce=0,ye=ie.length;Ce<ye;Ce++)ie[Ce].updateMatrixWorld(!0);de.length===2?ce(B,I,D):B.projectionMatrix.copy(I.projectionMatrix)},this.getCamera=function(){return B},this.getFoveation=function(){if(!(m===null&&g===null))return u},this.setFoveation=function(L){u=L,m!==null&&(m.fixedFoveation=L),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=L)},this.getPlanes=function(){return $};let Q=null;function ee(L,le){if(d=le.getViewerPose(h||a),v=le,d!==null){const de=d.views;g!==null&&(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let ie=!1;de.length!==B.cameras.length&&(B.cameras.length=0,ie=!0);for(let Ce=0;Ce<de.length;Ce++){const ye=de[Ce];let xe=null;if(g!==null)xe=g.getViewport(ye);else{const Xe=p.getViewSubImage(m,ye);xe=Xe.viewport,Ce===0&&(e.setRenderTargetTextures(T,Xe.colorTexture,m.ignoreDepthValues?void 0:Xe.depthStencilTexture),e.setRenderTarget(T))}let Fe=R[Ce];Fe===void 0&&(Fe=new Ci,Fe.layers.enable(Ce),Fe.viewport=new Fn,R[Ce]=Fe),Fe.matrix.fromArray(ye.transform.matrix),Fe.projectionMatrix.fromArray(ye.projectionMatrix),Fe.viewport.set(xe.x,xe.y,xe.width,xe.height),Ce===0&&B.matrix.copy(Fe.matrix),ie===!0&&B.cameras.push(Fe)}}for(let de=0;de<w.length;de++){const ie=E[de],Ce=w[de];ie!==null&&Ce!==void 0&&Ce.update(ie,le,h||a)}if(Q&&Q(L,le),le.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:le.detectedPlanes});let de=null;for(const ie of $)le.detectedPlanes.has(ie)||(de===null&&(de=[]),de.push(ie));if(de!==null)for(const ie of de)$.delete(ie),A.delete(ie),i.dispatchEvent({type:"planeremoved",data:ie});for(const ie of le.detectedPlanes)if(!$.has(ie))$.add(ie),A.set(ie,le.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ie});else{const Ce=A.get(ie);ie.lastChangedTime>Ce&&(A.set(ie,ie.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ie}))}}v=null}const z=new tY;z.setAnimationLoop(ee),this.setAnimationLoop=function(L){Q=L},this.dispose=function(){}}}function Ope(n,e){function t(y,S){S.color.getRGB(y.fogColor.value,Jj(n)),S.isFog?(y.fogNear.value=S.near,y.fogFar.value=S.far):S.isFogExp2&&(y.fogDensity.value=S.density)}function i(y,S,T,w,E){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(y,S):S.isMeshToonMaterial?(r(y,S),d(y,S)):S.isMeshPhongMaterial?(r(y,S),h(y,S)):S.isMeshStandardMaterial?(r(y,S),p(y,S),S.isMeshPhysicalMaterial&&m(y,S,E)):S.isMeshMatcapMaterial?(r(y,S),g(y,S)):S.isMeshDepthMaterial?r(y,S):S.isMeshDistanceMaterial?(r(y,S),v(y,S)):S.isMeshNormalMaterial?r(y,S):S.isLineBasicMaterial?(o(y,S),S.isLineDashedMaterial&&a(y,S)):S.isPointsMaterial?l(y,S,T,w):S.isSpriteMaterial?u(y,S):S.isShadowMaterial?(y.color.value.copy(S.color),y.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(y,S){y.opacity.value=S.opacity,S.color&&y.diffuse.value.copy(S.color),S.emissive&&y.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(y.map.value=S.map),S.alphaMap&&(y.alphaMap.value=S.alphaMap),S.bumpMap&&(y.bumpMap.value=S.bumpMap,y.bumpScale.value=S.bumpScale,S.side===Xs&&(y.bumpScale.value*=-1)),S.displacementMap&&(y.displacementMap.value=S.displacementMap,y.displacementScale.value=S.displacementScale,y.displacementBias.value=S.displacementBias),S.emissiveMap&&(y.emissiveMap.value=S.emissiveMap),S.normalMap&&(y.normalMap.value=S.normalMap,y.normalScale.value.copy(S.normalScale),S.side===Xs&&y.normalScale.value.negate()),S.specularMap&&(y.specularMap.value=S.specularMap),S.alphaTest>0&&(y.alphaTest.value=S.alphaTest);const T=e.get(S).envMap;if(T&&(y.envMap.value=T,y.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=S.reflectivity,y.ior.value=S.ior,y.refractionRatio.value=S.refractionRatio),S.lightMap){y.lightMap.value=S.lightMap;const $=n.useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=S.lightMapIntensity*$}S.aoMap&&(y.aoMap.value=S.aoMap,y.aoMapIntensity.value=S.aoMapIntensity);let w;S.map?w=S.map:S.specularMap?w=S.specularMap:S.displacementMap?w=S.displacementMap:S.normalMap?w=S.normalMap:S.bumpMap?w=S.bumpMap:S.roughnessMap?w=S.roughnessMap:S.metalnessMap?w=S.metalnessMap:S.alphaMap?w=S.alphaMap:S.emissiveMap?w=S.emissiveMap:S.clearcoatMap?w=S.clearcoatMap:S.clearcoatNormalMap?w=S.clearcoatNormalMap:S.clearcoatRoughnessMap?w=S.clearcoatRoughnessMap:S.iridescenceMap?w=S.iridescenceMap:S.iridescenceThicknessMap?w=S.iridescenceThicknessMap:S.specularIntensityMap?w=S.specularIntensityMap:S.specularColorMap?w=S.specularColorMap:S.transmissionMap?w=S.transmissionMap:S.thicknessMap?w=S.thicknessMap:S.sheenColorMap?w=S.sheenColorMap:S.sheenRoughnessMap&&(w=S.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),y.uvTransform.value.copy(w.matrix));let E;S.aoMap?E=S.aoMap:S.lightMap&&(E=S.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uv2Transform.value.copy(E.matrix))}function o(y,S){y.diffuse.value.copy(S.color),y.opacity.value=S.opacity}function a(y,S){y.dashSize.value=S.dashSize,y.totalSize.value=S.dashSize+S.gapSize,y.scale.value=S.scale}function l(y,S,T,w){y.diffuse.value.copy(S.color),y.opacity.value=S.opacity,y.size.value=S.size*T,y.scale.value=w*.5,S.map&&(y.map.value=S.map),S.alphaMap&&(y.alphaMap.value=S.alphaMap),S.alphaTest>0&&(y.alphaTest.value=S.alphaTest);let E;S.map?E=S.map:S.alphaMap&&(E=S.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uvTransform.value.copy(E.matrix))}function u(y,S){y.diffuse.value.copy(S.color),y.opacity.value=S.opacity,y.rotation.value=S.rotation,S.map&&(y.map.value=S.map),S.alphaMap&&(y.alphaMap.value=S.alphaMap),S.alphaTest>0&&(y.alphaTest.value=S.alphaTest);let T;S.map?T=S.map:S.alphaMap&&(T=S.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),y.uvTransform.value.copy(T.matrix))}function h(y,S){y.specular.value.copy(S.specular),y.shininess.value=Math.max(S.shininess,1e-4)}function d(y,S){S.gradientMap&&(y.gradientMap.value=S.gradientMap)}function p(y,S){y.roughness.value=S.roughness,y.metalness.value=S.metalness,S.roughnessMap&&(y.roughnessMap.value=S.roughnessMap),S.metalnessMap&&(y.metalnessMap.value=S.metalnessMap),e.get(S).envMap&&(y.envMapIntensity.value=S.envMapIntensity)}function m(y,S,T){y.ior.value=S.ior,S.sheen>0&&(y.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),y.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(y.sheenColorMap.value=S.sheenColorMap),S.sheenRoughnessMap&&(y.sheenRoughnessMap.value=S.sheenRoughnessMap)),S.clearcoat>0&&(y.clearcoat.value=S.clearcoat,y.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(y.clearcoatMap.value=S.clearcoatMap),S.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap),S.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),y.clearcoatNormalMap.value=S.clearcoatNormalMap,S.side===Xs&&y.clearcoatNormalScale.value.negate())),S.iridescence>0&&(y.iridescence.value=S.iridescence,y.iridescenceIOR.value=S.iridescenceIOR,y.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(y.iridescenceMap.value=S.iridescenceMap),S.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=S.iridescenceThicknessMap)),S.transmission>0&&(y.transmission.value=S.transmission,y.transmissionSamplerMap.value=T.texture,y.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(y.transmissionMap.value=S.transmissionMap),y.thickness.value=S.thickness,S.thicknessMap&&(y.thicknessMap.value=S.thicknessMap),y.attenuationDistance.value=S.attenuationDistance,y.attenuationColor.value.copy(S.attenuationColor)),y.specularIntensity.value=S.specularIntensity,y.specularColor.value.copy(S.specularColor),S.specularIntensityMap&&(y.specularIntensityMap.value=S.specularIntensityMap),S.specularColorMap&&(y.specularColorMap.value=S.specularColorMap)}function g(y,S){S.matcap&&(y.matcap.value=S.matcap)}function v(y,S){y.referencePosition.value.copy(S.referencePosition),y.nearDistance.value=S.nearDistance,y.farDistance.value=S.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function vpe(n,e,t,i){let r={},o={},a=[];const l=t.isWebGL2?n.getParameter(35375):0;function u(w,E){const $=E.program;i.uniformBlockBinding(w,$)}function h(w,E){let $=r[w.id];$===void 0&&(v(w),$=d(w),r[w.id]=$,w.addEventListener("dispose",S));const A=E.program;i.updateUBOMapping(w,A);const I=e.render.frame;o[w.id]!==I&&(m(w),o[w.id]=I)}function d(w){const E=p();w.__bindingPointIndex=E;const $=n.createBuffer(),A=w.__size,I=w.usage;return n.bindBuffer(35345,$),n.bufferData(35345,A,I),n.bindBuffer(35345,null),n.bindBufferBase(35345,E,$),$}function p(){for(let w=0;w<l;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(w){const E=r[w.id],$=w.uniforms,A=w.__cache;n.bindBuffer(35345,E);for(let I=0,D=$.length;I<D;I++){const R=$[I];if(g(R,I,A)===!0){const B=R.__offset,G=Array.isArray(R.value)?R.value:[R.value];let Z=0;for(let N=0;N<G.length;N++){const H=G[N],M=y(H);typeof H=="number"?(R.__data[0]=H,n.bufferSubData(35345,B+Z,R.__data)):H.isMatrix3?(R.__data[0]=H.elements[0],R.__data[1]=H.elements[1],R.__data[2]=H.elements[2],R.__data[3]=H.elements[0],R.__data[4]=H.elements[3],R.__data[5]=H.elements[4],R.__data[6]=H.elements[5],R.__data[7]=H.elements[0],R.__data[8]=H.elements[6],R.__data[9]=H.elements[7],R.__data[10]=H.elements[8],R.__data[11]=H.elements[0]):(H.toArray(R.__data,Z),Z+=M.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,B,R.__data)}}n.bindBuffer(35345,null)}function g(w,E,$){const A=w.value;if($[E]===void 0){if(typeof A=="number")$[E]=A;else{const I=Array.isArray(A)?A:[A],D=[];for(let R=0;R<I.length;R++)D.push(I[R].clone());$[E]=D}return!0}else if(typeof A=="number"){if($[E]!==A)return $[E]=A,!0}else{const I=Array.isArray($[E])?$[E]:[$[E]],D=Array.isArray(A)?A:[A];for(let R=0;R<I.length;R++){const B=I[R];if(B.equals(D[R])===!1)return B.copy(D[R]),!0}}return!1}function v(w){const E=w.uniforms;let $=0;const A=16;let I=0;for(let D=0,R=E.length;D<R;D++){const B=E[D],G={boundary:0,storage:0},Z=Array.isArray(B.value)?B.value:[B.value];for(let N=0,H=Z.length;N<H;N++){const M=Z[N],K=y(M);G.boundary+=K.boundary,G.storage+=K.storage}if(B.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=$,D>0){I=$%A;const N=A-I;I!==0&&N-G.boundary<0&&($+=A-I,B.__offset=$)}$+=G.storage}return I=$%A,I>0&&($+=A-I),w.__size=$,w.__cache={},this}function y(w){const E={boundary:0,storage:0};return typeof w=="number"?(E.boundary=4,E.storage=4):w.isVector2?(E.boundary=8,E.storage=8):w.isVector3||w.isColor?(E.boundary=16,E.storage=12):w.isVector4?(E.boundary=16,E.storage=16):w.isMatrix3?(E.boundary=48,E.storage=48):w.isMatrix4?(E.boundary=64,E.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),E}function S(w){const E=w.target;E.removeEventListener("dispose",S);const $=a.indexOf(E.__bindingPointIndex);a.splice($,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete o[E.id]}function T(){for(const w in r)n.deleteBuffer(r[w]);a=[],r={},o={}}return{bind:u,update:h,dispose:T}}function ype(){const n=TS("canvas");return n.style.display="block",n}function AA(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:ype(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,u=n.powerPreference!==void 0?n.powerPreference:"default",h=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let p=null,m=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Yh,this.useLegacyLights=!0,this.toneMapping=Oc,this.toneMappingExposure=1;const y=this;let S=!1,T=0,w=0,E=null,$=-1,A=null;const I=new Fn,D=new Fn;let R=null,B=e.width,G=e.height,Z=1,N=null,H=null;const M=new Fn(0,0,B,G),K=new Fn(0,0,B,G);let re=!1;const ce=new EA;let X=!1,Q=!1,ee=null;const z=new hn,L=new he,le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return E===null?Z:1}let ie=t;function Ce(fe,Qe){for(let Ye=0;Ye<fe.length;Ye++){const Ne=fe[Ye],qe=e.getContext(Ne,Qe);if(qe!==null)return qe}return null}try{const fe={alpha:!0,depth:i,stencil:r,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${OA}`),e.addEventListener("webglcontextlost",Le,!1),e.addEventListener("webglcontextrestored",We,!1),e.addEventListener("webglcontextcreationerror",F,!1),ie===null){const Qe=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&Qe.shift(),ie=Ce(Qe,fe),ie===null)throw Ce(Qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}let ye,xe,Fe,Xe,Ue,we,Ge,W,Ee,Oe,ae,ne,pe,Ae,Te,j,Y,ue,me,Ie,ze,Se,Je,Ve;function ot(){ye=new Lde(ie),xe=new kde(ie,ye,n),ye.init(xe),Se=new oY(ie,ye,xe),Fe=new ppe(ie,ye,xe),Xe=new Fde,Ue=new npe,we=new mpe(ie,ye,Fe,Ue,xe,Se,Xe),Ge=new Rde(y),W=new Dde(y),Ee=new jce(ie,xe),Je=new Cde(ie,ye,Ee,xe),Oe=new Nde(ie,Ee,Xe,Je),ae=new zde(ie,Oe,Ee,Xe),me=new Wde(ie,xe,we),j=new Ide(Ue),ne=new tpe(y,Ge,W,ye,xe,Je,j),pe=new Ope(y,Ue),Ae=new rpe,Te=new upe(ye,xe),ue=new $de(y,Ge,W,Fe,ae,d,a),Y=new fpe(y,ae,xe),Ve=new vpe(ie,Xe,xe,Fe),Ie=new Ade(ie,ye,Xe,xe),ze=new Bde(ie,ye,Xe,xe),Xe.programs=ne.programs,y.capabilities=xe,y.extensions=ye,y.properties=Ue,y.renderLists=Ae,y.shadowMap=Y,y.state=Fe,y.info=Xe}ot();const _e=new _pe(y,ie);this.xr=_e,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const fe=ye.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){const fe=ye.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(fe){fe!==void 0&&(Z=fe,this.setSize(B,G,!1))},this.getSize=function(fe){return fe.set(B,G)},this.setSize=function(fe,Qe,Ye=!0){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=fe,G=Qe,e.width=Math.floor(fe*Z),e.height=Math.floor(Qe*Z),Ye===!0&&(e.style.width=fe+"px",e.style.height=Qe+"px"),this.setViewport(0,0,fe,Qe)},this.getDrawingBufferSize=function(fe){return fe.set(B*Z,G*Z).floor()},this.setDrawingBufferSize=function(fe,Qe,Ye){B=fe,G=Qe,Z=Ye,e.width=Math.floor(fe*Ye),e.height=Math.floor(Qe*Ye),this.setViewport(0,0,fe,Qe)},this.getCurrentViewport=function(fe){return fe.copy(I)},this.getViewport=function(fe){return fe.copy(M)},this.setViewport=function(fe,Qe,Ye,Ne){fe.isVector4?M.set(fe.x,fe.y,fe.z,fe.w):M.set(fe,Qe,Ye,Ne),Fe.viewport(I.copy(M).multiplyScalar(Z).floor())},this.getScissor=function(fe){return fe.copy(K)},this.setScissor=function(fe,Qe,Ye,Ne){fe.isVector4?K.set(fe.x,fe.y,fe.z,fe.w):K.set(fe,Qe,Ye,Ne),Fe.scissor(D.copy(K).multiplyScalar(Z).floor())},this.getScissorTest=function(){return re},this.setScissorTest=function(fe){Fe.setScissorTest(re=fe)},this.setOpaqueSort=function(fe){N=fe},this.setTransparentSort=function(fe){H=fe},this.getClearColor=function(fe){return fe.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(fe=!0,Qe=!0,Ye=!0){let Ne=0;fe&&(Ne|=16384),Qe&&(Ne|=256),Ye&&(Ne|=1024),ie.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Le,!1),e.removeEventListener("webglcontextrestored",We,!1),e.removeEventListener("webglcontextcreationerror",F,!1),Ae.dispose(),Te.dispose(),Ue.dispose(),Ge.dispose(),W.dispose(),ae.dispose(),Je.dispose(),Ve.dispose(),ne.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",et),_e.removeEventListener("sessionend",mt),ee&&(ee.dispose(),ee=null),bt.stop()};function Le(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function We(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const fe=Xe.autoReset,Qe=Y.enabled,Ye=Y.autoUpdate,Ne=Y.needsUpdate,qe=Y.type;ot(),Xe.autoReset=fe,Y.enabled=Qe,Y.autoUpdate=Ye,Y.needsUpdate=Ne,Y.type=qe}function F(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function te(fe){const Qe=fe.target;Qe.removeEventListener("dispose",te),ge(Qe)}function ge(fe){Me(fe),Ue.remove(fe)}function Me(fe){const Qe=Ue.get(fe).programs;Qe!==void 0&&(Qe.forEach(function(Ye){ne.releaseProgram(Ye)}),fe.isShaderMaterial&&ne.releaseShaderCache(fe))}this.renderBufferDirect=function(fe,Qe,Ye,Ne,qe,Pt){Qe===null&&(Qe=le);const At=qe.isMesh&&qe.matrixWorld.determinant()<0,Zt=Ss(fe,Qe,Ye,Ne,qe);Fe.setMaterial(Ne,At);let Jt=Ye.index,tn=1;Ne.wireframe===!0&&(Jt=Oe.getWireframeAttribute(Ye),tn=2);const qt=Ye.drawRange,at=Ye.attributes.position;let fi=qt.start*tn,mr=(qt.start+qt.count)*tn;Pt!==null&&(fi=Math.max(fi,Pt.start*tn),mr=Math.min(mr,(Pt.start+Pt.count)*tn)),Jt!==null?(fi=Math.max(fi,0),mr=Math.min(mr,Jt.count)):at!=null&&(fi=Math.max(fi,0),mr=Math.min(mr,at.count));const gr=mr-fi;if(gr<0||gr===1/0)return;Je.setup(qe,Ne,Zt,Ye,Jt);let Ts,cn=Ie;if(Jt!==null&&(Ts=Ee.get(Jt),cn=ze,cn.setIndex(Ts)),qe.isMesh)Ne.wireframe===!0?(Fe.setLineWidth(Ne.wireframeLinewidth*de()),cn.setMode(1)):cn.setMode(4);else if(qe.isLine){let rt=Ne.linewidth;rt===void 0&&(rt=1),Fe.setLineWidth(rt*de()),qe.isLineSegments?cn.setMode(1):qe.isLineLoop?cn.setMode(2):cn.setMode(3)}else qe.isPoints?cn.setMode(0):qe.isSprite&&cn.setMode(4);if(qe.isInstancedMesh)cn.renderInstances(fi,gr,qe.count);else if(Ye.isInstancedBufferGeometry){const rt=Ye._maxInstanceCount!==void 0?Ye._maxInstanceCount:1/0,Dn=Math.min(Ye.instanceCount,rt);cn.renderInstances(fi,gr,Dn)}else cn.render(fi,gr)},this.compile=function(fe,Qe){function Ye(Ne,qe,Pt){Ne.transparent===!0&&Ne.side===El&&Ne.forceSinglePass===!1?(Ne.side=Xs,Ne.needsUpdate=!0,on(Ne,qe,Pt),Ne.side=Sc,Ne.needsUpdate=!0,on(Ne,qe,Pt),Ne.side=El):on(Ne,qe,Pt)}m=Te.get(fe),m.init(),v.push(m),fe.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Qe.layers)&&(m.pushLight(Ne),Ne.castShadow&&m.pushShadow(Ne))}),m.setupLights(y.useLegacyLights),fe.traverse(function(Ne){const qe=Ne.material;if(qe)if(Array.isArray(qe))for(let Pt=0;Pt<qe.length;Pt++){const At=qe[Pt];Ye(At,fe,Ne)}else Ye(qe,fe,Ne)}),v.pop(),m=null};let oe=null;function Pe(fe){oe&&oe(fe)}function et(){bt.stop()}function mt(){bt.start()}const bt=new tY;bt.setAnimationLoop(Pe),typeof self<"u"&&bt.setContext(self),this.setAnimationLoop=function(fe){oe=fe,_e.setAnimationLoop(fe),fe===null?bt.stop():bt.start()},_e.addEventListener("sessionstart",et),_e.addEventListener("sessionend",mt),this.render=function(fe,Qe){if(Qe!==void 0&&Qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),Qe.parent===null&&Qe.matrixWorldAutoUpdate===!0&&Qe.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(Qe),Qe=_e.getCamera()),fe.isScene===!0&&fe.onBeforeRender(y,fe,Qe,E),m=Te.get(fe,v.length),m.init(),v.push(m),z.multiplyMatrices(Qe.projectionMatrix,Qe.matrixWorldInverse),ce.setFromProjectionMatrix(z),Q=this.localClippingEnabled,X=j.init(this.clippingPlanes,Q),p=Ae.get(fe,g.length),p.init(),g.push(p),Tn(fe,Qe,0,y.sortObjects),p.finish(),y.sortObjects===!0&&p.sort(N,H),X===!0&&j.beginShadows();const Ye=m.state.shadowsArray;if(Y.render(Ye,fe,Qe),X===!0&&j.endShadows(),this.info.autoReset===!0&&this.info.reset(),ue.render(p,fe),m.setupLights(y.useLegacyLights),Qe.isArrayCamera){const Ne=Qe.cameras;for(let qe=0,Pt=Ne.length;qe<Pt;qe++){const At=Ne[qe];wn(p,fe,At,At.viewport)}}else wn(p,fe,Qe);E!==null&&(we.updateMultisampleRenderTarget(E),we.updateRenderTargetMipmap(E)),fe.isScene===!0&&fe.onAfterRender(y,fe,Qe),Je.resetDefaultState(),$=-1,A=null,v.pop(),v.length>0?m=v[v.length-1]:m=null,g.pop(),g.length>0?p=g[g.length-1]:p=null};function Tn(fe,Qe,Ye,Ne){if(fe.visible===!1)return;if(fe.layers.test(Qe.layers)){if(fe.isGroup)Ye=fe.renderOrder;else if(fe.isLOD)fe.autoUpdate===!0&&fe.update(Qe);else if(fe.isLight)m.pushLight(fe),fe.castShadow&&m.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||ce.intersectsSprite(fe)){Ne&&L.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(z);const At=ae.update(fe),Zt=fe.material;Zt.visible&&p.push(fe,At,Zt,Ye,L.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(fe.isSkinnedMesh&&fe.skeleton.frame!==Xe.render.frame&&(fe.skeleton.update(),fe.skeleton.frame=Xe.render.frame),!fe.frustumCulled||ce.intersectsObject(fe))){Ne&&L.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(z);const At=ae.update(fe),Zt=fe.material;if(Array.isArray(Zt)){const Jt=At.groups;for(let tn=0,qt=Jt.length;tn<qt;tn++){const at=Jt[tn],fi=Zt[at.materialIndex];fi&&fi.visible&&p.push(fe,At,fi,Ye,L.z,at)}}else Zt.visible&&p.push(fe,At,Zt,Ye,L.z,null)}}const Pt=fe.children;for(let At=0,Zt=Pt.length;At<Zt;At++)Tn(Pt[At],Qe,Ye,Ne)}function wn(fe,Qe,Ye,Ne){const qe=fe.opaque,Pt=fe.transmissive,At=fe.transparent;m.setupLightsView(Ye),X===!0&&j.setGlobalState(y.clippingPlanes,Ye),Pt.length>0&&Gn(qe,Qe,Ye),Ne&&Fe.viewport(I.copy(Ne)),qe.length>0&&vn(qe,Qe,Ye),Pt.length>0&&vn(Pt,Qe,Ye),At.length>0&&vn(At,Qe,Ye),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function Gn(fe,Qe,Ye){const Ne=xe.isWebGL2;ee===null&&(ee=new Rl(1024,1024,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?Jm:jh,minFilter:Iu,samples:Ne&&o===!0?4:0}));const qe=y.getRenderTarget();y.setRenderTarget(ee),y.clear();const Pt=y.toneMapping;y.toneMapping=Oc,vn(fe,Qe,Ye),y.toneMapping=Pt,we.updateMultisampleRenderTarget(ee),we.updateRenderTargetMipmap(ee),y.setRenderTarget(qe)}function vn(fe,Qe,Ye){const Ne=Qe.isScene===!0?Qe.overrideMaterial:null;for(let qe=0,Pt=fe.length;qe<Pt;qe++){const At=fe[qe],Zt=At.object,Jt=At.geometry,tn=Ne===null?At.material:Ne,qt=At.group;Zt.layers.test(Ye.layers)&&Wn(Zt,Qe,Ye,Jt,tn,qt)}}function Wn(fe,Qe,Ye,Ne,qe,Pt){fe.onBeforeRender(y,Qe,Ye,Ne,qe,Pt),fe.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),qe.onBeforeRender(y,Qe,Ye,Ne,fe,Pt),qe.transparent===!0&&qe.side===El&&qe.forceSinglePass===!1?(qe.side=Xs,qe.needsUpdate=!0,y.renderBufferDirect(Ye,Qe,Ne,qe,fe,Pt),qe.side=Sc,qe.needsUpdate=!0,y.renderBufferDirect(Ye,Qe,Ne,qe,fe,Pt),qe.side=El):y.renderBufferDirect(Ye,Qe,Ne,qe,fe,Pt),fe.onAfterRender(y,Qe,Ye,Ne,qe,Pt)}function on(fe,Qe,Ye){Qe.isScene!==!0&&(Qe=le);const Ne=Ue.get(fe),qe=m.state.lights,Pt=m.state.shadowsArray,At=qe.state.version,Zt=ne.getParameters(fe,qe.state,Pt,Qe,Ye),Jt=ne.getProgramCacheKey(Zt);let tn=Ne.programs;Ne.environment=fe.isMeshStandardMaterial?Qe.environment:null,Ne.fog=Qe.fog,Ne.envMap=(fe.isMeshStandardMaterial?W:Ge).get(fe.envMap||Ne.environment),tn===void 0&&(fe.addEventListener("dispose",te),tn=new Map,Ne.programs=tn);let qt=tn.get(Jt);if(qt!==void 0){if(Ne.currentProgram===qt&&Ne.lightsStateVersion===At)return xn(fe,Zt),qt}else Zt.uniforms=ne.getUniforms(fe),fe.onBuild(Ye,Zt,y),fe.onBeforeCompile(Zt,y),qt=ne.acquireProgram(Zt,Jt),tn.set(Jt,qt),Ne.uniforms=Zt.uniforms;const at=Ne.uniforms;(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||fe.clipping===!0)&&(at.clippingPlanes=j.uniform),xn(fe,Zt),Ne.needsLights=zn(fe),Ne.lightsStateVersion=At,Ne.needsLights&&(at.ambientLightColor.value=qe.state.ambient,at.lightProbe.value=qe.state.probe,at.directionalLights.value=qe.state.directional,at.directionalLightShadows.value=qe.state.directionalShadow,at.spotLights.value=qe.state.spot,at.spotLightShadows.value=qe.state.spotShadow,at.rectAreaLights.value=qe.state.rectArea,at.ltc_1.value=qe.state.rectAreaLTC1,at.ltc_2.value=qe.state.rectAreaLTC2,at.pointLights.value=qe.state.point,at.pointLightShadows.value=qe.state.pointShadow,at.hemisphereLights.value=qe.state.hemi,at.directionalShadowMap.value=qe.state.directionalShadowMap,at.directionalShadowMatrix.value=qe.state.directionalShadowMatrix,at.spotShadowMap.value=qe.state.spotShadowMap,at.spotLightMatrix.value=qe.state.spotLightMatrix,at.spotLightMap.value=qe.state.spotLightMap,at.pointShadowMap.value=qe.state.pointShadowMap,at.pointShadowMatrix.value=qe.state.pointShadowMatrix);const fi=qt.getUniforms(),mr=Yx.seqWithValue(fi.seq,at);return Ne.currentProgram=qt,Ne.uniformsList=mr,qt}function xn(fe,Qe){const Ye=Ue.get(fe);Ye.outputEncoding=Qe.outputEncoding,Ye.instancing=Qe.instancing,Ye.skinning=Qe.skinning,Ye.morphTargets=Qe.morphTargets,Ye.morphNormals=Qe.morphNormals,Ye.morphColors=Qe.morphColors,Ye.morphTargetsCount=Qe.morphTargetsCount,Ye.numClippingPlanes=Qe.numClippingPlanes,Ye.numIntersection=Qe.numClipIntersection,Ye.vertexAlphas=Qe.vertexAlphas,Ye.vertexTangents=Qe.vertexTangents,Ye.toneMapping=Qe.toneMapping}function Ss(fe,Qe,Ye,Ne,qe){Qe.isScene!==!0&&(Qe=le),we.resetTextureUnits();const Pt=Qe.fog,At=Ne.isMeshStandardMaterial?Qe.environment:null,Zt=E===null?y.outputEncoding:E.isXRRenderTarget===!0?E.texture.encoding:Yh,Jt=(Ne.isMeshStandardMaterial?W:Ge).get(Ne.envMap||At),tn=Ne.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,qt=!!Ne.normalMap&&!!Ye.attributes.tangent,at=!!Ye.morphAttributes.position,fi=!!Ye.morphAttributes.normal,mr=!!Ye.morphAttributes.color,gr=Ne.toneMapped?y.toneMapping:Oc,Ts=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,cn=Ts!==void 0?Ts.length:0,rt=Ue.get(Ne),Dn=m.state.lights;if(X===!0&&(Q===!0||fe!==A)){const ai=fe===A&&Ne.id===$;j.setState(Ne,fe,ai)}let nn=!1;Ne.version===rt.__version?(rt.needsLights&&rt.lightsStateVersion!==Dn.state.version||rt.outputEncoding!==Zt||qe.isInstancedMesh&&rt.instancing===!1||!qe.isInstancedMesh&&rt.instancing===!0||qe.isSkinnedMesh&&rt.skinning===!1||!qe.isSkinnedMesh&&rt.skinning===!0||rt.envMap!==Jt||Ne.fog===!0&&rt.fog!==Pt||rt.numClippingPlanes!==void 0&&(rt.numClippingPlanes!==j.numPlanes||rt.numIntersection!==j.numIntersection)||rt.vertexAlphas!==tn||rt.vertexTangents!==qt||rt.morphTargets!==at||rt.morphNormals!==fi||rt.morphColors!==mr||rt.toneMapping!==gr||xe.isWebGL2===!0&&rt.morphTargetsCount!==cn)&&(nn=!0):(nn=!0,rt.__version=Ne.version);let Et=rt.currentProgram;nn===!0&&(Et=on(Ne,Qe,qe));let Fu=!1,is=!1,rs=!1;const Jn=Et.getUniforms(),lt=rt.uniforms;if(Fe.useProgram(Et.program)&&(Fu=!0,is=!0,rs=!0),Ne.id!==$&&($=Ne.id,is=!0),Fu||A!==fe){if(Jn.setValue(ie,"projectionMatrix",fe.projectionMatrix),xe.logarithmicDepthBuffer&&Jn.setValue(ie,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),A!==fe&&(A=fe,is=!0,rs=!0),Ne.isShaderMaterial||Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshStandardMaterial||Ne.envMap){const ai=Jn.map.cameraPosition;ai!==void 0&&ai.setValue(ie,L.setFromMatrixPosition(fe.matrixWorld))}(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&Jn.setValue(ie,"isOrthographic",fe.isOrthographicCamera===!0),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial||Ne.isShadowMaterial||qe.isSkinnedMesh)&&Jn.setValue(ie,"viewMatrix",fe.matrixWorldInverse)}if(qe.isSkinnedMesh){Jn.setOptional(ie,qe,"bindMatrix"),Jn.setOptional(ie,qe,"bindMatrixInverse");const ai=qe.skeleton;ai&&(xe.floatVertexTextures?(ai.boneTexture===null&&ai.computeBoneTexture(),Jn.setValue(ie,"boneTexture",ai.boneTexture,we),Jn.setValue(ie,"boneTextureSize",ai.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const En=Ye.morphAttributes;if((En.position!==void 0||En.normal!==void 0||En.color!==void 0&&xe.isWebGL2===!0)&&me.update(qe,Ye,Et),(is||rt.receiveShadow!==qe.receiveShadow)&&(rt.receiveShadow=qe.receiveShadow,Jn.setValue(ie,"receiveShadow",qe.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(lt.envMap.value=Jt,lt.flipEnvMap.value=Jt.isCubeTexture&&Jt.isRenderTargetTexture===!1?-1:1),is&&(Jn.setValue(ie,"toneMappingExposure",y.toneMappingExposure),rt.needsLights&&Bt(lt,rs),Pt&&Ne.fog===!0&&pe.refreshFogUniforms(lt,Pt),pe.refreshMaterialUniforms(lt,Ne,Z,G,ee),Yx.upload(ie,rt.uniformsList,lt,we)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(Yx.upload(ie,rt.uniformsList,lt,we),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&Jn.setValue(ie,"center",qe.center),Jn.setValue(ie,"modelViewMatrix",qe.modelViewMatrix),Jn.setValue(ie,"normalMatrix",qe.normalMatrix),Jn.setValue(ie,"modelMatrix",qe.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const ai=Ne.uniformsGroups;for(let pi=0,_r=ai.length;pi<_r;pi++)if(xe.isWebGL2){const rn=ai[pi];Ve.update(rn,Et),Ve.bind(rn,Et)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Et}function Bt(fe,Qe){fe.ambientLightColor.needsUpdate=Qe,fe.lightProbe.needsUpdate=Qe,fe.directionalLights.needsUpdate=Qe,fe.directionalLightShadows.needsUpdate=Qe,fe.pointLights.needsUpdate=Qe,fe.pointLightShadows.needsUpdate=Qe,fe.spotLights.needsUpdate=Qe,fe.spotLightShadows.needsUpdate=Qe,fe.rectAreaLights.needsUpdate=Qe,fe.hemisphereLights.needsUpdate=Qe}function zn(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&fe.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(fe,Qe,Ye){Ue.get(fe.texture).__webglTexture=Qe,Ue.get(fe.depthTexture).__webglTexture=Ye;const Ne=Ue.get(fe);Ne.__hasExternalTextures=!0,Ne.__hasExternalTextures&&(Ne.__autoAllocateDepthBuffer=Ye===void 0,Ne.__autoAllocateDepthBuffer||ye.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,Qe){const Ye=Ue.get(fe);Ye.__webglFramebuffer=Qe,Ye.__useDefaultFramebuffer=Qe===void 0},this.setRenderTarget=function(fe,Qe=0,Ye=0){E=fe,T=Qe,w=Ye;let Ne=!0,qe=null,Pt=!1,At=!1;if(fe){const Jt=Ue.get(fe);Jt.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(36160,null),Ne=!1):Jt.__webglFramebuffer===void 0?we.setupRenderTarget(fe):Jt.__hasExternalTextures&&we.rebindTextures(fe,Ue.get(fe.texture).__webglTexture,Ue.get(fe.depthTexture).__webglTexture);const tn=fe.texture;(tn.isData3DTexture||tn.isDataArrayTexture||tn.isCompressedArrayTexture)&&(At=!0);const qt=Ue.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(qe=qt[Qe],Pt=!0):xe.isWebGL2&&fe.samples>0&&we.useMultisampledRTT(fe)===!1?qe=Ue.get(fe).__webglMultisampledFramebuffer:qe=qt,I.copy(fe.viewport),D.copy(fe.scissor),R=fe.scissorTest}else I.copy(M).multiplyScalar(Z).floor(),D.copy(K).multiplyScalar(Z).floor(),R=re;if(Fe.bindFramebuffer(36160,qe)&&xe.drawBuffers&&Ne&&Fe.drawBuffers(fe,qe),Fe.viewport(I),Fe.scissor(D),Fe.setScissorTest(R),Pt){const Jt=Ue.get(fe.texture);ie.framebufferTexture2D(36160,36064,34069+Qe,Jt.__webglTexture,Ye)}else if(At){const Jt=Ue.get(fe.texture),tn=Qe||0;ie.framebufferTextureLayer(36160,36064,Jt.__webglTexture,Ye||0,tn)}$=-1},this.readRenderTargetPixels=function(fe,Qe,Ye,Ne,qe,Pt,At){if(!(fe&&fe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Zt=Ue.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&At!==void 0&&(Zt=Zt[At]),Zt){Fe.bindFramebuffer(36160,Zt);try{const Jt=fe.texture,tn=Jt.format,qt=Jt.type;if(tn!==ra&&Se.convert(tn)!==ie.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const at=qt===Jm&&(ye.has("EXT_color_buffer_half_float")||xe.isWebGL2&&ye.has("EXT_color_buffer_float"));if(qt!==jh&&Se.convert(qt)!==ie.getParameter(35738)&&!(qt===_u&&(xe.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float")))&&!at){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qe>=0&&Qe<=fe.width-Ne&&Ye>=0&&Ye<=fe.height-qe&&ie.readPixels(Qe,Ye,Ne,qe,Se.convert(tn),Se.convert(qt),Pt)}finally{const Jt=E!==null?Ue.get(E).__webglFramebuffer:null;Fe.bindFramebuffer(36160,Jt)}}},this.copyFramebufferToTexture=function(fe,Qe,Ye=0){const Ne=Math.pow(2,-Ye),qe=Math.floor(Qe.image.width*Ne),Pt=Math.floor(Qe.image.height*Ne);we.setTexture2D(Qe,0),ie.copyTexSubImage2D(3553,Ye,0,0,fe.x,fe.y,qe,Pt),Fe.unbindTexture()},this.copyTextureToTexture=function(fe,Qe,Ye,Ne=0){const qe=Qe.image.width,Pt=Qe.image.height,At=Se.convert(Ye.format),Zt=Se.convert(Ye.type);we.setTexture2D(Ye,0),ie.pixelStorei(37440,Ye.flipY),ie.pixelStorei(37441,Ye.premultiplyAlpha),ie.pixelStorei(3317,Ye.unpackAlignment),Qe.isDataTexture?ie.texSubImage2D(3553,Ne,fe.x,fe.y,qe,Pt,At,Zt,Qe.image.data):Qe.isCompressedTexture?ie.compressedTexSubImage2D(3553,Ne,fe.x,fe.y,Qe.mipmaps[0].width,Qe.mipmaps[0].height,At,Qe.mipmaps[0].data):ie.texSubImage2D(3553,Ne,fe.x,fe.y,At,Zt,Qe.image),Ne===0&&Ye.generateMipmaps&&ie.generateMipmap(3553),Fe.unbindTexture()},this.copyTextureToTexture3D=function(fe,Qe,Ye,Ne,qe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pt=fe.max.x-fe.min.x+1,At=fe.max.y-fe.min.y+1,Zt=fe.max.z-fe.min.z+1,Jt=Se.convert(Ne.format),tn=Se.convert(Ne.type);let qt;if(Ne.isData3DTexture)we.setTexture3D(Ne,0),qt=32879;else if(Ne.isDataArrayTexture)we.setTexture2DArray(Ne,0),qt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ie.pixelStorei(37440,Ne.flipY),ie.pixelStorei(37441,Ne.premultiplyAlpha),ie.pixelStorei(3317,Ne.unpackAlignment);const at=ie.getParameter(3314),fi=ie.getParameter(32878),mr=ie.getParameter(3316),gr=ie.getParameter(3315),Ts=ie.getParameter(32877),cn=Ye.isCompressedTexture?Ye.mipmaps[0]:Ye.image;ie.pixelStorei(3314,cn.width),ie.pixelStorei(32878,cn.height),ie.pixelStorei(3316,fe.min.x),ie.pixelStorei(3315,fe.min.y),ie.pixelStorei(32877,fe.min.z),Ye.isDataTexture||Ye.isData3DTexture?ie.texSubImage3D(qt,qe,Qe.x,Qe.y,Qe.z,Pt,At,Zt,Jt,tn,cn.data):Ye.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(qt,qe,Qe.x,Qe.y,Qe.z,Pt,At,Zt,Jt,cn.data)):ie.texSubImage3D(qt,qe,Qe.x,Qe.y,Qe.z,Pt,At,Zt,Jt,tn,cn),ie.pixelStorei(3314,at),ie.pixelStorei(32878,fi),ie.pixelStorei(3316,mr),ie.pixelStorei(3315,gr),ie.pixelStorei(32877,Ts),qe===0&&Ne.generateMipmaps&&ie.generateMipmap(qt),Fe.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?we.setTextureCube(fe,0):fe.isData3DTexture?we.setTexture3D(fe,0):fe.isDataArrayTexture||fe.isCompressedArrayTexture?we.setTexture2DArray(fe,0):we.setTexture2D(fe,0),Fe.unbindTexture()},this.resetState=function(){T=0,w=0,E=null,Fe.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(AA.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class lY extends AA{}lY.prototype.isWebGL1Renderer=!0;class kA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new pt(e),this.density=t}clone(){return new kA(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class IA{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new pt(e),this.near=t,this.far=i}clone(){return new IA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class wS extends Un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ST{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ga()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ga()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ga()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $o=new he;class aa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)$o.fromBufferAttribute(this,t),$o.applyMatrix4(e),this.setXYZ(t,$o.x,$o.y,$o.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$o.fromBufferAttribute(this,t),$o.applyNormalMatrix(e),this.setXYZ(t,$o.x,$o.y,$o.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$o.fromBufferAttribute(this,t),$o.transformDirection(e),this.setXYZ(t,$o.x,$o.y,$o.z);return this}setX(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ci(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Lh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Lh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Lh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Lh(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array),r=ci(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=ci(t,this.array),i=ci(i,this.array),r=ci(r,this.array),o=ci(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new ei(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new aa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class KB extends Br{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Q_;const zy=new he,V_=new he,H_=new he,X_=new nt,Qy=new nt,cY=new hn,fE=new he,Vy=new he,pE=new he,_W=new nt,$M=new nt,OW=new nt;class uY extends Un{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Q_===void 0){Q_=new On;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ST(t,5);Q_.setIndex([0,1,2,0,2,3]),Q_.setAttribute("position",new aa(i,3,0,!1)),Q_.setAttribute("uv",new aa(i,2,3,!1))}this.geometry=Q_,this.material=e!==void 0?e:new KB,this.center=new nt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),V_.setFromMatrixScale(this.matrixWorld),cY.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),H_.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&V_.multiplyScalar(-H_.z);const i=this.material.rotation;let r,o;i!==0&&(o=Math.cos(i),r=Math.sin(i));const a=this.center;mE(fE.set(-.5,-.5,0),H_,a,V_,r,o),mE(Vy.set(.5,-.5,0),H_,a,V_,r,o),mE(pE.set(.5,.5,0),H_,a,V_,r,o),_W.set(0,0),$M.set(1,0),OW.set(1,1);let l=e.ray.intersectTriangle(fE,Vy,pE,!1,zy);if(l===null&&(mE(Vy.set(-.5,.5,0),H_,a,V_,r,o),$M.set(0,1),l=e.ray.intersectTriangle(fE,pE,Vy,!1,zy),l===null))return;const u=e.ray.origin.distanceTo(zy);u<e.near||u>e.far||t.push({distance:u,point:zy.clone(),uv:bl.getUV(zy,fE,Vy,pE,_W,$M,OW,new nt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function mE(n,e,t,i,r,o){X_.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Qy.x=o*X_.x-r*X_.y,Qy.y=r*X_.x+o*X_.y):Qy.copy(X_),n.copy(e),n.x+=Qy.x,n.y+=Qy.y,n.applyMatrix4(cY)}const gE=new he,vW=new he;class hY extends Un{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),e<o)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){gE.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(gE);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){gE.setFromMatrixPosition(e.matrixWorld),vW.setFromMatrixPosition(this.matrixWorld);const i=gE.distanceTo(vW)/e.zoom;t[0].object.visible=!0;let r,o;for(r=1,o=t.length;r<o;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,o=i.length;r<o;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const yW=new he,bW=new Fn,SW=new Fn,bpe=new he,TW=new hn;class e3 extends nr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new hn,this.bindMatrixInverse=new hn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;bW.fromBufferAttribute(r.attributes.skinIndex,e),SW.fromBufferAttribute(r.attributes.skinWeight,e),yW.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const a=SW.getComponent(o);if(a!==0){const l=bW.getComponent(o);TW.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(bpe.copy(yW).applyMatrix4(TW),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RA extends Un{constructor(){super(),this.isBone=!0,this.type="Bone"}}class z0 extends Ri{constructor(e=null,t=1,i=1,r,o,a,l,u,h=fr,d=fr,p,m){super(null,a,l,u,h,d,r,o,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const wW=new hn,Spe=new hn;class TT{constructor(e=[],t=[]){this.uuid=Ga(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new hn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const l=e[o]?e[o].matrixWorld:Spe;wW.multiplyMatrices(l,t[o]),wW.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new TT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=jj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new z0(t,e,e,ra,_u);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const o=e.bones[i];let a=t[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new RA),this.bones.push(a),this.boneInverses.push(new hn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){const a=t[r];e.bones.push(a.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class tg extends ei{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const EW=new hn,xW=new hn,_E=[],Tpe=new hn,Hy=new nr;class dY extends nr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new tg(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,Tpe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Hy.geometry=this.geometry,Hy.material=this.material,Hy.material!==void 0)for(let o=0;o<r;o++){this.getMatrixAt(o,EW),xW.multiplyMatrices(i,EW),Hy.matrixWorld=xW,Hy.raycast(e,_E);for(let a=0,l=_E.length;a<l;a++){const u=_E[a];u.instanceId=o,u.object=this,t.push(u)}_E.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new tg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class fo extends Br{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const $W=new he,CW=new he,AW=new hn,CM=new OT,OE=new wc;let Zh=class extends Un{constructor(e=new On,t=new fo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)$W.fromBufferAttribute(t,r-1),CW.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=$W.distanceTo(CW);e.setAttribute("lineDistance",new Gt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),OE.copy(i.boundingSphere),OE.applyMatrix4(r),OE.radius+=o,e.ray.intersectsSphere(OE)===!1)return;AW.copy(r).invert(),CM.copy(e.ray).applyMatrix4(AW);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new he,d=new he,p=new he,m=new he,g=this.isLineSegments?2:1,v=i.index,S=i.attributes.position;if(v!==null){const T=Math.max(0,a.start),w=Math.min(v.count,a.start+a.count);for(let E=T,$=w-1;E<$;E+=g){const A=v.getX(E),I=v.getX(E+1);if(h.fromBufferAttribute(S,A),d.fromBufferAttribute(S,I),CM.distanceSqToSegment(h,d,m,p)>u)continue;m.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(m);R<e.near||R>e.far||t.push({distance:R,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const T=Math.max(0,a.start),w=Math.min(S.count,a.start+a.count);for(let E=T,$=w-1;E<$;E+=g){if(h.fromBufferAttribute(S,E),d.fromBufferAttribute(S,E+1),CM.distanceSqToSegment(h,d,m,p)>u)continue;m.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(m);I<e.near||I>e.far||t.push({distance:I,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=r.length;o<a;o++){const l=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}};const kW=new he,IW=new he;class Ec extends Zh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)kW.fromBufferAttribute(t,r),IW.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+kW.distanceTo(IW);e.setAttribute("lineDistance",new Gt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class t3 extends Zh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class MA extends Br{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const RW=new hn,MD=new OT,vE=new wc,yE=new he;class n3 extends Un{constructor(e=new On,t=new MA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),vE.copy(i.boundingSphere),vE.applyMatrix4(r),vE.radius+=o,e.ray.intersectsSphere(vE)===!1)return;RW.copy(r).invert(),MD.copy(e.ray).applyMatrix4(RW);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let v=m,y=g;v<y;v++){const S=h.getX(v);yE.fromBufferAttribute(p,S),MW(yE,S,u,r,e,t,this)}}else{const m=Math.max(0,a.start),g=Math.min(p.count,a.start+a.count);for(let v=m,y=g;v<y;v++)yE.fromBufferAttribute(p,v),MW(yE,v,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=r.length;o<a;o++){const l=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}}function MW(n,e,t,i,r,o,a){const l=MD.distanceSqToPoint(n);if(l<t){const u=new he;MD.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;o.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,object:a})}}class wpe extends Ri{constructor(e,t,i,r,o,a,l,u,h){super(e,t,i,r,o,a,l,u,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:hi,this.magFilter=o!==void 0?o:hi,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Epe extends Ri{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=fr,this.minFilter=fr,this.generateMipmaps=!1,this.needsUpdate=!0}}class i3 extends Ri{constructor(e,t,i,r,o,a,l,u,h,d,p,m){super(null,a,l,u,h,d,r,o,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xpe extends i3{constructor(e,t,i,r,o,a){super(e,t,i,o,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=zs}}class fY extends Ri{constructor(e,t,i,r,o,a,l,u,h){super(e,t,i,r,o,a,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),o=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const o=i.length;let a;t?a=t:a=e*i[o-1];let l=0,u=o-1,h;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),h=i[r]-a,h<0)l=r+1;else if(h>0)u=r-1;else{u=r;break}if(r=u,i[r]===a)return r/(o-1);const d=i[r],m=i[r+1]-d,g=(a-d)/m;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);const a=this.getPoint(r),l=this.getPoint(o),u=t||(a.isVector2?new nt:new he);return u.copy(l).sub(a).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new he,r=[],o=[],a=[],l=new he,u=new hn;for(let g=0;g<=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new he)}o[0]=new he,a[0]=new he;let h=Number.MAX_VALUE;const d=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=h&&(h=d,i.set(1,0,0)),p<=h&&(h=p,i.set(0,1,0)),m<=h&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],l),a[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),a[g]=a[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()>Number.EPSILON){l.normalize();const v=Math.acos(wr(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(u.makeRotationAxis(l,v))}a[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(wr(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(l.crossVectors(o[0],o[e]))>0&&(g=-g);for(let v=1;v<=e;v++)o[v].applyMatrix4(u.makeRotationAxis(r[v],g*v)),a[v].crossVectors(r[v],o[v])}return{tangents:r,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class PA extends xc{constructor(e=0,t=0,i=1,r=1,o=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(e,t){const i=t||new nt,r=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(a?o=0:o=r),this.aClockwise===!0&&!a&&(o===r?o=-r:o=o-r);const l=this.aStartAngle+e*o;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=u-this.aX,g=h-this.aY;u=m*d-g*p+this.aX,h=m*p+g*d+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class pY extends PA{constructor(e,t,i,r,o,a){super(e,t,i,i,r,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function r3(){let n=0,e=0,t=0,i=0;function r(o,a,l,u){n=o,e=l,t=-3*o+3*a-2*l-u,i=2*o-2*a+l+u}return{initCatmullRom:function(o,a,l,u,h){r(a,l,h*(l-o),h*(u-a))},initNonuniformCatmullRom:function(o,a,l,u,h,d,p){let m=(a-o)/h-(l-o)/(h+d)+(l-a)/d,g=(l-a)/d-(u-a)/(d+p)+(u-l)/p;m*=d,g*=d,r(a,l,m,g)},calc:function(o){const a=o*o,l=a*o;return n+e*o+t*a+i*l}}}const bE=new he,AM=new r3,kM=new r3,IM=new r3;class s3 extends xc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new he){const i=t,r=this.points,o=r.length,a=(o-(this.closed?0:1))*e;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:u===0&&l===o-1&&(l=o-2,u=1);let h,d;this.closed||l>0?h=r[(l-1)%o]:(bE.subVectors(r[0],r[1]).add(r[0]),h=bE);const p=r[l%o],m=r[(l+1)%o];if(this.closed||l+2<o?d=r[(l+2)%o]:(bE.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=bE),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(h.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(m),g),S=Math.pow(m.distanceToSquared(d),g);y<1e-4&&(y=1),v<1e-4&&(v=y),S<1e-4&&(S=y),AM.initNonuniformCatmullRom(h.x,p.x,m.x,d.x,v,y,S),kM.initNonuniformCatmullRom(h.y,p.y,m.y,d.y,v,y,S),IM.initNonuniformCatmullRom(h.z,p.z,m.z,d.z,v,y,S)}else this.curveType==="catmullrom"&&(AM.initCatmullRom(h.x,p.x,m.x,d.x,this.tension),kM.initCatmullRom(h.y,p.y,m.y,d.y,this.tension),IM.initCatmullRom(h.z,p.z,m.z,d.z,this.tension));return i.set(AM.calc(u),kM.calc(u),IM.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new he().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function PW(n,e,t,i,r){const o=(i-e)*.5,a=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+o+a)*u+(-3*t+3*i-2*o-a)*l+o*n+t}function $pe(n,e){const t=1-n;return t*t*e}function Cpe(n,e){return 2*(1-n)*n*e}function Ape(n,e){return n*n*e}function Db(n,e,t,i){return $pe(n,e)+Cpe(n,t)+Ape(n,i)}function kpe(n,e){const t=1-n;return t*t*t*e}function Ipe(n,e){const t=1-n;return 3*t*t*n*e}function Rpe(n,e){return 3*(1-n)*n*n*e}function Mpe(n,e){return n*n*n*e}function Lb(n,e,t,i,r){return kpe(n,e)+Ipe(n,t)+Rpe(n,i)+Mpe(n,r)}class o3 extends xc{constructor(e=new nt,t=new nt,i=new nt,r=new nt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new nt){const i=t,r=this.v0,o=this.v1,a=this.v2,l=this.v3;return i.set(Lb(e,r.x,o.x,a.x,l.x),Lb(e,r.y,o.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mY extends xc{constructor(e=new he,t=new he,i=new he,r=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new he){const i=t,r=this.v0,o=this.v1,a=this.v2,l=this.v3;return i.set(Lb(e,r.x,o.x,a.x,l.x),Lb(e,r.y,o.y,a.y,l.y),Lb(e,r.z,o.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class DA extends xc{constructor(e=new nt,t=new nt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gY extends xc{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a3 extends xc{constructor(e=new nt,t=new nt,i=new nt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new nt){const i=t,r=this.v0,o=this.v1,a=this.v2;return i.set(Db(e,r.x,o.x,a.x),Db(e,r.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class l3 extends xc{constructor(e=new he,t=new he,i=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new he){const i=t,r=this.v0,o=this.v1,a=this.v2;return i.set(Db(e,r.x,o.x,a.x),Db(e,r.y,o.y,a.y),Db(e,r.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c3 extends xc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nt){const i=t,r=this.points,o=(r.length-1)*e,a=Math.floor(o),l=o-a,u=r[a===0?a:a-1],h=r[a],d=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return i.set(PW(l,u.x,h.x,d.x,p.x),PW(l,u.y,h.y,d.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new nt().fromArray(r))}return this}}var u3=Object.freeze({__proto__:null,ArcCurve:pY,CatmullRomCurve3:s3,CubicBezierCurve:o3,CubicBezierCurve3:mY,EllipseCurve:PA,LineCurve:DA,LineCurve3:gY,QuadraticBezierCurve:a3,QuadraticBezierCurve3:l3,SplineCurve:c3});class _Y extends xc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new DA(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=i){const a=r[o]-i,l=this.curves[o],u=l.getLength(),h=u===0?0:1-a/u;return l.getPointAt(h,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,o=this.curves;r<o.length;r++){const a=o[r],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(l);for(let h=0;h<u.length;h++){const d=u[h];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new u3[r.type]().fromJSON(r))}return this}}class ES extends _Y{constructor(e){super(),this.type="Path",this.currentPoint=new nt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new DA(this.currentPoint.clone(),new nt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const o=new a3(this.currentPoint.clone(),new nt(e,t),new nt(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,a){const l=new o3(this.currentPoint.clone(),new nt(e,t),new nt(i,r),new nt(o,a));return this.curves.push(l),this.currentPoint.set(o,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new c3(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,o,a),this}absarc(e,t,i,r,o,a){return this.absellipse(e,t,i,i,r,o,a),this}ellipse(e,t,i,r,o,a,l,u){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+h,t+d,i,r,o,a,l,u),this}absellipse(e,t,i,r,o,a,l,u){const h=new PA(e,t,i,r,o,a,l,u);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const d=h.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class MO extends On{constructor(e=[new nt(0,-.5),new nt(.5,0),new nt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=wr(r,0,Math.PI*2);const o=[],a=[],l=[],u=[],h=[],d=1/t,p=new he,m=new nt,g=new he,v=new he,y=new he;let S=0,T=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:S=e[w+1].x-e[w].x,T=e[w+1].y-e[w].y,g.x=T*1,g.y=-S,g.z=T*0,y.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case e.length-1:u.push(y.x,y.y,y.z);break;default:S=e[w+1].x-e[w].x,T=e[w+1].y-e[w].y,g.x=T*1,g.y=-S,g.z=T*0,v.copy(g),g.x+=y.x,g.y+=y.y,g.z+=y.z,g.normalize(),u.push(g.x,g.y,g.z),y.copy(v)}for(let w=0;w<=t;w++){const E=i+w*d*r,$=Math.sin(E),A=Math.cos(E);for(let I=0;I<=e.length-1;I++){p.x=e[I].x*$,p.y=e[I].y,p.z=e[I].x*A,a.push(p.x,p.y,p.z),m.x=w/t,m.y=I/(e.length-1),l.push(m.x,m.y);const D=u[3*I+0]*$,R=u[3*I+1],B=u[3*I+0]*A;h.push(D,R,B)}}for(let w=0;w<t;w++)for(let E=0;E<e.length-1;E++){const $=E+w*e.length,A=$,I=$+e.length,D=$+e.length+1,R=$+1;o.push(A,I,R),o.push(D,R,I)}this.setIndex(o),this.setAttribute("position",new Gt(a,3)),this.setAttribute("uv",new Gt(l,2)),this.setAttribute("normal",new Gt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MO(e.points,e.segments,e.phiStart,e.phiLength)}}class wT extends MO{constructor(e=1,t=1,i=4,r=8){const o=new ES;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new wT(e.radius,e.length,e.capSegments,e.radialSegments)}}class ET extends On{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const o=[],a=[],l=[],u=[],h=new he,d=new nt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const g=i+p/t*r;h.x=e*Math.cos(g),h.y=e*Math.sin(g),a.push(h.x,h.y,h.z),l.push(0,0,1),d.x=(a[m]/e+1)/2,d.y=(a[m+1]/e+1)/2,u.push(d.x,d.y)}for(let p=1;p<=t;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new Gt(a,3)),this.setAttribute("normal",new Gt(l,3)),this.setAttribute("uv",new Gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ET(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mg extends On{constructor(e=1,t=1,i=1,r=32,o=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:u};const h=this;r=Math.floor(r),o=Math.floor(o);const d=[],p=[],m=[],g=[];let v=0;const y=[],S=i/2;let T=0;w(),a===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(d),this.setAttribute("position",new Gt(p,3)),this.setAttribute("normal",new Gt(m,3)),this.setAttribute("uv",new Gt(g,2));function w(){const $=new he,A=new he;let I=0;const D=(t-e)/i;for(let R=0;R<=o;R++){const B=[],G=R/o,Z=G*(t-e)+e;for(let N=0;N<=r;N++){const H=N/r,M=H*u+l,K=Math.sin(M),re=Math.cos(M);A.x=Z*K,A.y=-G*i+S,A.z=Z*re,p.push(A.x,A.y,A.z),$.set(K,D,re).normalize(),m.push($.x,$.y,$.z),g.push(H,1-G),B.push(v++)}y.push(B)}for(let R=0;R<r;R++)for(let B=0;B<o;B++){const G=y[B][R],Z=y[B+1][R],N=y[B+1][R+1],H=y[B][R+1];d.push(G,Z,H),d.push(Z,N,H),I+=6}h.addGroup(T,I,0),T+=I}function E($){const A=v,I=new nt,D=new he;let R=0;const B=$===!0?e:t,G=$===!0?1:-1;for(let N=1;N<=r;N++)p.push(0,S*G,0),m.push(0,G,0),g.push(.5,.5),v++;const Z=v;for(let N=0;N<=r;N++){const M=N/r*u+l,K=Math.cos(M),re=Math.sin(M);D.x=B*re,D.y=S*G,D.z=B*K,p.push(D.x,D.y,D.z),m.push(0,G,0),I.x=K*.5+.5,I.y=re*.5*G+.5,g.push(I.x,I.y),v++}for(let N=0;N<r;N++){const H=A+N,M=Z+N;$===!0?d.push(M,M+1,H):d.push(M+1,M,H),R+=3}h.addGroup(T,R,$===!0?1:2),T+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xT extends mg{constructor(e=1,t=1,i=32,r=1,o=!1,a=0,l=Math.PI*2){super(0,e,t,i,r,o,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l}}static fromJSON(e){return new xT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class od extends On{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const o=[],a=[];l(r),h(i),d(),this.setAttribute("position",new Gt(o,3)),this.setAttribute("normal",new Gt(o.slice(),3)),this.setAttribute("uv",new Gt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(w){const E=new he,$=new he,A=new he;for(let I=0;I<t.length;I+=3)g(t[I+0],E),g(t[I+1],$),g(t[I+2],A),u(E,$,A,w)}function u(w,E,$,A){const I=A+1,D=[];for(let R=0;R<=I;R++){D[R]=[];const B=w.clone().lerp($,R/I),G=E.clone().lerp($,R/I),Z=I-R;for(let N=0;N<=Z;N++)N===0&&R===I?D[R][N]=B:D[R][N]=B.clone().lerp(G,N/Z)}for(let R=0;R<I;R++)for(let B=0;B<2*(I-R)-1;B++){const G=Math.floor(B/2);B%2===0?(m(D[R][G+1]),m(D[R+1][G]),m(D[R][G])):(m(D[R][G+1]),m(D[R+1][G+1]),m(D[R+1][G]))}}function h(w){const E=new he;for(let $=0;$<o.length;$+=3)E.x=o[$+0],E.y=o[$+1],E.z=o[$+2],E.normalize().multiplyScalar(w),o[$+0]=E.x,o[$+1]=E.y,o[$+2]=E.z}function d(){const w=new he;for(let E=0;E<o.length;E+=3){w.x=o[E+0],w.y=o[E+1],w.z=o[E+2];const $=S(w)/2/Math.PI+.5,A=T(w)/Math.PI+.5;a.push($,1-A)}v(),p()}function p(){for(let w=0;w<a.length;w+=6){const E=a[w+0],$=a[w+2],A=a[w+4],I=Math.max(E,$,A),D=Math.min(E,$,A);I>.9&&D<.1&&(E<.2&&(a[w+0]+=1),$<.2&&(a[w+2]+=1),A<.2&&(a[w+4]+=1))}}function m(w){o.push(w.x,w.y,w.z)}function g(w,E){const $=w*3;E.x=e[$+0],E.y=e[$+1],E.z=e[$+2]}function v(){const w=new he,E=new he,$=new he,A=new he,I=new nt,D=new nt,R=new nt;for(let B=0,G=0;B<o.length;B+=9,G+=6){w.set(o[B+0],o[B+1],o[B+2]),E.set(o[B+3],o[B+4],o[B+5]),$.set(o[B+6],o[B+7],o[B+8]),I.set(a[G+0],a[G+1]),D.set(a[G+2],a[G+3]),R.set(a[G+4],a[G+5]),A.copy(w).add(E).add($).divideScalar(3);const Z=S(A);y(I,G+0,w,Z),y(D,G+2,E,Z),y(R,G+4,$,Z)}}function y(w,E,$,A){A<0&&w.x===1&&(a[E]=w.x-1),$.x===0&&$.z===0&&(a[E]=A/2/Math.PI+.5)}function S(w){return Math.atan2(w.z,-w.x)}function T(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new od(e.vertices,e.indices,e.radius,e.details)}}class $T extends od{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $T(e.radius,e.detail)}}const SE=new he,TE=new he,RM=new he,wE=new bl;class OY extends On{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),o=Math.cos(Dm*t),a=e.getIndex(),l=e.getAttribute("position"),u=a?a.count:l.count,h=[0,0,0],d=["a","b","c"],p=new Array(3),m={},g=[];for(let v=0;v<u;v+=3){a?(h[0]=a.getX(v),h[1]=a.getX(v+1),h[2]=a.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:y,b:S,c:T}=wE;if(y.fromBufferAttribute(l,h[0]),S.fromBufferAttribute(l,h[1]),T.fromBufferAttribute(l,h[2]),wE.getNormal(RM),p[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let w=0;w<3;w++){const E=(w+1)%3,$=p[w],A=p[E],I=wE[d[w]],D=wE[d[E]],R=`${$}_${A}`,B=`${A}_${$}`;B in m&&m[B]?(RM.dot(m[B].normal)<=o&&(g.push(I.x,I.y,I.z),g.push(D.x,D.y,D.z)),m[B]=null):R in m||(m[R]={index0:h[w],index1:h[E],normal:RM.clone()})}}for(const v in m)if(m[v]){const{index0:y,index1:S}=m[v];SE.fromBufferAttribute(l,y),TE.fromBufferAttribute(l,S),g.push(SE.x,SE.y,SE.z),g.push(TE.x,TE.y,TE.z)}this.setAttribute("position",new Gt(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Nm extends ES{constructor(e){super(e),this.uuid=Ga(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ES().fromJSON(r))}return this}}const Ppe={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let o=vY(n,0,r,t,!0);const a=[];if(!o||o.next===o.prev)return a;let l,u,h,d,p,m,g;if(i&&(o=Fpe(n,e,o,t)),n.length>80*t){l=h=n[0],u=d=n[1];for(let v=t;v<r;v+=t)p=n[v],m=n[v+1],p<l&&(l=p),m<u&&(u=m),p>h&&(h=p),m>d&&(d=m);g=Math.max(h-l,d-u),g=g!==0?32767/g:0}return xS(o,a,t,l,u,g,0),a}};function vY(n,e,t,i,r){let o,a;if(r===Zpe(n,e,t,i)>0)for(o=e;o<t;o+=i)a=DW(o,n[o],n[o+1],a);else for(o=t-i;o>=e;o-=i)a=DW(o,n[o],n[o+1],a);return a&&LA(a,a.next)&&(CS(a),a=a.next),a}function ng(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(LA(t,t.next)||er(t.prev,t,t.next)===0)){if(CS(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function xS(n,e,t,i,r,o,a){if(!n)return;!a&&o&&Qpe(n,i,r,o);let l=n,u,h;for(;n.prev!==n.next;){if(u=n.prev,h=n.next,o?Lpe(n,i,r,o):Dpe(n)){e.push(u.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),CS(n),n=h.next,l=h.next;continue}if(n=h,n===l){a?a===1?(n=Npe(ng(n),e,t),xS(n,e,t,i,r,o,2)):a===2&&Bpe(n,e,t,i,r,o):xS(ng(n),e,t,i,r,o,1);break}}}function Dpe(n){const e=n.prev,t=n,i=n.next;if(er(e,t,i)>=0)return!1;const r=e.x,o=t.x,a=i.x,l=e.y,u=t.y,h=i.y,d=r<o?r<a?r:a:o<a?o:a,p=l<u?l<h?l:h:u<h?u:h,m=r>o?r>a?r:a:o>a?o:a,g=l>u?l>h?l:h:u>h?u:h;let v=i.next;for(;v!==e;){if(v.x>=d&&v.x<=m&&v.y>=p&&v.y<=g&&S0(r,l,o,u,a,h,v.x,v.y)&&er(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Lpe(n,e,t,i){const r=n.prev,o=n,a=n.next;if(er(r,o,a)>=0)return!1;const l=r.x,u=o.x,h=a.x,d=r.y,p=o.y,m=a.y,g=l<u?l<h?l:h:u<h?u:h,v=d<p?d<m?d:m:p<m?p:m,y=l>u?l>h?l:h:u>h?u:h,S=d>p?d>m?d:m:p>m?p:m,T=PD(g,v,e,t,i),w=PD(y,S,e,t,i);let E=n.prevZ,$=n.nextZ;for(;E&&E.z>=T&&$&&$.z<=w;){if(E.x>=g&&E.x<=y&&E.y>=v&&E.y<=S&&E!==r&&E!==a&&S0(l,d,u,p,h,m,E.x,E.y)&&er(E.prev,E,E.next)>=0||(E=E.prevZ,$.x>=g&&$.x<=y&&$.y>=v&&$.y<=S&&$!==r&&$!==a&&S0(l,d,u,p,h,m,$.x,$.y)&&er($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;E&&E.z>=T;){if(E.x>=g&&E.x<=y&&E.y>=v&&E.y<=S&&E!==r&&E!==a&&S0(l,d,u,p,h,m,E.x,E.y)&&er(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;$&&$.z<=w;){if($.x>=g&&$.x<=y&&$.y>=v&&$.y<=S&&$!==r&&$!==a&&S0(l,d,u,p,h,m,$.x,$.y)&&er($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function Npe(n,e,t){let i=n;do{const r=i.prev,o=i.next.next;!LA(r,o)&&yY(r,i,i.next,o)&&$S(r,o)&&$S(o,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(o.i/t|0),CS(i),CS(i.next),i=n=o),i=i.next}while(i!==n);return ng(i)}function Bpe(n,e,t,i,r,o){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&Xpe(a,l)){let u=bY(a,l);a=ng(a,a.next),u=ng(u,u.next),xS(a,e,t,i,r,o,0),xS(u,e,t,i,r,o,0);return}l=l.next}a=a.next}while(a!==n)}function Fpe(n,e,t,i){const r=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;o++)l=e[o]*i,u=o<a-1?e[o+1]*i:n.length,h=vY(n,l,u,i,!1),h===h.next&&(h.steiner=!0),r.push(Hpe(h));for(r.sort(Upe),o=0;o<r.length;o++)t=Gpe(r[o],t);return t}function Upe(n,e){return n.x-e.x}function Gpe(n,e){const t=Wpe(n,e);if(!t)return e;const i=bY(t,n);return ng(i,i.next),ng(t,t.next)}function Wpe(n,e){let t=e,i=-1/0,r;const o=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const m=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=o&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===o))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,u=r.x,h=r.y;let d=1/0,p;t=r;do o>=t.x&&t.x>=u&&o!==t.x&&S0(a<h?o:i,a,u,h,a<h?i:o,a,t.x,t.y)&&(p=Math.abs(a-t.y)/(o-t.x),$S(t,n)&&(p<d||p===d&&(t.x>r.x||t.x===r.x&&zpe(r,t)))&&(r=t,d=p)),t=t.next;while(t!==l);return r}function zpe(n,e){return er(n.prev,n,e.prev)<0&&er(e.next,n,n.next)<0}function Qpe(n,e,t,i){let r=n;do r.z===0&&(r.z=PD(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Vpe(r)}function Vpe(n){let e,t,i,r,o,a,l,u,h=1;do{for(t=n,n=null,o=null,a=0;t;){for(a++,i=t,l=0,e=0;e<h&&(l++,i=i.nextZ,!!i);e++);for(u=h;l>0||u>0&&i;)l!==0&&(u===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;t=i}o.nextZ=null,h*=2}while(a>1);return n}function PD(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Hpe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function S0(n,e,t,i,r,o,a,l){return(r-a)*(e-l)>=(n-a)*(o-l)&&(n-a)*(i-l)>=(t-a)*(e-l)&&(t-a)*(o-l)>=(r-a)*(i-l)}function Xpe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!jpe(n,e)&&($S(n,e)&&$S(e,n)&&Ype(n,e)&&(er(n.prev,n,e.prev)||er(n,e.prev,e))||LA(n,e)&&er(n.prev,n,n.next)>0&&er(e.prev,e,e.next)>0)}function er(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function LA(n,e){return n.x===e.x&&n.y===e.y}function yY(n,e,t,i){const r=xE(er(n,e,t)),o=xE(er(n,e,i)),a=xE(er(t,i,n)),l=xE(er(t,i,e));return!!(r!==o&&a!==l||r===0&&EE(n,t,e)||o===0&&EE(n,i,e)||a===0&&EE(t,n,i)||l===0&&EE(t,e,i))}function EE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function xE(n){return n>0?1:n<0?-1:0}function jpe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&yY(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function $S(n,e){return er(n.prev,n,n.next)<0?er(n,e,n.next)>=0&&er(n,n.prev,e)>=0:er(n,e,n.prev)<0||er(n,n.next,e)<0}function Ype(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function bY(n,e){const t=new DD(n.i,n.x,n.y),i=new DD(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function DW(n,e,t,i){const r=new DD(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function CS(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function DD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zpe(n,e,t,i){let r=0;for(let o=e,a=t-i;o<t;o+=i)r+=(n[a]-n[o])*(n[o+1]+n[a+1]),a=o;return r}class Eu{static area(e){const t=e.length;let i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return Eu.area(e)<0}static triangulateShape(e,t){const i=[],r=[],o=[];LW(e),NW(i,e);let a=e.length;t.forEach(LW);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,NW(i,t[u]);const l=Ppe.triangulate(i,r);for(let u=0;u<l.length;u+=3)o.push(l.slice(u,u+3));return o}}function LW(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function NW(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class CT extends On{constructor(e=new Nm([new nt(.5,.5),new nt(-.5,.5),new nt(-.5,-.5),new nt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];a(h)}this.setAttribute("position",new Gt(r,3)),this.setAttribute("uv",new Gt(o,2)),this.computeVertexNormals();function a(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:qpe;let E,$=!1,A,I,D,R;T&&(E=T.getSpacedPoints(d),$=!0,m=!1,A=T.computeFrenetFrames(d,!1),I=new he,D=new he,R=new he),m||(S=0,g=0,v=0,y=0);const B=l.extractPoints(h);let G=B.shape;const Z=B.holes;if(!Eu.isClockWise(G)){G=G.reverse();for(let we=0,Ge=Z.length;we<Ge;we++){const W=Z[we];Eu.isClockWise(W)&&(Z[we]=W.reverse())}}const H=Eu.triangulateShape(G,Z),M=G;for(let we=0,Ge=Z.length;we<Ge;we++){const W=Z[we];G=G.concat(W)}function K(we,Ge,W){return Ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),we.clone().addScaledVector(Ge,W)}const re=G.length,ce=H.length;function X(we,Ge,W){let Ee,Oe,ae;const ne=we.x-Ge.x,pe=we.y-Ge.y,Ae=W.x-we.x,Te=W.y-we.y,j=ne*ne+pe*pe,Y=ne*Te-pe*Ae;if(Math.abs(Y)>Number.EPSILON){const ue=Math.sqrt(j),me=Math.sqrt(Ae*Ae+Te*Te),Ie=Ge.x-pe/ue,ze=Ge.y+ne/ue,Se=W.x-Te/me,Je=W.y+Ae/me,Ve=((Se-Ie)*Te-(Je-ze)*Ae)/(ne*Te-pe*Ae);Ee=Ie+ne*Ve-we.x,Oe=ze+pe*Ve-we.y;const ot=Ee*Ee+Oe*Oe;if(ot<=2)return new nt(Ee,Oe);ae=Math.sqrt(ot/2)}else{let ue=!1;ne>Number.EPSILON?Ae>Number.EPSILON&&(ue=!0):ne<-Number.EPSILON?Ae<-Number.EPSILON&&(ue=!0):Math.sign(pe)===Math.sign(Te)&&(ue=!0),ue?(Ee=-pe,Oe=ne,ae=Math.sqrt(j)):(Ee=ne,Oe=pe,ae=Math.sqrt(j/2))}return new nt(Ee/ae,Oe/ae)}const Q=[];for(let we=0,Ge=M.length,W=Ge-1,Ee=we+1;we<Ge;we++,W++,Ee++)W===Ge&&(W=0),Ee===Ge&&(Ee=0),Q[we]=X(M[we],M[W],M[Ee]);const ee=[];let z,L=Q.concat();for(let we=0,Ge=Z.length;we<Ge;we++){const W=Z[we];z=[];for(let Ee=0,Oe=W.length,ae=Oe-1,ne=Ee+1;Ee<Oe;Ee++,ae++,ne++)ae===Oe&&(ae=0),ne===Oe&&(ne=0),z[Ee]=X(W[Ee],W[ae],W[ne]);ee.push(z),L=L.concat(z)}for(let we=0;we<S;we++){const Ge=we/S,W=g*Math.cos(Ge*Math.PI/2),Ee=v*Math.sin(Ge*Math.PI/2)+y;for(let Oe=0,ae=M.length;Oe<ae;Oe++){const ne=K(M[Oe],Q[Oe],Ee);ye(ne.x,ne.y,-W)}for(let Oe=0,ae=Z.length;Oe<ae;Oe++){const ne=Z[Oe];z=ee[Oe];for(let pe=0,Ae=ne.length;pe<Ae;pe++){const Te=K(ne[pe],z[pe],Ee);ye(Te.x,Te.y,-W)}}}const le=v+y;for(let we=0;we<re;we++){const Ge=m?K(G[we],L[we],le):G[we];$?(D.copy(A.normals[0]).multiplyScalar(Ge.x),I.copy(A.binormals[0]).multiplyScalar(Ge.y),R.copy(E[0]).add(D).add(I),ye(R.x,R.y,R.z)):ye(Ge.x,Ge.y,0)}for(let we=1;we<=d;we++)for(let Ge=0;Ge<re;Ge++){const W=m?K(G[Ge],L[Ge],le):G[Ge];$?(D.copy(A.normals[we]).multiplyScalar(W.x),I.copy(A.binormals[we]).multiplyScalar(W.y),R.copy(E[we]).add(D).add(I),ye(R.x,R.y,R.z)):ye(W.x,W.y,p/d*we)}for(let we=S-1;we>=0;we--){const Ge=we/S,W=g*Math.cos(Ge*Math.PI/2),Ee=v*Math.sin(Ge*Math.PI/2)+y;for(let Oe=0,ae=M.length;Oe<ae;Oe++){const ne=K(M[Oe],Q[Oe],Ee);ye(ne.x,ne.y,p+W)}for(let Oe=0,ae=Z.length;Oe<ae;Oe++){const ne=Z[Oe];z=ee[Oe];for(let pe=0,Ae=ne.length;pe<Ae;pe++){const Te=K(ne[pe],z[pe],Ee);$?ye(Te.x,Te.y+E[d-1].y,E[d-1].x+W):ye(Te.x,Te.y,p+W)}}}de(),ie();function de(){const we=r.length/3;if(m){let Ge=0,W=re*Ge;for(let Ee=0;Ee<ce;Ee++){const Oe=H[Ee];xe(Oe[2]+W,Oe[1]+W,Oe[0]+W)}Ge=d+S*2,W=re*Ge;for(let Ee=0;Ee<ce;Ee++){const Oe=H[Ee];xe(Oe[0]+W,Oe[1]+W,Oe[2]+W)}}else{for(let Ge=0;Ge<ce;Ge++){const W=H[Ge];xe(W[2],W[1],W[0])}for(let Ge=0;Ge<ce;Ge++){const W=H[Ge];xe(W[0]+re*d,W[1]+re*d,W[2]+re*d)}}i.addGroup(we,r.length/3-we,0)}function ie(){const we=r.length/3;let Ge=0;Ce(M,Ge),Ge+=M.length;for(let W=0,Ee=Z.length;W<Ee;W++){const Oe=Z[W];Ce(Oe,Ge),Ge+=Oe.length}i.addGroup(we,r.length/3-we,1)}function Ce(we,Ge){let W=we.length;for(;--W>=0;){const Ee=W;let Oe=W-1;Oe<0&&(Oe=we.length-1);for(let ae=0,ne=d+S*2;ae<ne;ae++){const pe=re*ae,Ae=re*(ae+1),Te=Ge+Ee+pe,j=Ge+Oe+pe,Y=Ge+Oe+Ae,ue=Ge+Ee+Ae;Fe(Te,j,Y,ue)}}}function ye(we,Ge,W){u.push(we),u.push(Ge),u.push(W)}function xe(we,Ge,W){Xe(we),Xe(Ge),Xe(W);const Ee=r.length/3,Oe=w.generateTopUV(i,r,Ee-3,Ee-2,Ee-1);Ue(Oe[0]),Ue(Oe[1]),Ue(Oe[2])}function Fe(we,Ge,W,Ee){Xe(we),Xe(Ge),Xe(Ee),Xe(Ge),Xe(W),Xe(Ee);const Oe=r.length/3,ae=w.generateSideWallUV(i,r,Oe-6,Oe-3,Oe-2,Oe-1);Ue(ae[0]),Ue(ae[1]),Ue(ae[3]),Ue(ae[1]),Ue(ae[2]),Ue(ae[3])}function Xe(we){r.push(u[we*3+0]),r.push(u[we*3+1]),r.push(u[we*3+2])}function Ue(we){o.push(we.x),o.push(we.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Jpe(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,a=e.shapes.length;o<a;o++){const l=t[e.shapes[o]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new u3[r.type]().fromJSON(r)),new CT(i,e.options)}}const qpe={generateTopUV:function(n,e,t,i,r){const o=e[t*3],a=e[t*3+1],l=e[i*3],u=e[i*3+1],h=e[r*3],d=e[r*3+1];return[new nt(o,a),new nt(l,u),new nt(h,d)]},generateSideWallUV:function(n,e,t,i,r,o){const a=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[i*3],d=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],v=e[r*3+2],y=e[o*3],S=e[o*3+1],T=e[o*3+2];return Math.abs(l-d)<Math.abs(a-h)?[new nt(a,1-u),new nt(h,1-p),new nt(m,1-v),new nt(y,1-T)]:[new nt(l,1-u),new nt(d,1-p),new nt(g,1-v),new nt(S,1-T)]}};function Jpe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class AT extends od{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new AT(e.radius,e.detail)}}class PO extends od{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new PO(e.radius,e.detail)}}class kT extends On{constructor(e=.5,t=1,i=32,r=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],h=[],d=[];let p=e;const m=(t-e)/r,g=new he,v=new nt;for(let y=0;y<=r;y++){for(let S=0;S<=i;S++){const T=o+S/i*a;g.x=p*Math.cos(T),g.y=p*Math.sin(T),u.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,d.push(v.x,v.y)}p+=m}for(let y=0;y<r;y++){const S=y*(i+1);for(let T=0;T<i;T++){const w=T+S,E=w,$=w+i+1,A=w+i+2,I=w+1;l.push(E,$,I),l.push($,A,I)}}this.setIndex(l),this.setAttribute("position",new Gt(u,3)),this.setAttribute("normal",new Gt(h,3)),this.setAttribute("uv",new Gt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class IT extends On{constructor(e=new Nm([new nt(0,.5),new nt(-.5,-.5),new nt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],o=[],a=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let d=0;d<e.length;d++)h(e[d]),this.addGroup(l,u,d),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new Gt(r,3)),this.setAttribute("normal",new Gt(o,3)),this.setAttribute("uv",new Gt(a,2));function h(d){const p=r.length/3,m=d.extractPoints(t);let g=m.shape;const v=m.holes;Eu.isClockWise(g)===!1&&(g=g.reverse());for(let S=0,T=v.length;S<T;S++){const w=v[S];Eu.isClockWise(w)===!0&&(v[S]=w.reverse())}const y=Eu.triangulateShape(g,v);for(let S=0,T=v.length;S<T;S++){const w=v[S];g=g.concat(w)}for(let S=0,T=g.length;S<T;S++){const w=g[S];r.push(w.x,w.y,0),o.push(0,0,1),a.push(w.x,w.y)}for(let S=0,T=y.length;S<T;S++){const w=y[S],E=w[0]+p,$=w[1]+p,A=w[2]+p;i.push(E,$,A),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Kpe(t,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const a=t[e.shapes[r]];i.push(a)}return new IT(i,e.curveSegments)}}function Kpe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class DO extends On{constructor(e=1,t=32,i=16,r=0,o=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(a+l,Math.PI);let h=0;const d=[],p=new he,m=new he,g=[],v=[],y=[],S=[];for(let T=0;T<=i;T++){const w=[],E=T/i;let $=0;T==0&&a==0?$=.5/t:T==i&&u==Math.PI&&($=-.5/t);for(let A=0;A<=t;A++){const I=A/t;p.x=-e*Math.cos(r+I*o)*Math.sin(a+E*l),p.y=e*Math.cos(a+E*l),p.z=e*Math.sin(r+I*o)*Math.sin(a+E*l),v.push(p.x,p.y,p.z),m.copy(p).normalize(),y.push(m.x,m.y,m.z),S.push(I+$,1-E),w.push(h++)}d.push(w)}for(let T=0;T<i;T++)for(let w=0;w<t;w++){const E=d[T][w+1],$=d[T][w],A=d[T+1][w],I=d[T+1][w+1];(T!==0||a>0)&&g.push(E,$,I),(T!==i-1||u<Math.PI)&&g.push($,A,I)}this.setIndex(g),this.setAttribute("position",new Gt(v,3)),this.setAttribute("normal",new Gt(y,3)),this.setAttribute("uv",new Gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DO(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class RT extends od{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new RT(e.radius,e.detail)}}class MT extends On{constructor(e=1,t=.4,i=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new he,p=new he,m=new he;for(let g=0;g<=i;g++)for(let v=0;v<=r;v++){const y=v/r*o,S=g/i*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(y),p.y=(e+t*Math.cos(S))*Math.sin(y),p.z=t*Math.sin(S),l.push(p.x,p.y,p.z),d.x=e*Math.cos(y),d.y=e*Math.sin(y),m.subVectors(p,d).normalize(),u.push(m.x,m.y,m.z),h.push(v/r),h.push(g/i)}for(let g=1;g<=i;g++)for(let v=1;v<=r;v++){const y=(r+1)*g+v-1,S=(r+1)*(g-1)+v-1,T=(r+1)*(g-1)+v,w=(r+1)*g+v;a.push(y,S,w),a.push(S,T,w)}this.setIndex(a),this.setAttribute("position",new Gt(l,3)),this.setAttribute("normal",new Gt(u,3)),this.setAttribute("uv",new Gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class PT extends On{constructor(e=1,t=.4,i=64,r=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:o,q:a},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],d=[],p=new he,m=new he,g=new he,v=new he,y=new he,S=new he,T=new he;for(let E=0;E<=i;++E){const $=E/i*o*Math.PI*2;w($,o,a,e,g),w($+.01,o,a,e,v),S.subVectors(v,g),T.addVectors(v,g),y.crossVectors(S,T),T.crossVectors(y,S),y.normalize(),T.normalize();for(let A=0;A<=r;++A){const I=A/r*Math.PI*2,D=-t*Math.cos(I),R=t*Math.sin(I);p.x=g.x+(D*T.x+R*y.x),p.y=g.y+(D*T.y+R*y.y),p.z=g.z+(D*T.z+R*y.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),h.push(m.x,m.y,m.z),d.push(E/i),d.push(A/r)}}for(let E=1;E<=i;E++)for(let $=1;$<=r;$++){const A=(r+1)*(E-1)+($-1),I=(r+1)*E+($-1),D=(r+1)*E+$,R=(r+1)*(E-1)+$;l.push(A,I,R),l.push(I,D,R)}this.setIndex(l),this.setAttribute("position",new Gt(u,3)),this.setAttribute("normal",new Gt(h,3)),this.setAttribute("uv",new Gt(d,2));function w(E,$,A,I,D){const R=Math.cos(E),B=Math.sin(E),G=A/$*E,Z=Math.cos(G);D.x=I*(2+Z)*.5*R,D.y=I*(2+Z)*B*.5,D.z=I*Math.sin(G)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class DT extends On{constructor(e=new l3(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,i=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:o};const a=e.computeFrenetFrames(t,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new he,u=new he,h=new nt;let d=new he;const p=[],m=[],g=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new Gt(p,3)),this.setAttribute("normal",new Gt(m,3)),this.setAttribute("uv",new Gt(g,2));function y(){for(let E=0;E<t;E++)S(E);S(o===!1?t:0),w(),T()}function S(E){d=e.getPointAt(E/t,d);const $=a.normals[E],A=a.binormals[E];for(let I=0;I<=r;I++){const D=I/r*Math.PI*2,R=Math.sin(D),B=-Math.cos(D);u.x=B*$.x+R*A.x,u.y=B*$.y+R*A.y,u.z=B*$.z+R*A.z,u.normalize(),m.push(u.x,u.y,u.z),l.x=d.x+i*u.x,l.y=d.y+i*u.y,l.z=d.z+i*u.z,p.push(l.x,l.y,l.z)}}function T(){for(let E=1;E<=t;E++)for(let $=1;$<=r;$++){const A=(r+1)*(E-1)+($-1),I=(r+1)*E+($-1),D=(r+1)*E+$,R=(r+1)*(E-1)+$;v.push(A,I,R),v.push(I,D,R)}}function w(){for(let E=0;E<=t;E++)for(let $=0;$<=r;$++)h.x=E/t,h.y=$/r,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new DT(new u3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class h3 extends On{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new he,o=new he;if(e.index!==null){const a=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,d=u.length;h<d;++h){const p=u[h],m=p.start,g=p.count;for(let v=m,y=m+g;v<y;v+=3)for(let S=0;S<3;S++){const T=l.getX(v+S),w=l.getX(v+(S+1)%3);r.fromBufferAttribute(a,T),o.fromBufferAttribute(a,w),BW(r,o,i)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let h=0;h<3;h++){const d=3*l+h,p=3*l+(h+1)%3;r.fromBufferAttribute(a,d),o.fromBufferAttribute(a,p),BW(r,o,i)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function BW(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var FW=Object.freeze({__proto__:null,BoxGeometry:rd,CapsuleGeometry:wT,CircleGeometry:ET,ConeGeometry:xT,CylinderGeometry:mg,DodecahedronGeometry:$T,EdgesGeometry:OY,ExtrudeGeometry:CT,IcosahedronGeometry:AT,LatheGeometry:MO,OctahedronGeometry:PO,PlaneGeometry:sd,PolyhedronGeometry:od,RingGeometry:kT,ShapeGeometry:IT,SphereGeometry:DO,TetrahedronGeometry:RT,TorusGeometry:MT,TorusKnotGeometry:PT,TubeGeometry:DT,WireframeGeometry:h3});class SY extends Br{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class TY extends Ha{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class LO extends Br{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ad extends LO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wY extends Br{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pt(16777215),this.specular=new pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EY extends Br{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class xY extends Br{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class $Y extends Br{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CY extends Br{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=id,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AY extends fo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ml(n,e,t){return d3(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Em(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function d3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kY(n){function e(r,o){return n[r]-n[o]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function LD(n,e,t){const i=n.length,r=new n.constructor(i);for(let o=0,a=0;a!==i;++o){const l=t[o]*e;for(let u=0;u!==e;++u)r[a++]=n[l+u]}return r}function f3(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let a=o[i];if(a!==void 0)if(Array.isArray(a))do a=o[i],a!==void 0&&(e.push(o.time),t.push.apply(t,a)),o=n[r++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[i],a!==void 0&&(e.push(o.time),a.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do a=o[i],a!==void 0&&(e.push(o.time),t.push(a)),o=n[r++];while(o!==void 0)}function eme(n,e,t,i,r=30){const o=n.clone();o.name=e;const a=[];for(let u=0;u<o.tracks.length;++u){const h=o.tracks[u],d=h.getValueSize(),p=[],m=[];for(let g=0;g<h.times.length;++g){const v=h.times[g]*r;if(!(v<t||v>=i)){p.push(h.times[g]);for(let y=0;y<d;++y)m.push(h.values[g*d+y])}}p.length!==0&&(h.times=Em(p,h.times.constructor),h.values=Em(m,h.values.constructor),a.push(h))}o.tracks=a;let l=1/0;for(let u=0;u<o.tracks.length;++u)l>o.tracks[u].times[0]&&(l=o.tracks[u].times[0]);for(let u=0;u<o.tracks.length;++u)o.tracks[u].shift(-1*l);return o.resetDuration(),o}function tme(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,o=e/i;for(let a=0;a<r;++a){const l=t.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const h=n.tracks.find(function(T){return T.name===l.name&&T.ValueTypeName===u});if(h===void 0)continue;let d=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const v=l.times.length-1;let y;if(o<=l.times[0]){const T=d,w=p-d;y=ml(l.values,T,w)}else if(o>=l.times[v]){const T=v*p+d,w=T+p-d;y=ml(l.values,T,w)}else{const T=l.createInterpolant(),w=d,E=p-d;T.evaluate(o),y=ml(T.resultBuffer,w,E)}u==="quaternion"&&new Jr().fromArray(y).normalize().conjugate().toArray(y);const S=h.times.length;for(let T=0;T<S;++T){const w=T*g+m;if(u==="quaternion")Jr.multiplyQuaternionsFlat(h.values,w,y,0,h.values,w);else{const E=g-m*2;for(let $=0;$<E;++$)h.values[w+$]-=y[$]}}}return n.blendMode=WB,n}const nme={arraySlice:ml,convertArray:Em,isTypedArray:d3,getKeyframeOrder:kY,sortedArray:LD,flattenJSON:f3,subclip:eme,makeClipAdditive:tme};class NO{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(o=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=o)){const l=t[1];e<l&&(i=2,o=l);for(let u=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=o,o=t[--i-1],e>=o)break t}a=i,i=0;break n}break e}for(;i<a;){const l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let a=0;a!==r;++a)t[a]=i[o+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class IY extends NO{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sm,endingEnd:Sm}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,a=e+1,l=r[o],u=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case Tm:o=e,l=2*t-i;break;case yS:o=r.length-2,l=t+r[o]-r[o+1];break;default:o=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Tm:a=e,u=2*i-t;break;case yS:a=1,u=i+r[1]-r[0];break;default:a=e-1,u=t}const h=(i-t)*.5,d=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-i),this._offsetPrev=o*d,this._offsetNext=a*d}interpolate_(e,t,i,r){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),y=v*v,S=y*v,T=-m*S+2*m*y-m*v,w=(1+m)*S+(-1.5-2*m)*y+(-.5+m)*v+1,E=(-1-g)*S+(1.5+g)*y+.5*v,$=g*S-g*y;for(let A=0;A!==l;++A)o[A]=T*a[d+A]+w*a[h+A]+E*a[u+A]+$*a[p+A];return o}}class p3 extends NO{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,d=(i-t)/(r-t),p=1-d;for(let m=0;m!==l;++m)o[m]=a[h+m]*p+a[u+m]*d;return o}}class RY extends NO{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $c{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Em(t,this.TimeBufferType),this.values=Em(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Em(e.times,Array),values:Em(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new RY(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new p3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new IY(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case uO:t=this.InterpolantFactoryMethodDiscrete;break;case eg:t=this.InterpolantFactoryMethodLinear;break;case Xx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uO;case this.InterpolantFactoryMethodLinear:return eg;case this.InterpolantFactoryMethodSmooth:return Xx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,a=r-1;for(;o!==r&&i[o]<e;)++o;for(;a!==-1&&i[a]>t;)--a;if(++a,o!==0||a!==r){o>=a&&(a=Math.max(a,1),o=a-1);const l=this.getValueSize();this.times=ml(i,o,a),this.values=ml(this.values,o*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==o;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),e=!1;break}a=u}if(r!==void 0&&d3(r))for(let l=0,u=r.length;l!==u;++l){const h=r[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=ml(this.times),t=ml(this.values),i=this.getValueSize(),r=this.getInterpolation()===Xx,o=e.length-1;let a=1;for(let l=1;l<o;++l){let u=!1;const h=e[l],d=e[l+1];if(h!==d&&(l!==1||h!==e[0]))if(r)u=!0;else{const p=l*i,m=p-i,g=p+i;for(let v=0;v!==i;++v){const y=t[p+v];if(y!==t[m+v]||y!==t[g+v]){u=!0;break}}}if(u){if(l!==a){e[a]=e[l];const p=l*i,m=a*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++a}}if(o>0){e[a]=e[o];for(let l=o*i,u=a*i,h=0;h!==i;++h)t[u+h]=t[l+h];++a}return a!==e.length?(this.times=ml(e,0,a),this.values=ml(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=ml(this.times,0),t=ml(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$c.prototype.TimeBufferType=Float32Array;$c.prototype.ValueBufferType=Float32Array;$c.prototype.DefaultInterpolation=eg;class gg extends $c{}gg.prototype.ValueTypeName="bool";gg.prototype.ValueBufferType=Array;gg.prototype.DefaultInterpolation=uO;gg.prototype.InterpolantFactoryMethodLinear=void 0;gg.prototype.InterpolantFactoryMethodSmooth=void 0;class m3 extends $c{}m3.prototype.ValueTypeName="color";class fO extends $c{}fO.prototype.ValueTypeName="number";class MY extends NO{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let h=e*l;for(let d=h+l;h!==d;h+=4)Jr.slerpFlat(o,0,a,h-l,a,h,u);return o}}class Df extends $c{InterpolantFactoryMethodLinear(e){return new MY(this.times,this.values,this.getValueSize(),e)}}Df.prototype.ValueTypeName="quaternion";Df.prototype.DefaultInterpolation=eg;Df.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends $c{}_g.prototype.ValueTypeName="string";_g.prototype.ValueBufferType=Array;_g.prototype.DefaultInterpolation=uO;_g.prototype.InterpolantFactoryMethodLinear=void 0;_g.prototype.InterpolantFactoryMethodSmooth=void 0;class pO extends $c{}pO.prototype.ValueTypeName="vector";class mO{constructor(e,t=-1,i,r=SA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ga(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,l=i.length;a!==l;++a)t.push(rme(i[a]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=i.length;o!==a;++o)t.push($c.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const o=t.length,a=[];for(let l=0;l<o;l++){let u=[],h=[];u.push((l+o-1)%o,l,(l+1)%o),h.push(0,1,0);const d=kY(u);u=LD(u,1,d),h=LD(h,1,d),!r&&u[0]===0&&(u.push(o),h.push(h[0])),a.push(new fO(".morphTargetInfluences["+t[l].name+"]",u,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},o=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const h=e[l],d=h.name.match(o);if(d&&d.length>1){const p=d[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,v,y){if(g.length!==0){const S=[],T=[];f3(g,S,T,v),S.length!==0&&y.push(new p(m,S,T))}},r=[],o=e.name||"default",a=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let v;for(v=0;v<m.length;v++)if(m[v].morphTargets)for(let y=0;y<m[v].morphTargets.length;y++)g[m[v].morphTargets[y]]=-1;for(const y in g){const S=[],T=[];for(let w=0;w!==m[v].morphTargets.length;++w){const E=m[v];S.push(E.time),T.push(E.morphTarget===y?1:0)}r.push(new fO(".morphTargetInfluence["+y+"]",S,T))}u=g.length*a}else{const g=".bones["+t[p].name+"]";i(pO,g+".position",m,"pos",r),i(Df,g+".quaternion",m,"rot",r),i(pO,g+".scale",m,"scl",r)}}return r.length===0?null:new this(o,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ime(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fO;case"vector":case"vector2":case"vector3":case"vector4":return pO;case"color":return m3;case"quaternion":return Df;case"bool":case"boolean":return gg;case"string":return _g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function rme(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ime(n.type);if(n.times===void 0){const t=[],i=[];f3(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ig={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class g3{constructor(e,t,i){const r=this;let o=!1,a=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){l++,o===!1&&r.onStart!==void 0&&r.onStart(d,a,l),o=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,l),a===l&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,p){return h.push(d,p),this},this.removeHandler=function(d){const p=h.indexOf(d);return p!==-1&&h.splice(p,2),this},this.getHandler=function(d){for(let p=0,m=h.length;p<m;p+=2){const g=h[p],v=h[p+1];if(g.global&&(g.lastIndex=0),g.test(d))return v}return null}}}const PY=new g3;class Uo{constructor(e){this.manager=e!==void 0?e:PY,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,o){i.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wh={};class sme extends Error{constructor(e,t){super(e),this.response=t}}class Xa extends Uo{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=ig.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(wh[e]!==void 0){wh[e].push({onLoad:t,onProgress:i,onError:r});return}wh[e]=[],wh[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const d=wh[e],p=h.body.getReader(),m=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),g=m?parseInt(m):0,v=g!==0;let y=0;const S=new ReadableStream({start(T){w();function w(){p.read().then(({done:E,value:$})=>{if(E)T.close();else{y+=$.byteLength;const A=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:g});for(let I=0,D=d.length;I<D;I++){const R=d[I];R.onProgress&&R.onProgress(A)}T.enqueue($),w()}})}}});return new Response(S)}else throw new sme(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return h.json();default:if(l===void 0)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(l),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return h.arrayBuffer().then(v=>g.decode(v))}}}).then(h=>{ig.add(e,h);const d=wh[e];delete wh[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onLoad&&g.onLoad(h)}}).catch(h=>{const d=wh[e];if(d===void 0)throw this.manager.itemError(e),h;delete wh[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onError&&g.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ome extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=new Xa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(o.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=mO.parse(e[i]);t.push(r)}return t}}class ame extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=[],l=new i3,u=new Xa(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(o.withCredentials);let h=0;function d(p){u.load(e[p],function(m){const g=o.parse(m,!0);a[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&&(g.mipmapCount===1&&(l.minFilter=hi),l.image=a,l.format=g.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)d(p);else u.load(e,function(p){const m=o.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let v=0;v<g;v++){a[v]={mipmaps:[]};for(let y=0;y<m.mipmapCount;y++)a[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+y]),a[v].format=m.format,a[v].width=m.width,a[v].height=m.height}l.image=a}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=hi),l.format=m.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class AS extends Uo{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=ig.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;const l=TS("img");function u(){d(),ig.add(e,this),t&&t(this),o.manager.itemEnd(e)}function h(p){d(),r&&r(p),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(e),l.src=e,l}}class lme extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=new bT,a=new AS(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(h){a.load(e[h],function(d){o.images[h]=d,l++,l===6&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let h=0;h<e.length;++h)u(h);return o}}class cme extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=new z0,l=new Xa(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(o.withCredentials),l.load(e,function(u){const h=o.parse(u);h&&(h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:zs,a.wrapT=h.wrapT!==void 0?h.wrapT:zs,a.magFilter=h.magFilter!==void 0?h.magFilter:hi,a.minFilter=h.minFilter!==void 0?h.minFilter:hi,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.encoding!==void 0&&(a.encoding=h.encoding),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=Iu),h.mipmapCount===1&&(a.minFilter=hi),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h))},i,r),a}}class DY extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=new Ri,a=new AS(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){o.image=l,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}}class Yf extends Un{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class LY extends Yf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const MM=new hn,UW=new he,GW=new he;class _3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nt(512,512),this.map=null,this.mapPass=null,this.matrix=new hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EA,this._frameExtents=new nt(1,1),this._viewportCount=1,this._viewports=[new Fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;UW.setFromMatrixPosition(e.matrixWorld),t.position.copy(UW),GW.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(GW),t.updateMatrixWorld(),MM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MM),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(MM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ume extends _3{constructor(){super(new Ci(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=SS*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O3 extends Yf{constructor(e,t,i=0,r=Math.PI/3,o=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.distance=i,this.angle=r,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new ume}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const WW=new hn,Xy=new he,PM=new he;class hme extends _3{constructor(){super(new Ci(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nt(4,2),this._viewportCount=6,this._viewports=[new Fn(2,1,1,1),new Fn(0,1,1,1),new Fn(3,1,1,1),new Fn(1,1,1,1),new Fn(3,0,1,1),new Fn(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Xy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Xy),PM.copy(i.position),PM.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(PM),i.updateMatrixWorld(),r.makeTranslation(-Xy.x,-Xy.y,-Xy.z),WW.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WW)}}class v3 extends Yf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new hme}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class dme extends _3{constructor(){super(new Uh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class y3 extends Yf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.shadow=new dme}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NY extends Yf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BY extends Yf{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class FY{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,o=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*o),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*o)),t.addScaledVector(a[6],.315392*(3*o*o-1)),t.addScaledVector(a[7],1.092548*(i*o)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,o=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*o),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*o),t.addScaledVector(a[6],.743125*o*o-.247708),t.addScaledVector(a[7],2*.429043*i*o),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-r*r)}}class NA extends Yf{constructor(e=new FY,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class BA extends Uo{constructor(e){super(e),this.textures={}}load(e,t,i,r){const o=this,a=new Xa(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const r=BA.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(r.uniforms[o]={},a.type){case"t":r.uniforms[o].value=i(a.value);break;case"c":r.uniforms[o].value=new pt().setHex(a.value);break;case"v2":r.uniforms[o].value=new nt().fromArray(a.value);break;case"v3":r.uniforms[o].value=new he().fromArray(a.value);break;case"v4":r.uniforms[o].value=new Fn().fromArray(a.value);break;case"m3":r.uniforms[o].value=new vs().fromArray(a.value);break;case"m4":r.uniforms[o].value=new hn().fromArray(a.value);break;default:r.uniforms[o].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)r.extensions[o]=e.extensions[o];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new nt().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new nt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:SY,SpriteMaterial:KB,RawShaderMaterial:TY,ShaderMaterial:Ha,PointsMaterial:MA,MeshPhysicalMaterial:ad,MeshStandardMaterial:LO,MeshPhongMaterial:wY,MeshToonMaterial:EY,MeshNormalMaterial:xY,MeshLambertMaterial:$Y,MeshDepthMaterial:$A,MeshDistanceMaterial:CA,MeshBasicMaterial:Ro,MeshMatcapMaterial:CY,LineDashedMaterial:AY,LineBasicMaterial:fo,Material:Br};return new t[e]}}class xu{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class FA extends On{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UY extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=new Xa(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,v){if(t[v]!==void 0)return t[v];const S=g.interleavedBuffers[v],T=o(g,S.buffer),w=y0(S.type,T),E=new ST(w,S.stride);return E.uuid=S.uuid,t[v]=E,E}function o(g,v){if(i[v]!==void 0)return i[v];const S=g.arrayBuffers[v],T=new Uint32Array(S).buffer;return i[v]=T,T}const a=e.isInstancedBufferGeometry?new FA:new On,l=e.data.index;if(l!==void 0){const g=y0(l.type,l.array);a.setIndex(new ei(g,1))}const u=e.data.attributes;for(const g in u){const v=u[g];let y;if(v.isInterleavedBufferAttribute){const S=r(e.data,v.data);y=new aa(S,v.itemSize,v.offset,v.normalized)}else{const S=y0(v.type,v.array),T=v.isInstancedBufferAttribute?tg:ei;y=new T(S,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),a.setAttribute(g,y)}const h=e.data.morphAttributes;if(h)for(const g in h){const v=h[g],y=[];for(let S=0,T=v.length;S<T;S++){const w=v[S];let E;if(w.isInterleavedBufferAttribute){const $=r(e.data,w.data);E=new aa($,w.itemSize,w.offset,w.normalized)}else{const $=y0(w.type,w.array);E=new ei($,w.itemSize,w.normalized)}w.name!==void 0&&(E.name=w.name),y.push(E)}a.morphAttributes[g]=y}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,v=p.length;g!==v;++g){const y=p[g];a.addGroup(y.start,y.count,y.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new he;m.center!==void 0&&g.fromArray(m.center),a.boundingSphere=new wc(g,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class fme extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=this.path===""?xu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new Xa(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?xu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const o=new Xa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,t),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,o,u,l,i),d=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,d),t!==void 0){let p=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,l,a,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const o=new Nm().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const l=new TT().fromJSON(e[o],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new UY;for(let o=0,a=e.length;o<a;o++){let l;const u=e[o];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in FW?l=FW[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const o=new BA;o.setTextures(t);for(let a=0,l=e.length;a<l;a++){const u=e[a];i[u.uuid]===void 0&&(i[u.uuid]=o.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],o=mO.parse(r);t[o.uuid]=o}return t}parseImages(e,t){const i=this,r={};let o;function a(u){return i.manager.itemStart(u),o.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const h=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return a(d)}else return u.data?{data:y0(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new g3(t);o=new AS(u),o.setCrossOrigin(this.crossOrigin);for(let h=0,d=e.length;h<d;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const g=[];for(let v=0,y=m.length;v<y;v++){const S=m[v],T=l(S);T!==null&&(T instanceof HTMLImageElement?g.push(T):g.push(new z0(T.data,T.width,T.height)))}r[p.uuid]=new wm(g)}else{const g=l(p.url);r[p.uuid]=new wm(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function o(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return a.data?{data:y0(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new AS(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.url;if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const g=h[p],v=await o(g);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new z0(v.data,v.width,v.height)))}i[u.uuid]=new wm(d)}else{const d=await o(u.url);i[u.uuid]=new wm(d)}}}return i}parseTextures(e,t){function i(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const r={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const l=e[o];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],h=u.data;let d;Array.isArray(h)?(d=new bT,h.length===6&&(d.needsUpdate=!0)):(h&&h.data?d=new z0:d=new Ri,h&&(d.needsUpdate=!0)),d.source=u,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=i(l.mapping,pme)),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=i(l.wrap[0],zW),d.wrapT=i(l.wrap[1],zW)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.encoding!==void 0&&(d.encoding=l.encoding),l.minFilter!==void 0&&(d.minFilter=i(l.minFilter,QW)),l.magFilter!==void 0&&(d.magFilter=i(l.magFilter,QW)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.userData!==void 0&&(d.userData=l.userData),r[l.uuid]=d}return r}parseObject(e,t,i,r,o){let a;function l(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let v=0,y=m.length;v<y;v++){const S=m[v];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),g.push(i[S])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function h(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,p;switch(e.type){case"Scene":a=new wS,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new pt(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new IA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new kA(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Ci(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Uh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new NY(e.color,e.intensity);break;case"DirectionalLight":a=new y3(e.color,e.intensity);break;case"PointLight":a=new v3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new BY(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new O3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new LY(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new NA().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),p=u(e.material),a=new e3(d,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),p=u(e.material),a=new nr(d,p);break;case"InstancedMesh":d=l(e.geometry),p=u(e.material);const m=e.count,g=e.instanceMatrix,v=e.instanceColor;a=new dY(d,p,m),a.instanceMatrix=new tg(new Float32Array(g.array),16),v!==void 0&&(a.instanceColor=new tg(new Float32Array(v.array),v.itemSize));break;case"LOD":a=new hY;break;case"Line":a=new Zh(l(e.geometry),u(e.material));break;case"LineLoop":a=new t3(l(e.geometry),u(e.material));break;case"LineSegments":a=new Ec(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new n3(l(e.geometry),u(e.material));break;case"Sprite":a=new uY(u(e.material));break;case"Group":a=new Nh;break;case"Bone":a=new RA;break;default:a=new Un}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)a.add(this.parseObject(m[g],t,i,r,o))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const v=m[g];a.animations.push(o[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const v=m[g],y=a.getObjectByProperty("uuid",v.object);y!==void 0&&a.addLevel(y,v.distance,v.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const pme={UVMapping:yA,CubeReflectionMapping:Rf,CubeRefractionMapping:Mf,EquirectangularReflectionMapping:_S,EquirectangularRefractionMapping:OS,CubeUVReflectionMapping:IO},zW={RepeatWrapping:Pf,ClampToEdgeWrapping:zs,MirroredRepeatWrapping:cO},QW={NearestFilter:fr,NearestMipmapNearestFilter:vS,NearestMipmapLinearFilter:G0,LinearFilter:hi,LinearMipmapNearestFilter:bA,LinearMipmapLinearFilter:Iu};class GY extends Uo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=ig.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){ig.add(e,u),t&&t(u),o.manager.itemEnd(e)}).catch(function(u){r&&r(u),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let $E;class b3{static getContext(){return $E===void 0&&($E=new(window.AudioContext||window.webkitAudioContext)),$E}static setContext(e){$E=e}}class mme extends Uo{constructor(e){super(e)}load(e,t,i,r){const o=this,a=new Xa(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const u=l.slice(0);b3.getContext().decodeAudioData(u,function(d){t(d)})}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}}class gme extends NA{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new pt().set(e),o=new pt().set(t),a=new he(r.r,r.g,r.b),l=new he(o.r,o.g,o.b),u=Math.sqrt(Math.PI),h=u*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(l).multiplyScalar(u),this.sh.coefficients[1].copy(a).sub(l).multiplyScalar(h)}}class _me extends NA{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new pt().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const VW=new hn,HW=new hn,Hp=new hn;class Ome{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Hp.copy(e.projectionMatrix);const r=t.eyeSep/2,o=r*t.near/t.focus,a=t.near*Math.tan(Dm*t.fov*.5)/t.zoom;let l,u;HW.elements[12]=-r,VW.elements[12]=r,l=-a*t.aspect+o,u=a*t.aspect+o,Hp.elements[0]=2*t.near/(u-l),Hp.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Hp),l=-a*t.aspect-o,u=a*t.aspect-o,Hp.elements[0]=2*t.near/(u-l),Hp.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Hp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(HW),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(VW)}}class S3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=XW();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function XW(){return(typeof performance>"u"?Date:performance).now()}const Xp=new he,jW=new Jr,vme=new he,jp=new he;class yme extends Un{constructor(){super(),this.type="AudioListener",this.context=b3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new S3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xp,jW,vme),jp.set(0,0,-1).applyQuaternion(jW),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xp.x,r),t.positionY.linearRampToValueAtTime(Xp.y,r),t.positionZ.linearRampToValueAtTime(Xp.z,r),t.forwardX.linearRampToValueAtTime(jp.x,r),t.forwardY.linearRampToValueAtTime(jp.y,r),t.forwardZ.linearRampToValueAtTime(jp.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Xp.x,Xp.y,Xp.z),t.setOrientation(jp.x,jp.y,jp.z,i.x,i.y,i.z)}}class WY extends Un{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Yp=new he,YW=new Jr,bme=new he,Zp=new he;class Sme extends WY{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Yp,YW,bme),Zp.set(0,0,1).applyQuaternion(YW);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Yp.x,i),t.positionY.linearRampToValueAtTime(Yp.y,i),t.positionZ.linearRampToValueAtTime(Yp.z,i),t.orientationX.linearRampToValueAtTime(Zp.x,i),t.orientationY.linearRampToValueAtTime(Zp.y,i),t.orientationZ.linearRampToValueAtTime(Zp.z,i)}else t.setPosition(Yp.x,Yp.y,Yp.z),t.setOrientation(Zp.x,Zp.y,Zp.z)}}class Tme{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class zY{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,o,a;switch(t){case"quaternion":r=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,o=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)i[o+l]=i[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(i,o,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-o,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let o=i,a=r;o!==a;++o)t[o]=t[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,o){if(r>=.5)for(let a=0;a!==o;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Jr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,o){const a=this._workIndex*o;Jr.multiplyQuaternionsFlat(e,a,e,t,e,i),Jr.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,o){const a=1-r;for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]*a+e[i+l]*r}}_lerpAdditive(e,t,i,r,o){for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]+e[i+a]*r}}}const T3="\\[\\]\\.:\\/",wme=new RegExp("["+T3+"]","g"),w3="[^"+T3+"]",Eme="[^"+T3.replace("\\.","")+"]",xme=/((?:WC+[\/:])*)/.source.replace("WC",w3),$me=/(WCOD+)?/.source.replace("WCOD",Eme),Cme=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",w3),Ame=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",w3),kme=new RegExp("^"+xme+$me+Cme+Ame+"$"),Ime=["material","materials","bones","map"];class Rme{constructor(e,t,i){const r=i||jn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class jn{constructor(e,t,i){this.path=t,this.parsedPath=i||jn.parseTrackName(t),this.node=jn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new jn.Composite(e,t,i):new jn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wme,"")}static parseTrackName(e){const t=kme.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const o=i.nodeName.substring(r+1);Ime.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let o=t.propertyIndex;if(e||(e=jn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===h){h=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(o!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jn.Composite=Rme;jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};jn.prototype.GetterByBindingType=[jn.prototype._getValue_direct,jn.prototype._getValue_array,jn.prototype._getValue_arrayElement,jn.prototype._getValue_toArray];jn.prototype.SetterByBindingTypeAndVersioning=[[jn.prototype._setValue_direct,jn.prototype._setValue_direct_setNeedsUpdate,jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_array,jn.prototype._setValue_array_setNeedsUpdate,jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_arrayElement,jn.prototype._setValue_arrayElement_setNeedsUpdate,jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_fromArray,jn.prototype._setValue_fromArray_setNeedsUpdate,jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Mme{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ga(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length;let l,u=e.length,h=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const m=arguments[d],g=m.uuid;let v=t[g];if(v===void 0){v=u++,t[g]=v,e.push(m);for(let y=0,S=a;y!==S;++y)o[y].push(new jn(m,i[y],r[y]))}else if(v<h){l=e[v];const y=--h,S=e[y];t[S.uuid]=v,e[v]=S,t[g]=y,e[y]=m;for(let T=0,w=a;T!==w;++T){const E=o[T],$=E[y];let A=E[v];E[v]=$,A===void 0&&(A=new jn(m,i[T],r[T])),E[y]=A}}else e[v]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let o=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=t[h];if(d!==void 0&&d>=o){const p=o++,m=e[p];t[m.uuid]=d,e[d]=m,t[h]=p,e[p]=u;for(let g=0,v=r;g!==v;++g){const y=i[g],S=y[p],T=y[d];y[d]=S,y[p]=T}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let o=this.nCachedObjects_,a=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],d=h.uuid,p=t[d];if(p!==void 0)if(delete t[d],p<o){const m=--o,g=e[m],v=--a,y=e[v];t[g.uuid]=p,e[p]=g,t[y.uuid]=m,e[m]=y,e.pop();for(let S=0,T=r;S!==T;++S){const w=i[S],E=w[m],$=w[v];w[p]=E,w[m]=$,w.pop()}}else{const m=--a,g=e[m];m>0&&(t[g.uuid]=p),e[p]=g,e.pop();for(let v=0,y=r;v!==y;++v){const S=i[v];S[p]=S[m],S.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const o=this._bindings;if(r!==void 0)return o[r];const a=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,d=this.nCachedObjects_,p=new Array(h);r=o.length,i[e]=r,a.push(e),l.push(t),o.push(p);for(let m=d,g=u.length;m!==g;++m){const v=u[m];p[m]=new jn(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],h=e[l];t[h]=i,a[i]=u,a.pop(),o[i]=o[l],o.pop(),r[i]=r[l],r.pop()}}}class Pme{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const o=t.tracks,a=o.length,l=new Array(a),u={endingStart:Sm,endingEnd:Sm};for(let h=0;h!==a;++h){const d=o[h].createInterpolant(null);l[h]=d,d.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Wj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,o=e._clip.duration,a=o/r,l=r/o;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,o=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,u[1]=o+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const u=(e-o)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case WB:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(a),h[d].accumulateAdditive(l);break;case SA:default:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(a),h[d].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,o=this._loopCount;const a=i===zj;if(e===0)return o===-1?r:a&&(o&1)===1?t-r:r;if(i===Gj){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,o+=Math.abs(l);const u=this.repetitions-o;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(o&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Tm,r.endingEnd=Tm):(e?r.endingStart=this.zeroSlopeAtStart?Tm:Sm:r.endingStart=yS,t?r.endingEnd=this.zeroSlopeAtEnd?Tm:Sm:r.endingEnd=yS)}_scheduleFading(e,t,i){const r=this._mixer,o=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,u[0]=t,l[1]=o+e,u[1]=i,this}}const Dme=new Float32Array(1);class QY extends Pu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,a=e._propertyBindings,l=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let d=h[u];d===void 0&&(d={},h[u]=d);for(let p=0;p!==o;++p){const m=r[p],g=m.name;let v=d[g];if(v!==void 0)++v.referenceCount,a[p]=v;else{if(v=a[p],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const y=t&&t._propertyBindings[p].binding.parsedPath;v=new zY(jn.create(i,g,y),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),a[p]=v}l[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,o=this._actionsByClip;let a=o[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,l=a[o],u=l.knownActions,h=u[u.length-1],d=e._byClipCacheIndex;h._byClipCacheIndex=d,u[d]=h,u.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],u.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,o=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,a=this._bindingsByRootAndName,l=a[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[o],Object.keys(l).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new p3(new Float32Array(2),new Float32Array(2),1,Dme),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const r=t||this._root,o=r.uuid;let a=typeof e=="string"?mO.findByName(r,e):e;const l=a!==null?a.uuid:e,u=this._actionsByClip[l];let h=null;if(i===void 0&&(a!==null?i=a.blendMode:i=SA),u!==void 0){const p=u.actionByRoot[o];if(p!==void 0&&p.blendMode===i)return p;h=u.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const d=new Pme(this,a,t,i);return this._bindAction(d,h),this._addInactiveAction(d,l,o),d}existingAction(e,t){const i=t||this._root,r=i.uuid,o=typeof e=="string"?mO.findByName(i,e):e,a=o?o.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,o,a);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){const a=o.knownActions;for(let l=0,u=a.length;l!==u;++l){const h=a[l];this._deactivateAction(h);const d=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=d,t[d]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,o=r[t];if(o!==void 0)for(const a in o){const l=o[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class E3{constructor(e){this.value=e}clone(){return new E3(this.value.clone===void 0?this.value:this.value.clone())}}let Lme=0;class Nme extends Pu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Lme++}),this.name="",this.usage=bS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class Y$ extends ST{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Bme{constructor(e,t,i,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class UA{constructor(e,t,i=0,r=1/0){this.ray=new OT(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Lm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return ND(e,this,i,t),i.sort(ZW),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)ND(e[r],this,i,t);return i.sort(ZW),i}}function ZW(n,e){return n.distance-e.distance}function ND(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let o=0,a=r.length;o<a;o++)ND(r[o],e,t,!0)}}class BD{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(wr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Fme{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const qW=new nt;class Ume{constructor(e=new nt(1/0,1/0),t=new nt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qW.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qW).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const JW=new he,CE=new he;class VY{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){JW.subVectors(e,this.start),CE.subVectors(this.end,this.start);const i=CE.dot(CE);let o=CE.dot(JW)/i;return t&&(o=wr(o,0,1)),o}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const KW=new he;class Gme extends Un{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new On,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const h=a/u*Math.PI*2,d=l/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Gt(r,3));const o=new fo({fog:!1,toneMapped:!1});this.cone=new Ec(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),KW.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KW),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vd=new he,AE=new hn,DM=new hn;class Wme extends Ec{constructor(e){const t=HY(e),i=new On,r=[],o=[],a=new pt(0,0,1),l=new pt(0,1,0);for(let h=0;h<t.length;h++){const d=t[h];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(a.r,a.g,a.b),o.push(l.r,l.g,l.b))}i.setAttribute("position",new Gt(r,3)),i.setAttribute("color",new Gt(o,3));const u=new fo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");DM.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<t.length;o++){const l=t[o];l.parent&&l.parent.isBone&&(AE.multiplyMatrices(DM,l.matrixWorld),Vd.setFromMatrixPosition(AE),r.setXYZ(a,Vd.x,Vd.y,Vd.z),AE.multiplyMatrices(DM,l.parent.matrixWorld),Vd.setFromMatrixPosition(AE),r.setXYZ(a+1,Vd.x,Vd.y,Vd.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HY(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,HY(n.children[t]));return e}class zme extends nr{constructor(e,t,i){const r=new DO(t,4,2),o=new Ro({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qme=new he,ez=new pt,tz=new pt;class Vme extends Un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new PO(t);r.rotateY(Math.PI*.5),this.material=new Ro({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),a=new Float32Array(o.count*3);r.setAttribute("color",new ei(a,3)),this.add(new nr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ez.copy(this.light.color),tz.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const o=i<r/2?ez:tz;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Qme.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Hme extends Ec{constructor(e=10,t=10,i=4473924,r=8947848){i=new pt(i),r=new pt(r);const o=t/2,a=e/t,l=e/2,u=[],h=[];for(let m=0,g=0,v=-l;m<=t;m++,v+=a){u.push(-l,0,v,l,0,v),u.push(v,0,-l,v,0,l);const y=m===o?i:r;y.toArray(h,g),g+=3,y.toArray(h,g),g+=3,y.toArray(h,g),g+=3,y.toArray(h,g),g+=3}const d=new On;d.setAttribute("position",new Gt(u,3)),d.setAttribute("color",new Gt(h,3));const p=new fo({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xme extends Ec{constructor(e=10,t=16,i=8,r=64,o=4473924,a=8947848){o=new pt(o),a=new pt(a);const l=[],u=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,v=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,v);const y=p&1?o:a;u.push(y.r,y.g,y.b),u.push(y.r,y.g,y.b)}for(let p=0;p<i;p++){const m=p&1?o:a,g=e-e/i*p;for(let v=0;v<r;v++){let y=v/r*(Math.PI*2),S=Math.sin(y)*g,T=Math.cos(y)*g;l.push(S,0,T),u.push(m.r,m.g,m.b),y=(v+1)/r*(Math.PI*2),S=Math.sin(y)*g,T=Math.cos(y)*g,l.push(S,0,T),u.push(m.r,m.g,m.b)}}const h=new On;h.setAttribute("position",new Gt(l,3)),h.setAttribute("color",new Gt(u,3));const d=new fo({vertexColors:!0,toneMapped:!1});super(h,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nz=new he,kE=new he,iz=new he;class jme extends Un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new On;r.setAttribute("position",new Gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new fo({fog:!1,toneMapped:!1});this.lightPlane=new Zh(r,o),this.add(this.lightPlane),r=new On,r.setAttribute("position",new Gt([0,0,0,0,0,1],3)),this.targetLine=new Zh(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nz.setFromMatrixPosition(this.light.matrixWorld),kE.setFromMatrixPosition(this.light.target.matrixWorld),iz.subVectors(kE,nz),this.lightPlane.lookAt(kE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kE),this.targetLine.scale.z=iz.length()}}const IE=new he,hr=new yT;class Yme extends Ec{constructor(e){const t=new On,i=new fo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(v,y){u(v),u(y)}function u(v){r.push(0,0,0),o.push(0,0,0),a[v]===void 0&&(a[v]=[]),a[v].push(r.length/3-1)}t.setAttribute("position",new Gt(r,3)),t.setAttribute("color",new Gt(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new pt(16755200),d=new pt(16711680),p=new pt(43775),m=new pt(16777215),g=new pt(3355443);this.setColors(h,d,p,m,g)}setColors(e,t,i,r,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;hr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),br("c",t,e,hr,0,0,-1),br("t",t,e,hr,0,0,1),br("n1",t,e,hr,-i,-r,-1),br("n2",t,e,hr,i,-r,-1),br("n3",t,e,hr,-i,r,-1),br("n4",t,e,hr,i,r,-1),br("f1",t,e,hr,-i,-r,1),br("f2",t,e,hr,i,-r,1),br("f3",t,e,hr,-i,r,1),br("f4",t,e,hr,i,r,1),br("u1",t,e,hr,i*.7,r*1.1,-1),br("u2",t,e,hr,-i*.7,r*1.1,-1),br("u3",t,e,hr,0,r*2,-1),br("cf1",t,e,hr,-i,0,1),br("cf2",t,e,hr,i,0,1),br("cf3",t,e,hr,0,-r,1),br("cf4",t,e,hr,0,r,1),br("cn1",t,e,hr,-i,0,-1),br("cn2",t,e,hr,i,0,-1),br("cn3",t,e,hr,0,-r,-1),br("cn4",t,e,hr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function br(n,e,t,i,r,o,a){IE.set(r,o,a).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute("position");for(let h=0,d=l.length;h<d;h++)u.setXYZ(l[h],IE.x,IE.y,IE.z)}}const RE=new Za;class Zme extends Ec{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new On;o.setIndex(new ei(i,1)),o.setAttribute("position",new ei(r,3)),super(o,new fo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&RE.setFromObject(this.object),RE.isEmpty())return;const t=RE.min,i=RE.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qme extends Ec{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new On;o.setIndex(new ei(i,1)),o.setAttribute("position",new Gt(r,3)),super(o,new fo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jme extends Zh{constructor(e,t=1,i=16776960){const r=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new On;a.setAttribute("position",new Gt(o,3)),a.computeBoundingSphere(),super(a,new fo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new On;u.setAttribute("position",new Gt(l,3)),u.computeBoundingSphere(),this.add(new nr(u,new Ro({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const rz=new he;let ME,LM;class Kme extends Un{constructor(e=new he(0,0,1),t=new he(0,0,0),i=1,r=16776960,o=i*.2,a=o*.2){super(),this.type="ArrowHelper",ME===void 0&&(ME=new On,ME.setAttribute("position",new Gt([0,0,0,0,1,0],3)),LM=new mg(0,.5,1,5,1),LM.translate(0,-.5,0)),this.position.copy(t),this.line=new Zh(ME,new fo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new nr(LM,new Ro({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{rz.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(rz,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ege extends Ec{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new On;r.setAttribute("position",new Gt(t,3)),r.setAttribute("color",new Gt(i,3));const o=new fo({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,t,i){const r=new pt,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(t),r.toArray(o,6),r.toArray(o,9),r.set(i),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tge{constructor(){this.type="ShapePath",this.color=new pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ES,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,o,a){return this.currentPath.bezierCurveTo(e,t,i,r,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const w=[];for(let E=0,$=T.length;E<$;E++){const A=T[E],I=new Nm;I.curves=A.curves,w.push(I)}return w}function i(T,w){const E=w.length;let $=!1;for(let A=E-1,I=0;I<E;A=I++){let D=w[A],R=w[I],B=R.x-D.x,G=R.y-D.y;if(Math.abs(G)>Number.EPSILON){if(G<0&&(D=w[I],B=-B,R=w[A],G=-G),T.y<D.y||T.y>R.y)continue;if(T.y===D.y){if(T.x===D.x)return!0}else{const Z=G*(T.x-D.x)-B*(T.y-D.y);if(Z===0)return!0;if(Z<0)continue;$=!$}}else{if(T.y!==D.y)continue;if(R.x<=T.x&&T.x<=D.x||D.x<=T.x&&T.x<=R.x)return!0}}return $}const r=Eu.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,l,u;const h=[];if(o.length===1)return l=o[0],u=new Nm,u.curves=l.curves,h.push(u),h;let d=!r(o[0].getPoints());d=e?!d:d;const p=[],m=[];let g=[],v=0,y;m[v]=void 0,g[v]=[];for(let T=0,w=o.length;T<w;T++)l=o[T],y=l.getPoints(),a=r(y),a=e?!a:a,a?(!d&&m[v]&&v++,m[v]={s:new Nm,p:y},m[v].s.curves=l.curves,d&&v++,g[v]=[]):g[v].push({h:l,p:y[0]});if(!m[0])return t(o);if(m.length>1){let T=!1,w=0;for(let E=0,$=m.length;E<$;E++)p[E]=[];for(let E=0,$=m.length;E<$;E++){const A=g[E];for(let I=0;I<A.length;I++){const D=A[I];let R=!0;for(let B=0;B<m.length;B++)i(D.p,m[B].p)&&(E!==B&&w++,R?(R=!1,p[B].push(D)):T=!0);R&&p[E].push(D)}}w>0&&T===!1&&(g=p)}let S;for(let T=0,w=m.length;T<w;T++){u=m[T].s,h.push(u),S=g[T];for(let E=0,$=S.length;E<$;E++)u.holes.push(S[E].h)}return h}}const Ih=nge();function nge(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h<-14?(i[u]=1024>>-h-14,i[u|256]=1024>>-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h<=15?(i[u]=h+15<<10,i[u|256]=h+15<<10|32768,r[u]=13,r[u|256]=13):h<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,d=0;for(;!(h&8388608);)h<<=1,d-=8388608;h&=-8388609,d+=947912704,o[u]=h|d}for(let u=1024;u<2048;++u)o[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:a,offsetTable:l}}function ige(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=wr(n,-65504,65504),Ih.floatView[0]=n;const e=Ih.uint32View[0],t=e>>23&511;return Ih.baseTable[t]+((e&8388607)>>Ih.shiftTable[t])}function rge(n){const e=n>>10;return Ih.uint32View[0]=Ih.mantissaTable[Ih.offsetTable[e]+(n&1023)]+Ih.exponentTable[e],Ih.floatView[0]}const sge={toHalfFloat:ige,fromHalfFloat:rge};class oge extends rd{constructor(e,t,i,r,o,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,o,a)}}class age extends wT{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class lge extends ET{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class cge extends xT{constructor(e,t,i,r,o,a,l){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,o,a,l)}}class uge extends mg{constructor(e,t,i,r,o,a,l,u){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,o,a,l,u)}}class hge extends $T{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class dge extends CT{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class fge extends AT{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class pge extends MO{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class mge extends PO{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class gge extends sd{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class _ge extends od{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class Oge extends kT{constructor(e,t,i,r,o,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,o,a)}}class vge extends IT{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class yge extends DO{constructor(e,t,i,r,o,a,l){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,o,a,l)}}class bge extends RT{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Sge extends MT{constructor(e,t,i,r,o){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,o)}}class Tge extends PT{constructor(e,t,i,r,o,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,o,a)}}class wge extends DT{constructor(e,t,i,r,o){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,o)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:OA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=OA);const XY=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:UB,AddEquation:lm,AddOperation:bj,AdditiveAnimationBlendMode:WB,AdditiveBlending:tD,AlphaFormat:Ij,AlwaysDepth:pj,AlwaysStencilFunc:Xj,AmbientLight:NY,AmbientLightProbe:_me,AnimationClip:mO,AnimationLoader:ome,AnimationMixer:QY,AnimationObjectGroup:Mme,AnimationUtils:nme,ArcCurve:pY,ArrayCamera:aY,ArrowHelper:Kme,Audio:WY,AudioAnalyser:Tme,AudioContext:b3,AudioListener:yme,AudioLoader:mme,AxesHelper:ege,BackSide:Xs,BasicDepthPacking:Vj,BasicShadowMap:ej,Bone:RA,BooleanKeyframeTrack:gg,Box2:Ume,Box3:Za,Box3Helper:qme,BoxBufferGeometry:oge,BoxGeometry:rd,BoxHelper:Zme,BufferAttribute:ei,BufferGeometry:On,BufferGeometryLoader:UY,ByteType:xj,Cache:ig,Camera:yT,CameraHelper:Yme,CanvasTexture:fY,CapsuleBufferGeometry:age,CapsuleGeometry:wT,CatmullRomCurve3:s3,CineonToneMapping:wj,CircleBufferGeometry:lge,CircleGeometry:ET,ClampToEdgeWrapping:zs,Clock:S3,Color:pt,ColorKeyframeTrack:m3,ColorManagement:oo,CompressedArrayTexture:xpe,CompressedTexture:i3,CompressedTextureLoader:ame,ConeBufferGeometry:cge,ConeGeometry:xT,CubeCamera:Kj,CubeReflectionMapping:Rf,CubeRefractionMapping:Mf,CubeTexture:bT,CubeTextureLoader:lme,CubeUVReflectionMapping:IO,CubicBezierCurve:o3,CubicBezierCurve3:mY,CubicInterpolant:IY,CullFaceBack:eD,CullFaceFront:K9,CullFaceFrontBack:Ele,CullFaceNone:J9,Curve:xc,CurvePath:_Y,CustomBlending:tj,CustomToneMapping:Ej,CylinderBufferGeometry:uge,CylinderGeometry:mg,Cylindrical:Fme,Data3DTexture:jB,DataArrayTexture:wA,DataTexture:z0,DataTextureLoader:cme,DataUtils:sge,DecrementStencilOp:Lle,DecrementWrapStencilOp:Ble,DefaultLoadingManager:PY,DepthFormat:Tf,DepthStencilFormat:Km,DepthTexture:JB,DirectionalLight:y3,DirectionalLightHelper:jme,DiscreteInterpolant:RY,DisplayP3ColorSpace:VB,DodecahedronBufferGeometry:hge,DodecahedronGeometry:$T,DoubleSide:El,DstAlphaFactor:lj,DstColorFactor:uj,DynamicCopyUsage:Kle,DynamicDrawUsage:Xle,DynamicReadUsage:Zle,EdgesGeometry:OY,EllipseCurve:PA,EqualDepth:gj,EqualStencilFunc:Wle,EquirectangularReflectionMapping:_S,EquirectangularRefractionMapping:OS,Euler:vT,EventDispatcher:Pu,ExtrudeBufferGeometry:dge,ExtrudeGeometry:CT,FileLoader:Xa,Float16BufferAttribute:Fce,Float32BufferAttribute:Gt,Float64BufferAttribute:Uce,FloatType:_u,Fog:IA,FogExp2:kA,FramebufferTexture:Epe,FrontSide:Sc,Frustum:EA,GLBufferAttribute:Bme,GLSL1:tce,GLSL3:AD,GreaterDepth:Oj,GreaterEqualDepth:_j,GreaterEqualStencilFunc:Hle,GreaterStencilFunc:Qle,GridHelper:Hme,Group:Nh,HalfFloatType:Jm,HemisphereLight:LY,HemisphereLightHelper:Vme,HemisphereLightProbe:gme,IcosahedronBufferGeometry:fge,IcosahedronGeometry:AT,ImageBitmapLoader:GY,ImageLoader:AS,ImageUtils:XB,IncrementStencilOp:Dle,IncrementWrapStencilOp:Nle,InstancedBufferAttribute:tg,InstancedBufferGeometry:FA,InstancedInterleavedBuffer:Y$,InstancedMesh:dY,Int16BufferAttribute:Nce,Int32BufferAttribute:Bce,Int8BufferAttribute:Pce,IntType:Cj,InterleavedBuffer:ST,InterleavedBufferAttribute:aa,Interpolant:NO,InterpolateDiscrete:uO,InterpolateLinear:eg,InterpolateSmooth:Xx,InvertStencilOp:Fle,KeepStencilOp:jx,KeyframeTrack:$c,LOD:hY,LatheBufferGeometry:pge,LatheGeometry:MO,Layers:Lm,LessDepth:mj,LessEqualDepth:X$,LessEqualStencilFunc:zle,LessStencilFunc:Gle,Light:Yf,LightProbe:NA,Line:Zh,Line3:VY,LineBasicMaterial:fo,LineCurve:DA,LineCurve3:gY,LineDashedMaterial:AY,LineLoop:t3,LineSegments:Ec,LinearEncoding:Yh,LinearFilter:hi,LinearInterpolant:p3,LinearMipMapLinearFilter:kle,LinearMipMapNearestFilter:Ale,LinearMipmapLinearFilter:Iu,LinearMipmapNearestFilter:bA,LinearSRGBColorSpace:hO,LinearToneMapping:Sj,Loader:Uo,LoaderUtils:xu,LoadingManager:g3,LoopOnce:Gj,LoopPingPong:zj,LoopRepeat:Wj,LuminanceAlphaFormat:Mj,LuminanceFormat:Rj,MOUSE:im,Material:Br,MaterialLoader:BA,MathUtils:TA,Matrix3:vs,Matrix4:hn,MaxEquation:sD,Mesh:nr,MeshBasicMaterial:Ro,MeshDepthMaterial:$A,MeshDistanceMaterial:CA,MeshLambertMaterial:$Y,MeshMatcapMaterial:CY,MeshNormalMaterial:xY,MeshPhongMaterial:wY,MeshPhysicalMaterial:ad,MeshStandardMaterial:LO,MeshToonMaterial:EY,MinEquation:rD,MirroredRepeatWrapping:cO,MixOperation:yj,MultiplyBlending:iD,MultiplyOperation:_T,NearestFilter:fr,NearestMipMapLinearFilter:Cle,NearestMipMapNearestFilter:$le,NearestMipmapLinearFilter:G0,NearestMipmapNearestFilter:vS,NeverDepth:fj,NeverStencilFunc:Ule,NoBlending:Fh,NoColorSpace:Rle,NoToneMapping:Oc,NormalAnimationBlendMode:SA,NormalBlending:Mm,NotEqualDepth:vj,NotEqualStencilFunc:Vle,NumberKeyframeTrack:fO,Object3D:Un,ObjectLoader:fme,ObjectSpaceNormalMap:Hj,OctahedronBufferGeometry:mge,OctahedronGeometry:PO,OneFactor:sj,OneMinusDstAlphaFactor:cj,OneMinusDstColorFactor:hj,OneMinusSrcAlphaFactor:FB,OneMinusSrcColorFactor:aj,OrthographicCamera:Uh,PCFShadowMap:vA,PCFSoftShadowMap:Mb,PMREMGenerator:ID,Path:ES,PerspectiveCamera:Ci,Plane:Ah,PlaneBufferGeometry:gge,PlaneGeometry:sd,PlaneHelper:Jme,PointLight:v3,PointLightHelper:zme,Points:n3,PointsMaterial:MA,PolarGridHelper:Xme,PolyhedronBufferGeometry:_ge,PolyhedronGeometry:od,PositionalAudio:Sme,PropertyBinding:jn,PropertyMixer:zY,QuadraticBezierCurve:a3,QuadraticBezierCurve3:l3,Quaternion:Jr,QuaternionKeyframeTrack:Df,QuaternionLinearInterpolant:MY,RED_GREEN_RGTC2_Format:$D,RED_RGTC1_Format:Uj,REVISION:OA,RGBADepthPacking:QB,RGBAFormat:ra,RGBAIntegerFormat:Bj,RGBA_ASTC_10x10_Format:TD,RGBA_ASTC_10x5_Format:yD,RGBA_ASTC_10x6_Format:bD,RGBA_ASTC_10x8_Format:SD,RGBA_ASTC_12x10_Format:wD,RGBA_ASTC_12x12_Format:ED,RGBA_ASTC_4x4_Format:dD,RGBA_ASTC_5x4_Format:fD,RGBA_ASTC_5x5_Format:pD,RGBA_ASTC_6x5_Format:mD,RGBA_ASTC_6x6_Format:gD,RGBA_ASTC_8x5_Format:_D,RGBA_ASTC_8x6_Format:OD,RGBA_ASTC_8x8_Format:vD,RGBA_BPTC_Format:Hx,RGBA_ETC2_EAC_Format:hD,RGBA_PVRTC_2BPPV1_Format:cD,RGBA_PVRTC_4BPPV1_Format:lD,RGBA_S3TC_DXT1_Format:zx,RGBA_S3TC_DXT3_Format:Qx,RGBA_S3TC_DXT5_Format:Vx,RGB_ETC1_Format:Fj,RGB_ETC2_Format:uD,RGB_PVRTC_2BPPV1_Format:aD,RGB_PVRTC_4BPPV1_Format:oD,RGB_S3TC_DXT1_Format:Wx,RGFormat:Lj,RGIntegerFormat:Nj,RawShaderMaterial:TY,Ray:OT,Raycaster:UA,RectAreaLight:BY,RedFormat:Pj,RedIntegerFormat:Dj,ReinhardToneMapping:Tj,RepeatWrapping:Pf,ReplaceStencilOp:Ple,ReverseSubtractEquation:ij,RingBufferGeometry:Oge,RingGeometry:kT,SIGNED_RED_GREEN_RGTC2_Format:CD,SIGNED_RED_RGTC1_Format:xD,SRGBColorSpace:cc,Scene:wS,ShaderChunk:Sn,ShaderLib:Io,ShaderMaterial:Ha,ShadowMaterial:SY,Shape:Nm,ShapeBufferGeometry:vge,ShapeGeometry:IT,ShapePath:tge,ShapeUtils:Eu,ShortType:$j,Skeleton:TT,SkeletonHelper:Wme,SkinnedMesh:e3,Source:wm,Sphere:wc,SphereBufferGeometry:yge,SphereGeometry:DO,Spherical:BD,SphericalHarmonics3:FY,SplineCurve:c3,SpotLight:O3,SpotLightHelper:Gme,Sprite:uY,SpriteMaterial:KB,SrcAlphaFactor:BB,SrcAlphaSaturateFactor:dj,SrcColorFactor:oj,StaticCopyUsage:Jle,StaticDrawUsage:bS,StaticReadUsage:Yle,StereoCamera:Ome,StreamCopyUsage:ece,StreamDrawUsage:jle,StreamReadUsage:qle,StringKeyframeTrack:_g,SubtractEquation:nj,SubtractiveBlending:nD,TOUCH:rm,TangentSpaceNormalMap:id,TetrahedronBufferGeometry:bge,TetrahedronGeometry:RT,Texture:Ri,TextureLoader:DY,TorusBufferGeometry:Sge,TorusGeometry:MT,TorusKnotBufferGeometry:Tge,TorusKnotGeometry:PT,Triangle:bl,TriangleFanDrawMode:zB,TriangleStripDrawMode:Qj,TrianglesDrawMode:Ile,TubeBufferGeometry:wge,TubeGeometry:DT,TwoPassDoubleSide:xle,UVMapping:yA,Uint16BufferAttribute:YB,Uint32BufferAttribute:ZB,Uint8BufferAttribute:Dce,Uint8ClampedBufferAttribute:Lce,Uniform:E3,UniformsGroup:Nme,UniformsLib:vt,UniformsUtils:pg,UnsignedByteType:jh,UnsignedInt248Type:Pm,UnsignedIntType:of,UnsignedShort4444Type:Aj,UnsignedShort5551Type:kj,UnsignedShortType:GB,VSMShadowMap:bm,Vector2:nt,Vector3:he,Vector4:Fn,VectorKeyframeTrack:pO,VideoTexture:wpe,WebGL1Renderer:lY,WebGL3DRenderTarget:wce,WebGLArrayRenderTarget:Tce,WebGLCubeRenderTarget:eY,WebGLMultipleRenderTargets:Ece,WebGLRenderTarget:Rl,WebGLRenderer:AA,WebGLUtils:oY,WireframeGeometry:h3,WrapAroundEnding:yS,ZeroCurvatureEnding:Sm,ZeroFactor:rj,ZeroSlopeEnding:Tm,ZeroStencilOp:Mle,_SRGBAFormat:j$,sRGBEncoding:Nn},Symbol.toStringTag,{value:"Module"}));class jY{constructor(e){Ct(this,"duration");this.duration=e}}class YY extends jY{constructor(t,i){super(t);Ct(this,"coefs");this.coefs=i}evaluate(t){const i=new he;return this.coefs.map((r,o)=>{i.addScaledVector(r,Math.pow(t,o))}),i}}class Ege extends jY{constructor(t,i,r,o=["X","Z"],a=2*Math.PI,l=!1){super(t);Ct(this,"radius");Ct(this,"axes");Ct(this,"radians");Ct(this,"clockwise");Ct(this,"pos");this.radius=r,this.axes=o,this.radians=a,this.clockwise=l,this.pos=i}evaluate(t){let i=1;this.clockwise&&(i=-1);const r=(this.radius*Math.cos(t*this.radians)-1)*i,o=this.radius*-Math.sin(t*this.radians)*i;var a=this.pos.x,l=this.pos.y,u=this.pos.z;return this.axes.some(h=>h==="X")?a=r+this.pos.x:l=r+this.pos.y,this.axes.some(h=>h==="Z")?u=o+this.pos.z:l=o+this.pos.y,new he(a,l,u)}}const xge=60;let $ge=eval;const Cge={robots:{},time:0,timeDilation:1,status:"STOPPED"},sz=new YY(-1,[]),PE=[],sa=gT()(_A((n,e)=>({...Cge,play:()=>{n({status:"RUNNING",time:0}),e().executeSimulation(0)},pause:()=>{n({status:"PAUSED"}),e().cancelSimulation()},resume:()=>{n({status:"RUNNING"}),e().executeSimulation(e().time)},halt:()=>{n({status:"STOPPED"}),e().cancelSimulation()},step:()=>{const{status:t,time:i,timeDilation:r,robots:o}=e();if(t!=="RUNNING")return;const a=1/(xge*r),l=i+a,u={...o};Object.keys(u).forEach(h=>{var v;const d=u[h];if(d.trajectory===null||d.trajectory.duration<0)return;const p=d.timeAlongTrajectory+a/d.trajectoryDuration,m=d.trajectory.evaluate(p),g=m.clone().sub(d.pos);u[h]={...u[h],pos:m,boundingBox:(v=d.boundingBox)==null?void 0:v.clone().translate(g),timeAlongTrajectory:p},u[h].timeAlongTrajectory>=1&&(u[h].trajectory=sz,u[h].timeAlongTrajectory=0)}),n({robots:u,time:l})},setRobots:t=>{const i={};Object.values(t).forEach(r=>{i[r.id]={id:r.id,boundingBox:void 0,pos:new he(...r.startingPosition),vel:new he,acc:new he,color:new pt(255,255,255),timeAlongTrajectory:0,trajectory:sz,trajectoryDuration:0,trajectories:[]}}),n({robots:i})},updateRobotBoundingBox:(t,i)=>{n(r=>{r.robots[t].boundingBox=i})},checkCollisions:t=>{const i=e().robots[t],r=Object.entries(e().robots);return i.boundingBox===void 0?!1:r.some(([o,a])=>(o!==t&&a.boundingBox&&i.boundingBox&&i.boundingBox.intersectsBox(a.boundingBox),o!==t&&a.boundingBox&&i.boundingBox&&i.boundingBox.intersectsBox(a.boundingBox)))},updateTrajectory:(t,i,r)=>{n(o=>{o.robots[t].timeAlongTrajectory=0,o.robots[t].trajectory=i,o.robots[t].trajectoryDuration=r})},robotGoTo:(t,i,r,o)=>{const a=e().robots[t],l=a.pos.clone(),u=a.vel.clone(),h=a.acc.clone().multiplyScalar(.5),d=new he,p=a.acc.clone().multiplyScalar(2).addScaledVector(o,-1).addScaledVector(a.vel,8).addScaledVector(r,6).addScaledVector(a.pos,14).addScaledVector(i,-14).multiplyScalar(-2.5),m=a.acc.clone().multiplyScalar(10).addScaledVector(o,-7).addScaledVector(a.vel,45).addScaledVector(r,39).addScaledVector(a.pos,84).addScaledVector(i,-84),g=a.acc.clone().multiplyScalar(-15).addScaledVector(o,13).addScaledVector(a.vel,-72).addScaledVector(r,-68).addScaledVector(a.pos,-140).addScaledVector(i,140).multiplyScalar(.5),v=a.acc.clone().addScaledVector(o,-1).addScaledVector(a.vel,5).addScaledVector(r,5).addScaledVector(a.pos,10).addScaledVector(i,-10).multiplyScalar(2);return new YY(1,[l,u,h,d,p,m,g,v])},robotCircle:(t,i=1,r=["Y","Z"],o=2*Math.PI,a=!1)=>{const l=e().robots[t];return new Ege(1,l.pos,i,r,o,a)},executeSimulation:t=>{const i=jt.getState().timelineState,r=jt.getState().blocks,o=jt.getState().robots;t===0&&e().setRobots(o),Object.values(i.groups).forEach(a=>{Object.keys(a.robots),Object.values(a.items).forEach(l=>{const u=l.startTime-t;if(u<0)return;const h=setTimeout(()=>{$ge(r[l.blockId].javaScript)},i.scale*u*1e3);PE.push(h)})})},cancelSimulation:()=>{for(PE.map(t=>clearInterval(t));PE.length>0;)PE.pop()}})));let Age=eval;const oz={blocks:{},projectName:"New Robart Project",timelineState:{scale:1,mode:"ADD",groups:{group1:{id:"group1",name:"Group 1",items:{},robots:{},duration:60},group2:{id:"group2",name:"Group 2",items:{},robots:{},duration:60},group3:{id:"group3",name:"Group 3",items:{},robots:{},duration:60},group4:{id:"group4",name:"Group 4",items:{},robots:{},duration:60},group5:{id:"group5",name:"Group 5",items:{},robots:{},duration:60}}},editingBlockId:void 0,version:Gx,robots:{}},jt=gT()(_A(H9(qae((n,e)=>({...oz,loadProject:t=>{const i=Tle(t);n(i)},saveProject:t=>{const i={blocks:e().blocks,editingBlockId:void 0,projectName:e().projectName,timelineState:e().timelineState,version:Gx,robots:e().robots};Sle(i,t)},exportToROS:t=>{const i={blocks:e().blocks,editingBlockId:void 0,projectName:e().projectName,timelineState:e().timelineState,version:Gx,robots:e().robots};wle(i)},resetProject:()=>{n(oz)},setProjectName:t=>n({projectName:t}),saveGroup:(t,i)=>{},createGroup:t=>{const i=Dy(),r={id:i,name:t,items:{},robots:{},duration:60};return n(o=>{o.timelineState.groups[i]=r}),i},addBlockToTimeline:(t,i,r,o)=>{Object.keys(e().timelineState.groups[t].robots);const a={blocks:e().blocks,editingBlockId:void 0,projectName:e().projectName,timelineState:e().timelineState,version:Gx,robots:e().robots};Object.keys(e().timelineState.groups[t].items),a.timelineState.groups[t].items;var l=0;Age(e().blocks[i].javaScript),l=Math.max(.1,l);const u={id:Dy(),groupId:t,blockId:i,startTime:r,isTrajectory:o,duration:l},h={...e().timelineState.groups[t].items};h[u.id]=u,n(d=>{d.timelineState.groups[t].items=h})},updateBlockInTimeline:(t,i,r)=>{const o={...e().timelineState.groups[t].items[i],startTime:r},a={...e().timelineState.groups[t].items};a[o.id]=o,n(l=>{l.timelineState.groups[t].items=a})},saveBlock:(t,i)=>{e().blocks[t]!==void 0&&n(r=>{r.blocks[t]={...r.blocks[t],...i}})},removeBlock:t=>{var a;const i=Object.fromEntries(Object.entries(e().blocks).filter(([l,u])=>l!==t));Object.values(e().timelineState.groups).map(l=>Object.values(l.items).filter(u=>u.blockId===t)).flat().forEach(l=>e().removeTimelineItem(l.groupId,l.id));const o=(a=Object.values(i).at(-1))==null?void 0:a.id;n({blocks:i,editingBlockId:o})},renameBlock:t=>n(i=>{i.blocks[i.editingBlockId].name=t}),createBlock:t=>{const i={id:Dy(),name:t,xml:"",python:"",javaScript:"",duration:3};return n(r=>{r.blocks[i.id]=i}),i.id},copyBlock:t=>{const i={...e().blocks[t],id:Dy(),name:`Copy of ${e().blocks[t].name}`};return n(r=>{r.blocks[i.id]=i}),i.id},setDuration:(t,i)=>{n(r=>{r.blocks[t].duration=i})},setEditingBlock:t=>{const i=e().editingBlockId;n({editingBlockId:void 0}),t!=i&&n({editingBlockId:t})},addRobotToGroup:(t,i)=>{n(r=>{r.timelineState.groups[t].robots[i]=r.robots[i]})},removeRobotFromGroup:(t,i)=>{n(r=>{delete r.timelineState.groups[t].robots[i]})},createRobot:()=>{const t=Dy(),i=Object.keys(e().robots).length;return n(r=>{r.robots[t]={id:t,name:`CF ${i}`,type:"crazyflie",startingPosition:[0,0,0]}}),t},saveRobot:(t,i)=>{n(r=>{r.robots[t]={...r.robots[t],...i}})},deleteRobot:t=>{const i={...e().robots};delete i[t],n({robots:i})},setTimelineMode:t=>{n({timelineState:{...e().timelineState,mode:t}})},removeTimelineItem:(t,i)=>{const r={...e().timelineState.groups[t].items};delete r[i],n(o=>{o.timelineState.groups[t].items=r})}}),{storage:X9(()=>sessionStorage),name:"robartState"}))));jt.subscribe(n=>n.robots,n=>{sa.getState().setRobots(n)});function kge(n,e){var t=null,i=null,r=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];i=function(){t=null,n.apply(void 0,a)},clearTimeout(t),t=setTimeout(i,e)},o=function(){t!==null&&(clearTimeout(t),i())};return[r,o]}var Z$=globalThis&&globalThis.__assign||function(){return Z$=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Z$.apply(this,arguments)};function Ige(n,e,t){try{return Yt.Xml.domToWorkspace(Yt.Xml.textToDom(n),e),!0}catch(i){return t&&t(i),!1}}var Rge=function(n){var e=n.ref,t=n.initialXml,i=n.toolboxConfiguration,r=n.workspaceConfiguration,o=n.onWorkspaceChange,a=n.onImportXmlError,l=n.onInject,u=n.onDispose,h=Cn.useState(null),d=h[0],p=h[1],m=Cn.useState(t),g=m[0],v=m[1],y=Cn.useState(!1),S=y[0],T=y[1],w=Cn.useState(!1),E=w[0],$=w[1],A=Cn.useRef(r);Cn.useEffect(function(){A.current=r},[r]);var I=Cn.useRef(i);Cn.useEffect(function(){I.current=i,i&&d&&d.updateToolbox(i)},[i,d]);var D=Cn.useRef(l),R=Cn.useRef(u);Cn.useEffect(function(){D.current=l},[l]),Cn.useEffect(function(){R.current=u},[u]);var B=Cn.useCallback(function(G){o&&o(G)},[o]);return Cn.useEffect(function(){if(e.current){var G=Yt.inject(e.current,Z$(Z$({},A.current),{toolbox:I.current}));p(G),T(!1),$(!1),D.current&&D.current(G);var Z=R.current;return function(){G.dispose(),Z&&Z(G)}}},[e]),Cn.useEffect(function(){d&&!E&&B(d)},[B,E,d]),Cn.useEffect(function(){if(d!=null){var G=function(){B(d)};return d.addChangeListener(G),function(){d.removeChangeListener(G)}}},[d,B]),Cn.useEffect(function(){if(d!=null){var G=kge(function(){var H=Yt.Xml.domToText(Yt.Xml.workspaceToDom(d));H!==g&&v(H)},200),Z=G[0],N=G[1];return d.addChangeListener(Z),function(){d.removeChangeListener(Z),N()}}},[d,g]),Cn.useEffect(function(){if(g&&d&&!S){var G=Ige(g,d,a);G||v(null),T(!0)}},[g,d,S,a]),{workspace:d,xml:g}},ZY={exports:{}},Mge="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pge=Mge,Dge=Pge;function qY(){}function JY(){}JY.resetWarningCache=qY;var Lge=function(){function n(i,r,o,a,l,u){if(u!==Dge){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:JY,resetWarningCache:qY};return t.PropTypes=t,t};ZY.exports=Lge();var Nge=ZY.exports;const $t=Mu(Nge);$t.string,$t.object,$t.object,$t.string,$t.func,$t.func,$t.func,$t.func,$t.func;function KY(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=KY(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function Gh(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=KY(n))&&(i&&(i+=" "),i+=e);return i}const x3=({text:n,updateText:e,className:t})=>{const[i,r]=q.useState(!1),[o,a]=q.useState(""),[l,u]=q.useState(0),h=q.useRef(null);q.useEffect(()=>{var p;h.current!==null&&u((p=h.current)==null?void 0:p.offsetWidth)},[o]);const d="h-min w-fit rounded-md border-2 border-white hover:border-black";return i?dt("form",{onSubmit:p=>{p.preventDefault(),e(o),r(!1)},children:[se("span",{className:Gh(d,t,"absolute -z-40 whitespace-pre"),ref:h,children:o}),se("input",{className:Gh(d,t),value:o,style:{width:`calc(${l}px + 1ch)`},onChange:p=>a(p.target.value),onBlur:()=>r(!1),autoFocus:!0}),se("input",{type:"submit",className:"hidden"})]}):se("h2",{className:Gh(d,t),onClick:()=>{a(n),r(!0)},children:n})},Bge=()=>{const n=jt(i=>i.editingBlockId),e=jt(i=>i.blocks[n??""]),t=jt(i=>i.renameBlock);return e?se("div",{className:"m-2 flex items-center gap-2",children:se(x3,{text:e.name,className:"text-lg font-bold",updateText:i=>{t(i!==""?i:"New Block")}})}):se("div",{className:"h-full w-full text-3xl font-bold flex justify-center items-center",children:"No Block Selected."})},Fge=()=>{const n=jt(l=>l.editingBlockId),e=jt(l=>l.saveBlock),t=q.useRef(null),[i,r]=q.useState(),{workspace:o,xml:a}=Rge({toolboxConfiguration:bae,initialXml:"",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:l=>{const u=Q2.pythonGenerator.workspaceToCode(l),h=U$.javascriptGenerator.workspaceToCode(l);i&&a&&e(i,{xml:a,python:u,javaScript:h})},ref:t});return q.useEffect(()=>{if(window.dispatchEvent(new Event("resize")),!!o)if(r(n),n){o.setVisible(!0);const u=jt.getState().blocks[n];if(u.xml){var l=Yt.Xml.textToDom(u.xml);Yt.Xml.clearWorkspaceAndLoadFromXml(l,o)}else u.xml||o.clear()}else o.setVisible(!1),o.clear()},[n]),dt("div",{className:"flex h-full w-full flex-col",children:[se(Bge,{}),se("div",{ref:t,className:"w-full flex-grow"})]})};function az(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Mt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?az(Object(t),!0).forEach(function(i){ns(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):az(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function q$(n){"@babel/helpers - typeof";return q$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q$(n)}function Uge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lz(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Gge(n,e,t){return e&&lz(n.prototype,e),t&&lz(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ns(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $3(n,e){return zge(n)||Vge(n,e)||e7(n,e)||Xge()}function LT(n){return Wge(n)||Qge(n)||e7(n)||Hge()}function Wge(n){if(Array.isArray(n))return FD(n)}function zge(n){if(Array.isArray(n))return n}function Qge(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vge(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,a,l;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(u){o=!0,l=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw l}}return i}}function e7(n,e){if(n){if(typeof n=="string")return FD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FD(n,e)}}function FD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Hge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cz=function(){},C3={},t7={},n7=null,i7={mark:cz,measure:cz};try{typeof window<"u"&&(C3=window),typeof document<"u"&&(t7=document),typeof MutationObserver<"u"&&(n7=MutationObserver),typeof performance<"u"&&(i7=performance)}catch{}var jge=C3.navigator||{},uz=jge.userAgent,hz=uz===void 0?"":uz,Lf=C3,ki=t7,dz=n7,DE=i7;Lf.document;var ld=!!ki.documentElement&&!!ki.head&&typeof ki.addEventListener=="function"&&typeof ki.createElement=="function",r7=~hz.indexOf("MSIE")||~hz.indexOf("Trident/"),LE,NE,BE,FE,UE,qh="___FONT_AWESOME___",UD=16,s7="fa",o7="svg-inline--fa",rg="data-fa-i2svg",GD="data-fa-pseudo-element",Yge="data-fa-pseudo-element-pending",A3="data-prefix",k3="data-icon",fz="fontawesome-i2svg",Zge="async",qge=["HTML","HEAD","STYLE","SCRIPT"],a7=function(){try{return!0}catch{return!1}}(),$i="classic",pr="sharp",I3=[$i,pr];function NT(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[$i]}})}var kS=NT((LE={},ns(LE,$i,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),ns(LE,pr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),LE)),IS=NT((NE={},ns(NE,$i,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ns(NE,pr,{solid:"fass",regular:"fasr"}),NE)),RS=NT((BE={},ns(BE,$i,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ns(BE,pr,{fass:"fa-solid",fasr:"fa-regular"}),BE)),Jge=NT((FE={},ns(FE,$i,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ns(FE,pr,{"fa-solid":"fass","fa-regular":"fasr"}),FE)),Kge=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,l7="fa-layers-text",e_e=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,t_e=NT((UE={},ns(UE,$i,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ns(UE,pr,{900:"fass",400:"fasr"}),UE)),c7=[1,2,3,4,5,6,7,8,9,10],n_e=c7.concat([11,12,13,14,15,16,17,18,19,20]),i_e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],xm={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},MS=new Set;Object.keys(IS[$i]).map(MS.add.bind(MS));Object.keys(IS[pr]).map(MS.add.bind(MS));var r_e=[].concat(I3,LT(MS),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",xm.GROUP,xm.SWAP_OPACITY,xm.PRIMARY,xm.SECONDARY]).concat(c7.map(function(n){return"".concat(n,"x")})).concat(n_e.map(function(n){return"w-".concat(n)})),Nb=Lf.FontAwesomeConfig||{};function s_e(n){var e=ki.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function o_e(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(ki&&typeof ki.querySelector=="function"){var a_e=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];a_e.forEach(function(n){var e=$3(n,2),t=e[0],i=e[1],r=o_e(s_e(t));r!=null&&(Nb[i]=r)})}var u7={styleDefault:"solid",familyDefault:"classic",cssPrefix:s7,replacementClass:o7,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Nb.familyPrefix&&(Nb.cssPrefix=Nb.familyPrefix);var gO=Mt(Mt({},u7),Nb);gO.autoReplaceSvg||(gO.observeMutations=!1);var Vt={};Object.keys(u7).forEach(function(n){Object.defineProperty(Vt,n,{enumerable:!0,set:function(t){gO[n]=t,Bb.forEach(function(i){return i(Vt)})},get:function(){return gO[n]}})});Object.defineProperty(Vt,"familyPrefix",{enumerable:!0,set:function(e){gO.cssPrefix=e,Bb.forEach(function(t){return t(Vt)})},get:function(){return gO.cssPrefix}});Lf.FontAwesomeConfig=Vt;var Bb=[];function l_e(n){return Bb.push(n),function(){Bb.splice(Bb.indexOf(n),1)}}var Hd=UD,Ou={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function c_e(n){if(!(!n||!ld)){var e=ki.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=ki.head.childNodes,i=null,r=t.length-1;r>-1;r--){var o=t[r],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=o)}return ki.head.insertBefore(e,i),n}}var u_e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function PS(){for(var n=12,e="";n-- >0;)e+=u_e[Math.random()*62|0];return e}function BO(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function R3(n){return n.classList?BO(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function h7(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h_e(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(h7(n[t]),'" ')},"").trim()}function GA(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function M3(n){return n.size!==Ou.size||n.x!==Ou.x||n.y!==Ou.y||n.rotate!==Ou.rotate||n.flipX||n.flipY}function d_e(n){var e=n.transform,t=n.containerWidth,i=n.iconWidth,r={transform:"translate(".concat(t/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),l="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(o," ").concat(a," ").concat(l)},h={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:u,path:h}}function f_e(n){var e=n.transform,t=n.width,i=t===void 0?UD:t,r=n.height,o=r===void 0?UD:r,a=n.startCentered,l=a===void 0?!1:a,u="";return l&&r7?u+="translate(".concat(e.x/Hd-i/2,"em, ").concat(e.y/Hd-o/2,"em) "):l?u+="translate(calc(-50% + ".concat(e.x/Hd,"em), calc(-50% + ").concat(e.y/Hd,"em)) "):u+="translate(".concat(e.x/Hd,"em, ").concat(e.y/Hd,"em) "),u+="scale(".concat(e.size/Hd*(e.flipX?-1:1),", ").concat(e.size/Hd*(e.flipY?-1:1),") "),u+="rotate(".concat(e.rotate,"deg) "),u}var p_e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function d7(){var n=s7,e=o7,t=Vt.cssPrefix,i=Vt.replacementClass,r=p_e;if(t!==n||i!==e){var o=new RegExp("\\.".concat(n,"\\-"),"g"),a=new RegExp("\\--".concat(n,"\\-"),"g"),l=new RegExp("\\.".concat(e),"g");r=r.replace(o,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(l,".".concat(i))}return r}var pz=!1;function NM(){Vt.autoAddCss&&!pz&&(c_e(d7()),pz=!0)}var m_e={mixout:function(){return{dom:{css:d7,insertCss:NM}}},hooks:function(){return{beforeDOMElementCreation:function(){NM()},beforeI2svg:function(){NM()}}}},Jh=Lf||{};Jh[qh]||(Jh[qh]={});Jh[qh].styles||(Jh[qh].styles={});Jh[qh].hooks||(Jh[qh].hooks={});Jh[qh].shims||(Jh[qh].shims=[]);var fc=Jh[qh],f7=[],g_e=function n(){ki.removeEventListener("DOMContentLoaded",n),J$=1,f7.map(function(e){return e()})},J$=!1;ld&&(J$=(ki.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ki.readyState),J$||ki.addEventListener("DOMContentLoaded",g_e));function __e(n){ld&&(J$?setTimeout(n,0):f7.push(n))}function BT(n){var e=n.tag,t=n.attributes,i=t===void 0?{}:t,r=n.children,o=r===void 0?[]:r;return typeof n=="string"?h7(n):"<".concat(e," ").concat(h_e(i),">").concat(o.map(BT).join(""),"</").concat(e,">")}function mz(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var O_e=function(e,t){return function(i,r,o,a){return e.call(t,i,r,o,a)}},BM=function(e,t,i,r){var o=Object.keys(e),a=o.length,l=r!==void 0?O_e(t,r):t,u,h,d;for(i===void 0?(u=1,d=e[o[0]]):(u=0,d=i);u<a;u++)h=o[u],d=l(d,e[h],h,e);return d};function v_e(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var o=n.charCodeAt(t++);(o&64512)==56320?e.push(((r&1023)<<10)+(o&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}function WD(n){var e=v_e(n);return e.length===1?e[0].toString(16):null}function y_e(n,e){var t=n.length,i=n.charCodeAt(e),r;return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function gz(n){return Object.keys(n).reduce(function(e,t){var i=n[t],r=!!i.icon;return r?e[i.iconName]=i.icon:e[t]=i,e},{})}function zD(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.skipHooks,r=i===void 0?!1:i,o=gz(e);typeof fc.hooks.addPack=="function"&&!r?fc.hooks.addPack(n,gz(e)):fc.styles[n]=Mt(Mt({},fc.styles[n]||{}),o),n==="fas"&&zD("fa",e)}var GE,WE,zE,T0=fc.styles,b_e=fc.shims,S_e=(GE={},ns(GE,$i,Object.values(RS[$i])),ns(GE,pr,Object.values(RS[pr])),GE),P3=null,p7={},m7={},g7={},_7={},O7={},T_e=(WE={},ns(WE,$i,Object.keys(kS[$i])),ns(WE,pr,Object.keys(kS[pr])),WE);function w_e(n){return~r_e.indexOf(n)}function E_e(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i===n&&r!==""&&!w_e(r)?r:null}var v7=function(){var e=function(o){return BM(T0,function(a,l,u){return a[u]=BM(l,o,{}),a},{})};p7=e(function(r,o,a){if(o[3]&&(r[o[3]]=a),o[2]){var l=o[2].filter(function(u){return typeof u=="number"});l.forEach(function(u){r[u.toString(16)]=a})}return r}),m7=e(function(r,o,a){if(r[a]=a,o[2]){var l=o[2].filter(function(u){return typeof u=="string"});l.forEach(function(u){r[u]=a})}return r}),O7=e(function(r,o,a){var l=o[2];return r[a]=a,l.forEach(function(u){r[u]=a}),r});var t="far"in T0||Vt.autoFetchSvg,i=BM(b_e,function(r,o){var a=o[0],l=o[1],u=o[2];return l==="far"&&!t&&(l="fas"),typeof a=="string"&&(r.names[a]={prefix:l,iconName:u}),typeof a=="number"&&(r.unicodes[a.toString(16)]={prefix:l,iconName:u}),r},{names:{},unicodes:{}});g7=i.names,_7=i.unicodes,P3=WA(Vt.styleDefault,{family:Vt.familyDefault})};l_e(function(n){P3=WA(n.styleDefault,{family:Vt.familyDefault})});v7();function D3(n,e){return(p7[n]||{})[e]}function x_e(n,e){return(m7[n]||{})[e]}function $m(n,e){return(O7[n]||{})[e]}function y7(n){return g7[n]||{prefix:null,iconName:null}}function $_e(n){var e=_7[n],t=D3("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Nf(){return P3}var L3=function(){return{prefix:null,iconName:null,rest:[]}};function WA(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.family,i=t===void 0?$i:t,r=kS[i][n],o=IS[i][n]||IS[i][r],a=n in fc.styles?n:null;return o||a||null}var _z=(zE={},ns(zE,$i,Object.keys(RS[$i])),ns(zE,pr,Object.keys(RS[pr])),zE);function zA(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,r=i===void 0?!1:i,o=(e={},ns(e,$i,"".concat(Vt.cssPrefix,"-").concat($i)),ns(e,pr,"".concat(Vt.cssPrefix,"-").concat(pr)),e),a=null,l=$i;(n.includes(o[$i])||n.some(function(h){return _z[$i].includes(h)}))&&(l=$i),(n.includes(o[pr])||n.some(function(h){return _z[pr].includes(h)}))&&(l=pr);var u=n.reduce(function(h,d){var p=E_e(Vt.cssPrefix,d);if(T0[d]?(d=S_e[l].includes(d)?Jge[l][d]:d,a=d,h.prefix=d):T_e[l].indexOf(d)>-1?(a=d,h.prefix=WA(d,{family:l})):p?h.iconName=p:d!==Vt.replacementClass&&d!==o[$i]&&d!==o[pr]&&h.rest.push(d),!r&&h.prefix&&h.iconName){var m=a==="fa"?y7(h.iconName):{},g=$m(h.prefix,h.iconName);m.prefix&&(a=null),h.iconName=m.iconName||g||h.iconName,h.prefix=m.prefix||h.prefix,h.prefix==="far"&&!T0.far&&T0.fas&&!Vt.autoFetchSvg&&(h.prefix="fas")}return h},L3());return(n.includes("fa-brands")||n.includes("fab"))&&(u.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(u.prefix="fad"),!u.prefix&&l===pr&&(T0.fass||Vt.autoFetchSvg)&&(u.prefix="fass",u.iconName=$m(u.prefix,u.iconName)||u.iconName),(u.prefix==="fa"||a==="fa")&&(u.prefix=Nf()||"fas"),u}var C_e=function(){function n(){Uge(this,n),this.definitions={}}return Gge(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=r.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(l){t.definitions[l]=Mt(Mt({},t.definitions[l]||{}),a[l]),zD(l,a[l]);var u=RS[$i][l];u&&zD(u,a[l]),v7()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(o){var a=r[o],l=a.prefix,u=a.iconName,h=a.icon,d=h[2];t[l]||(t[l]={}),d.length>0&&d.forEach(function(p){typeof p=="string"&&(t[l][p]=h)}),t[l][u]=h}),t}}]),n}(),Oz=[],w0={},Q0={},A_e=Object.keys(Q0);function k_e(n,e){var t=e.mixoutsTo;return Oz=n,w0={},Object.keys(Q0).forEach(function(i){A_e.indexOf(i)===-1&&delete Q0[i]}),Oz.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(a){typeof r[a]=="function"&&(t[a]=r[a]),q$(r[a])==="object"&&Object.keys(r[a]).forEach(function(l){t[a]||(t[a]={}),t[a][l]=r[a][l]})}),i.hooks){var o=i.hooks();Object.keys(o).forEach(function(a){w0[a]||(w0[a]=[]),w0[a].push(o[a])})}i.provides&&i.provides(Q0)}),t}function QD(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var o=w0[n]||[];return o.forEach(function(a){e=a.apply(null,[e].concat(i))}),e}function sg(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=w0[n]||[];r.forEach(function(o){o.apply(null,t)})}function Kh(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Q0[n]?Q0[n].apply(null,e):void 0}function VD(n){n.prefix==="fa"&&(n.prefix="fas");var e=n.iconName,t=n.prefix||Nf();if(e)return e=$m(t,e)||e,mz(b7.definitions,t,e)||mz(fc.styles,t,e)}var b7=new C_e,I_e=function(){Vt.autoReplaceSvg=!1,Vt.observeMutations=!1,sg("noAuto")},R_e={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ld?(sg("beforeI2svg",e),Kh("pseudoElements2svg",e),Kh("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Vt.autoReplaceSvg===!1&&(Vt.autoReplaceSvg=!0),Vt.observeMutations=!0,__e(function(){P_e({autoReplaceSvgRoot:t}),sg("watch",e)})}},M_e={icon:function(e){if(e===null)return null;if(q$(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:$m(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=WA(e[0]);return{prefix:i,iconName:$m(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Vt.cssPrefix,"-"))>-1||e.match(Kge))){var r=zA(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Nf(),iconName:$m(r.prefix,r.iconName)||r.iconName}}if(typeof e=="string"){var o=Nf();return{prefix:o,iconName:$m(o,e)||e}}}},qa={noAuto:I_e,config:Vt,dom:R_e,parse:M_e,library:b7,findIconDefinition:VD,toHtml:BT},P_e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,i=t===void 0?ki:t;(Object.keys(fc.styles).length>0||Vt.autoFetchSvg)&&ld&&Vt.autoReplaceSvg&&qa.dom.i2svg({node:i})};function QA(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return BT(i)})}}),Object.defineProperty(n,"node",{get:function(){if(ld){var i=ki.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function D_e(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,o=n.styles,a=n.transform;if(M3(a)&&t.found&&!i.found){var l=t.width,u=t.height,h={x:l/u/2,y:.5};r.style=GA(Mt(Mt({},o),{},{"transform-origin":"".concat(h.x+a.x/16,"em ").concat(h.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function L_e(n){var e=n.prefix,t=n.iconName,i=n.children,r=n.attributes,o=n.symbol,a=o===!0?"".concat(e,"-").concat(Vt.cssPrefix,"-").concat(t):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Mt(Mt({},r),{},{id:a}),children:i}]}]}function N3(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,o=n.iconName,a=n.transform,l=n.symbol,u=n.title,h=n.maskId,d=n.titleId,p=n.extra,m=n.watchable,g=m===void 0?!1:m,v=i.found?i:t,y=v.width,S=v.height,T=r==="fak",w=[Vt.replacementClass,o?"".concat(Vt.cssPrefix,"-").concat(o):""].filter(function(B){return p.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(p.classes).join(" "),E={children:[],attributes:Mt(Mt({},p.attributes),{},{"data-prefix":r,"data-icon":o,class:w,role:p.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(S)})},$=T&&!~p.classes.indexOf("fa-fw")?{width:"".concat(y/S*16*.0625,"em")}:{};g&&(E.attributes[rg]=""),u&&(E.children.push({tag:"title",attributes:{id:E.attributes["aria-labelledby"]||"title-".concat(d||PS())},children:[u]}),delete E.attributes.title);var A=Mt(Mt({},E),{},{prefix:r,iconName:o,main:t,mask:i,maskId:h,transform:a,symbol:l,styles:Mt(Mt({},$),p.styles)}),I=i.found&&t.found?Kh("generateAbstractMask",A)||{children:[],attributes:{}}:Kh("generateAbstractIcon",A)||{children:[],attributes:{}},D=I.children,R=I.attributes;return A.children=D,A.attributes=R,l?L_e(A):D_e(A)}function vz(n){var e=n.content,t=n.width,i=n.height,r=n.transform,o=n.title,a=n.extra,l=n.watchable,u=l===void 0?!1:l,h=Mt(Mt(Mt({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});u&&(h[rg]="");var d=Mt({},a.styles);M3(r)&&(d.transform=f_e({transform:r,startCentered:!0,width:t,height:i}),d["-webkit-transform"]=d.transform);var p=GA(d);p.length>0&&(h.style=p);var m=[];return m.push({tag:"span",attributes:h,children:[e]}),o&&m.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),m}function N_e(n){var e=n.content,t=n.title,i=n.extra,r=Mt(Mt(Mt({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),o=GA(i.styles);o.length>0&&(r.style=o);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),t&&a.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),a}var FM=fc.styles;function HD(n){var e=n[0],t=n[1],i=n.slice(4),r=$3(i,1),o=r[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(Vt.cssPrefix,"-").concat(xm.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Vt.cssPrefix,"-").concat(xm.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Vt.cssPrefix,"-").concat(xm.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:t,icon:a}}var B_e={found:!1,width:512,height:512};function F_e(n,e){!a7&&!Vt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function XD(n,e){var t=e;return e==="fa"&&Vt.styleDefault!==null&&(e=Nf()),new Promise(function(i,r){if(Kh("missingIconAbstract"),t==="fa"){var o=y7(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&FM[e]&&FM[e][n]){var a=FM[e][n];return i(HD(a))}F_e(n,e),i(Mt(Mt({},B_e),{},{icon:Vt.showMissingIcons&&n?Kh("missingIconAbstract")||{}:{}}))})}var yz=function(){},jD=Vt.measurePerformance&&DE&&DE.mark&&DE.measure?DE:{mark:yz,measure:yz},gb='FA "6.3.0"',U_e=function(e){return jD.mark("".concat(gb," ").concat(e," begins")),function(){return S7(e)}},S7=function(e){jD.mark("".concat(gb," ").concat(e," ends")),jD.measure("".concat(gb," ").concat(e),"".concat(gb," ").concat(e," begins"),"".concat(gb," ").concat(e," ends"))},B3={begin:U_e,end:S7},Zx=function(){};function bz(n){var e=n.getAttribute?n.getAttribute(rg):null;return typeof e=="string"}function G_e(n){var e=n.getAttribute?n.getAttribute(A3):null,t=n.getAttribute?n.getAttribute(k3):null;return e&&t}function W_e(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Vt.replacementClass)}function z_e(){if(Vt.autoReplaceSvg===!0)return qx.replace;var n=qx[Vt.autoReplaceSvg];return n||qx.replace}function Q_e(n){return ki.createElementNS("http://www.w3.org/2000/svg",n)}function V_e(n){return ki.createElement(n)}function T7(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,i=t===void 0?n.tag==="svg"?Q_e:V_e:t;if(typeof n=="string")return ki.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(a){r.setAttribute(a,n.attributes[a])});var o=n.children||[];return o.forEach(function(a){r.appendChild(T7(a,{ceFn:i}))}),r}function H_e(n){var e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var qx={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(T7(r),t)}),t.getAttribute(rg)===null&&Vt.keepOriginalSource){var i=ki.createComment(H_e(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~R3(t).indexOf(Vt.replacementClass))return qx.replace(e);var r=new RegExp("".concat(Vt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var o=i[0].attributes.class.split(" ").reduce(function(l,u){return u===Vt.replacementClass||u.match(r)?l.toSvg.push(u):l.toNode.push(u),l},{toNode:[],toSvg:[]});i[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",o.toNode.join(" "))}var a=i.map(function(l){return BT(l)}).join(`
`);t.setAttribute(rg,""),t.innerHTML=a}};function Sz(n){n()}function w7(n,e){var t=typeof e=="function"?e:Zx;if(n.length===0)t();else{var i=Sz;Vt.mutateApproach===Zge&&(i=Lf.requestAnimationFrame||Sz),i(function(){var r=z_e(),o=B3.begin("mutate");n.map(r),o(),t()})}}var F3=!1;function E7(){F3=!0}function YD(){F3=!1}var K$=null;function Tz(n){if(dz&&Vt.observeMutations){var e=n.treeCallback,t=e===void 0?Zx:e,i=n.nodeCallback,r=i===void 0?Zx:i,o=n.pseudoElementsCallback,a=o===void 0?Zx:o,l=n.observeMutationsRoot,u=l===void 0?ki:l;K$=new dz(function(h){if(!F3){var d=Nf();BO(h).forEach(function(p){if(p.type==="childList"&&p.addedNodes.length>0&&!bz(p.addedNodes[0])&&(Vt.searchPseudoElements&&a(p.target),t(p.target)),p.type==="attributes"&&p.target.parentNode&&Vt.searchPseudoElements&&a(p.target.parentNode),p.type==="attributes"&&bz(p.target)&&~i_e.indexOf(p.attributeName))if(p.attributeName==="class"&&G_e(p.target)){var m=zA(R3(p.target)),g=m.prefix,v=m.iconName;p.target.setAttribute(A3,g||d),v&&p.target.setAttribute(k3,v)}else W_e(p.target)&&r(p.target)})}}),ld&&K$.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function X_e(){K$&&K$.disconnect()}function j_e(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var o=r.split(":"),a=o[0],l=o.slice(1);return a&&l.length>0&&(i[a]=l.join(":").trim()),i},{})),t}function Y_e(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",r=zA(R3(n));return r.prefix||(r.prefix=Nf()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=x_e(r.prefix,n.innerText)||D3(r.prefix,WD(n.innerText))),!r.iconName&&Vt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function Z_e(n){var e=BO(n.attributes).reduce(function(r,o){return r.name!=="class"&&r.name!=="style"&&(r[o.name]=o.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Vt.autoA11y&&(t?e["aria-labelledby"]="".concat(Vt.replacementClass,"-title-").concat(i||PS()):(e["aria-hidden"]="true",e.focusable="false")),e}function q_e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ou,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function wz(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=Y_e(n),i=t.iconName,r=t.prefix,o=t.rest,a=Z_e(n),l=QD("parseNodeAttributes",{},n),u=e.styleParser?j_e(n):[];return Mt({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:Ou,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:u,attributes:a}},l)}var J_e=fc.styles;function x7(n){var e=Vt.autoReplaceSvg==="nest"?wz(n,{styleParser:!1}):wz(n);return~e.extra.classes.indexOf(l7)?Kh("generateLayersText",n,e):Kh("generateSvgReplacementMutation",n,e)}var Bf=new Set;I3.map(function(n){Bf.add("fa-".concat(n))});Object.keys(kS[$i]).map(Bf.add.bind(Bf));Object.keys(kS[pr]).map(Bf.add.bind(Bf));Bf=LT(Bf);function Ez(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ld)return Promise.resolve();var t=ki.documentElement.classList,i=function(p){return t.add("".concat(fz,"-").concat(p))},r=function(p){return t.remove("".concat(fz,"-").concat(p))},o=Vt.autoFetchSvg?Bf:I3.map(function(d){return"fa-".concat(d)}).concat(Object.keys(J_e));o.includes("fa")||o.push("fa");var a=[".".concat(l7,":not([").concat(rg,"])")].concat(o.map(function(d){return".".concat(d,":not([").concat(rg,"])")})).join(", ");if(a.length===0)return Promise.resolve();var l=[];try{l=BO(n.querySelectorAll(a))}catch{}if(l.length>0)i("pending"),r("complete");else return Promise.resolve();var u=B3.begin("onTree"),h=l.reduce(function(d,p){try{var m=x7(p);m&&d.push(m)}catch(g){a7||g.name==="MissingIcon"&&console.error(g)}return d},[]);return new Promise(function(d,p){Promise.all(h).then(function(m){w7(m,function(){i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),u(),d()})}).catch(function(m){u(),p(m)})})}function K_e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;x7(n).then(function(t){t&&w7([t],e)})}function e0e(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:VD(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:VD(r||{})),n(i,Mt(Mt({},t),{},{mask:r}))}}var t0e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transform,r=i===void 0?Ou:i,o=t.symbol,a=o===void 0?!1:o,l=t.mask,u=l===void 0?null:l,h=t.maskId,d=h===void 0?null:h,p=t.title,m=p===void 0?null:p,g=t.titleId,v=g===void 0?null:g,y=t.classes,S=y===void 0?[]:y,T=t.attributes,w=T===void 0?{}:T,E=t.styles,$=E===void 0?{}:E;if(e){var A=e.prefix,I=e.iconName,D=e.icon;return QA(Mt({type:"icon"},e),function(){return sg("beforeDOMElementCreation",{iconDefinition:e,params:t}),Vt.autoA11y&&(m?w["aria-labelledby"]="".concat(Vt.replacementClass,"-title-").concat(v||PS()):(w["aria-hidden"]="true",w.focusable="false")),N3({icons:{main:HD(D),mask:u?HD(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:A,iconName:I,transform:Mt(Mt({},Ou),r),symbol:a,title:m,maskId:d,titleId:v,extra:{attributes:w,styles:$,classes:S}})})}},n0e={mixout:function(){return{icon:e0e(t0e)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=Ez,t.nodeCallback=K_e,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,r=i===void 0?ki:i,o=t.callback,a=o===void 0?function(){}:o;return Ez(r,a)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,o=i.title,a=i.titleId,l=i.prefix,u=i.transform,h=i.symbol,d=i.mask,p=i.maskId,m=i.extra;return new Promise(function(g,v){Promise.all([XD(r,l),d.iconName?XD(d.iconName,d.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var S=$3(y,2),T=S[0],w=S[1];g([t,N3({icons:{main:T,mask:w},prefix:l,iconName:r,transform:u,symbol:h,maskId:p,title:o,titleId:a,extra:m,watchable:!0})])}).catch(v)})},e.generateAbstractIcon=function(t){var i=t.children,r=t.attributes,o=t.main,a=t.transform,l=t.styles,u=GA(l);u.length>0&&(r.style=u);var h;return M3(a)&&(h=Kh("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),i.push(h||o.icon),{children:i,attributes:r}}}},i0e={mixout:function(){return{layer:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.classes,o=r===void 0?[]:r;return QA({type:"layer"},function(){sg("beforeDOMElementCreation",{assembler:t,params:i});var a=[];return t(function(l){Array.isArray(l)?l.map(function(u){a=a.concat(u.abstract)}):a=a.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(Vt.cssPrefix,"-layers")].concat(LT(o)).join(" ")},children:a}]})}}}},r0e={mixout:function(){return{counter:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.title,o=r===void 0?null:r,a=i.classes,l=a===void 0?[]:a,u=i.attributes,h=u===void 0?{}:u,d=i.styles,p=d===void 0?{}:d;return QA({type:"counter",content:t},function(){return sg("beforeDOMElementCreation",{content:t,params:i}),N_e({content:t.toString(),title:o,extra:{attributes:h,styles:p,classes:["".concat(Vt.cssPrefix,"-layers-counter")].concat(LT(l))}})})}}}},s0e={mixout:function(){return{text:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.transform,o=r===void 0?Ou:r,a=i.title,l=a===void 0?null:a,u=i.classes,h=u===void 0?[]:u,d=i.attributes,p=d===void 0?{}:d,m=i.styles,g=m===void 0?{}:m;return QA({type:"text",content:t},function(){return sg("beforeDOMElementCreation",{content:t,params:i}),vz({content:t,transform:Mt(Mt({},Ou),o),title:l,extra:{attributes:p,styles:g,classes:["".concat(Vt.cssPrefix,"-layers-text")].concat(LT(h))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,o=i.transform,a=i.extra,l=null,u=null;if(r7){var h=parseInt(getComputedStyle(t).fontSize,10),d=t.getBoundingClientRect();l=d.width/h,u=d.height/h}return Vt.autoA11y&&!r&&(a.attributes["aria-hidden"]="true"),Promise.resolve([t,vz({content:t.innerHTML,width:l,height:u,transform:o,title:r,extra:a,watchable:!0})])}}},o0e=new RegExp('"',"ug"),xz=[1105920,1112319];function a0e(n){var e=n.replace(o0e,""),t=y_e(e,0),i=t>=xz[0]&&t<=xz[1],r=e.length===2?e[0]===e[1]:!1;return{value:WD(r?e[0]:e),isSecondary:i||r}}function $z(n,e){var t="".concat(Yge).concat(e.replace(":","-"));return new Promise(function(i,r){if(n.getAttribute(t)!==null)return i();var o=BO(n.children),a=o.filter(function(D){return D.getAttribute(GD)===e})[0],l=Lf.getComputedStyle(n,e),u=l.getPropertyValue("font-family").match(e_e),h=l.getPropertyValue("font-weight"),d=l.getPropertyValue("content");if(a&&!u)return n.removeChild(a),i();if(u&&d!=="none"&&d!==""){var p=l.getPropertyValue("content"),m=~["Sharp"].indexOf(u[2])?pr:$i,g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?IS[m][u[2].toLowerCase()]:t_e[m][h],v=a0e(p),y=v.value,S=v.isSecondary,T=u[0].startsWith("FontAwesome"),w=D3(g,y),E=w;if(T){var $=$_e(y);$.iconName&&$.prefix&&(w=$.iconName,g=$.prefix)}if(w&&!S&&(!a||a.getAttribute(A3)!==g||a.getAttribute(k3)!==E)){n.setAttribute(t,E),a&&n.removeChild(a);var A=q_e(),I=A.extra;I.attributes[GD]=e,XD(w,g).then(function(D){var R=N3(Mt(Mt({},A),{},{icons:{main:D,mask:L3()},prefix:g,iconName:E,extra:I,watchable:!0})),B=ki.createElement("svg");e==="::before"?n.insertBefore(B,n.firstChild):n.appendChild(B),B.outerHTML=R.map(function(G){return BT(G)}).join(`
`),n.removeAttribute(t),i()}).catch(r)}else i()}else i()})}function l0e(n){return Promise.all([$z(n,"::before"),$z(n,"::after")])}function c0e(n){return n.parentNode!==document.head&&!~qge.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(GD)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function Cz(n){if(ld)return new Promise(function(e,t){var i=BO(n.querySelectorAll("*")).filter(c0e).map(l0e),r=B3.begin("searchPseudoElements");E7(),Promise.all(i).then(function(){r(),YD(),e()}).catch(function(){r(),YD(),t()})})}var u0e={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=Cz,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node,r=i===void 0?ki:i;Vt.searchPseudoElements&&Cz(r)}}},Az=!1,h0e={mixout:function(){return{dom:{unwatch:function(){E7(),Az=!0}}}},hooks:function(){return{bootstrap:function(){Tz(QD("mutationObserverCallbacks",{}))},noAuto:function(){X_e()},watch:function(t){var i=t.observeMutationsRoot;Az?YD():Tz(QD("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},kz=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,r){var o=r.toLowerCase().split("-"),a=o[0],l=o.slice(1).join("-");if(a&&l==="h")return i.flipX=!0,i;if(a&&l==="v")return i.flipY=!0,i;if(l=parseFloat(l),isNaN(l))return i;switch(a){case"grow":i.size=i.size+l;break;case"shrink":i.size=i.size-l;break;case"left":i.x=i.x-l;break;case"right":i.x=i.x+l;break;case"up":i.y=i.y-l;break;case"down":i.y=i.y+l;break;case"rotate":i.rotate=i.rotate+l;break}return i},t)},d0e={mixout:function(){return{parse:{transform:function(t){return kz(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=kz(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.containerWidth,a=t.iconWidth,l={transform:"translate(".concat(o/2," 256)")},u="translate(".concat(r.x*32,", ").concat(r.y*32,") "),h="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),d="rotate(".concat(r.rotate," 0 0)"),p={transform:"".concat(u," ").concat(h," ").concat(d)},m={transform:"translate(".concat(a/2*-1," -256)")},g={outer:l,inner:p,path:m};return{tag:"g",attributes:Mt({},g.outer),children:[{tag:"g",attributes:Mt({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Mt(Mt({},i.icon.attributes),g.path)}]}]}}}},UM={x:0,y:0,width:"100%",height:"100%"};function Iz(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function f0e(n){return n.tag==="g"?n.children:[n]}var p0e={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),o=r?zA(r.split(" ").map(function(a){return a.trim()})):L3();return o.prefix||(o.prefix=Nf()),t.mask=o,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,o=t.main,a=t.mask,l=t.maskId,u=t.transform,h=o.width,d=o.icon,p=a.width,m=a.icon,g=d_e({transform:u,containerWidth:p,iconWidth:h}),v={tag:"rect",attributes:Mt(Mt({},UM),{},{fill:"white"})},y=d.children?{children:d.children.map(Iz)}:{},S={tag:"g",attributes:Mt({},g.inner),children:[Iz(Mt({tag:d.tag,attributes:Mt(Mt({},d.attributes),g.path)},y))]},T={tag:"g",attributes:Mt({},g.outer),children:[S]},w="mask-".concat(l||PS()),E="clip-".concat(l||PS()),$={tag:"mask",attributes:Mt(Mt({},UM),{},{id:w,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,T]},A={tag:"defs",children:[{tag:"clipPath",attributes:{id:E},children:f0e(m)},$]};return i.push(A,{tag:"rect",attributes:Mt({fill:"currentColor","clip-path":"url(#".concat(E,")"),mask:"url(#".concat(w,")")},UM)}),{children:i,attributes:r}}}},m0e={provides:function(e){var t=!1;Lf.matchMedia&&(t=Lf.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Mt(Mt({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=Mt(Mt({},o),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Mt(Mt({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||l.children.push({tag:"animate",attributes:Mt(Mt({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Mt(Mt({},a),{},{values:"1;0;1;1;0;1;"})}),i.push(l),i.push({tag:"path",attributes:Mt(Mt({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Mt(Mt({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:Mt(Mt({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Mt(Mt({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},g0e={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol"),o=r===null?!1:r===""?!0:r;return t.symbol=o,t}}}},_0e=[m_e,n0e,i0e,r0e,s0e,u0e,h0e,d0e,p0e,m0e,g0e];k_e(_0e,{mixoutsTo:qa});qa.noAuto;qa.config;qa.library;qa.dom;var ZD=qa.parse;qa.findIconDefinition;qa.toHtml;var O0e=qa.icon;qa.layer;qa.text;qa.counter;function Rz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(t),!0).forEach(function(i){E0(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rz(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function eC(n){"@babel/helpers - typeof";return eC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eC(n)}function E0(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v0e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function y0e(n,e){if(n==null)return{};var t=v0e(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function qD(n){return b0e(n)||S0e(n)||T0e(n)||w0e()}function b0e(n){if(Array.isArray(n))return JD(n)}function S0e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function T0e(n,e){if(n){if(typeof n=="string")return JD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JD(n,e)}}function JD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function w0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E0e(n){var e,t=n.beat,i=n.fade,r=n.beatFade,o=n.bounce,a=n.shake,l=n.flash,u=n.spin,h=n.spinPulse,d=n.spinReverse,p=n.pulse,m=n.fixedWidth,g=n.inverse,v=n.border,y=n.listItem,S=n.flip,T=n.size,w=n.rotation,E=n.pull,$=(e={"fa-beat":t,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":o,"fa-shake":a,"fa-flash":l,"fa-spin":u,"fa-spin-reverse":d,"fa-spin-pulse":h,"fa-pulse":p,"fa-fw":m,"fa-inverse":g,"fa-border":v,"fa-li":y,"fa-flip":S===!0,"fa-flip-horizontal":S==="horizontal"||S==="both","fa-flip-vertical":S==="vertical"||S==="both"},E0(e,"fa-".concat(T),typeof T<"u"&&T!==null),E0(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),E0(e,"fa-pull-".concat(E),typeof E<"u"&&E!==null),E0(e,"fa-swap-opacity",n.swapOpacity),e);return Object.keys($).map(function(A){return $[A]?A:null}).filter(function(A){return A})}function x0e(n){return n=n-0,n===n}function $7(n){return x0e(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var $0e=["style"];function C0e(n){return n.charAt(0).toUpperCase()+n.slice(1)}function A0e(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.indexOf(":"),r=$7(t.slice(0,i)),o=t.slice(i+1).trim();return r.startsWith("webkit")?e[C0e(r)]=o:e[r]=o,e},{})}function C7(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(u){return C7(n,u)}),r=Object.keys(e.attributes||{}).reduce(function(u,h){var d=e.attributes[h];switch(h){case"class":u.attrs.className=d,delete e.attributes.class;break;case"style":u.attrs.style=A0e(d);break;default:h.indexOf("aria-")===0||h.indexOf("data-")===0?u.attrs[h.toLowerCase()]=d:u.attrs[$7(h)]=d}return u},{attrs:{}}),o=t.style,a=o===void 0?{}:o,l=y0e(t,$0e);return r.attrs.style=lf(lf({},r.attrs.style),a),n.apply(void 0,[e.tag,lf(lf({},r.attrs),l)].concat(qD(i)))}var A7=!1;try{A7=!0}catch{}function k0e(){if(!A7&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function Mz(n){if(n&&eC(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(ZD.icon)return ZD.icon(n);if(n===null)return null;if(n&&eC(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function GM(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?E0({},n,e):{}}var Al=Cn.forwardRef(function(n,e){var t=n.icon,i=n.mask,r=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,h=Mz(t),d=GM("classes",[].concat(qD(E0e(n)),qD(o.split(" ")))),p=GM("transform",typeof n.transform=="string"?ZD.transform(n.transform):n.transform),m=GM("mask",Mz(i)),g=O0e(h,lf(lf(lf(lf({},d),p),m),{},{symbol:r,title:a,titleId:l,maskId:u}));if(!g)return k0e("Could not find icon",h),null;var v=g.abstract,y={ref:e};return Object.keys(n).forEach(function(S){Al.defaultProps.hasOwnProperty(S)||(y[S]=n[S])}),I0e(v[0],y)});Al.displayName="FontAwesomeIcon";Al.propTypes={beat:$t.bool,border:$t.bool,beatFade:$t.bool,bounce:$t.bool,className:$t.string,fade:$t.bool,flash:$t.bool,mask:$t.oneOfType([$t.object,$t.array,$t.string]),maskId:$t.string,fixedWidth:$t.bool,inverse:$t.bool,flip:$t.oneOf([!0,!1,"horizontal","vertical","both"]),icon:$t.oneOfType([$t.object,$t.array,$t.string]),listItem:$t.bool,pull:$t.oneOf(["right","left"]),pulse:$t.bool,rotation:$t.oneOf([0,90,180,270]),shake:$t.bool,size:$t.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:$t.bool,spinPulse:$t.bool,spinReverse:$t.bool,symbol:$t.oneOfType([$t.bool,$t.string]),title:$t.string,titleId:$t.string,transform:$t.oneOfType([$t.string,$t.object]),swapOpacity:$t.bool};Al.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var I0e=C7.bind(null,Cn.createElement),k7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=typeof o;if(a==="string"||a==="number")i.push(o);else if(Array.isArray(o)){if(o.length){var l=t.apply(null,o);l&&i.push(l)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){i.push(o.toString());continue}for(var u in o)e.call(o,u)&&o[u]&&i.push(u)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(k7);var R0e=k7.exports;const ht=Mu(R0e);var I7={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pz=Cn.createContext&&Cn.createContext(I7),wf=globalThis&&globalThis.__assign||function(){return wf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},wf.apply(this,arguments)},M0e=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function R7(n){return n&&n.map(function(e,t){return Cn.createElement(e.tag,wf({key:t},e.attr),R7(e.child))})}function cd(n){return function(e){return Cn.createElement(P0e,wf({attr:wf({},n.attr)},e),R7(n.child))}}function P0e(n){var e=function(t){var i=n.attr,r=n.size,o=n.title,a=M0e(n,["attr","size","title"]),l=r||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),Cn.createElement("svg",wf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:u,style:wf(wf({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&Cn.createElement("title",null,o),n.children)};return Pz!==void 0?Cn.createElement(Pz.Consumer,null,function(t){return e(t)}):e(I7)}function M7(n){return cd({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(n)}function D0e(n){return cd({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(n)}function L0e(n){return cd({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(n)}function P7(n){return cd({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}}]})(n)}function N0e(n){return cd({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(n)}function D7(n){return cd({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(n)}function B0e(n){return cd({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"}}]})(n)}function F0e(n){return cd({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}}]})(n)}function om(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function KD(n){if(!om(n))return n;const e={...n};return Object.keys(n).forEach(t=>{e[t]=KD(n[t])}),e}function Gr(n,e){if(om(e)&&Object.keys(e).length===0)return KD({...n,...e});let t={...n,...e};return om(e)&&om(n)&&Object.keys(e).forEach(i=>{om(e[i])&&i in n&&om(n[i])?t[i]=Gr(n[i],e[i]):t[i]=om(e[i])?KD(e[i]):e[i]}),t}const U0e={accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{root:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",wrapper:"flex items-center",color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg"},closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300"}}},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"}},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center w-10 h-10 bg-gray-100 dark:bg-gray-600"}},avatarGroupCounter:{root:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},avatarGroup:{root:{base:"flex -space-x-4"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400"},disabled:"cursor-not-allowed opacity-50",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"!block bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{base:"relative h-full w-full",indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none",scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},darkThemeToggle:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"},dropdown:{floating:{target:"w-fit",base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",content:"py-1 text-sm text-gray-700 dark:text-gray-200",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},divider:"my-1 h-px bg-gray-100 dark:bg-gray-600"},arrowIcon:"ml-2 h-4 w-4",inlineWrapper:"flex items-center",content:"py-1"},footer:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800",groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},fileInput:{base:"flex",field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},label:{base:"text-sm font-medium",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"},disabled:"opacity-50"},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{base:"flex",field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},helperText:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}},listGroup:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",item:{active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},base:"flex w-full cursor-pointer border-b border-gray-200 py-2 px-4 first:rounded-t-lg last:rounded-b-lg last:border-b-0 dark:border-gray-600",href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}},modal:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},rating:{base:"flex items-center",star:{sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"},filled:"text-yellow-400",empty:"text-gray-300 dark:text-gray-500"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},sidebar:{base:"h-full",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800",collapsed:{on:"w-16",off:"w-64"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"flex items-center justify-center rounded-full text-center font-medium leading-none text-blue-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},toast:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden",toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"}},table:{wrapper:"relative overflow-x-auto shadow-md sm:rounded-lg",base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",head:{base:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",cell:{base:"px-6 py-3"}},row:{hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"},cell:{base:"px-6 py-4"}},timeline:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"},item:{base:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},point:{base:{horizontal:"flex items-center",vertical:""},marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900",base:"h-3 w-3 text-blue-600 dark:text-blue-300"}},line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex"},content:{base:"mt-3 sm:pr-8",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white",body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"}}}},G0e=q.createContext({theme:U0e});function kt(){return q.useContext(G0e)}const L7=q.createContext(void 0);function N7(){const n=q.useContext(L7);if(!n)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return n}const B7=({children:n,className:e,theme:t={},...i})=>{const{isOpen:r}=N7(),o=Gr(kt().theme.accordion.content,t);return se("div",{className:ht(o.base,e),"data-testid":"flowbite-accordion-content",hidden:!r,...i,children:n})},F7=({children:n,...e})=>{const{alwaysOpen:t}=e,[i,r]=q.useState(e.isOpen),o=t?{...e,isOpen:i,setOpen:()=>r(!i)}:e;return se(L7.Provider,{value:o,children:n})},U7=({as:n="h2",children:e,className:t,theme:i={},...r})=>{const{arrowIcon:o,flush:a,isOpen:l,setOpen:u}=N7(),h=()=>typeof u<"u"&&u(),d=Gr(kt().theme.accordion.title,i);return dt("button",{className:ht(d.base,d.flush[a?"on":"off"],d.open[l?"on":"off"],t),onClick:h,type:"button",...r,children:[se(n,{className:d.heading,"data-testid":"flowbite-accordion-heading",children:e}),o&&se(o,{"aria-hidden":!0,className:ht(d.arrow.base,d.arrow.open[l?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},G7=({alwaysOpen:n=!1,arrowIcon:e=M7,children:t,flush:i=!1,collapseAll:r=!1,className:o,theme:a={},...l})=>{const[u,h]=q.useState(r?-1:0),d=q.useMemo(()=>q.Children.map(t,(m,g)=>q.cloneElement(m,{alwaysOpen:n,arrowIcon:e,flush:i,isOpen:u===g,setOpen:()=>h(g)})),[n,e,t,i,u]),p=Gr(kt().theme.accordion.root,a);return se("div",{className:ht(p.base,p.flush[i?"on":"off"],o),"data-testid":"flowbite-accordion",...l,children:d})};G7.displayName="Accordion";F7.displayName="Accordion.Panel";U7.displayName="Accordion.Title";B7.displayName="Accordion.Content";Object.assign(G7,{Panel:F7,Title:U7,Content:B7});const W7=({children:n,className:e,theme:t={},...i})=>{const r=Gr(kt().theme.avatarGroup.root,t);return se("div",{"data-testid":"avatar-group-element",className:ht(r.base,e),...i,children:n})};W7.displayName="Avatar.Group";const z7=({total:n,href:e,className:t,theme:i={}})=>{const r=Gr(kt().theme.avatarGroupCounter.root,i);return dt("a",{className:ht(r.base,t),href:e,children:["+",n]})};z7.displayName="Avatar.GroupCounter";const Q7=({alt:n="",bordered:e=!1,children:t,img:i,color:r="light",rounded:o=!1,size:a="md",stacked:l=!1,status:u,statusPosition:h="top-left",placeholderInitials:d="",className:p,theme:m={},...g})=>{const v=Gr(kt().theme.avatar,m),y=ht(e&&v.root.bordered,e&&v.root.color[r],o&&v.root.rounded,l&&v.root.stacked,v.img.on,v.root.size[a]),S={alt:n,className:ht(y,v.img.on),"data-testid":"flowbite-avatar-img"};return dt("div",{className:ht(v.root.base,p),"data-testid":"flowbite-avatar",...g,children:[dt("div",{className:"relative",children:[i?typeof i=="string"?se("img",{...S,src:i}):i(S):d?se("div",{className:ht(v.img.off,v.initials.base,o&&v.root.rounded,l&&v.root.stacked,e&&v.root.bordered,e&&v.root.color[r]),"data-testid":"flowbite-avatar-initials-placeholder",children:se("span",{className:ht(v.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:d})}):se("div",{className:ht(y,v.img.off),"data-testid":"flowbite-avatar-img",children:se("svg",{className:v.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:se("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),u&&se("span",{"data-testid":"flowbite-avatar-status",className:ht(v.status.base,v.status[u],v.root.statusPosition[h])})]}),t&&se("div",{children:t})]})};Q7.displayName="Avatar";Object.assign(Q7,{Group:W7,Counter:z7});const V7=({children:n,color:e="info",href:t,icon:i,size:r="xs",className:o,theme:a={},...l})=>{const u=Gr(kt().theme.badge,a),h=()=>dt("span",{className:ht(u.root.base,u.root.color[e],u.icon[i?"on":"off"],u.root.size[r],o),"data-testid":"flowbite-badge",...l,children:[i&&se(i,{"aria-hidden":!0,className:u.icon.size[r],"data-testid":"flowbite-badge-icon"}),n&&se("span",{children:n})]});return t?se("a",{className:u.root.href,href:t,children:se(h,{})}):se(h,{})},H7=q.forwardRef(({children:n,className:e,href:t,icon:i,theme:r={},...o},a)=>{const l=typeof t<"u",u=l?"a":"span",h=Gr(kt().theme.breadcrumb.item,r);return dt("li",{className:ht(h.base,e),...o,children:[se(D7,{"aria-hidden":!0,className:h.chevron,"data-testid":"flowbite-breadcrumb-separator"}),dt(u,{ref:a,className:h.href[l?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:t,children:[i&&se(i,{"aria-hidden":!0,className:h.icon}),n]})]})});H7.displayName="Breadcrumb.Item";const X7=({children:n,className:e,theme:t={},...i})=>{const r=Gr(kt().theme.breadcrumb.root,t);return se("nav",{"aria-label":"Breadcrumb",className:ht(r.base,e),...i,children:se("ol",{className:r.list,children:n})})};X7.displayName="Breadcrumb";Object.assign(X7,{Item:H7});const j7=({children:n,outline:e,pill:t,className:i,...r})=>{const o=q.useMemo(()=>q.Children.map(n,(l,u)=>q.cloneElement(l,{outline:e,pill:t,positionInGroup:u===0?"start":u===n.length-1?"end":"middle"})),[n,e,t]),a=kt().theme.buttonGroup;return se("div",{className:ht(a.base,i),role:"group",...r,children:o})};j7.displayName="Button.Group";const Y7=q.forwardRef(({children:n,color:e="info",disabled:t=!1,gradientDuoTone:i,gradientMonochrome:r,href:o,label:a,outline:l=!1,pill:u=!1,fullSized:h,positionInGroup:d="none",size:p="md",className:m,...g},v)=>{const y=typeof o<"u",{buttonGroup:S,button:T}=kt().theme,w=y?"a":"button",E=g;return se(w,{className:ht(t&&T.disabled,!i&&!r&&T.color[e],i&&!r&&T.gradientDuoTone[i],!i&&r&&T.gradient[r],S.position[d],l&&(T.outline.color[e]??T.outline.color.default),T.base,T.pill[u?"on":"off"],h&&T.fullSized,m),disabled:t,href:o,type:y?void 0:"button",ref:v,...E,children:se("span",{className:ht(T.inner.base,T.inner.position[d],T.outline[l?"on":"off"],T.outline.pill[l&&u?"on":"off"],T.size[p],l&&!T.outline.color[e]&&T.inner.outline),children:dt(Fr,{children:[typeof n<"u"&&n,typeof a<"u"&&se("span",{className:T.label,"data-testid":"flowbite-button-label",children:a})]})})})});Y7.displayName="Button";const Mo=Object.assign(Y7,{Group:j7});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z7=function(n,e){return(Z7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])})(n,e)},W0e,QE,z0e=(function(n){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var e={}.hasOwnProperty;function t(){for(var i=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=typeof o;if(a==="string"||a==="number")i.push(o);else if(Array.isArray(o)&&o.length){var l=t.apply(null,o);l&&i.push(l)}else if(a==="object")for(var u in o)e.call(o,u)&&o[u]&&i.push(u)}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(QE={path:W0e,exports:{},require:function(n,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(e==null&&QE.path)}},QE.exports),QE.exports);function eL(n,e,t){var i,r,o,a,l;function u(){var d=Date.now()-a;d<e&&d>=0?i=setTimeout(u,e-d):(i=null,t||(l=n.apply(o,r),o=r=null))}e==null&&(e=100);var h=function(){o=this,r=arguments,a=Date.now();var d=t&&!i;return i||(i=setTimeout(u,e)),d&&(l=n.apply(o,r),o=r=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=n.apply(o,r),o=r=null,clearTimeout(i),i=null)},h}eL.debounce=eL;var Q0e=eL;(function(n,e){e===void 0&&(e={});var t=e.insertAt;if(n&&typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var WM,V0e=(WM="indiana-scroll-container",function(n,e){if(!n)return WM;var t;typeof n=="string"?t=n:e=n;var i=WM;return t&&(i+="__"+t),i+(e?Object.keys(e).reduce(function(r,o){var a=e[o];return a&&(r+=" "+(typeof a=="boolean"?i+"--"+o:i+"--"+o+"_"+a)),r},""):"")});(function(n){function e(t){var i=n.call(this,t)||this;return i.onEndScroll=function(){i.scrolling=!1,!i.pressed&&i.started&&i.processEnd()},i.onScroll=function(r){var o=i.container.current;o.scrollLeft===i.scrollLeft&&o.scrollTop===i.scrollTop||(i.scrolling=!0,i.processScroll(r),i.onEndScroll())},i.onTouchStart=function(r){var o=i.props.nativeMobileScroll;if(i.isDraggable(r.target))if(i.internal=!0,o&&i.scrolling)i.pressed=!0;else{var a=r.touches[0];i.processClick(r,a.clientX,a.clientY),!o&&i.props.stopPropagation&&r.stopPropagation()}},i.onTouchEnd=function(r){var o=i.props.nativeMobileScroll;i.pressed&&(!i.started||i.scrolling&&o?i.pressed=!1:i.processEnd(),i.forceUpdate())},i.onTouchMove=function(r){var o=i.props.nativeMobileScroll;if(i.pressed&&(!o||!i.isMobile)){var a=r.touches[0];a&&i.processMove(r,a.clientX,a.clientY),r.preventDefault(),i.props.stopPropagation&&r.stopPropagation()}},i.onMouseDown=function(r){i.isDraggable(r.target)&&i.isScrollable()&&(i.internal=!0,i.props.buttons.indexOf(r.button)!==-1&&(i.processClick(r,r.clientX,r.clientY),r.preventDefault(),i.props.stopPropagation&&r.stopPropagation()))},i.onMouseMove=function(r){i.pressed&&(i.processMove(r,r.clientX,r.clientY),r.preventDefault(),i.props.stopPropagation&&r.stopPropagation())},i.onMouseUp=function(r){i.pressed&&(i.started?i.processEnd():(i.internal=!1,i.pressed=!1,i.forceUpdate(),i.props.onClick&&i.props.onClick(r)),r.preventDefault(),i.props.stopPropagation&&r.stopPropagation())},i.container=Cn.createRef(),i.onEndScroll=Q0e(i.onEndScroll,300),i.scrolling=!1,i.started=!1,i.pressed=!1,i.internal=!1,i.getRef=i.getRef.bind(i),i}return function(t,i){function r(){this.constructor=t}Z7(t,i),t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}(e,n),e.prototype.componentDidMount=function(){var t=this.props.nativeMobileScroll,i=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),i.addEventListener("touchstart",this.onTouchStart,{passive:!1}),i.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},e.prototype.getElement=function(){return this.container.current},e.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},e.prototype.isDraggable=function(t){var i=this.props.ignoreElements;if(i){var r=t.closest(i);return r===null||r.contains(this.getElement())}return!0},e.prototype.isScrollable=function(){var t=this.container.current;return t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)},e.prototype.processClick=function(t,i,r){var o=this.container.current;this.scrollLeft=o.scrollLeft,this.scrollTop=o.scrollTop,this.clientX=i,this.clientY=r,this.pressed=!0},e.prototype.processStart=function(t){t===void 0&&(t=!0);var i=this.props.onStartScroll;this.started=!0,t&&document.body.classList.add("indiana-dragging"),i&&i({external:!this.internal}),this.forceUpdate()},e.prototype.processScroll=function(t){if(this.started){var i=this.props.onScroll;i&&i({external:!this.internal})}else this.processStart(!1)},e.prototype.processMove=function(t,i,r){var o=this.props,a=o.horizontal,l=o.vertical,u=o.activationDistance,h=o.onScroll,d=this.container.current;this.started?(a&&(d.scrollLeft-=i-this.clientX),l&&(d.scrollTop-=r-this.clientY),h&&h({external:!this.internal}),this.clientX=i,this.clientY=r,this.scrollLeft=d.scrollLeft,this.scrollTop=d.scrollTop):(a&&Math.abs(i-this.clientX)>u||l&&Math.abs(r-this.clientY)>u)&&(this.clientX=i,this.clientY=r,this.processStart())},e.prototype.processEnd=function(){var t=this.props.onEndScroll;this.container.current&&t&&t({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},e.prototype.getRef=function(t){[this.container,this.props.innerRef].forEach(function(i){i&&(typeof i=="function"?i(t):i.current=t)})},e.prototype.render=function(){var t=this.props,i=t.children,r=t.draggingClassName,o=t.className,a=t.style,l=t.hideScrollbars,u=t.component;return Cn.createElement(u,{className:z0e(o,this.pressed&&r,V0e({dragging:this.pressed,"hide-scrollbars":l,"native-scroll":this.isMobile})),style:a,ref:this.getRef,onScroll:this.onScroll},i)},e.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},e})(q.PureComponent);const H0e=q.forwardRef(({theme:n={},className:e,...t},i)=>{const r=Gr(kt().theme.checkbox,n);return se("input",{ref:i,className:ht(r.root.base,e),type:"checkbox",...t})});H0e.displayName="Checkbox";function X0e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}function pu(n){return n.split("-")[1]}function U3(n){return n==="y"?"height":"width"}function Wh(n){return n.split("-")[0]}function FT(n){return["top","bottom"].includes(Wh(n))?"x":"y"}function Dz(n,e,t){let{reference:i,floating:r}=n;const o=i.x+i.width/2-r.width/2,a=i.y+i.height/2-r.height/2,l=FT(e),u=U3(l),h=i[u]/2-r[u]/2,d=l==="x";let p;switch(Wh(e)){case"top":p={x:o,y:i.y-r.height};break;case"bottom":p={x:o,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:a};break;case"left":p={x:i.x-r.width,y:a};break;default:p={x:i.x,y:i.y}}switch(pu(e)){case"start":p[l]-=h*(t&&d?-1:1);break;case"end":p[l]+=h*(t&&d?-1:1)}return p}const j0e=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:a}=t,l=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:d,y:p}=Dz(h,i,u),m=i,g={},v=0;for(let y=0;y<l.length;y++){const{name:S,fn:T}=l[y],{x:w,y:E,data:$,reset:A}=await T({x:d,y:p,initialPlacement:i,placement:m,strategy:r,middlewareData:g,rects:h,platform:a,elements:{reference:n,floating:e}});d=w??d,p=E??p,g={...g,[S]:{...g[S],...$}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(h=A.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):A.rects),{x:d,y:p}=Dz(h,m,u)),y=-1)}return{x:d,y:p,placement:m,strategy:r,middlewareData:g}};function q7(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function tL(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function G3(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:o,rects:a,elements:l,strategy:u}=n,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=e,v=q7(g),y=l[m?p==="floating"?"reference":"floating":p],S=tL(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(y)))==null||t?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:d,strategy:u})),T=p==="floating"?{...a.floating,x:i,y:r}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(w))&&await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1},$=tL(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:T,offsetParent:w,strategy:u}):T);return{top:(S.top-$.top+v.top)/E.y,bottom:($.bottom-S.bottom+v.bottom)/E.y,left:(S.left-$.left+v.left)/E.x,right:($.right-S.right+v.right)/E.x}}const Y0e=Math.min,Z0e=Math.max;function nL(n,e,t){return Z0e(n,Y0e(e,t))}const Lz=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n||{},{x:r,y:o,placement:a,rects:l,platform:u}=e;if(t==null)return{};const h=q7(i),d={x:r,y:o},p=FT(a),m=U3(p),g=await u.getDimensions(t),v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",S=l.reference[m]+l.reference[p]-d[p]-l.floating[m],T=d[p]-l.reference[p],w=await(u.getOffsetParent==null?void 0:u.getOffsetParent(t));let E=w?p==="y"?w.clientHeight||0:w.clientWidth||0:0;E===0&&(E=l.floating[m]);const $=S/2-T/2,A=h[v],I=E-g[m]-h[y],D=E/2-g[m]/2+$,R=nL(A,D,I),B=pu(a)!=null&&D!=R&&l.reference[m]/2-(D<A?h[v]:h[y])-g[m]/2<0;return{[p]:d[p]-(B?D<A?A-D:I-D:0),data:{[p]:R,centerOffset:D-R}}}}),q0e=["top","right","bottom","left"],Nz=q0e.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]),J0e={left:"right",right:"left",bottom:"top",top:"bottom"};function tC(n){return n.replace(/left|right|bottom|top/g,e=>J0e[e])}function J7(n,e,t){t===void 0&&(t=!1);const i=pu(n),r=FT(n),o=U3(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=tC(a)),{main:a,cross:tC(a)}}const K0e={start:"end",end:"start"};function Jx(n){return n.replace(/start|end/g,e=>K0e[e])}const eOe=function(n){return n===void 0&&(n={}),{name:"autoPlacement",options:n,async fn(e){var t,i,r;const{rects:o,middlewareData:a,placement:l,platform:u,elements:h}=e,{crossAxis:d=!1,alignment:p,allowedPlacements:m=Nz,autoAlignment:g=!0,...v}=n,y=p!==void 0||m===Nz?function(G,Z,N){return(G?[...N.filter(H=>pu(H)===G),...N.filter(H=>pu(H)!==G)]:N.filter(H=>Wh(H)===H)).filter(H=>!G||pu(H)===G||!!Z&&Jx(H)!==H)}(p||null,g,m):m,S=await G3(e,v),T=((t=a.autoPlacement)==null?void 0:t.index)||0,w=y[T];if(w==null)return{};const{main:E,cross:$}=J7(w,o,await(u.isRTL==null?void 0:u.isRTL(h.floating)));if(l!==w)return{reset:{placement:y[0]}};const A=[S[Wh(w)],S[E],S[$]],I=[...((i=a.autoPlacement)==null?void 0:i.overflows)||[],{placement:w,overflows:A}],D=y[T+1];if(D)return{data:{index:T+1,overflows:I},reset:{placement:D}};const R=I.map(G=>{const Z=pu(G.placement);return[G.placement,Z&&d?G.overflows.slice(0,2).reduce((N,H)=>N+H,0):G.overflows[0],G.overflows]}).sort((G,Z)=>G[1]-Z[1]),B=((r=R.filter(G=>G[2].slice(0,pu(G[0])?2:3).every(Z=>Z<=0))[0])==null?void 0:r[0])||R[0][0];return B!==l?{data:{index:T+1,overflows:I},reset:{placement:B}}:{}}}},tOe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=n,S=Wh(i),T=Wh(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=p||(T||!v?[tC(a)]:function(Z){const N=tC(Z);return[Jx(Z),N,Jx(N)]}(a));p||g==="none"||E.push(...function(Z,N,H,M){const K=pu(Z);let re=function(ce,X,Q){const ee=["left","right"],z=["right","left"],L=["top","bottom"],le=["bottom","top"];switch(ce){case"top":case"bottom":return Q?X?z:ee:X?ee:z;case"left":case"right":return X?L:le;default:return[]}}(Wh(Z),H==="start",M);return K&&(re=re.map(ce=>ce+"-"+K),N&&(re=re.concat(re.map(Jx)))),re}(a,v,g,w));const $=[a,...E],A=await G3(e,y),I=[];let D=((t=r.flip)==null?void 0:t.overflows)||[];if(h&&I.push(A[S]),d){const{main:Z,cross:N}=J7(i,o,w);I.push(A[Z],A[N])}if(D=[...D,{placement:i,overflows:I}],!I.every(Z=>Z<=0)){var R,B;const Z=(((R=r.flip)==null?void 0:R.index)||0)+1,N=$[Z];if(N)return{data:{index:Z,overflows:D},reset:{placement:N}};let H=(B=D.filter(M=>M.overflows[0]<=0).sort((M,K)=>M.overflows[1]-K.overflows[1])[0])==null?void 0:B.placement;if(!H)switch(m){case"bestFit":{var G;const M=(G=D.map(K=>[K.placement,K.overflows.filter(re=>re>0).reduce((re,ce)=>re+ce,0)]).sort((K,re)=>K[1]-re[1])[0])==null?void 0:G[0];M&&(H=M);break}case"initialPlacement":H=a}if(i!==H)return{reset:{placement:H}}}return{}}}},nOe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await async function(o,a){const{placement:l,platform:u,elements:h}=o,d=await(u.isRTL==null?void 0:u.isRTL(h.floating)),p=Wh(l),m=pu(l),g=FT(l)==="x",v=["left","top"].includes(p)?-1:1,y=d&&g?-1:1,S=typeof a=="function"?a(o):a;let{mainAxis:T,crossAxis:w,alignmentAxis:E}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...S};return m&&typeof E=="number"&&(w=m==="end"?-1*E:E),g?{x:w*y,y:T*v}:{x:T*v,y:w*y}}(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function iOe(n){return n==="x"?"y":"x"}const rOe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:T,y:w}=S;return{x:T,y:w}}},...u}=n,h={x:t,y:i},d=await G3(e,u),p=FT(Wh(r)),m=iOe(p);let g=h[p],v=h[m];if(o){const S=p==="y"?"bottom":"right";g=nL(g+d[p==="y"?"top":"left"],g,g-d[S])}if(a){const S=m==="y"?"bottom":"right";v=nL(v+d[m==="y"?"top":"left"],v,v-d[S])}const y=l.fn({...e,[p]:g,[m]:v});return{...y,data:{x:y.x-t,y:y.y-i}}}}};function Ba(n){var e;return((e=n.ownerDocument)==null?void 0:e.defaultView)||window}function $u(n){return Ba(n).getComputedStyle(n)}const Bz=Math.min,Fb=Math.max,nC=Math.round;function K7(n){const e=$u(n);let t=parseFloat(e.width),i=parseFloat(e.height);const r=n.offsetWidth,o=n.offsetHeight,a=nC(t)!==r||nC(i)!==o;return a&&(t=r,i=o),{width:t,height:i,fallback:a}}function Ff(n){return tZ(n)?(n.nodeName||"").toLowerCase():""}let VE;function eZ(){if(VE)return VE;const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?(VE=n.brands.map(e=>e.brand+"/"+e.version).join(" "),VE):navigator.userAgent}function Cu(n){return n instanceof Ba(n).HTMLElement}function vc(n){return n instanceof Ba(n).Element}function tZ(n){return n instanceof Ba(n).Node}function Fz(n){return typeof ShadowRoot>"u"?!1:n instanceof Ba(n).ShadowRoot||n instanceof ShadowRoot}function VA(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=$u(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function sOe(n){return["table","td","th"].includes(Ff(n))}function iL(n){const e=/firefox/i.test(eZ()),t=$u(n),i=t.backdropFilter||t.WebkitBackdropFilter;return t.transform!=="none"||t.perspective!=="none"||!!i&&i!=="none"||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"||["transform","perspective"].some(r=>t.willChange.includes(r))||["paint","layout","strict","content"].some(r=>{const o=t.contain;return o!=null&&o.includes(r)})}function rL(){return/^((?!chrome|android).)*safari/i.test(eZ())}function W3(n){return["html","body","#document"].includes(Ff(n))}function nZ(n){return vc(n)?n:n.contextElement}const iZ={x:1,y:1};function V0(n){const e=nZ(n);if(!Cu(e))return iZ;const t=e.getBoundingClientRect(),{width:i,height:r,fallback:o}=K7(e);let a=(o?nC(t.width):t.width)/i,l=(o?nC(t.height):t.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function og(n,e,t,i){var r,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect(),l=nZ(n);let u=iZ;e&&(i?vc(i)&&(u=V0(i)):u=V0(n));const h=l?Ba(l):window,d=rL()&&t;let p=(a.left+(d&&((r=h.visualViewport)==null?void 0:r.offsetLeft)||0))/u.x,m=(a.top+(d&&((o=h.visualViewport)==null?void 0:o.offsetTop)||0))/u.y,g=a.width/u.x,v=a.height/u.y;if(l){const y=Ba(l),S=i&&vc(i)?Ba(i):i;let T=y.frameElement;for(;T&&i&&S!==y;){const w=V0(T),E=T.getBoundingClientRect(),$=getComputedStyle(T);E.x+=(T.clientLeft+parseFloat($.paddingLeft))*w.x,E.y+=(T.clientTop+parseFloat($.paddingTop))*w.y,p*=w.x,m*=w.y,g*=w.x,v*=w.y,p+=E.x,m+=E.y,T=Ba(T).frameElement}}return{width:g,height:v,top:m,right:p+g,bottom:m+v,left:p,x:p,y:m}}function Ef(n){return((tZ(n)?n.ownerDocument:n.document)||window.document).documentElement}function HA(n){return vc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function rZ(n){return og(Ef(n)).left+HA(n).scrollLeft}function DS(n){if(Ff(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Fz(n)&&n.host||Ef(n);return Fz(e)?e.host:e}function sZ(n){const e=DS(n);return W3(e)?e.ownerDocument.body:Cu(e)&&VA(e)?e:sZ(e)}function Ub(n,e){var t;e===void 0&&(e=[]);const i=sZ(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),o=Ba(i);return r?e.concat(o,o.visualViewport||[],VA(i)?i:[]):e.concat(i,Ub(i))}function Uz(n,e,t){let i;if(e==="viewport")i=function(a,l){const u=Ba(a),h=Ef(a),d=u.visualViewport;let p=h.clientWidth,m=h.clientHeight,g=0,v=0;if(d){p=d.width,m=d.height;const y=rL();(!y||y&&l==="fixed")&&(g=d.offsetLeft,v=d.offsetTop)}return{width:p,height:m,x:g,y:v}}(n,t);else if(e==="document")i=function(a){const l=Ef(a),u=HA(a),h=a.ownerDocument.body,d=Fb(l.scrollWidth,l.clientWidth,h.scrollWidth,h.clientWidth),p=Fb(l.scrollHeight,l.clientHeight,h.scrollHeight,h.clientHeight);let m=-u.scrollLeft+rZ(a);const g=-u.scrollTop;return $u(h).direction==="rtl"&&(m+=Fb(l.clientWidth,h.clientWidth)-d),{width:d,height:p,x:m,y:g}}(Ef(n));else if(vc(e))i=function(a,l){const u=og(a,!0,l==="fixed"),h=u.top+a.clientTop,d=u.left+a.clientLeft,p=Cu(a)?V0(a):{x:1,y:1};return{width:a.clientWidth*p.x,height:a.clientHeight*p.y,x:d*p.x,y:h*p.y}}(e,t);else{const a={...e};if(rL()){var r,o;const l=Ba(n);a.x-=((r=l.visualViewport)==null?void 0:r.offsetLeft)||0,a.y-=((o=l.visualViewport)==null?void 0:o.offsetTop)||0}i=a}return tL(i)}function Gz(n,e){return Cu(n)&&$u(n).position!=="fixed"?e?e(n):n.offsetParent:null}function Wz(n,e){const t=Ba(n);let i=Gz(n,e);for(;i&&sOe(i)&&$u(i).position==="static";)i=Gz(i,e);return i&&(Ff(i)==="html"||Ff(i)==="body"&&$u(i).position==="static"&&!iL(i))?t:i||function(r){let o=DS(r);for(;Cu(o)&&!W3(o);){if(iL(o))return o;o=DS(o)}return null}(n)||t}function oOe(n,e,t){const i=Cu(e),r=Ef(e),o=og(n,!0,t==="fixed",e);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(i||!i&&t!=="fixed")if((Ff(e)!=="body"||VA(r))&&(a=HA(e)),Cu(e)){const u=og(e,!0);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=rZ(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}const aOe={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=t==="clippingAncestors"?function(h,d){const p=d.get(h);if(p)return p;let m=Ub(h).filter(S=>vc(S)&&Ff(S)!=="body"),g=null;const v=$u(h).position==="fixed";let y=v?DS(h):h;for(;vc(y)&&!W3(y);){const S=$u(y),T=iL(y);S.position==="fixed"?g=null:(v?T||g:T||S.position!=="static"||!g||!["absolute","fixed"].includes(g.position))?g=S:m=m.filter(w=>w!==y),y=DS(y)}return d.set(h,m),m}(e,this._c):[].concat(t),a=[...o,i],l=a[0],u=a.reduce((h,d)=>{const p=Uz(e,d,r);return h.top=Fb(p.top,h.top),h.right=Bz(p.right,h.right),h.bottom=Bz(p.bottom,h.bottom),h.left=Fb(p.left,h.left),h},Uz(e,l,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=Cu(t),o=Ef(t);if(t===o)return e;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const u={x:0,y:0};if((r||!r&&i!=="fixed")&&((Ff(t)!=="body"||VA(o))&&(a=HA(t)),Cu(t))){const h=og(t);l=V0(t),u.x=h.x+t.clientLeft,u.y=h.y+t.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+u.x,y:e.y*l.y-a.scrollTop*l.y+u.y}},isElement:vc,getDimensions:function(n){return Cu(n)?K7(n):n.getBoundingClientRect()},getOffsetParent:Wz,getDocumentElement:Ef,getScale:V0,async getElementRects(n){let{reference:e,floating:t,strategy:i}=n;const r=this.getOffsetParent||Wz,o=this.getDimensions;return{reference:oOe(e,await r(t),i),floating:{x:0,y:0,...await o(t)}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>$u(n).direction==="rtl"};function lOe(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:a=!0,animationFrame:l=!1}=i,u=r&&!l,h=u||o?[...vc(n)?Ub(n):n.contextElement?Ub(n.contextElement):[],...Ub(e)]:[];h.forEach(g=>{u&&g.addEventListener("scroll",t,{passive:!0}),o&&g.addEventListener("resize",t)});let d,p=null;if(a){let g=!0;p=new ResizeObserver(()=>{g||t(),g=!1}),vc(n)&&!l&&p.observe(n),vc(n)||!n.contextElement||l||p.observe(n.contextElement),p.observe(e)}let m=l?og(n):null;return l&&function g(){const v=og(n);!m||v.x===m.x&&v.y===m.y&&v.width===m.width&&v.height===m.height||t(),m=v,d=requestAnimationFrame(g)}(),t(),()=>{var g;h.forEach(v=>{u&&v.removeEventListener("scroll",t),o&&v.removeEventListener("resize",t)}),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const cOe=(n,e,t)=>{const i=new Map,r={platform:aOe,...t},o={...r.platform,_c:i};return j0e(n,e,{...r,platform:o})},uOe=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?Lz({element:e.current,padding:t}).fn(r):{}:e?Lz({element:e,padding:t}).fn(r):{}}}};var Kx=typeof document<"u"?q.useLayoutEffect:q.useEffect;function iC(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!iC(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const o=r[i];if(!(o==="_owner"&&n.$$typeof)&&!iC(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function zz(n){const e=q.useRef(n);return Kx(()=>{e.current=n}),e}function hOe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,whileElementsMounted:o,open:a}=n,[l,u]=q.useState({x:null,y:null,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,d]=q.useState(i);iC(h,i)||d(i);const p=q.useRef(null),m=q.useRef(null),g=q.useRef(l),v=zz(o),y=zz(r),[S,T]=q.useState(null),[w,E]=q.useState(null),$=q.useCallback(G=>{p.current!==G&&(p.current=G,T(G))},[]),A=q.useCallback(G=>{m.current!==G&&(m.current=G,E(G))},[]),I=q.useCallback(()=>{if(!p.current||!m.current)return;const G={placement:e,strategy:t,middleware:h};y.current&&(G.platform=y.current),cOe(p.current,m.current,G).then(Z=>{const N={...Z,isPositioned:!0};D.current&&!iC(g.current,N)&&(g.current=N,bB.flushSync(()=>{u(N)}))})},[h,e,t,y]);Kx(()=>{a===!1&&g.current.isPositioned&&(g.current.isPositioned=!1,u(G=>({...G,isPositioned:!1})))},[a]);const D=q.useRef(!1);Kx(()=>(D.current=!0,()=>{D.current=!1}),[]),Kx(()=>{if(S&&w){if(v.current)return v.current(S,w,I);I()}},[S,w,I,v]);const R=q.useMemo(()=>({reference:p,floating:m,setReference:$,setFloating:A}),[$,A]),B=q.useMemo(()=>({reference:S,floating:w}),[S,w]);return q.useMemo(()=>({...l,update:I,refs:R,elements:B,reference:$,floating:A}),[l,I,R,B,$,A])}var XA=typeof document<"u"?q.useLayoutEffect:q.useEffect;let zM=!1,dOe=0;const Qz=()=>"floating-ui-"+dOe++;function fOe(){const[n,e]=q.useState(()=>zM?Qz():void 0);return XA(()=>{n==null&&e(Qz())},[]),q.useEffect(()=>{zM||(zM=!0)},[]),n}const pOe=c8["useId".toString()],Vz=pOe||fOe;function mOe(){const n=new Map;return{emit(e,t){var i;(i=n.get(e))==null||i.forEach(r=>r(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){n.set(e,(n.get(e)||[]).filter(i=>i!==t))}}}const gOe=q.createContext(null),oZ=()=>q.useContext(gOe);function Bm(n){return(n==null?void 0:n.ownerDocument)||document}function z3(n){return Bm(n).defaultView||window}function Cm(n){return n?n instanceof z3(n).Element:!1}function Q3(n){return n?n instanceof z3(n).HTMLElement:!1}function _Oe(n){if(typeof ShadowRoot>"u")return!1;const e=z3(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function OOe(){return/apple/i.test(navigator.vendor)}function rC(n,e){const t=["mouse","pen"];return e||t.push("",void 0),t.includes(n)}function x0(n,e){if(!n||!e)return!1;const t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&_Oe(t)){let i=e;do{if(i&&n===i)return!0;i=i.parentNode||i.host}while(i)}return!1}function vOe(n,e){let t=n.filter(r=>{var o;return r.parentId===e&&((o=r.context)==null?void 0:o.open)})||[],i=t;for(;i.length;)i=n.filter(r=>{var o;return(o=i)==null?void 0:o.some(a=>{var l;return r.parentId===a.id&&((l=r.context)==null?void 0:l.open)})})||[],t=t.concat(i);return t}function yOe(n){return"composedPath"in n?n.composedPath()[0]:n.target}function bOe(n,e){const[t,i]=n;let r=!1;const o=e.length;for(let a=0,l=o-1;a<o;l=a++){const[u,h]=e[a]||[0,0],[d,p]=e[l]||[0,0];h>=i!=p>=i&&t<=(d-u)*(i-h)/(p-h)+u&&(r=!r)}return r}const Hz="http://www.w3.org/2000/svg";function SOe(n,e,t){var i,r;const o=OOe(),a=e.defaultView||window,l=e.createElementNS(Hz,"svg");Object.assign(l.style,{position:"fixed",left:(o&&((i=a.visualViewport)==null?void 0:i.offsetLeft)||0)+"px",top:(o&&((r=a.visualViewport)==null?void 0:r.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),l.setAttribute("data-type",t?"rect":"triangle");const u=e.createElementNS(Hz,"polygon");return u.setAttribute("points",n.map(h=>{let[d,p]=h;return d+","+p}).join(" ")),Object.assign(u.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),l.appendChild(u),l}function Gb(n){n.current&&(n.current.remove(),n.current=null)}function TOe(n){let{restMs:e=0,buffer:t=.5,blockPointerEvents:i=!0}=n===void 0?{}:n,r,o=!1,a=!1;return u=>{let{x:h,y:d,placement:p,refs:m,onClose:g,nodeId:v,tree:y,polygonRef:S}=u;return function(w){var E;function $(){Gb(S),clearTimeout(r),g()}if(clearTimeout(r),!m.domReference.current||!m.floating.current||p==null||h==null||d==null)return;const{clientX:A,clientY:I}=w,D=yOe(w),R=w.type==="mouseleave",B=x0(m.domReference.current,D),G=x0(m.floating.current,D);if(!R&&B){Gb(S);return}if(!R&&(B||o&&x0(S.current,D))||R&&Cm(w.relatedTarget)&&x0(m.floating.current,w.relatedTarget)||y&&vOe(y.nodesRef.current,v).some(Q=>{let{context:ee}=Q;return ee==null?void 0:ee.open}))return;if(G&&(a=!0),G&&!R&&((E=S.current)==null?void 0:E.dataset.type)!=="rect"){Gb(S);return}const Z=m.domReference.current.getBoundingClientRect(),N=m.floating.current.getBoundingClientRect(),H=p.split("-")[0],M=h>N.right-N.width/2,K=d>N.bottom-N.height/2;if(H==="top"&&d>=Z.bottom-1||H==="bottom"&&d<=Z.top+1||H==="left"&&h>=Z.right-1||H==="right"&&h<=Z.left+1)return $();let re=[];switch(H){case"top":re=[[N.left,Z.top+1],[N.left,N.bottom-1],[N.right,N.bottom-1],[N.right,Z.top+1]],o=A>=N.left&&A<=N.right&&I>=N.top&&I<=Z.top+1;break;case"bottom":re=[[N.left,N.top+1],[N.left,Z.bottom-1],[N.right,Z.bottom-1],[N.right,N.top+1]],o=A>=N.left&&A<=N.right&&I>=Z.bottom-1&&I<=N.bottom;break;case"left":re=[[N.right-1,N.bottom],[N.right-1,N.top],[Z.left+1,N.top],[Z.left+1,N.bottom]],o=A>=N.left&&A<=Z.left+1&&I>=N.top&&I<=N.bottom;break;case"right":re=[[Z.right-1,N.bottom],[Z.right-1,N.top],[N.left+1,N.top],[N.left+1,N.bottom]],o=A>=Z.right-1&&A<=N.right&&I>=N.top&&I<=N.bottom;break}function ce(Q){let[ee,z]=Q;const L=N.width>Z.width,le=N.height>Z.height;switch(H){case"top":{const de=[L?ee+t/2:M?ee+t*4:ee-t*4,z+t+1],ie=[L?ee-t/2:M?ee+t*4:ee-t*4,z+t+1],Ce=[[N.left,M||L?N.bottom-t:N.top],[N.right,M?L?N.bottom-t:N.top:N.bottom-t]];return[de,ie,...Ce]}case"bottom":{const de=[L?ee+t/2:M?ee+t*4:ee-t*4,z-t],ie=[L?ee-t/2:M?ee+t*4:ee-t*4,z-t],Ce=[[N.left,M||L?N.top+t:N.bottom],[N.right,M?L?N.top+t:N.bottom:N.top+t]];return[de,ie,...Ce]}case"left":{const de=[ee+t+1,le?z+t/2:K?z+t*4:z-t*4],ie=[ee+t+1,le?z-t/2:K?z+t*4:z-t*4];return[...[[K||le?N.right-t:N.left,N.top],[K?le?N.right-t:N.left:N.right-t,N.bottom]],de,ie]}case"right":{const de=[ee-t,le?z+t/2:K?z+t*4:z-t*4],ie=[ee-t,le?z-t/2:K?z+t*4:z-t*4],Ce=[[K||le?N.left+t:N.right,N.top],[K?le?N.left+t:N.right:N.left+t,N.bottom]];return[de,ie,...Ce]}}}const X=o?re:ce([h,d]);if(!S.current&&i&&R){const Q=Bm(m.floating.current);S.current=SOe(X,Q,o),Q.body.appendChild(S.current)}o||(bOe([A,I],X)?e&&!a&&(r=setTimeout(g,e)):$())}}}function Xz(n){const e=q.useRef(n);return XA(()=>{e.current=n}),e}function QM(n,e,t){return t&&!rC(t)?0:typeof n=="number"?n:n==null?void 0:n[e]}const wOe=function(n,e){let{enabled:t=!0,delay:i=0,handleClose:r=null,mouseOnly:o=!1,restMs:a=0,move:l=!0}=e===void 0?{}:e;const{open:u,onOpenChange:h,dataRef:d,events:p,refs:m,_:g}=n,v=oZ(),y=Xz(r),S=Xz(i),T=q.useRef(),w=q.useRef(),E=q.useRef(),$=q.useRef(),A=q.useRef(!0),I=q.useRef(null),D=q.useCallback(()=>{var G;const Z=(G=d.current.openEvent)==null?void 0:G.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[d]);q.useEffect(()=>{if(!t)return;function G(){clearTimeout(w.current),clearTimeout($.current),A.current=!0}return p.on("dismiss",G),()=>{p.off("dismiss",G)}},[t,p,m]),q.useEffect(()=>{if(!t||!y.current||!u)return;function G(){D()&&h(!1)}const Z=Bm(m.floating.current).documentElement;return Z.addEventListener("mouseleave",G),()=>{Z.removeEventListener("mouseleave",G)}},[m,u,h,t,y,d,D]);const R=q.useCallback(function(G){G===void 0&&(G=!0);const Z=QM(S.current,"close",T.current);Z&&!E.current?(clearTimeout(w.current),w.current=setTimeout(()=>h(!1),Z)):G&&(clearTimeout(w.current),h(!1))},[S,h]),B=q.useCallback(()=>{E.current&&(Bm(m.floating.current).removeEventListener("mousemove",E.current),E.current=void 0)},[m]);return q.useEffect(()=>{if(!t)return;function G(){return d.current.openEvent?["click","mousedown"].includes(d.current.openEvent.type):!1}function Z(re){if(clearTimeout(w.current),A.current=!1,o&&!rC(T.current)||a>0&&QM(S.current,"open")===0)return;d.current.openEvent=re;const ce=QM(S.current,"open",T.current);ce?w.current=setTimeout(()=>{h(!0)},ce):h(!0)}function N(re){if(G())return;const ce=Bm(m.floating.current);if(clearTimeout($.current),y.current){clearTimeout(w.current),E.current&&ce.removeEventListener("mousemove",E.current),E.current=y.current({...n,tree:v,polygonRef:I,x:re.clientX,y:re.clientY,onClose(){B(),R()}}),ce.addEventListener("mousemove",E.current);return}R()}function H(re){G()||y.current==null||y.current({...n,tree:v,polygonRef:I,x:re.clientX,y:re.clientY,onClose(){B(),R()}})(re)}const M=m.floating.current,K=m.domReference.current;if(Cm(K))return u&&K.addEventListener("mouseleave",H),M==null||M.addEventListener("mouseleave",H),l&&K.addEventListener("mousemove",Z,{once:!0}),K.addEventListener("mouseenter",Z),K.addEventListener("mouseleave",N),()=>{u&&K.removeEventListener("mouseleave",H),M==null||M.removeEventListener("mouseleave",H),l&&K.removeEventListener("mousemove",Z),K.removeEventListener("mouseenter",Z),K.removeEventListener("mouseleave",N)}},[g.domReference,t,n,o,a,l,R,B,h,u,v,m,S,y,d]),XA(()=>{u||(T.current=void 0,B(),Gb(I))},[u,B]),q.useEffect(()=>()=>{B(),clearTimeout(w.current),clearTimeout($.current),Gb(I)},[t,B]),q.useMemo(()=>{if(!t)return{};function G(Z){T.current=Z.pointerType}return{reference:{onPointerDown:G,onPointerEnter:G,onMouseMove(){u||a===0||(clearTimeout($.current),$.current=setTimeout(()=>{A.current||h(!0)},a))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){p.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),R(!1)}}}},[p,t,a,u,h,R])};function EOe(n){let e=n.activeElement;for(;((t=e)==null||(i=t.shadowRoot)==null?void 0:i.activeElement)!=null;){var t,i;e=e.shadowRoot.activeElement}return e}const xOe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function $Oe(n){return Q3(n)&&n.matches(xOe)}const COe=c8["useInsertionEffect".toString()],AOe=COe||(n=>n());function kOe(n){const e=q.useRef(()=>{});return AOe(()=>{e.current=n}),q.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function jz(n){return Q3(n.target)&&n.target.tagName==="BUTTON"}function Yz(n){return $Oe(n)}const IOe=function(n,e){let{open:t,onOpenChange:i,dataRef:r,refs:o}=n,{enabled:a=!0,event:l="click",toggle:u=!0,ignoreMouse:h=!1,keyboardHandlers:d=!0}=e===void 0?{}:e;const p=q.useRef();return q.useMemo(()=>a?{reference:{onPointerDown(m){p.current=m.pointerType},onMouseDown(m){m.button===0&&(rC(p.current,!0)&&h||l!=="click"&&(t?u&&(!r.current.openEvent||r.current.openEvent.type==="mousedown")&&i(!1):(m.preventDefault(),i(!0)),r.current.openEvent=m.nativeEvent))},onClick(m){if(l==="mousedown"&&p.current){p.current=void 0;return}rC(p.current,!0)&&h||(t?u&&(!r.current.openEvent||r.current.openEvent.type==="click")&&i(!1):i(!0),r.current.openEvent=m.nativeEvent)},onKeyDown(m){p.current=void 0,d&&(jz(m)||(m.key===" "&&!Yz(o.domReference.current)&&m.preventDefault(),m.key==="Enter"&&(t?u&&i(!1):i(!0))))},onKeyUp(m){d&&(jz(m)||Yz(o.domReference.current)||m.key===" "&&(t?u&&i(!1):i(!0)))}}}:{},[a,r,l,h,d,o,u,t,i])};function ROe(n,e){if(e==null)return!1;if("composedPath"in n)return n.composedPath().includes(e);const t=n;return t.target!=null&&e.contains(t.target)}const MOe=function(n,e){let{open:t,onOpenChange:i,dataRef:r,refs:o,events:a}=n,{enabled:l=!0,keyboardOnly:u=!0}=e===void 0?{}:e;const h=q.useRef(""),d=q.useRef(!1),p=q.useRef();return q.useEffect(()=>{if(!l)return;const g=Bm(o.floating.current).defaultView||window;function v(){!t&&Q3(o.domReference.current)&&o.domReference.current===EOe(Bm(o.domReference.current))&&(d.current=!0)}return g.addEventListener("blur",v),()=>{g.removeEventListener("blur",v)}},[o,t,l]),q.useEffect(()=>{if(!l)return;function m(g){(g.type==="referencePress"||g.type==="escapeKey")&&(d.current=!0)}return a.on("dismiss",m),()=>{a.off("dismiss",m)}},[a,l]),q.useEffect(()=>()=>{clearTimeout(p.current)},[]),q.useMemo(()=>l?{reference:{onPointerDown(m){let{pointerType:g}=m;h.current=g,d.current=!!(g&&u)},onMouseLeave(){d.current=!1},onFocus(m){var g;d.current||m.type==="focus"&&((g=r.current.openEvent)==null?void 0:g.type)==="mousedown"&&r.current.openEvent&&ROe(r.current.openEvent,o.domReference.current)||(r.current.openEvent=m.nativeEvent,i(!0))},onBlur(m){d.current=!1;const g=m.relatedTarget,v=Cm(g)&&g.hasAttribute("data-floating-ui-focus-guard");p.current=setTimeout(()=>{x0(o.floating.current,g)||x0(o.domReference.current,g)||v||i(!1)})}}}:{},[l,u,o,r,i])},POe=function(n,e){let{open:t}=n,{enabled:i=!0,role:r="dialog"}=e===void 0?{}:e;const o=Vz(),a=Vz();return q.useMemo(()=>{const l={id:o,role:r};return i?r==="tooltip"?{reference:{"aria-describedby":t?o:void 0},floating:l}:{reference:{"aria-expanded":t?"true":"false","aria-haspopup":r==="alertdialog"?"dialog":r,"aria-controls":t?o:void 0,...r==="listbox"&&{role:"combobox"},...r==="menu"&&{id:a}},floating:{...l,...r==="menu"&&{"aria-labelledby":a}}}:{}},[i,r,t,o,a])};function DOe(n){let{open:e=!1,onOpenChange:t,whileElementsMounted:i,placement:r,middleware:o,strategy:a,nodeId:l}=n===void 0?{}:n;const[u,h]=q.useState(null),d=oZ(),p=q.useRef(null),m=q.useRef({}),g=q.useState(()=>mOe())[0],v=hOe({open:e,placement:r,middleware:o,strategy:a,whileElementsMounted:i}),y=kOe(t),S=q.useMemo(()=>({...v.refs,domReference:p}),[v.refs]),T=q.useMemo(()=>({...v,refs:S,dataRef:m,nodeId:l,events:g,open:e,onOpenChange:y,_:{domReference:u}}),[v,l,g,e,y,S,u]);XA(()=>{const A=d==null?void 0:d.nodesRef.current.find(I=>I.id===l);A&&(A.context=T)});const{reference:w}=v,E=q.useCallback(A=>{(Cm(A)||A===null)&&(S.domReference.current=A,h(A)),(Cm(S.reference.current)||S.reference.current===null||A!==null&&!Cm(A))&&w(A)},[w,S]),$=q.useCallback(A=>{const I=Cm(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),contextElement:A}:A;w(I)},[w]);return q.useMemo(()=>({...v,context:T,refs:S,reference:E,positionReference:$}),[v,S,T,E,$])}function VM(n,e,t){const i=new Map;return{...t==="floating"&&{tabIndex:-1},...n,...e.map(r=>r?r[t]:null).concat(n).reduce((r,o)=>(o&&Object.entries(o).forEach(a=>{let[l,u]=a;if(l.indexOf("on")===0){if(i.has(l)||i.set(l,[]),typeof u=="function"){var h;(h=i.get(l))==null||h.push(u),r[l]=function(){for(var d,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];(d=i.get(l))==null||d.forEach(v=>v(...m))}}}else r[l]=u}),r),{})}}const LOe=function(n){n===void 0&&(n=[]);const e=n,t=q.useCallback(o=>VM(o,n,"reference"),e),i=q.useCallback(o=>VM(o,n,"floating"),e),r=q.useCallback(o=>VM(o,n,"item"),e);return q.useMemo(()=>({getReferenceProps:t,getFloatingProps:i,getItemProps:r}),[t,i,r])},NOe=({arrowRef:n,placement:e})=>{const t=[];return t.push(nOe(8)),t.push(e==="auto"?eOe():tOe()),t.push(rOe({padding:8})),n.current&&t.push(uOe({element:n.current})),t},BOe=({placement:n})=>n==="auto"?void 0:n,FOe=({placement:n})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[n.split("-")[0]],aZ=({children:n,content:e,theme:t,animation:i="duration-300",arrow:r=!0,placement:o="top",style:a="dark",trigger:l="hover",closeRequestKey:u,className:h,...d})=>{const p=q.useRef(null),[m,g]=q.useState(!1),v=DOe({middleware:NOe({arrowRef:p,placement:o}),onOpenChange:g,open:m,placement:BOe({placement:o})}),{context:y,floating:S,middlewareData:{arrow:{x:T,y:w}={}},reference:E,refs:$,strategy:A,update:I,x:D,y:R}=v,{getFloatingProps:B,getReferenceProps:G}=LOe([IOe(y,{enabled:l==="click"}),MOe(y),wOe(y,{enabled:l==="hover",handleClose:TOe()}),POe(y,{role:"tooltip"})]);return q.useEffect(()=>{if($.reference.current&&$.floating.current&&m)return lOe($.reference.current,$.floating.current,I)},[m,$.floating,$.reference,I]),q.useEffect(()=>{u!==void 0&&g(!1)},[u]),dt(Fr,{children:[se("div",{className:t.target,...G({ref:E}),"data-testid":"flowbite-tooltip-target",children:n}),dt("div",{"data-testid":"flowbite-tooltip",...B({className:ht(t.base,i&&`${t.animation} ${i}`,!m&&t.hidden,t.style[a],h),ref:S,style:{position:A,top:R??" ",left:D??" "},...d}),children:[se("div",{className:t.content,children:e}),r&&se("div",{className:ht(t.arrow.base,{[t.arrow.style.dark]:a==="dark",[t.arrow.style.light]:a==="light",[t.arrow.style.auto]:a==="auto"}),"data-testid":"flowbite-tooltip-arrow",ref:p,style:{top:w??" ",left:T??" ",right:" ",bottom:" ",[FOe({placement:v.placement})]:t.arrow.placement},children:""})]})]})},V3=()=>{const n=kt().theme.dropdown.floating.divider;return se("div",{className:n})},lZ=({children:n,className:e,...t})=>{const i=kt().theme.dropdown.floating.header;return dt(Fr,{children:[se("div",{className:ht(i,e),...t,children:n}),se(V3,{})]})},H3=({children:n,className:e,onClick:t,icon:i})=>{const r=kt().theme.dropdown.floating.item;return dt("li",{className:ht(r.base,e),onClick:t,children:[i&&se(i,{className:r.icon}),n]})},UOe={top:B0e,right:D7,bottom:P7,left:N0e},cZ=({children:n,className:e,dismissOnClick:t=!0,...i})=>{const r=kt().theme.dropdown,o=i,{placement:a=i.inline?"bottom-start":"bottom",trigger:l="click",label:u,inline:h,floatingArrow:d=!1,arrowIcon:p=!0,...m}=o,g=q.useMemo(()=>{const[E]=a.split("-");return UOe[E]??P7},[a]),[v,y]=q.useState(void 0),S=E=>Cn.isValidElement(E)?E.type===H3?Cn.cloneElement(E,{onClick:()=>{var $,A;(A=($=E.props).onClick)==null||A.call($),t&&y(X0e())}}):E.props.children&&typeof E.props.children=="object"?Cn.cloneElement(E,{children:q.Children.map(E.props.children,S)}):E:E,T=q.useMemo(()=>se("ul",{className:r.content,children:q.Children.map(n,S)}),[n,r]),w=({children:E})=>h?se("button",{className:r.inlineWrapper,children:E}):se(Mo,{...m,children:E});return se(aZ,{content:T,style:"auto",animation:"duration-100",placement:a,arrow:d,trigger:l,theme:r.floating,closeRequestKey:v,className:e,children:dt(w,{children:[u,p&&se(g,{className:r.arrowIcon})]})})};cZ.displayName="Dropdown";H3.displayName="Dropdown.Item";lZ.displayName="Dropdown.Header";V3.displayName="Dropdown.Divider";const Zz=Object.assign(cZ,{Item:H3,Header:lZ,Divider:V3}),jA=({value:n,children:e,color:t="default",className:i,...r})=>{const o=kt().theme.helperText;return se("p",{className:ht(o.base,o.colors[t],i),...r,children:n??e??""})},GOe=q.forwardRef(({theme:n={},sizing:e="md",helperText:t,color:i="gray",className:r,...o},a)=>{const l=Gr(kt().theme.fileInput,n);return dt(Fr,{children:[se("div",{className:ht(l.base,r),children:se("div",{className:l.field.base,children:se("input",{className:ht(l.field.input.base,l.field.input.colors[i],l.field.input.sizes[e]),...o,type:"file",ref:a})})}),t&&se(jA,{color:i,children:t})]})});GOe.displayName="FileInput";const uZ=({alt:n,className:e,children:t,href:i,name:r,src:o})=>{const a=kt().theme.footer.brand;return se("div",{children:i?dt("a",{"data-testid":"flowbite-footer-brand",href:i,className:ht(a.base,e),children:[se("img",{alt:n,src:o,className:a.img}),se("span",{"data-testid":"flowbite-footer-brand-span",className:a.span,children:r}),t]}):se("img",{alt:n,"data-testid":"flowbite-footer-brand",src:o,className:a.img})})},hZ=({href:n,by:e,year:t,className:i})=>{const r=kt().theme.footer.copyright;return se("div",{children:dt("span",{className:ht(r.base,i),"data-testid":"flowbite-footer-copyright",children:[" ",t,n?se("a",{href:n,className:r.href,children:e}):se("span",{"data-testid":"flowbite-footer-copyright-span",className:r.span,children:e})]})})},dZ=({className:n})=>{const e=kt().theme.footer.divider;return se("hr",{"data-testid":"footer-divider",className:ht(e.base,n)})},fZ=({href:n,className:e,ariaLabel:t,icon:i})=>{const r=kt().theme.footer.icon;return se("div",{children:n?se("a",{"aria-label":t,"data-testid":"flowbite-footer-icon",href:n,className:ht(r.base,e),children:se(i,{className:r.size})}):se(i,{"data-testid":"flowbite-footer-icon",className:r.size})})},pZ=({children:n,className:e,href:t})=>{const i=kt().theme.footer.groupLink.link;return se("li",{className:ht(i.base,e),children:se("a",{href:t,className:i.href,children:n})})},mZ=({children:n,className:e,col:t=!1})=>{const i=kt().theme.footer.groupLink;return se("ul",{"data-testid":"footer-groupLink",className:ht(i.base,t&&i.col,e),children:n})},gZ=({title:n,className:e})=>{const t=kt().theme.footer.title;return se("h2",{"data-testid":"flowbite-footer-title",className:ht(t.base,e),children:n})},_Z=({children:n,className:e,bgDark:t=!1,container:i=!1})=>{const r=kt().theme.footer;return se("footer",{"data-testid":"flowbite-footer",className:ht(r.base,t&&r.bgDark,i&&r.container,e),children:n})};_Z.displayName="Footer";hZ.displayName="Footer.Copyright";pZ.displayName="Footer.Link";uZ.displayName="Footer.Brand";mZ.displayName="Footer.LinkGroup";fZ.displayName="Footer.Icon";gZ.displayName="Footer.Title";dZ.displayName="Footer.Divider";Object.assign(_Z,{Copyright:hZ,Link:pZ,LinkGroup:mZ,Brand:uZ,Icon:fZ,Title:gZ,Divider:dZ});const e$=({children:n,color:e="default",disabled:t=!1,value:i,className:r,...o})=>{const a=kt().theme.label;return se("label",{className:ht(a.base,a.colors[e],t??a.disabled,r),...o,children:i??n??""})},OZ=({active:n,children:e,href:t,icon:i,onClick:r,className:o,...a})=>{const l=typeof t<"u",u=l?"a":"button",h=kt().theme.listGroup.item,d=a;return se("li",{children:dt(u,{className:ht(h.active[n?"on":"off"],h.base,h.href[l?"on":"off"]),href:t,onClick:r,type:l?void 0:"button",...d,children:[i&&se(i,{"aria-hidden":!0,className:h.icon,"data-testid":"flowbite-list-group-item-icon"}),e]})})},vZ=({children:n,className:e,...t})=>{const i=kt().theme.listGroup.base,r=t;return se("ul",{className:ht(i,e),...r,children:n})};vZ.displayName="ListGroup";OZ.displayName="ListGroup.Item";Object.assign(vZ,{Item:OZ});const WOe=(n,e)=>{const t=i=>{i.key===n&&e()};q.useEffect(()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}),[n,e])},yZ=q.createContext(void 0);function X3(){const n=q.useContext(yZ);if(!n)throw new Error("useModalContext should be used within the ModalContext provider!");return n}const bZ=({children:n,className:e,...t})=>{const{popup:i}=X3(),r=kt().theme.modal.body;return se("div",{className:ht(r.base,{[r.popup]:i},e),...t,children:n})},SZ=({children:n,className:e,...t})=>{const{popup:i}=X3(),r=kt().theme.modal.footer;return se("div",{className:ht(r.base,{[r.popup]:!i},e),...t,children:n})},TZ=({children:n,className:e,...t})=>{const{popup:i,onClose:r}=X3(),o=kt().theme.modal.header;return dt("div",{className:ht(o.base,{[o.popup]:i},e),...t,children:[se("h3",{className:o.title,children:n}),se("button",{"aria-label":"Close",className:o.close.base,type:"button",onClick:r,children:se(F0e,{"aria-hidden":!0,className:o.close.icon})})]})},wZ=({children:n,show:e,root:t=document.body,popup:i,size:r="2xl",position:o="center",dismissible:a=!1,onClose:l,className:u,...h})=>{const d=kt().theme.modal,p=q.useRef(null);p.current||(p.current=document.createElement("div")),p.current.parentNode!==t&&t.appendChild(p.current),q.useEffect(()=>()=>{var v;const g=p.current;g&&((v=g.parentNode)==null||v.removeChild(g),p.current=null)},[]),WOe("Escape",()=>{a&&l&&l()});const m=g=>{a&&g.target===g.currentTarget&&l&&l()};return bB.createPortal(se(yZ.Provider,{value:{popup:i,onClose:l},children:se("div",{"aria-hidden":!e,className:ht(d.base,d.positions[o],e?d.show.on:d.show.off,u),"data-testid":"modal",role:"dialog",onClick:m,...h,children:se("div",{className:ht(d.content.base,d.sizes[r]),children:se("div",{className:d.content.inner,children:n})})})}),p.current)};wZ.displayName="Modal";TZ.displayName="Modal.Header";bZ.displayName="Modal.Body";SZ.displayName="Modal.Footer";const Lr=Object.assign(wZ,{Header:TZ,Body:bZ,Footer:SZ}),EZ=({theme:n={},children:e,className:t,as:i="a",...r})=>{const o=Gr(kt().theme.navbar.brand,n);return se(i,{className:ht(o.base,t),...r,children:e})},xZ=q.createContext(void 0);function $Z(){const n=q.useContext(xZ);if(!n)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return n}const CZ=({theme:n={},children:e,className:t,...i})=>{const{isOpen:r}=$Z(),o=Gr(kt().theme.navbar.collapse,n);return se("div",{className:ht(o.base,o.hidden[r?"off":"on"],t),"data-testid":"flowbite-navbar-collapse",...i,children:se("ul",{className:o.list,children:e})})},AZ=({active:n,disabled:e,theme:t={},children:i,className:r,as:o="a",...a})=>{const l=Gr(kt().theme.navbar.link,t);return se("li",{children:se(o,{className:ht(l.base,{[l.active.on]:n,[l.active.off]:!n&&!e},l.disabled[e?"on":"off"],r),...a,children:i})})};function zOe(n){return cd({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(n)}const kZ=({barIcon:n=zOe,theme:e={},className:t,...i})=>{const{isOpen:r,setIsOpen:o}=$Z(),a=()=>{o(!r)},l=Gr(kt().theme.navbar.toggle,e);return dt("button",{className:ht(l.base,t),"data-testid":"flowbite-navbar-toggle",onClick:a,...i,children:[se("span",{className:"sr-only",children:"Open main menu"}),se(n,{className:l.icon})]})},IZ=({children:n,menuOpen:e,fluid:t=!1,rounded:i,border:r,className:o,theme:a={},...l})=>{const[u,h]=q.useState(e),d=Gr(kt().theme.navbar.root,a);return se(xZ.Provider,{value:{isOpen:u,setIsOpen:h},children:se("nav",{className:ht(d.base,d.bordered[r?"on":"off"],d.rounded[i?"on":"off"],o),...l,children:se("div",{className:ht(d.inner.base,d.inner.fluid[t?"on":"off"]),children:n})})})};IZ.displayName="Navbar";EZ.displayName="Navbar.Brand";CZ.displayName="Navbar.Collapse";AZ.displayName="Navbar.Link";kZ.displayName="Navbar.Toggle";Object.assign(IZ,{Brand:EZ,Collapse:CZ,Link:AZ,Toggle:kZ});const QOe=q.forwardRef(({theme:n={},className:e,...t},i)=>{const r=Gr(kt().theme.radio,n);return se("input",{ref:i,className:ht(r.root.base,e),type:"radio",...t})});QOe.displayName="Radio";const VOe=q.forwardRef(({theme:n={},sizing:e="md",className:t,...i},r)=>{const o=Gr(kt().theme.rangeSlider,n);return se(Fr,{children:se("div",{"data-testid":"flowbite-range-slider",className:ht(o.base,t),children:se("div",{className:o.field.base,children:se("input",{className:ht(o.field.input.base,o.field.input.sizes[e]),...i,type:"range",ref:r})})})})});VOe.displayName="RangeSlider";const RZ=({percentFilled:n=0,children:e,className:t,...i})=>{const r=kt().theme.rating.advanced;return dt("div",{className:ht(r.base,t),...i,children:[se("span",{className:r.label,children:e}),se("div",{className:r.progress.base,children:se("div",{className:r.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${n}%`}})}),se("span",{className:r.progress.label,children:`${n}%`})]})},MZ=q.createContext(void 0);function HOe(){const n=q.useContext(MZ);if(!n)throw new Error("useRatingContext should be used within the RatingContext provider!");return n}const PZ=({filled:n=!0,starIcon:e=D0e,className:t})=>{const{size:i="sm"}=HOe(),r=kt().theme.rating.star;return se(e,{className:ht(r.sizes[i],r[n?"filled":"empty"],t),"data-testid":"flowbite-rating-star"})},DZ=({children:n,size:e="sm",className:t,...i})=>{const r=kt().theme.rating;return se(MZ.Provider,{value:{size:e},children:se("div",{className:ht(r.base,t),...i,children:n})})};DZ.displayName="Rating";PZ.displayName="Rating.Star";RZ.displayName="Rating.Advanced";Object.assign(DZ,{Star:PZ,Advanced:RZ});const XOe=q.forwardRef(({children:n,sizing:e="md",shadow:t,helperText:i,addon:r,icon:o,color:a="gray",className:l,...u},h)=>{const d=kt().theme.select;return dt("div",{className:ht(d.base,l),children:[r&&se("span",{className:d.addon,children:r}),dt("div",{className:d.field.base,children:[o&&se("div",{className:d.field.icon.base,children:se(o,{className:d.field.icon.svg})}),se("select",{className:ht(d.field.select.base,d.field.select.colors[a],d.field.select.withIcon[o?"on":"off"],d.field.select.withAddon[r?"on":"off"],d.field.select.withShadow[t?"on":"off"],d.field.select.sizes[e]),...u,ref:h,children:n}),i&&se(jA,{color:a,children:i})]})]})});XOe.displayName="Select";const LZ=({animation:n="duration-300",arrow:e=!0,children:t,content:i,placement:r="top",style:o="dark",trigger:a="hover",className:l,...u})=>{const h=kt().theme.tooltip;return se(aZ,{content:i,style:o,animation:n,placement:r,arrow:e,trigger:a,theme:h,className:l,...u,children:t})},NZ=q.createContext(void 0);function YA(){const n=q.useContext(NZ);if(!n)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return n}const j3=q.createContext(void 0);function jOe(){const n=q.useContext(j3);if(!n)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return n}const BZ=({children:n,icon:e,label:t,className:i,open:r=!1,...o})=>{const a=q.useId(),{isCollapsed:l}=YA(),[u,h]=q.useState(r),d=kt().theme.sidebar.collapse;return q.useEffect(()=>h(r),[r]),dt(({children:m})=>se("li",{children:l&&!u?se(LZ,{content:t,placement:"right",children:m}):m}),{children:[dt("button",{className:ht(d.button,i),id:`flowbite-sidebar-collapse-${a}`,onClick:()=>h(!u),title:t,type:"button",...o,children:[e&&se(e,{"aria-hidden":!0,className:ht(d.icon.base,d.icon.open[u?"on":"off"]),"data-testid":"flowbite-sidebar-collapse-icon"}),l?se("span",{className:"sr-only",children:t}):dt(Fr,{children:[se("span",{className:d.label.base,"data-testid":"flowbite-sidebar-collapse-label",children:t}),se(M7,{"aria-hidden":!0,className:d.label.icon})]})]}),se("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${a}`,className:d.list,hidden:!u,children:se(j3.Provider,{value:{isInsideCollapse:!0},children:n})})]})};BZ.displayName="Sidebar.Collapse";const FZ=({children:n,color:e="info",className:t,...i})=>{const{isCollapsed:r}=YA(),o=kt().theme.sidebar.cta;return se("div",{className:ht(o.base,o.color[e],t),"data-testid":"sidebar-cta",hidden:r,...i,children:n})};FZ.displayName="Sidebar.CTA";const YOe=({id:n,isCollapsed:e,tooltipChildren:t,children:i})=>se("li",{children:e?se(LZ,{content:se(ZOe,{id:n,children:t}),placement:"right",children:i}):i}),ZOe=({id:n,children:e})=>se(UZ,{id:n,children:e}),UZ=({id:n,children:e})=>{const t=kt().theme.sidebar.item;return se("span",{className:ht(t.content.base),"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${n}`,children:e})},GZ=q.forwardRef(({as:n="a",children:e,icon:t,active:i,label:r,labelColor:o="info",className:a,...l},u)=>{const h=q.useId(),{isCollapsed:d}=YA(),{isInsideCollapse:p}=jOe(),m=kt().theme.sidebar.item;return se(YOe,{id:h,isCollapsed:d,tooltipChildren:e,children:dt(n,{"aria-labelledby":`flowbite-sidebar-item-${h}`,className:ht(m.base,i&&m.active,!d&&p&&m.collapsed.insideCollapse,a),ref:u,...l,children:[t&&se(t,{"aria-hidden":!0,className:ht(m.icon.base,i&&m.icon.active),"data-testid":"flowbite-sidebar-item-icon"}),d&&!t&&se("span",{className:m.collapsed.noIcon,children:e.charAt(0).toLocaleUpperCase()??"?"}),!d&&se(UZ,{id:h,children:e}),!d&&r&&se(V7,{color:o,"data-testid":"flowbite-sidebar-label",hidden:d,className:m.label,children:r})]})})});GZ.displayName="Sidebar.Item";const WZ=({children:n,className:e,...t})=>{const i=kt().theme.sidebar.itemGroup;return se("ul",{className:ht(i,e),"data-testid":"flowbite-sidebar-item-group",...t,children:se(j3.Provider,{value:{isInsideCollapse:!1},children:n})})};WZ.displayName="Sidebar.ItemGroup";const zZ=({children:n,className:e,...t})=>{const i=kt().theme.sidebar.items;return se("div",{className:ht(i,e),"data-testid":"flowbite-sidebar-items",...t,children:n})};zZ.displayName="Sidebar.Items";const QZ=({children:n,href:e,img:t,imgAlt:i="",className:r,...o})=>{const a=q.useId(),{isCollapsed:l}=YA(),u=kt().theme.sidebar.logo;return dt("a",{"aria-labelledby":`flowbite-sidebar-logo-${a}`,className:ht(u.base,r),href:e,...o,children:[se("img",{alt:i,className:u.img,src:t}),se("span",{className:u.collapsed[l?"on":"off"],id:`flowbite-sidebar-logo-${a}`,children:n})]})};QZ.displayName="Sidebar.Logo";const VZ=({children:n,collapseBehavior:e="collapse",collapsed:t=!1,...i})=>{const r=kt().theme.sidebar;return se(NZ.Provider,{value:{isCollapsed:t},children:se("aside",{"aria-label":"Sidebar",className:ht(r.base,r.collapsed[t?"on":"off"]),hidden:t&&e==="hide",...i,children:se("div",{className:r.inner,children:n})})})};VZ.displayName="Sidebar";Object.assign(VZ,{Collapse:BZ,CTA:FZ,Item:GZ,Items:zZ,ItemGroup:WZ,Logo:QZ});const HZ=({children:n,className:e})=>se("div",{className:e,children:n}),XZ=q.forwardRef(({children:n,style:e="default",className:t,onActiveTabChange:i,...r},o)=>{const a=kt().theme.tab,l=q.useId(),u=q.useMemo(()=>q.Children.map(n,({props:w})=>w),[n]),h=q.useRef([]),[d,p]=q.useState(Math.max(0,u.findIndex(w=>w.active))),[m,g]=q.useState(Math.max(0,u.findIndex(w=>w.active))),v=w=>{p(w),i&&i(w)},y=({target:w})=>{v(w),g(w)},S=({event:w,target:E})=>{w.key==="ArrowLeft"&&g(Math.max(0,m-1)),w.key==="ArrowRight"&&g(Math.min(u.length-1,m+1)),w.key==="Enter"&&(v(E),g(E))},T=a.tablist.tabitem.styles[e];return q.useEffect(()=>{var w;(w=h.current[m])==null||w.focus()},[m]),q.useImperativeHandle(o,()=>({setActiveTab:v})),dt("div",{className:ht(a.base,t),children:[se("div",{"aria-label":"Tabs",role:"tablist",className:ht(a.tablist.base,a.tablist.styles[e],t),...r,children:u.map((w,E)=>dt("button",{type:"button","aria-controls":`${l}-tabpanel-${E}`,"aria-selected":E===d,className:ht(a.tablist.tabitem.base,{...T},{[T.active.on]:E===d,[T.active.off]:E!==d&&!w.disabled}),disabled:w.disabled,id:`${l}-tab-${E}`,onClick:()=>y({target:E}),onKeyDown:$=>S({event:$,target:E}),ref:$=>h.current[E]=$,role:"tab",tabIndex:E===m?0:-1,children:[w.icon&&se(w.icon,{className:a.tablist.tabitem.icon}),w.title]},E))}),se("div",{children:u.map((w,E)=>se("div",{"aria-labelledby":`${l}-tab-${E}`,className:a.tabpanel,hidden:E!==d,id:`${l}-tabpanel-${E}`,role:"tabpanel",tabIndex:0,children:w.children},E))})]})});XZ.displayName="Tabs.Group";HZ.displayName="Tabs.Item";const jy={Group:XZ,Item:HZ},jZ=({children:n,...e})=>se("tbody",{...e,children:n}),YZ=({children:n,className:e,...t})=>{const i=kt().theme.table.cell;return se("td",{className:ht(i.base,e),...t,children:n})},ZZ=q.createContext(void 0);function qOe(){const n=q.useContext(ZZ);if(!n)throw new Error("useTableContext should be used within the TableContext provider!");return n}const qZ=({children:n,className:e,...t})=>{const i=kt().theme.table;return se("thead",{className:ht(i.head.base,e),...t,children:se("tr",{children:n})})},JZ=({children:n,className:e,...t})=>{const i=kt().theme.table.head.cell;return se("th",{className:ht(i.base,e),...t,children:n})},KZ=({children:n,className:e,...t})=>{const i=kt().theme.table.row,{striped:r,hoverable:o}=qOe();return se("tr",{"data-testid":"table-row-element",className:ht(r&&i.striped,o&&i.hovered,e),...t,children:n})},eq=({children:n,striped:e,hoverable:t,className:i,...r})=>{const o=kt().theme.table;return se("div",{"data-testid":"table-element",className:ht(o.wrapper),children:se(ZZ.Provider,{value:{striped:e,hoverable:t},children:se("table",{className:ht(o.base,i),...r,children:n})})})};eq.displayName="Table";qZ.displayName="Table.Head";jZ.displayName="Table.Body";KZ.displayName="Table.Row";YZ.displayName="Table.Cell";JZ.displayName="Table.HeadCell";Object.assign(eq,{Head:qZ,Body:jZ,Row:KZ,Cell:YZ,HeadCell:JZ});const JOe=q.forwardRef(({shadow:n,helperText:e,color:t="gray",className:i,...r},o)=>{const a=kt().theme.textarea;return dt(Fr,{children:[se("textarea",{ref:o,className:ht(a.base,a.colors[t],a.withShadow[n?"on":"off"],i),...r}),e&&se(jA,{color:t,children:e})]})});JOe.displayName="Textarea";const xf=q.forwardRef(({sizing:n="md",shadow:e,helperText:t,addon:i,icon:r,rightIcon:o,color:a="gray",className:l,theme:u={},...h},d)=>{const p=Gr(kt().theme.textInput,u);return dt(Fr,{children:[dt("div",{className:ht(p.base,l),children:[i&&se("span",{className:p.addon,children:i}),dt("div",{className:p.field.base,children:[r&&se("div",{className:p.field.icon.base,children:se(r,{className:p.field.icon.svg})}),o&&se("div",{"data-testid":"right-icon",className:p.field.rightIcon.base,children:se(o,{className:p.field.rightIcon.svg})}),se("input",{className:ht(p.field.input.base,p.field.input.colors[a],p.field.input.withIcon[r?"on":"off"],p.field.input.withAddon[i?"on":"off"],p.field.input.withShadow[e?"on":"off"],p.field.input.sizes[n]),...h,ref:d})]})]}),t&&se(jA,{color:a,children:t})]})});xf.displayName="TextInput";const tq=({children:n,className:e,...t})=>{const i=kt().theme.timeline.item.content;return se("p",{className:ht(i.body,e),...t,children:n})},nq=q.createContext(void 0);function Y3(){const n=q.useContext(nq);if(!n)throw new Error("useTimelineContext should be used within the TimelineContext providor!");return n}const iq=({children:n,className:e,...t})=>{const i=kt().theme.timeline.item.content,{horizontal:r}=Y3();return se("div",{"data-testid":"timeline-content",className:ht(r&&i.base,e),...t,children:n})},rq=({children:n,className:e,...t})=>{const i=kt().theme.timeline.item,{horizontal:r}=Y3();return se("li",{"data-testid":"timeline-item",className:ht(r&&i.base.horizontal,!r&&i.base.vertical,e),...t,children:n})},sq=({children:n,className:e,icon:t,...i})=>{const r=kt().theme.timeline.item.point,{horizontal:o}=Y3();return dt("div",{"data-testid":"timeline-point",className:ht(o&&r.base.horizontal,!o&&r.base.vertical,e),...i,children:[n,t?se("span",{className:ht(r.marker.icon.wrapper),children:se(t,{"aria-hidden":!0,className:ht(r.marker.icon.base)})}):se("div",{className:ht(o&&r.marker.base.horizontal,!o&&r.marker.base.vertical)}),o&&se("div",{className:ht(r.line)})]})},oq=({children:n,className:e,...t})=>{const i=kt().theme.timeline.item.content;return se("time",{className:ht(i.time,e),...t,children:n})},aq=({children:n,className:e,as:t="h3",...i})=>{const r=kt().theme.timeline.item.content;return se(t,{className:ht(r.title,e),...i,children:n})},lq=({children:n,horizontal:e,className:t})=>{const i=kt().theme.timeline;return se(nq.Provider,{value:{horizontal:e},children:se("ol",{"data-testid":"timeline-component",className:ht(e&&i.direction.horizontal,!e&&i.direction.vertical,t),children:n})})};lq.displayName="Timeline";rq.displayName="Timeline.Item";sq.displayName="Timeline.Point";iq.displayName="Timeline.Content";oq.displayName="Timeline.Time";aq.displayName="Timeline.Title";tq.displayName="Timeline.Body";Object.assign(lq,{Item:rq,Point:sq,Content:iq,Time:oq,Title:aq,Body:tq});const cq=q.createContext(void 0);function KOe(){const n=q.useContext(cq);if(!n)throw new Error("useToastContext should be used within the ToastContext provider!");return n}const uq=({className:n,xIcon:e=L0e})=>{const{duration:t,isClosed:i,isRemoved:r,setIsClosed:o,setIsRemoved:a}=KOe(),l=kt().theme.toast.toggle;return se("button",{"aria-label":"Close",onClick:()=>{o(!i),setTimeout(()=>a(!r),t)},type:"button",className:ht(l.base,n),children:se(e,{className:l.icon})})},eve={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},hq=({children:n,duration:e=300,className:t,...i})=>{const[r,o]=q.useState(!1),[a,l]=q.useState(!1),u=kt().theme.toast;return se(cq.Provider,{value:{duration:e,isClosed:r,isRemoved:a,setIsClosed:o,setIsRemoved:l},children:se("div",{"data-testid":"flowbite-toast",className:ht(u.base,eve[e],{[u.closed]:r},{[u.removed]:a},t),...i,children:n})})};hq.displayName="Toast";uq.displayName="Toast.Toggle";Object.assign(hq,{Toggle:uq});const Vs=({icon:n,text:e,color:t,onClick:i,className:r,type:o})=>dt(Mo,{className:r,onClick:i,color:t,type:o,children:[se(Al,{icon:n}),e!==""?se("span",{className:"ml-2",children:e}):null]});var tve={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},nve={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},ive={prefix:"fas",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},dq={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},rve=dq,sve={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},fq={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},ove={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},qz={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},ave={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352H192c0 35.3 28.7 64 64 64s64-28.7 64-64H448c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V416c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},lve={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M258.7 57.4L25.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H256h9.4H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H355.9L486.6 285.3c25-25 25-65.5 0-90.5L349.3 57.4c-25-25-65.5-25-90.5 0zM265.4 416H256l-105.4 0-80-80L195.3 211.3 332.7 348.7 265.4 416z"]},Jz={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},cve={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},uve={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},hve={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"]},dve={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},UT=dve,fve={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},pve=fve;const mve=()=>{const n=jt(a=>Object.values(a.blocks)),e=jt(a=>a.removeBlock),t=jt(a=>a.createBlock),i=jt(a=>a.copyBlock),r=jt(a=>a.editingBlockId),o=jt(a=>a.setEditingBlock);return jt(a=>a.setDuration),dt("div",{children:[dt("div",{className:"flex flex-wrap gap-2 p-2",children:[se(Vs,{icon:UT,text:"New",onClick:()=>{const a=t("New Block");o(a)}}),se(Vs,{icon:cve,text:"Copy",onClick:()=>{if(r===void 0)return;const a=i(r);o(a)}}),se(Vs,{color:"failure",icon:fq,text:"Delete",onClick:()=>{r!==void 0&&e(r)}})]}),se("div",{className:"flex flex-wrap gap-2 p-2",children:n.map(a=>se(Mo,{className:"flex",onClick:()=>o(a.id),color:"success",children:a.name},a.id))})]})};function FO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(d){try{h(i.next(d))}catch(p){a(p)}}function u(d){try{h(i.throw(d))}catch(p){a(p)}}function h(d){d.done?o(d.value):r(d.value).then(l,u)}h((i=i.apply(n,e||[])).next())})}function UO(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(d){return u([h,d])}}function u(h){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(t=0)),t;)try{if(i=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(d){h=[6,d],r=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Kz(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o}function eQ(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))}var gve=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function GT(n,e){var t=_ve(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function _ve(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=gve.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var Ove=[".DS_Store","Thumbs.db"];function vve(n){return FO(this,void 0,void 0,function(){return UO(this,function(e){return sC(n)&&yve(n.dataTransfer)?[2,wve(n.dataTransfer,n.type)]:bve(n)?[2,Sve(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Tve(n)]:[2,[]]})})}function yve(n){return sC(n)}function bve(n){return sC(n)&&sC(n.target)}function sC(n){return typeof n=="object"&&n!==null}function Sve(n){return sL(n.target.files).map(function(e){return GT(e)})}function Tve(n){return FO(this,void 0,void 0,function(){var e;return UO(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return GT(i)})]}})})}function wve(n,e){return FO(this,void 0,void 0,function(){var t,i;return UO(this,function(r){switch(r.label){case 0:return n.items?(t=sL(n.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Eve))]):[3,2];case 1:return i=r.sent(),[2,tQ(pq(i))];case 2:return[2,tQ(sL(n.files).map(function(o){return GT(o)}))]}})})}function tQ(n){return n.filter(function(e){return Ove.indexOf(e.name)===-1})}function sL(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function Eve(n){if(typeof n.webkitGetAsEntry!="function")return nQ(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?mq(e):nQ(n)}function pq(n){return n.reduce(function(e,t){return eQ(eQ([],Kz(e),!1),Kz(Array.isArray(t)?pq(t):[t]),!1)},[])}function nQ(n){var e=n.getAsFile();if(!e)return Promise.reject("".concat(n," is not a File"));var t=GT(e);return Promise.resolve(t)}function xve(n){return FO(this,void 0,void 0,function(){return UO(this,function(e){return[2,n.isDirectory?mq(n):$ve(n)]})})}function mq(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function o(){var a=this;e.readEntries(function(l){return FO(a,void 0,void 0,function(){var u,h,d;return UO(this,function(p){switch(p.label){case 0:if(l.length)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return u=p.sent(),t(u),[3,4];case 3:return h=p.sent(),i(h),[3,4];case 4:return[3,6];case 5:d=Promise.all(l.map(xve)),r.push(d),o(),p.label=6;case 6:return[2]}})})},function(l){i(l)})}o()})}function $ve(n){return FO(this,void 0,void 0,function(){return UO(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var o=GT(r,n.fullPath);t(o)},function(r){i(r)})})]})})}var Cve=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),i=n.name||"",r=(n.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return t.some(function(a){var l=a.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?o===l.replace(/\/.*$/,""):r===l})}return!0};function iQ(n){return Ive(n)||kve(n)||_q(n)||Ave()}function Ave(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kve(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ive(n){if(Array.isArray(n))return oL(n)}function rQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sQ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rQ(Object(t),!0).forEach(function(i){gq(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function gq(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LS(n,e){return Pve(n)||Mve(n,e)||_q(n,e)||Rve()}function Rve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _q(n,e){if(n){if(typeof n=="string")return oL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oL(n,e)}}function oL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Mve(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,a,l;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(u){o=!0,l=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw l}}return i}}function Pve(n){if(Array.isArray(n))return n}var Dve="file-invalid-type",Lve="file-too-large",Nve="file-too-small",Bve="too-many-files",Fve=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Dve,message:"File type must be ".concat(t)}},oQ=function(e){return{code:Lve,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},aQ=function(e){return{code:Nve,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Uve={code:Bve,message:"Too many files"};function Oq(n,e){var t=n.type==="application/x-moz-file"||Cve(n,e);return[t,t?null:Fve(e)]}function vq(n,e,t){if(um(n.size))if(um(e)&&um(t)){if(n.size>t)return[!1,oQ(t)];if(n.size<e)return[!1,aQ(e)]}else{if(um(e)&&n.size<e)return[!1,aQ(e)];if(um(t)&&n.size>t)return[!1,oQ(t)]}return[!0,null]}function um(n){return n!=null}function Gve(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,o=n.multiple,a=n.maxFiles,l=n.validator;return!o&&e.length>1||o&&a>=1&&e.length>a?!1:e.every(function(u){var h=Oq(u,t),d=LS(h,1),p=d[0],m=vq(u,i,r),g=LS(m,1),v=g[0],y=l?l(u):null;return p&&v&&!y})}function oC(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function HE(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function lQ(n){n.preventDefault()}function Wve(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function zve(n){return n.indexOf("Edge/")!==-1}function Qve(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Wve(n)||zve(n)}function nu(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return e.some(function(l){return!oC(i)&&l&&l.apply(void 0,[i].concat(o)),oC(i)})}}function Vve(){return"showOpenFilePicker"in window}function Hve(n){if(um(n)){var e=Object.entries(n).filter(function(t){var i=LS(t,2),r=i[0],o=i[1],a=!0;return yq(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(o)||!o.every(bq))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(t,i){var r=LS(i,2),o=r[0],a=r[1];return sQ(sQ({},t),{},gq({},o,a))},{});return[{description:"Files",accept:e}]}return n}function Xve(n){if(um(n))return Object.entries(n).reduce(function(e,t){var i=LS(t,2),r=i[0],o=i[1];return[].concat(iQ(e),[r],iQ(o))},[]).filter(function(e){return yq(e)||bq(e)}).join(",")}function jve(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Yve(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function yq(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||/\w+\/[-+.\w]+/g.test(n)}function bq(n){return/^.*\.[\w]+$/.test(n)}var Zve=["children"],qve=["open"],Jve=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Kve=["refKey","onChange","onClick"];function eye(n){return iye(n)||nye(n)||Sq(n)||tye()}function tye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function iye(n){if(Array.isArray(n))return aL(n)}function HM(n,e){return oye(n)||sye(n,e)||Sq(n,e)||rye()}function rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sq(n,e){if(n){if(typeof n=="string")return aL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aL(n,e)}}function aL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function sye(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,a,l;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(u){o=!0,l=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw l}}return i}}function oye(n){if(Array.isArray(n))return n}function cQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cQ(Object(t),!0).forEach(function(i){lL(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lL(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aC(n,e){if(n==null)return{};var t=aye(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function aye(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var Z3=q.forwardRef(function(n,e){var t=n.children,i=aC(n,Zve),r=wq(i),o=r.open,a=aC(r,qve);return q.useImperativeHandle(e,function(){return{open:o}},[o]),Cn.createElement(q.Fragment,null,t(Zi(Zi({},a),{},{open:o})))});Z3.displayName="Dropzone";var Tq={disabled:!1,getFilesFromEvent:vve,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Z3.defaultProps=Tq;Z3.propTypes={children:$t.func,accept:$t.objectOf($t.arrayOf($t.string)),multiple:$t.bool,preventDropOnDocument:$t.bool,noClick:$t.bool,noKeyboard:$t.bool,noDrag:$t.bool,noDragEventsBubbling:$t.bool,minSize:$t.number,maxSize:$t.number,maxFiles:$t.number,disabled:$t.bool,getFilesFromEvent:$t.func,onFileDialogCancel:$t.func,onFileDialogOpen:$t.func,useFsAccessApi:$t.bool,autoFocus:$t.bool,onDragEnter:$t.func,onDragLeave:$t.func,onDragOver:$t.func,onDrop:$t.func,onDropAccepted:$t.func,onDropRejected:$t.func,onError:$t.func,validator:$t.func};var cL={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function wq(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Zi(Zi({},Tq),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,o=e.maxSize,a=e.minSize,l=e.multiple,u=e.maxFiles,h=e.onDragEnter,d=e.onDragLeave,p=e.onDragOver,m=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,S=e.onFileDialogOpen,T=e.useFsAccessApi,w=e.autoFocus,E=e.preventDropOnDocument,$=e.noClick,A=e.noKeyboard,I=e.noDrag,D=e.noDragEventsBubbling,R=e.onError,B=e.validator,G=q.useMemo(function(){return Xve(t)},[t]),Z=q.useMemo(function(){return Hve(t)},[t]),N=q.useMemo(function(){return typeof S=="function"?S:uQ},[S]),H=q.useMemo(function(){return typeof y=="function"?y:uQ},[y]),M=q.useRef(null),K=q.useRef(null),re=q.useReducer(lye,cL),ce=HM(re,2),X=ce[0],Q=ce[1],ee=X.isFocused,z=X.isFileDialogActive,L=q.useRef(typeof window<"u"&&window.isSecureContext&&T&&Vve()),le=function(){!L.current&&z&&setTimeout(function(){if(K.current){var me=K.current.files;me.length||(Q({type:"closeDialog"}),H())}},300)};q.useEffect(function(){return window.addEventListener("focus",le,!1),function(){window.removeEventListener("focus",le,!1)}},[K,z,H,L]);var de=q.useRef([]),ie=function(me){M.current&&M.current.contains(me.target)||(me.preventDefault(),de.current=[])};q.useEffect(function(){return E&&(document.addEventListener("dragover",lQ,!1),document.addEventListener("drop",ie,!1)),function(){E&&(document.removeEventListener("dragover",lQ),document.removeEventListener("drop",ie))}},[M,E]),q.useEffect(function(){return!i&&w&&M.current&&M.current.focus(),function(){}},[M,w,i]);var Ce=q.useCallback(function(ue){R?R(ue):console.error(ue)},[R]),ye=q.useCallback(function(ue){ue.preventDefault(),ue.persist(),Ae(ue),de.current=[].concat(eye(de.current),[ue.target]),HE(ue)&&Promise.resolve(r(ue)).then(function(me){if(!(oC(ue)&&!D)){var Ie=me.length,ze=Ie>0&&Gve({files:me,accept:G,minSize:a,maxSize:o,multiple:l,maxFiles:u,validator:B}),Se=Ie>0&&!ze;Q({isDragAccept:ze,isDragReject:Se,isDragActive:!0,type:"setDraggedFiles"}),h&&h(ue)}}).catch(function(me){return Ce(me)})},[r,h,Ce,D,G,a,o,l,u,B]),xe=q.useCallback(function(ue){ue.preventDefault(),ue.persist(),Ae(ue);var me=HE(ue);if(me&&ue.dataTransfer)try{ue.dataTransfer.dropEffect="copy"}catch{}return me&&p&&p(ue),!1},[p,D]),Fe=q.useCallback(function(ue){ue.preventDefault(),ue.persist(),Ae(ue);var me=de.current.filter(function(ze){return M.current&&M.current.contains(ze)}),Ie=me.indexOf(ue.target);Ie!==-1&&me.splice(Ie,1),de.current=me,!(me.length>0)&&(Q({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),HE(ue)&&d&&d(ue))},[M,d,D]),Xe=q.useCallback(function(ue,me){var Ie=[],ze=[];ue.forEach(function(Se){var Je=Oq(Se,G),Ve=HM(Je,2),ot=Ve[0],_e=Ve[1],Le=vq(Se,a,o),We=HM(Le,2),F=We[0],te=We[1],ge=B?B(Se):null;if(ot&&F&&!ge)Ie.push(Se);else{var Me=[_e,te];ge&&(Me=Me.concat(ge)),ze.push({file:Se,errors:Me.filter(function(oe){return oe})})}}),(!l&&Ie.length>1||l&&u>=1&&Ie.length>u)&&(Ie.forEach(function(Se){ze.push({file:Se,errors:[Uve]})}),Ie.splice(0)),Q({acceptedFiles:Ie,fileRejections:ze,type:"setFiles"}),m&&m(Ie,ze,me),ze.length>0&&v&&v(ze,me),Ie.length>0&&g&&g(Ie,me)},[Q,l,G,a,o,u,m,g,v,B]),Ue=q.useCallback(function(ue){ue.preventDefault(),ue.persist(),Ae(ue),de.current=[],HE(ue)&&Promise.resolve(r(ue)).then(function(me){oC(ue)&&!D||Xe(me,ue)}).catch(function(me){return Ce(me)}),Q({type:"reset"})},[r,Xe,Ce,D]),we=q.useCallback(function(){if(L.current){Q({type:"openDialog"}),N();var ue={multiple:l,types:Z};window.showOpenFilePicker(ue).then(function(me){return r(me)}).then(function(me){Xe(me,null),Q({type:"closeDialog"})}).catch(function(me){jve(me)?(H(me),Q({type:"closeDialog"})):Yve(me)?(L.current=!1,K.current?(K.current.value=null,K.current.click()):Ce(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ce(me)});return}K.current&&(Q({type:"openDialog"}),N(),K.current.value=null,K.current.click())},[Q,N,H,T,Xe,Ce,Z,l]),Ge=q.useCallback(function(ue){!M.current||!M.current.isEqualNode(ue.target)||(ue.key===" "||ue.key==="Enter"||ue.keyCode===32||ue.keyCode===13)&&(ue.preventDefault(),we())},[M,we]),W=q.useCallback(function(){Q({type:"focus"})},[]),Ee=q.useCallback(function(){Q({type:"blur"})},[]),Oe=q.useCallback(function(){$||(Qve()?setTimeout(we,0):we())},[$,we]),ae=function(me){return i?null:me},ne=function(me){return A?null:ae(me)},pe=function(me){return I?null:ae(me)},Ae=function(me){D&&me.stopPropagation()},Te=q.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=ue.refKey,Ie=me===void 0?"ref":me,ze=ue.role,Se=ue.onKeyDown,Je=ue.onFocus,Ve=ue.onBlur,ot=ue.onClick,_e=ue.onDragEnter,Le=ue.onDragOver,We=ue.onDragLeave,F=ue.onDrop,te=aC(ue,Jve);return Zi(Zi(lL({onKeyDown:ne(nu(Se,Ge)),onFocus:ne(nu(Je,W)),onBlur:ne(nu(Ve,Ee)),onClick:ae(nu(ot,Oe)),onDragEnter:pe(nu(_e,ye)),onDragOver:pe(nu(Le,xe)),onDragLeave:pe(nu(We,Fe)),onDrop:pe(nu(F,Ue)),role:typeof ze=="string"&&ze!==""?ze:"presentation"},Ie,M),!i&&!A?{tabIndex:0}:{}),te)}},[M,Ge,W,Ee,Oe,ye,xe,Fe,Ue,A,I,i]),j=q.useCallback(function(ue){ue.stopPropagation()},[]),Y=q.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=ue.refKey,Ie=me===void 0?"ref":me,ze=ue.onChange,Se=ue.onClick,Je=aC(ue,Kve),Ve=lL({accept:G,multiple:l,type:"file",style:{display:"none"},onChange:ae(nu(ze,Ue)),onClick:ae(nu(Se,j)),tabIndex:-1},Ie,K);return Zi(Zi({},Ve),Je)}},[K,t,l,Ue,i]);return Zi(Zi({},X),{},{isFocused:ee&&!i,getRootProps:Te,getInputProps:Y,rootRef:M,inputRef:K,open:ae(we)})}function lye(n,e){switch(e.type){case"focus":return Zi(Zi({},n),{},{isFocused:!0});case"blur":return Zi(Zi({},n),{},{isFocused:!1});case"openDialog":return Zi(Zi({},cL),{},{isFileDialogActive:!0});case"closeDialog":return Zi(Zi({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Zi(Zi({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Zi(Zi({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Zi({},cL);default:return n}}function uQ(){}const Eq=({onClick:n})=>se(Mo,{color:"gray",onClick:n,children:"Cancel"}),cye=({open:n,onClose:e,onFileUpload:t,header:i})=>{const r=q.useCallback(h=>{h.forEach(d=>{const p=new FileReader;p.onabort=()=>console.log("file reading was aborted!"),p.onerror=()=>console.log("file reading failed!"),p.onload=()=>{t(p.result),e()},p.readAsBinaryString(d)})},[]),{getRootProps:o,getInputProps:a,isDragActive:l,inputRef:u}=wq({onDrop:h=>r(h),multiple:!1,onDragEnter:h=>{},onDragLeave:h=>{},onDragOver:h=>{},accept:{"application/json":[".robart"]}});return dt(Lr,{show:n,onClose:e,children:[se(Lr.Header,{children:i}),se(Lr.Body,{children:dt("div",{className:"border-1 flex justify-center border-gray-500 bg-gray-50 p-5 py-14 text-lg shadow-lg",...o(),children:[se("input",{ref:u,...a()}),se("p",{children:"Drag & drop a project file here, or click to select a file"})]})}),se(Lr.Footer,{children:se(Eq,{onClick:e})})]})},zh=gT()((n,e)=>({settingsModalOpen:!1,curveEditorOpen:!1,openSimulation:!1,robotManagerModalOpen:!1,toggleSettingsModal:()=>n({settingsModalOpen:!e().settingsModalOpen}),toggleCurveEditor:()=>n({curveEditorOpen:!e().curveEditorOpen}),toggleRobotManager:()=>{n({robotManagerModalOpen:!e().robotManagerModalOpen})},toggleSimulation:()=>{n({openSimulation:!e().openSimulation})}})),uye=({open:n,onCancel:e,onConfirm:t,header:i,children:r})=>dt(Lr,{show:n,onClose:e,children:[se(Lr.Header,{children:i}),se(Lr.Body,{children:r}),dt(Lr.Footer,{children:[se(Mo,{color:"gray",onClick:e,children:"Cancel"}),se(Mo,{color:"failure",onClick:t,children:"Confirm"})]})]});var xq={exports:{}},Og={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Og.ConcurrentRoot=1;Og.ContinuousEventPriority=4;Og.DefaultEventPriority=16;Og.DiscreteEventPriority=1;Og.IdleEventPriority=536870912;Og.LegacyRoot=0;xq.exports=Og;var $0=xq.exports;function hye(n){let e;const t=new Set,i=(h,d)=>{const p=typeof h=="function"?h(e):h;if(p!==e){const m=e;e=d?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,o=(h,d=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=d(e);function g(){const v=d(e);if(!p(m,v)){const y=m;h(m=v,y)}}return t.add(g),()=>t.delete(g)},u={setState:i,getState:r,subscribe:(h,d,p)=>d||p?o(h,d,p):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=n(i,r,u),u}const dye=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hQ=dye?q.useEffect:q.useLayoutEffect;function $q(n){const e=typeof n=="function"?hye(n):n,t=(i=e.getState,r=Object.is)=>{const[,o]=q.useReducer(S=>S+1,0),a=e.getState(),l=q.useRef(a),u=q.useRef(i),h=q.useRef(r),d=q.useRef(!1),p=q.useRef();p.current===void 0&&(p.current=i(a));let m,g=!1;(l.current!==a||u.current!==i||h.current!==r||d.current)&&(m=i(a),g=!r(p.current,m)),hQ(()=>{g&&(p.current=m),l.current=a,u.current=i,h.current=r,d.current=!1});const v=q.useRef(a);hQ(()=>{const S=()=>{try{const w=e.getState(),E=u.current(w);h.current(p.current,E)||(l.current=w,p.current=E,o())}catch{d.current=!0,o()}},T=e.subscribe(S);return e.getState()!==v.current&&S(),T},[]);const y=g?m:p.current;return q.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var Cq={exports:{}},XM={exports:{}},jM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dQ;function fye(){return dQ||(dQ=1,function(n){function e(X,Q){var ee=X.length;X.push(Q);e:for(;0<ee;){var z=ee-1>>>1,L=X[z];if(0<r(L,Q))X[z]=Q,X[ee]=L,ee=z;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var Q=X[0],ee=X.pop();if(ee!==Q){X[0]=ee;e:for(var z=0,L=X.length,le=L>>>1;z<le;){var de=2*(z+1)-1,ie=X[de],Ce=de+1,ye=X[Ce];if(0>r(ie,ee))Ce<L&&0>r(ye,ie)?(X[z]=ye,X[Ce]=ee,z=Ce):(X[z]=ie,X[de]=ee,z=de);else if(Ce<L&&0>r(ye,ee))X[z]=ye,X[Ce]=ee,z=Ce;else break e}}return Q}function r(X,Q){var ee=X.sortIndex-Q.sortIndex;return ee!==0?ee:X.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,g=!1,v=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Q=t(h);Q!==null;){if(Q.callback===null)i(h);else if(Q.startTime<=X)i(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=t(h)}}function $(X){if(y=!1,E(X),!v)if(t(u)!==null)v=!0,re(A);else{var Q=t(h);Q!==null&&ce($,Q.startTime-X)}}function A(X,Q){v=!1,y&&(y=!1,T(R),R=-1),g=!0;var ee=m;try{for(E(Q),p=t(u);p!==null&&(!(p.expirationTime>Q)||X&&!Z());){var z=p.callback;if(typeof z=="function"){p.callback=null,m=p.priorityLevel;var L=z(p.expirationTime<=Q);Q=n.unstable_now(),typeof L=="function"?p.callback=L:p===t(u)&&i(u),E(Q)}else i(u);p=t(u)}if(p!==null)var le=!0;else{var de=t(h);de!==null&&ce($,de.startTime-Q),le=!1}return le}finally{p=null,m=ee,g=!1}}var I=!1,D=null,R=-1,B=5,G=-1;function Z(){return!(n.unstable_now()-G<B)}function N(){if(D!==null){var X=n.unstable_now();G=X;var Q=!0;try{Q=D(!0,X)}finally{Q?H():(I=!1,D=null)}}else I=!1}var H;if(typeof w=="function")H=function(){w(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,K=M.port2;M.port1.onmessage=N,H=function(){K.postMessage(null)}}else H=function(){S(N,0)};function re(X){D=X,I||(I=!0,H())}function ce(X,Q){R=S(function(){X(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,re(A))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(X){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ee=m;m=Q;try{return X()}finally{m=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,Q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=m;m=X;try{return Q()}finally{m=ee}},n.unstable_scheduleCallback=function(X,Q,ee){var z=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?z+ee:z):ee=z,X){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,X={id:d++,callback:Q,priorityLevel:X,startTime:ee,expirationTime:L,sortIndex:-1},ee>z?(X.sortIndex=ee,e(h,X),t(u)===null&&X===t(h)&&(y?(T(R),R=-1):y=!0,ce($,ee-z))):(X.sortIndex=L,e(u,X),v||g||(v=!0,re(A))),X},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(X){var Q=m;return function(){var ee=m;m=Q;try{return X.apply(this,arguments)}finally{m=ee}}}}(jM)),jM}var fQ;function pye(){return fQ||(fQ=1,XM.exports=fye()),XM.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mye=function(e){var t={},i=q,r=pye(),o=Object.assign;function a(O){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+O,C=1;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+O+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),A=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}function D(O){if(O==null)return null;if(typeof O=="function")return O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case d:return"Fragment";case h:return"Portal";case m:return"Profiler";case p:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList"}if(typeof O=="object")switch(O.$$typeof){case v:return(O.displayName||"Context")+".Consumer";case g:return(O._context.displayName||"Context")+".Provider";case y:var b=O.render;return O=O.displayName,O||(O=b.displayName||b.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case w:return b=O.displayName||null,b!==null?b:D(O.type)||"Memo";case E:b=O._payload,O=O._init;try{return D(O(b))}catch{}}return null}function R(O){var b=O.type;switch(O.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return O=b.render,O=O.displayName||O.name||"",b.displayName||(O!==""?"ForwardRef("+O+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(b);case 8:return b===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function B(O){var b=O,C=O;if(O.alternate)for(;b.return;)b=b.return;else{O=b;do b=O,b.flags&4098&&(C=b.return),O=b.return;while(O)}return b.tag===3?C:null}function G(O){if(B(O)!==O)throw Error(a(188))}function Z(O){var b=O.alternate;if(!b){if(b=B(O),b===null)throw Error(a(188));return b!==O?null:O}for(var C=O,k=b;;){var U=C.return;if(U===null)break;var V=U.alternate;if(V===null){if(k=U.return,k!==null){C=k;continue}break}if(U.child===V.child){for(V=U.child;V;){if(V===C)return G(U),O;if(V===k)return G(U),b;V=V.sibling}throw Error(a(188))}if(C.return!==k.return)C=U,k=V;else{for(var ve=!1,De=U.child;De;){if(De===C){ve=!0,C=U,k=V;break}if(De===k){ve=!0,k=U,C=V;break}De=De.sibling}if(!ve){for(De=V.child;De;){if(De===C){ve=!0,C=V,k=U;break}if(De===k){ve=!0,k=V,C=U;break}De=De.sibling}if(!ve)throw Error(a(189))}}if(C.alternate!==k)throw Error(a(190))}if(C.tag!==3)throw Error(a(188));return C.stateNode.current===C?O:b}function N(O){return O=Z(O),O!==null?H(O):null}function H(O){if(O.tag===5||O.tag===6)return O;for(O=O.child;O!==null;){var b=H(O);if(b!==null)return b;O=O.sibling}return null}function M(O){if(O.tag===5||O.tag===6)return O;for(O=O.child;O!==null;){if(O.tag!==4){var b=M(O);if(b!==null)return b}O=O.sibling}return null}var K=Array.isArray,re=e.getPublicInstance,ce=e.getRootHostContext,X=e.getChildHostContext,Q=e.prepareForCommit,ee=e.resetAfterCommit,z=e.createInstance,L=e.appendInitialChild,le=e.finalizeInitialChildren,de=e.prepareUpdate,ie=e.shouldSetTextContent,Ce=e.createTextInstance,ye=e.scheduleTimeout,xe=e.cancelTimeout,Fe=e.noTimeout,Xe=e.isPrimaryRenderer,Ue=e.supportsMutation,we=e.supportsPersistence,Ge=e.supportsHydration,W=e.getInstanceFromNode,Ee=e.preparePortalMount,Oe=e.getCurrentEventPriority,ae=e.detachDeletedInstance,ne=e.supportsMicrotasks,pe=e.scheduleMicrotask,Ae=e.supportsTestSelectors,Te=e.findFiberRoot,j=e.getBoundingRect,Y=e.getTextContent,ue=e.isHiddenSubtree,me=e.matchAccessibilityRole,Ie=e.setFocusIfFocusable,ze=e.setupIntersectionObserver,Se=e.appendChild,Je=e.appendChildToContainer,Ve=e.commitTextUpdate,ot=e.commitMount,_e=e.commitUpdate,Le=e.insertBefore,We=e.insertInContainerBefore,F=e.removeChild,te=e.removeChildFromContainer,ge=e.resetTextContent,Me=e.hideInstance,oe=e.hideTextInstance,Pe=e.unhideInstance,et=e.unhideTextInstance,mt=e.clearContainer,bt=e.cloneInstance,Tn=e.createContainerChildSet,wn=e.appendChildToContainerChildSet,Gn=e.finalizeContainerChildren,vn=e.replaceContainerChildren,Wn=e.cloneHiddenInstance,on=e.cloneHiddenTextInstance,xn=e.canHydrateInstance,Ss=e.canHydrateTextInstance,Bt=e.canHydrateSuspenseInstance,zn=e.isSuspenseInstancePending,fe=e.isSuspenseInstanceFallback,Qe=e.registerSuspenseInstanceRetry,Ye=e.getNextHydratableSibling,Ne=e.getFirstHydratableChild,qe=e.getFirstHydratableChildWithinContainer,Pt=e.getFirstHydratableChildWithinSuspenseInstance,At=e.hydrateInstance,Zt=e.hydrateTextInstance,Jt=e.hydrateSuspenseInstance,tn=e.getNextHydratableInstanceAfterSuspenseInstance,qt=e.commitHydratedContainer,at=e.commitHydratedSuspenseInstance,fi=e.clearSuspenseBoundary,mr=e.clearSuspenseBoundaryFromContainer,gr=e.shouldDeleteUnhydratedTailInstances,Ts=e.didNotMatchHydratedContainerTextInstance,cn=e.didNotMatchHydratedTextInstance,rt;function Dn(O){if(rt===void 0)try{throw Error()}catch(C){var b=C.stack.trim().match(/\n( *(at )?)/);rt=b&&b[1]||""}return`
`+rt+O}var nn=!1;function Et(O,b){if(!O||nn)return"";nn=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(ft){var k=ft}Reflect.construct(O,[],b)}else{try{b.call()}catch(ft){k=ft}O.call(b.prototype)}else{try{throw Error()}catch(ft){k=ft}O()}}catch(ft){if(ft&&k&&typeof ft.stack=="string"){for(var U=ft.stack.split(`
`),V=k.stack.split(`
`),ve=U.length-1,De=V.length-1;1<=ve&&0<=De&&U[ve]!==V[De];)De--;for(;1<=ve&&0<=De;ve--,De--)if(U[ve]!==V[De]){if(ve!==1||De!==1)do if(ve--,De--,0>De||U[ve]!==V[De]){var Ke=`
`+U[ve].replace(" at new "," at ");return O.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",O.displayName)),Ke}while(1<=ve&&0<=De);break}}}finally{nn=!1,Error.prepareStackTrace=C}return(O=O?O.displayName||O.name:"")?Dn(O):""}var Fu=Object.prototype.hasOwnProperty,is=[],rs=-1;function Jn(O){return{current:O}}function lt(O){0>rs||(O.current=is[rs],is[rs]=null,rs--)}function En(O,b){rs++,is[rs]=O.current,O.current=b}var ai={},pi=Jn(ai),_r=Jn(!1),rn=ai;function Wr(O,b){var C=O.type.contextTypes;if(!C)return ai;var k=O.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===b)return k.__reactInternalMemoizedMaskedChildContext;var U={},V;for(V in C)U[V]=b[V];return k&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=b,O.__reactInternalMemoizedMaskedChildContext=U),U}function Pi(O){return O=O.childContextTypes,O!=null}function Dl(){lt(_r),lt(pi)}function Ll(O,b,C){if(pi.current!==ai)throw Error(a(168));En(pi,b),En(_r,C)}function ud(O,b,C){var k=O.stateNode;if(b=b.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var U in k)if(!(U in b))throw Error(a(108,R(O)||"Unknown",U));return o({},C,k)}function Go(O){return O=(O=O.stateNode)&&O.__reactInternalMemoizedMergedChildContext||ai,rn=pi.current,En(pi,O),En(_r,_r.current),!0}function Tg(O,b,C){var k=O.stateNode;if(!k)throw Error(a(169));C?(O=ud(O,b,rn),k.__reactInternalMemoizedMergedChildContext=O,lt(_r),lt(pi),En(pi,O)):lt(_r),En(_r,C)}var ss=Math.clz32?Math.clz32:hd,Ac=Math.log,Uu=Math.LN2;function hd(O){return O>>>=0,O===0?32:31-(Ac(O)/Uu|0)|0}var Nl=64,pa=4194304;function Ja(O){switch(O&-O){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return O&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return O&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return O}}function kc(O,b){var C=O.pendingLanes;if(C===0)return 0;var k=0,U=O.suspendedLanes,V=O.pingedLanes,ve=C&268435455;if(ve!==0){var De=ve&~U;De!==0?k=Ja(De):(V&=ve,V!==0&&(k=Ja(V)))}else ve=C&~U,ve!==0?k=Ja(ve):V!==0&&(k=Ja(V));if(k===0)return 0;if(b!==0&&b!==k&&!(b&U)&&(U=k&-k,V=b&-b,U>=V||U===16&&(V&4194240)!==0))return b;if(k&4&&(k|=C&16),b=O.entangledLanes,b!==0)for(O=O.entanglements,b&=k;0<b;)C=31-ss(b),U=1<<C,k|=O[C],b&=~U;return k}function wg(O,b){switch(O){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gu(O,b){for(var C=O.suspendedLanes,k=O.pingedLanes,U=O.expirationTimes,V=O.pendingLanes;0<V;){var ve=31-ss(V),De=1<<ve,Ke=U[ve];Ke===-1?(!(De&C)||De&k)&&(U[ve]=wg(De,b)):Ke<=b&&(O.expiredLanes|=De),V&=~De}}function mo(O){return O=O.pendingLanes&-1073741825,O!==0?O:O&1073741824?1073741824:0}function Wu(O){for(var b=[],C=0;31>C;C++)b.push(O);return b}function Wo(O,b,C){O.pendingLanes|=b,b!==536870912&&(O.suspendedLanes=0,O.pingedLanes=0),O=O.eventTimes,b=31-ss(b),O[b]=C}function Ic(O,b){var C=O.pendingLanes&~b;O.pendingLanes=b,O.suspendedLanes=0,O.pingedLanes=0,O.expiredLanes&=b,O.mutableReadLanes&=b,O.entangledLanes&=b,b=O.entanglements;var k=O.eventTimes;for(O=O.expirationTimes;0<C;){var U=31-ss(C),V=1<<U;b[U]=0,k[U]=-1,O[U]=-1,C&=~V}}function ma(O,b){var C=O.entangledLanes|=b;for(O=O.entanglements;C;){var k=31-ss(C),U=1<<k;U&b|O[k]&b&&(O[k]|=b),C&=~U}}var fn=0;function Rc(O){return O&=-O,1<O?4<O?O&268435455?16:536870912:4:1}var zo=r.unstable_scheduleCallback,dd=r.unstable_cancelCallback,zu=r.unstable_shouldYield,Ys=r.unstable_requestPaint,li=r.unstable_now,xr=r.unstable_ImmediatePriority,Qu=r.unstable_UserBlockingPriority,os=r.unstable_NormalPriority,Vu=r.unstable_IdlePriority,Ka=null,Zs=null;function qf(O){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Ka,O,void 0,(O.current.flags&128)===128)}catch{}}function Hu(O,b){return O===b&&(O!==0||1/O===1/b)||O!==O&&b!==b}var as=typeof Object.is=="function"?Object.is:Hu,ws=null,el=!1,$r=!1;function fd(O){ws===null?ws=[O]:ws.push(O)}function ls(O){el=!0,fd(O)}function qs(){if(!$r&&ws!==null){$r=!0;var O=0,b=fn;try{var C=ws;for(fn=1;O<C.length;O++){var k=C[O];do k=k(!0);while(k!==null)}ws=null,el=!1}catch(U){throw ws!==null&&(ws=ws.slice(O+1)),zo(xr,qs),U}finally{fn=b,$r=!1}}return null}var Gi=l.ReactCurrentBatchConfig;function Xu(O,b){if(as(O,b))return!0;if(typeof O!="object"||O===null||typeof b!="object"||b===null)return!1;var C=Object.keys(O),k=Object.keys(b);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var U=C[k];if(!Fu.call(b,U)||!as(O[U],b[U]))return!1}return!0}function ga(O){switch(O.tag){case 5:return Dn(O.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return O=Et(O.type,!1),O;case 11:return O=Et(O.type.render,!1),O;case 1:return O=Et(O.type,!0),O;default:return""}}function cs(O,b){if(O&&O.defaultProps){b=o({},b),O=O.defaultProps;for(var C in O)b[C]===void 0&&(b[C]=O[C]);return b}return b}var bi=Jn(null),ju=null,_a=null,Mc=null;function pd(){Mc=_a=ju=null}function Eg(O,b,C){Xe?(En(bi,b._currentValue),b._currentValue=C):(En(bi,b._currentValue2),b._currentValue2=C)}function tl(O){var b=bi.current;lt(bi),Xe?O._currentValue=b:O._currentValue2=b}function Wi(O,b,C){for(;O!==null;){var k=O.alternate;if((O.childLanes&b)!==b?(O.childLanes|=b,k!==null&&(k.childLanes|=b)):k!==null&&(k.childLanes&b)!==b&&(k.childLanes|=b),O===C)break;O=O.return}}function Cr(O,b){ju=O,Mc=_a=null,O=O.dependencies,O!==null&&O.firstContext!==null&&(O.lanes&b&&(bo=!0),O.firstContext=null)}function ii(O){var b=Xe?O._currentValue:O._currentValue2;if(Mc!==O)if(O={context:O,memoizedValue:b,next:null},_a===null){if(ju===null)throw Error(a(308));_a=O,ju.dependencies={lanes:0,firstContext:O}}else _a=_a.next=O;return b}var zi=null,Oa=!1;function QO(O){O.updateQueue={baseState:O.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o1(O,b){O=O.updateQueue,b.updateQueue===O&&(b.updateQueue={baseState:O.baseState,firstBaseUpdate:O.firstBaseUpdate,lastBaseUpdate:O.lastBaseUpdate,shared:O.shared,effects:O.effects})}function Qo(O,b){return{eventTime:O,lane:b,tag:0,payload:null,callback:null,next:null}}function Bl(O,b){var C=O.updateQueue;C!==null&&(C=C.shared,Hi!==null&&O.mode&1&&!(yn&2)?(O=C.interleaved,O===null?(b.next=b,zi===null?zi=[C]:zi.push(C)):(b.next=O.next,O.next=b),C.interleaved=b):(O=C.pending,O===null?b.next=b:(b.next=O.next,O.next=b),C.pending=b))}function Jf(O,b,C){if(b=b.updateQueue,b!==null&&(b=b.shared,(C&4194240)!==0)){var k=b.lanes;k&=O.pendingLanes,C|=k,b.lanes=C,ma(O,C)}}function VO(O,b){var C=O.updateQueue,k=O.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var U=null,V=null;if(C=C.firstBaseUpdate,C!==null){do{var ve={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};V===null?U=V=ve:V=V.next=ve,C=C.next}while(C!==null);V===null?U=V=b:V=V.next=b}else U=V=b;C={baseState:k.baseState,firstBaseUpdate:U,lastBaseUpdate:V,shared:k.shared,effects:k.effects},O.updateQueue=C;return}O=C.lastBaseUpdate,O===null?C.firstBaseUpdate=b:O.next=b,C.lastBaseUpdate=b}function xg(O,b,C,k){var U=O.updateQueue;Oa=!1;var V=U.firstBaseUpdate,ve=U.lastBaseUpdate,De=U.shared.pending;if(De!==null){U.shared.pending=null;var Ke=De,ft=Ke.next;Ke.next=null,ve===null?V=ft:ve.next=ft,ve=Ke;var It=O.alternate;It!==null&&(It=It.updateQueue,De=It.lastBaseUpdate,De!==ve&&(De===null?It.firstBaseUpdate=ft:De.next=ft,It.lastBaseUpdate=Ke))}if(V!==null){var an=U.baseState;ve=0,It=ft=Ke=null,De=V;do{var Ht=De.lane,ti=De.eventTime;if((k&Ht)===Ht){It!==null&&(It=It.next={eventTime:ti,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var zt=O,kr=De;switch(Ht=b,ti=C,kr.tag){case 1:if(zt=kr.payload,typeof zt=="function"){an=zt.call(ti,an,Ht);break e}an=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=kr.payload,Ht=typeof zt=="function"?zt.call(ti,an,Ht):zt,Ht==null)break e;an=o({},an,Ht);break e;case 2:Oa=!0}}De.callback!==null&&De.lane!==0&&(O.flags|=64,Ht=U.effects,Ht===null?U.effects=[De]:Ht.push(De))}else ti={eventTime:ti,lane:Ht,tag:De.tag,payload:De.payload,callback:De.callback,next:null},It===null?(ft=It=ti,Ke=an):It=It.next=ti,ve|=Ht;if(De=De.next,De===null){if(De=U.shared.pending,De===null)break;Ht=De,De=Ht.next,Ht.next=null,U.lastBaseUpdate=Ht,U.shared.pending=null}}while(1);if(It===null&&(Ke=an),U.baseState=Ke,U.firstBaseUpdate=ft,U.lastBaseUpdate=It,b=U.shared.interleaved,b!==null){U=b;do ve|=U.lane,U=U.next;while(U!==b)}else V===null&&(U.shared.lanes=0);xd|=ve,O.lanes=ve,O.memoizedState=an}}function $g(O,b,C){if(O=b.effects,b.effects=null,O!==null)for(b=0;b<O.length;b++){var k=O[b],U=k.callback;if(U!==null){if(k.callback=null,k=C,typeof U!="function")throw Error(a(191,U));U.call(k)}}}var HO=new i.Component().refs;function XO(O,b,C,k){b=O.memoizedState,C=C(k,b),C=C==null?b:o({},b,C),O.memoizedState=C,O.lanes===0&&(O.updateQueue.baseState=C)}var Kf={isMounted:function(O){return(O=O._reactInternals)?B(O)===O:!1},enqueueSetState:function(O,b,C){O=O._reactInternals;var k=Vr(),U=Fc(O),V=Qo(k,U);V.payload=b,C!=null&&(V.callback=C),Bl(O,V),b=jo(O,U,k),b!==null&&Jf(b,O,U)},enqueueReplaceState:function(O,b,C){O=O._reactInternals;var k=Vr(),U=Fc(O),V=Qo(k,U);V.tag=1,V.payload=b,C!=null&&(V.callback=C),Bl(O,V),b=jo(O,U,k),b!==null&&Jf(b,O,U)},enqueueForceUpdate:function(O,b){O=O._reactInternals;var C=Vr(),k=Fc(O),U=Qo(C,k);U.tag=2,b!=null&&(U.callback=b),Bl(O,U),b=jo(O,k,C),b!==null&&Jf(b,O,k)}};function a1(O,b,C,k,U,V,ve){return O=O.stateNode,typeof O.shouldComponentUpdate=="function"?O.shouldComponentUpdate(k,V,ve):b.prototype&&b.prototype.isPureReactComponent?!Xu(C,k)||!Xu(U,V):!0}function l1(O,b,C){var k=!1,U=ai,V=b.contextType;return typeof V=="object"&&V!==null?V=ii(V):(U=Pi(b)?rn:pi.current,k=b.contextTypes,V=(k=k!=null)?Wr(O,U):ai),b=new b(C,V),O.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Kf,O.stateNode=b,b._reactInternals=O,k&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=U,O.__reactInternalMemoizedMaskedChildContext=V),b}function c1(O,b,C,k){O=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(C,k),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(C,k),b.state!==O&&Kf.enqueueReplaceState(b,b.state,null)}function jO(O,b,C,k){var U=O.stateNode;U.props=C,U.state=O.memoizedState,U.refs=HO,QO(O);var V=b.contextType;typeof V=="object"&&V!==null?U.context=ii(V):(V=Pi(b)?rn:pi.current,U.context=Wr(O,V)),U.state=O.memoizedState,V=b.getDerivedStateFromProps,typeof V=="function"&&(XO(O,b,V,C),U.state=O.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(b=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),b!==U.state&&Kf.enqueueReplaceState(U,U.state,null),xg(O,C,U,k),U.state=O.memoizedState),typeof U.componentDidMount=="function"&&(O.flags|=4194308)}var nl=[],Yu=0,ep=null,Zu=0,Es=[],Vo=0,qu=null,il=1,rl="";function go(O,b){nl[Yu++]=Zu,nl[Yu++]=ep,ep=O,Zu=b}function YO(O,b,C){Es[Vo++]=il,Es[Vo++]=rl,Es[Vo++]=qu,qu=O;var k=il;O=rl;var U=32-ss(k)-1;k&=~(1<<U),C+=1;var V=32-ss(b)+U;if(30<V){var ve=U-U%5;V=(k&(1<<ve)-1).toString(32),k>>=ve,U-=ve,il=1<<32-ss(b)+U|C<<U|k,rl=V+O}else il=1<<V|C<<U|k,rl=O}function Cg(O){O.return!==null&&(go(O,1),YO(O,1,0))}function ZO(O){for(;O===ep;)ep=nl[--Yu],nl[Yu]=null,Zu=nl[--Yu],nl[Yu]=null;for(;O===qu;)qu=Es[--Vo],Es[Vo]=null,rl=Es[--Vo],Es[Vo]=null,il=Es[--Vo],Es[Vo]=null}var _o=null,Oo=null,mi=!1,md=!1,va=null;function qO(O,b){var C=Yo(5,null,null,0);C.elementType="DELETED",C.stateNode=b,C.return=O,b=O.deletions,b===null?(O.deletions=[C],O.flags|=16):b.push(C)}function u1(O,b){switch(O.tag){case 5:return b=xn(b,O.type,O.pendingProps),b!==null?(O.stateNode=b,_o=O,Oo=Ne(b),!0):!1;case 6:return b=Ss(b,O.pendingProps),b!==null?(O.stateNode=b,_o=O,Oo=null,!0):!1;case 13:if(b=Bt(b),b!==null){var C=qu!==null?{id:il,overflow:rl}:null;return O.memoizedState={dehydrated:b,treeContext:C,retryLane:1073741824},C=Yo(18,null,null,0),C.stateNode=b,C.return=O,O.child=C,_o=O,Oo=null,!0}return!1;default:return!1}}function Fl(O){return(O.mode&1)!==0&&(O.flags&128)===0}function gd(O){if(mi){var b=Oo;if(b){var C=b;if(!u1(O,b)){if(Fl(O))throw Error(a(418));b=Ye(C);var k=_o;b&&u1(O,b)?qO(k,C):(O.flags=O.flags&-4097|2,mi=!1,_o=O)}}else{if(Fl(O))throw Error(a(418));O.flags=O.flags&-4097|2,mi=!1,_o=O}}}function Ag(O){for(O=O.return;O!==null&&O.tag!==5&&O.tag!==3&&O.tag!==13;)O=O.return;_o=O}function Ju(O){if(!Ge||O!==_o)return!1;if(!mi)return Ag(O),mi=!0,!1;if(O.tag!==3&&(O.tag!==5||gr(O.type)&&!ie(O.type,O.memoizedProps))){var b=Oo;if(b){if(Fl(O)){for(O=Oo;O;)O=Ye(O);throw Error(a(418))}for(;b;)qO(O,b),b=Ye(b)}}if(Ag(O),O.tag===13){if(!Ge)throw Error(a(316));if(O=O.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(a(317));Oo=tn(O)}else Oo=_o?Ye(O.stateNode):null;return!0}function ya(){Ge&&(Oo=_o=null,md=mi=!1)}function tp(O){va===null?va=[O]:va.push(O)}function Ku(O,b,C){if(O=C.ref,O!==null&&typeof O!="function"&&typeof O!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(a(309));var k=C.stateNode}if(!k)throw Error(a(147,O));var U=k,V=""+O;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===V?b.ref:(b=function(ve){var De=U.refs;De===HO&&(De=U.refs={}),ve===null?delete De[V]:De[V]=ve},b._stringRef=V,b)}if(typeof O!="string")throw Error(a(284));if(!C._owner)throw Error(a(290,O))}return O}function _d(O,b){throw O=Object.prototype.toString.call(b),Error(a(31,O==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":O))}function gi(O){var b=O._init;return b(O._payload)}function np(O){function b(je,Be){if(O){var Ze=je.deletions;Ze===null?(je.deletions=[Be],je.flags|=16):Ze.push(Be)}}function C(je,Be){if(!O)return null;for(;Be!==null;)b(je,Be),Be=Be.sibling;return null}function k(je,Be){for(je=new Map;Be!==null;)Be.key!==null?je.set(Be.key,Be):je.set(Be.index,Be),Be=Be.sibling;return je}function U(je,Be){return je=zc(je,Be),je.index=0,je.sibling=null,je}function V(je,Be,Ze){return je.index=Ze,O?(Ze=je.alternate,Ze!==null?(Ze=Ze.index,Ze<Be?(je.flags|=2,Be):Ze):(je.flags|=2,Be)):(je.flags|=1048576,Be)}function ve(je){return O&&je.alternate===null&&(je.flags|=2),je}function De(je,Be,Ze,gt){return Be===null||Be.tag!==6?(Be=fs(Ze,je.mode,gt),Be.return=je,Be):(Be=U(Be,Ze),Be.return=je,Be)}function Ke(je,Be,Ze,gt){var Nt=Ze.type;return Nt===d?It(je,Be,Ze.props.children,gt,Ze.key):Be!==null&&(Be.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&gi(Nt)===Be.type)?(gt=U(Be,Ze.props),gt.ref=Ku(je,Be,Ze),gt.return=je,gt):(gt=i_(Ze.type,Ze.key,Ze.props,null,je.mode,gt),gt.ref=Ku(je,Be,Ze),gt.return=je,gt)}function ft(je,Be,Ze,gt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ze.containerInfo||Be.stateNode.implementation!==Ze.implementation?(Be=Xi(Ze,je.mode,gt),Be.return=je,Be):(Be=U(Be,Ze.children||[]),Be.return=je,Be)}function It(je,Be,Ze,gt,Nt){return Be===null||Be.tag!==7?(Be=ch(Ze,je.mode,gt,Nt),Be.return=je,Be):(Be=U(Be,Ze),Be.return=je,Be)}function an(je,Be,Ze){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=fs(""+Be,je.mode,Ze),Be.return=je,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case u:return Ze=i_(Be.type,Be.key,Be.props,null,je.mode,Ze),Ze.ref=Ku(je,null,Be),Ze.return=je,Ze;case h:return Be=Xi(Be,je.mode,Ze),Be.return=je,Be;case E:var gt=Be._init;return an(je,gt(Be._payload),Ze)}if(K(Be)||I(Be))return Be=ch(Be,je.mode,Ze,null),Be.return=je,Be;_d(je,Be)}return null}function Ht(je,Be,Ze,gt){var Nt=Be!==null?Be.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Nt!==null?null:De(je,Be,""+Ze,gt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case u:return Ze.key===Nt?Ke(je,Be,Ze,gt):null;case h:return Ze.key===Nt?ft(je,Be,Ze,gt):null;case E:return Nt=Ze._init,Ht(je,Be,Nt(Ze._payload),gt)}if(K(Ze)||I(Ze))return Nt!==null?null:It(je,Be,Ze,gt,null);_d(je,Ze)}return null}function ti(je,Be,Ze,gt,Nt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return je=je.get(Ze)||null,De(Be,je,""+gt,Nt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case u:return je=je.get(gt.key===null?Ze:gt.key)||null,Ke(Be,je,gt,Nt);case h:return je=je.get(gt.key===null?Ze:gt.key)||null,ft(Be,je,gt,Nt);case E:var _n=gt._init;return ti(je,Be,Ze,_n(gt._payload),Nt)}if(K(gt)||I(gt))return je=je.get(Ze)||null,It(Be,je,gt,Nt,null);_d(Be,gt)}return null}function zt(je,Be,Ze,gt){for(var Nt=null,_n=null,un=Be,Ln=Be=0,_i=null;un!==null&&Ln<Ze.length;Ln++){un.index>Ln?(_i=un,un=null):_i=un.sibling;var Rn=Ht(je,un,Ze[Ln],gt);if(Rn===null){un===null&&(un=_i);break}O&&un&&Rn.alternate===null&&b(je,un),Be=V(Rn,Be,Ln),_n===null?Nt=Rn:_n.sibling=Rn,_n=Rn,un=_i}if(Ln===Ze.length)return C(je,un),mi&&go(je,Ln),Nt;if(un===null){for(;Ln<Ze.length;Ln++)un=an(je,Ze[Ln],gt),un!==null&&(Be=V(un,Be,Ln),_n===null?Nt=un:_n.sibling=un,_n=un);return mi&&go(je,Ln),Nt}for(un=k(je,un);Ln<Ze.length;Ln++)_i=ti(un,je,Ln,Ze[Ln],gt),_i!==null&&(O&&_i.alternate!==null&&un.delete(_i.key===null?Ln:_i.key),Be=V(_i,Be,Ln),_n===null?Nt=_i:_n.sibling=_i,_n=_i);return O&&un.forEach(function(So){return b(je,So)}),mi&&go(je,Ln),Nt}function kr(je,Be,Ze,gt){var Nt=I(Ze);if(typeof Nt!="function")throw Error(a(150));if(Ze=Nt.call(Ze),Ze==null)throw Error(a(151));for(var _n=Nt=null,un=Be,Ln=Be=0,_i=null,Rn=Ze.next();un!==null&&!Rn.done;Ln++,Rn=Ze.next()){un.index>Ln?(_i=un,un=null):_i=un.sibling;var So=Ht(je,un,Rn.value,gt);if(So===null){un===null&&(un=_i);break}O&&un&&So.alternate===null&&b(je,un),Be=V(So,Be,Ln),_n===null?Nt=So:_n.sibling=So,_n=So,un=_i}if(Rn.done)return C(je,un),mi&&go(je,Ln),Nt;if(un===null){for(;!Rn.done;Ln++,Rn=Ze.next())Rn=an(je,Rn.value,gt),Rn!==null&&(Be=V(Rn,Be,Ln),_n===null?Nt=Rn:_n.sibling=Rn,_n=Rn);return mi&&go(je,Ln),Nt}for(un=k(je,un);!Rn.done;Ln++,Rn=Ze.next())Rn=ti(un,je,Ln,Rn.value,gt),Rn!==null&&(O&&Rn.alternate!==null&&un.delete(Rn.key===null?Ln:Rn.key),Be=V(Rn,Be,Ln),_n===null?Nt=Rn:_n.sibling=Rn,_n=Rn);return O&&un.forEach(function(Ea){return b(je,Ea)}),mi&&go(je,Ln),Nt}function lr(je,Be,Ze,gt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===d&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case u:e:{for(var Nt=Ze.key,_n=Be;_n!==null;){if(_n.key===Nt){if(Nt=Ze.type,Nt===d){if(_n.tag===7){C(je,_n.sibling),Be=U(_n,Ze.props.children),Be.return=je,je=Be;break e}}else if(_n.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&gi(Nt)===_n.type){C(je,_n.sibling),Be=U(_n,Ze.props),Be.ref=Ku(je,_n,Ze),Be.return=je,je=Be;break e}C(je,_n);break}else b(je,_n);_n=_n.sibling}Ze.type===d?(Be=ch(Ze.props.children,je.mode,gt,Ze.key),Be.return=je,je=Be):(gt=i_(Ze.type,Ze.key,Ze.props,null,je.mode,gt),gt.ref=Ku(je,Be,Ze),gt.return=je,je=gt)}return ve(je);case h:e:{for(_n=Ze.key;Be!==null;){if(Be.key===_n)if(Be.tag===4&&Be.stateNode.containerInfo===Ze.containerInfo&&Be.stateNode.implementation===Ze.implementation){C(je,Be.sibling),Be=U(Be,Ze.children||[]),Be.return=je,je=Be;break e}else{C(je,Be);break}else b(je,Be);Be=Be.sibling}Be=Xi(Ze,je.mode,gt),Be.return=je,je=Be}return ve(je);case E:return _n=Ze._init,lr(je,Be,_n(Ze._payload),gt)}if(K(Ze))return zt(je,Be,Ze,gt);if(I(Ze))return kr(je,Be,Ze,gt);_d(je,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,Be!==null&&Be.tag===6?(C(je,Be.sibling),Be=U(Be,Ze),Be.return=je,je=Be):(C(je,Be),Be=fs(Ze,je.mode,gt),Be.return=je,je=Be),ve(je)):C(je,Be)}return lr}var ba=np(!0),eh=np(!1),ip={},vo=Jn(ip),th=Jn(ip),xs=Jn(ip);function Sa(O){if(O===ip)throw Error(a(174));return O}function rp(O,b){En(xs,b),En(th,O),En(vo,ip),O=ce(b),lt(vo),En(vo,O)}function nh(){lt(vo),lt(th),lt(xs)}function JO(O){var b=Sa(xs.current),C=Sa(vo.current);b=X(C,O.type,b),C!==b&&(En(th,O),En(vo,b))}function KO(O){th.current===O&&(lt(vo),lt(th))}var Si=Jn(0);function $s(O){for(var b=O;b!==null;){if(b.tag===13){var C=b.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||zn(C)||fe(C)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===O)break;for(;b.sibling===null;){if(b.return===null||b.return===O)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var ev=[];function sp(){for(var O=0;O<ev.length;O++){var b=ev[O];Xe?b._workInProgressVersionPrimary=null:b._workInProgressVersionSecondary=null}ev.length=0}var kg=l.ReactCurrentDispatcher,Qi=l.ReactCurrentBatchConfig,Kn=0,Di=null,us=null,Ar=null,op=!1,ap=!1,lp=0,Pc=0;function hs(){throw Error(a(321))}function Od(O,b){if(b===null)return!1;for(var C=0;C<b.length&&C<O.length;C++)if(!as(O[C],b[C]))return!1;return!0}function tv(O,b,C,k,U,V){if(Kn=V,Di=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,kg.current=O===null||O.memoizedState===null?Vi:bk,O=C(k,U),ap){V=0;do{if(ap=!1,lp=0,25<=V)throw Error(a(301));V+=1,Ar=us=null,b.updateQueue=null,kg.current=Sk,O=C(k,U)}while(ap)}if(kg.current=Tt,b=us!==null&&us.next!==null,Kn=0,Ar=us=Di=null,op=!1,b)throw Error(a(300));return O}function vd(){var O=lp!==0;return lp=0,O}function Ta(){var O={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Di.memoizedState=Ar=O:Ar=Ar.next=O,Ar}function sl(){if(us===null){var O=Di.alternate;O=O!==null?O.memoizedState:null}else O=us.next;var b=Ar===null?Di.memoizedState:Ar.next;if(b!==null)Ar=b,us=O;else{if(O===null)throw Error(a(310));us=O,O={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},Ar===null?Di.memoizedState=Ar=O:Ar=Ar.next=O}return Ar}function Ul(O,b){return typeof b=="function"?b(O):b}function Ig(O){var b=sl(),C=b.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=O;var k=us,U=k.baseQueue,V=C.pending;if(V!==null){if(U!==null){var ve=U.next;U.next=V.next,V.next=ve}k.baseQueue=U=V,C.pending=null}if(U!==null){V=U.next,k=k.baseState;var De=ve=null,Ke=null,ft=V;do{var It=ft.lane;if((Kn&It)===It)Ke!==null&&(Ke=Ke.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),k=ft.hasEagerState?ft.eagerState:O(k,ft.action);else{var an={lane:It,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};Ke===null?(De=Ke=an,ve=k):Ke=Ke.next=an,Di.lanes|=It,xd|=It}ft=ft.next}while(ft!==null&&ft!==V);Ke===null?ve=k:Ke.next=De,as(k,b.memoizedState)||(bo=!0),b.memoizedState=k,b.baseState=ve,b.baseQueue=Ke,C.lastRenderedState=k}if(O=C.interleaved,O!==null){U=O;do V=U.lane,Di.lanes|=V,xd|=V,U=U.next;while(U!==O)}else U===null&&(C.lanes=0);return[b.memoizedState,C.dispatch]}function yd(O){var b=sl(),C=b.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=O;var k=C.dispatch,U=C.pending,V=b.memoizedState;if(U!==null){C.pending=null;var ve=U=U.next;do V=O(V,ve.action),ve=ve.next;while(ve!==U);as(V,b.memoizedState)||(bo=!0),b.memoizedState=V,b.baseQueue===null&&(b.baseState=V),C.lastRenderedState=V}return[V,k]}function nv(){}function iv(O,b){var C=Di,k=sl(),U=b(),V=!as(k.memoizedState,U);if(V&&(k.memoizedState=U,bo=!0),k=k.queue,rh(d1.bind(null,C,k,O),[O]),k.getSnapshot!==b||V||Ar!==null&&Ar.memoizedState.tag&1){if(C.flags|=2048,ih(9,h1.bind(null,C,k,U,b),void 0,null),Hi===null)throw Error(a(349));Kn&30||cp(C,b,U)}return U}function cp(O,b,C){O.flags|=16384,O={getSnapshot:b,value:C},b=Di.updateQueue,b===null?(b={lastEffect:null,stores:null},Di.updateQueue=b,b.stores=[O]):(C=b.stores,C===null?b.stores=[O]:C.push(O))}function h1(O,b,C,k){b.value=C,b.getSnapshot=k,f1(b)&&jo(O,1,-1)}function d1(O,b,C){return C(function(){f1(b)&&jo(O,1,-1)})}function f1(O){var b=O.getSnapshot;O=O.value;try{var C=b();return!as(O,C)}catch{return!0}}function Rg(O){var b=Ta();return typeof O=="function"&&(O=O()),b.memoizedState=b.baseState=O,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:O},b.queue=O,O=O.dispatch=yo.bind(null,Di,O),[b.memoizedState,O]}function ih(O,b,C,k){return O={tag:O,create:b,destroy:C,deps:k,next:null},b=Di.updateQueue,b===null?(b={lastEffect:null,stores:null},Di.updateQueue=b,b.lastEffect=O.next=O):(C=b.lastEffect,C===null?b.lastEffect=O.next=O:(k=C.next,C.next=O,O.next=k,b.lastEffect=O)),O}function p1(){return sl().memoizedState}function Mg(O,b,C,k){var U=Ta();Di.flags|=O,U.memoizedState=ih(1|b,C,void 0,k===void 0?null:k)}function Pg(O,b,C,k){var U=sl();k=k===void 0?null:k;var V=void 0;if(us!==null){var ve=us.memoizedState;if(V=ve.destroy,k!==null&&Od(k,ve.deps)){U.memoizedState=ih(b,C,V,k);return}}Di.flags|=O,U.memoizedState=ih(1|b,C,V,k)}function Dg(O,b){return Mg(8390656,8,O,b)}function rh(O,b){return Pg(2048,8,O,b)}function rv(O,b){return Pg(4,2,O,b)}function Lg(O,b){return Pg(4,4,O,b)}function m1(O,b){if(typeof b=="function")return O=O(),b(O),function(){b(null)};if(b!=null)return O=O(),b.current=O,function(){b.current=null}}function up(O,b,C){return C=C!=null?C.concat([O]):null,Pg(4,4,m1.bind(null,b,O),C)}function sv(){}function g1(O,b){var C=sl();b=b===void 0?null:b;var k=C.memoizedState;return k!==null&&b!==null&&Od(b,k[1])?k[0]:(C.memoizedState=[O,b],O)}function _1(O,b){var C=sl();b=b===void 0?null:b;var k=C.memoizedState;return k!==null&&b!==null&&Od(b,k[1])?k[0]:(O=O(),C.memoizedState=[O,b],O)}function yk(O,b){var C=fn;fn=C!==0&&4>C?C:4,O(!0);var k=Qi.transition;Qi.transition={};try{O(!1),b()}finally{fn=C,Qi.transition=k}}function Cs(){return sl().memoizedState}function Ft(O,b,C){var k=Fc(O);C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},zr(O)?oi(b,C):(ol(O,b,C),C=Vr(),O=jo(O,k,C),O!==null&&bd(O,b,k))}function yo(O,b,C){var k=Fc(O),U={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(zr(O))oi(b,U);else{ol(O,b,U);var V=O.alternate;if(O.lanes===0&&(V===null||V.lanes===0)&&(V=b.lastRenderedReducer,V!==null))try{var ve=b.lastRenderedState,De=V(ve,C);if(U.hasEagerState=!0,U.eagerState=De,as(De,ve))return}catch{}finally{}C=Vr(),O=jo(O,k,C),O!==null&&bd(O,b,k)}}function zr(O){var b=O.alternate;return O===Di||b!==null&&b===Di}function oi(O,b){ap=op=!0;var C=O.pending;C===null?b.next=b:(b.next=C.next,C.next=b),O.pending=b}function ol(O,b,C){Hi!==null&&O.mode&1&&!(yn&2)?(O=b.interleaved,O===null?(C.next=C,zi===null?zi=[b]:zi.push(b)):(C.next=O.next,O.next=C),b.interleaved=C):(O=b.pending,O===null?C.next=C:(C.next=O.next,O.next=C),b.pending=C)}function bd(O,b,C){if(C&4194240){var k=b.lanes;k&=O.pendingLanes,C|=k,b.lanes=C,ma(O,C)}}var Tt={readContext:ii,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},Vi={readContext:ii,useCallback:function(O,b){return Ta().memoizedState=[O,b===void 0?null:b],O},useContext:ii,useEffect:Dg,useImperativeHandle:function(O,b,C){return C=C!=null?C.concat([O]):null,Mg(4194308,4,m1.bind(null,b,O),C)},useLayoutEffect:function(O,b){return Mg(4194308,4,O,b)},useInsertionEffect:function(O,b){return Mg(4,2,O,b)},useMemo:function(O,b){var C=Ta();return b=b===void 0?null:b,O=O(),C.memoizedState=[O,b],O},useReducer:function(O,b,C){var k=Ta();return b=C!==void 0?C(b):b,k.memoizedState=k.baseState=b,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:b},k.queue=O,O=O.dispatch=Ft.bind(null,Di,O),[k.memoizedState,O]},useRef:function(O){var b=Ta();return O={current:O},b.memoizedState=O},useState:Rg,useDebugValue:sv,useDeferredValue:function(O){var b=Rg(O),C=b[0],k=b[1];return Dg(function(){var U=Qi.transition;Qi.transition={};try{k(O)}finally{Qi.transition=U}},[O]),C},useTransition:function(){var O=Rg(!1),b=O[0];return O=yk.bind(null,O[1]),Ta().memoizedState=O,[b,O]},useMutableSource:function(){},useSyncExternalStore:function(O,b,C){var k=Di,U=Ta();if(mi){if(C===void 0)throw Error(a(407));C=C()}else{if(C=b(),Hi===null)throw Error(a(349));Kn&30||cp(k,b,C)}U.memoizedState=C;var V={value:C,getSnapshot:b};return U.queue=V,Dg(d1.bind(null,k,V,O),[O]),k.flags|=2048,ih(9,h1.bind(null,k,V,C,b),void 0,null),C},useId:function(){var O=Ta(),b=Hi.identifierPrefix;if(mi){var C=rl,k=il;C=(k&~(1<<32-ss(k)-1)).toString(32)+C,b=":"+b+"R"+C,C=lp++,0<C&&(b+="H"+C.toString(32)),b+=":"}else C=Pc++,b=":"+b+"r"+C.toString(32)+":";return O.memoizedState=b},unstable_isNewReconciler:!1},bk={readContext:ii,useCallback:g1,useContext:ii,useEffect:rh,useImperativeHandle:up,useInsertionEffect:rv,useLayoutEffect:Lg,useMemo:_1,useReducer:Ig,useRef:p1,useState:function(){return Ig(Ul)},useDebugValue:sv,useDeferredValue:function(O){var b=Ig(Ul),C=b[0],k=b[1];return rh(function(){var U=Qi.transition;Qi.transition={};try{k(O)}finally{Qi.transition=U}},[O]),C},useTransition:function(){var O=Ig(Ul)[0],b=sl().memoizedState;return[O,b]},useMutableSource:nv,useSyncExternalStore:iv,useId:Cs,unstable_isNewReconciler:!1},Sk={readContext:ii,useCallback:g1,useContext:ii,useEffect:rh,useImperativeHandle:up,useInsertionEffect:rv,useLayoutEffect:Lg,useMemo:_1,useReducer:yd,useRef:p1,useState:function(){return yd(Ul)},useDebugValue:sv,useDeferredValue:function(O){var b=yd(Ul),C=b[0],k=b[1];return rh(function(){var U=Qi.transition;Qi.transition={};try{k(O)}finally{Qi.transition=U}},[O]),C},useTransition:function(){var O=yd(Ul)[0],b=sl().memoizedState;return[O,b]},useMutableSource:nv,useSyncExternalStore:iv,useId:Cs,unstable_isNewReconciler:!1};function ov(O,b){try{var C="",k=b;do C+=ga(k),k=k.return;while(k);var U=C}catch(V){U=`
Error generating stack: `+V.message+`
`+V.stack}return{value:O,source:b,stack:U}}function av(O,b){try{console.error(b.value)}catch(C){setTimeout(function(){throw C})}}var Tk=typeof WeakMap=="function"?WeakMap:Map;function O1(O,b,C){C=Qo(-1,C),C.tag=3,C.payload={element:null};var k=b.value;return C.callback=function(){Kg||(Kg=!0,Sv=k),av(O,b)},C}function v1(O,b,C){C=Qo(-1,C),C.tag=3;var k=O.type.getDerivedStateFromError;if(typeof k=="function"){var U=b.value;C.payload=function(){return k(U)},C.callback=function(){av(O,b)}}var V=O.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(C.callback=function(){av(O,b),typeof k!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var ve=b.stack;this.componentDidCatch(b.value,{componentStack:ve!==null?ve:""})}),C}function y1(O,b,C){var k=O.pingCache;if(k===null){k=O.pingCache=new Tk;var U=new Set;k.set(b,U)}else U=k.get(b),U===void 0&&(U=new Set,k.set(b,U));U.has(C)||(U.add(C),O=Ck.bind(null,O,b,C),b.then(O,O))}function b1(O){do{var b;if((b=O.tag===13)&&(b=O.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return O;O=O.return}while(O!==null);return null}function S1(O,b,C,k,U){return O.mode&1?(O.flags|=65536,O.lanes=U,O):(O===b?O.flags|=65536:(O.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(b=Qo(-1,1),b.tag=2,Bl(C,b))),C.lanes|=1),O)}function al(O){O.flags|=4}function T1(O,b){if(O!==null&&O.child===b.child)return!0;if(b.flags&16)return!1;for(O=b.child;O!==null;){if(O.flags&12854||O.subtreeFlags&12854)return!1;O=O.sibling}return!0}var hp,sh,Ng,Ho;if(Ue)hp=function(O,b){for(var C=b.child;C!==null;){if(C.tag===5||C.tag===6)L(O,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===b)break;for(;C.sibling===null;){if(C.return===null||C.return===b)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},sh=function(){},Ng=function(O,b,C,k,U){if(O=O.memoizedProps,O!==k){var V=b.stateNode,ve=Sa(vo.current);C=de(V,C,O,k,U,ve),(b.updateQueue=C)&&al(b)}},Ho=function(O,b,C,k){C!==k&&al(b)};else if(we){hp=function(O,b,C,k){for(var U=b.child;U!==null;){if(U.tag===5){var V=U.stateNode;C&&k&&(V=Wn(V,U.type,U.memoizedProps,U)),L(O,V)}else if(U.tag===6)V=U.stateNode,C&&k&&(V=on(V,U.memoizedProps,U)),L(O,V);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)V=U.child,V!==null&&(V.return=U),hp(O,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===b)break;for(;U.sibling===null;){if(U.return===null||U.return===b)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var w1=function(O,b,C,k){for(var U=b.child;U!==null;){if(U.tag===5){var V=U.stateNode;C&&k&&(V=Wn(V,U.type,U.memoizedProps,U)),wn(O,V)}else if(U.tag===6)V=U.stateNode,C&&k&&(V=on(V,U.memoizedProps,U)),wn(O,V);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)V=U.child,V!==null&&(V.return=U),w1(O,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===b)break;for(;U.sibling===null;){if(U.return===null||U.return===b)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};sh=function(O,b){var C=b.stateNode;if(!T1(O,b)){O=C.containerInfo;var k=Tn(O);w1(k,b,!1,!1),C.pendingChildren=k,al(b),Gn(O,k)}},Ng=function(O,b,C,k,U){var V=O.stateNode,ve=O.memoizedProps;if((O=T1(O,b))&&ve===k)b.stateNode=V;else{var De=b.stateNode,Ke=Sa(vo.current),ft=null;ve!==k&&(ft=de(De,C,ve,k,U,Ke)),O&&ft===null?b.stateNode=V:(V=bt(V,ft,C,ve,k,b,O,De),le(V,C,k,U,Ke)&&al(b),b.stateNode=V,O?al(b):hp(V,b,!1,!1))}},Ho=function(O,b,C,k){C!==k?(O=Sa(xs.current),C=Sa(vo.current),b.stateNode=Ce(k,O,C,b),al(b)):b.stateNode=O.stateNode}}else sh=function(){},Ng=function(){},Ho=function(){};function dp(O,b){if(!mi)switch(O.tailMode){case"hidden":b=O.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?O.tail=null:C.sibling=null;break;case"collapsed":C=O.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?b||O.tail===null?O.tail=null:O.tail.sibling=null:k.sibling=null}}function ds(O){var b=O.alternate!==null&&O.alternate.child===O.child,C=0,k=0;if(b)for(var U=O.child;U!==null;)C|=U.lanes|U.childLanes,k|=U.subtreeFlags&14680064,k|=U.flags&14680064,U.return=O,U=U.sibling;else for(U=O.child;U!==null;)C|=U.lanes|U.childLanes,k|=U.subtreeFlags,k|=U.flags,U.return=O,U=U.sibling;return O.subtreeFlags|=k,O.childLanes=C,b}function wk(O,b,C){var k=b.pendingProps;switch(ZO(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(b),null;case 1:return Pi(b.type)&&Dl(),ds(b),null;case 3:return k=b.stateNode,nh(),lt(_r),lt(pi),sp(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(O===null||O.child===null)&&(Ju(b)?al(b):O===null||O.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,va!==null&&(wv(va),va=null))),sh(O,b),ds(b),null;case 5:KO(b),C=Sa(xs.current);var U=b.type;if(O!==null&&b.stateNode!=null)Ng(O,b,U,k,C),O.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!k){if(b.stateNode===null)throw Error(a(166));return ds(b),null}if(O=Sa(vo.current),Ju(b)){if(!Ge)throw Error(a(175));O=At(b.stateNode,b.type,b.memoizedProps,C,O,b,!md),b.updateQueue=O,O!==null&&al(b)}else{var V=z(U,k,C,O,b);hp(V,b,!1,!1),b.stateNode=V,le(V,U,k,C,O)&&al(b)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return ds(b),null;case 6:if(O&&b.stateNode!=null)Ho(O,b,O.memoizedProps,k);else{if(typeof k!="string"&&b.stateNode===null)throw Error(a(166));if(O=Sa(xs.current),C=Sa(vo.current),Ju(b)){if(!Ge)throw Error(a(176));if(O=b.stateNode,k=b.memoizedProps,(C=Zt(O,k,b,!md))&&(U=_o,U!==null))switch(V=(U.mode&1)!==0,U.tag){case 3:Ts(U.stateNode.containerInfo,O,k,V);break;case 5:cn(U.type,U.memoizedProps,U.stateNode,O,k,V)}C&&al(b)}else b.stateNode=Ce(k,O,C,b)}return ds(b),null;case 13:if(lt(Si),k=b.memoizedState,mi&&Oo!==null&&b.mode&1&&!(b.flags&128)){for(O=Oo;O;)O=Ye(O);return ya(),b.flags|=98560,b}if(k!==null&&k.dehydrated!==null){if(k=Ju(b),O===null){if(!k)throw Error(a(318));if(!Ge)throw Error(a(344));if(O=b.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(a(317));Jt(O,b)}else ya(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;return ds(b),null}return va!==null&&(wv(va),va=null),b.flags&128?(b.lanes=C,b):(k=k!==null,C=!1,O===null?Ju(b):C=O.memoizedState!==null,k&&!C&&(b.child.flags|=8192,b.mode&1&&(O===null||Si.current&1?Or===0&&(Or=3):wp())),b.updateQueue!==null&&(b.flags|=4),ds(b),null);case 4:return nh(),sh(O,b),O===null&&Ee(b.stateNode.containerInfo),ds(b),null;case 10:return tl(b.type._context),ds(b),null;case 17:return Pi(b.type)&&Dl(),ds(b),null;case 19:if(lt(Si),U=b.memoizedState,U===null)return ds(b),null;if(k=(b.flags&128)!==0,V=U.rendering,V===null)if(k)dp(U,!1);else{if(Or!==0||O!==null&&O.flags&128)for(O=b.child;O!==null;){if(V=$s(O),V!==null){for(b.flags|=128,dp(U,!1),O=V.updateQueue,O!==null&&(b.updateQueue=O,b.flags|=4),b.subtreeFlags=0,O=C,k=b.child;k!==null;)C=k,U=O,C.flags&=14680066,V=C.alternate,V===null?(C.childLanes=0,C.lanes=U,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=V.childLanes,C.lanes=V.lanes,C.child=V.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=V.memoizedProps,C.memoizedState=V.memoizedState,C.updateQueue=V.updateQueue,C.type=V.type,U=V.dependencies,C.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),k=k.sibling;return En(Si,Si.current&1|2),b.child}O=O.sibling}U.tail!==null&&li()>Sp&&(b.flags|=128,k=!0,dp(U,!1),b.lanes=4194304)}else{if(!k)if(O=$s(V),O!==null){if(b.flags|=128,k=!0,O=O.updateQueue,O!==null&&(b.updateQueue=O,b.flags|=4),dp(U,!0),U.tail===null&&U.tailMode==="hidden"&&!V.alternate&&!mi)return ds(b),null}else 2*li()-U.renderingStartTime>Sp&&C!==1073741824&&(b.flags|=128,k=!0,dp(U,!1),b.lanes=4194304);U.isBackwards?(V.sibling=b.child,b.child=V):(O=U.last,O!==null?O.sibling=V:b.child=V,U.last=V)}return U.tail!==null?(b=U.tail,U.rendering=b,U.tail=b.sibling,U.renderingStartTime=li(),b.sibling=null,O=Si.current,En(Si,k?O&1|2:O&1),b):(ds(b),null);case 22:case 23:return n_(),k=b.memoizedState!==null,O!==null&&O.memoizedState!==null!==k&&(b.flags|=8192),k&&b.mode&1?Js&1073741824&&(ds(b),Ue&&b.subtreeFlags&6&&(b.flags|=8192)):ds(b),null;case 24:return null;case 25:return null}throw Error(a(156,b.tag))}var Ek=l.ReactCurrentOwner,bo=!1;function As(O,b,C,k){b.child=O===null?eh(b,null,C,k):ba(b,O.child,C,k)}function lv(O,b,C,k,U){C=C.render;var V=b.ref;return Cr(b,U),k=tv(O,b,C,k,V,U),C=vd(),O!==null&&!bo?(b.updateQueue=O.updateQueue,b.flags&=-2053,O.lanes&=~U,ll(O,b,U)):(mi&&C&&Cg(b),b.flags|=1,As(O,b,k,U),b.child)}function Dc(O,b,C,k,U){if(O===null){var V=C.type;return typeof V=="function"&&!Mv(V)&&V.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(b.tag=15,b.type=V,Bg(O,b,V,k,U)):(O=i_(C.type,null,k,b,b.mode,U),O.ref=b.ref,O.return=b,b.child=O)}if(V=O.child,!(O.lanes&U)){var ve=V.memoizedProps;if(C=C.compare,C=C!==null?C:Xu,C(ve,k)&&O.ref===b.ref)return ll(O,b,U)}return b.flags|=1,O=zc(V,k),O.ref=b.ref,O.return=b,b.child=O}function Bg(O,b,C,k,U){if(O!==null&&Xu(O.memoizedProps,k)&&O.ref===b.ref)if(bo=!1,(O.lanes&U)!==0)O.flags&131072&&(bo=!0);else return b.lanes=O.lanes,ll(O,b,U);return uv(O,b,C,k,U)}function cv(O,b,C){var k=b.pendingProps,U=k.children,V=O!==null?O.memoizedState:null;if(k.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null},En(Wl,Js),Js|=C;else if(C&1073741824)b.memoizedState={baseLanes:0,cachePool:null},k=V!==null?V.baseLanes:C,En(Wl,Js),Js|=k;else return O=V!==null?V.baseLanes|C:C,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:O,cachePool:null},b.updateQueue=null,En(Wl,Js),Js|=O,null;else V!==null?(k=V.baseLanes|C,b.memoizedState=null):k=C,En(Wl,Js),Js|=k;return As(O,b,U,C),b.child}function E1(O,b){var C=b.ref;(O===null&&C!==null||O!==null&&O.ref!==C)&&(b.flags|=512,b.flags|=2097152)}function uv(O,b,C,k,U){var V=Pi(C)?rn:pi.current;return V=Wr(b,V),Cr(b,U),C=tv(O,b,C,k,V,U),k=vd(),O!==null&&!bo?(b.updateQueue=O.updateQueue,b.flags&=-2053,O.lanes&=~U,ll(O,b,U)):(mi&&k&&Cg(b),b.flags|=1,As(O,b,C,U),b.child)}function x1(O,b,C,k,U){if(Pi(C)){var V=!0;Go(b)}else V=!1;if(Cr(b,U),b.stateNode===null)O!==null&&(O.alternate=null,b.alternate=null,b.flags|=2),l1(b,C,k),jO(b,C,k,U),k=!0;else if(O===null){var ve=b.stateNode,De=b.memoizedProps;ve.props=De;var Ke=ve.context,ft=C.contextType;typeof ft=="object"&&ft!==null?ft=ii(ft):(ft=Pi(C)?rn:pi.current,ft=Wr(b,ft));var It=C.getDerivedStateFromProps,an=typeof It=="function"||typeof ve.getSnapshotBeforeUpdate=="function";an||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(De!==k||Ke!==ft)&&c1(b,ve,k,ft),Oa=!1;var Ht=b.memoizedState;ve.state=Ht,xg(b,k,ve,U),Ke=b.memoizedState,De!==k||Ht!==Ke||_r.current||Oa?(typeof It=="function"&&(XO(b,C,It,k),Ke=b.memoizedState),(De=Oa||a1(b,C,De,k,Ht,Ke,ft))?(an||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount()),typeof ve.componentDidMount=="function"&&(b.flags|=4194308)):(typeof ve.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=k,b.memoizedState=Ke),ve.props=k,ve.state=Ke,ve.context=ft,k=De):(typeof ve.componentDidMount=="function"&&(b.flags|=4194308),k=!1)}else{ve=b.stateNode,o1(O,b),De=b.memoizedProps,ft=b.type===b.elementType?De:cs(b.type,De),ve.props=ft,an=b.pendingProps,Ht=ve.context,Ke=C.contextType,typeof Ke=="object"&&Ke!==null?Ke=ii(Ke):(Ke=Pi(C)?rn:pi.current,Ke=Wr(b,Ke));var ti=C.getDerivedStateFromProps;(It=typeof ti=="function"||typeof ve.getSnapshotBeforeUpdate=="function")||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(De!==an||Ht!==Ke)&&c1(b,ve,k,Ke),Oa=!1,Ht=b.memoizedState,ve.state=Ht,xg(b,k,ve,U);var zt=b.memoizedState;De!==an||Ht!==zt||_r.current||Oa?(typeof ti=="function"&&(XO(b,C,ti,k),zt=b.memoizedState),(ft=Oa||a1(b,C,ft,k,Ht,zt,Ke)||!1)?(It||typeof ve.UNSAFE_componentWillUpdate!="function"&&typeof ve.componentWillUpdate!="function"||(typeof ve.componentWillUpdate=="function"&&ve.componentWillUpdate(k,zt,Ke),typeof ve.UNSAFE_componentWillUpdate=="function"&&ve.UNSAFE_componentWillUpdate(k,zt,Ke)),typeof ve.componentDidUpdate=="function"&&(b.flags|=4),typeof ve.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof ve.componentDidUpdate!="function"||De===O.memoizedProps&&Ht===O.memoizedState||(b.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||De===O.memoizedProps&&Ht===O.memoizedState||(b.flags|=1024),b.memoizedProps=k,b.memoizedState=zt),ve.props=k,ve.state=zt,ve.context=Ke,k=ft):(typeof ve.componentDidUpdate!="function"||De===O.memoizedProps&&Ht===O.memoizedState||(b.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||De===O.memoizedProps&&Ht===O.memoizedState||(b.flags|=1024),k=!1)}return hv(O,b,C,k,V,U)}function hv(O,b,C,k,U,V){E1(O,b);var ve=(b.flags&128)!==0;if(!k&&!ve)return U&&Tg(b,C,!1),ll(O,b,V);k=b.stateNode,Ek.current=b;var De=ve&&typeof C.getDerivedStateFromError!="function"?null:k.render();return b.flags|=1,O!==null&&ve?(b.child=ba(b,O.child,null,V),b.child=ba(b,null,De,V)):As(O,b,De,V),b.memoizedState=k.state,U&&Tg(b,C,!0),b.child}function $1(O){var b=O.stateNode;b.pendingContext?Ll(O,b.pendingContext,b.pendingContext!==b.context):b.context&&Ll(O,b.context,!1),rp(O,b.containerInfo)}function C1(O,b,C,k,U){return ya(),tp(U),b.flags|=256,As(O,b,C,k),b.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function Ug(O){return{baseLanes:O,cachePool:null}}function dv(O,b,C){var k=b.pendingProps,U=Si.current,V=!1,ve=(b.flags&128)!==0,De;if((De=ve)||(De=O!==null&&O.memoizedState===null?!1:(U&2)!==0),De?(V=!0,b.flags&=-129):(O===null||O.memoizedState!==null)&&(U|=1),En(Si,U&1),O===null)return gd(b),O=b.memoizedState,O!==null&&(O=O.dehydrated,O!==null)?(b.mode&1?fe(O)?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(U=k.children,O=k.fallback,V?(k=b.mode,V=b.child,U={mode:"hidden",children:U},!(k&1)&&V!==null?(V.childLanes=0,V.pendingProps=U):V=Ut(U,k,0,null),O=ch(O,k,C,null),V.return=b,O.return=b,V.sibling=O,b.child=V,b.child.memoizedState=Ug(C),b.memoizedState=Fg,O):fv(b,U));if(U=O.memoizedState,U!==null){if(De=U.dehydrated,De!==null){if(ve)return b.flags&256?(b.flags&=-257,Gg(O,b,C,Error(a(422)))):b.memoizedState!==null?(b.child=O.child,b.flags|=128,null):(V=k.fallback,U=b.mode,k=Ut({mode:"visible",children:k.children},U,0,null),V=ch(V,U,C,null),V.flags|=2,k.return=b,V.return=b,k.sibling=V,b.child=k,b.mode&1&&ba(b,O.child,null,C),b.child.memoizedState=Ug(C),b.memoizedState=Fg,V);if(!(b.mode&1))b=Gg(O,b,C,null);else if(fe(De))b=Gg(O,b,C,Error(a(419)));else if(k=(C&O.childLanes)!==0,bo||k){if(k=Hi,k!==null){switch(C&-C){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}k=V&(k.suspendedLanes|C)?0:V,k!==0&&k!==U.retryLane&&(U.retryLane=k,jo(O,k,-1))}wp(),b=Gg(O,b,C,Error(a(421)))}else zn(De)?(b.flags|=128,b.child=O.child,b=Ak.bind(null,O),Qe(De,b),b=null):(C=U.treeContext,Ge&&(Oo=Pt(De),_o=b,mi=!0,va=null,md=!1,C!==null&&(Es[Vo++]=il,Es[Vo++]=rl,Es[Vo++]=qu,il=C.id,rl=C.overflow,qu=b)),b=fv(b,b.pendingProps.children),b.flags|=4096);return b}return V?(k=k1(O,b,k.children,k.fallback,C),V=b.child,U=O.child.memoizedState,V.memoizedState=U===null?Ug(C):{baseLanes:U.baseLanes|C,cachePool:null},V.childLanes=O.childLanes&~C,b.memoizedState=Fg,k):(C=A1(O,b,k.children,C),b.memoizedState=null,C)}return V?(k=k1(O,b,k.children,k.fallback,C),V=b.child,U=O.child.memoizedState,V.memoizedState=U===null?Ug(C):{baseLanes:U.baseLanes|C,cachePool:null},V.childLanes=O.childLanes&~C,b.memoizedState=Fg,k):(C=A1(O,b,k.children,C),b.memoizedState=null,C)}function fv(O,b){return b=Ut({mode:"visible",children:b},O.mode,0,null),b.return=O,O.child=b}function A1(O,b,C,k){var U=O.child;return O=U.sibling,C=zc(U,{mode:"visible",children:C}),!(b.mode&1)&&(C.lanes=k),C.return=b,C.sibling=null,O!==null&&(k=b.deletions,k===null?(b.deletions=[O],b.flags|=16):k.push(O)),b.child=C}function k1(O,b,C,k,U){var V=b.mode;O=O.child;var ve=O.sibling,De={mode:"hidden",children:C};return!(V&1)&&b.child!==O?(C=b.child,C.childLanes=0,C.pendingProps=De,b.deletions=null):(C=zc(O,De),C.subtreeFlags=O.subtreeFlags&14680064),ve!==null?k=zc(ve,k):(k=ch(k,V,U,null),k.flags|=2),k.return=b,C.return=b,C.sibling=k,b.child=C,k}function Gg(O,b,C,k){return k!==null&&tp(k),ba(b,O.child,null,C),O=fv(b,b.pendingProps.children),O.flags|=2,b.memoizedState=null,O}function fp(O,b,C){O.lanes|=b;var k=O.alternate;k!==null&&(k.lanes|=b),Wi(O.return,b,C)}function Wg(O,b,C,k,U){var V=O.memoizedState;V===null?O.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:U}:(V.isBackwards=b,V.rendering=null,V.renderingStartTime=0,V.last=k,V.tail=C,V.tailMode=U)}function pv(O,b,C){var k=b.pendingProps,U=k.revealOrder,V=k.tail;if(As(O,b,k.children,C),k=Si.current,k&2)k=k&1|2,b.flags|=128;else{if(O!==null&&O.flags&128)e:for(O=b.child;O!==null;){if(O.tag===13)O.memoizedState!==null&&fp(O,C,b);else if(O.tag===19)fp(O,C,b);else if(O.child!==null){O.child.return=O,O=O.child;continue}if(O===b)break e;for(;O.sibling===null;){if(O.return===null||O.return===b)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}k&=1}if(En(Si,k),!(b.mode&1))b.memoizedState=null;else switch(U){case"forwards":for(C=b.child,U=null;C!==null;)O=C.alternate,O!==null&&$s(O)===null&&(U=C),C=C.sibling;C=U,C===null?(U=b.child,b.child=null):(U=C.sibling,C.sibling=null),Wg(b,!1,U,C,V);break;case"backwards":for(C=null,U=b.child,b.child=null;U!==null;){if(O=U.alternate,O!==null&&$s(O)===null){b.child=U;break}O=U.sibling,U.sibling=C,C=U,U=O}Wg(b,!0,C,null,V);break;case"together":Wg(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function ll(O,b,C){if(O!==null&&(b.dependencies=O.dependencies),xd|=b.lanes,!(C&b.childLanes))return null;if(O!==null&&b.child!==O.child)throw Error(a(153));if(b.child!==null){for(O=b.child,C=zc(O,O.pendingProps),b.child=C,C.return=b;O.sibling!==null;)O=O.sibling,C=C.sibling=zc(O,O.pendingProps),C.return=b;C.sibling=null}return b.child}function I1(O,b,C){switch(b.tag){case 3:$1(b),ya();break;case 5:JO(b);break;case 1:Pi(b.type)&&Go(b);break;case 4:rp(b,b.stateNode.containerInfo);break;case 10:Eg(b,b.type._context,b.memoizedProps.value);break;case 13:var k=b.memoizedState;if(k!==null)return k.dehydrated!==null?(En(Si,Si.current&1),b.flags|=128,null):C&b.child.childLanes?dv(O,b,C):(En(Si,Si.current&1),O=ll(O,b,C),O!==null?O.sibling:null);En(Si,Si.current&1);break;case 19:if(k=(C&b.childLanes)!==0,O.flags&128){if(k)return pv(O,b,C);b.flags|=128}var U=b.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),En(Si,Si.current),k)break;return null;case 22:case 23:return b.lanes=0,cv(O,b,C)}return ll(O,b,C)}function R1(O,b){switch(ZO(b),b.tag){case 1:return Pi(b.type)&&Dl(),O=b.flags,O&65536?(b.flags=O&-65537|128,b):null;case 3:return nh(),lt(_r),lt(pi),sp(),O=b.flags,O&65536&&!(O&128)?(b.flags=O&-65537|128,b):null;case 5:return KO(b),null;case 13:if(lt(Si),O=b.memoizedState,O!==null&&O.dehydrated!==null){if(b.alternate===null)throw Error(a(340));ya()}return O=b.flags,O&65536?(b.flags=O&-65537|128,b):null;case 19:return lt(Si),null;case 4:return nh(),null;case 10:return tl(b.type._context),null;case 22:case 23:return n_(),null;case 24:return null;default:return null}}var pp=!1,wa=!1,mp=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Sd(O,b){var C=O.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){Is(O,b,k)}else C.current=null}function Td(O,b,C){try{C()}catch(k){Is(O,b,k)}}var M1=!1;function P1(O,b){for(Q(O.containerInfo),wt=b;wt!==null;)if(O=wt,b=O.child,(O.subtreeFlags&1028)!==0&&b!==null)b.return=O,wt=b;else for(;wt!==null;){O=wt;try{var C=O.alternate;if(O.flags&1024)switch(O.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,U=C.memoizedState,V=O.stateNode,ve=V.getSnapshotBeforeUpdate(O.elementType===O.type?k:cs(O.type,k),U);V.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:Ue&&mt(O.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(De){Is(O,O.return,De)}if(b=O.sibling,b!==null){b.return=O.return,wt=b;break}wt=O.return}return C=M1,M1=!1,C}function Lc(O,b,C){var k=b.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var U=k=k.next;do{if((U.tag&O)===O){var V=U.destroy;U.destroy=void 0,V!==void 0&&Td(b,C,V)}U=U.next}while(U!==k)}}function Nc(O,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var C=b=b.next;do{if((C.tag&O)===O){var k=C.create;C.destroy=k()}C=C.next}while(C!==b)}}function mv(O){var b=O.ref;if(b!==null){var C=O.stateNode;switch(O.tag){case 5:O=re(C);break;default:O=C}typeof b=="function"?b(O):b.current=O}}function D1(O,b,C){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Ka,b)}catch{}switch(b.tag){case 0:case 11:case 14:case 15:if(O=b.updateQueue,O!==null&&(O=O.lastEffect,O!==null)){var k=O=O.next;do{var U=k,V=U.destroy;U=U.tag,V!==void 0&&(U&2||U&4)&&Td(b,C,V),k=k.next}while(k!==O)}break;case 1:if(Sd(b,C),O=b.stateNode,typeof O.componentWillUnmount=="function")try{O.props=b.memoizedProps,O.state=b.memoizedState,O.componentWillUnmount()}catch(ve){Is(b,C,ve)}break;case 5:Sd(b,C);break;case 4:Ue?F1(O,b,C):we&&we&&(b=b.stateNode.containerInfo,C=Tn(b),vn(b,C))}}function L1(O,b,C){for(var k=b;;)if(D1(O,k,C),k.child===null||Ue&&k.tag===4){if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function N1(O){var b=O.alternate;b!==null&&(O.alternate=null,N1(b)),O.child=null,O.deletions=null,O.sibling=null,O.tag===5&&(b=O.stateNode,b!==null&&ae(b)),O.stateNode=null,O.return=null,O.dependencies=null,O.memoizedProps=null,O.memoizedState=null,O.pendingProps=null,O.stateNode=null,O.updateQueue=null}function gp(O){return O.tag===5||O.tag===3||O.tag===4}function gv(O){e:for(;;){for(;O.sibling===null;){if(O.return===null||gp(O.return))return null;O=O.return}for(O.sibling.return=O.return,O=O.sibling;O.tag!==5&&O.tag!==6&&O.tag!==18;){if(O.flags&2||O.child===null||O.tag===4)continue e;O.child.return=O,O=O.child}if(!(O.flags&2))return O.stateNode}}function B1(O){if(Ue){e:{for(var b=O.return;b!==null;){if(gp(b))break e;b=b.return}throw Error(a(160))}var C=b;switch(C.tag){case 5:b=C.stateNode,C.flags&32&&(ge(b),C.flags&=-33),C=gv(O),Qg(O,C,b);break;case 3:case 4:b=C.stateNode.containerInfo,C=gv(O),zg(O,C,b);break;default:throw Error(a(161))}}}function zg(O,b,C){var k=O.tag;if(k===5||k===6)O=O.stateNode,b?We(C,O,b):Je(C,O);else if(k!==4&&(O=O.child,O!==null))for(zg(O,b,C),O=O.sibling;O!==null;)zg(O,b,C),O=O.sibling}function Qg(O,b,C){var k=O.tag;if(k===5||k===6)O=O.stateNode,b?Le(C,O,b):Se(C,O);else if(k!==4&&(O=O.child,O!==null))for(Qg(O,b,C),O=O.sibling;O!==null;)Qg(O,b,C),O=O.sibling}function F1(O,b,C){for(var k=b,U=!1,V,ve;;){if(!U){U=k.return;e:for(;;){if(U===null)throw Error(a(160));switch(V=U.stateNode,U.tag){case 5:ve=!1;break e;case 3:V=V.containerInfo,ve=!0;break e;case 4:V=V.containerInfo,ve=!0;break e}U=U.return}U=!0}if(k.tag===5||k.tag===6)L1(O,k,C),ve?te(V,k.stateNode):F(V,k.stateNode);else if(k.tag===18)ve?mr(V,k.stateNode):fi(V,k.stateNode);else if(k.tag===4){if(k.child!==null){V=k.stateNode.containerInfo,ve=!0,k.child.return=k,k=k.child;continue}}else if(D1(O,k,C),k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return;k=k.return,k.tag===4&&(U=!1)}k.sibling.return=k.return,k=k.sibling}}function _p(O,b){if(Ue){switch(b.tag){case 0:case 11:case 14:case 15:Lc(3,b,b.return),Nc(3,b),Lc(5,b,b.return);return;case 1:return;case 5:var C=b.stateNode;if(C!=null){var k=b.memoizedProps;O=O!==null?O.memoizedProps:k;var U=b.type,V=b.updateQueue;b.updateQueue=null,V!==null&&_e(C,V,U,O,k,b)}return;case 6:if(b.stateNode===null)throw Error(a(162));C=b.memoizedProps,Ve(b.stateNode,O!==null?O.memoizedProps:C,C);return;case 3:Ge&&O!==null&&O.memoizedState.isDehydrated&&qt(b.stateNode.containerInfo);return;case 12:return;case 13:wd(b);return;case 19:wd(b);return;case 17:return}throw Error(a(163))}switch(b.tag){case 0:case 11:case 14:case 15:Lc(3,b,b.return),Nc(3,b),Lc(5,b,b.return);return;case 12:return;case 13:wd(b);return;case 19:wd(b);return;case 3:Ge&&O!==null&&O.memoizedState.isDehydrated&&qt(b.stateNode.containerInfo);break;case 22:case 23:return}e:if(we){switch(b.tag){case 1:case 5:case 6:break e;case 3:case 4:b=b.stateNode,vn(b.containerInfo,b.pendingChildren);break e}throw Error(a(163))}}function wd(O){var b=O.updateQueue;if(b!==null){O.updateQueue=null;var C=O.stateNode;C===null&&(C=O.stateNode=new mp),b.forEach(function(k){var U=kk.bind(null,O,k);C.has(k)||(C.add(k),k.then(U,U))})}}function _v(O,b){for(wt=b;wt!==null;){b=wt;var C=b.deletions;if(C!==null)for(var k=0;k<C.length;k++){var U=C[k];try{var V=O;Ue?F1(V,U,b):L1(V,U,b);var ve=U.alternate;ve!==null&&(ve.return=null),U.return=null}catch(Nt){Is(U,b,Nt)}}if(C=b.child,b.subtreeFlags&12854&&C!==null)C.return=b,wt=C;else for(;wt!==null;){b=wt;try{var De=b.flags;if(De&32&&Ue&&ge(b.stateNode),De&512){var Ke=b.alternate;if(Ke!==null){var ft=Ke.ref;ft!==null&&(typeof ft=="function"?ft(null):ft.current=null)}}if(De&8192)switch(b.tag){case 13:if(b.memoizedState!==null){var It=b.alternate;(It===null||It.memoizedState===null)&&(Jg=li())}break;case 22:var an=b.memoizedState!==null,Ht=b.alternate,ti=Ht!==null&&Ht.memoizedState!==null;if(C=b,Ue){e:if(k=C,U=an,V=null,Ue)for(var zt=k;;){if(zt.tag===5){if(V===null){V=zt;var kr=zt.stateNode;U?Me(kr):Pe(zt.stateNode,zt.memoizedProps)}}else if(zt.tag===6){if(V===null){var lr=zt.stateNode;U?oe(lr):et(lr,zt.memoizedProps)}}else if((zt.tag!==22&&zt.tag!==23||zt.memoizedState===null||zt===k)&&zt.child!==null){zt.child.return=zt,zt=zt.child;continue}if(zt===k)break;for(;zt.sibling===null;){if(zt.return===null||zt.return===k)break e;V===zt&&(V=null),zt=zt.return}V===zt&&(V=null),zt.sibling.return=zt.return,zt=zt.sibling}}if(an&&!ti&&C.mode&1){wt=C;for(var je=C.child;je!==null;){for(C=wt=je;wt!==null;){k=wt;var Be=k.child;switch(k.tag){case 0:case 11:case 14:case 15:Lc(4,k,k.return);break;case 1:Sd(k,k.return);var Ze=k.stateNode;if(typeof Ze.componentWillUnmount=="function"){var gt=k.return;try{Ze.props=k.memoizedProps,Ze.state=k.memoizedState,Ze.componentWillUnmount()}catch(Nt){Is(k,gt,Nt)}}break;case 5:Sd(k,k.return);break;case 22:if(k.memoizedState!==null){yv(C);continue}}Be!==null?(Be.return=k,wt=Be):yv(C)}je=je.sibling}}}switch(De&4102){case 2:B1(b),b.flags&=-3;break;case 6:B1(b),b.flags&=-3,_p(b.alternate,b);break;case 4096:b.flags&=-4097;break;case 4100:b.flags&=-4097,_p(b.alternate,b);break;case 4:_p(b.alternate,b)}}catch(Nt){Is(b,b.return,Nt)}if(C=b.sibling,C!==null){C.return=b.return,wt=C;break}wt=b.return}}}function U1(O,b,C){wt=O,Ov(O)}function Ov(O,b,C){for(var k=(O.mode&1)!==0;wt!==null;){var U=wt,V=U.child;if(U.tag===22&&k){var ve=U.memoizedState!==null||pp;if(!ve){var De=U.alternate,Ke=De!==null&&De.memoizedState!==null||wa;De=pp;var ft=wa;if(pp=ve,(wa=Ke)&&!ft)for(wt=U;wt!==null;)ve=wt,Ke=ve.child,ve.tag===22&&ve.memoizedState!==null?bv(U):Ke!==null?(Ke.return=ve,wt=Ke):bv(U);for(;V!==null;)wt=V,Ov(V),V=V.sibling;wt=U,pp=De,wa=ft}vv(O)}else U.subtreeFlags&8772&&V!==null?(V.return=U,wt=V):vv(O)}}function vv(O){for(;wt!==null;){var b=wt;if(b.flags&8772){var C=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:wa||Nc(5,b);break;case 1:var k=b.stateNode;if(b.flags&4&&!wa)if(C===null)k.componentDidMount();else{var U=b.elementType===b.type?C.memoizedProps:cs(b.type,C.memoizedProps);k.componentDidUpdate(U,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var V=b.updateQueue;V!==null&&$g(b,V,k);break;case 3:var ve=b.updateQueue;if(ve!==null){if(C=null,b.child!==null)switch(b.child.tag){case 5:C=re(b.child.stateNode);break;case 1:C=b.child.stateNode}$g(b,ve,C)}break;case 5:var De=b.stateNode;C===null&&b.flags&4&&ot(De,b.type,b.memoizedProps,b);break;case 6:break;case 4:break;case 12:break;case 13:if(Ge&&b.memoizedState===null){var Ke=b.alternate;if(Ke!==null){var ft=Ke.memoizedState;if(ft!==null){var It=ft.dehydrated;It!==null&&at(It)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}wa||b.flags&512&&mv(b)}catch(an){Is(b,b.return,an)}}if(b===O){wt=null;break}if(C=b.sibling,C!==null){C.return=b.return,wt=C;break}wt=b.return}}function yv(O){for(;wt!==null;){var b=wt;if(b===O){wt=null;break}var C=b.sibling;if(C!==null){C.return=b.return,wt=C;break}wt=b.return}}function bv(O){for(;wt!==null;){var b=wt;try{switch(b.tag){case 0:case 11:case 15:var C=b.return;try{Nc(4,b)}catch(Ke){Is(b,C,Ke)}break;case 1:var k=b.stateNode;if(typeof k.componentDidMount=="function"){var U=b.return;try{k.componentDidMount()}catch(Ke){Is(b,U,Ke)}}var V=b.return;try{mv(b)}catch(Ke){Is(b,V,Ke)}break;case 5:var ve=b.return;try{mv(b)}catch(Ke){Is(b,ve,Ke)}}}catch(Ke){Is(b,b.return,Ke)}if(b===O){wt=null;break}var De=b.sibling;if(De!==null){De.return=b.return,wt=De;break}wt=b.return}}var Op=0,vp=1,yp=2,Gl=3,Vg=4;if(typeof Symbol=="function"&&Symbol.for){var Xo=Symbol.for;Op=Xo("selector.component"),vp=Xo("selector.has_pseudo_class"),yp=Xo("selector.role"),Gl=Xo("selector.test_id"),Vg=Xo("selector.text")}function bp(O){var b=W(O);if(b!=null){if(typeof b.memoizedProps["data-testname"]!="string")throw Error(a(364));return b}if(O=Te(O),O===null)throw Error(a(362));return O.stateNode.current}function Hg(O,b){switch(b.$$typeof){case Op:if(O.type===b.value)return!0;break;case vp:e:{b=b.value,O=[O,0];for(var C=0;C<O.length;){var k=O[C++],U=O[C++],V=b[U];if(k.tag!==5||!ue(k)){for(;V!=null&&Hg(k,V);)U++,V=b[U];if(U===b.length){b=!0;break e}else for(k=k.child;k!==null;)O.push(k,U),k=k.sibling}}b=!1}return b;case yp:if(O.tag===5&&me(O.stateNode,b.value))return!0;break;case Vg:if((O.tag===5||O.tag===6)&&(O=Y(O),O!==null&&0<=O.indexOf(b.value)))return!0;break;case Gl:if(O.tag===5&&(O=O.memoizedProps["data-testname"],typeof O=="string"&&O.toLowerCase()===b.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Xg(O){switch(O.$$typeof){case Op:return"<"+(D(O.value)||"Unknown")+">";case vp:return":has("+(Xg(O)||"")+")";case yp:return'[role="'+O.value+'"]';case Vg:return'"'+O.value+'"';case Gl:return'[data-testname="'+O.value+'"]';default:throw Error(a(365))}}function G1(O,b){var C=[];O=[O,0];for(var k=0;k<O.length;){var U=O[k++],V=O[k++],ve=b[V];if(U.tag!==5||!ue(U)){for(;ve!=null&&Hg(U,ve);)V++,ve=b[V];if(V===b.length)C.push(U);else for(U=U.child;U!==null;)O.push(U,V),U=U.sibling}}return C}function jg(O,b){if(!Ae)throw Error(a(363));O=bp(O),O=G1(O,b),b=[],O=Array.from(O);for(var C=0;C<O.length;){var k=O[C++];if(k.tag===5)ue(k)||b.push(k.stateNode);else for(k=k.child;k!==null;)O.push(k),k=k.sibling}return b}var xk=Math.ceil,Ed=l.ReactCurrentDispatcher,Yg=l.ReactCurrentOwner,Li=l.ReactCurrentBatchConfig,yn=0,Hi=null,ar=null,Qr=0,Js=0,Wl=Jn(0),Or=0,zl=null,xd=0,Zg=0,qg=0,$d=null,ks=null,Jg=0,Sp=1/0;function oh(){Sp=li()+500}var Kg=!1,Sv=null,Bc=null,Cd=!1,cl=null,Ad=0,ah=0,kd=null,Tp=-1,e_=0;function Vr(){return yn&6?li():Tp!==-1?Tp:Tp=li()}function Fc(O){return O.mode&1?yn&2&&Qr!==0?Qr&-Qr:Gi.transition!==null?(e_===0&&(O=Nl,Nl<<=1,!(Nl&4194240)&&(Nl=64),e_=O),e_):(O=fn,O!==0?O:Oe()):1}function jo(O,b,C){if(50<ah)throw ah=0,kd=null,Error(a(185));var k=t_(O,b);return k===null?null:(Wo(k,b,C),(!(yn&2)||k!==Hi)&&(k===Hi&&(!(yn&2)&&(Zg|=b),Or===4&&Ql(k,Qr)),Ks(k,C),b===1&&yn===0&&!(O.mode&1)&&(oh(),el&&qs())),k)}function t_(O,b){O.lanes|=b;var C=O.alternate;for(C!==null&&(C.lanes|=b),C=O,O=O.return;O!==null;)O.childLanes|=b,C=O.alternate,C!==null&&(C.childLanes|=b),C=O,O=O.return;return C.tag===3?C.stateNode:null}function Ks(O,b){var C=O.callbackNode;Gu(O,b);var k=kc(O,O===Hi?Qr:0);if(k===0)C!==null&&dd(C),O.callbackNode=null,O.callbackPriority=0;else if(b=k&-k,O.callbackPriority!==b){if(C!=null&&dd(C),b===1)O.tag===0?ls(Ev.bind(null,O)):fd(Ev.bind(null,O)),ne?pe(function(){yn===0&&qs()}):zo(xr,qs),C=null;else{switch(Rc(k)){case 1:C=xr;break;case 4:C=Qu;break;case 16:C=os;break;case 536870912:C=Vu;break;default:C=os}C=X1(C,W1.bind(null,O))}O.callbackPriority=b,O.callbackNode=C}}function W1(O,b){if(Tp=-1,e_=0,yn&6)throw Error(a(327));var C=O.callbackNode;if(Wc()&&O.callbackNode!==C)return null;var k=kc(O,O===Hi?Qr:0);if(k===0)return null;if(k&30||k&O.expiredLanes||b)b=lh(O,k);else{b=k;var U=yn;yn|=2;var V=Cv();(Hi!==O||Qr!==b)&&(oh(),Uc(O,b));do try{$k();break}catch(De){$v(O,De)}while(1);pd(),Ed.current=V,yn=U,ar!==null?b=0:(Hi=null,Qr=0,b=Or)}if(b!==0){if(b===2&&(U=mo(O),U!==0&&(k=U,b=Tv(O,U))),b===1)throw C=zl,Uc(O,0),Ql(O,k),Ks(O,li()),C;if(b===6)Ql(O,k);else{if(U=O.current.alternate,!(k&30)&&!z1(U)&&(b=lh(O,k),b===2&&(V=mo(O),V!==0&&(k=V,b=Tv(O,V))),b===1))throw C=zl,Uc(O,0),Ql(O,k),Ks(O,li()),C;switch(O.finishedWork=U,O.finishedLanes=k,b){case 0:case 1:throw Error(a(345));case 2:Gc(O,ks);break;case 3:if(Ql(O,k),(k&130023424)===k&&(b=Jg+500-li(),10<b)){if(kc(O,0)!==0)break;if(U=O.suspendedLanes,(U&k)!==k){Vr(),O.pingedLanes|=O.suspendedLanes&U;break}O.timeoutHandle=ye(Gc.bind(null,O,ks),b);break}Gc(O,ks);break;case 4:if(Ql(O,k),(k&4194240)===k)break;for(b=O.eventTimes,U=-1;0<k;){var ve=31-ss(k);V=1<<ve,ve=b[ve],ve>U&&(U=ve),k&=~V}if(k=U,k=li()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*xk(k/1960))-k,10<k){O.timeoutHandle=ye(Gc.bind(null,O,ks),k);break}Gc(O,ks);break;case 5:Gc(O,ks);break;default:throw Error(a(329))}}}return Ks(O,li()),O.callbackNode===C?W1.bind(null,O):null}function Tv(O,b){var C=$d;return O.current.memoizedState.isDehydrated&&(Uc(O,b).flags|=256),O=lh(O,b),O!==2&&(b=ks,ks=C,b!==null&&wv(b)),O}function wv(O){ks===null?ks=O:ks.push.apply(ks,O)}function z1(O){for(var b=O;;){if(b.flags&16384){var C=b.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var U=C[k],V=U.getSnapshot;U=U.value;try{if(!as(V(),U))return!1}catch{return!1}}}if(C=b.child,b.subtreeFlags&16384&&C!==null)C.return=b,b=C;else{if(b===O)break;for(;b.sibling===null;){if(b.return===null||b.return===O)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Ql(O,b){for(b&=~qg,b&=~Zg,O.suspendedLanes|=b,O.pingedLanes&=~b,O=O.expirationTimes;0<b;){var C=31-ss(b),k=1<<C;O[C]=-1,b&=~k}}function Ev(O){if(yn&6)throw Error(a(327));Wc();var b=kc(O,0);if(!(b&1))return Ks(O,li()),null;var C=lh(O,b);if(O.tag!==0&&C===2){var k=mo(O);k!==0&&(b=k,C=Tv(O,k))}if(C===1)throw C=zl,Uc(O,0),Ql(O,b),Ks(O,li()),C;if(C===6)throw Error(a(345));return O.finishedWork=O.current.alternate,O.finishedLanes=b,Gc(O,ks),Ks(O,li()),null}function xv(O){cl!==null&&cl.tag===0&&!(yn&6)&&Wc();var b=yn;yn|=1;var C=Li.transition,k=fn;try{if(Li.transition=null,fn=1,O)return O()}finally{fn=k,Li.transition=C,yn=b,!(yn&6)&&qs()}}function n_(){Js=Wl.current,lt(Wl)}function Uc(O,b){O.finishedWork=null,O.finishedLanes=0;var C=O.timeoutHandle;if(C!==Fe&&(O.timeoutHandle=Fe,xe(C)),ar!==null)for(C=ar.return;C!==null;){var k=C;switch(ZO(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&Dl();break;case 3:nh(),lt(_r),lt(pi),sp();break;case 5:KO(k);break;case 4:nh();break;case 13:lt(Si);break;case 19:lt(Si);break;case 10:tl(k.type._context);break;case 22:case 23:n_()}C=C.return}if(Hi=O,ar=O=zc(O.current,null),Qr=Js=b,Or=0,zl=null,qg=Zg=xd=0,ks=$d=null,zi!==null){for(b=0;b<zi.length;b++)if(C=zi[b],k=C.interleaved,k!==null){C.interleaved=null;var U=k.next,V=C.pending;if(V!==null){var ve=V.next;V.next=U,k.next=ve}C.pending=k}zi=null}return O}function $v(O,b){do{var C=ar;try{if(pd(),kg.current=Tt,op){for(var k=Di.memoizedState;k!==null;){var U=k.queue;U!==null&&(U.pending=null),k=k.next}op=!1}if(Kn=0,Ar=us=Di=null,ap=!1,lp=0,Yg.current=null,C===null||C.return===null){Or=1,zl=b,ar=null;break}e:{var V=O,ve=C.return,De=C,Ke=b;if(b=Qr,De.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ft=Ke,It=De,an=It.tag;if(!(It.mode&1)&&(an===0||an===11||an===15)){var Ht=It.alternate;Ht?(It.updateQueue=Ht.updateQueue,It.memoizedState=Ht.memoizedState,It.lanes=Ht.lanes):(It.updateQueue=null,It.memoizedState=null)}var ti=b1(ve);if(ti!==null){ti.flags&=-257,S1(ti,ve,De,V,b),ti.mode&1&&y1(V,ft,b),b=ti,Ke=ft;var zt=b.updateQueue;if(zt===null){var kr=new Set;kr.add(Ke),b.updateQueue=kr}else zt.add(Ke);break e}else{if(!(b&1)){y1(V,ft,b),wp();break e}Ke=Error(a(426))}}else if(mi&&De.mode&1){var lr=b1(ve);if(lr!==null){!(lr.flags&65536)&&(lr.flags|=256),S1(lr,ve,De,V,b),tp(Ke);break e}}V=Ke,Or!==4&&(Or=2),$d===null?$d=[V]:$d.push(V),Ke=ov(Ke,De),De=ve;do{switch(De.tag){case 3:De.flags|=65536,b&=-b,De.lanes|=b;var je=O1(De,Ke,b);VO(De,je);break e;case 1:V=Ke;var Be=De.type,Ze=De.stateNode;if(!(De.flags&128)&&(typeof Be.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(Bc===null||!Bc.has(Ze)))){De.flags|=65536,b&=-b,De.lanes|=b;var gt=v1(De,V,b);VO(De,gt);break e}}De=De.return}while(De!==null)}kv(C)}catch(Nt){b=Nt,ar===C&&C!==null&&(ar=C=C.return);continue}break}while(1)}function Cv(){var O=Ed.current;return Ed.current=Tt,O===null?Tt:O}function wp(){(Or===0||Or===3||Or===2)&&(Or=4),Hi===null||!(xd&268435455)&&!(Zg&268435455)||Ql(Hi,Qr)}function lh(O,b){var C=yn;yn|=2;var k=Cv();Hi===O&&Qr===b||Uc(O,b);do try{Q1();break}catch(U){$v(O,U)}while(1);if(pd(),yn=C,Ed.current=k,ar!==null)throw Error(a(261));return Hi=null,Qr=0,Or}function Q1(){for(;ar!==null;)Av(ar)}function $k(){for(;ar!==null&&!zu();)Av(ar)}function Av(O){var b=H1(O.alternate,O,Js);O.memoizedProps=O.pendingProps,b===null?kv(O):ar=b,Yg.current=null}function kv(O){var b=O;do{var C=b.alternate;if(O=b.return,b.flags&32768){if(C=R1(C,b),C!==null){C.flags&=32767,ar=C;return}if(O!==null)O.flags|=32768,O.subtreeFlags=0,O.deletions=null;else{Or=6,ar=null;return}}else if(C=wk(C,b,Js),C!==null){ar=C;return}if(b=b.sibling,b!==null){ar=b;return}ar=b=O}while(b!==null);Or===0&&(Or=5)}function Gc(O,b){var C=fn,k=Li.transition;try{Li.transition=null,fn=1,V1(O,b,C)}finally{Li.transition=k,fn=C}return null}function V1(O,b,C){do Wc();while(cl!==null);if(yn&6)throw Error(a(327));var k=O.finishedWork,U=O.finishedLanes;if(k===null)return null;if(O.finishedWork=null,O.finishedLanes=0,k===O.current)throw Error(a(177));O.callbackNode=null,O.callbackPriority=0;var V=k.lanes|k.childLanes;if(Ic(O,V),O===Hi&&(ar=Hi=null,Qr=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||Cd||(Cd=!0,X1(os,function(){return Wc(),null})),V=(k.flags&15990)!==0,k.subtreeFlags&15990||V){V=Li.transition,Li.transition=null;var ve=fn;fn=1;var De=yn;yn|=4,Yg.current=null,P1(O,k),_v(O,k),ee(O.containerInfo),O.current=k,U1(k),Ys(),yn=De,fn=ve,Li.transition=V}else O.current=k;if(Cd&&(Cd=!1,cl=O,Ad=U),V=O.pendingLanes,V===0&&(Bc=null),qf(k.stateNode),Ks(O,li()),b!==null)for(C=O.onRecoverableError,k=0;k<b.length;k++)C(b[k]);if(Kg)throw Kg=!1,O=Sv,Sv=null,O;return Ad&1&&O.tag!==0&&Wc(),V=O.pendingLanes,V&1?O===kd?ah++:(ah=0,kd=O):ah=0,qs(),null}function Wc(){if(cl!==null){var O=Rc(Ad),b=Li.transition,C=fn;try{if(Li.transition=null,fn=16>O?16:O,cl===null)var k=!1;else{if(O=cl,cl=null,Ad=0,yn&6)throw Error(a(331));var U=yn;for(yn|=4,wt=O.current;wt!==null;){var V=wt,ve=V.child;if(wt.flags&16){var De=V.deletions;if(De!==null){for(var Ke=0;Ke<De.length;Ke++){var ft=De[Ke];for(wt=ft;wt!==null;){var It=wt;switch(It.tag){case 0:case 11:case 15:Lc(8,It,V)}var an=It.child;if(an!==null)an.return=It,wt=an;else for(;wt!==null;){It=wt;var Ht=It.sibling,ti=It.return;if(N1(It),It===ft){wt=null;break}if(Ht!==null){Ht.return=ti,wt=Ht;break}wt=ti}}}var zt=V.alternate;if(zt!==null){var kr=zt.child;if(kr!==null){zt.child=null;do{var lr=kr.sibling;kr.sibling=null,kr=lr}while(kr!==null)}}wt=V}}if(V.subtreeFlags&2064&&ve!==null)ve.return=V,wt=ve;else e:for(;wt!==null;){if(V=wt,V.flags&2048)switch(V.tag){case 0:case 11:case 15:Lc(9,V,V.return)}var je=V.sibling;if(je!==null){je.return=V.return,wt=je;break e}wt=V.return}}var Be=O.current;for(wt=Be;wt!==null;){ve=wt;var Ze=ve.child;if(ve.subtreeFlags&2064&&Ze!==null)Ze.return=ve,wt=Ze;else e:for(ve=Be;wt!==null;){if(De=wt,De.flags&2048)try{switch(De.tag){case 0:case 11:case 15:Nc(9,De)}}catch(Nt){Is(De,De.return,Nt)}if(De===ve){wt=null;break e}var gt=De.sibling;if(gt!==null){gt.return=De.return,wt=gt;break e}wt=De.return}}if(yn=U,qs(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Ka,O)}catch{}k=!0}return k}finally{fn=C,Li.transition=b}}return!1}function Iv(O,b,C){b=ov(C,b),b=O1(O,b,1),Bl(O,b),b=Vr(),O=t_(O,1),O!==null&&(Wo(O,1,b),Ks(O,b))}function Is(O,b,C){if(O.tag===3)Iv(O,O,C);else for(;b!==null;){if(b.tag===3){Iv(b,O,C);break}else if(b.tag===1){var k=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Bc===null||!Bc.has(k))){O=ov(C,O),O=v1(b,O,1),Bl(b,O),O=Vr(),b=t_(b,1),b!==null&&(Wo(b,1,O),Ks(b,O));break}}b=b.return}}function Ck(O,b,C){var k=O.pingCache;k!==null&&k.delete(b),b=Vr(),O.pingedLanes|=O.suspendedLanes&C,Hi===O&&(Qr&C)===C&&(Or===4||Or===3&&(Qr&130023424)===Qr&&500>li()-Jg?Uc(O,0):qg|=C),Ks(O,b)}function Rv(O,b){b===0&&(O.mode&1?(b=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):b=1);var C=Vr();O=t_(O,b),O!==null&&(Wo(O,b,C),Ks(O,C))}function Ak(O){var b=O.memoizedState,C=0;b!==null&&(C=b.retryLane),Rv(O,C)}function kk(O,b){var C=0;switch(O.tag){case 13:var k=O.stateNode,U=O.memoizedState;U!==null&&(C=U.retryLane);break;case 19:k=O.stateNode;break;default:throw Error(a(314))}k!==null&&k.delete(b),Rv(O,C)}var H1;H1=function(O,b,C){if(O!==null)if(O.memoizedProps!==b.pendingProps||_r.current)bo=!0;else{if(!(O.lanes&C)&&!(b.flags&128))return bo=!1,I1(O,b,C);bo=!!(O.flags&131072)}else bo=!1,mi&&b.flags&1048576&&YO(b,Zu,b.index);switch(b.lanes=0,b.tag){case 2:var k=b.type;O!==null&&(O.alternate=null,b.alternate=null,b.flags|=2),O=b.pendingProps;var U=Wr(b,pi.current);Cr(b,C),U=tv(null,b,k,O,U,C);var V=vd();return b.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,Pi(k)?(V=!0,Go(b)):V=!1,b.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,QO(b),U.updater=Kf,b.stateNode=U,U._reactInternals=b,jO(b,k,O,C),b=hv(null,b,k,!0,V,C)):(b.tag=0,mi&&V&&Cg(b),As(null,b,U,C),b=b.child),b;case 16:k=b.elementType;e:{switch(O!==null&&(O.alternate=null,b.alternate=null,b.flags|=2),O=b.pendingProps,U=k._init,k=U(k._payload),b.type=k,U=b.tag=Rk(k),O=cs(k,O),U){case 0:b=uv(null,b,k,O,C);break e;case 1:b=x1(null,b,k,O,C);break e;case 11:b=lv(null,b,k,O,C);break e;case 14:b=Dc(null,b,k,cs(k.type,O),C);break e}throw Error(a(306,k,""))}return b;case 0:return k=b.type,U=b.pendingProps,U=b.elementType===k?U:cs(k,U),uv(O,b,k,U,C);case 1:return k=b.type,U=b.pendingProps,U=b.elementType===k?U:cs(k,U),x1(O,b,k,U,C);case 3:e:{if($1(b),O===null)throw Error(a(387));k=b.pendingProps,V=b.memoizedState,U=V.element,o1(O,b),xg(b,k,null,C);var ve=b.memoizedState;if(k=ve.element,Ge&&V.isDehydrated)if(V={element:k,isDehydrated:!1,cache:ve.cache,transitions:ve.transitions},b.updateQueue.baseState=V,b.memoizedState=V,b.flags&256){U=Error(a(423)),b=C1(O,b,k,C,U);break e}else if(k!==U){U=Error(a(424)),b=C1(O,b,k,C,U);break e}else for(Ge&&(Oo=qe(b.stateNode.containerInfo),_o=b,mi=!0,va=null,md=!1),C=eh(b,null,k,C),b.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(ya(),k===U){b=ll(O,b,C);break e}As(O,b,k,C)}b=b.child}return b;case 5:return JO(b),O===null&&gd(b),k=b.type,U=b.pendingProps,V=O!==null?O.memoizedProps:null,ve=U.children,ie(k,U)?ve=null:V!==null&&ie(k,V)&&(b.flags|=32),E1(O,b),As(O,b,ve,C),b.child;case 6:return O===null&&gd(b),null;case 13:return dv(O,b,C);case 4:return rp(b,b.stateNode.containerInfo),k=b.pendingProps,O===null?b.child=ba(b,null,k,C):As(O,b,k,C),b.child;case 11:return k=b.type,U=b.pendingProps,U=b.elementType===k?U:cs(k,U),lv(O,b,k,U,C);case 7:return As(O,b,b.pendingProps,C),b.child;case 8:return As(O,b,b.pendingProps.children,C),b.child;case 12:return As(O,b,b.pendingProps.children,C),b.child;case 10:e:{if(k=b.type._context,U=b.pendingProps,V=b.memoizedProps,ve=U.value,Eg(b,k,ve),V!==null)if(as(V.value,ve)){if(V.children===U.children&&!_r.current){b=ll(O,b,C);break e}}else for(V=b.child,V!==null&&(V.return=b);V!==null;){var De=V.dependencies;if(De!==null){ve=V.child;for(var Ke=De.firstContext;Ke!==null;){if(Ke.context===k){if(V.tag===1){Ke=Qo(-1,C&-C),Ke.tag=2;var ft=V.updateQueue;if(ft!==null){ft=ft.shared;var It=ft.pending;It===null?Ke.next=Ke:(Ke.next=It.next,It.next=Ke),ft.pending=Ke}}V.lanes|=C,Ke=V.alternate,Ke!==null&&(Ke.lanes|=C),Wi(V.return,C,b),De.lanes|=C;break}Ke=Ke.next}}else if(V.tag===10)ve=V.type===b.type?null:V.child;else if(V.tag===18){if(ve=V.return,ve===null)throw Error(a(341));ve.lanes|=C,De=ve.alternate,De!==null&&(De.lanes|=C),Wi(ve,C,b),ve=V.sibling}else ve=V.child;if(ve!==null)ve.return=V;else for(ve=V;ve!==null;){if(ve===b){ve=null;break}if(V=ve.sibling,V!==null){V.return=ve.return,ve=V;break}ve=ve.return}V=ve}As(O,b,U.children,C),b=b.child}return b;case 9:return U=b.type,k=b.pendingProps.children,Cr(b,C),U=ii(U),k=k(U),b.flags|=1,As(O,b,k,C),b.child;case 14:return k=b.type,U=cs(k,b.pendingProps),U=cs(k.type,U),Dc(O,b,k,U,C);case 15:return Bg(O,b,b.type,b.pendingProps,C);case 17:return k=b.type,U=b.pendingProps,U=b.elementType===k?U:cs(k,U),O!==null&&(O.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Pi(k)?(O=!0,Go(b)):O=!1,Cr(b,C),l1(b,k,U),jO(b,k,U,C),hv(null,b,k,!0,O,C);case 19:return pv(O,b,C);case 22:return cv(O,b,C)}throw Error(a(156,b.tag))};function X1(O,b){return zo(O,b)}function Ik(O,b,C,k){this.tag=O,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(O,b,C,k){return new Ik(O,b,C,k)}function Mv(O){return O=O.prototype,!(!O||!O.isReactComponent)}function Rk(O){if(typeof O=="function")return Mv(O)?1:0;if(O!=null){if(O=O.$$typeof,O===y)return 11;if(O===w)return 14}return 2}function zc(O,b){var C=O.alternate;return C===null?(C=Yo(O.tag,b,O.key,O.mode),C.elementType=O.elementType,C.type=O.type,C.stateNode=O.stateNode,C.alternate=O,O.alternate=C):(C.pendingProps=b,C.type=O.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=O.flags&14680064,C.childLanes=O.childLanes,C.lanes=O.lanes,C.child=O.child,C.memoizedProps=O.memoizedProps,C.memoizedState=O.memoizedState,C.updateQueue=O.updateQueue,b=O.dependencies,C.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},C.sibling=O.sibling,C.index=O.index,C.ref=O.ref,C}function i_(O,b,C,k,U,V){var ve=2;if(k=O,typeof O=="function")Mv(O)&&(ve=1);else if(typeof O=="string")ve=5;else e:switch(O){case d:return ch(C.children,U,V,b);case p:ve=8,U|=8;break;case m:return O=Yo(12,C,b,U|2),O.elementType=m,O.lanes=V,O;case S:return O=Yo(13,C,b,U),O.elementType=S,O.lanes=V,O;case T:return O=Yo(19,C,b,U),O.elementType=T,O.lanes=V,O;case $:return Ut(C,U,V,b);default:if(typeof O=="object"&&O!==null)switch(O.$$typeof){case g:ve=10;break e;case v:ve=9;break e;case y:ve=11;break e;case w:ve=14;break e;case E:ve=16,k=null;break e}throw Error(a(130,O==null?O:typeof O,""))}return b=Yo(ve,C,b,U),b.elementType=O,b.type=k,b.lanes=V,b}function ch(O,b,C,k){return O=Yo(7,O,k,b),O.lanes=C,O}function Ut(O,b,C,k){return O=Yo(22,O,k,b),O.elementType=$,O.lanes=C,O.stateNode={},O}function fs(O,b,C){return O=Yo(6,O,null,b),O.lanes=C,O}function Xi(O,b,C){return b=Yo(4,O.children!==null?O.children:[],O.key,b),b.lanes=C,b.stateNode={containerInfo:O.containerInfo,pendingChildren:null,implementation:O.implementation},b}function Mk(O,b,C,k,U){this.tag=b,this.containerInfo=O,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Fe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=k,this.onRecoverableError=U,Ge&&(this.mutableSourceEagerHydrationData=null)}function Pv(O,b,C,k,U,V,ve,De,Ke){return O=new Mk(O,b,C,De,Ke),b===1?(b=1,V===!0&&(b|=8)):b=0,V=Yo(3,null,null,b),O.current=V,V.stateNode=O,V.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null},QO(V),O}function Ep(O){if(!O)return ai;O=O._reactInternals;e:{if(B(O)!==O||O.tag!==1)throw Error(a(170));var b=O;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(Pi(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(a(171))}if(O.tag===1){var C=O.type;if(Pi(C))return ud(O,C,b)}return b}function Qc(O){var b=O._reactInternals;if(b===void 0)throw typeof O.render=="function"?Error(a(188)):(O=Object.keys(O).join(","),Error(a(268,O)));return O=N(b),O===null?null:O.stateNode}function xp(O,b){if(O=O.memoizedState,O!==null&&O.dehydrated!==null){var C=O.retryLane;O.retryLane=C!==0&&C<b?C:b}}function Rs(O,b){xp(O,b),(O=O.alternate)&&xp(O,b)}function Dv(O){return O=N(O),O===null?null:O.stateNode}function j1(){return null}return t.attemptContinuousHydration=function(O){if(O.tag===13){var b=Vr();jo(O,134217728,b),Rs(O,134217728)}},t.attemptHydrationAtCurrentPriority=function(O){if(O.tag===13){var b=Vr(),C=Fc(O);jo(O,C,b),Rs(O,C)}},t.attemptSynchronousHydration=function(O){switch(O.tag){case 3:var b=O.stateNode;if(b.current.memoizedState.isDehydrated){var C=Ja(b.pendingLanes);C!==0&&(ma(b,C|1),Ks(b,li()),!(yn&6)&&(oh(),qs()))}break;case 13:var k=Vr();xv(function(){return jo(O,1,k)}),Rs(O,1)}},t.batchedUpdates=function(O,b){var C=yn;yn|=1;try{return O(b)}finally{yn=C,yn===0&&(oh(),el&&qs())}},t.createComponentSelector=function(O){return{$$typeof:Op,value:O}},t.createContainer=function(O,b,C,k,U,V,ve){return Pv(O,b,!1,null,C,k,U,V,ve)},t.createHasPseudoClassSelector=function(O){return{$$typeof:vp,value:O}},t.createHydrationContainer=function(O,b,C,k,U,V,ve,De,Ke){return O=Pv(C,k,!0,O,U,V,ve,De,Ke),O.context=Ep(null),C=O.current,k=Vr(),U=Fc(C),V=Qo(k,U),V.callback=b??null,Bl(C,V),O.current.lanes=U,Wo(O,U,k),Ks(O,k),O},t.createPortal=function(O,b,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:k==null?null:""+k,children:O,containerInfo:b,implementation:C}},t.createRoleSelector=function(O){return{$$typeof:yp,value:O}},t.createTestNameSelector=function(O){return{$$typeof:Gl,value:O}},t.createTextSelector=function(O){return{$$typeof:Vg,value:O}},t.deferredUpdates=function(O){var b=fn,C=Li.transition;try{return Li.transition=null,fn=16,O()}finally{fn=b,Li.transition=C}},t.discreteUpdates=function(O,b,C,k,U){var V=fn,ve=Li.transition;try{return Li.transition=null,fn=1,O(b,C,k,U)}finally{fn=V,Li.transition=ve,yn===0&&oh()}},t.findAllNodes=jg,t.findBoundingRects=function(O,b){if(!Ae)throw Error(a(363));b=jg(O,b),O=[];for(var C=0;C<b.length;C++)O.push(j(b[C]));for(b=O.length-1;0<b;b--){C=O[b];for(var k=C.x,U=k+C.width,V=C.y,ve=V+C.height,De=b-1;0<=De;De--)if(b!==De){var Ke=O[De],ft=Ke.x,It=ft+Ke.width,an=Ke.y,Ht=an+Ke.height;if(k>=ft&&V>=an&&U<=It&&ve<=Ht){O.splice(b,1);break}else if(k!==ft||C.width!==Ke.width||Ht<V||an>ve){if(!(V!==an||C.height!==Ke.height||It<k||ft>U)){ft>k&&(Ke.width+=ft-k,Ke.x=k),It<U&&(Ke.width=U-ft),O.splice(b,1);break}}else{an>V&&(Ke.height+=an-V,Ke.y=V),Ht<ve&&(Ke.height=ve-an),O.splice(b,1);break}}}return O},t.findHostInstance=Qc,t.findHostInstanceWithNoPortals=function(O){return O=Z(O),O=O!==null?M(O):null,O===null?null:O.stateNode},t.findHostInstanceWithWarning=function(O){return Qc(O)},t.flushControlled=function(O){var b=yn;yn|=1;var C=Li.transition,k=fn;try{Li.transition=null,fn=1,O()}finally{fn=k,Li.transition=C,yn=b,yn===0&&(oh(),qs())}},t.flushPassiveEffects=Wc,t.flushSync=xv,t.focusWithin=function(O,b){if(!Ae)throw Error(a(363));for(O=bp(O),b=G1(O,b),b=Array.from(b),O=0;O<b.length;){var C=b[O++];if(!ue(C)){if(C.tag===5&&Ie(C.stateNode))return!0;for(C=C.child;C!==null;)b.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return fn},t.getFindAllNodesFailureDescription=function(O,b){if(!Ae)throw Error(a(363));var C=0,k=[];O=[bp(O),0];for(var U=0;U<O.length;){var V=O[U++],ve=O[U++],De=b[ve];if((V.tag!==5||!ue(V))&&(Hg(V,De)&&(k.push(Xg(De)),ve++,ve>C&&(C=ve)),ve<b.length))for(V=V.child;V!==null;)O.push(V,ve),V=V.sibling}if(C<b.length){for(O=[];C<b.length;C++)O.push(Xg(b[C]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+O.join(" > ")}return null},t.getPublicRootInstance=function(O){if(O=O.current,!O.child)return null;switch(O.child.tag){case 5:return re(O.child.stateNode);default:return O.child.stateNode}},t.injectIntoDevTools=function(O){if(O={bundleType:O.bundleType,version:O.version,rendererPackageName:O.rendererPackageName,rendererConfig:O.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Dv,findFiberByHostInstance:O.findFiberByHostInstance||j1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")O=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)O=!0;else{try{Ka=b.inject(O),Zs=b}catch{}O=!!b.checkDCE}}return O},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(O,b,C,k){if(!Ae)throw Error(a(363));O=jg(O,b);var U=ze(O,C,k).disconnect;return{disconnect:function(){U()}}},t.registerMutableSourceForHydration=function(O,b){var C=b._getVersion;C=C(b._source),O.mutableSourceEagerHydrationData==null?O.mutableSourceEagerHydrationData=[b,C]:O.mutableSourceEagerHydrationData.push(b,C)},t.runWithPriority=function(O,b){var C=fn;try{return fn=O,b()}finally{fn=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(O,b,C,k){var U=b.current,V=Vr(),ve=Fc(U);return C=Ep(C),b.context===null?b.context=C:b.pendingContext=C,b=Qo(V,ve),b.payload={element:O},k=k===void 0?null:k,k!==null&&(b.callback=k),Bl(U,b),O=jo(U,ve,V),O!==null&&Jf(O,U,ve),ve},t};Cq.exports=mye;var gye=Cq.exports;const _ye=Mu(gye);var Aq={exports:{}},kq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,Q){var ee=X.length;X.push(Q);e:for(;0<ee;){var z=ee-1>>>1,L=X[z];if(0<r(L,Q))X[z]=Q,X[ee]=L,ee=z;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var Q=X[0],ee=X.pop();if(ee!==Q){X[0]=ee;e:for(var z=0,L=X.length,le=L>>>1;z<le;){var de=2*(z+1)-1,ie=X[de],Ce=de+1,ye=X[Ce];if(0>r(ie,ee))Ce<L&&0>r(ye,ie)?(X[z]=ye,X[Ce]=ee,z=Ce):(X[z]=ie,X[de]=ee,z=de);else if(Ce<L&&0>r(ye,ee))X[z]=ye,X[Ce]=ee,z=Ce;else break e}}return Q}function r(X,Q){var ee=X.sortIndex-Q.sortIndex;return ee!==0?ee:X.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,g=!1,v=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Q=t(h);Q!==null;){if(Q.callback===null)i(h);else if(Q.startTime<=X)i(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=t(h)}}function $(X){if(y=!1,E(X),!v)if(t(u)!==null)v=!0,re(A);else{var Q=t(h);Q!==null&&ce($,Q.startTime-X)}}function A(X,Q){v=!1,y&&(y=!1,T(R),R=-1),g=!0;var ee=m;try{for(E(Q),p=t(u);p!==null&&(!(p.expirationTime>Q)||X&&!Z());){var z=p.callback;if(typeof z=="function"){p.callback=null,m=p.priorityLevel;var L=z(p.expirationTime<=Q);Q=n.unstable_now(),typeof L=="function"?p.callback=L:p===t(u)&&i(u),E(Q)}else i(u);p=t(u)}if(p!==null)var le=!0;else{var de=t(h);de!==null&&ce($,de.startTime-Q),le=!1}return le}finally{p=null,m=ee,g=!1}}var I=!1,D=null,R=-1,B=5,G=-1;function Z(){return!(n.unstable_now()-G<B)}function N(){if(D!==null){var X=n.unstable_now();G=X;var Q=!0;try{Q=D(!0,X)}finally{Q?H():(I=!1,D=null)}}else I=!1}var H;if(typeof w=="function")H=function(){w(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,K=M.port2;M.port1.onmessage=N,H=function(){K.postMessage(null)}}else H=function(){S(N,0)};function re(X){D=X,I||(I=!0,H())}function ce(X,Q){R=S(function(){X(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,re(A))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(X){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ee=m;m=Q;try{return X()}finally{m=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,Q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=m;m=X;try{return Q()}finally{m=ee}},n.unstable_scheduleCallback=function(X,Q,ee){var z=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?z+ee:z):ee=z,X){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,X={id:d++,callback:Q,priorityLevel:X,startTime:ee,expirationTime:L,sortIndex:-1},ee>z?(X.sortIndex=ee,e(h,X),t(u)===null&&X===t(h)&&(y?(T(R),R=-1):y=!0,ce($,ee-z))):(X.sortIndex=L,e(u,X),v||g||(v=!0,re(A))),X},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(X){var Q=m;return function(){var ee=m;m=Q;try{return X.apply(this,arguments)}finally{m=ee}}}})(kq);Aq.exports=kq;var pQ=Aq.exports;function Iq(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const Rh=[];function Rq(n,e,t=!1,i={}){for(const o of Rh)if(Iq(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(o=>r.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=Rh.indexOf(r);o!==-1&&Rh.splice(o,1)},i.lifespan)}).catch(o=>r.error=o)};if(Rh.push(r),!t)throw r.promise}const Mq=(n,e,t)=>Rq(n,e,!1,t),Oye=(n,e,t)=>void Rq(n,e,!0,t),vye=n=>{if(n===void 0||n.length===0)Rh.splice(0,Rh.length);else{const e=Rh.find(t=>Iq(n,t.keys,t.equal));if(e){const t=Rh.indexOf(e);t!==-1&&Rh.splice(t,1)}}},q3={},Pq=n=>void Object.assign(q3,n);function yye(n,e){function t(d,{args:p=[],attach:m,...g},v){let y=`${d[0].toUpperCase()}${d.slice(1)}`,S;if(d==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const T=g.object;S=n0(T,{type:d,root:v,attach:m,primitive:!0})}else{const T=q3[y];if(!T)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");S=n0(new T(...p),{type:d,root:v,attach:m,memoizedProps:{args:p}})}return S.__r3f.attach===void 0&&(S instanceof On?S.__r3f.attach="geometry":S instanceof Br&&(S.__r3f.attach="material")),y!=="inject"&&ZM(S,g),S}function i(d,p){let m=!1;if(p){var g,v;(g=p.__r3f)!=null&&g.attach?YM(d,p,p.__r3f.attach):p.isObject3D&&d.isObject3D&&(d.add(p),m=!0),m||(v=d.__r3f)==null||v.objects.push(p),p.__r3f||n0(p,{}),p.__r3f.parent=d,hL(p),i0(p)}}function r(d,p,m){let g=!1;if(p){var v,y;if((v=p.__r3f)!=null&&v.attach)YM(d,p,p.__r3f.attach);else if(p.isObject3D&&d.isObject3D){p.parent=d,p.dispatchEvent({type:"added"});const S=d.children.filter(w=>w!==p),T=S.indexOf(m);d.children=[...S.slice(0,T),p,...S.slice(T)],g=!0}g||(y=d.__r3f)==null||y.objects.push(p),p.__r3f||n0(p,{}),p.__r3f.parent=d,hL(p),i0(p)}}function o(d,p,m=!1){d&&[...d].forEach(g=>a(p,g,m))}function a(d,p,m){if(p){var g,v,y;if(p.__r3f&&(p.__r3f.parent=null),(g=d.__r3f)!=null&&g.objects&&(d.__r3f.objects=d.__r3f.objects.filter($=>$!==p)),(v=p.__r3f)!=null&&v.attach)vQ(d,p,p.__r3f.attach);else if(p.isObject3D&&d.isObject3D){var S;d.remove(p),(S=p.__r3f)!=null&&S.root&&$ye(p.__r3f.root,p)}const w=(y=p.__r3f)==null?void 0:y.primitive,E=m===void 0?p.dispose!==null&&!w:m;if(!w){var T;o((T=p.__r3f)==null?void 0:T.objects,p,E),o(p.children,p,E)}p.__r3f&&(delete p.__r3f.root,delete p.__r3f.objects,delete p.__r3f.handlers,delete p.__r3f.memoizedProps,w||delete p.__r3f),E&&p.dispose&&p.type!=="Scene"&&pQ.unstable_scheduleCallback(pQ.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),i0(d)}}function l(d,p,m,g){var v;const y=(v=d.__r3f)==null?void 0:v.parent;if(!y)return;const S=t(p,m,d.__r3f.root);if(d.children){for(const T of d.children)T.__r3f&&i(S,T);d.children=d.children.filter(T=>!T.__r3f)}d.__r3f.objects.forEach(T=>i(S,T)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||a(y,d),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),i(y,S),S.raycast&&S.__r3f.eventCount&&S.__r3f.root.getState().internal.interaction.push(S),[g,g.alternate].forEach(T=>{T!==null&&(T.stateNode=S,T.ref&&(typeof T.ref=="function"?T.ref(S):T.ref.current=S))})}const u=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:_ye({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,p)=>{if(!p)return;const m=d.getState().scene;m.__r3f&&(m.__r3f.root=d,i(m,p))},removeChildFromContainer:(d,p)=>{p&&a(d.getState().scene,p)},insertInContainerBefore:(d,p,m)=>{if(!p||!m)return;const g=d.getState().scene;g.__r3f&&r(g,p,m)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var p;return!!((p=d==null?void 0:d.__r3f)!=null?p:{}).handlers},prepareUpdate(d,p,m,g){if(d.__r3f.primitive&&g.object&&g.object!==d)return[!0];{const{args:v=[],children:y,...S}=g,{args:T=[],children:w,...E}=m;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((A,I)=>A!==T[I]))return[!0];const $=Gq(d,S,E,!0);return $.changes.length?[!1,$]:null}},commitUpdate(d,[p,m],g,v,y,S){p?l(d,g,y,S):ZM(d,m)},commitMount(d,p,m,g){var v;const y=(v=d.__r3f)!=null?v:{};d.raycast&&y.handlers&&y.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>n0(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var p;const{attach:m,parent:g}=(p=d.__r3f)!=null?p:{};m&&g&&vQ(g,d,m),d.isObject3D&&(d.visible=!1),i0(d)},unhideInstance(d,p){var m;const{attach:g,parent:v}=(m=d.__r3f)!=null?m:{};g&&v&&YM(v,d,g),(d.isObject3D&&p.visible==null||p.visible)&&(d.visible=!0),i0(d)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():$0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&xi.fun(performance.now)?performance.now:xi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:xi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:xi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ZM}}var mQ,gQ;const Dq=()=>{var n;return(n=q3.ColorManagement)!=null?n:null},Lq=n=>n&&n.isOrthographicCamera,bye=n=>n&&n.hasOwnProperty("current"),WT=typeof window<"u"&&((mQ=window.document)!=null&&mQ.createElement||((gQ=window.navigator)==null?void 0:gQ.product)==="ReactNative")?q.useLayoutEffect:q.useEffect;function Nq(n){const e=q.useRef(n);return WT(()=>void(e.current=n),[n]),e}function Sye({set:n}){return WT(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Bq extends q.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Bq.getDerivedStateFromError=()=>({error:!0});const Fq="__default",_Q=new Map,Tye=n=>n&&!!n.memoized&&!!n.changes;function Uq(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Yy=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},xi={obj:n=>n===Object(n)&&!xi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(xi.str(n)||xi.num(n))return n===e;const o=xi.obj(n);if(o&&i==="reference")return n===e;const a=xi.arr(n);if(a&&t==="reference")return n===e;if((a||o)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!xi.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(xi.und(l)){if(a&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function wye(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Eye(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function n0(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function uL(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((o,a)=>o[a],n),{target:t,key:r}}else return{target:t,key:e}}const OQ=/-\d+$/;function YM(n,e,t){if(xi.str(t)){if(OQ.test(t)){const o=t.replace(OQ,""),{target:a,key:l}=uL(n,o);Array.isArray(a[l])||(a[l]=[])}const{target:i,key:r}=uL(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function vQ(n,e,t){var i,r;if(xi.str(t)){const{target:o,key:a}=uL(n,t),l=e.__r3f.previousAttach;l===void 0?delete o[a]:o[a]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function Gq(n,{children:e,key:t,ref:i,...r},{children:o,key:a,ref:l,...u}={},h=!1){var d;const p=(d=n==null?void 0:n.__r3f)!=null?d:{},m=Object.entries(r),g=[];if(h){const y=Object.keys(u);for(let S=0;S<y.length;S++)r.hasOwnProperty(y[S])||m.unshift([y[S],Fq+"remove"])}m.forEach(([y,S])=>{var T;if((T=n.__r3f)!=null&&T.primitive&&y==="object"||xi.equ(S,u[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return g.push([y,S,!0,[]]);let w=[];y.includes("-")&&(w=y.split("-")),g.push([y,S,!1,w]);for(const E in r){const $=r[E];E.startsWith(`${y}-`)&&g.push([E,$,!1,E.split("-")])}});const v={...r};return p.memoizedProps&&p.memoizedProps.args&&(v.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(v.attach=p.memoizedProps.attach),{memoized:v,changes:g}}function ZM(n,e){var t,i,r;const o=(t=n.__r3f)!=null?t:{},a=o.root,l=(i=a==null||a.getState==null?void 0:a.getState())!=null?i:{},{memoized:u,changes:h}=Tye(e)?e:Gq(n,e),d=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=u);for(let m=0;m<h.length;m++){let[g,v,y,S]=h[m],T=n,w=T[g];if(S.length&&(w=S.reduce((E,$)=>E[$],n),!(w&&w.set))){const[E,...$]=S.reverse();T=$.reverse().reduce((A,I)=>A[I],n),g=E}if(v===Fq+"remove")if(T.constructor){let E=_Q.get(T.constructor);E||(E=new T.constructor,_Q.set(T.constructor,E)),v=E[g]}else v=0;if(y)v?o.handlers[g]=v:delete o.handlers[g],o.eventCount=Object.keys(o.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Lm)){if(Array.isArray(v))w.fromArray?w.fromArray(v):w.set(...v);else if(w.copy&&v&&v.constructor&&w.constructor===v.constructor)w.copy(v);else if(v!==void 0){const E=w instanceof pt;!E&&w.setScalar?w.setScalar(v):w instanceof Lm&&v instanceof Lm?w.mask=v.mask:w.set(v),!Dq()&&!l.linear&&E&&w.convertSRGBToLinear()}}else T[g]=v,!l.linear&&T[g]instanceof Ri&&T[g].format===ra&&T[g].type===jh&&(T[g].encoding=Nn);i0(n)}if(o.parent&&l.internal&&n.raycast&&d!==o.eventCount){const m=l.internal.interaction.indexOf(n);m>-1&&l.internal.interaction.splice(m,1),o.eventCount&&l.internal.interaction.push(n)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(r=n.__r3f)!=null&&r.parent&&hL(n),n}function i0(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function hL(n){n.onUpdate==null||n.onUpdate(n)}function Wq(n,e){n.manual||(Lq(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function XE(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function xye(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return $0.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $0.ContinuousEventPriority;default:return $0.DefaultEventPriority}}function zq(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function $ye(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{zq(t.capturedMap,e,i,r)})}function Cye(n){function e(u){const{internal:h}=n.getState(),d=u.offsetX-h.initialClick[0],p=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(d*d+p*p))}function t(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(d=>{var p;return(p=h.__r3f)==null?void 0:p.handlers["onPointer"+d]}))}function i(u,h){const d=n.getState(),p=new Set,m=[],g=h?h(d.internal.interaction):d.internal.interaction;for(let T=0;T<g.length;T++){const w=Yy(g[T]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(u,d);function v(T){const w=Yy(T);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var E;w.events.compute==null||w.events.compute(u,w,(E=w.previousRoot)==null?void 0:E.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(T,!0):[]}let y=g.flatMap(v).sort((T,w)=>{const E=Yy(T.object),$=Yy(w.object);return!E||!$?T.distance-w.distance:$.events.priority-E.events.priority||T.distance-w.distance}).filter(T=>{const w=XE(T);return p.has(w)?!1:(p.add(w),!0)});d.events.filter&&(y=d.events.filter(y,d));for(const T of y){let w=T.object;for(;w;){var S;(S=w.__r3f)!=null&&S.eventCount&&m.push({...T,eventObject:w}),w=w.parent}}if("pointerId"in u&&d.internal.capturedMap.has(u.pointerId))for(let T of d.internal.capturedMap.get(u.pointerId).values())p.has(XE(T.intersection))||m.push(T.intersection);return m}function r(u,h,d,p){const m=n.getState();if(u.length){const g={stopped:!1};for(const v of u){const y=Yy(v.object)||m,{raycaster:S,pointer:T,camera:w,internal:E}=y,$=new he(T.x,T.y,0).unproject(w),A=G=>{var Z,N;return(Z=(N=E.capturedMap.get(G))==null?void 0:N.has(v.eventObject))!=null?Z:!1},I=G=>{const Z={intersection:v,target:h.target};E.capturedMap.has(G)?E.capturedMap.get(G).set(v.eventObject,Z):E.capturedMap.set(G,new Map([[v.eventObject,Z]])),h.target.setPointerCapture(G)},D=G=>{const Z=E.capturedMap.get(G);Z&&zq(E.capturedMap,v.eventObject,Z,G)};let R={};for(let G in h){let Z=h[G];typeof Z!="function"&&(R[G]=Z)}let B={...v,...R,pointer:T,intersections:u,stopped:g.stopped,delta:d,unprojectedPoint:$,ray:S.ray,camera:w,stopPropagation(){const G="pointerId"in h&&E.capturedMap.get(h.pointerId);if((!G||G.has(v.eventObject))&&(B.stopped=g.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(Z=>Z.eventObject===v.eventObject))){const Z=u.slice(0,u.indexOf(v));o([...Z,v])}},target:{hasPointerCapture:A,setPointerCapture:I,releasePointerCapture:D},currentTarget:{hasPointerCapture:A,setPointerCapture:I,releasePointerCapture:D},nativeEvent:h};if(p(B),g.stopped===!0)break}}return u}function o(u){const{internal:h}=n.getState();for(const d of h.hovered.values())if(!u.length||!u.find(p=>p.object===d.object&&p.index===d.index&&p.instanceId===d.instanceId)){const m=d.eventObject.__r3f,g=m==null?void 0:m.handlers;if(h.hovered.delete(XE(d)),m!=null&&m.eventCount){const v={...d,intersections:u};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function a(u,h){for(let d=0;d<h.length;d++){const p=h[d].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return h=>{const{internal:d}=n.getState();"pointerId"in h&&d.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(h.pointerId)&&(d.capturedMap.delete(h.pointerId),o([]))})}}return function(d){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=d;const g=u==="onPointerMove",v=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",S=i(d,g?t:void 0),T=v?e(d):0;u==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=S.map(E=>E.eventObject)),v&&!S.length&&T<=2&&(a(d,m.interaction),p&&p(d)),g&&o(S);function w(E){const $=E.eventObject,A=$.__r3f,I=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(g){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const D=XE(E),R=m.hovered.get(D);R?R.stopped&&E.stopPropagation():(m.hovered.set(D,E),I.onPointerOver==null||I.onPointerOver(E),I.onPointerEnter==null||I.onPointerEnter(E))}I.onPointerMove==null||I.onPointerMove(E)}else{const D=I[u];D?(!v||m.initialHits.includes($))&&(a(d,m.interaction.filter(R=>!m.initialHits.includes(R))),D(E)):v&&m.initialHits.includes($)&&a(d,m.interaction.filter(R=>!m.initialHits.includes(R)))}}r(S,d,T,w)}}return{handlePointer:l}}const Aye=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Qq=n=>!!(n!=null&&n.render),J3=q.createContext(null),kye=(n,e)=>{const t=$q((l,u)=>{const h=new he,d=new he,p=new he;function m(T=u().camera,w=d,E=u().size){const{width:$,height:A,top:I,left:D}=E,R=$/A;w instanceof he?p.copy(w):p.set(...w);const B=T.getWorldPosition(h).distanceTo(p);if(Lq(T))return{width:$/T.zoom,height:A/T.zoom,top:I,left:D,factor:1,distance:B,aspect:R};{const G=T.fov*Math.PI/180,Z=2*Math.tan(G/2)*B,N=Z*($/A);return{width:N,height:Z,top:I,left:D,factor:$/N,distance:B,aspect:R}}}let g;const v=T=>l(w=>({performance:{...w.performance,current:T}})),y=new nt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(T=1)=>n(u(),T),advance:(T,w)=>e(T,w,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new S3,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=u();g&&clearTimeout(g),T.performance.current!==T.performance.min&&v(T.performance.min),g=setTimeout(()=>v(u().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:T=>l(w=>({...w,events:{...w.events,...T}})),setSize:(T,w,E,$,A)=>{const I=u().camera,D={width:T,height:w,top:$||0,left:A||0,updateStyle:E};l(R=>({size:D,viewport:{...R.viewport,...m(I,d,D)}}))},setDpr:T=>l(w=>{const E=Uq(T);return{viewport:{...w.viewport,dpr:E,initialDpr:w.viewport.initialDpr||E}}}),setFrameloop:(T="always")=>{const w=u().clock;w.stop(),w.elapsedTime=0,T!=="never"&&(w.start(),w.elapsedTime=0),l(()=>({frameloop:T}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:q.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(T,w,E)=>{const $=u().internal;return $.priority=$.priority+(w>0?1:0),$.subscribers.push({ref:T,priority:w,store:E}),$.subscribers=$.subscribers.sort((A,I)=>A.priority-I.priority),()=>{const A=u().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(w>0?1:0),A.subscribers=A.subscribers.filter(I=>I.ref!==T))}}}}}),i=t.getState();let r=i.size,o=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:h,gl:d,set:p}=t.getState();if(u!==r||h.dpr!==o){var m;r=u,o=h.dpr,Wq(l,u),d.setPixelRatio(h.dpr);const g=(m=u.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(u.width,u.height,g)}l!==a&&(a=l,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function Iye(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let jE,Vq=new Set,Rye=new Set,Mye=new Set;const Pye=n=>Iye(n,Vq);function qM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zy(n,e){switch(n){case"before":return qM(Vq,e);case"after":return qM(Rye,e);case"tail":return qM(Mye,e)}}let JM,KM;function eP(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),JM=e.internal.subscribers,jE=0;jE<JM.length;jE++)KM=JM[jE],KM.ref.current(KM.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Dye(n){let e=!1,t,i,r;function o(u){i=requestAnimationFrame(o),e=!0,t=0,Zy("before",u);for(const d of n.values()){var h;r=d.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((h=r.gl.xr)!=null&&h.isPresenting)&&(t+=eP(u,r))}if(Zy("after",u),t===0)return Zy("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,h=1){var d;if(!u)return n.forEach(p=>a(p.store.getState()),h);(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(u.internal.frames=Math.min(60,u.internal.frames+h),e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,d,p){if(h&&Zy("before",u),d)eP(u,d,p);else for(const m of n.values())eP(u,m.store.getState());h&&Zy("after",u)}return{loop:o,invalidate:a,advance:l}}function K3(){const n=q.useContext(J3);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Bi(n=t=>t,e){return K3()(n,e)}function vg(n,e=0){const t=K3(),i=t.getState().internal.subscribe,r=Nq(n);return WT(()=>i(r,e,t),[e,i,t]),null}function Hq(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(o=>new Promise((a,l)=>r.load(o,u=>{u.scene&&Object.assign(u,wye(u.scene)),a(u)},e,u=>l(new Error(`Could not load ${o}: ${u.message})`))))))}}function zT(n,e,t,i){const r=Array.isArray(e)?e:[e],o=Mq(Hq(t,i),[n,...r],{equal:xi.equ});return Array.isArray(e)?o:o[0]}zT.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Oye(Hq(t),[n,...i])};zT.clear=function(n,e){const t=Array.isArray(e)?e:[e];return vye([n,...t])};const _O=new Map,{invalidate:yQ,advance:bQ}=Dye(_O),{reconciler:NS,applyProps:r0}=yye(_O,xye),j_={objects:"shallow",strict:!1},Lye=(n,e)=>{const t=typeof n=="function"?n(e):n;return Qq(t)?t:new AA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Nye(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Bye(n){const e=_O.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,o=i||kye(yQ,bQ),a=t||NS.createContainer(o,$0.ConcurrentRoot,null,!1,null,"",r,null);e||_O.set(n,{fiber:a,store:o});let l,u=!1,h;return{configure(d={}){let{gl:p,size:m,scene:g,events:v,onCreated:y,shadows:S=!1,linear:T=!1,flat:w=!1,legacy:E=!1,orthographic:$=!1,frameloop:A="always",dpr:I=[1,2],performance:D,raycaster:R,camera:B,onPointerMissed:G}=d,Z=o.getState(),N=Z.gl;Z.gl||Z.set({gl:N=Lye(p,n)});let H=Z.raycaster;H||Z.set({raycaster:H=new UA});const{params:M,...K}=R||{};if(xi.equ(K,H,j_)||r0(H,{...K}),xi.equ(M,H.params,j_)||r0(H,{params:{...H.params,...M}}),!Z.camera||Z.camera===h&&!xi.equ(h,B,j_)){h=B;const z=B instanceof yT,L=z?B:$?new Uh(0,0,0,0,.1,1e3):new Ci(75,0,.1,1e3);z||(L.position.z=5,B&&r0(L,B),!Z.camera&&!(B!=null&&B.rotation)&&L.lookAt(0,0,0)),Z.set({camera:L})}if(!Z.scene){let z;g instanceof wS?z=g:(z=new wS,g&&r0(z,g)),Z.set({scene:n0(z)})}if(!Z.xr){const z=(de,ie)=>{const Ce=o.getState();Ce.frameloop!=="never"&&bQ(de,!0,Ce,ie)},L=()=>{const de=o.getState();de.gl.xr.enabled=de.gl.xr.isPresenting,de.gl.xr.setAnimationLoop(de.gl.xr.isPresenting?z:null),de.gl.xr.isPresenting||yQ(de)},le={connect(){const de=o.getState().gl;de.xr.addEventListener("sessionstart",L),de.xr.addEventListener("sessionend",L)},disconnect(){const de=o.getState().gl;de.xr.removeEventListener("sessionstart",L),de.xr.removeEventListener("sessionend",L)}};N.xr&&le.connect(),Z.set({xr:le})}if(N.shadowMap){const z=N.shadowMap.enabled,L=N.shadowMap.type;if(N.shadowMap.enabled=!!S,xi.boo(S))N.shadowMap.type=Mb;else if(xi.str(S)){var re;const le={basic:ej,percentage:vA,soft:Mb,variance:bm};N.shadowMap.type=(re=le[S])!=null?re:Mb}else xi.obj(S)&&Object.assign(N.shadowMap,S);(z!==N.shadowMap.enabled||L!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const ce=Dq();ce&&("enabled"in ce?ce.enabled=!E:"legacyMode"in ce&&(ce.legacyMode=E));const X=T?Yh:Nn,Q=w?Oc:UB;N.outputEncoding!==X&&(N.outputEncoding=X),N.toneMapping!==Q&&(N.toneMapping=Q),Z.legacy!==E&&Z.set(()=>({legacy:E})),Z.linear!==T&&Z.set(()=>({linear:T})),Z.flat!==w&&Z.set(()=>({flat:w})),p&&!xi.fun(p)&&!Qq(p)&&!xi.equ(p,N,j_)&&r0(N,p),v&&!Z.events.handlers&&Z.set({events:v(o)});const ee=Nye(n,m);return xi.equ(ee,Z.size,j_)||Z.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),I&&Z.viewport.dpr!==Uq(I)&&Z.setDpr(I),Z.frameloop!==A&&Z.setFrameloop(A),Z.onPointerMissed||Z.set({onPointerMissed:G}),D&&!xi.equ(D,Z.performance,j_)&&Z.set(z=>({performance:{...z.performance,...D}})),l=y,u=!0,this},render(d){return u||this.configure(),NS.updateContainer(q.createElement(Fye,{store:o,children:d,onCreated:l,rootElement:n}),a,null,()=>{}),o},unmount(){Xq(n)}}}function Fye({store:n,children:e,onCreated:t,rootElement:i}){return WT(()=>{const r=n.getState();r.set(o=>({internal:{...o.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),q.createElement(J3.Provider,{value:n},e)}function Xq(n,e){const t=_O.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),NS.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var o,a,l,u;r.events.disconnect==null||r.events.disconnect(),(o=r.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),Eye(r),_O.delete(n),e&&e(n)}catch{}},500)})}}function Uye(n,e,t){return q.createElement(Gye,{key:e.uuid,children:n,container:e,state:t})}function Gye({state:n={},children:e,container:t}){const{events:i,size:r,...o}=n,a=K3(),[l]=q.useState(()=>new UA),[u]=q.useState(()=>new nt),h=q.useCallback((p,m)=>{const g={...p};Object.keys(p).forEach(y=>{(Aye.includes(y)||p[y]!==m[y]&&m[y])&&delete g[y]});let v;if(m&&r){const y=m.camera;v=p.viewport.getCurrentViewport(y,new he,r),y!==p.camera&&Wq(y,r)}return{...g,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:a,events:{...p.events,...m==null?void 0:m.events,...i},size:{...p.size,...r},viewport:{...p.viewport,...v},...o}},[n]),[d]=q.useState(()=>{const p=a.getState();return $q((g,v)=>({...p,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:a,events:{...p.events,...i},size:{...p.size,...r},...o,set:g,get:v,setEvents:y=>g(S=>({...S,events:{...S.events,...y}}))}))});return q.useEffect(()=>{const p=a.subscribe(m=>d.setState(g=>h(m,g)));return()=>{p(),d.destroy()}},[]),q.useEffect(()=>{d.setState(p=>h(a.getState(),p))},[h]),q.createElement(q.Fragment,null,NS.createPortal(q.createElement(J3.Provider,{value:d},e),d,null))}NS.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:q.version});function Ji(){return Ji=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ji.apply(this,arguments)}function dL(n,e,t){var i,r,o,a,l;e==null&&(e=100);function u(){var d=Date.now()-a;d<e&&d>=0?i=setTimeout(u,e-d):(i=null,t||(l=n.apply(o,r),o=r=null))}var h=function(){o=this,r=arguments,a=Date.now();var d=t&&!i;return i||(i=setTimeout(u,e)),d&&(l=n.apply(o,r),o=r=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=n.apply(o,r),o=r=null,clearTimeout(i),i=null)},h}dL.debounce=dL;var Wye=dL;const SQ=Mu(Wye);function zye(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),h=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,p=q.useRef(!1);q.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,g,v]=q.useMemo(()=>{const w=()=>{if(!u.current.element)return;const{left:E,top:$,width:A,height:I,bottom:D,right:R,x:B,y:G}=u.current.element.getBoundingClientRect(),Z={left:E,top:$,width:A,height:I,bottom:D,right:R,x:B,y:G};u.current.element instanceof HTMLElement&&r&&(Z.height=u.current.element.offsetHeight,Z.width=u.current.element.offsetWidth),Object.freeze(Z),p.current&&!Xye(u.current.lastBounds,Z)&&l(u.current.lastBounds=Z)};return[w,d?SQ(w,d):w,h?SQ(w,h):w]},[l,r,h,d]);function y(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",v,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function S(){u.current.element&&(u.current.resizeObserver=new o(v),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(w=>w.addEventListener("scroll",v,{capture:!0,passive:!0})))}const T=w=>{!w||w===u.current.element||(y(),u.current.element=w,u.current.scrollContainers=jq(w),S())};return Vye(v,!!t),Qye(g),q.useEffect(()=>{y(),S()},[t,v,g]),q.useEffect(()=>y,[]),[T,a,m]}function Qye(n){q.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Vye(n,e){q.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function jq(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...jq(n.parentElement)]}const Hye=["x","y","top","bottom","left","right","width","height"],Xye=(n,e)=>Hye.every(t=>n[t]===e[t]);var jye=Object.defineProperty,Yye=Object.defineProperties,Zye=Object.getOwnPropertyDescriptors,TQ=Object.getOwnPropertySymbols,qye=Object.prototype.hasOwnProperty,Jye=Object.prototype.propertyIsEnumerable,wQ=(n,e,t)=>e in n?jye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,EQ=(n,e)=>{for(var t in e||(e={}))qye.call(e,t)&&wQ(n,t,e[t]);if(TQ)for(var t of TQ(e))Jye.call(e,t)&&wQ(n,t,e[t]);return n},Kye=(n,e)=>Yye(n,Zye(e)),xQ;function Yq(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Yq(i,e,t);if(r)return r;i=e?null:i.sibling}}function Zq(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const eF=Zq(q.createContext(null));class qq extends q.Component{render(){return q.createElement(eF.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:$Q,ReactCurrentDispatcher:CQ}=(xQ=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?xQ:{};function ebe(){const n=q.useContext(eF),e=q.useId();return q.useMemo(()=>{var i;return(i=$Q==null?void 0:$Q.current)!=null?i:Yq(n,!1,r=>{let o=r.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}})},[n,e])}function tbe(){var n,e;const t=ebe(),[i]=q.useState(()=>new Map);i.clear();let r=t;for(;r;){const o=(n=r.type)==null?void 0:n._context;o&&o!==eF&&!i.has(o)&&i.set(o,(e=CQ==null?void 0:CQ.current)==null?void 0:e.readContext(Zq(o))),r=r.return}return q.useMemo(()=>Array.from(i.keys()).reduce((o,a)=>l=>q.createElement(o,null,q.createElement(a.Provider,Kye(EQ({},l),{value:i.get(a)}))),o=>q.createElement(qq,EQ({},o))),[i])}const tP={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nbe(n){const{handlePointer:e}=Cye(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(tP).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:o}=n.getState();o.disconnect==null||o.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([a,l])=>{const[u,h]=tP[a];t.addEventListener(u,l,{passive:h})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([o,a])=>{if(i&&i.connected instanceof HTMLElement){const[l]=tP[o];i.connected.removeEventListener(l,a)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const ibe=q.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:o,events:a=nbe,eventSource:l,eventPrefix:u,shadows:h,linear:d,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:S,raycaster:T,camera:w,onPointerMissed:E,onCreated:$,...A},I){q.useMemo(()=>Pq(XY),[]);const D=tbe(),[R,B]=zye({scroll:!0,debounce:{scroll:50,resize:0},...i}),G=q.useRef(null),Z=q.useRef(null);q.useImperativeHandle(I,()=>G.current);const N=Nq(E),[H,M]=q.useState(!1),[K,re]=q.useState(!1);if(H)throw H;if(K)throw K;const ce=q.useRef(null);WT(()=>{const Q=G.current;B.width>0&&B.height>0&&Q&&(ce.current||(ce.current=Bye(Q)),ce.current.configure({gl:o,events:a,shadows:h,linear:d,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:S,raycaster:T,camera:w,size:B,onPointerMissed:(...ee)=>N.current==null?void 0:N.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(l?bye(l)?l.current:l:Z.current),u&&ee.setEvents({compute:(z,L)=>{const le=z[u+"X"],de=z[u+"Y"];L.pointer.set(le/L.size.width*2-1,-(de/L.size.height)*2+1),L.raycaster.setFromCamera(L.pointer,L.camera)}}),$==null||$(ee)}}),ce.current.render(q.createElement(D,null,q.createElement(Bq,{set:re},q.createElement(q.Suspense,{fallback:q.createElement(Sye,{set:M})},e)))))}),q.useEffect(()=>{const Q=G.current;if(Q)return()=>Xq(Q)},[]);const X=l?"none":"auto";return q.createElement("div",Ji({ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r}},A),q.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},q.createElement("canvas",{ref:G,style:{display:"block"}},t)))}),Jq=q.forwardRef(function(e,t){return q.createElement(qq,null,q.createElement(ibe,Ji({},e,{ref:t})))}),Kq=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1],[1,9,36,84,126,126,84,36,9,1],[1,10,45,120,210,252,210,120,45,10,1]],rbe=Kq.length,eJ=(n,e)=>{const t=new he(0,0,0),i=n.length-1;for(let r=0;r<=i;r++)t.addScaledVector(n[r],Kq[i][r]*Math.pow(1-e,i-r)*Math.pow(e,r));return t},sbe=(n,e)=>Array(e).fill(0).map((t,i)=>eJ(n,i/e)),obe=1e3,la=gT()(H9(_A((n,e)=>({bezierControlPoints:[new he(1,1,1),new he(2,5,4)],selectedControlPoint:void 0,hoveredControlPoint:void 0,bezierLinePoints:[],addBezierControlPoint:t=>{const i=[...e().bezierControlPoints];i.push(t),!(i.length>rbe)&&n({bezierControlPoints:i})},removeBezierControlPoint:t=>{const i=[...e().bezierControlPoints];i.splice(t,1),n({bezierControlPoints:i})},updateBezierControlPoint:(t,i)=>n(r=>{r.bezierControlPoints[t]=i}),setSelectedControlPoint:t=>{n({selectedControlPoint:t})},updateBezierInterpolationPoints:()=>{const t=sbe(e().bezierControlPoints,obe);n({bezierLinePoints:t})}}))));la.subscribe(n=>n.bezierControlPoints,()=>{la.getState().updateBezierInterpolationPoints()});const abe=({id:n,point:e})=>{const t=la(a=>a.updateBezierControlPoint),i=la(a=>a.removeBezierControlPoint),[r,o]=q.useState({x:`${e.x}`,y:`${e.y}`,z:`${e.z}`});return q.useEffect(()=>{t(n,new he(parseFloat(r.x)||0,parseFloat(r.y)||0,parseFloat(r.z)||0))},[r]),q.useEffect(()=>{o({x:`${e.x}`,y:`${e.y}`,z:`${e.z}`})},[e]),dt("div",{className:"flex items-center gap-2 p-2",children:[se("span",{children:`${n+1}.`}),se(xf,{className:"text-center",value:r.x,onChange:a=>o(l=>({...l,x:a.target.value}))}),se(xf,{className:"text-center",value:r.y,onChange:a=>o(l=>({...l,y:a.target.value}))}),se(xf,{className:"text-center",value:r.z,onChange:a=>o(l=>({...l,z:a.target.value}))}),se("button",{onClick:()=>i(n),children:se(Al,{className:"text-blue-600",icon:tve})})]})},lbe=({points:n})=>se("div",{children:n.map((e,t)=>se(abe,{id:t,point:e},t))});function cbe(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function ube(n,e,t){return Math.max(e,Math.min(n,t))}const Ii={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function AQ(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function kQ(n,e,t,i=.15){return i===0?ube(n,e,t):n<e?-AQ(e-n,t-e,i)+e:n>t?+AQ(n-t,t-e,i)+t:n}function hbe(n,[e,t],[i,r]){const[[o,a],[l,u]]=n;return[kQ(e,o,a,i),kQ(t,l,u,r)]}function dbe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fbe(n){var e=dbe(n,"string");return typeof e=="symbol"?e:String(e)}function Pr(n,e,t){return e=fbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ir(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IQ(Object(t),!0).forEach(function(i){Pr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const tJ={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function RQ(n){return n?n[0].toUpperCase()+n.slice(1):""}const pbe=["enter","leave"];function mbe(n=!1,e){return n&&!pbe.includes(e)}function gbe(n,e="",t=!1){const i=tJ[n],r=i&&i[e]||e;return"on"+RQ(n)+RQ(r)+(mbe(t,r)?"Capture":"")}const _be=["gotpointercapture","lostpointercapture"];function Obe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=_be.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function vbe(n,e=""){const t=tJ[n],i=t&&t[e]||e;return n+i}function ZA(n){return"touches"in n}function nJ(n){return ZA(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function ybe(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function bbe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function iJ(n){return ZA(n)?bbe(n)[0]:n}function fL(n,e){const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,o=(e.clientY+n.clientY)/2,a=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:a,origin:[r,o]}}function Sbe(n){return ybe(n).map(e=>e.identifier)}function MQ(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return fL(t,i)}function nP(n){const e=iJ(n);return ZA(n)?e.identifier:e.pointerId}function OO(n){const e=iJ(n);return[e.clientX,e.clientY]}const PQ=40,DQ=800;function rJ(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=PQ,t*=PQ):i===2&&(e*=DQ,t*=DQ),[e,t]}function Tbe(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:o,scrollTop:a}=n.currentTarget;return[(e=i??o)!==null&&e!==void 0?e:0,(t=r??a)!==null&&t!==void 0?t:0]}function wbe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:o}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:o})}return e}function lC(n,...e){return typeof n=="function"?n(...e):n}function Ebe(){}function xbe(...n){return n.length===0?Ebe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function LQ(n,e){return Object.assign({},e,n||{})}const $be=32;class sJ{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?lC(i.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let o=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,wbe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const I=t._delta.map(Math.abs);Ii.addTo(t._distance,I)}this.axisIntent&&this.axisIntent(e);const[a,l]=t._movement,[u,h]=i.threshold,{_step:d,values:p}=t;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(a)>=u&&p[0]),d[1]===!1&&(d[1]=Math.abs(l)>=h&&p[1])):(d[0]===!1&&(d[0]=Math.abs(a)>=u&&Math.sign(a)*u),d[1]===!1&&(d[1]=Math.abs(l)>=h&&Math.sign(l)*h)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const m=[0,0];if(i.hasCustomTransform){const[I,D]=p;m[0]=d[0]!==!1?I-d[0]:0,m[1]=d[1]!==!1?D-d[1]:0}else m[0]=d[0]!==!1?a-d[0]:0,m[1]=d[1]!==!1?l-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(m);const g=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=lC(i.bounds,t)),this.setup&&this.setup()),t.movement=m,this.computeOffset()));const[y,S]=t.offset,[[T,w],[E,$]]=t._bounds;t.overflow=[y<T?-1:y>w?1:0,S<E?-1:S>$?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const A=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=hbe(t._bounds,t.offset,A),t.delta=Ii.sub(t.offset,g),this.computeMovement(),v&&(!t.last||o>$be)){t.delta=Ii.sub(t.offset,g);const I=t.delta.map(Math.abs);Ii.addTo(t.distance,I),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[I[0]/o,I[1]/o])}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(ir(ir(ir({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Cbe([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class QT extends sJ{constructor(...e){super(...e),Pr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ii.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ii.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[nJ(e)]:i.axisThreshold;t.axis=Cbe(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Abe=n=>n,NQ=.15,oJ={enabled(n=!0){return n},eventOptions(n,e,t){return ir(ir({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[NQ,NQ];case!1:return[0,0];default:return Ii.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Ii.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||Abe},threshold(n){return Ii.toVector(n,0)}},kbe=0,yg=ir(ir({},oJ),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=kbe){return n},bounds(n={}){if(typeof n=="function")return o=>yg.bounds(n(o));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),BQ={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Ibe extends QT{constructor(...e){super(...e),Pr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=yg.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=nP(e),i._pointerActive=!0,this.computeValues(OO(e)),this.computeInitial(),t.preventScrollAxis&&nJ(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const r=nP(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const o=OO(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ii.sub(o,t._values),this.computeValues(o)),Ii.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=nP(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,a]=t._distance;if(t.tap=o<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[l,u]=t.direction,[h,d]=t.velocity,[p,m]=t.movement,[g,v]=i.swipe.velocity,[y,S]=i.swipe.distance,T=i.swipe.duration;t.elapsedTime<T&&(Math.abs(h)>g&&Math.abs(p)>y&&(t.swipe[0]=l),Math.abs(d)>v&&Math.abs(m)>S&&(t.swipe[1]=u))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Rbe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=BQ[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Ii.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in BQ&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Rbe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const VT=typeof window<"u"&&window.document&&window.document.createElement;function Mbe(){return VT&&"ontouchstart"in window}function FQ(){return Mbe()||VT&&window.navigator.maxTouchPoints>1}function Pbe(){return VT&&"onpointerdown"in window}function Dbe(){return VT&&"exitPointerLock"in window.document}function Lbe(){try{return"constructor"in GestureEvent}catch{return!1}}const vl={isBrowser:VT,gesture:Lbe(),touch:FQ(),touchscreen:FQ(),pointer:Pbe(),pointerLock:Dbe()},Nbe=250,Bbe=180,Fbe=.5,Ube=50,Gbe=250,Wbe=10,UQ={mouse:0,touch:0,pen:8},zbe=ir(ir({},yg),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&vl.pointerLock,vl.touch&&t?"touch":this.pointerLock?"mouse":vl.pointer&&!r?"pointer":vl.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Nbe:void 0,!(!vl.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const o=Ii.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,o},swipe({velocity:n=Fbe,distance:e=Ube,duration:t=Gbe}={}){return{velocity:this.transform(Ii.toVector(n)),distance:this.transform(Ii.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Bbe;case!1:return 0;default:return n}},axisThreshold(n){return n?ir(ir({},UQ),n):UQ},keyboardDisplacement(n=Wbe){return n}});function aJ(n){const[e,t]=n.overflow,[i,r]=n._delta,[o,a]=n._direction;(e<0&&i>0&&o<0||e>0&&i<0&&o>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(n._movement[1]=n._movementBound[1])}const Qbe=30,Vbe=100;class Hbe extends sJ{constructor(...e){super(...e),Pr(this,"ingKey","pinching"),Pr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Ii.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*Qbe-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(o=>i.has(o))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=MQ(e,t._touchIds);this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(a=>r.has(a))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const o=fL(...Array.from(i.values()));this.pinchStart(e,o)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=MQ(e,this.state._touchIds);this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=fL(...Array.from(t.values()));this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],o=t.angle-r;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([t.distance,t.angle-360*a]),i.origin=t.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Ii.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-rJ(e)[1]/Vbe*i.offset[0],0],Ii.addTo(i._movement,i._delta),aJ(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Xbe=ir(ir({},oJ),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!vl.touch&&vl.gesture)return"gesture";if(vl.touch&&i)return"touch";if(vl.touchscreen){if(vl.pointer)return"pointer";if(vl.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const l=LQ(lC(t,a),{min:-1/0,max:1/0});return[l.min,l.max]},o=a=>{const l=LQ(lC(i,a),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof t!="function"&&typeof i!="function"?[r(),o()]:a=>[r(a),o(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Ii.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class jbe extends QT{constructor(...e){super(...e),Pr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(OO(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=OO(e),i=this.state;i._delta=Ii.sub(t,i._values),Ii.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Ybe=ir(ir({},yg),{},{mouseOnly:(n=!0)=>n});class Zbe extends QT{constructor(...e){super(...e),Pr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=Tbe(e);t._delta=Ii.sub(i,t._values),Ii.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const qbe=yg;class Jbe extends QT{constructor(...e){super(...e),Pr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=rJ(e),Ii.addTo(t._movement,t._delta),aJ(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Kbe=yg;class eSe extends QT{constructor(...e){super(...e),Pr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(OO(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=OO(e);t._movement=t._delta=Ii.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const tSe=ir(ir({},yg),{},{mouseOnly:(n=!0)=>n}),tF=new Map,pL=new Map;function lJ(n){tF.set(n.key,n.engine),pL.set(n.key,n.resolver)}const cJ={key:"drag",engine:Ibe,resolver:zbe},nSe={key:"hover",engine:eSe,resolver:tSe},iSe={key:"move",engine:jbe,resolver:Ybe},rSe={key:"pinch",engine:Hbe,resolver:Xbe},sSe={key:"scroll",engine:Zbe,resolver:qbe},oSe={key:"wheel",engine:Jbe,resolver:Kbe};function aSe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function lSe(n,e){if(n==null)return{};var t=aSe(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const cSe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=vl.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},uSe=["target","eventOptions","window","enabled","transform"];function t$(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=t$(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function hSe(n,e,t={}){const i=n,{target:r,eventOptions:o,window:a,enabled:l,transform:u}=i,h=lSe(i,uSe);if(t.shared=t$({target:r,eventOptions:o,window:a,enabled:l,transform:u},cSe),e){const d=pL.get(e);t[e]=t$(ir({shared:t.shared},h),d)}else for(const d in h){const p=pL.get(d);p&&(t[d]=t$(ir({shared:t.shared},h[d]),p))}return t}class uJ{constructor(e,t){Pr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,o){const a=this._listeners,l=vbe(t,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=ir(ir({},u),o);e.addEventListener(l,r,h);const d=()=>{e.removeEventListener(l,r,h),a.delete(d)};return a.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class dSe{constructor(){Pr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class fSe{constructor(e){Pr(this,"gestures",new Set),Pr(this,"_targetEventStore",new uJ(this)),Pr(this,"gestureEventStores",{}),Pr(this,"gestureTimeoutStores",{}),Pr(this,"handlers",{}),Pr(this,"config",{}),Pr(this,"pointerIds",new Set),Pr(this,"touchIds",new Set),Pr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),pSe(this,e)}setEventIds(e){if(ZA(e))return this.touchIds=new Set(Sbe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=hSe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const l=this.config[a],u=GQ(i,l.eventOptions,!!r);if(l.enabled){const h=tF.get(a);new h(this,e,a).bind(u)}}const o=GQ(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)o(a,"",l=>this.nativeHandlers[a](ir(ir({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const o in i)i[o]=xbe(...i[o]);if(!r)return i;for(const o in i){const{device:a,capture:l,passive:u}=Obe(o);this._targetEventStore.add(r,a,"",i[o],{capture:l,passive:u})}}}}function Y_(n,e){n.gestures.add(e),n.gestureEventStores[e]=new uJ(n,e),n.gestureTimeoutStores[e]=new dSe}function pSe(n,e){e.drag&&Y_(n,"drag"),e.wheel&&Y_(n,"wheel"),e.scroll&&Y_(n,"scroll"),e.move&&Y_(n,"move"),e.pinch&&Y_(n,"pinch"),e.hover&&Y_(n,"hover")}const GQ=(n,e,t)=>(i,r,o,a={},l=!1)=>{var u,h;const d=(u=a.capture)!==null&&u!==void 0?u:e.capture,p=(h=a.passive)!==null&&h!==void 0?h:e.passive;let m=l?i:gbe(i,r,d);t&&p&&(m+="Passive"),n[m]=n[m]||[],n[m].push(o)},mSe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function gSe(n){const e={},t={},i=new Set;for(let r in n)mSe.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Z_(n,e,t,i,r,o){if(!n.has(t)||!tF.has(i))return;const a=t+"Start",l=t+"End",u=h=>{let d;return h.first&&a in e&&e[a](h),t in e&&(d=e[t](h)),h.last&&l in e&&e[l](h),d};r[i]=u,o[i]=o[i]||{}}function _Se(n,e){const[t,i,r]=gSe(n),o={};return Z_(r,t,"onDrag","drag",o,e),Z_(r,t,"onWheel","wheel",o,e),Z_(r,t,"onScroll","scroll",o,e),Z_(r,t,"onPinch","pinch",o,e),Z_(r,t,"onMove","move",o,e),Z_(r,t,"onHover","hover",o,e),{handlers:o,config:e,nativeHandlers:i}}function hJ(n,e={},t,i){const r=Cn.useMemo(()=>new fSe(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),Cn.useEffect(r.effect.bind(r)),Cn.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function OSe(n,e){return lJ(cJ),hJ({drag:n},e||{},"drag")}function vSe(n){return n.forEach(lJ),function(t,i){const{handlers:r,nativeHandlers:o,config:a}=_Se(t,i||{});return hJ(r,a,void 0,o)}}function dJ(n,e){return vSe([cJ,rSe,sSe,oSe,iSe,nSe])(n,e||{})}function BS(n){"@babel/helpers - typeof";return BS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BS(n)}function ySe(n,e){if(BS(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(BS(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bSe(n){var e=ySe(n,"string");return BS(e)==="symbol"?e:String(e)}function pn(n,e,t){return e=bSe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}let C0=class fJ extends nr{constructor(){super(new rd(1,1,1),fJ.material)}};pn(C0,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new he},up:{value:new he(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});pn(C0,"material",new Ha({name:"SkyShader",fragmentShader:C0.SkyShader.fragmentShader,vertexShader:C0.SkyShader.vertexShader,uniforms:pg.clone(C0.SkyShader.uniforms),side:Xs,depthWrite:!1}));const WQ=(n,e)=>(n%e+e)%e;let SSe=class extends Pu{constructor(e,t){super(),pn(this,"object",void 0),pn(this,"domElement",void 0),pn(this,"enabled",!0),pn(this,"target",new he),pn(this,"minDistance",0),pn(this,"maxDistance",1/0),pn(this,"minZoom",0),pn(this,"maxZoom",1/0),pn(this,"minPolarAngle",0),pn(this,"maxPolarAngle",Math.PI),pn(this,"minAzimuthAngle",-1/0),pn(this,"maxAzimuthAngle",1/0),pn(this,"enableDamping",!1),pn(this,"dampingFactor",.05),pn(this,"enableZoom",!0),pn(this,"zoomSpeed",1),pn(this,"enableRotate",!0),pn(this,"rotateSpeed",1),pn(this,"enablePan",!0),pn(this,"panSpeed",1),pn(this,"screenSpacePanning",!0),pn(this,"keyPanSpeed",7),pn(this,"autoRotate",!1),pn(this,"autoRotateSpeed",2),pn(this,"reverseOrbit",!1),pn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),pn(this,"mouseButtons",{LEFT:im.ROTATE,MIDDLE:im.DOLLY,RIGHT:im.PAN}),pn(this,"touches",{ONE:rm.ROTATE,TWO:rm.DOLLY_PAN}),pn(this,"target0",void 0),pn(this,"position0",void 0),pn(this,"zoom0",void 0),pn(this,"_domElementKeyEvents",null),pn(this,"getPolarAngle",void 0),pn(this,"getAzimuthalAngle",void 0),pn(this,"setPolarAngle",void 0),pn(this,"setAzimuthalAngle",void 0),pn(this,"getDistance",void 0),pn(this,"listenToKeyEvents",void 0),pn(this,"saveState",void 0),pn(this,"reset",void 0),pn(this,"update",void 0),pn(this,"connect",void 0),pn(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Ci?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=_e=>{let Le=WQ(_e,2*Math.PI),We=d.phi;We<0&&(We+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let F=Math.abs(Le-We);2*Math.PI-F<F&&(Le<We?Le+=2*Math.PI:We+=2*Math.PI),p.phi=Le-We,i.update()},this.setAzimuthalAngle=_e=>{let Le=WQ(_e,2*Math.PI),We=d.theta;We<0&&(We+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let F=Math.abs(Le-We);2*Math.PI-F<F&&(Le<We?Le+=2*Math.PI:We+=2*Math.PI),p.theta=Le-We,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=_e=>{_e.addEventListener("keydown",ue),this._domElementKeyEvents=_e},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Ci?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Ci&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),u=l.NONE},this.update=(()=>{const _e=new he,Le=new Jr().setFromUnitVectors(e.up,new he(0,1,0)),We=Le.clone().invert(),F=new he,te=new Jr,ge=2*Math.PI;return function(){const oe=i.object.position;_e.copy(oe).sub(i.target),_e.applyQuaternion(Le),d.setFromVector3(_e),i.autoRotate&&u===l.NONE&&N(G()),i.enableDamping?(d.theta+=p.theta*i.dampingFactor,d.phi+=p.phi*i.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let Pe=i.minAzimuthAngle,et=i.maxAzimuthAngle;return isFinite(Pe)&&isFinite(et)&&(Pe<-Math.PI?Pe+=ge:Pe>Math.PI&&(Pe-=ge),et<-Math.PI?et+=ge:et>Math.PI&&(et-=ge),Pe<=et?d.theta=Math.max(Pe,Math.min(et,d.theta)):d.theta=d.theta>(Pe+et)/2?Math.max(Pe,d.theta):Math.min(et,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=m,d.radius=Math.max(i.minDistance,Math.min(i.maxDistance,d.radius)),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),_e.setFromSpherical(d),_e.applyQuaternion(We),oe.copy(i.target).add(_e),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),g.set(0,0,0)),m=1,v||F.distanceToSquared(i.object.position)>h||8*(1-te.dot(i.object.quaternion))>h?(i.dispatchEvent(r),F.copy(i.object.position),te.copy(i.object.quaternion),v=!1,!0):!1}})(),this.connect=_e=>{_e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=_e,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ze),i.domElement.addEventListener("pointerdown",ae),i.domElement.addEventListener("pointercancel",Ae),i.domElement.addEventListener("wheel",Y)},this.dispose=()=>{var _e,Le,We,F,te,ge;(_e=i.domElement)===null||_e===void 0||_e.removeEventListener("contextmenu",ze),(Le=i.domElement)===null||Le===void 0||Le.removeEventListener("pointerdown",ae),(We=i.domElement)===null||We===void 0||We.removeEventListener("pointercancel",Ae),(F=i.domElement)===null||F===void 0||F.removeEventListener("wheel",Y),(te=i.domElement)===null||te===void 0||te.ownerDocument.removeEventListener("pointermove",ne),(ge=i.domElement)===null||ge===void 0||ge.ownerDocument.removeEventListener("pointerup",pe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ue)};const i=this,r={type:"change"},o={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const h=1e-6,d=new BD,p=new BD;let m=1;const g=new he;let v=!1;const y=new nt,S=new nt,T=new nt,w=new nt,E=new nt,$=new nt,A=new nt,I=new nt,D=new nt,R=[],B={};function G(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Z(){return Math.pow(.95,i.zoomSpeed)}function N(_e){i.reverseOrbit?p.theta+=_e:p.theta-=_e}function H(_e){i.reverseOrbit?p.phi+=_e:p.phi-=_e}const M=(()=>{const _e=new he;return function(We,F){_e.setFromMatrixColumn(F,0),_e.multiplyScalar(-We),g.add(_e)}})(),K=(()=>{const _e=new he;return function(We,F){i.screenSpacePanning===!0?_e.setFromMatrixColumn(F,1):(_e.setFromMatrixColumn(F,0),_e.crossVectors(i.object.up,_e)),_e.multiplyScalar(We),g.add(_e)}})(),re=(()=>{const _e=new he;return function(We,F){const te=i.domElement;if(te&&i.object instanceof Ci&&i.object.isPerspectiveCamera){const ge=i.object.position;_e.copy(ge).sub(i.target);let Me=_e.length();Me*=Math.tan(i.object.fov/2*Math.PI/180),M(2*We*Me/te.clientHeight,i.object.matrix),K(2*F*Me/te.clientHeight,i.object.matrix)}else te&&i.object instanceof Uh&&i.object.isOrthographicCamera?(M(We*(i.object.right-i.object.left)/i.object.zoom/te.clientWidth,i.object.matrix),K(F*(i.object.top-i.object.bottom)/i.object.zoom/te.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ce(_e){i.object instanceof Ci&&i.object.isPerspectiveCamera?m/=_e:i.object instanceof Uh&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*_e)),i.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(_e){i.object instanceof Ci&&i.object.isPerspectiveCamera?m*=_e:i.object instanceof Uh&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/_e)),i.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(_e){y.set(_e.clientX,_e.clientY)}function ee(_e){A.set(_e.clientX,_e.clientY)}function z(_e){w.set(_e.clientX,_e.clientY)}function L(_e){S.set(_e.clientX,_e.clientY),T.subVectors(S,y).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(N(2*Math.PI*T.x/Le.clientHeight),H(2*Math.PI*T.y/Le.clientHeight)),y.copy(S),i.update()}function le(_e){I.set(_e.clientX,_e.clientY),D.subVectors(I,A),D.y>0?ce(Z()):D.y<0&&X(Z()),A.copy(I),i.update()}function de(_e){E.set(_e.clientX,_e.clientY),$.subVectors(E,w).multiplyScalar(i.panSpeed),re($.x,$.y),w.copy(E),i.update()}function ie(_e){_e.deltaY<0?X(Z()):_e.deltaY>0&&ce(Z()),i.update()}function Ce(_e){let Le=!1;switch(_e.code){case i.keys.UP:re(0,i.keyPanSpeed),Le=!0;break;case i.keys.BOTTOM:re(0,-i.keyPanSpeed),Le=!0;break;case i.keys.LEFT:re(i.keyPanSpeed,0),Le=!0;break;case i.keys.RIGHT:re(-i.keyPanSpeed,0),Le=!0;break}Le&&(_e.preventDefault(),i.update())}function ye(){if(R.length==1)y.set(R[0].pageX,R[0].pageY);else{const _e=.5*(R[0].pageX+R[1].pageX),Le=.5*(R[0].pageY+R[1].pageY);y.set(_e,Le)}}function xe(){if(R.length==1)w.set(R[0].pageX,R[0].pageY);else{const _e=.5*(R[0].pageX+R[1].pageX),Le=.5*(R[0].pageY+R[1].pageY);w.set(_e,Le)}}function Fe(){const _e=R[0].pageX-R[1].pageX,Le=R[0].pageY-R[1].pageY,We=Math.sqrt(_e*_e+Le*Le);A.set(0,We)}function Xe(){i.enableZoom&&Fe(),i.enablePan&&xe()}function Ue(){i.enableZoom&&Fe(),i.enableRotate&&ye()}function we(_e){if(R.length==1)S.set(_e.pageX,_e.pageY);else{const We=ot(_e),F=.5*(_e.pageX+We.x),te=.5*(_e.pageY+We.y);S.set(F,te)}T.subVectors(S,y).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(N(2*Math.PI*T.x/Le.clientHeight),H(2*Math.PI*T.y/Le.clientHeight)),y.copy(S)}function Ge(_e){if(R.length==1)E.set(_e.pageX,_e.pageY);else{const Le=ot(_e),We=.5*(_e.pageX+Le.x),F=.5*(_e.pageY+Le.y);E.set(We,F)}$.subVectors(E,w).multiplyScalar(i.panSpeed),re($.x,$.y),w.copy(E)}function W(_e){const Le=ot(_e),We=_e.pageX-Le.x,F=_e.pageY-Le.y,te=Math.sqrt(We*We+F*F);I.set(0,te),D.set(0,Math.pow(I.y/A.y,i.zoomSpeed)),ce(D.y),A.copy(I)}function Ee(_e){i.enableZoom&&W(_e),i.enablePan&&Ge(_e)}function Oe(_e){i.enableZoom&&W(_e),i.enableRotate&&we(_e)}function ae(_e){if(i.enabled!==!1){if(R.length===0){var Le,We;(Le=i.domElement)===null||Le===void 0||Le.ownerDocument.addEventListener("pointermove",ne),(We=i.domElement)===null||We===void 0||We.ownerDocument.addEventListener("pointerup",pe)}Se(_e),_e.pointerType==="touch"?me(_e):Te(_e)}}function ne(_e){i.enabled!==!1&&(_e.pointerType==="touch"?Ie(_e):j(_e))}function pe(_e){if(Je(_e),R.length===0){var Le,We,F;(Le=i.domElement)===null||Le===void 0||Le.releasePointerCapture(_e.pointerId),(We=i.domElement)===null||We===void 0||We.ownerDocument.removeEventListener("pointermove",ne),(F=i.domElement)===null||F===void 0||F.ownerDocument.removeEventListener("pointerup",pe)}i.dispatchEvent(a),u=l.NONE}function Ae(_e){Je(_e)}function Te(_e){let Le;switch(_e.button){case 0:Le=i.mouseButtons.LEFT;break;case 1:Le=i.mouseButtons.MIDDLE;break;case 2:Le=i.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case im.DOLLY:if(i.enableZoom===!1)return;ee(_e),u=l.DOLLY;break;case im.ROTATE:if(_e.ctrlKey||_e.metaKey||_e.shiftKey){if(i.enablePan===!1)return;z(_e),u=l.PAN}else{if(i.enableRotate===!1)return;Q(_e),u=l.ROTATE}break;case im.PAN:if(_e.ctrlKey||_e.metaKey||_e.shiftKey){if(i.enableRotate===!1)return;Q(_e),u=l.ROTATE}else{if(i.enablePan===!1)return;z(_e),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(o)}function j(_e){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;L(_e);break;case l.DOLLY:if(i.enableZoom===!1)return;le(_e);break;case l.PAN:if(i.enablePan===!1)return;de(_e);break}}function Y(_e){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(_e.preventDefault(),i.dispatchEvent(o),ie(_e),i.dispatchEvent(a))}function ue(_e){i.enabled===!1||i.enablePan===!1||Ce(_e)}function me(_e){switch(Ve(_e),R.length){case 1:switch(i.touches.ONE){case rm.ROTATE:if(i.enableRotate===!1)return;ye(),u=l.TOUCH_ROTATE;break;case rm.PAN:if(i.enablePan===!1)return;xe(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case rm.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Xe(),u=l.TOUCH_DOLLY_PAN;break;case rm.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ue(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(o)}function Ie(_e){switch(Ve(_e),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;we(_e),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;Ge(_e),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ee(_e),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Oe(_e),i.update();break;default:u=l.NONE}}function ze(_e){i.enabled!==!1&&_e.preventDefault()}function Se(_e){R.push(_e)}function Je(_e){delete B[_e.pointerId];for(let Le=0;Le<R.length;Le++)if(R[Le].pointerId==_e.pointerId){R.splice(Le,1);return}}function Ve(_e){let Le=B[_e.pointerId];Le===void 0&&(Le=new nt,B[_e.pointerId]=Le),Le.set(_e.pageX,_e.pageY)}function ot(_e){const Le=_e.pointerId===R[0].pointerId?R[1]:R[0];return B[Le.pointerId]}t!==void 0&&this.connect(t),this.update()}};class nF extends Uo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $Se(t)}),this.register(function(t){return new PSe(t)}),this.register(function(t){return new DSe(t)}),this.register(function(t){return new ASe(t)}),this.register(function(t){return new kSe(t)}),this.register(function(t){return new ISe(t)}),this.register(function(t){return new RSe(t)}),this.register(function(t){return new xSe(t)}),this.register(function(t){return new MSe(t)}),this.register(function(t){return new CSe(t)}),this.register(function(t){return new wSe(t)}),this.register(function(t){return new LSe(t)})}load(e,t,i,r){const o=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=xu.extractUrlBase(e),this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),o.manager.itemError(e),o.manager.itemEnd(e)},u=new Xa(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{o.parse(h,a,function(d){t(d),o.manager.itemEnd(e)},l)}catch(d){l(d)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o;const a={},l={};if(typeof e=="string")o=e;else if(xu.decodeText(new Uint8Array(e,0,4))===pJ){try{a[In.KHR_BINARY_GLTF]=new NSe(e)}catch(p){r&&r(p);return}o=a[In.KHR_BINARY_GLTF].content}else o=xu.decodeText(new Uint8Array(e));const u=JSON.parse(o);if(u.asset===void 0||u.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new ZSe(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const p=this.pluginCallbacks[d](h);l[p.name]=p,a[p.name]=!0}if(u.extensionsUsed)for(let d=0;d<u.extensionsUsed.length;++d){const p=u.extensionsUsed[d],m=u.extensionsRequired||[];switch(p){case In.KHR_MATERIALS_UNLIT:a[p]=new ESe;break;case In.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[p]=new USe;break;case In.KHR_DRACO_MESH_COMPRESSION:a[p]=new BSe(u,this.dracoLoader);break;case In.KHR_TEXTURE_TRANSFORM:a[p]=new FSe;break;case In.KHR_MESH_QUANTIZATION:a[p]=new GSe;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(a),h.setPlugins(l),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}}function TSe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const In={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class wSe{constructor(e){this.parser=e,this.name=In.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const o=t.json,u=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let h;const d=new pt(16777215);u.color!==void 0&&d.fromArray(u.color);const p=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new y3(d),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new v3(d),h.distance=p;break;case"spot":h=new O3(d),h.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),h.decay=2,u.intensity!==void 0&&(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(h),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],l=(o.extensions&&o.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class ESe{constructor(){this.name=In.KHR_MATERIALS_UNLIT}getMaterialType(){return Ro}extendParams(e,t,i){const r=[];e.color=new pt(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,Nn))}return Promise.all(r)}}class xSe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class $Se{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new nt(l,l)}return Promise.all(o)}}class CSe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(o)}}class ASe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new pt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Nn)),a.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class kSe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(o)}}class ISe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new pt(l[0],l[1],l[2]),Promise.all(o)}}class RSe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class MSe{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ad}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new pt(l[0],l[1],l[2]),a.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Nn)),Promise.all(o)}}class PSe{constructor(e){this.parser=e,this.name=In.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,a)}}class DSe{constructor(e){this.parser=e,this.name=In.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const a=o.extensions[t],l=r.images[a.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class LSe{constructor(e){this.name=In.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(l){const u=r.byteOffset||0,h=r.byteLength||0,d=r.count,p=r.byteStride,m=new Uint8Array(l,u,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,p,m,r.mode,r.filter).then(function(g){return g.buffer}):a.ready.then(function(){const g=new ArrayBuffer(d*p);return a.decodeGltfBuffer(new Uint8Array(g),d,p,m,r.mode,r.filter),g})})}else return null}}const pJ="glTF",qy=12,zQ={JSON:1313821514,BIN:5130562};class NSe{constructor(e){this.name=In.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,qy);if(this.header={magic:xu.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==pJ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-qy,r=new DataView(e,qy);let o=0;for(;o<i;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===zQ.JSON){const u=new Uint8Array(e,qy+o,a);this.content=xu.decodeText(u)}else if(l===zQ.BIN){const u=qy+o;this.body=e.slice(u,u+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class BSe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=In.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},u={},h={};for(const d in a){const p=gL[d]||d.toLowerCase();l[p]=a[d]}for(const d in e.attributes){const p=gL[d]||d.toLowerCase();if(a[d]!==void 0){const m=i.accessors[e.attributes[d]],g=FS[m.componentType];h[p]=g.name,u[p]=m.normalized===!0}}return t.getDependency("bufferView",o).then(function(d){return new Promise(function(p){r.decodeDracoFile(d,function(m){for(const g in m.attributes){const v=m.attributes[g],y=u[g];y!==void 0&&(v.normalized=y)}p(m)},l,h)})})}}class FSe{constructor(){this.name=In.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class mL extends LO{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),l={specular:{value:new pt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=l,this.onBeforeCompile=function(u){for(const h in l)u.uniforms[h]=l[h];u.fragmentShader=u.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return l.specular.value},set:function(u){l.specular.value=u}},specularMap:{get:function(){return l.specularMap.value},set:function(u){l.specularMap.value=u,u?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(u){l.glossiness.value=u}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(u){l.glossinessMap.value=u,u?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class USe{constructor(){this.name=In.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return mL}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new pt(1,1,1),e.opacity=1;const o=[];if(Array.isArray(r.diffuseFactor)){const a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(r.diffuseTexture!==void 0&&o.push(i.assignTexture(e,"map",r.diffuseTexture,Nn)),e.emissive=new pt(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new pt(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const a=r.specularGlossinessTexture;o.push(i.assignTexture(e,"glossinessMap",a)),o.push(i.assignTexture(e,"specularMap",a,Nn))}return Promise.all(o)}createMaterial(e){const t=new mL(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=id,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class GSe{constructor(){this.name=In.KHR_MESH_QUANTIZATION}}class mJ extends NO{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[o+a];return t}interpolate_(e,t,i,r){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,d=r-t,p=(i-t)/d,m=p*p,g=m*p,v=e*h,y=v-h,S=-2*g+3*m,T=g-m,w=1-S,E=T-m+p;for(let $=0;$!==l;$++){const A=a[y+$+l],I=a[y+$+u]*d,D=a[v+$+l],R=a[v+$]*d;o[$]=w*A+E*I+S*D+T*R}return o}}const WSe=new Jr;class zSe extends mJ{interpolate_(e,t,i,r){const o=super.interpolate_(e,t,i,r);return WSe.fromArray(o).normalize().toArray(o),o}}const Eh={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},FS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},QQ={9728:fr,9729:hi,9984:vS,9985:bA,9986:G0,9987:Iu},VQ={33071:zs,33648:cO,10497:Pf},HQ={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Xd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},QSe={CUBICSPLINE:void 0,LINEAR:eg,STEP:uO},iP={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function VSe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new LO({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Sc})),n.DefaultMaterial}function Jy(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function am(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function HSe(n,e,t){let i=!1,r=!1,o=!1;for(let h=0,d=e.length;h<d;h++){const p=e[h];if(p.POSITION!==void 0&&(i=!0),p.NORMAL!==void 0&&(r=!0),p.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);const a=[],l=[],u=[];for(let h=0,d=e.length;h<d;h++){const p=e[h];if(i){const m=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):n.attributes.position;a.push(m)}if(r){const m=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):n.attributes.normal;l.push(m)}if(o){const m=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;u.push(m)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const d=h[0],p=h[1],m=h[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=p),o&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function XSe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jSe(n){const e=n.extensions&&n.extensions[In.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+XQ(e.attributes):t=n.indices+":"+XQ(n.attributes)+":"+n.mode,t}function XQ(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function _L(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function YSe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class ZSe{constructor(e={},t={}){var i,r;this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new TSe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const o=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,a=typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.indexOf("Firefox"))>-1,l=typeof navigator<"u"&&a?(r=navigator.userAgent)===null||r===void 0?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||o||a&&l<98?this.textureLoader=new DY(this.options.manager):this.textureLoader=new GY(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const l={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};Jy(o,l,r),am(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const a=t[r].joints;for(let l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),o=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[h,d]of a.children.entries())o(d,l.children[h])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[In.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,a){i.load(xu.resolveURL(t.uri,r.path),o,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(a){const l=a[0],u=HQ[r.type],h=FS[r.componentType],d=h.BYTES_PER_ELEMENT,p=d*u,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let y,S;if(g&&g!==p){const T=Math.floor(m/g),w="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count;let E=t.cache.get(w);E||(y=new h(l,T*g,r.count*g/d),E=new ST(y,g/d),t.cache.add(w,E)),S=new aa(E,u,m%g/d,v)}else l===null?y=new h(r.count*u):y=new h(l,m,r.count*u),S=new ei(y,u,v);if(r.sparse!==void 0){const T=HQ.SCALAR,w=FS[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,$=r.sparse.values.byteOffset||0,A=new w(a[1],E,r.sparse.count*T),I=new h(a[2],$,r.sparse.count*u);l!==null&&(S=new ei(S.array.slice(),S.itemSize,S.normalized));for(let D=0,R=A.length;D<R;D++){const B=A[D];if(S.setX(B,I[D*u]),u>=2&&S.setY(B,I[D*u+1]),u>=3&&S.setZ(B,I[D*u+2]),u>=4&&S.setW(B,I[D*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return S})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,a=t.images[o];let l=this.textureLoader;if(a.uri){const u=i.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(e,o,l)}loadTextureImage(e,t,i){const r=this,o=this.json,a=o.textures[e],l=o.images[t],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,i).then(function(d){d.flipY=!1,a.name&&(d.name=a.name);const m=(o.samplers||{})[a.sampler]||{};return d.magFilter=QQ[m.magFilter]||hi,d.minFilter=QQ[m.minFilter]||Iu,d.wrapS=VQ[m.wrapS]||Pf,d.wrapT=VQ[m.wrapT]||Pf,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const a=r.images[e],l=self.URL||self.webkitURL;let u=a.uri||"",h=!1;if(a.bufferView!==void 0)u=i.getDependency("bufferView",a.bufferView).then(function(p){h=!0;const m=new Blob([p],{type:a.mimeType});return u=l.createObjectURL(m),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(u).then(function(p){return new Promise(function(m,g){let v=m;t.isImageBitmapLoader===!0&&(v=function(y){const S=new Ri(y);S.needsUpdate=!0,m(S)}),t.load(xu.resolveURL(p,o.path),v,void 0,g)})}).then(function(p){return h===!0&&l.revokeObjectURL(u),p.userData.mimeType=a.mimeType||YSe(a.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),p});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const o=this;return this.getDependency("texture",i.index).then(function(a){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),o.extensions[In.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[In.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=o.associations.get(a);a=o.extensions[In.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),o.associations.set(a,u)}}return r!==void 0&&(a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new MA,Br.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new fo,Br.prototype.copy.call(u,i),u.color.copy(i.color),this.cache.add(l,u)),i=u}if(r||o||a){let l="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),r&&(l+="derivative-tangents:"),o&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=i.clone(),o&&(u.vertexColors=!0),a&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return LO}loadMaterial(e){const t=this,i=this.json,r=this.extensions,o=i.materials[e];let a;const l={},u=o.extensions||{},h=[];if(u[In.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const p=r[In.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=p.getMaterialType(),h.push(p.extendParams(l,o,t))}else if(u[In.KHR_MATERIALS_UNLIT]){const p=r[In.KHR_MATERIALS_UNLIT];a=p.getMaterialType(),h.push(p.extendParams(l,o,t))}else{const p=o.pbrMetallicRoughness||{};if(l.color=new pt(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;l.color.fromArray(m),l.opacity=m[3]}p.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",p.baseColorTexture,Nn)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture))),a=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,l)})))}o.doubleSided===!0&&(l.side=El);const d=o.alphaMode||iP.OPAQUE;if(d===iP.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===iP.MASK&&(l.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&a!==Ro&&(h.push(t.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new nt(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;l.normalScale.set(p,p)}return o.occlusionTexture!==void 0&&a!==Ro&&(h.push(t.assignTexture(l,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&a!==Ro&&(l.emissive=new pt().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&a!==Ro&&h.push(t.assignTexture(l,"emissiveMap",o.emissiveTexture,Nn)),Promise.all(h).then(function(){let p;return a===mL?p=r[In.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):p=new a(l),o.name&&(p.name=o.name),am(p,o),t.associations.set(p,{materials:e}),o.extensions&&Jy(r,p,o),p})}createUniqueName(e){const t=jn.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function o(l){return i[In.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return jQ(u,l,t)})}const a=[];for(let l=0,u=e.length;l<u;l++){const h=e[l],d=jSe(h),p=r[d];if(p)a.push(p.promise);else{let m;h.extensions&&h.extensions[In.KHR_DRACO_MESH_COMPRESSION]?m=o(h):m=jQ(new On,h,t),r[d]={primitive:h,promise:m},a.push(m)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,o=i.meshes[e],a=o.primitives,l=[];for(let u=0,h=a.length;u<h;u++){const d=a[u].material===void 0?VSe(this.cache):this.getDependency("material",a[u].material);l.push(d)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),d=u[u.length-1],p=[];for(let g=0,v=d.length;g<v;g++){const y=d[g],S=a[g];let T;const w=h[g];if(S.mode===Eh.TRIANGLES||S.mode===Eh.TRIANGLE_STRIP||S.mode===Eh.TRIANGLE_FAN||S.mode===void 0)T=o.isSkinnedMesh===!0?new e3(y,w):new nr(y,w),T.isSkinnedMesh===!0&&!T.geometry.attributes.skinWeight.normalized&&T.normalizeSkinWeights(),S.mode===Eh.TRIANGLE_STRIP?T.geometry=YQ(T.geometry,Qj):S.mode===Eh.TRIANGLE_FAN&&(T.geometry=YQ(T.geometry,zB));else if(S.mode===Eh.LINES)T=new Ec(y,w);else if(S.mode===Eh.LINE_STRIP)T=new Zh(y,w);else if(S.mode===Eh.LINE_LOOP)T=new t3(y,w);else if(S.mode===Eh.POINTS)T=new n3(y,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(T.geometry.morphAttributes).length>0&&XSe(T,o),T.name=t.createUniqueName(o.name||"mesh_"+e),am(T,o),S.extensions&&Jy(r,T,S),t.assignFinalMaterial(T),p.push(T)}for(let g=0,v=p.length;g<v;g++)t.associations.set(p[g],{meshes:e,primitives:g});if(p.length===1)return p[0];const m=new Nh;t.associations.set(m,{meshes:e});for(let g=0,v=p.length;g<v;g++)m.add(p[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ci(TA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Uh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),am(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],o=[],a=[],l=[],u=[];for(let h=0,d=i.channels.length;h<d;h++){const p=i.channels[h],m=i.samplers[p.sampler],g=p.target,v=g.node,y=i.parameters!==void 0?i.parameters[m.input]:m.input,S=i.parameters!==void 0?i.parameters[m.output]:m.output;r.push(this.getDependency("node",v)),o.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",S)),l.push(m),u.push(g)}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const d=h[0],p=h[1],m=h[2],g=h[3],v=h[4],y=[];for(let T=0,w=d.length;T<w;T++){const E=d[T],$=p[T],A=m[T],I=g[T],D=v[T];if(E===void 0)continue;E.updateMatrix();let R;switch(Xd[D.path]){case Xd.weights:R=fO;break;case Xd.rotation:R=Df;break;case Xd.position:case Xd.scale:default:R=pO;break}const B=E.name?E.name:E.uuid,G=I.interpolation!==void 0?QSe[I.interpolation]:eg,Z=[];Xd[D.path]===Xd.weights?E.traverse(function(H){H.morphTargetInfluences&&Z.push(H.name?H.name:H.uuid)}):Z.push(B);let N=A.array;if(A.normalized){const H=_L(N.constructor),M=new Float32Array(N.length);for(let K=0,re=N.length;K<re;K++)M[K]=N[K]*H;N=M}for(let H=0,M=Z.length;H<M;H++){const K=new R(Z[H]+"."+Xd[D.path],$.array,N,G);I.interpolation==="CUBICSPLINE"&&(K.createInterpolant=function(ce){const X=this instanceof Df?zSe:mJ;return new X(this.times,this.values,this.getValueSize()/3,ce)},K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(K)}}const S=i.name?i.name:"animation_"+e;return new mO(S,void 0,y)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){const a=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,h=r.weights.length;u<h;u++)l.morphTargetInfluences[u]=r.weights[u]}),a})}loadNode(e){const t=this.json,i=this.extensions,r=this,o=t.nodes[e],a=o.name?r.createUniqueName(o.name):"";return function(){const l=[],u=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return u&&l.push(u),o.camera!==void 0&&l.push(r.getDependency("camera",o.camera).then(function(h){return r._getNodeRef(r.cameraCache,o.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),Promise.all(l)}().then(function(l){let u;if(o.isBone===!0?u=new RA:l.length>1?u=new Nh:l.length===1?u=l[0]:u=new Un,u!==l[0])for(let h=0,d=l.length;h<d;h++)u.add(l[h]);if(o.name&&(u.userData.name=o.name,u.name=a),am(u,o),o.extensions&&Jy(i,u,o),o.matrix!==void 0){const h=new hn;h.fromArray(o.matrix),u.applyMatrix4(h)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],o=this,a=new Nh;r.name&&(a.name=o.createUniqueName(r.name)),am(a,r),r.extensions&&Jy(i,a,r);const l=r.nodes||[],u=[];for(let h=0,d=l.length;h<d;h++)u.push(gJ(l[h],a,t,o));return Promise.all(u).then(function(){const h=d=>{const p=new Map;for(const[m,g]of o.associations)(m instanceof Br||m instanceof Ri)&&p.set(m,g);return d.traverse(m=>{const g=o.associations.get(m);g!=null&&p.set(m,g)}),p};return o.associations=h(a),a})}}function gJ(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(o){if(r.skin===void 0)return o;let a;return i.getDependency("skin",r.skin).then(function(l){a=l;const u=[];for(let h=0,d=a.joints.length;h<d;h++)u.push(i.getDependency("node",a.joints[h]));return Promise.all(u)}).then(function(l){return o.traverse(function(u){if(!u.isMesh)return;const h=[],d=[];for(let p=0,m=l.length;p<m;p++){const g=l[p];if(g){h.push(g);const v=new hn;a.inverseBindMatrices!==void 0&&v.fromArray(a.inverseBindMatrices.array,p*16),d.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[p])}u.bind(new TT(h,d),u.matrixWorld)}),o})}).then(function(o){e.add(o);const a=[];if(r.children){const l=r.children;for(let u=0,h=l.length;u<h;u++){const d=l[u];a.push(gJ(d,o,t,i))}}return Promise.all(a)})}function qSe(n,e,t){const i=e.attributes,r=new Za;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,h=l.max;if(u!==void 0&&h!==void 0){if(r.set(new he(u[0],u[1],u[2]),new he(h[0],h[1],h[2])),l.normalized){const d=_L(FS[l.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const l=new he,u=new he;for(let h=0,d=o.length;h<d;h++){const p=o[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],g=m.min,v=m.max;if(g!==void 0&&v!==void 0){if(u.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),m.normalized){const y=_L(FS[m.componentType]);u.multiplyScalar(y)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}n.boundingBox=r;const a=new wc;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function jQ(n,e,t){const i=e.attributes,r=[];function o(a,l){return t.getDependency("accessor",a).then(function(u){n.setAttribute(l,u)})}for(const a in i){const l=gL[a]||a.toLowerCase();l in n.attributes||r.push(o(i[a],l))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});r.push(a)}return am(n,e),qSe(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?HSe(n,e.targets,t):n})}function YQ(n,e){let t=n.getIndex();if(t===null){const a=[],l=n.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===zB)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(r),o}const rP=new WeakMap;class JSe extends Uo{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const o=new Xa(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const h=t.attributeTypes[u];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=h.name)}const i=JSON.stringify(t);if(rP.has(e)){const u=rP.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(o,a).then(u=>(r=u,new Promise((h,d)=>{r._callbacks[o]={resolve:h,reject:d},r.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),rP.set(e,{key:i,promise:l}),l}_createGeometry(e){const t=new On;e.index&&t.setIndex(new ei(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],o=r.name,a=r.array,l=r.itemSize;t.setAttribute(o,new ei(a,l))}return t}_loadLibrary(e,t){const i=new Xa(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,o)=>{i.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=KSe.toString(),a=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const a=o.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function KSe(){let n,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(p){d({draco:p})},DracoDecoderModule(n)});break;case"decode":const u=l.buffer,h=l.taskConfig;e.then(d=>{const p=d.draco,m=new p.Decoder,g=new p.DecoderBuffer;g.Init(new Int8Array(u),u.byteLength);try{const v=t(p,m,g,h),y=v.attributes.map(S=>S.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:l.id,error:v.message})}finally{p.destroy(g),p.destroy(m)}});break}};function t(a,l,u,h){const d=h.attributeIDs,p=h.attributeTypes;let m,g;const v=l.GetEncodedGeometryType(u);if(v===a.TRIANGULAR_MESH)m=new a.Mesh,g=l.DecodeBufferToMesh(u,m);else if(v===a.POINT_CLOUD)m=new a.PointCloud,g=l.DecodeBufferToPointCloud(u,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const y={index:null,attributes:[]};for(const S in d){const T=self[p[S]];let w,E;if(h.useUniqueIDs)E=d[S],w=l.GetAttributeByUniqueId(m,E);else{if(E=l.GetAttributeId(m,a[d[S]]),E===-1)continue;w=l.GetAttribute(m,E)}y.attributes.push(r(a,l,m,S,T,w))}return v===a.TRIANGULAR_MESH&&(y.index=i(a,l,m)),a.destroy(m),y}function i(a,l,u){const d=u.num_faces()*3,p=d*4,m=a._malloc(p);l.GetTrianglesUInt32Array(u,p,m);const g=new Uint32Array(a.HEAPF32.buffer,m,d).slice();return a._free(m),{array:g,itemSize:1}}function r(a,l,u,h,d,p){const m=p.num_components(),v=u.num_points()*m,y=v*d.BYTES_PER_ELEMENT,S=o(a,d),T=a._malloc(y);l.GetAttributeDataArrayForAllPoints(u,p,S,y,T);const w=new d(a.HEAPF32.buffer,T,v).slice();return a._free(T),{name:h,array:w,itemSize:m}}function o(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}const ZQ=new Za,YE=new he;class iF extends FA{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Gt(e,3)),this.setAttribute("uv",new Gt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Y$(t,6,1);return this.setAttribute("instanceStart",new aa(i,3,0)),this.setAttribute("instanceEnd",new aa(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Y$(t,6,1);return this.setAttribute("instanceColorStart",new aa(i,3,0)),this.setAttribute("instanceColorEnd",new aa(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new h3(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Za);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),ZQ.setFromBufferAttribute(t),this.boundingBox.union(ZQ))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wc),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let o=0,a=e.count;o<a;o++)YE.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(YE)),YE.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(YE));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class _J extends iF{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}vt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new nt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Io.line={uniforms:pg.merge([vt.common,vt.fog,vt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class rF extends Ha{constructor(e){super({type:"LineMaterial",uniforms:pg.clone(Io.line.uniforms),vertexShader:Io.line.vertexShader,fragmentShader:Io.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const qQ=new he,JQ=new he,Ls=new Fn,Ns=new Fn,iu=new Fn,sP=new he,oP=new hn,ao=new VY,KQ=new he,ZE=new Za,qE=new wc,ru=new Fn;let mu,OL,OJ,Fm;function eV(n,e,t){return ru.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),ru.multiplyScalar(1/ru.w),ru.x=Fm/t.width,ru.y=Fm/t.height,ru.applyMatrix4(n.projectionMatrixInverse),ru.multiplyScalar(1/ru.w),Math.abs(Math.max(ru.x,ru.y))}function eTe(n,e){for(let t=0,i=OL.count;t<i;t++){ao.start.fromBufferAttribute(OL,t),ao.end.fromBufferAttribute(OJ,t);const r=new he,o=new he;mu.distanceSqToSegment(ao.start,ao.end,o,r),o.distanceTo(r)<Fm*.5&&e.push({point:o,pointOnLine:r,distance:mu.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function tTe(n,e,t){const i=e.projectionMatrix,o=n.material.resolution,a=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,d=-e.near;mu.at(1,iu),iu.w=1,iu.applyMatrix4(e.matrixWorldInverse),iu.applyMatrix4(i),iu.multiplyScalar(1/iu.w),iu.x*=o.x/2,iu.y*=o.y/2,iu.z=0,sP.copy(iu),oP.multiplyMatrices(e.matrixWorldInverse,a);for(let p=0,m=u.count;p<m;p++){if(Ls.fromBufferAttribute(u,p),Ns.fromBufferAttribute(h,p),Ls.w=1,Ns.w=1,Ls.applyMatrix4(oP),Ns.applyMatrix4(oP),Ls.z>d&&Ns.z>d)continue;if(Ls.z>d){const w=Ls.z-Ns.z,E=(Ls.z-d)/w;Ls.lerp(Ns,E)}else if(Ns.z>d){const w=Ns.z-Ls.z,E=(Ns.z-d)/w;Ns.lerp(Ls,E)}Ls.applyMatrix4(i),Ns.applyMatrix4(i),Ls.multiplyScalar(1/Ls.w),Ns.multiplyScalar(1/Ns.w),Ls.x*=o.x/2,Ls.y*=o.y/2,Ns.x*=o.x/2,Ns.y*=o.y/2,ao.start.copy(Ls),ao.start.z=0,ao.end.copy(Ns),ao.end.z=0;const v=ao.closestPointToPointParameter(sP,!0);ao.at(v,KQ);const y=TA.lerp(Ls.z,Ns.z,v),S=y>=-1&&y<=1,T=sP.distanceTo(KQ)<Fm*.5;if(S&&T){ao.start.fromBufferAttribute(u,p),ao.end.fromBufferAttribute(h,p),ao.start.applyMatrix4(a),ao.end.applyMatrix4(a);const w=new he,E=new he;mu.distanceSqToSegment(ao.start,ao.end,E,w),t.push({point:E,pointOnLine:w,distance:mu.origin.distanceTo(E),object:n,face:null,faceIndex:p,uv:null,uv2:null})}}}class vJ extends nr{constructor(e=new iF,t=new rF({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,l=0,u=t.count;a<u;a++,l+=2)qQ.fromBufferAttribute(t,a),JQ.fromBufferAttribute(i,a),r[l]=l===0?0:r[l-1],r[l+1]=r[l]+qQ.distanceTo(JQ);const o=new Y$(r,2,1);return e.setAttribute("instanceDistanceStart",new aa(o,1,0)),e.setAttribute("instanceDistanceEnd",new aa(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;mu=e.ray;const a=this.matrixWorld,l=this.geometry,u=this.material;Fm=u.linewidth+o,OL=l.attributes.instanceStart,OJ=l.attributes.instanceEnd,l.boundingSphere===null&&l.computeBoundingSphere(),qE.copy(l.boundingSphere).applyMatrix4(a);let h;if(i)h=Fm*.5;else{const p=Math.max(r.near,qE.distanceToPoint(mu.origin));h=eV(r,p,u.resolution)}if(qE.radius+=h,mu.intersectsSphere(qE)===!1)return;l.boundingBox===null&&l.computeBoundingBox(),ZE.copy(l.boundingBox).applyMatrix4(a);let d;if(i)d=Fm*.5;else{const p=Math.max(r.near,ZE.distanceToPoint(mu.origin));d=eV(r,p,u.resolution)}ZE.expandByScalar(d),mu.intersectsBox(ZE)!==!1&&(i?eTe(this,t):tTe(this,r,t))}}class nTe extends vJ{constructor(e=new _J,t=new rF({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}let JE;const aP=()=>{if(JE)return JE;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let o;const a=WebAssembly.instantiate(l(r),{}).then(p=>{o=p.instance,o.exports.__wasm_call_ctors()});function l(p){const m=new Uint8Array(p.length);for(let v=0;v<p.length;++v){const y=p.charCodeAt(v);m[v]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let g=0;for(let v=0;v<p.length;++v)m[g++]=m[v]<60?i[m[v]]:(m[v]-60)*64+m[++v];return m.buffer.slice(0,g)}function u(p,m,g,v,y,S){const T=o.exports.sbrk,w=g+3&-4,E=T(w*v),$=T(y.length),A=new Uint8Array(o.exports.memory.buffer);A.set(y,$);const I=p(E,g,v,$,y.length);if(I===0&&S&&S(E,w,v),m.set(A.subarray(E,E+g*v)),T(E-T(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return JE={ready:a,supported:!0,decodeVertexBuffer(p,m,g,v,y){u(o.exports.meshopt_decodeVertexBuffer,p,m,g,v,o.exports[h[y]])},decodeIndexBuffer(p,m,g,v){u(o.exports.meshopt_decodeIndexBuffer,p,m,g,v)},decodeIndexSequence(p,m,g,v){u(o.exports.meshopt_decodeIndexSequence,p,m,g,v)},decodeGltfBuffer(p,m,g,v,y,S){u(o.exports[d[y]],p,m,g,v,o.exports[h[S]])}},JE},iTe=q.forwardRef(function({points:e,color:t="black",vertexColors:i,linewidth:r,lineWidth:o,segments:a,dashed:l,...u},h){const d=Bi(v=>v.size),p=q.useMemo(()=>a?new vJ:new nTe,[a]),[m]=q.useState(()=>new rF),g=q.useMemo(()=>{const v=a?new iF:new _J,y=e.map(S=>{const T=Array.isArray(S);return S instanceof he?[S.x,S.y,S.z]:S instanceof nt?[S.x,S.y,0]:T&&S.length===3?[S[0],S[1],S[2]]:T&&S.length===2?[S[0],S[1],0]:S});if(v.setPositions(y.flat()),i){const S=i.map(T=>T instanceof pt?T.toArray():T);v.setColors(S.flat())}return v},[e,a,i]);return q.useLayoutEffect(()=>{p.computeLineDistances()},[e,p]),q.useLayoutEffect(()=>{l?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[l,m]),q.useEffect(()=>()=>g.dispose(),[g]),q.createElement("primitive",Ji({object:p,ref:h},u),q.createElement("primitive",{object:g,attach:"geometry"}),q.createElement("primitive",Ji({object:m,attach:"material",color:t,vertexColors:!!i,resolution:[d.width,d.height],linewidth:r??o,dashed:l},u)))}),rTe=q.forwardRef(function({points:e,closed:t=!1,curveType:i="centripetal",tension:r=.5,segments:o=20,vertexColors:a,...l},u){const h=q.useMemo(()=>{const m=e.map(g=>g instanceof he?g:new he(...g));return new s3(m,t,i,r)},[e,t,i,r]),d=q.useMemo(()=>h.getPoints(o),[h,o]),p=q.useMemo(()=>{if(!a||a.length<2)return;if(a.length===o+1)return a;const m=a.map(y=>y instanceof pt?y:new pt(...y));t&&m.push(m[0].clone());const g=[m[0]],v=o/(m.length-1);for(let y=1;y<o;y++){const S=y%v/v,T=Math.floor(y/v);g.push(m[T].clone().lerp(m[T+1],S))}return g.push(m[m.length-1]),g},[a,o]);return q.createElement(iTe,Ji({ref:u,points:d,vertexColors:p},l))});function sTe(){var n=Object.create(null);function e(r,o){var a=r.id,l=r.name,u=r.dependencies;u===void 0&&(u=[]);var h=r.init;h===void 0&&(h=function(){});var d=r.getTransferables;if(d===void 0&&(d=null),!n[a])try{u=u.map(function(m){return m&&m.isWorkerModule&&(e(m,function(g){if(g instanceof Error)throw g}),m=n[m.id].value),m}),h=i("<"+l+">.init",h),d&&(d=i("<"+l+">.getTransferables",d));var p=null;typeof h=="function"?p=h.apply(void 0,u):console.error("worker module init function failed to rehydrate"),n[a]={id:a,value:p,getTransferables:d},o(p)}catch(m){m&&m.noLog||console.error(m),o(m)}}function t(r,o){var a,l=r.id,u=r.args;(!n[l]||typeof n[l].value!="function")&&o(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var h=(a=n[l]).value.apply(a,u);h&&typeof h.then=="function"?h.then(d,function(p){return o(p instanceof Error?p:new Error(""+p))}):d(h)}catch(p){o(p)}function d(p){try{var m=n[l].getTransferables&&n[l].getTransferables(p);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),o(p,m)}catch(g){console.error(g),o(g)}}}function i(r,o){var a=void 0;self.troikaDefine=function(u){return a=u};var l=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(u){console.error(u)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(r){var o=r.data,a=o.messageId,l=o.action,u=o.data;try{l==="registerModule"&&e(u,function(h){h instanceof Error?postMessage({messageId:a,success:!1,error:h.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof h=="function"}})}),l==="callModule"&&t(u,function(h,d){h instanceof Error?postMessage({messageId:a,success:!1,error:h.message}):postMessage({messageId:a,success:!0,result:h},d||void 0)})}catch(h){postMessage({messageId:a,success:!1,error:h.stack})}})}function oTe(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var r=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return r},r},e}var yJ=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return yJ=function(){return n},n},aTe=0,lTe=0,lP=!1,Wb=Object.create(null),zb=Object.create(null),vL=Object.create(null);function HT(n){if((!n||typeof n.init!="function")&&!lP)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!yJ())return oTe(n);r==null&&(r="#default");var o="workerModule"+ ++aTe,a=n.name||o,l=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(lP=!0,h=HT({workerId:r,name:"<"+a+"> function dependency: "+h.name,init:`function(){return (
`+n$(h)+`
)}`}),lP=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],d=arguments.length;d--;)h[d]=arguments[d];if(!l){l=tV(r,"registerModule",u.workerModuleData);var p=function(){l=null,zb[r].delete(p)};(zb[r]||(zb[r]=new Set)).add(p)}return l.then(function(m){var g=m.isCallable;if(g)return tV(r,"callModule",{id:o,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:n$(t),getTransferables:i&&n$(i)},u}function cTe(n){zb[n]&&zb[n].forEach(function(e){e()}),Wb[n]&&(Wb[n].terminate(),delete Wb[n])}function n$(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function uTe(n){var e=Wb[n];if(!e){var t=n$(sTe);e=Wb[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,o=r.messageId,a=vL[o];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete vL[o],a(r)}}return e}function tV(n,e,t){return new Promise(function(i,r){var o=++lTe;vL[o]=function(a){a.success?i(a.result):r(new Error("Error in worker "+e+" call: "+a.error))},uTe(n).postMessage({messageId:o,action:e,data:t})})}function bJ(){var n=function(e){function t(Q,ee,z,L,le,de,ie,Ce){var ye=1-ie;Ce.x=ye*ye*Q+2*ye*ie*z+ie*ie*le,Ce.y=ye*ye*ee+2*ye*ie*L+ie*ie*de}function i(Q,ee,z,L,le,de,ie,Ce,ye,xe){var Fe=1-ye;xe.x=Fe*Fe*Fe*Q+3*Fe*Fe*ye*z+3*Fe*ye*ye*le+ye*ye*ye*ie,xe.y=Fe*Fe*Fe*ee+3*Fe*Fe*ye*L+3*Fe*ye*ye*de+ye*ye*ye*Ce}function r(Q,ee){for(var z=/([MLQCZ])([^MLQCZ]*)/g,L,le,de,ie,Ce;L=z.exec(Q);){var ye=L[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(xe){return parseFloat(xe)});switch(L[1]){case"M":ie=le=ye[0],Ce=de=ye[1];break;case"L":(ye[0]!==ie||ye[1]!==Ce)&&ee("L",ie,Ce,ie=ye[0],Ce=ye[1]);break;case"Q":{ee("Q",ie,Ce,ie=ye[2],Ce=ye[3],ye[0],ye[1]);break}case"C":{ee("C",ie,Ce,ie=ye[4],Ce=ye[5],ye[0],ye[1],ye[2],ye[3]);break}case"Z":(ie!==le||Ce!==de)&&ee("L",ie,Ce,le,de);break}}}function o(Q,ee,z){z===void 0&&(z=16);var L={x:0,y:0};r(Q,function(le,de,ie,Ce,ye,xe,Fe,Xe,Ue){switch(le){case"L":ee(de,ie,Ce,ye);break;case"Q":{for(var we=de,Ge=ie,W=1;W<z;W++)t(de,ie,xe,Fe,Ce,ye,W/(z-1),L),ee(we,Ge,L.x,L.y),we=L.x,Ge=L.y;break}case"C":{for(var Ee=de,Oe=ie,ae=1;ae<z;ae++)i(de,ie,xe,Fe,Xe,Ue,Ce,ye,ae/(z-1),L),ee(Ee,Oe,L.x,L.y),Ee=L.x,Oe=L.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,h={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(Q,ee){var z=Q.getContext?Q.getContext("webgl",h):Q,L=u.get(z);if(!L){let Ee=function(Te){var j=de[Te];if(!j&&(j=de[Te]=z.getExtension(Te),!j))throw new Error(Te+" not supported");return j},Oe=function(Te,j){var Y=z.createShader(j);return z.shaderSource(Y,Te),z.compileShader(Y),Y},ae=function(Te,j,Y,ue){if(!ie[Te]){var me={},Ie={},ze=z.createProgram();z.attachShader(ze,Oe(j,z.VERTEX_SHADER)),z.attachShader(ze,Oe(Y,z.FRAGMENT_SHADER)),z.linkProgram(ze),ie[Te]={program:ze,transaction:function(Je){z.useProgram(ze),Je({setUniform:function(ot,_e){for(var Le=[],We=arguments.length-2;We-- >0;)Le[We]=arguments[We+2];var F=Ie[_e]||(Ie[_e]=z.getUniformLocation(ze,_e));z["uniform"+ot].apply(z,[F].concat(Le))},setAttribute:function(ot,_e,Le,We,F){var te=me[ot];te||(te=me[ot]={buf:z.createBuffer(),loc:z.getAttribLocation(ze,ot),data:null}),z.bindBuffer(z.ARRAY_BUFFER,te.buf),z.vertexAttribPointer(te.loc,_e,z.FLOAT,!1,0,0),z.enableVertexAttribArray(te.loc),le?z.vertexAttribDivisor(te.loc,We):Ee("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(te.loc,We),F!==te.data&&(z.bufferData(z.ARRAY_BUFFER,F,Le),te.data=F)}})}}}ie[Te].transaction(ue)},ne=function(Te,j){ye++;try{z.activeTexture(z.TEXTURE0+ye);var Y=Ce[Te];Y||(Y=Ce[Te]=z.createTexture(),z.bindTexture(z.TEXTURE_2D,Y),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST)),z.bindTexture(z.TEXTURE_2D,Y),j(Y,ye)}finally{ye--}},pe=function(Te,j,Y){var ue=z.createFramebuffer();xe.push(ue),z.bindFramebuffer(z.FRAMEBUFFER,ue),z.activeTexture(z.TEXTURE0+j),z.bindTexture(z.TEXTURE_2D,Te),z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,Te,0);try{Y(ue)}finally{z.deleteFramebuffer(ue),z.bindFramebuffer(z.FRAMEBUFFER,xe[--xe.length-1]||null)}},Ae=function(){de={},ie={},Ce={},ye=-1,xe.length=0};var Fe=Ee,Xe=Oe,Ue=ae,we=ne,Ge=pe,W=Ae,le=typeof WebGL2RenderingContext<"u"&&z instanceof WebGL2RenderingContext,de={},ie={},Ce={},ye=-1,xe=[];z.canvas.addEventListener("webglcontextlost",function(Te){Ae(),Te.preventDefault()},!1),u.set(z,L={gl:z,isWebGL2:le,getExtension:Ee,withProgram:ae,withTexture:ne,withTextureFramebuffer:pe,handleContextLoss:Ae})}ee(L)}function p(Q,ee,z,L,le,de,ie,Ce){ie===void 0&&(ie=15),Ce===void 0&&(Ce=null),d(Q,function(ye){var xe=ye.gl,Fe=ye.withProgram,Xe=ye.withTexture;Xe("copy",function(Ue,we){xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,le,de,0,xe.RGBA,xe.UNSIGNED_BYTE,ee),Fe("copy",a,l,function(Ge){var W=Ge.setUniform,Ee=Ge.setAttribute;Ee("aUV",2,xe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),W("1i","image",we),xe.bindFramebuffer(xe.FRAMEBUFFER,Ce||null),xe.disable(xe.BLEND),xe.colorMask(ie&8,ie&4,ie&2,ie&1),xe.viewport(z,L,le,de),xe.scissor(z,L,le,de),xe.drawArrays(xe.TRIANGLES,0,3)})})})}function m(Q,ee,z){var L=Q.width,le=Q.height;d(Q,function(de){var ie=de.gl,Ce=new Uint8Array(L*le*4);ie.readPixels(0,0,L,le,ie.RGBA,ie.UNSIGNED_BYTE,Ce),Q.width=ee,Q.height=z,p(ie,Ce,0,0,L,le)})}var g=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:p,resizeWebGLCanvasWithoutClearing:m});function v(Q,ee,z,L,le,de){de===void 0&&(de=1);var ie=new Uint8Array(Q*ee),Ce=L[2]-L[0],ye=L[3]-L[1],xe=[];o(z,function(Ee,Oe,ae,ne){xe.push({x1:Ee,y1:Oe,x2:ae,y2:ne,minX:Math.min(Ee,ae),minY:Math.min(Oe,ne),maxX:Math.max(Ee,ae),maxY:Math.max(Oe,ne)})}),xe.sort(function(Ee,Oe){return Ee.maxX-Oe.maxX});for(var Fe=0;Fe<Q;Fe++)for(var Xe=0;Xe<ee;Xe++){var Ue=Ge(L[0]+Ce*(Fe+.5)/Q,L[1]+ye*(Xe+.5)/ee),we=Math.pow(1-Math.abs(Ue)/le,de)/2;Ue<0&&(we=1-we),we=Math.max(0,Math.min(255,Math.round(we*255))),ie[Xe*Q+Fe]=we}return ie;function Ge(Ee,Oe){for(var ae=1/0,ne=1/0,pe=xe.length;pe--;){var Ae=xe[pe];if(Ae.maxX+ne<=Ee)break;if(Ee+ne>Ae.minX&&Oe-ne<Ae.maxY&&Oe+ne>Ae.minY){var Te=T(Ee,Oe,Ae.x1,Ae.y1,Ae.x2,Ae.y2);Te<ae&&(ae=Te,ne=Math.sqrt(ae))}}return W(Ee,Oe)&&(ne=-ne),ne}function W(Ee,Oe){for(var ae=0,ne=xe.length;ne--;){var pe=xe[ne];if(pe.maxX<=Ee)break;var Ae=pe.y1>Oe!=pe.y2>Oe&&Ee<(pe.x2-pe.x1)*(Oe-pe.y1)/(pe.y2-pe.y1)+pe.x1;Ae&&(ae+=pe.y1<pe.y2?1:-1)}return ae!==0}}function y(Q,ee,z,L,le,de,ie,Ce,ye,xe){de===void 0&&(de=1),Ce===void 0&&(Ce=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0),S(Q,ee,z,L,le,de,ie,null,Ce,ye,xe)}function S(Q,ee,z,L,le,de,ie,Ce,ye,xe,Fe){de===void 0&&(de=1),ye===void 0&&(ye=0),xe===void 0&&(xe=0),Fe===void 0&&(Fe=0);for(var Xe=v(Q,ee,z,L,le,de),Ue=new Uint8Array(Xe.length*4),we=0;we<Xe.length;we++)Ue[we*4+Fe]=Xe[we];p(ie,Ue,ye,xe,Q,ee,1<<3-Fe,Ce)}function T(Q,ee,z,L,le,de){var ie=le-z,Ce=de-L,ye=ie*ie+Ce*Ce,xe=ye?Math.max(0,Math.min(1,((Q-z)*ie+(ee-L)*Ce)/ye)):0,Fe=Q-(z+xe*ie),Xe=ee-(L+xe*Ce);return Fe*Fe+Xe*Xe}var w=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:y,generateIntoFramebuffer:S}),E="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",$="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",A="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",I=new Float32Array([0,0,2,0,0,2]),D=null,R=!1,B={},G=new WeakMap;function Z(Q){if(!R&&!K(Q))throw new Error("WebGL generation not supported")}function N(Q,ee,z,L,le,de,ie){if(de===void 0&&(de=1),ie===void 0&&(ie=null),!ie&&(ie=D,!ie)){var Ce=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Ce)throw new Error("OffscreenCanvas or DOM canvas not supported");ie=D=Ce.getContext("webgl",{depth:!1})}Z(ie);var ye=new Uint8Array(Q*ee*4);d(ie,function(Ue){var we=Ue.gl,Ge=Ue.withTexture,W=Ue.withTextureFramebuffer;Ge("readable",function(Ee,Oe){we.texImage2D(we.TEXTURE_2D,0,we.RGBA,Q,ee,0,we.RGBA,we.UNSIGNED_BYTE,null),W(Ee,Oe,function(ae){M(Q,ee,z,L,le,de,we,ae,0,0,0),we.readPixels(0,0,Q,ee,we.RGBA,we.UNSIGNED_BYTE,ye)})})});for(var xe=new Uint8Array(Q*ee),Fe=0,Xe=0;Fe<ye.length;Fe+=4)xe[Xe++]=ye[Fe];return xe}function H(Q,ee,z,L,le,de,ie,Ce,ye,xe){de===void 0&&(de=1),Ce===void 0&&(Ce=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0),M(Q,ee,z,L,le,de,ie,null,Ce,ye,xe)}function M(Q,ee,z,L,le,de,ie,Ce,ye,xe,Fe){de===void 0&&(de=1),ye===void 0&&(ye=0),xe===void 0&&(xe=0),Fe===void 0&&(Fe=0),Z(ie);var Xe=[];o(z,function(Ue,we,Ge,W){Xe.push(Ue,we,Ge,W)}),Xe=new Float32Array(Xe),d(ie,function(Ue){var we=Ue.gl,Ge=Ue.isWebGL2,W=Ue.getExtension,Ee=Ue.withProgram,Oe=Ue.withTexture,ae=Ue.withTextureFramebuffer,ne=Ue.handleContextLoss;if(Oe("rawDistances",function(pe,Ae){(Q!==pe._lastWidth||ee!==pe._lastHeight)&&we.texImage2D(we.TEXTURE_2D,0,we.RGBA,pe._lastWidth=Q,pe._lastHeight=ee,0,we.RGBA,we.UNSIGNED_BYTE,null),Ee("main",E,$,function(Te){var j=Te.setAttribute,Y=Te.setUniform,ue=!Ge&&W("ANGLE_instanced_arrays"),me=!Ge&&W("EXT_blend_minmax");j("aUV",2,we.STATIC_DRAW,0,I),j("aLineSegment",4,we.DYNAMIC_DRAW,1,Xe),Y.apply(void 0,["4f","uGlyphBounds"].concat(L)),Y("1f","uMaxDistance",le),Y("1f","uExponent",de),ae(pe,Ae,function(Ie){we.enable(we.BLEND),we.colorMask(!0,!0,!0,!0),we.viewport(0,0,Q,ee),we.scissor(0,0,Q,ee),we.blendFunc(we.ONE,we.ONE),we.blendEquationSeparate(we.FUNC_ADD,Ge?we.MAX:me.MAX_EXT),we.clear(we.COLOR_BUFFER_BIT),Ge?we.drawArraysInstanced(we.TRIANGLES,0,3,Xe.length/4):ue.drawArraysInstancedANGLE(we.TRIANGLES,0,3,Xe.length/4)})}),Ee("post",a,A,function(Te){Te.setAttribute("aUV",2,we.STATIC_DRAW,0,I),Te.setUniform("1i","tex",Ae),we.bindFramebuffer(we.FRAMEBUFFER,Ce),we.disable(we.BLEND),we.colorMask(Fe===0,Fe===1,Fe===2,Fe===3),we.viewport(ye,xe,Q,ee),we.scissor(ye,xe,Q,ee),we.drawArrays(we.TRIANGLES,0,3)})}),we.isContextLost())throw ne(),new Error("webgl context lost")})}function K(Q){var ee=!Q||Q===D?B:Q.canvas||Q,z=G.get(ee);if(z===void 0){R=!0;var L=null;try{var le=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],de=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Q);z=de&&le.length===de.length&&de.every(function(ie,Ce){return ie===le[Ce]}),z||(L="bad trial run results",console.info(le,de))}catch(ie){z=!1,L=ie.message}L&&console.warn("WebGL SDF generation not supported:",L),R=!1,G.set(ee,z)}return z}var re=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:H,generateIntoFramebuffer:M,isSupported:K});function ce(Q,ee,z,L,le,de){le===void 0&&(le=Math.max(L[2]-L[0],L[3]-L[1])/2),de===void 0&&(de=1);try{return N.apply(re,arguments)}catch(ie){return console.info("WebGL SDF generation failed, falling back to JS",ie),v.apply(w,arguments)}}function X(Q,ee,z,L,le,de,ie,Ce,ye,xe){le===void 0&&(le=Math.max(L[2]-L[0],L[3]-L[1])/2),de===void 0&&(de=1),Ce===void 0&&(Ce=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0);try{return H.apply(re,arguments)}catch(Fe){return console.info("WebGL SDF generation failed, falling back to JS",Fe),y.apply(w,arguments)}}return e.forEachPathCommand=r,e.generate=ce,e.generateIntoCanvas=X,e.javascript=w,e.pathToLineSegments=o,e.webgl=re,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function hTe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(ne,pe){i[ne]=1<<pe+1,r[i[ne]]=ne}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,a=i.L|i.R|i.AL,l=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,u=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,h=i.S|i.WS|i.B|o|i.PDI|u,d=null;function p(){if(!d){d=new Map;var ne=function(Ae){if(t.hasOwnProperty(Ae)){var Te=0;t[Ae].split(",").forEach(function(j){var Y=j.split("+"),ue=Y[0],me=Y[1];ue=parseInt(ue,36),me=me?parseInt(me,36):0,d.set(Te+=ue,i[Ae]);for(var Ie=0;Ie<me;Ie++)d.set(++Te,i[Ae])})}};for(var pe in t)ne(pe)}}function m(ne){return p(),d.get(ne.codePointAt(0))||i.L}function g(ne){return r[m(ne)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function y(ne,pe){var Ae=36,Te=0,j=new Map,Y=pe&&new Map,ue;return ne.split(",").forEach(function me(Ie){if(Ie.indexOf("+")!==-1)for(var ze=+Ie;ze--;)me(ue);else{ue=Ie;var Se=Ie.split(">"),Je=Se[0],Ve=Se[1];Je=String.fromCodePoint(Te+=parseInt(Je,Ae)),Ve=String.fromCodePoint(Te+=parseInt(Ve,Ae)),j.set(Je,Ve),pe&&Y.set(Ve,Je)}}),{map:j,reverseMap:Y}}var S,T,w;function E(){if(!S){var ne=y(v.pairs,!0),pe=ne.map,Ae=ne.reverseMap;S=pe,T=Ae,w=y(v.canonical,!1).map}}function $(ne){return E(),S.get(ne)||null}function A(ne){return E(),T.get(ne)||null}function I(ne){return E(),w.get(ne)||null}var D=i.L,R=i.R,B=i.EN,G=i.ES,Z=i.ET,N=i.AN,H=i.CS,M=i.B,K=i.S,re=i.ON,ce=i.BN,X=i.NSM,Q=i.AL,ee=i.LRO,z=i.RLO,L=i.LRE,le=i.RLE,de=i.PDF,ie=i.LRI,Ce=i.RLI,ye=i.FSI,xe=i.PDI;function Fe(ne,pe){for(var Ae=125,Te=new Uint32Array(ne.length),j=0;j<ne.length;j++)Te[j]=m(ne[j]);var Y=new Map;function ue(Wi,Cr){var ii=Te[Wi];Te[Wi]=Cr,Y.set(ii,Y.get(ii)-1),ii&l&&Y.set(l,Y.get(l)-1),Y.set(Cr,(Y.get(Cr)||0)+1),Cr&l&&Y.set(l,(Y.get(l)||0)+1)}for(var me=new Uint8Array(ne.length),Ie=new Map,ze=[],Se=null,Je=0;Je<ne.length;Je++)Se||ze.push(Se={start:Je,end:ne.length-1,level:pe==="rtl"?1:pe==="ltr"?0:pd(Je,!1)}),Te[Je]&M&&(Se.end=Je,Se=null);for(var Ve=le|L|z|ee|o|xe|de|M,ot=function(Wi){return Wi+(Wi&1?1:2)},_e=function(Wi){return Wi+(Wi&1?2:1)},Le=0;Le<ze.length;Le++){Se=ze[Le];var We=[{_level:Se.level,_override:0,_isolate:0}],F=void 0,te=0,ge=0,Me=0;Y.clear();for(var oe=Se.start;oe<=Se.end;oe++){var Pe=Te[oe];if(F=We[We.length-1],Y.set(Pe,(Y.get(Pe)||0)+1),Pe&l&&Y.set(l,(Y.get(l)||0)+1),Pe&Ve)if(Pe&(le|L)){me[oe]=F._level;var et=(Pe===le?_e:ot)(F._level);et<=Ae&&!te&&!ge?We.push({_level:et,_override:0,_isolate:0}):te||ge++}else if(Pe&(z|ee)){me[oe]=F._level;var mt=(Pe===z?_e:ot)(F._level);mt<=Ae&&!te&&!ge?We.push({_level:mt,_override:Pe&z?R:D,_isolate:0}):te||ge++}else if(Pe&o){Pe&ye&&(Pe=pd(oe+1,!0)===1?Ce:ie),me[oe]=F._level,F._override&&ue(oe,F._override);var bt=(Pe===Ce?_e:ot)(F._level);bt<=Ae&&te===0&&ge===0?(Me++,We.push({_level:bt,_override:0,_isolate:1,_isolInitIndex:oe})):te++}else if(Pe&xe){if(te>0)te--;else if(Me>0){for(ge=0;!We[We.length-1]._isolate;)We.pop();var Tn=We[We.length-1]._isolInitIndex;Tn!=null&&(Ie.set(Tn,oe),Ie.set(oe,Tn)),We.pop(),Me--}F=We[We.length-1],me[oe]=F._level,F._override&&ue(oe,F._override)}else Pe&de?(te===0&&(ge>0?ge--:!F._isolate&&We.length>1&&(We.pop(),F=We[We.length-1])),me[oe]=F._level):Pe&M&&(me[oe]=Se.level);else me[oe]=F._level,F._override&&Pe!==ce&&ue(oe,F._override)}for(var wn=[],Gn=null,vn=Se.start;vn<=Se.end;vn++){var Wn=Te[vn];if(!(Wn&u)){var on=me[vn],xn=Wn&o,Ss=Wn===xe;Gn&&on===Gn._level?(Gn._end=vn,Gn._endsWithIsolInit=xn):wn.push(Gn={_start:vn,_end:vn,_level:on,_startsWithPDI:Ss,_endsWithIsolInit:xn})}}for(var Bt=[],zn=0;zn<wn.length;zn++){var fe=wn[zn];if(!fe._startsWithPDI||fe._startsWithPDI&&!Ie.has(fe._start)){for(var Qe=[Gn=fe],Ye=void 0;Gn&&Gn._endsWithIsolInit&&(Ye=Ie.get(Gn._end))!=null;)for(var Ne=zn+1;Ne<wn.length;Ne++)if(wn[Ne]._start===Ye){Qe.push(Gn=wn[Ne]);break}for(var qe=[],Pt=0;Pt<Qe.length;Pt++)for(var At=Qe[Pt],Zt=At._start;Zt<=At._end;Zt++)qe.push(Zt);for(var Jt=me[qe[0]],tn=Se.level,qt=qe[0]-1;qt>=0;qt--)if(!(Te[qt]&u)){tn=me[qt];break}var at=qe[qe.length-1],fi=me[at],mr=Se.level;if(!(Te[at]&o)){for(var gr=at+1;gr<=Se.end;gr++)if(!(Te[gr]&u)){mr=me[gr];break}}Bt.push({_seqIndices:qe,_sosType:Math.max(tn,Jt)%2?R:D,_eosType:Math.max(mr,fi)%2?R:D})}}for(var Ts=0;Ts<Bt.length;Ts++){var cn=Bt[Ts],rt=cn._seqIndices,Dn=cn._sosType,nn=cn._eosType;if(Y.get(X))for(var Et=0;Et<rt.length;Et++){var Fu=rt[Et];if(Te[Fu]&X){for(var is=Dn,rs=Et-1;rs>=0;rs--)if(!(Te[rt[rs]]&u)){is=Te[rt[rs]];break}ue(Fu,is&(o|xe)?re:is)}}if(Y.get(B))for(var Jn=0;Jn<rt.length;Jn++){var lt=rt[Jn];if(Te[lt]&B)for(var En=Jn-1;En>=-1;En--){var ai=En===-1?Dn:Te[rt[En]];if(ai&a){ai===Q&&ue(lt,N);break}}}if(Y.get(Q))for(var pi=0;pi<rt.length;pi++){var _r=rt[pi];Te[_r]&Q&&ue(_r,R)}if(Y.get(G)||Y.get(H))for(var rn=1;rn<rt.length-1;rn++){var Wr=rt[rn];if(Te[Wr]&(G|H)){for(var Pi=0,Dl=0,Ll=rn-1;Ll>=0&&(Pi=Te[rt[Ll]],!!(Pi&u));Ll--);for(var ud=rn+1;ud<rt.length&&(Dl=Te[rt[ud]],!!(Dl&u));ud++);Pi===Dl&&(Te[Wr]===G?Pi===B:Pi&(B|N))&&ue(Wr,Pi)}}if(Y.get(B))for(var Go=0;Go<rt.length;Go++){var Tg=rt[Go];if(Te[Tg]&B){for(var ss=Go-1;ss>=0&&Te[rt[ss]]&(Z|u);ss--)ue(rt[ss],B);for(var Ac=Go+1;Ac<rt.length&&Te[rt[Ac]]&(Z|u);Ac++)ue(rt[Ac],B)}}if(Y.get(Z)||Y.get(G)||Y.get(H))for(var Uu=0;Uu<rt.length;Uu++){var hd=rt[Uu];if(Te[hd]&(Z|G|H)){ue(hd,re);for(var Nl=Uu-1;Nl>=0&&Te[rt[Nl]]&u;Nl--)ue(rt[Nl],re);for(var pa=Uu+1;pa<rt.length&&Te[rt[pa]]&u;pa++)ue(rt[pa],re)}}if(Y.get(B))for(var Ja=0,kc=Dn;Ja<rt.length;Ja++){var wg=rt[Ja],Gu=Te[wg];Gu&B?kc===D&&ue(wg,D):Gu&a&&(kc=Gu)}if(Y.get(l)){var mo=R|B|N,Wu=mo|D,Wo=[];{for(var Ic=[],ma=0;ma<rt.length;ma++)if(Te[rt[ma]]&l){var fn=ne[rt[ma]],Rc=void 0;if($(fn)!==null)if(Ic.length<63)Ic.push({char:fn,seqIndex:ma});else break;else if((Rc=A(fn))!==null)for(var zo=Ic.length-1;zo>=0;zo--){var dd=Ic[zo].char;if(dd===Rc||dd===A(I(fn))||$(I(dd))===fn){Wo.push([Ic[zo].seqIndex,ma]),Ic.length=zo;break}}}Wo.sort(function(Wi,Cr){return Wi[0]-Cr[0]})}for(var zu=0;zu<Wo.length;zu++){for(var Ys=Wo[zu],li=Ys[0],xr=Ys[1],Qu=!1,os=0,Vu=li+1;Vu<xr;Vu++){var Ka=rt[Vu];if(Te[Ka]&Wu){Qu=!0;var Zs=Te[Ka]&mo?R:D;if(Zs===tl(Ka)){os=Zs;break}}}if(Qu&&!os){os=Dn;for(var qf=li-1;qf>=0;qf--){var Hu=rt[qf];if(Te[Hu]&Wu){var as=Te[Hu]&mo?R:D;as!==tl(Hu)?os=as:os=tl(Hu);break}}}if(os){if(Te[rt[li]]=Te[rt[xr]]=os,os!==tl(rt[li])){for(var ws=li+1;ws<rt.length;ws++)if(!(Te[rt[ws]]&u)){m(ne[rt[ws]])&X&&(Te[rt[ws]]=os);break}}if(os!==tl(rt[xr])){for(var el=xr+1;el<rt.length;el++)if(!(Te[rt[el]]&u)){m(ne[rt[el]])&X&&(Te[rt[el]]=os);break}}}}for(var $r=0;$r<rt.length;$r++)if(Te[rt[$r]]&l){for(var fd=$r,ls=$r,qs=Dn,Gi=$r-1;Gi>=0;Gi--)if(Te[rt[Gi]]&u)fd=Gi;else{qs=Te[rt[Gi]]&mo?R:D;break}for(var Xu=nn,ga=$r+1;ga<rt.length;ga++)if(Te[rt[ga]]&(l|u))ls=ga;else{Xu=Te[rt[ga]]&mo?R:D;break}for(var cs=fd;cs<=ls;cs++)Te[rt[cs]]=qs===Xu?qs:tl(rt[cs]);$r=ls}}}for(var bi=Se.start;bi<=Se.end;bi++){var ju=me[bi],_a=Te[bi];if(ju&1?_a&(D|B|N)&&me[bi]++:_a&R?me[bi]++:_a&(N|B)&&(me[bi]+=2),_a&u&&(me[bi]=bi===0?Se.level:me[bi-1]),bi===Se.end||m(ne[bi])&(K|M))for(var Mc=bi;Mc>=0&&m(ne[Mc])&h;Mc--)me[Mc]=Se.level}}return{levels:me,paragraphs:ze};function pd(Wi,Cr){for(var ii=Wi;ii<ne.length;ii++){var zi=Te[ii];if(zi&(R|Q))return 1;if(zi&(M|D)||Cr&&zi===xe)return 0;if(zi&o){var Oa=Eg(ii);ii=Oa===-1?ne.length:Oa}}return 0}function Eg(Wi){for(var Cr=1,ii=Wi+1;ii<ne.length;ii++){var zi=Te[ii];if(zi&M)break;if(zi&xe){if(--Cr===0)return ii}else zi&o&&Cr++}return-1}function tl(Wi){return me[Wi]&1?R:D}}var Xe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ue;function we(){if(!Ue){var ne=y(Xe,!0),pe=ne.map,Ae=ne.reverseMap;Ae.forEach(function(Te,j){pe.set(j,Te)}),Ue=pe}}function Ge(ne){return we(),Ue.get(ne)||null}function W(ne,pe,Ae,Te){var j=ne.length;Ae=Math.max(0,Ae==null?0:+Ae),Te=Math.min(j-1,Te==null?j-1:+Te);for(var Y=new Map,ue=Ae;ue<=Te;ue++)if(pe[ue]&1){var me=Ge(ne[ue]);me!==null&&Y.set(ue,me)}return Y}function Ee(ne,pe,Ae,Te){var j=ne.length;Ae=Math.max(0,Ae==null?0:+Ae),Te=Math.min(j-1,Te==null?j-1:+Te);var Y=[];return pe.paragraphs.forEach(function(ue){var me=Math.max(Ae,ue.start),Ie=Math.min(Te,ue.end);if(me<Ie){for(var ze=pe.levels.slice(me,Ie+1),Se=Ie;Se>=me&&m(ne[Se])&h;Se--)ze[Se]=ue.level;for(var Je=ue.level,Ve=1/0,ot=0;ot<ze.length;ot++){var _e=ze[ot];_e>Je&&(Je=_e),_e<Ve&&(Ve=_e|1)}for(var Le=Je;Le>=Ve;Le--)for(var We=0;We<ze.length;We++)if(ze[We]>=Le){for(var F=We;We+1<ze.length&&ze[We+1]>=Le;)We++;We>F&&Y.push([F+Ae,We+Ae])}}}),Y}function Oe(ne,pe,Ae,Te){var j=ae(ne,pe,Ae,Te),Y=[].concat(ne);return j.forEach(function(ue,me){Y[me]=(pe.levels[ue]&1?Ge(ne[ue]):null)||ne[ue]}),Y.join("")}function ae(ne,pe,Ae,Te){for(var j=Ee(ne,pe,Ae,Te),Y=[],ue=0;ue<ne.length;ue++)Y[ue]=ue;return j.forEach(function(me){for(var Ie=me[0],ze=me[1],Se=Y.slice(Ie,ze+1),Je=Se.length;Je--;)Y[ze-Je]=Se[Je]}),Y}return e.closingToOpeningBracket=A,e.getBidiCharType=m,e.getBidiCharTypeName=g,e.getCanonicalBracket=I,e.getEmbeddingLevels=Fe,e.getMirroredCharacter=Ge,e.getMirroredCharactersMap=W,e.getReorderSegments=Ee,e.getReorderedIndices=ae,e.getReorderedString=Oe,e.openingToClosingBracket=$,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const SJ=/\bvoid\s+main\s*\(\s*\)\s*{/g;function yL(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let o=Sn[r];return o?yL(o):i}return n.replace(e,t)}const Bs=[];for(let n=0;n<256;n++)Bs[n]=(n<16?"0":"")+n.toString(16);function dTe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Bs[n&255]+Bs[n>>8&255]+Bs[n>>16&255]+Bs[n>>24&255]+"-"+Bs[e&255]+Bs[e>>8&255]+"-"+Bs[e>>16&15|64]+Bs[e>>24&255]+"-"+Bs[t&63|128]+Bs[t>>8&255]+"-"+Bs[t>>16&255]+Bs[t>>24&255]+Bs[i&255]+Bs[i>>8&255]+Bs[i>>16&255]+Bs[i>>24&255]).toUpperCase()}const qp=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)i.hasOwnProperty(r)&&(n[r]=i[r])}return n},fTe=Date.now(),nV=new WeakMap,iV=new Map;let pTe=1e10;function bL(n,e){const t=OTe(e);let i=nV.get(n);if(i||nV.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,o=function(h){n.onBeforeCompile.call(this,h);const d=this.customProgramCacheKey()+"|"+h.vertexShader+"|"+h.fragmentShader;let p=iV[d];if(!p){const m=mTe(h,e,t);p=iV[d]=m}h.vertexShader=p.vertexShader,h.fragmentShader=p.fragmentShader,qp(h.uniforms,this.uniforms),e.timeUniform&&(h.uniforms[e.timeUniform]={get value(){return Date.now()-fTe}}),this[r]&&this[r](h)},a=function(){return l(e.chained?n:n.clone())},l=function(h){const d=Object.create(h,u);return Object.defineProperty(d,"baseMaterial",{value:n}),Object.defineProperty(d,"id",{value:pTe++}),d.uuid=dTe(),d.uniforms=qp({},h.uniforms,e.uniforms),d.defines=qp({},h.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",d.extensions=qp({},h.extensions,e.extensions),d._listeners=void 0,d},u={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(h){this[r]=h}},copy:{writable:!0,configurable:!0,value:function(h){return n.copy.call(this,h),!n.isShaderMaterial&&!n.isDerivedMaterial&&(qp(this.extensions,h.extensions),qp(this.defines,h.defines),qp(this.uniforms,pg.clone(h.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const h=new n.constructor;return l(h).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let h=this._depthMaterial;return h||(h=this._depthMaterial=bL(n.isDerivedMaterial?n.getDepthMaterial():new $A({depthPacking:QB}),e),h.defines.IS_DEPTH_MATERIAL="",h.uniforms=this.uniforms),h}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let h=this._distanceMaterial;return h||(h=this._distanceMaterial=bL(n.isDerivedMaterial?n.getDistanceMaterial():new CA,e),h.defines.IS_DISTANCE_MATERIAL="",h.uniforms=this.uniforms),h}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:h,_distanceMaterial:d}=this;h&&h.dispose(),d&&d.dispose(),n.dispose.call(this)}}};return i[t]=a,new a}function mTe({vertexShader:n,fragmentShader:e},t,i){let{vertexDefs:r,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:m,timeUniform:g}=t;if(r=r||"",o=o||"",a=a||"",u=u||"",h=h||"",d=d||"",(l||m)&&(n=yL(n)),(p||m)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=yL(e)),m){let v=m({vertexShader:n,fragmentShader:e});n=v.vertexShader,e=v.fragmentShader}if(p){let v=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(v.push(y),"")),d=`${p}
${v.join(`
`)}
${d}`}if(g){const v=`
uniform float ${g};
`;r=v+r,u=v+u}return l&&(n=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${n}
`,r=`${r}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(v,y,S,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,S))?y:`troika_${y}_${i}`)),n=rV(n,i,r,o,a),e=rV(e,i,u,h,d),{vertexShader:n,fragmentShader:e}}function rV(n,e,t,i,r){return(i||r||t)&&(n=n.replace(SJ,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function gTe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let _Te=0;const sV=new Map;function OTe(n){const e=JSON.stringify(n,gTe);let t=sV.get(e);return t==null&&sV.set(e,t=++_Te),t}function vTe(n,e,t){const{defaultFontURL:i}=t,r=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,l="[^\\S\\u00A0]",u=new RegExp(`${l}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function h(w,E){function $(){const A=I=>{console.error(`Failure loading font ${w}${w===i?"":"; trying fallback"}`,I),w!==i&&(w=i,$())};try{const I=new XMLHttpRequest;I.open("get",w,!0),I.responseType="arraybuffer",I.onload=function(){if(I.status>=400)A(new Error(I.statusText));else if(I.status>0)try{const D=n(I.response);E(D)}catch(D){A(D)}},I.onerror=A,I.send()}catch(I){A(I)}}$()}function d(w,E){w||(w=i);let $=r[w];$?$.pending?$.pending.push(E):E($):(r[w]={pending:[E]},h(w,A=>{let I=r[w].pending;r[w]=A,I.forEach(D=>D(A))}))}function p({text:w="",font:E=i,sdfGlyphSize:$=64,fontSize:A=1,letterSpacing:I=0,lineHeight:D="normal",maxWidth:R=o,direction:B,textAlign:G="left",textIndent:Z=0,whiteSpace:N="normal",overflowWrap:H="normal",anchorX:M=0,anchorY:K=0,includeCaretPositions:re=!1,chunkedBoundsSize:ce=8192,colorRanges:X=null},Q,ee=!1){const z=y(),L={fontLoad:0,typesetting:0};w.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),w=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,I=+I,R=+R,D=D||"normal",Z=+Z,d(E,le=>{const de=isFinite(R);let ie=null,Ce=null,ye=null,xe=null,Fe=null,Xe=null,Ue=null,we=0,Ge=0,W=N!=="nowrap";const{ascender:Ee,descender:Oe,unitsPerEm:ae,lineGap:ne,capHeight:pe,xHeight:Ae}=le;L.fontLoad=y()-z;const Te=y(),j=A/ae;D==="normal"&&(D=(Ee-Oe+ne)/ae),D=D*A;const Y=(D-(Ee-Oe)*j)/2,ue=-(Ee*j+Y),me=Math.min(D,(Ee-Oe)*j),Ie=(Ee+Oe)/2*j-me/2;let ze=Z,Se=new S;const Je=[Se];le.forEachGlyph(w,A,I,(_e,Le,We)=>{const F=w.charAt(We),te=_e.advanceWidth*j,ge=Se.count;let Me;if("isEmpty"in _e||(_e.isWhitespace=!!F&&new RegExp(l).test(F),_e.canBreakAfter=!!F&&u.test(F),_e.isEmpty=_e.xMin===_e.xMax||_e.yMin===_e.yMax||a.test(F)),!_e.isWhitespace&&!_e.isEmpty&&Ge++,W&&de&&!_e.isWhitespace&&Le+te+ze>R&&ge){if(Se.glyphAt(ge-1).glyphObj.canBreakAfter)Me=new S,ze=-Le;else for(let Pe=ge;Pe--;)if(Pe===0&&H==="break-word"){Me=new S,ze=-Le;break}else if(Se.glyphAt(Pe).glyphObj.canBreakAfter){Me=Se.splitAt(Pe+1);const et=Me.glyphAt(0).x;ze-=et;for(let mt=Me.count;mt--;)Me.glyphAt(mt).x-=et;break}Me&&(Se.isSoftWrapped=!0,Se=Me,Je.push(Se),we=R)}let oe=Se.glyphAt(Se.count);oe.glyphObj=_e,oe.x=Le+ze,oe.width=te,oe.charIndex=We,F===`
`&&(Se=new S,Je.push(Se),ze=-(Le+te+I*A)+Z)}),Je.forEach(_e=>{for(let Le=_e.count;Le--;){let{glyphObj:We,x:F,width:te}=_e.glyphAt(Le);if(!We.isWhitespace){_e.width=F+te,_e.width>we&&(we=_e.width);return}}});let Ve=0,ot=0;if(M&&(typeof M=="number"?Ve=-M:typeof M=="string"&&(Ve=-we*(M==="left"?0:M==="center"?.5:M==="right"?1:g(M)))),K){if(typeof K=="number")ot=-K;else if(typeof K=="string"){let _e=Je.length*D;ot=K==="top"?0:K==="top-baseline"?-ue:K==="top-cap"?-ue-pe*j:K==="top-ex"?-ue-Ae*j:K==="middle"?_e/2:K==="bottom"?_e:K==="bottom-baseline"?_e-Y+Oe*j:g(K)*_e}}if(!ee){const _e=e.getEmbeddingLevels(w,B);ie=new Uint16Array(Ge),Ce=new Float32Array(Ge*2),ye={},Xe=[o,o,-o,-o],Ue=[];let Le=ue;re&&(Fe=new Float32Array(w.length*3)),X&&(xe=new Uint8Array(Ge*3));let We=0,F=-1,te=-1,ge,Me;if(Je.forEach((oe,Pe)=>{let{count:et,width:mt}=oe;if(et>0){let bt=0;for(let on=et;on--&&oe.glyphAt(on).glyphObj.isWhitespace;)bt++;let Tn=0,wn=0;if(G==="center")Tn=(we-mt)/2;else if(G==="right")Tn=we-mt;else if(G==="justify"&&oe.isSoftWrapped){let on=0;for(let xn=et-bt;xn--;)oe.glyphAt(xn).glyphObj.isWhitespace&&on++;wn=(we-mt)/on}if(wn||Tn){let on=0;for(let xn=0;xn<et;xn++){let Ss=oe.glyphAt(xn);const Bt=Ss.glyphObj;Ss.x+=Tn+on,wn!==0&&Bt.isWhitespace&&xn<et-bt&&(on+=wn,Ss.width+=wn)}}const Gn=e.getReorderSegments(w,_e,oe.glyphAt(0).charIndex,oe.glyphAt(oe.count-1).charIndex);for(let on=0;on<Gn.length;on++){const[xn,Ss]=Gn[on];let Bt=1/0,zn=-1/0;for(let fe=0;fe<et;fe++)if(oe.glyphAt(fe).charIndex>=xn){let Qe=fe,Ye=fe;for(;Ye<et;Ye++){let Ne=oe.glyphAt(Ye);if(Ne.charIndex>Ss)break;Ye<et-bt&&(Bt=Math.min(Bt,Ne.x),zn=Math.max(zn,Ne.x+Ne.width))}for(let Ne=Qe;Ne<Ye;Ne++){const qe=oe.glyphAt(Ne);qe.x=zn-(qe.x+qe.width-Bt)}break}}let vn;const Wn=on=>vn=on;for(let on=0;on<et;on++){let xn=oe.glyphAt(on);vn=xn.glyphObj;const Ss=vn.index,Bt=_e.levels[xn.charIndex]&1;if(Bt){const zn=e.getMirroredCharacter(w[xn.charIndex]);zn&&le.forEachGlyph(zn,0,0,Wn)}if(re){const{charIndex:zn}=xn,fe=xn.x+Ve,Qe=xn.x+xn.width+Ve;Fe[zn*3]=Bt?Qe:fe,Fe[zn*3+1]=Bt?fe:Qe,Fe[zn*3+2]=Le+Ie+ot;const Ye=zn-F;Ye>1&&v(Fe,F,Ye),F=zn}if(X){const{charIndex:zn}=xn;for(;zn>te;)te++,X.hasOwnProperty(te)&&(Me=X[te])}if(!vn.isWhitespace&&!vn.isEmpty){const zn=We++;ye[Ss]||(ye[Ss]={path:vn.path,pathBounds:[vn.xMin,vn.yMin,vn.xMax,vn.yMax]});const fe=xn.x+Ve,Qe=Le+ot;Ce[zn*2]=fe,Ce[zn*2+1]=Qe;const Ye=fe+vn.xMin*j,Ne=Qe+vn.yMin*j,qe=fe+vn.xMax*j,Pt=Qe+vn.yMax*j;Ye<Xe[0]&&(Xe[0]=Ye),Ne<Xe[1]&&(Xe[1]=Ne),qe>Xe[2]&&(Xe[2]=qe),Pt>Xe[3]&&(Xe[3]=Pt),zn%ce===0&&(ge={start:zn,end:zn,rect:[o,o,-o,-o]},Ue.push(ge)),ge.end++;const At=ge.rect;if(Ye<At[0]&&(At[0]=Ye),Ne<At[1]&&(At[1]=Ne),qe>At[2]&&(At[2]=qe),Pt>At[3]&&(At[3]=Pt),ie[zn]=Ss,X){const Zt=zn*3;xe[Zt]=Me>>16&255,xe[Zt+1]=Me>>8&255,xe[Zt+2]=Me&255}}}}Le-=D}),Fe){const oe=w.length-F;oe>1&&v(Fe,F,oe)}}L.typesetting=y()-Te,Q({glyphIds:ie,glyphPositions:Ce,glyphData:ye,caretPositions:Fe,caretHeight:me,glyphColors:xe,chunkedBounds:Ue,fontSize:A,unitsPerEm:ae,ascender:Ee*j,descender:Oe*j,capHeight:pe*j,xHeight:Ae*j,lineHeight:D,topBaseline:ue,blockBounds:[Ve,ot-Je.length*D,Ve+we,ot],visibleBounds:Xe,timings:L})})}function m(w,E){p(w,$=>{const[A,I,D,R]=$.blockBounds;E({width:D-A,height:R-I})},{metricsOnly:!0})}function g(w){let E=w.match(/^([\d.]+)%$/),$=E?parseFloat(E[1]):NaN;return isNaN($)?0:$/100}function v(w,E,$){const A=w[E*3],I=w[E*3+1],D=w[E*3+2],R=(I-A)/$;for(let B=0;B<$;B++){const G=(E+B)*3;w[G]=A+R*B,w[G+1]=A+R*(B+1),w[G+2]=D}}function y(){return(self.performance||Date).now()}function S(){this.data=[]}const T=["glyphObj","x","width","charIndex"];return S.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/T.length)},glyphAt(w){let E=S.flyweight;return E.data=this.data,E.index=w,E},splitAt(w){let E=new S;return E.data=this.data.splice(w*T.length),E}},S.flyweight=T.reduce((w,E,$,A)=>(Object.defineProperty(w,E,{get(){return this.data[this.index*T.length+$]},set(I){this.data[this.index*T.length+$]=I}}),w),{data:null,index:0}),{typeset:p,measure:m,loadFont:d}}const Um=()=>(self.performance||Date).now(),qA=bJ();let oV;function yTe(n,e,t,i,r,o,a,l,u,h,d=!0){return d?STe(n,e,t,i,r,o,a,l,u,h).then(null,p=>(oV||(console.warn("WebGL SDF generation failed, falling back to JS",p),oV=!0),lV(n,e,t,i,r,o,a,l,u,h))):lV(n,e,t,i,r,o,a,l,u,h)}const i$=[],bTe=5;let SL=0;function TJ(){const n=Um();for(;i$.length&&Um()-n<bTe;)i$.shift()();SL=i$.length?setTimeout(TJ,0):0}const STe=(...n)=>new Promise((e,t)=>{i$.push(()=>{const i=Um();try{qA.webgl.generateIntoCanvas(...n),e({timing:Um()-i})}catch(r){t(r)}}),SL||(SL=setTimeout(TJ,0))}),TTe=4,wTe=2e3,aV={};let ETe=0;function lV(n,e,t,i,r,o,a,l,u,h){const d="TroikaTextSDFGenerator_JS_"+ETe++%TTe;let p=aV[d];return p||(p=aV[d]={workerModule:HT({name:d,workerId:d,dependencies:[bJ,Um],init(m,g){const v=m().javascript.generate;return function(...y){const S=g();return{textureData:v(...y),timing:g()-S}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(n,e,t,i,r,o).then(({textureData:m,timing:g})=>{const v=Um(),y=new Uint8Array(m.length*4);for(let S=0;S<m.length;S++)y[S*4+h]=m[S];return qA.webglUtils.renderImageData(a,y,l,u,n,e,1<<3-h),g+=Um()-v,--p.requests===0&&(p.idleTimer=setTimeout(()=>{cTe(d)},wTe)),{timing:g}})}function xTe(n){n._warm||(qA.webgl.isSupported(n),n._warm=!0)}const $Te=qA.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function CTe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var o=e._bin,a=new Uint8Array(r);if(o.readASCII(a,0,4)=="ttcf"){var l=4;o.readUshort(a,l),l+=2,o.readUshort(a,l),l+=2;var u=o.readUint(a,l);l+=4;for(var h=[],d=0;d<u;d++){var p=o.readUint(a,l);l+=4,h.push(e._readFont(a,p))}return h}return[e._readFont(a,0)]},_readFont:function(r,o){var a=e._bin,l=o;a.readFixed(r,o),o+=4;var u=a.readUshort(r,o);o+=2,a.readUshort(r,o),o+=2,a.readUshort(r,o),o+=2,a.readUshort(r,o),o+=2;for(var h=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],d={_data:r,_offset:l},p={},m=0;m<u;m++){var g=a.readASCII(r,o,4);o+=4,a.readUint(r,o),o+=4;var v=a.readUint(r,o);o+=4;var y=a.readUint(r,o);o+=4,p[g]={offset:v,length:y}}for(m=0;m<h.length;m++){var S=h[m];p[S]&&(d[S.trim()]=e[S.trim()].parse(r,p[S].offset,p[S].length,d))}return d},_tabOffset:function(r,o,a){for(var l=e._bin,u=l.readUshort(r,a+4),h=a+12,d=0;d<u;d++){var p=l.readASCII(r,h,4);h+=4,l.readUint(r,h),h+=4;var m=l.readUint(r,h);if(h+=4,l.readUint(r,h),h+=4,p==o)return m}return 0}};e._bin={readFixed:function(r,o){return(r[o]<<8|r[o+1])+(r[o+2]<<8|r[o+3])/65540},readF2dot14:function(r,o){return e._bin.readShort(r,o)/16384},readInt:function(r,o){return e._bin._view(r).getInt32(o)},readInt8:function(r,o){return e._bin._view(r).getInt8(o)},readShort:function(r,o){return e._bin._view(r).getInt16(o)},readUshort:function(r,o){return e._bin._view(r).getUint16(o)},readUshorts:function(r,o,a){for(var l=[],u=0;u<a;u++)l.push(e._bin.readUshort(r,o+2*u));return l},readUint:function(r,o){return e._bin._view(r).getUint32(o)},readUint64:function(r,o){return 4294967296*e._bin.readUint(r,o)+e._bin.readUint(r,o+4)},readASCII:function(r,o,a){for(var l="",u=0;u<a;u++)l+=String.fromCharCode(r[o+u]);return l},readUnicode:function(r,o,a){for(var l="",u=0;u<a;u++){var h=r[o++]<<8|r[o++];l+=String.fromCharCode(h)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,o,a){var l=e._bin._tdec;return l&&o==0&&a==r.length?l.decode(r):e._bin.readASCII(r,o,a)},readBytes:function(r,o,a){for(var l=[],u=0;u<a;u++)l.push(r[o+u]);return l},readASCIIArray:function(r,o,a){for(var l=[],u=0;u<a;u++)l.push(String.fromCharCode(r[o+u]));return l},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,o,a,l,u){var h=e._bin,d={},p=o;h.readFixed(r,o),o+=4;var m=h.readUshort(r,o);o+=2;var g=h.readUshort(r,o);o+=2;var v=h.readUshort(r,o);return o+=2,d.scriptList=e._lctf.readScriptList(r,p+m),d.featureList=e._lctf.readFeatureList(r,p+g),d.lookupList=e._lctf.readLookupList(r,p+v,u),d},e._lctf.readLookupList=function(r,o,a){var l=e._bin,u=o,h=[],d=l.readUshort(r,o);o+=2;for(var p=0;p<d;p++){var m=l.readUshort(r,o);o+=2;var g=e._lctf.readLookupTable(r,u+m,a);h.push(g)}return h},e._lctf.readLookupTable=function(r,o,a){var l=e._bin,u=o,h={tabs:[]};h.ltype=l.readUshort(r,o),o+=2,h.flag=l.readUshort(r,o),o+=2;var d=l.readUshort(r,o);o+=2;for(var p=h.ltype,m=0;m<d;m++){var g=l.readUshort(r,o);o+=2;var v=a(r,p,u+g,h);h.tabs.push(v)}return h},e._lctf.numOfOnes=function(r){for(var o=0,a=0;a<32;a++)r>>>a&1&&o++;return o},e._lctf.readClassDef=function(r,o){var a=e._bin,l=[],u=a.readUshort(r,o);if(o+=2,u==1){var h=a.readUshort(r,o);o+=2;var d=a.readUshort(r,o);o+=2;for(var p=0;p<d;p++)l.push(h+p),l.push(h+p),l.push(a.readUshort(r,o)),o+=2}if(u==2){var m=a.readUshort(r,o);for(o+=2,p=0;p<m;p++)l.push(a.readUshort(r,o)),o+=2,l.push(a.readUshort(r,o)),o+=2,l.push(a.readUshort(r,o)),o+=2}return l},e._lctf.getInterval=function(r,o){for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1];if(r[a+2],l<=o&&o<=u)return a}return-1},e._lctf.readCoverage=function(r,o){var a=e._bin,l={};l.fmt=a.readUshort(r,o),o+=2;var u=a.readUshort(r,o);return o+=2,l.fmt==1&&(l.tab=a.readUshorts(r,o,u)),l.fmt==2&&(l.tab=a.readUshorts(r,o,3*u)),l},e._lctf.coverageIndex=function(r,o){var a=r.tab;if(r.fmt==1)return a.indexOf(o);if(r.fmt==2){var l=e._lctf.getInterval(a,o);if(l!=-1)return a[l+2]+(o-a[l])}return-1},e._lctf.readFeatureList=function(r,o){var a=e._bin,l=o,u=[],h=a.readUshort(r,o);o+=2;for(var d=0;d<h;d++){var p=a.readASCII(r,o,4);o+=4;var m=a.readUshort(r,o);o+=2;var g=e._lctf.readFeatureTable(r,l+m);g.tag=p.trim(),u.push(g)}return u},e._lctf.readFeatureTable=function(r,o){var a=e._bin,l=o,u={},h=a.readUshort(r,o);o+=2,h>0&&(u.featureParams=l+h);var d=a.readUshort(r,o);o+=2,u.tab=[];for(var p=0;p<d;p++)u.tab.push(a.readUshort(r,o+2*p));return u},e._lctf.readScriptList=function(r,o){var a=e._bin,l=o,u={},h=a.readUshort(r,o);o+=2;for(var d=0;d<h;d++){var p=a.readASCII(r,o,4);o+=4;var m=a.readUshort(r,o);o+=2,u[p.trim()]=e._lctf.readScriptTable(r,l+m)}return u},e._lctf.readScriptTable=function(r,o){var a=e._bin,l=o,u={},h=a.readUshort(r,o);o+=2,u.default=e._lctf.readLangSysTable(r,l+h);var d=a.readUshort(r,o);o+=2;for(var p=0;p<d;p++){var m=a.readASCII(r,o,4);o+=4;var g=a.readUshort(r,o);o+=2,u[m.trim()]=e._lctf.readLangSysTable(r,l+g)}return u},e._lctf.readLangSysTable=function(r,o){var a=e._bin,l={};a.readUshort(r,o),o+=2,l.reqFeature=a.readUshort(r,o),o+=2;var u=a.readUshort(r,o);return o+=2,l.features=a.readUshorts(r,o,u),l},e.CFF={},e.CFF.parse=function(r,o,a){var l=e._bin;(r=new Uint8Array(r.buffer,o,a))[o=0],r[++o],r[++o],r[++o],o++;var u=[];o=e.CFF.readIndex(r,o,u);for(var h=[],d=0;d<u.length-1;d++)h.push(l.readASCII(r,o+u[d],u[d+1]-u[d]));o+=u[u.length-1];var p=[];o=e.CFF.readIndex(r,o,p);var m=[];for(d=0;d<p.length-1;d++)m.push(e.CFF.readDict(r,o+p[d],o+p[d+1]));o+=p[p.length-1];var g=m[0],v=[];o=e.CFF.readIndex(r,o,v);var y=[];for(d=0;d<v.length-1;d++)y.push(l.readASCII(r,o+v[d],v[d+1]-v[d]));if(o+=v[v.length-1],e.CFF.readSubrs(r,o,g),g.CharStrings){o=g.CharStrings,v=[],o=e.CFF.readIndex(r,o,v);var S=[];for(d=0;d<v.length-1;d++)S.push(l.readBytes(r,o+v[d],v[d+1]-v[d]));g.CharStrings=S}if(g.ROS){o=g.FDArray;var T=[];for(o=e.CFF.readIndex(r,o,T),g.FDArray=[],d=0;d<T.length-1;d++){var w=e.CFF.readDict(r,o+T[d],o+T[d+1]);e.CFF._readFDict(r,w,y),g.FDArray.push(w)}o+=T[T.length-1],o=g.FDSelect,g.FDSelect=[];var E=r[o];if(o++,E!=3)throw E;var $=l.readUshort(r,o);for(o+=2,d=0;d<$+1;d++)g.FDSelect.push(l.readUshort(r,o),r[o+2]),o+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(r,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(r,g.charset,g.CharStrings.length)),e.CFF._readFDict(r,g,y),g},e.CFF._readFDict=function(r,o,a){var l;for(var u in o.Private&&(l=o.Private[1],o.Private=e.CFF.readDict(r,l,l+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(r,l+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(o[u]=a[o[u]-426+35])},e.CFF.readSubrs=function(r,o,a){var l=e._bin,u=[];o=e.CFF.readIndex(r,o,u);var h,d=u.length;h=d<1240?107:d<33900?1131:32768,a.Bias=h,a.Subrs=[];for(var p=0;p<u.length-1;p++)a.Subrs.push(l.readBytes(r,o+u[p],u[p+1]-u[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,o){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==o)return a;return-1},e.CFF.glyphBySE=function(r,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[o])},e.CFF.readEncoding=function(r,o,a){e._bin;var l=[".notdef"],u=r[o];if(o++,u!=0)throw"error: unknown encoding format: "+u;var h=r[o];o++;for(var d=0;d<h;d++)l.push(r[o+d]);return l},e.CFF.readCharset=function(r,o,a){var l=e._bin,u=[".notdef"],h=r[o];if(o++,h==0)for(var d=0;d<a;d++){var p=l.readUshort(r,o);o+=2,u.push(p)}else{if(h!=1&&h!=2)throw"error: format: "+h;for(;u.length<a;){p=l.readUshort(r,o),o+=2;var m=0;for(h==1?(m=r[o],o++):(m=l.readUshort(r,o),o+=2),d=0;d<=m;d++)u.push(p),p++}}return u},e.CFF.readIndex=function(r,o,a){var l=e._bin,u=l.readUshort(r,o)+1,h=r[o+=2];if(o++,h==1)for(var d=0;d<u;d++)a.push(r[o+d]);else if(h==2)for(d=0;d<u;d++)a.push(l.readUshort(r,o+2*d));else if(h==3)for(d=0;d<u;d++)a.push(16777215&l.readUint(r,o+3*d-1));else if(u!=1)throw"unsupported offset size: "+h+", count: "+u;return(o+=u*h)-1},e.CFF.getCharString=function(r,o,a){var l=e._bin,u=r[o],h=r[o+1];r[o+2],r[o+3],r[o+4];var d=1,p=null,m=null;u<=20&&(p=u,d=1),u==12&&(p=100*u+h,d=2),21<=u&&u<=27&&(p=u,d=1),u==28&&(m=l.readShort(r,o+1),d=3),29<=u&&u<=31&&(p=u,d=1),32<=u&&u<=246&&(m=u-139,d=1),247<=u&&u<=250&&(m=256*(u-247)+h+108,d=2),251<=u&&u<=254&&(m=256*-(u-251)-h-108,d=2),u==255&&(m=l.readInt(r,o+1)/65535,d=5),a.val=m??"o"+p,a.size=d},e.CFF.readCharString=function(r,o,a){for(var l=o+a,u=e._bin,h=[];o<l;){var d=r[o],p=r[o+1];r[o+2],r[o+3],r[o+4];var m=1,g=null,v=null;d<=20&&(g=d,m=1),d==12&&(g=100*d+p,m=2),d!=19&&d!=20||(g=d,m=2),21<=d&&d<=27&&(g=d,m=1),d==28&&(v=u.readShort(r,o+1),m=3),29<=d&&d<=31&&(g=d,m=1),32<=d&&d<=246&&(v=d-139,m=1),247<=d&&d<=250&&(v=256*(d-247)+p+108,m=2),251<=d&&d<=254&&(v=256*-(d-251)-p-108,m=2),d==255&&(v=u.readInt(r,o+1)/65535,m=5),h.push(v??"o"+g),o+=m}return h},e.CFF.readDict=function(r,o,a){for(var l=e._bin,u={},h=[];o<a;){var d=r[o],p=r[o+1];r[o+2],r[o+3],r[o+4];var m=1,g=null,v=null;if(d==28&&(v=l.readShort(r,o+1),m=3),d==29&&(v=l.readInt(r,o+1),m=5),32<=d&&d<=246&&(v=d-139,m=1),247<=d&&d<=250&&(v=256*(d-247)+p+108,m=2),251<=d&&d<=254&&(v=256*-(d-251)-p-108,m=2),d==255)throw v=l.readInt(r,o+1)/65535,m=5,"unknown number";if(d==30){var y=[];for(m=1;;){var S=r[o+m];m++;var T=S>>4,w=15&S;if(T!=15&&y.push(T),w!=15&&y.push(w),w==15)break}for(var E="",$=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],A=0;A<y.length;A++)E+=$[y[A]];v=parseFloat(E)}d<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],m=1,d==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],m=2)),g!=null?(u[g]=h.length==1?h[0]:h,h=[]):h.push(v),o+=m}return u},e.cmap={},e.cmap.parse=function(r,o,a){r=new Uint8Array(r.buffer,o,a),o=0;var l=e._bin,u={};l.readUshort(r,o),o+=2;var h=l.readUshort(r,o);o+=2;var d=[];u.tables=[];for(var p=0;p<h;p++){var m=l.readUshort(r,o);o+=2;var g=l.readUshort(r,o);o+=2;var v=l.readUint(r,o);o+=4;var y="p"+m+"e"+g,S=d.indexOf(v);if(S==-1){var T;S=u.tables.length,d.push(v);var w=l.readUshort(r,v);w==0?T=e.cmap.parse0(r,v):w==4?T=e.cmap.parse4(r,v):w==6?T=e.cmap.parse6(r,v):w==12?T=e.cmap.parse12(r,v):console.debug("unknown format: "+w,m,g,v),u.tables.push(T)}if(u[y]!=null)throw"multiple tables for one platform+encoding";u[y]=S}return u},e.cmap.parse0=function(r,o){var a=e._bin,l={};l.format=a.readUshort(r,o),o+=2;var u=a.readUshort(r,o);o+=2,a.readUshort(r,o),o+=2,l.map=[];for(var h=0;h<u-6;h++)l.map.push(r[o+h]);return l},e.cmap.parse4=function(r,o){var a=e._bin,l=o,u={};u.format=a.readUshort(r,o),o+=2;var h=a.readUshort(r,o);o+=2,a.readUshort(r,o),o+=2;var d=a.readUshort(r,o);o+=2;var p=d/2;u.searchRange=a.readUshort(r,o),o+=2,u.entrySelector=a.readUshort(r,o),o+=2,u.rangeShift=a.readUshort(r,o),o+=2,u.endCount=a.readUshorts(r,o,p),o+=2*p,o+=2,u.startCount=a.readUshorts(r,o,p),o+=2*p,u.idDelta=[];for(var m=0;m<p;m++)u.idDelta.push(a.readShort(r,o)),o+=2;for(u.idRangeOffset=a.readUshorts(r,o,p),o+=2*p,u.glyphIdArray=[];o<l+h;)u.glyphIdArray.push(a.readUshort(r,o)),o+=2;return u},e.cmap.parse6=function(r,o){var a=e._bin,l={};l.format=a.readUshort(r,o),o+=2,a.readUshort(r,o),o+=2,a.readUshort(r,o),o+=2,l.firstCode=a.readUshort(r,o),o+=2;var u=a.readUshort(r,o);o+=2,l.glyphIdArray=[];for(var h=0;h<u;h++)l.glyphIdArray.push(a.readUshort(r,o)),o+=2;return l},e.cmap.parse12=function(r,o){var a=e._bin,l={};l.format=a.readUshort(r,o),o+=2,o+=2,a.readUint(r,o),o+=4,a.readUint(r,o),o+=4;var u=a.readUint(r,o);o+=4,l.groups=[];for(var h=0;h<u;h++){var d=o+12*h,p=a.readUint(r,d+0),m=a.readUint(r,d+4),g=a.readUint(r,d+8);l.groups.push([p,m,g])}return l},e.glyf={},e.glyf.parse=function(r,o,a,l){for(var u=[],h=0;h<l.maxp.numGlyphs;h++)u.push(null);return u},e.glyf._parseGlyf=function(r,o){var a=e._bin,l=r._data,u=e._tabOffset(l,"glyf",r._offset)+r.loca[o];if(r.loca[o]==r.loca[o+1])return null;var h={};if(h.noc=a.readShort(l,u),u+=2,h.xMin=a.readShort(l,u),u+=2,h.yMin=a.readShort(l,u),u+=2,h.xMax=a.readShort(l,u),u+=2,h.yMax=a.readShort(l,u),u+=2,h.xMin>=h.xMax||h.yMin>=h.yMax)return null;if(h.noc>0){h.endPts=[];for(var d=0;d<h.noc;d++)h.endPts.push(a.readUshort(l,u)),u+=2;var p=a.readUshort(l,u);if(u+=2,l.length-u<p)return null;h.instructions=a.readBytes(l,u,p),u+=p;var m=h.endPts[h.noc-1]+1;for(h.flags=[],d=0;d<m;d++){var g=l[u];if(u++,h.flags.push(g),(8&g)!=0){var v=l[u];u++;for(var y=0;y<v;y++)h.flags.push(g),d++}}for(h.xs=[],d=0;d<m;d++){var S=(2&h.flags[d])!=0,T=(16&h.flags[d])!=0;S?(h.xs.push(T?l[u]:-l[u]),u++):T?h.xs.push(0):(h.xs.push(a.readShort(l,u)),u+=2)}for(h.ys=[],d=0;d<m;d++)S=(4&h.flags[d])!=0,T=(32&h.flags[d])!=0,S?(h.ys.push(T?l[u]:-l[u]),u++):T?h.ys.push(0):(h.ys.push(a.readShort(l,u)),u+=2);var w=0,E=0;for(d=0;d<m;d++)w+=h.xs[d],E+=h.ys[d],h.xs[d]=w,h.ys[d]=E}else{var $;h.parts=[];do{$=a.readUshort(l,u),u+=2;var A={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(h.parts.push(A),A.glyphIndex=a.readUshort(l,u),u+=2,1&$){var I=a.readShort(l,u);u+=2;var D=a.readShort(l,u);u+=2}else I=a.readInt8(l,u),u++,D=a.readInt8(l,u),u++;2&$?(A.m.tx=I,A.m.ty=D):(A.p1=I,A.p2=D),8&$?(A.m.a=A.m.d=a.readF2dot14(l,u),u+=2):64&$?(A.m.a=a.readF2dot14(l,u),u+=2,A.m.d=a.readF2dot14(l,u),u+=2):128&$&&(A.m.a=a.readF2dot14(l,u),u+=2,A.m.b=a.readF2dot14(l,u),u+=2,A.m.c=a.readF2dot14(l,u),u+=2,A.m.d=a.readF2dot14(l,u),u+=2)}while(32&$);if(256&$){var R=a.readUshort(l,u);for(u+=2,h.instr=[],d=0;d<R;d++)h.instr.push(l[u]),u++}}return h},e.GPOS={},e.GPOS.parse=function(r,o,a,l){return e._lctf.parse(r,o,a,l,e.GPOS.subt)},e.GPOS.subt=function(r,o,a,l){var u=e._bin,h=a,d={};if(d.fmt=u.readUshort(r,a),a+=2,o==1||o==2||o==3||o==7||o==8&&d.fmt<=2){var p=u.readUshort(r,a);a+=2,d.coverage=e._lctf.readCoverage(r,p+h)}if(o==1&&d.fmt==1){var m=u.readUshort(r,a);a+=2;var g=e._lctf.numOfOnes(m);m!=0&&(d.pos=e.GPOS.readValueRecord(r,a,m))}else if(o==2&&d.fmt>=1&&d.fmt<=2){m=u.readUshort(r,a),a+=2;var v=u.readUshort(r,a);a+=2,g=e._lctf.numOfOnes(m);var y=e._lctf.numOfOnes(v);if(d.fmt==1){d.pairsets=[];var S=u.readUshort(r,a);a+=2;for(var T=0;T<S;T++){var w=h+u.readUshort(r,a);a+=2;var E=u.readUshort(r,w);w+=2;for(var $=[],A=0;A<E;A++){var I=u.readUshort(r,w);w+=2,m!=0&&(N=e.GPOS.readValueRecord(r,w,m),w+=2*g),v!=0&&(H=e.GPOS.readValueRecord(r,w,v),w+=2*y),$.push({gid2:I,val1:N,val2:H})}d.pairsets.push($)}}if(d.fmt==2){var D=u.readUshort(r,a);a+=2;var R=u.readUshort(r,a);a+=2;var B=u.readUshort(r,a);a+=2;var G=u.readUshort(r,a);for(a+=2,d.classDef1=e._lctf.readClassDef(r,h+D),d.classDef2=e._lctf.readClassDef(r,h+R),d.matrix=[],T=0;T<B;T++){var Z=[];for(A=0;A<G;A++){var N=null,H=null;m!=0&&(N=e.GPOS.readValueRecord(r,a,m),a+=2*g),v!=0&&(H=e.GPOS.readValueRecord(r,a,v),a+=2*y),Z.push({val1:N,val2:H})}d.matrix.push(Z)}}}else{if(o==9&&d.fmt==1){var M=u.readUshort(r,a);a+=2;var K=u.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=M;else if(l.ltype!=M)throw"invalid extension substitution";return e.GPOS.subt(r,l.ltype,h+K)}console.debug("unsupported GPOS table LookupType",o,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(r,o,a){var l=e._bin,u=[];return u.push(1&a?l.readShort(r,o):0),o+=1&a?2:0,u.push(2&a?l.readShort(r,o):0),o+=2&a?2:0,u.push(4&a?l.readShort(r,o):0),o+=4&a?2:0,u.push(8&a?l.readShort(r,o):0),o+=8&a?2:0,u},e.GSUB={},e.GSUB.parse=function(r,o,a,l){return e._lctf.parse(r,o,a,l,e.GSUB.subt)},e.GSUB.subt=function(r,o,a,l){var u=e._bin,h=a,d={};if(d.fmt=u.readUshort(r,a),a+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&d.fmt<=2||o==6&&d.fmt<=2){var p=u.readUshort(r,a);a+=2,d.coverage=e._lctf.readCoverage(r,h+p)}if(o==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=u.readShort(r,a),a+=2;else if(d.fmt==2){var m=u.readUshort(r,a);a+=2,d.newg=u.readUshorts(r,a,m),a+=2*d.newg.length}}else if(o==4){d.vals=[],m=u.readUshort(r,a),a+=2;for(var g=0;g<m;g++){var v=u.readUshort(r,a);a+=2,d.vals.push(e.GSUB.readLigatureSet(r,h+v))}}else if(o==5&&d.fmt==2){if(d.fmt==2){var y=u.readUshort(r,a);a+=2,d.cDef=e._lctf.readClassDef(r,h+y),d.scset=[];var S=u.readUshort(r,a);for(a+=2,g=0;g<S;g++){var T=u.readUshort(r,a);a+=2,d.scset.push(T==0?null:e.GSUB.readSubClassSet(r,h+T))}}}else if(o==6&&d.fmt==3){if(d.fmt==3){for(g=0;g<3;g++){m=u.readUshort(r,a),a+=2;for(var w=[],E=0;E<m;E++)w.push(e._lctf.readCoverage(r,h+u.readUshort(r,a+2*E)));a+=2*m,g==0&&(d.backCvg=w),g==1&&(d.inptCvg=w),g==2&&(d.ahedCvg=w)}m=u.readUshort(r,a),a+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(r,a,m)}}else{if(o==7&&d.fmt==1){var $=u.readUshort(r,a);a+=2;var A=u.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=$;else if(l.ltype!=$)throw"invalid extension substitution";return e.GSUB.subt(r,l.ltype,h+A)}console.debug("unsupported GSUB table LookupType",o,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(r,o){var a=e._bin.readUshort,l=o,u=[],h=a(r,o);o+=2;for(var d=0;d<h;d++){var p=a(r,o);o+=2,u.push(e.GSUB.readSubClassRule(r,l+p))}return u},e.GSUB.readSubClassRule=function(r,o){var a=e._bin.readUshort,l={},u=a(r,o),h=a(r,o+=2);o+=2,l.input=[];for(var d=0;d<u-1;d++)l.input.push(a(r,o)),o+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(r,o,h),l},e.GSUB.readSubstLookupRecords=function(r,o,a){for(var l=e._bin.readUshort,u=[],h=0;h<a;h++)u.push(l(r,o),l(r,o+2)),o+=4;return u},e.GSUB.readChainSubClassSet=function(r,o){var a=e._bin,l=o,u=[],h=a.readUshort(r,o);o+=2;for(var d=0;d<h;d++){var p=a.readUshort(r,o);o+=2,u.push(e.GSUB.readChainSubClassRule(r,l+p))}return u},e.GSUB.readChainSubClassRule=function(r,o){for(var a=e._bin,l={},u=["backtrack","input","lookahead"],h=0;h<u.length;h++){var d=a.readUshort(r,o);o+=2,h==1&&d--,l[u[h]]=a.readUshorts(r,o,d),o+=2*l[u[h]].length}return d=a.readUshort(r,o),o+=2,l.subst=a.readUshorts(r,o,2*d),o+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(r,o){var a=e._bin,l=o,u=[],h=a.readUshort(r,o);o+=2;for(var d=0;d<h;d++){var p=a.readUshort(r,o);o+=2,u.push(e.GSUB.readLigature(r,l+p))}return u},e.GSUB.readLigature=function(r,o){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(r,o),o+=2;var u=a.readUshort(r,o);o+=2;for(var h=0;h<u-1;h++)l.chain.push(a.readUshort(r,o)),o+=2;return l},e.head={},e.head.parse=function(r,o,a){var l=e._bin,u={};return l.readFixed(r,o),o+=4,u.fontRevision=l.readFixed(r,o),o+=4,l.readUint(r,o),o+=4,l.readUint(r,o),o+=4,u.flags=l.readUshort(r,o),o+=2,u.unitsPerEm=l.readUshort(r,o),o+=2,u.created=l.readUint64(r,o),o+=8,u.modified=l.readUint64(r,o),o+=8,u.xMin=l.readShort(r,o),o+=2,u.yMin=l.readShort(r,o),o+=2,u.xMax=l.readShort(r,o),o+=2,u.yMax=l.readShort(r,o),o+=2,u.macStyle=l.readUshort(r,o),o+=2,u.lowestRecPPEM=l.readUshort(r,o),o+=2,u.fontDirectionHint=l.readShort(r,o),o+=2,u.indexToLocFormat=l.readShort(r,o),o+=2,u.glyphDataFormat=l.readShort(r,o),o+=2,u},e.hhea={},e.hhea.parse=function(r,o,a){var l=e._bin,u={};return l.readFixed(r,o),o+=4,u.ascender=l.readShort(r,o),o+=2,u.descender=l.readShort(r,o),o+=2,u.lineGap=l.readShort(r,o),o+=2,u.advanceWidthMax=l.readUshort(r,o),o+=2,u.minLeftSideBearing=l.readShort(r,o),o+=2,u.minRightSideBearing=l.readShort(r,o),o+=2,u.xMaxExtent=l.readShort(r,o),o+=2,u.caretSlopeRise=l.readShort(r,o),o+=2,u.caretSlopeRun=l.readShort(r,o),o+=2,u.caretOffset=l.readShort(r,o),o+=2,o+=8,u.metricDataFormat=l.readShort(r,o),o+=2,u.numberOfHMetrics=l.readUshort(r,o),o+=2,u},e.hmtx={},e.hmtx.parse=function(r,o,a,l){for(var u=e._bin,h={aWidth:[],lsBearing:[]},d=0,p=0,m=0;m<l.maxp.numGlyphs;m++)m<l.hhea.numberOfHMetrics&&(d=u.readUshort(r,o),o+=2,p=u.readShort(r,o),o+=2),h.aWidth.push(d),h.lsBearing.push(p);return h},e.kern={},e.kern.parse=function(r,o,a,l){var u=e._bin,h=u.readUshort(r,o);if(o+=2,h==1)return e.kern.parseV1(r,o-2,a,l);var d=u.readUshort(r,o);o+=2;for(var p={glyph1:[],rval:[]},m=0;m<d;m++){o+=2,a=u.readUshort(r,o),o+=2;var g=u.readUshort(r,o);o+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;o=e.kern.readFormat0(r,o,p)}return p},e.kern.parseV1=function(r,o,a,l){var u=e._bin;u.readFixed(r,o),o+=4;var h=u.readUint(r,o);o+=4;for(var d={glyph1:[],rval:[]},p=0;p<h;p++){u.readUint(r,o),o+=4;var m=u.readUshort(r,o);o+=2,u.readUshort(r,o),o+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;o=e.kern.readFormat0(r,o,d)}return d},e.kern.readFormat0=function(r,o,a){var l=e._bin,u=-1,h=l.readUshort(r,o);o+=2,l.readUshort(r,o),o+=2,l.readUshort(r,o),o+=2,l.readUshort(r,o),o+=2;for(var d=0;d<h;d++){var p=l.readUshort(r,o);o+=2;var m=l.readUshort(r,o);o+=2;var g=l.readShort(r,o);o+=2,p!=u&&(a.glyph1.push(p),a.rval.push({glyph2:[],vals:[]}));var v=a.rval[a.rval.length-1];v.glyph2.push(m),v.vals.push(g),u=p}return o},e.loca={},e.loca.parse=function(r,o,a,l){var u=e._bin,h=[],d=l.head.indexToLocFormat,p=l.maxp.numGlyphs+1;if(d==0)for(var m=0;m<p;m++)h.push(u.readUshort(r,o+(m<<1))<<1);if(d==1)for(m=0;m<p;m++)h.push(u.readUint(r,o+(m<<2)));return h},e.maxp={},e.maxp.parse=function(r,o,a){var l=e._bin,u={},h=l.readUint(r,o);return o+=4,u.numGlyphs=l.readUshort(r,o),o+=2,h==65536&&(u.maxPoints=l.readUshort(r,o),o+=2,u.maxContours=l.readUshort(r,o),o+=2,u.maxCompositePoints=l.readUshort(r,o),o+=2,u.maxCompositeContours=l.readUshort(r,o),o+=2,u.maxZones=l.readUshort(r,o),o+=2,u.maxTwilightPoints=l.readUshort(r,o),o+=2,u.maxStorage=l.readUshort(r,o),o+=2,u.maxFunctionDefs=l.readUshort(r,o),o+=2,u.maxInstructionDefs=l.readUshort(r,o),o+=2,u.maxStackElements=l.readUshort(r,o),o+=2,u.maxSizeOfInstructions=l.readUshort(r,o),o+=2,u.maxComponentElements=l.readUshort(r,o),o+=2,u.maxComponentDepth=l.readUshort(r,o),o+=2),u},e.name={},e.name.parse=function(r,o,a){var l=e._bin,u={};l.readUshort(r,o),o+=2;var h=l.readUshort(r,o);o+=2,l.readUshort(r,o);for(var d,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=o+=2,g=0;g<h;g++){var v=l.readUshort(r,o);o+=2;var y=l.readUshort(r,o);o+=2;var S=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);o+=2;var w=l.readUshort(r,o);o+=2;var E=l.readUshort(r,o);o+=2;var $,A=p[T],I=m+12*h+E;if(v==0)$=l.readUnicode(r,I,w/2);else if(v==3&&y==0)$=l.readUnicode(r,I,w/2);else if(y==0)$=l.readASCII(r,I,w);else if(y==1)$=l.readUnicode(r,I,w/2);else if(y==3)$=l.readUnicode(r,I,w/2);else{if(v!=1)throw"unknown encoding "+y+", platformID: "+v;$=l.readASCII(r,I,w),console.debug("reading unknown MAC encoding "+y+" as ASCII")}var D="p"+v+","+S.toString(16);u[D]==null&&(u[D]={}),u[D][A!==void 0?A:T]=$,u[D]._lang=S}for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==1033)return u[R];for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==0)return u[R];for(var R in u)if(u[R].postScriptName!=null&&u[R]._lang==3084)return u[R];for(var R in u)if(u[R].postScriptName!=null)return u[R];for(var R in u){d=R;break}return console.debug("returning name table with languageID "+u[d]._lang),u[d]},e["OS/2"]={},e["OS/2"].parse=function(r,o,a){var l=e._bin.readUshort(r,o);o+=2;var u={};if(l==0)e["OS/2"].version0(r,o,u);else if(l==1)e["OS/2"].version1(r,o,u);else if(l==2||l==3||l==4)e["OS/2"].version2(r,o,u);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(r,o,u)}return u},e["OS/2"].version0=function(r,o,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(r,o),o+=2,a.usWeightClass=l.readUshort(r,o),o+=2,a.usWidthClass=l.readUshort(r,o),o+=2,a.fsType=l.readUshort(r,o),o+=2,a.ySubscriptXSize=l.readShort(r,o),o+=2,a.ySubscriptYSize=l.readShort(r,o),o+=2,a.ySubscriptXOffset=l.readShort(r,o),o+=2,a.ySubscriptYOffset=l.readShort(r,o),o+=2,a.ySuperscriptXSize=l.readShort(r,o),o+=2,a.ySuperscriptYSize=l.readShort(r,o),o+=2,a.ySuperscriptXOffset=l.readShort(r,o),o+=2,a.ySuperscriptYOffset=l.readShort(r,o),o+=2,a.yStrikeoutSize=l.readShort(r,o),o+=2,a.yStrikeoutPosition=l.readShort(r,o),o+=2,a.sFamilyClass=l.readShort(r,o),o+=2,a.panose=l.readBytes(r,o,10),o+=10,a.ulUnicodeRange1=l.readUint(r,o),o+=4,a.ulUnicodeRange2=l.readUint(r,o),o+=4,a.ulUnicodeRange3=l.readUint(r,o),o+=4,a.ulUnicodeRange4=l.readUint(r,o),o+=4,a.achVendID=[l.readInt8(r,o),l.readInt8(r,o+1),l.readInt8(r,o+2),l.readInt8(r,o+3)],o+=4,a.fsSelection=l.readUshort(r,o),o+=2,a.usFirstCharIndex=l.readUshort(r,o),o+=2,a.usLastCharIndex=l.readUshort(r,o),o+=2,a.sTypoAscender=l.readShort(r,o),o+=2,a.sTypoDescender=l.readShort(r,o),o+=2,a.sTypoLineGap=l.readShort(r,o),o+=2,a.usWinAscent=l.readUshort(r,o),o+=2,a.usWinDescent=l.readUshort(r,o),o+=2},e["OS/2"].version1=function(r,o,a){var l=e._bin;return o=e["OS/2"].version0(r,o,a),a.ulCodePageRange1=l.readUint(r,o),o+=4,a.ulCodePageRange2=l.readUint(r,o),o+=4},e["OS/2"].version2=function(r,o,a){var l=e._bin;return o=e["OS/2"].version1(r,o,a),a.sxHeight=l.readShort(r,o),o+=2,a.sCapHeight=l.readShort(r,o),o+=2,a.usDefault=l.readUshort(r,o),o+=2,a.usBreak=l.readUshort(r,o),o+=2,a.usMaxContext=l.readUshort(r,o),o+=2},e["OS/2"].version5=function(r,o,a){var l=e._bin;return o=e["OS/2"].version2(r,o,a),a.usLowerOpticalPointSize=l.readUshort(r,o),o+=2,a.usUpperOpticalPointSize=l.readUshort(r,o),o+=2},e.post={},e.post.parse=function(r,o,a){var l=e._bin,u={};return u.version=l.readFixed(r,o),o+=4,u.italicAngle=l.readFixed(r,o),o+=4,u.underlinePosition=l.readShort(r,o),o+=2,u.underlineThickness=l.readShort(r,o),o+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,o){var a=r.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var u=a.tables[l];if(u.format==0)return o>=u.map.length?0:u.map[o];if(u.format==4){for(var h=-1,d=0;d<u.endCount.length;d++)if(o<=u.endCount[d]){h=d;break}return h==-1||u.startCount[h]>o?0:65535&(u.idRangeOffset[h]!=0?u.glyphIdArray[o-u.startCount[h]+(u.idRangeOffset[h]>>1)-(u.idRangeOffset.length-h)]:o+u.idDelta[h])}if(u.format==12){if(o>u.groups[u.groups.length-1][1])return 0;for(d=0;d<u.groups.length;d++){var p=u.groups[d];if(p[0]<=o&&o<=p[1])return p[2]+(o-p[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(r,o){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[o]){var l=r.SVG.entries[o];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),r.SVG.entries[o]=l),l)}if(r.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},h=r.CFF,d=r.CFF.Private;if(h.ROS){for(var p=0;h.FDSelect[p+2]<=o;)p+=2;d=h.FDArray[h.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[o],u,h,d,a)}else r.glyf&&e.U._drawGlyf(o,r,a);return a},e.U._drawGlyf=function(r,o,a){var l=o.glyf[r];l==null&&(l=o.glyf[r]=e.glyf._parseGlyf(o,r)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,o,a))},e.U._simpleGlyph=function(r,o){for(var a=0;a<r.noc;a++){for(var l=a==0?0:r.endPts[a-1]+1,u=r.endPts[a],h=l;h<=u;h++){var d=h==l?u:h-1,p=h==u?l:h+1,m=1&r.flags[h],g=1&r.flags[d],v=1&r.flags[p],y=r.xs[h],S=r.ys[h];if(h==l)if(m){if(!g){e.U.P.moveTo(o,y,S);continue}e.U.P.moveTo(o,r.xs[d],r.ys[d])}else g?e.U.P.moveTo(o,r.xs[d],r.ys[d]):e.U.P.moveTo(o,(r.xs[d]+y)/2,(r.ys[d]+S)/2);m?g&&e.U.P.lineTo(o,y,S):v?e.U.P.qcurveTo(o,y,S,r.xs[p],r.ys[p]):e.U.P.qcurveTo(o,y,S,(y+r.xs[p])/2,(S+r.ys[p])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(r,o,a){for(var l=0;l<r.parts.length;l++){var u={cmds:[],crds:[]},h=r.parts[l];e.U._drawGlyf(h.glyphIndex,o,u);for(var d=h.m,p=0;p<u.crds.length;p+=2){var m=u.crds[p],g=u.crds[p+1];a.crds.push(m*d.a+g*d.b+d.tx),a.crds.push(m*d.c+g*d.d+d.ty)}for(p=0;p<u.cmds.length;p++)a.cmds.push(u.cmds[p])}},e.U._getGlyphClass=function(r,o){var a=e._lctf.getInterval(o,r);return a==-1?0:o[a+2]},e.U.getPairAdjustment=function(r,o,a){var l=!1;if(r.GPOS)for(var u=r.GPOS,h=u.lookupList,d=u.featureList,p=[],m=0;m<d.length;m++){var g=d[m];if(g.tag=="kern"){l=!0;for(var v=0;v<g.tab.length;v++)if(!p[g.tab[v]]){p[g.tab[v]]=!0;for(var y=h[g.tab[v]],S=0;S<y.tabs.length;S++)if(y.tabs[S]!=null){var T,w=y.tabs[S];if((!w.coverage||(T=e._lctf.coverageIndex(w.coverage,o))!=-1)&&y.ltype!=1){if(y.ltype==2){var E=null;if(w.fmt==1){var $=w.pairsets[T];for(m=0;m<$.length;m++)$[m].gid2==a&&(E=$[m])}else if(w.fmt==2){var A=e.U._getGlyphClass(o,w.classDef1),I=e.U._getGlyphClass(a,w.classDef2);E=w.matrix[A][I]}if(E){var D=0;return E.val1&&E.val1[2]&&(D+=E.val1[2]),E.val2&&E.val2[0]&&(D+=E.val2[0]),D}}}}}}}if(r.kern&&!l){var R=r.kern.glyph1.indexOf(o);if(R!=-1){var B=r.kern.rval[R].glyph2.indexOf(a);if(B!=-1)return r.kern.rval[R].vals[B]}}return 0},e.U._applySubs=function(r,o,a,l){for(var u=r.length-o-1,h=0;h<a.tabs.length;h++)if(a.tabs[h]!=null){var d,p=a.tabs[h];if(!p.coverage||(d=e._lctf.coverageIndex(p.coverage,r[o]))!=-1){if(a.ltype==1)r[o],p.fmt==1?r[o]=r[o]+p.delta:r[o]=p.newg[d];else if(a.ltype==4)for(var m=p.vals[d],g=0;g<m.length;g++){var v=m[g],y=v.chain.length;if(!(y>u)){for(var S=!0,T=0,w=0;w<y;w++){for(;r[o+T+(1+w)]==-1;)T++;v.chain[w]!=r[o+T+(1+w)]&&(S=!1)}if(S){for(r[o]=v.nglyph,w=0;w<y+T;w++)r[o+w+1]=-1;break}}}else if(a.ltype==5&&p.fmt==2)for(var E=e._lctf.getInterval(p.cDef,r[o]),$=p.cDef[E+2],A=p.scset[$],I=0;I<A.length;I++){var D=A[I],R=D.input;if(!(R.length>u)){for(S=!0,w=0;w<R.length;w++){var B=e._lctf.getInterval(p.cDef,r[o+1+w]);if(E==-1&&p.cDef[B+2]!=R[w]){S=!1;break}}if(S){var G=D.substLookupRecords;for(g=0;g<G.length;g+=2)G[g],G[g+1]}}}else if(a.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,o-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,o)||!e.U._glsCovered(r,p.ahedCvg,o+p.inptCvg.length))continue;var Z=p.lookupRec;for(I=0;I<Z.length;I+=2){E=Z[I];var N=l[Z[I+1]];e.U._applySubs(r,o+E,N,l)}}}}},e.U._glsCovered=function(r,o,a){for(var l=0;l<o.length;l++)if(e._lctf.coverageIndex(o[l],r[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(r,o,a){for(var l={cmds:[],crds:[]},u=0,h=0;h<o.length;h++){var d=o[h];if(d!=-1){for(var p=h<o.length-1&&o[h+1]!=-1?o[h+1]:0,m=e.U.glyphToPath(r,d),g=0;g<m.crds.length;g+=2)l.crds.push(m.crds[g]+u),l.crds.push(m.crds[g+1]);for(a&&l.cmds.push(a),g=0;g<m.cmds.length;g++)l.cmds.push(m.cmds[g]);a&&l.cmds.push("X"),u+=r.hmtx.aWidth[d],h<o.length-1&&(u+=e.U.getPairAdjustment(r,d,p))}}return l},e.U.P={},e.U.P.moveTo=function(r,o,a){r.cmds.push("M"),r.crds.push(o,a)},e.U.P.lineTo=function(r,o,a){r.cmds.push("L"),r.crds.push(o,a)},e.U.P.curveTo=function(r,o,a,l,u,h,d){r.cmds.push("C"),r.crds.push(o,a,l,u,h,d)},e.U.P.qcurveTo=function(r,o,a,l,u){r.cmds.push("Q"),r.crds.push(o,a,l,u)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,o,a,l,u){for(var h=o.stack,d=o.nStems,p=o.haveWidth,m=o.width,g=o.open,v=0,y=o.x,S=o.y,T=0,w=0,E=0,$=0,A=0,I=0,D=0,R=0,B=0,G=0,Z={val:0,size:0};v<r.length;){e.CFF.getCharString(r,v,Z);var N=Z.val;if(v+=Z.size,N=="o1"||N=="o18")h.length%2!=0&&!p&&(m=h.shift()+l.nominalWidthX),d+=h.length>>1,h.length=0,p=!0;else if(N=="o3"||N=="o23")h.length%2!=0&&!p&&(m=h.shift()+l.nominalWidthX),d+=h.length>>1,h.length=0,p=!0;else if(N=="o4")h.length>1&&!p&&(m=h.shift()+l.nominalWidthX,p=!0),g&&e.U.P.closePath(u),S+=h.pop(),e.U.P.moveTo(u,y,S),g=!0;else if(N=="o5")for(;h.length>0;)y+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,y,S);else if(N=="o6"||N=="o7")for(var H=h.length,M=N=="o6",K=0;K<H;K++){var re=h.shift();M?y+=re:S+=re,M=!M,e.U.P.lineTo(u,y,S)}else if(N=="o8"||N=="o24"){H=h.length;for(var ce=0;ce+6<=H;)T=y+h.shift(),w=S+h.shift(),E=T+h.shift(),$=w+h.shift(),y=E+h.shift(),S=$+h.shift(),e.U.P.curveTo(u,T,w,E,$,y,S),ce+=6;N=="o24"&&(y+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,y,S))}else{if(N=="o11")break;if(N=="o1234"||N=="o1235"||N=="o1236"||N=="o1237")N=="o1234"&&(w=S,E=(T=y+h.shift())+h.shift(),G=$=w+h.shift(),I=$,R=S,y=(D=(A=(B=E+h.shift())+h.shift())+h.shift())+h.shift(),e.U.P.curveTo(u,T,w,E,$,B,G),e.U.P.curveTo(u,A,I,D,R,y,S)),N=="o1235"&&(T=y+h.shift(),w=S+h.shift(),E=T+h.shift(),$=w+h.shift(),B=E+h.shift(),G=$+h.shift(),A=B+h.shift(),I=G+h.shift(),D=A+h.shift(),R=I+h.shift(),y=D+h.shift(),S=R+h.shift(),h.shift(),e.U.P.curveTo(u,T,w,E,$,B,G),e.U.P.curveTo(u,A,I,D,R,y,S)),N=="o1236"&&(T=y+h.shift(),w=S+h.shift(),E=T+h.shift(),G=$=w+h.shift(),I=$,D=(A=(B=E+h.shift())+h.shift())+h.shift(),R=I+h.shift(),y=D+h.shift(),e.U.P.curveTo(u,T,w,E,$,B,G),e.U.P.curveTo(u,A,I,D,R,y,S)),N=="o1237"&&(T=y+h.shift(),w=S+h.shift(),E=T+h.shift(),$=w+h.shift(),B=E+h.shift(),G=$+h.shift(),A=B+h.shift(),I=G+h.shift(),D=A+h.shift(),R=I+h.shift(),Math.abs(D-y)>Math.abs(R-S)?y=D+h.shift():S=R+h.shift(),e.U.P.curveTo(u,T,w,E,$,B,G),e.U.P.curveTo(u,A,I,D,R,y,S));else if(N=="o14"){if(h.length>0&&!p&&(m=h.shift()+a.nominalWidthX,p=!0),h.length==4){var X=h.shift(),Q=h.shift(),ee=h.shift(),z=h.shift(),L=e.CFF.glyphBySE(a,ee),le=e.CFF.glyphBySE(a,z);e.U._drawCFF(a.CharStrings[L],o,a,l,u),o.x=X,o.y=Q,e.U._drawCFF(a.CharStrings[le],o,a,l,u)}g&&(e.U.P.closePath(u),g=!1)}else if(N=="o19"||N=="o20")h.length%2!=0&&!p&&(m=h.shift()+l.nominalWidthX),d+=h.length>>1,h.length=0,p=!0,v+=d+7>>3;else if(N=="o21")h.length>2&&!p&&(m=h.shift()+l.nominalWidthX,p=!0),S+=h.pop(),y+=h.pop(),g&&e.U.P.closePath(u),e.U.P.moveTo(u,y,S),g=!0;else if(N=="o22")h.length>1&&!p&&(m=h.shift()+l.nominalWidthX,p=!0),y+=h.pop(),g&&e.U.P.closePath(u),e.U.P.moveTo(u,y,S),g=!0;else if(N=="o25"){for(;h.length>6;)y+=h.shift(),S+=h.shift(),e.U.P.lineTo(u,y,S);T=y+h.shift(),w=S+h.shift(),E=T+h.shift(),$=w+h.shift(),y=E+h.shift(),S=$+h.shift(),e.U.P.curveTo(u,T,w,E,$,y,S)}else if(N=="o26")for(h.length%2&&(y+=h.shift());h.length>0;)T=y,w=S+h.shift(),y=E=T+h.shift(),S=($=w+h.shift())+h.shift(),e.U.P.curveTo(u,T,w,E,$,y,S);else if(N=="o27")for(h.length%2&&(S+=h.shift());h.length>0;)w=S,E=(T=y+h.shift())+h.shift(),$=w+h.shift(),y=E+h.shift(),S=$,e.U.P.curveTo(u,T,w,E,$,y,S);else if(N=="o10"||N=="o29"){var de=N=="o10"?l:a;if(h.length==0)console.debug("error: empty stack");else{var ie=h.pop(),Ce=de.Subrs[ie+de.Bias];o.x=y,o.y=S,o.nStems=d,o.haveWidth=p,o.width=m,o.open=g,e.U._drawCFF(Ce,o,a,l,u),y=o.x,S=o.y,d=o.nStems,p=o.haveWidth,m=o.width,g=o.open}}else if(N=="o30"||N=="o31"){var ye=h.length,xe=(ce=0,N=="o31");for(ce+=ye-(H=-3&ye);ce<H;)xe?(w=S,E=(T=y+h.shift())+h.shift(),S=($=w+h.shift())+h.shift(),H-ce==5?(y=E+h.shift(),ce++):y=E,xe=!1):(T=y,w=S+h.shift(),E=T+h.shift(),$=w+h.shift(),y=E+h.shift(),H-ce==5?(S=$+h.shift(),ce++):S=$,xe=!0),e.U.P.curveTo(u,T,w,E,$,y,S),ce+=4}else{if((N+"").charAt(0)=="o")throw console.debug("Unknown operation: "+N,r),N;h.push(N)}}}o.x=y,o.y=S,o.nStems=d,o.haveWidth=p,o.width=m,o.open=g};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function ATe(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(N,H){for(var M=new t(31),K=0;K<31;++K)M[K]=H+=1<<N[K-1];var re=new i(M[30]);for(K=1;K<30;++K)for(var ce=M[K];ce<M[K+1];++ce)re[ce]=ce-M[K]<<5|K;return[M,re]},u=l(r,2),h=u[0],d=u[1];h[28]=258,d[258]=28;for(var p=l(o,0)[0],m=new t(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,m[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var y=function(N,H,M){for(var K=N.length,re=0,ce=new t(H);re<K;++re)++ce[N[re]-1];var X,Q=new t(H);for(re=0;re<H;++re)Q[re]=Q[re-1]+ce[re-1]<<1;if(M){X=new t(1<<H);var ee=15-H;for(re=0;re<K;++re)if(N[re])for(var z=re<<4|N[re],L=H-N[re],le=Q[N[re]-1]++<<L,de=le|(1<<L)-1;le<=de;++le)X[m[le]>>>ee]=z}else for(X=new t(K),re=0;re<K;++re)N[re]&&(X[re]=m[Q[N[re]-1]++]>>>15-N[re]);return X},S=new e(288);for(g=0;g<144;++g)S[g]=8;for(g=144;g<256;++g)S[g]=9;for(g=256;g<280;++g)S[g]=7;for(g=280;g<288;++g)S[g]=8;var T=new e(32);for(g=0;g<32;++g)T[g]=5;var w=y(S,9,1),E=y(T,5,1),$=function(N){for(var H=N[0],M=1;M<N.length;++M)N[M]>H&&(H=N[M]);return H},A=function(N,H,M){var K=H/8|0;return(N[K]|N[K+1]<<8)>>(7&H)&M},I=function(N,H){var M=H/8|0;return(N[M]|N[M+1]<<8|N[M+2]<<16)>>(7&H)},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(N,H,M){var K=new Error(H||D[N]);if(K.code=N,Error.captureStackTrace&&Error.captureStackTrace(K,R),!M)throw K;return K},B=function(N,H,M){var K=N.length;if(!K||M&&!M.l&&K<5)return H||new e(0);var re=!H||M,ce=!M||M.i;M||(M={}),H||(H=new e(3*K));var X,Q=function(F){var te=H.length;if(F>te){var ge=new e(Math.max(2*te,F));ge.set(H),H=ge}},ee=M.f||0,z=M.p||0,L=M.b||0,le=M.l,de=M.d,ie=M.m,Ce=M.n,ye=8*K;do{if(!le){M.f=ee=A(N,z,1);var xe=A(N,z+1,3);if(z+=3,!xe){var Fe=N[(Ae=((X=z)/8|0)+(7&X&&1)+4)-4]|N[Ae-3]<<8,Xe=Ae+Fe;if(Xe>K){ce&&R(0);break}re&&Q(L+Fe),H.set(N.subarray(Ae,Xe),L),M.b=L+=Fe,M.p=z=8*Xe;continue}if(xe==1)le=w,de=E,ie=9,Ce=5;else if(xe==2){var Ue=A(N,z,31)+257,we=A(N,z+10,15)+4,Ge=Ue+A(N,z+5,31)+1;z+=14;for(var W=new e(Ge),Ee=new e(19),Oe=0;Oe<we;++Oe)Ee[a[Oe]]=A(N,z+3*Oe,7);z+=3*we;var ae=$(Ee),ne=(1<<ae)-1,pe=y(Ee,ae,1);for(Oe=0;Oe<Ge;){var Ae,Te=pe[A(N,z,ne)];if(z+=15&Te,(Ae=Te>>>4)<16)W[Oe++]=Ae;else{var j=0,Y=0;for(Ae==16?(Y=3+A(N,z,3),z+=2,j=W[Oe-1]):Ae==17?(Y=3+A(N,z,7),z+=3):Ae==18&&(Y=11+A(N,z,127),z+=7);Y--;)W[Oe++]=j}}var ue=W.subarray(0,Ue),me=W.subarray(Ue);ie=$(ue),Ce=$(me),le=y(ue,ie,1),de=y(me,Ce,1)}else R(1);if(z>ye){ce&&R(0);break}}re&&Q(L+131072);for(var Ie=(1<<ie)-1,ze=(1<<Ce)-1,Se=z;;Se=z){var Je=(j=le[I(N,z)&Ie])>>>4;if((z+=15&j)>ye){ce&&R(0);break}if(j||R(2),Je<256)H[L++]=Je;else{if(Je==256){Se=z,le=null;break}var Ve=Je-254;if(Je>264){var ot=r[Oe=Je-257];Ve=A(N,z,(1<<ot)-1)+h[Oe],z+=ot}var _e=de[I(N,z)&ze],Le=_e>>>4;if(_e||R(3),z+=15&_e,me=p[Le],Le>3&&(ot=o[Le],me+=I(N,z)&(1<<ot)-1,z+=ot),z>ye){ce&&R(0);break}re&&Q(L+131072);for(var We=L+Ve;L<We;L+=4)H[L]=H[L-me],H[L+1]=H[L+1-me],H[L+2]=H[L+2-me],H[L+3]=H[L+3-me];L=We}}M.l=le,M.p=Se,M.b=L,le&&(ee=1,M.m=ie,M.d=de,M.n=Ce)}while(!ee);return L==H.length?H:function(F,te,ge){(te==null||te<0)&&(te=0),(ge==null||ge>F.length)&&(ge=F.length);var Me=new(F instanceof t?t:F instanceof i?i:e)(ge-te);return Me.set(F.subarray(te,ge)),Me}(H,0,L)},G=new e(0),Z=typeof TextDecoder<"u"&&new TextDecoder;try{Z.decode(G,{stream:!0})}catch{}return n.convert_streams=function(N){var H=new DataView(N),M=0;function K(){var Ue=H.getUint16(M);return M+=2,Ue}function re(){var Ue=H.getUint32(M);return M+=4,Ue}function ce(Ue){Fe.setUint16(Xe,Ue),Xe+=2}function X(Ue){Fe.setUint32(Xe,Ue),Xe+=4}for(var Q={signature:re(),flavor:re(),length:re(),numTables:K(),reserved:K(),totalSfntSize:re(),majorVersion:K(),minorVersion:K(),metaOffset:re(),metaLength:re(),metaOrigLength:re(),privOffset:re(),privLength:re()},ee=0;Math.pow(2,ee)<=Q.numTables;)ee++;ee--;for(var z=16*Math.pow(2,ee),L=16*Q.numTables-z,le=12,de=[],ie=0;ie<Q.numTables;ie++)de.push({tag:re(),offset:re(),compLength:re(),origLength:re(),origChecksum:re()}),le+=16;var Ce,ye=new Uint8Array(12+16*de.length+de.reduce(function(Ue,we){return Ue+we.origLength+4},0)),xe=ye.buffer,Fe=new DataView(xe),Xe=0;return X(Q.flavor),ce(Q.numTables),ce(z),ce(ee),ce(L),de.forEach(function(Ue){X(Ue.tag),X(Ue.origChecksum),X(le),X(Ue.origLength),Ue.outOffset=le,(le+=Ue.origLength)%4!=0&&(le+=4-le%4)}),de.forEach(function(Ue){var we,Ge=N.slice(Ue.offset,Ue.offset+Ue.compLength);if(Ue.compLength!=Ue.origLength){var W=new Uint8Array(Ue.origLength);we=new Uint8Array(Ge,2),B(we,W)}else W=new Uint8Array(Ge);ye.set(W,Ue.outOffset);var Ee=0;(le=Ue.outOffset+Ue.origLength)%4!=0&&(Ee=4-le%4),ye.set(new Uint8Array(Ee).buffer,Ue.outOffset+Ue.origLength),Ce=le+Ee}),xe.slice(0,Ce)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function kTe(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,o=2,a=4,l=8,u=16,h=32;let d;function p(A){if(!d){const I={R:o,L:r,D:a,C:u,U:h,T:l};d=new Map;for(let D in i){let R=0;i[D].split(",").forEach(B=>{let[G,Z]=B.split("+");G=parseInt(G,36),Z=Z?parseInt(Z,36):0,d.set(R+=G,I[D]);for(let N=Z;N--;)d.set(++R,I[D])})}}return d.get(A)||h}const m=1,g=2,v=3,y=4,S=[null,"isol","init","fina","medi"];function T(A){const I=new Uint8Array(A.length);let D=h,R=m,B=-1;for(let G=0;G<A.length;G++){const Z=A.codePointAt(G);let N=p(Z)|0,H=m;N&l||(D&(r|a|u)?N&(o|a|u)?(H=v,(R===m||R===v)&&I[B]++):N&(r|h)&&(R===g||R===y)&&I[B]--:D&(o|h)&&(R===g||R===y)&&I[B]--,R=I[G]=H,D=N,B=G,Z>65535&&G++)}return I}function w(A,I){const D=[];for(let B=0;B<I.length;B++){const G=I.codePointAt(B);G>65535&&B++,D.push(n.U.codeToGlyph(A,G))}const R=A.GSUB;if(R){const{lookupList:B,featureList:G}=R;let Z;const N=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,H=[];G.forEach(M=>{if(N.test(M.tag))for(let K=0;K<M.tab.length;K++){if(H[M.tab[K]])continue;H[M.tab[K]]=!0;const re=B[M.tab[K]],ce=/^(isol|init|fina|medi)$/.test(M.tag);ce&&!Z&&(Z=T(I));for(let X=0;X<D.length;X++)(!Z||!ce||S[Z[X]]===M.tag)&&n.U._applySubs(D,X,re,B)}})}return D}function E(...A){for(let I=0;I<A.length;I++)if(typeof A[I]=="number")return A[I]}function $(A){const I=Object.create(null),D=A["OS/2"],R=A.hhea,B=A.head.unitsPerEm,G=E(D&&D.sTypoAscender,R&&R.ascender,B),Z={unitsPerEm:B,ascender:G,descender:E(D&&D.sTypoDescender,R&&R.descender,0),capHeight:E(D&&D.sCapHeight,G),xHeight:E(D&&D.sxHeight,G),lineGap:E(D&&D.sTypoLineGap,R&&R.lineGap),forEachGlyph(N,H,M,K){let re=0;const ce=1/Z.unitsPerEm*H,X=w(A,N);let Q=0,ee=-1;return X.forEach((z,L)=>{if(z!==-1){let le=I[z];if(!le){const{cmds:de,crds:ie}=n.U.glyphToPath(A,z);let Ce="",ye=0;for(let we=0,Ge=de.length;we<Ge;we++){const W=t[de[we]];Ce+=de[we];for(let Ee=1;Ee<=W;Ee++)Ce+=(Ee>1?",":"")+ie[ye++]}let xe,Fe,Xe,Ue;if(ie.length){xe=Fe=1/0,Xe=Ue=-1/0;for(let we=0,Ge=ie.length;we<Ge;we+=2){let W=ie[we],Ee=ie[we+1];W<xe&&(xe=W),Ee<Fe&&(Fe=Ee),W>Xe&&(Xe=W),Ee>Ue&&(Ue=Ee)}}else xe=Xe=Fe=Ue=0;le=I[z]={index:z,advanceWidth:A.hmtx.aWidth[z],xMin:xe,yMin:Fe,xMax:Xe,yMax:Ue,path:Ce,pathCommandCount:de.length}}ee!==-1&&(re+=n.U.getPairAdjustment(A,ee,z)*ce),K.call(null,le,re,Q),le.advanceWidth&&(re+=le.advanceWidth*ce),M&&(re+=M*H),ee=z}Q+=N.codePointAt(Q)>65535?2:1}),re}};return Z}return function(I){const D=new Uint8Array(I,0,4),R=n._bin.readASCII(D,0,4);if(R==="wOFF")I=e(I);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return $(n.parse(I)[0])}}const ITe=HT({name:"Typr Font Parser",dependencies:[CTe,ATe,kTe],init(n,e,t){const i=n(),r=e();return t(i,r)}}),A0={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},RTe=new pt;function q_(){return(self.performance||Date).now()}const cV=Object.create(null);function wJ(n,e){n=DTe({},n);const t=q_();if(n.font=LTe(n.font||A0.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||A0.sdfGlyphSize,n.colorRanges!=null){let p={};for(let m in n.colorRanges)if(n.colorRanges.hasOwnProperty(m)){let g=n.colorRanges[m];typeof g!="number"&&(g=RTe.set(g).getHex()),p[m]=g}n.colorRanges=p}Object.freeze(n);const{textureWidth:i,sdfExponent:r}=A0,{sdfGlyphSize:o}=n,a=i/o*4;let l=cV[o];if(!l){const p=document.createElement("canvas");p.width=i,p.height=o*256/a,l=cV[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:p,sdfTexture:new Ri(p,void 0,void 0,void 0,hi,hi),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,MTe(l)}const{sdfTexture:u,sdfCanvas:h}=l;let d=l.glyphsByFont.get(n.font);d||l.glyphsByFont.set(n.font,d=new Map),BTe(n).then(p=>{const{glyphIds:m,glyphPositions:g,fontSize:v,unitsPerEm:y,timings:S}=p,T=[],w=new Float32Array(m.length*4),E=v/y;let $=0,A=0;const I=q_();m.forEach((Z,N)=>{let H=d.get(Z);if(!H){const{path:ce,pathBounds:X}=p.glyphData[Z],Q=Math.max(X[2]-X[0],X[3]-X[1])/o*(A0.sdfMargin*o+.5),ee=l.glyphCount++,z=[X[0]-Q,X[1]-Q,X[2]+Q,X[3]+Q];d.set(Z,H={path:ce,atlasIndex:ee,sdfViewBox:z}),T.push(H)}const{sdfViewBox:M}=H,K=g[A++],re=g[A++];w[$++]=K+M[0]*E,w[$++]=re+M[1]*E,w[$++]=K+M[2]*E,w[$++]=re+M[3]*E,m[N]=H.atlasIndex}),S.quads=(S.quads||0)+(q_()-I);const D=q_();S.sdf={};const R=h.height,B=Math.ceil(l.glyphCount/a),G=Math.pow(2,Math.ceil(Math.log2(B*o)));G>R&&(console.info(`Increasing SDF texture size ${R}->${G}`),$Te(h,i,G),u.dispose()),Promise.all(T.map(Z=>EJ(Z,l,n.gpuAccelerateSDF).then(({timing:N})=>{S.sdf[Z.atlasIndex]=N}))).then(()=>{T.length&&!l.contextLost&&(xJ(l),u.needsUpdate=!0),S.sdfTotal=q_()-D,S.total=q_()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:o,sdfExponent:r,glyphBounds:w,glyphAtlasIndices:m,glyphColors:p.glyphColors,caretPositions:p.caretPositions,caretHeight:p.caretHeight,chunkedBounds:p.chunkedBounds,ascender:p.ascender,descender:p.descender,lineHeight:p.lineHeight,capHeight:p.capHeight,xHeight:p.xHeight,topBaseline:p.topBaseline,blockBounds:p.blockBounds,visibleBounds:p.visibleBounds,timings:p.timings}))})}),Promise.resolve().then(()=>{l.contextLost||xTe(h)})}function EJ({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:u}=A0,h=Math.max(t[2]-t[0],t[3]-t[1]),d=Math.floor(e/4),p=d%(l/i)*i,m=Math.floor(d/(l/i))*i,g=e%4;return yTe(i,i,n,t,h,u,r,p,m,g,a)}function MTe(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(o=>{i.push(EJ(o,n,!0))})}),Promise.all(i).then(()=>{xJ(n),n.sdfTexture.needsUpdate=!0})})}function PTe({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;wJ({font:n,sdfGlyphSize:t,text:r},i)}function DTe(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let KE;function LTe(n){return KE||(KE=typeof document>"u"?{}:document.createElement("a")),KE.href=n,KE.href}function xJ(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,o=n.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==i*r*4)&&(a=new Uint8Array(i*r*4),t.image={width:i,height:r,data:a},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,r,o.RGBA,o.UNSIGNED_BYTE,a)}}const NTe=HT({name:"Typesetter",dependencies:[A0,ITe,vTe,hTe],init(n,e,t,i){const{defaultFontURL:r}=n;return t(e,i(),{defaultFontURL:r})}}),BTe=HT({name:"Typesetter",dependencies:[NTe],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),uV={};function FTe(n){let e=uV[n];if(!e){const t=new sd(1,1,n,n),i=t.clone(),r=t.attributes,o=i.attributes,a=new On,l=r.uv.count;for(let u=0;u<l;u++)o.position.array[u*3]*=-1,o.normal.array[u*3+2]*=-1;["position","normal","uv"].forEach(u=>{a.setAttribute(u,new Gt([...r[u].array,...o[u].array],r[u].itemSize))}),a.setIndex([...t.index.array,...i.index.array.map(u=>u+l)]),a.translate(.5,.5,0),e=uV[n]=a}return e}const UTe="aTroikaGlyphBounds",hV="aTroikaGlyphIndex",GTe="aTroikaGlyphColor";class WTe extends FA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new wc,this.boundingBox=new Za}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Xs?t/2:0,e===El?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=FTe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,o){cP(this,UTe,e,4),cP(this,hV,t,1),cP(this,GTe,o,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:o,min:a,max:l,sin:u,cos:h}=Math,d=r/2,p=r*2,m=Math.abs(t),g=e[0]/m,v=e[2]/m,y=o((g+d)/p)!==o((v+d)/p)?-m:a(u(g)*m,u(v)*m),S=o((g-d)/p)!==o((v-d)/p)?m:l(u(g)*m,u(v)*m),T=o((g+r)/p)!==o((v+r)/p)?m*2:l(m-h(g)*m,m-h(v)*m);i.min.set(y,e[1],t<0?-T:0),i.max.set(S,e[3],t<0?0:T)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(hV).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let o=i[r].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function cP(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new tg(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const zTe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,QTe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,VTe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,HTe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function XTe(n){const e=bL(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new nt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Fn(0,0,0,0)},uTroikaClipRect:{value:new Fn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new nt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new pt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new vs},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:zTe,vertexTransform:QTe,fragmentDefs:VTe,fragmentColorTransform:HTe,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(SJ,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const sF=new Ro({color:16777215,side:El,transparent:!0}),dV=8421504,fV=new hn,ex=new he,uP=new he,Ky=[],jTe=new he,hP="+x+y";function pV(n){return Array.isArray(n)?n[0]:n}let $J=()=>{const n=new nr(new sd(1,1),sF);return $J=()=>n,n},CJ=()=>{const n=new nr(new sd(1,1,32,1),sF);return CJ=()=>n,n};const YTe={type:"syncstart"},ZTe={type:"synccomplete"},AJ=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],qTe=AJ.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let kJ=class extends nr{constructor(){const e=new WTe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=dV,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=hP,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(YTe),wJ({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(ZTe),e&&e()})))}onBeforeRender(e,t,i,r,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=Sc}onAfterRender(e,t,i,r,o,a){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=sF.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=XTe(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return pV(this.material).getDepthMaterial()}get customDistanceMaterial(){return pV(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:l,blockBounds:u}=r;i.uTroikaSDFTexture.value=l,i.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(u),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let h=0,d=0,p=0,m,g,v,y=0,S=0;if(t){let{outlineWidth:w,outlineOffsetX:E,outlineOffsetY:$,outlineBlur:A,outlineOpacity:I}=this;h=this._parsePercent(w)||0,d=Math.max(0,this._parsePercent(A)||0),m=I,y=this._parsePercent(E)||0,S=this._parsePercent($)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(v=this.strokeColor,i.uTroikaStrokeColor.value.set(v??dV),g=this.strokeOpacity,g==null&&(g=1)),m=this.fillOpacity;i.uTroikaDistanceOffset.value=h,i.uTroikaPositionOffset.value.set(y,S),i.uTroikaBlurRadius.value=d,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=g,i.uTroikaFillOpacity.value=m??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let T=this.clipRect;if(T&&Array.isArray(T)&&T.length===4)i.uTroikaClipRect.value.fromArray(T);else{const w=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(u[0]-w,u[1]-w,u[2]+w,u[3]+w)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new pt;(o!==l._input||typeof o=="object")&&l.set(l._input=o)}let a=this.orientation||hP;if(a!==e._orientation){let l=i.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let u=a!==hP&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,h,d,p,m]=u;ex.set(0,0,0)[d]=h==="-"?1:-1,uP.set(0,0,0)[m]=p==="-"?-1:1,fV.lookAt(jTe,ex.cross(uP),uP),l.setFromMatrix4(fV)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new nt){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new nt){return ex.copy(e),this.localPositionToTextCoords(this.worldToLocal(ex),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const o=i.blockBounds,a=r?CJ():$J(),l=a.geometry,{position:u,uv:h}=l.attributes;for(let d=0;d<h.count;d++){let p=o[0]+h.getX(d)*(o[2]-o[0]);const m=o[1]+h.getY(d)*(o[3]-o[1]);let g=0;r&&(g=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),u.setXYZ(d,p,m,g)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Ky.length=0,a.raycast(e,Ky);for(let d=0;d<Ky.length;d++)Ky[d].object=this,t.push(Ky[d])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,qTe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};AJ.forEach(n=>{const e="_private_"+n;Object.defineProperty(kJ.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const mV=q.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:r,characters:o,onSync:a,...l},u)=>{const h=Bi(({invalidate:g})=>g),[d]=q.useState(()=>new kJ),[p,m]=q.useMemo(()=>{const g=[];let v="";return q.Children.forEach(r,y=>{typeof y=="string"||typeof y=="number"?v+=y:g.push(y)}),[g,v]},[r]);return Mq(()=>new Promise(g=>PTe({font:t,characters:o},g)),["troika-text",t,o]),q.useLayoutEffect(()=>void d.sync(()=>{h(),a&&a(d)})),q.useEffect(()=>()=>d.dispose(),[d]),q.createElement("primitive",Ji({object:d,ref:u,font:t,text:m,anchorX:n,anchorY:e,fontSize:i},l),p)});function JTe(n,e,t,i){const r=class extends Ha{constructor(a={}){const l=Object.entries(n);super({uniforms:l.reduce((u,[h,d])=>{const p=pg.clone({[h]:{value:d}});return{...u,...p}},{}),vertexShader:e,fragmentShader:t}),this.key="",l.forEach(([u])=>Object.defineProperty(this,u,{get:()=>this.uniforms[u].value,set:h=>this.uniforms[u].value=h})),Object.assign(this,a),i&&i(this)}};return r.key=TA.generateUUID(),r}let tx=null;function IJ(n,e,t){return i=>{t&&t(i),n&&(tx||(tx=new JSe),tx.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(tx)),e&&i.setMeshoptDecoder(typeof aP=="function"?aP():aP)}}function JA(n,e=!0,t=!0,i){return zT(nF,n,IJ(e,t,i))}JA.preload=(n,e=!0,t=!0,i)=>zT.preload(nF,n,IJ(e,t,i));JA.clear=n=>zT.clear(nF,n);function KTe(n,e,t){const{gl:i,size:r,viewport:o}=Bi(),a=typeof n=="number"?n:r.width*o.dpr,l=typeof e=="number"?e:r.height*o.dpr,u=(typeof n=="number"?t:n)||{},{samples:h=0,depth:d,...p}=u,m=q.useMemo(()=>{let g;return g=new Rl(a,l,{minFilter:hi,magFilter:hi,encoding:i.outputEncoding,type:Jm,...p}),d&&(g.depthTexture=new JB(a,l,_u)),g.samples=h,g},[]);return q.useLayoutEffect(()=>{m.setSize(a,l),h&&(m.samples=h)},[h,m,a,l]),q.useEffect(()=>()=>m.dispose(),[]),m}const e1e=n=>typeof n=="function",t1e=q.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...o},a)=>{const l=Bi(({set:S})=>S),u=Bi(({camera:S})=>S),h=Bi(({size:S})=>S),d=q.useRef(null),p=q.useRef(null),m=KTe(e);q.useLayoutEffect(()=>{o.manual||d.current.updateProjectionMatrix()},[h,o]),q.useLayoutEffect(()=>{d.current.updateProjectionMatrix()}),q.useLayoutEffect(()=>{if(r){const S=u;return l(()=>({camera:d.current})),()=>l(()=>({camera:S}))}},[d,r,l]);let g=0,v=null;const y=e1e(i);return vg(S=>{y&&(t===1/0||g<t)&&(p.current.visible=!1,S.gl.setRenderTarget(m),v=S.scene.background,n&&(S.scene.background=n),S.gl.render(S.scene,d.current),S.scene.background=v,S.gl.setRenderTarget(null),p.current.visible=!0,g++)}),q.createElement(q.Fragment,null,q.createElement("orthographicCamera",Ji({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:cbe([d,a])},o),!y&&i),q.createElement("group",{ref:p},y&&i(m.texture)))}),RJ=q.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,onChange:o,onStart:a,onEnd:l,...u},h)=>{const d=Bi(A=>A.invalidate),p=Bi(A=>A.camera),m=Bi(A=>A.gl),g=Bi(A=>A.events),v=Bi(A=>A.setEvents),y=Bi(A=>A.set),S=Bi(A=>A.get),T=Bi(A=>A.performance),w=e||p,E=i||g.connected||m.domElement,$=q.useMemo(()=>new SSe(w),[w]);return vg(()=>{$.enabled&&$.update()},-1),q.useEffect(()=>($.connect(E),()=>void $.dispose()),[E,t,$,d]),q.useEffect(()=>{const A=R=>{d(),t&&T.regress(),o&&o(R)},I=R=>{a&&a(R)},D=R=>{l&&l(R)};return $.addEventListener("change",A),$.addEventListener("start",I),$.addEventListener("end",D),()=>{$.removeEventListener("start",I),$.removeEventListener("end",D),$.removeEventListener("change",A)}},[o,a,l,$,d,v]),q.useEffect(()=>{if(n){const A=S().controls;return y({controls:$}),()=>y({controls:A})}},[n,$]),q.createElement("primitive",Ji({ref:h,object:$,enableDamping:r},u))});function n1e({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:o}=Bi();let a;return vg(()=>{a=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,o),i.autoClear=a},t),q.createElement(q.Fragment,null)}function i1e({children:n,renderPriority:e=1}){const{scene:t,camera:i}=Bi(),[r]=q.useState(()=>new wS);return q.createElement(q.Fragment,null,Uye(q.createElement(q.Fragment,null,n,q.createElement(n1e,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const MJ=q.createContext({}),r1e=()=>q.useContext(MJ),s1e=2*Math.PI,gV=new Un,_V=new hn,[J_,dP]=[new Jr,new Jr],OV=new he,vV=new he,o1e=n=>"minPolarAngle"in n,PJ=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:o})=>{const a=Bi(I=>I.size),l=Bi(I=>I.camera),u=Bi(I=>I.controls),h=Bi(I=>I.invalidate),d=q.useRef(),p=q.useRef(null),m=q.useRef(!1),g=q.useRef(0),v=q.useRef(new he(0,0,0)),y=q.useRef(new he(0,0,0));q.useEffect(()=>{y.current.copy(l.up)},[l]);const S=q.useCallback(I=>{m.current=!0,(u||r)&&(v.current=(u==null?void 0:u.target)||(r==null?void 0:r())),g.current=l.position.distanceTo(OV),J_.copy(l.quaternion),vV.copy(I).multiplyScalar(g.current).add(OV),gV.lookAt(vV),dP.copy(gV.quaternion),h()},[u,l,r,h]);vg((I,D)=>{if(p.current&&d.current){var R;if(m.current)if(J_.angleTo(dP)<.01)m.current=!1,o1e(u)&&l.up.copy(y.current);else{const B=D*s1e;J_.rotateTowards(dP,B),l.position.set(0,0,1).applyQuaternion(J_).multiplyScalar(g.current).add(v.current),l.up.set(0,1,0).applyQuaternion(J_).normalize(),l.quaternion.copy(J_),i?i():u&&u.update(),h()}_V.copy(l.matrix).invert(),(R=d.current)==null||R.quaternion.setFromRotationMatrix(_V)}});const T=q.useMemo(()=>({tweenCamera:S}),[S]),[w,E]=e,$=n.endsWith("-center")?0:n.endsWith("-left")?-a.width/2+w:a.width/2-w,A=n.startsWith("center-")?0:n.startsWith("top-")?a.height/2-E:-a.height/2+E;return q.createElement(i1e,{renderPriority:t},q.createElement(MJ.Provider,{value:T},q.createElement(t1e,{makeDefault:!0,ref:p,position:[0,0,200]}),q.createElement("group",{ref:d,position:[$,A,0]},o)))};function fP({scale:n=[.8,.05,.05],color:e,rotation:t}){return q.createElement("group",{rotation:t},q.createElement("mesh",{position:[.4,0,0]},q.createElement("boxGeometry",{args:n}),q.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function K_({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:o,axisHeadScale:a=1,...l}){const u=Bi(y=>y.gl),h=q.useMemo(()=>{const y=document.createElement("canvas");y.width=64,y.height=64;const S=y.getContext("2d");return S.beginPath(),S.arc(32,32,16,0,2*Math.PI),S.closePath(),S.fillStyle=i,S.fill(),r&&(S.font=e,S.textAlign="center",S.fillStyle=o,S.fillText(r,32,41)),new fY(y)},[i,r,o,e]),[d,p]=q.useState(!1),m=(r?1:.75)*(d?1.2:1)*a,g=y=>{y.stopPropagation(),p(!0)},v=y=>{y.stopPropagation(),p(!1)};return q.createElement("sprite",Ji({scale:m,onPointerOver:t?void 0:g,onPointerOut:t?void 0:n||v},l),q.createElement("spriteMaterial",{map:h,"map-encoding":u.outputEncoding,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const DJ=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:o=1,axisScale:a,labels:l=["X","Y","Z"],labelColor:u="#000",onClick:h,...d})=>{const[p,m,g]=r,{tweenCamera:v}=r1e(),y={font:i,disabled:t,labelColor:u,onClick:h,axisHeadScale:o,onPointerDown:t?void 0:S=>{v(S.object.position),S.stopPropagation()}};return q.createElement("group",Ji({scale:40},d),q.createElement(fP,{color:p,rotation:[0,0,0],scale:a}),q.createElement(fP,{color:m,rotation:[0,0,Math.PI/2],scale:a}),q.createElement(fP,{color:g,rotation:[0,-Math.PI/2,0],scale:a}),!e&&q.createElement(q.Fragment,null,q.createElement(K_,Ji({arcStyle:p,position:[1,0,0],label:l[0]},y)),q.createElement(K_,Ji({arcStyle:m,position:[0,1,0],label:l[1]},y)),q.createElement(K_,Ji({arcStyle:g,position:[0,0,1],label:l[2]},y)),!n&&q.createElement(q.Fragment,null,q.createElement(K_,Ji({arcStyle:p,position:[-1,0,0]},y)),q.createElement(K_,Ji({arcStyle:m,position:[0,-1,0]},y)),q.createElement(K_,Ji({arcStyle:g,position:[0,0,-1]},y)))),q.createElement("ambientLight",{intensity:.5}),q.createElement("pointLight",{position:[10,10,10],intensity:.5}))},a1e=JTe({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new pt,sectionColor:new pt,infiniteGrid:0,followCamera:0},`varying vec3 worldPosition;
   uniform float fadeDistance;
   uniform float infiniteGrid;
   uniform float followCamera;
   void main() {
     vec3 pos = position.xzy * (1. + fadeDistance * infiniteGrid);
     pos.xz += (cameraPosition.xz * followCamera);
     worldPosition = pos;
     gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
   }`,`varying vec3 worldPosition;
   uniform float cellSize;
   uniform float sectionSize;
   uniform vec3 cellColor;
   uniform vec3 sectionColor;
   uniform float fadeDistance;
   uniform float fadeStrength;
   uniform float cellThickness;
   uniform float sectionThickness;
   uniform float infiniteGrid;
   float getGrid(float size, float thickness) {
     vec2 r = worldPosition.xz / size;
     vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
     float line = min(grid.x, grid.y) + 1. - thickness;
     return 1.0 - min(line, 1.);
   }
   void main() {
     float g1 = getGrid(cellSize, cellThickness);
     float g2 = getGrid(sectionSize, sectionThickness);
     float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
     vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));
     gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
     gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
     if (gl_FragColor.a <= 0.0) discard;
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),LJ=q.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:o=!1,infiniteGrid:a=!1,fadeDistance:l=100,fadeStrength:u=1,cellThickness:h=.5,sectionThickness:d=1,side:p=Xs,...m},g)=>{Pq({GridMaterial:a1e});const v={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:h,sectionThickness:d},y={fadeDistance:l,fadeStrength:u,infiniteGrid:a,followCamera:o};return q.createElement("mesh",Ji({ref:g,frustumCulled:!1},m),q.createElement("gridMaterial",Ji({transparent:!0,"extensions-derivatives":!0,side:p},v,y)),q.createElement("planeGeometry",{args:n}))});function l1e(n,e){const t=q.useRef(),[i]=q.useState(()=>e?e instanceof Un?{current:e}:e:t),[r]=q.useState(()=>new QY(void 0)),o=q.useRef({}),[a]=q.useState(()=>{const l={};return n.forEach(u=>Object.defineProperty(l,u.name,{enumerable:!0,get(){if(i.current)return o.current[u.name]||(o.current[u.name]=r.clipAction(u,i.current))}})),{ref:i,clips:n,actions:l,names:n.map(u=>u.name),mixer:r}});return vg((l,u)=>r.update(u)),q.useEffect(()=>{const l=i.current;return()=>{o.current={},Object.values(a.actions).forEach(u=>{l&&r.uncacheAction(u,l)})}},[n]),q.useEffect(()=>()=>{r.stopAllAction()},[r]),a}function oF(n){const e=n+"Geometry";return q.forwardRef(({args:t,children:i,...r},o)=>q.createElement("mesh",Ji({ref:o},r),q.createElement(e,{attach:"geometry",args:t}),i))}const c1e=oF("box"),NJ=oF("sphere"),u1e=oF("plane");function h1e(n,e,t=new he){const i=Math.PI*(n-.5),r=2*Math.PI*(e-.5);return t.x=Math.cos(r),t.y=Math.sin(i),t.z=Math.sin(r),t}const d1e=q.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:o=.5,turbidity:a=10,sunPosition:l=h1e(n,e),...u},h)=>{const d=q.useMemo(()=>new he().setScalar(t),[t]),[p]=q.useState(()=>new C0);return q.createElement("primitive",Ji({object:p,ref:h,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":o,"material-uniforms-sunPosition-value":l,"material-uniforms-turbidity-value":a,scale:d},u))});function BJ({robotId:n,renderBoundingBox:e}){const t=sa($=>$.updateRobotBoundingBox),i=sa($=>$.checkCollisions),r=jt($=>$.robots[n]),o=sa($=>$.robots[n]),a=o==null?void 0:o.boundingBox,l=a==null?void 0:a.getSize(new he),[u,h]=q.useState(!1),{camera:d}=Bi(),p=q.useRef(null),{nodes:m,materials:g,animations:v}=JA("./crazyflie.glb"),{actions:y}=l1e(v,p),[S,T]=q.useState(!0),[w,E]=q.useState(!0);return q.useEffect(()=>{Object.values(y).map($=>$==null?void 0:$.play()),T(!1)},[]),q.useEffect(()=>{if(!p.current){E(!1);return}if(e){const $=new Za;$.setFromObject(p.current),t(n,$)}E(!1)},[p.current]),S||w?se(mV,{fontSize:1,children:"Loading..."}):dt(Fr,{children:[u?se(mV,{quaternion:d.quaternion.clone(),position:[0,0,1],fontSize:.25,children:`${r.name}, Position: (${o.pos.x.toFixed(1)}, ${o.pos.y.toFixed(1)}, ${o.pos.z.toFixed(1)})`}):null,se("group",{children:dt("group",{ref:p,children:[se("group",{scale:.3,rotation:[Math.PI/2,-Math.PI/2,0],children:dt("mesh",{name:"pcb_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m.pcb_Default_sldprt.geometry,material:g["Material.003"],position:[.01,0,0],scale:.01,children:[se("mesh",{name:"propeller_ccw_Default_sldprt001",castShadow:!0,receiveShadow:!0,geometry:m.propeller_ccw_Default_sldprt001.geometry,material:g["Material.004"],position:[33.94,15.2,33.85],rotation:[1.56,-.01,.79]}),se("mesh",{name:"propeller_ccw_Default_sldprt002",castShadow:!0,receiveShadow:!0,geometry:m.propeller_ccw_Default_sldprt002.geometry,material:g["Material.001"],position:[33.94,15.2,-33.85],rotation:[-1.56,.01,.79],scale:-1}),se("mesh",{name:"propeller_ccw_Default_sldprt003",castShadow:!0,receiveShadow:!0,geometry:m.propeller_ccw_Default_sldprt003.geometry,material:g["Material.004"],position:[-33.83,15.2,33.32],rotation:[-1.56,.01,.79],scale:-1}),se("mesh",{name:"propeller_ccw_Default_sldprt004",castShadow:!0,receiveShadow:!0,geometry:m.propeller_ccw_Default_sldprt004.geometry,material:g["Material.004"],position:[-33.94,15.2,-33.85],rotation:[1.57,0,Math.PI/4]}),se("mesh",{name:"7mm_motor_mount_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m["7mm_motor_mount_Default_sldprt"].geometry,material:g.Material,position:[-33.72,3.79,-33.71],rotation:[1.56,0,0]}),se("mesh",{name:"7x15_motor_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m["7x15_motor_Default_sldprt"].geometry,material:g["Material.002"],position:[-33.85,-4.25,-33.74],rotation:[1.56,0,0]}),se("mesh",{name:"battery_bc-bl-01-a_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m["battery_bc-bl-01-a_Default_sldprt"].geometry,material:g["Material.006"],position:[-11.27,2.54,8.16],rotation:[1.56,0,0]}),se("mesh",{name:"battery_holder_board_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m.battery_holder_board_Default_sldprt.geometry,material:g["Material.003"],position:[-10.37,9.9,13.13],rotation:[Math.PI/2,0,0],scale:[1,.97,1]}),se("mesh",{name:"header_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:m.header_Default_sldprt.geometry,material:g["Material.005"],position:[-9.32,4.28,-8.95],rotation:[1.56,0,-Math.PI],scale:-1})]})}),dt(NJ,{position:[0,0,-.05],scale:.033,castShadow:!1,receiveShadow:!1,children:[se("meshStandardMaterial",{emissive:o?[o.color.r/255,o.color.g/255,o.color.b/255]:[1,1,1]}),se("pointLight",{position:[0,0,0],intensity:.5})]})]})}),e&&l?se(c1e,{onPointerOver:()=>{h(!0)},onPointerLeave:()=>{h(!1)},args:[l.x,l.y,l.z],material:new Ro({color:i(n)?16711680:65280,wireframe:!0}),position:new he(0,0,0)},n):null]})}JA.preload("./crazyflie.glb");var aF=jT(),mn=n=>XT(n,aF),lF=jT();mn.write=n=>XT(n,lF);var KA=jT();mn.onStart=n=>XT(n,KA);var cF=jT();mn.onFrame=n=>XT(n,cF);var uF=jT();mn.onFinish=n=>XT(n,uF);var H0=[];mn.setTimeout=(n,e)=>{let t=mn.now()+e,i=()=>{let o=H0.findIndex(a=>a.cancel==i);~o&&H0.splice(o,1),uf-=~o?1:0},r={time:t,handler:n,cancel:i};return H0.splice(FJ(t),0,r),uf+=1,UJ(),r};var FJ=n=>~(~H0.findIndex(e=>e.time>n)||~H0.length);mn.cancel=n=>{KA.delete(n),cF.delete(n),uF.delete(n),aF.delete(n),lF.delete(n)};mn.sync=n=>{TL=!0,mn.batchedUpdates(n),TL=!1};mn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,mn.onStart(t)}return i.handler=n,i.cancel=()=>{KA.delete(t),e=null},i};var hF=typeof window<"u"?window.requestAnimationFrame:()=>{};mn.use=n=>hF=n;mn.now=typeof performance<"u"?()=>performance.now():Date.now;mn.batchedUpdates=n=>n();mn.catch=console.error;mn.frameLoop="always";mn.advance=()=>{mn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):WJ()};var cf=-1,uf=0,TL=!1;function XT(n,e){TL?(e.delete(n),n(0)):(e.add(n),UJ())}function UJ(){cf<0&&(cf=0,mn.frameLoop!=="demand"&&hF(GJ))}function f1e(){cf=-1}function GJ(){~cf&&(hF(GJ),mn.batchedUpdates(WJ))}function WJ(){let n=cf;cf=mn.now();let e=FJ(cf);if(e&&(zJ(H0.splice(0,e),t=>t.handler()),uf-=e),!uf){f1e();return}KA.flush(),aF.flush(n?Math.min(64,cf-n):16.667),cF.flush(),lF.flush(),uF.flush()}function jT(){let n=new Set,e=n;return{add(t){uf+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return uf-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,uf-=e.size,zJ(e,i=>i(t)&&n.add(i)),uf+=n.size,e=n)}}}function zJ(n,e){n.forEach(t=>{try{e(t)}catch(i){mn.catch(i)}})}var p1e=Object.defineProperty,m1e=(n,e)=>{for(var t in e)p1e(n,t,{get:e[t],enumerable:!0})},Tc={};m1e(Tc,{assign:()=>_1e,colors:()=>$f,createStringInterpolator:()=>fF,skipAnimation:()=>VJ,to:()=>QJ,willAdvance:()=>pF});function wL(){}var g1e=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),yt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function $h(n,e){if(yt.arr(n)){if(!yt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var ni=(n,e)=>n.forEach(e);function ed(n,e,t){if(yt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(let i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var xl=n=>yt.und(n)?[]:yt.arr(n)?n:[n];function Qb(n,e){if(n.size){let t=Array.from(n);n.clear(),ni(t,e)}}var _b=(n,...e)=>Qb(n,t=>t(...e)),dF=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fF,QJ,$f=null,VJ=!1,pF=wL,_1e=n=>{n.to&&(QJ=n.to),n.now&&(mn.now=n.now),n.colors!==void 0&&($f=n.colors),n.skipAnimation!=null&&(VJ=n.skipAnimation),n.createStringInterpolator&&(fF=n.createStringInterpolator),n.requestAnimationFrame&&mn.use(n.requestAnimationFrame),n.batchedUpdates&&(mn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(pF=n.willAdvance),n.frameLoop&&(mn.frameLoop=n.frameLoop)},Vb=new Set,Sl=[],pP=[],cC=0,ek={get idle(){return!Vb.size&&!Sl.length},start(n){cC>n.priority?(Vb.add(n),mn.onStart(O1e)):(HJ(n),mn(EL))},advance:EL,sort(n){if(cC)mn.onFrame(()=>ek.sort(n));else{let e=Sl.indexOf(n);~e&&(Sl.splice(e,1),XJ(n))}},clear(){Sl=[],Vb.clear()}};function O1e(){Vb.forEach(HJ),Vb.clear(),mn(EL)}function HJ(n){Sl.includes(n)||XJ(n)}function XJ(n){Sl.splice(v1e(Sl,e=>e.priority>n.priority),0,n)}function EL(n){let e=pP;for(let t=0;t<Sl.length;t++){let i=Sl[t];cC=i.priority,i.idle||(pF(i),i.advance(n),i.idle||e.push(i))}return cC=0,pP=Sl,pP.length=0,Sl=e,Sl.length>0}function v1e(n,e){let t=n.findIndex(e);return t<0?n.length:t}var y1e=(n,e,t)=>Math.min(Math.max(t,n),e),b1e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},pc="[-+]?\\d*\\.?\\d+",uC=pc+"%";function tk(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var S1e=new RegExp("rgb"+tk(pc,pc,pc)),T1e=new RegExp("rgba"+tk(pc,pc,pc,pc)),w1e=new RegExp("hsl"+tk(pc,uC,uC)),E1e=new RegExp("hsla"+tk(pc,uC,uC,pc)),x1e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,$1e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,C1e=/^#([0-9a-fA-F]{6})$/,A1e=/^#([0-9a-fA-F]{8})$/;function k1e(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=C1e.exec(n))?parseInt(e[1]+"ff",16)>>>0:$f&&$f[n]!==void 0?$f[n]:(e=S1e.exec(n))?(e0(e[1])<<24|e0(e[2])<<16|e0(e[3])<<8|255)>>>0:(e=T1e.exec(n))?(e0(e[1])<<24|e0(e[2])<<16|e0(e[3])<<8|SV(e[4]))>>>0:(e=x1e.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=A1e.exec(n))?parseInt(e[1],16)>>>0:(e=$1e.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=w1e.exec(n))?(yV(bV(e[1]),nx(e[2]),nx(e[3]))|255)>>>0:(e=E1e.exec(n))?(yV(bV(e[1]),nx(e[2]),nx(e[3]))|SV(e[4]))>>>0:null}function mP(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function yV(n,e,t){let i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,o=mP(r,i,n+1/3),a=mP(r,i,n),l=mP(r,i,n-1/3);return Math.round(o*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function e0(n){let e=parseInt(n,10);return e<0?0:e>255?255:e}function bV(n){return(parseFloat(n)%360+360)%360/360}function SV(n){let e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function nx(n){let e=parseFloat(n);return e<0?0:e>100?1:e/100}function TV(n){let e=k1e(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${o})`}var US=(n,e,t)=>{if(yt.fun(n))return n;if(yt.arr(n))return US({range:n,output:e,extrapolate:t});if(yt.str(n.output[0]))return fF(n);let i=n,r=i.output,o=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",u=i.easing||(h=>h);return h=>{let d=R1e(h,o);return I1e(h,o[d],o[d+1],r[d],r[d+1],u,a,l,i.map)}};function I1e(n,e,t,i,r,o,a,l,u){let h=u?u(n):n;if(h<e){if(a==="identity")return h;a==="clamp"&&(h=e)}if(h>t){if(l==="identity")return h;l==="clamp"&&(h=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?h=-h:t===1/0?h=h-e:h=(h-e)/(t-e),h=o(h),i===-1/0?h=-h:r===1/0?h=h+i:h=h*(r-i)+i,h)}function R1e(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var M1e=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);let i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return y1e(0,1,r/n)},hC=1.70158,ix=hC*1.525,wV=hC+1,EV=2*Math.PI/3,xV=2*Math.PI/4.5,rx=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,P1e={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>wV*n*n*n-hC*n*n,easeOutBack:n=>1+wV*Math.pow(n-1,3)+hC*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((ix+1)*2*n-ix)/2:(Math.pow(2*n-2,2)*((ix+1)*(n*2-2)+ix)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*EV),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*EV)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*xV))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*xV)/2+1,easeInBounce:n=>1-rx(1-n),easeOutBounce:rx,easeInOutBounce:n=>n<.5?(1-rx(1-2*n))/2:(1+rx(2*n-1))/2,steps:M1e},vO=Symbol.for("FluidValue.get"),ag=Symbol.for("FluidValue.observers"),hu=n=>!!(n&&n[vO]),gl=n=>n&&n[vO]?n[vO]():n,$V=n=>n[ag]||null;function D1e(n,e){n.eventObserved?n.eventObserved(e):n(e)}function dC(n,e){let t=n[ag];t&&t.forEach(i=>{D1e(i,e)})}var gMe,_Me,K6,L1e=(K6=class{constructor(n){Ct(this,gMe);Ct(this,_Me);if(!n&&!(n=this.get))throw Error("Unknown getter");N1e(this,n)}},gMe=vO,_Me=ag,K6),N1e=(n,e)=>jJ(n,vO,e);function YT(n,e){if(n[vO]){let t=n[ag];t||jJ(n,ag,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function fC(n,e){let t=n[ag];if(t&&t.has(e)){let i=t.size-1;i?t.delete(e):n[ag]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var jJ=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),r$=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,B1e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,CV=new RegExp(`(${r$.source})(%|[a-z]+)`,"i"),F1e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,nk=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,YJ=n=>{let[e,t]=U1e(n);if(!e||dF())return n;let i=window.getComputedStyle(document.documentElement).getPropertyValue(e);return i?i.trim():t&&t.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(t)||n:t&&nk.test(t)?YJ(t):t||n},U1e=n=>{let e=nk.exec(n);if(!e)return[,];let[,t,i]=e;return[t,i]},gP,G1e=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,ZJ=n=>{gP||(gP=$f?new RegExp(`(${Object.keys($f).join("|")})(?!\\w)`,"g"):/^\b$/);let e=n.output.map(r=>gl(r).replace(nk,YJ).replace(B1e,TV).replace(gP,TV)),t=e.map(r=>r.match(r$).map(Number)),i=t[0].map((r,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(r=>US({...n,output:r}));return r=>{var l;let o=!CV.test(e[0])&&((l=e.find(u=>CV.test(u)))==null?void 0:l.replace(r$,"")),a=0;return e[0].replace(r$,()=>`${i[a++](r)}${o||""}`).replace(F1e,G1e)}},mF="react-spring: ",qJ=n=>{let e=n,t=!1;if(typeof e!="function")throw new TypeError(`${mF}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},W1e=qJ(console.warn);function z1e(){W1e(`${mF}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Q1e=qJ(console.warn);function V1e(){Q1e(`${mF}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ik(n){return yt.str(n)&&(n[0]=="#"||/\d/.test(n)||!dF()&&nk.test(n)||n in($f||{}))}var gF=dF()?q.useEffect:q.useLayoutEffect,H1e=()=>{let n=q.useRef(!1);return gF(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function JJ(){let n=q.useState()[1],e=H1e();return()=>{e.current&&n(Math.random())}}function X1e(n,e){let[t]=q.useState(()=>({inputs:e,result:n()})),i=q.useRef(),r=i.current,o=r;return o?e&&o.inputs&&j1e(e,o.inputs)||(o={inputs:e,result:n()}):o=t,q.useEffect(()=>{i.current=o,r==t&&(t.inputs=t.result=void 0)},[o]),o.result}function j1e(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var KJ=n=>q.useEffect(n,Y1e),Y1e=[];function AV(n){let e=q.useRef();return q.useEffect(()=>{e.current=n}),e.current}var GS=Symbol.for("Animated:node"),Z1e=n=>!!n&&n[GS]===n,uu=n=>n&&n[GS],_F=(n,e)=>g1e(n,GS,e),rk=n=>n&&n[GS]&&n[GS].getPayload(),eK=class{constructor(){Ct(this,"payload");_F(this,this)}getPayload(){return this.payload||[]}},ZT=class extends eK{constructor(e){super();Ct(this,"done",!0);Ct(this,"elapsedTime");Ct(this,"lastPosition");Ct(this,"lastVelocity");Ct(this,"v0");Ct(this,"durationProgress",0);this._value=e,yt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new ZT(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return yt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,yt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},WS=class extends ZT{constructor(e){super(0);Ct(this,"_string",null);Ct(this,"_toString");this._toString=US({output:[e,e]})}static create(e){return new WS(e)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(e){if(yt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=US({output:[this.getValue(),e]})),this._value=0,super.reset()}},pC={dependencies:null},OF=class extends eK{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){let e={};return ed(this.source,(t,i)=>{Z1e(t)?e[i]=t.getValue(n):hu(t)?e[i]=gl(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&ni(this.payload,n=>n.reset())}_makePayload(n){if(n){let e=new Set;return ed(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){pC.dependencies&&hu(n)&&pC.dependencies.add(n);let e=rk(n);e&&ni(e,t=>this.add(t))}},tK=class extends OF{constructor(n){super(n)}static create(n){return new tK(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){let e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(q1e)),!0)}};function q1e(n){return(ik(n)?WS:ZT).create(n)}function xL(n){let e=uu(n);return e?e.constructor:yt.arr(n)?tK:ik(n)?WS:ZT}var kV=(n,e)=>{let t=!yt.fun(n)||n.prototype&&n.prototype.isReactComponent;return q.forwardRef((i,r)=>{let o=q.useRef(null),a=t&&q.useCallback(v=>{o.current=ewe(r,v)},[r]),[l,u]=K1e(i,e),h=JJ(),d=()=>{let v=o.current;t&&!v||(v?e.applyAnimatedValues(v,l.getValue(!0)):!1)===!1&&h()},p=new J1e(d,u),m=q.useRef();gF(()=>(m.current=p,ni(u,v=>YT(v,p)),()=>{m.current&&(ni(m.current.deps,v=>fC(v,m.current)),mn.cancel(m.current.update))})),q.useEffect(d,[]),KJ(()=>()=>{let v=m.current;ni(v.deps,y=>fC(y,v))});let g=e.getComponentProps(l.getValue());return q.createElement(n,{...g,ref:a})})},J1e=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&mn.write(this.update)}};function K1e(n,e){let t=new Set;return pC.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new OF(n),pC.dependencies=null,[n,t]}function ewe(n,e){return n&&(yt.fun(n)?n(e):n.current=e),e}var IV=Symbol.for("AnimatedComponent"),twe=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new OF(r),getComponentProps:i=r=>r}={})=>{let r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},o=a=>{let l=RV(a)||"Anonymous";return yt.str(a)?a=o[a]||(o[a]=kV(a,r)):a=a[IV]||(a[IV]=kV(a,r)),a.displayName=`Animated(${l})`,a};return ed(n,(a,l)=>{yt.arr(n)&&(l=RV(a)),o[l]=o(a)}),{animated:o}},RV=n=>yt.str(n)?n:n&&yt.str(n.displayName)?n.displayName:yt.fun(n)&&n.name||null;function hm(n,...e){return yt.fun(n)?n(...e):n}var Hb=(n,e)=>n===!0||!!(e&&n&&(yt.fun(n)?n(e):xl(n).includes(e))),nK=(n,e)=>yt.obj(n)?e&&n[e]:n,iK=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,nwe=n=>n,vF=(n,e=nwe)=>{let t=iwe;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));let i={};for(let r of t){let o=e(n[r],r);yt.und(o)||(i[r]=o)}return i},iwe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],rwe={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function swe(n){let e={},t=0;if(ed(n,(i,r)=>{rwe[r]||(e[r]=i,t++)}),t)return e}function rK(n){let e=swe(n);if(e){let t={to:e};return ed(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function zS(n){return n=gl(n),yt.arr(n)?n.map(zS):ik(n)?Tc.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function owe(n){for(let e in n)return!0;return!1}function $L(n){return yt.fun(n)||yt.arr(n)&&yt.obj(n[0])}function awe(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function lwe(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var cwe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},CL={...cwe.default,mass:1,damping:1,easing:P1e.linear,clamp:!1},uwe=class{constructor(){Ct(this,"tension");Ct(this,"friction");Ct(this,"frequency");Ct(this,"damping");Ct(this,"mass");Ct(this,"velocity",0);Ct(this,"restVelocity");Ct(this,"precision");Ct(this,"progress");Ct(this,"duration");Ct(this,"easing");Ct(this,"clamp");Ct(this,"bounce");Ct(this,"decay");Ct(this,"round");Object.assign(this,CL)}};function hwe(n,e,t){t&&(t={...t},MV(t,e),e={...t,...e}),MV(n,e),Object.assign(n,e);for(let a in CL)n[a]==null&&(n[a]=CL[a]);let{mass:i,frequency:r,damping:o}=n;return yt.und(r)||(r<.01&&(r=.01),o<0&&(o=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*o*i/r),n}function MV(n,e){if(!yt.und(e.decay))n.duration=void 0;else{let t=!yt.und(e.tension)||!yt.und(e.friction);(t||!yt.und(e.frequency)||!yt.und(e.damping)||!yt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var PV=[],dwe=class{constructor(){Ct(this,"changed",!1);Ct(this,"values",PV);Ct(this,"toValues",null);Ct(this,"fromValues",PV);Ct(this,"to");Ct(this,"from");Ct(this,"config",new uwe);Ct(this,"immediate",!1)}};function sK(n,{key:e,props:t,defaultProps:i,state:r,actions:o}){return new Promise((a,l)=>{let u,h,d=Hb(t.cancel??(i==null?void 0:i.cancel),e);if(d)g();else{yt.und(t.pause)||(r.paused=Hb(t.pause,e));let v=i==null?void 0:i.pause;v!==!0&&(v=r.paused||Hb(v,e)),u=hm(t.delay||0,e),v?(r.resumeQueue.add(m),o.pause()):(o.resume(),m())}function p(){r.resumeQueue.add(m),r.timeouts.delete(h),h.cancel(),u=h.time-mn.now()}function m(){u>0&&!Tc.skipAnimation?(r.delayed=!0,h=mn.setTimeout(g,u),r.pauseQueue.add(p),r.timeouts.add(h)):g()}function g(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(p),r.timeouts.delete(h),n<=(r.cancelId||0)&&(d=!0);try{o.start({...t,callId:n,cancel:d},a)}catch(v){l(v)}}})}var yF=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?X0(n.get()):e.every(t=>t.noop)?oK(n.get()):hc(n.get(),e.every(t=>t.finished)),oK=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),hc=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),X0=n=>({value:n,cancelled:!0,finished:!1});function aK(n,e,t,i){let{callId:r,parentId:o,onRest:a}=e,{asyncTo:l,promise:u}=t;return!o&&n===l&&!e.reset?u:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;let h=vF(e,(S,T)=>T==="onRest"?void 0:S),d,p,m=new Promise((S,T)=>(d=S,p=T)),g=S=>{let T=r<=(t.cancelId||0)&&X0(i)||r!==t.asyncId&&hc(i,!1);if(T)throw S.result=T,p(S),S},v=(S,T)=>{let w=new DV,E=new LV;return(async()=>{if(Tc.skipAnimation)throw QS(t),E.result=hc(i,!1),p(E),E;g(w);let $=yt.obj(S)?{...S}:{...T,to:S};$.parentId=r,ed(h,(I,D)=>{yt.und($[D])&&($[D]=I)});let A=await i.start($);return g(w),t.paused&&await new Promise(I=>{t.resumeQueue.add(I)}),A})()},y;if(Tc.skipAnimation)return QS(t),hc(i,!1);try{let S;yt.arr(n)?S=(async T=>{for(let w of T)await v(w)})(n):S=Promise.resolve(n(v,i.stop.bind(i))),await Promise.all([S.then(d),m]),y=hc(i.get(),!0,!1)}catch(S){if(S instanceof DV)y=S.result;else if(S instanceof LV)y=S.result;else throw S}finally{r==t.asyncId&&(t.asyncId=o,t.asyncTo=o?l:void 0,t.promise=o?u:void 0)}return yt.fun(a)&&mn.batchedUpdates(()=>{a(y,i,i.item)}),y})()}function QS(n,e){Qb(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var DV=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");Ct(this,"result")}},LV=class extends Error{constructor(){super("SkipAnimationSignal");Ct(this,"result")}},AL=n=>n instanceof bF,fwe=1,bF=class extends L1e{constructor(){super(...arguments);Ct(this,"id",fwe++);Ct(this,"_priority",0)}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=uu(this);return e&&e.getValue()}to(...e){return Tc.to(this,e)}interpolate(...e){return z1e(),Tc.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){dC(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||ek.sort(this),dC(this,{type:"priority",parent:this,priority:e})}},lg=Symbol.for("SpringPhase"),lK=1,kL=2,IL=4,_P=n=>(n[lg]&lK)>0,jd=n=>(n[lg]&kL)>0,eb=n=>(n[lg]&IL)>0,NV=(n,e)=>e?n[lg]|=kL|lK:n[lg]&=~kL,BV=(n,e)=>e?n[lg]|=IL:n[lg]&=~IL,pwe=class extends bF{constructor(e,t){super();Ct(this,"key");Ct(this,"animation",new dwe);Ct(this,"queue");Ct(this,"defaultProps",{});Ct(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Ct(this,"_pendingCalls",new Set);Ct(this,"_lastCallId",0);Ct(this,"_lastToId",0);Ct(this,"_memoizedDuration",0);if(!yt.und(e)||!yt.und(t)){let i=yt.obj(e)?{...e}:{...t,from:e};yt.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(jd(this)||this._state.asyncTo)||eb(this)}get goal(){return gl(this.animation.to)}get velocity(){let e=uu(this);return e instanceof ZT?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _P(this)}get isAnimating(){return jd(this)}get isPaused(){return eb(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1,r=this.animation,{config:o,toValues:a}=r,l=rk(r.to);!l&&hu(r.to)&&(a=xl(gl(r.to))),r.values.forEach((d,p)=>{if(d.done)return;let m=d.constructor==WS?1:l?l[p].lastPosition:a[p],g=r.immediate,v=m;if(!g){if(v=d.lastPosition,o.tension<=0){d.done=!0;return}let y=d.elapsedTime+=e,S=r.fromValues[p],T=d.v0!=null?d.v0:d.v0=yt.arr(o.velocity)?o.velocity[p]:o.velocity,w,E=o.precision||(S==m?.005:Math.min(1,Math.abs(m-S)*.001));if(yt.und(o.duration))if(o.decay){let $=o.decay===!0?.998:o.decay,A=Math.exp(-(1-$)*y);v=S+T/(1-$)*(1-A),g=Math.abs(d.lastPosition-v)<=E,w=T*A}else{w=d.lastVelocity==null?T:d.lastVelocity;let $=o.restVelocity||E/10,A=o.clamp?0:o.bounce,I=!yt.und(A),D=S==m?d.v0>0:S<m,R,B=!1,G=1,Z=Math.ceil(e/G);for(let N=0;N<Z&&(R=Math.abs(w)>$,!(!R&&(g=Math.abs(m-v)<=E,g)));++N){I&&(B=v==m||v>m==D,B&&(w=-w*A,v=m));let H=-o.tension*1e-6*(v-m),M=-o.friction*.001*w,K=(H+M)/o.mass;w=w+K*G,v=v+w*G}}else{let $=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,d.durationProgress>0&&(d.elapsedTime=o.duration*d.durationProgress,y=d.elapsedTime+=e)),$=(o.progress||0)+y/this._memoizedDuration,$=$>1?1:$<0?0:$,d.durationProgress=$),v=S+o.easing($)*(m-S),w=(v-d.lastPosition)/e,g=$==1}d.lastVelocity=w,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),g=!0)}l&&!l[p].done&&(g=!1),g?d.done=!0:t=!1,d.setValue(v,o.round)&&(i=!0)});let u=uu(this),h=u.getValue();if(t){let d=gl(r.to);(h!==d||i)&&!o.decay?(u.setValue(d),this._onChange(d)):i&&o.decay&&this._onChange(h),this._stop()}else i&&this._onChange(h)}set(e){return mn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(jd(this)){let{to:e,config:t}=this.animation;mn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return yt.und(e)?(i=this.queue||[],this.queue=[]):i=[yt.obj(e)?e:{...t,to:e}],Promise.all(i.map(r=>this._update(r))).then(r=>yF(this,r))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),QS(this._state,e&&this._lastCallId),mn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:i,from:r}=e;i=yt.obj(i)?i[t]:i,(i==null||$L(i))&&(i=void 0),r=yt.obj(r)?r[t]:r,r==null&&(r=void 0);let o={to:i,from:r};return _P(this)||(e.reverse&&([i,r]=[r,i]),r=gl(r),yt.und(r)?uu(this)||this._set(i):this._set(r)),o}_update({...e},t){let{key:i,defaultProps:r}=this;e.default&&Object.assign(r,vF(e,(l,u)=>/^on/.test(u)?nK(l,i):l)),UV(this,e,"onProps"),nb(this,"onProps",e,this);let o=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let a=this._state;return sK(++this._lastCallId,{key:i,props:e,defaultProps:r,state:a,actions:{pause:()=>{eb(this)||(BV(this,!0),_b(a.pauseQueue),nb(this,"onPause",hc(this,tb(this,this.animation.to)),this))},resume:()=>{eb(this)&&(BV(this,!1),jd(this)&&this._resume(),_b(a.resumeQueue),nb(this,"onResume",hc(this,tb(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(e.loop&&l.finished&&!(t&&l.noop)){let u=cK(e);if(u)return this._update(u,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(X0(this));let r=!yt.und(e.to),o=!yt.und(e.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(X0(this));let{key:a,defaultProps:l,animation:u}=this,{to:h,from:d}=u,{to:p=h,from:m=d}=e;o&&!r&&(!t.default||yt.und(p))&&(p=m),t.reverse&&([p,m]=[m,p]);let g=!$h(m,d);g&&(u.from=m),m=gl(m);let v=!$h(p,h);v&&this._focus(p);let y=$L(t.to),{config:S}=u,{decay:T,velocity:w}=S;(r||o)&&(S.velocity=0),t.config&&!y&&hwe(S,hm(t.config,a),t.config!==l.config?hm(l.config,a):void 0);let E=uu(this);if(!E||yt.und(p))return i(hc(this,!0));let $=yt.und(t.reset)?o&&!t.default:!yt.und(m)&&Hb(t.reset,a),A=$?m:this.get(),I=zS(p),D=yt.num(I)||yt.arr(I)||ik(I),R=!y&&(!D||Hb(l.immediate||t.immediate,a));if(v){let N=xL(p);if(N!==E.constructor)if(R)E=this._set(I);else throw Error(`Cannot animate between ${E.constructor.name} and ${N.name}, as the "to" prop suggests`)}let B=E.constructor,G=hu(p),Z=!1;if(!G){let N=$||!_P(this)&&g;(v||N)&&(Z=$h(zS(A),I),G=!Z),(!$h(u.immediate,R)&&!R||!$h(S.decay,T)||!$h(S.velocity,w))&&(G=!0)}if(Z&&jd(this)&&(u.changed&&!$?G=!0:G||this._stop(h)),!y&&((G||hu(h))&&(u.values=E.getPayload(),u.toValues=hu(p)?null:B==WS?[1]:xl(I)),u.immediate!=R&&(u.immediate=R,!R&&!$&&this._set(h)),G)){let{onRest:N}=u;ni(gwe,M=>UV(this,t,M));let H=hc(this,tb(this,h));_b(this._pendingCalls,H),this._pendingCalls.add(i),u.changed&&mn.batchedUpdates(()=>{var M;u.changed=!$,N==null||N(H,this),$?hm(l.onRest,H):(M=u.onStart)==null||M.call(u,H,this)})}$&&this._set(A),y?i(aK(t.to,t,this._state,this)):G?this._start():jd(this)&&!v?this._pendingCalls.add(i):i(oK(A))}_focus(e){let t=this.animation;e!==t.to&&($V(this)&&this._detach(),t.to=e,$V(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;hu(t)&&(YT(t,this),AL(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;hu(e)&&fC(e,this)}_set(e,t=!0){let i=gl(e);if(!yt.und(i)){let r=uu(this);if(!r||!$h(i,r.getValue())){let o=xL(i);!r||r.constructor!=o?_F(this,o.create(i)):r.setValue(i),r&&mn.batchedUpdates(()=>{this._onChange(i,t)})}}return uu(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,nb(this,"onStart",hc(this,tb(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),hm(this.animation.onChange,e,this)),hm(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;uu(this).reset(gl(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),jd(this)||(NV(this,!0),eb(this)||this._resume())}_resume(){Tc.skipAnimation?this.finish():ek.start(this)}_stop(e,t){if(jd(this)){NV(this,!1);let i=this.animation;ni(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),dC(this,{type:"idle",parent:this});let r=t?X0(this.get()):hc(this.get(),tb(this,e??i.to));_b(this._pendingCalls,r),i.changed&&(i.changed=!1,nb(this,"onRest",r,this))}}};function tb(n,e){let t=zS(e),i=zS(n.get());return $h(i,t)}function cK(n,e=n.loop,t=n.to){let i=hm(e);if(i){let r=i!==!0&&rK(i),o=(r||n).reverse,a=!r||r.reset;return VS({...n,loop:e,default:!1,pause:void 0,to:!o||$L(t)?t:void 0,from:a?n.from:void 0,reset:a,...r})}}function VS(n){let{to:e,from:t}=n=rK(n),i=new Set;return yt.obj(e)&&FV(e,i),yt.obj(t)&&FV(t,i),n.keys=i.size?Array.from(i):null,n}function mwe(n){let e=VS(n);return yt.und(e.default)&&(e.default=vF(e)),e}function FV(n,e){ed(n,(t,i)=>t!=null&&e.add(i))}var gwe=["onStart","onRest","onChange","onPause","onResume"];function UV(n,e,t){n.animation[t]=e[t]!==iK(e,t)?nK(e[t],n.key):void 0}function nb(n,e,...t){var i,r,o,a;(r=(i=n.animation)[e])==null||r.call(i,...t),(a=(o=n.defaultProps)[e])==null||a.call(o,...t)}var _we=["onStart","onChange","onRest"],Owe=1,vwe=class{constructor(n,e){Ct(this,"id",Owe++);Ct(this,"springs",{});Ct(this,"queue",[]);Ct(this,"ref");Ct(this,"_flush");Ct(this,"_initialProps");Ct(this,"_lastAsyncId",0);Ct(this,"_active",new Set);Ct(this,"_changed",new Set);Ct(this,"_started",!1);Ct(this,"_item");Ct(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Ct(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){let n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(let e in n){let t=n[e];yt.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(VS(n)),this}start(n){let{queue:e}=this;return n?e=xl(n).map(VS):this.queue=[],this._flush?this._flush(this,e):(pK(this,e),RL(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){let t=this.springs;ni(xl(e),i=>t[i].stop(!!n))}else QS(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(yt.und(n))this.start({pause:!0});else{let e=this.springs;ni(xl(n),t=>e[t].pause())}return this}resume(n){if(yt.und(n))this.start({pause:!1});else{let e=this.springs;ni(xl(n),t=>e[t].resume())}return this}each(n){ed(this.springs,n)}_onFrame(){let{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Qb(n,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));let o=!i&&this._started,a=r||o&&t.size?this.get():null;r&&e.size&&Qb(e,([l,u])=>{u.value=a,l(u,this,this._item)}),o&&(this._started=!1,Qb(t,([l,u])=>{u.value=a,l(u,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;mn.onFrame(this._onFrame)}};function RL(n,e){return Promise.all(e.map(t=>uK(n,t))).then(t=>yF(n,t))}async function uK(n,e,t){let{keys:i,to:r,from:o,loop:a,onRest:l,onResolve:u}=e,h=yt.obj(e.default)&&e.default;a&&(e.loop=!1),r===!1&&(e.to=null),o===!1&&(e.from=null);let d=yt.arr(r)||yt.fun(r)?r:void 0;d?(e.to=void 0,e.onRest=void 0,h&&(h.onRest=void 0)):ni(_we,y=>{let S=e[y];if(yt.fun(S)){let T=n._events[y];e[y]=({finished:w,cancelled:E})=>{let $=T.get(S);$?(w||($.finished=!1),E&&($.cancelled=!0)):T.set(S,{value:null,finished:w||!1,cancelled:E||!1})},h&&(h[y]=e[y])}});let p=n._state;e.pause===!p.paused?(p.paused=e.pause,_b(e.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(e.pause=!0);let m=(i||Object.keys(n.springs)).map(y=>n.springs[y].start(e)),g=e.cancel===!0||iK(e,"cancel")===!0;(d||g&&p.asyncId)&&m.push(sK(++n._lastAsyncId,{props:e,state:p,actions:{pause:wL,resume:wL,start(y,S){g?(QS(p,n._lastAsyncId),S(X0(n))):(y.onRest=l,S(aK(d,y,p,n)))}}})),p.paused&&await new Promise(y=>{p.resumeQueue.add(y)});let v=yF(n,await Promise.all(m));if(a&&v.finished&&!(t&&v.noop)){let y=cK(e,a,r);if(y)return pK(n,[y]),uK(n,y,!0)}return u&&mn.batchedUpdates(()=>u(v,n,n.item)),v}function GV(n,e){let t={...n.springs};return e&&ni(xl(e),i=>{yt.und(i.keys)&&(i=VS(i)),yt.obj(i.to)||(i={...i,to:void 0}),fK(t,i,r=>dK(r))}),hK(n,t),t}function hK(n,e){ed(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,YT(t,n))})}function dK(n,e){let t=new pwe;return t.key=n,e&&YT(t,e),t}function fK(n,e,t){e.keys&&ni(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function pK(n,e){ni(e,t=>{fK(n.springs,t,i=>dK(i,n))})}var sk=({children:n,...e})=>{let t=q.useContext(mC),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=X1e(()=>({pause:i,immediate:r}),[i,r]);let{Provider:o}=mC;return q.createElement(o,{value:e},n)},mC=ywe(sk,{});sk.Provider=mC.Provider;sk.Consumer=mC.Consumer;function ywe(n,e){return Object.assign(n,q.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var bwe=()=>{let n=[],e=function(i){V1e();let r=[];return ni(n,(o,a)=>{if(yt.und(i))r.push(o.start());else{let l=t(i,o,a);l&&r.push(o.start(l))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){let r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return ni(n,i=>i.pause(...arguments)),this},e.resume=function(){return ni(n,i=>i.resume(...arguments)),this},e.set=function(i){ni(n,(r,o)=>{let a=yt.fun(i)?i(o,r):i;a&&r.set(a)})},e.start=function(i){let r=[];return ni(n,(o,a)=>{if(yt.und(i))r.push(o.start());else{let l=this._getProps(i,o,a);l&&r.push(o.start(l))}}),r},e.stop=function(){return ni(n,i=>i.stop(...arguments)),this},e.update=function(i){return ni(n,(r,o)=>r.update(this._getProps(i,r,o))),this};let t=function(i,r,o){return yt.fun(i)?i(o,r):i};return e._getProps=t,e};function Swe(n,e,t){let i=yt.fun(e)&&e;i&&!t&&(t=[]);let r=q.useMemo(()=>i||arguments.length==3?bwe():void 0,[]),o=q.useRef(0),a=JJ(),l=q.useMemo(()=>({ctrls:[],queue:[],flush(T,w){let E=GV(T,w);return o.current>0&&!l.queue.length&&!Object.keys(E).some($=>!T.springs[$])?RL(T,w):new Promise($=>{hK(T,E),l.queue.push(()=>{$(RL(T,w))}),a()})}}),[]),u=q.useRef([...l.ctrls]),h=[],d=AV(n)||0;q.useMemo(()=>{ni(u.current.slice(n,d),T=>{awe(T,r),T.stop(!0)}),u.current.length=n,p(d,n)},[n]),q.useMemo(()=>{p(0,Math.min(d,n))},t);function p(T,w){for(let E=T;E<w;E++){let $=u.current[E]||(u.current[E]=new vwe(null,l.flush)),A=i?i(E,$):e[E];A&&(h[E]=mwe(A))}}let m=u.current.map((T,w)=>GV(T,h[w])),g=q.useContext(sk),v=AV(g),y=g!==v&&owe(g);gF(()=>{o.current++,l.ctrls=u.current;let{queue:T}=l;T.length&&(l.queue=[],ni(T,w=>w())),ni(u.current,(w,E)=>{r==null||r.add(w),y&&w.start({default:g});let $=h[E];$&&(lwe(w,$.ref),w.ref?w.queue.push($):w.start($))})}),KJ(()=>()=>{ni(l.ctrls,T=>T.stop(!0))});let S=m.map(T=>({...T}));return r?[S,r]:S}function Twe(n,e){let t=yt.fun(n),[[i],r]=Swe(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var wwe=class extends bF{constructor(e,t){super();Ct(this,"key");Ct(this,"idle",!0);Ct(this,"calc");Ct(this,"_active",new Set);this.source=e,this.calc=US(...t);let i=this._get(),r=xL(i);_F(this,r.create(i))}advance(e){let t=this._get(),i=this.get();$h(t,i)||(uu(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&WV(this._active)&&OP(this)}_get(){let e=yt.arr(this.source)?this.source.map(gl):xl(gl(this.source));return this.calc(...e)}_start(){this.idle&&!WV(this._active)&&(this.idle=!1,ni(rk(this),e=>{e.done=!1}),Tc.skipAnimation?(mn.batchedUpdates(()=>this.advance()),OP(this)):ek.start(this))}_attach(){let e=1;ni(xl(this.source),t=>{hu(t)&&YT(t,this),AL(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ni(xl(this.source),e=>{hu(e)&&fC(e,this)}),this._active.clear(),OP(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=xl(this.source).reduce((t,i)=>Math.max(t,(AL(i)?i.priority:0)+1),0))}};function Ewe(n){return n.idle!==!1}function WV(n){return!n.size||Array.from(n).every(Ewe)}function OP(n){n.idle||(n.idle=!0,ni(rk(n),e=>{e.done=!0}),dC(n,{type:"idle",parent:n}))}Tc.assign({createStringInterpolator:ZJ,to:(n,e)=>new wwe(n,e)});var xwe=["primitive"].concat(Object.keys(XY).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Tc.assign({createStringInterpolator:ZJ,colors:b1e,frameLoop:"demand"});Pye(()=>{mn.advance()});var $we=twe(xwe,{applyAnimatedValues:r0}),Cwe=$we.animated;const Awe=({id:n,point:e})=>{const[t,i]=q.useState(void 0),r=la(g=>g.selectedControlPoint),o=la(g=>g.setSelectedControlPoint),a=la(g=>g.updateBezierControlPoint),{size:l,viewport:u,camera:h}=Bi();u.aspect;const[d,p]=Twe(()=>({scale:[1,1,1],position:[e.x,e.y,e.z],config:{mass:1,tension:0,friction:18}})),m=dJ({onDrag:({xy:[g,v]})=>{if(!t)return;const y=new UA;y.setFromCamera({x:(g-u.left)/l.width*2-1,y:-((v-u.top)/l.height)*2+1},h);const S=new Ah;S.setFromNormalAndCoplanarPoint(h.getWorldDirection(new he(0,0,1)),t);const T=new he;y.ray.intersectPlane(S,T),p({position:T.toArray()}),a(n,T.clone())},onHover:({hovering:g})=>{p({scale:g?[1.2,1.2,1.2]:[1,1,1]})},onDragStart:()=>{o(n);const[g,v,y]=d.position.get();i(new he(g,v,y))},onDragEnd:()=>{i(void 0),o(void 0)}});return se(Cwe.mesh,{...d,...m(),castShadow:!0,children:dt(NJ,{scale:.2,children:[se("meshBasicMaterial",{color:r===n?"#FF00FF":"#000000"}),se("pointLight",{color:16777215,intensity:1})]})})},kwe=()=>{const n=la(o=>o.bezierControlPoints),e=la(o=>o.bezierLinePoints),t=la(o=>o.selectedControlPoint),i=n.length,r=q.useRef();return vg(({clock:o})=>{var u;const a=o.getElapsedTime(),l=eJ(n,a%i/i);(u=r.current)==null||u.position.set(l.x,l.y,l.z)}),dt(Fr,{children:[se("color",{attach:"background",args:["black"]}),se(RJ,{maxPolarAngle:Math.PI*(1/2-1/10),minPolarAngle:0,maxDistance:20,enableRotate:t===void 0}),se(PJ,{alignment:"bottom-right",margin:[80,80],children:se(DJ,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),se(LJ,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),se("directionalLight",{color:"blue",position:[0,5,5]}),se(d1e,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25}),dt("group",{children:[n.map((o,a)=>se(Awe,{id:a,point:o},a)),se("group",{ref:r,children:se(BJ,{robotId:"",renderBoundingBox:!1})}),se(rTe,{points:e,closed:!1,curveType:"centripetal",tension:.5,color:"black",lineWidth:3,dashed:!0,dashSize:.5,dashScale:5})]})]})},Iwe=()=>{const[n,e]=q.useState([]),t=zh(u=>u.curveEditorOpen),i=zh(u=>u.toggleCurveEditor),r=la(u=>u.bezierControlPoints),o=la(u=>u.addBezierControlPoint),a=la(u=>u.selectedControlPoint),l=la(u=>u.bezierControlPoints.length);return q.useEffect(()=>{e(r)},[a,l]),dt(Lr,{show:t,onClose:i,className:"!w-full",size:"w-full h-5/6",children:[se(Lr.Header,{children:"Curve Editor"}),se(Lr.Body,{className:"h-[80vh]",children:dt("div",{className:"flex h-full flex-row",children:[dt("div",{className:"w-1/4",children:[se(Vs,{icon:uve,text:"Add Point",onClick:()=>o(new he(1,1,1))}),se(lbe,{points:n}),se("div",{className:"flex flex-col gap-2"})]}),se("div",{className:"flex h-full flex-grow",children:se(Jq,{children:se(kwe,{})})})]})}),se(Lr.Footer,{})]})},Rwe=()=>{const n=zh(u=>u.settingsModalOpen),e=zh(u=>u.toggleSettingsModal),t=jt(u=>u.resetProject),i=jt(u=>u.projectName),r=jt(u=>u.setProjectName),o=zh(u=>u.toggleCurveEditor),[a,l]=q.useState(!1);return dt(Fr,{children:[dt(Lr,{show:n,onClose:e,children:[se(Lr.Header,{children:"Settings"}),se(Lr.Body,{children:dt(jy.Group,{style:"default",children:[dt(jy.Item,{active:!0,title:"Project",children:["Profile content",dt("div",{children:[se("div",{className:"mb-2 block",children:se(e$,{value:"Project Name"})}),se(xf,{value:i,onChange:u=>r(u.target.value)})]})]}),se(jy.Item,{title:"Blocks",children:"Block Settings"}),se(jy.Item,{title:"Preferences",children:"User Preferences"}),se(jy.Item,{title:"Utilities",children:se(Mo,{onClick:o,children:"Curve Editor"})})]})}),dt(Lr.Footer,{children:[se(Eq,{onClick:e}),se(Vs,{color:"warning",text:"Reset Project",icon:rve,onClick:()=>l(!0)})]})]}),se(uye,{header:"Confirm Reset Project",open:a,onCancel:()=>l(!1),onConfirm:()=>{t(),l(!1),e()},children:"Are you sure?"}),se(Iwe,{})]})},Mwe=()=>{const[n,e]=q.useState(!1),t=jt(u=>u.saveProject),i=jt(u=>u.exportToROS),r=jt(u=>u.loadProject),o=zh(u=>u.toggleSettingsModal),a=jt(u=>u.projectName),l=jt(u=>u.setProjectName);return dt(Fr,{children:[dt("div",{className:"flex items-center gap-5 border-b-2 border-black p-4",children:[se(x3,{className:"text-4xl font-extrabold",text:a,updateText:u=>{l(u!==""?u:"New Robart Project")}}),dt("div",{className:"flex flex-grow justify-end gap-3",children:[se(Vs,{icon:qz,text:"Export To ROS",onClick:()=>i("test.txt")}),se(Vs,{icon:qz,text:"Save Project",onClick:()=>t()}),se(Vs,{icon:ave,text:"Load Project",onClick:()=>e(!0)}),se(Vs,{icon:ove,text:"Settings",onClick:()=>o()})]})]}),se(cye,{header:"Load Project",open:n,onClose:()=>e(!1),onFileUpload:r}),se(Rwe,{})]})},mK=1024;let Pwe=0,vP=class{constructor(e,t){this.from=e,this.to=t}};class An{constructor(e={}){this.id=Pwe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=fa.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}An.closedBy=new An({deserialize:n=>n.split(" ")});An.openedBy=new An({deserialize:n=>n.split(" ")});An.group=new An({deserialize:n=>n.split(" ")});An.contextHash=new An({perNode:!0});An.lookAhead=new An({perNode:!0});An.mounted=new An({perNode:!0});const Dwe=Object.create(null);class fa{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Dwe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new fa(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(An.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(An.group),o=-1;o<(r?r.length:0);o++){let a=t[o<0?i.name:r[o]];if(a)return a}}}}fa.none=new fa("",Object.create(null),0,8);class SF{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let a=o(i);a&&(r||(r=Object.assign({},i.props)),r[a[0].id]=a[1])}t.push(r?new fa(i.name,r,i.id,i.flags):i)}return new SF(t)}}const sx=new WeakMap,zV=new WeakMap;var Yr;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Yr||(Yr={}));class Nr{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,l]of o)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=this.prop(An.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new OC(this.topNode,e)}cursorAt(e,t=0,i=0){let r=sx.get(this)||this.topNode,o=new OC(r);return o.moveTo(e,t),sx.set(this,o._tree),o}get topNode(){return new yc(this,0,0,null)}resolve(e,t=0){let i=yO(sx.get(this)||this.topNode,e,t,!1);return sx.set(this,i),i}resolveInner(e,t=0){let i=yO(zV.get(this)||this.topNode,e,t,!0);return zV.set(this,i),i}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e;for(let a=this.cursor((e.mode||0)|Yr.IncludeAnonymous);;){let l=!1;if(a.from<=o&&a.to>=r&&(a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;l=!0}for(;l&&i&&!a.type.isAnonymous&&i(a),!a.nextSibling();){if(!a.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:EF(fa.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Nr(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Nr(fa.none,t,i,r)))}static build(e){return Nwe(e)}}Nr.empty=new Nr(fa.none,[],[],0);class TF{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new TF(this.buffer,this.index)}}class bg{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return fa.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,i,r,o){let{buffer:a}=this,l=-1;for(let u=e;u!=t&&!(gK(o,r,a[u+1],a[u+2])&&(l=u,i>0));u=a[u+3]);return l}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),a=0;for(let l=e,u=0;l<t;){o[u++]=r[l++],o[u++]=r[l++]-i;let h=o[u++]=r[l++]-i;o[u++]=r[l++]-e,a=Math.max(a,h)}return new bg(o,a,this.set)}}function gK(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function _K(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function yO(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof yc&&n.index<0?null:n.parent;if(!a)return n;n=a}let o=i?0:Yr.IgnoreOverlays;if(i)for(let a=n,l=a.parent;l;a=l,l=a.parent)a instanceof yc&&a.index<0&&((r=l.enter(e,t,o))===null||r===void 0?void 0:r.from)!=a.from&&(n=l);for(;;){let a=n.enter(e,t,o);if(!a)return n;n=a}}class yc{constructor(e,t,i,r){this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let a=this;;){for(let{children:l,positions:u}=a._tree,h=t>0?l.length:-1;e!=h;e+=t){let d=l[e],p=u[e]+a.from;if(gK(r,i,p,p+d.length)){if(d instanceof bg){if(o&Yr.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,t,i-p,r);if(m>-1)return new vu(new Lwe(a,d,e,p),null,m)}else if(o&Yr.IncludeAnonymous||!d.type.isAnonymous||wF(d)){let m;if(!(o&Yr.IgnoreMounts)&&d.props&&(m=d.prop(An.mounted))&&!m.overlay)return new yc(m.tree,p,e,a);let g=new yc(d,p,e,a);return o&Yr.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?d.children.length-1:0,t,i,r)}}}if(o&Yr.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Yr.IgnoreOverlays)&&(r=this._tree.prop(An.mounted))&&r.overlay){let o=e-this.from;for(let{from:a,to:l}of r.overlay)if((t>0?a<=o:a<o)&&(t<0?l>=o:l>o))return new yc(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new OC(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return yO(this,e,t,!1)}resolveInner(e,t=0){return yO(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _K(this,e)}getChild(e,t=null,i=null){let r=gC(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return gC(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return _C(this,e)}}function gC(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function _C(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Lwe{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class vu{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new vu(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yr.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new vu(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vu(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new vu(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new OC(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let a=i.buffer[this.index+1];e.push(i.slice(r,o,a)),t.push(0)}return new Nr(this.type,e,t,this.to-this.from)}resolve(e,t=0){return yO(this,e,t,!1)}resolveInner(e,t=0){return yO(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _K(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let r=gC(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return gC(this,e,t,i)}get node(){return this}matchContext(e){return _C(this,e)}}class OC{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof yc)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof yc?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Yr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,a=e<0?-1:i._tree.children.length;o!=a;o+=e){let l=i._tree.children[o];if(this.mode&Yr.IncludeAnonymous||l instanceof bg||!l.type.isAnonymous||wF(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;t=a,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new vu(this.buffer,t,this.stack[r]);return this.bufferNode=new vu(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return _C(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return _C(this.node,e,r);let a=i[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function wF(n){return n.children.some(e=>e instanceof bg||!e.type.isAnonymous||wF(e))}function Nwe(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=mK,reused:o=[],minRepeatType:a=i.types.length}=n,l=Array.isArray(t)?new TF(t,t.length):t,u=i.types,h=0,d=0;function p($,A,I,D,R){let{id:B,start:G,end:Z,size:N}=l,H=d;for(;N<0;)if(l.next(),N==-1){let X=o[B];I.push(X),D.push(G-$);return}else if(N==-3){h=B;return}else if(N==-4){d=B;return}else throw new RangeError(`Unrecognized record size: ${N}`);let M=u[B],K,re,ce=G-$;if(Z-G<=r&&(re=y(l.pos-A,R))){let X=new Uint16Array(re.size-re.skip),Q=l.pos-re.size,ee=X.length;for(;l.pos>Q;)ee=S(re.start,X,ee);K=new bg(X,Z-re.start,i),ce=re.start-$}else{let X=l.pos-N;l.next();let Q=[],ee=[],z=B>=a?B:-1,L=0,le=Z;for(;l.pos>X;)z>=0&&l.id==z&&l.size>=0?(l.end<=le-r&&(g(Q,ee,G,L,l.end,le,z,H),L=Q.length,le=l.end),l.next()):p(G,X,Q,ee,z);if(z>=0&&L>0&&L<Q.length&&g(Q,ee,G,L,G,le,z,H),Q.reverse(),ee.reverse(),z>-1&&L>0){let de=m(M);K=EF(M,Q,ee,0,Q.length,0,Z-G,de,de)}else K=v(M,Q,ee,Z-G,H-Z)}I.push(K),D.push(ce)}function m($){return(A,I,D)=>{let R=0,B=A.length-1,G,Z;if(B>=0&&(G=A[B])instanceof Nr){if(!B&&G.type==$&&G.length==D)return G;(Z=G.prop(An.lookAhead))&&(R=I[B]+G.length+Z)}return v($,A,I,D,R)}}function g($,A,I,D,R,B,G,Z){let N=[],H=[];for(;$.length>D;)N.push($.pop()),H.push(A.pop()+I-R);$.push(v(i.types[G],N,H,B-R,Z-B)),A.push(R-I)}function v($,A,I,D,R=0,B){if(h){let G=[An.contextHash,h];B=B?[G].concat(B):[G]}if(R>25){let G=[An.lookAhead,R];B=B?[G].concat(B):[G]}return new Nr($,A,I,D,B)}function y($,A){let I=l.fork(),D=0,R=0,B=0,G=I.end-r,Z={size:0,start:0,skip:0};e:for(let N=I.pos-$;I.pos>N;){let H=I.size;if(I.id==A&&H>=0){Z.size=D,Z.start=R,Z.skip=B,B+=4,D+=4,I.next();continue}let M=I.pos-H;if(H<0||M<N||I.start<G)break;let K=I.id>=a?4:0,re=I.start;for(I.next();I.pos>M;){if(I.size<0)if(I.size==-3)K+=4;else break e;else I.id>=a&&(K+=4);I.next()}R=re,D+=H,B+=K}return(A<0||D==$)&&(Z.size=D,Z.start=R,Z.skip=B),Z.size>4?Z:void 0}function S($,A,I){let{id:D,start:R,end:B,size:G}=l;if(l.next(),G>=0&&D<a){let Z=I;if(G>4){let N=l.pos-(G-4);for(;l.pos>N;)I=S($,A,I)}A[--I]=Z,A[--I]=B-$,A[--I]=R-$,A[--I]=D}else G==-3?h=D:G==-4&&(d=D);return I}let T=[],w=[];for(;l.pos>0;)p(n.start||0,n.bufferStart||0,T,w,-1);let E=(e=n.length)!==null&&e!==void 0?e:T.length?w[0]+T[0].length:0;return new Nr(u[n.topID],T.reverse(),w.reverse(),E)}const QV=new WeakMap;function s$(n,e){if(!n.isAnonymous||e instanceof bg||e.type!=n)return 1;let t=QV.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Nr)){t=1;break}t+=s$(n,i)}QV.set(e,t)}return t}function EF(n,e,t,i,r,o,a,l,u){let h=0;for(let v=i;v<r;v++)h+=s$(n,e[v]);let d=Math.ceil(h*1.5/8),p=[],m=[];function g(v,y,S,T,w){for(let E=S;E<T;){let $=E,A=y[E],I=s$(n,v[E]);for(E++;E<T;E++){let D=s$(n,v[E]);if(I+D>=d)break;I+=D}if(E==$+1){if(I>d){let D=v[$];g(D.children,D.positions,0,D.children.length,y[$]+w);continue}p.push(v[$])}else{let D=y[E-1]+v[E-1].length-A;p.push(EF(n,v,y,$,E,A,D,null,u))}m.push(A+w-o)}}return g(e,t,i,r,0),(l||u)(p,m,a)}class OK{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof vu?this.setBuffer(e.context.buffer,e.index,t):e instanceof yc&&this.map.set(e.tree,t)}get(e){return e instanceof vu?this.getBuffer(e.context.buffer,e.index):e instanceof yc?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Gm{constructor(e,t,i,r,o=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Gm(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,a=e.length?e[0]:null;for(let l=0,u=0,h=0;;l++){let d=l<t.length?t[l]:null,p=d?d.fromA:1e9;if(p-u>=i)for(;a&&a.from<p;){let m=a;if(u>=m.from||p<=m.to||h){let g=Math.max(m.from,u)-h,v=Math.min(m.to,p)-h;m=g>=v?null:new Gm(g,v,m.tree,m.offset+h,l>0,!!d)}if(m&&r.push(m),a.to>p)break;a=o<e.length?e[o++]:null}if(!d)break;u=d.toA,h=d.toA-d.toB}return r}}class vK{startParse(e,t,i){return typeof e=="string"&&(e=new Bwe(e)),i=i?i.length?i.map(r=>new vP(r.from,r.to)):[new vP(0,0)]:[new vP(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class Bwe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new An({perNode:!0});class vC{constructor(e,t,i,r,o,a,l,u,h,d=0,p){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=a,this.buffer=l,this.bufferBase=u,this.curContext=h,this.lookAhead=d,this.parent=p}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new vC(e,[],t,i,i,0,[],0,r?new VV(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,h=this.reducePos-u;h>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=h));let d=l?this.stack[l-1]:0,p=this.bufferBase+this.buffer.length-d;if(r<o.minRepeatTerm||e&131072){let m=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,m,p+4,!0)}if(e&262144)this.state=this.stack[l];else{let m=this.stack[l-3];this.state=o.getGoto(m,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(t==i)return;if(a.buffer[l-2]>=t){a.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,r>4&&(r-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=r}}shift(e,t,i){let r=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4);else{let o=e,{parser:a}=this.p;(i>this.pos||t<=a.maxNode)&&(this.pos=i,a.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,i,4)}}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new vC(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Fwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,a;o<t.length;o+=2)(a=t[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&r.push(t[o],a);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let a=t[o+1];r.some((l,u)=>u&1&&l==a)||r.push(t[o],a)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[r],this.pos),a.score-=200,i.push(a)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,r=e&65535,o=this.stack.length-i*3;if(o<0||t.getGoto(this.stack[o],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new VV(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class VV{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var HV;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(HV||(HV={}));class Fwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class yC{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new yC(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new yC(this.stack,this.pos,this.index)}}function Ob(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let a=n.charCodeAt(i++),l=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let u=a-32;if(u>=46&&(u-=46,l=!0),o+=u,l)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class o${constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const XV=new o$;class Uwe{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=XV,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let a=this.ranges[--r];o-=i.from-a.to,i=a}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let a=this.ranges[++r];o+=a.from-i.to,i=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=XV,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class j0{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;yK(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}j0.prototype.contextual=j0.prototype.fallback=j0.prototype.extend=!1;class ML{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?Ob(e):e}token(e,t){let i=e.pos,r;for(;r=e.pos,yK(this.data,e,t,0,this.data,this.precTable),!(e.token.value>-1);){if(this.elseToken==null)return;if(e.next<0)break;e.advance(),e.reset(r+1,e.token)}r>i&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r-i))}}ML.prototype.contextual=j0.prototype.fallback=j0.prototype.extend=!1;class GO{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function yK(n,e,t,i,r,o){let a=0,l=1<<i,{dialect:u}=t.p.parser;e:for(;l&n[a];){let h=n[a+1];for(let g=a+3;g<h;g+=2)if((n[g+1]&l)>0){let v=n[g];if(u.allows(v)&&(e.token.value==-1||e.token.value==v||Gwe(v,e.token.value,r,o))){e.acceptToken(v);break}}let d=e.next,p=0,m=n[a+2];if(e.next<0&&m>p&&n[h+m*3-3]==65535&&n[h+m*3-3]==65535){a=n[h+m*3-1];continue e}for(;p<m;){let g=p+m>>1,v=h+g+(g<<1),y=n[v],S=n[v+1]||65536;if(d<y)m=g;else if(d>=S)p=g+1;else{a=n[v+2],e.advance();continue e}}break}}function jV(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Gwe(n,e,t,i){let r=jV(t,i,e);return r<0||jV(t,i,n)<r}const sc=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let yP=null;var YV;(function(n){n[n.Margin=25]="Margin"})(YV||(YV={}));function ZV(n,e,t){let i=n.cursor(Yr.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Wwe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ZV(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ZV(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],a=this.start[t]+i.positions[r];if(a>e)return this.nextStart=a,null;if(o instanceof Nr){if(a==e){if(a<this.safeFrom)return null;let l=a+o.length;if(l<=this.safeTo){let u=o.prop(An.lookAhead);if(!u||l+u<this.fragment.to)return o}}this.index[t]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+o.length}}}class zwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new o$)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,a=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let h=0;h<o.length;h++){if(!(1<<h&a))continue;let d=o[h],p=this.tokens[h];if(!(i&&!d.fallback)&&((d.contextual||p.start!=e.pos||p.mask!=a||p.context!=l)&&(this.updateCachedToken(p,d,e),p.mask=a,p.context=l),p.lookAhead>p.end+25&&(u=Math.max(p.lookAhead,u)),p.value!=0)){let m=t;if(p.extended>-1&&(t=this.addActions(e,p.extended,p.end,t)),t=this.addActions(e,p.value,p.end,t),!d.extend&&(i=p,t>m))break}}for(;this.actions.length>t;)this.actions.pop();return u&&e.setLookAhead(u),!i&&e.pos==this.stream.end&&(i=new o$,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new o$,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let l=o.specializers[a](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:a}=e.p,{data:l}=a;for(let u=0;u<2;u++)for(let h=a.stateSlot(o,u?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=kh(l,h+2);else{r==0&&l[h+1]==2&&(r=this.putAction(kh(l,h+2),t,i,r));break}l[h]==t&&(r=this.putAction(kh(l,h+1),t,i,r))}return r}}var qV;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(qV||(qV={}));class Qwe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Uwe(t,r),this.tokens=new zwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[vC.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Wwe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],o=[]),r.push(l);let u=this.tokens.getMainToken(l);o.push(u.value,u.end)}}break}}if(!i.length){let a=r&&Hwe(r);if(a)return this.stackToTree(a);if(this.parser.strict)throw sc&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let a=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((l,u)=>u.score-l.score);i.length>a;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let l=i[a];for(let u=a+1;u<i.length;u++){let h=i[u];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(u--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,a=sc?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,d=h?e.curContext.hash:0;for(let p=this.fragments.nodeAt(r);p;){let m=this.parser.nodeSet.types[p.type.id]==p.type?o.getGoto(e.state,p.type.id):-1;if(m>-1&&p.length&&(!h||(p.prop(An.contextHash)||0)==d))return e.useNode(p,m),sc&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(p.type.id)})`),!0;if(!(p instanceof Nr)||p.children.length==0||p.positions[0]>0)break;let g=p.children[0];if(g instanceof Nr&&p.positions[0]==0)p=g;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),sc&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let h=0;h<u.length;){let d=u[h++],p=u[h++],m=u[h++],g=h==u.length||!i,v=g?e:e.split();if(v.apply(d,p,m),sc&&console.log(a+this.stackID(v)+` (via ${d&65536?`reduce of ${o.getName(d&65535)}`:"shift"} for ${o.getName(p)} @ ${r}${v==e?"":", split"})`),g)return!0;v.pos>r?t.push(v):i.push(v)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return JV(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let a=0;a<e.length;a++){let l=e[a],u=t[a<<1],h=t[(a<<1)+1],d=sc?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),sc&&console.log(d+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let p=l.split(),m=d;for(let g=0;p.forceReduce()&&g<10&&(sc&&console.log(m+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,i));g++)sc&&(m=this.stackID(p)+" -> ");for(let g of l.recoverByInsert(u))sc&&console.log(d+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>l.pos?(h==l.pos&&(h++,u=0),l.recoverByDelete(u,h),sc&&console.log(d+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),JV(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),Nr.build({buffer:yC.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(yP||(yP=new WeakMap)).get(e);return t||yP.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function JV(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Vwe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const bP=n=>n;class bK{constructor(e){this.start=e.start,this.shift=e.shift||bP,this.reduce=e.reduce||bP,this.reuse=e.reuse||bP,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class HS extends vK{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function o(l,u,h){r[l].push([u,u.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=An[u]);for(let h=1;h<l.length;){let d=l[h++];if(d>=0)o(d,u,l[h++]);else{let p=l[h+-d];for(let m=-d;m>0;m--)o(l[h++],u,p);h++}}}this.nodeSet=new SF(t.map((l,u)=>fa.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:r[u],top:i.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=mK;let a=Ob(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(KV),this.states=Ob(e.states,Uint32Array),this.data=Ob(e.stateData),this.goto=Ob(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new j0(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Qwe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let a=r[o++],l=a&1,u=r[o++];if(l&&i)return u;for(let h=o+(a>>1);o<h;o++)if(r[o]==e)return u;if(l)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),a;;o+=3){if((a=i[o])==65535)if(i[o+1]==1)a=i[o=kh(i,o+2)];else{if(i[o+1]==2)return kh(i,o+2);break}if(a==t||a==0)return kh(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=kh(this.data,i+2);else return!1;if(t==kh(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=kh(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];t.some((o,a)=>a&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(HS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(l=>l.from==i.external);if(!o)return i;let a=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=KV(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let a=t.indexOf(o);a>=0&&(i[a]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let a=this.dialects[t[o]],l;(l=this.data[a++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new Vwe(e,i,r)}static deserialize(e){return new HS(e)}}function kh(n,e){return n[e]|n[e+1]<<16}function Hwe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function KV(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}let Xwe=0;class du{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Xwe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new du([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new bC;return t=>t.modified.indexOf(e)>-1?t:bC.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}}let jwe=0;class bC{constructor(){this.instances=[],this.id=jwe++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Ywe(t,l.modified));if(i)return i;let r=[],o=new du(r,e,t);for(let l of t)l.instances.push(o);let a=Zwe(t);for(let l of e.set)if(!l.modified.length)for(let u of a)r.push(bC.get(l,u));return o}}function Ywe(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Zwe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function xF(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],a=2,l=r;for(let p=0;;){if(l=="..."&&p>0&&p+3==r.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+r);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),p+=m[0].length,p==r.length)break;let g=r[p++];if(p==r.length&&g=="!"){a=0;break}if(g!="/")throw new RangeError("Invalid path: "+r);l=r.slice(p)}let u=o.length-1,h=o[u];if(!h)throw new RangeError("Invalid path: "+r);let d=new SC(i,a,u>0?o.slice(0,u):null);e[h]=d.sort(e[h])}}return SK.add(e)}const SK=new An;class SC{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}SC.empty=new SC([],2,null);function TK(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let a of o.tag)t[a.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let a=r;for(let l of o)for(let u of l.set){let h=t[u.id];if(h){a=a?a+" "+h:h;break}}return a},scope:i}}function qwe(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function Jwe(n,e,t,i=0,r=n.length){let o=new Kwe(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class Kwe{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:a,from:l,to:u}=e;if(l>=i||u<=t)return;a.isTop&&(o=this.highlighters.filter(g=>!g.scope||g.scope(a)));let h=r,d=eEe(e)||SC.empty,p=qwe(o,d.tags);if(p&&(h&&(h+=" "),h+=p,d.mode==1&&(r+=(r?" ":"")+p)),this.startSpan(e.from,h),d.opaque)return;let m=e.tree&&e.tree.prop(An.mounted);if(m&&m.overlay){let g=e.node.enter(m.overlay[0].from+l,1),v=this.highlighters.filter(S=>!S.scope||S.scope(m.tree.type)),y=e.firstChild();for(let S=0,T=l;;S++){let w=S<m.overlay.length?m.overlay[S]:null,E=w?w.from+l:u,$=Math.max(t,T),A=Math.min(i,E);if($<A&&y)for(;e.from<A&&(this.highlightRange(e,$,A,r,o),this.startSpan(Math.min(A,e.to),h),!(e.to>=E||!e.nextSibling())););if(!w||E>i)break;T=w.to+l,T>t&&(this.highlightRange(g.cursor(),Math.max(t,w.from+l),Math.min(i,T),r,v),this.startSpan(T,h))}y&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function eEe(n){let e=n.type.prop(SK);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const St=du.define,ox=St(),qd=St(),eH=St(qd),tH=St(qd),Jd=St(),ax=St(Jd),SP=St(Jd),lu=St(),Jp=St(lu),su=St(),ou=St(),PL=St(),ib=St(PL),lx=St(),$e={comment:ox,lineComment:St(ox),blockComment:St(ox),docComment:St(ox),name:qd,variableName:St(qd),typeName:eH,tagName:St(eH),propertyName:tH,attributeName:St(tH),className:St(qd),labelName:St(qd),namespace:St(qd),macroName:St(qd),literal:Jd,string:ax,docString:St(ax),character:St(ax),attributeValue:St(ax),number:SP,integer:St(SP),float:St(SP),bool:St(Jd),regexp:St(Jd),escape:St(Jd),color:St(Jd),url:St(Jd),keyword:su,self:St(su),null:St(su),atom:St(su),unit:St(su),modifier:St(su),operatorKeyword:St(su),controlKeyword:St(su),definitionKeyword:St(su),moduleKeyword:St(su),operator:ou,derefOperator:St(ou),arithmeticOperator:St(ou),logicOperator:St(ou),bitwiseOperator:St(ou),compareOperator:St(ou),updateOperator:St(ou),definitionOperator:St(ou),typeOperator:St(ou),controlOperator:St(ou),punctuation:PL,separator:St(PL),bracket:ib,angleBracket:St(ib),squareBracket:St(ib),paren:St(ib),brace:St(ib),content:lu,heading:Jp,heading1:St(Jp),heading2:St(Jp),heading3:St(Jp),heading4:St(Jp),heading5:St(Jp),heading6:St(Jp),contentSeparator:St(lu),list:St(lu),quote:St(lu),emphasis:St(lu),strong:St(lu),link:St(lu),monospace:St(lu),strikethrough:St(lu),inserted:St(),deleted:St(),changed:St(),invalid:St(),meta:lx,documentMeta:St(lx),annotation:St(lx),processingInstruction:St(lx),definition:du.defineModifier(),constant:du.defineModifier(),function:du.defineModifier(),standard:du.defineModifier(),local:du.defineModifier(),special:du.defineModifier()};TK([{tag:$e.link,class:"tok-link"},{tag:$e.heading,class:"tok-heading"},{tag:$e.emphasis,class:"tok-emphasis"},{tag:$e.strong,class:"tok-strong"},{tag:$e.keyword,class:"tok-keyword"},{tag:$e.atom,class:"tok-atom"},{tag:$e.bool,class:"tok-bool"},{tag:$e.url,class:"tok-url"},{tag:$e.labelName,class:"tok-labelName"},{tag:$e.inserted,class:"tok-inserted"},{tag:$e.deleted,class:"tok-deleted"},{tag:$e.literal,class:"tok-literal"},{tag:$e.string,class:"tok-string"},{tag:$e.number,class:"tok-number"},{tag:[$e.regexp,$e.escape,$e.special($e.string)],class:"tok-string2"},{tag:$e.variableName,class:"tok-variableName"},{tag:$e.local($e.variableName),class:"tok-variableName tok-local"},{tag:$e.definition($e.variableName),class:"tok-variableName tok-definition"},{tag:$e.special($e.variableName),class:"tok-variableName2"},{tag:$e.definition($e.propertyName),class:"tok-propertyName tok-definition"},{tag:$e.typeName,class:"tok-typeName"},{tag:$e.namespace,class:"tok-namespace"},{tag:$e.className,class:"tok-className"},{tag:$e.macroName,class:"tok-macroName"},{tag:$e.propertyName,class:"tok-propertyName"},{tag:$e.operator,class:"tok-operator"},{tag:$e.comment,class:"tok-comment"},{tag:$e.meta,class:"tok-meta"},{tag:$e.invalid,class:"tok-invalid"},{tag:$e.punctuation,class:"tok-punctuation"}]);const tEe=1,wK=189,EK=190,nEe=191,iEe=192,rEe=193,sEe=194,oEe=22,aEe=23,lEe=47,cEe=48,uEe=53,hEe=54,dEe=55,fEe=57,pEe=58,mEe=59,gEe=60,_Ee=61,OEe=63,vEe=230,yEe=71,bEe=255,SEe=121,TEe=142,wEe=143,EEe=146,XS=10,jS=13,$F=32,ok=9,CF=35,xEe=40,$Ee=46,CEe=new Set([aEe,lEe,cEe,bEe,OEe,SEe,hEe,dEe,vEe,gEe,_Ee,pEe,mEe,yEe,TEe,wEe,EEe]),AEe=new GO((n,e)=>{if(n.next<0)n.acceptToken(sEe);else if(!(n.next!=XS&&n.next!=jS))if(e.context.depth<0)n.acceptToken(iEe,1);else{n.advance();let t=0;for(;n.next==$F||n.next==ok;)n.advance(),t++;let i=n.next==XS||n.next==jS||n.next==CF;n.acceptToken(i?rEe:nEe,-t)}},{contextual:!0,fallback:!0}),kEe=new GO((n,e)=>{let t=e.context.depth;if(t<0)return;let i=n.peek(-1);if((i==XS||i==jS)&&e.context.depth>=0){let r=0,o=0;for(;;){if(n.next==$F)r++;else if(n.next==ok)r+=8-r%8;else break;n.advance(),o++}r!=t&&n.next!=XS&&n.next!=jS&&n.next!=CF&&(r<t?n.acceptToken(EK,-o):n.acceptToken(wK))}});function DL(n,e){this.parent=n,this.depth=e,this.hash=(n?n.hash+n.hash<<8:0)+e+(e<<4)}const IEe=new DL(null,0);function REe(n){let e=0;for(let t=0;t<n.length;t++)e+=n.charCodeAt(t)==ok?8-e%8:1;return e}const MEe=new bK({start:IEe,reduce(n,e){return n.depth<0&&CEe.has(e)?n.parent:n},shift(n,e,t,i){return e==wK?new DL(n,REe(i.read(i.pos,t.pos))):e==EK?n.parent:e==oEe||e==uEe||e==fEe?new DL(n,-1):n},hash(n){return n.hash}}),PEe=new GO(n=>{for(let e=0;e<5;e++){if(n.next!="print".charCodeAt(e))return;n.advance()}if(!/\w/.test(String.fromCharCode(n.next)))for(let e=0;;e++){let t=n.peek(e);if(!(t==$F||t==ok)){t!=xEe&&t!=$Ee&&t!=XS&&t!=jS&&t!=CF&&n.acceptToken(tEe);return}}}),DEe=xF({'async "*" "**" FormatConversion FormatSpec':$e.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":$e.controlKeyword,"in not and or is del":$e.operatorKeyword,"from def class global nonlocal lambda":$e.definitionKeyword,import:$e.moduleKeyword,"with as print":$e.keyword,Boolean:$e.bool,None:$e.null,VariableName:$e.variableName,"CallExpression/VariableName":$e.function($e.variableName),"FunctionDefinition/VariableName":$e.function($e.definition($e.variableName)),"ClassDefinition/VariableName":$e.definition($e.className),PropertyName:$e.propertyName,"CallExpression/MemberExpression/PropertyName":$e.function($e.propertyName),Comment:$e.lineComment,Number:$e.number,String:$e.string,FormatString:$e.special($e.string),UpdateOp:$e.updateOperator,"ArithOp!":$e.arithmeticOperator,BitOp:$e.bitwiseOperator,CompareOp:$e.compareOperator,AssignOp:$e.definitionOperator,Ellipsis:$e.punctuation,At:$e.meta,"( )":$e.paren,"[ ]":$e.squareBracket,"{ }":$e.brace,".":$e.derefOperator,", ;":$e.separator}),LEe={__proto__:null,await:40,or:50,and:52,in:56,not:58,is:60,if:66,else:68,lambda:72,yield:90,from:92,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250,match:261,case:267},NEe=HS.deserialize({version:14,states:"!L`O`Q$IXOOO%fQ$I[O'#G|OOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'UQ$IWO'#ClO(wQ$I[O'#G{OOQ$IS'#G|'#G|OOQ$IS'#DS'#DSOOQ$IS'#G{'#G{O)eQ$IWO'#CsO)uQ$IWO'#DdO*VQ$IWO'#DhOOQ$IS'#Ds'#DsO*jO`O'#DsO*rOpO'#DsO*zO!bO'#DtO+VO#tO'#DtO+bO&jO'#DtO+mO,UO'#DtO-oQ$I[O'#GmOOQ$IS'#Gm'#GmO'UQ$IWO'#GlO/RQ$I[O'#GlOOQ$IS'#E]'#E]O/jQ$IWO'#E^OOQ$IS'#Gk'#GkO/tQ$IWO'#GjOOQ$IV'#Gj'#GjO0PQ$IWO'#FPOOQ$IS'#GX'#GXO0UQ$IWO'#FOOOQ$IV'#Hx'#HxOOQ$IV'#Gi'#GiOOQ$IT'#Fh'#FhQ`Q$IXOOO'UQ$IWO'#CoO0dQ$IWO'#C{O0kQ$IWO'#DPO0yQ$IWO'#HQO1ZQ$I[O'#EQO'UQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1oQ$IWO'#EZO2VQ$IWO'#E_O0PQ$IWO'#EaO2jQ$I[O'#EaO0PQ$IWO'#EdO/jQ$IWO'#EgO/jQ$IWO'#EkO/jQ$IWO'#EnO2uQ$IWO'#EpO2|Q$IWO'#EuO3XQ$IWO'#EqO/jQ$IWO'#EuO0PQ$IWO'#EwO0PQ$IWO'#E|O3^Q$IWO'#FROOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O3eQ$IWO'#DmOOQ$IS,5:W,5:WO3xQ$IWO'#H[OOQ$IS,5:Z,5:ZO4VQ%1`O,5:ZO4[Q$I[O,59WO0dQ$IWO,59`O0dQ$IWO,59`O0dQ$IWO,59`O6zQ$IWO,59`O7PQ$IWO,59`O7WQ$IWO,59hO7_Q$IWO'#G{O8eQ$IWO'#GzOOQ$IS'#Gz'#GzOOQ$IS'#DY'#DYO8|Q$IWO,59_O'UQ$IWO,59_O9[Q$IWO,59_O9aQ$IWO,5:PO'UQ$IWO,5:POOQ$IS,5:O,5:OO9oQ$IWO,5:OO9tQ$IWO,5:VO'UQ$IWO,5:VO'UQ$IWO,5:TOOQ$IS,5:S,5:SO:VQ$IWO,5:SO:[Q$IWO,5:UOOOO'#Fp'#FpO:aO`O,5:_OOQ$IS,5:_,5:_OOOO'#Fq'#FqO:iOpO,5:_O:qQ$IWO'#DuOOOO'#Fr'#FrO;RO!bO,5:`OOQ$IS,5:`,5:`OOOO'#Fu'#FuO;^O#tO,5:`OOOO'#Fv'#FvO;iO&jO,5:`OOOO'#Fw'#FwO;tO,UO,5:`OOQ$IS'#Fx'#FxO<PQ$I[O,5:dO>qQ$I[O,5=WO?[Q%GlO,5=WO?{Q$I[O,5=WOOQ$IS,5:x,5:xO@dQ$IXO'#GQOAsQ$IWO,5;TOOQ$IV,5=U,5=UOBOQ$I[O'#HtOBgQ$IWO,5;kOOQ$IS-E:V-E:VOOQ$IV,5;j,5;jO3SQ$IWO'#EwOOQ$IT-E9f-E9fOBoQ$I[O,59ZODvQ$I[O,59gOEaQ$IWO'#G}OElQ$IWO'#G}O0PQ$IWO'#G}OEwQ$IWO'#DROFPQ$IWO,59kOFUQ$IWO'#HRO'UQ$IWO'#HRO/jQ$IWO,5=lOOQ$IS,5=l,5=lO/jQ$IWO'#D|OOQ$IS'#D}'#D}OFsQ$IWO'#FzOGTQ$IWO,58zOGTQ$IWO,58zO)hQ$IWO,5:jOGcQ$I[O'#HTOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGvQ$IWO,5:yOHXQ$IWO,5:{OOQ$IS'#F}'#F}OHgQ$I[O,5:{OHuQ$IWO,5:{OHzQ$IWO'#HwOOQ$IS,5;O,5;OOIYQ$IWO'#HsOOQ$IS,5;R,5;RO3XQ$IWO,5;VO3XQ$IWO,5;YOIkQ$I[O'#HyO'UQ$IWO'#HyOIuQ$IWO,5;[O2uQ$IWO,5;[O/jQ$IWO,5;aO0PQ$IWO,5;cOIzQ$IXO'#ElOKTQ$IZO,5;]ONiQ$IWO'#HzO3XQ$IWO,5;aONtQ$IWO,5;cONyQ$IWO,5;hO! RQ$I[O,5;mO'UQ$IWO,5;mO!#uQ$I[O1G.hO!#|Q$I[O1G.hO!&mQ$I[O1G.hO!&wQ$I[O1G.hO!)bQ$I[O1G.hO!)uQ$I[O1G.hO!*YQ$IWO'#HZO!*hQ$I[O'#GmO/jQ$IWO'#HZO!*rQ$IWO'#HYOOQ$IS,5:X,5:XO!*zQ$IWO,5:XO!+PQ$IWO'#H]O!+[Q$IWO'#H]O!+oQ$IWO,5=vOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.z1G.zO!,oQ$I[O1G.zO!,vQ$I[O1G.zO0dQ$IWO1G.zO!-cQ$IWO1G/SOOQ$IS'#DX'#DXO/jQ$IWO,59rOOQ$IS1G.y1G.yO!-jQ$IWO1G/cO!-zQ$IWO1G/cO!.SQ$IWO1G/dO'UQ$IWO'#HSO!.XQ$IWO'#HSO!.^Q$I[O1G.yO!.nQ$IWO,59gO!/tQ$IWO,5=rO!0UQ$IWO,5=rO!0^Q$IWO1G/kO!0cQ$I[O1G/kOOQ$IS1G/j1G/jO!0sQ$IWO,5=mO!1jQ$IWO,5=mO/jQ$IWO1G/oO!2XQ$IWO1G/qO!2^Q$I[O1G/qO!2nQ$I[O1G/oOOQ$IS1G/n1G/nOOQ$IS1G/p1G/pOOOO-E9n-E9nOOQ$IS1G/y1G/yOOOO-E9o-E9oO!3OQ$IWO'#HhO/jQ$IWO'#HhO!3^Q$IWO,5:aOOOO-E9p-E9pOOQ$IS1G/z1G/zOOOO-E9s-E9sOOOO-E9t-E9tOOOO-E9u-E9uOOQ$IS-E9v-E9vO!3iQ%GlO1G2rO!4YQ$I[O1G2rO'UQ$IWO,5<eOOQ$IS,5<e,5<eOOQ$IS-E9w-E9wOOQ$IS,5<l,5<lOOQ$IS-E:O-E:OOOQ$IV1G0o1G0oO0PQ$IWO'#F|O!4qQ$I[O,5>`OOQ$IS1G1V1G1VO!5YQ$IWO1G1VOOQ$IS'#DT'#DTO/jQ$IWO,5=iOOQ$IS,5=i,5=iO!5_Q$IWO'#FiO!5jQ$IWO,59mO!5rQ$IWO1G/VO!5|Q$I[O,5=mOOQ$IS1G3W1G3WOOQ$IS,5:h,5:hO!6mQ$IWO'#GlOOQ$IS,5<f,5<fOOQ$IS-E9x-E9xO!7OQ$IWO1G.fOOQ$IS1G0U1G0UO!7^Q$IWO,5=oO!7nQ$IWO,5=oO/jQ$IWO1G0eO/jQ$IWO1G0eO0PQ$IWO1G0gOOQ$IS-E9{-E9{O!8PQ$IWO1G0gO!8[Q$IWO1G0gO!8aQ$IWO,5>cO!8oQ$IWO,5>cO!8}Q$IWO,5>_O!9eQ$IWO,5>_O!9vQ$IZO1G0qO!=XQ$IZO1G0tO!@gQ$IWO,5>eO!@qQ$IWO,5>eO!@yQ$I[O,5>eO/jQ$IWO1G0vO!ATQ$IWO1G0vO3XQ$IWO1G0{ONtQ$IWO1G0}OOQ$IV,5;W,5;WO!AYQ$IYO,5;WO!A_Q$IZO1G0wO!DsQ$IWO'#GUO3XQ$IWO1G0wO3XQ$IWO1G0wO!EQQ$IWO,5>fO!E_Q$IWO,5>fO0PQ$IWO,5>fOOQ$IV1G0{1G0{O!EgQ$IWO'#EyO!ExQ%1`O1G0}OOQ$IV1G1S1G1SO3XQ$IWO1G1SO!FQQ$IWO'#FTOOQ$IV1G1X1G1XO! RQ$I[O1G1XOOQ$IS,5=u,5=uOOQ$IS'#Dn'#DnO/jQ$IWO,5=uO!FVQ$IWO,5=tO!FjQ$IWO,5=tOOQ$IS1G/s1G/sO!FrQ$IWO,5=wO!GSQ$IWO,5=wO!G[Q$IWO,5=wO!GoQ$IWO,5=wO!HPQ$IWO,5=wOOQ$IS1G3b1G3bOOQ$IS7+$f7+$fO!5rQ$IWO7+$nO!IrQ$IWO1G.zO!IyQ$IWO1G.zOOQ$IS1G/^1G/^OOQ$IS,5<V,5<VO'UQ$IWO,5<VOOQ$IS7+$}7+$}O!JQQ$IWO7+$}OOQ$IS-E9i-E9iOOQ$IS7+%O7+%OO!JbQ$IWO,5=nO'UQ$IWO,5=nOOQ$IS7+$e7+$eO!JgQ$IWO7+$}O!JoQ$IWO7+%OO!JtQ$IWO1G3^OOQ$IS7+%V7+%VO!KUQ$IWO1G3^O!K^Q$IWO7+%VOOQ$IS,5<U,5<UO'UQ$IWO,5<UO!KcQ$IWO1G3XOOQ$IS-E9h-E9hO!LYQ$IWO7+%ZOOQ$IS7+%]7+%]O!LhQ$IWO1G3XO!MVQ$IWO7+%]O!M[Q$IWO1G3_O!MlQ$IWO1G3_O!MtQ$IWO7+%ZO!MyQ$IWO,5>SO!NaQ$IWO,5>SO!NaQ$IWO,5>SO!NoO!LQO'#DwO!NzOSO'#HiOOOO1G/{1G/{O# PQ$IWO1G/{O# XQ%GlO7+(^O# xQ$I[O1G2PP#!cQ$IWO'#FyOOQ$IS,5<h,5<hOOQ$IS-E9z-E9zOOQ$IS7+&q7+&qOOQ$IS1G3T1G3TOOQ$IS,5<T,5<TOOQ$IS-E9g-E9gOOQ$IS7+$q7+$qO#!pQ$IWO,5=WO##ZQ$IWO,5=WO##lQ$I[O,5<WO#$PQ$IWO1G3ZOOQ$IS-E9j-E9jOOQ$IS7+&P7+&PO#$aQ$IWO7+&POOQ$IS7+&R7+&RO#$oQ$IWO'#HvO0PQ$IWO'#HuO#%TQ$IWO7+&ROOQ$IS,5<k,5<kO#%`Q$IWO1G3}OOQ$IS-E9}-E9}OOQ$IS,5<g,5<gO#%nQ$IWO1G3yOOQ$IS-E9y-E9yO#&UQ$IZO7+&]O!DsQ$IWO'#GSO3XQ$IWO7+&]O3XQ$IWO7+&`O#)gQ$I[O,5<oO'UQ$IWO,5<oO#)qQ$IWO1G4POOQ$IS-E:R-E:RO#){Q$IWO1G4PO3XQ$IWO7+&bO/jQ$IWO7+&bOOQ$IV7+&g7+&gO!ExQ%1`O7+&iO#*TQ$IXO1G0rOOQ$IV-E:S-E:SO3XQ$IWO7+&cO3XQ$IWO7+&cOOQ$IV,5<p,5<pO#+yQ$IWO,5<pOOQ$IV7+&c7+&cO#,UQ$IZO7+&cO#/dQ$IWO,5<qO#/oQ$IWO1G4QOOQ$IS-E:T-E:TO#/|Q$IWO1G4QO#0UQ$IWO'#H|O#0dQ$IWO'#H|O0PQ$IWO'#H|OOQ$IS'#H|'#H|O#0oQ$IWO'#H{OOQ$IS,5;e,5;eO#0wQ$IWO,5;eO/jQ$IWO'#E{OOQ$IV7+&i7+&iO3XQ$IWO7+&iOOQ$IV7+&n7+&nO#0|Q$IYO,5;oOOQ$IV7+&s7+&sOOQ$IS1G3a1G3aOOQ$IS,5<Y,5<YO#1RQ$IWO1G3`OOQ$IS-E9l-E9lO#1fQ$IWO,5<ZO#1qQ$IWO,5<ZO#2UQ$IWO1G3cOOQ$IS-E9m-E9mO#2fQ$IWO1G3cO#2nQ$IWO1G3cO#3OQ$IWO1G3cO#2fQ$IWO1G3cOOQ$IS<<HY<<HYO#3ZQ$I[O1G1qOOQ$IS<<Hi<<HiP#3hQ$IWO'#FkO7WQ$IWO1G3YO#3uQ$IWO1G3YO#3zQ$IWO<<HiOOQ$IS<<Hj<<HjO#4[Q$IWO7+(xOOQ$IS<<Hq<<HqO#4lQ$I[O1G1pP#5]Q$IWO'#FjO#5jQ$IWO7+(yO#5zQ$IWO7+(yO#6SQ$IWO<<HuO#6XQ$IWO7+(sOOQ$IS<<Hw<<HwO#7OQ$IWO,5<XO'UQ$IWO,5<XOOQ$IS-E9k-E9kOOQ$IS<<Hu<<HuOOQ$IS,5<_,5<_O/jQ$IWO,5<_O#7TQ$IWO1G3nOOQ$IS-E9q-E9qO#7kQ$IWO1G3nOOOO'#Ft'#FtO#7yO!LQO,5:cOOOO,5>T,5>TOOOO7+%g7+%gO#8UQ$IWO1G2rO#8oQ$IWO1G2rP'UQ$IWO'#FlO/jQ$IWO<<IkO#9QQ$IWO,5>bO#9cQ$IWO,5>bO0PQ$IWO,5>bO#9tQ$IWO,5>aOOQ$IS<<Im<<ImP0PQ$IWO'#GPP/jQ$IWO'#F{OOQ$IV-E:Q-E:QO3XQ$IWO<<IwOOQ$IV,5<n,5<nO3XQ$IWO,5<nOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#9yQ$I[O1G2ZP#:TQ$IWO'#GTO#:[Q$IWO7+)kO#:fQ$IZO<<I|O3XQ$IWO<<I|OOQ$IV<<JT<<JTO3XQ$IWO<<JTOOQ$IV'#GR'#GRO#=tQ$IZO7+&^OOQ$IV<<I}<<I}O#?pQ$IZO<<I}OOQ$IV1G2[1G2[O0PQ$IWO1G2[O3XQ$IWO<<I}O0PQ$IWO1G2]P/jQ$IWO'#GVO#COQ$IWO7+)lO#C]Q$IWO7+)lOOQ$IS'#Ez'#EzO/jQ$IWO,5>hO#CeQ$IWO,5>hOOQ$IS,5>h,5>hO#CpQ$IWO,5>gO#DRQ$IWO,5>gOOQ$IS1G1P1G1POOQ$IS,5;g,5;gO#DZQ$IWO1G1ZP#D`Q$IWO'#FnO#DpQ$IWO1G1uO#ETQ$IWO1G1uO#EeQ$IWO1G1uP#EpQ$IWO'#FoO#E}Q$IWO7+(}O#F_Q$IWO7+(}O#F_Q$IWO7+(}O#FgQ$IWO7+(}O#FwQ$IWO7+(tO7WQ$IWO7+(tOOQ$ISAN>TAN>TO#GbQ$IWO<<LeOOQ$ISAN>aAN>aO/jQ$IWO1G1sO#GrQ$I[O1G1sP#G|Q$IWO'#FmOOQ$IS1G1y1G1yP#HZQ$IWO'#FsO#HhQ$IWO7+)YOOOO-E9r-E9rO#IOQ$IWO7+(^OOQ$ISAN?VAN?VO#IiQ$IWO,5<jO#I}Q$IWO1G3|OOQ$IS-E9|-E9|O#J`Q$IWO1G3|OOQ$IS1G3{1G3{OOQ$IVAN?cAN?cOOQ$IV1G2Y1G2YO3XQ$IWOAN?hO#JqQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E:P-E:POOQ$IV<<Ix<<IxO3XQ$IWOAN?iO3XQ$IWO7+'vOOQ$IVAN?iAN?iOOQ$IS7+'w7+'wO#NPQ$IWO<<MWOOQ$IS1G4S1G4SO/jQ$IWO1G4SOOQ$IS,5<r,5<rO#N^Q$IWO1G4ROOQ$IS-E:U-E:UOOQ$IU'#GY'#GYO#NoQ$IYO7+&uO#NzQ$IWO'#FUO$ rQ$IWO7+'aO$!SQ$IWO7+'aOOQ$IS7+'a7+'aO$!_Q$IWO<<LiO$!oQ$IWO<<LiO$!oQ$IWO<<LiO$!wQ$IWO'#HUOOQ$IS<<L`<<L`O$#RQ$IWO<<L`OOQ$IS7+'_7+'_O0PQ$IWO1G2UP0PQ$IWO'#GOO$#lQ$IWO7+)hO$#}Q$IWO7+)hOOQ$IVG25SG25SO3XQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<Kb<<KbOOQ$IS7+)n7+)nP$$`Q$IWO'#GWOOQ$IU-E:W-E:WOOQ$IV<<Ja<<JaO$%SQ$I[O'#FWOOQ$IS'#FY'#FYO$%dQ$IWO'#FXO$&UQ$IWO'#FXOOQ$IS'#FX'#FXO$&ZQ$IWO'#IOO#NzQ$IWO'#F`O#NzQ$IWO'#F`O$&rQ$IWO'#FaO#NzQ$IWO'#FbO$&yQ$IWO'#IPOOQ$IS'#IP'#IPO$'hQ$IWO,5;pOOQ$IS<<J{<<J{O$'pQ$IWO<<J{O$(QQ$IWOANBTO$(bQ$IWOANBTO$(jQ$IWO'#HVOOQ$IS'#HV'#HVO0kQ$IWO'#DaO$)TQ$IWO,5=pOOQ$ISANAzANAzOOQ$IS7+'p7+'pO$)lQ$IWO<<MSOOQ$IVLD*nLD*nO4VQ%1`O'#G[O$)}Q$I[O,5;yO#NzQ$IWO'#FdOOQ$IS,5;},5;}OOQ$IS'#FZ'#FZO$*oQ$IWO,5;sO$*tQ$IWO,5;sOOQ$IS'#F^'#F^O#NzQ$IWO'#GZO$+fQ$IWO,5;wO$,QQ$IWO,5>jO$,bQ$IWO,5>jO0PQ$IWO,5;vO$,sQ$IWO,5;zO$,xQ$IWO,5;zO#NzQ$IWO'#IQO$,}Q$IWO'#IQO$-SQ$IWO,5;{OOQ$IS,5;|,5;|O'UQ$IWO'#FgOOQ$IU1G1[1G1[O3XQ$IWO1G1[OOQ$ISAN@gAN@gO$-XQ$IWOG27oO$-iQ$IWO,59{OOQ$IS1G3[1G3[OOQ$IS,5<v,5<vOOQ$IS-E:Y-E:YO$-nQ$I[O'#FWO$-uQ$IWO'#IRO$.TQ$IWO'#IRO$.]Q$IWO,5<OOOQ$IS1G1_1G1_O$.bQ$IWO1G1_O$.gQ$IWO,5<uOOQ$IS-E:X-E:XO$/RQ$IWO,5<yO$/jQ$IWO1G4UOOQ$IS-E:]-E:]OOQ$IS1G1b1G1bOOQ$IS1G1f1G1fO$/zQ$IWO,5>lO#NzQ$IWO,5>lOOQ$IS1G1g1G1gO$0YQ$I[O,5<ROOQ$IU7+&v7+&vO$!wQ$IWO1G/gO#NzQ$IWO,5<PO$0aQ$IWO,5>mO$0hQ$IWO,5>mOOQ$IS1G1j1G1jOOQ$IS7+&y7+&yP#NzQ$IWO'#G_O$0pQ$IWO1G4WO$0zQ$IWO1G4WO$1SQ$IWO1G4WOOQ$IS7+%R7+%RO$1bQ$IWO1G1kO$1pQ$I[O'#FWO$1wQ$IWO,5<xOOQ$IS,5<x,5<xO$2VQ$IWO1G4XOOQ$IS-E:[-E:[O#NzQ$IWO,5<wO$2^Q$IWO,5<wO$2cQ$IWO7+)rOOQ$IS-E:Z-E:ZO$2mQ$IWO7+)rO#NzQ$IWO,5<QP#NzQ$IWO'#G^O$2uQ$IWO1G2cO#NzQ$IWO1G2cP$3TQ$IWO'#G]O$3[Q$IWO<<M^O$3fQ$IWO1G1lO$3tQ$IWO7+'}O7WQ$IWO'#C{O7WQ$IWO,59`O7WQ$IWO,59`O7WQ$IWO,59`O$4SQ$I[O,5=WO7WQ$IWO1G.zO/jQ$IWO1G/VO/jQ$IWO7+$nP$4gQ$IWO'#FyO'UQ$IWO'#GlO$4tQ$IWO,59`O$4yQ$IWO,59`O$5QQ$IWO,59kO$5VQ$IWO1G/SO0kQ$IWO'#DPO7WQ$IWO,59h",stateData:"$5m~O%[OS%XOS%WOSQOS~OPhOTeOdsOfXOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%VqO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~OT!bO]!bO_!cOf!jO!V!lO!d!nO%b!]O%c!^O%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bO~Oi%pXj%pXk%pXl%pXm%pXn%pXq%pXx%pXy%pX!s%pX#^%pX%V%pX%Y%pX%r%pXe%pX!R%pX!S%pX%s%pX!U%pX!Y%pX!O%pX#V%pXr%pX!j%pX~P$bOdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~Ox%oXy%oX#^%oX%V%oX%Y%oX%r%oX~Oi!qOj!rOk!pOl!pOm!sOn!tOq!uO!s%oX~P(cOT!{Om/iOt/wO}vO~P'UOT#OOm/iOt/wO!U#PO~P'UOT#SO_#TOm/iOt/wO!Y#UO~P'UO&T#XO&U#ZO~O&W#[O&X#ZO~O!Z#^O&Z#_O&_#aO~O!Z#^O&a#bO&b#aO~O!Z#^O&U#aO&d#dO~O!Z#^O&X#aO&f#fO~OT%aX]%aX_%aXf%aXi%aXj%aXk%aXl%aXm%aXn%aXq%aXx%aX!V%aX!d%aX%b%aX%c%aX%d%aX%e%aX%f%aX%g%aX%h%aX%i%aX%j%aX%k%aXe%aX!R%aX!S%aX~O&R[O&S]O&V^O&Y_O&``O&caO&ebOy%aX!s%aX#^%aX%V%aX%Y%aX%r%aX%s%aX!U%aX!Y%aX!O%aX#V%aXr%aX!j%aX~P+xOx#kOy%`X!s%`X#^%`X%V%`X%Y%`X%r%`X~Om/iOt/wO~P'UO#^#nO%V#pO%Y#pO~O%mVO~O!R#uO#l!YO#q!ZO#tlO~OmtO~P'UOT#zO_#{O%mVOyuP~OT$POm/iOt/wO!O$QO~P'UOy$SO!s$XO%r$TO#^!tX%V!tX%Y!tX~OT$POm/iOt/wO#^!}X%V!}X%Y!}X~P'UOm/iOt/wO#^#RX%V#RX%Y#RX~P'UO!d$_O!m$_O%mVO~OT$iO~P'UO!S$kO#j$lO#l$mO~Oy$nO~OT$uO~P'UOT%OO_%OOe%QOm/iOt/wO~P'UOm/iOt/wOy%TO~P'UO&Q%VO~O_!cOf!jO!V!lO!d!nOT`a]`ai`aj`ak`al`am`an`aq`ax`ay`a!s`a#^`a%V`a%Y`a%b`a%c`a%d`a%e`a%f`a%g`a%h`a%i`a%j`a%k`a%r`ae`a!R`a!S`a%s`a!U`a!Y`a!O`a#V`ar`a!j`a~Ol%[O~Om%[O~P'UOm/iO~P'UOi/kOj/lOk/jOl/jOm/sOn/tOq/xOe%oX!R%oX!S%oX%s%oX!U%oX!Y%oX!O%oX#V%oX!j%oX~P(cO%s%^Oe%nXx%nX!R%nX!S%nX!U%nXy%nX~Oe%`Ox%aO!R%eO!S%dO~Oe%`O~Ox%hO!R%eO!S%dO!U%zX~O!U%lO~Ox%mOy%oO!R%eO!S%dO!Y%uX~O!Y%sO~O!Y%tO~O&T#XO&U%vO~O&W#[O&X%vO~OT%yOm/iOt/wO}vO~P'UO!Z#^O&Z#_O&_%|O~O!Z#^O&a#bO&b%|O~O!Z#^O&U%|O&d#dO~O!Z#^O&X%|O&f#fO~OT!la]!la_!laf!lai!laj!lak!lal!lam!lan!laq!lax!lay!la!V!la!d!la!s!la#^!la%V!la%Y!la%b!la%c!la%d!la%e!la%f!la%g!la%h!la%i!la%j!la%k!la%r!lae!la!R!la!S!la%s!la!U!la!Y!la!O!la#V!lar!la!j!la~P#yOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOmtOtuOy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P'UOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$tX%V$tX%Y$tX~P'UO#^#nO%V&YO%Y&YO~O!d&ZOf&hX%V&hX#V&hX#^&hX%Y&hX#U&hX~Of!jO%V&]O~Oicajcakcalcamcancaqcaxcayca!sca#^ca%Vca%Yca%rcaeca!Rca!Sca%sca!Uca!Yca!Oca#Vcarca!jca~P$bOqoaxoayoa#^oa%Voa%Yoa%roa~Oi!qOj!rOk!pOl!pOm!sOn!tO!soa~PD_O%r&_Ox%qXy%qX~O%mVOx%qXy%qX~Ox&bOyuX~Oy&dO~Ox%mO#^%uX%V%uX%Y%uXe%uXy%uX!Y%uX!j%uX%r%uX~OT/rOm/iOt/wO}vO~P'UO%r$TO#^Sa%VSa%YSa~Ox&mO#^%wX%V%wX%Y%wXl%wX~P$bOx&pO!O&oO#^#Ra%V#Ra%Y#Ra~O#V&qO#^#Ta%V#Ta%Y#Ta~O!d$_O!m$_O#U&sO%mVO~O#U&sO~Ox&uO#^&kX%V&kX%Y&kX~Ox&wO#^&gX%V&gX%Y&gXy&gX~Ox&{Ol&mX~P$bOl'OO~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO%V'TO~P'UOr'XO#g'VO#h'WOP#eaT#ead#eaf#eam#eaq#eat#ea}#ea!O#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea#v#ea%S#ea%V#ea%g#ea%h#ea%l#ea%m#ea&R#ea&S#ea&V#ea&Y#ea&`#ea&c#ea&e#ea%U#ea%Y#ea~Ox'YO#V'[Oy&nX~Of'^O~Of!jOy$nO~Oy'bO~P$bOT!bO]!bO_!cOf!jO!V!lO!d!nO%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%c!^O~P! YO%cUi~P! YOT!bO]!bO_!cOf!jO!V!lO!d!nO%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%e!`O%f!`O~P!$TO%eUi%fUi~P!$TO_!cOf!jO!V!lO!d!nOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%eUi%fUi%gUi%hUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~OT!bO]!bO%i!bO%j!bO%k!bO~P!'ROTUi]Ui%iUi%jUi%kUi~P!'RO!R%eO!S%dOe%}Xx%}X~O%r'fO%s'fO~P+xOx'hOe%|X~Oe'jO~Ox'kOy'mO!U&PX~Om/iOt/wOx'kOy'nO!U&PX~P'UO!U'pO~Ok!pOl!pOm!sOn!tOihiqhixhiyhi!shi#^hi%Vhi%Yhi%rhi~Oj!rO~P!+tOjhi~P!+tOi/kOj/lOk/jOl/jOm/sOn/tO~Or'rO~P!,}OT'wOe'xOm/iOt/wO~P'UOe'xOx'yO~Oe'{O~O!S'}O~Oe(OOx'yO!R%eO!S%dO~P$bOi/kOj/lOk/jOl/jOm/sOn/tOeoa!Roa!Soa%soa!Uoa!Yoa!Ooa#Voaroa!joa~PD_OT'wOm/iOt/wO!U%za~P'UOx(RO!U%za~O!U(SO~Ox(RO!R%eO!S%dO!U%za~P$bOT(WOm/iOt/wO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~P'UOx(XO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~O!Y([O~Ox(XO!R%eO!S%dO!Y%ua~P$bOx(_O!R%eO!S%dO!Y%{a~P$bOx(bOy&[X!Y&[X!j&[X~Oy(eO!Y(gO!j(hO~OT&TOmtOtuOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~P'UOx(iOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~O!d&ZOf&ha%V&ha#V&ha#^&ha%Y&ha#U&ha~O%V(nO~OT#zO_#{O%mVO~Ox&bOyua~OmtOtuO~P'UOx(XO#^%ua%V%ua%Y%uae%uay%ua!Y%ua!j%ua%r%ua~P$bOx(sO#^%`X%V%`X%Y%`X%r%`X~O%r$TO#^Si%VSi%YSi~O#^%wa%V%wa%Y%wal%wa~P'UOx(vO#^%wa%V%wa%Y%wal%wa~OT(zOf(|O%mVO~O#U(}O~O%mVO#^&ka%V&ka%Y&ka~Ox)PO#^&ka%V&ka%Y&ka~Om/iOt/wO#^&ga%V&ga%Y&gay&ga~P'UOx)SO#^&ga%V&ga%Y&gay&ga~Or)WO#a)VOP#_iT#_id#_if#_im#_iq#_it#_i}#_i!O#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i#v#_i%S#_i%V#_i%g#_i%h#_i%l#_i%m#_i&R#_i&S#_i&V#_i&Y#_i&`#_i&c#_i&e#_i%U#_i%Y#_i~Or)XOP#biT#bid#bif#bim#biq#bit#bi}#bi!O#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi#v#bi%S#bi%V#bi%g#bi%h#bi%l#bi%m#bi&R#bi&S#bi&V#bi&Y#bi&`#bi&c#bi&e#bi%U#bi%Y#bi~OT)ZOl&ma~P'UOx)[Ol&ma~Ox)[Ol&ma~P$bOl)`O~O%T)cO~Or)fO#g'VO#h)eOP#eiT#eid#eif#eim#eiq#eit#ei}#ei!O#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei#v#ei%S#ei%V#ei%g#ei%h#ei%l#ei%m#ei&R#ei&S#ei&V#ei&Y#ei&`#ei&c#ei&e#ei%U#ei%Y#ei~Om/iOt/wOy$nO~P'UOm/iOt/wOy&na~P'UOx)lOy&na~OT)pO_)qOe)tO%i)rO%mVO~Oy$nO&q)vO~O%V)zO~OT%OO_%OOm/iOt/wOe%|a~P'UOx*OOe%|a~Om/iOt/wOy*RO!U&Pa~P'UOx*SO!U&Pa~Om/iOt/wOx*SOy*VO!U&Pa~P'UOm/iOt/wOx*SO!U&Pa~P'UOx*SOy*VO!U&Pa~Ok/jOl/jOm/sOn/tOehiihiqhixhi!Rhi!Shi%shi!Uhiyhi!Yhi#^hi%Vhi%Yhi!Ohi#Vhirhi!jhi%rhi~Oj/lO~P!H[Ojhi~P!H[OT'wOe*[Om/iOt/wO~P'UOl*^O~Oe*[Ox*`O~Oe*aO~OT'wOm/iOt/wO!U%zi~P'UOx*bO!U%zi~O!U*cO~OT(WOm/iOt/wO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~P'UOx*fO!R%eO!S%dO!Y%{i~Ox*iO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~O!Y*jO~O_*lOm/iOt/wO!Y%{i~P'UOx*fO!Y%{i~O!Y*nO~OT*pOm/iOt/wOy&[a!Y&[a!j&[a~P'UOx*qOy&[a!Y&[a!j&[a~O!Z#^O&^*tO!Y!kX~O!Y*vO~Oy(eO!Y*wO~OT&TOmtOtuOy%`q!s%`q#^%`q%V%`q%Y%`q%r%`q~P'UOx$miy$mi!s$mi#^$mi%V$mi%Y$mi%r$mi~P$bOT&TOmtOtuO~P'UOT&TOm/iOt/wO#^%`a%V%`a%Y%`a%r%`a~P'UOx*xO#^%`a%V%`a%Y%`a%r%`a~Ox$`a#^$`a%V$`a%Y$`al$`a~P$bO#^%wi%V%wi%Y%wil%wi~P'UOx*{O#^#Rq%V#Rq%Y#Rq~Ox*|O#V+OO#^&jX%V&jX%Y&jXe&jX~OT+QOf(|O%mVO~O%mVO#^&ki%V&ki%Y&ki~Om/iOt/wO#^&gi%V&gi%Y&giy&gi~P'UOr+UO#a)VOP#_qT#_qd#_qf#_qm#_qq#_qt#_q}#_q!O#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q#v#_q%S#_q%V#_q%g#_q%h#_q%l#_q%m#_q&R#_q&S#_q&V#_q&Y#_q&`#_q&c#_q&e#_q%U#_q%Y#_q~Ol$wax$wa~P$bOT)ZOl&mi~P'UOx+]Ol&mi~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O~P'UOx+gOy$nO#V+gO~O#h+hOP#eqT#eqd#eqf#eqm#eqq#eqt#eq}#eq!O#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq#v#eq%S#eq%V#eq%g#eq%h#eq%l#eq%m#eq&R#eq&S#eq&V#eq&Y#eq&`#eq&c#eq&e#eq%U#eq%Y#eq~O#V+iOx$yay$ya~Om/iOt/wOy&ni~P'UOx+kOy&ni~Oy$SO%r+mOe&pXx&pX~O%mVOe&pXx&pX~Ox+qOe&oX~Oe+sO~O%T+uO~OT%OO_%OOm/iOt/wOe%|i~P'UOy+wOx$ca!U$ca~Om/iOt/wOy+xOx$ca!U$ca~P'UOm/iOt/wOy*RO!U&Pi~P'UOx+{O!U&Pi~Om/iOt/wOx+{O!U&Pi~P'UOx+{Oy,OO!U&Pi~Oe$_ix$_i!U$_i~P$bOT'wOm/iOt/wO~P'UOl,QO~OT'wOe,ROm/iOt/wO~P'UOT'wOm/iOt/wO!U%zq~P'UOx$^i!Y$^i#^$^i%V$^i%Y$^ie$^iy$^i!j$^i%r$^i~P$bOT(WOm/iOt/wO~P'UO_*lOm/iOt/wO!Y%{q~P'UOx,SO!Y%{q~O!Y,TO~OT(WOm/iOt/wO!Y%uq#^%uq%V%uq%Y%uqe%uqy%uq!j%uq%r%uq~P'UOy,UO~OT*pOm/iOt/wOy&[i!Y&[i!j&[i~P'UOx,ZOy&[i!Y&[i!j&[i~O!Z#^O&^*tO!Y!ka~OT&TOm/iOt/wO#^%`i%V%`i%Y%`i%r%`i~P'UOx,]O#^%`i%V%`i%Y%`i%r%`i~O%mVO#^&ja%V&ja%Y&jae&ja~Ox,`O#^&ja%V&ja%Y&jae&ja~Oe,cO~Ol$wix$wi~P$bOT)ZO~P'UOT)ZOl&mq~P'UOr,fOP#dyT#dyd#dyf#dym#dyq#dyt#dy}#dy!O#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy#v#dy%S#dy%V#dy%g#dy%h#dy%l#dy%m#dy&R#dy&S#dy&V#dy&Y#dy&`#dy&c#dy&e#dy%U#dy%Y#dy~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%U,jO%Y,jO~P'UO#h,kOP#eyT#eyd#eyf#eym#eyq#eyt#ey}#ey!O#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey#v#ey%S#ey%V#ey%g#ey%h#ey%l#ey%m#ey&R#ey&S#ey&V#ey&Y#ey&`#ey&c#ey&e#ey%U#ey%Y#ey~Om/iOt/wOy&nq~P'UOx,oOy&nq~O%r+mOe&pax&pa~OT)pO_)qO%i)rO%mVOe&oa~Ox,sOe&oa~O#y,wO~OT%OO_%OOm/iOt/wO~P'UOm/iOt/wOy,xOx$ci!U$ci~P'UOm/iOt/wOx$ci!U$ci~P'UOy,xOx$ci!U$ci~Om/iOt/wOy*RO~P'UOm/iOt/wOy*RO!U&Pq~P'UOx,{O!U&Pq~Om/iOt/wOx,{O!U&Pq~P'UOq-OO!R%eO!S%dOe%vq!U%vq!Y%vqx%vq~P!,}O_*lOm/iOt/wO!Y%{y~P'UOx$ai!Y$ai~P$bO_*lOm/iOt/wO~P'UOT*pOm/iOt/wO~P'UOT*pOm/iOt/wOy&[q!Y&[q!j&[q~P'UOT&TOm/iOt/wO#^%`q%V%`q%Y%`q%r%`q~P'UO#V-SOx$ra#^$ra%V$ra%Y$rae$ra~O%mVO#^&ji%V&ji%Y&jie&ji~Ox-UO#^&ji%V&ji%Y&jie&ji~Or-XOP#d!RT#d!Rd#d!Rf#d!Rm#d!Rq#d!Rt#d!R}#d!R!O#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R#v#d!R%S#d!R%V#d!R%g#d!R%h#d!R%l#d!R%m#d!R&R#d!R&S#d!R&V#d!R&Y#d!R&`#d!R&c#d!R&e#d!R%U#d!R%Y#d!R~Om/iOt/wOy&ny~P'UOT)pO_)qO%i)rO%mVOe&oi~O#y,wO%U-_O%Y-_O~OT-iOf-gO!V-fO!Z-hO!f-bO!n-dO!o-dO%h-aO%mVO&R[O&S]O&V^O~Om/iOt/wOx$cq!U$cq~P'UOy-nOx$cq!U$cq~Om/iOt/wOy*RO!U&Py~P'UOx-oO!U&Py~Om/iOt-sO~P'UOq-OO!R%eO!S%dOe%vy!U%vy!Y%vyx%vy~P!,}O%mVO#^&jq%V&jq%Y&jqe&jq~Ox-wO#^&jq%V&jq%Y&jqe&jq~OT)pO_)qO%i)rO%mVO~Of-{O!d-yOx#zX#V#zX%b#zXe#zX~Oq#zXy#zX!U#zX!Y#zX~P$$nO%g-}O%h-}Oq#{Xx#{Xy#{X#V#{X%b#{X!U#{Xe#{X!Y#{X~O!f.PO~Ox.TO#V.VO%b.QOq&rXy&rX!U&rXe&rX~O_.YO~P$ WOf-{Oq&sXx&sXy&sX#V&sX%b&sX!U&sXe&sX!Y&sX~Oq.^Oy$nO~Om/iOt/wOx$cy!U$cy~P'UOm/iOt/wOy*RO!U&P!R~P'UOx.bO!U&P!R~Oe%yXq%yX!R%yX!S%yX!U%yX!Y%yXx%yX~P!,}Oq-OO!R%eO!S%dOe%xa!U%xa!Y%xax%xa~O%mVO#^&jy%V&jy%Y&jye&jy~O!d-yOf$Raq$Rax$Ray$Ra#V$Ra%b$Ra!U$Rae$Ra!Y$Ra~O!f.kO~O%g-}O%h-}Oq#{ax#{ay#{a#V#{a%b#{a!U#{ae#{a!Y#{a~O%b.QOq$Pax$Pay$Pa#V$Pa!U$Pae$Pa!Y$Pa~Oq&ray&ra!U&rae&ra~P#NzOx.pOq&ray&ra!U&rae&ra~O!U.sO~Oe.sO~Oy.uO~O!Y.vO~Om/iOt/wOy*RO!U&P!Z~P'UOy.yO~O%r.zO~P$$nOx.{O#V.VO%b.QOe&uX~Ox.{Oe&uX~Oe.}O~O!f/OO~O#V.VOq$}ax$}ay$}a%b$}a!U$}ae$}a!Y$}a~O#V.VO%b.QOq%Rax%Ray%Ra!U%Rae%Ra~Oq&riy&ri!U&rie&ri~P#NzOx/QO#V.VO%b.QO!Y&ta~Oy$Za~P$bOe&ua~P#NzOx/YOe&ua~O_/[O!Y&ti~P$ WOx/^O!Y&ti~Ox/^O#V.VO%b.QO!Y&ti~O#V.VO%b.QOe$Xix$Xi~O%r/aO~P$$nO#V.VO%b.QOe%Qax%Qa~Oe&ui~P#NzOy/dO~O_/[O!Y&tq~P$ WOx/fO!Y&tq~O#V.VO%b.QOx%Pi!Y%Pi~O_/[O~P$ WO_/[O!Y&ty~P$ WO#V.VO%b.QOe$Yix$Yi~O#V.VO%b.QOx%Pq!Y%Pq~Ox*xO#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOm/iOt/wO~P'UOl/nO~Om/nO~P'UOy/oO~Or/pO~P!,}O&S&V&c&e&R!Z&Z&a&d&f&Y&`&Y%m~",goto:"!9p&vPPPP&wP'P*e*}+h,S,o-]P-zP'P.k.k'PPPP'P2PPPPPPP2P4oPP4oP6{7U=QPP=T=c=fPP'P'PPP=rPP'P'PPP'P'P'P'P'P=v>m'PP>pP>vByFcPFw'PPPPF{GR&wP&w&wP&wP&wP&wP&wP&w&w&wP&wPP&wPP&wPGXPG`GfPG`PG`G`PPPG`PIePInItIzIePG`JQPG`PJXJ_PJcJwKfLPJcJcLVLdJcJcJcJcLxMOMRMWMZMaMgMsNVN]NgNm! Z! a! g! m! w! }!!T!!Z!!a!!g!!y!#T!#Z!#a!#g!#q!#w!#}!$T!$Z!$e!$k!$u!${!%U!%[!%k!%s!%}!&UPPPPPPPPP!&[!&d!&m!&w!'SPPPPPPPPPPPP!+r!,[!0j!3vPP!4O!4^!4g!5]!5S!5f!5l!5o!5r!5u!5}!6nPPPPPPPPPP!6q!6tPPPPPPPPP!6z!7W!7d!7j!7s!7v!7|!8S!8Y!8]P!8e!8n!9j!9m]iOr#n$n)c+c'udOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x}!dP#j#w$Y$h$t%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!P!eP#j#w$Y$h$t$v%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!R!fP#j#w$Y$h$t$v$w%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!T!gP#j#w$Y$h$t$v$w$x%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!V!hP#j#w$Y$h$t$v$w$x$y%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!X!iP#j#w$Y$h$t$v$w$x$y$z%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!]!iP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m'uSOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x&ZUOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/x%eWOXYZhrv|}!R!S!T!X!j!l#^#k#n$Q$S$U$X$l$n%O%T%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#}uQ.c-sR/u/w'ldOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xW#ql!O!P$`W#yu&b-s/wQ$b!QQ$r!YQ$s!ZW$}!j'h*O+vS&a#z#{Q'R$mQ(l&ZQ(z&qU({&s(|(}U)O&u)P+RQ)n'[W)o'^+q,s-]S+p)p)qY,_*|,`-T-U-wQ,b+OQ,l+gQ,n+il-`,w-f-g-i.R.T.Y.p.u.z/P/[/a/dQ-v-SQ.Z-hQ.g-{Q.r.VU/V.{/Y/bX/]/Q/^/e/fR&`#yi!xXY!S!T%a%h'y(R)V*]*`*bR%_!wQ!|XQ%z#^Q&i$UR&l$XT-r-O.y![!kP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mQ&^#rR'a$sR'g$}Q%W!nR.e-y'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xS#hc#i!P-d,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/f'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xT#hc#iS#__#`S#b`#cS#da#eS#fb#gT*t(e*uT(f%z(hQ$WwR+o)oX$Uw$V$W&kZkOr$n)c+cXoOr)c+cQ$o!WQ&y$fQ&z$gQ']$qQ'`$sQ)a'QQ)g'VQ)i'WQ)j'XQ)w'_Q)y'aQ+V)VQ+X)WQ+Y)XQ+^)_S+`)b)xQ+d)eQ+e)fQ+f)hQ,d+UQ,e+WQ,g+_Q,h+aQ,m+hQ-W,fQ-Y,kQ-Z,lQ-x-XQ._-lR.x.`WoOr)c+cR#tnQ'_$rR)b'RQ+n)oR,q+oQ)x'_R+a)bZmOnr)c+cQ'c$tR){'dT,u+u,vu-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dt-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dQ.Z-hX/]/Q/^/e/f!P-c,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/fQ.O-bR.l.Pg.R-e.S.h.o.t/S/U/W/c/g/hu-j,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dX-|-`-j.g/VR.i-{V/X.{/Y/bR.`-lQrOR#vrQ&c#|R(q&cS%n#R$OS(Y%n(]T(]%q&eQ%b!zQ%i!}W'z%b%i(P(TQ(P%fR(T%kQ&n$YR(w&nQ(`%rQ*g(ZT*m(`*gQ'i%PR*P'iS'l%S%TY*T'l*U+|,|-pU*U'm'n'oU+|*V*W*XS,|+},OR-p,}Q#Y]R%u#YQ#]^R%w#]Q#`_R%{#`Q(c%xS*r(c*sR*s(dQ*u(eR,[*uQ#c`R%}#cQ#eaR&O#eQ#gbR&P#gQ#icR&Q#iQ#lfQ&S#jW&V#l&S(t*yQ(t&hR*y/mQ$VwS&j$V&kR&k$WQ&x$dR)T&xQ&[#qR(m&[Q$`!PR&r$`Q*}({S,a*}-VR-V,bQ&v$bR)Q&vQ#ojR&X#oQ+c)cR,i+cQ)U&yR+T)UQ&|$hS)]&|)^R)^&}Q'U$oR)d'UQ'Z$pS)m'Z+lR+l)nQ+r)sR,t+rWnOr)c+cR#snQ,v+uR-^,vd.S-e.h.o.t/S/U/W/c/g/hR.n.SU-z-`.g/VR.f-zQ/R.tS/_/R/`R/`/SS.|.h.iR/Z.|Q.U-eR.q.USqOrT+b)c+cWpOr)c+cR'S$nYjOr$n)c+cR&W#n[wOr#n$n)c+cR&i$U&YPOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/xQ!oSQ#jeQ#wsU$Yx%d'}S$h!U$kQ$t![Q$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ${!iQ%f!{Q%k#OQ%q#SQ%r#TQ&e$PQ&}$iQ'd$uQ(j&TU(u&m(v*zW)Y&{)[+[+]Q*Z'wQ*d(WQ+Z)ZQ,V*lQ.w.^R/m/rQ!zXQ!}YQ$f!SQ$g!T^'v%a%h'y(R*]*`*bR+W)V[fOr#n$n)c+ch!wXY!S!T%a%h'y(R)V*]*`*bQ#RZQ#mhS$Ov|Q$]}W$d!R$X'O)`S$p!X$lW$|!j'h*O+vQ%S!lQ%x#^`&U#k&R(i(k(s*x,]/qQ&f$QQ&g$SQ&h$UQ'e%OQ'o%TQ'u%_W(V%m(X*e*iQ(Z%oQ(d%yQ(o&`S(r&d/oQ(x&oQ(y&pU)R&w)S+SQ)h'VY)k'Y)l+j+k,oQ)|'g^*Q'k*S+z+{,{-o.bQ*W'mQ*X'nS*Y'r/pW*k(_*f,S,WW*o(b*q,Y,ZQ+t)vQ+y*RQ+}*VQ,X*pQ,^*{Q,p+nQ,y+wQ,z+xQ,},OQ-R,UQ-[,qQ-m,xR.a-nhTOr#k#n$n&R&d'r(i(k)c+c$z!vXYZhv|}!R!S!T!X!j!l#^$Q$S$U$X$l%O%T%_%a%h%m%o%y&`&o&p&w'O'V'Y'g'h'k'm'n'y(R(X(_(b(s)S)V)`)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#xtW%X!p!t/j/tQ%Y!qQ%Z!rQ%]!uQ%g/iS'q%[/nQ's/kQ't/lQ,P*^Q-Q,QS-q-O.yR/v/xU#|u-s/wR(p&b[gOr#n$n)c+cX!yX#^$U$XQ#WZQ$RvR$[|Q%c!zQ%j!}Q%p#RQ'e$|Q(Q%fQ(U%kQ(^%qQ(a%rQ*h(ZQ-P,PQ-u-QR.d-tQ$ZxQ'|%dR*_'}Q-t-OR/T.yR#QYR#VZR%R!jQ%P!jV)}'h*O+v!]!mP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mR%U!lR%z#^Q(g%zR*w(hQ$e!RQ&l$XQ)_'OR+_)`Q#rlQ$^!OQ$a!PR&t$`Q(z&sR+Q(}Q(z&sQ+P(|R+Q(}R$c!QXpOr)c+cQ$j!UR'P$kQ$q!XR'Q$lR)u'^Q)s'^V,r+q,s-]Q-l,wQ.W-fR.X-gU-e,w-f-gQ.]-iQ.h-{Q.m.RU.o.T.p/PQ.t.YQ/S.uQ/U.zU/W.{/Y/bQ/c/[Q/g/aR/h/dR.[-hR.j-{",nodeNames:" print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:267,context:MEe,nodeProps:[["group",-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,23,38,47,48,54,55,58,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-10,105,107,110,112,113,117,119,124,126,129,"Statement",-9,134,135,138,139,141,142,143,144,145,"Pattern"],["openedBy",21,"(",52,"[",56,"{"],["closedBy",22,")",53,"]",57,"}"]],propSources:[DEe],skippedNodes:[0,2],repeatNodeCount:38,tokenData:")'WMgR!`OX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr!Gkrs!Ktst#J]tu%Tuv&'{vw&*kwx&+}xy'*fyz'+rz{'-O{|'/z|}'1^}!O'2j!O!P'5]!P!Q'Ae!Q!R'Da!R!['Ho![!](&g!]!^()V!^!_(*c!_!`(-_!`!a(.q!a!b%T!b!c(1j!c!d(3O!d!e(4|!e!h(3O!h!i(?z!i!t(3O!t!u(J[!u!w(3O!w!x(>S!x!}(3O!}#O(Ll#O#P!Fp#P#Q(Mx#Q#R) U#R#S(3O#S#T%T#T#U(3O#U#V(4|#V#Y(3O#Y#Z(?z#Z#f(3O#f#g(J[#g#i(3O#i#j(>S#j#o(3O#o#p)!h#p#q)#d#q#r)$v#r#s)%z#s$g%T$g;'S(3O;'S;=`(4v<%lO(3O<r%f]&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<Q&j]&^7[&TS&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c<Q'r]&^7[&TS&WW&Z`&d!b&f#tOr'crs&_sw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c;p(t]&^7[&WW&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p)z]&^7[&TS&WW&d!b&f#tOr)mrs*ssw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p*|]&^7[&TS&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p,O]&^7[&TS&d!bOr)mrs,wsw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m8r-QZ&^7[&TS&d!bOw,wwx-sx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r-xZ&^7[Ow,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r.pZ&^7[Ow,wwx/cx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w7[/hT&^7[O#o/c#p#q/c#r;'S/c;'S;=`/w<%lO/c7[/zP;=`<%l/c8r0SW&^7[O#o,w#o#p0l#p#q,w#q#r0l#r;'S,w;'S;=`7Q;=`<%l0l<%lO,w!f0sX&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f1cXOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2RWOw0lx#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2nRO;'S0l;'S;=`2w;=`O0l!f3OY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l0l<%lO0l!f3sX&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p0l#p;'S4`;'S;=`6t<%lO4`S4eV&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S4}VOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5gUOw4`x#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5|RO;'S4`;'S;=`6V;=`O4`S6[W&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`S6wP;=`<%l4`!f6}P;=`<%l0l8r7XY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l,w<%lO0l8r7zP;=`<%l,w;p8SW&^7[O#o)m#o#p8l#p#q)m#q#r8l#r;'S)m;'S;=`Jf;=`<%l8l<%lO)m%d8wZ&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d9qZ&TS&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d:kZ&TS&d!bOr8lrs0lsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d;eZ&WW&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d<_Z&WW&f#tOr8lrs9jsw8lwx=Qx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l#|=XX&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|=wXOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|>gWOr=Qs#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|?SRO;'S=Q;'S;=`?];=`O=Q#|?dY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l=Q<%lO=Q#|@XX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p=Q#p;'S@t;'S;=`CY<%lO@tW@yV&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWAcVOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWA{UOr@ts#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWBbRO;'S@t;'S;=`Bk;=`O@tWBpW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l@t<%lO@tWC]P;=`<%l@t#|CcP;=`<%l=Q%dCiRO;'S8l;'S;=`Cr;=`O8l%dC}[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l8l<%lO8l%dDzZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p8l#p;'SEm;'S;=`JY<%lOEm[EtX&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[FfX&TSOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GWX&TSOrEmrs4`swEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GxX&WWOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[HjX&WWOrEmrsFaswEmwx@tx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[IYRO;'SEm;'S;=`Ic;=`OEm[IjY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%lEm<%lOEm[J]P;=`<%lEm%dJcP;=`<%l8l;pJq[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l)m<%lO8l;pKjP;=`<%l)m;pKv]&^7[&WW&f#tOr)mrs*ssw)mwxLox#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m:YLxZ&^7[&WW&f#tOrLorsMks#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YMpZ&^7[OrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YNhZ&^7[OrLors/cs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:Y! `W&^7[O#oLo#o#p=Q#p#qLo#q#r=Q#r;'SLo;'S;=`! x;=`<%l=Q<%lOLo:Y!!PY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%lLo<%lO=Q:Y!!rP;=`<%lLo<Q!!zW&^7[O#o'c#o#p!#d#p#q'c#q#r!#d#r;'S'c;'S;=`!+^;=`<%l!#d<%lO'c%t!#qZ&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!$mZ&TS&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!%iZ&TS&Z`&d!bOr!#drs!&[sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d!v!&eX&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w<%lO!&[!v!'TRO;'S!&[;'S;=`!'^;=`O!&[!v!'gY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!&[<%lO!&[!v!([X&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p!&[#p;'S4`;'S;=`6t<%lO4`!v!(zP;=`<%l!&[%t!)QRO;'S!#d;'S;=`!)Z;=`O!#d%t!)h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l!#d<%lO!#d%t!*eZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!#d#p;'SEm;'S;=`JY<%lOEm%t!+ZP;=`<%l!#d<Q!+k[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l'c<%lO!#d<Q!,dP;=`<%l'c<Q!,r]&^7[&TS&Z`&d!bOr'crs!-ksw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c9S!-vZ&^7[&TS&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-k9S!.nW&^7[O#o!-k#o#p!&[#p#q!-k#q#r!&[#r;'S!-k;'S;=`!/W;=`<%l!&[<%lO!-k9S!/aY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!-k<%lO!&[9S!0SP;=`<%l!-k<b!0b]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!1j]&^7[&TS&WW&ap&d!b&f#tOr!1Zrs*ssw!1Zwx!0Vx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!2hW&^7[O#o!1Z#o#p!3Q#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!:z;=`<%l!3Q<%lO!1Z&U!3_Z&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!4ZZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!5VZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!5xx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q$n!6RX&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e<%lO!5x$n!6qRO;'S!5x;'S;=`!6z;=`O!5x$n!7TY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!5x<%lO!5x$n!7xX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p!5x#p;'S@t;'S;=`CY<%lO@t$n!8hP;=`<%l!5x&U!8nRO;'S!3Q;'S;=`!8w;=`O!3Q&U!9U[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!3Q<%lO!3Q&U!:RZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!3Q#p;'SEm;'S;=`JY<%lOEm&U!:wP;=`<%l!3Q<b!;X[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!1Z<%lO!3Q<b!<QP;=`<%l!1Z<b!<`]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!=Xx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z:z!=dZ&^7[&WW&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=X:z!>[W&^7[O#o!=X#o#p!5x#p#q!=X#q#r!5x#r;'S!=X;'S;=`!>t;=`<%l!5x<%lO!=X:z!>}Y&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!=X<%lO!5x:z!?pP;=`<%l!=X<r!?xW&^7[O#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T&f!@qZ&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@b&f!AgRO;'S!@b;'S;=`!Ap;=`O!@b&f!BP[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l!@b<%lO!@b&f!B|Z&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEm&f!CrP;=`<%l!@b<r!DU[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l%T<%lO!@b<r!D}P;=`<%l%TMg!Eec&^7[&TS&WW%[1s&Z`&ap&d!b&f#tOX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr%Trs&_sw%Twx!0Vx#O%T#O#P!Fp#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg!Fu[&^7[OY%TYZ!EQZ]%T]^!EQ^#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T<u!G|d&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#T%T#T#U!Jh#U#f%T#f#g!Jh#g#h!Jh#h#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!Io]kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!J{]!jR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{!LTa&bp&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs#HTsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!Mka&^7[&TS&WW&R,X&Z`&d!b&f#tOY!MYYZ'cZ]!MY]^'c^r!MYrs!Npsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!N}]&^7[&TS&R,X&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cFy#!Ra&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#;fx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy##ga&^7[&TS&WW&R,X&d!b&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx# vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy#$w]&^7[&TS&R,X&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy#%uW&^7[O#o##W#o#p#&_#p#q##W#q#r#&_#r;'S##W;'S;=`#:P;=`<%l#&_<%lO##W0m#&l_&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#'tZ&TS&R,X&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m#(p_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#)ox#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#)x_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#*wx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_/V#+Q]&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q<%lO#*w/V#,OX&R,XOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q/V#,nRO;'S#*w;'S;=`#,w;=`O#*w/V#-Q^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#*w<%lO#*w/V#.T]&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P#o#.|#o#p#*w#p;'S#.|;'S;=`#1k<%lO#.|,a#/TZ&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k<%lO#.|,a#/{V&R,XOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@t,a#0eRO;'S#.|;'S;=`#0n;=`O#.|,a#0u[&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k;=`<%l#.|<%lO#.|,a#1nP;=`<%l#.|/V#1tP;=`<%l#*w0m#1zRO;'S#&_;'S;=`#2T;=`O#&_0m#2b`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l#&_<%lO#&_0m#3m_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#&_#p;'S#4l;'S;=`#9s<%lO#4l,e#4u]&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#5uX&TS&R,XOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e#6i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#7bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#7i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#.|x#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#8eRO;'S#4l;'S;=`#8n;=`O#4l,e#8w^&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s;=`<%l#4l<%lO#4l,e#9vP;=`<%l#4l0m#9|P;=`<%l#&_Fy#:^`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l##W<%lO#&_Fy#;cP;=`<%l##WFy#;qa&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#<vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WEc#=R_&^7[&WW&R,X&f#tOY#<vYZLoZ]#<v]^Lo^r#<vrs#>Qs#O#<v#O#P#>z#P#o#<v#o#p#-|#p#q#<v#q#r#*w#r;'S#<v;'S;=`#@n<%lO#<vEc#>XZ&^7[&R,XOrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLoEc#?PW&^7[O#o#<v#o#p#*w#p#q#<v#q#r#*w#r;'S#<v;'S;=`#?i;=`<%l#*w<%lO#<vEc#?r^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#<v<%lO#*wEc#@qP;=`<%l#<vGZ#@yW&^7[O#o!MY#o#p#Ac#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#Fl;=`<%l#Ac<%lO!MY0}#Ar_&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff<%lO#Ac0}#B|Z&TS&R,X&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d0}#CrRO;'S#Ac;'S;=`#C{;=`O#Ac0}#D[`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l#Ac<%lO#Ac0}#Eg_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#Ac#p;'S#4l;'S;=`#9s<%lO#4l0}#FiP;=`<%l#AcGZ#F{`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l!MY<%lO#AcGZ#HQP;=`<%l!MYGZ#Hb]&^7[&TS&R,X&Z`&d!bOr'crs#IZsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ#IjZ&X#|&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kMg#JpaQ1s&^7[&TS&WW&Z`&ap&d!b&f#tOY#J]YZ%TZ]#J]]^%T^r#J]rs#Kusw#J]wx%;ax#O#J]#O#P& a#P#o#J]#o#p&%b#p#q#J]#q#r&!^#r;'S#J];'S;=`&'u<%lO#J]Lu#LSaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%6usw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLu#MjaQ1s&^7[&TS&WW&Z`&d!b&f#tOY#MXYZ'cZ]#MX]^'c^r#MXrs#Kusw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLe#NzaQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%#ix#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$!`aQ1s&^7[&TS&WW&d!b&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$#paQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$$usw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$%QaQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$&Vsw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PIg$&b_Q1s&^7[&TS&d!bOY$&VYZ,wZ]$&V]^,w^w$&Vwx$'ax#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$'h_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$(gx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$(n_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$)mx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VHP$)tZQ1s&^7[OY$)mYZ/cZ]$)m]^/c^#o$)m#o#p$*g#p#q$)m#q#r$*g#r;'S$)m;'S;=`$+R<%lO$)m1s$*lTQ1sOY$*gZ]$*g^;'S$*g;'S;=`$*{<%lO$*g1s$+OP;=`<%l$*gHP$+UP;=`<%l$)mIg$+`[Q1s&^7[OY$&VYZ,wZ]$&V]^,w^#o$&V#o#p$,U#p#q$&V#q#r$,U#r;'S$&V;'S;=`$5j;=`<%l0l<%lO$&V3Z$,_]Q1s&TS&d!bOY$,UYZ0lZ]$,U]^0l^w$,Uwx$-Wx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$-]]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$.Ux#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$.Z]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$*gx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$/XWQ1sOY$,UYZ0lZ]$,U]^0l^;'S$,U;'S;=`$/q;=`<%l0l<%lO$,U3Z$/xY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$,U<%lO0l3Z$0o]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p$,U#p;'S$1h;'S;=`$5^<%lO$1h1w$1oZQ1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$2gZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$3Yx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$3_ZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$*gx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$4VWQ1sOY$1hYZ4`Z]$1h]^4`^;'S$1h;'S;=`$4o;=`<%l4`<%lO$1h1w$4tW&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l$1h<%lO4`1w$5aP;=`<%l$1h3Z$5gP;=`<%l$,UIg$5qY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$&V<%lO0lIg$6dP;=`<%l$&VLe$6n[Q1s&^7[OY$!PYZ)mZ]$!P]^)m^#o$!P#o#p$7d#p#q$!P#q#r$7d#r;'S$!P;'S;=`%!b;=`<%l8l<%lO$!P6X$7q_Q1s&TS&WW&d!b&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$8y_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$9xsw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$:R_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$,Usw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$;Z_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$<Yx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$<c_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$=bx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d4q$=k]Q1s&WW&f#tOY$=bYZ=QZ]$=b]^=Q^r$=brs$>ds#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$>i]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$?bs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$?g]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$*gs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$@eWQ1sOY$=bYZ=QZ]$=b]^=Q^;'S$=b;'S;=`$@};=`<%l=Q<%lO$=b4q$AUY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l$=b<%lO=Q4q$A{]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p$=b#p;'S$Bt;'S;=`$Fj<%lO$Bt1{$B{ZQ1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$CsZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Dfs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$DkZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$*gs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$EcWQ1sOY$BtYZ@tZ]$Bt]^@t^;'S$Bt;'S;=`$E{;=`<%l@t<%lO$Bt1{$FQW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l$Bt<%lO@t1{$FmP;=`<%l$Bt4q$FsP;=`<%l$=b6X$F{WQ1sOY$7dYZ8lZ]$7d]^8l^;'S$7d;'S;=`$Ge;=`<%l8l<%lO$7d6X$Gp[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$7d<%lO8l6X$Ho_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p$7d#p;'S$In;'S;=`%!U<%lO$In2P$Iw]Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Jw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$Kpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Kw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$1hsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Lw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Mpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Mw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Btx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$NuWQ1sOY$InYZEmZ]$In]^Em^;'S$In;'S;=`% _;=`<%lEm<%lO$In2P% fY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%l$In<%lOEm2P%!XP;=`<%l$In6X%!_P;=`<%l$7dLe%!m[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$!P<%lO8lLe%#fP;=`<%l$!PLe%#taQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%$yx#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PJ}%%U_Q1s&^7[&WW&f#tOY%$yYZLoZ]%$y]^Lo^r%$yrs%&Ts#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%&[_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs%'Zs#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%'b_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs$)ms#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%(h[Q1s&^7[OY%$yYZLoZ]%$y]^Lo^#o%$y#o#p$=b#p#q%$y#q#r$=b#r;'S%$y;'S;=`%)^;=`<%l=Q<%lO%$yJ}%)eY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l%$y<%lO=QJ}%*WP;=`<%l%$yLu%*b[Q1s&^7[OY#MXYZ'cZ]#MX]^'c^#o#MX#o#p%+W#p#q#MX#q#r%+W#r;'S#MX;'S;=`%5l;=`<%l!#d<%lO#MX6i%+g_Q1s&TS&WW&Z`&d!b&f#tOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%,fsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%,q_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%-psw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%-{_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%.zsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W3k%/V]Q1s&TS&Z`&d!bOY%.zYZ!&[Z]%.z]^!&[^w%.zwx$-Wx#O%.z#O#P%0O#P#o%.z#o#p%1f#p;'S%.z;'S;=`%2f<%lO%.z3k%0TWQ1sOY%.zYZ!&[Z]%.z]^!&[^;'S%.z;'S;=`%0m;=`<%l!&[<%lO%.z3k%0vY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%.z<%lO!&[3k%1m]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p%.z#p;'S$1h;'S;=`$5^<%lO$1h3k%2iP;=`<%l%.z6i%2qWQ1sOY%+WYZ!#dZ]%+W]^!#d^;'S%+W;'S;=`%3Z;=`<%l!#d<%lO%+W6i%3h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l%+W<%lO!#d6i%4g_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%+W#p;'S$In;'S;=`%!U<%lO$In6i%5iP;=`<%l%+WLu%5y[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l#MX<%lO!#dLu%6rP;=`<%l#MXLu%7SaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%8Xsw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXIw%8f_Q1s&^7[&TS&Z`&d!bOY%8XYZ!-kZ]%8X]^!-k^w%8Xwx$'ax#O%8X#O#P%9e#P#o%8X#o#p%1f#p#q%8X#q#r%.z#r;'S%8X;'S;=`%;Z<%lO%8XIw%9l[Q1s&^7[OY%8XYZ!-kZ]%8X]^!-k^#o%8X#o#p%.z#p#q%8X#q#r%.z#r;'S%8X;'S;=`%:b;=`<%l!&[<%lO%8XIw%:kY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%8X<%lO!&[Iw%;^P;=`<%l%8XMV%;naQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%Jux#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%=UaQ1s&^7[&TS&WW&ap&d!b&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%;ax#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%>b[Q1s&^7[OY%<sYZ!1ZZ]%<s]^!1Z^#o%<s#o#p%?W#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Il;=`<%l!3Q<%lO%<s6y%?g_Q1s&TS&WW&ap&d!b&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%@fx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%@q_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Apx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%A{_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Bzx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W5c%CV]Q1s&WW&ap&f#tOY%BzYZ!5xZ]%Bz]^!5x^r%Bzrs$>ds#O%Bz#O#P%DO#P#o%Bz#o#p%Ef#p;'S%Bz;'S;=`%Ff<%lO%Bz5c%DTWQ1sOY%BzYZ!5xZ]%Bz]^!5x^;'S%Bz;'S;=`%Dm;=`<%l!5x<%lO%Bz5c%DvY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%Bz<%lO!5x5c%Em]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p%Bz#p;'S$Bt;'S;=`$Fj<%lO$Bt5c%FiP;=`<%l%Bz6y%FqWQ1sOY%?WYZ!3QZ]%?W]^!3Q^;'S%?W;'S;=`%GZ;=`<%l!3Q<%lO%?W6y%Gh[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%?W<%lO!3Q6y%Hg_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%?W#p;'S$In;'S;=`%!U<%lO$In6y%IiP;=`<%l%?WMV%Iy[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%<s<%lO!3QMV%JrP;=`<%l%<sMV%KSaQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%LXx#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sKo%Lf_Q1s&^7[&WW&ap&f#tOY%LXYZ!=XZ]%LX]^!=X^r%LXrs%&Ts#O%LX#O#P%Me#P#o%LX#o#p%Ef#p#q%LX#q#r%Bz#r;'S%LX;'S;=`& Z<%lO%LXKo%Ml[Q1s&^7[OY%LXYZ!=XZ]%LX]^!=X^#o%LX#o#p%Bz#p#q%LX#q#r%Bz#r;'S%LX;'S;=`%Nb;=`<%l!5x<%lO%LXKo%NkY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%LX<%lO!5xKo& ^P;=`<%l%LXMg& h[Q1s&^7[OY#J]YZ%TZ]#J]]^%T^#o#J]#o#p&!^#p#q#J]#q#r&!^#r;'S#J];'S;=`&&p;=`<%l!@b<%lO#J]7Z&!o_Q1s&TS&WW&Z`&ap&d!b&f#tOY&!^YZ!@bZ]&!^]^!@b^r&!^rs%,fsw&!^wx%@fx#O&!^#O#P&#n#P#o&!^#o#p&%b#p;'S&!^;'S;=`&&j<%lO&!^7Z&#sWQ1sOY&!^YZ!@bZ]&!^]^!@b^;'S&!^;'S;=`&$];=`<%l!@b<%lO&!^7Z&$l[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l&!^<%lO!@b7Z&%k_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p&!^#p;'S$In;'S;=`%!U<%lO$In7Z&&mP;=`<%l&!^Mg&'P[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l#J]<%lO!@bMg&'xP;=`<%l#J]Gz&(`_%jQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&)r]!s,W&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&+O_%dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{&,^a&_`&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx'(^x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk&-ta&^7[&TS&WW&R,X&ap&d!b&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx&Mwx#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cFy&/Ua&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Hisw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&0ja&^7[&TS&WW&R,X&d!b&f#tOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&.ysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&1z]&^7[&WW&R,X&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy&2xW&^7[O#o&0Z#o#p&3b#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&GS;=`<%l&3b<%lO&0Z0m&3o_&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&4w_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&5vsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&6P_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&7Osw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b-o&7X]&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x<%lO&7O-o&8VX&R,XOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l-o&8uRO;'S&7O;'S;=`&9O;=`O&7O-o&9X^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&7O<%lO&7O-o&:[]&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P#o&;T#o#p&7O#p;'S&;T;'S;=`&=r<%lO&;T,]&;[Z&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r<%lO&;T,]&<SV&R,XOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`,]&<lRO;'S&;T;'S;=`&<u;=`O&;T,]&<|[&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r;=`<%l&;T<%lO&;T,]&=uP;=`<%l&;T-o&={P;=`<%l&7O0m&>XZ&WW&R,X&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m&>}RO;'S&3b;'S;=`&?W;=`O&3b0m&?e`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&3b<%lO&3b0m&@p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p&3b#p;'S&Ao;'S;=`&Fv<%lO&Ao,e&Ax]&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Bx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Cqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Cx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&;Tsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&DxX&WW&R,XOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e&EhRO;'S&Ao;'S;=`&Eq;=`O&Ao,e&Ez^&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv;=`<%l&Ao<%lO&Ao,e&FyP;=`<%l&Ao0m&GPP;=`<%l&3bFy&Ga`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&0Z<%lO&3bFy&HfP;=`<%l&0ZFy&Hta&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Iysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZC{&JU_&^7[&TS&R,X&d!bOY&IyYZ,wZ]&Iy]^,w^w&Iywx&KTx#O&Iy#O#P&K}#P#o&Iy#o#p&:T#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Mq<%lO&IyC{&K[Z&^7[&R,XOw,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,wC{&LSW&^7[O#o&Iy#o#p&7O#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Ll;=`<%l&7O<%lO&IyC{&Lu^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&Iy<%lO&7OC{&MtP;=`<%l&IyGk&NU]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk' SW&^7[O#o&-c#o#p' l#p#q&-c#q#r' l#r;'S&-c;'S;=`'&u;=`<%l' l<%lO&-c1_' {_&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o<%lO' l1_'#VZ&WW&R,X&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q1_'#{RO;'S' l;'S;=`'$U;=`O' l1_'$e`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l' l<%lO' l1_'%p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p' l#p;'S&Ao;'S;=`&Fv<%lO&Ao1_'&rP;=`<%l' lGk''U`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l&-c<%lO' lGk'(ZP;=`<%l&-cGk'(k]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx')dx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk')sZ&U!f&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XG{'*y]f,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u',V]eR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'-caT,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vxz%Tz{'.h{!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'.{__R&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'0__%g,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u'1q]xR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg'2}`%h,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`!a'4P!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TB^'4d]&q&j&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'5pa!dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'6u!P!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'7W_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'8V!P#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'8j]!m,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'9vi!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'9c#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy';vc&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx{%T{|'=R|}%T}!O'=R!O!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'=d_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'>ve!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'>c#S#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'@l]!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'Axa%iR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!P%T!P!Q'B}!Q!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz'Cb_%kQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Dtw!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!d%T!d!e'Jw!e!g%T!g!h';e!h!l%T!l!m'@X!m!q%T!q!r'M}!r!z%T!z!{(!}!{#O%T#O#P!?s#P#R%T#R#S'Ho#S#U%T#U#V'Jw#V#X%T#X#Y';e#Y#^%T#^#_'@X#_#c%T#c#d'M}#d#l%T#l#m(!}#m#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Gp_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'ISk!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'Ho#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'KYb&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Lub!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'N`a&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy( xa!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(#`e&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(%Ue!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(&z_y1s&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`('y!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u((^]%sR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{()j]#^,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(*vakR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!^%T!^!_(+{!_!`!I[!`!a!I[!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(,`_%eQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(-r_%r,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(/U`kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`!a(0W!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(0k_%fQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(2P_]Q#tP&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(3ee&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs&_sw%Twx!0Vx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(4yP;=`<%l(3OMg(5ci&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(>S#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(7_a&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs(8dsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ(8q]&^7[&TS&R,X&Z`&d!bOr'crs(9jsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](9wZ&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(:wa&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx(;|x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk(<Z]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx(=Sx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(=aZ&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(>ie&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(@ai&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(Hd!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(Hd#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(B]]&^7[&TS&Z`&d!b&`,XOr'crs(CUsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ(Ca]&^7[&TS&Z`&d!bOr'crs(DYsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](DgZ&^7[&TS&e,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(Eg]&^7[&WW&ap&f#t&Y,XOr!1Zrs*ssw!1Zwx(F`x#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk(Fk]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx(Gdx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(GqZ&^7[&WW&c,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(Hye&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(Jqm&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!h(3O!h!i(Hd!i!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#U(3O#U#V(>S#V#Y(3O#Y#Z(Hd#Z#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OG{(MP]!V,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u(N]]!UR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz) i_%cQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy)!qZ&TS&WW!ZGmOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEmG{)#w_%bR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u)%XZ!Y7_&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@bGy)&_]%l,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T",tokenizers:[PEe,kEe,0,1,2,3,4,5,6,7,8,9,10,AEe],topRules:{Script:[0,3]},specialized:[{term:213,get:n=>LEe[n]||-1}],tokenPrec:7282});class qn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),gu.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),gu.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Xb(this),o=new Xb(e);for(let a=t,l=t;;){if(r.next(a),o.next(a),a=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new Xb(this,e)}iterRange(e,t=this.length){return new xK(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new $K(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?qn.empty:e.length<=32?new Sr(e):gu.from(Sr.split(e,[]))}}class Sr extends qn{constructor(e,t=BEe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let a=this.text[o],l=r+a.length;if((t?i:l)>=e)return new FEe(r,l,i,a);r=l+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new Sr(nH(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let a=i.pop(),l=a$(o.text,a.text.slice(),0,o.length);if(l.length<=32)i.push(new Sr(l,a.length+o.length));else{let u=l.length>>1;i.push(new Sr(l.slice(0,u)),new Sr(l.slice(u)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Sr))return super.replace(e,t,i);let r=a$(this.text,a$(i.text,nH(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new Sr(r,o):gu.from(Sr.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){let r="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let l=this.text[a],u=o+l.length;o>e&&a&&(r+=i),e<u&&t>o&&(r+=l.slice(Math.max(0,e-o),t-o)),o=u+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new Sr(i,r)),i=[],r=-1);return r>-1&&t.push(new Sr(i,r)),t}}class gu extends qn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let a=this.children[o],l=r+a.length,u=i+a.lines-1;if((t?u:l)>=e)return a.lineInner(e,t,i,r);r=l+1,i=u+1}}decompose(e,t,i,r){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let l=this.children[o],u=a+l.length;if(e<=u&&t>=a){let h=r&((a<=e?1:0)|(u>=t?2:0));a>=e&&u<=t&&!h?i.push(l):l.decompose(e-a,t-a,i,h)}a=u+1}}replace(e,t,i){if(i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let a=this.children[r],l=o+a.length;if(e>=o&&t<=l){let u=a.replace(e-o,t-o,i),h=this.lines-a.lines+u.lines;if(u.lines<h>>5-1&&u.lines>h>>5+1){let d=this.children.slice();return d[r]=u,new gu(d,this.length-(t-e)+i.length)}return super.replace(o,l,u)}o=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let r="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let l=this.children[o],u=a+l.length;a>e&&o&&(r+=i),e<u&&t>a&&(r+=l.sliceString(e-a,t-a,i)),a=u+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof gu))return 0;let i=0,[r,o,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==a||o==l)return i;let u=this.children[r],h=e.children[o];if(u!=h)return i+u.scanIdentical(h,t);i+=u.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let g of e)i+=g.lines;if(i<32){let g=[];for(let v of e)v.flatten(g);return new Sr(g,t)}let r=Math.max(32,i>>5),o=r<<1,a=r>>1,l=[],u=0,h=-1,d=[];function p(g){let v;if(g.lines>o&&g instanceof gu)for(let y of g.children)p(y);else g.lines>a&&(u>a||!u)?(m(),l.push(g)):g instanceof Sr&&u&&(v=d[d.length-1])instanceof Sr&&g.lines+v.lines<=32?(u+=g.lines,h+=g.length+1,d[d.length-1]=new Sr(v.text.concat(g.text),v.length+1+g.length)):(u+g.lines>r&&m(),u+=g.lines,h+=g.length+1,d.push(g))}function m(){u!=0&&(l.push(d.length==1?d[0]:gu.from(d,h)),h=-1,u=d.length=0)}for(let g of e)p(g);return m(),l.length==1?l[0]:new gu(l,t)}}qn.empty=new Sr([""],0);function BEe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function a$(n,e,t=0,i=1e9){for(let r=0,o=0,a=!0;o<n.length&&r<=i;o++){let l=n[o],u=r+l.length;u>=t&&(u>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),a?(e[e.length-1]+=l,a=!1):e.push(l)),r=u+1}return e}function nH(n,e,t){return a$(n,[""],e,t)}class Xb{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Sr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],a=o>>1,l=r instanceof Sr?r.text.length:r.children.length;if(a==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Sr){let u=r.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=r.children[a+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof Sr?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class xK{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Xb(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $K{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(qn.prototype[Symbol.iterator]=function(){return this.iter()},Xb.prototype[Symbol.iterator]=xK.prototype[Symbol.iterator]=$K.prototype[Symbol.iterator]=function(){return this});class FEe{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}let Y0="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Y0.length;n++)Y0[n]+=Y0[n-1];function UEe(n){for(let e=1;e<Y0.length;e+=2)if(Y0[e]>n)return Y0[e-1]<=n;return!1}function iH(n){return n>=127462&&n<=127487}const rH=8205;function Po(n,e,t=!0,i=!0){return(t?CK:GEe)(n,e,i)}function CK(n,e,t){if(e==n.length)return e;e&&AK(n.charCodeAt(e))&&kK(n.charCodeAt(e-1))&&e--;let i=Gs(n,e);for(e+=Tl(i);e<n.length;){let r=Gs(n,e);if(i==rH||r==rH||t&&UEe(r))e+=Tl(r),i=r;else if(iH(r)){let o=0,a=e-2;for(;a>=0&&iH(Gs(n,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function GEe(n,e,t){for(;e>0;){let i=CK(n,e-2,t);if(i<e)return i;e--}return 0}function AK(n){return n>=56320&&n<57344}function kK(n){return n>=55296&&n<56320}function Gs(n,e){let t=n.charCodeAt(e);if(!kK(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return AK(i)?(t-55296<<10)+(i-56320)+65536:t}function AF(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Tl(n){return n<65536?1:2}const LL=/\r\n?|\n/;var Qs=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Qs||(Qs={}));class Au{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(i,r,o),r+=o):r+=a,i+=o}}iterChangedRanges(e,t=!1){NL(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Au(e)}composeDesc(e){return this.empty?e:e.empty?this:IK(this,e)}mapDesc(e,t=!1){return e.empty?this:BL(this,e,t)}mapPos(e,t=-1,i=Qs.Simple){let r=0,o=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],u=this.sections[a++],h=r+l;if(u<0){if(h>e)return o+(e-r);o+=l}else{if(i!=Qs.Simple&&h>=e&&(i==Qs.TrackDel&&r<e&&h>e||i==Qs.TrackBefore&&r<e||i==Qs.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==r||t<0?o:o+u;o+=u}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],a=this.sections[i++],l=r+o;if(a>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Au(e)}static create(e){return new Au(e)}}class jr extends Au{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return NL(this,(t,i,r,o,a)=>e=e.replace(r,r+(i-t),a),!1),e}mapDesc(e,t=!1){return BL(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let a=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=a;let u=r>>1;for(;i.length<u;)i.push(qn.empty);i.push(a?e.slice(o,o+a):qn.empty)}o+=a}return new jr(t,i)}compose(e){return this.empty?e:e.empty?this:IK(this,e,!0)}map(e,t=!1){return e.empty?this:BL(this,e,t,!0)}iterChanges(e,t=!1){NL(this,e,t)}get desc(){return Au.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new YS(this);e:for(let a=0,l=0;;){let u=a==e.length?1e9:e[a++];for(;l<u||l==u&&o.len==0;){if(o.done)break e;let d=Math.min(o.len,u-l);lo(r,d,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;lo(t,d,p),p>0&&hf(i,t,o.text),o.forward(d),l+=d}let h=e[a++];for(;l<h;){if(o.done)break e;let d=Math.min(o.len,h-l);lo(t,d,-1),lo(r,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),l+=d}}return{changes:new jr(t,i),filtered:Au.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],a=0,l=null;function u(d=!1){if(!d&&!r.length)return;a<t&&lo(r,t-a,-1);let p=new jr(r,o);l=l?l.compose(p.map(l)):p,r=[],o=[],a=0}function h(d){if(Array.isArray(d))for(let p of d)h(p);else if(d instanceof jr){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);u(),l=l?l.compose(d.map(l)):d}else{let{from:p,to:m=p,insert:g}=d;if(p>m||p<0||m>t)throw new RangeError(`Invalid change range ${p} to ${m} (in doc of length ${t})`);let v=g?typeof g=="string"?qn.of(g.split(i||LL)):g:qn.empty,y=v.length;if(p==m&&y==0)return;p<a&&u(),p>a&&lo(r,p-a,-1),lo(r,m-p,y),hf(o,r,v),a=m}}return h(e),u(!l),l}static empty(e){return new jr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(qn.empty);i[r]=qn.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new jr(t,i)}static createSet(e,t){return new jr(e,t)}}function lo(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function hf(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(qn.empty);n.push(t)}}function NL(n,e,t){let i=n.inserted;for(let r=0,o=0,a=0;a<n.sections.length;){let l=n.sections[a++],u=n.sections[a++];if(u<0)r+=l,o+=l;else{let h=r,d=o,p=qn.empty;for(;h+=l,d+=u,u&&i&&(p=p.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)l=n.sections[a++],u=n.sections[a++];e(r,h,o,d,p),r=h,o=d}}}function BL(n,e,t,i=!1){let r=[],o=i?[]:null,a=new YS(n),l=new YS(e);for(let u=-1;;)if(a.ins==-1&&l.ins==-1){let h=Math.min(a.len,l.len);lo(r,h,-1),a.forward(h),l.forward(h)}else if(l.ins>=0&&(a.ins<0||u==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!t))){let h=l.len;for(lo(r,l.ins,-1);h;){let d=Math.min(a.len,h);a.ins>=0&&u<a.i&&a.len<=d&&(lo(r,0,a.ins),o&&hf(o,r,a.text),u=a.i),a.forward(d),h-=d}l.next()}else if(a.ins>=0){let h=0,d=a.len;for(;d;)if(l.ins==-1){let p=Math.min(d,l.len);h+=p,d-=p,l.forward(p)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;lo(r,h,u<a.i?a.ins:0),o&&u<a.i&&hf(o,r,a.text),u=a.i,a.forward(a.len-d)}else{if(a.done&&l.done)return o?jr.createSet(r,o):Au.create(r);throw new Error("Mismatched change set lengths")}}function IK(n,e,t=!1){let i=[],r=t?[]:null,o=new YS(n),a=new YS(e);for(let l=!1;;){if(o.done&&a.done)return r?jr.createSet(i,r):Au.create(i);if(o.ins==0)lo(i,o.len,0,l),o.next();else if(a.len==0&&!a.done)lo(i,0,a.ins,l),r&&hf(r,i,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,a.len),h=i.length;if(o.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;lo(i,u,d,l),r&&d&&hf(r,i,a.text)}else a.ins==-1?(lo(i,o.off?0:o.len,u,l),r&&hf(r,i,o.textBit(u))):(lo(i,o.off?0:o.len,a.off?0:a.ins,l),r&&!a.off&&hf(r,i,a.text));l=(o.ins>u||a.ins>=0&&a.len>u)&&(l||i.length>h),o.forward2(u),a.forward(u)}}}}class YS{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?qn.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?qn.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Am{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Am(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return st.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return st.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return st.range(e.anchor,e.head)}static create(e,t,i){return new Am(e,t,i)}}class st{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:st.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new st([this.main],0)}addRange(e,t=!0){return st.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,st.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new st(e.ranges.map(t=>Am.fromJSON(t)),e.main)}static single(e,t=e){return new st([st.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return st.normalized(e.slice(),t);i=o.to}return new st(e,t)}static cursor(e,t=0,i,r){return Am.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(r??33554431)<<5)}static range(e,t,i,r){let o=(i??33554431)<<5|(r==null?3:Math.min(2,r));return t<e?Am.create(t,e,24|o):Am.create(e,t,(t>e?4:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],a=e[r-1];if(o.empty?o.from<=a.to:o.from<a.to){let l=a.from,u=Math.max(o.to,a.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?st.range(u,l):st.range(l,u))}}return new st(e,t)}}function RK(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let kF=0;class Wt{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=kF++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new Wt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:IF),!!e.static,e.enables)}of(e){return new l$([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new l$(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new l$(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function IF(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class l${constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=kF++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,a=e[o]>>1,l=this.type==2,u=!1,h=!1,d=[];for(let p of this.dependencies)p=="doc"?u=!0:p=="selection"?h=!0:((t=e[p.id])!==null&&t!==void 0?t:1)&1||d.push(e[p.id]);return{create(p){return p.values[a]=i(p),1},update(p,m){if(u&&m.docChanged||h&&(m.docChanged||m.selection)||FL(p,d)){let g=i(p);if(l?!sH(g,p.values[a],r):!r(g,p.values[a]))return p.values[a]=g,1}return 0},reconfigure:(p,m)=>{let g,v=m.config.address[o];if(v!=null){let y=wC(m,v);if(this.dependencies.every(S=>S instanceof Wt?m.facet(S)===p.facet(S):S instanceof bs?m.field(S,!1)==p.field(S,!1):!0)||(l?sH(g=i(p),y,r):r(g=i(p),y)))return p.values[a]=y,0}else g=i(p);return p.values[a]=g,1}}}}function sH(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function FL(n,e){let t=!1;for(let i of e)jb(n,i)&1&&(t=!0);return t}function WEe(n,e,t){let i=t.map(u=>n[u.id]),r=t.map(u=>u.type),o=i.filter(u=>!(u&1)),a=n[e.id]>>1;function l(u){let h=[];for(let d=0;d<i.length;d++){let p=wC(u,i[d]);if(r[d]==2)for(let m of p)h.push(m);else h.push(p)}return e.combine(h)}return{create(u){for(let h of i)jb(u,h);return u.values[a]=l(u),1},update(u,h){if(!FL(u,o))return 0;let d=l(u);return e.compare(d,u.values[a])?0:(u.values[a]=d,1)},reconfigure(u,h){let d=FL(u,i),p=h.config.facets[e.id],m=h.facet(e);if(p&&!d&&IF(t,p))return u.values[a]=m,0;let g=l(u);return e.compare(g,m)?(u.values[a]=m,0):(u.values[a]=g,1)}}}const oH=Wt.define({static:!0});class bs{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new bs(kF++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(oH).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],a=this.updateF(o,r);return this.compareF(o,a)?0:(i.values[t]=a,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,oH.of({field:this,create:e})]}get extension(){return this}}const dm={lowest:4,low:3,default:2,high:1,highest:0};function rb(n){return e=>new MK(e,n)}const Sg={highest:rb(dm.highest),high:rb(dm.high),default:rb(dm.default),low:rb(dm.low),lowest:rb(dm.lowest)};class MK{constructor(e,t){this.inner=e,this.prec=t}}class ak{of(e){return new UL(this,e)}reconfigure(e){return ak.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class UL{constructor(e,t){this.compartment=e,this.inner=t}}class TC{constructor(e,t,i,r,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),a=new Map;for(let m of zEe(e,t,a))m instanceof bs?r.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),u=[],h=[];for(let m of r)l[m.id]=h.length<<1,h.push(g=>m.slot(g));let d=i==null?void 0:i.config.facets;for(let m in o){let g=o[m],v=g[0].facet,y=d&&d[m]||[];if(g.every(S=>S.type==0))if(l[v.id]=u.length<<1|1,IF(y,g))u.push(i.facet(v));else{let S=v.combine(g.map(T=>T.value));u.push(i&&v.compare(S,i.facet(v))?i.facet(v):S)}else{for(let S of g)S.type==0?(l[S.id]=u.length<<1|1,u.push(S.value)):(l[S.id]=h.length<<1,h.push(T=>S.dynamicSlot(T)));l[v.id]=h.length<<1,h.push(S=>WEe(S,v,g))}}let p=h.map(m=>m(l));return new TC(e,a,p,l,u,o)}}function zEe(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(a,l){let u=r.get(a);if(u!=null){if(u<=l)return;let h=i[u].indexOf(a);h>-1&&i[u].splice(h,1),a instanceof UL&&t.delete(a.compartment)}if(r.set(a,l),Array.isArray(a))for(let h of a)o(h,l);else if(a instanceof UL){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(a.compartment)||a.inner;t.set(a.compartment,h),o(h,l)}else if(a instanceof MK)o(a.inner,a.prec);else if(a instanceof bs)i[l].push(a),a.provides&&o(a.provides,l);else if(a instanceof l$)i[l].push(a),a.facet.extensions&&o(a.facet.extensions,dm.default);else{let h=a.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,l)}}return o(n,dm.default),i.reduce((a,l)=>a.concat(l))}function jb(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function wC(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const PK=Wt.define(),DK=Wt.define({combine:n=>n.some(e=>e),static:!0}),LK=Wt.define({combine:n=>n.length?n[0]:void 0,static:!0}),NK=Wt.define(),BK=Wt.define(),FK=Wt.define(),UK=Wt.define({combine:n=>n.length?n[0]:!1});class Du{constructor(e,t){this.type=e,this.value=t}static define(){return new QEe}}class QEe{of(e){return new Du(this,e)}}class VEe{constructor(e){this.map=e}of(e){return new gn(this,e)}}class gn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new gn(this.type,t)}is(e){return this.type==e}static define(e={}){return new VEe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}gn.reconfigure=gn.define();gn.appendConfig=gn.define();class qr{constructor(e,t,i,r,o,a){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&RK(i,t.newLength),o.some(l=>l.type==qr.time)||(this.annotations=o.concat(qr.time.of(Date.now())))}static create(e,t,i,r,o,a){return new qr(e,t,i,r,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(qr.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}qr.time=Du.define();qr.userEvent=Du.define();qr.addToHistory=Du.define();qr.remote=Du.define();function HEe(n,e){let t=[];for(let i=0,r=0;;){let o,a;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],a=n[i++];else if(r<e.length)o=e[r++],a=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function GK(n,e,t){var i;let r,o,a;return t?(r=e.changes,o=jr.empty(e.changes.length),a=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:gn.mapEffects(n.effects,r).concat(gn.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function GL(n,e,t){let i=e.selection,r=Z0(e.annotations);return e.userEvent&&(r=r.concat(qr.userEvent.of(e.userEvent))),{changes:e.changes instanceof jr?e.changes:jr.of(e.changes||[],t,n.facet(LK)),selection:i&&(i instanceof st?i:st.single(i.anchor,i.head)),effects:Z0(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function WK(n,e,t){let i=GL(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let a=!!e[o].sequential;i=GK(i,GL(n,e[o],a?i.changes.newLength:n.doc.length),a)}let r=qr.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return jEe(t?XEe(r):r)}function XEe(n){let e=n.startState,t=!0;for(let r of e.facet(NK)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:HEe(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=jr.empty(e.doc.length);else{let a=n.changes.filter(t);r=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}n=qr.create(e,r,n.selection&&n.selection.map(o),gn.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(BK);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof qr?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof qr?n=o[0]:n=WK(e,Z0(o),!1)}return n}function jEe(n){let e=n.startState,t=e.facet(FK),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=GK(i,GL(e,o,n.changes.newLength),!0))}return i==n?n:qr.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const YEe=[];function Z0(n){return n==null?YEe:Array.isArray(n)?n:[n]}var Ui=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ui||(Ui={}));const ZEe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let WL;try{WL=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function qEe(n){if(WL)return WL.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||ZEe.test(t)))return!0}return!1}function JEe(n){return e=>{if(!/\S/.test(e))return Ui.Space;if(qEe(e))return Ui.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ui.Word;return Ui.Other}}class Bn{constructor(e,t,i,r,o,a){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)jb(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return jb(this,i),wC(this,i)}update(...e){return WK(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(ak.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,u)=>r.set(u,l)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(gn.reconfigure)?(t=null,i=a.value):a.is(gn.appendConfig)&&(t=null,i=Z0(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=TC.resolve(i,r,this),o=new Bn(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values),new Bn(t,e.newDoc,e.newSelection,o,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:st.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],a=Z0(i.effects);for(let l=1;l<t.ranges.length;l++){let u=e(t.ranges[l]),h=this.changes(u.changes),d=h.map(r);for(let m=0;m<l;m++)o[m]=o[m].map(d);let p=r.mapDesc(h,!0);o.push(u.range.map(p)),r=r.compose(d),a=gn.mapEffects(a,d).concat(gn.mapEffects(Z0(u.effects),p))}return{changes:r,selection:st.create(o,t.mainIndex),effects:a}}changes(e=[]){return e instanceof jr?e:jr.of(e,this.doc.length,this.facet(Bn.lineSeparator))}toText(e){return qn.of(e.split(this.facet(Bn.lineSeparator)||LL))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(jb(this,t),wC(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof bs&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let a=i[o],l=e[o];r.push(a.init(u=>a.spec.fromJSON(l,u)))}}return Bn.create({doc:e.doc,selection:st.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=TC.resolve(e.extensions||[],new Map),i=e.doc instanceof qn?e.doc:qn.of((e.doc||"").split(t.staticFacet(Bn.lineSeparator)||LL)),r=e.selection?e.selection instanceof st?e.selection:st.single(e.selection.anchor,e.selection.head):st.single(0);return RK(r,i.length),t.staticFacet(DK)||(r=r.asSingle()),new Bn(t,i,r,t.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Bn.tabSize)}get lineBreak(){return this.facet(Bn.lineSeparator)||`
`}get readOnly(){return this.facet(UK)}phrase(e,...t){for(let i of this.facet(Bn.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(PK))for(let a of o(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){return JEe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let u=Po(t,a,!1);if(o(t.slice(u,a))!=Ui.Word)break;a=u}for(;l<r;){let u=Po(t,l);if(o(t.slice(l,u))!=Ui.Word)break;l=u}return a==l?null:st.range(a+i,l+i)}}Bn.allowMultipleSelections=DK;Bn.tabSize=Wt.define({combine:n=>n.length?n[0]:4});Bn.lineSeparator=LK;Bn.readOnly=UK;Bn.phrases=Wt.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});Bn.languageData=PK;Bn.changeFilter=NK;Bn.transactionFilter=BK;Bn.transactionExtender=FK;ak.reconfigure=gn.define();function Lu(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let a=r[o],l=i[o];if(l===void 0)i[o]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](l,a);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class cg{eq(e){return this==e}range(e,t=e){return ZS.create(e,t,this)}}cg.prototype.startSide=cg.prototype.endSide=0;cg.prototype.point=!1;cg.prototype.mapMode=Qs.TrackDel;class ZS{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ZS(e,t,i)}}function zL(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class RF{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let a=r,l=o.length;;){if(a==l)return a;let u=a+l>>1,h=o[u]-e||(i?this.value[u].endSide:this.value[u].startSide)-t;if(u==a)return h>=0?a:l;h>=0?l=u:a=u+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,o);o<a;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],a=-1,l=-1;for(let u=0;u<this.value.length;u++){let h=this.value[u],d=this.from[u]+e,p=this.to[u]+e,m,g;if(d==p){let v=t.mapPos(d,h.startSide,h.mapMode);if(v==null||(m=g=v,h.startSide!=h.endSide&&(g=t.mapPos(d,h.endSide),g<m)))continue}else if(m=t.mapPos(d,h.startSide),g=t.mapPos(p,h.endSide),m>g||m==g&&h.startSide>0&&h.endSide<=0)continue;(g-m||h.endSide-h.startSide)<0||(a<0&&(a=m),h.point&&(l=Math.max(l,g-m)),i.push(h),r.push(m-a),o.push(g-a))}return{mapped:i.length?new RF(r,o,i,l):null,pos:a}}}class ri{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new ri(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(zL)),this.isEmpty)return t.length?ri.of(t):this;let l=new zK(this,null,-1).goto(0),u=0,h=[],d=new Uf;for(;l.value||u<t.length;)if(u<t.length&&(l.from-t[u].from||l.startSide-t[u].value.startSide)>=0){let p=t[u++];d.addInner(p.from,p.to,p.value)||h.push(p)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(l.chunkIndex)<t[u].from)&&(!a||r>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||r>l.to||o<l.from||a(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||h.push(ZS.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!h.length?ri.empty:this.nextLayer.update({add:h,filter:a,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],u=this.chunk[a],h=e.touchesRange(l,l+u.length);if(h===!1)r=Math.max(r,u.maxPoint),t.push(u),i.push(e.mapPos(l));else if(h===!0){let{mapped:d,pos:p}=u.map(l,e);d&&(r=Math.max(r,d.maxPoint),t.push(d),i.push(p))}}let o=this.nextLayer.map(e);return t.length==0?o:new ri(i,t,o||ri.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],a=this.chunk[r];if(t>=o&&e<=o+a.length&&a.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return qS.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return qS.from(e).goto(t)}static compare(e,t,i,r,o=-1){let a=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),l=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),u=aH(a,l,i),h=new sb(a,u,o),d=new sb(l,u,o);i.iterGaps((p,m,g)=>lH(h,p,d,m,g,r)),i.empty&&i.length==0&&lH(h,0,d,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9-1);let o=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),a=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let l=aH(o,a),u=new sb(o,l,0).goto(i),h=new sb(a,l,0).goto(i);for(;;){if(u.to!=h.to||!QL(u.active,h.active)||u.point&&(!h.point||!u.point.eq(h.point)))return!1;if(u.to>r)return!0;u.next(),h.next()}}static spans(e,t,i,r,o=-1){let a=new sb(e,null,o).goto(t),l=t,u=a.openStart;for(;;){let h=Math.min(a.to,i);if(a.point){let d=a.activeForPoint(a.to),p=a.pointFrom<t?d.length+1:Math.min(d.length,u);r.point(l,h,a.point,d,p,a.pointRank),u=Math.min(a.openEnd(h),d.length)}else h>l&&(r.span(l,h,a.active,u),u=a.openEnd(h));if(a.to>i)return u+(a.point&&a.to>i?1:0);l=a.to,a.next()}}static of(e,t=!1){let i=new Uf;for(let r of e instanceof ZS?[e]:t?KEe(e):e)i.add(r.from,r.to,r.value);return i.finish()}}ri.empty=new ri([],[],null,-1);function KEe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(zL(e,i)>0)return n.slice().sort(zL);e=i}return n}ri.empty.nextLayer=ri.empty;class Uf{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new RF(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Uf)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ri.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ri.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function aH(n,e,t){let i=new Map;for(let o of n)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&i.set(o.chunk[a],o.chunkPos[a]);let r=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let l=i.get(o.chunk[a]);l!=null&&(t?t.mapPos(l):l)==o.chunkPos[a]&&!(t!=null&&t.touchesRange(l,l+o.chunk[a].length))&&r.add(o.chunk[a])}return r}class zK{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class qS{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&r.push(new zK(a,t,i,o));return r.length==1?r[0]:new qS(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)TP(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)TP(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),TP(this.heap,0)}}}function TP(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class sb{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qS.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cx(this.active,e),cx(this.activeTo,e),cx(this.activeRank,e),this.minActive=cH(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;ux(this.active,t,i),ux(this.activeTo,t,r),ux(this.activeRank,t,o),e&&ux(e,t,this.cursor.from),this.minActive=cH(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&cx(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function lH(n,e,t,i,r,o){n.goto(e),t.goto(i);let a=i+r,l=i,u=i-e;for(;;){let h=n.to+u-t.to||n.endSide-t.endSide,d=h<0?n.to+u:t.to,p=Math.min(d,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&QL(n.activeForPoint(n.to+u),t.activeForPoint(t.to))||o.comparePoint(l,p,n.point,t.point):p>l&&!QL(n.active,t.active)&&o.compareRange(l,p,n.active,t.active),d>a)break;l=d,h<=0&&n.next(),h>=0&&t.next()}}function QL(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function cx(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function ux(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function cH(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function qT(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Po(n,r));return i}function VL(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=Po(n,r)}return i===!0?-1:n.length}const HL="",uH=typeof Symbol>"u"?"__"+HL:Symbol.for(HL),XL=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),hH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Gf{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,l,u,h){let d=[],p=/^@(\w+)\b/.exec(a[0]),m=p&&p[1]=="keyframes";if(p&&l==null)return u.push(a[0]+";");for(let g in l){let v=l[g];if(/&/.test(g))o(g.split(/,\s*/).map(y=>a.map(S=>y.replace(/&/,S))).reduce((y,S)=>y.concat(S)),v,u);else if(v&&typeof v=="object"){if(!p)throw new RangeError("The value of a property ("+g+") should be a primitive value.");o(r(g),v,d,m)}else v!=null&&d.push(g.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+v+";")}(d.length||m)&&u.push((i&&!p&&!h?a.map(i):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)o(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=hH[uH]||1;return hH[uH]=e+1,HL+e.toString(36)}static mount(e,t){(e[XL]||new exe(e)).mount(Array.isArray(t)?t:[t])}}let hx=null;class exe{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(hx)return e.adoptedStyleSheets=[hx.sheet].concat(e.adoptedStyleSheets),e[XL]=hx;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),hx=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[XL]=this}mount(e){let t=this.sheet,i=0,r=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,a),t)for(let u=0;u<a.rules.length;u++)t.insertRule(a.rules[u],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=a.rules.length,r++}}if(!t){let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o}}}var Wf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},JS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dH=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),txe=typeof navigator<"u"&&/Mac/.test(navigator.platform),nxe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ixe=txe||dH&&+dH[1]<57;for(var Ws=0;Ws<10;Ws++)Wf[48+Ws]=Wf[96+Ws]=String(Ws);for(var Ws=1;Ws<=24;Ws++)Wf[Ws+111]="F"+Ws;for(var Ws=65;Ws<=90;Ws++)Wf[Ws]=String.fromCharCode(Ws+32),JS[Ws]=String.fromCharCode(Ws);for(var wP in Wf)JS.hasOwnProperty(wP)||(JS[wP]=Wf[wP]);function rxe(n){var e=ixe&&(n.ctrlKey||n.altKey||n.metaKey)||nxe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?JS:Wf)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function EC(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function bO(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function sxe(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function c$(n,e){if(!e.anchorNode)return!1;try{return bO(n,e.anchorNode)}catch{return!1}}function KS(n){return n.nodeType==3?SO(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function xC(n,e,t,i){return t?fH(n,e,t,i,-1)||fH(n,e,t,i,1):!1}function $C(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function fH(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:eT(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=$C(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?eT(n):0}else return!1}}function eT(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const QK={left:0,right:0,top:0,bottom:0};function MF(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function oxe(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function axe(n,e,t,i,r,o,a,l){let u=n.ownerDocument,h=u.defaultView||window;for(let d=n;d;)if(d.nodeType==1){let p,m=d==u.body;if(m)p=oxe(h);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let y=d.getBoundingClientRect();p={left:y.left,right:y.left+d.clientWidth,top:y.top,bottom:y.top+d.clientHeight}}let g=0,v=0;if(r=="nearest")e.top<p.top?(v=-(p.top-e.top+a),t>0&&e.bottom>p.bottom+v&&(v=e.bottom-p.bottom+v+a)):e.bottom>p.bottom&&(v=e.bottom-p.bottom+a,t<0&&e.top-v<p.top&&(v=-(p.top+v-e.top+a)));else{let y=e.bottom-e.top,S=p.bottom-p.top;v=(r=="center"&&y<=S?e.top+y/2-S/2:r=="start"||r=="center"&&t<0?e.top-a:e.bottom-S+a)-p.top}if(i=="nearest"?e.left<p.left?(g=-(p.left-e.left+o),t>0&&e.right>p.right+g&&(g=e.right-p.right+g+o)):e.right>p.right&&(g=e.right-p.right+o,t<0&&e.left<p.left+g&&(g=-(p.left+g-e.left+o))):g=(i=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:i=="start"==l?e.left-o:e.right-(p.right-p.left)+o)-p.left,g||v)if(m)h.scrollBy(g,v);else{let y=0,S=0;if(v){let T=d.scrollTop;d.scrollTop+=v,S=d.scrollTop-T}if(g){let T=d.scrollLeft;d.scrollLeft+=g,y=d.scrollLeft-T}e={left:e.left-y,top:e.top-S,right:e.right-y,bottom:e.bottom-S},y&&Math.abs(y-g)<1&&(i="nearest"),S&&Math.abs(S-v)<1&&(r="nearest")}if(m)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function lxe(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class cxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let t0=null;function VK(n){if(n.setActive)return n.setActive();if(t0)return n.focus(t0);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(t0==null?{get preventScroll(){return t0={preventScroll:!0},!0}}:void 0),!t0){t0=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let pH;function SO(n,e,t=e){let i=pH||(pH=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function q0(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function uxe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function HK(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function hxe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=eT(t))}else{if(t==n)return!0;i=$C(t),t=t.parentNode}}class uo{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new uo(e.parentNode,$C(e),t)}static after(e,t){return new uo(e.parentNode,$C(e)+1,t)}}const PF=[];class Mi{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(this.dirty&2){let i=this.dom,r=null,o;for(let a of this.children){if(a.dirty){if(!a.dom&&(o=r?r.nextSibling:i.firstChild)){let l=Mi.get(o);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.dirty=0}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;o&&o!=a.dom;)o=mH(o);else i.insertBefore(a.dom,o);r=a.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=mH(o)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(e,t),i.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=eT(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Mi.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let a=this.children[r];if(a.dom==i)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,a=-1,l=-1;for(let u=0,h=i,d=i;u<this.children.length;u++){let p=this.children[u],m=h+p.length;if(h<e&&m>t)return p.domBoundsAround(e,t,h);if(m>=e&&r==-1&&(r=u,o=h),h>t&&p.dom.parentNode==this.dom){a=u,l=d;break}d=m,h=m+p.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=PF){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new XK(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,t,i,r,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Mi.prototype.breakAfter=0;function mH(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class XK{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function jK(n,e,t,i,r,o,a,l,u){let{children:h}=n,d=h.length?h[e]:null,p=o.length?o[o.length-1]:null,m=p?p.breakAfter:a;if(!(e==i&&d&&!a&&!m&&o.length<2&&d.merge(t,r,o.length?p:null,t==0,l,u))){if(i<h.length){let g=h[i];g&&r<g.length?(e==i&&(g=g.split(r),r=0),!m&&p&&g.merge(0,r,p,!0,0,u)?o[o.length-1]=g:(r&&g.merge(0,r,null,!1,0,u),o.push(g))):g!=null&&g.breakAfter&&(p?p.breakAfter=1:a=1),i++}for(d&&(d.breakAfter=a,t>0&&(!a&&o.length&&d.merge(t,d.length,o[0],!1,l,0)?d.breakAfter=o.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,l,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),u=o.length?0:l;else if(h[e].become(o[0]))e++,o.shift(),l=o.length?0:u;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,u)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function YK(n,e,t,i,r,o){let a=n.childCursor(),{i:l,off:u}=a.findPos(t,1),{i:h,off:d}=a.findPos(e,-1),p=e-t;for(let m of i)p+=m.length;n.length+=p,jK(n,h,d,l,u,i,0,r,o)}let La=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},jL=typeof document<"u"?document:{documentElement:{style:{}}};const YL=/Edge\/(\d+)/.exec(La.userAgent),ZK=/MSIE \d/.test(La.userAgent),ZL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(La.userAgent),lk=!!(ZK||ZL||YL),gH=!lk&&/gecko\/(\d+)/i.test(La.userAgent),EP=!lk&&/Chrome\/(\d+)/.exec(La.userAgent),_H="webkitFontSmoothing"in jL.documentElement.style,qK=!lk&&/Apple Computer/.test(La.vendor),OH=qK&&(/Mobile\/\w+/.test(La.userAgent)||La.maxTouchPoints>2);var Qt={mac:OH||/Mac/.test(La.platform),windows:/Win/.test(La.platform),linux:/Linux|X11/.test(La.platform),ie:lk,ie_version:ZK?jL.documentMode||6:ZL?+ZL[1]:YL?+YL[1]:0,gecko:gH,gecko_version:gH?+(/Firefox\/(\d+)/.exec(La.userAgent)||[0,0])[1]:0,chrome:!!EP,chrome_version:EP?+EP[1]:0,ios:OH,android:/Android\b/.test(La.userAgent),webkit:_H,safari:qK,webkit_version:_H?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:jL.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const dxe=256;class zf extends Mi{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof zf)||this.length-(t-e)+i.length>dxe)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new zf(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new uo(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return qL(this.dom,e,t)}}class Ru extends Mi{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(HK(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,a){return i&&(!(i instanceof Ru&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)?!1:(YK(this,e,t,i?i.children:[],o-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let l of this.children){let u=i+l.length;u>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=o),i=u,o++}let a=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Ru(this.mark,t,a)}domAtPos(e){return eee(this,e)}coordsAt(e,t){return nee(this,e,t)}}function qL(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,a=0;e==0&&t<0||e==i&&t>=0?Qt.chrome||Qt.gecko||(e?(r--,a=1):o<i&&(o++,a=-1)):t<0?r--:o<i&&o++;let l=SO(n,r,o).getClientRects();if(!l.length)return QK;let u=l[(a?a<0:t>=0)?0:l.length-1];return Qt.safari&&!a&&u.width==0&&(u=Array.prototype.find.call(l,h=>h.width)||u),a?MF(u,a<0):u||null}class df extends Mi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||df)(e,t,i)}split(e){let t=df.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,r,o,a){return i&&(!(i instanceof df)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof df&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return qn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):qn.empty}domAtPos(e){return e==0?uo.before(this.dom):uo.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),r=null;if(!i.length)return QK;for(let o=e>0?i.length-1:0;r=i[o],!(e>0?o==0:o==i.length-1||r.top<r.bottom);o+=e>0?-1:1);return this.length?r:MF(r,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class JK extends df{domAtPos(e){let{topView:t,text:i}=this.widget;return t?JL(e,0,t,i,(r,o)=>r.domAtPos(o),r=>new uo(i,Math.min(r,i.nodeValue.length))):new uo(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:r}=this.widget;return i?KK(e,t,i,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:r}=this.widget;return i?JL(e,t,i,r,(o,a,l)=>o.coordsAt(a,l),(o,a)=>qL(r,o,a)):qL(r,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function JL(n,e,t,i,r,o){if(t instanceof Ru){for(let a=t.dom.firstChild;a;a=a.nextSibling){let l=Mi.get(a);if(!l)return o(n,e);let u=bO(a,i),h=l.length+(u?i.nodeValue.length:0);if(n<h||n==h&&l.getSide()<=0)return u?JL(n,e,l,i,r,o):r(l,n,e);n-=h}return r(t,t.length,-1)}else return t.dom==i?o(n,e):r(t,n,e)}function KK(n,e,t,i){if(t instanceof Ru)for(let r of t.children){let o=0,a=bO(r.dom,i);if(bO(r.dom,n))return o+(a?KK(n,e,r,i):r.localPosFromDOM(n,e));o+=a?i.nodeValue.length:r.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class TO extends Mi{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof TO&&e.side==this.side}split(){return new TO(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return uo.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=fxe(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return qn.empty}}zf.prototype.children=df.prototype.children=TO.prototype.children=PF;function fxe(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let r=t.children[i+e];if(r instanceof zf){let o=r.coordsAt(e<0?r.length:0,e);if(o)return o}i+=e}else if(t instanceof Ru&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let r=t.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function eee(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let a=i[r],l=o+a.length;if(!(l==o&&a.getSide()<=0)){if(e>o&&e<l&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=r;o>0;o--){let a=i[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=r;o<i.length;o++){let a=i[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new uo(t,0)}function tee(n,e,t){let i,{children:r}=n;t>0&&e instanceof Ru&&r.length&&(i=r[r.length-1])instanceof Ru&&i.mark.eq(e.mark)?tee(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function nee(n,e,t){let i=null,r=-1,o=null,a=-1;function l(h,d){for(let p=0,m=0;p<h.children.length&&m<=d;p++){let g=h.children[p],v=m+g.length;v>=d&&(g.children.length?l(g,d-m):!o&&(v>d||m==v&&g.getSide()>0)?(o=g,a=d-m):(m<d||m==v&&g.getSide()<0)&&(i=g,r=d-m)),m=v}}l(n,e);let u=(t<0?i:o)||i||o;return u?u.coordsAt(Math.max(0,u==i?r:a),t):pxe(n)}function pxe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=KS(e);return t[t.length-1]||null}function KL(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function DF(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r of t)if(i.indexOf(r)==-1||n[r]!==e[r])return!1;return!0}function eN(n,e,t){let i=null;if(e)for(let r in e)t&&r in t||n.removeAttribute(i=r);if(t)for(let r in t)e&&e[r]==t[r]||n.setAttribute(i=r,t[r]);return!!i}class Nu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var di=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(di||(di={}));class Xt extends cg{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ck(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new ug(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:a}=iee(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(a?t?2e8:1:-6e8)+1}return new ug(e,i,r,t,e.widget||null,!0)}static line(e){return new JT(e)}static set(e,t=!1){return ri.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Xt.none=ri.empty;class ck extends Xt{constructor(e){let{start:t,end:i}=iee(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ck&&this.tagName==e.tagName&&this.class==e.class&&DF(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ck.prototype.point=!1;class JT extends Xt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof JT&&this.spec.class==e.spec.class&&DF(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}JT.prototype.mapMode=Qs.TrackBefore;JT.prototype.point=!0;class ug extends Xt{constructor(e,t,i,r,o,a){super(t,i,o,e),this.block=r,this.isReplace=a,this.mapMode=r?t<=0?Qs.TrackBefore:Qs.TrackAfter:Qs.TrackDel}get type(){return this.startSide<this.endSide?di.WidgetRange:this.startSide<=0?di.WidgetBefore:di.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof ug&&mxe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ug.prototype.point=!0;function iee(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function mxe(n,e){return n==e||!!(n&&e&&n.compare(e))}function tN(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Do extends Mi{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,a){if(i){if(!(i instanceof Do))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),YK(this,e,t,i?i.children:[],o,a),!0}split(e){let t=new Do;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){DF(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){tee(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=KL(t,this.attrs||{})),i&&(this.attrs=KL({class:i},this.attrs||{}))}domAtPos(e){return eee(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var i;this.dom?this.dirty&4&&(HK(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(eN(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Mi.get(r)instanceof Ru;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Mi.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Qt.ios||!this.children.some(o=>o instanceof zf))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof zf)||/[^ -~]/.test(t.text))return null;let i=KS(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return nee(this,e,t)}become(e){return!1}get type(){return di.Text}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],a=r+o.length;if(a>=t){if(o instanceof Do)return o;if(a>t)break}r=a+o.breakAfter}return null}}class Wm extends Mi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,a){return i&&(!(i instanceof Wm)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?uo.before(this.dom):uo.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Wm(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return PF}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):qn.empty}domBoundsAround(){return null}become(e){return e instanceof Wm&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class LF{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Wm&&e.type==di.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Do),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(dx(new TO(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(dx(new zf(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,a){if(this.disallowBlockEffectsFor[a]&&i instanceof ug){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof ug)if(i.block){let{type:u}=i;u==di.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wm(i.widget||new vH("div"),l,u))}else{let u=df.create(i.widget||new vH("span"),l,l?0:i.startSide),h=this.atCursorPos&&!u.isEditable&&o<=r.length&&(e<t||i.startSide>0),d=!u.isEditable&&(e<t||o>r.length||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(p.append(dx(new TO(1),r),o),o=r.length+Math.max(0,o-r.length)),p.append(dx(u,r),o),this.atCursorPos=d,this.pendingBuffer=d?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let a=new LF(e,t,i,o);return a.openEnd=ri.spans(r,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function dx(n,e){for(let t of e)n=new Ru(t,[n],n.length);return n}class vH extends Nu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const ree=Wt.define(),see=Wt.define(),oee=Wt.define(),aee=Wt.define(),nN=Wt.define(),lee=Wt.define(),cee=Wt.define(),uee=Wt.define({combine:n=>n.some(e=>e)}),hee=Wt.define({combine:n=>n.some(e=>e)});class CC{constructor(e,t="nearest",i="nearest",r=5,o=5){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o}map(e){return e.empty?this:new CC(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const yH=gn.define({map:(n,e)=>n.map(e)});function Wa(n,e,t){let i=n.facet(aee);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const uk=Wt.define({combine:n=>n.length?n[0]:!0});let gxe=0;const vb=Wt.define();class Er{constructor(e,t,i,r){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:i,provide:r,decorations:o}=t||{};return new Er(gxe++,e,i,a=>{let l=[vb.of(a)];return o&&l.push(tT.of(u=>{let h=u.plugin(a);return h?o(h):Xt.none})),r&&l.push(r(a)),l})}static fromClass(e,t){return Er.define(i=>new e(i),t)}}class xP{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Wa(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Wa(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Wa(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const dee=Wt.define(),NF=Wt.define(),tT=Wt.define(),fee=Wt.define(),pee=Wt.define(),yb=Wt.define();class ku{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new ku(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,a=0,l=0;;r++){let u=r==e.length?null:e[r],h=a-l,d=u?u.fromB:1e9;for(;o<t.length&&t[o]<d;){let p=t[o],m=t[o+1],g=Math.max(l,p),v=Math.min(d,m);if(g<=v&&new ku(g+h,v+h,g,v).addToSet(i),m>d)break;o+=2}if(!u)return i;new ku(u.fromA,u.toA,u.fromB,u.toB).addToSet(i),a=u.toA,l=u.toB}}}class AC{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=jr.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,a,l,u)=>r.push(new ku(o,a,l,u))),this.changedRanges=r}static create(e,t,i){return new AC(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var rr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(rr||(rr={}));const iN=rr.LTR,_xe=rr.RTL;function mee(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Oxe=mee("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),vxe=mee("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rN=Object.create(null),au=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);rN[e]=t,rN[t]=-e}function yxe(n){return n<=247?Oxe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?vxe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const bxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class J0{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?_xe:iN}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,r){let o=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==i)return a;(o<0||(r!=0?r<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}const Yi=[];function Sxe(n,e){let t=n.length,i=e==iN?1:2,r=e==iN?2:1;if(!n||i==1&&!bxe.test(n))return gee(t);for(let a=0,l=i,u=i;a<t;a++){let h=yxe(n.charCodeAt(a));h==512?h=l:h==8&&u==4&&(h=16),Yi[a]=h==4?2:h,h&7&&(u=h),l=h}for(let a=0,l=i,u=i;a<t;a++){let h=Yi[a];if(h==128)a<t-1&&l==Yi[a+1]&&l&24?h=Yi[a]=l:Yi[a]=256;else if(h==64){let d=a+1;for(;d<t&&Yi[d]==64;)d++;let p=a&&l==8||d<t&&Yi[d]==8?u==1?1:8:256;for(let m=a;m<d;m++)Yi[m]=p;a=d-1}else h==8&&u==1&&(Yi[a]=1);l=h,h&7&&(u=h)}for(let a=0,l=0,u=0,h,d,p;a<t;a++)if(d=rN[h=n.charCodeAt(a)])if(d<0){for(let m=l-3;m>=0;m-=3)if(au[m+1]==-d){let g=au[m+2],v=g&2?i:g&4?g&1?r:i:0;v&&(Yi[a]=Yi[au[m]]=v),l=m;break}}else{if(au.length==189)break;au[l++]=a,au[l++]=h,au[l++]=u}else if((p=Yi[a])==2||p==1){let m=p==i;u=m?0:1;for(let g=l-3;g>=0;g-=3){let v=au[g+2];if(v&2)break;if(m)au[g+2]|=2;else{if(v&4)break;au[g+2]|=4}}}for(let a=0;a<t;a++)if(Yi[a]==256){let l=a+1;for(;l<t&&Yi[l]==256;)l++;let u=(a?Yi[a-1]:i)==1,h=(l<t?Yi[l]:i)==1,d=u==h?u?1:2:i;for(let p=a;p<l;p++)Yi[p]=d;a=l-1}let o=[];if(i==1)for(let a=0;a<t;){let l=a,u=Yi[a++]!=1;for(;a<t&&u==(Yi[a]!=1);)a++;if(u)for(let h=a;h>l;){let d=h,p=Yi[--h]!=2;for(;h>l&&p==(Yi[h-1]!=2);)h--;o.push(new J0(h,d,p?2:1))}else o.push(new J0(l,a,0))}else for(let a=0;a<t;){let l=a,u=Yi[a++]==2;for(;a<t&&u==(Yi[a]==2);)a++;o.push(new J0(l,a,u?1:2))}return o}function gee(n){return[new J0(0,n,0)]}let _ee="";function Txe(n,e,t,i,r){var o;let a=i.head-n.from,l=-1;if(a==0){if(!r||!n.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),l=0)}else if(a==n.length){if(r)return null;let m=e[e.length-1];m.level!=t&&(a=m.side(!0,t),l=e.length-1)}l<0&&(l=J0.find(e,a,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc));let u=e[l];a==u.side(r,t)&&(u=e[l+=r?1:-1],a=u.side(!r,t));let h=r==(u.dir==t),d=Po(n.text,a,h);if(_ee=n.text.slice(Math.min(a,d),Math.max(a,d)),d!=u.side(r,t))return st.cursor(d+n.from,h?-1:1,u.level);let p=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!p&&u.level!=t?st.cursor(r?n.to:n.from,r?-1:1,t):p&&p.level<u.level?st.cursor(p.side(!r,t)+n.from,r?1:-1,p.level):st.cursor(d+n.from,r?-1:1,u.level)}const ff="";class Oee{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Bn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ff}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r),this.readNode(r);let o=r.nextSibling;if(o==t)break;let a=Mi.get(r),l=Mi.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:bH(r))||bH(o)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,l;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=r.exec(t))&&(o=l.index,a=l[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=a-1);i=o+a}}readNode(e){if(e.cmIgnore)return;let t=Mi.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function bH(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class SH{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class TH extends Mi{constructor(e){super(),this.view=e,this.compositionDeco=Xt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Do],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ku(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Xt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Exe(this.view,e.changes)),(Qt.ie||Qt.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,r=this.updateDeco(),o=Axe(i,r,e.changes);return t=ku.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Qt.chrome||Qt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.dirty=0,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wm&&o.widget instanceof wH&&r.push(o.dom);i.updateGaps(r)}updateChildren(e,t){let i=this.childCursor(t);for(let r=e.length-1;;r--){let o=r>=0?e[r]:null;if(!o)break;let{fromA:a,toA:l,fromB:u,toB:h}=o,{content:d,breakAtStart:p,openStart:m,openEnd:g}=LF.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap),{i:v,off:y}=i.findPos(l,1),{i:S,off:T}=i.findPos(a,-1);jK(this,S,T,v,y,d,p,m,g)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,o=this.domAtPos(r.anchor),a=r.empty?o:this.domAtPos(r.head);if(Qt.gecko&&r.empty&&wxe(o)){let u=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(u,o.node.childNodes[o.offset]||null)),o=a=new uo(u,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!xC(o.node,o.offset,l.anchorNode,l.anchorOffset)||!xC(a.node,a.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Qt.android&&Qt.chrome&&this.dom.contains(l.focusNode)&&kxe(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=EC(this.view.root);if(u)if(r.empty){if(Qt.gecko){let h=$xe(o.node,o.offset);if(h&&h!=3){let d=yee(o.node,o.offset,h==1?1:-1);d&&(o=new uo(d,h==1?0:d.nodeValue.length))}}u.collapse(o.node,o.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(u.extend){u.collapse(o.node,o.offset);try{u.extend(a.node,a.offset)}catch{}}else{let h=document.createRange();r.anchor>r.head&&([o,a]=[a,o]),h.setEnd(a.node,a.offset),h.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(h)}}),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new uo(l.anchorNode,l.anchorOffset),this.impreciseHead=a.precise?null:new uo(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=EC(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=Do.find(this,t.head);if(!a)return;let l=a.posAtStart;if(t.head==l||t.head==l+a.length)return;let u=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!u||!h||u.bottom>h.top)return;let d=this.domAtPos(t.head+t.assoc);i.collapse(d.node,d.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=t.from&&i.collapse(r,o)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||c$(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=Mi.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Do)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,r=this.children.length-1;;r--){let o=this.children[r],a=i-o.breakAfter-o.length;if(e>a||e==a&&o.type!=di.WidgetBefore&&o.type!=di.WidgetAfter&&(!r||t==2||this.children[r-1].breakAfter||this.children[r-1].type==di.WidgetBefore&&t>-2))return o.coordsAt(e-a,t);i=a}}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,u=this.view.textDirection==rr.LTR;for(let h=0,d=0;d<this.children.length;d++){let p=this.children[d],m=h+p.length;if(m>r)break;if(h>=i){let g=p.dom.getBoundingClientRect();if(t.push(g.height),a){let v=p.dom.lastChild,y=v?KS(v):[];if(y.length){let S=y[y.length-1],T=u?S.right-g.left:g.right-S.left;T>l&&(l=T,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+p.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?rr.RTL:rr.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Do){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=KS(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new XK(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],a=o?o.from-1:this.length;if(a>i){let l=t.lineBlockAt(a).bottom-t.lineBlockAt(i).top;e.push(Xt.replace({widget:new wH(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!o)break;i=o.to+1}return Xt.set(e)}updateDeco(){let e=this.view.state.facet(tT).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=0,a=0,l=0,u=0;for(let d of this.view.state.facet(pee).map(p=>p(this.view)))if(d){let{left:p,right:m,top:g,bottom:v}=d;p!=null&&(o=Math.max(o,p)),m!=null&&(a=Math.max(a,m)),g!=null&&(l=Math.max(l,g)),v!=null&&(u=Math.max(u,v))}let h={left:i.left-o,top:i.top-l,right:i.right+a,bottom:i.bottom+u};axe(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==rr.LTR)}}function wxe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class wH extends Nu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function vee(n){let e=n.observer.selectionRange,t=e.focusNode&&yee(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof Do){let r=t;for(;r.parentNode!=i.dom;)r=r.parentNode;let o=r.previousSibling;for(;o&&!Mi.get(o);)o=o.previousSibling;let a=o?Mi.get(o).posAtEnd:i.posAtStart;return{from:a,to:a,node:r,text:t}}else{for(;;){let{parent:o}=i;if(!o)return null;if(o instanceof Do)break;i=o}let r=i.posAtStart;return{from:r,to:r+i.length,node:i.dom,text:t}}}function Exe(n,e){let t=vee(n);if(!t)return Xt.none;let{from:i,to:r,node:o,text:a}=t,l=e.mapPos(i,1),u=Math.max(l,e.mapPos(r,-1)),{state:h}=n,d=o.nodeType==3?o.nodeValue:new Oee([],h).readRange(o.firstChild,null).text;if(u-l<d.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+d.length),ff)==d)u=l+d.length;else if(h.doc.sliceString(Math.max(0,u-d.length),u,ff)==d)l=u-d.length;else return Xt.none;else if(h.doc.sliceString(l,u,ff)!=d)return Xt.none;let p=Mi.get(o);return p instanceof JK?p=p.widget.topView:p&&(p.parent=null),Xt.set(Xt.replace({widget:new xxe(o,a,p),inclusive:!0}).range(l,u))}class xxe extends Nu{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return JK}}function yee(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=eT(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function $xe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class Cxe{constructor(){this.changes=[]}compareRange(e,t){tN(e,t,this.changes)}comparePoint(e,t){tN(e,t,this.changes)}}function Axe(n,e,t){let i=new Cxe;return ri.compare(n,e,t,i),i.changes}function kxe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Ixe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return st.cursor(e);o==0?t=1:o==r.length&&(t=-1);let a=o,l=o;t<0?a=Po(r.text,o,!1):l=Po(r.text,o);let u=i(r.text.slice(a,l));for(;a>0;){let h=Po(r.text,a,!1);if(i(r.text.slice(h,a))!=u)break;a=h}for(;l<r.length;){let h=Po(r.text,l);if(i(r.text.slice(l,h))!=u)break;l=h}return st.range(a+r.from,l+r.from)}function Rxe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Mxe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function $P(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function EH(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function xH(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function sN(n,e,t){let i,r,o,a,l=!1,u,h,d,p;for(let v=n.firstChild;v;v=v.nextSibling){let y=KS(v);for(let S=0;S<y.length;S++){let T=y[S];r&&$P(r,T)&&(T=EH(xH(T,r.bottom),r.top));let w=Rxe(e,T),E=Mxe(t,T);if(w==0&&E==0)return v.nodeType==3?$H(v,e,t):sN(v,e,t);if(!i||a>E||a==E&&o>w){i=v,r=T,o=w,a=E;let $=E?t<T.top?-1:1:w?e<T.left?-1:1:0;l=!$||($>0?S<y.length-1:S>0)}w==0?t>T.bottom&&(!d||d.bottom<T.bottom)?(u=v,d=T):t<T.top&&(!p||p.top>T.top)&&(h=v,p=T):d&&$P(d,T)?d=xH(d,T.bottom):p&&$P(p,T)&&(p=EH(p,T.top))}}if(d&&d.bottom>=t?(i=u,r=d):p&&p.top<=t&&(i=h,r=p),!i)return{node:n,offset:0};let m=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return $H(i,m,t);if(l&&i.contentEditable!="false")return sN(i,m,t);let g=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:g}}function $H(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,a=0;for(let l=0;l<i;l++){let u=SO(n,l,l+1).getClientRects();for(let h=0;h<u.length;h++){let d=u[h];if(d.top==d.bottom)continue;a||(a=e-d.left);let p=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&p<o){let m=e>=(d.left+d.right)/2,g=m;if((Qt.chrome||Qt.gecko)&&SO(n,l).getBoundingClientRect().left==d.right&&(g=!m),p<=0)return{node:n,offset:l+(g?1:0)};r=l+(g?1:0),o=p}}}return{node:n,offset:r>-1?r:a>0?n.nodeValue.length:0}}function bee(n,e,t,i=-1){var r;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:h,y:d}=e,p=d-a;if(p<0)return 0;if(p>u)return n.state.doc.length;for(let E=n.defaultLineHeight/2,$=!1;l=n.elementAtHeight(p),l.type!=di.Text;)for(;p=i>0?l.bottom+E:l.top-E,!(p>=0&&p<=u);){if($)return t?null:0;$=!0,i=-i}d=a+p;let m=l.from;if(m<n.viewport.from)return n.viewport.from==0?0:t?null:CH(n,o,l,h,d);if(m>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:CH(n,o,l,h,d);let g=n.dom.ownerDocument,v=n.root.elementFromPoint?n.root:g,y=v.elementFromPoint(h,d);y&&!n.contentDOM.contains(y)&&(y=null),y||(h=Math.max(o.left+1,Math.min(o.right-1,h)),y=v.elementFromPoint(h,d),y&&!n.contentDOM.contains(y)&&(y=null));let S,T=-1;if(y&&((r=n.docView.nearest(y))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let E=g.caretPositionFromPoint(h,d);E&&({offsetNode:S,offset:T}=E)}else if(g.caretRangeFromPoint){let E=g.caretRangeFromPoint(h,d);E&&({startContainer:S,startOffset:T}=E,(!n.contentDOM.contains(S)||Qt.safari&&Pxe(S,T,h)||Qt.chrome&&Dxe(S,T,h))&&(S=void 0))}}if(!S||!n.docView.dom.contains(S)){let E=Do.find(n.docView,m);if(!E)return p>l.top+l.height/2?l.to:l.from;({node:S,offset:T}=sN(E.dom,h,d))}let w=n.docView.nearest(S);if(!w)return null;if(w.isWidget){let E=w.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(S,T)+w.posAtStart}function CH(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=Math.floor((r-t.top)/n.defaultLineHeight);o+=l*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+VL(a,o,n.state.tabSize)}function Pxe(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return SO(n,i-1,i).getBoundingClientRect().left>t}function Dxe(n,e,t){if(e!=0)return!1;for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():SO(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Lxe(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let u=n.dom.getBoundingClientRect(),h=n.textDirectionAt(r.from),d=n.posAtCoords({x:t==(h==rr.LTR)?u.right-1:u.left+1,y:(o.top+o.bottom)/2});if(d!=null)return st.cursor(d,t?-1:1)}let a=Do.find(n.docView,e.head),l=a?t?a.posAtEnd:a.posAtStart:t?r.to:r.from;return st.cursor(l,t?-1:1)}function AH(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),a=n.textDirectionAt(r.from);for(let l=e,u=null;;){let h=Txe(r,o,a,l,t),d=_ee;if(!h){if(r.number==(t?n.state.doc.lines:1))return l;d=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=st.cursor(t?r.from:r.to)}if(u){if(!u(d))return l}else{if(!i)return h;u=i(d)}l=h}}function Nxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let a=i(o);return r==Ui.Space&&(r=a),r==a}}function Bxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return st.cursor(r,e.assoc);let a=e.goalColumn,l,u=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r),d=n.documentTop;if(h)a==null&&(a=h.left-u.left),l=o<0?h.top:h.bottom;else{let g=n.viewState.lineBlockAt(r);a==null&&(a=Math.min(u.right-u.left,n.defaultCharacterWidth*(r-g.from))),l=(o<0?g.top:g.bottom)+d}let p=u.left+a,m=i??n.defaultLineHeight>>1;for(let g=0;;g+=10){let v=l+(m+g)*o,y=bee(n,{x:p,y:v},!1,o);if(v<u.top||v>u.bottom||(o<0?y<r:y>r))return st.cursor(y,e.assoc,void 0,a)}}function CP(n,e,t){let i=n.state.facet(fee).map(r=>r(n));for(;;){let r=!1;for(let o of i)o.between(t.from-1,t.from+1,(a,l,u)=>{t.from>a&&t.from<l&&(t=e.head>t.from?st.cursor(a,1):st.cursor(l,-1),r=!0)});if(!r)return t}}class Fxe{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let t=(i,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():i(e,r))};for(let i in Kr){let r=Kr[i];e.contentDOM.addEventListener(i,o=>{kH(e,o)&&t(r,o)},oN[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Kr.mousedown,i)}),Qt.chrome&&Qt.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Qt.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let r;this.customHandlers=[];for(let o of t)if(r=(i=o.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:r});for(let a in r)this.registeredEvents.indexOf(a)<0&&a!="scroll"&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,l=>{kH(e,l)&&this.runCustomHandlers(a,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let r of this.customHandlers){let o=r.handlers[e];if(o)try{if(o.call(r.plugin,i,t)||i.defaultPrevented)return!0}catch(a){Wa(t.state,a)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,t,e)}catch(o){Wa(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Qt.android&&Qt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Qt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=See.find(r=>r.keyCode==t.keyCode))&&!t.ctrlKey||Uxe.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,q0(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Qt.safari&&!Qt.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const See=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Uxe="dthko",Tee=[16,17,18,20,91,92,224,225];function fx(n){return n*.7+8}class Gxe{constructor(e,t,i,r){this.view=e,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=lxe(e.contentDOM);let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Bn.allowMultipleSelections)&&Wxe(e,t),this.dragMove=zxe(e,t),this.dragging=Qxe(e,t)&&$ee(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let i=0,r=0,o=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=o.left?i=-fx(o.left-e.clientX):e.clientX>=o.right&&(i=fx(e.clientX-o.right)),e.clientY<=o.top?r=-fx(o.top-e.clientY):e.clientY>=o.bottom&&(r=fx(e.clientY-o.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Wxe(n,e){let t=n.state.facet(ree);return t.length?t[0](e):Qt.mac?e.metaKey:e.ctrlKey}function zxe(n,e){let t=n.state.facet(see);return t.length?t[0](e):Qt.mac?!e.altKey:!e.ctrlKey}function Qxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=EC(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let a=r[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function kH(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Mi.get(t))&&i.ignoreEvent(e))return!1;return!0}const Kr=Object.create(null),oN=Object.create(null),wee=Qt.ie&&Qt.ie_version<15||Qt.ios&&Qt.webkit_version<604;function Vxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Eee(n,t.value)},50)}function Eee(n,e){let{state:t}=n,i,r=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(aN!=null&&t.selection.ranges.every(u=>u.empty)&&aN==o.toString()){let u=-1;i=t.changeByRange(h=>{let d=t.doc.lineAt(h.from);if(d.from==u)return{range:h};u=d.from;let p=t.toText((a?o.line(r++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:p},range:st.cursor(h.from+p.length)}})}else a?i=t.changeByRange(u=>{let h=o.line(r++);return{changes:{from:u.from,to:u.to,insert:h.text},range:st.cursor(u.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Kr.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():Tee.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Kr.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Kr.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};oN.touchstart=oN.touchmove={passive:!0};Kr.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(oee))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=jxe(n,e)),t){let i=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new Gxe(n,e,t,i)),i&&n.observer.ignore(()=>VK(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function IH(n,e,t,i){if(i==1)return st.cursor(e,t);if(i==2)return Ixe(n.state,e,t);{let r=Do.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:o.from,l=r?r.posAtEnd:o.to;return l<n.state.doc.length&&l==o.to&&l++,st.range(a,l)}}let xee=(n,e)=>n>=e.top&&n<=e.bottom,RH=(n,e,t)=>xee(e,t)&&n>=t.left&&n<=t.right;function Hxe(n,e,t,i){let r=Do.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let a=r.coordsAt(o,-1);if(a&&RH(t,i,a))return-1;let l=r.coordsAt(o,1);return l&&RH(t,i,l)?1:a&&xee(i,a)?-1:1}function MH(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Hxe(n,t,e.clientX,e.clientY)}}const Xxe=Qt.ie&&Qt.ie_version<=11;let PH=null,DH=0,LH=0;function $ee(n){if(!Xxe)return n.detail;let e=PH,t=LH;return PH=n,LH=Date.now(),DH=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(DH+1)%3:1}function jxe(n,e){let t=MH(n,e),i=$ee(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,a,l){let u=MH(n,o),h=IH(n,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let d=IH(n,t.pos,t.bias,i),p=Math.min(d.from,h.from),m=Math.max(d.to,h.to);h=p<h.from?st.range(p,m):st.range(m,p)}return a?r.replaceRange(r.main.extend(h.from,h.to)):l&&r.ranges.length>1&&r.ranges.some(d=>d.eq(h))?Yxe(r,h):l?r.addRange(h):st.create([h])}}}function Yxe(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return st.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Kr.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function NH(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=n.inputState,a=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,l={from:r,insert:t},u=n.state.changes(a?[a,l]:l);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(r,-1),head:u.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"})}Kr.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),r=0,o=()=>{++r==t.length&&NH(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),o()},l.readAsText(t[a])}}else NH(n,e,e.dataTransfer.getData("Text"),!0)};Kr.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=wee?null:e.clipboardData;t?(Eee(n,t.getData("text/plain")),e.preventDefault()):Vxe(n)};function Zxe(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function qxe(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let a=n.doc.lineAt(o);a.number>r&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),r=a.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let aN=null;Kr.copy=Kr.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=qxe(n.state);if(!t&&!r)return;aN=r?t:null;let o=wee?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):Zxe(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const Cee=Du.define();function Aee(n,e){let t=[];for(let i of n.facet(cee)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:Cee.of(!0)}):null}function kee(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Aee(n.state,e);t?n.dispatch(t):n.update([])}},10)}Kr.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),kee(n)};Kr.blur=n=>{n.observer.clearSelectionRange(),kee(n)};Kr.compositionstart=Kr.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};Kr.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,Qt.chrome&&Qt.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};Kr.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Kr.beforeinput=(n,e)=>{var t;let i;if(Qt.chrome&&Qt.android&&(i=See.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const BH=["pre-wrap","normal","pre-line","break-spaces"];class Jxe{constructor(e){this.lineWrapping=e,this.doc=qn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return BH.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o){let a=BH.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.lineLength=r,l){this.heightSamples={};for(let u=0;u<o.length;u++){let h=o[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class Kxe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Mh{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Mh(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ei=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Ei||(Ei={}));const u$=.001;class No{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>u$&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return No.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,a=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:u,toA:h,fromB:d,toB:p}=r[l],m=o.lineAt(u,Ei.ByPosNoHeight,i.setDoc(t),0,0),g=m.to>=h?m:o.lineAt(h,Ei.ByPosNoHeight,i,0,0);for(p+=g.to-h,h=g.to;l>0&&m.from<=r[l-1].toA;)u=r[l-1].fromA,d=r[l-1].fromB,l--,u<m.from&&(m=o.lineAt(u,Ei.ByPosNoHeight,i,0,0));d+=m.from-u,u=m.from;let v=BF.build(i.setDoc(a),e,d,p);o=o.replace(u,h,v)}return o.updateHeight(i,0)}static empty(){return new Da(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(o>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(r<o){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new e$e(No.of(e.slice(0,t)),a,No.of(e.slice(i)))}}No.prototype.size=1;class Iee extends No{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,r){return new Mh(r,this.length,i,this.height,this.type)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Da extends Iee{constructor(e,t){super(e,t,di.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Da||r instanceof Us&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Us?r=new Da(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):No.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Us extends No{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,a,l=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*o);a=u/o,l=(this.height-u)/(this.length-o-1)}else a=this.height/o;return{firstLine:i,lastLine:r,perLine:a,perChar:l}}blockAt(e,t,i,r){let{firstLine:o,lastLine:a,perLine:l,perChar:u}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),d=t.doc.lineAt(h),p=l+d.length*u,m=Math.max(i,e-p/2);return new Mh(d.from,d.length,m,p,di.Text)}else{let h=Math.max(0,Math.min(a-o,Math.floor((e-i)/l))),{from:d,length:p}=t.doc.line(o+h);return new Mh(d,p,i+l*h,l,di.Text)}}lineAt(e,t,i,r,o){if(t==Ei.ByHeight)return this.blockAt(e,i,r,o);if(t==Ei.ByPosNoHeight){let{from:g,to:v}=i.doc.lineAt(e);return new Mh(g,v-g,0,0,di.Text)}let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,o),h=i.doc.lineAt(e),d=l+h.length*u,p=h.number-a,m=r+l*p+u*(h.from-o-p);return new Mh(h.from,h.length,Math.max(r,Math.min(m,r+this.height-d)),d,di.Text)}forEachLine(e,t,i,r,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:u,perChar:h}=this.heightMetrics(i,o);for(let d=e,p=r;d<=t;){let m=i.doc.lineAt(d);if(d==e){let v=m.number-l;p+=u*v+h*(e-o-v)}let g=u+h*m.length;a(new Mh(m.from,m.length,p,g,di.Text)),p+=g,d=m.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof Us?i[i.length-1]=new Us(o.length+r):i.push(null,new Us(r-1))}if(e>0){let o=i[0];o instanceof Us?i[0]=new Us(e+o.length):i.unshift(new Us(e-1),null)}return No.of(i)}decomposeLeft(e,t){t.push(new Us(e-1),null)}decomposeRight(e,t){t.push(null,new Us(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let a=[],l=Math.max(t,r.from),u=-1;for(r.from>t&&a.push(new Us(r.from-t-1).updateHeight(e,t));l<=o&&r.more;){let d=e.doc.lineAt(l).length;a.length&&a.push(null);let p=r.heights[r.index++];u==-1?u=p:Math.abs(p-u)>=u$&&(u=-2);let m=new Da(d,p);m.outdated=!1,a.push(m),l+=d+1}l<=o&&a.push(null,new Us(o-l).updateHeight(e,l));let h=No.of(a);return(u<0||Math.abs(h.height-this.height)>=u$||Math.abs(u-this.heightMetrics(e,t).perLine)>=u$)&&(e.heightChanged=!0),h}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class e$e extends No{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let a=r+this.left.height,l=o+this.left.length+this.break,u=t==Ei.ByHeight?e<a:e<l,h=u?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,a,l);if(this.break||(u?h.to<l:h.from>l))return h;let d=t==Ei.ByPosNoHeight?Ei.ByPosNoHeight:Ei.ByPos;return u?h.join(this.right.lineAt(l,d,i,a,l)):this.left.lineAt(l,d,i,r,o).join(h)}forEachLine(e,t,i,r,o,a){let l=r+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,i,r,o,a),t>=u&&this.right.forEachLine(e,t,i,l,u,a);else{let h=this.lineAt(u,Ei.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,a),h.to>=e&&h.from<=t&&a(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,u,a)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let l of i)o.push(l);if(e>0&&FH(o,a-1),t<this.length){let l=o.length;this.decomposeRight(t,o),FH(o,l)}return No.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?No.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:a}=this,l=t+o.length+this.break,u=null;return r&&r.from<=t+o.length&&r.more?u=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=l+a.length&&r.more?u=a=a.updateHeight(e,l,i,r):a.updateHeight(e,l,i),u?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function FH(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Us&&(i=n[e+1])instanceof Us&&n.splice(e-1,3,new Us(t.length+1+i.length))}const t$e=5;class BF{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Da?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Da(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Iee(o,r,i.type)):(o||r>=t$e)&&this.addLineDeco(r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Da(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Us(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Da)return e;let t=new Da(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==di.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=di.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Da)&&!this.isCovered?this.nodes.push(new Da(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Da&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new BF(i,e);return ri.spans(t,i,r,o,0),o.finish(i)}}function n$e(n,e,t){let i=new i$e;return ri.compare(n,e,t,i,0),i.changes}class i$e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&tN(e,t,this.changes,5)}}function r$e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),a=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),u=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let d=h,p=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&p.overflow!="visible"){let m=d.getBoundingClientRect();o=Math.max(o,m.left),a=Math.min(a,m.right),l=Math.max(l,m.top),u=h==n.parentNode?m.bottom:Math.min(u,m.bottom)}h=p.position=="absolute"||p.position=="fixed"?d.offsetParent:d.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,a)-t.left,top:l-(t.top+e),bottom:Math.max(l,u)-(t.top+e)}}function s$e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class AP{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e){return Xt.replace({widget:new o$e(this.size,e)}).range(this.from,this.to)}}class o$e extends Nu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class UH{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=GH,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=rr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(NF).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Jxe(t),this.stateDeco=e.facet(tT).filter(i=>typeof i!="function"),this.heightMap=No.empty().applyChanges(this.stateDeco,qn.empty,this.heightOracle.setDoc(e.doc),[new ku(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xt.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:a})=>r>=o&&r<=a)){let{from:o,to:a}=this.lineBlockAt(r);e.push(new px(o,a))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?GH:new c$e(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:bb(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(tT).filter(h=>typeof h!="function");let r=e.changedRanges,o=ku.extendWithRanges(r,n$e(i,this.stateDeco,e?e.changes:jr.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=a&&(e.flags|=2);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(hee)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?rr.RTL:rr.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),l=t.getBoundingClientRect(),u=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,d=0,p=parseInt(i.paddingTop)||0,m=parseInt(i.paddingBottom)||0;(this.paddingTop!=p||this.paddingBottom!=m)&&(this.paddingTop=p,this.paddingBottom=m,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let g=(this.printing?s$e:r$e)(t,this.paddingTop),v=g.top-this.pixelViewport.top,y=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let T=l.width;if((this.contentDOMWidth!=T||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),u){let E=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(E)&&(a=!0),a||r.lineWrapping&&Math.abs(T-this.contentDOMWidth)>r.charWidth){let{lineHeight:$,charWidth:A}=e.docView.measureTextSize();a=$>0&&r.refresh(o,$,A,T/A,E),a&&(e.docView.minWidth=0,h|=8)}v>0&&y>0?d=Math.max(v,y):v<0&&y<0&&(d=Math.min(v,y)),r.heightChanged=!1;for(let $ of this.viewports){let A=$.from==this.viewport.from?E:e.docView.measureVisibleLineHeights($);this.heightMap=(a?No.empty().applyChanges(this.stateDeco,qn.empty,this.heightOracle,[new ku(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new Kxe($.from,A))}r.heightChanged&&(h|=2)}let w=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(this.viewport=this.getViewport(d,this.scrollTarget)),this.updateForViewport(),(h&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,u=new px(r.lineAt(a-i*1e3,Ei.ByHeight,o,0,0).from,r.lineAt(l+(1-i)*1e3,Ei.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<u.from||h>u.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=r.lineAt(h,Ei.ByPos,o,0,0),m;t.y=="center"?m=(p.top+p.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&h<u.from?m=p.top:m=p.bottom-d,u=new px(r.lineAt(m-1e3/2,Ei.ByHeight,o,0,0).from,r.lineAt(m+d+1e3/2,Ei.ByHeight,o,0,0).to)}}return u}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new px(this.heightMap.lineAt(i,Ei.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ei.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ei.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Ei.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||r<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&r>a-2*1e3&&o<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new AP(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=rr.LTR&&!i)return[];let l=[],u=(h,d,p,m)=>{if(d-h<o)return;let g=this.state.selection.main,v=[g.from];g.empty||v.push(g.to);for(let S of v)if(S>h&&S<d){u(h,S-10,p,m),u(S+10,d,p,m);return}let y=l$e(e,S=>S.from>=p.from&&S.to<=p.to&&Math.abs(S.from-h)<o&&Math.abs(S.to-d)<o&&!v.some(T=>S.from<T&&S.to>T));if(!y){if(d<p.to&&t&&i&&t.visibleRanges.some(S=>S.from<=d&&S.to>=d)){let S=t.moveToLineBoundary(st.cursor(d),!1,!0).head;S>h&&(d=S)}y=new AP(h,d,this.gapSize(p,h,d,m))}l.push(y)};for(let h of this.viewportLines){if(h.length<a)continue;let d=a$e(h.from,h.to,this.stateDeco);if(d.total<a)continue;let p=this.scrollTarget?this.scrollTarget.range.head:null,m,g;if(i){let v=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,S;if(p!=null){let T=gx(d,p),w=((this.visibleBottom-this.visibleTop)/2+v)/h.height;y=T-w,S=T+w}else y=(this.visibleTop-h.top-v)/h.height,S=(this.visibleBottom-h.top+v)/h.height;m=mx(d,y),g=mx(d,S)}else{let v=d.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,S,T;if(p!=null){let w=gx(d,p),E=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/v;S=w-E,T=w+E}else S=(this.pixelViewport.left-y)/v,T=(this.pixelViewport.right+y)/v;m=mx(d,S),g=mx(d,T)}m>h.from&&u(h.from,m,h,d),g<h.to&&u(g,h.to,h,d)}return l}gapSize(e,t,i,r){let o=gx(r,i)-gx(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){AP.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];ri.spans(e,this.viewport.from,this.viewport.to,{span(r,o){t.push({from:r,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=t[o].from||r.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||bb(this.heightMap.lineAt(e,Ei.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return bb(this.heightMap.lineAt(this.scaler.fromDOM(e),Ei.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return bb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class px{constructor(e,t){this.from=e,this.to=t}}function a$e(n,e,t){let i=[],r=n,o=0;return ri.spans(t,n,e,{span(){},point(a,l){a>r&&(i.push({from:r,to:a}),o+=a-r),r=l}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function mx({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:a}=e[r],l=a-o;if(i<=l)return o+i;i-=l}}function gx(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function l$e(n,e){for(let t of n)if(e(t))return t}const GH={toDOM(n){return n},fromDOM(n){return n},scale:1};class c$e{constructor(e,t,i){let r=0,o=0,a=0;this.viewports=i.map(({from:l,to:u})=>{let h=t.lineAt(l,Ei.ByPos,e,0,0).top,d=t.lineAt(u,Ei.ByPos,e,0,0).bottom;return r+=d-h,{from:l,to:u,top:h,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=a+(l.top-o)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}}function bb(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Mh(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(r=>bb(r,e)):n.type)}const _x=Wt.define({combine:n=>n.join(" ")}),lN=Wt.define({combine:n=>n.indexOf(!0)>-1}),cN=Gf.newName(),Ree=Gf.newName(),Mee=Gf.newName(),Pee={"&light":"."+Ree,"&dark":"."+Mee};function uN(n,e,t){return new Gf(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const u$e=uN("."+cN,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Pee);class h$e{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=o||a?[]:f$e(e),u=new Oee(l,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=p$e(l,this.bounds.from)}else{let l=e.observer.selectionRange,u=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!bO(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!bO(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=st.single(h,u)}}}function Dee(n,e){let t,{newSel:i}=e,r=n.state.selection.main;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||Qt.android&&e.text.length<a-o)&&(l=r.to,u="end");let h=d$e(n.state.doc.sliceString(o,a,ff),e.text,l-o,u);h&&(Qt.chrome&&n.inputState.lastKeyCode==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==ff+ff&&h.toB--,t={from:o+h.from,to:o+h.toA,insert:qn.of(e.text.slice(h.from,h.toB).split(ff))})}else i&&(!n.hasFocus&&n.state.facet(uk)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(Qt.mac||Qt.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=st.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:qn.of([" "])}):Qt.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=st.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:qn.of([" "])}),t){let o=n.state;if(Qt.ios&&n.inputState.flushIOSKey(n)||Qt.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&q0(n.contentDOM,"Enter",13)||t.from==r.from-1&&t.to==r.to&&t.insert.length==0&&q0(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&q0(n.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();if(n.state.facet(lee).some(h=>h(n,t.from,t.to,a)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let l;if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let h=r.from<t.from?o.sliceDoc(r.from,t.from):"",d=r.to>t.to?o.sliceDoc(t.to,r.to):"";l=o.replaceSelection(n.state.toText(h+t.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=o.changes(t),d=i&&!o.selection.main.eq(i.main)&&i.main.to<=h.newLength?i.main:void 0;if(o.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=r.to&&t.to>=r.to-10){let p=n.state.sliceDoc(t.from,t.to),m=vee(n)||n.state.doc.lineAt(r.head),g=r.to-t.to,v=r.to-r.from;l=o.changeByRange(y=>{if(y.from==r.from&&y.to==r.to)return{changes:h,range:d||y.map(h)};let S=y.to-g,T=S-p.length;if(y.to-y.from!=v||n.state.sliceDoc(T,S)!=p||m&&y.to>=m.from&&y.from<=m.to)return{range:y};let w=o.changes({from:T,to:S,insert:t.insert}),E=y.to-r.to;return{changes:w,range:d?st.range(Math.max(0,d.anchor+E),Math.max(0,d.head+E)):y.map(w)}})}else l={changes:h,selection:d&&o.selection.replaceRange(d)}}let u="input.type";return n.composing&&(u+=".compose",n.inputState.compositionFirstChange&&(u+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function d$e(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let a=n.length,l=e.length;for(;a>0&&l>0&&n.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let u=Math.max(0,o-Math.min(a,l));t-=a+u-o}if(a<o&&n.length<e.length){let u=t<=o&&t>=a?o-t:0;o-=u,l=o+(l-a),a=o}else if(l<o){let u=t<=o&&t>=l?o-t:0;o-=u,a=o+(a-l),l=o}return{from:o,toA:a,toB:l}}function f$e(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new SH(t,i)),(r!=t||o!=i)&&e.push(new SH(r,o))),e}function p$e(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?st.single(t+e,i+e):null}const m$e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},kP=Qt.ie&&Qt.ie_version<=11;class g$e{constructor(e){this.view=e,this.active=!1,this.selectionRange=new cxe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Qt.ie&&Qt.ie_version<=11||Qt.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),kP&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(uk)?i.root.activeElement!=this.dom:!c$(i.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Qt.ie&&Qt.ie_version<=11||Qt.android&&Qt.chrome)&&!i.state.selection.main.empty&&r.focusNode&&xC(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Qt.safari&&e.root.nodeType==11&&sxe(this.dom.ownerDocument)==this.dom&&_$e(this.view)||EC(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=c$(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&hxe(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,m$e),kP&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),kP&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),!this.flush()&&o.force&&q0(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(r=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&c$(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new h$e(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,r=Dee(this.view,t);return this.view.state==i&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=WH(t,e.previousSibling||e.target.previousSibling,-1),r=WH(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function WH(n,e,t){for(;e;){let i=Mi.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function _$e(n){let e=null;function t(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor);return xC(l.node,l.offset,o,a)&&([i,r,o,a]=[o,a,i,r]),{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a}}class Lt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||uxe(e.parent)||document,this.viewState=new UH(e.state||Bn.create(e)),this.plugins=this.state.facet(vb).map(t=>new xP(t));for(let t of this.plugins)t.update(this);this.observer=new g$e(this),this.inputState=new Fxe(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new TH(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof qr?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let m of e){if(m.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,l=0,u=null;e.some(m=>m.annotation(Cee))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,u=Aee(o,a),u||(l=1));let h=this.observer.delayedAndroidKey,d=null;if(h?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(d=null)):this.observer.clear(),o.facet(Bn.phrases)!=this.state.facet(Bn.phrases))return this.setState(o);r=AC.create(this,o,e),r.flags|=l;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(p&&(p=p.map(m.changes)),m.scrollIntoView){let{main:g}=m.state.selection;p=new CC(g.empty?g:st.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of m.effects)g.is(yH)&&(p=g.value)}this.viewState.update(r,p),this.bidiCache=kC.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(yb)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(_x)!=r.state.facet(_x)&&(this.viewState.mustMeasureContent=!0),(t||i||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let m of this.state.facet(nN))m(r);(u||d)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),d&&!Dee(this,d)&&h.force&&q0(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new UH(e),this.plugins=e.facet(vb).map(i=>new xP(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new TH(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(vb),i=e.state.facet(vb);if(t!=i){let r=[];for(let o of i){let a=t.indexOf(o);if(a<0)r.push(new xP(o));else{let l=this.plugins[a];l.mustUpdate=e,r.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:r,clientHeight:o}=this.scrollDOM,a=r>i-o-4?i:r;try{for(let l=0;;l++){this.updateState=1;let u=this.viewport,h=this.viewState.lineBlockAtHeight(a),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];d&4||([this.measureRequests,p]=[p,this.measureRequests]);let m=p.map(S=>{try{return S.read(this)}catch(T){return Wa(this.state,T),zH}}),g=AC.create(this,this.state,[]),v=!1,y=!1;g.flags|=d,t?t.flags|=d:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),v=this.docView.update(g));for(let S=0;S<p.length;S++)if(m[S]!=zH)try{let T=p[S];T.write&&T.write(m[S],this)}catch(T){Wa(this.state,T)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,y=!0;else{let S=this.viewState.lineBlockAt(h.from).top-h.top;(S>1||S<-1)&&(this.scrollDOM.scrollTop+=S,y=!0)}if(v&&this.docView.updateSelection(!0),this.viewport.from==u.from&&this.viewport.to==u.to&&!y&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(nN))l(t)}get themeClasses(){return cN+" "+(this.state.facet(lN)?Mee:Ree)+" "+this.state.facet(_x)}updateAttrs(){let e=QH(this,dee,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(uk)?"true":"false",class:"cm-content",style:`${Qt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),QH(this,NF,t);let i=this.observer.ignore(()=>{let r=eN(this.contentDOM,this.contentAttrs,t),o=eN(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Lt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(yb),Gf.mount(this.root,this.styleModules.concat(u$e).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return CP(this,e,AH(this,e,t,i))}moveByGroup(e,t){return CP(this,e,AH(this,e,t,i=>Nxe(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return Lxe(this,e,t,i)}moveVertically(e,t,i){return CP(this,e,Bxe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),bee(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),a=o[J0.find(o,e-r.from,-1,t)];return MF(i,a.dir==rr.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(uee)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>O$e)return gee(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let i=Sxe(e.text,t);return this.bidiCache.push(new kC(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Qt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{VK(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return yH.of(new CC(typeof e=="number"?st.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Er.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Gf.newName(),r=[_x.of(i),yb.of(uN(`.${i}`,e))];return t&&t.dark&&r.push(lN.of(!0)),r}static baseTheme(e){return Sg.lowest(yb.of(uN("."+cN,e,Pee)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Mi.get(i)||Mi.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}Lt.styleModule=yb;Lt.inputHandler=lee;Lt.focusChangeEffect=cee;Lt.perLineTextDirection=uee;Lt.exceptionSink=aee;Lt.updateListener=nN;Lt.editable=uk;Lt.mouseSelectionStyle=oee;Lt.dragMovesSelection=see;Lt.clickAddsSelectionRange=ree;Lt.decorations=tT;Lt.atomicRanges=fee;Lt.scrollMargins=pee;Lt.darkTheme=lN;Lt.contentAttributes=NF;Lt.editorAttributes=dee;Lt.lineWrapping=Lt.contentAttributes.of({class:"cm-lineWrapping"});Lt.announce=gn.define();const O$e=4096,zH={};class kC{constructor(e,t,i,r){this.from=e,this.to=t,this.dir=i,this.order=r}static update(e,t){if(t.empty)return e;let i=[],r=e.length?e[e.length-1].dir:rr.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==r&&!t.touchesRange(a.from,a.to)&&i.push(new kC(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return i}}function QH(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],a=typeof o=="function"?o(n):o;a&&KL(a,t)}return t}const v$e=Qt.mac?"mac":Qt.windows?"win":Qt.linux?"linux":"key";function y$e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,a,l;for(let u=0;u<t.length-1;++u){const h=t[u];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Ox(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const b$e=Sg.default(Lt.domEventHandlers({keydown(n,e){return Nee(Lee(e.state),n,e,"editor")}})),KT=Wt.define({enables:b$e}),VH=new WeakMap;function Lee(n){let e=n.facet(KT),t=VH.get(e);return t||VH.set(e,t=w$e(e.reduce((i,r)=>i.concat(r),[]))),t}function S$e(n,e,t){return Nee(Lee(n.state),e,n,t)}let tf=null;const T$e=4e3;function w$e(n,e=v$e){let t=Object.create(null),i=Object.create(null),r=(a,l)=>{let u=i[a];if(u==null)i[a]=l;else if(u!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,l,u,h)=>{var d,p;let m=t[a]||(t[a]=Object.create(null)),g=l.split(/ (?!$)/).map(S=>y$e(S,e));for(let S=1;S<g.length;S++){let T=g.slice(0,S).join(" ");r(T,!0),m[T]||(m[T]={preventDefault:!0,run:[w=>{let E=tf={view:w,prefix:T,scope:a};return setTimeout(()=>{tf==E&&(tf=null)},T$e),!0}]})}let v=g.join(" ");r(v,!1);let y=m[v]||(m[v]={preventDefault:!1,run:((p=(d=m._any)===null||d===void 0?void 0:d.run)===null||p===void 0?void 0:p.slice())||[]});u&&y.run.push(u),h&&(y.preventDefault=!0)};for(let a of n){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let h of l){let d=t[h]||(t[h]=Object.create(null));d._any||(d._any={preventDefault:!1,run:[]});for(let p in d)d[p].run.push(a.any)}let u=a[e]||a.key;if(u)for(let h of l)o(h,u,a.run,a.preventDefault),a.shift&&o(h,"Shift-"+u,a.shift,a.preventDefault)}return t}function Nee(n,e,t,i){let r=rxe(e),o=Gs(r,0),a=Tl(o)==r.length&&r!=" ",l="",u=!1;tf&&tf.view==t&&tf.scope==i&&(l=tf.prefix+" ",(u=Tee.indexOf(e.keyCode)<0)&&(tf=null));let h=new Set,d=v=>{if(v){for(let y of v.run)if(!h.has(y)&&(h.add(y),y(t,e)))return!0;v.preventDefault&&(u=!0)}return!1},p=n[i],m,g;if(p){if(d(p[l+Ox(r,e,!a)]))return!0;if(a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Qt.windows&&e.ctrlKey&&e.altKey)&&(m=Wf[e.keyCode])&&m!=r){if(d(p[l+Ox(m,e,!0)]))return!0;if(e.shiftKey&&(g=JS[e.keyCode])!=r&&g!=m&&d(p[l+Ox(g,e,!1)]))return!0}else if(a&&e.shiftKey&&d(p[l+Ox(r,e,!0)]))return!0;if(d(p._any))return!0}return u}class e1{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=Bee(e);return[new e1(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return E$e(e,t,i)}}function Bee(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==rr.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function HH(n,e,t){let i=st.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:di.Text}}function XH(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==di.Text))return i}return t}function E$e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==rr.LTR,a=n.contentDOM,l=a.getBoundingClientRect(),u=Bee(n),h=window.getComputedStyle(a.firstChild),d=l.left+parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)),p=l.right-parseInt(h.paddingRight),m=XH(n,i),g=XH(n,r),v=m.type==di.Text?m:null,y=g.type==di.Text?g:null;if(n.lineWrapping&&(v&&(v=HH(n,i,v)),y&&(y=HH(n,r,y))),v&&y&&v.from==y.from)return T(w(t.from,t.to,v));{let $=v?w(t.from,null,v):E(m,!1),A=y?w(null,t.to,y):E(g,!0),I=[];return(v||m).to<(y||g).from-1?I.push(S(d,$.bottom,p,A.top)):$.bottom<A.top&&n.elementAtHeight(($.bottom+A.top)/2).type==di.Text&&($.bottom=A.top=($.bottom+A.top)/2),T($).concat(I).concat(T(A))}function S($,A,I,D){return new e1(e,$-u.left,A-u.top-.01,I-$,D-A+.01)}function T({top:$,bottom:A,horizontal:I}){let D=[];for(let R=0;R<I.length;R+=2)D.push(S(I[R],$,I[R+1],A));return D}function w($,A,I){let D=1e9,R=-1e9,B=[];function G(H,M,K,re,ce){let X=n.coordsAtPos(H,H==I.to?-2:2),Q=n.coordsAtPos(K,K==I.from?2:-2);D=Math.min(X.top,Q.top,D),R=Math.max(X.bottom,Q.bottom,R),ce==rr.LTR?B.push(o&&M?d:X.left,o&&re?p:Q.right):B.push(!o&&re?d:Q.left,!o&&M?p:X.right)}let Z=$??I.from,N=A??I.to;for(let H of n.visibleRanges)if(H.to>Z&&H.from<N)for(let M=Math.max(H.from,Z),K=Math.min(H.to,N);;){let re=n.state.doc.lineAt(M);for(let ce of n.bidiSpans(re)){let X=ce.from+re.from,Q=ce.to+re.from;if(X>=K)break;Q>M&&G(Math.max(X,M),$==null&&X<=Z,Math.min(Q,K),A==null&&Q>=N,ce.dir)}if(M=re.to+1,M>=K)break}return B.length==0&&G(Z,$==null,N,A==null,n.textDirection),{top:D,bottom:R,horizontal:B}}function E($,A){let I=l.top+(A?$.top:$.bottom);return{top:I,bottom:I,horizontal:[]}}}function x$e(n,e){return n.constructor==e.constructor&&n.eq(e)}class $$e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(h$)!=e.state.facet(h$)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(h$);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!x$e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const h$=Wt.define();function Fee(n){return[Er.define(e=>new $$e(e,n)),h$.of(n)]}const Uee=!Qt.ios,nT=Wt.define({combine(n){return Lu(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function C$e(n={}){return[nT.of(n),A$e,k$e,I$e,hee.of(!0)]}function Gee(n){return n.startState.facet(nT)!=n.state.facet(nT)}const A$e=Fee({above:!0,markers(n){let{state:e}=n,t=e.facet(nT),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||Uee:t.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:st.cursor(r.head,r.head>r.anchor?-1:1);for(let u of e1.forRange(n,a,l))i.push(u)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Gee(n);return t&&jH(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){jH(e.state,n)},class:"cm-cursorLayer"});function jH(n,e){e.style.animationDuration=n.facet(nT).cursorBlinkRate+"ms"}const k$e=Fee({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:e1.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Gee(n)},class:"cm-selectionLayer"}),Wee={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Uee&&(Wee[".cm-line"].caretColor="transparent !important");const I$e=Sg.highest(Lt.theme(Wee)),zee=gn.define({map(n,e){return n==null?null:e.mapPos(n)}}),Sb=bs.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(zee)?i.value:t,n)}}),R$e=Er.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Sb);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Sb)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Sb),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Sb)!=n&&this.view.dispatch({effects:zee.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function M$e(){return[Sb,R$e]}function YH(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),a=t,l;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)r(a+l.index,l)}function P$e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class D$e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,u,h,d)=>r(d,h,h+l[0].length,l,u);else if(typeof i=="function")this.addMatch=(l,u,h,d)=>{let p=i(l,u,h);p&&d(h,h+l[0].length,p)};else if(i)this.addMatch=(l,u,h,d)=>d(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let t=new Uf,i=t.add.bind(t);for(let{from:r,to:o}of P$e(e,this.maxLength))YH(e.state.doc,this.regexp,r,o,(a,l)=>this.addMatch(l,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,a,l,u)=>{u>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(u,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let a=Math.max(o.from,i),l=Math.min(o.to,r);if(l>a){let u=e.state.doc.lineAt(a),h=u.to<l?e.state.doc.lineAt(l):u,d=Math.max(o.from,u.from),p=Math.min(o.to,h.to);if(this.boundary){for(;a>u.from;a--)if(this.boundary.test(u.text[a-1-u.from])){d=a;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){p=l;break}}let m=[],g,v=(y,S,T)=>m.push(T.range(y,S));if(u==h)for(this.regexp.lastIndex=d-u.from;(g=this.regexp.exec(u.text))&&g.index<p-u.from;)this.addMatch(g,e,g.index+u.from,v);else YH(e.state.doc,this.regexp,d,p,(y,S)=>this.addMatch(S,e,y,v));t=t.update({filterFrom:d,filterTo:p,filter:(y,S)=>y<d||S>p,add:m})}}return t}}const hN=/x/.unicode!=null?"gu":"g",L$e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,hN),N$e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let IP=null;function B$e(){var n;if(IP==null&&typeof document<"u"&&document.body){let e=document.body.style;IP=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return IP||!1}const d$=Wt.define({combine(n){let e=Lu(n,{render:null,specialChars:L$e,addSpecialChars:null});return(e.replaceTabs=!B$e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hN)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hN)),e}});function F$e(n={}){return[d$.of(n),U$e()]}let ZH=null;function U$e(){return ZH||(ZH=Er.fromClass(class{constructor(n){this.view=n,this.decorations=Xt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(d$)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new D$e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=Gs(e[0],0);if(o==9){let a=r.lineAt(i),l=t.state.tabSize,u=qT(a.text,l,i-a.from);return Xt.replace({widget:new Q$e((l-u%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Xt.replace({widget:new z$e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(d$);n.startState.facet(d$)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const G$e="";function W$e(n){return n>=32?G$e:n==10?"":String.fromCharCode(9216+n)}class z$e extends Nu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=W$e(this.code),i=e.state.phrase("Control character")+" "+(N$e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Q$e extends Nu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function V$e(){return X$e}const H$e=Xt.line({class:"cm-activeLine"}),X$e=Er.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(H$e.range(r.from)),e=r.from)}return Xt.set(t)}},{decorations:n=>n.decorations});class j$e extends Nu{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function Y$e(n){return Er.fromClass(class{constructor(e){this.view=e,this.placeholder=Xt.set([Xt.widget({widget:new j$e(n),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Xt.none:this.placeholder}},{decorations:e=>e.decorations})}const dN=2e3;function Z$e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>dN||t.off>dN||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let u=i;u<=r;u++){let h=n.doc.line(u);h.length<=l&&o.push(st.range(h.from+a,h.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let u=i;u<=r;u++){let h=n.doc.line(u),d=VL(h.text,a,n.tabSize,!0);if(d<0)o.push(st.cursor(h.to));else{let p=VL(h.text,l,n.tabSize);o.push(st.range(h.from+d,h.from+p))}}}return o}function q$e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function qH(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>dN?-1:r==i.length?q$e(n,e.clientX):qT(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function J$e(n,e){let t=qH(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),a=r.state.doc.lineAt(o);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(r.changes)}},get(r,o,a){let l=qH(n,r);if(!l)return i;let u=Z$e(n.state,t,l);return u.length?a?st.create(u.concat(i.ranges)):st.create(u):i}}:null}function K$e(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return Lt.mouseSelectionStyle.of((t,i)=>e(i)?J$e(t,i):null)}const eCe={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},tCe={style:"cursor: crosshair"};function nCe(n={}){let[e,t]=eCe[n.key||"Alt"],i=Er.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Lt.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?tCe:null})]}const vx="-10000px";class Qee{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),r=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[];for(let a=0;a<r.length;a++){let l=r[a],u=-1;if(l){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==l.create&&(u=h)}if(u<0)o[a]=this.createTooltipView(l);else{let h=o[a]=this.tooltipViews[u];h.update&&h.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(a.dom.remove(),(t=a.destroy)===null||t===void 0||t.call(a));return this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function iCe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const RP=Wt.define({combine:n=>{var e,t,i;return{position:Qt.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||iCe}}}),JH=new WeakMap,Vee=Er.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(RP);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Qee(n,FF,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(RP);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=vx,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(RP).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:i}=n,r=[];for(let o=0;o<this.manager.tooltips.length;o++){let a=this.manager.tooltips[o],l=this.manager.tooltipViews[o],{dom:u}=l,h=n.pos[o],d=n.size[o];if(!h||h.bottom<=Math.max(t.top,i.top)||h.top>=Math.min(t.bottom,i.bottom)||h.right<Math.max(t.left,i.left)-.1||h.left>Math.min(t.right,i.right)+.1){u.style.top=vx;continue}let p=a.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,m=p?7:0,g=d.right-d.left,v=(e=JH.get(l))!==null&&e!==void 0?e:d.bottom-d.top,y=l.offset||sCe,S=this.view.textDirection==rr.LTR,T=d.width>i.right-i.left?S?i.left:i.right-d.width:S?Math.min(h.left-(p?14:0)+y.x,i.right-g):Math.max(i.left,h.left-g+(p?14:0)-y.x),w=!!a.above;!a.strictSide&&(w?h.top-(d.bottom-d.top)-y.y<i.top:h.bottom+(d.bottom-d.top)+y.y>i.bottom)&&w==i.bottom-h.bottom>h.top-i.top&&(w=!w);let E=(w?h.top-i.top:i.bottom-h.bottom)-m;if(E<v&&l.resize!==!1){if(E<this.view.defaultLineHeight){u.style.top=vx;continue}JH.set(l,v),u.style.height=(v=E)+"px"}else u.style.height&&(u.style.height="");let $=w?h.top-v-m-y.y:h.bottom+m+y.y,A=T+g;if(l.overlap!==!0)for(let I of r)I.left<A&&I.right>T&&I.top<$+v&&I.bottom>$&&($=w?I.top-v-2-m:I.bottom+m+2);this.position=="absolute"?(u.style.top=$-n.parent.top+"px",u.style.left=T-n.parent.left+"px"):(u.style.top=$+"px",u.style.left=T+"px"),p&&(p.style.left=`${h.left+(S?y.x:-y.x)-(T+14-7)}px`),l.overlap!==!0&&r.push({left:T,top:$,right:A,bottom:$+v}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),l.positioned&&l.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=vx}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),rCe=Lt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),sCe={x:0,y:0},FF=Wt.define({enables:[Vee,rCe]}),IC=Wt.define();class UF{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Qee(e,IC,t=>this.createHostedView(t))}static create(e){return new UF(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const oCe=FF.compute([IC],n=>{let e=n.facet(IC).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:UF.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class aCe{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),o=r&&r.dir==rr.RTL?-1:1,a=this.source(this.view,t,e.x<i.left?-o:o);if(a!=null&&a.then){let l=this.pending={pos:t};a.then(u=>{this.pending==l&&(this.pending=null,u&&this.view.dispatch({effects:this.setHover.of(u)}))},u=>Wa(this.view.state,u,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!KH(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,o=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!lCe(this.view,r,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!KH(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function KH(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function lCe(n,e,t,i,r,o){let a=document.createRange(),l=n.domAtPos(e),u=n.domAtPos(t);a.setEnd(u.node,u.offset),a.setStart(l.node,l.offset);let h=a.getClientRects();a.detach();for(let d=0;d<h.length;d++){let p=h[d];if(Math.max(p.top-r,r-p.bottom,p.left-i,i-p.right)<=o)return!0}return!1}function cCe(n,e={}){let t=gn.define(),i=bs.define({create(){return null},update(r,o){if(r&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,r)))return null;if(r&&o.docChanged){let a=o.changes.mapPos(r.pos,-1,Qs.TrackDel);if(a==null)return null;let l=Object.assign(Object.create(null),r);l.pos=a,r.end!=null&&(l.end=o.changes.mapPos(r.end)),r=l}for(let a of o.effects)a.is(t)&&(r=a.value),a.is(hCe)&&(r=null);return r},provide:r=>IC.from(r)});return[i,Er.define(r=>new aCe(r,n,i,t,e.hoverTime||300)),oCe]}function uCe(n,e){let t=n.plugin(Vee);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const hCe=gn.define(),e6=Wt.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function iT(n,e){let t=n.plugin(Hee),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Hee=Er.fromClass(class{constructor(n){this.input=n.state.facet(rT),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(e6);this.top=new yx(n,!0,e.topContainer),this.bottom=new yx(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(e6);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new yx(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new yx(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(rT);if(t!=this.input){let i=t.filter(u=>u),r=[],o=[],a=[],l=[];for(let u of i){let h=this.specs.indexOf(u),d;h<0?(d=u(n.view),l.push(d)):(d=this.panels[h],d.update&&d.update(n)),r.push(d),(d.top?o:a).push(d)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(a);for(let u of l)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Lt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class yx{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=t6(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=t6(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function t6(n){let e=n.nextSibling;return n.remove(),e}const rT=Wt.define({enables:Hee});class td extends cg{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}td.prototype.elementClass="";td.prototype.toDOM=void 0;td.prototype.mapMode=Qs.TrackBefore;td.prototype.startSide=td.prototype.endSide=-1;td.prototype.point=!0;const f$=Wt.define(),dCe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ri.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Yb=Wt.define();function fCe(n){return[Xee(),Yb.of(Object.assign(Object.assign({},dCe),n))]}const fN=Wt.define({combine:n=>n.some(e=>e)});function Xee(n){let e=[pCe];return n&&n.fixed===!1&&e.push(fN.of(!0)),e}const pCe=Er.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Yb).map(e=>new i6(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(fN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(fN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=ri.iter(this.view.state.facet(f$),this.view.viewport.from),i=[],r=this.gutters.map(o=>new mCe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let a;if(Array.isArray(o.type)){for(let l of o.type)if(l.type==di.Text){a=l;break}}else a=o.type==di.Text?o:void 0;if(a){i.length&&(i=[]),jee(t,i,o.from);for(let l of r)l.line(this.view,a,i)}}for(let o of r)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Yb),t=n.state.facet(Yb),i=n.docChanged||n.heightChanged||n.viewportChanged||!ri.eq(n.startState.facet(f$),n.state.facet(f$),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let a=e.indexOf(o);a<0?r.push(new i6(this.view,o)):(this.gutters[a].update(n),r.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Lt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==rr.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function n6(n){return Array.isArray(n)?n:[n]}function jee(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class mCe{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ri.iter(e.markers,t.from)}line(e,t,i){let r=[];jee(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let a=this.gutter;if(r.length==0&&!a.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==a.elements.length){let u=new Yee(e,t.height,l,r);a.elements.push(u),a.dom.appendChild(u.dom)}else a.elements[this.i].update(e,t.height,l,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class i6{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let u=o.getBoundingClientRect();a=(u.top+u.bottom)/2}else a=r.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=n6(t.markers(e)),t.initialSpacer&&(this.spacer=new Yee(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=n6(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ri.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Yee{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),gCe(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,a=0;;){let l=a,u=o<t.length?t[o++]:null,h=!1;if(u){let d=u.elementClass;d&&(i+=" "+d);for(let p=a;p<this.markers.length;p++)if(this.markers[p].compare(u)){l=p,h=!0;break}}else l=this.markers.length;for(;a<l;){let d=this.markers[a++];if(d.toDOM){d.destroy(r);let p=r.nextSibling;r.remove(),r=p}}if(!u)break;u.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(u.toDOM(e),r)),h&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function gCe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const _Ce=Wt.define(),k0=Wt.define({combine(n){return Lu(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],a=t[r];i[r]=o?(l,u,h)=>o(l,u,h)||a(l,u,h):a}return i}})}});class MP extends td{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function PP(n,e){return n.state.facet(k0).formatNumber(e,n.state)}const OCe=Yb.compute([k0],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(_Ce)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new MP(PP(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(k0)!=e.state.facet(k0),initialSpacer(e){return new MP(PP(e,r6(e.state.doc.lines)))},updateSpacer(e,t){let i=PP(t.view,r6(t.view.state.doc.lines));return i==e.number?e:new MP(i)},domEventHandlers:n.facet(k0).domEventHandlers}));function vCe(n={}){return[k0.of(n),Xee(),OCe]}function r6(n){let e=9;for(;e<n;)e=e*10+9;return e}const yCe=new class extends td{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},bCe=f$.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(yCe.range(r)))}return ri.of(e)});function SCe(){return bCe}var DP;const I0=new An;function Zee(n){return Wt.define({combine:n?e=>e.concat(n):void 0})}const GF=new An;class mc{constructor(e,t,i=[],r=""){this.data=e,this.name=r,Bn.prototype.hasOwnProperty("tree")||Object.defineProperty(Bn.prototype,"tree",{get(){return Ur(this)}}),this.parser=t,this.extension=[Qf.of(this),Bn.languageData.of((o,a,l)=>{let u=s6(o,a,l),h=u.type.prop(I0);if(!h)return[];let d=o.facet(h),p=u.type.prop(GF);if(p){let m=u.resolve(a-u.from,l);for(let g of p)if(g.test(m,o)){let v=o.facet(g.facet);return g.type=="replace"?v:v.concat(d)}}return d})].concat(i)}isActiveAt(e,t,i=-1){return s6(e,t,i).type.prop(I0)==this.data}findRegions(e){let t=e.facet(Qf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,a)=>{if(o.prop(I0)==this.data){i.push({from:a,to:a+o.length});return}let l=o.prop(An.mounted);if(l){if(l.tree.prop(I0)==this.data){if(l.overlay)for(let u of l.overlay)i.push({from:u.from+a,to:u.to+a});else i.push({from:a,to:a+o.length});return}else if(l.overlay){let u=i.length;if(r(l.tree,l.overlay[0].from+a),i.length>u)return}}for(let u=0;u<o.children.length;u++){let h=o.children[u];h instanceof Nr&&r(h,o.positions[u]+a)}};return r(Ur(e),0),i}get allowsNesting(){return!0}}mc.setState=gn.define();function s6(n,e,t){let i=n.facet(Qf),r=Ur(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Yr.ExcludeBuffers))o.type.isTop&&(r=o);return r}class sT extends mc{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Zee(e.languageData);return new sT(t,e.parser.configure({props:[I0.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new sT(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ur(n){let e=n.field(mc.state,!1);return e?e.tree:Nr.empty}class TCe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let ob=null;class RC{constructor(e,t,i=[],r,o,a,l,u){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=a,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new RC(e,t,[],Nr.empty,0,i,[],null)}startParse(){return this.parser.startParse(new TCe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Nr.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Gm.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Gm.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ob;ob=this;try{return e()}finally{ob=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=o6(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((h,d,p,m)=>u.push({fromA:h,toA:d,fromB:p,toB:m})),i=Gm.applyChanges(i,u),r=Nr.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let d=e.mapPos(h.from,1),p=e.mapPos(h.to,-1);d<p&&l.push({from:d,to:p})}}}return new RC(this.parser,t,i,r,o,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=o6(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends vK{createParse(t,i,r){let o=r[0].from,a=r[r.length-1].to;return{parsedPos:o,advance(){let u=ob;if(u){for(let h of r)u.tempSkipped.push(h);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=a,new Nr(fa.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ob}}function o6(n,e,t){return Gm.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class wO{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new wO(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=RC.create(e.facet(Qf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new wO(i)}}mc.state=bs.define({create:wO.init,update(n,e){for(let t of e.effects)if(t.is(mc.setState))return t.value;return e.startState.facet(Qf)!=e.state.facet(Qf)?wO.init(e.state):n.apply(e)}});let qee=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(qee=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const LP=typeof navigator<"u"&&(!((DP=navigator.scheduling)===null||DP===void 0)&&DP.isInputPending)?()=>navigator.scheduling.isInputPending():null,wCe=Er.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(mc.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(mc.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=qee(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(mc.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!LP?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<r&&i.doc.length>r+1e3,u=o.context.work(()=>LP&&LP()||Date.now()>a,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:mc.setState.of(new wO(o.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Wa(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qf=Wt.define({combine(n){return n.length?n[0]:null},enables:n=>[mc.state,wCe,Lt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Jee{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const ECe=Wt.define(),t1=Wt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function MC(n){let e=n.facet(t1);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function oT(n,e){let t="",i=n.tabSize,r=n.facet(t1)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function WF(n,e){n instanceof Bn&&(n=new hk(n));for(let i of n.state.facet(ECe)){let r=i(n,e);if(r!==void 0)return r}let t=Ur(n.state);return t?xCe(n,t,e):null}class hk{constructor(e,t={}){this.state=e,this.options=t,this.unit=MC(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return qT(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let a=o(r);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const zF=new An;function xCe(n,e,t){return Kee(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function $Ce(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function CCe(n){let e=n.type.prop(zF);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(An.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return a=>ete(a,!0,1,void 0,o&&!$Ce(a)?r.from:void 0)}return n.parent==null?ACe:null}function Kee(n,e,t){for(;n;n=n.parent){let i=CCe(n);if(i)return i(QF.create(t,e,n))}return null}function ACe(){return 0}class QF extends hk{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new QF(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(kCe(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Kee(e,this.pos,this.base):0}}function kCe(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function ICe(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),a=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let l=t.to;;){let u=e.childAfter(l);if(!u||u==i)return null;if(!u.type.isSkipped)return u.from<a?t:null;l=u.to}}function p$({closing:n,align:e=!0,units:t=1}){return i=>ete(i,e,t,n)}function ete(n,e,t,i,r){let o=n.textAfter,a=o.match(/^\s*/)[0].length,l=i&&o.slice(a,a+i.length)==i||r==n.pos+a,u=e?ICe(n):null;return u?l?n.column(u.from):n.column(u.to):n.baseIndent+(l?0:n.unit*t)}const RCe=n=>n.baseIndent;function NP({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const MCe=200;function PCe(){return Bn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+MCe)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:a}=n,l=-1,u=[];for(let{head:h}of a.selection.ranges){let d=a.doc.lineAt(h);if(d.from==l)continue;l=d.from;let p=WF(a,d.from);if(p==null)continue;let m=/^\s*/.exec(d.text)[0],g=oT(a,p);m!=g&&u.push({from:d.from,to:d.from+m.length,insert:g})}return u.length?[n,{changes:u,sequential:!0}]:n})}const DCe=Wt.define(),VF=new An;function tte(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function LCe(n,e,t){let i=Ur(n);if(i.length<t)return null;let r=i.resolveInner(t,1),o=null;for(let a=r;a;a=a.parent){if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let l=a.type.prop(VF);if(l&&(a.to<i.length-50||i.length==n.doc.length||!NCe(a))){let u=l(a,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(o=u)}}return o}function NCe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function PC(n,e,t){for(let i of n.facet(DCe)){let r=i(n,e,t);if(r)return r}return LCe(n,e,t)}function nte(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const dk=gn.define({map:nte}),n1=gn.define({map:nte});function ite(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const hg=bs.define({create(){return Xt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(dk)&&!BCe(n,t.value.from,t.value.to)?n=n.update({add:[a6.range(t.value.from,t.value.to)]}):t.is(n1)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,o)=>{r<i&&o>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,o)=>o<=i||r>=i}))}return n},provide:n=>Lt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(a6.range(i,r))}return Xt.set(e,!0)}});function DC(n,e,t){var i;let r=null;return(i=n.field(hg,!1))===null||i===void 0||i.between(e,t,(o,a)=>{(!r||r.from>o)&&(r={from:o,to:a})}),r}function BCe(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function rte(n,e){return n.field(hg,!1)?e:e.concat(gn.appendConfig.of(ate()))}const FCe=n=>{for(let e of ite(n)){let t=PC(n.state,e.from,e.to);if(t)return n.dispatch({effects:rte(n.state,[dk.of(t),ste(n,t)])}),!0}return!1},UCe=n=>{if(!n.state.field(hg,!1))return!1;let e=[];for(let t of ite(n)){let i=DC(n.state,t.from,t.to);i&&e.push(n1.of(i),ste(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function ste(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Lt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const GCe=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=PC(e,r.from,r.to);o&&t.push(dk.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:rte(n.state,t)}),!!t.length},WCe=n=>{let e=n.state.field(hg,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(n1.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},zCe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:FCe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:UCe},{key:"Ctrl-Alt-[",run:GCe},{key:"Ctrl-Alt-]",run:WCe}],QCe={placeholderDOM:null,placeholderText:""},ote=Wt.define({combine(n){return Lu(n,QCe)}});function ate(n){let e=[hg,XCe];return n&&e.push(ote.of(n)),e}const a6=Xt.replace({widget:new class extends Nu{toDOM(n){let{state:e}=n,t=e.facet(ote),i=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=DC(n.state,a.from,a.to);l&&n.dispatch({effects:n1.of(l)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let r=document.createElement("span");return r.textContent=t.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),VCe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class BP extends td{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function HCe(n={}){let e=Object.assign(Object.assign({},VCe),n),t=new BP(e,!0),i=new BP(e,!1),r=Er.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Qf)!=a.state.facet(Qf)||a.startState.field(hg,!1)!=a.state.field(hg,!1)||Ur(a.startState)!=Ur(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new Uf;for(let u of a.viewportLineBlocks){let h=DC(a.state,u.from,u.to)?i:PC(a.state,u.from,u.to)?t:null;h&&l.add(u.from,u.from,h)}return l.finish()}}),{domEventHandlers:o}=e;return[r,fCe({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(r))===null||l===void 0?void 0:l.markers)||ri.empty},initialSpacer(){return new BP(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,l,u)=>{if(o.click&&o.click(a,l,u))return!0;let h=DC(a.state,l.from,l.to);if(h)return a.dispatch({effects:n1.of(h)}),!0;let d=PC(a.state,l.from,l.to);return d?(a.dispatch({effects:dk.of(d)}),!0):!1}})}),ate()]}const XCe=Lt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class i1{constructor(e,t){this.specs=e;let i;function r(l){let u=Gf.newName();return(i||(i=Object.create(null)))["."+u]=l,u}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,a=t.scope;this.scope=a instanceof mc?l=>l.prop(I0)==a.data:a?l=>l==a:void 0,this.style=TK(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new Gf(i):null,this.themeType=t.themeType}static define(e,t){return new i1(e,t||{})}}const pN=Wt.define(),lte=Wt.define({combine(n){return n.length?[n[0]]:null}});function FP(n){let e=n.facet(pN);return e.length?e:n.facet(lte)}function cte(n,e){let t=[YCe],i;return n instanceof i1&&(n.module&&t.push(Lt.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(lte.of(n)):i?t.push(pN.computeN([Lt.darkTheme],r=>r.facet(Lt.darkTheme)==(i=="dark")?[n]:[])):t.push(pN.of(n)),t}class jCe{constructor(e){this.markCache=Object.create(null),this.tree=Ur(e.state),this.decorations=this.buildDeco(e,FP(e.state))}update(e){let t=Ur(e.state),i=FP(e.state),r=i!=FP(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Xt.none;let i=new Uf;for(let{from:r,to:o}of e.visibleRanges)Jwe(this.tree,t,(a,l,u)=>{i.add(a,l,this.markCache[u]||(this.markCache[u]=Xt.mark({class:u})))},r,o);return i.finish()}}const YCe=Sg.high(Er.fromClass(jCe,{decorations:n=>n.decorations})),ZCe=i1.define([{tag:$e.meta,color:"#404740"},{tag:$e.link,textDecoration:"underline"},{tag:$e.heading,textDecoration:"underline",fontWeight:"bold"},{tag:$e.emphasis,fontStyle:"italic"},{tag:$e.strong,fontWeight:"bold"},{tag:$e.strikethrough,textDecoration:"line-through"},{tag:$e.keyword,color:"#708"},{tag:[$e.atom,$e.bool,$e.url,$e.contentSeparator,$e.labelName],color:"#219"},{tag:[$e.literal,$e.inserted],color:"#164"},{tag:[$e.string,$e.deleted],color:"#a11"},{tag:[$e.regexp,$e.escape,$e.special($e.string)],color:"#e40"},{tag:$e.definition($e.variableName),color:"#00f"},{tag:$e.local($e.variableName),color:"#30a"},{tag:[$e.typeName,$e.namespace],color:"#085"},{tag:$e.className,color:"#167"},{tag:[$e.special($e.variableName),$e.macroName],color:"#256"},{tag:$e.definition($e.propertyName),color:"#00c"},{tag:$e.comment,color:"#940"},{tag:$e.invalid,color:"#f00"}]),qCe=Lt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ute=1e4,hte="()[]{}",dte=Wt.define({combine(n){return Lu(n,{afterCursor:!0,brackets:hte,maxScanDistance:ute,renderMatch:eAe})}}),JCe=Xt.mark({class:"cm-matchingBracket"}),KCe=Xt.mark({class:"cm-nonmatchingBracket"});function eAe(n){let e=[],t=n.matched?JCe:KCe;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const tAe=bs.define({create(){return Xt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(dte);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=yu(e.state,r.head,-1,i)||r.head>0&&yu(e.state,r.head-1,1,i)||i.afterCursor&&(yu(e.state,r.head,1,i)||r.head<e.state.doc.length&&yu(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Xt.set(t,!0)},provide:n=>Lt.decorations.from(n)}),nAe=[tAe,qCe];function iAe(n={}){return[dte.of(n),nAe]}const rAe=new An;function mN(n,e,t){let i=n.prop(e<0?An.openedBy:An.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function gN(n){let e=n.type.prop(rAe);return e?e(n.node):n}function yu(n,e,t,i={}){let r=i.maxScanDistance||ute,o=i.brackets||hte,a=Ur(n),l=a.resolveInner(e,t);for(let u=l;u;u=u.parent){let h=mN(u.type,t,o);if(h&&u.from<u.to){let d=gN(u);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return sAe(n,e,t,u,d,h,o)}}return oAe(n,e,t,a,l.type,r,o)}function sAe(n,e,t,i,r,o,a){let l=i.parent,u={from:r.from,to:r.to},h=0,d=l==null?void 0:l.cursor();if(d&&(t<0?d.childBefore(i.from):d.childAfter(i.to)))do if(t<0?d.to<=i.from:d.from>=i.to){if(h==0&&o.indexOf(d.type.name)>-1&&d.from<d.to){let p=gN(d);return{start:u,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(mN(d.type,t,a))h++;else if(mN(d.type,-t,a)){if(h==0){let p=gN(d);return{start:u,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}h--}}while(t<0?d.prevSibling():d.nextSibling());return{start:u,matched:!1}}function oAe(n,e,t,i,r,o,a){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=a.indexOf(l);if(u<0||u%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},d=n.doc.iterRange(e,t>0?n.doc.length:0),p=0;for(let m=0;!d.next().done&&m<=o;){let g=d.value;t<0&&(m+=g.length);let v=e+m*t;for(let y=t>0?0:g.length-1,S=t>0?g.length:-1;y!=S;y+=t){let T=a.indexOf(g[y]);if(!(T<0||i.resolveInner(v+y,1).type!=r))if(T%2==0==t>0)p++;else{if(p==1)return{start:h,end:{from:v+y,to:v+y+1},matched:T>>1==u>>1};p--}}t>0&&(m+=g.length)}return d.done?{start:h,matched:!1}:null}const aAe=Object.create(null),l6=[fa.none],c6=[],lAe=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])lAe[n]=cAe(aAe,e);function UP(n,e){c6.indexOf(n)>-1||(c6.push(n),console.warn(e))}function cAe(n,e){let t=null;for(let o of e.split(".")){let a=n[o]||$e[o];a?typeof a=="function"?t?t=a(t):UP(o,`Modifier ${o} used at start of tag`):t?UP(o,`Tag ${o} used as modifier`):t=a:UP(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),r=fa.define({id:l6.length,name:i,props:[xF({[i]:t})]});return l6.push(r),r.id}class fte{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Ur(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(mte(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function u6(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function uAe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=u6(e)+u6(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function HF(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:uAe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}function pte(n,e){return t=>{for(let i=Ur(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class h6{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Cf(n){return n.selection.main.head}function mte(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const gte=Du.define();function hAe(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(r=>{if(r==n.selection.main)return{changes:{from:t,to:i,insert:e},range:st.cursor(t+e.length)};let o=i-t;return!r.empty||o&&n.sliceDoc(r.from-o,r.from)!=n.sliceDoc(t,i)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:e},range:st.cursor(r.from-o+e.length)}})),{userEvent:"input.complete"})}function _te(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(Object.assign(Object.assign({},hAe(n.state,t,i.from,i.to)),{annotations:gte.of(e.completion)})):t(n,e.completion,i.from,i.to)}const d6=new WeakMap;function dAe(n){if(!Array.isArray(n))return n;let e=d6.get(n);return e||d6.set(n,e=HF(n)),e}class fAe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Gs(e,t),r=Tl(i);this.chars.push(i);let o=e.slice(t,t+r),a=o.toUpperCase();this.folded.push(Gs(a==o?o.toLowerCase():a,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:a}=this;if(t.length==1){let w=Gs(e,0),E=Tl(w),$=E==e.length?0:-100;if(w!=t[0])if(w==i[0])$+=-200;else return null;return[$,0,E]}let l=e.indexOf(this.pattern);if(l==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let u=t.length,h=0;if(l<0){for(let w=0,E=Math.min(e.length,200);w<E&&h<u;){let $=Gs(e,w);($==t[h]||$==i[h])&&(r[h++]=w),w+=Tl($)}if(h<u)return null}let d=0,p=0,m=!1,g=0,v=-1,y=-1,S=/[a-z]/.test(e),T=!0;for(let w=0,E=Math.min(e.length,200),$=0;w<E&&p<u;){let A=Gs(e,w);l<0&&(d<u&&A==t[d]&&(o[d++]=w),g<u&&(A==t[g]||A==i[g]?(g==0&&(v=w),y=w+1,g++):g=0));let I,D=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(I=AF(A))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!w||D==1&&S||$==0&&D!=0)&&(t[p]==A||i[p]==A&&(m=!0)?a[p++]=w:a.length&&(T=!1)),$=D,w+=Tl(A)}return p==u&&a[0]==0&&T?this.result(-100+(m?-200:0),a,e):g==u&&v==0?[-200-e.length+(y==e.length?0:-100),0,y]:l>-1?[-700-e.length,l,l+this.pattern.length]:g==u?[-200+-700-e.length,v,y]:p==u?this.result(-100+(m?-200:0)+-700+(T?0:-1100),a,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[e-i.length],o=1;for(let a of t){let l=a+(this.astral?Tl(Gs(i,a)):1);o>1&&r[o-1]==a?r[o-1]=l:(r[o++]=a,r[o++]=l)}return r}}const Ml=Wt.define({combine(n){return Lu(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>f6(e(i),t(i)),optionClass:(e,t)=>i=>f6(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function f6(n,e){return n?e?n+" "+e:n:e}function pAe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=t,l=0;for(let u=1;u<r.length;){let h=r[u++],d=r[u++];h>l&&o.appendChild(document.createTextNode(a.slice(l,h)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(a.slice(h,d))),p.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function p6(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class mAe{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,a=e.state.facet(Ml);this.optionContent=pAe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=p6(r.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<r.length){_te(e,r[+h[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,i,r;let o=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),o!=a&&(this.updateSel(),((t=o.open)===null||t===void 0?void 0:t.disabled)!=((i=a.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=o.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=p6(t.options.length,t.selected,this.view.state.facet(Ml).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Wa(this.view.state,a,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&_Ae(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let v=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:v.innerWidth,bottom:v.innerHeight}}if(r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10)return null;let a=this.view.textDirection==rr.RTL,l=a,u=!1,h,d="",p="",m=t.left-o.left,g=o.right-t.right;if(l&&m<Math.min(i.width,g)?l=!1:!l&&g<Math.min(i.width,m)&&(l=!0),i.width<=(l?m:g))d=Math.max(o.top,Math.min(r.top,o.bottom-i.height))-t.top+"px",h=Math.min(400,l?m:g)+"px";else{u=!0,h=Math.min(400,(a?t.right:o.right-t.left)-30)+"px";let v=o.bottom-t.bottom;v>=i.height||v>t.top?d=r.bottom-t.top+"px":p=t.bottom-r.top+"px"}return{top:d,bottom:p,maxWidth:h,class:u?a?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o];const u=r.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let d of this.optionContent){let p=d(a,this.view.state,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function gAe(n){return e=>new mAe(e,n)}function _Ae(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function m6(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function OAe(n,e){let t=[],i=0;for(let l of n)if(l.hasResult())if(l.result.filter===!1){let u=l.result.getMatch;for(let h of l.result.options){let d=[1e9-i++];if(u)for(let p of u(h))d.push(p);t.push(new h6(h,l,d))}}else{let u=new fAe(e.sliceDoc(l.from,l.to)),h;for(let d of l.result.options)(h=u.match(d.label))&&(d.boost!=null&&(h[0]+=d.boost),t.push(new h6(d,l,h)))}let r=[],o=null,a=e.facet(Ml).compareCompletions;for(let l of t.sort((u,h)=>h.match[0]-u.match[0]||a(u.completion,h.completion)))!o||o.label!=l.completion.label||o.detail!=l.completion.detail||o.type!=null&&l.completion.type!=null&&o.type!=l.completion.type||o.apply!=l.completion.apply?r.push(l):m6(l.completion)>m6(o)&&(r[r.length-1]=l),o=l.completion;return r}class R0{constructor(e,t,i,r,o,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new R0(this.options,g6(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o){let a=OAe(e,t);if(!a.length)return r&&e.some(u=>u.state==1)?new R0(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=t.facet(Ml).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let u=r.options[r.selected].completion;for(let h=0;h<a.length;h++)if(a[h].completion==u){l=h;break}}return new R0(a,g6(i,l),{pos:e.reduce((u,h)=>h.hasResult()?Math.min(u,h.from):u,1e8),create:gAe(yl),above:o.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new R0(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class LC{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new LC(bAe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ml),o=(i.override||t.languageDataAt("autocomplete",Cf(t)).map(dAe)).map(l=>(this.active.find(h=>h.source==l)||new ia(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((l,u)=>l==this.active[u])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!vAe(o,this.active)?a=R0.build(o,t,this.id,a,i):a&&a.disabled&&!o.some(l=>l.state==1)&&(a=null),!a&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new ia(l.source,0):l));for(let l of e.effects)l.is(vte)&&(a=a&&a.setSelected(l.value,this.id));return o==this.active&&a==this.open?this:new LC(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:yAe}}function vAe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const yAe={"aria-autocomplete":"list"};function g6(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const bAe=[];function _N(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class ia{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=_N(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new ia(r.source,0));for(let o of e.effects)if(o.is(XF))r=new ia(r.source,1,o.value?Cf(e.state):-1);else if(o.is(NC))r=new ia(r.source,0);else if(o.is(Ote))for(let a of o.value)a.source==r.source&&(r=a);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new ia(this.source,1)}handleChange(e){return e.changes.touchesRange(Cf(e.startState))?new ia(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ia(this.source,this.state,e.mapPos(this.explicitPos))}}class Zb extends ia{constructor(e,t,i,r,o){super(e,2,t),this.result=i,this.from=r,this.to=o}hasResult(){return!0}handleUserEvent(e,t,i){var r;let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Cf(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>a||t=="delete"&&Cf(e.startState)==this.from)return new ia(this.source,t=="input"&&i.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return SAe(this.result.validFor,e.state,o,a)?new Zb(this.source,u,this.result,o,a):this.result.update&&(h=this.result.update(this.result,o,a,new fte(e.state,l,u>=0)))?new Zb(this.source,u,h,h.from,(r=h.to)!==null&&r!==void 0?r:Cf(e.state)):new ia(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ia(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Zb(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function SAe(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):mte(n,!0).test(r)}const XF=gn.define(),NC=gn.define(),Ote=gn.define({map(n,e){return n.map(t=>t.map(e))}}),vte=gn.define(),yl=bs.define({create(){return LC.start()},update(n,e){return n.update(e)},provide:n=>[FF.from(n,e=>e.tooltip),Lt.contentAttributes.from(n,e=>e.attrs)]});function bx(n,e="option"){return t=>{let i=t.state.field(yl,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ml).interactionDelay)return!1;let r=1,o;e=="page"&&(o=uCe(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),t.dispatch({effects:vte.of(l)}),!0}}const TAe=n=>{let e=n.state.field(yl,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(Ml).interactionDelay?!1:(e.open.disabled||_te(n,e.open.options[e.open.selected]),!0)},wAe=n=>n.state.field(yl,!1)?(n.dispatch({effects:XF.of(!0)}),!0):!1,EAe=n=>{let e=n.state.field(yl,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:NC.of(null)}),!0)};class xAe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const _6=50,$Ae=50,CAe=1e3,AAe=Er.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(yl).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(yl);if(!n.selectionSet&&!n.docChanged&&n.startState.field(yl)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!_N(i));for(let i=0;i<this.running.length;i++){let r=this.running[i];if(t||r.updates.length+n.transactions.length>$Ae&&Date.now()-r.time>CAe){for(let o of r.context.abortListeners)try{o()}catch(a){Wa(this.view.state,a)}r.context.abortListeners=null,this.running.splice(i--,1)}else r.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(r=>r.active.source==i.source))?setTimeout(()=>this.startUpdate(),_6):-1,this.composing!=0)for(let i of n.transactions)_N(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(yl);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Cf(e),i=new fte(e,t,n.explicitPos==t),r=new xAe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:NC.of(null)}),Wa(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),_6))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ml);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let a=new Zb(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:Cf(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)a=a.update(l,t);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(yl).active.find(a=>a.source==r.active.source);if(o&&o.state==1)if(r.done==null){let a=new ia(r.active.source,0);for(let l of r.updates)a=a.update(l,t);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:Ote.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(yl,!1);n&&n.tooltip&&this.view.state.facet(Ml).closeOnBlur&&this.view.dispatch({effects:NC.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:XF.of(!1)}),20),this.composing=0}}}),yte=Lt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class kAe{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class jF{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,Qs.TrackDel),i=e.mapPos(this.to,1,Qs.TrackDel);return t==null||i==null?null:new jF(this.field,t,i)}}class YF{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],o=e.doc.lineAt(t),a=/^\s*/.exec(o.text)[0];for(let u of this.lines){if(i.length){let h=a,d=/^\t*/.exec(u)[0].length;for(let p=0;p<d;p++)h+=e.facet(t1);r.push(t+h.length-d),u=h+u.slice(d)}i.push(u),t+=u.length+1}let l=this.fieldPositions.map(u=>new jF(u.field,r[u.line]+u.from,r[u.line]+u.to));return{text:i,ranges:l}}static parse(e){let t=[],i=[],r=[],o;for(let a of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(a);){let l=o[1]?+o[1]:null,u=o[2]||o[3]||"",h=-1;for(let d=0;d<t.length;d++)(l!=null?t[d].seq==l:u&&t[d].name==u)&&(h=d);if(h<0){let d=0;for(;d<t.length&&(l==null||t[d].seq!=null&&t[d].seq<l);)d++;t.splice(d,0,{seq:l,name:u}),h=d;for(let p of r)p.field>=h&&p.field++}r.push(new kAe(h,i.length,o.index,o.index+u.length)),a=a.slice(0,o.index)+u+a.slice(o.index+o[0].length)}for(let l;l=/\\([{}])/.exec(a);){a=a.slice(0,l.index)+l[1]+a.slice(l.index+l[0].length);for(let u of r)u.line==i.length&&u.from>l.index&&(u.from--,u.to--)}i.push(a)}return new YF(i,r)}}let IAe=Xt.widget({widget:new class extends Nu{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),RAe=Xt.mark({class:"cm-snippetField"});class WO{constructor(e,t){this.ranges=e,this.active=t,this.deco=Xt.set(e.map(i=>(i.from==i.to?IAe:RAe).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new WO(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const r1=gn.define({map(n,e){return n&&n.map(e)}}),MAe=gn.define(),aT=bs.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(r1))return t.value;if(t.is(MAe)&&n)return new WO(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Lt.decorations.from(n,e=>e?e.deco:Xt.none)});function ZF(n,e){return st.create(n.filter(t=>t.field==e).map(t=>st.range(t.from,t.to)))}function PAe(n){let e=YF.parse(n);return(t,i,r,o)=>{let{text:a,ranges:l}=e.instantiate(t.state,r),u={changes:{from:r,to:o,insert:qn.of(a)},scrollIntoView:!0,annotations:gte.of(i)};if(l.length&&(u.selection=ZF(l,0)),l.length>1){let h=new WO(l,0),d=u.effects=[r1.of(h)];t.state.field(aT,!1)===void 0&&d.push(gn.appendConfig.of([aT,FAe,UAe,yte]))}t.dispatch(t.state.update(u))}}function bte(n){return({state:e,dispatch:t})=>{let i=e.field(aT,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,o=n>0&&!i.ranges.some(a=>a.field==r+n);return t(e.update({selection:ZF(i.ranges,r),effects:r1.of(o?null:new WO(i.ranges,r))})),!0}}const DAe=({state:n,dispatch:e})=>n.field(aT,!1)?(e(n.update({effects:r1.of(null)})),!0):!1,LAe=bte(1),NAe=bte(-1),BAe=[{key:"Tab",run:LAe,shift:NAe},{key:"Escape",run:DAe}],O6=Wt.define({combine(n){return n.length?n[0]:BAe}}),FAe=Sg.highest(KT.compute([O6],n=>n.facet(O6)));function Mr(n,e){return Object.assign(Object.assign({},e),{apply:PAe(n)})}const UAe=Lt.domEventHandlers({mousedown(n,e){let t=e.state.field(aT,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(o=>o.from<=i&&o.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:ZF(t.ranges,r.field),effects:r1.of(t.ranges.some(o=>o.field>r.field)?new WO(t.ranges,r.field):null)}),!0)}}),lT={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},km=gn.define({map(n,e){let t=e.mapPos(n,-1,Qs.TrackAfter);return t??void 0}}),qF=gn.define({map(n,e){return e.mapPos(n)}}),JF=new class extends cg{};JF.startSide=1;JF.endSide=-1;const Ste=bs.define({create(){return ri.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=ri.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(km)?n=n.update({add:[JF.range(t.value,t.value+1)]}):t.is(qF)&&(n=n.update({filter:i=>i!=t.value}));return n}});function GAe(){return[zAe,Ste]}const GP="()[]{}<>";function Tte(n){for(let e=0;e<GP.length;e+=2)if(GP.charCodeAt(e)==n)return GP.charAt(e+1);return AF(n<128?n:n+1)}function wte(n,e){return n.languageDataAt("closeBrackets",e)[0]||lT}const WAe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),zAe=Lt.inputHandler.of((n,e,t,i)=>{if((WAe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Tl(Gs(i,0))==1||e!=r.from||t!=r.to)return!1;let o=HAe(n.state,i);return o?(n.dispatch(o),!0):!1}),QAe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=wte(n,n.selection.main.head).brackets||lT.brackets,r=null,o=n.changeByRange(a=>{if(a.empty){let l=XAe(n.doc,a.head);for(let u of i)if(u==l&&fk(n.doc,a.head)==Tte(Gs(u,0)))return{changes:{from:a.head-u.length,to:a.head+u.length},range:st.cursor(a.head-u.length)}}return{range:r=a}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},VAe=[{key:"Backspace",run:QAe}];function HAe(n,e){let t=wte(n,n.selection.main.head),i=t.brackets||lT.brackets;for(let r of i){let o=Tte(Gs(r,0));if(e==r)return o==r?ZAe(n,r,i.indexOf(r+r+r)>-1,t):jAe(n,r,o,t.before||lT.before);if(e==o&&Ete(n,n.selection.main.from))return YAe(n,r,o)}return null}function Ete(n,e){let t=!1;return n.field(Ste).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function fk(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Tl(Gs(t,0)))}function XAe(n,e){let t=n.sliceString(e-2,e);return Tl(Gs(t,0))==t.length?t:t.slice(1)}function jAe(n,e,t,i){let r=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:km.of(a.to+e.length),range:st.range(a.anchor+e.length,a.head+e.length)};let l=fk(n.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:km.of(a.head+e.length),range:st.cursor(a.head+e.length)}:{range:r=a}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function YAe(n,e,t){let i=null,r=n.selection.ranges.map(o=>o.empty&&fk(n.doc,o.head)==t?st.cursor(o.head+t.length):i=o);return i?null:n.update({selection:st.create(r,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:o})=>qF.of(o))})}function ZAe(n,e,t,i){let r=i.stringPrefixes||lT.stringPrefixes,o=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:km.of(l.to+e.length),range:st.range(l.anchor+e.length,l.head+e.length)};let u=l.head,h=fk(n.doc,u),d;if(h==e){if(v6(n,u))return{changes:{insert:e+e,from:u},effects:km.of(u+e.length),range:st.cursor(u+e.length)};if(Ete(n,u)){let p=t&&n.sliceDoc(u,u+e.length*3)==e+e+e;return{range:st.cursor(u+e.length*(p?3:1)),effects:qF.of(u)}}}else{if(t&&n.sliceDoc(u-2*e.length,u)==e+e&&(d=y6(n,u-2*e.length,r))>-1&&v6(n,d))return{changes:{insert:e+e+e+e,from:u},effects:km.of(u+e.length),range:st.cursor(u+e.length)};if(n.charCategorizer(u)(h)!=Ui.Word&&y6(n,u,r)>-1&&!qAe(n,u,e,r))return{changes:{insert:e+e,from:u},effects:km.of(u+e.length),range:st.cursor(u+e.length)}}return{range:o=l}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function v6(n,e){let t=Ur(n).resolveInner(e+1);return t.parent&&t.from==e}function qAe(n,e,t,i){let r=Ur(n).resolveInner(e,-1),o=i.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),u=l.indexOf(t);if(!u||u>-1&&i.indexOf(l.slice(0,u))>-1){let d=r.firstChild;for(;d&&d.from==r.from&&d.to-d.from>t.length+u;){if(n.sliceDoc(d.to-t.length,d.to)==t)return!1;d=d.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function y6(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Ui.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=Ui.Word)return o}return-1}function JAe(n={}){return[yl,Ml.of(n),AAe,KAe,yte]}const xte=[{key:"Ctrl-Space",run:wAe},{key:"Escape",run:EAe},{key:"ArrowDown",run:bx(!0)},{key:"ArrowUp",run:bx(!1)},{key:"PageDown",run:bx(!0,"page")},{key:"PageUp",run:bx(!1,"page")},{key:"Enter",run:TAe}],KAe=Sg.highest(KT.computeN([Ml],n=>n.facet(Ml).defaultKeymap?[xte]:[])),b6=new OK,$te=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Sx(n){return(e,t,i)=>{if(i)return!1;let r=e.node.getChild("VariableName");return r&&t(r,n),!0}}const eke={FunctionDefinition:Sx("function"),ClassDefinition:Sx("class"),ForStatement(n,e,t){if(t){for(let i=n.node.firstChild;i;i=i.nextSibling)if(i.name=="VariableName")e(i,"variable");else if(i.name=="in")break}},ImportStatement(n,e){var t,i;let{node:r}=n,o=((t=r.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let a=r.getChild("import");a;a=a.nextSibling)a.name=="VariableName"&&((i=a.nextSibling)===null||i===void 0?void 0:i.name)!="as"&&e(a,o?"variable":"namespace")},AssignStatement(n,e){for(let t=n.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(n,e){for(let t=null,i=n.node.firstChild;i;i=i.nextSibling)i.name=="VariableName"&&(!t||!/\*|AssignOp/.test(t.name))&&e(i,"variable"),t=i},CapturePattern:Sx("variable"),AsPattern:Sx("variable"),__proto__:null};function Cte(n,e){let t=b6.get(e);if(t)return t;let i=[],r=!0;function o(a,l){let u=n.sliceString(a.from,a.to);i.push({label:u,type:l})}return e.cursor(Yr.IncludeAnonymous).iterate(a=>{if(a.name){let l=eke[a.name];if(l&&l(a,o,r)||!r&&$te.has(a.name))return!1;r=!1}else if(a.to-a.from>8192){for(let l of Cte(n,a.node))i.push(l);return!1}}),b6.set(e,i),i}const S6=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,Ate=["String","FormatString","Comment","PropertyName"];function tke(n){let e=Ur(n.state).resolveInner(n.pos,-1);if(Ate.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&S6.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let r=e;r;r=r.parent)$te.has(r.name)&&(i=i.concat(Cte(n.state.doc,r)));return{options:i,from:t?e.from:n.pos,validFor:S6}}const nke=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(n=>({label:n,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(n=>({label:n,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(n=>({label:n,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(n=>({label:n,type:"function"}))),ike=[Mr("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Mr("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Mr("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Mr("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Mr(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Mr("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Mr("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Mr("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Mr("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],rke=pte(Ate,HF(nke.concat(ike)));function T6(n,e){let t=n.lineIndent(e.from),i=n.lineAt(n.pos,-1),r=i.from+i.text.length;return!/\S/.test(i.text)&&n.node.to<r+100&&!/\S/.test(n.state.sliceDoc(r,n.node.to))&&n.lineIndent(n.pos,-1)<=t||/^\s*(else:|elif |except |finally:)/.test(n.textAfter)&&n.lineIndent(n.pos,-1)>t?null:t+n.unit}const WP=sT.define({name:"python",parser:NEe.configure({props:[zF.add({Body:n=>{var e;return(e=T6(n,n.node))!==null&&e!==void 0?e:n.continue()},IfStatement:n=>/^\s*(else:|elif )/.test(n.textAfter)?n.baseIndent:n.continue(),TryStatement:n=>/^\s*(except |finally:|else:)/.test(n.textAfter)?n.baseIndent:n.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":p$({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":p$({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":p$({closing:"]"}),"String FormatString":()=>null,Script:n=>{if(n.pos+/\s*/.exec(n.textAfter)[0].length>=n.node.to){let e=null;for(let t=n.node,i=t.to;t=t.lastChild,!(!t||t.to!=i);)t.type.name=="Body"&&(e=t);if(e){let t=T6(n,e);if(t!=null)return t}}return n.continue()}}),VF.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":tte,Body:(n,e)=>({from:n.from+1,to:n.to-(n.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function ske(){return new Jee(WP,[WP.data.of({autocomplete:tke}),WP.data.of({autocomplete:rke})])}function oke(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const ake=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.head),i=eU(n.state,t.from);return i.line?lke(n):i.block?uke(n):!1};function KF(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const lke=KF(fke,0),cke=KF(kte,0),uke=KF((n,e)=>kte(n,e,dke(e)),0);function eU(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const ab=50;function hke(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-ab,i),a=n.sliceDoc(r,r+ab),l=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(a)[0].length,h=o.length-l;if(o.slice(h-e.length,h)==e&&a.slice(u,u+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+u,margin:u&&1}};let d,p;r-i<=2*ab?d=p=n.sliceDoc(i,r):(d=n.sliceDoc(i,i+ab),p=n.sliceDoc(r-ab,r));let m=/^\s*/.exec(d)[0].length,g=/\s*$/.exec(p)[0].length,v=p.length-g-t.length;return d.slice(m,m+e.length)==e&&p.slice(v,v+t.length)==t?{open:{pos:i+m+e.length,margin:/\s/.test(d.charAt(m+e.length))?1:0},close:{pos:r-g-t.length,margin:/\s/.test(p.charAt(v-1))?1:0}}:null}function dke(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from,to:r.to})}return e}function kte(n,e,t=e.selection.ranges){let i=t.map(o=>eU(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,a)=>hke(e,i[a],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,a)=>r[a]?[]:[{from:o.from,insert:i[a].open+" "},{from:o.to,insert:" "+i[a].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let a=0,l;a<r.length;a++)if(l=r[a]){let u=i[a],{open:h,close:d}=l;o.push({from:h.pos-u.open.length,to:h.pos+h.margin},{from:d.pos-d.margin,to:d.pos+u.close.length})}return{changes:o}}return null}function fke(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:a}of t){let l=i.length,u=1e9;for(let h=o;h<=a;){let d=e.doc.lineAt(h);if(d.from>r&&(o==a||a>d.from)){r=d.from;let p=eU(e,d.from).line;if(!p)continue;let m=/^\s*/.exec(d.text)[0].length,g=m==d.length,v=d.text.slice(m,m+p.length)==p?m:-1;m<d.text.length&&m<u&&(u=m),i.push({line:d,comment:v,token:p,indent:m,empty:g,single:!1})}h=d.to+1}if(u<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=u);i.length==l+1&&(i[l].single=!0)}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:u,indent:h,empty:d,single:p}of i)(p||!d)&&o.push({from:l.from+h,insert:u+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:l,token:u}of i)if(l>=0){let h=a.from+l,d=h+u.length;a.text[d-a.from]==" "&&d++,o.push({from:h,to:d})}return{changes:o}}return null}const ON=Du.define(),pke=Du.define(),mke=Wt.define(),Ite=Wt.define({combine(n){return Lu(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}});function gke(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Rte=bs.define({create(){return bu.empty},update(n,e){let t=e.state.facet(Ite),i=e.annotation(ON);if(i){let u=e.docChanged?st.single(gke(e.changes)):void 0,h=ca.fromTransaction(e,u),d=i.side,p=d==0?n.undone:n.done;return h?p=BC(p,p.length,t.minDepth,h):p=Dte(p,e.startState.selection),new bu(d==0?i.rest:p,d==0?p:i.rest)}let r=e.annotation(pke);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(qr.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=ca.fromTransaction(e),a=e.annotation(qr.time),l=e.annotation(qr.userEvent);return o?n=n.addChanges(o,a,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new bu(n.done.map(ca.fromJSON),n.undone.map(ca.fromJSON))}});function _ke(n={}){return[Rte,Ite.of(n),Lt.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Mte:e.inputType=="historyRedo"?vN:null;return i?(e.preventDefault(),i(t)):!1}})]}function pk(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Rte,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const Mte=pk(0,!1),vN=pk(1,!1),Oke=pk(0,!0),vke=pk(1,!0);class ca{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new ca(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new ca(e.changes&&jr.fromJSON(e.changes),[],e.mapped&&Au.fromJSON(e.mapped),e.startSelection&&st.fromJSON(e.startSelection),e.selectionsAfter.map(st.fromJSON))}static fromTransaction(e,t){let i=$l;for(let r of e.startState.facet(mke)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new ca(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,$l)}static selection(e){return new ca(void 0,$l,void 0,void 0,e)}}function BC(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function yke(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,a,l)=>{for(let u=0;u<t.length;){let h=t[u++],d=t[u++];l>=h&&a<=d&&(i=!0)}}),i}function bke(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Pte(n,e){return n.length?e.length?n.concat(e):n:e}const $l=[],Ske=200;function Dte(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Ske));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),BC(n,n.length-1,1e9,t.setSelAfter(i)))}else return[ca.selection([e])]}function Tke(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function zP(n,e){if(!n.length)return n;let t=n.length,i=$l;for(;t;){let r=wke(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[ca.selection(i)]:$l}function wke(n,e,t){let i=Pte(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):$l,t);if(!n.changes)return ca.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(o):o;return new ca(r,gn.mapEffects(n.effects,e),a,n.startSelection.map(o),i)}const Eke=/^(input\.type|delete)($|\.)/;class bu{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new bu(this.done,this.undone):this}addChanges(e,t,i,r,o){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Eke.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,yke(l.changes,e.changes))||i=="input.type.compose")?a=BC(a,a.length-1,r.minDepth,new ca(e.changes.compose(l.changes),Pte(e.effects,l.effects),l.mapped,l.startSelection,$l)):a=BC(a,a.length,r.minDepth,e),new bu(a,$l,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:$l;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&bke(o[o.length-1],e)?this:new bu(Dte(this.done,e),this.undone,t,i)}addMapping(e){return new bu(zP(this.done,e),zP(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1];if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ON.of({side:e,rest:Tke(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?$l:r.slice(0,r.length-1);return o.mapped&&(a=zP(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ON.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}bu.empty=new bu($l,$l);const xke=[{key:"Mod-z",run:Mte,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:vN,preventDefault:!0},{linux:"Ctrl-Shift-z",run:vN,preventDefault:!0},{key:"Mod-u",run:Oke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:vke,preventDefault:!0}];function zO(n,e){return st.create(n.ranges.map(e),n.mainIndex)}function Bu(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Cc({state:n,dispatch:e},t){let i=zO(n.selection,t);return i.eq(n.selection)?!1:(e(Bu(n,i)),!0)}function mk(n,e){return st.cursor(e?n.to:n.from)}function Lte(n,e){return Cc(n,t=>t.empty?n.moveByChar(t,e):mk(t,e))}function po(n){return n.textDirectionAt(n.state.selection.main.head)==rr.LTR}const Nte=n=>Lte(n,!po(n)),Bte=n=>Lte(n,po(n));function Fte(n,e){return Cc(n,t=>t.empty?n.moveByGroup(t,e):mk(t,e))}const $ke=n=>Fte(n,!po(n)),Cke=n=>Fte(n,po(n));function Ake(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function gk(n,e,t){let i=Ur(n).resolveInner(e.head),r=t?An.closedBy:An.openedBy;for(let u=e.head;;){let h=t?i.childAfter(u):i.childBefore(u);if(!h)break;Ake(n,h,r)?i=h:u=t?h.to:h.from}let o=i.type.prop(r),a,l;return o&&(a=t?yu(n,i.from,1):yu(n,i.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?i.to:i.from,st.cursor(l,t?-1:1)}const kke=n=>Cc(n,e=>gk(n.state,e,!po(n))),Ike=n=>Cc(n,e=>gk(n.state,e,po(n)));function Ute(n,e){return Cc(n,t=>{if(!t.empty)return mk(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Gte=n=>Ute(n,!1),Wte=n=>Ute(n,!0);function zte(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Lt.scrollMargins)){let a=o(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Qte(n,e){let t=zte(n),{state:i}=n,r=zO(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):mk(a,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),u=l.top+t.marginTop,h=l.bottom-t.marginBottom;a&&a.top>u&&a.bottom<h&&(o=Lt.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-u}))}return n.dispatch(Bu(i,r),{effects:o}),!0}const w6=n=>Qte(n,!1),yN=n=>Qte(n,!0);function Zf(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=st.cursor(i.from+o))}return r}const Rke=n=>Cc(n,e=>Zf(n,e,!0)),Mke=n=>Cc(n,e=>Zf(n,e,!1)),Pke=n=>Cc(n,e=>Zf(n,e,!po(n))),Dke=n=>Cc(n,e=>Zf(n,e,po(n))),Lke=n=>Cc(n,e=>st.cursor(n.lineBlockAt(e.head).from,1)),Nke=n=>Cc(n,e=>st.cursor(n.lineBlockAt(e.head).to,-1));function Bke(n,e,t){let i=!1,r=zO(n.selection,o=>{let a=yu(n,o.head,-1)||yu(n,o.head,1)||o.head>0&&yu(n,o.head-1,1)||o.head<n.doc.length&&yu(n,o.head+1,-1);if(!a||!a.end)return o;i=!0;let l=a.start.from==o.head?a.end.to:a.end.from;return t?st.range(o.anchor,l):st.cursor(l)});return i?(e(Bu(n,r)),!0):!1}const Fke=({state:n,dispatch:e})=>Bke(n,e,!1);function Pl(n,e){let t=zO(n.state.selection,i=>{let r=e(i);return st.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Bu(n.state,t)),!0)}function Vte(n,e){return Pl(n,t=>n.moveByChar(t,e))}const Hte=n=>Vte(n,!po(n)),Xte=n=>Vte(n,po(n));function jte(n,e){return Pl(n,t=>n.moveByGroup(t,e))}const Uke=n=>jte(n,!po(n)),Gke=n=>jte(n,po(n)),Wke=n=>Pl(n,e=>gk(n.state,e,!po(n))),zke=n=>Pl(n,e=>gk(n.state,e,po(n)));function Yte(n,e){return Pl(n,t=>n.moveVertically(t,e))}const Zte=n=>Yte(n,!1),qte=n=>Yte(n,!0);function Jte(n,e){return Pl(n,t=>n.moveVertically(t,e,zte(n).height))}const E6=n=>Jte(n,!1),x6=n=>Jte(n,!0),Qke=n=>Pl(n,e=>Zf(n,e,!0)),Vke=n=>Pl(n,e=>Zf(n,e,!1)),Hke=n=>Pl(n,e=>Zf(n,e,!po(n))),Xke=n=>Pl(n,e=>Zf(n,e,po(n))),jke=n=>Pl(n,e=>st.cursor(n.lineBlockAt(e.head).from)),Yke=n=>Pl(n,e=>st.cursor(n.lineBlockAt(e.head).to)),$6=({state:n,dispatch:e})=>(e(Bu(n,{anchor:0})),!0),C6=({state:n,dispatch:e})=>(e(Bu(n,{anchor:n.doc.length})),!0),A6=({state:n,dispatch:e})=>(e(Bu(n,{anchor:n.selection.main.anchor,head:0})),!0),k6=({state:n,dispatch:e})=>(e(Bu(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Zke=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),qke=({state:n,dispatch:e})=>{let t=Ok(n).map(({from:i,to:r})=>st.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:st.create(t),userEvent:"select"})),!0},Jke=({state:n,dispatch:e})=>{let t=zO(n.selection,i=>{var r;let o=Ur(n).resolveInner(i.head,1);for(;!(o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from||!(!((r=o.parent)===null||r===void 0)&&r.parent));)o=o.parent;return st.range(o.to,o.from)});return e(Bu(n,t)),!0},Kke=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=st.create([t.main]):t.main.empty||(i=st.create([st.cursor(t.main.head)])),i?(e(Bu(n,i)),!0):!1};function _k(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:a,to:l}=o;if(a==l){let u=e(a);u<a?(t="delete.backward",u=Tx(n,u,!1)):u>a&&(t="delete.forward",u=Tx(n,u,!0)),a=Math.min(a,u),l=Math.max(l,u)}else a=Tx(n,a,!1),l=Tx(n,l,!0);return a==l?{range:o}:{changes:{from:a,to:l},range:st.cursor(a)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Lt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Tx(n,e,t){if(n instanceof Lt)for(let i of n.state.facet(Lt.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Kte=(n,e)=>_k(n,t=>{let{state:i}=n,r=i.doc.lineAt(t),o,a;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,t-r.from))){if(o[o.length-1]=="	")return t-1;let l=qT(o,i.tabSize),u=l%MC(i)||MC(i);for(let h=0;h<u&&o[o.length-1-h]==" ";h++)t--;a=t}else a=Po(r.text,t-r.from,e,e)+r.from,a==t&&r.number!=(e?i.doc.lines:1)&&(a+=e?1:-1);return a}),bN=n=>Kte(n,!1),ene=n=>Kte(n,!0),tne=(n,e)=>_k(n,t=>{let i=t,{state:r}=n,o=r.doc.lineAt(i),a=r.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==t&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let u=Po(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,u)-o.from,Math.max(i,u)-o.from),d=a(h);if(l!=null&&d!=l)break;(h!=" "||i!=t)&&(l=d),i=u}return i}),nne=n=>tne(n,!1),eIe=n=>tne(n,!0),ine=n=>_k(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),tIe=n=>_k(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),nIe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:qn.of(["",""])},range:st.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},iIe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),a=r==o.from?r-1:Po(o.text,r-o.from,!1)+o.from,l=r==o.to?r+1:Po(o.text,r-o.from,!0)+o.from;return{changes:{from:a,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(a,r))},range:st.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ok(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function rne(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of Ok(n)){if(t?o.to==n.doc.length:o.from==0)continue;let a=n.doc.lineAt(t?o.to+1:o.from-1),l=a.length+1;if(t){i.push({from:o.to,to:a.to},{from:o.from,insert:a.text+n.lineBreak});for(let u of o.ranges)r.push(st.range(Math.min(n.doc.length,u.anchor+l),Math.min(n.doc.length,u.head+l)))}else{i.push({from:a.from,to:o.from},{from:o.to,insert:n.lineBreak+a.text});for(let u of o.ranges)r.push(st.range(u.anchor-l,u.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:st.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const rIe=({state:n,dispatch:e})=>rne(n,e,!1),sIe=({state:n,dispatch:e})=>rne(n,e,!0);function sne(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of Ok(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const oIe=({state:n,dispatch:e})=>sne(n,e,!1),aIe=({state:n,dispatch:e})=>sne(n,e,!0),lIe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Ok(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=zO(e.selection,r=>n.moveVertically(r,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cIe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ur(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(An.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const uIe=one(!1),hIe=one(!0);function one(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:a}=r,l=e.doc.lineAt(o),u=!n&&o==a&&cIe(e,o);n&&(o=a=(a<=l.to?l:e.doc.lineAt(a)).to);let h=new hk(e,{simulateBreak:o,simulateDoubleBreak:!!u}),d=WF(h,o);for(d==null&&(d=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);a<l.to&&/\s/.test(l.text[a-l.from]);)a++;u?{from:o,to:a}=u:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let p=["",oT(e,d)];return u&&p.push(oT(e,h.lineIndent(l.from,-1))),{changes:{from:o,to:a,insert:qn.of(p)},range:st.cursor(o+1+p[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function tU(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let a=i.from;a<=i.to;){let l=n.doc.lineAt(a);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),a=l.to+1}let o=n.changes(r);return{changes:r,range:st.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const dIe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new hk(n,{overrideIndentation:o=>{let a=t[o];return a??-1}}),r=tU(n,(o,a,l)=>{let u=WF(i,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let h=/^\s*/.exec(o.text)[0],d=oT(n,u);(h!=d||l.from<o.from+h.length)&&(t[o.from]=u,a.push({from:o.from,to:o.from+h.length,insert:d}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},ane=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(tU(n,(t,i)=>{i.push({from:t.from,insert:n.facet(t1)})}),{userEvent:"input.indent"})),!0),lne=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(tU(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=qT(r,n.tabSize),a=0,l=oT(n,Math.max(0,o-MC(n)));for(;a<r.length&&a<l.length&&r.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+r.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),fIe=[{key:"Ctrl-b",run:Nte,shift:Hte,preventDefault:!0},{key:"Ctrl-f",run:Bte,shift:Xte},{key:"Ctrl-p",run:Gte,shift:Zte},{key:"Ctrl-n",run:Wte,shift:qte},{key:"Ctrl-a",run:Lke,shift:jke},{key:"Ctrl-e",run:Nke,shift:Yke},{key:"Ctrl-d",run:ene},{key:"Ctrl-h",run:bN},{key:"Ctrl-k",run:ine},{key:"Ctrl-Alt-h",run:nne},{key:"Ctrl-o",run:nIe},{key:"Ctrl-t",run:iIe},{key:"Ctrl-v",run:yN}],pIe=[{key:"ArrowLeft",run:Nte,shift:Hte,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:$ke,shift:Uke,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Pke,shift:Hke,preventDefault:!0},{key:"ArrowRight",run:Bte,shift:Xte,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Cke,shift:Gke,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Dke,shift:Xke,preventDefault:!0},{key:"ArrowUp",run:Gte,shift:Zte,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$6,shift:A6},{mac:"Ctrl-ArrowUp",run:w6,shift:E6},{key:"ArrowDown",run:Wte,shift:qte,preventDefault:!0},{mac:"Cmd-ArrowDown",run:C6,shift:k6},{mac:"Ctrl-ArrowDown",run:yN,shift:x6},{key:"PageUp",run:w6,shift:E6},{key:"PageDown",run:yN,shift:x6},{key:"Home",run:Mke,shift:Vke,preventDefault:!0},{key:"Mod-Home",run:$6,shift:A6},{key:"End",run:Rke,shift:Qke,preventDefault:!0},{key:"Mod-End",run:C6,shift:k6},{key:"Enter",run:uIe},{key:"Mod-a",run:Zke},{key:"Backspace",run:bN,shift:bN},{key:"Delete",run:ene},{key:"Mod-Backspace",mac:"Alt-Backspace",run:nne},{key:"Mod-Delete",mac:"Alt-Delete",run:eIe},{mac:"Mod-Backspace",run:tIe},{mac:"Mod-Delete",run:ine}].concat(fIe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),mIe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:kke,shift:Wke},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ike,shift:zke},{key:"Alt-ArrowUp",run:rIe},{key:"Shift-Alt-ArrowUp",run:oIe},{key:"Alt-ArrowDown",run:sIe},{key:"Shift-Alt-ArrowDown",run:aIe},{key:"Escape",run:Kke},{key:"Mod-Enter",run:hIe},{key:"Alt-l",mac:"Ctrl-l",run:qke},{key:"Mod-i",run:Jke,preventDefault:!0},{key:"Mod-[",run:lne},{key:"Mod-]",run:ane},{key:"Mod-Alt-\\",run:dIe},{key:"Shift-Mod-k",run:lIe},{key:"Shift-Mod-\\",run:Fke},{key:"Mod-/",run:ake},{key:"Alt-A",run:cke}].concat(pIe),gIe={key:"Tab",run:ane,shift:lne};function vi(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)cne(n,arguments[e]);return n}function cne(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)cne(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const I6=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class EO{constructor(e,t,i=0,r=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?l=>o(I6(l)):I6,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Gs(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=AF(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Tl(e);let r=this.normalize(t);for(let o=0,a=i;;o++){let l=r.charCodeAt(o),u=this.match(l,a);if(u)return this.value=u,this;if(o==r.length-1)break;a==i&&o<t.length&&t.charCodeAt(o)==l&&a++}}}match(e,t){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:t+1}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(EO.prototype[Symbol.iterator]=function(){return this});const une={from:-1,to:-1,match:/.*/.exec("")},nU="gm"+(/x/.unicode==null?"":"u");class hne{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=une,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new dne(e,t,i,r,o);this.re=new RegExp(t,nU+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=FC(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=FC(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const QP=new WeakMap;class K0{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=QP.get(e);if(!r||r.from>=i||r.to<=t){let l=new K0(t,e.sliceString(t,i));return QP.set(e,l),l}if(r.from==t&&r.to==i)return r;let{text:o,from:a}=r;return a>t&&(o=e.sliceString(t,a)+o,a=t),r.to<i&&(o+=e.sliceString(r.to,i)),QP.set(e,new K0(a,o)),new K0(t,o.slice(t-a,i-a))}}class dne{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=une,this.matchPos=FC(e,r),this.re=new RegExp(t,nU+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=K0.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=FC(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=K0.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(hne.prototype[Symbol.iterator]=dne.prototype[Symbol.iterator]=function(){return this});function _Ie(n){try{return new RegExp(n,nU),!0}catch{return!1}}function FC(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function SN(n){let e=vi("input",{class:"cm-textfield",name:"line"}),t=vi("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:UC.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},vi("label",n.state.phrase("Go to line"),": ",e)," ",vi("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,u,h,d]=r,p=h?+h.slice(1):0,m=u?+u:a.number;if(u&&d){let v=m/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),m=Math.round(o.doc.lines*v)}else u&&l&&(m=m*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));n.dispatch({effects:UC.of(!1),selection:st.cursor(g.from+Math.max(0,Math.min(p,g.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const UC=gn.define(),R6=bs.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(UC)&&(n=t.value);return n},provide:n=>rT.from(n,e=>e?SN:null)}),OIe=n=>{let e=iT(n,SN);if(!e){let t=[UC.of(!0)];n.state.field(R6,!1)==null&&t.push(gn.appendConfig.of([R6,vIe])),n.dispatch({effects:t}),e=iT(n,SN)}return e&&e.dom.querySelector("input").focus(),!0},vIe=Lt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),yIe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},fne=Wt.define({combine(n){return Lu(n,yIe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function bIe(n){let e=[xIe,EIe];return n&&e.push(fne.of(n)),e}const SIe=Xt.mark({class:"cm-selectionMatch"}),TIe=Xt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function M6(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Ui.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Ui.Word)}function wIe(n,e,t,i){return n(e.sliceDoc(t,t+1))==Ui.Word&&n(e.sliceDoc(i-1,i))==Ui.Word}const EIe=Er.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(fne),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Xt.none;let r=i.main,o,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return Xt.none;let u=t.wordAt(r.head);if(!u)return Xt.none;a=t.charCategorizer(r.head),o=t.sliceDoc(u.from,u.to)}else{let u=r.to-r.from;if(u<e.minSelectionLength||u>200)return Xt.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),a=t.charCategorizer(r.head),!(M6(a,t,r.from,r.to)&&wIe(a,t,r.from,r.to)))return Xt.none}else if(o=t.sliceDoc(r.from,r.to).trim(),!o)return Xt.none}let l=[];for(let u of n.visibleRanges){let h=new EO(t.doc,o,u.from,u.to);for(;!h.next().done;){let{from:d,to:p}=h.value;if((!a||M6(a,t,d,p))&&(r.empty&&d<=r.from&&p>=r.to?l.push(TIe.range(d,p)):(d>=r.to||p<=r.from)&&l.push(SIe.range(d,p)),l.length>e.maxMatches))return Xt.none}}return Xt.set(l)}},{decorations:n=>n.decorations}),xIe=Lt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),$Ie=({state:n,dispatch:e})=>{let{selection:t}=n,i=st.create(t.ranges.map(r=>n.wordAt(r.head)||st.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function CIe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let a=!1,l=new EO(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new EO(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(u=>u.from==l.value.from))continue;if(o){let u=n.wordAt(l.value.from);if(!u||u.from!=l.value.from||u.to!=l.value.to)continue}return l.value}}const AIe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return $Ie({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=CIe(n,i);return r?(e(n.update({selection:n.selection.addRange(st.range(r.from,r.to),!1),effects:Lt.scrollIntoView(r.to)})),!0):!1},iU=Wt.define({combine(n){return Lu(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new GIe(e)})}});class pne{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||_Ie(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new MIe(this):new IIe(this)}getCursor(e,t=0,i){let r=e.doc?e:Bn.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?o0(this,r,t,i):s0(this,r,t,i)}}class mne{constructor(e){this.spec=e}}function s0(n,e,t,i){return new EO(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?kIe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function kIe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(GC(r,t-o))!=Ui.Word||e(WC(r,t-o))!=Ui.Word)&&(e(WC(r,i-o))!=Ui.Word||e(GC(r,i-o))!=Ui.Word))}class IIe extends mne{constructor(e){super(e)}nextMatch(e,t,i){let r=s0(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=s0(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),a=s0(this.spec,e,o,r),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=s0(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=s0(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function o0(n,e,t,i){return new hne(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?RIe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function GC(n,e){return n.slice(Po(n,e,!1),e)}function WC(n,e){return n.slice(e,Po(n,e))}function RIe(n){return(e,t,i)=>!i[0].length||(n(GC(i.input,i.index))!=Ui.Word||n(WC(i.input,i.index))!=Ui.Word)&&(n(WC(i.input,i.index+i[0].length))!=Ui.Word||n(GC(i.input,i.index+i[0].length))!=Ui.Word)}class MIe extends mne{nextMatch(e,t,i){let r=o0(this.spec,e,i,e.doc.length).next();return r.done&&(r=o0(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),a=o0(this.spec,e,o,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=o0(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=o0(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const cT=gn.define(),rU=gn.define(),Af=bs.define({create(n){return new VP(TN(n).create(),null)},update(n,e){for(let t of e.effects)t.is(cT)?n=new VP(t.value.create(),n.panel):t.is(rU)&&(n=new VP(n.query,t.value?sU:null));return n},provide:n=>rT.from(n,e=>e.panel)});class VP{constructor(e,t){this.query=e,this.panel=t}}const PIe=Xt.mark({class:"cm-searchMatch"}),DIe=Xt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),LIe=Er.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Af))}update(n){let e=n.state.field(Af);(e!=n.startState.field(Af)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Xt.none;let{view:t}=this,i=new Uf;for(let r=0,o=t.visibleRanges,a=o.length;r<a;r++){let{from:l,to:u}=o[r];for(;r<a-1&&u>o[r+1].from-2*250;)u=o[++r].to;n.highlight(t.state,l,u,(h,d)=>{let p=t.state.selection.ranges.some(m=>m.from==h&&m.to==d);i.add(h,d,p?DIe:PIe)})}return i.finish()}},{decorations:n=>n.decorations});function s1(n){return e=>{let t=e.state.field(Af,!1);return t&&t.query.spec.valid?n(e,t):gne(e)}}const zC=s1((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:oU(n,i),userEvent:"select.search"}),!0):!1}),QC=s1((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);return r?(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:oU(n,r),userEvent:"select.search"}),!0):!1}),NIe=s1((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:st.create(t.map(i=>st.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),BIe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],a=0;for(let l=new EO(n.doc,n.sliceDoc(i,r));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(a=o.length),o.push(st.range(l.value.from,l.value.to))}return e(n.update({selection:st.create(o,a),userEvent:"select.search.matches"})),!0},P6=s1((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let a=[],l,u,h=[];if(o.from==i&&o.to==r&&(u=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(t,o.from,o.to),h.push(Lt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let d=a.length==0||a[0].from>=o.to?0:o.to-o.from-u.length;l={anchor:o.from-d,head:o.to-d},h.push(oU(n,o))}return n.dispatch({changes:a,selection:l,scrollIntoView:!!l,effects:h,userEvent:"input.replace"}),!0}),FIe=s1((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:a}=r;return{from:o,to:a,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Lt.announce.of(i),userEvent:"input.replace.all"}),!0});function sU(n){return n.state.facet(iU).createPanel(n)}function TN(n,e){var t,i,r,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=n.facet(iU);return new pne({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}const gne=n=>{let e=n.state.field(Af,!1);if(e&&e.panel){let t=iT(n,sU);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let r=TN(n.state,e.query.spec);r.valid&&n.dispatch({effects:cT.of(r)}),i.focus(),i.select()}}else n.dispatch({effects:[rU.of(!0),e?cT.of(TN(n.state,e.query.spec)):gn.appendConfig.of(zIe)]});return!0},_ne=n=>{let e=n.state.field(Af,!1);if(!e||!e.panel)return!1;let t=iT(n,sU);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:rU.of(!1)}),!0},UIe=[{key:"Mod-f",run:gne,scope:"editor search-panel"},{key:"F3",run:zC,shift:QC,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:zC,shift:QC,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:_ne,scope:"editor search-panel"},{key:"Mod-Shift-l",run:BIe},{key:"Alt-g",run:OIe},{key:"Mod-d",run:AIe,preventDefault:!0}];class GIe{constructor(e){this.view=e;let t=this.query=e.state.field(Af).query.spec;this.commit=this.commit.bind(this),this.searchField=vi("input",{value:t.search,placeholder:Ma(e,"Find"),"aria-label":Ma(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=vi("input",{value:t.replace,placeholder:Ma(e,"Replace"),"aria-label":Ma(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=vi("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=vi("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=vi("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,a){return vi("button",{class:"cm-button",name:r,onclick:o,type:"button"},a)}this.dom=vi("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>zC(e),[Ma(e,"next")]),i("prev",()=>QC(e),[Ma(e,"previous")]),i("select",()=>NIe(e),[Ma(e,"all")]),vi("label",null,[this.caseField,Ma(e,"match case")]),vi("label",null,[this.reField,Ma(e,"regexp")]),vi("label",null,[this.wordField,Ma(e,"by word")]),...e.state.readOnly?[]:[vi("br"),this.replaceField,i("replace",()=>P6(e),[Ma(e,"replace")]),i("replaceAll",()=>FIe(e),[Ma(e,"replace all")])],vi("button",{name:"close",onclick:()=>_ne(e),"aria-label":Ma(e,"close"),type:"button"},[""])])}commit(){let e=new pne({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:cT.of(e)}))}keydown(e){S$e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?QC:zC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),P6(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(cT)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(iU).top}}function Ma(n,e){return n.state.phrase(e)}const wx=30,Ex=/[\s\.,:;?!]/;function oU(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-wx),a=Math.min(r,t+wx),l=n.state.sliceDoc(o,a);if(o!=i.from){for(let u=0;u<wx;u++)if(!Ex.test(l[u+1])&&Ex.test(l[u])){l=l.slice(u);break}}if(a!=r){for(let u=l.length-1;u>l.length-wx;u--)if(!Ex.test(l[u-1])&&Ex.test(l[u])){l=l.slice(0,u);break}}return Lt.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const WIe=Lt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),zIe=[Af,Sg.lowest(LIe),WIe];class QIe{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class fm{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,o=i.facet(M0).markerFilter;o&&(r=o(r));let a=Xt.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Xt.widget({widget:new eRe(l),diagnostic:l}).range(l.from):Xt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new fm(a,t,xO(a))}}function xO(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return i=new QIe(r,o,a.diagnostic),!1}),i}function VIe(n,e){return!!(n.effects.some(t=>t.is(aU))||n.changes.touchesRange(e.pos))}function One(n,e){return n.field(Fa,!1)?e:e.concat(gn.appendConfig.of([Fa,Lt.decorations.compute([Fa],t=>{let{selected:i,panel:r}=t.field(Fa);return!i||!r||i.from==i.to?Xt.none:Xt.set([XIe.range(i.from,i.to)])}),cCe(jIe,{hideOn:VIe}),nRe]))}function HIe(n,e){return{effects:One(n,[aU.of(e)])}}const aU=gn.define(),lU=gn.define(),vne=gn.define(),Fa=bs.define({create(){return new fm(Xt.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=xO(t,n.selected.diagnostic,r)||xO(t,null,r)}n=new fm(t,n.panel,i)}for(let t of e.effects)t.is(aU)?n=fm.init(t.value,n.panel,e.state):t.is(lU)?n=new fm(n.diagnostics,t.value?vk.open:null,n.selected):t.is(vne)&&(n=new fm(n.diagnostics,n.panel,t.value));return n},provide:n=>[rT.from(n,e=>e.panel),Lt.decorations.from(n,e=>e.diagnostics)]}),XIe=Xt.mark({class:"cm-lintRange cm-lintRange-active"});function jIe(n,e,t){let{diagnostics:i}=n.state.field(Fa),r=[],o=2e8,a=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(u,h,{spec:d})=>{e>=u&&e<=h&&(u==h||(e>u||t>0)&&(e<h||t<0))&&(r.push(d.diagnostic),o=Math.min(u,o),a=Math.max(h,a))});let l=n.state.facet(M0).tooltipFilter;return l&&(r=l(r)),r.length?{pos:o,end:a,above:n.state.doc.lineAt(o).to<a,create(){return{dom:YIe(n,r)}}}:null}function YIe(n,e){return vi("ul",{class:"cm-tooltip-lint"},e.map(t=>bne(n,t,!1)))}const ZIe=n=>{let e=n.state.field(Fa,!1);(!e||!e.panel)&&n.dispatch({effects:One(n.state,[lU.of(!0)])});let t=iT(n,vk.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},D6=n=>{let e=n.state.field(Fa,!1);return!e||!e.panel?!1:(n.dispatch({effects:lU.of(!1)}),!0)},qIe=n=>{let e=n.state.field(Fa,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},JIe=[{key:"Mod-Shift-m",run:ZIe,preventDefault:!0},{key:"F8",run:qIe}],KIe=Er.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(M0);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(M0);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((o,a)=>o.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(HIe(this.view.state,r))},i=>{Wa(this.view.state,i)})}}update(n){let e=n.state.facet(M0);(n.docChanged||e!=n.startState.facet(M0)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),M0=Wt.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Lu(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))},enables:KIe});function yne(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function bne(n,e,t){var i;let r=t?yne(e.actions):[];return vi("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},vi("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,a)=>{let l=!1,u=m=>{if(m.preventDefault(),l)return;l=!0;let g=xO(n.state.field(Fa).diagnostics,e);g&&o.apply(n,g.from,g.to)},{name:h}=o,d=r[a]?h.indexOf(r[a]):-1,p=d<0?h:[h.slice(0,d),vi("u",h.slice(d,d+1)),h.slice(d+1)];return vi("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${h}${d<0?"":` (access key "${r[a]})"`}.`},p)}),e.source&&vi("div",{class:"cm-diagnosticSource"},e.source))}class eRe extends Nu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return vi("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class L6{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bne(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class vk{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)D6(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=yne(o.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==r.keyCode){let u=xO(this.view.state.field(Fa).diagnostics,o);u&&o.actions[l].apply(e,u.from,u.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=vi("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=vi("div",{class:"cm-panel-lint"},this.list,vi("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>D6(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Fa).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Fa),i=0,r=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{let h=-1,d;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u.diagnostic){h=p;break}h<0?(d=new L6(this.view,u.diagnostic),this.items.splice(i,0,d),r=!0):(d=this.items[h],h>i&&(this.items.splice(i,h-i),r=!0)),t&&d.diagnostic==t.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new L6(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{a.top<l.top?this.list.scrollTop-=l.top-a.top:a.bottom>l.bottom&&(this.list.scrollTop+=a.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Fa),i=xO(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:vne.of(i)})}static open(e){return new vk(e)}}function tRe(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function HP(n){return tRe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const nRe=Lt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:HP("#d11")},".cm-lintRange-warning":{backgroundImage:HP("orange")},".cm-lintRange-info":{backgroundImage:HP("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var N6=function(e){e===void 0&&(e={});var t=[];e.closeBracketsKeymap!==!1&&(t=t.concat(VAe)),e.defaultKeymap!==!1&&(t=t.concat(mIe)),e.searchKeymap!==!1&&(t=t.concat(UIe)),e.historyKeymap!==!1&&(t=t.concat(xke)),e.foldKeymap!==!1&&(t=t.concat(zCe)),e.completionKeymap!==!1&&(t=t.concat(xte)),e.lintKeymap!==!1&&(t=t.concat(JIe));var i=[];return e.lineNumbers!==!1&&i.push(vCe()),e.highlightActiveLineGutter!==!1&&i.push(SCe()),e.highlightSpecialChars!==!1&&i.push(F$e()),e.history!==!1&&i.push(_ke()),e.foldGutter!==!1&&i.push(HCe()),e.drawSelection!==!1&&i.push(C$e()),e.dropCursor!==!1&&i.push(M$e()),e.allowMultipleSelections!==!1&&i.push(Bn.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(PCe()),e.syntaxHighlighting!==!1&&i.push(cte(ZCe,{fallback:!0})),e.bracketMatching!==!1&&i.push(iAe()),e.closeBrackets!==!1&&i.push(GAe()),e.autocompletion!==!1&&i.push(JAe()),e.rectangularSelection!==!1&&i.push(K$e()),e.crosshairCursor!==!1&&i.push(nCe()),e.highlightActiveLine!==!1&&i.push(V$e()),e.highlightSelectionMatches!==!1&&i.push(bIe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(t1.of(" ".repeat(e.tabSize))),i.concat([KT.of(t.flat())]).filter(Boolean)};const iRe="#e5c07b",B6="#e06c75",rRe="#56b6c2",sRe="#ffffff",m$="#abb2bf",wN="#7d8799",oRe="#61afef",aRe="#98c379",F6="#d19a66",lRe="#c678dd",cRe="#21252b",U6="#2c313a",G6="#282c34",XP="#353a42",uRe="#3E4451",W6="#528bff",hRe=Lt.theme({"&":{color:m$,backgroundColor:G6},".cm-content":{caretColor:W6},".cm-cursor, .cm-dropCursor":{borderLeftColor:W6},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:uRe},".cm-panels":{backgroundColor:cRe,color:m$},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:G6,color:wN,border:"none"},".cm-activeLineGutter":{backgroundColor:U6},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:XP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:XP,borderBottomColor:XP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:U6,color:m$}}},{dark:!0}),dRe=i1.define([{tag:$e.keyword,color:lRe},{tag:[$e.name,$e.deleted,$e.character,$e.propertyName,$e.macroName],color:B6},{tag:[$e.function($e.variableName),$e.labelName],color:oRe},{tag:[$e.color,$e.constant($e.name),$e.standard($e.name)],color:F6},{tag:[$e.definition($e.name),$e.separator],color:m$},{tag:[$e.typeName,$e.className,$e.number,$e.changed,$e.annotation,$e.modifier,$e.self,$e.namespace],color:iRe},{tag:[$e.operator,$e.operatorKeyword,$e.url,$e.escape,$e.regexp,$e.link,$e.special($e.string)],color:rRe},{tag:[$e.meta,$e.comment],color:wN},{tag:$e.strong,fontWeight:"bold"},{tag:$e.emphasis,fontStyle:"italic"},{tag:$e.strikethrough,textDecoration:"line-through"},{tag:$e.link,color:wN,textDecoration:"underline"},{tag:$e.heading,fontWeight:"bold",color:B6},{tag:[$e.atom,$e.bool,$e.special($e.variableName)],color:F6},{tag:[$e.processingInstruction,$e.string,$e.inserted],color:aRe},{tag:$e.invalid,color:sRe}]),fRe=[hRe,cte(dRe)];var pRe=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),z6=Du.define();function mRe(n){var{value:e,selection:t,onChange:i,onStatistics:r,onCreateEditor:o,onUpdate:a,extensions:l=[],autoFocus:u,theme:h="light",height:d="",minHeight:p="",maxHeight:m="",placeholder:g="",width:v="",minWidth:y="",maxWidth:S="",editable:T=!0,readOnly:w=!1,indentWithTab:E=!0,basicSetup:$=!0,root:A,initialState:I}=n,[D,R]=q.useState(),[B,G]=q.useState(),[Z,N]=q.useState(),H=Lt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),M=Lt.theme({"&":{height:d,minHeight:p,maxHeight:m,width:v,minWidth:y,maxWidth:S}}),K=Lt.updateListener.of(ce=>{if(ce.docChanged&&typeof i=="function"&&!ce.transactions.some(ee=>ee.annotation(z6))){var X=ce.state.doc,Q=X.toString();i(Q,ce)}r&&r(pRe(ce))}),re=[K,M];switch(E&&re.unshift(KT.of([gIe])),$&&(typeof $=="boolean"?re.unshift(N6()):re.unshift(N6($))),g&&re.unshift(Y$e(g)),h){case"light":re.push(H);break;case"dark":re.push(fRe);break;case"none":break;default:re.push(h);break}return T===!1&&re.push(Lt.editable.of(!1)),w&&re.push(Bn.readOnly.of(!0)),a&&typeof a=="function"&&re.push(Lt.updateListener.of(a)),re=re.concat(l),q.useEffect(()=>{if(D&&!Z){var ce={doc:e,selection:t,extensions:re},X=I?Bn.fromJSON(I.json,ce,I.fields):Bn.create(ce);if(N(X),!B){var Q=new Lt({state:X,parent:D,root:A});G(Q),o&&o(Q,X)}}return()=>{B&&(N(void 0),G(void 0))}},[D,Z]),q.useEffect(()=>R(n.container),[n.container]),q.useEffect(()=>()=>{B&&(B.destroy(),G(void 0))},[B]),q.useEffect(()=>{u&&B&&B.focus()},[u,B]),q.useEffect(()=>{B&&B.dispatch({effects:gn.reconfigure.of(re)})},[h,l,d,p,m,v,y,S,g,T,w,E,$,i,a]),q.useEffect(()=>{if(e!==void 0){var ce=B?B.state.doc.toString():"";B&&e!==ce&&B.dispatch({changes:{from:0,to:ce.length,insert:e||""},annotations:[z6.of(!0)]})}},[e,B]),{state:Z,setState:N,view:B,setView:G,container:D,setContainer:R}}var gRe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],cU=q.forwardRef((n,e)=>{var{className:t,value:i="",selection:r,extensions:o=[],onChange:a,onStatistics:l,onCreateEditor:u,onUpdate:h,autoFocus:d,theme:p="light",height:m,minHeight:g,maxHeight:v,width:y,minWidth:S,maxWidth:T,basicSetup:w,placeholder:E,indentWithTab:$,editable:A,readOnly:I,root:D,initialState:R}=n,B=oke(n,gRe),G=q.useRef(null),{state:Z,view:N,container:H,setContainer:M}=mRe({container:G.current,root:D,value:i,autoFocus:d,theme:p,height:m,minHeight:g,maxHeight:v,width:y,minWidth:S,maxWidth:T,basicSetup:w,placeholder:E,indentWithTab:$,editable:A,readOnly:I,selection:r,onChange:a,onStatistics:l,onCreateEditor:u,onUpdate:h,extensions:o,initialState:R});if(q.useImperativeHandle(e,()=>({editor:G.current,state:Z,view:N}),[G,H,Z,N]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var K=typeof p=="string"?"cm-theme-"+p:"cm-theme";return se("div",Ji({ref:G,className:""+K+(t?" "+t:"")},B))});cU.displayName="CodeMirror";const _Re=()=>{const n=jt(t=>t.editingBlockId),e=jt(t=>t.blocks[n??""]);return se("div",{className:"h-full w-full",children:se(cU,{value:e==null?void 0:e.python,className:"h-full w-full",extensions:[ske()],readOnly:!0})})};let Q6=!0;const ORe=()=>{const n=q.useRef(null),e=sa(d=>d.robots),t=jt(d=>d.robots),i=sa(d=>d.step),r=sa(d=>d.setRobots),o=jt(),a=sa();vg(({clock:d})=>{i()}),Object.keys(e).length!==0?a.time===0&&Object.values(e).forEach(d=>{d.pos.set(...o.robots[d.id].startingPosition)}):Object.keys(t).length!==0&&r(t);const{size:l,viewport:u,camera:h}=Bi();return Q6&&(h.position.set(-5,0,2),h.up.set(0,0,1),Q6=!1),dt(Fr,{children:[se("color",{attach:"background",args:["black"]}),se(RJ,{maxPolarAngle:Math.PI*(1/2-1/20),minPolarAngle:0,minAzimuthAngle:-Math.PI/2,maxAzimuthAngle:Math.PI/2,minDistance:.5,maxDistance:5,object:h}),se(PJ,{alignment:"bottom-right",margin:[80,80],children:se(DJ,{labels:["X","Y","Z"],axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),se(LJ,{position:[0,0,-.001],args:[10.5,10.5],cellSize:1,cellThickness:1,rotation:[0,-Math.PI/2,-Math.PI/2],cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),se(u1e,{args:[1e3,1e3],rotation:[0,0,-Math.PI/2],position:[0,0,-.02],children:se("meshStandardMaterial",{color:"black"})}),Object.values(e).map(d=>se("group",{ref:n,position:d.pos,children:se(BJ,{robotId:d.id,renderBoundingBox:!0})},d.id)),se("primitive",{object:h})]})},vRe=()=>se("div",{className:"h-full w-full",children:se(Jq,{children:se(ORe,{})})}),V6=302,H6=1,yRe=2,X6=303,bRe=305,SRe=306,TRe=3,wRe=4,ERe=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Sne=125,xRe=59,j6=47,$Re=42,CRe=43,ARe=45,kRe=new bK({start:!1,shift(n,e){return e==TRe||e==wRe||e==bRe?n:e==SRe},strict:!1}),IRe=new GO((n,e)=>{let{next:t}=n;(t==Sne||t==-1||e.context)&&e.canShift(X6)&&n.acceptToken(X6)},{contextual:!0,fallback:!0}),RRe=new GO((n,e)=>{let{next:t}=n,i;ERe.indexOf(t)>-1||t==j6&&((i=n.peek(1))==j6||i==$Re)||t!=Sne&&t!=xRe&&t!=-1&&!e.context&&e.canShift(V6)&&n.acceptToken(V6)},{contextual:!0}),MRe=new GO((n,e)=>{let{next:t}=n;if((t==CRe||t==ARe)&&(n.advance(),t==n.next)){n.advance();let i=!e.context&&e.canShift(H6);n.acceptToken(i?H6:yRe)}},{contextual:!0}),PRe=xF({"get set async static":$e.modifier,"for while do if else switch try catch finally return throw break continue default case":$e.controlKeyword,"in of await yield void typeof delete instanceof":$e.operatorKeyword,"let var const function class extends":$e.definitionKeyword,"import export from":$e.moduleKeyword,"with debugger as new":$e.keyword,TemplateString:$e.special($e.string),super:$e.atom,BooleanLiteral:$e.bool,this:$e.self,null:$e.null,Star:$e.modifier,VariableName:$e.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":$e.function($e.variableName),VariableDefinition:$e.definition($e.variableName),Label:$e.labelName,PropertyName:$e.propertyName,PrivatePropertyName:$e.special($e.propertyName),"CallExpression/MemberExpression/PropertyName":$e.function($e.propertyName),"FunctionDeclaration/VariableDefinition":$e.function($e.definition($e.variableName)),"ClassDeclaration/VariableDefinition":$e.definition($e.className),PropertyDefinition:$e.definition($e.propertyName),PrivatePropertyDefinition:$e.definition($e.special($e.propertyName)),UpdateOp:$e.updateOperator,LineComment:$e.lineComment,BlockComment:$e.blockComment,Number:$e.number,String:$e.string,Escape:$e.escape,ArithOp:$e.arithmeticOperator,LogicOp:$e.logicOperator,BitOp:$e.bitwiseOperator,CompareOp:$e.compareOperator,RegExp:$e.regexp,Equals:$e.definitionOperator,Arrow:$e.function($e.punctuation),": Spread":$e.punctuation,"( )":$e.paren,"[ ]":$e.squareBracket,"{ }":$e.brace,"InterpolationStart InterpolationEnd":$e.special($e.brace),".":$e.derefOperator,", ;":$e.separator,"@":$e.meta,TypeName:$e.typeName,TypeDefinition:$e.definition($e.typeName),"type enum interface implements namespace module declare":$e.definitionKeyword,"abstract global Privacy readonly override":$e.modifier,"is keyof unique infer":$e.operatorKeyword,JSXAttributeValue:$e.attributeValue,JSXText:$e.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":$e.angleBracket,"JSXIdentifier JSXNameSpacedName":$e.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":$e.attributeName,"JSXBuiltin/JSXIdentifier":$e.standard($e.tagName)}),DRe={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,interface:417,enum:421,namespace:427,module:429,declare:433,global:437,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},LRe={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},NRe={__proto__:null,"<":137},BRe=HS.deserialize({version:14,states:"$EnO`QUOOO%QQUOOO'TQWOOP(bOSOOO*pQ(CjO'#CfO*wOpO'#CgO+VO!bO'#CgO+eO07`O'#DZO-vQUO'#DaO.WQUO'#DlO%QQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0uQSO'#ETOOQO'#I`'#I`O0}QSO'#GkOOQO'#Ei'#EiO1YQSO'#EhO1_QSO'#EhO3aQ(CjO'#JcO6QQ(CjO'#JdO6nQSO'#FWO6sQ#tO'#FoOOQ(CY'#F`'#F`O7OO&jO'#F`O7^Q,UO'#FvO8tQSO'#FuOOQ(CY'#Jd'#JdOOQ(CW'#Jc'#JcOOQQ'#J}'#J}O8yQSO'#IPO9OQ(C[O'#IQOOQQ'#JP'#JPOOQQ'#IU'#IUQ`QUOOO%QQUO'#DnO9WQUO'#DzO%QQUO'#D|O9_QSO'#GkO9dQ,UO'#ClO9rQSO'#EgO9}QSO'#ErO:SQ,UO'#F_O:qQSO'#GkO:vQSO'#GoO;RQSO'#GoO;aQSO'#GrO;aQSO'#GsO;aQSO'#GuO9_QSO'#GxO<QQSO'#G{O=cQSO'#CbO=sQSO'#HYO={QSO'#H`O={QSO'#HbO`QUO'#HdO={QSO'#HfO={QSO'#HiO>QQSO'#HoO>VQ(C]O'#HuO%QQUO'#HwO>bQ(C]O'#HyO>mQ(C]O'#H{O9OQ(C[O'#H}O>xQ(CjO'#CfO?zQWO'#DfQOQSOOO@bQSO'#EPO9dQ,UO'#EgO@mQSO'#EgO@xQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jg'#JgO%QQUO'#JgOBUQWO'#E`OOQ(CW'#E_'#E_OB`Q(C`O'#E`OBzQWO'#ESOOQO'#Jj'#JjOC`QWO'#ESOCmQWO'#E`ODTQWO'#EfODWQWO'#E`ODqQWO'#E`OAQQWO'#E`OBzQWO'#E`PEbO?MpO'#C`POOO)CDn)CDnOOOO'#IV'#IVOEmOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOE{O!bO,59RO%QQUO'#D]OOOO'#IY'#IYOFZO07`O,59uOOQ(CY,59u,59uOFiQUO'#IZOF|QSO'#JeOIOQbO'#JeO+sQUO'#JeOIVQSO,59{OImQSO'#EiOIzQSO'#JrOJVQSO'#JqOJVQSO'#JqOJ_QSO,5;VOJdQSO'#JpOOQ(CY,5:W,5:WOJkQUO,5:WOLlQ(CjO,5:bOM]QSO,5:jOMbQSO'#JnON[Q(C[O'#JoO:vQSO'#JnONcQSO'#JnONkQSO,5;UONpQSO'#JnOOQ(CY'#Cf'#CfO%QQUO'#EOO! dQ`O,5:oOOQO'#Jk'#JkOOQO-E<^-E<^O9_QSO,5=VO! zQSO,5=VO!!PQUO,5;SO!$SQ,UO'#EdO!%gQSO,5;SO!'PQ,UO'#DpO!'WQUO'#DuO!'bQWO,5;]O!'jQWO,5;]O%QQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^OOQQ'#FU'#FUO!'xQUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!){QSO,5;uOOQ(CY,5;v,5;vO%QQUO'#IfO!*TQ(C[O,5<cO!$SQ,UO,5;^O!*rQ,UO,5;^O%QQUO,5;rO!*yQ#tO'#FeO!+vQ#tO'#JvO!+bQ#tO'#JvO!+}Q#tO'#JvOOQO'#Jv'#JvO!,cQ#tO,5;}OOOO,5<Z,5<ZO!,tQUO'#FqOOOO'#Ie'#IeO7OO&jO,5;zO!,{Q#tO'#FsOOQ(CY,5;z,5;zO!-lQ7[O'#CrOOQ(CY'#Cv'#CvO!.PQSO'#CvO!.UO07`O'#CzO!.rQ,UO,5<`O!.yQSO,5<bO!0`QMhO'#GQO!0mQSO'#GRO!0rQSO'#GRO!0wQMhO'#GVO!1vQWO'#GZO!2iQ7[O'#J^OOQ(CY'#J^'#J^O!2sQSO'#J]O!3RQSO'#J[O!3ZQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0xQSO'#DSO!%lQ,UO'#FxO!%lQ,UO'#FzO!3cQSO'#F|O!3hQSO'#F}O!0rQSO'#GTO!%lQ,UO'#GYO!3mQSO'#EjO!4XQSO,5<aO`QUO,5>kOOQQ'#JX'#JXOOQQ,5>l,5>lOOQQ-E<S-E<SO!6WQ(CjO,5:YO!8tQ(CjO,5:fO%QQUO,5:fO!;_Q(CjO,5:hOOQ(CW'#Co'#CoO!<OQ,UO,5=VO!<^Q(C[O'#JYO8tQSO'#JYO!<oQ(C[O,59WO!<zQWO,59WO!=SQ,UO,59WO9dQ,UO,59WO!=_QSO,5;SO!=gQSO'#HXO!=xQSO'#KRO%QQUO,5;wO!>QQWO,5;yO!>VQSO,5=rO!>[QSO,5=rO!>aQSO,5=rO9OQ(C[O,5=rO!>oQSO'#EkO!?iQWO'#ElOOQ(CW'#Jp'#JpO!?pQ(C[O'#KOO9OQ(C[O,5=ZO;aQSO,5=aOOQO'#Cr'#CrO!?{QWO,5=^O!@TQ,UO,5=_O!@`QSO,5=aO!@eQ`O,5=dO>QQSO'#G}O9_QSO'#HPO!@mQSO'#HPO9dQ,UO'#HSO!@rQSO'#HSOOQQ,5=g,5=gO!@wQSO'#HTO!APQSO'#ClO!AUQSO,58|O!A`QSO,58|O!ChQUO,58|OOQQ,58|,58|O!CuQ(C[O,58|O%QQUO,58|O!DQQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!DbQSO,5=tO`QUO,5=zO`QUO,5=|O!DgQSO,5>OO`QUO,5>QO!DlQSO,5>TO!DqQUO,5>ZOOQQ,5>a,5>aO%QQUO,5>aO9OQ(C[O,5>cOOQQ,5>e,5>eO!HxQSO,5>eOOQQ,5>g,5>gO!HxQSO,5>gOOQQ,5>i,5>iO!H}QWO'#DXO%QQUO'#JgO!IlQWO'#JgO!JZQWO'#DgO!JlQWO'#DgO!L}QUO'#DgO!MUQSO'#JfO!M^QSO,5:QO!McQSO'#EmO!MqQSO'#JsO!MyQSO,5;WO!NOQWO'#DgO!N]QWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!NdQSO,5:kO>QQSO,5;RO!<zQWO,5;RO!=SQ,UO,5;RO9dQ,UO,5;RO!NlQSO,5@RO!NqQ!LQO,5:oO# wQ(C`O,5:zOBzQWO,5:nO#!cQWO,5:nO#!pQWO,5:zO##WQWO,5:zO##qQWO,5:zO#$bQWO,5:zOBzQWO,5:zO!<oQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%QQUO,5:zO#%UQ(C[O,5:zO#%aQ(C[O,5:zO!<zQWO,5:nOOQO,5;Q,5;QO#%oQ(C[O,5:zPOOO'#IT'#ITP#&TO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#&`Q`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#&eQbO,5>uO+sQUO,5>uOOQO,5>{,5>{O#&oQUO'#IZOOQO-E<X-E<XO#&|QSO,5@PO#'UQbO,5@PO#']QSO,5@]OOQ(CY1G/g1G/gO%QQUO,5@^O#'eQSO'#IaOOQO-E<_-E<_O#']QSO,5@]OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#'yQSO,5@YO:vQSO,5@YO#(RQSO,5@YO%QQUO,5@ZO#(aQ(C[O,5@ZO#(rQ(C[O,5@ZO#(yQSO'#IcO#'yQSO,5@YOOQ(CW1G0p1G0pO!'bQWO,5:qO!'mQWO,5:qOOQO,5:s,5:sO#)hQSO,5:sO#)pQ,UO1G2qO9_QSO1G2qOOQ(CY1G0n1G0nO#*OQ(CjO1G0nO#+TQ(ChO,5;OOOQ(CY'#GP'#GPO#+qQ(CjO'#J^O!!PQUO1G0nO#-yQ,UO'#JhO#.TQSO,5:[O#.YQbO'#JiO%QQUO'#JiO#.dQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%QQUO1G0wOOQ(CY1G1a1G1aO#.iQSO1G0wO#1QQ(CjO1G0xO#1XQ(CjO1G0xO#3rQ(CjO1G0xO#3yQ(CjO1G0xO#6TQ(CjO1G0xO#6kQ(CjO1G0xO#9eQ(CjO1G0xO#9lQ(CjO1G0xO#<VQ(CjO1G0xO#<^Q(CjO1G0xO#>UQ(CjO1G0xO#AUQ$IUO'#CfO#CSQ$IUO1G1ZO#EQQ$IUO'#JdO!*OQSO1G1aO#EeQ(CjO,5?QOOQ(CW-E<d-E<dO#FXQ(CjO1G0xOOQ(CY1G0x1G0xO#HdQ(CjO1G1^O#IWQ#tO,5<RO#I`Q#tO,5<SO#IhQ#tO'#FjO#JPQSO'#FiOOQO'#Jw'#JwOOQO'#Id'#IdO#JUQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JgQ$IUO'#JcO#JqQSO,5<]O!'xQUO,5<]OOOO-E<c-E<cOOQ(CY1G1f1G1fO#JvQWO'#JvOOQ(CY,5<_,5<_O#KOQWO,5<_OOQ(CY,59b,59bO!$SQ,UO'#C|OOOO'#IX'#IXO#KTO07`O,59fOOQ(CY,59f,59fO%QQUO1G1zO!3hQSO'#IhO#K`QSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!%lQ,UO,5=POOQO'#Gh'#GhO!%lQ,UO,5=RO!$SQ,UO,5=TOOQO1G1|1G1|O#KnQ`O'#CoO#LRQ`O,5<lO#LYQSO'#JzO9_QSO'#JzO#LhQSO,5<nO!%lQ,UO,5<mO#LmQSO'#GSO#LxQSO,5<mO#L}Q`O'#GPO#M[Q`O'#J{O#MfQSO'#J{O!$SQ,UO'#J{O#MkQSO,5<qO#MpQWO'#G[O!1qQWO'#G[O#NRQSO'#G^O#NWQSO'#G`O!0rQSO'#GcO#N]Q(C[O'#IjO#NhQWO,5<uOOQ(CY,5<u,5<uO#NoQWO'#G[O#N}QWO'#G]O$ VQWO'#G]OOQ(CY,5=U,5=UO!%lQ,UO,5?wO!%lQ,UO,5?wO$ [QSO'#IkO$ gQSO,5?vO$ oQSO,59]O$!`Q,UO,59nOOQ(CY,59n,59nO$#RQ,UO,5<dO$#tQ,UO,5<fO?rQSO,5<hOOQ(CY,5<i,5<iO$$OQSO,5<oO$$TQ,UO,5<tO!!PQUO1G1{O$$eQSO1G1{OOQQ1G4V1G4VOOQ(CY1G/t1G/tO!){QSO1G/tO$&dQ(CjO1G0QOOQQ1G2q1G2qO!$SQ,UO1G2qO%QQUO1G2qO$'TQSO1G2qO$'`Q,UO'#EdOOQ(CW,5?t,5?tO$'jQ(C[O,5?tOOQQ1G.r1G.rO!<oQ(C[O1G.rO!<zQWO1G.rO!=SQ,UO1G.rO$'{QSO1G0nO$(QQSO'#CfO$(]QSO'#KSO$(eQSO,5=sO$(jQSO'#KSO$(oQSO'#KSO$(zQSO'#IsO$)YQSO,5@mO$)bQbO1G1cOOQ(CY1G1e1G1eO9_QSO1G3^O?rQSO1G3^O$)iQSO1G3^O$)nQSO1G3^OOQQ1G3^1G3^O:vQSO'#JqO:vQSO'#EmO%QQUO'#EmO:vQSO'#ImO$)sQ(C[O,5@jOOQQ1G2u1G2uO!@`QSO1G2{O!$SQ,UO1G2xO$*OQSO1G2xOOQQ1G2y1G2yO!$SQ,UO1G2yO$*TQSO1G2yO$*]QWO'#GwOOQQ1G2{1G2{O!1qQWO'#IoO!@eQ`O1G3OOOQQ1G3O1G3OOOQQ,5=i,5=iO$*eQ,UO,5=kO9_QSO,5=kO#NWQSO,5=nO8tQSO,5=nO!<zQWO,5=nO!=SQ,UO,5=nO9dQ,UO,5=nO$*sQSO'#KQO$+OQSO,5=oOOQQ1G.h1G.hO$+TQ(C[O1G.hO?rQSO1G.hO$+`QSO1G.hO9OQ(C[O1G.hO$+kQbO,5@oO$,OQSO,5@oO$,ZQUO,5=vO$,bQSO,5=vO:vQSO,5@oOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO={QSO1G3jO$,gQUO1G3lO$0hQUO'#HkOOQQ1G3o1G3oO$0uQSO'#HqO>QQSO'#HsOOQQ1G3u1G3uO$0}QUO1G3uO9OQ(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9OQ(C[O1G4PO9OQ(C[O1G4RO$5RQSO,5@RO!'xQUO,5;XO:vQSO,5;XO>QQSO,5:RO!'xQUO,5:RO!<zQWO,5:RO$5WQ$IUO,5:ROOQO,5;X,5;XO$5bQWO'#I[O$5xQSO,5@QOOQ(CY1G/l1G/lO$6QQWO'#IbO$6[QSO,5@_OOQ(CW1G0r1G0rO!JlQWO,5:ROOQO'#I_'#I_O$6dQWO,5:mOOQ(CY,5:m,5:mO!NgQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0m1G0mO>QQSO1G0mO!<zQWO1G0mO!=SQ,UO1G0mOOQ(CW1G5m1G5mO!<oQ(C[O1G0YOOQO1G0f1G0fO%QQUO1G0fO$6kQ(C[O1G0fO$6vQ(C[O1G0fO!<zQWO1G0YOBzQWO1G0YO$7UQ(C`O1G0fO$7pQWO1G0YOBzQWO1G0fO$7}QWO1G0fO$8eQWO1G0fO$9OQWO1G0fO$9oQ(C[O1G0fOOQO1G0Y1G0YO$:TQ(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$:_Q`O,5<cO$:gQbO1G4aOOQO1G4g1G4gO%QQUO,5>uO$:qQSO1G5kO$:yQSO1G5wO$;RQbO1G5xO:vQSO,5>{O$;]QSO1G5tO$;]QSO1G5tO:vQSO1G5tO$;eQ(CjO1G5uO%QQUO1G5uO$;uQ(C[O1G5uO$<WQSO,5>}O:vQSO,5>}OOQO,5>},5>}O$<lQSO,5>}OOQO-E<a-E<aOOQO1G0]1G0]OOQO1G0_1G0_O!*OQSO1G0_OOQQ7+(]7+(]O!$SQ,UO7+(]O%QQUO7+(]O$<zQSO7+(]O$=VQ,UO7+(]O$=eQ(CjO,59nO$?mQ(CjO,5<dO$AxQ(CjO,5<fO$DTQ(CjO,5<tOOQ(CY7+&Y7+&YO$FfQ(CjO7+&YO$GYQ,UO'#I]O$GdQSO,5@SOOQ(CY1G/v1G/vO$GlQUO'#I^O$GyQSO,5@TO$HRQbO,5@TOOQ(CY1G/{1G/{O$H]QSO7+&cOOQ(CY7+&c7+&cO$HbQ$IUO,5:bO%QQUO7+&uO$HlQ$IUO,5:YO$HyQ$IUO,5:fO$ITQ$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$I_Q#tO,5<UO!'xQUO,5<TOOQO-E<b-E<bOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$IjQSO1G1wOOQ(CY1G1y1G1yO$IoQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IvQ(CjO7+'fOOQ(CY,5?S,5?SO$JjQSO,5?SOOQ(CY1G2_1G2_P$JoQSO'#IhPOQ(CY-E<f-E<fO$KcQ,UO1G2kO$LUQ,UO1G2mO$L`Q`O1G2oOOQ(CY1G2W1G2WO$LgQSO'#IgO$LuQSO,5@fO$LuQSO,5@fO$L}QSO,5@fO$MYQSO,5@fOOQO1G2Y1G2YO$MhQ,UO1G2XO!%lQ,UO1G2XO$MxQMhO'#IiO$NYQSO,5@gO!$SQ,UO,5@gO$NbQ`O,5@gOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$NlQSO,5<wOBuQSO,5<wO!<zQWO,5<vOOQO'#G_'#G_O$NqQSO,5<xOOQ(CW,5<z,5<zO$NlQSO,5<}OOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY1G2a1G2aO!1qQWO,5<vO$NyQSO,5<wO#NRQSO,5<xO!1qQWO,5<wO% UQ,UO1G5cO% `Q,UO1G5cOOQO,5?V,5?VOOQO-E<i-E<iOOQO1G.w1G.wO!>QQWO,59pO%QQUO,59pO% mQSO1G2SO!%lQ,UO1G2ZO% rQ(CjO7+'gOOQ(CY7+'g7+'gO!!PQUO7+'gOOQ(CY7+%`7+%`O%!fQ`O'#J|O!NgQSO7+(]O%!pQbO7+(]O$<}QSO7+(]O%!wQ(ChO'#CfO%#[Q(ChO,5<{O%#|QSO,5<{OOQ(CW1G5`1G5`OOQQ7+$^7+$^O!<oQ(C[O7+$^O!<zQWO7+$^O!!PQUO7+&YO%$RQSO'#IrO%$gQSO,5@nOOQO1G3_1G3_O9_QSO,5@nO%$gQSO,5@nO%$oQSO,5@nOOQO,5?_,5?_OOQO-E<q-E<qOOQ(CY7+&}7+&}O%$tQSO7+(xO9OQ(C[O7+(xO9_QSO7+(xO?rQSO7+(xO%$yQSO,5;XOOQ(CW,5?X,5?XOOQ(CW-E<k-E<kOOQQ7+(g7+(gO%%OQ(ChO7+(dO!$SQ,UO7+(dO%%YQ`O7+(eOOQQ7+(e7+(eO!$SQ,UO7+(eO%%aQSO'#KPO%%lQSO,5=cOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ7+(j7+(jO%&{QWO'#HQOOQQ1G3V1G3VO!$SQ,UO1G3VO%QQUO1G3VO%'SQSO1G3VO%'_Q,UO1G3VO9OQ(C[O1G3YO#NWQSO1G3YO8tQSO1G3YO!<zQWO1G3YO!=SQ,UO1G3YO%'mQSO'#IqO%'xQSO,5@lO%(QQWO,5@lOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO?rQSO7+$SO9OQ(C[O7+$SO%(]QSO7+$SO%QQUO1G6ZO%QQUO1G6[O%(bQUO1G3bO%(iQSO1G3bO%(nQUO1G3bO%(uQ(C[O1G6ZOOQQ7+(z7+(zO9OQ(C[O7+)UO`QUO7+)WOOQQ'#KV'#KVOOQQ'#It'#ItO%)PQUO,5>VOOQQ,5>V,5>VO%QQUO'#HlO%)^QSO'#HnOOQQ,5>],5>]O:vQSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%)cQWO1G5mO%)wQ$IUO1G0sO%*RQSO1G0sOOQO1G/m1G/mO%*^Q$IUO1G/mO>QQSO1G/mO!'xQUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!<zQWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!NgQSO7+%qOOQ(CY7+&X7+&XO>QQSO7+&XO!<zQWO7+&XOOQO7+%t7+%tO$:TQ(CjO7+&QOOQO7+&Q7+&QO%QQUO7+&QO%*hQ(C[O7+&QO!<oQ(C[O7+%tO!<zQWO7+%tO%*sQ(C[O7+&QOBzQWO7+%tO%+RQ(C[O7+&QO%+gQ(C`O7+&QO%+qQWO7+%tOBzQWO7+&QO%,OQWO7+&QO%,fQWO7+&QO%-PQSO7++`O%-PQSO7++`O%-XQ(CjO7++aO%QQUO7++aOOQO1G4i1G4iO:vQSO1G4iO%-iQSO1G4iOOQO7+%y7+%yO!NgQSO<<KwO%!pQbO<<KwO%-wQSO<<KwOOQQ<<Kw<<KwO!$SQ,UO<<KwO%QQUO<<KwO%.PQSO<<KwO%.[Q(CjO1G2kO%0gQ(CjO1G2mO%2rQ(CjO1G2XO%5TQ,UO,5>wOOQO-E<Z-E<ZO%5_QbO,5>xO%QQUO,5>xOOQO-E<[-E<[O%5iQSO1G5oOOQ(CY<<I}<<I}O%5qQ$IUO1G0nO%7{Q$IUO1G0xO%8SQ$IUO1G0xO%:WQ$IUO1G0xO%:_Q$IUO1G0xO%<SQ$IUO1G0xO%<jQ$IUO1G0xO%>}Q$IUO1G0xO%?UQ$IUO1G0xO%AYQ$IUO1G0xO%AaQ$IUO1G0xO%CXQ$IUO1G0xO%ClQ(CjO<<JaO%DqQ$IUO1G0xO%FgQ$IUO'#J^O%HjQ$IUO1G1^O%HwQ$IUO1G0QO!'xQUO'#FlOOQO'#Jx'#JxOOQO1G1p1G1pO%IRQSO1G1oO%IWQ$IUO,5?QOOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4n1G4nO!%lQ,UO7+(ZO%IbQSO,5?RO9_QSO,5?ROOQO-E<e-E<eO%IpQSO1G6QO%IpQSO1G6QO%IxQSO1G6QO%JTQ,UO7+'sO%JeQ`O,5?TO%JoQSO,5?TO!$SQ,UO,5?TOOQO-E<g-E<gO%JtQ`O1G6RO%KOQSO1G6ROOQ(CW1G2c1G2cO$NlQSO1G2cOOQ(CW1G2b1G2bO%KWQSO1G2dO!$SQ,UO1G2dOOQ(CW1G2i1G2iO!<zQWO1G2bOBuQSO1G2cO%K]QSO1G2dO%KeQSO1G2cO!%lQ,UO7+*}OOQ(CY1G/[1G/[O%KpQSO1G/[OOQ(CY7+'n7+'nO%KuQ,UO7+'uO%LVQ(CjO<<KROOQ(CY<<KR<<KRO!$SQ,UO'#IlO%LyQSO,5@hO!$SQ,UO1G2gOOQQ<<Gx<<GxO!<oQ(C[O<<GxO%MRQ(CjO<<ItOOQ(CY<<It<<ItOOQO,5?^,5?^O%MuQSO,5?^O$(oQSO,5?^OOQO-E<p-E<pO%MzQSO1G6YO%MzQSO1G6YO9_QSO1G6YO?rQSO<<LdOOQQ<<Ld<<LdO%NSQSO<<LdO9OQ(C[O<<LdO%NXQSO1G0sOOQQ<<LO<<LOO%%OQ(ChO<<LOOOQQ<<LP<<LPO%%YQ`O<<LPO%N^QWO'#InO%NiQSO,5@kO!'xQUO,5@kOOQQ1G2}1G2}O%NqQ(C`O'#JgO& ]QUO'#JgO& dQWO'#E`O&!QQ(C[O'#E`OB`Q(C`O'#E`O(YQWO'#HROOQO'#Ip'#IpO9OQ(C[O'#IpO&!fQWO,5=lOOQQ,5=l,5=lO&#OQWO'#E`O& vQWO'#E`O&#VQWO'#E`O&#pQWO'#E`O& jQWO'#E`O&$aQWO'#HRO&$rQSO7+(qO&$wQSO7+(qOOQQ7+(q7+(qO!$SQ,UO7+(qO%QQUO7+(qO&%PQSO7+(qOOQQ7+(t7+(tO9OQ(C[O7+(tO#NWQSO7+(tO8tQSO7+(tO!<zQWO7+(tO&%[QSO,5?]OOQO-E<o-E<oOOQO'#HU'#HUO&%gQSO1G6WO9OQ(C[O<<GnOOQQ<<Gn<<GnO?rQSO<<GnO&%oQSO7++uO&%tQSO7++vOOQQ7+(|7+(|O&%yQSO7+(|O&&OQUO7+(|O&&VQSO7+(|O%QQUO7++uO%QQUO7++vOOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<r-E<rOOQQ1G3q1G3qO&&[QSO,5>WOOQQ,5>Y,5>YO&&aQSO1G3wO:vQSO7+&_O!'xQUO7+&_OOQO7+%X7+%XO&&fQ$IUO1G5xO>QQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>QQSO<<IsOOQO<<Il<<IlO$:TQ(CjO<<IlO%QQUO<<IlOOQO<<I`<<I`O!<oQ(C[O<<I`O&&pQ(C[O<<IlO!<zQWO<<I`O&&{Q(C[O<<IlOBzQWO<<I`O&'ZQ(C[O<<IlO&'oQ(C`O<<IlO&'yQWO<<I`OBzQWO<<IlO&(WQWO<<IlO&(nQSO<<NzO&(vQ(CjO<<N{OOQO7+*T7+*TO:vQSO7+*TOOQQANAcANAcO&)WQSOANAcO!$SQ,UOANAcO!NgQSOANAcO%!pQbOANAcO%QQUOANAcO&)`Q(CjO7+'sO&+qQ(CjO7+'uO&.SQbO1G4dO&.^Q$IUO7+&YO&.kQ$IUO,59nO&0nQ$IUO,5<dO&2qQ$IUO,5<fO&4tQ$IUO,5<tO&6jQ$IUO7+'fO&6wQ$IUO7+'gO&7UQSO,5<WOOQO7+'Z7+'ZO&7ZQ,UO<<KuOOQO1G4m1G4mO&7bQSO1G4mO&7mQSO1G4mO&7{QSO7++lO&7{QSO7++lO!$SQ,UO1G4oO&8TQ`O1G4oO&8_QSO7++mOOQ(CW7+'}7+'}O$NlQSO7+(OO&8gQ`O7+(OOOQ(CW7+'|7+'|O$NlQSO7+'}O&8nQSO7+(OO!$SQ,UO7+(OOBuQSO7+'}O&8sQ,UO<<NiOOQ(CY7+$v7+$vO&8}Q`O,5?WOOQO-E<j-E<jO&9XQ(ChO7+(ROOQQAN=dAN=dO9_QSO1G4xOOQO1G4x1G4xO&9iQSO1G4xO&9nQSO7++tO&9nQSO7++tO9OQ(C[OANBOO?rQSOANBOOOQQANBOANBOOOQQANAjANAjOOQQANAkANAkO&9vQSO,5?YOOQO-E<l-E<lO&:RQ$IUO1G6VO&:]Q(C[O,5=mO8tQSO,5=mO&<nQbO'#CfO&<xQWO,5:zO&=SQWO,5:zO&=aQWO,5:zO&=tQWO,5:zO!<zQWO,5=mOOQO,5?[,5?[OOQO-E<n-E<nOOQQ1G3W1G3WO& ]QUO,5<xO%NqQ(C`O,5=mO# wQ(C`O,5:zO(YQWO,5=mO&>[QWO,5=mO&>mQWO,5:zOOQQ<<L]<<L]O!$SQ,UO<<L]O&$rQSO<<L]O&?WQSO<<L]O%QQUO<<L]OOQQ<<L`<<L`O9OQ(C[O<<L`O#NWQSO<<L`O8tQSO<<L`O&?`QWO1G4wO&?kQSO7++rOOQQAN=YAN=YO9OQ(C[OAN=YOOQQ<= a<= aOOQQ<= b<= bOOQQ<<Lh<<LhO&?sQSO<<LhO&?xQUO<<LhO&@PQSO<= aO&@UQSO<= bOOQQ1G3r1G3rO>QQSO7+)cO&@ZQSO<<IyO&@fQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$:TQ(CjOAN?WOOQOAN>zAN>zO%QQUOAN?WO!<oQ(C[OAN>zO&@pQ(C[OAN?WO!<zQWOAN>zO&@{Q(C[OAN?WOBzQWOAN>zO&AZQ(C[OAN?WO&AoQ(C`OAN?WO&AyQWOAN>zOBzQWOAN?WOOQO<<Mo<<MoOOQQG26}G26}O!$SQ,UOG26}O!NgQSOG26}O&BWQSOG26}O%!pQbOG26}O&B`Q$IUO<<JaO&BmQ$IUO1G2XO&DcQ$IUO1G2kO&FfQ$IUO1G2mO&HiQ$IUO<<KRO&HvQ$IUO<<ItOOQO1G1r1G1rO!%lQ,UOANAaOOQO7+*X7+*XO&ITQSO7+*XO&I`QSO<= WO&IhQ`O7+*ZOOQ(CW<<Kj<<KjO$NlQSO<<KjOOQ(CW<<Ki<<KiO&IrQ`O<<KjO$NlQSO<<KiOOQO7+*d7+*dO9_QSO7+*dO&IyQSO<= `OOQQG27jG27jO9OQ(C[OG27jO!'xQUO1G4tO&JRQSO7++qOOQO1G3X1G3XO9OQ(C[O1G3XO&:]Q(C[O1G3XO&JZQWO1G0fO&JeQWO1G0fO&JrQWO1G0fO8tQSO1G3XO!<zQWO1G3XO(YQWO1G3XO%NqQ(C`O1G3XO$7UQ(C`O1G0fO&KVQWO1G3XO&$rQSOANAwOOQQANAwANAwO!$SQ,UOANAwO&KhQSOANAwOOQQANAzANAzO9OQ(C[OANAzO#NWQSOANAzOOQO'#HV'#HVOOQO7+*c7+*cOOQQG22tG22tOOQQANBSANBSO&KpQSOANBSOOQQAND{AND{OOQQAND|AND|OOQQ<<L}<<L}O!'xQUOAN?eOOQOG24rG24rO$:TQ(CjOG24rOOQOG24fG24fO%QQUOG24rO!<oQ(C[OG24fO&KuQ(C[OG24rO!<zQWOG24fO&LQQ(C[OG24rOBzQWOG24fO&L`Q(C[OG24rO!NgQSOLD,iOOQQLD,iLD,iO!$SQ,UOLD,iO&LtQSOLD,iO&L|Q$IUO7+'sO&NrQ$IUO7+'uO'!hQ,UOG26{OOQO<<Ms<<MsOOQ(CWANAUANAUO$NlQSOANAUOOQ(CWANATANATOOQO<<NO<<NOOOQQLD-ULD-UO'!xQ$IUO7+*`OOQO7+(s7+(sO9OQ(C[O7+(sO'#SQWO7+&QO'#^QWO7+&QO&:]Q(C[O7+(sO8tQSO7+(sO!<zQWO7+(sO(YQWO7+(sOOQQG27cG27cO&$rQSOG27cO!$SQ,UOG27cOOQQG27fG27fO9OQ(C[OG27fOOQQG27nG27nO'#kQ$IUOG25POOQOLD*^LD*^O$:TQ(CjOLD*^OOQOLD*QLD*QO%QQUOLD*^O!<oQ(C[OLD*QO'#uQ(C[OLD*^O!<zQWOLD*QO'$QQ(C[OLD*^OOQQ!$(!T!$(!TO!NgQSO!$(!TO!$SQ,UO!$(!TO'$`Q(CjOG26{OOQ(CWG26pG26pOOQO<<L_<<L_O'&qQWO<<IlO9OQ(C[O<<L_O&:]Q(C[O<<L_O8tQSO<<L_O!<zQWO<<L_OOQQLD,}LD,}O&$rQSOLD,}OOQQLD-QLD-QOOQO!$'Mx!$'MxO$:TQ(CjO!$'MxOOQO!$'Ml!$'MlO%QQUO!$'MxO!<oQ(C[O!$'MlO'&{Q(C[O!$'MxOOQQ!)9Eo!)9EoO!NgQSO!)9EoOOQOANAyANAyO9OQ(C[OANAyO&:]Q(C[OANAyO8tQSOANAyOOQQ!$(!i!$(!iOOQO!)9Cd!)9CdO$:TQ(CjO!)9CdOOQO!)9CW!)9CWO%QQUO!)9CdOOQQ!.K;Z!.K;ZO''WQ$IUOG26{OOQOG27eG27eO9OQ(C[OG27eO&:]Q(C[OG27eOOQO!.K9O!.K9OO$:TQ(CjO!.K9OOOQOLD-PLD-PO9OQ(C[OLD-POOQO!4/.j!4/.jOOQO!$(!k!$(!kO!'xQUO'#DvO0uQSO'#ETO'(|QbO'#JcO!'xQUO'#DnO')TQUO'#DzO!'xQUO'#D|O')[QbO'#CfO'+rQbO'#CfO',SQUO,5;SO!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO'#IfO'.VQSO,5<cO'._Q,UO,5;^O'/rQ,UO,5;^O!'xQUO,5;rO0xQSO'#DSO0xQSO'#DSO!$SQ,UO'#FxO'._Q,UO'#FxO!$SQ,UO'#FzO'._Q,UO'#FzO!$SQ,UO'#GYO'._Q,UO'#GYO!'xQUO,5:fO!'xQUO,5@^O',SQUO1G0nO'/yQ$IUO'#CfO!'xQUO1G1zO!$SQ,UO,5=PO'._Q,UO,5=PO!$SQ,UO,5=RO'._Q,UO,5=RO!$SQ,UO,5<mO'._Q,UO,5<mO',SQUO1G1{O!'xQUO7+&uO!$SQ,UO1G2XO'._Q,UO1G2XO!$SQ,UO1G2ZO'._Q,UO1G2ZO',SQUO7+'gO',SQUO7+&YO!$SQ,UOANAaO'._Q,UOANAaO'0TQSO'#EhO'0YQSO'#EhO'0bQSO'#FWO'0gQSO'#ErO'0lQSO'#JrO'0wQSO'#JpO'1SQSO,5;SO'1XQ,UO,5<`O'1`QSO'#GRO'1eQSO'#GRO'1jQSO,5<aO'1rQSO,5;SO'1zQ$IUO1G1ZO'2RQSO,5<mO'2WQSO,5<mO'2]QSO,5<oO'2bQSO,5<oO'2gQSO1G1{O'2lQSO1G0nO'2qQ,UO<<KuO'2xQ,UO<<KuO7^Q,UO'#FvO8tQSO'#FuO@mQSO'#EgO!'xQUO,5;oO!0rQSO'#GRO!0rQSO'#GRO!0rQSO'#GTO!0rQSO'#GTO!%lQ,UO7+(ZO!%lQ,UO7+(ZO$L`Q`O1G2oO$L`Q`O1G2oO!$SQ,UO,5=TO!$SQ,UO,5=T",stateData:"'4R~O'mOS'nOSROS'oRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#p}O$QzO$UfO%`{O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO%}!UO&T!VO&V!WO&X!XO&Z!YO&^!ZO&d![O&j!]O&l!^O&n!_O&p!`O&r!aO'tSO'vTO'yUO(RVO(`[O(miO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x<XO!|!wO!}!vO#O!tO#P!uO#Q!sO#T!xO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O'o!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'kYX(RYX(aYX(hYX(iYX~O!a$zX~P(gO[!{O'v!}O'w!{O'x!}O~O[#OO'x!}O'y!}O'z#OO~Oq#QO!O#RO(S#RO(T#TO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't<^O'vTO'yUO(RVO(`[O(miO~O!U#XO!V#UO!S(XP!S(eP~P+sO!W#aO~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(miO~O!U#gO!x]O#b#jO#c#gO't<_O!g(bP~P._O!h#lO't#kO~O!t#pO!x]O%`#qO~O#d#rO~O!a#sO#d#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!V$_O!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^(VX'k(VX'i(VX!g(VX!S(VX!X(VX%a(VX!a(VX~P1gO#X$cO#{$cOP(WXX(WXk(WXy(WXz(WX|(WX!V(WX!e(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!X(WX%a(WX~O^(WX!f(WX'k(WX'i(WX!S(WX!g(WXo(WX!a(WX~P3}O#X$cO~O$W$eO$Y$dO$a$jO~O!X$kO$UfO$d$lO$f$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't$pO'vTO'yUO'}%PO(R$sOd(OP~O!h%[O~O!a%^O~O^%_O'k%_O~O'u!iO~P%QO't%fO~O!h%[O't%fO'u!iO'}%PO~Ob%mO!h%[O't%fO~O#o$QO~Oy%rO!X%oO!h%qO%b%uO't%fO'u!iO'vTO'yUO](uP~O!t#pO~O|%wO!X%xO't%fO~O|%wO!X%xO%j%|O't%fO~O't%}O~O#p}O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO~Oa&WOb&VO!t&TO%`&UO%r&SO~P;fOa&ZObwO!X&YO!tvO!x]O#p}O%`{O%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO~O_&^O#X&aO%b&[O'u!iO~P<eO!h&bO!q&fO~O!h#lO~O!XXO~O^%_O'j&nO'k%_O~O^%_O'j&qO'k%_O~O^%_O'j&sO'k%_O~O'iYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(gO!['QO!]&yO!^&yO'u!iO'vTO'yUO~Ol&wO|&vO!U&zO(U&uO!W(YP!W(gP~P?fOg'TO!X'RO't%fO~Ob'YO!h%[O't%fO~Oy%rO!h%qO~Ol!kO|!lO!['_O!]'^O!^'^O!}'bO#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO'vTO'yUO(U!jO(`!nO~O!x<XO!|'cO~PAQO^%_O!a#sO!h%[O!l'jO#X'hO'k%_O'}%PO(a'fO~Ol!kO|!lO'vTO'yUO(U!jO(`!nO~O!]'^O!^'^O'u!iO~PBzO!['_O!]'^O!^'^O#T'dO#U'dO'u!iO~PBzO!XXO!['_O!]'^O!^'^O#Q'`O#T'dO#U'dO'u!iO~PBzO!['_O!]'^O!^'^O#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO~PBzO'p'nO'q'nO'r'pO~O[!{O'v'rO'w!{O'x'rO~O[#OO'x'rO'y'rO'z#OO~Oq#QO!O#RO(S#RO(T'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+sO!V'zO!S(XX~OP$ZOX$bOk$OOy#wOz#xO|#yO!V'zO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O!S(XX~PGUO!S(PO~O!S(dX!V(dX!a(dX!g(dX(a(dX~O#X(dX#d#]X!W(dX~PI[O#X(QO!S(fX!V(fX~O!V(RO!S(eX~O!S(UO~O#X$cO~PI[O!W(VO~P`Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(a!ja(h!ja(i!ja~O^!ja'k!ja'i!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJrO!g(WO~O|%wO!X%xO!x]O#b(ZO#c(YO't%fO~O!a#sO#X([O(a'fO!V(cX^(cX'k(cX~O!g(cX~PMvO!V(_O!g(bX~O!g(aO~O|%wO!X%xO#c(YO't%fO~Oy(bOz(cO!f#uO!h#vO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa't!wa~P! OO!t(gO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#d(mO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't(kO'vTO'yUO'}%PO(R$sO~Od([P~P!%lO!U(qO!g(]P~P%QO(U(sO(`[O~O|(uO!h#vO(U(sO(`[O~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~Oz)WO!h#vO~O!V$_O^$ka'k$ka'i$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!$SOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(jX$T(jX$W(jX$Y(jX$a(jX~Oy)_O~P!+bOy)_O!X(jX$T(jX$W(jX$Y(jX$a(jX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!'xO$W$eO$Y$dO$a)mO~Og$sXy$sX|$sX!f$sX(h$sX(i$sX~OdfXd$sXgfX!VfX#XfX~P!-WOl)oO~Oq)pO(S)qO(T)sO~Og)|Oy)uO|)vO(h)xO(i)zO~Od)tO~P!.aOd)}O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO'vTO'yUO'}%PO(R$sO~O!U*RO't*OO!g(nP~P!/OO#d*TO~O!h*UO~O!U*ZO't*WO!S(oP~P!/OOk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'u!iO(U!jO~O!W*dO~P!1UO!f#uOg(QXy(QX|(QX(h(QX(i(QX!V(QX#X(QX~Od(QX#y(QX~P!1}Og*jO#X*iOd(PX!V(PX~O!V*kOd(OX~O't%}Od(OP~O!h*rO~O't(kO~O|%wO!U#gO!X%xO!x]O#b#jO#c#gO't%fO!g(bP~O!a#sO#d*vO~OP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^!ba!V!ba'k!ba'i!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!4aOy#wOz#xO|#yO!f#uO!h#vO(RVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(a!na(h!na(i!na~O^!na'k!na'i!na!S!na!g!nao!na!X!na%a!na!a!na~P!6zOy#wOz#xO|#yO!f#uO!h#vO(RVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(a!pa(h!pa(i!pa~O^!pa'k!pa'i!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!9eOg+OO!X'RO%a*}O'}%PO~O!a+QO^'|X!X'|X'k'|X!V'|X~O^%_O!XXO'k%_O~O!h%[O'}%PO~O!h%[O't%fO'}%PO~O!a#sO#d(mO~O%b+^O't+YO'vTO'yUO!W(vP~O!V+_O](uX~O(U(sO~OX+cO~O]+dO~O!X%oO't%fO'u!iO](uP~O|%wO!U+hO!V(RO!X%xO't%fO!S(eP~Ol&}O|+jO!U+iO'vTO'yUO(U(sO~O!W(gP~P!?TO!V+kO^(rX'k(rX~O#X+oO'}%PO~Og+rO!X$zO'}%PO~O!X+tO~Oy+vO!XXO~O!t+{O~Ob,QO~O't#kO!W(tP~Ob%mO~O%b!OO't%}O~P<eOX,WO],VO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$UfO%`{O'vTO'yUO(RVO(`[O(miO~O!X!cO$Q!hO't!bO~P!AhO],VO^%_O'k%_O~O^,[O#p,^O%d,^O%e,^O~P%QO!h&bO~O&T,cO~O!X,eO~O&f,gO&h,hOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%h&ca%j&ca%m&ca%n&ca%p&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'i&ca't&ca'v&ca'y&ca(R&ca(`&ca(m&ca!W&ca&[&ca_&ca&a&ca~O't,mO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X'}!_X~O!a,rO#X,qO!V#aX!V(ZX!W#aX!W(ZX!a(ZX!h(ZX'}(ZX~O!a,tO!h%[O'}%PO!V!ZX!W!ZX~Ol!kO|!lO'vTO'yUO(U!jO~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(m=uO~O't<|O~P!J}O!V,xO!W(YX~O!W,zO~O!a,rO#X,qO!V#aX!W#aX~O!V,{O!W(gX~O!W,}O~O!]-OO!^-OO'u!iO~P!JlO!W-RO~P'TOg-UO!X'RO~O!S-ZO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'u!wa'v!wa'y!wa(U!wa(`!wa~P! OO^%_O!a#sO!h%[O!l-`O#X-^O'k%_O'}%PO(a'fO~O!]-bO!^-bO'u!iO~PBzO![-dO!]-bO!^-bO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO!}-hO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO^%_O#X-^O'k%_O~O^%_O!a#sO#X-^O'k%_O~O^%_O!a#sO!l-`O#X-^O'k%_O(a'fO~O'p'nO'q'nO'r-mO~Oo-nO~O!S&}a!V&}a~P!4aO!U-rO!S&}X!V&}X~P%QO!V'zO!S(Xa~O!S(Xa~PGUO!V(RO!S(ea~O|%wO!U-vO!X%xO't%fO!S'TX!V'TX~O!V(_O!g(ba~O|%wO!X%xO#c-yO't%fO~O#X-{O!V(ca!g(ca^(ca'k(ca~O!a#sO~P#(aO|%wO!U.OO!X%xO!x]O#b.QO#c.OO't%fO!V'VX!g'VX~Oz.UO!h#vO~Og.XO!X'RO%a.WO'}%PO~O^#[i!V#[i'k#[i'i#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!4aOg>ROy)uO|)vO(h)xO(i)zO~O#d#Wa^#Wa#X#Wa'k#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#*rO#d(QXP(QXX(QX^(QXk(QXz(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX'k(QX(R(QX(a(QX!g(QX!S(QX'i(QXo(QX!X(QX%a(QX!a(QX~P!1}O!V.bOd([X~P!.aOd.dO~O!V.eO!g(]X~P!4aO!g.hO~O!S.jO~OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#.nO#g#|O~P#.nOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O(RVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#1`Ok$OO~P#1`OP$ZOk$OOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO(RVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#4QOX$bO!e$QO#l$QO#m$QO#n$aO#o$QO~P#4QOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO(RVO^#fi!V#fi#s#fi#u#fi#v#fi'k#fi(a#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(h#fi~P#7RO(h#zO~P#7ROP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO(RVO(h#zO^#fi!V#fi#u#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(i#fi~P#9sO(i#{O~P#9sOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO(RVO(h#zO(i#{O~O^#fi!V#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#<eOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX!VYX!WYX~O#yYX~P#?OOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO#v<kO(RVO(a$XO(h#zO(i#{O~O#y.lO~P#A]OP(WXX(WXk(WXy(WXz(WX|(WX!e(WX!f(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!V(WX~O#X<pO#{<pO#o(WX#y(WX!W(WX~P#CZO^'Ya!V'Ya'k'Ya'i'Ya!g'Ya!S'Yao'Ya!X'Ya%a'Ya!a'Ya~P!4aOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(R#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#*rO^#zi!V#zi'k#zi'i#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!4aO$W.qO$Y.qO~O$W.rO$Y.rO~O!a)^O#X.sO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.tO~O!X)aO$T.vO$W)`O$Y)`O$a.wO~O!V<lO!W(VX~P#A]O!W.xO~O!a)^O$a(jX~O$a.zO~Oq)pO(S)qO(T.}O~Ol/QO!S/RO'vTO'yUO~O!VcX!acX!gcX!g$sX(acX~P!-WO!g/XO~P#*rO!V/YO!a#sO(a'fO!g(nX~O!g/_O~O!U*RO't%fO!g(nP~O#d/aO~O!S$sX!V$sX!a$zX~P!-WO!V/bO!S(oX~P#*rO!a/dO~O!S/fO~Ok/jO!a#sO!h%[O'}%PO(a'fO~O't/lO~O!a+QO~O^%_O!V/pO'k%_O~O!W/rO~P!1UO!]/sO!^/sO'u!iO(U!jO~O|/uO(U!jO~O#T/vO~O't%}Od'_X!V'_X~O!V*kOd(Oa~Od/{O~Oy/|Oz/|O|/}Ogva(hva(iva!Vva#Xva~Odva#yva~P$ tOy)uO|)vOg$la(h$la(i$la!V$la#X$la~Od$la#y$la~P$!jOy)uO|)vOg$na(h$na(i$na!V$na#X$na~Od$na#y$na~P$#]O#d0PO~Od$|a!V$|a#X$|a#y$|a~P!.aO#d0SO~Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(a!ni(h!ni(i!ni~O^!ni'k!ni'i!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$jOg.XO!X'RO%a.WO~Oi0ZO't0YO~P!/RO!a+QO^'|a!X'|a'k'|a!V'|a~O#d0aO~OXYX!VcX!WcX~O!V0bO!W(vX~O!W0dO~OX0eO~O't+YO'vTO'yUO~O!X%oO't%fO]'gX!V'gX~O!V+_O](ua~O!g0jO~P!4aOX0mO~O]0nO~O!V+kO^(ra'k(ra~O#X0tO~Og0wO!X$zO~O(U(sO!W(sP~Og1QO!X0}O%a1PO'}%PO~OX1[O!V1YO!W(tX~O!W1]O~O]1_O^%_O'k%_O~O't#kO'vTO'yUO~O#X$cO#o1bO#{$cO&R1cO^(WX~P#CZO#X$cO#o1bO&R1cO~O^1dO~P%QO^1fO~O&[1jOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%h&Yi%j&Yi%m&Yi%n&Yi%p&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'i&Yi't&Yi'v&Yi'y&Yi(R&Yi(`&Yi(m&Yi!W&Yi_&Yi&a&Yi~O_1pO!W1nO&a1oO~P`O!XXO!h1rO~O&h,hOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%h&ci%j&ci%m&ci%n&ci%p&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'i&ci't&ci'v&ci'y&ci(R&ci(`&ci(m&ci!W&ci&[&ci_&ci&a&ci~O!S1xO~O!V!Za!W!Za~P#A]Ol!kO|!lO!U2OO(U!jO!V'OX!W'OX~P?fO!V,xO!W(Ya~O!V'UX!W'UX~P!?TO!V,{O!W(ga~O!W2VO~P'TO^%_O#X2`O'k%_O~O^%_O!a#sO#X2`O'k%_O~O^%_O!a#sO!h%[O!l2dO#X2`O'k%_O'}%PO(a'fO~O!]2eO!^2eO'u!iO~PBzO![2hO!]2eO!^2eO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#Q2jO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#O2kO#P2kO#Q2jO#T2iO#U2iO'u!iO~PBzO^%_O!a#sO!l2dO#X2`O'k%_O(a'fO~O^%_O'k%_O~P!4aO!V$_Oo$ka~O!S&}i!V&}i~P!4aO!V'zO!S(Xi~O!V(RO!S(ei~O!S(fi!V(fi~P!4aO!V(_O!g(bi~O!V(ci!g(ci^(ci'k(ci~P!4aO#X2oO!V(ci!g(ci^(ci'k(ci~O|%wO!X%xO!x]O#b2rO#c2qO't%fO~O|%wO!X%xO#c2qO't%fO~Og2yO!X'RO%a2xO~Og2yO!X'RO%a2xO'}%PO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'kva(Rva(ava!gva!Sva'ivaova!Xva%ava!ava~P$ tO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'k$la(R$la(a$la!g$la!S$la'i$lao$la!X$la%a$la!a$la~P$!jO#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'k$na(R$na(a$na!g$na!S$na'i$nao$na!X$na%a$na!a$na~P$#]O#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'k$|a(R$|a(a$|a!g$|a!S$|a'i$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#*rO^#[q!V#[q'k#[q'i#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!4aOd'PX!V'PX~P!%lO!V.bOd([a~O!U3RO!V'QX!g'QX~P%QO!V.eO!g(]a~O!V.eO!g(]a~P!4aO!S3UO~O#y!ja!W!ja~PJrO#y!ba!V!ba!W!ba~P#A]O#y!na!W!na~P!6zO#y!pa!W!pa~P!9eO!X3hO$UfO$_3iO~O!W3mO~Oo3nO~P#*rO^$hq!V$hq'k$hq'i$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!4aO!S3oO~Ol/QO'vTO'yUO~Oy)uO|)vO(i)zOg%Xi(h%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JzOy)uO|)vOg%Zi(h%Zi(i%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$KmO(a$XO~P#*rO!U3rO't%fO!V'ZX!g'ZX~O!V/YO!g(na~O!V/YO!a#sO!g(na~O!V/YO!a#sO(a'fO!g(na~Od$ui!V$ui#X$ui#y$ui~P!.aO!U3zO't*WO!S']X!V']X~P!/OO!V/bO!S(oa~O!V/bO!S(oa~P#*rO!a#sO~O!a#sO#o4SO~Ok4VO!a#sO(a'fO~Od(Pi!V(Pi~P!.aO#X4YOd(Pi!V(Pi~P!.aO!g4]O~O^$iq!V$iq'k$iq'i$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!4aO!V4aO!X(pX~P#*rO!f#uO~P3}O^$sX!X$sX%UYX'k$sX!V$sX~P!-WO%U4cO^hXghXyhX|hX!XhX'khX(hhX(ihX!VhX~O%U4cO~O%b4jO't+YO'vTO'yUO!V'fX!W'fX~O!V0bO!W(va~OX4nO~O]4oO~O!S4sO~O^%_O'k%_O~P#*rO!X$zO~P#*rO!V4xO#X4zO!W(sX~O!W4{O~Ol!kO|4}O![5]O!]5RO!^5RO!x<XO!|5[O!}5ZO#O5YO#P5YO#Q5XO#T5WO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O!W5VO~P%%qOg5bO!X0}O%a5aO~Og5bO!X0}O%a5aO'}%PO~O't#kO!V'eX!W'eX~O!V1YO!W(ta~O'vTO'yUO(U5kO~O]5oO~O!g5rO~P%QO^5tO~O^5tO~P%QO#o5vO&R5wO~PMvO_1pO!W5{O&a1oO~P`O!a5}O~O!a6PO!V(Zi!W(Zi!a(Zi!h(Zi'}(Zi~O!V#ai!W#ai~P#A]O#X6QO!V#ai!W#ai~O!V!Zi!W!Zi~P#A]O^%_O#X6ZO'k%_O~O^%_O!a#sO#X6ZO'k%_O~O^%_O!a#sO!l6`O#X6ZO'k%_O(a'fO~O!h%[O'}%PO~P%+RO!]6aO!^6aO'u!iO~PBzO![6dO!]6aO!^6aO#T6eO#U6eO'u!iO~PBzO![6dO!]6aO!^6aO#Q6fO#T6eO#U6eO'u!iO~PBzO!V(_O!g(bq~O!V(cq!g(cq^(cq'k(cq~P!4aO|%wO!X%xO#c6jO't%fO~O!X'RO%a6mO~Og6pO!X'RO%a6mO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'k%Xi(R%Xi(a%Xi!g%Xi!S%Xi'i%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JzO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'k%Zi(R%Zi(a%Zi!g%Zi!S%Zi'i%Zio%Zi!X%Zi%a%Zi!a%Zi~P$KmO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'k$ui(R$ui(a$ui!g$ui!S$ui'i$ui#X$uio$ui!X$ui%a$ui!a$ui~P#*rOd'Pa!V'Pa~P!.aO!V'Qa!g'Qa~P!4aO!V.eO!g(]i~O#y#[i!V#[i!W#[i~P#A]OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~O#g#fi~P%6OO#g<aO~P%6OOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO(RVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~Ok#fi~P%8ZOk<cO~P%8ZOP$ZOk<cOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO(RVO#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%:fOX<oO!e<eO#l<eO#m<eO#n<nO#o<eO~P%:fOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO(RVO#s#fi#u#fi#v#fi#y#fi(a#fi(i#fi!V#fi!W#fi~O(h#fi~P%=QO(h#zO~P%=QOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO(RVO(h#zO#u#fi#v#fi#y#fi(a#fi!V#fi!W#fi~O(i#fi~P%?]O(i#{O~P%?]OP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO(RVO(h#zO(i#{O~O#v#fi#y#fi(a#fi!V#fi!W#fi~P%AhO^#wy!V#wy'k#wy'i#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!4aOg>SOy)uO|)vO(h)xO(i)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(R#fi(a#fi!V#fi!W#fi~P%D`O!f#uOP(QXX(QXg(QXk(QXy(QXz(QX|(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX#y(QX(R(QX(a(QX(h(QX(i(QX!V(QX!W(QX~O#y#zi!V#zi!W#zi~P#A]O#y!ni!W!ni~P$$jO!W6|O~O!V'Ya!W'Ya~P#A]O!a#sO(a'fO!V'Za!g'Za~O!V/YO!g(ni~O!V/YO!a#sO!g(ni~Od$uq!V$uq#X$uq#y$uq~P!.aO!S']a!V']a~P#*rO!a7TO~O!V/bO!S(oi~P#*rO!V/bO!S(oi~O!S7XO~O!a#sO#o7^O~Ok7_O!a#sO(a'fO~O!S7aO~Od$wq!V$wq#X$wq#y$wq~P!.aO^$iy!V$iy'k$iy'i$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!4aO!V4aO!X(pa~O^#[y!V#[y'k#[y'i#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!4aOX7fO~O!V0bO!W(vi~O]7lO~O!a6PO~O(U(sO!V'bX!W'bX~O!V4xO!W(sa~O!h%[O'}%PO^(ZX!a(ZX!l(ZX#X(ZX'k(ZX(a(ZX~O't7uO~P._O!x<XO!|7yO!}7xO#O7wO#P7wO#Q7vO#T'dO#U'dO~PBzO^%_O!a#sO!l'jO#X'hO'k%_O(a'fO~O!W7}O~P%%qOl!kO'vTO'yUO(U!jO(`!nO~O|8OO~P&!mO![8SO!]8RO!^8RO#Q7vO#T'dO#U'dO'u!iO~PBzO![8SO!]8RO!^8RO#O8TO#P8TO#Q7vO#T'dO#U'dO'u!iO~PBzO!]8RO!^8RO'u!iO(U!jO(`!nO~O!X0}O~O!X0}O%a8VO~Og8YO!X0}O%a8VO~OX8_O!V'ea!W'ea~O!V1YO!W(ti~O!g8cO~O!g8dO~O!g8eO~O!g8eO~P%QO^8gO~O!a8jO~O!g8kO~O!V(fi!W(fi~P#A]O^%_O#X8sO'k%_O~O^%_O!a#sO#X8sO'k%_O~O^%_O!a#sO!l8wO#X8sO'k%_O(a'fO~O!h%[O'}%PO~P&'ZO!]8xO!^8xO'u!iO~PBzO![8{O!]8xO!^8xO#T8|O#U8|O'u!iO~PBzO!V(_O!g(by~O!V(cy!g(cy^(cy'k(cy~P!4aO!X'RO%a9PO~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'k$uq(R$uq(a$uq!g$uq!S$uq'i$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#*rO#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'k$wq(R$wq(a$wq!g$wq!S$wq'i$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#*rO!V'Qi!g'Qi~P!4aO#y#[q!V#[q!W#[q~P#A]Oy/|Oz/|O|/}OPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Rva(ava(hva(iva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(R$la(a$la(h$la(i$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(R$na(a$na(h$na(i$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(R$|a(a$|a!V$|a!W$|a~P%D`O#y$hq!V$hq!W$hq~P#A]O#y$iq!V$iq!W$iq~P#A]O!W9ZO~O#y9[O~P!.aO!a#sO!V'Zi!g'Zi~O!a#sO(a'fO!V'Zi!g'Zi~O!V/YO!g(nq~O!S']i!V']i~P#*rO!V/bO!S(oq~O!S9bO~P#*rO!S9bO~Od(Py!V(Py~P!.aO!V'`a!X'`a~P#*rO^%Tq!X%Tq'k%Tq!V%Tq~P#*rOX9gO~O!V0bO!W(vq~O#X9kO!V'ba!W'ba~O!V4xO!W(si~P#A]O^%_O!a+QO'k%_O~OPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!a%RX#o%RX~P&:hO#T-eO#U-eO~PBzO#Q9pO#T-eO#U-eO~PBzO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!}9rO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!]9uO!^9uO'u!iO(U!jO(`!nO~O![9xO!]9uO!^9uO#Q9pO#T-eO#U-eO'u!iO~PBzO!X0}O%a9{O~O'vTO'yUO(U:QO~O!V1YO!W(tq~O!g:TO~O!g:TO~P%QO!g:VO~O!g:WO~O#X:YO!V#ay!W#ay~O!V#ay!W#ay~P#A]O^%_O#X:^O'k%_O~O^%_O!a#sO#X:^O'k%_O~O^%_O!a#sO!l:bO#X:^O'k%_O(a'fO~O!h%[O'}%PO~P&AZO!]:cO!^:cO'u!iO~PBzO!X'RO%a:gO~O#y#wy!V#wy!W#wy~P#A]OP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(R$ui(a$ui!V$ui!W$ui~P%D`Oy)uO|)vO(i)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(R%Xi(a%Xi(h%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(R%Zi(a%Zi(h%Zi(i%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#A]O#y#[y!V#[y!W#[y~P#A]O!a#sO!V'Zq!g'Zq~O!V/YO!g(ny~O!S']q!V']q~P#*rO!S:nO~P#*rO!V0bO!W(vy~O!V4xO!W(sq~O#T2iO#U2iO~PBzO#Q:uO#T2iO#U2iO~PBzO#O:vO#P:vO#Q:uO#T2iO#U2iO~PBzO!]:zO!^:zO'u!iO(U!jO(`!nO~O!X0}O%a:}O~O!g;QO~O^%_O#X;VO'k%_O~O^%_O!a#sO#X;VO'k%_O~O^%_O!a#sO!l;ZO#X;VO'k%_O(a'fO~O!X'RO%a;^O~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(R$uq(a$uq!V$uq!W$uq~P%D`OP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(R$wq(a$wq!V$wq!W$wq~P%D`Od%]!Z!V%]!Z#X%]!Z#y%]!Z~P!.aO!V'bq!W'bq~P#A]O#T6eO#U6eO~PBzO#Q;bO#T6eO#U6eO~PBzO!V#a!Z!W#a!Z~P#A]O^%_O#X;mO'k%_O~O^%_O!a#sO#X;mO'k%_O~O#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'k%]!Z(R%]!Z(a%]!Z!g%]!Z!S%]!Z'i%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#*rO#T8|O#U8|O~PBzO^%_O#X;zO'k%_O~OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(R%]!Z(a%]!Z!V%]!Z!W%]!Z~P%D`Oo(VX~P1gO'u!iO~P!'xO!ScX!VcX#XcX~P&:hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!acX!gYX!gcX(acX~P')iOP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!XXO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~O!V<lO!W$ka~Oi%QOk$rOl$qOm$qOs%ROu%SOw<rO|$yO!X$zO!c=|O!h$vO#c<xO$Q%WO$m<tO$o<vO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#p)[O~P'._O!WYX!WcX~P')iO#d<`O~O!a#sO#d<`O~O#X<pO~O#o<eO~O#X<zO!V(fX!W(fX~O#X<pO!V(dX!W(dX~O#d<{O~Od<}O~P!.aO#d=SO~O#d=TO~O!a#sO#d=UO~O!a#sO#d<{O~O#y=VO~P#A]O#d=WO~O#d=XO~O#d=YO~O#d=ZO~O#d=[O~O#d=]O~O#y=^O~P!.aO#y=_O~P!.aO$U~!f!|!}#P#Q#T#b#c#n(m$m$o$r%U%`%a%b%h%j%m%n%p%r~'oR$U(m#h!R'm'u#il#g#jky'n(U'n't$W$Y$W~",goto:"$2w(zPPPP({P)OP)`P+j/pPPPP7RPP7hP=gAYPAmPAmPPPAmPC]PAmPAmPAmPCaPPCfPDPPH}PPPIRPPPPIRLUPPPL[NiPIRP!#SPPPP!%fIRPPPIRPIRP!'xIRP!+`!,b!,gP!-X!-]!-XPPPPP!0j!3SPP!3]!4kP!,bIRIR!8S!;`!@l!@l!DePPP!DlIRPPPPPPPPPPP!G{P!IbPPIR!JsPIRPIRIRIRIRPIR!LZPP# eP#$kP#$o#$y#$}#$}P# bP#%R#%RP#(XP#(]IRIR#(c#+hAmPAmPAmAmP#,rAmAm#.lAm#0yAm#2mAmAm#3Z#5V#5V#5Z#5c#5V#5kP#5VPAm#6gAm#7oAmAm7RPPP#8zPP#9d#9dP#9dP#9y#9dPP#:PP#9vP#9v#:c!3X#9v#:}#;T7O)O#;W)OP#;_#;_#;_P)OP)OP)OP)OPP)OP#;e#;hP#;h)OP#;lP#;oP)OP)OP)OP)OP)OP)O)OPP#;u#;{#<V#<]#<c#<i#<o#<}#=T#=Z#=e#=k#>g#>v#>|#?`#?f#?l#?z#@a#Aq#BP#BV#B]#Bc#Bi#Bs#By#CP#CZ#Cm#CsPPPPPPPPPP#CyPPPPPPP#Dm#I^P#J}#KU#K^PPPP$ h$$^$+P$+S$+V$-g$-j$-m$-tPP$-z$.O$.w$/w$/{$0aPP$0e$0k$0oP$0r$0v$0y$1o$2V$2[$2_$2b$2h$2k$2o$2sR!zRmpOXr!X#b%^&e&g&h&j,`,e1j1mU!pQ'R-QQ%dtQ%lwQ%szQ&]!TS&y!c,xQ'X!f^'^!m!r!s!t!u!v!wS*^$z*cQ+W%mQ+e%uQ,P&VQ-O'QQ-Y'YY-b'_'`'a'b'cQ/s*eQ1X,QW2e-d-f-g-hS5R0}5UU6a2h2j2kU8R5Y5Z5]S8x6d6fS9u8S8TQ:c8{Q:z9xR<y<[%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;zS#n]<X!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ*n%TQ+]%oQ,R&YQ,Y&bQ.[<qQ0W+OQ0[+QQ0g+^Q1a,WQ2u.XQ4i0bQ5i1YQ6o2yQ6u<rQ7h4jR9S6p'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#n!kQ!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h0}2e2h2i2j2k5O5U5W5X5Y5Z5[6a6d6e6f7v7w7x7y8T8x8{8|9p9q9r:c:u:v;b$Y$qi#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ%vzQ&w!cS&}%x,{Q+]%oS/Q)v/SQ0O*rQ0g+^Q0l+dQ1`,VQ1a,WQ4i0bQ4r0nQ5l1[Q5m1_Q7h4jQ7k4oQ8b5oQ9j7lR:R8_pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR,T&^&z`OPXYrstux!X!^!g!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v'T'h'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=w=x[#ZWZ#U#X&z'xQ%gvQ%kwS%pz%u!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ&R!RQ'U!eQ'W!fQ(f#pS*Q$v*US+V%l%mQ+Z%oQ+z&TQ,O&VS-X'X'YQ.Z(gQ/^*RQ0`+WQ0f+^Q0h+_Q0k+cQ1S+{S1W,P,QQ2[-YQ3q/YQ4h0bQ4l0eQ4q0mQ5h1XQ7Q3rQ7g4jQ7j4nQ9f7fR:p9gv$xi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!d%iw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YQ+P%gQ+p&OQ+s&PQ+}&VQ.Y(fQ1R+zU1V,O,P,QQ2z.ZQ5c1SS5g1W1XS7t4|5QQ8^5hU9s7z8P8QU:x9t9v9wQ;e:yQ;u;f!z=y#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg=z<n<o<t<v<x=P=R=T=X=Z=_W$}i%P*k=uS&O!O&[Q&P!PQ&Q!QR+n%|$Z$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>ST)q$s)rV*o%T<q<rU&}!c%x,{S(t#w#xQ+b%rS.S(b(cQ0x+tQ4Z/|R7p4x'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x$q$^c#W#c%b%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.m.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lT#RV#S'RkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ&{!cR2P,x#f!kQ!c!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h2e2h2i2j2k5O5W5X5[6a6d6e6f7v7w7x7y8x8{8|9p9q9r:c:u:v;bS*]$z*cS/k*^*eQ/t*fQ0z+vQ4U/sQ4X/vS4|0}5US7z5R5]S8P5Y5ZS9t8R8SQ9v8TS:y9u9xR;f:zlpOXr!X#b%^&e&g&h&j,`,e1j1mQ&l![Q'l!tS(h#r<`Q+T%jQ+x&RQ+y&SQ-V'VQ-j'eS.`(m<{S0R*v=UQ0^+UQ0|+wQ1q,gQ1s,hQ1{,sQ2Y-WQ2]-[S4`0S=[Q4d0_S4g0a=]Q6R1}Q6V2ZQ6[2bQ7e4eQ8n6TQ8o6WQ8r6]Q:X8kQ:]8tQ;U:_Q;l;WR;y;n$l$]c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(e#m'[U*h${(l3eS*z%b.mQ2v0WQ6l2uQ9R6oR:h9S$l$[c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(d#m'[S(v#x$]S*y%b.mS.T(c(eQ.p)WQ0T*zR2s.U'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS#n]<XQ&g!VQ&h!WQ&j!YQ&k!ZR1i,cQ'S!eQ*|%gQ-T'US.V(f+PQ2W-SW2w.Y.Z0V0XQ6U2XU6k2t2v2zS9O6l6nS:f9Q9RS;[:e:hQ;p;]R;{;qV!qQ'R-Q!_^OQXZ_r!T!X!m#b#e%[%^&[&^&e&g&h&j'R(_,`,e-Q-}0}1j1m5O5UT#n]<X%^yOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS(t#w#xS.S(b(c!s=c$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xU!oQ'R-Q[']!m!s!t!u!v!wS'k!p!rY'm!x5O5W5X5[S-a'^'_W-c'`'a'b'cY-i'd7v7w7x7yS2c-b-dW2f-e9p9q9rU2g-f-g-hS5Q0}5US6_2e2hU6b2i:u:vS6c2j2kS7z5R5]S8Q5Y5ZS8v6a6dS8y6e;bQ8z6fS9t8R8SQ9w8TS:a8x8{Q:d8|S:y9u9xQ;Y:cR;f:zU!qQ'R-QT5S0}5UU'j!o5P5QS(^#f1gU-`']'m8QQ/]*QQ/i*]U2d-c-i9wQ3v/^S4P/j/tS6`2f2gQ7P3qS7[4V4XS8w6b6cQ9^7QQ9e7_S:b8y8zR;Z:dQ#tbU'i!o5P5QS(]#f1gQ*w%]Q+R%hQ+X%nW-_']'j'm8QQ-|(^Q/[*QQ/h*]Q/n*`Q0]+SQ1T+|W2a-`-c-i9wS3u/]/^S4O/i/tQ4R/mQ4T/oQ5e1UU6^2d2f2gQ7O3qQ7S3vS7W4P4XQ7]4WQ8[5fU8u6`6b6cS9]7P7QQ9a7XQ9c7[Q9n7sQ:O8]U:`8w8y8zQ:l9^Q:m9bQ:o9eQ:t9oQ;P:PS;X:b:dQ;`:nQ;c:wQ;o;ZQ;s;dQ<O;tQ<T<PQ=f=aQ=q=jR=r=k%^aOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS#tx!g!r=`$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=f=w%^bOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zQ%]j!d%hw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YS%nx!gQ+S%iQ+|&VW1U+},O,P,QU5f1V1W1XS7s4|5QS8]5g5hW9o7t7z8P8QQ:P8^W:w9s9t9v9wS;d:x:yS;t;e;fQ<P;u!r=a$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ=j=vR=k=w%QeOPXYrstu!X!^!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zY#`WZ#U#X'x!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ,Z&b!p=b$Y$k)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=e&zS'O!c%xR2R,{%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;z!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ,Y&bQ0W+OQ2u.XQ6o2yR9S6p!n$Sc#W%b'w'}(i(p)P)Q)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!T<g)U)g,v.m1y1|3V3_3`3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!j$Uc#W%b'w'}(i(p)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!P<i)U)g,v.m1y1|3V3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!f$Yc#W%b'w'}(i(p)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<YQ3p/Wz=x)U)g,v.m1y1|3V3f3l6S6t6y6z7r8m9T9X9Y:r;R=lQ=}>PR>O>Q'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS$lh$mR3i.s'XgOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$hf$nQ$ffS)`$i)dR)l$nT$gf$nT)b$i)d'XhOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$lh$mQ$ohR)k$m%^jOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;z!s=v$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#alOPXZr!X!^!l#Q#b#l#y$k%^&^&a&b&e&g&h&j&n&v'T(u)i+O+j,[,`,e-U.X.t/}1Q1b1c1d1f1j1m1o2y3h4}5b5t5v5w6p8O8Y8gv${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>SQ*s%XQ/P)ug3e<n<o<t<v<x=P=R=T=X=Z=_v$wi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>OQ*V$xS*`$z*cQ*t%YQ/o*a!z=h#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sf=i<n<o<t<v<x=P=R=T=X=Z=_Q=m=yQ=n=zQ=o={R=p=|v${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg3e<n<o<t<v<x=P=R=T=X=Z=_lnOXr!X#b%^&e&g&h&j,`,e1j1mQ*Y$yQ,n&qQ,o&sR3y/b$Y$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ+q&PQ0v+sQ4v0uR7o4wT*b$z*cS*b$z*cT5T0}5US/m*_4}T4W/u8OQ+R%hQ/n*`Q0]+SQ1T+|Q5e1UQ8[5fQ9n7sQ:O8]Q:t9oQ;P:PQ;c:wQ;s;dQ<O;tR<T<Pn)y$t(n*u/`/w/x3O3w4^6}7`:k=g=s=t!W=O(j)Z*P*X._.{/W/e0U0s0u2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q]=P3d6x9U:i:j;|p){$t(n*u/U/`/w/x3O3w4^6}7`:k=g=s=t!Y=Q(j)Z*P*X._.{/W/e0U0s0u2{2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q_=R3d6x9U9V:i:j;|pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ&X!SR,[&bpmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR&X!SQ+u&QR0r+nqmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ1O+zS5`1R1SU8U5^5_5cS9z8W8XS:{9y9|Q;g:|R;v;hQ&`!TR,U&[R5l1[S%pz%uR0h+_Q&e!UR,`&fR,f&kT1k,e1mR,j&lQ,i&lR1t,jQ'o!yR-l'oQrOQ#bXT%ar#bQ!|TR'q!|Q#PUR's#PQ)r$sR.|)rQ#SVR'u#SQ#VWU'{#V'|-sQ'|#WR-s'}Q,y&{R2Q,yQ.c(nR3P.cQ.f(pS3S.f3TR3T.gQ-Q'RR2U-Qr_OXr!T!X#b%^&[&^&e&g&h&j,`,e1j1mU!mQ'R-QS#eZ%[Y#o_!m#e-}5OQ-}(_T5O0}5US#]W%wU(S#](T-tQ(T#^R-t(OQ,|'OR2S,|Q(`#hQ-w(XW.R(`-w2l6gQ2l-xR6g2mQ)d$iR.u)dQ$mhR)j$mQ$`cU)Y$`-o<mQ-o<YR<m)gQ/Z*QW3s/Z3t7R9_U3t/[/]/^S7R3u3vR9_7S#m)w$t(j(n)Z*P*X*p*q*u.].^._.{/U/V/W/`/e/w/x0U0s0u2{2|2}3O3d3w3x3|4^4u4w6q6r6v6w6x6}7U7Y7`7b7d9U9V9W9`9d:i:j:k;_;|=g=s=t>P>QQ/c*XU3{/c3}7VQ3}/eR7V3|Q*c$zR/q*cQ*l%OR/z*lQ4b0UR7c4bQ+l%zR0q+lQ4y0xS7q4y9lR9l7rQ+w&RR0{+wQ5U0}R7|5UQ1Z,RS5j1Z8`R8`5lQ0c+ZW4k0c4m7i9hQ4m0fQ7i4lR9h7jQ+`%pR0i+`Q1m,eR5z1mWqOXr#bQ&i!XQ*x%^Q,_&eQ,a&gQ,b&hQ,d&jQ1h,`S1k,e1mR5y1jQ%`oQ&m!]Q&p!_Q&r!`Q&t!aU'g!o5P5QQ+T%jQ+g%vQ+m%{Q,T&`Q,l&oY-]']'i'j'm8QQ-j'eQ/p*bQ0^+US1^,U,XQ1u,kQ1v,nQ1w,oQ2]-[[2_-_-`-c-i-k9wQ4d0_Q4p0lQ4t0sQ5d1TQ5n1`Q5x1iY6X2^2a2d2f2gQ6[2bQ7e4eQ7m4rQ7n4uQ7{5TQ8Z5eQ8a5mY8p6Y6^6`6b6cQ8r6]Q9i7kQ9m7sQ9}8[Q:S8bY:Z8q8u8w8y8zQ:]8tQ:q9jS:s9n9oQ;O:OW;S:[:`:b:dQ;U:_S;a:t:wQ;i;PU;j;T;X;ZQ;l;WS;r;c;dS;w;k;oQ;y;nS;};s;tQ<Q;xS<S<O<PQ<U<RR<V<TQ%jwQ'V!fQ'e!oU+U%k%l%mQ,s&xU-W'W'X'YS-[']'kQ/g*]S0_+V+WQ1},uS2Z-X-YS2b-a-cQ4Q/kQ4e0`Q6T2TQ6W2[S6]2c2gQ7Z4US8t6_6cS:_8v8zQ;W:aR;n;YS$ui=uR*m%PU%Oi%P=uR/y*kQ$tiS(j#s+QQ(n#uS)Z$a$bQ*P$vQ*X$yQ*p%UQ*q%VQ*u%ZQ.]<sQ.^<uQ._<wQ.{)pQ/U)yQ/V){Q/W)|Q/`*TQ/e*ZQ/w*iQ/x*jh0U*}.W1P2x5a6m8V9P9{:g:};^Q0s+oQ0u+rQ2{=OQ2|=QQ2}=SQ3O.bS3d<n<oQ3w/aQ3x/bQ3|/dQ4^0PQ4u0tQ4w0wQ6q=WQ6r=YQ6v<tQ6w<vQ6x<xQ6}3pQ7U3zQ7Y4SQ7`4YQ7b4aQ7d4cQ9U=TQ9V=PQ9W=RQ9`7TQ9d7^Q:i=XQ:j=ZQ:k9[Q;_=^Q;|=_Q=g=uQ=s=}Q=t>OQ>P>RR>Q>SloOXr!X#b%^&e&g&h&j,`,e1j1mQ!dPS#dZ#lQ&o!^U'Z!l4}8OQ't#QQ(w#yQ)h$kS,X&^&aQ,]&bQ,k&nQ,p&vQ-S'TQ.i(uQ.y)iQ0X+OQ0o+jQ1e,[Q2X-UQ2v.XQ3k.tQ4[/}Q5_1QQ5p1bQ5q1cQ5s1dQ5u1fQ5|1oQ6l2yQ6{3hQ8X5bQ8f5tQ8h5vQ8i5wQ9R6pQ9|8YR:U8g#UcOPXZr!X!^!l#b#l#y%^&^&a&b&e&g&h&j&n&v'T(u+O+j,[,`,e-U.X/}1Q1b1c1d1f1j1m1o2y4}5b5t5v5w6p8O8Y8gQ#WWQ#cYQ%bsQ%ctQ%euS'w#U'zQ'}#XQ(i#rQ(p#vQ(x#|Q(y#}Q(z$OQ({$PQ(|$QQ(}$RQ)O$SQ)P$TQ)Q$UQ)R$VQ)S$WQ)U$YQ)X$_Q)]$cW)g$k)i.t3hQ*{%dQ+a%qS,v&z2OQ-k'hS-p'x-rQ-u(QQ-z([Q.a(mQ.g(qQ.k<WQ.m<ZQ.n<[Q.o<]Q/O)tQ0Q*vQ1y,qQ1|,tQ2^-^Q2n-{Q3Q.eQ3V<`Q3W<aQ3X<bQ3Y<cQ3Z<dQ3[<eQ3]<fQ3^<gQ3_<hQ3`<iQ3a<jQ3b<kQ3c.lQ3f<pQ3g<yQ3l<lQ4_0SQ4f0aQ6S<zQ6Y2`Q6h2oQ6s3RQ6t<{Q6y<}Q6z=UQ7r4zQ8m6QQ8q6ZQ9T=VQ9X=[Q9Y=]Q:[8sQ:r9kQ;R:YQ;T:^Q;k;VQ;x;mQ<R;zQ<Y#QR=l=xR#YWR&|!cU!oQ'R-QS&x!c,x[']!m!s!t!u!v!wS'k!p!r^'m!x5O5W5X5Y5Z5[S,u&y'QS-a'^'_W-c'`'a'b'c[-i'd7v7w7x7y8TQ2T-OS2c-b-dW2f-e9p9q9rU2g-f-g-hS5P0}5US6_2e2hU6b2i:u:vS6c2j2kS8v6a6dS8y6e;bQ8z6fS:a8x8{Q:d8|R;Y:cR(o#uR(r#vQ!dQT-P'R-QQ#m]R'[<XT#iZ%[S#hZ%[U%z|},^U(X#e#g#jS-x(Y(ZQ.P(_Q0p+kQ2m-yU2p-}.O.QS6i2q2rR8}6j`#[W#U#X%w'x(R+h-vt#fZ|}#e#g#j%[(Y(Z(_+k-y-}.O.Q2q2r6jQ1g,^Q1z,rQ6O1rQ8l6PT=d&z+iT#_W%wS#^W%wS'y#U(RS(O#X+hS,w&z+iT-q'x-vT'P!c%xQ$ifR)n$nT)c$i)dR3j.sT*S$v*UR*[$yQ0V*}Q2t.WQ5^1PQ6n2xQ8W5aQ9Q6mQ9y8VQ:e9PQ:|9{Q;]:gQ;h:}R;q;^lpOXr!X#b%^&e&g&h&j,`,e1j1mQ&_!TR,T&[V%{|},^R0y+tR,S&YQ%tzR+f%uR+[%oT&c!U&fT&d!U&fT1l,e1m",nodeNames:" ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:363,context:kRe,nodeProps:[["group",-26,6,14,16,62,199,203,206,207,209,212,215,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[PRe],skippedNodes:[0,3,4,269],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'wp'z!b'm(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'x#S$d&j'n(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'wp'z!b'n(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'v$(n$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(`!L^'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'wp'z!b(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'wp'z!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'wp'z!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(i%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'y$)`$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'wpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'wp'z!b'u#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'wp'z!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'wp'z!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'wp'z!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'wp'z!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'z!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'z!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'z!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'z!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'z!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'z!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'wp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'wp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'wp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'wp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'wpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'wpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'wp'z!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'wp'z!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'wp'z!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'wp'z!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'wp'z!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'wp'z!b'o(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'wp'z!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'z!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'z!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'wpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'wpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'wp'z!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'}!*v!e'.r'wp'z!b$U)d(mSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(a$Ip$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'wp'z!b(R&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'wp'z!b(U!LY't&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'wp'z!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(h%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'wp'z!b'm(;d(U!LY't&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'wp'z!b'n(;d(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[RRe,MRe,2,3,4,5,6,7,8,9,10,11,12,13,IRe,new ML("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(T~~",141,326),new ML("j~RQYZXz{^~^O'q~~aP!P!Qd~iO'r~~",25,308)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:13525,ts:13527},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:312,get:n=>DRe[n]||-1},{term:328,get:n=>LRe[n]||-1},{term:67,get:n=>NRe[n]||-1}],tokenPrec:13551}),FRe=[Mr("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Mr("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Mr("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Mr("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Mr("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Mr(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Mr("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Mr(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Mr(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Mr('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Mr('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Y6=new OK,Tne=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function lb(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const URe=["FunctionDeclaration"],GRe={FunctionDeclaration:lb("function"),ClassDeclaration:lb("class"),ClassExpression:()=>!0,EnumDeclaration:lb("constant"),TypeAliasDeclaration:lb("type"),NamespaceDeclaration:lb("namespace"),VariableDefinition(n,e){n.matchContext(URe)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function wne(n,e){let t=Y6.get(e);if(t)return t;let i=[],r=!0;function o(a,l){let u=n.sliceString(a.from,a.to);i.push({label:u,type:l})}return e.cursor(Yr.IncludeAnonymous).iterate(a=>{if(r)r=!1;else if(a.name){let l=GRe[a.name];if(l&&l(a,o)||Tne.has(a.name))return!1}else if(a.to-a.from>8192){for(let l of wne(n,a.node))i.push(l);return!1}}),Y6.set(e,i),i}const Z6=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Ene=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function WRe(n){let e=Ur(n.state).resolveInner(n.pos,-1);if(Ene.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Z6.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let r=e;r;r=r.parent)Tne.has(r.name)&&(i=i.concat(wne(n.state.doc,r)));return{options:i,from:t?e.from:n.pos,validFor:Z6}}const zm=sT.define({name:"javascript",parser:BRe.configure({props:[zF.add({IfStatement:NP({except:/^\s*({|else\b)/}),TryStatement:NP({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:RCe,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:p$({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":NP({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),VF.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":tte,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),xne={test:n=>/^JSX/.test(n.name),facet:Zee({commentTokens:{block:{open:"{/*",close:"*/}"}}})},zRe=zm.configure({dialect:"ts"},"typescript"),QRe=zm.configure({dialect:"jsx",props:[GF.add(n=>n.isTop?[xne]:void 0)]}),VRe=zm.configure({dialect:"jsx ts",props:[GF.add(n=>n.isTop?[xne]:void 0)]},"typescript"),HRe="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(n=>({label:n,type:"keyword"}));function XRe(n={}){let e=n.jsx?n.typescript?VRe:QRe:n.typescript?zRe:zm;return new Jee(e,[zm.data.of({autocomplete:pte(Ene,HF(FRe.concat(HRe)))}),zm.data.of({autocomplete:WRe}),n.jsx?ZRe:[]])}function jRe(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function q6(n,e,t=n.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return n.sliceString(i.from,Math.min(i.to,t));return""}const YRe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ZRe=Lt.inputHandler.of((n,e,t,i)=>{if((YRe?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!zm.isActiveAt(n.state,e,-1))return!1;let{state:r}=n,o=r.changeByRange(a=>{var l,u;let{head:h}=a,d=Ur(r).resolveInner(h,-1),p;if(d.name=="JSXStartTag"&&(d=d.parent),i==">"&&d.name=="JSXFragmentTag")return{range:st.cursor(h+1),changes:{from:h,insert:"></>"}};if(i=="/"&&d.name=="JSXFragmentTag"){let m=d.parent,g=m==null?void 0:m.parent;if(m.from==h-1&&((l=g.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(p=q6(r.doc,g==null?void 0:g.firstChild,h))){let v=`/${p}>`;return{range:st.cursor(h+v.length),changes:{from:h,insert:v}}}}else if(i==">"){let m=jRe(d);if(m&&((u=m.lastChild)===null||u===void 0?void 0:u.name)!="JSXEndTag"&&r.sliceDoc(h,h+2)!="</"&&(p=q6(r.doc,m,h)))return{range:st.cursor(h+1),changes:{from:h,insert:`></${p}>`}}}return{range:a}});return o.changes.empty?!1:(n.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)}),qRe=()=>{const n=jt(t=>t.editingBlockId),e=jt(t=>t.blocks[n??""]);return se("div",{className:"h-full w-full",children:se(cU,{value:e==null?void 0:e.javaScript,className:"h-full w-full",extensions:[XRe()],readOnly:!0})})},JRe=()=>{const[n,e]=q.useState("simulation");return se(Fr,{children:dt("div",{className:"flex flex-col gap-2 h-full",children:[se("div",{children:dt(Mo.Group,{children:[se(Mo,{color:n=="simulation"?"blue":"gray",onClick:()=>e("simulation"),children:"Simulation"}),se(Mo,{color:n=="python"?"blue":"gray",onClick:()=>e("python"),children:"Python Code"}),se(Mo,{color:n=="javascript"?"blue":"gray",onClick:()=>e("javascript"),children:"JavaScript Code"})]})}),dt("div",{className:"flex-grow h-full",children:[n=="simulation"&&se(vRe,{}),n=="python"&&se(_Re,{}),n=="javascript"&&se(qRe,{})]})]})})},KRe=({scale:n,startTime:e,isOverlapping:t})=>{const i=jt(o=>o.editingBlockId),r=jt(o=>o.blocks[i??""]);return e===void 0||!i?se(Fr,{}):se("div",{className:Gh("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl border border-dashed",t?"border-red-500/50 bg-red-300/50 text-red-500/50":"border-green-500/50 bg-green-300/50 text-green-500/50"),style:{width:Vf*n*r.duration,left:Vf*n*e},children:t?se(Al,{icon:pve}):se(Al,{icon:UT})})},eMe=({tickNumber:n,subdivisionsPerSecond:e,scale:t})=>dt("div",{className:"absolute h-full",style:{left:`${$ne(n/e,t)}px`},children:[se("div",{className:Gh("w-[2px] bg-black self-start",n%e===0?"h-1/4":"h-1/6")}),n%e===0?se("span",{children:n/e}):null]}),tMe=({item:n,scale:e})=>{const t=jt(d=>d.blocks),i=jt(d=>d.removeTimelineItem),r=jt(d=>d.timelineState.groups),o=jt(d=>d.updateBlockInTimeline),a=jt(d=>d.timelineState.mode),l=t[n.blockId],u=OSe(({delta:[d,p]})=>{if(a!=="MOVE")return;const m=nMe(d,e),g=n.startTime+m;EN(r[n.groupId],t,g,l,n.id)||o(n.groupId,n.id,g)}),h=n.duration;return se("div",{className:Gh("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl bg-purple-400 touch-none select-none",a==="MOVE"?"cursor-move":"",a==="ERASE"?"hover:bg-red-400":""),style:{width:Vf*e*h,left:Vf*e*n.startTime},onClick:()=>a==="ERASE"&&i(n.groupId,n.id),...u(),children:se("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:l.name})})},Vf=100,J6=8,nMe=(n,e)=>n/(Vf*e),$ne=(n,e)=>n*Vf*e,EN=(n,e,t,i,r)=>t===void 0||t<0||Object.values(n.items).some(o=>{const a=o.startTime,l=o.startTime+o.duration,u=t,h=t+i.duration;return r!==void 0&&r===o.id?!1:!(l<u||h<a)}),iMe=({group:n})=>{const e=jt(m=>m.addBlockToTimeline),t=jt(m=>m.editingBlockId),i=jt(m=>m.blocks),r=jt(m=>m.timelineState.mode),o=jt(m=>m.timelineState.scale),[a,l]=q.useState(),u=q.useRef(null),h=dJ({onMouseOut:()=>l(void 0),onMouseMove:({event:{clientX:m}})=>{l(m)}}),d=m=>{var g,v;if(m!==void 0&&u.current){const y=(g=u.current.offsetParent)==null?void 0:g.offsetLeft,S=(v=u.current.parentElement)==null?void 0:v.scrollLeft,T=m-y;return t===void 0||S===void 0?void 0:(T+S)/(Vf*o)-i[t].duration/2}};return dt("div",{className:"relative h-16 rounded bg-blue-300",ref:u,onClick:({clientX:m})=>{if(t===void 0||r!=="ADD")return;const g=d(m);if(g!==void 0&&!EN(n,i,g,i[t])){var v=!1;i[t].javaScript.includes("circle")&&(v=!0),e(n.id,t,g,v)}},...h(),style:{width:`${$ne(n.duration,o)}px`},children:[[...new Array(n.duration*J6)].map((m,g)=>se(eMe,{tickNumber:g,scale:o,subdivisionsPerSecond:J6},g)),Object.values(n.items).map((m,g)=>se(tMe,{scale:o,item:m},g)),r==="ADD"&&se(KRe,{scale:o,startTime:d(a),isOverlapping:EN(n,i,d(a),i[t??""])})]})},rMe=()=>{const n=sa(e=>e.time);return se("div",{className:"min-w-1 absolute z-10 h-full w-1 bg-black",style:{left:Vf*n}})},sMe=({group:n})=>se("div",{className:"flex h-16 w-16 items-center justify-center rounded bg-green-400",children:se("div",{className:"text-center font-bold",children:n.name})}),uT=gT()(_A((n,e)=>({selectedRobotId:void 0,showRenameInput:!1,setSelectedRobotId:t=>{n({selectedRobotId:t})},openRenameInput:()=>{n({showRenameInput:!0})},closeRenameInput:()=>{n({showRenameInput:!1})}}))),oMe=()=>{const n=jt(r=>r.timelineState.groups),e=uT(r=>r.selectedRobotId),t=jt(r=>r.addRobotToGroup),i=jt(r=>r.removeRobotFromGroup);return e===void 0?se(Fr,{}):dt("div",{className:"flex flex-col gap-2",children:[dt("div",{className:"flex items-center gap-2",children:[se("h3",{className:"text-lg font-extrabold",children:"Add Group"}),se(Zz,{label:se(Al,{icon:UT}),size:"sm",arrowIcon:!1,children:Object.values(n).filter(r=>!(e in r.robots)).map(r=>se(Zz.Item,{onClick:()=>{t(r.id,e)},children:r.name},r.id))})]}),se("div",{className:"flex items-center gap-2",children:Object.values(n).filter(r=>e in r.robots).map(r=>se(V7,{color:"purple",className:"bg-purple-100",onClick:()=>i(r.id,e),children:n[r.id].name},r.id))})]})},aMe=({robotId:n})=>{const e=jt(a=>a.robots[n]),t=jt(a=>a.saveRobot),[i,r]=q.useState([e.startingPosition[0].toString(),e.startingPosition[1].toString(),e.startingPosition[2].toString()]),o=a=>{a.preventDefault();const l=parseFloat(i[0]),u=parseFloat(i[1]),h=parseFloat(i[2]);isNaN(l)||isNaN(u)||isNaN(h)||t(n,{startingPosition:[l,u,h]})};return dt("div",{children:[se("h3",{className:"ml-3 mt-3 text-lg font-extrabold",children:"Starting Position:"}),se("div",{className:"flex",children:dt("form",{onSubmit:o,className:"flex flex-col gap-2",children:[dt("div",{className:Gh("flex flex-col items-center",isNaN(parseFloat(i[0]))?"border-red-500":""),children:[se(xf,{id:"x-coordinate",value:i[0],onChange:a=>r(([l,u,h])=>[a.target.value,u,h])}),se(e$,{htmlFor:"x-coordinate",className:isNaN(parseFloat(i[0]))?"text-red-500":"",children:"x"})]}),dt("div",{className:Gh("flex flex-col items-center",isNaN(parseFloat(i[0]))?"text-red-500":""),children:[se(xf,{id:"y-coordinate",value:i[1],onChange:a=>r(([l,u,h])=>[l,a.target.value,h])}),se(e$,{htmlFor:"y-coordinate",className:isNaN(parseFloat(i[1]))?"text-red-500":"",children:"y"})]}),dt("div",{className:Gh("flex flex-col items-center",isNaN(parseFloat(i[2]))?"border-red-500":""),children:[se(xf,{id:"z-coordinate",value:i[2],onChange:a=>r(([l,u,h])=>[l,u,a.target.value])}),se(e$,{htmlFor:"z-coordinate",className:isNaN(parseFloat(i[2]))?"text-red-500":"",children:"z"})]}),se(Vs,{className:"w-full",icon:dq,text:"Update Position",onClick:o,type:"submit"})]})})]})},lMe=()=>{const n=jt(a=>a.robots),e=jt(a=>a.saveRobot),t=jt(a=>a.deleteRobot),i=uT(a=>a.selectedRobotId),r=uT(a=>a.setSelectedRobotId);if(q.useEffect(()=>{i===void 0&&Object.values(n).length!==0&&r(Object.keys(n)[0])},[i,n]),i===void 0)return se(Fr,{});const o=n[i];return o===void 0?se(Fr,{}):dt("div",{className:"relative flex basis-4/5 flex-col p-4",children:[se(x3,{text:o.name,className:"text-4xl font-extrabold",updateText:a=>a!==""?e(i,{name:a}):e(i,{name:"Unnamed Robot"})}),dt("div",{className:"flex flex-col gap-10",children:[se(aMe,{robotId:i}),se(oMe,{})]},i),se(Vs,{className:"absolute bottom-0",onClick:()=>{const a=i;r(void 0),t(a)},text:"Delete Robot",icon:fq,color:"failure"})]})},cMe=()=>{const n=jt(r=>r.robots),e=jt(r=>r.createRobot),t=uT(r=>r.setSelectedRobotId),i=uT(r=>r.closeRenameInput);return dt("div",{className:"flex flex-grow-0 basis-[10%] flex-col items-center gap-2 overflow-y-auto p-4",children:[se("h2",{className:"text-lg font-extrabold",children:"Robots"}),Object.values(n).map(r=>se("button",{className:"flex h-8 w-full cursor-pointer items-center justify-center rounded-lg border-2 border-black px-2 text-center",onClick:()=>{i(),t(r.id)},children:se("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:r.name})},r.id)),se(Vs,{icon:UT,text:"",onClick:()=>{const r=e();t(r)}})]})},uMe=()=>dt("div",{className:"flex h-full",children:[se(cMe,{}),se(lMe,{})]}),hMe=()=>{const n=zh(t=>t.robotManagerModalOpen),e=zh(t=>t.toggleRobotManager);return dt(Lr,{show:n,onClose:e,className:"!w-full",size:"w-full h-5/6",children:[se(Lr.Header,{children:"Robot Manager"}),se(Lr.Body,{className:"h-[80vh]",children:se(uMe,{})}),se(Lr.Footer,{})]})},dMe=()=>{const n=jt(t=>t.timelineState.mode),e=jt(t=>t.setTimelineMode);return se("div",{className:"flex gap-3 pt-2 pl-3",children:dt(Mo.Group,{children:[se(Mo,{color:n==="ADD"?"info":"gray",onClick:()=>e("ADD"),children:se(Al,{icon:UT})}),se(Mo,{color:n==="MOVE"?"info":"gray",onClick:()=>e("MOVE"),children:se(Al,{icon:ive})}),se(Mo,{color:n==="ERASE"?"info":"gray",onClick:()=>e("ERASE"),children:se(Al,{icon:lve})})]})})},fMe=()=>{const n=sa(o=>o.status),e=sa(o=>o.play),t=sa(o=>o.halt),i=sa(o=>o.pause),r=sa(o=>o.resume);return dt(Fr,{children:[n==="RUNNING"&&se(Vs,{icon:nve,onClick:i,text:"Pause Sim",color:"gray"}),n==="PAUSED"&&se(Vs,{icon:Jz,onClick:r,text:"Resume Sim",color:"success"}),n==="STOPPED"&&se(Vs,{icon:Jz,onClick:e,text:"Run Sim",color:"success"}),n!=="STOPPED"&&se(Vs,{icon:sve,onClick:t,text:"Stop Sim",color:"failure"})]})},pMe=()=>{const n=jt(i=>i.timelineState),e=Object.values(n.groups),t=zh(i=>i.toggleRobotManager);return dt("div",{className:"flex h-full w-full flex-col gap-2 rounded bg-blue-100",children:[dt("div",{className:"flex",children:[se(dMe,{}),se("div",{className:"flex flex-grow"}),dt("div",{className:"flex gap-3 pt-2 pr-3",children:[se(fMe,{}),se(Vs,{icon:hve,onClick:t,text:"Manage Robots"}),se(hMe,{})]})]}),se("div",{className:"overflow-y-auto",children:dt("div",{className:"flex flex-shrink-0 gap-2",children:[se("div",{className:"ml-2 flex h-full flex-col gap-2",children:e.map(i=>se(sMe,{group:i},i.id))}),dt("div",{className:"relative flex h-full w-full flex-col gap-2 overflow-x-auto",children:[e.map(i=>se(iMe,{group:i},i.id)),se(rMe,{})]})]})})]})};function mMe(){return se(Fr,{children:dt("div",{className:"flex h-screen w-screen flex-col gap-1",children:[se(Mwe,{}),se("div",{className:"flex flex-grow",children:dt(Bx,{direction:"vertical",children:[se(tm,{defaultSize:60,onResize:()=>window.dispatchEvent(new Event("resize")),children:dt(Bx,{direction:"horizontal",children:[se(tm,{defaultSize:50,onResize:()=>window.dispatchEvent(new Event("resize")),children:se(Fge,{})}),se(Fx,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),se(tm,{defaultSize:50,children:se(JRe,{})})]})}),se(Fx,{className:"h-2 bg-blue-50 opacity-30 shadow-lg"}),se(tm,{defaultSize:40,children:dt(Bx,{direction:"horizontal",children:[se(tm,{defaultSize:20,children:se(mve,{})}),se(Fx,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),se(tm,{children:se(pMe,{})})]})})]})})]})})}jP.createRoot(document.getElementById("root")).render(se(Cn.StrictMode,{children:se(mMe,{})}));
