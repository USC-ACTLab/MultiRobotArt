var __defProp2=Object.defineProperty,__defNormalProp2=(e,t,n)=>t in e?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp2(e,"symbol"!=typeof t?t+"":t,n),n),_a2,_b,_c;function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function e(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const t=function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={},l$9=Symbol.for("react.element"),n$9=Symbol.for("react.portal"),p$a=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$a=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$9=Symbol.for("react.context"),v$8=Symbol.for("react.forward_ref"),w$7=Symbol.for("react.suspense"),x$6=Symbol.for("react.memo"),y$7=Symbol.for("react.lazy"),z$6=Symbol.iterator;function A$5(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z$6&&e[z$6]||e["@@iterator"])?e:null}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$7={};function E$7(e,t,n){this.props=e,this.context=t,this.refs=D$7,this.updater=n||B$3}function F$2(){}function G$2(e,t,n){this.props=e,this.context=t,this.refs=D$7,this.updater=n||B$3}E$7.prototype.isReactComponent={},E$7.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E$7.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},F$2.prototype=E$7.prototype;var H$6=G$2.prototype=new F$2;H$6.constructor=G$2,C$5(H$6,E$7.prototype),H$6.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)J$2.call(t,r)&&!L$4.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:l$9,type:e,key:o,ref:s,props:i,_owner:K$2.current}}function N$4(e,t){return{$$typeof:l$9,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function O$5(e){return"object"==typeof e&&null!==e&&e.$$typeof===l$9}function escape$1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}var P$5=/\/+/g;function Q$5(e,t){return"object"==typeof e&&null!==e&&null!=e.key?escape$1(""+e.key):t.toString(36)}function R$4(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case l$9:case n$9:s=!0}}if(s)return i=i(s=e),e=""===r?"."+Q$5(s,0):r,I$5(i)?(n="",null!=e&&(n=e.replace(P$5,"$&/")+"/"),R$4(i,t,n,"",(function(e){return e}))):null!=i&&(O$5(i)&&(i=N$4(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(P$5,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=""===r?".":r+":",I$5(e))for(var a=0;a<e.length;a++){var l=r+Q$5(o=e[a],a);s+=R$4(o,t,n,l,i)}else if("function"==typeof(l=A$5(e)))for(e=l.call(e),a=0;!(o=e.next()).done;)s+=R$4(o=o.value,t,n,l=r+Q$5(o,a++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function S$4(e,t,n){if(null==e)return e;var r=[],i=0;return R$4(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function T$4(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var U$3={current:null},V$4={transition:null},W$5={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$2};react_production_min.Children={map:S$4,forEach:function(e,t,n){S$4(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S$4(e,(function(){t++})),t},toArray:function(e){return S$4(e,(function(e){return e}))||[]},only:function(e){if(!O$5(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},react_production_min.Component=E$7,react_production_min.Fragment=p$a,react_production_min.Profiler=r$a,react_production_min.PureComponent=G$2,react_production_min.StrictMode=q$5,react_production_min.Suspense=w$7,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$5,react_production_min.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=C$5({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=K$2.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)J$2.call(t,l)&&!L$4.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==a?a[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:l$9,type:e.type,key:i,ref:o,props:r,_owner:s}},react_production_min.createContext=function(e){return(e={$$typeof:u$9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:t$6,_context:e},e.Consumer=e},react_production_min.createElement=M$3,react_production_min.createFactory=function(e){var t=M$3.bind(null,e);return t.type=e,t},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(e){return{$$typeof:v$8,render:e}},react_production_min.isValidElement=O$5,react_production_min.lazy=function(e){return{$$typeof:y$7,_payload:{_status:-1,_result:e},_init:T$4}},react_production_min.memo=function(e,t){return{$$typeof:x$6,type:e,compare:void 0===t?null:t}},react_production_min.startTransition=function(e){var t=V$4.transition;V$4.transition={};try{e()}finally{V$4.transition=t}},react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production_min.useCallback=function(e,t){return U$3.current.useCallback(e,t)},react_production_min.useContext=function(e){return U$3.current.useContext(e)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(e){return U$3.current.useDeferredValue(e)},react_production_min.useEffect=function(e,t){return U$3.current.useEffect(e,t)},react_production_min.useId=function(){return U$3.current.useId()},react_production_min.useImperativeHandle=function(e,t,n){return U$3.current.useImperativeHandle(e,t,n)},react_production_min.useInsertionEffect=function(e,t){return U$3.current.useInsertionEffect(e,t)},react_production_min.useLayoutEffect=function(e,t){return U$3.current.useLayoutEffect(e,t)},react_production_min.useMemo=function(e,t){return U$3.current.useMemo(e,t)},react_production_min.useReducer=function(e,t,n){return U$3.current.useReducer(e,t,n)},react_production_min.useRef=function(e){return U$3.current.useRef(e)},react_production_min.useState=function(e){return U$3.current.useState(e)},react_production_min.useSyncExternalStore=function(e,t,n){return U$3.current.useSyncExternalStore(e,t,n)},react_production_min.useTransition=function(){return U$3.current.useTransition()},react_production_min.version="18.2.0",react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var f$7=reactExports,k$5=Symbol.for("react.element"),l$8=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$8=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$9={key:!0,ref:!0,__self:!0,__source:!0};function q$4(e,t,n){var r,i={},o=null,s=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(s=t.ref),t)m$7.call(t,r)&&!p$9.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:k$5,type:e,key:o,ref:s,props:i,_owner:n$8.current}}reactJsxRuntime_production_min.Fragment=l$8,reactJsxRuntime_production_min.jsx=q$4,reactJsxRuntime_production_min.jsxs=q$4,jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function y(e){if(m=!1,v(e),!f)if(null!==n(l))f=!0,M(O);else{var t=n(c);null!==t&&$(y,t.startTime-e)}}function O(t,i){f=!1,m&&(m=!1,_(E),E=-1),p=!0;var o=d;try{for(v(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!A());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&r(l),v(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var g=n(c);null!==g&&$(y,g.startTime-i),u=!1}return u}finally{h=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,x=null,E=-1,w=5,C=-1;function A(){return!(e.unstable_now()-C<w)}function k(){if(null!==x){var t=e.unstable_now();C=t;var n=!0;try{n=x(!0,t)}finally{n?S():(T=!1,x=null)}}else T=!1}if("function"==typeof b)S=function(){b(k)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=k,S=function(){I.postMessage(null)}}else S=function(){g(k,0)};function M(e){x=e,T||(T=!0,S())}function $(t,n){E=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,M(O))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,o){var s=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(m?(_(E),E=-1):m=!0,$(y,o-s))):(r.sortIndex=a,t(l,r),f||p||(f=!0,M(O))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(scheduler_production_min$2),scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports,aa=reactExports,ca=schedulerExports$1;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function p$8(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,t){ha(e,t),ha(e+"Capture",t)}function ha(e,t){for(ea[e]=t,e=0;e<t.length;e++)da.add(t[e])}var ia=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return!!ja.call(ma,e)||!ja.call(la,e)&&(ka.test(e)?ma[e]=!0:(la[e]=!0,!1))}function pa(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function qa(e,t,n,r){if(null==t||pa(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function v$7(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var z$5={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){z$5[e]=new v$7(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];z$5[t]=new v$7(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){z$5[e]=new v$7(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){z$5[e]=new v$7(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){z$5[e]=new v$7(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){z$5[e]=new v$7(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){z$5[e]=new v$7(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){z$5[e]=new v$7(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){z$5[e]=new v$7(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}function ta(e,t,n,r){var i=z$5.hasOwnProperty(t)?z$5[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(qa(t,n,i,r)&&(n=null),r||null===i?oa(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ra,sa);z$5[t]=new v$7(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ra,sa);z$5[t]=new v$7(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ra,sa);z$5[t]=new v$7(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){z$5[e]=new v$7(e,1,!1,e.toLowerCase(),null,!1,!1)})),z$5.xlinkHref=new v$7("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){z$5[e]=new v$7(e,1,!1,e.toLowerCase(),null,!0,!0)}));var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ja&&e[Ja]||e["@@iterator"])?e:null}var A$4=Object.assign,La;function Ma(e){if(void 0===La)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);La=t&&t[1]||""}return"\n"+La+e}var Na=!1;function Oa(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1);case 11:return e=Oa(e.type.render,!1);case 1:return e=Oa(e.type,!0);default:return""}}function Qa(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return null!==(t=e.displayName||null)?t:Qa(e.type)||"Memo";case Ha:t=e._payload,e=e._init;try{return Qa(e(t))}catch(n){}}return null}function Ra(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(t);case 8:return t===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ta(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ua(e){var t=Ta(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ta(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Xa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ya(e,t){var n=t.checked;return A$4({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Za(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Sa(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ab(e,t){null!=(t=t.checked)&&ta(e,"checked",t,!1)}function bb(e,t){ab(e,t);var n=Sa(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?cb(e,t.type,n):t.hasOwnProperty("defaultValue")&&cb(e,t.type,Sa(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function db(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function cb(e,t,n){"number"===t&&Xa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var eb=Array.isArray;function fb(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Sa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function gb(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(p$8(91));return A$4({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(p$8(92));if(eb(n)){if(1<n.length)throw Error(p$8(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Sa(n)}}function ib(e,t){var n=Sa(t.value),r=Sa(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function jb(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?kb(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var mb,nb=(a2=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((mb=mb||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return a2(e,t)}))}:a2),a2;function ob(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];function rb(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pb.hasOwnProperty(e)&&pb[e]?(""+t).trim():t+"px"}function sb(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=rb(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pb).forEach((function(e){qb.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pb[t]=pb[e]}))}));var tb=A$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,t){if(t){if(tb[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(p$8(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(p$8(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(p$8(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(p$8(62))}}function vb(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if("function"!=typeof yb)throw Error(p$8(280));var t=e.stateNode;t&&(t=Db(t),yb(e.stateNode,e.type,t))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,t=Ab;if(Ab=zb=null,Bb(e),t)for(e=0;e<t.length;e++)Bb(t[e])}}function Gb(e,t){return e(t)}function Hb(){}var Ib=!1;function Jb(e,t,n){if(Ib)return e(t,n);Ib=!0;try{return Gb(e,t,n)}finally{Ib=!1,(null!==zb||null!==Ab)&&(Hb(),Fb())}}function Kb(e,t){var n=e.stateNode;if(null===n)return null;var r=Db(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(p$8(231,t,typeof n));return n}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch(a2){Lb=!1}function Nb(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,t,n,r,i,o,s,a,l){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,t,n,r,i,o,s,a,l){if(Tb.apply(this,arguments),Ob){if(!Ob)throw Error(p$8(198));var c=Pb;Ob=!1,Pb=null,Qb||(Qb=!0,Rb=c)}}function Vb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Wb(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p$8(188))}function Yb(e){var t=e.alternate;if(!t){if(null===(t=Vb(e)))throw Error(p$8(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xb(i),e;if(o===r)return Xb(i),t;o=o.sibling}throw Error(p$8(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(p$8(189))}}if(n.alternate!==r)throw Error(p$8(190))}if(3!==n.tag)throw Error(p$8(188));return n.stateNode.current===n?e:t}function Zb(e){return null!==(e=Yb(e))?$b(e):null}function $b(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$b(e);if(null!==t)return t;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&"function"==typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,e,void 0,128==(128&e.current.flags))}catch(t){}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return 0===(e>>>=0)?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=tc(a):0!==(o&=s)&&(r=tc(o))}else 0!==(s=n&~i)?r=tc(s):0!==o&&(r=tc(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-oc(t)),r|=e[n],t&=~i;return r}function vc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function wc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-oc(o),a=1<<s,l=i[s];-1===l?0!=(a&n)&&0==(a&r)||(i[s]=vc(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function xc(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yc(){var e=rc;return 0==(4194240&(rc<<=1))&&(rc=64),e}function zc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ac(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-oc(t)]=n}function Bc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-oc(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Cc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-oc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var C$4=0;function Dc(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,t){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(t.pointerId)}}function Tc(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Cb(t))&&Fc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Uc(e,t,n,r,i){switch(t){case"focusin":return Lc=Tc(Lc,e,t,n,r,i),!0;case"dragenter":return Mc=Tc(Mc,e,t,n,r,i),!0;case"mouseover":return Nc=Tc(Nc,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oc.set(o,Tc(Oc.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pc.set(o,Tc(Pc.get(o)||null,e,t,n,r,i)),!0}return!1}function Vc(e){var t=Wc(e.target);if(null!==t){var n=Vb(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Wb(n)))return e.blockedOn=t,void Ic(e.priority,(function(){Gc(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Xc(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Cb(n))&&Fc(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);wb=r,n.target.dispatchEvent(r),wb=null,t.shift()}return!0}function Zc(e,t,n){Xc(e)&&n.delete(t)}function $c(){Jc=!1,null!==Lc&&Xc(Lc)&&(Lc=null),null!==Mc&&Xc(Mc)&&(Mc=null),null!==Nc&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,t){e.blockedOn===t&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function t(t){return ad(t,e)}if(0<Kc.length){ad(Kc[0],e);for(var n=1;n<Kc.length;n++){var r=Kc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Lc&&ad(Lc,e),null!==Mc&&ad(Mc,e),null!==Nc&&ad(Nc,e),Oc.forEach(t),Pc.forEach(t),n=0;n<Qc.length;n++)(r=Qc[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Qc.length&&null===(n=Qc[0]).blockedOn;)Vc(n),null===n.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,t,n,r){var i=C$4,o=cd.transition;cd.transition=null;try{C$4=1,fd(e,t,n,r)}finally{C$4=i,cd.transition=o}}function gd(e,t,n,r){var i=C$4,o=cd.transition;cd.transition=null;try{C$4=4,fd(e,t,n,r)}finally{C$4=i,cd.transition=o}}function fd(e,t,n,r){if(dd){var i=Yc(e,t,n,r);if(null===i)hd(e,t,r,id$2,n),Sc(e,r);else if(Uc(i,e,t,n,r))r.stopPropagation();else if(Sc(e,r),4&t&&-1<Rc.indexOf(e)){for(;null!==i;){var o=Cb(i);if(null!==o&&Ec(o),null===(o=Yc(e,t,n,r))&&hd(e,t,r,id$2,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else hd(e,t,r,null,n)}}var id$2=null;function Yc(e,t,n,r){if(id$2=null,null!==(e=Wc(e=xb(r))))if(null===(t=Vb(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Wb(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return id$2=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,t,n=ld,r=n.length,i="value"in kd?kd.value:kd.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return md=i.slice(e,1<t?1-t:void 0)}function od(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?pd:qd,this.isPropagationStopped=qd,this}return A$4(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),t}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$4({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$4({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&"mousemove"===e.type?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A$4({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$4({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$4({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$4({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$4({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Od[e])&&!!t[e]}function zd(){return Pd}var Qd=A$4({},ud,{key:function(e){if(e.key){var t=Md[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=od(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return"keypress"===e.type?od(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?od(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rd=rd(Qd),Sd=A$4({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$4({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$4({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$4({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$2=!1;function ge$1(e,t){switch(e){case"keyup":return-1!==$d.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ie$3=!1;function je$1(e,t){switch(e){case"compositionend":return he$2(t);case"keypress":return 32!==t.which?null:(fe$2=!0,ee$1);case"textInput":return(e=t.data)===ee$1&&fe$2?null:e;default:return null}}function ke$1(e,t){if(ie$3)return"compositionend"===e||!ae$2&&ge$1(e,t)?(e=nd(),md=ld=kd=null,ie$3=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return de$2&&"ko"!==t.locale?null:t.data}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!le$2[e.type]:"textarea"===t}function ne$3(e,t,n,r){Eb(r),0<(t=oe$2(t,"onChange")).length&&(n=new td("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pe$1=null,qe$2=null;function re$1(e){se$2(e,0)}function te$2(e){if(Wa(ue$2(e)))return e}function ve$1(e,t){if("change"===e)return t}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2="function"==typeof ze$2.oninput}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$2=pe$1=null)}function Be$1(e){if("value"===e.propertyName&&te$2(qe$2)){var t=[];ne$3(t,qe$2,e,xb(e)),Jb(re$1,t)}}function Ce$2(e,t,n){"focusin"===e?(Ae$1(),qe$2=n,(pe$1=t).attachEvent("onpropertychange",Be$1)):"focusout"===e&&Ae$1()}function De$2(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return te$2(qe$2)}function Ee$2(e,t){if("click"===e)return te$2(t)}function Fe(e,t){if("input"===e||"change"===e)return te$2(t)}function Ge$2(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var He$2="function"==typeof Object.is?Object.is:Ge$2;function Ie$1(e,t){if(He$2(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ja.call(t,i)||!He$2(e[i],t[i]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke$2(e,t){var n,r=Je(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Je(r)}}function Le$3(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Le$3(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Me$1(){for(var e=window,t=Xa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Xa((e=t.contentWindow).document)}return t}function Ne$2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Oe$1(e){var t=Me$1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Le$3(n.ownerDocument.documentElement,n)){if(null!==r&&Ne$2(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Ke$2(n,o);var s=Ke$2(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te$1=!1;function Ue$2(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Te$1||null==Qe||Qe!==Xa(r)||("selectionStart"in(r=Qe)&&Ne$2(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Se&&Ie$1(Se,r)||(Se=r,0<(r=oe$2(Re$1,"onSelect")).length&&(t=new td("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qe)))}function Ve$1(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};function Ze(e){if(Xe[e])return Xe[e];if(!We$1[e])return e;var t,n=We$1[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ye)return Xe[e]=n[t];return e}ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,t){df.set(e,t),fa(t,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd"),ff(af,"onAnimationIteration"),ff(bf,"onAnimationStart"),ff("dblclick","onDoubleClick"),ff("focusin","onFocus"),ff("focusout","onBlur"),ff(cf,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ub(r,t,void 0,e),e.currentTarget=null}function se$2(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;nf(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;nf(i,a,c),o=l}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D$6(e,t){var n=t[of];void 0===n&&(n=t[of]=new Set);var r=e+"__bubble";n.has(r)||(pf(t,e,2,!1),n.add(r))}function qf(e,t,n){var r=0;t&&(r|=4),pf(n,e,r,t)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach((function(t){"selectionchange"!==t&&(mf.has(t)||qf(t,!1,e),qf(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[rf]||(t[rf]=!0,qf("selectionchange",!1,t))}}function pf(e,t,n,r){switch(jd(t)){case 1:var i=ed;break;case 4:i=gd;break;default:i=fd}n=i.bind(null,t,n,e),i=void 0,!Lb||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function hd(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Wc(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Jb((function(){var r=o,i=xb(n),s=[];e:{var a=df.get(e);if(void 0!==a){var l=td,c=e;switch(e){case"keypress":if(0===od(n))break e;case"keydown":case"keyup":l=Rd;break;case"focusin":c="focus",l=Fd;break;case"focusout":c="blur",l=Fd;break;case"beforeblur":case"afterblur":l=Fd;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Vd;break;case $e$1:case af:case bf:l=Hd;break;case cf:l=Xd;break;case"scroll":l=vd;break;case"wheel":l=Zd;break;case"copy":case"cut":case"paste":l=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Td}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Kb(f,d))&&u.push(tf(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===wb||!(c=n.relatedTarget||n.fromElement)||!Wc(c)&&!c[uf])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Wc(c):null)&&(c!==(h=Vb(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=Bd,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Td,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:ue$2(l),p=null==c?a:ue$2(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,Wc(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=vf(p))f++;for(p=0,m=d;m;m=vf(m))p++;for(;0<f-p;)u=vf(u),f--;for(;0<p-f;)d=vf(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=vf(u),d=vf(d)}u=null}else u=null;null!==l&&wf(s,a,l,u,!1),null!==c&&null!==h&&wf(s,h,c,u,!0)}if("select"===(l=(a=r?ue$2(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=ve$1;else if(me$2(a))if(we$2)g=Fe;else{g=De$2;var _=Ce$2}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=Ee$2);switch(g&&(g=g(e,r))?ne$3(s,g,n,i):(_&&_(e,a,r),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&cb(a,"number",a.value)),_=r?ue$2(r):window,e){case"focusin":(me$2(_)||"true"===_.contentEditable)&&(Qe=_,Re$1=r,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(s,n,i);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(s,n,i)}var b;if(ae$2)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ie$3?ge$1(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(de$2&&"ko"!==n.locale&&(ie$3||"onCompositionStart"!==v?"onCompositionEnd"===v&&ie$3&&(b=nd()):(ld="value"in(kd=i)?kd.value:kd.textContent,ie$3=!0)),0<(_=oe$2(r,v)).length&&(v=new Ld(v,e,null,n,i),s.push({event:v,listeners:_}),b?v.data=b:null!==(b=he$2(n))&&(v.data=b))),(b=ce$1?je$1(e,n):ke$1(e,n))&&(0<(r=oe$2(r,"onBeforeInput")).length&&(i=new Ld("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}se$2(s,t)}))}function tf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function oe$2(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Kb(e,n))&&r.unshift(tf(e,o,i)),null!=(o=Kb(e,t))&&r.push(tf(e,o,i))),e=e.return}return r}function vf(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function wf(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Kb(n,o))&&s.unshift(tf(n,l,a)):i||null!=(l=Kb(n,o))&&s.push(tf(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return("string"==typeof e?e:""+e).replace(xf,"\n").replace(yf,"")}function Af(e,t,n){if(t=zf(t),zf(e)!==t&&n)throw Error(p$8(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ff="function"==typeof setTimeout?setTimeout:void 0,Gf="function"==typeof clearTimeout?clearTimeout:void 0,Hf="function"==typeof Promise?Promise:void 0,Jf="function"==typeof queueMicrotask?queueMicrotask:void 0!==Hf?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout((function(){throw e}))}function Kf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void bd(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);bd(t)}function Lf(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Mf(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var t=e[Of];if(t)return t;for(var n=e.parentNode;n;){if(t=n[uf]||n[Of]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Mf(e);null!==e;){if(n=e[Of])return n;e=Mf(e)}return t}n=(e=n).parentNode}return null}function Cb(e){return!(e=e[Of]||e[uf])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ue$2(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(p$8(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E$6(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(e,t){Tf++,Sf[Tf]=e.current,e.current=t}var Vf={},H$5=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,t){var n=e.type.contextTypes;if(!n)return Vf;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(e){return null!=(e=e.childContextTypes)}function $f(){E$6(Wf),E$6(H$5)}function ag(e,t,n){if(H$5.current!==Vf)throw Error(p$8(168));G$1(H$5,t),G$1(Wf,n)}function bg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(p$8(108,Ra(e)||"Unknown",i));return A$4({},n,r)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$5.current,G$1(H$5,e),G$1(Wf,Wf.current),!0}function dg(e,t,n){var r=e.stateNode;if(!r)throw Error(p$8(169));n?(e=bg(e,t,Xf),r.__reactInternalMemoizedMergedChildContext=e,E$6(Wf),E$6(H$5),G$1(H$5,e)):E$6(Wf),G$1(Wf,n)}var eg=null,fg=!1,gg=!1;function hg(e){null===eg?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&null!==eg){gg=!0;var e=0,t=C$4;try{var n=eg;for(C$4=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}eg=null,fg=!1}catch(i){throw null!==eg&&(eg=eg.slice(e+1)),ac(fc,jg),i}finally{C$4=t,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,t){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=t}function ug(e,t,n){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var r=rg;e=sg;var i=32-oc(r)-1;r&=~(1<<i),n+=1;var o=32-oc(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,rg=1<<32-oc(t)+i|n<<i|r,sg=o+e}else rg=1<<o|n<<i|r,sg=e}function vg(e){null!==e.return&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(e,t){var n=Bg(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Cg(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,xg=e,yg=Lf(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,xg=e,yg=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qg?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bg(18,null,null,0)).stateNode=t,n.return=e,e.child=n,xg=e,yg=null,!0);default:return!1}}function Dg(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Eg(e){if(I$4){var t=yg;if(t){var n=t;if(!Cg(e,t)){if(Dg(e))throw Error(p$8(418));t=Lf(n.nextSibling);var r=xg;t&&Cg(e,t)?Ag(r,n):(e.flags=-4097&e.flags|2,I$4=!1,xg=e)}}else{if(Dg(e))throw Error(p$8(418));e.flags=-4097&e.flags|2,I$4=!1,xg=e}}}function Fg(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I$4)return Fg(e),I$4=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Ef(e.type,e.memoizedProps)),t&&(t=yg)){if(Dg(e))throw Hg(),Error(p$8(418));for(;t;)Ag(e,t),t=Lf(t.nextSibling)}if(Fg(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(p$8(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){yg=Lf(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(e){null===zg?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,t){if(e&&e.defaultProps){for(var n in t=A$4({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(e){var t=Mg.current;E$6(Mg),e._currentValue=t}function Sg(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tg(e,t){Ng=e,Pg=Og=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ug=!0),e.firstContext=null)}function Vg(e){var t=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:t,next:null},null===Og){if(null===Ng)throw Error(p$8(308));Og=e,Ng.dependencies={lanes:0,firstContext:e}}else Og=Og.next=e;return t}var Wg=null;function Xg(e){null===Wg?Wg=[e]:Wg.push(e)}function Yg(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Xg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Zg(e,r)}function Zg(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var $g=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dh(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&K$1)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Zg(e,n)}return null===(i=r.interleaved)?(t.next=t,Xg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Zg(e,n)}function eh(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Cc(e,n)}}function fh(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gh(e,t,n,r){var i=e.updateQueue;$g=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,h,d):f))break e;h=A$4({},h,d);break e;case 2:$g=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);hh|=s,e.lanes=s,e.memoizedState=h}}function ih(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(p$8(191,i));i.call(r)}}}var jh=(new aa.Component).refs;function kh(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:A$4({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nh={isMounted:function(e){return!!(e=e._reactInternals)&&Vb(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=L$3(),i=lh(e),o=ch(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=dh(e,o,i))&&(mh(t,e,i,r),eh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=L$3(),i=lh(e),o=ch(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=dh(e,o,i))&&(mh(t,e,i,r),eh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=L$3(),r=lh(e),i=ch(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=dh(e,i,r))&&(mh(t,e,r,n),eh(t,e,r))}};function oh(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Ie$1(n,r)||!Ie$1(i,o))}function ph(e,t,n){var r=!1,i=Vf,o=t.contextType;return"object"==typeof o&&null!==o?o=Vg(o):(i=Zf(t)?Xf:H$5.current,o=(r=null!=(r=t.contextTypes))?Yf(e,i):Vf),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nh,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qh(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nh.enqueueReplaceState(t,t.state,null)}function rh(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jh,ah(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Vg(o):(o=Zf(t)?Xf:H$5.current,i.context=Yf(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(kh(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nh.enqueueReplaceState(i,i.state,null),gh(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function sh(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(p$8(309));var r=n.stateNode}if(!r)throw Error(p$8(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===jh&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(p$8(284));if(!n._owner)throw Error(p$8(290,e))}return e}function th(e,t){throw e=Object.prototype.toString.call(t),Error(p$8(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uh(e){return(0,e._init)(e._payload)}function vh(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=wh(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=xh(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===ya?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Ha&&uh(o)===t.type)?((r=i(t,n.props)).ref=sh(e,t,n),r.return=e,r):((r=yh(n.type,n.key,n.props,null,e.mode,r)).ref=sh(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zh(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Ah(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=xh(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case va:return(n=yh(t.type,t.key,t.props,null,e.mode,n)).ref=sh(e,null,t),n.return=e,n;case wa:return(t=zh(t,e.mode,n)).return=e,t;case Ha:return h(e,(0,t._init)(t._payload),n)}if(eb(t)||Ka(t))return(t=Ah(t,e.mode,n,null)).return=e,t;th(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case va:return n.key===i?l(e,t,n,r):null;case wa:return n.key===i?c(e,t,n,r):null;case Ha:return d(e,t,(i=n._init)(n._payload),r)}if(eb(n)||Ka(n))return null!==i?null:u(e,t,n,r,null);th(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case va:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case wa:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Ha:return p(e,t,n,(0,r._init)(r._payload),i)}if(eb(r)||Ka(r))return u(t,e=e.get(n)||null,r,i,null);th(t,r)}return null}return function a(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===ya&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case va:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===ya){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ha&&uh(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=sh(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===ya?((c=Ah(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=yh(u.type,u.key,u.props,null,l.mode,f)).ref=sh(l,c,u),f.return=l,l=f)}return s(l);case wa:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=zh(u,l.mode,f)).return=l,l=c}return s(l);case Ha:return a(l,c,(g=u._init)(u._payload),f)}if(eb(u))return function _(i,s,a,l){for(var c=null,u=null,f=s,m=s=0,g=null;null!==f&&m<a.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var _=d(i,f,a[m],l);if(null===_){null===f&&(f=g);break}e&&f&&null===_.alternate&&t(i,f),s=o(_,s,m),null===u?c=_:u.sibling=_,u=_,f=g}if(m===a.length)return n(i,f),I$4&&tg(i,m),c;if(null===f){for(;m<a.length;m++)null!==(f=h(i,a[m],l))&&(s=o(f,s,m),null===u?c=f:u.sibling=f,u=f);return I$4&&tg(i,m),c}for(f=r(i,f);m<a.length;m++)null!==(g=p(f,i,m,a[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach((function(e){return t(i,e)})),I$4&&tg(i,m),c}(l,c,u,f);if(Ka(u))return function b(i,s,a,l){var c=Ka(a);if("function"!=typeof c)throw Error(p$8(150));if(null==(a=c.call(a)))throw Error(p$8(151));for(var u=c=null,f=s,m=s=0,g=null,_=a.next();null!==f&&!_.done;m++,_=a.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=d(i,f,_.value,l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=o(b,s,m),null===u?c=b:u.sibling=b,u=b,f=g}if(_.done)return n(i,f),I$4&&tg(i,m),c;if(null===f){for(;!_.done;m++,_=a.next())null!==(_=h(i,_.value,l))&&(s=o(_,s,m),null===u?c=_:u.sibling=_,u=_);return I$4&&tg(i,m),c}for(f=r(i,f);!_.done;m++,_=a.next())null!==(_=p(f,i,m,_.value,l))&&(e&&null!==_.alternate&&f.delete(null===_.key?m:_.key),s=o(_,s,m),null===u?c=_:u.sibling=_,u=_);return e&&f.forEach((function(e){return t(i,e)})),I$4&&tg(i,m),c}(l,c,u,f);th(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=xh(u,l.mode,f)).return=l,l=c),s(l)):n(l,c)}}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(e){if(e===Dh)throw Error(p$8(174));return e}function Ih(e,t){switch(G$1(Gh,t),G$1(Fh,e),G$1(Eh,Dh),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lb(null,"");break;default:t=lb(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}E$6(Eh),G$1(Eh,t)}function Jh(){E$6(Eh),E$6(Fh),E$6(Gh)}function Kh(e){Hh(Gh.current);var t=Hh(Eh.current),n=lb(t,e.type);t!==n&&(G$1(Fh,e),G$1(Eh,n))}function Lh(e){Fh.current===e&&(E$6(Eh),E$6(Fh))}var M$2=Uf(0);function Mh(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nh=[];function Oh(){for(var e=0;e<Nh.length;e++)Nh[e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$3=null,O$4=null,P$4=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$8(321))}function Wh(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!He$2(e[n],t[n]))return!1;return!0}function Xh(e,t,n,r,i,o){if(Rh=o,N$3=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ph.current=null===e||null===e.memoizedState?Yh:Zh,e=n(r,i),Th){o=0;do{if(Th=!1,Uh=0,25<=o)throw Error(p$8(301));o+=1,P$4=O$4=null,t.updateQueue=null,Ph.current=$h,e=n(r,i)}while(Th)}if(Ph.current=ai,t=null!==O$4&&null!==O$4.next,Rh=0,P$4=O$4=N$3=null,Sh=!1,t)throw Error(p$8(300));return e}function bi(){var e=0!==Uh;return Uh=0,e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===P$4?N$3.memoizedState=P$4=e:P$4=P$4.next=e,P$4}function di(){if(null===O$4){var e=N$3.alternate;e=null!==e?e.memoizedState:null}else e=O$4.next;var t=null===P$4?N$3.memoizedState:P$4.next;if(null!==t)P$4=t,O$4=e;else{if(null===e)throw Error(p$8(310));e={memoizedState:(O$4=e).memoizedState,baseState:O$4.baseState,baseQueue:O$4.baseQueue,queue:O$4.queue,next:null},null===P$4?N$3.memoizedState=P$4=e:P$4=P$4.next=e}return P$4}function ei(e,t){return"function"==typeof t?t(e):t}function fi(e){var t=di(),n=t.queue;if(null===n)throw Error(p$8(311));n.lastRenderedReducer=e;var r=O$4,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Rh&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,N$3.lanes|=u,hh|=u}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=a,He$2(r,t.memoizedState)||(Ug=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,N$3.lanes|=o,hh|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gi(e){var t=di(),n=t.queue;if(null===n)throw Error(p$8(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);He$2(o,t.memoizedState)||(Ug=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function hi(){}function ii(e,t){var n=N$3,r=di(),i=t(),o=!He$2(r.memoizedState,i);if(o&&(r.memoizedState=i,Ug=!0),r=r.queue,ji(ki.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==P$4&&1&P$4.memoizedState.tag){if(n.flags|=2048,li(9,mi.bind(null,n,r,i,t),void 0,null),null===R$3)throw Error(p$8(349));0!=(30&Rh)||ni(n,t,i)}return i}function ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=N$3.updateQueue)?(t={lastEffect:null,stores:null},N$3.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function mi(e,t,n,r){t.value=n,t.getSnapshot=r,oi(t)&&pi(e)}function ki(e,t,n){return n((function(){oi(t)&&pi(e)}))}function oi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!He$2(e,n)}catch(r){return!0}}function pi(e){var t=Zg(e,1);null!==t&&mh(t,e,1,-1)}function qi(e){var t=ci();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},t.queue=e,e=e.dispatch=ri.bind(null,N$3,e),[t.memoizedState,e]}function li(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=N$3.updateQueue)?(t={lastEffect:null,stores:null},N$3.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function si(){return di().memoizedState}function ti(e,t,n,r){var i=ci();N$3.flags|=e,i.memoizedState=li(1|t,n,void 0,void 0===r?null:r)}function ui(e,t,n,r){var i=di();r=void 0===r?null:r;var o=void 0;if(null!==O$4){var s=O$4.memoizedState;if(o=s.destroy,null!==r&&Wh(r,s.deps))return void(i.memoizedState=li(t,n,o,r))}N$3.flags|=e,i.memoizedState=li(1|t,n,o,r)}function vi(e,t){return ti(8390656,8,e,t)}function ji(e,t){return ui(2048,8,e,t)}function wi(e,t){return ui(4,2,e,t)}function xi(e,t){return ui(4,4,e,t)}function yi(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!=n?n.concat([e]):null,ui(4,4,yi.bind(null,t,e),n)}function Ai(){}function Bi(e,t){var n=di();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=di();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Wh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Di(e,t,n){return 0==(21&Rh)?(e.baseState&&(e.baseState=!1,Ug=!0),e.memoizedState=n):(He$2(n,t)||(n=yc(),N$3.lanes|=n,hh|=n,e.baseState=!0),t)}function Ei(e,t){var n=C$4;C$4=0!==n&&4>n?n:4,e(!0);var r=Qh.transition;Qh.transition={};try{e(!1),t()}finally{C$4=n,Qh.transition=r}}function Fi(){return di().memoizedState}function Gi(e,t,n){var r=lh(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hi(e))Ii(t,n);else if(null!==(n=Yg(e,t,n,r))){mh(n,e,r,L$3()),Ji(n,t,r)}}function ri(e,t,n){var r=lh(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hi(e))Ii(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,He$2(a,s)){var l=t.interleaved;return null===l?(i.next=i,Xg(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Yg(e,t,i,r))&&(mh(n,e,r,i=L$3()),Ji(n,t,r))}}function Hi(e){var t=e.alternate;return e===N$3||null!==t&&t===N$3}function Ii(e,t){Th=Sh=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Cc(e,n)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(e,t){return ci().memoizedState=[e,void 0===t?null:t],e},useContext:Vg,useEffect:vi,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ti(4194308,4,yi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return ti(4,2,e,t)},useMemo:function(e,t){var n=ci();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ci();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,N$3,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ci().memoizedState=e},useState:qi,useDebugValue:Ai,useDeferredValue:function(e){return ci().memoizedState=e},useTransition:function(){var e=qi(!1),t=e[0];return e=Ei.bind(null,e[1]),ci().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=N$3,i=ci();if(I$4){if(void 0===n)throw Error(p$8(407));n=n()}else{if(n=t(),null===R$3)throw Error(p$8(349));0!=(30&Rh)||ni(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,vi(ki.bind(null,r,o,e),[e]),r.flags|=2048,li(9,mi.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ci(),t=R$3.identifierPrefix;if(I$4){var n=sg;t=":"+t+"R"+(n=(rg&~(1<<32-oc(rg)-1)).toString(32)+n),0<(n=Uh++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Vh++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(e){return Di(di(),O$4.memoizedState,e)},useTransition:function(){return[fi(ei)[0],di().memoizedState]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var t=di();return null===O$4?t.memoizedState=e:Di(t,O$4.memoizedState,e)},useTransition:function(){return[gi(ei)[0],di().memoizedState]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(e,t){try{var n="",r=t;do{n+=Pa(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function Li(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Mi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ni="function"==typeof WeakMap?WeakMap:Map;function Oi(e,t,n){(n=ch(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pi||(Pi=!0,Qi=r),Mi(e,t)},n}function Ri(e,t,n){(n=ch(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Mi(e,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){Mi(e,t),"function"!=typeof r&&(null===Si?Si=new Set([this]):Si.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function Ti(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ni;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ui.bind(null,e,t,n),t.then(e,e))}function Vi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Wi(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ch(-1,1)).tag=2,dh(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(e,t,n,r){t.child=null===e?Ch(t,null,n,r):Bh(t,e.child,n,r)}function Zi(e,t,n,r,i){n=n.render;var o=t.ref;return Tg(t,i),r=Xh(e,t,n,r,o,i),n=bi(),null===e||Ug?(I$4&&n&&vg(t),t.flags|=1,Yi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$i(e,t,i))}function aj(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||bj(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=yh(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,cj(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Ie$1)(s,r)&&e.ref===t.ref)return $i(e,t,i)}return t.flags|=1,(e=wh(o,r)).ref=t.ref,e.return=t,t.child=e}function cj(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Ie$1(o,r)&&e.ref===t.ref){if(Ug=!1,t.pendingProps=r=o,0==(e.lanes&i))return t.lanes=e.lanes,$i(e,t,i);0!=(131072&e.flags)&&(Ug=!0)}}return dj(e,t,n,r,i)}function ej(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,G$1(fj,gj),gj|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,G$1(fj,gj),gj|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,G$1(fj,gj),gj|=r;return Yi(e,t,i,n),t.child}function hj(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dj(e,t,n,r,i){var o=Zf(n)?Xf:H$5.current;return o=Yf(t,o),Tg(t,i),n=Xh(e,t,n,r,o,i),r=bi(),null===e||Ug?(I$4&&r&&vg(t),t.flags|=1,Yi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$i(e,t,i))}function ij(e,t,n,r,i){if(Zf(n)){var o=!0;cg(t)}else o=!1;if(Tg(t,i),null===t.stateNode)jj(e,t),ph(t,n,r),rh(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=Vg(c):c=Yf(t,c=Zf(n)?Xf:H$5.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&qh(t,s,r,c),$g=!1;var d=t.memoizedState;s.state=d,gh(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Wf.current||$g?("function"==typeof u&&(kh(t,n,u,r),l=t.memoizedState),(a=$g||oh(t,n,a,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,bh(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Lg(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=Vg(l):l=Yf(t,l=Zf(n)?Xf:H$5.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&qh(t,s,r,l),$g=!1,d=t.memoizedState,s.state=d,gh(t,r,s,i);var f=t.memoizedState;a!==h||d!==f||Wf.current||$g?("function"==typeof p&&(kh(t,n,p,r),f=t.memoizedState),(c=$g||oh(t,n,c,r,d,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return kj(e,t,n,r,o,i)}function kj(e,t,n,r,i,o){hj(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&dg(t,n,!1),$i(e,t,o);r=t.stateNode,Xi.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Bh(t,e.child,null,o),t.child=Bh(t,null,a,o)):Yi(e,t,a,o),t.memoizedState=r.state,i&&dg(t,n,!0),t.child}function lj(e){var t=e.stateNode;t.pendingContext?ag(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ag(e,t.context,!1),Ih(e,t.containerInfo)}function mj(e,t,n,r,i){return Ig(),Jg(i),t.flags|=256,Yi(e,t,n,r),t.child}var nj={dehydrated:null,treeContext:null,retryLane:0},Aj,Bj,Cj,Dj;function oj(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,t,n){var r,i=t.pendingProps,o=M$2.current,s=!1,a=0!=(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),G$1(M$2,1&o),null===e)return Eg(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=qj(a,i,0,null),e=Ah(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=oj(n),t.memoizedState=nj,e):rj(t,a));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return sj(e,t,a,i,r,o,n);if(s){s=i.fallback,a=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&a)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=wh(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=wh(r,s):(s=Ah(s,a,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=null===(a=e.child.memoizedState)?oj(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=nj,i}return e=(s=e.child).sibling,i=wh(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function rj(e,t){return(t=qj({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function tj(e,t,n,r){return null!==r&&Jg(r),Bh(t,e.child,null,n),(e=rj(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function sj(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,tj(e,t,s,r=Li(Error(p$8(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=qj({mode:"visible",children:r.children},i,0,null),(o=Ah(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Bh(t,e.child,null,s),t.child.memoizedState=oj(s),t.memoizedState=nj,o);if(0==(1&t.mode))return tj(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var a=r.dgst;return r=a,tj(e,t,s,r=Li(o=Error(p$8(419)),r,void 0))}if(a=0!=(s&e.childLanes),Ug||a){if(null!==(r=R$3)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Zg(e,i),mh(r,e,i,-1))}return uj(),tj(e,t,s,r=Li(Error(p$8(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=vj.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,yg=Lf(i.nextSibling),xg=t,I$4=!0,zg=null,null!==e&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=t),(t=rj(t,r.children)).flags|=4096,t)}function wj(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sg(e.return,t,n)}function xj(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function yj(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Yi(e,t,r.children,n),0!=(2&(r=M$2.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&wj(e,n,t);else if(19===e.tag)wj(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(G$1(M$2,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Mh(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),xj(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Mh(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}xj(t,!0,n,null,o);break;case"together":xj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jj(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $i(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hh|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(p$8(153));if(null!==t.child){for(n=wh(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=wh(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function zj(e,t,n){switch(t.tag){case 3:lj(t),Ig();break;case 5:Kh(t);break;case 1:Zf(t.type)&&cg(t);break;case 4:Ih(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;G$1(Mg,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(G$1(M$2,1&M$2.current),t.flags|=128,null):0!=(n&t.child.childLanes)?pj(e,t,n):(G$1(M$2,1&M$2.current),null!==(e=$i(e,t,n))?e.sibling:null);G$1(M$2,1&M$2.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return yj(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G$1(M$2,M$2.current),r)break;return null;case 22:case 23:return t.lanes=0,ej(e,t,n)}return $i(e,t,n)}function Ej(e,t){if(!I$4)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function S$3(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fj(e,t,n){var r=t.pendingProps;switch(wg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(t),null;case 1:case 17:return Zf(t.type)&&$f(),S$3(t),null;case 3:return r=t.stateNode,Jh(),E$6(Wf),E$6(H$5),Oh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gg(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==zg&&(Gj(zg),zg=null))),Bj(e,t),S$3(t),null;case 5:Lh(t);var i=Hh(Gh.current);if(n=t.type,null!==e&&null!=t.stateNode)Cj(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(p$8(166));return S$3(t),null}if(e=Hh(Eh.current),Gg(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Of]=t,r[Pf]=o,e=0!=(1&t.mode),n){case"dialog":D$6("cancel",r),D$6("close",r);break;case"iframe":case"object":case"embed":D$6("load",r);break;case"video":case"audio":for(i=0;i<lf.length;i++)D$6(lf[i],r);break;case"source":D$6("error",r);break;case"img":case"image":case"link":D$6("error",r),D$6("load",r);break;case"details":D$6("toggle",r);break;case"input":Za(r,o),D$6("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},D$6("invalid",r);break;case"textarea":hb(r,o),D$6("invalid",r)}for(var s in ub(n,o),i=null,o)if(o.hasOwnProperty(s)){var a=o[s];"children"===s?"string"==typeof a?r.textContent!==a&&(!0!==o.suppressHydrationWarning&&Af(r.textContent,a,e),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==o.suppressHydrationWarning&&Af(r.textContent,a,e),i=["children",""+a]):ea.hasOwnProperty(s)&&null!=a&&"onScroll"===s&&D$6("scroll",r)}switch(n){case"input":Va(r),db(r,o,!0);break;case"textarea":Va(r),jb(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Bf)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=kb(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Of]=t,e[Pf]=r,Aj(e,t,!1,!1),t.stateNode=e;e:{switch(s=vb(n,r),n){case"dialog":D$6("cancel",e),D$6("close",e),i=r;break;case"iframe":case"object":case"embed":D$6("load",e),i=r;break;case"video":case"audio":for(i=0;i<lf.length;i++)D$6(lf[i],e);i=r;break;case"source":D$6("error",e),i=r;break;case"img":case"image":case"link":D$6("error",e),D$6("load",e),i=r;break;case"details":D$6("toggle",e),i=r;break;case"input":Za(e,r),i=Ya(e,r),D$6("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=A$4({},r,{value:void 0}),D$6("invalid",e);break;case"textarea":hb(e,r),i=gb(e,r),D$6("invalid",e)}for(o in ub(n,i),a=i)if(a.hasOwnProperty(o)){var l=a[o];"style"===o?sb(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&nb(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&ob(e,l):"number"==typeof l&&ob(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ea.hasOwnProperty(o)?null!=l&&"onScroll"===o&&D$6("scroll",e):null!=l&&ta(e,o,l,s))}switch(n){case"input":Va(e),db(e,r,!1);break;case"textarea":Va(e),jb(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Sa(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?fb(e,!!r.multiple,o,!1):null!=r.defaultValue&&fb(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return S$3(t),null;case 6:if(e&&null!=t.stateNode)Dj(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(p$8(166));if(n=Hh(Gh.current),Hh(Eh.current),Gg(t)){if(r=t.stateNode,n=t.memoizedProps,r[Of]=t,(o=r.nodeValue!==n)&&null!==(e=xg))switch(e.tag){case 3:Af(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Af(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Of]=t,t.stateNode=r}return S$3(t),null;case 13:if(E$6(M$2),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(I$4&&null!==yg&&0!=(1&t.mode)&&0==(128&t.flags))Hg(),Ig(),t.flags|=98560,o=!1;else if(o=Gg(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(p$8(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(p$8(317));o[Of]=t}else Ig(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;S$3(t),o=!1}else null!==zg&&(Gj(zg),zg=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&M$2.current)?0===T$3&&(T$3=3):uj())),null!==t.updateQueue&&(t.flags|=4),S$3(t),null);case 4:return Jh(),Bj(e,t),null===e&&sf(t.stateNode.containerInfo),S$3(t),null;case 10:return Rg(t.type._context),S$3(t),null;case 19:if(E$6(M$2),null===(o=t.memoizedState))return S$3(t),null;if(r=0!=(128&t.flags),null===(s=o.rendering))if(r)Ej(o,!1);else{if(0!==T$3||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Mh(e))){for(t.flags|=128,Ej(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return G$1(M$2,1&M$2.current|2),t.child}e=e.sibling}null!==o.tail&&B$2()>Hj&&(t.flags|=128,r=!0,Ej(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Mh(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ej(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!I$4)return S$3(t),null}else 2*B$2()-o.renderingStartTime>Hj&&1073741824!==n&&(t.flags|=128,r=!0,Ej(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=B$2(),t.sibling=null,n=M$2.current,G$1(M$2,r?1&n|2:1&n),t):(S$3(t),null);case 22:case 23:return Ij(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&gj)&&(S$3(t),6&t.subtreeFlags&&(t.flags|=8192)):S$3(t),null;case 24:case 25:return null}throw Error(p$8(156,t.tag))}function Jj(e,t){switch(wg(t),t.tag){case 1:return Zf(t.type)&&$f(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jh(),E$6(Wf),E$6(H$5),Oh(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Lh(t),null;case 13:if(E$6(M$2),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(p$8(340));Ig()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return E$6(M$2),null;case 4:return Jh(),null;case 10:return Rg(t.type._context),null;case 22:case 23:return Ij(),null;default:return null}}Aj=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Bj=function(){},Cj=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Hh(Eh.current);var o,s=null;switch(n){case"input":i=Ya(e,i),r=Ya(e,r),s=[];break;case"select":i=A$4({},i,{value:void 0}),r=A$4({},r,{value:void 0}),s=[];break;case"textarea":i=gb(e,i),r=gb(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Bf)}for(c in ub(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ea.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ea.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&D$6("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Dj=function(e,t,n,r){n!==r&&(t.flags|=4)};var Kj=!1,U$2=!1,Lj="function"==typeof WeakSet?WeakSet:Set,V$3=null;function Mj(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){W$4(e,t,r)}else n.current=null}function Nj(e,t,n){try{n()}catch(r){W$4(e,t,r)}}var Oj=!1;function Pj(e,t){if(Cf=dd,Ne$2(e=Me$1())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(y){n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(a=s+i),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(a=s),d===o&&++u===r&&(l=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Df={focusedElem:e,selectionRange:n},dd=!1,V$3=t;null!==V$3;)if(e=(t=V$3).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,V$3=e;else for(;null!==V$3;){t=V$3;try{var f=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,_=t.stateNode,b=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:Lg(t.type,m),g);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(p$8(163))}}catch(y){W$4(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,V$3=e;break}V$3=t.return}return f=Oj,Oj=!1,f}function Qj(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Nj(t,n,o)}i=i.next}while(i!==r)}}function Rj(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sj(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Tj(e){var t=e.alternate;null!==t&&(e.alternate=null,Tj(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Of],delete t[Pf],delete t[of],delete t[Qf],delete t[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return 5===e.tag||3===e.tag||4===e.tag}function Vj(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Wj(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Bf));else if(4!==r&&null!==(e=e.child))for(Wj(e,t,n),e=e.sibling;null!==e;)Wj(e,t,n),e=e.sibling}function Xj(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Xj(e,t,n),e=e.sibling;null!==e;)Xj(e,t,n),e=e.sibling}var X$2=null,Yj=!1;function Zj(e,t,n){for(n=n.child;null!==n;)ak(e,t,n),n=n.sibling}function ak(e,t,n){if(lc&&"function"==typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,n)}catch(a){}switch(n.tag){case 5:U$2||Mj(n,t);case 6:var r=X$2,i=Yj;X$2=null,Zj(e,t,n),Yj=i,null!==(X$2=r)&&(Yj?(e=X$2,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):X$2.removeChild(n.stateNode));break;case 18:null!==X$2&&(Yj?(e=X$2,n=n.stateNode,8===e.nodeType?Kf(e.parentNode,n):1===e.nodeType&&Kf(e,n),bd(e)):Kf(X$2,n.stateNode));break;case 4:r=X$2,i=Yj,X$2=n.stateNode.containerInfo,Yj=!0,Zj(e,t,n),X$2=r,Yj=i;break;case 0:case 11:case 14:case 15:if(!U$2&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!=(2&o)||0!=(4&o))&&Nj(n,t,s),i=i.next}while(i!==r)}Zj(e,t,n);break;case 1:if(!U$2&&(Mj(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){W$4(n,t,a)}Zj(e,t,n);break;case 21:Zj(e,t,n);break;case 22:1&n.mode?(U$2=(r=U$2)||null!==n.memoizedState,Zj(e,t,n),U$2=r):Zj(e,t,n);break;default:Zj(e,t,n)}}function bk(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Lj),t.forEach((function(t){var r=ck.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function dk(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;null!==a;){switch(a.tag){case 5:X$2=a.stateNode,Yj=!1;break e;case 3:case 4:X$2=a.stateNode.containerInfo,Yj=!0;break e}a=a.return}if(null===X$2)throw Error(p$8(160));ak(o,s,i),X$2=null,Yj=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){W$4(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ek(t,e),t=t.sibling}function ek(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk(t,e),fk(e),4&r){try{Qj(3,e,e.return),Rj(3,e)}catch(t2){W$4(e,e.return,t2)}try{Qj(5,e,e.return)}catch(t2){W$4(e,e.return,t2)}}break;case 1:dk(t,e),fk(e),512&r&&null!==n&&Mj(n,n.return);break;case 5:if(dk(t,e),fk(e),512&r&&null!==n&&Mj(n,n.return),32&e.flags){var i=e.stateNode;try{ob(i,"")}catch(t2){W$4(e,e.return,t2)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===o.type&&null!=o.name&&ab(i,o),vb(a,s);var c=vb(a,o);for(s=0;s<l.length;s+=2){var u=l[s],h=l[s+1];"style"===u?sb(i,h):"dangerouslySetInnerHTML"===u?nb(i,h):"children"===u?ob(i,h):ta(i,u,h,c)}switch(a){case"input":bb(i,o);break;case"textarea":ib(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?fb(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?fb(i,!!o.multiple,o.defaultValue,!0):fb(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pf]=o}catch(t2){W$4(e,e.return,t2)}}break;case 6:if(dk(t,e),fk(e),4&r){if(null===e.stateNode)throw Error(p$8(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t2){W$4(e,e.return,t2)}}break;case 3:if(dk(t,e),fk(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{bd(t.containerInfo)}catch(t2){W$4(e,e.return,t2)}break;case 4:default:dk(t,e),fk(e);break;case 13:dk(t,e),fk(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(gk=B$2())),4&r&&bk(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(U$2=(c=U$2)||u,dk(t,e),U$2=c):dk(t,e),fk(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!=(1&e.mode))for(V$3=e,u=e.child;null!==u;){for(h=V$3=u;null!==V$3;){switch(p=(d=V$3).child,d.tag){case 0:case 11:case 14:case 15:Qj(4,d,d.return);break;case 1:Mj(d,d.return);var f=d.stateNode;if("function"==typeof f.componentWillUnmount){r=d,n=d.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(t2){W$4(r,n,t2)}}break;case 5:Mj(d,d.return);break;case 22:if(null!==d.memoizedState){hk(h);continue}}null!==p?(p.return=d,V$3=p):hk(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(a=h.stateNode,s=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=rb("display",s))}catch(t2){W$4(e,e.return,t2)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(t2){W$4(e,e.return,t2)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dk(t,e),fk(e),4&r&&bk(e);case 21:}}function fk(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Uj(n)){var r=n;break e}n=n.return}throw Error(p$8(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ob(i,""),r.flags&=-33),Xj(e,Vj(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;Wj(e,Vj(e),o);break;default:throw Error(p$8(161))}}catch(s){W$4(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ik(e,t,n){V$3=e,jk(e)}function jk(e,t,n){for(var r=0!=(1&e.mode);null!==V$3;){var i=V$3,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Kj;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||U$2;a=Kj;var c=U$2;if(Kj=s,(U$2=l)&&!c)for(V$3=i;null!==V$3;)l=(s=V$3).child,22===s.tag&&null!==s.memoizedState?kk(i):null!==l?(l.return=s,V$3=l):kk(i);for(;null!==o;)V$3=o,jk(o),o=o.sibling;V$3=i,Kj=a,U$2=c}lk(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,V$3=o):lk(e)}}function lk(e){for(;null!==V$3;){var t=V$3;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:U$2||Rj(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!U$2)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Lg(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ih(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ih(t,s,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&bd(h)}}}break;default:throw Error(p$8(163))}U$2||512&t.flags&&Sj(t)}catch(d){W$4(t,t.return,d)}}if(t===e){V$3=null;break}if(null!==(n=t.sibling)){n.return=t.return,V$3=n;break}V$3=t.return}}function hk(e){for(;null!==V$3;){var t=V$3;if(t===e){V$3=null;break}var n=t.sibling;if(null!==n){n.return=t.return,V$3=n;break}V$3=t.return}}function kk(e){for(;null!==V$3;){var t=V$3;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rj(4,t)}catch(l){W$4(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){W$4(t,i,l)}}var o=t.return;try{Sj(t)}catch(l){W$4(t,o,l)}break;case 5:var s=t.return;try{Sj(t)}catch(l){W$4(t,s,l)}}}catch(l){W$4(t,t.return,l)}if(t===e){V$3=null;break}var a=t.sibling;if(null!==a){a.return=t.return,V$3=a;break}V$3=t.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$1=null,Z$2=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0,Wk;function L$3(){return 0!=(6&K$1)?B$2():-1!==Bk?Bk:Bk=B$2()}function lh(e){return 0==(1&e.mode)?1:0!=(2&K$1)&&0!==Z$2?Z$2&-Z$2:null!==Kg.transition?(0===Ck&&(Ck=yc()),Ck):0!==(e=C$4)?e:e=void 0===(e=window.event)?16:jd(e.type)}function mh(e,t,n,r){if(50<zk)throw zk=0,Ak=null,Error(p$8(185));Ac(e,n,r),0!=(2&K$1)&&e===R$3||(e===R$3&&(0==(2&K$1)&&(rk|=n),4===T$3&&Dk(e,Z$2)),Ek(e,r),1===n&&0===K$1&&0==(1&t.mode)&&(Hj=B$2()+500,fg&&jg()))}function Ek(e,t){var n=e.callbackNode;wc(e,t);var r=uc(e,e===R$3?Z$2:0);if(0===r)null!==n&&bc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&bc(n),1===t)0===e.tag?ig(Fk.bind(null,e)):hg(Fk.bind(null,e)),Jf((function(){0==(6&K$1)&&jg()})),n=null;else{switch(Dc(r)){case 1:n=fc;break;case 4:n=gc;break;case 16:default:n=hc;break;case 536870912:n=jc}n=Gk(n,Hk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hk(e,t){if(Bk=-1,Ck=0,0!=(6&K$1))throw Error(p$8(327));var n=e.callbackNode;if(Ik()&&e.callbackNode!==n)return null;var r=uc(e,e===R$3?Z$2:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=Jk(e,r);else{t=r;var i=K$1;K$1|=2;var o=Kk();for(R$3===e&&Z$2===t||(vk=null,Hj=B$2()+500,Lk(e,t));;)try{Mk();break}catch(a){Nk(e,a)}Qg(),nk.current=o,K$1=i,null!==Y$1?t=0:(R$3=null,Z$2=0,t=T$3)}if(0!==t){if(2===t&&(0!==(i=xc(e))&&(r=i,t=Ok(e,i))),1===t)throw n=qk,Lk(e,0),Dk(e,r),Ek(e,B$2()),n;if(6===t)Dk(e,r);else{if(i=e.current.alternate,0==(30&r)&&!Pk(i)&&(2===(t=Jk(e,r))&&(0!==(o=xc(e))&&(r=o,t=Ok(e,o))),1===t))throw n=qk,Lk(e,0),Dk(e,r),Ek(e,B$2()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(p$8(345));case 2:case 5:Qk(e,uk,vk);break;case 3:if(Dk(e,r),(130023424&r)===r&&10<(t=gk+500-B$2())){if(0!==uc(e,0))break;if(((i=e.suspendedLanes)&r)!==r){L$3(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),t);break}Qk(e,uk,vk);break;case 4:if(Dk(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-oc(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=B$2()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mk(r/1960))-r)){e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),r);break}Qk(e,uk,vk);break;default:throw Error(p$8(329))}}}return Ek(e,B$2()),e.callbackNode===n?Hk.bind(null,e):null}function Ok(e,t){var n=tk;return e.current.memoizedState.isDehydrated&&(Lk(e,t).flags|=256),2!==(e=Jk(e,t))&&(t=uk,uk=n,null!==t&&Gj(t)),e}function Gj(e){null===uk?uk=e:uk.push.apply(uk,e)}function Pk(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!He$2(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dk(e,t){for(t&=~sk,t&=~rk,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-oc(t),r=1<<n;e[n]=-1,t&=~r}}function Fk(e){if(0!=(6&K$1))throw Error(p$8(327));Ik();var t=uc(e,0);if(0==(1&t))return Ek(e,B$2()),null;var n=Jk(e,t);if(0!==e.tag&&2===n){var r=xc(e);0!==r&&(t=r,n=Ok(e,r))}if(1===n)throw n=qk,Lk(e,0),Dk(e,t),Ek(e,B$2()),n;if(6===n)throw Error(p$8(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qk(e,uk,vk),Ek(e,B$2()),null}function Rk(e,t){var n=K$1;K$1|=1;try{return e(t)}finally{0===(K$1=n)&&(Hj=B$2()+500,fg&&jg())}}function Sk(e){null!==xk&&0===xk.tag&&0==(6&K$1)&&Ik();var t=K$1;K$1|=1;var n=pk.transition,r=C$4;try{if(pk.transition=null,C$4=1,e)return e()}finally{C$4=r,pk.transition=n,0==(6&(K$1=t))&&jg()}}function Ij(){gj=fj.current,E$6(fj)}function Lk(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gf(n)),null!==Y$1)for(n=Y$1.return;null!==n;){var r=n;switch(wg(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&$f();break;case 3:Jh(),E$6(Wf),E$6(H$5),Oh();break;case 5:Lh(r);break;case 4:Jh();break;case 13:case 19:E$6(M$2);break;case 10:Rg(r.type._context);break;case 22:case 23:Ij()}n=n.return}if(R$3=e,Y$1=e=wh(e.current,null),Z$2=gj=t,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,null!==Wg){for(t=0;t<Wg.length;t++)if(null!==(r=(n=Wg[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Wg=null}return e}function Nk(e,t){for(;;){var n=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var r=N$3.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Sh=!1}if(Rh=0,P$4=O$4=N$3=null,Th=!1,Uh=0,ok.current=null,null===n||null===n.return){T$3=1,qk=t,Y$1=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Z$2,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=a,h=u.tag;if(0==(1&u.mode)&&(0===h||11===h||15===h)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Vi(s);if(null!==p){p.flags&=-257,Wi(p,s,a,o,t),1&p.mode&&Ti(o,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(0==(1&t)){Ti(o,c,t),uj();break e}l=Error(p$8(426))}else if(I$4&&1&a.mode){var g=Vi(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),Wi(g,s,a,o,t),Jg(Ki(l,a));break e}}o=l=Ki(l,a),4!==T$3&&(T$3=2),null===tk?tk=[o]:tk.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,fh(o,Oi(o,l,t));break e;case 1:a=l;var _=o.type,b=o.stateNode;if(0==(128&o.flags)&&("function"==typeof _.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Si||!Si.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,fh(o,Ri(o,a,t));break e}}o=o.return}while(null!==o)}Tk(n)}catch(v){t=v,Y$1===n&&null!==n&&(Y$1=n=n.return);continue}break}}function Kk(){var e=nk.current;return nk.current=ai,null===e?ai:e}function uj(){0!==T$3&&3!==T$3&&2!==T$3||(T$3=4),null===R$3||0==(268435455&hh)&&0==(268435455&rk)||Dk(R$3,Z$2)}function Jk(e,t){var n=K$1;K$1|=2;var r=Kk();for(R$3===e&&Z$2===t||(vk=null,Lk(e,t));;)try{Uk();break}catch(i){Nk(e,i)}if(Qg(),K$1=n,nk.current=r,null!==Y$1)throw Error(p$8(261));return R$3=null,Z$2=0,T$3}function Uk(){for(;null!==Y$1;)Vk(Y$1)}function Mk(){for(;null!==Y$1&&!cc();)Vk(Y$1)}function Vk(e){var t=Wk(e.alternate,e,gj);e.memoizedProps=e.pendingProps,null===t?Tk(e):Y$1=t,ok.current=null}function Tk(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Fj(n,t,gj)))return void(Y$1=n)}else{if(null!==(n=Jj(n,t)))return n.flags&=32767,void(Y$1=n);if(null===e)return T$3=6,void(Y$1=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Y$1=t);Y$1=t=e}while(null!==t);0===T$3&&(T$3=5)}function Qk(e,t,n){var r=C$4,i=pk.transition;try{pk.transition=null,C$4=1,Xk(e,t,n,r)}finally{pk.transition=i,C$4=r}return null}function Xk(e,t,n,r){do{Ik()}while(null!==xk);if(0!=(6&K$1))throw Error(p$8(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(p$8(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Bc(e,o),e===R$3&&(Y$1=R$3=null,Z$2=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||wk||(wk=!0,Gk(hc,(function(){return Ik(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=pk.transition,pk.transition=null;var s=C$4;C$4=1;var a=K$1;K$1|=4,ok.current=null,Pj(e,n),ek(n,e),Oe$1(Df),dd=!!Cf,Df=Cf=null,e.current=n,ik(n),dc(),K$1=a,C$4=s,pk.transition=o}else e.current=n;if(wk&&(wk=!1,xk=e,yk=i),0===(o=e.pendingLanes)&&(Si=null),mc(n.stateNode),Ek(e,B$2()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Pi)throw Pi=!1,e=Qi,Qi=null,e;return 0!=(1&yk)&&0!==e.tag&&Ik(),0!=(1&(o=e.pendingLanes))?e===Ak?zk++:(zk=0,Ak=e):zk=0,jg(),null}function Ik(){if(null!==xk){var e=Dc(yk),t=pk.transition,n=C$4;try{if(pk.transition=null,C$4=16>e?16:e,null===xk)var r=!1;else{if(e=xk,xk=null,yk=0,0!=(6&K$1))throw Error(p$8(331));var i=K$1;for(K$1|=4,V$3=e.current;null!==V$3;){var o=V$3,s=o.child;if(0!=(16&V$3.flags)){var a=o.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(V$3=c;null!==V$3;){var u=V$3;switch(u.tag){case 0:case 11:case 15:Qj(8,u,o)}var h=u.child;if(null!==h)h.return=u,V$3=h;else for(;null!==V$3;){var d=(u=V$3).sibling,p=u.return;if(Tj(u),u===c){V$3=null;break}if(null!==d){d.return=p,V$3=d;break}V$3=p}}}var f=o.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}V$3=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,V$3=s;else e:for(;null!==V$3;){if(0!=(2048&(o=V$3).flags))switch(o.tag){case 0:case 11:case 15:Qj(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,V$3=_;break e}V$3=o.return}}var b=e.current;for(V$3=b;null!==V$3;){var v=(s=V$3).child;if(0!=(2064&s.subtreeFlags)&&null!==v)v.return=s,V$3=v;else e:for(s=b;null!==V$3;){if(0!=(2048&(a=V$3).flags))try{switch(a.tag){case 0:case 11:case 15:Rj(9,a)}}catch(O){W$4(a,a.return,O)}if(a===s){V$3=null;break e}var y=a.sibling;if(null!==y){y.return=a.return,V$3=y;break e}V$3=a.return}}if(K$1=i,jg(),lc&&"function"==typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,e)}catch(O){}r=!0}return r}finally{C$4=n,pk.transition=t}}return!1}function Yk(e,t,n){e=dh(e,t=Oi(e,t=Ki(n,t),1),1),t=L$3(),null!==e&&(Ac(e,1,t),Ek(e,t))}function W$4(e,t,n){if(3===e.tag)Yk(e,e,n);else for(;null!==t;){if(3===t.tag){Yk(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Si||!Si.has(r))){t=dh(t,e=Ri(t,e=Ki(n,e),1),1),e=L$3(),null!==t&&(Ac(t,1,e),Ek(t,e));break}}t=t.return}}function Ui(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=L$3(),e.pingedLanes|=e.suspendedLanes&n,R$3===e&&(Z$2&n)===n&&(4===T$3||3===T$3&&(130023424&Z$2)===Z$2&&500>B$2()-gk?Lk(e,0):sk|=n),Ek(e,t)}function Zk(e,t){0===t&&(0==(1&e.mode)?t=1:(t=sc,0==(130023424&(sc<<=1))&&(sc=4194304)));var n=L$3();null!==(e=Zg(e,t))&&(Ac(e,t,n),Ek(e,n))}function vj(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Zk(e,n)}function ck(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(p$8(314))}null!==r&&r.delete(t),Zk(e,n)}function Gk(e,t){return ac(e,t)}function al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,t,n,r){return new al(e,t,n,r)}function bj(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $k(e){if("function"==typeof e)return bj(e)?1:0;if(null!=e){if((e=e.$$typeof)===Da)return 11;if(e===Ga)return 14}return 2}function wh(e,t){var n=e.alternate;return null===n?((n=Bg(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function yh(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)bj(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ya:return Ah(n.children,i,o,t);case za:s=8,i|=8;break;case Aa:return(e=Bg(12,n,t,2|i)).elementType=Aa,e.lanes=o,e;case Ea:return(e=Bg(13,n,t,i)).elementType=Ea,e.lanes=o,e;case Fa:return(e=Bg(19,n,t,i)).elementType=Fa,e.lanes=o,e;case Ia:return qj(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ba:s=10;break e;case Ca:s=9;break e;case Da:s=11;break e;case Ga:s=14;break e;case Ha:s=16,r=null;break e}throw Error(p$8(130,null==e?e:typeof e,""))}return(t=Bg(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ah(e,t,n,r){return(e=Bg(7,e,r,t)).lanes=n,e}function qj(e,t,n,r){return(e=Bg(22,e,r,t)).elementType=Ia,e.lanes=n,e.stateNode={isHidden:!1},e}function xh(e,t,n){return(e=Bg(6,e,null,t)).lanes=n,e}function zh(e,t,n){return(t=Bg(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cl(e,t,n,r,i,o,s,a,l){return e=new bl(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Bg(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(o),e}function dl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e){if(!e)return Vf;e:{if(Vb(e=e._reactInternals)!==e||1!==e.tag)throw Error(p$8(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zf(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(p$8(171))}if(1===e.tag){var n=e.type;if(Zf(n))return bg(e,n,t)}return t}function fl(e,t,n,r,i,o,s,a,l){return(e=cl(n,r,!0,e,i,o,s,a,l)).context=el(null),n=e.current,(o=ch(r=L$3(),i=lh(n))).callback=null!=t?t:null,dh(n,o,i),e.current.lanes=i,Ac(e,i,r),Ek(e,r),e}function gl(e,t,n,r){var i=t.current,o=L$3(),s=lh(i);return n=el(n),null===t.context?t.context=n:t.pendingContext=n,(t=ch(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=dh(i,t,s))&&(mh(e,i,s,o),eh(e,i,s)),s}function hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function il(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function jl(e,t){il(e,t),(e=e.alternate)&&il(e,t)}function kl(){return null}Wk=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Wf.current)Ug=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Ug=!1,zj(e,t,n);Ug=0!=(131072&e.flags)}else Ug=!1,I$4&&0!=(1048576&t.flags)&&ug(t,ng,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jj(e,t),e=t.pendingProps;var i=Yf(t,H$5.current);Tg(t,n),i=Xh(null,t,r,e,i,n);var o=bi();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zf(r)?(o=!0,cg(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ah(t),i.updater=nh,t.stateNode=i,i._reactInternals=t,rh(t,r,e,n),t=kj(null,t,r,!0,o,n)):(t.tag=0,I$4&&o&&vg(t),Yi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jj(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=$k(r),e=Lg(r,e),i){case 0:t=dj(null,t,r,e,n);break e;case 1:t=ij(null,t,r,e,n);break e;case 11:t=Zi(null,t,r,e,n);break e;case 14:t=aj(null,t,r,Lg(r.type,e),n);break e}throw Error(p$8(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,dj(e,t,r,i=t.elementType===r?i:Lg(r,i),n);case 1:return r=t.type,i=t.pendingProps,ij(e,t,r,i=t.elementType===r?i:Lg(r,i),n);case 3:e:{if(lj(t),null===e)throw Error(p$8(387));r=t.pendingProps,i=(o=t.memoizedState).element,bh(e,t),gh(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=mj(e,t,r,n,i=Ki(Error(p$8(423)),t));break e}if(r!==i){t=mj(e,t,r,n,i=Ki(Error(p$8(424)),t));break e}for(yg=Lf(t.stateNode.containerInfo.firstChild),xg=t,I$4=!0,zg=null,n=Ch(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ig(),r===i){t=$i(e,t,n);break e}Yi(e,t,r,n)}t=t.child}return t;case 5:return Kh(t),null===e&&Eg(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Ef(r,i)?s=null:null!==o&&Ef(r,o)&&(t.flags|=32),hj(e,t),Yi(e,t,s,n),t.child;case 6:return null===e&&Eg(t),null;case 13:return pj(e,t,n);case 4:return Ih(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Bh(t,null,r,n):Yi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Zi(e,t,r,i=t.elementType===r?i:Lg(r,i),n);case 7:return Yi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Yi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,G$1(Mg,r._currentValue),r._currentValue=s,null!==o)if(He$2(o.value,s)){if(o.children===i.children&&!Wf.current){t=$i(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var a=o.dependencies;if(null!==a){s=o.child;for(var l=a.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=ch(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sg(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(p$8(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),Sg(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Yi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Tg(t,n),r=r(i=Vg(i)),t.flags|=1,Yi(e,t,r,n),t.child;case 14:return i=Lg(r=t.type,t.pendingProps),aj(e,t,r,i=Lg(r.type,i),n);case 15:return cj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Lg(r,i),jj(e,t),t.tag=1,Zf(r)?(e=!0,cg(t)):e=!1,Tg(t,n),ph(t,r,i),rh(t,r,i,n),kj(null,t,r,!0,e,n);case 19:return yj(e,t,n);case 22:return ej(e,t,n)}throw Error(p$8(156,t.tag))};var ll="function"==typeof reportError?reportError:function(e){console.error(e)};function ml(e){this._internalRoot=e}function nl(e){this._internalRoot=e}function ol(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function pl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ql(){}function rl(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=hl(s);o.call(e)}}var s=fl(t,r,e,0,null,!1,!1,"",ql);return e._reactRootContainer=s,e[uf]=s.current,sf(8===e.nodeType?e.parentNode:e),Sk(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=hl(l);a.call(e)}}var l=cl(e,0,!1,null,null,!1,!1,"",ql);return e._reactRootContainer=l,e[uf]=l.current,sf(8===e.nodeType?e.parentNode:e),Sk((function(){gl(t,l,n,r)})),l}function sl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"==typeof i){var a=i;i=function(){var e=hl(s);a.call(e)}}gl(t,s,e,i)}else s=rl(n,t,e,i,r);return hl(s)}nl.prototype.render=ml.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(p$8(409));gl(e,t,null,null)},nl.prototype.unmount=ml.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Sk((function(){gl(null,e,null,null)})),t[uf]=null}},nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qc.length&&0!==t&&t<Qc[n].priority;n++);Qc.splice(n,0,e),0===n&&Vc(e)}},Ec=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tc(t.pendingLanes);0!==n&&(Cc(t,1|n),Ek(t,B$2()),0==(6&K$1)&&(Hj=B$2()+500,jg()))}break;case 13:Sk((function(){var t=Zg(e,1);if(null!==t){var n=L$3();mh(t,e,1,n)}})),jl(e,1)}},Fc=function(e){if(13===e.tag){var t=Zg(e,134217728);if(null!==t)mh(t,e,134217728,L$3());jl(e,134217728)}},Gc=function(e){if(13===e.tag){var t=lh(e),n=Zg(e,t);if(null!==n)mh(n,e,t,L$3());jl(e,t)}},Hc=function(){return C$4},Ic=function(e,t){var n=C$4;try{return C$4=e,t()}finally{C$4=n}},yb=function(e,t,n){switch(t){case"input":if(bb(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Db(r);if(!i)throw Error(p$8(90));Wa(r),bb(r,i)}}}break;case"textarea":ib(e,n);break;case"select":null!=(t=n.value)&&fb(e,!!n.multiple,t,!1)}},Gb=Rk,Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Zb(e))?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch(a2){}}function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,reactDom_production_min.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(t))throw Error(p$8(200));return dl(e,t,null,n)},reactDom_production_min.createRoot=function(e,t){if(!ol(e))throw Error(p$8(299));var n=!1,r="",i=ll;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=cl(e,1,!1,null,null,n,!1,r,i),e[uf]=t.current,sf(8===e.nodeType?e.parentNode:e),new ml(t)},reactDom_production_min.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(p$8(188));throw e=Object.keys(e).join(","),Error(p$8(268,e))}return e=null===(e=Zb(t))?null:e.stateNode},reactDom_production_min.flushSync=function(e){return Sk(e)},reactDom_production_min.hydrate=function(e,t,n){if(!pl(t))throw Error(p$8(200));return sl(null,e,t,!0,n)},reactDom_production_min.hydrateRoot=function(e,t,n){if(!ol(e))throw Error(p$8(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=ll;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=fl(t,null,e,1,null!=n?n:null,i,!1,o,s),e[uf]=t.current,sf(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nl(t)},reactDom_production_min.render=function(e,t,n){if(!pl(t))throw Error(p$8(200));return sl(null,e,t,!1,n)},reactDom_production_min.unmountComponentAtNode=function(e){if(!pl(e))throw Error(p$8(40));return!!e._reactRootContainer&&(Sk((function(){sl(null,null,e,!1,(function(){e._reactRootContainer=null,e[uf]=null}))})),!0)},reactDom_production_min.unstable_batchedUpdates=Rk,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!pl(n))throw Error(p$8(200));if(null==e||void 0===e._reactInternals)throw Error(p$8(38));return sl(e,t,n,!1,r)},reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608",checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;const $3f95d3e171760903$var$canUseEffectHooks=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),$3f95d3e171760903$var$useIsomorphicLayoutEffect=$3f95d3e171760903$var$canUseEffectHooks?reactExports.useLayoutEffect:()=>{};var $3f95d3e171760903$export$2e2bcd8739ae039=$3f95d3e171760903$var$useIsomorphicLayoutEffect;let $e504a2438473eda9$var$counter=0;function $e504a2438473eda9$export$2e2bcd8739ae039(e=null){const t="function"==typeof reactExports.useId?reactExports.useId():null,n=reactExports.useRef(e||t||null);return null===n.current&&(n.current=""+$e504a2438473eda9$var$counter++),n.current}const $af466b485b9d515d$export$7d8c6d083caec74a=reactExports.createContext(null);function $c33df6d7c39fd3ee$var$PanelWithForwardedRef({children:e=null,className:t="",collapsible:n=!1,defaultSize:r=null,forwardedRef:i,id:o=null,maxSize:s=100,minSize:a=10,onCollapse:l=null,onResize:c=null,order:u=null,style:h={},tagName:d="div"}){const p=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(null===p)throw Error("Panel components must be rendered within a PanelGroup container");const f=$e504a2438473eda9$export$2e2bcd8739ae039(o),{collapsePanel:m,expandPanel:g,getPanelStyle:_,registerPanel:b,resizePanel:v,unregisterPanel:y}=p,O=reactExports.useRef({onCollapse:l,onResize:c});if(reactExports.useEffect((()=>{O.current.onCollapse=l,O.current.onResize=c})),a<0||a>100)throw Error(`Panel minSize must be between 0 and 100, but was ${a}`);if(s<0||s>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${s}`);if(null!==r){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);a>r&&!n&&(console.error(`Panel minSize ${a} cannot be greater than defaultSize ${r}`),r=a)}$3f95d3e171760903$export$2e2bcd8739ae039((()=>(b(f,{callbacksRef:O,collapsible:n,defaultSize:r,id:f,maxSize:s,minSize:a,order:u}),()=>{y(f)})),[n,r,f,s,a,u,b,y]);const S=_(f),T=reactExports.useRef({size:$c33df6d7c39fd3ee$var$parseSizeFromStyle(S)});return $3f95d3e171760903$export$2e2bcd8739ae039((()=>{T.current.size=$c33df6d7c39fd3ee$var$parseSizeFromStyle(S)})),reactExports.useImperativeHandle(i,(()=>({collapse:()=>m(f),expand:()=>g(f),getCollapsed:()=>0===T.current.size,getSize:()=>T.current.size,resize:e=>v(f,e)})),[m,g,f,v]),reactExports.createElement(d,{children:e,className:t,"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-id":f,"data-panel-size":parseFloat(""+S.flexGrow).toFixed(1),id:`data-panel-id-${f}`,style:{...S,...h}})}$af466b485b9d515d$export$7d8c6d083caec74a.displayName="PanelGroupContext";const $c33df6d7c39fd3ee$export$2ddb90ad54e5f587=reactExports.forwardRef(((e,t)=>reactExports.createElement($c33df6d7c39fd3ee$var$PanelWithForwardedRef,{...e,forwardedRef:t})));function $c33df6d7c39fd3ee$var$parseSizeFromStyle(e){const{flexGrow:t}=e;return"string"==typeof t?parseFloat(t):t}function $6889c3a3ed41cfd1$var$getSerializationKey(e){return e.map((e=>{const{minSize:t,order:n}=e;return n?`${n}:${t}`:`${t}`})).sort(((e,t)=>e.localeCompare(t))).join(",")}function $6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(e,t){try{const n=t.getItem(`PanelGroup:sizes:${e}`);if(n){const e=JSON.parse(n);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function $6889c3a3ed41cfd1$export$9c80c6617f0386da(e,t,n){const r=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(e,n);if(r){var i;return null!==(i=r[$6889c3a3ed41cfd1$var$getSerializationKey(t)])&&void 0!==i?i:null}return null}function $6889c3a3ed41cfd1$export$af183b313c61be4f(e,t,n,r){const i=$6889c3a3ed41cfd1$var$getSerializationKey(t),o=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(e,r)||{};o[i]=n;try{r.setItem(`PanelGroup:sizes:${e}`,JSON.stringify(o))}catch(s){console.error(s)}}$c33df6d7c39fd3ee$var$PanelWithForwardedRef.displayName="Panel",$c33df6d7c39fd3ee$export$2ddb90ad54e5f587.displayName="forwardRef(Panel)";const $a8e83be196252871$export$d6d3992f3becc879=10;function $d6f7e4c3aa9e02d7$export$f50bae335f53943c(e,t,n,r,i,o,s,a){const{sizes:l}=a||{},c=l||o;if(0===i)return c;const u=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(t),h=c.concat();let d=0;{const t=i<0?r:n,o=u.findIndex((e=>e.id===t)),a=u[o],l=c[o],h=$d6f7e4c3aa9e02d7$var$safeResizePanel(a,Math.abs(i),l,e);if(l===h)return c;0===h&&l>0&&s.set(t,l),i=i<0?l-h:h-l}let p=i<0?n:r,f=u.findIndex((e=>e.id===p));for(;;){const t=u[f],n=c[f],r=$d6f7e4c3aa9e02d7$var$safeResizePanel(t,0-(Math.abs(i)-Math.abs(d)),n,e);if(n!==r&&(0===r&&n>0&&s.set(t.id,n),d+=n-r,h[f]=r,d.toPrecision($a8e83be196252871$export$d6d3992f3becc879).localeCompare(Math.abs(i).toPrecision($a8e83be196252871$export$d6d3992f3becc879),void 0,{numeric:!0})>=0))break;if(i<0){if(--f<0)break}else if(++f>=u.length)break}return 0===d?c:(p=i<0?r:n,f=u.findIndex((e=>e.id===p)),h[f]=c[f]+d,h)}function $d6f7e4c3aa9e02d7$export$b8e48269e4faa934(e,t,n){n.forEach(((n,r)=>{const i=t[r];if(i!==n){const{callbacksRef:t,collapsible:o}=e[r],{onCollapse:s,onResize:a}=t.current;a&&a(n),o&&s&&(i||0===n?0!==i&&0===n&&s(!0):s(!1))}}))}function $d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(e,t){if(t.length<2)return[null,null];const n=t.findIndex((t=>t.id===e));if(n<0)return[null,null];const r=n===t.length-1;return[r?t[n-1].id:e,r?e:t[n+1].id]}function $d6f7e4c3aa9e02d7$export$6f43503e166de6fb(e,t,n){if(1===e.size)return"100";const r=n[$d6f7e4c3aa9e02d7$export$a861c0ad45885494(e).findIndex((e=>e.id===t))];return null==r?"0":r.toPrecision($a8e83be196252871$export$d6d3992f3becc879)}function $d6f7e4c3aa9e02d7$export$7361ed18ff57179e(e){const t=document.querySelector(`[data-panel-id="${e}"]`);return t||null}function $d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(e){const t=document.querySelector(`[data-panel-group-id="${e}"]`);return t||null}function $d6f7e4c3aa9e02d7$export$2e27d3a347680388(e){const t=document.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function $d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(e){const t=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e().findIndex((t=>t.getAttribute("data-panel-resize-handle-id")===e));return null!=t?t:null}function $d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function $d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(e){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function $d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(e,t,n){var r,i;const o=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(t),s=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(e).indexOf(o);var a;var l;return[null!==(a=null===(r=n[s])||void 0===r?void 0:r.id)&&void 0!==a?a:null,null!==(l=null===(i=n[s+1])||void 0===i?void 0:i.id)&&void 0!==l?l:null]}function $d6f7e4c3aa9e02d7$export$a861c0ad45885494(e){return Array.from(e.values()).sort(((e,t)=>e.order-t.order))}function $d6f7e4c3aa9e02d7$var$safeResizePanel(e,t,n,r){const i=n+t;if(e.collapsible)if(n>0){if(i<=0)return 0}else{var o;if(!(null==r||null===(o=r.type)||void 0===o?void 0:o.startsWith("key"))&&i<e.minSize)return 0}return Math.min(e.maxSize,Math.max(e.minSize,i))}function $8f51c2d77bf1da88$export$ec391ce65b083ed4(e,t,n,r=0,i=null){const o="horizontal"===n;let s=0;if($8f51c2d77bf1da88$export$764db16956f554f8(e))s=o?e.clientX:e.clientY;else{if(!$8f51c2d77bf1da88$export$c4dfce035d43d1e0(e))return 0;{const t=e.touches[0];s=o?t.screenX:t.screenY}}const a=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(t),l=i||a.getBoundingClientRect();return s-(o?l.left:l.top)-r}function $8f51c2d77bf1da88$export$354b17c0684607ed(e,t,n,r,i,o,s){const{dragOffset:a=0,dragHandleRect:l,sizes:c}=s||{},u=c||o;if($8f51c2d77bf1da88$export$e7bf60a870f429b0(e)){const o="horizontal"===i,s=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(t).getBoundingClientRect(),a=o?s.width:s.height,l=a/(e.shiftKey?10:100);let c=0;switch(e.key){case"ArrowDown":c=o?0:l;break;case"ArrowLeft":c=o?-l:0;break;case"ArrowRight":c=o?l:0;break;case"ArrowUp":c=o?0:-l;break;case"End":c=a;break;case"Home":c=-a}const[h,d]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(t,n,r),p=c<0?h:d,f=r.findIndex((e=>e.id===p)),m=r[f];if(m.collapsible){const e=u[f];0!==e&&e.toPrecision($a8e83be196252871$export$d6d3992f3becc879)!==m.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879)||(c=c<0?-m.minSize*a:m.minSize*a)}return c}return $8f51c2d77bf1da88$export$ec391ce65b083ed4(e,n,i,a,l)}function $8f51c2d77bf1da88$export$e7bf60a870f429b0(e){return"keydown"===e.type}function $8f51c2d77bf1da88$export$764db16956f554f8(e){return e.type.startsWith("mouse")}function $8f51c2d77bf1da88$export$c4dfce035d43d1e0(e){return e.type.startsWith("touch")}function $4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:e,groupId:t,panels:n,setSizes:r,sizes:i,panelSizeBeforeCollapse:o}){reactExports.useEffect((()=>{const{direction:n,panels:s}=e.current,a=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(t),{height:l,width:c}=a.getBoundingClientRect(),u=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(t).map((e=>{const a=e.getAttribute("data-panel-resize-handle-id"),u=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(s),[h,d]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(t,a,u);if(null==h||null==d)return()=>{};let p=0,f=100,m=0,g=0;u.forEach((e=>{e.id===h?(f=e.maxSize,p=e.minSize):(m+=e.minSize,g+=e.maxSize)}));const _=Math.min(f,100-m),b=Math.max(p,100*(u.length-1)-g),v=$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(s,h,i);e.setAttribute("aria-valuemax",""+Math.round(_)),e.setAttribute("aria-valuemin",""+Math.round(b)),e.setAttribute("aria-valuenow",""+Math.round(parseInt(v)));const y=e=>{switch(e.key){case"Enter":{const t=u.findIndex((e=>e.id===h));if(t>=0){const a=u[t],p=i[t];if(null!=p){let t=0;t=p.toPrecision($a8e83be196252871$export$d6d3992f3becc879)<=a.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879)?"horizontal"===n?c:l:-("horizontal"===n?c:l);const u=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(e,s,h,d,t,i,o.current,null);i!==u&&r(u)}}break}}};e.addEventListener("keydown",y);const O=$d6f7e4c3aa9e02d7$export$7361ed18ff57179e(h);return null!=O&&e.setAttribute("aria-controls",O.id),()=>{e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow"),e.removeEventListener("keydown",y),null!=O&&e.removeAttribute("aria-controls")}}));return()=>{u.forEach((e=>e()))}}),[t,n,i])}function $4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:e,handleId:t,resizeHandler:n}){reactExports.useEffect((()=>{if(e||null==n)return;const r=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(t);if(null==r)return;const i=e=>{switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":n(e);break;case"F6":{const n=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(),r=$d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(t);n[e.shiftKey?r>0?r-1:n.length-1:r+1<n.length?r+1:0].focus();break}}};return r.addEventListener("keydown",i),()=>{r.removeEventListener("keydown",i)}}),[e,t,n])}let $8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null;function $8d9d88bebf1a8ace$export$fa35f3322c52262f(e){switch(e){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function $8d9d88bebf1a8ace$export$b61932ee18f96e08(){null!==$8d9d88bebf1a8ace$var$element&&(document.head.removeChild($8d9d88bebf1a8ace$var$element),$8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null)}function $8d9d88bebf1a8ace$export$d395b5dfd066a659(e){if($8d9d88bebf1a8ace$var$currentState===e)return;$8d9d88bebf1a8ace$var$currentState=e;const t=$8d9d88bebf1a8ace$export$fa35f3322c52262f(e);null===$8d9d88bebf1a8ace$var$element&&($8d9d88bebf1a8ace$var$element=document.createElement("style"),document.head.appendChild($8d9d88bebf1a8ace$var$element)),$8d9d88bebf1a8ace$var$element.innerHTML=`*{cursor: ${t}!important;}`}function $f7d932e9304c1581$export$2e2bcd8739ae039(e,t=10){let n=null;return(...r)=>{clearTimeout(n),n=setTimeout((()=>{e(...r)}),t)}}function $c892f0f705e6ded5$export$b141efd0b0fb9174(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const $3daa5d4c086ea816$var$savePanelGroupLayoutDebounced=$f7d932e9304c1581$export$2e2bcd8739ae039($6889c3a3ed41cfd1$export$af183b313c61be4f,100);function $3daa5d4c086ea816$var$throwServerError(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const $3daa5d4c086ea816$var$defaultStorage={getItem:"undefined"!=typeof localStorage?e=>localStorage.getItem(e):$3daa5d4c086ea816$var$throwServerError,setItem:"undefined"!=typeof localStorage?(e,t)=>localStorage.setItem(e,t):$3daa5d4c086ea816$var$throwServerError};function $3daa5d4c086ea816$export$1d05749f6f573bb({autoSaveId:e,children:t=null,className:n="",direction:r,disablePointerEventsDuringResize:i=!1,id:o=null,onLayout:s=null,storage:a=$3daa5d4c086ea816$var$defaultStorage,style:l={},tagName:c="div"}){const u=$e504a2438473eda9$export$2e2bcd8739ae039(o),[h,d]=reactExports.useState(null),[p,f]=reactExports.useState(new Map),m=reactExports.useRef(null),g=reactExports.useRef({onLayout:s});reactExports.useEffect((()=>{g.current.onLayout=s}));const[_,b]=reactExports.useState([]),v=reactExports.useRef(new Map),y=reactExports.useRef(0),O=reactExports.useRef({direction:r,panels:p,sizes:_});$3f95d3e171760903$export$2e2bcd8739ae039((()=>{O.current.direction=r,O.current.panels=p,O.current.sizes=_})),$4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:O,groupId:u,panels:p,setSizes:b,sizes:_,panelSizeBeforeCollapse:v}),reactExports.useEffect((()=>{const{onLayout:e}=g.current;if(e){const{sizes:t}=O.current;t.length>0&&e(t)}}),[_]);const S=reactExports.useRef(!1);$3f95d3e171760903$export$2e2bcd8739ae039((()=>{if(S.current)return;const{panels:e,sizes:t}=O.current;if(t.length>0){S.current=!0;$d6f7e4c3aa9e02d7$export$b8e48269e4faa934($d6f7e4c3aa9e02d7$export$a861c0ad45885494(e),[],t)}}),[_]),$3f95d3e171760903$export$2e2bcd8739ae039((()=>{if(O.current.sizes.length===p.size)return;let t;if(e){const n=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(p);t=$6889c3a3ed41cfd1$export$9c80c6617f0386da(e,n,a)}if(null!=t)b(t);else{const e=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(p);let t=0,n=0,r=0;if(e.forEach((e=>{r+=e.minSize,null===e.defaultSize?t++:n+=e.defaultSize})),n>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(r>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");b(e.map((e=>null===e.defaultSize?(100-n)/t:e.defaultSize)))}}),[e,p]),reactExports.useEffect((()=>{if(e){if(0===_.length||_.length!==p.size)return;const t=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(p);$3daa5d4c086ea816$var$savePanelGroupLayoutDebounced(e,t,_,a)}}),[e,p,_]);const T=reactExports.useCallback((e=>{const{panels:t}=O.current;if(0===t.size)return{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"};return{flexBasis:0,flexGrow:$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(t,e,_),flexShrink:1,overflow:"hidden",pointerEvents:i&&null!==h?"none":void 0}}),[h,r,_]),x=reactExports.useCallback(((e,t)=>{f((n=>{if(n.has(e))return n;const r=new Map(n);return r.set(e,t),r}))}),[]),E=reactExports.useCallback((e=>t=>{t.preventDefault();const{direction:n,panels:r,sizes:i}=O.current,o=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(r),[s,a]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(u,e,o);if(null==s||null==a)return;const l=$8f51c2d77bf1da88$export$354b17c0684607ed(t,u,e,o,n,i,m.current);if(0===l)return;const c=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(u).getBoundingClientRect(),h="horizontal"===n,d=l/(h?c.width:c.height)*100,p=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(t,r,s,a,d,i,v.current,m.current),f=!$c892f0f705e6ded5$export$b141efd0b0fb9174(i,p);($8f51c2d77bf1da88$export$764db16956f554f8(t)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(t))&&y.current!=d&&$8d9d88bebf1a8ace$export$d395b5dfd066a659(f?h?"horizontal":"vertical":h?l<0?"horizontal-min":"horizontal-max":l<0?"vertical-min":"vertical-max"),f&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(o,i,p),b(p)),y.current=d}),[u]),w=reactExports.useCallback((e=>{f((t=>{if(!t.has(e))return t;const n=new Map(t);return n.delete(e),n}))}),[]),C=reactExports.useCallback((e=>{const{panels:t,sizes:n}=O.current,r=t.get(e);if(null==r||!r.collapsible)return;const i=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(t),o=i.indexOf(r);if(o<0)return;const s=n[o];if(0===s)return;v.current.set(e,s);const[a,l]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(e,i);if(null==a||null==l)return;const c=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,t,a,l,o===i.length-1?s:0-s,n,v.current,null);n!==c&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(i,n,c),b(c))}),[]),A=reactExports.useCallback((e=>{const{panels:t,sizes:n}=O.current,r=t.get(e);if(null==r)return;const i=v.current.get(e)||r.minSize;if(!i)return;const o=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(t),s=o.indexOf(r);if(s<0)return;if(0!==n[s])return;const[a,l]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(e,o);if(null==a||null==l)return;const c=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,t,a,l,s===o.length-1?0-i:i,n,v.current,null);n!==c&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(o,n,c),b(c))}),[]),k=reactExports.useCallback(((e,t)=>{const{panels:n,sizes:r}=O.current,i=n.get(e);if(null==i)return;const o=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(n),s=o.indexOf(i);if(s<0)return;const a=r[s];if(a===t)return;i.collapsible&&0===t||(t=Math.min(i.maxSize,Math.max(i.minSize,t)));const[l,c]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(e,o);if(null==l||null==c)return;const u=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,n,l,c,s===o.length-1?a-t:t-a,r,v.current,null);r!==u&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(o,r,u),b(u))}),[]),R=reactExports.useMemo((()=>({activeHandleId:h,collapsePanel:C,direction:r,expandPanel:A,getPanelStyle:T,groupId:u,registerPanel:x,registerResizeHandle:E,resizePanel:k,startDragging:(e,t)=>{if(d(e),$8f51c2d77bf1da88$export$764db16956f554f8(t)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(t)){const n=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(e);m.current={dragHandleRect:n.getBoundingClientRect(),dragOffset:$8f51c2d77bf1da88$export$ec391ce65b083ed4(t,e,r),sizes:O.current.sizes}}},stopDragging:()=>{$8d9d88bebf1a8ace$export$b61932ee18f96e08(),d(null),m.current=null},unregisterPanel:w})),[h,C,r,A,T,u,x,E,k,w]),I={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement($af466b485b9d515d$export$7d8c6d083caec74a.Provider,{children:reactExports.createElement(c,{children:t,className:n,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":u,style:{...I,...l}}),value:R})}function $971f2c37f9d2b98e$export$8829ecf6b6b15484({children:e=null,className:t="",disabled:n=!1,id:r=null,style:i={},tagName:o="div"}){const s=reactExports.useRef(null),a=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(null===a)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:l,direction:c,groupId:u,registerResizeHandle:h,startDragging:d,stopDragging:p}=a,f=$e504a2438473eda9$export$2e2bcd8739ae039(r),m=l===f,[g,_]=reactExports.useState(!1),[b,v]=reactExports.useState(null),y=reactExports.useCallback((()=>{s.current.blur(),p()}),[p]);reactExports.useEffect((()=>{if(n)v(null);else{const e=h(f);v((()=>e))}}),[n,f,h]),reactExports.useEffect((()=>{if(n||null==b||!m)return;const e=e=>{b(e)};return document.body.addEventListener("contextmenu",y),document.body.addEventListener("mousemove",e),document.body.addEventListener("touchmove",e),window.addEventListener("mouseup",y),window.addEventListener("touchend",y),()=>{document.body.removeEventListener("contextmenu",y),document.body.removeEventListener("mousemove",e),document.body.removeEventListener("touchmove",e),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",y)}}),[c,n,m,b,y]),$4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:n,handleId:f,resizeHandler:b});const O={cursor:$8d9d88bebf1a8ace$export$fa35f3322c52262f(c),touchAction:"none",userSelect:"none"};return reactExports.createElement(o,{children:e,className:t,"data-resize-handle-active":m?"pointer":g?"keyboard":void 0,"data-panel-group-direction":c,"data-panel-group-id":u,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":f,onBlur:()=>_(!1),onFocus:()=>_(!0),onMouseDown:e=>d(f,e.nativeEvent),onMouseUp:y,onTouchCancel:y,onTouchEnd:y,onTouchStart:e=>d(f,e.nativeEvent),ref:s,role:"separator",style:{...O,...i},tabIndex:0})}$3daa5d4c086ea816$export$1d05749f6f573bb.displayName="PanelGroup",$971f2c37f9d2b98e$export$8829ecf6b6b15484.displayName="PanelResizeHandle";var python$1={exports:{}},coreBrowser={exports:{}},blockly$1={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed,hasRequiredBlockly,hasRequiredCoreBrowser;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,blockly_compressed.exports=function(){var e={},t=function(e,t,n,r){e=e+" was deprecated in "+t+" and will be deleted in "+n+".",r&&(e+="\nUse "+r+" instead."),console.warn(e)},n=function(e,t){r(),Ra=setTimeout((function(){t&&t.handleRightClick(e)}),wa)},r=function(){Ra&&(clearTimeout(Ra),Ra=0)},i=function(){Aa=null},o=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&a(e)},s=function(e){return`${e.pointerId}`},a=function(e){const t=s(e);return Aa?Aa===t:"pointerdown"===e.type&&(Aa=t,!0)},l=function(e){if(t("setClientFromTouch()","version 9","version 10"),e.type.startsWith("touch")&&e.changedTouches){const t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}},c=function(e){return t("isMouseOrTouchEvent()","version 9","version 10"),e.type.startsWith("touch")||e.type.startsWith("mouse")||e.type.startsWith("pointer")},u=function(e){return t("isTouchEvent()","version 9","version 10"),e.type.startsWith("touch")||e.type.startsWith("pointer")},h=function(e){t("splitEventByTouches()","version 9","version 10");const n=[];if(e.changedTouches)for(let t=0;t<e.changedTouches.length;t++)n[t]={type:e.type,changedTouches:[e.changedTouches[t]],target:e.target,stopPropagation(){e.stopPropagation()},preventDefault(){e.preventDefault()}};else n.push(e);return n},d=function(e,n,r,i,s,a){function l(e){(s||o(e))&&(r?i.call(r,e):i(e))}if(void 0!==a&&t("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),a=[],n in ka)for(let t=0;t<ka[n].length;t++){const r=ka[n][t];e.addEventListener(r,l,!1),a.push([e,r,l])}else e.addEventListener(n,l,!1),a.push([e,n,l]);return a},p=function(e,t,n,r){function i(e){n?r.call(n,e):r(e)}const o=[];if(t in ka)for(let s=0;s<ka[t].length;s++){const n=ka[t][s];e.addEventListener(n,i,!1),o.push([e,n,i])}else e.addEventListener(t,i,!1),o.push([e,t,i]);return o},f=function(e){const t=e[e.length-1][2];for(;e.length;){const t=e.pop();t[0].removeEventListener(t[1],t[2],!1)}return t},m=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||"true"===e.target.getAttribute("data-is-text-input"))return!0;if(e.target instanceof HTMLInputElement)return"text"===(e=e.target).type||"number"===e.type||"email"===e.type||"password"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type;if(e.target instanceof HTMLTextAreaElement)return!0}return!1},g=function(e){return!(!e.ctrlKey||!Ba)||2===e.button},_=function(e,t,n){const r=t.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,n||(n=t.getScreenCTM().inverse()),r.matrixTransform(n)},b=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Ua,y:e.deltaY*Ua};case 2:return{x:e.deltaX*Va,y:e.deltaY*Va}}},v=function(e){return Ha[e]||null},y=function(){const e=[];for(const t in Ha)e.push(Ha[t]);return e},O=function(e){Ha[e.id]=e},S=function(e){delete Ha[e.id]},T=function(){return Qa},x=function(e){Qa=e},E=function(){return za},w=function(e){za=e},C=function(){return ja},A=function(e){ja=e},k=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),n=e.getCachedParentSvgSize();var r=t.parentElement;if(r instanceof HTMLElement){var i=r.offsetWidth;r=r.offsetHeight,n.width!==i&&(t.setAttribute("width",i+"px"),e.setCachedParentSvgSize(i,null)),n.height!==r&&(t.setAttribute("height",r+"px"),e.setCachedParentSvgSize(null,r)),e.resize()}},R=function(e,t){const n=Object.create(null),r=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=r.indexOf(e),r.splice(e,r.length-e));for(let i,o=0;i=r[o];o++)n[i.type]?n[i.type]++:n[i.type]=1;return n},I=function(e){return function(){this.jsonInit(e)}},M=function(e){Ya.defineBlocksWithJsonArrayInternal(e)},$=function(e){L(P(e))},P=function(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];if(!r){console.warn(`Block definition #${n} in JSON array is ${r}. Skipping`);continue}const i=r.type;i?t[i]={init:I(r)}:console.warn(`Block definition #${n} in JSON array is missing a type attribute. Skipping.`)}return t},L=function(e){for(const t of Object.keys(e)){const n=e[t];t in Za&&console.warn(`Block definiton "${t}" overwrites previous definition.`),Za[t]=n}},D=function(e,t,n){e=document.createElementNS(Ka,String(e));for(const r in t)e.setAttribute(r,`${t[r]}`);return n&&n.appendChild(e),e},N=function(e,t){return!(t=t.split(" ")).every((t=>e.classList.contains(t)))&&(e.classList.add(...t),!0)},B=function(e,t){e.classList.remove(...t.split(" "))},F=function(e,t){return!(t=t.split(" ")).every((t=>!e.classList.contains(t)))&&(e.classList.remove(...t),!0)},G=function(e,t){return e.classList.contains(t)},U=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},V=function(e,t){const n=t.nextSibling;if(!(t=t.parentNode))throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},W=function(e,t){return!!(e.compareDocumentPosition(t)&qa.DOCUMENT_POSITION_CONTAINED_BY)},H=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Q=function(){nl++,tl||(tl=Object.create(null))},z=function(){--nl||(tl=null)},j=function(e){const t=e.textContent+"\n"+e.className.baseVal;let n;if(tl&&(n=tl[t]))return n;try{n=e.getComputedTextLength()}catch(r){return 8*e.textContent.length}return tl&&(tl[t]=n),n},X=function(e,t,n,r){return Y(e,t+"pt",n,r)},Y=function(e,t,n,r){const i=e.textContent;var o;return e=i+"\n"+e.className.baseVal,tl&&(o=tl[e])||(rl||((o=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(o),rl=o.getContext("2d")),rl.font=n+" "+t+" "+r,o=i?rl.measureText(i).width:0,tl&&(tl[e]=o)),o},Z=function(e,t,n,r){const i=document.createElement("span");i.style.font=n+" "+t+" "+r,i.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0",(t=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),t.appendChild(i),t.appendChild(e),document.body.appendChild(t),n={height:0,baseline:0};try{t.style.alignItems="baseline",n.baseline=e.offsetTop-i.offsetTop,t.style.alignItems="flex-end",n.height=e.offsetTop-i.offsetTop}finally{document.body.removeChild(t)}return n},q=function(e){return e*Math.PI/180},K=function(e){return 180*e/Math.PI},J=function(e,t,n){if(n<e){const t=n;n=e,e=t}return Math.max(e,Math.min(t,n))},ee=function(e){return cl.getSizeInternal(e)},te=function(e){if("none"!==re(e,"display"))return ne(e);const t=e.style,n=t.display,r=t.visibility,i=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const o=e.offsetWidth;return e=e.offsetHeight,t.display=n,t.position=i,t.visibility=r,new ll(o,e)},ne=function(e){return new ll(e.offsetWidth,e.offsetHeight)},re=function(e,t){return(e=window.getComputedStyle(e))[t]||e.getPropertyValue(t)},ie=function(e,n){return t("Blockly.utils.style.getCascadedStyle","version 9","version 10"),e.currentStyle?e.currentStyle[n]:""},oe=function(e){const t=new al(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new al(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),t.x=e.left+n.x,t.y=e.top+n.y,t},se=function(){const e=document.body,t=document.documentElement;return new al(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},ae=function(e){const t=parseFloat(re(e,"borderLeftWidth")),n=parseFloat(re(e,"borderRightWidth")),r=parseFloat(re(e,"borderTopWidth"));return e=parseFloat(re(e,"borderBottomWidth")),new sl(r,e,t,n)},le=function(e,t,n){e=ce(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},ce=function(e,t,n){var r=oe(e),i=oe(t),o=ae(t);const s=r.x-i.x-o.left;return r=r.y-i.y-o.top,i=ne(e),e=t.clientWidth-i.width,i=t.clientHeight-i.height,o=t.scrollLeft,t=t.scrollTop,n?(o+=s-e/2,t+=r-i/2):(o+=Math.min(s,Math.max(s-e,0)),t+=Math.min(r,Math.max(r-i,0))),new al(o,t)},ue=function(){hl||((hl=document.createElement("div")).className="blocklyDropDownDiv",(C()||document.body).appendChild(hl),(dl=document.createElement("div")).className="blocklyDropDownContent",hl.appendChild(dl),(pl=document.createElement("div")).className="blocklyDropDownArrow",hl.appendChild(pl),hl.style.opacity="0",hl.style.transition="transform "+bl+"s, opacity "+bl+"s",hl.addEventListener("focusin",(function(){N(hl,"blocklyFocused")})),hl.addEventListener("focusout",(function(){F(hl,"blocklyFocused")})))},he=function(e){Tl=e},de=function(){return xl},pe=function(){return dl},fe=function(){dl.textContent="",dl.style.width=""},me=function(e,t){hl.style.backgroundColor=e,hl.style.borderColor=t},ge=function(e,t,n,r){return ye(be(t),e,n,r)},_e=function(e,t,n){return El=!0,ye(ve(e),e,t,n)},be=function(e){var t=e.getSvgRoot();const n=e.workspace.scale,r=e.height*n;return e=e.width*n,t=oe(t),new sl(t.y,t.y+r,t.x,t.x+e)},ve=function(e){return e=e.getScaledBBox(),new sl(e.top,e.bottom,e.left,e.right)},ye=function(e,t,n,r){const i=e.left+(e.right-e.left)/2,o=e.bottom;e=e.top,r&&(e+=r);let s=(r=t.getSourceBlock()).workspace;for(;s.options.parentWorkspace;)s=s.options.parentWorkspace;return he(s.getParentSvg().parentNode),Oe(t,r.RTL,i,o,i,e,n)},Oe=function(e,t,n,r,i,o,s){return xl=e,yl=s||null,hl.style.direction=t?"rtl":"ltr",e=T(),Ol=e.getRenderer().getClassName(),Sl=e.getTheme().getClassName(),Ol&&N(hl,Ol),Sl&&N(hl,Sl),Re(n,r,i,o)},Se=function(e,t,n,r){return{initialX:(e=Ee(e,n.left,n.right,r.width)).divX,initialY:t,finalX:e.divX,finalY:t+_l,arrowX:e.arrowX,arrowY:-(fl/2+ml),arrowAtTop:!0,arrowVisible:!0}},Te=function(e,t,n,r){return{initialX:(e=Ee(e,n.left,n.right,r.width)).divX,initialY:t-r.height,finalX:e.divX,finalY:t-r.height-_l,arrowX:e.arrowX,arrowY:r.height-2*ml-fl/2,arrowAtTop:!1,arrowVisible:!0}},xe=function(e,t,n){return{initialX:(e=Ee(e,t.left,t.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Ee=function(e,t,n,r){return t=J(t,e-r/2,n-r),{arrowX:e=J(n=gl,e=e-fl/2-t,r-n-fl),divX:t}},we=function(){return!!xl},Ce=function(e,t){return xl===e&&(t?ke():Ae(),!0)},Ae=function(){hl.style.transform="translate(0, 0)",hl.style.opacity="0",vl=setTimeout((function(){ke()}),1e3*bl),yl&&(yl(),yl=null)},ke=function(){we()&&(vl&&clearTimeout(vl),hl.style.transform="",hl.style.left="",hl.style.top="",hl.style.opacity="0",hl.style.display="none",hl.style.backgroundColor="",hl.style.borderColor="",yl&&(yl(),yl=null),fe(),xl=null,Ol&&(F(hl,Ol),Ol=""),Sl&&(F(hl,Sl),Sl=""),T().markFocused())},Re=function(e,t,n,r){(e=wl.getPositionMetrics(e,t,n,r)).arrowVisible?(pl.style.display="",pl.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",pl.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):pl.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),r=Math.floor(e.finalX);const i=Math.floor(e.finalY);return hl.style.left=t+"px",hl.style.top=n+"px",hl.style.display="block",hl.style.opacity="1",hl.style.transform="translate("+(r-t)+"px,"+(i-n)+"px)",!!e.arrowAtTop},Ie=function(){if(xl){var e=xl.getSourceBlock();const t=(e=El?ve(xl):be(e)).left+(e.right-e.left)/2;Re(t,e.bottom,t,e.top)}else Ae()},Me=function(e,t,n,r){if(!(e instanceof Ml)&&"string"!=typeof e||""===String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof t||""===t.trim())throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const i=t.toLowerCase();if(!n)throw Error("Can not register a null value");let o=Al[e],s=Rl[e];if(o||(o=Al[e]=Object.create(null),s=Rl[e]=Object.create(null)),$e(e,n),!r&&o[i])throw Error('Name "'+i+'" with type "'+e+'" already registered.');o[i]=n,s[i]=t},$e=function(e,t){if(e===String(Ml.FIELD)&&"function"!=typeof t.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},Pe=function(e,t){e=String(e).toLowerCase(),t=t.toLowerCase();const n=Al[e];n&&n[t]?(delete Al[e][t],delete Rl[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},Le=function(e,t,n){e=String(e).toLowerCase(),t=t.toLowerCase();const r=Al[e];if(!r||!r[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",n)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return r[t]},De=function(e,t){return e=String(e).toLowerCase(),t=t.toLowerCase(),!!(e=Al[e])&&!!e[t]},Ne=function(e,t,n){return Le(e,t,n)},Be=function(e,t,n){return Le(e,t,n)},Fe=function(e,t,n){e=String(e).toLowerCase();var r=Al[e];if(!r){if(r=`Unable to find [${e}] in the registry.`,n)throw Error(`${r} You must require or register a ${e} plugin.`);return console.warn(r),null}if(!t)return r;e=Rl[e],n=Object.create(null),t=Object.keys(r);for(let i=0;i<t.length;i++){const o=t[i];n[e[o]]=r[o]}return n},Ge=function(e,t,n){return"function"==typeof(t=t.plugins[e.toString()]||Il)?t:Ne(e,t,n)},Ue=function(){return"blockly-"+(Dl++).toString(36)},Ve=function(){return Ll.genUid()},We=function(e){Hl=e},He=function(){return Hl},Qe=function(e){xc.fireInternal(e)},ze=function(e){Ke()&&(Tc.length||setTimeout(je,0),Tc.push(e))},je=function(){const e=Xe(Tc,!0);Tc.length=0;for(let t,n=0;t=e[n];n++){if(!t.workspaceId)continue;const e=v(t.workspaceId);e&&e.fireChangeListener(t)}},Xe=function(e,t){e=e.slice(),t||e.reverse();const n=[],r=Object.create(null);for(let s,a=0;s=e[a];a++)if(!s.isNull()){var i=[s.isUiEvent?Jl:s.type,s.blockId,s.workspaceId].join(" "),o=r[i];const e=o?o.event:null;o?s.type===Yl&&o.index===a-1?(i=s,e.newParentId=i.newParentId,e.newInputName=i.newInputName,e.newCoordinate=i.newCoordinate,o.index=a):s.type===Xl&&s.element===e.element&&s.name===e.name?e.newValue=s.newValue:s.type===lc?(o=s,e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):s.type===nc&&e.type===ic||(r[i]={event:s,index:a},n.push(s)):(r[i]={event:s,index:a},n.push(s))}e=n.filter((function(e){return!e.isNull()})),t||e.reverse();for(let s,a=1;s=e[a];a++)s.type===Xl&&"mutation"===s.element&&e.unshift(e.splice(a,1)[0]);return e},Ye=function(){for(let e,t=0;e=Tc[t];t++)e.recordUndo=!1},Ze=function(){Ql++},qe=function(){Ql--},Ke=function(){return 0===Ql},Je=function(){return Wl},et=function(e){xc.setGroupInternal(e)},tt=function(e){Wl="boolean"==typeof e?e?Ve():"":e},nt=function(e){const t=[];e=e.getDescendants(!1);for(let n,r=0;n=e[r];r++)t[r]=n.id;return t},rt=function(e,t){var n=ot(e.type);if(!n)throw Error("Unknown event type.");return it(n)?n.fromJson(e,t):((n=new n).fromJson(e),n.workspaceId=t.id,n)},it=function(e){return Object.getOwnPropertyDescriptors(e).fromJson&&"function"==typeof e.fromJson},ot=function(e){const t=Ne(Ml.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},st=function(e){if((e.type===Yl||e.type===zl)&&e.workspaceId){var t=v(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const n=Hl;try{Hl=!1;const n=e.getParent();if(n&&n.isEnabled()){const t=e.getDescendants(!1);for(let e,n=0;e=t[n];n++)e.setEnabled(!0)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do{e.setEnabled(!1),e=e.getNextBlock()}while(e)}finally{Hl=n}}}},at=function(e){({document:Fl=Fl,DOMParser:Gl=Gl,XMLSerializer:Ul=Ul}=e)},lt=function(){return t("Blockly.utils.xml.getDocument","version 9","version 10"),Fl},ct=function(e){t("Blockly.utils.xml.setDocument","version 9","version 10"),Fl=e},ut=function(e){return Fl.createElementNS(Vl,e)},ht=function(e){return Fl.createTextNode(e)},dt=function(e){return(new Gl).parseFromString(e,"text/xml")},pt=function(e){return(new Ul).serializeToString(e)},ft=function(e,t){Ac(e,t)},mt=function(e){Ac=e},gt=function(e,t){Ic.confirmInternal(e,t)},_t=function(e,t){kc(e,t)},bt=function(e){kc=e},vt=function(e,t,n){Rc(e,t,n)},yt=function(e){Rc=e},Ot=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0;n<e.length;n++){const r=e[n].getVarModels();if(r)for(let e=0;e<r.length;e++){const n=r[e];n.getId()&&t.add(n)}}return Array.from(t.values())},St=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let r,i=0;r=e[i];i++){var n=r.getDeveloperVariables;if(n){n=n();for(let e=0;e<n.length;e++)t.add(n[e])}}return Array.from(t.values())},Tt=function(e){let t=[];const n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(e){At(e.getTargetWorkspace())})),t.push(n),e=xt(e),t.concat(e)},xt=function(e){const t=[];if(0<(e=e.getVariablesOfType("")).length){var n=e[e.length-1];if(Za.variables_set){var r=ut("block");r.setAttribute("type","variables_set"),r.setAttribute("gap",Za.math_change?"8":"24"),r.appendChild($t(n)),t.push(r)}if(Za.math_change&&((r=ut("block")).setAttribute("type","math_change"),r.setAttribute("gap",Za.variables_get?"20":"8"),r.appendChild($t(n)),n=tn('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),r.appendChild(n),t.push(r)),Za.variables_get){e.sort(Fc.compareByName);for(let r,i=0;r=e[i];i++)(n=ut("block")).setAttribute("type","variables_get"),n.setAttribute("gap","8"),n.appendChild($t(r)),t.push(n)}}return t},Et=function(e){return Bc.generateUniqueNameInternal(e)},wt=function(e){return Ct(Nc.charAt(0),e.getAllVariableNames())},Ct=function(e,t){if(!t.length)return e;const n=Nc;let r="",i=n.indexOf(e);for(;;){let o=!1;for(let n=0;n<t.length;n++)if(t[n].toLowerCase()===e){o=!0;break}if(!o)break;i++,i===n.length&&(i=0,r=`${Number(r)+1}`),e=n.charAt(i)+r}return e},At=function(e,t,n){function r(n){Rt(wc.NEW_VARIABLE_TITLE,n,(function(n){if(n){const o=Mt(n,e);if(o){let e;o.type===i?e=wc.VARIABLE_ALREADY_EXISTS.replace("%1",o.name):(e=wc.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,e=e.replace("%1",o.name).replace("%2",o.type)),ft(e,(function(){r(n)}))}else e.createVariable(n,i),t&&t(n)}else t&&t(null)}))}const i=n||"";r("")},kt=function(e,t,n){function r(i){const o=wc.RENAME_VARIABLE_TITLE.replace("%1",t.name);Rt(o,i,(function(i){if(i){var o=It(i,t.type,e);o?(o=wc.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",o.name).replace("%2",o.type),ft(o,(function(){r(i)}))):(e.renameVariableById(t.getId(),i),n&&n(i))}else n&&n(null)}))}r("")},Rt=function(e,t,n){vt(e,t,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())===wc.RENAME_VARIABLE||e===wc.NEW_VARIABLE)&&(e=null),n(e)}))},It=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let r,i=0;r=n[i];i++)if(r.name.toLowerCase()===e&&r.type!==t)return r;return null},Mt=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n,r=0;n=t[r];r++)if(n.name.toLowerCase()===e)return n;return null},$t=function(e){const t=ut("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=ht(e.name),t.appendChild(e),t},Pt=function(e,t,n,r){let i=Lt(e,t,n,r);return i||(i=Dt(e,t,n,r)),i},Lt=function(e,t,n,r){const i=e.getPotentialVariableMap();let o=null;if(t&&(o=e.getVariableById(t),!o&&i&&(o=i.getVariableById(t)),o))return o;if(n){if(void 0===r)throw Error("Tried to look up a variable by name without a type");o=e.getVariable(n,r),!o&&i&&(o=i.getVariable(n,r))}return o},Dt=function(e,t,n,r){const i=e.getPotentialVariableMap();return n||(n=Et(e.isFlyout?e.targetWorkspace:e)),i?i.createVariable(n,r,t):e.createVariable(n,r,t)},Nt=function(e,t){e=e.getAllVariables();const n=[];if(t.length!==e.length)for(let r=0;r<e.length;r++){const i=e[r];-1===t.indexOf(i)&&n.push(i)}return n},Bt=function(e){if(Wc)throw Error("CSS already injected");Hc+="\n"+e},Ft=function(e,t){Wc||(Wc=!0,e&&(e=t.replace(/[\\/]$/,""),t=Hc.replace(/<<<PATH>>>/g,e),Hc="",(e=document.createElement("style")).id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Gt=function(e){const t=new al(0,0);var n=e.x&&e.getAttribute("x");const r=e.y&&e.getAttribute("y");return n&&(t.x=parseInt(n)),r&&(t.y=parseInt(r)),(n=(n=e.getAttribute("transform"))&&n.match(jc))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(Xc))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Ut=function(e){let t=0,n=0;for(;e;){const r=Gt(e);if(t+=r.x,n+=r.y,-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new al(t,n)},Vt=function(){return t("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},Wt=function(){const e=se();return new sl(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Ht=function(){const e=document.documentElement,t=window;return new al(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Qt=function(e,t){var n=t.x;t=t.y;const r=e.getInjectionDiv().getBoundingClientRect();return n=new al(n-r.left,t-r.top),t=e.getOriginOffsetInPixels(),al.difference(n,t).scale(1/e.scale)},zt=function(e,t){const n=ut("xml");var r=jt(Ot(e));r.hasChildNodes()&&n.appendChild(r),r=e.getTopComments(!0);for(let i=0;i<r.length;i++)n.appendChild(r[i].toXmlWithXY(t));for(e=e.getTopBlocks(!0),r=0;r<e.length;r++)n.appendChild(Xt(e[r],t));return n},jt=function(e){const t=ut("variables");for(let n=0;n<e.length;n++){const r=e[n],i=ut("variable");i.appendChild(ht(r.name)),r.type&&i.setAttribute("type",r.type),i.id=r.getId(),t.appendChild(i)}return t},Xt=function(e,t){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;let n=0;e.workspace.RTL&&(n=e.workspace.getWidth()),t=qt(e,t);const r=e.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(e.workspace.RTL?n-r.x:r.x)),t.setAttribute("y",Math.round(r.y)),t},Yt=function(e){if(e.isSerializable()){const t=ut("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Zt=function(e,t){for(let n=0;n<e.inputList.length;n++){const r=e.inputList[n];for(let e=0;e<r.fieldRow.length;e++){const n=Yt(r.fieldRow[e]);n&&t.appendChild(n)}}},qt=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?qt(t):new DocumentFragment;const n=ut(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),t||n.setAttribute("id",e.id),e.mutationToDom){var r=e.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&n.appendChild(r)}if(Zt(e,n),r=e.getCommentText()){var i=e.commentModel.size,o=e.commentModel.pinned,s=ut("comment");s.appendChild(ht(r)),s.setAttribute("pinned",o),s.setAttribute("h",i.height),s.setAttribute("w",i.width),n.appendChild(s)}for(e.data&&((r=ut("data")).appendChild(ht(e.data)),n.appendChild(r)),r=0;r<e.inputList.length;r++){var a=void 0;if(o=!0,(i=e.inputList[r]).type!==Bl.DUMMY){s=i.connection.targetBlock(),i.type===Bl.VALUE?a=ut("value"):i.type===Bl.STATEMENT&&(a=ut("statement"));const e=i.connection.getShadowDom();!e||s&&s.isShadow()||a.appendChild(Kt(e,t)),s&&(s=qt(s,t)).nodeType===qa.ELEMENT_NODE&&(a.appendChild(s),o=!1),a.setAttribute("name",i.name),o||n.appendChild(a)}}let l;return void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&n.setAttribute("inline",e.inputsInline.toString()),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isEnabled()||n.setAttribute("disabled","true"),e.isDeletable()||e.isShadow()||n.setAttribute("deletable","false"),e.isMovable()||e.isShadow()||n.setAttribute("movable","false"),e.isEditable()||n.setAttribute("editable","false"),(a=e.getNextBlock())&&(r=qt(a,t)).nodeType===qa.ELEMENT_NODE&&(l=ut("next"),l.appendChild(r),n.appendChild(l)),!(e=e.nextConnection&&e.nextConnection.getShadowDom())||a&&a.isShadow()||l.appendChild(Kt(e,t)),n},Kt=function(e,t){let n,r=e=e.cloneNode(!0);for(;r;)if(t&&"shadow"===r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;){let e;n=r,r=r.parentNode,n.nodeType===qa.TEXT_NODE&&""===n.data.trim()&&(null==(e=r)?void 0:e.firstChild)!==n&&U(n)}r&&(n=r,r=r.nextSibling,n.nodeType===qa.TEXT_NODE&&""===n.data.trim()&&U(n))}return e},Jt=function(e){return pt(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},en=function(e){e=Jt(e).split("<");let t="";for(let n=1;n<e.length;n++){const r=e[n];"/"===r[0]&&(t=t.substring(2)),e[n]=t+"<"+r,"/"!==r[0]&&"/>"!==r.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},tn=function(e){const t=dt(e);if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return t.documentElement},nn=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=rn(e,t),t.setResizesEnabled(!0),e},rn=function(e,t){let n=0;t.RTL&&(n=t.getWidth());const r=[];Q();const i=Je();i||et(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let o=!0;try{for(let i,s=0;i=e.childNodes[s];s++){const e=i.nodeName.toLowerCase(),s=i;if("block"===e||"shadow"===e&&!He()){const e=sn(s,t);r.push(e.id);const i=s.hasAttribute("x")?parseInt(s.getAttribute("x")):10,a=s.hasAttribute("y")?parseInt(s.getAttribute("y")):10;isNaN(i)||isNaN(a)||e.moveBy(t.RTL?n-i:i,a),o=!1}else{if("shadow"===e)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===e)t.rendered?eu.fromXmlRendered(s,t,n):Gc.fromXml(s,t);else if("variables"===e){if(!o)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");an(s,t),o=!1}}}}finally{i||et(!1),z()}return t.setResizesEnabled&&t.setResizesEnabled(!0),Qe(new(ot(pc))(t)),r},on=function(e,t){if(!t.getBlocksBoundingBox)return rn(e,t);var n=t.getBlocksBoundingBox();if(e=rn(e,t),n&&n.top!==n.bottom){var r=n.bottom;n=t.RTL?n.right:n.left;var i=1/0;let o=-1/0,s=1/0;for(let n=0;n<e.length;n++){const r=t.getBlockById(e[n]).getRelativeToSurfaceXY();r.y<s&&(s=r.y),r.x<i&&(i=r.x),r.x>o&&(o=r.x)}for(r=r-s+10,n=t.RTL?n-o:n-i,i=0;i<e.length;i++)t.getBlockById(e[i]).moveBy(n,r)}return e},sn=function(e,t){Ze();var n=t.getAllVariables();let r;try{if(r=gn(e,t),t.rendered){const e=r,n=r.getDescendants(!1);e.setConnectionTracking(!1);for(let t=n.length-1;0<=t;t--)n[t].initSvg();for(let t=n.length-1;0<=t;t--)n[t].render(!1);setTimeout((function(){e.disposed||e.setConnectionTracking(!0)}),1),e.updateDisabled(),t.resizeContents()}else{const e=r.getDescendants(!1);for(let t=e.length-1;0<=t;t--)e[t].initModel()}}finally{qe()}if(Ke()){for(e=Nt(t,n),t=0;t<e.length;t++)n=e[t],Qe(new(ot(Zl))(n));Qe(new(ot(zl))(r))}return r},an=function(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n],i=r.getAttribute("type"),o=r.getAttribute("id");t.createVariable(r.textContent,i,o)}},ln=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let n=0;n<e.children.length;n++){const r=e.children[n];if(r.nodeType!==qa.TEXT_NODE)switch(r.nodeName.toLowerCase()){case"mutation":t.mutation.push(r);break;case"comment":t.comment.push(r);break;case"data":t.data.push(r);break;case"title":case"field":t.field.push(r);break;case"value":case"statement":t.input.push(r);break;case"next":t.next.push(r);break;default:console.warn("Ignoring unknown tag: "+r.nodeName)}}return t},cn=function(e,t){let n=!1;for(let r=0;r<e.length;r++){const i=e[r];t.domToMutation&&(t.domToMutation(i),t.initSvg&&(n=!0))}return n},un=function(e,t){for(let r=0;r<e.length;r++){var n=e[r];const i=n.textContent,o="true"===n.getAttribute("pinned"),s=parseInt(n.getAttribute("w"));if(n=parseInt(n.getAttribute("h")),t.setCommentText(i),t.commentModel.pinned=o,isNaN(s)||isNaN(n)||(t.commentModel.size=new ll(s,n)),o&&t.getCommentIcon&&!t.isInFlyout){const e=t;setTimeout((function(){e.getCommentIcon().setVisible(!0)}),1)}}},hn=function(e,t){for(let n=0;n<e.length;n++)t.data=e[n].textContent},dn=function(e,t){for(let n=0;n<e.length;n++){const r=e[n],i=r.getAttribute("name");_n(t,i,r)}},pn=function(e){const t={childBlockElement:null,childShadowElement:null};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];r.nodeType===qa.ELEMENT_NODE&&("block"===r.nodeName.toLowerCase()?t.childBlockElement=r:"shadow"===r.nodeName.toLowerCase()&&(t.childShadowElement=r))}return t},fn=function(e,t,n,r){for(let o=0;o<e.length;o++){var i=e[o];const s=i.getAttribute("name"),a=n.getInput(s);if(!a){console.warn("Ignoring non-existent input "+s+" in block "+r);break}if((i=pn(i)).childBlockElement){if(!a.connection)throw TypeError("Input connection does not exist.");gn(i.childBlockElement,t,a.connection,!1)}if(i.childShadowElement){let e;null==(e=a.connection)||e.setShadowDom(i.childShadowElement)}}},mn=function(e,t,n){for(let r=0;r<e.length;r++){const i=pn(e[r]);if(i.childBlockElement){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");gn(i.childBlockElement,t,n.nextConnection,!0)}i.childShadowElement&&n.nextConnection&&n.nextConnection.setShadowDom(i.childShadowElement)}},gn=function(e,t,n,r){const i=e.getAttribute("type");if(!i)throw TypeError("Block type unspecified: "+e.outerHTML);var o=e.getAttribute("id");o=t.newBlock(i,o);const s=ln(e),a=cn(s.mutation,o);if(un(s.comment,o),hn(s.data,o),n)if(r){if(!o.previousConnection)throw TypeError("Next block does not have previous statement.");n.connect(o.previousConnection)}else if(o.outputConnection)n.connect(o.outputConnection);else{if(!o.previousConnection)throw TypeError("Child block does not have output or previous statement.");n.connect(o.previousConnection)}if(dn(s.field,o),fn(s.input,t,o,i),mn(s.next,t,o),a&&o.initSvg(),(t=e.getAttribute("inline"))&&o.setInputsInline("true"===t),(t=e.getAttribute("disabled"))&&o.setEnabled("true"!==t&&"disabled"!==t),(t=e.getAttribute("deletable"))&&o.setDeletable("true"===t),(t=e.getAttribute("movable"))&&o.setMovable("true"===t),(t=e.getAttribute("editable"))&&o.setEditable("true"===t),(t=e.getAttribute("collapsed"))&&o.setCollapsed("true"===t),"shadow"===e.nodeName.toLowerCase()){for(e=o.getChildren(!1),t=0;t<e.length;t++)if(!e[t].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(o.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");o.setShadow(!0)}return o},_n=function(e,t,n){const r=e.getField(t);r?r.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},bn=function(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if("next"===n.nodeName.toLowerCase()){e.removeChild(n);break}}},vn=function(e,n){return t("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),e.startsWith(n)},yn=function(e){return e.length?e.reduce((function(e,t){return e.length<t.length?e:t})).length:0},On=function(e,t){if(!e.length)return 0;if(1===e.length)return e[0].length;let n,r=0;for(t=t||yn(e),n=0;n<t;n++){for(var i=e[0][n],o=1;o<e.length;o++)if(i!==e[o][n])return r;" "===i&&(r=n+1)}for(i=1;i<e.length;i++)if((o=e[i][n])&&" "!==o)return r;return t},Sn=function(e,t){if(!e.length)return 0;if(1===e.length)return e[0].length;let n,r=0;for(t=t||yn(e),n=0;n<t;n++){for(var i=e[0].substr(-n-1,1),o=1;o<e.length;o++)if(i!==e[o].substr(-n-1,1))return r;" "===i&&(r=n+1)}for(i=1;i<e.length;i++)if((o=e[i].charAt(e[i].length-n-1))&&" "!==o)return r;return t},Tn=function(e,t){e=e.split("\n");for(let n=0;n<e.length;n++)e[n]=xn(e[n],t);return e.join("\n")},xn=function(e,t){if(e.length<=t)return e;const n=e.trim().split(/\s+/);for(var r=0;r<n.length;r++)n[r].length>t&&(t=n[r].length);var i=-1/0;let o,s=1;do{r=i,o=e,e=[],i=n.length/s;let a=1;for(let t=0;t<n.length-1;t++)a<(t+1.5)/i?(a++,e[t]=!0):e[t]=!1;e=wn(n,e,t),i=En(n,e,t),e=Cn(n,e),s++}while(i>r);return o},En=function(e,t,n){const r=[0],i=[];for(var o=0;o<e.length;o++)r[r.length-1]+=e[o].length,!0===t[o]?(r.push(0),i.push(e[o].charAt(e[o].length-1))):!1===t[o]&&r[r.length-1]++;for(e=Math.max(...r),t=0,o=0;o<r.length;o++)t-=2*Math.pow(Math.abs(n-r[o]),1.5),t-=Math.pow(e-r[o],1.5),-1!==".?!".indexOf(i[o])?t+=n/3:-1!==",;)]}".indexOf(i[o])&&(t+=n/4);return 1<r.length&&r[r.length-1]<=r[r.length-2]&&(t+=.5),t},wn=function(e,t,n){let r,i=En(e,t,n);for(let o=0;o<t.length-1;o++){if(t[o]===t[o+1])continue;const s=[].concat(t);s[o]=!s[o],s[o+1]=!s[o+1];const a=En(e,s,n);a>i&&(i=a,r=s)}return r?wn(e,r,n):t},Cn=function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e[r]),void 0!==t[r]&&n.push(t[r]?"\n":" ");return n.join("")},An=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},kn=function(e){iu=e},Rn=function(){return iu},In=function(){return ou},Mn=function(){return vu},$n=function(e){if(e=Pn(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},Pn=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},Ln=function(){vu||((vu=document.createElement("div")).className="blocklyTooltipDiv",(C()||document.body).appendChild(vu))},Dn=function(e){e.mouseOverWrapper_=p(e,"pointerover",null,Bn),e.mouseOutWrapper_=p(e,"pointerout",null,Fn),e.addEventListener("pointermove",Gn,!1)},Nn=function(e){e&&(f(e.mouseOverWrapper_),f(e.mouseOutWrapper_),e.removeEventListener("pointermove",Gn))},Bn=function(e){su||(e=Pn(e.currentTarget),du!==e&&(Vn(),pu=null,du=e),clearTimeout(lu))},Fn=function(e){su||(lu=setTimeout((function(){pu=du=null,Vn()}),1),clearTimeout(cu))},Gn=function(e){if(du&&du.tooltip&&!su)if(ou){const t=uu-e.pageX;e=hu-e.pageY,Math.sqrt(t*t+e*e)>gu&&Vn()}else pu!==du&&(clearTimeout(cu),uu=e.pageX,hu=e.pageY,cu=setTimeout(Xn,_u))},Un=function(){pu=du=null,Vn()},Vn=function(){ou&&(ou=!1,vu&&(vu.style.display="none")),cu&&clearTimeout(cu)},Wn=function(){Vn(),su=!0},Hn=function(){su=!1},Qn=function(){vu&&du&&("function"==typeof iu?iu(vu,du):zn())},zn=function(){var e=$n(du);e=(e=Tn(e,au)).split("\n");for(let t=0;t<e.length;t++){const n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),vu.appendChild(n)}},jn=function(e){const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let r=uu;r=e?r-(fu+vu.offsetWidth):r+fu;let i=hu+mu;return i+vu.offsetHeight>n+window.scrollY&&(i-=vu.offsetHeight+2*mu),e?r=Math.max(bu-window.scrollX,r):r+vu.offsetWidth>t+window.scrollX-2*bu&&(r=t-vu.offsetWidth-2*bu),{x:r,y:i}},Xn=function(){if(!su&&(pu=du,vu)){vu.textContent="",Qn();var e=du.RTL;vu.style.direction=e?"rtl":"ltr",vu.style.display="block",ou=!0;var{x:t,y:n}=jn(e);vu.style.left=t+"px",vu.style.top=n+"px"}},Yn=function(){return Ou},Zn=function(e){Ou=e},qn=function(){return Su},Kn=function(e){Su=e},Jn=function(e){e=String(e).toLowerCase().trim();var t=Tu[e];if(t)return t;if(t="#"===(t="0x"===e.substring(0,2)?"#"+e.substring(2):e)[0]?t:"#"+t,/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=t&&256>t&&0<=n&&256>n)?er(e,t,n):null},er=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},tr=function(e){return(e=Jn(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},nr=function(e,t,n){let r=0,i=0,o=0;if(0===t)o=i=r=n;else{const s=Math.floor(e/60),a=e/60-s;e=n*(1-t);const l=n*(1-t*a);switch(t=n*(1-t*(1-a)),s){case 1:r=l,i=n,o=e;break;case 2:r=e,i=n,o=t;break;case 3:r=e,i=l,o=n;break;case 4:r=t,i=e,o=n;break;case 5:r=n,i=e,o=l;break;case 6:case 0:r=n,i=t,o=e}}return er(Math.floor(r),Math.floor(i),Math.floor(o))},rr=function(e,t,n){return(e=Jn(e))&&(t=Jn(t))?(e=tr(e),t=tr(t),er(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2])))):null},ir=function(e){return nr(e,Ou,255*Su)},or=function(e,t){const n=[];var r=e.split("");r.push("");var i=0;e=[];let o=null;for(let l=0;l<r.length;l++){var s=r[l];if(0===i)"%"===s?((i=e.join(""))&&n.push(i),e.length=0,i=1):e.push(s);else if(1===i)"%"===s?(e.push(s),i=0):t&&"0"<=s&&"9">=s?(i=2,o=s,(s=e.join(""))&&n.push(s),e.length=0):"{"===s?i=3:(e.push("%",s),i=0);else if(2===i)if("0"<=s&&"9">=s)o+=s;else{var a=void 0;n.push(parseInt(null!=(a=o)?a:"",10)),l--,i=0}else 3===i&&(""===s?(e.splice(0,0,"%{"),l--,i=0):"}"!==s?e.push(s):(i=e.join(""),/[A-Z]\w*/i.test(i)&&(s=(s=i.toUpperCase()).startsWith("BKY_")?s.substring(4):null)&&s in wc?"string"==typeof(i=wc[s])?Array.prototype.push.apply(n,or(i,t)):t?n.push(String(i)):n.push(i):n.push("%{"+i+"}"),i=e.length=0))}for((t=e.join(""))&&n.push(t),a=[],e.length=0,r=0;r<n.length;r++)"string"==typeof n[r]?e.push(n[r]):((t=e.join(""))&&a.push(t),e.length=0,a.push(n[r]));return(t=e.join(""))&&a.push(t),e.length=0,a},sr=function(e){return or(e,!0)},ar=function(e){return"string"!=typeof e?e:(e=or(e,!1)).length?String(e[0]):""},lr=function(e){let t=!0;const n=wc,r=e.match(/%{BKY_[A-Z]\w*}/gi);if(r)for(let i=0;i<r.length;i++)void 0===n[r[i].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+r[i]+" in "+e),t=!1);return t},cr=function(e){const t="string"==typeof e?ar(e):e;var n=Number(t);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:nr(n,Yn(),255*qn())};if(n=Jn(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!==t&&(n+=' (from "'+e+'")'),Error(n)},ur=function(){return wu},hr=function(e){wu=e},dr=function(){wu||((wu=document.createElement("div")).className="blocklyWidgetDiv",(C()||document.body).appendChild(wu))},pr=function(e,t,n){fr(),Au=e,ku=n,(e=wu)&&(e.style.direction=t?"rtl":"ltr",e.style.display="block",t=T(),Ru=t.getRenderer().getClassName(),Iu=t.getTheme().getClassName(),Ru&&N(e,Ru),Iu&&N(e,Iu))},fr=function(){if(mr()){Au=null;var e=wu;e&&(e.style.display="none",e.style.left="",e.style.top="",ku&&ku(),ku=null,e.textContent="",Ru&&(F(e,Ru),Ru=""),Iu&&(F(e,Iu),Iu=""),T().markFocused())}},mr=function(){return!!Au},gr=function(e){Au===e&&fr()},_r=function(e,t,n){wu.style.left=e+"px",wu.style.top=t+"px",wu.style.height=n+"px"},br=function(e,t,n,r){const i=yr(e,t,n);e=vr(e,t,n,r),0>i?_r(e,0,n.height+i):_r(e,i,n.height)},vr=function(e,t,n,r){return r?Math.min(Math.max(t.right-n.width,e.left),e.right-n.width):Math.max(Math.min(t.left,e.right-n.width),e.left)},yr=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},Or=function(e,t){Me(Ml.FIELD,e,t)},Sr=function(e){Pe(Ml.FIELD,e)},Tr=function(e){return Lu.fromJsonInternal(e)},xr=function(e){const t=Be(Ml.FIELD,e.type);if(t){if("function"!=typeof t.fromJson)throw new TypeError("returned Field was not a IRegistrableField");return t.fromJson(e)}return console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Er=function(e,t){e.setAttribute(Gu,t)},wr=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Fu+t,`${n}`)},Cr=function(e){return e!==$u.SKIP_SETUP},Ar=function(e){let t=!1;const n=e.map((([e,n])=>"string"==typeof e?[ar(e),n]:(t=!0,[null!==e.alt?Object.assign({},e,{alt:ar(e.alt)}):Object.assign({},e),n])));if(t||2>e.length)return{options:n};var r=n.map((([e])=>e)),i=yn(r);e=On(r,i);const o=Sn(r,i);return!e&&!o||i<=e+o?{options:n}:(i=e?r[0].substring(0,e-1):void 0,r=o?r[0].substr(1-o):void 0,{options:kr(n,e,o),prefix:i,suffix:r})},kr=function(e,t,n){return e.map((([e,r])=>[e.substring(t,e.length-n),r]))},Rr=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)?"string"!=typeof r[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+r[1]+" in: ",r)):r[0]&&"string"!=typeof r[0]&&"string"!=typeof r[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+r[0]+" in: ",r)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",r))}if(t)throw TypeError("Found invalid FieldDropdown options.")},Ir=function(e,n){t("Blockly.utils.object.inherits","version 9","version 10"),e.superClass_=n.prototype,Object.setPrototypeOf(e,n),e.prototype=Object.create(n.prototype),e.prototype.constructor=e},Mr=function(e,n){t("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const t in n)e[t]=n[t]},$r=function(e,t){for(const n in t)e[n]=null!==t[n]&&"object"==typeof t[n]?$r(e[n]||Object.create(null),t[n]):t[n];return e},Pr=function(e){return t("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(e)},Lr=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=Hr(e),e=Ur(e)),Dr(e),e):null},Dr=function(e){const t=e.kind;if(e=e.contents,t&&t!==ih&&t!==rh)throw Error("Invalid toolbox kind "+t+". Please supply either "+ih+" or "+rh);if(!e)throw Error("Toolbox must have a contents attribute.")},Nr=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Vr(e):[]},Br=function(e){return oh.hasCategoriesInternal(e)},Fr=function(e){if(!e)return!1;const t=e.kind;return t?t===rh:!!e.contents.filter((function(e){return"CATEGORY"===e.kind.toUpperCase()})).length},Gr=function(e){return!(!e||!e.contents||!e.contents.filter((function(e){return"CATEGORY"===e.kind.toUpperCase()})).length)},Ur=function(e){const t={contents:Vr(e)};return e instanceof Node&&Wr(e,t),t},Vr=function(e){const t=[];let n=e.childNodes;n||(n=e);for(let r,i=0;r=n[i];i++){if(!r.tagName)continue;e={};const n=r.tagName.toUpperCase();e.kind=n,"BLOCK"===n?e.blockxml=r:r.childNodes&&0<r.childNodes.length&&(e.contents=Vr(r)),Wr(r,e),t.push(e)}return t},Wr=function(e,t){for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n];-1<r.nodeName.indexOf("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[r.nodeName.replace("css-","")]=r.value):t[r.nodeName]=r.value}},Hr=function(e){let t=null;if(e)if("string"==typeof e){if(t=tn(e),"xml"!==t.nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},Qr=function(e,t){if("string"!=typeof e||""===e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(lh[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof t)throw Error('Error: Extension "'+e+'" must be a function');lh[e]=t},zr=function(e,t){if(!t||"object"!=typeof t)throw Error('Error: Mixin "'+e+'" must be a object');Qr(e,(function(){this.mixin(t)}))},jr=function(t,n,r,i){const o='Error when registering mutator "'+t+'": ';ni(o,n);const s=ei(n,o);if(r&&"function"!=typeof r)throw Error(o+'Extension "'+t+'" is not a function');Qr(t,(function(){s&&this.setMutator(new e.Mutator$$module$build$src$core$mutator(i||[],this)),this.mixin(n),r&&r.apply(this)}))},Xr=function(e){Yr(e)?delete lh[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Yr=function(e){return!!lh[e]},Zr=function(e,t,n){const r=lh[e];if("function"!=typeof r)throw Error('Error: Extension "'+e+'" not found.');let i;if(n?qr(e,t):i=ri(t),r.apply(t),n)ni('Error after applying mutator "'+e+'": ',t);else if(!ii(i,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},qr=function(e,t){if(ri(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Kr=function(e,t){return ti(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},Jr=function(e,t){return ti(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},ei=function(e,t){return ti(e.compose,e.decompose,t+" compose/decompose")},ti=function(e,t,n){if(e&&t){if("function"!=typeof e||"function"!=typeof t)throw Error(n+" must be a function");return!0}if(!e&&!t)return!1;throw Error(n+"Must have both or neither functions")},ni=function(e,t){const n=Kr(t,e),r=Jr(t,e);if(!n&&!r)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");ei(t,e)},ri=function(e){const t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.saveExtraState&&t.push(e.saveExtraState),void 0!==e.loadExtraState&&t.push(e.loadExtraState),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},ii=function(e,t){if((t=ri(t)).length!==e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},oi=function(e){if("object"!=typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)e();else{const t=setInterval((function(){"complete"===document.readyState&&(clearInterval(t),e())}),10)}},si=function(e,t){const n=[];return"object"==typeof document&&oi((function(){for(const e in t)lr(t[e])})),function(){this.type&&-1===n.indexOf(this.type)&&(ai(this,e,t),n.push(this.type)),this.setTooltip(function(){var r=String(this.getFieldValue(e));let i=t[r];return null===i?-1===n.indexOf(this.type)&&(r="No tooltip mapping for value "+r+" of field "+e,null!==this.type&&(r+=" of block type "+this.type),console.warn(r+".")):i=ar(i),i}.bind(this))}},ai=function(e,t,n){var r=e.getField(t);if(r instanceof Qu&&!r.isOptionListDynamic()){r=r.getOptions();for(let i=0;i<r.length;i++){const o=r[i][1];null===n[o]&&console.warn("No tooltip mapping for value "+o+" of field "+t+" of block type "+e.type)}}},li=function(e,t){return"object"==typeof document&&oi((function(){lr(e)})),function(){this.setTooltip(function(){const n=this.getField(t);return ar(e).replace("%1",n?n.getText():"")}.bind(this))}},ci=function(){const e=this.tooltip;this.setTooltip(function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}.bind(this))},ui=function(e,t){return-1!==(t=e.indexOf(t))&&(e.splice(t,1),!0)},hi=function(e,t){return" "+e+","+t+" "},di=function(e,t){return" "+e+t.join("")},pi=function(e,t){return" M "+e+","+t+" "},fi=function(e,t){return" m "+e+","+t+" "},mi=function(e,t){return" l "+e+","+t+" "},gi=function(e){return" l"+e.join("")},_i=function(e,t){return" "+e+" "+t+" "},bi=function(e,t,n,r){return e+" "+n+" "+n+" "+t+r},vi=function(e){return t("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Gt(e)},yi=function(e){return t("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),Ut(e)},Oi=function(e){return t("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),sr(e)},Si=function(e){return t("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),ar(e)},Ti=function(e){return t("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),lr(e)},xi=function(){return t("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),Vt()},Ei=function(){return t("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),Wt()},wi=function(e,n){return t("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),ui(e,n)},Ci=function(){return t("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),Ht()},Ai=function(e,n){return t("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),R(e,n)},ki=function(e,n){return t("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),Qt(e,n)},Ri=function(e){return t("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),cr(e)},Ii=function(e){t("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),oi(e)},Mi=function(e,t){Me(Ml.SERIALIZER,e,t)},$i=function(e){Pe(Ml.SERIALIZER,e)},Pi=function(e,{addCoordinates:t=!1,addInputBlocks:n=!0,addNextBlocks:r=!0,doFullSerialization:i=!0}={}){if(e.isInsertionMarker())return null;const o={type:e.type,id:e.id};return t&&Di(e,o),Li(e,o),Ni(e,o),Bi(e,o),Fi(e,o,i),n&&Gi(e,o,i),r&&Ui(e,o,i),o},Li=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.enabled=!1),void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},Di=function(e,t){const n=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(n.RTL?n.getWidth()-e.x:e.x),t.y=Math.round(e.y)},Ni=function(e,t){e.saveExtraState?null!==(e=e.saveExtraState())&&(t.extraState=e):e.mutationToDom&&null!==(e=e.mutationToDom())&&(t.extraState=Jt(e).replace(' xmlns="https://developers.google.com/blockly/xml"',""))},Bi=function(e,t){e.getCommentText()&&(t.icons={comment:{text:e.getCommentText(),pinned:e.commentModel.pinned,height:Math.round(e.commentModel.size.height),width:Math.round(e.commentModel.size.width)}})},Fi=function(e,t,n){const r=Object.create(null);for(let i=0;i<e.inputList.length;i++){const t=e.inputList[i];for(let e=0;e<t.fieldRow.length;e++){const i=t.fieldRow[e];i.isSerializable()&&(r[i.name]=i.saveState(n))}}Object.keys(r).length&&(t.fields=r)},Gi=function(e,t,n){const r=Object.create(null);for(let i=0;i<e.inputList.length;i++){const t=e.inputList[i];if(t.type===Bl.DUMMY)continue;const o=Vi(t.connection,n);o&&(r[t.name]=o)}Object.keys(r).length&&(t.inputs=r)},Ui=function(e,t,n){e.nextConnection&&(e=Vi(e.nextConnection,n))&&(t.next=e)},Vi=function(e,t){const n=e.getShadowState(!0);if(e=e.targetBlock(),!n&&!e)return null;const r=Object.create(null);return n&&(r.shadow=n),e&&!e.isShadow()&&(r.block=Pi(e,{doFullSerialization:t})),r},Wi=function(e,t,{recordUndo:n=!1}={}){return Hi(e,t,{recordUndo:n})},Hi=function(e,t,{parentConnection:n,isShadow:r=!1,recordUndo:i=!1}={}){const o=He();We(i),(i=Je())||et(!0),Ze();const s=Qi(e,t,{parentConnection:n,isShadow:r});return qe(),Qe(new(ot(zl))(s)),et(i),We(o),t.rendered&&setTimeout((()=>{s.disposed||s.setConnectionTracking(!0)}),1),s},Qi=function(e,t,{parentConnection:n,isShadow:r=!1}={}){if(!e.type)throw new _h(e);const i=t.newBlock(e.type,e.id);return i.setShadow(r),zi(i,e),ji(i,e),Xi(i,e),Yi(n,i,e),Zi(i,e),qi(i,e),Ki(i,e),Ji(i,e),to(i,t.rendered),i},zi=function(e,t){let n=void 0===t.x?0:t.x;t=void 0===t.y?0:t.y;const r=e.workspace;n=r.RTL?r.getWidth()-n:n,e.moveBy(n,t)},ji=function(e,t){t.collapsed&&e.setCollapsed(!0),!1===t.enabled&&e.setEnabled(!1),void 0!==t.inline&&e.setInputsInline(t.inline),void 0!==t.data&&(e.data=t.data)},Xi=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(tn(t.extraState)))},Yi=function(e,t,n){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new yh(n);if(e.type===Bl.VALUE){var r=t.outputConnection;if(!r)throw new bh("output",t,n)}else if(!(r=t.previousConnection))throw new bh("previous",t,n);if(!e.connect(r)){const i=t.workspace.connectionChecker;throw new vh(i.getErrorMessage(i.canConnectWithReason(r,e,!1),r,e),e.type===Bl.VALUE?"output connection":"previous connection",t,n)}}},Zi=function(e,t){t.icons&&(t=t.icons.comment)&&(e.setCommentText(t.text),"pinned"in t&&(e.commentModel.pinned=t.pinned),"width"in t&&"height"in t&&(e.commentModel.size=new ll(t.width,t.height)),t.pinned&&e.rendered&&!e.isInFlyout&&setTimeout((()=>e.getCommentIcon().setVisible(!0)),1))},qi=function(e,t){if(t.fields){var n=Object.keys(t.fields);for(let r=0;r<n.length;r++){const i=n[r],o=t.fields[i],s=e.getField(i);s?s.loadState(o):console.warn(`Ignoring non-existant field ${i} in block ${e.type}`)}}},Ki=function(e,t){if(t.inputs){var n=Object.keys(t.inputs);for(let r=0;r<n.length;r++){const i=n[r],o=e.getInput(i);if(!o||!o.connection)throw new bh(i,e,t);eo(o.connection,t.inputs[i])}}},Ji=function(e,t){if(t.next){if(!e.nextConnection)throw new bh("next",e,t);eo(e.nextConnection,t.next)}},eo=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&Qi(t.block,e.getSourceBlock().workspace,{parentConnection:e})},to=function(e,t){if(t)for(e.setConnectionTracking(!1),e.initSvg(),e.render(!1),e=e.getIcons(),t=0;t<e.length;t++)e[t].computeIconLocation();else e.initModel()},no=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},ro=function(e,t){let n=null;const r=(t=t.outputConnection).getConnectionChecker();for(let i,o=0;i=e.inputList[o];o++){const e=i.connection;if(e&&r.canConnect(t,e,!1)){if(n)return null;n=e}}return n},io=function(e,t){let n;for(;n=ro(e,t);)if(!(e=n.targetBlock())||e.isShadow())return n;return null},oo=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},so=function(e){const t=e.workspace;var n=e.getSvgRoot();t.getAudioManager().play("delete");const r=t.getSvgXY(n);(n=n.cloneNode(!0)).setAttribute("transform","translate("+r.x+","+r.y+")"),t.getParentSvg().appendChild(n),ao(n,{x:r.x,y:r.y,width:e.width,height:e.height},t.RTL,new Date,t.scale)},ao=function(e,t,n,r,i){const o=((new Date).getTime()-r.getTime())/150;1<o?U(e):(e.setAttribute("transform","translate("+(t.x+(n?-1:1)*t.width*i/2*o)+","+(t.y+t.height*i*o)+") scale("+(1-o)*i+")"),setTimeout(ao,10,e,t,n,r,i))},lo=function(e){const t=e.workspace,n=t.scale;if(t.getAudioManager().play("click"),!(1>n)){var r=t.getSvgXY(e.getSvgRoot());e.outputConnection?(r.x+=(e.RTL?3:-3)*n,r.y+=13*n):e.previousConnection&&(r.x+=(e.RTL?-23:23)*n,r.y+=3*n),e=D(zc.CIRCLE,{cx:r.x,cy:r.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg()),co(e,new Date,n)}},co=function(e,t,n){const r=((new Date).getTime()-t.getTime())/150;1<r?U(e):(e.setAttribute("r",(25*r*n).toString()),e.style.opacity=(1-r).toString(),Gh=setTimeout(co,10,e,t,n))},uo=function(e){if(po(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Uh=e.getSvgRoot(),ho(Uh,t,new Date)}},ho=function(e,t,n){const r=((new Date).getTime()-n.getTime())/200;let i="";1>=r&&(i=`skewX(${Math.round(Math.sin(r*Math.PI*3)*(1-r)*t)})`,Gh=setTimeout(ho,10,e,t,n)),e.skew_=i,e.setAttribute("transform",e.translate_+e.skew_)},po=function(){if(Uh){Gh&&clearTimeout(Gh);const e=Uh;e.skew_="",e.setAttribute("transform",e.translate_),Uh=null}},fo=function(e){Xh.copyInternal(e)},mo=function(e){jh=e.toCopyData()},go=function(){if(!jh)return null;let e=jh.source;return e.isFlyout&&(e=e.targetWorkspace),jh.typeCounts&&e.isCapacityAvailable(jh.typeCounts)?e.paste(jh.saveInfo):null},_o=function(e){return Xh.duplicateInternal(e)},bo=function(e){const t=jh;let n,r,i;return fo(e),e=null!=(i=null==(n=e.toCopyData())||null==(r=n.source)?void 0:r.paste(jh.saveInfo))?i:null,jh=t,e},vo=function(){return Hh},yo=function(e){Hh=e},Oo=function(e,t,n){if(pr(Qh,n,Co),t.length){var r=So(t,n);zh=r,To(r,e,n),setTimeout((function(){r.focus()}),1),Hh=null}else wo()},So=function(e,t){const n=new Wu;n.setRole(Nu.MENU);for(let r=0;r<e.length;r++){const i=e[r],o=new Hu(i.text);o.setRightToLeft(t),o.setRole(Nu.MENUITEM),n.addChild(o),o.setEnabled(i.enabled),i.enabled&&o.onAction((function(){wo(),i.callback(i.scope)}),{})}return n},To=function(e,t,n){const r=Wt();t=new sl(t.clientY+r.top,t.clientY+r.top,t.clientX+r.left,t.clientX+r.left),xo(e);const i=e.getSize();n&&(t.left+=i.width,t.right+=i.width,r.left+=i.width,r.right+=i.width),br(r,t,i,n),e.focus()},xo=function(e){var t=ur();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),N(t,"blocklyContextMenu"),d(t,"contextmenu",null,Eo),e.focus()},Eo=function(e){e.preventDefault(),e.stopPropagation()},wo=function(){gr(Qh),Hh=null},Co=function(){zh&&(zh.dispose(),zh=null)},Ao=function(t,n){return()=>{let r;Ze();try{r=sn(n,t.workspace);const i=t.getRelativeToSurfaceXY();i.x=t.RTL?i.x-e.config$$module$build$src$core$config.snapRadius:i.x+e.config$$module$build$src$core$config.snapRadius,i.y+=2*e.config$$module$build$src$core$config.snapRadius,r.moveBy(i.x,i.y)}finally{qe()}Ke()&&!r.isShadow()&&Qe(new(ot(zl))(r)),r.select()}},ko=function(e){return{text:wc.REMOVE_COMMENT,enabled:!0,callback:function(){et(!0),e.dispose(),et(!1)}}},Ro=function(e){return{text:wc.DUPLICATE_COMMENT,enabled:!0,callback:function(){_o(e)}}},Io=function(e,t){const n={enabled:!0};return n.text=wc.ADD_COMMENT,n.callback=function(){const n=new eu(e,wc.WORKSPACE_COMMENT_DEFAULT_TEXT,eu.DEFAULT_SIZE,eu.DEFAULT_SIZE);var r=e.getInjectionDiv().getBoundingClientRect();r=new al(t.clientX-r.left,t.clientY-r.top);const i=e.getOriginOffsetInPixels();(r=al.difference(r,i)).scale(1/e.scale),n.moveBy(r.x,r.y),e.rendered&&(n.initSvg(),n.render(),n.select())},n},Mo=function(e,t,n,r,i,o){const s=o.scrollbar&&o.scrollbar.canScrollVertically();return e.horizontal===hd.LEFT?(n=i.absoluteMetrics.left+n,s&&o.RTL&&(n+=Yu.scrollbarThickness)):(n=i.absoluteMetrics.left+i.viewMetrics.width-t.width-n,s&&!o.RTL&&(n-=Yu.scrollbarThickness)),e.vertical===ud.TOP?e=i.absoluteMetrics.top+r:(e=i.absoluteMetrics.top+i.viewMetrics.height-t.height-r,o.scrollbar&&o.scrollbar.canScrollHorizontally()&&(e-=Yu.scrollbarThickness)),new sl(e,e+t.height,n,n+t.width)},$o=function(e,t){return{horizontal:t.toolboxMetrics.position===eh.LEFT||e.horizontalLayout&&!e.RTL?hd.RIGHT:hd.LEFT,vertical:t.toolboxMetrics.position===eh.BOTTOM?ud.TOP:ud.BOTTOM}},Po=function(e,t,n,r){const i=e.left,o=e.right-e.left,s=e.bottom-e.top;for(let a=0;a<r.length;a++){const l=r[a];e.intersects(l)&&(e=n===dd.UP?l.top-s-t:l.bottom+t,e=new sl(e,e+s,i,i+o),a=-1)}return e},Lo=function(){Xd.registry.register({name:Vd.ESCAPE,preconditionFn:e=>!e.options.readOnly,callback:e=>(e.hideChaff(),!0),keyCodes:[Uu.ESC]})},Do=function(){Xd.registry.register({name:Vd.DELETE,preconditionFn(e){const t=E();return!e.options.readOnly&&null!=t&&t.isDeletable()},callback:(e,t)=>(t.preventDefault(),!jd.inProgress()&&(E().checkAndDelete(),!0)),keyCodes:[Uu.DELETE,Uu.BACKSPACE]})},No=function(){const e=Xd.registry.createSerializedKey(Uu.C,[Uu.CTRL]),t=Xd.registry.createSerializedKey(Uu.C,[Uu.ALT]),n=Xd.registry.createSerializedKey(Uu.C,[Uu.META]);Xd.registry.register({name:Vd.COPY,preconditionFn(e){const t=E();return!e.options.readOnly&&!jd.inProgress()&&null!=t&&t.isDeletable()&&t.isMovable()},callback:(e,t)=>(t.preventDefault(),e.hideChaff(),fo(E()),!0),keyCodes:[e,t,n]})},Bo=function(){const e=Xd.registry.createSerializedKey(Uu.X,[Uu.CTRL]),t=Xd.registry.createSerializedKey(Uu.X,[Uu.ALT]),n=Xd.registry.createSerializedKey(Uu.X,[Uu.META]);Xd.registry.register({name:Vd.CUT,preconditionFn(e){const t=E();return!e.options.readOnly&&!jd.inProgress()&&null!=t&&t instanceof cd&&t.isDeletable()&&t.isMovable()&&!t.workspace.isFlyout},callback(){const e=E();return!!e&&(fo(e),e.checkAndDelete(),!0)},keyCodes:[e,t,n]})},Fo=function(){const e=Xd.registry.createSerializedKey(Uu.V,[Uu.CTRL]),t=Xd.registry.createSerializedKey(Uu.V,[Uu.ALT]),n=Xd.registry.createSerializedKey(Uu.V,[Uu.META]);Xd.registry.register({name:Vd.PASTE,preconditionFn:e=>!e.options.readOnly&&!jd.inProgress(),callback:()=>!!go(),keyCodes:[e,t,n]})},Go=function(){const e=Xd.registry.createSerializedKey(Uu.Z,[Uu.CTRL]),t=Xd.registry.createSerializedKey(Uu.Z,[Uu.ALT]),n=Xd.registry.createSerializedKey(Uu.Z,[Uu.META]);Xd.registry.register({name:Vd.UNDO,preconditionFn:e=>!e.options.readOnly&&!jd.inProgress(),callback:e=>(e.hideChaff(),e.undo(!1),!0),keyCodes:[e,t,n]})},Uo=function(){const e=Xd.registry.createSerializedKey(Uu.Z,[Uu.SHIFT,Uu.CTRL]),t=Xd.registry.createSerializedKey(Uu.Z,[Uu.SHIFT,Uu.ALT]),n=Xd.registry.createSerializedKey(Uu.Z,[Uu.SHIFT,Uu.META]),r=Xd.registry.createSerializedKey(Uu.Y,[Uu.CTRL]);Xd.registry.register({name:Vd.REDO,preconditionFn:e=>!jd.inProgress()&&!e.options.readOnly,callback:e=>(e.hideChaff(),e.undo(!0),!0),keyCodes:[e,t,n,r]})},Vo=function(){Lo(),Do(),No(),Bo(),Fo(),Go(),Uo()},Wo=function(e){return void 0!==e.startPublishing&&void 0!==e.stopPublishing},Ho=function(e){return void 0!==e.doProcedureUpdate},Qo=function(e){for(const t of e.getAllBlocks(!1))Ho(t)&&t.doProcedureUpdate()},zo=function(e){const t=e.getBlocksByType("procedures_defnoreturn",!1).map((function(e){return e.getProcedureDef()}));return e=e.getBlocksByType("procedures_defreturn",!1).map((function(e){return e.getProcedureDef()})),t.sort(jo),e.sort(jo),[t,e]},jo=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},Xo=function(e,t){if(t.isInFlyout)return e;for(e=e||wc.UNNAMED_KEY||"unnamed";!Yo(e,t.workspace,t);){const t=e.match(/^(.*?)(\d+)$/);e=t?t[1]+(parseInt(t[2])+1):e+"2"}return e},Yo=function(e,t,n){return!Zo(e,t,n)},Zo=function(e,t,n){t=t.getAllBlocks(!1);for(let i=0;i<t.length;i++)if(t[i]!==n){var r=t[i];if(r.getProcedureDef&&(r=r.getProcedureDef(),ep.equals(r[0],e)))return!0}return!1},qo=function(e){var t=this.getSourceBlock();if(!t)throw new Pu;e=e.trim();const n=Xo(e,t),r=this.getValue();if(r!==e&&r!==n)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const i=e[t];i.renameProcedure&&i.renameProcedure(r,n)}return n},Ko=function(e){function t(e,t){for(let i=0;i<e.length;i++){var r=e[i][0];const o=e[i][1],s=ut("block");s.setAttribute("type",t),s.setAttribute("gap","16");const a=ut("mutation");for(a.setAttribute("name",r),s.appendChild(a),r=0;r<o.length;r++){const e=ut("arg");e.setAttribute("name",o[r]),a.appendChild(e)}n.push(s)}}const n=[];if(Za.procedures_defnoreturn){var r=ut("block");r.setAttribute("type","procedures_defnoreturn"),r.setAttribute("gap","16");var i=ut("field");i.setAttribute("name","NAME"),i.appendChild(ht(wc.PROCEDURES_DEFNORETURN_PROCEDURE)),r.appendChild(i),n.push(r)}return Za.procedures_defreturn&&((r=ut("block")).setAttribute("type","procedures_defreturn"),r.setAttribute("gap","16"),(i=ut("field")).setAttribute("name","NAME"),i.appendChild(ht(wc.PROCEDURES_DEFRETURN_PROCEDURE)),r.appendChild(i),n.push(r)),Za.procedures_ifreturn&&((r=ut("block")).setAttribute("type","procedures_ifreturn"),r.setAttribute("gap","16"),n.push(r)),n.length&&n[n.length-1].setAttribute("gap","24"),t((e=zo(e))[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),n},Jo=function(e){var t=[],n=e.getBlocksByType("procedures_mutatorarg",!1);for(let o,s=0;o=n[s];s++)t.push(o.getFieldValue("NAME"));n=ut("xml");const r=ut("block");r.setAttribute("type","procedures_mutatorarg");const i=ut("field");i.setAttribute("name","NAME"),t=Ct(np,t),t=ht(t),i.appendChild(t),r.appendChild(i),n.appendChild(r),e.updateToolbox(n)},es=function(e){if(e.type===ic&&"mutator"===e.bubbleType&&e.isOpen&&e.blockId){var t=(e=v(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!==t&&"procedures_defreturn"!==t||(e=e.mutator.getWorkspace(),Jo(e),e.addChangeListener(ts))}},ts=function(e){e.type!==zl&&e.type!==jl&&e.type!==Xl||(e=v(e.workspaceId),Jo(e))},ns=function(e,t){const n=[];t=t.getAllBlocks(!1);for(let i=0;i<t.length;i++){var r=t[i];r.getProcedureCall&&(r=r.getProcedureCall())&&ep.equals(r,e)&&n.push(t[i])}return n},rs=function(e){const t=He();var n=e.getProcedureDef()[0];const r=e.mutationToDom(!0);e=ns(n,e.workspace);for(let o,s=0;o=e[s];s++){n=(n=o.mutationToDom())&&Jt(n),o.domToMutation&&o.domToMutation(r);var i=o.mutationToDom();n!==(i=i&&Jt(i))&&(We(!1),Qe(new(ot(Xl))(o,"mutation",null,n,i)),We(t))}},is=function(e,t){t=t.getAllBlocks(!1);for(let r=0;r<t.length;r++){var n=t[r];if(n.getProcedureDef&&(n=n.getProcedureDef())&&ep.equals(n[0],e))return t[r]}return null},os=function(e){return e.isDynamic},ss=function(){return Rp},as=function(){t("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Rp=!1},ls=function(e,t){Me(Ml.RENDERER,e,t)},cs=function(e){Pe(Ml.RENDERER,e)},us=function(){t("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),as()},hs=function(e,t,n){return(e=new(Ne(Ml.RENDERER,e))(e)).init(t,n),e},ds=function(e){At(e.getTargetWorkspace(),void 0,"String")},ps=function(e){At(e.getTargetWorkspace(),void 0,"Number")},fs=function(e){At(e.getTargetWorkspace(),void 0,"Colour")},ms=function(e){let t=[],n=document.createElement("button");return n.setAttribute("text",wc.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),n=document.createElement("button"),n.setAttribute("text",wc.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),n=document.createElement("button"),n.setAttribute("text",wc.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",ds),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",ps),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",fs),e=gs(e),t.concat(e)},gs=function(e){const t=[];if(0<(e=e.getAllVariables()).length){if(Za.variables_set_dynamic){var n=e[e.length-1];const r=ut("block");r.setAttribute("type","variables_set_dynamic"),r.setAttribute("gap","24"),r.appendChild($t(n)),t.push(r)}if(Za.variables_get_dynamic){e.sort(Fc.compareByName);for(let r,i=0;r=e[i];i++)(n=ut("block")).setAttribute("type","variables_get_dynamic"),n.setAttribute("gap","8"),n.appendChild($t(r)),t.push(n)}}return t},_s=function(e){e.resizeContents()},bs=function(e){const t=Object.create(null),n=Fe(Ml.SERIALIZER,!0);for(const r in n){let i;const o=null==(i=n[r])?void 0:i.save(e);o&&(t[r]=o)}return t},vs=function(e,t,{recordUndo:n=!1}={}){var r=Fe(Ml.SERIALIZER,!0);if(r){r=Object.entries(r).sort(((e,t)=>t[1].priority-e[1].priority));var i=He();We(n),(n=Je())||et(!0),Q(),t instanceof nf&&t.setResizesEnabled(!1);for(const[,e]of r.reverse()){let n;null==(n=e)||n.clear(t)}for(let[n,i]of r.reverse())if(e[n]){let r;null==(r=i)||r.load(e[n],t)}t instanceof nf&&t.setResizesEnabled(!0),z(),Qe(new(ot(pc))(t)),et(n),We(i)}},ys=function(e){const t={id:e.getId(),name:e.getName(),returnTypes:e.getReturnTypes()};return e.getParameters().length?(t.parameters=e.getParameters().map((e=>Os(e))),t):t},Os=function(e){const t={id:e.getId(),name:e.getName()};return e.getTypes().length?(t.types=e.getTypes(),t):t},Ss=function(e,t,n,r){if(e=new e(r,n.name,n.id).setReturnTypes(n.returnTypes),!n.parameters)return e;for(const[i,o]of n.parameters.entries())e.insertParameter(Ts(t,o,r),i);return e},Ts=function(e,t,n){return e=new e(n,t.name,t.id),t.types&&e.setTypes(t.types),e},xs=function(e,t,n){const r=n.getBoundingRectangle(),i=r.right-r.left,o=J(t.top,r.top,t.top+t.height-(r.bottom-r.top))-r.top;let s=t.left;return t=t.left+t.width-i,e.RTL?s=Math.min(t,s):t=Math.max(s,t),!(!(e=J(s,r.left,t)-r.left)&&!o||(n.moveBy(e,o),0))},Es=function(e){return t=>{var n,r=e.getMetricsManager();if(r.hasFixedEdges()&&!e.isDragging())if(-1!==Sc.indexOf(null!=(n=t.type)?n:"")){n=r.getScrollMetrics(!0);const i=ws(e,t);i&&(r=Je(),et(t.group),xs(e,n,i)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==r&&et(r))}else t.type===lc&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Cs(e)}},ws=function(e,t){let n=null;switch(t.type){case zl:case Yl:(n=e.getBlockById(t.blockId))&&(n=n.getRootBlock());break;case cc:case dc:n=e.getCommentById(t.commentId)}return n},Cs=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var n=e.getTopBoundedElements();for(let r,i=0;r=n[i];i++)xs(e,t,r)}},As=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!W(document,e))throw Error("Error: container is not in current document.");t=new ah(t||{});const n=document.createElement("div");n.className="injectionDiv",n.tabIndex=0,wr(n,Bu.LABEL,wc.WORKSPACE_ARIA_LABEL),e.appendChild(n),e=ks(n,t);const r=new Vf(n),i=new Uf(n),o=Rs(e,t,r,i);return Is(o),x(o),k(o),n.addEventListener("focusin",(function(){x(o)})),o},ks=function(e,t){e.setAttribute("dir","LTR"),Ft(t.hasCss,t.pathToMedia),e=D(zc.SVG,{xmlns:Ka,"xmlns:html":Ja,"xmlns:xlink":el,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const n=D(zc.DEFS,{},e),r=String(Math.random()).substring(2);return t.gridPattern=Jd.createDom(r,t.gridOptions,n),e},Rs=function(e,t,n,r){t.parentWorkspace=null,n=(t=new nf(t,n,r)).options,t.scale=n.zoomOptions.startScale,e.appendChild(t.createDom("blocklyMainBackground")),r=t.getInjectionDiv();var i=t.getRenderer().getClassName();return i&&N(r,i),(i=t.getTheme().getClassName())&&N(r,i),!n.hasCategories&&n.languageTree&&(r=t.addFlyout(zc.SVG),V(r,e)),n.hasTrashcan&&t.addTrashcan(),n.zoomOptions&&n.zoomOptions.controls&&t.addZoomControls(),t.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),t.translate(0,0),t.addChangeListener(Es(t)),k(t),dr(),ue(),Ln(),t},Is=function(e){const t=e.options;var n=e.getParentSvg();if(d(n.parentNode,"contextmenu",null,(function(e){m(e)||e.preventDefault()})),n=d(window,"resize",null,(function(){e.hideChaff(!0),k(e),Cs(e)})),e.setResizeHandlerWrapper(n),$s(),t.languageTree){n=e.getToolbox();const r=e.getFlyout(!0);n?n.init():r&&(r.init(e),r.show(t.languageTree),"function"==typeof r.scrollToStart&&r.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Hf(e,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.horizontal,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Ps(t.pathToMedia,e)},Ms=function(e){const t=T();t&&!(m(e)||t.rendered&&!t.isVisible())&&Xd.registry.onKeyDown(t,e)},$s=function(){Qf||(d(document,"scroll",null,(function(){const e=y();for(let t,n=0;t=e[n];n++)t instanceof nf&&t.updateInverseScreenCTM()})),d(document,"keydown",null,Ms),p(document,"touchend",null,r),p(document,"touchcancel",null,r),Da&&d(window,"orientationchange",document,(function(){k(T())}))),Qf=!0},Ps=function(e,t){function n(){for(;i.length;)f(i.pop());r.preload()}const r=t.getAudioManager();r.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),r.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),r.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const i=[];i.push(d(document,"pointermove",null,n,!0)),i.push(d(document,"touchstart",null,n,!0))},Ls=function(e,t,n){if(!(e=e.getProcedureMap().get(t)))throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return e.getParameters().find((e=>e.getId()===n))},Ds=function(){Zh.registry.register({displayText:()=>wc.UNDO,preconditionFn:e=>0<e.workspace.getUndoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!1)},scopeType:Zh.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Ns=function(){Zh.registry.register({displayText:()=>wc.REDO,preconditionFn:e=>0<e.workspace.getRedoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!0)},scopeType:Zh.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Bs=function(){Zh.registry.register({displayText:()=>wc.CLEAN_UP,preconditionFn:e=>e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden",callback(e){e.workspace.cleanUp()},scopeType:Zh.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Fs=function(e,t){function n(t){i--,t.setCollapsed(e),0===i&&et(!1)}let r=0,i=0;et(!0);for(let o=0;o<t.length;o++){let e=t[o];for(;e;)i++,setTimeout(n.bind(null,e),r),e=e.getNextBlock(),r+=10}},Gs=function(){Zh.registry.register({displayText:()=>wc.COLLAPSE_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Fs(!0,e.workspace.getTopBlocks(!0))},scopeType:Zh.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Us=function(){Zh.registry.register({displayText:()=>wc.EXPAND_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Fs(!1,e.workspace.getTopBlocks(!0))},scopeType:Zh.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Vs=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let n=0;n<e.length;n++)Vs(e[n],t)}},Ws=function(e){const t=[];e=e.getTopBlocks(!0);for(let n=0;n<e.length;n++)Vs(e[n],t);return t},Hs=function(e,t){et(t);const n=e.shift();n&&(n.isDeadOrDying()?Hs(e,t):(n.dispose(!1,!0),setTimeout(Hs,10,e,t))),et(!1)},Qs=function(){Zh.registry.register({displayText:e=>e.workspace?1===(e=Ws(e.workspace).length)?wc.DELETE_BLOCK:wc.DELETE_X_BLOCKS.replace("%1",String(e)):"",preconditionFn:e=>e.workspace&&0<Ws(e.workspace).length?"enabled":"disabled",callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Ws(e.workspace),n=Ve();2>t.length?Hs(t,n):gt(wc.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),(function(e){e&&Hs(t,n)}))}},scopeType:Zh.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},zs=function(){Ds(),Ns(),Bs(),Gs(),Us(),Qs()},js=function(){Zh.registry.register({displayText:()=>wc.DUPLICATE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden",callback(e){e.block&&_o(e.block)},scopeType:Zh.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Xs=function(){Zh.registry.register({displayText:e=>e.block.getCommentIcon()?wc.REMOVE_COMMENT:wc.ADD_COMMENT,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden",callback(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:Zh.ScopeType.BLOCK,id:"blockComment",weight:2})},Ys=function(){Zh.registry.register({displayText:e=>e.block.getInputsInline()?wc.EXTERNAL_INPUTS:wc.INLINE_INPUTS,preconditionFn(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(let t=1;t<e.inputList.length;t++)if(e.inputList[t-1].type!==Bl.STATEMENT&&e.inputList[t].type!==Bl.STATEMENT)return"enabled";return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:Zh.ScopeType.BLOCK,id:"blockInline",weight:3})},Zs=function(){Zh.registry.register({displayText:e=>e.block.isCollapsed()?wc.EXPAND_BLOCK:wc.COLLAPSE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden",callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:Zh.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},qs=function(){Zh.registry.register({displayText:e=>e.block.isEnabled()?wc.DISABLE_BLOCK:wc.ENABLE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden",callback(e){e=e.block;const t=Je();t||et(!0),e.setEnabled(!e.isEnabled()),t||et(!1)},scopeType:Zh.ScopeType.BLOCK,id:"blockDisable",weight:5})},Ks=function(){Zh.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),1===e?wc.DELETE_BLOCK:wc.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:e=>!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden",callback(e){e.block&&e.block.checkAndDelete()},scopeType:Zh.ScopeType.BLOCK,id:"blockDelete",weight:6})},Js=function(){Zh.registry.register({displayText:()=>wc.HELP,preconditionFn:e=>("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden",callback(e){e.block.showHelp()},scopeType:Zh.ScopeType.BLOCK,id:"blockHelp",weight:7})},ea=function(){js(),Xs(),Ys(),Zs(),qs(),Ks(),Js()},ta=function(){zs(),ea()},na=function(e){const t=[];e=e.getDescendants(!1);for(let n,r=0;n=e[r];r++){const e=n.getIcons();for(let n=0;n<e.length;n++){const r={location:e[n].getIconLocation(),icon:e[n]};t.push(r)}}return t},ra=function(e){T().hideChaff(e)},ia=function(e){t("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),_s(e)},oa=function(e){t("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),fo(e)},sa=function(){return t("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!go()},aa=function(e){t("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),_o(e)},la=function(e){return t("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),An(e)},ca=function(e){return t("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),ir(e)},ua=function(e,n,r,i){return t("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),p(e,n,r,i)},ha=function(e){return t("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),f(e)},da=function(e,n,r,i,o,s){return t("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),d(e,n,r,i,o)},pa=pa||{};pa.scope={},pa.ASSUME_ES5=!1,pa.ASSUME_NO_NATIVE_MAP=!1,pa.ASSUME_NO_NATIVE_SET=!1,pa.SIMPLE_FROUND_POLYFILL=!1,pa.ISOLATE_POLYFILLS=!1,pa.FORCE_POLYFILL_PROMISE=!1,pa.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,pa.defineProperty=pa.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},pa.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof commonjsGlobal&&commonjsGlobal];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},pa.global=pa.getGlobal(this),pa.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),pa.TRUST_ES6_POLYFILLS=!pa.ISOLATE_POLYFILLS||pa.IS_SYMBOL_NATIVE,pa.polyfills={},pa.propertyToPolyfillSymbol={},pa.POLYFILL_PREFIX="$jscp$",pa.polyfill=function(e,t,n,r){t&&(pa.ISOLATE_POLYFILLS?pa.polyfillIsolated(e,t,n,r):pa.polyfillUnisolated(e,t,n,r))},pa.polyfillUnisolated=function(e,t,n,r){for(n=pa.global,e=e.split("."),r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))return;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&pa.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},pa.polyfillIsolated=function(e,t,n,r){var i=e.split(".");e=1===i.length,r=i[0],r=!e&&r in pa.polyfills?pa.polyfills:pa.global;for(var o=0;o<i.length-1;o++){var s=i[o];if(!(s in r))return;r=r[s]}i=i[i.length-1],null!=(t=t(n=pa.IS_SYMBOL_NATIVE&&"es6"===n?r[i]:null))&&(e?pa.defineProperty(pa.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===pa.propertyToPolyfillSymbol[i]&&(n=1e9*Math.random()>>>0,pa.propertyToPolyfillSymbol[i]=pa.IS_SYMBOL_NATIVE?pa.global.Symbol(i):pa.POLYFILL_PREFIX+n+"$"+i),pa.defineProperty(r,pa.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:t})))},pa.polyfill("globalThis",(function(e){return e||pa.global}),"es_2020","es3"),pa.polyfill("Object.getOwnPropertyDescriptors",(function(e){return e||function(e){for(var t={},n=Reflect.ownKeys(e),r=0;r<n.length;r++)t[n[r]]=Object.getOwnPropertyDescriptor(e,n[r]);return t}}),"es8","es5"),pa.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},pa.arrayIterator=function(e){return{next:pa.arrayIteratorImpl(e)}},pa.initSymbol=function(){},pa.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},pa.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i},pa.polyfill("Array.prototype.values",(function(e){return e||function(){return pa.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),pa.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},pa.polyfill("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)pa.owns(e,t)&&n.push(e[t]);return n}}),"es8","es3"),pa.polyfill("Array.prototype.flat",(function(e){return e||function(e){e=void 0===e?1:e;for(var t=[],n=0;n<this.length;n++){var r=this[n];Array.isArray(r)&&0<e?(r=Array.prototype.flat.call(r,e-1),t.push.apply(t,r)):t.push(r)}return t}}),"es9","es5"),pa.polyfill("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)pa.owns(e,t)&&n.push([t,e[t]]);return n}}),"es8","es3");var fa=fa||{};fa.global=globalThis||root,fa.define=function(e,t){return t},fa.DEBUG=!1,fa.DISALLOW_TEST_ONLY_CODE=!fa.DEBUG,fa.provide=function(e){},fa.module=function(e){},fa.module.get=function(e){},fa.module.declareLegacyNamespace=function(){},fa.setTestOnly=function(e){if(fa.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},fa.require=function(e){},fa.requireType=function(e){};var ma={};ma.warn=t;var ga,_a,ba,va,ya,Oa,Sa,Ta,xa,Ea,wa=750,Ca="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Aa=null,ka={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Ra=0,Ia={};Ia.TOUCH_ENABLED=Ca,Ia.TOUCH_MAP=ka,Ia.checkTouchIdentifier=a,Ia.clearTouchIdentifier=i,Ia.getTouchIdentifierFromEvent=s,Ia.isMouseOrTouchEvent=c,Ia.isTouchEvent=u,Ia.longStart=n,Ia.longStop=r,Ia.setClientFromTouch=l,Ia.shouldHandleEvent=o,Ia.splitEventByTouches=h,function(e){function t(e){return-1!==n.indexOf(e.toUpperCase())}const n=(ga=e).toUpperCase();_a=t("JavaFX"),ba=t("WebKit"),va=t("Gecko")&&!ba,ya=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Oa=t("iPad")||t("Macintosh")&&0<e,Sa=t("iPhone")&&!Oa,Ta=t("Macintosh"),xa=Oa||ya&&!t("Mobile")||t("Silk"),Ea=!xa&&(Sa||ya)}(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ma=ga,$a=_a,Pa=va,La=ya,Da=Oa,Na=Sa,Ba=Ta,Fa=Ea,Ga={};Ga.ANDROID=La,Ga.GECKO=Pa,Ga.IPAD=Da,Ga.IPHONE=Na,Ga.JavaFx=$a,Ga.MAC=Ba,Ga.MOBILE=Fa,Ga.raw=Ma;var Ua=40,Va=125,Wa={};Wa.bind=p,Wa.conditionalBind=d,Wa.getScrollDeltaPixels=b,Wa.isRightButton=g,Wa.isTargetInput=m,Wa.mouseToSvg=_,Wa.unbind=f;var Ha,Qa,za,ja,Xa,Ya,Za=Object.create(null);Ha=Object.create(null),za=null,Xa=[],Ya={defineBlocksWithJsonArrayInternal:$},e.module$build$src$core$common={},e.module$build$src$core$common.TEST_ONLY=Ya,e.module$build$src$core$common.createBlockDefinitionsFromJsonArray=P,e.module$build$src$core$common.defineBlocks=L,e.module$build$src$core$common.defineBlocksWithJsonArray=M,e.module$build$src$core$common.draggingConnections=Xa,e.module$build$src$core$common.getAllWorkspaces=y,e.module$build$src$core$common.getBlockTypeCounts=R,e.module$build$src$core$common.getMainWorkspace=T,e.module$build$src$core$common.getParentContainer=C,e.module$build$src$core$common.getSelected=E,e.module$build$src$core$common.getWorkspaceById=v,e.module$build$src$core$common.registerWorkspace=O,e.module$build$src$core$common.setMainWorkspace=x,e.module$build$src$core$common.setParentContainer=A,e.module$build$src$core$common.setSelected=w,e.module$build$src$core$common.svgResize=k,e.module$build$src$core$common.unregisterWorkpace=S;var qa,Ka="http://www.w3.org/2000/svg",Ja="http://www.w3.org/1999/xhtml",el="http://www.w3.org/1999/xlink";!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"}(qa||(qa={}));var tl=null,nl=0,rl=null,il={};il.HTML_NS=Ja,il.NodeType=qa,il.SVG_NS=Ka,il.XLINK_NS=el,il.addClass=N,il.containsNode=W,il.createSvgElement=D,il.getFastTextWidth=X,il.getFastTextWidthWithSizeString=Y,il.getTextWidth=j,il.hasClass=G,il.insertAfter=V,il.measureFontMetrics=Z,il.removeClass=F,il.removeClasses=B,il.removeNode=U,il.setCssTransform=H,il.startTextWidthCache=Q,il.stopTextWidthCache=z;var ol={};ol.clamp=J,ol.toDegrees=K,ol.toRadians=q;var sl=class{constructor(e,t,n,r){this.top=e,this.bottom=t,this.left=n,this.right=r}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},al=class{constructor(e,t){this.x=e,this.y=t}clone(){return new al(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t||!(!e||!t)&&e.x===t.x&&e.y===t.y}static distance(e,t){const n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new al(e.x-t.x,e.y-t.y)}static sum(e,t){return new al(e.x+t.x,e.y+t.y)}},ll=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t||!(!e||!t)&&e.width===t.width&&e.height===t.height}},cl={getSizeInternal:te},ul={};ul.TEST_ONLY=cl,ul.getBorderBox=ae,ul.getCascadedStyle=ie,ul.getComputedStyle=re,ul.getContainerOffsetToScrollInto=ce,ul.getPageOffset=oe,ul.getSize=ee,ul.getViewportPageOffset=se,ul.scrollIntoContainerView=le;var hl,dl,pl,fl=16,ml=1,gl=12,_l=16,bl=.25,vl=null,yl=null,Ol="",Sl="",Tl=null,xl=null,El=null,wl={getBoundsInfo:function(){const e=oe(Tl),t=ee(Tl);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,n,r){const i=wl.getBoundsInfo(),o=ee(hl);return t+o.height<i.bottom?Se(e,t,i,o):r-o.height>i.top?Te(n,r,i,o):t+o.height<document.documentElement.clientHeight?Se(e,t,i,o):r-o.height>document.documentElement.clientTop?Te(n,r,i,o):xe(e,i,o)}},Cl={};Cl.ANIMATION_TIME=bl,Cl.ARROW_HORIZONTAL_PADDING=gl,Cl.ARROW_SIZE=fl,Cl.BORDER_SIZE=ml,Cl.PADDING_Y=_l,Cl.TEST_ONLY=wl,Cl.clearContent=fe,Cl.createDom=ue,Cl.getContentDiv=pe,Cl.getOwner=de,Cl.getPositionX=Ee,Cl.hide=Ae,Cl.hideIfOwner=Ce,Cl.hideWithoutAnimation=ke,Cl.isVisible=we,Cl.repositionForWindowResize=Ie,Cl.setBoundsElement=he,Cl.setColour=me,Cl.show=Oe,Cl.showPositionedByBlock=ge,Cl.showPositionedByField=_e;var Al=Object.create(null),kl={typeMap:Al},Rl=Object.create(null),Il="default",Ml=class{constructor(e){this.name=e}toString(){return this.name}};Ml.CONNECTION_CHECKER=new Ml("connectionChecker"),Ml.CURSOR=new Ml("cursor"),Ml.EVENT=new Ml("event"),Ml.FIELD=new Ml("field"),Ml.RENDERER=new Ml("renderer"),Ml.TOOLBOX=new Ml("toolbox"),Ml.THEME=new Ml("theme"),Ml.TOOLBOX_ITEM=new Ml("toolboxItem"),Ml.FLYOUTS_VERTICAL_TOOLBOX=new Ml("flyoutsVerticalToolbox"),Ml.FLYOUTS_HORIZONTAL_TOOLBOX=new Ml("flyoutsHorizontalToolbox"),Ml.METRICS_MANAGER=new Ml("metricsManager"),Ml.BLOCK_DRAGGER=new Ml("blockDragger"),Ml.SERIALIZER=new Ml("serializer");var $l={};$l.DEFAULT=Il,$l.TEST_ONLY=kl,$l.Type=Ml,$l.getAllItems=Fe,$l.getClass=Ne,$l.getClassFromOptions=Ge,$l.getObject=Be,$l.hasItem=De,$l.register=Me,$l.unregister=Pe;var Pl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ll={genUid:()=>{const e=Pl.length,t=[];for(let n=0;20>n;n++)t[n]=Pl.charAt(Math.random()*e);return t.join("")}},Dl=0,Nl={};Nl.TEST_ONLY=Ll,Nl.genUid=Ve,Nl.getNextUniqueId=Ue;var Bl,Fl,Gl,Ul,Vl,Wl="",Hl=!0,Ql=0,zl="create",jl="delete",Xl="change",Yl="move",Zl="var_create",ql="var_delete",Kl="var_rename",Jl="ui",ec="drag",tc="selected",nc="click",rc="marker_move",ic="bubble_open",oc="trashcan_open",sc="toolbox_item_select",ac="theme_change",lc="viewport_change",cc="comment_create",uc="comment_delete",hc="comment_change",dc="comment_move",pc="finished_loading",fc="procedure_create",mc="procedure_delete",gc="procedure_rename",_c="procedure_enable",bc="procedure_change_return",vc="procedure_parameter_create",yc="procedure_parameter_delete",Oc="procedure_parameter_rename",Sc=[zl,Yl,cc,dc],Tc=[],xc={FIRE_QUEUE:Tc,fireNow:je,fireInternal:ze,setGroupInternal:tt},Ec={};Ec.BLOCK_CHANGE=Xl,Ec.BLOCK_CREATE=zl,Ec.BLOCK_DELETE=jl,Ec.BLOCK_DRAG=ec,Ec.BLOCK_MOVE=Yl,Ec.BUBBLE_OPEN=ic,Ec.BUMP_EVENTS=Sc,Ec.CHANGE=Xl,Ec.CLICK=nc,Ec.COMMENT_CHANGE=hc,Ec.COMMENT_CREATE=cc,Ec.COMMENT_DELETE=uc,Ec.COMMENT_MOVE=dc,Ec.CREATE=zl,Ec.DELETE=jl,Ec.FINISHED_LOADING=pc,Ec.MARKER_MOVE=rc,Ec.MOVE=Yl,Ec.PROCEDURE_CHANGE_RETURN=bc,Ec.PROCEDURE_CREATE=fc,Ec.PROCEDURE_DELETE=mc,Ec.PROCEDURE_ENABLE=_c,Ec.PROCEDURE_PARAMETER_CREATE=vc,Ec.PROCEDURE_PARAMETER_DELETE=yc,Ec.PROCEDURE_PARAMETER_RENAME=Oc,Ec.PROCEDURE_RENAME=gc,Ec.SELECTED=tc,Ec.TEST_ONLY=xc,Ec.THEME_CHANGE=ac,Ec.TOOLBOX_ITEM_SELECT=sc,Ec.TRASHCAN_OPEN=oc,Ec.UI=Jl,Ec.VAR_CREATE=Zl,Ec.VAR_DELETE=ql,Ec.VAR_RENAME=Kl,Ec.VIEWPORT_CHANGE=lc,Ec.clearPendingUndo=Ye,Ec.disable=Ze,Ec.disableOrphans=st,Ec.enable=qe,Ec.filter=Xe,Ec.fire=Qe,Ec.fromJson=rt,Ec.get=ot,Ec.getDescendantIds=nt,Ec.getGroup=Je,Ec.getRecordUndo=He,Ec.isEnabled=Ke,Ec.setGroup=et,Ec.setRecordUndo=We,function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY"}(Bl||(Bl={})),e.module$build$src$core$input_types={},e.module$build$src$core$input_types.inputTypes=Bl,({document:Fl,DOMParser:Gl,XMLSerializer:Ul}=globalThis),Vl="https://developers.google.com/blockly/xml",e.module$build$src$core$utils$xml={},e.module$build$src$core$utils$xml.NAME_SPACE=Vl,e.module$build$src$core$utils$xml.createElement=ut,e.module$build$src$core$utils$xml.createTextNode=ht,e.module$build$src$core$utils$xml.domToText=pt,e.module$build$src$core$utils$xml.getDocument=lt,e.module$build$src$core$utils$xml.injectDependencies=at,e.module$build$src$core$utils$xml.setDocument=ct,e.module$build$src$core$utils$xml.textToDomDocument=dt;var wc,Cc,Ac=function(e,t){window.alert(e),t&&t()},kc=function(e,t){t(window.confirm(e))},Rc=function(e,t,n){n(window.prompt(e,t))},Ic={confirmInternal:_t},Mc={};Mc.TEST_ONLY=Ic,Mc.alert=ft,Mc.confirm=gt,Mc.prompt=vt,Mc.setAlert=mt,Mc.setConfirm=bt,Mc.setPrompt=yt,wc=Object.create(null),Cc=function(e){Object.keys(e).forEach((function(t){wc[t]=e[t]}))},e.module$build$src$core$msg={},e.module$build$src$core$msg.Msg=wc,e.module$build$src$core$msg.setLocale=Cc;var $c=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Je(),this.recordUndo=He()}toJson(){return{type:this.type,group:this.group}}fromJson(e){this.isBlank=!1,this.group=e.group||""}static fromJson(e,n,r){return t("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),r.isBlank=!1,r.group=e.group||"",r.workspaceId=n.id,r}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=v(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},Pc=class extends $c{constructor(e){super(),this.isBlank=void 0===e,e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}fromJson(e){t("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varId=e.varId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Pc)).varId=e.varId,t}},Lc=class extends Pc{constructor(e){super(e),this.type=Zl,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){t("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varType=e.varType,this.varName=e.varName}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Lc)).varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};Me(Ml.EVENT,Zl,Lc);var Dc,Nc,Bc,Fc=class{constructor(e,t,n,r){this.workspace=e,this.name=t,this.type=n||"",this.id_=r||Ve()}getId(){return this.id_}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}};Dc="VARIABLE",Nc="ijkmnopqrstuvwxyzabcdefgh",Bc={generateUniqueNameInternal:wt},e.module$build$src$core$variables={},e.module$build$src$core$variables.CATEGORY_NAME=Dc,e.module$build$src$core$variables.TEST_ONLY=Bc,e.module$build$src$core$variables.VAR_LETTER_OPTIONS=Nc,e.module$build$src$core$variables.allDeveloperVariables=St,e.module$build$src$core$variables.allUsedVarModels=Ot,e.module$build$src$core$variables.createVariableButtonHandler=At,e.module$build$src$core$variables.flyoutCategory=Tt,e.module$build$src$core$variables.flyoutCategoryBlocks=xt,e.module$build$src$core$variables.generateUniqueName=Et,e.module$build$src$core$variables.generateUniqueNameFromOptions=Ct,e.module$build$src$core$variables.generateVariableFieldDom=$t,e.module$build$src$core$variables.getAddedVariables=Nt,e.module$build$src$core$variables.getOrCreateVariablePackage=Pt,e.module$build$src$core$variables.getVariable=Lt,e.module$build$src$core$variables.nameUsedWithAnyType=Mt,e.module$build$src$core$variables.promptName=Rt,e.module$build$src$core$variables.renameVariable=kt;var Gc=class{constructor(e,t,n,r,i){this.workspace=e,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=i&&!e.getCommentById(i)?i:Ve(),e.addTopComment(this),this.xy_=new al(0,0),this.height_=n,this.width_=r,this.RTL=e.RTL,this.content_=t,Gc.fireCreateEvent(this)}dispose(){this.disposed_||(Ke()&&Qe(new(ot(uc))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(e){this.height_=e}getWidth(){return this.width_}setWidth(e){this.width_=e}getXY(){return new al(this.xy_.x,this.xy_.y)}moveBy(e,t){const n=new(ot(dc))(this);this.xy_.translate(e,t),n.recordNew(),Qe(n)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(e){this.movable_=e}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(e){this.editable_=e}getContent(){return this.content_}setContent(e){this.content_!==e&&(Qe(new(ot(hc))(this,this.content_,e)),this.content_=e)}toXmlWithXY(e){return(e=this.toXml(e)).setAttribute("x",`${Math.round(this.xy_.x)}`),e.setAttribute("y",`${Math.round(this.xy_.y)}`),e.setAttribute("h",`${this.height_}`),e.setAttribute("w",`${this.width_}`),e}toXml(e){const t=ut("comment");return e||(t.id=this.id),t.textContent=this.getContent(),t}static fireCreateEvent(e){if(Ke()){const t=Je();t||et(!0);try{Qe(new(ot(cc))(e))}finally{t||et(!1)}}}static fromXml(e,t){var n=Gc.parseAttributes(e);return t=new Gc(t,n.content,n.h,n.w,n.id),n=e.getAttribute("x"),e=e.getAttribute("y"),n=n?parseInt(n,10):NaN,e=e?parseInt(e,10):NaN,isNaN(n)||isNaN(e)||t.moveBy(n,e),Gc.fireCreateEvent(t),t}static parseAttributes(e){const t=e.getAttribute("h"),n=e.getAttribute("w"),r=e.getAttribute("x"),i=e.getAttribute("y"),o=e.getAttribute("id");if(!o)throw Error("No ID present in XML comment definition.");let s;return{id:o,h:t?parseInt(t):100,w:n?parseInt(n):100,x:r?parseInt(r):NaN,y:i?parseInt(i):NaN,content:null!=(s=e.textContent)?s:""}}},Uc=class extends $c{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=void 0===e,this.workspaceId=e||""}},Vc=class extends Uc{constructor(e,t,n){super(n),this.type=tc,this.oldElementId=null!=e?e:void 0,this.newElementId=null!=t?t:void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}fromJson(e){t("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Vc)).oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};Me(Ml.EVENT,tc,Vc);var Wc=!1,Hc='\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyWsDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n/* Added as a separate rule with multiple classes to make it more specific\n   than a bootstrap rule that selects svg:root. See issue #1275 for context.\n*/\n.blocklyWsDragSurface.blocklyOverflowVisible {\n  overflow: visible;\n}\n\n.blocklyBlockDragSurface {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 50;  /* Display below toolbox, but above everything else. */\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  /* @todo: spec for maximum height. */\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don\'t support grab */\n  cursor: url("<<<PATH>>>/handopen.cur"), auto;\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n.blocklyDragging {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Change the cursor on the whole drag surface in case the mouse gets\n   ahead of block during a drag. This way the cursor is still a closed hand.\n  */\n.blocklyBlockDragSurface .blocklyDraggable {\n  /* backup for browsers (e.g. IE11) that don\'t support grabbing */\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don\'t allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text,\n.blocklyBlockDragSurface text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Edge and IE introduce a close icon when the input value is longer than a\n   certain length. This affects our sizing calculations of the text input.\n   Hiding the close icon to avoid that. */\n.blocklyHtmlInput::-ms-clear {\n  display: none;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n',Qc={};Qc.inject=Ft,Qc.register=Bt;var zc=class{constructor(e){this.tagName=e}toString(){return this.tagName}};zc.ANIMATE=new zc("animate"),zc.CIRCLE=new zc("circle"),zc.CLIPPATH=new zc("clipPath"),zc.DEFS=new zc("defs"),zc.FECOMPOSITE=new zc("feComposite"),zc.FECOMPONENTTRANSFER=new zc("feComponentTransfer"),zc.FEFLOOD=new zc("feFlood"),zc.FEFUNCA=new zc("feFuncA"),zc.FEGAUSSIANBLUR=new zc("feGaussianBlur"),zc.FEPOINTLIGHT=new zc("fePointLight"),zc.FESPECULARLIGHTING=new zc("feSpecularLighting"),zc.FILTER=new zc("filter"),zc.FOREIGNOBJECT=new zc("foreignObject"),zc.G=new zc("g"),zc.IMAGE=new zc("image"),zc.LINE=new zc("line"),zc.PATH=new zc("path"),zc.PATTERN=new zc("pattern"),zc.POLYGON=new zc("polygon"),zc.RECT=new zc("rect"),zc.SVG=new zc("svg"),zc.TEXT=new zc("text"),zc.TSPAN=new zc("tspan");var jc=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Xc=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Yc={XY_REGEX:jc,XY_STYLE_REGEX:Xc},Zc={};Zc.TEST_ONLY=Yc,Zc.getDocumentScroll=Ht,Zc.getInjectionDivXY=Ut,Zc.getRelativeXY=Gt,Zc.getViewportBBox=Wt,Zc.is3dSupported=Vt,Zc.screenToWsCoordinates=Qt;var qc=8,Kc=3,Jc=2,eu=class extends Gc{constructor(e,t,n,r,i){super(e,t,n,r,i),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=D(zc.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=e,this.svgRect_=D(zc.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Kc,ry:Kc}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!e.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(E()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Ke()&&Qe(new(ot(uc))(this)),U(this.svgGroup_),this.disposeInternal_(),Ze(),super.dispose(),qe())}initSvg(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(d(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),d(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea_&&this.textarea_.select()}pathMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(E()!==this){var e=null;if(E()){e=E().id,Ze();try{E().unselect()}finally{qe()}}e=new(ot(tc))(e,this.id,this.workspace.id),Qe(e),w(this),this.addSelect()}}unselect(){if(E()===this){var e=new(ot(tc))(this.id,null,this.workspace.id);Qe(e),w(null),this.removeSelect(),this.blurFocus()}}addSelect(){N(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){N(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){N(this.svgGroup_,"blocklyFocused")}removeFocus(){F(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let e=0,t=0;const n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let r=this.getSvgRoot();if(r)do{var i=Gt(r);e+=i.x,t+=i.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===r&&(e+=(i=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,t+=i.y),r=r.parentNode}while(r&&r!==this.workspace.getBubbleCanvas()&&r!==n);return this.xy_=new al(e,t)}moveBy(e,t){const n=new(ot(dc))(this),r=this.getRelativeToSurfaceXY();this.translate(r.x+e,r.y+t),this.xy_=new al(r.x+e,r.y+t),n.recordNew(),Qe(n),this.workspace.resizeContents()}translate(e,t){this.xy_=new al(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(e,t){e?e.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(e,t){this.translate(e,t)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var e=this.getRelativeToSurfaceXY();const t=this.getHeightWidth(),n=e.y,r=e.y+t.height;let i;return this.RTL?(i=e.x-t.width,e=e.x):(i=e.x,e=e.x+t.width),new sl(n,r,i,e)}updateMovable(){this.isMovable()?N(this.svgGroup_,"blocklyDraggable"):F(this.svgGroup_,"blocklyDraggable")}setMovable(e){super.setMovable(e),this.updateMovable()}setEditable(e){super.setEditable(e),this.textarea_&&(this.textarea_.readOnly=!e)}setDragging(e){e?((e=this.getSvgRoot()).translate_="",e.skew_="",N(this.svgGroup_,"blocklyDragging")):F(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(e){super.setContent(e),this.textarea_&&(this.textarea_.value=e)}setDeleteStyle(e){e?N(this.svgGroup_,"blocklyDraggingDelete"):F(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(e){}toXmlWithXY(e){let t=0;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);const n=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?t-n.x:n.x)),e.setAttribute("y",Math.round(n.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var e=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=D(zc.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=D(zc.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Kc,ry:Kc}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(e.width,e.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&d(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(d(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),d(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),d(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=D(zc.FOREIGNOBJECT,{x:0,y:eu.TOP_OFFSET,class:"blocklyCommentForeignObject"});const e=document.createElementNS(Ja,"body");e.setAttribute("xmlns",Ja),e.className="blocklyMinimalBody";const t=document.createElementNS(Ja,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea_=t,this.foreignObject_.appendChild(e),d(t,"wheel",this,(function(e){e.stopPropagation()})),d(t,"change",this,(function(e){this.setContent(t.value)})),this.foreignObject_}addResizeDom_(){this.resizeGroup_=D(zc.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),D(zc.POLYGON,{points:"0,x x,x x,0".replace(/x/g,qc.toString())},this.resizeGroup_),D(zc.LINE,{class:"blocklyResizeLine",x1:qc/3,y1:qc-1,x2:qc-1,y2:qc/3},this.resizeGroup_),D(zc.LINE,{class:"blocklyResizeLine",x1:2*qc/3,y1:qc-1,x2:qc-1,y2:2*qc/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=D(zc.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=D(zc.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),D(zc.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),D(zc.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(e){this.unbindDragEvents_(),g(e)||(this.workspace.startDrag(e,new al(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=d(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=d(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),e.stopPropagation()}deleteMouseDown_(e){this.deleteIconBorder_&&N(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),e.stopPropagation()}deleteMouseOut_(e){this.deleteIconBorder_&&F(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(e){this.dispose(),e.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(f(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(f(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(e){i(),this.unbindDragEvents_()}resizeMouseMove_(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e),this.setSize_(this.RTL?-e.x:e.x,e.y)}resizeComment_(){const e=this.getHeightWidth(),t=eu.TOP_OFFSET,n=2*Jc;this.foreignObject_.setAttribute("width",e.width),this.foreignObject_.setAttribute("height",(e.height-t).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-e.width).toString()),this.textarea_.style.width=e.width-n+"px",this.textarea_.style.height=e.height-n-t+"px"}setSize_(e,t){e=Math.max(e,45),t=Math.max(t,20+eu.TOP_OFFSET),this.width_=e,this.height_=t,this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",t),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",t),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",eu.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-e+qc)+","+(t-qc)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-e+qc)+","+-qc+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(e-qc)+","+(t-qc)+")"),this.deleteGroup_.setAttribute("transform","translate("+(e-qc)+","+-qc+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout((()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&N(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&N(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))}),0)}blurFocus(){this.focused_=!1,setTimeout((()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&F(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&F(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))}),0)}static fromXmlRendered(e,t,n){let r;Ze();try{const i=Gc.parseAttributes(e);if(r=new eu(t,i.content,i.h,i.w,i.id),t.rendered&&(r.initSvg(!0),r.render()),!isNaN(i.x)&&!isNaN(i.y))if(t.RTL){const e=n||t.getWidth();r.moveBy(e-i.x,i.y)}else r.moveBy(i.x,i.y)}finally{qe()}return Gc.fireCreateEvent(r),r}};eu.DEFAULT_SIZE=100,eu.TOP_OFFSET=10,Bt("\n.blocklyCommentForeignObject {\n  position: relative;\n  z-index: 0;\n}\n\n.blocklyCommentRect {\n  fill: #E7DE8E;\n  stroke: #bcA903;\n  stroke-width: 1px;\n}\n\n.blocklyCommentTarget {\n  fill: transparent;\n  stroke: #bcA903;\n}\n\n.blocklyCommentTargetFocused {\n  fill: none;\n}\n\n.blocklyCommentHandleTarget {\n  fill: none;\n}\n\n.blocklyCommentHandleTargetFocused {\n  fill: transparent;\n}\n\n.blocklyFocused>.blocklyCommentRect {\n  fill: #B9B272;\n  stroke: #B9B272;\n}\n\n.blocklySelected>.blocklyCommentTarget {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCommentDeleteIcon {\n  cursor: pointer;\n  fill: #000;\n  display: none;\n}\n\n.blocklySelected > .blocklyCommentDeleteIcon {\n  display: block;\n}\n\n.blocklyDeleteIconShape {\n  fill: #000;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n  stroke: #fc3;\n}\n"),e.module$build$src$core$xml={},e.module$build$src$core$xml.appendDomToWorkspace=on,e.module$build$src$core$xml.blockToDom=qt,e.module$build$src$core$xml.blockToDomWithXY=Xt,e.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=nn,e.module$build$src$core$xml.deleteNext=bn,e.module$build$src$core$xml.domToBlock=sn,e.module$build$src$core$xml.domToPrettyText=en,e.module$build$src$core$xml.domToText=Jt,e.module$build$src$core$xml.domToVariables=an,e.module$build$src$core$xml.domToWorkspace=rn,e.module$build$src$core$xml.textToDom=tn,e.module$build$src$core$xml.variablesToDom=jt,e.module$build$src$core$xml.workspaceToDom=zt;var tu=class extends $c{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}fromJson(e){t("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.blockId=e.blockId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new tu)).blockId=e.blockId,t}},nu=class extends tu{constructor(e,t,n,r,i){super(e),this.type=Xl,e&&(this.element=t,this.name=n||void 0,this.oldValue=r,this.newValue=i)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}fromJson(e){t("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new nu)).element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(t=t.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":const n=nu.getExtraBlockState_(t);t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(tn(e||"<mutation/>")),Qe(new nu(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState())?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Jt(e):""}};Me(Ml.EVENT,Xl,nu);var ru=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(!t)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");t.dispose(),this.markers.delete(e)}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t,n=0;t=e[n];n++)this.unregisterMarker(t);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};ru.LOCAL_MARKER="local_marker_1",e.module$build$src$core$utils$string={},e.module$build$src$core$utils$string.commonWordPrefix=On,e.module$build$src$core$utils$string.commonWordSuffix=Sn,e.module$build$src$core$utils$string.isNumber=An,e.module$build$src$core$utils$string.shortestStringLength=yn,e.module$build$src$core$utils$string.startsWith=vn,e.module$build$src$core$utils$string.wrap=Tn;var iu=void 0,ou=!1,su=!1,au=50,lu=0,cu=0,uu=0,hu=0,du=null,pu=null,fu=0,mu=10,gu=10,_u=750,bu=5,vu=null,yu={};yu.HOVER_MS=_u,yu.LIMIT=au,yu.MARGINS=bu,yu.OFFSET_X=fu,yu.OFFSET_Y=mu,yu.RADIUS_OK=gu,yu.bindMouseEvents=Dn,yu.block=Wn,yu.createDom=Ln,yu.dispose=Un,yu.getCustomTooltip=Rn,yu.getDiv=Mn,yu.getTooltipOfObject=$n,yu.hide=Vn,yu.isVisible=In,yu.setCustomTooltip=kn,yu.unbindMouseEvents=Nn,yu.unblock=Hn;var Ou=.45,Su=.65,Tu={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},xu={};xu.blend=rr,xu.getHsvSaturation=Yn,xu.getHsvValue=qn,xu.hexToRgb=tr,xu.hsvToHex=nr,xu.hueToHex=ir,xu.names=Tu,xu.parse=Jn,xu.rgbToHex=er,xu.setHsvSaturation=Zn,xu.setHsvValue=Kn;var Eu={};Eu.checkMessageReferences=lr,Eu.parseBlockColour=cr,Eu.replaceMessageReferences=ar,Eu.tokenizeInterpolation=sr;var wu,Cu=class{},Au=null,ku=null,Ru="",Iu="",Mu={};Mu.createDom=dr,Mu.getDiv=ur,Mu.hide=fr,Mu.hideIfOwner=gr,Mu.isVisible=mr,Mu.positionWithAnchor=br,Mu.show=pr,Mu.testOnly_setDiv=hr;var $u=class{constructor(e,t,n){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new ll(0,0),e!==$u.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(ar(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=D(zc.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=D(zc.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=D(zc.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");Dn(e),this.mouseDownWrapper_=d(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return null!==(e=this.saveLegacyState($u))?e:this.getValue()}loadState(e){this.loadLegacyState($u,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?((e=ut("field")).setAttribute("name",this.name||""),Jt(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml&&(this.fromXml(tn(t)),!0)}dispose(){Ce(this),gr(this),Nn(this.getClickTarget_()),this.mouseDownWrapper_&&f(this.mouseDownWrapper_),U(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(N(e,"blocklyEditableText"),F(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(N(e,"blocklyNonEditableText"),F(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==$u.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}updateSize_(e){const t=this.getConstants();let n=2*(e=void 0!==e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),r=t.FIELD_TEXT_HEIGHT,i=0;this.textElement_&&(i=X(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),n+=i),this.borderRect_&&(r=Math.max(r,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=r,this.size_.width=n,this.positionTextElement_(e,i),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var n,r=this.getConstants(),i=this.size_.height/2;this.textElement_.setAttribute("x",`${null!=(n=this.getSourceBlock())&&n.RTL?this.size_.width-t-e:e}`),this.textElement_.setAttribute("y",`${r.FIELD_TEXT_BASELINE_CENTER?i:i-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(this.render_(),0!==this.size_.width&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new ll(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Pu;if(this.borderRect_){var n=this.borderRect_.getBoundingClientRect();e=oe(this.borderRect_),t=n.width,n=n.height}else{n=this.sourceBlock_.getHeightWidth();const r=t.workspace.scale;e=this.getAbsoluteXY_(),t=(n.width+1)*r,n=(n.height+1)*r,Pa?(e.x+=1.5*r,e.y+=1.5*r):(e.x-=.5*r,e.y-=.5*r)}return new sl(e.y,e.y+n,e.x,e.x+t)}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,$u.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):$u.NBSP}getText(){const e=this.getText_();return String(null!==e?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(e){if(null!==e){var t=this.doClassValidation_(e);if(!((e=this.processValidation_(e,t))instanceof Error)){if((t=this.getValidator())&&(t=t.call(this,e),(e=this.processValidation_(e,t))instanceof Error))return;if(!(t=this.sourceBlock_)||!t.disposed){var n=this.getValue();n===e?this.doValueUpdate_(e):(this.doValueUpdate_(e),t&&Ke()&&Qe(new(ot(Xl))(t,"field",this.name||null,n,e)),this.isDirty_&&this.forceRerender())}}}}processValidation_(e,t){return null===t?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==t&&(e=t),e)}getValue(){return this.value_}doClassValidation_(e){return null==e?null:e}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||""===e||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return $n(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return oe(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Pu;const n=t.inputList;for(let r=0;r<t.inputList.length;r++){const t=n[r],i=t.fieldRow;for(let n=0;n<i.length;n++)if(i[n]===this){e=t;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Pu;(e=e.workspace).keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(ru.LOCAL_MARKER).draw()}};$u.NBSP=" ",$u.SKIP_SETUP=new Cu;var Pu=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Lu={fromJsonInternal:xr},Du={};Du.TEST_ONLY=Lu,Du.fromJson=Tr,Du.register=Or,Du.unregister=Sr;var Nu,Bu,Fu="aria-",Gu="role";(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Nu||(Nu={})),function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"}(Bu||(Bu={}));var Uu,Vu={};Vu.Role=Nu,Vu.State=Bu,Vu.setRole=Er,Vu.setState=wr,function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"}(Uu||(Uu={}));var Wu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Er(t,this.roleName),this.element=t;for(let n,r=0;n=this.menuItems[r];r++)t.appendChild(n.createDom());return this.mouseOverHandler=d(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=d(t,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=d(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=d(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=d(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),N(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),F(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(f(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(f(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(f(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(f(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(f(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e,t=0;e=this.menuItems[t];t++)e.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem"))for(let t,n=0;t=this.menuItems[n];n++)if(t.getElement()===e)return t;e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;t&&(t.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement(),le(e.getElement(),t),wr(t,Bu.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){let n;for(e+=t;n=this.menuItems[e];){if(n.isEnabled()){this.setHighlighted(n);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&"number"==typeof e.clientX){const n=new al(e.clientX,e.clientY);if(1>al.distance(t,n))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.keyCode){case Uu.ENTER:case Uu.SPACE:t&&t.performAction();break;case Uu.UP:this.highlightPrevious();break;case Uu.DOWN:this.highlightNext();break;case Uu.PAGE_UP:case Uu.HOME:this.highlightFirst();break;case Uu.PAGE_DOWN:case Uu.END:this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=ee(e);return t.height=e.scrollHeight,t}},Hu=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=Ue(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(n)}return n=this.content,"string"==typeof this.content&&(n=document.createTextNode(this.content)),t.appendChild(n),e.appendChild(t),this.roleName&&Er(e,this.roleName),wr(e,Bu.SELECTED,this.checkable&&this.checked||!1),wr(e,Bu.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return null!=(e=this.opt_value)?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(N(t,"blocklyMenuItemHighlight"),N(t,"goog-menuitem-highlight")):(F(t,"blocklyMenuItemHighlight"),F(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},Qu=class extends $u{constructor(e,t,n){super($u.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,Cr(e)&&(Array.isArray(e)?(Rr(e),e=Ar(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption_=this.getOptions(!1)[0],n&&this.configure_(n),this.setValue(this.selectedOption_[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Qu,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=D(zc.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&N(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!(null!=(e=this.getSourceBlock())&&e.isShadow())}createTextArrow_(){let e,t;this.arrow_=D(zc.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(null!=(e=this.getSourceBlock())&&e.RTL?Qu.ARROW_CHAR+" ":" "+Qu.ARROW_CHAR)),null!=(t=this.getSourceBlock())&&t.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=D(zc.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(el,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Pu;this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new al(e.clientX,e.clientY):null,fe(),e=this.menu_.render(pe()),N(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=t.isShadow()?t.getParent().getColour():t.getColour(),t=t.isShadow()?t.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,me(e,t)),_e(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const e=this.getSourceBlock();if(!e)throw new Pu;const t=new Wu;t.setRole(Nu.LISTBOX),this.menu_=t;const n=this.getOptions(!1);this.selectedMenuItem_=null;for(let i=0;i<n.length;i++){const[o,s]=n[i];if("object"==typeof o){var r=new Image(o.width,o.height);r.src=o.src,r.alt=o.alt||""}else r=o;(r=new Hu(r,s)).setRole(Nu.OPTION),r.setRightToLeft(e.RTL),r.setCheckable(!0),t.addChild(r),r.setChecked(s===this.value_),s===this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(e){Ce(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return"function"==typeof this.menuGenerator_}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:(e&&this.generatedOptions_||(this.generatedOptions_=this.menuGenerator_(),Rr(this.generatedOptions_)),this.generatedOptions_)}doClassValidation_(e){return this.getOptions(!0).some((t=>t[1]===e))?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t,n=0;t=e[n];n++)t[1]===this.value_&&(this.selectedOption_=t)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=e.colourSecondary:this.arrow_.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(e){const t=this.getSourceBlock();if(!t)throw new Pu;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(el,"xlink:href",e.src),this.imageElement_.setAttribute("height",`${e.height}`),this.imageElement_.setAttribute("width",`${e.width}`);const n=Number(e.height);e=Number(e.width);var r=!!this.borderRect_;const i=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+zu);let o;r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.svgArrow_?this.positionSVGArrow_(e+r,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):X(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+o+2*r,this.size_.height=i;let s=0;t.RTL?this.imageElement_.setAttribute("x",(r+o).toString()):(s=e+o,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r.toString())),this.imageElement_.setAttribute("y",(i/2-n/2).toString()),this.positionTextElement_(s+r,e+o)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();N(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const n=X(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let r=0;this.svgArrow_&&(r=this.positionSVGArrow_(n+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+r+2*t,this.size_.height=e,this.positionTextElement_(t,n)}positionSVGArrow_(e,t){if(!this.svgArrow_)return 0;const n=this.getSourceBlock();if(!n)throw new Pu;const r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,i=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(n.RTL?r:e+i)+","+t+")"),o+i}getText_(){if(!this.selectedOption_)return null;const e=this.selectedOption_[0];return"object"==typeof e?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};Qu.CHECKMARK_OVERHANG=25,Qu.MAX_MENU_HEIGHT_VH=.45,Qu.ARROW_CHAR="▾";var zu=10;Or("field_dropdown",Qu),e.module$build$src$core$field_dropdown={},e.module$build$src$core$field_dropdown.FieldDropdown=Qu;var ju,Xu=class extends Uc{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=ic,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=n)}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}fromJson(e){t("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Xu)).isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}};(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(ju||(ju={})),Me(Ml.EVENT,ic,Xu);var Yu=class{constructor(e,t,n,r,i){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new al(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new al(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=n||!1,this.margin=void 0!==i?i:Yu.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),r&&(e+=" "+r),this.outerSvg=D(zc.SVG,{class:e}),r=D(zc.G,{},this.outerSvg),this.svgBackground=D(zc.RECT,{class:"blocklyScrollbarBackground"},r),e=Math.floor((Yu.scrollbarThickness-5)/2),this.svgHandle=D(zc.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},r),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),V(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=d(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=d(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Yu.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),f(this.onMouseDownBarWrapper_),f(this.onMouseDownHandleWrapper_),U(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,H(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){(e||(e=this.workspace.getMetrics()))&&(this.oldHostMetrics&&Yu.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics()))}requiresViewResize(e){return!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=Yu.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Yu.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Yu.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var n=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=Yu.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Yu.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var n=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){const t=e!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),i(),this.cleanUp(),g(e))e.stopPropagation();else{var t=_(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var n=Ut(this.svgHandle);n=this.horizontal?n.x:n.y;var r=this.handlePosition,o=.95*this.handleLength;t<=n?r-=o:t>=n+this.handleLength&&(r+=o),this.setHandlePosition(this.constrainHandlePosition(r)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),g(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=d(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=d(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),i(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(f(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(f(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||void 0===t)&&this.updateMetrics()}setOrigin(e,t){this.origin=new al(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Yu.scrollbarThickness=Ca?25:15,Yu.DEFAULT_SCROLLBAR_MARGIN=.5;var Zu,qu=class{constructor(e,t,n,r,i,o){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=e,this.content_=t,this.shape_=n,n=qu.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrowRadians=q(n),e.getBubbleCanvas().appendChild(this.createDom(t,!(!i||!o))),this.setAnchorLocation(r),i&&o||(i=(e=this.content_.getBBox()).width+2*qu.BORDER_WIDTH,o=e.height+2*qu.BORDER_WIDTH),this.setBubbleSize(i,o),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(e,t){this.bubbleGroup=D(zc.G,{});var n={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return $a&&(n={}),n=D(zc.G,n,this.bubbleGroup),this.bubbleArrow=D(zc.PATH,{},n),this.bubbleBack=D(zc.RECT,{class:"blocklyDraggable",x:0,y:0,rx:qu.BORDER_WIDTH,ry:qu.BORDER_WIDTH},n),t?(this.resizeGroup=D(zc.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),t=2*qu.BORDER_WIDTH,D(zc.POLYGON,{points:"0,x x,x x,0".replace(/x/g,t.toString())},this.resizeGroup),D(zc.LINE,{class:"blocklyResizeLine",x1:t/3,y1:t-1,x2:t-1,y2:t/3},this.resizeGroup),D(zc.LINE,{class:"blocklyResizeLine",x1:2*t/3,y1:t-1,x2:t-1,y2:2*t/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=d(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=d(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(e),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(e){let t;null==(t=this.bubbleGroup)||t.setAttribute("data-block-id",e)}bubbleMouseDown(e){const t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){}isDeletable(){return!1}setDeleteStyle(e){}resizeMouseDown(e){this.promote(),qu.unbindDragEvents(),g(e)||(this.workspace_.startDrag(e,new al(this.workspace_.RTL?-this.width:this.width,this.height)),qu.onMouseUpWrapper=d(document,"pointerup",this,qu.bubbleMouseUp),qu.onMouseMoveWrapper=d(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),e.stopPropagation()}resizeMouseMove(e){this.autoLayout=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(e){this.resizeCallback=e}registerMoveEvent(e){this.moveCallback=e}promote(){let e;const t=null==(e=this.bubbleGroup)?void 0:e.parentNode;return!((null==t?void 0:t.lastChild)===this.bubbleGroup||!this.bubbleGroup||(null==t||t.appendChild(this.bubbleGroup),0))}setAnchorLocation(e){this.anchorXY=e,this.rendered&&this.positionBubble()}layoutBubble(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),t=this.getOptimalRelativeLeft(e),n=this.getOptimalRelativeTop(e),r=this.shape_.getBBox();const i={x:t,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},o={x:-this.width-30,y:n};n={x:r.width,y:n};var s={x:t,y:r.height};t=r.width<r.height?n:s,r=r.width<r.height?s:n,n=this.getOverlap(i,e),s=this.getOverlap(o,e);const a=this.getOverlap(t,e);e=this.getOverlap(r,e),n===(e=Math.max(n,s,a,e))?(this.relativeLeft=i.x,this.relativeTop=i.y):s===e?(this.relativeLeft=o.x,this.relativeTop=o.y):a===e?(this.relativeLeft=t.x,this.relativeTop=t.y):(this.relativeLeft=r.x,this.relativeTop=r.y)}getOverlap(e,t){var n=this.workspace_.RTL?this.anchorXY.x-e.x-this.width:e.x+this.anchorXY.x;return e=e.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(n+this.width,t.left+t.width)-Math.max(n,t.left))*(Math.min(e+this.height,t.top+t.height)-Math.max(e,t.top))/(this.width*this.height)))}getOptimalRelativeLeft(e){let t=-this.width/4;if(this.width>e.width)return t;if(this.workspace_.RTL){var n=this.anchorXY.x-t,r=e.left+e.width;e=e.left+Yu.scrollbarThickness/this.workspace_.scale,n-this.width<e?t=-(e-this.anchorXY.x+this.width):n>r&&(t=-(r-this.anchorXY.x))}else{r=(n=t+this.anchorXY.x)+this.width;const i=e.left;e=e.left+e.width-Yu.scrollbarThickness/this.workspace_.scale,n<i?t=i-this.anchorXY.x:r>e&&(t=e-this.anchorXY.x-this.width)}return t}getOptimalRelativeTop(e){let t=-this.height/4;if(this.height>e.height)return t;const n=this.anchorXY.y+t,r=n+this.height,i=e.top;e=e.top+e.height-Yu.scrollbarThickness/this.workspace_.scale;const o=this.anchorXY.y;return n<i?t=i-o:r>e&&(t=e-o-this.height),t}positionBubble(){let e=this.anchorXY.x;e=this.workspace_.RTL?e-(this.relativeLeft+this.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchorXY.y)}moveTo(e,t){let n;null==(n=this.bubbleGroup)||n.setAttribute("transform","translate("+e+","+t+")")}setDragging(e){!e&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new ll(this.width,this.height)}setBubbleSize(e,t){const n=2*qu.BORDER_WIDTH;let r,i;e=Math.max(e,n+45),t=Math.max(t,n+20),this.width=e,this.height=t,null==(r=this.bubbleBack)||r.setAttribute("width",e.toString()),null==(i=this.bubbleBack)||i.setAttribute("height",t.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*qu.BORDER_WIDTH+","+(t-n)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(e-n)+","+(t-n)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const e=[];var t=this.width/2,n=this.height/2,r=-this.relativeLeft,i=-this.relativeTop;if(t===r&&n===i)e.push("M "+t+","+n);else{i-=n,r-=t,this.workspace_.RTL&&(r*=-1);var o=Math.sqrt(i*i+r*r),s=Math.acos(r/o);0>i&&(s=2*Math.PI-s);var a=s+Math.PI/2;a>2*Math.PI&&(a-=2*Math.PI);var l=Math.sin(a);const u=Math.cos(a);var c=this.getBubbleSize();a=(c.width+c.height)/qu.ARROW_THICKNESS,a=Math.min(a,c.width,c.height)/4,r=t+(c=1-qu.ANCHOR_RADIUS/o)*r,i=n+c*i,c=t+a*u;const h=n+a*l;t-=a*u,n-=a*l,(l=s+this.arrowRadians)>2*Math.PI&&(l-=2*Math.PI),s=Math.sin(l)*o/qu.ARROW_BEND,o=Math.cos(l)*o/qu.ARROW_BEND,e.push("M"+c+","+h),e.push("C"+(c+o)+","+(h+s)+" "+r+","+i+" "+r+","+i),e.push("C"+r+","+i+" "+(t+o)+","+(n+s)+" "+t+","+n)}let u;e.push("z"),null==(u=this.bubbleArrow)||u.setAttribute("d",e.join(" "))}setColour(e){let t,n;null==(t=this.bubbleBack)||t.setAttribute("fill",e),null==(n=this.bubbleArrow)||n.setAttribute("fill",e)}dispose(){this.onMouseDownBubbleWrapper&&f(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&f(this.onMouseDownResizeWrapper),qu.unbindDragEvents(),U(this.bubbleGroup),this.disposed=!0}moveDuringDrag(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-t.x-this.width:t.x-this.anchorXY.x,this.relativeTop=t.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new al(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(e){this.autoLayout=e}static unbindDragEvents(){qu.onMouseUpWrapper&&(f(qu.onMouseUpWrapper),qu.onMouseUpWrapper=null),qu.onMouseMoveWrapper&&(f(qu.onMouseMoveWrapper),qu.onMouseMoveWrapper=null)}static bubbleMouseUp(e){i(),qu.unbindDragEvents()}static textToDom(e){const t=D(zc.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:qu.BORDER_WIDTH});e=e.split("\n");for(let n=0;n<e.length;n++){const r=D(zc.TSPAN,{dy:"1em",x:qu.BORDER_WIDTH},t),i=document.createTextNode(e[n]);r.appendChild(i)}return t}static createNonEditableBubble(e,t,n){if((n=new qu(t.workspace,e,t.pathObject.svgPath,n,null,null)).setSvgId(t.id),t.RTL){t=e.getBBox().width;for(let n,r=0;n=e.childNodes[r];r++)n.setAttribute("text-anchor","end"),n.setAttribute("x",(t+qu.BORDER_WIDTH).toString())}return n}};qu.BORDER_WIDTH=6,qu.ARROW_THICKNESS=5,qu.ARROW_ANGLE=20,qu.ARROW_BEND=4,qu.ANCHOR_RADIUS=8,qu.onMouseUpWrapper=null,qu.onMouseMoveWrapper=null,Zu=28,e.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Zu,connectingSnapRadius:Zu,currentConnectionPreference:8,bumpDelay:250},e.config$$module$build$src$core$config;var Ku=class{constructor(e){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,e||t("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=e}createIcon(){this.iconGroup_||(this.iconGroup_=D(zc.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&N(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),d(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){U(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(e){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||g(e)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(e){this.iconXY_=e,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(e)}computeIconLocation(){var e=this.getBlock().getRelativeToSurfaceXY();const t=Gt(this.iconGroup_);e=new al(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2),al.equals(this.getIconLocation(),e)||this.setIconLocation(e)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new ll(this.SIZE,this.SIZE-2)}drawIcon_(e){}setVisible(e){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},Ju={};Ju.deepMerge=$r,Ju.inherits=Ir,Ju.mixin=Mr,Ju.values=Pr;var eh,th=class{constructor(e,t,n,r){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=r||Object.create(null),this.fontStyle=Object.create(null),Me(Ml.THEME,e,this)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const n=new th(e);let r=t.base;if(r){if("string"==typeof r){let e;r=null!=(e=Be(Ml.THEME,r))?e:void 0}r instanceof th&&($r(n,r),n.name=e)}return $r(n.blockStyles,t.blockStyles),$r(n.categoryStyles,t.categoryStyles),$r(n.componentStyles,t.componentStyles),$r(n.fontStyle,t.fontStyle),null!==t.startHats&&(n.startHats=t.startHats),n}},nh=new th("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}}),rh="categoryToolbox",ih="flyoutToolbox";!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(eh||(eh={}));var oh={hasCategoriesInternal:Fr},sh={};sh.Position=eh,sh.TEST_ONLY=oh,sh.convertFlyoutDefToJsonArray=Nr,sh.convertToolboxDefToJson=Lr,sh.hasCategories=Br,sh.isCategoryCollapsible=Gr,sh.parseToolboxTree=Hr;var ah=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,r=!1;var i=!1,o=!1,s=!1,a=!1,l=!1;const c=!!e.readOnly;var u;c||(n=Lr(null!=(u=e.toolbox)?u:null),r=Br(n),i=void 0===(i=e.trashcan)?r:i,o=void 0===(o=e.collapse)?r:o,s=void 0===(s=e.comments)?r:s,a=void 0===(a=e.disable)?r:a,l=void 0===(l=e.sounds)||l),u=e.maxTrashcanContents,i?void 0===u&&(u=32):u=0;const h=!!e.rtl;let d=e.horizontalLayout;void 0===d&&(d=!1);var p="end"!==e.toolboxPosition;p=d?p?eh.TOP:eh.BOTTOM:p===h?eh.RIGHT:eh.LEFT;let f=e.css;void 0===f&&(f=!0);let m="https://blockly-demo.appspot.com/static/media/";e.media?m=e.media.endsWith("/")?e.media:e.media+"/":"path"in e&&(t("path","Nov 2014","Jul 2023","media"),m=e.path+"media/");const g=e.oneBasedIndex,_=e.renderer||"geras",b=e.plugins||{};let v,y,O,S=e.modalInputs;void 0===S&&(S=!0),this.RTL=h,this.oneBasedIndex=void 0===g||g,this.collapse=o,this.comments=s,this.disable=a,this.readOnly=c,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=null!=(v=e.maxInstances)?v:null,this.modalInputs=S,this.pathToMedia=m,this.hasCategories=r,this.moveOptions=ah.parseMoveOptions_(e,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=i,this.maxTrashcanContents=u,this.hasSounds=l,this.hasCss=f,this.horizontalLayout=d,this.languageTree=n,this.gridOptions=ah.parseGridOptions_(e),this.zoomOptions=ah.parseZoomOptions_(e),this.toolboxPosition=p,this.theme=ah.parseThemeOptions_(e),this.renderer=_,this.rendererOverrides=null!=(y=e.rendererOverrides)?y:null,this.parentWorkspace=null!=(O=e.parentWorkspace)?O:null,this.plugins=b}static parseMoveOptions_(e,t){const n=e.move||{},r={};return void 0===n.scrollbars&&void 0===e.scrollbars?r.scrollbars=t:"object"==typeof n.scrollbars?(r.scrollbars={horizontal:!!n.scrollbars.horizontal,vertical:!!n.scrollbars.vertical},r.scrollbars.horizontal&&r.scrollbars.vertical?r.scrollbars=!0:r.scrollbars.horizontal||r.scrollbars.vertical||(r.scrollbars=!1)):r.scrollbars=!!n.scrollbars||!!e.scrollbars,r.wheel=r.scrollbars&&void 0!==n.wheel?!!n.wheel:"object"==typeof r.scrollbars,r.drag=!(!r.scrollbars||void 0!==n.drag&&!n.drag),r}static parseZoomOptions_(e){e=e.zoom||{};const t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:Number(e.startScale),t.maxScale=void 0===e.maxScale?3:Number(e.maxScale),t.minScale=void 0===e.minScale?.3:Number(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),t.pinch=void 0===e.pinch?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions_(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=void 0===e.length?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions_(e){return"string"==typeof(e=e.theme||nh)?Be(Ml.THEME,e):e instanceof th?e:th.defineTheme(e.name||"builtin"+Ue(),e)}};e.Mutator$$module$build$src$core$mutator=class extends Ku{constructor(e,n){n||t("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(null!=n?n:null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=e}setBlock(e){this.block_=e}getWorkspace(){return this.workspace_}drawIcon_(e){D(zc.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),D(zc.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),D(zc.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)}iconClick_(e){this.getBlock().isEditable()&&super.iconClick_(e)}createEditor(){if(this.svgDialog=D(zc.SVG,{x:qu.BORDER_WIDTH,y:qu.BORDER_WIDTH}),this.quarkNames.length){var e=ut("xml");for(let n,r=0;n=this.quarkNames[r];r++){var t=ut("block");t.setAttribute("type",n),e.appendChild(t)}}else e=null;var n=this.getBlock();return(t=new ah({disable:!1,parentWorkspace:n.workspace,media:n.workspace.options.pathToMedia,rtl:n.RTL,horizontalLayout:!1,renderer:n.workspace.options.renderer,rendererOverrides:n.workspace.options.rendererOverrides})).toolboxPosition=n.RTL?eh.RIGHT:eh.LEFT,(n=!!e)&&(t.languageTree=Lr(e)),this.workspace_=this.newWorkspaceSvg(t),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(st),e=n?this.workspace_.addFlyout(zc.G):null,t=this.workspace_.createDom("blocklyMutatorBackground"),e&&t.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(t),this.svgDialog}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&F(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&N(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var e=2*qu.BORDER_WIDTH,t=this.workspace_.getCanvas(),n=t.getBBox(),r=n.width+n.x,i=n.height+3*e,o=this.workspace_.getFlyout();if(o){const e=o.getWorkspace().getMetricsManager().getScrollMetrics();i=Math.max(i,e.height+20),r+=o.getWidth()}(o=this.getBlock().RTL)&&(r=-n.x),r+=3*e,(Math.abs(this.workspaceWidth-r)>e||Math.abs(this.workspaceHeight-i)>e)&&(this.workspaceWidth=r,this.workspaceHeight=i,this.bubble_.setBubbleSize(r+e,i+e),this.svgDialog.setAttribute("width",`${r}`),this.svgDialog.setAttribute("height",`${i}`),this.workspace_.setCachedParentSvgSize(r,i)),o&&t.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(e){if(e!==this.isVisible()){var t=this.getBlock();if(Qe(new(ot(ic))(t,e,"mutator")),e){this.bubble_=new qu(t.workspace,this.createEditor(),t.pathObject.svgPath,this.iconXY_,null,null),e=this.workspace_,this.bubble_.setSvgId(t.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var n=e.options.languageTree,r=e.getFlyout();n&&(r.init(e),r.show(n)),this.rootBlock=t.decompose(e),n=this.rootBlock.getDescendants(!1);for(let e,t=0;e=n[t];t++)e.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),r?(n=2*r.CORNER_RADIUS,r=this.rootBlock.RTL?r.getWidth()+n:n):r=n=16,t.RTL&&(r=-r),this.rootBlock.moveBy(r,n),t.saveConnections){const e=this.rootBlock;t.saveConnections(e),this.sourceListener=()=>{const t=this.getBlock();t.saveConnections&&t.saveConnections(e)},t.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),e.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,null==(r=this.bubble_)||r.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(t.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(e){this.shouldIgnoreMutatorEvent_(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout((()=>{this.updateWorkspacePid=null,this.updateWorkspace()}),0))}shouldIgnoreMutatorEvent_(e){return e.isUiEvent||e.type===zl||e.type===Xl&&"disabled"===e.element}updateWorkspace(){if(!this.workspace_.isDragging()){var t=this.workspace_.getTopBlocks(!1);for(let e,i=0;e=t[i];i++){var n=e.getRelativeToSurfaceXY();if(20>n.y&&e.moveBy(0,20-n.y),e.RTL){var r=-20;const t=this.workspace_.getFlyout();t&&(r-=t.getWidth()),n.x>r&&e.moveBy(r-n.x,0)}else 20>n.x&&e.moveBy(20-n.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(t=Je())||et(!0);const i=this.getBlock();if(n=nu.getExtraBlockState_(i),r=i.rendered,i.rendered=!1,i.compose(this.rootBlock),i.rendered=r,i.initSvg(),i.rendered&&i.render(),n!==(r=nu.getExtraBlockState_(i))){Qe(new(ot(Xl))(i,"mutation",null,n,r));const t=Je();setTimeout((function(){const e=Je();et(t),i.bumpNeighbours(),et(e)}),e.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout((()=>this.resizeBubble()),0),et(t)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){const t=e.getAllBlocks(!1);for(let e,n=0;e=t[n];n++)e.setStyle(e.getStyleName());if(e=e.getFlyout()){e=e.getWorkspace().getAllBlocks(!1);for(let t,n=0;t=e[n];n++)t.setStyle(t.getStyleName())}}}static reconnect(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;const r=e.targetBlock();return!(r&&r!==t||!n||n.targetConnection===e||(n.isConnected()&&n.disconnect(),n.connect(e),0))}static findParentWs(e){let t=null;if(e&&e.options){const n=e.options.parentWorkspace;e.isFlyout?n&&n.options&&(t=n.options.parentWorkspace):n&&(t=n)}return t}},e.Mutator$$module$build$src$core$mutator;var lh=Object.create(null),ch={allExtensions:lh};Qr("parent_tooltip_when_inline",ci),e.module$build$src$core$extensions={},e.module$build$src$core$extensions.TEST_ONLY=ch,e.module$build$src$core$extensions.apply=Zr,e.module$build$src$core$extensions.buildTooltipForDropdown=si,e.module$build$src$core$extensions.buildTooltipWithFieldText=li,e.module$build$src$core$extensions.isRegistered=Yr,e.module$build$src$core$extensions.register=Qr,e.module$build$src$core$extensions.registerMixin=zr,e.module$build$src$core$extensions.registerMutator=jr,e.module$build$src$core$extensions.runAfterPageLoad=oi,e.module$build$src$core$extensions.unregister=Xr;var uh={};uh.removeElem=ui;var hh={};hh.arc=bi,hh.curve=di,hh.line=gi,hh.lineOnAxis=_i,hh.lineTo=mi,hh.moveBy=fi,hh.moveTo=pi,hh.point=hi;var dh={};dh.Coordinate=al,dh.KeyCodes=Uu,dh.Rect=sl,dh.Size=ll,dh.Svg=zc,dh.aria=Vu,dh.array=uh,dh.arrayRemove=wi,dh.browserEvents=Wa,dh.checkMessageReferences=Ti,dh.colour=xu,dh.deprecation=ma,dh.dom=il,dh.extensions=e.module$build$src$core$extensions,dh.getBlockTypeCounts=Ai,dh.getDocumentScroll=Ci,dh.getInjectionDivXY_=yi,dh.getRelativeXY=vi,dh.getViewportBBox=Ei,dh.idGenerator=Nl,dh.is3dSupported=xi,dh.math=ol,dh.object=Ju,dh.parseBlockColour=Ri,dh.parsing=Eu,dh.replaceMessageReferences=Si,dh.runAfterPageLoad=Ii,dh.screenToWsCoordinates=ki,dh.string=e.module$build$src$core$utils$string,dh.style=ul,dh.svgMath=Zc,dh.svgPaths=hh,dh.tokenizeInterpolation=Oi,dh.toolbox=sh,dh.userAgent=Ga,dh.xml=e.module$build$src$core$utils$xml;var ph=class extends Uc{constructor(e,t){super(t),this.type=oc,this.isOpen=e}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}fromJson(e){t("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isOpen=e.isOpen}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new ph)).isOpen=e.isOpen,t}};Me(Ml.EVENT,oc,ph);var fh=class{constructor(e){this.name_=e}toString(){return this.name_}};fh.POSITIONABLE=new fh("positionable"),fh.DRAG_TARGET=new fh("drag_target"),fh.DELETE_AREA=new fh("delete_area"),fh.AUTOHIDEABLE=new fh("autohideable");var mh=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const n=e.component.id;var r;if(!t&&this.componentData.has(n))throw Error('Plugin "'+n+'" with capabilities "'+(null==(r=this.componentData.get(n))?void 0:r.capabilities)+'" already added.');for(this.componentData.set(n,e),t=[],r=0;r<e.capabilities.length;r++){const i=String(e.capabilities[r]).toLowerCase();if(t.push(i),this.capabilityToComponentIds.has(i)){let e;null==(e=this.capabilityToComponentIds.get(i))||e.push(n)}else this.capabilityToComponentIds.set(i,[n])}this.componentData.get(n).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let n=0;n<t.capabilities.length;n++){const r=String(t.capabilities[n]).toLowerCase();ui(this.capabilityToComponentIds.get(r),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');var n,r;this.hasCapability(e,t)?console.warn('Plugin "'+e+'already has capability "'+t+'"'):(t=String(t).toLowerCase(),null==(n=this.componentData.get(e))||n.capabilities.push(t),null==(r=this.capabilityToComponentIds.get(t))||r.push(e))}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=String(t).toLowerCase(),ui(this.componentData.get(e).capabilities,t),ui(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+"doesn't have capability \""+t+'" to remove')}hasCapability(e,t){return t=String(t).toLowerCase(),this.componentData.has(e)&&-1!==this.componentData.get(e).capabilities.indexOf(t)}getComponent(e){let t;return null==(t=this.componentData.get(e))?void 0:t.component}getComponents(e,t){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds.get(e)))return[];const n=[];if(t){const t=[];e.forEach((e=>{t.push(this.componentData.get(e))})),t.sort((function(e,t){return e.weight-t.weight})),t.forEach((function(e){n.push(e.component)}))}else e.forEach((e=>{n.push(this.componentData.get(e).component)}));return n}};mh.Capability=fh;var gh=class extends Error{},_h=class extends gh{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},bh=class extends gh{constructor(e,t,n){super(`The block ${t.toDevString()} is missing a(n) ${e}\nconnection`),this.block=t,this.state=n}},vh=class extends gh{constructor(e,t,n,r){super(`The block ${n.toDevString()} could not connect its\n${t} to its parent, because: ${e}`),this.childBlock=n,this.childState=r}},yh=class extends gh{constructor(e){super("Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren"),this.state=e}},Oh={};Oh.BadConnectionCheck=vh,Oh.DeserializationError=gh,Oh.MissingBlockType=_h,Oh.MissingConnection=bh,Oh.RealChildOfShadow=yh;var Sh=100,Th=75,xh=50,Eh={};Eh.BLOCKS=xh,Eh.PROCEDURES=Th,Eh.VARIABLES=Sh;var wh={};wh.register=Mi,wh.unregister=$i;var Ch=class{constructor(){this.priority=xh}save(e){const t=[];for(const n of e.getTopBlocks(!1))(e=Pi(n,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const n of e)Wi(n,t,{recordUndo:He()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Mi("blocks",new Ch);var Ah={};Ah.BlockSerializer=Ch,Ah.append=Wi,Ah.appendInternal=Hi,Ah.save=Pi;var kh=class extends tu{constructor(e){super(e),this.type=zl,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Xt(e),this.ids=nt(e),this.json=Pi(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Jt(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){t("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.xml=tn(e.xml),this.ids=e.ids,this.json=e.json,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new kh)).xml=tn(e.xml),t.ids=e.ids,t.json=e.json,void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(e)Wi(this.json,t);else for(e=0;e<this.ids.length;e++){const n=this.ids[e],r=t.getBlockById(n);r?r.dispose(!1):n===this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}};Me(Ml.EVENT,zl,kh);var Rh,Ih=class extends tu{constructor(e){if(super(e),this.type=jl,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Xt(e),this.ids=nt(e),this.wasShadow=e.isShadow(),this.oldJson=Pi(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(void 0===this.wasShadow)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Jt(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){t("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldXml=tn(e.oldXml),this.ids=e.ids,this.wasShadow=e.wasShadow||"shadow"===this.oldXml.tagName.toLowerCase(),this.oldJson=e.oldJson,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Ih)).oldXml=tn(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||"shadow"===t.oldXml.tagName.toLowerCase(),t.oldJson=e.oldJson,void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const n=this.ids[e],r=t.getBlockById(n);r?r.dispose(!1):n===this.blockId&&console.warn("Can't delete non-existent block: "+n)}else Wi(this.oldJson,t)}};Me(Ml.EVENT,jl,Ih),function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"}(Rh||(Rh={})),e.module$build$src$core$connection_type={},e.module$build$src$core$connection_type.ConnectionType=Rh;var Mh=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=e}connect_(e){const t=Rh.INPUT_VALUE,n=this.getSourceBlock();var r=e.getSourceBlock();let i,o;if(e.isConnected()&&e.disconnect(),this.isConnected()){const e=this.stashShadowState_(),t=this.targetBlock();t.isShadow()?t.dispose(!1):(this.disconnect(),i=t),this.applyShadowState_(e)}Ke()&&(o=new(ot(Yl))(r)),no(this,e),r.setParent(n),o&&(o.recordNew(),Qe(o)),i&&(e=this.type===t?i.outputConnection:i.previousConnection,(r=Mh.getConnectionForOrphanedConnection(r,e))?e.connect(r):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const e=this.targetBlock();e&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Rh.INPUT_VALUE||this.type===Rh.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=Je();t||et(!0),this.isSuperior()?this.connect_(e):e.connect_(this),t||et(!1)}return this.isConnected()}disconnect(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!==this)throw Error("Target connection not connected to source connection.");let t,n;this.isSuperior()?(t=this.sourceBlock_,n=e.getSourceBlock(),e=this):(t=e.getSourceBlock(),n=this.sourceBlock_);const r=Je();r||et(!0),this.disconnectInternal_(t,n),n.isShadow()||e.respawnShadow_(),r||et(!1)}disconnectInternal_(e,t){let n;Ke()&&(n=new(ot(Yl))(t)),(e=this.targetConnection)&&(e.targetConnection=null),this.targetConnection=null,t.setParent(null),n&&(n.recordNew(),Qe(n))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let e,t;return null!=(t=null==(e=this.targetConnection)?void 0:e.getSourceBlock())?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(e){this.setShadowStateInternal_({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?qt(this.targetBlock()):this.shadowDom_}setShadowState(e){this.setShadowStateInternal_({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Pi(this.targetBlock()):this.shadowState_}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let n=0;n<t.length;n++)if(t[n].connection===this){e=t[n];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let n,r=0;n=e.inputList[r];r++)if(n.connection===this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()}stashShadowState_(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:e,shadowState:t}}applyShadowState_({shadowDom:e,shadowState:t}){this.shadowDom_=e,this.shadowState_=t}setShadowStateInternal_({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom_=e,this.shadowState_=t,(e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(e=this.createShadowBlock_(!1),this.serializeShadow_(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(e){var t=this.getSourceBlock();const n=this.getShadowState(),r=this.getShadowDom();if(t.isDeadOrDying()||!n&&!r)return null;if(n)return Hi(n,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(r){if(t=sn(r,t.workspace),e)if(this.type===Rh.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else{if(this.type!==Rh.NEXT_STATEMENT)throw Error("Cannot connect a shadow block to a previous/output connection");if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}return t}return null}serializeShadow_(e){e&&(this.shadowDom_=qt(e),this.shadowState_=Pi(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Rh.OUTPUT_VALUE)return io(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const n=t.getConnectionChecker();return e&&n.canConnect(t,e,!1)?e:null}};Mh.CAN_CONNECT=0,Mh.REASON_SELF_CONNECTION=1,Mh.REASON_WRONG_TYPE=2,Mh.REASON_TARGET_NULL=3,Mh.REASON_CHECKS_FAILED=4,Mh.REASON_DIFFERENT_WORKSPACES=5,Mh.REASON_SHADOW_PARENT=6,Mh.REASON_DRAG_CHECKS_FAILED=7,Mh.REASON_PREVIOUS_AND_OUTPUT=8;var $h="_TEMP_COLLAPSED_INPUT",Ph="_TEMP_COLLAPSED_FIELD",Lh={};Lh.COLLAPSED_FIELD_NAME=Ph,Lh.COLLAPSED_INPUT_NAME=$h,e.FieldLabel$$module$build$src$core$field_label=class extends $u{constructor(e,t,n){super($u.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,e!==$u.SKIP_SETUP&&(n?this.configure_(n):this.class_=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class_=e.class)}initView(){this.createTextElement_(),this.class_&&N(this.getTextElement(),this.class_)}doClassValidation_(e){return null==e?null:String(e)}setClass(e){this.textElement_&&(this.class_&&F(this.textElement_,this.class_),e&&N(this.textElement_,e)),this.class_=e}static fromJson(e){return new this(ar(e.text),void 0,e)}},Or("field_label",e.FieldLabel$$module$build$src$core$field_label),e.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",e.FieldLabel$$module$build$src$core$field_label;var Dh,Nh=class{constructor(t,n,r,i){if(this.type=t,this.name=n,this.connection=i,this.fieldRow=[],this.align=e.Align$$module$build$src$core$input.LEFT,this.visible=!0,t!==Bl.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=r}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return t||""===t&&n?("string"==typeof t&&(t=Tr({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(t.init(),t.applyColour()),t.name=n,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),e):e}removeField(e,t){for(let n,r=0;n=this.fieldRow[r];r++)if(n.name===e)return n.dispose(),this.fieldRow.splice(r,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let r,i=0;r=this.fieldRow[i];i++)r.setVisible(e);if(this.connection){var n=this.connection;e?t=n.startTrackingAll():n.stopTrackingAll(),(n=n.targetBlock())&&(n.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e,t=0;e=this.fieldRow[t];t++)e.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()}dispose(){for(let e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose()}};(function(e){(e=e.Align||(e.Align={}))[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(Nh||(Nh={})),e.Align$$module$build$src$core$input=Nh.Align,(Dh={}).Align=e.Align$$module$build$src$core$input,Dh.Input=Nh;var Bh=class{constructor(e,t,n){if(this.wsCoordinate_=null,!t)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=Bh.isConnectionType_(e),this.location_=t,this.processParams_(n||null)}processParams_(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var e=this.location_.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const n=t.inputList[e],r=n.fieldRow;for(let e=0;e<r.length;e++){const t=r[e];if(t.isClickable()||Bh.NAVIGATE_ALL_FIELDS)return Bh.createFieldNode(t)}if(n.connection)return Bh.createInputNode(n)}return null}findNextForField_(){var e=this.location_,t=e.getParentInput();const n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var r=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;r<n.inputList.length;r++){const i=(t=n.inputList[r]).fieldRow;for(;e<i.length;){if(i[e].isClickable()||Bh.NAVIGATE_ALL_FIELDS)return Bh.createFieldNode(i[e]);e++}if(e=0,t.connection)return Bh.createInputNode(t)}return null}findPrevForInput_(){const e=this.location_.getParentInput(),t=e.getSourceBlock();for(var n=t.inputList.indexOf(e);0<=n;n--){var r=t.inputList[n];if(r.connection&&r!==e)return Bh.createInputNode(r);for(let e=(r=r.fieldRow).length-1;0<=e;e--){const t=r[e];if(t.isClickable()||Bh.NAVIGATE_ALL_FIELDS)return Bh.createFieldNode(t)}}return null}findPrevForField_(){var e=this.location_;const t=e.getParentInput(),n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var r=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=r;r--){var i=n.inputList[r];if(i.connection&&i!==t)return Bh.createInputNode(i);for(i=i.fieldRow;-1<e;){if(i[e].isClickable()||Bh.NAVIGATE_ALL_FIELDS)return Bh.createFieldNode(i[e]);e--}0<=r-1&&(e=n.inputList[r-1].fieldRow.length-1)}return null}navigateBetweenStacks_(e){var t=this.getLocation();if(t.getSourceBlock){var n=t.getSourceBlock();n&&(t=n)}if(!t||t.isDeadOrDying())return null;n=t.getRootBlock(),t=n.workspace.getTopBlocks(!0);for(let r=0;r<t.length;r++)if(n.id===t[r].id)return-1===(e=r+(e?1:-1))||e===t.length?null:Bh.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(e){const t=oo(e);return t?Bh.createConnectionNode(t):Bh.createBlockNode(e)}getOutAstNodeForBlock_(e){if(!e)return null;e=e.getTopStackBlock();const t=oo(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?Bh.createInputNode(t.targetConnection.getParentInput()):Bh.createStackNode(e)}findFirstFieldOrInput_(e){e=e.inputList;for(let t=0;t<e.length;t++){const n=e[t],r=n.fieldRow;for(let e=0;e<r.length;e++){const t=r[e];if(t.isClickable()||Bh.NAVIGATE_ALL_FIELDS)return Bh.createFieldNode(t)}if(n.connection)return Bh.createInputNode(n)}return null}getSourceBlock(){return this.getType()===Bh.types.BLOCK||this.getType()===Bh.types.STACK?this.getLocation():this.getType()===Bh.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case Bh.types.STACK:return this.navigateBetweenStacks_(!0);case Bh.types.OUTPUT:return Bh.createBlockNode(this.location_.getSourceBlock());case Bh.types.FIELD:return this.findNextForField_();case Bh.types.INPUT:return this.findNextForInput_();case Bh.types.BLOCK:return Bh.createConnectionNode(this.location_.nextConnection);case Bh.types.PREVIOUS:return Bh.createBlockNode(this.location_.getSourceBlock());case Bh.types.NEXT:return Bh.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case Bh.types.WORKSPACE:const e=this.location_.getTopBlocks(!0);if(0<e.length)return Bh.createStackNode(e[0]);break;case Bh.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Bh.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Bh.types.INPUT:return Bh.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case Bh.types.STACK:return this.navigateBetweenStacks_(!1);case Bh.types.FIELD:return this.findPrevForField_();case Bh.types.INPUT:return this.findPrevForInput_();case Bh.types.BLOCK:var e=oo(this.location_);return Bh.createConnectionNode(e);case Bh.types.PREVIOUS:if((e=this.location_.targetConnection)&&!e.getParentInput())return Bh.createConnectionNode(e);break;case Bh.types.NEXT:return Bh.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case Bh.types.STACK:var e=this.location_,t=e.getRelativeToSurfaceXY();return t=new al(t.x,t.y+Bh.DEFAULT_OFFSET_Y),Bh.createWorkspaceNode(e.workspace,t);case Bh.types.OUTPUT:return(t=(e=this.location_).targetConnection)?Bh.createConnectionNode(t):Bh.createStackNode(e.getSourceBlock());case Bh.types.FIELD:if(!(e=this.location_.getSourceBlock()))throw Error("The current AST location is not associated with a block");return Bh.createBlockNode(e);case Bh.types.INPUT:return Bh.createBlockNode(this.location_.getSourceBlock());case Bh.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Bh.types.PREVIOUS:case Bh.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(e){switch(e){case Bh.types.PREVIOUS:case Bh.types.NEXT:case Bh.types.INPUT:case Bh.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Bh(Bh.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Rh.INPUT_VALUE||t===Rh.NEXT_STATEMENT&&e.getParentInput()?Bh.createInputNode(e.getParentInput()):t===Rh.NEXT_STATEMENT?new Bh(Bh.types.NEXT,e):t===Rh.OUTPUT_VALUE?new Bh(Bh.types.OUTPUT,e):t===Rh.PREVIOUS_STATEMENT?new Bh(Bh.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Bh(Bh.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Bh(Bh.types.BLOCK,e):null}static createStackNode(e){return e?new Bh(Bh.types.STACK,e):null}static createWorkspaceNode(e,t){return t&&e?new Bh(Bh.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=oo(e);return t?Bh.createConnectionNode(t):Bh.createBlockNode(e)}};Bh.NAVIGATE_ALL_FIELDS=!1,Bh.DEFAULT_OFFSET_Y=-20,function(e){(e=e.types||(e.types={})).FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace"}(Bh||(Bh={}));var Fh=class{constructor(e,t,n){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=e,this.id=n&&!e.getBlockById(n)?n:Ve(),e.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new ll(160,80)},this.xy_=new al(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,!(n=Za[t])||"object"!=typeof n)throw TypeError("Invalid block definition for type: "+t);Object.assign(this,n)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Fh&&this.doInit_()}doInit_(){const e=Je();e||et(!0);const t=He();try{"function"==typeof this.init&&(We(!1),this.init(),We(t)),Ke()&&Qe(new(ot(zl))(this))}finally{e||et(!1),We(t)}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)}dispose(e){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),Ke()&&Qe(new(ot(jl))(this)),Ze();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let t=this.childBlocks_.length-1;0<=t;t--)this.childBlocks_[t].dispose(!1);for(let t,n=0;t=this.inputList[n];n++)t.dispose();this.inputList.length=0;const e=this.getConnections_(!0);for(let t,n=0;t=e[n];n++)t.dispose()}finally{qe(),"function"==typeof this.destroy&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let e,t=0;e=this.inputList[t];t++)for(let n,r=0;n=e.fieldRow[r];r++)n.initModel&&n.initModel()}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(null==(e=e.targetConnection)||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):null==e||e.onFailedConnect(t))}getOnlyValueConnection_(){let e=null;for(let t=0;t<this.inputList.length;t++){const n=this.inputList[t].connection;if(n&&n.type===Rh.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e}unplugFromStack_(e){let t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());const n=this.getNextBlock();e&&n&&!n.isShadow()&&(null==(e=this.nextConnection.targetConnection)||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e))}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const n=t.targetBlock();if(!n||e&&n.isShadow())return t;t=n.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()===e)return t;return null}getSurroundParent(){let e,t=this;do{if(e=t,t=t.getParent(),!t)return null}while(t.getNextBlock()===e);return t}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type===Rh.NEXT_STATEMENT)return e.connection;return null}getRootBlock(){let e,t=this;do{e=t,t=e.parentBlock_}while(t);return e}getTopStackBlock(){let e,t=this;do{e=t.getPreviousBlock()}while(e&&e.getNextBlock()===t&&(t=e));return t}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let n,r=0;n=this.inputList[r];r++)if(n.connection){var t=n.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),n=!!t;if(n&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!n&&e)throw Error("Block not connected to new parent.");if(n&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?ui(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],n=this.getChildren(e);for(let r,i=0;r=n[i];i++)t.push(...r.getDescendants(e));return t}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(e){this.movable_=e}isDuplicatable(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(R(this,!0))}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(e){this.editable_=e;for(let t,n=0;t=this.inputList[n];n++)for(let e,r=0;e=t.fieldRow[r];r++)e.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(e,t){const n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!==e.length)throw Error("Connection lists did not match in length.");for(let r=0;r<e.length;r++)if(e[r]===t)return n[r];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return $n(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=cr(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if("string"!=typeof e)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(let t,n=0;t=this.inputList[n];n++)for(let r,i=0;r=t.fieldRow[i];i++)if(r.name===e)return r;return null}getVars(){const e=[];for(let t,n=0;t=this.inputList[n];n++)for(let r,i=0;r=t.fieldRow[i];i++)r.referencesVariables()&&e.push(r.getValue());return e}getVarModels(){const e=[];for(let t,n=0;t=this.inputList[n];n++)for(let r,i=0;r=t.fieldRow[i];i++)if(r.referencesVariables()){const t=this.workspace.getVariableById(r.getValue());t&&e.push(t)}return e}updateVarName(e){for(let t,n=0;t=this.inputList[n];n++)for(let r,i=0;r=t.fieldRow[i];i++)r.referencesVariables()&&e.getId()===r.getValue()&&r.refreshVariableName()}renameVarById(e,t){for(let n,r=0;n=this.inputList[r];r++)for(let i,o=0;i=n.fieldRow[o];o++)i.referencesVariables()&&e===i.getValue()&&i.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)}setPreviousStatement(e,t){if(e)void 0===t&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Rh.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Rh.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)void 0===t&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Rh.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Qe(new(ot(Xl))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(void 0!==this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===Bl.DUMMY&&this.inputList[e].type===Bl.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type===Bl.VALUE&&this.inputList[e].type===Bl.DUMMY)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(e){if(this.isEnabled()!==e){const t=this.disabled;this.disabled=!e,Qe(new(ot(Xl))(this,"disabled",null,t,!e))}}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Qe(new(ot(Xl))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){function n(e){let t=e.getCheck();return!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),!!t&&(-1!==t.indexOf("Boolean")||-1!==t.indexOf("Number"))}function r(){let e,t;s&&s.getType()===(null==(e=a)?void 0:e.getType())&&s.getLocation()===(null==(t=a)?void 0:t.getLocation())&&(s=null)}var i=[];t=t||"?";const o=Bh.NAVIGATE_ALL_FIELDS;Bh.NAVIGATE_ALL_FIELDS=!0;let s=Bh.createBlockNode(this);const a=s;for(;s;){switch(s.getType()){case Bh.types.INPUT:var l=s.getLocation();s.in()?n(l)&&i.push("("):i.push(t);break;case Bh.types.FIELD:(l=s.getLocation()).name!==Ph&&i.push(l.getText())}if(s=(l=s).in()||l.next(),!s){for(s=l.out(),r();s&&!s.next();)s=s.out(),r(),s&&s.getType()===Bh.types.INPUT&&n(s.getLocation())&&i.push(")");s&&(s=s.next())}}for(Bh.NAVIGATE_ALL_FIELDS=o,t=2;t<i.length;t++)"("===i[t-2]&&")"===i[t]&&(i[t-2]=i[t-1],i.splice(t-1,2));return i=(i=i.reduce((function(e,t){return e+("("===e.substr(-1)||")"===t?"":" ")+t}),"")).trim()||"???",e&&i.length>e&&(i=i.substring(0,e-3)+"..."),i}appendValueInput(e){return this.appendInput_(Bl.VALUE,e)}appendStatementInput(e){return this.appendInput_(Bl.STATEMENT,e)}appendDummyInput(e){return this.appendInput_(Bl.DUMMY,e||"")}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n],t),n++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=ar(e.tooltip),this.setTooltip(n)),void 0!==e.enableContextMenu&&(this.contextMenu=!!e.enableContextMenu),void 0!==e.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),void 0!==e.helpUrl&&(n=ar(e.helpUrl),this.setHelpUrl(n)),"string"==typeof e.extensions&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&Zr(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Zr(e[t],this,!1)}jsonInitColour_(e,t){if("colour"in e)if(void 0===e.colour)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch(n){console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle_(e,t){e=e.style;try{this.setStyle(e)}catch(n){console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(void 0!==t&&"boolean"!=typeof t)throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const n in e)void 0!==this[n]&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate_(e,t,n,r){e=sr(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,n),n=[];for(let i,o=0;i=t[o];o++)if(this.isInputKeyword_(i.type)){if(e=this.inputFromJson_(i,r)){for(let t,r=0;t=n[r];r++)e.appendField(t[0],t[1]);n.length=0}}else(e=this.fieldFromJson_(i))&&n.push([e,i.name])}validateTokens_(e,t){const n=[];let r=0;for(let i=0;i<e.length;i++){const o=e[i];if("number"==typeof o){if(1>o||o>t)throw Error('Block "'+this.type+'": Message index %'+o+" out of range.");if(n[o])throw Error('Block "'+this.type+'": Message index %'+o+" duplicated.");n[o]=!0,r++}}if(r!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments_(e,t,n){const r=[];for(let i=0;i<e.length;i++){let n=e[i];"number"==typeof n&&(n=t[n-1]),("string"!=typeof n||(n=this.stringToFieldJson_(n),n))&&r.push(n)}return(e=r.length)&&!this.isInputKeyword_(r[e-1].type)&&(e={type:"input_dummy"},n&&(e.align=n),r.push(e)),r}fieldFromJson_(e){const t=Tr(e);return!t&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t}inputFromJson_(t,n){var r={LEFT:e.Align$$module$build$src$core$input.LEFT,RIGHT:e.Align$$module$build$src$core$input.RIGHT,CENTRE:e.Align$$module$build$src$core$input.CENTRE,CENTER:e.Align$$module$build$src$core$input.CENTRE};let i=null;switch(t.type){case"input_value":i=this.appendValueInput(t.name);break;case"input_statement":i=this.appendStatementInput(t.name);break;case"input_dummy":i=this.appendDummyInput(t.name)}return i?(t.check&&i.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):i.setAlign(r)),i):null}isInputKeyword_(e){return"input_value"===e||"input_statement"===e||"input_dummy"===e}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}appendInput_(e,t){let n=null;return e!==Bl.VALUE&&e!==Bl.STATEMENT||(n=this.makeConnection_(e)),e===Bl.STATEMENT&&this.statementInputCount++,e=new Nh(e,t,this,n),this.inputList.push(e),e}moveInputBefore(e,t){if(e!==t){var n=-1,r=t?-1:this.inputList.length;for(let i,o=0;i=this.inputList[o];o++)if(i.name===e){if(n=o,-1!==r)break}else if(t&&i.name===t&&(r=o,-1!==n))break;if(-1===n)throw Error('Named input "'+e+'" not found.');if(-1===r)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(n,r)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)}removeInput(e,t){for(let n,r=0;n=this.inputList[r];r++)if(n.name===e)return n.type===Bl.STATEMENT&&this.statementInputCount--,n.dispose(),this.inputList.splice(r,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t,n=0;t=this.inputList[n];n++)if(t.name===e)return t;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(e){this.commentModel.text!==e&&(Qe(new(ot(Xl))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)}setWarningText(e,t){}setMutator(e){}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,t){if(this.parentBlock_)throw Error("Block has parent.");const n=new(ot(Yl))(this);this.xy_.translate(e,t),n.recordNew(),Qe(n)}makeConnection_(e){return new Mh(this,e)}allInputsFilled(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(let n,r=0;n=this.inputList[r];r++)if(n.connection){var t=n.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return!(t=this.getNextBlock())||t.allInputsFilled(e)}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Fh.COLLAPSED_INPUT_NAME=$h,Fh.COLLAPSED_FIELD_NAME=Ph;var Gh=null,Uh=null,Vh={};Vh.connectionUiEffect=lo,Vh.disconnectUiEffect=uo,Vh.disconnectUiStop=po,Vh.disposeUiEffect=so;var Wh=class extends Ku{constructor(e){let t;super(e),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=e.commentModel,this.model.text=null!=(t=this.model.text)?t:"",this.createIcon()}drawIcon_(e){D(zc.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),D(zc.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),D(zc.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)}createEditor(){this.foreignObject=D(zc.FOREIGNOBJECT,{x:qu.BORDER_WIDTH,y:qu.BORDER_WIDTH});const e=document.createElementNS(Ja,"body");e.setAttribute("xmlns",Ja),e.className="blocklyMinimalBody";const t=this.textarea_=document.createElementNS(Ja,"textarea");let n;return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR"),t.value=null!=(n=this.model.text)?n:"",this.resizeTextarea(),e.appendChild(t),this.foreignObject.appendChild(e),this.onMouseUpWrapper=d(t,"focus",this,this.startEdit,!0),this.onWheelWrapper=d(t,"wheel",this,(function(e){e.stopPropagation()})),this.onChangeWrapper=d(t,"change",this,(function(e){this.cachedText!==this.model.text&&Qe(new(ot(Xl))(this.getBlock(),"comment",null,this.cachedText,this.model.text))})),this.onInputWrapper=d(t,"input",this,(function(e){this.model.text=t.value})),setTimeout(t.focus.bind(t),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var e=this.model.size,t=2*qu.BORDER_WIDTH,n=e.width-t;e=e.height-t,this.foreignObject.setAttribute("width",`${n}`),this.foreignObject.setAttribute("height",`${e}`),this.textarea_.style.width=n-4+"px",this.textarea_.style.height=e-4+"px"}}setVisible(e){e!==this.isVisible()&&(Qe(new(ot(ic))(this.getBlock(),e,"comment")),(this.model.pinned=e)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const e=this.getBlock();this.bubble_=new qu(e.workspace,this.createEditor(),e.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(e.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let e;this.paragraphElement_=qu.textToDom(null!=(e=this.model.text)?e:""),this.bubble_=qu.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(f(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(f(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(f(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(f(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(e){let t;null!=(t=this.bubble_)&&t.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model.size.width=e,this.model.size.height=t)}updateText(){if(this.textarea_){let e;this.textarea_.value=null!=(e=this.model.text)?e:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};Bt("\n.blocklyCommentTextarea {\n  background-color: #fef49c;\n  border: 0;\n  display: block;\n  margin: 0;\n  outline: 0;\n  padding: 3px;\n  resize: none;\n  text-overflow: hidden;\n}\n");var Hh,Qh,zh,jh=null,Xh={duplicateInternal:bo,copyInternal:mo},Yh={};Yh.TEST_ONLY=Xh,Yh.copy=fo,Yh.duplicate=_o,Yh.paste=go,Hh=null,Qh={},zh=null,e.module$build$src$core$contextmenu={},e.module$build$src$core$contextmenu.callbackFactory=Ao,e.module$build$src$core$contextmenu.commentDeleteOption=ko,e.module$build$src$core$contextmenu.commentDuplicateOption=Ro,e.module$build$src$core$contextmenu.dispose=Co,e.module$build$src$core$contextmenu.getCurrentBlock=vo,e.module$build$src$core$contextmenu.hide=wo,e.module$build$src$core$contextmenu.setCurrentBlock=yo,e.module$build$src$core$contextmenu.show=Oo,e.module$build$src$core$contextmenu.workspaceCommentOption=Io;var Zh=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let t;return null!=(t=this.registry_.get(e))?t:null}getContextMenuOptions(e,t){const n=[];for(const i of this.registry_.values())if(e===i.scopeType){var r=i.preconditionFn(t);"hidden"!==r&&(r={text:"function"==typeof i.displayText?i.displayText(t):i.displayText,enabled:"enabled"===r,callback:i.callback,scope:t,weight:i.weight},n.push(r))}return n.sort((function(e,t){return e.weight-t.weight})),n}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",e.registry=new e})(Zh||(Zh={})),Zh.ScopeType;var qh=30,Kh=!0,Jh=[];Jh[Rh.INPUT_VALUE]=Rh.OUTPUT_VALUE,Jh[Rh.OUTPUT_VALUE]=Rh.INPUT_VALUE,Jh[Rh.NEXT_STATEMENT]=Rh.PREVIOUS_STATEMENT,Jh[Rh.PREVIOUS_STATEMENT]=Rh.NEXT_STATEMENT;var ed="RENAME_VARIABLE_ID",td="DELETE_VARIABLE_ID",nd=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(e){this.drawer_=e}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(e){const t=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(t,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},rd=class extends nd{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Bh.types.NEXT||e.getType()===Bh.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;let t,n;return e.getType()!==Bh.types.PREVIOUS&&e.getType()!==Bh.types.OUTPUT||(e=e.next()),(e=null!=(n=null==(t=e)?void 0:t.in())?n:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Bh.types.NEXT||e.getType()===Bh.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Bh.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};Me(Ml.CURSOR,Il,rd);var id=class extends rd{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const n=e.in()||e.next();return t(n)?n:n?this.getNextNode_(n,t):t(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,t):null}getPreviousNode_(e,t){if(!e)return null;let n=e.prev();return n=n?this.getRightMostChild_(n):e.out(),t(n)?n:n?this.getPreviousNode_(n,t):null}validNode_(e){let t=!1;return(e=e&&e.getType())!==Bh.types.OUTPUT&&e!==Bh.types.INPUT&&e!==Bh.types.FIELD&&e!==Bh.types.NEXT&&e!==Bh.types.PREVIOUS&&e!==Bh.types.WORKSPACE||(t=!0),t}findSiblingOrParent_(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent_(e.out())}getRightMostChild_(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild_(e)}};id.registrationName="basicCursor",Me(Ml.CURSOR,id.registrationName,id);var od=class extends id{validNode_(e){let t=!1;const n=e&&e.getType();return e&&(e=e.getLocation(),n===Bh.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},sd=10,ad=class extends Mh{constructor(e,t){super(e,t),this.targetConnection=this.highlightPath=null,this.db_=e.workspace.connectionDBList[t],this.dbOpposite_=e.workspace.connectionDBList[Jh[t]],this.offsetInBlock_=new al(0,0),this.trackedState_=ad.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===ad.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var i=E()==n;i||n.addSelect();var o=t.x+e.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*sd)-this.x,s=t.y+e.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*sd)-this.y;r&&(s=-s),n.RTL&&(o=t.x-e.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*sd)-this.x),n.moveBy(o,s),i||n.removeSelect()}}}moveTo(e,t){this.trackedState_===ad.TrackedState.WILL_TRACK?(this.db_.addConnection(this,t),this.trackedState_=ad.TrackedState.TRACKED):this.trackedState_===ad.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,t)),this.x=e,this.y=t}moveBy(e,t){this.moveTo(this.x+e,this.y+t)}moveToOffset(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)}setOffsetInBlock(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const e=this.targetConnection.x-this.x,t=this.targetConnection.y-this.y;if(0!==e||0!==t){const r=this.targetBlock();var n=r.getSvgRoot();if(!n)throw Error("block is not rendered.");n=Gt(n),r.getSvgRoot().setAttribute("transform","translate("+(n.x-e)+","+(n.y-t)+")"),r.moveConnections(-e,-t)}}closest(e,t){return this.dbOpposite_.searchForClosest(this,e,t)}highlight(){if(!this.highlightPath){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),t=e.shapeFor(this);this.type===Rh.INPUT_VALUE||this.type===Rh.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,t=fi(0,-e)+_i("v",e)+t.pathDown+_i("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,t=fi(-e,0)+_i("h",e)+t.pathLeft+_i("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=D(zc.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(U(this.highlightPath),this.highlightPath=null)}setTracking(e){e&&this.trackedState_===ad.TrackedState.TRACKED||!e&&this.trackedState_===ad.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=ad.TrackedState.TRACKED):(this.trackedState_===ad.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=ad.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const n=this.targetBlock().getDescendants(!1);for(let r=0;r<n.length;r++){var e=n[r],t=e.getConnections_(!0);for(let e=0;e<t.length;e++)t[e].setTracking(!1);for(e=e.getIcons(),t=0;t<e.length;t++)e[t].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Rh.INPUT_VALUE&&this.type!==Rh.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let n;t.isCollapsed()?(n=[],t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)):n=t.getConnections_(!0);for(let t=0;t<n.length;t++)e.push(...n[t].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(t){const n=this.getSourceBlock();if(He()){const r=Je();setTimeout(function(){n.isDisposed()||n.getParent()||(et(r),this.bumpAwayFrom(t),et(!1))}.bind(this),e.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(e,t){super.disconnectInternal_(e,t),e.rendered&&e.render(),t.rendered&&(t.updateDisabled(),t.render(),t.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())}neighbours(e){return this.dbOpposite_.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock();const n=t.rendered,r=e.rendered;n&&t.updateDisabled(),r&&e.updateDisabled(),n&&r&&(this.type===Rh.NEXT_STATEMENT||this.type===Rh.PREVIOUS_STATEMENT?e.render():t.render()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(e){(e=e.TrackedState||(e.TrackedState={}))[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(ad||(ad={})),ad.TrackedState;var ld=class extends Ku{constructor(e){super(e),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(e){D(zc.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),D(zc.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),D(zc.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)}setVisible(e){e!==this.isVisible()&&(Qe(new(ot(ic))(this.getBlock(),e,"warning")),e?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=qu.textToDom(this.getText()),this.bubble_=qu.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(e,t){this.text[t]!==e&&(e?this.text[t]=e:delete this.text[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const e=[];for(const t in this.text)e.push(this.text[t]);return e.join("\n")}dispose(){this.getBlock().warning=null,super.dispose()}},cd=class extends Fh{constructor(e,t,n){super(e,t,n),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=D(zc.G,{}),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!e.getBlockDragSurface(),(e=this.pathObject.svgPath).tooltip=this,Dn(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let t,n=0;t=this.inputList[n];n++)t.init();var e=this.getIcons();for(let t=0;t<e.length;t++)e[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||d(e,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(E()!==this){var e=null;if(E()){e=E().id,Ze();try{E().unselect()}finally{qe()}}e=new(ot(tc))(e,this.id,this.workspace.id),Qe(e),w(this),this.addSelect()}}unselect(){if(E()===this){var e=new(ot(tc))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,Qe(e),w(null),this.removeSelect()}}getIcons(){const e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e}setParent(e){const t=this.parentBlock_;if(e!==t){Q(),super.setParent(e),z();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var r=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(n),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-r.x,e.y-r.y)):t&&(this.workspace.getCanvas().appendChild(n),this.translate(r.x,r.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let e=0,t=0;const n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let r=this.getSvgRoot();if(r)do{var i=Gt(r);e+=i.x,t+=i.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===r&&(e+=(i=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,t+=i.y),r=r.parentNode}while(r&&r!==this.workspace.getCanvas()&&r!==n);return new al(e,t)}moveBy(e,t){if(this.parentBlock_)throw Error("Block has parent.");const n=Ke();let r=null;n&&(r=new(ot(Yl))(this));const i=this.getRelativeToSurfaceXY();this.translate(i.x+e,i.y+t),this.moveConnections(e,t),n&&r&&(r.recordNew(),Qe(r)),this.workspace.resizeContents()}translate(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveToDragSurface(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}}moveTo(e){const t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)}moveOffDragSurface(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),n=t/2,r=this.getRelativeToSurfaceXY();e=Math.round(Math.round((r.x-n)/t)*t+n-r.x),t=Math.round(Math.round((r.y-n)/t)*t+n-r.y),(e||t)&&this.moveBy(e,t)}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();let n,r;return this.RTL?(n=e.x-t.width,r=e.x):(n=e.x,r=e.x+t.width),new sl(e.y,e.y+t.height,n,r)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e,t=0;e=this.inputList[t];t++)e.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),e?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var t=this.isCollapsed();const n=$h,r=Ph;for(let e,o=0;e=this.inputList[o];o++)e.name!==n&&e.setVisible(!t);if(t){t=this.getIcons();for(let e,n=0;e=t[n];n++)e.setVisible(!1);t=this.toString(qh);var i=this.getField(r);i?i.setValue(t):(this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel$$module$build$src$core$field_label(t),r)}else this.updateDisabled(),this.removeInput(n)}tab(e,t){const n=new od;n.setCurNode(Bh.createFieldNode(e)),e=n.getCurNode(),t?n.next():n.prev(),(t=n.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=Zh.registry.getContextMenuOptions(Zh.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(Oo(e,t,this.RTL),yo(this))}moveConnections(e,t){if(this.rendered){for(var n=this.getConnections_(!1),r=0;r<n.length;r++)n[r].moveBy(e,t);for(n=this.getIcons(),r=0;r<n.length;r++)n[r].computeIconLocation();for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].moveConnections(e,t)}}setDragging(e){if(e){var t=this.getSvgRoot();t.translate_="",t.skew_="",Xa.push(...this.getConnections_(!0)),N(this.svgGroup_,"blocklyDragging")}else Xa.length=0,F(this.svgGroup_,"blocklyDragging");for(t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,t){if(!this.isDeadOrDying()){Un(),Nn(this.pathObject.svgPath),Q();var n=this.workspace;for(var r of(E()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),vo()===this&&wo(),t&&this.rendered&&(this.unplug(e),so(this)),this.rendered=!1,this.warningTextDb.values()))clearTimeout(r);for(this.warningTextDb.clear(),t=this.getIcons(),r=0;r<t.length;r++)t[r].dispose();E()===this&&w(null),super.dispose(!!e),U(this.svgGroup_),n.resizeContents(),this.svgGroup_=null,z()}}checkAndDelete(){this.workspace.isFlyout||(et(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),et(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:Pi(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:R(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t,n=0;t=this.inputList[n];n++)for(let e,r=0;e=t.fieldRow[r];r++)e.applyColour()}updateDisabled(){const e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let t,n=0;t=e[n];n++)t.rendered&&t.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(e){this.commentModel.text!==e&&(super.setCommentText(e),e=null!==e,!!this.commentIcon_===e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new Wh(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(e,t){const n=t||"";if(n)this.warningTextDb.has(n)&&(clearTimeout(this.warningTextDb.get(n)),this.warningTextDb.delete(n));else{for(var r of this.warningTextDb.values())clearTimeout(r);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(n,setTimeout((()=>{this.isDeadOrDying()||(this.warningTextDb.delete(n),this.setWarningText(e,n))}),100));else{if(this.isInFlyout&&(e=null),t=!1,"string"==typeof e){r=this.getSurroundParent();let i=null;for(;r;)r.isCollapsed()&&(i=r),r=r.getSurroundParent();i&&i.setWarningText(wc.COLLAPSED_WARNINGS_WARNING,cd.COLLAPSED_WARNING_ID),this.warning||(this.warning=new ld(this),t=!0),this.warning.setText(e,n)}else this.warning&&!n?(this.warning.dispose(),t=!0):this.warning&&(t=this.warning.getText(),this.warning.setText("",n),(r=this.warning.getText())||this.warning.dispose(),t=t!==r);t&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(e){this.isEnabled()!==e&&(super.setEnabled(e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(e){this.rendered&&this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!t)throw Error("Invalid style name: "+e);this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour()}bringToFront(){let e=this;do{const t=e.getSvgRoot(),n=t.parentNode,r=n.childNodes;r[r.length-1]!==t&&n.appendChild(t),e=e.getParent()}while(e)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(e,t){super.setNextStatement(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(e,t){super.setOutput(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(e){super.setInputsInline(e),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(e,t){return e=super.removeInput(e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(e,t){return e=super.appendInput_(e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),(n=n.targetBlock())&&n.setConnectionTracking(e))}}getConnections_(e){const t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_))for(let n,r=0;n=this.inputList[r];r++)n.connection&&t.push(n.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new ad(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const t=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||t.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let e;null==(e=n.targetBlock())||e.bumpNeighboursInternal()}for(const r of n.neighbours(e.config$$module$build$src$core$config.snapRadius))r.getSourceBlock().getRootBlock()!==t&&(n.isConnected()&&r.isConnected()||(n.isSuperior()?r.bumpAwayFrom(n):n.bumpAwayFrom(r)))}}scheduleSnapAndBump(){const t=Je();setTimeout((()=>{et(t),this.snapToGrid(),et(!1)}),e.config$$module$build$src$core$config.bumpDelay/2),setTimeout((()=>{et(t),this.bumpNeighbours(),et(!1)}),e.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(e,t){e.type!==Rh.NEXT_STATEMENT&&e.type!==Rh.INPUT_VALUE||this.moveBy(t.x-e.x,t.y-e.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(e){return super.getChildren(e)}render(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Q(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){const e=this.getParent();e?e.render(!0):this.workspace.resizeContents()}z(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(ru.LOCAL_MARKER).draw()}updateConnectionLocations_(){const e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(let t=0;t<this.inputList.length;t++){const n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected()&&n.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var n=this.getNextBlock();if(n){n=n.getHeightWidth();const r=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=n.height-r,t=Math.max(t,n.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}};cd.INLINE=-1,cd.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var ud,hd,dd,pd=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},fd=class extends pd{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e,t){return e instanceof cd?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!t)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}};(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(ud||(ud={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(hd||(hd={})),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(dd||(dd={}));var md={};md.bumpDirection=dd,md.bumpPositionRect=Po,md.getCornerOppositeToolbox=$o,md.getStartPositionRect=Mo,md.horizontalPosition=hd,md.verticalPosition=ud;var gd={width:96,height:124,url:"sprites.png"},_d=class extends fd{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(e=new ah({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===eh.TOP?eh.BOTTOM:eh.TOP,this.flyout=new(Ge(Ml.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===eh.RIGHT?eh.LEFT:eh.RIGHT,this.flyout=new(Ge(Ml.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){let e;this.svgGroup_=D(zc.G,{class:"blocklyTrash"});const t=String(Math.random()).substring(2);e=D(zc.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_),D(zc.RECT,{width:bd,height:vd,y:yd},e);const n=D(zc.IMAGE,{width:gd.width,x:-xd,height:gd.height,y:-Ed,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return n.setAttributeNS(el,"xlink:href",this.workspace.options.pathToMedia+gd.url),e=D(zc.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),D(zc.RECT,{width:bd,height:yd},e),this.svgLid_=D(zc.IMAGE,{width:gd.width,x:-xd,height:gd.height,y:-Ed,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(el,"xlink:href",this.workspace.options.pathToMedia+gd.url),p(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),p(this.svgGroup_,"pointerup",this,this.click),p(n,"pointerover",this,this.mouseOver_),p(n,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(V(this.flyout.createDom(zc.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[mh.Capability.AUTOHIDEABLE,mh.Capability.DELETE_AREA,mh.Capability.DRAG_TARGET,mh.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(U(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents_.map((function(e){return JSON.parse(e)})),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout((()=>{let n;null==(n=this.flyout)||n.show(e),t.cursor=""}),10),this.fireUiEvent_(!0)}}closeFlyout(){var e;this.contentsIsOpen()&&(null==(e=this.flyout)||e.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(e,t){if(this.initialized_){var n,r=$o(this.workspace,e);e=Mo(r,new ll(bd,vd+yd),Sd,Od,e,this.workspace),t=Po(e,Od,r.vertical===ud.TOP?dd.DOWN:dd.UP,t),this.top_=t.top,this.left_=t.left,null==(n=this.svgGroup_)||n.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new sl(this.top_,this.top_+vd+yd,this.left_,this.left_+bd)}getClientRect(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect();const t=e.top+Ed-Td;return e=e.left+xd-Td,new sl(t,t+yd+vd+2*Td,e,e+bd+2*Td)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())}animateLid_(){const e=Ad;var t=1/(e+1);this.lidOpen_+=this.isLidOpen?t:-t,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Id),t=kd+this.lidOpen_*(Rd-kd),this.svgGroup_&&(this.svgGroup_.style.opacity=t.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Cd/e))}setLidAngle_(e){const t=this.workspace.toolboxPosition===eh.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let n;null==(n=this.svgLid_)||n.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:bd-4)+","+(yd-2)+")")}setMinOpenness_(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*Id)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(e){e=new(ot(oc))(e,this.workspace.id),Qe(e)}blockMouseDownWhenOpenable_(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==jl||e.type!==jl||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson_(e.oldJson)),-1===this.contents_.indexOf(e)){for(this.contents_.unshift(e);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(wd)}}}cleanBlockJson_(e){function t(e){if(e){if(delete e.id,delete e.x,delete e.y,delete e.enabled,e.icons&&e.icons.comment){var n=e.icons.comment;delete n.height,delete n.width,delete n.pinned}for(var r in n=e.inputs){var i=n[r];const e=i.block;i=i.shadow,e&&t(e),i&&t(i)}e.next&&(e=(r=e.next).block,r=r.shadow,e&&t(e),r&&t(r))}}return t(e=JSON.parse(JSON.stringify(e))),Object.assign({},{kind:"BLOCK"},e)}},bd=47,vd=44,yd=16,Od=20,Sd=20,Td=10,xd=0,Ed=32,wd=.1,Cd=80,Ad=4,kd=.4,Rd=.8,Id=45,Md=class extends Uc{constructor(e,t,n){super(n),this.type=sc,this.oldItem=null!=e?e:void 0,this.newItem=null!=t?t:void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}fromJson(e){t("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldItem=e.oldItem,this.newItem=e.newItem}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Md)).oldItem=e.oldItem,t.newItem=e.newItem,t}};Me(Ml.EVENT,sc,Md);var $d=class{constructor(e,t,n){this.id_=e.toolboxitemid||Ue(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Pd=class extends $d{constructor(e,t,n){super(e,t,n),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),"true"===this.toolboxItemDef_.hidden&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(n)}}parseCategoryDef_(e){this.name_="name"in e?ar(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Er(this.htmlDiv_,Nu.TREEITEM),wr(this.htmlDiv_,Bu.SELECTED,!1),wr(this.htmlDiv_,Bu.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Er(this.iconDom_,Nu.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&wr(this.htmlDiv_,Bu.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&N(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&N(e,t),t=Pd.nestedPadding*this.getLevel()+"px",this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&N(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&N(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&N(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Pd.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle_(t);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(null==(e=ar(e))||""===e)return"";var t=Number(e);return isNaN(t)?(t=Jn(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):ir(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&B(e,t),(t=this.cssConfig_.openicon)&&N(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&B(e,t),(t=this.cssConfig_.closedicon)&&N(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const e=this.parseColour_(Pd.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||e,t&&N(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&F(this.rowDiv_,t);wr(this.htmlDiv_,Bu.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_="string"==typeof e?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Nr(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){U(this.htmlDiv_)}};Pd.registrationName="category",Pd.nestedPadding=19,Pd.borderWidth=8,Pd.defaultBackgroundColour="#57e",Bt('\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n'),Me(Ml.TOOLBOX_ITEM,Pd.registrationName,Pd);var Ld=class extends $d{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&N(e,t),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){U(this.htmlDiv_)}};Ld.registrationName="sep",Bt('\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n'),Me(Ml.TOOLBOX_ITEM,Ld.registrationName,Ld);var Dd=class extends Pd{constructor(e,t,n){super(e,t,n),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){const t=e.contents;let n=!0;if(e.custom)this.flyoutItems_=e.custom;else if(t)for(e=0;e<t.length;e++){const r=t[e];!De(Ml.TOOLBOX_ITEM,r.kind)||r.kind.toLowerCase()===Ld.registrationName&&n?(this.flyoutItems_.push(r),n=!0):(this.createToolboxItem_(r),n=!1)}}createToolboxItem_(e){let t=e.kind;"CATEGORY"===t.toUpperCase()&&Gr(e)&&(t=Dd.registrationName),e=new(Ne(Ml.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded("true"===this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Er(this.subcategoriesDiv_,Nu.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&N(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");var n=this.cssConfig_.contents;for(n&&N(t,n),n=0;n<e.length;n++){const r=e[n];r.init();const i=r.getDiv();if(t.appendChild(i),r.getClickTarget){let e;null==(e=r.getClickTarget())||e.setAttribute("id",r.getId())}}return t}setExpanded(e){this.expanded_!==e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),wr(this.htmlDiv_,Bu.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let n=0;n<t.length;n++)t[n].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Dd.registrationName="collapsibleCategory",Me(Ml.TOOLBOX_ITEM,Dd.registrationName,Dd);var Nd=class extends fd{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),V(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[mh.Capability.AUTOHIDEABLE,mh.Capability.DELETE_AREA,mh.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Er(this.contentsDiv_,Nu.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),N(e,"blocklyToolboxDiv"),N(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return N(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=d(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=d(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(g(e)||e.target===this.HtmlDiv)T().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t)).isSelectable()&&(this.setSelectedItem(t),t.onClick(e)),T().hideChaff(!0)}i()}onKeyDown_(e){let t=!1;switch(e.keyCode){case Uu.DOWN:t=this.selectNext_();break;case Uu.UP:t=this.selectPrevious_();break;case Uu.LEFT:t=this.selectParent_();break;case Uu.RIGHT:t=this.selectChild_();break;case Uu.ENTER:case Uu.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}if(!t&&this.selectedItem_){const n=this.selectedItem_;n.onKeyDown&&(t=n.onKeyDown(e))}t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new ah({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?Ge(Ml.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):Ge(Ml.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const e=this.contents_[t];e&&e.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let n=0;n<e.length;n++)this.createToolboxItem_(e[n],t);this.contentsDiv_.appendChild(t)}createToolboxItem_(e,t){var n=e.kind;"CATEGORY"===n.toUpperCase()&&Gr(e)&&(n=Dd.registrationName),(n=Ne(Ml.TOOLBOX_ITEM,n.toLowerCase()))&&((e=new n(e,this)).init(),this.addToolboxItem_(e),(n=e.getDiv())&&t.appendChild(n),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&N(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&F(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,n=t+e.height,r=e.left;return e=r+e.width,this.toolboxPosition===eh.TOP?new sl(-1e7,n,-1e7,1e7):this.toolboxPosition===eh.BOTTOM?new sl(t,1e7,-1e7,1e7):this.toolboxPosition===eh.LEFT?new sl(-1e7,1e7,-1e7,e):new sl(-1e7,1e7,r,1e7)}wouldDelete(e,t){return e instanceof cd?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===eh.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===eh.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===eh.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===eh.TOP?e.scrollY+t.height:e.scrollY),k(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!e.isSelectable()||(this.shouldDeselectItem_(t,e)&&null!==t&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&null!==e&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))}shouldDeselectItem_(e,t){return null!==e&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return null!==t&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),wr(this.contentsDiv_,Bu.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),wr(this.contentsDiv_,Bu.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,t){const n=e&&e.getName();let r=t&&t.getName();e===t&&(r=null),e=new(ot(sc))(n,r,this.workspace_.id),Qe(e)}selectParent_(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)f(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),U(this.HtmlDiv)}};Bt('\n.blocklyToolboxDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n'),Me(Ml.TOOLBOX,Il,Nd);var Bd=new th("zelos",{colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}}),Fd={};Fd.Classic=nh,Fd.Zelos=Bd;var Gd,Ud=class extends Uc{constructor(e,t,n){null===(t=e?e.workspace.id:t)&&(t=void 0),super(t),this.type=nc,this.blockId=e?e.id:void 0,this.targetType=n}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}fromJson(e){t("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.targetType=e.targetType,this.blockId=e.blockId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Ud)).targetType=e.targetType,t.blockId=e.blockId,t}};(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Gd||(Gd={})),Me(Ml.EVENT,nc,Ud);var Vd,Wd=class{constructor(e,t){this.bubble=e,this.workspace=t,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=t.getBlockDragSurface()}startBubbleDrag(){Je()||et(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(e,t){t=this.pixelsToWorkspaceUnits_(t),t=al.sum(this.startXY_,t),this.bubble.moveDuringDrag(this.dragSurface_,t),t=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==t&&(t&&t.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(e){return!(!e||!this.workspace.getComponentManager().hasCapability(e.id,mh.Capability.DELETE_AREA))&&e.wouldDelete(this.bubble,!1)}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(e,t){this.dragBubble(e,t),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(t),e=al.sum(this.startXY_,e)),this.bubble.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),et(!1)}fireMoveEvent_(){if(this.bubble instanceof eu){const e=new(ot(dc))(this.bubble);e.setOldCoordinate(this.startXY_),e.recordNew(),Qe(e)}}pixelsToWorkspaceUnits_(e){return e=new al(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}},Hd=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new al(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){E()&&E().unselect(),this.workspace.setupDragSurface()}endDrag(e){this.drag(e),this.workspace.resetDragSurface()}drag(e){if(e=al.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace.scroll(this.workspace.scrollX,e.y)}}},Qd=5,zd=6,jd=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY_=new al(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=e,this.currentDragDeltaXY_=new al(0,0),this.healStack_=!Kh}dispose(){i(),Hn(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&f(this.onMoveWrapper_),this.onUpWrapper_&&f(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&f(this.onStartWrapper_)}updateFromEvent_(e){const t=new al(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),r()),this.mostRecentEvent_=e}updateDragDelta_(t){return this.currentDragDeltaXY_=al.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=al.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.config$$module$build$src$core$config.flyoutDragRadius:e.config$$module$build$src$core$config.dragRadius))}updateIsDraggingFromFlyout_(){let e;if(!this.targetBlock_||null==(e=this.flyout_)||!e.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error("Cannot update dragging from the flyout because the ' +\n          'flyout's target workspace is undefined");return!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Je()||et(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))}updateIsDraggingBubble_(){return!!this.startBubble_&&(this.startDraggingBubble_(),!0)}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new Hd(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(Ge(Ml.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new Wd(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,m(e)?this.cancel():(this.hasStarted_=!0,po(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=de(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,Wn(),this.targetBlock_&&this.targetBlock_.select(),g(e)?this.handleRightClick(e):("pointerdown"===e.type.toLowerCase()&&"mouse"!==e.pointerType&&n(e,this),this.mouseDownXY_=new al(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.onStartWrapper_=d(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=d(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=d(document,"pointerup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&r())}handleMove(e){this.isDragging()&&o(e)||!this.isMultiTouch()?(this.updateFromEvent_(e),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),r())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!o(e))return;if(this.updateFromEvent_(e),r(),this.isEnding_)return void console.log("Trying to end a gesture recursively.");this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e)}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=s(e);this.cachedPoints.set(t,this.getTouchPoint(e));var n=Array.from(this.cachedPoints.keys());2===n.length&&(t=this.cachedPoints.get(n[0]),n=this.cachedPoints.get(n[1]),this.startDistance_=al.distance(t,n),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const t=s(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled_&&2===this.cachedPoints.size?this.handlePinch_(e):this.handleMove(e)}handlePinch_(e){var t=Array.from(this.cachedPoints.keys()),n=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),n=al.distance(n,t)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(t=0<(t=n-this.previousScale_)?t*Qd:t*zd,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const r=this.startWorkspace_,i=_(e,r.getParentSvg(),r.getInverseScreenCTM());r.zoom(i.x,i.y,t)}this.previousScale_=n,e.preventDefault()}handleTouchEnd(e){e=s(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(e){return this.startWorkspace_?new al(e.pageX,e.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(r(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(e){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(t),this.mostRecentEvent_=e,this.doStart(e)}fireWorkspaceClick_(e){Qe(new(ot(nc))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent_=e}handleBubbleStart(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent_=e}doBubbleClick_(){this.startBubble_ instanceof eu&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(Je()||et(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const e=new(ot(nc))(this.startBlock_,this.startWorkspace_.id,"block");Qe(e)}this.bringBlockToFront_(),et(!1)}doWorkspaceClick_(e){e=this.creatorWorkspace,E()&&E().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)}setStartBubble(e){this.startBubble_||(this.startBubble_=e)}setStartBlock(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))}setTargetBlock_(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e}setStartWorkspace_(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout_(e){this.flyout_||(this.flyout_=e)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let e,t;return null!=(t=null!=(e=this.blockDragger_)?e:this.workspaceDragger_)?t:this.bubbleDragger_}static inProgress(){const e=y();for(let t,n=0;t=e[n];n++)if(t.currentGesture_)return!0;return!1}},Xd=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(t=e.keyCodes)&&0<t.length)for(let n=0;n<t.length;n++)this.addKeyMapping(t[n],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,n){e=String(e);const r=this.keyMap.get(e);if(r&&!n)throw Error(`Shortcut named "${t}" collides with shortcuts "${r}"`);r&&n?r.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,n){const r=this.keyMap.get(e);if(!r)return n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const i=r.indexOf(t);return-1<i?(r.splice(i,1),0===r.length&&this.keyMap.delete(e),!0):(n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,n]of this.keyMap)e[t]=n;return e}getRegistry(){const e=Object.create(null);for(const[t,n]of this.shortcuts)e[t]=n;return $r(Object.create(null),e)}onKeyDown(e,t){var n=this.serializeKeyEvent_(t);if(!(n=this.getShortcutNamesByKeyCode(n)))return!1;for(let r,i=0;r=n[i];i++){const n=this.shortcuts.get(r);let i,o;if(null==(i=n)||!i.preconditionFn||null!=(o=n)&&o.preconditionFn(e)){let r,i;if(null!=(r=n)&&r.callback&&null!=(i=n)&&i.callback(e,t,n))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[n,r]of this.keyMap)-1<r.indexOf(e)&&t.push(n);return t}serializeKeyEvent_(e){let t="";for(const n in Xd.modifierKeys)e.getModifierState(n)&&(""!==t&&(t+="+"),t+=n);return""!==t&&e.keyCode?t=t+"+"+e.keyCode:e.keyCode&&(t=e.keyCode.toString()),t}checkModifiers_(e){for(let t,n=0;t=e[n];n++)if(!(t in Xd.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let n="";if(t){this.checkModifiers_(t);for(const e in Xd.modifierKeys)-1<t.indexOf(Xd.modifierKeys[e])&&(""!==n&&(n+="+"),n+=e)}return""!==n&&e?n=n+"+"+e:e&&(n=e.toString()),n}};Xd.registry=new Xd,function(e){(e=e.modifierKeys||(e.modifierKeys={}))[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Xd||(Xd={})),function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"}(Vd||(Vd={})),Vo();var Yd={};Yd.names=Vd,Yd.registerCopy=No,Yd.registerCut=Bo,Yd.registerDefaultShortcuts=Vo,Yd.registerDelete=Do,Yd.registerEscape=Lo,Yd.registerPaste=Fo,Yd.registerRedo=Uo,Yd.registerUndo=Go;var Zd=class extends Uc{constructor(e,t){super(t),this.type=ac,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}fromJson(e){t("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.themeName=e.themeName}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Zd)).themeName=e.themeName,t}};Me(Ml.EVENT,ac,Zd);var qd=class extends Uc{constructor(e,t,n,r,i){super(r),this.type=lc,this.viewTop=e,this.viewLeft=t,this.scale=n,this.oldScale=i}toJson(){const e=super.toJson();if(void 0===this.viewTop)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.viewLeft)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.scale)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.oldScale)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}fromJson(e){t("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new qd)).viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};Me(Ml.EVENT,lc,qd);var Kd=class{constructor(e){this.connectionChecker=e,this.connections_=[]}addConnection(e,t){t=this.calculateIndexForYPos_(t),this.connections_.splice(t,0,e)}findIndexOfConnection_(e,t){if(!this.connections_.length)return-1;const n=this.calculateIndexForYPos_(t);if(n>=this.connections_.length)return-1;t=e.y;let r=n;for(;0<=r&&this.connections_[r].y===t;){if(this.connections_[r]===e)return r;r--}for(r=n;r<this.connections_.length&&this.connections_[r].y===t;){if(this.connections_[r]===e)return r;r++}return-1}calculateIndexForYPos_(e){if(!this.connections_.length)return 0;let t=0,n=this.connections_.length;for(;t<n;){const r=Math.floor((t+n)/2);if(this.connections_[r].y<e)t=r+1;else{if(!(this.connections_[r].y>e)){t=r;break}n=r}}return t}removeConnection(e,t){if(-1===(e=this.findIndexOfConnection_(e,t)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)}getNeighbours(e,t){function n(e){const n=i-r[e].x,s=o-r[e].y;return Math.sqrt(n*n+s*s)<=t&&l.push(r[e]),s<t}const r=this.connections_,i=e.x,o=e.y;e=0;let s=r.length-2,a=s;for(;e<a;)r[a].y<o?e=a:s=a,a=Math.floor((e+s)/2);const l=[];if(s=e=a,r.length){for(;0<=e&&n(e);)e--;do{s++}while(s<r.length&&n(s))}return l}isInYRange_(e,t,n){return Math.abs(this.connections_[e].y-t)<=n}searchForClosest(e,t,n){if(!this.connections_.length)return{connection:null,radius:t};const r=e.y,i=e.x;e.x=i+n.x,e.y=r+n.y;var o=this.calculateIndexForYPos_(e.y);n=null;let s,a=t,l=o-1;for(;0<=l&&this.isInYRange_(l,e.y,t);)s=this.connections_[l],this.connectionChecker.canConnect(e,s,!0,a)&&(n=s,a=s.distanceFrom(e)),l--;for(;o<this.connections_.length&&this.isInYRange_(o,e.y,t);)s=this.connections_[o],this.connectionChecker.canConnect(e,s,!0,a)&&(n=s,a=s.distanceFrom(e)),o++;return e.x=i,e.y=r,{connection:n,radius:a}}static init(e){const t=[];return t[Rh.INPUT_VALUE]=new Kd(e),t[Rh.OUTPUT_VALUE]=new Kd(e),t[Rh.NEXT_STATEMENT]=new Kd(e),t[Rh.PREVIOUS_STATEMENT]=new Kd(e),t}},Jd=class{constructor(e,t){let n,r,i;this.pattern=e,this.spacing=null!=(n=t.spacing)?n:0,this.length=null!=(r=t.length)?r:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling,this.snapToGrid=null!=(i=t.snap)&&i}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(e){var t=this.spacing*e||100;this.pattern.setAttribute("width",t.toString()),this.pattern.setAttribute("height",t.toString());let n=(t=Math.floor(this.spacing/2)+.5)-this.length/2,r=t+this.length/2;t*=e,n*=e,r*=e,this.setLineAttributes(this.line1,e,n,r,t,t),this.setLineAttributes(this.line2,e,t,t,n,r)}setLineAttributes(e,t,n,r,i,o){e&&(e.setAttribute("stroke-width",t.toString()),e.setAttribute("x1",n.toString()),e.setAttribute("y1",i.toString()),e.setAttribute("x2",r.toString()),e.setAttribute("y2",o.toString()))}moveTo(e,t){this.pattern.setAttribute("x",e.toString()),this.pattern.setAttribute("y",t.toString())}static createDom(e,t,n){let r,i;if(e=D(zc.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<(null!=(r=t.length)?r:1)&&0<(null!=(i=t.spacing)?i:0)){let n;D(zc.LINE,{stroke:t.colour},e),null!=(n=t.length)&&n&&D(zc.LINE,{stroke:t.colour},e)}else D(zc.LINE,{},e);return e}},ep=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(e){this.variableMap_=e}getNameForUserVariable_(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)}populateVariables(t){t=Ot(t);for(let n=0;n<t.length;n++)this.getName(t[n].getId(),e.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(t,n){let r=t;n===e.NameType$$module$build$src$core$names.VARIABLE&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();const i=n===e.NameType$$module$build$src$core$names.VARIABLE||n===e.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(n)||this.db.set(n,new Map);const o=this.db.get(n);return o.has(t)?i+o.get(t):(n=this.getDistinctName(r,n),o.set(t,n.substr(i.length)),n)}getUserNames(e){let t;return(e=null==(t=this.db.get(e))?void 0:t.keys())?Array.from(e):[]}getDistinctName(t,n){t=this.safeName_(t);let r="";for(;this.dbReverse.has(t+r)||this.reservedWords.has(t+r);)r=r?r+1:2;return t+=r,this.dbReverse.add(t),(n===e.NameType$$module$build$src$core$names.VARIABLE||n===e.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+t}safeName_(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!=="0123456789".indexOf(e[0])&&(e="my_"+e)):e=wc.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}};(function(e){(e=e.NameType||(e.NameType={})).DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(ep||(ep={})),e.NameType$$module$build$src$core$names=ep.NameType,ep.DEVELOPER_VARIABLE_TYPE=e.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,e.module$build$src$core$names={},e.module$build$src$core$names.NameType=e.NameType$$module$build$src$core$names,e.module$build$src$core$names.Names=ep;var tp,np,rp=class extends Map{constructor(e){super(),this.workspace=e}set(e,t){return this.get(e)===t||(super.set(e,t),Qe(new(ot(fc))(this.workspace,t)),Wo(t)&&t.startPublishing()),this}delete(e){const t=this.get(e);return(e=super.delete(e))?(Qo(this.workspace),Qe(new(ot(mc))(this.workspace,t)),Wo(t)&&t.stopPublishing(),e):e}clear(){if(this.size){for(const e of this.keys()){const t=this.get(e);super.delete(e),Qe(new(ot(mc))(this.workspace,t))}Qo(this.workspace)}}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},ip=class{constructor(e,t,n){this.workspace=e,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=null!=n?n:Ve(),this.name=t}setName(e){if(e===this.name)return this;const t=this.name;return this.name=e,Qo(this.workspace),this.shouldFireEvents&&Qe(new(ot(gc))(this.workspace,this,t)),this}insertParameter(e,t){return this.parameters[t]&&this.parameters[t].getId()===e.getId()||(this.parameters.splice(t,0,e),e.setProcedureModel(this),Wo(e)&&(this.shouldFireEvents?e.startPublishing():e.stopPublishing()),Qo(this.workspace),this.shouldFireEvents&&Qe(new(ot(vc))(this.workspace,this,e,t))),this}deleteParameter(e){if(!this.parameters[e])return this;const t=this.parameters[e];return this.parameters.splice(e,1),Qo(this.workspace),Wo(t)&&t.stopPublishing(),this.shouldFireEvents&&Qe(new(ot(yc))(this.workspace,this,t,e)),this}setReturnTypes(e){if(e&&e.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!e==!!this.returnTypes)return this;const t=this.returnTypes;return this.returnTypes=e,Qo(this.workspace),this.shouldFireEvents&&Qe(new(ot(bc))(this.workspace,this,t)),this}setEnabled(e){return e===this.enabled||(this.enabled=e,Qo(this.workspace),this.shouldFireEvents&&Qe(new(ot(_c))(this.workspace,this))),this}getId(){return this.id}getName(){return this.name}getParameter(e){return this.parameters[e]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const e of this.parameters)Wo(e)&&e.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const e of this.parameters)Wo(e)&&e.stopPublishing()}},op=class{constructor(e,t,n){let r;this.workspace=e,this.shouldFireEvents=!1,this.procedureModel=null,this.id=null!=n?n:Ve(),this.variable=null!=(r=this.workspace.getVariable(t))?r:e.createVariable(t)}setName(e){if(e===this.variable.name)return this;const t=this.variable.name;let n;return this.variable=null!=(n=this.workspace.getVariable(e))?n:this.workspace.createVariable(e),Qo(this.workspace),this.shouldFireEvents&&Qe(new(ot(Oc))(this.workspace,this.procedureModel,this,t)),this}setTypes(e){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(e){return this.procedureModel=e,this}};tp="PROCEDURE",np="x",e.module$build$src$core$procedures={},e.module$build$src$core$procedures.CATEGORY_NAME=tp,e.module$build$src$core$procedures.DEFAULT_ARG=np,e.module$build$src$core$procedures.ObservableParameterModel=op,e.module$build$src$core$procedures.ObservableProcedureMap=rp,e.module$build$src$core$procedures.ObservableProcedureModel=ip,e.module$build$src$core$procedures.allProcedures=zo,e.module$build$src$core$procedures.findLegalName=Xo,e.module$build$src$core$procedures.flyoutCategory=Ko,e.module$build$src$core$procedures.getCallers=ns,e.module$build$src$core$procedures.getDefinition=is,e.module$build$src$core$procedures.isNameUsed=Zo,e.module$build$src$core$procedures.mutateCallers=rs,e.module$build$src$core$procedures.mutatorOpenListener=es,e.module$build$src$core$procedures.rename=qo;var sp=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},ap=new sp,lp=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=ap.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},cp=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=ap.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(ap.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(ap.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(ap.isSpacer(t))return t}return null}},up=class extends cp{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ap.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let r=0;r<this.elements.length;r++){const i=this.elements[r];t+=i.width,ap.isSpacer(i)||(ap.isNextConnection(i)?n=Math.max(n,i.height):e=Math.max(e,i.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.descenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},hp=class extends lp{constructor(e,t){super(e),this.connectionModel=t,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=ap.CONNECTION}},dp=class extends hp{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ap.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},pp=class extends dp{constructor(e,t){super(e,t),this.height=0,this.type|=ap.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},fp=class extends lp{constructor(e,t,n){super(e),this.field=t,this.parentInput=n,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=ap.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},mp=class extends lp{constructor(e){super(e),this.type|=ap.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},gp=class extends lp{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.isVisible=t.isVisible(),this.type|=ap.ICON,e=t.getCorrectedSize(),this.height=e.height,this.width=e.width}},_p=class extends lp{constructor(e,t){super(e),this.type=this.type|ap.SPACER|ap.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},bp=class extends dp{constructor(e,t){super(e,t),this.type|=ap.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},vp=class extends dp{constructor(e,t){super(e,t),this.type|=ap.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},yp=class extends cp{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=ap.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const n=this.elements[t];this.width+=n.width,ap.isInput(n)&&n instanceof dp&&(ap.isStatementInput(n)&&n instanceof vp?e+=n.connectedBlockWidth:ap.isExternalInput(n)&&n instanceof pp&&0!==n.connectedBlockWidth&&(e+=n.connectedBlockWidth-n.connectionWidth)),ap.isSpacer(n)||(this.height=Math.max(this.height,n.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Op=class extends lp{constructor(e){super(e),this.type|=ap.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Sp=class extends hp{constructor(e,t){super(e,t),this.type|=ap.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Tp=class extends hp{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=ap.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},xp=class extends hp{constructor(e,t){super(e,t),this.type|=ap.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Ep=class extends lp{constructor(e,t){super(e),this.type=(t&&"left"!==t?ap.RIGHT_ROUND_CORNER:ap.LEFT_ROUND_CORNER)|ap.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},wp=class extends cp{constructor(e,t,n){super(e),this.height=t,this.width=n,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ap.SPACER|ap.BETWEEN_ROW_SPACER,this.elements=[new _p(this.constants_,n)]}measure(){}},Cp=class extends lp{constructor(e,t){super(e),this.type=(t&&"left"!==t?ap.RIGHT_SQUARE_CORNER:ap.LEFT_SQUARE_CORNER)|ap.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Ap=class extends cp{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ap.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||!!n&&n.getNextBlock()===e}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let r=0;r<this.elements.length;r++){const i=this.elements[r];t+=i.width,ap.isSpacer(i)||(ap.isHat(i)&&i instanceof mp?n=Math.max(n,i.ascenderHeight):e=Math.max(e,i.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.capline=this.ascenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},kp=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=fi(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const n in t)this.blockStyles[n]=this.validatedBlockStyle_(t[n]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=void 0!==e.startHats?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=Z("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&0===e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=cr(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?cr(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?cr(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return rr("#fff",e,.6)||e}generateTertiaryColour_(e){return rr("#fff",e,.3)||e}dispose(){this.embossFilter_&&U(this.embossFilter_),this.disabledPattern_&&U(this.disabledPattern_),this.debugFilter_&&U(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH;return{height:e,width:t,path:gi([hi(t,e/4),hi(2*-t,e/2),hi(t,e/4)])}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:di("c",[hi(30,-e),hi(70,-e),hi(t,0)])}}makePuzzleTab(){function e(e){const r=-(e=e?-1:1);var i=n/2;const o=i+2.5,s=i+.5,a=hi(-t,e*i);return i=hi(t,e*i),di("c",[hi(0,e*o),hi(-t,r*s),a])+di("s",[hi(t,2.5*r),i])}const t=this.TAB_WIDTH,n=this.TAB_HEIGHT,r=e(!0),i=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:n,pathDown:i,pathUp:r}}makeNotch(){function e(e){return gi([hi(e*r,n),hi(3*e,0),hi(e*r,-n)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,r=(t-3)/2,i=e(1),o=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:i,pathRight:o}}makeInsideCorners(){const e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:bi("a","0 0,0",e,hi(-e,e)),pathBottom:bi("a","0 0,0",e,hi(e,e))}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=fi(0,e)+bi("a","0 0,1",e,hi(e,-e)),n=bi("a","0 0,1",e,hi(e,e)),r=bi("a","0 0,1",e,hi(-e,-e));return{topLeft:t,topRight:n,bottomRight:bi("a","0 0,1",e,hi(-e,e)),bottomLeft:r,rightHeight:e}}shapeFor(e){switch(e.type){case Rh.INPUT_VALUE:case Rh.OUTPUT_VALUE:return this.PUZZLE_TAB;case Rh.PREVIOUS_STATEMENT:case Rh.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,n){this.injectCSS_(t,n),this.defs_=D(zc.DEFS,{},e),e=D(zc.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),D(zc.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=D(zc.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),D(zc.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),D(zc.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),D(zc.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter_=e,e=D(zc.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),D(zc.RECT,{width:10,height:10,fill:"#aaa"},e),D(zc.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern_=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const e=D(zc.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),t=D(zc.FECOMPONENTTRANSFER,{result:"outBlur"},e);D(zc.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),D(zc.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),D(zc.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);const n=t.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=n:((t=document.createElement("style")).id=e,e=document.createTextNode(n),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode_=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Rp=!1,Ip=class{constructor(e){this.constants=e,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let e=0;e<this.debugElements_.length;e++)U(this.debugElements_[e]);this.debugElements_=[]}drawSpacerRow(e,t,n){if(Ip.config.rowSpacers){var r=Math.abs(e.height),i=0>e.height;i&&(t-=r),this.debugElements_.push(D(zc.RECT,{class:"rowSpacerRect blockRenderDebug",x:n?-(e.xPos+e.width):e.xPos,y:t,width:e.width,height:r,stroke:i?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(e,t,n){if(Ip.config.elemSpacers){t=Math.abs(e.width);var r=0>e.width,i=r?e.xPos-t:e.xPos;n&&(i=-(i+t)),this.debugElements_.push(D(zc.RECT,{class:"elemSpacerRect blockRenderDebug",x:i,y:e.centerline-e.height/2,width:t,height:e.height,stroke:"pink",fill:r?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(t,n){if(Ip.config.elems){let r=t.xPos;n&&(r=-(r+t.width)),n=t.centerline-t.height/2,this.debugElements_.push(D(zc.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),ap.isField(t)&&t instanceof fp&&t.field instanceof e.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(D(zc.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}ap.isInput(t)&&t instanceof dp&&Ip.config.connections&&this.drawConnection(t.connectionModel)}drawConnection(e){if(Ip.config.connections){var t="",n=0,r="";e.type===Rh.INPUT_VALUE?(n=4,t="magenta",r="none"):e.type===Rh.OUTPUT_VALUE?(n=2,r=t="magenta"):e.type===Rh.NEXT_STATEMENT?(n=4,t="goldenrod",r="none"):e.type===Rh.PREVIOUS_STATEMENT&&(n=2,r=t="goldenrod"),this.debugElements_.push(D(zc.CIRCLE,{class:"blockRenderDebug",cx:e.getOffsetInBlock().x,cy:e.getOffsetInBlock().y,r:n,fill:r,stroke:t},this.svgRoot_))}}drawRenderedRow(e,t,n){Ip.config.rows&&(this.debugElements_.push(D(zc.RECT,{class:"elemRenderingRect blockRenderDebug",x:n?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),ap.isTopOrBottomRow(e)||Ip.config.connectedBlockBounds&&this.debugElements_.push(D(zc.RECT,{class:"connectedBlockWidth blockRenderDebug",x:n?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(e,t,n){for(let r=0;r<e.elements.length;r++){const t=e.elements[r];t?ap.isSpacer(t)?this.drawSpacerElem(t,e.height,n):this.drawRenderedElem(t,n):console.warn("A row has an undefined or null element.",e,t)}this.drawRenderedRow(e,t,n)}drawBoundingBox(e){if(Ip.config.blockBounds){var t=e.RTL?-e.width:0;this.debugElements_.push(D(zc.RECT,{class:"blockBoundingBox blockRenderDebug",x:t,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Ip.config.connectedBlockBounds&&(t=e.RTL?-e.widthWithChildren:0,this.debugElements_.push(D(zc.RECT,{class:"blockRenderDebug",x:t,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(e,t){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let n=0;for(let r=0;r<t.rows.length;r++){const e=t.rows[r];ap.isBetweenRowSpacer(e)?this.drawSpacerRow(e,n,t.RTL):this.drawRowWithElements(e,n,t.RTL),n+=e.height}e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),t.rightSide&&this.drawRenderedElem(t.rightSide,t.RTL),this.drawBoundingBox(t),this.drawRender(e.pathObject.svgPath)}drawRender(e){Ip.config.render&&(e.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout((function(){e.setAttribute("filter","")}),100))}};Ip.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var Mp=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),ss()){let e;null==(e=this.block_.renderingDebugger)||e.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let e,t=0;e=this.info_.hiddenIcons[t];t++){let t;null==(t=e.icon.iconGroup_)||t.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=fi(e.xPos,this.info_.startY);for(let n,r=0;n=t[r];r++)ap.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ap.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ap.isPreviousConnection(n)&&n instanceof hp?this.outlinePath_+=n.shape.pathLeft:ap.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:ap.isSpacer(n)&&(this.outlinePath_+=_i("h",n.width));this.outlinePath_+=_i("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+_i("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const n=os(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=_i("H",t.xPos+t.width)+n+_i("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var n=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+_i("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var r=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=_i("H",n)+t+_i("v",r)+this.constants_.INSIDE_CORNERS.pathBottom+_i("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=_i("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let n=0,r="";for(let i,o=t.length-1;i=t[o];o--)ap.isNextConnection(i)&&i instanceof hp?r+=i.shape.pathRight:ap.isLeftSquareCorner(i)?r+=_i("H",e.xPos):ap.isLeftRoundedCorner(i)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ap.isRightRoundedCorner(i)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,n=this.constants_.OUTSIDE_CORNERS.rightHeight):ap.isSpacer(i)&&(r+=_i("h",-1*i.width));this.outlinePath_+=_i("V",e.baseline-n),this.outlinePath_+=r}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=os(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=_i("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e,t=0;e=this.info_.rows[t];t++)for(let n,r=0;n=e.elements[r];r++)ap.isInlineInput(n)?this.drawInlineInput_(n):(ap.isIcon(n)||ap.isField(n))&&this.layoutField_(n)}layoutField_(e){const t=ap.isField(e)?e.field.getSvgRoot():e.icon.iconGroup_,n=e.centerline-e.height/2;let r=e.xPos,i="";this.info_.RTL&&(r=-(r+e.width),e.flipRtl&&(r+=e.width,i="scale(-1 1)")),ap.isIcon(e)?(t.setAttribute("display","block"),t.setAttribute("transform","translate("+r+","+n+")"),e.icon.computeIconLocation()):t.setAttribute("transform","translate("+r+","+n+")"+i),this.info_.isInsertionMarker&&t.setAttribute("display","none")}drawInlineInput_(e){const t=e.width,n=e.height,r=e.connectionOffsetY,i=e.connectionHeight+r;this.inlinePath_+=pi(e.xPos+e.connectionWidth,e.centerline-n/2)+_i("v",r)+e.shape.pathDown+_i("v",n-i)+_i("h",t-e.connectionWidth)+_i("v",-n)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(null!=t&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}},$p=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Tp(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Ap(this.constants_),this.bottomRow=new up(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new yp(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let n,r=0;n=t[r];r++){const t=new gp(this.constants_,n);this.isCollapsed&&n.collapseHidden?this.hiddenIcons.push(t):e.elements.push(t)}t=void 0;for(let n,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){this.shouldStartNewRow_(n,t)&&(this.rows.push(e),e=new yp(this.constants_),this.inputRows.push(e));for(let t,r=0;t=n.fieldRow[r];r++)e.elements.push(new fp(this.constants_,t,n));this.addInput_(n,e),t=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Op(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let n=this.topRow.hasLeftSquareCorner(this.block_)?Cp:Ep;this.topRow.elements.push(new n(this.constants_)),t?(e=new mp(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new xp(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===Bl.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,n=this.topRow.hasRightSquareCorner(this.block_)?Cp:Ep,this.topRow.elements.push(new n(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Bl.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Cp(this.constants_)):this.bottomRow.elements.push(new Ep(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Sp(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Cp(this.constants_,"right")):this.bottomRow.elements.push(new Ep(this.constants_,"right"))}addInput_(e,t){this.isInline&&e.type===Bl.VALUE?(t.elements.push(new bp(this.constants_,e)),t.hasInlineInput=!0):e.type===Bl.STATEMENT?(t.elements.push(new vp(this.constants_,e)),t.hasStatement=!0):e.type===Bl.VALUE?(t.elements.push(new pp(this.constants_,e)),t.hasExternalInput=!0):e.type===Bl.DUMMY&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),null===t.align&&(t.align=e.align)}shouldStartNewRow_(e,t){return!(!t||e.type!==Bl.STATEMENT&&t.type!==Bl.STATEMENT&&(e.type!==Bl.VALUE&&e.type!==Bl.DUMMY||this.isInline))}addElemSpacing_(){for(let e,t=0;e=this.rows[t];t++){const t=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new _p(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let n=0;n<t.length-1;n++){e.elements.push(t[n]);const r=this.getInRowSpacing_(t[n],t[n+1]);e.elements.push(new _p(this.constants_,r))}e.elements.push(t[t.length-1]),e.endsWithElemSpacer()&&e.elements.push(new _p(this.constants_,this.getInRowSpacing_(t[t.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&ap.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&ap.isInput(e)&&!t){if(ap.isExternalInput(e))return this.constants_.NO_PADDING;if(ap.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ap.isStatementInput(e))return this.constants_.NO_PADDING}return e&&ap.isLeftSquareCorner(e)&&t&&(ap.isPreviousConnection(t)||ap.isNextConnection(t))?t.notchOffset:e&&ap.isLeftRoundedCorner(e)&&t&&(ap.isPreviousConnection(t)||ap.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,n=0;for(let i,o=0;i=this.rows[o];o++){if(i.measure(),t=Math.max(t,i.width),i.hasStatement){var r=i.getLastInput();let t,n;r=i.width-(null!=(n=null==(t=r)?void 0:t.width)?n:0),e=Math.max(e,r)}n=Math.max(n,i.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let i,o=0;i=this.rows[o];o++)i.hasStatement&&(i.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t,n=0;t=this.rows[n];n++)if(t.hasStatement)this.alignStatementRow_(t);else{var e=t.width;0<(e=this.getDesiredRowWidth_(t)-e)&&this.addAlignmentPadding_(t,e),ap.isTopOrBottomRow(t)&&(t.widthWithConnectedBlocks=t.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(t,n){const r=t.getFirstSpacer(),i=t.getLastSpacer();if((t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align===e.Align$$module$build$src$core$input.LEFT&&i)i.width+=n;else if(t.align===e.Align$$module$build$src$core$input.CENTRE&&r&&i)r.width+=n/2,i.width+=n/2;else if(t.align===e.Align$$module$build$src$core$input.RIGHT&&r)r.width+=n;else{if(!i)return;i.width+=n}t.width+=n}alignStatementRow_(e){const t=e.getLastInput();if(t){var n=e.width-t.width,r=this.statementEdge;0<(n=r-n)&&this.addAlignmentPadding_(e,n),n=e.width,r=this.getDesiredRowWidth_(e),t.width+=r-n,t.height=Math.max(t.height,e.height),e.width+=r-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var n=this.getSpacerRowHeight_(e,t);const r=this.getSpacerRowWidth_(e,t);return n=new wp(this.constants_,n,r),e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return ap.isSpacer(t)?e.yPos+t.height/2:ap.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,ap.isNextConnection(t)?e+t.height/2:e-t.height/2):ap.isTopRow(e)?ap.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let n,r=0;n=e.elements[r];r++)ap.isSpacer(n)&&(n.height=e.height),n.xPos=t,n.centerline=this.getElemCenterline_(e,n),t+=n.width}finalize_(){let e=0,t=0;for(let n,r=0;n=this.rows[r];r++)n.yPos=t,n.xPos=this.startX,t+=n.height,e=Math.max(e,n.widthWithConnectedBlocks),this.recordElemPositions_(n);if(this.outputConnection&&this.block_.nextConnection){const t=this.block_.nextConnection.targetBlock();t&&(e=Math.max(e,t.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}},Pp=class extends Uc{constructor(e,t,n,r){let i=e?e.workspace.id:void 0;r&&r.getType()===Bh.types.WORKSPACE&&(i=r.getLocation().id),super(i),this.type=rc,this.blockId=null==e?void 0:e.id,this.oldNode=n||void 0,this.newNode=r,this.isCursor=t}toJson(){const e=super.toJson();if(void 0===this.isCursor)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}fromJson(e){t("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Pp)).isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};Me(Ml.EVENT,rc,Pp);var Lp="blocklyCursor",Dp="blocklyMarker",Np=.75,Bp=class{constructor(e,t,n){this.workspace=e,this.marker=n,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return"cursor"===this.marker.type}createDom(){const e=this.isCursor()?Lp:Dp;return this.svgGroup_=D(zc.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||n,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent_(e,t),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===Bh.types.BLOCK?this.showWithBlock_(e):e.getType()===Bh.types.OUTPUT?this.showWithOutput_(e):t===Rh.INPUT_VALUE?this.showWithInput_(e):t===Rh.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Bh.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Bh.types.FIELD?this.showWithField_(e):e.getType()===Bh.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Bh.types.STACK&&this.showWithStack_(e)}showWithBlockPrevOutput_(e){const t=(e=e.getSourceBlock()).width;var n=e.height,r=n*Np;const i=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(n=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,i,r,n)):e.outputConnection?(r=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,r)):this.positionBlock_(t,i,r),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput_(e)}showWithPrevious_(e){this.showWithBlockPrevOutput_(e)}showWithOutput_(e){this.showWithBlockPrevOutput_(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){const t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()}showWithInput_(e){const t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let n=0;t=t.getOffsetInBlock().y;const r=e.getHeightWidth().width;this.workspace.RTL&&(n=-r),this.positionLine_(n,t,r),this.setParent_(e),this.showCurrent_()}showWithStack_(e){var t=(e=e.getLocation()).getHeightWidth();const n=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const r=-this.constants_.CURSOR_STACK_PADDING/2,i=-this.constants_.CURSOR_STACK_PADDING/2;let o=r;this.workspace.RTL&&(o=-(n+r)),this.positionRect_(o,i,n,t),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,n){if(e=fi(-t,n)+_i("V",-t)+_i("H",e+2*t)+_i("V",n),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=pi(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,n){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${n}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,n){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=fi(e,0)+_i("h",-(e-n.width))+_i("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+_i("V",t)+_i("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,n,r){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=fi(-t,n)+_i("V",-t)+_i("H",this.constants_.NOTCH_OFFSET_LEFT)+r.pathLeft+_i("H",e+2*t)+_i("V",n),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,n,r){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${n}`),this.markerSvgRect_.setAttribute("height",`${r}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(e,t){const n=t.getSourceBlock();e=new(ot(rc))(n,this.isCursor(),e,t),Qe(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=D(zc.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=D(zc.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=D(zc.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=D(zc.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=D(zc.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();D(zc.ANIMATE,e,this.markerSvgLine_),D(zc.ANIMATE,e,this.markerInput_),D(zc.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&U(this.svgGroup_)}},Fp=class{constructor(e,t,n){this.markerSvg=this.cursorSvg=null,this.constants=n,this.style=t,this.svgRoot=e,this.svgPath=D(zc.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?N(this.svgRoot,e):F(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}},Gp="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Up=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,w(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Ze();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{qe()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Ze(),this.hidePreview(),qe();var{local:e,closest:t}=this.activeCandidate;if(e.connect(t),this.topBlock.rendered){const n=e.isSuperior()?t:e;lo(n.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(e,t){const n=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!n,t))||this.shouldUpdatePreviews(n,e))&&(Ze(),this.maybeHidePreview(n),this.maybeShowPreview(n),qe())}createMarkerBlock(e){var t=e.type;let n;Ze();try{if(n=this.workspace.newBlock(t),n.setInsertionMarker(!0),e.saveExtraState){var r=e.saveExtraState();r&&n.loadExtraState&&n.loadExtraState(r)}else if(e.mutationToDom){const t=e.mutationToDom();t&&n.domToMutation&&n.domToMutation(t)}for(t=0;t<e.inputList.length;t++){const i=e.inputList[t];if(i.name===$h)continue;const o=n.inputList[t];if(!o)throw Error(Gp.replace("%1","an input"));for(r=0;r<i.fieldRow.length;r++){const e=i.fieldRow[r],t=o.fieldRow[r];if(!t)throw Error(Gp.replace("%1","a field"));t.setValue(e.getValue())}}n.setCollapsed(e.isCollapsed()),n.setInputsInline(e.getInputsInline()),n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{qe()}return n}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);if(t&&t!==this.topBlock.nextConnection){if(e.push(t),this.lastOnStack=t,this.lastMarker){Ze();try{this.lastMarker.dispose()}finally{qe()}}this.lastMarker=this.createMarkerBlock(t.getSourceBlock())}return e}shouldUpdatePreviews(t,n){if(!t)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:r,closest:i}=this.activeCandidate;if(i===t.closest&&r===t.local)return!1;const o=r.x+n.x-i.x;return n=r.y+n.y-i.y,t.radius<Math.sqrt(o*o+n*n)-e.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),n=null;for(let r=0;r<this.availableConnections.length;r++){const i=this.availableConnections[r],o=i.closest(t,e);o.connection&&(n={closest:o.connection,local:i,radius:o.radius},t=o.radius)}return n}getStartRadius(){return this.activeCandidate?e.config$$module$build$src$core$config.connectingSnapRadius:e.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return!(!t||!this.workspace.getComponentManager().hasCapability(t.id,mh.Capability.DELETE_AREA))&&t.wouldDelete(this.topBlock,e)}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t,n=e.closest;n===(null==(t=this.activeCandidate)?void 0:t.closest)||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case Up.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case Up.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case Up.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(e){if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}}else this.hidePreview();this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=null==(e=this.activeCandidate)?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:n}=e;let r,i=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!i)throw Error("Cannot show the insertion marker because there is no insertion marker block");try{r=i.getMatchingConnection(t.getSourceBlock(),t)}catch(o){if(this.firstMarker=this.createMarkerBlock(this.topBlock),i=e?this.lastMarker:this.firstMarker,!i)throw Error("Cannot show the insertion marker because there is no insertion marker block");r=i.getMatchingConnection(t.getSourceBlock(),t)}if(!r)throw Error("Cannot show the insertion marker because there is no associated connection");if(r===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");i.render(),i.rendered=!0,i.getSvgRoot().setAttribute("visibility","visible"),r&&n&&i.positionNearConnection(r,n),n&&r.connect(n),this.markerConnection=r}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),n=t.previousConnection,r=t.outputConnection,i=e===t.nextConnection;if(r=e.type===Rh.INPUT_VALUE&&!(r&&r.targetConnection),i&&(!n||!n.targetConnection)||r?e.targetBlock().unplug(!1):e.type!==Rh.NEXT_STATEMENT||i?t.unplug(!0):((i=e.targetConnection)&&i.getSourceBlock().unplug(!1),n=n?n.targetConnection:null,t.unplug(!0),n&&i&&n.connect(i)),e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}};(function(e){(e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}))[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Up||(Up={})),Up.PREVIEW_TYPE;var Vp=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new kp}makeRenderInfo_(e){return new $p(this,e)}makeDrawer_(e,t){return new Mp(e,t)}makeDebugger_(){return new Ip(this.getConstants())}makeMarkerDrawer(e,t){return new Bp(e,this.getConstants(),t)}makePathObject(e,t){return new Fp(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,n){return!!Mh.getConnectionForOrphanedConnection(e,n===Rh.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,n){return t.type===Rh.OUTPUT_VALUE||t.type===Rh.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),t.type)?Up.PREVIEW_TYPE.INSERTION_MARKER:Up.PREVIEW_TYPE.REPLACEMENT_FADE:Up.PREVIEW_TYPE.INSERTION_MARKER}render(e){ss()&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Wp={};Wp.BottomRow=up,Wp.Connection=hp,Wp.ConstantProvider=kp,Wp.Debug=Ip,Wp.Drawer=Mp,Wp.ExternalValueInput=pp,Wp.Field=fp,Wp.Hat=mp,Wp.Icon=gp,Wp.InRowSpacer=_p,Wp.InlineInput=bp,Wp.InputConnection=dp,Wp.InputRow=yp,Wp.JaggedEdge=Op,Wp.MarkerSvg=Bp,Wp.Measurable=lp,Wp.NextConnection=Sp,Wp.OutputConnection=Tp,Wp.PathObject=Fp,Wp.PreviousConnection=xp,Wp.RenderInfo=$p,Wp.Renderer=Vp,Wp.RoundCorner=Ep,Wp.Row=cp,Wp.SpacerRow=wp,Wp.SquareCorner=Cp,Wp.StatementInput=vp,Wp.TopRow=Ap,Wp.Types=ap,Wp.init=hs,Wp.register=ls,Wp.stopDebugger=us,Wp.unregister=cs;var Hp=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&F(e,t),(t=this.theme.getClassName())&&N(e,t));for(let n,r=0;n=this.subscribedWorkspaces_[r];r++)n.refreshTheme();for(const[n,r]of this.componentDB)for(const i of r){e=i.element,t=i.propertyName;const r=this.theme&&this.theme.getComponentStyle(n);e.style[t]=r||""}for(const n of this.subscribedWorkspaces_)n.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!ui(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,n){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:n}),t=this.theme&&this.theme.getComponentStyle(t),e.style[n]=t||""}unsubscribe(e){if(e)for(const[t,n]of this.componentDB){for(let t=n.length-1;0<=t;t--)n[t].element===e&&n.splice(t,1);n.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},Qp="VARIABLE_DYNAMIC",zp={};zp.CATEGORY_NAME=Qp,zp.flyoutCategory=ms,zp.flyoutCategoryBlocks=gs,zp.onCreateVariableButtonClick_Colour=fs,zp.onCreateVariableButtonClick_Number=ps,zp.onCreateVariableButtonClick_String=ds;var jp=class{canConnect(e,t,n,r){return this.canConnectWithReason(e,t,n,r)===Mh.CAN_CONNECT}canConnectWithReason(e,t,n,r){const i=this.doSafetyChecks(e,t);return i!==Mh.CAN_CONNECT?i:this.doTypeChecks(e,t)?n&&!this.doDragChecks(e,t,r||0)?Mh.REASON_DRAG_CHECKS_FAILED:Mh.CAN_CONNECT:Mh.REASON_CHECKS_FAILED}getErrorMessage(e,t,n){switch(e){case Mh.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Mh.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Mh.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Mh.REASON_TARGET_NULL:return"Target connection is null.";case Mh.REASON_CHECKS_FAILED:return"Connection checks failed. "+t+" expected "+t.getCheck()+", found "+n.getCheck();case Mh.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Mh.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Mh.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Mh.REASON_TARGET_NULL;let n,r,i;return e.isSuperior()?(n=e.getSourceBlock(),r=t.getSourceBlock(),i=t):(r=e.getSourceBlock(),n=t.getSourceBlock(),i=e,e=t),n===r?Mh.REASON_SELF_CONNECTION:i.type!==Jh[e.type]?Mh.REASON_WRONG_TYPE:n.workspace!==r.workspace?Mh.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!r.isShadow()?Mh.REASON_SHADOW_PARENT:i.type===Rh.OUTPUT_VALUE&&r.previousConnection&&r.previousConnection.isConnected()||i.type===Rh.PREVIOUS_STATEMENT&&r.outputConnection&&r.outputConnection.isConnected()?Mh.REASON_PREVIOUS_AND_OUTPUT:Mh.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}doDragChecks(e,t,n){if(e.distanceFrom(t)>n||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Rh.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Rh.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Rh.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Rh.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection)return!1;break;default:return!1}return-1===Xa.indexOf(t)}canConnectToPrevious_(e,t){return!(e.targetConnection||-1!==Xa.indexOf(t)||t.targetConnection&&(!(e=t.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))}};Me(Ml.CONNECTION_CHECKER,Il,jp);var Xp=class extends Pc{constructor(e){super(e),this.type=ql,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}fromJson(e){t("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.varType=e.varType,this.varName=e.varName}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Xp)).varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};Me(Ml.EVENT,ql,Xp);var Yp=class extends Pc{constructor(e,t){super(e),this.type=Kl,e&&(this.oldName=e.name,this.newName=void 0===t?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}fromJson(e){t("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldName=e.oldName,this.newName=e.newName}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Yp)).oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};Me(Ml.EVENT,Kl,Yp);var Zp=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(e,t){if(e.name!==t){var n=this.getVariable(t,e.type),r=this.workspace.getAllBlocks(!1);et(!0);try{n&&n.getId()!==e.getId()?this.renameVariableWithConflict_(e,t,n,r):this.renameVariableAndUses_(e,t,r)}finally{et(!1)}}}renameVariableById(e,t){const n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)}renameVariableAndUses_(e,t,n){for(Qe(new(ot(Kl))(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)}renameVariableWithConflict_(e,t,n,r){const i=e.type;for(t!==n.name&&this.renameVariableAndUses_(n,t,r),t=0;t<r.length;t++)r[t].renameVarById(e.getId(),n.getId());Qe(new(ot(ql))(e)),ui(this.variableMap.get(i),e)}createVariable(e,t,n){var r=this.getVariable(e,t);if(r){if(n&&r.getId()!==n)throw Error('Variable "'+e+'" is already in use and its id is "'+r.getId()+'" which conflicts with the passed in id, "'+n+'".');return r}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return r=n||Ve(),t=t||"",r=new Fc(this.workspace,e,t,r),(e=this.variableMap.get(t)||[]).push(r),this.variableMap.delete(t),this.variableMap.set(t,e),Qe(new(ot(Zl))(r)),r}deleteVariable(e){const t=e.getId(),n=this.variableMap.get(e.type);if(n)for(let r=0;r<n.length;r++)if(n[r].getId()===t){n.splice(r,1),Qe(new(ot(ql))(e));break}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var n=t.name;const r=this.getVariableUsesById(e);for(let t,i=0;t=r[i];i++)if("procedures_defnoreturn"===t.type||"procedures_defreturn"===t.type)return e=String(t.getFieldValue("NAME")),n=wc.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",n).replace("%2",e),void ft(n);1<r.length?(n=wc.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",n),gt(n,(e=>{e&&t&&this.deleteVariableInternal(t,r)}))):this.deleteVariableInternal(t,r)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const n=Je();n||et(!0);try{for(let e=0;e<t.length;e++)t[e].dispose(!0);this.deleteVariable(e)}finally{n||et(!1)}}getVariable(e,t){if(t=this.variableMap.get(t||""))for(let n,r=0;n=t[r];r++)if(ep.equals(n.name,e))return n;return null}getVariableById(e){for(const[,t]of this.variableMap)for(const n of t)if(n.getId()===e)return n;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const n of e.getPotentialVariableMap().variableMap.keys())t.add(n);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map((e=>e.name))}getVariableUsesById(e){const t=[],n=this.workspace.getAllBlocks(!1);for(let r=0;r<n.length;r++){const i=n[r].getVarModels();if(i)for(let o=0;o<i.length;o++)i[o].getId()===e&&t.push(n[r])}return t}},qp=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new rp(this),this.potentialVariableMap=null,this.id=Ve(),O(this),this.options=e||new ah({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(Ge(Ml.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Zp(this)}dispose(){this.listeners.length=0,this.clear(),S(this)}sortObjects_(e,t){return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+qp.prototype.sortObjects_.offset*e.x-(t.y+qp.prototype.sortObjects_.offset*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!ui(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e){const t=[].concat(this.topBlocks);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(q(qp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){ui(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&(this.sortObjects_.offset=Math.sin(q(qp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e.filter((function(e){return!e.isInsertionMarker()}))):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!ui(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e){const t=[].concat(this.topComments);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(q(qp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t}getAllBlocks(e){if(e){var t=this.getTopBlocks(!0);e=[];for(let n=0;n<t.length;n++)e.push(...t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter((function(e){return!e.isInsertionMarker()}))}clear(){this.isClearing=!0;try{const e=Je();for(e||et(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();e||et(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,n){return this.variableMap.createVariable(e,t,n)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const n in e){if(e[n]>this.remainingCapacityOfType(n))return!1;t+=e[n]}return!(t>this.remainingCapacity())}hasBlockLimits(){return 1/0!==this.options.maxBlocks||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_;const r=t.pop();if(r){for(var i=[r];t.length&&r.group&&r.group===t[t.length-1].group;)i.push(t.pop());for(t=0;t<i.length;t++)n.push(i[t]);i=Xe(i,e),We(!1);try{for(n=0;n<i.length;n++)i[n].run(e)}finally{We(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Ye()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){ui(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return null!=(t=this.commentDB.get(e))?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let n=0;n<t.length;n++)if(!t[n].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Zp(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}static getById(e){return v(e)}static getAll(){return y()}};qp.SCAN_ANGLE=3;var Kp=100,Jp=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var n=new globalThis.Audio}catch(i){return}for(let t=0;t<e.length;t++){const i=e[t],o=i.match(/\.(\w+)$/);if(o&&n.canPlayType("audio/"+o[1])){var r=new globalThis.Audio(i);break}}r&&this.sounds.set(t,r)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(void 0!==t?t.then(e.pause).catch((function(){})):e.pause(),Da||Na)break}}play(e,t){var n=this.sounds.get(e);n?(e=new Date,null!==this.lastSound_&&e.getTime()-this.lastSound_.getTime()<Kp||(this.lastSound_=e,(n=Da||La?n:n.cloneNode()).volume=void 0===t?1:t,n.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}},ef=class{constructor(e){this.workspace=e,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=D(zc.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[mh.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&U(this.svgGroup),this.onZoomResetWrapper&&f(this.onZoomResetWrapper),this.onZoomInWrapper&&f(this.onZoomInWrapper),this.onZoomOutWrapper&&f(this.onZoomOutWrapper)}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new sl(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var n,r=$o(this.workspace,e),i=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(i+=this.LARGE_SPACING+this.HEIGHT),e=Mo(r,new ll(this.WIDTH,i),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),r=r.vertical,t=Po(e,this.MARGIN_VERTICAL,r===ud.TOP?dd.DOWN:dd.UP,t),r===ud.TOP){var o,s=this.SMALL_SPACING+this.HEIGHT;null==(o=this.zoomInGroup)||o.setAttribute("transform","translate(0, "+s+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(s+this.LARGE_SPACING+this.HEIGHT)+")")}else{let e;o=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0,null==(e=this.zoomInGroup)||e.setAttribute("transform","translate(0, "+o+")"),o=o+this.SMALL_SPACING+this.HEIGHT,null==(s=this.zoomOutGroup)||s.setAttribute("transform","translate(0, "+o+")")}this.top=t.top,this.left=t.left,null==(n=this.svgGroup)||n.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=D(zc.G,{class:"blocklyZoom"},this.svgGroup);const t=D(zc.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);D(zc.RECT,{width:32,height:32},t),D(zc.IMAGE,{width:gd.width,height:gd.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(el,"xlink:href",this.workspace.options.pathToMedia+gd.url),this.onZoomOutWrapper=d(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(e){this.zoomInGroup=D(zc.G,{class:"blocklyZoom"},this.svgGroup);const t=D(zc.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);D(zc.RECT,{width:32,height:32},t),D(zc.IMAGE,{width:gd.width,height:gd.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(el,"xlink:href",this.workspace.options.pathToMedia+gd.url),this.onZoomInWrapper=d(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),i(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=D(zc.G,{class:"blocklyZoom"},this.svgGroup);const t=D(zc.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);D(zc.RECT,{width:32,height:32},t),D(zc.IMAGE,{width:gd.width,height:gd.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(el,"xlink:href",this.workspace.options.pathToMedia+gd.url),this.onZoomResetWrapper=d(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),i(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(ot(nc))(null,this.workspace.id,"zoom_controls");Qe(e)}};Bt("\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n");var tf=20,nf=class extends qp{constructor(t,n,r){let i;super(t),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(Ge(Ml.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=t.setMetrics||nf.setTopLevelWorkspaceMetrics_,this.componentManager=new mh,this.connectionDBList=Kd.init(this.connectionChecker),n&&(this.blockDragSurface=n),r&&(this.workspaceDragSurface=r),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new Jp(t.parentWorkspace),this.grid=this.options.gridPattern?new Jd(this.options.gridPattern,t.gridOptions):null,this.markerManager=new ru(this),e.module$build$src$core$variables&&Tt&&this.registerToolboxCategoryCallback(Dc,Tt),zp&&ms&&this.registerToolboxCategoryCallback(Qp,ms),e.module$build$src$core$procedures&&Ko&&(this.registerToolboxCategoryCallback(tp,Ko),this.addChangeListener(es)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Hp(this,this.options.theme||nh),this.themeManager_.subscribeWorkspace(this),this.renderer=hs(this.options.renderer||"geras",this.getTheme(),null!=(i=this.options.rendererOverrides)?i:void 0),this.cachedParentSvgSize=new ll(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=nh),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(e){return!!e.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(ot(ac))(this.getTheme().name,this.id);Qe(e)}updateBlockStyles_(e){for(let t,n=0;t=e[n];n++){const e=t.getStyleName();if(e){const n=t;n.setStyle(e),n.mutator&&n.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let t=0,n=0,r=1;(W(this.getCanvas(),e)||W(this.getBubbleCanvas(),e))&&(r=this.scale);do{const i=Gt(e);e!==this.getCanvas()&&e!==this.getBubbleCanvas()||(r=1),t+=i.x*r,n+=i.y*r,e=e.parentNode}while(e&&e!==this.getParentSvg());return new al(t,n)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new ll(e.width,e.height)}getOriginOffsetInPixels(){return Ut(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if(-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e){return this.svgGroup_=D(zc.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=D(zc.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"===e&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=D(zc.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=D(zc.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(d(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",(function(){})),d(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(Ge(Ml.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=Ge(Ml.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&U(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&U(e.parentNode)}this.resizeHandlerWrapper&&(f(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=nf.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new ef(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new ah({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(Ge(Ml.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(Ge(Ml.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(mh.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),n=[];for(let r,i=0;r=e[i];i++){r.position(t,n);const e=r.getBoundingRectangle();e&&n.push(e)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=Ht();al.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(e,t){const n=this.getParentSvg();null!=e&&(this.cachedParentSvgSize.width=e,n.setAttribute("data-cached-width",e.toString())),null!=t&&(this.cachedParentSvgSize.height=t,n.setAttribute("data-cached-height",t.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if("svg"===e.tagName){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Ke()){var e=this.scale,t=-this.scrollY,n=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(n-this.oldLeft))){var r=new(ot(lc))(t,n,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=n,Qe(r)}}}translate(e,t){var n;this.useWorkspaceDragSurface&&this.isDragSurfaceActive?null==(n=this.workspaceDragSurface)||n.translateSurface(e,t):(n="translate("+e+","+t+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)),this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(e,t,this.scale),this.grid&&this.grid.moveTo(e,t),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var e=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var e,t,n=this.svgBlockCanvas_.previousSibling,r=parseInt(null!=(e=this.getParentSvg().getAttribute("width"))?e:"0");e=parseInt(null!=(t=this.getParentSvg().getAttribute("height"))?t:"0"),t=Gt(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),n,r,e,this.scale),this.workspaceDragSurface.translateSurface(t.x,t.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(let t=(e=this.getAllBlocks(!1)).length-1;0<=t;t--)e[t].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1);this.markerManager.updateMarkers()}highlightBlock(e,t){if(void 0===t){for(let e,t=0;e=this.highlightedBlocks[t];t++)e.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=void 0===t||t)?-1===this.highlightedBlocks.indexOf(e)&&this.highlightedBlocks.push(e):ui(this.highlightedBlocks,e),e.setHighlighted(t))}paste(e){if(!this.rendered||!e.type&&!e.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const t=Je();return t||et(!0),e=e.type?this.pasteBlock_(null,e):"comment"===e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e,null),et(t),e}pasteBlock_(t,n){let r;Ze();try{let i=0,o=0;if(t){let e,n;r=sn(t,this),i=parseInt(null!=(e=t.getAttribute("x"))?e:"0"),this.RTL&&(i=-i),o=parseInt(null!=(n=t.getAttribute("y"))?n:"0")}else n&&(r=Wi(n,this),i=n.x||10,this.RTL&&(i=this.getWidth()-i),o=n.y||10);if(!isNaN(i)&&!isNaN(o)){let t;do{t=!1;const n=this.getAllBlocks(!1);for(let e,r=0;e=n[r];r++){const n=e.getRelativeToSurfaceXY();if(1>=Math.abs(i-n.x)&&1>=Math.abs(o-n.y)){t=!0;break}}if(!t){const n=r.getConnections_(!1);for(let r,s=0;r=n[s];s++)if(r.closest(e.config$$module$build$src$core$config.snapRadius,new al(i,o)).connection){t=!0;break}}t&&(i=this.RTL?i-e.config$$module$build$src$core$config.snapRadius:i+e.config$$module$build$src$core$config.snapRadius,o+=2*e.config$$module$build$src$core$config.snapRadius)}while(t);r.moveTo(new al(i,o))}}finally{qe()}return Ke()&&!r.isShadow()&&Qe(new(ot(zl))(r)),r.select(),r}pasteWorkspaceComment_(e){let t;Ze();try{t=eu.fromXmlRendered(e,this);let n,r,i=parseInt(null!=(n=e.getAttribute("x"))?n:"0"),o=parseInt(null!=(r=e.getAttribute("y"))?r:"0");isNaN(i)||isNaN(o)||(this.RTL&&(i=-i),t.moveBy(i+50,o+50))}finally{qe()}return Ke()&&Gc.fireCreateEvent(t),t.select(),t}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,n){return e=super.createVariable(e,t,n),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(mh.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t,n=0;t=e[n];n++){const e=t.getClientRect();e&&this.dragTargetAreas.push({component:t,clientRect:e})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t,n=0;t=this.dragTargetAreas[n];n++)if(t.clientRect.contains(e.clientX,e.clientY))return t.component;return null}onMouseDown_(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){(e=_(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY=al.difference(t,e)}moveDrag(e){return(e=_(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,al.sum(this.dragDeltaXY,e)}isDragging(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(jd.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var r=b(e);if(Ba)var i=e.metaKey;t&&(e.ctrlKey||i||!n)?(r=-r.y/50,t=_(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,r)):(t=this.scrollX-r.x,n=this.scrollY-r.y,e.shiftKey&&!r.x&&(t=this.scrollX-r.y,n=this.scrollY),this.scroll(t,n)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new sl(0,0,0,0);const t=e[0].getBoundingRectangle();for(let r=1;r<e.length;r++){var n=e[r];n.isInsertionMarker&&n.isInsertionMarker()||((n=n.getBoundingRectangle()).top<t.top&&(t.top=n.top),n.bottom>t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left),n.right>t.right&&(t.right=n.right))}return t}cleanUp(){this.setResizesEnabled(!1),et(!0);const e=this.getTopBlocks(!0);let t=0;for(let n,r=0;n=e[r];r++){if(!n.isMovable())continue;const e=n.getRelativeToSurfaceXY();n.moveBy(-e.x,t-e.y),n.snapToGrid(),t=n.getRelativeToSurfaceXY().y+n.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}et(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=Zh.registry.getContextMenuOptions(Zh.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Oo(e,t,this.RTL)}}updateToolbox(e){if(e=Lr(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Br(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(x(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(a2){try{this.getParentSvg().parentElement.setActive()}catch(e){this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);const r=this.scale*n;if(this.scale!==r){r>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:r<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var i=this.getCanvas().getCTM(),o=this.getParentSvg().createSVGPoint();o.x=e,o.y=t,e=(o=o.matrixTransform(i.inverse())).x,t=o.y,i=i.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=i.e,this.scrollY=i.f,this.setScale(r)}}zoomCenter(e){var t=this.getMetrics();let n;this.flyout?(n=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(n,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),r=2*tf,i=n.right-n.left+r;if(n=n.bottom-n.top+r,i){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),n+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),i+=this.flyout.getWidth()/this.scale)),t/=i,e/=n,Ze();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{qe()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){N(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),N(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){F(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),F(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,n=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,n=-n-e.scrollTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var t=e.getRelativeToSurfaceXY(),n=e.getHeightWidth(),r=this.scale;e=(t.x+(this.RTL?-1:1)*n.width/2)*r,t=(t.y+n.height/2)*r,n=this.getMetrics(),this.scroll(-(e-n.viewWidth/2),-(t-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const n=this.getMetrics();e=Math.min(e,-n.scrollLeft),t=Math.min(t,-n.scrollTop);const r=n.scrollTop+Math.max(0,n.scrollHeight-n.viewHeight);e=Math.max(e,-(n.scrollLeft+Math.max(0,n.scrollWidth-n.viewWidth))),t=Math.max(t,-r),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+n.scrollLeft),-(t+n.scrollTop),!1),e+=n.absoluteLeft,t+=n.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e){return super.getAllBlocks(e)}getTopBlocks(e){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){ui(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return null!=(t=this.flyoutButtonCallbacks.get(e))?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t="pointerdown"===e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new jd(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e){Vn(),fr(),ke();const t=!!e;this.getComponentManager().getComponents(mh.Capability.AUTOHIDEABLE,!0).forEach((e=>e.autoHide(t)))}static setTopLevelWorkspaceMetrics_(e){const t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},rf={};rf.load=vs,rf.save=bs;var of=class{constructor(){this.priority=Sh}save(e){const t=[];for(const n of e.getAllVariables())e={name:n.name,id:n.getId()},n.type&&(e.type=n.type),t.push(e);return t.length?t:null}load(e,t){for(const n of e)t.createVariable(n.name,n.type,n.id)}clear(e){e.getVariableMap().clear()}};Mi("variables",new of);var sf={};sf.VariableSerializer=of;var af=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=Th}save(e){return e.getProcedureMap().getProcedures().map((e=>ys(e)))}load(e,t){const n=t.getProcedureMap();for(const r of e)n.add(Ss(this.procedureModelClass,this.parameterModelClass,r,t))}clear(e){e.getProcedureMap().clear()}},lf=new af(ip,op),cf={};cf.ProcedureSerializer=af,cf.loadParameter=Ts,cf.loadProcedure=Ss,cf.observableProcedureSerializer=lf,cf.saveParameter=Os,cf.saveProcedure=ys;var uf={blocks:Ah,exceptions:Oh,priorities:Eh,procedures:cf,registry:wh,variables:sf,workspaces:rf},hf=class extends kp{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&U(this.selectedGlowFilter_),this.replacementGlowFilter_&&U(this.replacementGlowFilter_)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:di("c",[hi(25,-e),hi(71,-e),hi(t,0)])}}makeHexagonal(){function e(e,n,r){var i=e/2;return mi(-(r=r?-1:1)*(i=i>t?t:i),e=(n?-1:1)*e/2)+mi(r*i,e)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:e=>(e/=2)>t?t:e,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}makeRounded(){function e(e,t,r){const i=e>n?e-n:0;return bi("a","0 0,1",e=(e>n?n:e)/2,hi((t?-1:1)*e,(t?-1:1)*e))+_i("v",(r?1:-1)*i)+bi("a","0 0,1",e,hi((t?1:-1)*e,(t?-1:1)*e))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width:e=>(e/=2)>t?t:e,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}makeSquared(){function e(e,n,r){return e-=2*t,bi("a","0 0,1",t,hi((n?-1:1)*t,(n?-1:1)*t))+_i("v",(r?1:-1)*e)+bi("a","0 0,1",t,hi((n?1:-1)*t,(n?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:e=>t,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Rh.INPUT_VALUE:case Rh.OUTPUT_VALUE:if(null!==(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&-1!==t.indexOf("Boolean")?this.HEXAGONAL:(t&&-1!==t.indexOf("Number")||t&&t.indexOf("String"),this.ROUNDED);case Rh.PREVIOUS_STATEMENT:case Rh.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(e){return di("c",[hi(e*i/2,0),hi(e*i*3/4,s/2),hi(e*i,s)])+gi([hi(e*i,o)])+di("c",[hi(e*i/4,s/2),hi(e*i/2,s),hi(e*i,s)])+_i("h",e*r)+di("c",[hi(e*i/2,0),hi(e*i*3/4,-s/2),hi(e*i,-s)])+gi([hi(e*i,-o)])+di("c",[hi(e*i/4,-s/2),hi(e*i/2,-s),hi(e*i,-s)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,r=t/3,i=r/3,o=n/2,s=o/2,a=e(1),l=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:a,pathRight:l}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=bi("a","0 0,0",e,hi(-e,e)),n=bi("a","0 0,1",e,hi(-e,e));return{width:e,height:e,pathTop:t,pathBottom:bi("a","0 0,0",e,hi(e,e)),rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:bi("a","0 0,1",e,hi(e,e))}}generateSecondaryColour_(e){return rr("#000",e,.15)||e}generateTertiaryColour_(e){return rr("#000",e,.25)||e}createDom(e,t,n){super.createDom(e,t,n),e=D(zc.DEFS,{},e),t=D(zc.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),D(zc.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),n=D(zc.FECOMPONENTTRANSFER,{result:"outBlur"},t),D(zc.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),D(zc.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),D(zc.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter_=t,e=D(zc.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),D(zc.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=D(zc.FECOMPONENTTRANSFER,{result:"outBlur"},e),D(zc.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),D(zc.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),D(zc.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),D(zc.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},df=class extends Mp{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;if(e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),ss()){let e,t;null==(e=this.block_)||null==(t=e.renderingDebugger)||t.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height))if(ap.isSpacer(e)&&(e.precedesStatement||e.followsStatement)){var t=this.constants_.INSIDE_CORNERS.rightHeight;t=e.height-(e.precedesStatement?t:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<t?_i("V",e.yPos+t):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=_i("V",e.yPos+e.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=fi(e.xPos,this.info_.startY),this.outlinePath_+=_i("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=_i("V",e.baseline),this.outlinePath_+=_i("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var n=e.width-2*e.connectionWidth;e=pi(e.xPos+e.connectionWidth,e.centerline-e.height/2)+_i("h",n)+e.shape.pathRightDown(e.height)+_i("h",-n)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(t,e)}}drawStatementInput_(e){var t=e.getLastInput();const n=t.xPos+t.notchOffset+t.shape.width,r=t.shape.pathRight+_i("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,i=e.height-2*this.constants_.INSIDE_CORNERS.height;t=this.constants_.INSIDE_CORNERS.pathBottom+_i("h",t.notchOffset-this.constants_.INSIDE_CORNERS.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=_i("H",n)+r+_i("v",i)+t+_i("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}};e.FieldImage$$module$build$src$core$field_image=class extends $u{constructor(t,n,r,i,o,s,a){if(super($u.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",r=Number(ar(r)),n=Number(ar(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new ll(n,r+e.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=r,"function"==typeof o&&(this.clickHandler_=o),t!==$u.SKIP_SETUP&&(a?this.configure_(a):(this.flipRtl_=!!s,this.altText_=ar(i)||""),this.setValue(ar(t)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl_=e.flipRtl),e.alt&&(this.altText_=ar(e.alt))}initView(){this.imageElement_=D(zc.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(el,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return"string"!=typeof e?null:e}doValueUpdate_(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(el,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(e){e!==this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(e){this.clickHandler_=e}getText_(){return this.altText_}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}},e.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,Or("field_image",e.FieldImage$$module$build$src$core$field_image),e.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",e.FieldImage$$module$build$src$core$field_image;var pf=class extends $u{constructor(e,t,n){super($u.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==$u.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),void 0!==e.spellcheck&&(this.spellcheck_=e.spellcheck)}initView(){const e=this.getSourceBlock();if(!e)throw new Pu;if(this.getConstants().FULL_BLOCK_FIELDS){let t=0,n=0;for(let r,i=0;r=e.inputList[i];i++){for(let e=0;r.fieldRow[e];e++)t++;r.connection&&n++}this.fullBlockClickTarget_=1>=t&&e.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(e){return null==e?null:String(e)}doValueInvalid_(e){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&Ke()&&Qe(new(ot(Xl))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var e=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",e.style.colourTertiary):e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const e=this.htmlInput_;this.isTextValid_?(F(e,"blocklyInvalidInput"),wr(e,Bu.INVALID,!1)):(N(e,"blocklyInvalidInput"),wr(e,Bu.INVALID,!0))}}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t){this.workspace_=this.sourceBlock_.workspace,!(e=t||!1)&&this.workspace_.options.modalInputs&&(Fa||La||Da)?this.showPromptEditor_():this.showInlineEditor_(e)}showPromptEditor_(){vt(wc.CHANGE_VALUE_TITLE,this.getText(),(e=>{null!==e&&this.setValue(this.getValueFromEditorText_(e))}))}showInlineEditor_(e){const t=this.getSourceBlock();if(!t)throw new Pu;pr(this,t.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Pu;et(!0);const t=ur();var n=this.getClickTarget_();if(!n)throw Error("A click target has not been set.");N(n,"editing"),(n=document.createElement("input")).className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);const r=this.workspace_.getScale();var i=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";return t.style.fontSize=i,n.style.fontSize=i,i=pf.BORDERRADIUS*r+"px",this.fullBlockClickTarget_&&(i=((i=this.getScaledBBox()).bottom-i.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,n.style.border=1*r+"px solid "+e,t.style.borderRadius=i,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*r+"px")),n.style.borderRadius=i,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(n),n}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),et(!1),this.unbindInputEvents_();var e=ur().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,!(e=this.getClickTarget_()))throw Error("A click target has not been set.");F(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=d(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=d(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(f(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(f(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){e.keyCode===Uu.ENTER?(fr(),ke()):e.keyCode===Uu.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),fr(),ke()):e.keyCode===Uu.TAB&&(fr(),ke(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new Pu;const t=ur(),n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",e=new al(e.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=e.x+"px",t.style.top=e.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return String(e)}getValueFromEditorText_(e){return e}};pf.BORDERRADIUS=4,e.FieldTextInput$$module$build$src$core$field_textinput=class extends pf{constructor(e,t,n){super(e,t,n)}static fromJson(e){return new this(ar(e.text),void 0,e)}},Or("field_input",e.FieldTextInput$$module$build$src$core$field_textinput),e.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",e.FieldTextInput$$module$build$src$core$field_textinput;var ff=class extends up{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},mf=class extends vp{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},gf=class extends lp{constructor(e){super(e),this.width=this.height=0,this.type|=ap.getType("RIGHT_CONNECTION")}},_f=class extends Ap{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},bf=class extends $p{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new _f(this.constants_),this.bottomRow=new ff(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new gf(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return!!t&&(e.type===Bl.STATEMENT||t.type===Bl.STATEMENT||(e.type===Bl.VALUE||e.type===Bl.DUMMY)&&(!this.isInline||this.isMultiRow))}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&ap.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&ap.isLeftRoundedCorner(e)&&t&&(ap.isPreviousConnection(t)||ap.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&ap.isLeftSquareCorner(e)&&t&&ap.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(ap.isTopRow(e)&&ap.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const n=ap.isInputRow(e)&&e.hasStatement,r=ap.isInputRow(t)&&t.hasStatement;return r||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),r&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):ap.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ap.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const n=this.width-this.startX;return ap.isInputRow(e)&&e.hasStatement||ap.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n}getElemCenterline_(e,t){if(e.hasStatement&&!ap.isSpacer(t)&&!ap.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ap.isInlineInput(t)&&t instanceof dp){const n=t.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return super.getElemCenterline_(e,t)}addInput_(t,n){if(t.type===Bl.DUMMY&&n.hasDummyInput&&n.align===e.Align$$module$build$src$core$input.LEFT&&t.align===e.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(n,t);else if(t.type===Bl.STATEMENT)return n.elements.push(new mf(this.constants_,t)),n.hasStatement=!0,void(null===n.align&&(n.align=t.align));super.addInput_(t,n)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs_.get(e)){let n;for(let t=0;t<e.elements.length;t++){const r=e.elements[t];if(ap.isSpacer(r)&&(n=r),ap.isField(r)&&r instanceof fp&&r.parentInput===this.rightAlignedDummyInputs_.get(e))break}if(n)return n.width+=t,void(e.width+=t)}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=t;for(let o=2;o<this.rows.length-1;o+=2){var r=this.rows[o-1];const s=this.rows[o];var i=this.rows[o+1];if(r=2===o?!!this.topRow.hasPreviousConnection:!!r.followsStatement,i=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement,ap.isInputRow(s)&&s.hasStatement){let e,r;s.measure(),n=s.width-(null!=(r=null==(e=s.getLastInput())?void 0:e.width)?r:0)+t}else if(r&&(2===o||i)&&ap.isInputRow(s)&&!s.hasStatement){i=s.xPos,r=null;for(let t=0;t<s.elements.length;t++){const o=s.elements[t];ap.isSpacer(o)&&(r=o),r&&(ap.isField(o)||ap.isInput(o))&&i<n&&!(ap.isField(o)&&o instanceof fp&&(o.field instanceof e.FieldLabel$$module$build$src$core$field_label||o.field instanceof e.FieldImage$$module$build$src$core$field_image))&&(r.width+=n-i),i+=o.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,n=0;n<this.rows.length;n++){const e=this.rows[n];e.yPos=t,t+=e.height}this.height=t,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(n),n=e.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(n),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=n,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=n,this.width+=n+e,this.widthWithChildren+=n+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var n=this.rows[t];if(!ap.isInputRow(n))continue;e=n.elements[n.elements.length-2];let r=this.getNegativeSpacing_(n.elements[1]),i=this.getNegativeSpacing_(e);e=r+i;const o=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<o&&(r=(e=this.width-o)/2,i=e/2),n.elements.unshift(new _p(this.constants_,-r)),n.elements.push(new _p(this.constants_,-i))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)n=this.rows[t],ap.isTopOrBottomRow(n)&&(n.elements[1].width-=e),n.width-=e,n.widthWithConnectedBlocks-=e}}getNegativeSpacing_(t){if(!t||!this.outputConnection)return 0;const n=this.outputConnection.width;var r=this.outputConnection.shape.type;const i=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===i.SHAPES.ROUND?(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n-(r=this.height/2>r?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r)))):0;if(ap.isInlineInput(t)&&t instanceof dp){const e=t.connectedBlock;return null==(t=e?e.pathObject.outputShapeType:t.shape.type)||e&&e.outputConnection&&(e.statementInputCount||e.nextConnection)||r===i.SHAPES.HEXAGONAL&&r!==t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return ap.isField(t)&&t instanceof fp?r===i.SHAPES.ROUND&&t.field instanceof e.FieldTextInput$$module$build$src$core$field_textinput?n-2.75*i.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:ap.isIcon(t)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let i=2;i<this.rows.length-1;i+=2){const o=this.rows[i-1],s=this.rows[i],a=this.rows[i+1];var t=2===i,n=i+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement;if(t?this.topRow.hasPreviousConnection:o.followsStatement){var r=s.elements[1];if(r=3===s.elements.length&&r instanceof fp&&(r.field instanceof e.FieldLabel$$module$build$src$core$field_label||r.field instanceof e.FieldImage$$module$build$src$core$field_image),!t&&r)o.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.MEDIUM_PADDING;else if(t||n){if(n){for(t=!1,n=0;n<s.elements.length;n++)if((r=s.elements[n])instanceof dp&&ap.isInlineInput(r)&&r.connectedBlock&&!r.connectedBlock.isShadow()&&40<=r.connectedBlock.getHeightWidth().height){t=!0;break}t&&(o.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.SMALL_PADDING)}}else o.height+=this.constants_.SMALL_PADDING}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},vf=class extends Bp{constructor(e,t,n){super(e,t,n),this.markerCircle_=null}showWithInputOutput_(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput_(e)}showWithInput_(e){this.showWithInputOutput_(e)}showWithBlock_(e){const t=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle_(e,t){let n,r;null==(n=this.markerCircle_)||n.setAttribute("cx",e.toString()),null==(r=this.markerCircle_)||r.setAttribute("cy",t.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=D(zc.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();D(zc.ANIMATE,e,this.markerCircle_)}return this.markerSvg_}applyColour_(e){let t,n;if(super.applyColour_(e),null==(t=this.markerCircle_)||t.setAttribute("fill",this.colour_),null==(n=this.markerCircle_)||n.setAttribute("stroke",this.colour_),this.isCursor()){let t;e=this.colour_+";transparent;transparent;",null==(t=this.markerCircle_)||t.firstElementChild.setAttribute("values",e)}}},yf=class extends Fp{constructor(e,t,n){super(e,t,n),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=n}setPath(e){super.setPath(e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const n of this.outlines.values())n.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath_(e);this.remainingOutlines.clear()}setOutlinePath(e,t){(e=this.getOutlinePath_(e)).setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(e){return this.outlines.has(e)||this.outlines.set(e,D(zc.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath_(e){let t,n;null==(t=this.outlines.get(e))||null==(n=t.parentNode)||n.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Of=class extends Vp{constructor(e){super(e)}makeConstants_(){return new hf}makeRenderInfo_(e){return new bf(this,e)}makeDrawer_(e,t){return new df(e,t)}makeMarkerDrawer(e,t){return new vf(e,this.getConstants(),t)}makePathObject(e,t){return new yf(e,t,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(e){return e.type!==Rh.INPUT_VALUE&&e.type!==Rh.OUTPUT_VALUE}getConnectionPreviewMethod(e,t,n){return t.type===Rh.OUTPUT_VALUE?e.isConnected()?Up.PREVIEW_TYPE.REPLACEMENT_FADE:Up.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,n)}};ls("zelos",Of);var Sf={};Sf.BottomRow=ff,Sf.ConstantProvider=hf,Sf.Drawer=df,Sf.MarkerSvg=vf,Sf.PathObject=yf,Sf.RenderInfo=bf,Sf.Renderer=Of,Sf.RightConnectionShape=gf,Sf.StatementInput=mf,Sf.TopRow=_f;var Tf=class extends $p{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const r=this.rows[t];var n=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new _p(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let e=0;e<n.length-1;e++){r.elements.push(n[e]);const t=this.getInRowSpacing_(n[e],n[e+1]);r.elements.push(new _p(this.constants_,t))}r.elements.push(n[n.length-1]),r.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&r.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),r.elements.push(new _p(this.constants_,n)))}}}getInRowSpacing_(e,t){if(!e)return t&&ap.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&ap.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&ap.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ap.isInput(e)&&!t)return ap.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:ap.isIcon(e)?2*this.constants_.LARGE_PADDING+1:ap.isHat(e)?this.constants_.NO_PADDING:ap.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ap.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ap.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ap.isInput(e)&&!t){if(ap.isExternalInput(e))return this.constants_.NO_PADDING;if(ap.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ap.isStatementInput(e))return this.constants_.NO_PADDING}if(!ap.isInput(e)&&t&&ap.isInput(t)){if(ap.isField(e)&&e.isEditable){if(ap.isInlineInput(t)||ap.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(ap.isInlineInput(t)||ap.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(ap.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ap.isIcon(e)&&t&&!ap.isInput(t))return this.constants_.LARGE_PADDING;if(ap.isInlineInput(e)&&t&&ap.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ap.isLeftSquareCorner(e)&&t){if(ap.isHat(t))return this.constants_.NO_PADDING;if(ap.isPreviousConnection(t)||ap.isNextConnection(t))return t.notchOffset}return ap.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:ap.isField(e)&&t&&ap.isField(t)&&e.isEditable===t.isEditable||t&&ap.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return ap.isTopRow(e)&&ap.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ap.isTopRow(e)||ap.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(ap.isSpacer(t))return e.yPos+t.height/2;if(ap.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ap.isNextConnection(t)?e+t.height/2:e-t.height/2;if(ap.isTopRow(e))return ap.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return ap.isField(t)&&e.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):n+e.height/2}finalize_(){let e=0,t=0;for(var n=0;n<this.rows.length;n++){const i=this.rows[n];i.yPos=t,i.xPos=this.startX,t+=i.height,e=Math.max(e,i.widthWithConnectedBlocks);var r=t-this.topRow.ascenderHeight;i===this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,t+=r),this.recordElemPositions_(i)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},xf=class extends Vp{constructor(e){super(e)}makeRenderInfo_(e){return new Tf(this,e)}};ls("thrasos",xf);var Ef={};Ef.RenderInfo=Tf,Ef.Renderer=xf;var wf=class extends kp{constructor(){super()}},Cf=class extends Mp{constructor(e,t){super(e,t)}},Af=class extends $p{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}},kf=class extends Vp{constructor(e){super(e)}makeConstants_(){return new wf}makeRenderInfo_(e){return new Af(this,e)}makeDrawer_(e,t){return new Cf(e,t)}};ls("minimalist",kf);var Rf={};Rf.ConstantProvider=wf,Rf.Drawer=Cf,Rf.RenderInfo=Af,Rf.Renderer=kf;var If=class extends kp{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Mf=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+"\n"+this.inlineSteps_}drawTopCorner(e){this.steps_+=fi(e.xPos,this.info_.startY);for(let t,n=0;t=e.elements[n];n++)ap.isLeftSquareCorner(t)?this.steps_+=this.highlightConstants_.START_POINT:ap.isLeftRoundedCorner(t)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ap.isPreviousConnection(t)?this.steps_+=this.notchPaths_.pathLeft:ap.isHat(t)?this.steps_+=this.startPaths_.path(this.RTL_):ap.isSpacer(t)&&0!==t.width&&(this.steps_+=_i("H",t.xPos+t.width-this.highlightOffset_));this.steps_+=_i("H",e.xPos+e.width-this.highlightOffset_)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+_i("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const n=e.height-t.connectionHeight;this.steps_+=pi(t.xPos+t.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+_i("v",n)}else this.steps_+=pi(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const n=e.height-2*this.insideCornerPaths_.height;this.steps_+=pi(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+_i("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+mi(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=pi(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+mi(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset_;e instanceof wp&&e.followsStatement&&(this.steps_+=_i("H",t)),this.RTL_&&(this.steps_+=_i("H",t),e.height>this.highlightOffset_&&(this.steps_+=_i("V",e.yPos+e.height-this.highlightOffset_)))}drawBottomRow(e){if(this.RTL_)this.steps_+=_i("V",e.baseline-this.highlightOffset_);else{const t=this.info_.bottomRow.elements[0];ap.isLeftSquareCorner(t)?this.steps_+=pi(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):ap.isLeftRoundedCorner(t)&&(this.steps_+=pi(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=pi(this.info_.startX,e):(this.steps_+=pi(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=_i("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,ap.isLeftRoundedCorner(e.elements[0])?this.steps_+=_i("V",this.outsideCornerPaths_.height):this.steps_+=_i("V",e.capline+this.highlightOffset_))}drawInlineInput(e){const t=this.highlightOffset_,n=e.xPos+e.connectionWidth;var r=e.centerline-e.height/2;const i=e.width-e.connectionWidth,o=r+t;this.RTL_?(r=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=pi(n-t,o)+_i("v",r)+this.puzzleTabPaths_.pathDown(this.RTL_)+_i("v",e)+_i("h",i)):this.inlineSteps_+=pi(e.xPos+e.width+t,o)+_i("v",e.height)+_i("h",-i)+pi(n,r+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},$f=class extends Mp{constructor(e,t){super(e,t),this.highlighter_=new Mf(t)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const e=this.block_.pathObject;if(e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),ss()){let e,t;null==(e=this.block_)||null==(t=e.renderingDebugger)||t.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=_i("H",e.xPos+e.width)+_i("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(null!=t&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Pf=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=fi(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,r=fi(n,n)+bi("a","0 0,0",e,hi(-n-t,e-n)),i=bi("a","0 0,0",e+t,hi(e+t,e+t)),o=fi(n,-n)+bi("a","0 0,0",e+t,hi(e-n,n+t));return{width:e+t,height:e,pathTop:e=>e?r:"",pathBottom:e=>e?i:o}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,r=fi(n,n)+bi("a","0 0,1",e-t,hi(e-n,-n+t)),i=fi(t,e)+bi("a","0 0,1",e-t,hi(e,-e+t)),o=-n,s=fi(n,o)+bi("a","0 0,1",e-t,hi(-n+t,-o-e));return{height:e,topLeft:e=>e?r:i,bottomLeft:()=>s}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=fi(-2,3.4-t)+mi(-.45*e,-2.1),r=_i("v",2.5)+fi(.97*-e,2.5)+di("q",[hi(.05*-e,10),hi(.3*e,9.5)])+fi(.67*e,-1.9)+_i("v",2.5),i=_i("v",-1.5)+fi(-.92*e,-.5)+di("q",[hi(-.19*e,-5.5),hi(0,-11)])+fi(.92*e,1),o=fi(-5,t-.7)+mi(.46*e,-2.1);return{width:e,height:t,pathUp:e=>e?n:i,pathDown:e=>e?r:o}}makeNotch(){return{pathLeft:_i("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:mi(5.1,2.6)+fi(-10.2,6.8)+mi(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=fi(25,-8.7)+di("c",[hi(29.7,-6.2),hi(57.2,-.5),hi(75,8.7)]),n=di("c",[hi(17.8,-9.2),hi(45.3,-14.9),hi(75,-8.7)])+pi(100.5,e+.5);return{path:e=>e?t:n}}},Lf=class extends bp{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Df=class extends vp{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Nf=class extends $p{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Bl.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e.type===Bl.VALUE?(t.elements.push(new Lf(this.constants_,e)),t.hasInlineInput=!0):e.type===Bl.STATEMENT?(t.elements.push(new Df(this.constants_,e)),t.hasStatement=!0):e.type===Bl.VALUE?(t.elements.push(new pp(this.constants_,e)),t.hasExternalInput=!0):e.type===Bl.DUMMY&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||null!==t.align||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let n,r=0;n=this.rows[r];r++)n.hasExternalInput&&(e=!0);for(let n,r=0;n=this.rows[r];r++){var t=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new _p(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let e=0;e<t.length-1;e++){n.elements.push(t[e]);const r=this.getInRowSpacing_(t[e],t[e+1]);n.elements.push(new _p(this.constants_,r))}n.elements.push(t[t.length-1]),n.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&n.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),n.elements.push(new _p(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&ap.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&ap.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&ap.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ap.isInput(e)&&(!t||ap.isStatementInput(t)))return ap.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:ap.isIcon(e)?2*this.constants_.LARGE_PADDING+1:ap.isHat(e)?this.constants_.NO_PADDING:ap.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ap.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ap.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ap.isInput(e)&&!t){if(ap.isExternalInput(e))return this.constants_.NO_PADDING;if(ap.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ap.isStatementInput(e))return this.constants_.NO_PADDING}if(!ap.isInput(e)&&t&&ap.isInput(t)){if(ap.isField(e)&&e.isEditable){if(ap.isInlineInput(t)||ap.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(ap.isInlineInput(t)||ap.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(ap.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ap.isIcon(e)&&t&&!ap.isInput(t))return this.constants_.LARGE_PADDING;if(ap.isInlineInput(e)&&t&&ap.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ap.isLeftSquareCorner(e)&&t){if(ap.isHat(t))return this.constants_.NO_PADDING;if(ap.isPreviousConnection(t))return t.notchOffset;if(ap.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ap.isLeftRoundedCorner(e)&&t){if(ap.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(ap.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ap.isField(e)&&t&&ap.isField(t)&&e.isEditable===t.isEditable||t&&ap.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return ap.isTopRow(e)&&ap.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ap.isTopRow(e)||ap.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(ap.isSpacer(t))return e.yPos+t.height/2;if(ap.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ap.isNextConnection(t)?e+t.height/2:e-t.height/2;if(ap.isTopRow(e))return ap.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return ap.isField(t)||ap.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=ap.isInlineInput(t)?n+t.height/2:n+e.height/2,n}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,n=null;for(let r,i=this.rows.length-1;r=this.rows[i];i--)t.set(r,e),ap.isInputRow(r)&&(r.hasStatement&&this.alignStatementRow_(r),n&&n.hasStatement&&r.width<n.width?t.set(r,n.width):e=r.width,n=r);e=0;for(let r,i=0;r=this.rows[i];i++)r.hasStatement?e=this.getDesiredRowWidth_(r):ap.isSpacer(r)?r.width=Math.max(e,t.get(r)):(n=r.width,0<(e=Math.max(e,t.get(r))-n)&&this.addAlignmentPadding_(r,e),e=r.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let r,i=0;r=this.rows[i];i++){r.yPos=t,r.xPos=this.startX,t+=r.height,e=Math.max(e,r.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;r===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Bf=class extends Fp{constructor(e,t,n){super(e,t,n),this.constants=n,this.colourDark="#000000",this.svgPathDark=D(zc.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=D(zc.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=rr("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Ff=class extends Vp{constructor(e){super(e),this.highlightConstants_=null}init(e,t){super.init(e,t),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new If}makeRenderInfo_(e){return new Nf(this,e)}makeDrawer_(e,t){return new $f(e,t)}makePathObject(e,t){return new Bf(e,t,this.getConstants())}makeHighlightConstants_(){return new Pf(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};ls("geras",Ff);var Gf={};Gf.ConstantProvider=If,Gf.Drawer=$f,Gf.HighlightConstantProvider=Pf,Gf.Highlighter=Mf,Gf.InlineInput=Lf,Gf.PathObject=Bf,Gf.RenderInfo=Nf,Gf.Renderer=Ff,Gf.StatementInput=Df;var Uf=class{constructor(e){this.container=e,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=D(zc.SVG,{xmlns:Ka,"xmlns:html":Ja,"xmlns:xlink":el,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(e,t){e=Math.round(e),t=Math.round(t),this.SVG.style.display="block",H(this.SVG,"translate3d("+e+"px, "+t+"px, 0)")}getSurfaceTranslation(){return Gt(this.SVG)}clearAndHide(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const t=this.SVG.childNodes[0],n=this.SVG.childNodes[1];if(!t||!n||!t.classList.contains("blocklyBlockCanvas")&&n.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!==this.previousSibling?V(t,this.previousSibling):e.insertBefore(t,e.firstChild),V(n,t),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");H(this.SVG,""),this.previousSibling=null}setContentsAndShow(e,t,n,r,i,o){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=n,e.setAttribute("transform","translate(0, 0) scale("+o+")"),t.setAttribute("transform","translate(0, 0) scale("+o+")"),this.SVG.setAttribute("width",String(r)),this.SVG.setAttribute("height",String(i)),this.SVG.appendChild(e),this.SVG.appendChild(t),this.SVG.style.display="block"}},Vf=class{constructor(e){this.container=e,this.scale=1,this.surfaceXY=new al(0,0),this.childSurfaceXY=new al(0,0),this.svg=D(zc.SVG,{xmlns:Ka,"xmlns:html":Ja,"xmlns:xlink":el,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=D(zc.G,{},this.svg)}createDom(){t("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(e){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(e),this.svg.style.display="block",this.surfaceXY=new al(0,0)}translateAndScaleGroup(e,t,n){this.scale=n,e=Math.round(e),t=Math.round(t),this.childSurfaceXY.x=e,this.childSurfaceXY.y=t,this.dragGroup.setAttribute("transform","translate("+e+","+t+") scale("+n+")")}translateSurfaceInternal_(){const e=Math.round(this.surfaceXY.x),t=Math.round(this.surfaceXY.y);this.svg.style.display="block",H(this.svg,"translate3d("+e+"px, "+t+"px, 0)")}translateBy(e,t){this.surfaceXY=new al(this.surfaceXY.x+e,this.surfaceXY.y+t),this.translateSurfaceInternal_()}translateSurface(e,t){this.surfaceXY=new al(e*this.scale,t*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const e=Gt(this.svg);return new al(e.x/this.scale,e.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(e){const t=this.getCurrentBlock();if(t&&(e?e.appendChild(t):this.dragGroup.removeChild(t)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new al(0,0)}},Wf={};Wf.bumpIntoBounds=xs,Wf.bumpIntoBoundsHandler=Es,Wf.bumpTopObjectsIntoBounds=Cs;var Hf=class{constructor(e,t,n,r,i){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,n=void 0===n||n;const o=(t=void 0===t||t)&&n;t&&(this.hScroll=new Yu(e,!0,o,r,i)),n&&(this.vScroll=new Yu(e,!1,o,r,i)),o&&(this.corner_=D(zc.RECT,{height:Yu.scrollbarThickness,width:Yu.scrollbarThickness,class:"blocklyScrollbarBackground"}),V(this.corner_,e.getBubbleCanvas()))}dispose(){U(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,n=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(n=!0)):n=t=!0,t||n){try{Ze(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&n&&this.vScroll.resize(e)}finally{qe()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let e;null==(e=this.corner_)||e.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let e;null==(e=this.corner_)||e.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,n){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(n||void 0===n)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},Qf=!1;e.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=T());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let n,r=0;n=e[r];r++){let e=this.blockToCode(n);Array.isArray(e)&&(e=e[0]),e&&(n.outputConnection&&(e=this.scrubNakedValue(e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e=this.injectId(this.STATEMENT_PREFIX,n)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e+=this.injectId(this.STATEMENT_SUFFIX,n))),t.push(e))}return t=t.join("\n"),(t=(t=(t=this.finish(t)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let n=0;n<e.length;n++){const r=e[n].getCommentText();r&&t.push(r)}return t.length&&t.push(""),t.join("\n")}blockToCode(e,t){if(!1===this.isInitialized&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=this[e.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(n=n.call(e,e),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)}valueToCode(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var r=e.getInputTargetBlock(t);if(!r)return"";if(""===(t=this.blockToCode(r)))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+r.type);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+r.type);if(!e)return"";r=!1;var i=Math.floor(n);const o=Math.floor(t);if(i<=o&&(i!==o||0!==i&&99!==i))for(r=!0,i=0;i<this.ORDER_OVERRIDES.length;i++)if(this.ORDER_OVERRIDES[i][0]===n&&this.ORDER_OVERRIDES[i][1]===t){r=!1;break}return r&&(e="("+e+")"),e}statementToCode(e,t){if(e=e.getInputTargetBlock(t),"string"!=typeof(t=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(t,n){if(!this.definitions_[t]){const r=this.nameDB_.getDistinctName(t,e.NameType$$module$build$src$core$names.PROCEDURE);let i;for(this.functionNames_[t]=r,Array.isArray(n)&&(n=n.join("\n")),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);i!==n;)i=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,n){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},Object.defineProperties(e.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return t("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(e){t("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=e}}}),e.CodeGenerator$$module$build$src$core$generator;var zf=class{constructor(e,t,n,r){this.workspace=e,this.targetWorkspace=t,this.isLabel_=r,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=n.text,this.position_=new al(0,0),this.callbackKey_=n.callbackKey||n.callbackkey,this.cssClass_=n["web-class"]||null,this.info=n}createDom(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";let t;this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=D(zc.G,{class:e},this.workspace.getCanvas()),this.isLabel_||(t=D(zc.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),e=D(zc.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const n=D(zc.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var r=ar(this.text_);this.workspace.RTL&&(r+="‏"),n.textContent=r,this.isLabel_&&(this.svgText_=n,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const i=re(n,"fontSize"),o=re(n,"fontWeight"),s=re(n,"fontFamily");if(this.width=Y(n,i,o,s),r=Z(r,i,o,s),this.height=r.height,!this.isLabel_){let e,n;this.width+=2*zf.TEXT_MARGIN_X,this.height+=2*zf.TEXT_MARGIN_Y,null==(e=t)||e.setAttribute("width",this.width.toString()),null==(n=t)||n.setAttribute("height",this.height.toString())}return e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString()),n.setAttribute("x",(this.width/2).toString()),n.setAttribute("y",(this.height/2-r.height/2+r.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=d(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&f(this.onMouseUpWrapper_),this.svgGroup_&&U(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(e=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};zf.TEXT_MARGIN_X=5,zf.TEXT_MARGIN_Y=2,Bt("\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n");var jf=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),new ll(t,n)}getFlyoutMetrics(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0;const t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=!!this.workspace_.getToolbox(),i=!!this.workspace_.getFlyout(!0);var o=r?t.position:n.position,s=o===eh.LEFT;return o=o===eh.TOP,r&&s?e=t.width:i&&s&&(e=n.width),s=0,r&&o?s=t.height:i&&o&&(s=n.height),{top:s,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),i=this.workspace_.getToolbox()?n.position:r.position;return this.workspace_.getToolbox()?i===eh.TOP||i===eh.BOTTOM?t.height-=n.height:i!==eh.LEFT&&i!==eh.RIGHT||(t.width-=n.width):this.workspace_.getFlyout(!0)&&(i===eh.TOP||i===eh.BOTTOM?t.height-=r.height:i!==eh.LEFT&&i!==eh.RIGHT||(t.width-=r.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const r={};return n||(r.top=e.top,r.bottom=e.top+e.height),t||(r.left=e.left,r.right=e.left+e.width),r}getPaddedContent_(e,t){const n=t.top+t.height,r=t.left+t.width,i=e.width,o=i/2,s=(e=e.height)/2;return{top:Math.min(t.top-s,n-e),bottom:Math.max(n+s,t.top+e),left:Math.min(t.left-o,r-i),right:Math.max(r+o,t.left+i)}}getScrollMetrics(e,t,n){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var r=n||this.getContentMetrics();n=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,r),r=void 0!==n.top?n.top:t.top;const i=void 0!==n.left?n.left:t.left;return{top:r/e,left:i/e,width:((void 0!==n.right?n.right:t.right)-i)/e,height:((void 0!==n.bottom?n.bottom:t.bottom)-r)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),r=this.getAbsoluteMetrics(),i=this.getViewMetrics(),o=this.getContentMetrics(),s=this.getScrollMetrics(!1,i,o);return{contentHeight:o.height,contentWidth:o.width,contentTop:o.top,contentLeft:o.left,scrollHeight:s.height,scrollWidth:s.width,scrollTop:s.top,scrollLeft:s.left,viewHeight:i.height,viewWidth:i.width,viewTop:i.top,viewLeft:i.left,absoluteTop:r.top,absoluteLeft:r.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};Me(Ml.METRICS_MANAGER,Il,jf);var Xf,Yf=class extends jf{constructor(e,t){super(e),this.flyout_=t}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,n){return t=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*n)/e,width:(t.width+t.left+n)/e,top:0,left:0}}};!function(e){e.BLOCK="block",e.BUTTON="button"}(Xf||(Xf={}));var Zf=class extends fd{constructor(e){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new nf(e),this.workspace_.setMetricsManager(new Yf(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Ve(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=D(e,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=D(zc.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Hf(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,d(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,d(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[mh.Capability.DELETE_AREA,mh.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),f(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(U(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(e){const t=e!==this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(e){const t=e!==this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()}updateDisplay_(){let e,t;e=!!this.containerVisible_&&this.isVisible(),this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none"),null==(t=this.workspace_.scrollbar)||t.setContainerVisible(e)}positionAt_(e,t,n,r){let i,o,s;if(null==(i=this.svgGroup_)||i.setAttribute("width",e.toString()),null==(o=this.svgGroup_)||o.setAttribute("height",t.toString()),this.workspace_.setCachedParentSvgSize(e,t),"svg"===(null==(s=this.svgGroup_)?void 0:s.tagName))H(this.svgGroup_,"translate("+n+"px,"+r+"px)");else{let e;null==(e=this.svgGroup_)||e.setAttribute("transform","translate("+n+","+r+")")}(e=this.workspace_.scrollbar)&&(e.setOrigin(n,r),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let e,t=0;e=this.listeners_[t];t++)f(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=Nr(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(d(this.svgBackground_,"pointerover",this,(function(){const e=this.workspace_.getTopBlocks(!1);for(let t,n=0;t=e[n];n++)t.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(e){const t=[],n=[];this.permanentlyDisabled_.length=0;const r=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let o,s=0;o=e[s];s++){if("custom"in o){var i=this.getDynamicCategoryContents_(o.custom);i=Nr(i),e.splice.apply(e,[s,1,...i]),o=e[s]}switch(o.kind.toUpperCase()){case"BLOCK":i=o;const e=this.createFlyoutBlock_(i);t.push({type:Xf.BLOCK,block:e}),this.addBlockGap_(i,n,r);break;case"SEP":this.addSeparatorGap_(o,n,r);break;case"LABEL":i=this.createButton_(o,!0),t.push({type:Xf.BUTTON,button:i}),n.push(r);break;case"BUTTON":i=this.createButton_(o,!1),t.push({type:Xf.BUTTON,button:i}),n.push(r)}}return{contents:t,gaps:n}}getDynamicCategoryContents_(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton_(e,t){return new zf(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock_(e){let t;return e.blockxml?(e="string"==typeof e.blockxml?tn(e.blockxml):e.blockxml,(t=this.getRecycledBlock_(e.getAttribute("type")))||(t=sn(e,this.workspace_))):(t=this.getRecycledBlock_(e.type),t||(void 0===e.enabled&&(e.enabled="true"!==e.disabled&&!0!==e.disabled),t=Wi(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled_.push(t),t}getRecycledBlock_(e){let t=-1;for(let n=0;n<this.recycledBlocks_.length;n++)if(this.recycledBlocks_[n].type===e){t=n;break}return-1===t?void 0:this.recycledBlocks_.splice(t,1)[0]}addBlockGap_(e,t,n){let r;e.gap?r=parseInt(e.gap.toString()):e.blockxml&&(e="string"==typeof e.blockxml?tn(e.blockxml):e.blockxml,r=parseInt(e.getAttribute("gap"))),t.push(!r||isNaN(r)?n:r)}addSeparatorGap_(e,t,n){e=parseInt(e.gap.toString()),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(n)}clearOldBlocks_(){var e=this.workspace_.getTopBlocks(!1);for(let n,r=0;n=e[r];r++)this.blockIsRecyclable_(n)?this.recycleBlock_(n):n.dispose(!1,!1);for(e=0;e<this.mats_.length;e++){const t=this.mats_[e];t&&(Nn(t),U(t))}this.mats_.length=0;for(let n,r=0;n=this.buttons_[r];r++)n.dispose();let t;this.buttons_.length=0,null==(t=this.workspace_.getPotentialVariableMap())||t.clear()}emptyRecycledBlocks_(){for(let e=0;e<this.recycledBlocks_.length;e++)this.recycledBlocks_[e].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(e){return!1}recycleBlock_(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks_.push(e)}addBlockListeners_(e,t,n){this.listeners_.push(d(e,"pointerdown",null,this.blockMouseDown_(t))),this.listeners_.push(d(n,"pointerdown",null,this.blockMouseDown_(t))),this.listeners_.push(p(e,"pointerenter",t,t.addSelect)),this.listeners_.push(p(e,"pointerleave",t,t.removeSelect)),this.listeners_.push(p(n,"pointerenter",t,t.addSelect)),this.listeners_.push(p(n,"pointerleave",t,t.removeSelect))}blockMouseDown_(e){return t=>{const n=this.targetWorkspace.getGesture(t);n&&(n.setStartBlock(e),n.handleFlyoutStart(t,this))}}onMouseDown_(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;Ze();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock_(e)}finally{qe()}if(this.targetWorkspace.hideChaff(),e=Nt(this.targetWorkspace,n),Ke()){for(et(!0),n=0;n<e.length;n++){const t=e[n];Qe(new(ot(Zl))(t))}Qe(new(ot(zl))(t))}return this.autoClose?this.hide():this.filterForCapacity_(),t}initFlyoutButton_(e,t,n){const r=e.createDom();e.moveTo(t,n),e.show(),this.listeners_.push(d(r,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(e)}createRect_(e,t,n,r,i){return(t=D(zc.RECT,{"fill-opacity":0,x:t,y:n,height:r.height,width:r.width})).tooltip=e,Dn(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats_[i]=t}moveRectToBlock_(e,t){const n=t.getHeightWidth();e.setAttribute("width",n.width.toString()),e.setAttribute("height",n.height.toString()),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",t.y.toString()),e.setAttribute("x",(this.RTL?t.x-n.width:t.x).toString())}filterForCapacity_(){const e=this.workspace_.getTopBlocks(!1);for(let t,n=0;t=e[n];n++)if(-1===this.permanentlyDisabled_.indexOf(t)){const e=this.targetWorkspace.isCapacityAvailable(R(t));for(;t;)t.setEnabled(e),t=t.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()}placeNewBlock_(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");const n=Pi(e);return t.setResizesEnabled(!1),t=Wi(n,t),this.positionNewBlock_(e,t),t}positionNewBlock_(e,t){const n=this.targetWorkspace;var r=n.getOriginOffsetInPixels(),i=this.workspace_.getOriginOffsetInPixels();(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),i=al.sum(i,e),(r=al.difference(i,r)).scale(1/n.scale),t.moveTo(new al(r.x,r.y))}};Zf.FlyoutItemType=Xf;var qf=class extends Zf{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),r=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(n.top+(n.height-r.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===eh.LEFT?e.width:n.width-this.width_:this.toolboxPosition_===eh.LEFT?0:n.width:this.toolboxPosition_===eh.LEFT?0:n.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath_(e,t){const n=this.toolboxPosition_===eh.RIGHT;var r=e+this.CORNER_RADIUS;(r=["M "+(n?r:0)+",0"]).push("h",n?-e:e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",Math.max(0,t)),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",n?e:-e),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setY(0)}wheel_(e){var t=b(e);if(t.y){const e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics();let r;t=e.getViewMetrics().top-n.top+t.y,null==(r=this.workspace_.scrollbar)||r.setY(t),fr(),ke()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const r=this.RTL?n:n+this.tabWidth_;for(let a,l=0;a=e[l];l++)if("block"===a.type){var i=a.block,o=i.getDescendants(!1);for(let t,n=0;t=o[n];n++)t.isInFlyout=!0;i.render(),o=i.getSvgRoot();const e=i.getHeightWidth();var s=i.outputConnection?r-this.tabWidth_:r;i.moveBy(s,n),s=this.createRect_(i,this.RTL?s-e.width:s,n,e,l),this.addBlockListeners_(o,i,s),n+=e.height+t[l]}else"button"===a.type&&(i=a.button,this.initFlyoutButton_(i,r,n),n+=i.height+t[l])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===eh.LEFT?new sl(-1e9,1e9,-1e9,t+e.width):new sl(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let r,i=0;r=t[i];i++){var n=r.getHeightWidth().width;r.outputConnection&&(n-=this.tabWidth_),e=Math.max(e,n)}for(let r,i=0;r=this.buttons_[i];i++)e=Math.max(e,r.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Yu.scrollbarThickness,this.width_!==e){for(let r,i=0;r=t[i];i++){if(this.RTL){n=r.getRelativeToSurfaceXY().x;let t=e/this.workspace_.scale-this.MARGIN;r.outputConnection||(t-=this.tabWidth_),r.moveBy(t-n,0)}this.rectMap_.has(r)&&this.moveRectToBlock_(this.rectMap_.get(r),r)}if(this.RTL)for(let n,r=0;n=this.buttons_[r];r++)t=n.getPosition().y,n.moveTo(e/this.workspace_.scale-n.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==eh.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};qf.registryName="verticalFlyout",Me(Ml.FLYOUTS_VERTICAL_TOOLBOX,Il,qf);var Kf=class extends Zf{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),r=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(n.left+(n.width-r.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();e=e.getToolboxMetrics();const r=this.toolboxPosition_===eh.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?r?e.height:n.height-this.height_:r?0:n.height:r?0:n.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath_(e,t){const n=this.toolboxPosition_===eh.TOP,r=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(r.push("h",e+2*this.CORNER_RADIUS),r.push("v",t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",-e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),r.push("h",e),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",t),r.push("h",-e-2*this.CORNER_RADIUS)),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setX(this.RTL?1/0:0)}wheel_(e){var t=b(e);if(t=t.x||t.y){const e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics();let r;t=e.getViewMetrics().left-n.left+t,null==(r=this.workspace_.scrollbar)||r.setX(t),fr(),ke()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let r=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(let a,l=0;a=e[l];l++)if("block"===a.type){var i=a.block,o=i.getDescendants(!1);for(let t,n=0;t=o[n];n++)t.isInFlyout=!0;i.render(),o=i.getSvgRoot();const e=i.getHeightWidth();var s=i.outputConnection?this.tabWidth_:0;s=this.RTL?r+e.width:r-s,i.moveBy(s,n),s=this.createRect_(i,s,n,e,l),r+=e.width+t[l],this.addBlockListeners_(o,i,s)}else"button"===a.type&&(i=a.button,this.initFlyoutButton_(i,r,n),r+=i.width+t[l])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===eh.TOP?new sl(-1e9,t+e.height,-1e9,1e9):new sl(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let r,i=0;r=t[i];i++)e=Math.max(e,r.getHeightWidth().height);const n=this.buttons_;for(let r,i=0;r=n[i];i++)e=Math.max(e,r.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Yu.scrollbarThickness,this.height_!==e){for(let e,n=0;e=t[n];n++)this.rectMap_.has(e)&&this.moveRectToBlock_(this.rectMap_.get(e),e);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==eh.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};Me(Ml.FLYOUTS_HORIZONTAL_TOOLBOX,Il,Kf);var Jf=class extends Qu{constructor(e,t,n,r,i){super($u.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=Jf.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new ll(0,0),e!==$u.SKIP_SETUP&&(i?this.configure_(i):this.setTypes_(n,r),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes_(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Pu;this.variable_||(e=Pt(e.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Pu;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==e.type)}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Pu;const n=e.getAttribute("id"),r=e.textContent,i=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=Pt(t.workspace,n,r,i),null!==i&&i!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Jt(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e}saveState(e){var t=this.saveLegacyState(Jf);return null!==t||(this.initModel(),t={id:this.variable_.getId()},e&&(t.name=this.variable_.name,t.type=this.variable_.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Pu;this.loadLegacyState(Jf,e)||(e=Pt(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(e){if(null===e)return null;var t=this.getSourceBlock();if(!t)throw new Pu;return(t=Lt(t.workspace,e))?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Pu;this.variable_=Lt(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed_(e){const t=this.getVariableTypes_();if(!t)return!0;for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}getVariableTypes_(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(0===(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes_(e,t){if(t=t||"",null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");{let n=!1;for(let r=0;r<e.length;r++)e[r]===t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}}this.defaultType_=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===ed)return void kt(this.sourceBlock_.workspace,this.variable_);if(e===td)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(ar(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var n=this.getVariableTypes_(),r=0;r<n.length;r++){const e=this.sourceBlock_.workspace.getVariablesOfType(n[r]);t=t.concat(e)}for(t.sort(Fc.compareByName),n=[],r=0;r<t.length;r++)n[r]=[t[r].name,t[r].getId()];return n.push([wc.RENAME_VARIABLE,ed]),wc.DELETE_VARIABLE&&n.push([wc.DELETE_VARIABLE.replace("%1",e),td]),n}};Or("field_variable",Jf);var em=class extends pf{constructor(e,t,n,r,i,o){super($u.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,e!==$u.SKIP_SETUP&&(o?this.configure_(o):this.setConstraints(t,n,r),this.setValue(e),i&&this.setValidator(i))}configure_(e){super.configure_(e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)}setConstraints(e,t,n){this.setMinInternal_(e),this.setMaxInternal_(t),this.setPrecisionInternal_(n),this.setValue(this.getValue())}setMin(e){this.setMinInternal_(e),this.setValue(this.getValue())}setMinInternal_(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal_(e),this.setValue(this.getValue())}setMaxInternal_(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())}setPrecisionInternal_(e){this.precision_=Number(e)||0;let t=String(this.precision_);-1!==t.indexOf("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const n=t.indexOf(".");this.decimalPlaces_=-1===n?e?0:null:t.length-n-1}getPrecision(){return this.precision_}doClassValidation_(e){return null===e?null:(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e)?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!==this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e))}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&wr(e,Bu.VALUEMIN,this.min_),1/0>this.max_&&wr(e,Bu.VALUEMAX,this.max_),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Or("field_number",em),em.prototype.DEFAULT_VALUE=0;var tm=class extends e.FieldTextInput$$module$build$src$core$field_textinput{constructor(e,t,n){super($u.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,e!==$u.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.maxLines&&this.setMaxLines(e.maxLines)}toXml(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e}fromXml(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))}saveState(){const e=this.saveLegacyState(tm);return null!==e?e:this.getValue()}loadState(e){this.loadLegacyState($u,e)||this.setValue(e)}initView(){this.createBorderRect_(),this.textGroup_=D(zc.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const e=this.getSourceBlock();if(!e)throw new Pu;let t=this.getText();if(!t)return $u.NBSP;const n=t.split("\n");t="";const r=this.isOverflowedY_?this.maxLines_:n.length;for(let i=0;i<r;i++){let e=n[i];e.length>this.maxDisplayLength?e=e.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&i===r-1&&(e=e.substring(0,e.length-3)+"..."),e=e.replace(/\s/g,$u.NBSP),t+=e,i!==r-1&&(t+="\n")}return e.RTL&&(t+="‏"),t}doValueUpdate_(e){super.doValueUpdate_(e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_}render_(){var e,t=this.getSourceBlock();if(!t)throw new Pu;for(;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");let n=0;for(let r=0;r<e.length;r++){const t=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;D(zc.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[r])),n+=t}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?N(e,"blocklyHtmlTextAreaInputOverflowedY"):F(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(t.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(F(t,"blocklyInvalidInput"),wr(t,Bu.INVALID,!1)):(N(t,"blocklyInvalidInput"),wr(t,Bu.INVALID,!0)))}updateSize_(){var e=this.textGroup_.childNodes;const t=this.getConstants().FIELD_TEXT_FONTSIZE,n=this.getConstants().FIELD_TEXT_FONTWEIGHT,r=this.getConstants().FIELD_TEXT_FONTFAMILY;let i=0,o=0;for(var s=0;s<e.length;s++){var a=X(e[s],t,n,r);a>i&&(i=a),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(e=this.value_.split("\n"),s=D(zc.TEXT,{class:"blocklyText blocklyMultilineText"}),a=0;a<e.length;a++){e[a].length>this.maxDisplayLength&&(e[a]=e[a].substring(0,this.maxDisplayLength)),s.textContent=e[a];const o=X(s,t,n,r);o>i&&(i=o)}i+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,i+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",i),this.borderRect_.setAttribute("height",o)),this.size_.width=i,this.size_.height=o,this.positionBorderRect_()}showEditor_(e,t){super.showEditor_(e,t),this.forceRerender()}widgetCreate_(){const t=ur(),n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var i=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=i,r.style.fontSize=i,r.style.borderRadius=e.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*n+"px",i=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;const o=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=o+"px "+i+"px "+o+"px "+i+"px",i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=i*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.setAttribute("data-untyped-default-value",this.value_),r.setAttribute("data-old-value",""),Pa?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r}setMaxLines(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(e){e.keyCode!==Uu.ENTER&&super.onHtmlInputKeyDown_(e)}static fromJson(e){return new this(ar(e.text),void 0,e)}};Bt("\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n"),Or("field_multilinetext",tm);var nm=class extends e.FieldLabel$$module$build$src$core$field_label{constructor(e,t,n){super(String(null!=e?e:""),t,n),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(ar(e.text),void 0,e)}};Or("field_label_serializable",nm);var rm=class extends $u{constructor(e,t,n){super($u.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,e!==$u.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.colourOptions&&(this.colours_=e.colourOptions),e.colourTitles&&(this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)}initView(){this.size_=new ll(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof cd&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof cd&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(e){return"string"!=typeof e?null:Jn(e)}doValueUpdate_(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof cd&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e}setColours(e,t){return this.colours_=e,t&&(this.titles_=t),this}setColumns(e){return this.columns_=e,this}showEditor_(){this.dropdownCreate_(),pe().appendChild(this.picker_),_e(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(e){null!==(e=(e=e.target)&&e.getAttribute("data-colour"))&&(this.setValue(e),Ce(this))}onKeyDown_(e){var t=!1;e.keyCode===Uu.UP?(this.moveHighlightBy_(0,-1),t=!0):e.keyCode===Uu.DOWN?(this.moveHighlightBy_(0,1),t=!0):e.keyCode===Uu.LEFT?(this.moveHighlightBy_(-1,0),t=!0):e.keyCode===Uu.RIGHT?(this.moveHighlightBy_(1,0),t=!0):e.keyCode===Uu.ENTER&&((t=this.getHighlighted_())&&null!==(t=t&&t.getAttribute("data-colour"))&&this.setValue(t),ke(),t=!0),t&&e.stopPropagation()}moveHighlightBy_(e,t){if(this.highlightedIndex_){var n=this.colours_||rm.COLOURS,r=this.columns_||rm.COLUMNS,i=this.highlightedIndex_%r,o=Math.floor(this.highlightedIndex_/r);i+=e,o+=t,0>e?0>i&&0<o?(i=r-1,o--):0>i&&(i=0):0<e?i>r-1&&o<Math.floor(n.length/r)-1?(i=0,o++):i>r-1&&i--:0>t?0>o&&(o=0):0<t&&o>Math.floor(n.length/r)-1&&(o=Math.floor(n.length/r)-1),this.setHighlightedCell_(this.picker_.childNodes[o].childNodes[i],o*r+i)}}onMouseMove_(e){const t=(e=e.target)&&Number(e.getAttribute("data-index"));null!==t&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,t)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const e=this.getHighlighted_();e&&F(e,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const e=this.columns_||rm.COLUMNS,t=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return t?t.childNodes[this.highlightedIndex_%e]:null}setHighlightedCell_(e,t){const n=this.getHighlighted_();n&&F(n,"blocklyColourHighlighted"),N(e,"blocklyColourHighlighted"),this.highlightedIndex_=t,wr(this.picker_,Bu.ACTIVEDESCENDANT,e.getAttribute("id"))}dropdownCreate_(){const e=this.columns_||rm.COLUMNS,t=this.colours_||rm.COLOURS,n=this.titles_||rm.TITLES,r=this.getValue(),i=document.createElement("table");let o;i.className="blocklyColourTable",i.tabIndex=0,i.dir="ltr",Er(i,Nu.GRID),wr(i,Bu.EXPANDED,!0),wr(i,Bu.ROWCOUNT,Math.floor(t.length/e)),wr(i,Bu.COLCOUNT,e);for(let s=0;s<t.length;s++){0==s%e&&(o=document.createElement("tr"),Er(o,Nu.ROW),i.appendChild(o));const a=document.createElement("td");o.appendChild(a),a.setAttribute("data-colour",t[s]),a.title=n[s]||t[s],a.id=Ue(),a.setAttribute("data-index",s),Er(a,Nu.GRIDCELL),wr(a,Bu.LABEL,t[s]),wr(a,Bu.SELECTED,t[s]===r),a.style.backgroundColor=t[s],t[s]===r&&(a.className="blocklyColourSelected",this.highlightedIndex_=s)}this.onClickWrapper_=d(i,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=d(i,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=d(i,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=d(i,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=d(i,"keydown",this,this.onKeyDown_),this.picker_=i}dropdownDispose_(){this.onClickWrapper_&&(f(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(f(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(f(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(f(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(f(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(e){return new this(e.colour,void 0,e)}};rm.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),rm.TITLES=[],rm.COLUMNS=7,rm.prototype.DEFAULT_VALUE=rm.COLOURS[0],Bt("\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: .5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n"),Or("field_colour",rm),e.FieldCheckbox$$module$build$src$core$field_checkbox=class extends $u{constructor(t,n,r){super($u.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=e.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,t!==$u.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)}saveState(){const t=this.saveLegacyState(e.FieldCheckbox$$module$build$src$core$field_checkbox);return null!==t?t:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();N(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(t){this.checkChar_=t||e.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return"string"==typeof e?"TRUE"===e:!!e}static fromJson(e){return new this(e.checked,void 0,e)}},e.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="✓",Or("field_checkbox",e.FieldCheckbox$$module$build$src$core$field_checkbox),e.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox$$module$build$src$core$field_checkbox;var im,om=class extends pf{constructor(e,t,n){super($u.SKIP_SETUP),this.clockwise_=om.CLOCKWISE,this.offset_=om.OFFSET,this.wrap_=om.WRAP,this.round_=om.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,e!==$u.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){switch(super.configure_(e),e.mode){case im.COMPASS:this.clockwise_=!0,this.offset_=90;break;case im.PROTRACTOR:this.clockwise_=!1,this.offset_=0}e.clockwise&&(this.clockwise_=e.clockwise),e.offset&&(this.offset_=e.offset),e.wrap&&(this.wrap_=e.wrap),e.round&&(this.round_=e.round)}initView(){super.initView(),this.symbol_=D(zc.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(e){super.showEditor_(e,Fa||La||Da),this.dropdownCreate_(),pe().appendChild(this.editor_),this.sourceBlock_ instanceof cd&&me(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),_e(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const e=D(zc.SVG,{xmlns:Ka,"xmlns:html":Ja,"xmlns:xlink":el,version:"1.1",height:2*om.HALF+"px",width:2*om.HALF+"px",style:"touch-action: none"}),t=D(zc.CIRCLE,{cx:om.HALF,cy:om.HALF,r:om.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=D(zc.PATH,{class:"blocklyAngleGauge"},e),this.line_=D(zc.LINE,{x1:om.HALF,y1:om.HALF,class:"blocklyAngleLine"},e);for(let n=0;360>n;n+=15)D(zc.LINE,{x1:om.HALF+om.RADIUS,y1:om.HALF,x2:om.HALF+om.RADIUS-(0==n%45?10:5),y2:om.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+om.HALF+","+om.HALF+")"},e);this.clickWrapper_=d(e,"click",this,this.hide_),this.clickSurfaceWrapper_=d(t,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=d(t,"pointermove",this,this.onMouseMove_,!0),this.editor_=e}dropdownDispose_(){this.clickWrapper_&&(f(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(f(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(f(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){Ce(this),fr()}onMouseMove_(e){var t=this.gauge_.ownerSVGElement.getBoundingClientRect();const n=e.clientX-t.left-om.HALF;e=e.clientY-t.top-om.HALF,t=Math.atan(-e/n),isNaN(t)||(t=K(t),0>n?t+=180:0<e&&(t+=360),t=this.clockwise_?this.offset_+360-t:360-(this.offset_-t),this.displayMouseOrKeyboardValue_(t))}displayMouseOrKeyboardValue_(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!==this.value_&&this.setEditorValue_(e)}updateGraph_(){if(this.gauge_){var e=Number(this.getText())+this.offset_,t=q(e%360);e=["M ",om.HALF,",",om.HALF];var n=om.HALF,r=om.HALF;if(!isNaN(t)){const i=Number(this.clockwise_),o=q(this.offset_),s=Math.cos(o)*om.RADIUS,a=Math.sin(o)*-om.RADIUS;i&&(t=2*o-t),n+=Math.cos(t)*om.RADIUS,r-=Math.sin(t)*om.RADIUS,t=Math.abs(Math.floor((t-o)/Math.PI)%2),i&&(t=1-t),e.push(" l ",s,",",a," A ",om.RADIUS,",",om.RADIUS," 0 ",t," ",i," ",n,",",r," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",n),this.line_.setAttribute("y2",r)}}onHtmlInputKeyDown_(e){super.onHtmlInputKeyDown_(e);var t=this.getSourceBlock();if(!t)throw new Pu;let n;e.keyCode===Uu.LEFT?n=t.RTL?1:-1:e.keyCode===Uu.RIGHT?n=t.RTL?-1:1:e.keyCode===Uu.DOWN?n=-1:e.keyCode===Uu.UP&&(n=1),n&&(t=this.getValue(),this.displayMouseOrKeyboardValue_(t+n*this.round_),e.preventDefault(),e.stopPropagation())}doClassValidation_(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)}wrapValue_(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e}static fromJson(e){return new this(e.angle,void 0,e)}};om.ROUND=15,om.HALF=50,om.CLOCKWISE=!1,om.OFFSET=0,om.WRAP=360,om.RADIUS=om.HALF-1,Bt("\n.blocklyAngleCircle {\n  stroke: #444;\n  stroke-width: 1;\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyAngleMarks {\n  stroke: #444;\n  stroke-width: 1;\n}\n\n.blocklyAngleGauge {\n  fill: #f88;\n  fill-opacity: .8;\n  pointer-events: none;\n}\n\n.blocklyAngleLine {\n  stroke: #f00;\n  stroke-width: 2;\n  stroke-linecap: round;\n  pointer-events: none;\n}\n"),Or("field_angle",om),om.prototype.DEFAULT_VALUE=0,function(e){e.COMPASS="compass",e.PROTRACTOR="protractor"}(im||(im={}));var sm=class extends tu{constructor(e){super(e),this.type=Yl,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(e.recordUndo=this.recordUndo),e}fromJson(e){if(t("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldParentId=e.oldParentId,this.oldInputName=e.oldInputName,e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate=new al(Number(n[0]),Number(n[1]))}this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate=new al(Number(n[0]),Number(n[1]))),void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new sm)).oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(n=e.oldCoordinate.split(","),t.oldCoordinate=new al(Number(n[0]),Number(n[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),t.newCoordinate=new al(Number(n[0]),Number(n[1]))),void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&al.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=t.getBlockById(this.blockId);if(n){var r=e?this.newParentId:this.oldParentId,i=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,r){var o=t.getBlockById(r);if(!o)return void console.warn("Can't connect to non-existent block: "+r)}if(n.getParent()&&n.unplug(),e)i=n.getRelativeToSurfaceXY(),n.moveBy(e.x-i.x,e.y-i.y);else{let e;(!(t=n.outputConnection)||n.previousConnection&&n.previousConnection.isConnected())&&(t=n.previousConnection),n=t.type,i?(n=o.getInput(i))&&(e=n.connection):n===Rh.PREVIOUS_STATEMENT&&(e=o.nextConnection),e?t.connect(e):console.warn("Can't connect to non-existent input: "+i)}}else console.warn("Can't move non-existent block: "+this.blockId)}};Me(Ml.EVENT,Yl,sm);var am=class extends $c{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=Je(),this.recordUndo=He())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}fromJson(e){t("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.commentId=e.commentId}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new am)).commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){var n=e.getEventWorkspace_();if(t){if(t=ut("xml"),!e.xml)throw Error("Ecountered a comment event without proper xml");t.appendChild(e.xml),rn(t,n)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(e.commentId))?n.dispose():console.warn("Can't uncreate non-existent comment: "+e.commentId)}}},lm=class extends am{constructor(e,t,n){super(e),this.type=hc,e&&(this.oldContents_=void 0===t?"":t,this.newContents_=void 0===n?"":n)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}fromJson(e){t("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.oldContents_=e.oldContents,this.newContents_=e.newContents}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new lm)).oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var n=e?this.newContents_:this.oldContents_;if(!n){if(e)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson")}t.setContent(n)}else console.warn("Can't change non-existent comment: "+this.commentId)}};Me(Ml.EVENT,hc,lm);var cm=class extends am{constructor(e){super(e),this.type=cc,e&&(this.xml=e.toXmlWithXY())}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=Jt(this.xml),e}fromJson(e){t("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.xml=tn(e.xml)}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new cm)).xml=tn(e.xml),t}run(e){am.CommentCreateDeleteHelper(this,e)}};Me(Ml.EVENT,cc,cm);var um=class extends am{constructor(e){super(e),this.type=uc,e&&(this.xml=e.toXmlWithXY())}run(e){am.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=Jt(this.xml),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new um)).xml=tn(e.xml),t}};Me(Ml.EVENT,uc,um);var hm=class extends am{constructor(e){super(e),this.type=dc,e&&(this.comment_=e,this.oldCoordinate_=e.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}fromJson(e){t("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e);let n=e.oldCoordinate.split(",");this.oldCoordinate_=new al(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),this.newCoordinate_=new al(Number(n[0]),Number(n[1]))}static fromJson(e,t,n){return t=super.fromJson(e,t,null!=n?n:new hm),n=e.oldCoordinate.split(","),t.oldCoordinate_=new al(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),t.newCoordinate_=new al(Number(n[0]),Number(n[1])),t}isNull(){return al.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(!(e=e?this.newCoordinate_:this.oldCoordinate_))throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var n=t.getXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};Me(Ml.EVENT,dc,hm);var dm=class extends $c{constructor(e,t){super(),this.model=t,this.isBlank=!1,this.workspaceId=e.id}toJson(){const e=super.toJson();return e.procedureId=this.model.getId(),e}},pm=class extends dm{constructor(e,t,n){super(e,t),this.oldTypes=n,this.type=bc,this.newTypes=t.getReturnTypes()}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!t)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");e?t.setReturnTypes(this.newTypes):t.setReturnTypes(this.oldTypes)}toJson(){const e=super.toJson();return e.oldTypes=this.oldTypes,e}static fromJson(e,t){const n=t.getProcedureMap().get(e.procedureId);if(!n)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new pm(t,n,e.oldTypes)}};Me(Ml.EVENT,bc,pm);var fm=class extends dm{constructor(e,t){super(e,t),this.type=fc}run(e){const t=this.getEventWorkspace_(),n=t.getProcedureMap(),r=n.get(this.model.getId());e?r||n.add(new ip(t,this.model.getName(),this.model.getId())):r&&n.delete(this.model.getId())}toJson(){const e=super.toJson();return e.model=ys(this.model),e}static fromJson(e,t){return new fm(t,Ss(ip,op,e.model,t))}};Me(Ml.EVENT,fc,fm);var mm=class extends dm{constructor(e,t){super(e,t),this.type=mc}run(e){const t=this.getEventWorkspace_(),n=t.getProcedureMap(),r=n.get(this.model.getId());e?r&&n.delete(this.model.getId()):r||n.add(new ip(t,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(e,t){if(!(e=t.getProcedureMap().get(e.procedureId)))throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new mm(t,e)}};Me(Ml.EVENT,mc,mm);var gm=class extends dm{constructor(e,t){super(e,t),this.type=_c,this.oldState=!t.getEnabled(),this.newState=t.getEnabled()}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!t)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");e?t.setEnabled(this.newState):t.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(e,t){if(!(e=t.getProcedureMap().get(e.procedureId)))throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new gm(t,e)}};Me(Ml.EVENT,_c,gm);var _m=class extends dm{constructor(e,t,n){super(e,t),this.oldName=n,this.type=gc,this.newName=t.getName()}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!t)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");e?t.setName(this.newName):t.setName(this.oldName)}toJson(){const e=super.toJson();return e.oldName=this.oldName,e}static fromJson(e,t){const n=t.getProcedureMap().get(e.procedureId);if(!n)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new _m(t,n,e.oldName)}};Me(Ml.EVENT,gc,_m);var bm=class extends dm{constructor(e,t,n){super(e,t),this.parameter=n}toJson(){const e=super.toJson();return e.parameterId=this.model.getId(),e}},vm=class extends bm{constructor(e,t,n,r){super(e,t,n),this.index=r,this.type=vc}run(e){const t=this.getEventWorkspace_(),n=t.getProcedureMap().get(this.model.getId());if(!n)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const r=n.getParameter(this.index);e?this.parameterMatches(r)||n.insertParameter(new op(t,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(r)&&n.deleteParameter(this.index)}parameterMatches(e){return e&&e.getId()===this.parameter.getId()}toJson(){const e=super.toJson();return e.parameter=Os(this.parameter),e.index=this.index,e}static fromJson(e,t){const n=t.getProcedureMap().get(e.procedureId);if(!n)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new vm(t,n,Ts(op,e.parameter,t),e.index)}};Me(Ml.EVENT,vc,vm);var ym=class extends bm{constructor(e,t,n,r){super(e,t,n),this.index=r,this.type=yc}run(e){const t=this.getEventWorkspace_(),n=t.getProcedureMap().get(this.model.getId());if(!n)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const r=n.getParameter(this.index);e?this.parameterMatches(r)&&n.deleteParameter(this.index):this.parameterMatches(r)||n.insertParameter(new op(t,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(e){return e&&e.getId()===this.parameter.getId()}toJson(){const e=super.toJson();return e.index=this.index,e}static fromJson(e,t){const n=t.getProcedureMap().get(e.procedureId);if(!n)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const r=n.getParameter(e.index);return new ym(t,n,r,e.index)}};Me(Ml.EVENT,yc,ym);var Om=class extends bm{constructor(e,t,n,r){super(e,t,n),this.oldName=r,this.type=Oc,this.newName=n.getName()}run(e){const t=Ls(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!t)throw Error("Cannot rename a parameter that does not exist in the procedure map");e?t.setName(this.newName):t.setName(this.oldName)}toJson(){const e=super.toJson();return e.oldName=this.oldName,e}static fromJson(e,t){const n=t.getProcedureMap().get(e.procedureId);if(!n)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const r=Ls(t,e.procedureId,e.parameterId);if(!r)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new Om(t,n,r,e.oldName)}};Me(Ml.EVENT,Oc,Om);var Sm=class extends Uc{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=ec,e&&(this.blockId=e.id,this.isStart=t,this.blocks=n)}toJson(){const e=super.toJson();if(void 0===this.isStart)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(void 0===this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}fromJson(e){t("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Sm)).isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};Me(Ml.EVENT,ec,Sm);var Tm=class extends Uc{constructor(e,t,n,r){super(e?e.workspace.id:void 0),this.type=Jl,this.blockId=e?e.id:null,this.element=void 0===t?"":t,this.oldValue=void 0===n?"":n,this.newValue=void 0===r?"":r}toJson(){const e=super.toJson();return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e}fromJson(e){super.fromJson(e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId}};Me(Ml.EVENT,Jl,Tm);var xm=class extends $c{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=pc,this.isBlank=!!e,e&&(this.workspaceId=e.id)}toJson(){const e=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return e.workspaceId=this.workspaceId,e}fromJson(e){super.fromJson(e),this.workspaceId=e.workspaceId}};Me(Ml.EVENT,pc,xm),e.module$build$src$core$events$events={},e.module$build$src$core$events$events.Abstract=$c,e.module$build$src$core$events$events.BLOCK_CHANGE=Xl,e.module$build$src$core$events$events.BLOCK_CREATE=zl,e.module$build$src$core$events$events.BLOCK_DELETE=jl,e.module$build$src$core$events$events.BLOCK_DRAG=ec,e.module$build$src$core$events$events.BLOCK_MOVE=Yl,e.module$build$src$core$events$events.BUBBLE_OPEN=ic,e.module$build$src$core$events$events.BUMP_EVENTS=Sc,e.module$build$src$core$events$events.BlockBase=tu,e.module$build$src$core$events$events.BlockChange=nu,e.module$build$src$core$events$events.BlockCreate=kh,e.module$build$src$core$events$events.BlockDelete=Ih,e.module$build$src$core$events$events.BlockDrag=Sm,e.module$build$src$core$events$events.BlockMove=sm,e.module$build$src$core$events$events.BubbleOpen=Xu,e.module$build$src$core$events$events.BubbleType=ju,e.module$build$src$core$events$events.CHANGE=Xl,e.module$build$src$core$events$events.CLICK=nc,e.module$build$src$core$events$events.COMMENT_CHANGE=hc,e.module$build$src$core$events$events.COMMENT_CREATE=cc,e.module$build$src$core$events$events.COMMENT_DELETE=uc,e.module$build$src$core$events$events.COMMENT_MOVE=dc,e.module$build$src$core$events$events.CREATE=zl,e.module$build$src$core$events$events.Click=Ud,e.module$build$src$core$events$events.ClickTarget=Gd,e.module$build$src$core$events$events.CommentBase=am,e.module$build$src$core$events$events.CommentChange=lm,e.module$build$src$core$events$events.CommentCreate=cm,e.module$build$src$core$events$events.CommentDelete=um,e.module$build$src$core$events$events.CommentMove=hm,e.module$build$src$core$events$events.DELETE=jl,e.module$build$src$core$events$events.FINISHED_LOADING=pc,e.module$build$src$core$events$events.FinishedLoading=xm,e.module$build$src$core$events$events.MARKER_MOVE=rc,e.module$build$src$core$events$events.MOVE=Yl,e.module$build$src$core$events$events.MarkerMove=Pp,e.module$build$src$core$events$events.ProcedureBase=dm,e.module$build$src$core$events$events.ProcedureChangeReturn=pm,e.module$build$src$core$events$events.ProcedureCreate=fm,e.module$build$src$core$events$events.ProcedureDelete=mm,e.module$build$src$core$events$events.ProcedureEnable=gm,e.module$build$src$core$events$events.ProcedureParameterBase=bm,e.module$build$src$core$events$events.ProcedureParameterCreate=vm,e.module$build$src$core$events$events.ProcedureParameterDelete=ym,e.module$build$src$core$events$events.ProcedureParameterRename=Om,e.module$build$src$core$events$events.ProcedureRename=_m,e.module$build$src$core$events$events.SELECTED=tc,e.module$build$src$core$events$events.Selected=Vc,e.module$build$src$core$events$events.THEME_CHANGE=ac,e.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=sc,e.module$build$src$core$events$events.TRASHCAN_OPEN=oc,e.module$build$src$core$events$events.ThemeChange=Zd,e.module$build$src$core$events$events.ToolboxItemSelect=Md,e.module$build$src$core$events$events.TrashcanOpen=ph,e.module$build$src$core$events$events.UI=Jl,e.module$build$src$core$events$events.Ui=Tm,e.module$build$src$core$events$events.UiBase=Uc,e.module$build$src$core$events$events.VAR_CREATE=Zl,e.module$build$src$core$events$events.VAR_DELETE=ql,e.module$build$src$core$events$events.VAR_RENAME=Kl,e.module$build$src$core$events$events.VIEWPORT_CHANGE=lc,e.module$build$src$core$events$events.VarBase=Pc,e.module$build$src$core$events$events.VarCreate=Lc,e.module$build$src$core$events$events.VarDelete=Xp,e.module$build$src$core$events$events.VarRename=Yp,e.module$build$src$core$events$events.ViewportChange=qd,e.module$build$src$core$events$events.clearPendingUndo=Ye,e.module$build$src$core$events$events.disable=Ze,e.module$build$src$core$events$events.disableOrphans=st,e.module$build$src$core$events$events.enable=qe,e.module$build$src$core$events$events.filter=Xe,e.module$build$src$core$events$events.fire=Qe,e.module$build$src$core$events$events.fromJson=rt,e.module$build$src$core$events$events.get=ot,e.module$build$src$core$events$events.getDescendantIds=nt,e.module$build$src$core$events$events.getGroup=Je,e.module$build$src$core$events$events.getRecordUndo=He,e.module$build$src$core$events$events.isEnabled=Ke,e.module$build$src$core$events$events.setGroup=et,e.module$build$src$core$events$events.setRecordUndo=We,ta();var Em={};Em.registerCleanup=Bs,Em.registerCollapse=Gs,Em.registerCollapseExpandBlock=Zs,Em.registerComment=Xs,Em.registerDefaultOptions=ta,Em.registerDelete=Ks,Em.registerDeleteAll=Qs,Em.registerDisable=qs,Em.registerDuplicate=js,Em.registerExpand=Us,Em.registerHelp=Js,Em.registerInline=Ys,Em.registerRedo=Ns,Em.registerUndo=Ds;var wm=class{constructor(e,t){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=e,this.draggedConnectionManager_=new Up(this.draggingBlock_),this.workspace_=t,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=na(e)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(e,t){Je()||et(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Q(),this.workspace_.setResizesEnabled(!1),po(),this.shouldDisconnect_(t)&&this.disconnectBlock_(t,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(e,t){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(t),e=al.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),uo(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const e=new(ot(ec))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));Qe(e)}drag(e,t){t=this.pixelsToWorkspaceUnits_(t);var n=al.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(t),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(t,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,e!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(e,t){this.drag(e,t),this.dragIconData_=[],this.fireDragEndEvent_(),z(),po(),e=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?t=this.startXY_:(e=(t=this.getNewLocationAfterDrag_(t)).delta,t=t.newLocation),this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),e?this.updateBlockAfterMove_(e):xs(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),et(!1)}getNewLocationAfterDrag_(e){return{delta:e=this.pixelsToWorkspaceUnits_(e),newLocation:al.sum(this.startXY_,e)}}maybeDeleteBlock_(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Xa.length=0,!0)}updateBlockAfterMove_(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const e=new(ot(ec))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));Qe(e)}updateToolboxStyle_(e){const t=this.workspace_.getToolbox();if(t){const n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof t.removeStyle?t.removeStyle(n):e||"function"!=typeof t.addStyle||t.addStyle(n)}}fireMoveEvent_(){const e=new(ot(Yl))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),Qe(e)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(e){return e=new al(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e}dragIcons_(e){for(let t=0;t<this.dragIconData_.length;t++){const n=this.dragIconData_[t];n.icon.setIconLocation(al.sum(n.location,e))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};Me(Ml.BLOCK_DRAGGER,Il,wm);var Cm="9.2.1",Am=e.Align$$module$build$src$core$input.LEFT,km=e.Align$$module$build$src$core$input.CENTRE,Rm=e.Align$$module$build$src$core$input.RIGHT,Im=Rh.INPUT_VALUE,Mm=Rh.OUTPUT_VALUE,$m=Rh.NEXT_STATEMENT,Pm=Rh.PREVIOUS_STATEMENT,Lm=Bl.DUMMY,Dm=eh.TOP,Nm=eh.BOTTOM,Bm=eh.LEFT,Fm=eh.RIGHT;qp.prototype.newBlock=function(e,t){return new Fh(this,e,t)},nf.prototype.newBlock=function(e,t){return new cd(this,e,t)},nf.newTrashcan=function(e){return new _d(e)},eu.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(Ro(this)),t.push(ko(this))),Oo(e,t,this.RTL)}},e.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(e){return new nf(e)},ep.prototype.populateProcedures=function(e){e=(e=zo(e))[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],ep.NameType.PROCEDURE)};var Gm=Rh,Um={};return Um.ALIGN_CENTRE=km,Um.ALIGN_LEFT=Am,Um.ALIGN_RIGHT=Rm,Um.ASTNode=Bh,Um.BasicCursor=id,Um.Block=Fh,Um.BlockDragSurfaceSvg=Vf,Um.BlockDragger=wm,Um.BlockSvg=cd,Um.Blocks=Za,Um.Bubble=qu,Um.BubbleDragger=Wd,Um.COLLAPSED_FIELD_NAME=Ph,Um.COLLAPSED_INPUT_NAME=$h,Um.COLLAPSE_CHARS=qh,Um.CodeGenerator=e.CodeGenerator$$module$build$src$core$generator,Um.CollapsibleToolboxCategory=Dd,Um.Comment=Wh,Um.ComponentManager=mh,Um.Connection=Mh,Um.ConnectionChecker=jp,Um.ConnectionDB=Kd,Um.ConnectionType=Rh,Um.ContextMenu=e.module$build$src$core$contextmenu,Um.ContextMenuItems=Em,Um.ContextMenuRegistry=Zh,Um.Css=Qc,Um.Cursor=rd,Um.DELETE_VARIABLE_ID=td,Um.DRAG_STACK=Kh,Um.DUMMY_INPUT=Lm,Um.DeleteArea=fd,Um.DragTarget=pd,Um.DropDownDiv=Cl,Um.Events=e.module$build$src$core$events$events,Um.Extensions=e.module$build$src$core$extensions,Um.Field=$u,Um.FieldAngle=om,Um.FieldCheckbox=e.FieldCheckbox$$module$build$src$core$field_checkbox,Um.FieldColour=rm,Um.FieldDropdown=Qu,Um.FieldImage=e.FieldImage$$module$build$src$core$field_image,Um.FieldLabel=e.FieldLabel$$module$build$src$core$field_label,Um.FieldLabelSerializable=nm,Um.FieldMultilineInput=tm,Um.FieldNumber=em,Um.FieldTextInput=e.FieldTextInput$$module$build$src$core$field_textinput,Um.FieldVariable=Jf,Um.Flyout=Zf,Um.FlyoutButton=zf,Um.FlyoutMetricsManager=Yf,Um.Generator=e.CodeGenerator$$module$build$src$core$generator,Um.Gesture=jd,Um.Grid=Jd,Um.HorizontalFlyout=Kf,Um.INPUT_VALUE=Im,Um.Icon=Ku,Um.Input=Nh,Um.InsertionMarkerManager=Up,Um.Marker=nd,Um.MarkerManager=ru,Um.Menu=Wu,Um.MenuItem=Hu,Um.MetricsManager=jf,Um.Msg=wc,Um.Mutator=e.Mutator$$module$build$src$core$mutator,Um.NEXT_STATEMENT=$m,Um.Names=ep,Um.OPPOSITE_TYPE=Jh,Um.OUTPUT_VALUE=Mm,Um.Options=ah,Um.PREVIOUS_STATEMENT=Pm,Um.PROCEDURE_CATEGORY_NAME=tp,Um.Procedures=e.module$build$src$core$procedures,Um.RENAME_VARIABLE_ID=ed,Um.RenderedConnection=ad,Um.Scrollbar=Yu,Um.ScrollbarPair=Hf,Um.ShortcutItems=Yd,Um.ShortcutRegistry=Xd,Um.TOOLBOX_AT_BOTTOM=Nm,Um.TOOLBOX_AT_LEFT=Bm,Um.TOOLBOX_AT_RIGHT=Fm,Um.TOOLBOX_AT_TOP=Dm,Um.TabNavigateCursor=od,Um.Theme=th,Um.ThemeManager=Hp,Um.Themes=Fd,Um.Toolbox=Nd,Um.ToolboxCategory=Pd,Um.ToolboxItem=$d,Um.ToolboxSeparator=Ld,Um.Tooltip=yu,Um.Touch=Ia,Um.TouchGesture=jd,Um.Trashcan=_d,Um.VARIABLE_CATEGORY_NAME=Dc,Um.VARIABLE_DYNAMIC_CATEGORY_NAME=Qp,Um.VERSION=Cm,Um.VariableMap=Zp,Um.VariableModel=Fc,Um.Variables=e.module$build$src$core$variables,Um.VariablesDynamic=zp,Um.VerticalFlyout=qf,Um.Warning=ld,Um.WidgetDiv=Mu,Um.Workspace=qp,Um.WorkspaceAudio=Jp,Um.WorkspaceComment=Gc,Um.WorkspaceCommentSvg=eu,Um.WorkspaceDragSurfaceSvg=Uf,Um.WorkspaceDragger=Hd,Um.WorkspaceSvg=nf,Um.Xml=e.module$build$src$core$xml,Um.ZoomControls=ef,Um.bindEventWithChecks_=da,Um.bindEvent_=ua,Um.blockAnimations=Vh,Um.blockRendering=Wp,Um.browserEvents=Wa,Um.bumpObjects=Wf,Um.clipboard=Yh,Um.common=e.module$build$src$core$common,Um.config=e.config$$module$build$src$core$config,Um.connectionTypes=Gm,Um.constants=Lh,Um.copy=oa,Um.defineBlocksWithJsonArray=M,Um.dialog=Mc,Um.duplicate=aa,Um.fieldRegistry=Du,Um.geras=Gf,Um.getMainWorkspace=T,Um.getSelected=E,Um.hideChaff=ra,Um.hueToHex=ca,Um.inject=As,Um.inputTypes=Bl,Um.isNumber=la,Um.minimalist=Rf,Um.paste=sa,Um.procedures=e.module$build$src$core$procedures,Um.registry=$l,Um.resizeSvgContents=ia,Um.serialization=uf,Um.setLocale=Cc,Um.setParentContainer=A,Um.svgResize=k,Um.thrasos=Ef,Um.uiPosition=md,Um.unbindEvent_=ha,Um.utils=dh,Um.zelos=Sf,e.module$build$src$core$contextmenu,e.module$build$src$core$events$events,e.module$build$src$core$msg,e.module$build$src$core$common,Object.defineProperties(Um,{alert:{set:function(e){ma.warn("Blockly.alert","December 2021","December 2022"),Mc.setAlert(e)},get:function(){return ma.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),Mc.alert}},confirm:{set:function(e){ma.warn("Blockly.confirm","December 2021","December 2022"),Mc.setConfirm(e)},get:function(){return ma.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),Mc.confirm}},mainWorkspace:{set:function(t){ma.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),e.module$build$src$core$common.setMainWorkspace(t)},get:function(){return ma.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),e.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(e){ma.warn("Blockly.prompt","December 2021","December 2022"),Mc.setPrompt(e)},get:function(){return ma.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),Mc.prompt}},selected:{get:function(){return ma.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),e.module$build$src$core$common.getSelected()},set:function(t){ma.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),e.module$build$src$core$common.setSelected(t)}},HSV_SATURATION:{get:function(){return xu.getHsvSaturation()},set:function(e){xu.setHsvSaturation(e)}},HSV_VALUE:{get:function(){return xu.getHsvValue()},set:function(e){xu.setHsvValue(e)}}}),Object.defineProperties(e.module$build$src$core$contextmenu,{currentBlock:{get:function(){return ma.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),e.module$build$src$core$contextmenu.getCurrentBlock()},set:function(t){ma.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),e.module$build$src$core$contextmenu.setCurrentBlock(t)}}}),Object.defineProperties(e.module$build$src$core$events$events,{recordUndo:{get:function(){return ma.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),Ec.getRecordUndo()},set:function(e){ma.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),Ec.setRecordUndo(e)}}}),Object.defineProperties(yu,{visible:{get:function(){return ma.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),yu.isVisible()}},DIV:{get:function(){return ma.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),yu.getDiv()}}}),Object.defineProperties(Mu,{DIV:{get:function(){return ma.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),Mu.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:e.module$build$src$core$msg}),Um.__namespace__=e,Um}()),blockly_compressed.exports}function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,blockly$1.exports=requireBlockly_compressed()),blockly$1.exports}function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,coreBrowser.exports=requireBlockly()),coreBrowser.exports}var python_compressed={exports:{}},hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,python_compressed.exports=function(e){var t=e.__namespace__,n={};t.module$build$src$core$utils$string,t.module$build$src$core$variables,t.CodeGenerator$$module$build$src$core$generator,t.module$build$src$core$input_types.inputTypes,t.module$build$src$core$names.Names,t.NameType$$module$build$src$core$names,n.pythonGenerator=new t.CodeGenerator$$module$build$src$core$generator("Python"),n.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),n.pythonGenerator.ORDER_ATOMIC=0,n.pythonGenerator.ORDER_COLLECTION=1,n.pythonGenerator.ORDER_STRING_CONVERSION=1,n.pythonGenerator.ORDER_MEMBER=2.1,n.pythonGenerator.ORDER_FUNCTION_CALL=2.2,n.pythonGenerator.ORDER_EXPONENTIATION=3,n.pythonGenerator.ORDER_UNARY_SIGN=4,n.pythonGenerator.ORDER_BITWISE_NOT=4,n.pythonGenerator.ORDER_MULTIPLICATIVE=5,n.pythonGenerator.ORDER_ADDITIVE=6,n.pythonGenerator.ORDER_BITWISE_SHIFT=7,n.pythonGenerator.ORDER_BITWISE_AND=8,n.pythonGenerator.ORDER_BITWISE_XOR=9,n.pythonGenerator.ORDER_BITWISE_OR=10,n.pythonGenerator.ORDER_RELATIONAL=11,n.pythonGenerator.ORDER_LOGICAL_NOT=12,n.pythonGenerator.ORDER_LOGICAL_AND=13,n.pythonGenerator.ORDER_LOGICAL_OR=14,n.pythonGenerator.ORDER_CONDITIONAL=15,n.pythonGenerator.ORDER_LAMBDA=16,n.pythonGenerator.ORDER_NONE=99,n.pythonGenerator.ORDER_OVERRIDES=[[n.pythonGenerator.ORDER_FUNCTION_CALL,n.pythonGenerator.ORDER_MEMBER],[n.pythonGenerator.ORDER_FUNCTION_CALL,n.pythonGenerator.ORDER_FUNCTION_CALL],[n.pythonGenerator.ORDER_MEMBER,n.pythonGenerator.ORDER_MEMBER],[n.pythonGenerator.ORDER_MEMBER,n.pythonGenerator.ORDER_FUNCTION_CALL],[n.pythonGenerator.ORDER_LOGICAL_NOT,n.pythonGenerator.ORDER_LOGICAL_NOT],[n.pythonGenerator.ORDER_LOGICAL_AND,n.pythonGenerator.ORDER_LOGICAL_AND],[n.pythonGenerator.ORDER_LOGICAL_OR,n.pythonGenerator.ORDER_LOGICAL_OR]],n.pythonGenerator.isInitialized=!1,n.pythonGenerator.init=function(e){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+"pass\n",this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const n=[];var r=t.module$build$src$core$variables.allDeveloperVariables(e);for(let i=0;i<r.length;i++)n.push(this.nameDB_.getName(r[i],t.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(e=t.module$build$src$core$variables.allUsedVarModels(e),r=0;r<e.length;r++)n.push(this.nameDB_.getName(e[r].getId(),t.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=n.join("\n"),this.isInitialized=!0},n.pythonGenerator.finish=function(e){const t=[],n=[];for(let r in this.definitions_){const e=this.definitions_[r];e.match(/^(from\s+\S+\s+)?import\s+\S+/)?t.push(e):n.push(e)}return e=Object.getPrototypeOf(this).finish.call(this,e),this.isInitialized=!1,this.nameDB_.reset(),(t.join("\n")+"\n\n"+n.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+e},n.pythonGenerator.scrubNakedValue=function(e){return e+"\n"},n.pythonGenerator.quote_=function(e){let t="'";return-1!==(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===e.indexOf('"')?t='"':e=e.replace(/'/g,"\\'")),t+e+t},n.pythonGenerator.multiline_quote_=function(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")},n.pythonGenerator.scrub_=function(e,n,r){let i="";if(!e.outputConnection||!e.outputConnection.targetConnection){var o=e.getCommentText();o&&(o=t.module$build$src$core$utils$string.wrap(o,this.COMMENT_WRAP-3),i+=this.prefixLines(o+"\n","# "));for(let n=0;n<e.inputList.length;n++)e.inputList[n].type===t.module$build$src$core$input_types.inputTypes.VALUE&&(o=e.inputList[n].connection.targetBlock())&&(o=this.allNestedComments(o))&&(i+=this.prefixLines(o,"# "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),i+n+(r=r?"":this.blockToCode(e))},n.pythonGenerator.getAdjustedInt=function(e,n,r,i){r=r||0,e.workspace.options.oneBasedIndex&&r--;const o=e.workspace.options.oneBasedIndex?"1":"0";return e=this.valueToCode(e,n,r?this.ORDER_ADDITIVE:this.ORDER_NONE)||o,t.module$build$src$core$utils$string.isNumber(e)?(e=parseInt(e,10)+r,i&&(e=-e)):(e=0<r?"int("+e+" + "+r+")":0>r?"int("+e+" - "+-r+")":"int("+e+")",i&&(e="-"+e)),e},t.NameType$$module$build$src$core$names,n.pythonGenerator.variables_get=function(e){return[n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.variables_set=function(e){const r=n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"0";return n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE)+" = "+r+"\n"},n.pythonGenerator.variables_get_dynamic=n.pythonGenerator.variables_get,n.pythonGenerator.variables_set_dynamic=n.pythonGenerator.variables_set,t.module$build$src$core$utils$string,t.NameType$$module$build$src$core$names,n.pythonGenerator.text=function(e){return[n.pythonGenerator.quote_(e.getFieldValue("TEXT")),n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.text_multiline=function(e){const t=-1!==(e=n.pythonGenerator.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?n.pythonGenerator.ORDER_ADDITIVE:n.pythonGenerator.ORDER_ATOMIC;return[e,t]};var r=/^\s*'([^']|\\')*'\s*$/,i=function(e){return r.test(e)?[e,n.pythonGenerator.ORDER_ATOMIC]:["str("+e+")",n.pythonGenerator.ORDER_FUNCTION_CALL]};return n.pythonGenerator.text_join=function(e){switch(e.itemCount_){case 0:return["''",n.pythonGenerator.ORDER_ATOMIC];case 1:return e=n.pythonGenerator.valueToCode(e,"ADD0",n.pythonGenerator.ORDER_NONE)||"''",i(e);case 2:var r=n.pythonGenerator.valueToCode(e,"ADD0",n.pythonGenerator.ORDER_NONE)||"''";return e=n.pythonGenerator.valueToCode(e,"ADD1",n.pythonGenerator.ORDER_NONE)||"''",[i(r)[0]+" + "+i(e)[0],n.pythonGenerator.ORDER_ADDITIVE];default:r=[];for(let t=0;t<e.itemCount_;t++)r[t]=n.pythonGenerator.valueToCode(e,"ADD"+t,n.pythonGenerator.ORDER_NONE)||"''";return["''.join([str("+(e=n.pythonGenerator.nameDB_.getDistinctName("x",t.NameType$$module$build$src$core$names.VARIABLE))+") for "+e+" in ["+r.join(", ")+"]])",n.pythonGenerator.ORDER_FUNCTION_CALL]}},n.pythonGenerator.text_append=function(e){const r=n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);return e=n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_NONE)||"''",r+" = str("+r+") + "+i(e)[0]+"\n"},n.pythonGenerator.text_length=function(e){return["len("+(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"''")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_isEmpty=function(e){return["not len("+(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"''")+")",n.pythonGenerator.ORDER_LOGICAL_NOT]},n.pythonGenerator.text_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"find":"rfind";const r=n.pythonGenerator.valueToCode(e,"FIND",n.pythonGenerator.ORDER_NONE)||"''";return t=(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_MEMBER)||"''")+"."+t+"("+r+")",e.workspace.options.oneBasedIndex?[t+" + 1",n.pythonGenerator.ORDER_ADDITIVE]:[t,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_charAt=function(e){const t=e.getFieldValue("WHERE")||"FROM_START",r=n.pythonGenerator.valueToCode(e,"VALUE","RANDOM"===t?n.pythonGenerator.ORDER_NONE:n.pythonGenerator.ORDER_MEMBER)||"''";switch(t){case"FIRST":return[r+"[0]",n.pythonGenerator.ORDER_MEMBER];case"LAST":return[r+"[-1]",n.pythonGenerator.ORDER_MEMBER];case"FROM_START":return[r+"["+(e=n.pythonGenerator.getAdjustedInt(e,"AT"))+"]",n.pythonGenerator.ORDER_MEMBER];case"FROM_END":return[r+"["+(e=n.pythonGenerator.getAdjustedInt(e,"AT",1,!0))+"]",n.pythonGenerator.ORDER_MEMBER];case"RANDOM":return n.pythonGenerator.definitions_.import_random="import random",[n.pythonGenerator.provideFunction_("text_random_letter",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):\n  x = int(random.random() * len(text))\n  return text[x]\n`)+"("+r+")",n.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.pythonGenerator.text_getSubstring=function(e){var r=e.getFieldValue("WHERE1");const i=e.getFieldValue("WHERE2"),o=n.pythonGenerator.valueToCode(e,"STRING",n.pythonGenerator.ORDER_MEMBER)||"''";switch(r){case"FROM_START":0===(r=n.pythonGenerator.getAdjustedInt(e,"AT1"))&&(r="");break;case"FROM_END":r=n.pythonGenerator.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":r="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(i){case"FROM_START":e=n.pythonGenerator.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=n.pythonGenerator.getAdjustedInt(e,"AT2",0,!0),t.module$build$src$core$utils$string.isNumber(String(e))?0===e&&(e=""):(n.pythonGenerator.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[o+"["+r+" : "+e+"]",n.pythonGenerator.ORDER_MEMBER]},n.pythonGenerator.text_changeCase=function(e){const t={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[e.getFieldValue("CASE")];return[(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_MEMBER)||"''")+t,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_trim=function(e){const t={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[e.getFieldValue("MODE")];return[(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_MEMBER)||"''")+t,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_print=function(e){return"print("+(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_NONE)||"''")+")\n"},n.pythonGenerator.text_prompt_ext=function(e){var t=n.pythonGenerator.provideFunction_("text_prompt",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):\n  try:\n    return raw_input(msg)\n  except NameError:\n    return input(msg)\n`);let r;return r=e.getField("TEXT")?n.pythonGenerator.quote_(e.getFieldValue("TEXT")):n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_NONE)||"''",t=t+"("+r+")","NUMBER"===e.getFieldValue("TYPE")&&(t="float("+t+")"),[t,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_prompt=n.pythonGenerator.text_prompt_ext,n.pythonGenerator.text_count=function(e){return[(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_MEMBER)||"''")+".count("+(e=n.pythonGenerator.valueToCode(e,"SUB",n.pythonGenerator.ORDER_NONE)||"''")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.text_replace=function(e){return[(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_MEMBER)||"''")+".replace("+(n.pythonGenerator.valueToCode(e,"FROM",n.pythonGenerator.ORDER_NONE)||"''")+", "+(e=n.pythonGenerator.valueToCode(e,"TO",n.pythonGenerator.ORDER_NONE)||"''")+")",n.pythonGenerator.ORDER_MEMBER]},n.pythonGenerator.text_reverse=function(e){return[(n.pythonGenerator.valueToCode(e,"TEXT",n.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",n.pythonGenerator.ORDER_MEMBER]},t.module$build$src$core$variables,t.NameType$$module$build$src$core$names,n.pythonGenerator.procedures_defreturn=function(e){var r=[],i=e.workspace,o=t.module$build$src$core$variables.allUsedVarModels(i)||[];for(let d,p=0;d=o[p];p++){var s=d.name;-1===e.getVars().indexOf(s)&&r.push(n.pythonGenerator.nameDB_.getName(s,t.NameType$$module$build$src$core$names.VARIABLE))}for(i=t.module$build$src$core$variables.allDeveloperVariables(i),o=0;o<i.length;o++)r.push(n.pythonGenerator.nameDB_.getName(i[o],t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));i=r.length?n.pythonGenerator.INDENT+"global "+r.join(", ")+"\n":"",r=n.pythonGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE),o="",n.pythonGenerator.STATEMENT_PREFIX&&(o+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_PREFIX,e)),n.pythonGenerator.STATEMENT_SUFFIX&&(o+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_SUFFIX,e)),o&&(o=n.pythonGenerator.prefixLines(o,n.pythonGenerator.INDENT)),s="",n.pythonGenerator.INFINITE_LOOP_TRAP&&(s=n.pythonGenerator.prefixLines(n.pythonGenerator.injectId(n.pythonGenerator.INFINITE_LOOP_TRAP,e),n.pythonGenerator.INDENT));let a=n.pythonGenerator.statementToCode(e,"STACK"),l=n.pythonGenerator.valueToCode(e,"RETURN",n.pythonGenerator.ORDER_NONE)||"",c="";a&&l&&(c=o),l?l=n.pythonGenerator.INDENT+"return "+l+"\n":a||(a=n.pythonGenerator.PASS);const u=[],h=e.getVars();for(let d=0;d<h.length;d++)u[d]=n.pythonGenerator.nameDB_.getName(h[d],t.NameType$$module$build$src$core$names.VARIABLE);return i="def "+r+"("+u.join(", ")+"):\n"+i+o+s+a+c+l,i=n.pythonGenerator.scrub_(e,i),n.pythonGenerator.definitions_["%"+r]=i,null},n.pythonGenerator.procedures_defnoreturn=n.pythonGenerator.procedures_defreturn,n.pythonGenerator.procedures_callreturn=function(e){const r=n.pythonGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE),i=[],o=e.getVars();for(let t=0;t<o.length;t++)i[t]=n.pythonGenerator.valueToCode(e,"ARG"+t,n.pythonGenerator.ORDER_NONE)||"None";return[r+"("+i.join(", ")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.procedures_callnoreturn=function(e){return n.pythonGenerator.procedures_callreturn(e)[0]+"\n"},n.pythonGenerator.procedures_ifreturn=function(e){let t="if "+(n.pythonGenerator.valueToCode(e,"CONDITION",n.pythonGenerator.ORDER_NONE)||"False")+":\n";return n.pythonGenerator.STATEMENT_SUFFIX&&(t+=n.pythonGenerator.prefixLines(n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_SUFFIX,e),n.pythonGenerator.INDENT)),e.hasReturnValue_?(e=n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"None",t+=n.pythonGenerator.INDENT+"return "+e+"\n"):t+=n.pythonGenerator.INDENT+"return\n",t},t.NameType$$module$build$src$core$names,n.pythonGenerator.addReservedWords("math,random,Number"),n.pythonGenerator.math_number=function(e){let t;return 1/0===(e=Number(e.getFieldValue("NUM")))?(e='float("inf")',t=n.pythonGenerator.ORDER_FUNCTION_CALL):-1/0===e?(e='-float("inf")',t=n.pythonGenerator.ORDER_UNARY_SIGN):t=0>e?n.pythonGenerator.ORDER_UNARY_SIGN:n.pythonGenerator.ORDER_ATOMIC,[e,t]},n.pythonGenerator.math_arithmetic=function(e){var t={ADD:[" + ",n.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",n.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",n.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",n.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",n.pythonGenerator.ORDER_EXPONENTIATION]}[e.getFieldValue("OP")];const r=t[0];return t=t[1],[(n.pythonGenerator.valueToCode(e,"A",t)||"0")+r+(e=n.pythonGenerator.valueToCode(e,"B",t)||"0"),t]},n.pythonGenerator.math_single=function(e){const t=e.getFieldValue("OP");let r;if("NEG"===t)return r=n.pythonGenerator.valueToCode(e,"NUM",n.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+r,n.pythonGenerator.ORDER_UNARY_SIGN];switch(n.pythonGenerator.definitions_.import_math="import math",e="SIN"===t||"COS"===t||"TAN"===t?n.pythonGenerator.valueToCode(e,"NUM",n.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":n.pythonGenerator.valueToCode(e,"NUM",n.pythonGenerator.ORDER_NONE)||"0",t){case"ABS":r="math.fabs("+e+")";break;case"ROOT":r="math.sqrt("+e+")";break;case"LN":r="math.log("+e+")";break;case"LOG10":r="math.log10("+e+")";break;case"EXP":r="math.exp("+e+")";break;case"POW10":r="math.pow(10,"+e+")";break;case"ROUND":r="round("+e+")";break;case"ROUNDUP":r="math.ceil("+e+")";break;case"ROUNDDOWN":r="math.floor("+e+")";break;case"SIN":r="math.sin("+e+" / 180.0 * math.pi)";break;case"COS":r="math.cos("+e+" / 180.0 * math.pi)";break;case"TAN":r="math.tan("+e+" / 180.0 * math.pi)"}if(r)return[r,n.pythonGenerator.ORDER_FUNCTION_CALL];switch(t){case"ASIN":r="math.asin("+e+") / math.pi * 180";break;case"ACOS":r="math.acos("+e+") / math.pi * 180";break;case"ATAN":r="math.atan("+e+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+t)}return[r,n.pythonGenerator.ORDER_MULTIPLICATIVE]},n.pythonGenerator.math_constant=function(e){const t={PI:["math.pi",n.pythonGenerator.ORDER_MEMBER],E:["math.e",n.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",n.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",n.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",n.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",n.pythonGenerator.ORDER_ATOMIC]};return"INFINITY"!==(e=e.getFieldValue("CONSTANT"))&&(n.pythonGenerator.definitions_.import_math="import math"),t[e]},n.pythonGenerator.math_number_property=function(e){var t={EVEN:[" % 2 == 0",n.pythonGenerator.ORDER_MULTIPLICATIVE,n.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",n.pythonGenerator.ORDER_MULTIPLICATIVE,n.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",n.pythonGenerator.ORDER_MULTIPLICATIVE,n.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",n.pythonGenerator.ORDER_RELATIONAL,n.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",n.pythonGenerator.ORDER_RELATIONAL,n.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,n.pythonGenerator.ORDER_MULTIPLICATIVE,n.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,n.pythonGenerator.ORDER_NONE,n.pythonGenerator.ORDER_FUNCTION_CALL]};const r=e.getFieldValue("PROPERTY"),[i,o,s]=t[r];if(t=n.pythonGenerator.valueToCode(e,"NUMBER_TO_CHECK",o)||"0","PRIME"===r)n.pythonGenerator.definitions_.import_math="import math",n.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",e=n.pythonGenerator.provideFunction_("math_isPrime",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):\n  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  # If n is not a number but a string, try parsing it.\n  if not isinstance(n, Number):\n    try:\n      n = float(n)\n    except:\n      return False\n  if n == 2 or n == 3:\n    return True\n  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.\n  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:\n    return False\n  # Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for x in range(6, int(math.sqrt(n)) + 2, 6):\n    if n % (x - 1) == 0 or n % (x + 1) == 0:\n      return False\n  return True\n`)+"("+t+")";else if("DIVISIBLE_BY"===r){if("0"===(e=n.pythonGenerator.valueToCode(e,"DIVISOR",n.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"))return["False",n.pythonGenerator.ORDER_ATOMIC];e=t+" % "+e+" == 0"}else e=t+i;return[e,s]},n.pythonGenerator.math_change=function(e){n.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const r=n.pythonGenerator.valueToCode(e,"DELTA",n.pythonGenerator.ORDER_ADDITIVE)||"0";return(e=n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE))+" = ("+e+" if isinstance("+e+", Number) else 0) + "+r+"\n"},n.pythonGenerator.math_round=n.pythonGenerator.math_single,n.pythonGenerator.math_trig=n.pythonGenerator.math_single,n.pythonGenerator.math_on_list=function(e){var t=e.getFieldValue("OP");switch(e=n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_NONE)||"[]",t){case"SUM":t="sum("+e+")";break;case"MIN":t="min("+e+")";break;case"MAX":t="max("+e+")";break;case"AVERAGE":n.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",t=n.pythonGenerator.provideFunction_("math_mean",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = [e for e in myList if isinstance(e, Number)]\n  if not localList: return\n  return float(sum(localList)) / len(localList)\n`)+"("+e+")";break;case"MEDIAN":n.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",t=n.pythonGenerator.provideFunction_("math_median",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = sorted([e for e in myList if isinstance(e, Number)])\n  if not localList: return\n  if len(localList) % 2 == 0:\n    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0\n  else:\n    return localList[(len(localList) - 1) // 2]\n`)+"("+e+")";break;case"MODE":t=n.pythonGenerator.provideFunction_("math_modes",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):\n  modes = []\n  # Using a lists of [item, count] to keep count rather than dict\n  # to avoid "unhashable" errors when the counted item is itself a list or dict.\n  counts = []\n  maxCount = 1\n  for item in some_list:\n    found = False\n    for count in counts:\n      if count[0] == item:\n        count[1] += 1\n        maxCount = max(maxCount, count[1])\n        found = True\n    if not found:\n      counts.append([item, 1])\n  for counted_item, item_count in counts:\n    if item_count == maxCount:\n      modes.append(counted_item)\n  return modes\n`)+"("+e+")";break;case"STD_DEV":n.pythonGenerator.definitions_.import_math="import math",t=n.pythonGenerator.provideFunction_("math_standard_deviation",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):\n  n = len(numbers)\n  if n == 0: return\n  mean = float(sum(numbers)) / n\n  variance = sum((x - mean) ** 2 for x in numbers) / n\n  return math.sqrt(variance)\n`)+"("+e+")";break;case"RANDOM":n.pythonGenerator.definitions_.import_random="import random",t="random.choice("+e+")";break;default:throw Error("Unknown operator: "+t)}return[t,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.math_modulo=function(e){return[(n.pythonGenerator.valueToCode(e,"DIVIDEND",n.pythonGenerator.ORDER_MULTIPLICATIVE)||"0")+" % "+(e=n.pythonGenerator.valueToCode(e,"DIVISOR",n.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"),n.pythonGenerator.ORDER_MULTIPLICATIVE]},n.pythonGenerator.math_constrain=function(e){return["min(max("+(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"0")+", "+(n.pythonGenerator.valueToCode(e,"LOW",n.pythonGenerator.ORDER_NONE)||"0")+"), "+(e=n.pythonGenerator.valueToCode(e,"HIGH",n.pythonGenerator.ORDER_NONE)||"float('inf')")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.math_random_int=function(e){return n.pythonGenerator.definitions_.import_random="import random",["random.randint("+(n.pythonGenerator.valueToCode(e,"FROM",n.pythonGenerator.ORDER_NONE)||"0")+", "+(e=n.pythonGenerator.valueToCode(e,"TO",n.pythonGenerator.ORDER_NONE)||"0")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.math_random_float=function(e){return n.pythonGenerator.definitions_.import_random="import random",["random.random()",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.math_atan2=function(e){n.pythonGenerator.definitions_.import_math="import math";const t=n.pythonGenerator.valueToCode(e,"X",n.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(n.pythonGenerator.valueToCode(e,"Y",n.pythonGenerator.ORDER_NONE)||"0")+", "+t+") / math.pi * 180",n.pythonGenerator.ORDER_MULTIPLICATIVE]},t.module$build$src$core$utils$string,t.NameType$$module$build$src$core$names,n.pythonGenerator.controls_repeat_ext=function(e){let r;r=e.getField("TIMES")?String(parseInt(e.getFieldValue("TIMES"),10)):n.pythonGenerator.valueToCode(e,"TIMES",n.pythonGenerator.ORDER_NONE)||"0",r=t.module$build$src$core$utils$string.isNumber(r)?parseInt(r,10):"int("+r+")";let i=n.pythonGenerator.statementToCode(e,"DO");return i=n.pythonGenerator.addLoopTrap(i,e)||n.pythonGenerator.PASS,"for "+n.pythonGenerator.nameDB_.getDistinctName("count",t.NameType$$module$build$src$core$names.VARIABLE)+" in range("+r+"):\n"+i},n.pythonGenerator.controls_repeat=n.pythonGenerator.controls_repeat_ext,n.pythonGenerator.controls_whileUntil=function(e){const t="UNTIL"===e.getFieldValue("MODE");let r=n.pythonGenerator.valueToCode(e,"BOOL",t?n.pythonGenerator.ORDER_LOGICAL_NOT:n.pythonGenerator.ORDER_NONE)||"False",i=n.pythonGenerator.statementToCode(e,"DO");return i=n.pythonGenerator.addLoopTrap(i,e)||n.pythonGenerator.PASS,t&&(r="not "+r),"while "+r+":\n"+i},n.pythonGenerator.controls_for=function(e){const r=n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);var i=n.pythonGenerator.valueToCode(e,"FROM",n.pythonGenerator.ORDER_NONE)||"0",o=n.pythonGenerator.valueToCode(e,"TO",n.pythonGenerator.ORDER_NONE)||"0",s=n.pythonGenerator.valueToCode(e,"BY",n.pythonGenerator.ORDER_NONE)||"1";let a=n.pythonGenerator.statementToCode(e,"DO");a=n.pythonGenerator.addLoopTrap(a,e)||n.pythonGenerator.PASS;let l="";const c=function(){return n.pythonGenerator.provideFunction_("upRange",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start <= stop:\n    yield start\n    start += abs(step)\n`)},u=function(){return n.pythonGenerator.provideFunction_("downRange",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start >= stop:\n    yield start\n    start -= abs(step)\n`)};if(e=function(e,t,n){return"("+e+" <= "+t+") and "+c()+"("+e+", "+t+", "+n+") or "+u()+"("+e+", "+t+", "+n+")"},t.module$build$src$core$utils$string.isNumber(i)&&t.module$build$src$core$utils$string.isNumber(o)&&t.module$build$src$core$utils$string.isNumber(s))i=Number(i),o=Number(o),s=Math.abs(Number(s)),0==i%1&&0==o%1&&0==s%1?(i<=o?(o++,e=0===i&&1===s?o:i+", "+o,1!==s&&(e+=", "+s)):e=i+", "+--o+", -"+s,e="range("+e+")"):(e=i<o?c():u(),e+="("+i+", "+o+", "+s+")");else{const a=function(e,i){return t.module$build$src$core$utils$string.isNumber(e)?e=Number(e):e.match(/^\w+$/)||(i=n.pythonGenerator.nameDB_.getDistinctName(r+i,t.NameType$$module$build$src$core$names.VARIABLE),l+=i+" = "+e+"\n",e=i),e};i=a(i,"_start"),o=a(o,"_end"),s=a(s,"_inc"),"number"==typeof i&&"number"==typeof o?(e=i<o?c():u(),e+="("+i+", "+o+", "+s+")"):e=e(i,o,s)}return l+="for "+r+" in "+e+":\n"+a},n.pythonGenerator.controls_forEach=function(e){const r=n.pythonGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),i=n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_RELATIONAL)||"[]";let o=n.pythonGenerator.statementToCode(e,"DO");return o=n.pythonGenerator.addLoopTrap(o,e)||n.pythonGenerator.PASS,"for "+r+" in "+i+":\n"+o},n.pythonGenerator.controls_flow_statements=function(e){let t="";if(n.pythonGenerator.STATEMENT_PREFIX&&(t+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_PREFIX,e)),n.pythonGenerator.STATEMENT_SUFFIX&&(t+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_SUFFIX,e)),n.pythonGenerator.STATEMENT_PREFIX){const r=e.getSurroundLoop();r&&!r.suppressPrefixSuffix&&(t+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_PREFIX,r))}switch(e.getFieldValue("FLOW")){case"BREAK":return t+"break\n";case"CONTINUE":return t+"continue\n"}throw Error("Unknown flow statement.")},n.pythonGenerator.controls_if=function(e){let t,r,i=0,o="";n.pythonGenerator.STATEMENT_PREFIX&&(o+=n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_PREFIX,e));do{r=n.pythonGenerator.valueToCode(e,"IF"+i,n.pythonGenerator.ORDER_NONE)||"False",t=n.pythonGenerator.statementToCode(e,"DO"+i)||n.pythonGenerator.PASS,n.pythonGenerator.STATEMENT_SUFFIX&&(t=n.pythonGenerator.prefixLines(n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_SUFFIX,e),n.pythonGenerator.INDENT)+t),o+=(0===i?"if ":"elif ")+r+":\n"+t,i++}while(e.getInput("IF"+i));return(e.getInput("ELSE")||n.pythonGenerator.STATEMENT_SUFFIX)&&(t=n.pythonGenerator.statementToCode(e,"ELSE")||n.pythonGenerator.PASS,n.pythonGenerator.STATEMENT_SUFFIX&&(t=n.pythonGenerator.prefixLines(n.pythonGenerator.injectId(n.pythonGenerator.STATEMENT_SUFFIX,e),n.pythonGenerator.INDENT)+t),o+="else:\n"+t),o},n.pythonGenerator.controls_ifelse=n.pythonGenerator.controls_if,n.pythonGenerator.logic_compare=function(e){const t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],r=n.pythonGenerator.ORDER_RELATIONAL;return[(n.pythonGenerator.valueToCode(e,"A",r)||"0")+" "+t+" "+(e=n.pythonGenerator.valueToCode(e,"B",r)||"0"),r]},n.pythonGenerator.logic_operation=function(e){const t="AND"===e.getFieldValue("OP")?"and":"or",r="and"===t?n.pythonGenerator.ORDER_LOGICAL_AND:n.pythonGenerator.ORDER_LOGICAL_OR;let i=n.pythonGenerator.valueToCode(e,"A",r);if(e=n.pythonGenerator.valueToCode(e,"B",r),i||e){const n="and"===t?"True":"False";i||(i=n),e||(e=n)}else e=i="False";return[i+" "+t+" "+e,r]},n.pythonGenerator.logic_negate=function(e){return["not "+(n.pythonGenerator.valueToCode(e,"BOOL",n.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),n.pythonGenerator.ORDER_LOGICAL_NOT]},n.pythonGenerator.logic_boolean=function(e){return["TRUE"===e.getFieldValue("BOOL")?"True":"False",n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.logic_null=function(e){return["None",n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.logic_ternary=function(e){const t=n.pythonGenerator.valueToCode(e,"IF",n.pythonGenerator.ORDER_CONDITIONAL)||"False";return[(n.pythonGenerator.valueToCode(e,"THEN",n.pythonGenerator.ORDER_CONDITIONAL)||"None")+" if "+t+" else "+(e=n.pythonGenerator.valueToCode(e,"ELSE",n.pythonGenerator.ORDER_CONDITIONAL)||"None"),n.pythonGenerator.ORDER_CONDITIONAL]},t.module$build$src$core$utils$string,t.NameType$$module$build$src$core$names,n.pythonGenerator.lists_create_empty=function(e){return["[]",n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.lists_create_with=function(e){const t=Array(e.itemCount_);for(let r=0;r<e.itemCount_;r++)t[r]=n.pythonGenerator.valueToCode(e,"ADD"+r,n.pythonGenerator.ORDER_NONE)||"None";return["["+t.join(", ")+"]",n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.lists_repeat=function(e){return["["+(n.pythonGenerator.valueToCode(e,"ITEM",n.pythonGenerator.ORDER_NONE)||"None")+"] * "+(e=n.pythonGenerator.valueToCode(e,"NUM",n.pythonGenerator.ORDER_MULTIPLICATIVE)||"0"),n.pythonGenerator.ORDER_MULTIPLICATIVE]},n.pythonGenerator.lists_length=function(e){return["len("+(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"[]")+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.lists_isEmpty=function(e){return["not len("+(n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"[]")+")",n.pythonGenerator.ORDER_LOGICAL_NOT]},n.pythonGenerator.lists_indexOf=function(e){const t=n.pythonGenerator.valueToCode(e,"FIND",n.pythonGenerator.ORDER_NONE)||"[]",r=n.pythonGenerator.valueToCode(e,"VALUE",n.pythonGenerator.ORDER_NONE)||"''";let i=" -1",o="",s=" - 1";return e.workspace.options.oneBasedIndex&&(i=" 0",o=" + 1",s=""),[("FIRST"===e.getFieldValue("END")?n.pythonGenerator.provideFunction_("first_index",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = my_list.index(elem)${o}\n  except: index =${i}\n  return index\n`):n.pythonGenerator.provideFunction_("last_index",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = len(my_list) - my_list[::-1].index(elem)${s}\n  except: index =${i}\n  return index\n`))+"("+r+", "+t+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.lists_getIndex=function(e){const t=e.getFieldValue("MODE")||"GET",r=e.getFieldValue("WHERE")||"FROM_START";var i=n.pythonGenerator.valueToCode(e,"VALUE","RANDOM"===r?n.pythonGenerator.ORDER_NONE:n.pythonGenerator.ORDER_MEMBER)||"[]";switch(r){case"FIRST":if("GET"===t)return[i+"[0]",n.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".pop(0)",n.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".pop(0)\n";break;case"LAST":if("GET"===t)return[i+"[-1]",n.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".pop()",n.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".pop()\n";break;case"FROM_START":if(e=n.pythonGenerator.getAdjustedInt(e,"AT"),"GET"===t)return[i+"["+e+"]",n.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".pop("+e+")",n.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".pop("+e+")\n";break;case"FROM_END":if(e=n.pythonGenerator.getAdjustedInt(e,"AT",1,!0),"GET"===t)return[i+"["+e+"]",n.pythonGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".pop("+e+")",n.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".pop("+e+")\n";break;case"RANDOM":if(n.pythonGenerator.definitions_.import_random="import random","GET"===t)return["random.choice("+i+")",n.pythonGenerator.ORDER_FUNCTION_CALL];if(i=n.pythonGenerator.provideFunction_("lists_remove_random_item",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  x = int(random.random() * len(myList))\n  return myList.pop(x)\n`)+"("+i+")","GET_REMOVE"===t)return[i,n.pythonGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+"\n"}throw Error("Unhandled combination (lists_getIndex).")},n.pythonGenerator.lists_setIndex=function(e){let r=n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_MEMBER)||"[]";const i=e.getFieldValue("MODE")||"GET";var o=e.getFieldValue("WHERE")||"FROM_START";const s=n.pythonGenerator.valueToCode(e,"TO",n.pythonGenerator.ORDER_NONE)||"None";switch(o){case"FIRST":if("SET"===i)return r+"[0] = "+s+"\n";if("INSERT"===i)return r+".insert(0, "+s+")\n";break;case"LAST":if("SET"===i)return r+"[-1] = "+s+"\n";if("INSERT"===i)return r+".append("+s+")\n";break;case"FROM_START":if(e=n.pythonGenerator.getAdjustedInt(e,"AT"),"SET"===i)return r+"["+e+"] = "+s+"\n";if("INSERT"===i)return r+".insert("+e+", "+s+")\n";break;case"FROM_END":if(e=n.pythonGenerator.getAdjustedInt(e,"AT",1,!0),"SET"===i)return r+"["+e+"] = "+s+"\n";if("INSERT"===i)return r+".insert("+e+", "+s+")\n";break;case"RANDOM":if(n.pythonGenerator.definitions_.import_random="import random",r.match(/^\w+$/)?e="":(o=(e=n.pythonGenerator.nameDB_.getDistinctName("tmp_list",t.NameType$$module$build$src$core$names.VARIABLE))+" = "+r+"\n",r=e,e=o),e+=(o=n.pythonGenerator.nameDB_.getDistinctName("tmp_x",t.NameType$$module$build$src$core$names.VARIABLE))+" = int(random.random() * len("+r+"))\n","SET"===i)return e+(r+"[")+o+"] = "+s+"\n";if("INSERT"===i)return e+(r+".insert(")+o+", "+s+")\n"}throw Error("Unhandled combination (lists_setIndex).")},n.pythonGenerator.lists_getSublist=function(e){const r=n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_MEMBER)||"[]";var i=e.getFieldValue("WHERE1");const o=e.getFieldValue("WHERE2");switch(i){case"FROM_START":0===(i=n.pythonGenerator.getAdjustedInt(e,"AT1"))&&(i="");break;case"FROM_END":i=n.pythonGenerator.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":i="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(o){case"FROM_START":e=n.pythonGenerator.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=n.pythonGenerator.getAdjustedInt(e,"AT2",0,!0),t.module$build$src$core$utils$string.isNumber(String(e))?0===e&&(e=""):(n.pythonGenerator.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[r+"["+i+" : "+e+"]",n.pythonGenerator.ORDER_MEMBER]},n.pythonGenerator.lists_sort=function(e){const t=n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_NONE)||"[]",r=e.getFieldValue("TYPE");return e="1"===e.getFieldValue("DIRECTION")?"False":"True",[n.pythonGenerator.provideFunction_("lists_sort",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):\n  def try_float(s):\n    try:\n      return float(s)\n    except:\n      return 0\n  key_funcs = {\n    "NUMERIC": try_float,\n    "TEXT": str,\n    "IGNORE_CASE": lambda s: str(s).lower()\n  }\n  key_func = key_funcs[type]\n  list_cpy = list(my_list)\n  return sorted(list_cpy, key=key_func, reverse=reverse)\n`)+"("+t+', "'+r+'", '+e+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.lists_split=function(e){var t=e.getFieldValue("MODE");if("SPLIT"===t)e=(t=n.pythonGenerator.valueToCode(e,"INPUT",n.pythonGenerator.ORDER_MEMBER)||"''")+".split("+(e=n.pythonGenerator.valueToCode(e,"DELIM",n.pythonGenerator.ORDER_NONE))+")";else{if("JOIN"!==t)throw Error("Unknown mode: "+t);t=n.pythonGenerator.valueToCode(e,"INPUT",n.pythonGenerator.ORDER_NONE)||"[]",e=(n.pythonGenerator.valueToCode(e,"DELIM",n.pythonGenerator.ORDER_MEMBER)||"''")+".join("+t+")"}return[e,n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.lists_reverse=function(e){return["list(reversed("+(n.pythonGenerator.valueToCode(e,"LIST",n.pythonGenerator.ORDER_NONE)||"[]")+"))",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.colour_picker=function(e){return[n.pythonGenerator.quote_(e.getFieldValue("COLOUR")),n.pythonGenerator.ORDER_ATOMIC]},n.pythonGenerator.colour_random=function(e){return n.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.colour_rgb=function(e){return[n.pythonGenerator.provideFunction_("colour_rgb",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):\n  r = round(min(100, max(0, r)) * 2.55)\n  g = round(min(100, max(0, g)) * 2.55)\n  b = round(min(100, max(0, b)) * 2.55)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(n.pythonGenerator.valueToCode(e,"RED",n.pythonGenerator.ORDER_NONE)||0)+", "+(n.pythonGenerator.valueToCode(e,"GREEN",n.pythonGenerator.ORDER_NONE)||0)+", "+(e=n.pythonGenerator.valueToCode(e,"BLUE",n.pythonGenerator.ORDER_NONE)||0)+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.pythonGenerator.colour_blend=function(e){return[n.pythonGenerator.provideFunction_("colour_blend",`\ndef ${n.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):\n  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)\n  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)\n  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)\n  ratio = min(1, max(0, ratio))\n  r = round(r1 * (1 - ratio) + r2 * ratio)\n  g = round(g1 * (1 - ratio) + g2 * ratio)\n  b = round(b1 * (1 - ratio) + b2 * ratio)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(n.pythonGenerator.valueToCode(e,"COLOUR1",n.pythonGenerator.ORDER_NONE)||"'#000000'")+", "+(n.pythonGenerator.valueToCode(e,"COLOUR2",n.pythonGenerator.ORDER_NONE)||"'#000000'")+", "+(e=n.pythonGenerator.valueToCode(e,"RATIO",n.pythonGenerator.ORDER_NONE)||0)+")",n.pythonGenerator.ORDER_FUNCTION_CALL]},n.__namespace__=t,n}(requireBlockly_compressed())),python_compressed.exports}python$1.exports=(requireCoreBrowser(),requirePython_compressed());var pythonExports=python$1.exports,javascript$1={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,javascript_compressed.exports=function(e){var t=e.__namespace__,n={};t.module$build$src$core$variables,t.module$build$src$core$utils$string,t.CodeGenerator$$module$build$src$core$generator,t.module$build$src$core$input_types.inputTypes,t.module$build$src$core$names.Names,t.NameType$$module$build$src$core$names,n.javascriptGenerator=new t.CodeGenerator$$module$build$src$core$generator("JavaScript"),n.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),n.javascriptGenerator.ORDER_ATOMIC=0,n.javascriptGenerator.ORDER_NEW=1.1,n.javascriptGenerator.ORDER_MEMBER=1.2,n.javascriptGenerator.ORDER_FUNCTION_CALL=2,n.javascriptGenerator.ORDER_INCREMENT=3,n.javascriptGenerator.ORDER_DECREMENT=3,n.javascriptGenerator.ORDER_BITWISE_NOT=4.1,n.javascriptGenerator.ORDER_UNARY_PLUS=4.2,n.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,n.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,n.javascriptGenerator.ORDER_TYPEOF=4.5,n.javascriptGenerator.ORDER_VOID=4.6,n.javascriptGenerator.ORDER_DELETE=4.7,n.javascriptGenerator.ORDER_AWAIT=4.8,n.javascriptGenerator.ORDER_EXPONENTIATION=5,n.javascriptGenerator.ORDER_MULTIPLICATION=5.1,n.javascriptGenerator.ORDER_DIVISION=5.2,n.javascriptGenerator.ORDER_MODULUS=5.3,n.javascriptGenerator.ORDER_SUBTRACTION=6.1,n.javascriptGenerator.ORDER_ADDITION=6.2,n.javascriptGenerator.ORDER_BITWISE_SHIFT=7,n.javascriptGenerator.ORDER_RELATIONAL=8,n.javascriptGenerator.ORDER_IN=8,n.javascriptGenerator.ORDER_INSTANCEOF=8,n.javascriptGenerator.ORDER_EQUALITY=9,n.javascriptGenerator.ORDER_BITWISE_AND=10,n.javascriptGenerator.ORDER_BITWISE_XOR=11,n.javascriptGenerator.ORDER_BITWISE_OR=12,n.javascriptGenerator.ORDER_LOGICAL_AND=13,n.javascriptGenerator.ORDER_LOGICAL_OR=14,n.javascriptGenerator.ORDER_CONDITIONAL=15,n.javascriptGenerator.ORDER_ASSIGNMENT=16,n.javascriptGenerator.ORDER_YIELD=17,n.javascriptGenerator.ORDER_COMMA=18,n.javascriptGenerator.ORDER_NONE=99,n.javascriptGenerator.ORDER_OVERRIDES=[[n.javascriptGenerator.ORDER_FUNCTION_CALL,n.javascriptGenerator.ORDER_MEMBER],[n.javascriptGenerator.ORDER_FUNCTION_CALL,n.javascriptGenerator.ORDER_FUNCTION_CALL],[n.javascriptGenerator.ORDER_MEMBER,n.javascriptGenerator.ORDER_MEMBER],[n.javascriptGenerator.ORDER_MEMBER,n.javascriptGenerator.ORDER_FUNCTION_CALL],[n.javascriptGenerator.ORDER_LOGICAL_NOT,n.javascriptGenerator.ORDER_LOGICAL_NOT],[n.javascriptGenerator.ORDER_MULTIPLICATION,n.javascriptGenerator.ORDER_MULTIPLICATION],[n.javascriptGenerator.ORDER_ADDITION,n.javascriptGenerator.ORDER_ADDITION],[n.javascriptGenerator.ORDER_LOGICAL_AND,n.javascriptGenerator.ORDER_LOGICAL_AND],[n.javascriptGenerator.ORDER_LOGICAL_OR,n.javascriptGenerator.ORDER_LOGICAL_OR]],n.javascriptGenerator.isInitialized=!1,n.javascriptGenerator.init=function(e){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const n=[];var r=t.module$build$src$core$variables.allDeveloperVariables(e);for(let i=0;i<r.length;i++)n.push(this.nameDB_.getName(r[i],t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(e=t.module$build$src$core$variables.allUsedVarModels(e),r=0;r<e.length;r++)n.push(this.nameDB_.getName(e[r].getId(),t.NameType$$module$build$src$core$names.VARIABLE));n.length&&(this.definitions_.variables="var "+n.join(", ")+";"),this.isInitialized=!0},n.javascriptGenerator.finish=function(e){const t=Object.values(this.definitions_);return e=Object.getPrototypeOf(this).finish.call(this,e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e},n.javascriptGenerator.scrubNakedValue=function(e){return e+";\n"},n.javascriptGenerator.quote_=function(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},n.javascriptGenerator.multiline_quote_=function(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},n.javascriptGenerator.scrub_=function(e,n,r){let i="";if(!e.outputConnection||!e.outputConnection.targetConnection){var o=e.getCommentText();o&&(o=t.module$build$src$core$utils$string.wrap(o,this.COMMENT_WRAP-3),i+=this.prefixLines(o+"\n","// "));for(let n=0;n<e.inputList.length;n++)e.inputList[n].type===t.module$build$src$core$input_types.inputTypes.VALUE&&(o=e.inputList[n].connection.targetBlock())&&(o=this.allNestedComments(o))&&(i+=this.prefixLines(o,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),i+n+(r=r?"":this.blockToCode(e))},n.javascriptGenerator.getAdjusted=function(e,n,r,i,o){r=r||0,o=o||this.ORDER_NONE,e.workspace.options.oneBasedIndex&&r--;const s=e.workspace.options.oneBasedIndex?"1":"0";let a,l=o;return 0<r?a=l=this.ORDER_ADDITION:0>r?a=l=this.ORDER_SUBTRACTION:i&&(a=l=this.ORDER_UNARY_NEGATION),e=this.valueToCode(e,n,l)||s,t.module$build$src$core$utils$string.isNumber(e)?(e=Number(e)+r,i&&(e=-e)):(0<r?e=e+" + "+r:0>r&&(e=e+" - "+-r),i&&(e=r?"-("+e+")":"-"+e),a=Math.floor(a),o=Math.floor(o),a&&o>=a&&(e="("+e+")")),e},t.NameType$$module$build$src$core$names,n.javascriptGenerator.variables_get=function(e){return[n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.variables_set=function(e){const r=n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE)+" = "+r+";\n"},n.javascriptGenerator.variables_get_dynamic=n.javascriptGenerator.variables_get,n.javascriptGenerator.variables_set_dynamic=n.javascriptGenerator.variables_set,t.NameType$$module$build$src$core$names;var r=/^\s*'([^']|\\')*'\s*$/,i=function(e){return r.test(e)?[e,n.javascriptGenerator.ORDER_ATOMIC]:["String("+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},o=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n};n.javascriptGenerator.text=function(e){return[n.javascriptGenerator.quote_(e.getFieldValue("TEXT")),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.text_multiline=function(e){const t=-1!==(e=n.javascriptGenerator.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?n.javascriptGenerator.ORDER_ADDITION:n.javascriptGenerator.ORDER_ATOMIC;return[e,t]},n.javascriptGenerator.text_join=function(e){switch(e.itemCount_){case 0:return["''",n.javascriptGenerator.ORDER_ATOMIC];case 1:return e=n.javascriptGenerator.valueToCode(e,"ADD0",n.javascriptGenerator.ORDER_NONE)||"''",i(e);case 2:var t=n.javascriptGenerator.valueToCode(e,"ADD0",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"ADD1",n.javascriptGenerator.ORDER_NONE)||"''",[i(t)[0]+" + "+i(e)[0],n.javascriptGenerator.ORDER_ADDITION];default:t=Array(e.itemCount_);for(let r=0;r<e.itemCount_;r++)t[r]=n.javascriptGenerator.valueToCode(e,"ADD"+r,n.javascriptGenerator.ORDER_NONE)||"''";return["["+t.join(",")+"].join('')",n.javascriptGenerator.ORDER_FUNCTION_CALL]}},n.javascriptGenerator.text_append=function(e){const r=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);return e=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''",r+" += "+i(e)[0]+";\n"},n.javascriptGenerator.text_length=function(e){return[(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+".length",n.javascriptGenerator.ORDER_MEMBER]},n.javascriptGenerator.text_isEmpty=function(e){return["!"+(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+".length",n.javascriptGenerator.ORDER_LOGICAL_NOT]},n.javascriptGenerator.text_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf";const r=n.javascriptGenerator.valueToCode(e,"FIND",n.javascriptGenerator.ORDER_NONE)||"''";return t=(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+"."+t+"("+r+")",e.workspace.options.oneBasedIndex?[t+" + 1",n.javascriptGenerator.ORDER_ADDITION]:[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_charAt=function(e){const t=e.getFieldValue("WHERE")||"FROM_START",r=n.javascriptGenerator.valueToCode(e,"VALUE","RANDOM"===t?n.javascriptGenerator.ORDER_NONE:n.javascriptGenerator.ORDER_MEMBER)||"''";switch(t){case"FIRST":return[r+".charAt(0)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[r+".slice(-1)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return[r+".charAt("+(e=n.javascriptGenerator.getAdjusted(e,"AT"))+")",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return[r+".slice("+(e=n.javascriptGenerator.getAdjusted(e,"AT",1,!0))+").charAt(0)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[n.javascriptGenerator.provideFunction_("textRandomLetter",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {\n  var x = Math.floor(Math.random() * text.length);\n  return text[x];\n}\n`)+"("+r+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.javascriptGenerator.text_getSubstring=function(e){var t=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2"),i="FROM_END"!==t&&"LAST"!==t&&"FROM_END"!==r&&"LAST"!==r,s=n.javascriptGenerator.valueToCode(e,"STRING",i?n.javascriptGenerator.ORDER_MEMBER:n.javascriptGenerator.ORDER_NONE)||"''";if("FIRST"===t&&"LAST"===r)return[s,n.javascriptGenerator.ORDER_NONE];if(s.match(/^'?\w+'?$/)||i){switch(t){case"FROM_START":t=n.javascriptGenerator.getAdjusted(e,"AT1");break;case"FROM_END":t=s+".length - "+(t=n.javascriptGenerator.getAdjusted(e,"AT1",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION));break;case"FIRST":t="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":r=n.javascriptGenerator.getAdjusted(e,"AT2",1);break;case"FROM_END":r=s+".length - "+(r=n.javascriptGenerator.getAdjusted(e,"AT2",0,!1,n.javascriptGenerator.ORDER_SUBTRACTION));break;case"LAST":r=s+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}s=s+".slice("+t+", "+r+")"}else{i=n.javascriptGenerator.getAdjusted(e,"AT1"),e=n.javascriptGenerator.getAdjusted(e,"AT2");const a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};s=n.javascriptGenerator.provideFunction_("subsequence"+a[t]+a[r],`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===t||"FROM_START"===t?", at1":""}${"FROM_END"===r||"FROM_START"===r?", at2":""}) {\n  var start = ${o("sequence",t,"at1")};\n  var end = ${o("sequence",r,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+s+("FROM_END"===t||"FROM_START"===t?", "+i:"")+("FROM_END"===r||"FROM_START"===r?", "+e:"")+")"}return[s,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_changeCase=function(e){const t={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=n.javascriptGenerator.valueToCode(e,"TEXT",t?n.javascriptGenerator.ORDER_MEMBER:n.javascriptGenerator.ORDER_NONE)||"''",[t?e+t:n.javascriptGenerator.provideFunction_("textToTitleCase",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {\n  return str.replace(/\\S+/g,\n      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\n}\n`)+"("+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_trim=function(e){const t={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_MEMBER)||"''")+t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_print=function(e){return"window.alert("+(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''")+");\n"},n.javascriptGenerator.text_prompt_ext=function(e){let t="window.prompt("+(e.getField("TEXT")?n.javascriptGenerator.quote_(e.getFieldValue("TEXT")):n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''")+")";return"NUMBER"===e.getFieldValue("TYPE")&&(t="Number("+t+")"),[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_prompt=n.javascriptGenerator.text_prompt_ext,n.javascriptGenerator.text_count=function(e){const t=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"SUB",n.javascriptGenerator.ORDER_NONE)||"''",[n.javascriptGenerator.provideFunction_("textCount",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {\n  if (needle.length === 0) {\n    return haystack.length + 1;\n  } else {\n    return haystack.split(needle).length - 1;\n  }\n}\n`)+"("+t+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_replace=function(e){const t=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''",r=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_NONE)||"''",[n.javascriptGenerator.provideFunction_("textReplace",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {\n  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')\n                 .replace(/\\x08/g, '\\\\x08');\n  return haystack.replace(new RegExp(needle, 'g'), replacement);\n}\n`)+"("+t+", "+r+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_reverse=function(e){return[(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",n.javascriptGenerator.ORDER_FUNCTION_CALL]},t.NameType$$module$build$src$core$names,n.javascriptGenerator.procedures_defreturn=function(e){const r=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE);var i="";n.javascriptGenerator.STATEMENT_PREFIX&&(i+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e)),n.javascriptGenerator.STATEMENT_SUFFIX&&(i+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e)),i&&(i=n.javascriptGenerator.prefixLines(i,n.javascriptGenerator.INDENT));let o="";n.javascriptGenerator.INFINITE_LOOP_TRAP&&(o=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.INFINITE_LOOP_TRAP,e),n.javascriptGenerator.INDENT));const s=n.javascriptGenerator.statementToCode(e,"STACK");let a=n.javascriptGenerator.valueToCode(e,"RETURN",n.javascriptGenerator.ORDER_NONE)||"",l="";s&&a&&(l=i),a&&(a=n.javascriptGenerator.INDENT+"return "+a+";\n");const c=[],u=e.getVars();for(let h=0;h<u.length;h++)c[h]=n.javascriptGenerator.nameDB_.getName(u[h],t.NameType$$module$build$src$core$names.VARIABLE);return i="function "+r+"("+c.join(", ")+") {\n"+i+o+s+l+a+"}",i=n.javascriptGenerator.scrub_(e,i),n.javascriptGenerator.definitions_["%"+r]=i,null},n.javascriptGenerator.procedures_defnoreturn=n.javascriptGenerator.procedures_defreturn,n.javascriptGenerator.procedures_callreturn=function(e){const r=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE),i=[],o=e.getVars();for(let t=0;t<o.length;t++)i[t]=n.javascriptGenerator.valueToCode(e,"ARG"+t,n.javascriptGenerator.ORDER_NONE)||"null";return[r+"("+i.join(", ")+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.procedures_callnoreturn=function(e){return n.javascriptGenerator.procedures_callreturn(e)[0]+";\n"},n.javascriptGenerator.procedures_ifreturn=function(e){let t="if ("+(n.javascriptGenerator.valueToCode(e,"CONDITION",n.javascriptGenerator.ORDER_NONE)||"false")+") {\n";return n.javascriptGenerator.STATEMENT_SUFFIX&&(t+=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)),e.hasReturnValue_?(e=n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_NONE)||"null",t+=n.javascriptGenerator.INDENT+"return "+e+";\n"):t+=n.javascriptGenerator.INDENT+"return;\n",t+"}\n"},t.NameType$$module$build$src$core$names,n.javascriptGenerator.math_number=function(e){return[e=Number(e.getFieldValue("NUM")),0<=e?n.javascriptGenerator.ORDER_ATOMIC:n.javascriptGenerator.ORDER_UNARY_NEGATION]},n.javascriptGenerator.math_arithmetic=function(e){var t={ADD:[" + ",n.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",n.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",n.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",n.javascriptGenerator.ORDER_DIVISION],POWER:[null,n.javascriptGenerator.ORDER_NONE]}[e.getFieldValue("OP")];const r=t[0];t=t[1];const i=n.javascriptGenerator.valueToCode(e,"A",t)||"0";return e=n.javascriptGenerator.valueToCode(e,"B",t)||"0",r?[i+r+e,t]:["Math.pow("+i+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_single=function(e){const t=e.getFieldValue("OP");let r;if("NEG"===t)return"-"===(e=n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,n.javascriptGenerator.ORDER_UNARY_NEGATION];switch(e="SIN"===t||"COS"===t||"TAN"===t?n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_DIVISION)||"0":n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_NONE)||"0",t){case"ABS":r="Math.abs("+e+")";break;case"ROOT":r="Math.sqrt("+e+")";break;case"LN":r="Math.log("+e+")";break;case"EXP":r="Math.exp("+e+")";break;case"POW10":r="Math.pow(10,"+e+")";break;case"ROUND":r="Math.round("+e+")";break;case"ROUNDUP":r="Math.ceil("+e+")";break;case"ROUNDDOWN":r="Math.floor("+e+")";break;case"SIN":r="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":r="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":r="Math.tan("+e+" / 180 * Math.PI)"}if(r)return[r,n.javascriptGenerator.ORDER_FUNCTION_CALL];switch(t){case"LOG10":r="Math.log("+e+") / Math.log(10)";break;case"ASIN":r="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":r="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":r="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+t)}return[r,n.javascriptGenerator.ORDER_DIVISION]},n.javascriptGenerator.math_constant=function(e){return{PI:["Math.PI",n.javascriptGenerator.ORDER_MEMBER],E:["Math.E",n.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",n.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",n.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",n.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",n.javascriptGenerator.ORDER_ATOMIC]}[e.getFieldValue("CONSTANT")]},n.javascriptGenerator.math_number_property=function(e){var t={EVEN:[" % 2 === 0",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",n.javascriptGenerator.ORDER_RELATIONAL,n.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",n.javascriptGenerator.ORDER_RELATIONAL,n.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,n.javascriptGenerator.ORDER_NONE,n.javascriptGenerator.ORDER_FUNCTION_CALL]};const r=e.getFieldValue("PROPERTY"),[i,o,s]=t[r];return t=n.javascriptGenerator.valueToCode(e,"NUMBER_TO_CHECK",o)||"0",[e="PRIME"===r?n.javascriptGenerator.provideFunction_("mathIsPrime",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) === 0 || n % (x + 1) === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n`)+"("+t+")":"DIVISIBLE_BY"===r?t+" % "+(e=n.javascriptGenerator.valueToCode(e,"DIVISOR",n.javascriptGenerator.ORDER_MODULUS)||"0")+" === 0":t+i,s]},n.javascriptGenerator.math_change=function(e){const r=n.javascriptGenerator.valueToCode(e,"DELTA",n.javascriptGenerator.ORDER_ADDITION)||"0";return(e=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE))+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+r+";\n"},n.javascriptGenerator.math_round=n.javascriptGenerator.math_single,n.javascriptGenerator.math_trig=n.javascriptGenerator.math_single,n.javascriptGenerator.math_on_list=function(e){var t=e.getFieldValue("OP");switch(t){case"SUM":e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e="Math.min.apply(null, "+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"AVERAGE":e=(t=n.javascriptGenerator.provideFunction_("mathMean",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;\n}\n`))+"("+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MEDIAN":e=(t=n.javascriptGenerator.provideFunction_("mathMedian",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  var localList = myList.filter(function (x) {return typeof x === 'number';});\n  if (!localList.length) return null;\n  localList.sort(function(a, b) {return b - a;});\n  if (localList.length % 2 === 0) {\n    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n  } else {\n    return localList[(localList.length - 1) / 2];\n  }\n}\n`))+"("+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"MODE":e=(t=n.javascriptGenerator.provideFunction_("mathModes",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {\n  var modes = [];\n  var counts = [];\n  var maxCount = 0;\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var found = false;\n    var thisCount;\n    for (var j = 0; j < counts.length; j++) {\n      if (counts[j][0] === value) {\n        thisCount = ++counts[j][1];\n        found = true;\n        break;\n      }\n    }\n    if (!found) {\n      counts.push([value, 1]);\n      thisCount = 1;\n    }\n    maxCount = Math.max(thisCount, maxCount);\n  }\n  for (var j = 0; j < counts.length; j++) {\n    if (counts[j][1] === maxCount) {\n        modes.push(counts[j][0]);\n    }\n  }\n  return modes;\n}\n`))+"("+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"STD_DEV":e=(t=n.javascriptGenerator.provideFunction_("mathStandardDeviation",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n  var n = numbers.length;\n  if (!n) return null;\n  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\n  var variance = 0;\n  for (var j = 0; j < n; j++) {\n    variance += Math.pow(numbers[j] - mean, 2);\n  }\n  variance = variance / n;\n  return Math.sqrt(variance);\n}\n`))+"("+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;case"RANDOM":e=(t=n.javascriptGenerator.provideFunction_("mathRandomList",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {\n  var x = Math.floor(Math.random() * list.length);\n  return list[x];\n}\n`))+"("+(e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+t)}return[e,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_modulo=function(e){return[(n.javascriptGenerator.valueToCode(e,"DIVIDEND",n.javascriptGenerator.ORDER_MODULUS)||"0")+" % "+(e=n.javascriptGenerator.valueToCode(e,"DIVISOR",n.javascriptGenerator.ORDER_MODULUS)||"0"),n.javascriptGenerator.ORDER_MODULUS]},n.javascriptGenerator.math_constrain=function(e){return["Math.min(Math.max("+(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_NONE)||"0")+", "+(n.javascriptGenerator.valueToCode(e,"LOW",n.javascriptGenerator.ORDER_NONE)||"0")+"), "+(e=n.javascriptGenerator.valueToCode(e,"HIGH",n.javascriptGenerator.ORDER_NONE)||"Infinity")+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_random_int=function(e){const t=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_NONE)||"0";return e=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_NONE)||"0",[n.javascriptGenerator.provideFunction_("mathRandomInt",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n  if (a > b) {\n    // Swap a and b to ensure a is smaller.\n    var c = a;\n    a = b;\n    b = c;\n  }\n  return Math.floor(Math.random() * (b - a + 1) + a);\n}\n`)+"("+t+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_random_float=function(e){return["Math.random()",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_atan2=function(e){const t=n.javascriptGenerator.valueToCode(e,"X",n.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(n.javascriptGenerator.valueToCode(e,"Y",n.javascriptGenerator.ORDER_NONE)||"0")+", "+t+") / Math.PI * 180",n.javascriptGenerator.ORDER_DIVISION]},t.module$build$src$core$utils$string,t.NameType$$module$build$src$core$names,n.javascriptGenerator.controls_repeat_ext=function(e){let r;r=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):n.javascriptGenerator.valueToCode(e,"TIMES",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let i=n.javascriptGenerator.statementToCode(e,"DO");i=n.javascriptGenerator.addLoopTrap(i,e),e="";const o=n.javascriptGenerator.nameDB_.getDistinctName("count",t.NameType$$module$build$src$core$names.VARIABLE);let s=r;return r.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(r)||(s=n.javascriptGenerator.nameDB_.getDistinctName("repeat_end",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+s+" = "+r+";\n"),e+"for (var "+o+" = 0; "+o+" < "+s+"; "+o+"++) {\n"+i+"}\n"},n.javascriptGenerator.controls_repeat=n.javascriptGenerator.controls_repeat_ext,n.javascriptGenerator.controls_whileUntil=function(e){const t="UNTIL"===e.getFieldValue("MODE");let r=n.javascriptGenerator.valueToCode(e,"BOOL",t?n.javascriptGenerator.ORDER_LOGICAL_NOT:n.javascriptGenerator.ORDER_NONE)||"false",i=n.javascriptGenerator.statementToCode(e,"DO");return i=n.javascriptGenerator.addLoopTrap(i,e),t&&(r="!"+r),"while ("+r+") {\n"+i+"}\n"},n.javascriptGenerator.controls_for=function(e){var r=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),i=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0",o=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const s=n.javascriptGenerator.valueToCode(e,"BY",n.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let a=n.javascriptGenerator.statementToCode(e,"DO");if(a=n.javascriptGenerator.addLoopTrap(a,e),t.module$build$src$core$utils$string.isNumber(i)&&t.module$build$src$core$utils$string.isNumber(o)&&t.module$build$src$core$utils$string.isNumber(s)){var l=Number(i)<=Number(o);e="for ("+r+" = "+i+"; "+r+(l?" <= ":" >= ")+o+"; "+r,e=1===(r=Math.abs(Number(s)))?e+(l?"++":"--"):e+(l?" += ":" -= ")+r,e+=") {\n"+a+"}\n"}else e="",l=i,i.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(i)||(e+="var "+(l=n.javascriptGenerator.nameDB_.getDistinctName(r+"_start",t.NameType$$module$build$src$core$names.VARIABLE))+" = "+i+";\n"),i=o,o.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(o)||(e+="var "+(i=n.javascriptGenerator.nameDB_.getDistinctName(r+"_end",t.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+";\n"),e+="var "+(o=n.javascriptGenerator.nameDB_.getDistinctName(r+"_inc",t.NameType$$module$build$src$core$names.VARIABLE))+" = ",e=t.module$build$src$core$utils$string.isNumber(s)?e+(Math.abs(s)+";\n"):e+"Math.abs("+s+");\n",e+="if ("+l+" > "+i+") {\n",e=(e+=n.javascriptGenerator.INDENT+o+" = -"+o+";\n")+"}\nfor ("+r+" = "+l+"; "+o+" >= 0 ? "+r+" <= "+i+" : "+r+" >= "+i+"; "+r+" += "+o+") {\n"+a+"}\n";return e},n.javascriptGenerator.controls_forEach=function(e){const r=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);var i=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let o=n.javascriptGenerator.statementToCode(e,"DO");o=n.javascriptGenerator.addLoopTrap(o,e),e="";let s=i;return i.match(/^\w+$/)||(s=n.javascriptGenerator.nameDB_.getDistinctName(r+"_list",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+s+" = "+i+";\n"),i=n.javascriptGenerator.nameDB_.getDistinctName(r+"_index",t.NameType$$module$build$src$core$names.VARIABLE),o=n.javascriptGenerator.INDENT+r+" = "+s+"["+i+"];\n"+o,e+"for (var "+i+" in "+s+") {\n"+o+"}\n"},n.javascriptGenerator.controls_flow_statements=function(e){let t="";if(n.javascriptGenerator.STATEMENT_PREFIX&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e)),n.javascriptGenerator.STATEMENT_SUFFIX&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e)),n.javascriptGenerator.STATEMENT_PREFIX){const r=e.getSurroundLoop();r&&!r.suppressPrefixSuffix&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,r))}switch(e.getFieldValue("FLOW")){case"BREAK":return t+"break;\n";case"CONTINUE":return t+"continue;\n"}throw Error("Unknown flow statement.")},n.javascriptGenerator.controls_if=function(e){var t=0;let r="";n.javascriptGenerator.STATEMENT_PREFIX&&(r+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e));do{const i=n.javascriptGenerator.valueToCode(e,"IF"+t,n.javascriptGenerator.ORDER_NONE)||"false";let o=n.javascriptGenerator.statementToCode(e,"DO"+t);n.javascriptGenerator.STATEMENT_SUFFIX&&(o=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)+o),r+=(0<t?" else ":"")+"if ("+i+") {\n"+o+"}",t++}while(e.getInput("IF"+t));return(e.getInput("ELSE")||n.javascriptGenerator.STATEMENT_SUFFIX)&&(t=n.javascriptGenerator.statementToCode(e,"ELSE"),n.javascriptGenerator.STATEMENT_SUFFIX&&(t=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)+t),r+=" else {\n"+t+"}"),r+"\n"},n.javascriptGenerator.controls_ifelse=n.javascriptGenerator.controls_if,n.javascriptGenerator.logic_compare=function(e){const t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],r="=="===t||"!="===t?n.javascriptGenerator.ORDER_EQUALITY:n.javascriptGenerator.ORDER_RELATIONAL;return[(n.javascriptGenerator.valueToCode(e,"A",r)||"0")+" "+t+" "+(e=n.javascriptGenerator.valueToCode(e,"B",r)||"0"),r]},n.javascriptGenerator.logic_operation=function(e){const t="AND"===e.getFieldValue("OP")?"&&":"||",r="&&"===t?n.javascriptGenerator.ORDER_LOGICAL_AND:n.javascriptGenerator.ORDER_LOGICAL_OR;let i=n.javascriptGenerator.valueToCode(e,"A",r);if(e=n.javascriptGenerator.valueToCode(e,"B",r),i||e){const n="&&"===t?"true":"false";i||(i=n),e||(e=n)}else e=i="false";return[i+" "+t+" "+e,r]},n.javascriptGenerator.logic_negate=function(e){const t=n.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(n.javascriptGenerator.valueToCode(e,"BOOL",t)||"true"),t]},n.javascriptGenerator.logic_boolean=function(e){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.logic_null=function(e){return["null",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.logic_ternary=function(e){return[(n.javascriptGenerator.valueToCode(e,"IF",n.javascriptGenerator.ORDER_CONDITIONAL)||"false")+" ? "+(n.javascriptGenerator.valueToCode(e,"THEN",n.javascriptGenerator.ORDER_CONDITIONAL)||"null")+" : "+(e=n.javascriptGenerator.valueToCode(e,"ELSE",n.javascriptGenerator.ORDER_CONDITIONAL)||"null"),n.javascriptGenerator.ORDER_CONDITIONAL]},t.NameType$$module$build$src$core$names,n.javascriptGenerator.lists_create_empty=function(e){return["[]",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.lists_create_with=function(e){const t=Array(e.itemCount_);for(let r=0;r<e.itemCount_;r++)t[r]=n.javascriptGenerator.valueToCode(e,"ADD"+r,n.javascriptGenerator.ORDER_NONE)||"null";return["["+t.join(", ")+"]",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.lists_repeat=function(e){return[n.javascriptGenerator.provideFunction_("listsRepeat",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n}\n`)+"("+(n.javascriptGenerator.valueToCode(e,"ITEM",n.javascriptGenerator.ORDER_NONE)||"null")+", "+(e=n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_NONE)||"0")+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_length=function(e){return[(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",n.javascriptGenerator.ORDER_MEMBER]},n.javascriptGenerator.lists_isEmpty=function(e){return["!"+(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",n.javascriptGenerator.ORDER_LOGICAL_NOT]},n.javascriptGenerator.lists_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf";const r=n.javascriptGenerator.valueToCode(e,"FIND",n.javascriptGenerator.ORDER_NONE)||"''";return t=(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+t+"("+r+")",e.workspace.options.oneBasedIndex?[t+" + 1",n.javascriptGenerator.ORDER_ADDITION]:[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_getIndex=function(e){const t=e.getFieldValue("MODE")||"GET",r=e.getFieldValue("WHERE")||"FROM_START";var i=n.javascriptGenerator.valueToCode(e,"VALUE","RANDOM"===r?n.javascriptGenerator.ORDER_NONE:n.javascriptGenerator.ORDER_MEMBER)||"[]";switch(r){case"FIRST":if("GET"===t)return[i+"[0]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".shift()",n.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===t)return i+".shift();\n";break;case"LAST":if("GET"===t)return[i+".slice(-1)[0]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".pop()",n.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===t)return i+".pop();\n";break;case"FROM_START":if(e=n.javascriptGenerator.getAdjusted(e,"AT"),"GET"===t)return[i+"["+e+"]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[i+".splice("+e+", 1)[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".splice("+e+", 1);\n";break;case"FROM_END":if(e=n.javascriptGenerator.getAdjusted(e,"AT",1,!0),"GET"===t)return[i+".slice("+e+")[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("GET_REMOVE"===t)return[i+".splice("+e+", 1)[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+".splice("+e+", 1);";break;case"RANDOM":if(i=n.javascriptGenerator.provideFunction_("listsGetRandomItem",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n  var x = Math.floor(Math.random() * list.length);\n  if (remove) {\n    return list.splice(x, 1)[0];\n  } else {\n    return list[x];\n  }\n}\n`)+"("+i+", "+("GET"!==t)+")","GET"===t||"GET_REMOVE"===t)return[i,n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return i+";\n"}throw Error("Unhandled combination (lists_getIndex).")},n.javascriptGenerator.lists_setIndex=function(e){function r(){if(i.match(/^\w+$/))return"";const e=n.javascriptGenerator.nameDB_.getDistinctName("tmpList",t.NameType$$module$build$src$core$names.VARIABLE),r="var "+e+" = "+i+";\n";return i=e,r}let i=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]";const o=e.getFieldValue("MODE")||"GET";var s=e.getFieldValue("WHERE")||"FROM_START";const a=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(s){case"FIRST":if("SET"===o)return i+"[0] = "+a+";\n";if("INSERT"===o)return i+".unshift("+a+");\n";break;case"LAST":if("SET"===o)return r()+(i+"[")+i+".length - 1] = "+a+";\n";if("INSERT"===o)return i+".push("+a+");\n";break;case"FROM_START":if(e=n.javascriptGenerator.getAdjusted(e,"AT"),"SET"===o)return i+"["+e+"] = "+a+";\n";if("INSERT"===o)return i+".splice("+e+", 0, "+a+");\n";break;case"FROM_END":if(e=n.javascriptGenerator.getAdjusted(e,"AT",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION),s=r(),"SET"===o)return s+(i+"[")+i+".length - "+e+"] = "+a+";\n";if("INSERT"===o)return s+(i+".splice(")+i+".length - "+e+", 0, "+a+");\n";break;case"RANDOM":if(e=r(),e+="var "+(s=n.javascriptGenerator.nameDB_.getDistinctName("tmpX",t.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+i+".length);\n","SET"===o)return e+(i+"[")+s+"] = "+a+";\n";if("INSERT"===o)return e+(i+".splice(")+s+", 0, "+a+");\n"}throw Error("Unhandled combination (lists_setIndex).")};var s=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n};return n.javascriptGenerator.lists_getSublist=function(e){var t=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]",r=e.getFieldValue("WHERE1"),i=e.getFieldValue("WHERE2");if("FIRST"===r&&"LAST"===i)t+=".slice(0)";else if(t.match(/^\w+$/)||"FROM_END"!==r&&"FROM_START"===i){switch(r){case"FROM_START":r=n.javascriptGenerator.getAdjusted(e,"AT1");break;case"FROM_END":r=t+".length - "+(r=n.javascriptGenerator.getAdjusted(e,"AT1",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION));break;case"FIRST":r="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(i){case"FROM_START":i=n.javascriptGenerator.getAdjusted(e,"AT2",1);break;case"FROM_END":i=t+".length - "+(i=n.javascriptGenerator.getAdjusted(e,"AT2",0,!1,n.javascriptGenerator.ORDER_SUBTRACTION));break;case"LAST":i=t+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}t=t+".slice("+r+", "+i+")"}else{const o=n.javascriptGenerator.getAdjusted(e,"AT1");e=n.javascriptGenerator.getAdjusted(e,"AT2");const a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};t=n.javascriptGenerator.provideFunction_("subsequence"+a[r]+a[i],`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===r||"FROM_START"===r?", at1":""}${"FROM_END"===i||"FROM_START"===i?", at2":""}) {\n  var start = ${s("sequence",r,"at1")};\n  var end = ${s("sequence",i,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+t+("FROM_END"===r||"FROM_START"===r?", "+o:"")+("FROM_END"===i||"FROM_START"===i?", "+e:"")+")"}return[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_sort=function(e){const t=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",r="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[t+".slice().sort("+n.javascriptGenerator.provideFunction_("listsGetSortCompare",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n  var compareFuncs = {\n    'NUMERIC': function(a, b) {\n        return Number(a) - Number(b); },\n    'TEXT': function(a, b) {\n        return a.toString() > b.toString() ? 1 : -1; },\n    'IGNORE_CASE': function(a, b) {\n        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\n  };\n  var compare = compareFuncs[type];\n  return function(a, b) { return compare(a, b) * direction; };\n}\n      `)+'("'+e+'", '+r+"))",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_split=function(e){let t=n.javascriptGenerator.valueToCode(e,"INPUT",n.javascriptGenerator.ORDER_MEMBER);const r=n.javascriptGenerator.valueToCode(e,"DELIM",n.javascriptGenerator.ORDER_NONE)||"''";if("SPLIT"===(e=e.getFieldValue("MODE")))t||(t="''"),e="split";else{if("JOIN"!==e)throw Error("Unknown mode: "+e);t||(t="[]"),e="join"}return[t+"."+e+"("+r+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_reverse=function(e){return[(n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.colour_picker=function(e){return[n.javascriptGenerator.quote_(e.getFieldValue("COLOUR")),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.colour_random=function(e){return[n.javascriptGenerator.provideFunction_("colourRandom",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * Math.pow(2, 24));\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`)+"()",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.colour_rgb=function(e){const t=n.javascriptGenerator.valueToCode(e,"RED",n.javascriptGenerator.ORDER_NONE)||0,r=n.javascriptGenerator.valueToCode(e,"GREEN",n.javascriptGenerator.ORDER_NONE)||0;return e=n.javascriptGenerator.valueToCode(e,"BLUE",n.javascriptGenerator.ORDER_NONE)||0,[n.javascriptGenerator.provideFunction_("colourRgb",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+t+", "+r+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.colour_blend=function(e){const t=n.javascriptGenerator.valueToCode(e,"COLOUR1",n.javascriptGenerator.ORDER_NONE)||"'#000000'",r=n.javascriptGenerator.valueToCode(e,"COLOUR2",n.javascriptGenerator.ORDER_NONE)||"'#000000'";return e=n.javascriptGenerator.valueToCode(e,"RATIO",n.javascriptGenerator.ORDER_NONE)||.5,[n.javascriptGenerator.provideFunction_("colourBlend",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+t+", "+r+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.__namespace__=t,n}(requireBlockly_compressed())),javascript_compressed.exports}javascript$1.exports=(requireCoreBrowser(),requireJavascript_compressed());var javascriptExports=javascript$1.exports,blockly={exports:{}},browser$1={exports:{}},en$1={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,en$1.exports=((e=e||{Msg:Object.create(null)}).Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DIALOG_CANCEL="Cancel",e.Msg.DIALOG_OK="OK",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="÷",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="×",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg)),en$1.exports;var e}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed,hasRequiredBlocks,hasRequiredBrowser;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,blocks_compressed.exports=function(e){var t=e.__namespace__,n={};t.module$build$src$core$contextmenu,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml;var r=t.module$build$src$core$msg.Msg,i=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,o=t.module$build$src$core$common.defineBlocks;n.blocks=i([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var s={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!==this.type&&"variables_get_reporter_dynamic"!==this.type||(n={text:r.RENAME_VARIABLE,enabled:!0,callback:a(this)},s=this.getField("VAR").getText(),s={text:r.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:l(this)},e.unshift(n),e.unshift(s));else{var n=this.getFieldValue("VAR"),i=this.workspace.getVariableById(n).type;if("variables_get_dynamic"===this.type){n="variables_set_dynamic";var o=r.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",o=r.VARIABLES_SET_CREATE_GET;var s={enabled:0<this.workspace.remainingCapacity()};const a=this.getField("VAR").getText();s.text=o.replace("%1",a),(o=t.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","VAR"),o.setAttribute("variabletype",i),o.appendChild(t.module$build$src$core$utils$xml.createTextNode(a)),(i=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",n),i.appendChild(o),s.callback=t.module$build$src$core$contextmenu.callbackFactory(this,i),e.push(s)}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.module$build$src$core$variables.getVariable(this.workspace,e),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},a=function(e){return function(){const n=e.workspace,r=e.getField("VAR").getVariable();t.module$build$src$core$variables.renameVariable(n,r)}},l=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",s),o(n.blocks);var c={};t.module$build$src$core$contextmenu,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml;var u=t.module$build$src$core$msg.Msg,h=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,d=t.module$build$src$core$common.defineBlocks;c.blocks=h([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var p={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!==this.type&&"variables_get_reporter"!==this.type||(n={text:u.RENAME_VARIABLE,enabled:!0,callback:f(this)},i=this.getField("VAR").getText(),i={text:u.DELETE_VARIABLE.replace("%1",i),enabled:!0,callback:m(this)},e.unshift(n),e.unshift(i));else{if("variables_get"===this.type)var n="variables_set",r=u.VARIABLES_GET_CREATE_SET;else n="variables_get",r=u.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},o=this.getField("VAR").getText();i.text=r.replace("%1",o),(r=t.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","VAR"),r.appendChild(t.module$build$src$core$utils$xml.createTextNode(o)),(o=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",n),o.appendChild(r),i.callback=t.module$build$src$core$contextmenu.callbackFactory(this,o),e.push(i)}}},f=function(e){return function(){const n=e.workspace,r=e.getField("VAR").getVariable();t.module$build$src$core$variables.renameVariable(n,r)}},m=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",p),d(c.blocks);var g={};t.module$build$src$core$extensions;var _=t.module$build$src$core$msg.Msg;t.module$build$src$core$utils$xml,t.Align$$module$build$src$core$input,t.module$build$src$core$connection_type.ConnectionType;var b=t.module$build$src$core$field_dropdown.FieldDropdown;t.FieldImage$$module$build$src$core$field_image,t.FieldTextInput$$module$build$src$core$field_textinput,t.Mutator$$module$build$src$core$mutator;var v=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,y=t.module$build$src$core$common.defineBlocks;g.blocks=v([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),g.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[_.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[_.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[_.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[_.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[_.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[_.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(_.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(_.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),_.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(_.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(_.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");var n=this.getInput("AT1").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(e,t){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),t?(this.appendValueInput("AT"+e).setCheck("Number"),_.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(_.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2===e&&_.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(_.TEXT_GET_SUBSTRING_TAIL));const n=new b(this["WHERE_OPTIONS_"+e],(function(n){const r="FROM_START"===n||"FROM_END"===n;if(r!==t){const t=this.getSourceBlock();return t.updateAt_(e,r),t.setFieldValue(n,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(n,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},g.blocks.text_changeCase={init:function(){const e=[[_.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[_.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[_.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(_.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new b(e),"CASE"),this.setOutput(!0,"String"),this.setTooltip(_.TEXT_CHANGECASE_TOOLTIP)}},g.blocks.text_trim={init:function(){const e=[[_.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[_.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[_.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(_.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new b(e),"MODE"),this.setOutput(!0,"String"),this.setTooltip(_.TEXT_TRIM_TOOLTIP)}},g.blocks.text_print={init:function(){this.jsonInit({message0:_.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:_.TEXT_PRINT_TOOLTIP,helpUrl:_.TEXT_PRINT_HELPURL})}};var O={updateType_:function(e){this.outputConnection.setCheck("NUMBER"===e?"Number":"String")},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};g.blocks.text_prompt_ext=Object.assign({},O,{init:function(){var e=[[_.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[_.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(_.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const t=this;e=new b(e,(function(e){t.updateType_(e)})),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"===t.getFieldValue("TYPE")?_.TEXT_PROMPT_TOOLTIP_TEXT:_.TEXT_PROMPT_TOOLTIP_NUMBER}))}}),g.blocks.text_prompt=Object.assign({},O,{init:function(){this.mixin(S);var e=[[_.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[_.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const n=this;this.setHelpUrl(_.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new b(e,(function(e){n.updateType_(e)})),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"===n.getFieldValue("TYPE")?_.TEXT_PROMPT_TOOLTIP_TEXT:_.TEXT_PROMPT_TOOLTIP_NUMBER}))}}),g.blocks.text_count={init:function(){this.jsonInit({message0:_.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:_.TEXT_COUNT_TOOLTIP,helpUrl:_.TEXT_COUNT_HELPURL})}},g.blocks.text_replace={init:function(){this.jsonInit({message0:_.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:_.TEXT_REPLACE_TOOLTIP,helpUrl:_.TEXT_REPLACE_HELPURL})}},g.blocks.text_reverse={init:function(){this.jsonInit({message0:_.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:_.TEXT_REVERSE_TOOLTIP,helpUrl:_.TEXT_REVERSE_HELPURL})}};var S={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(let t,n=0;t=this.inputList[n];n++)for(let r,i=0;r=t.fieldRow[i];i++)if(e===r.name)return t.insertFieldAt(i,this.newQuote_(!0)),void t.insertFieldAt(i+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new t.FieldImage$$module$build$src$core$field_image(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"“":"”")}},T=function(){this.mixin(S),this.quoteField_("TEXT")},x={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("text_create_join_container");t.initSvg();let n=t.getInput("STACK").connection;for(let r=0;r<this.itemCount_;r++){const t=e.newBlock("text_create_join_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)n.isInsertionMarker()||e.push(n.valueConnection_),n=n.getNextBlock();for(n=0;n<this.itemCount_;n++){const t=this.getInput("ADD"+n).connection.targetConnection;t&&-1===e.indexOf(t)&&t.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator$$module$build$src$core$mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT);0===e&&n.appendField(_.TEXT_JOIN_TITLE_CREATEWITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},E=function(){this.mixin(S),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};t.module$build$src$core$extensions.register("text_append_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var w=function(){const e=this;this.setTooltip((function(){return _.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")}))},C={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),_.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(_.ORDINAL_NUMBER_SUFFIX)),_.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(_.TEXT_CHARAT_TAIL)),this.isAt_=e}},A=function(){this.getField("WHERE").setValidator((function(e){(e="FROM_START"===e||"FROM_END"===e)!==this.isAt_&&this.getSourceBlock().updateAt_(e)})),this.updateAt_(!0);const e=this;this.setTooltip((function(){var t=e.getFieldValue("WHERE");let n=_.TEXT_CHARAT_TOOLTIP;return("FROM_START"===t||"FROM_END"===t)&&(t="FROM_START"===t?_.LISTS_INDEX_FROM_START_TOOLTIP:_.LISTS_INDEX_FROM_END_TOOLTIP)&&(n+="  "+t.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),n}))};t.module$build$src$core$extensions.register("text_indexOf_tooltip",w),t.module$build$src$core$extensions.register("text_quotes",T),t.module$build$src$core$extensions.registerMutator("text_join_mutator",x,E),t.module$build$src$core$extensions.registerMutator("text_charAt_mutator",C,A),y(g.blocks);var k={};t.module$build$src$core$contextmenu,t.module$build$src$core$events$events,t.module$build$src$core$procedures,t.module$build$src$core$variables,t.module$build$src$core$xml,t.module$build$src$core$utils$xml,t.Align$$module$build$src$core$input,t.config$$module$build$src$core$config,t.FieldCheckbox$$module$build$src$core$field_checkbox,t.FieldLabel$$module$build$src$core$field_label,t.FieldTextInput$$module$build$src$core$field_textinput;var R=t.module$build$src$core$msg.Msg;t.Mutator$$module$build$src$core$mutator,t.module$build$src$core$names.Names;var I=t.module$build$src$core$common.defineBlocks;k.blocks={};var M={setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(R.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e="";this.arguments_.length&&(e=R.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.module$build$src$core$events$events.disable();try{this.setFieldValue(e,"PARAMS")}finally{t.module$build$src$core$events$events.enable()}},mutationToDom:function(e){const n=t.module$build$src$core$utils$xml.createElement("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(let r=0;r<this.argumentVarModels_.length;r++){const i=t.module$build$src$core$utils$xml.createElement("arg"),o=this.argumentVarModels_[r];i.setAttribute("name",o.name),i.setAttribute("varid",o.getId()),e&&this.paramIds_&&i.setAttribute("paramId",this.paramIds_[r]),n.appendChild(i)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let r,i=0;r=e.childNodes[i];i++)if("arg"===r.nodeName.toLowerCase()){const e=r.getAttribute("name");var n=r.getAttribute("varid")||r.getAttribute("varId");this.arguments_.push(e),null!==(n=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,n,e,""))?this.argumentVarModels_.push(n):console.log(`Failed to create a variable named "${e}", ignoring.`)}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const e=Object.create(null);if(this.argumentVarModels_.length){e.params=[];for(let t=0;t<this.argumentVarModels_.length;t++)e.params.push({name:this.argumentVarModels_[t].name,id:this.argumentVarModels_[t].getId()})}return this.hasStatements_||(e.hasStatements=!1),e},loadExtraState:function(e){if(this.arguments_=[],this.argumentVarModels_=[],e.params)for(let r=0;r<e.params.length;r++){var n=e.params[r];n=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,n.id,n.name,""),this.arguments_.push(n.name),this.argumentVarModels_.push(n)}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(!1!==e.hasStatements)},decompose:function(e){const n=t.module$build$src$core$utils$xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var r=t.module$build$src$core$utils$xml.createElement("statement");r.setAttribute("name","STACK"),n.appendChild(r);for(let o=0;o<this.arguments_.length;o++){const e=t.module$build$src$core$utils$xml.createElement("block");e.setAttribute("type","procedures_mutatorarg");var i=t.module$build$src$core$utils$xml.createElement("field");i.setAttribute("name","NAME");const n=t.module$build$src$core$utils$xml.createTextNode(this.arguments_[o]);i.appendChild(n),e.appendChild(i),i=t.module$build$src$core$utils$xml.createElement("next"),e.appendChild(i),r.appendChild(e),r=i}return e=t.module$build$src$core$xml.domToBlock(n,e),"procedures_defreturn"===this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.module$build$src$core$procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let n=e.getInputTargetBlock("STACK");for(;n&&!n.isInsertionMarker();){var r=n.getFieldValue("NAME");this.arguments_.push(r),r=this.workspace.getVariable(r,""),this.argumentVarModels_.push(r),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"===e,this.hasStatements_!==e)&&(e?(this.setStatements_(!0),t.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var r=this.workspace.getVariableById(e);if(""===r.type){r=r.name,n=this.workspace.getVariableById(n);var i=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=n.name,this.argumentVarModels_[t]=n,i=!0);i&&(this.displayRenamedVar_(r,n.name),t.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(e){const n=e.name;let r,i=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e.getId()&&(r=this.arguments_[t],this.arguments_[t]=n,i=!0);i&&(this.displayRenamedVar_(r,n),t.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(e,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const r=this.mutator.workspace_.getAllBlocks(!1);for(let i,o=0;i=r[o];o++)"procedures_mutatorarg"===i.type&&t.module$build$src$core$names.Names.equals(e,i.getFieldValue("NAME"))&&i.setFieldValue(n,"NAME")}},customContextMenu:function(e){if(!this.isInFlyout){var n={enabled:!0},r=this.getFieldValue("NAME");n.text=R.PROCEDURES_CREATE_DO.replace("%1",r);var i=t.module$build$src$core$utils$xml.createElement("mutation");for(i.setAttribute("name",r),r=0;r<this.arguments_.length;r++){var o=t.module$build$src$core$utils$xml.createElement("arg");o.setAttribute("name",this.arguments_[r]),i.appendChild(o)}if((r=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",this.callType_),r.appendChild(i),n.callback=t.module$build$src$core$contextmenu.callbackFactory(this,r),e.push(n),!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++)i={enabled:!0},r=this.argumentVarModels_[n],i.text=R.VARIABLES_SET_CREATE_GET.replace("%1",r.name),r=t.module$build$src$core$variables.generateVariableFieldDom(r),(o=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type","variables_get"),o.appendChild(r),i.callback=t.module$build$src$core$contextmenu.callbackFactory(this,o),e.push(i)}}};k.blocks.procedures_defnoreturn=Object.assign({},M,{init:function(){var e=t.module$build$src$core$procedures.findLegalName("",this);(e=new t.FieldTextInput$$module$build$src$core$field_textinput(e,t.module$build$src$core$procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(R.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&R.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(R.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(R.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(R.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),k.blocks.procedures_defreturn=Object.assign({},M,{init:function(){var e=t.module$build$src$core$procedures.findLegalName("",this);(e=new t.FieldTextInput$$module$build$src$core$field_textinput(e,t.module$build$src$core$procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(R.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.Align$$module$build$src$core$input.RIGHT).appendField(R.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&R.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(R.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(R.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(R.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),k.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(R.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(R.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(R.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},k.blocks.procedures_mutatorarg={init:function(){const e=new t.FieldTextInput$$module$build$src$core$field_textinput(t.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(R.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(R.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var n=this.getSourceBlock();const r=t.Mutator$$module$build$src$core$mutator.findParentWs(n.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;const i=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),o=e.toLowerCase();for(let t=0;t<i.length;t++){if(i[t].id===this.getSourceBlock().id)continue;const e=i[t].getFieldValue("NAME");if(e&&e.toLowerCase()===o)return null}return n.isInFlyout||((n=r.getVariable(e,""))&&n.name!==e&&r.renameVariableById(n.getId(),e),n||(n=r.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n)),e},deleteIntermediateVars_:function(e){const n=t.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(let t=0;t<this.createdVariables_.length;t++){const r=this.createdVariables_[t];r.name!==e&&n.deleteVariableById(r.getId())}}};var $={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.module$build$src$core$names.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?R.PROCEDURES_CALLRETURN_TOOLTIP:R.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var r=t.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),i=r&&r.mutator&&r.mutator.isVisible();if(i?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),e.join("\n")===this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!==e.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),r=this.rendered,this.rendered=!1;for(let e=0;e<this.arguments_.length;e++){var o=this.getInput("ARG"+e);o&&(o=o.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=o,i&&o&&-1===n.indexOf(this.quarkIds_[e])&&(o.disconnect(),o.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],e=0;e<this.arguments_.length;e++)i=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[e],""),this.argumentVarModels_.push(i);if(this.updateShape_(),this.quarkIds_=n)for(n=0;n<this.arguments_.length;n++)(e=this.quarkIds_[n])in this.quarkConnections_&&(t.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[e],this,"ARG"+n)||delete this.quarkConnections_[e]);(this.rendered=r)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.module$build$src$core$events$events.disable();try{n.setValue(this.arguments_[e])}finally{t.module$build$src$core$events$events.enable()}}else n=new t.FieldLabel$$module$build$src$core$field_label(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT).appendField(n,"ARGNAME"+e).init()}for(e=this.arguments_.length;this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(R.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(let n=0;n<this.arguments_.length;n++){const r=t.module$build$src$core$utils$xml.createElement("arg");r.setAttribute("name",this.arguments_[n]),e.appendChild(r)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];const n=[];for(let r,i=0;r=e.childNodes[i];i++)"arg"===r.nodeName.toLowerCase()&&(t.push(r.getAttribute("name")),n.push(r.getAttribute("paramId")));this.setProcedureParameters_(t,n)},saveExtraState:function(){const e=Object.create(null);return e.name=this.getProcedureCall(),this.arguments_.length&&(e.params=this.arguments_),e},loadExtraState:function(e){if(this.renameProcedure(this.getProcedureCall(),e.name),e=e.params){const t=[];t.length=e.length,t.fill(null),this.setProcedureParameters_(e,t)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type===t.module$build$src$core$events$events.BLOCK_CREATE&&-1!==e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=t.module$build$src$core$procedures.getDefinition(n,this.workspace))||n.type===this.defType_&&JSON.stringify(n.getVars())===JSON.stringify(this.arguments_)||(n=null),!n){t.module$build$src$core$events$events.setGroup(e.group),e=t.module$build$src$core$utils$xml.createElement("xml"),(n=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type",this.defType_);var r=this.getRelativeToSurfaceXY(),i=r.y+2*t.config$$module$build$src$core$config.snapRadius;n.setAttribute("x",r.x+t.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),n.setAttribute("y",i),r=this.mutationToDom(),n.appendChild(r),(r=t.module$build$src$core$utils$xml.createElement("field")).setAttribute("name","NAME"),i=this.getProcedureCall();const o=t.module$build$src$core$procedures.findLegalName(i,this);i!==o&&this.renameProcedure(i,o),r.appendChild(t.module$build$src$core$utils$xml.createTextNode(i)),n.appendChild(r),e.appendChild(n),t.module$build$src$core$xml.domToWorkspace(e,this.workspace),t.module$build$src$core$events$events.setGroup(!1)}}else e.type===t.module$build$src$core$events$events.BLOCK_DELETE?(n=this.getProcedureCall(),t.module$build$src$core$procedures.getDefinition(n,this.workspace)||(t.module$build$src$core$events$events.setGroup(e.group),this.dispose(!0),t.module$build$src$core$events$events.setGroup(!1))):e.type===t.module$build$src$core$events$events.CHANGE&&"disabled"===e.element&&(n=this.getProcedureCall(),(n=t.module$build$src$core$procedures.getDefinition(n,this.workspace))&&n.id===e.blockId&&((n=t.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.module$build$src$core$events$events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.module$build$src$core$events$events.setGroup(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n={enabled:!0};n.text=R.PROCEDURES_HIGHLIGHT_DEF;var r=this.getProcedureCall(),i=this.workspace;n.callback=function(){const e=t.module$build$src$core$procedures.getDefinition(r,i);e&&(i.centerOnBlock(e.id),e.select())},e.push(n)}}};k.blocks.procedures_callnoreturn=Object.assign({},$,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(R.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),k.blocks.procedures_callreturn=Object.assign({},$,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(R.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),k.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(R.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(R.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(R.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(R.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_="1"===e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(R.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(!(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==t.module$build$src$core$events$events.BLOCK_MOVE)){var n=!1,r=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"===r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(R.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(R.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(R.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(r=t.module$build$src$core$events$events.getGroup(),t.module$build$src$core$events$events.setGroup(e.group),this.setEnabled(n),t.module$build$src$core$events$events.setGroup(r))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},I(k.blocks);var P={};t.module$build$src$core$extensions,t.module$build$src$core$field_dropdown,t.module$build$src$core$utils$xml;var L=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,D=t.module$build$src$core$common.defineBlocks;P.blocks=L([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var N={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};t.module$build$src$core$extensions.register("math_op_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("OP",N));var B={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation"),n="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",n),e},domToMutation:function(e){e="true"===e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){const t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},F=function(){this.getField("PROPERTY").setValidator((function(e){e="DIVISIBLE_BY"===e,this.getSourceBlock().updateShape_(e)}))};t.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",B,F),t.module$build$src$core$extensions.register("math_change_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var G={updateType_:function(e){"MODE"===e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},U=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))};t.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",G,U),D(P.blocks);var V={};t.module$build$src$core$contextmenu,t.module$build$src$core$events$events,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml;var W=t.module$build$src$core$msg.Msg,H=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Q=t.module$build$src$core$common.defineBlocks;V.blocks=H([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var z={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};t.module$build$src$core$extensions.register("controls_whileUntil_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("MODE",z));var j={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};t.module$build$src$core$extensions.register("controls_flow_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",j));var X={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),r=n.name;if(!this.isCollapsed()&&null!==r){const i={enabled:!0};i.text=W.VARIABLES_SET_CREATE_GET.replace("%1",r),n=t.module$build$src$core$variables.generateVariableFieldDom(n),(r=t.module$build$src$core$utils$xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(n),i.callback=t.module$build$src$core$contextmenu.callbackFactory(this,r),e.push(i)}}}};t.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",X),t.module$build$src$core$extensions.register("controls_for_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.module$build$src$core$extensions.register("controls_forEach_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),V.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var Y={getSurroundLoop:function(){let e=this;do{if(V.loopTypes.has(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()&&e.type===t.module$build$src$core$events$events.BLOCK_MOVE){var n=this.getSurroundLoop(this);if(this.setWarningText(n?null:W.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const r=t.module$build$src$core$events$events.getGroup();t.module$build$src$core$events$events.setGroup(e.group),this.setEnabled(n),t.module$build$src$core$events$events.setGroup(r)}}}};t.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",Y),Q(V.blocks);var Z={};t.module$build$src$core$events$events,t.module$build$src$core$extensions,t.module$build$src$core$utils$xml;var q=t.module$build$src$core$msg.Msg;t.Mutator$$module$build$src$core$mutator;var K=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,J=t.module$build$src$core$common.defineBlocks;Z.blocks=K([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var ee={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};t.module$build$src$core$extensions.register("logic_op_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("OP",ee));var te={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=t.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=Object.create(null);return this.elseifCount_&&(e.elseIfCount=this.elseifCount_),this.elseCount_&&(e.hasElse=!0),e},loadExtraState:function(e){this.elseifCount_=e.elseIfCount||0,this.elseCount_=e.hasElse?1:0,this.updateShape_()},decompose:function(e){const t=e.newBlock("controls_if_if");t.initSvg();let n=t.nextConnection;for(let r=1;r<=this.elseifCount_;r++){const t=e.newBlock("controls_if_elseif");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const t=[null],n=[null];let r=null;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,r=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,r)},saveConnections:function(e){e=e.nextConnection.targetBlock();let t=1;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t);const r=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=r&&r.connection.targetConnection,t++;break;case"controls_if_else":n=this.getInput("ELSE"),e.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}},rebuildShape_:function(){const e=[null],t=[null];let n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(let r=1;this.getInput("IF"+r);r++){const n=this.getInput("IF"+r),i=this.getInput("DO"+r);e.push(n.connection.targetConnection),t.push(i.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);e++)this.removeInput("IF"+e),this.removeInput("DO"+e);for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(q.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(q.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(q.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,n,r){for(let i=1;i<=this.elseifCount_;i++)t.Mutator$$module$build$src$core$mutator.reconnect(e[i],this,"IF"+i),t.Mutator$$module$build$src$core$mutator.reconnect(n[i],this,"DO"+i);t.Mutator$$module$build$src$core$mutator.reconnect(r,this,"ELSE")}};t.module$build$src$core$extensions.registerMutator("controls_if_mutator",te,null,["controls_if_elseif","controls_if_else"]);var ne=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?q.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?q.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?q.CONTROLS_IF_TOOLTIP_4:"":q.CONTROLS_IF_TOOLTIP_1}.bind(this))};t.module$build$src$core$extensions.register("controls_if_tooltip",ne);var re={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A");const r=this.getInputTargetBlock("B");n&&r&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,r.outputConnection)&&(t.module$build$src$core$events$events.setGroup(e.group),(e=this.prevBlocks_[0])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(n=this.prevBlocks_[1])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ie=function(){this.mixin(re)};t.module$build$src$core$extensions.register("logic_compare",ie);var oe={prevParentConnection_:null,onchange:function(e){const n=this.getInputTargetBlock("THEN"),r=this.getInputTargetBlock("ELSE"),i=this.outputConnection.targetConnection;if((n||r)&&i)for(let o=0;2>o;o++){const s=1===o?n:r;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,i)&&(t.module$build$src$core$events$events.setGroup(e.group),i===this.prevParentConnection_?(this.unplug(),i.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),t.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=i}};t.module$build$src$core$extensions.registerMixin("logic_ternary",oe),J(Z.blocks);var se={};t.module$build$src$core$utils$xml,t.module$build$src$core$xml,t.Align$$module$build$src$core$input,t.module$build$src$core$connection_type.ConnectionType;var ae=t.module$build$src$core$field_dropdown.FieldDropdown,le=t.module$build$src$core$msg.Msg;t.Mutator$$module$build$src$core$mutator;var ce=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,ue=t.module$build$src$core$common.defineBlocks;se.blocks=ce([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),se.blocks.lists_create_with={init:function(){this.setHelpUrl(le.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(le.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("lists_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let r=0;r<this.itemCount_;r++){const t=e.newBlock("lists_create_with_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)n.isInsertionMarker()||e.push(n.valueConnection_),n=n.getNextBlock();for(n=0;n<this.itemCount_;n++){const t=this.getInput("ADD"+n).connection.targetConnection;t&&-1===e.indexOf(t)&&t.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator$$module$build$src$core$mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(le.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT);0===e&&n.appendField(le.LISTS_CREATE_WITH_INPUT_WITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},se.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(le.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(le.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},se.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(le.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(le.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},se.blocks.lists_indexOf={init:function(){const e=[[le.LISTS_INDEX_OF_FIRST,"FIRST"],[le.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(le.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(le.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new ae(e),"END"),this.setInputsInline(!0);const t=this;this.setTooltip((function(){return le.LISTS_INDEX_OF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")}))}},se.blocks.lists_getIndex={init:function(){var e=[[le.LISTS_GET_INDEX_GET,"GET"],[le.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[le.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[le.LISTS_GET_INDEX_FROM_START,"FROM_START"],[le.LISTS_GET_INDEX_FROM_END,"FROM_END"],[le.LISTS_GET_INDEX_FIRST,"FIRST"],[le.LISTS_GET_INDEX_LAST,"LAST"],[le.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(le.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),e=new ae(e,(function(e){e="REMOVE"===e,this.getSourceBlock().updateStatement_(e)})),this.appendValueInput("VALUE").setCheck("Array").appendField(le.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),le.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(le.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const t=this;this.setTooltip((function(){const e=t.getFieldValue("MODE"),n=t.getFieldValue("WHERE");let r="";switch(e+" "+n){case"GET FROM_START":case"GET FROM_END":r=le.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":r=le.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":r=le.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":r=le.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":r=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":r=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":r=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":r=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":r=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":r=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":r=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":r=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(r+="  "+("FROM_START"===n?le.LISTS_INDEX_FROM_START_TOOLTIP:le.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);const n=this.getInput("AT").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(e){const t="true"===e.getAttribute("statement");this.updateStatement_(t),e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(e){e.isStatement?this.updateStatement_(!0):"string"==typeof e&&this.domToMutation(t.module$build$src$core$xml.textToDom(e))},updateStatement_:function(e){e!==!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const t=new ae(this.WHERE_OPTIONS,(function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}}));this.getInput("AT").appendField(t,"WHERE"),le.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},se.blocks.lists_setIndex={init:function(){const e=[[le.LISTS_SET_INDEX_SET,"SET"],[le.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[le.LISTS_GET_INDEX_FROM_START,"FROM_START"],[le.LISTS_GET_INDEX_FROM_END,"FROM_END"],[le.LISTS_GET_INDEX_FIRST,"FIRST"],[le.LISTS_GET_INDEX_LAST,"LAST"],[le.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(le.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(le.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new ae(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(le.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(le.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const t=this;this.setTooltip((function(){const e=t.getFieldValue("MODE"),n=t.getFieldValue("WHERE");let r="";switch(e+" "+n){case"SET FROM_START":case"SET FROM_END":r=le.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":r=le.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":r=le.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":r=le.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":r=le.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":r=le.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":r=le.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":r=le.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(r+="  "+le.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation"),n=this.getInput("AT").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const t=new ae(this.WHERE_OPTIONS,(function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(t,"WHERE")}},se.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[le.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[le.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[le.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[le.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[le.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[le.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(le.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(le.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),le.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(le.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(le.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");var n=this.getInput("AT1").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e,t){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),t?(this.appendValueInput("AT"+e).setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);const n=new ae(this["WHERE_OPTIONS_"+e],(function(n){const r="FROM_START"===n||"FROM_END"===n;if(r!==t){const t=this.getSourceBlock();return t.updateAt_(e,r),t.setFieldValue(n,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(n,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),le.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},se.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},se.blocks.lists_split={init:function(){const e=this,t=new ae([[le.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[le.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(t){e.updateType_(t)}));this.setHelpUrl(le.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(t,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(le.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){const t=e.getFieldValue("MODE");if("SPLIT"===t)return le.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===t)return le.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+t)}))},updateType_:function(e){if(this.getFieldValue("MODE")!==e){const e=this.getInput("INPUT").connection;e.setShadowDom(null);const t=e.targetBlock();t&&(e.disconnect(),t.isShadow()?t.dispose():this.bumpNeighbours())}"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},ue(se.blocks);var he={},de=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,pe=t.module$build$src$core$common.defineBlocks;he.blocks=de([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),pe(he.blocks);var fe={};return fe.colour=he,fe.lists=se,fe.logic=Z,fe.loops=V,fe.math=P,fe.procedures=k,fe.texts=g,fe.variables=c,fe.variablesDynamic=n,fe.blocks=Object.assign({},he.blocks,se.blocks,Z.blocks,V.blocks,P.blocks,k.blocks,c.blocks,n.blocks),fe.__namespace__=t,fe}(requireBlockly_compressed())),blocks_compressed.exports}function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,blocks.exports=requireBlocks_compressed()),blocks.exports}function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser$1.exports=(e=requireCoreBrowser(),t=requireEn(),requireBlocks(),e.setLocale(t),e)),browser$1.exports;var e,t}blockly.exports=requireBrowser();var blocklyExports=blockly.exports;const Blockly=getDefaultExportFromCjs(blocklyExports),block_circle={name:"circle",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldLabelSerializable("Go in circle of radius"),"Circular motion").appendField(new Blockly.FieldNumber(0,0),"radius_m").appendField("m"),this.appendDummyInput().appendField("at speed").appendField(new Blockly.FieldNumber(.2),"velocity").appendField("m/s"),this.appendDummyInput().appendField("for").appendField(new Blockly.FieldAngle(90),"angle_degrees").appendField("degrees,"),this.appendDummyInput().appendField(new Blockly.FieldDropdown([["counterclockwise","ccw"],["clockwise","cw"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"circle("+e.getFieldValue("radius_m")+","+e.getFieldValue("velocity")+","+e.getFieldValue("angle_degrees")+",'"+e.getFieldValue("direction")+"')",javascriptGenerator:(e,t)=>{const n=e.getFieldValue("radius_m"),r=e.getFieldValue("velocity"),i=e.getFieldValue("angle_degrees");var o=!0;return"ccw"==e.getFieldValue("direction")&&(o=!1),`duration += simulator.move_circle_vel(group_state, ${n}, ${r}, ${i}, ${o});`}},block_start_linear_motion={name:"start_linear_motion",block:{init:function(){this.appendDummyInput().appendField("Start linear motion with speeds in"),this.appendDummyInput().appendField("x direction:").appendField(new Blockly.FieldNumber(0),"velocity_x_m").appendField("m/s"),this.appendDummyInput().appendField("y direction:").appendField(new Blockly.FieldNumber(0),"velocity_y_m").appendField("m/s"),this.appendDummyInput().appendField("z direction:").appendField(new Blockly.FieldNumber(0),"velocity_z_m").appendField("m/s"),this.appendDummyInput().appendField("yaw:").appendField(new Blockly.FieldAngle(90),"rate_yaw").appendField("/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"start_linear_motion("+e.getFieldValue("velocity_x_m")+","+e.getFieldValue("velocity_y_m")+","+e.getFieldValue("velocity_z_m")+","+e.getFieldValue("rate_yaw")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_set_default_height={name:"set_default_height",block:{init:function(){this.appendDummyInput().appendField("set default height to").appendField(new Blockly.FieldNumber(0,0),"default_height").appendField("meters"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"set_default_height("+e.getFieldValue("default_height")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_stop={name:"stop",block:{init:function(){this.appendDummyInput().appendField("stop and hover"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(0),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"stop_and_hover(cf)\n",javascriptGenerator:(e,t)=>"duration += simulator.stop_and_hover(group_state);\n"},block_go_to={name:"go_to",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"goto_duration(cf, "+e.getFieldValue("x_pos")+","+e.getFieldValue("y_pos")+","+e.getFieldValue("z_pos")+","+e.getFieldValue("duration")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.go_to_xyz_duration(group_state, ${e.getFieldValue("x_pos")}, ${e.getFieldValue("y_pos")}, ${e.getFieldValue("z_pos")}, ${e.getFieldValue("duration")});\n`},block_go_to_speed={name:"go_to_speed",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"go_to(cf, "+e.getFieldValue("x_pos")+","+e.getFieldValue("y_pos")+","+e.getFieldValue("z_pos")+","+e.getFieldValue("speed")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.go_to_xyz_speed(group_state, ${e.getFieldValue("x_pos")}, ${e.getFieldValue("y_pos")}, ${e.getFieldValue("z_pos")}, ${e.getFieldValue("speed")});\n`},block_land={name:"land",block:{init:function(){this.appendDummyInput().appendField("land at height").appendField(new Blockly.FieldNumber(0),"height").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"land(cf, "+e.getFieldValue("height")+","+e.getFieldValue("duration")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.land(group_state, ${e.getFieldValue("height")}, ${e.getFieldValue("duration")});\n`},block_move_angles={name:"move_angles",block:{init:function(){this.appendDummyInput().appendField("move towards"),this.appendDummyInput().appendField("horizontal angle").appendField(new Blockly.FieldAngle(90),"horizontal angle"),this.appendDummyInput().appendField("vertical angle").appendField(new Blockly.FieldAngle(90),"vertical angle"),this.appendDummyInput().appendField("distance").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"move_by_angles("+e.getFieldValue("horizontal angle")+","+e.getFieldValue("vertical angle")+","+e.getFieldValue("distance")+","+e.getFieldValue("speed")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.move_by_angles(group_state, ${e.getFieldValue("horizontal angle")}, ${e.getFieldValue("vertical angle")}, ${e.getFieldValue("distance")}, ${e.getFieldValue("speed")})`},block_move_xyz={name:"move_xyz",block:{init:function(){this.appendDummyInput().appendField("move X").appendField(new Blockly.FieldNumber(0),"x").appendField("meters"),this.appendDummyInput().appendField("move Y").appendField(new Blockly.FieldNumber(0),"y").appendField("meters"),this.appendDummyInput().appendField("move Z").appendField(new Blockly.FieldNumber(0),"z").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"goto_rel_at_speed(cf, "+e.getFieldValue("x")+","+e.getFieldValue("y")+","+e.getFieldValue("z")+","+e.getFieldValue("speed")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.move_speed(group_state, ${e.getFieldValue("x")}, ${e.getFieldValue("y")}, ${e.getFieldValue("z")}, ${e.getFieldValue("speed")});\n`},block_move={name:"move",block:{init:function(){this.appendDummyInput().appendField("move").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters for").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"move_direction(cf, "+e.getFieldValue("direction")+","+e.getFieldValue("distance")+","+e.getFieldValue("duration")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.move_direction(group_state, ${e.getFieldValue("direction")}, ${e.getFieldValue("distance")}, ${e.getFieldValue("duration")});\n`},block_takeoff={name:"takeoff",block:{init:function(){this.appendDummyInput().appendField("takeoff to").appendField(new Blockly.FieldNumber(0),"height").appendField("meters over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"takeoff(cf, "+e.getFieldValue("height")+" ,"+e.getFieldValue("duration")+")\n",javascriptGenerator:(e,t)=>`duration += simulator.takeoff(group_state, ${e.getFieldValue("height")}, ${e.getFieldValue("duration")});\n`},block_turn={name:"turn",block:{init:function(){this.appendDummyInput().appendField("turn").appendField(new Blockly.FieldDropdown([["right","\n\t\t\t\t\t\t\t\t\tright\n\t\t\t\t\t\t\t\t"],["left","left"]]),"direction").appendField(new Blockly.FieldAngle(0),"degrees").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"turn("+e.getFieldValue("direction")+","+e.getFieldValue("degrees")+","+e.getFieldValue("rate")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_start_circle={name:"start_circle",block:{init:function(){this.appendDummyInput().appendField("start cricling").appendField(new Blockly.FieldNumber(0),"radius").appendField("meter radius").appendField(new Blockly.FieldDropdown([["right","circle_right"],["left","circle_left"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"start_circle("+e.getFieldValue("radius")+","+e.getFieldValue("direction")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_start_move={name:"start_move",block:{init:function(){this.appendDummyInput().appendField("start moving").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"start_move("+e.getFieldValue("direction")+","+e.getFieldValue("speed")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_start_turn={name:"start_turn",block:{init:function(){this.appendDummyInput().appendField("start turning").appendField(new Blockly.FieldDropdown([["right","right"],["left","left"]]),"direction").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"start_turn("+e.getFieldValue("direction")+","+e.getFieldValue("rate")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_get_a_position={name:"get_a_position",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["default","default"],["current","current"]]),"which").appendField(new Blockly.FieldDropdown([["x","x position"],["y","y position"],["z","z position"]]),"NAME").appendField("position"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"get_a_position("+e.getFieldValue("which")+","+e.getFieldValue("NAME")+")",javascriptGenerator:(e,t)=>"duration += simulator.dummy()"},block_set_default_speed={name:"set_default_speed",block:{init:function(){this.appendDummyInput().appendField("set default speed to").appendField(new Blockly.FieldNumber(0),"speed"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"set_default_speed("+e.getFieldValue("speed")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"},block_set_default_xy={name:"set_default_xy",block:{init:function(){this.appendDummyInput().appendField("set default").appendField(new Blockly.FieldDropdown([["x","x"],["y","y"]]),"xy").appendField("to").appendField(new Blockly.FieldNumber(0),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(e,t)=>"set_default_xy("+e.getFieldValue("xy")+","+e.getFieldValue("NAME")+")\n",javascriptGenerator:(e,t)=>"duration += simulator.dummy();"};var coreBrowserExports=requireCoreBrowser(),n$7,u$8,t$5,i$7,r$9,f$6={},e$2=[],c$7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;
/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */function s$4(e,t){for(var n in t)e[n]=t[n];return e}function a$4(e){var t=e.parentNode;t&&t.removeChild(e)}function h$8(e,t,n){var r,i,o,s,a=arguments;if(t=s$4({},t),arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(a[r]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===t[i]&&(t[i]=e.defaultProps[i]);return s=t.key,null!=(o=t.ref)&&delete t.ref,null!=s&&delete t.key,v$6(e,t,s,o)}function v$6(e,t,n,r){var i={type:e,props:t,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return n$7.vnode&&n$7.vnode(i),i}function d$7(e){return e.children}function y$6(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return v$6(null,e,null,null);if(null!=e.__e||null!=e.__c){var t=v$6(e.type,e.props,e.key,null);return t.__e=e.__e,t}return e}function m$5(e,t){this.props=e,this.context=t}function w$6(e,t){if(null==t)return e.__p?w$6(e.__p,e.__p.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w$6(e):null}function g$4(e){var t,n;if(null!=(e=e.__p)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g$4(e)}}function k$4(e){(!e.__d&&(e.__d=!0)&&1===u$8.push(e)||i$7!==n$7.debounceRendering)&&(i$7=n$7.debounceRendering,(n$7.debounceRendering||t$5)(_$2))}function _$2(){var e,t,n,r,i,o,s,a;for(u$8.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=u$8.pop();)e.__d&&(n=void 0,r=void 0,o=(i=(t=e).__v).__e,s=t.__P,a=t.u,t.u=!1,s&&(n=[],r=$(s,i,s$4({},i),t.__n,void 0!==s.ownerSVGElement,null,n,a,null==o?w$6(i):o),j$3(n,i),r!=o&&g$4(i)))}function b$6(e,t,n,r,i,o,s,a,l){var c,u,h,d,p,f,m,g=n&&n.__k||e$2,_=g.length;if(a==f$6&&(a=null!=o?o[0]:_?w$6(n,0):null),c=0,t.__k=x$5(t.__k,(function(n){if(null!=n){if(n.__p=t,n.__b=t.__b+1,null===(h=g[c])||h&&n.key==h.key&&n.type===h.type)g[c]=void 0;else for(u=0;u<_;u++){if((h=g[u])&&n.key==h.key&&n.type===h.type){g[u]=void 0;break}h=null}if(d=$(e,n,h=h||f$6,r,i,o,s,null,a,l),(u=n.ref)&&h.ref!=u&&(m||(m=[])).push(u,n.__c||d,n),null!=d){if(null==f&&(f=d),null!=n.l)d=n.l,n.l=null;else if(o==h||d!=a||null==d.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(d);else{for(p=a,u=0;(p=p.nextSibling)&&u<_;u+=2)if(p==d)break e;e.insertBefore(d,a)}"option"==t.type&&(e.value="")}a=d.nextSibling,"function"==typeof t.type&&(t.l=d)}}return c++,n})),t.__e=f,null!=o&&"function"!=typeof t.type)for(c=o.length;c--;)null!=o[c]&&a$4(o[c]);for(c=_;c--;)null!=g[c]&&D$5(g[c],g[c]);if(m)for(c=0;c<m.length;c++)A$3(m[c],m[++c],m[++c])}function x$5(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)x$5(e[r],t,n);else n.push(t?t(y$6(e)):e);return n}function C$3(e,t,n,r,i){var o;for(o in n)o in t||N$2(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"value"===o||"checked"===o||n[o]===t[o]||N$2(e,o,t[o],n[o],r)}function P$3(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===c$7.test(t)?n+"px":null==n?"":n}function N$2(e,t,n,r,i){var o,s,a,l,c;if("key"===(t=i?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(o=e.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(s in r)n&&s in n||P$3(o,s,"");if(n)for(a in n)r&&n[a]===r[a]||P$3(o,a,n[a])}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(r||e.addEventListener(t,T$2,l),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,T$2,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function T$2(e){return this.t[e.type](n$7.event?n$7.event(e):e)}function $(e,t,n,r,i,o,s,a,l,c){var u,h,d,p,f,m,g,_,b,v,y=t.type;if(void 0!==t.constructor)return null;(u=n$7.__b)&&u(t);try{e:if("function"==typeof y){if(_=t.props,b=(u=y.contextType)&&r[u.__c],v=u?b?b.props.value:u.__p:r,n.__c?g=(h=t.__c=n.__c).__p=h.__E:("prototype"in y&&y.prototype.render?t.__c=h=new y(_,v):(t.__c=h=new m$5(_,v),h.constructor=y,h.render=H$4),b&&b.sub(h),h.props=_,h.state||(h.state={}),h.context=v,h.__n=r,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=y.getDerivedStateFromProps&&s$4(h.__s==h.state?h.__s=s$4({},h.__s):h.__s,y.getDerivedStateFromProps(_,h.__s)),d)null==y.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&s.push(h);else{if(null==y.getDerivedStateFromProps&&null==a&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(_,v),!a&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(_,h.__s,v)){for(h.props=_,h.state=h.__s,h.__d=!1,h.__v=t,t.__e=null!=l?l!==n.__e?l:n.__e:null,t.__k=n.__k,u=0;u<t.__k.length;u++)t.__k[u]&&(t.__k[u].__p=t);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(_,h.__s,v)}for(p=h.props,f=h.state,h.context=v,h.props=_,h.state=h.__s,(u=n$7.__r)&&u(t),h.__d=!1,h.__v=t,h.__P=e,u=h.render(h.props,h.state,h.context),t.__k=x$5(null!=u&&u.type==d$7&&null==u.key?u.props.children:u),null!=h.getChildContext&&(r=s$4(s$4({},r),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(m=h.getSnapshotBeforeUpdate(p,f)),b$6(e,t,n,r,i,o,s,l,c),h.base=t.__e;u=h.__h.pop();)h.__s&&(h.state=h.__s),u.call(h);d||null==p||null==h.componentDidUpdate||h.componentDidUpdate(p,f,m),g&&(h.__E=h.__p=null)}else t.__e=z$4(n.__e,t,n,r,i,o,s,c);(u=n$7.diffed)&&u(t)}catch(O){n$7.__e(O,t,n)}return t.__e}function j$3(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(r){n$7.__e(r,n.__v)}n$7.__c&&n$7.__c(t)}function z$4(e,t,n,r,i,o,s,a){var l,c,u,h,d=n.props,p=t.props;if(i="svg"===t.type||i,null==e&&null!=o)for(l=0;l<o.length;l++)if(null!=(c=o[l])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,o[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),o=null}return null===t.type?d!==p&&(null!=o&&(o[o.indexOf(e)]=null),e.data=p):t!==n&&(null!=o&&(o=e$2.slice.call(e.childNodes)),u=(d=n.props||f$6).dangerouslySetInnerHTML,h=p.dangerouslySetInnerHTML,a||(h||u)&&(h&&u&&h.__html==u.__html||(e.innerHTML=h&&h.__html||"")),C$3(e,p,d,i,a),t.__k=t.props.children,h||b$6(e,t,n,r,"foreignObject"!==t.type&&i,o,s,f$6,a),a||("value"in p&&void 0!==p.value&&p.value!==e.value&&(e.value=null==p.value?"":p.value),"checked"in p&&void 0!==p.checked&&p.checked!==e.checked&&(e.checked=p.checked))),e}function A$3(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(r){n$7.__e(r,n)}}function D$5(e,t,n){var r,i,o;if(n$7.unmount&&n$7.unmount(e),(r=e.ref)&&A$3(r,null,t),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.l=null,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){n$7.__e(s,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&D$5(r[o],t,n);null!=i&&a$4(i)}function H$4(e,t,n){return this.constructor(e,n)}function I$3(e,t,n){var r,i,o;n$7.__p&&n$7.__p(e,t),i=(r=n===r$9)?null:n&&n.__k||t.__k,e=h$8(d$7,null,[e]),o=[],$(t,r?t.__k=e:(n||t).__k=e,i||f$6,f$6,void 0!==t.ownerSVGElement,n&&!r?[n]:i?null:e$2.slice.call(t.childNodes),o,!1,n||f$6,r),j$3(o,e)}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _extends$1(){return _extends$1=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r=t[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_extends$1.apply(this,arguments)}n$7={},m$5.prototype.setState=function(e,t){var n=this.__s!==this.state&&this.__s||(this.__s=s$4({},this.state));("function"!=typeof e||(e=e(n,this.props)))&&s$4(n,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),k$4(this))},m$5.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,k$4(this))},m$5.prototype.render=d$7,u$8=[],t$5="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i$7=n$7.debounceRendering,n$7.__e=function(e,t,n){for(var r;t=t.__p;)if((r=t.__c)&&!r.__p)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(e));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(e)}return k$4(r.__E=r)}catch(i){e=i}throw e},r$9=f$6;var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH_3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH_4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",REGEX_FUNCTIONAL_RGB=new RegExp("rgb"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_RGBA=new RegExp("rgba"+PERMISSIVE_MATCH_4),REGEX_FUNCTIONAL_HSL=new RegExp("hsl"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_HSLA=new RegExp("hsla"+PERMISSIVE_MATCH_4),HEX_START="^(?:#?|0x?)",HEX_INT_SINGLE="([0-9a-fA-F]{1})",HEX_INT_DOUBLE="([0-9a-fA-F]{2})",REGEX_HEX_3=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_4=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_6=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),REGEX_HEX_8=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),KELVIN_MIN=2e3,KELVIN_MAX=4e4,log$1=Math.log,round=Math.round,floor=Math.floor;function clamp$2(e,t,n){return Math.min(Math.max(e,t),n)}function parseUnit(e,t){var n=e.indexOf("%")>-1,r=parseFloat(e);return n?t/100*r:r}function parseHexInt(e){return parseInt(e,16)}function intToHex(e){return e.toString(16).padStart(2,"0")}var IroColor=function(){function e(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=_extends$1({},this.$)}var t=e.prototype;return t.set=function t(n){if("string"==typeof n)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(n)?this.hexString=n:/^rgba?/.test(n)?this.rgbString=n:/^hsla?/.test(n)&&(this.hslString=n);else{if("object"!=typeof n)throw new Error("Invalid color value");n instanceof e?this.hsva=n.hsva:"r"in n&&"g"in n&&"b"in n?this.rgb=n:"h"in n&&"s"in n&&"v"in n?this.hsv=n:"h"in n&&"s"in n&&"l"in n?this.hsl=n:"kelvin"in n&&(this.kelvin=n.kelvin)}},t.setChannel=function e(t,n,r){var i;this[t]=_extends$1({},this[t],((i={})[n]=r,i))},t.reset=function e(){this.hsva=this.initialValue},t.clone=function t(){return new e(this)},t.unbind=function e(){this.onChange=void 0},e.hsvToRgb=function e(t){var n=t.h/60,r=t.s/100,i=t.v/100,o=floor(n),s=n-o,a=i*(1-r),l=i*(1-s*r),c=i*(1-(1-s)*r),u=o%6,h=[c,i,i,l,a,a][u],d=[a,a,c,i,i,l][u];return{r:clamp$2(255*[i,l,a,a,c,i][u],0,255),g:clamp$2(255*h,0,255),b:clamp$2(255*d,0,255)}},e.rgbToHsv=function e(t){var n=t.r/255,r=t.g/255,i=t.b/255,o=Math.max(n,r,i),s=Math.min(n,r,i),a=o-s,l=0,c=o,u=0===o?0:a/o;switch(o){case s:l=0;break;case n:l=(r-i)/a+(r<i?6:0);break;case r:l=(i-n)/a+2;break;case i:l=(n-r)/a+4}return{h:60*l%360,s:clamp$2(100*u,0,100),v:clamp$2(100*c,0,100)}},e.hsvToHsl=function e(t){var n=t.s/100,r=t.v/100,i=(2-n)*r,o=i<=1?i:2-i,s=o<1e-9?0:n*r/o;return{h:t.h,s:clamp$2(100*s,0,100),l:clamp$2(50*i,0,100)}},e.hslToHsv=function e(t){var n=2*t.l,r=t.s*(n<=100?n:200-n)/100,i=n+r<1e-9?0:2*r/(n+r);return{h:t.h,s:clamp$2(100*i,0,100),v:clamp$2((n+r)/2,0,100)}},e.kelvinToRgb=function e(t){var n,r,i,o=t/100;return o<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=o-2)+104.49216199393888*log$1(r),i=o<20?0:.8274096064007395*(i=o-10)-254.76935184120902+115.67994401066147*log$1(i)):(n=351.97690566805693+.114206453784165*(n=o-55)-40.25366309332127*log$1(n),r=325.4494125711974+.07943456536662342*(r=o-50)-28.0852963507957*log$1(r),i=255),{r:clamp$2(floor(n),0,255),g:clamp$2(floor(r),0,255),b:clamp$2(floor(i),0,255)}},e.rgbToKelvin=function t(n){for(var r,i=n.r,o=n.b,s=KELVIN_MIN,a=KELVIN_MAX;a-s>.4;){r=.5*(a+s);var l=e.kelvinToRgb(r);l.b/l.r>=o/i?a=r:s=r}return r},_createClass$1(e,[{key:"hsv",get:function e(){var t=this.$;return{h:t.h,s:t.s,v:t.v}},set:function e(t){var n=this.$;if(t=_extends$1({},n,t),this.onChange){var r={h:!1,v:!1,s:!1,a:!1};for(var i in n)r[i]=t[i]!=n[i];this.$=t,(r.h||r.s||r.v||r.a)&&this.onChange(this,r)}else this.$=t}},{key:"hsva",get:function e(){return _extends$1({},this.$)},set:function e(t){this.hsv=t}},{key:"hue",get:function e(){return this.$.h},set:function e(t){this.hsv={h:t}}},{key:"saturation",get:function e(){return this.$.s},set:function e(t){this.hsv={s:t}}},{key:"value",get:function e(){return this.$.v},set:function e(t){this.hsv={v:t}}},{key:"alpha",get:function e(){return this.$.a},set:function e(t){this.hsv=_extends$1({},this.hsv,{a:t})}},{key:"kelvin",get:function t(){return e.rgbToKelvin(this.rgb)},set:function t(n){this.rgb=e.kelvinToRgb(n)}},{key:"red",get:function e(){return this.rgb.r},set:function e(t){this.rgb=_extends$1({},this.rgb,{r:t})}},{key:"green",get:function e(){return this.rgb.g},set:function e(t){this.rgb=_extends$1({},this.rgb,{g:t})}},{key:"blue",get:function e(){return this.rgb.b},set:function e(t){this.rgb=_extends$1({},this.rgb,{b:t})}},{key:"rgb",get:function t(){var n=e.hsvToRgb(this.$),r=n.r,i=n.g,o=n.b;return{r:round(r),g:round(i),b:round(o)}},set:function t(n){this.hsv=_extends$1({},e.rgbToHsv(n),{a:void 0===n.a?1:n.a})}},{key:"rgba",get:function e(){return _extends$1({},this.rgb,{a:this.alpha})},set:function e(t){this.rgb=t}},{key:"hsl",get:function t(){var n=e.hsvToHsl(this.$),r=n.h,i=n.s,o=n.l;return{h:round(r),s:round(i),l:round(o)}},set:function t(n){this.hsv=_extends$1({},e.hslToHsv(n),{a:void 0===n.a?1:n.a})}},{key:"hsla",get:function e(){return _extends$1({},this.hsl,{a:this.alpha})},set:function e(t){this.hsl=t}},{key:"rgbString",get:function e(){var t=this.rgb;return"rgb("+t.r+", "+t.g+", "+t.b+")"},set:function e(t){var n,r,i,o,s=1;if((n=REGEX_FUNCTIONAL_RGB.exec(t))?(r=parseUnit(n[1],255),i=parseUnit(n[2],255),o=parseUnit(n[3],255)):(n=REGEX_FUNCTIONAL_RGBA.exec(t))&&(r=parseUnit(n[1],255),i=parseUnit(n[2],255),o=parseUnit(n[3],255),s=parseUnit(n[4],1)),!n)throw new Error("Invalid rgb string");this.rgb={r:r,g:i,b:o,a:s}}},{key:"rgbaString",get:function e(){var t=this.rgba;return"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")"},set:function e(t){this.rgbString=t}},{key:"hexString",get:function e(){var t=this.rgb;return"#"+intToHex(t.r)+intToHex(t.g)+intToHex(t.b)},set:function e(t){var n,r,i,o,s=255;if((n=REGEX_HEX_3.exec(t))?(r=17*parseHexInt(n[1]),i=17*parseHexInt(n[2]),o=17*parseHexInt(n[3])):(n=REGEX_HEX_4.exec(t))?(r=17*parseHexInt(n[1]),i=17*parseHexInt(n[2]),o=17*parseHexInt(n[3]),s=17*parseHexInt(n[4])):(n=REGEX_HEX_6.exec(t))?(r=parseHexInt(n[1]),i=parseHexInt(n[2]),o=parseHexInt(n[3])):(n=REGEX_HEX_8.exec(t))&&(r=parseHexInt(n[1]),i=parseHexInt(n[2]),o=parseHexInt(n[3]),s=parseHexInt(n[4])),!n)throw new Error("Invalid hex string");this.rgb={r:r,g:i,b:o,a:s/255}}},{key:"hex8String",get:function e(){var t=this.rgba;return"#"+intToHex(t.r)+intToHex(t.g)+intToHex(t.b)+intToHex(floor(255*t.a))},set:function e(t){this.hexString=t}},{key:"hslString",get:function e(){var t=this.hsl;return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},set:function e(t){var n,r,i,o,s=1;if((n=REGEX_FUNCTIONAL_HSL.exec(t))?(r=parseUnit(n[1],360),i=parseUnit(n[2],100),o=parseUnit(n[3],100)):(n=REGEX_FUNCTIONAL_HSLA.exec(t))&&(r=parseUnit(n[1],360),i=parseUnit(n[2],100),o=parseUnit(n[3],100),s=parseUnit(n[4],1)),!n)throw new Error("Invalid hsl string");this.hsl={h:r,s:i,l:o,a:s}}},{key:"hslaString",get:function e(){var t=this.hsla;return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},set:function e(t){this.hslString=t}}]),e}(),sliderDefaultOptions={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function getSliderDimensions(e){var t,n=e.width,r=e.sliderSize,i=e.borderWidth,o=e.handleRadius,s=e.padding,a=e.sliderShape,l="horizontal"===e.layoutDirection;return r=null!=(t=r)?t:2*s+2*o,"circle"===a?{handleStart:e.padding+e.handleRadius,handleRange:n-2*s-2*o,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-i/2}:{handleStart:r/2,handleRange:n-r,radius:r/2,x:0,y:0,width:l?r:n,height:l?n:r}}function getCurrentSliderValue(e,t){var n=t.hsva,r=t.rgb;switch(e.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return 100*n.a;case"kelvin":var i=e.minTemperature,o=e.maxTemperature-i,s=(t.kelvin-i)/o*100;return Math.max(0,Math.min(s,100));case"hue":return n.h/=3.6;case"saturation":return n.s;default:return n.v}}function getSliderValueFromInput(e,t,n){var r,i=getSliderDimensions(e),o=i.handleRange,s=i.handleStart;r="horizontal"===e.layoutDirection?-1*n+o+s:t-s,r=Math.max(Math.min(r,o),0);var a=Math.round(100/o*r);switch(e.sliderType){case"kelvin":var l=e.minTemperature;return l+(e.maxTemperature-l)*(a/100);case"alpha":return a/100;case"hue":return 3.6*a;case"red":case"blue":case"green":return 2.55*a;default:return a}}function getSliderHandlePosition(e,t){var n=getSliderDimensions(e),r=n.width,i=n.height,o=n.handleRange,s=n.handleStart,a="horizontal"===e.layoutDirection,l=a?r/2:i/2,c=s+getCurrentSliderValue(e,t)/100*o;return a&&(c=-1*c+o+2*s),{x:a?l:c,y:a?c:l}}function getSliderGradient(e,t){var n=t.hsv,r=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+r.g+","+r.b+")"],[100,"rgb(255,"+r.g+","+r.b+")"]];case"green":return[[0,"rgb("+r.r+",0,"+r.b+")"],[100,"rgb("+r.r+",255,"+r.b+")"]];case"blue":return[[0,"rgb("+r.r+","+r.g+",0)"],[100,"rgb("+r.r+","+r.g+",255)"]];case"alpha":return[[0,"rgba("+r.r+","+r.g+","+r.b+",0)"],[100,"rgb("+r.r+","+r.g+","+r.b+")"]];case"kelvin":for(var i=[],o=e.minTemperature,s=e.maxTemperature,a=s-o,l=o,c=0;l<s;l+=a/8,c+=1){var u=IroColor.kelvinToRgb(l),h=u.r,d=u.g,p=u.b;i.push([12.5*c,"rgb("+h+","+d+","+p+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var f=IroColor.hsvToHsl({h:n.h,s:0,v:n.v}),m=IroColor.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+f.h+","+f.s+"%,"+f.l+"%)"],[100,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"]];default:var g=IroColor.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]]}}var TAU=2*Math.PI,mod=function e(t,n){return(t%n+n)%n},dist=function e(t,n){return Math.sqrt(t*t+n*n)},BASE_ELEMENTS;function getHandleRange(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function isInputInsideWheel(e,t,n){var r=getWheelDimensions(e),i=r.cx,o=r.cy,s=e.width/2;return dist(i-t,o-n)<s}function getWheelDimensions(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function translateWheelAngle(e,t,n){var r=e.wheelAngle,i=e.wheelDirection;return n&&"clockwise"===i?t=r+t:"clockwise"===i?t=360-r+t:n&&"anticlockwise"===i?t=r+180-t:"anticlockwise"===i&&(t=r-t),mod(t,360)}function getWheelHandlePosition(e,t){var n=t.hsv,r=getWheelDimensions(e),i=r.cx,o=r.cy,s=getHandleRange(e),a=(180+translateWheelAngle(e,n.h,!0))*(TAU/360),l=n.s/100*s,c="clockwise"===e.wheelDirection?-1:1;return{x:i+l*Math.cos(a)*c,y:o+l*Math.sin(a)*c}}function getWheelValueFromInput(e,t,n){var r=getWheelDimensions(e),i=r.cx,o=r.cy,s=getHandleRange(e);t=i-t,n=o-n;var a=translateWheelAngle(e,Math.atan2(-n,-t)*(360/TAU)),l=Math.min(dist(t,n),s);return{h:Math.round(a),s:Math.round(100/s*l)}}function getBoxDimensions(e){var t=e.width,n=e.boxHeight;return{width:t,height:null!=n?n:t,radius:e.padding+e.handleRadius}}function getBoxValueFromInput(e,t,n){var r=getBoxDimensions(e),i=r.width,o=r.height,s=r.radius,a=(t-s)/(i-2*s)*100,l=(n-s)/(o-2*s)*100;return{s:Math.max(0,Math.min(a,100)),v:Math.max(0,Math.min(100-l,100))}}function getBoxHandlePosition(e,t){var n=getBoxDimensions(e),r=n.width,i=n.height,o=n.radius,s=t.hsv,a=o,l=r-2*o,c=i-2*o;return{x:a+s.s/100*l,y:a+(c-s.v/100*c)}}function getBoxGradients(e,t){return[[[0,"#fff"],[100,"hsl("+t.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}function resolveSvgUrl(e){BASE_ELEMENTS||(BASE_ELEMENTS=document.getElementsByTagName("base"));var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),r=/iPhone|iPod|iPad/i.test(t),i=window.location;return(n||r)&&BASE_ELEMENTS.length>0?i.protocol+"//"+i.host+i.pathname+i.search+e:e}function getHandleAtPoint(e,t,n,r){for(var i=0;i<r.length;i++){var o=r[i].x-t,s=r[i].y-n;if(Math.sqrt(o*o+s*s)<e.handleRadius)return i}return null}function cssBorderStyles(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function cssGradient(e,t,n){return e+"-gradient("+t+", "+n.map((function(e){var t=e[0];return e[1]+" "+t+"%"})).join(",")+")"}function cssValue(e){return"string"==typeof e?e:e+"px"}var iroColorPickerOptionDefaults={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},SECONDARY_EVENTS=["mousemove","touchmove","mouseup","touchend"],IroComponentWrapper=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function e(t){var n=this.handleEvent.bind(this),r={onMouseDown:n,ontouchstart:n},i="horizontal"===t.layoutDirection,o=null===t.margin?t.sliderMargin:t.margin,s={overflow:"visible",display:i?"inline-block":"block"};return t.index>0&&(s[i?"marginLeft":"marginTop"]=o),h$8(d$7,null,t.children(this.uid,r,s))},t.prototype.handleEvent=function e(t){var n=this,r=this.props.onInput,i=this.base.getBoundingClientRect();t.preventDefault();var o=t.touches?t.changedTouches[0]:t,s=o.clientX-i.left,a=o.clientY-i.top;switch(t.type){case"mousedown":case"touchstart":!1!==r(s,a,0)&&SECONDARY_EVENTS.forEach((function(e){document.addEventListener(e,n,{passive:!1})}));break;case"mousemove":case"touchmove":r(s,a,1);break;case"mouseup":case"touchend":r(s,a,2),SECONDARY_EVENTS.forEach((function(e){document.removeEventListener(e,n,{passive:!1})}))}},t}(m$5);function IroHandle(e){var t=e.r,n=e.url,r=t,i=t;return h$8("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+cssValue(e.x)+", "+cssValue(e.y)+")",willChange:"transform",top:cssValue(-t),left:cssValue(-t),width:cssValue(2*t),height:cssValue(2*t),position:"absolute",overflow:"visible"}},n&&h$8("use",Object.assign({xlinkHref:resolveSvgUrl(n)},e.props)),!n&&h$8("circle",{cx:r,cy:i,r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&h$8("circle",{cx:r,cy:i,r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function IroSlider(e){var t=e.activeIndex,n=void 0!==t&&t<e.colors.length?e.colors[t]:e.color,r=getSliderDimensions(e),i=r.width,o=r.height,s=r.radius,a=getSliderHandlePosition(e,n),l=getSliderGradient(e,n);return h$8(IroComponentWrapper,Object.assign({},e,{onInput:function c(t,r,i){var o=getSliderValueFromInput(e,t,r);e.parent.inputActive=!0,n[e.sliderType]=o,e.onInput(i,e.id)}}),(function(t,r,c){return h$8("div",Object.assign({},r,{className:"IroSlider",style:Object.assign({},{position:"relative",width:cssValue(i),height:cssValue(o),borderRadius:cssValue(s),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},c)}),h$8("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:cssValue(s),background:cssGradient("linear","horizontal"===e.layoutDirection?"to top":"to right",l)},cssBorderStyles(e))}),h$8(IroHandle,{isActive:!0,index:n.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:a.x,y:a.y}))}))}function IroBox(e){var t=getBoxDimensions(e),n=t.width,r=t.height,i=t.radius,o=e.colors,s=e.parent,a=e.activeIndex,l=void 0!==a&&a<e.colors.length?e.colors[a]:e.color,c=getBoxGradients(e,l),u=o.map((function(t){return getBoxHandlePosition(e,t)}));return h$8(IroComponentWrapper,Object.assign({},e,{onInput:function h(t,n,r){if(0===r){var i=getHandleAtPoint(e,t,n,u);null!==i?s.setActiveColor(i):(s.inputActive=!0,l.hsv=getBoxValueFromInput(e,t,n),e.onInput(r,e.id))}else 1===r&&(s.inputActive=!0,l.hsv=getBoxValueFromInput(e,t,n));e.onInput(r,e.id)}}),(function(t,s,a){return h$8("div",Object.assign({},s,{className:"IroBox",style:Object.assign({},{width:cssValue(n),height:cssValue(r),position:"relative"},a)}),h$8("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:cssValue(i)},cssBorderStyles(e),{background:cssGradient("linear","to bottom",c[1])+","+cssGradient("linear","to right",c[0])})}),o.filter((function(e){return e!==l})).map((function(t){return h$8(IroHandle,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[t.index].x,y:u[t.index].y})})),h$8(IroHandle,{isActive:!0,index:l.index,fill:l.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[l.index].x,y:u[l.index].y}))}))}IroHandle.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},IroSlider.defaultProps=Object.assign({},sliderDefaultOptions);var HUE_GRADIENT_CLOCKWISE="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",HUE_GRADIENT_ANTICLOCKWISE="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function IroWheel(e){var t=getWheelDimensions(e).width,n=e.colors;e.borderWidth;var r=e.parent,i=e.color,o=i.hsv,s=n.map((function(t){return getWheelHandlePosition(e,t)})),a={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return h$8(IroComponentWrapper,Object.assign({},e,{onInput:function l(t,n,o){if(0===o){if(!isInputInsideWheel(e,t,n))return!1;var a=getHandleAtPoint(e,t,n,s);null!==a?r.setActiveColor(a):(r.inputActive=!0,i.hsv=getWheelValueFromInput(e,t,n),e.onInput(o,e.id))}else 1===o&&(r.inputActive=!0,i.hsv=getWheelValueFromInput(e,t,n));e.onInput(o,e.id)}}),(function(r,l,c){return h$8("div",Object.assign({},l,{className:"IroWheel",style:Object.assign({},{width:cssValue(t),height:cssValue(t),position:"relative"},c)}),h$8("div",{className:"IroWheelHue",style:Object.assign({},a,{transform:"rotateZ("+(e.wheelAngle+90)+"deg)",background:"clockwise"===e.wheelDirection?HUE_GRADIENT_CLOCKWISE:HUE_GRADIENT_ANTICLOCKWISE})}),h$8("div",{className:"IroWheelSaturation",style:Object.assign({},a,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),e.wheelLightness&&h$8("div",{className:"IroWheelLightness",style:Object.assign({},a,{background:"#000",opacity:1-o.v/100})}),h$8("div",{className:"IroWheelBorder",style:Object.assign({},a,cssBorderStyles(e))}),n.filter((function(e){return e!==i})).map((function(t){return h$8(IroHandle,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s[t.index].x,y:s[t.index].y})})),h$8(IroHandle,{isActive:!0,index:i.index,fill:i.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s[i.index].x,y:s[i.index].y}))}))}function createWidget(e){var t=function(t,n){var r,i=document.createElement("div");function o(){var e=t instanceof Element?t:document.querySelector(t);e.appendChild(r.base),r.onMount(e)}return I$3(h$8(e,Object.assign({},{ref:function(e){return r=e}},n)),i),"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o),r};return t.prototype=e.prototype,Object.assign(t,e),t.__component=e,t}var IroColorPicker=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(t.colors.length>0?t.colors:[t.color]).forEach((function(e){return n.addColor(e)})),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addColor=function e(t,n){void 0===n&&(n=this.colors.length);var r=new IroColor(t,this.onColorChange.bind(this));this.colors.splice(n,0,r),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",r)},t.prototype.removeColor=function e(t){var n=this.colors.splice(t,1)[0];n.unbind(),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),n.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",n)},t.prototype.setActiveColor=function e(t){this.color=this.colors[t],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function e(t,n){var r=this;void 0===n&&(n=0),this.colors.forEach((function(e){return e.unbind()})),this.colors=[],t.forEach((function(e){return r.addColor(e)})),this.setActiveColor(n),this.emit("color:setAll",this.colors)},t.prototype.on=function e(t,n){var r=this,i=this.events;(Array.isArray(t)?t:[t]).forEach((function(e){(i[e]||(i[e]=[])).push(n),r.deferredEvents[e]&&(r.deferredEvents[e].forEach((function(e){n.apply(null,e)})),r.deferredEvents[e]=[])}))},t.prototype.off=function e(t,n){var r=this;(Array.isArray(t)?t:[t]).forEach((function(e){var t=r.events[e];t&&t.splice(t.indexOf(n),1)}))},t.prototype.emit=function e(t){for(var n=this,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var o=this.activeEvents;!!o.hasOwnProperty(t)&&o[t]||(o[t]=!0,(this.events[t]||[]).forEach((function(e){return e.apply(n,r)})),o[t]=!1)},t.prototype.deferredEmit=function e(t){for(var n,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var o=this.deferredEvents;(n=this).emit.apply(n,[t].concat(r)),(o[t]||(o[t]=[])).push(r)},t.prototype.setOptions=function e(t){this.setState(t)},t.prototype.resize=function e(t){this.setOptions({width:t})},t.prototype.reset=function e(){this.colors.forEach((function(e){return e.reset()})),this.setState({colors:this.colors})},t.prototype.onMount=function e(t){this.el=t,this.deferredEmit("mount",this)},t.prototype.onColorChange=function e(t,n){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",t,n)),this.emit("color:change",t,n)},t.prototype.emitInputEvent=function e(t,n){0===t?this.emit("input:start",this.color,n):1===t?this.emit("input:move",this.color,n):2===t&&this.emit("input:end",this.color,n)},t.prototype.render=function e(t,n){var r=this,i=n.layout;return Array.isArray(i)||(i=[{component:IroWheel},{component:IroSlider}],n.transparency&&i.push({component:IroSlider,options:{sliderType:"alpha"}})),h$8("div",{class:"IroColorPicker",id:n.id,style:{display:n.display}},i.map((function(e,t){var i=e.component,o=e.options;return h$8(i,Object.assign({},n,o,{ref:void 0,onInput:r.emitInputEvent.bind(r),parent:r,index:t}))})))},t}(m$5);IroColorPicker.defaultProps=Object.assign({},iroColorPickerOptionDefaults,{colors:[],display:"block",id:null,layout:"default",margin:null});var IroColorPickerWidget=createWidget(IroColorPicker),iro,iro2,ui2;iro2=iro||(iro={}),iro2.version="5.5.2",iro2.Color=IroColor,iro2.ColorPicker=IroColorPickerWidget,(ui2=iro2.ui||(iro2.ui={})).h=h$8,ui2.ComponentBase=IroComponentWrapper,ui2.Handle=IroHandle,ui2.Slider=IroSlider,ui2.Wheel=IroWheel,ui2.Box=IroBox;var iro$1=iro;class ColorWheelField extends coreBrowserExports.FieldColour{constructor(e,t=150,n={}){super(e),this.color=e,this.width=t,this.options=n}static fromJson(e){return new ColorWheelField(e.color,e.size||150,e.options||{})}showEditor_(){const e=document.createElement("div");coreBrowserExports.DropDownDiv.getContentDiv().appendChild(e),e.classList.add("blockly-color-wheel-container");iro$1.ColorPicker(e,{width:this.width,color:this.getValue(),...this.options}).on("color:change",(e=>{this.setValue(e.hexString)})),coreBrowserExports.DropDownDiv.showPositionedByField(this,(()=>e.remove()))}}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}coreBrowserExports.fieldRegistry.register("color_wheel",ColorWheelField);const block_color={name:"color",block:{init:function(){this.appendDummyInput().appendField("set LED color:").appendField(new ColorWheelField("#00FF00",150,{layoutDirection:"horizontal"}),"color"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},pythonGenerator:(e,t)=>'setLEDColorFromHex(cf, "'+e.getFieldValue("color")+'")\n',javascriptGenerator:(e,t)=>{var n=hexToRgb(e.getFieldValue("color"));return`duration += simulator.setColor(group_state, ${null==n?void 0:n.r},${null==n?void 0:n.g},${null==n?void 0:n.b});`}},CUSTOM_BLOCKS={block_go_to_speed:block_go_to_speed,block_go_to:block_go_to,block_land:block_land,block_move_angles:block_move_angles,block_move_xyz:block_move_xyz,block_move:block_move,block_start_linear_motion:block_start_linear_motion,block_stop:block_stop,block_takeoff:block_takeoff,block_turn:block_turn,block_circle:block_circle,block_start_circle:block_start_circle,block_start_move:block_start_move,block_start_turn:block_start_turn,block_get_a_position:block_get_a_position,block_set_default_height:block_set_default_height,block_set_default_speed:block_set_default_speed,block_set_default_xy:block_set_default_xy,block_color:block_color};Object.values(CUSTOM_BLOCKS).forEach((e=>{Blockly.Blocks[e.name]=e.block,pythonExports.pythonGenerator[e.name]=t=>e.pythonGenerator(t,pythonExports.pythonGenerator),javascriptExports.javascriptGenerator[e.name]=t=>e.javascriptGenerator(t,javascriptExports.javascriptGenerator)}));const blockToToolbox=e=>({kind:"block",type:e.name}),blocklyToolboxConfiguration={kind:"categoryToolbox",contents:[{kind:"category",name:"Straight Motion",contents:[blockToToolbox(CUSTOM_BLOCKS.block_takeoff),blockToToolbox(CUSTOM_BLOCKS.block_land),blockToToolbox(CUSTOM_BLOCKS.block_go_to),blockToToolbox(CUSTOM_BLOCKS.block_go_to_speed),blockToToolbox(CUSTOM_BLOCKS.block_move_angles),blockToToolbox(CUSTOM_BLOCKS.block_move_xyz),blockToToolbox(CUSTOM_BLOCKS.block_move),blockToToolbox(CUSTOM_BLOCKS.block_stop),blockToToolbox(CUSTOM_BLOCKS.block_turn)]},{kind:"category",name:"Curves",contents:[blockToToolbox(CUSTOM_BLOCKS.block_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_move),blockToToolbox(CUSTOM_BLOCKS.block_start_turn)]},{kind:"category",name:"Config",contents:[blockToToolbox(CUSTOM_BLOCKS.block_get_a_position),blockToToolbox(CUSTOM_BLOCKS.block_set_default_height),blockToToolbox(CUSTOM_BLOCKS.block_set_default_speed),blockToToolbox(CUSTOM_BLOCKS.block_set_default_xy)]},{kind:"category",name:"Colors",contents:[blockToToolbox(CUSTOM_BLOCKS.block_color)]},{kind:"category",name:"Logic",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"}]},{kind:"category",name:"Math",contents:[{kind:"block",type:"math_round"},{kind:"block",type:"math_number"}]},{kind:"category",name:"Rotation and Translation"}]};function uuid$1(){const e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let t=[];for(let n=0;n<36;n++)t[n]=8===n||13===n||18===n||23===n?"-":e[Math.ceil(Math.random()*e.length-1)];return t.join("")}var uuid_1=uuid$1;const uuid$2=getDefaultExportFromCjs(uuid_1),createStoreImpl=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!==({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,o),o},createStore$2=e=>e?createStoreImpl(e):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={},e$1=reactExports;function h$7(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var k$3="function"==typeof Object.is?Object.is:h$7,l$7=e$1.useState,m$4=e$1.useEffect,n$6=e$1.useLayoutEffect,p$7=e$1.useDebugValue;function q$3(e,t){var n=t(),r=l$7({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return n$6((function(){i.value=n,i.getSnapshot=t,r$8(i)&&o({inst:i})}),[e,n,t]),m$4((function(){return r$8(i)&&o({inst:i}),e((function(){r$8(i)&&o({inst:i})}))}),[e]),p$7(n),n}function r$8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!k$3(e,n)}catch(r){return!0}}function t$4(e,t){return t()}var u$7="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?t$4:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=void 0!==e$1.useSyncExternalStore?e$1.useSyncExternalStore:u$7,shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports,h$6=reactExports,n$5=shimExports;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function p$6(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var q$2="function"==typeof Object.is?Object.is:p$6,r$7=n$5.useSyncExternalStore,t$3=h$6.useRef,u$6=h$6.useEffect,v$5=h$6.useMemo,w$5=h$6.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=t$3(null);if(null===o.current){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=v$5((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&s.hasValue){var t=s.value;if(i(t,e))return a=t}return a=e}if(t=a,q$2(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var a=r$7(e,o[0],o[1]);return u$6((function(){s.hasValue=!0,s.value=a}),[a]),w$5(a),a},withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector:useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;function useStore$1(e,t=e.getState,n){const r=useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return reactExports.useDebugValue(r),r}const createImpl=e=>{"production"!==({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?createStore$2(e):e,n=(e,n)=>useStore$1(t,e,n);return Object.assign(n,t),n},create$2=e=>e?createImpl(e):createImpl,subscribeWithSelectorImpl=e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let s=e(r.getState());o=n=>{const r=e(n);if(!i(s,r)){const e=s;t(s=r,e)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return i(o)};return e(t,n,r)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(e){let t;try{t=e()}catch(n){return}return{getItem:e=>{var n;const r=e=>null===e?null:JSON.parse(e),i=null!=(n=t.getItem(e))?n:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,n)=>t.setItem(e,JSON.stringify(n)),removeItem:e=>t.removeItem(e)}}const toThenable=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>toThenable(e)(n),catch(e){return this}}}catch(n){return{then(e){return this},catch:e=>toThenable(e)(n)}}},oldImpl=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const a=new Set,l=new Set;let c;try{c=o.getStorage()}catch(g){}if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...e)}),r,i);const u=toThenable(o.serialize),h=()=>{const e=o.partialize({...r()});let t;const n=u({state:e,version:o.version}).then((e=>c.setItem(o.name,e))).catch((e=>{t=e}));if(t)throw t;return n},d=i.setState;i.setState=(e,t)=>{d(e,t),h()};const p=e(((...e)=>{n(...e),h()}),r,i);let f;const m=()=>{var e;if(!c)return;s=!1,a.forEach((e=>e(r())));const t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return toThenable(c.getItem.bind(c))(o.name).then((e=>{if(e)return o.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return f=o.merge(e,null!=(t=r())?t:p),n(f,!0),h()})).then((()=>{null==t||t(f,void 0),s=!0,l.forEach((e=>e(f)))})).catch((e=>{null==t||t(void 0,e)}))};return i.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>s,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},m(),f||p},newImpl=(e,t)=>(n,r,i)=>{let o={storage:createJSONStorage((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const a=new Set,l=new Set;let c=o.storage;if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...e)}),r,i);const u=()=>{const e=o.partialize({...r()});return c.setItem(o.name,{state:e,version:o.version})},h=i.setState;i.setState=(e,t)=>{h(e,t),u()};const d=e(((...e)=>{n(...e),u()}),r,i);let p;const f=()=>{var e;if(!c)return;s=!1,a.forEach((e=>e(r())));const t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return toThenable(c.getItem.bind(c))(o.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=o.merge(e,null!=(t=r())?t:d),n(p,!0),u()})).then((()=>{null==t||t(p,void 0),s=!0,l.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return i.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>s,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),p||d},persistImpl=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?("production"!==({BASE_URL:"/MultiRobotArt/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(e,t)):newImpl(e,t),persist=persistImpl;function n$4(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$6(e){return!!e&&!!e[Q$3]}function t$2(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Z$1}(e)||Array.isArray(e)||!!e[L$2]||!!(null===(t=e.constructor)||void 0===t?void 0:t[L$2])||s$3(e)||v$4(e))}function i$6(e,t,n){void 0===n&&(n=!1),0===o$4(e)?(n?Object.keys:nn$1)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function o$4(e){var t=e[Q$3];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s$3(e)?2:v$4(e)?3:0}function u$5(e,t){return 2===o$4(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function a$3(e,t){return 2===o$4(e)?e.get(t):e[t]}function f$5(e,t,n){var r=o$4(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function c$6(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s$3(e){return X$1&&e instanceof Map}function v$4(e){return q$1&&e instanceof Set}function p$5(e){return e.o||e.t}function l$6(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=rn$1(e);delete t[Q$3];for(var n=nn$1(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function d$6(e,t){return void 0===t&&(t=!1),y$5(e)||r$6(e)||!t$2(e)||(o$4(e)>1&&(e.set=e.add=e.clear=e.delete=h$5),Object.freeze(e),t&&i$6(e,(function(e,t){return d$6(t,!0)}),!0)),e}function h$5(){n$4(2)}function y$5(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b$5(e){var t=tn[e];return t||n$4(18,e),t}function _$1(){return U$1}function j$2(e,t){t&&(b$5("Patches"),e.u=[],e.s=[],e.v=t)}function O$3(e){g$3(e),e.p.forEach(S$2),e.p=null}function g$3(e){e===U$1&&(U$1=e.l)}function w$4(e){return U$1={p:[],l:U$1,h:e,m:!0,_:0}}function S$2(e){var t=e[Q$3];0===t.i||1===t.i?t.j():t.O=!0}function P$2(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||b$5("ES5").S(t,e,r),r?(n[Q$3].P&&(O$3(t),n$4(4)),t$2(e)&&(e=M$1(t,e),t.l||x$4(t,e)),t.u&&b$5("Patches").M(n[Q$3].t,e,t.u,t.s)):e=M$1(t,n,[]),O$3(t),t.u&&t.v(t.u,t.s),e!==H$3?e:void 0}function M$1(e,t,n){if(y$5(t))return t;var r=t[Q$3];if(!r)return i$6(t,(function(i,o){return A$2(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return x$4(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=l$6(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),i$6(o,(function(t,o){return A$2(e,r,i,t,o,n,s)})),x$4(e,i,!1),n&&e.u&&b$5("Patches").N(r,n,e.u,e.s)}return r.o}function A$2(e,t,n,r,i,o,s){if(r$6(i)){var a=M$1(e,i,o&&t&&3!==t.i&&!u$5(t.R,r)?o.concat(r):void 0);if(f$5(n,r,a),!r$6(a))return;e.m=!1}else s&&n.add(i);if(t$2(i)&&!y$5(i)){if(!e.h.D&&e._<1)return;M$1(e,i),t&&t.A.l||x$4(e,i)}}function x$4(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&d$6(t,n)}function z$3(e,t){var n=e[Q$3];return(n?p$5(n):e)[t]}function I$2(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function k$2(e){e.P||(e.P=!0,e.l&&k$2(e.l))}function E$5(e){e.o||(e.o=l$6(e.t))}function N$1(e,t,n){var r=s$3(t)?b$5("MapSet").F(t,n):v$4(t)?b$5("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_$1(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=en;n&&(i=[r],o=on$1);var s=Proxy.revocable(i,o),a=s.revoke,l=s.proxy;return r.k=l,r.j=a,l}(t,n):b$5("ES5").J(t,n);return(n?n.A:_$1()).p.push(r),r}function R$2(e){return r$6(e)||n$4(22,e),function e(t){if(!t$2(t))return t;var n,r=t[Q$3],i=o$4(t);if(r){if(!r.P&&(r.i<4||!b$5("ES5").K(r)))return r.t;r.I=!0,n=D$4(t,i),r.I=!1}else n=D$4(t,i);return i$6(n,(function(t,i){r&&a$3(r.t,t)===i||f$5(n,t,e(i))})),3===i?new Set(n):n}(e)}function D$4(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return l$6(e)}var G,U$1,W$3="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X$1="undefined"!=typeof Map,q$1="undefined"!=typeof Set,B$1="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H$3=W$3?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$2=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$3=W$3?Symbol.for("immer-state"):"__$immer_state",Z$1=""+Object.prototype.constructor,nn$1="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,rn$1=Object.getOwnPropertyDescriptors||function(e){var t={};return nn$1(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},tn={},en={get:function(e,t){if(t===Q$3)return e;var n,r,i,o=p$5(e);if(!u$5(o,t))return n=e,(i=I$2(o,t))?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(n.k):void 0;var s=o[t];return e.I||!t$2(s)?s:s===z$3(e.t,t)?(E$5(e),e.o[t]=N$1(e.A.h,s,e)):s},has:function(e,t){return t in p$5(e)},ownKeys:function(e){return Reflect.ownKeys(p$5(e))},set:function(e,t,n){var r=I$2(p$5(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=z$3(p$5(e),t),o=null==i?void 0:i[Q$3];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(c$6(n,i)&&(void 0!==n||u$5(e.t,t)))return!0;E$5(e),k$2(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==z$3(e.t,t)||t in e.t?(e.R[t]=!1,E$5(e),k$2(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p$5(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n$4(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n$4(12)}},on$1={};i$6(en,(function(e,t){on$1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),on$1.deleteProperty=function(e,t){return on$1.set.call(this,e,t,void 0)},on$1.set=function(e,t,n){return en.set.call(this,e[0],t,n,e[0])};var un=function(){function e(e){var t=this;this.g=B$1,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))}))}}var s;if("function"!=typeof n&&n$4(6),void 0!==r&&"function"!=typeof r&&n$4(7),t$2(e)){var a=w$4(t),l=N$1(t,e,void 0),c=!0;try{s=n(l),c=!1}finally{c?O$3(a):g$3(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return j$2(a,r),P$2(e,a)}),(function(e){throw O$3(a),e})):(j$2(a,r),P$2(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===H$3&&(s=void 0),t.D&&d$6(s,!0),r){var u=[],h=[];b$5("Patches").M(e,s,u,h),r(u,h)}return s}n$4(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){t$2(e)||n$4(8),r$6(e)&&(e=R$2(e));var t=w$4(this),n=N$1(this,e,void 0);return n[Q$3].C=!0,g$3(t),n},t.finishDraft=function(e,t){var n=(e&&e[Q$3]).A;return j$2(n,t),P$2(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!B$1&&n$4(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=b$5("Patches").$;return r$6(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an),an.setAutoFreeze.bind(an),an.setUseProxies.bind(an),an.applyPatches.bind(an),an.createDraft.bind(an),an.finishDraft.bind(an);const immerImpl=e=>(t,n,r)=>(r.setState=(e,n,...r)=>{const i="function"==typeof e?fn(e):e;return t(i,n,...r)},e(r.setState,n,r)),immer=immerImpl,ROBART_VERSION=.1,saveToFile=(e,t)=>{const n=document.createElement("a"),r=new Blob([t],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/jszip_min.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof commonjsRequire&&commonjsRequire;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof commonjsRequire&&commonjsRequire,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,s,a,l,c,u=[],h=0,d=e.length,p=d,f="string"!==r.getTypeOf(e);h<e.length;)p=d-h,i=f?(t=e[h++],n=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),n=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),s=t>>2,a=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,c=2<p?63&i:64,u.push(o.charAt(s)+o.charAt(a)+o.charAt(l)+o.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,s,a,l,c=0,u=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(s=o.indexOf(e.charAt(c++)))>>4,n=(15&s)<<4|(a=o.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(l=o.indexOf(e.charAt(c++))),d[u++]=t,64!==a&&(d[u++]=n),64!==l&&(d[u++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),s=e("./stream/GenericWorker"),a=r?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,s,u){var h,d,p=e.file,f=e.compression,m=u!==a.utf8encode,g=o.transformTo("string",u(p.name)),_=o.transformTo("string",a.utf8encode(p.name)),b=p.comment,v=o.transformTo("string",u(b)),y=o.transformTo("string",a.utf8encode(b)),O=_.length!==p.name.length,S=y.length!==b.length,T="",x="",E="",w=p.dir,C=p.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var k=0;t&&(k|=8),m||!O&&!S||(k|=2048);var R,I,M,$=0,P=0;w&&($|=16),"UNIX"===s?(P=798,$|=(R=p.unixPermissions,I=w,M=R,R||(M=I?16893:33204),(65535&M)<<16)):(P=20,$|=function(e){return 63&(e||0)}(p.dosPermissions)),h=C.getUTCHours(),h<<=6,h|=C.getUTCMinutes(),h<<=5,h|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),O&&(x=r(1,1)+r(l(g),4)+_,T+="up"+r(x.length,2)+x),S&&(E=r(1,1)+r(l(v),4)+y,T+="uc"+r(E.length,2)+E);var L="";return L+="\n\0",L+=r(k,2),L+=f.magic,L+=r(h,2),L+=r(d,2),L+=r(A.crc32,4),L+=r(A.compressedSize,4),L+=r(A.uncompressedSize,4),L+=r(g.length,2),L+=r(T.length,2),{fileRecord:c.LOCAL_FILE_HEADER+L+g+T,dirRecord:c.CENTRAL_FILE_HEADER+r(P,2)+L+r(v.length,2)+"\0\0\0\0"+r($,4)+r(i,4)+g+T+v}}var o=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,s),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,o=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),n)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,s,a,l,u,h=this.bytesWritten-e,d=(n=this.dirRecords.length,i=h,s=e,a=this.zipComment,l=this.encodeFileName,u=o.transformTo("string",l(a)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(s,4)+r(u.length,2)+u);this.push({data:d,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(r){}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,n){s++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(a){o.error(a)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),i=e("./external"),o=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,s=0;s<o.length;s++){var a=o[s],l=a.fileNameStr,c=r.resolve(a.fileNameStr);n.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,i=o.getTypeOf(t),a=o.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(r=f(e))&&g.call(this,r,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!h),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var _=null;_=t instanceof c||t instanceof s?t:d.isNode&&d.isStream(t)?new p(e,t):o.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var b=new u(e,_,a);this.files[e]=b}var i=e("./utf8"),o=e("./utils"),s=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function _(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(_(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(_(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(l){(t=new s("error")).error(l)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(d){}function u(e,t){return new l.Promise((function(n,i){var o=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){o.push(e),t&&t(n)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,o),c);n(e)}catch(t){i(t)}o=[]})).resume()}))}function h(e,t,n){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=n,r.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(a){this._worker=new o("error"),this._worker.error(a)}}h.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(o){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(s){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(o){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,s,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=s=0;s<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,s=e.length,l=new Array(2*s);for(t=n=0;t<s;)if((i=e[t++])<128)l[n++]=i;else if(4<(o=a[i]))l[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<s;)i=i<<6|63&e[t++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;s!==t.length&&(i.uint8array?(l=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(l=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),s=e("./external");function a(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(o){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(o){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var d={};d.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},d.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},d.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return o.newBufferFrom(e)}},d.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,a,c){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u,h=n.getTypeOf(t);return h?("arraybuffer"===h?t=n.transformTo("uint8array",t):"string"===h&&(c?t=i.decode(t):o&&!0!==a&&(t=l(u=t,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),s=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(a){(t=new l("error")).error(a)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)r.prototype[c[h]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=f((function(){t(i,r)}));"error"===s.status&&r(s.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s,a=-1,l=new this(i);++a<n;)s=e[a],t.resolve(s).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,h=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(s[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(s[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}p.prototype.push=function(e,t){var n,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,s))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==s||(this.onEnd(c),!(a.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,l,c,h,d,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,d)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==s.Z_STREAM_END&&(0!==p.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),c=p.next_out-l,h=o.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,o,s,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=s=0;s<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if(4<(o=s[i]))c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&e[n++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){var r,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,u=4,h=0,d=-2,p=-1,f=4,m=2,g=8,_=9,b=286,v=30,y=19,O=2*b+1,S=15,T=3,x=258,E=x+T+1,w=42,C=113,A=1,k=2,R=3,I=4;function M(e,t){return e.msg=l[t],t}function $(e){return(e<<1)-(4<e?9:0)}function P(e){for(var t=e.length;0<=--t;)e[t]=0}function L(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function D(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,L(e.strm)}function N(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-E?e.strstart-(e.w_size-E):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+x,p=c[o+s-1],f=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===f&&c[n+s-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(r=x-(d-o),o=d-x,s<r){if(e.match_start=t,a<=(s=r))break;p=c[o+s-1],f=c[o+s]}}}while((t=h[t&u])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead}function G(e){var t,n,r,o,l,c,u,h,d,p,f=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-E)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);o+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,h=e.strstart+e.lookahead,p=void 0,(d=o)<(p=c.avail_in)&&(p=d),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=s(c.adler,u,p,h):2===c.state.wrap&&(c.adler=a(c.adler,u,p,h)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=T)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+T-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<E&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<E){if(G(e),e.lookahead<E&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-E&&(e.match_length=F(e,n)),e.match_length>=T)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<T-1?e.strstart:T-1,t===u?(D(e,!0),0===e.strm.avail_out?R:I):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:k}function V(e,t){for(var n,r,i;;){if(e.lookahead<E){if(G(e),e.lookahead<E&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-E&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===T&&4096<e.strstart-e.match_start)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-T,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=T-1,e.strstart++,r&&(D(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,t===u?(D(e,!0),0===e.strm.avail_out?R:I):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:k}function W(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*O),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*y+1)),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*b+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Q(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?w:C,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),h):M(e,d)}function z(e){var t,n=Q(e);return n===h&&((t=e.state).window_size=2*t.w_size,P(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=T-1,t.match_available=0,t.ins_h=0),n}function j(e,t,n,r,o,s){if(!e)return d;var a=1;if(t===p&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),o<1||_<o||n!==g||r<8||15<r||t<0||9<t||s<0||f<s)return M(e,d);8===r&&(r=9);var l=new H;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+T-1)/T),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,z(e)}r=[new W(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(G(e),0===e.lookahead&&t===c)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,D(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-E&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?R:I):(e.strstart>e.block_start&&(D(e,!1),e.strm.avail_out),A)})),new W(4,4,8,4,U),new W(4,5,16,8,U),new W(4,6,32,32,U),new W(4,4,16,16,V),new W(8,16,32,32,V),new W(8,16,128,128,V),new W(8,32,128,256,V),new W(32,128,258,1024,V),new W(32,258,258,4096,V)],n.deflateInit=function(e,t){return j(e,t,g,15,8,0)},n.deflateInit2=j,n.deflateReset=z,n.deflateResetKeep=Q,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},n.deflate=function(e,t){var n,i,s,l;if(!e||!e.state||5<t||t<0)return e?M(e,d):d;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return M(e,0===e.avail_out?-5:d);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===w)if(2===i.wrap)e.adler=0,N(i,31),N(i,139),N(i,8),i.gzhead?(N(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),N(i,255&i.gzhead.time),N(i,i.gzhead.time>>8&255),N(i,i.gzhead.time>>16&255),N(i,i.gzhead.time>>24&255),N(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),N(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(N(i,255&i.gzhead.extra.length),N(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(N(i,0),N(i,0),N(i,0),N(i,0),N(i,0),N(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),N(i,3),i.status=C);else{var p=g+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=C,B(i,p),0!==i.strstart&&(B(i,e.adler>>>16),B(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),L(e),s=i.pending,i.pending!==i.pending_buf_size));)N(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),L(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,N(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),L(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,N(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&L(e),i.pending+2<=i.pending_buf_size&&(N(i,255&e.adler),N(i,e.adler>>8&255),e.adler=0,i.status=C)):i.status=C),0!==i.pending){if(L(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&$(t)<=$(n)&&t!==u)return M(e,-5);if(666===i.status&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(G(e),0===e.lookahead)){if(t===c)return A;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?R:I):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:k}(i,t):3===i.strategy?function(e,t){for(var n,r,i,s,a=e.window;;){if(e.lookahead<=x){if(G(e),e.lookahead<=x&&t===c)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=T&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=e.strstart+x;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=x-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(n=o._tr_tally(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(D(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(D(e,!0),0===e.strm.avail_out?R:I):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?A:k}(i,t):r[i.level].func(i,t);if(f!==R&&f!==I||(i.status=666),f===A||f===R)return 0===e.avail_out&&(i.last_flush=-1),h;if(f===k&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(P(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),L(e),0===e.avail_out))return i.last_flush=-1,h}return t!==u?h:i.wrap<=0?1:(2===i.wrap?(N(i,255&e.adler),N(i,e.adler>>8&255),N(i,e.adler>>16&255),N(i,e.adler>>24&255),N(i,255&e.total_in),N(i,e.total_in>>8&255),N(i,e.total_in>>16&255),N(i,e.total_in>>24&255)):(B(i,e.adler>>>16),B(i,65535&e.adler)),L(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==w&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?M(e,d):(e.state=null,t===C?M(e,-3):h):d},n.deflateSetDictionary=function(e,t){var n,r,o,a,l,c,u,p,f=t.length;if(!e||!e.state)return d;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==w||n.lookahead)return d;for(1===a&&(e.adler=s(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(P(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,f-n.w_size,n.w_size,0),t=p,f=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,G(n);n.lookahead>=T;){for(r=n.strstart,o=n.lookahead-(T-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+T-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=T-1,G(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,_,b,v,y,O,S,T,x,E,w;n=e.state,r=e.next_in,E=e.input,i=r+(e.avail_in-5),o=e.next_out,w=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,_=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{f<15&&(p+=E[r++]<<f,f+=8,p+=E[r++]<<f,f+=8),v=m[p&_];t:for(;;){if(p>>>=y=v>>>24,f-=y,0==(y=v>>>16&255))w[o++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(p&(1<<y)-1)];continue t}if(32&y){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&v,(y&=15)&&(f<y&&(p+=E[r++]<<f,f+=8),O+=p&(1<<y)-1,p>>>=y,f-=y),f<15&&(p+=E[r++]<<f,f+=8,p+=E[r++]<<f,f+=8),v=g[p&b];n:for(;;){if(p>>>=y=v>>>24,f-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=g[(65535&v)+(p&(1<<y)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&v,f<(y&=15)&&(p+=E[r++]<<f,(f+=8)<y&&(p+=E[r++]<<f,f+=8)),l<(S+=p&(1<<y)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=y,f-=y,(y=o-s)<S){if(u<(y=S-y)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=d,(T=0)===h){if(T+=c-y,y<O){for(O-=y;w[o++]=d[T++],--y;);T=o-S,x=w}}else if(h<y){if(T+=c+h-y,(y-=h)<O){for(O-=y;w[o++]=d[T++],--y;);if(T=0,h<O){for(O-=y=h;w[o++]=d[T++],--y;);T=o-S,x=w}}}else if(T+=h-y,y<O){for(O-=y;w[o++]=d[T++],--y;);T=o-S,x=w}for(;2<O;)w[o++]=x[T++],w[o++]=x[T++],w[o++]=x[T++],O-=3;O&&(w[o++]=x[T++],1<O&&(w[o++]=x[T++]))}else{for(T=o-S;w[o++]=w[T++],w[o++]=w[T++],w[o++]=w[T++],2<(O-=3););O&&(w[o++]=w[T++],1<O&&(w[o++]=w[T++]))}break}}break}}while(r<i&&o<a);r-=O=f>>3,p&=(1<<(f-=O<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=f}},{}],49:[function(e,t,n){var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),l=1,c=2,u=0,h=-2,d=1,p=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):h}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,_(e)):h}function v(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,b(e))):h}function y(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=v(e,t))!==u&&(e.state=null),n):h}var O,S,T=!0;function x(e){if(T){var t;for(O=new r.Buf32(512),S=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(l,e.lens,0,288,O,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,S,0,e.work,{bits:5}),T=!1}e.lencode=O,e.lenbits=9,e.distcode=S,e.distbits=5}function E(e,t,n,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),r.arraySet(s.window,t,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=b,n.inflateReset2=v,n.inflateResetKeep=_,n.inflateInit=function(e){return y(e,15)},n.inflateInit2=y,n.inflate=function(e,t){var n,p,f,g,_,b,v,y,O,S,T,w,C,A,k,R,I,M,$,P,L,D,N,B,F=0,G=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(n=e.state).mode&&(n.mode=13),_=e.next_out,f=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,y=n.hold,O=n.bits,S=b,T=v,D=u;e:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;O<16;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(2&n.wrap&&35615===y){G[n.check=0]=255&y,G[1]=y>>>8&255,n.check=o(n.check,G,2,0),O=y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=30;break}if(O-=4,L=8+(15&(y>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<L,e.adler=n.check=1,n.mode=512&y?10:12,O=y=0;break;case 2:for(;O<16;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(G[0]=255&y,G[1]=y>>>8&255,n.check=o(n.check,G,2,0)),O=y=0,n.mode=3;case 3:for(;O<32;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.head&&(n.head.time=y),512&n.flags&&(G[0]=255&y,G[1]=y>>>8&255,G[2]=y>>>16&255,G[3]=y>>>24&255,n.check=o(n.check,G,4,0)),O=y=0,n.mode=4;case 4:for(;O<16;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(G[0]=255&y,G[1]=y>>>8&255,n.check=o(n.check,G,2,0)),O=y=0,n.mode=5;case 5:if(1024&n.flags){for(;O<16;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(G[0]=255&y,G[1]=y>>>8&255,n.check=o(n.check,G,2,0)),O=y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(b<(w=n.length)&&(w=b),w&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,w,L)),512&n.flags&&(n.check=o(n.check,p,w,g)),b-=w,g+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===b)break e;for(w=0;L=p[g+w++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L)),L&&w<b;);if(512&n.flags&&(n.check=o(n.check,p,w,g)),b-=w,g+=w,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===b)break e;for(w=0;L=p[g+w++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L)),L&&w<b;);if(512&n.flags&&(n.check=o(n.check,p,w,g)),b-=w,g+=w,L)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;O<16;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}O=y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;O<32;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}e.adler=n.check=m(y),O=y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=_,e.avail_out=v,e.next_in=g,e.avail_in=b,n.hold=y,n.bits=O,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&O,O-=7&O,n.mode=27;break}for(;O<3;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}switch(n.last=1&y,O-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(x(n),n.mode=20,6!==t)break;y>>>=2,O-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}y>>>=2,O-=2;break;case 14:for(y>>>=7&O,O-=7&O;O<32;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&y,O=y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(b<w&&(w=b),v<w&&(w=v),0===w)break e;r.arraySet(f,p,g,w,_),b-=w,g+=w,v-=w,_+=w,n.length-=w;break}n.mode=12;break;case 17:for(;O<14;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(n.nlen=257+(31&y),y>>>=5,O-=5,n.ndist=1+(31&y),y>>>=5,O-=5,n.ncode=4+(15&y),y>>>=4,O-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;O<3;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.lens[U[n.have++]]=7&y,y>>>=3,O-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},D=a(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,D){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(F=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,I=65535&F,!((k=F>>>24)<=O);){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(I<16)y>>>=k,O-=k,n.lens[n.have++]=I;else{if(16===I){for(B=k+2;O<B;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(y>>>=k,O-=k,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}L=n.lens[n.have-1],w=3+(3&y),y>>>=2,O-=2}else if(17===I){for(B=k+3;O<B;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}O-=k,L=0,w=3+(7&(y>>>=k)),y>>>=3,O-=3}else{for(B=k+7;O<B;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}O-=k,L=0,w=11+(127&(y>>>=k)),y>>>=7,O-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=L}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},D=a(l,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,D){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},D=a(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,D){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=b&&258<=v){e.next_out=_,e.avail_out=v,e.next_in=g,e.avail_in=b,n.hold=y,n.bits=O,s(e,T),_=e.next_out,f=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,y=n.hold,O=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;R=(F=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,I=65535&F,!((k=F>>>24)<=O);){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(R&&0==(240&R)){for(M=k,$=R,P=I;R=(F=n.lencode[P+((y&(1<<M+$)-1)>>M)])>>>16&255,I=65535&F,!(M+(k=F>>>24)<=O);){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}y>>>=M,O-=M,n.back+=M}if(y>>>=k,O-=k,n.back+=k,n.length=I,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=12;break}if(64&R){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(B=n.extra;O<B;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,O-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(F=n.distcode[y&(1<<n.distbits)-1])>>>16&255,I=65535&F,!((k=F>>>24)<=O);){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(0==(240&R)){for(M=k,$=R,P=I;R=(F=n.distcode[P+((y&(1<<M+$)-1)>>M)])>>>16&255,I=65535&F,!(M+(k=F>>>24)<=O);){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}y>>>=M,O-=M,n.back+=M}if(y>>>=k,O-=k,n.back+=k,64&R){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(B=n.extra;O<B;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,O-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(w=T-v,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),A=n.window}else A=f,C=_-n.offset,w=n.length;for(v<w&&(w=v),v-=w,n.length-=w;f[_++]=A[C++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;f[_++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;O<32;){if(0===b)break e;b--,y|=p[g++]<<O,O+=8}if(T-=v,e.total_out+=T,n.total+=T,T&&(e.adler=n.check=n.flags?o(n.check,f,T,_-T):i(n.check,f,T,_-T)),T=v,(n.flags?y:m(y))!==n.check){e.msg="incorrect data check",n.mode=30;break}O=y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;O<32;){if(0===b)break e;b--,y+=p[g++]<<O,O+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}O=y=0}n.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;default:return h}return e.next_out=_,e.avail_out=v,e.next_in=g,e.avail_in=b,n.hold=y,n.bits=O,(n.wsize||T!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&E(e,e.output,e.next_out,T-e.avail_out)?(n.mode=31,-4):(S-=e.avail_in,T-=e.avail_out,e.total_in+=S,e.total_out+=T,n.total+=T,n.wrap&&T&&(e.adler=n.check=n.flags?o(n.check,f,T,e.next_out-T):i(n.check,f,T,e.next_out-T)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==S&&0===T||4===t)&&D===u&&(D=-5),D)},n.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?h:((n.head=t).done=!1,u):h},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?h:11===n.mode&&i(1,t,r,0)!==n.check?-3:E(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,h,d){var p,f,m,g,_,b,v,y,O,S=d.bits,T=0,x=0,E=0,w=0,C=0,A=0,k=0,R=0,I=0,M=0,$=null,P=0,L=new r.Buf16(16),D=new r.Buf16(16),N=null,B=0;for(T=0;T<=15;T++)L[T]=0;for(x=0;x<l;x++)L[t[n+x]]++;for(C=S,w=15;1<=w&&0===L[w];w--);if(w<C&&(C=w),0===w)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(E=1;E<w&&0===L[E];E++);for(C<E&&(C=E),T=R=1;T<=15;T++)if(R<<=1,(R-=L[T])<0)return-1;if(0<R&&(0===e||1!==w))return-1;for(D[1]=0,T=1;T<15;T++)D[T+1]=D[T]+L[T];for(x=0;x<l;x++)0!==t[n+x]&&(h[D[t[n+x]]++]=x);if(b=0===e?($=N=h,19):1===e?($=i,P-=257,N=o,B-=257,256):($=s,N=a,-1),T=E,_=u,k=x=M=0,m=-1,g=(I=1<<(A=C))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(v=T-k,O=h[x]<b?(y=0,h[x]):h[x]>b?(y=N[B+h[x]],$[P+h[x]]):(y=96,0),p=1<<T-k,E=f=1<<A;c[_+(M>>k)+(f-=p)]=v<<24|y<<16|O|0,0!==f;);for(p=1<<T-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,x++,0==--L[T]){if(T===w)break;T=t[n+h[x]]}if(C<T&&(M&g)!==m){for(0===k&&(k=C),_+=E,R=1<<(A=T-k);A+k<w&&!((R-=L[A+k])<=0);)A++,R<<=1;if(I+=1<<A,1===e&&852<I||2===e&&592<I)return 1;c[m=M&g]=C<<24|A<<16|_-u|0}}return 0!==M&&(c[_+M]=T-k<<24|64<<16|0),d.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common"),i=0,o=1;function s(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,l=29,c=256,u=c+1+l,h=30,d=19,p=2*u+1,f=15,m=16,g=7,_=256,b=16,v=17,y=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(u+2));s(E);var w=new Array(2*h);s(w);var C=new Array(512);s(C);var A=new Array(256);s(A);var k=new Array(l);s(k);var R,I,M,$=new Array(h);function P(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?C[e]:C[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,n){e.bi_valid>m-n?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=n-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function F(e,t,n){B(e,n[2*t],n[2*t+1])}function G(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function U(e,t,n){var r,i,o=new Array(f+1),s=0;for(r=1;r<=f;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=G(o[a]++,a))}}function V(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function W(e){8<e.bi_valid?N(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function Q(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function z(e,t,n){var r,i,o,s,a=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?F(e,i,t):(F(e,(o=A[i])+c+1,t),0!==(s=O[o])&&B(e,i-=k[o],s),F(e,o=D(--r),n),0!==(s=S[o])&&B(e,r-=$[o],s)),a<e.last_lit;);F(e,_,t)}function j(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)Q(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Q(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,Q(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,s,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,_=0;for(o=0;o<=f;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)g<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=g,_++),l[2*r+1]=o,c<r||(e.bl_count[o]++,s=0,m<=r&&(s=d[r-m]),a=l[2*r],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(u[2*r+1]+s)));if(0!==_){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,_-=2}while(0<_);for(o=g;0!==o;o--)for(r=e.bl_count[o];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),U(o,c,e.bl_count)}function X(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<l&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):a<=10?e.bl_tree[2*v]++:e.bl_tree[2*y]++,o=i,c=(a=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4))}function Y(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<l&&i===s)){if(a<c)for(;F(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==o&&(F(e,i,e.bl_tree),a--),F(e,b,e.bl_tree),B(e,a-3,2)):a<=10?(F(e,v,e.bl_tree),B(e,a-3,3)):(F(e,y,e.bl_tree),B(e,a-11,7));o=i,c=(a=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4)}}s($);var Z=!1;function q(e,t,n,i){var o,s,l,c;B(e,(a<<1)+(i?1:0),3),s=t,l=n,c=!0,W(o=e),c&&(N(o,l),N(o,~l)),r.arraySet(o.pending_buf,o.window,s,l,o.pending),o.pending+=l}n._tr_init=function(e){Z||(function(){var e,t,n,r,i,o=new Array(f+1);for(r=n=0;r<l-1;r++)for(k[r]=n,e=0;e<1<<O[r];e++)A[n++]=r;for(A[n-1]=r,r=i=0;r<16;r++)for($[r]=i,e=0;e<1<<S[r];e++)C[i++]=r;for(i>>=7;r<h;r++)for($[r]=i<<7,e=0;e<1<<S[r]-7;e++)C[256+i++]=r;for(t=0;t<=f;t++)o[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,o[8]++;for(;e<=255;)E[2*e+1]=9,e++,o[9]++;for(;e<=279;)E[2*e+1]=7,e++,o[7]++;for(;e<=287;)E[2*e+1]=8,e++,o[8]++;for(U(E,u+1,o),e=0;e<h;e++)w[2*e+1]=5,w[2*e]=G(e,5);R=new P(E,O,c+1,u,f),I=new P(w,S,0,h,f),M=new P(new Array(0),T,0,d,g)}(),Z=!0),e.l_desc=new L(e.dyn_ltree,R),e.d_desc=new L(e.dyn_dtree,I),e.bl_desc=new L(e.bl_tree,M),e.bi_buf=0,e.bi_valid=0,V(e)},n._tr_stored_block=q,n._tr_flush_block=function(e,t,n,r){var s,a,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),j(e,e.l_desc),j(e,e.d_desc),l=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),j(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?q(e,t,n,r):4===e.strategy||a===s?(B(e,2+(r?1:0),3),z(e,E,w)):(B(e,4+(r?1:0),3),function(e,t,n,r){var i;for(B(e,t-257,5),B(e,n-1,5),B(e,r-4,4),i=0;i<r;i++)B(e,e.bl_tree[2*x[i]+1],3);Y(e,e.dyn_ltree,t-1),Y(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),z(e,e.dyn_ltree,e.dyn_dtree)),V(e),r&&W(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+c+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;B(e,2,3),F(e,_,E),16===(t=e).bi_valid?(N(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){if(!e.setImmediate){var n,r,i,o,s=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[s]=i,n(s),s++},u.clearImmediate=h}function h(e){delete a[e]}function d(e){if(l)setTimeout(d,0,e);else{var n=a[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{h(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);var jszip_minExports=jszip_min.exports;const JsZip=getDefaultExportFromCjs(jszip_minExports);var FileSaver_min={exports:{}},module;module=FileSaver_min,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof commonjsGlobal&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,o,s){var a=i.URL||i.webkitURL,l=document.createElement("a");o=o||e.name||"download",l.download=o,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):n(l.href)?t(e,o,s):r(l,l.target="_blank")):(l.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(i,o,s){if(o=o||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(e(i,s),o);else if(n(i))t(i,o,s);else{var a=document.createElement("a");a.href=i,a.target="_blank",setTimeout((function(){r(a)}))}}:function(e,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var h=i.URL||i.webkitURL,d=h.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});i.saveAs=s.saveAs=s,module.exports=s}();var FileSaver_minExports=FileSaver_min.exports;const FileSaver=getDefaultExportFromCjs(FileSaver_minExports),trajLine=45,execBlocksLine=88;var launcherNodeLine=39;const exportToROS=async(e,t)=>{var n=launcherNode.split("\n"),r=0;const i=JsZip(),o=e.timelineState.groups;for(let b in o){const t=e.timelineState.groups[b],o=Object.values(t.robots);var s=[];if(0===o.length)continue;r+=1;for(let e in o)console.log(o,e),null!=o[e]&&(s.push(e),console.log("Robot Indices",s));var a="",l="";if(0===Object.keys(t.items).length){console.log("No items"+t);continue}console.log(t.items),console.log("Items: "+t.items);for(let n in t.items){console.log(n);const r=t.items[n],i=r.startTime,o=e.blocks[r.blockId].python;if(r.isTrajectory)a+="        trajectories.append("+o+")",l+="        start_time = ${startTime}\n",l+="        self.wait_until(start_time)\n",l+="        for cf in self.crazyflies:\n",l+="            cf.startTrajectory(${trajCounter}, 0, 1)\n",l+="        self.wait_until(start_time + self.trajectories[${trajCounter}].duration\n";else{l+=`        start_time = ${i}\n`,l+=`        total_duration = ${1}\n`,l+="        self.wait_until(start_time)\n";for(var c=o.split("\n"),u=0;u<c.length-1;u++)l+="        for cf in self.crazyflies:\n",l+=`            block_duration = ${c[u]}\n`,l+="        self.wait(block_duration)\n";l+="        self.wait_until(start_time + total_duration)\n"}}var h=workerNodeTemplate.split("\n");h.splice(trajLine,0,a),h.splice(execBlocksLine,0,l),console.log(s);var d=`    import ${b}_node\n`;d="    cfs = []\n";for(let e in s)d+=`    cfs.append(crazyflies[${e}])\n`;d+=`    nodes.append(${b}_node.worker_node(cfs, len(nodes)-1, ${r}))\n`,n.splice(launcherNodeLine,0,d),launcherNodeLine+=2;const p=new Blob([h.join("\n")],{type:"text/plain"});i.file(`${b}_node.py`,p)}const p=new Blob([n.join("\n")],{type:"text/plain"}),f=new Blob([configure],{type:"text/plain"});var m="positions:\n";for(let b in Object.values(e.robots)){var g=[0,0,0];null!=e.robots[b]&&(g=e.robots[b].startingPosition),m+=`    - [${g[0]}, ${g[1]}, ${g[2]}]\n`}const _=new Blob([m],{type:"text/plain"});i.file("starting_positions.yaml",_),i.file("configure.py",f),i.file("launch_nodes.py",p),i.generateAsync({type:"blob"}).then((t=>FileSaver.saveAs(t,`${e.projectName}.zip`)))},workerNodeTemplate='import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Int32\nfrom crazyflie_py import generate_trajectory\nimport numpy as np\nfrom blocklyTranslations import *\n\nHz = 30\n\nclass worker_node(Node):\n\n    def __init__(self, crazyflies, id=0, num_nodes=1):\n        """\n        id: a unique id between 0 and num_nodes corresponding to the thread number of this worker\n        num_nodes: number of nodes (threads) in total\n        """\n        super().__init__("worker_node_{}".format(id))\n        self.id = id\n        self.num_nodes = num_nodes\n        self.crazyflies = crazyflies\n\n        self.execution_ready_subscription(\n            Int32,\n            \'ready\',\n            self.ready_callback,\n            num_nodes + 1\n        )\n        self.execution_ready_publisher(\n            Int32,\n            \'ready\',\n            num_nodes + 1\n        )\n        self.timer = self.create_timer(1/Hz, self.timer_callback)\n        self.ready_ids = set()\n        self.executing = False\n        self.running = False\n        self.done = False\n    \n    def compute_trajectories(self):\n        """\n        Inject Trajectory computation code here...\n        """\n        trajectories = []\n        \n        #TODO insert trajectories here...\n\n        return trajectories\n\n    def upload_trajectories(crazyflies, trajectories):\n        \'\'\'\n            Upload trajectories to crazyflies one by one\n        \'\'\'\n\n        # TODO: Currently doesn\'t support overlapping crazyflies as we will overwrite trajectories...\n        for i, traj in enumerate(trajectories):\n            for cf in crazyflies:\n                cf.uploadTrajectory(traj, i, 0)\n\n    def begin(self):\n        """\n            Prepare for execution. Pre-compute trajectories and upload them to crazyflies\n        """\n        trajectories = self.compute_trajectories()\n        self.upload_trajectories(trajectories)\n        msg = Int32()\n        msg.data = self.id\n        self.ready_publisher.publish(msg)\n\n    def time(self):\n        return self.get_clock().now().nanoseconds / 1e9\n    \n    def execute_blocks(self):\n        """\n        Must be injected into...\n\n        Typical format should be:\n        \n        start_time = 0.0\n        duration = 3.0\n        self.wait_until(start_time)\n        for cf in self.crazyflies:\n            cf.takeoff(1.0, duration)\n        self.wait_until(start_time+duration)\n\n        where start_time, duration, and in the inner portion of the for loop are provided.\n        """\n        # BLOCKS...\n        pass\n\n    def ready_callback(self, msg):\n        self.ready_ids.add(msg.data)\n    \n    def timer_callback(self):\n        if not self.running:\n            self.begin()\n            self.running = True\n        if len(self.ready_ids) == self.num_nodes and not self.executing:\n            self.running = True\n            self.start_time = self.get_clock().now()\n            self.execute_blocks()\n            self.destroy_node()\n            self.done = True\n\n    def wait_until(self, end_time):\n        while self.time() < end_time:\n            rclpy.spin_once(self, timeout_sec=0)\n\n    def wait(self, time):\n        end_time = self.time() + time\n        self.wait_until(end_time)\n',launcherNode="import yaml\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom crazyflie_py import Crazyswarm\nimport rclpy\nimport threading\n\n# Inject Imports Here:\n\ndef launch(nodes):\n    threads = []\n    for node in nodes:\n        thread = threading.Thread(target=rclpy.spin, args=(node, ), daemon=True)\n        thread.start()\n        threads.append(thread)\n    while not all([n.done for n in nodes]):\n        pass\n    rclpy.shutdown()\n    [t.join() for t in threads]\n\ndef main():\n    # node_config_file = get_package_share_directory('crazyflie'), 'config', 'crazyflies.yaml'\n    \n    # Initialize swarm\n    swarm = Crazyswarm()\n    with open(\"cfs_ordering.yaml\") as f:\n        ordering = yaml.load(f)\n        order = ordering['cfs']\n    # all_crazyflies = swarm.allcfs.crazyflies\n    all_crazyflies = [swarm.allcfs.crazyfliesById[k] for k in order]\n    # Construct Launch Description from yaml files\n    # One node per line in the timeline, linked to a worker node described in the yaml file\n    counter = 0\n    nodes = []\n    cfs = []\n\n    # Inject append here...\n\n    # cfs.append(all_crazyflies[0])\n    # nodes.append(group1_node.worker_node(cfs, len(cfs), 1))\n    \n    # Launch all nodes\n    return launch(nodes)\n\nif __name__ == '__main__':\n    main()\n",configure="# Need to ask user which crazyflies they will use, and will tell them where to place them\n\nimport yaml\nimport copy\nimport os, sys, stat\n\n# Load starting positions from blockly\nwith open('starting_positions.yaml') as f:\n    starting_positions = yaml.load(f)\n\nn_robots = len(starting_positions['positions'])\n\nprint(\"You will need {} crazyflies\".format(n_robots))\nprint(\"Which crazyflies (by ID) will you use?\")\n\ncfs = []\nfor i in range(n_robots):\n    cf = input(\"crazyflie #{}: \".format(i + 1))\n    cfs.append(cf)\n\n    \nstart_dict = {}\nfor cf, pos in zip(cfs, starting_positions['positions']):\n    print(\"Place cf {} at location {}\".format(cf, pos))\n    start_dict[cf] = pos\n\n# Make changes to local mycrazyflies.yaml\nwith open('crazyflies.yaml') as f:\n    all_crazyflies = yaml.load(f)\n\nmy_cfs = copy.deepcopy(all_crazyflies)\nfor r in all_crazyflies['robots']:\n    id = r.strip('cf')\n    if id not in cfs:\n        del my_cfs['robots'][r]\n    else:\n        my_cfs['robots'][r]['enabled'] = True\n        my_cfs['robots'][r]['initial_position'] = start_dict[id]\n\n\nwith open('my_crazyflies.yaml', 'w') as f:\n    yaml.dump(my_cfs, f)\n\n# Make commands for sim and non-sim launches\nwith open('sim.sh', 'w') as f:\n    f.write('ros2 launch launch.py config:=my_crazyflies.yaml backend:=sim')\n    os.chmod('sim.sh', stat.S_IRWXU)\nwith open('run.sh', 'w') as f:\n    f.write('ros2 launch launch.py config:=my_crazyflies.yaml')\n    os.chmod('run.sh', stat.S_IRWXU)\n",saveProjectToFile=(e,t=void 0)=>{const n=JSON.stringify(e);t=t??e.projectName.replaceAll(" ","")+".robart",saveToFile(t,n)},loadProjectFromFile=e=>JSON.parse(e),exportROS=(e,t)=>{exportToROS(e)},REVISION="150",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(_lut$1[255&e]+_lut$1[e>>8&255]+_lut$1[e>>16&255]+_lut$1[e>>24&255]+"-"+_lut$1[255&t]+_lut$1[t>>8&255]+"-"+_lut$1[t>>16&15|64]+_lut$1[t>>24&255]+"-"+_lut$1[63&n|128]+_lut$1[n>>8&255]+"-"+_lut$1[n>>16&255]+_lut$1[n>>24&255]+_lut$1[255&r]+_lut$1[r>>8&255]+_lut$1[r>>16&255]+_lut$1[r>>24&255]).toLowerCase()}function clamp$1(e,t,n){return Math.max(t,Math.min(n,e))}function euclideanModulo(e,t){return(e%t+t)%t}function mapLinear(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function inverseLerp(e,t,n){return e!==t?(n-e)/(t-e):0}function lerp(e,t,n){return(1-n)*e+n*t}function damp(e,t,n,r){return lerp(e,t,1-Math.exp(-n*r))}function pingpong(e,t=1){return t-Math.abs(euclideanModulo(e,2*t)-t)}function smoothstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}function smootherstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)}function randInt(e,t){return e+Math.floor(Math.random()*(t-e+1))}function randFloat(e,t){return e+Math.random()*(t-e)}function randFloatSpread(e){return e*(.5-Math.random())}function seededRandom(e){void 0!==e&&(_seed=e);let t=_seed+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function degToRad(e){return e*DEG2RAD}function radToDeg(e){return e*RAD2DEG}function isPowerOfTwo(e){return 0==(e&e-1)&&0!==e}function ceilPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function floorPowerOfTwo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function setQuaternionFromProperEuler(e,t,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+r)/2),u=s((t+r)/2),h=o((t-r)/2),d=s((t-r)/2),p=o((r-t)/2),f=s((r-t)/2);switch(i){case"XYX":e.set(a*u,l*h,l*d,a*c);break;case"YZY":e.set(l*d,a*u,l*h,a*c);break;case"ZXZ":e.set(l*h,l*d,a*u,a*c);break;case"XZX":e.set(a*u,l*f,l*p,a*c);break;case"YXY":e.set(l*p,a*u,l*f,a*c);break;case"ZYZ":e.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function denormalize(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function normalize(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD:DEG2RAD,RAD2DEG:RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$1,euclideanModulo:euclideanModulo,mapLinear:mapLinear,inverseLerp:inverseLerp,lerp:lerp,damp:damp,pingpong:pingpong,smoothstep:smoothstep,smootherstep:smootherstep,randInt:randInt,randFloat:randFloat,randFloatSpread:randFloatSpread,seededRandom:seededRandom,degToRad:degToRad,radToDeg:radToDeg,isPowerOfTwo:isPowerOfTwo,ceilPowerOfTwo:ceilPowerOfTwo,floorPowerOfTwo:floorPowerOfTwo,setQuaternionFromProperEuler:setQuaternionFromProperEuler,normalize:normalize,denormalize:denormalize};class Vector2{constructor(e=0,t=0){Vector2.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],_=r[1],b=r[4],v=r[7],y=r[2],O=r[5],S=r[8];return i[0]=o*f+s*_+a*y,i[3]=o*m+s*b+a*O,i[6]=o*g+s*v+a*S,i[1]=l*f+c*_+u*y,i[4]=l*m+c*b+u*O,i[7]=l*g+c*v+u*S,i[2]=h*f+d*_+p*y,i[5]=h*m+d*b+p*O,i[8]=h*g+d*v+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,h=s*a-c*i,d=l*i-o*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(s*n-r*o)*f,e[3]=h*f,e[4]=(c*t-r*a)*f,e[5]=(r*i-s*t)*f,e[6]=d*f,e[7]=(n*a-l*t)*f,e[8]=(o*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-r*l,r*a,-r*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(_m3.makeScale(e,t)),this}rotate(e){return this.premultiply(_m3.makeRotation(-e)),this}translate(e,t){return this.premultiply(_m3.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function getTypedArray(e,t){return new TYPED_ARRAYS[e](t)}function createElementNS$1(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}class Quaternion{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-s;const t=a*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return e[t]=s*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-a*u,e[t+3]=c*p-s*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=n+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp$1(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(e=0,t=0,n=0){Vector3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*r-s*n,c=a*n+s*t-i*r,u=a*r+i*n-o*t,h=-i*t-o*n-s*r;return this.x=l*a+h*-i+c*-s-u*-o,this.y=c*a+h*-o+u*-i-l*-s,this.z=u*a+h*-s+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _vector$d.copy(this).projectOnVector(e),this.sub(_vector$d)}reflect(e){return this.sub(_vector$d.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp$1(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$d=new Vector3,_quaternion$4=new Quaternion;function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=(new Matrix3).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=(new Matrix3).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_vector$c=new Vector3;function DisplayP3ToLinearSRGB(e){return e.convertSRGBToLinear(),_vector$c.set(e.r,e.g,e.b).applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),e.setRGB(_vector$c.x,_vector$c.y,_vector$c.z)}function LinearSRGBToDisplayP3(e){return _vector$c.set(e.r,e.g,e.b).applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3),e.setRGB(_vector$c.x,_vector$c.y,_vector$c.z).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:e=>e,[SRGBColorSpace]:e=>e.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:e=>e,[SRGBColorSpace]:e=>e.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=TO_LINEAR[t],i=FROM_LINEAR[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${t}" to "${n}".`);return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_canvas&&(_canvas=createElementNS$1("canvas")),_canvas.width=e.width,_canvas.height=e.height;const n=_canvas.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_canvas}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=createElementNS$1("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*SRGBToLinear(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*SRGBToLinear(t[e]/255)):t[e]=SRGBToLinear(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Source{constructor(e=null){this.isSource=!0,this.uuid=generateUUID$1(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(serializeImage(r[t].image)):e.push(serializeImage(r[t]))}else e=serializeImage(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ImageUtils.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,n=ClampToEdgeWrapping,r=ClampToEdgeWrapping,i=LinearFilter,o=LinearMipmapLinearFilter,s=RGBAFormat,a=UnsignedByteType,l=Texture.DEFAULT_ANISOTROPY,c=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=UVMapping,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(e=0,t=0,n=0,r=1){Vector4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,_=(g+1)/2,b=(c+h)/4,v=(u+f)/4,y=(p+m)/4;return e>a&&e>_?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=b/n,i=v/n):a>_?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=b/r,i=y/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=v/i,r=y/i),this.set(n,r,i,t),this}let _=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(m-p)/_,this.y=(u-f)/_,this.z=(h-c)/_,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Texture(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:LinearFilter,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Source(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new DataArrayTexture(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Data3DTexture(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Box3{constructor(e=new Vector3(1/0,1/0,1/0),t=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],u=e[a+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(i,o,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),u=e.getZ(a);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(i,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_vector$b.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)_vector$b.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$b)}else null===n.boundingBox&&n.computeBoundingBox(),_box$3.copy(n.boundingBox),_box$3.applyMatrix4(e.matrixWorld),this.union(_box$3);const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_vector$b),_vector$b.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$4.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let t=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)&&(t=[1,0,0,0,1,0,0,0,1],!!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)&&(_triangleNormal.crossVectors(_f0,_f1),t=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$b).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(_vector$b).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(e,t,n,r,i){for(let o=0,s=e.length-3;o<=s;o+=3){_testAxis.fromArray(e,o);const s=i.x*Math.abs(_testAxis.x)+i.y*Math.abs(_testAxis.y)+i.z*Math.abs(_testAxis.z),a=t.dot(_testAxis),l=n.dot(_testAxis),c=r.dot(_testAxis);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor(e=new Vector3,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):_box$2.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$6.subVectors(e,this.center);const t=_v1$6.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(_v1$6,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(_v2$3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(e.center).sub(_v2$3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,t=new Vector3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$a)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_vector$a.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector$a.copy(this.origin).addScaledVector(this.direction,t),_vector$a.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){_segCenter.copy(e).add(t).multiplyScalar(.5),_segDir.copy(t).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const i=.5*e.distanceTo(t),o=-this.direction.dot(_segDir),s=_diff.dot(this.direction),a=-_diff.dot(_segDir),l=_diff.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*a-s,h=o*s-a,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-o*i+s)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(u=Math.max(0,-(o*i+s)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(_segCenter).addScaledVector(_segDir,h),d}intersectSphere(e,t){_vector$a.subVectors(e.center,this.origin);const n=_vector$a.dot(this.direction),r=_vector$a.dot(_vector$a)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||s>r?null:((s>n||n!=n)&&(n=s),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,_vector$a)}intersectTriangle(e,t,n,r,i){_edge1.subVectors(t,e),_edge2.subVectors(n,e),_normal$1.crossVectors(_edge1,_edge2);let o,s=this.direction.dot(_normal$1);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}_diff.subVectors(this.origin,e);const a=o*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(a<0)return null;const l=o*this.direction.dot(_edge1.cross(_diff));if(l<0)return null;if(a+l>s)return null;const c=-o*_diff.dot(_normal$1);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/_v1$5.setFromMatrixColumn(e,0).length(),i=1/_v1$5.setFromMatrixColumn(e,1).length(),o=1/_v1$5.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-o*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=o*c,t[9]=i-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,t,n){const r=this.elements;return _z.subVectors(e,t),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(n,_z),0===_x.lengthSq()&&(1===Math.abs(n.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(n,_z)),_x.normalize(),_y.crossVectors(_z,_x),r[0]=_x.x,r[4]=_y.x,r[8]=_z.x,r[1]=_x.y,r[5]=_y.y,r[9]=_z.y,r[2]=_x.z,r[6]=_y.z,r[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],_=n[3],b=n[7],v=n[11],y=n[15],O=r[0],S=r[4],T=r[8],x=r[12],E=r[1],w=r[5],C=r[9],A=r[13],k=r[2],R=r[6],I=r[10],M=r[14],$=r[3],P=r[7],L=r[11],D=r[15];return i[0]=o*O+s*E+a*k+l*$,i[4]=o*S+s*w+a*R+l*P,i[8]=o*T+s*C+a*I+l*L,i[12]=o*x+s*A+a*M+l*D,i[1]=c*O+u*E+h*k+d*$,i[5]=c*S+u*w+h*R+d*P,i[9]=c*T+u*C+h*I+d*L,i[13]=c*x+u*A+h*M+d*D,i[2]=p*O+f*E+m*k+g*$,i[6]=p*S+f*w+m*R+g*P,i[10]=p*T+f*C+m*I+g*L,i[14]=p*x+f*A+m*M+g*D,i[3]=_*O+b*E+v*k+y*$,i[7]=_*S+b*w+v*R+y*P,i[11]=_*T+b*C+v*I+y*L,i[15]=_*x+b*A+v*M+y*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-r*l*u-i*s*h+n*l*h+r*s*d-n*a*d)+e[7]*(+t*a*d-t*l*h+i*o*h-r*o*d+r*l*c-i*a*c)+e[11]*(+t*l*u-t*s*d-i*o*u+n*o*d+i*s*c-n*l*c)+e[15]*(-r*s*c-t*a*u+t*s*h+r*o*u-n*o*h+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],_=u*m*l-f*h*l+f*a*d-s*m*d-u*a*g+s*h*g,b=p*h*l-c*m*l-p*a*d+o*m*d+c*a*g-o*h*g,v=c*f*l-p*u*l+p*s*d-o*f*d-c*s*g+o*u*g,y=p*u*a-c*f*a-p*s*h+o*f*h+c*s*m-o*u*m,O=t*_+n*b+r*v+i*y;if(0===O)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/O;return e[0]=_*S,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*S,e[2]=(s*m*i-f*a*i+f*r*l-n*m*l-s*r*g+n*a*g)*S,e[3]=(u*a*i-s*h*i-u*r*l+n*h*l+s*r*d-n*a*d)*S,e[4]=b*S,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*S,e[6]=(p*a*i-o*m*i-p*r*l+t*m*l+o*r*g-t*a*g)*S,e[7]=(o*h*i-c*a*i+c*r*l-t*h*l-o*r*d+t*a*d)*S,e[8]=v*S,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*g-t*u*g)*S,e[10]=(o*f*i-p*s*i+p*n*l-t*f*l-o*n*g+t*s*g)*S,e[11]=(c*s*i-o*u*i-c*n*l+t*u*l+o*n*d-t*s*d)*S,e[12]=y*S,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*S,e[14]=(p*s*r-o*f*r-p*n*a+t*f*a+o*n*m-t*s*m)*S,e[15]=(o*u*r-c*s*r+c*n*a-t*u*a-o*n*h+t*s*h)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,s=t._z,a=t._w,l=i+i,c=o+o,u=s+s,h=i*l,d=i*c,p=i*u,f=o*c,m=o*u,g=s*u,_=a*l,b=a*c,v=a*u,y=n.x,O=n.y,S=n.z;return r[0]=(1-(f+g))*y,r[1]=(d+v)*y,r[2]=(p-b)*y,r[3]=0,r[4]=(d-v)*O,r[5]=(1-(h+g))*O,r[6]=(m+_)*O,r[7]=0,r[8]=(p+b)*S,r[9]=(m-_)*S,r[10]=(1-(h+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=_v1$5.set(r[0],r[1],r[2]).length();const o=_v1$5.set(r[4],r[5],r[6]).length(),s=_v1$5.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],_m1$2.copy(this);const a=1/i,l=1/o,c=1/s;return _m1$2.elements[0]*=a,_m1$2.elements[1]*=a,_m1$2.elements[2]*=a,_m1$2.elements[4]*=l,_m1$2.elements[5]*=l,_m1$2.elements[6]*=l,_m1$2.elements[8]*=c,_m1$2.elements[9]*=c,_m1$2.elements[10]*=c,t.setFromRotationMatrix(_m1$2),n.x=i,n.y=o,n.z=s,this}makePerspective(e,t,n,r,i,o){const s=this.elements,a=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,o){const s=this.elements,a=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*a,h=(n+r)*l,d=(o+i)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,t=0,n=0,r=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(clamp$1(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-clamp$1(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(clamp$1(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-clamp$1(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _matrix$1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix$1,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";let Layers$1=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}},_object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const e=new Vector3,t=new Euler,n=new Quaternion,r=new Vector3(1,1,1);t._onChange((function i(){n.setFromEuler(t,!1)})),n._onChange((function o(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers$1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,t){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_target.copy(e):_target.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),r&&(_m1$1.extractRotation(r.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_removedEvent)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(e=new Vector3,t=new Vector3,n=new Vector3){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),_v0$1.subVectors(e,t),r.cross(_v0$1);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){_v0$1.subVectors(r,t),_v1$3.subVectors(n,t),_v2$2.subVectors(e,t);const o=_v0$1.dot(_v0$1),s=_v0$1.dot(_v1$3),a=_v0$1.dot(_v2$2),l=_v1$3.dot(_v1$3),c=_v1$3.dot(_v2$2),u=o*l-s*s;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(e,t,n,r,i,o,s,a){return this.getBarycoord(e,t,n,r,_v3$1),a.set(0,0),a.addScaledVector(i,_v3$1.x),a.addScaledVector(o,_v3$1.y),a.addScaledVector(s,_v3$1.z),a}static isFrontFacing(e,t,n,r){return _v0$1.subVectors(n,t),_v1$3.subVectors(e,t),_v0$1.cross(_v1$3).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),.5*_v0$1.cross(_v1$3).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Triangle.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,s;_vab.subVectors(r,n),_vac.subVectors(i,n),_vap.subVectors(e,n);const a=_vab.dot(_vap),l=_vac.dot(_vap);if(a<=0&&l<=0)return t.copy(n);_vbp.subVectors(e,r);const c=_vab.dot(_vbp),u=_vac.dot(_vbp);if(c>=0&&u<=c)return t.copy(r);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(_vab,o);_vcp.subVectors(e,i);const d=_vab.dot(_vcp),p=_vac.dot(_vcp);if(p>=0&&d<=p)return t.copy(i);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(_vac,s);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return _vbc.subVectors(i,r),s=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(_vbc,s);const g=1/(m+f+h);return o=f*g,s=h*g,t.copy(n).addScaledVector(_vab,o).addScaledVector(_vac,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(n.blending=this.blending),this.side!==FrontSide&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Color{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=SRGBColorSpace){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ColorManagement.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ColorManagement.workingColorSpace){return this.r=e,this.g=t,this.b=n,ColorManagement.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ColorManagement.workingColorSpace){if(e=euclideanModulo(e,1),t=clamp$1(t,0,1),n=clamp$1(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=hue2rgb(i,r,e+1/3),this.g=hue2rgb(i,r,e),this.b=hue2rgb(i,r,e-1/3)}return ColorManagement.toWorkingColorSpace(this,r),this}setStyle(e,t=SRGBColorSpace){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,ColorManagement.toWorkingColorSpace(this,t),n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,ColorManagement.toWorkingColorSpace(this,t),n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const e=parseFloat(i[1])/360,r=parseFloat(i[2])/100,o=parseFloat(i[3])/100;return n(i[4]),this.setHSL(e,r,o,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,t),this;if(6===i)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=SRGBColorSpace){const n=_colorKeywords[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),e),clamp$1(255*_color.r,0,255)<<16^clamp$1(255*_color.g,0,255)<<8^clamp$1(255*_color.b,0,255)<<0}getHexString(e=SRGBColorSpace){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),t);const n=_color.r,r=_color.g,i=_color.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),t),e.r=_color.r,e.g=_color.g,e.b=_color.b,e}getStyle(e=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),e);const t=_color.r,n=_color.g,r=_color.b;return e!==SRGBColorSpace?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*t|0},${255*n|0},${255*r|0})`}offsetHSL(e,t,n){return this.getHSL(_hslA),_hslA.h+=e,_hslA.s+=t,_hslA.l+=n,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_hslA),e.getHSL(_hslB);const n=lerp(_hslA.h,_hslB.h,t),r=lerp(_hslA.s,_hslB.s,t),i=lerp(_hslA.l,_hslB.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_vector2$1.fromBufferAttribute(this,t),_vector2$1.applyMatrix3(e),this.setXY(t,_vector2$1.x,_vector2$1.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix3(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix4(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyNormalMatrix(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.transformDirection(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array),i=normalize(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Uint8BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Int16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Int32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Float16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Float32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Float64BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float64Array(e),t,n)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Matrix3).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1.makeRotationFromQuaternion(e),this.applyMatrix4(_m1),this}rotateX(e){return _m1.makeRotationX(e),this.applyMatrix4(_m1),this}rotateY(e){return _m1.makeRotationY(e),this.applyMatrix4(_m1),this}rotateZ(e){return _m1.makeRotationZ(e),this.applyMatrix4(_m1),this}translate(e,t,n){return _m1.makeTranslation(e,t,n),this.applyMatrix4(_m1),this}scale(e,t,n){return _m1.makeScale(e,t,n),this.applyMatrix4(_m1),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Float32BufferAttribute(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];_box$1$1.setFromBufferAttribute(e),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1$1.min),this.boundingBox.expandByPoint(_box$1$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere$1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vector3,1/0);if(e){const n=this.boundingSphere.center;if(_box$1$1.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];_boxMorphTargets.setFromBufferAttribute(n),this.morphTargetsRelative?(_vector$8.addVectors(_box$1$1.min,_boxMorphTargets.min),_box$1$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1$1.max,_boxMorphTargets.max),_box$1$1.expandByPoint(_vector$8)):(_box$1$1.expandByPoint(_boxMorphTargets.min),_box$1$1.expandByPoint(_boxMorphTargets.max))}_box$1$1.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)_vector$8.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(_vector$8));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],s=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)_vector$8.fromBufferAttribute(o,t),s&&(_offset.fromBufferAttribute(e,t),_vector$8.add(_offset)),r=Math.max(r,n.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new Vector3,c[E]=new Vector3;const u=new Vector3,h=new Vector3,d=new Vector3,p=new Vector2,f=new Vector2,m=new Vector2,g=new Vector3,_=new Vector3;function b(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),f.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),_.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(_),c[t].add(_),c[n].add(_))}let v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(let E=0,w=v.length;E<w;++E){const e=v[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)b(n[r+0],n[r+1],n[r+2])}const y=new Vector3,O=new Vector3,S=new Vector3,T=new Vector3;function x(e){S.fromArray(i,3*e),T.copy(S);const t=l[e];y.copy(t),y.sub(S.multiplyScalar(S.dot(t))).normalize(),O.crossVectors(T,t);const n=O.dot(c[e])<0?-1:1;a[4*e]=y.x,a[4*e+1]=y.y,a[4*e+2]=y.z,a[4*e+3]=n}for(let E=0,w=v.length;E<w;++E){const e=v[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)x(n[r+0]),x(n[r+1]),x(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new BufferAttribute(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Vector3,i=new Vector3,o=new Vector3,s=new Vector3,a=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),a.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_vector$8.fromBufferAttribute(e,t),_vector$8.normalize(),e.setXYZ(t,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[a++]=n[s++]}return new BufferAttribute(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const r={};let i=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[a]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,t=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){_morphA.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(_tempA.fromBufferAttribute(a,e),o?_morphA.addScaledVector(_tempA,r):_morphA.addScaledVector(_tempA.sub(t),r))}t.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$3.copy(n.boundingSphere),_sphere$3.applyMatrix4(i),_ray$2.copy(e.ray).recast(e.near),!1===_sphere$3.containsPoint(_ray$2.origin)){if(null===_ray$2.intersectSphere(_sphere$3,_sphereHitAt))return;if(_ray$2.origin.distanceToSquared(_sphereHitAt)>(e.far-e.near)**2)return}if(_inverseMatrix$2.copy(i).invert(),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2),null!==n.boundingBox&&!1===_ray$2.intersectsBox(n.boundingBox))return;let o;const s=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,h=n.drawRange;if(null!==s)if(Array.isArray(r))for(let d=0,p=u.length;d<p;d++){const n=u[d],i=r[n.materialIndex];for(let r=Math.max(n.start,h.start),a=Math.min(s.count,Math.min(n.start+n.count,h.start+h.count));r<a;r+=3){const a=s.getX(r),u=s.getX(r+1),h=s.getX(r+2);o=checkBufferGeometryIntersection(this,i,e,_ray$2,l,c,a,u,h),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,h.start),i=Math.min(s.count,h.start+h.count);n<i;n+=3){const i=s.getX(n),a=s.getX(n+1),u=s.getX(n+2);o=checkBufferGeometryIntersection(this,r,e,_ray$2,l,c,i,a,u),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let d=0,p=u.length;d<p;d++){const n=u[d],i=r[n.materialIndex];for(let r=Math.max(n.start,h.start),s=Math.min(a.count,Math.min(n.start+n.count,h.start+h.count));r<s;r+=3){o=checkBufferGeometryIntersection(this,i,e,_ray$2,l,c,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,h.start),i=Math.min(a.count,h.start+h.count);n<i;n+=3){o=checkBufferGeometryIntersection(this,r,e,_ray$2,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}}function checkIntersection(e,t,n,r,i,o,s,a){let l;if(l=t.side===BackSide?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,t.side===FrontSide,a),null===l)return null;_intersectionPointWorld.copy(a),_intersectionPointWorld.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(_intersectionPointWorld);return c<n.near||c>n.far?null:{distance:c,point:_intersectionPointWorld.clone(),object:e}}function checkBufferGeometryIntersection(e,t,n,r,i,o,s,a,l){e.getVertexPosition(s,_vA$1),e.getVertexPosition(a,_vB$1),e.getVertexPosition(l,_vC$1);const c=checkIntersection(e,t,n,r,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(c){i&&(_uvA$1.fromBufferAttribute(i,s),_uvB$1.fromBufferAttribute(i,a),_uvC$1.fromBufferAttribute(i,l),c.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),o&&(_uvA$1.fromBufferAttribute(o,s),_uvB$1.fromBufferAttribute(o,a),_uvC$1.fromBufferAttribute(o,l),c.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const e={a:s,b:a,c:l,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,e.normal),c.face=e}return c}class BoxGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,o,p,f,m,g,_){const b=o/m,v=p/g,y=o/2,O=p/2,S=f/2,T=m+1,x=g+1;let E=0,w=0;const C=new Vector3;for(let s=0;s<x;s++){const o=s*v-O;for(let a=0;a<T;a++){const h=a*b-y;C[e]=h*r,C[t]=o*i,C[n]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),u.push(a/m),u.push(1-s/g),E+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=h+e+T*s,n=h+e+T*(s+1),r=h+(e+1)+T*(s+1),i=h+(e+1)+T*s;a.push(t,n,i),a.push(n,r,i),w+=6}s.addGroup(d,w,_),d+=w,h+=E}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cloneUniforms(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function mergeUniforms(e){const t={};for(let n=0;n<e.length;n++){const r=cloneUniforms(e[n]);for(const e in r)t[e]=r[e]}return t}function cloneUniformsGroups(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function getUnlitUniformColorSpace(e){return null===e.getRenderTarget()&&e.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",default_fragment="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class ShaderMaterial extends Material{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class PerspectiveCamera extends Camera{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*RAD2DEG*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*DEG2RAD*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*RAD2DEG*Math.atan(Math.tan(.5*DEG2RAD*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/s,r*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new PerspectiveCamera(fov,aspect,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new PerspectiveCamera(fov,aspect,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const o=new PerspectiveCamera(fov,aspect,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const s=new PerspectiveCamera(fov,aspect,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const a=new PerspectiveCamera(fov,aspect,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);const l=new PerspectiveCamera(fov,aspect,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,s,a,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=NoToneMapping,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(e,t,n,r,i,o,s,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:CubeReflectionMapping,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new CubeTexture(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:LinearFilter}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new BoxGeometry(5,5,5),i=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:BackSide,blending:NoBlending});i.uniforms.tEquirect.value=t;const o=new Mesh(r,i),s=t.minFilter;t.minFilter===LinearMipmapLinearFilter&&(t.minFilter=LinearFilter);return new CubeCamera(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(e=new Vector3(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_vector1.subVectors(n,t).cross(_vector2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_vector1),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||_normalMatrix.getNormalMatrix(e),r=this.coplanarPoint(_vector1).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}};const _sphere$2=new Sphere$1,_vector$7=new Vector3;class Frustum{constructor(e=new Plane$1,t=new Plane$1,n=new Plane$1,r=new Plane$1,i=new Plane$1,o=new Plane$1){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],_=n[14],b=n[15];return t[0].setComponents(s-r,u-a,f-h,b-m).normalize(),t[1].setComponents(s+r,u+a,f+h,b+m).normalize(),t[2].setComponents(s+i,u+l,f+d,b+g).normalize(),t[3].setComponents(s-i,u-l,f-d,b-g).normalize(),t[4].setComponents(s-o,u-c,f-p,b-_).normalize(),t[5].setComponents(s+o,u+c,f+p,b+_).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_sphere$2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(e){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(_vector$7.x=r.normal.x>0?e.max.x:e.min.x,_vector$7.y=r.normal.y>0?e.max.y:e.min.y,_vector$7.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function WebGLAttributes(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function o(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function s(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function s(t,r){const i=t.array,o=t.usage,s=e.createBuffer();let a;if(e.bindBuffer(r,s),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function a(t,r,i){const o=r.array,s=r.updateRange;e.bindBuffer(i,t),-1===s.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}class PlaneGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=e/s,h=t/a,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}var alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_vertex="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",envmap_physical_pars_fragment="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",lights_toon_fragment="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const vertex$h="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",fragment$h="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",vertex$g="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",fragment$g="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",vertex$f="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",fragment$f="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",vertex$e="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",fragment$e="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",vertex$d="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",fragment$d="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",vertex$c="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragment$c="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",vertex$b="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",fragment$b="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",vertex$a="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",fragment$a="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$9="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$9="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$8="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",fragment$8="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$7="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",fragment$7="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",vertex$6="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$6="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$5="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",fragment$5="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$4="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$4="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$3="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",fragment$3="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",vertex$2="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$2="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",vertex$1="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",fragment$1="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ShaderChunk={alphamap_fragment:alphamap_fragment,alphamap_pars_fragment:alphamap_pars_fragment,alphatest_fragment:alphatest_fragment,alphatest_pars_fragment:alphatest_pars_fragment,aomap_fragment:aomap_fragment,aomap_pars_fragment:aomap_pars_fragment,begin_vertex:begin_vertex,beginnormal_vertex:beginnormal_vertex,bsdfs:bsdfs,iridescence_fragment:iridescence_fragment,bumpmap_pars_fragment:bumpmap_pars_fragment,clipping_planes_fragment:clipping_planes_fragment,clipping_planes_pars_fragment:clipping_planes_pars_fragment,clipping_planes_pars_vertex:clipping_planes_pars_vertex,clipping_planes_vertex:clipping_planes_vertex,color_fragment:color_fragment,color_pars_fragment:color_pars_fragment,color_pars_vertex:color_pars_vertex,color_vertex:color_vertex,common:common,cube_uv_reflection_fragment:cube_uv_reflection_fragment,defaultnormal_vertex:defaultnormal_vertex,displacementmap_pars_vertex:displacementmap_pars_vertex,displacementmap_vertex:displacementmap_vertex,emissivemap_fragment:emissivemap_fragment,emissivemap_pars_fragment:emissivemap_pars_fragment,encodings_fragment:encodings_fragment,encodings_pars_fragment:encodings_pars_fragment,envmap_fragment:envmap_fragment,envmap_common_pars_fragment:envmap_common_pars_fragment,envmap_pars_fragment:envmap_pars_fragment,envmap_pars_vertex:envmap_pars_vertex,envmap_physical_pars_fragment:envmap_physical_pars_fragment,envmap_vertex:envmap_vertex,fog_vertex:fog_vertex,fog_pars_vertex:fog_pars_vertex,fog_fragment:fog_fragment,fog_pars_fragment:fog_pars_fragment,gradientmap_pars_fragment:gradientmap_pars_fragment,lightmap_fragment:lightmap_fragment,lightmap_pars_fragment:lightmap_pars_fragment,lights_lambert_fragment:lights_lambert_fragment,lights_lambert_pars_fragment:lights_lambert_pars_fragment,lights_pars_begin:lights_pars_begin,lights_toon_fragment:lights_toon_fragment,lights_toon_pars_fragment:lights_toon_pars_fragment,lights_phong_fragment:lights_phong_fragment,lights_phong_pars_fragment:lights_phong_pars_fragment,lights_physical_fragment:lights_physical_fragment,lights_physical_pars_fragment:lights_physical_pars_fragment,lights_fragment_begin:lights_fragment_begin,lights_fragment_maps:lights_fragment_maps,lights_fragment_end:lights_fragment_end,logdepthbuf_fragment:logdepthbuf_fragment,logdepthbuf_pars_fragment:logdepthbuf_pars_fragment,logdepthbuf_pars_vertex:logdepthbuf_pars_vertex,logdepthbuf_vertex:logdepthbuf_vertex,map_fragment:map_fragment,map_pars_fragment:map_pars_fragment,map_particle_fragment:map_particle_fragment,map_particle_pars_fragment:map_particle_pars_fragment,metalnessmap_fragment:metalnessmap_fragment,metalnessmap_pars_fragment:metalnessmap_pars_fragment,morphcolor_vertex:morphcolor_vertex,morphnormal_vertex:morphnormal_vertex,morphtarget_pars_vertex:morphtarget_pars_vertex,morphtarget_vertex:morphtarget_vertex,normal_fragment_begin:normal_fragment_begin,normal_fragment_maps:normal_fragment_maps,normal_pars_fragment:normal_pars_fragment,normal_pars_vertex:normal_pars_vertex,normal_vertex:normal_vertex,normalmap_pars_fragment:normalmap_pars_fragment,clearcoat_normal_fragment_begin:clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps:clearcoat_normal_fragment_maps,clearcoat_pars_fragment:clearcoat_pars_fragment,iridescence_pars_fragment:iridescence_pars_fragment,output_fragment:output_fragment,packing:packing,premultiplied_alpha_fragment:premultiplied_alpha_fragment,project_vertex:project_vertex,dithering_fragment:dithering_fragment,dithering_pars_fragment:dithering_pars_fragment,roughnessmap_fragment:roughnessmap_fragment,roughnessmap_pars_fragment:roughnessmap_pars_fragment,shadowmap_pars_fragment:shadowmap_pars_fragment,shadowmap_pars_vertex:shadowmap_pars_vertex,shadowmap_vertex:shadowmap_vertex,shadowmask_pars_fragment:shadowmask_pars_fragment,skinbase_vertex:skinbase_vertex,skinning_pars_vertex:skinning_pars_vertex,skinning_vertex:skinning_vertex,skinnormal_vertex:skinnormal_vertex,specularmap_fragment:specularmap_fragment,specularmap_pars_fragment:specularmap_pars_fragment,tonemapping_fragment:tonemapping_fragment,tonemapping_pars_fragment:tonemapping_pars_fragment,transmission_fragment:transmission_fragment,transmission_pars_fragment:transmission_pars_fragment,uv_pars_fragment:uv_pars_fragment,uv_pars_vertex:uv_pars_vertex,uv_vertex:uv_vertex,uv2_pars_fragment:uv2_pars_fragment,uv2_pars_vertex:uv2_pars_vertex,uv2_vertex:uv2_vertex,worldpos_vertex:worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(e,t,n,r,i,o,s){const a=new Color(0);let l,c,u=!0===o?0:1,h=null,d=0,p=null;function f(t,n){t.getRGB(_rgb,getUnlitUniformColorSpace(e)),r.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,f(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(a,u)},render:function m(r,o){let s=!1,m=!0===o.isScene?o.background:null;if(m&&m.isTexture){m=(o.backgroundBlurriness>0?n:t).get(m)}const g=e.xr,_=g.getSession&&g.getSession();_&&"additive"===_.environmentBlendMode&&(m=null),null===m?f(a,u):m&&m.isColor&&(f(m,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===CubeUVReflectionMapping)?(void 0===c&&(c=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,c.material.toneMapped=m.encoding!==sRGBEncoding,h===m&&d===m.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=m,d=m.version,p=e.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=m,l.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,l.material.toneMapped=m.encoding!==sRGBEncoding,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),h===m&&d===m.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=m,d=m.version,p=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function WebGLBindingStates(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=p(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function _(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function b(t,n,i,o,s,a){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,s,a):e.vertexAttribIPointer(t,n,i,s,a)}function v(){y(),u=!0,c!==l&&(c=l,h(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function O(i,l,d,v,y){let O=!1;if(s){const t=function S(t,n,i){const s=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=p(function h(){return r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}()),c[s]=u);return u}(v,d,l);c!==t&&(c=t,h(c.object)),O=function T(e,t,n,r){const i=c.attributes,o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){const t=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}(i,v,d,y),O&&function x(e,t,n,r){const i={},o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}(i,v,d,y)}else{const e=!0===l.wireframe;c.geometry===v.id&&c.program===d.id&&c.wireframe===e||(c.geometry=v.id,c.program=d.id,c.wireframe=e,O=!0)}null!==y&&n.update(y,34963),(O||u)&&(u=!1,function E(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,s=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)b(r.location+e,s/r.locationSize,u,t,l*h,(d+s/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)b(r.location+e,s/r.locationSize,u,t,s*h,s/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}_()}(i,l,d,v),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function S(){v();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function T(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete a[e.id]},releaseStatesOfProgram:function x(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:_}}function WebGLBufferRenderer(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function s(e){o=e},this.render=function a(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function l(r,s,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)}}function WebGLCapabilities(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),_=e.getParameter(36349),b=h>0,v=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function y(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:b,floatFragmentTextures:v,floatVertexTextures:b&&v,maxSamples:o?e.getParameter(36183):0}}function WebGLClipping(e){const t=this;let n=null,r=0,i=!1,o=!1;const s=new Plane$1,a=new Matrix3,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(i,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,a,u){const h=s.clippingPlanes,d=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!i||null===h||0===h.length||o&&!p)o?c(null):function m(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=o?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(h,a,t,u);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function WebGLCubeMaps(e){let t=new WeakMap;function n(e,t){return t===EquirectangularReflectionMapping?e.mapping=CubeReflectionMapping:t===EquirectangularRefractionMapping&&(e.mapping=CubeRefractionMapping),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const i=o.mapping;if(i===EquirectangularReflectionMapping||i===EquirectangularRefractionMapping){if(t.has(o)){return n(t.get(o).texture,o.mapping)}{const i=o.image;if(i&&i.height>0){const s=new WebGLCubeRenderTarget(i.height/2);return s.fromEquirectangularTexture(e,o),t.set(o,s),o.addEventListener("dispose",r),n(s.texture,o.mapping)}return null}}}return o},dispose:function o(){t=new WeakMap}}}let OrthographicCamera$1=class extends Camera{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,s=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}};const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera$1,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget),e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},r=_createRenderTarget(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(r)),this._blurMaterial=_getBlurShader(r,e,t)}return r}_compileMaterial(e){const t=new Mesh(this._lodPlanes[0],e);this._renderer.compile(t,_flatCamera)}_sceneToCubeUV(e,t,n,r){const i=new PerspectiveCamera(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(_clearColor),a.toneMapping=NoToneMapping,a.autoClear=!1;const u=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),h=new Mesh(new BoxGeometry,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(_clearColor),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,o[f],0),i.lookAt(s[f],0,0)):1===t?(i.up.set(0,0,o[f]),i.lookAt(0,s[f],0)):(i.up.set(0,o[f],0),i.lookAt(0,0,s[f]));const n=this._cubeSize;_setViewport(r,t*n,f>2?n:0,n,n),a.setRenderTarget(r),d&&a.render(h,i),a.render(e,i)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Mesh(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const s=this._cubeSize;_setViewport(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,_flatCamera)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=_axisDirections[(r-1)%_axisDirections.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Mesh(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*MAX_SAMPLES-1),p=i/d,f=isFinite(i)?1+Math.floor(3*p):MAX_SAMPLES;f>MAX_SAMPLES&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${MAX_SAMPLES}`);const m=[];let g=0;for(let v=0;v<MAX_SAMPLES;++v){const e=v/p,t=Math.exp(-e*e/2);m.push(t),0===v?g+=t:v<f&&(g+=2*t)}for(let v=0;v<m.length;v++)m[v]=m[v]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s);const{_lodMax:_}=this;u.dTheta.value=d,u.mipInt.value=_-n;const b=this._sizeLods[r];_setViewport(t,3*b*(r>_-LOD_MIN?r-_+LOD_MIN:0),4*(this._cubeSize-b),3*b,2*b),a.setRenderTarget(t),a.render(c,_flatCamera)}}function _createPlanes(e){const t=[],n=[],r=[];let i=e;const o=e-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>e-LOD_MIN?a=EXTRA_LOD_SIGMA[s-e+LOD_MIN-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,_=new Float32Array(f*p*d),b=new Float32Array(m*p*d),v=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];_.set(r,f*p*e),b.set(h,m*p*e);const i=[e,e,e,e,e,e];v.set(i,g*p*e)}const y=new BufferGeometry;y.setAttribute("position",new BufferAttribute(_,f)),y.setAttribute("uv",new BufferAttribute(b,m)),y.setAttribute("faceIndex",new BufferAttribute(v,g)),t.push(y),i>LOD_MIN&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function _createRenderTarget(e,t,n){const r=new WebGLRenderTarget(e,t,n);return r.texture.mapping=CubeUVReflectionMapping,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _setViewport(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function _getBlurShader(e,t,n){const r=new Float32Array(MAX_SAMPLES),i=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function i(o){if(o&&o.isTexture){const i=o.mapping,s=i===EquirectangularReflectionMapping||i===EquirectangularRefractionMapping,a=i===CubeReflectionMapping||i===CubeRefractionMapping;if(s||a){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let r=t.get(o);return null===n&&(n=new PMREMGenerator(e)),r=s?n.fromEquirectangular(o,r):n.fromCubemap(o,r),t.set(o,r),r.texture}if(t.has(o))return t.get(o).texture;{const i=o.image;if(s&&i&&i.height>0||a&&i&&function s(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(i)){null===n&&(n=new PMREMGenerator(e));const i=s?n.fromEquirectangular(o):n.fromCubemap(o);return t.set(o,i),o.addEventListener("dispose",r),i.texture}return null}}}return o},dispose:function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function WebGLExtensions(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function WebGLGeometries(e,t,n,r){const i={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(arrayNeedsUint32(n)?Uint32BufferAttribute:Uint16BufferAttribute)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function l(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function c(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function u(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function WebGLIndexedBufferRenderer(e,t,n,r){const i=r.isWebGL2;let o,s,a;this.setMode=function l(e){o=e},this.setIndex=function c(e){s=e.type,a=e.bytesPerElement},this.render=function u(t,r){e.drawElements(o,r,s,t*a),n.update(r,o,1)},this.renderInstances=function h(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,s,r*a,c),n.update(l,o,c)}}function WebGLInfo(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function n(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function numericalSort(e,t){return e[0]-t[0]}function absNumericalSort(e,t){return Math.abs(t[1])-Math.abs(e[1])}function WebGLMorphtargets(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new Vector4,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,h){const d=c.morphTargetInfluences;if(!0===t.isWebGL2){const r=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,i=void 0!==r?r.length:0;let a=o.get(u);if(void 0===a||a.count!==i){let e=function(){_.dispose(),o.delete(u),u.removeEventListener("dispose",e)};void 0!==a&&a.texture.dispose();const n=void 0!==u.morphAttributes.position,r=void 0!==u.morphAttributes.normal,l=void 0!==u.morphAttributes.color,c=u.morphAttributes.position||[],h=u.morphAttributes.normal||[],d=u.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===r&&(p=2),!0===l&&(p=3);let f=u.attributes.position.count*p,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);const g=new Float32Array(f*m*4*i),_=new DataArrayTexture(g,f,m,i);_.type=FloatType,_.needsUpdate=!0;const b=4*p;for(let t=0;t<i;t++){const e=c[t],i=h[t],o=d[t],a=f*m*4*t;for(let t=0;t<e.count;t++){const c=t*b;!0===n&&(s.fromBufferAttribute(e,t),g[a+c+0]=s.x,g[a+c+1]=s.y,g[a+c+2]=s.z,g[a+c+3]=0),!0===r&&(s.fromBufferAttribute(i,t),g[a+c+4]=s.x,g[a+c+5]=s.y,g[a+c+6]=s.z,g[a+c+7]=0),!0===l&&(s.fromBufferAttribute(o,t),g[a+c+8]=s.x,g[a+c+9]=s.y,g[a+c+10]=s.z,g[a+c+11]=4===o.itemSize?s.w:1)}}a={count:i,texture:_,size:new Vector2(f,m)},o.set(u,a),u.addEventListener("dispose",e)}let l=0;for(let e=0;e<d.length;e++)l+=d[e];const c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",a.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",a.size)}else{const t=void 0===d?0:d.length;let n=r[u.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[u.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(absNumericalSort);for(let e=0;e<8;e++)e<t&&n[e][1]?(a[e][0]=n[e][0],a[e][1]=n[e][1]):(a[e][0]=Number.MAX_SAFE_INTEGER,a[e][1]=0);a.sort(numericalSort);const o=u.morphAttributes.position,s=u.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=a[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&u.getAttribute("morphTarget"+e)!==o[n]&&u.setAttribute("morphTarget"+e,o[n]),s&&u.getAttribute("morphNormal"+e)!==s[n]&&u.setAttribute("morphNormal"+e,s[n]),i[e]=r,l+=r):(o&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),s&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}const c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function WebGLObjects(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function s(e){const s=r.render.frame,a=e.geometry,l=t.get(e,a);return i.get(l)!==s&&(t.update(l),i.set(l,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function a(){i=new WeakMap}}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=arrayCacheF32[i];if(void 0===o&&(o=new Float32Array(i),arrayCacheF32[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function arraysEqual(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function copyArray(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function allocTexUnits(e,t){let n=arrayCacheI32[t];void 0===n&&(n=new Int32Array(t),arrayCacheI32[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function setValueV1f(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function setValueV2f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2fv(this.addr,t),copyArray(n,t)}}function setValueV3f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(arraysEqual(n,t))return;e.uniform3fv(this.addr,t),copyArray(n,t)}}function setValueV4f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4fv(this.addr,t),copyArray(n,t)}}function setValueM2(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(arraysEqual(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,r))return;mat2array.set(r),e.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(n,r)}}function setValueM3(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(arraysEqual(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,r))return;mat3array.set(r),e.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(n,r)}}function setValueM4(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(arraysEqual(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,r))return;mat4array.set(r),e.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(n,r)}}function setValueV1i(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function setValueV2i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2iv(this.addr,t),copyArray(n,t)}}function setValueV3i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;e.uniform3iv(this.addr,t),copyArray(n,t)}}function setValueV4i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4iv(this.addr,t),copyArray(n,t)}}function setValueV1ui(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function setValueV2ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2uiv(this.addr,t),copyArray(n,t)}}function setValueV3ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;e.uniform3uiv(this.addr,t),copyArray(n,t)}}function setValueV4ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4uiv(this.addr,t),copyArray(n,t)}}function setValueT1(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||emptyTexture,i)}function setValueT3D1(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||empty3dTexture,i)}function setValueT6(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||emptyCubeTexture,i)}function setValueT2DArray1(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||emptyArrayTexture,i)}function getSingularSetter(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(e,t){e.uniform1fv(this.addr,t)}function setValueV2fArray(e,t){const n=flatten$2(t,this.size,2);e.uniform2fv(this.addr,n)}function setValueV3fArray(e,t){const n=flatten$2(t,this.size,3);e.uniform3fv(this.addr,n)}function setValueV4fArray(e,t){const n=flatten$2(t,this.size,4);e.uniform4fv(this.addr,n)}function setValueM2Array(e,t){const n=flatten$2(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function setValueM3Array(e,t){const n=flatten$2(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function setValueM4Array(e,t){const n=flatten$2(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function setValueV1iArray(e,t){e.uniform1iv(this.addr,t)}function setValueV2iArray(e,t){e.uniform2iv(this.addr,t)}function setValueV3iArray(e,t){e.uniform3iv(this.addr,t)}function setValueV4iArray(e,t){e.uniform4iv(this.addr,t)}function setValueV1uiArray(e,t){e.uniform1uiv(this.addr,t)}function setValueV2uiArray(e,t){e.uniform2uiv(this.addr,t)}function setValueV3uiArray(e,t){e.uniform3uiv(this.addr,t)}function setValueV4uiArray(e,t){e.uniform4uiv(this.addr,t)}function setValueT1Array(e,t,n){const r=this.cache,i=t.length,o=allocTexUnits(n,i);arraysEqual(r,o)||(e.uniform1iv(this.addr,o),copyArray(r,o));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||emptyTexture,o[s])}function setValueT3DArray(e,t,n){const r=this.cache,i=t.length,o=allocTexUnits(n,i);arraysEqual(r,o)||(e.uniform1iv(this.addr,o),copyArray(r,o));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||empty3dTexture,o[s])}function setValueT6Array(e,t,n){const r=this.cache,i=t.length,o=allocTexUnits(n,i);arraysEqual(r,o)||(e.uniform1iv(this.addr,o),copyArray(r,o));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||emptyCubeTexture,o[s])}function setValueT2DArrayArray(e,t,n){const r=this.cache,i=t.length,o=allocTexUnits(n,i);arraysEqual(r,o)||(e.uniform1iv(this.addr,o),copyArray(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||emptyArrayTexture,o[s])}function getPureArraySetter(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=getSingularSetter(t.type)}}class PureArrayUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=getPureArraySetter(t.type)}}class StructuredUniform{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,n){const r=e.name,i=r.length;for(RePathPart.lastIndex=0;;){const o=RePathPart.exec(r),s=RePathPart.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){addUniform(n,void 0===c?new SingleUniform(a,e,t):new PureArrayUniform(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new StructuredUniform(a),addUniform(n,e)),n=e}}}class WebGLUniforms{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);parseUniform(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function WebGLShader(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let programIdCount=0;function handleSource(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=i;s<o;s++){const e=s+1;r.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return r.join("\n")}function getEncodingComponents(e){switch(e){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function getShaderErrors(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+handleSource(e.getShaderSource(t),r)}return i}function getTexelEncodingFunction(e,t){const n=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function getToneMappingFunction(e,t){let n;switch(t){case LinearToneMapping:n="Linear";break;case ReinhardToneMapping:n="Reinhard";break;case CineonToneMapping:n="OptimizedCineon";break;case ACESFilmicToneMapping:n="ACESFilmic";break;case CustomToneMapping:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function generateExtensions(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function fetchAttributeLocations(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let s=1;35674===r.type&&(s=2),35675===r.type&&(s=3),35676===r.type&&(s=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(includePattern,includeReplacer)}function includeReplacer(e,t){const n=ShaderChunk[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return resolveIncludes(n)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function generatePrecision(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function generateShadowMapTypeDefine(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===PCFShadowMap?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===PCFSoftShadowMap?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===VSMShadowMap&&(t="SHADOWMAP_TYPE_VSM"),t}function generateEnvMapTypeDefine(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:t="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:t="ENVMAP_TYPE_CUBE_UV"}return t}function generateEnvMapModeDefine(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap&&e.envMapMode===CubeRefractionMapping)t="ENVMAP_MODE_REFRACTION";return t}function generateEnvMapBlendingDefine(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case MultiplyOperation:t="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:t="ENVMAP_BLENDING_MIX";break;case AddOperation:t="ENVMAP_BLENDING_ADD"}return t}function generateCubeUVSize(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function WebGLProgram(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=generateShadowMapTypeDefine(n),c=generateEnvMapTypeDefine(n),u=generateEnvMapModeDefine(n),h=generateEnvMapBlendingDefine(n),d=generateCubeUVSize(n),p=n.isWebGL2?"":generateExtensions(n),f=generateDefines(o),m=i.createProgram();let g,_,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(filterEmptyLine).join("\n"),g.length>0&&(g+="\n"),_=[p,f].filter(filterEmptyLine).join("\n"),_.length>0&&(_+="\n")):(g=[generatePrecision(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),_=[p,generatePrecision(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",n.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",n.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),s=resolveIncludes(s),s=replaceLightNums(s,n),s=replaceClippingPlaneNums(s,n),a=resolveIncludes(a),a=replaceLightNums(a,n),a=replaceClippingPlaneNums(a,n),s=unrollLoops(s),a=unrollLoops(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in",n.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const v=b+_+a,y=WebGLShader(i,35633,b+g+s),O=WebGLShader(i,35632,v);if(i.attachShader(m,y),i.attachShader(m,O),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(y).trim(),n=i.getShaderInfoLog(O).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=getShaderErrors(i,y,"vertex"),n=getShaderErrors(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:_}})}let S,T;return i.deleteShader(y),i.deleteShader(O),this.getUniforms=function(){return void 0===S&&(S=new WebGLUniforms(i,m)),S},this.getAttributes=function(){return void 0===T&&(T=fetchAttributeLocations(i,m)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=programIdCount++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=y,this.fragmentShader=O,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new WebGLShaderStage(e),t.set(e,n)),n}}class WebGLShaderStage{constructor(e){this.id=_id++,this.code=e,this.usedTimes=0}}function WebGLPrograms(e,t,n,r,i,o,s){const a=new Layers$1,l=new WebGLShaderCache,c=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(o,a,c,g,_){const b=g.fog,v=_.geometry,y=o.isMeshStandardMaterial?g.environment:null,O=(o.isMeshStandardMaterial?n:t).get(o.envMap||y),S=O&&O.mapping===CubeUVReflectionMapping?O.image.height:null,T=f[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const x=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,E=void 0!==x?x.length:0;let w,C,A,k,R=0;if(void 0!==v.morphAttributes.position&&(R=1),void 0!==v.morphAttributes.normal&&(R=2),void 0!==v.morphAttributes.color&&(R=3),T){const e=ShaderLib[T];w=e.vertexShader,C=e.fragmentShader}else w=o.vertexShader,C=o.fragmentShader,l.update(o),A=l.getVertexShaderID(o),k=l.getFragmentShaderID(o);const I=e.getRenderTarget(),M=o.alphaTest>0,$=o.clearcoat>0,P=o.iridescence>0;return{isWebGL2:u,shaderID:T,shaderName:o.type,vertexShader:w,fragmentShader:C,defines:o.defines,customVertexShaderID:A,customFragmentShaderID:k,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:d,outputEncoding:null===I?e.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:LinearEncoding,map:!!o.map,matcap:!!o.matcap,envMap:!!O,envMapMode:O&&O.mapping,envMapCubeUVHeight:S,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:o.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===sRGBEncoding,clearcoat:$,clearcoatMap:$&&!!o.clearcoatMap,clearcoatRoughnessMap:$&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:$&&!!o.clearcoatNormalMap,iridescence:P,iridescenceMap:P&&!!o.iridescenceMap,iridescenceThicknessMap:P&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===NormalBlending,alphaMap:!!o.alphaMap,alphaTest:M,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!v.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!v.attributes.color&&4===v.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!b,useFog:!0===o.fog,fogExp2:b&&b.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==v.morphAttributes.position,morphNormals:void 0!==v.morphAttributes.normal,morphColors:void 0!==v.morphAttributes.color,morphTargetsCount:E,morphTextureStride:R,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:NoToneMapping,useLegacyLights:e.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===DoubleSide,flipSided:o.side===BackSide,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function g(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function r(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function i(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.map&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.lightMap&&a.enable(7);t.aoMap&&a.enable(8);t.emissiveMap&&a.enable(9);t.bumpMap&&a.enable(10);t.normalMap&&a.enable(11);t.objectSpaceNormalMap&&a.enable(12);t.tangentSpaceNormalMap&&a.enable(13);t.clearcoat&&a.enable(14);t.clearcoatMap&&a.enable(15);t.clearcoatRoughnessMap&&a.enable(16);t.clearcoatNormalMap&&a.enable(17);t.iridescence&&a.enable(18);t.iridescenceMap&&a.enable(19);t.iridescenceThicknessMap&&a.enable(20);t.displacementMap&&a.enable(21);t.specularMap&&a.enable(22);t.roughnessMap&&a.enable(23);t.metalnessMap&&a.enable(24);t.gradientMap&&a.enable(25);t.alphaMap&&a.enable(26);t.alphaTest&&a.enable(27);t.vertexColors&&a.enable(28);t.vertexAlphas&&a.enable(29);t.vertexUvs&&a.enable(30);t.vertexTangents&&a.enable(31);t.uvsVertexOnly&&a.enable(32);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.useLegacyLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.specularIntensityMap&&a.enable(15);t.specularColorMap&&a.enable(16);t.transmission&&a.enable(17);t.transmissionMap&&a.enable(18);t.thicknessMap&&a.enable(19);t.sheen&&a.enable(20);t.sheenColorMap&&a.enable(21);t.sheenRoughnessMap&&a.enable(22);t.decodeVideoTexture&&a.enable(23);t.opaque&&a.enable(24);e.push(a.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function _(e){const t=f[e.type];let n;if(t){const e=ShaderLib[t];n=UniformsUtils.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function b(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new WebGLProgram(e,n,t,o),c.push(r)),r},releaseProgram:function v(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function y(e){l.remove(e)},programs:c,dispose:function O(){l.dispose()}}}function WebGLProperties(){let e=new WeakMap;return{get:function t(n){let r=e.get(n);return void 0===r&&(r={},e.set(n,r)),r},remove:function n(t){e.delete(t)},update:function r(t,n,i){e.get(t)[n]=i},dispose:function i(){e=new WeakMap}}}function painterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function s(){t=0,n.length=0,r.length=0,i.length=0},push:function a(e,t,s,l,c,u){const h=o(e,t,s,l,c,u);s.transmission>0?r.push(h):!0===s.transparent?i.push(h):n.push(h)},unshift:function l(e,t,s,a,c,u){const h=o(e,t,s,a,c,u);s.transmission>0?r.unshift(h):!0===s.transparent?i.unshift(h):n.unshift(h)},finish:function c(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function u(e,t){n.length>1&&n.sort(e||painterSortStable),r.length>1&&r.sort(t||reversePainterSortStable),i.length>1&&i.sort(t||reversePainterSortStable)}}}function WebGLRenderLists(){let e=new WeakMap;return{get:function t(n,r){const i=e.get(n);let o;return void 0===i?(o=new WebGLRenderList,e.set(n,[o])):r>=i.length?(o=new WebGLRenderList,i.push(o)):o=i[r],o},dispose:function n(){e=new WeakMap}}}function UniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Vector3,color:new Color};break;case"SpotLight":n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return e[t.id]=n,n}}}function ShadowUniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function WebGLLights(e,t){const n=new UniformsCache,r=ShadowUniformsCache(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new Vector3);const o=new Vector3,s=new Matrix4,a=new Matrix4;return{setup:function l(o,s){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,_=0,b=0,v=0;o.sort(shadowCastingAndTexturingLightsFirst);const y=!0===s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,O=t.intensity,S=t.distance,T=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*O*y,l+=s.g*O*y,c+=s.b*O*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],O);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=T,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(O*y),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[b]=t.map,b++,o.updateMatrices(t),t.castShadow&&v++),i.spotLightMatrix[d]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=T,_++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(O),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=T,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(O*y),e.groundColor.copy(t.groundColor).multiplyScalar(O*y),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,i.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=UniformsLib.LTC_HALF_1,i.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const O=i.hash;O.directionalLength===u&&O.pointLength===h&&O.spotLength===d&&O.rectAreaLength===p&&O.hemiLength===f&&O.numDirectionalShadows===m&&O.numPointShadows===g&&O.numSpotShadows===_&&O.numSpotMaps===b||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=_,i.spotShadowMap.length=_,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=_+b-v,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=v,O.directionalLength=u,O.pointLength=h,O.spotLength=d,O.rectAreaLength=p,O.hemiLength=f,O.numDirectionalShadows=m,O.numPointShadows=g,O.numSpotShadows=_,O.numSpotMaps=b,i.version=nextVersion++)},setupView:function c(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),s.copy(t.matrixWorld),s.premultiply(h),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function WebGLRenderState(e,t){const n=new WebGLLights(e,t),r=[],i=[];return{init:function o(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function s(e){n.setup(r,e)},setupLightsView:function a(e){n.setupView(r,e)},pushLight:function l(e){r.push(e)},pushShadow:function c(e){i.push(e)}}}function WebGLRenderStates(e,t){let n=new WeakMap;return{get:function r(i,o=0){const s=n.get(i);let a;return void 0===s?(a=new WebGLRenderState(e,t),n.set(i,[a])):o>=s.length?(a=new WebGLRenderState(e,t),s.push(a)):a=s[o],a},dispose:function i(){n=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vertex="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragment="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function WebGLShadowMap(e,t,n){let r=new Frustum;const i=new Vector2,o=new Vector2,s=new Vector4,a=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),l=new MeshDistanceMaterial,c={},u=n.maxTextureSize,h={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},d=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new BufferGeometry;f.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Mesh(f,d),g=this;function _(n,r){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new WebGLRenderTarget(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,p,m,null)}function b(t,n,r,i,o,s){let u=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)u=d;else if(u=!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=s===VSMShadowMap?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function v(n,i,o,s,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===VSMShadowMap)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=b(n,u,s,o.near,o.far,a);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=b(n,i,s,o.near,o.far,a);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)v(l[e],i,o,s,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(t,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(NoBlending),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const l=t[p],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map){const e=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};c.map=new WebGLRenderTarget(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const f=c.getViewportCount();for(let e=0;e<f;e++){const t=c.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),v(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===VSMShadowMap&&_(c,a),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function WebGLState(e,t,n){const r=n.isWebGL2;const i=new function o(){let t=!1;const n=new Vector4;let r=null;const i=new Vector4(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,s,a){!0===a&&(t*=s,r*=s,o*=s),n.set(t,r,o,s),!1===i.equals(n)&&(e.clearColor(t,r,o,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function a(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?W(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case NeverDepth:e.depthFunc(512);break;case AlwaysDepth:e.depthFunc(519);break;case LessDepth:e.depthFunc(513);break;case LessEqualDepth:e.depthFunc(515);break;case EqualDepth:e.depthFunc(514);break;case GreaterEqualDepth:e.depthFunc(518);break;case GreaterDepth:e.depthFunc(516);break;case NotEqualDepth:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function c(){let t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?W(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&o===s||(e.stencilFunc(t,n,s),r=t,i=n,o=s)},setOp:function(t,n,r){s===t&&a===n&&l===r||(e.stencilOp(t,n,r),s=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}},u=new WeakMap,h=new WeakMap;let d={},p={},f=new WeakMap,m=[],g=null,_=!1,b=null,v=null,y=null,O=null,S=null,T=null,x=null,E=!1,w=null,C=null,A=null,k=null,R=null;const I=e.getParameter(35661);let M=!1,$=0;const P=e.getParameter(7938);-1!==P.indexOf("WebGL")?($=parseFloat(/^WebGL (\d)/.exec(P)[1]),M=$>=1):-1!==P.indexOf("OpenGL ES")&&($=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),M=$>=2);let L=null,D={};const N=e.getParameter(3088),B=e.getParameter(2978),F=(new Vector4).fromArray(N),G=(new Vector4).fromArray(B);function U(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let s=0;s<r;s++)e.texImage2D(n+s,0,6408,1,1,0,6408,5121,i);return o}const V={};function W(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function H(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}V[3553]=U(3553,3553,1),V[34067]=U(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),l.setClear(0),W(2929),s.setFunc(LessEqualDepth),X(!1),Y(CullFaceBack),W(2884),j(NoBlending);const Q={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(r)Q[MinEquation]=32775,Q[MaxEquation]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Q[MinEquation]=e.MIN_EXT,Q[MaxEquation]=e.MAX_EXT)}const z={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function j(t,n,r,i,o,s,a,l){if(t!==NoBlending){if(!1===_&&(W(3042),_=!0),t===CustomBlending)o=o||n,s=s||r,a=a||i,n===v&&o===S||(e.blendEquationSeparate(Q[n],Q[o]),v=n,S=o),r===y&&i===O&&s===T&&a===x||(e.blendFuncSeparate(z[r],z[i],z[s],z[a]),y=r,O=i,T=s,x=a),b=t,E=!1;else if(t!==b||l!==E){if(v===AddEquation&&S===AddEquation||(e.blendEquation(32774),v=AddEquation,S=AddEquation),l)switch(t){case NormalBlending:e.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:e.blendFunc(1,1);break;case SubtractiveBlending:e.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case NormalBlending:e.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:e.blendFunc(770,1);break;case SubtractiveBlending:e.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,O=null,T=null,x=null,b=t,E=l}}else!0===_&&(H(3042),_=!1)}function X(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function Y(t){t!==CullFaceNone?(W(2884),t!==C&&(t===CullFaceBack?e.cullFace(1029):t===CullFaceFront?e.cullFace(1028):e.cullFace(1032))):H(2884),C=t}function Z(t,n,r){t?(W(32823),k===n&&R===r||(e.polygonOffset(n,r),k=n,R=r)):H(32823)}return{buffers:{color:i,depth:s,stencil:l},enable:W,disable:H,bindFramebuffer:function q(t,n){return p[t]!==n&&(e.bindFramebuffer(t,n),p[t]=n,r&&(36009===t&&(p[36160]=n),36160===t&&(p[36009]=n)),!0)},drawBuffers:function K(r,i){let o=m,s=!1;if(r)if(o=f.get(i),void 0===o&&(o=[],f.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,s=!0}}else 36064!==o[0]&&(o[0]=36064,s=!0);else 1029!==o[0]&&(o[0]=1029,s=!0);s&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function J(t){return g!==t&&(e.useProgram(t),g=t,!0)},setBlending:j,setMaterial:function ee(e,t){e.side===DoubleSide?H(2884):W(2884);let n=e.side===BackSide;t&&(n=!n),X(n),e.blending===NormalBlending&&!1===e.transparent?j(NoBlending):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Z(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?W(32926):H(32926)},setFlipSided:X,setCullFace:Y,setLineWidth:function te(t){t!==A&&(M&&e.lineWidth(t),A=t)},setPolygonOffset:Z,setScissorTest:function ne(e){e?W(3089):H(3089)},activeTexture:function re(t){void 0===t&&(t=33984+I-1),L!==t&&(e.activeTexture(t),L=t)},bindTexture:function ie(t,n,r){void 0===r&&(r=null===L?33984+I-1:L);let i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===t&&i.texture===n||(L!==r&&(e.activeTexture(r),L=r),e.bindTexture(t,n||V[t]),i.type=t,i.texture=n)},unbindTexture:function oe(){const t=D[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function se(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function ae(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function le(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function ce(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function ue(t,n){let r=h.get(n);void 0===r&&(r=new WeakMap,h.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function he(t,n){const r=h.get(n).get(t);u.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(n,r))},texStorage2D:function de(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function pe(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function fe(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function me(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function ge(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function _e(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function be(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function ve(t){!1===G.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),G.copy(t))},reset:function ye(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},L=null,D={},p={},f=new WeakMap,m=[],g=null,_=!1,b=null,v=null,y=null,O=null,S=null,T=null,x=null,E=!1,w=null,C=null,A=null,k=null,R=null,F.set(0,0,e.canvas.width,e.canvas.height),G.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),l.reset()}}}function WebGLTextures(e,t,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(q){}function b(e,t){return _?new OffscreenCanvas(e,t):createElementNS$1("canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?floorPowerOfTwo:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===m&&(m=b(o,s));const a=n?b(o,s):m;a.width=o,a.height=s;return a.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return isPowerOfTwo(e.width)&&isPowerOfTwo(e.height)}function O(e,t){return e.generateMipmaps&&t&&e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter}function S(t){e.generateMipmap(t)}function T(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===sRGBEncoding&&!1===s?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function x(e,t,n){return!0===O(e,n)||e.isFramebufferTexture&&e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===NearestFilter||e===NearestMipmapNearestFilter||e===NearestMipmapLinearFilter?9728:9729}function w(e){const t=e.target;t.removeEventListener("dispose",w),function n(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function C(t){const n=t.target;n.removeEventListener("dispose",C),function i(t){const n=t.texture,i=r.get(t),o=r.get(n);void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const t=r.get(n[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],s.memory.textures--}let k=0;function R(e,t){const i=r.get(e);if(e.isVideoTexture&&function o(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}const I={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},M={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function $(n,o,s){if(s?(e.texParameteri(n,10242,I[o.wrapS]),e.texParameteri(n,10243,I[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,I[o.wrapR]),e.texParameteri(n,10240,M[o.magFilter]),e.texParameteri(n,10241,M[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===ClampToEdgeWrapping&&o.wrapT===ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(o.magFilter)),e.texParameteri(n,10241,E(o.minFilter)),o.minFilter!==NearestFilter&&o.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===NearestFilter)return;if(o.minFilter!==NearestMipmapLinearFilter&&o.minFilter!==LinearMipmapLinearFilter)return;if(o.type===FloatType&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===HalfFloatType&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function P(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const a=function l(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return r}function L(t,i,s){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const c=P(t,i),h=i.source;n.bindTexture(l,t.__webglTexture,33984+s);const d=r.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(33984+s),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=function p(e){return!a&&(e.wrapS!==ClampToEdgeWrapping||e.wrapT!==ClampToEdgeWrapping||e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter)}(i)&&!1===y(i.image);let r=v(i.image,t,!1,u);r=U(i,r);const p=y(r)||a,f=o.convert(i.format,i.encoding);let m,g=o.convert(i.type),_=T(i.internalFormat,f,g,i.encoding,i.isVideoTexture);$(l,i,p);const b=i.mipmaps,E=a&&!0!==i.isVideoTexture,w=void 0===d.__version||!0===c,C=x(i,r,p);if(i.isDepthTexture)_=6402,a?_=i.type===FloatType?36012:i.type===UnsignedIntType?33190:i.type===UnsignedInt248Type?35056:33189:i.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===DepthFormat&&6402===_&&i.type!==UnsignedShortType&&i.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=UnsignedIntType,g=o.convert(i.type)),i.format===DepthStencilFormat&&6402===_&&(_=34041,i.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=UnsignedInt248Type,g=o.convert(i.type))),w&&(E?n.texStorage2D(3553,1,_,r.width,r.height):n.texImage2D(3553,0,_,r.width,r.height,0,f,g,null));else if(i.isDataTexture)if(b.length>0&&p){E&&w&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(let e=0,t=b.length;e<t;e++)m=b[e],E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,_,m.width,m.height,0,f,g,m.data);i.generateMipmaps=!1}else E?(w&&n.texStorage2D(3553,C,_,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,f,g,r.data)):n.texImage2D(3553,0,_,r.width,r.height,0,f,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){E&&w&&n.texStorage3D(35866,C,_,b[0].width,b[0].height,r.depth);for(let e=0,t=b.length;e<t;e++)m=b[e],i.format!==RGBAFormat?null!==f?E?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,m.data,0,0):n.compressedTexImage3D(35866,e,_,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,g,m.data):n.texImage3D(35866,e,_,m.width,m.height,r.depth,0,f,g,m.data)}else{E&&w&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(let e=0,t=b.length;e<t;e++)m=b[e],i.format!==RGBAFormat?null!==f?E?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(3553,e,_,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,_,m.width,m.height,0,f,g,m.data)}else if(i.isDataArrayTexture)E?(w&&n.texStorage3D(35866,C,_,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(35866,0,_,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isData3DTexture)E?(w&&n.texStorage3D(32879,C,_,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(32879,0,_,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isFramebufferTexture){if(w)if(E)n.texStorage2D(3553,C,_,r.width,r.height);else{let e=r.width,t=r.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,_,e,t,0,f,g,null),e>>=1,t>>=1}}else if(b.length>0&&p){E&&w&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(let e=0,t=b.length;e<t;e++)m=b[e],E?n.texSubImage2D(3553,e,0,0,f,g,m):n.texImage2D(3553,e,_,f,g,m);i.generateMipmaps=!1}else E?(w&&n.texStorage2D(3553,C,_,r.width,r.height),n.texSubImage2D(3553,0,0,0,f,g,r)):n.texImage2D(3553,0,_,f,g,r);O(i,p)&&S(l),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function D(t,i,s,a,l){const c=o.convert(s.format,s.encoding),u=o.convert(s.type),h=T(s.internalFormat,c,u,s.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),G(i)?d.framebufferTexture2DMultisampleEXT(36160,a,l,r.get(s).__webglTexture,0,F(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||G(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===FloatType?i=36012:t.type===UnsignedIntType&&(i=33190));const r=F(n);G(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=F(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):G(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const s=t[i],a=o.convert(s.format,s.encoding),l=o.convert(s.type),c=T(s.internalFormat,a,l,s.encoding),u=F(n);r&&!1===G(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):G(n)?d.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function B(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function s(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),R(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,s=F(i);if(i.depthTexture.format===DepthFormat)G(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==DepthStencilFormat)throw new Error("Unknown depthTexture format");G(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(h,e.samples)}function G(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){const r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===_SRGBAFormat||r!==LinearEncoding&&(r===sRGBEncoding?!1===a?!0===t.has("EXT_sRGB")&&i===RGBAFormat?(e.format=_SRGBAFormat,e.minFilter=LinearFilter,e.generateMipmaps=!1):n=ImageUtils.sRGBToLinear(n):i===RGBAFormat&&o===UnsignedByteType||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function V(){const e=k;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),k+=1,e},this.resetTextureUnits=function W(){k=0},this.setTexture2D=R,this.setTexture2DArray=function H(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function Q(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function z(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?function l(t,i,s){if(6!==i.image.length)return;const l=P(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+s);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+s),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||r?r?i.image[e].image:i.image[e]:v(i.image[e],!1,!0,c),d[e]=U(i,d[e]);const p=d[0],f=y(p)||a,m=o.convert(i.format,i.encoding),g=o.convert(i.type),_=T(i.internalFormat,m,g,i.encoding),b=a&&!0!==i.isVideoTexture,E=void 0===h.__version||!0===l;let w,C=x(i,p,f);if($(34067,i,f),t){b&&E&&n.texStorage2D(34067,C,_,p.width,p.height);for(let e=0;e<6;e++){w=d[e].mipmaps;for(let t=0;t<w.length;t++){const r=w[t];i.format!==RGBAFormat?null!==m?b?n.compressedTexSubImage2D(34069+e,t,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+e,t,_,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?n.texSubImage2D(34069+e,t,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t,_,r.width,r.height,0,m,g,r.data)}}}else{w=i.mipmaps,b&&E&&(w.length>0&&C++,n.texStorage2D(34067,C,_,d[0].width,d[0].height));for(let e=0;e<6;e++)if(r){b?n.texSubImage2D(34069+e,0,0,0,d[e].width,d[e].height,m,g,d[e].data):n.texImage2D(34069+e,0,_,d[e].width,d[e].height,0,m,g,d[e].data);for(let t=0;t<w.length;t++){const r=w[t].image[e].image;b?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t+1,_,r.width,r.height,0,m,g,r.data)}}else{b?n.texSubImage2D(34069+e,0,0,0,m,g,d[e]):n.texImage2D(34069+e,0,_,m,g,d[e]);for(let t=0;t<w.length;t++){const r=w[t];b?n.texSubImage2D(34069+e,t+1,0,0,m,g,r.image[e]):n.texImage2D(34069+e,t+1,_,m,g,r.image[e])}}}O(i,f)&&S(34067),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(s,t,i):n.bindTexture(34067,s.__webglTexture,33984+i)},this.rebindTextures=function j(e,t,n){const i=r.get(e);void 0!==t&&D(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&B(e)},this.setupRenderTarget=function X(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=y(t)||a;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===G(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.encoding),a=o.convert(i.type),l=T(i.internalFormat,s,a,i.encoding,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),N(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),$(34067,l,p);for(let e=0;e<6;e++)D(c.__webglFramebuffer[e],t,l,36064,34069+e);O(l,p)&&S(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=r.get(o);n.bindTexture(3553,s.__webglTexture),$(3553,o,p),D(c.__webglFramebuffer,t,o,36064+i,3553),O(o,p)&&S(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),$(e,l,p),D(c.__webglFramebuffer,t,l,36064,e),O(l,p)&&S(e),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function Y(e){const t=y(e)||a,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,s=i.length;o<s;o++){const s=i[o];if(O(s,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(s).__webglTexture;n.bindTexture(t,i),S(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function Z(t){if(a&&t.samples>0&&!1===G(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,s=t.height;let a=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=D,this.useMultisampledRTT=G}function WebGLUtils(e,t,n){const r=n.isWebGL2;return{convert:function i(n,o=null){let s;if(n===UnsignedByteType)return 5121;if(n===UnsignedShort4444Type)return 32819;if(n===UnsignedShort5551Type)return 32820;if(n===ByteType)return 5120;if(n===ShortType)return 5122;if(n===UnsignedShortType)return 5123;if(n===IntType)return 5124;if(n===UnsignedIntType)return 5125;if(n===FloatType)return 5126;if(n===HalfFloatType)return r?5131:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(n===AlphaFormat)return 6406;if(n===RGBAFormat)return 6408;if(n===LuminanceFormat)return 6409;if(n===LuminanceAlphaFormat)return 6410;if(n===DepthFormat)return 6402;if(n===DepthStencilFormat)return 34041;if(n===_SRGBAFormat)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===RedFormat)return 6403;if(n===RedIntegerFormat)return 36244;if(n===RGFormat)return 33319;if(n===RGIntegerFormat)return 33320;if(n===RGBAIntegerFormat)return 36249;if(n===RGB_S3TC_DXT1_Format||n===RGBA_S3TC_DXT1_Format||n===RGBA_S3TC_DXT3_Format||n===RGBA_S3TC_DXT5_Format)if(o===sRGBEncoding){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===RGB_S3TC_DXT1_Format)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===RGB_S3TC_DXT1_Format)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===RGB_PVRTC_4BPPV1_Format||n===RGB_PVRTC_2BPPV1_Format||n===RGBA_PVRTC_4BPPV1_Format||n===RGBA_PVRTC_2BPPV1_Format){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===RGB_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===RGB_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===RGBA_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===RGBA_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===RGB_ETC1_Format)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===RGB_ETC2_Format||n===RGBA_ETC2_EAC_Format){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===RGB_ETC2_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===RGBA_ETC2_EAC_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===RGBA_ASTC_4x4_Format||n===RGBA_ASTC_5x4_Format||n===RGBA_ASTC_5x5_Format||n===RGBA_ASTC_6x5_Format||n===RGBA_ASTC_6x6_Format||n===RGBA_ASTC_8x5_Format||n===RGBA_ASTC_8x6_Format||n===RGBA_ASTC_8x8_Format||n===RGBA_ASTC_10x5_Format||n===RGBA_ASTC_10x6_Format||n===RGBA_ASTC_10x8_Format||n===RGBA_ASTC_10x10_Format||n===RGBA_ASTC_12x10_Format||n===RGBA_ASTC_12x12_Format){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===RGBA_ASTC_4x4_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===RGBA_ASTC_5x4_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===RGBA_ASTC_5x5_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===RGBA_ASTC_6x5_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===RGBA_ASTC_6x6_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===RGBA_ASTC_8x5_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===RGBA_ASTC_8x6_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===RGBA_ASTC_8x8_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===RGBA_ASTC_10x5_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===RGBA_ASTC_10x6_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===RGBA_ASTC_10x8_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===RGBA_ASTC_10x10_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===RGBA_ASTC_12x10_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===RGBA_ASTC_12x12_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===RGBA_BPTC_Format){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===RGBA_BPTC_Format)return o===sRGBEncoding?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===RED_RGTC1_Format||n===SIGNED_RED_RGTC1_Format||n===RED_GREEN_RGTC2_Format||n===SIGNED_RED_GREEN_RGTC2_Format){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===RGBA_BPTC_Format)return s.COMPRESSED_RED_RGTC1_EXT;if(n===SIGNED_RED_RGTC1_Format)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===RED_GREEN_RGTC2_Format)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===SIGNED_RED_GREEN_RGTC2_Format)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===UnsignedInt248Type?r?34042:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),r=this._getHandJoint(l,o);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Group;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class DepthTexture extends Texture{constructor(e,t,n,r,i,o,s,a,l,c){if((c=void 0!==c?c:DepthFormat)!==DepthFormat&&c!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===DepthFormat&&(n=UnsignedIntType),void 0===n&&c===DepthStencilFormat&&(n=UnsignedInt248Type),super(null,r,i,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:NearestFilter,this.minFilter=void 0!==a?a:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(e,t){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const _=[],b=[],v=new Set,y=new Map,O=new PerspectiveCamera;O.layers.enable(1),O.viewport=new Vector4;const S=new PerspectiveCamera;S.layers.enable(2),S.viewport=new Vector4;const T=[O,S],x=new ArrayCamera;x.layers.enable(1),x.layers.enable(2);let E=null,w=null;function C(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const n=_[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function A(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",A),r.removeEventListener("inputsourceschange",k);for(let e=0;e<_.length;e++){const t=b[e];null!==t&&(b[e]=null,_[e].disconnect(t))}E=null,w=null,e.setRenderTarget(m),d=null,h=null,u=null,r=null,g=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=b.indexOf(n);r>=0&&(b[r]=null,_[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=b.indexOf(n);if(-1===r){for(let e=0;e<_.length;e++){if(e>=b.length){b.push(n),r=e;break}if(null===b[e]){b[e]=n,r=e;break}}if(-1===r)break}const i=_[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getGripSpace()},this.getHand=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",A),r.addEventListener("inputsourceschange",k),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),g=new WebGLRenderTarget(d.framebufferWidth,d.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,o=null,s=null;f.depth&&(s=f.stencil?35056:33190,n=f.stencil?DepthStencilFormat:DepthFormat,o=f.stencil?UnsignedInt248Type:UnsignedIntType);const a={colorFormat:32856,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(a),r.updateRenderState({layers:[h]}),g=new WebGLRenderTarget(h.textureWidth,h.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const R=new Vector3,I=new Vector3;function M(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;x.near=S.near=O.near=e.near,x.far=S.far=O.far=e.far,E===x.near&&w===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),E=x.near,w=x.far);const t=e.parent,n=x.cameras;M(x,t);for(let r=0;r<n.length;r++)M(n[r],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.matrix.copy(x.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(!0);2===n.length?function o(e,t,n){R.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);const r=R.distanceTo(I),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,_=a+f,b=d-m,v=p+(r-m),y=l*a/_*g,O=c*a/_*g;e.projectionMatrix.makePerspective(b,v,y,O,g,_)}(x,O,S):x.projectionMatrix.copy(O.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(e){a=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return v};let $=null;const P=new WebGLAnimation;P.setAnimationLoop((function L(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(h,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=T[r];void 0===s&&(s=new PerspectiveCamera,s.layers.enable(r),s.viewport=new Vector4,T[r]=s),s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&x.matrix.copy(s.matrix),!0===n&&x.cameras.push(s)}}for(let e=0;e<_.length;e++){const t=b[e],n=_[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}if($&&$(t,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let e=null;for(const t of v)r.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)v.delete(t),y.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const t of r.detectedPlanes)if(v.has(t)){const e=y.get(t);t.lastChangedTime>e&&(y.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else v.add(t),y.set(t,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(e){$=e},this.dispose=function(){}}}function WebGLMaterials(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===BackSide&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===BackSide&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let o,s;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?s=r.aoMap:r.lightMap&&(s=r.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function r(t,n){n.color.getRGB(t.fogColor.value,getUnlitUniformColorSpace(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function i(e,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function l(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function c(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function u(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);const r=t.get(n).envMap;r&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function h(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===BackSide&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function d(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function p(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(!function f(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function m(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function g(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,o,s):r.isSpriteMaterial?function _(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(e,t,n,r){let i={},o={},s=[];const a=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function h(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function d(n,h){let d=i[n.id];void 0===d&&(!function p(e){const t=e.uniforms;let n=0;const r=16;let i=0;for(let o=0,s=t.length;o<s;o++){const e=t[o],s={boundary:0,storage:0},a=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=a.length;t<n;t++){const e=c(a[t]);s.boundary+=e.boundary,s.storage+=e.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,o>0){i=n%r;0!==i&&r-i-s.boundary<0&&(n+=r-i,e.__offset=n)}n+=s.storage}i=n%r,i>0&&(n+=r-i);return e.__size=n,e.__cache={},this}(n),d=function f(t){const n=function r(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),o=t.__size,l=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,o,l),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),i[n.id]=d,n.addEventListener("dispose",u));const m=h.program;r.updateUBOMapping(n,m);const g=t.render.frame;o[n.id]!==g&&(!function _(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(35345,n);for(let i=0,s=r.length;i<s;i++){const t=r[i];if(!0===l(t,i,o)){const n=t.__offset,r=Array.isArray(t.value)?t.value:[t.value];let i=0;for(let o=0;o<r.length;o++){const s=r[o],a=c(s);"number"==typeof s?(t.__data[0]=s,e.bufferSubData(35345,n+i,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,n,t.__data)}}e.bindBuffer(35345,null)}(n),o[n.id]=g)},dispose:function p(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},o={}}}}function createCanvasElement(){const e=createElementNS$1("canvas");return e.style.display="block",e}function WebGLRenderer(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:createCanvasElement(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const m=this;let g=!1,_=0,b=0,v=null,y=-1,O=null;const S=new Vector4,T=new Vector4;let x=null,E=t.width,w=t.height,C=1,A=null,k=null;const R=new Vector4(0,0,E,w),I=new Vector4(0,0,E,w);let M=!1;const $=new Frustum;let P=!1,L=!1,D=null;const N=new Matrix4,B=new Vector3,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===v?C:1}let U,V,W,H,Q,z,j,X,Y,Z,q,K,J,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he=n;function de(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${REVISION}`),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",_e,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=de(t,e),null===he)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Re){throw console.error("THREE.WebGLRenderer: "+Re.message),Re}function pe(){U=new WebGLExtensions(he),V=new WebGLCapabilities(he,U,e),U.init(V),le=new WebGLUtils(he,U,V),W=new WebGLState(he,U,V),H=new WebGLInfo,Q=new WebGLProperties,z=new WebGLTextures(he,U,W,Q,V,le,H),j=new WebGLCubeMaps(m),X=new WebGLCubeUVMaps(m),Y=new WebGLAttributes(he,V),ce=new WebGLBindingStates(he,U,Y,V),Z=new WebGLGeometries(he,Y,H,ce),q=new WebGLObjects(he,Z,Y,H),oe=new WebGLMorphtargets(he,V,z),ne=new WebGLClipping(Q),K=new WebGLPrograms(m,j,X,U,V,ce,ne),J=new WebGLMaterials(m,Q),ee=new WebGLRenderLists,te=new WebGLRenderStates(U,V),ie=new WebGLBackground(m,j,X,W,q,u,s),re=new WebGLShadowMap(m,q,V),ue=new WebGLUniformsGroups(he,H,V,W),se=new WebGLBufferRenderer(he,U,H,V),ae=new WebGLIndexedBufferRenderer(he,U,H,V),H.programs=K.programs,m.capabilities=V,m.extensions=U,m.properties=Q,m.renderLists=ee,m.shadowMap=re,m.state=W,m.info=H}pe();const fe=new WebXRManager(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=H.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;pe(),H.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function _e(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function be(e){const t=e.target;t.removeEventListener("dispose",be),function n(e){(function t(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){K.releaseProgram(e)})),e.isShaderMaterial&&K.releaseShaderCache(e))})(e),Q.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=U.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=U.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(E,w,!1))},this.getSize=function(e){return e.set(E,w)},this.setSize=function(e,n,r=!0){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,w=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*C,w*C).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,w=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),W.viewport(S.copy(R).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),W.scissor(T.copy(I).multiplyScalar(C).floor())},this.getScissorTest=function(){return M},this.setScissorTest=function(e){W.setScissorTest(M=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),ee.dispose(),te.dispose(),Q.dispose(),j.dispose(),X.dispose(),q.dispose(),ce.dispose(),ue.dispose(),K.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",ye),fe.removeEventListener("sessionend",Oe),D&&(D.dispose(),D=null),Se.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=F);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=function l(e,t,n,r,i){!0!==t.isScene&&(t=F);z.resetTextureUnits();const o=t.fog,s=r.isMeshStandardMaterial?t.environment:null,a=null===v?m.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:LinearEncoding,l=(r.isMeshStandardMaterial?X:j).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:NoToneMapping,_=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,b=void 0!==_?_.length:0,S=Q.get(r),T=d.state.lights;if(!0===P&&(!0===L||e!==O)){const t=e===O&&r.id===y;ne.setState(r,e,t)}let x=!1;r.version===S.__version?S.needsLights&&S.lightsStateVersion!==T.state.version||S.outputEncoding!==a||i.isInstancedMesh&&!1===S.instancing?x=!0:i.isInstancedMesh||!0!==S.instancing?i.isSkinnedMesh&&!1===S.skinning?x=!0:i.isSkinnedMesh||!0!==S.skinning?S.envMap!==l||!0===r.fog&&S.fog!==o?x=!0:void 0===S.numClippingPlanes||S.numClippingPlanes===ne.numPlanes&&S.numIntersection===ne.numIntersection?(S.vertexAlphas!==c||S.vertexTangents!==u||S.morphTargets!==h||S.morphNormals!==p||S.morphColors!==f||S.toneMapping!==g||!0===V.isWebGL2&&S.morphTargetsCount!==b)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,S.__version=r.version);let E=S.currentProgram;!0===x&&(E=Ce(r,t,i));let A=!1,k=!1,R=!1;const I=E.getUniforms(),M=S.uniforms;W.useProgram(E.program)&&(A=!0,k=!0,R=!0);r.id!==y&&(y=r.id,k=!0);if(A||O!==e){if(I.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&I.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),O!==e&&(O=e,k=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=I.map.cameraPosition;void 0!==t&&t.setValue(he,B.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&I.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){I.setOptional(he,i,"bindMatrix"),I.setOptional(he,i,"bindMatrixInverse");const e=i.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),I.setValue(he,"boneTexture",e.boneTexture,z),I.setValue(he,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $=n.morphAttributes;(void 0!==$.position||void 0!==$.normal||void 0!==$.color&&!0===V.isWebGL2)&&oe.update(i,n,E);(k||S.receiveShadow!==i.receiveShadow)&&(S.receiveShadow=i.receiveShadow,I.setValue(he,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(M.envMap.value=l,M.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(I.setValue(he,"toneMappingExposure",m.toneMappingExposure),S.needsLights&&function N(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(M,R),o&&!0===r.fog&&J.refreshFogUniforms(M,o),J.refreshMaterialUniforms(M,r,C,w,D),WebGLUniforms.upload(he,S.uniformsList,M,z));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(WebGLUniforms.upload(he,S.uniformsList,M,z),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&I.setValue(he,"center",i.center);if(I.setValue(he,"modelViewMatrix",i.modelViewMatrix),I.setValue(he,"normalMatrix",i.normalMatrix),I.setValue(he,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(V.isWebGL2){const n=e[t];ue.update(n,E),ue.bind(n,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,n,r,i);W.setMaterial(r,s);let c=n.index,u=1;!0===r.wireframe&&(c=Z.getWireframeAttribute(n),u=2);const h=n.drawRange,p=n.attributes.position;let f=h.start*u,g=(h.start+h.count)*u;null!==o&&(f=Math.max(f,o.start*u),g=Math.min(g,(o.start+o.count)*u)),null!==c?(f=Math.max(f,0),g=Math.min(g,c.count)):null!=p&&(f=Math.max(f,0),g=Math.min(g,p.count));const _=g-f;if(_<0||_===1/0)return;let b;ce.setup(i,r,a,n,c);let S=se;if(null!==c&&(b=Y.get(c),S=ae,S.setIndex(b)),i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*G()),S.setMode(1)):S.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),W.setLineWidth(e*G()),i.isLineSegments?S.setMode(1):i.isLineLoop?S.setMode(2):S.setMode(3)}else i.isPoints?S.setMode(0):i.isSprite&&S.setMode(4);if(i.isInstancedMesh)S.renderInstances(f,_,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);S.renderInstances(f,_,t)}else S.render(f,_)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===DoubleSide&&!1===e.forceSinglePass?(e.side=BackSide,e.needsUpdate=!0,Ce(e,t,n),e.side=FrontSide,e.needsUpdate=!0,Ce(e,t,n),e.side=DoubleSide):Ce(e,t,n)}d=te.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.useLegacyLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),f.pop(),d=null};let ve=null;function ye(){Se.stop()}function Oe(){Se.start()}const Se=new WebGLAnimation;function Te(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||$.intersectsSprite(e)){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=q.update(e),i=e.material;i.visible&&h.push(e,t,i,n,B.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||$.intersectsObject(e))){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&h.push(e,t,a,n,B.z,s)}}else i.visible&&h.push(e,t,i,n,B.z,null)}const i=e.children;for(let o=0,s=i.length;o<s;o++)Te(i[o],t,n,r)}function xe(e,t,n,r){const i=e.opaque,s=e.transmissive,a=e.transparent;d.setupLightsView(n),!0===P&&ne.setGlobalState(m.clippingPlanes,n),s.length>0&&function l(e,t,n){const r=V.isWebGL2;null===D&&(D=new WebGLRenderTarget(1024,1024,{generateMipmaps:!0,type:U.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:r&&!0===o?4:0}));const i=m.getRenderTarget();m.setRenderTarget(D),m.clear();const s=m.toneMapping;m.toneMapping=NoToneMapping,Ee(e,t,n),m.toneMapping=s,z.updateMultisampleRenderTarget(D),z.updateRenderTargetMipmap(D),m.setRenderTarget(i)}(i,t,n),r&&W.viewport(S.copy(r)),i.length>0&&Ee(i,t,n),s.length>0&&Ee(s,t,n),a.length>0&&Ee(a,t,n),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Ee(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&we(s,t,n,a,l,c)}}function we(e,t,n,r,i,o){e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,o),!0===i.transparent&&i.side===DoubleSide&&!1===i.forceSinglePass?(i.side=BackSide,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=FrontSide,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=DoubleSide):m.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(m,t,n,r,i,o)}function Ce(e,t,n){!0!==t.isScene&&(t=F);const r=Q.get(e),i=d.state.lights,o=d.state.shadowsArray,s=i.state.version,a=K.getParameters(e,i.state,o,t,n),l=K.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?X:j).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",be),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Ae(e,a),u}else a.uniforms=K.getUniforms(e),e.onBuild(n,a,m),e.onBeforeCompile(a,m),u=K.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Ae(e,a),r.needsLights=function p(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=u.getUniforms(),g=WebGLUniforms.seqWithValue(f.seq,h);return r.currentProgram=u,r.uniformsList=g,u}function Ae(e,t){const n=Q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Se.setAnimationLoop((function ke(e){ve&&ve(e)})),"undefined"!=typeof self&&Se.setContext(self),this.setAnimationLoop=function(e){ve=e,fe.setAnimationLoop(e),null===e?Se.stop():Se.start()},fe.addEventListener("sessionstart",ye),fe.addEventListener("sessionend",Oe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,v),d=te.get(e,f.length),d.init(),f.push(d),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),$.setFromProjectionMatrix(N),L=this.localClippingEnabled,P=ne.init(this.clippingPlanes,L),h=ee.get(e,p.length),h.init(),p.push(h),Te(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,k),!0===P&&ne.beginShadows();const n=d.state.shadowsArray;if(re.render(n,e,t),!0===P&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e),d.setupLights(m.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];xe(h,e,r,r.viewport)}}else xe(h,e,t);null!==v&&(z.updateMultisampleRenderTarget(v),z.updateRenderTargetMipmap(v)),!0===e.isScene&&e.onAfterRender(m,e,t),ce.resetDefaultState(),y=-1,O=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;const r=Q.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===U.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){v=e,_=t,b=n;let r=!0,i=null,o=!1,s=!1;if(e){const n=Q.get(e);void 0!==n.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?z.setupRenderTarget(e):n.__hasExternalTextures&&z.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);const a=e.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);const l=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=V.isWebGL2&&e.samples>0&&!1===z.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:l,S.copy(e.viewport),T.copy(e.scissor),x=e.scissorTest}else S.copy(R).multiplyScalar(C).floor(),T.copy(I).multiplyScalar(C).floor(),x=M;if(W.bindFramebuffer(36160,i)&&V.drawBuffers&&r&&W.drawBuffers(e,i),W.viewport(S),W.scissor(T),W.setScissorTest(x),o){const r=Q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(s){const r=Q.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}y=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){W.bindFramebuffer(36160,a);try{const s=e.texture,a=s.format,l=s.type;if(a!==RGBAFormat&&le.convert(a)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===HalfFloatType&&(U.has("EXT_color_buffer_half_float")||V.isWebGL2&&U.has("EXT_color_buffer_float"));if(!(l===UnsignedByteType||le.convert(l)===he.getParameter(35738)||l===FloatType&&(V.isWebGL2||U.has("OES_texture_float")||U.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,le.convert(a),le.convert(l),o)}finally{const e=null!==v?Q.get(v).__webglFramebuffer:null;W.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);z.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,s=le.convert(n.format),a=le.convert(n.type);z.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,o,s,a,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,s,a,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);let u;if(r.isData3DTexture)z.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");z.setTexture2DArray(r,0),u=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),p=he.getParameter(3316),f=he.getParameter(3315),g=he.getParameter(32877),_=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,_.width),he.pixelStorei(32878,_.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,_.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,_.data)):he.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,_),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,p),he.pixelStorei(3315,f),he.pixelStorei(32877,g),0===i&&r.generateMipmaps&&he.generateMipmap(u),W.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?z.setTextureCube(e,0):e.isData3DTexture?z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?z.setTexture2DArray(e,0):z.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){_=0,b=0,v=null,W.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(WebGLRenderer.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}});class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(e),this.density=t}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Color(e),this.near=t,this.far=n}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class InterleavedBuffer{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID$1()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID$1()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.applyMatrix4(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.applyNormalMatrix(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.transformDirection(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=denormalize(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=denormalize(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=denormalize(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=denormalize(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),n=normalize(n,this.array),r=normalize(r,this.array),i=normalize(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new BufferAttribute(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===_geometry){_geometry=new BufferGeometry;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new InterleavedBuffer(e,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(t,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(t,2,3,!1))}this.geometry=_geometry,this.material=void 0!==e?e:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_worldScale.multiplyScalar(-_mvPosition.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,o,_worldScale,r,i),transformVertex(_vB.set(.5,-.5,0),_mvPosition,o,_worldScale,r,i),transformVertex(_vC.set(.5,.5,0),_mvPosition,o,_worldScale,r,i),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let s=e.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(null===s&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,o,_worldScale,r,i),_uvB.set(0,1),s=e.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),null===s))return;const a=e.ray.origin.distanceTo(_intersectPoint);a<e.near||a>e.far||t.push({distance:a,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function transformVertex(e,t,n,r,i,o){_alignedPosition.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(_rotatedPosition.x=o*_alignedPosition.x-i*_alignedPosition.y,_rotatedPosition.y=i*_alignedPosition.x+o*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),e.copy(t),e.x+=_rotatedPosition.x,e.y+=_rotatedPosition.y,e.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_v1$2.setFromMatrixPosition(e.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const n=_v1$2.distanceTo(_v2$1)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vector4,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;_skinIndex.fromBufferAttribute(r.attributes.skinIndex,e),_skinWeight.fromBufferAttribute(r.attributes.skinWeight,e),_basePosition.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=_skinWeight.getComponent(i);if(0!==e){const r=_skinIndex.getComponent(i);_matrix.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(e=null,t=1,n=1,r,i,o,s,a,l=NearestFilter,c=NearestFilter,u,h){super(null,o,s,a,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(e=[],t=[]){this.uuid=generateUUID$1(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Matrix4;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const r=e[i]?e[i].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(r,t[i]),_offsetMatrix.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=ceilPowerOfTwo(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new DataTexture(t,e,e,RGBAFormat,FloatType);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Bone),this.bones.push(i),this.boneInverses.push((new Matrix4).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class InstancedBufferAttribute extends BufferAttribute{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_identity=new Matrix4,_mesh=new Mesh;class InstancedMesh extends Mesh{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let r=0;r<n;r++)this.setMatrixAt(r,_identity)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,void 0!==_mesh.material)for(let i=0;i<r;i++){this.getMatrixAt(i,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(n,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(e,_instanceIntersects);for(let e=0,n=_instanceIntersects.length;e<n;e++){const n=_instanceIntersects[e];n.instanceId=i,n.object=this,t.push(n)}_instanceIntersects.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere$1;let Line$2=class extends Object3D{constructor(e=new BufferGeometry,t=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)_start$1.fromBufferAttribute(t,e-1),_end$1.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=_start$1.distanceTo(_end$1);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$1.copy(n.boundingSphere),_sphere$1.applyMatrix4(r),_sphere$1.radius+=i,!1===e.ray.intersectsSphere(_sphere$1))return;_inverseMatrix$1.copy(r).invert(),_ray$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new Vector3,c=new Vector3,u=new Vector3,h=new Vector3,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(_ray$1.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(h);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=d){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(_ray$1.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}};const _start$2=new Vector3,_end$2=new Vector3;class LineSegments extends Line$2{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)_start$2.fromBufferAttribute(t,e),_end$2.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+_start$2.distanceTo(_end$2);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _inverseMatrix=new Matrix4,_ray$3=new Ray,_sphere$4=new Sphere$1,_position$2=new Vector3;class Points extends Object3D{constructor(e=new BufferGeometry,t=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$4.copy(n.boundingSphere),_sphere$4.applyMatrix4(r),_sphere$4.radius+=i,!1===e.ray.intersectsSphere(_sphere$4))return;_inverseMatrix.copy(r).invert(),_ray$3.copy(e.ray).applyMatrix4(_inverseMatrix);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);_position$2.fromBufferAttribute(c,i),testPoint(_position$2,i,a,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++)_position$2.fromBufferAttribute(c,n),testPoint(_position$2,n,a,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function testPoint(e,t,n,r,i,o,s){const a=_ray$3.distanceSqToPoint(e);if(a<n){const n=new Vector3;_ray$3.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:s})}}class VideoTexture extends Texture{constructor(e,t,n,r,i,o,s,a,l){super(e,t,n,r,i,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:LinearFilter,this.magFilter=void 0!==i?i:LinearFilter,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(e,t,n,r,i,o,s,a,l,c,u,h){super(null,o,s,a,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(e,t,n,r,i,o){super(e,t,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor(e,t,n,r,i,o,s,a,l){super(e,t,n,r,i,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let s,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=t||(o.isVector2?new Vector2:new Vector3);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Vector3,r=[],i=[],o=[],s=new Vector3,a=new Matrix4;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new Vector3)}i[0]=new Vector3,o[0]=new Vector3;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(clamp$1(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(a.makeRotationAxis(s,e))}o[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(clamp$1(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t){const n=t||new Vector2,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let e=0,t=0,n=0,r=0;function i(i,o,s,a){e=i,t=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+a)+(r-n)/a;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Vector3){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(tmp.subVectors(r[0],r[1]).add(r[0]),s=tmp);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(tmp.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=tmp),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),px.initNonuniformCatmullRom(s.x,u.x,h.x,a.x,t,n,r),py.initNonuniformCatmullRom(s.y,u.y,h.y,a.y,t,n,r),pz.initNonuniformCatmullRom(s.z,u.z,h.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(px.initCatmullRom(s.x,u.x,h.x,a.x,this.tension),py.initCatmullRom(s.y,u.y,h.y,a.y,this.tension),pz.initCatmullRom(s.z,u.z,h.z,a.z,this.tension));return n.set(px.calc(c),py.calc(c),pz.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vector3).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CatmullRom(e,t,n,r,i){const o=.5*(r-t),s=.5*(i-n),a=e*e;return(2*n-2*r+o+s)*(e*a)+(-3*n+3*r-2*o-s)*a+o*e+n}function QuadraticBezierP0(e,t){const n=1-e;return n*n*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,n,r){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,n)+QuadraticBezierP2(e,r)}function CubicBezierP0(e,t){const n=1-e;return n*n*n*t}function CubicBezierP1(e,t){const n=1-e;return 3*n*n*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,n,r,i){return CubicBezierP0(e,t)+CubicBezierP1(e,n)+CubicBezierP2(e,r)+CubicBezierP3(e,i)}class CubicBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,n=new Vector2,r=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Vector2){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(CubicBezier(e,r.x,i.x,o.x,s.x),CubicBezier(e,r.y,i.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CubicBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,n=new Vector3,r=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Vector3){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(CubicBezier(e,r.x,i.x,o.x,s.x),CubicBezier(e,r.y,i.y,o.y,s.y),CubicBezier(e,r.z,i.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class LineCurve extends Curve{constructor(e=new Vector2,t=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Vector2){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Vector2){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LineCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Vector3){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Vector3){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,n=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Vector2){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(QuadraticBezier(e,r.x,i.x,o.x),QuadraticBezier(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,n=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Vector3){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(QuadraticBezier(e,r.x,i.x,o.x),QuadraticBezier(e,r.y,i.y,o.y),QuadraticBezier(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SplineCurve extends Curve{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Vector2){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(CatmullRom(s,a.x,l.x,c.x,u.x),CatmullRom(s,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vector2).fromArray(n))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Curves[n.type]).fromJSON(n))}return this}}class Path extends CurvePath{constructor(e){super(),this.type="Path",this.currentPoint=new Vector2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const s=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,r),new Vector2(i,o));return this.curves.push(s),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new SplineCurve(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,s,a),this}absellipse(e,t,n,r,i,o,s,a){const l=new EllipseCurve(e,t,n,r,i,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(e=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=clamp$1(r,0,2*Math.PI);const i=[],o=[],s=[],a=[],l=[],c=1/t,u=new Vector3,h=new Vector2,d=new Vector3,p=new Vector3,f=new Vector3;let m=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:m=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case e.length-1:a.push(f.x,f.y,f.z);break;default:m=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),a.push(d.x,d.y,d.z),f.copy(p)}for(let _=0;_<=t;_++){const i=n+_*c*r,d=Math.sin(i),p=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*p,o.push(u.x,u.y,u.z),h.x=_/t,h.y=n/(e.length-1),s.push(h.x,h.y);const r=a[3*n+0]*d,i=a[3*n+1],c=a[3*n+0]*p;l.push(r,i,c)}}for(let _=0;_<t;_++)for(let t=0;t<e.length-1;t++){const n=t+_*e.length,r=n,o=n+e.length,s=n+e.length+1,a=n+1;i.push(r,o,a),i.push(s,a,o)}this.setIndex(i),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("uv",new Float32BufferAttribute(s,2)),this.setAttribute("normal",new Float32BufferAttribute(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(e=1,t=1,n=4,r=8){const i=new Path;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new CapsuleGeometry(e.radius,e.length,e.capSegments,e.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],s=[],a=[],l=new Vector3,c=new Vector2;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),o.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,a.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(s,3)),this.setAttribute("uv",new Float32BufferAttribute(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,r=32,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function _(n){const i=p,o=new Vector2,f=new Vector3;let _=0;const b=!0===n?e:t,v=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*v,0),h.push(0,v,0),d.push(.5,.5),p++;const y=p;for(let e=0;e<=r;e++){const t=e/r*a+s,n=Math.cos(t),i=Math.sin(t);f.x=b*i,f.y=m*v,f.z=b*n,u.push(f.x,f.y,f.z),h.push(0,v,0),o.x=.5*n+.5,o.y=.5*i*v+.5,d.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=y+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),_+=3}l.addGroup(g,_,!0===n?1:2),g+=_}!function b(){const o=new Vector3,_=new Vector3;let b=0;const v=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,b=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+s,l=Math.sin(i),f=Math.cos(i);_.x=b*l,_.y=-g*n+m,_.z=b*f,u.push(_.x,_.y,_.z),o.set(l,v,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],o=f[t][e+1];c.push(n,r,o),c.push(r,i,o),b+=6}l.addGroup(g,b,0),g+=b}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(h,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(e=1,t=1,n=32,r=1,i=!1,o=0,s=2*Math.PI){super(0,e,t,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function s(e,t,n,r){const i=r+1,o=[];for(let s=0;s<=i;s++){o[s]=[];const r=e.clone().lerp(n,s/i),a=t.clone().lerp(n,s/i),l=i-s;for(let e=0;e<=l;e++)o[s][e]=0===e&&s===i?r:r.clone().lerp(a,e/l)}for(let s=0;s<i;s++)for(let e=0;e<2*(i-s)-1;e++){const t=Math.floor(e/2);e%2==0?(a(o[s][t+1]),a(o[s+1][t]),a(o[s][t])):(a(o[s][t+1]),a(o[s+1][t+1]),a(o[s+1][t]))}}function a(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function h(e){const n=new Vector3,r=new Vector3,i=new Vector3;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),s(n,r,i,e)}(r),function d(e){const t=new Vector3;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function p(){const e=new Vector3;for(let s=0;s<i.length;s+=3){e.x=i[s+0],e.y=i[s+1],e.z=i[s+2];const n=u(e)/2/Math.PI+.5,r=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(n,1-r)}var t;(function n(){const e=new Vector3,t=new Vector3,n=new Vector3,r=new Vector3,s=new Vector2,a=new Vector2,l=new Vector2;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(o[d+0],o[d+1]),a.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(s,d+0,e,p),c(a,d+2,t,p),c(l,d+4,n,p)}})(),function r(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(i,3)),this.setAttribute("normal",new Float32BufferAttribute(i.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DodecahedronGeometry(e.radius,e.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(DEG2RAD*t),o=e.getIndex(),s=e.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<a;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:a}=_triangle;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),_triangle.getNormal(_normal),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=_triangle[c[e]],s=_triangle[c[t]],a=`${n}_${r}`,p=`${r}_${n}`;p in h&&h[p]?(_normal.dot(h[p].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(s.x,s.y,s.z)),h[p]=null):a in h||(h[a]={index0:l[e],index1:l[t],normal:_normal.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];_v0.fromBufferAttribute(s,t),_v1$1.fromBufferAttribute(s,n),d.push(_v0.x,_v0.y,_v0.z),d.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Shape extends Path{constructor(e){super(e),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Path).fromJSON(n))}return this}}const Earcut={triangulate:function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=linkedList(e,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,h,d,p;if(r&&(o=eliminateHoles(e,t,o,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-a,u-l),p=0!==p?32767/p:0}return earcutLinked(o,s,n,a,l,p,0),s}};function linkedList(e,t,n,r,i){let o,s;if(i===signedArea(e,t,n,r)>0)for(o=t;o<n;o+=r)s=insertNode(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=insertNode(o,e[o],e[o+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function earcutLinked(e,t,n,r,i,o,s){if(!e)return;!s&&o&&indexCurve(e,r,i,o);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,o?isEarHashed(e,r,i,o):isEar(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),removeNode(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?earcutLinked(e=cureLocalIntersections(filterPoints(e),t,n),t,n,r,i,o,2):2===s&&splitEarcut(e,t,n,r,i,o):earcutLinked(filterPoints(e),t,n,r,i,o,1);break}}function isEar(e){const t=e.prev,n=e,r=e.next;if(area(t,n,r)>=0)return!1;const i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,d=i>o?i>s?i:s:o>s?o:s,p=a>l?a>c?a:c:l>c?l:c;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&pointInTriangle(i,a,o,l,s,c,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function isEarHashed(e,t,n,r){const i=e.prev,o=e,s=e.next;if(area(i,o,s)>=0)return!1;const a=i.x,l=o.x,c=s.x,u=i.y,h=o.y,d=s.y,p=a<l?a<c?a:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=a>l?a>c?a:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,_=zOrder(p,f,t,n,r),b=zOrder(m,g,t,n,r);let v=e.prevZ,y=e.nextZ;for(;v&&v.z>=_&&y&&y.z<=b;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==s&&pointInTriangle(a,u,l,h,c,d,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==s&&pointInTriangle(a,u,l,h,c,d,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;v&&v.z>=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==s&&pointInTriangle(a,u,l,h,c,d,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;y&&y.z<=b;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==s&&pointInTriangle(a,u,l,h,c,d,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function cureLocalIntersections(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!equals(i,o)&&intersects(i,r,r.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),removeNode(r),removeNode(r.next),r=e=o),r=r.next}while(r!==e);return filterPoints(r)}function splitEarcut(e,t,n,r,i,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&isValidDiagonal(s,e)){let a=splitPolygon(s,e);return s=filterPoints(s,s.next),a=filterPoints(a,a.next),earcutLinked(s,t,n,r,i,o,0),void earcutLinked(a,t,n,r,i,o,0)}e=e.next}s=s.next}while(s!==e)}function eliminateHoles(e,t,n,r){const i=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*r,l=o<s-1?t[o+1]*r:e.length,c=linkedList(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(getLeftmost(c));for(i.sort(compareX),o=0;o<i.length;o++)n=eliminateHole(i[o],n);return n}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){const n=findHoleBridge(e,t);if(!n)return t;const r=splitPolygon(n,e);return filterPoints(r,r.next),filterPoints(n,n.next)}function findHoleBridge(e,t){let n,r=t,i=-1/0;const o=e.x,s=e.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const e=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=o&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===o))return n}r=r.next}while(r!==t);if(!n)return null;const a=n,l=n.x,c=n.y;let u,h=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&pointInTriangle(s<c?o:i,s,l,c,s<c?i:o,s,r.x,r.y)&&(u=Math.abs(s-r.y)/(o-r.x),locallyInside(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&sectorContainsSector(n,r)))&&(n=r,h=u)),r=r.next}while(r!==a);return n}function sectorContainsSector(e,t){return area(e.prev,e,t.prev)<0&&area(t.next,e,e.next)<0}function indexCurve(e,t,n,r){let i=e;do{0===i.z&&(i.z=zOrder(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){let t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1);return e}function zOrder(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function pointInTriangle(e,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)&&(area(e.prev,e,t.prev)||area(e,t.prev,t))||equals(e,t)&&area(e.prev,e,e.next)>0&&area(t.prev,t,t.next)>0)}function area(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,n,r){const i=sign(area(e,t,n)),o=sign(area(e,t,r)),s=sign(area(n,r,e)),a=sign(area(n,r,t));return i!==o&&s!==a||(!(0!==i||!onSegment(e,n,t))||(!(0!==o||!onSegment(e,r,t))||(!(0!==s||!onSegment(n,e,r))||!(0!==a||!onSegment(n,t,r)))))}function onSegment(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function sign(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&intersects(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function splitPolygon(e,t){const n=new Node$1(e.i,e.x,e.y),r=new Node$1(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function insertNode(e,t,n,r){const i=new Node$1(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node$1(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,n,r){let i=0;for(let o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}class ShapeUtils{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return ShapeUtils.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];removeDupEndPts(e),addContour(n,e);let o=e.length;t.forEach(removeDupEndPts);for(let a=0;a<t.length;a++)r.push(o),o+=t[a].length,addContour(n,t[a]);const s=Earcut.triangulate(n,r);for(let a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}}function removeDupEndPts(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function addContour(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class ExtrudeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let s=0,a=e.length;s<a;s++){o(e[s])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:WorldUVGenerator;let g,_,b,v,y,O=!1;f&&(g=f.getSpacedPoints(a),O=!0,c=!1,_=f.computeFrenetFrames(a,!1),b=new Vector3,v=new Vector3,y=new Vector3),c||(p=0,u=0,h=0,d=0);const S=e.extractPoints(s);let T=S.shape;const x=S.holes;if(!ShapeUtils.isClockWise(T)){T=T.reverse();for(let e=0,t=x.length;e<t;e++){const t=x[e];ShapeUtils.isClockWise(t)&&(x[e]=t.reverse())}}const E=ShapeUtils.triangulateShape(T,x),w=T;for(let t=0,n=x.length;t<n;t++){const e=x[t];T=T.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const A=T.length,k=E.length;function R(e,t,n){let r,i,o;const s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+a*a,h=s*c-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-a/h,f=t.y+s/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(s*c-a*l);r=p+s*m-e.x,i=f+a*m-e.y;const g=r*r+i*i;if(g<=2)return new Vector2(r,i);o=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(r=-a,i=s,o=Math.sqrt(u)):(r=s,i=a,o=Math.sqrt(u/2))}return new Vector2(r/o,i/o)}const I=[];for(let t=0,n=w.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[t]=R(w[t],w[r],w[i]);const M=[];let $,P=I.concat();for(let t=0,n=x.length;t<n;t++){const e=x[t];$=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),$[t]=R(e[t],e[r],e[i]);M.push($),P=P.concat($)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=w.length;t<i;t++){const e=C(w[t],I[t],r);N(e.x,e.y,-n)}for(let t=0,i=x.length;t<i;t++){const e=x[t];$=M[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],$[t],r);N(i.x,i.y,-n)}}}const L=h+d;for(let t=0;t<A;t++){const e=c?C(T[t],P[t],L):T[t];O?(v.copy(_.normals[0]).multiplyScalar(e.x),b.copy(_.binormals[0]).multiplyScalar(e.y),y.copy(g[0]).add(v).add(b),N(y.x,y.y,y.z)):N(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<A;e++){const n=c?C(T[e],P[e],L):T[e];O?(v.copy(_.normals[t]).multiplyScalar(n.x),b.copy(_.binormals[t]).multiplyScalar(n.y),y.copy(g[t]).add(v).add(b),N(y.x,y.y,y.z)):N(n.x,n.y,l/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=w.length;t<i;t++){const e=C(w[t],I[t],r);N(e.x,e.y,l+n)}for(let t=0,i=x.length;t<i;t++){const e=x[t];$=M[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],$[t],r);O?N(i.x,i.y+g[a-1].y,g[a-1].x+n):N(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=A*e,o=A*(e+1);F(t+r+n,t+i+n,t+i+o,t+r+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function B(e,t,i){G(e),G(t),G(i);const o=r.length/3,s=m.generateTopUV(n,r,o-3,o-2,o-1);U(s[0]),U(s[1]),U(s[2])}function F(e,t,i,o){G(e),G(t),G(o),G(t),G(i),G(o);const s=r.length/3,a=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);U(a[0]),U(a[1]),U(a[3]),U(a[1]),U(a[2]),U(a[3])}function G(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function V(){const e=r.length/3;if(c){let e=0,t=A*e;for(let n=0;n<k;n++){const e=E[n];B(e[2]+t,e[1]+t,e[0]+t)}e=a+2*p,t=A*e;for(let n=0;n<k;n++){const e=E[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<k;e++){const t=E[e];B(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=E[e];B(t[0]+A*a,t[1]+A*a,t[2]+A*a)}}n.addGroup(e,r.length/3-e,0)}(),function W(){const e=r.length/3;let t=0;D(w,t),t+=w.length;for(let n=0,r=x.length;n<r;n++){const e=x[n];D(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Float32BufferAttribute(r,3)),this.setAttribute("uv",new Float32BufferAttribute(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return toJSON$1(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Curves[r.type]).fromJSON(r)),new ExtrudeGeometry(n,e.options)}}const WorldUVGenerator={generateTopUV:function(e,t,n,r,i){const o=t[3*n],s=t[3*n+1],a=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Vector2(o,s),new Vector2(a,l),new Vector2(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const s=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],g=t[3*o+1],_=t[3*o+2];return Math.abs(a-u)<Math.abs(s-c)?[new Vector2(s,1-l),new Vector2(c,1-h),new Vector2(d,1-f),new Vector2(m,1-_)]:[new Vector2(a,1-l),new Vector2(u,1-h),new Vector2(p,1-f),new Vector2(g,1-_)]}};function toJSON$1(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class IcosahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IcosahedronGeometry(e.radius,e.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OctahedronGeometry(e.radius,e.detail)}}class RingGeometry extends BufferGeometry{constructor(e=.5,t=1,n=32,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const s=[],a=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new Vector3,p=new Vector2;for(let f=0;f<=r;f++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<r;f++){const e=f*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,a=r+n+2,l=r+1;s.push(i,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(l,3)),this.setAttribute("uv",new Float32BufferAttribute(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,a,c),s+=a,a=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===ShapeUtils.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===ShapeUtils.isClockWise(e)&&(u[t]=e.reverse())}const h=ShapeUtils.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+s,i=e[1]+s,o=e[2]+s;n.push(r,i,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Float32BufferAttribute(r,3)),this.setAttribute("normal",new Float32BufferAttribute(i,3)),this.setAttribute("uv",new Float32BufferAttribute(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return toJSON(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new ShapeGeometry(n,e.curveSegments)}}function toJSON(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class SphereGeometry extends BufferGeometry{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new Vector3,h=new Vector3,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],_=g/n;let b=0;0==g&&0==o?b=.5/t:g==n&&a==Math.PI&&(b=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(o+_*s),u.y=e*Math.cos(o+_*s),u.z=e*Math.sin(r+a*i)*Math.sin(o+_*s),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(a+b,1-_),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],s=c[g+1][e+1];(0!==g||o>0)&&d.push(t,r,s),(g!==n-1||a<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TetrahedronGeometry(e.radius,e.detail)}}class TorusGeometry extends BufferGeometry{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],a=[],l=[],c=new Vector3,u=new Vector3,h=new Vector3;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const p=o/r*i,f=d/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),a.push(h.x,h.y,h.z),l.push(o/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,s=(r+1)*d+e;o.push(t,n,s),o.push(n,i,s)}this.setIndex(o),this.setAttribute("position",new Float32BufferAttribute(s,3)),this.setAttribute("normal",new Float32BufferAttribute(a,3)),this.setAttribute("uv",new Float32BufferAttribute(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],l=[],c=[],u=new Vector3,h=new Vector3,d=new Vector3,p=new Vector3,f=new Vector3,m=new Vector3,g=new Vector3;for(let b=0;b<=n;++b){const s=b/n*i*Math.PI*2;_(s,i,o,e,d),_(s+.01,i,o,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),s=t*Math.sin(i);u.x=d.x+(o*g.x+s*f.x),u.y=d.y+(o*g.y+s*f.y),u.z=d.z+(o*g.z+s*f.z),a.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(b/n),c.push(e/r)}}for(let b=1;b<=n;b++)for(let e=1;e<=r;e++){const t=(r+1)*(b-1)+(e-1),n=(r+1)*b+(e-1),i=(r+1)*b+e,o=(r+1)*(b-1)+e;s.push(t,n,o),s.push(n,i,o)}function _(e,t,n,r,i){const o=Math.cos(e),s=Math.sin(e),a=n/t*e,l=Math.cos(a);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(l,3)),this.setAttribute("uv",new Float32BufferAttribute(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class TubeGeometry extends BufferGeometry{constructor(e=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new Vector3,a=new Vector3,l=new Vector2;let c=new Vector3;const u=[],h=[],d=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+i*d.x,a.y=o*l.y+i*d.y,a.z=o*l.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}!function m(){for(let r=0;r<t;r++)f(r);f(!1===i?t:0),function e(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function n(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;p.push(n,i,s),p.push(i,o,s)}}()}(),this.setIndex(p),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(h,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new TubeGeometry((new Curves[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WireframeGeometry extends BufferGeometry{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new Vector3,i=new Vector3;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],c=l.start;for(let e=c,a=c+l.count;e<a;e+=3)for(let l=0;l<3;l++){const a=s.getX(e+l),c=s.getX(e+(l+1)%3);r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,c),!0===isUniqueEdge(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let a=0;a<3;a++){const s=3*e+a,l=3*e+(a+1)%3;r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,l),!0===isUniqueEdge(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Float32BufferAttribute(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function isUniqueEdge(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry:BoxGeometry,CapsuleGeometry:CapsuleGeometry,CircleGeometry:CircleGeometry,ConeGeometry:ConeGeometry,CylinderGeometry:CylinderGeometry,DodecahedronGeometry:DodecahedronGeometry,EdgesGeometry:EdgesGeometry,ExtrudeGeometry:ExtrudeGeometry,IcosahedronGeometry:IcosahedronGeometry,LatheGeometry:LatheGeometry,OctahedronGeometry:OctahedronGeometry,PlaneGeometry:PlaneGeometry,PolyhedronGeometry:PolyhedronGeometry,RingGeometry:RingGeometry,ShapeGeometry:ShapeGeometry,SphereGeometry:SphereGeometry,TetrahedronGeometry:TetrahedronGeometry,TorusGeometry:TorusGeometry,TorusKnotGeometry:TorusKnotGeometry,TubeGeometry:TubeGeometry,WireframeGeometry:WireframeGeometry});class ShadowMaterial extends Material{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshToonMaterial extends Material{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MeshNormalMaterial extends Material{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class MeshLambertMaterial extends Material{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshMatcapMaterial extends Material{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function arraySlice(e,t,n){return isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function convertArray(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function getKeyframeOrder(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort((function r(t,n){return e[t]-e[n]})),n}function sortedArray(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,s=0;s!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function flattenJSON(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(t.push(o.time),n.push(s)),o=e[i++]}while(void 0!==o)}function subclip(e,t,n,r,i=30){const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),a=[],c=[];for(let o=0;o<e.times.length;++o){const s=e.times[o]*i;if(!(s<n||s>=r)){a.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==a.length&&(e.times=convertArray(a,e.times.constructor),e.values=convertArray(c,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function makeClipAdditive(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let s=0;s<i;++s){const t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=a,n=l-a;d=arraySlice(t.values,e,n)}else if(o>=t.times[h]){const e=h*l+a,n=e+l-a;d=arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=a,r=l-a;e.evaluate(o),d=arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new Quaternion).fromArray(d).normalize().conjugate().toArray(d)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)Quaternion.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=AdditiveAnimationBlendMode,e}const AnimationUtils={arraySlice:arraySlice,convertArray:convertArray,isTypedArray:isTypedArray,getKeyframeOrder:getKeyframeOrder,sortedArray:sortedArray,flattenJSON:flattenJSON,subclip:subclip,makeClipAdditive:makeClipAdditive};class Interpolant{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:i=e,s=2*t-n;break;case WrapAroundEnding:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:o=e,a=2*n-t;break;case WrapAroundEnding:o=1,a=n+r[1]-r[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,_=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,b=(-1-d)*m+(1.5+d)*f+.5*p,v=d*m-d*f;for(let y=0;y!==s;++y)i[y]=g*o[c+y]+_*o[l+y]+b*o[a+y]+v*o[u+y];return i}}class LinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==s;++h)i[h]=o[l+h]*u+o[a+h]*c;return i}}class DiscreteInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class KeyframeTrack{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=convertArray(t,this.TimeBufferType),this.values=convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:convertArray(e.times,Array),values:convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=arraySlice(n,i,o),this.values=arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==i;s++){const t=n[s];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==r&&isTypedArray(r))for(let s=0,a=r.length;s!==a;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=arraySlice(this.times),t=arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===InterpolateSmooth,i=e.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[o+s]){i=!0;break}}}if(i){if(s!==o){e[o]=e[s];const r=s*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,s=0;s!==n;++s)t[r+s]=t[e+s];++o}return o!==e.length?(this.times=arraySlice(e,0,o),this.values=arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=arraySlice(this.times,0),t=arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)Quaternion.slerpFlat(i,0,o,l-s,o,l,a);return i}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(e,t=-1,n,r=NormalAnimationBlendMode){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(parseKeyframeTrack(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(KeyframeTrack.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let s=0;s<i;s++){let e=[],a=[];e.push((s+i-1)%i,s,(s+1)%i),a.push(0,1,0);const l=getKeyframeOrder(e);e=sortedArray(e,1,l),a=sortedArray(a,1,l),r||0!==e[0]||(e.push(i),a.push(a[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[s].name+"]",e,a).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const t=e[s],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const s in r)o.push(this.CreateFromMorphTargetSequence(s,r[s],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],s=[];flattenJSON(n,o,s,r),0!==o.length&&i.push(new e(t,o,s))}},r=[],i=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new NumberKeyframeTrack(".morphTargetInfluence["+i+"]",t,o))}a=t.length*o}else{const i=".bones["+t[c].name+"]";n(VectorKeyframeTrack,i+".position",e,"pos",r),n(QuaternionKeyframeTrack,i+".quaternion",e,"rot",r),n(VectorKeyframeTrack,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function parseKeyframeTrack(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=getTrackTypeForValueTypeName(e.type);if(void 0===e.times){const t=[],n=[];flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Cache={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class LoadingManager{constructor(e,t,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==r.onStart&&r.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(e){this.manager=void 0!==e?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const loading={};class HttpError extends Error{constructor(e,t){super(e),this.response=t}}class FileLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Cache.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==loading[e])return void loading[e].push({onLoad:t,onProgress:n,onError:r});loading[e]=[],loading[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=loading[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new HttpError(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Cache.add(e,t);const n=loading[e];delete loading[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=loading[e];if(void 0===n)throw this.manager.itemError(e),t;delete loading[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class AnimationLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=AnimationClip.parse(e[n]);t.push(r)}return t}}class CompressedTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],s=new CompressedTexture,a=new FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=LinearFilter),s.image=o,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else a.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=LinearFilter),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}}class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const s=createElementNS$1("img");function a(){c(),Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class CubeTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(e[n],(function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)a(l);return i}}class DataTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new DataTexture,s=new FileLoader(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ClampToEdgeWrapping,o.wrapT=void 0!==n.wrapT?n.wrapT:ClampToEdgeWrapping,o.magFilter=void 0!==n.magFilter?n.magFilter:LinearFilter,o.minFilter=void 0!==n.minFilter?n.minFilter:LinearFilter,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=LinearMipmapLinearFilter),1===n.mipmapCount&&(o.minFilter=LinearFilter),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class TextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=new Texture,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Light extends Object3D{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class HemisphereLight extends Light{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(e.matrixWorld),t.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_lookTarget$1),t.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_projScreenMatrix$1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SpotLight extends Light{constructor(e,t,n=0,r=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(e.matrixWorld),n.position.copy(_lightPositionWorld),_lookTarget.copy(n.position),_lookTarget.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_lookTarget),n.updateMatrixWorld(),r.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera$1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class AmbientLight extends Light{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vector3)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class LightProbe extends Light{constructor(e=new SphericalHarmonics3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class MaterialLoader extends Loader{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=MaterialLoader.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Color).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new Color).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Vector2).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new Vector3).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new Vector4).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Matrix3).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new Matrix4).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Vector2).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Vector2).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}[e]}}class LoaderUtils{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class BufferGeometryLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function s(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],o=new Uint32Array(i).buffer;return n[t]=o,o}(e,i.buffer),a=getTypedArray(i.type,o),l=new InterleavedBuffer(a,i.stride);return l.uuid=i.uuid,t[r]=l,l}const i=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,o=e.data.index;if(void 0!==o){const e=getTypedArray(o.type,o.array);i.setIndex(new BufferAttribute(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new InterleavedBufferAttribute(i,t.itemSize,t.offset,t.normalized)}else{const e=getTypedArray(t.type,t.array);n=new(t.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),i.setAttribute(u,n)}const a=e.data.morphAttributes;if(a)for(const u in a){const t=a[u],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];let s;if(o.isInterleavedBufferAttribute){const t=r(e.data,o.data);s=new InterleavedBufferAttribute(t,o.itemSize,o.offset,o.normalized)}else{const e=getTypedArray(o.type,o.array);s=new BufferAttribute(e,o.itemSize,o.normalized)}void 0!==o.name&&(s.name=o.name),n.push(s)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Vector3;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Sphere$1(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class ObjectLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(a){return void 0!==r&&r(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}const s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(o,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,r,s,o,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Shape).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,o=e.length;i<o;i++){const t=(new Skeleton).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new BufferGeometryLoader;for(let i=0,o=e.length;i<o;i++){let o;const s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in Geometries?o=Geometries[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new MaterialLoader;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=AnimationClip.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function r(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:getTypedArray(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new LoadingManager(t);i=new ImageLoader(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=o(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new DataTexture(n.data,n.width,n.height)))}r[n.uuid]=new Source(e)}else{const e=o(n.url);r[n.uuid]=new Source(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:getTypedArray(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new ImageLoader(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new DataTexture(r.data,r.width,r.height)))}n[r.uuid]=new Source(e)}else{const e=await i(r.url);n[r.uuid]=new Source(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image],a=s.data;let l;Array.isArray(a)?(l=new CubeTexture,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new DataTexture:new Texture,a&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,TEXTURE_MAPPING)),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],TEXTURE_WRAPPING),l.wrapT=n(o.wrap[1],TEXTURE_WRAPPING)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,TEXTURE_FILTER)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,TEXTURE_FILTER)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}parseObject(e,t,n,r,i){let o,s,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new Scene,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Color(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new FogExp2(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new OrthographicCamera$1(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":o=new DirectionalLight(e.color,e.intensity);break;case"PointLight":o=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new LightProbe).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),a=c(e.material),o=new SkinnedMesh(s,a),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),a=c(e.material),o=new Mesh(s,a);break;case"InstancedMesh":s=l(e.geometry),a=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new InstancedMesh(s,a,t),o.instanceMatrix=new InstancedBufferAttribute(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new InstancedBufferAttribute(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new LOD;break;case"Line":o=new Line$2(l(e.geometry),c(e.material));break;case"LineLoop":o=new LineLoop(l(e.geometry),c(e.material));break;case"LineSegments":o=new LineSegments(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Points(l(e.geometry),c(e.material));break;case"Sprite":o=new Sprite(c(e.material));break;case"Group":o=new Group;break;case"Bone":o=new Bone;break;default:o=new Object3D}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)o.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const TEXTURE_MAPPING={UVMapping:UVMapping,CubeReflectionMapping:CubeReflectionMapping,CubeRefractionMapping:CubeRefractionMapping,EquirectangularReflectionMapping:EquirectangularReflectionMapping,EquirectangularRefractionMapping:EquirectangularRefractionMapping,CubeUVReflectionMapping:CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping:RepeatWrapping,ClampToEdgeWrapping:ClampToEdgeWrapping,MirroredRepeatWrapping:MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter:NearestFilter,NearestMipmapNearestFilter:NearestMipmapNearestFilter,NearestMipmapLinearFilter:NearestMipmapLinearFilter,LinearFilter:LinearFilter,LinearMipmapNearestFilter:LinearMipmapNearestFilter,LinearMipmapLinearFilter:LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Cache.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Cache.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let _context;class AudioContext{static getContext(){return void 0===_context&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(e){_context=e}}class AudioLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);AudioContext.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}class HemisphereLightProbe extends LightProbe{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Color).set(e),i=(new Color).set(t),o=new Vector3(r.r,r.g,r.b),s=new Vector3(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}}class AmbientLightProbe extends LightProbe{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new Color).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,_projectionMatrix.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(DEG2RAD*t.fov*.5)/t.zoom;let o,s;_eyeLeft.elements[12]=-n,_eyeRight.elements[12]=n,o=-i*t.aspect+r,s=i*t.aspect+r,_projectionMatrix.elements[0]=2*t.near/(s-o),_projectionMatrix.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(_projectionMatrix),o=-i*t.aspect-r,s=i*t.aspect-r,_projectionMatrix.elements[0]=2*t.near/(s-o),_projectionMatrix.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now$2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function now$2(){return("undefined"==typeof performance?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(_position$1.x,e),t.positionY.linearRampToValueAtTime(_position$1.y,e),t.positionZ.linearRampToValueAtTime(_position$1.z,e),t.forwardX.linearRampToValueAtTime(_orientation$1.x,e),t.forwardY.linearRampToValueAtTime(_orientation$1.y,e),t.forwardZ.linearRampToValueAtTime(_orientation$1.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(_position$1.x,_position$1.y,_position$1.z),t.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,n.x,n.y,n.z)}}class Audio extends Object3D{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_position.x,e),t.positionY.linearRampToValueAtTime(_position.y,e),t.positionZ.linearRampToValueAtTime(_position.z,e),t.orientationX.linearRampToValueAtTime(_orientation.x,e),t.orientationY.linearRampToValueAtTime(_orientation.y,e),t.orientationZ.linearRampToValueAtTime(_orientation.z,e)}else t.setPosition(_position.x,_position.y,_position.z),t.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class PropertyMixer{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Quaternion.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;Quaternion.multiplyQuaternionsFlat(e,o,e,t,e,n),Quaternion.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*o+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(e,t,n){const r=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class PropertyBinding{constructor(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(e){const t=_trackRe.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==_supportedObjectNames.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite,PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let s,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new PropertyBinding(u,n[e],r[e]))}else if(d<l){s=e[d];const a=--l,c=e[a];t[c.uuid]=d,e[d]=c,t[h]=a,e[a]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[a];let s=t[d];t[d]=o,void 0===s&&(s=new PropertyBinding(u,n[e],r[e])),t[a]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[a]=o,e[o]=s;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<i){const s=--i,a=e[s],c=--o,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[l]=r,t[s]=i,t.pop()}}else{const i=--o,s=e[i];i>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),s.push(t),i.push(u);for(let h=c,d=a.length;h!==d;++h){const n=a[h];u[h]=new PropertyBinding(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class AnimationAction{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,s=new Array(o),a={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let l=0;l!==o;++l){const e=i[l].createInterpolant(null);s[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=i,a[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===AdditiveAnimationBlendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===LoopPingPong;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===LoopOnce){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=ZeroSlopeEnding,r.endingEnd=ZeroSlopeEnding):(r.endingStart=e?this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:WrapAroundEnding,r.endingEnd=t?this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:WrapAroundEnding)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=t,s[1]=i+e,a[1]=n,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new PropertyMixer(PropertyBinding.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,i),o[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[i],0===Object.keys(s).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?AnimationClip.findByName(r,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:NormalAnimationBlendMode),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new AnimationAction(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?AnimationClip.findByName(n,e):e,o=i?i.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,o)}const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Uniform{constructor(e){this.value=e}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}let id$1=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id$1++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class GLBufferAttribute{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Raycaster{constructor(e,t,n=0,r=1/0){this.ray=new Ray(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Layers$1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return intersectObject(e,this,n,t),n.sort(ascSort),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)intersectObject(e[r],this,n,t);return n.sort(ascSort),n}}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)intersectObject(r[e],t,n,!0)}}class Spherical{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(clamp$1(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Cylindrical{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const _vector$4=new Vector2;class Box2{constructor(e=new Vector2(1/0,1/0),t=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_vector$4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(e=new Vector3,t=new Vector3){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);const n=_startEnd.dot(_startEnd);let r=_startEnd.dot(_startP)/n;return t&&(r=clamp$1(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new BufferGeometry,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const e=o/a*Math.PI*2,t=s/a*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Float32BufferAttribute(r,3));const i=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(e){const t=getBoneList(e),n=new BufferGeometry,r=[],i=[],o=new Color(0,0,1),s=new Color(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new Float32BufferAttribute(r,3)),n.setAttribute("color",new Float32BufferAttribute(i,3));super(n,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,e.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),r.setXYZ(o,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,e.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),r.setXYZ(o+1,_vector$2.x,_vector$2.y,_vector$2.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,getBoneList(e.children[n]));return t}class PointLightHelper extends Mesh{constructor(e,t,n){super(new SphereGeometry(t,4,2),new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new OctahedronGeometry(t);r.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new BufferAttribute(o,3)),this.add(new Mesh(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?_color1:_color2;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(e=10,t=10,n=4473924,r=8947848){n=new Color(n),r=new Color(r);const i=t/2,o=e/t,s=e/2,a=[],l=[];for(let u=0,h=0,d=-s;u<=t;u++,d+=o){a.push(-s,0,d,s,0,d),a.push(d,0,-s,d,0,s);const e=u===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(a,3)),c.setAttribute("color",new Float32BufferAttribute(l,3));super(c,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new Color(i),o=new Color(o);const s=[],a=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(r,0,l);const u=1&c?i:o;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?i:o,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;s.push(i,0,o),a.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,s.push(i,0,o),a.push(t.r,t.g,t.b)}}const l=new BufferGeometry;l.setAttribute("position",new Float32BufferAttribute(s,3)),l.setAttribute("color",new Float32BufferAttribute(a,3));super(l,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new BufferGeometry;r.setAttribute("position",new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(r,i),this.add(this.lightPlane),r=new BufferGeometry,r.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector$e=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(e){const t=new BufferGeometry,n=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function s(e,t){a(e),a(t)}function a(e){r.push(0,0,0),i.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Float32BufferAttribute(r,3)),t.setAttribute("color",new Float32BufferAttribute(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Color(16755200),c=new Color(16711680),u=new Color(43775),h=new Color(16777215),d=new Color(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,r,i){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",t,e,_camera,0,0,-1),setPoint("t",t,e,_camera,0,0,1),setPoint("n1",t,e,_camera,-1,-1,-1),setPoint("n2",t,e,_camera,1,-1,-1),setPoint("n3",t,e,_camera,-1,1,-1),setPoint("n4",t,e,_camera,1,1,-1),setPoint("f1",t,e,_camera,-1,-1,1),setPoint("f2",t,e,_camera,1,-1,1),setPoint("f3",t,e,_camera,-1,1,1),setPoint("f4",t,e,_camera,1,1,1),setPoint("u1",t,e,_camera,.7,1.1,-1),setPoint("u2",t,e,_camera,-.7,1.1,-1),setPoint("u3",t,e,_camera,0,2,-1),setPoint("cf1",t,e,_camera,-1,0,1),setPoint("cf2",t,e,_camera,1,0,1),setPoint("cf3",t,e,_camera,0,-1,1),setPoint("cf4",t,e,_camera,0,1,1),setPoint("cn1",t,e,_camera,-1,0,-1),setPoint("cn2",t,e,_camera,1,0,-1),setPoint("cn3",t,e,_camera,0,-1,-1),setPoint("cn4",t,e,_camera,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(e,t,n,r,i,o,s){_vector$e.set(i,o,s).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],_vector$e.x,_vector$e.y,_vector$e.z)}}const _box$4=new Box3;class BoxHelper extends LineSegments{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new BufferGeometry;i.setIndex(new BufferAttribute(n,1)),i.setAttribute("position",new BufferAttribute(r,3)),super(i,new LineBasicMaterial({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&_box$4.setFromObject(this.object),_box$4.isEmpty())return;const t=_box$4.min,n=_box$4.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new BufferGeometry;r.setIndex(new BufferAttribute(n,1)),r.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new LineBasicMaterial({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor(e,t=1,n=16776960){const r=n,i=new BufferGeometry;i.setAttribute("position",new Float32BufferAttribute([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new LineBasicMaterial({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),o.computeBoundingSphere(),this.add(new Mesh(o,new MeshBasicMaterial({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(e=new Vector3(0,0,1),t=new Vector3(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===_lineGeometry&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(t),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new BufferGeometry;n.setAttribute("position",new Float32BufferAttribute(t,3)),n.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Color,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],s=t[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],a=-a,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r}const n=ShapeUtils.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,o,s;const a=[];if(1===r.length)return o=r[0],s=new Shape,s.curves=o.curves,a.push(s),a;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let g=0,_=r.length;g<_;g++)o=r[g],h=o.getPoints(),i=n(h),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new Shape,p:h},u[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:h[0]});if(!u[0])return function m(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Shape;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let t=0,r=u.length;t<r;t++)c[t]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let o=0;o<i.length;o++){const s=i[o];let a=!0;for(let i=0;i<u.length;i++)t(s.p,u[i].p)&&(r!==i&&n++,a?(a=!1,c[i].push(s)):e=!0);a&&c[r].push(s)}}n>0&&!1===e&&(p=c)}for(let g=0,_=u.length;g<_;g++){s=u[g].s,a.push(s),d=p[g];for(let e=0,t=d.length;e<t;e++)s.holes.push(d[e].h)}return a}}const _tables=_generateTables();function _generateTables(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=clamp$1(e,-65504,65504),_tables.floatView[0]=e;const t=_tables.uint32View[0],n=t>>23&511;return _tables.baseTable[n]+((8388607&t)>>_tables.shiftTable[n])}function fromHalfFloat(e){const t=e>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[t]+(1023&e)]+_tables.exponentTable[t],_tables.floatView[0]}const DataUtils={toHalfFloat:toHalfFloat,fromHalfFloat:fromHalfFloat};class BoxBufferGeometry extends BoxGeometry{constructor(e,t,n,r,i,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,i,o)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}}class CircleBufferGeometry extends CircleGeometry{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}}class ConeBufferGeometry extends ConeGeometry{constructor(e,t,n,r,i,o,s){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,i,o,s)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(e,t,n,r,i,o,s,a){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,i,o,s,a)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class LatheBufferGeometry extends LatheGeometry{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}}class RingBufferGeometry extends RingGeometry{constructor(e,t,n,r,i,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,i,o)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class SphereBufferGeometry extends SphereGeometry{constructor(e,t,n,r,i,o,s){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,i,o,s)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class TorusBufferGeometry extends TorusGeometry{constructor(e,t,n,r,i){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,i)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(e,t,n,r,i,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,i,o)}}class TubeBufferGeometry extends TubeGeometry{constructor(e,t,n,r,i){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,i)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const r$5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ACESFilmicToneMapping,AddEquation:AddEquation,AddOperation:AddOperation,AdditiveAnimationBlendMode:AdditiveAnimationBlendMode,AdditiveBlending:AdditiveBlending,AlphaFormat:AlphaFormat,AlwaysDepth:AlwaysDepth,AlwaysStencilFunc:AlwaysStencilFunc,AmbientLight:AmbientLight,AmbientLightProbe:AmbientLightProbe,AnimationClip:AnimationClip,AnimationLoader:AnimationLoader,AnimationMixer:AnimationMixer,AnimationObjectGroup:AnimationObjectGroup,AnimationUtils:AnimationUtils,ArcCurve:ArcCurve,ArrayCamera:ArrayCamera,ArrowHelper:ArrowHelper,Audio:Audio,AudioAnalyser:AudioAnalyser,AudioContext:AudioContext,AudioListener:AudioListener,AudioLoader:AudioLoader,AxesHelper:AxesHelper,BackSide:BackSide,BasicDepthPacking:BasicDepthPacking,BasicShadowMap:BasicShadowMap,Bone:Bone,BooleanKeyframeTrack:BooleanKeyframeTrack,Box2:Box2,Box3:Box3,Box3Helper:Box3Helper,BoxBufferGeometry:BoxBufferGeometry,BoxGeometry:BoxGeometry,BoxHelper:BoxHelper,BufferAttribute:BufferAttribute,BufferGeometry:BufferGeometry,BufferGeometryLoader:BufferGeometryLoader,ByteType:ByteType,Cache:Cache,Camera:Camera,CameraHelper:CameraHelper,CanvasTexture:CanvasTexture,CapsuleBufferGeometry:CapsuleBufferGeometry,CapsuleGeometry:CapsuleGeometry,CatmullRomCurve3:CatmullRomCurve3,CineonToneMapping:CineonToneMapping,CircleBufferGeometry:CircleBufferGeometry,CircleGeometry:CircleGeometry,ClampToEdgeWrapping:ClampToEdgeWrapping,Clock:Clock,Color:Color,ColorKeyframeTrack:ColorKeyframeTrack,ColorManagement:ColorManagement,CompressedArrayTexture:CompressedArrayTexture,CompressedTexture:CompressedTexture,CompressedTextureLoader:CompressedTextureLoader,ConeBufferGeometry:ConeBufferGeometry,ConeGeometry:ConeGeometry,CubeCamera:CubeCamera,CubeReflectionMapping:CubeReflectionMapping,CubeRefractionMapping:CubeRefractionMapping,CubeTexture:CubeTexture,CubeTextureLoader:CubeTextureLoader,CubeUVReflectionMapping:CubeUVReflectionMapping,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,CubicInterpolant:CubicInterpolant,CullFaceBack:CullFaceBack,CullFaceFront:CullFaceFront,CullFaceFrontBack:CullFaceFrontBack,CullFaceNone:CullFaceNone,Curve:Curve,CurvePath:CurvePath,CustomBlending:CustomBlending,CustomToneMapping:CustomToneMapping,CylinderBufferGeometry:CylinderBufferGeometry,CylinderGeometry:CylinderGeometry,Cylindrical:Cylindrical,Data3DTexture:Data3DTexture,DataArrayTexture:DataArrayTexture,DataTexture:DataTexture,DataTextureLoader:DataTextureLoader,DataUtils:DataUtils,DecrementStencilOp:DecrementStencilOp,DecrementWrapStencilOp:DecrementWrapStencilOp,DefaultLoadingManager:DefaultLoadingManager,DepthFormat:DepthFormat,DepthStencilFormat:DepthStencilFormat,DepthTexture:DepthTexture,DirectionalLight:DirectionalLight,DirectionalLightHelper:DirectionalLightHelper,DiscreteInterpolant:DiscreteInterpolant,DisplayP3ColorSpace:DisplayP3ColorSpace,DodecahedronBufferGeometry:DodecahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DoubleSide:DoubleSide,DstAlphaFactor:DstAlphaFactor,DstColorFactor:DstColorFactor,DynamicCopyUsage:DynamicCopyUsage,DynamicDrawUsage:DynamicDrawUsage,DynamicReadUsage:DynamicReadUsage,EdgesGeometry:EdgesGeometry,EllipseCurve:EllipseCurve,EqualDepth:EqualDepth,EqualStencilFunc:EqualStencilFunc,EquirectangularReflectionMapping:EquirectangularReflectionMapping,EquirectangularRefractionMapping:EquirectangularRefractionMapping,Euler:Euler,EventDispatcher:EventDispatcher,ExtrudeBufferGeometry:ExtrudeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,FileLoader:FileLoader,Float16BufferAttribute:Float16BufferAttribute,Float32BufferAttribute:Float32BufferAttribute,Float64BufferAttribute:Float64BufferAttribute,FloatType:FloatType,Fog:Fog,FogExp2:FogExp2,FramebufferTexture:FramebufferTexture,FrontSide:FrontSide,Frustum:Frustum,GLBufferAttribute:GLBufferAttribute,GLSL1:GLSL1,GLSL3:GLSL3,GreaterDepth:GreaterDepth,GreaterEqualDepth:GreaterEqualDepth,GreaterEqualStencilFunc:GreaterEqualStencilFunc,GreaterStencilFunc:GreaterStencilFunc,GridHelper:GridHelper,Group:Group,HalfFloatType:HalfFloatType,HemisphereLight:HemisphereLight,HemisphereLightHelper:HemisphereLightHelper,HemisphereLightProbe:HemisphereLightProbe,IcosahedronBufferGeometry:IcosahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,ImageBitmapLoader:ImageBitmapLoader,ImageLoader:ImageLoader,ImageUtils:ImageUtils,IncrementStencilOp:IncrementStencilOp,IncrementWrapStencilOp:IncrementWrapStencilOp,InstancedBufferAttribute:InstancedBufferAttribute,InstancedBufferGeometry:InstancedBufferGeometry,InstancedInterleavedBuffer:InstancedInterleavedBuffer,InstancedMesh:InstancedMesh,Int16BufferAttribute:Int16BufferAttribute,Int32BufferAttribute:Int32BufferAttribute,Int8BufferAttribute:Int8BufferAttribute,IntType:IntType,InterleavedBuffer:InterleavedBuffer,InterleavedBufferAttribute:InterleavedBufferAttribute,Interpolant:Interpolant,InterpolateDiscrete:InterpolateDiscrete,InterpolateLinear:InterpolateLinear,InterpolateSmooth:InterpolateSmooth,InvertStencilOp:InvertStencilOp,KeepStencilOp:KeepStencilOp,KeyframeTrack:KeyframeTrack,LOD:LOD,LatheBufferGeometry:LatheBufferGeometry,LatheGeometry:LatheGeometry,Layers:Layers$1,LessDepth:LessDepth,LessEqualDepth:LessEqualDepth,LessEqualStencilFunc:LessEqualStencilFunc,LessStencilFunc:LessStencilFunc,Light:Light,LightProbe:LightProbe,Line:Line$2,Line3:Line3,LineBasicMaterial:LineBasicMaterial,LineCurve:LineCurve,LineCurve3:LineCurve3,LineDashedMaterial:LineDashedMaterial,LineLoop:LineLoop,LineSegments:LineSegments,LinearEncoding:LinearEncoding,LinearFilter:LinearFilter,LinearInterpolant:LinearInterpolant,LinearMipMapLinearFilter:LinearMipMapLinearFilter,LinearMipMapNearestFilter:LinearMipMapNearestFilter,LinearMipmapLinearFilter:LinearMipmapLinearFilter,LinearMipmapNearestFilter:LinearMipmapNearestFilter,LinearSRGBColorSpace:LinearSRGBColorSpace,LinearToneMapping:LinearToneMapping,Loader:Loader,LoaderUtils:LoaderUtils,LoadingManager:LoadingManager,LoopOnce:LoopOnce,LoopPingPong:LoopPingPong,LoopRepeat:LoopRepeat,LuminanceAlphaFormat:LuminanceAlphaFormat,LuminanceFormat:LuminanceFormat,MOUSE:MOUSE,Material:Material,MaterialLoader:MaterialLoader,MathUtils:MathUtils,Matrix3:Matrix3,Matrix4:Matrix4,MaxEquation:MaxEquation,Mesh:Mesh,MeshBasicMaterial:MeshBasicMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshMatcapMaterial:MeshMatcapMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshToonMaterial:MeshToonMaterial,MinEquation:MinEquation,MirroredRepeatWrapping:MirroredRepeatWrapping,MixOperation:MixOperation,MultiplyBlending:MultiplyBlending,MultiplyOperation:MultiplyOperation,NearestFilter:NearestFilter,NearestMipMapLinearFilter:NearestMipMapLinearFilter,NearestMipMapNearestFilter:NearestMipMapNearestFilter,NearestMipmapLinearFilter:NearestMipmapLinearFilter,NearestMipmapNearestFilter:NearestMipmapNearestFilter,NeverDepth:NeverDepth,NeverStencilFunc:NeverStencilFunc,NoBlending:NoBlending,NoColorSpace:NoColorSpace,NoToneMapping:NoToneMapping,NormalAnimationBlendMode:NormalAnimationBlendMode,NormalBlending:NormalBlending,NotEqualDepth:NotEqualDepth,NotEqualStencilFunc:NotEqualStencilFunc,NumberKeyframeTrack:NumberKeyframeTrack,Object3D:Object3D,ObjectLoader:ObjectLoader,ObjectSpaceNormalMap:ObjectSpaceNormalMap,OctahedronBufferGeometry:OctahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OneFactor:OneFactor,OneMinusDstAlphaFactor:OneMinusDstAlphaFactor,OneMinusDstColorFactor:OneMinusDstColorFactor,OneMinusSrcAlphaFactor:OneMinusSrcAlphaFactor,OneMinusSrcColorFactor:OneMinusSrcColorFactor,OrthographicCamera:OrthographicCamera$1,PCFShadowMap:PCFShadowMap,PCFSoftShadowMap:PCFSoftShadowMap,PMREMGenerator:PMREMGenerator,Path:Path,PerspectiveCamera:PerspectiveCamera,Plane:Plane$1,PlaneBufferGeometry:PlaneBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneHelper:PlaneHelper,PointLight:PointLight,PointLightHelper:PointLightHelper,Points:Points,PointsMaterial:PointsMaterial,PolarGridHelper:PolarGridHelper,PolyhedronBufferGeometry:PolyhedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PositionalAudio:PositionalAudio,PropertyBinding:PropertyBinding,PropertyMixer:PropertyMixer,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,Quaternion:Quaternion,QuaternionKeyframeTrack:QuaternionKeyframeTrack,QuaternionLinearInterpolant:QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format:RED_GREEN_RGTC2_Format,RED_RGTC1_Format:RED_RGTC1_Format,REVISION:REVISION,RGBADepthPacking:RGBADepthPacking,RGBAFormat:RGBAFormat,RGBAIntegerFormat:RGBAIntegerFormat,RGBA_ASTC_10x10_Format:RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format:RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format:RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format:RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format:RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format:RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format:RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format:RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format:RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format:RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format:RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format:RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format:RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format:RGBA_ASTC_8x8_Format,RGBA_BPTC_Format:RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format:RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format:RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format:RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format:RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:RGB_ETC1_Format,RGB_ETC2_Format:RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format:RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format:RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:RGB_S3TC_DXT1_Format,RGFormat:RGFormat,RGIntegerFormat:RGIntegerFormat,RawShaderMaterial:RawShaderMaterial,Ray:Ray,Raycaster:Raycaster,RectAreaLight:RectAreaLight,RedFormat:RedFormat,RedIntegerFormat:RedIntegerFormat,ReinhardToneMapping:ReinhardToneMapping,RepeatWrapping:RepeatWrapping,ReplaceStencilOp:ReplaceStencilOp,ReverseSubtractEquation:ReverseSubtractEquation,RingBufferGeometry:RingBufferGeometry,RingGeometry:RingGeometry,SIGNED_RED_GREEN_RGTC2_Format:SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format:SIGNED_RED_RGTC1_Format,SRGBColorSpace:SRGBColorSpace,Scene:Scene,ShaderChunk:ShaderChunk,ShaderLib:ShaderLib,ShaderMaterial:ShaderMaterial,ShadowMaterial:ShadowMaterial,Shape:Shape,ShapeBufferGeometry:ShapeBufferGeometry,ShapeGeometry:ShapeGeometry,ShapePath:ShapePath,ShapeUtils:ShapeUtils,ShortType:ShortType,Skeleton:Skeleton,SkeletonHelper:SkeletonHelper,SkinnedMesh:SkinnedMesh,Source:Source,Sphere:Sphere$1,SphereBufferGeometry:SphereBufferGeometry,SphereGeometry:SphereGeometry,Spherical:Spherical,SphericalHarmonics3:SphericalHarmonics3,SplineCurve:SplineCurve,SpotLight:SpotLight,SpotLightHelper:SpotLightHelper,Sprite:Sprite,SpriteMaterial:SpriteMaterial,SrcAlphaFactor:SrcAlphaFactor,SrcAlphaSaturateFactor:SrcAlphaSaturateFactor,SrcColorFactor:SrcColorFactor,StaticCopyUsage:StaticCopyUsage,StaticDrawUsage:StaticDrawUsage,StaticReadUsage:StaticReadUsage,StereoCamera:StereoCamera,StreamCopyUsage:StreamCopyUsage,StreamDrawUsage:StreamDrawUsage,StreamReadUsage:StreamReadUsage,StringKeyframeTrack:StringKeyframeTrack,SubtractEquation:SubtractEquation,SubtractiveBlending:SubtractiveBlending,TOUCH:TOUCH,TangentSpaceNormalMap:TangentSpaceNormalMap,TetrahedronBufferGeometry:TetrahedronBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,Texture:Texture,TextureLoader:TextureLoader,TorusBufferGeometry:TorusBufferGeometry,TorusGeometry:TorusGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,Triangle:Triangle,TriangleFanDrawMode:TriangleFanDrawMode,TriangleStripDrawMode:TriangleStripDrawMode,TrianglesDrawMode:TrianglesDrawMode,TubeBufferGeometry:TubeBufferGeometry,TubeGeometry:TubeGeometry,TwoPassDoubleSide:TwoPassDoubleSide,UVMapping:UVMapping,Uint16BufferAttribute:Uint16BufferAttribute,Uint32BufferAttribute:Uint32BufferAttribute,Uint8BufferAttribute:Uint8BufferAttribute,Uint8ClampedBufferAttribute:Uint8ClampedBufferAttribute,Uniform:Uniform,UniformsGroup:UniformsGroup,UniformsLib:UniformsLib,UniformsUtils:UniformsUtils,UnsignedByteType:UnsignedByteType,UnsignedInt248Type:UnsignedInt248Type,UnsignedIntType:UnsignedIntType,UnsignedShort4444Type:UnsignedShort4444Type,UnsignedShort5551Type:UnsignedShort5551Type,UnsignedShortType:UnsignedShortType,VSMShadowMap:VSMShadowMap,Vector2:Vector2,Vector3:Vector3,Vector4:Vector4,VectorKeyframeTrack:VectorKeyframeTrack,VideoTexture:VideoTexture,WebGL1Renderer:WebGL1Renderer,WebGL3DRenderTarget:WebGL3DRenderTarget,WebGLArrayRenderTarget:WebGLArrayRenderTarget,WebGLCubeRenderTarget:WebGLCubeRenderTarget,WebGLMultipleRenderTargets:WebGLMultipleRenderTargets,WebGLRenderTarget:WebGLRenderTarget,WebGLRenderer:WebGLRenderer,WebGLUtils:WebGLUtils,WireframeGeometry:WireframeGeometry,WrapAroundEnding:WrapAroundEnding,ZeroCurvatureEnding:ZeroCurvatureEnding,ZeroFactor:ZeroFactor,ZeroSlopeEnding:ZeroSlopeEnding,ZeroStencilOp:ZeroStencilOp,_SRGBAFormat:_SRGBAFormat,sRGBEncoding:sRGBEncoding},Symbol.toStringTag,{value:"Module"}));class Trajectory{constructor(e){__publicField(this,"duration"),this.duration=e}}class PolynomialTrajectory extends Trajectory{constructor(e,t){super(e),__publicField(this,"coefs"),this.coefs=t}evaluate(e){const t=new Vector3;return this.coefs.map(((n,r)=>{t.addScaledVector(n,Math.pow(e,r))})),t}}class CircleTrajectory extends Trajectory{constructor(e,t,n,r=["X","Z"],i=2*Math.PI,o=!1){super(e),__publicField(this,"radius"),__publicField(this,"axes"),__publicField(this,"radians"),__publicField(this,"clockwise"),__publicField(this,"pos"),this.radius=n,this.axes=r,this.radians=i,this.clockwise=o,this.pos=t}evaluate(e){let t=1;this.clockwise&&(t=-1);const n=(this.radius*Math.cos(e*this.radians)-1)*t,r=this.radius*-Math.sin(e*this.radians)*t;var i=this.pos.x,o=this.pos.y,s=this.pos.z;return this.axes.some((e=>"X"===e))?i=n+this.pos.x:o=n+this.pos.y,this.axes.some((e=>"Z"===e))?s=r+this.pos.z:o=r+this.pos.y,new Vector3(i,o,s)}}const FPS=60,defaultSimulatorState={robots:{},time:0,timeDilation:1,status:"STOPPED"},nullTrajectory=new PolynomialTrajectory(-1,[]),SIMULATOR_TIMEOUTS=[],useSimulator=create$2()(immer(((set,get)=>({...defaultSimulatorState,play:()=>{set({status:"RUNNING",time:0}),get().executeSimulation(0)},pause:()=>{set({status:"PAUSED"}),get().cancelSimulation()},resume:()=>{set({status:"RUNNING"}),get().executeSimulation(get().time)},halt:()=>{set({status:"STOPPED"}),get().cancelSimulation()},step:()=>{const{status:e,time:t,timeDilation:n,robots:r}=get();if("RUNNING"!==e)return;const i=1/(FPS*n),o=t+i,s={...r};Object.keys(s).forEach((e=>{var t;const n=s[e];if(null===n.trajectory||n.trajectory.duration<0)return;const r=n.timeAlongTrajectory+i/n.trajectoryDuration,o=n.trajectory.evaluate(r),a=o.clone().sub(n.pos);s[e]={...s[e],pos:o,boundingBox:null==(t=n.boundingBox)?void 0:t.clone().translate(a),timeAlongTrajectory:r},s[e].timeAlongTrajectory>=1&&(s[e].trajectory=nullTrajectory,s[e].timeAlongTrajectory=0)})),set({robots:s,time:o})},setRobots:e=>{const t={};Object.values(e).forEach((e=>{t[e.id]={id:e.id,boundingBox:void 0,pos:new Vector3(...e.startingPosition),vel:new Vector3,acc:new Vector3,color:new Color(255,255,255),timeAlongTrajectory:0,trajectory:nullTrajectory,trajectoryDuration:0,trajectories:[]}})),set({robots:t})},updateRobotBoundingBox:(e,t)=>{set((n=>{n.robots[e].boundingBox=t}))},checkCollisions:e=>{const t=get().robots[e],n=Object.entries(get().robots);return void 0!==t.boundingBox&&n.some((([n,r])=>(n!==e&&r.boundingBox&&t.boundingBox&&t.boundingBox.intersectsBox(r.boundingBox),n!==e&&r.boundingBox&&t.boundingBox&&t.boundingBox.intersectsBox(r.boundingBox))))},updateTrajectory:(e,t,n)=>{set((r=>{r.robots[e].timeAlongTrajectory=0,r.robots[e].trajectory=t,r.robots[e].trajectoryDuration=n}))},robotGoTo:(e,t,n,r)=>{const i=get().robots[e],o=i.pos.clone(),s=i.vel.clone(),a=i.acc.clone().multiplyScalar(.5),l=new Vector3,c=i.acc.clone().multiplyScalar(2).addScaledVector(r,-1).addScaledVector(i.vel,8).addScaledVector(n,6).addScaledVector(i.pos,14).addScaledVector(t,-14).multiplyScalar(-2.5),u=i.acc.clone().multiplyScalar(10).addScaledVector(r,-7).addScaledVector(i.vel,45).addScaledVector(n,39).addScaledVector(i.pos,84).addScaledVector(t,-84),h=i.acc.clone().multiplyScalar(-15).addScaledVector(r,13).addScaledVector(i.vel,-72).addScaledVector(n,-68).addScaledVector(i.pos,-140).addScaledVector(t,140).multiplyScalar(.5),d=i.acc.clone().addScaledVector(r,-1).addScaledVector(i.vel,5).addScaledVector(n,5).addScaledVector(i.pos,10).addScaledVector(t,-10).multiplyScalar(2);return new PolynomialTrajectory(1,[o,s,a,l,c,u,h,d])},robotCircle:(e,t=1,n=["Y","Z"],r=2*Math.PI,i=!1)=>{const o=get().robots[e];return new CircleTrajectory(1,o.pos,t,n,r,i)},executeSimulation:startTime=>{const timeline=useRobartState.getState().timelineState,blocks=useRobartState.getState().blocks,robartRobots=useRobartState.getState().robots;0===startTime&&get().setRobots(robartRobots),Object.values(timeline.groups).forEach((group=>{Object.keys(group.robots),Object.values(group.items).forEach((timelineItem=>{const offset=timelineItem.startTime-startTime;if(offset<0)return;const timeout=setTimeout((()=>{const code=blocks[timelineItem.blockId].javaScript;eval(code)}),timeline.scale*offset*1e3);SIMULATOR_TIMEOUTS.push(timeout)}))}))},cancelSimulation:()=>{for(SIMULATOR_TIMEOUTS.map((e=>clearInterval(e)));SIMULATOR_TIMEOUTS.length>0;)SIMULATOR_TIMEOUTS.pop()}}))));let geval=eval;const defaultRobartState={blocks:{},projectName:"New Robart Project",timelineState:{scale:1,mode:"ADD",groups:{group1:{id:"group1",name:"Group 1",items:{},robots:{},duration:60},group2:{id:"group2",name:"Group 2",items:{},robots:{},duration:60},group3:{id:"group3",name:"Group 3",items:{},robots:{},duration:60},group4:{id:"group4",name:"Group 4",items:{},robots:{},duration:60},group5:{id:"group5",name:"Group 5",items:{},robots:{},duration:60}}},editingBlockId:void 0,version:ROBART_VERSION,robots:{}},useRobartState=create$2()(immer(subscribeWithSelector(persist(((e,t)=>({...defaultRobartState,loadProject:t=>{const n=loadProjectFromFile(t);e(n)},saveProject:e=>{const n={blocks:t().blocks,editingBlockId:void 0,projectName:t().projectName,timelineState:t().timelineState,version:ROBART_VERSION,robots:t().robots};saveProjectToFile(n,e)},exportToROS:e=>{const n={blocks:t().blocks,editingBlockId:void 0,projectName:t().projectName,timelineState:t().timelineState,version:ROBART_VERSION,robots:t().robots};exportROS(n)},resetProject:()=>{e(defaultRobartState)},setProjectName:t=>e({projectName:t}),saveGroup:(e,t)=>{},createGroup:t=>{const n=uuid$2(),r={id:n,name:t,items:{},robots:{},duration:60};return e((e=>{e.timelineState.groups[n]=r})),n},addBlockToTimeline:(n,r,i,o)=>{Object.keys(t().timelineState.groups[n].robots);t().blocks,t().projectName;const s=t().timelineState;t().robots;Object.keys(t().timelineState.groups[n].items),s.groups[n].items;var a=0;geval(t().blocks[r].javaScript),a=Math.max(.1,a);const l={id:uuid$2(),groupId:n,blockId:r,startTime:i,isTrajectory:o,duration:a},c={...t().timelineState.groups[n].items};c[l.id]=l,e((e=>{e.timelineState.groups[n].items=c}))},updateBlockInTimeline:(n,r,i)=>{const o={...t().timelineState.groups[n].items[r],startTime:i},s={...t().timelineState.groups[n].items};s[o.id]=o,e((e=>{e.timelineState.groups[n].items=s}))},saveBlock:(n,r)=>{void 0!==t().blocks[n]&&e((e=>{e.blocks[n]={...e.blocks[n],...r}}))},removeBlock:n=>{var r;const i=Object.fromEntries(Object.entries(t().blocks).filter((([e,t])=>e!==n)));Object.values(t().timelineState.groups).map((e=>Object.values(e.items).filter((e=>e.blockId===n)))).flat().forEach((e=>t().removeTimelineItem(e.groupId,e.id)));const o=null==(r=Object.values(i).at(-1))?void 0:r.id;e({blocks:i,editingBlockId:o})},renameBlock:t=>e((e=>{e.blocks[e.editingBlockId].name=t})),createBlock:t=>{const n={id:uuid$2(),name:t,xml:"",python:"",javaScript:"",duration:3};return e((e=>{e.blocks[n.id]=n})),n.id},copyBlock:n=>{const r={...t().blocks[n],id:uuid$2(),name:`Copy of ${t().blocks[n].name}`};return e((e=>{e.blocks[r.id]=r})),r.id},setDuration:(t,n)=>{e((e=>{e.blocks[t].duration=n}))},setEditingBlock:n=>{const r=t().editingBlockId;e({editingBlockId:void 0}),n!=r&&e({editingBlockId:n})},addRobotToGroup:(t,n)=>{e((e=>{e.timelineState.groups[t].robots[n]=e.robots[n]}))},removeRobotFromGroup:(t,n)=>{e((e=>{delete e.timelineState.groups[t].robots[n]}))},createRobot:()=>{const n=uuid$2(),r=Object.keys(t().robots).length;return e((e=>{e.robots[n]={id:n,name:`CF ${r}`,type:"crazyflie",startingPosition:[0,0,0]}})),n},saveRobot:(t,n)=>{e((e=>{e.robots[t]={...e.robots[t],...n}}))},deleteRobot:n=>{const r={...t().robots};delete r[n],e({robots:r})},setTimelineMode:n=>{e({timelineState:{...t().timelineState,mode:n}})},removeTimelineItem:(n,r)=>{const i={...t().timelineState.groups[n].items};delete i[r],e((e=>{e.timelineState.groups[n].items=i}))}})),{storage:createJSONStorage((()=>sessionStorage)),name:"robartState"}))));function debounce$1(e,t){var n=null,r=null;return[function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r=function(){n=null,e.apply(void 0,i)},clearTimeout(n),n=setTimeout(r,t)},function(){null!==n&&(clearTimeout(n),r())}]}useRobartState.subscribe((e=>e.robots),(e=>{useSimulator.getState().setRobots(e)}));var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$1.apply(this,arguments)};function importFromXml(e,t,n){try{return Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(e),t),!0}catch(r){return n&&n(r),!1}}var useBlocklyWorkspace=function(e){var t=e.ref,n=e.initialXml,r=e.toolboxConfiguration,i=e.workspaceConfiguration,o=e.onWorkspaceChange,s=e.onImportXmlError,a=e.onInject,l=e.onDispose,c=React.useState(null),u=c[0],h=c[1],d=React.useState(n),p=d[0],f=d[1],m=React.useState(!1),g=m[0],_=m[1],b=React.useState(!1),v=b[0],y=b[1],O=React.useRef(i);React.useEffect((function(){O.current=i}),[i]);var S=React.useRef(r);React.useEffect((function(){S.current=r,r&&u&&u.updateToolbox(r)}),[r,u]);var T=React.useRef(a),x=React.useRef(l);React.useEffect((function(){T.current=a}),[a]),React.useEffect((function(){x.current=l}),[l]);var E=React.useCallback((function(e){o&&o(e)}),[o]);return React.useEffect((function(){if(t.current){var e=Blockly.inject(t.current,__assign$1(__assign$1({},O.current),{toolbox:S.current}));h(e),_(!1),y(!1),T.current&&T.current(e);var n=x.current;return function(){e.dispose(),n&&n(e)}}}),[t]),React.useEffect((function(){u&&!v&&E(u)}),[E,v,u]),React.useEffect((function(){if(null!=u){var e=function(){E(u)};return u.addChangeListener(e),function(){u.removeChangeListener(e)}}}),[u,E]),React.useEffect((function(){if(null!=u){var e=debounce$1((function(){var e=Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(u));e!==p&&f(e)}),200),t=e[0],n=e[1];return u.addChangeListener(t),function(){u.removeChangeListener(t),n()}}}),[u,p]),React.useEffect((function(){p&&u&&!g&&(importFromXml(p,u,s)||f(null),_(!0))}),[p,u,g,s]),{workspace:u,xml:p}},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(e,t,n,r,i,o){if(o!==ReactPropTypesSecret){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return n.PropTypes=n,n};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function r$4(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r$4(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function clsx(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=r$4(e))&&(r&&(r+=" "),r+=t);return r}PropTypes.string,PropTypes.object,PropTypes.object,PropTypes.string,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func;const RenamableText=({text:e,updateText:t,className:n})=>{const[r,i]=reactExports.useState(!1),[o,s]=reactExports.useState(""),[a,l]=reactExports.useState(0),c=reactExports.useRef(null);reactExports.useEffect((()=>{var e;null!==c.current&&l(null==(e=c.current)?void 0:e.offsetWidth)}),[o]);const u="h-min w-fit rounded-md border-2 border-white hover:border-black";return r?jsxs("form",{onSubmit:e=>{e.preventDefault(),t(o),i(!1)},children:[jsx("span",{className:clsx(u,n,"absolute -z-40 whitespace-pre"),ref:c,children:o}),jsx("input",{className:clsx(u,n),value:o,style:{width:`calc(${a}px + 1ch)`},onChange:e=>s(e.target.value),onBlur:()=>i(!1),autoFocus:!0}),jsx("input",{type:"submit",className:"hidden"})]}):jsx("h2",{className:clsx(u,n),onClick:()=>{s(e),i(!0)},children:e})},BlockEditorHeader=()=>{const e=useRobartState((e=>e.editingBlockId)),t=useRobartState((t=>t.blocks[e??""])),n=useRobartState((e=>e.renameBlock));return jsx("div",t?{className:"m-2 flex items-center gap-2",children:jsx(RenamableText,{text:t.name,className:"text-lg font-bold",updateText:e=>{n(""!==e?e:"New Block")}})}:{className:"h-full w-full text-3xl font-bold flex justify-center items-center",children:"No Block Selected."})},BlockEditorPanel=()=>{const e=useRobartState((e=>e.editingBlockId)),t=useRobartState((e=>e.saveBlock)),n=reactExports.useRef(null),[r,i]=reactExports.useState(),{workspace:o,xml:s}=useBlocklyWorkspace({toolboxConfiguration:blocklyToolboxConfiguration,initialXml:"",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:e=>{const n=pythonExports.pythonGenerator.workspaceToCode(e),i=javascriptExports.javascriptGenerator.workspaceToCode(e);r&&s&&t(r,{xml:s,python:n,javaScript:i})},ref:n});return reactExports.useEffect((()=>{if(window.dispatchEvent(new Event("resize")),o)if(i(e),e){o.setVisible(!0);const n=useRobartState.getState().blocks[e];if(n.xml){var t=Blockly.Xml.textToDom(n.xml);Blockly.Xml.clearWorkspaceAndLoadFromXml(t,o)}else n.xml||o.clear()}else o.setVisible(!1),o.clear()}),[e]),jsxs("div",{className:"flex h-full w-full flex-col",children:[jsx(BlockEditorHeader,{}),jsx("div",{ref:n,className:"w-full flex-grow"})]})};function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach((function(t){_defineProperty$5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_unsupportedIterableToArray$3(e,t)||_nonIterableRest$2()}function _toConsumableArray$3(e){return _arrayWithoutHoles$3(e)||_iterableToArray$3(e)||_unsupportedIterableToArray$3(e)||_nonIterableSpread$3()}function _arrayWithoutHoles$3(e){if(Array.isArray(e))return _arrayLikeToArray$3(e)}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}function _iterableToArray$3(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit$2(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}function _unsupportedIterableToArray$3(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$3(e,t):void 0}}function _arrayLikeToArray$3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread$3(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var noop$2=function e(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$2,measure:noop$2};try{"undefined"!=typeof window&&(_WINDOW=window),"undefined"!=typeof document&&(_DOCUMENT=document),"undefined"!=typeof MutationObserver&&(_MUTATION_OBSERVER=MutationObserver),"undefined"!=typeof performance&&(_PERFORMANCE=performance)}catch(e2){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=void 0===_ref$userAgent?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&"function"==typeof DOCUMENT.addEventListener&&"function"==typeof DOCUMENT.createElement,IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch(e2){return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(e){return new Proxy(e,{get:function e(t,n){return n in t?t[n]:t[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$5(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$5(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$5(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$5(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$5(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$5(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$5(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$5(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$5(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$5(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes)),Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray$3(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map((function(e){return"".concat(e,"x")}))).concat(oneToTwenty.map((function(e){return"w-".concat(e)}))),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(e){var t=DOCUMENT.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function coerce(e){return""===e||"false"!==e&&("true"===e||e)}if(DOCUMENT&&"function"==typeof DOCUMENT.querySelector){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach((function(e){var t=_slicedToArray$2(e,2),n=t[0],r=t[1],i=coerce(getAttrConfig(n));null!=i&&(initial[r]=i)}))}var _default$1={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$2(_objectSpread2$2({},_default$1),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config$1={};Object.keys(_default$1).forEach((function(e){Object.defineProperty(config$1,e,{enumerable:!0,set:function t(n){_config[e]=n,_onChangeCb.forEach((function(e){return e(config$1)}))},get:function t(){return _config[e]}})})),Object.defineProperty(config$1,"familyPrefix",{enumerable:!0,set:function e(t){_config.cssPrefix=t,_onChangeCb.forEach((function(e){return e(config$1)}))},get:function e(){return _config.cssPrefix}}),WINDOW.FontAwesomeConfig=config$1;var _onChangeCb=[];function onChange(e){return _onChangeCb.push(e),function(){_onChangeCb.splice(_onChangeCb.indexOf(e),1)}}var d$5=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(e){if(e&&IS_DOM){var t=DOCUMENT.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=DOCUMENT.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],s=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=o)}return DOCUMENT.head.insertBefore(t,r),e}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var e=12,t="";e-- >0;)t+=idPool[62*Math.random()|0];return t}function toArray(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function classArray(e){return e.classList?toArray(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function htmlEscape(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(htmlEscape(e[n]),'" ')}),"").trim()}function joinStyles(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function transformIsMeaningful(e){return e.size!==meaninglessTransform.size||e.x!==meaninglessTransform.x||e.y!==meaninglessTransform.y||e.rotate!==meaninglessTransform.rotate||e.flipX||e.flipY}function transformForSvg(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),s="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(s," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}function transformForCss(e){var t=e.transform,n=e.width,r=void 0===n?UNITS_IN_GRID:n,i=e.height,o=void 0===i?UNITS_IN_GRID:i,s=e.startCentered,a=void 0!==s&&s,l="";return l+=a&&IS_IE?"translate(".concat(t.x/d$5-r/2,"em, ").concat(t.y/d$5-o/2,"em) "):a?"translate(calc(-50% + ".concat(t.x/d$5,"em), calc(-50% + ").concat(t.y/d$5,"em)) "):"translate(".concat(t.x/d$5,"em, ").concat(t.y/d$5,"em) "),l+="scale(".concat(t.size/d$5*(t.flipX?-1:1),", ").concat(t.size/d$5*(t.flipY?-1:1),") "),l+="rotate(".concat(t.rotate,"deg) ")}var baseStyles=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function css(){var e=DEFAULT_CSS_PREFIX,t=DEFAULT_REPLACEMENT_CLASS,n=config$1.cssPrefix,r=config$1.replacementClass,i=baseStyles;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),s=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var _cssInserted=!1;function ensureCss(){config$1.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function e(){return{dom:{css:css,insertCss:ensureCss}}},hooks:function e(){return{beforeDOMElementCreation:function e(){ensureCss()},beforeI2svg:function e(){ensureCss()}}}},w$3=WINDOW||{};w$3[NAMESPACE_IDENTIFIER]||(w$3[NAMESPACE_IDENTIFIER]={}),w$3[NAMESPACE_IDENTIFIER].styles||(w$3[NAMESPACE_IDENTIFIER].styles={}),w$3[NAMESPACE_IDENTIFIER].hooks||(w$3[NAMESPACE_IDENTIFIER].hooks={}),w$3[NAMESPACE_IDENTIFIER].shims||(w$3[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w$3[NAMESPACE_IDENTIFIER],functions=[],listener=function e(){DOCUMENT.removeEventListener("DOMContentLoaded",e),loaded=1,functions.map((function(e){return e()}))},loaded=!1;function domready(e){IS_DOM&&(loaded?setTimeout(e,0):functions.push(e))}function toHtml(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,o=void 0===i?[]:i;return"string"==typeof e?htmlEscape(e):"<".concat(t," ").concat(joinAttributes(r),">").concat(o.map(toHtml).join(""),"</").concat(t,">")}function iconFromMapping(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));var bindInternal4=function e(t,n){return function(e,r,i,o){return t.call(n,e,r,i,o)}},reduce=function e(t,n,r,i){var o,s,a,l=Object.keys(t),c=l.length,u=void 0!==i?bindInternal4(n,i):n;for(void 0===r?(o=1,a=t[l[0]]):(o=0,a=r);o<c;o++)a=u(a,t[s=l[o]],s,t);return a},_LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY;function ucs2decode(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}function toHex(e){var t=ucs2decode(e);return 1===t.length?t[0].toString(16):null}function codePointAt$1(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}function normalizeIcons(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function defineIcons(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=normalizeIcons(t);"function"!=typeof namespace.hooks.addPack||r?namespace.styles[e]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[e]||{}),i):namespace.hooks.addPack(e,normalizeIcons(t)),"fas"===e&&defineIcons("fa",t)}var styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$5(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$5(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(e){return~RESERVED_CLASSES.indexOf(e)}function getIconName(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r!==e||""===i||isReserved(i)?null:i}var build=function e(){var t=function e(t){return reduce(styles,(function(e,n,r){return e[r]=reduce(n,t,{}),e}),{})};_byUnicode=t((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"==typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),_byLigature=t((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"==typeof e}));r.forEach((function(t){e[t]=n}))}return e})),_byAlias=t((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var n="far"in styles||config$1.autoFetchSvg,r=reduce(shims,(function(e,t){var r=t[0],i=t[1],o=t[2];return"far"!==i||n||(i="fas"),"string"==typeof r&&(e.names[r]={prefix:i,iconName:o}),"number"==typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:o}),e}),{names:{},unicodes:{}});_byOldName=r.names,_byOldUnicode=r.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config$1.styleDefault,{family:config$1.familyDefault})};function byUnicode(e,t){return(_byUnicode[e]||{})[t]}function byLigature(e,t){return(_byLigature[e]||{})[t]}function byAlias(e,t){return(_byAlias[e]||{})[t]}function byOldName(e){return _byOldName[e]||{prefix:null,iconName:null}}function byOldUnicode(e){var t=_byOldUnicode[e],n=byUnicode("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}onChange((function(e){_defaultUsablePrefix=getCanonicalPrefix(e.styleDefault,{family:config$1.familyDefault})})),build();var emptyCanonicalIcon=function e(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?FAMILY_CLASSIC:t,r=PREFIX_TO_STYLE[n][e],i=STYLE_TO_PREFIX[n][e]||STYLE_TO_PREFIX[n][r],o=e in namespace.styles?e:null;return i||o||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(_defineProperty$5(t={},FAMILY_CLASSIC,"".concat(config$1.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$5(t,FAMILY_SHARP,"".concat(config$1.cssPrefix,"-").concat(FAMILY_SHARP)),t),o=null,s=FAMILY_CLASSIC;(e.includes(i[FAMILY_CLASSIC])||e.some((function(e){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(e)})))&&(s=FAMILY_CLASSIC),(e.includes(i[FAMILY_SHARP])||e.some((function(e){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(e)})))&&(s=FAMILY_SHARP);var a=e.reduce((function(e,t){var n=getIconName(config$1.cssPrefix,t);if(styles[t]?(t=LONG_STYLE[s].includes(t)?LONG_STYLE_TO_PREFIX[s][t]:t,o=t,e.prefix=t):PREFIXES[s].indexOf(t)>-1?(o=t,e.prefix=getCanonicalPrefix(t,{family:s})):n?e.iconName=n:t!==config$1.replacementClass&&t!==i[FAMILY_CLASSIC]&&t!==i[FAMILY_SHARP]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===o?byOldName(e.iconName):{},l=byAlias(e.prefix,e.iconName);a.prefix&&(o=null),e.iconName=a.iconName||l||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||styles.far||!styles.fas||config$1.autoFetchSvg||(e.prefix="fas")}return e}),emptyCanonicalIcon());return(e.includes("fa-brands")||e.includes("fab"))&&(a.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(a.prefix="fad"),a.prefix||s!==FAMILY_SHARP||!styles.fass&&!config$1.autoFetchSvg||(a.prefix="fass",a.iconName=byAlias(a.prefix,a.iconName)||a.iconName),"fa"!==a.prefix&&"fa"!==o||(a.prefix=getDefaultUsablePrefix()||"fas"),a}var Library=function(){function e(){_classCallCheck(this,e),this.definitions={}}return _createClass(e,[{key:"add",value:function e(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach((function(e){t.definitions[e]=_objectSpread2$2(_objectSpread2$2({},t.definitions[e]||{}),o[e]),defineIcons(e,o[e]);var n=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][e];n&&defineIcons(n,o[e]),build()}))}},{key:"reset",value:function e(){this.definitions={}}},{key:"_pullDefinitions",value:function e(t,n){var r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map((function(e){var n=r[e],i=n.prefix,o=n.iconName,s=n.icon,a=s[2];t[i]||(t[i]={}),a.length>0&&a.forEach((function(e){"string"==typeof e&&(t[i][e]=s)})),t[i][o]=s})),t}}]),e}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(e,t){var n=t.mixoutsTo;return _plugins=e,_hooks={},Object.keys(providers).forEach((function(e){-1===defaultProviderKeys.indexOf(e)&&delete providers[e]})),_plugins.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"==typeof t[e]&&(n[e]=t[e]),"object"===_typeof$2(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){_hooks[e]||(_hooks[e]=[]),_hooks[e].push(r[e])}))}e.provides&&e.provides(providers)})),n}function chainHooks(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(_hooks[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function callHooks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(_hooks[e]||[]).forEach((function(e){e.apply(null,n)}))}function callProvided(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return providers[e]?providers[e].apply(null,t):void 0}function findIconDefinition(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||getDefaultUsablePrefix();if(t)return t=byAlias(n,t)||t,iconFromMapping(library.definitions,n,t)||iconFromMapping(namespace.styles,n,t)}var library=new Library,noAuto=function e(){config$1.autoReplaceSvg=!1,config$1.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",t),callProvided("pseudoElements2svg",t),callProvided("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===config$1.autoReplaceSvg&&(config$1.autoReplaceSvg=!0),config$1.observeMutations=!0,domready((function(){autoReplace({autoReplaceSvgRoot:n}),callHooks("watch",t)}))}},parse$1={icon:function e(t){if(null===t)return null;if("object"===_typeof$2(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:byAlias(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var n=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],r=getCanonicalPrefix(t[0]);return{prefix:r,iconName:byAlias(r,n)||n}}if("string"==typeof t&&(t.indexOf("".concat(config$1.cssPrefix,"-"))>-1||t.match(ICON_SELECTION_SYNTAX_PATTERN))){var i=getCanonicalIcon(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||getDefaultUsablePrefix(),iconName:byAlias(i.prefix,i.iconName)||i.iconName}}if("string"==typeof t){var o=getDefaultUsablePrefix();return{prefix:o,iconName:byAlias(o,t)||t}}}},api={noAuto:noAuto,config:config$1,dom:dom,parse:parse$1,library:library,findIconDefinition:findIconDefinition,toHtml:toHtml},autoReplace=function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,n=void 0===t?DOCUMENT:t;(Object.keys(namespace.styles).length>0||config$1.autoFetchSvg)&&IS_DOM&&config$1.autoReplaceSvg&&api.dom.i2svg({node:n})};function domVariants(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function t(){return e.abstract.map((function(e){return toHtml(e)}))}}),Object.defineProperty(e,"node",{get:function t(){if(IS_DOM){var n=DOCUMENT.createElement("div");return n.innerHTML=e.html,n.children}}}),e}function asIcon(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,s=e.transform;if(transformIsMeaningful(s)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},o),{},{"transform-origin":"".concat(a.x+s.x/16,"em ").concat(a.y+s.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function asSymbol(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,s=!0===o?"".concat(t,"-").concat(config$1.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},i),{},{id:s}),children:r}]}]}function makeInlineSvgAbstract(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,s=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,p=void 0!==d&&d,f=r.found?r:n,m=f.width,g=f.height,_="fak"===i,b=[config$1.replacementClass,o?"".concat(config$1.cssPrefix,"-").concat(o):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),v={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},h.attributes),{},{"data-prefix":i,"data-icon":o,class:b,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},y=_&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(v.attributes[DATA_FA_I2SVG]=""),l&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||nextUniqueId())},children:[l]}),delete v.attributes.title);var O=_objectSpread2$2(_objectSpread2$2({},v),{},{prefix:i,iconName:o,main:n,mask:r,maskId:c,transform:s,symbol:a,styles:_objectSpread2$2(_objectSpread2$2({},y),h.styles)}),S=r.found&&n.found?callProvided("generateAbstractMask",O)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",O)||{children:[],attributes:{}},T=S.children,x=S.attributes;return O.children=T,O.attributes=x,a?asSymbol(O):asIcon(O)}function makeLayersTextAbstract(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,s=e.extra,a=e.watchable,l=void 0!==a&&a,c=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},s.attributes),o?{title:o}:{}),{},{class:s.classes.join(" ")});l&&(c[DATA_FA_I2SVG]="");var u=_objectSpread2$2({},s.styles);transformIsMeaningful(i)&&(u.transform=transformForCss({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=joinStyles(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function makeLayersCounterAbstract(e){var t=e.content,n=e.title,r=e.extra,i=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=joinStyles(r.styles);o.length>0&&(i.style=o);var s=[];return s.push({tag:"span",attributes:i,children:[t]}),n&&s.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),s}var styles$1=namespace.styles;function asFoundIcon(e){var t=e[0],n=e[1],r=_slicedToArray$2(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(e,t){PRODUCTION$1||config$1.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function findIcon(e,t){var n=t;return"fa"===t&&null!==config$1.styleDefault&&(t=getDefaultUsablePrefix()),new Promise((function(r,i){if(callProvided("missingIconAbstract"),"fa"===n){var o=byOldName(e)||{};e=o.iconName||e,t=o.prefix||t}if(e&&t&&styles$1[t]&&styles$1[t][e])return r(asFoundIcon(styles$1[t][e]));maybeNotifyMissing(e,t),r(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config$1.showMissingIcons&&e&&callProvided("missingIconAbstract")||{}}))}))}var noop$1$1=function e(){},p$4=config$1.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1$1,measure:noop$1$1},preamble='FA "6.3.0"',begin=function e(t){return p$4.mark("".concat(preamble," ").concat(t," begins")),function(){return end(t)}},end=function e(t){p$4.mark("".concat(preamble," ").concat(t," ends")),p$4.measure("".concat(preamble," ").concat(t),"".concat(preamble," ").concat(t," begins"),"".concat(preamble," ").concat(t," ends"))},perf={begin:begin,end:end},noop$2$1=function e(){};function isWatched(e){return"string"==typeof(e.getAttribute?e.getAttribute(DATA_FA_I2SVG):null)}function hasPrefixAndIcon(e){var t=e.getAttribute?e.getAttribute(DATA_PREFIX):null,n=e.getAttribute?e.getAttribute(DATA_ICON):null;return t&&n}function hasBeenReplaced(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(config$1.replacementClass)}function getMutator(){return!0===config$1.autoReplaceSvg?mutators.replace:mutators[config$1.autoReplaceSvg]||mutators.replace}function createElementNS(e){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",e)}function createElement(e){return DOCUMENT.createElement(e)}function convertSVG(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?createElementNS:createElement:t;if("string"==typeof e)return DOCUMENT.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(convertSVG(e,{ceFn:n}))})),r}function nodeAsComment(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com ")}var mutators={replace:function e(t){var n=t[0];if(n.parentNode)if(t[1].forEach((function(e){n.parentNode.insertBefore(convertSVG(e),n)})),null===n.getAttribute(DATA_FA_I2SVG)&&config$1.keepOriginalSource){var r=DOCUMENT.createComment(nodeAsComment(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function e(t){var n=t[0],r=t[1];if(~classArray(n).indexOf(config$1.replacementClass))return mutators.replace(t);var i=new RegExp("".concat(config$1.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce((function(e,t){return t===config$1.replacementClass||t.match(i)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),0===o.toNode.length?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var s=r.map((function(e){return toHtml(e)})).join("\n");n.setAttribute(DATA_FA_I2SVG,""),n.innerHTML=s}};function performOperationSync(e){e()}function perform(e,t){var n="function"==typeof t?t:noop$2$1;if(0===e.length)n();else{var r=performOperationSync;config$1.mutateApproach===MUTATION_APPROACH_ASYNC&&(r=WINDOW.requestAnimationFrame||performOperationSync),r((function(){var t=getMutator(),r=perf.begin("mutate");e.map(t),r(),n()}))}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(e){if(MUTATION_OBSERVER&&config$1.observeMutations){var t=e.treeCallback,n=void 0===t?noop$2$1:t,r=e.nodeCallback,i=void 0===r?noop$2$1:r,o=e.pseudoElementsCallback,s=void 0===o?noop$2$1:o,a=e.observeMutationsRoot,l=void 0===a?DOCUMENT:a;mo=new MUTATION_OBSERVER((function(e){if(!disabled){var t=getDefaultUsablePrefix();toArray(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!isWatched(e.addedNodes[0])&&(config$1.searchPseudoElements&&s(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&config$1.searchPseudoElements&&s(e.target.parentNode),"attributes"===e.type&&isWatched(e.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(e.attributeName))if("class"===e.attributeName&&hasPrefixAndIcon(e.target)){var r=getCanonicalIcon(classArray(e.target)),o=r.prefix,a=r.iconName;e.target.setAttribute(DATA_PREFIX,o||t),a&&e.target.setAttribute(DATA_ICON,a)}else hasBeenReplaced(e.target)&&i(e.target)}))}})),IS_DOM&&mo.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function classParser(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=getCanonicalIcon(classArray(e));return i.prefix||(i.prefix=getDefaultUsablePrefix()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=byLigature(i.prefix,e.innerText)||byUnicode(i.prefix,toHex(e.innerText))),!i.iconName&&config$1.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function attributesParser(e){var t=toArray(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return config$1.autoA11y&&(n?t["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(r||nextUniqueId()):(t["aria-hidden"]="true",t.focusable="false")),t}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=classParser(e),r=n.iconName,i=n.prefix,o=n.rest,s=attributesParser(e),a=chainHooks("parseNodeAttributes",{},e),l=t.styleParser?styleParser(e):[];return _objectSpread2$2({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:l,attributes:s}},a)}var styles$2=namespace.styles;function generateMutation(e){var t="nest"===config$1.autoReplaceSvg?parseMeta(e,{styleParser:!1}):parseMeta(e);return~t.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",e,t):callProvided("generateSvgReplacementMutation",e,t)}var knownPrefixes=new Set;function onTree(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var n=DOCUMENT.documentElement.classList,r=function e(t){return n.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(t))},i=function e(t){return n.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(t))},o=config$1.autoFetchSvg?knownPrefixes:FAMILIES.map((function(e){return"fa-".concat(e)})).concat(Object.keys(styles$2));o.includes("fa")||o.push("fa");var s=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(o.map((function(e){return".".concat(e,":not([").concat(DATA_FA_I2SVG,"])")}))).join(", ");if(0===s.length)return Promise.resolve();var a=[];try{a=toArray(e.querySelectorAll(s))}catch(e2){}if(!(a.length>0))return Promise.resolve();r("pending"),i("complete");var l=perf.begin("onTree"),c=a.reduce((function(e,t){try{var n=generateMutation(t);n&&e.push(n)}catch(e2){PRODUCTION$1||"MissingIcon"===e2.name&&console.error(e2)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){perform(n,(function(){r("active"),r("complete"),i("pending"),"function"==typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function onNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;generateMutation(e).then((function(e){e&&perform([e],t)}))}function resolveIcons(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:findIconDefinition(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:findIconDefinition(i||{})),e(r,_objectSpread2$2(_objectSpread2$2({},n),{},{mask:i}))}}FAMILIES.map((function(e){knownPrefixes.add("fa-".concat(e))})),Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes)),Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes)),knownPrefixes=_toConsumableArray$3(knownPrefixes);var render=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.transform,i=void 0===r?meaninglessTransform:r,o=n.symbol,s=void 0!==o&&o,a=n.mask,l=void 0===a?null:a,c=n.maskId,u=void 0===c?null:c,h=n.title,d=void 0===h?null:h,p=n.titleId,f=void 0===p?null:p,m=n.classes,g=void 0===m?[]:m,_=n.attributes,b=void 0===_?{}:_,v=n.styles,y=void 0===v?{}:v;if(t){var O=t.prefix,S=t.iconName,T=t.icon;return domVariants(_objectSpread2$2({type:"icon"},t),(function(){return callHooks("beforeDOMElementCreation",{iconDefinition:t,params:n}),config$1.autoA11y&&(d?b["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(f||nextUniqueId()):(b["aria-hidden"]="true",b.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(T),mask:l?asFoundIcon(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:O,iconName:S,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),i),symbol:s,title:d,maskId:u,titleId:f,extra:{attributes:b,styles:y,classes:g}})}))}},ReplaceElements={mixout:function e(){return{icon:resolveIcons(render)}},hooks:function e(){return{mutationObserverCallbacks:function e(t){return t.treeCallback=onTree,t.nodeCallback=onNode,t}}},provides:function e(t){t.i2svg=function(e){var t=e.node,n=void 0===t?DOCUMENT:t,r=e.callback;return onTree(n,void 0===r?function(){}:r)},t.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,o=t.prefix,s=t.transform,a=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,h){Promise.all([findIcon(n,o),l.iconName?findIcon(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=_slicedToArray$2(l,2),d=h[0],p=h[1];t([e,makeInlineSvgAbstract({icons:{main:d,mask:p},prefix:o,iconName:n,transform:s,symbol:a,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},t.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,o=e.transform,s=joinStyles(e.styles);return s.length>0&&(r.style=s),transformIsMeaningful(o)&&(t=callProvided("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},Layers={mixout:function e(){return{layer:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.classes,i=void 0===r?[]:r;return domVariants({type:"layer"},(function(){callHooks("beforeDOMElementCreation",{assembler:t,params:n});var e=[];return t((function(t){Array.isArray(t)?t.map((function(t){e=e.concat(t.abstract)})):e=e.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(config$1.cssPrefix,"-layers")].concat(_toConsumableArray$3(i)).join(" ")},children:e}]}))}}}},LayersCounter={mixout:function e(){return{counter:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.title,i=void 0===r?null:r,o=n.classes,s=void 0===o?[]:o,a=n.attributes,l=void 0===a?{}:a,c=n.styles,u=void 0===c?{}:c;return domVariants({type:"counter",content:t},(function(){return callHooks("beforeDOMElementCreation",{content:t,params:n}),makeLayersCounterAbstract({content:t.toString(),title:i,extra:{attributes:l,styles:u,classes:["".concat(config$1.cssPrefix,"-layers-counter")].concat(_toConsumableArray$3(s))}})}))}}}},LayersText={mixout:function e(){return{text:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.transform,i=void 0===r?meaninglessTransform:r,o=n.title,s=void 0===o?null:o,a=n.classes,l=void 0===a?[]:a,c=n.attributes,u=void 0===c?{}:c,h=n.styles,d=void 0===h?{}:h;return domVariants({type:"text",content:t},(function(){return callHooks("beforeDOMElementCreation",{content:t,params:n}),makeLayersTextAbstract({content:t,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),i),title:s,extra:{attributes:u,styles:d,classes:["".concat(config$1.cssPrefix,"-layers-text")].concat(_toConsumableArray$3(l))}})}))}}},provides:function e(t){t.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,o=null,s=null;if(IS_IE){var a=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();o=l.width/a,s=l.height/a}return config$1.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,makeLayersTextAbstract({content:e.innerHTML,width:o,height:s,transform:r,title:n,extra:i,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(e){var t=e.replace(CLEAN_CONTENT_PATTERN,""),n=codePointAt$1(t,0),r=n>=SECONDARY_UNICODE_RANGE[0]&&n<=SECONDARY_UNICODE_RANGE[1],i=2===t.length&&t[0]===t[1];return{value:toHex(i?t[0]:t),isSecondary:r||i}}function replaceForPosition(e,t){var n="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var o=toArray(e.children).filter((function(e){return e.getAttribute(DATA_FA_PSEUDO_ELEMENT)===t}))[0],s=WINDOW.getComputedStyle(e,t),a=s.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),l=s.getPropertyValue("font-weight"),c=s.getPropertyValue("content");if(o&&!a)return e.removeChild(o),r();if(a&&"none"!==c&&""!==c){var u=s.getPropertyValue("content"),h=~["Sharp"].indexOf(a[2])?FAMILY_SHARP:FAMILY_CLASSIC,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(a[2])?STYLE_TO_PREFIX[h][a[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[h][l],p=hexValueFromContent(u),f=p.value,m=p.isSecondary,g=a[0].startsWith("FontAwesome"),_=byUnicode(d,f),b=_;if(g){var v=byOldUnicode(f);v.iconName&&v.prefix&&(_=v.iconName,d=v.prefix)}if(!_||m||o&&o.getAttribute(DATA_PREFIX)===d&&o.getAttribute(DATA_ICON)===b)r();else{e.setAttribute(n,b),o&&e.removeChild(o);var y=blankMeta(),O=y.extra;O.attributes[DATA_FA_PSEUDO_ELEMENT]=t,findIcon(_,d).then((function(i){var o=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},y),{},{icons:{main:i,mask:emptyCanonicalIcon()},prefix:d,iconName:b,extra:O,watchable:!0})),s=DOCUMENT.createElement("svg");"::before"===t?e.insertBefore(s,e.firstChild):e.appendChild(s),s.outerHTML=o.map((function(e){return toHtml(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function replace(e){return Promise.all([replaceForPosition(e,"::before"),replaceForPosition(e,"::after")])}function processable(e){return!(e.parentNode===document.head||~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(e.tagName.toUpperCase())||e.getAttribute(DATA_FA_PSEUDO_ELEMENT)||e.parentNode&&"svg"===e.parentNode.tagName)}function searchPseudoElements(e){if(IS_DOM)return new Promise((function(t,n){var r=toArray(e.querySelectorAll("*")).filter(processable).map(replace),i=perf.begin("searchPseudoElements");disableObservation(),Promise.all(r).then((function(){i(),enableObservation(),t()})).catch((function(){i(),enableObservation(),n()}))}))}var PseudoElements={hooks:function e(){return{mutationObserverCallbacks:function e(t){return t.pseudoElementsCallback=searchPseudoElements,t}}},provides:function e(t){t.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?DOCUMENT:t;config$1.searchPseudoElements&&searchPseudoElements(n)}}},_unwatched=!1,MutationObserver$1={mixout:function e(){return{dom:{unwatch:function e(){disableObservation(),_unwatched=!0}}}},hooks:function e(){return{bootstrap:function e(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function e(){disconnect()},watch:function e(t){var n=t.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:n}))}}}},parseTransformString=function e(t){return t.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},PowerTransforms={mixout:function e(){return{parse:{transform:function e(t){return parseTransformString(t)}}}},hooks:function e(){return{parseNodeAttributes:function e(t,n){var r=n.getAttribute("data-fa-transform");return r&&(t.transform=parseTransformString(r)),t}}},provides:function e(t){t.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,o={transform:"translate(".concat(r/2," 256)")},s="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:o,inner:{transform:"".concat(s," ").concat(a," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:_objectSpread2$2({},c.outer),children:[{tag:"g",attributes:_objectSpread2$2({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},t.icon.attributes),c.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function deGroup(e){return"g"===e.tag?e.children:[e]}var Masks={hooks:function e(){return{parseNodeAttributes:function e(t,n){var r=n.getAttribute("data-fa-mask"),i=r?getCanonicalIcon(r.split(" ").map((function(e){return e.trim()}))):emptyCanonicalIcon();return i.prefix||(i.prefix=getDefaultUsablePrefix()),t.mask=i,t.maskId=n.getAttribute("data-fa-mask-id"),t}}},provides:function e(t){t.generateAbstractMask=function(e){var t=e.children,n=e.attributes,r=e.main,i=e.mask,o=e.maskId,s=e.transform,a=r.width,l=r.icon,c=i.width,u=i.icon,h=transformForSvg({transform:s,containerWidth:c,iconWidth:a}),d={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},p=l.children?{children:l.children.map(fillBlack)}:{},f={tag:"g",attributes:_objectSpread2$2({},h.inner),children:[fillBlack(_objectSpread2$2({tag:l.tag,attributes:_objectSpread2$2(_objectSpread2$2({},l.attributes),h.path)},p))]},m={tag:"g",attributes:_objectSpread2$2({},h.outer),children:[f]},g="mask-".concat(o||nextUniqueId()),_="clip-".concat(o||nextUniqueId()),b={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},v={tag:"defs",children:[{tag:"clipPath",attributes:{id:_},children:deGroup(u)},b]};return t.push(v,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat(_,")"),mask:"url(#".concat(g,")")},ALL_SPACE)}),{children:t,attributes:n}}}},MissingIconIndicator={provides:function e(t){var n=!1;WINDOW.matchMedia&&(n=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var e=[],t={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},t),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=_objectSpread2$2(_objectSpread2$2({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},t),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||o.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},t),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},i),{},{values:"1;0;0;0;0;1;"})}]}),n||e.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},t),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},SvgSymbols={hooks:function e(){return{parseNodeAttributes:function e(t,n){var r=n.getAttribute("data-fa-symbol"),i=null!==r&&(""===r||r);return t.symbol=i,t}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api}),api.noAuto,api.config,api.library,api.dom;var parse$1$1=api.parse;api.findIconDefinition,api.toHtml;var icon=api.icon;function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach((function(t){_defineProperty$4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty$4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutPropertiesLoose$3(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties$2(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _toConsumableArray$2(e){return _arrayWithoutHoles$2(e)||_iterableToArray$2(e)||_unsupportedIterableToArray$2(e)||_nonIterableSpread$2()}function _arrayWithoutHoles$2(e){if(Array.isArray(e))return _arrayLikeToArray$2(e)}function _iterableToArray$2(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread$2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function classList(e){var t,n=e.beat,r=e.fade,i=e.beatFade,o=e.bounce,s=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,p=e.inverse,f=e.border,m=e.listItem,g=e.flip,_=e.size,b=e.rotation,v=e.pull,y=(_defineProperty$4(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":s,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":p,"fa-border":f,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(_),null!=_),_defineProperty$4(t,"fa-rotate-".concat(b),null!=b&&0!==b),_defineProperty$4(t,"fa-pull-".concat(v),null!=v),_defineProperty$4(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(y).map((function(e){return y[e]?e:null})).filter((function(e){return e}))}function _isNumerical(e){return(e-=0)==e}function camelize(e){return _isNumerical(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)}api.layer,api.text,api.counter;var _excluded$3=["style"];function capitalize$1(e){return e.charAt(0).toUpperCase()+e.slice(1)}function styleToObject(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=camelize(t.slice(0,n)),i=t.slice(n+1).trim();return r.startsWith("webkit")?e[capitalize$1(r)]=i:e[r]=i,e}),{})}function convert(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t)return t;var r=(t.children||[]).map((function(t){return convert(e,t)})),i=Object.keys(t.attributes||{}).reduce((function(e,n){var r=t.attributes[n];switch(n){case"class":e.attrs.className=r,delete t.attributes.class;break;case"style":e.attrs.style=styleToObject(r);break;default:0===n.indexOf("aria-")||0===n.indexOf("data-")?e.attrs[n.toLowerCase()]=r:e.attrs[camelize(n)]=r}return e}),{attrs:{}}),o=n.style,s=void 0===o?{}:o,a=_objectWithoutProperties$2(n,_excluded$3);return i.attrs.style=_objectSpread2$1(_objectSpread2$1({},i.attrs.style),s),e.apply(void 0,[t.tag,_objectSpread2$1(_objectSpread2$1({},i.attrs),a)].concat(_toConsumableArray$2(r)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(e2){}function log(){var e;!PRODUCTION&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}function normalizeIconArgs(e){return e&&"object"===_typeof$1(e)&&e.prefix&&e.iconName&&e.icon?e:parse$1$1.icon?parse$1$1.icon(e):null===e?null:e&&"object"===_typeof$1(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function objectWithKey(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?_defineProperty$4({},e,t):{}}var FontAwesomeIcon=React.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,o=e.className,s=e.title,a=e.titleId,l=e.maskId,c=normalizeIconArgs(n),u=objectWithKey("classes",[].concat(_toConsumableArray$2(classList(e)),_toConsumableArray$2(o.split(" ")))),h=objectWithKey("transform","string"==typeof e.transform?parse$1$1.transform(e.transform):e.transform),d=objectWithKey("mask",normalizeIconArgs(r)),p=icon(c,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},u),h),d),{},{symbol:i,title:s,titleId:a,maskId:l}));if(!p)return log("Could not find icon",c),null;var f=p.abstract,m={ref:t};return Object.keys(e).forEach((function(t){FontAwesomeIcon.defaultProps.hasOwnProperty(t)||(m[t]=e[t])})),convertCurry(f[0],m)}));FontAwesomeIcon.displayName="FontAwesomeIcon",FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool},FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),classnames={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
!function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&e.push(s)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var a in i)t.call(i,a)&&i[a]&&e.push(a)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Tree2Element(e){return e&&e.map((function(e,t){return React.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))}))}function GenIcon(e){return function(t){return React.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),Tree2Element(e.child))}}function IconBase(e){var t=function(t){var n,r=e.attr,i=e.size,o=e.title,s=__rest(e,["attr","size","title"]),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&React.createElement("title",null,o),e.children)};return void 0!==IconContext?React.createElement(IconContext.Consumer,null,(function(e){return t(e)})):t(DefaultContext)}function HiChevronDown(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function HiStar(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(e)}function HiX(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function HiOutlineChevronDown(e){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}}]})(e)}function HiOutlineChevronLeft(e){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(e)}function HiOutlineChevronRight(e){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(e)}function HiOutlineChevronUp(e){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"}}]})(e)}function HiOutlineX(e){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}}]})(e)}function isObject$1(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function cloneDeep(e){if(!isObject$1(e))return e;const t={...e};return Object.keys(e).forEach((n=>{t[n]=cloneDeep(e[n])})),t}function mergeDeep(e,t){if(isObject$1(t)&&0===Object.keys(t).length)return cloneDeep({...e,...t});let n={...e,...t};return isObject$1(t)&&isObject$1(e)&&Object.keys(t).forEach((r=>{isObject$1(t[r])&&r in e&&isObject$1(e[r])?n[r]=mergeDeep(e[r],t[r]):n[r]=isObject$1(t[r])?cloneDeep(t[r]):t[r]})),n}const theme$1={accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{root:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",wrapper:"flex items-center",color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg"},closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300"}}},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"}},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center w-10 h-10 bg-gray-100 dark:bg-gray-600"}},avatarGroupCounter:{root:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},avatarGroup:{root:{base:"flex -space-x-4"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400"},disabled:"cursor-not-allowed opacity-50",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"!block bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{base:"relative h-full w-full",indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none",scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},darkThemeToggle:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"},dropdown:{floating:{target:"w-fit",base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",content:"py-1 text-sm text-gray-700 dark:text-gray-200",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},divider:"my-1 h-px bg-gray-100 dark:bg-gray-600"},arrowIcon:"ml-2 h-4 w-4",inlineWrapper:"flex items-center",content:"py-1"},footer:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800",groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},fileInput:{base:"flex",field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},label:{base:"text-sm font-medium",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"},disabled:"opacity-50"},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{base:"flex",field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},helperText:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}},listGroup:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",item:{active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},base:"flex w-full cursor-pointer border-b border-gray-200 py-2 px-4 first:rounded-t-lg last:rounded-b-lg last:border-b-0 dark:border-gray-600",href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}},modal:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},rating:{base:"flex items-center",star:{sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"},filled:"text-yellow-400",empty:"text-gray-300 dark:text-gray-500"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},sidebar:{base:"h-full",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800",collapsed:{on:"w-16",off:"w-64"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"flex items-center justify-center rounded-full text-center font-medium leading-none text-blue-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},toast:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden",toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"}},table:{wrapper:"relative overflow-x-auto shadow-md sm:rounded-lg",base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",head:{base:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",cell:{base:"px-6 py-3"}},row:{hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"},cell:{base:"px-6 py-4"}},timeline:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"},item:{base:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},point:{base:{horizontal:"flex items-center",vertical:""},marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900",base:"h-3 w-3 text-blue-600 dark:text-blue-300"}},line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex"},content:{base:"mt-3 sm:pr-8",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white",body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"}}}},ThemeContext=reactExports.createContext({theme:theme$1});function useTheme(){return reactExports.useContext(ThemeContext)}const AccordionPanelContext=reactExports.createContext(void 0);function useAccordionContext(){const e=reactExports.useContext(AccordionPanelContext);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const AccordionContent=({children:e,className:t,theme:n={},...r})=>{const{isOpen:i}=useAccordionContext(),o=mergeDeep(useTheme().theme.accordion.content,n);return jsx("div",{className:classNames(o.base,t),"data-testid":"flowbite-accordion-content",hidden:!i,...r,children:e})},AccordionPanel=({children:e,...t})=>{const{alwaysOpen:n}=t,[r,i]=reactExports.useState(t.isOpen),o=n?{...t,isOpen:r,setOpen:()=>i(!r)}:t;return jsx(AccordionPanelContext.Provider,{value:o,children:e})},AccordionTitle=({as:e="h2",children:t,className:n,theme:r={},...i})=>{const{arrowIcon:o,flush:s,isOpen:a,setOpen:l}=useAccordionContext(),c=mergeDeep(useTheme().theme.accordion.title,r);return jsxs("button",{className:classNames(c.base,c.flush[s?"on":"off"],c.open[a?"on":"off"],n),onClick:()=>void 0!==l&&l(),type:"button",...i,children:[jsx(e,{className:c.heading,"data-testid":"flowbite-accordion-heading",children:t}),o&&jsx(o,{"aria-hidden":!0,className:classNames(c.arrow.base,c.arrow.open[a?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},AccordionComponent=({alwaysOpen:e=!1,arrowIcon:t=HiChevronDown,children:n,flush:r=!1,collapseAll:i=!1,className:o,theme:s={},...a})=>{const[l,c]=reactExports.useState(i?-1:0),u=reactExports.useMemo((()=>reactExports.Children.map(n,((n,i)=>reactExports.cloneElement(n,{alwaysOpen:e,arrowIcon:t,flush:r,isOpen:l===i,setOpen:()=>c(i)})))),[e,t,n,r,l]),h=mergeDeep(useTheme().theme.accordion.root,s);return jsx("div",{className:classNames(h.base,h.flush[r?"on":"off"],o),"data-testid":"flowbite-accordion",...a,children:u})};AccordionComponent.displayName="Accordion",AccordionPanel.displayName="Accordion.Panel",AccordionTitle.displayName="Accordion.Title",AccordionContent.displayName="Accordion.Content",Object.assign(AccordionComponent,{Panel:AccordionPanel,Title:AccordionTitle,Content:AccordionContent});const AvatarGroup=({children:e,className:t,theme:n={},...r})=>{const i=mergeDeep(useTheme().theme.avatarGroup.root,n);return jsx("div",{"data-testid":"avatar-group-element",className:classNames(i.base,t),...r,children:e})};AvatarGroup.displayName="Avatar.Group";const AvatarGroupCounter=({total:e,href:t,className:n,theme:r={}})=>{const i=mergeDeep(useTheme().theme.avatarGroupCounter.root,r);return jsxs("a",{className:classNames(i.base,n),href:t,children:["+",e]})};AvatarGroupCounter.displayName="Avatar.GroupCounter";const AvatarComponent=({alt:e="",bordered:t=!1,children:n,img:r,color:i="light",rounded:o=!1,size:s="md",stacked:a=!1,status:l,statusPosition:c="top-left",placeholderInitials:u="",className:h,theme:d={},...p})=>{const f=mergeDeep(useTheme().theme.avatar,d),m=classNames(t&&f.root.bordered,t&&f.root.color[i],o&&f.root.rounded,a&&f.root.stacked,f.img.on,f.root.size[s]),g={alt:e,className:classNames(m,f.img.on),"data-testid":"flowbite-avatar-img"};return jsxs("div",{className:classNames(f.root.base,h),"data-testid":"flowbite-avatar",...p,children:[jsxs("div",{className:"relative",children:[r?"string"==typeof r?jsx("img",{...g,src:r}):r(g):jsx("div",u?{className:classNames(f.img.off,f.initials.base,o&&f.root.rounded,a&&f.root.stacked,t&&f.root.bordered,t&&f.root.color[i]),"data-testid":"flowbite-avatar-initials-placeholder",children:jsx("span",{className:classNames(f.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:u})}:{className:classNames(m,f.img.off),"data-testid":"flowbite-avatar-img",children:jsx("svg",{className:f.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),l&&jsx("span",{"data-testid":"flowbite-avatar-status",className:classNames(f.status.base,f.status[l],f.root.statusPosition[c])})]}),n&&jsx("div",{children:n})]})};AvatarComponent.displayName="Avatar",Object.assign(AvatarComponent,{Group:AvatarGroup,Counter:AvatarGroupCounter});const Badge=({children:e,color:t="info",href:n,icon:r,size:i="xs",className:o,theme:s={},...a})=>{const l=mergeDeep(useTheme().theme.badge,s),c=()=>jsxs("span",{className:classNames(l.root.base,l.root.color[t],l.icon[r?"on":"off"],l.root.size[i],o),"data-testid":"flowbite-badge",...a,children:[r&&jsx(r,{"aria-hidden":!0,className:l.icon.size[i],"data-testid":"flowbite-badge-icon"}),e&&jsx("span",{children:e})]});return n?jsx("a",{className:l.root.href,href:n,children:jsx(c,{})}):jsx(c,{})},BreadcrumbItem=reactExports.forwardRef((({children:e,className:t,href:n,icon:r,theme:i={},...o},s)=>{const a=void 0!==n,l=a?"a":"span",c=mergeDeep(useTheme().theme.breadcrumb.item,i);return jsxs("li",{className:classNames(c.base,t),...o,children:[jsx(HiOutlineChevronRight,{"aria-hidden":!0,className:c.chevron,"data-testid":"flowbite-breadcrumb-separator"}),jsxs(l,{ref:s,className:c.href[a?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:n,children:[r&&jsx(r,{"aria-hidden":!0,className:c.icon}),e]})]})}));BreadcrumbItem.displayName="Breadcrumb.Item";const BreadcrumbComponent=({children:e,className:t,theme:n={},...r})=>{const i=mergeDeep(useTheme().theme.breadcrumb.root,n);return jsx("nav",{"aria-label":"Breadcrumb",className:classNames(i.base,t),...r,children:jsx("ol",{className:i.list,children:e})})};BreadcrumbComponent.displayName="Breadcrumb",Object.assign(BreadcrumbComponent,{Item:BreadcrumbItem});const ButtonGroup=({children:e,outline:t,pill:n,className:r,...i})=>{const o=reactExports.useMemo((()=>reactExports.Children.map(e,((r,i)=>reactExports.cloneElement(r,{outline:t,pill:n,positionInGroup:0===i?"start":i===e.length-1?"end":"middle"})))),[e,t,n]),s=useTheme().theme.buttonGroup;return jsx("div",{className:classNames(s.base,r),role:"group",...i,children:o})};ButtonGroup.displayName="Button.Group";const ButtonComponent=reactExports.forwardRef((({children:e,color:t="info",disabled:n=!1,gradientDuoTone:r,gradientMonochrome:i,href:o,label:s,outline:a=!1,pill:l=!1,fullSized:c,positionInGroup:u="none",size:h="md",className:d,...p},f)=>{const m=void 0!==o,{buttonGroup:g,button:_}=useTheme().theme,b=p;return jsx(m?"a":"button",{className:classNames(n&&_.disabled,!r&&!i&&_.color[t],r&&!i&&_.gradientDuoTone[r],!r&&i&&_.gradient[i],g.position[u],a&&(_.outline.color[t]??_.outline.color.default),_.base,_.pill[l?"on":"off"],c&&_.fullSized,d),disabled:n,href:o,type:m?void 0:"button",ref:f,...b,children:jsx("span",{className:classNames(_.inner.base,_.inner.position[u],_.outline[a?"on":"off"],_.outline.pill[a&&l?"on":"off"],_.size[h],a&&!_.outline.color[t]&&_.inner.outline),children:jsxs(Fragment,{children:[void 0!==e&&e,void 0!==s&&jsx("span",{className:_.label,"data-testid":"flowbite-button-label",children:s})]})})})}));ButtonComponent.displayName="Button";const Button=Object.assign(ButtonComponent,{Group:ButtonGroup});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n$3=function(e,t){return(n$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},o$3,r$3,i$5=(t2=r$3={path:o$3,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r$3.path)}},r$3.exports,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)&&i.length){var s=t.apply(null,i);s&&n.push(s)}else if("object"===o)for(var a in i)e.call(i,a)&&i[a]&&n.push(a)}}return n.join(" ")}t2.exports?(t.default=t,t2.exports=t):window.classNames=t}(),r$3.exports),t2;function s$2(e,t,n){var r,i,o,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}s$2.debounce=s$2;var l$5=s$2;!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".indiana-scroll-container {\n  overflow: auto; }\n  .indiana-scroll-container--dragging {\n    scroll-behavior: auto !important; }\n    .indiana-scroll-container--dragging > * {\n      pointer-events: none;\n      cursor: -webkit-grab;\n      cursor: grab; }\n  .indiana-scroll-container--hide-scrollbars {\n    overflow: hidden;\n    overflow: -moz-scrollbars-none;\n    -ms-overflow-style: none;\n    scrollbar-width: none; }\n    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {\n      display: none !important;\n      height: 0 !important;\n      width: 0 !important;\n      background: transparent !important;\n      -webkit-appearance: none !important; }\n  .indiana-scroll-container--native-scroll {\n    overflow: auto; }\n\n.indiana-dragging {\n  cursor: -webkit-grab;\n  cursor: grab; }\n");var a$2,c$5=(a$2="indiana-scroll-container",function(e,t){if(!e)return a$2;var n;"string"==typeof e?n=e:t=e;var r=a$2;return n&&(r+="__"+n),r+(t?Object.keys(t).reduce((function(e,n){var i=t[n];return i&&(e+=" "+("boolean"==typeof i?r+"--"+n:r+"--"+n+"_"+i)),e}),""):"")});!function(e){function t(t){var n=e.call(this,t)||this;return n.onEndScroll=function(){n.scrolling=!1,!n.pressed&&n.started&&n.processEnd()},n.onScroll=function(e){var t=n.container.current;t.scrollLeft===n.scrollLeft&&t.scrollTop===n.scrollTop||(n.scrolling=!0,n.processScroll(e),n.onEndScroll())},n.onTouchStart=function(e){var t=n.props.nativeMobileScroll;if(n.isDraggable(e.target))if(n.internal=!0,t&&n.scrolling)n.pressed=!0;else{var r=e.touches[0];n.processClick(e,r.clientX,r.clientY),!t&&n.props.stopPropagation&&e.stopPropagation()}},n.onTouchEnd=function(e){var t=n.props.nativeMobileScroll;n.pressed&&(!n.started||n.scrolling&&t?n.pressed=!1:n.processEnd(),n.forceUpdate())},n.onTouchMove=function(e){var t=n.props.nativeMobileScroll;if(n.pressed&&(!t||!n.isMobile)){var r=e.touches[0];r&&n.processMove(e,r.clientX,r.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()}},n.onMouseDown=function(e){n.isDraggable(e.target)&&n.isScrollable()&&(n.internal=!0,-1!==n.props.buttons.indexOf(e.button)&&(n.processClick(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()))},n.onMouseMove=function(e){n.pressed&&(n.processMove(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.onMouseUp=function(e){n.pressed&&(n.started?n.processEnd():(n.internal=!1,n.pressed=!1,n.forceUpdate(),n.props.onClick&&n.props.onClick(e)),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.container=React.createRef(),n.onEndScroll=l$5(n.onEndScroll,300),n.scrolling=!1,n.started=!1,n.pressed=!1,n.internal=!1,n.getRef=n.getRef.bind(n),n}(function(e,t){function n(){this.constructor=e}n$3(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.componentDidMount=function(){var e=this.props.nativeMobileScroll,t=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},t.prototype.isDraggable=function(e){var t=this.props.ignoreElements;if(t){var n=e.closest(t);return null===n||n.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)},t.prototype.processClick=function(e,t,n){var r=this.container.current;this.scrollLeft=r.scrollLeft,this.scrollTop=r.scrollTop,this.clientX=t,this.clientY=n,this.pressed=!0},t.prototype.processStart=function(e){void 0===e&&(e=!0);var t=this.props.onStartScroll;this.started=!0,e&&document.body.classList.add("indiana-dragging"),t&&t({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(e){if(this.started){var t=this.props.onScroll;t&&t({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(e,t,n){var r=this.props,i=r.horizontal,o=r.vertical,s=r.activationDistance,a=r.onScroll,l=this.container.current;this.started?(i&&(l.scrollLeft-=t-this.clientX),o&&(l.scrollTop-=n-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=n,this.scrollLeft=l.scrollLeft,this.scrollTop=l.scrollTop):(i&&Math.abs(t-this.clientX)>s||o&&Math.abs(n-this.clientY)>s)&&(this.clientX=t,this.clientY=n,this.processStart())},t.prototype.processEnd=function(){var e=this.props.onEndScroll;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(e){[this.container,this.props.innerRef].forEach((function(t){t&&("function"==typeof t?t(e):t.current=e)}))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.draggingClassName,r=e.className,i=e.style,o=e.hideScrollbars,s=e.component;return React.createElement(s,{className:i$5(r,this.pressed&&n,c$5({dragging:this.pressed,"hide-scrollbars":o,"native-scroll":this.isMobile})),style:i,ref:this.getRef,onScroll:this.onScroll},t)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]}}(reactExports.PureComponent);const Checkbox=reactExports.forwardRef((({theme:e={},className:t,...n},r)=>{const i=mergeDeep(useTheme().theme.checkbox,e);return jsx("input",{ref:r,className:classNames(i.root.base,t),type:"checkbox",...n})}));function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function t$1(e){return e.split("-")[1]}function e(e){return"y"===e?"height":"width"}function n$2(e){return e.split("-")[0]}function o$2(e){return["top","bottom"].includes(n$2(e))?"x":"y"}function r$2(t,n,r){let{reference:i,floating:o}=t;const s=i.x+i.width/2-o.width/2,a=i.y+i.height/2-o.height/2,l=o$2(n),c=e(l),u=i[c]/2-o[c]/2,h="x"===l;let d;switch(n$2(n)){case"top":d={x:s,y:i.y-o.height};break;case"bottom":d={x:s,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:a};break;case"left":d={x:i.x-o.width,y:a};break;default:d={x:i.x,y:i.y}}switch(t$1(n)){case"start":d[l]-=u*(r&&h?-1:1);break;case"end":d[l]+=u*(r&&h?-1:1)}return d}Checkbox.displayName="Checkbox";const i$4=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=r$2(c,r,l),d=r,p={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:_,data:b,reset:v}=await o({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,h=null!=_?_:h,p={...p,[n]:{...p[n],...b}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):v.rects),({x:u,y:h}=r$2(c,d,l))),m=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:p}};function a$1(e){return"number"!=typeof e?(t=e,{top:0,right:0,bottom:0,left:0,...t}):{top:e,right:e,bottom:e,left:e};var t}function l$4(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function s$1(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=t,f=a$1(p),m=a[d?"floating"===h?"reference":"floating":h],g=l$4(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_="floating"===h?{...s.floating,x:r,y:i}:s.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),v=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},y=l$4(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:b,strategy:l}):_);return{top:(g.top-y.top+f.top)/v.y,bottom:(y.bottom-g.bottom+f.bottom)/v.y,left:(g.left-y.left+f.left)/v.x,right:(y.right-g.right+f.right)/v.x}}const c$4=Math.min,f$4=Math.max;function u$4(e,t,n){return f$4(e,c$4(t,n))}const m$3=t=>({name:"arrow",options:t,async fn(n){const{element:r,padding:i=0}=t||{},{x:o,y:s,placement:a,rects:l,platform:c}=n;if(null==r)return{};const u=a$1(i),h={x:o,y:s},d=o$2(a),p=e(d),f=await c.getDimensions(r),m="y"===d?"top":"left",g="y"===d?"bottom":"right",_=l.reference[p]+l.reference[d]-h[d]-l.floating[p],b=h[d]-l.reference[d],v=await(null==c.getOffsetParent?void 0:c.getOffsetParent(r));let y=v?"y"===d?v.clientHeight||0:v.clientWidth||0:0;0===y&&(y=l.floating[p]);const O=_/2-b/2,S=u[m],T=y-f[p]-u[g],x=y/2-f[p]/2+O,E=u$4(S,x,T),w=null!=t$1(a)&&x!=E&&l.reference[p]/2-(x<S?u[m]:u[g])-f[p]/2<0;return{[d]:h[d]-(w?x<S?S-x:T-x:0),data:{[d]:E,centerOffset:x-E}}}}),g$2=["top","right","bottom","left"],d$4=g$2.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),p$3={left:"right",right:"left",bottom:"top",top:"bottom"};function h$4(e){return e.replace(/left|right|bottom|top/g,(e=>p$3[e]))}function y$4(t,n,r){void 0===r&&(r=!1);const i=t$1(t),o=o$2(t),s=e(o);let a="x"===o?i===(r?"end":"start")?"right":"left":"start"===i?"bottom":"top";return n.reference[s]>n.floating[s]&&(a=h$4(a)),{main:a,cross:h$4(a)}}const x$3={start:"end",end:"start"};function w$2(e){return e.replace(/start|end/g,(e=>x$3[e]))}const v$3=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,i;const{rects:o,middlewareData:s,placement:a,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:h,allowedPlacements:d=d$4,autoAlignment:p=!0,...f}=e,m=void 0!==h||d===d$4?(y=p,O=d,((v=h||null)?[...O.filter((e=>t$1(e)===v)),...O.filter((e=>t$1(e)!==v))]:O.filter((e=>n$2(e)===e))).filter((e=>!v||t$1(e)===v||!!y&&w$2(e)!==e))):d,g=await s$1(t,f),_=(null==(n=s.autoPlacement)?void 0:n.index)||0,b=m[_];var v,y,O;if(null==b)return{};const{main:S,cross:T}=y$4(b,o,await(null==l.isRTL?void 0:l.isRTL(c.floating)));if(a!==b)return{reset:{placement:m[0]}};const x=[g[n$2(b)],g[S],g[T]],E=[...(null==(r=s.autoPlacement)?void 0:r.overflows)||[],{placement:b,overflows:x}],w=m[_+1];if(w)return{data:{index:_+1,overflows:E},reset:{placement:w}};const C=E.map((e=>{const t=t$1(e.placement);return[e.placement,t&&u?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),A=(null==(i=C.filter((e=>e[2].slice(0,t$1(e[0])?2:3).every((e=>e<=0))))[0])?void 0:i[0])||C[0][0];return A!==a?{data:{index:_+1,overflows:E},reset:{placement:A}}:{}}}},b$4=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...m}=e,g=n$2(r),_=n$2(s)===s,b=await(null==a.isRTL?void 0:a.isRTL(l.floating)),v=h||(_||!f?[h$4(s)]:function(e){const t=h$4(e);return[w$2(e),t,w$2(t)]}(s));h||"none"===p||v.push(...function(e,t,n,r){const i=t$1(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(n$2(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(w$2)))),o}(s,f,p,b));const y=[s,...v],O=await s$1(t,m),S=[];let T=(null==(n=i.flip)?void 0:n.overflows)||[];if(c&&S.push(O[g]),u){const{main:e,cross:t}=y$4(r,o,b);S.push(O[e],O[t])}if(T=[...T,{placement:r,overflows:S}],!S.every((e=>e<=0))){var x,E;const e=((null==(x=i.flip)?void 0:x.index)||0)+1,t=y[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(E=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:E.placement;if(!n)switch(d){case"bestFit":{var w;const e=null==(w=T.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:w[0];e&&(n=e);break}case"initialPlacement":n=s}if(r!==n)return{reset:{placement:n}}}return{}}}},O$2=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=n$2(n),a=t$1(n),l="x"===o$2(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,h="function"==typeof t?t(e):t;let{mainAxis:d,crossAxis:p,alignmentAxis:f}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function D$3(e){return"x"===e?"y":"x"}const E$4=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=e,c={x:n,y:r},u=await s$1(t,l),h=o$2(n$2(i)),d=D$3(h);let p=c[h],f=c[d];if(o){const e="y"===h?"bottom":"right";p=u$4(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";f=u$4(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function n$1(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function o$1(e){return n$1(e).getComputedStyle(e)}const i$3=Math.min,r$1=Math.max,l$3=Math.round;function c$3(e){const t=o$1(e);let n=parseFloat(t.width),r=parseFloat(t.height);const i=e.offsetWidth,o=e.offsetHeight,s=l$3(n)!==i||l$3(r)!==o;return s&&(n=i,r=o),{width:n,height:r,fallback:s}}function s(e){return h$3(e)?(e.nodeName||"").toLowerCase():""}let f$3;function u$3(){if(f$3)return f$3;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(f$3=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),f$3):navigator.userAgent}function a(e){return e instanceof n$1(e).HTMLElement}function d$3(e){return e instanceof n$1(e).Element}function h$3(e){return e instanceof n$1(e).Node}function p$2(e){return"undefined"!=typeof ShadowRoot&&(e instanceof n$1(e).ShadowRoot||e instanceof ShadowRoot)}function g$1(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=o$1(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function m$2(e){return["table","td","th"].includes(s(e))}function y$3(e){const t=/firefox/i.test(u$3()),n=o$1(e),r=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!r&&"none"!==r||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((e=>n.willChange.includes(e)))||["paint","layout","strict","content"].some((e=>{const t=n.contain;return null!=t&&t.includes(e)}))}function x$2(){return/^((?!chrome|android).)*safari/i.test(u$3())}function w$1(e){return["html","body","#document"].includes(s(e))}function v$2(e){return d$3(e)?e:e.contextElement}const b$3={x:1,y:1};function L$1(e){const t=v$2(e);if(!a(t))return b$3;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=c$3(t);let s=(o?l$3(n.width):n.width)/r,l=(o?l$3(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}function E$3(e,t,n,r){var i,o;void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=v$2(e);let l=b$3;t&&(r?d$3(r)&&(l=L$1(r)):l=L$1(e));const c=a?n$1(a):window,u=x$2()&&n;let h=(s.left+(u&&(null==(i=c.visualViewport)?void 0:i.offsetLeft)||0))/l.x,d=(s.top+(u&&(null==(o=c.visualViewport)?void 0:o.offsetTop)||0))/l.y,p=s.width/l.x,f=s.height/l.y;if(a){const e=n$1(a),t=r&&d$3(r)?n$1(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=L$1(n),t=n.getBoundingClientRect(),r=getComputedStyle(n);t.x+=(n.clientLeft+parseFloat(r.paddingLeft))*e.x,t.y+=(n.clientTop+parseFloat(r.paddingTop))*e.y,h*=e.x,d*=e.y,p*=e.x,f*=e.y,h+=t.x,d+=t.y,n=n$1(n).frameElement}}return{width:p,height:f,top:d,right:h+p,bottom:d+f,left:h,x:h,y:d}}function R$1(e){return((h$3(e)?e.ownerDocument:e.document)||window.document).documentElement}function T$1(e){return d$3(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function C$2(e){return E$3(R$1(e)).left+T$1(e).scrollLeft}function F$1(e){if("html"===s(e))return e;const t=e.assignedSlot||e.parentNode||p$2(e)&&e.host||R$1(e);return p$2(t)?t.host:t}function W$2(e){const t=F$1(e);return w$1(t)?t.ownerDocument.body:a(t)&&g$1(t)?t:W$2(t)}function D$2(e,t){var n;void 0===t&&(t=[]);const r=W$2(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=n$1(r);return i?t.concat(o,o.visualViewport||[],g$1(r)?r:[]):t.concat(r,D$2(r))}function S$1(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=n$1(e),r=R$1(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=x$2();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=R$1(e),n=T$1(e),r=e.ownerDocument.body,i=r$1(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=r$1(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+C$2(e);const a=-n.scrollTop;return"rtl"===o$1(r).direction&&(s+=r$1(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(R$1(e));else if(d$3(t))r=function(e,t){const n=E$3(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=a(e)?L$1(e):{x:1,y:1};return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n={...t};if(x$2()){var i,o;const t=n$1(e);n.x-=(null==(i=t.visualViewport)?void 0:i.offsetLeft)||0,n.y-=(null==(o=t.visualViewport)?void 0:o.offsetTop)||0}r=n}return l$4(r)}function A$1(e,t){return a(e)&&"fixed"!==o$1(e).position?t?t(e):e.offsetParent:null}function H$2(e,t){const n=n$1(e);let r=A$1(e,t);for(;r&&m$2(r)&&"static"===o$1(r).position;)r=A$1(r,t);return r&&("html"===s(r)||"body"===s(r)&&"static"===o$1(r).position&&!y$3(r))?n:r||function(e){let t=F$1(e);for(;a(t)&&!w$1(t);){if(y$3(t))return t;t=F$1(t)}return null}(e)||n}function V$2(e,t,n){const r=a(t),i=R$1(t),o=E$3(e,!0,"fixed"===n,t);let l={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==s(t)||g$1(i))&&(l=T$1(t)),a(t)){const e=E$3(t,!0);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&(c.x=C$2(i));return{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}const O$1={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=D$2(e).filter((e=>d$3(e)&&"body"!==s(e))),i=null;const o="fixed"===o$1(e).position;let a=o?F$1(e):e;for(;d$3(a)&&!w$1(a);){const e=o$1(a),t=y$3(a);"fixed"===e.position?i=null:(o?t||i:t||"static"!==e.position||!i||!["absolute","fixed"].includes(i.position))?i=e:r=r.filter((e=>e!==a)),a=F$1(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],l=o.reduce(((e,n)=>{const r=S$1(t,n,i);return e.top=r$1(r.top,e.top),e.right=i$3(r.right,e.right),e.bottom=i$3(r.bottom,e.bottom),e.left=r$1(r.left,e.left),e}),S$1(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=a(n),o=R$1(n);if(n===o)return t;let l={scrollLeft:0,scrollTop:0},c={x:1,y:1};const u={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==s(n)||g$1(o))&&(l=T$1(n)),a(n))){const e=E$3(n);c=L$1(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}},isElement:d$3,getDimensions:function(e){return a(e)?c$3(e):e.getBoundingClientRect()},getOffsetParent:H$2,getDocumentElement:R$1,getScale:L$1,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||H$2,o=this.getDimensions;return{reference:V$2(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===o$1(e).direction};function P$1(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:a=!1}=r,l=i&&!a,c=l||o?[...d$3(e)?D$2(e):e.contextElement?D$2(e.contextElement):[],...D$2(t)]:[];c.forEach((e=>{l&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));let u,h=null;if(s){let r=!0;h=new ResizeObserver((()=>{r||n(),r=!1})),d$3(e)&&!a&&h.observe(e),d$3(e)||!e.contextElement||a||h.observe(e.contextElement),h.observe(t)}let d=a?E$3(e):null;return a&&function t(){const r=E$3(e);!d||r.x===d.x&&r.y===d.y&&r.width===d.width&&r.height===d.height||n(),d=r,u=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach((e=>{l&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==(e=h)||e.disconnect(),h=null,a&&cancelAnimationFrame(u)}}const z$2=(e,t,n)=>{const r=new Map,i={platform:O$1,...n},o={...i.platform,_c:r};return i$4(e,t,{...i,platform:o})},arrow=e=>{const{element:t,padding:n}=e;return{name:"arrow",options:e,fn:e=>function r(e){return Object.prototype.hasOwnProperty.call(e,"current")}(t)?null!=t.current?m$3({element:t.current,padding:n}).fn(e):{}:t?m$3({element:t,padding:n}).fn(e):{}}};var index$2="undefined"!=typeof document?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!deepEqual(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!deepEqual(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function useLatestRef$1(e){const t=reactExports.useRef(e);return index$2((()=>{t.current=e})),t}function useFloating$1(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:o,open:s}=e,[a,l]=reactExports.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[c,u]=reactExports.useState(r);deepEqual(c,r)||u(r);const h=reactExports.useRef(null),d=reactExports.useRef(null),p=reactExports.useRef(a),f=useLatestRef$1(o),m=useLatestRef$1(i),[g,_]=reactExports.useState(null),[b,v]=reactExports.useState(null),y=reactExports.useCallback((e=>{h.current!==e&&(h.current=e,_(e))}),[]),O=reactExports.useCallback((e=>{d.current!==e&&(d.current=e,v(e))}),[]),S=reactExports.useCallback((()=>{if(!h.current||!d.current)return;const e={placement:t,strategy:n,middleware:c};m.current&&(e.platform=m.current),z$2(h.current,d.current,e).then((e=>{const t={...e,isPositioned:!0};T.current&&!deepEqual(p.current,t)&&(p.current=t,reactDomExports.flushSync((()=>{l(t)})))}))}),[c,t,n,m]);index$2((()=>{!1===s&&p.current.isPositioned&&(p.current.isPositioned=!1,l((e=>({...e,isPositioned:!1}))))}),[s]);const T=reactExports.useRef(!1);index$2((()=>(T.current=!0,()=>{T.current=!1})),[]),index$2((()=>{if(g&&b){if(f.current)return f.current(g,b,S);S()}}),[g,b,S,f]);const x=reactExports.useMemo((()=>({reference:h,floating:d,setReference:y,setFloating:O})),[y,O]),E=reactExports.useMemo((()=>({reference:g,floating:b})),[g,b]);return reactExports.useMemo((()=>({...a,update:S,refs:x,elements:E,reference:y,floating:O})),[a,S,x,E,y,O])}var index$1="undefined"!=typeof document?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[e,t]=reactExports.useState((()=>serverHandoffComplete?genId():void 0));return index$1((()=>{null==e&&t(genId())}),[]),reactExports.useEffect((()=>{serverHandoffComplete||(serverHandoffComplete=!0)}),[]),e}const useReactId=React$1["useId".toString()],useId=useReactId||useFloatingId;function createPubSub(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter((e=>e!==n)))}}}const FloatingTreeContext=reactExports.createContext(null),useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function getDocument(e){return(null==e?void 0:e.ownerDocument)||document}function getWindow(e){return getDocument(e).defaultView||window}function isElement(e){return!!e&&e instanceof getWindow(e).Element}function isHTMLElement(e){return!!e&&e instanceof getWindow(e).HTMLElement}function isShadowRoot(e){if("undefined"==typeof ShadowRoot)return!1;return e instanceof getWindow(e).ShadowRoot||e instanceof ShadowRoot}function isSafari(){return/apple/i.test(navigator.vendor)}function isMouseLikePointerType(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function contains$1(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&isShadowRoot(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}function getChildren$1(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}))||[],r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))}))||[],n=n.concat(r);return n}function getTarget(e){return"composedPath"in e?e.composedPath()[0]:e.target}function isPointInPolygon(e,t){const[n,r]=e;let i=!1;const o=t.length;for(let s=0,a=o-1;s<o;a=s++){const[e,o]=t[s]||[0,0],[l,c]=t[a]||[0,0];o>=r!=c>=r&&n<=(l-e)*(r-o)/(c-o)+e&&(i=!i)}return i}const svgNs="http://www.w3.org/2000/svg";function createPolygonElement(e,t,n){var r,i;const o=isSafari(),s=t.defaultView||window,a=t.createElementNS(svgNs,"svg");Object.assign(a.style,{position:"fixed",left:(o&&(null==(r=s.visualViewport)?void 0:r.offsetLeft)||0)+"px",top:(o&&(null==(i=s.visualViewport)?void 0:i.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),a.setAttribute("data-type",n?"rect":"triangle");const l=t.createElementNS(svgNs,"polygon");return l.setAttribute("points",e.map((e=>{let[t,n]=e;return t+","+n})).join(" ")),Object.assign(l.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),a.appendChild(l),a}function destroyPolygon(e){e.current&&(e.current.remove(),e.current=null)}function safePolygon(e){let t,{restMs:n=0,buffer:r=.5,blockPointerEvents:i=!0}=void 0===e?{}:e,o=!1,s=!1;return e=>{let{x:a,y:l,placement:c,refs:u,onClose:h,nodeId:d,tree:p,polygonRef:f}=e;return function e(m){var g;function _(){destroyPolygon(f),clearTimeout(t),h()}if(clearTimeout(t),!u.domReference.current||!u.floating.current||null==c||null==a||null==l)return;const{clientX:b,clientY:v}=m,y=getTarget(m),O="mouseleave"===m.type,S=contains$1(u.domReference.current,y),T=contains$1(u.floating.current,y);if(!O&&S)return void destroyPolygon(f);if(!O&&(S||o&&contains$1(f.current,y)))return;if(O&&isElement(m.relatedTarget)&&contains$1(u.floating.current,m.relatedTarget))return;if(p&&getChildren$1(p.nodesRef.current,d).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if(T&&(s=!0),T&&!O&&"rect"!==(null==(g=f.current)?void 0:g.dataset.type))return void destroyPolygon(f);const x=u.domReference.current.getBoundingClientRect(),E=u.floating.current.getBoundingClientRect(),w=c.split("-")[0],C=a>E.right-E.width/2,A=l>E.bottom-E.height/2;if("top"===w&&l>=x.bottom-1||"bottom"===w&&l<=x.top+1||"left"===w&&a>=x.right-1||"right"===w&&a<=x.left+1)return _();let k=[];switch(w){case"top":k=[[E.left,x.top+1],[E.left,E.bottom-1],[E.right,E.bottom-1],[E.right,x.top+1]],o=b>=E.left&&b<=E.right&&v>=E.top&&v<=x.top+1;break;case"bottom":k=[[E.left,E.top+1],[E.left,x.bottom-1],[E.right,x.bottom-1],[E.right,E.top+1]],o=b>=E.left&&b<=E.right&&v>=x.bottom-1&&v<=E.bottom;break;case"left":k=[[E.right-1,E.bottom],[E.right-1,E.top],[x.left+1,E.top],[x.left+1,E.bottom]],o=b>=E.left&&b<=x.left+1&&v>=E.top&&v<=E.bottom;break;case"right":k=[[x.right-1,E.bottom],[x.right-1,E.top],[E.left+1,E.top],[E.left+1,E.bottom]],o=b>=x.right-1&&b<=E.right&&v>=E.top&&v<=E.bottom}const R=o?k:function I(e){let[t,n]=e;const i=E.width>x.width,o=E.height>x.height;switch(w){case"top":return[[i?t+r/2:C?t+4*r:t-4*r,n+r+1],[i?t-r/2:C?t+4*r:t-4*r,n+r+1],...[[E.left,C||i?E.bottom-r:E.top],[E.right,C?i?E.bottom-r:E.top:E.bottom-r]]];case"bottom":return[[i?t+r/2:C?t+4*r:t-4*r,n-r],[i?t-r/2:C?t+4*r:t-4*r,n-r],...[[E.left,C||i?E.top+r:E.bottom],[E.right,C?i?E.top+r:E.bottom:E.top+r]]];case"left":{const e=[t+r+1,o?n+r/2:A?n+4*r:n-4*r],i=[t+r+1,o?n-r/2:A?n+4*r:n-4*r];return[...[[A||o?E.right-r:E.left,E.top],[A?o?E.right-r:E.left:E.right-r,E.bottom]],e,i]}case"right":return[[t-r,o?n+r/2:A?n+4*r:n-4*r],[t-r,o?n-r/2:A?n+4*r:n-4*r],...[[A||o?E.left+r:E.right,E.top],[A?o?E.left+r:E.right:E.left+r,E.bottom]]]}}([a,l]);if(!f.current&&i&&O){const e=getDocument(u.floating.current);f.current=createPolygonElement(R,e,o),e.body.appendChild(f.current)}o||(isPointInPolygon([b,v],R)?n&&!s&&(t=setTimeout(h,n)):_())}}}function useLatestRef(e){const t=reactExports.useRef(e);return index$1((()=>{t.current=e})),t}function getDelay(e,t,n){return n&&!isMouseLikePointerType(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}const useHover=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:o=!1,restMs:s=0,move:a=!0}=void 0===t?{}:t;const{open:l,onOpenChange:c,dataRef:u,events:h,refs:d,_:p}=e,f=useFloatingTree(),m=useLatestRef(i),g=useLatestRef(r),_=reactExports.useRef(),b=reactExports.useRef(),v=reactExports.useRef(),y=reactExports.useRef(),O=reactExports.useRef(!0),S=reactExports.useRef(null),T=reactExports.useCallback((()=>{var e;const t=null==(e=u.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[u]);reactExports.useEffect((()=>{if(n)return h.on("dismiss",e),()=>{h.off("dismiss",e)};function e(){clearTimeout(b.current),clearTimeout(y.current),O.current=!0}}),[n,h,d]),reactExports.useEffect((()=>{if(!n||!m.current||!l)return;function e(){T()&&c(!1)}const t=getDocument(d.floating.current).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[d,l,c,n,m,u,T]);const x=reactExports.useCallback((function(e){void 0===e&&(e=!0);const t=getDelay(g.current,"close",_.current);t&&!v.current?(clearTimeout(b.current),b.current=setTimeout((()=>c(!1)),t)):e&&(clearTimeout(b.current),c(!1))}),[g,c]),E=reactExports.useCallback((()=>{v.current&&(getDocument(d.floating.current).removeEventListener("mousemove",v.current),v.current=void 0)}),[d]);return reactExports.useEffect((()=>{if(!n)return;function t(){return!!u.current.openEvent&&["click","mousedown"].includes(u.current.openEvent.type)}function r(e){if(clearTimeout(b.current),O.current=!1,o&&!isMouseLikePointerType(_.current)||s>0&&0===getDelay(g.current,"open"))return;u.current.openEvent=e;const t=getDelay(g.current,"open",_.current);t?b.current=setTimeout((()=>{c(!0)}),t):c(!0)}function i(n){if(t())return;const r=getDocument(d.floating.current);if(clearTimeout(y.current),m.current)return clearTimeout(b.current),v.current&&r.removeEventListener("mousemove",v.current),v.current=m.current({...e,tree:f,polygonRef:S,x:n.clientX,y:n.clientY,onClose(){E(),x()}}),void r.addEventListener("mousemove",v.current);x()}function h(n){t()||null==m.current||m.current({...e,tree:f,polygonRef:S,x:n.clientX,y:n.clientY,onClose(){E(),x()}})(n)}const p=d.floating.current,T=d.domReference.current;return isElement(T)?(l&&T.addEventListener("mouseleave",h),null==p||p.addEventListener("mouseleave",h),a&&T.addEventListener("mousemove",r,{once:!0}),T.addEventListener("mouseenter",r),T.addEventListener("mouseleave",i),()=>{l&&T.removeEventListener("mouseleave",h),null==p||p.removeEventListener("mouseleave",h),a&&T.removeEventListener("mousemove",r),T.removeEventListener("mouseenter",r),T.removeEventListener("mouseleave",i)}):void 0}),[p.domReference,n,e,o,s,a,x,E,c,l,f,d,g,m,u]),index$1((()=>{l||(_.current=void 0,E(),destroyPolygon(S))}),[l,E]),reactExports.useEffect((()=>()=>{E(),clearTimeout(b.current),clearTimeout(y.current),destroyPolygon(S)}),[n,E]),reactExports.useMemo((()=>{if(!n)return{};function e(e){_.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(){l||0===s||(clearTimeout(y.current),y.current=setTimeout((()=>{O.current||c(!0)}),s))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){h.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),x(!1)}}}}),[h,n,s,l,c,x])};function activeElement$1(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(r=n.shadowRoot)?void 0:r.activeElement);){var n,r;t=t.shadowRoot.activeElement}return t}const TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function isTypeableElement(e){return isHTMLElement(e)&&e.matches(TYPEABLE_SELECTOR)}const useInsertionEffect=React$1["useInsertionEffect".toString()],useSafeInsertionEffect=useInsertionEffect||(e=>e());function useEvent(e){const t=reactExports.useRef((()=>{}));return useSafeInsertionEffect((()=>{t.current=e})),reactExports.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function isButtonTarget(e){return isHTMLElement(e.target)&&"BUTTON"===e.target.tagName}function isSpaceIgnored(e){return isTypeableElement(e)}const useClick=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:o}=e,{enabled:s=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=void 0===t?{}:t;const h=reactExports.useRef();return reactExports.useMemo((()=>s?{reference:{onPointerDown(e){h.current=e.pointerType},onMouseDown(e){0===e.button&&(isMouseLikePointerType(h.current,!0)&&c||"click"!==a&&(n?!l||i.current.openEvent&&"mousedown"!==i.current.openEvent.type||r(!1):(e.preventDefault(),r(!0)),i.current.openEvent=e.nativeEvent))},onClick(e){"mousedown"===a&&h.current?h.current=void 0:isMouseLikePointerType(h.current,!0)&&c||(n?!l||i.current.openEvent&&"click"!==i.current.openEvent.type||r(!1):r(!0),i.current.openEvent=e.nativeEvent)},onKeyDown(e){h.current=void 0,u&&(isButtonTarget(e)||(" "!==e.key||isSpaceIgnored(o.domReference.current)||e.preventDefault(),"Enter"===e.key&&(n?l&&r(!1):r(!0))))},onKeyUp(e){u&&(isButtonTarget(e)||isSpaceIgnored(o.domReference.current)||" "===e.key&&(n?l&&r(!1):r(!0)))}}}:{}),[s,i,a,c,u,o,l,n,r])};function isEventTargetWithin(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}const useFocus=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:o,events:s}=e,{enabled:a=!0,keyboardOnly:l=!0}=void 0===t?{}:t;const c=reactExports.useRef(""),u=reactExports.useRef(!1),h=reactExports.useRef();return reactExports.useEffect((()=>{if(!a)return;const e=getDocument(o.floating.current).defaultView||window;function t(){!n&&isHTMLElement(o.domReference.current)&&o.domReference.current===activeElement$1(getDocument(o.domReference.current))&&(u.current=!0)}return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}}),[o,n,a]),reactExports.useEffect((()=>{if(a)return s.on("dismiss",e),()=>{s.off("dismiss",e)};function e(e){"referencePress"!==e.type&&"escapeKey"!==e.type||(u.current=!0)}}),[s,a]),reactExports.useEffect((()=>()=>{clearTimeout(h.current)}),[]),reactExports.useMemo((()=>a?{reference:{onPointerDown(e){let{pointerType:t}=e;c.current=t,u.current=!(!t||!l)},onMouseLeave(){u.current=!1},onFocus(e){var t;u.current||"focus"===e.type&&"mousedown"===(null==(t=i.current.openEvent)?void 0:t.type)&&i.current.openEvent&&isEventTargetWithin(i.current.openEvent,o.domReference.current)||(i.current.openEvent=e.nativeEvent,r(!0))},onBlur(e){u.current=!1;const t=e.relatedTarget,n=isElement(t)&&t.hasAttribute("data-floating-ui-focus-guard");h.current=setTimeout((()=>{contains$1(o.floating.current,t)||contains$1(o.domReference.current,t)||n||r(!1)}))}}}:{}),[a,l,o,i,r])},useRole=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=void 0===t?{}:t;const o=useId(),s=useId();return reactExports.useMemo((()=>{const e={id:o,role:i};return r?"tooltip"===i?{reference:{"aria-describedby":n?o:void 0},floating:e}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":"alertdialog"===i?"dialog":i,"aria-controls":n?o:void 0,..."listbox"===i&&{role:"combobox"},..."menu"===i&&{id:s}},floating:{...e,..."menu"===i&&{"aria-labelledby":s}}}:{}}),[r,i,n,o,s])};function useFloating(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:o,strategy:s,nodeId:a}=void 0===e?{}:e;const[l,c]=reactExports.useState(null),u=useFloatingTree(),h=reactExports.useRef(null),d=reactExports.useRef({}),p=reactExports.useState((()=>createPubSub()))[0],f=useFloating$1({open:t,placement:i,middleware:o,strategy:s,whileElementsMounted:r}),m=useEvent(n),g=reactExports.useMemo((()=>({...f.refs,domReference:h})),[f.refs]),_=reactExports.useMemo((()=>({...f,refs:g,dataRef:d,nodeId:a,events:p,open:t,onOpenChange:m,_:{domReference:l}})),[f,a,p,t,m,g,l]);index$1((()=>{const e=null==u?void 0:u.nodesRef.current.find((e=>e.id===a));e&&(e.context=_)}));const{reference:b}=f,v=reactExports.useCallback((e=>{(isElement(e)||null===e)&&(g.domReference.current=e,c(e)),(isElement(g.reference.current)||null===g.reference.current||null!==e&&!isElement(e))&&b(e)}),[b,g]),y=reactExports.useCallback((e=>{const t=isElement(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;b(t)}),[b]);return reactExports.useMemo((()=>({...f,context:_,refs:g,reference:v,positionReference:y})),[f,g,_,v,y])}function mergeProps(e,t,n){const r=new Map;return{..."floating"===n&&{tabIndex:-1},...e,...t.map((e=>e?e[n]:null)).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var o;0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(o=r.get(n))||o.push(i),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];null==(e=r.get(n))||e.forEach((e=>e(...i)))})):e[n]=i})),e):e),{})}}const useInteractions=function(e){void 0===e&&(e=[]);const t=e,n=reactExports.useCallback((t=>mergeProps(t,e,"reference")),t),r=reactExports.useCallback((t=>mergeProps(t,e,"floating")),t),i=reactExports.useCallback((t=>mergeProps(t,e,"item")),t);return reactExports.useMemo((()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i})),[n,r,i])},getMiddleware=({arrowRef:e,placement:t})=>{const n=[];return n.push(O$2(8)),n.push("auto"===t?v$3():b$4()),n.push(E$4({padding:8})),e.current&&n.push(arrow({element:e.current})),n},getPlacement=({placement:e})=>"auto"===e?void 0:e,getArrowPlacement=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"}[e.split("-")[0]]),Floating=({children:e,content:t,theme:n,animation:r="duration-300",arrow:i=!0,placement:o="top",style:s="dark",trigger:a="hover",closeRequestKey:l,className:c,...u})=>{const h=reactExports.useRef(null),[d,p]=reactExports.useState(!1),f=useFloating({middleware:getMiddleware({arrowRef:h,placement:o}),onOpenChange:p,open:d,placement:getPlacement({placement:o})}),{context:m,floating:g,middlewareData:{arrow:{x:_,y:b}={}},reference:v,refs:y,strategy:O,update:S,x:T,y:x}=f,{getFloatingProps:E,getReferenceProps:w}=useInteractions([useClick(m,{enabled:"click"===a}),useFocus(m),useHover(m,{enabled:"hover"===a,handleClose:safePolygon()}),useRole(m,{role:"tooltip"})]);return reactExports.useEffect((()=>{if(y.reference.current&&y.floating.current&&d)return P$1(y.reference.current,y.floating.current,S)}),[d,y.floating,y.reference,S]),reactExports.useEffect((()=>{void 0!==l&&p(!1)}),[l]),jsxs(Fragment,{children:[jsx("div",{className:n.target,...w({ref:v}),"data-testid":"flowbite-tooltip-target",children:e}),jsxs("div",{"data-testid":"flowbite-tooltip",...E({className:classNames(n.base,r&&`${n.animation} ${r}`,!d&&n.hidden,n.style[s],c),ref:g,style:{position:O,top:x??" ",left:T??" "},...u}),children:[jsx("div",{className:n.content,children:t}),i&&jsx("div",{className:classNames(n.arrow.base,{[n.arrow.style.dark]:"dark"===s,[n.arrow.style.light]:"light"===s,[n.arrow.style.auto]:"auto"===s}),"data-testid":"flowbite-tooltip-arrow",ref:h,style:{top:b??" ",left:_??" ",right:" ",bottom:" ",[getArrowPlacement({placement:f.placement})]:n.arrow.placement},children:" "})]})]})},DropdownDivider=()=>{const e=useTheme().theme.dropdown.floating.divider;return jsx("div",{className:e})},DropdownHeader=({children:e,className:t,...n})=>{const r=useTheme().theme.dropdown.floating.header;return jsxs(Fragment,{children:[jsx("div",{className:classNames(r,t),...n,children:e}),jsx(DropdownDivider,{})]})},DropdownItem=({children:e,className:t,onClick:n,icon:r})=>{const i=useTheme().theme.dropdown.floating.item;return jsxs("li",{className:classNames(i.base,t),onClick:n,children:[r&&jsx(r,{className:i.icon}),e]})},icons={top:HiOutlineChevronUp,right:HiOutlineChevronRight,bottom:HiOutlineChevronDown,left:HiOutlineChevronLeft},DropdownComponent=({children:e,className:t,dismissOnClick:n=!0,...r})=>{const i=useTheme().theme.dropdown,o=r,{placement:s=(r.inline?"bottom-start":"bottom"),trigger:a="click",label:l,inline:c,floatingArrow:u=!1,arrowIcon:h=!0,...d}=o,p=reactExports.useMemo((()=>{const[e]=s.split("-");return icons[e]??HiOutlineChevronDown}),[s]),[f,m]=reactExports.useState(void 0),g=e=>React.isValidElement(e)?e.type===DropdownItem?React.cloneElement(e,{onClick:()=>{var t,r;null==(r=(t=e.props).onClick)||r.call(t),n&&m(uuid())}}):e.props.children&&"object"==typeof e.props.children?React.cloneElement(e,{children:reactExports.Children.map(e.props.children,g)}):e:e,_=reactExports.useMemo((()=>jsx("ul",{className:i.content,children:reactExports.Children.map(e,g)})),[e,i]);return jsx(Floating,{content:_,style:"auto",animation:"duration-100",placement:s,arrow:u,trigger:a,theme:i.floating,closeRequestKey:f,className:t,children:jsxs((({children:e})=>c?jsx("button",{className:i.inlineWrapper,children:e}):jsx(Button,{...d,children:e})),{children:[l,h&&jsx(p,{className:i.arrowIcon})]})})};DropdownComponent.displayName="Dropdown",DropdownItem.displayName="Dropdown.Item",DropdownHeader.displayName="Dropdown.Header",DropdownDivider.displayName="Dropdown.Divider";const Dropdown=Object.assign(DropdownComponent,{Item:DropdownItem,Header:DropdownHeader,Divider:DropdownDivider}),HelperText=({value:e,children:t,color:n="default",className:r,...i})=>{const o=useTheme().theme.helperText;return jsx("p",{className:classNames(o.base,o.colors[n],r),...i,children:e??t??""})},FileInput=reactExports.forwardRef((({theme:e={},sizing:t="md",helperText:n,color:r="gray",className:i,...o},s)=>{const a=mergeDeep(useTheme().theme.fileInput,e);return jsxs(Fragment,{children:[jsx("div",{className:classNames(a.base,i),children:jsx("div",{className:a.field.base,children:jsx("input",{className:classNames(a.field.input.base,a.field.input.colors[r],a.field.input.sizes[t]),...o,type:"file",ref:s})})}),n&&jsx(HelperText,{color:r,children:n})]})}));FileInput.displayName="FileInput";const FooterBrand=({alt:e,className:t,children:n,href:r,name:i,src:o})=>{const s=useTheme().theme.footer.brand;return jsx("div",{children:r?jsxs("a",{"data-testid":"flowbite-footer-brand",href:r,className:classNames(s.base,t),children:[jsx("img",{alt:e,src:o,className:s.img}),jsx("span",{"data-testid":"flowbite-footer-brand-span",className:s.span,children:i}),n]}):jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:o,className:s.img})})},FooterCopyright=({href:e,by:t,year:n,className:r})=>{const i=useTheme().theme.footer.copyright;return jsx("div",{children:jsxs("span",{className:classNames(i.base,r),"data-testid":"flowbite-footer-copyright",children:["© ",n,e?jsx("a",{href:e,className:i.href,children:t}):jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:i.span,children:t})]})})},FooterDivider=({className:e})=>{const t=useTheme().theme.footer.divider;return jsx("hr",{"data-testid":"footer-divider",className:classNames(t.base,e)})},FooterIcon=({href:e,className:t,ariaLabel:n,icon:r})=>{const i=useTheme().theme.footer.icon;return jsx("div",{children:e?jsx("a",{"aria-label":n,"data-testid":"flowbite-footer-icon",href:e,className:classNames(i.base,t),children:jsx(r,{className:i.size})}):jsx(r,{"data-testid":"flowbite-footer-icon",className:i.size})})},FooterLink=({children:e,className:t,href:n})=>{const r=useTheme().theme.footer.groupLink.link;return jsx("li",{className:classNames(r.base,t),children:jsx("a",{href:n,className:r.href,children:e})})},FooterLinkGroup=({children:e,className:t,col:n=!1})=>{const r=useTheme().theme.footer.groupLink;return jsx("ul",{"data-testid":"footer-groupLink",className:classNames(r.base,n&&r.col,t),children:e})},FooterTitle=({title:e,className:t})=>{const n=useTheme().theme.footer.title;return jsx("h2",{"data-testid":"flowbite-footer-title",className:classNames(n.base,t),children:e})},FooterComponent=({children:e,className:t,bgDark:n=!1,container:r=!1})=>{const i=useTheme().theme.footer;return jsx("footer",{"data-testid":"flowbite-footer",className:classNames(i.base,n&&i.bgDark,r&&i.container,t),children:e})};FooterComponent.displayName="Footer",FooterCopyright.displayName="Footer.Copyright",FooterLink.displayName="Footer.Link",FooterBrand.displayName="Footer.Brand",FooterLinkGroup.displayName="Footer.LinkGroup",FooterIcon.displayName="Footer.Icon",FooterTitle.displayName="Footer.Title",FooterDivider.displayName="Footer.Divider",Object.assign(FooterComponent,{Copyright:FooterCopyright,Link:FooterLink,LinkGroup:FooterLinkGroup,Brand:FooterBrand,Icon:FooterIcon,Title:FooterTitle,Divider:FooterDivider});const Label=({children:e,color:t="default",disabled:n=!1,value:r,className:i,...o})=>{const s=useTheme().theme.label;return jsx("label",{className:classNames(s.base,s.colors[t],n??s.disabled,i),...o,children:r??e??""})},ListGroupItem=({active:e,children:t,href:n,icon:r,onClick:i,className:o,...s})=>{const a=void 0!==n,l=a?"a":"button",c=useTheme().theme.listGroup.item,u=s;return jsx("li",{children:jsxs(l,{className:classNames(c.active[e?"on":"off"],c.base,c.href[a?"on":"off"]),href:n,onClick:i,type:a?void 0:"button",...u,children:[r&&jsx(r,{"aria-hidden":!0,className:c.icon,"data-testid":"flowbite-list-group-item-icon"}),t]})})},ListGroupComponent=({children:e,className:t,...n})=>{const r=useTheme().theme.listGroup.base,i=n;return jsx("ul",{className:classNames(r,t),...i,children:e})};ListGroupComponent.displayName="ListGroup",ListGroupItem.displayName="ListGroup.Item",Object.assign(ListGroupComponent,{Item:ListGroupItem});const useKeyDown=(e,t)=>{const n=n=>{n.key===e&&t()};reactExports.useEffect((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[e,t])},ModalContext=reactExports.createContext(void 0);function useModalContext(){const e=reactExports.useContext(ModalContext);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const ModalBody=({children:e,className:t,...n})=>{const{popup:r}=useModalContext(),i=useTheme().theme.modal.body;return jsx("div",{className:classNames(i.base,{[i.popup]:r},t),...n,children:e})},ModalFooter=({children:e,className:t,...n})=>{const{popup:r}=useModalContext(),i=useTheme().theme.modal.footer;return jsx("div",{className:classNames(i.base,{[i.popup]:!r},t),...n,children:e})},ModalHeader=({children:e,className:t,...n})=>{const{popup:r,onClose:i}=useModalContext(),o=useTheme().theme.modal.header;return jsxs("div",{className:classNames(o.base,{[o.popup]:r},t),...n,children:[jsx("h3",{className:o.title,children:e}),jsx("button",{"aria-label":"Close",className:o.close.base,type:"button",onClick:i,children:jsx(HiOutlineX,{"aria-hidden":!0,className:o.close.icon})})]})},ModalComponent=({children:e,show:t,root:n=document.body,popup:r,size:i="2xl",position:o="center",dismissible:s=!1,onClose:a,className:l,...c})=>{const u=useTheme().theme.modal,h=reactExports.useRef(null);h.current||(h.current=document.createElement("div")),h.current.parentNode!==n&&n.appendChild(h.current),reactExports.useEffect((()=>()=>{var e;const t=h.current;t&&(null==(e=t.parentNode)||e.removeChild(t),h.current=null)}),[]),useKeyDown("Escape",(()=>{s&&a&&a()}));return reactDomExports.createPortal(jsx(ModalContext.Provider,{value:{popup:r,onClose:a},children:jsx("div",{"aria-hidden":!t,className:classNames(u.base,u.positions[o],t?u.show.on:u.show.off,l),"data-testid":"modal",role:"dialog",onClick:e=>{s&&e.target===e.currentTarget&&a&&a()},...c,children:jsx("div",{className:classNames(u.content.base,u.sizes[i]),children:jsx("div",{className:u.content.inner,children:e})})})}),h.current)};ModalComponent.displayName="Modal",ModalHeader.displayName="Modal.Header",ModalBody.displayName="Modal.Body",ModalFooter.displayName="Modal.Footer";const Modal=Object.assign(ModalComponent,{Header:ModalHeader,Body:ModalBody,Footer:ModalFooter}),NavbarBrand=({theme:e={},children:t,className:n,as:r="a",...i})=>{const o=mergeDeep(useTheme().theme.navbar.brand,e);return jsx(r,{className:classNames(o.base,n),...i,children:t})},NavbarContext=reactExports.createContext(void 0);function useNavbarContext(){const e=reactExports.useContext(NavbarContext);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const NavbarCollapse=({theme:e={},children:t,className:n,...r})=>{const{isOpen:i}=useNavbarContext(),o=mergeDeep(useTheme().theme.navbar.collapse,e);return jsx("div",{className:classNames(o.base,o.hidden[i?"off":"on"],n),"data-testid":"flowbite-navbar-collapse",...r,children:jsx("ul",{className:o.list,children:t})})},NavbarLink=({active:e,disabled:t,theme:n={},children:r,className:i,as:o="a",...s})=>{const a=mergeDeep(useTheme().theme.navbar.link,n);return jsx("li",{children:jsx(o,{className:classNames(a.base,{[a.active.on]:e,[a.active.off]:!e&&!t},a.disabled[t?"on":"off"],i),...s,children:r})})};function GoThreeBars(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(e)}const NavbarToggle=({barIcon:e=GoThreeBars,theme:t={},className:n,...r})=>{const{isOpen:i,setIsOpen:o}=useNavbarContext(),s=mergeDeep(useTheme().theme.navbar.toggle,t);return jsxs("button",{className:classNames(s.base,n),"data-testid":"flowbite-navbar-toggle",onClick:()=>{o(!i)},...r,children:[jsx("span",{className:"sr-only",children:"Open main menu"}),jsx(e,{className:s.icon})]})},NavbarComponent=({children:e,menuOpen:t,fluid:n=!1,rounded:r,border:i,className:o,theme:s={},...a})=>{const[l,c]=reactExports.useState(t),u=mergeDeep(useTheme().theme.navbar.root,s);return jsx(NavbarContext.Provider,{value:{isOpen:l,setIsOpen:c},children:jsx("nav",{className:classNames(u.base,u.bordered[i?"on":"off"],u.rounded[r?"on":"off"],o),...a,children:jsx("div",{className:classNames(u.inner.base,u.inner.fluid[n?"on":"off"]),children:e})})})};NavbarComponent.displayName="Navbar",NavbarBrand.displayName="Navbar.Brand",NavbarCollapse.displayName="Navbar.Collapse",NavbarLink.displayName="Navbar.Link",NavbarToggle.displayName="Navbar.Toggle",Object.assign(NavbarComponent,{Brand:NavbarBrand,Collapse:NavbarCollapse,Link:NavbarLink,Toggle:NavbarToggle});const Radio=reactExports.forwardRef((({theme:e={},className:t,...n},r)=>{const i=mergeDeep(useTheme().theme.radio,e);return jsx("input",{ref:r,className:classNames(i.root.base,t),type:"radio",...n})}));Radio.displayName="Radio";const RangeSlider=reactExports.forwardRef((({theme:e={},sizing:t="md",className:n,...r},i)=>{const o=mergeDeep(useTheme().theme.rangeSlider,e);return jsx(Fragment,{children:jsx("div",{"data-testid":"flowbite-range-slider",className:classNames(o.base,n),children:jsx("div",{className:o.field.base,children:jsx("input",{className:classNames(o.field.input.base,o.field.input.sizes[t]),...r,type:"range",ref:i})})})})}));RangeSlider.displayName="RangeSlider";const RatingAdvanced=({percentFilled:e=0,children:t,className:n,...r})=>{const i=useTheme().theme.rating.advanced;return jsxs("div",{className:classNames(i.base,n),...r,children:[jsx("span",{className:i.label,children:t}),jsx("div",{className:i.progress.base,children:jsx("div",{className:i.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${e}%`}})}),jsx("span",{className:i.progress.label,children:`${e}%`})]})},RatingContext=reactExports.createContext(void 0);function useRatingContext(){const e=reactExports.useContext(RatingContext);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const RatingStar=({filled:e=!0,starIcon:t=HiStar,className:n})=>{const{size:r="sm"}=useRatingContext(),i=useTheme().theme.rating.star;return jsx(t,{className:classNames(i.sizes[r],i[e?"filled":"empty"],n),"data-testid":"flowbite-rating-star"})},RatingComponent=({children:e,size:t="sm",className:n,...r})=>{const i=useTheme().theme.rating;return jsx(RatingContext.Provider,{value:{size:t},children:jsx("div",{className:classNames(i.base,n),...r,children:e})})};RatingComponent.displayName="Rating",RatingStar.displayName="Rating.Star",RatingAdvanced.displayName="Rating.Advanced",Object.assign(RatingComponent,{Star:RatingStar,Advanced:RatingAdvanced});const Select=reactExports.forwardRef((({children:e,sizing:t="md",shadow:n,helperText:r,addon:i,icon:o,color:s="gray",className:a,...l},c)=>{const u=useTheme().theme.select;return jsxs("div",{className:classNames(u.base,a),children:[i&&jsx("span",{className:u.addon,children:i}),jsxs("div",{className:u.field.base,children:[o&&jsx("div",{className:u.field.icon.base,children:jsx(o,{className:u.field.icon.svg})}),jsx("select",{className:classNames(u.field.select.base,u.field.select.colors[s],u.field.select.withIcon[o?"on":"off"],u.field.select.withAddon[i?"on":"off"],u.field.select.withShadow[n?"on":"off"],u.field.select.sizes[t]),...l,ref:c,children:e}),r&&jsx(HelperText,{color:s,children:r})]})]})}));Select.displayName="Select";const Tooltip=({animation:e="duration-300",arrow:t=!0,children:n,content:r,placement:i="top",style:o="dark",trigger:s="hover",className:a,...l})=>{const c=useTheme().theme.tooltip;return jsx(Floating,{content:r,style:o,animation:e,placement:i,arrow:t,trigger:s,theme:c,className:a,...l,children:n})},SidebarContext=reactExports.createContext(void 0);function useSidebarContext(){const e=reactExports.useContext(SidebarContext);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const SidebarItemContext=reactExports.createContext(void 0);function useSidebarItemContext(){const e=reactExports.useContext(SidebarItemContext);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const SidebarCollapse=({children:e,icon:t,label:n,className:r,open:i=!1,...o})=>{const s=reactExports.useId(),{isCollapsed:a}=useSidebarContext(),[l,c]=reactExports.useState(i),u=useTheme().theme.sidebar.collapse;reactExports.useEffect((()=>c(i)),[i]);return jsxs((({children:e})=>jsx("li",{children:a&&!l?jsx(Tooltip,{content:n,placement:"right",children:e}):e})),{children:[jsxs("button",{className:classNames(u.button,r),id:`flowbite-sidebar-collapse-${s}`,onClick:()=>c(!l),title:n,type:"button",...o,children:[t&&jsx(t,{"aria-hidden":!0,className:classNames(u.icon.base,u.icon.open[l?"on":"off"]),"data-testid":"flowbite-sidebar-collapse-icon"}),a?jsx("span",{className:"sr-only",children:n}):jsxs(Fragment,{children:[jsx("span",{className:u.label.base,"data-testid":"flowbite-sidebar-collapse-label",children:n}),jsx(HiChevronDown,{"aria-hidden":!0,className:u.label.icon})]})]}),jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${s}`,className:u.list,hidden:!l,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!0},children:e})})]})};SidebarCollapse.displayName="Sidebar.Collapse";const SidebarCTA=({children:e,color:t="info",className:n,...r})=>{const{isCollapsed:i}=useSidebarContext(),o=useTheme().theme.sidebar.cta;return jsx("div",{className:classNames(o.base,o.color[t],n),"data-testid":"sidebar-cta",hidden:i,...r,children:e})};SidebarCTA.displayName="Sidebar.CTA";const ListItem=({id:e,isCollapsed:t,tooltipChildren:n,children:r})=>jsx("li",{children:t?jsx(Tooltip,{content:jsx(TooltipContent,{id:e,children:n}),placement:"right",children:r}):r}),TooltipContent=({id:e,children:t})=>jsx(Children,{id:e,children:t}),Children=({id:e,children:t})=>{const n=useTheme().theme.sidebar.item;return jsx("span",{className:classNames(n.content.base),"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,children:t})},SidebarItem=reactExports.forwardRef((({as:e="a",children:t,icon:n,active:r,label:i,labelColor:o="info",className:s,...a},l)=>{const c=reactExports.useId(),{isCollapsed:u}=useSidebarContext(),{isInsideCollapse:h}=useSidebarItemContext(),d=useTheme().theme.sidebar.item;return jsx(ListItem,{id:c,isCollapsed:u,tooltipChildren:t,children:jsxs(e,{"aria-labelledby":`flowbite-sidebar-item-${c}`,className:classNames(d.base,r&&d.active,!u&&h&&d.collapsed.insideCollapse,s),ref:l,...a,children:[n&&jsx(n,{"aria-hidden":!0,className:classNames(d.icon.base,r&&d.icon.active),"data-testid":"flowbite-sidebar-item-icon"}),u&&!n&&jsx("span",{className:d.collapsed.noIcon,children:t.charAt(0).toLocaleUpperCase()??"?"}),!u&&jsx(Children,{id:c,children:t}),!u&&i&&jsx(Badge,{color:o,"data-testid":"flowbite-sidebar-label",hidden:u,className:d.label,children:i})]})})}));SidebarItem.displayName="Sidebar.Item";const SidebarItemGroup=({children:e,className:t,...n})=>{const r=useTheme().theme.sidebar.itemGroup;return jsx("ul",{className:classNames(r,t),"data-testid":"flowbite-sidebar-item-group",...n,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!1},children:e})})};SidebarItemGroup.displayName="Sidebar.ItemGroup";const SidebarItems=({children:e,className:t,...n})=>{const r=useTheme().theme.sidebar.items;return jsx("div",{className:classNames(r,t),"data-testid":"flowbite-sidebar-items",...n,children:e})};SidebarItems.displayName="Sidebar.Items";const SidebarLogo=({children:e,href:t,img:n,imgAlt:r="",className:i,...o})=>{const s=reactExports.useId(),{isCollapsed:a}=useSidebarContext(),l=useTheme().theme.sidebar.logo;return jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,className:classNames(l.base,i),href:t,...o,children:[jsx("img",{alt:r,className:l.img,src:n}),jsx("span",{className:l.collapsed[a?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};SidebarLogo.displayName="Sidebar.Logo";const SidebarComponent=({children:e,collapseBehavior:t="collapse",collapsed:n=!1,...r})=>{const i=useTheme().theme.sidebar;return jsx(SidebarContext.Provider,{value:{isCollapsed:n},children:jsx("aside",{"aria-label":"Sidebar",className:classNames(i.base,i.collapsed[n?"on":"off"]),hidden:n&&"hide"===t,...r,children:jsx("div",{className:i.inner,children:e})})})};SidebarComponent.displayName="Sidebar",Object.assign(SidebarComponent,{Collapse:SidebarCollapse,CTA:SidebarCTA,Item:SidebarItem,Items:SidebarItems,ItemGroup:SidebarItemGroup,Logo:SidebarLogo});const TabItem=({children:e,className:t})=>jsx("div",{className:t,children:e}),TabsComponent=reactExports.forwardRef((({children:e,style:t="default",className:n,onActiveTabChange:r,...i},o)=>{const s=useTheme().theme.tab,a=reactExports.useId(),l=reactExports.useMemo((()=>reactExports.Children.map(e,(({props:e})=>e))),[e]),c=reactExports.useRef([]),[u,h]=reactExports.useState(Math.max(0,l.findIndex((e=>e.active)))),[d,p]=reactExports.useState(Math.max(0,l.findIndex((e=>e.active)))),f=e=>{h(e),r&&r(e)},m=s.tablist.tabitem.styles[t];return reactExports.useEffect((()=>{var e;null==(e=c.current[d])||e.focus()}),[d]),reactExports.useImperativeHandle(o,(()=>({setActiveTab:f}))),jsxs("div",{className:classNames(s.base,n),children:[jsx("div",{"aria-label":"Tabs",role:"tablist",className:classNames(s.tablist.base,s.tablist.styles[t],n),...i,children:l.map(((e,t)=>jsxs("button",{type:"button","aria-controls":`${a}-tabpanel-${t}`,"aria-selected":t===u,className:classNames(s.tablist.tabitem.base,{...m},{[m.active.on]:t===u,[m.active.off]:t!==u&&!e.disabled}),disabled:e.disabled,id:`${a}-tab-${t}`,onClick:()=>(({target:e})=>{f(e),p(e)})({target:t}),onKeyDown:e=>(({event:e,target:t})=>{"ArrowLeft"===e.key&&p(Math.max(0,d-1)),"ArrowRight"===e.key&&p(Math.min(l.length-1,d+1)),"Enter"===e.key&&(f(t),p(t))})({event:e,target:t}),ref:e=>c.current[t]=e,role:"tab",tabIndex:t===d?0:-1,children:[e.icon&&jsx(e.icon,{className:s.tablist.tabitem.icon}),e.title]},t)))}),jsx("div",{children:l.map(((e,t)=>jsx("div",{"aria-labelledby":`${a}-tab-${t}`,className:s.tabpanel,hidden:t!==u,id:`${a}-tabpanel-${t}`,role:"tabpanel",tabIndex:0,children:e.children},t)))})]})}));TabsComponent.displayName="Tabs.Group",TabItem.displayName="Tabs.Item";const Tabs={Group:TabsComponent,Item:TabItem},TableBody=({children:e,...t})=>jsx("tbody",{...t,children:e}),TableCell=({children:e,className:t,...n})=>{const r=useTheme().theme.table.cell;return jsx("td",{className:classNames(r.base,t),...n,children:e})},TableContext=reactExports.createContext(void 0);function useTableContext(){const e=reactExports.useContext(TableContext);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const TableHead=({children:e,className:t,...n})=>{const r=useTheme().theme.table;return jsx("thead",{className:classNames(r.head.base,t),...n,children:jsx("tr",{children:e})})},TableHeadCell=({children:e,className:t,...n})=>{const r=useTheme().theme.table.head.cell;return jsx("th",{className:classNames(r.base,t),...n,children:e})},TableRow=({children:e,className:t,...n})=>{const r=useTheme().theme.table.row,{striped:i,hoverable:o}=useTableContext();return jsx("tr",{"data-testid":"table-row-element",className:classNames(i&&r.striped,o&&r.hovered,t),...n,children:e})},TableComponent=({children:e,striped:t,hoverable:n,className:r,...i})=>{const o=useTheme().theme.table;return jsx("div",{"data-testid":"table-element",className:classNames(o.wrapper),children:jsx(TableContext.Provider,{value:{striped:t,hoverable:n},children:jsx("table",{className:classNames(o.base,r),...i,children:e})})})};TableComponent.displayName="Table",TableHead.displayName="Table.Head",TableBody.displayName="Table.Body",TableRow.displayName="Table.Row",TableCell.displayName="Table.Cell",TableHeadCell.displayName="Table.HeadCell",Object.assign(TableComponent,{Head:TableHead,Body:TableBody,Row:TableRow,Cell:TableCell,HeadCell:TableHeadCell});const Textarea=reactExports.forwardRef((({shadow:e,helperText:t,color:n="gray",className:r,...i},o)=>{const s=useTheme().theme.textarea;return jsxs(Fragment,{children:[jsx("textarea",{ref:o,className:classNames(s.base,s.colors[n],s.withShadow[e?"on":"off"],r),...i}),t&&jsx(HelperText,{color:n,children:t})]})}));Textarea.displayName="Textarea";const TextInput=reactExports.forwardRef((({sizing:e="md",shadow:t,helperText:n,addon:r,icon:i,rightIcon:o,color:s="gray",className:a,theme:l={},...c},u)=>{const h=mergeDeep(useTheme().theme.textInput,l);return jsxs(Fragment,{children:[jsxs("div",{className:classNames(h.base,a),children:[r&&jsx("span",{className:h.addon,children:r}),jsxs("div",{className:h.field.base,children:[i&&jsx("div",{className:h.field.icon.base,children:jsx(i,{className:h.field.icon.svg})}),o&&jsx("div",{"data-testid":"right-icon",className:h.field.rightIcon.base,children:jsx(o,{className:h.field.rightIcon.svg})}),jsx("input",{className:classNames(h.field.input.base,h.field.input.colors[s],h.field.input.withIcon[i?"on":"off"],h.field.input.withAddon[r?"on":"off"],h.field.input.withShadow[t?"on":"off"],h.field.input.sizes[e]),...c,ref:u})]})]}),n&&jsx(HelperText,{color:s,children:n})]})}));TextInput.displayName="TextInput";const TimelineBody=({children:e,className:t,...n})=>{const r=useTheme().theme.timeline.item.content;return jsx("p",{className:classNames(r.body,t),...n,children:e})},TimelineContext=reactExports.createContext(void 0);function useTimelineContext(){const e=reactExports.useContext(TimelineContext);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext providor!");return e}const TimelineContent=({children:e,className:t,...n})=>{const r=useTheme().theme.timeline.item.content,{horizontal:i}=useTimelineContext();return jsx("div",{"data-testid":"timeline-content",className:classNames(i&&r.base,t),...n,children:e})},TimelineItem=({children:e,className:t,...n})=>{const r=useTheme().theme.timeline.item,{horizontal:i}=useTimelineContext();return jsx("li",{"data-testid":"timeline-item",className:classNames(i&&r.base.horizontal,!i&&r.base.vertical,t),...n,children:e})},TimelinePoint=({children:e,className:t,icon:n,...r})=>{const i=useTheme().theme.timeline.item.point,{horizontal:o}=useTimelineContext();return jsxs("div",{"data-testid":"timeline-point",className:classNames(o&&i.base.horizontal,!o&&i.base.vertical,t),...r,children:[e,n?jsx("span",{className:classNames(i.marker.icon.wrapper),children:jsx(n,{"aria-hidden":!0,className:classNames(i.marker.icon.base)})}):jsx("div",{className:classNames(o&&i.marker.base.horizontal,!o&&i.marker.base.vertical)}),o&&jsx("div",{className:classNames(i.line)})]})},TimelineTime=({children:e,className:t,...n})=>{const r=useTheme().theme.timeline.item.content;return jsx("time",{className:classNames(r.time,t),...n,children:e})},TimelineTitle=({children:e,className:t,as:n="h3",...r})=>{const i=useTheme().theme.timeline.item.content;return jsx(n,{className:classNames(i.title,t),...r,children:e})},TimelineComponent=({children:e,horizontal:t,className:n})=>{const r=useTheme().theme.timeline;return jsx(TimelineContext.Provider,{value:{horizontal:t},children:jsx("ol",{"data-testid":"timeline-component",className:classNames(t&&r.direction.horizontal,!t&&r.direction.vertical,n),children:e})})};TimelineComponent.displayName="Timeline",TimelineItem.displayName="Timeline.Item",TimelinePoint.displayName="Timeline.Point",TimelineContent.displayName="Timeline.Content",TimelineTime.displayName="Timeline.Time",TimelineTitle.displayName="Timeline.Title",TimelineBody.displayName="Timeline.Body",Object.assign(TimelineComponent,{Item:TimelineItem,Point:TimelinePoint,Content:TimelineContent,Time:TimelineTime,Title:TimelineTitle,Body:TimelineBody});const ToastContext=reactExports.createContext(void 0);function useToastContext(){const e=reactExports.useContext(ToastContext);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const ToastToggle=({className:e,xIcon:t=HiX})=>{const{duration:n,isClosed:r,isRemoved:i,setIsClosed:o,setIsRemoved:s}=useToastContext(),a=useTheme().theme.toast.toggle;return jsx("button",{"aria-label":"Close",onClick:()=>{o(!r),setTimeout((()=>s(!i)),n)},type:"button",className:classNames(a.base,e),children:jsx(t,{className:a.icon})})},durationClasses={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},ToastComponent=({children:e,duration:t=300,className:n,...r})=>{const[i,o]=reactExports.useState(!1),[s,a]=reactExports.useState(!1),l=useTheme().theme.toast;return jsx(ToastContext.Provider,{value:{duration:t,isClosed:i,isRemoved:s,setIsClosed:o,setIsRemoved:a},children:jsx("div",{"data-testid":"flowbite-toast",className:classNames(l.base,durationClasses[t],{[l.closed]:i},{[l.removed]:s},n),...r,children:e})})};ToastComponent.displayName="Toast",ToastToggle.displayName="Toast.Toggle",Object.assign(ToastComponent,{Toggle:ToastToggle});const IconButton=({icon:e,text:t,color:n,onClick:r,className:i,type:o})=>jsxs(Button,{className:i,onClick:r,color:n,type:o,children:[jsx(FontAwesomeIcon,{icon:e}),""!==t?jsx("span",{className:"ml-2",children:t}):null]});var faTrashCan={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},faPause={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},faArrowsLeftRight={prefix:"fas",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},faArrowsRotate={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},faSync=faArrowsRotate,faSquare={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faTrash={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},faDownload={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},faUpload={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352H192c0 35.3 28.7 64 64 64s64-28.7 64-64H448c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V416c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},faEraser={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M258.7 57.4L25.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H256h9.4H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H355.9L486.6 285.3c25-25 25-65.5 0-90.5L349.3 57.4c-25-25-65.5-25-90.5 0zM265.4 416H256l-105.4 0-80-80L195.3 211.3 332.7 348.7 265.4 416z"]},faPlay={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},faCopy={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},faPlus={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},faRobot={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"]},faCirclePlus={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},faPlusCircle=faCirclePlus,faCircleXmark={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},faXmarkCircle=faCircleXmark;const BlockManagerPanel=()=>{const e=useRobartState((e=>Object.values(e.blocks))),t=useRobartState((e=>e.removeBlock)),n=useRobartState((e=>e.createBlock)),r=useRobartState((e=>e.copyBlock)),i=useRobartState((e=>e.editingBlockId)),o=useRobartState((e=>e.setEditingBlock));return useRobartState((e=>e.setDuration)),jsxs("div",{children:[jsxs("div",{className:"flex flex-wrap gap-2 p-2",children:[jsx(IconButton,{icon:faPlusCircle,text:"New",onClick:()=>{const e=n("New Block");o(e)}}),jsx(IconButton,{icon:faCopy,text:"Copy",onClick:()=>{if(void 0===i)return;const e=r(i);o(e)}}),jsx(IconButton,{color:"failure",icon:faTrash,text:"Delete",onClick:()=>{void 0!==i&&t(i)}})]}),jsx("div",{className:"flex flex-wrap gap-2 p-2",children:e.map((e=>jsx(Button,{className:"flex",onClick:()=>o(e.id),color:"success",children:e.name},e.id)))})]})};function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e2){o(e2)}}function a(e){try{l(r.throw(e))}catch(e2){o(e2)}}function l(e){e.done?i(e.value):function t(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function c(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e2){a=[6,e2],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(e,t){var n=withMimeType(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function withMimeType(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=COMMON_MIME_TYPES.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return isObject(e)&&isDataTransfer(e.dataTransfer)?[2,getDataTransferFiles(e.dataTransfer,e.type)]:isChangeEvt(e)?[2,getInputFiles(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"==typeof e.getFile}))?[2,getFsHandleFiles(e)]:[2,[]]}))}))}function isDataTransfer(e){return isObject(e)}function isChangeEvt(e){return isObject(e)&&isObject(e.target)}function isObject(e){return"object"==typeof e&&null!==e}function getInputFiles(e){return fromList(e.target.files).map((function(e){return toFileWithPath(e)}))}function getFsHandleFiles(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return toFileWithPath(e)}))]}}))}))}function getDataTransferFiles(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(r){switch(r.label){case 0:return e.items?(n=fromList(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(toFilePromises))]):[3,2];case 1:return[2,noIgnoredFiles(flatten$1(r.sent()))];case 2:return[2,noIgnoredFiles(fromList(e.files).map((function(e){return toFileWithPath(e)})))]}}))}))}function noIgnoredFiles(e){return e.filter((function(e){return-1===FILES_TO_IGNORE.indexOf(e.name)}))}function fromList(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function toFilePromises(e){if("function"!=typeof e.webkitGetAsEntry)return fromDataTransferItem(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?fromDirEntry(t):fromDataTransferItem(e)}function flatten$1(e){return e.reduce((function(e,t){return __spreadArray(__spreadArray([],__read(e),!1),__read(Array.isArray(t)?flatten$1(t):[t]),!1)}),[])}function fromDataTransferItem(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=toFileWithPath(t);return Promise.resolve(n)}function fromEntry(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,e.isDirectory?fromDirEntry(e):fromFileEntry(e)]}))}))}function fromDirEntry(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var o=this;t.readEntries((function(t){return __awaiter(o,void 0,void 0,(function(){var o,s,a;return __generator(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=l.sent(),e(o),[3,4];case 3:return s=l.sent(),n(s),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(fromEntry)),r.push(a),i(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function fromFileEntry(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=toFileWithPath(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var _default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t}))}return!0};function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach((function(t){_defineProperty$3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit$1(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function e(t){t=Array.isArray(t)&&1===t.length?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(n)}},getTooLargeRejectionErr=function e(t){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(t," ").concat(1===t?"byte":"bytes")}},getTooSmallRejectionErr=function e(t){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(t," ").concat(1===t?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(e,t){var n="application/x-moz-file"===e.type||_default(e,t);return[n,n?null:getInvalidTypeRejectionErr(t)]}function fileMatchSize(e,t,n){if(isDefined(e.size))if(isDefined(t)&&isDefined(n)){if(e.size>n)return[!1,getTooLargeRejectionErr(n)];if(e.size<t)return[!1,getTooSmallRejectionErr(t)]}else{if(isDefined(t)&&e.size<t)return[!1,getTooSmallRejectionErr(t)];if(isDefined(n)&&e.size>n)return[!1,getTooLargeRejectionErr(n)]}return[!0,null]}function isDefined(e){return null!=e}function allFilesAccepted(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,s=e.maxFiles,a=e.validator;return!(!o&&t.length>1||o&&s>=1&&t.length>s)&&t.every((function(e){var t=_slicedToArray$1(fileAccepted(e,n),1)[0],o=_slicedToArray$1(fileMatchSize(e,r,i),1)[0],s=a?a(e):null;return t&&o&&!s}))}function isPropagationStopped(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function isIe(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function isEdge(e){return-1!==e.indexOf("Edge/")}function isIeOrEdge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return isIe(e)||isEdge(e)}function composeEventHandlers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!isPropagationStopped(e)&&t&&t.apply(void 0,[e].concat(r)),isPropagationStopped(e)}))}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(e){return isDefined(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=_slicedToArray$1(e,2),n=t[0],r=t[1],i=!0;return isMIMEType(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),Array.isArray(r)&&r.every(isExt)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),i=!1),i})).reduce((function(e,t){var n=_slicedToArray$1(t,2),r=n[0],i=n[1];return _objectSpread$1(_objectSpread$1({},e),{},_defineProperty$3({},r,i))}),{})}]:e}function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce((function(e,t){var n=_slicedToArray$1(t,2),r=n[0],i=n[1];return[].concat(_toConsumableArray$1(e),[r],_toConsumableArray$1(i))}),[]).filter((function(e){return isMIMEType(e)||isExt(e)})).join(",")}function isAbort(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function isSecurityError(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}function isMIMEType(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}var _excluded$2=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach((function(t){_defineProperty$2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties$1(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$2(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Dropzone=reactExports.forwardRef((function(e,t){var n=e.children,r=useDropzone(_objectWithoutProperties$1(e,_excluded$2)),i=r.open,o=_objectWithoutProperties$1(r,_excluded2);return reactExports.useImperativeHandle(t,(function(){return{open:i}}),[i]),React.createElement(reactExports.Fragment,null,n(_objectSpread(_objectSpread({},o),{},{open:i})))}));Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps,Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_objectSpread(_objectSpread({},defaultProps),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,o=t.maxSize,s=t.minSize,a=t.multiple,l=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,h=t.onDragOver,d=t.onDrop,p=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,g=t.onFileDialogOpen,_=t.useFsAccessApi,b=t.autoFocus,v=t.preventDropOnDocument,y=t.noClick,O=t.noKeyboard,S=t.noDrag,T=t.noDragEventsBubbling,x=t.onError,E=t.validator,w=reactExports.useMemo((function(){return acceptPropAsAcceptAttr(n)}),[n]),C=reactExports.useMemo((function(){return pickerOptionsFromAccept(n)}),[n]),A=reactExports.useMemo((function(){return"function"==typeof g?g:noop$1}),[g]),k=reactExports.useMemo((function(){return"function"==typeof m?m:noop$1}),[m]),R=reactExports.useRef(null),I=reactExports.useRef(null),M=_slicedToArray(reactExports.useReducer(reducer,initialState),2),$=M[0],P=M[1],L=$.isFocused,D=$.isFileDialogActive,N=reactExports.useRef("undefined"!=typeof window&&window.isSecureContext&&_&&canUseFileSystemAccessAPI()),B=function e(){!N.current&&D&&setTimeout((function(){I.current&&(I.current.files.length||(P({type:"closeDialog"}),k()))}),300)};reactExports.useEffect((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[I,D,k,N]);var F=reactExports.useRef([]),G=function e(t){R.current&&R.current.contains(t.target)||(t.preventDefault(),F.current=[])};reactExports.useEffect((function(){return v&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",G,!1)),function(){v&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",G))}}),[R,v]),reactExports.useEffect((function(){return!r&&b&&R.current&&R.current.focus(),function(){}}),[R,b,r]);var U=reactExports.useCallback((function(e){x?x(e):console.error(e)}),[x]),V=reactExports.useCallback((function(e){e.preventDefault(),e.persist(),te(e),F.current=[].concat(_toConsumableArray(F.current),[e.target]),isEvtWithFiles(e)&&Promise.resolve(i(e)).then((function(t){if(!isPropagationStopped(e)||T){var n=t.length,r=n>0&&allFilesAccepted({files:t,accept:w,minSize:s,maxSize:o,multiple:a,maxFiles:l,validator:E});P({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}})).catch((function(e){return U(e)}))}),[i,c,U,T,w,s,o,a,l,E]),W=reactExports.useCallback((function(e){e.preventDefault(),e.persist(),te(e);var t=isEvtWithFiles(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,T]),H=reactExports.useCallback((function(e){e.preventDefault(),e.persist(),te(e);var t=F.current.filter((function(e){return R.current&&R.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(P({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(e)&&u&&u(e))}),[R,u,T]),Q=reactExports.useCallback((function(e,t){var n=[],r=[];e.forEach((function(e){var t=_slicedToArray(fileAccepted(e,w),2),i=t[0],a=t[1],l=_slicedToArray(fileMatchSize(e,s,o),2),c=l[0],u=l[1],h=E?E(e):null;if(i&&c&&!h)n.push(e);else{var d=[a,u];h&&(d=d.concat(h)),r.push({file:e,errors:d.filter((function(e){return e}))})}})),(!a&&n.length>1||a&&l>=1&&n.length>l)&&(n.forEach((function(e){r.push({file:e,errors:[TOO_MANY_FILES_REJECTION]})})),n.splice(0)),P({acceptedFiles:n,fileRejections:r,type:"setFiles"}),d&&d(n,r,t),r.length>0&&f&&f(r,t),n.length>0&&p&&p(n,t)}),[P,a,w,s,o,l,d,p,f,E]),z=reactExports.useCallback((function(e){e.preventDefault(),e.persist(),te(e),F.current=[],isEvtWithFiles(e)&&Promise.resolve(i(e)).then((function(t){isPropagationStopped(e)&&!T||Q(t,e)})).catch((function(e){return U(e)})),P({type:"reset"})}),[i,Q,U,T]),j=reactExports.useCallback((function(){if(N.current){P({type:"openDialog"}),A();var e={multiple:a,types:C};window.showOpenFilePicker(e).then((function(e){return i(e)})).then((function(e){Q(e,null),P({type:"closeDialog"})})).catch((function(e){isAbort(e)?(k(e),P({type:"closeDialog"})):isSecurityError(e)?(N.current=!1,I.current?(I.current.value=null,I.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):U(e)}))}else I.current&&(P({type:"openDialog"}),A(),I.current.value=null,I.current.click())}),[P,A,k,_,Q,U,C,a]),X=reactExports.useCallback((function(e){R.current&&R.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),j()))}),[R,j]),Y=reactExports.useCallback((function(){P({type:"focus"})}),[]),Z=reactExports.useCallback((function(){P({type:"blur"})}),[]),q=reactExports.useCallback((function(){y||(isIeOrEdge()?setTimeout(j,0):j())}),[y,j]),K=function e(t){return r?null:t},J=function e(t){return O?null:K(t)},ee=function e(t){return S?null:K(t)},te=function e(t){T&&t.stopPropagation()},ne=reactExports.useMemo((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,o=e.onKeyDown,s=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,h=e.onDragLeave,d=e.onDrop,p=_objectWithoutProperties$1(e,_excluded3);return _objectSpread(_objectSpread(_defineProperty$2({onKeyDown:J(composeEventHandlers(o,X)),onFocus:J(composeEventHandlers(s,Y)),onBlur:J(composeEventHandlers(a,Z)),onClick:K(composeEventHandlers(l,q)),onDragEnter:ee(composeEventHandlers(c,V)),onDragOver:ee(composeEventHandlers(u,W)),onDragLeave:ee(composeEventHandlers(h,H)),onDrop:ee(composeEventHandlers(d,z)),role:"string"==typeof i&&""!==i?i:"presentation"},n,R),r||O?{}:{tabIndex:0}),p)}}),[R,X,Y,Z,q,V,W,H,z,O,S,r]),re=reactExports.useCallback((function(e){e.stopPropagation()}),[]),ie=reactExports.useMemo((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,i=e.onClick,o=_objectWithoutProperties$1(e,_excluded4);return _objectSpread(_objectSpread({},_defineProperty$2({accept:w,multiple:a,type:"file",style:{display:"none"},onChange:K(composeEventHandlers(r,z)),onClick:K(composeEventHandlers(i,re)),tabIndex:-1},n,I)),o)}}),[I,n,a,z,r]);return _objectSpread(_objectSpread({},$),{},{isFocused:L&&!r,getRootProps:ne,getInputProps:ie,rootRef:R,inputRef:I,open:K(j)})}function reducer(e,t){switch(t.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return _objectSpread({},initialState);default:return e}}function noop$1(){}const CancelButton=({onClick:e})=>jsx(Button,{color:"gray",onClick:e,children:"Cancel"}),UploadFileModal=({open:e,onClose:t,onFileUpload:n,header:r})=>{const i=reactExports.useCallback((e=>{e.forEach((e=>{const r=new FileReader;r.onabort=()=>console.log("file reading was aborted!"),r.onerror=()=>console.log("file reading failed!"),r.onload=()=>{n(r.result),t()},r.readAsBinaryString(e)}))}),[]),{getRootProps:o,getInputProps:s,isDragActive:a,inputRef:l}=useDropzone({onDrop:e=>i(e),multiple:!1,onDragEnter:e=>{},onDragLeave:e=>{},onDragOver:e=>{},accept:{"application/json":[".robart"]}});return jsxs(Modal,{show:e,onClose:t,children:[jsx(Modal.Header,{children:r}),jsx(Modal.Body,{children:jsxs("div",{className:"border-1 flex justify-center border-gray-500 bg-gray-50 p-5 py-14 text-lg shadow-lg",...o(),children:[jsx("input",{ref:l,...s()}),jsx("p",{children:"Drag & drop a project file here, or click to select a file"})]})}),jsx(Modal.Footer,{children:jsx(CancelButton,{onClick:t})})]})},useUIState=create$2()(((e,t)=>({settingsModalOpen:!1,curveEditorOpen:!1,openSimulation:!1,robotManagerModalOpen:!1,toggleSettingsModal:()=>e({settingsModalOpen:!t().settingsModalOpen}),toggleCurveEditor:()=>e({curveEditorOpen:!t().curveEditorOpen}),toggleRobotManager:()=>{e({robotManagerModalOpen:!t().robotManagerModalOpen})},toggleSimulation:()=>{e({openSimulation:!t().openSimulation})}}))),ConfirmationModal=({open:e,onCancel:t,onConfirm:n,header:r,children:i})=>jsxs(Modal,{show:e,onClose:t,children:[jsx(Modal.Header,{children:r}),jsx(Modal.Body,{children:i}),jsxs(Modal.Footer,{children:[jsx(Button,{color:"gray",onClick:t,children:"Cancel"}),jsx(Button,{color:"failure",onClick:n,children:"Confirm"})]})]});var constants={exports:{}},reactReconcilerConstants_production_min={
/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
ConcurrentRoot:1,ContinuousEventPriority:4,DefaultEventPriority:16,DiscreteEventPriority:1,IdleEventPriority:536870912,LegacyRoot:0};constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(t);function a(){const n=r(t);if(!o(s,n)){const t=s;e(s=n,t)}}return n.add(a),()=>n.delete(a)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const isSSR="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(e){const t="function"==typeof e?createStore$1(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=reactExports.useReducer((e=>e+1),0),i=t.getState(),o=reactExports.useRef(i),s=reactExports.useRef(e),a=reactExports.useRef(n),l=reactExports.useRef(!1),c=reactExports.useRef();let u;void 0===c.current&&(c.current=e(i));let h=!1;(o.current!==i||s.current!==e||a.current!==n||l.current)&&(u=e(i),h=!n(c.current,u)),useIsomorphicLayoutEffect$1((()=>{h&&(c.current=u),o.current=i,s.current=e,a.current=n,l.current=!1}));const d=reactExports.useRef(i);useIsomorphicLayoutEffect$1((()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);a.current(c.current,n)||(o.current=e,c.current=n,r())}catch(e){l.current=!0,r()}},n=t.subscribe(e);return t.getState()!==d.current&&e(),n}),[]);const p=h?u:c.current;return reactExports.useDebugValue(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={},hasRequiredScheduler_production_min,hasRequiredScheduler;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function y(e){if(m=!1,v(e),!f)if(null!==n(l))f=!0,M(O);else{var t=n(c);null!==t&&$(y,t.startTime-e)}}function O(t,i){f=!1,m&&(m=!1,_(E),E=-1),p=!0;var o=d;try{for(v(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!A());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&r(l),v(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var g=n(c);null!==g&&$(y,g.startTime-i),u=!1}return u}finally{h=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,x=null,E=-1,w=5,C=-1;function A(){return!(e.unstable_now()-C<w)}function k(){if(null!==x){var t=e.unstable_now();C=t;var n=!0;try{n=x(!0,t)}finally{n?S():(T=!1,x=null)}}else T=!1}if("function"==typeof b)S=function(){b(k)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=k,S=function(){I.postMessage(null)}}else S=function(){g(k,0)};function M(e){x=e,T||(T=!0,S())}function $(t,n){E=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,M(O))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,o){var s=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(m?(_(E),E=-1):m=!0,$(y,o-s))):(r.sortIndex=a,t(l,r),f||p||(f=!0,M(O))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(scheduler_production_min$1)),scheduler_production_min$1}function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}
/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function e(t){var n={},r=reactExports,i=requireScheduler(),o=Object.assign;function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),O=Symbol.iterator;function S(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=O&&e[O]||e["@@iterator"])?e:null}function T(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case _:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case b:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case v:t=e._payload,e=e._init;try{return T(e(t))}catch(n){}}return null}function x(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function w(e){if(E(e)!==e)throw Error(s(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return w(i),e;if(o===r)return w(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function A(e){return null!==(e=C(e))?k(e):null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=k(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var I,M=Array.isArray,$=t.getPublicInstance,P=t.getRootHostContext,L=t.getChildHostContext,D=t.prepareForCommit,N=t.resetAfterCommit,B=t.createInstance,F=t.appendInitialChild,G=t.finalizeInitialChildren,U=t.prepareUpdate,V=t.shouldSetTextContent,W=t.createTextInstance,H=t.scheduleTimeout,Q=t.cancelTimeout,z=t.noTimeout,j=t.isPrimaryRenderer,X=t.supportsMutation,Y=t.supportsPersistence,Z=t.supportsHydration,q=t.getInstanceFromNode,K=t.preparePortalMount,J=t.getCurrentEventPriority,ee=t.detachDeletedInstance,te=t.supportsMicrotasks,ne=t.scheduleMicrotask,re=t.supportsTestSelectors,ie=t.findFiberRoot,oe=t.getBoundingRect,se=t.getTextContent,ae=t.isHiddenSubtree,le=t.matchAccessibilityRole,ce=t.setFocusIfFocusable,ue=t.setupIntersectionObserver,he=t.appendChild,de=t.appendChildToContainer,pe=t.commitTextUpdate,fe=t.commitMount,me=t.commitUpdate,ge=t.insertBefore,_e=t.insertInContainerBefore,be=t.removeChild,ve=t.removeChildFromContainer,ye=t.resetTextContent,Oe=t.hideInstance,Se=t.hideTextInstance,Te=t.unhideInstance,xe=t.unhideTextInstance,Ee=t.clearContainer,we=t.cloneInstance,Ce=t.createContainerChildSet,Ae=t.appendChildToContainerChildSet,ke=t.finalizeContainerChildren,Re=t.replaceContainerChildren,Ie=t.cloneHiddenInstance,Me=t.cloneHiddenTextInstance,$e=t.canHydrateInstance,Pe=t.canHydrateTextInstance,Le=t.canHydrateSuspenseInstance,De=t.isSuspenseInstancePending,Ne=t.isSuspenseInstanceFallback,Be=t.registerSuspenseInstanceRetry,Fe=t.getNextHydratableSibling,Ge=t.getFirstHydratableChild,Ue=t.getFirstHydratableChildWithinContainer,Ve=t.getFirstHydratableChildWithinSuspenseInstance,We=t.hydrateInstance,He=t.hydrateTextInstance,Qe=t.hydrateSuspenseInstance,ze=t.getNextHydratableInstanceAfterSuspenseInstance,je=t.commitHydratedContainer,Xe=t.commitHydratedSuspenseInstance,Ye=t.clearSuspenseBoundary,Ze=t.clearSuspenseBoundaryFromContainer,qe=t.shouldDeleteUnhydratedTailInstances,Ke=t.didNotMatchHydratedContainerTextInstance,Je=t.didNotMatchHydratedTextInstance;function et(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],ot=-1;function st(e){return{current:e}}function at(e){0>ot||(e.current=it[ot],it[ot]=null,ot--)}function lt(e,t){ot++,it[ot]=e.current,e.current=t}var ct={},ut=st(ct),ht=st(!1),dt=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ft(e){return null!=(e=e.childContextTypes)}function mt(){at(ht),at(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(s(168));lt(ut,t),lt(ht,n)}function _t(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,x(e)||"Unknown",i));return o({},n,r)}function bt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(ht,ht.current),!0}function vt(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=_t(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,at(ht),at(ut),lt(ut,e)):at(ht),lt(ht,n)}var yt=Math.clz32?Math.clz32:function Ot(e){return e>>>=0,0===e?32:31-(St(e)/Tt|0)|0},St=Math.log,Tt=Math.LN2;var xt=64,Et=4194304;function wt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=wt(a):0!==(o&=s)&&(r=wt(o))}else 0!==(s=n&~i)?r=wt(s):0!==o&&(r=wt(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-yt(t)),r|=e[n],t&=~i;return r}function At(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Rt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function It(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-yt(t)]=n}function Mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $t=0;function Pt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Lt=i.unstable_scheduleCallback,Dt=i.unstable_cancelCallback,Nt=i.unstable_shouldYield,Bt=i.unstable_requestPaint,Ft=i.unstable_now,Gt=i.unstable_ImmediatePriority,Ut=i.unstable_UserBlockingPriority,Vt=i.unstable_NormalPriority,Wt=i.unstable_IdlePriority,Ht=null,Qt=null;var zt="function"==typeof Object.is?Object.is:function jt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Xt=null,Yt=!1,Zt=!1;function qt(e){null===Xt?Xt=[e]:Xt.push(e)}function Kt(){if(!Zt&&null!==Xt){Zt=!0;var e=0,t=$t;try{var n=Xt;for($t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Xt=null,Yt=!1}catch(e2){throw null!==Xt&&(Xt=Xt.slice(e+1)),Lt(Gt,Kt),e2}finally{$t=t,Zt=!1}}return null}var Jt=a.ReactCurrentBatchConfig;function en(e,t){if(zt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!zt(e[i],t[i]))return!1}return!0}function tn(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function nn(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var rn=st(null),on=null,sn=null,an=null;function ln(){an=sn=on=null}function cn(e,t,n){j?(lt(rn,t._currentValue),t._currentValue=n):(lt(rn,t._currentValue2),t._currentValue2=n)}function un(e){var t=rn.current;at(rn),j?e._currentValue=t:e._currentValue2=t}function hn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dn(e,t){on=e,an=sn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Bi=!0),e.firstContext=null)}function pn(e){var t=j?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===sn){if(null===on)throw Error(s(308));sn=e,on.dependencies={lanes:0,firstContext:e}}else sn=sn.next=e;return t}var fn=null,mn=!1;function gn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _n(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==qo&&0!=(1&e.mode)&&0==(2&Zo)?(null===(e=n.interleaved)?(t.next=t,null===fn?fn=[n]:fn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Mt(e,n)}}function On(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sn(e,t,n,r){var i=e.updateQueue;mn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==s){var d=i.baseState;for(a=0,h=u=c=null,l=s;;){var p=l.lane,f=l.eventTime;if((r&p)===p){null!==h&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(f,d,p):m))break e;d=o({},d,p);break e;case 2:mn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=f,c=d):h=h.next=f,a|=p;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(p=l).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);is|=a,e.lanes=a,e.memoizedState=d}}function Tn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var xn=(new r.Component).refs;function En(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var wn={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ts(),i=xs(e),o=bn(r,i);o.payload=t,null!=n&&(o.callback=n),vn(e,o),null!==(t=Es(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ts(),i=xs(e),o=bn(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),vn(e,o),null!==(t=Es(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ts(),r=xs(e),i=bn(n,r);i.tag=2,null!=t&&(i.callback=t),vn(e,i),null!==(t=Es(e,r,n))&&yn(t,e,r)}};function Cn(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,o))}function An(e,t,n){var r=!1,i=ct,o=t.contextType;return"object"==typeof o&&null!==o?o=pn(o):(i=ft(t)?dt:ut.current,o=(r=null!=(r=t.contextTypes))?pt(e,i):ct),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wn.enqueueReplaceState(t,t.state,null)}function Rn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=xn,gn(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=pn(o):(o=ft(t)?dt:ut.current,i.context=pt(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(En(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&wn.enqueueReplaceState(i,i.state,null),Sn(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var In=[],Mn=0,$n=null,Pn=0,Ln=[],Dn=0,Nn=null,Bn=1,Fn="";function Gn(e,t){In[Mn++]=Pn,In[Mn++]=$n,$n=e,Pn=t}function Un(e,t,n){Ln[Dn++]=Bn,Ln[Dn++]=Fn,Ln[Dn++]=Nn,Nn=e;var r=Bn;e=Fn;var i=32-yt(r)-1;r&=~(1<<i),n+=1;var o=32-yt(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Bn=1<<32-yt(t)+i|n<<i|r,Fn=o+e}else Bn=1<<o|n<<i|r,Fn=e}function Vn(e){null!==e.return&&(Gn(e,1),Un(e,1,0))}function Wn(e){for(;e===$n;)$n=In[--Mn],In[Mn]=null,Pn=In[--Mn],In[Mn]=null;for(;e===Nn;)Nn=Ln[--Dn],Ln[Dn]=null,Fn=Ln[--Dn],Ln[Dn]=null,Bn=Ln[--Dn],Ln[Dn]=null}var Hn=null,Qn=null,zn=!1,jn=!1,Xn=null;function Yn(e,t){var n=ea(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Zn(e,t){switch(e.tag){case 5:return null!==(t=$e(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Qn=Ge(t),!0);case 6:return null!==(t=Pe(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Qn=null,!0);case 13:if(null!==(t=Le(t))){var n=null!==Nn?{id:Bn,overflow:Fn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ea(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Qn=null,!0}return!1;default:return!1}}function qn(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Kn(e){if(zn){var t=Qn;if(t){var n=t;if(!Zn(e,t)){if(qn(e))throw Error(s(418));t=Fe(n);var r=Hn;t&&Zn(e,t)?Yn(r,n):(e.flags=-4097&e.flags|2,zn=!1,Hn=e)}}else{if(qn(e))throw Error(s(418));e.flags=-4097&e.flags|2,zn=!1,Hn=e}}}function Jn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function er(e){if(!Z||e!==Hn)return!1;if(!zn)return Jn(e),zn=!0,!1;if(3!==e.tag&&(5!==e.tag||qe(e.type)&&!V(e.type,e.memoizedProps))){var t=Qn;if(t){if(qn(e)){for(e=Qn;e;)e=Fe(e);throw Error(s(418))}for(;t;)Yn(e,t),t=Fe(t)}}if(Jn(e),13===e.tag){if(!Z)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Qn=ze(e)}else Qn=Hn?Fe(e.stateNode):null;return!0}function tr(){Z&&(Qn=Hn=null,jn=zn=!1)}function nr(e){null===Xn?Xn=[e]:Xn.push(e)}function rr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===xn&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ir(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function or(e){return(0,e._init)(e._payload)}function sr(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=na(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=sa(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var o=n.type;return o===u?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===v&&or(o)===t.type)?((r=i(t,n.props)).ref=rr(e,t,n),r.return=e,r):((r=ra(n.type,n.key,n.props,null,e.mode,r)).ref=rr(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=aa(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=ia(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=sa(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ra(t.type,t.key,t.props,null,e.mode,n)).ref=rr(e,null,t),n.return=e,n;case c:return(t=aa(t,e.mode,n)).return=e,t;case v:return m(e,(0,t._init)(t._payload),n)}if(M(t)||S(t))return(t=ia(t,e.mode,n,null)).return=e,t;ir(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case c:return n.key===i?p(e,t,n,r):null;case v:return g(e,t,(i=n._init)(n._payload),r)}if(M(n)||S(n))return null!==i?null:f(e,t,n,r,null);ir(e,n)}return null}function _(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case v:return _(e,t,n,(0,r._init)(r._payload),i)}if(M(r)||S(r))return f(t,e=e.get(n)||null,r,i,null);ir(t,r)}return null}return function h(d,p,f,b){if("object"==typeof f&&null!==f&&f.type===u&&null===f.key&&(f=f.props.children),"object"==typeof f&&null!==f){switch(f.$$typeof){case l:e:{for(var y=f.key,O=p;null!==O;){if(O.key===y){if((y=f.type)===u){if(7===O.tag){n(d,O.sibling),(p=i(O,f.props.children)).return=d,d=p;break e}}else if(O.elementType===y||"object"==typeof y&&null!==y&&y.$$typeof===v&&or(y)===O.type){n(d,O.sibling),(p=i(O,f.props)).ref=rr(d,O,f),p.return=d,d=p;break e}n(d,O);break}t(d,O),O=O.sibling}f.type===u?((p=ia(f.props.children,d.mode,b,f.key)).return=d,d=p):((b=ra(f.type,f.key,f.props,null,d.mode,b)).ref=rr(d,p,f),b.return=d,d=b)}return a(d);case c:e:{for(O=f.key;null!==p;){if(p.key===O){if(4===p.tag&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){n(d,p.sibling),(p=i(p,f.children||[])).return=d,d=p;break e}n(d,p);break}t(d,p),p=p.sibling}(p=aa(f,d.mode,b)).return=d,d=p}return a(d);case v:return h(d,p,(O=f._init)(f._payload),b)}if(M(f))return function T(i,s,a,l){for(var c=null,u=null,h=s,d=s=0,p=null;null!==h&&d<a.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var f=g(i,h,a[d],l);if(null===f){null===h&&(h=p);break}e&&h&&null===f.alternate&&t(i,h),s=o(f,s,d),null===u?c=f:u.sibling=f,u=f,h=p}if(d===a.length)return n(i,h),zn&&Gn(i,d),c;if(null===h){for(;d<a.length;d++)null!==(h=m(i,a[d],l))&&(s=o(h,s,d),null===u?c=h:u.sibling=h,u=h);return zn&&Gn(i,d),c}for(h=r(i,h);d<a.length;d++)null!==(p=_(h,i,d,a[d],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?d:p.key),s=o(p,s,d),null===u?c=p:u.sibling=p,u=p);return e&&h.forEach((function(e){return t(i,e)})),zn&&Gn(i,d),c}(d,p,f,b);if(S(f))return function x(i,a,l,c){var u=S(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,d=a,p=a=0,f=null,b=l.next();null!==d&&!b.done;p++,b=l.next()){d.index>p?(f=d,d=null):f=d.sibling;var v=g(i,d,b.value,c);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,p),null===h?u=v:h.sibling=v,h=v,d=f}if(b.done)return n(i,d),zn&&Gn(i,p),u;if(null===d){for(;!b.done;p++,b=l.next())null!==(b=m(i,b.value,c))&&(a=o(b,a,p),null===h?u=b:h.sibling=b,h=b);return zn&&Gn(i,p),u}for(d=r(i,d);!b.done;p++,b=l.next())null!==(b=_(d,i,p,b.value,c))&&(e&&null!==b.alternate&&d.delete(null===b.key?p:b.key),a=o(b,a,p),null===h?u=b:h.sibling=b,h=b);return e&&d.forEach((function(e){return t(i,e)})),zn&&Gn(i,p),u}(d,p,f,b);ir(d,f)}return"string"==typeof f&&""!==f||"number"==typeof f?(f=""+f,null!==p&&6===p.tag?(n(d,p.sibling),(p=i(p,f)).return=d,d=p):(n(d,p),(p=sa(f,d.mode,b)).return=d,d=p),a(d)):n(d,p)}}var ar=sr(!0),lr=sr(!1),cr={},ur=st(cr),hr=st(cr),dr=st(cr);function pr(e){if(e===cr)throw Error(s(174));return e}function fr(e,t){lt(dr,t),lt(hr,e),lt(ur,cr),e=P(t),at(ur),lt(ur,e)}function mr(){at(ur),at(hr),at(dr)}function gr(e){var t=pr(dr.current),n=pr(ur.current);n!==(t=L(n,e.type,t))&&(lt(hr,e),lt(ur,t))}function _r(e){hr.current===e&&(at(ur),at(hr))}var br=st(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||De(n)||Ne(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function Or(){for(var e=0;e<yr.length;e++){var t=yr[e];j?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var Sr=a.ReactCurrentDispatcher,Tr=a.ReactCurrentBatchConfig,xr=0,Er=null,wr=null,Cr=null,Ar=!1,kr=!1,Rr=0,Ir=0;function Mr(){throw Error(s(321))}function $r(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function Pr(e,t,n,r,i,o){if(xr=o,Er=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sr.current=null===e||null===e.memoizedState?gi:_i,e=n(r,i),kr){o=0;do{if(kr=!1,Rr=0,25<=o)throw Error(s(301));o+=1,Cr=wr=null,t.updateQueue=null,Sr.current=bi,e=n(r,i)}while(kr)}if(Sr.current=mi,t=null!==wr&&null!==wr.next,xr=0,Cr=wr=Er=null,Ar=!1,t)throw Error(s(300));return e}function Lr(){var e=0!==Rr;return Rr=0,e}function Dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Cr?Er.memoizedState=Cr=e:Cr=Cr.next=e,Cr}function Nr(){if(null===wr){var e=Er.alternate;e=null!==e?e.memoizedState:null}else e=wr.next;var t=null===Cr?Er.memoizedState:Cr.next;if(null!==t)Cr=t,wr=e;else{if(null===e)throw Error(s(310));e={memoizedState:(wr=e).memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},null===Cr?Er.memoizedState=Cr=e:Cr=Cr.next=e}return Cr}function Br(e,t){return"function"==typeof t?t(e):t}function Fr(e){var t=Nr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=wr,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((xr&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,Er.lanes|=h,is|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,zt(r,t.memoizedState)||(Bi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,Er.lanes|=o,is|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gr(e){var t=Nr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);zt(o,t.memoizedState)||(Bi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ur(){}function Vr(e,t){var n=Er,r=Nr(),i=t(),o=!zt(r.memoizedState,i);if(o&&(r.memoizedState=i,Bi=!0),r=r.queue,Jr(Qr.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==Cr&&1&Cr.memoizedState.tag){if(n.flags|=2048,Xr(9,Hr.bind(null,n,r,i,t),void 0,null),null===qo)throw Error(s(349));0!=(30&xr)||Wr(n,t,i)}return i}function Wr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Er.updateQueue)?(t={lastEffect:null,stores:null},Er.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hr(e,t,n,r){t.value=n,t.getSnapshot=r,zr(t)&&Es(e,1,-1)}function Qr(e,t,n){return n((function(){zr(t)&&Es(e,1,-1)}))}function zr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch(r){return!0}}function jr(e){var t=Dr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:e},t.queue=e,e=e.dispatch=ui.bind(null,Er,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Er.updateQueue)?(t={lastEffect:null,stores:null},Er.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Yr(){return Nr().memoizedState}function Zr(e,t,n,r){var i=Dr();Er.flags|=e,i.memoizedState=Xr(1|t,n,void 0,void 0===r?null:r)}function qr(e,t,n,r){var i=Nr();r=void 0===r?null:r;var o=void 0;if(null!==wr){var s=wr.memoizedState;if(o=s.destroy,null!==r&&$r(r,s.deps))return void(i.memoizedState=Xr(t,n,o,r))}Er.flags|=e,i.memoizedState=Xr(1|t,n,o,r)}function Kr(e,t){return Zr(8390656,8,e,t)}function Jr(e,t){return qr(2048,8,e,t)}function ei(e,t){return qr(4,2,e,t)}function ti(e,t){return qr(4,4,e,t)}function ni(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ri(e,t,n){return n=null!=n?n.concat([e]):null,qr(4,4,ni.bind(null,t,e),n)}function ii(){}function oi(e,t){var n=Nr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$r(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function si(e,t){var n=Nr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$r(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=$t;$t=0!==n&&4>n?n:4,e(!0);var r=Tr.transition;Tr.transition={};try{e(!1),t()}finally{$t=n,Tr.transition=r}}function li(){return Nr().memoizedState}function ci(e,t,n){var r=xs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hi(e)?di(t,n):(pi(e,t,n),null!==(e=Es(e,r,n=Ts()))&&fi(e,t,r))}function ui(e,t,n){var r=xs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hi(e))di(t,i);else{pi(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,zt(a,s))return}catch(l){}null!==(e=Es(e,r,n=Ts()))&&fi(e,t,r)}}function hi(e){var t=e.alternate;return e===Er||null!==t&&t===Er}function di(e,t){kr=Ar=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pi(e,t,n){null!==qo&&0!=(1&e.mode)&&0==(2&Zo)?(null===(e=t.interleaved)?(n.next=n,null===fn?fn=[t]:fn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function fi(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Mt(e,n)}}var mi={readContext:pn,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},gi={readContext:pn,useCallback:function(e,t){return Dr().memoizedState=[e,void 0===t?null:t],e},useContext:pn,useEffect:Kr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Zr(4194308,4,ni.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zr(4,2,e,t)},useMemo:function(e,t){var n=Dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ci.bind(null,Er,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Dr().memoizedState=e},useState:jr,useDebugValue:ii,useDeferredValue:function(e){var t=jr(e),n=t[0],r=t[1];return Kr((function(){var t=Tr.transition;Tr.transition={};try{r(e)}finally{Tr.transition=t}}),[e]),n},useTransition:function(){var e=jr(!1),t=e[0];return e=ai.bind(null,e[1]),Dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Er,i=Dr();if(zn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===qo)throw Error(s(349));0!=(30&xr)||Wr(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Kr(Qr.bind(null,r,o,e),[e]),r.flags|=2048,Xr(9,Hr.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Dr(),t=qo.identifierPrefix;if(zn){var n=Fn;t=":"+t+"R"+(n=(Bn&~(1<<32-yt(Bn)-1)).toString(32)+n),0<(n=Rr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ir++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_i={readContext:pn,useCallback:oi,useContext:pn,useEffect:Jr,useImperativeHandle:ri,useInsertionEffect:ei,useLayoutEffect:ti,useMemo:si,useReducer:Fr,useRef:Yr,useState:function(){return Fr(Br)},useDebugValue:ii,useDeferredValue:function(e){var t=Fr(Br),n=t[0],r=t[1];return Jr((function(){var t=Tr.transition;Tr.transition={};try{r(e)}finally{Tr.transition=t}}),[e]),n},useTransition:function(){return[Fr(Br)[0],Nr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Vr,useId:li,unstable_isNewReconciler:!1},bi={readContext:pn,useCallback:oi,useContext:pn,useEffect:Jr,useImperativeHandle:ri,useInsertionEffect:ei,useLayoutEffect:ti,useMemo:si,useReducer:Gr,useRef:Yr,useState:function(){return Gr(Br)},useDebugValue:ii,useDeferredValue:function(e){var t=Gr(Br),n=t[0],r=t[1];return Jr((function(){var t=Tr.transition;Tr.transition={};try{r(e)}finally{Tr.transition=t}}),[e]),n},useTransition:function(){return[Gr(Br)[0],Nr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Vr,useId:li,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=tn(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Oi,Si,Ti,xi,Ei="function"==typeof WeakMap?WeakMap:Map;function wi(e,t,n){(n=bn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ps||(ps=!0,fs=r),yi(0,t)},n}function Ci(e,t,n){(n=bn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!=typeof r&&(null===ms?ms=new Set([this]):ms.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ai(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ei;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Xs.bind(null,e,t,n),t.then(e,e))}function ki(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ri(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=bn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ii(e){e.flags|=4}function Mi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(X)Oi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Si=function(){},Ti=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,s=pr(ur.current);n=U(o,n,e,r,i,s),(t.updateQueue=n)&&Ii(t)}},xi=function(e,t,n,r){n!==r&&Ii(t)};else if(Y){Oi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ie(o,i.type,i.memoizedProps,i)),F(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Me(o,i.memoizedProps,i)),F(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Oi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var $i=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ie(o,i.type,i.memoizedProps,i)),Ae(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Me(o,i.memoizedProps,i)),Ae(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),$i(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Si=function(e,t){var n=t.stateNode;if(!Mi(e,t)){e=n.containerInfo;var r=Ce(e);$i(r,t,!1,!1),n.pendingChildren=r,Ii(t),ke(e,r)}},Ti=function(e,t,n,r,i){var o=e.stateNode,s=e.memoizedProps;if((e=Mi(e,t))&&s===r)t.stateNode=o;else{var a=t.stateNode,l=pr(ur.current),c=null;s!==r&&(c=U(a,n,s,r,i,l)),e&&null===c?t.stateNode=o:(o=we(o,c,n,s,r,t,e,a),G(o,n,r,i,l)&&Ii(t),t.stateNode=o,e?Ii(t):Oi(o,t,!1,!1))}},xi=function(e,t,n,r){n!==r?(e=pr(dr.current),n=pr(ur.current),t.stateNode=W(r,e,n,t),Ii(t)):t.stateNode=e.stateNode}}else Si=function(){},Ti=function(){},xi=function(){};function Pi(e,t){if(!zn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Li(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Di(e,t,n){var r=t.pendingProps;switch(Wn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(t),null;case 1:case 17:return ft(t.type)&&mt(),Li(t),null;case 3:return r=t.stateNode,mr(),at(ht),at(ut),Or(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(er(t)?Ii(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Xn&&(Rs(Xn),Xn=null))),Si(e,t),Li(t),null;case 5:_r(t),n=pr(dr.current);var i=t.type;if(null!==e&&null!=t.stateNode)Ti(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Li(t),null}if(e=pr(ur.current),er(t)){if(!Z)throw Error(s(175));e=We(t.stateNode,t.type,t.memoizedProps,n,e,t,!jn),t.updateQueue=e,null!==e&&Ii(t)}else{var o=B(i,r,n,e,t);Oi(o,t,!1,!1),t.stateNode=o,G(o,i,r,n,e)&&Ii(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Li(t),null;case 6:if(e&&null!=t.stateNode)xi(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(e=pr(dr.current),n=pr(ur.current),er(t)){if(!Z)throw Error(s(176));if(e=t.stateNode,r=t.memoizedProps,(n=He(e,r,t,!jn))&&null!==(i=Hn))switch(o=0!=(1&i.mode),i.tag){case 3:Ke(i.stateNode.containerInfo,e,r,o);break;case 5:Je(i.type,i.memoizedProps,i.stateNode,e,r,o)}n&&Ii(t)}else t.stateNode=W(r,e,n,t)}return Li(t),null;case 13:if(at(br),r=t.memoizedState,zn&&null!==Qn&&0!=(1&t.mode)&&0==(128&t.flags)){for(e=Qn;e;)e=Fe(e);return tr(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=er(t),null===e){if(!r)throw Error(s(318));if(!Z)throw Error(s(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(317));Qe(e,t)}else tr(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Li(t),null}return null!==Xn&&(Rs(Xn),Xn=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?er(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&br.current)?0===ns&&(ns=3):Bs())),null!==t.updateQueue&&(t.flags|=4),Li(t),null);case 4:return mr(),Si(e,t),null===e&&K(t.stateNode.containerInfo),Li(t),null;case 10:return un(t.type._context),Li(t),null;case 19:if(at(br),null===(i=t.memoizedState))return Li(t),null;if(r=0!=(128&t.flags),null===(o=i.rendering))if(r)Pi(i,!1);else{if(0!==ns||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=vr(e))){for(t.flags|=128,Pi(i,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(br,1&br.current|2),t.child}e=e.sibling}null!==i.tail&&Ft()>us&&(t.flags|=128,r=!0,Pi(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(o))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Pi(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!zn)return Li(t),null}else 2*Ft()-i.renderingStartTime>us&&1073741824!==n&&(t.flags|=128,r=!0,Pi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ft(),t.sibling=null,e=br.current,lt(br,r?1&e|2:1&e),t):(Li(t),null);case 22:case 23:return Ps(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&es)&&(Li(t),X&&6&t.subtreeFlags&&(t.flags|=8192)):Li(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}var Ni=a.ReactCurrentOwner,Bi=!1;function Fi(e,t,n,r){t.child=null===e?lr(t,null,n,r):ar(t,e.child,n,r)}function Gi(e,t,n,r,i){n=n.render;var o=t.ref;return dn(t,i),r=Pr(e,t,n,r,o,i),n=Lr(),null===e||Bi?(zn&&n&&Vn(t),t.flags|=1,Fi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,so(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||ta(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ra(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vi(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:en)(s,r)&&e.ref===t.ref)return so(e,t,i)}return t.flags|=1,(e=na(o,r)).ref=t.ref,e.return=t,t.child=e}function Vi(e,t,n,r,i){if(null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref){if(Bi=!1,0==(e.lanes&i))return t.lanes=e.lanes,so(e,t,i);0!=(131072&e.flags)&&(Bi=!0)}return Qi(e,t,n,r,i)}function Wi(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(ts,es),es|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(ts,es),es|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,lt(ts,es),es|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(ts,es),es|=r;return Fi(e,t,i,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qi(e,t,n,r,i){var o=ft(n)?dt:ut.current;return o=pt(t,o),dn(t,i),n=Pr(e,t,n,r,o,i),r=Lr(),null===e||Bi?(zn&&r&&Vn(t),t.flags|=1,Fi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,so(e,t,i))}function zi(e,t,n,r,i){if(ft(n)){var o=!0;bt(t)}else o=!1;if(dn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),An(t,n,r),Rn(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=pn(c):c=pt(t,c=ft(n)?dt:ut.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&kn(t,s,r,c),mn=!1;var d=t.memoizedState;s.state=d,Sn(t,r,s,i),l=t.memoizedState,a!==r||d!==l||ht.current||mn?("function"==typeof u&&(En(t,n,u,r),l=t.memoizedState),(a=mn||Cn(t,n,a,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,_n(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:nn(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=pn(l):l=pt(t,l=ft(n)?dt:ut.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&kn(t,s,r,l),mn=!1,d=t.memoizedState,s.state=d,Sn(t,r,s,i);var f=t.memoizedState;a!==h||d!==f||ht.current||mn?("function"==typeof p&&(En(t,n,p,r),f=t.memoizedState),(c=mn||Cn(t,n,c,r,d,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ji(e,t,n,r,o,i)}function ji(e,t,n,r,i,o){Hi(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&vt(t,n,!1),so(e,t,o);r=t.stateNode,Ni.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ar(t,e.child,null,o),t.child=ar(t,null,a,o)):Fi(e,t,a,o),t.memoizedState=r.state,i&&vt(t,n,!0),t.child}function Xi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),fr(e,t.containerInfo)}function Yi(e,t,n,r,i){return tr(),nr(i),t.flags|=256,Fi(e,t,n,r),t.child}var Zi={dehydrated:null,treeContext:null,retryLane:0};function qi(e){return{baseLanes:e,cachePool:null}}function Ki(e,t,n){var r,i=t.pendingProps,o=br.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(br,1&o),null===e)return Kn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:Ne(e)?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=oa(o,i,0,null),e=ia(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qi(n),t.memoizedState=Zi,e):Ji(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,no(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,o=t.mode,i=oa({mode:"visible",children:i.children},o,0,null),(a=ia(a,o,n,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!=(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=qi(n),t.memoizedState=Zi,a);if(0==(1&t.mode))t=no(e,t,n,null);else if(Ne(r))t=no(e,t,n,Error(s(419)));else if(i=0!=(n&e.childLanes),Bi||i){if(null!==(i=qo)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(i=0!=(a&(i.suspendedLanes|n))?0:a)&&i!==o.retryLane&&(o.retryLane=i,Es(e,i,-1))}Bs(),t=no(e,t,n,Error(s(421)))}else De(r)?(t.flags|=128,t.child=e.child,t=Zs.bind(null,e),Be(r,t),t=null):(n=o.treeContext,Z&&(Qn=Ve(r),Hn=t,zn=!0,Xn=null,jn=!1,null!==n&&(Ln[Dn++]=Bn,Ln[Dn++]=Fn,Ln[Dn++]=Nn,Bn=n.id,Fn=n.overflow,Nn=t)),(t=Ji(t,t.pendingProps.children)).flags|=4096);return t}return a?(i=to(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?qi(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Zi,i):(n=eo(e,t,i.children,n),t.memoizedState=null,n)}return a?(i=to(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?qi(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Zi,i):(n=eo(e,t,i.children,n),t.memoizedState=null,n)}function Ji(e,t){return(t=oa({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function eo(e,t,n,r){var i=e.child;return e=i.sibling,n=na(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function to(e,t,n,r,i){var o=t.mode,s=(e=e.child).sibling,a={mode:"hidden",children:n};return 0==(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=na(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==s?r=na(s,r):(r=ia(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function no(e,t,n,r){return null!==r&&nr(r),ar(t,e.child,null,n),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ro(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),hn(e.return,t,n)}function io(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function oo(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fi(e,t,r.children,n),0!=(2&(r=br.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ro(e,n,t);else if(19===e.tag)ro(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(br,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),io(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}io(t,!0,n,null,o);break;case"together":io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function so(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),is|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=na(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=na(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ao(e,t){switch(Wn(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return mr(),at(ht),at(ut),Or(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return _r(t),null;case 13:if(at(br),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));tr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return at(br),null;case 4:return mr(),null;case 10:return un(t.type._context),null;case 22:case 23:return Ps(),null;default:return null}}var lo=!1,co=!1,uo="function"==typeof WeakSet?WeakSet:Set,ho=null;function po(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){js(e,t,r)}else n.current=null}function fo(e,t,n){try{n()}catch(r){js(e,t,r)}}var mo=!1;function go(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&fo(t,n,o)}i=i.next}while(i!==r)}}function _o(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bo(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=$(n);else e=n;"function"==typeof t?t(e):t.current=e}}function vo(e,t,n){if(Qt&&"function"==typeof Qt.onCommitFiberUnmount)try{Qt.onCommitFiberUnmount(Ht,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!=(2&i)||0!=(4&i))&&fo(t,n,o),r=r.next}while(r!==e)}break;case 1:if(po(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){js(t,n,s)}break;case 5:po(t,n);break;case 4:X?Co(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Ce(t),Re(t,n))}}function yo(e,t,n){for(var r=t;;)if(vo(e,r,n),null===r.child||X&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Oo(e){var t=e.alternate;null!==t&&(e.alternate=null,Oo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function So(e){return 5===e.tag||3===e.tag||4===e.tag}function To(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||So(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xo(e){if(X){e:{for(var t=e.return;null!==t;){if(So(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(ye(t),n.flags&=-33),wo(e,n=To(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,Eo(e,n=To(e),t);break;default:throw Error(s(161))}}}function Eo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?_e(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Eo(e,t,n),e=e.sibling;null!==e;)Eo(e,t,n),e=e.sibling}function wo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(wo(e,t,n),e=e.sibling;null!==e;)wo(e,t,n),e=e.sibling}function Co(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag)yo(e,o,n),i?ve(r,o.stateNode):be(r,o.stateNode);else if(18===o.tag)i?Ze(r,o.stateNode):Ye(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(vo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Ao(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:return go(3,t,t.return),_o(3,t),void go(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&null!==e&&e.memoizedState.isDehydrated&&je(t.stateNode.containerInfo));case 13:case 19:return void ko(t)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:return go(3,t,t.return),_o(3,t),void go(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void ko(t);case 3:Z&&null!==e&&e.memoizedState.isDehydrated&&je(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function ko(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new uo),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ro(e,t,n){ho=e,Io(e)}function Io(e,t,n){for(var r=0!=(1&e.mode);null!==ho;){var i=ho,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||lo;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||co;a=lo;var c=co;if(lo=s,(co=l)&&!c)for(ho=i;null!==ho;)l=(s=ho).child,22===s.tag&&null!==s.memoizedState?Po(i):null!==l?(l.return=s,ho=l):Po(i);for(;null!==o;)ho=o,Io(o),o=o.sibling;ho=i,lo=a,co=c}Mo(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,ho=o):Mo(e)}}function Mo(e){for(;null!==ho;){var t=ho;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:co||_o(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!co)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Tn(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=$(t.child.stateNode);break;case 1:n=t.child.stateNode}Tn(t,a,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Xe(h)}}}break;default:throw Error(s(163))}co||512&t.flags&&bo(t)}catch(d){js(t,t.return,d)}}if(t===e){ho=null;break}if(null!==(n=t.sibling)){n.return=t.return,ho=n;break}ho=t.return}}function $o(e){for(;null!==ho;){var t=ho;if(t===e){ho=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ho=n;break}ho=t.return}}function Po(e){for(;null!==ho;){var t=ho;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_o(4,t)}catch(l){js(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){js(t,i,l)}}var o=t.return;try{bo(t)}catch(l){js(t,o,l)}break;case 5:var s=t.return;try{bo(t)}catch(l){js(t,s,l)}}}catch(l){js(t,t.return,l)}if(t===e){ho=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ho=a;break}ho=t.return}}var Lo=0,Do=1,No=2,Bo=3,Fo=4;if("function"==typeof Symbol&&Symbol.for){var Go=Symbol.for;Lo=Go("selector.component"),Do=Go("selector.has_pseudo_class"),No=Go("selector.role"),Bo=Go("selector.test_id"),Fo=Go("selector.text")}function Uo(e){var t=q(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=ie(e)))throw Error(s(362));return e.stateNode.current}function Vo(e,t){switch(t.$$typeof){case Lo:if(e.type===t.value)return!0;break;case Do:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!ae(r)){for(;null!=o&&Vo(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case No:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Fo:if((5===e.tag||6===e.tag)&&null!==(e=se(e))&&0<=e.indexOf(t.value))return!0;break;case Bo:if(5===e.tag&&("string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Wo(e){switch(e.$$typeof){case Lo:return"<"+(T(e.value)||"Unknown")+">";case Do:return":has("+(Wo(e)||"")+")";case No:return'[role="'+e.value+'"]';case Fo:return'"'+e.value+'"';case Bo:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Ho(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],s=t[o];if(5!==i.tag||!ae(i)){for(;null!=s&&Vo(i,s);)s=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Qo(e,t){if(!re)throw Error(s(363));e=Ho(e=Uo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)ae(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var zo=Math.ceil,jo=a.ReactCurrentDispatcher,Xo=a.ReactCurrentOwner,Yo=a.ReactCurrentBatchConfig,Zo=0,qo=null,Ko=null,Jo=0,es=0,ts=st(0),ns=0,rs=null,is=0,os=0,ss=0,as=null,ls=null,cs=0,us=1/0;function hs(){us=Ft()+500}var ds,ps=!1,fs=null,ms=null,gs=!1,_s=null,bs=0,vs=0,ys=null,Os=-1,Ss=0;function Ts(){return 0!=(6&Zo)?Ft():-1!==Os?Os:Os=Ft()}function xs(e){return 0==(1&e.mode)?1:0!=(2&Zo)&&0!==Jo?Jo&-Jo:null!==Jt.transition?(0===Ss&&(e=xt,0==(4194240&(xt<<=1))&&(xt=64),Ss=e),Ss):0!==(e=$t)?e:J()}function Es(e,t,n){if(50<vs)throw vs=0,ys=null,Error(s(185));var r=ws(e,t);return null===r?null:(It(r,t,n),0!=(2&Zo)&&r===qo||(r===qo&&(0==(2&Zo)&&(os|=t),4===ns&&Is(r,Jo)),Cs(r,n),1===t&&0===Zo&&0==(1&e.mode)&&(hs(),Yt&&Kt())),r)}function ws(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Cs(e,t){var n=e.callbackNode;!function r(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-yt(o),a=1<<s,l=i[s];-1===l?0!=(a&n)&&0==(a&r)||(i[s]=At(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=Ct(e,e===qo?Jo:0);if(0===i)null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Dt(n),1===t)0===e.tag?function o(e){Yt=!0,qt(e)}(Ms.bind(null,e)):qt(Ms.bind(null,e)),te?ne((function(){0===Zo&&Kt()})):Lt(Gt,Kt),n=null;else{switch(Pt(i)){case 1:n=Gt;break;case 4:n=Ut;break;case 16:default:n=Vt;break;case 536870912:n=Wt}n=Ks(n,As.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function As(e,t){if(Os=-1,Ss=0,0!=(6&Zo))throw Error(s(327));var n=e.callbackNode;if(Qs()&&e.callbackNode!==n)return null;var r=Ct(e,e===qo?Jo:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=Fs(e,r);else{t=r;var i=Zo;Zo|=2;var o=Ns();for(qo===e&&Jo===t||(hs(),Ls(e,t));;)try{Us();break}catch(c){Ds(e,c)}ln(),jo.current=o,Zo=i,null!==Ko?t=0:(qo=null,Jo=0,t=ns)}if(0!==t){if(2===t&&(0!==(i=kt(e))&&(r=i,t=ks(e,i))),1===t)throw n=rs,Ls(e,0),Is(e,r),Cs(e,Ft()),n;if(6===t)Is(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function a(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!zt(o(),i))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Fs(e,r))&&(0!==(o=kt(e))&&(r=o,t=ks(e,o))),1===t))throw n=rs,Ls(e,0),Is(e,r),Cs(e,Ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Hs(e,ls);break;case 3:if(Is(e,r),(130023424&r)===r&&10<(t=cs+500-Ft())){if(0!==Ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Ts(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=H(Hs.bind(null,e,ls),t);break}Hs(e,ls);break;case 4:if(Is(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-yt(r);o=1<<l,(l=t[l])>i&&(i=l),r&=~o}if(r=i,10<(r=(120>(r=Ft()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zo(r/1960))-r)){e.timeoutHandle=H(Hs.bind(null,e,ls),r);break}Hs(e,ls);break;default:throw Error(s(329))}}}return Cs(e,Ft()),e.callbackNode===n?As.bind(null,e):null}function ks(e,t){var n=as;return e.current.memoizedState.isDehydrated&&(Ls(e,t).flags|=256),2!==(e=Fs(e,t))&&(t=ls,ls=n,null!==t&&Rs(t)),e}function Rs(e){null===ls?ls=e:ls.push.apply(ls,e)}function Is(e,t){for(t&=~ss,t&=~os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yt(t),r=1<<n;e[n]=-1,t&=~r}}function Ms(e){if(0!=(6&Zo))throw Error(s(327));Qs();var t=Ct(e,0);if(0==(1&t))return Cs(e,Ft()),null;var n=Fs(e,t);if(0!==e.tag&&2===n){var r=kt(e);0!==r&&(t=r,n=ks(e,r))}if(1===n)throw n=rs,Ls(e,0),Is(e,t),Cs(e,Ft()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hs(e,ls),Cs(e,Ft()),null}function $s(e){null!==_s&&0===_s.tag&&0==(6&Zo)&&Qs();var t=Zo;Zo|=1;var n=Yo.transition,r=$t;try{if(Yo.transition=null,$t=1,e)return e()}finally{$t=r,Yo.transition=n,0==(6&(Zo=t))&&Kt()}}function Ps(){es=ts.current,at(ts)}function Ls(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==z&&(e.timeoutHandle=z,Q(n)),null!==Ko)for(n=Ko.return;null!==n;){var r=n;switch(Wn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&mt();break;case 3:mr(),at(ht),at(ut),Or();break;case 5:_r(r);break;case 4:mr();break;case 13:case 19:at(br);break;case 10:un(r.type._context);break;case 22:case 23:Ps()}n=n.return}if(qo=e,Ko=e=na(e.current,null),Jo=es=t,ns=0,rs=null,ss=os=is=0,ls=as=null,null!==fn){for(t=0;t<fn.length;t++)if(null!==(r=(n=fn[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}fn=null}return e}function Ds(e,t){for(;;){var n=Ko;try{if(ln(),Sr.current=mi,Ar){for(var r=Er.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ar=!1}if(xr=0,Cr=wr=Er=null,kr=!1,Rr=0,Xo.current=null,null===n||null===n.return){ns=1,rs=t,Ko=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Jo,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ki(a);if(null!==f){f.flags&=-257,Ri(f,a,l,0,t),1&f.mode&&Ai(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){Ai(o,u,t),Bs();break e}c=Error(s(426))}else if(zn&&1&l.mode){var _=ki(a);if(null!==_){0==(65536&_.flags)&&(_.flags|=256),Ri(_,a,l,0,t),nr(c);break e}}o=c,4!==ns&&(ns=2),null===as?as=[o]:as.push(o),c=vi(c,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,On(l,wi(0,c,t));break e;case 1:o=c;var b=l.type,v=l.stateNode;if(0==(128&l.flags)&&("function"==typeof b.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===ms||!ms.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t,On(l,Ci(l,o,t));break e}}l=l.return}while(null!==l)}Ws(n)}catch(y){t=y,Ko===n&&null!==n&&(Ko=n=n.return);continue}break}}function Ns(){var e=jo.current;return jo.current=mi,null===e?mi:e}function Bs(){0!==ns&&3!==ns&&2!==ns||(ns=4),null===qo||0==(268435455&is)&&0==(268435455&os)||Is(qo,Jo)}function Fs(e,t){var n=Zo;Zo|=2;var r=Ns();for(qo===e&&Jo===t||Ls(e,t);;)try{Gs();break}catch(e2){Ds(e,e2)}if(ln(),Zo=n,jo.current=r,null!==Ko)throw Error(s(261));return qo=null,Jo=0,ns}function Gs(){for(;null!==Ko;)Vs(Ko)}function Us(){for(;null!==Ko&&!Nt();)Vs(Ko)}function Vs(e){var t=ds(e.alternate,e,es);e.memoizedProps=e.pendingProps,null===t?Ws(e):Ko=t,Xo.current=null}function Ws(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Di(n,t,es)))return void(Ko=n)}else{if(null!==(n=ao(n,t)))return n.flags&=32767,void(Ko=n);if(null===e)return ns=6,void(Ko=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ko=t);Ko=t=e}while(null!==t);0===ns&&(ns=5)}function Hs(e,t){var n=$t,r=Yo.transition;try{Yo.transition=null,$t=1,function i(e,t,n){do{Qs()}while(null!==_s);if(0!=(6&Zo))throw Error(s(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function a(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-yt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===qo&&(Ko=qo=null,Jo=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||gs||(gs=!0,Ks(Vt,(function(){return Qs(),null}))),o=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||o){o=Yo.transition,Yo.transition=null;var l=$t;$t=1;var c=Zo;Zo|=4,Xo.current=null,function u(e,t){for(D(e.containerInfo),ho=t;null!==ho;)if(t=(e=ho).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,ho=t;else for(;null!==ho;){e=ho;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=e.stateNode,a=o.getSnapshotBeforeUpdate(e.elementType===e.type?r:nn(e.type,r),i);o.__reactInternalSnapshotBeforeUpdate=a}break;case 3:X&&Ee(e.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(c){js(e,e.return,c)}if(null!==(t=e.sibling)){t.return=e.return,ho=t;break}ho=e.return}return n=mo,mo=!1,n}(e,r),function h(e,t){for(ho=t;null!==ho;){var n=(t=ho).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e;X?Co(o,i,t):yo(o,i,t);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(O){js(i,t,O)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,ho=n;else for(;null!==ho;){t=ho;try{var a=t.flags;if(32&a&&X&&ye(t.stateNode),512&a){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&a)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(cs=Ft())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,p=null!==d&&null!==d.memoizedState;if(n=t,X)e:if(r=n,i=h,o=null,X)for(var f=r;;){if(5===f.tag){if(null===o){o=f;var m=f.stateNode;i?Oe(m):Te(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===o){var g=f.stateNode;i?Se(g):xe(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===r)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===r)break;for(;null===f.sibling;){if(null===f.return||f.return===r)break e;o===f&&(o=null),f=f.return}o===f&&(o=null),f.sibling.return=f.return,f=f.sibling}if(h&&!p&&0!=(1&n.mode)){ho=n;for(var _=n.child;null!==_;){for(n=ho=_;null!==ho;){var b=(r=ho).child;switch(r.tag){case 0:case 11:case 14:case 15:go(4,r,r.return);break;case 1:po(r,r.return);var v=r.stateNode;if("function"==typeof v.componentWillUnmount){var y=r.return;try{v.props=r.memoizedProps,v.state=r.memoizedState,v.componentWillUnmount()}catch(O){js(r,y,O)}}break;case 5:po(r,r.return);break;case 22:if(null!==r.memoizedState){$o(n);continue}}null!==b?(b.return=r,ho=b):$o(n)}_=_.sibling}}}switch(4102&a){case 2:xo(t),t.flags&=-3;break;case 6:xo(t),t.flags&=-3,Ao(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ao(t.alternate,t);break;case 4:Ao(t.alternate,t)}}catch(O){js(t,t.return,O)}if(null!==(n=t.sibling)){n.return=t.return,ho=n;break}ho=t.return}}}(e,r),N(e.containerInfo),e.current=r,Ro(r),Bt(),Zo=c,$t=l,Yo.transition=o}else e.current=r;if(gs&&(gs=!1,_s=e,bs=i),o=e.pendingLanes,0===o&&(ms=null),function d(e){if(Qt&&"function"==typeof Qt.onCommitFiberRoot)try{Qt.onCommitFiberRoot(Ht,e,void 0,128==(128&e.current.flags))}catch(t){}}(r.stateNode),Cs(e,Ft()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(ps)throw ps=!1,e=fs,fs=null,e;return 0!=(1&bs)&&0!==e.tag&&Qs(),o=e.pendingLanes,0!=(1&o)?e===ys?vs++:(vs=0,ys=e):vs=0,Kt(),null}(e,t,n)}finally{Yo.transition=r,$t=n}return null}function Qs(){if(null!==_s){var e=Pt(bs),t=Yo.transition,n=$t;try{if(Yo.transition=null,$t=16>e?16:e,null===_s)var r=!1;else{if(e=_s,_s=null,bs=0,0!=(6&Zo))throw Error(s(331));var i=Zo;for(Zo|=4,ho=e.current;null!==ho;){var o=ho,a=o.child;if(0!=(16&ho.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ho=u;null!==ho;){var h=ho;switch(h.tag){case 0:case 11:case 15:go(8,h,o)}var d=h.child;if(null!==d)d.return=h,ho=d;else for(;null!==ho;){var p=(h=ho).sibling,f=h.return;if(Oo(h),h===u){ho=null;break}if(null!==p){p.return=f,ho=p;break}ho=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}ho=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,ho=a;else e:for(;null!==ho;){if(0!=(2048&(o=ho).flags))switch(o.tag){case 0:case 11:case 15:go(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,ho=b;break e}ho=o.return}}var v=e.current;for(ho=v;null!==ho;){var y=(a=ho).child;if(0!=(2064&a.subtreeFlags)&&null!==y)y.return=a,ho=y;else e:for(a=v;null!==ho;){if(0!=(2048&(l=ho).flags))try{switch(l.tag){case 0:case 11:case 15:_o(9,l)}}catch(S){js(l,l.return,S)}if(l===a){ho=null;break e}var O=l.sibling;if(null!==O){O.return=l.return,ho=O;break e}ho=l.return}}if(Zo=i,Kt(),Qt&&"function"==typeof Qt.onPostCommitFiberRoot)try{Qt.onPostCommitFiberRoot(Ht,e)}catch(S){}r=!0}return r}finally{$t=n,Yo.transition=t}}return!1}function zs(e,t,n){vn(e,t=wi(0,t=vi(n,t),1)),t=Ts(),null!==(e=ws(e,1))&&(It(e,1,t),Cs(e,t))}function js(e,t,n){if(3===e.tag)zs(e,e,n);else for(;null!==t;){if(3===t.tag){zs(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ms||!ms.has(r))){vn(t,e=Ci(t,e=vi(n,e),1)),e=Ts(),null!==(t=ws(t,1))&&(It(t,1,e),Cs(t,e));break}}t=t.return}}function Xs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ts(),e.pingedLanes|=e.suspendedLanes&n,qo===e&&(Jo&n)===n&&(4===ns||3===ns&&(130023424&Jo)===Jo&&500>Ft()-cs?Ls(e,0):ss|=n),Cs(e,t)}function Ys(e,t){0===t&&(0==(1&e.mode)?t=1:(t=Et,0==(130023424&(Et<<=1))&&(Et=4194304)));var n=Ts();null!==(e=ws(e,t))&&(It(e,t,n),Cs(e,n))}function Zs(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ys(e,n)}function qs(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ys(e,n)}function Ks(e,t){return Lt(e,t)}function Js(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(e,t,n,r){return new Js(e,t,n,r)}function ta(e){return!(!(e=e.prototype)||!e.isReactComponent)}function na(e,t){var n=e.alternate;return null===n?((n=ea(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ra(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)ta(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case u:return ia(n.children,i,o,t);case h:a=8,i|=8;break;case d:return(e=ea(12,n,t,2|i)).elementType=d,e.lanes=o,e;case g:return(e=ea(13,n,t,i)).elementType=g,e.lanes=o,e;case _:return(e=ea(19,n,t,i)).elementType=_,e.lanes=o,e;case y:return oa(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case p:a=10;break e;case f:a=9;break e;case m:a=11;break e;case b:a=14;break e;case v:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=ea(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ia(e,t,n,r){return(e=ea(7,e,r,t)).lanes=n,e}function oa(e,t,n,r){return(e=ea(22,e,r,t)).elementType=y,e.lanes=n,e.stateNode={},e}function sa(e,t,n){return(e=ea(6,e,null,t)).lanes=n,e}function aa(e,t,n){return(t=ea(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function la(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=z,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rt(0),this.expirationTimes=Rt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.identifierPrefix=r,this.onRecoverableError=i,Z&&(this.mutableSourceEagerHydrationData=null)}function ca(e,t,n,r,i,o,s,a,l){return e=new la(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=ea(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},gn(o),e}function ua(e){if(!e)return ct;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ft(n))return _t(e,n,t)}return t}function ha(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=A(t))?null:e.stateNode}function da(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function pa(e,t){da(e,t),(e=e.alternate)&&da(e,t)}function fa(e){return null===(e=A(e))?null:e.stateNode}function ma(){return null}return ds=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Bi=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Bi=!1,function r(e,t,n){switch(t.tag){case 3:Xi(t),tr();break;case 5:gr(t);break;case 1:ft(t.type)&&bt(t);break;case 4:fr(t,t.stateNode.containerInfo);break;case 10:cn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(br,1&br.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ki(e,t,n):(lt(br,1&br.current),null!==(e=so(e,t,n))?e.sibling:null);lt(br,1&br.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return oo(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(br,br.current),r)break;return null;case 22:case 23:return t.lanes=0,Wi(e,t,n)}return so(e,t,n)}(e,t,n);Bi=0!=(131072&e.flags)}else Bi=!1,zn&&0!=(1048576&t.flags)&&Un(t,Pn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var o=pt(t,ut.current);dn(t,n),o=Pr(null,t,i,e,o,n);var a=Lr();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(a=!0,bt(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,gn(t),o.updater=wn,t.stateNode=o,o._reactInternals=t,Rn(t,i,e,n),t=ji(null,t,i,!0,a,n)):(t.tag=0,zn&&a&&Vn(t),Fi(null,t,o,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function l(e){if("function"==typeof e)return ta(e)?1:0;if(null!=e){if((e=e.$$typeof)===m)return 11;if(e===b)return 14}return 2}(i),e=nn(i,e),o){case 0:t=Qi(null,t,i,e,n);break e;case 1:t=zi(null,t,i,e,n);break e;case 11:t=Gi(null,t,i,e,n);break e;case 14:t=Ui(null,t,i,nn(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,Qi(e,t,i,o=t.elementType===i?o:nn(i,o),n);case 1:return i=t.type,o=t.pendingProps,zi(e,t,i,o=t.elementType===i?o:nn(i,o),n);case 3:e:{if(Xi(t),null===e)throw Error(s(387));i=t.pendingProps,o=(a=t.memoizedState).element,_n(e,t),Sn(t,i,null,n);var c=t.memoizedState;if(i=c.element,Z&&a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:c.cache,transitions:c.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Yi(e,t,i,n,o=Error(s(423)));break e}if(i!==o){t=Yi(e,t,i,n,o=Error(s(424)));break e}for(Z&&(Qn=Ue(t.stateNode.containerInfo),Hn=t,zn=!0,Xn=null,jn=!1),n=lr(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(tr(),i===o){t=so(e,t,n);break e}Fi(e,t,i,n)}t=t.child}return t;case 5:return gr(t),null===e&&Kn(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,c=o.children,V(i,o)?c=null:null!==a&&V(i,a)&&(t.flags|=32),Hi(e,t),Fi(e,t,c,n),t.child;case 6:return null===e&&Kn(t),null;case 13:return Ki(e,t,n);case 4:return fr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ar(t,null,i,n):Fi(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,Gi(e,t,i,o=t.elementType===i?o:nn(i,o),n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,a=t.memoizedProps,cn(0,i,c=o.value),null!==a)if(zt(a.value,c)){if(a.children===o.children&&!ht.current){t=so(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){c=a.child;for(var h=u.firstContext;null!==h;){if(h.context===i){if(1===a.tag){(h=bn(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var p=(d=d.shared).pending;null===p?h.next=h:(h.next=p.next,p.next=h),d.pending=h}}a.lanes|=n,null!==(h=a.alternate)&&(h.lanes|=n),hn(a.return,n,t),u.lanes|=n;break}h=h.next}}else if(10===a.tag)c=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(c=a.return))throw Error(s(341));c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),hn(c,n,t),c=a.sibling}else c=a.child;if(null!==c)c.return=a;else for(c=a;null!==c;){if(c===t){c=null;break}if(null!==(a=c.sibling)){a.return=c.return,c=a;break}c=c.return}a=c}Fi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,dn(t,n),i=i(o=pn(o)),t.flags|=1,Fi(e,t,i,n),t.child;case 14:return o=nn(i=t.type,t.pendingProps),Ui(e,t,i,o=nn(i.type,o),n);case 15:return Vi(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:nn(i,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(i)?(e=!0,bt(t)):e=!1,dn(t,n),An(t,i,o),Rn(t,i,o,n),ji(null,t,i,!0,e,n);case 19:return oo(e,t,n);case 22:return Wi(e,t,n)}throw Error(s(156,t.tag))},n.attemptContinuousHydration=function(e){13===e.tag&&(Es(e,134217728,Ts()),pa(e,134217728))},n.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Ts(),n=xs(e);Es(e,n,t),pa(e,n)}},n.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wt(t.pendingLanes);0!==n&&(Mt(t,1|n),Cs(t,Ft()),0==(6&Zo)&&(hs(),Kt()))}break;case 13:var r=Ts();$s((function(){return Es(e,1,r)})),pa(e,1)}},n.batchedUpdates=function(e,t){var n=Zo;Zo|=1;try{return e(t)}finally{0===(Zo=n)&&(hs(),Yt&&Kt())}},n.createComponentSelector=function(e){return{$$typeof:Lo,value:e}},n.createContainer=function(e,t,n,r,i,o,s){return ca(e,t,!1,null,0,r,0,o,s)},n.createHasPseudoClassSelector=function(e){return{$$typeof:Do,value:e}},n.createHydrationContainer=function(e,t,n,r,i,o,s,a,l){return(e=ca(n,r,!0,e,0,o,0,a,l)).context=ua(null),n=e.current,(o=bn(r=Ts(),i=xs(n))).callback=null!=t?t:null,vn(n,o),e.current.lanes=i,It(e,i,r),Cs(e,r),e},n.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},n.createRoleSelector=function(e){return{$$typeof:No,value:e}},n.createTestNameSelector=function(e){return{$$typeof:Bo,value:e}},n.createTextSelector=function(e){return{$$typeof:Fo,value:e}},n.deferredUpdates=function(e){var t=$t,n=Yo.transition;try{return Yo.transition=null,$t=16,e()}finally{$t=t,Yo.transition=n}},n.discreteUpdates=function(e,t,n,r,i){var o=$t,s=Yo.transition;try{return Yo.transition=null,$t=1,e(t,n,r,i)}finally{$t=o,Yo.transition=s,0===Zo&&hs()}},n.findAllNodes=Qo,n.findBoundingRects=function(e,t){if(!re)throw Error(s(363));t=Qo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,a=o+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,p=d+c.height;if(r>=u&&o>=d&&i<=h&&a<=p){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||p<o||d>a)){d>o&&(c.height+=d-o,c.y=o),p<a&&(c.height=a-d),e.splice(t,1);break}if(!(o!==d||n.height!==c.height||h<r||u>i)){u>r&&(c.width+=u-r,c.x=r),h<i&&(c.width=i-u),e.splice(t,1);break}}return e},n.findHostInstance=ha,n.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?R(e):null)?null:e.stateNode},n.findHostInstanceWithWarning=function(e){return ha(e)},n.flushControlled=function(e){var t=Zo;Zo|=1;var n=Yo.transition,r=$t;try{Yo.transition=null,$t=1,e()}finally{$t=r,Yo.transition=n,0===(Zo=t)&&(hs(),Kt())}},n.flushPassiveEffects=Qs,n.flushSync=$s,n.focusWithin=function(e,t){if(!re)throw Error(s(363));for(t=Ho(e=Uo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!ae(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},n.getCurrentUpdatePriority=function(){return $t},n.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(s(363));var n=0,r=[];e=[Uo(e),0];for(var i=0;i<e.length;){var o=e[i++],a=e[i++],l=t[a];if((5!==o.tag||!ae(o))&&(Vo(o,l)&&(r.push(Wo(l)),++a>n&&(n=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Wo(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},n.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?$(e.child.stateNode):e.child.stateNode:null},n.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:fa,findFiberByHostInstance:e.findFiberByHostInstance||ma,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ht=t.inject(e),Qt=t}catch(n){}e=!!t.checkDCE}}return e},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(s(363));e=Qo(e,t);var i=ue(e,n,r).disconnect;return{disconnect:function(){i()}}},n.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},n.runWithPriority=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(e,t,n,r){var i=t.current,o=Ts(),s=xs(i);return n=ua(n),null===t.context?t.context=n:t.pendingContext=n,(t=bn(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=Es(i,s,o))&&yn(e,i,s),s},n};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function y(e){if(m=!1,v(e),!f)if(null!==n(l))f=!0,M(O);else{var t=n(c);null!==t&&$(y,t.startTime-e)}}function O(t,i){f=!1,m&&(m=!1,_(E),E=-1),p=!0;var o=d;try{for(v(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!A());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&r(l),v(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var g=n(c);null!==g&&$(y,g.startTime-i),u=!1}return u}finally{h=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,x=null,E=-1,w=5,C=-1;function A(){return!(e.unstable_now()-C<w)}function k(){if(null!==x){var t=e.unstable_now();C=t;var n=!0;try{n=x(!0,t)}finally{n?S():(T=!1,x=null)}}else T=!1}if("function"==typeof b)S=function(){b(k)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=k,S=function(){I.postMessage(null)}}else S=function(){g(k,0)};function M(e){x=e,T||(T=!0,S())}function $(t,n){E=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,M(O))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,o){var s=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(m?(_(E),E=-1):m=!0,$(y,o-s))):(r.sortIndex=a,t(l,r),f||p||(f=!0,M(O))),r},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(scheduler_production_min),scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;function shallowEqualArrays(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const globalCache=[];function query(e,t,n=!1,r={}){for(const o of globalCache)if(shallowEqualArrays(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!n)throw o.promise}const i={keys:t,equal:r.equal,promise:e(...t).then((e=>i.response=e)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const e=globalCache.indexOf(i);-1!==e&&globalCache.splice(e,1)}),r.lifespan)})).catch((e=>i.error=e))};if(globalCache.push(i),!n)throw i.promise}const suspend=(e,t,n)=>query(e,t,!1,n),preload=(e,t,n)=>{query(e,t,!0,n)},clear=e=>{if(void 0===e||0===e.length)globalCache.splice(0,globalCache.length);else{const t=globalCache.find((t=>shallowEqualArrays(e,t.keys,t.equal)));if(t){const e=globalCache.indexOf(t);-1!==e&&globalCache.splice(e,1)}}},catalogue={},extend$1=e=>{Object.assign(catalogue,e)};function createRenderer(e,t){function n(e,{args:t=[],attach:n,...r},i){let o,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");o=prepare(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=catalogue[s];if(!r)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");o=prepare(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===o.__r3f.attach&&(o instanceof BufferGeometry?o.__r3f.attach="geometry":o instanceof Material&&(o.__r3f.attach="material")),"inject"!==s&&applyProps$1(o,r),o}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?attach(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||prepare(t,{}),t.__r3f.parent=e,updateInstance(t),invalidateInstance(t))}function i(e,t,n){let r=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)attach(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const i=e.children.filter((e=>e!==t)),o=i.indexOf(n);e.children=[...i.slice(0,o),t,...i.slice(o)],r=!0}r||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||prepare(t,{}),t.__r3f.parent=e,updateInstance(t),invalidateInstance(t)}}function o(e,t,n=!1){e&&[...e].forEach((e=>s(t,e,n)))}function s(e,t,n){if(t){var r,i,s;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)detach(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var a;e.remove(t),null!=(a=t.__r3f)&&a.root&&removeInteractivity(t.__r3f.root,t)}const c=null==(s=t.__r3f)?void 0:s.primitive,u=void 0===n?null!==t.dispose&&!c:n;var l;if(!c)o(null==(l=t.__r3f)?void 0:l.objects,t,u),o(t.children,t,u);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,c||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e2){}})),invalidateInstance(e)}}const a=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){if(e.__r3f.primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...o}=r,{args:s=[],children:a,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==s[t])))return[!0];const c=diffProps(e,o,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,i],o,a,l,c){t?function u(e,t,i,o){var a;const l=null==(a=e.__r3f)?void 0:a.parent;if(!l)return;const c=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,o,l,c):applyProps$1(e,i)},commitMount(e,t,n,r){var i;const o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>prepare(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&detach(r,e,n),e.isObject3D&&(e.visible=!1),invalidateInstance(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&attach(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),invalidateInstance(e)},createTextInstance:a,hideTextInstance:a,unhideTextInstance:a,getCurrentEventPriority:()=>t?t():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const getColorManagement=()=>{var e;return null!=(e=catalogue.ColorManagement)?e:null},isOrthographicCamera=e=>e&&e.isOrthographicCamera,isRef=e=>e&&e.hasOwnProperty("current"),useIsomorphicLayoutEffect="undefined"!=typeof window&&(null!=(_window$document=window.document)&&_window$document.createElement||"ReactNative"===(null==(_window$navigator=window.navigator)?void 0:_window$navigator.product))?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(e){const t=reactExports.useRef(e);return useIsomorphicLayoutEffect((()=>{t.current=e}),[e]),t}function Block({set:e}){return useIsomorphicLayoutEffect((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class ErrorBoundary extends reactExports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=e=>e&&!!e.memoized&&!!e.changes;function calculateDpr(e){const t="undefined"!=typeof window?window.devicePixelRatio:1;return Array.isArray(e)?Math.min(Math.max(e[0],t),e[1]):e}const getRootState=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},is={obj:e=>e===Object(e)&&!is.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(is.str(e)||is.num(e))return e===t;const o=is.obj(e);if(o&&"reference"===r)return e===t;const s=is.arr(e);if(s&&"reference"===n)return e===t;if((s||o)&&e===t)return!0;let a;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(a in i?t:e)if(!is.equ(e[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:e)if(e[a]!==t[a])return!1;if(is.und(a)){if(s&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function buildGraph(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function dispose(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}function prepare(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function resolve(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const INDEX_REGEX=/-\d+$/;function attach(e,t,n){if(is.str(n)){if(INDEX_REGEX.test(n)){const t=n.replace(INDEX_REGEX,""),{target:r,key:i}=resolve(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=resolve(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function detach(e,t,n){var r,i;if(is.str(n)){const{target:r,key:i}=resolve(e,n),o=t.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function diffProps(e,{children:t,key:n,ref:r,...i},{children:o,key:s,ref:a,...l}={},c=!1){var u;const h=null!=(u=null==e?void 0:e.__r3f)?u:{},d=Object.entries(i),p=[];if(c){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||d.unshift([e[t],DEFAULT+"remove"])}d.forEach((([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(is.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return p.push([t,n,!0,[]]);let o=[];t.includes("-")&&(o=t.split("-")),p.push([t,n,!1,o]);for(const e in i){const n=i[e];e.startsWith(`${t}-`)&&p.push([e,n,!1,e.split("-")])}}));const f={...i};return h.memoizedProps&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:p}}function applyProps$1(e,t){var n,r,i;const o=null!=(n=e.__r3f)?n:{},s=o.root,a=null!=(r=null==s||null==s.getState?void 0:s.getState())?r:{},{memoized:l,changes:c}=isDiffSet(t)?t:diffProps(e,t),u=o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[t,n,r,i]=c[h],s=e,l=s[t];if(i.length&&(l=i.reduce(((e,t)=>e[t]),e),!l||!l.set)){const[n,...r]=i.reverse();s=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===DEFAULT+"remove")if(s.constructor){let e=DEFAULTS.get(s.constructor);e||(e=new s.constructor,DEFAULTS.set(s.constructor,e)),n=e[t]}else n=0;if(r)n?o.handlers[t]=n:delete o.handlers[t],o.eventCount=Object.keys(o.handlers).length;else if(l&&l.set&&(l.copy||l instanceof Layers$1)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&l.constructor===n.constructor)l.copy(n);else if(void 0!==n){const e=l instanceof Color;!e&&l.setScalar?l.setScalar(n):l instanceof Layers$1&&n instanceof Layers$1?l.mask=n.mask:l.set(n),getColorManagement()||a.linear||!e||l.convertSRGBToLinear()}}else s[t]=n,!a.linear&&s[t]instanceof Texture&&s[t].format===RGBAFormat&&s[t].type===UnsignedByteType&&(s[t].encoding=sRGBEncoding);invalidateInstance(e)}if(o.parent&&a.internal&&e.raycast&&u!==o.eventCount){const t=a.internal.interaction.indexOf(e);t>-1&&a.internal.interaction.splice(t,1),o.eventCount&&a.internal.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(i=e.__r3f)&&i.parent&&updateInstance(e),e}function invalidateInstance(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function updateInstance(e){null==e.onUpdate||e.onUpdate(e)}function updateCamera(e,t){e.manual||(isOrthographicCamera(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function makeId(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function getEventPriority(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return constantsExports.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function removeInteractivity(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{releaseInternalPointerCapture(n.capturedMap,t,e,r)}))}function createEvents(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(makeId(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function i(o){switch(o){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function i(s){const{onPointerMissed:a,internal:l}=e.getState();l.lastEvent.current=s;const c="onPointerMove"===o,u="onClick"===o||"onContextMenu"===o||"onDoubleClick"===o,h=function d(t,n){const r=e.getState(),i=new Set,o=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){const t=getRootState(s[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let a=s.flatMap((function l(e){const n=getRootState(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=getRootState(e.object),r=getRootState(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=makeId(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(a=r.events.filter(a,r));for(const e of a){let t=e.object;for(;t;){var c;null!=(c=t.__r3f)&&c.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(makeId(e.intersection))||o.push(e.intersection);return o}(s,c?t:void 0),p=u?function f(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(s):0;"onPointerDown"===o&&(l.initialClick=[s.offsetX,s.offsetY],l.initialHits=h.map((e=>e.eventObject))),u&&!h.length&&p<=2&&(r(s,l.interaction),a&&a(s)),c&&n(h),function g(t,r,i,o){const s=e.getState();if(t.length){const e={stopped:!1};for(const a of t){const l=getRootState(a.object)||s,{raycaster:c,pointer:u,camera:h,internal:d}=l,p=new Vector3(u.x,u.y,0).unproject(h),f=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(a.eventObject))&&t},m=e=>{const t={intersection:a,target:r.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(a.eventObject,t):d.capturedMap.set(e,new Map([[a.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&releaseInternalPointerCapture(d.capturedMap,a.eventObject,t,e)};let _={};for(let e in r){let t=r[e];"function"!=typeof t&&(_[e]=t)}let b={...a,..._,pointer:u,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:h,stopPropagation(){const i="pointerId"in r&&d.capturedMap.get(r.pointerId);(!i||i.has(a.eventObject))&&(b.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((e=>e.eventObject===a.eventObject)))&&n([...t.slice(0,t.indexOf(a)),a])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(o(b),!0===e.stopped)break}}return t}(h,s,p,(function m(e){const t=e.eventObject,n=t.__r3f,i=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(i.onPointerOver||i.onPointerEnter||i.onPointerOut||i.onPointerLeave){const t=makeId(e),n=l.hovered.get(t);n?n.stopped&&e.stopPropagation():(l.hovered.set(t,e),null==i.onPointerOver||i.onPointerOver(e),null==i.onPointerEnter||i.onPointerEnter(e))}null==i.onPointerMove||i.onPointerMove(e)}else{const n=i[o];n?u&&!l.initialHits.includes(t)||(r(s,l.interaction.filter((e=>!l.initialHits.includes(e)))),n(e)):u&&l.initialHits.includes(t)&&r(s,l.interaction.filter((e=>!l.initialHits.includes(e))))}}))}}}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=e=>!(null==e||!e.render),context=reactExports.createContext(null),createStore=(e,t)=>{const n=create$1(((n,r)=>{const i=new Vector3,o=new Vector3,s=new Vector3;function a(e=r().camera,t=o,n=r().size){const{width:a,height:l,top:c,left:u}=n,h=a/l;t instanceof Vector3?s.copy(t):s.set(...t);const d=e.getWorldPosition(i).distanceTo(s);if(isOrthographicCamera(e))return{width:a/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,r=n*(a/l);return{width:r,height:n,top:c,left:u,factor:a/r,distance:d,aspect:h}}}let l;const c=e=>n((t=>({performance:{...t.performance,current:e}}))),u=new Vector2,h={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:u,mouse:u,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();l&&clearTimeout(l),e.performance.current!==e.performance.min&&c(e.performance.min),l=setTimeout((()=>c(r().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:a},setEvents:e=>n((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,i,s,l)=>{const c=r().camera,u={width:e,height:t,top:s||0,left:l||0,updateStyle:i};n((e=>({size:u,viewport:{...e.viewport,...a(c,o,u)}})))},setDpr:e=>n((t=>{const n=calculateDpr(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:(e="always")=>{const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return h})),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:r,gl:a,set:l}=n.getState();if(t!==i||r.dpr!==o){var c;i=t,o=r.dpr,updateCamera(e,t),a.setPixelRatio(r.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&a.domElement instanceof HTMLCanvasElement;a.setSize(t.width,t.height,n)}e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),n.subscribe((t=>e(t))),n};function createSubs(e,t){const n={callback:e};return t.add(n),()=>{t.delete(n)}}let i$2,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;const addEffect=e=>createSubs(e,globalEffects);function run(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function flushGlobalEffects(e,t){switch(e){case"before":return run(globalEffects,t);case"after":return run(globalAfterEffects,t);case"tail":return run(globalTailEffects,t)}}let subscribers,subscription;function render$1(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),subscribers=t.internal.subscribers,i$2=0;i$2<subscribers.length;i$2++)subscription=subscribers[i$2],subscription.ref.current(subscription.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function createLoop(e){let t,n,r,i=!1;function o(s){n=requestAnimationFrame(o),i=!0,t=0,flushGlobalEffects("before",s);for(const n of e.values()){var a;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(a=r.gl.xr)&&a.isPresenting||(t+=render$1(s,r))}if(flushGlobalEffects("after",s),0===t)return flushGlobalEffects("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n,r=1){var s;if(!n)return e.forEach((e=>t(e.store.getState())),r);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(o)))},advance:function s(t,n=!0,r,i){if(n&&flushGlobalEffects("before",t),r)render$1(t,r,i);else for(const o of e.values())render$1(t,o.store.getState());n&&flushGlobalEffects("after",t)}}}function useStore(){const e=reactExports.useContext(context);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function useThree(e=(e=>e),t){return useStore()(e,t)}function useFrame(e,t=0){const n=useStore(),r=n.getState().internal.subscribe,i=useMutableCallback(e);return useIsomorphicLayoutEffect((()=>r(i,t,n)),[t,r,n]),null}function loadingFn(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,buildGraph(e.scene)),n(e)}),t,(t=>r(new Error(`Could not load ${e}: ${t.message})`)))))))))}}function useLoader(e,t,n,r){const i=Array.isArray(t)?t:[t],o=suspend(loadingFn(n,r),[e,...i],{equal:is.equ});return Array.isArray(t)?o:o[0]}useLoader.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return preload(loadingFn(n),[e,...r])},useLoader.clear=function(e,t){const n=Array.isArray(t)?t:[t];return clear([e,...n])};const roots=new Map,{invalidate:invalidate,advance:advance}=createLoop(roots),{reconciler:reconciler,applyProps:applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(e,t)=>{const n="function"==typeof e?e(t):e;return isRenderer(n)?n:new WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function computeInitialSize(e,t){if(t)return t;if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}function createRoot(e){const t=roots.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"==typeof reportError?reportError:console.error,o=r||createStore(invalidate,advance),s=n||reconciler.createContainer(o,constantsExports.ConcurrentRoot,null,!1,null,"",i,null);let a;t||roots.set(e,{fiber:s,store:o});let l,c=!1;return{configure(t={}){let{gl:n,size:r,scene:i,events:s,onCreated:u,shadows:h=!1,linear:d=!1,flat:p=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:_=[1,2],performance:b,raycaster:v,camera:y,onPointerMissed:O}=t,S=o.getState(),T=S.gl;S.gl||S.set({gl:T=createRendererInstance(n,e)});let x=S.raycaster;x||S.set({raycaster:x=new Raycaster});const{params:E,...w}=v||{};if(is.equ(w,x,shallowLoose)||applyProps(x,{...w}),is.equ(E,x.params,shallowLoose)||applyProps(x,{params:{...x.params,...E}}),!S.camera||S.camera===l&&!is.equ(l,y,shallowLoose)){l=y;const e=y instanceof Camera,t=e?y:m?new OrthographicCamera$1(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);e||(t.position.z=5,y&&applyProps(t,y),S.camera||null!=y&&y.rotation||t.lookAt(0,0,0)),S.set({camera:t})}if(!S.scene){let e;i instanceof Scene?e=i:(e=new Scene,i&&applyProps(e,i)),S.set({scene:prepare(e)})}if(!S.xr){const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&advance(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||invalidate(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};T.xr&&n.connect(),S.set({xr:n})}if(T.shadowMap){const e=T.shadowMap.enabled,t=T.shadowMap.type;if(T.shadowMap.enabled=!!h,is.boo(h))T.shadowMap.type=PCFSoftShadowMap;else if(is.str(h)){var C;const e={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};T.shadowMap.type=null!=(C=e[h])?C:PCFSoftShadowMap}else is.obj(h)&&Object.assign(T.shadowMap,h);e===T.shadowMap.enabled&&t===T.shadowMap.type||(T.shadowMap.needsUpdate=!0)}const A=getColorManagement();A&&("enabled"in A?A.enabled=!f:"legacyMode"in A&&(A.legacyMode=f));const k=d?LinearEncoding:sRGBEncoding,R=p?NoToneMapping:ACESFilmicToneMapping;T.outputEncoding!==k&&(T.outputEncoding=k),T.toneMapping!==R&&(T.toneMapping=R),S.legacy!==f&&S.set((()=>({legacy:f}))),S.linear!==d&&S.set((()=>({linear:d}))),S.flat!==p&&S.set((()=>({flat:p}))),!n||is.fun(n)||isRenderer(n)||is.equ(n,T,shallowLoose)||applyProps(T,n),s&&!S.events.handlers&&S.set({events:s(o)});const I=computeInitialSize(e,r);return is.equ(I,S.size,shallowLoose)||S.setSize(I.width,I.height,I.updateStyle,I.top,I.left),_&&S.viewport.dpr!==calculateDpr(_)&&S.setDpr(_),S.frameloop!==g&&S.setFrameloop(g),S.onPointerMissed||S.set({onPointerMissed:O}),b&&!is.equ(b,S.performance,shallowLoose)&&S.set((e=>({performance:{...e.performance,...b}}))),a=u,c=!0,this},render(t){return c||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:o,children:t,onCreated:a,rootElement:e}),s,null,(()=>{})),o},unmount(){unmountComponentAtNode(e)}}}function Provider({store:e,children:t,onCreated:n,rootElement:r}){return useIsomorphicLayoutEffect((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)}),[]),reactExports.createElement(context.Provider,{value:e},t)}function unmountComponentAtNode(e,t){const n=roots.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),reconciler.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),dispose(i),roots.delete(e),t&&t(e)}catch(e2){}}),500)}))}}function createPortal(e,t,n){return reactExports.createElement(Portal,{key:t.uuid,children:e,container:t,state:n})}function Portal({state:e={},children:t,container:n}){const{events:r,size:i,...o}=e,s=useStore(),[a]=reactExports.useState((()=>new Raycaster)),[l]=reactExports.useState((()=>new Vector2)),c=reactExports.useCallback(((e,t)=>{const c={...e};let u;if(Object.keys(e).forEach((n=>{(privateKeys.includes(n)||e[n]!==t[n]&&t[n])&&delete c[n]})),t&&i){const n=t.camera;u=e.viewport.getCurrentViewport(n,new Vector3,i),n!==e.camera&&updateCamera(n,i)}return{...c,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...u},...o}}),[e]),[u]=reactExports.useState((()=>{const e=s.getState();return create$1(((t,c)=>({...e,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...e.events,...r},size:{...e.size,...i},...o,set:t,get:c,setEvents:e=>t((t=>({...t,events:{...t.events,...e}})))})))}));return reactExports.useEffect((()=>{const e=s.subscribe((e=>u.setState((t=>c(e,t)))));return()=>{e(),u.destroy()}}),[]),reactExports.useEffect((()=>{u.setState((e=>c(s.getState(),e)))}),[c]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:u},t),u,null))}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function debounce(e,t,n){var r,i,o,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const o=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),c=t?"number"==typeof t?t:t.scroll:null,u=t?"number"==typeof t?t:t.resize:null,h=reactExports.useRef(!1);reactExports.useEffect((()=>(h.current=!0,()=>{h.current=!1})));const[d,p,f]=reactExports.useMemo((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:o,right:s,x:c,y:u}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:o,right:s,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!areBoundsEqual(l.current.lastBounds,d)&&a(l.current.lastBounds=d)};return[e,u?createDebounce(e,u):e,c?createDebounce(e,c):e]}),[a,i,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){l.current.element&&(l.current.resizeObserver=new o(f),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))))}return useOnWindowScroll(f,Boolean(n)),useOnWindowResize(p),reactExports.useEffect((()=>{m(),g()}),[n,f,p]),reactExports.useEffect((()=>m),[]),[e=>{e&&e!==l.current.element&&(m(),l.current.element=e,l.current.scrollContainers=findScrollContainers(e),g())},s,d]}function useOnWindowResize(e){reactExports.useEffect((()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])}function useOnWindowScroll(e,t){reactExports.useEffect((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}function findScrollContainers(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...findScrollContainers(e.parentElement)]}const keys$1=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(e,t)=>keys$1.every((n=>e[n]===t[n]));var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),_a$1;function traverseFiber(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=traverseFiber(r,t,n);if(e)return e;r=t?null:r.sibling}}function wrapContext(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:ReactCurrentOwner,ReactCurrentDispatcher:ReactCurrentDispatcher}=null!=(_a$1=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)?_a$1:{};function useFiber(){const e=reactExports.useContext(FiberContext),t=reactExports.useId();return reactExports.useMemo((()=>{var n;return null!=(n=null==ReactCurrentOwner?void 0:ReactCurrentOwner.current)?n:traverseFiber(e,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}))}),[e,t])}function useContextBridge(){var e,t;const n=useFiber(),[r]=reactExports.useState((()=>new Map));r.clear();let i=n;for(;i;){const n=null==(e=i.type)?void 0:e._context;n&&n!==FiberContext&&!r.has(n)&&r.set(n,null==(t=null==ReactCurrentDispatcher?void 0:ReactCurrentDispatcher.current)?void 0:t.readContext(wrapContext(n))),i=i.return}return reactExports.useMemo((()=>Array.from(r.keys()).reduce(((e,t)=>n=>reactExports.createElement(e,null,reactExports.createElement(t.Provider,__spreadProps(__spreadValues({},n),{value:r.get(t)})))),(e=>reactExports.createElement(FiberProvider,__spreadValues({},e))))),[r])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(e){const{handlePointer:t}=createEvents(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([e,n])=>{const[r,i]=DOM_EVENTS[e];t.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=DOM_EVENTS[e];n.connected.removeEventListener(r,t)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const CanvasImpl=reactExports.forwardRef((function e({children:t,fallback:n,resize:r,style:i,gl:o,events:s=createPointerEvents,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:p,frameloop:f,dpr:m,performance:g,raycaster:_,camera:b,onPointerMissed:v,onCreated:y,...O},S){reactExports.useMemo((()=>extend$1(r$5)),[]);const T=useContextBridge(),[x,E]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...r}),w=reactExports.useRef(null),C=reactExports.useRef(null);reactExports.useImperativeHandle(S,(()=>w.current));const A=useMutableCallback(v),[k,R]=reactExports.useState(!1),[I,M]=reactExports.useState(!1);if(k)throw k;if(I)throw I;const $=reactExports.useRef(null);useIsomorphicLayoutEffect((()=>{const e=w.current;E.width>0&&E.height>0&&e&&($.current||($.current=createRoot(e)),$.current.configure({gl:o,events:s,shadows:c,linear:u,flat:h,legacy:d,orthographic:p,frameloop:f,dpr:m,performance:g,raycaster:_,camera:b,size:E,onPointerMissed:(...e)=>null==A.current?void 0:A.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(a?isRef(a)?a.current:a:C.current),l&&e.setEvents({compute:(e,t)=>{const n=e[l+"X"],r=e[l+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==y||y(e)}}),$.current.render(reactExports.createElement(T,null,reactExports.createElement(ErrorBoundary,{set:M},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:R})},t)))))})),reactExports.useEffect((()=>{const e=w.current;if(e)return()=>unmountComponentAtNode(e)}),[]);const P=a?"none":"auto";return reactExports.createElement("div",_extends({ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:P,...i}},O),reactExports.createElement("div",{ref:x,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:w,style:{display:"block"}},n)))})),Canvas=reactExports.forwardRef((function e(t,n){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},t,{ref:n})))})),BINOMIAL_COEFFICIENTS=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1],[1,9,36,84,126,126,84,36,9,1],[1,10,45,120,210,252,210,120,45,10,1]],MAX_CONTROL_POINTS=BINOMIAL_COEFFICIENTS.length,computeBezierPoint=(e,t)=>{const n=new Vector3(0,0,0),r=e.length-1;for(let i=0;i<=r;i++)n.addScaledVector(e[i],BINOMIAL_COEFFICIENTS[r][i]*Math.pow(1-t,r-i)*Math.pow(t,i));return n},interpolateBezierPoints=(e,t)=>Array(t).fill(0).map(((n,r)=>computeBezierPoint(e,r/t))),INTERPOLATION_COUNT=1e3,useCurveEditorState=create$2()(subscribeWithSelector(immer(((e,t)=>({bezierControlPoints:[new Vector3(1,1,1),new Vector3(2,5,4)],selectedControlPoint:void 0,hoveredControlPoint:void 0,bezierLinePoints:[],addBezierControlPoint:n=>{const r=[...t().bezierControlPoints];r.push(n),r.length>MAX_CONTROL_POINTS||e({bezierControlPoints:r})},removeBezierControlPoint:n=>{const r=[...t().bezierControlPoints];r.splice(n,1),e({bezierControlPoints:r})},updateBezierControlPoint:(t,n)=>e((e=>{e.bezierControlPoints[t]=n})),setSelectedControlPoint:t=>{e({selectedControlPoint:t})},updateBezierInterpolationPoints:()=>{const n=interpolateBezierPoints(t().bezierControlPoints,INTERPOLATION_COUNT);e({bezierLinePoints:n})}})))));useCurveEditorState.subscribe((e=>e.bezierControlPoints),(()=>{useCurveEditorState.getState().updateBezierInterpolationPoints()}));const VectorEditorItem=({id:e,point:t})=>{const n=useCurveEditorState((e=>e.updateBezierControlPoint)),r=useCurveEditorState((e=>e.removeBezierControlPoint)),[i,o]=reactExports.useState({x:`${t.x}`,y:`${t.y}`,z:`${t.z}`});return reactExports.useEffect((()=>{n(e,new Vector3(parseFloat(i.x)||0,parseFloat(i.y)||0,parseFloat(i.z)||0))}),[i]),reactExports.useEffect((()=>{o({x:`${t.x}`,y:`${t.y}`,z:`${t.z}`})}),[t]),jsxs("div",{className:"flex items-center gap-2 p-2",children:[jsx("span",{children:`${e+1}.`}),jsx(TextInput,{className:"text-center",value:i.x,onChange:e=>o((t=>({...t,x:e.target.value})))}),jsx(TextInput,{className:"text-center",value:i.y,onChange:e=>o((t=>({...t,y:e.target.value})))}),jsx(TextInput,{className:"text-center",value:i.z,onChange:e=>o((t=>({...t,z:e.target.value})))}),jsx("button",{onClick:()=>r(e),children:jsx(FontAwesomeIcon,{className:"text-blue-600",icon:faTrashCan})})]})},VectorEditor=({points:e})=>jsx("div",{children:e.map(((e,t)=>jsx(VectorEditorItem,{id:t,point:e},t)))});function mergeRefs(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function clamp(e,t,n){return Math.max(t,Math.min(e,n))}const V$1={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function rubberband(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function rubberbandIfOutOfBounds(e,t,n,r=.15){return 0===r?clamp(e,t,n):e<t?-rubberband(t-e,n-t,r)+t:e>n?+rubberband(e-n,n-t,r)+n:e}function computeRubberband(e,[t,n],[r,i]){const[[o,s],[a,l]]=e;return[rubberbandIfOutOfBounds(t,o,s,r),rubberbandIfOutOfBounds(n,a,l,i)]}function _toPrimitive$1(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==typeof t?t:String(t)}function _defineProperty$1(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty$1(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(e){return e?e[0].toUpperCase()+e.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(e=!1,t){return e&&!actionsWithoutCaptureSupported.includes(t)}function toHandlerProp(e,t="",n=!1){const r=EVENT_TYPE_MAP[e],i=r&&r[t]||t;return"on"+capitalize(e)+capitalize(i)+(hasCapture(n,i)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=pointerCaptureEvents.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function toDomEventType(e,t=""){const n=EVENT_TYPE_MAP[e];return e+(n&&n[t]||t)}function isTouch(e){return"touches"in e}function getPointerType(e){return isTouch(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function getCurrentTargetTouchList(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}function getTouchList(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}function getValueEvent(e){return isTouch(e)?getTouchList(e)[0]:e}function distanceAngle(e,t){const n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,s=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:s,origin:[i,o]}}function touchIds(e){return getCurrentTargetTouchList(e).map((e=>e.identifier))}function touchDistanceAngle(e,t){const[n,r]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return distanceAngle(n,r)}function pointerId(e){const t=getValueEvent(e);return isTouch(e)?t.identifier:t.pointerId}function pointerValues(e){const t=getValueEvent(e);return[t.clientX,t.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=LINE_HEIGHT,n*=LINE_HEIGHT):2===r&&(t*=PAGE_HEIGHT,n*=PAGE_HEIGHT),[t,n]}function scrollValues(e){var t,n;const{scrollX:r,scrollY:i,scrollLeft:o,scrollTop:s}=e.currentTarget;return[null!==(t=null!=r?r:o)&&void 0!==t?t:0,null!==(n=null!=i?i:s)&&void 0!==n?n:0]}function getEventDetails(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}function call(e,...t){return"function"==typeof e?e(...t):e}function noop(){}function chain(...e){return 0===e.length?noop:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function assignDefault(e,t){return Object.assign({},t,e||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?call(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,getEventDetails(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);V$1.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[o,s]=t._movement,[a,l]=n.threshold,{_step:c,values:u}=t;if(n.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=a&&u[0]),!1===c[1]&&(c[1]=Math.abs(s)>=l&&u[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=a&&Math.sign(o)*a),!1===c[1]&&(c[1]=Math.abs(s)>=l&&Math.sign(s)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[e,t]=u;h[0]=!1!==c[0]?e-c[0]:0,h[1]=!1!==c[1]?t-c[1]:0}else h[0]=!1!==c[0]?o-c[0]:0,h[1]=!1!==c[1]?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=call(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[f,m]=t.offset,[[g,_],[b,v]]=t._bounds;t.overflow=[f<g?-1:f>_?1:0,m<b?-1:m>v?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const y=t._active&&n.rubberband||[0,0];if(t.offset=computeRubberband(t._bounds,t.offset,y),t.delta=V$1.sub(t.offset,d),this.computeMovement(),p&&(!t.last||i>BEFORE_LAST_KINEMATICS_DELAY)){t.delta=V$1.sub(t.offset,d);const e=t.delta.map(Math.abs);V$1.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i])}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([e,t],n){const r=Math.abs(e),i=Math.abs(t);return r>i&&r>n?"x":i>r&&i>n?"y":void 0}class CoordinatesEngine extends Engine{constructor(...e){super(...e),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"==typeof n.axisThreshold?n.axisThreshold[getPointerType(e)]:n.axisThreshold;t.axis=selectAxis(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const identity=e=>e,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>_objectSpread2(_objectSpread2({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?V$1.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||identity},threshold:e=>V$1.toVector(e,0)},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=DEFAULT_AXIS_THRESHOLD)=>e,bounds(e={}){if("function"==typeof e)return t=>coordinatesConfigResolver.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),KEYS_DELTA_MAP={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class DragEngine extends CoordinatesEngine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=coordinatesConfigResolver.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=pointerId(e),n._pointerActive=!0,this.computeValues(pointerValues(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==getPointerType(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const r=pointerId(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;const i=pointerValues(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=V$1.sub(i,t._values),this.computeValues(i)),V$1.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(s){}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=pointerId(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t.direction,[i,o]=t.velocity,[s,a]=t.movement,[l,c]=n.swipe.velocity,[u,h]=n.swipe.distance,d=n.swipe.duration;t.elapsedTime<d&&(Math.abs(i)>l&&Math.abs(s)>u&&(t.swipe[0]=e),Math.abs(o)>c&&Math.abs(a)>h&&(t.swipe[1]=r))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,persistEvent(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=KEYS_DELTA_MAP[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,V$1.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}const isBrowser="undefined"!=typeof window&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch(e2){return!1}}const SUPPORT={isBrowser:isBrowser,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&SUPPORT.pointerLock,SUPPORT.touch&&n?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!i?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?DEFAULT_PREVENT_SCROLL_DELAY:void 0,SUPPORT.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i}){const o=V$1.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:e=DEFAULT_SWIPE_VELOCITY,distance:t=DEFAULT_SWIPE_DISTANCE,duration:n=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(e)),distance:this.transform(V$1.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return e}},axisThreshold:e=>e?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),e):DEFAULT_DRAG_AXIS_THRESHOLD,keyboardDisplacement:(e=DEFAULT_KEYBOARD_DISPLACEMENT)=>e});function clampStateInternalMovementToBounds(e){const[t,n]=e.overflow,[r,i]=e._delta,[o,s]=e._direction;(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&s<0||n>0&&i<0&&s>0)&&(e._movement[1]=e._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?V$1.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const r=Math.abs(t)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>n.has(e))))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const r=touchDistanceAngle(e,t._touchIds);this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every((e=>r.has(e))))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const i=distanceAngle(...Array.from(n.values()));this.pinchStart(e,i)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=touchDistanceAngle(e,this.state._touchIds);this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=distanceAngle(...Array.from(t.values()));this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,r=n._values[1],i=t.angle-r;let o=0;Math.abs(i)>270&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=V$1.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-wheelValues(e)[1]/PINCH_WHEEL_RATIO*t.offset[0],0],V$1.addTo(t._movement,t._delta),clampStateInternalMovementToBounds(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&r)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=e=>{const t=assignDefault(call(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=assignDefault(call(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[i(),o()]:e=>[i(e),o(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return V$1.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});class MoveEngine extends CoordinatesEngine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(pointerValues(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=pointerValues(e),n=this.state;n._delta=V$1.sub(t,n._values),V$1.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(e=!0)=>e});class ScrollEngine extends CoordinatesEngine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=scrollValues(e);t._delta=V$1.sub(n,t._values),V$1.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=wheelValues(e),V$1.addTo(t._movement,t._delta),clampStateInternalMovementToBounds(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...e){super(...e),_defineProperty$1(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(pointerValues(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const n=pointerValues(e);t._movement=t._delta=V$1.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(e=!0)=>e}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(e){EngineMap.set(e.key,e.engine),ConfigResolverMap.set(e.key,e.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const sharedConfigResolver={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(SUPPORT.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},_excluded$1=["target","eventOptions","window","enabled","transform"];function resolveWith(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=resolveWith(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}function parse(e,t,n={}){const r=e,{target:i,eventOptions:o,window:s,enabled:a,transform:l}=r,c=_objectWithoutProperties(r,_excluded$1);if(n.shared=resolveWith({target:i,eventOptions:o,window:s,enabled:a,transform:l},sharedConfigResolver),t){const e=ConfigResolverMap.get(t);n[t]=resolveWith(_objectSpread2({shared:n.shared},c),e)}else for(const u in c){const e=ConfigResolverMap.get(u);e&&(n[u]=resolveWith(_objectSpread2({shared:n.shared},c[u]),e))}return n}class EventStore{constructor(e,t){_defineProperty$1(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const o=this._listeners,s=toDomEventType(t,n),a=_objectSpread2(_objectSpread2({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(s,r,a);const l=()=>{e.removeEventListener(s,r,a),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Controller{constructor(e){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,e)}setEventIds(e){return isTouch(e)?(this.touchIds=new Set(touchIds(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=parse(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!t.target||(r=t.target(),r)){if(t.enabled){for(const t of this.gestures){const i=this.config[t],o=bindToProps(n,i.eventOptions,!!r);if(i.enabled){new(EngineMap.get(t))(this,e,t).bind(o)}}const i=bindToProps(n,t.eventOptions,!!r);for(const t in this.nativeHandlers)i(t,"",(n=>this.nativeHandlers[t](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:n,args:e}))),void 0,!0)}for(const e in n)n[e]=chain(...n[e]);if(!r)return n;for(const e in n){const{device:t,capture:i,passive:o}=parseProp(e);this._targetEventStore.add(r,t,"",n[e],{capture:i,passive:o})}}}}function setupGesture(e,t){e.gestures.add(t),e.gestureEventStores[t]=new EventStore(e,t),e.gestureTimeoutStores[t]=new TimeoutStore}function resolveGestures(e,t){t.drag&&setupGesture(e,"drag"),t.wheel&&setupGesture(e,"wheel"),t.scroll&&setupGesture(e,"scroll"),t.move&&setupGesture(e,"move"),t.pinch&&setupGesture(e,"pinch"),t.hover&&setupGesture(e,"hover")}const bindToProps=(e,t,n)=>(r,i,o,s={},a=!1)=>{var l,c;const u=null!==(l=s.capture)&&void 0!==l?l:t.capture,h=null!==(c=s.passive)&&void 0!==c?c:t.passive;let d=a?r:toHandlerProp(r,i,u);n&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(o)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(e){const t={},n={},r=new Set;for(let i in e)RE_NOT_NATIVE.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}function registerGesture(e,t,n,r,i,o){if(!e.has(n))return;if(!EngineMap.has(r))return;const s=n+"Start",a=n+"End";i[r]=e=>{let r;return e.first&&s in t&&t[s](e),n in t&&(r=t[n](e)),e.last&&a in t&&t[a](e),r},o[r]=o[r]||{}}function parseMergedHandlers(e,t){const[n,r,i]=sortHandlers(e),o={};return registerGesture(i,n,"onDrag","drag",o,t),registerGesture(i,n,"onWheel","wheel",o,t),registerGesture(i,n,"onScroll","scroll",o,t),registerGesture(i,n,"onPinch","pinch",o,t),registerGesture(i,n,"onMove","move",o,t),registerGesture(i,n,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:r}}function useRecognizers(e,t={},n,r){const i=React.useMemo((()=>new Controller(e)),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),React.useEffect(i.effect.bind(i)),React.useEffect((()=>i.clean.bind(i)),[]),void 0===t.target)return i.bind.bind(i)}function useDrag(e,t){return registerAction(dragAction),useRecognizers({drag:e},t||{},"drag")}function createUseGesture(e){return e.forEach(registerAction),function e(t,n){const{handlers:r,nativeHandlers:i,config:o}=parseMergedHandlers(t,n||{});return useRecognizers(r,o,void 0,i)}}function useGesture(e,t){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(e,t||{})}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Sky$1=class e extends Mesh{constructor(){super(new BoxGeometry(1,1,1),e.material)}};_defineProperty(Sky$1,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")}),_defineProperty(Sky$1,"material",new ShaderMaterial({name:"SkyShader",fragmentShader:Sky$1.SkyShader.fragmentShader,vertexShader:Sky$1.SkyShader.vertexShader,uniforms:UniformsUtils.clone(Sky$1.SkyShader.uniforms),side:BackSide,depthWrite:!1}));const moduloWrapAround=(e,t)=>(e%t+t)%t;let OrbitControls$1=class extends EventDispatcher{constructor(e,t){super(),_defineProperty(this,"object",void 0),_defineProperty(this,"domElement",void 0),_defineProperty(this,"enabled",!0),_defineProperty(this,"target",new Vector3),_defineProperty(this,"minDistance",0),_defineProperty(this,"maxDistance",1/0),_defineProperty(this,"minZoom",0),_defineProperty(this,"maxZoom",1/0),_defineProperty(this,"minPolarAngle",0),_defineProperty(this,"maxPolarAngle",Math.PI),_defineProperty(this,"minAzimuthAngle",-1/0),_defineProperty(this,"maxAzimuthAngle",1/0),_defineProperty(this,"enableDamping",!1),_defineProperty(this,"dampingFactor",.05),_defineProperty(this,"enableZoom",!0),_defineProperty(this,"zoomSpeed",1),_defineProperty(this,"enableRotate",!0),_defineProperty(this,"rotateSpeed",1),_defineProperty(this,"enablePan",!0),_defineProperty(this,"panSpeed",1),_defineProperty(this,"screenSpacePanning",!0),_defineProperty(this,"keyPanSpeed",7),_defineProperty(this,"autoRotate",!1),_defineProperty(this,"autoRotateSpeed",2),_defineProperty(this,"reverseOrbit",!1),_defineProperty(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_defineProperty(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),_defineProperty(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),_defineProperty(this,"target0",void 0),_defineProperty(this,"position0",void 0),_defineProperty(this,"zoom0",void 0),_defineProperty(this,"_domElementKeyEvents",null),_defineProperty(this,"getPolarAngle",void 0),_defineProperty(this,"getAzimuthalAngle",void 0),_defineProperty(this,"setPolarAngle",void 0),_defineProperty(this,"setAzimuthalAngle",void 0),_defineProperty(this,"getDistance",void 0),_defineProperty(this,"listenToKeyEvents",void 0),_defineProperty(this,"saveState",void 0),_defineProperty(this,"reset",void 0),_defineProperty(this,"update",void 0),_defineProperty(this,"connect",void 0),_defineProperty(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=moduloWrapAround(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=moduloWrapAround(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",z),this._domElementKeyEvents=e},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof PerspectiveCamera?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof PerspectiveCamera&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(r),n.update(),a=s.NONE},this.update=(()=>{const t=new Vector3,i=(new Quaternion).setFromUnitVectors(e.up,new Vector3(0,1,0)),o=i.clone().invert(),f=new Vector3,m=new Quaternion,g=2*Math.PI;return function e(){const _=n.object.position;t.copy(_).sub(n.target),t.applyQuaternion(i),c.setFromVector3(t),n.autoRotate&&a===s.NONE&&w(function b(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=v<=y?Math.max(v,Math.min(y,c.theta)):c.theta>(v+y)/2?Math.max(v,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=h,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(c),t.applyQuaternion(o),_.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0)),h=1,!!(p||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),p=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",j),n.domElement.addEventListener("pointerdown",U),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",Q)},this.dispose=()=>{var e,t,r,i,o,s;null===(e=n.domElement)||void 0===e||e.removeEventListener("contextmenu",j),null===(t=n.domElement)||void 0===t||t.removeEventListener("pointerdown",U),null===(r=n.domElement)||void 0===r||r.removeEventListener("pointercancel",H),null===(i=n.domElement)||void 0===i||i.removeEventListener("wheel",Q),null===(o=n.domElement)||void 0===o||o.ownerDocument.removeEventListener("pointermove",V),null===(s=n.domElement)||void 0===s||s.ownerDocument.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",z)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=s.NONE;const l=1e-6,c=new Spherical,u=new Spherical;let h=1;const d=new Vector3;let p=!1;const f=new Vector2,m=new Vector2,g=new Vector2,_=new Vector2,b=new Vector2,v=new Vector2,y=new Vector2,O=new Vector2,S=new Vector2,T=[],x={};function E(){return Math.pow(.95,n.zoomSpeed)}function w(e){n.reverseOrbit?u.theta+=e:u.theta-=e}function C(e){n.reverseOrbit?u.phi+=e:u.phi-=e}const A=(()=>{const e=new Vector3;return function t(n,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-n),d.add(e)}})(),k=(()=>{const e=new Vector3;return function t(r,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(r),d.add(e)}})(),R=(()=>{const e=new Vector3;return function t(r,i){const o=n.domElement;if(o&&n.object instanceof PerspectiveCamera&&n.object.isPerspectiveCamera){const t=n.object.position;e.copy(t).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),A(2*r*s/o.clientHeight,n.object.matrix),k(2*i*s/o.clientHeight,n.object.matrix)}else o&&n.object instanceof OrthographicCamera$1&&n.object.isOrthographicCamera?(A(r*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),k(i*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof PerspectiveCamera&&n.object.isPerspectiveCamera?h/=e:n.object instanceof OrthographicCamera$1&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function M(e){n.object instanceof PerspectiveCamera&&n.object.isPerspectiveCamera?h*=e:n.object instanceof OrthographicCamera$1&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function $(e){f.set(e.clientX,e.clientY)}function P(e){_.set(e.clientX,e.clientY)}function L(){if(1==T.length)f.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);f.set(e,t)}}function D(){if(1==T.length)_.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);_.set(e,t)}}function N(){const e=T[0].pageX-T[1].pageX,t=T[0].pageY-T[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function B(e){if(1==T.length)m.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}g.subVectors(m,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(w(2*Math.PI*g.x/t.clientHeight),C(2*Math.PI*g.y/t.clientHeight)),f.copy(m)}function F(e){if(1==T.length)b.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}v.subVectors(b,_).multiplyScalar(n.panSpeed),R(v.x,v.y),_.copy(b)}function G(e){const t=Z(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);O.set(0,o),S.set(0,Math.pow(O.y/y.y,n.zoomSpeed)),I(S.y),y.copy(O)}function U(e){if(!1!==n.enabled){var t,r;if(0===T.length)null===(t=n.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",V),null===(r=n.domElement)||void 0===r||r.ownerDocument.addEventListener("pointerup",W);!function o(e){T.push(e)}(e),"touch"===e.pointerType?function l(e){switch(Y(e),T.length){case 1:switch(n.touches.ONE){case TOUCH.ROTATE:if(!1===n.enableRotate)return;L(),a=s.TOUCH_ROTATE;break;case TOUCH.PAN:if(!1===n.enablePan)return;D(),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function e(){n.enableZoom&&N(),n.enablePan&&D()}(),a=s.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function t(){n.enableZoom&&N(),n.enableRotate&&L()}(),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(i)}(e):function c(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case MOUSE.DOLLY:if(!1===n.enableZoom)return;!function t(e){y.set(e.clientX,e.clientY)}(e),a=s.DOLLY;break;case MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;P(e),a=s.PAN}else{if(!1===n.enableRotate)return;$(e),a=s.ROTATE}break;case MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;$(e),a=s.ROTATE}else{if(!1===n.enablePan)return;P(e),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(i)}(e)}}function V(e){!1!==n.enabled&&("touch"===e.pointerType?function t(e){switch(Y(e),a){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;F(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function t(e){n.enableZoom&&G(e),n.enablePan&&F(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function r(e){n.enableZoom&&G(e),n.enableRotate&&B(e)}(e),n.update();break;default:a=s.NONE}}(e):function r(e){if(!1===n.enabled)return;switch(a){case s.ROTATE:if(!1===n.enableRotate)return;!function t(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(w(2*Math.PI*g.x/t.clientHeight),C(2*Math.PI*g.y/t.clientHeight)),f.copy(m),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function r(e){O.set(e.clientX,e.clientY),S.subVectors(O,y),S.y>0?I(E()):S.y<0&&M(E()),y.copy(O),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function i(e){b.set(e.clientX,e.clientY),v.subVectors(b,_).multiplyScalar(n.panSpeed),R(v.x,v.y),_.copy(b),n.update()}(e)}}(e))}function W(e){var t,r,i;(X(e),0===T.length)&&(null===(t=n.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(r=n.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointermove",V),null===(i=n.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",W));n.dispatchEvent(o),a=s.NONE}function H(e){X(e)}function Q(e){!1===n.enabled||!1===n.enableZoom||a!==s.NONE&&a!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function t(e){e.deltaY<0?M(E()):e.deltaY>0&&I(E()),n.update()}(e),n.dispatchEvent(o))}function z(e){!1!==n.enabled&&!1!==n.enablePan&&function t(e){let t=!1;switch(e.code){case n.keys.UP:R(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:R(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function j(e){!1!==n.enabled&&e.preventDefault()}function X(e){delete x[e.pointerId];for(let t=0;t<T.length;t++)if(T[t].pointerId==e.pointerId)return void T.splice(t,1)}function Y(e){let t=x[e.pointerId];void 0===t&&(t=new Vector2,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Z(e){const t=e.pointerId===T[0].pointerId?T[1]:T[0];return x[t.pointerId]}void 0!==t&&this.connect(t),this.update()}};class GLTFLoader extends Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new GLTFMaterialsClearcoatExtension(e)})),this.register((function(e){return new GLTFTextureBasisUExtension(e)})),this.register((function(e){return new GLTFTextureWebPExtension(e)})),this.register((function(e){return new GLTFMaterialsSheenExtension(e)})),this.register((function(e){return new GLTFMaterialsTransmissionExtension(e)})),this.register((function(e){return new GLTFMaterialsVolumeExtension(e)})),this.register((function(e){return new GLTFMaterialsIorExtension(e)})),this.register((function(e){return new GLTFMaterialsEmissiveStrengthExtension(e)})),this.register((function(e){return new GLTFMaterialsSpecularExtension(e)})),this.register((function(e){return new GLTFMaterialsIridescenceExtension(e)})),this.register((function(e){return new GLTFLightsExtension(e)})),this.register((function(e){return new GLTFMeshoptCompression(e)}))}load(e,t,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const s=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},a=new FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),s)}catch(e2){s(e2)}}),n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},s={};if("string"==typeof e)i=e;else{if(LoaderUtils.decodeText(new Uint8Array(e,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{o[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(e)}catch(c){return void(r&&r(c))}i=o[EXTENSIONS.KHR_BINARY_GLTF].content}else i=LoaderUtils.decodeText(new Uint8Array(e))}const a=JSON.parse(i);if(void 0===a.asset||a.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new GLTFParser(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](l);s[e.name]=e,o[e.name]=!0}if(a.extensionsUsed)for(let u=0;u<a.extensionsUsed.length;++u){const e=a.extensionsUsed[u],t=a.extensionsRequired||[];switch(e){case EXTENSIONS.KHR_MATERIALS_UNLIT:o[e]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[e]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:o[e]=new GLTFDracoMeshCompressionExtension(a,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:o[e]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:o[e]=new GLTFMeshQuantizationExtension;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(s),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function GLTFRegistry(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let s;const a=new Color(16777215);void 0!==o.color&&a.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":s=new DirectionalLight(a),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new PointLight(a),s.distance=l;break;case"spot":s=new SpotLight(a),s.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,s.angle=o.spot.outerConeAngle,s.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return s.position.set(0,0,0),s.decay=2,void 0!==o.intensity&&(s.intensity=o.intensity),s.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(s),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(e,t,n){const r=[];e.color=new Color(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,sRGBEncoding))}return Promise.all(r)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Vector2(e,e)}return Promise.all(i)}}class GLTFMaterialsIridescenceExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class GLTFMaterialsSheenExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,sRGBEncoding)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class GLTFMaterialsTransmissionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class GLTFMaterialsVolumeExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=new Color(s[0],s[1],s[2]),Promise.all(i)}}class GLTFMaterialsIorExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=new Color(s[0],s[1],s[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,sRGBEncoding)),Promise.all(i)}}class GLTFTextureBasisUExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,o)}}class GLTFTextureWebPExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],s=r.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class GLTFMeshoptCompression{constructor(e){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(o*s);return i.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t}))}))}return null}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(e){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,r=new DataView(e,BINARY_EXTENSION_HEADER_LENGTH);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===BINARY_EXTENSION_CHUNK_TYPES.JSON){const n=new Uint8Array(e,BINARY_EXTENSION_HEADER_LENGTH+i,t);this.content=LoaderUtils.decodeText(n)}else if(n===BINARY_EXTENSION_CHUNK_TYPES.BIN){const n=BINARY_EXTENSION_HEADER_LENGTH+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const c in o){const e=ATTRIBUTES[c]||c.toLowerCase();s[e]=o[c]}for(const c in e.attributes){const t=ATTRIBUTES[c]||c.toLowerCase();if(void 0!==o[c]){const r=n.accessors[e.attributes[c]],i=WEBGL_COMPONENT_TYPES[r.componentType];l[t]=i.name,a[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=a[t];void 0!==r&&(n.normalized=r)}t(e)}),s,l)}))}))}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(const t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new Color(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture,sRGBEncoding)),e.emissive=new Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t,sRGBEncoding))}return Promise.all(i)}createMaterial(e){const t=new GLTFMeshStandardSGMaterial(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[i+o];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=r-t,u=(n-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,g=d-h,_=1-m,b=g-h+u;for(let v=0;v!==s;v++){const e=o[f+v+s],t=o[f+v+a]*c,n=o[p+v+s],r=o[p+v]*c;i[v]=_*e+b*t+m*n+g*r}return i}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return _q.fromArray(i).normalize().toArray(i),i}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),e.DefaultMaterial}function addUnknownExtensionsToUserData(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function assignExtrasToUserData(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function addMorphTargets(e,t,n){let r=!1,i=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],s=t[1],a=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}function updateMorphTargets(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(e){const t=e.extensions&&e.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+createAttributesKey(t.attributes):e.indices+":"+createAttributesKey(e.attributes)+":"+e.mode,n}function createAttributesKey(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function getNormalizedComponentScale(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}class GLTFParser{constructor(e={},t={}){var n,r;this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i="undefined"!=typeof navigator&&!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o="undefined"!=typeof navigator&&(null===(n=navigator.userAgent)||void 0===n?void 0:n.indexOf("Firefox"))>-1,s="undefined"!=typeof navigator&&o?null===(r=navigator.userAgent)||void 0===r?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||i||o&&s<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};addUnknownExtensionsToUserData(i,o,r),assignExtrasToUserData(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,o]of e.children.entries())i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(LoaderUtils.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=WEBGL_TYPE_SIZES[r.type],s=WEBGL_COMPONENT_TYPES[r.componentType],a=s.BYTES_PER_ELEMENT,l=a*o,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(d=new s(i,e*u,r.count*u/a),l=new InterleavedBuffer(d,u/a),t.cache.add(n,l)),p=new InterleavedBufferAttribute(l,o,c%u/a,h)}else d=null===i?new s(r.count*o):new s(i,c,r.count*o),p=new BufferAttribute(d,o,h);if(void 0!==r.sparse){const t=WEBGL_TYPE_SIZES.SCALAR,n=WEBGL_COMPONENT_TYPES[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],a,r.sparse.count*t),u=new s(e[2],l,r.sparse.count*o);null!==i&&(p=new BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=i.textures[e],s=i.images[t],a=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,o.name&&(t.name=o.name);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=WEBGL_FILTERS[n.magFilter]||LinearFilter,t.minFilter=WEBGL_FILTERS[n.minFilter]||LinearMipmapLinearFilter,t.wrapS=WEBGL_WRAPPINGS[n.wrapS]||RepeatWrapping,t.wrapT=WEBGL_WRAPPINGS[n.wrapT]||RepeatWrapping,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=r.images[e],s=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(void 0!==o.bufferView)a=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(a).then((function(e){return new Promise((function(n,r){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new Texture(e);t.needsUpdate=!0,n(t)}),t.load(LoaderUtils.resolveURL(e,i.path),o,void 0,r)}))})).then((function(e){return!0===l&&s.revokeObjectURL(a),e.userData.mimeType=o.mimeType||getImageURIMimeType(o.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(o);o=i.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&(o.encoding=r),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new PointsMaterial,Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new LineBasicMaterial,Material.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const s={},a=i.extensions||{},l=[];if(a[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),l.push(e.extendParams(s,i,t))}else if(a[EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=r[EXTENSIONS.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),l.push(e.extendParams(s,i,t))}else{const n=i.pbrMetallicRoughness||{};if(s.color=new Color(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(s,"map",n.baseColorTexture,sRGBEncoding)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===i.doubleSided&&(s.side=DoubleSide);const c=i.alphaMode||ALPHA_MODES.OPAQUE;if(c===ALPHA_MODES.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,c===ALPHA_MODES.MASK&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==MeshBasicMaterial&&(l.push(t.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new Vector2(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&o!==MeshBasicMaterial&&(l.push(t.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==MeshBasicMaterial&&(s.emissive=(new Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==MeshBasicMaterial&&l.push(t.assignTexture(s,"emissiveMap",i.emissiveTexture,sRGBEncoding)),Promise.all(l).then((function(){let n;return n=o===GLTFMeshStandardSGMaterial?r[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new o(s),i.name&&(n.name=i.name),assignExtrasToUserData(n,i),t.associations.set(n,{materials:e}),i.extensions&&addUnknownExtensionsToUserData(r,n,i),n}))}createUniqueName(e){const t=PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return addPrimitiveAttributes(n,e,t)}))}const o=[];for(let s=0,a=e.length;s<a;s++){const n=e[s],a=createPrimitiveKey(n),l=r[a];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?i(n):addPrimitiveAttributes(new BufferGeometry,n,t),r[a]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,s=[];for(let a=0,l=o.length;a<l;a++){const e=void 0===o[a].material?createDefaultMaterial(this.cache):this.getDependency("material",o[a].material);s.push(e)}return s.push(t.loadGeometries(o)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let u=0,h=a.length;u<h;u++){const n=a[u],c=o[u];let h;const d=s[u];if(c.mode===WEBGL_CONSTANTS.TRIANGLES||c.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||c.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||void 0===c.mode)h=!0===i.isSkinnedMesh?new SkinnedMesh(n,d):new Mesh(n,d),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),c.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?h.geometry=toTrianglesDrawMode(h.geometry,TriangleStripDrawMode):c.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(h.geometry=toTrianglesDrawMode(h.geometry,TriangleFanDrawMode));else if(c.mode===WEBGL_CONSTANTS.LINES)h=new LineSegments(n,d);else if(c.mode===WEBGL_CONSTANTS.LINE_STRIP)h=new Line$2(n,d);else if(c.mode===WEBGL_CONSTANTS.LINE_LOOP)h=new LineLoop(n,d);else{if(c.mode!==WEBGL_CONSTANTS.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new Points(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&updateMorphTargets(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),assignExtrasToUserData(h,i),c.extensions&&addUnknownExtensionsToUserData(r,h,c),t.assignFinalMaterial(h),l.push(h)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return l[0];const c=new Group;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new PerspectiveCamera(MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new OrthographicCamera$1(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),assignExtrasToUserData(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],o=[],s=[];for(let a=0,l=t.channels.length;a<l;a++){const e=t.channels[a],l=t.samplers[e.sampler],c=e.target,u=c.node,h=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",d)),o.push(l),s.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(s)]).then((function(n){const r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=o[e],u=s[e],h=a[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),PATH_PROPERTIES[h.path]){case PATH_PROPERTIES.weights:d=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:d=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:d=VectorKeyframeTrack}const p=t.name?t.name:t.uuid,f=void 0!==u.interpolation?INTERPOLATION[u.interpolation]:InterpolateLinear,m=[];PATH_PROPERTIES[h.path]===PATH_PROPERTIES.weights?t.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);let g=c.array;if(c.normalized){const e=getNormalizedComponentScale(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,r=m.length;e<r;e++){const t=new d(m[e]+"."+PATH_PROPERTIES[h.path],n.array,g,f);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function e(t){return new(this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant)(this.times,this.values,this.getValueSize()/3,t)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new AnimationClip(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let s;if(s=!0===i.isBone?new Bone:t.length>1?new Group:1===t.length?t[0]:new Object3D,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(i.name&&(s.userData.name=i.name,s.name=o),assignExtrasToUserData(s,i),i.extensions&&addUnknownExtensionsToUserData(n,s,i),void 0!==i.matrix){const e=new Matrix4;e.fromArray(i.matrix),s.applyMatrix4(e)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,o=new Group;r.name&&(o.name=i.createUniqueName(r.name)),assignExtrasToUserData(o,r),r.extensions&&addUnknownExtensionsToUserData(n,o,r);const s=r.nodes||[],a=[];for(let l=0,c=s.length;l<c;l++)a.push(buildNodeHierarchy(s[l],o,t,i));return Promise.all(a).then((function(){return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Material||n instanceof Texture)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(o),o}))}}function buildNodeHierarchy(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let i=0,o=t.joints.length;i<o;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let o=0,s=n.length;o<s;o++){const e=n[o];if(e){r.push(e);const n=new Matrix4;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*o),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new Skeleton(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(i.children){const t=i.children;for(let i=0,s=t.length;i<s;i++){const s=t[i];o.push(buildNodeHierarchy(s,e,n,r))}}return Promise.all(o)}))}function computeBounds(e,t,n){const r=t.attributes,i=new Box3;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new Vector3(t[0],t[1],t[2]),new Vector3(o[0],o[1],o[2])),e.normalized){const t=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new Vector3,t=new Vector3;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,s=r.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),r.normalized){const e=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const s=new Sphere$1;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=s}function addPrimitiveAttributes(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const s in r){const t=ATTRIBUTES[s]||s.toLowerCase();t in e.attributes||i.push(o(r[s],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return assignExtrasToUserData(e,t),computeBounds(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?addMorphTargets(e,t.targets,n):e}))}function toTrianglesDrawMode(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===TriangleFanDrawMode)for(let s=1;s<=r;s++)i.push(n.getX(0)),i.push(n.getX(s)),i.push(n.getX(s+1));else for(let s=0;s<r;s++)s%2==0?(i.push(n.getX(s)),i.push(n.getX(s+1)),i.push(n.getX(s+2))):(i.push(n.getX(s+2)),i.push(n.getX(s+1)),i.push(n.getX(s)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new FileLoader(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const e=t.attributeTypes[a];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[a]=e.name)}const n=JSON.stringify(t);if(_taskCache.has(e)){const t=_taskCache.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return s.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),_taskCache.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new BufferGeometry;e.index&&t.setIndex(new BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,o=r.array,s=r.itemSize;t.setAttribute(i,new BufferAttribute(o,s))}return t}_loadLibrary(e,t){const n=new FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=DRACOWorker.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let e,t;function n(e,t,n,r,i,o){const s=o.num_components(),a=n.num_points()*s,l=a*i.BYTES_PER_ELEMENT,c=function u(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),h=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,h);const d=new i(e.HEAPF32.buffer,h,a).slice();return e._free(h),{name:r,array:d,itemSize:s}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,o=i.taskConfig;t.then((e=>{const t=e.draco,s=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(r),r.byteLength);try{const e=function l(e,t,r,i){const o=i.attributeIDs,s=i.attributeTypes;let a,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeBufferToMesh(r,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const d in o){const r=self[s[d]];let l,c;if(i.useUniqueIDs)c=o[d],l=t.GetAttributeByUniqueId(a,c);else{if(c=t.GetAttributeId(a,e[o[d]]),-1===c)continue;l=t.GetAttribute(a,c)}u.attributes.push(n(e,t,a,d,r,l))}c===e.TRIANGULAR_MESH&&(u.index=function h(e,t,n){const r=n.num_faces(),i=3*r,o=4*i,s=e._malloc(o);t.GetTrianglesUInt32Array(n,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,i).slice();return e._free(s),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),u}(t,s,a,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(a),t.destroy(s)}}))}}}const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new WireframeGeometry(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),_box$1.setFromBufferAttribute(t),this.boundingBox.union(_box$1))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere$1),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)_vector.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(_vector)),_vector.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},ShaderLib.line={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class LineMaterial extends ShaderMaterial{constructor(e){super({type:"LineMaterial",uniforms:UniformsUtils.clone(ShaderLib.line.uniforms),vertexShader:ShaderLib.line.vertexShader,fragmentShader:ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(e){Boolean(e)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const _start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere=new Sphere$1,_clipToWorldVector=new Vector4;let _ray,_instanceStart,_instanceEnd,_lineWidth,generated;function getWorldSpaceHalfWidth(e,t,n){return _clipToWorldVector.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/n.width,_clipToWorldVector.y=_lineWidth/n.height,_clipToWorldVector.applyMatrix4(e.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(e,t){for(let n=0,r=_instanceStart.count;n<r;n++){_line.start.fromBufferAttribute(_instanceStart,n),_line.end.fromBufferAttribute(_instanceEnd,n);const r=new Vector3,i=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,i,r);i.distanceTo(r)<.5*_lineWidth&&t.push({point:i,pointOnLine:r,distance:_ray.origin.distanceTo(i),object:e,face:null,faceIndex:n,uv:null,uv2:null})}}function raycastScreenSpace(e,t,n){const r=t.projectionMatrix,i=e.material.resolution,o=e.matrixWorld,s=e.geometry,a=s.attributes.instanceStart,l=s.attributes.instanceEnd,c=-t.near;_ray.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4(t.matrixWorldInverse),_ssOrigin.applyMatrix4(r),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=i.x/2,_ssOrigin.y*=i.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices(t.matrixWorldInverse,o);for(let u=0,h=a.count;u<h;u++){_start4.fromBufferAttribute(a,u),_end4.fromBufferAttribute(l,u),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix);if(_start4.z>c&&_end4.z>c)continue;if(_start4.z>c){const e=_start4.z-_end4.z,t=(_start4.z-c)/e;_start4.lerp(_end4,t)}else if(_end4.z>c){const e=_end4.z-_start4.z,t=(_end4.z-c)/e;_end4.lerp(_start4,t)}_start4.applyMatrix4(r),_end4.applyMatrix4(r),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=i.x/2,_start4.y*=i.y/2,_end4.x*=i.x/2,_end4.y*=i.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const t=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(t,_closestPoint);const s=MathUtils.lerp(_start4.z,_end4.z,t),h=s>=-1&&s<=1,d=_ssOrigin3.distanceTo(_closestPoint)<.5*_lineWidth;if(h&&d){_line.start.fromBufferAttribute(a,u),_line.end.fromBufferAttribute(l,u),_line.start.applyMatrix4(o),_line.end.applyMatrix4(o);const t=new Vector3,r=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,r,t),n.push({point:r,pointOnLine:t,distance:_ray.origin.distanceTo(r),object:e,face:null,faceIndex:u,uv:null,uv2:null})}}}class LineSegments2 extends Mesh{constructor(e=new LineSegmentsGeometry,t=new LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,s=0,a=t.count;o<a;o++,s+=2)_start.fromBufferAttribute(t,o),_end.fromBufferAttribute(n,o),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+_start.distanceTo(_end);const i=new InstancedInterleavedBuffer(r,2,1);return e.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(i,1,0)),e.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;null!==r||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=void 0!==e.params.Line2&&e.params.Line2.threshold||0;_ray=e.ray;const o=this.matrixWorld,s=this.geometry,a=this.material;let l,c;if(_lineWidth=a.linewidth+i,_instanceStart=s.attributes.instanceStart,_instanceEnd=s.attributes.instanceEnd,null===s.boundingSphere&&s.computeBoundingSphere(),_sphere.copy(s.boundingSphere).applyMatrix4(o),n)l=.5*_lineWidth;else{l=getWorldSpaceHalfWidth(r,Math.max(r.near,_sphere.distanceToPoint(_ray.origin)),a.resolution)}if(_sphere.radius+=l,!1!==_ray.intersectsSphere(_sphere)){if(null===s.boundingBox&&s.computeBoundingBox(),_box.copy(s.boundingBox).applyMatrix4(o),n)c=.5*_lineWidth;else{c=getWorldSpaceHalfWidth(r,Math.max(r.near,_box.distanceToPoint(_ray.origin)),a.resolution)}_box.expandByScalar(c),!1!==_ray.intersectsBox(_box)&&(n?raycastWorldUnits(this,t):raycastScreenSpace(this,r,t))}}}class Line2 extends LineSegments2{constructor(e=new LineGeometry,t=new LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}const MeshoptDecoder=()=>{if(generated)return generated;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function o(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function s(e,t,r,i,o,s){const a=n.exports.sbrk,l=r+3&-4,c=a(l*i),u=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,u);const d=e(c,r,i,u,o.length);if(0===d&&s&&s(c,l,i),t.set(h.subarray(c,c+r*i)),a(c-a(0)),0!==d)throw new Error(`Malformed buffer data: ${d}`)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,o){s(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[o]])},decodeIndexBuffer(e,t,r,i){s(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){s(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,o,c){s(n.exports[l[o]],e,t,r,i,n.exports[a[c]])}},generated},Line$1=reactExports.forwardRef((function e({points:t,color:n="black",vertexColors:r,linewidth:i,lineWidth:o,segments:s,dashed:a,...l},c){const u=useThree((e=>e.size)),h=reactExports.useMemo((()=>s?new LineSegments2:new Line2),[s]),[d]=reactExports.useState((()=>new LineMaterial)),p=reactExports.useMemo((()=>{const e=s?new LineSegmentsGeometry:new LineGeometry,n=t.map((e=>{const t=Array.isArray(e);return e instanceof Vector3?[e.x,e.y,e.z]:e instanceof Vector2?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e}));if(e.setPositions(n.flat()),r){const t=r.map((e=>e instanceof Color?e.toArray():e));e.setColors(t.flat())}return e}),[t,s,r]);return reactExports.useLayoutEffect((()=>{h.computeLineDistances()}),[t,h]),reactExports.useLayoutEffect((()=>{a?d.defines.USE_DASH="":delete d.defines.USE_DASH,d.needsUpdate=!0}),[a,d]),reactExports.useEffect((()=>()=>p.dispose()),[p]),reactExports.createElement("primitive",_extends({object:h,ref:c},l),reactExports.createElement("primitive",{object:p,attach:"geometry"}),reactExports.createElement("primitive",_extends({object:d,attach:"material",color:n,vertexColors:Boolean(r),resolution:[u.width,u.height],linewidth:null!=i?i:o,dashed:a},l)))})),CatmullRomLine=reactExports.forwardRef((function e({points:t,closed:n=!1,curveType:r="centripetal",tension:i=.5,segments:o=20,vertexColors:s,...a},l){const c=reactExports.useMemo((()=>{const e=t.map((e=>e instanceof Vector3?e:new Vector3(...e)));return new CatmullRomCurve3(e,n,r,i)}),[t,n,r,i]),u=reactExports.useMemo((()=>c.getPoints(o)),[c,o]),h=reactExports.useMemo((()=>{if(!s||s.length<2)return;if(s.length===o+1)return s;const e=s.map((e=>e instanceof Color?e:new Color(...e)));n&&e.push(e[0].clone());const t=[e[0]],r=o/(e.length-1);for(let n=1;n<o;n++){const i=n%r/r,o=Math.floor(n/r);t.push(e[o].clone().lerp(e[o+1],i))}return t.push(e[e.length-1]),t}),[s,o]);return reactExports.createElement(Line$1,_extends({ref:l,points:u,vertexColors:h},a))}));function workerBootstrap(){var e=Object.create(null);function t(r,i){var o=r.id,s=r.name,a=r.dependencies;void 0===a&&(a=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{a=a.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+s+">.init",l),c&&(c=n("<"+s+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,a):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(h){h&&h.noLog||console.error(h),i(h)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,s=r.data;try{"registerModule"===o&&t(s,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function a(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var s=(r=e[i]).value.apply(r,o);s&&"function"==typeof s.then?s.then(a,(function(e){return n(e instanceof Error?e:new Error(""+e))})):a(s)}catch(l){n(l)}function a(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(s,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(l){postMessage({messageId:i,success:!1,error:l.stack})}}))}function defineMainThreadModule(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}var supportsWorkers=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return supportsWorkers=function(){return e},e},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(e){if(!(e&&"function"==typeof e.init||_allowInitAsString))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!supportsWorkers())return defineMainThreadModule(e);null==i&&(i="#default");var o="workerModule"+ ++_workerModuleId,s=e.name||o,a=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!a){a=callWorker(i,"registerModule",l.workerModuleData);var n=function(){a=null,registeredModules[i].delete(n)};(registeredModules[i]||(registeredModules[i]=new Set)).add(n)}return a.then((function(t){if(t.isCallable)return callWorker(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(_allowInitAsString=!0,e=defineWorkerModule({workerId:i,name:"<"+s+"> function dependency: "+e.name,init:"function(){return (\n"+stringifyFunction(e)+"\n)}"}),_allowInitAsString=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:t,init:stringifyFunction(n),getTransferables:r&&stringifyFunction(r)},l}function terminateWorker(e){registeredModules[e]&&registeredModules[e].forEach((function(e){e()})),workers[e]&&(workers[e].terminate(),delete workers[e])}function stringifyFunction(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function getWorker(e){var t=workers[e];if(!t){var n=stringifyFunction(workerBootstrap);(t=workers[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=openRequests[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[n],r(t)}}return t}function callWorker(e,t,n){return new Promise((function(r,i){var o=++_messageId;openRequests[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},getWorker(e).postMessage({messageId:o,action:t,data:n})}))}function SDFGenerator(){var e=function(e){function t(e,t,n,r,i,o,s,a){var l=1-s;a.x=l*l*e+2*l*s*n+s*s*i,a.y=l*l*t+2*l*s*r+s*s*o}function n(e,t,n,r,i,o,s,a,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*s,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*a}function r(e,t){for(var n,r,i,o,s,a=/([MLQCZ])([^MLQCZ]*)/g;n=a.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],s=i=l[1];break;case"L":l[0]===o&&l[1]===s||t("L",o,s,o=l[0],s=l[1]);break;case"Q":t("Q",o,s,o=l[2],s=l[3],l[0],l[1]);break;case"C":t("C",o,s,o=l[4],s=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&s===i||t("L",o,s,r,i)}}}function i(e,i,o){void 0===o&&(o=16);var s={x:0,y:0};r(e,(function(e,r,a,l,c,u,h,d,p){switch(e){case"L":i(r,a,l,c);break;case"Q":for(var f=r,m=a,g=1;g<o;g++)t(r,a,u,h,l,c,g/(o-1),s),i(f,m,s.x,s.y),f=s.x,m=s.y;break;case"C":for(var _=r,b=a,v=1;v<o;v++)n(r,a,u,h,d,p,l,c,v/(o-1),s),i(_,b,s.x,s.y),_=s.x,b=s.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",a=new WeakMap,l={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(e,t){var n=e.getContext?e.getContext("webgl",l):e,r=a.get(n);if(!r){let e=function(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t},t=function(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r},l=function(r,o,a,l){if(!s[r]){var c={},u={},h=n.createProgram();n.attachShader(h,t(o,n.VERTEX_SHADER)),n.attachShader(h,t(a,n.FRAGMENT_SHADER)),n.linkProgram(h),s[r]={program:h,transaction:function t(r){n.useProgram(h),r({setUniform:function e(t,r){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];var s=u[r]||(u[r]=n.getUniformLocation(h,r));n["uniform"+t].apply(n,[s].concat(i))},setAttribute:function t(r,o,s,a,l){var u=c[r];u||(u=c[r]={buf:n.createBuffer(),loc:n.getAttribLocation(h,r),data:null}),n.bindBuffer(n.ARRAY_BUFFER,u.buf),n.vertexAttribPointer(u.loc,o,n.FLOAT,!1,0,0),n.enableVertexAttribArray(u.loc),i?n.vertexAttribDivisor(u.loc,a):e("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(u.loc,a),l!==u.data&&(n.bufferData(n.ARRAY_BUFFER,l,s),u.data=l)}})}}}s[r].transaction(l)},d=function(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}},p=function(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}},f=function(){o={},s={},c={},u=-1,h.length=0};var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},s={},c={},u=-1,h=[];n.canvas.addEventListener("webglcontextlost",(function(e){f(),e.preventDefault()}),!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:e,withProgram:l,withTexture:d,withTextureFramebuffer:p,handleContextLoss:f})}t(r)}function u(e,t,n,r,i,a,l,u){void 0===l&&(l=15),void 0===u&&(u=null),c(e,(function(e){var c=e.gl,h=e.withProgram;(0,e.withTexture)("copy",(function(e,d){c.texImage2D(c.TEXTURE_2D,0,c.RGBA,i,a,0,c.RGBA,c.UNSIGNED_BYTE,t),h("copy",o,s,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,c.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),c.bindFramebuffer(c.FRAMEBUFFER,u||null),c.disable(c.BLEND),c.colorMask(8&l,4&l,2&l,1&l),c.viewport(n,r,i,a),c.scissor(n,r,i,a),c.drawArrays(c.TRIANGLES,0,3)}))}))}))}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:u,resizeWebGLCanvasWithoutClearing:function d(e,t,n){var r=e.width,i=e.height;c(e,(function(o){var s=o.gl,a=new Uint8Array(r*i*4);s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,a),e.width=t,e.height=n,u(s,a,0,0,r,i)}))}});function p(e,t,n,r,o,s){void 0===s&&(s=1);var a=new Uint8Array(e*t),l=r[2]-r[0],c=r[3]-r[1],u=[];i(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=m(r[0]+l*(h+.5)/e,r[1]+c*(d+.5)/t),f=Math.pow(1-Math.abs(p)/o,s)/2;p<0&&(f=1-f),f=Math.max(0,Math.min(255,Math.round(255*f))),a[d*e+h]=f}return a;function m(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var s=g(e,t,o.x1,o.y1,o.x2,o.y2);s<n&&(n=s,r=Math.sqrt(n))}}return function a(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function f(e,t,n,r,i,o,s,a,l,c){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0),m(e,t,n,r,i,o,s,null,a,l,c)}function m(e,t,n,r,i,o,s,a,l,c,h){void 0===o&&(o=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0);for(var d=p(e,t,n,r,i,o),f=new Uint8Array(4*d.length),m=0;m<d.length;m++)f[4*m+h]=d[m];u(s,f,l,c,e,t,1<<3-h,a)}function g(e,t,n,r,i,o){var s=i-n,a=o-r,l=s*s+a*a,c=l?Math.max(0,Math.min(1,((e-n)*s+(t-r)*a)/l)):0,u=e-(n+c*s),h=t-(r+c*a);return u*u+h*h}var _=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:f,generateIntoFramebuffer:m}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",v="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",y="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),S=null,T=!1,x={},E=new WeakMap;function w(e){if(!T&&!R(e))throw new Error("WebGL generation not supported")}function C(e,t,n,r,i,o,s){if(void 0===o&&(o=1),void 0===s&&(s=null),!s&&!(s=S)){var a="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!a)throw new Error("OffscreenCanvas or DOM canvas not supported");s=S=a.getContext("webgl",{depth:!1})}w(s);var l=new Uint8Array(e*t*4);c(s,(function(s){var a=s.gl,c=s.withTexture,u=s.withTextureFramebuffer;c("readable",(function(s,c){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e,t,0,a.RGBA,a.UNSIGNED_BYTE,null),u(s,c,(function(s){k(e,t,n,r,i,o,a,s,0,0,0),a.readPixels(0,0,e,t,a.RGBA,a.UNSIGNED_BYTE,l)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<l.length;h+=4)u[d++]=l[h];return u}function A(e,t,n,r,i,o,s,a,l,c){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0),k(e,t,n,r,i,o,s,null,a,l,c)}function k(e,t,n,r,s,a,l,u,h,d,p){void 0===a&&(a=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),w(l);var f=[];i(n,(function(e,t,n,r){f.push(e,t,n,r)})),f=new Float32Array(f),c(l,(function(n){var i=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,g=n.withTexture,_=n.withTextureFramebuffer,S=n.handleContextLoss;if(g("rawDistances",(function(n,g){e===n._lastWidth&&t===n._lastHeight||i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=e,n._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),m("main",b,v,(function(o){var u=o.setAttribute,h=o.setUniform,d=!l&&c("ANGLE_instanced_arrays"),p=!l&&c("EXT_blend_minmax");u("aUV",2,i.STATIC_DRAW,0,O),u("aLineSegment",4,i.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(r)),h("1f","uMaxDistance",s),h("1f","uExponent",a),_(n,g,(function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,l?i.MAX:p.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),l?i.drawArraysInstanced(i.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(i.TRIANGLES,0,3,f.length/4)}))})),m("post",o,y,(function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,O),n.setUniform("1i","tex",g),i.bindFramebuffer(i.FRAMEBUFFER,u),i.disable(i.BLEND),i.colorMask(0===p,1===p,2===p,3===p),i.viewport(h,d,e,t),i.scissor(h,d,e,t),i.drawArrays(i.TRIANGLES,0,3)}))})),i.isContextLost())throw S(),new Error("webgl context lost")}))}function R(e){var t=e&&e!==S?e.canvas||e:x,n=E.get(t);if(void 0===n){T=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=C(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})))||(r="bad trial run results",console.info(i,o))}catch(s){n=!1,r=s.message}r&&console.warn("WebGL SDF generation not supported:",r),T=!1,E.set(t,n)}return n}var I=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:A,generateIntoFramebuffer:k,isSupported:R});return e.forEachPathCommand=r,e.generate=function M(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return C.apply(I,arguments)}catch(e2){return console.info("WebGL SDF generation failed, falling back to JS",e2),p.apply(_,arguments)}},e.generateIntoCanvas=function $(e,t,n,r,i,o,s,a,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return A.apply(I,arguments)}catch(e2){return console.info("WebGL SDF generation failed, falling back to JS",e2),f.apply(_,arguments)}},e.javascript=_,e.pathToLineSegments=i,e.webgl=I,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}function bidiFactory(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,s=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,a=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|a,c=null;function u(e){return function r(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],s=i[1];o=parseInt(o,36),s=s?parseInt(s,36):0,c.set(r+=o,n[e]);for(var a=0;a<s;a++)c.set(++r,n[e])}))}};for(var r in t)e(r)}}(),c.get(e.codePointAt(0))||n.L}var h,d,p,f={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(s){if(-1!==s.indexOf("+"))for(var a=+s;a--;)e(n);else{n=s;var l=s.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}})),{map:i,reverseMap:o}}function g(){if(!h){var e=m(f.pairs,!0),t=e.map,n=e.reverseMap;h=t,d=n,p=m(f.canonical,!1).map}}function _(e){return g(),h.get(e)||null}function b(e){return g(),d.get(e)||null}function v(e){return g(),p.get(e)||null}var y=n.L,O=n.R,S=n.EN,T=n.ES,x=n.ET,E=n.AN,w=n.CS,C=n.B,A=n.S,k=n.ON,R=n.BN,I=n.NSM,M=n.AL,$=n.LRO,P=n.RLO,L=n.LRE,D=n.RLE,N=n.PDF,B=n.LRI,F=n.RLI,G=n.FSI,U=n.PDI;var V,W="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function H(e){return function t(){if(!V){var e=m(W,!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),V=t}}(),V.get(e)||null}function Q(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var s=Math.max(n,i.start),a=Math.min(r,i.end);if(s<a){for(var c=t.levels.slice(s,a+1),h=a;h>=s&&u(e[h])&l;h--)c[h]=i.level;for(var d=i.level,p=1/0,f=0;f<c.length;f++){var m=c[f];m>d&&(d=m),m<p&&(p=1|m)}for(var g=d;g>=p;g--)for(var _=0;_<c.length;_++)if(c[_]>=g){for(var b=_;_+1<c.length&&c[_+1]>=g;)_++;_>b&&o.push([b+n,_+n])}}})),o}function z(e,t,n,r){for(var i=Q(e,t,n,r),o=[],s=0;s<e.length;s++)o[s]=s;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=b,e.getBidiCharType=u,e.getBidiCharTypeName=function j(e){return r[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function X(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var c=new Map;function h(e,t){var r=n[e];n[e]=t,c.set(r,c.get(r)-1),r&s&&c.set(s,c.get(s)-1),c.set(t,(c.get(t)||0)+1),t&s&&c.set(s,(c.get(s)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],m=null,g=0;g<e.length;g++)m||f.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Ut(g,!1)}),n[g]&C&&(m.end=g,m=null);for(var V=D|L|P|$|i|U|N|C,W=function(e){return e+(1&e?1:2)},H=function(e){return e+(1&e?2:1)},Q=0;Q<f.length;Q++){var z=[{_level:(m=f[Q]).level,_override:0,_isolate:0}],j=void 0,X=0,Y=0,Z=0;c.clear();for(var q=m.start;q<=m.end;q++){var K=n[q];if(j=z[z.length-1],c.set(K,(c.get(K)||0)+1),K&s&&c.set(s,(c.get(s)||0)+1),K&V)if(K&(D|L)){d[q]=j._level;var J=(K===D?H:W)(j._level);J<=125&&!X&&!Y?z.push({_level:J,_override:0,_isolate:0}):X||Y++}else if(K&(P|$)){d[q]=j._level;var ee=(K===P?H:W)(j._level);ee<=125&&!X&&!Y?z.push({_level:ee,_override:K&P?O:y,_isolate:0}):X||Y++}else if(K&i){K&G&&(K=1===Ut(q+1,!0)?F:B),d[q]=j._level,j._override&&h(q,j._override);var te=(K===F?H:W)(j._level);te<=125&&0===X&&0===Y?(Z++,z.push({_level:te,_override:0,_isolate:1,_isolInitIndex:q})):X++}else if(K&U){if(X>0)X--;else if(Z>0){for(Y=0;!z[z.length-1]._isolate;)z.pop();var ne=z[z.length-1]._isolInitIndex;null!=ne&&(p.set(ne,q),p.set(q,ne)),z.pop(),Z--}j=z[z.length-1],d[q]=j._level,j._override&&h(q,j._override)}else K&N?(0===X&&(Y>0?Y--:!j._isolate&&z.length>1&&(z.pop(),j=z[z.length-1])),d[q]=j._level):K&C&&(d[q]=m.level);else d[q]=j._level,j._override&&K!==R&&h(q,j._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var se=n[oe];if(!(se&a)){var ae=d[oe],le=se&i,ce=se===U;ie&&ae===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:ae,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[ie=de],fe=void 0;ie&&ie._endsWithIsolInit&&null!=(fe=p.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===fe){pe.push(ie=re[me]);break}for(var ge=[],_e=0;_e<pe.length;_e++)for(var be=pe[_e],ve=be._start;ve<=be._end;ve++)ge.push(ve);for(var ye=d[ge[0]],Oe=m.level,Se=ge[0]-1;Se>=0;Se--)if(!(n[Se]&a)){Oe=d[Se];break}var Te=ge[ge.length-1],xe=d[Te],Ee=m.level;if(!(n[Te]&i))for(var we=Te+1;we<=m.end;we++)if(!(n[we]&a)){Ee=d[we];break}ue.push({_seqIndices:ge,_sosType:Math.max(Oe,ye)%2?O:y,_eosType:Math.max(Ee,xe)%2?O:y})}}for(var Ce=0;Ce<ue.length;Ce++){var Ae=ue[Ce],ke=Ae._seqIndices,Re=Ae._sosType,Ie=Ae._eosType;if(c.get(I))for(var Me=0;Me<ke.length;Me++){var $e=ke[Me];if(n[$e]&I){for(var Pe=Re,Le=Me-1;Le>=0;Le--)if(!(n[ke[Le]]&a)){Pe=n[ke[Le]];break}h($e,Pe&(i|U)?k:Pe)}}if(c.get(S))for(var De=0;De<ke.length;De++){var Ne=ke[De];if(n[Ne]&S)for(var Be=De-1;Be>=-1;Be--){var Fe=-1===Be?Re:n[ke[Be]];if(Fe&o){Fe===M&&h(Ne,E);break}}}if(c.get(M))for(var Ge=0;Ge<ke.length;Ge++){var Ue=ke[Ge];n[Ue]&M&&h(Ue,O)}if(c.get(T)||c.get(w))for(var Ve=1;Ve<ke.length-1;Ve++){var We=ke[Ve];if(n[We]&(T|w)){for(var He=0,Qe=0,ze=Ve-1;ze>=0&&(He=n[ke[ze]])&a;ze--);for(var je=Ve+1;je<ke.length&&(Qe=n[ke[je]])&a;je++);He===Qe&&(n[We]===T?He===S:He&(S|E))&&h(We,He)}}if(c.get(S))for(var Xe=0;Xe<ke.length;Xe++){var Ye=ke[Xe];if(n[Ye]&S){for(var Ze=Xe-1;Ze>=0&&n[ke[Ze]]&(x|a);Ze--)h(ke[Ze],S);for(var qe=Xe+1;qe<ke.length&&n[ke[qe]]&(x|a);qe++)h(ke[qe],S)}}if(c.get(x)||c.get(T)||c.get(w))for(var Ke=0;Ke<ke.length;Ke++){var Je=ke[Ke];if(n[Je]&(x|T|w)){h(Je,k);for(var et=Ke-1;et>=0&&n[ke[et]]&a;et--)h(ke[et],k);for(var tt=Ke+1;tt<ke.length&&n[ke[tt]]&a;tt++)h(ke[tt],k)}}if(c.get(S))for(var nt=0,rt=Re;nt<ke.length;nt++){var it=ke[nt],ot=n[it];ot&S?rt===y&&h(it,y):ot&o&&(rt=ot)}if(c.get(s)){for(var st=O|S|E,at=st|y,lt=[],ct=[],ut=0;ut<ke.length;ut++)if(n[ke[ut]]&s){var ht=e[ke[ut]],dt=void 0;if(null!==_(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=b(ht)))for(var pt=ct.length-1;pt>=0;pt--){var ft=ct[pt].char;if(ft===dt||ft===b(v(ht))||_(v(ft))===ht){lt.push([ct[pt].seqIndex,ut]),ct.length=pt;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],_t=gt[0],bt=gt[1],vt=!1,yt=0,Ot=_t+1;Ot<bt;Ot++){var St=ke[Ot];if(n[St]&at){vt=!0;var Tt=n[St]&st?O:y;if(Tt===Wt(St)){yt=Tt;break}}}if(vt&&!yt){yt=Re;for(var xt=_t-1;xt>=0;xt--){var Et=ke[xt];if(n[Et]&at){var wt=n[Et]&st?O:y;yt=wt!==Wt(Et)?wt:Wt(Et);break}}}if(yt){if(n[ke[_t]]=n[ke[bt]]=yt,yt!==Wt(ke[_t]))for(var Ct=_t+1;Ct<ke.length;Ct++)if(!(n[ke[Ct]]&a)){u(e[ke[Ct]])&I&&(n[ke[Ct]]=yt);break}if(yt!==Wt(ke[bt]))for(var At=bt+1;At<ke.length;At++)if(!(n[ke[At]]&a)){u(e[ke[At]])&I&&(n[ke[At]]=yt);break}}}for(var kt=0;kt<ke.length;kt++)if(n[ke[kt]]&s){for(var Rt=kt,It=kt,Mt=Re,$t=kt-1;$t>=0;$t--){if(!(n[ke[$t]]&a)){Mt=n[ke[$t]]&st?O:y;break}Rt=$t}for(var Pt=Ie,Lt=kt+1;Lt<ke.length;Lt++){if(!(n[ke[Lt]]&(s|a))){Pt=n[ke[Lt]]&st?O:y;break}It=Lt}for(var Dt=Rt;Dt<=It;Dt++)n[ke[Dt]]=Mt===Pt?Mt:Wt(ke[Dt]);kt=It}}}for(var Nt=m.start;Nt<=m.end;Nt++){var Bt=d[Nt],Ft=n[Nt];if(1&Bt?Ft&(y|S|E)&&d[Nt]++:Ft&O?d[Nt]++:Ft&(E|S)&&(d[Nt]+=2),Ft&a&&(d[Nt]=0===Nt?m.level:d[Nt-1]),Nt===m.end||u(e[Nt])&(A|C))for(var Gt=Nt;Gt>=0&&u(e[Gt])&l;Gt--)d[Gt]=m.level}}return{levels:d,paragraphs:f};function Ut(t,r){for(var o=t;o<e.length;o++){var s=n[o];if(s&(O|M))return 1;if(s&(C|y)||r&&s===U)return 0;if(s&i){var a=Vt(o);o=-1===a?e.length:a}}return 0}function Vt(t){for(var r=1,o=t+1;o<e.length;o++){var s=n[o];if(s&C)break;if(s&U){if(0==--r)return o}else s&i&&r++}return-1}function Wt(e){return 1&d[e]?O:y}},e.getMirroredCharacter=H,e.getMirroredCharactersMap=function Y(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,s=n;s<=r;s++)if(1&t[s]){var a=H(e[s]);null!==a&&o.set(s,a)}return o},e.getReorderSegments=Q,e.getReorderedIndices=z,e.getReorderedString=function Z(e,t,n,r){var i=z(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?H(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function t(e,n){let r=ShaderChunk[n];return r?expandShaderIncludes(r):e}))}const _lut=[];for(let lt=0;lt<256;lt++)_lut[lt]=(lt<16?"0":"")+lt.toString(16);function generateUUID(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(_lut[255&e]+_lut[e>>8&255]+_lut[e>>16&255]+_lut[e>>24&255]+"-"+_lut[255&t]+_lut[t>>8&255]+"-"+_lut[t>>16&15|64]+_lut[t>>24&255]+"-"+_lut[63&n|128]+_lut[n>>8&255]+"-"+_lut[n>>16&255]+_lut[n>>24&255]+_lut[255&r]+_lut[r>>8&255]+_lut[r>>16&255]+_lut[r>>24&255]).toUpperCase()}const assign$1=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(e,t){const n=getKeyForOptions(t);let r=CONSTRUCTOR_CACHE.get(e);if(r||CONSTRUCTOR_CACHE.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(r){e.onBeforeCompile.call(this,r);const o=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=SHADER_UPGRADE_CACHE[o];if(!s){const e=upgradeShaders(r,t,n);s=SHADER_UPGRADE_CACHE[o]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,assign$1(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-epoch}}),this[i]&&this[i](r)},s=function n(){return a(t.chained?e:e.clone())},a=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:materialInstanceId++}),i.uuid=generateUUID(),i.uniforms=assign$1({},r.uniforms,t.uniforms),i.defines=assign$1({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=assign$1({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(assign$1(this.extensions,t.extensions),assign$1(this.defines,t.defines),assign$1(this.uniforms,UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return a(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=createDerivedMaterial(e.isDerivedMaterial?e.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=createDerivedMaterial(e.isDerivedMaterial?e.getDistanceMaterial():new MeshDistanceMaterial,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=s,new s}function upgradeShaders({vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:s,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=n;if(i=i||"",o=o||"",s=s||"",l=l||"",c=c||"",u=u||"",(a||d)&&(e=expandShaderIncludes(e)),(h||d)&&(t=expandShaderIncludes(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),d){let n=d({vertexShader:e,fragmentShader:t});e=n.vertexShader,t=n.fragmentShader}if(h){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${h}\n${e.join("\n")}\n${u}`}if(p){const e=`\nuniform float ${p};\n`;i=e+i,l=e+l}return a&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${a}\n}\n`,o=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${o}\n`,e=(e=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`))),{vertexShader:e=injectIntoShaderCode(e,r,i,o,s),fragmentShader:t=injectIntoShaderCode(t,r,l,c,u)}}function injectIntoShaderCode(e,t,n,r,i){return(r||i||n)&&(e=e.replace(voidMainRegExp,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function optionsJsonReplacer(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(e){const t=JSON.stringify(e,optionsJsonReplacer);let n=optionsHashesToIds.get(t);return null==n&&optionsHashesToIds.set(t,n=++_idCtr),n}function createTypesetter(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(t,n){t||(t=r);let o=i[t];o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},function s(t,n){!function i(){const o=e=>{console.error(`Failure loading font ${t}${t===r?"":"; trying fallback"}`,e),t!==r&&(t=r,i())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(e2){o(e2)}},r.onerror=o,r.send()}catch(s){o(s)}}()}(t,(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})))}function u({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:u=1,letterSpacing:m=0,lineHeight:g="normal",maxWidth:_=o,direction:b,textAlign:v="left",textIndent:y=0,whiteSpace:O="normal",overflowWrap:S="normal",anchorX:T=0,anchorY:x=0,includeCaretPositions:E=!1,chunkedBoundsSize:w=8192,colorRanges:C=null},A,k=!1){const R=p(),I={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,m=+m,_=+_,g=g||"normal",y=+y,c(n,(n=>{const r=isFinite(_);let i=null,c=null,M=null,$=null,P=null,L=null,D=null,N=0,B=0,F="nowrap"!==O;const{ascender:G,descender:U,unitsPerEm:V,lineGap:W,capHeight:H,xHeight:Q}=n;I.fontLoad=p()-R;const z=p(),j=u/V;"normal"===g&&(g=(G-U+W)/V);const X=((g*=u)-(G-U)*j)/2,Y=-(G*j+X),Z=Math.min(g,(G-U)*j),q=(G+U)/2*j-Z/2;let K=y,J=new f;const ee=[J];n.forEachGlyph(e,u,m,((t,n,i)=>{const o=e.charAt(i),c=t.advanceWidth*j,h=J.count;let d;if("isEmpty"in t||(t.isWhitespace=!!o&&new RegExp(a).test(o),t.canBreakAfter=!!o&&l.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||s.test(o)),t.isWhitespace||t.isEmpty||B++,F&&r&&!t.isWhitespace&&n+c+K>_&&h){if(J.glyphAt(h-1).glyphObj.canBreakAfter)d=new f,K=-n;else for(let e=h;e--;){if(0===e&&"break-word"===S){d=new f,K=-n;break}if(J.glyphAt(e).glyphObj.canBreakAfter){d=J.splitAt(e+1);const t=d.glyphAt(0).x;K-=t;for(let e=d.count;e--;)d.glyphAt(e).x-=t;break}}d&&(J.isSoftWrapped=!0,J=d,ee.push(J),N=_)}let p=J.glyphAt(J.count);p.glyphObj=t,p.x=n+K,p.width=c,p.charIndex=i,"\n"===o&&(J=new f,ee.push(J),K=-(n+c+m*u)+y)})),ee.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>N&&(N=e.width))}}));let te=0,ne=0;if(T&&("number"==typeof T?te=-T:"string"==typeof T&&(te=-N*("left"===T?0:"center"===T?.5:"right"===T?1:h(T)))),x)if("number"==typeof x)ne=-x;else if("string"==typeof x){let e=ee.length*g;ne="top"===x?0:"top-baseline"===x?-Y:"top-cap"===x?-Y-H*j:"top-ex"===x?-Y-Q*j:"middle"===x?e/2:"bottom"===x?e:"bottom-baseline"===x?e-X+U*j:h(x)*e}if(!k){const r=t.getEmbeddingLevels(e,b);i=new Uint16Array(B),c=new Float32Array(2*B),M={},L=[o,o,-o,-o],D=[];let s=Y;E&&(P=new Float32Array(3*e.length)),C&&($=new Uint8Array(3*B));let a,l,u=0,h=-1,p=-1;if(ee.forEach(((f,m)=>{let{count:_,width:b}=f;if(_>0){let m=0;for(let e=_;e--&&f.glyphAt(e).glyphObj.isWhitespace;)m++;let g=0,y=0;if("center"===v)g=(N-b)/2;else if("right"===v)g=N-b;else if("justify"===v&&f.isSoftWrapped){let e=0;for(let t=_-m;t--;)f.glyphAt(t).glyphObj.isWhitespace&&e++;y=(N-b)/e}if(y||g){let e=0;for(let t=0;t<_;t++){let n=f.glyphAt(t);const r=n.glyphObj;n.x+=g+e,0!==y&&r.isWhitespace&&t<_-m&&(e+=y,n.width+=y)}}const O=t.getReorderSegments(e,r,f.glyphAt(0).charIndex,f.glyphAt(f.count-1).charIndex);for(let e=0;e<O.length;e++){const[t,n]=O[e];let r=1/0,i=-1/0;for(let e=0;e<_;e++)if(f.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<_;o++){let e=f.glyphAt(o);if(e.charIndex>n)break;o<_-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=f.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let S;const T=e=>S=e;for(let b=0;b<_;b++){let m=f.glyphAt(b);S=m.glyphObj;const g=S.index,_=1&r.levels[m.charIndex];if(_){const r=t.getMirroredCharacter(e[m.charIndex]);r&&n.forEachGlyph(r,0,0,T)}if(E){const{charIndex:e}=m,t=m.x+te,n=m.x+m.width+te;P[3*e]=_?n:t,P[3*e+1]=_?t:n,P[3*e+2]=s+q+ne;const r=e-h;r>1&&d(P,h,r),h=e}if(C){const{charIndex:e}=m;for(;e>p;)p++,C.hasOwnProperty(p)&&(l=C[p])}if(!S.isWhitespace&&!S.isEmpty){const e=u++;M[g]||(M[g]={path:S.path,pathBounds:[S.xMin,S.yMin,S.xMax,S.yMax]});const t=m.x+te,n=s+ne;c[2*e]=t,c[2*e+1]=n;const r=t+S.xMin*j,h=n+S.yMin*j,d=t+S.xMax*j,p=n+S.yMax*j;r<L[0]&&(L[0]=r),h<L[1]&&(L[1]=h),d>L[2]&&(L[2]=d),p>L[3]&&(L[3]=p),e%w==0&&(a={start:e,end:e,rect:[o,o,-o,-o]},D.push(a)),a.end++;const f=a.rect;if(r<f[0]&&(f[0]=r),h<f[1]&&(f[1]=h),d>f[2]&&(f[2]=d),p>f[3]&&(f[3]=p),i[e]=g,C){const t=3*e;$[t]=l>>16&255,$[t+1]=l>>8&255,$[t+2]=255&l}}}}s-=g})),P){const t=e.length-h;t>1&&d(P,h,t)}}I.typesetting=p()-z,A({glyphIds:i,glyphPositions:c,glyphData:M,caretPositions:P,caretHeight:Z,glyphColors:$,chunkedBounds:D,fontSize:u,unitsPerEm:V,ascender:G*j,descender:U*j,capHeight:H*j,xHeight:Q*j,lineHeight:g,topBaseline:Y,blockBounds:[te,ne-ee.length*g,te+N,ne],visibleBounds:L,timings:I})}))}function h(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function d(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],s=(i-r)/n;for(let a=0;a<n;a++){const n=3*(t+a);e[n]=r+s*a,e[n+1]=r+s*(a+1),e[n+2]=o}}function p(){return(self.performance||Date).now()}function f(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(e){let t=f.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new f;return t.data=this.data.splice(e*m.length),t}},f.flyweight=m.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*m.length+n]},set(e){this.data[this.index*m.length+n]=e}}),e)),{data:null,index:0}),{typeset:u,measure:function g(e,t){u(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:c}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned$1;function generateSDF(e,t,n,r,i,o,s,a,l,c,u=!0){return u?generateSDF_GL(e,t,n,r,i,o,s,a,l,c).then(null,(u=>(warned$1||(console.warn("WebGL SDF generation failed, falling back to JS",u),warned$1=!0),generateSDF_JS_Worker(e,t,n,r,i,o,s,a,l,c)))):generateSDF_JS_Worker(e,t,n,r,i,o,s,a,l,c)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const e=now();for(;queue.length&&now()-e<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(...e)=>new Promise(((t,n)=>{queue.push((()=>{const r=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...e),t({timing:now()-r})}catch(i){n(i)}})),timer||(timer=setTimeout(nextChunk,0))})),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(e,t,n,r,i,o,s,a,l,c){const u="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let h=threads[u];return h||(h=threads[u]={workerModule:defineWorkerModule({name:u,workerId:u,dependencies:[SDFGenerator,now],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,o).then((({textureData:n,timing:r})=>{const i=now(),o=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)o[4*e+c]=n[e];return mainThreadGenerator.webglUtils.renderImageData(s,o,a,l,e,t,1<<3-c),r+=now()-i,0==--h.requests&&(h.idleTimer=setTimeout((()=>{terminateWorker(u)}),idleTimeout)),{timing:r}}))}function warmUpSDFCanvas(e){e._warm||(mainThreadGenerator.webgl.isSupported(e),e._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;
/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var s=[],a=0;a<o;a++){var l=n.readUint(r,i);i+=4,s.push(t._readFont(r,l))}return s}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],a={_data:e,_offset:i},l={},c=0;c<o;c++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<s.length;c++){var p=s[c];l[p]&&(a[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,a))}return a},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),s=r+12,a=0;a<o;a++){var l=i.readASCII(e,s,4);s+=4,i.readUint(e,s),s+=4;var c=i.readUint(e,s);if(s+=4,i.readUint(e,s),s+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var s=t._bin,a={},l=n;s.readFixed(e,n),n+=4;var c=s.readUshort(e,n);n+=2;var u=s.readUshort(e,n);n+=2;var h=s.readUshort(e,n);return n+=2,a.scriptList=t._lctf.readScriptList(e,l+c),a.featureList=t._lctf.readFeatureList(e,l+u),a.lookupList=t._lctf.readLookupList(e,l+h,o),a},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,s=[],a=i.readUshort(e,n);n+=2;for(var l=0;l<a;l++){var c=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+c,r);s.push(u)}return s},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,s={tabs:[]};s.ltype=i.readUshort(e,n),n+=2,s.flag=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;for(var l=s.ltype,c=0;c<a;c++){var u=i.readUshort(e,n);n+=2;var h=r(e,l,o+u,s);s.tabs.push(h)}return s},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var s=r.readUshort(e,n);n+=2;var a=r.readUshort(e,n);n+=2;for(var l=0;l<a;l++)i.push(s+l),i.push(s+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var c=r.readUshort(e,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],s=r.readUshort(e,n);n+=2;for(var a=0;a<s;a++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},s=r.readUshort(e,n);n+=2,s>0&&(o.featureParams=i+s);var a=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<a;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},s=r.readUshort(e,n);n+=2;for(var a=0;a<s;a++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+c)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},s=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+s);var a=r.readUshort(e,n);n+=2;for(var l=0;l<a;l++){var c=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var s=[],a=0;a<o.length-1;a++)s.push(i.readASCII(e,n+o[a],o[a+1]-o[a]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(a=0;a<l.length-1;a++)c.push(t.CFF.readDict(e,n+l[a],n+l[a+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(a=0;a<h.length-1;a++)d.push(i.readASCII(e,n+h[a],h[a+1]-h[a]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(a=0;a<h.length-1;a++)p.push(i.readBytes(e,n+h[a],h[a+1]-h[a]));u.CharStrings=p}if(u.ROS){n=u.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),u.FDArray=[],a=0;a<f.length-1;a++){var m=t.CFF.readDict(e,n+f[a],n+f[a+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=f[f.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var _=i.readUshort(e,n);for(n+=2,a=0;a<_+1;a++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var s,a=o.length;s=a<1240?107:a<33900?1131:32768,r.Bias=s,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var s=e[n];n++;for(var a=0;a<s;a++)i.push(e[n+a]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],s=e[n];if(n++,0==s)for(var a=0;a<r;a++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var c=0;for(1==s?(c=e[n],n++):(c=i.readUshort(e,n),n+=2),a=0;a<=c;a++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,s=e[n+=2];if(n++,1==s)for(var a=0;a<o;a++)r.push(e[n+a]);else if(2==s)for(a=0;a<o;a++)r.push(i.readUshort(e,n+2*a));else if(3==s)for(a=0;a<o;a++)r.push(16777215&i.readUint(e,n+3*a-1));else if(1!=o)throw"unsupported offset size: "+s+", count: "+o;return(n+=o*s)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],s=e[n+1];e[n+2],e[n+3],e[n+4];var a=1,l=null,c=null;o<=20&&(l=o,a=1),12==o&&(l=100*o+s,a=2),21<=o&&o<=27&&(l=o,a=1),28==o&&(c=i.readShort(e,n+1),a=3),29<=o&&o<=31&&(l=o,a=1),32<=o&&o<=246&&(c=o-139,a=1),247<=o&&o<=250&&(c=256*(o-247)+s+108,a=2),251<=o&&o<=254&&(c=256*-(o-251)-s-108,a=2),255==o&&(c=i.readInt(e,n+1)/65535,a=5),r.val=null!=c?c:"o"+l,r.size=a},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,s=[];n<i;){var a=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;a<=20&&(u=a,c=1),12==a&&(u=100*a+l,c=2),19!=a&&20!=a||(u=a,c=2),21<=a&&a<=27&&(u=a,c=1),28==a&&(h=o.readShort(e,n+1),c=3),29<=a&&a<=31&&(u=a,c=1),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,c=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,c=2),255==a&&(h=o.readInt(e,n+1)/65535,c=5),s.push(null!=h?h:"o"+u),n+=c}return s},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},s=[];n<r;){var a=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==a&&(h=i.readShort(e,n+1),c=3),29==a&&(h=i.readInt(e,n+1),c=5),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,c=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,c=2),255==a)throw h=i.readInt(e,n+1)/65535,c=5,"unknown number";if(30==a){var d=[];for(c=1;;){var p=e[n+c];c++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var g="",_=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],b=0;b<d.length;b++)g+=_[d[b]];h=parseFloat(g)}a<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],c=1,12==a&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==s.length?s[0]:s,s=[]):s.push(h),n+=c}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;var a=[];o.tables=[];for(var l=0;l<s;l++){var c=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+c+"e"+u,p=a.indexOf(h);if(-1==p){var f;p=o.tables.length,a.push(h);var m=i.readUshort(e,h);0==m?f=t.cmap.parse0(e,h):4==m?f=t.cmap.parse4(e,h):6==m?f=t.cmap.parse6(e,h):12==m?f=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),o.tables.push(f)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=p}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var s=0;s<o-6;s++)i.map.push(e[n+s]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2;var l=a/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+s;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var s=0;s<o;s++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var s=0;s<o;s++){var a=n+12*s,l=r.readUint(e,a+0),c=r.readUint(e,a+4),u=r.readUint(e,a+8);i.groups.push([l,c,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var s={};if(s.noc=r.readShort(i,o),o+=2,s.xMin=r.readShort(i,o),o+=2,s.yMin=r.readShort(i,o),o+=2,s.xMax=r.readShort(i,o),o+=2,s.yMax=r.readShort(i,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var a=0;a<s.noc;a++)s.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;s.instructions=r.readBytes(i,o,l),o+=l;var c=s.endPts[s.noc-1]+1;for(s.flags=[],a=0;a<c;a++){var u=i[o];if(o++,s.flags.push(u),0!=(8&u)){var h=i[o];o++;for(var d=0;d<h;d++)s.flags.push(u),a++}}for(s.xs=[],a=0;a<c;a++){var p=0!=(2&s.flags[a]),f=0!=(16&s.flags[a]);p?(s.xs.push(f?i[o]:-i[o]),o++):f?s.xs.push(0):(s.xs.push(r.readShort(i,o)),o+=2)}for(s.ys=[],a=0;a<c;a++)p=0!=(4&s.flags[a]),f=0!=(32&s.flags[a]),p?(s.ys.push(f?i[o]:-i[o]),o++):f?s.ys.push(0):(s.ys.push(r.readShort(i,o)),o+=2);var m=0,g=0;for(a=0;a<c;a++)m+=s.xs[a],g+=s.ys[a],s.xs[a]=m,s.ys[a]=g}else{var _;s.parts=[];do{_=r.readUshort(i,o),o+=2;var b={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(b),b.glyphIndex=r.readUshort(i,o),o+=2,1&_){var v=r.readShort(i,o);o+=2;var y=r.readShort(i,o);o+=2}else v=r.readInt8(i,o),o++,y=r.readInt8(i,o),o++;2&_?(b.m.tx=v,b.m.ty=y):(b.p1=v,b.p2=y),8&_?(b.m.a=b.m.d=r.readF2dot14(i,o),o+=2):64&_?(b.m.a=r.readF2dot14(i,o),o+=2,b.m.d=r.readF2dot14(i,o),o+=2):128&_&&(b.m.a=r.readF2dot14(i,o),o+=2,b.m.b=r.readF2dot14(i,o),o+=2,b.m.c=r.readF2dot14(i,o),o+=2,b.m.d=r.readF2dot14(i,o),o+=2)}while(32&_);if(256&_){var O=r.readUshort(i,o);for(o+=2,s.instr=[],a=0;a<O;a++)s.instr.push(i[o]),o++}}return s},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,s=r,a={};if(a.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&a.fmt<=2){var l=o.readUshort(e,r);r+=2,a.coverage=t._lctf.readCoverage(e,l+s)}if(1==n&&1==a.fmt){var c=o.readUshort(e,r);r+=2;var u=t._lctf.numOfOnes(c);0!=c&&(a.pos=t.GPOS.readValueRecord(e,r,c))}else if(2==n&&a.fmt>=1&&a.fmt<=2){c=o.readUshort(e,r),r+=2;var h=o.readUshort(e,r);r+=2,u=t._lctf.numOfOnes(c);var d=t._lctf.numOfOnes(h);if(1==a.fmt){a.pairsets=[];var p=o.readUshort(e,r);r+=2;for(var f=0;f<p;f++){var m=s+o.readUshort(e,r);r+=2;var g=o.readUshort(e,m);m+=2;for(var _=[],b=0;b<g;b++){var v=o.readUshort(e,m);m+=2,0!=c&&(E=t.GPOS.readValueRecord(e,m,c),m+=2*u),0!=h&&(w=t.GPOS.readValueRecord(e,m,h),m+=2*d),_.push({gid2:v,val1:E,val2:w})}a.pairsets.push(_)}}if(2==a.fmt){var y=o.readUshort(e,r);r+=2;var O=o.readUshort(e,r);r+=2;var S=o.readUshort(e,r);r+=2;var T=o.readUshort(e,r);for(r+=2,a.classDef1=t._lctf.readClassDef(e,s+y),a.classDef2=t._lctf.readClassDef(e,s+O),a.matrix=[],f=0;f<S;f++){var x=[];for(b=0;b<T;b++){var E=null,w=null;0!=c&&(E=t.GPOS.readValueRecord(e,r,c),r+=2*u),0!=h&&(w=t.GPOS.readValueRecord(e,r,h),r+=2*d),x.push({val1:E,val2:w})}a.matrix.push(x)}}}else{if(9==n&&1==a.fmt){var C=o.readUshort(e,r);r+=2;var A=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=C;else if(i.ltype!=C)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,s+A)}console.debug("unsupported GPOS table LookupType",n,"format",a.fmt)}return a},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,s=r,a={};if(a.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&a.fmt<=2||6==n&&a.fmt<=2){var l=o.readUshort(e,r);r+=2,a.coverage=t._lctf.readCoverage(e,s+l)}if(1==n&&a.fmt>=1&&a.fmt<=2){if(1==a.fmt)a.delta=o.readShort(e,r),r+=2;else if(2==a.fmt){var c=o.readUshort(e,r);r+=2,a.newg=o.readUshorts(e,r,c),r+=2*a.newg.length}}else if(4==n){a.vals=[],c=o.readUshort(e,r),r+=2;for(var u=0;u<c;u++){var h=o.readUshort(e,r);r+=2,a.vals.push(t.GSUB.readLigatureSet(e,s+h))}}else if(5==n&&2==a.fmt){if(2==a.fmt){var d=o.readUshort(e,r);r+=2,a.cDef=t._lctf.readClassDef(e,s+d),a.scset=[];var p=o.readUshort(e,r);for(r+=2,u=0;u<p;u++){var f=o.readUshort(e,r);r+=2,a.scset.push(0==f?null:t.GSUB.readSubClassSet(e,s+f))}}}else if(6==n&&3==a.fmt){if(3==a.fmt){for(u=0;u<3;u++){c=o.readUshort(e,r),r+=2;for(var m=[],g=0;g<c;g++)m.push(t._lctf.readCoverage(e,s+o.readUshort(e,r+2*g)));r+=2*c,0==u&&(a.backCvg=m),1==u&&(a.inptCvg=m),2==u&&(a.ahedCvg=m)}c=o.readUshort(e,r),r+=2,a.lookupRec=t.GSUB.readSubstLookupRecords(e,r,c)}}else{if(7==n&&1==a.fmt){var _=o.readUshort(e,r);r+=2;var b=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=_;else if(i.ltype!=_)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,s+b)}console.debug("unsupported GSUB table LookupType",n,"format",a.fmt)}return a},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],s=r(e,n);n+=2;for(var a=0;a<s;a++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),s=r(e,n+=2);n+=2,i.input=[];for(var a=0;a<o-1;a++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,s),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],s=0;s<r;s++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],s=r.readUshort(e,n);n+=2;for(var a=0;a<s;a++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],s=0;s<o.length;s++){var a=r.readUshort(e,n);n+=2,1==s&&a--,i[o[s]]=r.readUshorts(e,n,a),n+=2*i[o[s]].length}return a=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*a),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],s=r.readUshort(e,n);n+=2;for(var a=0;a<s;a++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var s=0;s<o-1;s++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,s={aWidth:[],lsBearing:[]},a=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(a=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),s.aWidth.push(a),s.lsBearing.push(l);return s},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,s=o.readUshort(e,n);if(n+=2,1==s)return t.kern.parseV1(e,n-2,r,i);var a=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<a;c++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var s=o.readUint(e,n);n+=4;for(var a={glyph1:[],rval:[]},l=0;l<s;l++){o.readUint(e,n),n+=4;var c=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,a)}return a},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,s=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var a=0;a<s;a++){var l=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,s=[],a=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==a)for(var c=0;c<l;c++)s.push(o.readUshort(e,n+(c<<1))<<1);if(1==a)for(c=0;c<l;c++)s.push(o.readUint(e,n+(c<<2)));return s},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},s=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==s&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var a,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<s;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var _,b=l[f],v=c+12*s+g;if(0==h)_=i.readUnicode(e,v,m/2);else if(3==h&&0==d)_=i.readUnicode(e,v,m/2);else if(0==d)_=i.readASCII(e,v,m);else if(1==d)_=i.readUnicode(e,v,m/2);else if(3==d)_=i.readUnicode(e,v,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;_=i.readASCII(e,v,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var y="p"+h+","+p.toString(16);null==o[y]&&(o[y]={}),o[y][void 0!==b?b:f]=_,o[y]._lang=p}for(var O in o)if(null!=o[O].postScriptName&&1033==o[O]._lang)return o[O];for(var O in o)if(null!=o[O].postScriptName&&0==o[O]._lang)return o[O];for(var O in o)if(null!=o[O].postScriptName&&3084==o[O]._lang)return o[O];for(var O in o)if(null!=o[O].postScriptName)return o[O];for(var O in o){a=O;break}return console.debug("returning name table with languageID "+o[a]._lang),o[a]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,s=0;s<i.endCount.length;s++)if(t<=i.endCount[s]){o=s;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(s=0;s<i.groups.length;s++){var a=i.groups[s];if(a[0]<=t&&t<=a[1])return a[2]+(t-a[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},s=e.CFF,a=e.CFF.Private;if(s.ROS){for(var l=0;s.FDSelect[l+2]<=n;)l+=2;a=s.FDArray[s.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,s,a,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],s=i;s<=o;s++){var a=s==i?o:s-1,l=s==o?i:s+1,c=1&e.flags[s],u=1&e.flags[a],h=1&e.flags[l],d=e.xs[s],p=e.ys[s];if(s==i)if(c){if(!u){t.U.P.moveTo(n,d,p);continue}t.U.P.moveTo(n,e.xs[a],e.ys[a])}else u?t.U.P.moveTo(n,e.xs[a],e.ys[a]):t.U.P.moveTo(n,(e.xs[a]+d)/2,(e.ys[a]+p)/2);c?u&&t.U.P.lineTo(n,d,p):h?t.U.P.qcurveTo(n,d,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,p,(d+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},s=e.parts[i];t.U._drawGlyf(s.glyphIndex,n,o);for(var a=s.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];r.crds.push(c*a.a+u*a.b+a.tx),r.crds.push(c*a.c+u*a.d+a.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=!1;if(e.GPOS)for(var o=e.GPOS,s=o.lookupList,a=o.featureList,l=[],c=0;c<a.length;c++){var u=a[c];if("kern"==u.tag){i=!0;for(var h=0;h<u.tab.length;h++)if(!l[u.tab[h]]){l[u.tab[h]]=!0;for(var d=s[u.tab[h]],p=0;p<d.tabs.length;p++)if(null!=d.tabs[p]){var f,m=d.tabs[p];if(!m.coverage||-1!=(f=t._lctf.coverageIndex(m.coverage,n)))if(1==d.ltype);else if(2==d.ltype){var g=null;if(1==m.fmt){var _=m.pairsets[f];for(c=0;c<_.length;c++)_[c].gid2==r&&(g=_[c])}else if(2==m.fmt){var b=t.U._getGlyphClass(n,m.classDef1),v=t.U._getGlyphClass(r,m.classDef2);g=m.matrix[b][v]}if(g){var y=0;return g.val1&&g.val1[2]&&(y+=g.val1[2]),g.val2&&g.val2[0]&&(y+=g.val2[0]),y}}}}}}if(e.kern&&!i){var O=e.kern.glyph1.indexOf(n);if(-1!=O){var S=e.kern.rval[O].glyph2.indexOf(r);if(-1!=S)return e.kern.rval[O].vals[S]}}return 0},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,s=0;s<r.tabs.length;s++)if(null!=r.tabs[s]){var a,l=r.tabs[s];if(!l.coverage||-1!=(a=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[a];else if(4==r.ltype)for(var c=l.vals[a],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==e[n+f+(1+m)];)f++;h.chain[m]!=e[n+f+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<d+f;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),_=l.cDef[g+2],b=l.scset[_],v=0;v<b.length;v++){var y=b[v],O=y.input;if(!(O.length>o)){for(p=!0,m=0;m<O.length;m++){var S=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[S+2]!=O[m]){p=!1;break}}if(p){var T=y.substLookupRecords;for(u=0;u<T.length;u+=2)T[u],T[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var x=l.lookupRec;for(v=0;v<x.length;v+=2){g=x[v];var E=i[x[v+1]];t.U._applySubs(e,n+g,E,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,s=0;s<n.length;s++){var a=n[s];if(-1!=a){for(var l=s<n.length-1&&-1!=n[s+1]?n[s+1]:0,c=t.U.glyphToPath(e,a),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+o),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[a],s<n.length-1&&(o+=t.U.getPairAdjustment(e,a,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,s){e.cmds.push("C"),e.crds.push(t,n,r,i,o,s)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var s=n.stack,a=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,p=n.y,f=0,m=0,g=0,_=0,b=0,v=0,y=0,O=0,S=0,T=0,x={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,x);var E=x.val;if(h+=x.size,"o1"==E||"o18"==E)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o3"==E||"o23"==E)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o4"==E)s.length>1&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),u&&t.U.P.closePath(o),p+=s.pop(),t.U.P.moveTo(o,d,p),u=!0;else if("o5"==E)for(;s.length>0;)d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p);else if("o6"==E||"o7"==E)for(var w=s.length,C="o6"==E,A=0;A<w;A++){var k=s.shift();C?d+=k:p+=k,C=!C,t.U.P.lineTo(o,d,p)}else if("o8"==E||"o24"==E){w=s.length;for(var R=0;R+6<=w;)f=d+s.shift(),m=p+s.shift(),g=f+s.shift(),_=m+s.shift(),d=g+s.shift(),p=_+s.shift(),t.U.P.curveTo(o,f,m,g,_,d,p),R+=6;"o24"==E&&(d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(m=p,g=(f=d+s.shift())+s.shift(),T=_=m+s.shift(),v=_,O=p,d=(y=(b=(S=g+s.shift())+s.shift())+s.shift())+s.shift(),t.U.P.curveTo(o,f,m,g,_,S,T),t.U.P.curveTo(o,b,v,y,O,d,p)),"o1235"==E&&(f=d+s.shift(),m=p+s.shift(),g=f+s.shift(),_=m+s.shift(),S=g+s.shift(),T=_+s.shift(),b=S+s.shift(),v=T+s.shift(),y=b+s.shift(),O=v+s.shift(),d=y+s.shift(),p=O+s.shift(),s.shift(),t.U.P.curveTo(o,f,m,g,_,S,T),t.U.P.curveTo(o,b,v,y,O,d,p)),"o1236"==E&&(f=d+s.shift(),m=p+s.shift(),g=f+s.shift(),T=_=m+s.shift(),v=_,y=(b=(S=g+s.shift())+s.shift())+s.shift(),O=v+s.shift(),d=y+s.shift(),t.U.P.curveTo(o,f,m,g,_,S,T),t.U.P.curveTo(o,b,v,y,O,d,p)),"o1237"==E&&(f=d+s.shift(),m=p+s.shift(),g=f+s.shift(),_=m+s.shift(),S=g+s.shift(),T=_+s.shift(),b=S+s.shift(),v=T+s.shift(),y=b+s.shift(),O=v+s.shift(),Math.abs(y-d)>Math.abs(O-p)?d=y+s.shift():p=O+s.shift(),t.U.P.curveTo(o,f,m,g,_,S,T),t.U.P.curveTo(o,b,v,y,O,d,p));else if("o14"==E){if(s.length>0&&!l&&(c=s.shift()+r.nominalWidthX,l=!0),4==s.length){var I=s.shift(),M=s.shift(),$=s.shift(),P=s.shift(),L=t.CFF.glyphBySE(r,$),D=t.CFF.glyphBySE(r,P);t.U._drawCFF(r.CharStrings[L],n,r,i,o),n.x=I,n.y=M,t.U._drawCFF(r.CharStrings[D],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==E||"o20"==E)s.length%2!=0&&!l&&(c=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0,h+=a+7>>3;else if("o21"==E)s.length>2&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),p+=s.pop(),d+=s.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o22"==E)s.length>1&&!l&&(c=s.shift()+i.nominalWidthX,l=!0),d+=s.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o25"==E){for(;s.length>6;)d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p);f=d+s.shift(),m=p+s.shift(),g=f+s.shift(),_=m+s.shift(),d=g+s.shift(),p=_+s.shift(),t.U.P.curveTo(o,f,m,g,_,d,p)}else if("o26"==E)for(s.length%2&&(d+=s.shift());s.length>0;)f=d,m=p+s.shift(),d=g=f+s.shift(),p=(_=m+s.shift())+s.shift(),t.U.P.curveTo(o,f,m,g,_,d,p);else if("o27"==E)for(s.length%2&&(p+=s.shift());s.length>0;)m=p,g=(f=d+s.shift())+s.shift(),_=m+s.shift(),d=g+s.shift(),p=_,t.U.P.curveTo(o,f,m,g,_,d,p);else if("o10"==E||"o29"==E){var N="o10"==E?i:r;if(0==s.length)console.debug("error: empty stack");else{var B=s.pop(),F=N.Subrs[B+N.Bias];n.x=d,n.y=p,n.nStems=a,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(F,n,r,i,o),d=n.x,p=n.y,a=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==E||"o31"==E){var G=s.length,U=(R=0,"o31"==E);for(R+=G-(w=-3&G);R<w;)U?(m=p,g=(f=d+s.shift())+s.shift(),p=(_=m+s.shift())+s.shift(),w-R==5?(d=g+s.shift(),R++):d=g,U=!1):(f=d,m=p+s.shift(),g=f+s.shift(),_=m+s.shift(),d=g+s.shift(),w-R==5?(p=_+s.shift(),R++):p=_,U=!0),t.U.P.curveTo(o,f,m,g,_,d,p),R+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;s.push(E)}}}n.x=d,n.y=p,n.nStems=a,n.haveWidth=l,n.width=c,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr
/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/}function woff2otfFactory(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var s=new r(i[30]);for(o=1;o<30;++o)for(var a=i[o];a<i[o+1];++a)s[a]=a-i[o]<<5|o;return[i,s]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=a(o,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,s=new n(t);o<i;++o)++s[e[o]-1];var a,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+s[o-1]<<1;if(r){a=new n(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],p=l[e[o]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)a[d[p]>>>c]=u}else for(a=new n(i),o=0;o<i;++o)e[o]&&(a[o]=d[l[e[o]-1]++]>>>15-e[o]);return a},g=new t(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var _=new t(32);for(p=0;p<32;++p)_[p]=5;var b=m(g,9,1),v=m(_,5,1),y=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},O=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},S=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],x=function(e,t,n){var r=new Error(t||T[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,x),!n)throw r;return r},E=new t(0),w="undefined"!=typeof TextDecoder&&new TextDecoder;try{w.decode(E,{stream:!0})}catch(C){}return e.convert_streams=function(e){var a=new DataView(e),l=0;function u(){var e=a.getUint16(l);return l+=2,e}function d(){var e=a.getUint32(l);return l+=4,e}function p(e){M.setUint16($,e),$+=2}function f(e){M.setUint32($,e),$+=4}for(var g={signature:d(),flavor:d(),length:d(),numTables:u(),reserved:u(),totalSfntSize:d(),majorVersion:u(),minorVersion:u(),metaOffset:d(),metaLength:d(),metaOrigLength:d(),privOffset:d(),privLength:d()},_=0;Math.pow(2,_)<=g.numTables;)_++;_--;for(var T=16*Math.pow(2,_),E=16*g.numTables-T,w=12,C=[],A=0;A<g.numTables;A++)C.push({tag:d(),offset:d(),compLength:d(),origLength:d(),origChecksum:d()}),w+=16;var k,R=new Uint8Array(12+16*C.length+C.reduce((function(e,t){return e+t.origLength+4}),0)),I=R.buffer,M=new DataView(I),$=0;return f(g.flavor),p(g.numTables),p(T),p(_),p(E),C.forEach((function(e){f(e.tag),f(e.origChecksum),f(w),f(e.origLength),e.outOffset=w,(w+=e.origLength)%4!=0&&(w+=4-w%4)})),C.forEach((function(a){var l=e.slice(a.offset,a.offset+a.compLength);if(a.compLength!=a.origLength){var u=new Uint8Array(a.origLength);(function(e,a,l){var u=e.length;if(!u||l&&!l.l&&u<5)return a||new t(0);var d=!a||l,p=!l||l.i;l||(l={}),a||(a=new t(3*u));var f,g=function(e){var n=a.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(a),a=r}},_=l.f||0,T=l.p||0,E=l.b||0,w=l.l,C=l.d,A=l.m,k=l.n,R=8*u;do{if(!w){l.f=_=O(e,T,1);var I=O(e,T+1,3);if(T+=3,!I){var M=e[(W=((f=T)/8|0)+(7&f&&1)+4)-4]|e[W-3]<<8,$=W+M;if($>u){p&&x(0);break}d&&g(E+M),a.set(e.subarray(W,$),E),l.b=E+=M,l.p=T=8*$;continue}if(1==I)w=b,C=v,A=9,k=5;else if(2==I){var P=O(e,T,31)+257,L=O(e,T+10,15)+4,D=P+O(e,T+5,31)+1;T+=14;for(var N=new t(D),B=new t(19),F=0;F<L;++F)B[s[F]]=O(e,T+3*F,7);T+=3*L;var G=y(B),U=(1<<G)-1,V=m(B,G,1);for(F=0;F<D;){var W,H=V[O(e,T,U)];if(T+=15&H,(W=H>>>4)<16)N[F++]=W;else{var Q=0,z=0;for(16==W?(z=3+O(e,T,3),T+=2,Q=N[F-1]):17==W?(z=3+O(e,T,7),T+=3):18==W&&(z=11+O(e,T,127),T+=7);z--;)N[F++]=Q}}var j=N.subarray(0,P),X=N.subarray(P);A=y(j),k=y(X),w=m(j,A,1),C=m(X,k,1)}else x(1);if(T>R){p&&x(0);break}}d&&g(E+131072);for(var Y=(1<<A)-1,Z=(1<<k)-1,q=T;;q=T){var K=(Q=w[S(e,T)&Y])>>>4;if((T+=15&Q)>R){p&&x(0);break}if(Q||x(2),K<256)a[E++]=K;else{if(256==K){q=T,w=null;break}var J=K-254;if(K>264){var ee=i[F=K-257];J=O(e,T,(1<<ee)-1)+c[F],T+=ee}var te=C[S(e,T)&Z],ne=te>>>4;if(te||x(3),T+=15&te,X=h[ne],ne>3&&(ee=o[ne],X+=S(e,T)&(1<<ee)-1,T+=ee),T>R){p&&x(0);break}d&&g(E+131072);for(var re=E+J;E<re;E+=4)a[E]=a[E-X],a[E+1]=a[E+1-X],a[E+2]=a[E+2-X],a[E+3]=a[E+3-X];E=re}}l.l=w,l.p=q,l.b=E,w&&(_=1,l.m=A,l.d=C,l.n=k)}while(!_);E==a.length||function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var s=new(e instanceof n?n:e instanceof r?r:t)(o-i);s.set(e.subarray(i,o))}(a,0,E)})(new Uint8Array(l,2),u)}else u=new Uint8Array(l);R.set(u,a.outOffset);var d=0;(w=a.outOffset+a.origLength)%4!=0&&(d=4-w%4),R.set(new Uint8Array(d).buffer,a.outOffset+a.origLength),k=w+d})),I.slice(0,k)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams}function parserFactory(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,s=4,a=8,l=16,c=32;let u;function h(e){if(!u){const e={R:o,L:i,D:s,C:l,U:c,T:a};u=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[i,o]=r.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,u.set(n+=i,e[t]);for(let s=o;s--;)u.set(++n,e[t])}))}}return u.get(e)||c}const d=1,p=2,f=3,m=4,g=[null,"isol","init","fina","medi"];function _(e){const t=new Uint8Array(e.length);let n=c,r=d,u=-1;for(let g=0;g<e.length;g++){const _=e.codePointAt(g);let b=0|h(_),v=d;b&a||(n&(i|s|l)?b&(o|s|l)?(v=f,r!==d&&r!==f||t[u]++):b&(i|c)&&(r!==p&&r!==m||t[u]--):n&(o|c)&&(r!==p&&r!==m||t[u]--),r=t[g]=v,n=b,u=g,_>65535&&g++)}return t}function b(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}function v(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,s=t.head.unitsPerEm,a=b(i&&i.sTypoAscender,o&&o.ascender,s),l={unitsPerEm:s,ascender:a,descender:b(i&&i.sTypoDescender,o&&o.descender,0),capHeight:b(i&&i.sCapHeight,a),xHeight:b(i&&i.sxHeight,a),lineGap:b(i&&i.sTypoLineGap,o&&o.lineGap),forEachGlyph(i,o,s,a){let c=0;const u=1/l.unitsPerEm*o,h=function d(t,n){const r=[];for(let o=0;o<n.length;o++){const i=n.codePointAt(o);i>65535&&o++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let s;const a=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,l=[];o.forEach((i=>{if(a.test(i.tag))for(let o=0;o<i.tab.length;o++){if(l[i.tab[o]])continue;l[i.tab[o]]=!0;const a=t[i.tab[o]],c=/^(isol|init|fina|medi)$/.test(i.tag);c&&!s&&(s=_(n));for(let n=0;n<r.length;n++)s&&c&&g[s[n]]!==i.tag||e.U._applySubs(r,n,a,t)}}))}return r}(t,i);let p=0,f=-1;return h.forEach(((l,h)=>{if(-1!==l){let i=r[l];if(!i){const{cmds:o,crds:s}=e.U.glyphToPath(t,l);let a,c,u,h,d="",p=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];d+=o[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+s[p++]}if(s.length){a=c=1/0,u=h=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<a&&(a=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else a=u=c=h=0;i=r[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:a,yMin:c,xMax:u,yMax:h,path:d,pathCommandCount:o.length}}-1!==f&&(c+=e.U.getPairAdjustment(t,f,l)*u),a.call(null,i,c,p),i.advanceWidth&&(c+=i.advanceWidth*u),s&&(c+=s*o),f=l}p+=i.codePointAt(p)>65535?2:1})),c}};return l}return function n(r){const i=new Uint8Array(r,0,4),o=e._bin.readASCII(i,0,4);if("wOFF"===o)r=t(r);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return v(e.parse(r)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init:(e,t,n)=>n(e(),t())}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(e,t){e=assign({},e);const n=now$1();if(e.font=toAbsoluteURL(e.font||CONFIG.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||CONFIG.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=tempColor.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:r,sdfExponent:i}=CONFIG,{sdfGlyphSize:o}=e,s=r/o*4;let a=atlases[o];if(!a){const e=document.createElement("canvas");e.width=r,e.height=256*o/s,a=atlases[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:e,sdfTexture:new Texture(e,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,initContextLossHandling(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(e.font);u||a.glyphsByFont.set(e.font,u=new Map),typesetInWorker(e).then((h=>{const{glyphIds:d,glyphPositions:p,fontSize:f,unitsPerEm:m,timings:g}=h,_=[],b=new Float32Array(4*d.length),v=f/m;let y=0,O=0;const S=now$1();d.forEach(((e,t)=>{let n=u.get(e);if(!n){const{path:t,pathBounds:r}=h.glyphData[e],i=Math.max(r[2]-r[0],r[3]-r[1])/o*(CONFIG.sdfMargin*o+.5),s=a.glyphCount++,l=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];u.set(e,n={path:t,atlasIndex:s,sdfViewBox:l}),_.push(n)}const{sdfViewBox:r}=n,i=p[O++],s=p[O++];b[y++]=i+r[0]*v,b[y++]=s+r[1]*v,b[y++]=i+r[2]*v,b[y++]=s+r[3]*v,d[t]=n.atlasIndex})),g.quads=(g.quads||0)+(now$1()-S);const T=now$1();g.sdf={};const x=c.height,E=Math.ceil(a.glyphCount/s),w=Math.pow(2,Math.ceil(Math.log2(E*o)));w>x&&(console.info(`Increasing SDF texture size ${x}->${w}`),resizeWebGLCanvasWithoutClearing(c,r,w),l.dispose()),Promise.all(_.map((t=>generateGlyphSDF(t,a,e.gpuAccelerateSDF).then((({timing:e})=>{g.sdf[t.atlasIndex]=e}))))).then((()=>{_.length&&!a.contextLost&&(safariPre15Workaround(a),l.needsUpdate=!0),g.sdfTotal=now$1()-T,g.total=now$1()-n,t(Object.freeze({parameters:e,sdfTexture:l,sdfGlyphSize:o,sdfExponent:i,glyphBounds:b,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))}))})),Promise.resolve().then((()=>{a.contextLost||warmUpSDFCanvas(c)}))}function generateGlyphSDF({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},s){if(o)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=CONFIG,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(t/4);return generateSDF(r,r,e,n,c,l,i,u%(a/r)*r,Math.floor(u/(a/r))*r,t%4,s)}function initContextLossHandling(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(generateGlyphSDF(t,e,!0))}))})),Promise.all(n).then((()=>{safariPre15Workaround(e),e.sdfTexture.needsUpdate=!0}))}))}function preloadFont({font:e,characters:t,sdfGlyphSize:n},r){getTextRenderInfo({font:e,sdfGlyphSize:n,text:Array.isArray(t)?t.join("\n"):""+t},r)}function assign(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let linkEl;function toAbsoluteURL(e){return linkEl||(linkEl="undefined"==typeof document?{}:document.createElement("a")),linkEl.href=e,linkEl.href}function safariPre15Workaround(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let s=n.image.data;s&&s.length===r*i*4||(s=new Uint8Array(r*i*4),n.image={width:r,height:i,data:s},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,s)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}}),templateGeometries={};function getTemplateGeometry(e){let t=templateGeometries[e];if(!t){const n=new PlaneGeometry(1,1,e,e),r=n.clone(),i=n.attributes,o=r.attributes,s=new BufferGeometry,a=i.uv.count;for(let e=0;e<a;e++)o.position.array[3*e]*=-1,o.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{s.setAttribute(e,new Float32BufferAttribute([...i[e].array,...o[e].array],i[e].itemSize))})),s.setIndex([...n.index.array,...r.index.array.map((e=>e+a))]),s.translate(.5,.5,0),t=templateGeometries[e]=s}return t}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere$1,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===BackSide?t/2:0,e===DoubleSide?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=getTemplateGeometry(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){updateBufferAttr(this,glyphBoundsAttrName,e,4),updateBufferAttr(this,glyphIndexAttrName,t,1),updateBufferAttr(this,glyphColorAttrName,i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:s,sin:a,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=i((d+c)/u)!==i((p+c)/u)?-h:o(a(d)*h,a(p)*h),m=i((d-c)/u)!==i((p-c)/u)?h:s(a(d)*h,a(p)*h),g=i((d+r)/u)!==i((p+r)/u)?2*h:s(h-l(d)*h,h-l(p)*h);n.min.set(f,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(glyphIndexAttrName).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function updateBufferAttr(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new InstancedBufferAttribute(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}const VERTEX_DEFS="\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",VERTEX_TRANSFORM="\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",FRAGMENT_DEFS="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",FRAGMENT_TRANSFORM="\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n";function createTextDerivedMaterial(e){const t=createDerivedMaterial(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(voidMainRegExp,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(e){return Array.isArray(e)?e[0]:e}let getFlatRaycastMesh=()=>{const e=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>e,e},getCurvedRaycastMesh=()=>{const e=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>e,e};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$2=class extends Mesh{constructor(){super(new GlyphsGeometry,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(syncCompleteEvent),e&&e()}))))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=FrontSide}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=createTextDerivedMaterial(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let o,s,a,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(r)||0),o=i,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(a=this.strokeColor,n.uTroikaStrokeColor.value.set(null==a?defaultStrokeColor:a),s=this.strokeOpacity,null==s&&(s=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=s,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)n.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new Color;i===t._input&&"object"!=typeof i||t.set(t._input=i)}let o=this.orientation||defaultOrient;if(o!==e._orientation){let t=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let r=o!==defaultOrient&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;tempVec3a.set(0,0,0)[n]="-"===e?1:-1,tempVec3b.set(0,0,0)[o]="-"===i?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),t.setFromMatrix4(tempMat4)}else t.identity();e._orientation=o}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Vector2){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new Vector2){return tempVec3a.copy(e),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?getCurvedRaycastMesh():getFlatRaycastMesh(),s=o.geometry,{position:a,uv:l}=s.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),a.setXYZ(e,t,n,o)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,tempArray.length=0,o.raycast(e,tempArray);for(let e=0;e<tempArray.length;e++)tempArray[e].object=this,t.push(tempArray[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,COPYABLE_PROPS.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}};SYNCABLE_PROPS.forEach((e=>{const t="_private_"+e;Object.defineProperty(Text$2.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));const Text$1=reactExports.forwardRef((({anchorX:e="center",anchorY:t="middle",font:n,fontSize:r=1,children:i,characters:o,onSync:s,...a},l)=>{const c=useThree((({invalidate:e})=>e)),[u]=reactExports.useState((()=>new Text$2)),[h,d]=reactExports.useMemo((()=>{const e=[];let t="";return reactExports.Children.forEach(i,(n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)})),[e,t]}),[i]);return suspend((()=>new Promise((e=>preloadFont({font:n,characters:o},e)))),["troika-text",n,o]),reactExports.useLayoutEffect((()=>{u.sync((()=>{c(),s&&s(u)}))})),reactExports.useEffect((()=>()=>u.dispose()),[u]),reactExports.createElement("primitive",_extends({object:u,ref:l,font:n,text:d,anchorX:e,anchorY:t,fontSize:r},a),h)}));function shaderMaterial(e,t,n,r){const i=class extends ShaderMaterial{constructor(i={}){const o=Object.entries(e);super({uniforms:o.reduce(((e,[t,n])=>({...e,...UniformsUtils.clone({[t]:{value:n}})})),{}),vertexShader:t,fragmentShader:n}),this.key="",o.forEach((([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t}))),Object.assign(this,i),r&&r(this)}};return i.key=MathUtils.generateUUID(),i}let dracoLoader=null;function extensions(e,t,n){return r=>{n&&n(r),e&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath("string"==typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(dracoLoader)),t&&r.setMeshoptDecoder("function"==typeof MeshoptDecoder?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(e,t=!0,n=!0,r){return useLoader(GLTFLoader,e,extensions(t,n,r))}function useFBO(e,t,n){const{gl:r,size:i,viewport:o}=useThree(),s="number"==typeof e?e:i.width*o.dpr,a="number"==typeof t?t:i.height*o.dpr,l=("number"==typeof e?n:e)||{},{samples:c=0,depth:u,...h}=l,d=reactExports.useMemo((()=>{let e;return e=new WebGLRenderTarget(s,a,{minFilter:LinearFilter,magFilter:LinearFilter,encoding:r.outputEncoding,type:HalfFloatType,...h}),u&&(e.depthTexture=new DepthTexture(s,a,FloatType)),e.samples=c,e}),[]);return reactExports.useLayoutEffect((()=>{d.setSize(s,a),c&&(d.samples=c)}),[c,d,s,a]),reactExports.useEffect((()=>()=>d.dispose()),[]),d}useGLTF.preload=(e,t=!0,n=!0,r)=>useLoader.preload(GLTFLoader,e,extensions(t,n,r)),useGLTF.clear=e=>useLoader.clear(GLTFLoader,e);const isFunction=e=>"function"==typeof e,OrthographicCamera=reactExports.forwardRef((({envMap:e,resolution:t=256,frames:n=1/0,children:r,makeDefault:i,...o},s)=>{const a=useThree((({set:e})=>e)),l=useThree((({camera:e})=>e)),c=useThree((({size:e})=>e)),u=reactExports.useRef(null),h=reactExports.useRef(null),d=useFBO(t);reactExports.useLayoutEffect((()=>{o.manual||u.current.updateProjectionMatrix()}),[c,o]),reactExports.useLayoutEffect((()=>{u.current.updateProjectionMatrix()})),reactExports.useLayoutEffect((()=>{if(i){const e=l;return a((()=>({camera:u.current}))),()=>a((()=>({camera:e})))}}),[u,i,a]);let p=0,f=null;const m=isFunction(r);return useFrame((t=>{m&&(n===1/0||p<n)&&(h.current.visible=!1,t.gl.setRenderTarget(d),f=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,u.current),t.scene.background=f,t.gl.setRenderTarget(null),h.current.visible=!0,p++)})),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("orthographicCamera",_extends({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:mergeRefs([u,s])},o),!m&&r),reactExports.createElement("group",{ref:h},m&&r(d.texture)))})),OrbitControls=reactExports.forwardRef((({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:i=!0,onChange:o,onStart:s,onEnd:a,...l},c)=>{const u=useThree((e=>e.invalidate)),h=useThree((e=>e.camera)),d=useThree((e=>e.gl)),p=useThree((e=>e.events)),f=useThree((e=>e.setEvents)),m=useThree((e=>e.set)),g=useThree((e=>e.get)),_=useThree((e=>e.performance)),b=t||h,v=r||p.connected||d.domElement,y=reactExports.useMemo((()=>new OrbitControls$1(b)),[b]);return useFrame((()=>{y.enabled&&y.update()}),-1),reactExports.useEffect((()=>(y.connect(v),()=>{y.dispose()})),[v,n,y,u]),reactExports.useEffect((()=>{const e=e=>{u(),n&&_.regress(),o&&o(e)},t=e=>{s&&s(e)},r=e=>{a&&a(e)};return y.addEventListener("change",e),y.addEventListener("start",t),y.addEventListener("end",r),()=>{y.removeEventListener("start",t),y.removeEventListener("end",r),y.removeEventListener("change",e)}}),[o,s,a,y,u,f]),reactExports.useEffect((()=>{if(e){const e=g().controls;return m({controls:y}),()=>m({controls:e})}}),[e,y]),reactExports.createElement("primitive",_extends({ref:c,object:y,enableDamping:i},l))}));function RenderHud({defaultScene:e,defaultCamera:t,renderPriority:n=1}){const{gl:r,scene:i,camera:o}=useThree();let s;return useFrame((()=>{s=r.autoClear,1===n&&(r.autoClear=!0,r.render(e,t)),r.autoClear=!1,r.clearDepth(),r.render(i,o),r.autoClear=s}),n),reactExports.createElement(reactExports.Fragment,null)}function Hud({children:e,renderPriority:t=1}){const{scene:n,camera:r}=useThree(),[i]=reactExports.useState((()=>new Scene));return reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,e,reactExports.createElement(RenderHud,{defaultScene:n,defaultCamera:r,renderPriority:t})),i,{events:{priority:t+1}}))}const Context=reactExports.createContext({}),useGizmoContext=()=>reactExports.useContext(Context),turnRate=2*Math.PI,dummy=new Object3D,matrix=new Matrix4,[q1,q2]=[new Quaternion,new Quaternion],target=new Vector3,targetPosition=new Vector3,isOrbitControls=e=>"minPolarAngle"in e,GizmoHelper=({alignment:e="bottom-right",margin:t=[80,80],renderPriority:n=1,onUpdate:r,onTarget:i,children:o})=>{const s=useThree((e=>e.size)),a=useThree((e=>e.camera)),l=useThree((e=>e.controls)),c=useThree((e=>e.invalidate)),u=reactExports.useRef(),h=reactExports.useRef(null),d=reactExports.useRef(!1),p=reactExports.useRef(0),f=reactExports.useRef(new Vector3(0,0,0)),m=reactExports.useRef(new Vector3(0,0,0));reactExports.useEffect((()=>{m.current.copy(a.up)}),[a]);const g=reactExports.useCallback((e=>{d.current=!0,(l||i)&&(f.current=(null==l?void 0:l.target)||(null==i?void 0:i())),p.current=a.position.distanceTo(target),q1.copy(a.quaternion),targetPosition.copy(e).multiplyScalar(p.current).add(target),dummy.lookAt(targetPosition),q2.copy(dummy.quaternion),c()}),[l,a,i,c]);useFrame(((e,t)=>{if(h.current&&u.current){var n;if(d.current)if(q1.angleTo(q2)<.01)d.current=!1,isOrbitControls(l)&&a.up.copy(m.current);else{const e=t*turnRate;q1.rotateTowards(q2,e),a.position.set(0,0,1).applyQuaternion(q1).multiplyScalar(p.current).add(f.current),a.up.set(0,1,0).applyQuaternion(q1).normalize(),a.quaternion.copy(q1),r?r():l&&l.update(),c()}matrix.copy(a.matrix).invert(),null==(n=u.current)||n.quaternion.setFromRotationMatrix(matrix)}}));const _=reactExports.useMemo((()=>({tweenCamera:g})),[g]),[b,v]=t,y=e.endsWith("-center")?0:e.endsWith("-left")?-s.width/2+b:s.width/2-b,O=e.startsWith("center-")?0:e.startsWith("top-")?s.height/2-v:-s.height/2+v;return reactExports.createElement(Hud,{renderPriority:n},reactExports.createElement(Context.Provider,{value:_},reactExports.createElement(OrthographicCamera,{makeDefault:!0,ref:h,position:[0,0,200]}),reactExports.createElement("group",{ref:u,position:[y,O,0]},o)))};function Axis({scale:e=[.8,.05,.05],color:t,rotation:n}){return reactExports.createElement("group",{rotation:n},reactExports.createElement("mesh",{position:[.4,0,0]},reactExports.createElement("boxGeometry",{args:e}),reactExports.createElement("meshBasicMaterial",{color:t,toneMapped:!1})))}function AxisHead({onClick:e,font:t,disabled:n,arcStyle:r,label:i,labelColor:o,axisHeadScale:s=1,...a}){const l=useThree((e=>e.gl)),c=reactExports.useMemo((()=>{const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");return n.beginPath(),n.arc(32,32,16,0,2*Math.PI),n.closePath(),n.fillStyle=r,n.fill(),i&&(n.font=t,n.textAlign="center",n.fillStyle=o,n.fillText(i,32,41)),new CanvasTexture(e)}),[r,i,o,t]),[u,h]=reactExports.useState(!1),d=(i?1:.75)*(u?1.2:1)*s;return reactExports.createElement("sprite",_extends({scale:d,onPointerOver:n?void 0:e=>{e.stopPropagation(),h(!0)},onPointerOut:n?void 0:e||(e=>{e.stopPropagation(),h(!1)})},a),reactExports.createElement("spriteMaterial",{map:c,"map-encoding":l.outputEncoding,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const GizmoViewport=({hideNegativeAxes:e,hideAxisHeads:t,disabled:n,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:o=1,axisScale:s,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[h,d,p]=i,{tweenCamera:f}=useGizmoContext(),m={font:r,disabled:n,labelColor:l,onClick:c,axisHeadScale:o,onPointerDown:n?void 0:e=>{f(e.object.position),e.stopPropagation()}};return reactExports.createElement("group",_extends({scale:40},u),reactExports.createElement(Axis,{color:h,rotation:[0,0,0],scale:s}),reactExports.createElement(Axis,{color:d,rotation:[0,0,Math.PI/2],scale:s}),reactExports.createElement(Axis,{color:p,rotation:[0,-Math.PI/2,0],scale:s}),!t&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:h,position:[1,0,0],label:a[0]},m)),reactExports.createElement(AxisHead,_extends({arcStyle:d,position:[0,1,0],label:a[1]},m)),reactExports.createElement(AxisHead,_extends({arcStyle:p,position:[0,0,1],label:a[2]},m)),!e&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:h,position:[-1,0,0]},m)),reactExports.createElement(AxisHead,_extends({arcStyle:d,position:[0,-1,0]},m)),reactExports.createElement(AxisHead,_extends({arcStyle:p,position:[0,0,-1]},m)))),reactExports.createElement("ambientLight",{intensity:.5}),reactExports.createElement("pointLight",{position:[10,10,10],intensity:.5}))},GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:0,followCamera:0},"varying vec3 worldPosition;\n   uniform float fadeDistance;\n   uniform float infiniteGrid;\n   uniform float followCamera;\n   void main() {\n     vec3 pos = position.xzy * (1. + fadeDistance * infiniteGrid);\n     pos.xz += (cameraPosition.xz * followCamera);\n     worldPosition = pos;\n     gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n   }","varying vec3 worldPosition;\n   uniform float cellSize;\n   uniform float sectionSize;\n   uniform vec3 cellColor;\n   uniform vec3 sectionColor;\n   uniform float fadeDistance;\n   uniform float fadeStrength;\n   uniform float cellThickness;\n   uniform float sectionThickness;\n   uniform float infiniteGrid;\n   float getGrid(float size, float thickness) {\n     vec2 r = worldPosition.xz / size;\n     vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n     float line = min(grid.x, grid.y) + 1. - thickness;\n     return 1.0 - min(line, 1.);\n   }\n   void main() {\n     float g1 = getGrid(cellSize, cellThickness);\n     float g2 = getGrid(sectionSize, sectionThickness);\n     float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);\n     vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));\n     gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));\n     gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);\n     if (gl_FragColor.a <= 0.0) discard;\n     #include <tonemapping_fragment>\n     #include <encodings_fragment>\n   }"),Grid=reactExports.forwardRef((({args:e,cellColor:t="#000000",sectionColor:n="#2080ff",cellSize:r=.5,sectionSize:i=1,followCamera:o=!1,infiniteGrid:s=!1,fadeDistance:a=100,fadeStrength:l=1,cellThickness:c=.5,sectionThickness:u=1,side:h=BackSide,...d},p)=>{extend$1({GridMaterial:GridMaterial});const f={cellSize:r,sectionSize:i,cellColor:t,sectionColor:n,cellThickness:c,sectionThickness:u},m={fadeDistance:a,fadeStrength:l,infiniteGrid:s,followCamera:o};return reactExports.createElement("mesh",_extends({ref:p,frustumCulled:!1},d),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:h},f,m)),reactExports.createElement("planeGeometry",{args:e}))}));function useAnimations(e,t){const n=reactExports.useRef(),[r]=reactExports.useState((()=>t?t instanceof Object3D?{current:t}:t:n)),[i]=reactExports.useState((()=>new AnimationMixer(void 0))),o=reactExports.useRef({}),[s]=reactExports.useState((()=>{const t={};return e.forEach((e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(r.current)return o.current[e.name]||(o.current[e.name]=i.clipAction(e,r.current))}}))),{ref:r,clips:e,actions:t,names:e.map((e=>e.name)),mixer:i}}));return useFrame(((e,t)=>i.update(t))),reactExports.useEffect((()=>{const e=r.current;return()=>{o.current={},Object.values(s.actions).forEach((t=>{e&&i.uncacheAction(t,e)}))}}),[e]),reactExports.useEffect((()=>()=>{i.stopAllAction()}),[i]),s}function create(e){const t=e+"Geometry";return reactExports.forwardRef((({args:e,children:n,...r},i)=>reactExports.createElement("mesh",_extends({ref:i},r),reactExports.createElement(t,{attach:"geometry",args:e}),n)))}const Box=create("box"),Sphere=create("sphere"),Plane=create("plane");function calcPosFromAngles(e,t,n=new Vector3){const r=Math.PI*(e-.5),i=2*Math.PI*(t-.5);return n.x=Math.cos(i),n.y=Math.sin(r),n.z=Math.sin(i),n}const Sky=reactExports.forwardRef((({inclination:e=.6,azimuth:t=.1,distance:n=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:o=.5,turbidity:s=10,sunPosition:a=calcPosFromAngles(e,t),...l},c)=>{const u=reactExports.useMemo((()=>(new Vector3).setScalar(n)),[n]),[h]=reactExports.useState((()=>new Sky$1));return reactExports.createElement("primitive",_extends({object:h,ref:c,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":o,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":s,scale:u},l))}));function Crazyflie({robotId:e,renderBoundingBox:t}){const n=useSimulator((e=>e.updateRobotBoundingBox)),r=useSimulator((e=>e.checkCollisions)),i=useRobartState((t=>t.robots[e])),o=useSimulator((t=>t.robots[e])),s=null==o?void 0:o.boundingBox,a=null==s?void 0:s.getSize(new Vector3),[l,c]=reactExports.useState(!1),{camera:u}=useThree(),h=reactExports.useRef(null),{nodes:d,materials:p,animations:f}=useGLTF("./crazyflie.glb"),{actions:m}=useAnimations(f,h),[g,_]=reactExports.useState(!0),[b,v]=reactExports.useState(!0);return reactExports.useEffect((()=>{Object.values(m).map((e=>null==e?void 0:e.play())),_(!1)}),[]),reactExports.useEffect((()=>{if(h.current){if(t){const t=new Box3;t.setFromObject(h.current),n(e,t)}v(!1)}else v(!1)}),[h.current]),g||b?jsx(Text$1,{fontSize:1,children:"Loading..."}):jsxs(Fragment,{children:[l?jsx(Text$1,{quaternion:u.quaternion.clone(),position:[0,0,1],fontSize:.25,children:`${i.name}, Position: (${o.pos.x.toFixed(1)}, ${o.pos.y.toFixed(1)}, ${o.pos.z.toFixed(1)})`}):null,jsx("group",{children:jsxs("group",{ref:h,children:[jsx("group",{scale:.3,rotation:[Math.PI/2,-Math.PI/2,0],children:jsxs("mesh",{name:"pcb_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d.pcb_Default_sldprt.geometry,material:p["Material.003"],position:[.01,0,0],scale:.01,children:[jsx("mesh",{name:"propeller_ccw_Default_sldprt001",castShadow:!0,receiveShadow:!0,geometry:d.propeller_ccw_Default_sldprt001.geometry,material:p["Material.004"],position:[33.94,15.2,33.85],rotation:[1.56,-.01,.79]}),jsx("mesh",{name:"propeller_ccw_Default_sldprt002",castShadow:!0,receiveShadow:!0,geometry:d.propeller_ccw_Default_sldprt002.geometry,material:p["Material.001"],position:[33.94,15.2,-33.85],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt003",castShadow:!0,receiveShadow:!0,geometry:d.propeller_ccw_Default_sldprt003.geometry,material:p["Material.004"],position:[-33.83,15.2,33.32],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt004",castShadow:!0,receiveShadow:!0,geometry:d.propeller_ccw_Default_sldprt004.geometry,material:p["Material.004"],position:[-33.94,15.2,-33.85],rotation:[1.57,0,Math.PI/4]}),jsx("mesh",{name:"7mm_motor_mount_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d["7mm_motor_mount_Default_sldprt"].geometry,material:p.Material,position:[-33.72,3.79,-33.71],rotation:[1.56,0,0]}),jsx("mesh",{name:"7x15_motor_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d["7x15_motor_Default_sldprt"].geometry,material:p["Material.002"],position:[-33.85,-4.25,-33.74],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_bc-bl-01-a_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d["battery_bc-bl-01-a_Default_sldprt"].geometry,material:p["Material.006"],position:[-11.27,2.54,8.16],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_holder_board_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d.battery_holder_board_Default_sldprt.geometry,material:p["Material.003"],position:[-10.37,9.9,13.13],rotation:[Math.PI/2,0,0],scale:[1,.97,1]}),jsx("mesh",{name:"header_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:d.header_Default_sldprt.geometry,material:p["Material.005"],position:[-9.32,4.28,-8.95],rotation:[1.56,0,-Math.PI],scale:-1})]})}),jsxs(Sphere,{position:[0,0,-.05],scale:.033,castShadow:!1,receiveShadow:!1,children:[jsx("meshStandardMaterial",{emissive:o?[o.color.r/255,o.color.g/255,o.color.b/255]:[1,1,1]}),jsx("pointLight",{position:[0,0,0],intensity:.5})]})]})}),t&&a?jsx(Box,{onPointerOver:()=>{c(!0)},onPointerLeave:()=>{c(!1)},args:[a.x,a.y,a.z],material:new MeshBasicMaterial({color:r(e)?16711680:65280,wireframe:!0}),position:new Vector3(0,0,0)},e):null]})}useGLTF.preload("./crazyflie.glb");var f$2=l$2(),n=e=>c$2(e,f$2),m$1=l$2();n.write=e=>c$2(e,m$1);var d$2=l$2();n.onStart=e=>c$2(e,d$2);var h$2=l$2();n.onFrame=e=>c$2(e,h$2);var p$1=l$2();n.onFinish=e=>c$2(e,p$1);var i$1=[];n.setTimeout=(e,t)=>{let r=n.now()+t,i=()=>{let e=i$1.findIndex((e=>e.cancel==i));~e&&i$1.splice(e,1),u$2-=~e?1:0},o={time:r,handler:e,cancel:i};return i$1.splice(w(r),0,o),u$2+=1,v$1(),o};var w=e=>~(~i$1.findIndex((t=>t.time>e))||~i$1.length);n.cancel=e=>{d$2.delete(e),h$2.delete(e),p$1.delete(e),f$2.delete(e),m$1.delete(e)},n.sync=e=>{T=!0,n.batchedUpdates(e),T=!1},n.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function i(...e){t=e,n.onStart(r)}return i.handler=e,i.cancel=()=>{d$2.delete(r),t=null},i};var y$2=typeof window<"u"?window.requestAnimationFrame:()=>{};n.use=e=>y$2=e,n.now=typeof performance<"u"?()=>performance.now():Date.now,n.batchedUpdates=e=>e(),n.catch=console.error,n.frameLoop="always",n.advance=()=>{"demand"!==n.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):x$1()};var r=-1,u$2=0,T=!1;function c$2(e,t){T?(t.delete(e),e(0)):(t.add(e),v$1())}function v$1(){r<0&&(r=0,"demand"!==n.frameLoop&&y$2(b$2))}function R(){r=-1}function b$2(){~r&&(y$2(b$2),n.batchedUpdates(x$1))}function x$1(){let e=r;r=n.now();let t=w(r);t&&(Q$2(i$1.splice(0,t),(e=>e.handler())),u$2-=t),u$2?(d$2.flush(),f$2.flush(e?Math.min(64,r-e):16.667),h$2.flush(),m$1.flush(),p$1.flush()):R()}function l$2(){let e=new Set,t=e;return{add(n){u$2+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(u$2-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,u$2-=t.size,Q$2(t,(t=>t(n)&&e.add(t))),u$2+=e.size,t=e)}}}function Q$2(e,t){e.forEach((e=>{try{t(e)}catch(r){n.catch(r)}}))}var ze$1=Object.defineProperty,Le$2=(e,t)=>{for(var n in t)ze$1(e,n,{get:t[n],enumerable:!0})},p={};function Y(){}Le$2(p,{assign:()=>U,colors:()=>c$1,createStringInterpolator:()=>k$1,skipAnimation:()=>ee,to:()=>J$1,willAdvance:()=>S});var mt$1=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function bt$1(e,t){if(l$1.arr(e)){if(!l$1.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ve=(e,t)=>e.forEach(t);function xt(e,t,n){if(l$1.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(let r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ht$1=e=>l$1.und(e)?[]:l$1.arr(e)?e:[e];function Pe$1(e,t){if(e.size){let n=Array.from(e);e.clear(),Ve(n,t)}}var yt$1=(e,...t)=>Pe$1(e,(e=>e(...t))),h$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k$1,J$1,c$1=null,ee=!1,S=Y,U=e=>{e.to&&(J$1=e.to),e.now&&(n.now=e.now),void 0!==e.colors&&(c$1=e.colors),null!=e.skipAnimation&&(ee=e.skipAnimation),e.createStringInterpolator&&(k$1=e.createStringInterpolator),e.requestAnimationFrame&&n.use(e.requestAnimationFrame),e.batchedUpdates&&(n.batchedUpdates=e.batchedUpdates),e.willAdvance&&(S=e.willAdvance),e.frameLoop&&(n.frameLoop=e.frameLoop)},E$2=new Set,u$1=[],H$1=[],A=0,qe$1={get idle(){return!E$2.size&&!u$1.length},start(e){A>e.priority?(E$2.add(e),n.onStart($e)):(te$1(e),n(B))},advance:B,sort(e){if(A)n.onFrame((()=>qe$1.sort(e)));else{let t=u$1.indexOf(e);~t&&(u$1.splice(t,1),re(e))}},clear(){u$1=[],E$2.clear()}};function $e(){E$2.forEach(te$1),E$2.clear(),n(B)}function te$1(e){u$1.includes(e)||re(e)}function re(e){u$1.splice(Ge$1(u$1,(t=>t.priority>e.priority)),0,e)}function B(e){let t=H$1;for(let n=0;n<u$1.length;n++){let r=u$1[n];A=r.priority,r.idle||(S(r),r.advance(e),r.idle||t.push(r))}return A=0,(H$1=u$1).length=0,(u$1=t).length>0}function Ge$1(e,t){let n=e.findIndex(t);return n<0?e.length:n}var ne$2=(e,t,n)=>Math.min(Math.max(n,e),t),It={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},d$1="[-+]?\\d*\\.?\\d+",M=d$1+"%";function C$1(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var oe$1=new RegExp("rgb"+C$1(d$1,d$1,d$1)),fe$1=new RegExp("rgba"+C$1(d$1,d$1,d$1,d$1)),ae$1=new RegExp("hsl"+C$1(d$1,M,M)),ie$2=new RegExp("hsla"+C$1(d$1,M,M,d$1)),se$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ue$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,le$1=/^#([0-9a-fA-F]{6})$/,ce=/^#([0-9a-fA-F]{8})$/;function be$1(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=le$1.exec(e))?parseInt(t[1]+"ff",16)>>>0:c$1&&void 0!==c$1[e]?c$1[e]:(t=oe$1.exec(e))?(y$1(t[1])<<24|y$1(t[2])<<16|y$1(t[3])<<8|255)>>>0:(t=fe$1.exec(e))?(y$1(t[1])<<24|y$1(t[2])<<16|y$1(t[3])<<8|me$1(t[4]))>>>0:(t=se$1.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ce.exec(e))?parseInt(t[1],16)>>>0:(t=ue$1.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ae$1.exec(e))?(255|de$1(pe(t[1]),z$1(t[2]),z$1(t[3])))>>>0:(t=ie$2.exec(e))?(de$1(pe(t[1]),z$1(t[2]),z$1(t[3]))|me$1(t[4]))>>>0:null}function j$1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function de$1(e,t,n){let r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,o=j$1(i,r,e+1/3),s=j$1(i,r,e),a=j$1(i,r,e-1/3);return Math.round(255*o)<<24|Math.round(255*s)<<16|Math.round(255*a)<<8}function y$1(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function pe(e){return(parseFloat(e)%360+360)%360/360}function me$1(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function z$1(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function D$1(e){let t=be$1(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}var W$1=(e,t,n)=>{if(l$1.fun(e))return e;if(l$1.arr(e))return W$1({range:e,output:t,extrapolate:n});if(l$1.str(e.output[0]))return k$1(e);let r=e,i=r.output,o=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{let t=He$1(e,o);return Ue$1(e,o[t],o[t+1],i[t],i[t+1],l,s,a,r.map)}};function Ue$1(e,t,n,r,i,o,s,a,l){let c=l?l(e):e;if(c<t){if("identity"===s)return c;"clamp"===s&&(c=t)}if(c>n){if("identity"===a)return c;"clamp"===a&&(c=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t),c=o(c),r===-1/0?c=-c:i===1/0?c+=r:c=c*(i-r)+r,c)}function He$1(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Be=(e,t="end")=>n=>{let r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,i="end"===t?Math.floor(r):Math.ceil(r);return ne$2(0,1,i/e)},P=1.70158,L=1.525*P,xe$1=P+1,he$1=2*Math.PI/3,ye$1=2*Math.PI/4.5,V=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,Lt$1={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>xe$1*e*e*e-P*e*e,easeOutBack:e=>1+xe$1*Math.pow(e-1,3)+P*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(2*(L+1)*e-L)/2:(Math.pow(2*e-2,2)*((L+1)*(2*e-2)+L)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*he$1),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*he$1)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*ye$1)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*ye$1)/2+1,easeInBounce:e=>1-V(1-e),easeOutBounce:V,easeInOutBounce:e=>e<.5?(1-V(1-2*e))/2:(1+V(2*e-1))/2,steps:Be},g=Symbol.for("FluidValue.get"),m=Symbol.for("FluidValue.observers"),Pt=e=>Boolean(e&&e[g]),ve=e=>e&&e[g]?e[g]():e,qt=e=>e[m]||null;function je(e,t){e.eventObserved?e.eventObserved(t):e(t)}function $t(e,t){let n=e[m];n&&n.forEach((e=>{je(e,t)}))}var ge=(_c=class{constructor(e){if(__publicField(this,_a2),__publicField(this,_b),!e&&!(e=this.get))throw Error("Unknown getter");De$1(this,e)}},_a2=g,_b=m,_c),De$1=(e,t)=>Ee$1(e,g,t);function Gt(e,t){if(e[g]){let n=e[m];n||Ee$1(e,m,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Qt(e,t){let n=e[m];if(n&&n.has(t)){let r=n.size-1;r?n.delete(t):e[m]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ee$1=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),O=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K=new RegExp(`(${O.source})(%|[a-z]+)`,"i"),we$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,b$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,N=e=>{let[t,n]=We(e);if(!t||h$1())return e;let r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){return window.getComputedStyle(document.documentElement).getPropertyValue(n)||e}return n&&b$1.test(n)?N(n):n||e},We=e=>{let t=b$1.exec(e);if(!t)return[,];let[,n,r]=t;return[n,r]},_,Ke$1=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Xt=e=>{_||(_=c$1?new RegExp(`(${Object.keys(c$1).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map((e=>ve(e).replace(b$1,N).replace(Oe,D$1).replace(_,D$1))),n=t.map((e=>e.match(O).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>W$1({...e,output:t})));return e=>{var n;let i=!K.test(t[0])&&(null==(n=t.find((e=>K.test(e))))?void 0:n.replace(O,"")),o=0;return t[0].replace(O,(()=>`${r[o++](e)}${i||""}`)).replace(we$1,Ke$1)}},Z="react-spring: ",Te=e=>{let t=e,n=!1;if("function"!=typeof t)throw new TypeError(`${Z}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},Ne$1=Te(console.warn);function Jt(){Ne$1(`${Z}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var _e$1=Te(console.warn);function er(){_e$1(`${Z}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function or(e){return l$1.str(e)&&("#"==e[0]||/\d/.test(e)||!h$1()&&b$1.test(e)||e in(c$1||{}))}var Q$1=h$1()?reactExports.useEffect:reactExports.useLayoutEffect,Ce$1=()=>{let e=reactExports.useRef(!1);return Q$1((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function Mr(){let e=reactExports.useState()[1],t=Ce$1();return()=>{t.current&&e(Math.random())}}function Lr(e,t){let[n]=reactExports.useState((()=>({inputs:t,result:e()}))),r=reactExports.useRef(),i=r.current,o=i;return o?Boolean(t&&o.inputs&&it$1(t,o.inputs))||(o={inputs:t,result:e()}):o=n,reactExports.useEffect((()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)}),[o]),o.result}function it$1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var $r=e=>reactExports.useEffect(e,ut),ut=[];function Ur(e){let t=reactExports.useRef();return reactExports.useEffect((()=>{t.current=e})),t.current}var h=Symbol.for("Animated:node"),v=e=>!!e&&e[h]===e,k=e=>e&&e[h],D=(e,t)=>mt$1(e,h,t),F=e=>e&&e[h]&&e[h].getPayload(),c=class{constructor(){__publicField(this,"payload"),D(this,this)}getPayload(){return this.payload||[]}},l=class extends c{constructor(e){super(),__publicField(this,"done",!0),__publicField(this,"elapsedTime"),__publicField(this,"lastPosition"),__publicField(this,"lastVelocity"),__publicField(this,"v0"),__publicField(this,"durationProgress",0),this._value=e,l$1.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new l(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return l$1.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,l$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},d=class extends l{constructor(e){super(0),__publicField(this,"_string",null),__publicField(this,"_toString"),this._toString=W$1({output:[e,e]})}static create(e){return new d(e)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(e){if(l$1.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=W$1({output:[this.getValue(),e]})),this._value=0,super.reset()}},f$1={dependencies:null},u=class extends c{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return xt(this.source,((n,r)=>{v(n)?t[r]=n.getValue(e):Pt(n)?t[r]=ve(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ve(this.payload,(e=>e.reset()))}_makePayload(e){if(e){let t=new Set;return xt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){f$1.dependencies&&Pt(e)&&f$1.dependencies.add(e);let t=F(e);t&&Ve(t,(e=>this.add(e)))}},y=class extends u{constructor(e){super(e)}static create(e){return new y(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){let t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(z)),!0)}};function z(e){return(or(e)?d:l).create(e)}function Le$1(e){let t=k(e);return t?t.constructor:l$1.arr(e)?y:or(e)?d:l}var x=(e,t)=>{let r=!l$1.fun(e)||e.prototype&&e.prototype.isReactComponent;return reactExports.forwardRef(((i,o)=>{let s=reactExports.useRef(null),a=r&&reactExports.useCallback((e=>{s.current=ae(o,e)}),[o]),[l,c]=ne$1(i,t),u=Mr(),h=()=>{let e=s.current;r&&!e||!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&u()},d=new b(h,c),p=reactExports.useRef();Q$1((()=>(p.current=d,Ve(c,(e=>Gt(e,d))),()=>{p.current&&(Ve(p.current.deps,(e=>Qt(e,p.current))),n.cancel(p.current.update))}))),reactExports.useEffect(h,[]),$r((()=>()=>{let e=p.current;Ve(e.deps,(t=>Qt(t,e)))}));let f=t.getComponentProps(l.getValue());return reactExports.createElement(e,{...f,ref:a})}))},b=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&n.write(this.update)}};function ne$1(e,t){let n=new Set;return f$1.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new u(e),f$1.dependencies=null,[e,n]}function ae(e,t){return e&&(l$1.fun(e)?e(t):e.current=t),t}var j=Symbol.for("AnimatedComponent"),Ke=(e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new u(e)),getComponentProps:r=(e=>e)}={})=>{let i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=e=>{let t=I$1(e)||"Anonymous";return(e=l$1.str(e)?o[e]||(o[e]=x(e,i)):e[j]||(e[j]=x(e,i))).displayName=`Animated(${t})`,e};return xt(e,((t,n)=>{l$1.arr(e)&&(n=I$1(t)),o[n]=o(t)})),{animated:o}},I$1=e=>l$1.str(e)?e:e&&l$1.str(e.displayName)?e.displayName:l$1.fun(e)&&e.name||null;function I(e,...t){return l$1.fun(e)?e(...t):e}var te=(e,t)=>!0===e||!!(t&&e&&(l$1.fun(e)?e(t):ht$1(e).includes(t))),et=(e,t)=>l$1.obj(e)?t&&e[t]:e,ke=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,nn=e=>e,ne=(e,t=nn)=>{let n=rn;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));let r={};for(let i of n){let n=t(e[i],i);l$1.und(n)||(r[i]=n)}return r},rn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],on={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sn(e){let t={},n=0;if(xt(e,((e,r)=>{on[r]||(t[r]=e,n++)})),n)return t}function de(e){let t=sn(e);if(t){let n={to:t};return xt(e,((e,r)=>r in t||(n[r]=e))),n}return{...e}}function me(e){return e=ve(e),l$1.arr(e)?e.map(me):or(e)?p.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Ue(e){for(let t in e)return!0;return!1}function Ee(e){return l$1.fun(e)||l$1.arr(e)&&l$1.obj(e[0])}function xe(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function he(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}var mt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tt={...mt.default,mass:1,damping:1,easing:Lt$1.linear,clamp:!1},we=class{constructor(){__publicField(this,"tension"),__publicField(this,"friction"),__publicField(this,"frequency"),__publicField(this,"damping"),__publicField(this,"mass"),__publicField(this,"velocity",0),__publicField(this,"restVelocity"),__publicField(this,"precision"),__publicField(this,"progress"),__publicField(this,"duration"),__publicField(this,"easing"),__publicField(this,"clamp"),__publicField(this,"bounce"),__publicField(this,"decay"),__publicField(this,"round"),Object.assign(this,tt)}};function gt(e,t,n){n&&(ht(n={...n},t),t={...n,...t}),ht(e,t),Object.assign(e,t);for(let s in tt)null==e[s]&&(e[s]=tt[s]);let{mass:r,frequency:i,damping:o}=e;return l$1.und(i)||(i<.01&&(i=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/i,2)*r,e.friction=4*Math.PI*o*r/i),e}function ht(e,t){if(l$1.und(t.decay)){let n=!l$1.und(t.tension)||!l$1.und(t.friction);(n||!l$1.und(t.frequency)||!l$1.und(t.damping)||!l$1.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var yt=[],Le=class{constructor(){__publicField(this,"changed",!1),__publicField(this,"values",yt),__publicField(this,"toValues",null),__publicField(this,"fromValues",yt),__publicField(this,"to"),__publicField(this,"from"),__publicField(this,"config",new we),__publicField(this,"immediate",!1)}};function Me(e,{key:t,props:r,defaultProps:i,state:o,actions:s}){return new Promise(((a,l)=>{let c,u,h=te(r.cancel??(null==i?void 0:i.cancel),t);if(h)m();else{l$1.und(r.pause)||(o.paused=te(r.pause,t));let e=null==i?void 0:i.pause;!0!==e&&(e=o.paused||te(e,t)),c=I(r.delay||0,t),e?(o.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){o.resumeQueue.add(f),o.timeouts.delete(u),u.cancel(),c=u.time-n.now()}function f(){c>0&&!p.skipAnimation?(o.delayed=!0,u=n.setTimeout(m,c),o.pauseQueue.add(d),o.timeouts.add(u)):m()}function m(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(u),e<=(o.cancelId||0)&&(h=!0);try{s.start({...r,callId:e,cancel:h},a)}catch(t){l(t)}}}))}var be=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?q(e.get()):t.every((e=>e.noop))?nt(e.get()):E$1(e.get(),t.every((e=>e.finished))),nt=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),E$1=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),q=e=>({value:e,cancelled:!0,finished:!1});function De(e,t,r,i){let{callId:o,parentId:s,onRest:a}=t,{asyncTo:l,promise:c}=r;return s||e!==l||t.reset?r.promise=(async()=>{r.asyncId=o,r.asyncTo=e;let u,h,d,f=ne(t,((e,t)=>"onRest"===t?void 0:e)),m=new Promise(((e,t)=>(u=e,h=t))),g=e=>{let t=o<=(r.cancelId||0)&&q(i)||o!==r.asyncId&&E$1(i,!1);if(t)throw e.result=t,h(e),e},_=(e,t)=>{let n=new Ae,s=new Ne;return(async()=>{if(p.skipAnimation)throw oe(r),s.result=E$1(i,!1),h(s),s;g(n);let a=l$1.obj(e)?{...e}:{...t,to:e};a.parentId=o,xt(f,((e,t)=>{l$1.und(a[t])&&(a[t]=e)}));let l=await i.start(a);return g(n),r.paused&&await new Promise((e=>{r.resumeQueue.add(e)})),l})()};if(p.skipAnimation)return oe(r),E$1(i,!1);try{let t;t=l$1.arr(e)?(async e=>{for(let t of e)await _(t)})(e):Promise.resolve(e(_,i.stop.bind(i))),await Promise.all([t.then(u),m]),d=E$1(i.get(),!0,!1)}catch(b){if(b instanceof Ae)d=b.result;else{if(!(b instanceof Ne))throw b;d=b.result}}finally{o==r.asyncId&&(r.asyncId=s,r.asyncTo=s?l:void 0,r.promise=s?c:void 0)}return l$1.fun(a)&&n.batchedUpdates((()=>{a(d,i,i.item)})),d})():c}function oe(e,t){Pe$1(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Ae=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),__publicField(this,"result")}},Ne=class extends Error{constructor(){super("SkipAnimationSignal"),__publicField(this,"result")}},Re=e=>e instanceof X,Sn=1,X=class extends ge{constructor(){super(...arguments),__publicField(this,"id",Sn++),__publicField(this,"_priority",0)}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=k(this);return e&&e.getValue()}to(...e){return p.to(this,e)}interpolate(...e){return Jt(),p.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){$t(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||qe$1.sort(this),$t(this,{type:"priority",parent:this,priority:e})}},se=Symbol.for("SpringPhase"),bt=1,rt=2,ot=4,qe=e=>(e[se]&bt)>0,Q=e=>(e[se]&rt)>0,ye=e=>(e[se]&ot)>0,st=(e,t)=>t?e[se]|=rt|bt:e[se]&=~rt,it=(e,t)=>t?e[se]|=ot:e[se]&=~ot,ue=class extends X{constructor(e,t){if(super(),__publicField(this,"key"),__publicField(this,"animation",new Le),__publicField(this,"queue"),__publicField(this,"defaultProps",{}),__publicField(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set}),__publicField(this,"_pendingCalls",new Set),__publicField(this,"_lastCallId",0),__publicField(this,"_lastToId",0),__publicField(this,"_memoizedDuration",0),!l$1.und(e)||!l$1.und(t)){let n=l$1.obj(e)?{...e}:{...t,from:e};l$1.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Q(this)||this._state.asyncTo)||ye(this)}get goal(){return ve(this.animation.to)}get velocity(){let e=k(this);return e instanceof l?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return qe(this)}get isAnimating(){return Q(this)}get isPaused(){return ye(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1,r=this.animation,{config:i,toValues:o}=r,s=F(r.to);!s&&Pt(r.to)&&(o=ht$1(ve(r.to))),r.values.forEach(((a,l)=>{if(a.done)return;let c=a.constructor==d?1:s?s[l].lastPosition:o[l],u=r.immediate,h=c;if(!u){if(h=a.lastPosition,i.tension<=0)return void(a.done=!0);let t,n=a.elapsedTime+=e,o=r.fromValues[l],s=null!=a.v0?a.v0:a.v0=l$1.arr(i.velocity)?i.velocity[l]:i.velocity,d=i.precision||(o==c?.005:Math.min(1,.001*Math.abs(c-o)));if(l$1.und(i.duration))if(i.decay){let e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*n);h=o+s/(1-e)*(1-r),u=Math.abs(a.lastPosition-h)<=d,t=s*r}else{t=null==a.lastVelocity?s:a.lastVelocity;let n,r=i.restVelocity||d/10,l=i.clamp?0:i.bounce,p=!l$1.und(l),f=o==c?a.v0>0:o<c,m=!1,g=1,_=Math.ceil(e/g);for(let e=0;e<_&&(n=Math.abs(t)>r,n||(u=Math.abs(c-h)<=d,!u));++e){p&&(m=h==c||h>c==f,m&&(t=-t*l,h=c)),t+=(1e-6*-i.tension*(h-c)+.001*-i.friction*t)/i.mass*g,h+=t*g}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,a.durationProgress>0&&(a.elapsedTime=i.duration*a.durationProgress,n=a.elapsedTime+=e)),r=(i.progress||0)+n/this._memoizedDuration,r=r>1?1:r<0?0:r,a.durationProgress=r),h=o+i.easing(r)*(c-o),t=(h-a.lastPosition)/e,u=1==r}a.lastVelocity=t,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),u=!0)}s&&!s[l].done&&(u=!1),u?a.done=!0:t=!1,a.setValue(h,i.round)&&(n=!0)}));let a=k(this),l=a.getValue();if(t){let e=ve(r.to);l===e&&!n||i.decay?n&&i.decay&&this._onChange(l):(a.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return n.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Q(this)){let{to:e,config:t}=this.animation;n.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return l$1.und(e)?(n=this.queue||[],this.queue=[]):n=[l$1.obj(e)?e:{...t,to:e}],Promise.all(n.map((e=>this._update(e)))).then((e=>be(this,e)))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),oe(this._state,e&&this._lastCallId),n.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:n,from:r}=e;n=l$1.obj(n)?n[t]:n,(null==n||Ee(n))&&(n=void 0),r=l$1.obj(r)?r[t]:r,null==r&&(r=void 0);let i={to:n,from:r};return qe(this)||(e.reverse&&([n,r]=[r,n]),r=ve(r),l$1.und(r)?k(this)||this._set(n):this._set(r)),i}_update({...e},t){let{key:n,defaultProps:r}=this;e.default&&Object.assign(r,ne(e,((e,t)=>/^on/.test(t)?et(e,n):e))),_t(this,e,"onProps"),Ie(this,"onProps",e,this);let i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let o=this._state;return Me(++this._lastCallId,{key:n,props:e,defaultProps:r,state:o,actions:{pause:()=>{ye(this)||(it(this,!0),yt$1(o.pauseQueue),Ie(this,"onPause",E$1(this,Ce(this,this.animation.to)),this))},resume:()=>{ye(this)&&(it(this,!1),Q(this)&&this._resume(),yt$1(o.resumeQueue),Ie(this,"onResume",E$1(this,Ce(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then((n=>{if(e.loop&&n.finished&&(!t||!n.noop)){let t=at(e);if(t)return this._update(t,!0)}return n}))}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(q(this));let i=!l$1.und(e.to),o=!l$1.und(e.from);if(i||o){if(!(t.callId>this._lastToId))return r(q(this));this._lastToId=t.callId}let{key:s,defaultProps:a,animation:l}=this,{to:c,from:u}=l,{to:h=c,from:p=u}=e;o&&!i&&(!t.default||l$1.und(h))&&(h=p),t.reverse&&([h,p]=[p,h]);let f=!bt$1(p,u);f&&(l.from=p),p=ve(p);let m=!bt$1(h,c);m&&this._focus(h);let g=Ee(t.to),{config:_}=l,{decay:b,velocity:v}=_;(i||o)&&(_.velocity=0),t.config&&!g&&gt(_,I(t.config,s),t.config!==a.config?I(a.config,s):void 0);let y=k(this);if(!y||l$1.und(h))return r(E$1(this,!0));let O=l$1.und(t.reset)?o&&!t.default:!l$1.und(p)&&te(t.reset,s),S=O?p:this.get(),T=me(h),x=l$1.num(T)||l$1.arr(T)||or(T),E=!g&&(!x||te(a.immediate||t.immediate,s));if(m){let e=Le$1(h);if(e!==y.constructor){if(!E)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(T)}}let w=y.constructor,C=Pt(h),A=!1;if(!C){let e=O||!qe(this)&&f;(m||e)&&(A=bt$1(me(S),T),C=!A),(!bt$1(l.immediate,E)&&!E||!bt$1(_.decay,b)||!bt$1(_.velocity,v))&&(C=!0)}if(A&&Q(this)&&(l.changed&&!O?C=!0:C||this._stop(c)),!g&&((C||Pt(c))&&(l.values=y.getPayload(),l.toValues=Pt(h)?null:w==d?[1]:ht$1(T)),l.immediate!=E&&(l.immediate=E,!E&&!O&&this._set(c)),C)){let{onRest:e}=l;Ve(_n,(e=>_t(this,t,e)));let i=E$1(this,Ce(this,c));yt$1(this._pendingCalls,i),this._pendingCalls.add(r),l.changed&&n.batchedUpdates((()=>{var t;l.changed=!O,null==e||e(i,this),O?I(a.onRest,i):null==(t=l.onStart)||t.call(l,i,this)}))}O&&this._set(S),g?r(De(t.to,t,this._state,this)):C?this._start():Q(this)&&!m?this._pendingCalls.add(r):r(nt(S))}_focus(e){let t=this.animation;e!==t.to&&(qt(this)&&this._detach(),t.to=e,qt(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;Pt(t)&&(Gt(t,this),Re(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;Pt(e)&&Qt(e,this)}_set(e,t=!0){let r=ve(e);if(!l$1.und(r)){let e=k(this);if(!e||!bt$1(r,e.getValue())){let i=Le$1(r);e&&e.constructor==i?e.setValue(r):D(this,i.create(r)),e&&n.batchedUpdates((()=>{this._onChange(r,t)}))}}return k(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,Ie(this,"onStart",E$1(this,Ce(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),I(this.animation.onChange,e,this)),I(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;k(this).reset(ve(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),Q(this)||(st(this,!0),ye(this)||this._resume())}_resume(){p.skipAnimation?this.finish():qe$1.start(this)}_stop(e,t){if(Q(this)){st(this,!1);let n=this.animation;Ve(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),$t(this,{type:"idle",parent:this});let r=t?q(this.get()):E$1(this.get(),Ce(this,e??n.to));yt$1(this._pendingCalls,r),n.changed&&(n.changed=!1,Ie(this,"onRest",r,this))}}};function Ce(e,t){let n=me(t);return bt$1(me(e.get()),n)}function at(e,t=e.loop,n=e.to){let r=I(t);if(r){let i=!0!==r&&de(r),o=(i||e).reverse,s=!i||i.reset;return Pe({...e,loop:t,default:!1,pause:void 0,to:!o||Ee(n)?n:void 0,from:s?e.from:void 0,reset:s,...i})}}function Pe(e){let{to:t,from:n}=e=de(e),r=new Set;return l$1.obj(t)&&Vt(t,r),l$1.obj(n)&&Vt(n,r),e.keys=r.size?Array.from(r):null,e}function Ot(e){let t=Pe(e);return l$1.und(t.default)&&(t.default=ne(t)),t}function Vt(e,t){xt(e,((e,n)=>null!=e&&t.add(n)))}var _n=["onStart","onRest","onChange","onPause","onResume"];function _t(e,t,n){e.animation[n]=t[n]!==ke(t,n)?et(t[n],e.key):void 0}function Ie(e,t,...n){var r,i,o,s;null==(i=(r=e.animation)[t])||i.call(r,...n),null==(s=(o=e.defaultProps)[t])||s.call(o,...n)}var Fn=["onStart","onChange","onRest"],kn=1,le=class{constructor(e,t){__publicField(this,"id",kn++),__publicField(this,"springs",{}),__publicField(this,"queue",[]),__publicField(this,"ref"),__publicField(this,"_flush"),__publicField(this,"_initialProps"),__publicField(this,"_lastAsyncId",0),__publicField(this,"_active",new Set),__publicField(this,"_changed",new Set),__publicField(this,"_started",!1),__publicField(this,"_item"),__publicField(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set}),__publicField(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map}),this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(let t in e){let n=e[t];l$1.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Pe(e)),this}start(e){let{queue:t}=this;return e?t=ht$1(e).map(Pe):this.queue=[],this._flush?this._flush(this,t):(jt(this,t),ze(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){let n=this.springs;Ve(ht$1(t),(t=>n[t].stop(!!e)))}else oe(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(l$1.und(e))this.start({pause:!0});else{let t=this.springs;Ve(ht$1(e),(e=>t[e].pause()))}return this}resume(e){if(l$1.und(e))this.start({pause:!1});else{let t=this.springs;Ve(ht$1(e),(e=>t[e].resume()))}return this}each(e){xt(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Pe$1(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));let o=!r&&this._started,s=i||o&&n.size?this.get():null;i&&t.size&&Pe$1(t,(([e,t])=>{t.value=s,e(t,this,this._item)})),o&&(this._started=!1,Pe$1(n,(([e,t])=>{t.value=s,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}n.onFrame(this._onFrame)}};function ze(e,t){return Promise.all(t.map((t=>wt(e,t)))).then((t=>be(e,t)))}async function wt(e,t,r){let{keys:i,to:o,from:s,loop:a,onRest:l,onResolve:c}=t,u=l$1.obj(t.default)&&t.default;a&&(t.loop=!1),!1===o&&(t.to=null),!1===s&&(t.from=null);let h=l$1.arr(o)||l$1.fun(o)?o:void 0;h?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Ve(Fn,(n=>{let r=t[n];if(l$1.fun(r)){let i=e._events[n];t[n]=({finished:e,cancelled:t})=>{let n=i.get(r);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):i.set(r,{value:null,finished:e||!1,cancelled:t||!1})},u&&(u[n]=t[n])}}));let d=e._state;t.pause===!d.paused?(d.paused=t.pause,yt$1(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);let p=(i||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===ke(t,"cancel");(h||f&&d.asyncId)&&p.push(Me(++e._lastAsyncId,{props:t,state:d,actions:{pause:Y,resume:Y,start(t,n){f?(oe(d,e._lastAsyncId),n(q(e))):(t.onRest=l,n(De(h,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));let m=be(e,await Promise.all(p));if(a&&m.finished&&(!r||!m.noop)){let n=at(t,a,o);if(n)return jt(e,[n]),wt(e,n,!0)}return c&&n.batchedUpdates((()=>c(m,e,e.item))),m}function _e(e,t){let n={...e.springs};return t&&Ve(ht$1(t),(e=>{l$1.und(e.keys)&&(e=Pe(e)),l$1.obj(e.to)||(e={...e,to:void 0}),Mt(n,e,(e=>Lt(e)))})),pt(e,n),n}function pt(e,t){xt(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,Gt(t,e))}))}function Lt(e,t){let n=new ue;return n.key=e,t&&Gt(n,t),n}function Mt(e,t,n){t.keys&&Ve(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function jt(e,t){Ve(t,(t=>{Mt(e.springs,t,(t=>Lt(t,e)))}))}var H=({children:e,...t})=>{let n=reactExports.useContext(Ge),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=Lr((()=>({pause:r,immediate:i})),[r,i]);let{Provider:o}=Ge;return reactExports.createElement(o,{value:t},e)},Ge=wn(H,{});function wn(e,t){return Object.assign(e,reactExports.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}H.Provider=Ge.Provider,H.Consumer=Ge.Consumer;var fe=()=>{let e=[],t=function(t){er();let r=[];return Ve(e,((e,i)=>{if(l$1.und(t))r.push(e.start());else{let o=n(t,e,i);o&&r.push(e.start(o))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return Ve(e,(e=>e.pause(...arguments))),this},t.resume=function(){return Ve(e,(e=>e.resume(...arguments))),this},t.set=function(t){Ve(e,((e,n)=>{let r=l$1.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){let n=[];return Ve(e,((e,r)=>{if(l$1.und(t))n.push(e.start());else{let i=this._getProps(t,e,r);i&&n.push(e.start(i))}})),n},t.stop=function(){return Ve(e,(e=>e.stop(...arguments))),this},t.update=function(t){return Ve(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};let n=function(e,t,n){return l$1.fun(e)?e(n,t):e};return t._getProps=n,t};function He(e,t,n){let r=l$1.fun(t)&&t;r&&!n&&(n=[]);let i=reactExports.useMemo((()=>r||3==arguments.length?fe():void 0),[]),o=reactExports.useRef(0),s=Mr(),a=reactExports.useMemo((()=>({ctrls:[],queue:[],flush(e,t){let n=_e(e,t);return o.current>0&&!a.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?ze(e,t):new Promise((r=>{pt(e,n),a.queue.push((()=>{r(ze(e,t))})),s()}))}})),[]),l=reactExports.useRef([...a.ctrls]),c=[],u=Ur(e)||0;function h(e,n){for(let i=e;i<n;i++){let e=l.current[i]||(l.current[i]=new le(null,a.flush)),n=r?r(i,e):t[i];n&&(c[i]=Ot(n))}}reactExports.useMemo((()=>{Ve(l.current.slice(e,u),(e=>{xe(e,i),e.stop(!0)})),l.current.length=e,h(u,e)}),[e]),reactExports.useMemo((()=>{h(0,Math.min(u,e))}),n);let d=l.current.map(((e,t)=>_e(e,c[t]))),p=reactExports.useContext(H),f=Ur(p),m=p!==f&&Ue(p);Q$1((()=>{o.current++,a.ctrls=l.current;let{queue:e}=a;e.length&&(a.queue=[],Ve(e,(e=>e()))),Ve(l.current,((e,t)=>{null==i||i.add(e),m&&e.start({default:p});let n=c[t];n&&(he(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),$r((()=>()=>{Ve(a.ctrls,(e=>e.stop(!0)))}));let g=d.map((e=>({...e})));return i?[g,i]:g}function J(e,t){let n=l$1.fun(e),[[r],i]=He(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,i]:r}var W=class extends X{constructor(e,t){super(),__publicField(this,"key"),__publicField(this,"idle",!0),__publicField(this,"calc"),__publicField(this,"_active",new Set),this.source=e,this.calc=W$1(...t);let n=this._get(),r=Le$1(n);D(this,r.create(n))}advance(e){let t=this._get();bt$1(t,this.get())||(k(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Yt(this._active)&&ct(this)}_get(){let e=l$1.arr(this.source)?this.source.map(ve):ht$1(ve(this.source));return this.calc(...e)}_start(){this.idle&&!Yt(this._active)&&(this.idle=!1,Ve(F(this),(e=>{e.done=!1})),p.skipAnimation?(n.batchedUpdates((()=>this.advance())),ct(this)):qe$1.start(this))}_attach(){let e=1;Ve(ht$1(this.source),(t=>{Pt(t)&&Gt(t,this),Re(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){Ve(ht$1(this.source),(e=>{Pt(e)&&Qt(e,this)})),this._active.clear(),ct(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=ht$1(this.source).reduce(((e,t)=>Math.max(e,(Re(t)?t.priority:0)+1)),0))}};function vr(e){return!1!==e.idle}function Yt(e){return!e.size||Array.from(e).every(vr)}function ct(e){e.idle||(e.idle=!0,Ve(F(e),(e=>{e.done=!0})),$t(e,{type:"idle",parent:e}))}p.assign({createStringInterpolator:Xt,to:(e,t)=>new W(e,t)});var o=["primitive"].concat(Object.keys(r$5).filter((e=>/^[A-Z]/.test(e))).map((e=>e[0].toLowerCase()+e.slice(1))));p.assign({createStringInterpolator:Xt,colors:It,frameLoop:"demand"}),addEffect((()=>{n.advance()}));var f=Ke(o,{applyAnimatedValues:applyProps}),E=f.animated;const BezierControlPoint=({id:e,point:t})=>{const[n,r]=reactExports.useState(void 0),i=useCurveEditorState((e=>e.selectedControlPoint)),o=useCurveEditorState((e=>e.setSelectedControlPoint)),s=useCurveEditorState((e=>e.updateBezierControlPoint)),{size:a,viewport:l,camera:c}=useThree();l.aspect;const[u,h]=J((()=>({scale:[1,1,1],position:[t.x,t.y,t.z],config:{mass:1,tension:0,friction:18}}))),d=useGesture({onDrag:({xy:[t,r]})=>{if(!n)return;const i=new Raycaster;i.setFromCamera({x:(t-l.left)/a.width*2-1,y:-(r-l.top)/a.height*2+1},c);const o=new Plane$1;o.setFromNormalAndCoplanarPoint(c.getWorldDirection(new Vector3(0,0,1)),n);const u=new Vector3;i.ray.intersectPlane(o,u),h({position:u.toArray()}),s(e,u.clone())},onHover:({hovering:e})=>{h({scale:e?[1.2,1.2,1.2]:[1,1,1]})},onDragStart:()=>{o(e);const[t,n,i]=u.position.get();r(new Vector3(t,n,i))},onDragEnd:()=>{r(void 0),o(void 0)}});return jsx(E.mesh,{...u,...d(),castShadow:!0,children:jsxs(Sphere,{scale:.2,children:[jsx("meshBasicMaterial",{color:i===e?"#FF00FF":"#000000"}),jsx("pointLight",{color:16777215,intensity:1})]})})},CurveEditor=()=>{const e=useCurveEditorState((e=>e.bezierControlPoints)),t=useCurveEditorState((e=>e.bezierLinePoints)),n=useCurveEditorState((e=>e.selectedControlPoint)),r=e.length,i=reactExports.useRef();return useFrame((({clock:t})=>{var n;const o=t.getElapsedTime(),s=computeBezierPoint(e,o%r/r);null==(n=i.current)||n.position.set(s.x,s.y,s.z)})),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:.4*Math.PI,minPolarAngle:0,maxDistance:20,enableRotate:void 0===n}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx("directionalLight",{color:"blue",position:[0,5,5]}),jsx(Sky,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25}),jsxs("group",{children:[e.map(((e,t)=>jsx(BezierControlPoint,{id:t,point:e},t))),jsx("group",{ref:i,children:jsx(Crazyflie,{robotId:"",renderBoundingBox:!1})}),jsx(CatmullRomLine,{points:t,closed:!1,curveType:"centripetal",tension:.5,color:"black",lineWidth:3,dashed:!0,dashSize:.5,dashScale:5})]})]})},CurveEditorModal=()=>{const[e,t]=reactExports.useState([]),n=useUIState((e=>e.curveEditorOpen)),r=useUIState((e=>e.toggleCurveEditor)),i=useCurveEditorState((e=>e.bezierControlPoints)),o=useCurveEditorState((e=>e.addBezierControlPoint)),s=useCurveEditorState((e=>e.selectedControlPoint)),a=useCurveEditorState((e=>e.bezierControlPoints.length));return reactExports.useEffect((()=>{t(i)}),[s,a]),jsxs(Modal,{show:n,onClose:r,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Curve Editor"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsxs("div",{className:"flex h-full flex-row",children:[jsxs("div",{className:"w-1/4",children:[jsx(IconButton,{icon:faPlus,text:"Add Point",onClick:()=>o(new Vector3(1,1,1))}),jsx(VectorEditor,{points:e}),jsx("div",{className:"flex flex-col gap-2"})]}),jsx("div",{className:"flex h-full flex-grow",children:jsx(Canvas,{children:jsx(CurveEditor,{})})})]})}),jsx(Modal.Footer,{})]})},SettingsModal=()=>{const e=useUIState((e=>e.settingsModalOpen)),t=useUIState((e=>e.toggleSettingsModal)),n=useRobartState((e=>e.resetProject)),r=useRobartState((e=>e.projectName)),i=useRobartState((e=>e.setProjectName)),o=useUIState((e=>e.toggleCurveEditor)),[s,a]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsxs(Modal,{show:e,onClose:t,children:[jsx(Modal.Header,{children:"Settings"}),jsx(Modal.Body,{children:jsxs(Tabs.Group,{style:"default",children:[jsxs(Tabs.Item,{active:!0,title:"Project",children:["Profile content",jsxs("div",{children:[jsx("div",{className:"mb-2 block",children:jsx(Label,{value:"Project Name"})}),jsx(TextInput,{value:r,onChange:e=>i(e.target.value)})]})]}),jsx(Tabs.Item,{title:"Blocks",children:"Block Settings"}),jsx(Tabs.Item,{title:"Preferences",children:"User Preferences"}),jsx(Tabs.Item,{title:"Utilities",children:jsx(Button,{onClick:o,children:"Curve Editor"})})]})}),jsxs(Modal.Footer,{children:[jsx(CancelButton,{onClick:t}),jsx(IconButton,{color:"warning",text:"Reset Project",icon:faSync,onClick:()=>a(!0)})]})]}),jsx(ConfirmationModal,{header:"Confirm Reset Project",open:s,onCancel:()=>a(!1),onConfirm:()=>{n(),a(!1),t()},children:"Are you sure?"}),jsx(CurveEditorModal,{})]})},NavigationBar=()=>{const[e,t]=reactExports.useState(!1),n=useRobartState((e=>e.saveProject)),r=useRobartState((e=>e.exportToROS)),i=useRobartState((e=>e.loadProject)),o=useUIState((e=>e.toggleSettingsModal)),s=useRobartState((e=>e.projectName)),a=useRobartState((e=>e.setProjectName));return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center gap-5 border-b-2 border-black p-4",children:[jsx(RenamableText,{className:"text-4xl font-extrabold",text:s,updateText:e=>{a(""!==e?e:"New Robart Project")}}),jsxs("div",{className:"flex flex-grow justify-end gap-3",children:[jsx(IconButton,{icon:faDownload,text:"Export To ROS",onClick:()=>r("test.txt")}),jsx(IconButton,{icon:faDownload,text:"Save Project",onClick:()=>n()}),jsx(IconButton,{icon:faUpload,text:"Load Project",onClick:()=>t(!0)}),jsx(IconButton,{icon:faGear,text:"Settings",onClick:()=>o()})]})]}),jsx(UploadFileModal,{header:"Load Project",open:e,onClose:()=>t(!1),onFileUpload:i}),jsx(SettingsModal,{})]})},DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor(e,t){this.from=e,this.to=t}};class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=NodeType.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}NodeProp.closedBy=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.group=new NodeProp({deserialize:e=>e.split(" ")}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):noProps,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new NodeType(e.name||"",t,e.id,n);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(NodeProp.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(NodeProp.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new NodeType(n.name,r,n.id,n.flags):n)}return new NodeSet(t)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode,IterMode2;IterMode2=IterMode||(IterMode={}),IterMode2[IterMode2.ExcludeBuffers=1]="ExcludeBuffers",IterMode2[IterMode2.IncludeAnonymous=2]="IncludeAnonymous",IterMode2[IterMode2.IgnoreMounts=4]="IgnoreMounts",IterMode2[IterMode2.IgnoreOverlays=8]="IgnoreOverlays";class Tree{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(NodeProp.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,t=0,n=0){let r=CachedNode.get(this)||this.topNode,i=new TreeCursor(r);return i.moveTo(e,t),CachedNode.set(this,i._tree),i}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,t=0){let n=resolveNode(CachedNode.get(this)||this.topNode,e,t,!1);return CachedNode.set(this,n),n}resolveInner(e,t=0){let n=resolveNode(CachedInnerNode.get(this)||this.topNode,e,t,!0);return CachedInnerNode.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let o=this.cursor((e.mode||0)|IterMode.IncludeAnonymous);;){let e=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new Tree(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new Tree(NodeType.none,e,t,n)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return NodeType.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(checkSide(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new TreeBuffer(i,o,this.set)}}function checkSide(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function enterUnfinishedNodesBefore(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function resolveNode(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof TreeNode&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:IterMode.IgnoreOverlays;if(r)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof TreeNode&&s.index<0&&(null===(i=a.enter(t,n,o))||void 0===i?void 0:i.from)!=s.from&&(e=a);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class TreeNode{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(checkSide(r,n,c,c+l.length))if(l instanceof TreeBuffer){if(i&IterMode.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new BufferNode(new BufferContext(o,l,e,c),null,s)}else if(i&IterMode.IncludeAnonymous||!l.type.isAnonymous||hasChild(l)){let s;if(!(i&IterMode.IgnoreMounts)&&l.props&&(s=l.prop(NodeProp.mounted))&&!s.overlay)return new TreeNode(s.tree,c,e,o);let a=new TreeNode(l,c,e,o);return i&IterMode.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&IterMode.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&IterMode.IgnoreOverlays)&&(r=this._tree.prop(NodeProp.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new TreeNode(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new TreeCursor(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return resolveNode(this,e,t,!1)}resolveInner(e,t=0){return resolveNode(this,e,t,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}getChild(e,t=null,n=null){let r=getChildren(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return getChildren(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}function getChildren(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function matchNodeContext(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class BufferContext{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new BufferNode(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&IterMode.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new BufferNode(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new TreeCursor(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new Tree(this.type,e,t,this.to-this.from)}resolve(e,t=0){return resolveNode(this,e,t,!1)}resolveInner(e,t=0){return resolveNode(this,e,t,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=getChildren(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return getChildren(this,e,t,n)}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}class TreeCursor{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&IterMode.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&IterMode.IncludeAnonymous||e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let r=n;r<this.stack.length;r++)t=new BufferNode(this.buffer,t,this.stack[r]);return this.bufferNode=new BufferNode(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return matchNodeContext(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function hasChild(e){return e.children.some((e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e)))}function buildTree(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=DefaultBufferLength,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,m,g){let{id:_,start:b,end:v,size:y}=a,O=u;for(;y<0;){if(a.next(),-1==y){let t=o[_];return n.push(t),void m.push(b-e)}if(-3==y)return void(c=_);if(-4==y)return void(u=_);throw new RangeError(`Unrecognized record size: ${y}`)}let S,T,x=l[_],E=b-e;if(v-b<=i&&(T=function w(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l);return u.size>4?u:void 0}(a.pos-t,g))){let t=new Uint16Array(T.size-T.skip),n=a.pos-T.size,i=t.length;for(;a.pos>n;)i=f(T.start,t,i);S=new TreeBuffer(t,v-T.start,r),E=T.start-e}else{let e=a.pos-y;a.next();let t=[],n=[],r=_>=s?_:-1,o=0,l=v;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(d(t,n,b,o,a.end,l,r,O),o=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&d(t,n,b,o,b,l,r,O),t.reverse(),n.reverse(),r>-1&&o>0){let e=function C(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof Tree){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(NodeProp.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}(x);S=balanceRange(x,t,n,0,t.length,0,v-b,e,e)}else S=p(x,t,n,v-b,O-v)}n.push(S),m.push(E)}function d(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r,i=0,o){if(c){let e=[NodeProp.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[NodeProp.lookAhead,i];o=o?[e].concat(o):[e]}return new Tree(e,t,n,r,o)}function f(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=f(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let m=[],g=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,m,g,-1);let _=null!==(t=e.length)&&void 0!==t?t:m.length?g[0]+m[0].length:0;return new Tree(l[e.topID],m.reverse(),g.reverse(),_)}const nodeSizeCache=new WeakMap;function nodeSize(e,t){if(!e.isAnonymous||t instanceof TreeBuffer||t.type!=e)return 1;let n=nodeSizeCache.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Tree)){n=1;break}n+=nodeSize(e,r)}nodeSizeCache.set(t,n)}return n}function balanceRange(e,t,n,r,i,o,s,a,l){let c=0;for(let p=r;p<i;p++)c+=nodeSize(e,t[p]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,p=r[c],f=nodeSize(e,n[c]);for(c++;c<s;c++){let t=nodeSize(e,n[c]);if(f+t>=u)break;f+=t}if(c==i+1){if(f>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-p;h.push(balanceRange(e,n,r,i,c,p,t,null,l))}d.push(p+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,t):e instanceof TreeNode&&this.map.set(e.tree,t)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new TreeFragment(0,e.length,e,0,!1,n)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new TreeFragment(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Parser{startParse(e,t,n){return"string"==typeof e&&(e=new StringInput(e)),n=n?n.length?n.map((e=>new Range$1(e.from,e.to))):[new Range$1(0,0)]:[new Range$1(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new NodeProp({perNode:!0});class Stack{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new Stack(e,[],t,n,n,0,[],0,r?new StackContext(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:i}=this.p,o=i.dynamicPrecedence(r);if(o&&(this.score+=o),0==n)return this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),void this.reduceContext(r,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&e?6:0),a=s?this.stack[s-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let c=s?this.stack[s-1]:0,u=this.bufferBase+this.buffer.length-c;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,e,u+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=i.getGoto(e,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new SimulatedStack(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let r=0;r<t.length&&n.length<4;r+=2){let e=t[r+1];if(e==this.state)continue;let i=this.split();i.pushState(e,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[r],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new StackContext(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Recover,Recover2;Recover2=Recover||(Recover={}),Recover2[Recover2.Insert=200]="Insert",Recover2[Recover2.Delete=190]="Delete",Recover2[Recover2.Reduce=100]="Reduce",Recover2[Recover2.MaxNext=4]="MaxNext",Recover2[Recover2.MaxInsertStackDepth=300]="MaxInsertStackDepth",Recover2[Recover2.DampenInsertStackDepth=120]="DampenInsertStackDepth",Recover2[Recover2.MinBigReduction=2e3]="MinBigReduction";class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class StackBufferCursor{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class TokenGroup{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;readToken(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?decodeArray(e):e}token(e,t){let n,r=e.pos;for(;n=e.pos,readToken(this.data,e,t,0,this.data,this.precTable),!(e.token.value>-1);){if(null==this.elseToken)return;if(e.next<0)break;e.advance(),e.reset(n+1,e.token)}n>r&&(e.reset(r,e.token),e.acceptToken(this.elseToken,n-r))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function readToken(e,t,n,r,i,o){let s=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;0!=(a&e[s]);){let n=e[s+1];for(let h=s+3;h<n;h+=2)if((e[h+1]&a)>0){let n=e[h];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||overrides(n,t.token.value,i,o))){t.acceptToken(n);break}}let r=t.next,c=0,u=e[s+2];if(!(t.next<0&&u>c&&65535==e[n+3*u-3]&&65535==e[n+3*u-3])){for(;c<u;){let i=c+u>>1,o=n+i+(i<<1),a=e[o],l=e[o+1]||65536;if(r<a)u=i;else{if(!(r>=l)){s=e[o+2],t.advance();continue e}c=i+1}}break}s=e[n+3*u-1]}}function findOffset(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}function overrides(e,t,n,r){let i=findOffset(n,r,t);return i<0||findOffset(n,r,e)<i}const verbose="undefined"!=typeof process&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety,Safety2,Rec,Rec2;function cutAt(e,t,n){let r=e.cursor(IterMode.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}Safety2=Safety||(Safety={}),Safety2[Safety2.Margin=25]="Margin";class FragmentCursor{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof Tree){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(NodeProp.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class TokenCache{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new CachedToken))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<i.length;l++){if(0==(1<<l&o))continue;let r=i[l],c=this.tokens[l];if((!n||r.fallback)&&((r.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,r,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let i=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!r.extend&&(n=c,t>i))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new CachedToken,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new CachedToken,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let i=0;i<r;i+=3)if(this.actions[i]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let a=0;a<2;a++)for(let e=o.stateSlot(i,a?2:1);;e+=3){if(65535==s[e]){if(1!=s[e+1]){0==r&&2==s[e+1]&&(r=this.putAction(pair(s,e+2),t,n,r));break}e=pair(s,e+2)}s[e]==t&&(r=this.putAction(pair(s,e+1),t,n,r))}return r}}Rec2=Rec||(Rec={}),Rec2[Rec2.Distance=5]="Distance",Rec2[Rec2.MaxRemainingPerStep=3]="MaxRemainingPerStep",Rec2[Rec2.MinBufferLengthPrune=500]="MinBufferLengthPrune",Rec2[Rec2.ForceReduceLimit=10]="ForceReduceLimit",Rec2[Rec2.CutDepth=15e3]="CutDepth",Rec2[Rec2.CutTo=9e3]="CutTo",Rec2[Rec2.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",Rec2[Rec2.MaxStackCount=12]="MaxStackCount";class Parse{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(t,r),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[Stack.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new FragmentCursor(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&findFinished(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw verbose&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1){e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=verbose?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(NodeProp.contextHash)||0)==n))return e.useNode(s,r),verbose&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof Tree)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof Tree&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),verbose&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let l=0;l<a.length;){let s=a[l++],c=a[l++],u=a[l++],h=l==a.length||!n,d=h?e:e.split();if(d.apply(s,c,u),verbose&&console.log(o+this.stackID(d)+` (via ${0==(65536&s)?"shift":`reduce of ${i.getName(65535&s)}`} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return pushStackDedup(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=verbose?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),verbose&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10;e++){if(verbose&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;verbose&&(h=this.stackID(u)+" -> ")}for(let e of s.recoverByInsert(a))verbose&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),verbose&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),pushStackDedup(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(stackIDs||(stackIDs=new WeakMap)).get(e);return t||stackIDs.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function pushStackDedup(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class Dialect{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const id=e=>e;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let s=0;s<e.repeatNodeCount;s++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let s=0;s<t.length;s++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let s of e.nodeProps){let e=s[0];"string"==typeof e&&(e=NodeProp[e]);for(let t=1;t<s.length;){let n=s[t++];if(n>=0)i(n,e,s[t++]);else{let r=s[t+-n];for(let o=-n;o>0;o--)i(s[t++],e,r);t++}}}this.nodeSet=new NodeSet(t.map(((t,i)=>NodeType.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let o=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new TokenGroup(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new Parse(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return pair(n,o+2);break}i=n[o=pair(n,o+2)]}if(i==t||0==i)return pair(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=pair(this.data,n+2)}if(t==pair(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=pair(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,r)=>{let i=e.specializers.find((e=>e.from==n.external));if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return t.specializers[r]=getSpecializer(o),o}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(n[e]=!0)}let r=null;for(let i=0;i<t.length;i++)if(!n[i])for(let e,n=this.dialects[t[i]];65535!=(e=this.data[n++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[e]=1;return new Dialect(e,n,r)}static deserialize(e){return new LRParser(e)}}function pair(e,t){return e[t]|e[t+1]<<16}function findFinished(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}function getSpecializer(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}let nextTagID=0;class Tag{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=nextTagID++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Tag([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Modifier;return t=>t.modified.indexOf(e)>-1?t:Modifier.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&sameArray$1(t,n.modified)));if(n)return n;let r=[],i=new Tag(r,e,t);for(let s of t)s.instances.push(i);let o=powerSet(t);for(let s of e.set)if(!s.modified.length)for(let e of o)r.push(Modifier.get(s,e));return i}}function sameArray$1(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}function powerSet(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}function styleTags(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Rule(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return ruleNodeProp.add(t)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function tagHighlighter(e,t){let n=Object.create(null);for(let o of e)if(Array.isArray(o.tag))for(let e of o.tag)n[e.id]=o.class;else n[o.tag.id]=o.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function highlightTags(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function highlightTree(e,t,n,r=0,i=e.length){let o=new HighlightBuilder(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}Rule.empty=new Rule([],2,null);class HighlightBuilder{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=getStyleTags(e)||Rule.empty,u=highlightTags(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(e.from,l),c.opaque)return;let h=e.tree&&e.tree.prop(NodeProp.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,p=s;;d++){let f=d<h.overlay.length?h.overlay[d]:null,m=f?f.from+s:a,g=Math.max(t,p),_=Math.min(n,m);if(g<_&&u)for(;e.from<_&&(this.highlightRange(e,g,_,r,i),this.startSpan(Math.min(_,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>n)break;p=f.to+s,p>t&&(this.highlightRange(o.cursor(),Math.max(t,f.from+s),Math.min(n,p),r,c),this.startSpan(p,l))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}function getStyleTags(e){let t=e.type.prop(ruleNodeProp);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment:comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name,variableName:t(name),typeName:typeName,tagName:t(typeName),propertyName:propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal:literal,string:string,docString:t(string),character:t(string),attributeValue:t(string),number:number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword:keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator:operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation,separator:t(punctuation),bracket:bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content:content,heading:heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta:meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const printKeyword=1,indent=189,dedent=190,newline$1=191,newlineBracketed=192,newlineEmpty=193,eof=194,ParenL=22,ParenthesizedExpression=23,TupleExpression=47,ComprehensionExpression=48,BracketL=53,ArrayExpression=54,ArrayComprehensionExpression=55,BraceL=57,DictionaryExpression=58,DictionaryComprehensionExpression=59,SetExpression=60,SetComprehensionExpression=61,ArgList=63,subscript=230,FormatReplacement=71,importList=255,ParamList=121,SequencePattern=142,MappingPattern=143,PatternArgList=146,newline$2=10,carriageReturn=13,space$1=32,tab=9,hash=35,parenOpen=40,dot=46,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,DictionaryExpression,DictionaryComprehensionExpression,FormatReplacement,SequencePattern,MappingPattern,PatternArgList]),newlines=new ExternalTokenizer(((e,t)=>{if(e.next<0)e.acceptToken(eof);else if(e.next!=newline$2&&e.next!=carriageReturn);else if(t.context.depth<0)e.acceptToken(newlineBracketed,1);else{e.advance();let t=0;for(;e.next==space$1||e.next==tab;)e.advance(),t++;let n=e.next==newline$2||e.next==carriageReturn||e.next==hash;e.acceptToken(n?newlineEmpty:newline$1,-t)}}),{contextual:!0,fallback:!0}),indentation=new ExternalTokenizer(((e,t)=>{let n=t.context.depth;if(n<0)return;let r=e.peek(-1);if((r==newline$2||r==carriageReturn)&&t.context.depth>=0){let t=0,r=0;for(;;){if(e.next==space$1)t++;else{if(e.next!=tab)break;t+=8-t%8}e.advance(),r++}t!=n&&e.next!=newline$2&&e.next!=carriageReturn&&e.next!=hash&&(t<n?e.acceptToken(dedent,-r):e.acceptToken(indent))}}));function IndentLevel(e,t){this.parent=e,this.depth=t,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)}const topIndent$1=new IndentLevel(null,0);function countIndent(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)==tab?8-t%8:1;return t}const trackIndent=new ContextTracker({start:topIndent$1,reduce:(e,t)=>e.depth<0&&bracketed.has(t)?e.parent:e,shift:(e,t,n,r)=>t==indent?new IndentLevel(e,countIndent(r.read(r.pos,n.pos))):t==dedent?e.parent:t==ParenL||t==BracketL||t==BraceL?new IndentLevel(e,-1):e,hash:e=>e.hash}),legacyPrint=new ExternalTokenizer((e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(n!=space$1&&n!=tab)return void(n!=parenOpen&&n!=dot&&n!=newline$2&&n!=carriageReturn&&n!=hash&&e.acceptToken(printKeyword))}})),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier$1={__proto__:null,await:40,or:50,and:52,in:56,not:58,is:60,if:66,else:68,lambda:72,yield:90,from:92,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250,match:261,case:267},parser$1=LRParser.deserialize({version:14,states:"!L`O`Q$IXOOO%fQ$I[O'#G|OOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'UQ$IWO'#ClO(wQ$I[O'#G{OOQ$IS'#G|'#G|OOQ$IS'#DS'#DSOOQ$IS'#G{'#G{O)eQ$IWO'#CsO)uQ$IWO'#DdO*VQ$IWO'#DhOOQ$IS'#Ds'#DsO*jO`O'#DsO*rOpO'#DsO*zO!bO'#DtO+VO#tO'#DtO+bO&jO'#DtO+mO,UO'#DtO-oQ$I[O'#GmOOQ$IS'#Gm'#GmO'UQ$IWO'#GlO/RQ$I[O'#GlOOQ$IS'#E]'#E]O/jQ$IWO'#E^OOQ$IS'#Gk'#GkO/tQ$IWO'#GjOOQ$IV'#Gj'#GjO0PQ$IWO'#FPOOQ$IS'#GX'#GXO0UQ$IWO'#FOOOQ$IV'#Hx'#HxOOQ$IV'#Gi'#GiOOQ$IT'#Fh'#FhQ`Q$IXOOO'UQ$IWO'#CoO0dQ$IWO'#C{O0kQ$IWO'#DPO0yQ$IWO'#HQO1ZQ$I[O'#EQO'UQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1oQ$IWO'#EZO2VQ$IWO'#E_O0PQ$IWO'#EaO2jQ$I[O'#EaO0PQ$IWO'#EdO/jQ$IWO'#EgO/jQ$IWO'#EkO/jQ$IWO'#EnO2uQ$IWO'#EpO2|Q$IWO'#EuO3XQ$IWO'#EqO/jQ$IWO'#EuO0PQ$IWO'#EwO0PQ$IWO'#E|O3^Q$IWO'#FROOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O3eQ$IWO'#DmOOQ$IS,5:W,5:WO3xQ$IWO'#H[OOQ$IS,5:Z,5:ZO4VQ%1`O,5:ZO4[Q$I[O,59WO0dQ$IWO,59`O0dQ$IWO,59`O0dQ$IWO,59`O6zQ$IWO,59`O7PQ$IWO,59`O7WQ$IWO,59hO7_Q$IWO'#G{O8eQ$IWO'#GzOOQ$IS'#Gz'#GzOOQ$IS'#DY'#DYO8|Q$IWO,59_O'UQ$IWO,59_O9[Q$IWO,59_O9aQ$IWO,5:PO'UQ$IWO,5:POOQ$IS,5:O,5:OO9oQ$IWO,5:OO9tQ$IWO,5:VO'UQ$IWO,5:VO'UQ$IWO,5:TOOQ$IS,5:S,5:SO:VQ$IWO,5:SO:[Q$IWO,5:UOOOO'#Fp'#FpO:aO`O,5:_OOQ$IS,5:_,5:_OOOO'#Fq'#FqO:iOpO,5:_O:qQ$IWO'#DuOOOO'#Fr'#FrO;RO!bO,5:`OOQ$IS,5:`,5:`OOOO'#Fu'#FuO;^O#tO,5:`OOOO'#Fv'#FvO;iO&jO,5:`OOOO'#Fw'#FwO;tO,UO,5:`OOQ$IS'#Fx'#FxO<PQ$I[O,5:dO>qQ$I[O,5=WO?[Q%GlO,5=WO?{Q$I[O,5=WOOQ$IS,5:x,5:xO@dQ$IXO'#GQOAsQ$IWO,5;TOOQ$IV,5=U,5=UOBOQ$I[O'#HtOBgQ$IWO,5;kOOQ$IS-E:V-E:VOOQ$IV,5;j,5;jO3SQ$IWO'#EwOOQ$IT-E9f-E9fOBoQ$I[O,59ZODvQ$I[O,59gOEaQ$IWO'#G}OElQ$IWO'#G}O0PQ$IWO'#G}OEwQ$IWO'#DROFPQ$IWO,59kOFUQ$IWO'#HRO'UQ$IWO'#HRO/jQ$IWO,5=lOOQ$IS,5=l,5=lO/jQ$IWO'#D|OOQ$IS'#D}'#D}OFsQ$IWO'#FzOGTQ$IWO,58zOGTQ$IWO,58zO)hQ$IWO,5:jOGcQ$I[O'#HTOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGvQ$IWO,5:yOHXQ$IWO,5:{OOQ$IS'#F}'#F}OHgQ$I[O,5:{OHuQ$IWO,5:{OHzQ$IWO'#HwOOQ$IS,5;O,5;OOIYQ$IWO'#HsOOQ$IS,5;R,5;RO3XQ$IWO,5;VO3XQ$IWO,5;YOIkQ$I[O'#HyO'UQ$IWO'#HyOIuQ$IWO,5;[O2uQ$IWO,5;[O/jQ$IWO,5;aO0PQ$IWO,5;cOIzQ$IXO'#ElOKTQ$IZO,5;]ONiQ$IWO'#HzO3XQ$IWO,5;aONtQ$IWO,5;cONyQ$IWO,5;hO! RQ$I[O,5;mO'UQ$IWO,5;mO!#uQ$I[O1G.hO!#|Q$I[O1G.hO!&mQ$I[O1G.hO!&wQ$I[O1G.hO!)bQ$I[O1G.hO!)uQ$I[O1G.hO!*YQ$IWO'#HZO!*hQ$I[O'#GmO/jQ$IWO'#HZO!*rQ$IWO'#HYOOQ$IS,5:X,5:XO!*zQ$IWO,5:XO!+PQ$IWO'#H]O!+[Q$IWO'#H]O!+oQ$IWO,5=vOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.z1G.zO!,oQ$I[O1G.zO!,vQ$I[O1G.zO0dQ$IWO1G.zO!-cQ$IWO1G/SOOQ$IS'#DX'#DXO/jQ$IWO,59rOOQ$IS1G.y1G.yO!-jQ$IWO1G/cO!-zQ$IWO1G/cO!.SQ$IWO1G/dO'UQ$IWO'#HSO!.XQ$IWO'#HSO!.^Q$I[O1G.yO!.nQ$IWO,59gO!/tQ$IWO,5=rO!0UQ$IWO,5=rO!0^Q$IWO1G/kO!0cQ$I[O1G/kOOQ$IS1G/j1G/jO!0sQ$IWO,5=mO!1jQ$IWO,5=mO/jQ$IWO1G/oO!2XQ$IWO1G/qO!2^Q$I[O1G/qO!2nQ$I[O1G/oOOQ$IS1G/n1G/nOOQ$IS1G/p1G/pOOOO-E9n-E9nOOQ$IS1G/y1G/yOOOO-E9o-E9oO!3OQ$IWO'#HhO/jQ$IWO'#HhO!3^Q$IWO,5:aOOOO-E9p-E9pOOQ$IS1G/z1G/zOOOO-E9s-E9sOOOO-E9t-E9tOOOO-E9u-E9uOOQ$IS-E9v-E9vO!3iQ%GlO1G2rO!4YQ$I[O1G2rO'UQ$IWO,5<eOOQ$IS,5<e,5<eOOQ$IS-E9w-E9wOOQ$IS,5<l,5<lOOQ$IS-E:O-E:OOOQ$IV1G0o1G0oO0PQ$IWO'#F|O!4qQ$I[O,5>`OOQ$IS1G1V1G1VO!5YQ$IWO1G1VOOQ$IS'#DT'#DTO/jQ$IWO,5=iOOQ$IS,5=i,5=iO!5_Q$IWO'#FiO!5jQ$IWO,59mO!5rQ$IWO1G/VO!5|Q$I[O,5=mOOQ$IS1G3W1G3WOOQ$IS,5:h,5:hO!6mQ$IWO'#GlOOQ$IS,5<f,5<fOOQ$IS-E9x-E9xO!7OQ$IWO1G.fOOQ$IS1G0U1G0UO!7^Q$IWO,5=oO!7nQ$IWO,5=oO/jQ$IWO1G0eO/jQ$IWO1G0eO0PQ$IWO1G0gOOQ$IS-E9{-E9{O!8PQ$IWO1G0gO!8[Q$IWO1G0gO!8aQ$IWO,5>cO!8oQ$IWO,5>cO!8}Q$IWO,5>_O!9eQ$IWO,5>_O!9vQ$IZO1G0qO!=XQ$IZO1G0tO!@gQ$IWO,5>eO!@qQ$IWO,5>eO!@yQ$I[O,5>eO/jQ$IWO1G0vO!ATQ$IWO1G0vO3XQ$IWO1G0{ONtQ$IWO1G0}OOQ$IV,5;W,5;WO!AYQ$IYO,5;WO!A_Q$IZO1G0wO!DsQ$IWO'#GUO3XQ$IWO1G0wO3XQ$IWO1G0wO!EQQ$IWO,5>fO!E_Q$IWO,5>fO0PQ$IWO,5>fOOQ$IV1G0{1G0{O!EgQ$IWO'#EyO!ExQ%1`O1G0}OOQ$IV1G1S1G1SO3XQ$IWO1G1SO!FQQ$IWO'#FTOOQ$IV1G1X1G1XO! RQ$I[O1G1XOOQ$IS,5=u,5=uOOQ$IS'#Dn'#DnO/jQ$IWO,5=uO!FVQ$IWO,5=tO!FjQ$IWO,5=tOOQ$IS1G/s1G/sO!FrQ$IWO,5=wO!GSQ$IWO,5=wO!G[Q$IWO,5=wO!GoQ$IWO,5=wO!HPQ$IWO,5=wOOQ$IS1G3b1G3bOOQ$IS7+$f7+$fO!5rQ$IWO7+$nO!IrQ$IWO1G.zO!IyQ$IWO1G.zOOQ$IS1G/^1G/^OOQ$IS,5<V,5<VO'UQ$IWO,5<VOOQ$IS7+$}7+$}O!JQQ$IWO7+$}OOQ$IS-E9i-E9iOOQ$IS7+%O7+%OO!JbQ$IWO,5=nO'UQ$IWO,5=nOOQ$IS7+$e7+$eO!JgQ$IWO7+$}O!JoQ$IWO7+%OO!JtQ$IWO1G3^OOQ$IS7+%V7+%VO!KUQ$IWO1G3^O!K^Q$IWO7+%VOOQ$IS,5<U,5<UO'UQ$IWO,5<UO!KcQ$IWO1G3XOOQ$IS-E9h-E9hO!LYQ$IWO7+%ZOOQ$IS7+%]7+%]O!LhQ$IWO1G3XO!MVQ$IWO7+%]O!M[Q$IWO1G3_O!MlQ$IWO1G3_O!MtQ$IWO7+%ZO!MyQ$IWO,5>SO!NaQ$IWO,5>SO!NaQ$IWO,5>SO!NoO!LQO'#DwO!NzOSO'#HiOOOO1G/{1G/{O# PQ$IWO1G/{O# XQ%GlO7+(^O# xQ$I[O1G2PP#!cQ$IWO'#FyOOQ$IS,5<h,5<hOOQ$IS-E9z-E9zOOQ$IS7+&q7+&qOOQ$IS1G3T1G3TOOQ$IS,5<T,5<TOOQ$IS-E9g-E9gOOQ$IS7+$q7+$qO#!pQ$IWO,5=WO##ZQ$IWO,5=WO##lQ$I[O,5<WO#$PQ$IWO1G3ZOOQ$IS-E9j-E9jOOQ$IS7+&P7+&PO#$aQ$IWO7+&POOQ$IS7+&R7+&RO#$oQ$IWO'#HvO0PQ$IWO'#HuO#%TQ$IWO7+&ROOQ$IS,5<k,5<kO#%`Q$IWO1G3}OOQ$IS-E9}-E9}OOQ$IS,5<g,5<gO#%nQ$IWO1G3yOOQ$IS-E9y-E9yO#&UQ$IZO7+&]O!DsQ$IWO'#GSO3XQ$IWO7+&]O3XQ$IWO7+&`O#)gQ$I[O,5<oO'UQ$IWO,5<oO#)qQ$IWO1G4POOQ$IS-E:R-E:RO#){Q$IWO1G4PO3XQ$IWO7+&bO/jQ$IWO7+&bOOQ$IV7+&g7+&gO!ExQ%1`O7+&iO#*TQ$IXO1G0rOOQ$IV-E:S-E:SO3XQ$IWO7+&cO3XQ$IWO7+&cOOQ$IV,5<p,5<pO#+yQ$IWO,5<pOOQ$IV7+&c7+&cO#,UQ$IZO7+&cO#/dQ$IWO,5<qO#/oQ$IWO1G4QOOQ$IS-E:T-E:TO#/|Q$IWO1G4QO#0UQ$IWO'#H|O#0dQ$IWO'#H|O0PQ$IWO'#H|OOQ$IS'#H|'#H|O#0oQ$IWO'#H{OOQ$IS,5;e,5;eO#0wQ$IWO,5;eO/jQ$IWO'#E{OOQ$IV7+&i7+&iO3XQ$IWO7+&iOOQ$IV7+&n7+&nO#0|Q$IYO,5;oOOQ$IV7+&s7+&sOOQ$IS1G3a1G3aOOQ$IS,5<Y,5<YO#1RQ$IWO1G3`OOQ$IS-E9l-E9lO#1fQ$IWO,5<ZO#1qQ$IWO,5<ZO#2UQ$IWO1G3cOOQ$IS-E9m-E9mO#2fQ$IWO1G3cO#2nQ$IWO1G3cO#3OQ$IWO1G3cO#2fQ$IWO1G3cOOQ$IS<<HY<<HYO#3ZQ$I[O1G1qOOQ$IS<<Hi<<HiP#3hQ$IWO'#FkO7WQ$IWO1G3YO#3uQ$IWO1G3YO#3zQ$IWO<<HiOOQ$IS<<Hj<<HjO#4[Q$IWO7+(xOOQ$IS<<Hq<<HqO#4lQ$I[O1G1pP#5]Q$IWO'#FjO#5jQ$IWO7+(yO#5zQ$IWO7+(yO#6SQ$IWO<<HuO#6XQ$IWO7+(sOOQ$IS<<Hw<<HwO#7OQ$IWO,5<XO'UQ$IWO,5<XOOQ$IS-E9k-E9kOOQ$IS<<Hu<<HuOOQ$IS,5<_,5<_O/jQ$IWO,5<_O#7TQ$IWO1G3nOOQ$IS-E9q-E9qO#7kQ$IWO1G3nOOOO'#Ft'#FtO#7yO!LQO,5:cOOOO,5>T,5>TOOOO7+%g7+%gO#8UQ$IWO1G2rO#8oQ$IWO1G2rP'UQ$IWO'#FlO/jQ$IWO<<IkO#9QQ$IWO,5>bO#9cQ$IWO,5>bO0PQ$IWO,5>bO#9tQ$IWO,5>aOOQ$IS<<Im<<ImP0PQ$IWO'#GPP/jQ$IWO'#F{OOQ$IV-E:Q-E:QO3XQ$IWO<<IwOOQ$IV,5<n,5<nO3XQ$IWO,5<nOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#9yQ$I[O1G2ZP#:TQ$IWO'#GTO#:[Q$IWO7+)kO#:fQ$IZO<<I|O3XQ$IWO<<I|OOQ$IV<<JT<<JTO3XQ$IWO<<JTOOQ$IV'#GR'#GRO#=tQ$IZO7+&^OOQ$IV<<I}<<I}O#?pQ$IZO<<I}OOQ$IV1G2[1G2[O0PQ$IWO1G2[O3XQ$IWO<<I}O0PQ$IWO1G2]P/jQ$IWO'#GVO#COQ$IWO7+)lO#C]Q$IWO7+)lOOQ$IS'#Ez'#EzO/jQ$IWO,5>hO#CeQ$IWO,5>hOOQ$IS,5>h,5>hO#CpQ$IWO,5>gO#DRQ$IWO,5>gOOQ$IS1G1P1G1POOQ$IS,5;g,5;gO#DZQ$IWO1G1ZP#D`Q$IWO'#FnO#DpQ$IWO1G1uO#ETQ$IWO1G1uO#EeQ$IWO1G1uP#EpQ$IWO'#FoO#E}Q$IWO7+(}O#F_Q$IWO7+(}O#F_Q$IWO7+(}O#FgQ$IWO7+(}O#FwQ$IWO7+(tO7WQ$IWO7+(tOOQ$ISAN>TAN>TO#GbQ$IWO<<LeOOQ$ISAN>aAN>aO/jQ$IWO1G1sO#GrQ$I[O1G1sP#G|Q$IWO'#FmOOQ$IS1G1y1G1yP#HZQ$IWO'#FsO#HhQ$IWO7+)YOOOO-E9r-E9rO#IOQ$IWO7+(^OOQ$ISAN?VAN?VO#IiQ$IWO,5<jO#I}Q$IWO1G3|OOQ$IS-E9|-E9|O#J`Q$IWO1G3|OOQ$IS1G3{1G3{OOQ$IVAN?cAN?cOOQ$IV1G2Y1G2YO3XQ$IWOAN?hO#JqQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E:P-E:POOQ$IV<<Ix<<IxO3XQ$IWOAN?iO3XQ$IWO7+'vOOQ$IVAN?iAN?iOOQ$IS7+'w7+'wO#NPQ$IWO<<MWOOQ$IS1G4S1G4SO/jQ$IWO1G4SOOQ$IS,5<r,5<rO#N^Q$IWO1G4ROOQ$IS-E:U-E:UOOQ$IU'#GY'#GYO#NoQ$IYO7+&uO#NzQ$IWO'#FUO$ rQ$IWO7+'aO$!SQ$IWO7+'aOOQ$IS7+'a7+'aO$!_Q$IWO<<LiO$!oQ$IWO<<LiO$!oQ$IWO<<LiO$!wQ$IWO'#HUOOQ$IS<<L`<<L`O$#RQ$IWO<<L`OOQ$IS7+'_7+'_O0PQ$IWO1G2UP0PQ$IWO'#GOO$#lQ$IWO7+)hO$#}Q$IWO7+)hOOQ$IVG25SG25SO3XQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<Kb<<KbOOQ$IS7+)n7+)nP$$`Q$IWO'#GWOOQ$IU-E:W-E:WOOQ$IV<<Ja<<JaO$%SQ$I[O'#FWOOQ$IS'#FY'#FYO$%dQ$IWO'#FXO$&UQ$IWO'#FXOOQ$IS'#FX'#FXO$&ZQ$IWO'#IOO#NzQ$IWO'#F`O#NzQ$IWO'#F`O$&rQ$IWO'#FaO#NzQ$IWO'#FbO$&yQ$IWO'#IPOOQ$IS'#IP'#IPO$'hQ$IWO,5;pOOQ$IS<<J{<<J{O$'pQ$IWO<<J{O$(QQ$IWOANBTO$(bQ$IWOANBTO$(jQ$IWO'#HVOOQ$IS'#HV'#HVO0kQ$IWO'#DaO$)TQ$IWO,5=pOOQ$ISANAzANAzOOQ$IS7+'p7+'pO$)lQ$IWO<<MSOOQ$IVLD*nLD*nO4VQ%1`O'#G[O$)}Q$I[O,5;yO#NzQ$IWO'#FdOOQ$IS,5;},5;}OOQ$IS'#FZ'#FZO$*oQ$IWO,5;sO$*tQ$IWO,5;sOOQ$IS'#F^'#F^O#NzQ$IWO'#GZO$+fQ$IWO,5;wO$,QQ$IWO,5>jO$,bQ$IWO,5>jO0PQ$IWO,5;vO$,sQ$IWO,5;zO$,xQ$IWO,5;zO#NzQ$IWO'#IQO$,}Q$IWO'#IQO$-SQ$IWO,5;{OOQ$IS,5;|,5;|O'UQ$IWO'#FgOOQ$IU1G1[1G1[O3XQ$IWO1G1[OOQ$ISAN@gAN@gO$-XQ$IWOG27oO$-iQ$IWO,59{OOQ$IS1G3[1G3[OOQ$IS,5<v,5<vOOQ$IS-E:Y-E:YO$-nQ$I[O'#FWO$-uQ$IWO'#IRO$.TQ$IWO'#IRO$.]Q$IWO,5<OOOQ$IS1G1_1G1_O$.bQ$IWO1G1_O$.gQ$IWO,5<uOOQ$IS-E:X-E:XO$/RQ$IWO,5<yO$/jQ$IWO1G4UOOQ$IS-E:]-E:]OOQ$IS1G1b1G1bOOQ$IS1G1f1G1fO$/zQ$IWO,5>lO#NzQ$IWO,5>lOOQ$IS1G1g1G1gO$0YQ$I[O,5<ROOQ$IU7+&v7+&vO$!wQ$IWO1G/gO#NzQ$IWO,5<PO$0aQ$IWO,5>mO$0hQ$IWO,5>mOOQ$IS1G1j1G1jOOQ$IS7+&y7+&yP#NzQ$IWO'#G_O$0pQ$IWO1G4WO$0zQ$IWO1G4WO$1SQ$IWO1G4WOOQ$IS7+%R7+%RO$1bQ$IWO1G1kO$1pQ$I[O'#FWO$1wQ$IWO,5<xOOQ$IS,5<x,5<xO$2VQ$IWO1G4XOOQ$IS-E:[-E:[O#NzQ$IWO,5<wO$2^Q$IWO,5<wO$2cQ$IWO7+)rOOQ$IS-E:Z-E:ZO$2mQ$IWO7+)rO#NzQ$IWO,5<QP#NzQ$IWO'#G^O$2uQ$IWO1G2cO#NzQ$IWO1G2cP$3TQ$IWO'#G]O$3[Q$IWO<<M^O$3fQ$IWO1G1lO$3tQ$IWO7+'}O7WQ$IWO'#C{O7WQ$IWO,59`O7WQ$IWO,59`O7WQ$IWO,59`O$4SQ$I[O,5=WO7WQ$IWO1G.zO/jQ$IWO1G/VO/jQ$IWO7+$nP$4gQ$IWO'#FyO'UQ$IWO'#GlO$4tQ$IWO,59`O$4yQ$IWO,59`O$5QQ$IWO,59kO$5VQ$IWO1G/SO0kQ$IWO'#DPO7WQ$IWO,59h",stateData:"$5m~O%[OS%XOS%WOSQOS~OPhOTeOdsOfXOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%VqO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~OT!bO]!bO_!cOf!jO!V!lO!d!nO%b!]O%c!^O%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bO~Oi%pXj%pXk%pXl%pXm%pXn%pXq%pXx%pXy%pX!s%pX#^%pX%V%pX%Y%pX%r%pXe%pX!R%pX!S%pX%s%pX!U%pX!Y%pX!O%pX#V%pXr%pX!j%pX~P$bOdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~Ox%oXy%oX#^%oX%V%oX%Y%oX%r%oX~Oi!qOj!rOk!pOl!pOm!sOn!tOq!uO!s%oX~P(cOT!{Om/iOt/wO}vO~P'UOT#OOm/iOt/wO!U#PO~P'UOT#SO_#TOm/iOt/wO!Y#UO~P'UO&T#XO&U#ZO~O&W#[O&X#ZO~O!Z#^O&Z#_O&_#aO~O!Z#^O&a#bO&b#aO~O!Z#^O&U#aO&d#dO~O!Z#^O&X#aO&f#fO~OT%aX]%aX_%aXf%aXi%aXj%aXk%aXl%aXm%aXn%aXq%aXx%aX!V%aX!d%aX%b%aX%c%aX%d%aX%e%aX%f%aX%g%aX%h%aX%i%aX%j%aX%k%aXe%aX!R%aX!S%aX~O&R[O&S]O&V^O&Y_O&``O&caO&ebOy%aX!s%aX#^%aX%V%aX%Y%aX%r%aX%s%aX!U%aX!Y%aX!O%aX#V%aXr%aX!j%aX~P+xOx#kOy%`X!s%`X#^%`X%V%`X%Y%`X%r%`X~Om/iOt/wO~P'UO#^#nO%V#pO%Y#pO~O%mVO~O!R#uO#l!YO#q!ZO#tlO~OmtO~P'UOT#zO_#{O%mVOyuP~OT$POm/iOt/wO!O$QO~P'UOy$SO!s$XO%r$TO#^!tX%V!tX%Y!tX~OT$POm/iOt/wO#^!}X%V!}X%Y!}X~P'UOm/iOt/wO#^#RX%V#RX%Y#RX~P'UO!d$_O!m$_O%mVO~OT$iO~P'UO!S$kO#j$lO#l$mO~Oy$nO~OT$uO~P'UOT%OO_%OOe%QOm/iOt/wO~P'UOm/iOt/wOy%TO~P'UO&Q%VO~O_!cOf!jO!V!lO!d!nOT`a]`ai`aj`ak`al`am`an`aq`ax`ay`a!s`a#^`a%V`a%Y`a%b`a%c`a%d`a%e`a%f`a%g`a%h`a%i`a%j`a%k`a%r`ae`a!R`a!S`a%s`a!U`a!Y`a!O`a#V`ar`a!j`a~Ol%[O~Om%[O~P'UOm/iO~P'UOi/kOj/lOk/jOl/jOm/sOn/tOq/xOe%oX!R%oX!S%oX%s%oX!U%oX!Y%oX!O%oX#V%oX!j%oX~P(cO%s%^Oe%nXx%nX!R%nX!S%nX!U%nXy%nX~Oe%`Ox%aO!R%eO!S%dO~Oe%`O~Ox%hO!R%eO!S%dO!U%zX~O!U%lO~Ox%mOy%oO!R%eO!S%dO!Y%uX~O!Y%sO~O!Y%tO~O&T#XO&U%vO~O&W#[O&X%vO~OT%yOm/iOt/wO}vO~P'UO!Z#^O&Z#_O&_%|O~O!Z#^O&a#bO&b%|O~O!Z#^O&U%|O&d#dO~O!Z#^O&X%|O&f#fO~OT!la]!la_!laf!lai!laj!lak!lal!lam!lan!laq!lax!lay!la!V!la!d!la!s!la#^!la%V!la%Y!la%b!la%c!la%d!la%e!la%f!la%g!la%h!la%i!la%j!la%k!la%r!lae!la!R!la!S!la%s!la!U!la!Y!la!O!la#V!lar!la!j!la~P#yOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOmtOtuOy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P'UOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$tX%V$tX%Y$tX~P'UO#^#nO%V&YO%Y&YO~O!d&ZOf&hX%V&hX#V&hX#^&hX%Y&hX#U&hX~Of!jO%V&]O~Oicajcakcalcamcancaqcaxcayca!sca#^ca%Vca%Yca%rcaeca!Rca!Sca%sca!Uca!Yca!Oca#Vcarca!jca~P$bOqoaxoayoa#^oa%Voa%Yoa%roa~Oi!qOj!rOk!pOl!pOm!sOn!tO!soa~PD_O%r&_Ox%qXy%qX~O%mVOx%qXy%qX~Ox&bOyuX~Oy&dO~Ox%mO#^%uX%V%uX%Y%uXe%uXy%uX!Y%uX!j%uX%r%uX~OT/rOm/iOt/wO}vO~P'UO%r$TO#^Sa%VSa%YSa~Ox&mO#^%wX%V%wX%Y%wXl%wX~P$bOx&pO!O&oO#^#Ra%V#Ra%Y#Ra~O#V&qO#^#Ta%V#Ta%Y#Ta~O!d$_O!m$_O#U&sO%mVO~O#U&sO~Ox&uO#^&kX%V&kX%Y&kX~Ox&wO#^&gX%V&gX%Y&gXy&gX~Ox&{Ol&mX~P$bOl'OO~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO%V'TO~P'UOr'XO#g'VO#h'WOP#eaT#ead#eaf#eam#eaq#eat#ea}#ea!O#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea#v#ea%S#ea%V#ea%g#ea%h#ea%l#ea%m#ea&R#ea&S#ea&V#ea&Y#ea&`#ea&c#ea&e#ea%U#ea%Y#ea~Ox'YO#V'[Oy&nX~Of'^O~Of!jOy$nO~Oy'bO~P$bOT!bO]!bO_!cOf!jO!V!lO!d!nO%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%c!^O~P! YO%cUi~P! YOT!bO]!bO_!cOf!jO!V!lO!d!nO%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%e!`O%f!`O~P!$TO%eUi%fUi~P!$TO_!cOf!jO!V!lO!d!nOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%eUi%fUi%gUi%hUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~OT!bO]!bO%i!bO%j!bO%k!bO~P!'ROTUi]Ui%iUi%jUi%kUi~P!'RO!R%eO!S%dOe%}Xx%}X~O%r'fO%s'fO~P+xOx'hOe%|X~Oe'jO~Ox'kOy'mO!U&PX~Om/iOt/wOx'kOy'nO!U&PX~P'UO!U'pO~Ok!pOl!pOm!sOn!tOihiqhixhiyhi!shi#^hi%Vhi%Yhi%rhi~Oj!rO~P!+tOjhi~P!+tOi/kOj/lOk/jOl/jOm/sOn/tO~Or'rO~P!,}OT'wOe'xOm/iOt/wO~P'UOe'xOx'yO~Oe'{O~O!S'}O~Oe(OOx'yO!R%eO!S%dO~P$bOi/kOj/lOk/jOl/jOm/sOn/tOeoa!Roa!Soa%soa!Uoa!Yoa!Ooa#Voaroa!joa~PD_OT'wOm/iOt/wO!U%za~P'UOx(RO!U%za~O!U(SO~Ox(RO!R%eO!S%dO!U%za~P$bOT(WOm/iOt/wO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~P'UOx(XO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~O!Y([O~Ox(XO!R%eO!S%dO!Y%ua~P$bOx(_O!R%eO!S%dO!Y%{a~P$bOx(bOy&[X!Y&[X!j&[X~Oy(eO!Y(gO!j(hO~OT&TOmtOtuOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~P'UOx(iOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~O!d&ZOf&ha%V&ha#V&ha#^&ha%Y&ha#U&ha~O%V(nO~OT#zO_#{O%mVO~Ox&bOyua~OmtOtuO~P'UOx(XO#^%ua%V%ua%Y%uae%uay%ua!Y%ua!j%ua%r%ua~P$bOx(sO#^%`X%V%`X%Y%`X%r%`X~O%r$TO#^Si%VSi%YSi~O#^%wa%V%wa%Y%wal%wa~P'UOx(vO#^%wa%V%wa%Y%wal%wa~OT(zOf(|O%mVO~O#U(}O~O%mVO#^&ka%V&ka%Y&ka~Ox)PO#^&ka%V&ka%Y&ka~Om/iOt/wO#^&ga%V&ga%Y&gay&ga~P'UOx)SO#^&ga%V&ga%Y&gay&ga~Or)WO#a)VOP#_iT#_id#_if#_im#_iq#_it#_i}#_i!O#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i#v#_i%S#_i%V#_i%g#_i%h#_i%l#_i%m#_i&R#_i&S#_i&V#_i&Y#_i&`#_i&c#_i&e#_i%U#_i%Y#_i~Or)XOP#biT#bid#bif#bim#biq#bit#bi}#bi!O#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi#v#bi%S#bi%V#bi%g#bi%h#bi%l#bi%m#bi&R#bi&S#bi&V#bi&Y#bi&`#bi&c#bi&e#bi%U#bi%Y#bi~OT)ZOl&ma~P'UOx)[Ol&ma~Ox)[Ol&ma~P$bOl)`O~O%T)cO~Or)fO#g'VO#h)eOP#eiT#eid#eif#eim#eiq#eit#ei}#ei!O#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei#v#ei%S#ei%V#ei%g#ei%h#ei%l#ei%m#ei&R#ei&S#ei&V#ei&Y#ei&`#ei&c#ei&e#ei%U#ei%Y#ei~Om/iOt/wOy$nO~P'UOm/iOt/wOy&na~P'UOx)lOy&na~OT)pO_)qOe)tO%i)rO%mVO~Oy$nO&q)vO~O%V)zO~OT%OO_%OOm/iOt/wOe%|a~P'UOx*OOe%|a~Om/iOt/wOy*RO!U&Pa~P'UOx*SO!U&Pa~Om/iOt/wOx*SOy*VO!U&Pa~P'UOm/iOt/wOx*SO!U&Pa~P'UOx*SOy*VO!U&Pa~Ok/jOl/jOm/sOn/tOehiihiqhixhi!Rhi!Shi%shi!Uhiyhi!Yhi#^hi%Vhi%Yhi!Ohi#Vhirhi!jhi%rhi~Oj/lO~P!H[Ojhi~P!H[OT'wOe*[Om/iOt/wO~P'UOl*^O~Oe*[Ox*`O~Oe*aO~OT'wOm/iOt/wO!U%zi~P'UOx*bO!U%zi~O!U*cO~OT(WOm/iOt/wO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~P'UOx*fO!R%eO!S%dO!Y%{i~Ox*iO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~O!Y*jO~O_*lOm/iOt/wO!Y%{i~P'UOx*fO!Y%{i~O!Y*nO~OT*pOm/iOt/wOy&[a!Y&[a!j&[a~P'UOx*qOy&[a!Y&[a!j&[a~O!Z#^O&^*tO!Y!kX~O!Y*vO~Oy(eO!Y*wO~OT&TOmtOtuOy%`q!s%`q#^%`q%V%`q%Y%`q%r%`q~P'UOx$miy$mi!s$mi#^$mi%V$mi%Y$mi%r$mi~P$bOT&TOmtOtuO~P'UOT&TOm/iOt/wO#^%`a%V%`a%Y%`a%r%`a~P'UOx*xO#^%`a%V%`a%Y%`a%r%`a~Ox$`a#^$`a%V$`a%Y$`al$`a~P$bO#^%wi%V%wi%Y%wil%wi~P'UOx*{O#^#Rq%V#Rq%Y#Rq~Ox*|O#V+OO#^&jX%V&jX%Y&jXe&jX~OT+QOf(|O%mVO~O%mVO#^&ki%V&ki%Y&ki~Om/iOt/wO#^&gi%V&gi%Y&giy&gi~P'UOr+UO#a)VOP#_qT#_qd#_qf#_qm#_qq#_qt#_q}#_q!O#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q#v#_q%S#_q%V#_q%g#_q%h#_q%l#_q%m#_q&R#_q&S#_q&V#_q&Y#_q&`#_q&c#_q&e#_q%U#_q%Y#_q~Ol$wax$wa~P$bOT)ZOl&mi~P'UOx+]Ol&mi~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O~P'UOx+gOy$nO#V+gO~O#h+hOP#eqT#eqd#eqf#eqm#eqq#eqt#eq}#eq!O#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq#v#eq%S#eq%V#eq%g#eq%h#eq%l#eq%m#eq&R#eq&S#eq&V#eq&Y#eq&`#eq&c#eq&e#eq%U#eq%Y#eq~O#V+iOx$yay$ya~Om/iOt/wOy&ni~P'UOx+kOy&ni~Oy$SO%r+mOe&pXx&pX~O%mVOe&pXx&pX~Ox+qOe&oX~Oe+sO~O%T+uO~OT%OO_%OOm/iOt/wOe%|i~P'UOy+wOx$ca!U$ca~Om/iOt/wOy+xOx$ca!U$ca~P'UOm/iOt/wOy*RO!U&Pi~P'UOx+{O!U&Pi~Om/iOt/wOx+{O!U&Pi~P'UOx+{Oy,OO!U&Pi~Oe$_ix$_i!U$_i~P$bOT'wOm/iOt/wO~P'UOl,QO~OT'wOe,ROm/iOt/wO~P'UOT'wOm/iOt/wO!U%zq~P'UOx$^i!Y$^i#^$^i%V$^i%Y$^ie$^iy$^i!j$^i%r$^i~P$bOT(WOm/iOt/wO~P'UO_*lOm/iOt/wO!Y%{q~P'UOx,SO!Y%{q~O!Y,TO~OT(WOm/iOt/wO!Y%uq#^%uq%V%uq%Y%uqe%uqy%uq!j%uq%r%uq~P'UOy,UO~OT*pOm/iOt/wOy&[i!Y&[i!j&[i~P'UOx,ZOy&[i!Y&[i!j&[i~O!Z#^O&^*tO!Y!ka~OT&TOm/iOt/wO#^%`i%V%`i%Y%`i%r%`i~P'UOx,]O#^%`i%V%`i%Y%`i%r%`i~O%mVO#^&ja%V&ja%Y&jae&ja~Ox,`O#^&ja%V&ja%Y&jae&ja~Oe,cO~Ol$wix$wi~P$bOT)ZO~P'UOT)ZOl&mq~P'UOr,fOP#dyT#dyd#dyf#dym#dyq#dyt#dy}#dy!O#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy#v#dy%S#dy%V#dy%g#dy%h#dy%l#dy%m#dy&R#dy&S#dy&V#dy&Y#dy&`#dy&c#dy&e#dy%U#dy%Y#dy~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%U,jO%Y,jO~P'UO#h,kOP#eyT#eyd#eyf#eym#eyq#eyt#ey}#ey!O#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey#v#ey%S#ey%V#ey%g#ey%h#ey%l#ey%m#ey&R#ey&S#ey&V#ey&Y#ey&`#ey&c#ey&e#ey%U#ey%Y#ey~Om/iOt/wOy&nq~P'UOx,oOy&nq~O%r+mOe&pax&pa~OT)pO_)qO%i)rO%mVOe&oa~Ox,sOe&oa~O#y,wO~OT%OO_%OOm/iOt/wO~P'UOm/iOt/wOy,xOx$ci!U$ci~P'UOm/iOt/wOx$ci!U$ci~P'UOy,xOx$ci!U$ci~Om/iOt/wOy*RO~P'UOm/iOt/wOy*RO!U&Pq~P'UOx,{O!U&Pq~Om/iOt/wOx,{O!U&Pq~P'UOq-OO!R%eO!S%dOe%vq!U%vq!Y%vqx%vq~P!,}O_*lOm/iOt/wO!Y%{y~P'UOx$ai!Y$ai~P$bO_*lOm/iOt/wO~P'UOT*pOm/iOt/wO~P'UOT*pOm/iOt/wOy&[q!Y&[q!j&[q~P'UOT&TOm/iOt/wO#^%`q%V%`q%Y%`q%r%`q~P'UO#V-SOx$ra#^$ra%V$ra%Y$rae$ra~O%mVO#^&ji%V&ji%Y&jie&ji~Ox-UO#^&ji%V&ji%Y&jie&ji~Or-XOP#d!RT#d!Rd#d!Rf#d!Rm#d!Rq#d!Rt#d!R}#d!R!O#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R#v#d!R%S#d!R%V#d!R%g#d!R%h#d!R%l#d!R%m#d!R&R#d!R&S#d!R&V#d!R&Y#d!R&`#d!R&c#d!R&e#d!R%U#d!R%Y#d!R~Om/iOt/wOy&ny~P'UOT)pO_)qO%i)rO%mVOe&oi~O#y,wO%U-_O%Y-_O~OT-iOf-gO!V-fO!Z-hO!f-bO!n-dO!o-dO%h-aO%mVO&R[O&S]O&V^O~Om/iOt/wOx$cq!U$cq~P'UOy-nOx$cq!U$cq~Om/iOt/wOy*RO!U&Py~P'UOx-oO!U&Py~Om/iOt-sO~P'UOq-OO!R%eO!S%dOe%vy!U%vy!Y%vyx%vy~P!,}O%mVO#^&jq%V&jq%Y&jqe&jq~Ox-wO#^&jq%V&jq%Y&jqe&jq~OT)pO_)qO%i)rO%mVO~Of-{O!d-yOx#zX#V#zX%b#zXe#zX~Oq#zXy#zX!U#zX!Y#zX~P$$nO%g-}O%h-}Oq#{Xx#{Xy#{X#V#{X%b#{X!U#{Xe#{X!Y#{X~O!f.PO~Ox.TO#V.VO%b.QOq&rXy&rX!U&rXe&rX~O_.YO~P$ WOf-{Oq&sXx&sXy&sX#V&sX%b&sX!U&sXe&sX!Y&sX~Oq.^Oy$nO~Om/iOt/wOx$cy!U$cy~P'UOm/iOt/wOy*RO!U&P!R~P'UOx.bO!U&P!R~Oe%yXq%yX!R%yX!S%yX!U%yX!Y%yXx%yX~P!,}Oq-OO!R%eO!S%dOe%xa!U%xa!Y%xax%xa~O%mVO#^&jy%V&jy%Y&jye&jy~O!d-yOf$Raq$Rax$Ray$Ra#V$Ra%b$Ra!U$Rae$Ra!Y$Ra~O!f.kO~O%g-}O%h-}Oq#{ax#{ay#{a#V#{a%b#{a!U#{ae#{a!Y#{a~O%b.QOq$Pax$Pay$Pa#V$Pa!U$Pae$Pa!Y$Pa~Oq&ray&ra!U&rae&ra~P#NzOx.pOq&ray&ra!U&rae&ra~O!U.sO~Oe.sO~Oy.uO~O!Y.vO~Om/iOt/wOy*RO!U&P!Z~P'UOy.yO~O%r.zO~P$$nOx.{O#V.VO%b.QOe&uX~Ox.{Oe&uX~Oe.}O~O!f/OO~O#V.VOq$}ax$}ay$}a%b$}a!U$}ae$}a!Y$}a~O#V.VO%b.QOq%Rax%Ray%Ra!U%Rae%Ra~Oq&riy&ri!U&rie&ri~P#NzOx/QO#V.VO%b.QO!Y&ta~Oy$Za~P$bOe&ua~P#NzOx/YOe&ua~O_/[O!Y&ti~P$ WOx/^O!Y&ti~Ox/^O#V.VO%b.QO!Y&ti~O#V.VO%b.QOe$Xix$Xi~O%r/aO~P$$nO#V.VO%b.QOe%Qax%Qa~Oe&ui~P#NzOy/dO~O_/[O!Y&tq~P$ WOx/fO!Y&tq~O#V.VO%b.QOx%Pi!Y%Pi~O_/[O~P$ WO_/[O!Y&ty~P$ WO#V.VO%b.QOe$Yix$Yi~O#V.VO%b.QOx%Pq!Y%Pq~Ox*xO#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOm/iOt/wO~P'UOl/nO~Om/nO~P'UOy/oO~Or/pO~P!,}O&S&V&c&e&R!Z&Z&a&d&f&Y&`&Y%m~",goto:"!9p&vPPPP&wP'P*e*}+h,S,o-]P-zP'P.k.k'PPPP'P2PPPPPPP2P4oPP4oP6{7U=QPP=T=c=fPP'P'PPP=rPP'P'PPP'P'P'P'P'P=v>m'PP>pP>vByFcPFw'PPPPF{GR&wP&w&wP&wP&wP&wP&wP&w&w&wP&wPP&wPP&wPGXPG`GfPG`PG`G`PPPG`PIePInItIzIePG`JQPG`PJXJ_PJcJwKfLPJcJcLVLdJcJcJcJcLxMOMRMWMZMaMgMsNVN]NgNm! Z! a! g! m! w! }!!T!!Z!!a!!g!!y!#T!#Z!#a!#g!#q!#w!#}!$T!$Z!$e!$k!$u!${!%U!%[!%k!%s!%}!&UPPPPPPPPP!&[!&d!&m!&w!'SPPPPPPPPPPPP!+r!,[!0j!3vPP!4O!4^!4g!5]!5S!5f!5l!5o!5r!5u!5}!6nPPPPPPPPPP!6q!6tPPPPPPPPP!6z!7W!7d!7j!7s!7v!7|!8S!8Y!8]P!8e!8n!9j!9m]iOr#n$n)c+c'udOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x}!dP#j#w$Y$h$t%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!P!eP#j#w$Y$h$t$v%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!R!fP#j#w$Y$h$t$v$w%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!T!gP#j#w$Y$h$t$v$w$x%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!V!hP#j#w$Y$h$t$v$w$x$y%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!X!iP#j#w$Y$h$t$v$w$x$y$z%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!]!iP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m'uSOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x&ZUOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/x%eWOXYZhrv|}!R!S!T!X!j!l#^#k#n$Q$S$U$X$l$n%O%T%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#}uQ.c-sR/u/w'ldOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xW#ql!O!P$`W#yu&b-s/wQ$b!QQ$r!YQ$s!ZW$}!j'h*O+vS&a#z#{Q'R$mQ(l&ZQ(z&qU({&s(|(}U)O&u)P+RQ)n'[W)o'^+q,s-]S+p)p)qY,_*|,`-T-U-wQ,b+OQ,l+gQ,n+il-`,w-f-g-i.R.T.Y.p.u.z/P/[/a/dQ-v-SQ.Z-hQ.g-{Q.r.VU/V.{/Y/bX/]/Q/^/e/fR&`#yi!xXY!S!T%a%h'y(R)V*]*`*bR%_!wQ!|XQ%z#^Q&i$UR&l$XT-r-O.y![!kP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mQ&^#rR'a$sR'g$}Q%W!nR.e-y'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xS#hc#i!P-d,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/f'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xT#hc#iS#__#`S#b`#cS#da#eS#fb#gT*t(e*uT(f%z(hQ$WwR+o)oX$Uw$V$W&kZkOr$n)c+cXoOr)c+cQ$o!WQ&y$fQ&z$gQ']$qQ'`$sQ)a'QQ)g'VQ)i'WQ)j'XQ)w'_Q)y'aQ+V)VQ+X)WQ+Y)XQ+^)_S+`)b)xQ+d)eQ+e)fQ+f)hQ,d+UQ,e+WQ,g+_Q,h+aQ,m+hQ-W,fQ-Y,kQ-Z,lQ-x-XQ._-lR.x.`WoOr)c+cR#tnQ'_$rR)b'RQ+n)oR,q+oQ)x'_R+a)bZmOnr)c+cQ'c$tR){'dT,u+u,vu-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dt-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dQ.Z-hX/]/Q/^/e/f!P-c,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/fQ.O-bR.l.Pg.R-e.S.h.o.t/S/U/W/c/g/hu-j,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dX-|-`-j.g/VR.i-{V/X.{/Y/bR.`-lQrOR#vrQ&c#|R(q&cS%n#R$OS(Y%n(]T(]%q&eQ%b!zQ%i!}W'z%b%i(P(TQ(P%fR(T%kQ&n$YR(w&nQ(`%rQ*g(ZT*m(`*gQ'i%PR*P'iS'l%S%TY*T'l*U+|,|-pU*U'm'n'oU+|*V*W*XS,|+},OR-p,}Q#Y]R%u#YQ#]^R%w#]Q#`_R%{#`Q(c%xS*r(c*sR*s(dQ*u(eR,[*uQ#c`R%}#cQ#eaR&O#eQ#gbR&P#gQ#icR&Q#iQ#lfQ&S#jW&V#l&S(t*yQ(t&hR*y/mQ$VwS&j$V&kR&k$WQ&x$dR)T&xQ&[#qR(m&[Q$`!PR&r$`Q*}({S,a*}-VR-V,bQ&v$bR)Q&vQ#ojR&X#oQ+c)cR,i+cQ)U&yR+T)UQ&|$hS)]&|)^R)^&}Q'U$oR)d'UQ'Z$pS)m'Z+lR+l)nQ+r)sR,t+rWnOr)c+cR#snQ,v+uR-^,vd.S-e.h.o.t/S/U/W/c/g/hR.n.SU-z-`.g/VR.f-zQ/R.tS/_/R/`R/`/SS.|.h.iR/Z.|Q.U-eR.q.USqOrT+b)c+cWpOr)c+cR'S$nYjOr$n)c+cR&W#n[wOr#n$n)c+cR&i$U&YPOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/xQ!oSQ#jeQ#wsU$Yx%d'}S$h!U$kQ$t![Q$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ${!iQ%f!{Q%k#OQ%q#SQ%r#TQ&e$PQ&}$iQ'd$uQ(j&TU(u&m(v*zW)Y&{)[+[+]Q*Z'wQ*d(WQ+Z)ZQ,V*lQ.w.^R/m/rQ!zXQ!}YQ$f!SQ$g!T^'v%a%h'y(R*]*`*bR+W)V[fOr#n$n)c+ch!wXY!S!T%a%h'y(R)V*]*`*bQ#RZQ#mhS$Ov|Q$]}W$d!R$X'O)`S$p!X$lW$|!j'h*O+vQ%S!lQ%x#^`&U#k&R(i(k(s*x,]/qQ&f$QQ&g$SQ&h$UQ'e%OQ'o%TQ'u%_W(V%m(X*e*iQ(Z%oQ(d%yQ(o&`S(r&d/oQ(x&oQ(y&pU)R&w)S+SQ)h'VY)k'Y)l+j+k,oQ)|'g^*Q'k*S+z+{,{-o.bQ*W'mQ*X'nS*Y'r/pW*k(_*f,S,WW*o(b*q,Y,ZQ+t)vQ+y*RQ+}*VQ,X*pQ,^*{Q,p+nQ,y+wQ,z+xQ,},OQ-R,UQ-[,qQ-m,xR.a-nhTOr#k#n$n&R&d'r(i(k)c+c$z!vXYZhv|}!R!S!T!X!j!l#^$Q$S$U$X$l%O%T%_%a%h%m%o%y&`&o&p&w'O'V'Y'g'h'k'm'n'y(R(X(_(b(s)S)V)`)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#xtW%X!p!t/j/tQ%Y!qQ%Z!rQ%]!uQ%g/iS'q%[/nQ's/kQ't/lQ,P*^Q-Q,QS-q-O.yR/v/xU#|u-s/wR(p&b[gOr#n$n)c+cX!yX#^$U$XQ#WZQ$RvR$[|Q%c!zQ%j!}Q%p#RQ'e$|Q(Q%fQ(U%kQ(^%qQ(a%rQ*h(ZQ-P,PQ-u-QR.d-tQ$ZxQ'|%dR*_'}Q-t-OR/T.yR#QYR#VZR%R!jQ%P!jV)}'h*O+v!]!mP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mR%U!lR%z#^Q(g%zR*w(hQ$e!RQ&l$XQ)_'OR+_)`Q#rlQ$^!OQ$a!PR&t$`Q(z&sR+Q(}Q(z&sQ+P(|R+Q(}R$c!QXpOr)c+cQ$j!UR'P$kQ$q!XR'Q$lR)u'^Q)s'^V,r+q,s-]Q-l,wQ.W-fR.X-gU-e,w-f-gQ.]-iQ.h-{Q.m.RU.o.T.p/PQ.t.YQ/S.uQ/U.zU/W.{/Y/bQ/c/[Q/g/aR/h/dR.[-hR.j-{",nodeNames:"⚠ print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:267,context:trackIndent,nodeProps:[["group",-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,23,38,47,48,54,55,58,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-10,105,107,110,112,113,117,119,124,126,129,"Statement",-9,134,135,138,139,141,142,143,144,145,"Pattern"],["openedBy",21,"(",52,"[",56,"{"],["closedBy",22,")",53,"]",57,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,2],repeatNodeCount:38,tokenData:")'WMgR!`OX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr!Gkrs!Ktst#J]tu%Tuv&'{vw&*kwx&+}xy'*fyz'+rz{'-O{|'/z|}'1^}!O'2j!O!P'5]!P!Q'Ae!Q!R'Da!R!['Ho![!](&g!]!^()V!^!_(*c!_!`(-_!`!a(.q!a!b%T!b!c(1j!c!d(3O!d!e(4|!e!h(3O!h!i(?z!i!t(3O!t!u(J[!u!w(3O!w!x(>S!x!}(3O!}#O(Ll#O#P!Fp#P#Q(Mx#Q#R) U#R#S(3O#S#T%T#T#U(3O#U#V(4|#V#Y(3O#Y#Z(?z#Z#f(3O#f#g(J[#g#i(3O#i#j(>S#j#o(3O#o#p)!h#p#q)#d#q#r)$v#r#s)%z#s$g%T$g;'S(3O;'S;=`(4v<%lO(3O<r%f]&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<Q&j]&^7[&TS&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c<Q'r]&^7[&TS&WW&Z`&d!b&f#tOr'crs&_sw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c;p(t]&^7[&WW&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p)z]&^7[&TS&WW&d!b&f#tOr)mrs*ssw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p*|]&^7[&TS&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p,O]&^7[&TS&d!bOr)mrs,wsw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m8r-QZ&^7[&TS&d!bOw,wwx-sx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r-xZ&^7[Ow,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r.pZ&^7[Ow,wwx/cx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w7[/hT&^7[O#o/c#p#q/c#r;'S/c;'S;=`/w<%lO/c7[/zP;=`<%l/c8r0SW&^7[O#o,w#o#p0l#p#q,w#q#r0l#r;'S,w;'S;=`7Q;=`<%l0l<%lO,w!f0sX&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f1cXOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2RWOw0lx#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2nRO;'S0l;'S;=`2w;=`O0l!f3OY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l0l<%lO0l!f3sX&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p0l#p;'S4`;'S;=`6t<%lO4`S4eV&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S4}VOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5gUOw4`x#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5|RO;'S4`;'S;=`6V;=`O4`S6[W&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`S6wP;=`<%l4`!f6}P;=`<%l0l8r7XY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l,w<%lO0l8r7zP;=`<%l,w;p8SW&^7[O#o)m#o#p8l#p#q)m#q#r8l#r;'S)m;'S;=`Jf;=`<%l8l<%lO)m%d8wZ&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d9qZ&TS&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d:kZ&TS&d!bOr8lrs0lsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d;eZ&WW&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d<_Z&WW&f#tOr8lrs9jsw8lwx=Qx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l#|=XX&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|=wXOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|>gWOr=Qs#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|?SRO;'S=Q;'S;=`?];=`O=Q#|?dY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l=Q<%lO=Q#|@XX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p=Q#p;'S@t;'S;=`CY<%lO@tW@yV&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWAcVOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWA{UOr@ts#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWBbRO;'S@t;'S;=`Bk;=`O@tWBpW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l@t<%lO@tWC]P;=`<%l@t#|CcP;=`<%l=Q%dCiRO;'S8l;'S;=`Cr;=`O8l%dC}[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l8l<%lO8l%dDzZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p8l#p;'SEm;'S;=`JY<%lOEm[EtX&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[FfX&TSOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GWX&TSOrEmrs4`swEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GxX&WWOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[HjX&WWOrEmrsFaswEmwx@tx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[IYRO;'SEm;'S;=`Ic;=`OEm[IjY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%lEm<%lOEm[J]P;=`<%lEm%dJcP;=`<%l8l;pJq[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l)m<%lO8l;pKjP;=`<%l)m;pKv]&^7[&WW&f#tOr)mrs*ssw)mwxLox#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m:YLxZ&^7[&WW&f#tOrLorsMks#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YMpZ&^7[OrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YNhZ&^7[OrLors/cs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:Y! `W&^7[O#oLo#o#p=Q#p#qLo#q#r=Q#r;'SLo;'S;=`! x;=`<%l=Q<%lOLo:Y!!PY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%lLo<%lO=Q:Y!!rP;=`<%lLo<Q!!zW&^7[O#o'c#o#p!#d#p#q'c#q#r!#d#r;'S'c;'S;=`!+^;=`<%l!#d<%lO'c%t!#qZ&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!$mZ&TS&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!%iZ&TS&Z`&d!bOr!#drs!&[sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d!v!&eX&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w<%lO!&[!v!'TRO;'S!&[;'S;=`!'^;=`O!&[!v!'gY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!&[<%lO!&[!v!([X&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p!&[#p;'S4`;'S;=`6t<%lO4`!v!(zP;=`<%l!&[%t!)QRO;'S!#d;'S;=`!)Z;=`O!#d%t!)h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l!#d<%lO!#d%t!*eZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!#d#p;'SEm;'S;=`JY<%lOEm%t!+ZP;=`<%l!#d<Q!+k[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l'c<%lO!#d<Q!,dP;=`<%l'c<Q!,r]&^7[&TS&Z`&d!bOr'crs!-ksw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c9S!-vZ&^7[&TS&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-k9S!.nW&^7[O#o!-k#o#p!&[#p#q!-k#q#r!&[#r;'S!-k;'S;=`!/W;=`<%l!&[<%lO!-k9S!/aY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!-k<%lO!&[9S!0SP;=`<%l!-k<b!0b]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!1j]&^7[&TS&WW&ap&d!b&f#tOr!1Zrs*ssw!1Zwx!0Vx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!2hW&^7[O#o!1Z#o#p!3Q#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!:z;=`<%l!3Q<%lO!1Z&U!3_Z&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!4ZZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!5VZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!5xx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q$n!6RX&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e<%lO!5x$n!6qRO;'S!5x;'S;=`!6z;=`O!5x$n!7TY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!5x<%lO!5x$n!7xX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p!5x#p;'S@t;'S;=`CY<%lO@t$n!8hP;=`<%l!5x&U!8nRO;'S!3Q;'S;=`!8w;=`O!3Q&U!9U[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!3Q<%lO!3Q&U!:RZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!3Q#p;'SEm;'S;=`JY<%lOEm&U!:wP;=`<%l!3Q<b!;X[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!1Z<%lO!3Q<b!<QP;=`<%l!1Z<b!<`]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!=Xx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z:z!=dZ&^7[&WW&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=X:z!>[W&^7[O#o!=X#o#p!5x#p#q!=X#q#r!5x#r;'S!=X;'S;=`!>t;=`<%l!5x<%lO!=X:z!>}Y&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!=X<%lO!5x:z!?pP;=`<%l!=X<r!?xW&^7[O#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T&f!@qZ&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@b&f!AgRO;'S!@b;'S;=`!Ap;=`O!@b&f!BP[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l!@b<%lO!@b&f!B|Z&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEm&f!CrP;=`<%l!@b<r!DU[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l%T<%lO!@b<r!D}P;=`<%l%TMg!Eec&^7[&TS&WW%[1s&Z`&ap&d!b&f#tOX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr%Trs&_sw%Twx!0Vx#O%T#O#P!Fp#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg!Fu[&^7[OY%TYZ!EQZ]%T]^!EQ^#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T<u!G|d&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#T%T#T#U!Jh#U#f%T#f#g!Jh#g#h!Jh#h#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!Io]kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!J{]!jR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{!LTa&bp&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs#HTsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!Mka&^7[&TS&WW&R,X&Z`&d!b&f#tOY!MYYZ'cZ]!MY]^'c^r!MYrs!Npsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!N}]&^7[&TS&R,X&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cFy#!Ra&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#;fx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy##ga&^7[&TS&WW&R,X&d!b&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx# vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy#$w]&^7[&TS&R,X&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy#%uW&^7[O#o##W#o#p#&_#p#q##W#q#r#&_#r;'S##W;'S;=`#:P;=`<%l#&_<%lO##W0m#&l_&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#'tZ&TS&R,X&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m#(p_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#)ox#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#)x_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#*wx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_/V#+Q]&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q<%lO#*w/V#,OX&R,XOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q/V#,nRO;'S#*w;'S;=`#,w;=`O#*w/V#-Q^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#*w<%lO#*w/V#.T]&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P#o#.|#o#p#*w#p;'S#.|;'S;=`#1k<%lO#.|,a#/TZ&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k<%lO#.|,a#/{V&R,XOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@t,a#0eRO;'S#.|;'S;=`#0n;=`O#.|,a#0u[&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k;=`<%l#.|<%lO#.|,a#1nP;=`<%l#.|/V#1tP;=`<%l#*w0m#1zRO;'S#&_;'S;=`#2T;=`O#&_0m#2b`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l#&_<%lO#&_0m#3m_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#&_#p;'S#4l;'S;=`#9s<%lO#4l,e#4u]&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#5uX&TS&R,XOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e#6i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#7bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#7i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#.|x#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#8eRO;'S#4l;'S;=`#8n;=`O#4l,e#8w^&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s;=`<%l#4l<%lO#4l,e#9vP;=`<%l#4l0m#9|P;=`<%l#&_Fy#:^`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l##W<%lO#&_Fy#;cP;=`<%l##WFy#;qa&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#<vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WEc#=R_&^7[&WW&R,X&f#tOY#<vYZLoZ]#<v]^Lo^r#<vrs#>Qs#O#<v#O#P#>z#P#o#<v#o#p#-|#p#q#<v#q#r#*w#r;'S#<v;'S;=`#@n<%lO#<vEc#>XZ&^7[&R,XOrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLoEc#?PW&^7[O#o#<v#o#p#*w#p#q#<v#q#r#*w#r;'S#<v;'S;=`#?i;=`<%l#*w<%lO#<vEc#?r^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#<v<%lO#*wEc#@qP;=`<%l#<vGZ#@yW&^7[O#o!MY#o#p#Ac#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#Fl;=`<%l#Ac<%lO!MY0}#Ar_&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff<%lO#Ac0}#B|Z&TS&R,X&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d0}#CrRO;'S#Ac;'S;=`#C{;=`O#Ac0}#D[`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l#Ac<%lO#Ac0}#Eg_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#Ac#p;'S#4l;'S;=`#9s<%lO#4l0}#FiP;=`<%l#AcGZ#F{`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l!MY<%lO#AcGZ#HQP;=`<%l!MYGZ#Hb]&^7[&TS&R,X&Z`&d!bOr'crs#IZsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ#IjZ&X#|&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kMg#JpaQ1s&^7[&TS&WW&Z`&ap&d!b&f#tOY#J]YZ%TZ]#J]]^%T^r#J]rs#Kusw#J]wx%;ax#O#J]#O#P& a#P#o#J]#o#p&%b#p#q#J]#q#r&!^#r;'S#J];'S;=`&'u<%lO#J]Lu#LSaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%6usw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLu#MjaQ1s&^7[&TS&WW&Z`&d!b&f#tOY#MXYZ'cZ]#MX]^'c^r#MXrs#Kusw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLe#NzaQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%#ix#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$!`aQ1s&^7[&TS&WW&d!b&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$#paQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$$usw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$%QaQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$&Vsw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PIg$&b_Q1s&^7[&TS&d!bOY$&VYZ,wZ]$&V]^,w^w$&Vwx$'ax#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$'h_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$(gx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$(n_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$)mx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VHP$)tZQ1s&^7[OY$)mYZ/cZ]$)m]^/c^#o$)m#o#p$*g#p#q$)m#q#r$*g#r;'S$)m;'S;=`$+R<%lO$)m1s$*lTQ1sOY$*gZ]$*g^;'S$*g;'S;=`$*{<%lO$*g1s$+OP;=`<%l$*gHP$+UP;=`<%l$)mIg$+`[Q1s&^7[OY$&VYZ,wZ]$&V]^,w^#o$&V#o#p$,U#p#q$&V#q#r$,U#r;'S$&V;'S;=`$5j;=`<%l0l<%lO$&V3Z$,_]Q1s&TS&d!bOY$,UYZ0lZ]$,U]^0l^w$,Uwx$-Wx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$-]]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$.Ux#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$.Z]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$*gx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$/XWQ1sOY$,UYZ0lZ]$,U]^0l^;'S$,U;'S;=`$/q;=`<%l0l<%lO$,U3Z$/xY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$,U<%lO0l3Z$0o]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p$,U#p;'S$1h;'S;=`$5^<%lO$1h1w$1oZQ1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$2gZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$3Yx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$3_ZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$*gx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$4VWQ1sOY$1hYZ4`Z]$1h]^4`^;'S$1h;'S;=`$4o;=`<%l4`<%lO$1h1w$4tW&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l$1h<%lO4`1w$5aP;=`<%l$1h3Z$5gP;=`<%l$,UIg$5qY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$&V<%lO0lIg$6dP;=`<%l$&VLe$6n[Q1s&^7[OY$!PYZ)mZ]$!P]^)m^#o$!P#o#p$7d#p#q$!P#q#r$7d#r;'S$!P;'S;=`%!b;=`<%l8l<%lO$!P6X$7q_Q1s&TS&WW&d!b&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$8y_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$9xsw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$:R_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$,Usw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$;Z_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$<Yx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$<c_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$=bx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d4q$=k]Q1s&WW&f#tOY$=bYZ=QZ]$=b]^=Q^r$=brs$>ds#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$>i]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$?bs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$?g]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$*gs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$@eWQ1sOY$=bYZ=QZ]$=b]^=Q^;'S$=b;'S;=`$@};=`<%l=Q<%lO$=b4q$AUY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l$=b<%lO=Q4q$A{]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p$=b#p;'S$Bt;'S;=`$Fj<%lO$Bt1{$B{ZQ1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$CsZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Dfs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$DkZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$*gs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$EcWQ1sOY$BtYZ@tZ]$Bt]^@t^;'S$Bt;'S;=`$E{;=`<%l@t<%lO$Bt1{$FQW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l$Bt<%lO@t1{$FmP;=`<%l$Bt4q$FsP;=`<%l$=b6X$F{WQ1sOY$7dYZ8lZ]$7d]^8l^;'S$7d;'S;=`$Ge;=`<%l8l<%lO$7d6X$Gp[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$7d<%lO8l6X$Ho_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p$7d#p;'S$In;'S;=`%!U<%lO$In2P$Iw]Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Jw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$Kpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Kw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$1hsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Lw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Mpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Mw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Btx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$NuWQ1sOY$InYZEmZ]$In]^Em^;'S$In;'S;=`% _;=`<%lEm<%lO$In2P% fY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%l$In<%lOEm2P%!XP;=`<%l$In6X%!_P;=`<%l$7dLe%!m[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$!P<%lO8lLe%#fP;=`<%l$!PLe%#taQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%$yx#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PJ}%%U_Q1s&^7[&WW&f#tOY%$yYZLoZ]%$y]^Lo^r%$yrs%&Ts#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%&[_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs%'Zs#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%'b_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs$)ms#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%(h[Q1s&^7[OY%$yYZLoZ]%$y]^Lo^#o%$y#o#p$=b#p#q%$y#q#r$=b#r;'S%$y;'S;=`%)^;=`<%l=Q<%lO%$yJ}%)eY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l%$y<%lO=QJ}%*WP;=`<%l%$yLu%*b[Q1s&^7[OY#MXYZ'cZ]#MX]^'c^#o#MX#o#p%+W#p#q#MX#q#r%+W#r;'S#MX;'S;=`%5l;=`<%l!#d<%lO#MX6i%+g_Q1s&TS&WW&Z`&d!b&f#tOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%,fsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%,q_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%-psw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%-{_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%.zsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W3k%/V]Q1s&TS&Z`&d!bOY%.zYZ!&[Z]%.z]^!&[^w%.zwx$-Wx#O%.z#O#P%0O#P#o%.z#o#p%1f#p;'S%.z;'S;=`%2f<%lO%.z3k%0TWQ1sOY%.zYZ!&[Z]%.z]^!&[^;'S%.z;'S;=`%0m;=`<%l!&[<%lO%.z3k%0vY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%.z<%lO!&[3k%1m]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p%.z#p;'S$1h;'S;=`$5^<%lO$1h3k%2iP;=`<%l%.z6i%2qWQ1sOY%+WYZ!#dZ]%+W]^!#d^;'S%+W;'S;=`%3Z;=`<%l!#d<%lO%+W6i%3h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l%+W<%lO!#d6i%4g_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%+W#p;'S$In;'S;=`%!U<%lO$In6i%5iP;=`<%l%+WLu%5y[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l#MX<%lO!#dLu%6rP;=`<%l#MXLu%7SaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%8Xsw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXIw%8f_Q1s&^7[&TS&Z`&d!bOY%8XYZ!-kZ]%8X]^!-k^w%8Xwx$'ax#O%8X#O#P%9e#P#o%8X#o#p%1f#p#q%8X#q#r%.z#r;'S%8X;'S;=`%;Z<%lO%8XIw%9l[Q1s&^7[OY%8XYZ!-kZ]%8X]^!-k^#o%8X#o#p%.z#p#q%8X#q#r%.z#r;'S%8X;'S;=`%:b;=`<%l!&[<%lO%8XIw%:kY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%8X<%lO!&[Iw%;^P;=`<%l%8XMV%;naQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%Jux#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%=UaQ1s&^7[&TS&WW&ap&d!b&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%;ax#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%>b[Q1s&^7[OY%<sYZ!1ZZ]%<s]^!1Z^#o%<s#o#p%?W#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Il;=`<%l!3Q<%lO%<s6y%?g_Q1s&TS&WW&ap&d!b&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%@fx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%@q_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Apx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%A{_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Bzx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W5c%CV]Q1s&WW&ap&f#tOY%BzYZ!5xZ]%Bz]^!5x^r%Bzrs$>ds#O%Bz#O#P%DO#P#o%Bz#o#p%Ef#p;'S%Bz;'S;=`%Ff<%lO%Bz5c%DTWQ1sOY%BzYZ!5xZ]%Bz]^!5x^;'S%Bz;'S;=`%Dm;=`<%l!5x<%lO%Bz5c%DvY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%Bz<%lO!5x5c%Em]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p%Bz#p;'S$Bt;'S;=`$Fj<%lO$Bt5c%FiP;=`<%l%Bz6y%FqWQ1sOY%?WYZ!3QZ]%?W]^!3Q^;'S%?W;'S;=`%GZ;=`<%l!3Q<%lO%?W6y%Gh[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%?W<%lO!3Q6y%Hg_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%?W#p;'S$In;'S;=`%!U<%lO$In6y%IiP;=`<%l%?WMV%Iy[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%<s<%lO!3QMV%JrP;=`<%l%<sMV%KSaQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%LXx#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sKo%Lf_Q1s&^7[&WW&ap&f#tOY%LXYZ!=XZ]%LX]^!=X^r%LXrs%&Ts#O%LX#O#P%Me#P#o%LX#o#p%Ef#p#q%LX#q#r%Bz#r;'S%LX;'S;=`& Z<%lO%LXKo%Ml[Q1s&^7[OY%LXYZ!=XZ]%LX]^!=X^#o%LX#o#p%Bz#p#q%LX#q#r%Bz#r;'S%LX;'S;=`%Nb;=`<%l!5x<%lO%LXKo%NkY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%LX<%lO!5xKo& ^P;=`<%l%LXMg& h[Q1s&^7[OY#J]YZ%TZ]#J]]^%T^#o#J]#o#p&!^#p#q#J]#q#r&!^#r;'S#J];'S;=`&&p;=`<%l!@b<%lO#J]7Z&!o_Q1s&TS&WW&Z`&ap&d!b&f#tOY&!^YZ!@bZ]&!^]^!@b^r&!^rs%,fsw&!^wx%@fx#O&!^#O#P&#n#P#o&!^#o#p&%b#p;'S&!^;'S;=`&&j<%lO&!^7Z&#sWQ1sOY&!^YZ!@bZ]&!^]^!@b^;'S&!^;'S;=`&$];=`<%l!@b<%lO&!^7Z&$l[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l&!^<%lO!@b7Z&%k_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p&!^#p;'S$In;'S;=`%!U<%lO$In7Z&&mP;=`<%l&!^Mg&'P[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l#J]<%lO!@bMg&'xP;=`<%l#J]Gz&(`_%jQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&)r]!s,W&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&+O_%dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{&,^a&_`&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx'(^x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk&-ta&^7[&TS&WW&R,X&ap&d!b&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx&Mwx#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cFy&/Ua&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Hisw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&0ja&^7[&TS&WW&R,X&d!b&f#tOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&.ysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&1z]&^7[&WW&R,X&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy&2xW&^7[O#o&0Z#o#p&3b#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&GS;=`<%l&3b<%lO&0Z0m&3o_&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&4w_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&5vsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&6P_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&7Osw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b-o&7X]&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x<%lO&7O-o&8VX&R,XOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l-o&8uRO;'S&7O;'S;=`&9O;=`O&7O-o&9X^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&7O<%lO&7O-o&:[]&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P#o&;T#o#p&7O#p;'S&;T;'S;=`&=r<%lO&;T,]&;[Z&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r<%lO&;T,]&<SV&R,XOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`,]&<lRO;'S&;T;'S;=`&<u;=`O&;T,]&<|[&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r;=`<%l&;T<%lO&;T,]&=uP;=`<%l&;T-o&={P;=`<%l&7O0m&>XZ&WW&R,X&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m&>}RO;'S&3b;'S;=`&?W;=`O&3b0m&?e`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&3b<%lO&3b0m&@p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p&3b#p;'S&Ao;'S;=`&Fv<%lO&Ao,e&Ax]&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Bx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Cqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Cx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&;Tsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&DxX&WW&R,XOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e&EhRO;'S&Ao;'S;=`&Eq;=`O&Ao,e&Ez^&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv;=`<%l&Ao<%lO&Ao,e&FyP;=`<%l&Ao0m&GPP;=`<%l&3bFy&Ga`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&0Z<%lO&3bFy&HfP;=`<%l&0ZFy&Hta&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Iysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZC{&JU_&^7[&TS&R,X&d!bOY&IyYZ,wZ]&Iy]^,w^w&Iywx&KTx#O&Iy#O#P&K}#P#o&Iy#o#p&:T#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Mq<%lO&IyC{&K[Z&^7[&R,XOw,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,wC{&LSW&^7[O#o&Iy#o#p&7O#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Ll;=`<%l&7O<%lO&IyC{&Lu^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&Iy<%lO&7OC{&MtP;=`<%l&IyGk&NU]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk' SW&^7[O#o&-c#o#p' l#p#q&-c#q#r' l#r;'S&-c;'S;=`'&u;=`<%l' l<%lO&-c1_' {_&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o<%lO' l1_'#VZ&WW&R,X&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q1_'#{RO;'S' l;'S;=`'$U;=`O' l1_'$e`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l' l<%lO' l1_'%p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p' l#p;'S&Ao;'S;=`&Fv<%lO&Ao1_'&rP;=`<%l' lGk''U`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l&-c<%lO' lGk'(ZP;=`<%l&-cGk'(k]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx')dx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk')sZ&U!f&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XG{'*y]f,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u',V]eR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'-caT,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vxz%Tz{'.h{!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'.{__R&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'0__%g,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u'1q]xR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg'2}`%h,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`!a'4P!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TB^'4d]&q&j&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'5pa!dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'6u!P!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'7W_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'8V!P#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'8j]!m,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'9vi!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'9c#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy';vc&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx{%T{|'=R|}%T}!O'=R!O!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'=d_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'>ve!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'>c#S#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'@l]!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'Axa%iR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!P%T!P!Q'B}!Q!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz'Cb_%kQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Dtw!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!d%T!d!e'Jw!e!g%T!g!h';e!h!l%T!l!m'@X!m!q%T!q!r'M}!r!z%T!z!{(!}!{#O%T#O#P!?s#P#R%T#R#S'Ho#S#U%T#U#V'Jw#V#X%T#X#Y';e#Y#^%T#^#_'@X#_#c%T#c#d'M}#d#l%T#l#m(!}#m#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Gp_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'ISk!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'Ho#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'KYb&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Lub!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'N`a&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy( xa!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(#`e&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(%Ue!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(&z_y1s&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`('y!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u((^]%sR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{()j]#^,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(*vakR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!^%T!^!_(+{!_!`!I[!`!a!I[!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(,`_%eQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(-r_%r,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(/U`kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`!a(0W!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(0k_%fQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(2P_]Q#tP&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(3ee&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs&_sw%Twx!0Vx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(4yP;=`<%l(3OMg(5ci&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(>S#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(7_a&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs(8dsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ(8q]&^7[&TS&R,X&Z`&d!bOr'crs(9jsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](9wZ&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(:wa&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx(;|x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk(<Z]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx(=Sx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(=aZ&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(>ie&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(@ai&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(Hd!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(Hd#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(B]]&^7[&TS&Z`&d!b&`,XOr'crs(CUsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ(Ca]&^7[&TS&Z`&d!bOr'crs(DYsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](DgZ&^7[&TS&e,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(Eg]&^7[&WW&ap&f#t&Y,XOr!1Zrs*ssw!1Zwx(F`x#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk(Fk]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx(Gdx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(GqZ&^7[&WW&c,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(Hye&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(Jqm&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!h(3O!h!i(Hd!i!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#U(3O#U#V(>S#V#Y(3O#Y#Z(Hd#Z#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OG{(MP]!V,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u(N]]!UR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz) i_%cQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy)!qZ&TS&WW!ZGmOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEmG{)#w_%bR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u)%XZ!Y7_&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@bGy)&_]%l,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T",tokenizers:[legacyPrint,indentation,0,1,2,3,4,5,6,7,8,9,10,newlines],topRules:{Script:[0,3]},specialized:[{term:213,get:e=>spec_identifier$1[e]||-1}],tokenPrec:7282});class Text{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),TextNode.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),TextNode.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new RawTextCursor(this),i=new RawTextCursor(e);for(let o=t,s=t;;){if(r.next(o),i.next(o),o=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(s+=r.value.length,r.done||s>=n)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,t=this.length){return new PartialTextCursor(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new LineCursor(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[])):Text.empty}}class TextLeaf extends Text{constructor(e,t=textLength(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Line(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new TextLeaf(sliceText(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=appendText(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new TextLeaf(t,e.length+i.length));else{let e=t.length>>1;n.push(new TextLeaf(t.slice(0,e)),new TextLeaf(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof TextLeaf))return super.replace(e,t,n);let r=appendText(this.text,appendText(n.text,sliceText(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new TextLeaf(r,i):TextNode.from(TextLeaf.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new TextLeaf(n,r)),n=[],r=-1);return r>-1&&t.push(new TextLeaf(n,r)),t}}class TextNode extends Text{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new TextNode(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof TextNode))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new TextLeaf(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof TextNode)for(let n of e.children)u(n);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof TextLeaf&&a&&(t=c[c.length-1])instanceof TextLeaf&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new TextLeaf(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:TextNode.from(c,l)),l=-1,a=c.length=0)}for(let d of e)u(d);return h(),1==s.length?s[0]:new TextNode(s,t)}}function textLength(e){let t=-1;for(let n of e)t+=n.length+1;return t}function appendText(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function sliceText(e,t,n){return appendText(e,[""],t,n)}Text.empty=new TextLeaf([""],0);class RawTextCursor{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof TextLeaf?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof TextLeaf){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof TextLeaf?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let lt=1;lt<extend.length;lt++)extend[lt]+=extend[lt-1];function isExtendingChar(e){for(let t=1;t<extend.length;t+=2)if(extend[t]>e)return extend[t-1]<=e;return!1}function isRegionalIndicator(e){return e>=127462&&e<=127487}const ZWJ=8205;function findClusterBreak(e,t,n=!0,r=!0){return(n?nextClusterBreak:prevClusterBreak)(e,t,r)}function nextClusterBreak(e,t,n){if(t==e.length)return t;t&&surrogateLow(e.charCodeAt(t))&&surrogateHigh(e.charCodeAt(t-1))&&t--;let r=codePointAt(e,t);for(t+=codePointSize(r);t<e.length;){let i=codePointAt(e,t);if(r==ZWJ||i==ZWJ||n&&isExtendingChar(i))t+=codePointSize(i),r=i;else{if(!isRegionalIndicator(i))break;{let n=0,r=t-2;for(;r>=0&&isRegionalIndicator(codePointAt(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function prevClusterBreak(e,t,n){for(;t>0;){let r=nextClusterBreak(e,t-2,n);if(r<t)return r;t--}return 0}function surrogateLow(e){return e>=56320&&e<57344}function surrogateHigh(e){return e>=55296&&e<56320}function codePointAt(e,t){let n=e.charCodeAt(t);if(!surrogateHigh(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return surrogateLow(r)?r-56320+(n-55296<<10)+65536:n}function fromCodePoint(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function codePointSize(e){return e<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){iterChanges(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,t=!1){return e.empty?this:mapSet(this,e,t)}mapPos(e,t=-1,n=MapMode.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=MapMode.Simple&&l>=e&&(n==MapMode.TrackDel&&r<e&&l>e||n==MapMode.TrackBefore&&r<e||n==MapMode.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return mapSet(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Text.empty);n.push(o?e.slice(i,i+o):Text.empty)}i+=o}return new ChangeSet(t,n)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,t=!1){return e.empty?this:mapSet(this,e,t,!0)}iterChanges(e,t=!1){iterChanges(this,e,t)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new SectionIter(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);addSection(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;addSection(t,e,o),o>0&&addInsert(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);addSection(t,e,-1),addSection(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new ChangeSet(t,n),filtered:ChangeDesc.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&addSection(r,t-o,-1);let n=new ChangeSet(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ChangeSet){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Text.of(c.split(n||DefaultSplit)):c:Text.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&addSection(r,e-o,-1),addSection(r,s-e,h),addInsert(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Text.empty);n[r]=Text.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new ChangeSet(t,n)}static createSet(e,t){return new ChangeSet(e,t)}}function addSection(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function addInsert(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Text.empty);e.push(n)}}function iterChanges(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Text.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function mapSet(e,t,n,r=!1){let i=[],o=r?[]:null,s=new SectionIter(e),a=new SectionIter(t);for(let l=-1;;)if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);addSection(i,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||l==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(addSection(i,a.ins,-1);e;){let t=Math.min(s.len,e);s.ins>=0&&l<s.i&&s.len<=t&&(addSection(i,0,s.ins),o&&addInsert(o,i,s.text),l=s.i),s.forward(t),e-=t}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?ChangeSet.createSet(i,o):ChangeDesc.create(i);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;for(;t;)if(-1==a.ins){let n=Math.min(t,a.len);e+=n,t-=n,a.forward(n)}else{if(!(0==a.ins&&a.len<t))break;t-=a.len,a.next()}addSection(i,e,l<s.i?s.ins:0),o&&l<s.i&&addInsert(o,i,s.text),l=s.i,s.forward(s.len-t)}}}function composeSets(e,t,n=!1){let r=[],i=n?[]:null,o=new SectionIter(e),s=new SectionIter(t);for(let a=!1;;){if(o.done&&s.done)return i?ChangeSet.createSet(r,i):ChangeDesc.create(r);if(0==o.ins)addSection(r,o.len,0,a),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),t=r.length;if(-1==o.ins){let t=-1==s.ins?-1:s.off?0:s.ins;addSection(r,e,t,a),i&&t&&addInsert(i,r,s.text)}else-1==s.ins?(addSection(r,o.off?0:o.len,e,a),i&&addInsert(i,r,o.textBit(e))):(addSection(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&addInsert(i,r,s.text));a=(o.ins>e||s.ins>=0&&s.len>e)&&(a||r.length>t),o.forward2(e),s.forward(e)}}else addSection(r,0,s.ins,a),i&&addInsert(i,r,s.text),s.next()}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Text.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Text.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new SelectionRange(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return EditorSelection.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return EditorSelection.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,t,n){return new SelectionRange(e,t,n)}}class EditorSelection{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:EditorSelection.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new EditorSelection([this.main],0)}addRange(e,t=!0){return EditorSelection.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,EditorSelection.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map((e=>SelectionRange.fromJSON(e))),e.main)}static single(e,t=e){return new EditorSelection([EditorSelection.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return EditorSelection.normalized(e.slice(),t);n=i.to}return new EditorSelection(e,t)}static cursor(e,t=0,n,r){return SelectionRange.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n,r){let i=(null!=n?n:33554431)<<5|(null==r?3:Math.min(2,r));return t<e?SelectionRange.create(t,e,24|i):SelectionRange.create(e,t,(t>e?4:0)|i)}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let r=1;r<e.length;r++){let n=e[r],i=e[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let o=i.from,s=Math.max(n.to,i.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?EditorSelection.range(s,o):EditorSelection.range(o,s))}}return new EditorSelection(e,t)}}function checkSelection(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=nextID++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}static define(e={}){return new Facet(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:sameArray),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function sameArray(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class FacetProvider{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=nextID++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let u of this.dependencies)"doc"==u?a=!0:"selection"==u?l=!0:0==(1&(null!==(t=e[u.id])&&void 0!==t?t:1))&&c.push(e[u.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||ensureAll(e,c)){let t=n(e);if(s?!compareArray(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=getAddr(t,l);if(this.dependencies.every((n=>n instanceof Facet?t.facet(n)===e.facet(n):!(n instanceof StateField)||t.field(n,!1)==e.field(n,!1)))||(s?compareArray(a=n(e),i,r):r(a=n(e),i)))return e.values[o]=i,0}else a=n(e);return e.values[o]=a,1}}}}function compareArray(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function ensureAll(e,t){let n=!1;for(let r of t)1&ensureAddr(e,r)&&(n=!0);return n}function dynamicFacetSlot(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=getAddr(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)ensureAddr(e,t);return e.values[s]=a(e),1},update(e,n){if(!ensureAll(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=ensureAll(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&sameArray(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new StateField(nextID++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(initField).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(e){return t=>new PrecExtension(t,e)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,t){this.inner=e,this.prec=t}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,t){this.compartment=e,this.inner=t}}class Configuration{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let h of flatten(e,t,o))h instanceof StateField?r.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let s=Object.create(null),a=[],l=[];for(let h of r)s[h.id]=l.length<<1,l.push((e=>h.slot(e)));let c=null==n?void 0:n.config.facets;for(let h in i){let e=i[h],t=e[0].facet,r=c&&c[h]||[];if(e.every((e=>0==e.type)))if(s[t.id]=a.length<<1|1,sameArray(r,e))a.push(n.facet(t));else{let r=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(r,n.facet(t))?n.facet(t):r)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[t.id]=l.length<<1,l.push((n=>dynamicFacetSlot(n,t,e)))}}let u=l.map((e=>e(s)));return new Configuration(e,o,u,s,a,i)}}function flatten(e,t,n){let r=[[],[],[],[],[]],i=new Map;return function e(o,s){let a=i.get(o);if(null!=a){if(a<=s)return;let e=r[a].indexOf(o);e>-1&&r[a].splice(e,1),o instanceof CompartmentInstance&&n.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let t of o)e(t,s);else if(o instanceof CompartmentInstance){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(o.compartment)||o.inner;n.set(o.compartment,r),e(r,s)}else if(o instanceof PrecExtension)e(o.inner,o.prec);else if(o instanceof StateField)r[s].push(o),o.provides&&e(o.provides,s);else if(o instanceof FacetProvider)r[s].push(o),o.facet.extensions&&e(o.facet.extensions,Prec_.default);else{let t=o.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,s)}}(e,Prec_.default),r.reduce(((e,t)=>e.concat(t)))}function ensureAddr(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function getAddr(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:e=>e.some((e=>e)),static:!0}),lineSeparator=Facet.define({combine:e=>e.length?e[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:e=>!!e.length&&e[0]});class Annotation{constructor(e,t){this.type=e,this.value=t}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new StateEffect(this.type,t)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&checkSelection(n,t.newLength),i.some((e=>e.type==Transaction.time))||(this.annotations=i.concat(Transaction.time.of(Date.now())))}static create(e,t,n,r,i,o){return new Transaction(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Transaction.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function joinRanges(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function mergeTransaction(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=ChangeSet.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:StateEffect.mapEffects(e.effects,i).concat(StateEffect.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function resolveTransactionInner(e,t,n){let r=t.selection,i=asArray$1(t.annotations);return t.userEvent&&(i=i.concat(Transaction.userEvent.of(t.userEvent))),{changes:t.changes instanceof ChangeSet?t.changes:ChangeSet.of(t.changes||[],n,e.facet(lineSeparator)),selection:r&&(r instanceof EditorSelection?r:EditorSelection.single(r.anchor,r.head)),effects:asArray$1(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function resolveTransaction(e,t,n){let r=resolveTransactionInner(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=mergeTransaction(r,resolveTransactionInner(e,t[o],i?r.changes.newLength:e.doc.length),i)}let i=Transaction.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return extendTransaction(n?filterTransaction(i):i)}function filterTransaction(e){let t=e.startState,n=!0;for(let i of t.facet(changeFilter)){let t=i(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:joinRanges(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=ChangeSet.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=Transaction.create(t,r,e.selection&&e.selection.map(i),StateEffect.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(transactionFilter);for(let i=r.length-1;i>=0;i--){let n=r[i](e);e=n instanceof Transaction?n:Array.isArray(n)&&1==n.length&&n[0]instanceof Transaction?n[0]:resolveTransaction(t,asArray$1(n),!1)}return e}function extendTransaction(e){let t=e.startState,n=t.facet(transactionExtender),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=mergeTransaction(r,resolveTransactionInner(t,o,e.changes.newLength),!0))}return r==e?e:Transaction.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();const none$2=[];function asArray$1(e){return null==e?none$2:Array.isArray(e)?e:[e]}var CharCategory=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(_2){}function hasWordChar(e){if(wordChar)return wordChar.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(e){return t=>{if(!/\S/.test(t))return CharCategory.Space;if(hasWordChar(t))return CharCategory.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)ensureAddr(this,s<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return ensureAddr(this,n),getAddr(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Compartment.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(o.value.compartment,o.value.extension)):o.is(StateEffect.reconfigure)?(n=null,r=o.value):o.is(StateEffect.appendConfig)&&(n=null,r=asArray$1(r).concat(o.value));if(n)t=e.startState.values.slice();else{n=Configuration.resolve(r,i,this),t=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new EditorState(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:EditorSelection.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=asArray$1(n.effects);for(let s=1;s<t.ranges.length;s++){let n=e(t.ranges[s]),a=this.changes(n.changes),l=a.map(r);for(let e=0;e<s;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(n.range.map(c)),r=r.compose(l),o=StateEffect.mapEffects(o,l).concat(StateEffect.mapEffects(asArray$1(n.effects),c))}return{changes:r,selection:EditorSelection.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(ensureAddr(this,t),getAddr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof StateField&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let t=n[i],o=e[i];r.push(t.init((e=>t.spec.fromJSON(o,e))))}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Configuration.resolve(e.extensions||[],new Map),n=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(t.staticFacet(EditorState.lineSeparator)||DefaultSplit)),r=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(r,n.length),t.staticFacet(allowMultipleSelections)||(r=r.asSingle()),new EditorState(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||"\n"}get readOnly(){return this.facet(readOnly)}phrase(e,...t){for(let n of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(languageData))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=findClusterBreak(t,o,!1);if(i(t.slice(e,o))!=CharCategory.Word)break;o=e}for(;s<r;){let e=findClusterBreak(t,s);if(i(t.slice(s,e))!=CharCategory.Word)break;s=e}return o==s?null:EditorSelection.range(o+n,s+n)}}function combineConfig(e,t,n={}){let r={};for(let i of e)for(let e of Object.keys(i)){let t=i[e],o=r[e];if(void 0===o)r[e]=t;else if(o===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,t)}}for(let i in t)void 0===r[i]&&(r[i]=t[i]);return r}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:e=>e.length?e[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();class RangeValue{eq(e){return this==e}range(e,t=e){return Range.create(e,t,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Range(e,t,n)}}function cmpRange(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Chunk{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new Chunk(r,i,n,s):null,pos:o}}}class RangeSet{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new RangeSet(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(cmpRange)),this.isEmpty)return t.length?RangeSet.of(t):this;let s=new LayerCursor(this,null,-1).goto(0),a=0,l=[],c=new RangeSetBuilder;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Range.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?RangeSet.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new RangeSet(n,t,i||RangeSet.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return HeapCursor.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=findSharedChunks(o,s,n),l=new SpanCursor(o,a,i),c=new SpanCursor(s,a,i);n.iterGaps(((e,t,n)=>compare(l,e,c,t,n,r))),n.empty&&0==n.length&&compare(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=findSharedChunks(i,o),a=new SpanCursor(i,s,0).goto(n),l=new SpanCursor(o,s,0).goto(n);for(;;){if(a.to!=l.to||!sameValues(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new SpanCursor(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<t?n.length+1:Math.min(n.length,a);r.point(s,e,o.point,n,i,o.pointRank),a=Math.min(o.openEnd(e),n.length)}else e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new RangeSetBuilder;for(let r of e instanceof Range?[e]:t?lazySort(e):e)n.add(r.from,r.to,r.value);return n.finish()}}function lazySort(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(cmpRange(t,r)>0)return e.slice().sort(cmpRange);t=r}return e}RangeSet.empty=new RangeSet([],[],null,-1),RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function findSharedChunks(e,t,n){let r=new Map;for(let o of e)for(let e=0;e<o.chunk.length;e++)o.chunk[e].maxPoint<=0&&r.set(o.chunk[e],o.chunkPos[e]);let i=new Set;for(let o of t)for(let e=0;e<o.chunk.length;e++){let t=r.get(o.chunk[e]);null==t||(n?n.mapPos(t):t)!=o.chunkPos[e]||(null==n?void 0:n.touchesRange(t,t+o.chunk[e].length))||i.add(o.chunk[e])}return i}class LayerCursor{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new LayerCursor(o,t,n,i));return 1==r.length?r[0]:new HeapCursor(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class SpanCursor{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;insert(this.active,t,n),insert(this.activeTo,t,r),insert(this.activeRank,t,i),e&&insert(e,t,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&remove(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function compare(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&sameValues(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!sameValues(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function sameValues(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function remove(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function insert(e,t,n){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=n}function findMinIndex(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function countColumn(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=findClusterBreak(e,i));return r}function findColumn(e,t,n,r){for(let i=0,o=0;;){if(o>=t)return i;if(i==e.length)break;o+=9==e.charCodeAt(i)?n-o%n:1,i=findClusterBreak(e,i)}return!0===r?-1:e.length}const C="ͼ",COUNT="undefined"==typeof Symbol?"__"+C:Symbol.for(C),SET="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),top="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class StyleModule{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let o in e)i(r(o),e[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,t){(e[SET]||new StyleSet(e)).mount(Array.isArray(t)?t:[t])}}let adoptedSet=null;class StyleSet{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(adoptedSet)return e.adoptedStyleSheets=[adoptedSet.sheet].concat(e.adoptedStyleSheets),e[SET]=adoptedSet;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[SET]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ie$1="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57,i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(e){var t=!(brokenModifierNames&&(e.ctrlKey||e.altKey||e.metaKey)||ie$1&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?shift:base)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}function getSelection(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function contains(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function hasSelection(e,t){if(!t.anchorNode)return!1;try{return contains(e,t.anchorNode)}catch(_2){return!1}}function clientRectsFor(e){return 3==e.nodeType?textRange(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function isEquivalentPosition(e,t,n,r){return!!n&&(scanFor(e,t,n,r,-1)||scanFor(e,t,n,r,1))}function domIndex(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function scanFor(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:maxOffset(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=domIndex(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?maxOffset(e):0}}}function maxOffset(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function windowRect(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function scrollRectIntoView(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=windowRect(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let d=0,p=0;if("nearest"==i)t.top<e.top?(p=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+p&&(p=t.bottom-e.bottom+p+s)):t.bottom>e.bottom&&(p=t.bottom-e.bottom+s,n<0&&t.top-p<e.top&&(p=-(e.top+p-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;p=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r)t.left<e.left?(d=-(e.left-t.left+o),n>0&&t.right>e.right+d&&(d=t.right-e.right+d+o)):t.right>e.right&&(d=t.right-e.right+o,n<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+o)));else{d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left}if(d||p)if(h)c.scrollBy(d,p);else{let e=0,n=0;if(p){let e=u.scrollTop;u.scrollTop+=p,n=u.scrollTop-e}if(d){let t=u.scrollLeft;u.scrollLeft+=d,e=u.scrollLeft-t}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-d)<1&&(r="nearest"),n&&Math.abs(n-p)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}function scrollableParent(e){let t=e.ownerDocument;for(let n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let preventScrollSupported=null,scratchRange;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function textRange(e,t,n=t){let r=scratchRange||(scratchRange=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function dispatchKey(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function getRoot(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function clearAttributes(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function atElementStart(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(;;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=maxOffset(n))}else{if(n==e)return!0;r=domIndex(n),n=n.parentNode}}class DOMPos{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new DOMPos(e.parentNode,domIndex(e),t)}static after(e,t){return new DOMPos(e.parentNode,domIndex(e)+1,t)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(2&this.dirty){let n,r=this.dom,i=null;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=i?i.nextSibling:r.firstChild)){let e=ContentView.get(n);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.dirty=0}if(n=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;n&&n!=o.dom;)n=rm$1(n);else r.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=rm$1(n)}else if(1&this.dirty)for(let n of this.children)n.dirty&&(n.sync(e,t),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==maxOffset(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ContentView.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,i=0;;r++){let e=this.children[r];if(e.dom==n)return i;i+=e.length+e.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=noChildren){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function rm$1(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}ContentView.prototype.breakAfter=0;class ChildCursor{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function replaceRange(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function mergeChildrenInto(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let d of r)h+=d.length;e.length+=h,replaceRange(e,c,u,a,l,r,0,i,o)}let nav="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},doc="undefined"!=typeof document?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko:gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios:ios,android:/Android\b/.test(nav.userAgent),webkit:webkit,safari:safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=doc.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof TextView&&!(this.length-(t-e)+n.length>MaxJoinLen))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return textCoords(this.dom,e,t)}}class MarkView extends ContentView{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof MarkView&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(mergeChildrenInto(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let s of this.children){let o=n+s.length;o>e&&t.push(n<e?s.split(e-n):s),r<0&&n>=e&&(r=i),n=o,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new MarkView(this.mark,t,o)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,t){return coordsInChildren(this,e,t)}}function textCoords(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?browser.chrome||browser.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=textRange(e,i,o).getClientRects();if(!a.length)return Rect0;let l=a[(s?s<0:n>=0)?0:a.length-1];return browser.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?flattenRect(l,s<0):l||null}class WidgetView extends ContentView{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||WidgetView)(e,t,n)}split(e){let t=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof WidgetView&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Text.empty}domAtPos(e){return 0==e?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return Rect0;for(let i=e>0?n.length-1:0;r=n[i],!(e>0?0==i:i==n.length-1||r.top<r.bottom);i+=e>0?-1:1);return this.length?r:flattenRect(r,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(e){let{topView:t,text:n}=this.widget;return t?scanCompositionTree(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new DOMPos(n,Math.min(e,n.nodeValue.length)))):new DOMPos(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?posFromDOMInCompositionTree(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?scanCompositionTree(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>textCoords(r,e,t))):textCoords(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(e,t,n,r,i,o){if(n instanceof MarkView){for(let s=n.dom.firstChild;s;s=s.nextSibling){let n=ContentView.get(s);if(!n)return o(e,t);let a=contains(s,r),l=n.length+(a?r.nodeValue.length:0);if(e<l||e==l&&n.getSide()<=0)return a?scanCompositionTree(e,t,n,r,i,o):i(n,e,t);e-=l}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function posFromDOMInCompositionTree(e,t,n,r){if(n instanceof MarkView)for(let i of n.children){let n=0,o=contains(i.dom,r);if(contains(i.dom,e))return n+(o?posFromDOMInCompositionTree(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=inlineSiblingRect(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return Text.empty}}function inlineSiblingRect(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof TextView){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof MarkView&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}}function inlineDOMAtPos(e,t){let n=e.dom,{children:r}=e,i=0;for(let o=0;i<r.length;i++){let e=r[i],s=o+e.length;if(!(s==o&&e.getSide()<=0)){if(t>o&&t<s&&e.dom.parentNode==n)return e.domAtPos(t-o);if(t<=o)break;o=s}}for(let o=i;o>0;o--){let e=r[o-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let o=i;o<r.length;o++){let e=r[o];if(e.dom.parentNode==n)return e.domAtPos(0)}return new DOMPos(n,0)}function joinInlineInto(e,t,n){let r,{children:i}=e;n>0&&t instanceof MarkView&&i.length&&(r=i[i.length-1])instanceof MarkView&&r.mark.eq(t.mark)?joinInlineInto(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function coordsInChildren(e,t,n){let r=null,i=-1,o=null,s=-1;!function e(t,n){for(let a=0,l=0;a<t.children.length&&l<=n;a++){let c=t.children[a],u=l+c.length;u>=n&&(c.children.length?e(c,n-l):!o&&(u>n||l==u&&c.getSide()>0)?(o=c,s=n-l):(l<n||l==u&&c.getSide()<0)&&(r=c,i=n-l)),l=u}}(e,t);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):fallbackRect(e)}function fallbackRect(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=clientRectsFor(t);return n[n.length-1]||null}function combineAttrs(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function attrsEq(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function updateAttrs(e,t,n){let r=null;if(t)for(let i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(let i in n)t&&t[i]==n[i]||e.setAttribute(r=i,n[i]);return!!r}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;class WidgetType{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var BlockType=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new PointDecoration(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=getInclusive(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new PointDecoration(e,t,n,r,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,t=!1){return RangeSet.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:t,end:n}=getInclusive(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&this.class==e.class&&attrsEq(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function getInclusive(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function widgetsEq(e,t){return e==t||!!(e&&t&&e.compare(t))}function addRange(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}PointDecoration.prototype.point=!0;class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof LineView))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),mergeChildrenInto(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new LineView;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let i=n;i<this.children.length;i++)t.append(this.children[i],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){joinInlineInto(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=combineAttrs(t,this.attrs||{})),n&&(this.attrs=combineAttrs({class:n},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var n;this.dom?4&this.dirty&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ContentView.get(r)instanceof MarkView;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(n=ContentView.get(r))||void 0===n?void 0:n.isEditable)||browser.ios&&this.children.some((e=>e instanceof TextView))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof TextView)||/[^ -~]/.test(t.text))return null;let n=clientRectsFor(t.dom);if(1!=n.length)return null;e+=n[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return coordsInChildren(this,e,t)}become(e){return!1}get type(){return BlockType.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof LineView)return i;if(o>t)break}r=o+i.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof BlockWidgetView&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new BlockWidgetView(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return noChildren}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof PointDecoration){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof PointDecoration)if(n.block){let{type:e}=n;e!=BlockType.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new BlockWidgetView(n.widget||new NullWidget("div"),s,e))}else{let o=WidgetView.create(n.widget||new NullWidget("span"),s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(wrapMarks(new WidgetBufferView(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(wrapMarks(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new ContentBuilder(e,t,n,i);return o.openEnd=RangeSet.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function wrapMarks(e,t){for(let n of t)e=new MarkView(n,[e],e.length);return e}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:e=>e.some((e=>e))}),nativeSelectionHidden=Facet.define({combine:e=>e.some((e=>e))});class ScrollTarget{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(e,t)=>e.map(t)});function logException(e,t,n){let r=e.facet(exceptionSink);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const editable=Facet.define({combine:e=>!e.length||e[0]});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:i}=t||{};return new ViewPlugin(nextPluginID++,e,n,(e=>{let t=[viewPlugin.of(e)];return i&&t.push(decorations.of((t=>{let n=t.plugin(e);return n?i(n):Decoration.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return ViewPlugin.define((t=>new e(t)),t)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(e2){if(logException(e.state,e2,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(_2){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(e2){logException(e.state,e2,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(e2){logException(e.state,e2,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new ChangedRange(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new ChangedRange(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class ViewUpdate{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new ChangedRange(e,t,n,i)))),this.changedRanges=r}static create(e,t,n){return new ViewUpdate(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Direction=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let lt of["()","[]","{}"]){let e=lt.charCodeAt(0),t=lt.charCodeAt(1);Brackets[e]=t,Brackets[t]=-e}function charType(e){return e<=247?LowTypes[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ArabicTypes[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:8204==e?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?RTL:LTR}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const types=[];function computeOrder(e,t){let n=e.length,r=t==LTR?1:2,i=t==LTR?2:1;if(!e||1==r&&!BidiRE.test(e))return trivialOrder(n);for(let s=0,a=r,l=r;s<n;s++){let t=charType(e.charCodeAt(s));512==t?t=a:8==t&&4==l&&(t=16),types[s]=4==t?2:t,7&t&&(l=t),a=t}for(let s=0,a=r,l=r;s<n;s++){let e=types[s];if(128==e)s<n-1&&a==types[s+1]&&24&a?e=types[s]=a:types[s]=256;else if(64==e){let e=s+1;for(;e<n&&64==types[e];)e++;let t=s&&8==a||e<n&&8==types[e]?1==l?1:8:256;for(let n=s;n<e;n++)types[n]=t;s=e-1}else 8==e&&1==l&&(types[s]=1);a=e,7&e&&(l=e)}for(let s,a,l,c=0,u=0,h=0;c<n;c++)if(a=Brackets[s=e.charCodeAt(c)])if(a<0){for(let e=u-3;e>=0;e-=3)if(BracketStack[e+1]==-a){let t=BracketStack[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(types[c]=types[BracketStack[e]]=n),u=e;break}}else{if(189==BracketStack.length)break;BracketStack[u++]=c,BracketStack[u++]=s,BracketStack[u++]=h}else if(2==(l=types[c])||1==l){let e=l==r;h=e?0:1;for(let t=u-3;t>=0;t-=3){let n=BracketStack[t+2];if(2&n)break;if(e)BracketStack[t+2]|=2;else{if(4&n)break;BracketStack[t+2]|=4}}}for(let s=0;s<n;s++)if(256==types[s]){let e=s+1;for(;e<n&&256==types[e];)e++;let t=1==(s?types[s-1]:r),i=t==(1==(e<n?types[e]:r))?t?1:2:r;for(let n=s;n<e;n++)types[n]=i;s=e-1}let o=[];if(1==r)for(let s=0;s<n;){let e=s,t=1!=types[s++];for(;s<n&&t==(1!=types[s]);)s++;if(t)for(let n=s;n>e;){let t=n,r=2!=types[--n];for(;n>e&&r==(2!=types[n-1]);)n--;o.push(new BidiSpan(n,t,r?2:1))}else o.push(new BidiSpan(e,s,0))}else for(let s=0;s<n;){let e=s,t=2==types[s++];for(;s<n&&t==(2==types[s]);)s++;o.push(new BidiSpan(e,s,t?1:2))}return o}function trivialOrder(e){return[new BidiSpan(0,e,0)]}let movedOver="";function moveVisually(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=BidiSpan.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=findClusterBreak(e.text,s,c);if(movedOver=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return EditorSelection.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?EditorSelection.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):EditorSelection.cursor(u+e.from,i?-1:1,l.level):EditorSelection.cursor(i?e.to:e.from,i?-1:1,n)}const LineBreakPlaceholder="￿";class DOMReader{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=ContentView.get(r),o=ContentView.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:isBlockElement(r))||isBlockElement(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=ContentView.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function isBlockElement(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class DOMPoint{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class DocView extends ContentView{constructor(e){super(),this.view=e,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,e.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=findChangedDeco(this.decorations,this.updateDeco(),e.changes);return t=ChangedRange.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=browser.chrome||browser.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let i of this.children)i instanceof BlockWidgetView&&i.widget instanceof BlockGapWidget&&r.push(i.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let r=e.length-1;;r--){let t=r>=0?e[r]:null;if(!t)break;let{fromA:i,toA:o,fromB:s,toB:a}=t,{content:l,breakAtStart:c,openStart:u,openEnd:h}=ContentBuilder.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:d,off:p}=n.findPos(o,1),{i:f,off:m}=n.findPos(i,-1);replaceRange(this,f,m,d,p,l,c,u,h)}}updateSelection(e=!1,t=!1){if(!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection())return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(browser.gecko&&r.empty&&betweenUneditable(i)){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new DOMPos(e,0),n=!0}let s=this.view.observer.selectionRange;!n&&s.focusNode&&isEquivalentPosition(i.node,i.offset,s.anchorNode,s.anchorOffset)&&isEquivalentPosition(o.node,o.offset,s.focusNode,s.focusOffset)||(this.view.observer.ignore((()=>{browser.android&&browser.chrome&&this.dom.contains(s.focusNode)&&inUneditable(s.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=getSelection(this.view.root);if(e)if(r.empty){if(browser.gecko){let e=nextToUneditable(i.node,i.offset);if(e&&3!=e){let t=nearbyTextNode(i.node,i.offset,1==e?1:-1);t&&(i=new DOMPos(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=s.cursorBidiLevel&&(s.cursorBidiLevel=r.bidiLevel)}else if(e.extend){e.collapse(i.node,i.offset);try{e.extend(o.node,o.offset)}catch(_2){}}else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}else;})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new DOMPos(s.anchorNode,s.anchorOffset),this.impreciseHead=o.precise?null:new DOMPos(s.focusNode,s.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,n=getSelection(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let o=LineView.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,i)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||hasSelection(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let e=ContentView.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof LineView)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=BlockType.WidgetBefore&&i.type!=BlockType.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==BlockType.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Direction.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],u=l+e.length;if(u>r)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),o){let t=e.dom.lastChild,r=t?clientRectsFor(t):[];if(r.length){let e=r[r.length-1],t=a?e.right-n.left:n.right-e.left;t>s&&(s=t,this.minWidth=i,this.minWidthFrom=l,this.minWidthTo=u)}}}l=u+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Direction.RTL:Direction.LTR}measureTextSize(){for(let r of this.children)if(r instanceof LineView){let e=r.measureTextSize();if(e)return e}let e,t,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=clientRectsFor(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ChildCursor(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(Decoration.replace({widget:new BlockGapWidget(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let c of this.view.state.facet(scrollMargins).map((e=>e(this.view))))if(c){let{left:e,right:t,top:n,bottom:r}=c;null!=e&&(i=Math.max(i,e)),null!=t&&(o=Math.max(o,t)),null!=n&&(s=Math.max(s,n)),null!=r&&(a=Math.max(a,r))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};scrollRectIntoView(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(e){let t=e.observer.selectionRange,n=t.focusNode&&nearbyTextNode(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof LineView){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!ContentView.get(t);)t=t.previousSibling;let i=t?ContentView.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof LineView)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}function computeCompositionDeco(e,t){let n=compositionSurroundingNode(e);if(!n)return Decoration.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==o.nodeType?o.nodeValue:new DOMReader([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),LineBreakPlaceholder)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,LineBreakPlaceholder)!=u)return Decoration.none;a=l-u.length}else if(c.doc.sliceString(a,l,LineBreakPlaceholder)!=u)return Decoration.none;let h=ContentView.get(o);return h instanceof CompositionView?h=h.widget.topView:h&&(h.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(o,s,h),inclusive:!0}).range(a,l))}class CompositionWidget extends WidgetType{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=maxOffset(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}function nextToUneditable(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(e,t){addRange(e,t,this.changes)}comparePoint(e,t){addRange(e,t,this.changes)}}function findChangedDeco(e,t,n){let r=new DecorationComparator$1;return RangeSet.compare(e,t,n,r),r.changes}function inUneditable(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}function groupAt(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return EditorSelection.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=findClusterBreak(i.text,o,!1):a=findClusterBreak(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=findClusterBreak(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=findClusterBreak(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return EditorSelection.range(s+i.from,a+i.from)}function getdx(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function getdy(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function yOverlap(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function upTop(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function upBot(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function domPosAtCoords(e,t,n){let r,i,o,s,a,l,c,u,h=!1;for(let p=e.firstChild;p;p=p.nextSibling){let e=clientRectsFor(p);for(let d=0;d<e.length;d++){let f=e[d];i&&yOverlap(i,f)&&(f=upTop(upBot(f,i.bottom),i.top));let m=getdx(t,f),g=getdy(n,f);if(0==m&&0==g)return 3==p.nodeType?domPosInText(p,t,n):domPosAtCoords(p,t,n);if(!r||s>g||s==g&&o>m){r=p,i=f,o=m,s=g;let a=g?n<f.top?-1:1:m?t<f.left?-1:1:0;h=!a||(a>0?d<e.length-1:d>0)}0==m?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=p,c=f):n<f.top&&(!u||u.top>f.top)&&(l=p,u=f):c&&yOverlap(c,f)?c=upBot(c,f.bottom):u&&yOverlap(u,f)&&(u=upTop(u,f.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let d=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?domPosInText(r,d,n):h&&"false"!=r.contentEditable?domPosAtCoords(r,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}}function domPosInText(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=textRange(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(browser.chrome||browser.gecko){textRange(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function posAtCoords(e,t,n,r=-1){var i;let o,s=e.contentDOM.getBoundingClientRect(),a=s.top+e.viewState.paddingTop,{docHeight:l}=e.viewState,{x:c,y:u}=t,h=u-a;if(h<0)return 0;if(h>l)return e.state.doc.length;for(let v=e.defaultLineHeight/2,y=!1;o=e.elementAtHeight(h),o.type!=BlockType.Text;)for(;h=r>0?o.bottom+v:o.top-v,!(h>=0&&h<=l);){if(y)return n?null:0;y=!0,r=-r}u=a+h;let d=o.from;if(d<e.viewport.from)return 0==e.viewport.from?0:n?null:posAtCoordsImprecise(e,s,o,c,u);if(d>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:posAtCoordsImprecise(e,s,o,c,u);let p=e.dom.ownerDocument,f=e.root.elementFromPoint?e.root:p,m=f.elementFromPoint(c,u);m&&!e.contentDOM.contains(m)&&(m=null),m||(c=Math.max(s.left+1,Math.min(s.right-1,c)),m=f.elementFromPoint(c,u),m&&!e.contentDOM.contains(m)&&(m=null));let g,_=-1;if(m&&0!=(null===(i=e.docView.nearest(m))||void 0===i?void 0:i.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,u);e&&({offsetNode:g,offset:_}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(c,u);t&&(({startContainer:g,startOffset:_}=t),(!e.contentDOM.contains(g)||browser.safari&&isSuspiciousSafariCaretResult(g,_,c)||browser.chrome&&isSuspiciousChromeCaretResult(g,_,c))&&(g=void 0))}if(!g||!e.docView.dom.contains(g)){let t=LineView.find(e.docView,d);if(!t)return h>o.top+o.height/2?o.to:o.from;({node:g,offset:_}=domPosAtCoords(t.dom,c,u))}let b=e.docView.nearest(g);if(!b)return null;if(b.isWidget){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(g,_)+b.posAtStart}function posAtCoordsImprecise(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+findColumn(s,o,e.state.tabSize)}function isSuspiciousSafariCaretResult(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let i=e.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return textRange(e,r-1,r).getBoundingClientRect().left>n}function isSuspiciousChromeCaretResult(e,t,n){if(0!=t)return!1;for(let r=e;;){let e=r.parentNode;if(!e||1!=e.nodeType||e.firstChild!=r)return!1;if(e.classList.contains("cm-line"))break;r=e}return n-(1==e.nodeType?e.getBoundingClientRect():textRange(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}function moveToLineBoundary(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==Direction.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return EditorSelection.cursor(s,n?-1:1)}let s=LineView.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return EditorSelection.cursor(a,n?-1:1)}function moveByChar(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=moveVisually(i,o,s,a,n),c=movedOver;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=EditorSelection.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function byGroup(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==CharCategory.Space&&(i=t),i==t}}function moveVertically(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return EditorSelection.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!=r?r:e.defaultLineHeight>>1;for(let p=0;;p+=10){let n=s+(d+p)*o,r=posAtCoords(e,{x:h,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?r<i:r>i))return EditorSelection.cursor(r,t.assoc,void 0,a)}}function skipAtoms(e,t,n){let r=e.state.facet(atomicRanges).map((t=>t(e)));for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.head>n.from?EditorSelection.cursor(r,1):EditorSelection.cursor(i,-1),e=!0)}));if(!e)return n}}class InputState{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let t=(t,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(n.type,e,n)?n.preventDefault():t(e,n))};for(let n in handlers){let r=handlers[n];e.contentDOM.addEventListener(n,(n=>{eventBelongsToEditor(e,n)&&t(r,n)}),handlerOptions[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",(n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(handlers.mousedown,n)})),browser.chrome&&102==browser.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{eventBelongsToEditor(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e2){logException(t.state,e2)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(e2){logException(e.state,e2)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!browser.ios||t.synthetic||t.altKey||t.metaKey||!((n=PendingKeys.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||EmacsyPendingKeys.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=n||t,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,dispatchKey(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(browser.safari&&!browser.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(e){return.7*e+8}class MouseSelection{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=scrollableParent(e.contentDOM);let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,t),this.dragMove=dragMovesSelection(e,t),this.dragging=!(!isInPrimarySelection(e,t)||1!=getClickType(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let n=0,r=0,i=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=i.left?n=-dragScrollSpeed(i.left-e.clientX):e.clientX>=i.right&&(n=dragScrollSpeed(e.clientX-i.right)),e.clientY<=i.top?r=-dragScrollSpeed(i.top-e.clientY):e.clientY>=i.bottom&&(r=dragScrollSpeed(e.clientY-i.bottom)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function addsSelectionRange(e,t){let n=e.state.facet(clickAddsSelectionRange);return n.length?n[0](t):browser.mac?t.metaKey:t.ctrlKey}function dragMovesSelection(e,t){let n=e.state.facet(dragMovesSelection$1);return n.length?n[0](t):browser.mac?!t.altKey:!t.ctrlKey}function isInPrimarySelection(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=getSelection(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let e=i[o];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}function eventBelongsToEditor(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=ContentView.get(r))&&n.ignoreEvent(t))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),doPaste(e,n.value)}),50)}function doPaste(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=lastLinewiseCopy&&r.selection.ranges.every((e=>e.empty))&&lastLinewiseCopy==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:EditorSelection.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:EditorSelection.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function rangeForClick(e,t,n,r){if(1==r)return EditorSelection.cursor(t,n);if(2==r)return groupAt(e.state,t,n);{let n=LineView.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,EditorSelection.range(i,o)}}handlers.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():modifierCodes.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},handlers.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},handlers.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},handlerOptions.touchstart=handlerOptions.touchmove={passive:!0},handlers.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of e.state.facet(mouseSelectionStyle))if(n=r(e,t),n)break;if(n||0!=t.button||(n=basicMouseSelection(e,t)),n){let r=e.root.activeElement!=e.contentDOM;e.inputState.startMouseSelection(new MouseSelection(e,t,n,r)),r&&e.observer.ignore((()=>focusPreventScroll(e.contentDOM))),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}};let insideY=(e,t)=>e>=t.top&&e<=t.bottom,inside=(e,t,n)=>insideY(t,n)&&e>=n.left&&e<=n.right;function findPositionSide(e,t,n,r){let i=LineView.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&inside(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&inside(n,r,a)?1:s&&insideY(r,s)?-1:1}function queryPos(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:findPositionSide(e,n,t.clientX,t.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(e){if(!BadMouseDetail)return e.detail;let t=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=e,lastMouseDownTime=Date.now(),lastMouseDownCount=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(e,t){let n=queryPos(e,t),r=getClickType(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,s){let a=queryPos(e,t),l=rangeForClick(e,a.pos,a.bias,r);if(n.pos!=a.pos&&!o){let t=rangeForClick(e,n.pos,n.bias,r),i=Math.min(t.from,l.from),o=Math.max(t.to,l.to);l=i<l.from?EditorSelection.range(i,o):EditorSelection.range(o,i)}return o?i.replaceRange(i.main.extend(l.from,l.to)):s&&i.ranges.length>1&&i.ranges.some((e=>e.eq(l)))?removeRange(i,l):s?i.addRange(l):EditorSelection.create([l])}}}function removeRange(e,t){for(let n=0;;n++)if(e.ranges[n].eq(t))return EditorSelection.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}function dropText(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}function captureCopy(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}function copiedRange(e){let t=[],n=[],r=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}handlers.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},handlers.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&dropText(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else dropText(e,t,t.dataTransfer.getData("Text"),!0)},handlers.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=brokenClipboardAPI?null:t.clipboardData;n?(doPaste(e,n.getData("text/plain")),t.preventDefault()):capturePaste(e)};let lastLinewiseCopy=null;handlers.copy=handlers.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=copiedRange(e.state);if(!n&&!i)return;lastLinewiseCopy=i?n:null;let o=brokenClipboardAPI?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):captureCopy(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(e,t){let n=[];for(let r of e.facet(focusChangeEffect)){let i=r(e,t);i&&n.push(i)}return n?e.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=focusChangeTransaction(e.state,t);n?e.dispatch(n):e.update([])}}),10)}handlers.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),updateForFocusChange(e)},handlers.blur=e=>{e.observer.clearSelectionRange(),updateForFocusChange(e)},handlers.compositionstart=handlers.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},handlers.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,browser.chrome&&browser.android&&e.observer.flushSoon(),setTimeout((()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},handlers.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(e,t)=>{var n;let r;if(browser.chrome&&browser.android&&(r=PendingKeys.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i){let o=wrappingWhiteSpace.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class MeasuredHeights{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var QueryType$1=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Epsilon&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return HeightMap.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],h=i.lineAt(a,QueryType$1.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:i.lineAt(l,QueryType$1.ByPosNoHeight,n,0,0);for(u+=d.to-l,l=d.to;s>0&&h.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,QueryType$1.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let p=NodeBuilder.build(n.setDoc(o),e,c,u);i=i.replace(a,l,p)}return i.updateHeight(n,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new HeightMapBranch(HeightMap.of(e.slice(0,t)),o,HeightMap.of(e.slice(n)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new BlockInfo(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,t){super(e,t,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof HeightMapText||r instanceof HeightMapGap&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof HeightMapGap?r=new HeightMapText(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):HeightMap.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);n=t/o,s=(this.height-t)/(this.length-o-1)}else n=this.height/o;return{firstLine:r,lastLine:i,perLine:n,perChar:s}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(n,e-l/2);return new BlockInfo(o.from,o.length,c,l,BlockType.Text)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(i+r);return new BlockInfo(a,l,n+s*r,s,BlockType.Text)}}lineAt(e,t,n,r,i){if(t==QueryType$1.ByHeight)return this.blockAt(e,n,r,i);if(t==QueryType$1.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new BlockInfo(t,r-t,0,0,BlockType.Text)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-o,h=r+s*u+a*(l.from-i-u);return new BlockInfo(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,BlockType.Text)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-i-n)}let r=a+l*t.length;o(new BlockInfo(t.from,t.length,u,r,BlockType.Text)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof HeightMapGap?n[n.length-1]=new HeightMapGap(e.length+r):n.push(null,new HeightMapGap(r-1))}if(e>0){let t=n[0];t instanceof HeightMapGap?n[0]=new HeightMapGap(e+t.length):n.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(n)}decomposeLeft(e,t){t.push(new HeightMapGap(e-1),null)}decomposeRight(e,t){t.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&n.push(new HeightMapGap(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Epsilon&&(s=-2);let a=new HeightMapText(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new HeightMapGap(i-o).updateHeight(e,o));let a=HeightMap.of(n);return(s<0||Math.abs(a.height-this.height)>=Epsilon||Math.abs(s-this.heightMetrics(e,t).perLine)>=Epsilon)&&(e.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==QueryType$1.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,QueryType$1.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let s of n)i.push(s);if(e>0&&mergeGaps(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),mergeGaps(i,e)}return HeightMap.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?HeightMap.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof HeightMapGap&&(r=e[t+1])instanceof HeightMapGap&&e.splice(t-1,3,new HeightMapGap(n.length+1+r.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof HeightMapText?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new HeightMapBlock(i,r,n.type)):(i||r>=relevantWidgetHeight)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new HeightMapGap(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let t=new HeightMapText(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=BlockType.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=BlockType.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof HeightMapText||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new HeightMapText(0,-1));let n=e;for(let r of this.nodes)r instanceof HeightMapText&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let i=new NodeBuilder(n,e);return RangeSet.spans(t,n,r,i,0),i.finish(n)}}function heightRelevantDecoChanges(e,t,n){let r=new DecorationComparator;return RangeSet.compare(e,t,n,r,0),r.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&addRange(e,t,this.changes,5)}}function visiblePixelRange(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=r.body;)if(1==c.nodeType){let t=c,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();o=Math.max(o,n.left),s=Math.min(s,n.right),a=Math.max(a,n.top),l=c==e.parentNode?n.bottom:Math.min(l,n.bottom)}c="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function fullPixelRange(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class LineGap{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return Decoration.replace({widget:new LineGapWidget(this.size,e)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(contentAttributes).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new HeightOracle(t),this.stateDeco=e.facet(decorations).filter((e=>"function"!=typeof e)),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Viewport(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:scaleBlock(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=ChangedRange.extendWithRanges(r,heightRelevantDecoChanges(n,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2);let s=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Direction.RTL:Direction.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0,u=parseInt(n.paddingTop)||0,h=parseInt(n.paddingBottom)||0;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=(this.printing?fullPixelRange:visiblePixelRange)(t,this.paddingTop),p=d.top-this.pixelViewport.top,f=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let g=s.width;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=e.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,g/s,t),o&&(e.docView.minWidth=0,l|=8)}p>0&&f>0?c=Math.max(p,f):p<0&&f<0&&(c=Math.min(p,f)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new MeasuredHeights(n.from,i))}r.heightChanged&&(l|=2)}let _=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Viewport(r.lineAt(o-1e3*n,QueryType$1.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),QueryType$1.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,QueryType$1.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Viewport(r.lineAt(n-500,QueryType$1.ByHeight,i,0,0).from,r.lineAt(n+o+500,QueryType$1.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new LineGap(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=Direction.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let e of h)if(e>r&&e<o)return a(r,e-10,l,c),void a(e+10,o,l,c);let d=find(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!h.some((t=>e.from<t&&e.to>t))));if(!d){if(o<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=o&&e.to>=o))){let e=t.moveToLineBoundary(EditorSelection.cursor(o),!1,!0).head;e>r&&(o=e)}d=new LineGap(r,o,this.gapSize(l,r,o,c))}s.push(d)};for(let l of this.viewportLines){if(l.length<o)continue;let e=lineStructure(l.from,l.to,this.stateDeco);if(e.total<o)continue;let t,i,s=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,a=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=s){let t=findFraction(e,s),r=((this.visibleBottom-this.visibleTop)/2+a)/l.height;n=t-r,o=t+r}else n=(this.visibleTop-l.top-a)/l.height,o=(this.visibleBottom-l.top+a)/l.height;t=findPosition(e,n),i=findPosition(e,o)}else{let n,o,a=e.total*this.heightOracle.charWidth,l=r*this.heightOracle.charWidth;if(null!=s){let t=findFraction(e,s),r=((this.pixelViewport.right-this.pixelViewport.left)/2+l)/a;n=t-r,o=t+r}else n=(this.pixelViewport.left-l)/a,o=(this.pixelViewport.right+l)/a;t=findPosition(e,n),i=findPosition(e,o)}t>l.from&&a(l.from,t,l,e),i<l.to&&a(i,l.to,l,e)}return s}gapSize(e,t,n,r){let i=findFraction(r,n)-findFraction(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,t){this.from=e,this.to=t}}function lineStructure(e,t,n){let r=[],i=e,o=0;return RangeSet.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function findPosition({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let i=0;;i++){let{from:e,to:n}=t[i],o=n-e;if(r<=o)return e+r;r-=o}}function findFraction(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function find(e,t){for(let n of e)if(t(n))return n}const IdScaler={toDOM:e=>e,fromDOM:e=>e,scale:1};class BigScaler{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,QueryType$1.ByPos,e,0,0).top,s=t.lineAt(i,QueryType$1.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let s of this.viewports)s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function scaleBlock(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new BlockInfo(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>scaleBlock(e,t))):e.type)}const theme=Facet.define({combine:e=>e.join(" ")}),darkTheme=Facet.define({combine:e=>e.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(e,t,n){return new StyleModule(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:selectionPoints(e),n=new DOMReader(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=selectionFromPoints(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!contains(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!contains(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=EditorSelection.single(r,n)}}}function applyDOMChange(e,t){let n,{newSel:r}=t,i=e.state.selection.main;if(t.bounds){let{from:r,to:o}=t.bounds,s=i.from,a=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||browser.android&&t.text.length<o-r)&&(s=i.to,a="end");let l=findDiff(e.state.doc.sliceString(r,o,LineBreakPlaceholder),t.text,s-r,a);l&&(browser.chrome&&13==e.inputState.lastKeyCode&&l.toB==l.from+2&&t.text.slice(l.from,l.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&l.toB--,n={from:r+l.from,to:r+l.toA,insert:Text.of(t.text.slice(l.from,l.toB).split(LineBreakPlaceholder))})}else r&&(!e.hasFocus&&e.state.facet(editable)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=EditorSelection.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Text.of([" "])}):browser.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=EditorSelection.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Text.of([" "])}),n){let t=e.state;if(browser.ios&&e.inputState.flushIOSKey(e))return!0;if(browser.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&dispatchKey(e.contentDOM,"Enter",13)||n.from==i.from-1&&n.to==i.to&&0==n.insert.length&&dispatchKey(e.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&dispatchKey(e.contentDOM,"Delete",46)))return!0;let o,s=n.insert.toString();if(e.state.facet(inputHandler$1).some((t=>t(e,n.from,n.to,s))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let r=i.from<n.from?t.sliceDoc(i.from,n.from):"",s=i.to>n.to?t.sliceDoc(n.to,i.to):"";o=t.replaceSelection(e.state.toText(r+n.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=t.changes(n),a=r&&!t.selection.main.eq(r.main)&&r.main.to<=s.newLength?r.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let r=e.state.sliceDoc(n.from,n.to),l=compositionSurroundingNode(e)||e.state.doc.lineAt(i.head),c=i.to-n.to,u=i.to-i.from;o=t.changeByRange((o=>{if(o.from==i.from&&o.to==i.to)return{changes:s,range:a||o.map(s)};let h=o.to-c,d=h-r.length;if(o.to-o.from!=u||e.state.sliceDoc(d,h)!=r||l&&o.to>=l.from&&o.from<=l.to)return{range:o};let p=t.changes({from:d,to:h,insert:n.insert}),f=o.to-i.to;return{changes:p,range:a?EditorSelection.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):o.map(p)}}))}else o={changes:s,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(o,{scrollIntoView:!0,userEvent:a}),!0}if(r&&!r.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}function findDiff(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function selectionPoints(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new DOMPoint(n,r)),i==n&&o==r||t.push(new DOMPoint(i,o))),t}function selectionFromPoints(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?EditorSelection.single(n+t,r+t):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),useCharData&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(editable)?n.root.activeElement!=this.dom:!hasSelection(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!n.state.selection.main.empty&&r.focusNode&&isEquivalentPosition(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=browser.safari&&11==e.root.nodeType&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=hasSelection(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),!this.flush()&&e.force&&dispatchKey(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let i of this.observer.takeRecords())e.push(i);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=applyDOMChange(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=findChild(t,e.previousSibling||e.target.previousSibling,-1),r=findChild(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(r=this.resizeContent)||void 0===r||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(e,t,n){for(;t;){let r=ContentView.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function safariSelectionRangeHack(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return isEquivalentPosition(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}class EditorView{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),this.plugins=this.state.facet(viewPlugin).map((e=>new PluginInstance(e)));for(let t of this.plugins)t.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof Transaction?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,s=0,a=null;e.some((e=>e.annotation(isFocusChange)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=focusChangeTransaction(i,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(i);t=ViewUpdate.create(this,i,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new ScrollTarget(e.empty?e:EditorSelection.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(scrollIntoView$1)&&(u=e.value)}this.viewState.update(t,u),this.bidiCache=CachedOrder.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(theme)!=t.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let h of this.state.facet(updateListener))h(t);(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!applyDOMChange(this,c)&&l.force&&dispatchKey(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map((e=>new PluginInstance(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(viewPlugin),n=e.state.facet(viewPlugin);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new PluginInstance(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:n,scrollTop:r,clientHeight:i}=this.scrollDOM,o=r>n-i-4?n:r;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.lineBlockAtHeight(o),i=this.viewState.measure(this);if(!i&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&i||([this.measureRequests,s]=[s,this.measureRequests]);let a=s.map((e=>{try{return e.read(this)}catch(e2){return logException(this.state,e2),BadMeasure}})),l=ViewUpdate.create(this,this.state,[]),c=!1,u=!1;l.flags|=i,t?t.flags|=i:t=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),c=this.docView.update(l));for(let e=0;e<s.length;e++)if(a[e]!=BadMeasure)try{let t=s[e];t.write&&t.write(a[e],this)}catch(e2){logException(this.state,e2)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0;else{let e=this.viewState.lineBlockAt(r.from).top-r.top;(e>1||e<-1)&&(this.scrollDOM.scrollTop+=e,u=!0)}if(c&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(updateListener))s(t)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,t);let n=this.observer.ignore((()=>{let n=updateAttrs(this.contentDOM,this.contentAttrs,t),r=updateAttrs(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(EditorView.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return skipAtoms(this,e,moveByChar(this,e,t,n))}moveByGroup(e,t){return skipAtoms(this,e,moveByChar(this,e,t,(t=>byGroup(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return moveToLineBoundary(this,e,t,n)}moveVertically(e,t,n){return skipAtoms(this,e,moveVertically(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),posAtCoords(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return flattenRect(n,i[BidiSpan.find(i,e-r.from,-1,t)].dir==Direction.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let n=computeOrder(e.text,t);return this.bidiCache.push(new CachedOrder(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return scrollIntoView$1.of(new ScrollTarget("number"==typeof e?EditorSelection.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ViewPlugin.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=StyleModule.newName(),r=[theme.of(n),styleModule.of(buildTheme(`.${n}`,e))];return t&&t.dark&&r.push(darkTheme.of(!0)),r}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&ContentView.get(n)||ContentView.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.atomicRanges=atomicRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Direction.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new CachedOrder(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function attrsFromFacet(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&combineAttrs(o,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}function modifiers(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown:(e,t)=>runHandlers(getKeymap(t.state),e,t,"editor")})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(e){let t=e.facet(keymap),n=Keymaps.get(t);return n||Keymaps.set(t,n=buildKeymap(t.reduce(((e,t)=>e.concat(t)),[]))),n}function runScopeHandlers(e,t,n){return runHandlers(getKeymap(e.state),t,e,n)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(e,t=currentPlatform){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{var a,l;let c=n[e]||(n[e]=Object.create(null)),u=r.split(/ (?!$)/).map((e=>normalizeKeyName(e,t)));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");i(n,!0),c[n]||(c[n]={preventDefault:!0,run:[t=>{let r=storedPrefix={view:t,prefix:n,scope:e};return setTimeout((()=>{storedPrefix==r&&(storedPrefix=null)}),PrefixTimeout),!0}]})}let h=u.join(" ");i(h,!1);let d=c[h]||(c[h]={preventDefault:!1,run:(null===(l=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===l?void 0:l.slice())||[]});o&&d.run.push(o),s&&(d.preventDefault=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,run:[]});for(let t in e)e[t].run.push(s.any)}let r=s[t]||s.key;if(r)for(let t of e)o(t,r,s.run,s.preventDefault),s.shift&&o(t,"Shift-"+r,s.shift,s.preventDefault)}return n}function runHandlers(e,t,n,r){let i=keyName(t),o=codePointSize(codePointAt(i,0))==i.length&&" "!=i,s="",a=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==r&&(s=storedPrefix.prefix+" ",(a=modifierCodes.indexOf(t.keyCode)<0)&&(storedPrefix=null));let l,c,u=new Set,h=e=>{if(e){for(let r of e.run)if(!u.has(r)&&(u.add(r),r(n,t)))return!0;e.preventDefault&&(a=!0)}return!1},d=e[r];if(d){if(h(d[s+modifiers(i,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(browser.windows&&t.ctrlKey&&t.altKey)&&(l=base[t.keyCode])&&l!=i){if(h(d[s+modifiers(l,t,!0)]))return!0;if(t.shiftKey&&(c=shift[t.keyCode])!=i&&c!=l&&h(d[s+modifiers(c,t,!1)]))return!0}else if(o&&t.shiftKey&&h(d[s+modifiers(i,t,!0)]))return!0;if(h(d._any))return!0}return a}class RectangleMarker{constructor(e,t,n,r,i){this.className=e,this.left=t,this.top=n,this.width=r,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=getBase(e);return[new RectangleMarker(t,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}return rectanglesForRange(e,t,n)}}function getBase(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Direction.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function wrappedLine(e,t,n){let r=EditorSelection.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:BlockType.Text}}function blockAt(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==BlockType.Text))return r;return n}function rectanglesForRange(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),i=Math.min(n.to,e.viewport.to),o=e.textDirection==Direction.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=getBase(e),c=window.getComputedStyle(s.firstChild),u=a.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),h=a.right-parseInt(c.paddingRight),d=blockAt(e,r),p=blockAt(e,i),f=d.type==BlockType.Text?d:null,m=p.type==BlockType.Text?p:null;if(e.lineWrapping&&(f&&(f=wrappedLine(e,r,f)),m&&(m=wrappedLine(e,i,m))),f&&m&&f.from==m.from)return _(b(n.from,n.to,f));{let t=f?b(n.from,null,f):v(d,!1),r=m?b(null,n.to,m):v(p,!0),i=[];return(f||d).to<(m||p).from-1?i.push(g(u,t.bottom,h,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==BlockType.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),_(t).concat(i).concat(_(r))}function g(e,n,r,i){return new RectangleMarker(t,e-l.left,n-l.top-.01,r-e,i-n+.01)}function _({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(g(n[i],e,n[i+1],t));return r}function b(t,n,r){let i=1e9,s=-1e9,a=[];function l(t,n,l,c,d){let p=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(l,l==r.from?2:-2);i=Math.min(p.top,f.top,i),s=Math.max(p.bottom,f.bottom,s),d==Direction.LTR?a.push(o&&n?u:p.left,o&&c?h:f.right):a.push(!o&&c?u:f.left,!o&&n?h:p.right)}let c=null!=t?t:r.from,d=null!=n?n:r.to;for(let o of e.visibleRanges)if(o.to>c&&o.from<d)for(let r=Math.max(o.from,c),i=Math.min(o.to,d);;){let o=e.state.doc.lineAt(r);for(let s of e.bidiSpans(o)){let e=s.from+o.from,a=s.to+o.from;if(e>=i)break;a>r&&l(Math.max(e,r),null==t&&e<=c,Math.min(a,i),null==n&&a>=d,s.dir)}if(r=o.to+1,r>=i)break}return 0==a.length&&l(c,null==t,d,null==n,e.textDirection),{top:i,bottom:s,horizontal:a}}function v(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}function sameMarker(e,t){return e.constructor==t.constructor&&e.eq(t)}class LayerView{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(layerOrder);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!sameMarker(e,this.drawn[t])))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(e){return[ViewPlugin.define((t=>new LayerView(t,e))),layerOrder.of(e)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine:e=>combineConfig(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function drawSelection(e={}){return[selectionConfig.of(e),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(e){return e.startState.facet(selectionConfig)!=e.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(e){let{state:t}=e,n=t.facet(selectionConfig),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty?!o||CanHidePrimary:n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:EditorSelection.cursor(i.head,i.head>i.anchor?-1:1);for(let i of RectangleMarker.forRange(e,t,n))r.push(i)}}return r},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=configChanged(e);return n&&setBlinkRate(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){setBlinkRate(t.state,e)},class:"cm-cursorLayer"});function setBlinkRate(e,t){t.style.animationDuration=e.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:RectangleMarker.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||configChanged(e),class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map:(e,t)=>null==e?null:t.mapPos(e)}),dropCursorPos=StateField.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(setDropCursorPos)?t.value:e),e))}),drawDropCursor=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(dropCursorPos);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(dropCursorPos)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(dropCursorPos),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(dropCursorPos)!=e&&this.view.dispatch({effects:setDropCursorPos.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,o)}function matchRanges(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class MatchDecorator{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,i)=>{let o=n(e,t,r);o&&i(r,r+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,i)=>i(r,r+e[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(e){let t=new RangeSetBuilder,n=t.add.bind(t);for(let{from:r,to:i}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,r,i,((t,r)=>this.addMatch(r,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[],h=(e,t,n)=>u.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,e,c.index+n.from,h);else iterMatches(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,h)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const UnicodeRegexpSupport=null!=/x/.unicode?"gu":"g",Specials=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var e;if(null==_supportsTabSize&&"undefined"!=typeof document&&document.body){let t=document.body.style;_supportsTabSize=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(e){let t=combineConfig(e,{render:null,specialChars:Specials,addSpecialChars:null});return(t.replaceTabs=!supportsTabSize())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,UnicodeRegexpSupport)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,UnicodeRegexpSupport)),t}});function highlightSpecialChars(e={}){return[specialCharConfig.of(e),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new MatchDecorator({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=codePointAt(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=countColumn(e.text,t,r-e.from);return Decoration.replace({widget:new TabWidget((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Decoration.replace({widget:new SpecialCharWidget(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(specialCharConfig);e.startState.facet(specialCharConfig)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const DefaultPlaceholder="•";function placeholder$1(e){return e>=32?DefaultPlaceholder:10==e?"␤":String.fromCharCode(9216+e)}class SpecialCharWidget extends WidgetType{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=placeholder$1(this.code),n=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let i=e.lineBlockAt(r.head);i.from>t&&(n.push(lineDeco.range(i.from)),t=i.from)}return Decoration.set(n)}},{decorations:e=>e.decorations});class Placeholder extends WidgetType{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function placeholder(e){return ViewPlugin.fromClass(class{constructor(t){this.view=t,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(e),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:e=>e.decorations})}const MaxOff=2e3;function rectangleFor(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>MaxOff||n.off>MaxOff||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(EditorSelection.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=findColumn(n.text,s,e.tabSize,!0);if(r<0)o.push(EditorSelection.cursor(n.to));else{let t=findColumn(n.text,a,e.tabSize);o.push(EditorSelection.range(n.from+r,n.from+t))}}}return o}function absoluteColumn(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}function getPos(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>MaxOff?-1:i==r.length?absoluteColumn(e,t.clientX):countColumn(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function rectangleSelectionStyle(e,t){let n=getPos(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=getPos(e,t);if(!s)return r;let a=rectangleFor(e.state,n,s);return a.length?o?EditorSelection.create(a.concat(r.ranges)):EditorSelection.create(a):r}}:null}function rectangularSelection(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return EditorView.mouseSelectionStyle.of(((e,n)=>t(n)?rectangleSelectionStyle(e,n):null))}const keys={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(e={}){let[t,n]=keys[e.key||"Alt"],r=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,EditorView.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?showCrosshair:null}))]}const Outside="-10000px";class TooltipViewManager{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter((e=>e));if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let i=[];for(let o=0;o<r.length;o++){let t=r[o],n=-1;if(t){for(let e=0;e<this.tooltips.length;e++){let r=this.tooltips[e];r&&r.create==t.create&&(n=e)}if(n<0)i[o]=this.createTooltipView(t);else{let t=i[o]=this.tooltipViews[n];t.update&&t.update(e)}}}for(let o of this.tooltipViews)i.indexOf(o)<0&&(o.dom.remove(),null===(t=o.destroy)||void 0===t||t.call(o));return this.input=n,this.tooltips=r,this.tooltipViews=i,!0}}function windowSpace(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const tooltipConfig=Facet.define({combine:e=>{var t,n,r;return{position:browser.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(tooltipConfig);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(e,showTooltip,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(tooltipConfig);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=Outside,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),null===(e=n.destroy)||void 0===e||e.call(n);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(e){var t;let{editor:n,space:r}=e,i=[];for(let o=0;o<this.manager.tooltips.length;o++){let s=this.manager.tooltips[o],a=this.manager.tooltipViews[o],{dom:l}=a,c=e.pos[o],u=e.size[o];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){l.style.top=Outside;continue}let h=s.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,d=h?7:0,p=u.right-u.left,f=null!==(t=knownHeight.get(a))&&void 0!==t?t:u.bottom-u.top,m=a.offset||noOffset,g=this.view.textDirection==Direction.LTR,_=u.width>r.right-r.left?g?r.left:r.right-u.width:g?Math.min(c.left-(h?14:0)+m.x,r.right-p):Math.max(r.left,c.left-p+(h?14:0)-m.x),b=!!s.above;!s.strictSide&&(b?c.top-(u.bottom-u.top)-m.y<r.top:c.bottom+(u.bottom-u.top)+m.y>r.bottom)&&b==r.bottom-c.bottom>c.top-r.top&&(b=!b);let v=(b?c.top-r.top:r.bottom-c.bottom)-d;if(v<f&&!1!==a.resize){if(v<this.view.defaultLineHeight){l.style.top=Outside;continue}knownHeight.set(a,f),l.style.height=(f=v)+"px"}else l.style.height&&(l.style.height="");let y=b?c.top-f-d-m.y:c.bottom+d+m.y,O=_+p;if(!0!==a.overlap)for(let e of i)e.left<O&&e.right>_&&e.top<y+f&&e.bottom>y&&(y=b?e.top-f-2-d:e.bottom+d+2);"absolute"==this.position?(l.style.top=y-e.parent.top+"px",l.style.left=_-e.parent.left+"px"):(l.style.top=y+"px",l.style.left=_+"px"),h&&(h.style.left=c.left+(g?m.x:-m.x)-(_+14-7)+"px"),!0!==a.overlap&&i.push({left:_,top:y,right:O,bottom:y+f}),l.classList.toggle("cm-tooltip-above",b),l.classList.toggle("cm-tooltip-below",!b),a.positioned&&a.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,(e=>this.createHostedView(e)))}static create(e){return new HoverTooltipHost(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],(e=>{let t=e.facet(showHoverTooltip).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:HoverTooltipHost.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class HoverPlugin{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),i=r&&r.dir==Direction.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-i:i);if(null==o?void 0:o.then){let e=this.pending={pos:t};o.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>logException(this.view.state,e,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:isOverRange(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let u=0;u<c.length;u++){let e=c[u];if(Math.max(e.top-i,i-e.bottom,e.left-r,r-e.right)<=o)return!0}return!1}function hoverTooltip(e,t={}){let n=StateEffect.define(),r=StateField.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,MapMode.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(closeHoverTooltipEffect)&&(e=null);return e},provide:e=>showHoverTooltip.from(e)});return[r,ViewPlugin.define((i=>new HoverPlugin(i,e,r,n,t.hoverTime||300))),showHoverTooltipHost]}function getTooltip(e,t){let n=e.plugin(tooltipPlugin);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function getPanel(e,t){let n=e.plugin(panelPlugin),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(e){this.input=e.state.facet(showPanel),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(panelConfig);this.top=new PanelGroup(e,!0,t.topContainer),this.bottom=new PanelGroup(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(panelConfig);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new PanelGroup(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(showPanel);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>EditorView.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class PanelGroup{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(e){let t=e.nextSibling;return e.remove(),t}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(e){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),e))]}const unfixGutters=Facet.define({combine:e=>e.some((e=>e))});function gutters(e){let t=[gutterView];return e&&!1===e.fixed&&t.push(unfixGutters.of(!0)),t}const gutterView=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(activeGutters).map((t=>new SingleGutterView(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),r=[],i=this.gutters.map((e=>new UpdateContext(e,this.view.viewport,-this.view.documentPadding.top)));for(let o of this.view.viewportLineBlocks){let e;if(Array.isArray(o.type)){for(let t of o.type)if(t.type==BlockType.Text){e=t;break}}else e=o.type==BlockType.Text?o:void 0;if(e){r.length&&(r=[]),advanceCursor(n,r,o.from);for(let t of i)t.line(this.view,e,r)}}for(let o of i)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(activeGutters),n=e.state.facet(activeGutters),r=e.docChanged||e.heightChanged||e.viewportChanged||!RangeSet.eq(e.startState.facet(gutterLineClass),e.state.facet(gutterLineClass),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let i of this.gutters)i.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new SingleGutterView(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>EditorView.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Direction.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function asArray(e){return Array.isArray(e)?e:[e]}function advanceCursor(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class UpdateContext{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=RangeSet.iter(e.markers,t.from)}line(e,t,n){let r=[];advanceCursor(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let n=new GutterElement(e,t.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class SingleGutterView{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i,o=r.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=r.clientY;let s=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()}));this.markers=asArray(t.markers(e)),t.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!RangeSet.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),sameMarkers(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function sameMarkers(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine:e=>combineConfig(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let e=n[r],i=t[r];n[r]=e?(t,n,r)=>e(t,n,r)||i(t,n,r):i}return n}})});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(e,t){return e.state.facet(lineNumberConfig).formatNumber(t,e.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(lineNumberMarkers),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer:e=>new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines))),updateSpacer(e,t){let n=formatNumber(t.view,maxLineNumber(t.view.state.doc.lines));return n==e.number?e:new NumberMarker(n)},domEventHandlers:e.facet(lineNumberConfig).domEventHandlers})));function lineNumbers(e={}){return[lineNumberConfig.of(e),gutters(),lineNumberGutter]}function maxLineNumber(e){let t=9;for(;t<e;)t=10*t+9;return t}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(activeLineGutterMarker.range(i)))}return RangeSet.of(t)}));function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(e){return Facet.define({combine:e?t=>t.concat(e):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,t,n=[],r=""){this.data=e,this.name=r,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=t,this.extension=[language.of(this),EditorState.languageData.of(((e,t,n)=>{let r=topNodeAt(e,t,n),i=r.type.prop(languageDataProp);if(!i)return[];let o=e.facet(i),s=r.type.prop(sublanguageProp);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(e,t,n=-1){return topNodeAt(e,t,n).type.prop(languageDataProp)==this.data}findRegions(e){let t=e.facet(language);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(languageDataProp)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(NodeProp.mounted);if(i){if(i.tree.prop(languageDataProp)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof Tree&&r(i,e.positions[n]+t)}};return r(syntaxTree(e),0),n}get allowsNesting(){return!0}}function topNodeAt(e,t,n){let r=e.facet(language),i=syntaxTree(e).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(t,n,IterMode.ExcludeBuffers))o.type.isTop&&(i=o);return i}Language.setState=StateEffect.define();class LRLanguage extends Language{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=defineLanguageFacet(e.languageData);return new LRLanguage(t,e.parser.configure({props:[languageDataProp.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new LRLanguage(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(e){let t=e.field(Language.state,!1);return t?t.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let currentContext=null;class ParseContext{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new ParseContext(e,t,[],Tree.empty,0,n,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Tree.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=currentContext;currentContext=this;try{return e()}finally{currentContext=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cutFragments(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=TreeFragment.applyChanges(n,t),r=Tree.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new ParseContext(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:r}=this.skipped[n];t<e.to&&r>e.from&&(this.fragments=cutFragments(this.fragments,t,r),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Parser{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=currentContext;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Tree(NodeType.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return currentContext}}function cutFragments(e,t,n){return TreeFragment.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new LanguageState(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=ParseContext.create(e.facet(language).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new LanguageState(n)}}Language.state=StateField.define({create:LanguageState.init,update(e,t){for(let n of t.effects)if(n.is(Language.setState))return n.value;return t.startState.facet(language)!=t.state.facet(language)?LanguageState.init(t.state):e.apply(t)}});let requestIdle=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(requestIdle=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const isInputPending="undefined"!=typeof navigator&&(null===(_a=navigator.scheduling)||void 0===_a?void 0:_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Language.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Language.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=requestIdle(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Language.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>isInputPending&&isInputPending()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>logException(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine:e=>e.length?e[0]:null,enables:e=>[Language.state,parseWorker,EditorView.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class LanguageSupport{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function getIndentUnit(e){let t=e.facet(indentUnit);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function indentString(e,t){let n="",r=e.tabSize,i=e.facet(indentUnit)[0];if("\t"==i){for(;t>=r;)n+="\t",t-=r;i=" "}for(let o=0;o<t;o++)n+=i;return n}function getIndentation(e,t){e instanceof EditorState&&(e=new IndentContext(e));for(let r of e.state.facet(indentService)){let n=r(e,t);if(void 0!==n)return n}let n=syntaxTree(e.state);return n?syntaxIndentation(e,n,t):null}class IndentContext{constructor(e,t={}){this.state=e,this.options=t,this.unit=getIndentUnit(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return countColumn(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(e,t,n){return indentFrom(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}function ignoreClosed(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function indentStrategy(e){let t=e.type.prop(indentNodeProp);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(NodeProp.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>delimitedStrategy(e,!0,1,void 0,r&&!ignoreClosed(e)?t.from:void 0)}return null==e.parent?topIndent:null}function indentFrom(e,t,n){for(;e;e=e.parent){let r=indentStrategy(e);if(r)return r(TreeIndentContext.create(n,t,e))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new TreeIndentContext(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(isParent(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?indentFrom(e,this.pos,this.base):0}}function isParent(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function bracketedAligned(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==r)return null;if(!e.type.isSkipped)return e.from<s?n:null;a=e.to}}function delimitedIndent({closing:e,align:t=!0,units:n=1}){return r=>delimitedStrategy(r,t,n,e)}function delimitedStrategy(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?bracketedAligned(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const flatIndent=e=>e.baseIndent;function continuedIndent({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+DontIndentBeyond)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:c}of s.selection.ranges){let e=s.doc.lineAt(c);if(e.from==a)continue;a=e.from;let t=getIndentation(s,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],r=indentString(s,t);n!=r&&l.push({from:e.from,to:e.from+n.length,insert:r})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function syntaxFolding(e,t,n){let r=syntaxTree(e);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n,1);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let s=o.type.prop(foldNodeProp);if(s&&(o.to<r.length-50||r.length==e.doc.length||!isUnfinished(o))){let r=s(o,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}function isUnfinished(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function foldable(e,t,n){for(let r of e.facet(foldService)){let i=r(e,t,n);if(i)return i}return syntaxFolding(e,t,n)}function mapRange(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const foldState=StateField.define({create:()=>Decoration.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(foldEffect)&&!foldExists(e,n.value.from,n.value.to)?e=e.update({add:[foldWidget.range(n.value.from,n.value.to)]}):n.is(unfoldEffect)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>EditorView.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");t.push(foldWidget.range(r,i))}return Decoration.set(t,!0)}});function findFold(e,t,n){var r;let i=null;return null===(r=e.field(foldState,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function foldExists(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function maybeEnable(e,t){return e.field(foldState,!1)?t:t.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=e=>{for(let t of selectedLines(e)){let n=foldable(e.state,t.from,t.to);if(n)return e.dispatch({effects:maybeEnable(e.state,[foldEffect.of(n),announceFold(e,n)])}),!0}return!1},unfoldCode=e=>{if(!e.state.field(foldState,!1))return!1;let t=[];for(let n of selectedLines(e)){let r=findFold(e.state,n.from,n.to);r&&t.push(unfoldEffect.of(r),announceFold(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function announceFold(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return EditorView.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const foldAll=e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=foldable(t,i.from,i.to);o&&n.push(foldEffect.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:maybeEnable(e.state,n)}),!!n.length},unfoldAll=e=>{let t=e.state.field(foldState,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(unfoldEffect.of({from:e,to:t}))})),e.dispatch({effects:n}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:"…"},foldConfig=Facet.define({combine:e=>combineConfig(e,defaultConfig)});function codeFolding(e){let t=[foldState,baseTheme$1$1];return e&&t.push(foldConfig.of(e)),t}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(e){let{state:t}=e,n=t.facet(foldConfig),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=findFold(e.state,n.from,n.to);r&&e.dispatch({effects:unfoldEffect.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function foldGutter(e={}){let t=Object.assign(Object.assign({},foldGutterDefaults),e),n=new FoldMarker(t,!0),r=new FoldMarker(t,!1),i=ViewPlugin.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(language)!=e.state.facet(language)||e.startState.field(foldState,!1)!=e.state.field(foldState,!1)||syntaxTree(e.startState)!=syntaxTree(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new RangeSetBuilder;for(let i of e.viewportLineBlocks){let o=findFold(e.state,i.from,i.to)?r:foldable(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,gutter({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||RangeSet.empty},initialSpacer:()=>new FoldMarker(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=findFold(e.state,t.from,t.to);if(r)return e.dispatch({effects:unfoldEffect.of(r)}),!0;let i=foldable(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:foldEffect.of(i)}),!0)}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,t){let n;function r(e){let t=StyleModule.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Language?e=>e.prop(languageDataProp)==o.data:o?e=>e==o:void 0,this.style=tagHighlighter(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new StyleModule(n):null,this.themeType=t.themeType}static define(e,t){return new HighlightStyle(e,t||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine:e=>e.length?[e[0]]:null});function getHighlighters(e){let t=e.facet(highlighterFacet);return t.length?t:e.facet(fallbackHighlighter)}function syntaxHighlighting(e,t){let n,r=[treeHighlighter];return e instanceof HighlightStyle&&(e.module&&r.push(EditorView.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(fallbackHighlighter.of(e)):n?r.push(highlighterFacet.computeN([EditorView.darkTheme],(t=>t.facet(EditorView.darkTheme)==("dark"==n)?[e]:[]))):r.push(highlighterFacet.of(e)),r}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let t=syntaxTree(e.state),n=getHighlighters(e.state),r=n!=getHighlighters(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return Decoration.none;let n=new RangeSetBuilder;for(let{from:r,to:i}of e.visibleRanges)highlightTree(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=Decoration.mark({class:r})))}),r,i);return n.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:e=>e.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine:e=>combineConfig(e,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(e){let t=[],n=e.matched?matchingMark:nonmatchingMark;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const bracketMatchingState=StateField.define({create:()=>Decoration.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(bracketMatchingConfig);for(let i of t.state.selection.ranges){if(!i.empty)continue;let e=matchBrackets(t.state,i.head,-1,r)||i.head>0&&matchBrackets(t.state,i.head-1,1,r)||r.afterCursor&&(matchBrackets(t.state,i.head,1,r)||i.head<t.state.doc.length&&matchBrackets(t.state,i.head+1,-1,r));e&&(n=n.concat(r.renderMatch(e,t.state)))}return Decoration.set(n,!0)},provide:e=>EditorView.decorations.from(e)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(e={}){return[bracketMatchingConfig.of(e),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(e,t,n){let r=e.prop(t<0?NodeProp.openedBy:NodeProp.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function findHandle(e){let t=e.type.prop(bracketMatchingHandle);return t?t(e.node):e}function matchBrackets(e,t,n,r={}){let i=r.maxScanDistance||DefaultScanDist,o=r.brackets||DefaultBrackets,s=syntaxTree(e),a=s.resolveInner(t,n);for(let l=a;l;l=l.parent){let r=matchingNodes(l.type,n,o);if(r&&l.from<l.to){let i=findHandle(l);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return matchMarkedBrackets(e,t,n,l,i,r,o)}}return matchPlainBrackets(e,t,n,s,a.type,i,o)}function matchMarkedBrackets(e,t,n,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},c=0,u=null==a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=findHandle(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(matchingNodes(u.type,n,s))c++;else if(matchingNodes(u.type,-n,s)){if(0==c){let e=findHandle(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function matchPlainBrackets(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=o;){let e=u.value;n<0&&(d+=e.length);let o=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=s.indexOf(e[t]);if(!(a<0||r.resolveInner(o+t,1).type!=i))if(a%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:o+t,to:o+t+1},matched:a>>1==l>>1};h--}}n>0&&(d+=e.length)}return u.done?{start:c,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[lt,dt]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[lt]=createTokenType(noTokens,dt);function warnForPart(e,t){warned.indexOf(e)>-1||(warned.push(e),console.warn(t))}function createTokenType(e,t){let n=null;for(let o of t.split(".")){let t=e[o]||tags[o];t?"function"==typeof t?n?n=t(n):warnForPart(o,`Modifier ${o} used at start of tag`):n?warnForPart(o,`Tag ${o} used as modifier`):n=t:warnForPart(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=NodeType.define({id:typeArray.length,name:r,props:[styleTags({[r]:n})]});return typeArray.push(i),i.id}class CompletionContext{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=syntaxTree(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(ensureAnchor(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function toSet(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let r=toSet(t)+toSet(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function completeFromList(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:prefixMatch(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}function ifNotIn(e,t){return n=>{for(let t=syntaxTree(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class Option{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function cur(e){return e.selection.main.head}function ensureAnchor(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const pickedCompletion=Annotation.define();function insertCompletionText(e,t,n,r){return Object.assign(Object.assign({},e.changeByRange((i=>{if(i==e.selection.main)return{changes:{from:n,to:r,insert:t},range:EditorSelection.cursor(n+t.length)};let o=r-n;return!i.empty||o&&e.sliceDoc(i.from-o,i.from)!=e.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:t},range:EditorSelection.cursor(i.from-o+t.length)}}))),{userEvent:"input.complete"})}function applyCompletion(e,t){const n=t.completion.apply||t.completion.label;let r=t.source;"string"==typeof n?e.dispatch(Object.assign(Object.assign({},insertCompletionText(e.state,n,r.from,r.to)),{annotations:pickedCompletion.of(t.completion)})):n(e,t.completion,r.from,r.to)}const SourceCache=new WeakMap;function asSource(e){if(!Array.isArray(e))return e;let t=SourceCache.get(e);return t||SourceCache.set(e,t=completeFromList(e)),t}class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=codePointAt(e,t),r=codePointSize(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(codePointAt(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=codePointAt(e,0),i=codePointSize(r),o=i==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;o+=-200}return[o,0,i]}let s=e.indexOf(this.pattern);if(0==s)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=codePointAt(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=codePointSize(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,p=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let _=0,b=Math.min(e.length,200),v=0;_<b&&u<a;){let r=codePointAt(e,_);s<0&&(c<a&&r==t[c]&&(i[c++]=_),d<a&&(r==t[d]||r==n[d]?(0==d&&(p=_),f=_+1,d++):d=0));let l,b=r<255?r>=48&&r<=57||r>=97&&r<=122?2:r>=65&&r<=90?1:0:(l=fromCodePoint(r))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!_||1==b&&m||0==v&&0!=b)&&(t[u]==r||n[u]==r&&(h=!0)?o[u++]=_:o.length&&(g=!1)),v=b,_+=codePointSize(r)}return u==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):d==a&&0==p?[-200-e.length+(f==e.length?0:-100),0,f]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==a?[-900-e.length,p,f]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let o of t){let e=o+(this.astral?codePointSize(codePointAt(n,o)):1);i>1&&r[i-1]==o?r[i-1]=e:(r[i++]=o,r[i++]=e)}return r}}const completionConfig=Facet.define({combine:e=>combineConfig(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>joinClass(e(n),t(n)),optionClass:(e,t)=>n=>joinClass(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function joinClass(e,t){return e?t?e+" "+t:e:t}function optionContent(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let s=1;s<n.length;){let e=n[s++],t=n[s++];e>o&&r.appendChild(document.createTextNode(i.slice(o,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(e,t))),a.className="cm-completionMatchedText",o=t}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}function rangeAroundSelected(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class CompletionTooltip{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(completionConfig);this.optionContent=optionContent(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=rangeAroundSelected(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return applyCompletion(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){var t,n,r;let i=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),i!=o&&(this.updateSel(),(null===(t=i.open)||void 0===t?void 0:t.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(r=i.open)||void 0===r?void 0:r.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=rangeAroundSelected(t.options.length,t.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>logException(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&scrollIntoView(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}if(r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10)return null;let o,s=this.view.textDirection==Direction.RTL,a=s,l=!1,c="",u="",h=t.left-i.left,d=i.right-t.right;if(a&&h<Math.min(n.width,d)?a=!1:!a&&d<Math.min(n.width,h)&&(a=!0),n.width<=(a?h:d))c=Math.max(i.top,Math.min(r.top,i.bottom-n.height))-t.top+"px",o=Math.min(400,a?h:d)+"px";else{l=!0,o=Math.min(400,(s?t.right:i.right-t.left)-30)+"px";let e=i.bottom-t.bottom;e>=n.height||e>t.top?c=r.bottom-t.top+"px":u=t.bottom-r.top+"px"}return{top:c,bottom:u,maxWidth:o,class:l?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=e[i];const s=r.appendChild(document.createElement("li"));s.id=t+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,o);t&&s.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function completionTooltip(e){return t=>new CompletionTooltip(t,e)}function scrollIntoView(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}function score(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function sortOptions(e,t){let n=[],r=0;for(let a of e)if(a.hasResult())if(!1===a.result.filter){let e=a.result.getMatch;for(let t of a.result.options){let i=[1e9-r++];if(e)for(let n of e(t))i.push(n);n.push(new Option(t,a,i))}}else{let e,r=new FuzzyMatcher(t.sliceDoc(a.from,a.to));for(let t of a.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new Option(t,a,e)))}let i=[],o=null,s=t.facet(completionConfig).compareCompletions;for(let a of n.sort(((e,t)=>t.match[0]-e.match[0]||s(e.completion,t.completion))))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||null!=o.type&&null!=a.completion.type&&o.type!=a.completion.type||o.apply!=a.completion.apply?i.push(a):score(a.completion)>score(o)&&(i[i.length-1]=a),o=a.completion;return i}class CompletionDialog{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i){let o=sortOptions(e,t);if(!o.length)return r&&e.some((e=>1==e.state))?new CompletionDialog(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let s=t.facet(completionConfig).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new CompletionDialog(o,makeAttrs(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:completionTooltip(completionState),above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(completionConfig),r=(n.override||t.languageDataAt("autocomplete",cur(t)).map(asSource)).map((t=>{let r=this.active.find((e=>e.source==t))||new ActiveSource(t,this.active.some((e=>0!=e.state))?1:0);return r.update(e,n)}));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=this.open;i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!sameResults(r,this.active)?i=CompletionDialog.build(r,t,this.id,i,n):i&&i.disabled&&!r.some((e=>1==e.state))&&(i=null),!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new ActiveSource(e.source,0):e)));for(let o of e.effects)o.is(setSelectedEffect)&&(i=i&&i.setSelected(o.value,this.id));return r==this.active&&i==this.open?this:new CompletionState(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const none$1=[];function getUserEvent(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=getUserEvent(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new ActiveSource(r.source,0));for(let i of e.effects)if(i.is(startCompletionEffect))r=new ActiveSource(r.source,1,i.value?cur(e.state):-1);else if(i.is(closeCompletionEffect))r=new ActiveSource(r.source,0);else if(i.is(setActiveEffect))for(let e of i.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new ActiveSource(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=cur(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&cur(e.startState)==this.from)return new ActiveSource(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return checkValid(this.result.validFor,e.state,i,o)?new ActiveResult(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new CompletionContext(e.state,s,l>=0)))?new ActiveResult(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:cur(e.state)):new ActiveSource(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):ensureAnchor(e,!0).test(i)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map:(e,t)=>e.map((e=>e.map(t)))}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create:()=>CompletionState.start(),update:(e,t)=>e.update(t),provide:e=>[showTooltip.from(e,(e=>e.tooltip)),EditorView.contentAttributes.from(e,(e=>e.attrs))]});function moveCompletionSelection(e,t="option"){return n=>{let r=n.state.field(completionState,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(completionConfig).interactionDelay)return!1;let i,o=1;"page"==t&&(i=getTooltip(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:setSelectedEffect.of(a)}),!0}}const acceptCompletion=e=>{let t=e.state.field(completionState,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(completionConfig).interactionDelay)&&(t.open.disabled||applyCompletion(e,t.open.options[t.open.selected]),!0)},startCompletion=e=>!!e.state.field(completionState,!1)&&(e.dispatch({effects:startCompletionEffect.of(!0)}),!0),closeCompletion=e=>{let t=e.state.field(completionState,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(completionState).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(completionState);if(!e.selectionSet&&!e.docChanged&&e.startState.field(completionState)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!getUserEvent(e)));for(let r=0;r<this.running.length;r++){let t=this.running[r];if(n||t.updates.length+e.transactions.length>MaxUpdateCount&&Date.now()-t.time>MinAbortTime){for(let e of t.context.abortListeners)try{e()}catch(e2){logException(this.view.state,e2)}t.context.abortListeners=null,this.running.splice(r--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),DebounceTime):-1,0!=this.composing)for(let r of e.transactions)"input"==getUserEvent(r)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(completionState);for(let n of t.active)1!=n.state||this.running.some((e=>e.active.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=cur(t),r=new CompletionContext(t,n,e.explicitPos==n),i=new RunningQuery(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),DebounceTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(completionConfig);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new ActiveResult(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:cur(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(completionState).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new ActiveSource(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:setActiveEffect.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(completionState,!1);e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:startCompletionEffect.of(!1)})),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class FieldRange{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,MapMode.TrackDel),n=e.mapPos(this.to,1,MapMode.TrackDel);return null==t||null==n?null:new FieldRange(this.field,t,n)}}class Snippet{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let s of this.lines){if(n.length){let n=o,i=/^\t*/.exec(s)[0].length;for(let t=0;t<i;t++)n+=e.facet(indentUnit);r.push(t+n.length-i),s=n+s.slice(i)}n.push(s),t+=s.length+1}return{text:n,ranges:this.fieldPositions.map((e=>new FieldRange(e.field,r[e.line]+e.from,r[e.line]+e.to)))}}static parse(e){let t,n=[],r=[],i=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1;for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:s&&n[t].name==s)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:s}),a=t;for(let e of i)e.field>=a&&e.field++}i.push(new FieldPos(a,r.length,t.index,t.index+s.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}for(let e;e=/\\([{}])/.exec(o);){o=o.slice(0,e.index)+e[1]+o.slice(e.index+e[0].length);for(let t of i)t.line==r.length&&t.from>e.index&&(t.from--,t.to--)}r.push(o)}return new Snippet(r,i)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,t){this.ranges=e,this.active=t,this.deco=Decoration.set(e.map((e=>(e.from==e.to?fieldMarker:fieldRange).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new ActiveSnippet(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const setActive=StateEffect.define({map:(e,t)=>e&&e.map(t)}),moveToField=StateEffect.define(),snippetState=StateField.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(setActive))return n.value;if(n.is(moveToField)&&e)return new ActiveSnippet(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>EditorView.decorations.from(e,(e=>e?e.deco:Decoration.none))});function fieldSelection(e,t){return EditorSelection.create(e.filter((e=>e.field==t)).map((e=>EditorSelection.range(e.from,e.to))))}function snippet(e){let t=Snippet.parse(e);return(e,n,r,i)=>{let{text:o,ranges:s}=t.instantiate(e.state,r),a={changes:{from:r,to:i,insert:Text.of(o)},scrollIntoView:!0,annotations:pickedCompletion.of(n)};if(s.length&&(a.selection=fieldSelection(s,0)),s.length>1){let t=new ActiveSnippet(s,0),n=a.effects=[setActive.of(t)];void 0===e.state.field(snippetState,!1)&&n.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}e.dispatch(e.state.update(a))}}function moveField(e){return({state:t,dispatch:n})=>{let r=t.field(snippetState,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==i+e));return n(t.update({selection:fieldSelection(r.ranges,i),effects:setActive.of(o?null:new ActiveSnippet(r.ranges,i))})),!0}}const clearSnippet=({state:e,dispatch:t})=>!!e.field(snippetState,!1)&&(t(e.update({effects:setActive.of(null)})),!0),nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine:e=>e.length?e[0]:defaultSnippetKeymap}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],(e=>e.facet(snippetKeymap))));function snippetCompletion(e,t){return Object.assign(Object.assign({},t),{apply:snippet(e)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(e,t){let n,r=t.state.field(snippetState,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!i||i.field==r.active)&&(t.dispatch({selection:fieldSelection(r.ranges,i.field),effects:setActive.of(r.ranges.some((e=>e.field>i.field))?new ActiveSnippet(r.ranges,i.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(e,t){let n=t.mapPos(e,-1,MapMode.TrackAfter);return null==n?void 0:n}}),skipBracketEffect=StateEffect.define({map:(e,t)=>t.mapPos(e)}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=StateField.define({create:()=>RangeSet.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=RangeSet.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(closeBracketEffect)?e=e.update({add:[closedBracket.range(n.value,n.value+1)]}):n.is(skipBracketEffect)&&(e=e.update({filter:e=>e!=n.value}));return e}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(e){for(let t=0;t<definedClosing.length;t+=2)if(definedClosing.charCodeAt(t)==e)return definedClosing.charAt(t+1);return fromCodePoint(e<128?e:e+1)}function config(e,t){return e.languageDataAt("closeBrackets",t)[0]||defaults}const android$1="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of(((e,t,n,r)=>{if((android$1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==codePointSize(codePointAt(r,0))||t!=i.from||n!=i.to)return!1;let o=insertBracket(e.state,r);return!!o&&(e.dispatch(o),!0)})),deleteBracketPair=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=config(e,e.selection.main.head).brackets||defaults.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=prevChar(e.doc,t.head);for(let i of n)if(i==r&&nextChar(e.doc,t.head)==closing(codePointAt(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:EditorSelection.cursor(t.head-i.length)}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(e,t){let n=config(e,e.selection.main.head),r=n.brackets||defaults.brackets;for(let i of r){let o=closing(codePointAt(i,0));if(t==i)return o==i?handleSame(e,i,r.indexOf(i+i+i)>-1,n):handleOpen(e,i,o,n.before||defaults.before);if(t==o&&closedBracketAt(e,e.selection.main.from))return handleClose(e,i,o)}return null}function closedBracketAt(e,t){let n=!1;return e.field(bracketState).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function nextChar(e,t){let n=e.sliceString(t,t+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function prevChar(e,t){let n=e.sliceString(t-2,t);return codePointSize(codePointAt(n,0))==n.length?n:n.slice(1)}function handleOpen(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:closeBracketEffect.of(o.to+t.length),range:EditorSelection.range(o.anchor+t.length,o.head+t.length)};let s=nextChar(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:closeBracketEffect.of(o.head+t.length),range:EditorSelection.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&nextChar(e.doc,t.head)==n?EditorSelection.cursor(t.head+n.length):r=t));return r?null:e.update({selection:EditorSelection.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>skipBracketEffect.of(e)))})}function handleSame(e,t,n,r){let i=r.stringPrefixes||defaults.stringPrefixes,o=null,s=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:closeBracketEffect.of(r.to+t.length),range:EditorSelection.range(r.anchor+t.length,r.head+t.length)};let s,a=r.head,l=nextChar(e.doc,a);if(l==t){if(nodeStart(e,a))return{changes:{insert:t+t,from:a},effects:closeBracketEffect.of(a+t.length),range:EditorSelection.cursor(a+t.length)};if(closedBracketAt(e,a)){let r=n&&e.sliceDoc(a,a+3*t.length)==t+t+t;return{range:EditorSelection.cursor(a+t.length*(r?3:1)),effects:skipBracketEffect.of(a)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(s=canStartStringAt(e,a-2*t.length,i))>-1&&nodeStart(e,s))return{changes:{insert:t+t+t+t,from:a},effects:closeBracketEffect.of(a+t.length),range:EditorSelection.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=CharCategory.Word&&canStartStringAt(e,a,i)>-1&&!probablyInString(e,a,t,i))return{changes:{insert:t+t,from:a},effects:closeBracketEffect.of(a+t.length),range:EditorSelection.cursor(a+t.length)}}return{range:o=r}}));return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(e,t){let n=syntaxTree(e).resolveInner(t+1);return n.parent&&n.from==t}function probablyInString(e,t,n,r){let i=syntaxTree(e).resolveInner(t,-1),o=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let s=0;s<5;s++){let s=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}function canStartStringAt(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=CharCategory.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=CharCategory.Word)return n}return-1}function autocompletion(e={}){return[completionState,completionConfig.of(e),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],(e=>e.facet(completionConfig).defaultKeymap?[completionKeymap]:[]))),cache$1=new NodeWeakMap,ScopeNodes$1=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID$1(e){return(t,n,r)=>{if(r)return!1;let i=t.node.getChild("VariableName");return i&&n(i,e),!0}}const gatherCompletions$1={FunctionDefinition:defID$1("function"),ClassDefinition:defID$1("class"),ForStatement(e,t,n){if(n)for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)t(r,"variable");else if("in"==r.name)break},ImportStatement(e,t){var n,r;let{node:i}=e,o="from"==(null===(n=i.firstChild)||void 0===n?void 0:n.name);for(let s=i.getChild("import");s;s=s.nextSibling)"VariableName"==s.name&&"as"!=(null===(r=s.nextSibling)||void 0===r?void 0:r.name)&&t(s,o?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if("VariableName"==n.name)t(n,"variable");else if(":"==n.name||"AssignOp"==n.name)break},ParamList(e,t){for(let n=null,r=e.node.firstChild;r;r=r.nextSibling)"VariableName"!=r.name||n&&/\*|AssignOp/.test(n.name)||t(r,"variable"),n=r},CapturePattern:defID$1("variable"),AsPattern:defID$1("variable"),__proto__:null};function getScope$1(e,t){let n=cache$1.get(t);if(n)return n;let r=[],i=!0;function o(t,n){let i=e.sliceString(t.from,t.to);r.push({label:i,type:n})}return t.cursor(IterMode.IncludeAnonymous).iterate((t=>{if(t.name){let e=gatherCompletions$1[t.name];if(e&&e(t,o,i)||!i&&ScopeNodes$1.has(t.name))return!1;i=!1}else if(t.to-t.from>8192){for(let n of getScope$1(e,t.node))r.push(n);return!1}})),cache$1.set(t,r),r}const Identifier$1=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete$1=["String","FormatString","Comment","PropertyName"];function localCompletionSource$1(e){let t=syntaxTree(e.state).resolveInner(e.pos,-1);if(dontComplete$1.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&Identifier$1.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let i=t;i;i=i.parent)ScopeNodes$1.has(i.name)&&(r=r.concat(getScope$1(e.state.doc,i)));return{options:r,from:n?t.from:e.pos,validFor:Identifier$1}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map((e=>({label:e,type:"constant"}))).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map((e=>({label:e,type:"type"})))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map((e=>({label:e,type:"class"})))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map((e=>({label:e,type:"function"})))),snippets$1=[snippetCompletion("def ${name}(${params}):\n\t${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n\t${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n\t${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n\t${}\nexcept ${error}:\n\t${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion("if ${}:\n\t\n",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n\t${}\nelse:\n\t${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n\tdef __init__(self, ${params}):\n\t\t\t${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete$1,completeFromList(globals.concat(snippets$1)));function indentBody(e,t){let n=e.lineIndent(t.from),r=e.lineAt(e.pos,-1),i=r.from+r.text.length;return!/\S/.test(r.text)&&e.node.to<i+100&&!/\S/.test(e.state.sliceDoc(i,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser$1.configure({props:[indentNodeProp.add({Body:e=>{var t;return null!==(t=indentBody(e,e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:e=>{if(e.pos+/\s*/.exec(e.textAfter)[0].length>=e.node.to){let t=null;for(let n=e.node,r=n.to;n=n.lastChild,n&&n.to==r;)"Body"==n.type.name&&(t=n);if(t){let n=indentBody(e,t);if(null!=n)return n}}return e.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource$1}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const toggleComment=e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.head),r=getConfig(e.state,n.from);return r.line?toggleLineComment(e):!!r.block&&toggleBlockCommentByLine(e)};function command(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command(((e,t)=>changeBlockComment(e,t,selectedLineRanges(t))),0);function getConfig(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-SearchMargin,r),l=e.sliceDoc(i,i+SearchMargin),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=2*SearchMargin?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+SearchMargin),s=e.sliceDoc(i-SearchMargin,i));let d=/^\s*/.exec(o)[0].length,p=/\s*$/.exec(s)[0].length,f=s.length-p-n.length;return o.slice(d,d+t.length)==t&&s.slice(f,f+n.length)==n?{open:{pos:r+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}function selectedLineRanges(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from,to:i.to})}return t}function changeBlockComment(e,t,n=t.selection.ranges){let r=n.map((e=>getConfig(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>findBlockComment(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function changeLineComment(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let e=r.length,n=1e9;for(let a=o;a<=s;){let e=t.doc.lineAt(a);if(e.from>i&&(o==s||s>e.from)){i=e.from;let o=getConfig(t,e.from).line;if(!o)continue;let s=/^\s*/.exec(e.text)[0].length,a=s==e.length,l=e.text.slice(s,s+o.length)==o?s:-1;s<e.text.length&&s<n&&(n=s),r.push({line:e,comment:l,token:o,indent:s,empty:a,single:!1})}a=e.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:o,empty:s,single:a}of r)!a&&s||e.push({from:t.from+o,insert:i+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine:e=>combineConfig(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})});function changeEnd(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}const historyField_=StateField.define({create:()=>HistoryState.empty,update(e,t){let n=t.state.facet(historyConfig),r=t.annotation(fromHistory);if(r){let i=t.docChanged?EditorSelection.single(changeEnd(t.changes)):void 0,o=HistEvent.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?updateBranch(a,a.length,n.minDepth,o):addSelection(a,t.startState.selection),new HistoryState(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(isolateHistory);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(Transaction.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=HistEvent.fromTransaction(t),s=t.annotation(Transaction.time),a=t.annotation(Transaction.userEvent);return o?e=e.addChanges(o,s,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new HistoryState(e.done.map(HistEvent.fromJSON),e.undone.map(HistEvent.fromJSON))});function history(e={}){return[historyField_,historyConfig.of(e),EditorView.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?undo:"historyRedo"==e.inputType?redo:null;return!!n&&(e.preventDefault(),n(t))}})]}function cmd(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(historyField_,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,t){let n=none;for(let r of e.startState.facet(invertedEffects)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function isAdjacent(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let s=0;s<n.length;){let e=n[s++],t=n[s++];o>=e&&i<=t&&(r=!0)}})),r}function eqSelectionShape(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}function conc(e,t){return e.length?t.length?e.concat(t):e:t}const none=[],MaxSelectionsPerEvent=200;function addSelection(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),updateBranch(e,e.length-1,1e9,n.setSelAfter(r)))}return[HistEvent.selection([t])]}function popSelection(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function addMappingToBranch(e,t){if(!e.length)return e;let n=e.length,r=none;for(;n;){let i=mapEvent(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[HistEvent.selection(r)]:none}function mapEvent(e,t,n){let r=conc(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):none,n);if(!e.changes)return HistEvent.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new HistEvent(i,StateEffect.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||joinableUserEvent.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,isAdjacent(s.changes,e.changes))||"input.type.compose"==n)?updateBranch(o,o.length-1,r.minDepth,new HistEvent(e.changes.compose(s.changes),conc(e.effects,s.effects),s.mapped,s.startSelection,none)):updateBranch(o,o.length,r.minDepth,e),new HistoryState(o,none,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&eqSelectionShape(i[i.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,t,n)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?none:r.slice(0,r.length-1);return i.mapped&&(n=addMappingToBranch(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:fromHistory.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(e,t){return EditorSelection.create(e.ranges.map(t),e.mainIndex)}function setSel(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:e,dispatch:t},n){let r=updateSel(e.selection,n);return!r.eq(e.selection)&&(t(setSel(e,r)),!0)}function rangeEnd(e,t){return EditorSelection.cursor(t?e.to:e.from)}function cursorByChar(e,t){return moveSel(e,(n=>n.empty?e.moveByChar(n,t):rangeEnd(n,t)))}function ltrAtCursor(e){return e.textDirectionAt(e.state.selection.main.head)==Direction.LTR}const cursorCharLeft=e=>cursorByChar(e,!ltrAtCursor(e)),cursorCharRight=e=>cursorByChar(e,ltrAtCursor(e));function cursorByGroup(e,t){return moveSel(e,(n=>n.empty?e.moveByGroup(n,t):rangeEnd(n,t)))}const cursorGroupLeft=e=>cursorByGroup(e,!ltrAtCursor(e)),cursorGroupRight=e=>cursorByGroup(e,ltrAtCursor(e));function interestingNode(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function moveBySyntax(e,t,n){let r,i,o=syntaxTree(e).resolveInner(t.head),s=n?NodeProp.closedBy:NodeProp.openedBy;for(let a=t.head;;){let t=n?o.childAfter(a):o.childBefore(a);if(!t)break;interestingNode(e,t,s)?o=t:a=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?matchBrackets(e,o.from,1):matchBrackets(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,EditorSelection.cursor(i,n?-1:1)}const cursorSyntaxLeft=e=>moveSel(e,(t=>moveBySyntax(e.state,t,!ltrAtCursor(e)))),cursorSyntaxRight=e=>moveSel(e,(t=>moveBySyntax(e.state,t,ltrAtCursor(e))));function cursorByLine(e,t){return moveSel(e,(n=>{if(!n.empty)return rangeEnd(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const cursorLineUp=e=>cursorByLine(e,!1),cursorLineDown=e=>cursorByLine(e,!0);function pageInfo(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0;if(n){for(let t of e.state.facet(EditorView.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(i=Math.max(null==n?void 0:n.bottom,i))}t=e.scrollDOM.clientHeight-r-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function cursorByPage(e,t){let n,r=pageInfo(e),{state:i}=e,o=updateSel(i.selection,(n=>n.empty?e.moveVertically(n,t,r.height):rangeEnd(n,t)));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(setSel(i,o),{effects:n}),!0}const cursorPageUp=e=>cursorByPage(e,!1),cursorPageDown=e=>cursorByPage(e,!0);function moveByLineBoundary(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=EditorSelection.cursor(r.from+n))}return i}const cursorLineBoundaryForward=e=>moveSel(e,(t=>moveByLineBoundary(e,t,!0))),cursorLineBoundaryBackward=e=>moveSel(e,(t=>moveByLineBoundary(e,t,!1))),cursorLineBoundaryLeft=e=>moveSel(e,(t=>moveByLineBoundary(e,t,!ltrAtCursor(e)))),cursorLineBoundaryRight=e=>moveSel(e,(t=>moveByLineBoundary(e,t,ltrAtCursor(e)))),cursorLineStart=e=>moveSel(e,(t=>EditorSelection.cursor(e.lineBlockAt(t.head).from,1))),cursorLineEnd=e=>moveSel(e,(t=>EditorSelection.cursor(e.lineBlockAt(t.head).to,-1)));function toMatchingBracket(e,t,n){let r=!1,i=updateSel(e.selection,(t=>{let i=matchBrackets(e,t.head,-1)||matchBrackets(e,t.head,1)||t.head>0&&matchBrackets(e,t.head-1,1)||t.head<e.doc.length&&matchBrackets(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?EditorSelection.range(t.anchor,o):EditorSelection.cursor(o)}));return!!r&&(t(setSel(e,i)),!0)}const cursorMatchingBracket=({state:e,dispatch:t})=>toMatchingBracket(e,t,!1);function extendSel(e,t){let n=updateSel(e.state.selection,(e=>{let n=t(e);return EditorSelection.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(setSel(e.state,n)),!0)}function selectByChar(e,t){return extendSel(e,(n=>e.moveByChar(n,t)))}const selectCharLeft=e=>selectByChar(e,!ltrAtCursor(e)),selectCharRight=e=>selectByChar(e,ltrAtCursor(e));function selectByGroup(e,t){return extendSel(e,(n=>e.moveByGroup(n,t)))}const selectGroupLeft=e=>selectByGroup(e,!ltrAtCursor(e)),selectGroupRight=e=>selectByGroup(e,ltrAtCursor(e)),selectSyntaxLeft=e=>extendSel(e,(t=>moveBySyntax(e.state,t,!ltrAtCursor(e)))),selectSyntaxRight=e=>extendSel(e,(t=>moveBySyntax(e.state,t,ltrAtCursor(e))));function selectByLine(e,t){return extendSel(e,(n=>e.moveVertically(n,t)))}const selectLineUp=e=>selectByLine(e,!1),selectLineDown=e=>selectByLine(e,!0);function selectByPage(e,t){return extendSel(e,(n=>e.moveVertically(n,t,pageInfo(e).height)))}const selectPageUp=e=>selectByPage(e,!1),selectPageDown=e=>selectByPage(e,!0),selectLineBoundaryForward=e=>extendSel(e,(t=>moveByLineBoundary(e,t,!0))),selectLineBoundaryBackward=e=>extendSel(e,(t=>moveByLineBoundary(e,t,!1))),selectLineBoundaryLeft=e=>extendSel(e,(t=>moveByLineBoundary(e,t,!ltrAtCursor(e)))),selectLineBoundaryRight=e=>extendSel(e,(t=>moveByLineBoundary(e,t,ltrAtCursor(e)))),selectLineStart=e=>extendSel(e,(t=>EditorSelection.cursor(e.lineBlockAt(t.head).from))),selectLineEnd=e=>extendSel(e,(t=>EditorSelection.cursor(e.lineBlockAt(t.head).to))),cursorDocStart=({state:e,dispatch:t})=>(t(setSel(e,{anchor:0})),!0),cursorDocEnd=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.doc.length})),!0),selectDocStart=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.selection.main.anchor,head:0})),!0),selectDocEnd=({state:e,dispatch:t})=>(t(setSel(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),selectAll=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),selectLine=({state:e,dispatch:t})=>{let n=selectedLineBlocks(e).map((({from:t,to:n})=>EditorSelection.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:e,dispatch:t})=>{let n=updateSel(e.selection,(t=>{var n;let r=syntaxTree(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return EditorSelection.range(r.to,r.from)}));return t(setSel(e,n)),!0},simplifySelection=({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=EditorSelection.create([n.main]):n.main.empty||(r=EditorSelection.create([EditorSelection.cursor(n.main.head)])),!!r&&(t(setSel(e,r)),!0)};function deleteBy(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let r=t(i);r<i?(n="delete.backward",r=skipAtomic(e,r,!1)):r>i&&(n="delete.forward",r=skipAtomic(e,r,!0)),i=Math.min(i,r),o=Math.max(o,r)}else i=skipAtomic(e,i,!1),o=skipAtomic(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:EditorSelection.cursor(i)}}));return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?EditorView.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(e,t,n){if(e instanceof EditorView)for(let r of e.state.facet(EditorView.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const deleteByChar=(e,t)=>deleteBy(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=countColumn(r,o.tabSize)%getIndentUnit(o)||getIndentUnit(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=findClusterBreak(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return i})),deleteCharBackward=e=>deleteByChar(e,!1),deleteCharForward=e=>deleteByChar(e,!0),deleteByGroup=(e,t)=>deleteBy(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=findClusterBreak(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return r})),deleteGroupBackward=e=>deleteByGroup(e,!1),deleteGroupForward=e=>deleteByGroup(e,!0),deleteToLineEnd=e=>deleteBy(e,(t=>{let n=e.lineBlockAt(t).to;return t<n?n:Math.min(e.state.doc.length,t+1)})),deleteToLineStart=e=>deleteBy(e,(t=>{let n=e.lineBlockAt(t).from;return t>n?n:Math.max(0,t-1)})),splitLine=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Text.of(["",""])},range:EditorSelection.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:findClusterBreak(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:findClusterBreak(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:EditorSelection.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function moveLine(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let o of selectedLineBlocks(e)){if(n?o.to==e.doc.length:0==o.from)continue;let t=e.doc.lineAt(n?o.to+1:o.from-1),s=t.length+1;if(n){r.push({from:o.to,to:t.to},{from:o.from,insert:t.text+e.lineBreak});for(let t of o.ranges)i.push(EditorSelection.range(Math.min(e.doc.length,t.anchor+s),Math.min(e.doc.length,t.head+s)))}else{r.push({from:t.from,to:o.from},{from:o.to,insert:e.lineBreak+t.text});for(let e of o.ranges)i.push(EditorSelection.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:EditorSelection.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}const moveLineUp=({state:e,dispatch:t})=>moveLine(e,t,!1),moveLineDown=({state:e,dispatch:t})=>moveLine(e,t,!0);function copyLine(e,t,n){if(e.readOnly)return!1;let r=[];for(let i of selectedLineBlocks(e))n?r.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):r.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:e,dispatch:t})=>copyLine(e,t,!1),copyLineDown=({state:e,dispatch:t})=>copyLine(e,t,!0),deleteLine=e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(selectedLineBlocks(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=updateSel(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=syntaxTree(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(NodeProp.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&isBetweenBrackets(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new IndentContext(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=getIndentation(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",indentString(t,l)];return s&&c.push(indentString(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Text.of(c)},range:EditorSelection.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let s=r.from;s<=r.to;){let o=e.doc.lineAt(s);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),s=o.to+1}let o=e.changes(i);return{changes:i,range:EditorSelection.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const indentSelection=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new IndentContext(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=changeBySelectedLine(e,((t,i,o)=>{let s=getIndentation(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=indentString(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0},indentMore=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(changeBySelectedLine(e,((t,n)=>{n.push({from:t.from,insert:e.facet(indentUnit)})})),{userEvent:"input.indent"})),!0),indentLess=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(changeBySelectedLine(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=countColumn(r,e.tabSize),o=0,s=indentString(e,Math.max(0,i-getIndentUnit(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)add(e,arguments[t]);return e}function add(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)add(e,t[n])}}const basicNormalize="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class SearchCursor{constructor(e,t,n=0,r=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(basicNormalize(e)):basicNormalize,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=fromCodePoint(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let r=this.normalize(t);for(let i=0,o=n;;i++){let e=r.charCodeAt(i),s=this.match(e,o);if(s)return this.value=s,this;if(i==r.length-1)break;o==n&&i<t.length&&t.charCodeAt(i)==e&&o++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}"undefined"!=typeof Symbol&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(null==/x/.unicode?"":"u");class RegExpCursor{constructor(e,t,n,r=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new MultilineRegExpCursor(e,t,n,r,i);this.re=new RegExp(t,baseFlags+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=toCharEnd(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=toCharEnd(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=flattened.get(e);if(!r||r.from>=n||r.to<=t){let r=new FlattenedDoc(t,e.sliceString(t,n));return flattened.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),flattened.set(e,new FlattenedDoc(o,i)),new FlattenedDoc(t,i.slice(t-o,n-o))}}class MultilineRegExpCursor{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,r),this.re=new RegExp(t,baseFlags+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=FlattenedDoc.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=toCharEnd(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function validRegExp(e){try{return new RegExp(e,baseFlags),!0}catch(t){return!1}}function toCharEnd(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function createLineDialog(e){let t=crelt("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:crelt("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:dialogEffect.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},crelt("label",e.state.phrase("Go to line"),": ",t)," ",crelt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});const dialogEffect=StateEffect.define(),dialogField=StateField.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(dialogEffect)&&(e=n.value);return e},provide:e=>showPanel.from(e,(e=>e?createLineDialog:null))}),gotoLine=e=>{let t=getPanel(e,createLineDialog);if(!t){let n=[dialogEffect.of(!0)];null==e.state.field(dialogField,!1)&&n.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),e.dispatch({effects:n}),t=getPanel(e,createLineDialog)}return t&&t.dom.querySelector("input").focus(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine:e=>combineConfig(e,defaultHighlightOptions,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function highlightSelectionMatches(e){let t=[defaultTheme,matchHighlighter];return e&&t.push(highlightConfig.of(e)),t}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==CharCategory.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==CharCategory.Word)}function insideWord(e,t,n,r){return e(t.sliceDoc(n,n+1))==CharCategory.Word&&e(t.sliceDoc(r-1,r))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(highlightConfig),{state:n}=e,r=n.selection;if(r.ranges.length>1)return Decoration.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return Decoration.none;let e=n.wordAt(o.head);if(!e)return Decoration.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return Decoration.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!insideWordBoundaries(s,n,o.from,o.to)||!insideWord(s,n,o.from,o.to))return Decoration.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return Decoration.none}let a=[];for(let l of e.visibleRanges){let e=new SearchCursor(n.doc,i,l.from,l.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||insideWordBoundaries(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(mainMatchDeco.range(r,i)):(r>=o.to||i<=o.from)&&a.push(matchDeco.range(r,i)),a.length>t.maxMatches))return Decoration.none}}return Decoration.set(a)}},{decorations:e=>e.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:e,dispatch:t})=>{let{selection:n}=e,r=EditorSelection.create(n.ranges.map((t=>e.wordAt(t.head)||EditorSelection.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)};function findNextOccurrence(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,a=new SearchCursor(e.doc,t,r[r.length-1].to);;){if(a.next(),!a.done){if(s&&r.some((e=>e.from==a.value.from)))continue;if(o){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(s)return null;a=new SearchCursor(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}}const selectNextOccurrence=({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return selectWord({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=findNextOccurrence(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(EditorSelection.range(i.from,i.to),!1),effects:EditorView.scrollIntoView(i.to)})),!0)},searchConfigFacet=Facet.define({combine:e=>combineConfig(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e)})});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,t=0,n){let r=e.doc?e:EditorState.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?regexpCursor(this,r,t,n):stringCursor(this,r,t,n)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(e,t,n,r){return new SearchCursor(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?stringWordTest(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function stringWordTest(e,t){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=e.sliceString(o,Math.min(e.length,r+2))),!(t(charBefore(i,n-o))==CharCategory.Word&&t(charAfter(i,n-o))==CharCategory.Word||t(charAfter(i,r-o))==CharCategory.Word&&t(charBefore(i,r-o))==CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,t,n){let r=stringCursor(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=stringCursor(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=stringCursor(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=stringCursor(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=stringCursor(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function regexpCursor(e,t,n,r){return new RegExpCursor(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?regexpWordTest(t.charCategorizer(t.selection.main.head)):void 0},n,r)}function charBefore(e,t){return e.slice(findClusterBreak(e,t,!1),t)}function charAfter(e,t){return e.slice(t,findClusterBreak(e,t))}function regexpWordTest(e){return(t,n,r)=>!r[0].length||(e(charBefore(r.input,r.index))!=CharCategory.Word||e(charAfter(r.input,r.index))!=CharCategory.Word)&&(e(charAfter(r.input,r.index+r[0].length))!=CharCategory.Word||e(charBefore(r.input,r.index+r[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,t,n){let r=regexpCursor(this.spec,e,n,e.doc.length).next();return r.done&&(r=regexpCursor(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=regexpCursor(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t)))}matchAll(e,t){let n=regexpCursor(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=regexpCursor(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create:e=>new SearchState(defaultQuery(e).create(),null),update(e,t){for(let n of t.effects)n.is(setSearchQuery)?e=new SearchState(n.value.create(),e.panel):n.is(togglePanel$1)&&(e=new SearchState(e.query,n.value?createSearchPanel:null));return e},provide:e=>showPanel.from(e,(e=>e.panel))});class SearchState{constructor(e,t){this.query=e,this.panel=t}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(searchState))}update(e){let t=e.state.field(searchState);(t!=e.startState.field(searchState)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Decoration.none;let{view:n}=this,r=new RangeSetBuilder;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:t,to:a}=o[i];for(;i<s-1&&a>o[i+1].from-500;)a=o[++i].to;e.highlight(n.state,t,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?selectedMatchMark:matchMark)}))}return r.finish()}},{decorations:e=>e.decorations});function searchCommand(e){return t=>{let n=t.state.field(searchState,!1);return n&&n.query.spec.valid?e(t,n):openSearchPanel(t)}}const findNext=searchCommand(((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);return!!r&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:announceMatch(e,r),userEvent:"select.search"}),!0)})),findPrevious=searchCommand(((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,i=t.prevMatch(n,r,r);return!!i&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:announceMatch(e,i),userEvent:"select.search"}),!0)})),selectMatches=searchCommand(((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:EditorSelection.create(n.map((e=>EditorSelection.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),selectSelectionMatches=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let a=new SearchCursor(e.doc,e.sliceDoc(r,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(EditorSelection.range(a.value.from,a.value.to))}return t(e.update({selection:EditorSelection.create(o,s),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n,r,r);if(!o)return!1;let s,a,l=[],c=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n,o.from,o.to),c.push(EditorView.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let t=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-t,head:o.to-t},c.push(announceMatch(e,o))}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),replaceAll=searchCommand(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:EditorView.announce.of(r),userEvent:"input.replace.all"}),!0}));function createSearchPanel(e){return e.state.facet(searchConfigFacet).createPanel(e)}function defaultQuery(e,t){var n,r,i,o;let s=e.selection.main,a=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!a)return t;let l=e.facet(searchConfigFacet);return new SearchQuery({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:l.caseSensitive,literal:null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:l.literal,wholeWord:null!==(o=null==t?void 0:t.wholeWord)&&void 0!==o?o:l.wholeWord})}const openSearchPanel=e=>{let t=e.state.field(searchState,!1);if(t&&t.panel){let n=getPanel(e,createSearchPanel);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=e.root.activeElement){let n=defaultQuery(e.state,t.query.spec);n.valid&&e.dispatch({effects:setSearchQuery.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[togglePanel$1.of(!0),t?setSearchQuery.of(defaultQuery(e.state,t.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=e=>{let t=e.state.field(searchState,!1);if(!t||!t.panel)return!1;let n=getPanel(e,createSearchPanel);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let t=this.query=e.state.field(searchState).query.spec;function n(e,t,n){return crelt("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:t.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:t.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=crelt("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>findNext(e)),[phrase(e,"next")]),n("prev",(()=>findPrevious(e)),[phrase(e,"previous")]),n("select",(()=>selectMatches(e)),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,n("replace",(()=>replaceNext(e)),[phrase(e,"replace")]),n("replaceAll",(()=>replaceAll(e)),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(setSearchQuery)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(e,t){return e.state.phrase(t)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-AnnounceMargin),s=Math.min(i,n+AnnounceMargin),a=e.state.sliceDoc(o,s);if(o!=r.from)for(let l=0;l<AnnounceMargin;l++)if(!Break.test(a[l+1])&&Break.test(a[l])){a=a.slice(l);break}if(s!=i)for(let l=a.length-1;l>a.length-AnnounceMargin;l--)if(!Break.test(a[l-1])&&Break.test(a[l])){a=a.slice(0,l);break}return EditorView.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class LintState{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(lintConfig).markerFilter;i&&(r=i(r));let o=Decoration.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?Decoration.widget({widget:new DiagnosticWidget(e),diagnostic:e}).range(e.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new LintState(o,t,findDiagnostic(o))}}function findDiagnostic(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new SelectedDiagnostic(e,n,i.diagnostic),!1})),r}function hideTooltip(e,t){return!(!e.effects.some((e=>e.is(setDiagnosticsEffect)))&&!e.changes.touchesRange(t.pos))}function maybeEnableLint(e,t){return e.field(lintState,!1)?t:t.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],(e=>{let{selected:t,panel:n}=e.field(lintState);return t&&n&&t.from!=t.to?Decoration.set([activeMark.range(t.from,t.to)]):Decoration.none})),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(e,t){return{effects:maybeEnableLint(e,[setDiagnosticsEffect.of(t)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create:()=>new LintState(Decoration.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=findDiagnostic(n,e.selected.diagnostic,i)||findDiagnostic(n,null,i)}e=new LintState(n,e.panel,r)}for(let n of t.effects)n.is(setDiagnosticsEffect)?e=LintState.init(n.value,e.panel,t.state):n.is(togglePanel)?e=new LintState(e.diagnostics,n.value?LintPanel.open:null,e.selected):n.is(movePanelSelection)&&(e=new LintState(e.diagnostics,e.panel,n.value));return e},provide:e=>[showPanel.from(e,(e=>e.panel)),EditorView.decorations.from(e,(e=>e.diagnostics))]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(e,t,n){let{diagnostics:r}=e.state.field(lintState),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(lintConfig).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:diagnosticsTooltip(e,i)})}:null}function diagnosticsTooltip(e,t){return crelt("ul",{class:"cm-tooltip-lint"},t.map((t=>renderDiagnostic(e,t,!1))))}const openLintPanel=e=>{let t=e.state.field(lintState,!1);t&&t.panel||e.dispatch({effects:maybeEnableLint(e.state,[togglePanel.of(!0)])});let n=getPanel(e,LintPanel.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=e=>{let t=e.state.field(lintState,!1);return!(!t||!t.panel)&&(e.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=e=>{let t=e.state.field(lintState,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(lintConfig);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(lintConfig);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let n=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(setDiagnostics(this.view.state,n))}),(e=>{logException(this.view.state,e)}))}}update(e){let t=e.state.facet(lintConfig);(e.docChanged||t!=e.startState.facet(lintConfig)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},combineConfig(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t})),enables:lintPlugin});function assignKeys(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function renderDiagnostic(e,t,n){var r;let i=n?assignKeys(t.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},crelt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=findDiagnostic(e.state.field(lintState).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:a}=n,l=i[r]?a.indexOf(i[r]):-1,c=l<0?a:[a.slice(0,l),crelt("u",a.slice(l,l+1)),a.slice(l+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[r]})"`}.`},c)})),t.source&&crelt("div",{class:"cm-diagnosticSource"},t.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=renderDiagnostic(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)closeLintPanel(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=assignKeys(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=findDiagnostic(this.view.state.field(lintState).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(lintState),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new PanelItem(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=findDiagnostic(this.view.state.field(lintState).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:movePanelSelection.of(t)})}static open(e){return new LintPanel(e)}}function svg(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function underline(e){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var basicSetup=function e(t){void 0===t&&(t={});var n=[];!1!==t.closeBracketsKeymap&&(n=n.concat(closeBracketsKeymap)),!1!==t.defaultKeymap&&(n=n.concat(defaultKeymap)),!1!==t.searchKeymap&&(n=n.concat(searchKeymap)),!1!==t.historyKeymap&&(n=n.concat(historyKeymap)),!1!==t.foldKeymap&&(n=n.concat(foldKeymap)),!1!==t.completionKeymap&&(n=n.concat(completionKeymap)),!1!==t.lintKeymap&&(n=n.concat(lintKeymap));var r=[];return!1!==t.lineNumbers&&r.push(lineNumbers()),!1!==t.highlightActiveLineGutter&&r.push(highlightActiveLineGutter()),!1!==t.highlightSpecialChars&&r.push(highlightSpecialChars()),!1!==t.history&&r.push(history()),!1!==t.foldGutter&&r.push(foldGutter()),!1!==t.drawSelection&&r.push(drawSelection()),!1!==t.dropCursor&&r.push(dropCursor()),!1!==t.allowMultipleSelections&&r.push(EditorState.allowMultipleSelections.of(!0)),!1!==t.indentOnInput&&r.push(indentOnInput()),!1!==t.syntaxHighlighting&&r.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),!1!==t.bracketMatching&&r.push(bracketMatching()),!1!==t.closeBrackets&&r.push(closeBrackets()),!1!==t.autocompletion&&r.push(autocompletion()),!1!==t.rectangularSelection&&r.push(rectangularSelection()),!1!==t.crosshairCursor&&r.push(crosshairCursor()),!1!==t.highlightActiveLine&&r.push(highlightActiveLine()),!1!==t.highlightSelectionMatches&&r.push(highlightSelectionMatches()),t.tabSize&&"number"==typeof t.tabSize&&r.push(indentUnit.of(" ".repeat(t.tabSize))),r.concat([keymap.of(n.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var getStatistics=e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}),External=Annotation.define();function useCodeMirror(e){var{value:t,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:a=[],autoFocus:l,theme:c="light",height:u="",minHeight:h="",maxHeight:d="",placeholder:p="",width:f="",minWidth:m="",maxWidth:g="",editable:_=!0,readOnly:b=!1,indentWithTab:v=!0,basicSetup:y=!0,root:O,initialState:S}=e,[T,x]=reactExports.useState(),[E,w]=reactExports.useState(),[C,A]=reactExports.useState(),k=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),R=EditorView.theme({"&":{height:u,minHeight:h,maxHeight:d,width:f,minWidth:m,maxWidth:g}}),I=[EditorView.updateListener.of((e=>{if(e.docChanged&&"function"==typeof r&&!e.transactions.some((e=>e.annotation(External)))){var t=e.state.doc.toString();r(t,e)}i&&i(getStatistics(e))})),R];switch(v&&I.unshift(keymap.of([indentWithTab])),y&&("boolean"==typeof y?I.unshift(basicSetup()):I.unshift(basicSetup(y))),p&&I.unshift(placeholder(p)),c){case"light":I.push(k);break;case"dark":I.push(oneDark);break;case"none":break;default:I.push(c)}return!1===_&&I.push(EditorView.editable.of(!1)),b&&I.push(EditorState.readOnly.of(!0)),s&&"function"==typeof s&&I.push(EditorView.updateListener.of(s)),I=I.concat(a),reactExports.useEffect((()=>{if(T&&!C){var e={doc:t,selection:n,extensions:I},r=S?EditorState.fromJSON(S.json,e,S.fields):EditorState.create(e);if(A(r),!E){var i=new EditorView({state:r,parent:T,root:O});w(i),o&&o(i,r)}}return()=>{E&&(A(void 0),w(void 0))}}),[T,C]),reactExports.useEffect((()=>x(e.container)),[e.container]),reactExports.useEffect((()=>()=>{E&&(E.destroy(),w(void 0))}),[E]),reactExports.useEffect((()=>{l&&E&&E.focus()}),[l,E]),reactExports.useEffect((()=>{E&&E.dispatch({effects:StateEffect.reconfigure.of(I)})}),[c,a,u,h,d,f,m,g,p,_,b,v,y,r,s]),reactExports.useEffect((()=>{if(void 0!==t){var e=E?E.state.doc.toString():"";E&&t!==e&&E.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[External.of(!0)]})}}),[t,E]),{state:C,setState:A,view:E,setView:w,container:T,setContainer:x}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef(((e,t)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:h="light",height:d,minHeight:p,maxHeight:f,width:m,minWidth:g,maxWidth:_,basicSetup:b,placeholder:v,indentWithTab:y,editable:O,readOnly:S,root:T,initialState:x}=e,E=_objectWithoutPropertiesLoose(e,_excluded),w=reactExports.useRef(null),{state:C,view:A,container:k,setContainer:R}=useCodeMirror({container:w.current,root:T,value:r,autoFocus:u,theme:h,height:d,minHeight:p,maxHeight:f,width:m,minWidth:g,maxWidth:_,basicSetup:b,placeholder:v,indentWithTab:y,editable:O,readOnly:S,selection:i,onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:o,initialState:x});if(reactExports.useImperativeHandle(t,(()=>({editor:w.current,state:C,view:A})),[w,k,C,A]),"string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);return jsx("div",_extends({ref:w,className:("string"==typeof h?"cm-theme-"+h:"cm-theme")+(n?" "+n:"")},E))}));ReactCodeMirror.displayName="CodeMirror";const BlockPythonCodePanel=()=>{const e=useRobartState((e=>e.editingBlockId)),t=useRobartState((t=>t.blocks[e??""]));return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:null==t?void 0:t.python,className:"h-full w-full",extensions:[python()],readOnly:!0})})};let init=!0;const Simulation=()=>{const e=reactExports.useRef(null),t=useSimulator((e=>e.robots)),n=useRobartState((e=>e.robots)),r=useSimulator((e=>e.step)),i=useSimulator((e=>e.setRobots)),o=useRobartState(),s=useSimulator();useFrame((({clock:e})=>{r()})),0!==Object.keys(t).length?0===s.time&&Object.values(t).forEach((e=>{e.pos.set(...o.robots[e.id].startingPosition)})):0!==Object.keys(n).length&&i(n);const{size:a,viewport:l,camera:c}=useThree();return init&&(c.position.set(-5,0,2),c.up.set(0,0,1),init=!1),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:.45*Math.PI,minPolarAngle:0,minAzimuthAngle:-Math.PI/2,maxAzimuthAngle:Math.PI/2,minDistance:.5,maxDistance:5,object:c}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{labels:["X","Y","Z"],axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,0,-.001],args:[10.5,10.5],cellSize:1,cellThickness:1,rotation:[0,-Math.PI/2,-Math.PI/2],cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx(Plane,{args:[1e3,1e3],rotation:[0,0,-Math.PI/2],position:[0,0,-.02],children:jsx("meshStandardMaterial",{color:"black"})}),Object.values(t).map((t=>jsx("group",{ref:e,position:t.pos,children:jsx(Crazyflie,{robotId:t.id,renderBoundingBox:!0})},t.id))),jsx("primitive",{object:c})]})},SimulationPanel=()=>jsx("div",{className:"h-full w-full",children:jsx(Canvas,{children:jsx(Simulation,{})})}),noSemi=302,incdec=1,incdecPrefix=2,insertSemi=303,spaces=305,newline=306,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift:(e,t)=>t==LineComment||t==BlockComment||t==spaces?e:t==newline,strict:!1}),insertSemicolon=new ExternalTokenizer(((e,t)=>{let{next:n}=e;(n==braceR||-1==n||t.context)&&t.canShift(insertSemi)&&e.acceptToken(insertSemi)}),{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer(((e,t)=>{let n,{next:r}=e;space.indexOf(r)>-1||(r!=slash||(n=e.peek(1))!=slash&&n!=star)&&r!=braceR&&r!=semicolon&&-1!=r&&!t.context&&t.canShift(noSemi)&&e.acceptToken(noSemi)}),{contextual:!0}),incdecToken=new ExternalTokenizer(((e,t)=>{let{next:n}=e;if((n==plus||n==minus)&&(e.advance(),n==e.next)){e.advance();let n=!t.context&&t.canShift(incdec);e.acceptToken(n?incdec:incdecPrefix)}}),{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,interface:417,enum:421,namespace:427,module:429,declare:433,global:437,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},spec_word={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$EnO`QUOOO%QQUOOO'TQWOOP(bOSOOO*pQ(CjO'#CfO*wOpO'#CgO+VO!bO'#CgO+eO07`O'#DZO-vQUO'#DaO.WQUO'#DlO%QQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0uQSO'#ETOOQO'#I`'#I`O0}QSO'#GkOOQO'#Ei'#EiO1YQSO'#EhO1_QSO'#EhO3aQ(CjO'#JcO6QQ(CjO'#JdO6nQSO'#FWO6sQ#tO'#FoOOQ(CY'#F`'#F`O7OO&jO'#F`O7^Q,UO'#FvO8tQSO'#FuOOQ(CY'#Jd'#JdOOQ(CW'#Jc'#JcOOQQ'#J}'#J}O8yQSO'#IPO9OQ(C[O'#IQOOQQ'#JP'#JPOOQQ'#IU'#IUQ`QUOOO%QQUO'#DnO9WQUO'#DzO%QQUO'#D|O9_QSO'#GkO9dQ,UO'#ClO9rQSO'#EgO9}QSO'#ErO:SQ,UO'#F_O:qQSO'#GkO:vQSO'#GoO;RQSO'#GoO;aQSO'#GrO;aQSO'#GsO;aQSO'#GuO9_QSO'#GxO<QQSO'#G{O=cQSO'#CbO=sQSO'#HYO={QSO'#H`O={QSO'#HbO`QUO'#HdO={QSO'#HfO={QSO'#HiO>QQSO'#HoO>VQ(C]O'#HuO%QQUO'#HwO>bQ(C]O'#HyO>mQ(C]O'#H{O9OQ(C[O'#H}O>xQ(CjO'#CfO?zQWO'#DfQOQSOOO@bQSO'#EPO9dQ,UO'#EgO@mQSO'#EgO@xQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jg'#JgO%QQUO'#JgOBUQWO'#E`OOQ(CW'#E_'#E_OB`Q(C`O'#E`OBzQWO'#ESOOQO'#Jj'#JjOC`QWO'#ESOCmQWO'#E`ODTQWO'#EfODWQWO'#E`ODqQWO'#E`OAQQWO'#E`OBzQWO'#E`PEbO?MpO'#C`POOO)CDn)CDnOOOO'#IV'#IVOEmOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOE{O!bO,59RO%QQUO'#D]OOOO'#IY'#IYOFZO07`O,59uOOQ(CY,59u,59uOFiQUO'#IZOF|QSO'#JeOIOQbO'#JeO+sQUO'#JeOIVQSO,59{OImQSO'#EiOIzQSO'#JrOJVQSO'#JqOJVQSO'#JqOJ_QSO,5;VOJdQSO'#JpOOQ(CY,5:W,5:WOJkQUO,5:WOLlQ(CjO,5:bOM]QSO,5:jOMbQSO'#JnON[Q(C[O'#JoO:vQSO'#JnONcQSO'#JnONkQSO,5;UONpQSO'#JnOOQ(CY'#Cf'#CfO%QQUO'#EOO! dQ`O,5:oOOQO'#Jk'#JkOOQO-E<^-E<^O9_QSO,5=VO! zQSO,5=VO!!PQUO,5;SO!$SQ,UO'#EdO!%gQSO,5;SO!'PQ,UO'#DpO!'WQUO'#DuO!'bQWO,5;]O!'jQWO,5;]O%QQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^OOQQ'#FU'#FUO!'xQUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!){QSO,5;uOOQ(CY,5;v,5;vO%QQUO'#IfO!*TQ(C[O,5<cO!$SQ,UO,5;^O!*rQ,UO,5;^O%QQUO,5;rO!*yQ#tO'#FeO!+vQ#tO'#JvO!+bQ#tO'#JvO!+}Q#tO'#JvOOQO'#Jv'#JvO!,cQ#tO,5;}OOOO,5<Z,5<ZO!,tQUO'#FqOOOO'#Ie'#IeO7OO&jO,5;zO!,{Q#tO'#FsOOQ(CY,5;z,5;zO!-lQ7[O'#CrOOQ(CY'#Cv'#CvO!.PQSO'#CvO!.UO07`O'#CzO!.rQ,UO,5<`O!.yQSO,5<bO!0`QMhO'#GQO!0mQSO'#GRO!0rQSO'#GRO!0wQMhO'#GVO!1vQWO'#GZO!2iQ7[O'#J^OOQ(CY'#J^'#J^O!2sQSO'#J]O!3RQSO'#J[O!3ZQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0xQSO'#DSO!%lQ,UO'#FxO!%lQ,UO'#FzO!3cQSO'#F|O!3hQSO'#F}O!0rQSO'#GTO!%lQ,UO'#GYO!3mQSO'#EjO!4XQSO,5<aO`QUO,5>kOOQQ'#JX'#JXOOQQ,5>l,5>lOOQQ-E<S-E<SO!6WQ(CjO,5:YO!8tQ(CjO,5:fO%QQUO,5:fO!;_Q(CjO,5:hOOQ(CW'#Co'#CoO!<OQ,UO,5=VO!<^Q(C[O'#JYO8tQSO'#JYO!<oQ(C[O,59WO!<zQWO,59WO!=SQ,UO,59WO9dQ,UO,59WO!=_QSO,5;SO!=gQSO'#HXO!=xQSO'#KRO%QQUO,5;wO!>QQWO,5;yO!>VQSO,5=rO!>[QSO,5=rO!>aQSO,5=rO9OQ(C[O,5=rO!>oQSO'#EkO!?iQWO'#ElOOQ(CW'#Jp'#JpO!?pQ(C[O'#KOO9OQ(C[O,5=ZO;aQSO,5=aOOQO'#Cr'#CrO!?{QWO,5=^O!@TQ,UO,5=_O!@`QSO,5=aO!@eQ`O,5=dO>QQSO'#G}O9_QSO'#HPO!@mQSO'#HPO9dQ,UO'#HSO!@rQSO'#HSOOQQ,5=g,5=gO!@wQSO'#HTO!APQSO'#ClO!AUQSO,58|O!A`QSO,58|O!ChQUO,58|OOQQ,58|,58|O!CuQ(C[O,58|O%QQUO,58|O!DQQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!DbQSO,5=tO`QUO,5=zO`QUO,5=|O!DgQSO,5>OO`QUO,5>QO!DlQSO,5>TO!DqQUO,5>ZOOQQ,5>a,5>aO%QQUO,5>aO9OQ(C[O,5>cOOQQ,5>e,5>eO!HxQSO,5>eOOQQ,5>g,5>gO!HxQSO,5>gOOQQ,5>i,5>iO!H}QWO'#DXO%QQUO'#JgO!IlQWO'#JgO!JZQWO'#DgO!JlQWO'#DgO!L}QUO'#DgO!MUQSO'#JfO!M^QSO,5:QO!McQSO'#EmO!MqQSO'#JsO!MyQSO,5;WO!NOQWO'#DgO!N]QWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!NdQSO,5:kO>QQSO,5;RO!<zQWO,5;RO!=SQ,UO,5;RO9dQ,UO,5;RO!NlQSO,5@RO!NqQ!LQO,5:oO# wQ(C`O,5:zOBzQWO,5:nO#!cQWO,5:nO#!pQWO,5:zO##WQWO,5:zO##qQWO,5:zO#$bQWO,5:zOBzQWO,5:zO!<oQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%QQUO,5:zO#%UQ(C[O,5:zO#%aQ(C[O,5:zO!<zQWO,5:nOOQO,5;Q,5;QO#%oQ(C[O,5:zPOOO'#IT'#ITP#&TO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#&`Q`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#&eQbO,5>uO+sQUO,5>uOOQO,5>{,5>{O#&oQUO'#IZOOQO-E<X-E<XO#&|QSO,5@PO#'UQbO,5@PO#']QSO,5@]OOQ(CY1G/g1G/gO%QQUO,5@^O#'eQSO'#IaOOQO-E<_-E<_O#']QSO,5@]OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#'yQSO,5@YO:vQSO,5@YO#(RQSO,5@YO%QQUO,5@ZO#(aQ(C[O,5@ZO#(rQ(C[O,5@ZO#(yQSO'#IcO#'yQSO,5@YOOQ(CW1G0p1G0pO!'bQWO,5:qO!'mQWO,5:qOOQO,5:s,5:sO#)hQSO,5:sO#)pQ,UO1G2qO9_QSO1G2qOOQ(CY1G0n1G0nO#*OQ(CjO1G0nO#+TQ(ChO,5;OOOQ(CY'#GP'#GPO#+qQ(CjO'#J^O!!PQUO1G0nO#-yQ,UO'#JhO#.TQSO,5:[O#.YQbO'#JiO%QQUO'#JiO#.dQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%QQUO1G0wOOQ(CY1G1a1G1aO#.iQSO1G0wO#1QQ(CjO1G0xO#1XQ(CjO1G0xO#3rQ(CjO1G0xO#3yQ(CjO1G0xO#6TQ(CjO1G0xO#6kQ(CjO1G0xO#9eQ(CjO1G0xO#9lQ(CjO1G0xO#<VQ(CjO1G0xO#<^Q(CjO1G0xO#>UQ(CjO1G0xO#AUQ$IUO'#CfO#CSQ$IUO1G1ZO#EQQ$IUO'#JdO!*OQSO1G1aO#EeQ(CjO,5?QOOQ(CW-E<d-E<dO#FXQ(CjO1G0xOOQ(CY1G0x1G0xO#HdQ(CjO1G1^O#IWQ#tO,5<RO#I`Q#tO,5<SO#IhQ#tO'#FjO#JPQSO'#FiOOQO'#Jw'#JwOOQO'#Id'#IdO#JUQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JgQ$IUO'#JcO#JqQSO,5<]O!'xQUO,5<]OOOO-E<c-E<cOOQ(CY1G1f1G1fO#JvQWO'#JvOOQ(CY,5<_,5<_O#KOQWO,5<_OOQ(CY,59b,59bO!$SQ,UO'#C|OOOO'#IX'#IXO#KTO07`O,59fOOQ(CY,59f,59fO%QQUO1G1zO!3hQSO'#IhO#K`QSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!%lQ,UO,5=POOQO'#Gh'#GhO!%lQ,UO,5=RO!$SQ,UO,5=TOOQO1G1|1G1|O#KnQ`O'#CoO#LRQ`O,5<lO#LYQSO'#JzO9_QSO'#JzO#LhQSO,5<nO!%lQ,UO,5<mO#LmQSO'#GSO#LxQSO,5<mO#L}Q`O'#GPO#M[Q`O'#J{O#MfQSO'#J{O!$SQ,UO'#J{O#MkQSO,5<qO#MpQWO'#G[O!1qQWO'#G[O#NRQSO'#G^O#NWQSO'#G`O!0rQSO'#GcO#N]Q(C[O'#IjO#NhQWO,5<uOOQ(CY,5<u,5<uO#NoQWO'#G[O#N}QWO'#G]O$ VQWO'#G]OOQ(CY,5=U,5=UO!%lQ,UO,5?wO!%lQ,UO,5?wO$ [QSO'#IkO$ gQSO,5?vO$ oQSO,59]O$!`Q,UO,59nOOQ(CY,59n,59nO$#RQ,UO,5<dO$#tQ,UO,5<fO?rQSO,5<hOOQ(CY,5<i,5<iO$$OQSO,5<oO$$TQ,UO,5<tO!!PQUO1G1{O$$eQSO1G1{OOQQ1G4V1G4VOOQ(CY1G/t1G/tO!){QSO1G/tO$&dQ(CjO1G0QOOQQ1G2q1G2qO!$SQ,UO1G2qO%QQUO1G2qO$'TQSO1G2qO$'`Q,UO'#EdOOQ(CW,5?t,5?tO$'jQ(C[O,5?tOOQQ1G.r1G.rO!<oQ(C[O1G.rO!<zQWO1G.rO!=SQ,UO1G.rO$'{QSO1G0nO$(QQSO'#CfO$(]QSO'#KSO$(eQSO,5=sO$(jQSO'#KSO$(oQSO'#KSO$(zQSO'#IsO$)YQSO,5@mO$)bQbO1G1cOOQ(CY1G1e1G1eO9_QSO1G3^O?rQSO1G3^O$)iQSO1G3^O$)nQSO1G3^OOQQ1G3^1G3^O:vQSO'#JqO:vQSO'#EmO%QQUO'#EmO:vQSO'#ImO$)sQ(C[O,5@jOOQQ1G2u1G2uO!@`QSO1G2{O!$SQ,UO1G2xO$*OQSO1G2xOOQQ1G2y1G2yO!$SQ,UO1G2yO$*TQSO1G2yO$*]QWO'#GwOOQQ1G2{1G2{O!1qQWO'#IoO!@eQ`O1G3OOOQQ1G3O1G3OOOQQ,5=i,5=iO$*eQ,UO,5=kO9_QSO,5=kO#NWQSO,5=nO8tQSO,5=nO!<zQWO,5=nO!=SQ,UO,5=nO9dQ,UO,5=nO$*sQSO'#KQO$+OQSO,5=oOOQQ1G.h1G.hO$+TQ(C[O1G.hO?rQSO1G.hO$+`QSO1G.hO9OQ(C[O1G.hO$+kQbO,5@oO$,OQSO,5@oO$,ZQUO,5=vO$,bQSO,5=vO:vQSO,5@oOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO={QSO1G3jO$,gQUO1G3lO$0hQUO'#HkOOQQ1G3o1G3oO$0uQSO'#HqO>QQSO'#HsOOQQ1G3u1G3uO$0}QUO1G3uO9OQ(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9OQ(C[O1G4PO9OQ(C[O1G4RO$5RQSO,5@RO!'xQUO,5;XO:vQSO,5;XO>QQSO,5:RO!'xQUO,5:RO!<zQWO,5:RO$5WQ$IUO,5:ROOQO,5;X,5;XO$5bQWO'#I[O$5xQSO,5@QOOQ(CY1G/l1G/lO$6QQWO'#IbO$6[QSO,5@_OOQ(CW1G0r1G0rO!JlQWO,5:ROOQO'#I_'#I_O$6dQWO,5:mOOQ(CY,5:m,5:mO!NgQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0m1G0mO>QQSO1G0mO!<zQWO1G0mO!=SQ,UO1G0mOOQ(CW1G5m1G5mO!<oQ(C[O1G0YOOQO1G0f1G0fO%QQUO1G0fO$6kQ(C[O1G0fO$6vQ(C[O1G0fO!<zQWO1G0YOBzQWO1G0YO$7UQ(C`O1G0fO$7pQWO1G0YOBzQWO1G0fO$7}QWO1G0fO$8eQWO1G0fO$9OQWO1G0fO$9oQ(C[O1G0fOOQO1G0Y1G0YO$:TQ(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$:_Q`O,5<cO$:gQbO1G4aOOQO1G4g1G4gO%QQUO,5>uO$:qQSO1G5kO$:yQSO1G5wO$;RQbO1G5xO:vQSO,5>{O$;]QSO1G5tO$;]QSO1G5tO:vQSO1G5tO$;eQ(CjO1G5uO%QQUO1G5uO$;uQ(C[O1G5uO$<WQSO,5>}O:vQSO,5>}OOQO,5>},5>}O$<lQSO,5>}OOQO-E<a-E<aOOQO1G0]1G0]OOQO1G0_1G0_O!*OQSO1G0_OOQQ7+(]7+(]O!$SQ,UO7+(]O%QQUO7+(]O$<zQSO7+(]O$=VQ,UO7+(]O$=eQ(CjO,59nO$?mQ(CjO,5<dO$AxQ(CjO,5<fO$DTQ(CjO,5<tOOQ(CY7+&Y7+&YO$FfQ(CjO7+&YO$GYQ,UO'#I]O$GdQSO,5@SOOQ(CY1G/v1G/vO$GlQUO'#I^O$GyQSO,5@TO$HRQbO,5@TOOQ(CY1G/{1G/{O$H]QSO7+&cOOQ(CY7+&c7+&cO$HbQ$IUO,5:bO%QQUO7+&uO$HlQ$IUO,5:YO$HyQ$IUO,5:fO$ITQ$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$I_Q#tO,5<UO!'xQUO,5<TOOQO-E<b-E<bOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$IjQSO1G1wOOQ(CY1G1y1G1yO$IoQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IvQ(CjO7+'fOOQ(CY,5?S,5?SO$JjQSO,5?SOOQ(CY1G2_1G2_P$JoQSO'#IhPOQ(CY-E<f-E<fO$KcQ,UO1G2kO$LUQ,UO1G2mO$L`Q`O1G2oOOQ(CY1G2W1G2WO$LgQSO'#IgO$LuQSO,5@fO$LuQSO,5@fO$L}QSO,5@fO$MYQSO,5@fOOQO1G2Y1G2YO$MhQ,UO1G2XO!%lQ,UO1G2XO$MxQMhO'#IiO$NYQSO,5@gO!$SQ,UO,5@gO$NbQ`O,5@gOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$NlQSO,5<wOBuQSO,5<wO!<zQWO,5<vOOQO'#G_'#G_O$NqQSO,5<xOOQ(CW,5<z,5<zO$NlQSO,5<}OOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY1G2a1G2aO!1qQWO,5<vO$NyQSO,5<wO#NRQSO,5<xO!1qQWO,5<wO% UQ,UO1G5cO% `Q,UO1G5cOOQO,5?V,5?VOOQO-E<i-E<iOOQO1G.w1G.wO!>QQWO,59pO%QQUO,59pO% mQSO1G2SO!%lQ,UO1G2ZO% rQ(CjO7+'gOOQ(CY7+'g7+'gO!!PQUO7+'gOOQ(CY7+%`7+%`O%!fQ`O'#J|O!NgQSO7+(]O%!pQbO7+(]O$<}QSO7+(]O%!wQ(ChO'#CfO%#[Q(ChO,5<{O%#|QSO,5<{OOQ(CW1G5`1G5`OOQQ7+$^7+$^O!<oQ(C[O7+$^O!<zQWO7+$^O!!PQUO7+&YO%$RQSO'#IrO%$gQSO,5@nOOQO1G3_1G3_O9_QSO,5@nO%$gQSO,5@nO%$oQSO,5@nOOQO,5?_,5?_OOQO-E<q-E<qOOQ(CY7+&}7+&}O%$tQSO7+(xO9OQ(C[O7+(xO9_QSO7+(xO?rQSO7+(xO%$yQSO,5;XOOQ(CW,5?X,5?XOOQ(CW-E<k-E<kOOQQ7+(g7+(gO%%OQ(ChO7+(dO!$SQ,UO7+(dO%%YQ`O7+(eOOQQ7+(e7+(eO!$SQ,UO7+(eO%%aQSO'#KPO%%lQSO,5=cOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ7+(j7+(jO%&{QWO'#HQOOQQ1G3V1G3VO!$SQ,UO1G3VO%QQUO1G3VO%'SQSO1G3VO%'_Q,UO1G3VO9OQ(C[O1G3YO#NWQSO1G3YO8tQSO1G3YO!<zQWO1G3YO!=SQ,UO1G3YO%'mQSO'#IqO%'xQSO,5@lO%(QQWO,5@lOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO?rQSO7+$SO9OQ(C[O7+$SO%(]QSO7+$SO%QQUO1G6ZO%QQUO1G6[O%(bQUO1G3bO%(iQSO1G3bO%(nQUO1G3bO%(uQ(C[O1G6ZOOQQ7+(z7+(zO9OQ(C[O7+)UO`QUO7+)WOOQQ'#KV'#KVOOQQ'#It'#ItO%)PQUO,5>VOOQQ,5>V,5>VO%QQUO'#HlO%)^QSO'#HnOOQQ,5>],5>]O:vQSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%)cQWO1G5mO%)wQ$IUO1G0sO%*RQSO1G0sOOQO1G/m1G/mO%*^Q$IUO1G/mO>QQSO1G/mO!'xQUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!<zQWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!NgQSO7+%qOOQ(CY7+&X7+&XO>QQSO7+&XO!<zQWO7+&XOOQO7+%t7+%tO$:TQ(CjO7+&QOOQO7+&Q7+&QO%QQUO7+&QO%*hQ(C[O7+&QO!<oQ(C[O7+%tO!<zQWO7+%tO%*sQ(C[O7+&QOBzQWO7+%tO%+RQ(C[O7+&QO%+gQ(C`O7+&QO%+qQWO7+%tOBzQWO7+&QO%,OQWO7+&QO%,fQWO7+&QO%-PQSO7++`O%-PQSO7++`O%-XQ(CjO7++aO%QQUO7++aOOQO1G4i1G4iO:vQSO1G4iO%-iQSO1G4iOOQO7+%y7+%yO!NgQSO<<KwO%!pQbO<<KwO%-wQSO<<KwOOQQ<<Kw<<KwO!$SQ,UO<<KwO%QQUO<<KwO%.PQSO<<KwO%.[Q(CjO1G2kO%0gQ(CjO1G2mO%2rQ(CjO1G2XO%5TQ,UO,5>wOOQO-E<Z-E<ZO%5_QbO,5>xO%QQUO,5>xOOQO-E<[-E<[O%5iQSO1G5oOOQ(CY<<I}<<I}O%5qQ$IUO1G0nO%7{Q$IUO1G0xO%8SQ$IUO1G0xO%:WQ$IUO1G0xO%:_Q$IUO1G0xO%<SQ$IUO1G0xO%<jQ$IUO1G0xO%>}Q$IUO1G0xO%?UQ$IUO1G0xO%AYQ$IUO1G0xO%AaQ$IUO1G0xO%CXQ$IUO1G0xO%ClQ(CjO<<JaO%DqQ$IUO1G0xO%FgQ$IUO'#J^O%HjQ$IUO1G1^O%HwQ$IUO1G0QO!'xQUO'#FlOOQO'#Jx'#JxOOQO1G1p1G1pO%IRQSO1G1oO%IWQ$IUO,5?QOOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4n1G4nO!%lQ,UO7+(ZO%IbQSO,5?RO9_QSO,5?ROOQO-E<e-E<eO%IpQSO1G6QO%IpQSO1G6QO%IxQSO1G6QO%JTQ,UO7+'sO%JeQ`O,5?TO%JoQSO,5?TO!$SQ,UO,5?TOOQO-E<g-E<gO%JtQ`O1G6RO%KOQSO1G6ROOQ(CW1G2c1G2cO$NlQSO1G2cOOQ(CW1G2b1G2bO%KWQSO1G2dO!$SQ,UO1G2dOOQ(CW1G2i1G2iO!<zQWO1G2bOBuQSO1G2cO%K]QSO1G2dO%KeQSO1G2cO!%lQ,UO7+*}OOQ(CY1G/[1G/[O%KpQSO1G/[OOQ(CY7+'n7+'nO%KuQ,UO7+'uO%LVQ(CjO<<KROOQ(CY<<KR<<KRO!$SQ,UO'#IlO%LyQSO,5@hO!$SQ,UO1G2gOOQQ<<Gx<<GxO!<oQ(C[O<<GxO%MRQ(CjO<<ItOOQ(CY<<It<<ItOOQO,5?^,5?^O%MuQSO,5?^O$(oQSO,5?^OOQO-E<p-E<pO%MzQSO1G6YO%MzQSO1G6YO9_QSO1G6YO?rQSO<<LdOOQQ<<Ld<<LdO%NSQSO<<LdO9OQ(C[O<<LdO%NXQSO1G0sOOQQ<<LO<<LOO%%OQ(ChO<<LOOOQQ<<LP<<LPO%%YQ`O<<LPO%N^QWO'#InO%NiQSO,5@kO!'xQUO,5@kOOQQ1G2}1G2}O%NqQ(C`O'#JgO& ]QUO'#JgO& dQWO'#E`O&!QQ(C[O'#E`OB`Q(C`O'#E`O(YQWO'#HROOQO'#Ip'#IpO9OQ(C[O'#IpO&!fQWO,5=lOOQQ,5=l,5=lO&#OQWO'#E`O& vQWO'#E`O&#VQWO'#E`O&#pQWO'#E`O& jQWO'#E`O&$aQWO'#HRO&$rQSO7+(qO&$wQSO7+(qOOQQ7+(q7+(qO!$SQ,UO7+(qO%QQUO7+(qO&%PQSO7+(qOOQQ7+(t7+(tO9OQ(C[O7+(tO#NWQSO7+(tO8tQSO7+(tO!<zQWO7+(tO&%[QSO,5?]OOQO-E<o-E<oOOQO'#HU'#HUO&%gQSO1G6WO9OQ(C[O<<GnOOQQ<<Gn<<GnO?rQSO<<GnO&%oQSO7++uO&%tQSO7++vOOQQ7+(|7+(|O&%yQSO7+(|O&&OQUO7+(|O&&VQSO7+(|O%QQUO7++uO%QQUO7++vOOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<r-E<rOOQQ1G3q1G3qO&&[QSO,5>WOOQQ,5>Y,5>YO&&aQSO1G3wO:vQSO7+&_O!'xQUO7+&_OOQO7+%X7+%XO&&fQ$IUO1G5xO>QQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>QQSO<<IsOOQO<<Il<<IlO$:TQ(CjO<<IlO%QQUO<<IlOOQO<<I`<<I`O!<oQ(C[O<<I`O&&pQ(C[O<<IlO!<zQWO<<I`O&&{Q(C[O<<IlOBzQWO<<I`O&'ZQ(C[O<<IlO&'oQ(C`O<<IlO&'yQWO<<I`OBzQWO<<IlO&(WQWO<<IlO&(nQSO<<NzO&(vQ(CjO<<N{OOQO7+*T7+*TO:vQSO7+*TOOQQANAcANAcO&)WQSOANAcO!$SQ,UOANAcO!NgQSOANAcO%!pQbOANAcO%QQUOANAcO&)`Q(CjO7+'sO&+qQ(CjO7+'uO&.SQbO1G4dO&.^Q$IUO7+&YO&.kQ$IUO,59nO&0nQ$IUO,5<dO&2qQ$IUO,5<fO&4tQ$IUO,5<tO&6jQ$IUO7+'fO&6wQ$IUO7+'gO&7UQSO,5<WOOQO7+'Z7+'ZO&7ZQ,UO<<KuOOQO1G4m1G4mO&7bQSO1G4mO&7mQSO1G4mO&7{QSO7++lO&7{QSO7++lO!$SQ,UO1G4oO&8TQ`O1G4oO&8_QSO7++mOOQ(CW7+'}7+'}O$NlQSO7+(OO&8gQ`O7+(OOOQ(CW7+'|7+'|O$NlQSO7+'}O&8nQSO7+(OO!$SQ,UO7+(OOBuQSO7+'}O&8sQ,UO<<NiOOQ(CY7+$v7+$vO&8}Q`O,5?WOOQO-E<j-E<jO&9XQ(ChO7+(ROOQQAN=dAN=dO9_QSO1G4xOOQO1G4x1G4xO&9iQSO1G4xO&9nQSO7++tO&9nQSO7++tO9OQ(C[OANBOO?rQSOANBOOOQQANBOANBOOOQQANAjANAjOOQQANAkANAkO&9vQSO,5?YOOQO-E<l-E<lO&:RQ$IUO1G6VO&:]Q(C[O,5=mO8tQSO,5=mO&<nQbO'#CfO&<xQWO,5:zO&=SQWO,5:zO&=aQWO,5:zO&=tQWO,5:zO!<zQWO,5=mOOQO,5?[,5?[OOQO-E<n-E<nOOQQ1G3W1G3WO& ]QUO,5<xO%NqQ(C`O,5=mO# wQ(C`O,5:zO(YQWO,5=mO&>[QWO,5=mO&>mQWO,5:zOOQQ<<L]<<L]O!$SQ,UO<<L]O&$rQSO<<L]O&?WQSO<<L]O%QQUO<<L]OOQQ<<L`<<L`O9OQ(C[O<<L`O#NWQSO<<L`O8tQSO<<L`O&?`QWO1G4wO&?kQSO7++rOOQQAN=YAN=YO9OQ(C[OAN=YOOQQ<= a<= aOOQQ<= b<= bOOQQ<<Lh<<LhO&?sQSO<<LhO&?xQUO<<LhO&@PQSO<= aO&@UQSO<= bOOQQ1G3r1G3rO>QQSO7+)cO&@ZQSO<<IyO&@fQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$:TQ(CjOAN?WOOQOAN>zAN>zO%QQUOAN?WO!<oQ(C[OAN>zO&@pQ(C[OAN?WO!<zQWOAN>zO&@{Q(C[OAN?WOBzQWOAN>zO&AZQ(C[OAN?WO&AoQ(C`OAN?WO&AyQWOAN>zOBzQWOAN?WOOQO<<Mo<<MoOOQQG26}G26}O!$SQ,UOG26}O!NgQSOG26}O&BWQSOG26}O%!pQbOG26}O&B`Q$IUO<<JaO&BmQ$IUO1G2XO&DcQ$IUO1G2kO&FfQ$IUO1G2mO&HiQ$IUO<<KRO&HvQ$IUO<<ItOOQO1G1r1G1rO!%lQ,UOANAaOOQO7+*X7+*XO&ITQSO7+*XO&I`QSO<= WO&IhQ`O7+*ZOOQ(CW<<Kj<<KjO$NlQSO<<KjOOQ(CW<<Ki<<KiO&IrQ`O<<KjO$NlQSO<<KiOOQO7+*d7+*dO9_QSO7+*dO&IyQSO<= `OOQQG27jG27jO9OQ(C[OG27jO!'xQUO1G4tO&JRQSO7++qOOQO1G3X1G3XO9OQ(C[O1G3XO&:]Q(C[O1G3XO&JZQWO1G0fO&JeQWO1G0fO&JrQWO1G0fO8tQSO1G3XO!<zQWO1G3XO(YQWO1G3XO%NqQ(C`O1G3XO$7UQ(C`O1G0fO&KVQWO1G3XO&$rQSOANAwOOQQANAwANAwO!$SQ,UOANAwO&KhQSOANAwOOQQANAzANAzO9OQ(C[OANAzO#NWQSOANAzOOQO'#HV'#HVOOQO7+*c7+*cOOQQG22tG22tOOQQANBSANBSO&KpQSOANBSOOQQAND{AND{OOQQAND|AND|OOQQ<<L}<<L}O!'xQUOAN?eOOQOG24rG24rO$:TQ(CjOG24rOOQOG24fG24fO%QQUOG24rO!<oQ(C[OG24fO&KuQ(C[OG24rO!<zQWOG24fO&LQQ(C[OG24rOBzQWOG24fO&L`Q(C[OG24rO!NgQSOLD,iOOQQLD,iLD,iO!$SQ,UOLD,iO&LtQSOLD,iO&L|Q$IUO7+'sO&NrQ$IUO7+'uO'!hQ,UOG26{OOQO<<Ms<<MsOOQ(CWANAUANAUO$NlQSOANAUOOQ(CWANATANATOOQO<<NO<<NOOOQQLD-ULD-UO'!xQ$IUO7+*`OOQO7+(s7+(sO9OQ(C[O7+(sO'#SQWO7+&QO'#^QWO7+&QO&:]Q(C[O7+(sO8tQSO7+(sO!<zQWO7+(sO(YQWO7+(sOOQQG27cG27cO&$rQSOG27cO!$SQ,UOG27cOOQQG27fG27fO9OQ(C[OG27fOOQQG27nG27nO'#kQ$IUOG25POOQOLD*^LD*^O$:TQ(CjOLD*^OOQOLD*QLD*QO%QQUOLD*^O!<oQ(C[OLD*QO'#uQ(C[OLD*^O!<zQWOLD*QO'$QQ(C[OLD*^OOQQ!$(!T!$(!TO!NgQSO!$(!TO!$SQ,UO!$(!TO'$`Q(CjOG26{OOQ(CWG26pG26pOOQO<<L_<<L_O'&qQWO<<IlO9OQ(C[O<<L_O&:]Q(C[O<<L_O8tQSO<<L_O!<zQWO<<L_OOQQLD,}LD,}O&$rQSOLD,}OOQQLD-QLD-QOOQO!$'Mx!$'MxO$:TQ(CjO!$'MxOOQO!$'Ml!$'MlO%QQUO!$'MxO!<oQ(C[O!$'MlO'&{Q(C[O!$'MxOOQQ!)9Eo!)9EoO!NgQSO!)9EoOOQOANAyANAyO9OQ(C[OANAyO&:]Q(C[OANAyO8tQSOANAyOOQQ!$(!i!$(!iOOQO!)9Cd!)9CdO$:TQ(CjO!)9CdOOQO!)9CW!)9CWO%QQUO!)9CdOOQQ!.K;Z!.K;ZO''WQ$IUOG26{OOQOG27eG27eO9OQ(C[OG27eO&:]Q(C[OG27eOOQO!.K9O!.K9OO$:TQ(CjO!.K9OOOQOLD-PLD-PO9OQ(C[OLD-POOQO!4/.j!4/.jOOQO!$(!k!$(!kO!'xQUO'#DvO0uQSO'#ETO'(|QbO'#JcO!'xQUO'#DnO')TQUO'#DzO!'xQUO'#D|O')[QbO'#CfO'+rQbO'#CfO',SQUO,5;SO!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO'#IfO'.VQSO,5<cO'._Q,UO,5;^O'/rQ,UO,5;^O!'xQUO,5;rO0xQSO'#DSO0xQSO'#DSO!$SQ,UO'#FxO'._Q,UO'#FxO!$SQ,UO'#FzO'._Q,UO'#FzO!$SQ,UO'#GYO'._Q,UO'#GYO!'xQUO,5:fO!'xQUO,5@^O',SQUO1G0nO'/yQ$IUO'#CfO!'xQUO1G1zO!$SQ,UO,5=PO'._Q,UO,5=PO!$SQ,UO,5=RO'._Q,UO,5=RO!$SQ,UO,5<mO'._Q,UO,5<mO',SQUO1G1{O!'xQUO7+&uO!$SQ,UO1G2XO'._Q,UO1G2XO!$SQ,UO1G2ZO'._Q,UO1G2ZO',SQUO7+'gO',SQUO7+&YO!$SQ,UOANAaO'._Q,UOANAaO'0TQSO'#EhO'0YQSO'#EhO'0bQSO'#FWO'0gQSO'#ErO'0lQSO'#JrO'0wQSO'#JpO'1SQSO,5;SO'1XQ,UO,5<`O'1`QSO'#GRO'1eQSO'#GRO'1jQSO,5<aO'1rQSO,5;SO'1zQ$IUO1G1ZO'2RQSO,5<mO'2WQSO,5<mO'2]QSO,5<oO'2bQSO,5<oO'2gQSO1G1{O'2lQSO1G0nO'2qQ,UO<<KuO'2xQ,UO<<KuO7^Q,UO'#FvO8tQSO'#FuO@mQSO'#EgO!'xQUO,5;oO!0rQSO'#GRO!0rQSO'#GRO!0rQSO'#GTO!0rQSO'#GTO!%lQ,UO7+(ZO!%lQ,UO7+(ZO$L`Q`O1G2oO$L`Q`O1G2oO!$SQ,UO,5=TO!$SQ,UO,5=T",stateData:"'4R~O'mOS'nOSROS'oRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#p}O$QzO$UfO%`{O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO%}!UO&T!VO&V!WO&X!XO&Z!YO&^!ZO&d![O&j!]O&l!^O&n!_O&p!`O&r!aO'tSO'vTO'yUO(RVO(`[O(miO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x<XO!|!wO!}!vO#O!tO#P!uO#Q!sO#T!xO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O'o!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'kYX(RYX(aYX(hYX(iYX~O!a$zX~P(gO[!{O'v!}O'w!{O'x!}O~O[#OO'x!}O'y!}O'z#OO~Oq#QO!O#RO(S#RO(T#TO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't<^O'vTO'yUO(RVO(`[O(miO~O!U#XO!V#UO!S(XP!S(eP~P+sO!W#aO~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(miO~O!U#gO!x]O#b#jO#c#gO't<_O!g(bP~P._O!h#lO't#kO~O!t#pO!x]O%`#qO~O#d#rO~O!a#sO#d#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!V$_O!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^(VX'k(VX'i(VX!g(VX!S(VX!X(VX%a(VX!a(VX~P1gO#X$cO#{$cOP(WXX(WXk(WXy(WXz(WX|(WX!V(WX!e(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!X(WX%a(WX~O^(WX!f(WX'k(WX'i(WX!S(WX!g(WXo(WX!a(WX~P3}O#X$cO~O$W$eO$Y$dO$a$jO~O!X$kO$UfO$d$lO$f$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't$pO'vTO'yUO'}%PO(R$sOd(OP~O!h%[O~O!a%^O~O^%_O'k%_O~O'u!iO~P%QO't%fO~O!h%[O't%fO'u!iO'}%PO~Ob%mO!h%[O't%fO~O#o$QO~Oy%rO!X%oO!h%qO%b%uO't%fO'u!iO'vTO'yUO](uP~O!t#pO~O|%wO!X%xO't%fO~O|%wO!X%xO%j%|O't%fO~O't%}O~O#p}O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO~Oa&WOb&VO!t&TO%`&UO%r&SO~P;fOa&ZObwO!X&YO!tvO!x]O#p}O%`{O%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO~O_&^O#X&aO%b&[O'u!iO~P<eO!h&bO!q&fO~O!h#lO~O!XXO~O^%_O'j&nO'k%_O~O^%_O'j&qO'k%_O~O^%_O'j&sO'k%_O~O'iYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(gO!['QO!]&yO!^&yO'u!iO'vTO'yUO~Ol&wO|&vO!U&zO(U&uO!W(YP!W(gP~P?fOg'TO!X'RO't%fO~Ob'YO!h%[O't%fO~Oy%rO!h%qO~Ol!kO|!lO!['_O!]'^O!^'^O!}'bO#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO'vTO'yUO(U!jO(`!nO~O!x<XO!|'cO~PAQO^%_O!a#sO!h%[O!l'jO#X'hO'k%_O'}%PO(a'fO~Ol!kO|!lO'vTO'yUO(U!jO(`!nO~O!]'^O!^'^O'u!iO~PBzO!['_O!]'^O!^'^O#T'dO#U'dO'u!iO~PBzO!XXO!['_O!]'^O!^'^O#Q'`O#T'dO#U'dO'u!iO~PBzO!['_O!]'^O!^'^O#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO~PBzO'p'nO'q'nO'r'pO~O[!{O'v'rO'w!{O'x'rO~O[#OO'x'rO'y'rO'z#OO~Oq#QO!O#RO(S#RO(T'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+sO!V'zO!S(XX~OP$ZOX$bOk$OOy#wOz#xO|#yO!V'zO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O!S(XX~PGUO!S(PO~O!S(dX!V(dX!a(dX!g(dX(a(dX~O#X(dX#d#]X!W(dX~PI[O#X(QO!S(fX!V(fX~O!V(RO!S(eX~O!S(UO~O#X$cO~PI[O!W(VO~P`Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(a!ja(h!ja(i!ja~O^!ja'k!ja'i!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJrO!g(WO~O|%wO!X%xO!x]O#b(ZO#c(YO't%fO~O!a#sO#X([O(a'fO!V(cX^(cX'k(cX~O!g(cX~PMvO!V(_O!g(bX~O!g(aO~O|%wO!X%xO#c(YO't%fO~Oy(bOz(cO!f#uO!h#vO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa't!wa~P! OO!t(gO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#d(mO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't(kO'vTO'yUO'}%PO(R$sO~Od([P~P!%lO!U(qO!g(]P~P%QO(U(sO(`[O~O|(uO!h#vO(U(sO(`[O~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~Oz)WO!h#vO~O!V$_O^$ka'k$ka'i$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!$SOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(jX$T(jX$W(jX$Y(jX$a(jX~Oy)_O~P!+bOy)_O!X(jX$T(jX$W(jX$Y(jX$a(jX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!'xO$W$eO$Y$dO$a)mO~Og$sXy$sX|$sX!f$sX(h$sX(i$sX~OdfXd$sXgfX!VfX#XfX~P!-WOl)oO~Oq)pO(S)qO(T)sO~Og)|Oy)uO|)vO(h)xO(i)zO~Od)tO~P!.aOd)}O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO'vTO'yUO'}%PO(R$sO~O!U*RO't*OO!g(nP~P!/OO#d*TO~O!h*UO~O!U*ZO't*WO!S(oP~P!/OOk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'u!iO(U!jO~O!W*dO~P!1UO!f#uOg(QXy(QX|(QX(h(QX(i(QX!V(QX#X(QX~Od(QX#y(QX~P!1}Og*jO#X*iOd(PX!V(PX~O!V*kOd(OX~O't%}Od(OP~O!h*rO~O't(kO~O|%wO!U#gO!X%xO!x]O#b#jO#c#gO't%fO!g(bP~O!a#sO#d*vO~OP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^!ba!V!ba'k!ba'i!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!4aOy#wOz#xO|#yO!f#uO!h#vO(RVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(a!na(h!na(i!na~O^!na'k!na'i!na!S!na!g!nao!na!X!na%a!na!a!na~P!6zOy#wOz#xO|#yO!f#uO!h#vO(RVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(a!pa(h!pa(i!pa~O^!pa'k!pa'i!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!9eOg+OO!X'RO%a*}O'}%PO~O!a+QO^'|X!X'|X'k'|X!V'|X~O^%_O!XXO'k%_O~O!h%[O'}%PO~O!h%[O't%fO'}%PO~O!a#sO#d(mO~O%b+^O't+YO'vTO'yUO!W(vP~O!V+_O](uX~O(U(sO~OX+cO~O]+dO~O!X%oO't%fO'u!iO](uP~O|%wO!U+hO!V(RO!X%xO't%fO!S(eP~Ol&}O|+jO!U+iO'vTO'yUO(U(sO~O!W(gP~P!?TO!V+kO^(rX'k(rX~O#X+oO'}%PO~Og+rO!X$zO'}%PO~O!X+tO~Oy+vO!XXO~O!t+{O~Ob,QO~O't#kO!W(tP~Ob%mO~O%b!OO't%}O~P<eOX,WO],VO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$UfO%`{O'vTO'yUO(RVO(`[O(miO~O!X!cO$Q!hO't!bO~P!AhO],VO^%_O'k%_O~O^,[O#p,^O%d,^O%e,^O~P%QO!h&bO~O&T,cO~O!X,eO~O&f,gO&h,hOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%h&ca%j&ca%m&ca%n&ca%p&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'i&ca't&ca'v&ca'y&ca(R&ca(`&ca(m&ca!W&ca&[&ca_&ca&a&ca~O't,mO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X'}!_X~O!a,rO#X,qO!V#aX!V(ZX!W#aX!W(ZX!a(ZX!h(ZX'}(ZX~O!a,tO!h%[O'}%PO!V!ZX!W!ZX~Ol!kO|!lO'vTO'yUO(U!jO~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(m=uO~O't<|O~P!J}O!V,xO!W(YX~O!W,zO~O!a,rO#X,qO!V#aX!W#aX~O!V,{O!W(gX~O!W,}O~O!]-OO!^-OO'u!iO~P!JlO!W-RO~P'TOg-UO!X'RO~O!S-ZO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'u!wa'v!wa'y!wa(U!wa(`!wa~P! OO^%_O!a#sO!h%[O!l-`O#X-^O'k%_O'}%PO(a'fO~O!]-bO!^-bO'u!iO~PBzO![-dO!]-bO!^-bO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO!}-hO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO^%_O#X-^O'k%_O~O^%_O!a#sO#X-^O'k%_O~O^%_O!a#sO!l-`O#X-^O'k%_O(a'fO~O'p'nO'q'nO'r-mO~Oo-nO~O!S&}a!V&}a~P!4aO!U-rO!S&}X!V&}X~P%QO!V'zO!S(Xa~O!S(Xa~PGUO!V(RO!S(ea~O|%wO!U-vO!X%xO't%fO!S'TX!V'TX~O!V(_O!g(ba~O|%wO!X%xO#c-yO't%fO~O#X-{O!V(ca!g(ca^(ca'k(ca~O!a#sO~P#(aO|%wO!U.OO!X%xO!x]O#b.QO#c.OO't%fO!V'VX!g'VX~Oz.UO!h#vO~Og.XO!X'RO%a.WO'}%PO~O^#[i!V#[i'k#[i'i#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!4aOg>ROy)uO|)vO(h)xO(i)zO~O#d#Wa^#Wa#X#Wa'k#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#*rO#d(QXP(QXX(QX^(QXk(QXz(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX'k(QX(R(QX(a(QX!g(QX!S(QX'i(QXo(QX!X(QX%a(QX!a(QX~P!1}O!V.bOd([X~P!.aOd.dO~O!V.eO!g(]X~P!4aO!g.hO~O!S.jO~OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#.nO#g#|O~P#.nOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O(RVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#1`Ok$OO~P#1`OP$ZOk$OOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO(RVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#4QOX$bO!e$QO#l$QO#m$QO#n$aO#o$QO~P#4QOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO(RVO^#fi!V#fi#s#fi#u#fi#v#fi'k#fi(a#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(h#fi~P#7RO(h#zO~P#7ROP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO(RVO(h#zO^#fi!V#fi#u#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(i#fi~P#9sO(i#{O~P#9sOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO(RVO(h#zO(i#{O~O^#fi!V#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#<eOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX!VYX!WYX~O#yYX~P#?OOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO#v<kO(RVO(a$XO(h#zO(i#{O~O#y.lO~P#A]OP(WXX(WXk(WXy(WXz(WX|(WX!e(WX!f(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!V(WX~O#X<pO#{<pO#o(WX#y(WX!W(WX~P#CZO^'Ya!V'Ya'k'Ya'i'Ya!g'Ya!S'Yao'Ya!X'Ya%a'Ya!a'Ya~P!4aOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(R#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#*rO^#zi!V#zi'k#zi'i#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!4aO$W.qO$Y.qO~O$W.rO$Y.rO~O!a)^O#X.sO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.tO~O!X)aO$T.vO$W)`O$Y)`O$a.wO~O!V<lO!W(VX~P#A]O!W.xO~O!a)^O$a(jX~O$a.zO~Oq)pO(S)qO(T.}O~Ol/QO!S/RO'vTO'yUO~O!VcX!acX!gcX!g$sX(acX~P!-WO!g/XO~P#*rO!V/YO!a#sO(a'fO!g(nX~O!g/_O~O!U*RO't%fO!g(nP~O#d/aO~O!S$sX!V$sX!a$zX~P!-WO!V/bO!S(oX~P#*rO!a/dO~O!S/fO~Ok/jO!a#sO!h%[O'}%PO(a'fO~O't/lO~O!a+QO~O^%_O!V/pO'k%_O~O!W/rO~P!1UO!]/sO!^/sO'u!iO(U!jO~O|/uO(U!jO~O#T/vO~O't%}Od'_X!V'_X~O!V*kOd(Oa~Od/{O~Oy/|Oz/|O|/}Ogva(hva(iva!Vva#Xva~Odva#yva~P$ tOy)uO|)vOg$la(h$la(i$la!V$la#X$la~Od$la#y$la~P$!jOy)uO|)vOg$na(h$na(i$na!V$na#X$na~Od$na#y$na~P$#]O#d0PO~Od$|a!V$|a#X$|a#y$|a~P!.aO#d0SO~Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(a!ni(h!ni(i!ni~O^!ni'k!ni'i!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$jOg.XO!X'RO%a.WO~Oi0ZO't0YO~P!/RO!a+QO^'|a!X'|a'k'|a!V'|a~O#d0aO~OXYX!VcX!WcX~O!V0bO!W(vX~O!W0dO~OX0eO~O't+YO'vTO'yUO~O!X%oO't%fO]'gX!V'gX~O!V+_O](ua~O!g0jO~P!4aOX0mO~O]0nO~O!V+kO^(ra'k(ra~O#X0tO~Og0wO!X$zO~O(U(sO!W(sP~Og1QO!X0}O%a1PO'}%PO~OX1[O!V1YO!W(tX~O!W1]O~O]1_O^%_O'k%_O~O't#kO'vTO'yUO~O#X$cO#o1bO#{$cO&R1cO^(WX~P#CZO#X$cO#o1bO&R1cO~O^1dO~P%QO^1fO~O&[1jOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%h&Yi%j&Yi%m&Yi%n&Yi%p&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'i&Yi't&Yi'v&Yi'y&Yi(R&Yi(`&Yi(m&Yi!W&Yi_&Yi&a&Yi~O_1pO!W1nO&a1oO~P`O!XXO!h1rO~O&h,hOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%h&ci%j&ci%m&ci%n&ci%p&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'i&ci't&ci'v&ci'y&ci(R&ci(`&ci(m&ci!W&ci&[&ci_&ci&a&ci~O!S1xO~O!V!Za!W!Za~P#A]Ol!kO|!lO!U2OO(U!jO!V'OX!W'OX~P?fO!V,xO!W(Ya~O!V'UX!W'UX~P!?TO!V,{O!W(ga~O!W2VO~P'TO^%_O#X2`O'k%_O~O^%_O!a#sO#X2`O'k%_O~O^%_O!a#sO!h%[O!l2dO#X2`O'k%_O'}%PO(a'fO~O!]2eO!^2eO'u!iO~PBzO![2hO!]2eO!^2eO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#Q2jO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#O2kO#P2kO#Q2jO#T2iO#U2iO'u!iO~PBzO^%_O!a#sO!l2dO#X2`O'k%_O(a'fO~O^%_O'k%_O~P!4aO!V$_Oo$ka~O!S&}i!V&}i~P!4aO!V'zO!S(Xi~O!V(RO!S(ei~O!S(fi!V(fi~P!4aO!V(_O!g(bi~O!V(ci!g(ci^(ci'k(ci~P!4aO#X2oO!V(ci!g(ci^(ci'k(ci~O|%wO!X%xO!x]O#b2rO#c2qO't%fO~O|%wO!X%xO#c2qO't%fO~Og2yO!X'RO%a2xO~Og2yO!X'RO%a2xO'}%PO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'kva(Rva(ava!gva!Sva'ivaova!Xva%ava!ava~P$ tO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'k$la(R$la(a$la!g$la!S$la'i$lao$la!X$la%a$la!a$la~P$!jO#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'k$na(R$na(a$na!g$na!S$na'i$nao$na!X$na%a$na!a$na~P$#]O#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'k$|a(R$|a(a$|a!g$|a!S$|a'i$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#*rO^#[q!V#[q'k#[q'i#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!4aOd'PX!V'PX~P!%lO!V.bOd([a~O!U3RO!V'QX!g'QX~P%QO!V.eO!g(]a~O!V.eO!g(]a~P!4aO!S3UO~O#y!ja!W!ja~PJrO#y!ba!V!ba!W!ba~P#A]O#y!na!W!na~P!6zO#y!pa!W!pa~P!9eO!X3hO$UfO$_3iO~O!W3mO~Oo3nO~P#*rO^$hq!V$hq'k$hq'i$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!4aO!S3oO~Ol/QO'vTO'yUO~Oy)uO|)vO(i)zOg%Xi(h%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JzOy)uO|)vOg%Zi(h%Zi(i%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$KmO(a$XO~P#*rO!U3rO't%fO!V'ZX!g'ZX~O!V/YO!g(na~O!V/YO!a#sO!g(na~O!V/YO!a#sO(a'fO!g(na~Od$ui!V$ui#X$ui#y$ui~P!.aO!U3zO't*WO!S']X!V']X~P!/OO!V/bO!S(oa~O!V/bO!S(oa~P#*rO!a#sO~O!a#sO#o4SO~Ok4VO!a#sO(a'fO~Od(Pi!V(Pi~P!.aO#X4YOd(Pi!V(Pi~P!.aO!g4]O~O^$iq!V$iq'k$iq'i$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!4aO!V4aO!X(pX~P#*rO!f#uO~P3}O^$sX!X$sX%UYX'k$sX!V$sX~P!-WO%U4cO^hXghXyhX|hX!XhX'khX(hhX(ihX!VhX~O%U4cO~O%b4jO't+YO'vTO'yUO!V'fX!W'fX~O!V0bO!W(va~OX4nO~O]4oO~O!S4sO~O^%_O'k%_O~P#*rO!X$zO~P#*rO!V4xO#X4zO!W(sX~O!W4{O~Ol!kO|4}O![5]O!]5RO!^5RO!x<XO!|5[O!}5ZO#O5YO#P5YO#Q5XO#T5WO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O!W5VO~P%%qOg5bO!X0}O%a5aO~Og5bO!X0}O%a5aO'}%PO~O't#kO!V'eX!W'eX~O!V1YO!W(ta~O'vTO'yUO(U5kO~O]5oO~O!g5rO~P%QO^5tO~O^5tO~P%QO#o5vO&R5wO~PMvO_1pO!W5{O&a1oO~P`O!a5}O~O!a6PO!V(Zi!W(Zi!a(Zi!h(Zi'}(Zi~O!V#ai!W#ai~P#A]O#X6QO!V#ai!W#ai~O!V!Zi!W!Zi~P#A]O^%_O#X6ZO'k%_O~O^%_O!a#sO#X6ZO'k%_O~O^%_O!a#sO!l6`O#X6ZO'k%_O(a'fO~O!h%[O'}%PO~P%+RO!]6aO!^6aO'u!iO~PBzO![6dO!]6aO!^6aO#T6eO#U6eO'u!iO~PBzO![6dO!]6aO!^6aO#Q6fO#T6eO#U6eO'u!iO~PBzO!V(_O!g(bq~O!V(cq!g(cq^(cq'k(cq~P!4aO|%wO!X%xO#c6jO't%fO~O!X'RO%a6mO~Og6pO!X'RO%a6mO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'k%Xi(R%Xi(a%Xi!g%Xi!S%Xi'i%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JzO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'k%Zi(R%Zi(a%Zi!g%Zi!S%Zi'i%Zio%Zi!X%Zi%a%Zi!a%Zi~P$KmO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'k$ui(R$ui(a$ui!g$ui!S$ui'i$ui#X$uio$ui!X$ui%a$ui!a$ui~P#*rOd'Pa!V'Pa~P!.aO!V'Qa!g'Qa~P!4aO!V.eO!g(]i~O#y#[i!V#[i!W#[i~P#A]OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~O#g#fi~P%6OO#g<aO~P%6OOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO(RVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~Ok#fi~P%8ZOk<cO~P%8ZOP$ZOk<cOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO(RVO#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%:fOX<oO!e<eO#l<eO#m<eO#n<nO#o<eO~P%:fOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO(RVO#s#fi#u#fi#v#fi#y#fi(a#fi(i#fi!V#fi!W#fi~O(h#fi~P%=QO(h#zO~P%=QOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO(RVO(h#zO#u#fi#v#fi#y#fi(a#fi!V#fi!W#fi~O(i#fi~P%?]O(i#{O~P%?]OP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO(RVO(h#zO(i#{O~O#v#fi#y#fi(a#fi!V#fi!W#fi~P%AhO^#wy!V#wy'k#wy'i#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!4aOg>SOy)uO|)vO(h)xO(i)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(R#fi(a#fi!V#fi!W#fi~P%D`O!f#uOP(QXX(QXg(QXk(QXy(QXz(QX|(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX#y(QX(R(QX(a(QX(h(QX(i(QX!V(QX!W(QX~O#y#zi!V#zi!W#zi~P#A]O#y!ni!W!ni~P$$jO!W6|O~O!V'Ya!W'Ya~P#A]O!a#sO(a'fO!V'Za!g'Za~O!V/YO!g(ni~O!V/YO!a#sO!g(ni~Od$uq!V$uq#X$uq#y$uq~P!.aO!S']a!V']a~P#*rO!a7TO~O!V/bO!S(oi~P#*rO!V/bO!S(oi~O!S7XO~O!a#sO#o7^O~Ok7_O!a#sO(a'fO~O!S7aO~Od$wq!V$wq#X$wq#y$wq~P!.aO^$iy!V$iy'k$iy'i$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!4aO!V4aO!X(pa~O^#[y!V#[y'k#[y'i#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!4aOX7fO~O!V0bO!W(vi~O]7lO~O!a6PO~O(U(sO!V'bX!W'bX~O!V4xO!W(sa~O!h%[O'}%PO^(ZX!a(ZX!l(ZX#X(ZX'k(ZX(a(ZX~O't7uO~P._O!x<XO!|7yO!}7xO#O7wO#P7wO#Q7vO#T'dO#U'dO~PBzO^%_O!a#sO!l'jO#X'hO'k%_O(a'fO~O!W7}O~P%%qOl!kO'vTO'yUO(U!jO(`!nO~O|8OO~P&!mO![8SO!]8RO!^8RO#Q7vO#T'dO#U'dO'u!iO~PBzO![8SO!]8RO!^8RO#O8TO#P8TO#Q7vO#T'dO#U'dO'u!iO~PBzO!]8RO!^8RO'u!iO(U!jO(`!nO~O!X0}O~O!X0}O%a8VO~Og8YO!X0}O%a8VO~OX8_O!V'ea!W'ea~O!V1YO!W(ti~O!g8cO~O!g8dO~O!g8eO~O!g8eO~P%QO^8gO~O!a8jO~O!g8kO~O!V(fi!W(fi~P#A]O^%_O#X8sO'k%_O~O^%_O!a#sO#X8sO'k%_O~O^%_O!a#sO!l8wO#X8sO'k%_O(a'fO~O!h%[O'}%PO~P&'ZO!]8xO!^8xO'u!iO~PBzO![8{O!]8xO!^8xO#T8|O#U8|O'u!iO~PBzO!V(_O!g(by~O!V(cy!g(cy^(cy'k(cy~P!4aO!X'RO%a9PO~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'k$uq(R$uq(a$uq!g$uq!S$uq'i$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#*rO#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'k$wq(R$wq(a$wq!g$wq!S$wq'i$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#*rO!V'Qi!g'Qi~P!4aO#y#[q!V#[q!W#[q~P#A]Oy/|Oz/|O|/}OPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Rva(ava(hva(iva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(R$la(a$la(h$la(i$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(R$na(a$na(h$na(i$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(R$|a(a$|a!V$|a!W$|a~P%D`O#y$hq!V$hq!W$hq~P#A]O#y$iq!V$iq!W$iq~P#A]O!W9ZO~O#y9[O~P!.aO!a#sO!V'Zi!g'Zi~O!a#sO(a'fO!V'Zi!g'Zi~O!V/YO!g(nq~O!S']i!V']i~P#*rO!V/bO!S(oq~O!S9bO~P#*rO!S9bO~Od(Py!V(Py~P!.aO!V'`a!X'`a~P#*rO^%Tq!X%Tq'k%Tq!V%Tq~P#*rOX9gO~O!V0bO!W(vq~O#X9kO!V'ba!W'ba~O!V4xO!W(si~P#A]O^%_O!a+QO'k%_O~OPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!a%RX#o%RX~P&:hO#T-eO#U-eO~PBzO#Q9pO#T-eO#U-eO~PBzO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!}9rO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!]9uO!^9uO'u!iO(U!jO(`!nO~O![9xO!]9uO!^9uO#Q9pO#T-eO#U-eO'u!iO~PBzO!X0}O%a9{O~O'vTO'yUO(U:QO~O!V1YO!W(tq~O!g:TO~O!g:TO~P%QO!g:VO~O!g:WO~O#X:YO!V#ay!W#ay~O!V#ay!W#ay~P#A]O^%_O#X:^O'k%_O~O^%_O!a#sO#X:^O'k%_O~O^%_O!a#sO!l:bO#X:^O'k%_O(a'fO~O!h%[O'}%PO~P&AZO!]:cO!^:cO'u!iO~PBzO!X'RO%a:gO~O#y#wy!V#wy!W#wy~P#A]OP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(R$ui(a$ui!V$ui!W$ui~P%D`Oy)uO|)vO(i)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(R%Xi(a%Xi(h%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(R%Zi(a%Zi(h%Zi(i%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#A]O#y#[y!V#[y!W#[y~P#A]O!a#sO!V'Zq!g'Zq~O!V/YO!g(ny~O!S']q!V']q~P#*rO!S:nO~P#*rO!V0bO!W(vy~O!V4xO!W(sq~O#T2iO#U2iO~PBzO#Q:uO#T2iO#U2iO~PBzO#O:vO#P:vO#Q:uO#T2iO#U2iO~PBzO!]:zO!^:zO'u!iO(U!jO(`!nO~O!X0}O%a:}O~O!g;QO~O^%_O#X;VO'k%_O~O^%_O!a#sO#X;VO'k%_O~O^%_O!a#sO!l;ZO#X;VO'k%_O(a'fO~O!X'RO%a;^O~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(R$uq(a$uq!V$uq!W$uq~P%D`OP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(R$wq(a$wq!V$wq!W$wq~P%D`Od%]!Z!V%]!Z#X%]!Z#y%]!Z~P!.aO!V'bq!W'bq~P#A]O#T6eO#U6eO~PBzO#Q;bO#T6eO#U6eO~PBzO!V#a!Z!W#a!Z~P#A]O^%_O#X;mO'k%_O~O^%_O!a#sO#X;mO'k%_O~O#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'k%]!Z(R%]!Z(a%]!Z!g%]!Z!S%]!Z'i%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#*rO#T8|O#U8|O~PBzO^%_O#X;zO'k%_O~OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(R%]!Z(a%]!Z!V%]!Z!W%]!Z~P%D`Oo(VX~P1gO'u!iO~P!'xO!ScX!VcX#XcX~P&:hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!acX!gYX!gcX(acX~P')iOP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!XXO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~O!V<lO!W$ka~Oi%QOk$rOl$qOm$qOs%ROu%SOw<rO|$yO!X$zO!c=|O!h$vO#c<xO$Q%WO$m<tO$o<vO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#p)[O~P'._O!WYX!WcX~P')iO#d<`O~O!a#sO#d<`O~O#X<pO~O#o<eO~O#X<zO!V(fX!W(fX~O#X<pO!V(dX!W(dX~O#d<{O~Od<}O~P!.aO#d=SO~O#d=TO~O!a#sO#d=UO~O!a#sO#d<{O~O#y=VO~P#A]O#d=WO~O#d=XO~O#d=YO~O#d=ZO~O#d=[O~O#d=]O~O#y=^O~P!.aO#y=_O~P!.aO$U~!f!|!}#P#Q#T#b#c#n(m$m$o$r%U%`%a%b%h%j%m%n%p%r~'oR$U(m#h!R'm'u#il#g#jky'n(U'n't$W$Y$W~",goto:"$2w(zPPPP({P)OP)`P+j/pPPPP7RPP7hP=gAYPAmPAmPPPAmPC]PAmPAmPAmPCaPPCfPDPPH}PPPIRPPPPIRLUPPPL[NiPIRP!#SPPPP!%fIRPPPIRPIRP!'xIRP!+`!,b!,gP!-X!-]!-XPPPPP!0j!3SPP!3]!4kP!,bIRIR!8S!;`!@l!@l!DePPP!DlIRPPPPPPPPPPP!G{P!IbPPIR!JsPIRPIRIRIRIRPIR!LZPP# eP#$kP#$o#$y#$}#$}P# bP#%R#%RP#(XP#(]IRIR#(c#+hAmPAmPAmAmP#,rAmAm#.lAm#0yAm#2mAmAm#3Z#5V#5V#5Z#5c#5V#5kP#5VPAm#6gAm#7oAmAm7RPPP#8zPP#9d#9dP#9dP#9y#9dPP#:PP#9vP#9v#:c!3X#9v#:}#;T7O)O#;W)OP#;_#;_#;_P)OP)OP)OP)OPP)OP#;e#;hP#;h)OP#;lP#;oP)OP)OP)OP)OP)OP)O)OPP#;u#;{#<V#<]#<c#<i#<o#<}#=T#=Z#=e#=k#>g#>v#>|#?`#?f#?l#?z#@a#Aq#BP#BV#B]#Bc#Bi#Bs#By#CP#CZ#Cm#CsPPPPPPPPPP#CyPPPPPPP#Dm#I^P#J}#KU#K^PPPP$ h$$^$+P$+S$+V$-g$-j$-m$-tPP$-z$.O$.w$/w$/{$0aPP$0e$0k$0oP$0r$0v$0y$1o$2V$2[$2_$2b$2h$2k$2o$2sR!zRmpOXr!X#b%^&e&g&h&j,`,e1j1mU!pQ'R-QQ%dtQ%lwQ%szQ&]!TS&y!c,xQ'X!f^'^!m!r!s!t!u!v!wS*^$z*cQ+W%mQ+e%uQ,P&VQ-O'QQ-Y'YY-b'_'`'a'b'cQ/s*eQ1X,QW2e-d-f-g-hS5R0}5UU6a2h2j2kU8R5Y5Z5]S8x6d6fS9u8S8TQ:c8{Q:z9xR<y<[%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;zS#n]<X!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ*n%TQ+]%oQ,R&YQ,Y&bQ.[<qQ0W+OQ0[+QQ0g+^Q1a,WQ2u.XQ4i0bQ5i1YQ6o2yQ6u<rQ7h4jR9S6p'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#n!kQ!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h0}2e2h2i2j2k5O5U5W5X5Y5Z5[6a6d6e6f7v7w7x7y8T8x8{8|9p9q9r:c:u:v;b$Y$qi#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ%vzQ&w!cS&}%x,{Q+]%oS/Q)v/SQ0O*rQ0g+^Q0l+dQ1`,VQ1a,WQ4i0bQ4r0nQ5l1[Q5m1_Q7h4jQ7k4oQ8b5oQ9j7lR:R8_pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR,T&^&z`OPXYrstux!X!^!g!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v'T'h'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=w=x[#ZWZ#U#X&z'xQ%gvQ%kwS%pz%u!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ&R!RQ'U!eQ'W!fQ(f#pS*Q$v*US+V%l%mQ+Z%oQ+z&TQ,O&VS-X'X'YQ.Z(gQ/^*RQ0`+WQ0f+^Q0h+_Q0k+cQ1S+{S1W,P,QQ2[-YQ3q/YQ4h0bQ4l0eQ4q0mQ5h1XQ7Q3rQ7g4jQ7j4nQ9f7fR:p9gv$xi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!d%iw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YQ+P%gQ+p&OQ+s&PQ+}&VQ.Y(fQ1R+zU1V,O,P,QQ2z.ZQ5c1SS5g1W1XS7t4|5QQ8^5hU9s7z8P8QU:x9t9v9wQ;e:yQ;u;f!z=y#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg=z<n<o<t<v<x=P=R=T=X=Z=_W$}i%P*k=uS&O!O&[Q&P!PQ&Q!QR+n%|$Z$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>ST)q$s)rV*o%T<q<rU&}!c%x,{S(t#w#xQ+b%rS.S(b(cQ0x+tQ4Z/|R7p4x'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x$q$^c#W#c%b%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.m.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lT#RV#S'RkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ&{!cR2P,x#f!kQ!c!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h2e2h2i2j2k5O5W5X5[6a6d6e6f7v7w7x7y8x8{8|9p9q9r:c:u:v;bS*]$z*cS/k*^*eQ/t*fQ0z+vQ4U/sQ4X/vS4|0}5US7z5R5]S8P5Y5ZS9t8R8SQ9v8TS:y9u9xR;f:zlpOXr!X#b%^&e&g&h&j,`,e1j1mQ&l![Q'l!tS(h#r<`Q+T%jQ+x&RQ+y&SQ-V'VQ-j'eS.`(m<{S0R*v=UQ0^+UQ0|+wQ1q,gQ1s,hQ1{,sQ2Y-WQ2]-[S4`0S=[Q4d0_S4g0a=]Q6R1}Q6V2ZQ6[2bQ7e4eQ8n6TQ8o6WQ8r6]Q:X8kQ:]8tQ;U:_Q;l;WR;y;n$l$]c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(e#m'[U*h${(l3eS*z%b.mQ2v0WQ6l2uQ9R6oR:h9S$l$[c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(d#m'[S(v#x$]S*y%b.mS.T(c(eQ.p)WQ0T*zR2s.U'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS#n]<XQ&g!VQ&h!WQ&j!YQ&k!ZR1i,cQ'S!eQ*|%gQ-T'US.V(f+PQ2W-SW2w.Y.Z0V0XQ6U2XU6k2t2v2zS9O6l6nS:f9Q9RS;[:e:hQ;p;]R;{;qV!qQ'R-Q!_^OQXZ_r!T!X!m#b#e%[%^&[&^&e&g&h&j'R(_,`,e-Q-}0}1j1m5O5UT#n]<X%^yOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS(t#w#xS.S(b(c!s=c$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xU!oQ'R-Q[']!m!s!t!u!v!wS'k!p!rY'm!x5O5W5X5[S-a'^'_W-c'`'a'b'cY-i'd7v7w7x7yS2c-b-dW2f-e9p9q9rU2g-f-g-hS5Q0}5US6_2e2hU6b2i:u:vS6c2j2kS7z5R5]S8Q5Y5ZS8v6a6dS8y6e;bQ8z6fS9t8R8SQ9w8TS:a8x8{Q:d8|S:y9u9xQ;Y:cR;f:zU!qQ'R-QT5S0}5UU'j!o5P5QS(^#f1gU-`']'m8QQ/]*QQ/i*]U2d-c-i9wQ3v/^S4P/j/tS6`2f2gQ7P3qS7[4V4XS8w6b6cQ9^7QQ9e7_S:b8y8zR;Z:dQ#tbU'i!o5P5QS(]#f1gQ*w%]Q+R%hQ+X%nW-_']'j'm8QQ-|(^Q/[*QQ/h*]Q/n*`Q0]+SQ1T+|W2a-`-c-i9wS3u/]/^S4O/i/tQ4R/mQ4T/oQ5e1UU6^2d2f2gQ7O3qQ7S3vS7W4P4XQ7]4WQ8[5fU8u6`6b6cS9]7P7QQ9a7XQ9c7[Q9n7sQ:O8]U:`8w8y8zQ:l9^Q:m9bQ:o9eQ:t9oQ;P:PS;X:b:dQ;`:nQ;c:wQ;o;ZQ;s;dQ<O;tQ<T<PQ=f=aQ=q=jR=r=k%^aOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS#tx!g!r=`$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=f=w%^bOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zQ%]j!d%hw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YS%nx!gQ+S%iQ+|&VW1U+},O,P,QU5f1V1W1XS7s4|5QS8]5g5hW9o7t7z8P8QQ:P8^W:w9s9t9v9wS;d:x:yS;t;e;fQ<P;u!r=a$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ=j=vR=k=w%QeOPXYrstu!X!^!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zY#`WZ#U#X'x!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ,Z&b!p=b$Y$k)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=e&zS'O!c%xR2R,{%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;z!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ,Y&bQ0W+OQ2u.XQ6o2yR9S6p!n$Sc#W%b'w'}(i(p)P)Q)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!T<g)U)g,v.m1y1|3V3_3`3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!j$Uc#W%b'w'}(i(p)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!P<i)U)g,v.m1y1|3V3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!f$Yc#W%b'w'}(i(p)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<YQ3p/Wz=x)U)g,v.m1y1|3V3f3l6S6t6y6z7r8m9T9X9Y:r;R=lQ=}>PR>O>Q'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS$lh$mR3i.s'XgOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$hf$nQ$ffS)`$i)dR)l$nT$gf$nT)b$i)d'XhOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$lh$mQ$ohR)k$m%^jOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;z!s=v$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#alOPXZr!X!^!l#Q#b#l#y$k%^&^&a&b&e&g&h&j&n&v'T(u)i+O+j,[,`,e-U.X.t/}1Q1b1c1d1f1j1m1o2y3h4}5b5t5v5w6p8O8Y8gv${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>SQ*s%XQ/P)ug3e<n<o<t<v<x=P=R=T=X=Z=_v$wi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>OQ*V$xS*`$z*cQ*t%YQ/o*a!z=h#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sf=i<n<o<t<v<x=P=R=T=X=Z=_Q=m=yQ=n=zQ=o={R=p=|v${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg3e<n<o<t<v<x=P=R=T=X=Z=_lnOXr!X#b%^&e&g&h&j,`,e1j1mQ*Y$yQ,n&qQ,o&sR3y/b$Y$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ+q&PQ0v+sQ4v0uR7o4wT*b$z*cS*b$z*cT5T0}5US/m*_4}T4W/u8OQ+R%hQ/n*`Q0]+SQ1T+|Q5e1UQ8[5fQ9n7sQ:O8]Q:t9oQ;P:PQ;c:wQ;s;dQ<O;tR<T<Pn)y$t(n*u/`/w/x3O3w4^6}7`:k=g=s=t!W=O(j)Z*P*X._.{/W/e0U0s0u2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q]=P3d6x9U:i:j;|p){$t(n*u/U/`/w/x3O3w4^6}7`:k=g=s=t!Y=Q(j)Z*P*X._.{/W/e0U0s0u2{2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q_=R3d6x9U9V:i:j;|pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ&X!SR,[&bpmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR&X!SQ+u&QR0r+nqmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ1O+zS5`1R1SU8U5^5_5cS9z8W8XS:{9y9|Q;g:|R;v;hQ&`!TR,U&[R5l1[S%pz%uR0h+_Q&e!UR,`&fR,f&kT1k,e1mR,j&lQ,i&lR1t,jQ'o!yR-l'oQrOQ#bXT%ar#bQ!|TR'q!|Q#PUR's#PQ)r$sR.|)rQ#SVR'u#SQ#VWU'{#V'|-sQ'|#WR-s'}Q,y&{R2Q,yQ.c(nR3P.cQ.f(pS3S.f3TR3T.gQ-Q'RR2U-Qr_OXr!T!X#b%^&[&^&e&g&h&j,`,e1j1mU!mQ'R-QS#eZ%[Y#o_!m#e-}5OQ-}(_T5O0}5US#]W%wU(S#](T-tQ(T#^R-t(OQ,|'OR2S,|Q(`#hQ-w(XW.R(`-w2l6gQ2l-xR6g2mQ)d$iR.u)dQ$mhR)j$mQ$`cU)Y$`-o<mQ-o<YR<m)gQ/Z*QW3s/Z3t7R9_U3t/[/]/^S7R3u3vR9_7S#m)w$t(j(n)Z*P*X*p*q*u.].^._.{/U/V/W/`/e/w/x0U0s0u2{2|2}3O3d3w3x3|4^4u4w6q6r6v6w6x6}7U7Y7`7b7d9U9V9W9`9d:i:j:k;_;|=g=s=t>P>QQ/c*XU3{/c3}7VQ3}/eR7V3|Q*c$zR/q*cQ*l%OR/z*lQ4b0UR7c4bQ+l%zR0q+lQ4y0xS7q4y9lR9l7rQ+w&RR0{+wQ5U0}R7|5UQ1Z,RS5j1Z8`R8`5lQ0c+ZW4k0c4m7i9hQ4m0fQ7i4lR9h7jQ+`%pR0i+`Q1m,eR5z1mWqOXr#bQ&i!XQ*x%^Q,_&eQ,a&gQ,b&hQ,d&jQ1h,`S1k,e1mR5y1jQ%`oQ&m!]Q&p!_Q&r!`Q&t!aU'g!o5P5QQ+T%jQ+g%vQ+m%{Q,T&`Q,l&oY-]']'i'j'm8QQ-j'eQ/p*bQ0^+US1^,U,XQ1u,kQ1v,nQ1w,oQ2]-[[2_-_-`-c-i-k9wQ4d0_Q4p0lQ4t0sQ5d1TQ5n1`Q5x1iY6X2^2a2d2f2gQ6[2bQ7e4eQ7m4rQ7n4uQ7{5TQ8Z5eQ8a5mY8p6Y6^6`6b6cQ8r6]Q9i7kQ9m7sQ9}8[Q:S8bY:Z8q8u8w8y8zQ:]8tQ:q9jS:s9n9oQ;O:OW;S:[:`:b:dQ;U:_S;a:t:wQ;i;PU;j;T;X;ZQ;l;WS;r;c;dS;w;k;oQ;y;nS;};s;tQ<Q;xS<S<O<PQ<U<RR<V<TQ%jwQ'V!fQ'e!oU+U%k%l%mQ,s&xU-W'W'X'YS-[']'kQ/g*]S0_+V+WQ1},uS2Z-X-YS2b-a-cQ4Q/kQ4e0`Q6T2TQ6W2[S6]2c2gQ7Z4US8t6_6cS:_8v8zQ;W:aR;n;YS$ui=uR*m%PU%Oi%P=uR/y*kQ$tiS(j#s+QQ(n#uS)Z$a$bQ*P$vQ*X$yQ*p%UQ*q%VQ*u%ZQ.]<sQ.^<uQ._<wQ.{)pQ/U)yQ/V){Q/W)|Q/`*TQ/e*ZQ/w*iQ/x*jh0U*}.W1P2x5a6m8V9P9{:g:};^Q0s+oQ0u+rQ2{=OQ2|=QQ2}=SQ3O.bS3d<n<oQ3w/aQ3x/bQ3|/dQ4^0PQ4u0tQ4w0wQ6q=WQ6r=YQ6v<tQ6w<vQ6x<xQ6}3pQ7U3zQ7Y4SQ7`4YQ7b4aQ7d4cQ9U=TQ9V=PQ9W=RQ9`7TQ9d7^Q:i=XQ:j=ZQ:k9[Q;_=^Q;|=_Q=g=uQ=s=}Q=t>OQ>P>RR>Q>SloOXr!X#b%^&e&g&h&j,`,e1j1mQ!dPS#dZ#lQ&o!^U'Z!l4}8OQ't#QQ(w#yQ)h$kS,X&^&aQ,]&bQ,k&nQ,p&vQ-S'TQ.i(uQ.y)iQ0X+OQ0o+jQ1e,[Q2X-UQ2v.XQ3k.tQ4[/}Q5_1QQ5p1bQ5q1cQ5s1dQ5u1fQ5|1oQ6l2yQ6{3hQ8X5bQ8f5tQ8h5vQ8i5wQ9R6pQ9|8YR:U8g#UcOPXZr!X!^!l#b#l#y%^&^&a&b&e&g&h&j&n&v'T(u+O+j,[,`,e-U.X/}1Q1b1c1d1f1j1m1o2y4}5b5t5v5w6p8O8Y8gQ#WWQ#cYQ%bsQ%ctQ%euS'w#U'zQ'}#XQ(i#rQ(p#vQ(x#|Q(y#}Q(z$OQ({$PQ(|$QQ(}$RQ)O$SQ)P$TQ)Q$UQ)R$VQ)S$WQ)U$YQ)X$_Q)]$cW)g$k)i.t3hQ*{%dQ+a%qS,v&z2OQ-k'hS-p'x-rQ-u(QQ-z([Q.a(mQ.g(qQ.k<WQ.m<ZQ.n<[Q.o<]Q/O)tQ0Q*vQ1y,qQ1|,tQ2^-^Q2n-{Q3Q.eQ3V<`Q3W<aQ3X<bQ3Y<cQ3Z<dQ3[<eQ3]<fQ3^<gQ3_<hQ3`<iQ3a<jQ3b<kQ3c.lQ3f<pQ3g<yQ3l<lQ4_0SQ4f0aQ6S<zQ6Y2`Q6h2oQ6s3RQ6t<{Q6y<}Q6z=UQ7r4zQ8m6QQ8q6ZQ9T=VQ9X=[Q9Y=]Q:[8sQ:r9kQ;R:YQ;T:^Q;k;VQ;x;mQ<R;zQ<Y#QR=l=xR#YWR&|!cU!oQ'R-QS&x!c,x[']!m!s!t!u!v!wS'k!p!r^'m!x5O5W5X5Y5Z5[S,u&y'QS-a'^'_W-c'`'a'b'c[-i'd7v7w7x7y8TQ2T-OS2c-b-dW2f-e9p9q9rU2g-f-g-hS5P0}5US6_2e2hU6b2i:u:vS6c2j2kS8v6a6dS8y6e;bQ8z6fS:a8x8{Q:d8|R;Y:cR(o#uR(r#vQ!dQT-P'R-QQ#m]R'[<XT#iZ%[S#hZ%[U%z|},^U(X#e#g#jS-x(Y(ZQ.P(_Q0p+kQ2m-yU2p-}.O.QS6i2q2rR8}6j`#[W#U#X%w'x(R+h-vt#fZ|}#e#g#j%[(Y(Z(_+k-y-}.O.Q2q2r6jQ1g,^Q1z,rQ6O1rQ8l6PT=d&z+iT#_W%wS#^W%wS'y#U(RS(O#X+hS,w&z+iT-q'x-vT'P!c%xQ$ifR)n$nT)c$i)dR3j.sT*S$v*UR*[$yQ0V*}Q2t.WQ5^1PQ6n2xQ8W5aQ9Q6mQ9y8VQ:e9PQ:|9{Q;]:gQ;h:}R;q;^lpOXr!X#b%^&e&g&h&j,`,e1j1mQ&_!TR,T&[V%{|},^R0y+tR,S&YQ%tzR+f%uR+[%oT&c!U&fT&d!U&fT1l,e1m",nodeNames:"⚠ ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:363,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,199,203,206,207,209,212,215,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,269],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'wp'z!b'm(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'x#S$d&j'n(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'wp'z!b'n(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'v$(n$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(`!L^'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'wp'z!b(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'wp'z!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'wp'z!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(i%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'y$)`$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'wpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'wp'z!b'u#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'wp'z!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'wp'z!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'wp'z!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'wp'z!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'z!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'z!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'z!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'z!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'z!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'z!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'wp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'wp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'wp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'wp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'wpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'wpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'wp'z!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'wp'z!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'wp'z!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'wp'z!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'wp'z!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'wp'z!b'o(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'wp'z!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'z!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'z!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'wpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'wpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'wp'z!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'}!*v!e'.r'wp'z!b$U)d(mSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(a$Ip$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'wp'z!b(R&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'wp'z!b(U!LY't&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'wp'z!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(h%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'wp'z!b'm(;d(U!LY't&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'wp'z!b'n(;d(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(T~~",141,326),new LocalTokenGroup("j~RQYZXz{^~^O'q~~aP!P!Qd~iO'r~~",25,308)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:13525,ts:13527},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:312,get:e=>spec_identifier[e]||-1},{term:328,get:e=>spec_word[e]||-1},{term:67,get:e=>spec_LessThan[e]||-1}],tokenPrec:13551}),snippets=[snippetCompletion("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(e,t){e.matchContext(functionContext)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function getScope(e,t){let n=cache.get(t);if(n)return n;let r=[],i=!0;function o(t,n){let i=e.sliceString(t.from,t.to);r.push({label:i,type:n})}return t.cursor(IterMode.IncludeAnonymous).iterate((t=>{if(i)i=!1;else if(t.name){let e=gatherCompletions[t.name];if(e&&e(t,o)||ScopeNodes.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of getScope(e,t.node))r.push(n);return!1}})),cache.set(t,r),r}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(e){let t=syntaxTree(e.state).resolveInner(e.pos,-1);if(dontComplete.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&Identifier.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let i=t;i;i=i.parent)ScopeNodes.has(i.name)&&(r=r.concat(getScope(e.state.doc,i)));return{options:r,from:n?t.from:e.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:e=>/^JSX/.test(e.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add((e=>e.isTop?[jsxSublanguage]:void 0))]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add((e=>e.isTop?[jsxSublanguage]:void 0))]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((e=>({label:e,type:"keyword"})));function javascript(e={}){let t=e.jsx?e.typescript?tsxLanguage:jsxLanguage:e.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(t,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),e.jsx?autoCloseTags:[]])}function findOpenTag(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}function elementName(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of(((e,t,n,r)=>{if((android?e.composing:e.compositionStarted)||e.state.readOnly||t!=n||">"!=r&&"/"!=r||!javascriptLanguage.isActiveAt(e.state,t,-1))return!1;let{state:i}=e,o=i.changeByRange((e=>{var t,n;let o,{head:s}=e,a=syntaxTree(i).resolveInner(s,-1);if("JSXStartTag"==a.name&&(a=a.parent),">"==r&&"JSXFragmentTag"==a.name)return{range:EditorSelection.cursor(s+1),changes:{from:s,insert:"></>"}};if("/"==r&&"JSXFragmentTag"==a.name){let e=a.parent,n=null==e?void 0:e.parent;if(e.from==s-1&&"JSXEndTag"!=(null===(t=n.lastChild)||void 0===t?void 0:t.name)&&(o=elementName(i.doc,null==n?void 0:n.firstChild,s))){let e=`/${o}>`;return{range:EditorSelection.cursor(s+e.length),changes:{from:s,insert:e}}}}else if(">"==r){let e=findOpenTag(a);if(e&&"JSXEndTag"!=(null===(n=e.lastChild)||void 0===n?void 0:n.name)&&"</"!=i.sliceDoc(s,s+2)&&(o=elementName(i.doc,e,s)))return{range:EditorSelection.cursor(s+1),changes:{from:s,insert:`></${o}>`}}}return{range:e}}));return!o.changes.empty&&(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)})),BlockJavaScriptCodePanel=()=>{const e=useRobartState((e=>e.editingBlockId)),t=useRobartState((t=>t.blocks[e??""]));return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:null==t?void 0:t.javaScript,className:"h-full w-full",extensions:[javascript()],readOnly:!0})})},RightPanel=()=>{const[e,t]=reactExports.useState("simulation");return jsx(Fragment,{children:jsxs("div",{className:"flex flex-col gap-2 h-full",children:[jsx("div",{children:jsxs(Button.Group,{children:[jsx(Button,{color:"simulation"==e?"blue":"gray",onClick:()=>t("simulation"),children:"Simulation"}),jsx(Button,{color:"python"==e?"blue":"gray",onClick:()=>t("python"),children:"Python Code"}),jsx(Button,{color:"javascript"==e?"blue":"gray",onClick:()=>t("javascript"),children:"JavaScript Code"})]})}),jsxs("div",{className:"flex-grow h-full",children:["simulation"==e&&jsx(SimulationPanel,{}),"python"==e&&jsx(BlockPythonCodePanel,{}),"javascript"==e&&jsx(BlockJavaScriptCodePanel,{})]})]})})},HoverTimelineBlock=({scale:e,startTime:t,isOverlapping:n})=>{const r=useRobartState((e=>e.editingBlockId)),i=useRobartState((e=>e.blocks[r??""]));return void 0!==t&&r?jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl border border-dashed",n?"border-red-500/50 bg-red-300/50 text-red-500/50":"border-green-500/50 bg-green-300/50 text-green-500/50"),style:{width:PIXELS_PER_SECOND*e*i.duration,left:PIXELS_PER_SECOND*e*t},children:jsx(FontAwesomeIcon,n?{icon:faXmarkCircle}:{icon:faPlusCircle})}):jsx(Fragment,{})},TickMark=({tickNumber:e,subdivisionsPerSecond:t,scale:n})=>jsxs("div",{className:"absolute h-full",style:{left:`${convertSecondsToPixels(e/t,n)}px`},children:[jsx("div",{className:clsx("w-[2px] bg-black self-start",e%t==0?"h-1/4":"h-1/6")}),e%t==0?jsx("span",{children:e/t}):null]}),TimelineBlock=({item:e,scale:t})=>{const n=useRobartState((e=>e.blocks)),r=useRobartState((e=>e.removeTimelineItem)),i=useRobartState((e=>e.timelineState.groups)),o=useRobartState((e=>e.updateBlockInTimeline)),s=useRobartState((e=>e.timelineState.mode)),a=n[e.blockId],l=useDrag((({delta:[r,l]})=>{if("MOVE"!==s)return;const c=convertPixelsToSeconds(r,t),u=e.startTime+c;blockOverlaps(i[e.groupId],n,u,a,e.id)||o(e.groupId,e.id,u)})),c=e.duration;return jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl bg-purple-400 touch-none select-none","MOVE"===s?"cursor-move":"","ERASE"===s?"hover:bg-red-400":""),style:{width:PIXELS_PER_SECOND*t*c,left:PIXELS_PER_SECOND*t*e.startTime},onClick:()=>"ERASE"===s&&r(e.groupId,e.id),...l(),children:jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:a.name})})},PIXELS_PER_SECOND=100,SUBDIVISIONS_PER_SECOND=8,convertPixelsToSeconds=(e,t)=>e/(PIXELS_PER_SECOND*t),convertSecondsToPixels=(e,t)=>e*PIXELS_PER_SECOND*t,blockOverlaps=(e,t,n,r,i)=>void 0===n||n<0||Object.values(e.items).some((e=>{const t=e.startTime,o=e.startTime+e.duration,s=n,a=n+r.duration;return(void 0===i||i!==e.id)&&!(o<s||a<t)})),TimelineGroupBody=({group:e})=>{const t=useRobartState((e=>e.addBlockToTimeline)),n=useRobartState((e=>e.editingBlockId)),r=useRobartState((e=>e.blocks)),i=useRobartState((e=>e.timelineState.mode)),o=useRobartState((e=>e.timelineState.scale)),[s,a]=reactExports.useState(),l=reactExports.useRef(null),c=useGesture({onMouseOut:()=>a(void 0),onMouseMove:({event:{clientX:e}})=>{a(e)}}),u=e=>{var t,i;if(void 0!==e&&l.current){const s=null==(t=l.current.offsetParent)?void 0:t.offsetLeft,a=null==(i=l.current.parentElement)?void 0:i.scrollLeft;if(void 0===n||void 0===a)return;return(e-s+a)/(PIXELS_PER_SECOND*o)-r[n].duration/2}};return jsxs("div",{className:"relative h-16 rounded bg-blue-300",ref:l,onClick:({clientX:o})=>{if(void 0===n||"ADD"!==i)return;const s=u(o);if(void 0!==s&&!blockOverlaps(e,r,s,r[n])){var a=!1;r[n].javaScript.includes("circle")&&(a=!0),t(e.id,n,s,a)}},...c(),style:{width:`${convertSecondsToPixels(e.duration,o)}px`},children:[[...new Array(e.duration*SUBDIVISIONS_PER_SECOND)].map(((e,t)=>jsx(TickMark,{tickNumber:t,scale:o,subdivisionsPerSecond:SUBDIVISIONS_PER_SECOND},t))),Object.values(e.items).map(((e,t)=>jsx(TimelineBlock,{scale:o,item:e},t))),"ADD"===i&&jsx(HoverTimelineBlock,{scale:o,startTime:u(s),isOverlapping:blockOverlaps(e,r,u(s),r[n??""])})]})},TimelineMarker=()=>{const e=useSimulator((e=>e.time));return jsx("div",{className:"min-w-1 absolute z-10 h-full w-1 bg-black",style:{left:PIXELS_PER_SECOND*e}})},TimelineGroupLabel=({group:e})=>jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded bg-green-400",children:jsx("div",{className:"text-center font-bold",children:e.name})}),useRobotManager=create$2()(immer(((e,t)=>({selectedRobotId:void 0,showRenameInput:!1,setSelectedRobotId:t=>{e({selectedRobotId:t})},openRenameInput:()=>{e({showRenameInput:!0})},closeRenameInput:()=>{e({showRenameInput:!1})}})))),RobotGroupEditor=()=>{const e=useRobartState((e=>e.timelineState.groups)),t=useRobotManager((e=>e.selectedRobotId)),n=useRobartState((e=>e.addRobotToGroup)),r=useRobartState((e=>e.removeRobotFromGroup));return void 0===t?jsx(Fragment,{}):jsxs("div",{className:"flex flex-col gap-2",children:[jsxs("div",{className:"flex items-center gap-2",children:[jsx("h3",{className:"text-lg font-extrabold",children:"Add Group"}),jsx(Dropdown,{label:jsx(FontAwesomeIcon,{icon:faPlusCircle}),size:"sm",arrowIcon:!1,children:Object.values(e).filter((e=>!(t in e.robots))).map((e=>jsx(Dropdown.Item,{onClick:()=>{n(e.id,t)},children:e.name},e.id)))})]}),jsx("div",{className:"flex items-center gap-2",children:Object.values(e).filter((e=>t in e.robots)).map((n=>jsx(Badge,{color:"purple",className:"bg-purple-100",onClick:()=>r(n.id,t),children:e[n.id].name},n.id)))})]})},StartingPositionEditor=({robotId:e})=>{const t=useRobartState((t=>t.robots[e])),n=useRobartState((e=>e.saveRobot)),[r,i]=reactExports.useState([t.startingPosition[0].toString(),t.startingPosition[1].toString(),t.startingPosition[2].toString()]),o=t=>{t.preventDefault();const i=parseFloat(r[0]),o=parseFloat(r[1]),s=parseFloat(r[2]);isNaN(i)||isNaN(o)||isNaN(s)||n(e,{startingPosition:[i,o,s]})};return jsxs("div",{children:[jsx("h3",{className:"ml-3 mt-3 text-lg font-extrabold",children:"Starting Position:"}),jsx("div",{className:"flex",children:jsxs("form",{onSubmit:o,className:"flex flex-col gap-2",children:[jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(r[0]))?"border-red-500":""),children:[jsx(TextInput,{id:"x-coordinate",value:r[0],onChange:e=>i((([t,n,r])=>[e.target.value,n,r]))}),jsx(Label,{htmlFor:"x-coordinate",className:isNaN(parseFloat(r[0]))?"text-red-500":"",children:"x"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(r[0]))?"text-red-500":""),children:[jsx(TextInput,{id:"y-coordinate",value:r[1],onChange:e=>i((([t,n,r])=>[t,e.target.value,r]))}),jsx(Label,{htmlFor:"y-coordinate",className:isNaN(parseFloat(r[1]))?"text-red-500":"",children:"y"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(r[2]))?"border-red-500":""),children:[jsx(TextInput,{id:"z-coordinate",value:r[2],onChange:e=>i((([t,n,r])=>[t,n,e.target.value]))}),jsx(Label,{htmlFor:"z-coordinate",className:isNaN(parseFloat(r[2]))?"text-red-500":"",children:"z"})]}),jsx(IconButton,{className:"w-full",icon:faArrowsRotate,text:"Update Position",onClick:o,type:"submit"})]})})]})},RobotEditor=()=>{const e=useRobartState((e=>e.robots)),t=useRobartState((e=>e.saveRobot)),n=useRobartState((e=>e.deleteRobot)),r=useRobotManager((e=>e.selectedRobotId)),i=useRobotManager((e=>e.setSelectedRobotId));if(reactExports.useEffect((()=>{void 0===r&&0!==Object.values(e).length&&i(Object.keys(e)[0])}),[r,e]),void 0===r)return jsx(Fragment,{});const o=e[r];return void 0===o?jsx(Fragment,{}):jsxs("div",{className:"relative flex basis-4/5 flex-col p-4",children:[jsx(RenamableText,{text:o.name,className:"text-4xl font-extrabold",updateText:e=>t(r,""!==e?{name:e}:{name:"Unnamed Robot"})}),jsxs("div",{className:"flex flex-col gap-10",children:[jsx(StartingPositionEditor,{robotId:r}),jsx(RobotGroupEditor,{})]},r),jsx(IconButton,{className:"absolute bottom-0",onClick:()=>{const e=r;i(void 0),n(e)},text:"Delete Robot",icon:faTrash,color:"failure"})]})},RobotSidebar=()=>{const e=useRobartState((e=>e.robots)),t=useRobartState((e=>e.createRobot)),n=useRobotManager((e=>e.setSelectedRobotId)),r=useRobotManager((e=>e.closeRenameInput));return jsxs("div",{className:"flex flex-grow-0 basis-[10%] flex-col items-center gap-2 overflow-y-auto p-4",children:[jsx("h2",{className:"text-lg font-extrabold",children:"Robots"}),Object.values(e).map((e=>jsx("button",{className:"flex h-8 w-full cursor-pointer items-center justify-center rounded-lg border-2 border-black px-2 text-center",onClick:()=>{r(),n(e.id)},children:jsx("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.name})},e.id))),jsx(IconButton,{icon:faPlusCircle,text:"",onClick:()=>{const e=t();n(e)}})]})},RobotManager=()=>jsxs("div",{className:"flex h-full",children:[jsx(RobotSidebar,{}),jsx(RobotEditor,{})]}),RobotManagerModal=()=>{const e=useUIState((e=>e.robotManagerModalOpen)),t=useUIState((e=>e.toggleRobotManager));return jsxs(Modal,{show:e,onClose:t,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Robot Manager"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsx(RobotManager,{})}),jsx(Modal.Footer,{})]})},TimelineEditModeButtons=()=>{const e=useRobartState((e=>e.timelineState.mode)),t=useRobartState((e=>e.setTimelineMode));return jsx("div",{className:"flex gap-3 pt-2 pl-3",children:jsxs(Button.Group,{children:[jsx(Button,{color:"ADD"===e?"info":"gray",onClick:()=>t("ADD"),children:jsx(FontAwesomeIcon,{icon:faPlusCircle})}),jsx(Button,{color:"MOVE"===e?"info":"gray",onClick:()=>t("MOVE"),children:jsx(FontAwesomeIcon,{icon:faArrowsLeftRight})}),jsx(Button,{color:"ERASE"===e?"info":"gray",onClick:()=>t("ERASE"),children:jsx(FontAwesomeIcon,{icon:faEraser})})]})})},TimelineSimulationButtons=()=>{const e=useSimulator((e=>e.status)),t=useSimulator((e=>e.play)),n=useSimulator((e=>e.halt)),r=useSimulator((e=>e.pause)),i=useSimulator((e=>e.resume));return jsxs(Fragment,{children:["RUNNING"===e&&jsx(IconButton,{icon:faPause,onClick:r,text:"Pause Sim",color:"gray"}),"PAUSED"===e&&jsx(IconButton,{icon:faPlay,onClick:i,text:"Resume Sim",color:"success"}),"STOPPED"===e&&jsx(IconButton,{icon:faPlay,onClick:t,text:"Run Sim",color:"success"}),"STOPPED"!==e&&jsx(IconButton,{icon:faSquare,onClick:n,text:"Stop Sim",color:"failure"})]})},Timeline=()=>{const e=useRobartState((e=>e.timelineState)),t=Object.values(e.groups),n=useUIState((e=>e.toggleRobotManager));return jsxs("div",{className:"flex h-full w-full flex-col gap-2 rounded bg-blue-100",children:[jsxs("div",{className:"flex",children:[jsx(TimelineEditModeButtons,{}),jsx("div",{className:"flex flex-grow"}),jsxs("div",{className:"flex gap-3 pt-2 pr-3",children:[jsx(TimelineSimulationButtons,{}),jsx(IconButton,{icon:faRobot,onClick:n,text:"Manage Robots"}),jsx(RobotManagerModal,{})]})]}),jsx("div",{className:"overflow-y-auto",children:jsxs("div",{className:"flex flex-shrink-0 gap-2",children:[jsx("div",{className:"ml-2 flex h-full flex-col gap-2",children:t.map((e=>jsx(TimelineGroupLabel,{group:e},e.id)))}),jsxs("div",{className:"relative flex h-full w-full flex-col gap-2 overflow-x-auto",children:[t.map((e=>jsx(TimelineGroupBody,{group:e},e.id))),jsx(TimelineMarker,{})]})]})})]})};function App(){return jsx(Fragment,{children:jsxs("div",{className:"flex h-screen w-screen flex-col gap-1",children:[jsx(NavigationBar,{}),jsx("div",{className:"flex flex-grow",children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"vertical",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:60,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsx(BlockEditorPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,children:jsx(RightPanel,{})})]})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"h-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:40,children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:20,children:jsx(BlockManagerPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{children:jsx(Timeline,{})})]})})]})})]})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(App,{})}));
